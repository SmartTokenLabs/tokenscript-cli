import{e as t,E as r}from"./p-404a2ccb.js";import{p as i,g as n,e,f as s,h as o,i as a,j as h,k as u,v as f,l as c,m as l,a as d,d as v,c as w,o as p,C as y,q as b}from"./p-5267f02f.js";var g=undefined&&undefined.__spreadArray||function(t,r,i){if(i||arguments.length===2)for(var n=0,e=r.length,s;n<e;n++){if(s||!(n in r)){if(!s)s=Array.prototype.slice.call(r,0,n);s[n]=r[n]}}return t.concat(s||Array.prototype.slice.call(r))};var m=function(){function t(t,r,i){this.name=t;this.version=r;this.os=i;this.type="browser"}return t}();var A=function(){function t(t){this.version=t;this.type="node";this.name="node";this.os=i.platform}return t}();var E=function(){function t(t,r,i,n){this.name=t;this.version=r;this.os=i;this.bot=n;this.type="bot-device"}return t}();var M=function(){function t(){this.type="bot";this.bot=true;this.name="bot";this.version=null;this.os=null}return t}();var _=function(){function t(){this.type="react-native";this.name="react-native";this.version=null;this.os=null}return t}();var I=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/;var O=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/;var S=3;var N=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",I]];var C=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function j(t){if(!!t){return P(t)}if(typeof document==="undefined"&&typeof navigator!=="undefined"&&navigator.product==="ReactNative"){return new _}if(typeof navigator!=="undefined"){return P(navigator.userAgent)}return T()}function x(t){return t!==""&&N.reduce((function(r,i){var n=i[0],e=i[1];if(r){return r}var s=e.exec(t);return!!s&&[n,s]}),false)}function P(t){var r=x(t);if(!r){return null}var i=r[0],n=r[1];if(i==="searchbot"){return new M}var e=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);if(e){if(e.length<S){e=g(g([],e,true),D(S-e.length),true)}}else{e=[]}var s=e.join(".");var o=R(t);var a=O.exec(t);if(a&&a[1]){return new E(i,s,o,a[1])}return new m(i,s,o)}function R(t){for(var r=0,i=C.length;r<i;r++){var n=C[r],e=n[0],s=n[1];var o=s.exec(t);if(o){return e}}return null}function T(){var t=typeof i!=="undefined"&&i.version;return t?new A(i.version.slice(1)):null}function D(t){var r=[];for(var i=0;i<t;i++){r.push("0")}return r}var U={};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var B=function(t,r){B=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)if(r.hasOwnProperty(i))t[i]=r[i]};return B(t,r)};function k(t,r){B(t,r);function i(){this.constructor=t}t.prototype=r===null?Object.create(r):(i.prototype=r.prototype,new i)}var $=function(){$=Object.assign||function t(r){for(var i,n=1,e=arguments.length;n<e;n++){i=arguments[n];for(var s in i)if(Object.prototype.hasOwnProperty.call(i,s))r[s]=i[s]}return r};return $.apply(this,arguments)};function F(t,r){var i={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0)i[n]=t[n];if(t!=null&&typeof Object.getOwnPropertySymbols==="function")for(var e=0,n=Object.getOwnPropertySymbols(t);e<n.length;e++){if(r.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(t,n[e]))i[n[e]]=t[n[e]]}return i}function q(t,r,i,n){var e=arguments.length,s=e<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,i):n,o;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")s=Reflect.decorate(t,r,i,n);else for(var a=t.length-1;a>=0;a--)if(o=t[a])s=(e<3?o(s):e>3?o(r,i,s):o(r,i))||s;return e>3&&s&&Object.defineProperty(r,i,s),s}function L(t,r){return function(i,n){r(i,n,t)}}function K(t,r){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(t,r)}function H(t,r,i,n){function e(t){return t instanceof i?t:new i((function(r){r(t)}))}return new(i||(i=Promise))((function(i,s){function o(t){try{h(n.next(t))}catch(t){s(t)}}function a(t){try{h(n["throw"](t))}catch(t){s(t)}}function h(t){t.done?i(t.value):e(t.value).then(o,a)}h((n=n.apply(t,r||[])).next())}))}function G(t,r){var i={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,e,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol==="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(t){return function(r){return h([t,r])}}function h(o){if(n)throw new TypeError("Generator is already executing.");while(i)try{if(n=1,e&&(s=o[0]&2?e["return"]:o[0]?e["throw"]||((s=e["return"])&&s.call(e),0):e.next)&&!(s=s.call(e,o[1])).done)return s;if(e=0,s)o=[o[0]&2,s.value];switch(o[0]){case 0:case 1:s=o;break;case 4:i.label++;return{value:o[1],done:false};case 5:i.label++;e=o[1];o=[0];continue;case 7:o=i.ops.pop();i.trys.pop();continue;default:if(!(s=i.trys,s=s.length>0&&s[s.length-1])&&(o[0]===6||o[0]===2)){i=0;continue}if(o[0]===3&&(!s||o[1]>s[0]&&o[1]<s[3])){i.label=o[1];break}if(o[0]===6&&i.label<s[1]){i.label=s[1];s=o;break}if(s&&i.label<s[2]){i.label=s[2];i.ops.push(o);break}if(s[2])i.ops.pop();i.trys.pop();continue}o=r.call(t,i)}catch(t){o=[6,t];e=0}finally{n=s=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:true}}}function Q(t,r,i,n){if(n===undefined)n=i;t[n]=r[i]}function V(t,r){for(var i in t)if(i!=="default"&&!r.hasOwnProperty(i))r[i]=t[i]}function z(t){var r=typeof Symbol==="function"&&Symbol.iterator,i=r&&t[r],n=0;if(i)return i.call(t);if(t&&typeof t.length==="number")return{next:function(){if(t&&n>=t.length)t=void 0;return{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}function J(t,r){var i=typeof Symbol==="function"&&t[Symbol.iterator];if(!i)return t;var n=i.call(t),e,s=[],o;try{while((r===void 0||r-- >0)&&!(e=n.next()).done)s.push(e.value)}catch(t){o={error:t}}finally{try{if(e&&!e.done&&(i=n["return"]))i.call(n)}finally{if(o)throw o.error}}return s}function Y(){for(var t=[],r=0;r<arguments.length;r++)t=t.concat(J(arguments[r]));return t}function W(){for(var t=0,r=0,i=arguments.length;r<i;r++)t+=arguments[r].length;for(var n=Array(t),e=0,r=0;r<i;r++)for(var s=arguments[r],o=0,a=s.length;o<a;o++,e++)n[e]=s[o];return n}function X(t){return this instanceof X?(this.v=t,this):new X(t)}function Z(t,r,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=i.apply(t,r||[]),e,s=[];return e={},o("next"),o("throw"),o("return"),e[Symbol.asyncIterator]=function(){return this},e;function o(t){if(n[t])e[t]=function(r){return new Promise((function(i,n){s.push([t,r,i,n])>1||a(t,r)}))}}function a(t,r){try{h(n[t](r))}catch(t){c(s[0][3],t)}}function h(t){t.value instanceof X?Promise.resolve(t.value.v).then(u,f):c(s[0][2],t)}function u(t){a("next",t)}function f(t){a("throw",t)}function c(t,r){if(t(r),s.shift(),s.length)a(s[0][0],s[0][1])}}function tt(t){var r,i;return r={},n("next"),n("throw",(function(t){throw t})),n("return"),r[Symbol.iterator]=function(){return this},r;function n(n,e){r[n]=t[n]?function(r){return(i=!i)?{value:X(t[n](r)),done:n==="return"}:e?e(r):r}:e}}function rt(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t[Symbol.asyncIterator],i;return r?r.call(t):(t=typeof z==="function"?z(t):t[Symbol.iterator](),i={},n("next"),n("throw"),n("return"),i[Symbol.asyncIterator]=function(){return this},i);function n(r){i[r]=t[r]&&function(i){return new Promise((function(n,s){i=t[r](i),e(n,s,i.done,i.value)}))}}function e(t,r,i,n){Promise.resolve(n).then((function(r){t({value:r,done:i})}),r)}}function it(t,r){if(Object.defineProperty){Object.defineProperty(t,"raw",{value:r})}else{t.raw=r}return t}function nt(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var i in t)if(Object.hasOwnProperty.call(t,i))r[i]=t[i];r.default=t;return r}function et(t){return t&&t.__esModule?t:{default:t}}function st(t,r){if(!r.has(t)){throw new TypeError("attempted to get private field on non-instance")}return r.get(t)}function ot(t,r,i){if(!r.has(t)){throw new TypeError("attempted to set private field on non-instance")}r.set(t,i);return i}const at=Object.freeze({__proto__:null,__extends:k,get __assign(){return $},__rest:F,__decorate:q,__param:L,__metadata:K,__awaiter:H,__generator:G,__createBinding:Q,__exportStar:V,__values:z,__read:J,__spread:Y,__spreadArrays:W,__await:X,__asyncGenerator:Z,__asyncDelegator:tt,__asyncValues:rt,__makeTemplateObject:it,__importStar:nt,__importDefault:et,__classPrivateFieldGet:st,__classPrivateFieldSet:ot});const ht=n(at);var ut={};var ft={};Object.defineProperty(ft,"__esModule",{value:true});ft.delay=void 0;function ct(t){return new Promise((r=>{setTimeout((()=>{r(true)}),t)}))}ft.delay=ct;var lt={};var dt={};var vt={};Object.defineProperty(vt,"__esModule",{value:true});vt.ONE_THOUSAND=vt.ONE_HUNDRED=void 0;vt.ONE_HUNDRED=100;vt.ONE_THOUSAND=1e3;var wt={};(function(t){Object.defineProperty(t,"__esModule",{value:true});t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0;t.ONE_SECOND=1;t.FIVE_SECONDS=5;t.TEN_SECONDS=10;t.THIRTY_SECONDS=30;t.SIXTY_SECONDS=60;t.ONE_MINUTE=t.SIXTY_SECONDS;t.FIVE_MINUTES=t.ONE_MINUTE*5;t.TEN_MINUTES=t.ONE_MINUTE*10;t.THIRTY_MINUTES=t.ONE_MINUTE*30;t.SIXTY_MINUTES=t.ONE_MINUTE*60;t.ONE_HOUR=t.SIXTY_MINUTES;t.THREE_HOURS=t.ONE_HOUR*3;t.SIX_HOURS=t.ONE_HOUR*6;t.TWELVE_HOURS=t.ONE_HOUR*12;t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24;t.ONE_DAY=t.TWENTY_FOUR_HOURS;t.THREE_DAYS=t.ONE_DAY*3;t.FIVE_DAYS=t.ONE_DAY*5;t.SEVEN_DAYS=t.ONE_DAY*7;t.THIRTY_DAYS=t.ONE_DAY*30;t.ONE_WEEK=t.SEVEN_DAYS;t.TWO_WEEKS=t.ONE_WEEK*2;t.THREE_WEEKS=t.ONE_WEEK*3;t.FOUR_WEEKS=t.ONE_WEEK*4;t.ONE_YEAR=t.ONE_DAY*365})(wt);(function(t){Object.defineProperty(t,"__esModule",{value:true});const r=ht;r.__exportStar(vt,t);r.__exportStar(wt,t)})(dt);Object.defineProperty(lt,"__esModule",{value:true});lt.fromMiliseconds=lt.toMiliseconds=void 0;const pt=dt;function yt(t){return t*pt.ONE_THOUSAND}lt.toMiliseconds=yt;function bt(t){return Math.floor(t/pt.ONE_THOUSAND)}lt.fromMiliseconds=bt;(function(t){Object.defineProperty(t,"__esModule",{value:true});const r=ht;r.__exportStar(ft,t);r.__exportStar(lt,t)})(ut);var gt={};Object.defineProperty(gt,"__esModule",{value:true});gt.Watch=void 0;class mt{constructor(){this.timestamps=new Map}start(t){if(this.timestamps.has(t)){throw new Error(`Watch already started for label: ${t}`)}this.timestamps.set(t,{started:Date.now()})}stop(t){const r=this.get(t);if(typeof r.elapsed!=="undefined"){throw new Error(`Watch already stopped for label: ${t}`)}const i=Date.now()-r.started;this.timestamps.set(t,{started:r.started,elapsed:i})}get(t){const r=this.timestamps.get(t);if(typeof r==="undefined"){throw new Error(`No timestamp found for label: ${t}`)}return r}elapsed(t){const r=this.get(t);const i=r.elapsed||Date.now()-r.started;return i}}gt.Watch=mt;gt.default=mt;var At={};var Et={};Object.defineProperty(Et,"__esModule",{value:true});Et.IWatch=void 0;class Mt{}Et.IWatch=Mt;(function(t){Object.defineProperty(t,"__esModule",{value:true});const r=ht;r.__exportStar(Et,t)})(At);(function(t){Object.defineProperty(t,"__esModule",{value:true});const r=ht;r.__exportStar(ut,t);r.__exportStar(gt,t);r.__exportStar(At,t);r.__exportStar(dt,t)})(U);var _t={};Object.defineProperty(_t,"__esModule",{value:true});_t.getLocalStorage=_t.getLocalStorageOrThrow=_t.getCrypto=_t.getCryptoOrThrow=Dt=_t.getLocation=_t.getLocationOrThrow=Pt=_t.getNavigator=_t.getNavigatorOrThrow=Ct=_t.getDocument=_t.getDocumentOrThrow=_t.getFromWindowOrThrow=_t.getFromWindow=void 0;function It(t){let r=undefined;if(typeof window!=="undefined"&&typeof window[t]!=="undefined"){r=window[t]}return r}_t.getFromWindow=It;function Ot(t){const r=It(t);if(!r){throw new Error(`${t} is not defined in Window`)}return r}_t.getFromWindowOrThrow=Ot;function St(){return Ot("document")}_t.getDocumentOrThrow=St;function Nt(){return It("document")}var Ct=_t.getDocument=Nt;function jt(){return Ot("navigator")}_t.getNavigatorOrThrow=jt;function xt(){return It("navigator")}var Pt=_t.getNavigator=xt;function Rt(){return Ot("location")}_t.getLocationOrThrow=Rt;function Tt(){return It("location")}var Dt=_t.getLocation=Tt;function Ut(){return Ot("crypto")}_t.getCryptoOrThrow=Ut;function Bt(){return It("crypto")}_t.getCrypto=Bt;function kt(){return Ot("localStorage")}_t.getLocalStorageOrThrow=kt;function $t(){return It("localStorage")}_t.getLocalStorage=$t;var Ft={};Object.defineProperty(Ft,"__esModule",{value:true});var qt=Ft.getWindowMetadata=void 0;const Lt=_t;function Kt(){let t;let r;try{t=Lt.getDocumentOrThrow();r=Lt.getLocationOrThrow()}catch(t){return null}function i(){const i=t.getElementsByTagName("link");const n=[];for(let t=0;t<i.length;t++){const e=i[t];const s=e.getAttribute("rel");if(s){if(s.toLowerCase().indexOf("icon")>-1){const t=e.getAttribute("href");if(t){if(t.toLowerCase().indexOf("https:")===-1&&t.toLowerCase().indexOf("http:")===-1&&t.indexOf("//")!==0){let i=r.protocol+"//"+r.host;if(t.indexOf("/")===0){i+=t}else{const n=r.pathname.split("/");n.pop();const e=n.join("/");i+=e+"/"+t}n.push(i)}else if(t.indexOf("//")===0){const i=r.protocol+t;n.push(i)}else{n.push(t)}}}}}return n}function n(...r){const i=t.getElementsByTagName("meta");for(let t=0;t<i.length;t++){const n=i[t];const e=["itemprop","property","name"].map((t=>n.getAttribute(t))).filter((t=>{if(t){return r.includes(t)}return false}));if(e.length&&e){const t=n.getAttribute("content");if(t){return t}}}return""}function e(){let r=n("name","og:site_name","og:title","twitter:title");if(!r){r=t.title}return r}function s(){const t=n("description","og:description","twitter:description","keywords");return t}const o=e();const a=s();const h=r.origin;const u=i();const f={description:a,url:h,icons:u,name:o};return f}qt=Ft.getWindowMetadata=Kt;var Ht={};var Gt=t=>encodeURIComponent(t).replace(/[!'()*]/g,(t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`));var Qt="%[a-f0-9]{2}";var Vt=new RegExp("("+Qt+")|([^%]+?)","gi");var zt=new RegExp("("+Qt+")+","gi");function Jt(t,r){try{return[decodeURIComponent(t.join(""))]}catch(t){}if(t.length===1){return t}r=r||1;var i=t.slice(0,r);var n=t.slice(r);return Array.prototype.concat.call([],Jt(i),Jt(n))}function Yt(t){try{return decodeURIComponent(t)}catch(n){var r=t.match(Vt)||[];for(var i=1;i<r.length;i++){t=Jt(r,i).join("");r=t.match(Vt)||[]}return t}}function Wt(t){var r={"%FE%FF":"��","%FF%FE":"��"};var i=zt.exec(t);while(i){try{r[i[0]]=decodeURIComponent(i[0])}catch(t){var n=Yt(i[0]);if(n!==i[0]){r[i[0]]=n}}i=zt.exec(t)}r["%C2"]="�";var e=Object.keys(r);for(var s=0;s<e.length;s++){var o=e[s];t=t.replace(new RegExp(o,"g"),r[o])}return t}var Xt=function(t){if(typeof t!=="string"){throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`")}try{t=t.replace(/\+/g," ");return decodeURIComponent(t)}catch(r){return Wt(t)}};var Zt=(t,r)=>{if(!(typeof t==="string"&&typeof r==="string")){throw new TypeError("Expected the arguments to be of type `string`")}if(r===""){return[t]}const i=t.indexOf(r);if(i===-1){return[t]}return[t.slice(0,i),t.slice(i+r.length)]};var tr=function(t,r){var i={};var n=Object.keys(t);var e=Array.isArray(r);for(var s=0;s<n.length;s++){var o=n[s];var a=t[o];if(e?r.indexOf(o)!==-1:r(o,a,t)){i[o]=a}}return i};(function(t){const r=Gt;const i=Xt;const n=Zt;const e=tr;const s=t=>t===null||t===undefined;const o=Symbol("encodeFragmentIdentifier");function a(t){switch(t.arrayFormat){case"index":return r=>(i,n)=>{const e=i.length;if(n===undefined||t.skipNull&&n===null||t.skipEmptyString&&n===""){return i}if(n===null){return[...i,[f(r,t),"[",e,"]"].join("")]}return[...i,[f(r,t),"[",f(e,t),"]=",f(n,t)].join("")]};case"bracket":return r=>(i,n)=>{if(n===undefined||t.skipNull&&n===null||t.skipEmptyString&&n===""){return i}if(n===null){return[...i,[f(r,t),"[]"].join("")]}return[...i,[f(r,t),"[]=",f(n,t)].join("")]};case"colon-list-separator":return r=>(i,n)=>{if(n===undefined||t.skipNull&&n===null||t.skipEmptyString&&n===""){return i}if(n===null){return[...i,[f(r,t),":list="].join("")]}return[...i,[f(r,t),":list=",f(n,t)].join("")]};case"comma":case"separator":case"bracket-separator":{const r=t.arrayFormat==="bracket-separator"?"[]=":"=";return i=>(n,e)=>{if(e===undefined||t.skipNull&&e===null||t.skipEmptyString&&e===""){return n}e=e===null?"":e;if(n.length===0){return[[f(i,t),r,f(e,t)].join("")]}return[[n,f(e,t)].join(t.arrayFormatSeparator)]}}default:return r=>(i,n)=>{if(n===undefined||t.skipNull&&n===null||t.skipEmptyString&&n===""){return i}if(n===null){return[...i,f(r,t)]}return[...i,[f(r,t),"=",f(n,t)].join("")]}}}function h(t){let r;switch(t.arrayFormat){case"index":return(t,i,n)=>{r=/\[(\d*)\]$/.exec(t);t=t.replace(/\[\d*\]$/,"");if(!r){n[t]=i;return}if(n[t]===undefined){n[t]={}}n[t][r[1]]=i};case"bracket":return(t,i,n)=>{r=/(\[\])$/.exec(t);t=t.replace(/\[\]$/,"");if(!r){n[t]=i;return}if(n[t]===undefined){n[t]=[i];return}n[t]=[].concat(n[t],i)};case"colon-list-separator":return(t,i,n)=>{r=/(:list)$/.exec(t);t=t.replace(/:list$/,"");if(!r){n[t]=i;return}if(n[t]===undefined){n[t]=[i];return}n[t]=[].concat(n[t],i)};case"comma":case"separator":return(r,i,n)=>{const e=typeof i==="string"&&i.includes(t.arrayFormatSeparator);const s=typeof i==="string"&&!e&&c(i,t).includes(t.arrayFormatSeparator);i=s?c(i,t):i;const o=e||s?i.split(t.arrayFormatSeparator).map((r=>c(r,t))):i===null?i:c(i,t);n[r]=o};case"bracket-separator":return(r,i,n)=>{const e=/(\[\])$/.test(r);r=r.replace(/\[\]$/,"");if(!e){n[r]=i?c(i,t):i;return}const s=i===null?[]:i.split(t.arrayFormatSeparator).map((r=>c(r,t)));if(n[r]===undefined){n[r]=s;return}n[r]=[].concat(n[r],s)};default:return(t,r,i)=>{if(i[t]===undefined){i[t]=r;return}i[t]=[].concat(i[t],r)}}}function u(t){if(typeof t!=="string"||t.length!==1){throw new TypeError("arrayFormatSeparator must be single character string")}}function f(t,i){if(i.encode){return i.strict?r(t):encodeURIComponent(t)}return t}function c(t,r){if(r.decode){return i(t)}return t}function l(t){if(Array.isArray(t)){return t.sort()}if(typeof t==="object"){return l(Object.keys(t)).sort(((t,r)=>Number(t)-Number(r))).map((r=>t[r]))}return t}function d(t){const r=t.indexOf("#");if(r!==-1){t=t.slice(0,r)}return t}function v(t){let r="";const i=t.indexOf("#");if(i!==-1){r=t.slice(i)}return r}function w(t){t=d(t);const r=t.indexOf("?");if(r===-1){return""}return t.slice(r+1)}function p(t,r){if(r.parseNumbers&&!Number.isNaN(Number(t))&&(typeof t==="string"&&t.trim()!=="")){t=Number(t)}else if(r.parseBooleans&&t!==null&&(t.toLowerCase()==="true"||t.toLowerCase()==="false")){t=t.toLowerCase()==="true"}return t}function y(t,r){r=Object.assign({decode:true,sort:true,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:false,parseBooleans:false},r);u(r.arrayFormatSeparator);const i=h(r);const e=Object.create(null);if(typeof t!=="string"){return e}t=t.trim().replace(/^[?#&]/,"");if(!t){return e}for(const s of t.split("&")){if(s===""){continue}let[t,o]=n(r.decode?s.replace(/\+/g," "):s,"=");o=o===undefined?null:["comma","separator","bracket-separator"].includes(r.arrayFormat)?o:c(o,r);i(c(t,r),o,e)}for(const t of Object.keys(e)){const i=e[t];if(typeof i==="object"&&i!==null){for(const t of Object.keys(i)){i[t]=p(i[t],r)}}else{e[t]=p(i,r)}}if(r.sort===false){return e}return(r.sort===true?Object.keys(e).sort():Object.keys(e).sort(r.sort)).reduce(((t,r)=>{const i=e[r];if(Boolean(i)&&typeof i==="object"&&!Array.isArray(i)){t[r]=l(i)}else{t[r]=i}return t}),Object.create(null))}t.extract=w;t.parse=y;t.stringify=(t,r)=>{if(!t){return""}r=Object.assign({encode:true,strict:true,arrayFormat:"none",arrayFormatSeparator:","},r);u(r.arrayFormatSeparator);const i=i=>r.skipNull&&s(t[i])||r.skipEmptyString&&t[i]==="";const n=a(r);const e={};for(const r of Object.keys(t)){if(!i(r)){e[r]=t[r]}}const o=Object.keys(e);if(r.sort!==false){o.sort(r.sort)}return o.map((i=>{const e=t[i];if(e===undefined){return""}if(e===null){return f(i,r)}if(Array.isArray(e)){if(e.length===0&&r.arrayFormat==="bracket-separator"){return f(i,r)+"[]"}return e.reduce(n(i),[]).join("&")}return f(i,r)+"="+f(e,r)})).filter((t=>t.length>0)).join("&")};t.parseUrl=(t,r)=>{r=Object.assign({decode:true},r);const[i,e]=n(t,"#");return Object.assign({url:i.split("?")[0]||"",query:y(w(t),r)},r&&r.parseFragmentIdentifier&&e?{fragmentIdentifier:c(e,r)}:{})};t.stringifyUrl=(r,i)=>{i=Object.assign({encode:true,strict:true,[o]:true},i);const n=d(r.url).split("?")[0]||"";const e=t.extract(r.url);const s=t.parse(e,{sort:false});const a=Object.assign(s,r.query);let h=t.stringify(a,i);if(h){h=`?${h}`}let u=v(r.url);if(r.fragmentIdentifier){u=`#${i[o]?f(r.fragmentIdentifier,i):r.fragmentIdentifier}`}return`${n}${h}${u}`};t.pick=(r,i,n)=>{n=Object.assign({parseFragmentIdentifier:true,[o]:false},n);const{url:s,query:a,fragmentIdentifier:h}=t.parseUrl(r,n);return t.stringifyUrl({url:s,query:e(a,i),fragmentIdentifier:h},n)};t.exclude=(r,i,n)=>{const e=Array.isArray(i)?t=>!i.includes(t):(t,r)=>!i(t,r);return t.pick(r,e,n)}})(Ht);var rr={};var ir={};var nr={};var er={};(function(t){Object.defineProperty(t,"__esModule",{value:true});function r(t,r){var i=t>>>16&65535,n=t&65535;var e=r>>>16&65535,s=r&65535;return n*s+(i*s+n*e<<16>>>0)|0}t.mul=Math.imul||r;function i(t,r){return t+r|0}t.add=i;function n(t,r){return t-r|0}t.sub=n;function e(t,r){return t<<r|t>>>32-r}t.rotl=e;function s(t,r){return t<<32-r|t>>>r}t.rotr=s;function o(t){return typeof t==="number"&&isFinite(t)&&Math.floor(t)===t}t.isInteger=Number.isInteger||o;t.MAX_SAFE_INTEGER=9007199254740991;t.isSafeInteger=function(r){return t.isInteger(r)&&(r>=-t.MAX_SAFE_INTEGER&&r<=t.MAX_SAFE_INTEGER)}})(er);Object.defineProperty(nr,"__esModule",{value:true});var sr=er;function or(t,r){if(r===void 0){r=0}return(t[r+0]<<8|t[r+1])<<16>>16}nr.readInt16BE=or;function ar(t,r){if(r===void 0){r=0}return(t[r+0]<<8|t[r+1])>>>0}nr.readUint16BE=ar;function hr(t,r){if(r===void 0){r=0}return(t[r+1]<<8|t[r])<<16>>16}nr.readInt16LE=hr;function ur(t,r){if(r===void 0){r=0}return(t[r+1]<<8|t[r])>>>0}nr.readUint16LE=ur;function fr(t,r,i){if(r===void 0){r=new Uint8Array(2)}if(i===void 0){i=0}r[i+0]=t>>>8;r[i+1]=t>>>0;return r}nr.writeUint16BE=fr;nr.writeInt16BE=fr;function cr(t,r,i){if(r===void 0){r=new Uint8Array(2)}if(i===void 0){i=0}r[i+0]=t>>>0;r[i+1]=t>>>8;return r}nr.writeUint16LE=cr;nr.writeInt16LE=cr;function lr(t,r){if(r===void 0){r=0}return t[r]<<24|t[r+1]<<16|t[r+2]<<8|t[r+3]}nr.readInt32BE=lr;function dr(t,r){if(r===void 0){r=0}return(t[r]<<24|t[r+1]<<16|t[r+2]<<8|t[r+3])>>>0}nr.readUint32BE=dr;function vr(t,r){if(r===void 0){r=0}return t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]}nr.readInt32LE=vr;function wr(t,r){if(r===void 0){r=0}return(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r])>>>0}nr.readUint32LE=wr;function pr(t,r,i){if(r===void 0){r=new Uint8Array(4)}if(i===void 0){i=0}r[i+0]=t>>>24;r[i+1]=t>>>16;r[i+2]=t>>>8;r[i+3]=t>>>0;return r}nr.writeUint32BE=pr;nr.writeInt32BE=pr;function yr(t,r,i){if(r===void 0){r=new Uint8Array(4)}if(i===void 0){i=0}r[i+0]=t>>>0;r[i+1]=t>>>8;r[i+2]=t>>>16;r[i+3]=t>>>24;return r}nr.writeUint32LE=yr;nr.writeInt32LE=yr;function br(t,r){if(r===void 0){r=0}var i=lr(t,r);var n=lr(t,r+4);return i*4294967296+n-(n>>31)*4294967296}nr.readInt64BE=br;function gr(t,r){if(r===void 0){r=0}var i=dr(t,r);var n=dr(t,r+4);return i*4294967296+n}nr.readUint64BE=gr;function mr(t,r){if(r===void 0){r=0}var i=vr(t,r);var n=vr(t,r+4);return n*4294967296+i-(i>>31)*4294967296}nr.readInt64LE=mr;function Ar(t,r){if(r===void 0){r=0}var i=wr(t,r);var n=wr(t,r+4);return n*4294967296+i}nr.readUint64LE=Ar;function Er(t,r,i){if(r===void 0){r=new Uint8Array(8)}if(i===void 0){i=0}pr(t/4294967296>>>0,r,i);pr(t>>>0,r,i+4);return r}nr.writeUint64BE=Er;nr.writeInt64BE=Er;function Mr(t,r,i){if(r===void 0){r=new Uint8Array(8)}if(i===void 0){i=0}yr(t>>>0,r,i);yr(t/4294967296>>>0,r,i+4);return r}nr.writeUint64LE=Mr;nr.writeInt64LE=Mr;function _r(t,r,i){if(i===void 0){i=0}if(t%8!==0){throw new Error("readUintBE supports only bitLengths divisible by 8")}if(t/8>r.length-i){throw new Error("readUintBE: array is too short for the given bitLength")}var n=0;var e=1;for(var s=t/8+i-1;s>=i;s--){n+=r[s]*e;e*=256}return n}nr.readUintBE=_r;function Ir(t,r,i){if(i===void 0){i=0}if(t%8!==0){throw new Error("readUintLE supports only bitLengths divisible by 8")}if(t/8>r.length-i){throw new Error("readUintLE: array is too short for the given bitLength")}var n=0;var e=1;for(var s=i;s<i+t/8;s++){n+=r[s]*e;e*=256}return n}nr.readUintLE=Ir;function Or(t,r,i,n){if(i===void 0){i=new Uint8Array(t/8)}if(n===void 0){n=0}if(t%8!==0){throw new Error("writeUintBE supports only bitLengths divisible by 8")}if(!sr.isSafeInteger(r)){throw new Error("writeUintBE value must be an integer")}var e=1;for(var s=t/8+n-1;s>=n;s--){i[s]=r/e&255;e*=256}return i}nr.writeUintBE=Or;function Sr(t,r,i,n){if(i===void 0){i=new Uint8Array(t/8)}if(n===void 0){n=0}if(t%8!==0){throw new Error("writeUintLE supports only bitLengths divisible by 8")}if(!sr.isSafeInteger(r)){throw new Error("writeUintLE value must be an integer")}var e=1;for(var s=n;s<n+t/8;s++){i[s]=r/e&255;e*=256}return i}nr.writeUintLE=Sr;function Nr(t,r){if(r===void 0){r=0}var i=new DataView(t.buffer,t.byteOffset,t.byteLength);return i.getFloat32(r)}nr.readFloat32BE=Nr;function Cr(t,r){if(r===void 0){r=0}var i=new DataView(t.buffer,t.byteOffset,t.byteLength);return i.getFloat32(r,true)}nr.readFloat32LE=Cr;function jr(t,r){if(r===void 0){r=0}var i=new DataView(t.buffer,t.byteOffset,t.byteLength);return i.getFloat64(r)}nr.readFloat64BE=jr;function xr(t,r){if(r===void 0){r=0}var i=new DataView(t.buffer,t.byteOffset,t.byteLength);return i.getFloat64(r,true)}nr.readFloat64LE=xr;function Pr(t,r,i){if(r===void 0){r=new Uint8Array(4)}if(i===void 0){i=0}var n=new DataView(r.buffer,r.byteOffset,r.byteLength);n.setFloat32(i,t);return r}nr.writeFloat32BE=Pr;function Rr(t,r,i){if(r===void 0){r=new Uint8Array(4)}if(i===void 0){i=0}var n=new DataView(r.buffer,r.byteOffset,r.byteLength);n.setFloat32(i,t,true);return r}nr.writeFloat32LE=Rr;function Tr(t,r,i){if(r===void 0){r=new Uint8Array(8)}if(i===void 0){i=0}var n=new DataView(r.buffer,r.byteOffset,r.byteLength);n.setFloat64(i,t);return r}nr.writeFloat64BE=Tr;function Dr(t,r,i){if(r===void 0){r=new Uint8Array(8)}if(i===void 0){i=0}var n=new DataView(r.buffer,r.byteOffset,r.byteLength);n.setFloat64(i,t,true);return r}nr.writeFloat64LE=Dr;var Ur={};Object.defineProperty(Ur,"__esModule",{value:true});function Br(t){for(var r=0;r<t.length;r++){t[r]=0}return t}Ur.wipe=Br;Object.defineProperty(ir,"__esModule",{value:true});var kr=nr;var $r=Ur;var Fr=20;function qr(t,r,i){var n=1634760805;var e=857760878;var s=2036477234;var o=1797285236;var a=i[3]<<24|i[2]<<16|i[1]<<8|i[0];var h=i[7]<<24|i[6]<<16|i[5]<<8|i[4];var u=i[11]<<24|i[10]<<16|i[9]<<8|i[8];var f=i[15]<<24|i[14]<<16|i[13]<<8|i[12];var c=i[19]<<24|i[18]<<16|i[17]<<8|i[16];var l=i[23]<<24|i[22]<<16|i[21]<<8|i[20];var d=i[27]<<24|i[26]<<16|i[25]<<8|i[24];var v=i[31]<<24|i[30]<<16|i[29]<<8|i[28];var w=r[3]<<24|r[2]<<16|r[1]<<8|r[0];var p=r[7]<<24|r[6]<<16|r[5]<<8|r[4];var y=r[11]<<24|r[10]<<16|r[9]<<8|r[8];var b=r[15]<<24|r[14]<<16|r[13]<<8|r[12];var g=n;var m=e;var A=s;var E=o;var M=a;var _=h;var I=u;var O=f;var S=c;var N=l;var C=d;var j=v;var x=w;var P=p;var R=y;var T=b;for(var D=0;D<Fr;D+=2){g=g+M|0;x^=g;x=x>>>32-16|x<<16;S=S+x|0;M^=S;M=M>>>32-12|M<<12;m=m+_|0;P^=m;P=P>>>32-16|P<<16;N=N+P|0;_^=N;_=_>>>32-12|_<<12;A=A+I|0;R^=A;R=R>>>32-16|R<<16;C=C+R|0;I^=C;I=I>>>32-12|I<<12;E=E+O|0;T^=E;T=T>>>32-16|T<<16;j=j+T|0;O^=j;O=O>>>32-12|O<<12;A=A+I|0;R^=A;R=R>>>32-8|R<<8;C=C+R|0;I^=C;I=I>>>32-7|I<<7;E=E+O|0;T^=E;T=T>>>32-8|T<<8;j=j+T|0;O^=j;O=O>>>32-7|O<<7;m=m+_|0;P^=m;P=P>>>32-8|P<<8;N=N+P|0;_^=N;_=_>>>32-7|_<<7;g=g+M|0;x^=g;x=x>>>32-8|x<<8;S=S+x|0;M^=S;M=M>>>32-7|M<<7;g=g+_|0;T^=g;T=T>>>32-16|T<<16;C=C+T|0;_^=C;_=_>>>32-12|_<<12;m=m+I|0;x^=m;x=x>>>32-16|x<<16;j=j+x|0;I^=j;I=I>>>32-12|I<<12;A=A+O|0;P^=A;P=P>>>32-16|P<<16;S=S+P|0;O^=S;O=O>>>32-12|O<<12;E=E+M|0;R^=E;R=R>>>32-16|R<<16;N=N+R|0;M^=N;M=M>>>32-12|M<<12;A=A+O|0;P^=A;P=P>>>32-8|P<<8;S=S+P|0;O^=S;O=O>>>32-7|O<<7;E=E+M|0;R^=E;R=R>>>32-8|R<<8;N=N+R|0;M^=N;M=M>>>32-7|M<<7;m=m+I|0;x^=m;x=x>>>32-8|x<<8;j=j+x|0;I^=j;I=I>>>32-7|I<<7;g=g+_|0;T^=g;T=T>>>32-8|T<<8;C=C+T|0;_^=C;_=_>>>32-7|_<<7}kr.writeUint32LE(g+n|0,t,0);kr.writeUint32LE(m+e|0,t,4);kr.writeUint32LE(A+s|0,t,8);kr.writeUint32LE(E+o|0,t,12);kr.writeUint32LE(M+a|0,t,16);kr.writeUint32LE(_+h|0,t,20);kr.writeUint32LE(I+u|0,t,24);kr.writeUint32LE(O+f|0,t,28);kr.writeUint32LE(S+c|0,t,32);kr.writeUint32LE(N+l|0,t,36);kr.writeUint32LE(C+d|0,t,40);kr.writeUint32LE(j+v|0,t,44);kr.writeUint32LE(x+w|0,t,48);kr.writeUint32LE(P+p|0,t,52);kr.writeUint32LE(R+y|0,t,56);kr.writeUint32LE(T+b|0,t,60)}function Lr(t,r,i,n,e){if(e===void 0){e=0}if(t.length!==32){throw new Error("ChaCha: key size must be 32 bytes")}if(n.length<i.length){throw new Error("ChaCha: destination is shorter than source")}var s;var o;if(e===0){if(r.length!==8&&r.length!==12){throw new Error("ChaCha nonce must be 8 or 12 bytes")}s=new Uint8Array(16);o=s.length-r.length;s.set(r,o)}else{if(r.length!==16){throw new Error("ChaCha nonce with counter must be 16 bytes")}s=r;o=e}var a=new Uint8Array(64);for(var h=0;h<i.length;h+=64){qr(a,s,t);for(var u=h;u<h+64&&u<i.length;u++){n[u]=i[u]^a[u-h]}Hr(s,0,o)}$r.wipe(a);if(e===0){$r.wipe(s)}return n}ir.streamXOR=Lr;function Kr(t,r,i,n){if(n===void 0){n=0}$r.wipe(i);return Lr(t,r,i,i,n)}ir.stream=Kr;function Hr(t,r,i){var n=1;while(i--){n=n+(t[r]&255)|0;t[r]=n&255;n>>>=8;r++}if(n>0){throw new Error("ChaCha: counter overflow")}}var Gr={};var Qr={};Object.defineProperty(Qr,"__esModule",{value:true});function Vr(t,r,i){return~(t-1)&r|t-1&i}Qr.select=Vr;function zr(t,r){return(t|0)-(r|0)-1>>>31&1}Qr.lessOrEqual=zr;function Jr(t,r){if(t.length!==r.length){return 0}var i=0;for(var n=0;n<t.length;n++){i|=t[n]^r[n]}return 1&i-1>>>8}Qr.compare=Jr;function Yr(t,r){if(t.length===0||r.length===0){return false}return Jr(t,r)!==0}Qr.equal=Yr;(function(t){Object.defineProperty(t,"__esModule",{value:true});var r=Qr;var i=Ur;t.DIGEST_LENGTH=16;var n=function(){function r(r){this.digestLength=t.DIGEST_LENGTH;this._buffer=new Uint8Array(16);this._r=new Uint16Array(10);this._h=new Uint16Array(10);this._pad=new Uint16Array(8);this._leftover=0;this._fin=0;this._finished=false;var i=r[0]|r[1]<<8;this._r[0]=i&8191;var n=r[2]|r[3]<<8;this._r[1]=(i>>>13|n<<3)&8191;var e=r[4]|r[5]<<8;this._r[2]=(n>>>10|e<<6)&7939;var s=r[6]|r[7]<<8;this._r[3]=(e>>>7|s<<9)&8191;var o=r[8]|r[9]<<8;this._r[4]=(s>>>4|o<<12)&255;this._r[5]=o>>>1&8190;var a=r[10]|r[11]<<8;this._r[6]=(o>>>14|a<<2)&8191;var h=r[12]|r[13]<<8;this._r[7]=(a>>>11|h<<5)&8065;var u=r[14]|r[15]<<8;this._r[8]=(h>>>8|u<<8)&8191;this._r[9]=u>>>5&127;this._pad[0]=r[16]|r[17]<<8;this._pad[1]=r[18]|r[19]<<8;this._pad[2]=r[20]|r[21]<<8;this._pad[3]=r[22]|r[23]<<8;this._pad[4]=r[24]|r[25]<<8;this._pad[5]=r[26]|r[27]<<8;this._pad[6]=r[28]|r[29]<<8;this._pad[7]=r[30]|r[31]<<8}r.prototype._blocks=function(t,r,i){var n=this._fin?0:1<<11;var e=this._h[0],s=this._h[1],o=this._h[2],a=this._h[3],h=this._h[4],u=this._h[5],f=this._h[6],c=this._h[7],l=this._h[8],d=this._h[9];var v=this._r[0],w=this._r[1],p=this._r[2],y=this._r[3],b=this._r[4],g=this._r[5],m=this._r[6],A=this._r[7],E=this._r[8],M=this._r[9];while(i>=16){var _=t[r+0]|t[r+1]<<8;e+=_&8191;var I=t[r+2]|t[r+3]<<8;s+=(_>>>13|I<<3)&8191;var O=t[r+4]|t[r+5]<<8;o+=(I>>>10|O<<6)&8191;var S=t[r+6]|t[r+7]<<8;a+=(O>>>7|S<<9)&8191;var N=t[r+8]|t[r+9]<<8;h+=(S>>>4|N<<12)&8191;u+=N>>>1&8191;var C=t[r+10]|t[r+11]<<8;f+=(N>>>14|C<<2)&8191;var j=t[r+12]|t[r+13]<<8;c+=(C>>>11|j<<5)&8191;var x=t[r+14]|t[r+15]<<8;l+=(j>>>8|x<<8)&8191;d+=x>>>5|n;var P=0;var R=P;R+=e*v;R+=s*(5*M);R+=o*(5*E);R+=a*(5*A);R+=h*(5*m);P=R>>>13;R&=8191;R+=u*(5*g);R+=f*(5*b);R+=c*(5*y);R+=l*(5*p);R+=d*(5*w);P+=R>>>13;R&=8191;var T=P;T+=e*w;T+=s*v;T+=o*(5*M);T+=a*(5*E);T+=h*(5*A);P=T>>>13;T&=8191;T+=u*(5*m);T+=f*(5*g);T+=c*(5*b);T+=l*(5*y);T+=d*(5*p);P+=T>>>13;T&=8191;var D=P;D+=e*p;D+=s*w;D+=o*v;D+=a*(5*M);D+=h*(5*E);P=D>>>13;D&=8191;D+=u*(5*A);D+=f*(5*m);D+=c*(5*g);D+=l*(5*b);D+=d*(5*y);P+=D>>>13;D&=8191;var U=P;U+=e*y;U+=s*p;U+=o*w;U+=a*v;U+=h*(5*M);P=U>>>13;U&=8191;U+=u*(5*E);U+=f*(5*A);U+=c*(5*m);U+=l*(5*g);U+=d*(5*b);P+=U>>>13;U&=8191;var B=P;B+=e*b;B+=s*y;B+=o*p;B+=a*w;B+=h*v;P=B>>>13;B&=8191;B+=u*(5*M);B+=f*(5*E);B+=c*(5*A);B+=l*(5*m);B+=d*(5*g);P+=B>>>13;B&=8191;var k=P;k+=e*g;k+=s*b;k+=o*y;k+=a*p;k+=h*w;P=k>>>13;k&=8191;k+=u*v;k+=f*(5*M);k+=c*(5*E);k+=l*(5*A);k+=d*(5*m);P+=k>>>13;k&=8191;var $=P;$+=e*m;$+=s*g;$+=o*b;$+=a*y;$+=h*p;P=$>>>13;$&=8191;$+=u*w;$+=f*v;$+=c*(5*M);$+=l*(5*E);$+=d*(5*A);P+=$>>>13;$&=8191;var F=P;F+=e*A;F+=s*m;F+=o*g;F+=a*b;F+=h*y;P=F>>>13;F&=8191;F+=u*p;F+=f*w;F+=c*v;F+=l*(5*M);F+=d*(5*E);P+=F>>>13;F&=8191;var q=P;q+=e*E;q+=s*A;q+=o*m;q+=a*g;q+=h*b;P=q>>>13;q&=8191;q+=u*y;q+=f*p;q+=c*w;q+=l*v;q+=d*(5*M);P+=q>>>13;q&=8191;var L=P;L+=e*M;L+=s*E;L+=o*A;L+=a*m;L+=h*g;P=L>>>13;L&=8191;L+=u*b;L+=f*y;L+=c*p;L+=l*w;L+=d*v;P+=L>>>13;L&=8191;P=(P<<2)+P|0;P=P+R|0;R=P&8191;P=P>>>13;T+=P;e=R;s=T;o=D;a=U;h=B;u=k;f=$;c=F;l=q;d=L;r+=16;i-=16}this._h[0]=e;this._h[1]=s;this._h[2]=o;this._h[3]=a;this._h[4]=h;this._h[5]=u;this._h[6]=f;this._h[7]=c;this._h[8]=l;this._h[9]=d};r.prototype.finish=function(t,r){if(r===void 0){r=0}var i=new Uint16Array(10);var n;var e;var s;var o;if(this._leftover){o=this._leftover;this._buffer[o++]=1;for(;o<16;o++){this._buffer[o]=0}this._fin=1;this._blocks(this._buffer,0,16)}n=this._h[1]>>>13;this._h[1]&=8191;for(o=2;o<10;o++){this._h[o]+=n;n=this._h[o]>>>13;this._h[o]&=8191}this._h[0]+=n*5;n=this._h[0]>>>13;this._h[0]&=8191;this._h[1]+=n;n=this._h[1]>>>13;this._h[1]&=8191;this._h[2]+=n;i[0]=this._h[0]+5;n=i[0]>>>13;i[0]&=8191;for(o=1;o<10;o++){i[o]=this._h[o]+n;n=i[o]>>>13;i[o]&=8191}i[9]-=1<<13;e=(n^1)-1;for(o=0;o<10;o++){i[o]&=e}e=~e;for(o=0;o<10;o++){this._h[o]=this._h[o]&e|i[o]}this._h[0]=(this._h[0]|this._h[1]<<13)&65535;this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535;this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535;this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535;this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535;this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535;this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535;this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535;s=this._h[0]+this._pad[0];this._h[0]=s&65535;for(o=1;o<8;o++){s=(this._h[o]+this._pad[o]|0)+(s>>>16)|0;this._h[o]=s&65535}t[r+0]=this._h[0]>>>0;t[r+1]=this._h[0]>>>8;t[r+2]=this._h[1]>>>0;t[r+3]=this._h[1]>>>8;t[r+4]=this._h[2]>>>0;t[r+5]=this._h[2]>>>8;t[r+6]=this._h[3]>>>0;t[r+7]=this._h[3]>>>8;t[r+8]=this._h[4]>>>0;t[r+9]=this._h[4]>>>8;t[r+10]=this._h[5]>>>0;t[r+11]=this._h[5]>>>8;t[r+12]=this._h[6]>>>0;t[r+13]=this._h[6]>>>8;t[r+14]=this._h[7]>>>0;t[r+15]=this._h[7]>>>8;this._finished=true;return this};r.prototype.update=function(t){var r=0;var i=t.length;var n;if(this._leftover){n=16-this._leftover;if(n>i){n=i}for(var e=0;e<n;e++){this._buffer[this._leftover+e]=t[r+e]}i-=n;r+=n;this._leftover+=n;if(this._leftover<16){return this}this._blocks(this._buffer,0,16);this._leftover=0}if(i>=16){n=i-i%16;this._blocks(t,r,n);r+=n;i-=n}if(i){for(var e=0;e<i;e++){this._buffer[this._leftover+e]=t[r+e]}this._leftover+=i}return this};r.prototype.digest=function(){if(this._finished){throw new Error("Poly1305 was finished")}var t=new Uint8Array(16);this.finish(t);return t};r.prototype.clean=function(){i.wipe(this._buffer);i.wipe(this._r);i.wipe(this._h);i.wipe(this._pad);this._leftover=0;this._fin=0;this._finished=true;return this};return r}();t.Poly1305=n;function e(t,r){var i=new n(t);i.update(r);var e=i.digest();i.clean();return e}t.oneTimeAuth=e;function s(i,n){if(i.length!==t.DIGEST_LENGTH||n.length!==t.DIGEST_LENGTH){return false}return r.equal(i,n)}t.equal=s})(Gr);(function(t){Object.defineProperty(t,"__esModule",{value:true});var r=ir;var i=Gr;var n=Ur;var e=nr;var s=Qr;t.KEY_LENGTH=32;t.NONCE_LENGTH=12;t.TAG_LENGTH=16;var o=new Uint8Array(16);var a=function(){function a(r){this.nonceLength=t.NONCE_LENGTH;this.tagLength=t.TAG_LENGTH;if(r.length!==t.KEY_LENGTH){throw new Error("ChaCha20Poly1305 needs 32-byte key")}this._key=new Uint8Array(r)}a.prototype.seal=function(t,i,e,s){if(t.length>16){throw new Error("ChaCha20Poly1305: incorrect nonce length")}var o=new Uint8Array(16);o.set(t,o.length-t.length);var a=new Uint8Array(32);r.stream(this._key,o,a,4);var h=i.length+this.tagLength;var u;if(s){if(s.length!==h){throw new Error("ChaCha20Poly1305: incorrect destination length")}u=s}else{u=new Uint8Array(h)}r.streamXOR(this._key,o,i,u,4);this._authenticate(u.subarray(u.length-this.tagLength,u.length),a,u.subarray(0,u.length-this.tagLength),e);n.wipe(o);return u};a.prototype.open=function(t,i,e,o){if(t.length>16){throw new Error("ChaCha20Poly1305: incorrect nonce length")}if(i.length<this.tagLength){return null}var a=new Uint8Array(16);a.set(t,a.length-t.length);var h=new Uint8Array(32);r.stream(this._key,a,h,4);var u=new Uint8Array(this.tagLength);this._authenticate(u,h,i.subarray(0,i.length-this.tagLength),e);if(!s.equal(u,i.subarray(i.length-this.tagLength,i.length))){return null}var f=i.length-this.tagLength;var c;if(o){if(o.length!==f){throw new Error("ChaCha20Poly1305: incorrect destination length")}c=o}else{c=new Uint8Array(f)}r.streamXOR(this._key,a,i.subarray(0,i.length-this.tagLength),c,4);n.wipe(a);return c};a.prototype.clean=function(){n.wipe(this._key);return this};a.prototype._authenticate=function(t,r,s,a){var h=new i.Poly1305(r);if(a){h.update(a);if(a.length%16>0){h.update(o.subarray(a.length%16))}}h.update(s);if(s.length%16>0){h.update(o.subarray(s.length%16))}var u=new Uint8Array(8);if(a){e.writeUint64LE(a.length,u)}h.update(u);e.writeUint64LE(s.length,u);h.update(u);var f=h.digest();for(var c=0;c<f.length;c++){t[c]=f[c]}h.clean();n.wipe(f);n.wipe(u)};return a}();t.ChaCha20Poly1305=a})(rr);var Wr={};var Xr={};var Zr={};Object.defineProperty(Zr,"__esModule",{value:true});function ti(t){return typeof t.saveState!=="undefined"&&typeof t.restoreState!=="undefined"&&typeof t.cleanSavedState!=="undefined"}Zr.isSerializableHash=ti;Object.defineProperty(Xr,"__esModule",{value:true});var ri=Zr;var ii=Qr;var ni=Ur;var ei=function(){function t(t,r){this._finished=false;this._inner=new t;this._outer=new t;this.blockSize=this._outer.blockSize;this.digestLength=this._outer.digestLength;var i=new Uint8Array(this.blockSize);if(r.length>this.blockSize){this._inner.update(r).finish(i).clean()}else{i.set(r)}for(var n=0;n<i.length;n++){i[n]^=54}this._inner.update(i);for(var n=0;n<i.length;n++){i[n]^=54^92}this._outer.update(i);if(ri.isSerializableHash(this._inner)&&ri.isSerializableHash(this._outer)){this._innerKeyedState=this._inner.saveState();this._outerKeyedState=this._outer.saveState()}ni.wipe(i)}t.prototype.reset=function(){if(!ri.isSerializableHash(this._inner)||!ri.isSerializableHash(this._outer)){throw new Error("hmac: can't reset() because hash doesn't implement restoreState()")}this._inner.restoreState(this._innerKeyedState);this._outer.restoreState(this._outerKeyedState);this._finished=false;return this};t.prototype.clean=function(){if(ri.isSerializableHash(this._inner)){this._inner.cleanSavedState(this._innerKeyedState)}if(ri.isSerializableHash(this._outer)){this._outer.cleanSavedState(this._outerKeyedState)}this._inner.clean();this._outer.clean()};t.prototype.update=function(t){this._inner.update(t);return this};t.prototype.finish=function(t){if(this._finished){this._outer.finish(t);return this}this._inner.finish(t);this._outer.update(t.subarray(0,this.digestLength)).finish(t);this._finished=true;return this};t.prototype.digest=function(){var t=new Uint8Array(this.digestLength);this.finish(t);return t};t.prototype.saveState=function(){if(!ri.isSerializableHash(this._inner)){throw new Error("hmac: can't saveState() because hash doesn't implement it")}return this._inner.saveState()};t.prototype.restoreState=function(t){if(!ri.isSerializableHash(this._inner)||!ri.isSerializableHash(this._outer)){throw new Error("hmac: can't restoreState() because hash doesn't implement it")}this._inner.restoreState(t);this._outer.restoreState(this._outerKeyedState);this._finished=false;return this};t.prototype.cleanSavedState=function(t){if(!ri.isSerializableHash(this._inner)){throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it")}this._inner.cleanSavedState(t)};return t}();Xr.HMAC=ei;function si(t,r,i){var n=new ei(t,r);n.update(i);var e=n.digest();n.clean();return e}Xr.hmac=si;Xr.equal=ii.equal;Object.defineProperty(Wr,"__esModule",{value:true});var oi=Xr;var ai=Ur;var hi=function(){function t(t,r,i,n){if(i===void 0){i=new Uint8Array(0)}this._counter=new Uint8Array(1);this._hash=t;this._info=n;var e=oi.hmac(this._hash,i,r);this._hmac=new oi.HMAC(t,e);this._buffer=new Uint8Array(this._hmac.digestLength);this._bufpos=this._buffer.length}t.prototype._fillBuffer=function(){this._counter[0]++;var t=this._counter[0];if(t===0){throw new Error("hkdf: cannot expand more")}this._hmac.reset();if(t>1){this._hmac.update(this._buffer)}if(this._info){this._hmac.update(this._info)}this._hmac.update(this._counter);this._hmac.finish(this._buffer);this._bufpos=0};t.prototype.expand=function(t){var r=new Uint8Array(t);for(var i=0;i<r.length;i++){if(this._bufpos===this._buffer.length){this._fillBuffer()}r[i]=this._buffer[this._bufpos++]}return r};t.prototype.clean=function(){this._hmac.clean();ai.wipe(this._buffer);ai.wipe(this._counter);this._bufpos=0};return t}();var ui=Wr.HKDF=hi;var fi={};var ci={};var li={};Object.defineProperty(li,"__esModule",{value:true});li.BrowserRandomSource=void 0;const di=65536;class vi{constructor(){this.isAvailable=false;this.isInstantiated=false;const t=typeof self!=="undefined"?self.crypto||self.msCrypto:null;if(t&&t.getRandomValues!==undefined){this._crypto=t;this.isAvailable=true;this.isInstantiated=true}}randomBytes(t){if(!this.isAvailable||!this._crypto){throw new Error("Browser random byte generator is not available.")}const r=new Uint8Array(t);for(let t=0;t<r.length;t+=di){this._crypto.getRandomValues(r.subarray(t,t+Math.min(r.length-t,di)))}return r}}li.BrowserRandomSource=vi;var wi={};const pi={};const yi=Object.freeze({__proto__:null,default:pi});const bi=n(yi);Object.defineProperty(wi,"__esModule",{value:true});wi.NodeRandomSource=void 0;const gi=Ur;class mi{constructor(){this.isAvailable=false;this.isInstantiated=false;if(typeof e!=="undefined"){const t=bi;if(t&&t.randomBytes){this._crypto=t;this.isAvailable=true;this.isInstantiated=true}}}randomBytes(t){if(!this.isAvailable||!this._crypto){throw new Error("Node.js random byte generator is not available.")}let r=this._crypto.randomBytes(t);if(r.length!==t){throw new Error("NodeRandomSource: got fewer bytes than requested")}const i=new Uint8Array(t);for(let t=0;t<i.length;t++){i[t]=r[t]}(0,gi.wipe)(r);return i}}wi.NodeRandomSource=mi;Object.defineProperty(ci,"__esModule",{value:true});ci.SystemRandomSource=void 0;const Ai=li;const Ei=wi;class Mi{constructor(){this.isAvailable=false;this.name="";this._source=new Ai.BrowserRandomSource;if(this._source.isAvailable){this.isAvailable=true;this.name="Browser";return}this._source=new Ei.NodeRandomSource;if(this._source.isAvailable){this.isAvailable=true;this.name="Node";return}}randomBytes(t){if(!this.isAvailable){throw new Error("System random byte generator is not available.")}return this._source.randomBytes(t)}}ci.SystemRandomSource=Mi;(function(t){Object.defineProperty(t,"__esModule",{value:true});t.randomStringForEntropy=t.randomString=t.randomUint32=t.randomBytes=t.defaultRandomSource=void 0;const r=ci;const i=nr;const n=Ur;t.defaultRandomSource=new r.SystemRandomSource;function e(r,i=t.defaultRandomSource){return i.randomBytes(r)}t.randomBytes=e;function s(r=t.defaultRandomSource){const s=e(4,r);const o=(0,i.readUint32LE)(s);(0,n.wipe)(s);return o}t.randomUint32=s;const o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function a(r,i=o,s=t.defaultRandomSource){if(i.length<2){throw new Error("randomString charset is too short")}if(i.length>256){throw new Error("randomString charset is too long")}let a="";const h=i.length;const u=256-256%h;while(r>0){const t=e(Math.ceil(r*256/u),s);for(let n=0;n<t.length&&r>0;n++){const e=t[n];if(e<u){a+=i.charAt(e%h);r--}}(0,n.wipe)(t)}return a}t.randomString=a;function h(r,i=o,n=t.defaultRandomSource){const e=Math.ceil(r/(Math.log(i.length)/Math.LN2));return a(e,i,n)}t.randomStringForEntropy=h})(fi);var _i={};(function(t){Object.defineProperty(t,"__esModule",{value:true});var r=nr;var i=Ur;t.DIGEST_LENGTH=32;t.BLOCK_SIZE=64;var n=function(){function n(){this.digestLength=t.DIGEST_LENGTH;this.blockSize=t.BLOCK_SIZE;this._state=new Int32Array(8);this._temp=new Int32Array(64);this._buffer=new Uint8Array(128);this._bufferLength=0;this._bytesHashed=0;this._finished=false;this.reset()}n.prototype._initState=function(){this._state[0]=1779033703;this._state[1]=3144134277;this._state[2]=1013904242;this._state[3]=2773480762;this._state[4]=1359893119;this._state[5]=2600822924;this._state[6]=528734635;this._state[7]=1541459225};n.prototype.reset=function(){this._initState();this._bufferLength=0;this._bytesHashed=0;this._finished=false;return this};n.prototype.clean=function(){i.wipe(this._buffer);i.wipe(this._temp);this.reset()};n.prototype.update=function(t,r){if(r===void 0){r=t.length}if(this._finished){throw new Error("SHA256: can't update because hash was finished.")}var i=0;this._bytesHashed+=r;if(this._bufferLength>0){while(this._bufferLength<this.blockSize&&r>0){this._buffer[this._bufferLength++]=t[i++];r--}if(this._bufferLength===this.blockSize){s(this._temp,this._state,this._buffer,0,this.blockSize);this._bufferLength=0}}if(r>=this.blockSize){i=s(this._temp,this._state,t,i,r);r%=this.blockSize}while(r>0){this._buffer[this._bufferLength++]=t[i++];r--}return this};n.prototype.finish=function(t){if(!this._finished){var i=this._bytesHashed;var n=this._bufferLength;var e=i/536870912|0;var o=i<<3;var a=i%64<56?64:128;this._buffer[n]=128;for(var h=n+1;h<a-8;h++){this._buffer[h]=0}r.writeUint32BE(e,this._buffer,a-8);r.writeUint32BE(o,this._buffer,a-4);s(this._temp,this._state,this._buffer,0,a);this._finished=true}for(var h=0;h<this.digestLength/4;h++){r.writeUint32BE(this._state[h],t,h*4)}return this};n.prototype.digest=function(){var t=new Uint8Array(this.digestLength);this.finish(t);return t};n.prototype.saveState=function(){if(this._finished){throw new Error("SHA256: cannot save finished state")}return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):undefined,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}};n.prototype.restoreState=function(t){this._state.set(t.state);this._bufferLength=t.bufferLength;if(t.buffer){this._buffer.set(t.buffer)}this._bytesHashed=t.bytesHashed;this._finished=false;return this};n.prototype.cleanSavedState=function(t){i.wipe(t.state);if(t.buffer){i.wipe(t.buffer)}t.bufferLength=0;t.bytesHashed=0};return n}();t.SHA256=n;var e=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function s(t,i,n,s,o){while(o>=64){var a=i[0];var h=i[1];var u=i[2];var f=i[3];var c=i[4];var l=i[5];var d=i[6];var v=i[7];for(var w=0;w<16;w++){var p=s+w*4;t[w]=r.readUint32BE(n,p)}for(var w=16;w<64;w++){var y=t[w-2];var b=(y>>>17|y<<32-17)^(y>>>19|y<<32-19)^y>>>10;y=t[w-15];var g=(y>>>7|y<<32-7)^(y>>>18|y<<32-18)^y>>>3;t[w]=(b+t[w-7]|0)+(g+t[w-16]|0)}for(var w=0;w<64;w++){var b=(((c>>>6|c<<32-6)^(c>>>11|c<<32-11)^(c>>>25|c<<32-25))+(c&l^~c&d)|0)+(v+(e[w]+t[w]|0)|0)|0;var g=((a>>>2|a<<32-2)^(a>>>13|a<<32-13)^(a>>>22|a<<32-22))+(a&h^a&u^h&u)|0;v=d;d=l;l=c;c=f+b|0;f=u;u=h;h=a;a=b+g|0}i[0]+=a;i[1]+=h;i[2]+=u;i[3]+=f;i[4]+=c;i[5]+=l;i[6]+=d;i[7]+=v;s+=64;o-=64}return s}function o(t){var r=new n;r.update(t);var i=r.digest();r.clean();return i}t.hash=o})(_i);var Ii={};(function(t){Object.defineProperty(t,"__esModule",{value:true});t.sharedKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.scalarMultBase=t.scalarMult=t.SHARED_KEY_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=void 0;const r=fi;const i=Ur;t.PUBLIC_KEY_LENGTH=32;t.SECRET_KEY_LENGTH=32;t.SHARED_KEY_LENGTH=32;function n(t){const r=new Float64Array(16);if(t){for(let i=0;i<t.length;i++){r[i]=t[i]}}return r}const e=new Uint8Array(32);e[0]=9;const s=n([56129,1]);function o(t){let r=1;for(let i=0;i<16;i++){let n=t[i]+r+65535;r=Math.floor(n/65536);t[i]=n-r*65536}t[0]+=r-1+37*(r-1)}function a(t,r,i){const n=~(i-1);for(let i=0;i<16;i++){const e=n&(t[i]^r[i]);t[i]^=e;r[i]^=e}}function h(t,r){const i=n();const e=n();for(let t=0;t<16;t++){e[t]=r[t]}o(e);o(e);o(e);for(let t=0;t<2;t++){i[0]=e[0]-65517;for(let t=1;t<15;t++){i[t]=e[t]-65535-(i[t-1]>>16&1);i[t-1]&=65535}i[15]=e[15]-32767-(i[14]>>16&1);const t=i[15]>>16&1;i[14]&=65535;a(e,i,1-t)}for(let r=0;r<16;r++){t[2*r]=e[r]&255;t[2*r+1]=e[r]>>8}}function u(t,r){for(let i=0;i<16;i++){t[i]=r[2*i]+(r[2*i+1]<<8)}t[15]&=32767}function f(t,r,i){for(let n=0;n<16;n++){t[n]=r[n]+i[n]}}function c(t,r,i){for(let n=0;n<16;n++){t[n]=r[n]-i[n]}}function l(t,r,i){let n,e,s=0,o=0,a=0,h=0,u=0,f=0,c=0,l=0,d=0,v=0,w=0,p=0,y=0,b=0,g=0,m=0,A=0,E=0,M=0,_=0,I=0,O=0,S=0,N=0,C=0,j=0,x=0,P=0,R=0,T=0,D=0,U=i[0],B=i[1],k=i[2],$=i[3],F=i[4],q=i[5],L=i[6],K=i[7],H=i[8],G=i[9],Q=i[10],V=i[11],z=i[12],J=i[13],Y=i[14],W=i[15];n=r[0];s+=n*U;o+=n*B;a+=n*k;h+=n*$;u+=n*F;f+=n*q;c+=n*L;l+=n*K;d+=n*H;v+=n*G;w+=n*Q;p+=n*V;y+=n*z;b+=n*J;g+=n*Y;m+=n*W;n=r[1];o+=n*U;a+=n*B;h+=n*k;u+=n*$;f+=n*F;c+=n*q;l+=n*L;d+=n*K;v+=n*H;w+=n*G;p+=n*Q;y+=n*V;b+=n*z;g+=n*J;m+=n*Y;A+=n*W;n=r[2];a+=n*U;h+=n*B;u+=n*k;f+=n*$;c+=n*F;l+=n*q;d+=n*L;v+=n*K;w+=n*H;p+=n*G;y+=n*Q;b+=n*V;g+=n*z;m+=n*J;A+=n*Y;E+=n*W;n=r[3];h+=n*U;u+=n*B;f+=n*k;c+=n*$;l+=n*F;d+=n*q;v+=n*L;w+=n*K;p+=n*H;y+=n*G;b+=n*Q;g+=n*V;m+=n*z;A+=n*J;E+=n*Y;M+=n*W;n=r[4];u+=n*U;f+=n*B;c+=n*k;l+=n*$;d+=n*F;v+=n*q;w+=n*L;p+=n*K;y+=n*H;b+=n*G;g+=n*Q;m+=n*V;A+=n*z;E+=n*J;M+=n*Y;_+=n*W;n=r[5];f+=n*U;c+=n*B;l+=n*k;d+=n*$;v+=n*F;w+=n*q;p+=n*L;y+=n*K;b+=n*H;g+=n*G;m+=n*Q;A+=n*V;E+=n*z;M+=n*J;_+=n*Y;I+=n*W;n=r[6];c+=n*U;l+=n*B;d+=n*k;v+=n*$;w+=n*F;p+=n*q;y+=n*L;b+=n*K;g+=n*H;m+=n*G;A+=n*Q;E+=n*V;M+=n*z;_+=n*J;I+=n*Y;O+=n*W;n=r[7];l+=n*U;d+=n*B;v+=n*k;w+=n*$;p+=n*F;y+=n*q;b+=n*L;g+=n*K;m+=n*H;A+=n*G;E+=n*Q;M+=n*V;_+=n*z;I+=n*J;O+=n*Y;S+=n*W;n=r[8];d+=n*U;v+=n*B;w+=n*k;p+=n*$;y+=n*F;b+=n*q;g+=n*L;m+=n*K;A+=n*H;E+=n*G;M+=n*Q;_+=n*V;I+=n*z;O+=n*J;S+=n*Y;N+=n*W;n=r[9];v+=n*U;w+=n*B;p+=n*k;y+=n*$;b+=n*F;g+=n*q;m+=n*L;A+=n*K;E+=n*H;M+=n*G;_+=n*Q;I+=n*V;O+=n*z;S+=n*J;N+=n*Y;C+=n*W;n=r[10];w+=n*U;p+=n*B;y+=n*k;b+=n*$;g+=n*F;m+=n*q;A+=n*L;E+=n*K;M+=n*H;_+=n*G;I+=n*Q;O+=n*V;S+=n*z;N+=n*J;C+=n*Y;j+=n*W;n=r[11];p+=n*U;y+=n*B;b+=n*k;g+=n*$;m+=n*F;A+=n*q;E+=n*L;M+=n*K;_+=n*H;I+=n*G;O+=n*Q;S+=n*V;N+=n*z;C+=n*J;j+=n*Y;x+=n*W;n=r[12];y+=n*U;b+=n*B;g+=n*k;m+=n*$;A+=n*F;E+=n*q;M+=n*L;_+=n*K;I+=n*H;O+=n*G;S+=n*Q;N+=n*V;C+=n*z;j+=n*J;x+=n*Y;P+=n*W;n=r[13];b+=n*U;g+=n*B;m+=n*k;A+=n*$;E+=n*F;M+=n*q;_+=n*L;I+=n*K;O+=n*H;S+=n*G;N+=n*Q;C+=n*V;j+=n*z;x+=n*J;P+=n*Y;R+=n*W;n=r[14];g+=n*U;m+=n*B;A+=n*k;E+=n*$;M+=n*F;_+=n*q;I+=n*L;O+=n*K;S+=n*H;N+=n*G;C+=n*Q;j+=n*V;x+=n*z;P+=n*J;R+=n*Y;T+=n*W;n=r[15];m+=n*U;A+=n*B;E+=n*k;M+=n*$;_+=n*F;I+=n*q;O+=n*L;S+=n*K;N+=n*H;C+=n*G;j+=n*Q;x+=n*V;P+=n*z;R+=n*J;T+=n*Y;D+=n*W;s+=38*A;o+=38*E;a+=38*M;h+=38*_;u+=38*I;f+=38*O;c+=38*S;l+=38*N;d+=38*C;v+=38*j;w+=38*x;p+=38*P;y+=38*R;b+=38*T;g+=38*D;e=1;n=s+e+65535;e=Math.floor(n/65536);s=n-e*65536;n=o+e+65535;e=Math.floor(n/65536);o=n-e*65536;n=a+e+65535;e=Math.floor(n/65536);a=n-e*65536;n=h+e+65535;e=Math.floor(n/65536);h=n-e*65536;n=u+e+65535;e=Math.floor(n/65536);u=n-e*65536;n=f+e+65535;e=Math.floor(n/65536);f=n-e*65536;n=c+e+65535;e=Math.floor(n/65536);c=n-e*65536;n=l+e+65535;e=Math.floor(n/65536);l=n-e*65536;n=d+e+65535;e=Math.floor(n/65536);d=n-e*65536;n=v+e+65535;e=Math.floor(n/65536);v=n-e*65536;n=w+e+65535;e=Math.floor(n/65536);w=n-e*65536;n=p+e+65535;e=Math.floor(n/65536);p=n-e*65536;n=y+e+65535;e=Math.floor(n/65536);y=n-e*65536;n=b+e+65535;e=Math.floor(n/65536);b=n-e*65536;n=g+e+65535;e=Math.floor(n/65536);g=n-e*65536;n=m+e+65535;e=Math.floor(n/65536);m=n-e*65536;s+=e-1+37*(e-1);e=1;n=s+e+65535;e=Math.floor(n/65536);s=n-e*65536;n=o+e+65535;e=Math.floor(n/65536);o=n-e*65536;n=a+e+65535;e=Math.floor(n/65536);a=n-e*65536;n=h+e+65535;e=Math.floor(n/65536);h=n-e*65536;n=u+e+65535;e=Math.floor(n/65536);u=n-e*65536;n=f+e+65535;e=Math.floor(n/65536);f=n-e*65536;n=c+e+65535;e=Math.floor(n/65536);c=n-e*65536;n=l+e+65535;e=Math.floor(n/65536);l=n-e*65536;n=d+e+65535;e=Math.floor(n/65536);d=n-e*65536;n=v+e+65535;e=Math.floor(n/65536);v=n-e*65536;n=w+e+65535;e=Math.floor(n/65536);w=n-e*65536;n=p+e+65535;e=Math.floor(n/65536);p=n-e*65536;n=y+e+65535;e=Math.floor(n/65536);y=n-e*65536;n=b+e+65535;e=Math.floor(n/65536);b=n-e*65536;n=g+e+65535;e=Math.floor(n/65536);g=n-e*65536;n=m+e+65535;e=Math.floor(n/65536);m=n-e*65536;s+=e-1+37*(e-1);t[0]=s;t[1]=o;t[2]=a;t[3]=h;t[4]=u;t[5]=f;t[6]=c;t[7]=l;t[8]=d;t[9]=v;t[10]=w;t[11]=p;t[12]=y;t[13]=b;t[14]=g;t[15]=m}function d(t,r){l(t,r,r)}function v(t,r){const i=n();for(let t=0;t<16;t++){i[t]=r[t]}for(let t=253;t>=0;t--){d(i,i);if(t!==2&&t!==4){l(i,i,r)}}for(let r=0;r<16;r++){t[r]=i[r]}}function w(t,r){const i=new Uint8Array(32);const e=new Float64Array(80);const o=n(),w=n(),p=n(),y=n(),b=n(),g=n();for(let r=0;r<31;r++){i[r]=t[r]}i[31]=t[31]&127|64;i[0]&=248;u(e,r);for(let t=0;t<16;t++){w[t]=e[t]}o[0]=y[0]=1;for(let t=254;t>=0;--t){const r=i[t>>>3]>>>(t&7)&1;a(o,w,r);a(p,y,r);f(b,o,p);c(o,o,p);f(p,w,y);c(w,w,y);d(y,b);d(g,o);l(o,p,o);l(p,w,b);f(b,o,p);c(o,o,p);d(w,o);c(p,y,g);l(o,p,s);f(o,o,y);l(p,p,o);l(o,y,g);l(y,w,e);d(w,b);a(o,w,r);a(p,y,r)}for(let t=0;t<16;t++){e[t+16]=o[t];e[t+32]=p[t];e[t+48]=w[t];e[t+64]=y[t]}const m=e.subarray(32);const A=e.subarray(16);v(m,m);l(A,A,m);const E=new Uint8Array(32);h(E,A);return E}t.scalarMult=w;function p(t){return w(t,e)}t.scalarMultBase=p;function y(r){if(r.length!==t.SECRET_KEY_LENGTH){throw new Error(`x25519: seed must be ${t.SECRET_KEY_LENGTH} bytes`)}const i=new Uint8Array(r);const n=p(i);return{publicKey:n,secretKey:i}}t.generateKeyPairFromSeed=y;function b(t){const n=(0,r.randomBytes)(32,t);const e=y(n);(0,i.wipe)(n);return e}t.generateKeyPair=b;function g(r,i,n=false){if(r.length!==t.PUBLIC_KEY_LENGTH){throw new Error("X25519: incorrect secret key length")}if(i.length!==t.PUBLIC_KEY_LENGTH){throw new Error("X25519: incorrect public key length")}const e=w(r,i);if(n){let t=0;for(let r=0;r<e.length;r++){t|=e[r]}if(t===0){throw new Error("X25519: invalid shared key")}}return e}t.sharedKey=g})(Ii);var Oi={};var Si={};Object.defineProperty(Si,"__esModule",{value:true});function Ni(t,r){for(let i=0;i<t.byteLength;i++){if(t[i]<r[i]){return-1}if(t[i]>r[i]){return 1}}if(t.byteLength>r.byteLength){return 1}if(t.byteLength<r.byteLength){return-1}return 0}Si.compare=Ni;var Ci={};var ji={};Object.defineProperty(ji,"__esModule",{value:true});function xi(t=0){if(globalThis.Buffer!=null&&globalThis.Buffer.alloc!=null){return globalThis.Buffer.alloc(t)}return new Uint8Array(t)}function Pi(t=0){if(globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null){return globalThis.Buffer.allocUnsafe(t)}return new Uint8Array(t)}ji.alloc=xi;ji.allocUnsafe=Pi;Object.defineProperty(Ci,"__esModule",{value:true});var Ri=ji;function Ti(t,r){if(!r){r=t.reduce(((t,r)=>t+r.length),0)}const i=Ri.allocUnsafe(r);let n=0;for(const r of t){i.set(r,n);n+=r.length}return i}var Di=Ci.concat=Ti;var Ui={};Object.defineProperty(Ui,"__esModule",{value:true});function Bi(t,r){if(t===r){return true}if(t.byteLength!==r.byteLength){return false}for(let i=0;i<t.byteLength;i++){if(t[i]!==r[i]){return false}}return true}Ui.equals=Bi;var ki={};var $i={};var Fi={};Object.defineProperty(Fi,"__esModule",{value:true});var qi=s;var Li=o;const Ki=qi.from({prefix:"\0",name:"identity",encode:t=>Li.toString(t),decode:t=>Li.fromString(t)});Fi.identity=Ki;var Hi={};Object.defineProperty(Hi,"__esModule",{value:true});var Gi=s;const Qi=Gi.rfc4648({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});Hi.base2=Qi;var Vi={};Object.defineProperty(Vi,"__esModule",{value:true});var zi=s;const Ji=zi.rfc4648({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});Vi.base8=Ji;var Yi={};Object.defineProperty(Yi,"__esModule",{value:true});var Wi=s;const Xi=Wi.baseX({prefix:"9",name:"base10",alphabet:"0123456789"});Yi.base10=Xi;var Zi={};Object.defineProperty(Zi,"__esModule",{value:true});var tn=s;const rn=tn.rfc4648({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4});const nn=tn.rfc4648({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});Zi.base16=rn;Zi.base16upper=nn;var en={};Object.defineProperty(en,"__esModule",{value:true});var sn=s;const on=sn.baseX({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"});const an=sn.baseX({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});en.base36=on;en.base36upper=an;var hn={};Object.defineProperty(hn,"__esModule",{value:true});var un=s;const fn=un.rfc4648({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});const cn=un.rfc4648({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6});const ln=un.rfc4648({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6});const dn=un.rfc4648({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});hn.base64=fn;hn.base64pad=cn;hn.base64url=ln;hn.base64urlpad=dn;var vn={};Object.defineProperty(vn,"__esModule",{value:true});var wn=s;const pn=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂");const yn=pn.reduce(((t,r,i)=>{t[i]=r;return t}),[]);const bn=pn.reduce(((t,r,i)=>{t[r.codePointAt(0)]=i;return t}),[]);function gn(t){return t.reduce(((t,r)=>{t+=yn[r];return t}),"")}function mn(t){const r=[];for(const i of t){const t=bn[i.codePointAt(0)];if(t===undefined){throw new Error(`Non-base256emoji character: ${i}`)}r.push(t)}return new Uint8Array(r)}const An=wn.from({prefix:"🚀",name:"base256emoji",encode:gn,decode:mn});vn.base256emoji=An;var En={};Object.defineProperty(En,"__esModule",{value:true});var Mn=a;const _n=t=>async r=>new Uint8Array(await crypto.subtle.digest(t,r));const In=Mn.from({name:"sha2-256",code:18,encode:_n("SHA-256")});const On=Mn.from({name:"sha2-512",code:19,encode:_n("SHA-512")});En.sha256=In;En.sha512=On;var Sn={};Object.defineProperty(Sn,"__esModule",{value:true});var Nn=o;var Cn=h;const jn=0;const xn="identity";const Pn=Nn.coerce;const Rn=t=>Cn.create(jn,Pn(t));const Tn={code:jn,name:xn,encode:Pn,digest:Rn};Sn.identity=Tn;var Dn={};Object.defineProperty(Dn,"__esModule",{value:true});var Un=o;const Bn="raw";const kn=85;const $n=t=>Un.coerce(t);const Fn=t=>Un.coerce(t);Dn.code=kn;Dn.decode=Fn;Dn.encode=$n;Dn.name=Bn;var qn={};Object.defineProperty(qn,"__esModule",{value:true});const Ln=new TextEncoder;const Kn=new TextDecoder;const Hn="json";const Gn=512;const Qn=t=>Ln.encode(JSON.stringify(t));const Vn=t=>JSON.parse(Kn.decode(t));qn.code=Gn;qn.decode=Vn;qn.encode=Qn;qn.name=Hn;Object.defineProperty($i,"__esModule",{value:true});var zn=Fi;var Jn=Hi;var Yn=Vi;var Wn=Yi;var Xn=Zi;var Zn=c;var te=en;var re=l;var ie=hn;var ne=vn;var ee=En;var se=Sn;var oe=Dn;var ae=qn;var he=u;var ue=a;var fe=h;var ce=f;var le=o;const de={...zn,...Jn,...Yn,...Wn,...Xn,...Zn,...te,...re,...ie,...ne};const ve={...ee,...se};const we={raw:oe,json:ae};$i.CID=he.CID;$i.hasher=ue;$i.digest=fe;$i.varint=ce;$i.bytes=le;$i.bases=de;$i.codecs=we;$i.hashes=ve;var pe=$i;var ye=ji;function be(t,r,i,n){return{name:t,prefix:r,encoder:{name:t,prefix:r,encode:i},decoder:{decode:n}}}const ge=be("utf8","u",(t=>{const r=new TextDecoder("utf8");return"u"+r.decode(t)}),(t=>{const r=new TextEncoder;return r.encode(t.substring(1))}));const me=be("ascii","a",(t=>{let r="a";for(let i=0;i<t.length;i++){r+=String.fromCharCode(t[i])}return r}),(t=>{t=t.substring(1);const r=ye.allocUnsafe(t.length);for(let i=0;i<t.length;i++){r[i]=t.charCodeAt(i)}return r}));const Ae={utf8:ge,"utf-8":ge,hex:pe.bases.base16,latin1:me,ascii:me,binary:me,...pe.bases};var Ee=Ae;Object.defineProperty(ki,"__esModule",{value:true});var Me=Ee;function _e(t,r="utf8"){const i=Me[r];if(!i){throw new Error(`Unsupported encoding "${r}"`)}if((r==="utf8"||r==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null){return globalThis.Buffer.from(t,"utf8")}return i.decoder.decode(`${i.prefix}${t}`)}var Ie=ki.fromString=_e;var Oe={};Object.defineProperty(Oe,"__esModule",{value:true});var Se=Ee;function Ne(t,r="utf8"){const i=Se[r];if(!i){throw new Error(`Unsupported encoding "${r}"`)}if((r==="utf8"||r==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null){return globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8")}return i.encoder.encode(t).substring(1)}var Ce=Oe.toString=Ne;var je={};Object.defineProperty(je,"__esModule",{value:true});var xe=ji;function Pe(t,r){if(t.length!==r.length){throw new Error("Inputs should have the same length")}const i=xe.allocUnsafe(t.length);for(let n=0;n<t.length;n++){i[n]=t[n]^r[n]}return i}je.xor=Pe;Object.defineProperty(Oi,"__esModule",{value:true});var Re=Si;var Te=Ci;var De=Ui;var Ue=ki;var Be=Oe;var ke=je;Oi.compare=Re.compare;var $e=Oi.concat=Te.concat;Oi.equals=De.equals;var Fe=Oi.fromString=Ue.fromString;var qe=Oi.toString=Be.toString;Oi.xor=ke.xor;const Le={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}};const Ke=":";function He(t){const[r,i]=t.split(Ke);return{namespace:r,reference:i}}function Ge(t,r=[]){const i=[];return Object.keys(t).forEach((n=>{if(r.length&&!r.includes(n))return;const e=t[n];i.push(...e.accounts)})),i}function Qe(t,r){return t.includes(":")?[t]:r.chains||[]}var Ve=Object.defineProperty,ze=Object.getOwnPropertySymbols,Je=Object.prototype.hasOwnProperty,Ye=Object.prototype.propertyIsEnumerable,We=(t,r,i)=>r in t?Ve(t,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[r]=i,Xe=(t,r)=>{for(var i in r||(r={}))Je.call(r,i)&&We(t,i,r[i]);if(ze)for(var i of ze(r))Ye.call(r,i)&&We(t,i,r[i]);return t};const Ze="ReactNative",ts={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},rs="js";function is(){return typeof i<"u"&&typeof i.versions<"u"&&typeof i.versions.node<"u"}function ns(){return!Ct()&&!!Pt()&&navigator.product===Ze}function es(){return!is()&&!!Pt()&&!!Ct()}function ss(){return ns()?ts.reactNative:is()?ts.node:es()?ts.browser:ts.unknown}function os(){var t;try{return ns()&&typeof d<"u"&&typeof(d==null?void 0:d.Application)<"u"?(t=d.Application)==null?void 0:t.applicationId:void 0}catch{return}}function as(t,r){let i=Ht.parse(t);return i=Xe(Xe({},i),r),t=Ht.stringify(i),t}function hs(){return qt()||{name:"",description:"",url:"",icons:[""]}}function us(){if(ss()===ts.reactNative&&typeof d<"u"&&typeof(d==null?void 0:d.Platform)<"u"){const{OS:t,Version:r}=d.Platform;return[t,r].join("-")}const t=j();if(t===null)return"unknown";const r=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[r,t.name,t.version].join("-"):[r,t.version].join("-")}function fs(){var t;const r=ss();return r===ts.browser?[r,((t=Dt())==null?void 0:t.host)||"unknown"].join(":"):r}function cs(t,r,i){const n=us(),e=fs();return[[t,r].join("-"),[rs,i].join("-"),n,e].join("/")}function ls({protocol:t,version:r,relayUrl:i,sdkVersion:n,auth:e,projectId:s,useOnCloseEvent:o,bundleId:a}){const h=i.split("?"),u=cs(t,r,n),f={auth:e,ua:u,projectId:s,useOnCloseEvent:o||void 0,origin:a||void 0},c=as(h[1]||"",f);return h[0]+"?"+c}function ds(t,r){return t.filter((t=>r.includes(t))).length===t.length}function vs(t){return Object.fromEntries(t.entries())}function ws(t){return new Map(Object.entries(t))}function ps(t=U.FIVE_MINUTES,r){const i=U.toMiliseconds(t||U.FIVE_MINUTES);let n,e,s;return{resolve:t=>{s&&n&&(clearTimeout(s),n(t))},reject:t=>{s&&e&&(clearTimeout(s),e(t))},done:()=>new Promise(((t,o)=>{s=setTimeout((()=>{o(new Error(r))}),i),n=t,e=o}))}}function ys(t,r,i){return new Promise((async(n,e)=>{const s=setTimeout((()=>e(new Error(i))),r);try{const r=await t;n(r)}catch(t){e(t)}clearTimeout(s)}))}function bs(t,r){if(typeof r=="string"&&r.startsWith(`${t}:`))return r;if(t.toLowerCase()==="topic"){if(typeof r!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${r}`}else if(t.toLowerCase()==="id"){if(typeof r!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${r}`}throw new Error(`Unknown expirer target type: ${t}`)}function gs(t){return bs("topic",t)}function ms(t){return bs("id",t)}function As(t){const[r,i]=t.split(":"),n={id:void 0,topic:void 0};if(r==="topic"&&typeof i=="string")n.topic=i;else if(r==="id"&&Number.isInteger(Number(i)))n.id=Number(i);else throw new Error(`Invalid target, expected id:number or topic:string, got ${r}:${i}`);return n}function Es(t,r){return U.fromMiliseconds((r||Date.now())+U.toMiliseconds(t))}function Ms(t){return Date.now()>=U.toMiliseconds(t)}function _s(t,r){return`${t}${r?`:${r}`:""}`}function Is(t=[],r=[]){return[...new Set([...t,...r])]}async function Os({id:t,topic:r,wcDeepLink:i}){try{if(!i)return;const n=typeof i=="string"?JSON.parse(i):i;let e=n?.href;if(typeof e!="string")return;e.endsWith("/")&&(e=e.slice(0,-1));const s=`${e}/wc?requestId=${t}&sessionTopic=${r}`,o=ss();o===ts.browser?s.startsWith("https://")||s.startsWith("http://")?window.open(s,"_blank","noreferrer noopener"):window.open(s,"_self","noreferrer noopener"):o===ts.reactNative&&typeof(d==null?void 0:d.Linking)<"u"&&await d.Linking.openURL(s)}catch(t){console.error(t)}}async function Ss(t,r){try{return await t.getItem(r)||(es()?localStorage.getItem(r):void 0)}catch(t){console.error(t)}}var Ns=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof d<"u"?d:typeof self<"u"?self:{};function Cs(t){var r=t.default;if(typeof r=="function"){var i=function(){return r.apply(this,arguments)};i.prototype=r.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(t).forEach((function(r){var n=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(i,r,n.get?n:{enumerable:!0,get:function(){return t[r]}})})),i}var js={exports:{}};
/**
 * [js-sha3]{@link https://github.com/emn178/js-sha3}
 *
 * @version 0.8.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2015-2018
 * @license MIT
 */(function(t){(function(){var r="input is invalid type",n="finalize already called",e=typeof window=="object",s=e?window:{};s.JS_SHA3_NO_WINDOW&&(e=!1);var o=!e&&typeof self=="object",a=!s.JS_SHA3_NO_NODE_JS&&typeof i=="object"&&i.versions&&i.versions.node;a?s=Ns:o&&(s=self);var h=!s.JS_SHA3_NO_COMMON_JS&&!0&&t.exports,u=!s.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",f="0123456789abcdef".split(""),c=[31,7936,2031616,520093696],l=[4,1024,262144,67108864],d=[1,256,65536,16777216],v=[6,1536,393216,100663296],w=[0,8,16,24],p=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],y=[224,256,384,512],b=[128,256],g=["hex","buffer","arrayBuffer","array","digest"],m={128:168,256:136};(s.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(t){return Object.prototype.toString.call(t)==="[object Array]"}),u&&(s.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(t){return typeof t=="object"&&t.buffer&&t.buffer.constructor===ArrayBuffer});for(var A=function(t,r,i){return function(n){return new $(t,r,t).update(n)[i]()}},E=function(t,r,i){return function(n,e){return new $(t,r,e).update(n)[i]()}},M=function(t,r,i){return function(r,n,e,s){return x["cshake"+t].update(r,n,e,s)[i]()}},_=function(t,r,i){return function(r,n,e,s){return x["kmac"+t].update(r,n,e,s)[i]()}},I=function(t,r,i,n){for(var e=0;e<g.length;++e){var s=g[e];t[s]=r(i,n,s)}return t},O=function(t,r){var i=A(t,r,"hex");return i.create=function(){return new $(t,r,t)},i.update=function(t){return i.create().update(t)},I(i,A,t,r)},S=function(t,r){var i=E(t,r,"hex");return i.create=function(i){return new $(t,r,i)},i.update=function(t,r){return i.create(r).update(t)},I(i,E,t,r)},N=function(t,r){var i=m[t],n=M(t,r,"hex");return n.create=function(n,e,s){return!e&&!s?x["shake"+t].create(n):new $(t,r,n).bytepad([e,s],i)},n.update=function(t,r,i,e){return n.create(r,i,e).update(t)},I(n,M,t,r)},C=function(t,r){var i=m[t],n=_(t,r,"hex");return n.create=function(n,e,s){return new F(t,r,e).bytepad(["KMAC",s],i).bytepad([n],i)},n.update=function(t,r,i,e){return n.create(t,i,e).update(r)},I(n,_,t,r)},j=[{name:"keccak",padding:d,bits:y,createMethod:O},{name:"sha3",padding:v,bits:y,createMethod:O},{name:"shake",padding:c,bits:b,createMethod:S},{name:"cshake",padding:l,bits:b,createMethod:N},{name:"kmac",padding:l,bits:b,createMethod:C}],x={},P=[],R=0;R<j.length;++R)for(var T=j[R],D=T.bits,U=0;U<D.length;++U){var B=T.name+"_"+D[U];if(P.push(B),x[B]=T.createMethod(D[U],T.padding),T.name!=="sha3"){var k=T.name+D[U];P.push(k),x[k]=x[B]}}function $(t,r,i){this.blocks=[],this.s=[],this.padding=r,this.outputBits=i,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(t<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=i>>5,this.extraBytes=(i&31)>>3;for(var n=0;n<50;++n)this.s[n]=0}$.prototype.update=function(t){if(this.finalized)throw new Error(n);var i,e=typeof t;if(e!=="string"){if(e==="object"){if(t===null)throw new Error(r);if(u&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!Array.isArray(t)&&(!u||!ArrayBuffer.isView(t)))throw new Error(r)}else throw new Error(r);i=!0}for(var s=this.blocks,o=this.byteCount,a=t.length,h=this.blockCount,f=0,c=this.s,l,d;f<a;){if(this.reset)for(this.reset=!1,s[0]=this.block,l=1;l<h+1;++l)s[l]=0;if(i)for(l=this.start;f<a&&l<o;++f)s[l>>2]|=t[f]<<w[l++&3];else for(l=this.start;f<a&&l<o;++f)d=t.charCodeAt(f),d<128?s[l>>2]|=d<<w[l++&3]:d<2048?(s[l>>2]|=(192|d>>6)<<w[l++&3],s[l>>2]|=(128|d&63)<<w[l++&3]):d<55296||d>=57344?(s[l>>2]|=(224|d>>12)<<w[l++&3],s[l>>2]|=(128|d>>6&63)<<w[l++&3],s[l>>2]|=(128|d&63)<<w[l++&3]):(d=65536+((d&1023)<<10|t.charCodeAt(++f)&1023),s[l>>2]|=(240|d>>18)<<w[l++&3],s[l>>2]|=(128|d>>12&63)<<w[l++&3],s[l>>2]|=(128|d>>6&63)<<w[l++&3],s[l>>2]|=(128|d&63)<<w[l++&3]);if(this.lastByteIndex=l,l>=o){for(this.start=l-o,this.block=s[h],l=0;l<h;++l)c[l]^=s[l];q(c),this.reset=!0}else this.start=l}return this},$.prototype.encode=function(t,r){var i=t&255,n=1,e=[i];for(t=t>>8,i=t&255;i>0;)e.unshift(i),t=t>>8,i=t&255,++n;return r?e.push(n):e.unshift(n),this.update(e),e.length},$.prototype.encodeString=function(t){var i,n=typeof t;if(n!=="string"){if(n==="object"){if(t===null)throw new Error(r);if(u&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!Array.isArray(t)&&(!u||!ArrayBuffer.isView(t)))throw new Error(r)}else throw new Error(r);i=!0}var e=0,s=t.length;if(i)e=s;else for(var o=0;o<t.length;++o){var a=t.charCodeAt(o);a<128?e+=1:a<2048?e+=2:a<55296||a>=57344?e+=3:(a=65536+((a&1023)<<10|t.charCodeAt(++o)&1023),e+=4)}return e+=this.encode(e*8),this.update(t),e},$.prototype.bytepad=function(t,r){for(var i=this.encode(r),n=0;n<t.length;++n)i+=this.encodeString(t[n]);var e=r-i%r,s=[];return s.length=e,this.update(s),this},$.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var t=this.blocks,r=this.lastByteIndex,i=this.blockCount,n=this.s;if(t[r>>2]|=this.padding[r&3],this.lastByteIndex===this.byteCount)for(t[0]=t[i],r=1;r<i+1;++r)t[r]=0;for(t[i-1]|=2147483648,r=0;r<i;++r)n[r]^=t[r];q(n)}},$.prototype.toString=$.prototype.hex=function(){this.finalize();for(var t=this.blockCount,r=this.s,i=this.outputBlocks,n=this.extraBytes,e=0,s=0,o="",a;s<i;){for(e=0;e<t&&s<i;++e,++s)a=r[e],o+=f[a>>4&15]+f[a&15]+f[a>>12&15]+f[a>>8&15]+f[a>>20&15]+f[a>>16&15]+f[a>>28&15]+f[a>>24&15];s%t===0&&(q(r),e=0)}return n&&(a=r[e],o+=f[a>>4&15]+f[a&15],n>1&&(o+=f[a>>12&15]+f[a>>8&15]),n>2&&(o+=f[a>>20&15]+f[a>>16&15])),o},$.prototype.arrayBuffer=function(){this.finalize();var t=this.blockCount,r=this.s,i=this.outputBlocks,n=this.extraBytes,e=0,s=0,o=this.outputBits>>3,a;n?a=new ArrayBuffer(i+1<<2):a=new ArrayBuffer(o);for(var h=new Uint32Array(a);s<i;){for(e=0;e<t&&s<i;++e,++s)h[s]=r[e];s%t===0&&q(r)}return n&&(h[e]=r[e],a=a.slice(0,o)),a},$.prototype.buffer=$.prototype.arrayBuffer,$.prototype.digest=$.prototype.array=function(){this.finalize();for(var t=this.blockCount,r=this.s,i=this.outputBlocks,n=this.extraBytes,e=0,s=0,o=[],a,h;s<i;){for(e=0;e<t&&s<i;++e,++s)a=s<<2,h=r[e],o[a]=h&255,o[a+1]=h>>8&255,o[a+2]=h>>16&255,o[a+3]=h>>24&255;s%t===0&&q(r)}return n&&(a=s<<2,h=r[e],o[a]=h&255,n>1&&(o[a+1]=h>>8&255),n>2&&(o[a+2]=h>>16&255)),o};function F(t,r,i){$.call(this,t,r,i)}F.prototype=new $,F.prototype.finalize=function(){return this.encode(this.outputBits,!0),$.prototype.finalize.call(this)};var q=function(t){var r,i,n,e,s,o,a,h,u,f,c,l,d,v,w,y,b,g,m,A,E,M,_,I,O,S,N,C,j,x,P,R,T,D,U,B,k,$,F,q,L,K,H,G,Q,V,z,J,Y,W,X,Z,tt,rt,it,nt,et,st,ot,at,ht,ut,ft;for(n=0;n<48;n+=2)e=t[0]^t[10]^t[20]^t[30]^t[40],s=t[1]^t[11]^t[21]^t[31]^t[41],o=t[2]^t[12]^t[22]^t[32]^t[42],a=t[3]^t[13]^t[23]^t[33]^t[43],h=t[4]^t[14]^t[24]^t[34]^t[44],u=t[5]^t[15]^t[25]^t[35]^t[45],f=t[6]^t[16]^t[26]^t[36]^t[46],c=t[7]^t[17]^t[27]^t[37]^t[47],l=t[8]^t[18]^t[28]^t[38]^t[48],d=t[9]^t[19]^t[29]^t[39]^t[49],r=l^(o<<1|a>>>31),i=d^(a<<1|o>>>31),t[0]^=r,t[1]^=i,t[10]^=r,t[11]^=i,t[20]^=r,t[21]^=i,t[30]^=r,t[31]^=i,t[40]^=r,t[41]^=i,r=e^(h<<1|u>>>31),i=s^(u<<1|h>>>31),t[2]^=r,t[3]^=i,t[12]^=r,t[13]^=i,t[22]^=r,t[23]^=i,t[32]^=r,t[33]^=i,t[42]^=r,t[43]^=i,r=o^(f<<1|c>>>31),i=a^(c<<1|f>>>31),t[4]^=r,t[5]^=i,t[14]^=r,t[15]^=i,t[24]^=r,t[25]^=i,t[34]^=r,t[35]^=i,t[44]^=r,t[45]^=i,r=h^(l<<1|d>>>31),i=u^(d<<1|l>>>31),t[6]^=r,t[7]^=i,t[16]^=r,t[17]^=i,t[26]^=r,t[27]^=i,t[36]^=r,t[37]^=i,t[46]^=r,t[47]^=i,r=f^(e<<1|s>>>31),i=c^(s<<1|e>>>31),t[8]^=r,t[9]^=i,t[18]^=r,t[19]^=i,t[28]^=r,t[29]^=i,t[38]^=r,t[39]^=i,t[48]^=r,t[49]^=i,v=t[0],w=t[1],V=t[11]<<4|t[10]>>>28,z=t[10]<<4|t[11]>>>28,C=t[20]<<3|t[21]>>>29,j=t[21]<<3|t[20]>>>29,at=t[31]<<9|t[30]>>>23,ht=t[30]<<9|t[31]>>>23,K=t[40]<<18|t[41]>>>14,H=t[41]<<18|t[40]>>>14,D=t[2]<<1|t[3]>>>31,U=t[3]<<1|t[2]>>>31,y=t[13]<<12|t[12]>>>20,b=t[12]<<12|t[13]>>>20,J=t[22]<<10|t[23]>>>22,Y=t[23]<<10|t[22]>>>22,x=t[33]<<13|t[32]>>>19,P=t[32]<<13|t[33]>>>19,ut=t[42]<<2|t[43]>>>30,ft=t[43]<<2|t[42]>>>30,rt=t[5]<<30|t[4]>>>2,it=t[4]<<30|t[5]>>>2,B=t[14]<<6|t[15]>>>26,k=t[15]<<6|t[14]>>>26,g=t[25]<<11|t[24]>>>21,m=t[24]<<11|t[25]>>>21,W=t[34]<<15|t[35]>>>17,X=t[35]<<15|t[34]>>>17,R=t[45]<<29|t[44]>>>3,T=t[44]<<29|t[45]>>>3,I=t[6]<<28|t[7]>>>4,O=t[7]<<28|t[6]>>>4,nt=t[17]<<23|t[16]>>>9,et=t[16]<<23|t[17]>>>9,$=t[26]<<25|t[27]>>>7,F=t[27]<<25|t[26]>>>7,A=t[36]<<21|t[37]>>>11,E=t[37]<<21|t[36]>>>11,Z=t[47]<<24|t[46]>>>8,tt=t[46]<<24|t[47]>>>8,G=t[8]<<27|t[9]>>>5,Q=t[9]<<27|t[8]>>>5,S=t[18]<<20|t[19]>>>12,N=t[19]<<20|t[18]>>>12,st=t[29]<<7|t[28]>>>25,ot=t[28]<<7|t[29]>>>25,q=t[38]<<8|t[39]>>>24,L=t[39]<<8|t[38]>>>24,M=t[48]<<14|t[49]>>>18,_=t[49]<<14|t[48]>>>18,t[0]=v^~y&g,t[1]=w^~b&m,t[10]=I^~S&C,t[11]=O^~N&j,t[20]=D^~B&$,t[21]=U^~k&F,t[30]=G^~V&J,t[31]=Q^~z&Y,t[40]=rt^~nt&st,t[41]=it^~et&ot,t[2]=y^~g&A,t[3]=b^~m&E,t[12]=S^~C&x,t[13]=N^~j&P,t[22]=B^~$&q,t[23]=k^~F&L,t[32]=V^~J&W,t[33]=z^~Y&X,t[42]=nt^~st&at,t[43]=et^~ot&ht,t[4]=g^~A&M,t[5]=m^~E&_,t[14]=C^~x&R,t[15]=j^~P&T,t[24]=$^~q&K,t[25]=F^~L&H,t[34]=J^~W&Z,t[35]=Y^~X&tt,t[44]=st^~at&ut,t[45]=ot^~ht&ft,t[6]=A^~M&v,t[7]=E^~_&w,t[16]=x^~R&I,t[17]=P^~T&O,t[26]=q^~K&D,t[27]=L^~H&U,t[36]=W^~Z&G,t[37]=X^~tt&Q,t[46]=at^~ut&rt,t[47]=ht^~ft&it,t[8]=M^~v&y,t[9]=_^~w&b,t[18]=R^~I&S,t[19]=T^~O&N,t[28]=K^~D&B,t[29]=H^~U&k,t[38]=Z^~G&V,t[39]=tt^~Q&z,t[48]=ut^~rt&nt,t[49]=ft^~it&et,t[0]^=p[n],t[1]^=p[n+1]};if(h)t.exports=x;else for(R=0;R<P.length;++R)s[P[R]]=x[P[R]]})()})(js);var xs=js.exports;const Ps="logger/5.7.0";let Rs=!1,Ts=!1;const Ds={debug:1,default:2,info:2,warning:3,error:4,off:5};let Us=Ds.default,Bs=null;function ks(){try{const t=[];if(["NFD","NFC","NFKD","NFKC"].forEach((r=>{try{if("test".normalize(r)!=="test")throw new Error("bad normalize")}catch{t.push(r)}})),t.length)throw new Error("missing "+t.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(t){return t.message}return null}const $s=ks();var Fs;(function(t){t.DEBUG="DEBUG",t.INFO="INFO",t.WARNING="WARNING",t.ERROR="ERROR",t.OFF="OFF"})(Fs||(Fs={}));var qs;(function(t){t.UNKNOWN_ERROR="UNKNOWN_ERROR",t.NOT_IMPLEMENTED="NOT_IMPLEMENTED",t.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",t.NETWORK_ERROR="NETWORK_ERROR",t.SERVER_ERROR="SERVER_ERROR",t.TIMEOUT="TIMEOUT",t.BUFFER_OVERRUN="BUFFER_OVERRUN",t.NUMERIC_FAULT="NUMERIC_FAULT",t.MISSING_NEW="MISSING_NEW",t.INVALID_ARGUMENT="INVALID_ARGUMENT",t.MISSING_ARGUMENT="MISSING_ARGUMENT",t.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",t.CALL_EXCEPTION="CALL_EXCEPTION",t.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",t.NONCE_EXPIRED="NONCE_EXPIRED",t.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",t.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",t.TRANSACTION_REPLACED="TRANSACTION_REPLACED",t.ACTION_REJECTED="ACTION_REJECTED"})(qs||(qs={}));const Ls="0123456789abcdef";class Ks{constructor(t){Object.defineProperty(this,"version",{enumerable:!0,value:t,writable:!1})}_log(t,r){const i=t.toLowerCase();Ds[i]==null&&this.throwArgumentError("invalid log level name","logLevel",t),!(Us>Ds[i])&&console.log.apply(console,r)}debug(...t){this._log(Ks.levels.DEBUG,t)}info(...t){this._log(Ks.levels.INFO,t)}warn(...t){this._log(Ks.levels.WARNING,t)}makeError(t,r,i){if(Ts)return this.makeError("censored error",r,{});r||(r=Ks.errors.UNKNOWN_ERROR),i||(i={});const n=[];Object.keys(i).forEach((t=>{const r=i[t];try{if(r instanceof Uint8Array){let i="";for(let t=0;t<r.length;t++)i+=Ls[r[t]>>4],i+=Ls[r[t]&15];n.push(t+"=Uint8Array(0x"+i+")")}else n.push(t+"="+JSON.stringify(r))}catch{n.push(t+"="+JSON.stringify(i[t].toString()))}})),n.push(`code=${r}`),n.push(`version=${this.version}`);const e=t;let s="";switch(r){case qs.NUMERIC_FAULT:{s="NUMERIC_FAULT";const r=t;switch(r){case"overflow":case"underflow":case"division-by-zero":s+="-"+r;break;case"negative-power":case"negative-width":s+="-unsupported";break;case"unbound-bitwise-result":s+="-unbound-result";break}break}case qs.CALL_EXCEPTION:case qs.INSUFFICIENT_FUNDS:case qs.MISSING_NEW:case qs.NONCE_EXPIRED:case qs.REPLACEMENT_UNDERPRICED:case qs.TRANSACTION_REPLACED:case qs.UNPREDICTABLE_GAS_LIMIT:s=r;break}s&&(t+=" [ See: https://links.ethers.org/v5-errors-"+s+" ]"),n.length&&(t+=" ("+n.join(", ")+")");const o=new Error(t);return o.reason=e,o.code=r,Object.keys(i).forEach((function(t){o[t]=i[t]})),o}throwError(t,r,i){throw this.makeError(t,r,i)}throwArgumentError(t,r,i){return this.throwError(t,Ks.errors.INVALID_ARGUMENT,{argument:r,value:i})}assert(t,r,i,n){t||this.throwError(r,i,n)}assertArgument(t,r,i,n){t||this.throwArgumentError(r,i,n)}checkNormalize(t){$s&&this.throwError("platform missing String.prototype.normalize",Ks.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:$s})}checkSafeUint53(t,r){typeof t=="number"&&(r==null&&(r="value not safe"),(t<0||t>=9007199254740991)&&this.throwError(r,Ks.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:t}),t%1&&this.throwError(r,Ks.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:t}))}checkArgumentCount(t,r,i){i?i=": "+i:i="",t<r&&this.throwError("missing argument"+i,Ks.errors.MISSING_ARGUMENT,{count:t,expectedCount:r}),t>r&&this.throwError("too many arguments"+i,Ks.errors.UNEXPECTED_ARGUMENT,{count:t,expectedCount:r})}checkNew(t,r){(t===Object||t==null)&&this.throwError("missing new",Ks.errors.MISSING_NEW,{name:r.name})}checkAbstract(t,r){t===r?this.throwError("cannot instantiate abstract class "+JSON.stringify(r.name)+" directly; use a sub-class",Ks.errors.UNSUPPORTED_OPERATION,{name:t.name,operation:"new"}):(t===Object||t==null)&&this.throwError("missing new",Ks.errors.MISSING_NEW,{name:r.name})}static globalLogger(){return Bs||(Bs=new Ks(Ps)),Bs}static setCensorship(t,r){if(!t&&r&&this.globalLogger().throwError("cannot permanently disable censorship",Ks.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),Rs){if(!t)return;this.globalLogger().throwError("error censorship permanent",Ks.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}Ts=!!t,Rs=!!r}static setLogLevel(t){const r=Ds[t.toLowerCase()];if(r==null){Ks.globalLogger().warn("invalid log level - "+t);return}Us=r}static from(t){return new Ks(t)}}Ks.errors=qs,Ks.levels=Fs;const Hs="bytes/5.7.0",Gs=new Ks(Hs);function Qs(t){return!!t.toHexString}function Vs(t){return t.slice||(t.slice=function(){const r=Array.prototype.slice.call(arguments);return Vs(new Uint8Array(Array.prototype.slice.apply(t,r)))}),t}function zs(t){return to(t)&&!(t.length%2)||Ys(t)}function Js(t){return typeof t=="number"&&t==t&&t%1===0}function Ys(t){if(t==null)return!1;if(t.constructor===Uint8Array)return!0;if(typeof t=="string"||!Js(t.length)||t.length<0)return!1;for(let r=0;r<t.length;r++){const i=t[r];if(!Js(i)||i<0||i>=256)return!1}return!0}function Ws(t,r){if(r||(r={}),typeof t=="number"){Gs.checkSafeUint53(t,"invalid arrayify value");const r=[];for(;t;)r.unshift(t&255),t=parseInt(String(t/256));return r.length===0&&r.push(0),Vs(new Uint8Array(r))}if(r.allowMissingPrefix&&typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),Qs(t)&&(t=t.toHexString()),to(t)){let i=t.substring(2);i.length%2&&(r.hexPad==="left"?i="0"+i:r.hexPad==="right"?i+="0":Gs.throwArgumentError("hex data is odd-length","value",t));const n=[];for(let t=0;t<i.length;t+=2)n.push(parseInt(i.substring(t,t+2),16));return Vs(new Uint8Array(n))}return Ys(t)?Vs(new Uint8Array(t)):Gs.throwArgumentError("invalid arrayify value","value",t)}function Xs(t){const r=t.map((t=>Ws(t))),i=r.reduce(((t,r)=>t+r.length),0),n=new Uint8Array(i);return r.reduce(((t,r)=>(n.set(r,t),t+r.length)),0),Vs(n)}function Zs(t,r){t=Ws(t),t.length>r&&Gs.throwArgumentError("value out of range","value",arguments[0]);const i=new Uint8Array(r);return i.set(t,r-t.length),Vs(i)}function to(t,r){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||r&&t.length!==2+2*r)}const ro="0123456789abcdef";function io(t,r){if(r||(r={}),typeof t=="number"){Gs.checkSafeUint53(t,"invalid hexlify value");let r="";for(;t;)r=ro[t&15]+r,t=Math.floor(t/16);return r.length?(r.length%2&&(r="0"+r),"0x"+r):"0x00"}if(typeof t=="bigint")return t=t.toString(16),t.length%2?"0x0"+t:"0x"+t;if(r.allowMissingPrefix&&typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),Qs(t))return t.toHexString();if(to(t))return t.length%2&&(r.hexPad==="left"?t="0x0"+t.substring(2):r.hexPad==="right"?t+="0":Gs.throwArgumentError("hex data is odd-length","value",t)),t.toLowerCase();if(Ys(t)){let r="0x";for(let i=0;i<t.length;i++){let n=t[i];r+=ro[(n&240)>>4]+ro[n&15]}return r}return Gs.throwArgumentError("invalid hexlify value","value",t)}function no(t){if(typeof t!="string")t=io(t);else if(!to(t)||t.length%2)return null;return(t.length-2)/2}function eo(t,r,i){return typeof t!="string"?t=io(t):(!to(t)||t.length%2)&&Gs.throwArgumentError("invalid hexData","value",t),r=2+2*r,i!=null?"0x"+t.substring(r,2+2*i):"0x"+t.substring(r)}function so(t,r){for(typeof t!="string"?t=io(t):to(t)||Gs.throwArgumentError("invalid hex string","value",t),t.length>2*r+2&&Gs.throwArgumentError("value out of range","value",arguments[1]);t.length<2*r+2;)t="0x0"+t.substring(2);return t}function oo(t){const r={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(zs(t)){let i=Ws(t);i.length===64?(r.v=27+(i[32]>>7),i[32]&=127,r.r=io(i.slice(0,32)),r.s=io(i.slice(32,64))):i.length===65?(r.r=io(i.slice(0,32)),r.s=io(i.slice(32,64)),r.v=i[64]):Gs.throwArgumentError("invalid signature string","signature",t),r.v<27&&(r.v===0||r.v===1?r.v+=27:Gs.throwArgumentError("signature invalid v byte","signature",t)),r.recoveryParam=1-r.v%2,r.recoveryParam&&(i[32]|=128),r._vs=io(i.slice(32,64))}else{if(r.r=t.r,r.s=t.s,r.v=t.v,r.recoveryParam=t.recoveryParam,r._vs=t._vs,r._vs!=null){const i=Zs(Ws(r._vs),32);r._vs=io(i);const n=i[0]>=128?1:0;r.recoveryParam==null?r.recoveryParam=n:r.recoveryParam!==n&&Gs.throwArgumentError("signature recoveryParam mismatch _vs","signature",t),i[0]&=127;const e=io(i);r.s==null?r.s=e:r.s!==e&&Gs.throwArgumentError("signature v mismatch _vs","signature",t)}if(r.recoveryParam==null)r.v==null?Gs.throwArgumentError("signature missing v and recoveryParam","signature",t):r.v===0||r.v===1?r.recoveryParam=r.v:r.recoveryParam=1-r.v%2;else if(r.v==null)r.v=27+r.recoveryParam;else{const i=r.v===0||r.v===1?r.v:1-r.v%2;r.recoveryParam!==i&&Gs.throwArgumentError("signature recoveryParam mismatch v","signature",t)}r.r==null||!to(r.r)?Gs.throwArgumentError("signature missing or invalid r","signature",t):r.r=so(r.r,32),r.s==null||!to(r.s)?Gs.throwArgumentError("signature missing or invalid s","signature",t):r.s=so(r.s,32);const i=Ws(r.s);i[0]>=128&&Gs.throwArgumentError("signature s out of range","signature",t),r.recoveryParam&&(i[0]|=128);const n=io(i);r._vs&&(to(r._vs)||Gs.throwArgumentError("signature invalid _vs","signature",t),r._vs=so(r._vs,32)),r._vs==null?r._vs=n:r._vs!==n&&Gs.throwArgumentError("signature _vs mismatch v and s","signature",t)}return r.yParityAndS=r._vs,r.compact=r.r+r.yParityAndS.substring(2),r}function ao(t){return"0x"+xs.keccak_256(Ws(t))}var ho={exports:{}},uo={},fo=Object.freeze({__proto__:null,default:uo}),co=Cs(fo);(function(t){(function(t,r){function i(t,r){if(!t)throw new Error(r||"Assertion failed")}function n(t,r){t.super_=r;var i=function(){};i.prototype=r.prototype,t.prototype=new i,t.prototype.constructor=t}function e(t,r,i){if(e.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,t!==null&&((r==="le"||r==="be")&&(i=r,r=10),this._init(t||0,r||10,i||"be"))}typeof t=="object"?t.exports=e:r.BN=e,e.BN=e,e.wordSize=26;var s;try{typeof window<"u"&&typeof window.Buffer<"u"?s=window.Buffer:s=co.Buffer}catch{}e.isBN=function(t){return t instanceof e?!0:t!==null&&typeof t=="object"&&t.constructor.wordSize===e.wordSize&&Array.isArray(t.words)},e.max=function(t,r){return t.cmp(r)>0?t:r},e.min=function(t,r){return t.cmp(r)<0?t:r},e.prototype._init=function(t,r,n){if(typeof t=="number")return this._initNumber(t,r,n);if(typeof t=="object")return this._initArray(t,r,n);r==="hex"&&(r=16),i(r===(r|0)&&r>=2&&r<=36),t=t.toString().replace(/\s+/g,"");var e=0;t[0]==="-"&&(e++,this.negative=1),e<t.length&&(r===16?this._parseHex(t,e,n):(this._parseBase(t,r,e),n==="le"&&this._initArray(this.toArray(),r,n)))},e.prototype._initNumber=function(t,r,n){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[t&67108863],this.length=1):t<4503599627370496?(this.words=[t&67108863,t/67108864&67108863],this.length=2):(i(t<9007199254740992),this.words=[t&67108863,t/67108864&67108863,1],this.length=3),n==="le"&&this._initArray(this.toArray(),r,n)},e.prototype._initArray=function(t,r,n){if(i(typeof t.length=="number"),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var e=0;e<this.length;e++)this.words[e]=0;var s,o,a=0;if(n==="be")for(e=t.length-1,s=0;e>=0;e-=3)o=t[e]|t[e-1]<<8|t[e-2]<<16,this.words[s]|=o<<a&67108863,this.words[s+1]=o>>>26-a&67108863,a+=24,a>=26&&(a-=26,s++);else if(n==="le")for(e=0,s=0;e<t.length;e+=3)o=t[e]|t[e+1]<<8|t[e+2]<<16,this.words[s]|=o<<a&67108863,this.words[s+1]=o>>>26-a&67108863,a+=24,a>=26&&(a-=26,s++);return this._strip()};function o(t,r){var n=t.charCodeAt(r);if(n>=48&&n<=57)return n-48;if(n>=65&&n<=70)return n-55;if(n>=97&&n<=102)return n-87;i(!1,"Invalid character in "+t)}function a(t,r,i){var n=o(t,i);return i-1>=r&&(n|=o(t,i-1)<<4),n}e.prototype._parseHex=function(t,r,i){this.length=Math.ceil((t.length-r)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var e=0,s=0,o;if(i==="be")for(n=t.length-1;n>=r;n-=2)o=a(t,r,n)<<e,this.words[s]|=o&67108863,e>=18?(e-=18,s+=1,this.words[s]|=o>>>26):e+=8;else{var h=t.length-r;for(n=h%2===0?r+1:r;n<t.length;n+=2)o=a(t,r,n)<<e,this.words[s]|=o&67108863,e>=18?(e-=18,s+=1,this.words[s]|=o>>>26):e+=8}this._strip()};function h(t,r,n,e){for(var s=0,o=0,a=Math.min(t.length,n),h=r;h<a;h++){var u=t.charCodeAt(h)-48;s*=e,u>=49?o=u-49+10:u>=17?o=u-17+10:o=u,i(u>=0&&o<e,"Invalid character"),s+=o}return s}e.prototype._parseBase=function(t,r,i){this.words=[0],this.length=1;for(var n=0,e=1;e<=67108863;e*=r)n++;n--,e=e/r|0;for(var s=t.length-i,o=s%n,a=Math.min(s,s-o)+i,u=0,f=i;f<a;f+=n)u=h(t,f,f+n,r),this.imuln(e),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(o!==0){var c=1;for(u=h(t,f,t.length,r),f=0;f<o;f++)c*=r;this.imuln(c),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this._strip()},e.prototype.copy=function(t){t.words=new Array(this.length);for(var r=0;r<this.length;r++)t.words[r]=this.words[r];t.length=this.length,t.negative=this.negative,t.red=this.red};function u(t,r){t.words=r.words,t.length=r.length,t.negative=r.negative,t.red=r.red}if(e.prototype._move=function(t){u(t,this)},e.prototype.clone=function(){var t=new e(null);return this.copy(t),t},e.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},e.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},e.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{e.prototype[Symbol.for("nodejs.util.inspect.custom")]=f}catch{e.prototype.inspect=f}else e.prototype.inspect=f;function f(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var c=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],l=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],d=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];e.prototype.toString=function(t,r){t=t||10,r=r|0||1;var n;if(t===16||t==="hex"){n="";for(var e=0,s=0,o=0;o<this.length;o++){var a=this.words[o],h=((a<<e|s)&16777215).toString(16);s=a>>>24-e&16777215,e+=2,e>=26&&(e-=26,o--),s!==0||o!==this.length-1?n=c[6-h.length]+h+n:n=h+n}for(s!==0&&(n=s.toString(16)+n);n.length%r!==0;)n="0"+n;return this.negative!==0&&(n="-"+n),n}if(t===(t|0)&&t>=2&&t<=36){var u=l[t],f=d[t];n="";var v=this.clone();for(v.negative=0;!v.isZero();){var w=v.modrn(f).toString(t);v=v.idivn(f),v.isZero()?n=w+n:n=c[u-w.length]+w+n}for(this.isZero()&&(n="0"+n);n.length%r!==0;)n="0"+n;return this.negative!==0&&(n="-"+n),n}i(!1,"Base should be between 2 and 36")},e.prototype.toNumber=function(){var t=this.words[0];return this.length===2?t+=this.words[1]*67108864:this.length===3&&this.words[2]===1?t+=4503599627370496+this.words[1]*67108864:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-t:t},e.prototype.toJSON=function(){return this.toString(16,2)},s&&(e.prototype.toBuffer=function(t,r){return this.toArrayLike(s,t,r)}),e.prototype.toArray=function(t,r){return this.toArrayLike(Array,t,r)};var v=function(t,r){return t.allocUnsafe?t.allocUnsafe(r):new t(r)};e.prototype.toArrayLike=function(t,r,n){this._strip();var e=this.byteLength(),s=n||Math.max(1,e);i(e<=s,"byte array longer than desired length"),i(s>0,"Requested array length <= 0");var o=v(t,s),a=r==="le"?"LE":"BE";return this["_toArrayLike"+a](o,e),o},e.prototype._toArrayLikeLE=function(t,r){for(var i=0,n=0,e=0,s=0;e<this.length;e++){var o=this.words[e]<<s|n;t[i++]=o&255,i<t.length&&(t[i++]=o>>8&255),i<t.length&&(t[i++]=o>>16&255),s===6?(i<t.length&&(t[i++]=o>>24&255),n=0,s=0):(n=o>>>24,s+=2)}if(i<t.length)for(t[i++]=n;i<t.length;)t[i++]=0},e.prototype._toArrayLikeBE=function(t,r){for(var i=t.length-1,n=0,e=0,s=0;e<this.length;e++){var o=this.words[e]<<s|n;t[i--]=o&255,i>=0&&(t[i--]=o>>8&255),i>=0&&(t[i--]=o>>16&255),s===6?(i>=0&&(t[i--]=o>>24&255),n=0,s=0):(n=o>>>24,s+=2)}if(i>=0)for(t[i--]=n;i>=0;)t[i--]=0},Math.clz32?e.prototype._countBits=function(t){return 32-Math.clz32(t)}:e.prototype._countBits=function(t){var r=t,i=0;return r>=4096&&(i+=13,r>>>=13),r>=64&&(i+=7,r>>>=7),r>=8&&(i+=4,r>>>=4),r>=2&&(i+=2,r>>>=2),i+r},e.prototype._zeroBits=function(t){if(t===0)return 26;var r=t,i=0;return r&8191||(i+=13,r>>>=13),r&127||(i+=7,r>>>=7),r&15||(i+=4,r>>>=4),r&3||(i+=2,r>>>=2),r&1||i++,i},e.prototype.bitLength=function(){var t=this.words[this.length-1],r=this._countBits(t);return(this.length-1)*26+r};function w(t){for(var r=new Array(t.bitLength()),i=0;i<r.length;i++){var n=i/26|0,e=i%26;r[i]=t.words[n]>>>e&1}return r}e.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,r=0;r<this.length;r++){var i=this._zeroBits(this.words[r]);if(t+=i,i!==26)break}return t},e.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},e.prototype.toTwos=function(t){return this.negative!==0?this.abs().inotn(t).iaddn(1):this.clone()},e.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},e.prototype.isNeg=function(){return this.negative!==0},e.prototype.neg=function(){return this.clone().ineg()},e.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},e.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]|t.words[r];return this._strip()},e.prototype.ior=function(t){return i((this.negative|t.negative)===0),this.iuor(t)},e.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},e.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},e.prototype.iuand=function(t){var r;this.length>t.length?r=t:r=this;for(var i=0;i<r.length;i++)this.words[i]=this.words[i]&t.words[i];return this.length=r.length,this._strip()},e.prototype.iand=function(t){return i((this.negative|t.negative)===0),this.iuand(t)},e.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},e.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},e.prototype.iuxor=function(t){var r,i;this.length>t.length?(r=this,i=t):(r=t,i=this);for(var n=0;n<i.length;n++)this.words[n]=r.words[n]^i.words[n];if(this!==r)for(;n<r.length;n++)this.words[n]=r.words[n];return this.length=r.length,this._strip()},e.prototype.ixor=function(t){return i((this.negative|t.negative)===0),this.iuxor(t)},e.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},e.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},e.prototype.inotn=function(t){i(typeof t=="number"&&t>=0);var r=Math.ceil(t/26)|0,n=t%26;this._expand(r),n>0&&r--;for(var e=0;e<r;e++)this.words[e]=~this.words[e]&67108863;return n>0&&(this.words[e]=~this.words[e]&67108863>>26-n),this._strip()},e.prototype.notn=function(t){return this.clone().inotn(t)},e.prototype.setn=function(t,r){i(typeof t=="number"&&t>=0);var n=t/26|0,e=t%26;return this._expand(n+1),r?this.words[n]=this.words[n]|1<<e:this.words[n]=this.words[n]&~(1<<e),this._strip()},e.prototype.iadd=function(t){var r;if(this.negative!==0&&t.negative===0)return this.negative=0,r=this.isub(t),this.negative^=1,this._normSign();if(this.negative===0&&t.negative!==0)return t.negative=0,r=this.isub(t),t.negative=1,r._normSign();var i,n;this.length>t.length?(i=this,n=t):(i=t,n=this);for(var e=0,s=0;s<n.length;s++)r=(i.words[s]|0)+(n.words[s]|0)+e,this.words[s]=r&67108863,e=r>>>26;for(;e!==0&&s<i.length;s++)r=(i.words[s]|0)+e,this.words[s]=r&67108863,e=r>>>26;if(this.length=i.length,e!==0)this.words[this.length]=e,this.length++;else if(i!==this)for(;s<i.length;s++)this.words[s]=i.words[s];return this},e.prototype.add=function(t){var r;return t.negative!==0&&this.negative===0?(t.negative=0,r=this.sub(t),t.negative^=1,r):t.negative===0&&this.negative!==0?(this.negative=0,r=t.sub(this),this.negative=1,r):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},e.prototype.isub=function(t){if(t.negative!==0){t.negative=0;var r=this.iadd(t);return t.negative=1,r._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var i=this.cmp(t);if(i===0)return this.negative=0,this.length=1,this.words[0]=0,this;var n,e;i>0?(n=this,e=t):(n=t,e=this);for(var s=0,o=0;o<e.length;o++)r=(n.words[o]|0)-(e.words[o]|0)+s,s=r>>26,this.words[o]=r&67108863;for(;s!==0&&o<n.length;o++)r=(n.words[o]|0)+s,s=r>>26,this.words[o]=r&67108863;if(s===0&&o<n.length&&n!==this)for(;o<n.length;o++)this.words[o]=n.words[o];return this.length=Math.max(this.length,o),n!==this&&(this.negative=1),this._strip()},e.prototype.sub=function(t){return this.clone().isub(t)};function p(t,r,i){i.negative=r.negative^t.negative;var n=t.length+r.length|0;i.length=n,n=n-1|0;var e=t.words[0]|0,s=r.words[0]|0,o=e*s,a=o&67108863,h=o/67108864|0;i.words[0]=a;for(var u=1;u<n;u++){for(var f=h>>>26,c=h&67108863,l=Math.min(u,r.length-1),d=Math.max(0,u-t.length+1);d<=l;d++){var v=u-d|0;e=t.words[v]|0,s=r.words[d]|0,o=e*s+c,f+=o/67108864|0,c=o&67108863}i.words[u]=c|0,h=f|0}return h!==0?i.words[u]=h|0:i.length--,i._strip()}var y=function(t,r,i){var n=t.words,e=r.words,s=i.words,o=0,a,h,u,f=n[0]|0,c=f&8191,l=f>>>13,d=n[1]|0,v=d&8191,w=d>>>13,p=n[2]|0,y=p&8191,b=p>>>13,g=n[3]|0,m=g&8191,A=g>>>13,E=n[4]|0,M=E&8191,_=E>>>13,I=n[5]|0,O=I&8191,S=I>>>13,N=n[6]|0,C=N&8191,j=N>>>13,x=n[7]|0,P=x&8191,R=x>>>13,T=n[8]|0,D=T&8191,U=T>>>13,B=n[9]|0,k=B&8191,$=B>>>13,F=e[0]|0,q=F&8191,L=F>>>13,K=e[1]|0,H=K&8191,G=K>>>13,Q=e[2]|0,V=Q&8191,z=Q>>>13,J=e[3]|0,Y=J&8191,W=J>>>13,X=e[4]|0,Z=X&8191,tt=X>>>13,rt=e[5]|0,it=rt&8191,nt=rt>>>13,et=e[6]|0,st=et&8191,ot=et>>>13,at=e[7]|0,ht=at&8191,ut=at>>>13,ft=e[8]|0,ct=ft&8191,lt=ft>>>13,dt=e[9]|0,vt=dt&8191,wt=dt>>>13;i.negative=t.negative^r.negative,i.length=19,a=Math.imul(c,q),h=Math.imul(c,L),h=h+Math.imul(l,q)|0,u=Math.imul(l,L);var pt=(o+a|0)+((h&8191)<<13)|0;o=(u+(h>>>13)|0)+(pt>>>26)|0,pt&=67108863,a=Math.imul(v,q),h=Math.imul(v,L),h=h+Math.imul(w,q)|0,u=Math.imul(w,L),a=a+Math.imul(c,H)|0,h=h+Math.imul(c,G)|0,h=h+Math.imul(l,H)|0,u=u+Math.imul(l,G)|0;var yt=(o+a|0)+((h&8191)<<13)|0;o=(u+(h>>>13)|0)+(yt>>>26)|0,yt&=67108863,a=Math.imul(y,q),h=Math.imul(y,L),h=h+Math.imul(b,q)|0,u=Math.imul(b,L),a=a+Math.imul(v,H)|0,h=h+Math.imul(v,G)|0,h=h+Math.imul(w,H)|0,u=u+Math.imul(w,G)|0,a=a+Math.imul(c,V)|0,h=h+Math.imul(c,z)|0,h=h+Math.imul(l,V)|0,u=u+Math.imul(l,z)|0;var bt=(o+a|0)+((h&8191)<<13)|0;o=(u+(h>>>13)|0)+(bt>>>26)|0,bt&=67108863,a=Math.imul(m,q),h=Math.imul(m,L),h=h+Math.imul(A,q)|0,u=Math.imul(A,L),a=a+Math.imul(y,H)|0,h=h+Math.imul(y,G)|0,h=h+Math.imul(b,H)|0,u=u+Math.imul(b,G)|0,a=a+Math.imul(v,V)|0,h=h+Math.imul(v,z)|0,h=h+Math.imul(w,V)|0,u=u+Math.imul(w,z)|0,a=a+Math.imul(c,Y)|0,h=h+Math.imul(c,W)|0,h=h+Math.imul(l,Y)|0,u=u+Math.imul(l,W)|0;var gt=(o+a|0)+((h&8191)<<13)|0;o=(u+(h>>>13)|0)+(gt>>>26)|0,gt&=67108863,a=Math.imul(M,q),h=Math.imul(M,L),h=h+Math.imul(_,q)|0,u=Math.imul(_,L),a=a+Math.imul(m,H)|0,h=h+Math.imul(m,G)|0,h=h+Math.imul(A,H)|0,u=u+Math.imul(A,G)|0,a=a+Math.imul(y,V)|0,h=h+Math.imul(y,z)|0,h=h+Math.imul(b,V)|0,u=u+Math.imul(b,z)|0,a=a+Math.imul(v,Y)|0,h=h+Math.imul(v,W)|0,h=h+Math.imul(w,Y)|0,u=u+Math.imul(w,W)|0,a=a+Math.imul(c,Z)|0,h=h+Math.imul(c,tt)|0,h=h+Math.imul(l,Z)|0,u=u+Math.imul(l,tt)|0;var mt=(o+a|0)+((h&8191)<<13)|0;o=(u+(h>>>13)|0)+(mt>>>26)|0,mt&=67108863,a=Math.imul(O,q),h=Math.imul(O,L),h=h+Math.imul(S,q)|0,u=Math.imul(S,L),a=a+Math.imul(M,H)|0,h=h+Math.imul(M,G)|0,h=h+Math.imul(_,H)|0,u=u+Math.imul(_,G)|0,a=a+Math.imul(m,V)|0,h=h+Math.imul(m,z)|0,h=h+Math.imul(A,V)|0,u=u+Math.imul(A,z)|0,a=a+Math.imul(y,Y)|0,h=h+Math.imul(y,W)|0,h=h+Math.imul(b,Y)|0,u=u+Math.imul(b,W)|0,a=a+Math.imul(v,Z)|0,h=h+Math.imul(v,tt)|0,h=h+Math.imul(w,Z)|0,u=u+Math.imul(w,tt)|0,a=a+Math.imul(c,it)|0,h=h+Math.imul(c,nt)|0,h=h+Math.imul(l,it)|0,u=u+Math.imul(l,nt)|0;var At=(o+a|0)+((h&8191)<<13)|0;o=(u+(h>>>13)|0)+(At>>>26)|0,At&=67108863,a=Math.imul(C,q),h=Math.imul(C,L),h=h+Math.imul(j,q)|0,u=Math.imul(j,L),a=a+Math.imul(O,H)|0,h=h+Math.imul(O,G)|0,h=h+Math.imul(S,H)|0,u=u+Math.imul(S,G)|0,a=a+Math.imul(M,V)|0,h=h+Math.imul(M,z)|0,h=h+Math.imul(_,V)|0,u=u+Math.imul(_,z)|0,a=a+Math.imul(m,Y)|0,h=h+Math.imul(m,W)|0,h=h+Math.imul(A,Y)|0,u=u+Math.imul(A,W)|0,a=a+Math.imul(y,Z)|0,h=h+Math.imul(y,tt)|0,h=h+Math.imul(b,Z)|0,u=u+Math.imul(b,tt)|0,a=a+Math.imul(v,it)|0,h=h+Math.imul(v,nt)|0,h=h+Math.imul(w,it)|0,u=u+Math.imul(w,nt)|0,a=a+Math.imul(c,st)|0,h=h+Math.imul(c,ot)|0,h=h+Math.imul(l,st)|0,u=u+Math.imul(l,ot)|0;var Et=(o+a|0)+((h&8191)<<13)|0;o=(u+(h>>>13)|0)+(Et>>>26)|0,Et&=67108863,a=Math.imul(P,q),h=Math.imul(P,L),h=h+Math.imul(R,q)|0,u=Math.imul(R,L),a=a+Math.imul(C,H)|0,h=h+Math.imul(C,G)|0,h=h+Math.imul(j,H)|0,u=u+Math.imul(j,G)|0,a=a+Math.imul(O,V)|0,h=h+Math.imul(O,z)|0,h=h+Math.imul(S,V)|0,u=u+Math.imul(S,z)|0,a=a+Math.imul(M,Y)|0,h=h+Math.imul(M,W)|0,h=h+Math.imul(_,Y)|0,u=u+Math.imul(_,W)|0,a=a+Math.imul(m,Z)|0,h=h+Math.imul(m,tt)|0,h=h+Math.imul(A,Z)|0,u=u+Math.imul(A,tt)|0,a=a+Math.imul(y,it)|0,h=h+Math.imul(y,nt)|0,h=h+Math.imul(b,it)|0,u=u+Math.imul(b,nt)|0,a=a+Math.imul(v,st)|0,h=h+Math.imul(v,ot)|0,h=h+Math.imul(w,st)|0,u=u+Math.imul(w,ot)|0,a=a+Math.imul(c,ht)|0,h=h+Math.imul(c,ut)|0,h=h+Math.imul(l,ht)|0,u=u+Math.imul(l,ut)|0;var Mt=(o+a|0)+((h&8191)<<13)|0;o=(u+(h>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,a=Math.imul(D,q),h=Math.imul(D,L),h=h+Math.imul(U,q)|0,u=Math.imul(U,L),a=a+Math.imul(P,H)|0,h=h+Math.imul(P,G)|0,h=h+Math.imul(R,H)|0,u=u+Math.imul(R,G)|0,a=a+Math.imul(C,V)|0,h=h+Math.imul(C,z)|0,h=h+Math.imul(j,V)|0,u=u+Math.imul(j,z)|0,a=a+Math.imul(O,Y)|0,h=h+Math.imul(O,W)|0,h=h+Math.imul(S,Y)|0,u=u+Math.imul(S,W)|0,a=a+Math.imul(M,Z)|0,h=h+Math.imul(M,tt)|0,h=h+Math.imul(_,Z)|0,u=u+Math.imul(_,tt)|0,a=a+Math.imul(m,it)|0,h=h+Math.imul(m,nt)|0,h=h+Math.imul(A,it)|0,u=u+Math.imul(A,nt)|0,a=a+Math.imul(y,st)|0,h=h+Math.imul(y,ot)|0,h=h+Math.imul(b,st)|0,u=u+Math.imul(b,ot)|0,a=a+Math.imul(v,ht)|0,h=h+Math.imul(v,ut)|0,h=h+Math.imul(w,ht)|0,u=u+Math.imul(w,ut)|0,a=a+Math.imul(c,ct)|0,h=h+Math.imul(c,lt)|0,h=h+Math.imul(l,ct)|0,u=u+Math.imul(l,lt)|0;var _t=(o+a|0)+((h&8191)<<13)|0;o=(u+(h>>>13)|0)+(_t>>>26)|0,_t&=67108863,a=Math.imul(k,q),h=Math.imul(k,L),h=h+Math.imul($,q)|0,u=Math.imul($,L),a=a+Math.imul(D,H)|0,h=h+Math.imul(D,G)|0,h=h+Math.imul(U,H)|0,u=u+Math.imul(U,G)|0,a=a+Math.imul(P,V)|0,h=h+Math.imul(P,z)|0,h=h+Math.imul(R,V)|0,u=u+Math.imul(R,z)|0,a=a+Math.imul(C,Y)|0,h=h+Math.imul(C,W)|0,h=h+Math.imul(j,Y)|0,u=u+Math.imul(j,W)|0,a=a+Math.imul(O,Z)|0,h=h+Math.imul(O,tt)|0,h=h+Math.imul(S,Z)|0,u=u+Math.imul(S,tt)|0,a=a+Math.imul(M,it)|0,h=h+Math.imul(M,nt)|0,h=h+Math.imul(_,it)|0,u=u+Math.imul(_,nt)|0,a=a+Math.imul(m,st)|0,h=h+Math.imul(m,ot)|0,h=h+Math.imul(A,st)|0,u=u+Math.imul(A,ot)|0,a=a+Math.imul(y,ht)|0,h=h+Math.imul(y,ut)|0,h=h+Math.imul(b,ht)|0,u=u+Math.imul(b,ut)|0,a=a+Math.imul(v,ct)|0,h=h+Math.imul(v,lt)|0,h=h+Math.imul(w,ct)|0,u=u+Math.imul(w,lt)|0,a=a+Math.imul(c,vt)|0,h=h+Math.imul(c,wt)|0,h=h+Math.imul(l,vt)|0,u=u+Math.imul(l,wt)|0;var It=(o+a|0)+((h&8191)<<13)|0;o=(u+(h>>>13)|0)+(It>>>26)|0,It&=67108863,a=Math.imul(k,H),h=Math.imul(k,G),h=h+Math.imul($,H)|0,u=Math.imul($,G),a=a+Math.imul(D,V)|0,h=h+Math.imul(D,z)|0,h=h+Math.imul(U,V)|0,u=u+Math.imul(U,z)|0,a=a+Math.imul(P,Y)|0,h=h+Math.imul(P,W)|0,h=h+Math.imul(R,Y)|0,u=u+Math.imul(R,W)|0,a=a+Math.imul(C,Z)|0,h=h+Math.imul(C,tt)|0,h=h+Math.imul(j,Z)|0,u=u+Math.imul(j,tt)|0,a=a+Math.imul(O,it)|0,h=h+Math.imul(O,nt)|0,h=h+Math.imul(S,it)|0,u=u+Math.imul(S,nt)|0,a=a+Math.imul(M,st)|0,h=h+Math.imul(M,ot)|0,h=h+Math.imul(_,st)|0,u=u+Math.imul(_,ot)|0,a=a+Math.imul(m,ht)|0,h=h+Math.imul(m,ut)|0,h=h+Math.imul(A,ht)|0,u=u+Math.imul(A,ut)|0,a=a+Math.imul(y,ct)|0,h=h+Math.imul(y,lt)|0,h=h+Math.imul(b,ct)|0,u=u+Math.imul(b,lt)|0,a=a+Math.imul(v,vt)|0,h=h+Math.imul(v,wt)|0,h=h+Math.imul(w,vt)|0,u=u+Math.imul(w,wt)|0;var Ot=(o+a|0)+((h&8191)<<13)|0;o=(u+(h>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,a=Math.imul(k,V),h=Math.imul(k,z),h=h+Math.imul($,V)|0,u=Math.imul($,z),a=a+Math.imul(D,Y)|0,h=h+Math.imul(D,W)|0,h=h+Math.imul(U,Y)|0,u=u+Math.imul(U,W)|0,a=a+Math.imul(P,Z)|0,h=h+Math.imul(P,tt)|0,h=h+Math.imul(R,Z)|0,u=u+Math.imul(R,tt)|0,a=a+Math.imul(C,it)|0,h=h+Math.imul(C,nt)|0,h=h+Math.imul(j,it)|0,u=u+Math.imul(j,nt)|0,a=a+Math.imul(O,st)|0,h=h+Math.imul(O,ot)|0,h=h+Math.imul(S,st)|0,u=u+Math.imul(S,ot)|0,a=a+Math.imul(M,ht)|0,h=h+Math.imul(M,ut)|0,h=h+Math.imul(_,ht)|0,u=u+Math.imul(_,ut)|0,a=a+Math.imul(m,ct)|0,h=h+Math.imul(m,lt)|0,h=h+Math.imul(A,ct)|0,u=u+Math.imul(A,lt)|0,a=a+Math.imul(y,vt)|0,h=h+Math.imul(y,wt)|0,h=h+Math.imul(b,vt)|0,u=u+Math.imul(b,wt)|0;var St=(o+a|0)+((h&8191)<<13)|0;o=(u+(h>>>13)|0)+(St>>>26)|0,St&=67108863,a=Math.imul(k,Y),h=Math.imul(k,W),h=h+Math.imul($,Y)|0,u=Math.imul($,W),a=a+Math.imul(D,Z)|0,h=h+Math.imul(D,tt)|0,h=h+Math.imul(U,Z)|0,u=u+Math.imul(U,tt)|0,a=a+Math.imul(P,it)|0,h=h+Math.imul(P,nt)|0,h=h+Math.imul(R,it)|0,u=u+Math.imul(R,nt)|0,a=a+Math.imul(C,st)|0,h=h+Math.imul(C,ot)|0,h=h+Math.imul(j,st)|0,u=u+Math.imul(j,ot)|0,a=a+Math.imul(O,ht)|0,h=h+Math.imul(O,ut)|0,h=h+Math.imul(S,ht)|0,u=u+Math.imul(S,ut)|0,a=a+Math.imul(M,ct)|0,h=h+Math.imul(M,lt)|0,h=h+Math.imul(_,ct)|0,u=u+Math.imul(_,lt)|0,a=a+Math.imul(m,vt)|0,h=h+Math.imul(m,wt)|0,h=h+Math.imul(A,vt)|0,u=u+Math.imul(A,wt)|0;var Nt=(o+a|0)+((h&8191)<<13)|0;o=(u+(h>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,a=Math.imul(k,Z),h=Math.imul(k,tt),h=h+Math.imul($,Z)|0,u=Math.imul($,tt),a=a+Math.imul(D,it)|0,h=h+Math.imul(D,nt)|0,h=h+Math.imul(U,it)|0,u=u+Math.imul(U,nt)|0,a=a+Math.imul(P,st)|0,h=h+Math.imul(P,ot)|0,h=h+Math.imul(R,st)|0,u=u+Math.imul(R,ot)|0,a=a+Math.imul(C,ht)|0,h=h+Math.imul(C,ut)|0,h=h+Math.imul(j,ht)|0,u=u+Math.imul(j,ut)|0,a=a+Math.imul(O,ct)|0,h=h+Math.imul(O,lt)|0,h=h+Math.imul(S,ct)|0,u=u+Math.imul(S,lt)|0,a=a+Math.imul(M,vt)|0,h=h+Math.imul(M,wt)|0,h=h+Math.imul(_,vt)|0,u=u+Math.imul(_,wt)|0;var Ct=(o+a|0)+((h&8191)<<13)|0;o=(u+(h>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,a=Math.imul(k,it),h=Math.imul(k,nt),h=h+Math.imul($,it)|0,u=Math.imul($,nt),a=a+Math.imul(D,st)|0,h=h+Math.imul(D,ot)|0,h=h+Math.imul(U,st)|0,u=u+Math.imul(U,ot)|0,a=a+Math.imul(P,ht)|0,h=h+Math.imul(P,ut)|0,h=h+Math.imul(R,ht)|0,u=u+Math.imul(R,ut)|0,a=a+Math.imul(C,ct)|0,h=h+Math.imul(C,lt)|0,h=h+Math.imul(j,ct)|0,u=u+Math.imul(j,lt)|0,a=a+Math.imul(O,vt)|0,h=h+Math.imul(O,wt)|0,h=h+Math.imul(S,vt)|0,u=u+Math.imul(S,wt)|0;var jt=(o+a|0)+((h&8191)<<13)|0;o=(u+(h>>>13)|0)+(jt>>>26)|0,jt&=67108863,a=Math.imul(k,st),h=Math.imul(k,ot),h=h+Math.imul($,st)|0,u=Math.imul($,ot),a=a+Math.imul(D,ht)|0,h=h+Math.imul(D,ut)|0,h=h+Math.imul(U,ht)|0,u=u+Math.imul(U,ut)|0,a=a+Math.imul(P,ct)|0,h=h+Math.imul(P,lt)|0,h=h+Math.imul(R,ct)|0,u=u+Math.imul(R,lt)|0,a=a+Math.imul(C,vt)|0,h=h+Math.imul(C,wt)|0,h=h+Math.imul(j,vt)|0,u=u+Math.imul(j,wt)|0;var xt=(o+a|0)+((h&8191)<<13)|0;o=(u+(h>>>13)|0)+(xt>>>26)|0,xt&=67108863,a=Math.imul(k,ht),h=Math.imul(k,ut),h=h+Math.imul($,ht)|0,u=Math.imul($,ut),a=a+Math.imul(D,ct)|0,h=h+Math.imul(D,lt)|0,h=h+Math.imul(U,ct)|0,u=u+Math.imul(U,lt)|0,a=a+Math.imul(P,vt)|0,h=h+Math.imul(P,wt)|0,h=h+Math.imul(R,vt)|0,u=u+Math.imul(R,wt)|0;var Pt=(o+a|0)+((h&8191)<<13)|0;o=(u+(h>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,a=Math.imul(k,ct),h=Math.imul(k,lt),h=h+Math.imul($,ct)|0,u=Math.imul($,lt),a=a+Math.imul(D,vt)|0,h=h+Math.imul(D,wt)|0,h=h+Math.imul(U,vt)|0,u=u+Math.imul(U,wt)|0;var Rt=(o+a|0)+((h&8191)<<13)|0;o=(u+(h>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,a=Math.imul(k,vt),h=Math.imul(k,wt),h=h+Math.imul($,vt)|0,u=Math.imul($,wt);var Tt=(o+a|0)+((h&8191)<<13)|0;return o=(u+(h>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,s[0]=pt,s[1]=yt,s[2]=bt,s[3]=gt,s[4]=mt,s[5]=At,s[6]=Et,s[7]=Mt,s[8]=_t,s[9]=It,s[10]=Ot,s[11]=St,s[12]=Nt,s[13]=Ct,s[14]=jt,s[15]=xt,s[16]=Pt,s[17]=Rt,s[18]=Tt,o!==0&&(s[19]=o,i.length++),i};Math.imul||(y=p);function b(t,r,i){i.negative=r.negative^t.negative,i.length=t.length+r.length;for(var n=0,e=0,s=0;s<i.length-1;s++){var o=e;e=0;for(var a=n&67108863,h=Math.min(s,r.length-1),u=Math.max(0,s-t.length+1);u<=h;u++){var f=s-u,c=t.words[f]|0,l=r.words[u]|0,d=c*l,v=d&67108863;o=o+(d/67108864|0)|0,v=v+a|0,a=v&67108863,o=o+(v>>>26)|0,e+=o>>>26,o&=67108863}i.words[s]=a,n=o,o=e}return n!==0?i.words[s]=n:i.length--,i._strip()}function g(t,r,i){return b(t,r,i)}e.prototype.mulTo=function(t,r){var i,n=this.length+t.length;return this.length===10&&t.length===10?i=y(this,t,r):n<63?i=p(this,t,r):n<1024?i=b(this,t,r):i=g(this,t,r),i},e.prototype.mul=function(t){var r=new e(null);return r.words=new Array(this.length+t.length),this.mulTo(t,r)},e.prototype.mulf=function(t){var r=new e(null);return r.words=new Array(this.length+t.length),g(this,t,r)},e.prototype.imul=function(t){return this.clone().mulTo(t,this)},e.prototype.imuln=function(t){var r=t<0;r&&(t=-t),i(typeof t=="number"),i(t<67108864);for(var n=0,e=0;e<this.length;e++){var s=(this.words[e]|0)*t,o=(s&67108863)+(n&67108863);n>>=26,n+=s/67108864|0,n+=o>>>26,this.words[e]=o&67108863}return n!==0&&(this.words[e]=n,this.length++),r?this.ineg():this},e.prototype.muln=function(t){return this.clone().imuln(t)},e.prototype.sqr=function(){return this.mul(this)},e.prototype.isqr=function(){return this.imul(this.clone())},e.prototype.pow=function(t){var r=w(t);if(r.length===0)return new e(1);for(var i=this,n=0;n<r.length&&r[n]===0;n++,i=i.sqr());if(++n<r.length)for(var s=i.sqr();n<r.length;n++,s=s.sqr())r[n]!==0&&(i=i.mul(s));return i},e.prototype.iushln=function(t){i(typeof t=="number"&&t>=0);var r=t%26,n=(t-r)/26,e=67108863>>>26-r<<26-r,s;if(r!==0){var o=0;for(s=0;s<this.length;s++){var a=this.words[s]&e,h=(this.words[s]|0)-a<<r;this.words[s]=h|o,o=a>>>26-r}o&&(this.words[s]=o,this.length++)}if(n!==0){for(s=this.length-1;s>=0;s--)this.words[s+n]=this.words[s];for(s=0;s<n;s++)this.words[s]=0;this.length+=n}return this._strip()},e.prototype.ishln=function(t){return i(this.negative===0),this.iushln(t)},e.prototype.iushrn=function(t,r,n){i(typeof t=="number"&&t>=0);var e;r?e=(r-r%26)/26:e=0;var s=t%26,o=Math.min((t-s)/26,this.length),a=67108863^67108863>>>s<<s,h=n;if(e-=o,e=Math.max(0,e),h){for(var u=0;u<o;u++)h.words[u]=this.words[u];h.length=o}if(o!==0)if(this.length>o)for(this.length-=o,u=0;u<this.length;u++)this.words[u]=this.words[u+o];else this.words[0]=0,this.length=1;var f=0;for(u=this.length-1;u>=0&&(f!==0||u>=e);u--){var c=this.words[u]|0;this.words[u]=f<<26-s|c>>>s,f=c&a}return h&&f!==0&&(h.words[h.length++]=f),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},e.prototype.ishrn=function(t,r,n){return i(this.negative===0),this.iushrn(t,r,n)},e.prototype.shln=function(t){return this.clone().ishln(t)},e.prototype.ushln=function(t){return this.clone().iushln(t)},e.prototype.shrn=function(t){return this.clone().ishrn(t)},e.prototype.ushrn=function(t){return this.clone().iushrn(t)},e.prototype.testn=function(t){i(typeof t=="number"&&t>=0);var r=t%26,n=(t-r)/26,e=1<<r;if(this.length<=n)return!1;var s=this.words[n];return!!(s&e)},e.prototype.imaskn=function(t){i(typeof t=="number"&&t>=0);var r=t%26,n=(t-r)/26;if(i(this.negative===0,"imaskn works only with positive numbers"),this.length<=n)return this;if(r!==0&&n++,this.length=Math.min(n,this.length),r!==0){var e=67108863^67108863>>>r<<r;this.words[this.length-1]&=e}return this._strip()},e.prototype.maskn=function(t){return this.clone().imaskn(t)},e.prototype.iaddn=function(t){return i(typeof t=="number"),i(t<67108864),t<0?this.isubn(-t):this.negative!==0?this.length===1&&(this.words[0]|0)<=t?(this.words[0]=t-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},e.prototype._iaddn=function(t){this.words[0]+=t;for(var r=0;r<this.length&&this.words[r]>=67108864;r++)this.words[r]-=67108864,r===this.length-1?this.words[r+1]=1:this.words[r+1]++;return this.length=Math.max(this.length,r+1),this},e.prototype.isubn=function(t){if(i(typeof t=="number"),i(t<67108864),t<0)return this.iaddn(-t);if(this.negative!==0)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var r=0;r<this.length&&this.words[r]<0;r++)this.words[r]+=67108864,this.words[r+1]-=1;return this._strip()},e.prototype.addn=function(t){return this.clone().iaddn(t)},e.prototype.subn=function(t){return this.clone().isubn(t)},e.prototype.iabs=function(){return this.negative=0,this},e.prototype.abs=function(){return this.clone().iabs()},e.prototype._ishlnsubmul=function(t,r,n){var e=t.length+n,s;this._expand(e);var o,a=0;for(s=0;s<t.length;s++){o=(this.words[s+n]|0)+a;var h=(t.words[s]|0)*r;o-=h&67108863,a=(o>>26)-(h/67108864|0),this.words[s+n]=o&67108863}for(;s<this.length-n;s++)o=(this.words[s+n]|0)+a,a=o>>26,this.words[s+n]=o&67108863;if(a===0)return this._strip();for(i(a===-1),a=0,s=0;s<this.length;s++)o=-(this.words[s]|0)+a,a=o>>26,this.words[s]=o&67108863;return this.negative=1,this._strip()},e.prototype._wordDiv=function(t,r){var i=this.length-t.length,n=this.clone(),s=t,o=s.words[s.length-1]|0,a=this._countBits(o);i=26-a,i!==0&&(s=s.ushln(i),n.iushln(i),o=s.words[s.length-1]|0);var h=n.length-s.length,u;if(r!=="mod"){u=new e(null),u.length=h+1,u.words=new Array(u.length);for(var f=0;f<u.length;f++)u.words[f]=0}var c=n.clone()._ishlnsubmul(s,1,h);c.negative===0&&(n=c,u&&(u.words[h]=1));for(var l=h-1;l>=0;l--){var d=(n.words[s.length+l]|0)*67108864+(n.words[s.length+l-1]|0);for(d=Math.min(d/o|0,67108863),n._ishlnsubmul(s,d,l);n.negative!==0;)d--,n.negative=0,n._ishlnsubmul(s,1,l),n.isZero()||(n.negative^=1);u&&(u.words[l]=d)}return u&&u._strip(),n._strip(),r!=="div"&&i!==0&&n.iushrn(i),{div:u||null,mod:n}},e.prototype.divmod=function(t,r,n){if(i(!t.isZero()),this.isZero())return{div:new e(0),mod:new e(0)};var s,o,a;return this.negative!==0&&t.negative===0?(a=this.neg().divmod(t,r),r!=="mod"&&(s=a.div.neg()),r!=="div"&&(o=a.mod.neg(),n&&o.negative!==0&&o.iadd(t)),{div:s,mod:o}):this.negative===0&&t.negative!==0?(a=this.divmod(t.neg(),r),r!=="mod"&&(s=a.div.neg()),{div:s,mod:a.mod}):this.negative&t.negative?(a=this.neg().divmod(t.neg(),r),r!=="div"&&(o=a.mod.neg(),n&&o.negative!==0&&o.isub(t)),{div:a.div,mod:o}):t.length>this.length||this.cmp(t)<0?{div:new e(0),mod:this}:t.length===1?r==="div"?{div:this.divn(t.words[0]),mod:null}:r==="mod"?{div:null,mod:new e(this.modrn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new e(this.modrn(t.words[0]))}:this._wordDiv(t,r)},e.prototype.div=function(t){return this.divmod(t,"div",!1).div},e.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},e.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},e.prototype.divRound=function(t){var r=this.divmod(t);if(r.mod.isZero())return r.div;var i=r.div.negative!==0?r.mod.isub(t):r.mod,n=t.ushrn(1),e=t.andln(1),s=i.cmp(n);return s<0||e===1&&s===0?r.div:r.div.negative!==0?r.div.isubn(1):r.div.iaddn(1)},e.prototype.modrn=function(t){var r=t<0;r&&(t=-t),i(t<=67108863);for(var n=(1<<26)%t,e=0,s=this.length-1;s>=0;s--)e=(n*e+(this.words[s]|0))%t;return r?-e:e},e.prototype.modn=function(t){return this.modrn(t)},e.prototype.idivn=function(t){var r=t<0;r&&(t=-t),i(t<=67108863);for(var n=0,e=this.length-1;e>=0;e--){var s=(this.words[e]|0)+n*67108864;this.words[e]=s/t|0,n=s%t}return this._strip(),r?this.ineg():this},e.prototype.divn=function(t){return this.clone().idivn(t)},e.prototype.egcd=function(t){i(t.negative===0),i(!t.isZero());var r=this,n=t.clone();r.negative!==0?r=r.umod(t):r=r.clone();for(var s=new e(1),o=new e(0),a=new e(0),h=new e(1),u=0;r.isEven()&&n.isEven();)r.iushrn(1),n.iushrn(1),++u;for(var f=n.clone(),c=r.clone();!r.isZero();){for(var l=0,d=1;!(r.words[0]&d)&&l<26;++l,d<<=1);if(l>0)for(r.iushrn(l);l-- >0;)(s.isOdd()||o.isOdd())&&(s.iadd(f),o.isub(c)),s.iushrn(1),o.iushrn(1);for(var v=0,w=1;!(n.words[0]&w)&&v<26;++v,w<<=1);if(v>0)for(n.iushrn(v);v-- >0;)(a.isOdd()||h.isOdd())&&(a.iadd(f),h.isub(c)),a.iushrn(1),h.iushrn(1);r.cmp(n)>=0?(r.isub(n),s.isub(a),o.isub(h)):(n.isub(r),a.isub(s),h.isub(o))}return{a,b:h,gcd:n.iushln(u)}},e.prototype._invmp=function(t){i(t.negative===0),i(!t.isZero());var r=this,n=t.clone();r.negative!==0?r=r.umod(t):r=r.clone();for(var s=new e(1),o=new e(0),a=n.clone();r.cmpn(1)>0&&n.cmpn(1)>0;){for(var h=0,u=1;!(r.words[0]&u)&&h<26;++h,u<<=1);if(h>0)for(r.iushrn(h);h-- >0;)s.isOdd()&&s.iadd(a),s.iushrn(1);for(var f=0,c=1;!(n.words[0]&c)&&f<26;++f,c<<=1);if(f>0)for(n.iushrn(f);f-- >0;)o.isOdd()&&o.iadd(a),o.iushrn(1);r.cmp(n)>=0?(r.isub(n),s.isub(o)):(n.isub(r),o.isub(s))}var l;return r.cmpn(1)===0?l=s:l=o,l.cmpn(0)<0&&l.iadd(t),l},e.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var r=this.clone(),i=t.clone();r.negative=0,i.negative=0;for(var n=0;r.isEven()&&i.isEven();n++)r.iushrn(1),i.iushrn(1);do{for(;r.isEven();)r.iushrn(1);for(;i.isEven();)i.iushrn(1);var e=r.cmp(i);if(e<0){var s=r;r=i,i=s}else if(e===0||i.cmpn(1)===0)break;r.isub(i)}while(!0);return i.iushln(n)},e.prototype.invm=function(t){return this.egcd(t).a.umod(t)},e.prototype.isEven=function(){return(this.words[0]&1)===0},e.prototype.isOdd=function(){return(this.words[0]&1)===1},e.prototype.andln=function(t){return this.words[0]&t},e.prototype.bincn=function(t){i(typeof t=="number");var r=t%26,n=(t-r)/26,e=1<<r;if(this.length<=n)return this._expand(n+1),this.words[n]|=e,this;for(var s=e,o=n;s!==0&&o<this.length;o++){var a=this.words[o]|0;a+=s,s=a>>>26,a&=67108863,this.words[o]=a}return s!==0&&(this.words[o]=s,this.length++),this},e.prototype.isZero=function(){return this.length===1&&this.words[0]===0},e.prototype.cmpn=function(t){var r=t<0;if(this.negative!==0&&!r)return-1;if(this.negative===0&&r)return 1;this._strip();var n;if(this.length>1)n=1;else{r&&(t=-t),i(t<=67108863,"Number is too big");var e=this.words[0]|0;n=e===t?0:e<t?-1:1}return this.negative!==0?-n|0:n},e.prototype.cmp=function(t){if(this.negative!==0&&t.negative===0)return-1;if(this.negative===0&&t.negative!==0)return 1;var r=this.ucmp(t);return this.negative!==0?-r|0:r},e.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var r=0,i=this.length-1;i>=0;i--){var n=this.words[i]|0,e=t.words[i]|0;if(n!==e){n<e?r=-1:n>e&&(r=1);break}}return r},e.prototype.gtn=function(t){return this.cmpn(t)===1},e.prototype.gt=function(t){return this.cmp(t)===1},e.prototype.gten=function(t){return this.cmpn(t)>=0},e.prototype.gte=function(t){return this.cmp(t)>=0},e.prototype.ltn=function(t){return this.cmpn(t)===-1},e.prototype.lt=function(t){return this.cmp(t)===-1},e.prototype.lten=function(t){return this.cmpn(t)<=0},e.prototype.lte=function(t){return this.cmp(t)<=0},e.prototype.eqn=function(t){return this.cmpn(t)===0},e.prototype.eq=function(t){return this.cmp(t)===0},e.red=function(t){return new O(t)},e.prototype.toRed=function(t){return i(!this.red,"Already a number in reduction context"),i(this.negative===0,"red works only with positives"),t.convertTo(this)._forceRed(t)},e.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},e.prototype._forceRed=function(t){return this.red=t,this},e.prototype.forceRed=function(t){return i(!this.red,"Already a number in reduction context"),this._forceRed(t)},e.prototype.redAdd=function(t){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},e.prototype.redIAdd=function(t){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},e.prototype.redSub=function(t){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},e.prototype.redISub=function(t){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},e.prototype.redShl=function(t){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},e.prototype.redMul=function(t){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},e.prototype.redIMul=function(t){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},e.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},e.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},e.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},e.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},e.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},e.prototype.redPow=function(t){return i(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var m={k256:null,p224:null,p192:null,p25519:null};function A(t,r){this.name=t,this.p=new e(r,16),this.n=this.p.bitLength(),this.k=new e(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}A.prototype._tmp=function(){var t=new e(null);return t.words=new Array(Math.ceil(this.n/13)),t},A.prototype.ireduce=function(t){var r=t,i;do{this.split(r,this.tmp),r=this.imulK(r),r=r.iadd(this.tmp),i=r.bitLength()}while(i>this.n);var n=i<this.n?-1:r.ucmp(this.p);return n===0?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):r.strip!==void 0?r.strip():r._strip(),r},A.prototype.split=function(t,r){t.iushrn(this.n,0,r)},A.prototype.imulK=function(t){return t.imul(this.k)};function E(){A.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(E,A),E.prototype.split=function(t,r){for(var i=4194303,n=Math.min(t.length,9),e=0;e<n;e++)r.words[e]=t.words[e];if(r.length=n,t.length<=9){t.words[0]=0,t.length=1;return}var s=t.words[9];for(r.words[r.length++]=s&i,e=10;e<t.length;e++){var o=t.words[e]|0;t.words[e-10]=(o&i)<<4|s>>>22,s=o}s>>>=22,t.words[e-10]=s,s===0&&t.length>10?t.length-=10:t.length-=9},E.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var r=0,i=0;i<t.length;i++){var n=t.words[i]|0;r+=n*977,t.words[i]=r&67108863,r=n*64+(r/67108864|0)}return t.words[t.length-1]===0&&(t.length--,t.words[t.length-1]===0&&t.length--),t};function M(){A.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n(M,A);function _(){A.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n(_,A);function I(){A.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n(I,A),I.prototype.imulK=function(t){for(var r=0,i=0;i<t.length;i++){var n=(t.words[i]|0)*19+r,e=n&67108863;n>>>=26,t.words[i]=e,r=n}return r!==0&&(t.words[t.length++]=r),t},e._prime=function(t){if(m[t])return m[t];var r;if(t==="k256")r=new E;else if(t==="p224")r=new M;else if(t==="p192")r=new _;else if(t==="p25519")r=new I;else throw new Error("Unknown prime "+t);return m[t]=r,r};function O(t){if(typeof t=="string"){var r=e._prime(t);this.m=r.p,this.prime=r}else i(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}O.prototype._verify1=function(t){i(t.negative===0,"red works only with positives"),i(t.red,"red works only with red numbers")},O.prototype._verify2=function(t,r){i((t.negative|r.negative)===0,"red works only with positives"),i(t.red&&t.red===r.red,"red works only with red numbers")},O.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):(u(t,t.umod(this.m)._forceRed(this)),t)},O.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},O.prototype.add=function(t,r){this._verify2(t,r);var i=t.add(r);return i.cmp(this.m)>=0&&i.isub(this.m),i._forceRed(this)},O.prototype.iadd=function(t,r){this._verify2(t,r);var i=t.iadd(r);return i.cmp(this.m)>=0&&i.isub(this.m),i},O.prototype.sub=function(t,r){this._verify2(t,r);var i=t.sub(r);return i.cmpn(0)<0&&i.iadd(this.m),i._forceRed(this)},O.prototype.isub=function(t,r){this._verify2(t,r);var i=t.isub(r);return i.cmpn(0)<0&&i.iadd(this.m),i},O.prototype.shl=function(t,r){return this._verify1(t),this.imod(t.ushln(r))},O.prototype.imul=function(t,r){return this._verify2(t,r),this.imod(t.imul(r))},O.prototype.mul=function(t,r){return this._verify2(t,r),this.imod(t.mul(r))},O.prototype.isqr=function(t){return this.imul(t,t.clone())},O.prototype.sqr=function(t){return this.mul(t,t)},O.prototype.sqrt=function(t){if(t.isZero())return t.clone();var r=this.m.andln(3);if(i(r%2===1),r===3){var n=this.m.add(new e(1)).iushrn(2);return this.pow(t,n)}for(var s=this.m.subn(1),o=0;!s.isZero()&&s.andln(1)===0;)o++,s.iushrn(1);i(!s.isZero());var a=new e(1).toRed(this),h=a.redNeg(),u=this.m.subn(1).iushrn(1),f=this.m.bitLength();for(f=new e(2*f*f).toRed(this);this.pow(f,u).cmp(h)!==0;)f.redIAdd(h);for(var c=this.pow(f,s),l=this.pow(t,s.addn(1).iushrn(1)),d=this.pow(t,s),v=o;d.cmp(a)!==0;){for(var w=d,p=0;w.cmp(a)!==0;p++)w=w.redSqr();i(p<v);var y=this.pow(c,new e(1).iushln(v-p-1));l=l.redMul(y),c=y.redSqr(),d=d.redMul(c),v=p}return l},O.prototype.invm=function(t){var r=t._invmp(this.m);return r.negative!==0?(r.negative=0,this.imod(r).redNeg()):this.imod(r)},O.prototype.pow=function(t,r){if(r.isZero())return new e(1).toRed(this);if(r.cmpn(1)===0)return t.clone();var i=4,n=new Array(1<<i);n[0]=new e(1).toRed(this),n[1]=t;for(var s=2;s<n.length;s++)n[s]=this.mul(n[s-1],t);var o=n[0],a=0,h=0,u=r.bitLength()%26;for(u===0&&(u=26),s=r.length-1;s>=0;s--){for(var f=r.words[s],c=u-1;c>=0;c--){var l=f>>c&1;if(o!==n[0]&&(o=this.sqr(o)),l===0&&a===0){h=0;continue}a<<=1,a|=l,h++,!(h!==i&&(s!==0||c!==0))&&(o=this.mul(o,n[a]),h=0,a=0)}u=26}return o},O.prototype.convertTo=function(t){var r=t.umod(this.m);return r===t?r.clone():r},O.prototype.convertFrom=function(t){var r=t.clone();return r.red=null,r},e.mont=function(t){return new S(t)};function S(t){O.call(this,t),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new e(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}n(S,O),S.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},S.prototype.convertFrom=function(t){var r=this.imod(t.mul(this.rinv));return r.red=null,r},S.prototype.imul=function(t,r){if(t.isZero()||r.isZero())return t.words[0]=0,t.length=1,t;var i=t.imul(r),n=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),e=i.isub(n).iushrn(this.shift),s=e;return e.cmp(this.m)>=0?s=e.isub(this.m):e.cmpn(0)<0&&(s=e.iadd(this.m)),s._forceRed(this)},S.prototype.mul=function(t,r){if(t.isZero()||r.isZero())return new e(0)._forceRed(this);var i=t.mul(r),n=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),s=i.isub(n).iushrn(this.shift),o=s;return s.cmp(this.m)>=0?o=s.isub(this.m):s.cmpn(0)<0&&(o=s.iadd(this.m)),o._forceRed(this)},S.prototype.invm=function(t){var r=this.imod(t._invmp(this.m).mul(this.r2));return r._forceRed(this)}})(t,Ns)})(ho);var lo=ho.exports;const vo="bignumber/5.7.0";var wo=lo.BN;const po=new Ks(vo),yo={},bo=9007199254740991;function go(t){return t!=null&&(Ao.isBigNumber(t)||typeof t=="number"&&t%1===0||typeof t=="string"&&!!t.match(/^-?[0-9]+$/)||to(t)||typeof t=="bigint"||Ys(t))}let mo=!1;class Ao{constructor(t,r){t!==yo&&po.throwError("cannot call constructor directly; use BigNumber.from",Ks.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=r,this._isBigNumber=!0,Object.freeze(this)}fromTwos(t){return Mo(_o(this).fromTwos(t))}toTwos(t){return Mo(_o(this).toTwos(t))}abs(){return this._hex[0]==="-"?Ao.from(this._hex.substring(1)):this}add(t){return Mo(_o(this).add(_o(t)))}sub(t){return Mo(_o(this).sub(_o(t)))}div(t){return Ao.from(t).isZero()&&Io("division-by-zero","div"),Mo(_o(this).div(_o(t)))}mul(t){return Mo(_o(this).mul(_o(t)))}mod(t){const r=_o(t);return r.isNeg()&&Io("division-by-zero","mod"),Mo(_o(this).umod(r))}pow(t){const r=_o(t);return r.isNeg()&&Io("negative-power","pow"),Mo(_o(this).pow(r))}and(t){const r=_o(t);return(this.isNegative()||r.isNeg())&&Io("unbound-bitwise-result","and"),Mo(_o(this).and(r))}or(t){const r=_o(t);return(this.isNegative()||r.isNeg())&&Io("unbound-bitwise-result","or"),Mo(_o(this).or(r))}xor(t){const r=_o(t);return(this.isNegative()||r.isNeg())&&Io("unbound-bitwise-result","xor"),Mo(_o(this).xor(r))}mask(t){return(this.isNegative()||t<0)&&Io("negative-width","mask"),Mo(_o(this).maskn(t))}shl(t){return(this.isNegative()||t<0)&&Io("negative-width","shl"),Mo(_o(this).shln(t))}shr(t){return(this.isNegative()||t<0)&&Io("negative-width","shr"),Mo(_o(this).shrn(t))}eq(t){return _o(this).eq(_o(t))}lt(t){return _o(this).lt(_o(t))}lte(t){return _o(this).lte(_o(t))}gt(t){return _o(this).gt(_o(t))}gte(t){return _o(this).gte(_o(t))}isNegative(){return this._hex[0]==="-"}isZero(){return _o(this).isZero()}toNumber(){try{return _o(this).toNumber()}catch{Io("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch{}return po.throwError("this platform does not support BigInt",Ks.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(arguments[0]===10?mo||(mo=!0,po.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):arguments[0]===16?po.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",Ks.errors.UNEXPECTED_ARGUMENT,{}):po.throwError("BigNumber.toString does not accept parameters",Ks.errors.UNEXPECTED_ARGUMENT,{})),_o(this).toString(10)}toHexString(){return this._hex}toJSON(t){return{type:"BigNumber",hex:this.toHexString()}}static from(t){if(t instanceof Ao)return t;if(typeof t=="string")return t.match(/^-?0x[0-9a-f]+$/i)?new Ao(yo,Eo(t)):t.match(/^-?[0-9]+$/)?new Ao(yo,Eo(new wo(t))):po.throwArgumentError("invalid BigNumber string","value",t);if(typeof t=="number")return t%1&&Io("underflow","BigNumber.from",t),(t>=bo||t<=-bo)&&Io("overflow","BigNumber.from",t),Ao.from(String(t));const r=t;if(typeof r=="bigint")return Ao.from(r.toString());if(Ys(r))return Ao.from(io(r));if(r)if(r.toHexString){const t=r.toHexString();if(typeof t=="string")return Ao.from(t)}else{let t=r._hex;if(t==null&&r.type==="BigNumber"&&(t=r.hex),typeof t=="string"&&(to(t)||t[0]==="-"&&to(t.substring(1))))return Ao.from(t)}return po.throwArgumentError("invalid BigNumber value","value",t)}static isBigNumber(t){return!!(t&&t._isBigNumber)}}function Eo(t){if(typeof t!="string")return Eo(t.toString(16));if(t[0]==="-")return t=t.substring(1),t[0]==="-"&&po.throwArgumentError("invalid hex","value",t),t=Eo(t),t==="0x00"?t:"-"+t;if(t.substring(0,2)!=="0x"&&(t="0x"+t),t==="0x")return"0x00";for(t.length%2&&(t="0x0"+t.substring(2));t.length>4&&t.substring(0,4)==="0x00";)t="0x"+t.substring(4);return t}function Mo(t){return Ao.from(Eo(t))}function _o(t){const r=Ao.from(t).toHexString();return r[0]==="-"?new wo("-"+r.substring(3),16):new wo(r.substring(2),16)}function Io(t,r,i){const n={fault:t,operation:r};return i!=null&&(n.value=i),po.throwError(t,Ks.errors.NUMERIC_FAULT,n)}function Oo(t){return new wo(t,36).toString(16)}const So=new Ks(vo),No={},Co=Ao.from(0),jo=Ao.from(-1);function xo(t,r,i,n){const e={fault:r,operation:i};return n!==void 0&&(e.value=n),So.throwError(t,Ks.errors.NUMERIC_FAULT,e)}let Po="0";for(;Po.length<256;)Po+=Po;function Ro(t){if(typeof t!="number")try{t=Ao.from(t).toNumber()}catch{}return typeof t=="number"&&t>=0&&t<=256&&!(t%1)?"1"+Po.substring(0,t):So.throwArgumentError("invalid decimal size","decimals",t)}function To(t,r){r==null&&(r=0);const i=Ro(r);t=Ao.from(t);const n=t.lt(Co);n&&(t=t.mul(jo));let e=t.mod(i).toString();for(;e.length<i.length-1;)e="0"+e;e=e.match(/^([0-9]*[1-9]|0)(0*)/)[1];const s=t.div(i).toString();return i.length===1?t=s:t=s+"."+e,n&&(t="-"+t),t}function Do(t,r){r==null&&(r=0);const i=Ro(r);(typeof t!="string"||!t.match(/^-?[0-9.]+$/))&&So.throwArgumentError("invalid decimal value","value",t);const n=t.substring(0,1)==="-";n&&(t=t.substring(1)),t==="."&&So.throwArgumentError("missing value","value",t);const e=t.split(".");e.length>2&&So.throwArgumentError("too many decimal points","value",t);let s=e[0],o=e[1];for(s||(s="0"),o||(o="0");o[o.length-1]==="0";)o=o.substring(0,o.length-1);for(o.length>i.length-1&&xo("fractional component exceeds decimals","underflow","parseFixed"),o===""&&(o="0");o.length<i.length-1;)o+="0";const a=Ao.from(s),h=Ao.from(o);let u=a.mul(i).add(h);return n&&(u=u.mul(jo)),u}class Uo{constructor(t,r,i,n){t!==No&&So.throwError("cannot use FixedFormat constructor; use FixedFormat.from",Ks.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.signed=r,this.width=i,this.decimals=n,this.name=(r?"":"u")+"fixed"+String(i)+"x"+String(n),this._multiplier=Ro(n),Object.freeze(this)}static from(t){if(t instanceof Uo)return t;typeof t=="number"&&(t=`fixed128x${t}`);let r=!0,i=128,n=18;if(typeof t=="string"){if(t!=="fixed")if(t==="ufixed")r=!1;else{const e=t.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);e||So.throwArgumentError("invalid fixed format","format",t),r=e[1]!=="u",i=parseInt(e[2]),n=parseInt(e[3])}}else if(t){const e=(r,i,n)=>t[r]==null?n:(typeof t[r]!==i&&So.throwArgumentError("invalid fixed format ("+r+" not "+i+")","format."+r,t[r]),t[r]);r=e("signed","boolean",r),i=e("width","number",i),n=e("decimals","number",n)}return i%8&&So.throwArgumentError("invalid fixed format width (not byte aligned)","format.width",i),n>80&&So.throwArgumentError("invalid fixed format (decimals too large)","format.decimals",n),new Uo(No,r,i,n)}}class Bo{constructor(t,r,i,n){t!==No&&So.throwError("cannot use FixedNumber constructor; use FixedNumber.from",Ks.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.format=n,this._hex=r,this._value=i,this._isFixedNumber=!0,Object.freeze(this)}_checkFormat(t){this.format.name!==t.format.name&&So.throwArgumentError("incompatible format; use fixedNumber.toFormat","other",t)}addUnsafe(t){this._checkFormat(t);const r=Do(this._value,this.format.decimals),i=Do(t._value,t.format.decimals);return Bo.fromValue(r.add(i),this.format.decimals,this.format)}subUnsafe(t){this._checkFormat(t);const r=Do(this._value,this.format.decimals),i=Do(t._value,t.format.decimals);return Bo.fromValue(r.sub(i),this.format.decimals,this.format)}mulUnsafe(t){this._checkFormat(t);const r=Do(this._value,this.format.decimals),i=Do(t._value,t.format.decimals);return Bo.fromValue(r.mul(i).div(this.format._multiplier),this.format.decimals,this.format)}divUnsafe(t){this._checkFormat(t);const r=Do(this._value,this.format.decimals),i=Do(t._value,t.format.decimals);return Bo.fromValue(r.mul(this.format._multiplier).div(i),this.format.decimals,this.format)}floor(){const t=this.toString().split(".");t.length===1&&t.push("0");let r=Bo.from(t[0],this.format);const i=!t[1].match(/^(0*)$/);return this.isNegative()&&i&&(r=r.subUnsafe(ko.toFormat(r.format))),r}ceiling(){const t=this.toString().split(".");t.length===1&&t.push("0");let r=Bo.from(t[0],this.format);const i=!t[1].match(/^(0*)$/);return!this.isNegative()&&i&&(r=r.addUnsafe(ko.toFormat(r.format))),r}round(t){t==null&&(t=0);const r=this.toString().split(".");if(r.length===1&&r.push("0"),(t<0||t>80||t%1)&&So.throwArgumentError("invalid decimal count","decimals",t),r[1].length<=t)return this;const i=Bo.from("1"+Po.substring(0,t),this.format),n=$o.toFormat(this.format);return this.mulUnsafe(i).addUnsafe(n).floor().divUnsafe(i)}isZero(){return this._value==="0.0"||this._value==="0"}isNegative(){return this._value[0]==="-"}toString(){return this._value}toHexString(t){if(t==null)return this._hex;t%8&&So.throwArgumentError("invalid byte width","width",t);const r=Ao.from(this._hex).fromTwos(this.format.width).toTwos(t).toHexString();return so(r,t/8)}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(t){return Bo.fromString(this._value,t)}static fromValue(t,r,i){return i==null&&r!=null&&!go(r)&&(i=r,r=null),r==null&&(r=0),i==null&&(i="fixed"),Bo.fromString(To(t,r),Uo.from(i))}static fromString(t,r){r==null&&(r="fixed");const i=Uo.from(r),n=Do(t,i.decimals);!i.signed&&n.lt(Co)&&xo("unsigned value cannot be negative","overflow","value",t);let e=null;i.signed?e=n.toTwos(i.width).toHexString():(e=n.toHexString(),e=so(e,i.width/8));const s=To(n,i.decimals);return new Bo(No,e,s,i)}static fromBytes(t,r){r==null&&(r="fixed");const i=Uo.from(r);if(Ws(t).length>i.width/8)throw new Error("overflow");let n=Ao.from(t);i.signed&&(n=n.fromTwos(i.width));const e=n.toTwos((i.signed?0:1)+i.width).toHexString(),s=To(n,i.decimals);return new Bo(No,e,s,i)}static from(t,r){if(typeof t=="string")return Bo.fromString(t,r);if(Ys(t))return Bo.fromBytes(t,r);try{return Bo.fromValue(t,0,r)}catch(t){if(t.code!==Ks.errors.INVALID_ARGUMENT)throw t}return So.throwArgumentError("invalid FixedNumber value","value",t)}static isFixedNumber(t){return!!(t&&t._isFixedNumber)}}const ko=Bo.from(1),$o=Bo.from("0.5"),Fo="strings/5.7.0",qo=new Ks(Fo);var Lo;(function(t){t.current="",t.NFC="NFC",t.NFD="NFD",t.NFKC="NFKC",t.NFKD="NFKD"})(Lo||(Lo={}));var Ko;(function(t){t.UNEXPECTED_CONTINUE="unexpected continuation byte",t.BAD_PREFIX="bad codepoint prefix",t.OVERRUN="string overrun",t.MISSING_CONTINUE="missing continuation byte",t.OUT_OF_RANGE="out of UTF-8 range",t.UTF16_SURROGATE="UTF-16 surrogate",t.OVERLONG="overlong representation"})(Ko||(Ko={}));function Ho(t,r,i,n,e){return qo.throwArgumentError(`invalid codepoint at offset ${r}; ${t}`,"bytes",i)}function Go(t,r,i,n,e){if(t===Ko.BAD_PREFIX||t===Ko.UNEXPECTED_CONTINUE){let t=0;for(let n=r+1;n<i.length&&i[n]>>6===2;n++)t++;return t}return t===Ko.OVERRUN?i.length-r-1:0}function Qo(t,r,i,n,e){return t===Ko.OVERLONG?(n.push(e),0):(n.push(65533),Go(t,r,i))}Object.freeze({error:Ho,ignore:Go,replace:Qo});function Vo(t,r=Lo.current){r!=Lo.current&&(qo.checkNormalize(),t=t.normalize(r));let i=[];for(let r=0;r<t.length;r++){const n=t.charCodeAt(r);if(n<128)i.push(n);else if(n<2048)i.push(n>>6|192),i.push(n&63|128);else if((n&64512)==55296){r++;const e=t.charCodeAt(r);if(r>=t.length||(e&64512)!==56320)throw new Error("invalid utf-8 string");const s=65536+((n&1023)<<10)+(e&1023);i.push(s>>18|240),i.push(s>>12&63|128),i.push(s>>6&63|128),i.push(s&63|128)}else i.push(n>>12|224),i.push(n>>6&63|128),i.push(n&63|128)}return Ws(i)}function zo(t){if(t.length%4!==0)throw new Error("bad data");let r=[];for(let i=0;i<t.length;i+=4)r.push(parseInt(t.substring(i,i+4),16));return r}function Jo(t,r){r||(r=function(t){return[parseInt(t,16)]});let i=0,n={};return t.split(",").forEach((t=>{let e=t.split(":");i+=parseInt(e[0],16),n[i]=r(e[1])})),n}function Yo(t){let r=0;return t.split(",").map((t=>{let i=t.split("-");i.length===1?i[1]="0":i[1]===""&&(i[1]="1");let n=r+parseInt(i[0],16);return r=parseInt(i[1],16),{l:n,h:r}}))}Yo("221,13-1b,5f-,40-10,51-f,11-3,3-3,2-2,2-4,8,2,15,2d,28-8,88,48,27-,3-5,11-20,27-,8,28,3-5,12,18,b-a,1c-4,6-16,2-d,2-2,2,1b-4,17-9,8f-,10,f,1f-2,1c-34,33-14e,4,36-,13-,6-2,1a-f,4,9-,3-,17,8,2-2,5-,2,8-,3-,4-8,2-3,3,6-,16-6,2-,7-3,3-,17,8,3,3,3-,2,6-3,3-,4-a,5,2-6,10-b,4,8,2,4,17,8,3,6-,b,4,4-,2-e,2-4,b-10,4,9-,3-,17,8,3-,5-,9-2,3-,4-7,3-3,3,4-3,c-10,3,7-2,4,5-2,3,2,3-2,3-2,4-2,9,4-3,6-2,4,5-8,2-e,d-d,4,9,4,18,b,6-3,8,4,5-6,3-8,3-3,b-11,3,9,4,18,b,6-3,8,4,5-6,3-6,2,3-3,b-11,3,9,4,18,11-3,7-,4,5-8,2-7,3-3,b-11,3,13-2,19,a,2-,8-2,2-3,7,2,9-11,4-b,3b-3,1e-24,3,2-,3,2-,2-5,5,8,4,2,2-,3,e,4-,6,2,7-,b-,3-21,49,23-5,1c-3,9,25,10-,2-2f,23,6,3,8-2,5-5,1b-45,27-9,2a-,2-3,5b-4,45-4,53-5,8,40,2,5-,8,2,5-,28,2,5-,20,2,5-,8,2,5-,8,8,18,20,2,5-,8,28,14-5,1d-22,56-b,277-8,1e-2,52-e,e,8-a,18-8,15-b,e,4,3-b,5e-2,b-15,10,b-5,59-7,2b-555,9d-3,5b-5,17-,7-,27-,7-,9,2,2,2,20-,36,10,f-,7,14-,4,a,54-3,2-6,6-5,9-,1c-10,13-1d,1c-14,3c-,10-6,32-b,240-30,28-18,c-14,a0,115-,3,66-,b-76,5,5-,1d,24,2,5-2,2,8-,35-2,19,f-10,1d-3,311-37f,1b,5a-b,d7-19,d-3,41,57-,68-4,29-3,5f,29-37,2e-2,25-c,2c-2,4e-3,30,78-3,64-,20,19b7-49,51a7-59,48e-2,38-738,2ba5-5b,222f-,3c-94,8-b,6-4,1b,6,2,3,3,6d-20,16e-f,41-,37-7,2e-2,11-f,5-b,18-,b,14,5-3,6,88-,2,bf-2,7-,7-,7-,4-2,8,8-9,8-2ff,20,5-b,1c-b4,27-,27-cbb1,f7-9,28-2,b5-221,56,48,3-,2-,3-,5,d,2,5,3,42,5-,9,8,1d,5,6,2-2,8,153-3,123-3,33-27fd,a6da-5128,21f-5df,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3,2-1d,61-ff7d"),"ad,34f,1806,180b,180c,180d,200b,200c,200d,2060,feff".split(",").map((t=>parseInt(t,16))),Jo("b5:3bc,c3:ff,7:73,2:253,5:254,3:256,1:257,5:259,1:25b,3:260,1:263,2:269,1:268,5:26f,1:272,2:275,7:280,3:283,5:288,3:28a,1:28b,5:292,3f:195,1:1bf,29:19e,125:3b9,8b:3b2,1:3b8,1:3c5,3:3c6,1:3c0,1a:3ba,1:3c1,1:3c3,2:3b8,1:3b5,1bc9:3b9,1c:1f76,1:1f77,f:1f7a,1:1f7b,d:1f78,1:1f79,1:1f7c,1:1f7d,107:63,5:25b,4:68,1:68,1:68,3:69,1:69,1:6c,3:6e,4:70,1:71,1:72,1:72,1:72,7:7a,2:3c9,2:7a,2:6b,1:e5,1:62,1:63,3:65,1:66,2:6d,b:3b3,1:3c0,6:64,1b574:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3"),Jo("179:1,2:1,2:1,5:1,2:1,a:4f,a:1,8:1,2:1,2:1,3:1,5:1,3:1,4:1,2:1,3:1,4:1,8:2,1:1,2:2,1:1,2:2,27:2,195:26,2:25,1:25,1:25,2:40,2:3f,1:3f,33:1,11:-6,1:-9,1ac7:-3a,6d:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,b:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,c:-8,2:-8,2:-8,2:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,49:-8,1:-8,1:-4a,1:-4a,d:-56,1:-56,1:-56,1:-56,d:-8,1:-8,f:-8,1:-8,3:-7"),Jo("df:00730073,51:00690307,19:02BC006E,a7:006A030C,18a:002003B9,16:03B903080301,20:03C503080301,1d7:05650582,190f:00680331,1:00740308,1:0077030A,1:0079030A,1:006102BE,b6:03C50313,2:03C503130300,2:03C503130301,2:03C503130342,2a:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,3:1F7003B9,1:03B103B9,1:03AC03B9,2:03B10342,1:03B1034203B9,5:03B103B9,6:1F7403B9,1:03B703B9,1:03AE03B9,2:03B70342,1:03B7034203B9,5:03B703B9,6:03B903080300,1:03B903080301,3:03B90342,1:03B903080342,b:03C503080300,1:03C503080301,1:03C10313,2:03C50342,1:03C503080342,b:1F7C03B9,1:03C903B9,1:03CE03B9,2:03C90342,1:03C9034203B9,5:03C903B9,ac:00720073,5b:00B00063,6:00B00066,d:006E006F,a:0073006D,1:00740065006C,1:0074006D,124f:006800700061,2:00610075,2:006F0076,b:00700061,1:006E0061,1:03BC0061,1:006D0061,1:006B0061,1:006B0062,1:006D0062,1:00670062,3:00700066,1:006E0066,1:03BC0066,4:0068007A,1:006B0068007A,1:006D0068007A,1:00670068007A,1:00740068007A,15:00700061,1:006B00700061,1:006D00700061,1:006700700061,8:00700076,1:006E0076,1:03BC0076,1:006D0076,1:006B0076,1:006D0076,1:00700077,1:006E0077,1:03BC0077,1:006D0077,1:006B0077,1:006D0077,1:006B03C9,1:006D03C9,2:00620071,3:00632215006B0067,1:0063006F002E,1:00640062,1:00670079,2:00680070,2:006B006B,1:006B006D,9:00700068,2:00700070006D,1:00700072,2:00730076,1:00770062,c723:00660066,1:00660069,1:0066006C,1:006600660069,1:00660066006C,1:00730074,1:00730074,d:05740576,1:05740565,1:0574056B,1:057E0576,1:0574056D",zo),Yo("80-20,2a0-,39c,32,f71,18e,7f2-f,19-7,30-4,7-5,f81-b,5,a800-20ff,4d1-1f,110,fa-6,d174-7,2e84-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,2,1f-5f,ff7f-20001");const Wo="hash/5.7.0";function Xo(t){t=atob(t);const r=[];for(let i=0;i<t.length;i++)r.push(t.charCodeAt(i));return Ws(r)}function Zo(t,r){r==null&&(r=1);const i=[],n=i.forEach,e=function(t,r){n.call(t,(function(t){r>0&&Array.isArray(t)?e(t,r-1):i.push(t)}))};return e(t,r),i}function ta(t){const r={};for(let i=0;i<t.length;i++){const n=t[i];r[n[0]]=n[1]}return r}function ra(t){let r=0;function i(){return t[r++]<<8|t[r++]}let n=i(),e=1,s=[0,1];for(let t=1;t<n;t++)s.push(e+=i());let o=i(),a=r;r+=o;let h=0,u=0;function f(){return h==0&&(u=u<<8|t[r++],h=8),u>>--h&1}const c=31,l=Math.pow(2,c),d=l>>>1,v=d>>1,w=l-1;let p=0;for(let t=0;t<c;t++)p=p<<1|f();let y=[],b=0,g=l;for(;;){let t=Math.floor(((p-b+1)*e-1)/g),r=0,i=n;for(;i-r>1;){let n=r+i>>>1;t<s[n]?i=n:r=n}if(r==0)break;y.push(r);let o=b+Math.floor(g*s[r]/e),a=b+Math.floor(g*s[r+1]/e)-1;for(;!((o^a)&d);)p=p<<1&w|f(),o=o<<1&w,a=a<<1&w|1;for(;o&~a&v;)p=p&d|p<<1&w>>>1|f(),o=o<<1^d,a=(a^d)<<1|d|1;b=o,g=1+a-o}let m=n-4;return y.map((r=>{switch(r-m){case 3:return m+65792+(t[a++]<<16|t[a++]<<8|t[a++]);case 2:return m+256+(t[a++]<<8|t[a++]);case 1:return m+t[a++];default:return r-1}}))}function ia(t){let r=0;return()=>t[r++]}function na(t){return ia(ra(t))}function ea(t){return t&1?~t>>1:t>>1}function sa(t,r){let i=Array(t);for(let n=0;n<t;n++)i[n]=1+r();return i}function oa(t,r){let i=Array(t);for(let n=0,e=-1;n<t;n++)i[n]=e+=1+r();return i}function aa(t,r){let i=Array(t);for(let n=0,e=0;n<t;n++)i[n]=e+=ea(r());return i}function ha(t,r){let i=oa(t(),t),n=t(),e=oa(n,t),s=sa(n,t);for(let t=0;t<n;t++)for(let r=0;r<s[t];r++)i.push(e[t]+r);return r?i.map((t=>r[t])):i}function ua(t){let r=[];for(;;){let i=t();if(i==0)break;r.push(la(i,t))}for(;;){let i=t()-1;if(i<0)break;r.push(da(i,t))}return ta(Zo(r))}function fa(t){let r=[];for(;;){let i=t();if(i==0)break;r.push(i)}return r}function ca(t,r,i){let n=Array(t).fill(void 0).map((()=>[]));for(let e=0;e<r;e++)aa(t,i).forEach(((t,r)=>n[r].push(t)));return n}function la(t,r){let i=1+r(),n=r(),e=fa(r),s=ca(e.length,1+t,r);return Zo(s.map(((t,r)=>{const s=t[0],o=t.slice(1);return Array(e[r]).fill(void 0).map(((t,r)=>{let e=r*n;return[s+r*i,o.map((t=>t+e))]}))})))}function da(t,r){let i=1+r();return ca(i,1+t,r).map((t=>[t[0],t.slice(1)]))}function va(t){let r=ha(t).sort(((t,r)=>t-r));return i();function i(){let n=[];for(;;){let e=ha(t,r);if(e.length==0)break;n.push({set:new Set(e),node:i()})}n.sort(((t,r)=>r.set.size-t.set.size));let e=t(),s=e%3;e=e/3|0;let o=!!(e&1);e>>=1;let a=e==1,h=e==2;return{branches:n,valid:s,fe0f:o,save:a,check:h}}}function wa(){return na(Xo("AEQF2AO2DEsA2wIrAGsBRABxAN8AZwCcAEwAqgA0AGwAUgByADcATAAVAFYAIQAyACEAKAAYAFgAGwAjABQAMAAmADIAFAAfABQAKwATACoADgAbAA8AHQAYABoAGQAxADgALAAoADwAEwA9ABMAGgARAA4ADwAWABMAFgAIAA8AHgQXBYMA5BHJAS8JtAYoAe4AExozi0UAH21tAaMnBT8CrnIyhrMDhRgDygIBUAEHcoFHUPe8AXBjAewCjgDQR8IICIcEcQLwATXCDgzvHwBmBoHNAqsBdBcUAykgDhAMShskMgo8AY8jqAQfAUAfHw8BDw87MioGlCIPBwZCa4ELatMAAMspJVgsDl8AIhckSg8XAHdvTwBcIQEiDT4OPhUqbyECAEoAS34Aej8Ybx83JgT/Xw8gHxZ/7w8RICxPHA9vBw+Pfw8PHwAPFv+fAsAvCc8vEr8ivwD/EQ8Bol8OEBa/A78hrwAPCU8vESNvvwWfHwNfAVoDHr+ZAAED34YaAdJPAK7PLwSEgDLHAGo1Pz8Pvx9fUwMrpb8O/58VTzAPIBoXIyQJNF8hpwIVAT8YGAUADDNBaX3RAMomJCg9EhUeA29MABsZBTMNJipjOhc19gcIDR8bBwQHEggCWi6DIgLuAQYA+BAFCha3A5XiAEsqM7UFFgFLhAMjFTMYE1Klnw74nRVBG/ASCm0BYRN/BrsU3VoWy+S0vV8LQx+vN8gF2AC2AK5EAWwApgYDKmAAroQ0NDQ0AT+OCg7wAAIHRAbpNgVcBV0APTA5BfbPFgMLzcYL/QqqA82eBALKCjQCjqYCht0/k2+OAsXQAoP3ASTKDgDw6ACKAUYCMpIKJpRaAE4A5womABzZvs0REEKiACIQAd5QdAECAj4Ywg/wGqY2AVgAYADYvAoCGAEubA0gvAY2ALAAbpbvqpyEAGAEpgQAJgAG7gAgAEACmghUFwCqAMpAINQIwC4DthRAAPcycKgApoIdABwBfCisABoATwBqASIAvhnSBP8aH/ECeAKXAq40NjgDBTwFYQU6AXs3oABgAD4XNgmcCY1eCl5tIFZeUqGgyoNHABgAEQAaABNwWQAmABMATPMa3T34ADldyprmM1M2XociUQgLzvwAXT3xABgAEQAaABNwIGFAnADD8AAgAD4BBJWzaCcIAIEBFMAWwKoAAdq9BWAF5wLQpALEtQAKUSGkahR4GnJM+gsAwCgeFAiUAECQ0BQuL8AAIAAAADKeIheclvFqQAAETr4iAMxIARMgAMIoHhQIAn0E0pDQFC4HhznoAAAAIAI2C0/4lvFqQAAETgBJJwYCAy4ABgYAFAA8MBKYEH4eRhTkAjYeFcgACAYAeABsOqyQ5gRwDayqugEgaIIAtgoACgDmEABmBAWGme5OBJJA2m4cDeoAmITWAXwrMgOgAGwBCh6CBXYF1Tzg1wKAAFdiuABRAFwAXQBsAG8AdgBrAHYAbwCEAHEwfxQBVE5TEQADVFhTBwBDANILAqcCzgLTApQCrQL6vAAMAL8APLhNBKkE6glGKTAU4Dr4N2EYEwBCkABKk8rHAbYBmwIoAiU4Ajf/Aq4CowCAANIChzgaNBsCsTgeODcFXrgClQKdAqQBiQGYAqsCsjTsNHsfNPA0ixsAWTWiOAMFPDQSNCk2BDZHNow2TTZUNhk28Jk9VzI3QkEoAoICoQKwAqcAQAAxBV4FXbS9BW47YkIXP1ciUqs05DS/FwABUwJW11e6nHuYZmSh/RAYA8oMKvZ8KASoUAJYWAJ6ILAsAZSoqjpgA0ocBIhmDgDWAAawRDQoAAcuAj5iAHABZiR2AIgiHgCaAU68ACxuHAG0ygM8MiZIAlgBdF4GagJqAPZOHAMuBgoATkYAsABiAHgAMLoGDPj0HpKEBAAOJgAuALggTAHWAeAMEDbd20Uege0ADwAWADkAQgA9OHd+2MUQZBBhBgNNDkxxPxUQArEPqwvqERoM1irQ090ANK4H8ANYB/ADWANYB/AH8ANYB/ADWANYA1gDWBwP8B/YxRBkD00EcgWTBZAE2wiIJk4RhgctCNdUEnQjHEwDSgEBIypJITuYMxAlR0wRTQgIATZHbKx9PQNMMbBU+pCnA9AyVDlxBgMedhKlAC8PeCE1uk6DekxxpQpQT7NX9wBFBgASqwAS5gBJDSgAUCwGPQBI4zTYABNGAE2bAE3KAExdGABKaAbgAFBXAFCOAFBJABI2SWdObALDOq0//QomCZhvwHdTBkIQHCemEPgMNAG2ATwN7kvZBPIGPATKH34ZGg/OlZ0Ipi3eDO4m5C6igFsj9iqEBe5L9TzeC05RaQ9aC2YJ5DpkgU8DIgEOIowK3g06CG4Q9ArKbA3mEUYHOgPWSZsApgcCCxIdNhW2JhFirQsKOXgG/Br3C5AmsBMqev0F1BoiBk4BKhsAANAu6IWxWjJcHU9gBgQLJiPIFKlQIQ0mQLh4SRocBxYlqgKSQ3FKiFE3HpQh9zw+DWcuFFF9B/Y8BhlQC4I8n0asRQ8R0z6OPUkiSkwtBDaALDAnjAnQD4YMunxzAVoJIgmyDHITMhEYN8YIOgcaLpclJxYIIkaWYJsE+KAD9BPSAwwFQAlCBxQDthwuEy8VKgUOgSXYAvQ21i60ApBWgQEYBcwPJh/gEFFH4Q7qCJwCZgOEJewALhUiABginAhEZABgj9lTBi7MCMhqbSN1A2gU6GIRdAeSDlgHqBw0FcAc4nDJXgyGCSiksAlcAXYJmgFgBOQICjVcjKEgQmdUi1kYnCBiQUBd/QIyDGYVoES+h3kCjA9sEhwBNgF0BzoNAgJ4Ee4RbBCWCOyGBTW2M/k6JgRQIYQgEgooA1BszwsoJvoM+WoBpBJjAw00PnfvZ6xgtyUX/gcaMsZBYSHyC5NPzgydGsIYQ1QvGeUHwAP0GvQn60FYBgADpAQUOk4z7wS+C2oIjAlAAEoOpBgH2BhrCnKM0QEyjAG4mgNYkoQCcJAGOAcMAGgMiAV65gAeAqgIpAAGANADWAA6Aq4HngAaAIZCAT4DKDABIuYCkAOUCDLMAZYwAfQqBBzEDBYA+DhuSwLDsgKAa2ajBd5ZAo8CSjYBTiYEBk9IUgOwcuIA3ABMBhTgSAEWrEvMG+REAeBwLADIAPwABjYHBkIBzgH0bgC4AWALMgmjtLYBTuoqAIQAFmwB2AKKAN4ANgCA8gFUAE4FWvoF1AJQSgESMhksWGIBvAMgATQBDgB6BsyOpsoIIARuB9QCEBwV4gLvLwe2AgMi4BPOQsYCvd9WADIXUu5eZwqoCqdeaAC0YTQHMnM9UQAPH6k+yAdy/BZIiQImSwBQ5gBQQzSaNTFWSTYBpwGqKQK38AFtqwBI/wK37gK3rQK3sAK6280C0gK33AK3zxAAUEIAUD9SklKDArekArw5AEQAzAHCO147WTteO1k7XjtZO147WTteO1kDmChYI03AVU0oJqkKbV9GYewMpw3VRMk6ShPcYFJgMxPJLbgUwhXPJVcZPhq9JwYl5VUKDwUt1GYxCC00dhe9AEApaYNCY4ceMQpMHOhTklT5LRwAskujM7ANrRsWREEFSHXuYisWDwojAmSCAmJDXE6wXDchAqH4AmiZAmYKAp+FOBwMAmY8AmYnBG8EgAN/FAN+kzkHOXgYOYM6JCQCbB4CMjc4CwJtyAJtr/CLADRoRiwBaADfAOIASwYHmQyOAP8MwwAOtgJ3MAJ2o0ACeUxEAni7Hl3cRa9G9AJ8QAJ6yQJ9CgJ88UgBSH5kJQAsFklZSlwWGErNAtECAtDNSygDiFADh+dExpEzAvKiXQQDA69Lz0wuJgTQTU1NsAKLQAKK2cIcCB5EaAa4Ao44Ao5dQZiCAo7aAo5deVG1UzYLUtVUhgKT/AKTDQDqAB1VH1WwVdEHLBwplocy4nhnRTw6ApegAu+zWCKpAFomApaQApZ9nQCqWa1aCoJOADwClrYClk9cRVzSApnMApllXMtdCBoCnJw5wzqeApwXAp+cAp65iwAeEDIrEAKd8gKekwC2PmE1YfACntQCoG8BqgKeoCACnk+mY8lkKCYsAiewAiZ/AqD8AqBN2AKmMAKlzwKoAAB+AqfzaH1osgAESmodatICrOQCrK8CrWgCrQMCVx4CVd0CseLYAx9PbJgCsr4OArLpGGzhbWRtSWADJc4Ctl08QG6RAylGArhfArlIFgK5K3hwN3DiAr0aAy2zAzISAr6JcgMDM3ICvhtzI3NQAsPMAsMFc4N0TDZGdOEDPKgDPJsDPcACxX0CxkgCxhGKAshqUgLIRQLJUALJLwJkngLd03h6YniveSZL0QMYpGcDAmH1GfSVJXsMXpNevBICz2wCz20wTFTT9BSgAMeuAs90ASrrA04TfkwGAtwoAtuLAtJQA1JdA1NgAQIDVY2AikABzBfuYUZ2AILPg44C2sgC2d+EEYRKpz0DhqYAMANkD4ZyWvoAVgLfZgLeuXR4AuIw7RUB8zEoAfScAfLTiALr9ALpcXoAAur6AurlAPpIAboC7ooC652Wq5cEAu5AA4XhmHpw4XGiAvMEAGoDjheZlAL3FAORbwOSiAL3mQL52gL4Z5odmqy8OJsfA52EAv77ARwAOp8dn7QDBY4DpmsDptoA0sYDBmuhiaIGCgMMSgFgASACtgNGAJwEgLpoBgC8BGzAEowcggCEDC6kdjoAJAM0C5IKRoABZCgiAIzw3AYBLACkfng9ogigkgNmWAN6AEQCvrkEVqTGAwCsBRbAA+4iQkMCHR072jI2PTbUNsk2RjY5NvA23TZKNiU3EDcZN5I+RTxDRTBCJkK5VBYKFhZfwQCWygU3AJBRHpu+OytgNxa61A40GMsYjsn7BVwFXQVcBV0FaAVdBVwFXQVcBV0FXAVdBVwFXUsaCNyKAK4AAQUHBwKU7oICoW1e7jAEzgPxA+YDwgCkBFDAwADABKzAAOxFLhitA1UFTDeyPkM+bj51QkRCuwTQWWQ8X+0AWBYzsACNA8xwzAGm7EZ/QisoCTAbLDs6fnLfb8H2GccsbgFw13M1HAVkBW/Jxsm9CNRO8E8FDD0FBQw9FkcClOYCoMFegpDfADgcMiA2AJQACB8AsigKAIzIEAJKeBIApY5yPZQIAKQiHb4fvj5BKSRPQrZCOz0oXyxgOywfKAnGbgMClQaCAkILXgdeCD9IIGUgQj5fPoY+dT52Ao5CM0dAX9BTVG9SDzFwWTQAbxBzJF/lOEIQQglCCkKJIAls5AcClQICoKPMODEFxhi6KSAbiyfIRrMjtCgdWCAkPlFBIitCsEJRzAbMAV/OEyQzDg0OAQQEJ36i328/Mk9AybDJsQlq3tDRApUKAkFzXf1d/j9uALYP6hCoFgCTGD8kPsFKQiobrm0+zj0KSD8kPnVCRBwMDyJRTHFgMTJa5rwXQiQ2YfI/JD7BMEJEHGINTw4TOFlIRzwJO0icMQpyPyQ+wzJCRBv6DVgnKB01NgUKj2bwYzMqCoBkznBgEF+zYDIocwRIX+NgHj4HICNfh2C4CwdwFWpTG/lgUhYGAwRfv2Ts8mAaXzVgml/XYIJfuWC4HI1gUF9pYJZgMR6ilQHMAOwLAlDRefC0in4AXAEJA6PjCwc0IamOANMMCAECRQDFNRTZBgd+CwQlRA+r6+gLBDEFBnwUBXgKATIArwAGRAAHA3cDdAN2A3kDdwN9A3oDdQN7A30DfAN4A3oDfQAYEAAlAtYASwMAUAFsAHcKAHcAmgB3AHUAdQB2AHVu8UgAygDAAHcAdQB1AHYAdQALCgB3AAsAmgB3AAsCOwB3AAtu8UgAygDAAHgKAJoAdwB3AHUAdQB2AHUAeAB1AHUAdgB1bvFIAMoAwAALCgCaAHcACwB3AAsCOwB3AAtu8UgAygDAAH4ACwGgALcBpwC6AahdAu0COwLtbvFIAMoAwAALCgCaAu0ACwLtAAsCOwLtAAtu8UgAygDAA24ACwNvAAu0VsQAAzsAABCkjUIpAAsAUIusOggWcgMeBxVsGwL67U/2HlzmWOEeOgALASvuAAseAfpKUpnpGgYJDCIZM6YyARUE9ThqAD5iXQgnAJYJPnOzw0ZAEZxEKsIAkA4DhAHnTAIDxxUDK0lxCQlPYgIvIQVYJQBVqE1GakUAKGYiDToSBA1EtAYAXQJYAIF8GgMHRyAAIAjOe9YncekRAA0KACUrjwE7Ayc6AAYWAqaiKG4McEcqANoN3+Mg9TwCBhIkuCny+JwUQ29L008JluRxu3K+oAdqiHOqFH0AG5SUIfUJ5SxCGfxdipRzqTmT4V5Zb+r1Uo4Vm+NqSSEl2mNvR2JhIa8SpYO6ntdwFXHCWTCK8f2+Hxo7uiG3drDycAuKIMP5bhi06ACnqArH1rz4Rqg//lm6SgJGEVbF9xJHISaR6HxqxSnkw6shDnelHKNEfGUXSJRJ1GcsmtJw25xrZMDK9gXSm1/YMkdX4/6NKYOdtk/NQ3/NnDASjTc3fPjIjW/5sVfVObX2oTDWkr1dF9f3kxBsD3/3aQO8hPfRz+e0uEiJqt1161griu7gz8hDDwtpy+F+BWtefnKHZPAxcZoWbnznhJpy0e842j36bcNzGnIEusgGX0a8ZxsnjcSsPDZ09yZ36fCQbriHeQ72JRMILNl6ePPf2HWoVwgWAm1fb3V2sAY0+B6rAXqSwPBgseVmoqsBTSrm91+XasMYYySI8eeRxH3ZvHkMz3BQ5aJ3iUVbYPNM3/7emRtjlsMgv/9VyTsyt/mK+8fgWeT6SoFaclXqn42dAIsvAarF5vNNWHzKSkKQ/8Hfk5ZWK7r9yliOsooyBjRhfkHP4Q2DkWXQi6FG/9r/IwbmkV5T7JSopHKn1pJwm9tb5Ot0oyN1Z2mPpKXHTxx2nlK08fKk1hEYA8WgVVWL5lgx0iTv+KdojJeU23ZDjmiubXOxVXJKKi2Wjuh2HLZOFLiSC7Tls5SMh4f+Pj6xUSrNjFqLGehRNB8lC0QSLNmkJJx/wSG3MnjE9T1CkPwJI0wH2lfzwETIiVqUxg0dfu5q39Gt+hwdcxkhhNvQ4TyrBceof3Mhs/IxFci1HmHr4FMZgXEEczPiGCx0HRwzAqDq2j9AVm1kwN0mRVLWLylgtoPNapF5cY4Y1wJh/e0BBwZj44YgZrDNqvD/9Hv7GFYdUQeDJuQ3EWI4HaKqavU1XjC/n41kT4L79kqGq0kLhdTZvgP3TA3fS0ozVz+5piZsoOtIvBUFoMKbNcmBL6YxxaUAusHB38XrS8dQMnQwJfUUkpRoGr5AUeWicvBTzyK9g77+yCkf5PAysL7r/JjcZgrbvRpMW9iyaxZvKO6ceZN2EwIxKwVFPuvFuiEPGCoagbMo+SpydLrXqBzNCDGFCrO/rkcwa2xhokQZ5CdZ0AsU3JfSqJ6n5I14YA+P/uAgfhPU84Tlw7cEFfp7AEE8ey4sP12PTt4Cods1GRgDOB5xvyiR5m+Bx8O5nBCNctU8BevfV5A08x6RHd5jcwPTMDSZJOedIZ1cGQ704lxbAzqZOP05ZxaOghzSdvFBHYqomATARyAADK4elP8Ly3IrUZKfWh23Xy20uBUmLS4Pfagu9+oyVa2iPgqRP3F2CTUsvJ7+RYnN8fFZbU/HVvxvcFFDKkiTqV5UBZ3Gz54JAKByi9hkKMZJvuGgcSYXFmw08UyoQyVdfTD1/dMkCHXcTGAKeROgArsvmRrQTLUOXioOHGK2QkjHuoYFgXciZoTJd6Fs5q1QX1G+p/e26hYsEf7QZD1nnIyl/SFkNtYYmmBhpBrxl9WbY0YpHWRuw2Ll/tj9mD8P4snVzJl4F9J+1arVeTb9E5r2ILH04qStjxQNwn3m4YNqxmaNbLAqW2TN6LidwuJRqS+NXbtqxoeDXpxeGWmxzSkWxjkyCkX4NQRme6q5SAcC+M7+9ETfA/EwrzQajKakCwYyeunP6ZFlxU2oMEn1Pz31zeStW74G406ZJFCl1wAXIoUKkWotYEpOuXB1uVNxJ63dpJEqfxBeptwIHNrPz8BllZoIcBoXwgfJ+8VAUnVPvRvexnw0Ma/WiGYuJO5y8QTvEYBigFmhUxY5RqzE8OcywN/8m4UYrlaniJO75XQ6KSo9+tWHlu+hMi0UVdiKQp7NelnoZUzNaIyBPVeOwK6GNp+FfHuPOoyhaWuNvTYFkvxscMQWDh+zeFCFkgwbXftiV23ywJ4+uwRqmg9k3KzwIQpzppt8DBBOMbrqwQM5Gb05sEwdKzMiAqOloaA/lr0KA+1pr0/+HiWoiIjHA/wir2nIuS3PeU/ji3O6ZwoxcR1SZ9FhtLC5S0FIzFhbBWcGVP/KpxOPSiUoAdWUpqKH++6Scz507iCcxYI6rdMBICPJZea7OcmeFw5mObJSiqpjg2UoWNIs+cFhyDSt6geV5qgi3FunmwwDoGSMgerFOZGX1m0dMCYo5XOruxO063dwENK9DbnVM9wYFREzh4vyU1WYYJ/LRRp6oxgjqP/X5a8/4Af6p6NWkQferzBmXme0zY/4nwMJm/wd1tIqSwGz+E3xPEAOoZlJit3XddD7/BT1pllzOx+8bmQtANQ/S6fZexc6qi3W+Q2xcmXTUhuS5mpHQRvcxZUN0S5+PL9lXWUAaRZhEH8hTdAcuNMMCuVNKTEGtSUKNi3O6KhSaTzck8csZ2vWRZ+d7mW8c4IKwXIYd25S/zIftPkwPzufjEvOHWVD1m+FjpDVUTV0DGDuHj6QnaEwLu/dEgdLQOg9E1Sro9XHJ8ykLAwtPu+pxqKDuFexqON1sKQm7rwbE1E68UCfA/erovrTCG+DBSNg0l4goDQvZN6uNlbyLpcZAwj2UclycvLpIZMgv4yRlpb3YuMftozorbcGVHt/VeDV3+Fdf1TP0iuaCsPi2G4XeGhsyF1ubVDxkoJhmniQ0/jSg/eYML9KLfnCFgISWkp91eauR3IQvED0nAPXK+6hPCYs+n3+hCZbiskmVMG2da+0EsZPonUeIY8EbfusQXjsK/eFDaosbPjEfQS0RKG7yj5GG69M7MeO1HmiUYocgygJHL6M1qzUDDwUSmr99V7Sdr2F3JjQAJY+F0yH33Iv3+C9M38eML7gTgmNu/r2bUMiPvpYbZ6v1/IaESirBHNa7mPKn4dEmYg7v/+HQgPN1G79jBQ1+soydfDC2r+h2Bl/KIc5KjMK7OH6nb1jLsNf0EHVe2KBiE51ox636uyG6Lho0t3J34L5QY/ilE3mikaF4HKXG1mG1rCevT1Vv6GavltxoQe/bMrpZvRggnBxSEPEeEzkEdOxTnPXHVjUYdw8JYvjB/o7Eegc3Ma+NUxLLnsK0kJlinPmUHzHGtrk5+CAbVzFOBqpyy3QVUnzTDfC/0XD94/okH+OB+i7g9lolhWIjSnfIb+Eq43ZXOWmwvjyV/qqD+t0e+7mTEM74qP/Ozt8nmC7mRpyu63OB4KnUzFc074SqoyPUAgM+/TJGFo6T44EHnQU4X4z6qannVqgw/U7zCpwcmXV1AubIrvOmkKHazJAR55ePjp5tLBsN8vAqs3NAHdcEHOR2xQ0lsNAFzSUuxFQCFYvXLZJdOj9p4fNq6p0HBGUik2YzaI4xySy91KzhQ0+q1hjxvImRwPRf76tChlRkhRCi74NXZ9qUNeIwP+s5p+3m5nwPdNOHgSLD79n7O9m1n1uDHiMntq4nkYwV5OZ1ENbXxFd4PgrlvavZsyUO4MqYlqqn1O8W/I1dEZq5dXhrbETLaZIbC2Kj/Aa/QM+fqUOHdf0tXAQ1huZ3cmWECWSXy/43j35+Mvq9xws7JKseriZ1pEWKc8qlzNrGPUGcVgOa9cPJYIJsGnJTAUsEcDOEVULO5x0rXBijc1lgXEzQQKhROf8zIV82w8eswc78YX11KYLWQRcgHNJElBxfXr72lS2RBSl07qTKorO2uUDZr3sFhYsvnhLZn0A94KRzJ/7DEGIAhW5ZWFpL8gEwu1aLA9MuWZzNwl8Oze9Y+bX+v9gywRVnoB5I/8kXTXU3141yRLYrIOOz6SOnyHNy4SieqzkBXharjfjqq1q6tklaEbA8Qfm2DaIPs7OTq/nvJBjKfO2H9bH2cCMh1+5gspfycu8f/cuuRmtDjyqZ7uCIMyjdV3a+p3fqmXsRx4C8lujezIFHnQiVTXLXuI1XrwN3+siYYj2HHTvESUx8DlOTXpak9qFRK+L3mgJ1WsD7F4cu1aJoFoYQnu+wGDMOjJM3kiBQWHCcvhJ/HRdxodOQp45YZaOTA22Nb4XKCVxqkbwMYFhzYQYIAnCW8FW14uf98jhUG2zrKhQQ0q0CEq0t5nXyvUyvR8DvD69LU+g3i+HFWQMQ8PqZuHD+sNKAV0+M6EJC0szq7rEr7B5bQ8BcNHzvDMc9eqB5ZCQdTf80Obn4uzjwpYU7SISdtV0QGa9D3Wrh2BDQtpBKxaNFV+/Cy2P/Sv+8s7Ud0Fd74X4+o/TNztWgETUapy+majNQ68Lq3ee0ZO48VEbTZYiH1Co4OlfWef82RWeyUXo7woM03PyapGfikTnQinoNq5z5veLpeMV3HCAMTaZmA1oGLAn7XS3XYsz+XK7VMQsc4XKrmDXOLU/pSXVNUq8dIqTba///3x6LiLS6xs1xuCAYSfcQ3+rQgmu7uvf3THKt5Ooo97TqcbRqxx7EASizaQCBQllG/rYxVapMLgtLbZS64w1MDBMXX+PQpBKNwqUKOf2DDRDUXQf9EhOS0Qj4nTmlA8dzSLz/G1d+Ud8MTy/6ghhdiLpeerGY/UlDOfiuqFsMUU5/UYlP+BAmgRLuNpvrUaLlVkrqDievNVEAwF+4CoM1MZTmjxjJMsKJq+u8Zd7tNCUFy6LiyYXRJQ4VyvEQFFaCGKsxIwQkk7EzZ6LTJq2hUuPhvAW+gQnSG6J+MszC+7QCRHcnqDdyNRJ6T9xyS87A6MDutbzKGvGktpbXqtzWtXb9HsfK2cBMomjN9a4y+TaJLnXxAeX/HWzmf4cR4vALt/P4w4qgKY04ml4ZdLOinFYS6cup3G/1ie4+t1eOnpBNlqGqs75ilzkT4+DsZQxNvaSKJ//6zIbbk/M7LOhFmRc/1R+kBtz7JFGdZm/COotIdvQoXpTqP/1uqEUmCb/QWoGLMwO5ANcHzxdY48IGP5+J+zKOTBFZ4Pid+GTM+Wq12MV/H86xEJptBa6T+p3kgpwLedManBHC2GgNrFpoN2xnrMz9WFWX/8/ygSBkavq2Uv7FdCsLEYLu9LLIvAU0bNRDtzYl+/vXmjpIvuJFYjmI0im6QEYqnIeMsNjXG4vIutIGHijeAG/9EDBozKV5cldkHbLxHh25vT+ZEzbhXlqvpzKJwcEgfNwLAKFeo0/pvEE10XDB+EXRTXtSzJozQKFFAJhMxYkVaCW+E9AL7tMeU8acxidHqzb6lX4691UsDpy/LLRmT+epgW56+5Cw8tB4kMUv6s9lh3eRKbyGs+H/4mQMaYzPTf2OOdokEn+zzgvoD3FqNKk8QqGAXVsqcGdXrT62fSPkR2vROFi68A6se86UxRUk4cajfPyCC4G5wDhD+zNq4jodQ4u4n/m37Lr36n4LIAAsVr02dFi9AiwA81MYs2rm4eDlDNmdMRvEKRHfBwW5DdMNp0jPFZMeARqF/wL4XBfd+EMLBfMzpH5GH6NaW+1vrvMdg+VxDzatk3MXgO3ro3P/DpcC6+Mo4MySJhKJhSR01SGGGp5hPWmrrUgrv3lDnP+HhcI3nt3YqBoVAVTBAQT5iuhTg8nvPtd8ZeYj6w1x6RqGUBrSku7+N1+BaasZvjTk64RoIDlL8brpEcJx3OmY7jLoZsswdtmhfC/G21llXhITOwmvRDDeTTPbyASOa16cF5/A1fZAidJpqju3wYAy9avPR1ya6eNp9K8XYrrtuxlqi+bDKwlfrYdR0RRiKRVTLOH85+ZY7XSmzRpfZBJjaTa81VDcJHpZnZnSQLASGYW9l51ZV/h7eVzTi3Hv6hUsgc/51AqJRTkpbFVLXXszoBL8nBX0u/0jBLT8nH+fJePbrwURT58OY+UieRjd1vs04w0VG5VN2U6MoGZkQzKN/ptz0Q366dxoTGmj7i1NQGHi9GgnquXFYdrCfZBmeb7s0T6yrdlZH5cZuwHFyIJ/kAtGsTg0xH5taAAq44BAk1CPk9KVVbqQzrCUiFdF/6gtlPQ8bHHc1G1W92MXGZ5HEHftyLYs8mbD/9xYRUWkHmlM0zC2ilJlnNgV4bfALpQghxOUoZL7VTqtCHIaQSXm+YUMnpkXybnV+A6xlm2CVy8fn0Xlm2XRa0+zzOa21JWWmixfiPMSCZ7qA4rS93VN3pkpF1s5TonQjisHf7iU9ZGvUPOAKZcR1pbeVf/Ul7OhepGCaId9wOtqo7pJ7yLcBZ0pFkOF28y4zEI/kcUNmutBHaQpBdNM8vjCS6HZRokkeo88TBAjGyG7SR+6vUgTcyK9Imalj0kuxz0wmK+byQU11AiJFk/ya5dNduRClcnU64yGu/ieWSeOos1t3ep+RPIWQ2pyTYVbZltTbsb7NiwSi3AV+8KLWk7LxCnfZUetEM8ThnsSoGH38/nyAwFguJp8FjvlHtcWZuU4hPva0rHfr0UhOOJ/F6vS62FW7KzkmRll2HEc7oUq4fyi5T70Vl7YVIfsPHUCdHesf9Lk7WNVWO75JDkYbMI8TOW8JKVtLY9d6UJRITO8oKo0xS+o99Yy04iniGHAaGj88kEWgwv0OrHdY/nr76DOGNS59hXCGXzTKUvDl9iKpLSWYN1lxIeyywdNpTkhay74w2jFT6NS8qkjo5CxA1yfSYwp6AJIZNKIeEK5PJAW7ORgWgwp0VgzYpqovMrWxbu+DGZ6Lhie1RAqpzm8VUzKJOH3mCzWuTOLsN3VT/dv2eeYe9UjbR8YTBsLz7q60VN1sU51k+um1f8JxD5pPhbhSC8rRaB454tmh6YUWrJI3+GWY0qeWioj/tbkYITOkJaeuGt4JrJvHA+l0Gu7kY7XOaa05alMnRWVCXqFgLIwSY4uF59Ue5SU4QKuc/HamDxbr0x6csCetXGoP7Qn1Bk/J9DsynO/UD6iZ1Hyrz+jit0hDCwi/E9OjgKTbB3ZQKQ/0ZOvevfNHG0NK4Aj3Cp7NpRk07RT1i/S0EL93Ag8GRgKI9CfpajKyK6+Jj/PI1KO5/85VAwz2AwzP8FTBb075IxCXv6T9RVvWT2tUaqxDS92zrGUbWzUYk9mSs82pECH+fkqsDt93VW++4YsR/dHCYcQSYTO/KaBMDj9LSD/J/+z20Kq8XvZUAIHtm9hRPP3ItbuAu2Hm5lkPs92pd7kCxgRs0xOVBnZ13ccdA0aunrwv9SdqElJRC3g+oCu+nXyCgmXUs9yMjTMAIHfxZV+aPKcZeUBWt057Xo85Ks1Ir5gzEHCWqZEhrLZMuF11ziGtFQUds/EESajhagzcKsxamcSZxGth4UII+adPhQkUnx2WyN+4YWR+r3f8MnkyGFuR4zjzxJS8WsQYR5PTyRaD9ixa6Mh741nBHbzfjXHskGDq179xaRNrCIB1z1xRfWfjqw2pHc1zk9xlPpL8sQWAIuETZZhbnmL54rceXVNRvUiKrrqIkeogsl0XXb17ylNb0f4GA9Wd44vffEG8FSZGHEL2fbaTGRcSiCeA8PmA/f6Hz8HCS76fXUHwgwkzSwlI71ekZ7Fapmlk/KC+Hs8hUcw3N2LN5LhkVYyizYFl/uPeVP5lsoJHhhfWvvSWruCUW1ZcJOeuTbrDgywJ/qG07gZJplnTvLcYdNaH0KMYOYMGX+rB4NGPFmQsNaIwlWrfCezxre8zXBrsMT+edVLbLqN1BqB76JH4BvZTqUIMfGwPGEn+EnmTV86fPBaYbFL3DFEhjB45CewkXEAtJxk4/Ms2pPXnaRqdky0HOYdcUcE2zcXq4vaIvW2/v0nHFJH2XXe22ueDmq/18XGtELSq85j9X8q0tcNSSKJIX8FTuJF/Pf8j5PhqG2u+osvsLxYrvvfeVJL+4tkcXcr9JV7v0ERmj/X6fM3NC4j6dS1+9Umr2oPavqiAydTZPLMNRGY23LO9zAVDly7jD+70G5TPPLdhRIl4WxcYjLnM+SNcJ26FOrkrISUtPObIz5Zb3AG612krnpy15RMW+1cQjlnWFI6538qky9axd2oJmHIHP08KyP0ubGO+TQNOYuv2uh17yCIvR8VcStw7o1g0NM60sk+8Tq7YfIBJrtp53GkvzXH7OA0p8/n/u1satf/VJhtR1l8Wa6Gmaug7haSpaCaYQax6ta0mkutlb+eAOSG1aobM81D9A4iS1RRlzBBoVX6tU1S6WE2N9ORY6DfeLRC4l9Rvr5h95XDWB2mR1d4WFudpsgVYwiTwT31ljskD8ZyDOlm5DkGh9N/UB/0AI5Xvb8ZBmai2hQ4BWMqFwYnzxwB26YHSOv9WgY3JXnvoN+2R4rqGVh/LLDMtpFP+SpMGJNWvbIl5SOodbCczW2RKleksPoUeGEzrjtKHVdtZA+kfqO+rVx/iclCqwoopepvJpSTDjT+b9GWylGRF8EDbGlw6eUzmJM95Ovoz+kwLX3c2fTjFeYEsE7vUZm3mqdGJuKh2w9/QGSaqRHs99aScGOdDqkFcACoqdbBoQqqjamhH6Q9ng39JCg3lrGJwd50Qk9ovnqBTr8MME7Ps2wiVfygUmPoUBJJfJWX5Nda0nuncbFkA=="))}const pa=wa();new Set(ha(pa)),new Set(ha(pa)),ua(pa),va(pa),new Ks(Wo);const ya=new Uint8Array(32);ya.fill(0);const ba=`Ethereum Signed Message:\n`;function ga(t){return typeof t=="string"&&(t=Vo(t)),ao(Xs([Vo(ba),Vo(String(t.length)),t]))}const ma="rlp/5.7.0";new Ks(ma);const Aa="address/5.7.0",Ea=new Ks(Aa);function Ma(t){to(t,20)||Ea.throwArgumentError("invalid address","address",t),t=t.toLowerCase();const r=t.substring(2).split(""),i=new Uint8Array(40);for(let t=0;t<40;t++)i[t]=r[t].charCodeAt(0);const n=Ws(ao(i));for(let t=0;t<40;t+=2)n[t>>1]>>4>=8&&(r[t]=r[t].toUpperCase()),(n[t>>1]&15)>=8&&(r[t+1]=r[t+1].toUpperCase());return"0x"+r.join("")}const _a=9007199254740991;function Ia(t){return Math.log10?Math.log10(t):Math.log(t)/Math.LN10}const Oa={};for(let t=0;t<10;t++)Oa[String(t)]=String(t);for(let t=0;t<26;t++)Oa[String.fromCharCode(65+t)]=String(10+t);const Sa=Math.floor(Ia(_a));function Na(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let r=t.split("").map((t=>Oa[t])).join("");for(;r.length>=Sa;){let t=r.substring(0,Sa);r=parseInt(t,10)%97+r.substring(t.length)}let i=String(98-parseInt(r,10)%97);for(;i.length<2;)i="0"+i;return i}function Ca(t){let r=null;if(typeof t!="string"&&Ea.throwArgumentError("invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/))t.substring(0,2)!=="0x"&&(t="0x"+t),r=Ma(t),t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&r!==t&&Ea.throwArgumentError("bad address checksum","address",t);else if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(t.substring(2,4)!==Na(t)&&Ea.throwArgumentError("bad icap checksum","address",t),r=Oo(t.substring(4));r.length<40;)r="0"+r;r=Ma("0x"+r)}else Ea.throwArgumentError("invalid address","address",t);return r}const ja="properties/5.7.0";new Ks(ja);function xa(t,r,i){Object.defineProperty(t,r,{enumerable:!0,value:i,writable:!1})}new Ks(Wo);const Pa=new Uint8Array(32);Pa.fill(0),Ao.from(-1);const Ra=Ao.from(0),Ta=Ao.from(1);Ao.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),so(Ta.toHexString(),32),so(Ra.toHexString(),32);var Da={},Ua={},Ba=ka;function ka(t,r){if(!t)throw new Error(r||"Assertion failed")}ka.equal=function(t,r,i){if(t!=r)throw new Error(i||"Assertion failed: "+t+" != "+r)};var $a={exports:{}};typeof Object.create=="function"?$a.exports=function(t,r){r&&(t.super_=r,t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:$a.exports=function(t,r){if(r){t.super_=r;var i=function(){};i.prototype=r.prototype,t.prototype=new i,t.prototype.constructor=t}};var Fa=Ba,qa=$a.exports;Ua.inherits=qa;function La(t,r){return(t.charCodeAt(r)&64512)!==55296||r<0||r+1>=t.length?!1:(t.charCodeAt(r+1)&64512)===56320}function Ka(t,r){if(Array.isArray(t))return t.slice();if(!t)return[];var i=[];if(typeof t=="string")if(r){if(r==="hex")for(t=t.replace(/[^a-z0-9]+/gi,""),t.length%2!==0&&(t="0"+t),e=0;e<t.length;e+=2)i.push(parseInt(t[e]+t[e+1],16))}else for(var n=0,e=0;e<t.length;e++){var s=t.charCodeAt(e);s<128?i[n++]=s:s<2048?(i[n++]=s>>6|192,i[n++]=s&63|128):La(t,e)?(s=65536+((s&1023)<<10)+(t.charCodeAt(++e)&1023),i[n++]=s>>18|240,i[n++]=s>>12&63|128,i[n++]=s>>6&63|128,i[n++]=s&63|128):(i[n++]=s>>12|224,i[n++]=s>>6&63|128,i[n++]=s&63|128)}else for(e=0;e<t.length;e++)i[e]=t[e]|0;return i}Ua.toArray=Ka;function Ha(t){for(var r="",i=0;i<t.length;i++)r+=Va(t[i].toString(16));return r}Ua.toHex=Ha;function Ga(t){var r=t>>>24|t>>>8&65280|t<<8&16711680|(t&255)<<24;return r>>>0}Ua.htonl=Ga;function Qa(t,r){for(var i="",n=0;n<t.length;n++){var e=t[n];r==="little"&&(e=Ga(e)),i+=za(e.toString(16))}return i}Ua.toHex32=Qa;function Va(t){return t.length===1?"0"+t:t}Ua.zero2=Va;function za(t){return t.length===7?"0"+t:t.length===6?"00"+t:t.length===5?"000"+t:t.length===4?"0000"+t:t.length===3?"00000"+t:t.length===2?"000000"+t:t.length===1?"0000000"+t:t}Ua.zero8=za;function Ja(t,r,i,n){var e=i-r;Fa(e%4===0);for(var s=new Array(e/4),o=0,a=r;o<s.length;o++,a+=4){var h;n==="big"?h=t[a]<<24|t[a+1]<<16|t[a+2]<<8|t[a+3]:h=t[a+3]<<24|t[a+2]<<16|t[a+1]<<8|t[a],s[o]=h>>>0}return s}Ua.join32=Ja;function Ya(t,r){for(var i=new Array(t.length*4),n=0,e=0;n<t.length;n++,e+=4){var s=t[n];r==="big"?(i[e]=s>>>24,i[e+1]=s>>>16&255,i[e+2]=s>>>8&255,i[e+3]=s&255):(i[e+3]=s>>>24,i[e+2]=s>>>16&255,i[e+1]=s>>>8&255,i[e]=s&255)}return i}Ua.split32=Ya;function Wa(t,r){return t>>>r|t<<32-r}Ua.rotr32=Wa;function Xa(t,r){return t<<r|t>>>32-r}Ua.rotl32=Xa;function Za(t,r){return t+r>>>0}Ua.sum32=Za;function th(t,r,i){return t+r+i>>>0}Ua.sum32_3=th;function rh(t,r,i,n){return t+r+i+n>>>0}Ua.sum32_4=rh;function ih(t,r,i,n,e){return t+r+i+n+e>>>0}Ua.sum32_5=ih;function nh(t,r,i,n){var e=t[r],s=t[r+1],o=n+s>>>0,a=(o<n?1:0)+i+e;t[r]=a>>>0,t[r+1]=o}Ua.sum64=nh;function eh(t,r,i,n){var e=r+n>>>0,s=(e<r?1:0)+t+i;return s>>>0}Ua.sum64_hi=eh;function sh(t,r,i,n){var e=r+n;return e>>>0}Ua.sum64_lo=sh;function oh(t,r,i,n,e,s,o,a){var h=0,u=r;u=u+n>>>0,h+=u<r?1:0,u=u+s>>>0,h+=u<s?1:0,u=u+a>>>0,h+=u<a?1:0;var f=t+i+e+o+h;return f>>>0}Ua.sum64_4_hi=oh;function ah(t,r,i,n,e,s,o,a){var h=r+n+s+a;return h>>>0}Ua.sum64_4_lo=ah;function hh(t,r,i,n,e,s,o,a,h,u){var f=0,c=r;c=c+n>>>0,f+=c<r?1:0,c=c+s>>>0,f+=c<s?1:0,c=c+a>>>0,f+=c<a?1:0,c=c+u>>>0,f+=c<u?1:0;var l=t+i+e+o+h+f;return l>>>0}Ua.sum64_5_hi=hh;function uh(t,r,i,n,e,s,o,a,h,u){var f=r+n+s+a+u;return f>>>0}Ua.sum64_5_lo=uh;function fh(t,r,i){var n=r<<32-i|t>>>i;return n>>>0}Ua.rotr64_hi=fh;function ch(t,r,i){var n=t<<32-i|r>>>i;return n>>>0}Ua.rotr64_lo=ch;function lh(t,r,i){return t>>>i}Ua.shr64_hi=lh;function dh(t,r,i){var n=t<<32-i|r>>>i;return n>>>0}Ua.shr64_lo=dh;var vh={},wh=Ua,ph=Ba;function yh(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}vh.BlockHash=yh,yh.prototype.update=function(t,r){if(t=wh.toArray(t,r),this.pending?this.pending=this.pending.concat(t):this.pending=t,this.pendingTotal+=t.length,this.pending.length>=this._delta8){t=this.pending;var i=t.length%this._delta8;this.pending=t.slice(t.length-i,t.length),this.pending.length===0&&(this.pending=null),t=wh.join32(t,0,t.length-i,this.endian);for(var n=0;n<t.length;n+=this._delta32)this._update(t,n,n+this._delta32)}return this},yh.prototype.digest=function(t){return this.update(this._pad()),ph(this.pending===null),this._digest(t)},yh.prototype._pad=function(){var t=this.pendingTotal,r=this._delta8,i=r-(t+this.padLength)%r,n=new Array(i+this.padLength);n[0]=128;for(var e=1;e<i;e++)n[e]=0;if(t<<=3,this.endian==="big"){for(var s=8;s<this.padLength;s++)n[e++]=0;n[e++]=0,n[e++]=0,n[e++]=0,n[e++]=0,n[e++]=t>>>24&255,n[e++]=t>>>16&255,n[e++]=t>>>8&255,n[e++]=t&255}else for(n[e++]=t&255,n[e++]=t>>>8&255,n[e++]=t>>>16&255,n[e++]=t>>>24&255,n[e++]=0,n[e++]=0,n[e++]=0,n[e++]=0,s=8;s<this.padLength;s++)n[e++]=0;return n};var bh={},gh={},mh=Ua,Ah=mh.rotr32;function Eh(t,r,i,n){if(t===0)return Mh(r,i,n);if(t===1||t===3)return Ih(r,i,n);if(t===2)return _h(r,i,n)}gh.ft_1=Eh;function Mh(t,r,i){return t&r^~t&i}gh.ch32=Mh;function _h(t,r,i){return t&r^t&i^r&i}gh.maj32=_h;function Ih(t,r,i){return t^r^i}gh.p32=Ih;function Oh(t){return Ah(t,2)^Ah(t,13)^Ah(t,22)}gh.s0_256=Oh;function Sh(t){return Ah(t,6)^Ah(t,11)^Ah(t,25)}gh.s1_256=Sh;function Nh(t){return Ah(t,7)^Ah(t,18)^t>>>3}gh.g0_256=Nh;function Ch(t){return Ah(t,17)^Ah(t,19)^t>>>10}gh.g1_256=Ch;var jh=Ua,xh=vh,Ph=gh,Rh=jh.rotl32,Th=jh.sum32,Dh=jh.sum32_5,Uh=Ph.ft_1,Bh=xh.BlockHash,kh=[1518500249,1859775393,2400959708,3395469782];function $h(){if(!(this instanceof $h))return new $h;Bh.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}jh.inherits($h,Bh);var Fh=$h;$h.blockSize=512,$h.outSize=160,$h.hmacStrength=80,$h.padLength=64,$h.prototype._update=function(t,r){for(var i=this.W,n=0;n<16;n++)i[n]=t[r+n];for(;n<i.length;n++)i[n]=Rh(i[n-3]^i[n-8]^i[n-14]^i[n-16],1);var e=this.h[0],s=this.h[1],o=this.h[2],a=this.h[3],h=this.h[4];for(n=0;n<i.length;n++){var u=~~(n/20),f=Dh(Rh(e,5),Uh(u,s,o,a),h,i[n],kh[u]);h=a,a=o,o=Rh(s,30),s=e,e=f}this.h[0]=Th(this.h[0],e),this.h[1]=Th(this.h[1],s),this.h[2]=Th(this.h[2],o),this.h[3]=Th(this.h[3],a),this.h[4]=Th(this.h[4],h)},$h.prototype._digest=function(t){return t==="hex"?jh.toHex32(this.h,"big"):jh.split32(this.h,"big")};var qh=Ua,Lh=vh,Kh=gh,Hh=Ba,Gh=qh.sum32,Qh=qh.sum32_4,Vh=qh.sum32_5,zh=Kh.ch32,Jh=Kh.maj32,Yh=Kh.s0_256,Wh=Kh.s1_256,Xh=Kh.g0_256,Zh=Kh.g1_256,tu=Lh.BlockHash,ru=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function iu(){if(!(this instanceof iu))return new iu;tu.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=ru,this.W=new Array(64)}qh.inherits(iu,tu);var nu=iu;iu.blockSize=512,iu.outSize=256,iu.hmacStrength=192,iu.padLength=64,iu.prototype._update=function(t,r){for(var i=this.W,n=0;n<16;n++)i[n]=t[r+n];for(;n<i.length;n++)i[n]=Qh(Zh(i[n-2]),i[n-7],Xh(i[n-15]),i[n-16]);var e=this.h[0],s=this.h[1],o=this.h[2],a=this.h[3],h=this.h[4],u=this.h[5],f=this.h[6],c=this.h[7];for(Hh(this.k.length===i.length),n=0;n<i.length;n++){var l=Vh(c,Wh(h),zh(h,u,f),this.k[n],i[n]),d=Gh(Yh(e),Jh(e,s,o));c=f,f=u,u=h,h=Gh(a,l),a=o,o=s,s=e,e=Gh(l,d)}this.h[0]=Gh(this.h[0],e),this.h[1]=Gh(this.h[1],s),this.h[2]=Gh(this.h[2],o),this.h[3]=Gh(this.h[3],a),this.h[4]=Gh(this.h[4],h),this.h[5]=Gh(this.h[5],u),this.h[6]=Gh(this.h[6],f),this.h[7]=Gh(this.h[7],c)},iu.prototype._digest=function(t){return t==="hex"?qh.toHex32(this.h,"big"):qh.split32(this.h,"big")};var eu=Ua,su=nu;function ou(){if(!(this instanceof ou))return new ou;su.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}eu.inherits(ou,su);var au=ou;ou.blockSize=512,ou.outSize=224,ou.hmacStrength=192,ou.padLength=64,ou.prototype._digest=function(t){return t==="hex"?eu.toHex32(this.h.slice(0,7),"big"):eu.split32(this.h.slice(0,7),"big")};var hu=Ua,uu=vh,fu=Ba,cu=hu.rotr64_hi,lu=hu.rotr64_lo,du=hu.shr64_hi,vu=hu.shr64_lo,wu=hu.sum64,pu=hu.sum64_hi,yu=hu.sum64_lo,bu=hu.sum64_4_hi,gu=hu.sum64_4_lo,mu=hu.sum64_5_hi,Au=hu.sum64_5_lo,Eu=uu.BlockHash,Mu=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function _u(){if(!(this instanceof _u))return new _u;Eu.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=Mu,this.W=new Array(160)}hu.inherits(_u,Eu);var Iu=_u;_u.blockSize=1024,_u.outSize=512,_u.hmacStrength=192,_u.padLength=128,_u.prototype._prepareBlock=function(t,r){for(var i=this.W,n=0;n<32;n++)i[n]=t[r+n];for(;n<i.length;n+=2){var e=Uu(i[n-4],i[n-3]),s=Bu(i[n-4],i[n-3]),o=i[n-14],a=i[n-13],h=Tu(i[n-30],i[n-29]),u=Du(i[n-30],i[n-29]),f=i[n-32],c=i[n-31];i[n]=bu(e,s,o,a,h,u,f,c),i[n+1]=gu(e,s,o,a,h,u,f,c)}},_u.prototype._update=function(t,r){this._prepareBlock(t,r);var i=this.W,n=this.h[0],e=this.h[1],s=this.h[2],o=this.h[3],a=this.h[4],h=this.h[5],u=this.h[6],f=this.h[7],c=this.h[8],l=this.h[9],d=this.h[10],v=this.h[11],w=this.h[12],p=this.h[13],y=this.h[14],b=this.h[15];fu(this.k.length===i.length);for(var g=0;g<i.length;g+=2){var m=y,A=b,E=Pu(c,l),M=Ru(c,l),_=Ou(c,l,d,v,w),I=Su(c,l,d,v,w,p),O=this.k[g],S=this.k[g+1],N=i[g],C=i[g+1],j=mu(m,A,E,M,_,I,O,S,N,C),x=Au(m,A,E,M,_,I,O,S,N,C);m=ju(n,e),A=xu(n,e),E=Nu(n,e,s,o,a),M=Cu(n,e,s,o,a,h);var P=pu(m,A,E,M),R=yu(m,A,E,M);y=w,b=p,w=d,p=v,d=c,v=l,c=pu(u,f,j,x),l=yu(f,f,j,x),u=a,f=h,a=s,h=o,s=n,o=e,n=pu(j,x,P,R),e=yu(j,x,P,R)}wu(this.h,0,n,e),wu(this.h,2,s,o),wu(this.h,4,a,h),wu(this.h,6,u,f),wu(this.h,8,c,l),wu(this.h,10,d,v),wu(this.h,12,w,p),wu(this.h,14,y,b)},_u.prototype._digest=function(t){return t==="hex"?hu.toHex32(this.h,"big"):hu.split32(this.h,"big")};function Ou(t,r,i,n,e){var s=t&i^~t&e;return s<0&&(s+=4294967296),s}function Su(t,r,i,n,e,s){var o=r&n^~r&s;return o<0&&(o+=4294967296),o}function Nu(t,r,i,n,e){var s=t&i^t&e^i&e;return s<0&&(s+=4294967296),s}function Cu(t,r,i,n,e,s){var o=r&n^r&s^n&s;return o<0&&(o+=4294967296),o}function ju(t,r){var i=cu(t,r,28),n=cu(r,t,2),e=cu(r,t,7),s=i^n^e;return s<0&&(s+=4294967296),s}function xu(t,r){var i=lu(t,r,28),n=lu(r,t,2),e=lu(r,t,7),s=i^n^e;return s<0&&(s+=4294967296),s}function Pu(t,r){var i=cu(t,r,14),n=cu(t,r,18),e=cu(r,t,9),s=i^n^e;return s<0&&(s+=4294967296),s}function Ru(t,r){var i=lu(t,r,14),n=lu(t,r,18),e=lu(r,t,9),s=i^n^e;return s<0&&(s+=4294967296),s}function Tu(t,r){var i=cu(t,r,1),n=cu(t,r,8),e=du(t,r,7),s=i^n^e;return s<0&&(s+=4294967296),s}function Du(t,r){var i=lu(t,r,1),n=lu(t,r,8),e=vu(t,r,7),s=i^n^e;return s<0&&(s+=4294967296),s}function Uu(t,r){var i=cu(t,r,19),n=cu(r,t,29),e=du(t,r,6),s=i^n^e;return s<0&&(s+=4294967296),s}function Bu(t,r){var i=lu(t,r,19),n=lu(r,t,29),e=vu(t,r,6),s=i^n^e;return s<0&&(s+=4294967296),s}var ku=Ua,$u=Iu;function Fu(){if(!(this instanceof Fu))return new Fu;$u.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}ku.inherits(Fu,$u);var qu=Fu;Fu.blockSize=1024,Fu.outSize=384,Fu.hmacStrength=192,Fu.padLength=128,Fu.prototype._digest=function(t){return t==="hex"?ku.toHex32(this.h.slice(0,12),"big"):ku.split32(this.h.slice(0,12),"big")},bh.sha1=Fh,bh.sha224=au,bh.sha256=nu,bh.sha384=qu,bh.sha512=Iu;var Lu={},Ku=Ua,Hu=vh,Gu=Ku.rotl32,Qu=Ku.sum32,Vu=Ku.sum32_3,zu=Ku.sum32_4,Ju=Hu.BlockHash;function Yu(){if(!(this instanceof Yu))return new Yu;Ju.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}Ku.inherits(Yu,Ju),Lu.ripemd160=Yu,Yu.blockSize=512,Yu.outSize=160,Yu.hmacStrength=192,Yu.padLength=64,Yu.prototype._update=function(t,r){for(var i=this.h[0],n=this.h[1],e=this.h[2],s=this.h[3],o=this.h[4],a=i,h=n,u=e,f=s,c=o,l=0;l<80;l++){var d=Qu(Gu(zu(i,Wu(l,n,e,s),t[tf[l]+r],Xu(l)),nf[l]),o);i=o,o=s,s=Gu(e,10),e=n,n=d,d=Qu(Gu(zu(a,Wu(79-l,h,u,f),t[rf[l]+r],Zu(l)),ef[l]),c),a=c,c=f,f=Gu(u,10),u=h,h=d}d=Vu(this.h[1],e,f),this.h[1]=Vu(this.h[2],s,c),this.h[2]=Vu(this.h[3],o,a),this.h[3]=Vu(this.h[4],i,h),this.h[4]=Vu(this.h[0],n,u),this.h[0]=d},Yu.prototype._digest=function(t){return t==="hex"?Ku.toHex32(this.h,"little"):Ku.split32(this.h,"little")};function Wu(t,r,i,n){return t<=15?r^i^n:t<=31?r&i|~r&n:t<=47?(r|~i)^n:t<=63?r&n|i&~n:r^(i|~n)}function Xu(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function Zu(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}var tf=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],rf=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],nf=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],ef=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],sf=Ua,of=Ba;function af(t,r,i){if(!(this instanceof af))return new af(t,r,i);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(sf.toArray(r,i))}var hf=af;af.prototype._init=function(t){t.length>this.blockSize&&(t=(new this.Hash).update(t).digest()),of(t.length<=this.blockSize);for(var r=t.length;r<this.blockSize;r++)t.push(0);for(r=0;r<t.length;r++)t[r]^=54;for(this.inner=(new this.Hash).update(t),r=0;r<t.length;r++)t[r]^=106;this.outer=(new this.Hash).update(t)},af.prototype.update=function(t,r){return this.inner.update(t,r),this},af.prototype.digest=function(t){return this.outer.update(this.inner.digest()),this.outer.digest(t)},function(t){var r=t;r.utils=Ua,r.common=vh,r.sha=bh,r.ripemd=Lu,r.hmac=hf,r.sha1=r.sha.sha1,r.sha256=r.sha.sha256,r.sha224=r.sha.sha224,r.sha384=r.sha.sha384,r.sha512=r.sha.sha512,r.ripemd160=r.ripemd.ripemd160}(Da);function uf(t,r,i){return i={path:r,exports:{},require:function(t,r){return ff()}},t(i,i.exports),i.exports}function ff(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var cf=lf;function lf(t,r){if(!t)throw new Error(r||"Assertion failed")}lf.equal=function(t,r,i){if(t!=r)throw new Error(i||"Assertion failed: "+t+" != "+r)};var df=uf((function(t,r){var i=r;function n(t,r){if(Array.isArray(t))return t.slice();if(!t)return[];var i=[];if(typeof t!="string"){for(var n=0;n<t.length;n++)i[n]=t[n]|0;return i}if(r==="hex"){t=t.replace(/[^a-z0-9]+/gi,""),t.length%2!==0&&(t="0"+t);for(var n=0;n<t.length;n+=2)i.push(parseInt(t[n]+t[n+1],16))}else for(var n=0;n<t.length;n++){var e=t.charCodeAt(n),s=e>>8,o=e&255;s?i.push(s,o):i.push(o)}return i}i.toArray=n;function e(t){return t.length===1?"0"+t:t}i.zero2=e;function s(t){for(var r="",i=0;i<t.length;i++)r+=e(t[i].toString(16));return r}i.toHex=s,i.encode=function(t,r){return r==="hex"?s(t):t}})),vf=uf((function(t,r){var i=r;i.assert=cf,i.toArray=df.toArray,i.zero2=df.zero2,i.toHex=df.toHex,i.encode=df.encode;function n(t,r,i){var n=new Array(Math.max(t.bitLength(),i)+1);n.fill(0);for(var e=1<<r+1,s=t.clone(),o=0;o<n.length;o++){var a,h=s.andln(e-1);s.isOdd()?(h>(e>>1)-1?a=(e>>1)-h:a=h,s.isubn(a)):a=0,n[o]=a,s.iushrn(1)}return n}i.getNAF=n;function e(t,r){var i=[[],[]];t=t.clone(),r=r.clone();for(var n=0,e=0,s;t.cmpn(-n)>0||r.cmpn(-e)>0;){var o=t.andln(3)+n&3,a=r.andln(3)+e&3;o===3&&(o=-1),a===3&&(a=-1);var h;o&1?(s=t.andln(7)+n&7,(s===3||s===5)&&a===2?h=-o:h=o):h=0,i[0].push(h);var u;a&1?(s=r.andln(7)+e&7,(s===3||s===5)&&o===2?u=-a:u=a):u=0,i[1].push(u),2*n===h+1&&(n=1-n),2*e===u+1&&(e=1-e),t.iushrn(1),r.iushrn(1)}return i}i.getJSF=e;function s(t,r,i){var n="_"+r;t.prototype[r]=function(){return this[n]!==void 0?this[n]:this[n]=i.call(this)}}i.cachedProperty=s;function o(t){return typeof t=="string"?i.toArray(t,"hex"):t}i.parseBytes=o;function a(t){return new lo(t,"hex","le")}i.intFromLE=a})),wf=vf.getNAF,pf=vf.getJSF,yf=vf.assert;function bf(t,r){this.type=t,this.p=new lo(r.p,16),this.red=r.prime?lo.red(r.prime):lo.mont(this.p),this.zero=new lo(0).toRed(this.red),this.one=new lo(1).toRed(this.red),this.two=new lo(2).toRed(this.red),this.n=r.n&&new lo(r.n,16),this.g=r.g&&this.pointFromJSON(r.g,r.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var i=this.n&&this.p.div(this.n);!i||i.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var gf=bf;bf.prototype.point=function(){throw new Error("Not implemented")},bf.prototype.validate=function(){throw new Error("Not implemented")},bf.prototype._fixedNafMul=function(t,r){yf(t.precomputed);var i=t._getDoubles(),n=wf(r,1,this._bitLength),e=(1<<i.step+1)-(i.step%2===0?2:1);e/=3;var s=[],o,a;for(o=0;o<n.length;o+=i.step){a=0;for(var h=o+i.step-1;h>=o;h--)a=(a<<1)+n[h];s.push(a)}for(var u=this.jpoint(null,null,null),f=this.jpoint(null,null,null),c=e;c>0;c--){for(o=0;o<s.length;o++)a=s[o],a===c?f=f.mixedAdd(i.points[o]):a===-c&&(f=f.mixedAdd(i.points[o].neg()));u=u.add(f)}return u.toP()},bf.prototype._wnafMul=function(t,r){var i=4,n=t._getNAFPoints(i);i=n.wnd;for(var e=n.points,s=wf(r,i,this._bitLength),o=this.jpoint(null,null,null),a=s.length-1;a>=0;a--){for(var h=0;a>=0&&s[a]===0;a--)h++;if(a>=0&&h++,o=o.dblp(h),a<0)break;var u=s[a];yf(u!==0),t.type==="affine"?u>0?o=o.mixedAdd(e[u-1>>1]):o=o.mixedAdd(e[-u-1>>1].neg()):u>0?o=o.add(e[u-1>>1]):o=o.add(e[-u-1>>1].neg())}return t.type==="affine"?o.toP():o},bf.prototype._wnafMulAdd=function(t,r,i,n,e){var s=this._wnafT1,o=this._wnafT2,a=this._wnafT3,h=0,u,f,c;for(u=0;u<n;u++){c=r[u];var l=c._getNAFPoints(t);s[u]=l.wnd,o[u]=l.points}for(u=n-1;u>=1;u-=2){var d=u-1,v=u;if(s[d]!==1||s[v]!==1){a[d]=wf(i[d],s[d],this._bitLength),a[v]=wf(i[v],s[v],this._bitLength),h=Math.max(a[d].length,h),h=Math.max(a[v].length,h);continue}var w=[r[d],null,null,r[v]];r[d].y.cmp(r[v].y)===0?(w[1]=r[d].add(r[v]),w[2]=r[d].toJ().mixedAdd(r[v].neg())):r[d].y.cmp(r[v].y.redNeg())===0?(w[1]=r[d].toJ().mixedAdd(r[v]),w[2]=r[d].add(r[v].neg())):(w[1]=r[d].toJ().mixedAdd(r[v]),w[2]=r[d].toJ().mixedAdd(r[v].neg()));var p=[-3,-1,-5,-7,0,7,5,1,3],y=pf(i[d],i[v]);for(h=Math.max(y[0].length,h),a[d]=new Array(h),a[v]=new Array(h),f=0;f<h;f++){var b=y[0][f]|0,g=y[1][f]|0;a[d][f]=p[(b+1)*3+(g+1)],a[v][f]=0,o[d]=w}}var m=this.jpoint(null,null,null),A=this._wnafT4;for(u=h;u>=0;u--){for(var E=0;u>=0;){var M=!0;for(f=0;f<n;f++)A[f]=a[f][u]|0,A[f]!==0&&(M=!1);if(!M)break;E++,u--}if(u>=0&&E++,m=m.dblp(E),u<0)break;for(f=0;f<n;f++){var _=A[f];_!==0&&(_>0?c=o[f][_-1>>1]:_<0&&(c=o[f][-_-1>>1].neg()),c.type==="affine"?m=m.mixedAdd(c):m=m.add(c))}}for(u=0;u<n;u++)o[u]=null;return e?m:m.toP()};function mf(t,r){this.curve=t,this.type=r,this.precomputed=null}bf.BasePoint=mf,mf.prototype.eq=function(){throw new Error("Not implemented")},mf.prototype.validate=function(){return this.curve.validate(this)},bf.prototype.decodePoint=function(t,r){t=vf.toArray(t,r);var i=this.p.byteLength();if((t[0]===4||t[0]===6||t[0]===7)&&t.length-1===2*i){t[0]===6?yf(t[t.length-1]%2===0):t[0]===7&&yf(t[t.length-1]%2===1);var n=this.point(t.slice(1,1+i),t.slice(1+i,1+2*i));return n}else if((t[0]===2||t[0]===3)&&t.length-1===i)return this.pointFromX(t.slice(1,1+i),t[0]===3);throw new Error("Unknown point format")},mf.prototype.encodeCompressed=function(t){return this.encode(t,!0)},mf.prototype._encode=function(t){var r=this.curve.p.byteLength(),i=this.getX().toArray("be",r);return t?[this.getY().isEven()?2:3].concat(i):[4].concat(i,this.getY().toArray("be",r))},mf.prototype.encode=function(t,r){return vf.encode(this._encode(r),t)},mf.prototype.precompute=function(t){if(this.precomputed)return this;var r={doubles:null,naf:null,beta:null};return r.naf=this._getNAFPoints(8),r.doubles=this._getDoubles(4,t),r.beta=this._getBeta(),this.precomputed=r,this},mf.prototype._hasDoubles=function(t){if(!this.precomputed)return!1;var r=this.precomputed.doubles;return r?r.points.length>=Math.ceil((t.bitLength()+1)/r.step):!1},mf.prototype._getDoubles=function(t,r){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var i=[this],n=this,e=0;e<r;e+=t){for(var s=0;s<t;s++)n=n.dbl();i.push(n)}return{step:t,points:i}},mf.prototype._getNAFPoints=function(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var r=[this],i=(1<<t)-1,n=i===1?null:this.dbl(),e=1;e<i;e++)r[e]=r[e-1].add(n);return{wnd:t,points:r}},mf.prototype._getBeta=function(){return null},mf.prototype.dblp=function(t){for(var r=this,i=0;i<t;i++)r=r.dbl();return r};var Af=uf((function(t){typeof Object.create=="function"?t.exports=function(t,r){r&&(t.super_=r,t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,r){if(r){t.super_=r;var i=function(){};i.prototype=r.prototype,t.prototype=new i,t.prototype.constructor=t}}})),Ef=vf.assert;function Mf(t){gf.call(this,"short",t),this.a=new lo(t.a,16).toRed(this.red),this.b=new lo(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}Af(Mf,gf);var _f=Mf;Mf.prototype._getEndomorphism=function(t){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var r,i;if(t.beta)r=new lo(t.beta,16).toRed(this.red);else{var n=this._getEndoRoots(this.p);r=n[0].cmp(n[1])<0?n[0]:n[1],r=r.toRed(this.red)}if(t.lambda)i=new lo(t.lambda,16);else{var e=this._getEndoRoots(this.n);this.g.mul(e[0]).x.cmp(this.g.x.redMul(r))===0?i=e[0]:(i=e[1],Ef(this.g.mul(i).x.cmp(this.g.x.redMul(r))===0))}var s;return t.basis?s=t.basis.map((function(t){return{a:new lo(t.a,16),b:new lo(t.b,16)}})):s=this._getEndoBasis(i),{beta:r,lambda:i,basis:s}}},Mf.prototype._getEndoRoots=function(t){var r=t===this.p?this.red:lo.mont(t),i=new lo(2).toRed(r).redInvm(),n=i.redNeg(),e=new lo(3).toRed(r).redNeg().redSqrt().redMul(i),s=n.redAdd(e).fromRed(),o=n.redSub(e).fromRed();return[s,o]},Mf.prototype._getEndoBasis=function(t){for(var r=this.n.ushrn(Math.floor(this.n.bitLength()/2)),i=t,n=this.n.clone(),e=new lo(1),s=new lo(0),o=new lo(0),a=new lo(1),h,u,f,c,l,d,v,w=0,p,y;i.cmpn(0)!==0;){var b=n.div(i);p=n.sub(b.mul(i)),y=o.sub(b.mul(e));var g=a.sub(b.mul(s));if(!f&&p.cmp(r)<0)h=v.neg(),u=e,f=p.neg(),c=y;else if(f&&++w===2)break;v=p,n=i,i=p,o=e,e=y,a=s,s=g}l=p.neg(),d=y;var m=f.sqr().add(c.sqr()),A=l.sqr().add(d.sqr());return A.cmp(m)>=0&&(l=h,d=u),f.negative&&(f=f.neg(),c=c.neg()),l.negative&&(l=l.neg(),d=d.neg()),[{a:f,b:c},{a:l,b:d}]},Mf.prototype._endoSplit=function(t){var r=this.endo.basis,i=r[0],n=r[1],e=n.b.mul(t).divRound(this.n),s=i.b.neg().mul(t).divRound(this.n),o=e.mul(i.a),a=s.mul(n.a),h=e.mul(i.b),u=s.mul(n.b),f=t.sub(o).sub(a),c=h.add(u).neg();return{k1:f,k2:c}},Mf.prototype.pointFromX=function(t,r){t=new lo(t,16),t.red||(t=t.toRed(this.red));var i=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b),n=i.redSqrt();if(n.redSqr().redSub(i).cmp(this.zero)!==0)throw new Error("invalid point");var e=n.fromRed().isOdd();return(r&&!e||!r&&e)&&(n=n.redNeg()),this.point(t,n)},Mf.prototype.validate=function(t){if(t.inf)return!0;var r=t.x,i=t.y,n=this.a.redMul(r),e=r.redSqr().redMul(r).redIAdd(n).redIAdd(this.b);return i.redSqr().redISub(e).cmpn(0)===0},Mf.prototype._endoWnafMulAdd=function(t,r,i){for(var n=this._endoWnafT1,e=this._endoWnafT2,s=0;s<t.length;s++){var o=this._endoSplit(r[s]),a=t[s],h=a._getBeta();o.k1.negative&&(o.k1.ineg(),a=a.neg(!0)),o.k2.negative&&(o.k2.ineg(),h=h.neg(!0)),n[s*2]=a,n[s*2+1]=h,e[s*2]=o.k1,e[s*2+1]=o.k2}for(var u=this._wnafMulAdd(1,n,e,s*2,i),f=0;f<s*2;f++)n[f]=null,e[f]=null;return u};function If(t,r,i,n){gf.BasePoint.call(this,t,"affine"),r===null&&i===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new lo(r,16),this.y=new lo(i,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}Af(If,gf.BasePoint),Mf.prototype.point=function(t,r,i){return new If(this,t,r,i)},Mf.prototype.pointFromJSON=function(t,r){return If.fromJSON(this,t,r)},If.prototype._getBeta=function(){if(this.curve.endo){var t=this.precomputed;if(t&&t.beta)return t.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){var i=this.curve,n=function(t){return i.point(t.x.redMul(i.endo.beta),t.y)};t.beta=r,r.precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(n)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(n)}}}return r}},If.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},If.fromJSON=function(t,r,i){typeof r=="string"&&(r=JSON.parse(r));var n=t.point(r[0],r[1],i);if(!r[2])return n;function e(r){return t.point(r[0],r[1],i)}var s=r[2];return n.precomputed={beta:null,doubles:s.doubles&&{step:s.doubles.step,points:[n].concat(s.doubles.points.map(e))},naf:s.naf&&{wnd:s.naf.wnd,points:[n].concat(s.naf.points.map(e))}},n},If.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},If.prototype.isInfinity=function(){return this.inf},If.prototype.add=function(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t))return this.curve.point(null,null);if(this.x.cmp(t.x)===0)return this.curve.point(null,null);var r=this.y.redSub(t.y);r.cmpn(0)!==0&&(r=r.redMul(this.x.redSub(t.x).redInvm()));var i=r.redSqr().redISub(this.x).redISub(t.x),n=r.redMul(this.x.redSub(i)).redISub(this.y);return this.curve.point(i,n)},If.prototype.dbl=function(){if(this.inf)return this;var t=this.y.redAdd(this.y);if(t.cmpn(0)===0)return this.curve.point(null,null);var r=this.curve.a,i=this.x.redSqr(),n=t.redInvm(),e=i.redAdd(i).redIAdd(i).redIAdd(r).redMul(n),s=e.redSqr().redISub(this.x.redAdd(this.x)),o=e.redMul(this.x.redSub(s)).redISub(this.y);return this.curve.point(s,o)},If.prototype.getX=function(){return this.x.fromRed()},If.prototype.getY=function(){return this.y.fromRed()},If.prototype.mul=function(t){return t=new lo(t,16),this.isInfinity()?this:this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve.endo?this.curve._endoWnafMulAdd([this],[t]):this.curve._wnafMul(this,t)},If.prototype.mulAdd=function(t,r,i){var n=[this,r],e=[t,i];return this.curve.endo?this.curve._endoWnafMulAdd(n,e):this.curve._wnafMulAdd(1,n,e,2)},If.prototype.jmulAdd=function(t,r,i){var n=[this,r],e=[t,i];return this.curve.endo?this.curve._endoWnafMulAdd(n,e,!0):this.curve._wnafMulAdd(1,n,e,2,!0)},If.prototype.eq=function(t){return this===t||this.inf===t.inf&&(this.inf||this.x.cmp(t.x)===0&&this.y.cmp(t.y)===0)},If.prototype.neg=function(t){if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){var i=this.precomputed,n=function(t){return t.neg()};r.precomputed={naf:i.naf&&{wnd:i.naf.wnd,points:i.naf.points.map(n)},doubles:i.doubles&&{step:i.doubles.step,points:i.doubles.points.map(n)}}}return r},If.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var t=this.curve.jpoint(this.x,this.y,this.curve.one);return t};function Of(t,r,i,n){gf.BasePoint.call(this,t,"jacobian"),r===null&&i===null&&n===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new lo(0)):(this.x=new lo(r,16),this.y=new lo(i,16),this.z=new lo(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}Af(Of,gf.BasePoint),Mf.prototype.jpoint=function(t,r,i){return new Of(this,t,r,i)},Of.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var t=this.z.redInvm(),r=t.redSqr(),i=this.x.redMul(r),n=this.y.redMul(r).redMul(t);return this.curve.point(i,n)},Of.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},Of.prototype.add=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var r=t.z.redSqr(),i=this.z.redSqr(),n=this.x.redMul(r),e=t.x.redMul(i),s=this.y.redMul(r.redMul(t.z)),o=t.y.redMul(i.redMul(this.z)),a=n.redSub(e),h=s.redSub(o);if(a.cmpn(0)===0)return h.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var u=a.redSqr(),f=u.redMul(a),c=n.redMul(u),l=h.redSqr().redIAdd(f).redISub(c).redISub(c),d=h.redMul(c.redISub(l)).redISub(s.redMul(f)),v=this.z.redMul(t.z).redMul(a);return this.curve.jpoint(l,d,v)},Of.prototype.mixedAdd=function(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;var r=this.z.redSqr(),i=this.x,n=t.x.redMul(r),e=this.y,s=t.y.redMul(r).redMul(this.z),o=i.redSub(n),a=e.redSub(s);if(o.cmpn(0)===0)return a.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var h=o.redSqr(),u=h.redMul(o),f=i.redMul(h),c=a.redSqr().redIAdd(u).redISub(f).redISub(f),l=a.redMul(f.redISub(c)).redISub(e.redMul(u)),d=this.z.redMul(o);return this.curve.jpoint(c,l,d)},Of.prototype.dblp=function(t){if(t===0)return this;if(this.isInfinity())return this;if(!t)return this.dbl();var r;if(this.curve.zeroA||this.curve.threeA){var i=this;for(r=0;r<t;r++)i=i.dbl();return i}var n=this.curve.a,e=this.curve.tinv,s=this.x,o=this.y,a=this.z,h=a.redSqr().redSqr(),u=o.redAdd(o);for(r=0;r<t;r++){var f=s.redSqr(),c=u.redSqr(),l=c.redSqr(),d=f.redAdd(f).redIAdd(f).redIAdd(n.redMul(h)),v=s.redMul(c),w=d.redSqr().redISub(v.redAdd(v)),p=v.redISub(w),y=d.redMul(p);y=y.redIAdd(y).redISub(l);var b=u.redMul(a);r+1<t&&(h=h.redMul(l)),s=w,a=b,u=y}return this.curve.jpoint(s,u.redMul(e),a)},Of.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},Of.prototype._zeroDbl=function(){var t,r,i;if(this.zOne){var n=this.x.redSqr(),e=this.y.redSqr(),s=e.redSqr(),o=this.x.redAdd(e).redSqr().redISub(n).redISub(s);o=o.redIAdd(o);var a=n.redAdd(n).redIAdd(n),h=a.redSqr().redISub(o).redISub(o),u=s.redIAdd(s);u=u.redIAdd(u),u=u.redIAdd(u),t=h,r=a.redMul(o.redISub(h)).redISub(u),i=this.y.redAdd(this.y)}else{var f=this.x.redSqr(),c=this.y.redSqr(),l=c.redSqr(),d=this.x.redAdd(c).redSqr().redISub(f).redISub(l);d=d.redIAdd(d);var v=f.redAdd(f).redIAdd(f),w=v.redSqr(),p=l.redIAdd(l);p=p.redIAdd(p),p=p.redIAdd(p),t=w.redISub(d).redISub(d),r=v.redMul(d.redISub(t)).redISub(p),i=this.y.redMul(this.z),i=i.redIAdd(i)}return this.curve.jpoint(t,r,i)},Of.prototype._threeDbl=function(){var t,r,i;if(this.zOne){var n=this.x.redSqr(),e=this.y.redSqr(),s=e.redSqr(),o=this.x.redAdd(e).redSqr().redISub(n).redISub(s);o=o.redIAdd(o);var a=n.redAdd(n).redIAdd(n).redIAdd(this.curve.a),h=a.redSqr().redISub(o).redISub(o);t=h;var u=s.redIAdd(s);u=u.redIAdd(u),u=u.redIAdd(u),r=a.redMul(o.redISub(h)).redISub(u),i=this.y.redAdd(this.y)}else{var f=this.z.redSqr(),c=this.y.redSqr(),l=this.x.redMul(c),d=this.x.redSub(f).redMul(this.x.redAdd(f));d=d.redAdd(d).redIAdd(d);var v=l.redIAdd(l);v=v.redIAdd(v);var w=v.redAdd(v);t=d.redSqr().redISub(w),i=this.y.redAdd(this.z).redSqr().redISub(c).redISub(f);var p=c.redSqr();p=p.redIAdd(p),p=p.redIAdd(p),p=p.redIAdd(p),r=d.redMul(v.redISub(t)).redISub(p)}return this.curve.jpoint(t,r,i)},Of.prototype._dbl=function(){var t=this.curve.a,r=this.x,i=this.y,n=this.z,e=n.redSqr().redSqr(),s=r.redSqr(),o=i.redSqr(),a=s.redAdd(s).redIAdd(s).redIAdd(t.redMul(e)),h=r.redAdd(r);h=h.redIAdd(h);var u=h.redMul(o),f=a.redSqr().redISub(u.redAdd(u)),c=u.redISub(f),l=o.redSqr();l=l.redIAdd(l),l=l.redIAdd(l),l=l.redIAdd(l);var d=a.redMul(c).redISub(l),v=i.redAdd(i).redMul(n);return this.curve.jpoint(f,d,v)},Of.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var t=this.x.redSqr(),r=this.y.redSqr(),i=this.z.redSqr(),n=r.redSqr(),e=t.redAdd(t).redIAdd(t),s=e.redSqr(),o=this.x.redAdd(r).redSqr().redISub(t).redISub(n);o=o.redIAdd(o),o=o.redAdd(o).redIAdd(o),o=o.redISub(s);var a=o.redSqr(),h=n.redIAdd(n);h=h.redIAdd(h),h=h.redIAdd(h),h=h.redIAdd(h);var u=e.redIAdd(o).redSqr().redISub(s).redISub(a).redISub(h),f=r.redMul(u);f=f.redIAdd(f),f=f.redIAdd(f);var c=this.x.redMul(a).redISub(f);c=c.redIAdd(c),c=c.redIAdd(c);var l=this.y.redMul(u.redMul(h.redISub(u)).redISub(o.redMul(a)));l=l.redIAdd(l),l=l.redIAdd(l),l=l.redIAdd(l);var d=this.z.redAdd(o).redSqr().redISub(i).redISub(a);return this.curve.jpoint(c,l,d)},Of.prototype.mul=function(t,r){return t=new lo(t,r),this.curve._wnafMul(this,t)},Of.prototype.eq=function(t){if(t.type==="affine")return this.eq(t.toJ());if(this===t)return!0;var r=this.z.redSqr(),i=t.z.redSqr();if(this.x.redMul(i).redISub(t.x.redMul(r)).cmpn(0)!==0)return!1;var n=r.redMul(this.z),e=i.redMul(t.z);return this.y.redMul(e).redISub(t.y.redMul(n)).cmpn(0)===0},Of.prototype.eqXToP=function(t){var r=this.z.redSqr(),i=t.toRed(this.curve.red).redMul(r);if(this.x.cmp(i)===0)return!0;for(var n=t.clone(),e=this.curve.redN.redMul(r);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(i.redIAdd(e),this.x.cmp(i)===0)return!0}},Of.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},Of.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var Sf=uf((function(t,r){var i=r;i.base=gf,i.short=_f,i.mont=null,i.edwards=null})),Nf=uf((function(t,r){var i=r,n=vf.assert;function e(t){t.type==="short"?this.curve=new Sf.short(t):t.type==="edwards"?this.curve=new Sf.edwards(t):this.curve=new Sf.mont(t),this.g=this.curve.g,this.n=this.curve.n,this.hash=t.hash,n(this.g.validate(),"Invalid curve"),n(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}i.PresetCurve=e;function s(t,r){Object.defineProperty(i,t,{configurable:!0,enumerable:!0,get:function(){var n=new e(r);return Object.defineProperty(i,t,{configurable:!0,enumerable:!0,value:n}),n}})}s("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:Da.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),s("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:Da.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),s("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:Da.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),s("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:Da.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),s("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:Da.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),s("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Da.sha256,gRed:!1,g:["9"]}),s("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Da.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var o;try{o=null.crash()}catch{o=void 0}s("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:Da.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",o]})}));function Cf(t){if(!(this instanceof Cf))return new Cf(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var r=df.toArray(t.entropy,t.entropyEnc||"hex"),i=df.toArray(t.nonce,t.nonceEnc||"hex"),n=df.toArray(t.pers,t.persEnc||"hex");cf(r.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(r,i,n)}var jf=Cf;Cf.prototype._init=function(t,r,i){var n=t.concat(r).concat(i);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var e=0;e<this.V.length;e++)this.K[e]=0,this.V[e]=1;this._update(n),this._reseed=1,this.reseedInterval=281474976710656},Cf.prototype._hmac=function(){return new Da.hmac(this.hash,this.K)},Cf.prototype._update=function(t){var r=this._hmac().update(this.V).update([0]);t&&(r=r.update(t)),this.K=r.digest(),this.V=this._hmac().update(this.V).digest(),t&&(this.K=this._hmac().update(this.V).update([1]).update(t).digest(),this.V=this._hmac().update(this.V).digest())},Cf.prototype.reseed=function(t,r,i,n){typeof r!="string"&&(n=i,i=r,r=null),t=df.toArray(t,r),i=df.toArray(i,n),cf(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(t.concat(i||[])),this._reseed=1},Cf.prototype.generate=function(t,r,i,n){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof r!="string"&&(n=i,i=r,r=null),i&&(i=df.toArray(i,n||"hex"),this._update(i));for(var e=[];e.length<t;)this.V=this._hmac().update(this.V).digest(),e=e.concat(this.V);var s=e.slice(0,t);return this._update(i),this._reseed++,df.encode(s,r)};var xf=vf.assert;function Pf(t,r){this.ec=t,this.priv=null,this.pub=null,r.priv&&this._importPrivate(r.priv,r.privEnc),r.pub&&this._importPublic(r.pub,r.pubEnc)}var Rf=Pf;Pf.fromPublic=function(t,r,i){return r instanceof Pf?r:new Pf(t,{pub:r,pubEnc:i})},Pf.fromPrivate=function(t,r,i){return r instanceof Pf?r:new Pf(t,{priv:r,privEnc:i})},Pf.prototype.validate=function(){var t=this.getPublic();return t.isInfinity()?{result:!1,reason:"Invalid public key"}:t.validate()?t.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},Pf.prototype.getPublic=function(t,r){return typeof t=="string"&&(r=t,t=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),r?this.pub.encode(r,t):this.pub},Pf.prototype.getPrivate=function(t){return t==="hex"?this.priv.toString(16,2):this.priv},Pf.prototype._importPrivate=function(t,r){this.priv=new lo(t,r||16),this.priv=this.priv.umod(this.ec.curve.n)},Pf.prototype._importPublic=function(t,r){if(t.x||t.y){this.ec.curve.type==="mont"?xf(t.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&xf(t.x&&t.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(t.x,t.y);return}this.pub=this.ec.curve.decodePoint(t,r)},Pf.prototype.derive=function(t){return t.validate()||xf(t.validate(),"public point not validated"),t.mul(this.priv).getX()},Pf.prototype.sign=function(t,r,i){return this.ec.sign(t,this,r,i)},Pf.prototype.verify=function(t,r){return this.ec.verify(t,r,this)},Pf.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var Tf=vf.assert;function Df(t,r){if(t instanceof Df)return t;this._importDER(t,r)||(Tf(t.r&&t.s,"Signature without r or s"),this.r=new lo(t.r,16),this.s=new lo(t.s,16),t.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}var Uf=Df;function Bf(){this.place=0}function kf(t,r){var i=t[r.place++];if(!(i&128))return i;var n=i&15;if(n===0||n>4)return!1;for(var e=0,s=0,o=r.place;s<n;s++,o++)e<<=8,e|=t[o],e>>>=0;return e<=127?!1:(r.place=o,e)}function $f(t){for(var r=0,i=t.length-1;!t[r]&&!(t[r+1]&128)&&r<i;)r++;return r===0?t:t.slice(r)}Df.prototype._importDER=function(t,r){t=vf.toArray(t,r);var i=new Bf;if(t[i.place++]!==48)return!1;var n=kf(t,i);if(n===!1||n+i.place!==t.length||t[i.place++]!==2)return!1;var e=kf(t,i);if(e===!1)return!1;var s=t.slice(i.place,e+i.place);if(i.place+=e,t[i.place++]!==2)return!1;var o=kf(t,i);if(o===!1||t.length!==o+i.place)return!1;var a=t.slice(i.place,o+i.place);if(s[0]===0)if(s[1]&128)s=s.slice(1);else return!1;if(a[0]===0)if(a[1]&128)a=a.slice(1);else return!1;return this.r=new lo(s),this.s=new lo(a),this.recoveryParam=null,!0};function Ff(t,r){if(r<128){t.push(r);return}var i=1+(Math.log(r)/Math.LN2>>>3);for(t.push(i|128);--i;)t.push(r>>>(i<<3)&255);t.push(r)}Df.prototype.toDER=function(t){var r=this.r.toArray(),i=this.s.toArray();for(r[0]&128&&(r=[0].concat(r)),i[0]&128&&(i=[0].concat(i)),r=$f(r),i=$f(i);!i[0]&&!(i[1]&128);)i=i.slice(1);var n=[2];Ff(n,r.length),n=n.concat(r),n.push(2),Ff(n,i.length);var e=n.concat(i),s=[48];return Ff(s,e.length),s=s.concat(e),vf.encode(s,t)};var qf=function(){throw new Error("unsupported")},Lf=vf.assert;function Kf(t){if(!(this instanceof Kf))return new Kf(t);typeof t=="string"&&(Lf(Object.prototype.hasOwnProperty.call(Nf,t),"Unknown curve "+t),t=Nf[t]),t instanceof Nf.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}var Hf=Kf;Kf.prototype.keyPair=function(t){return new Rf(this,t)},Kf.prototype.keyFromPrivate=function(t,r){return Rf.fromPrivate(this,t,r)},Kf.prototype.keyFromPublic=function(t,r){return Rf.fromPublic(this,t,r)},Kf.prototype.genKeyPair=function(t){t||(t={});for(var r=new jf({hash:this.hash,pers:t.pers,persEnc:t.persEnc||"utf8",entropy:t.entropy||qf(),entropyEnc:t.entropy&&t.entropyEnc||"utf8",nonce:this.n.toArray()}),i=this.n.byteLength(),n=this.n.sub(new lo(2));;){var e=new lo(r.generate(i));if(!(e.cmp(n)>0))return e.iaddn(1),this.keyFromPrivate(e)}},Kf.prototype._truncateToN=function(t,r){var i=t.byteLength()*8-this.n.bitLength();return i>0&&(t=t.ushrn(i)),!r&&t.cmp(this.n)>=0?t.sub(this.n):t},Kf.prototype.sign=function(t,r,i,n){typeof i=="object"&&(n=i,i=null),n||(n={}),r=this.keyFromPrivate(r,i),t=this._truncateToN(new lo(t,16));for(var e=this.n.byteLength(),s=r.getPrivate().toArray("be",e),o=t.toArray("be",e),a=new jf({hash:this.hash,entropy:s,nonce:o,pers:n.pers,persEnc:n.persEnc||"utf8"}),h=this.n.sub(new lo(1)),u=0;;u++){var f=n.k?n.k(u):new lo(a.generate(this.n.byteLength()));if(f=this._truncateToN(f,!0),!(f.cmpn(1)<=0||f.cmp(h)>=0)){var c=this.g.mul(f);if(!c.isInfinity()){var l=c.getX(),d=l.umod(this.n);if(d.cmpn(0)!==0){var v=f.invm(this.n).mul(d.mul(r.getPrivate()).iadd(t));if(v=v.umod(this.n),v.cmpn(0)!==0){var w=(c.getY().isOdd()?1:0)|(l.cmp(d)!==0?2:0);return n.canonical&&v.cmp(this.nh)>0&&(v=this.n.sub(v),w^=1),new Uf({r:d,s:v,recoveryParam:w})}}}}}},Kf.prototype.verify=function(t,r,i,n){t=this._truncateToN(new lo(t,16)),i=this.keyFromPublic(i,n),r=new Uf(r,"hex");var e=r.r,s=r.s;if(e.cmpn(1)<0||e.cmp(this.n)>=0||s.cmpn(1)<0||s.cmp(this.n)>=0)return!1;var o=s.invm(this.n),a=o.mul(t).umod(this.n),h=o.mul(e).umod(this.n),u;return this.curve._maxwellTrick?(u=this.g.jmulAdd(a,i.getPublic(),h),u.isInfinity()?!1:u.eqXToP(e)):(u=this.g.mulAdd(a,i.getPublic(),h),u.isInfinity()?!1:u.getX().umod(this.n).cmp(e)===0)},Kf.prototype.recoverPubKey=function(t,r,i,n){Lf((3&i)===i,"The recovery param is more than two bits"),r=new Uf(r,n);var e=this.n,s=new lo(t),o=r.r,a=r.s,h=i&1,u=i>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&u)throw new Error("Unable to find sencond key candinate");u?o=this.curve.pointFromX(o.add(this.curve.n),h):o=this.curve.pointFromX(o,h);var f=r.r.invm(e),c=e.sub(s).mul(f).umod(e),l=a.mul(f).umod(e);return this.g.mulAdd(c,o,l)},Kf.prototype.getKeyRecoveryParam=function(t,r,i,n){if(r=new Uf(r,n),r.recoveryParam!==null)return r.recoveryParam;for(var e=0;e<4;e++){var s;try{s=this.recoverPubKey(t,r,e)}catch{continue}if(s.eq(i))return e}throw new Error("Unable to find valid recovery factor")};var Gf=uf((function(t,r){var i=r;i.version="6.5.4",i.utils=vf,i.rand=function(){throw new Error("unsupported")},i.curve=Sf,i.curves=Nf,i.ec=Hf,i.eddsa=null})),Qf=Gf.ec;const Vf="signing-key/5.7.0",zf=new Ks(Vf);let Jf=null;function Yf(){return Jf||(Jf=new Qf("secp256k1")),Jf}class Wf{constructor(t){xa(this,"curve","secp256k1"),xa(this,"privateKey",io(t)),no(this.privateKey)!==32&&zf.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");const r=Yf().keyFromPrivate(Ws(this.privateKey));xa(this,"publicKey","0x"+r.getPublic(!1,"hex")),xa(this,"compressedPublicKey","0x"+r.getPublic(!0,"hex")),xa(this,"_isSigningKey",!0)}_addPoint(t){const r=Yf().keyFromPublic(Ws(this.publicKey)),i=Yf().keyFromPublic(Ws(t));return"0x"+r.pub.add(i.pub).encodeCompressed("hex")}signDigest(t){const r=Yf().keyFromPrivate(Ws(this.privateKey)),i=Ws(t);i.length!==32&&zf.throwArgumentError("bad digest length","digest",t);const n=r.sign(i,{canonical:!0});return oo({recoveryParam:n.recoveryParam,r:so("0x"+n.r.toString(16),32),s:so("0x"+n.s.toString(16),32)})}computeSharedSecret(t){const r=Yf().keyFromPrivate(Ws(this.privateKey)),i=Yf().keyFromPublic(Ws(Zf(t)));return so("0x"+r.derive(i.getPublic()).toString(16),32)}static isSigningKey(t){return!!(t&&t._isSigningKey)}}function Xf(t,r){const i=oo(r),n={r:Ws(i.r),s:Ws(i.s)};return"0x"+Yf().recoverPubKey(Ws(t),n,i.recoveryParam).encode("hex",!1)}function Zf(t,r){const i=Ws(t);if(i.length===32){const t=new Wf(i);return r?"0x"+Yf().keyFromPrivate(i).getPublic(!0,"hex"):t.publicKey}else{if(i.length===33)return r?io(i):"0x"+Yf().keyFromPublic(i).getPublic(!1,"hex");if(i.length===65)return r?"0x"+Yf().keyFromPublic(i).getPublic(!0,"hex"):io(i)}return zf.throwArgumentError("invalid public or private key","key","[REDACTED]")}const tc="transactions/5.7.0";new Ks(tc);var rc;(function(t){t[t.legacy=0]="legacy",t[t.eip2930=1]="eip2930",t[t.eip1559=2]="eip1559"})(rc||(rc={}));function ic(t){const r=Zf(t);return Ca(eo(ao(eo(r,1)),12))}function nc(t,r){return ic(Xf(Ws(t),r))}const ec="https://rpc.walletconnect.com/v1";async function sc(t,r,i,n,e,s){switch(i.t){case"eip191":return oc(t,r,i.s);case"eip1271":return await ac(t,r,i.s,n,e,s);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${i.t}`)}}function oc(t,r,i){return nc(ga(r),i).toLowerCase()===t.toLowerCase()}async function ac(t,r,i,n,e,s){try{const o="0x1626ba7e",a="0000000000000000000000000000000000000000000000000000000000000040",h="0000000000000000000000000000000000000000000000000000000000000041",u=i.substring(2),f=ga(r).substring(2),c=o+f+a+h+u,l=await fetch(`${s||ec}/?chainId=${n}&projectId=${e}`,{method:"POST",body:JSON.stringify({id:hc(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:c},"latest"]})}),{result:d}=await l.json();return d?d.slice(0,o.length).toLowerCase()===o.toLowerCase():!1}catch(t){return console.error("isValidEip1271Signature: ",t),!1}}function hc(){return Date.now()+Math.floor(Math.random()*1e3)}var uc=Object.defineProperty,fc=Object.defineProperties,cc=Object.getOwnPropertyDescriptors,lc=Object.getOwnPropertySymbols,dc=Object.prototype.hasOwnProperty,vc=Object.prototype.propertyIsEnumerable,wc=(t,r,i)=>r in t?uc(t,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[r]=i,pc=(t,r)=>{for(var i in r||(r={}))dc.call(r,i)&&wc(t,i,r[i]);if(lc)for(var i of lc(r))vc.call(r,i)&&wc(t,i,r[i]);return t},yc=(t,r)=>fc(t,cc(r));const bc="did:pkh:",gc=t=>t?.split(":"),mc=t=>{const r=t&&gc(t);if(r)return t.includes(bc)?r[3]:r[1]},Ac=t=>{const r=t&&gc(t);if(r)return r[2]+":"+r[3]},Ec=t=>{const r=t&&gc(t);if(r)return r.pop()};async function Mc(t){const{cacao:r,projectId:i}=t,{s:n,p:e}=r,s=_c(e,e.iss),o=Ec(e.iss);return await sc(o,s,n,mc(e.iss),i)}const _c=(t,r)=>{const i=`${t.domain} wants you to sign in with your Ethereum account:`,n=Ec(r);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let e=t.statement||void 0;const s=`URI: ${t.aud||t.uri}`,o=`Version: ${t.version}`,a=`Chain ID: ${mc(r)}`,h=`Nonce: ${t.nonce}`,u=`Issued At: ${t.iat}`,f=t.resources?`Resources:${t.resources.map((t=>`\n- ${t}`)).join("")}`:void 0,c=$c(t.resources);if(c){const t=xc(c);e=Uc(e,t)}return[i,n,"",e,"",s,o,a,h,u,f].filter((t=>t!=null)).join(`\n`)};function Ic(t){return v.Buffer.from(JSON.stringify(t)).toString("base64")}function Oc(t){return JSON.parse(v.Buffer.from(t,"base64").toString("utf-8"))}function Sc(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const r=Object.keys(t.att);if(!(r!=null&&r.length))throw new Error("No resources found in `att` property");r.forEach((r=>{const i=t.att[r];if(Array.isArray(i))throw new Error(`Resource must be an object: ${r}`);if(typeof i!="object")throw new Error(`Resource must be an object: ${r}`);if(!Object.keys(i).length)throw new Error(`Resource object is empty: ${r}`);Object.keys(i).forEach((t=>{const r=i[t];if(!Array.isArray(r))throw new Error(`Ability limits ${t} must be an array of objects, found: ${r}`);if(!r.length)throw new Error(`Value of ${t} is empty array, must be an array with objects`);r.forEach((r=>{if(typeof r!="object")throw new Error(`Ability limits (${t}) must be an array of objects, found: ${r}`)}))}))}))}function Nc(t,r,i,n={}){return i?.sort(((t,r)=>t.localeCompare(r))),{att:{[t]:Cc(r,i,n)}}}function Cc(t,r,i={}){r=r?.sort(((t,r)=>t.localeCompare(r)));const n=r.map((r=>({[`${t}/${r}`]:[i]})));return Object.assign({},...n)}function jc(t){return Sc(t),`urn:recap:${Ic(t).replace(/=/g,"")}`}function xc(t){const r=Oc(t.replace("urn:recap:",""));return Sc(r),r}function Pc(t,r,i){const n=Nc(t,r,i);return jc(n)}function Rc(t){return t&&t.includes("urn:recap:")}function Tc(t,r){const i=xc(t),n=xc(r),e=Dc(i,n);return jc(e)}function Dc(t,r){Sc(t),Sc(r);const i=Object.keys(t.att).concat(Object.keys(r.att)).sort(((t,r)=>t.localeCompare(r))),n={att:{}};return i.forEach((i=>{var e,s;Object.keys(((e=t.att)==null?void 0:e[i])||{}).concat(Object.keys(((s=r.att)==null?void 0:s[i])||{})).sort(((t,r)=>t.localeCompare(r))).forEach((e=>{var s,o;n.att[i]=yc(pc({},n.att[i]),{[e]:((s=t.att[i])==null?void 0:s[e])||((o=r.att[i])==null?void 0:o[e])})}))})),n}function Uc(t="",r){Sc(r);const i="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(i))return t;const n=[];let e=0;Object.keys(r.att).forEach((t=>{const i=Object.keys(r.att[t]).map((t=>({ability:t.split("/")[0],action:t.split("/")[1]})));i.sort(((t,r)=>t.action.localeCompare(r.action)));const s={};i.forEach((t=>{s[t.ability]||(s[t.ability]=[]),s[t.ability].push(t.action)}));const o=Object.keys(s).map((r=>(e++,`(${e}) '${r}': '${s[r].join("', '")}' for '${t}'.`)));n.push(o.join(", ").replace(".,","."))}));const s=n.join(" "),o=`${i}${s}`;return`${t?t+" ":""}${o}`}function Bc(t){var r;const i=xc(t);Sc(i);const n=(r=i.att)==null?void 0:r.eip155;return n?Object.keys(n).map((t=>t.split("/")[1])):[]}function kc(t){const r=xc(t);Sc(r);const i=[];return Object.values(r.att).forEach((t=>{Object.values(t).forEach((t=>{var r;(r=t?.[0])!=null&&r.chains&&i.push(t[0].chains)}))})),[...new Set(i.flat())]}function $c(t){if(!t)return;const r=t?.[t.length-1];return Rc(r)?r:void 0}const Fc="base10",qc="base16",Lc="base64pad",Kc="utf8",Hc=0,Gc=1,Qc=0,Vc=1,zc=12,Jc=32;function Yc(){const t=Ii.generateKeyPair();return{privateKey:qe(t.secretKey,qc),publicKey:qe(t.publicKey,qc)}}function Wc(){const t=fi.randomBytes(Jc);return qe(t,qc)}function Xc(t,r){const i=Ii.sharedKey(Fe(t,qc),Fe(r,qc),!0),n=new ui(_i.SHA256,i).expand(Jc);return qe(n,qc)}function Zc(t){const r=_i.hash(Fe(t,qc));return qe(r,qc)}function tl(t){const r=_i.hash(Fe(t,Kc));return qe(r,qc)}function rl(t){return Fe(`${t}`,Fc)}function il(t){return Number(qe(t,Fc))}function nl(t){const r=rl(typeof t.type<"u"?t.type:Hc);if(il(r)===Gc&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const i=typeof t.senderPublicKey<"u"?Fe(t.senderPublicKey,qc):void 0,n=typeof t.iv<"u"?Fe(t.iv,qc):fi.randomBytes(zc),e=new rr.ChaCha20Poly1305(Fe(t.symKey,qc)).seal(n,Fe(t.message,Kc));return sl({type:r,sealed:e,iv:n,senderPublicKey:i})}function el(t){const r=new rr.ChaCha20Poly1305(Fe(t.symKey,qc)),{sealed:i,iv:n}=ol(t.encoded),e=r.open(n,i);if(e===null)throw new Error("Failed to decrypt");return qe(e,Kc)}function sl(t){if(il(t.type)===Gc){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return qe($e([t.type,t.senderPublicKey,t.iv,t.sealed]),Lc)}return qe($e([t.type,t.iv,t.sealed]),Lc)}function ol(t){const r=Fe(t,Lc),i=r.slice(Qc,Vc),n=Vc;if(il(i)===Gc){const t=n+Jc,e=t+zc,s=r.slice(n,t),o=r.slice(t,e),a=r.slice(e);return{type:i,sealed:a,iv:o,senderPublicKey:s}}const e=n+zc,s=r.slice(n,e),o=r.slice(e);return{type:i,sealed:o,iv:s}}function al(t,r){const i=ol(t);return hl({type:il(i.type),senderPublicKey:typeof i.senderPublicKey<"u"?qe(i.senderPublicKey,qc):void 0,receiverPublicKey:r?.receiverPublicKey})}function hl(t){const r=t?.type||Hc;if(r===Gc){if(typeof t?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof t?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:r,senderPublicKey:t?.senderPublicKey,receiverPublicKey:t?.receiverPublicKey}}function ul(t){return t.type===Gc&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}const fl="irn";function cl(t){return t?.relay||{protocol:fl}}function ll(t){const r=Le[t];if(typeof r>"u")throw new Error(`Relay Protocol not supported: ${t}`);return r}var dl=Object.defineProperty,vl=Object.defineProperties,wl=Object.getOwnPropertyDescriptors,pl=Object.getOwnPropertySymbols,yl=Object.prototype.hasOwnProperty,bl=Object.prototype.propertyIsEnumerable,gl=(t,r,i)=>r in t?dl(t,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[r]=i,ml=(t,r)=>{for(var i in r||(r={}))yl.call(r,i)&&gl(t,i,r[i]);if(pl)for(var i of pl(r))bl.call(r,i)&&gl(t,i,r[i]);return t},Al=(t,r)=>vl(t,wl(r));function El(t,r="-"){const i={},n="relay"+r;return Object.keys(t).forEach((r=>{if(r.startsWith(n)){const e=r.replace(n,""),s=t[r];i[e]=s}})),i}function Ml(t){t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const r=t.indexOf(":"),i=t.indexOf("?")!==-1?t.indexOf("?"):void 0,n=t.substring(0,r),e=t.substring(r+1,i).split("@"),s=typeof i<"u"?t.substring(i):"",o=Ht.parse(s),a=typeof o.methods=="string"?o.methods.split(","):void 0;return{protocol:n,topic:_l(e[0]),version:parseInt(e[1],10),symKey:o.symKey,relay:El(o),methods:a,expiryTimestamp:o.expiryTimestamp?parseInt(o.expiryTimestamp,10):void 0}}function _l(t){return t.startsWith("//")?t.substring(2):t}function Il(t,r="-"){const i="relay",n={};return Object.keys(t).forEach((e=>{const s=i+r+e;t[e]&&(n[s]=t[e])})),n}function Ol(t){return`${t.protocol}:${t.topic}@${t.version}?`+Ht.stringify(ml(Al(ml({symKey:t.symKey},Il(t.relay)),{expiryTimestamp:t.expiryTimestamp}),t.methods?{methods:t.methods.join(",")}:{}))}function Sl(t){const r=[];return t.forEach((t=>{const[i,n]=t.split(":");r.push(`${i}:${n}`)})),r}function Nl(t){const r=[];return Object.values(t).forEach((t=>{r.push(...Sl(t.accounts))})),r}function Cl(t,r){const i=[];return Object.values(t).forEach((t=>{Sl(t.accounts).includes(r)&&i.push(...t.methods)})),i}function jl(t,r){const i=[];return Object.values(t).forEach((t=>{Sl(t.accounts).includes(r)&&i.push(...t.events)})),i}function xl(t){return t.includes(":")}function Pl(t){return xl(t)?t.split(":")[0]:t}function Rl(t){const r={};return t?.forEach((t=>{const[i,n]=t.split(":");r[i]||(r[i]={accounts:[],chains:[],events:[]}),r[i].accounts.push(t),r[i].chains.push(`${i}:${n}`)})),r}function Tl(t,r){r=r.map((t=>t.replace("did:pkh:","")));const i=Rl(r);for(const[r,n]of Object.entries(i))n.methods?n.methods=Is(n.methods,t):n.methods=t,n.events=["chainChanged","accountsChanged"];return i}const Dl={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},Ul={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function Bl(t,r){const{message:i,code:n}=Ul[t];return{message:r?`${i} ${r}`:i,code:n}}function kl(t,r){const{message:i,code:n}=Dl[t];return{message:r?`${i} ${r}`:i,code:n}}function $l(t,r){return Array.isArray(t)?typeof r<"u"&&t.length?t.every(r):!0:!1}function Fl(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function ql(t){return typeof t>"u"}function Ll(t,r){return r&&ql(t)?!0:typeof t=="string"&&!!t.trim().length}function Kl(t,r){return r&&ql(t)?!0:typeof t=="number"&&!isNaN(t)}function Hl(t,r){const{requiredNamespaces:i}=r,n=Object.keys(t.namespaces),e=Object.keys(i);let s=!0;return ds(e,n)?(n.forEach((r=>{const{accounts:n,methods:e,events:o}=t.namespaces[r],a=Sl(n),h=i[r];(!ds(Qe(r,h),a)||!ds(h.methods,e)||!ds(h.events,o))&&(s=!1)})),s):!1}function Gl(t){return Ll(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function Ql(t){if(Ll(t,!1)&&t.includes(":")){const r=t.split(":");if(r.length===3){const t=r[0]+":"+r[1];return!!r[2]&&Gl(t)}}return!1}function Vl(t){if(Ll(t,!1))try{return typeof new URL(t)<"u"}catch{return!1}return!1}function zl(t){var r;return(r=t?.proposer)==null?void 0:r.publicKey}function Jl(t){return t?.topic}function Yl(t,r){let i=null;return Ll(t?.publicKey,!1)||(i=Bl("MISSING_OR_INVALID",`${r} controller public key should be a string`)),i}function Wl(t){let r=!0;return $l(t)?t.length&&(r=t.every((t=>Ll(t,!1)))):r=!1,r}function Xl(t,r,i){let n=null;return $l(r)&&r.length?r.forEach((t=>{n||Gl(t)||(n=kl("UNSUPPORTED_CHAINS",`${i}, chain ${t} should be a string and conform to "namespace:chainId" format`))})):Gl(t)||(n=kl("UNSUPPORTED_CHAINS",`${i}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),n}function Zl(t,r,i){let n=null;return Object.entries(t).forEach((([t,e])=>{if(n)return;const s=Xl(t,Qe(t,e),`${r} ${i}`);s&&(n=s)})),n}function td(t,r){let i=null;return $l(t)?t.forEach((t=>{i||Ql(t)||(i=kl("UNSUPPORTED_ACCOUNTS",`${r}, account ${t} should be a string and conform to "namespace:chainId:address" format`))})):i=kl("UNSUPPORTED_ACCOUNTS",`${r}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),i}function rd(t,r){let i=null;return Object.values(t).forEach((t=>{if(i)return;const n=td(t?.accounts,`${r} namespace`);n&&(i=n)})),i}function id(t,r){let i=null;return Wl(t?.methods)?Wl(t?.events)||(i=kl("UNSUPPORTED_EVENTS",`${r}, events should be an array of strings or empty array for no events`)):i=kl("UNSUPPORTED_METHODS",`${r}, methods should be an array of strings or empty array for no methods`),i}function nd(t,r){let i=null;return Object.values(t).forEach((t=>{if(i)return;const n=id(t,`${r}, namespace`);n&&(i=n)})),i}function ed(t,r,i){let n=null;if(t&&Fl(t)){const e=nd(t,r);e&&(n=e);const s=Zl(t,r,i);s&&(n=s)}else n=Bl("MISSING_OR_INVALID",`${r}, ${i} should be an object with data`);return n}function sd(t,r){let i=null;if(t&&Fl(t)){const n=nd(t,r);n&&(i=n);const e=rd(t,r);e&&(i=e)}else i=Bl("MISSING_OR_INVALID",`${r}, namespaces should be an object with data`);return i}function od(t){return Ll(t.protocol,!0)}function ad(t,r){let i=!1;return r&&!t?i=!0:t&&$l(t)&&t.length&&t.forEach((t=>{i=od(t)})),i}function hd(t){return typeof t=="number"}function ud(t){return typeof t<"u"&&typeof t!==null}function fd(t){return!(!t||typeof t!="object"||!t.code||!Kl(t.code,!1)||!t.message||!Ll(t.message,!1))}function cd(t){return!(ql(t)||!Ll(t.method,!1))}function ld(t){return!(ql(t)||ql(t.result)&&ql(t.error)||!Kl(t.id,!1)||!Ll(t.jsonrpc,!1))}function dd(t){return!(ql(t)||!Ll(t.name,!1))}function vd(t,r){return!(!Gl(r)||!Nl(t).includes(r))}function wd(t,r,i){return Ll(i,!1)?Cl(t,r).includes(i):!1}function pd(t,r,i){return Ll(i,!1)?jl(t,r).includes(i):!1}function yd(t,r,i){let n=null;const e=bd(t),s=md(r),o=Object.keys(e),a=Object.keys(s),h=gd(Object.keys(t)),u=gd(Object.keys(r)),f=h.filter((t=>!u.includes(t)));return f.length&&(n=Bl("NON_CONFORMING_NAMESPACES",`${i} namespaces keys don't satisfy requiredNamespaces.\n      Required: ${f.toString()}\n      Received: ${Object.keys(r).toString()}`)),ds(o,a)||(n=Bl("NON_CONFORMING_NAMESPACES",`${i} namespaces chains don't satisfy required namespaces.\n      Required: ${o.toString()}\n      Approved: ${a.toString()}`)),Object.keys(r).forEach((t=>{if(!t.includes(":")||n)return;const e=Sl(r[t].accounts);e.includes(t)||(n=Bl("NON_CONFORMING_NAMESPACES",`${i} namespaces accounts don't satisfy namespace accounts for ${t}\n        Required: ${t}\n        Approved: ${e.toString()}`))})),o.forEach((t=>{n||(ds(e[t].methods,s[t].methods)?ds(e[t].events,s[t].events)||(n=Bl("NON_CONFORMING_NAMESPACES",`${i} namespaces events don't satisfy namespace events for ${t}`)):n=Bl("NON_CONFORMING_NAMESPACES",`${i} namespaces methods don't satisfy namespace methods for ${t}`))})),n}function bd(t){const r={};return Object.keys(t).forEach((i=>{var n;i.includes(":")?r[i]=t[i]:(n=t[i].chains)==null||n.forEach((n=>{r[n]={methods:t[i].methods,events:t[i].events}}))})),r}function gd(t){return[...new Set(t.map((t=>t.includes(":")?t.split(":")[0]:t)))]}function md(t){const r={};return Object.keys(t).forEach((i=>{if(i.includes(":"))r[i]=t[i];else{const n=Sl(t[i].accounts);n?.forEach((n=>{r[n]={accounts:t[i].accounts.filter((t=>t.includes(`${n}:`))),methods:t[i].methods,events:t[i].events}}))}})),r}function Ad(t,r){return Kl(t,!1)&&t<=r.max&&t>=r.min}function Ed(){const t=ss();return new Promise((r=>{switch(t){case ts.browser:r(Md());break;case ts.reactNative:r(_d());break;case ts.node:r(Id());break;default:r(!0)}}))}function Md(){return es()&&navigator?.onLine}async function _d(){if(ns()&&typeof d<"u"&&d!=null&&d.NetInfo){const t=await(d==null?void 0:d.NetInfo.fetch());return t?.isConnected}return!0}function Id(){return!0}function Od(t){switch(ss()){case ts.browser:Sd(t);break;case ts.reactNative:Nd(t);break}}function Sd(t){!ns()&&es()&&(window.addEventListener("online",(()=>t(!0))),window.addEventListener("offline",(()=>t(!1))))}function Nd(t){ns()&&typeof d<"u"&&d!=null&&d.NetInfo&&d?.NetInfo.addEventListener((r=>t(r?.isConnected)))}const Cd={};class jd{static get(t){return Cd[t]}static set(t,r){Cd[t]=r}static delete(t){delete Cd[t]}}const xd=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/;const Pd=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;const Rd=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function Td(t,r){if(t==="__proto__"||t==="constructor"&&r&&typeof r==="object"&&"prototype"in r){Dd(t);return}return r}function Dd(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function Ud(t,r={}){if(typeof t!=="string"){return t}const i=t.trim();if(t[0]==='"'&&t.endsWith('"')&&!t.includes("\\")){return i.slice(1,-1)}if(i.length<=9){const t=i.toLowerCase();if(t==="true"){return true}if(t==="false"){return false}if(t==="undefined"){return void 0}if(t==="null"){return null}if(t==="nan"){return Number.NaN}if(t==="infinity"){return Number.POSITIVE_INFINITY}if(t==="-infinity"){return Number.NEGATIVE_INFINITY}}if(!Rd.test(t)){if(r.strict){throw new SyntaxError("[destr] Invalid JSON")}return t}try{if(xd.test(t)||Pd.test(t)){if(r.strict){throw new Error("[destr] Possible prototype pollution")}return JSON.parse(t,Td)}return JSON.parse(t)}catch(i){if(r.strict){throw i}return t}}function Bd(t){if(!t||typeof t.then!=="function"){return Promise.resolve(t)}return t}function kd(t,...r){try{return Bd(t(...r))}catch(t){return Promise.reject(t)}}function $d(t){const r=typeof t;return t===null||r!=="object"&&r!=="function"}function Fd(t){const r=Object.getPrototypeOf(t);return!r||r.isPrototypeOf(Object)}function qd(t){if($d(t)){return String(t)}if(Fd(t)||Array.isArray(t)){return JSON.stringify(t)}if(typeof t.toJSON==="function"){return qd(t.toJSON())}throw new Error("[unstorage] Cannot stringify value!")}function Ld(){if(typeof Buffer===void 0){throw new TypeError("[unstorage] Buffer is not supported!")}}const Kd="base64:";function Hd(t){if(typeof t==="string"){return t}Ld();const r=Buffer.from(t).toString("base64");return Kd+r}function Gd(t){if(typeof t!=="string"){return t}if(!t.startsWith(Kd)){return t}Ld();return Buffer.from(t.slice(Kd.length),"base64")}function Qd(t){if(!t){return""}return t.split("?")[0].replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,"")}function Vd(...t){return Qd(t.join(":"))}function zd(t){t=Qd(t);return t?t+":":""}function Jd(t){return t}const Yd="memory";const Wd=Jd((()=>{const t=new Map;return{name:Yd,options:{},hasItem(r){return t.has(r)},getItem(r){return t.get(r)??null},getItemRaw(r){return t.get(r)??null},setItem(r,i){t.set(r,i)},setItemRaw(r,i){t.set(r,i)},removeItem(r){t.delete(r)},getKeys(){return Array.from(t.keys())},clear(){t.clear()},dispose(){t.clear()}}}));function Xd(t={}){const r={mounts:{"":t.driver||Wd()},mountpoints:[""],watching:false,watchListeners:[],unwatch:{}};const i=t=>{for(const i of r.mountpoints){if(t.startsWith(i)){return{base:i,relativeKey:t.slice(i.length),driver:r.mounts[i]}}}return{base:"",relativeKey:t,driver:r.mounts[""]}};const n=(t,i)=>r.mountpoints.filter((r=>r.startsWith(t)||i&&t.startsWith(r))).map((i=>({relativeBase:t.length>i.length?t.slice(i.length):void 0,mountpoint:i,driver:r.mounts[i]})));const e=(t,i)=>{if(!r.watching){return}i=Qd(i);for(const n of r.watchListeners){n(t,i)}};const s=async()=>{if(r.watching){return}r.watching=true;for(const t in r.mounts){r.unwatch[t]=await Zd(r.mounts[t],e,t)}};const o=async()=>{if(!r.watching){return}for(const t in r.unwatch){await r.unwatch[t]()}r.unwatch={};r.watching=false};const a=(t,r,n)=>{const e=new Map;const s=t=>{let r=e.get(t.base);if(!r){r={driver:t.driver,base:t.base,items:[]};e.set(t.base,r)}return r};for(const n of t){const t=typeof n==="string";const e=Qd(t?n:n.key);const o=t?void 0:n.value;const a=t||!n.options?r:{...r,...n.options};const h=i(e);s(h).items.push({key:e,value:o,relativeKey:h.relativeKey,options:a})}return Promise.all([...e.values()].map((t=>n(t)))).then((t=>t.flat()))};const h={hasItem(t,r={}){t=Qd(t);const{relativeKey:n,driver:e}=i(t);return kd(e.hasItem,n,r)},getItem(t,r={}){t=Qd(t);const{relativeKey:n,driver:e}=i(t);return kd(e.getItem,n,r).then((t=>Ud(t)))},getItems(t,r){return a(t,r,(t=>{if(t.driver.getItems){return kd(t.driver.getItems,t.items.map((t=>({key:t.relativeKey,options:t.options}))),r).then((r=>r.map((r=>({key:Vd(t.base,r.key),value:Ud(r.value)})))))}return Promise.all(t.items.map((r=>kd(t.driver.getItem,r.relativeKey,r.options).then((t=>({key:r.key,value:Ud(t)}))))))}))},getItemRaw(t,r={}){t=Qd(t);const{relativeKey:n,driver:e}=i(t);if(e.getItemRaw){return kd(e.getItemRaw,n,r)}return kd(e.getItem,n,r).then((t=>Gd(t)))},async setItem(t,r,n={}){if(r===void 0){return h.removeItem(t)}t=Qd(t);const{relativeKey:s,driver:o}=i(t);if(!o.setItem){return}await kd(o.setItem,s,qd(r),n);if(!o.watch){e("update",t)}},async setItems(t,r){await a(t,r,(async t=>{if(t.driver.setItems){return kd(t.driver.setItems,t.items.map((t=>({key:t.relativeKey,value:qd(t.value),options:t.options}))),r)}if(!t.driver.setItem){return}await Promise.all(t.items.map((r=>kd(t.driver.setItem,r.relativeKey,qd(r.value),r.options))))}))},async setItemRaw(t,r,n={}){if(r===void 0){return h.removeItem(t,n)}t=Qd(t);const{relativeKey:s,driver:o}=i(t);if(o.setItemRaw){await kd(o.setItemRaw,s,r,n)}else if(o.setItem){await kd(o.setItem,s,Hd(r),n)}else{return}if(!o.watch){e("update",t)}},async removeItem(t,r={}){if(typeof r==="boolean"){r={removeMeta:r}}t=Qd(t);const{relativeKey:n,driver:s}=i(t);if(!s.removeItem){return}await kd(s.removeItem,n,r);if(r.removeMeta||r.removeMata){await kd(s.removeItem,n+"$",r)}if(!s.watch){e("remove",t)}},async getMeta(t,r={}){if(typeof r==="boolean"){r={nativeOnly:r}}t=Qd(t);const{relativeKey:n,driver:e}=i(t);const s=Object.create(null);if(e.getMeta){Object.assign(s,await kd(e.getMeta,n,r))}if(!r.nativeOnly){const t=await kd(e.getItem,n+"$",r).then((t=>Ud(t)));if(t&&typeof t==="object"){if(typeof t.atime==="string"){t.atime=new Date(t.atime)}if(typeof t.mtime==="string"){t.mtime=new Date(t.mtime)}Object.assign(s,t)}}return s},setMeta(t,r,i={}){return this.setItem(t+"$",r,i)},removeMeta(t,r={}){return this.removeItem(t+"$",r)},async getKeys(t,r={}){t=zd(t);const i=n(t,true);let e=[];const s=[];for(const t of i){const i=await kd(t.driver.getKeys,t.relativeBase,r);const n=i.map((r=>t.mountpoint+Qd(r))).filter((t=>!e.some((r=>t.startsWith(r)))));s.push(...n);e=[t.mountpoint,...e.filter((r=>!r.startsWith(t.mountpoint)))]}return t?s.filter((r=>r.startsWith(t)&&!r.endsWith("$"))):s.filter((t=>!t.endsWith("$")))},async clear(t,r={}){t=zd(t);await Promise.all(n(t,false).map((async t=>{if(t.driver.clear){return kd(t.driver.clear,t.relativeBase,r)}if(t.driver.removeItem){const i=await t.driver.getKeys(t.relativeBase||"",r);return Promise.all(i.map((i=>t.driver.removeItem(i,r))))}})))},async dispose(){await Promise.all(Object.values(r.mounts).map((t=>tv(t))))},async watch(t){await s();r.watchListeners.push(t);return async()=>{r.watchListeners=r.watchListeners.filter((r=>r!==t));if(r.watchListeners.length===0){await o()}}},async unwatch(){r.watchListeners=[];await o()},mount(t,i){t=zd(t);if(t&&r.mounts[t]){throw new Error(`already mounted at ${t}`)}if(t){r.mountpoints.push(t);r.mountpoints.sort(((t,r)=>r.length-t.length))}r.mounts[t]=i;if(r.watching){Promise.resolve(Zd(i,e,t)).then((i=>{r.unwatch[t]=i})).catch(console.error)}return h},async unmount(t,i=true){t=zd(t);if(!t||!r.mounts[t]){return}if(r.watching&&t in r.unwatch){r.unwatch[t]();delete r.unwatch[t]}if(i){await tv(r.mounts[t])}r.mountpoints=r.mountpoints.filter((r=>r!==t));delete r.mounts[t]},getMount(t=""){t=Qd(t)+":";const r=i(t);return{driver:r.driver,base:r.base}},getMounts(t="",r={}){t=Qd(t);const i=n(t,r.parents);return i.map((t=>({driver:t.driver,base:t.mountpoint})))}};return h}function Zd(t,r,i){return t.watch?t.watch(((t,n)=>r(t,i+n))):()=>{}}async function tv(t){if(typeof t.dispose==="function"){await kd(t.dispose)}}function rv(t){return new Promise((function(r,i){t.oncomplete=t.onsuccess=function(){return r(t.result)};t.onabort=t.onerror=function(){return i(t.error)}}))}function iv(t,r){var i=indexedDB.open(t);i.onupgradeneeded=function(){return i.result.createObjectStore(r)};var n=rv(i);return function(t,i){return n.then((function(n){return i(n.transaction(r,t).objectStore(r))}))}}var nv;function ev(){if(!nv){nv=iv("keyval-store","keyval")}return nv}function sv(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:ev();return r("readonly",(function(r){return rv(r.get(t))}))}function ov(t,r){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:ev();return i("readwrite",(function(i){i.put(r,t);return rv(i.transaction)}))}function av(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:ev();return r("readwrite",(function(r){r.delete(t);return rv(r.transaction)}))}function hv(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:ev();return t("readwrite",(function(t){t.clear();return rv(t.transaction)}))}function uv(t,r){t.openCursor().onsuccess=function(){if(!this.result)return;r(this.result);this.result.continue()};return rv(t.transaction)}function fv(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:ev();return t("readonly",(function(t){if(t.getAllKeys){return rv(t.getAllKeys())}var r=[];return uv(t,(function(t){return r.push(t.key)})).then((function(){return r}))}))}const cv=t=>JSON.stringify(t,((t,r)=>typeof r==="bigint"?r.toString()+"n":r));const lv=t=>{const r=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g;const i=t.replace(r,'$1"$2n"$3');return JSON.parse(i,((t,r)=>{const i=typeof r==="string"&&r.match(/^\d+n$/);if(i)return BigInt(r.substring(0,r.length-1));return r}))};function dv(t){if(typeof t!=="string"){throw new Error(`Cannot safe json parse value of type ${typeof t}`)}try{return lv(t)}catch(r){return t}}function vv(t){return typeof t==="string"?t:cv(t)||""}const wv="idb-keyval";var pv=(t={})=>{const r=t.base&&t.base.length>0?`${t.base}:`:"",i=t=>r+t;let n;return t.dbName&&t.storeName&&(n=iv(t.dbName,t.storeName)),{name:wv,options:t,async hasItem(t){return!(typeof await sv(i(t),n)>"u")},async getItem(t){return await sv(i(t),n)??null},setItem(t,r){return ov(i(t),r,n)},removeItem(t){return av(i(t),n)},getKeys(){return fv(n)},clear(){return hv(n)}}};const yv="WALLET_CONNECT_V2_INDEXED_DB",bv="keyvaluestorage";class gv{constructor(){this.indexedDb=Xd({driver:pv({dbName:yv,storeName:bv})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map((t=>[t.key,t.value]))}async getItem(t){const r=await this.indexedDb.getItem(t);if(r!==null)return r}async setItem(t,r){await this.indexedDb.setItem(t,vv(r))}async removeItem(t){await this.indexedDb.removeItem(t)}}var mv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof d<"u"?d:typeof self<"u"?self:{},Av={exports:{}};(function(){let t;function r(){}t=r,t.prototype.getItem=function(t){return this.hasOwnProperty(t)?String(this[t]):null},t.prototype.setItem=function(t,r){this[t]=String(r)},t.prototype.removeItem=function(t){delete this[t]},t.prototype.clear=function(){const t=this;Object.keys(t).forEach((function(r){t[r]=void 0,delete t[r]}))},t.prototype.key=function(t){return t=t||0,Object.keys(this)[t]},t.prototype.__defineGetter__("length",(function(){return Object.keys(this).length})),typeof mv<"u"&&mv.localStorage?Av.exports=mv.localStorage:typeof window<"u"&&window.localStorage?Av.exports=window.localStorage:Av.exports=new r})();function Ev(t){var r;return[t[0],dv((r=t[1])!=null?r:"")]}class Mv{constructor(){this.localStorage=Av.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(Ev)}async getItem(t){const r=this.localStorage.getItem(t);if(r!==null)return dv(r)}async setItem(t,r){this.localStorage.setItem(t,vv(r))}async removeItem(t){this.localStorage.removeItem(t)}}const _v="wc_storage_version",Iv=1,Ov=async(t,r,i)=>{const n=_v,e=await r.getItem(n);if(e&&e>=Iv){i(r);return}const s=await t.getKeys();if(!s.length){i(r);return}const o=[];for(;s.length;){const i=s.shift();if(!i)continue;const n=i.toLowerCase();if(n.includes("wc@")||n.includes("walletconnect")||n.includes("wc_")||n.includes("wallet_connect")){const n=await t.getItem(i);await r.setItem(i,n),o.push(i)}}await r.setItem(n,Iv),i(r),Sv(t,o)},Sv=async(t,r)=>{r.length&&r.forEach((async r=>{await t.removeItem(r)}))};class Nv{constructor(){this.initialized=!1,this.setInitialized=t=>{this.storage=t,this.initialized=!0};const t=new Mv;this.storage=t;try{const r=new gv;Ov(t,r,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(t){return await this.initialize(),this.storage.getItem(t)}async setItem(t,r){return await this.initialize(),this.storage.setItem(t,r)}async removeItem(t){return await this.initialize(),this.storage.removeItem(t)}async initialize(){this.initialized||await new Promise((t=>{const r=setInterval((()=>{this.initialized&&(clearInterval(r),t())}),20)}))}}class Cv{}class jv extends Cv{constructor(t){super()}}const xv=U.FIVE_SECONDS,Pv={pulse:"heartbeat_pulse"};class Rv extends jv{constructor(r){super(r),this.events=new t.exports.EventEmitter,this.interval=xv,this.interval=r?.interval||xv}static async init(t){const r=new Rv(t);return await r.init(),r}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}off(t,r){this.events.off(t,r)}removeListener(t,r){this.events.removeListener(t,r)}async initialize(){this.intervalRef=setInterval((()=>this.pulse()),U.toMiliseconds(this.interval))}pulse(){this.events.emit(Pv.pulse)}}function Tv(t){try{return JSON.stringify(t)}catch(t){return'"[Circular]"'}}var Dv=Uv;function Uv(t,r,i){var n=i&&i.stringify||Tv;var e=1;if(typeof t==="object"&&t!==null){var s=r.length+e;if(s===1)return t;var o=new Array(s);o[0]=n(t);for(var a=1;a<s;a++){o[a]=n(r[a])}return o.join(" ")}if(typeof t!=="string"){return t}var h=r.length;if(h===0)return t;var u="";var f=1-e;var c=-1;var l=t&&t.length||0;for(var d=0;d<l;){if(t.charCodeAt(d)===37&&d+1<l){c=c>-1?c:0;switch(t.charCodeAt(d+1)){case 100:case 102:if(f>=h)break;if(r[f]==null)break;if(c<d)u+=t.slice(c,d);u+=Number(r[f]);c=d+2;d++;break;case 105:if(f>=h)break;if(r[f]==null)break;if(c<d)u+=t.slice(c,d);u+=Math.floor(Number(r[f]));c=d+2;d++;break;case 79:case 111:case 106:if(f>=h)break;if(r[f]===undefined)break;if(c<d)u+=t.slice(c,d);var v=typeof r[f];if(v==="string"){u+="'"+r[f]+"'";c=d+2;d++;break}if(v==="function"){u+=r[f].name||"<anonymous>";c=d+2;d++;break}u+=n(r[f]);c=d+2;d++;break;case 115:if(f>=h)break;if(c<d)u+=t.slice(c,d);u+=String(r[f]);c=d+2;d++;break;case 37:if(c<d)u+=t.slice(c,d);u+="%";c=d+2;d++;f--;break}++f}++d}if(c===-1)return t;else if(c<l){u+=t.slice(c)}return u}const Bv=Dv;var kv=Lv;const $v=sw().console||{};const Fv={mapHttpRequest:Xv,mapHttpResponse:Xv,wrapRequestSerializer:Zv,wrapResponseSerializer:Zv,wrapErrorSerializer:Zv,req:Xv,res:Xv,err:Yv};function qv(t,r){if(Array.isArray(t)){const r=t.filter((function(t){return t!=="!stdSerializers.err"}));return r}else if(t===true){return Object.keys(r)}return false}function Lv(t){t=t||{};t.browser=t.browser||{};const r=t.browser.transmit;if(r&&typeof r.send!=="function"){throw Error("pino: transmit option must have a send function")}const i=t.browser.write||$v;if(t.browser.write)t.browser.asObject=true;const n=t.serializers||{};const e=qv(t.browser.serialize,n);let s=t.browser.serialize;if(Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1)s=false;const o=["error","fatal","warn","info","debug","trace"];if(typeof i==="function"){i.error=i.fatal=i.warn=i.info=i.debug=i.trace=i}if(t.enabled===false)t.level="silent";const a=t.level||"info";const h=Object.create(i);if(!h.log)h.log=tw;Object.defineProperty(h,"levelVal",{get:f});Object.defineProperty(h,"level",{get:c,set:l});const u={transmit:r,serialize:e,asObject:t.browser.asObject,levels:o,timestamp:Wv(t)};h.levels=Lv.levels;h.level=a;h.setMaxListeners=h.getMaxListeners=h.emit=h.addListener=h.on=h.prependListener=h.once=h.prependOnceListener=h.removeListener=h.removeAllListeners=h.listeners=h.listenerCount=h.eventNames=h.write=h.flush=tw;h.serializers=n;h._serialize=e;h._stdErrSerialize=s;h.child=d;if(r)h._logEvent=Jv();function f(){return this.level==="silent"?Infinity:this.levels.values[this.level]}function c(){return this._level}function l(t){if(t!=="silent"&&!this.levels.values[t]){throw Error("unknown level "+t)}this._level=t;Kv(u,h,"error","log");Kv(u,h,"fatal","error");Kv(u,h,"warn","error");Kv(u,h,"info","log");Kv(u,h,"debug","log");Kv(u,h,"trace","log")}function d(i,s){if(!i){throw new Error("missing bindings for child Pino")}s=s||{};if(e&&i.serializers){s.serializers=i.serializers}const o=s.serializers;if(e&&o){var a=Object.assign({},n,o);var h=t.browser.serialize===true?Object.keys(a):e;delete i.serializers;Qv([i],h,a,this._stdErrSerialize)}function u(t){this._childLevel=(t._childLevel|0)+1;this.error=Vv(t,i,"error");this.fatal=Vv(t,i,"fatal");this.warn=Vv(t,i,"warn");this.info=Vv(t,i,"info");this.debug=Vv(t,i,"debug");this.trace=Vv(t,i,"trace");if(a){this.serializers=a;this._serialize=h}if(r){this._logEvent=Jv([].concat(t._logEvent.bindings,i))}}u.prototype=this;return new u(this)}return h}Lv.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};Lv.stdSerializers=Fv;Lv.stdTimeFunctions=Object.assign({},{nullTime:rw,epochTime:iw,unixTime:nw,isoTime:ew});function Kv(t,r,i,n){const e=Object.getPrototypeOf(r);r[i]=r.levelVal>r.levels.values[i]?tw:e[i]?e[i]:$v[i]||$v[n]||tw;Hv(t,r,i)}function Hv(t,r,i){if(!t.transmit&&r[i]===tw)return;r[i]=function(n){return function e(){const s=t.timestamp();const o=new Array(arguments.length);const a=Object.getPrototypeOf&&Object.getPrototypeOf(this)===$v?$v:this;for(var h=0;h<o.length;h++)o[h]=arguments[h];if(t.serialize&&!t.asObject){Qv(o,this._serialize,this.serializers,this._stdErrSerialize)}if(t.asObject)n.call(a,Gv(this,i,o,s));else n.apply(a,o);if(t.transmit){const n=t.transmit.level||r.level;const e=Lv.levels.values[n];const a=Lv.levels.values[i];if(a<e)return;zv(this,{ts:s,methodLevel:i,methodValue:a,transmitLevel:n,transmitValue:Lv.levels.values[t.transmit.level||r.level],send:t.transmit.send,val:r.levelVal},o)}}}(r[i])}function Gv(t,r,i,n){if(t._serialize)Qv(i,t._serialize,t.serializers,t._stdErrSerialize);const e=i.slice();let s=e[0];const o={};if(n){o.time=n}o.level=Lv.levels.values[r];let a=(t._childLevel|0)+1;if(a<1)a=1;if(s!==null&&typeof s==="object"){while(a--&&typeof e[0]==="object"){Object.assign(o,e.shift())}s=e.length?Bv(e.shift(),e):undefined}else if(typeof s==="string")s=Bv(e.shift(),e);if(s!==undefined)o.msg=s;return o}function Qv(t,r,i,n){for(const e in t){if(n&&t[e]instanceof Error){t[e]=Lv.stdSerializers.err(t[e])}else if(typeof t[e]==="object"&&!Array.isArray(t[e])){for(const n in t[e]){if(r&&r.indexOf(n)>-1&&n in i){t[e][n]=i[n](t[e][n])}}}}}function Vv(t,r,i){return function(){const n=new Array(1+arguments.length);n[0]=r;for(var e=1;e<n.length;e++){n[e]=arguments[e-1]}return t[i].apply(this,n)}}function zv(t,r,i){const n=r.send;const e=r.ts;const s=r.methodLevel;const o=r.methodValue;const a=r.val;const h=t._logEvent.bindings;Qv(i,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===undefined?true:t._stdErrSerialize);t._logEvent.ts=e;t._logEvent.messages=i.filter((function(t){return h.indexOf(t)===-1}));t._logEvent.level.label=s;t._logEvent.level.value=o;n(s,t._logEvent,a);t._logEvent=Jv(h)}function Jv(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function Yv(t){const r={type:t.constructor.name,msg:t.message,stack:t.stack};for(const i in t){if(r[i]===undefined){r[i]=t[i]}}return r}function Wv(t){if(typeof t.timestamp==="function"){return t.timestamp}if(t.timestamp===false){return rw}return iw}function Xv(){return{}}function Zv(t){return t}function tw(){}function rw(){return false}function iw(){return Date.now()}function nw(){return Math.round(Date.now()/1e3)}function ew(){return new Date(Date.now()).toISOString()}function sw(){function t(t){return typeof t!=="undefined"&&t}try{if(typeof globalThis!=="undefined")return globalThis;Object.defineProperty(Object.prototype,"globalThis",{get:function(){delete Object.prototype.globalThis;return this.globalThis=this},configurable:true});return globalThis}catch(r){return t(self)||t(window)||t(this)||{}}}const ow={level:"info"},aw="custom_context",hw=1e3*1024;class uw{constructor(t){this.nodeValue=t,this.sizeInBytes=(new TextEncoder).encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}}class fw{constructor(t){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=t,this.sizeInBytes=0}append(t){const r=new uw(t);if(r.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${t} with size ${r.size}`);for(;this.size+r.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=r),this.tail=r):(this.head=r,this.tail=r),this.lengthInNodes++,this.sizeInBytes+=r.size}shift(){if(!this.head)return;const t=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=t.size}toArray(){const t=[];let r=this.head;for(;r!==null;)t.push(r.value),r=r.next;return t}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let t=this.head;return{next:()=>{if(!t)return{done:!0,value:null};const r=t.value;return t=t.next,{done:!1,value:r}}}}}class cw{constructor(t,r=hw){this.level=t??"error",this.levelValue=kv.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=r,this.logs=new fw(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(t,r){r===kv.levels.values.error?console.error(t):r===kv.levels.values.warn?console.warn(t):r===kv.levels.values.debug?console.debug(t):r===kv.levels.values.trace?console.trace(t):console.log(t)}appendToLogs(t){this.logs.append(vv({timestamp:(new Date).toISOString(),log:t}));const r=typeof t=="string"?JSON.parse(t).level:t.level;r>=this.levelValue&&this.forwardToConsole(t,r)}getLogs(){return this.logs}clearLogs(){this.logs=new fw(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(t){const r=this.getLogArray();return r.push(vv({extraMetadata:t})),new Blob(r,{type:"application/json"})}}class lw{constructor(t,r=hw){this.baseChunkLogger=new cw(t,r)}write(t){this.baseChunkLogger.appendToLogs(t)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(t){return this.baseChunkLogger.logsToBlob(t)}downloadLogsBlobInBrowser(t){const r=URL.createObjectURL(this.logsToBlob(t)),i=document.createElement("a");i.href=r,i.download=`walletconnect-logs-${(new Date).toISOString()}.txt`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r)}}class dw{constructor(t,r=hw){this.baseChunkLogger=new cw(t,r)}write(t){this.baseChunkLogger.appendToLogs(t)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(t){return this.baseChunkLogger.logsToBlob(t)}}var vw=Object.defineProperty,ww=Object.defineProperties,pw=Object.getOwnPropertyDescriptors,yw=Object.getOwnPropertySymbols,bw=Object.prototype.hasOwnProperty,gw=Object.prototype.propertyIsEnumerable,mw=(t,r,i)=>r in t?vw(t,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[r]=i,Aw=(t,r)=>{for(var i in r||(r={}))bw.call(r,i)&&mw(t,i,r[i]);if(yw)for(var i of yw(r))gw.call(r,i)&&mw(t,i,r[i]);return t},Ew=(t,r)=>ww(t,pw(r));function Mw(t){return Ew(Aw({},t),{level:t?.level||ow.level})}function _w(t,r=aw){return t[r]||""}function Iw(t,r,i=aw){return t[i]=r,t}function Ow(t,r=aw){let i="";return typeof t.bindings>"u"?i=_w(t,r):i=t.bindings().context||"",i}function Sw(t,r,i=aw){const n=Ow(t,i);return n.trim()?`${n}/${r}`:r}function Nw(t,r,i=aw){const n=Sw(t,r,i),e=t.child({context:n});return Iw(e,n,i)}function Cw(t){var r,i;const n=new lw((r=t.opts)==null?void 0:r.level,t.maxSizeInBytes);return{logger:kv(Ew(Aw({},t.opts),{level:"trace",browser:Ew(Aw({},(i=t.opts)==null?void 0:i.browser),{write:t=>n.write(t)})})),chunkLoggerController:n}}function jw(t){var r;const i=new dw((r=t.opts)==null?void 0:r.level,t.maxSizeInBytes);return{logger:kv(Ew(Aw({},t.opts),{level:"trace"}),i),chunkLoggerController:i}}function xw(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?Cw(t):jw(t)}class Pw extends Cv{constructor(t){super(),this.opts=t,this.protocol="wc",this.version=2}}class Rw extends Cv{constructor(t,r){super(),this.core=t,this.logger=r,this.records=new Map}}class Tw{constructor(t,r){this.logger=t,this.core=r}}class Dw extends Cv{constructor(t,r){super(),this.relayer=t,this.logger=r}}class Uw extends Cv{constructor(t){super()}}class Bw{constructor(t,r,i,n){this.core=t,this.logger=r,this.name=i}}class kw extends Cv{constructor(t,r){super(),this.relayer=t,this.logger=r}}class $w extends Cv{constructor(t,r){super(),this.core=t,this.logger=r}}class Fw{constructor(t,r){this.projectId=t,this.logger=r}}class qw{constructor(t,r){this.projectId=t,this.logger=r}}class Lw{constructor(t){this.opts=t,this.protocol="wc",this.version=2}}class Kw{constructor(t){this.client=t}}var Hw={};var Gw={};(function(t){Object.defineProperty(t,"__esModule",{value:true});var r=nr;var i=Ur;t.DIGEST_LENGTH=64;t.BLOCK_SIZE=128;var n=function(){function n(){this.digestLength=t.DIGEST_LENGTH;this.blockSize=t.BLOCK_SIZE;this._stateHi=new Int32Array(8);this._stateLo=new Int32Array(8);this._tempHi=new Int32Array(16);this._tempLo=new Int32Array(16);this._buffer=new Uint8Array(256);this._bufferLength=0;this._bytesHashed=0;this._finished=false;this.reset()}n.prototype._initState=function(){this._stateHi[0]=1779033703;this._stateHi[1]=3144134277;this._stateHi[2]=1013904242;this._stateHi[3]=2773480762;this._stateHi[4]=1359893119;this._stateHi[5]=2600822924;this._stateHi[6]=528734635;this._stateHi[7]=1541459225;this._stateLo[0]=4089235720;this._stateLo[1]=2227873595;this._stateLo[2]=4271175723;this._stateLo[3]=1595750129;this._stateLo[4]=2917565137;this._stateLo[5]=725511199;this._stateLo[6]=4215389547;this._stateLo[7]=327033209};n.prototype.reset=function(){this._initState();this._bufferLength=0;this._bytesHashed=0;this._finished=false;return this};n.prototype.clean=function(){i.wipe(this._buffer);i.wipe(this._tempHi);i.wipe(this._tempLo);this.reset()};n.prototype.update=function(r,i){if(i===void 0){i=r.length}if(this._finished){throw new Error("SHA512: can't update because hash was finished.")}var n=0;this._bytesHashed+=i;if(this._bufferLength>0){while(this._bufferLength<t.BLOCK_SIZE&&i>0){this._buffer[this._bufferLength++]=r[n++];i--}if(this._bufferLength===this.blockSize){s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize);this._bufferLength=0}}if(i>=this.blockSize){n=s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,r,n,i);i%=this.blockSize}while(i>0){this._buffer[this._bufferLength++]=r[n++];i--}return this};n.prototype.finish=function(t){if(!this._finished){var i=this._bytesHashed;var n=this._bufferLength;var e=i/536870912|0;var o=i<<3;var a=i%128<112?128:256;this._buffer[n]=128;for(var h=n+1;h<a-8;h++){this._buffer[h]=0}r.writeUint32BE(e,this._buffer,a-8);r.writeUint32BE(o,this._buffer,a-4);s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,a);this._finished=true}for(var h=0;h<this.digestLength/8;h++){r.writeUint32BE(this._stateHi[h],t,h*8);r.writeUint32BE(this._stateLo[h],t,h*8+4)}return this};n.prototype.digest=function(){var t=new Uint8Array(this.digestLength);this.finish(t);return t};n.prototype.saveState=function(){if(this._finished){throw new Error("SHA256: cannot save finished state")}return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):undefined,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}};n.prototype.restoreState=function(t){this._stateHi.set(t.stateHi);this._stateLo.set(t.stateLo);this._bufferLength=t.bufferLength;if(t.buffer){this._buffer.set(t.buffer)}this._bytesHashed=t.bytesHashed;this._finished=false;return this};n.prototype.cleanSavedState=function(t){i.wipe(t.stateHi);i.wipe(t.stateLo);if(t.buffer){i.wipe(t.buffer)}t.bufferLength=0;t.bytesHashed=0};return n}();t.SHA512=n;var e=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function s(t,i,n,s,o,a,h){var u=n[0],f=n[1],c=n[2],l=n[3],d=n[4],v=n[5],w=n[6],p=n[7],y=s[0],b=s[1],g=s[2],m=s[3],A=s[4],E=s[5],M=s[6],_=s[7];var I,O;var S,N;var C,j,x,P;while(h>=128){for(var R=0;R<16;R++){var T=8*R+a;t[R]=r.readUint32BE(o,T);i[R]=r.readUint32BE(o,T+4)}for(var R=0;R<80;R++){var D=u;var U=f;var B=c;var k=l;var $=d;var F=v;var q=w;var L=p;var K=y;var H=b;var G=g;var Q=m;var V=A;var z=E;var J=M;var Y=_;I=p;O=_;C=O&65535;j=O>>>16;x=I&65535;P=I>>>16;I=(d>>>14|A<<32-14)^(d>>>18|A<<32-18)^(A>>>41-32|d<<32-(41-32));O=(A>>>14|d<<32-14)^(A>>>18|d<<32-18)^(d>>>41-32|A<<32-(41-32));C+=O&65535;j+=O>>>16;x+=I&65535;P+=I>>>16;I=d&v^~d&w;O=A&E^~A&M;C+=O&65535;j+=O>>>16;x+=I&65535;P+=I>>>16;I=e[R*2];O=e[R*2+1];C+=O&65535;j+=O>>>16;x+=I&65535;P+=I>>>16;I=t[R%16];O=i[R%16];C+=O&65535;j+=O>>>16;x+=I&65535;P+=I>>>16;j+=C>>>16;x+=j>>>16;P+=x>>>16;S=x&65535|P<<16;N=C&65535|j<<16;I=S;O=N;C=O&65535;j=O>>>16;x=I&65535;P=I>>>16;I=(u>>>28|y<<32-28)^(y>>>34-32|u<<32-(34-32))^(y>>>39-32|u<<32-(39-32));O=(y>>>28|u<<32-28)^(u>>>34-32|y<<32-(34-32))^(u>>>39-32|y<<32-(39-32));C+=O&65535;j+=O>>>16;x+=I&65535;P+=I>>>16;I=u&f^u&c^f&c;O=y&b^y&g^b&g;C+=O&65535;j+=O>>>16;x+=I&65535;P+=I>>>16;j+=C>>>16;x+=j>>>16;P+=x>>>16;L=x&65535|P<<16;Y=C&65535|j<<16;I=k;O=Q;C=O&65535;j=O>>>16;x=I&65535;P=I>>>16;I=S;O=N;C+=O&65535;j+=O>>>16;x+=I&65535;P+=I>>>16;j+=C>>>16;x+=j>>>16;P+=x>>>16;k=x&65535|P<<16;Q=C&65535|j<<16;f=D;c=U;l=B;d=k;v=$;w=F;p=q;u=L;b=K;g=H;m=G;A=Q;E=V;M=z;_=J;y=Y;if(R%16===15){for(var T=0;T<16;T++){I=t[T];O=i[T];C=O&65535;j=O>>>16;x=I&65535;P=I>>>16;I=t[(T+9)%16];O=i[(T+9)%16];C+=O&65535;j+=O>>>16;x+=I&65535;P+=I>>>16;S=t[(T+1)%16];N=i[(T+1)%16];I=(S>>>1|N<<32-1)^(S>>>8|N<<32-8)^S>>>7;O=(N>>>1|S<<32-1)^(N>>>8|S<<32-8)^(N>>>7|S<<32-7);C+=O&65535;j+=O>>>16;x+=I&65535;P+=I>>>16;S=t[(T+14)%16];N=i[(T+14)%16];I=(S>>>19|N<<32-19)^(N>>>61-32|S<<32-(61-32))^S>>>6;O=(N>>>19|S<<32-19)^(S>>>61-32|N<<32-(61-32))^(N>>>6|S<<32-6);C+=O&65535;j+=O>>>16;x+=I&65535;P+=I>>>16;j+=C>>>16;x+=j>>>16;P+=x>>>16;t[T]=x&65535|P<<16;i[T]=C&65535|j<<16}}}I=u;O=y;C=O&65535;j=O>>>16;x=I&65535;P=I>>>16;I=n[0];O=s[0];C+=O&65535;j+=O>>>16;x+=I&65535;P+=I>>>16;j+=C>>>16;x+=j>>>16;P+=x>>>16;n[0]=u=x&65535|P<<16;s[0]=y=C&65535|j<<16;I=f;O=b;C=O&65535;j=O>>>16;x=I&65535;P=I>>>16;I=n[1];O=s[1];C+=O&65535;j+=O>>>16;x+=I&65535;P+=I>>>16;j+=C>>>16;x+=j>>>16;P+=x>>>16;n[1]=f=x&65535|P<<16;s[1]=b=C&65535|j<<16;I=c;O=g;C=O&65535;j=O>>>16;x=I&65535;P=I>>>16;I=n[2];O=s[2];C+=O&65535;j+=O>>>16;x+=I&65535;P+=I>>>16;j+=C>>>16;x+=j>>>16;P+=x>>>16;n[2]=c=x&65535|P<<16;s[2]=g=C&65535|j<<16;I=l;O=m;C=O&65535;j=O>>>16;x=I&65535;P=I>>>16;I=n[3];O=s[3];C+=O&65535;j+=O>>>16;x+=I&65535;P+=I>>>16;j+=C>>>16;x+=j>>>16;P+=x>>>16;n[3]=l=x&65535|P<<16;s[3]=m=C&65535|j<<16;I=d;O=A;C=O&65535;j=O>>>16;x=I&65535;P=I>>>16;I=n[4];O=s[4];C+=O&65535;j+=O>>>16;x+=I&65535;P+=I>>>16;j+=C>>>16;x+=j>>>16;P+=x>>>16;n[4]=d=x&65535|P<<16;s[4]=A=C&65535|j<<16;I=v;O=E;C=O&65535;j=O>>>16;x=I&65535;P=I>>>16;I=n[5];O=s[5];C+=O&65535;j+=O>>>16;x+=I&65535;P+=I>>>16;j+=C>>>16;x+=j>>>16;P+=x>>>16;n[5]=v=x&65535|P<<16;s[5]=E=C&65535|j<<16;I=w;O=M;C=O&65535;j=O>>>16;x=I&65535;P=I>>>16;I=n[6];O=s[6];C+=O&65535;j+=O>>>16;x+=I&65535;P+=I>>>16;j+=C>>>16;x+=j>>>16;P+=x>>>16;n[6]=w=x&65535|P<<16;s[6]=M=C&65535|j<<16;I=p;O=_;C=O&65535;j=O>>>16;x=I&65535;P=I>>>16;I=n[7];O=s[7];C+=O&65535;j+=O>>>16;x+=I&65535;P+=I>>>16;j+=C>>>16;x+=j>>>16;P+=x>>>16;n[7]=p=x&65535|P<<16;s[7]=_=C&65535|j<<16;a+=128;h-=128}return a}function o(t){var r=new n;r.update(t);var i=r.digest();r.clean();return i}t.hash=o})(Gw);(function(t){Object.defineProperty(t,"__esModule",{value:true});t.convertSecretKeyToX25519=t.convertPublicKeyToX25519=t.verify=t.sign=t.extractPublicKeyFromSecretKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.SEED_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=t.SIGNATURE_LENGTH=void 0;const r=fi;const i=Gw;const n=Ur;t.SIGNATURE_LENGTH=64;t.PUBLIC_KEY_LENGTH=32;t.SECRET_KEY_LENGTH=64;t.SEED_LENGTH=32;function e(t){const r=new Float64Array(16);if(t){for(let i=0;i<t.length;i++){r[i]=t[i]}}return r}const s=new Uint8Array(32);s[0]=9;const o=e();const a=e([1]);const h=e([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]);const u=e([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]);const f=e([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]);const c=e([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]);const l=e([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function d(t,r){for(let i=0;i<16;i++){t[i]=r[i]|0}}function v(t){let r=1;for(let i=0;i<16;i++){let n=t[i]+r+65535;r=Math.floor(n/65536);t[i]=n-r*65536}t[0]+=r-1+37*(r-1)}function w(t,r,i){const n=~(i-1);for(let i=0;i<16;i++){const e=n&(t[i]^r[i]);t[i]^=e;r[i]^=e}}function p(t,r){const i=e();const n=e();for(let t=0;t<16;t++){n[t]=r[t]}v(n);v(n);v(n);for(let t=0;t<2;t++){i[0]=n[0]-65517;for(let t=1;t<15;t++){i[t]=n[t]-65535-(i[t-1]>>16&1);i[t-1]&=65535}i[15]=n[15]-32767-(i[14]>>16&1);const t=i[15]>>16&1;i[14]&=65535;w(n,i,1-t)}for(let r=0;r<16;r++){t[2*r]=n[r]&255;t[2*r+1]=n[r]>>8}}function y(t,r){let i=0;for(let n=0;n<32;n++){i|=t[n]^r[n]}return(1&i-1>>>8)-1}function b(t,r){const i=new Uint8Array(32);const n=new Uint8Array(32);p(i,t);p(n,r);return y(i,n)}function g(t){const r=new Uint8Array(32);p(r,t);return r[0]&1}function m(t,r){for(let i=0;i<16;i++){t[i]=r[2*i]+(r[2*i+1]<<8)}t[15]&=32767}function A(t,r,i){for(let n=0;n<16;n++){t[n]=r[n]+i[n]}}function E(t,r,i){for(let n=0;n<16;n++){t[n]=r[n]-i[n]}}function M(t,r,i){let n,e,s=0,o=0,a=0,h=0,u=0,f=0,c=0,l=0,d=0,v=0,w=0,p=0,y=0,b=0,g=0,m=0,A=0,E=0,M=0,_=0,I=0,O=0,S=0,N=0,C=0,j=0,x=0,P=0,R=0,T=0,D=0,U=i[0],B=i[1],k=i[2],$=i[3],F=i[4],q=i[5],L=i[6],K=i[7],H=i[8],G=i[9],Q=i[10],V=i[11],z=i[12],J=i[13],Y=i[14],W=i[15];n=r[0];s+=n*U;o+=n*B;a+=n*k;h+=n*$;u+=n*F;f+=n*q;c+=n*L;l+=n*K;d+=n*H;v+=n*G;w+=n*Q;p+=n*V;y+=n*z;b+=n*J;g+=n*Y;m+=n*W;n=r[1];o+=n*U;a+=n*B;h+=n*k;u+=n*$;f+=n*F;c+=n*q;l+=n*L;d+=n*K;v+=n*H;w+=n*G;p+=n*Q;y+=n*V;b+=n*z;g+=n*J;m+=n*Y;A+=n*W;n=r[2];a+=n*U;h+=n*B;u+=n*k;f+=n*$;c+=n*F;l+=n*q;d+=n*L;v+=n*K;w+=n*H;p+=n*G;y+=n*Q;b+=n*V;g+=n*z;m+=n*J;A+=n*Y;E+=n*W;n=r[3];h+=n*U;u+=n*B;f+=n*k;c+=n*$;l+=n*F;d+=n*q;v+=n*L;w+=n*K;p+=n*H;y+=n*G;b+=n*Q;g+=n*V;m+=n*z;A+=n*J;E+=n*Y;M+=n*W;n=r[4];u+=n*U;f+=n*B;c+=n*k;l+=n*$;d+=n*F;v+=n*q;w+=n*L;p+=n*K;y+=n*H;b+=n*G;g+=n*Q;m+=n*V;A+=n*z;E+=n*J;M+=n*Y;_+=n*W;n=r[5];f+=n*U;c+=n*B;l+=n*k;d+=n*$;v+=n*F;w+=n*q;p+=n*L;y+=n*K;b+=n*H;g+=n*G;m+=n*Q;A+=n*V;E+=n*z;M+=n*J;_+=n*Y;I+=n*W;n=r[6];c+=n*U;l+=n*B;d+=n*k;v+=n*$;w+=n*F;p+=n*q;y+=n*L;b+=n*K;g+=n*H;m+=n*G;A+=n*Q;E+=n*V;M+=n*z;_+=n*J;I+=n*Y;O+=n*W;n=r[7];l+=n*U;d+=n*B;v+=n*k;w+=n*$;p+=n*F;y+=n*q;b+=n*L;g+=n*K;m+=n*H;A+=n*G;E+=n*Q;M+=n*V;_+=n*z;I+=n*J;O+=n*Y;S+=n*W;n=r[8];d+=n*U;v+=n*B;w+=n*k;p+=n*$;y+=n*F;b+=n*q;g+=n*L;m+=n*K;A+=n*H;E+=n*G;M+=n*Q;_+=n*V;I+=n*z;O+=n*J;S+=n*Y;N+=n*W;n=r[9];v+=n*U;w+=n*B;p+=n*k;y+=n*$;b+=n*F;g+=n*q;m+=n*L;A+=n*K;E+=n*H;M+=n*G;_+=n*Q;I+=n*V;O+=n*z;S+=n*J;N+=n*Y;C+=n*W;n=r[10];w+=n*U;p+=n*B;y+=n*k;b+=n*$;g+=n*F;m+=n*q;A+=n*L;E+=n*K;M+=n*H;_+=n*G;I+=n*Q;O+=n*V;S+=n*z;N+=n*J;C+=n*Y;j+=n*W;n=r[11];p+=n*U;y+=n*B;b+=n*k;g+=n*$;m+=n*F;A+=n*q;E+=n*L;M+=n*K;_+=n*H;I+=n*G;O+=n*Q;S+=n*V;N+=n*z;C+=n*J;j+=n*Y;x+=n*W;n=r[12];y+=n*U;b+=n*B;g+=n*k;m+=n*$;A+=n*F;E+=n*q;M+=n*L;_+=n*K;I+=n*H;O+=n*G;S+=n*Q;N+=n*V;C+=n*z;j+=n*J;x+=n*Y;P+=n*W;n=r[13];b+=n*U;g+=n*B;m+=n*k;A+=n*$;E+=n*F;M+=n*q;_+=n*L;I+=n*K;O+=n*H;S+=n*G;N+=n*Q;C+=n*V;j+=n*z;x+=n*J;P+=n*Y;R+=n*W;n=r[14];g+=n*U;m+=n*B;A+=n*k;E+=n*$;M+=n*F;_+=n*q;I+=n*L;O+=n*K;S+=n*H;N+=n*G;C+=n*Q;j+=n*V;x+=n*z;P+=n*J;R+=n*Y;T+=n*W;n=r[15];m+=n*U;A+=n*B;E+=n*k;M+=n*$;_+=n*F;I+=n*q;O+=n*L;S+=n*K;N+=n*H;C+=n*G;j+=n*Q;x+=n*V;P+=n*z;R+=n*J;T+=n*Y;D+=n*W;s+=38*A;o+=38*E;a+=38*M;h+=38*_;u+=38*I;f+=38*O;c+=38*S;l+=38*N;d+=38*C;v+=38*j;w+=38*x;p+=38*P;y+=38*R;b+=38*T;g+=38*D;e=1;n=s+e+65535;e=Math.floor(n/65536);s=n-e*65536;n=o+e+65535;e=Math.floor(n/65536);o=n-e*65536;n=a+e+65535;e=Math.floor(n/65536);a=n-e*65536;n=h+e+65535;e=Math.floor(n/65536);h=n-e*65536;n=u+e+65535;e=Math.floor(n/65536);u=n-e*65536;n=f+e+65535;e=Math.floor(n/65536);f=n-e*65536;n=c+e+65535;e=Math.floor(n/65536);c=n-e*65536;n=l+e+65535;e=Math.floor(n/65536);l=n-e*65536;n=d+e+65535;e=Math.floor(n/65536);d=n-e*65536;n=v+e+65535;e=Math.floor(n/65536);v=n-e*65536;n=w+e+65535;e=Math.floor(n/65536);w=n-e*65536;n=p+e+65535;e=Math.floor(n/65536);p=n-e*65536;n=y+e+65535;e=Math.floor(n/65536);y=n-e*65536;n=b+e+65535;e=Math.floor(n/65536);b=n-e*65536;n=g+e+65535;e=Math.floor(n/65536);g=n-e*65536;n=m+e+65535;e=Math.floor(n/65536);m=n-e*65536;s+=e-1+37*(e-1);e=1;n=s+e+65535;e=Math.floor(n/65536);s=n-e*65536;n=o+e+65535;e=Math.floor(n/65536);o=n-e*65536;n=a+e+65535;e=Math.floor(n/65536);a=n-e*65536;n=h+e+65535;e=Math.floor(n/65536);h=n-e*65536;n=u+e+65535;e=Math.floor(n/65536);u=n-e*65536;n=f+e+65535;e=Math.floor(n/65536);f=n-e*65536;n=c+e+65535;e=Math.floor(n/65536);c=n-e*65536;n=l+e+65535;e=Math.floor(n/65536);l=n-e*65536;n=d+e+65535;e=Math.floor(n/65536);d=n-e*65536;n=v+e+65535;e=Math.floor(n/65536);v=n-e*65536;n=w+e+65535;e=Math.floor(n/65536);w=n-e*65536;n=p+e+65535;e=Math.floor(n/65536);p=n-e*65536;n=y+e+65535;e=Math.floor(n/65536);y=n-e*65536;n=b+e+65535;e=Math.floor(n/65536);b=n-e*65536;n=g+e+65535;e=Math.floor(n/65536);g=n-e*65536;n=m+e+65535;e=Math.floor(n/65536);m=n-e*65536;s+=e-1+37*(e-1);t[0]=s;t[1]=o;t[2]=a;t[3]=h;t[4]=u;t[5]=f;t[6]=c;t[7]=l;t[8]=d;t[9]=v;t[10]=w;t[11]=p;t[12]=y;t[13]=b;t[14]=g;t[15]=m}function _(t,r){M(t,r,r)}function I(t,r){const i=e();let n;for(n=0;n<16;n++){i[n]=r[n]}for(n=253;n>=0;n--){_(i,i);if(n!==2&&n!==4){M(i,i,r)}}for(n=0;n<16;n++){t[n]=i[n]}}function O(t,r){const i=e();let n;for(n=0;n<16;n++){i[n]=r[n]}for(n=250;n>=0;n--){_(i,i);if(n!==1){M(i,i,r)}}for(n=0;n<16;n++){t[n]=i[n]}}function S(t,r){const i=e(),n=e(),s=e(),o=e(),a=e(),h=e(),f=e(),c=e(),l=e();E(i,t[1],t[0]);E(l,r[1],r[0]);M(i,i,l);A(n,t[0],t[1]);A(l,r[0],r[1]);M(n,n,l);M(s,t[3],r[3]);M(s,s,u);M(o,t[2],r[2]);A(o,o,o);E(a,n,i);E(h,o,s);A(f,o,s);A(c,n,i);M(t[0],a,h);M(t[1],c,f);M(t[2],f,h);M(t[3],a,c)}function N(t,r,i){for(let n=0;n<4;n++){w(t[n],r[n],i)}}function C(t,r){const i=e(),n=e(),s=e();I(s,r[2]);M(i,r[0],s);M(n,r[1],s);p(t,n);t[31]^=g(i)<<7}function j(t,r,i){d(t[0],o);d(t[1],a);d(t[2],a);d(t[3],o);for(let n=255;n>=0;--n){const e=i[n/8|0]>>(n&7)&1;N(t,r,e);S(r,t);S(t,t);N(t,r,e)}}function x(t,r){const i=[e(),e(),e(),e()];d(i[0],f);d(i[1],c);d(i[2],a);M(i[3],f,c);j(t,i,r)}function P(r){if(r.length!==t.SEED_LENGTH){throw new Error(`ed25519: seed must be ${t.SEED_LENGTH} bytes`)}const n=(0,i.hash)(r);n[0]&=248;n[31]&=127;n[31]|=64;const s=new Uint8Array(32);const o=[e(),e(),e(),e()];x(o,n);C(s,o);const a=new Uint8Array(64);a.set(r);a.set(s,32);return{publicKey:s,secretKey:a}}t.generateKeyPairFromSeed=P;function R(t){const i=(0,r.randomBytes)(32,t);const e=P(i);(0,n.wipe)(i);return e}t.generateKeyPair=R;function T(r){if(r.length!==t.SECRET_KEY_LENGTH){throw new Error(`ed25519: secret key must be ${t.SECRET_KEY_LENGTH} bytes`)}return new Uint8Array(r.subarray(32))}t.extractPublicKeyFromSecretKey=T;const D=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function U(t,r){let i;let n;let e;let s;for(n=63;n>=32;--n){i=0;for(e=n-32,s=n-12;e<s;++e){r[e]+=i-16*r[n]*D[e-(n-32)];i=Math.floor((r[e]+128)/256);r[e]-=i*256}r[e]+=i;r[n]=0}i=0;for(e=0;e<32;e++){r[e]+=i-(r[31]>>4)*D[e];i=r[e]>>8;r[e]&=255}for(e=0;e<32;e++){r[e]-=i*D[e]}for(n=0;n<32;n++){r[n+1]+=r[n]>>8;t[n]=r[n]&255}}function B(t){const r=new Float64Array(64);for(let i=0;i<64;i++){r[i]=t[i]}for(let r=0;r<64;r++){t[r]=0}U(t,r)}function k(t,r){const n=new Float64Array(64);const s=[e(),e(),e(),e()];const o=(0,i.hash)(t.subarray(0,32));o[0]&=248;o[31]&=127;o[31]|=64;const a=new Uint8Array(64);a.set(o.subarray(32),32);const h=new i.SHA512;h.update(a.subarray(32));h.update(r);const u=h.digest();h.clean();B(u);x(s,u);C(a,s);h.reset();h.update(a.subarray(0,32));h.update(t.subarray(32));h.update(r);const f=h.digest();B(f);for(let t=0;t<32;t++){n[t]=u[t]}for(let t=0;t<32;t++){for(let r=0;r<32;r++){n[t+r]+=f[t]*o[r]}}U(a.subarray(32),n);return a}t.sign=k;function $(t,r){const i=e(),n=e(),s=e(),u=e(),f=e(),c=e(),v=e();d(t[2],a);m(t[1],r);_(s,t[1]);M(u,s,h);E(s,s,t[2]);A(u,t[2],u);_(f,u);_(c,f);M(v,c,f);M(i,v,s);M(i,i,u);O(i,i);M(i,i,s);M(i,i,u);M(i,i,u);M(t[0],i,u);_(n,t[0]);M(n,n,u);if(b(n,s)){M(t[0],t[0],l)}_(n,t[0]);M(n,n,u);if(b(n,s)){return-1}if(g(t[0])===r[31]>>7){E(t[0],o,t[0])}M(t[3],t[0],t[1]);return 0}function F(r,n,s){const o=new Uint8Array(32);const a=[e(),e(),e(),e()];const h=[e(),e(),e(),e()];if(s.length!==t.SIGNATURE_LENGTH){throw new Error(`ed25519: signature must be ${t.SIGNATURE_LENGTH} bytes`)}if($(h,r)){return false}const u=new i.SHA512;u.update(s.subarray(0,32));u.update(r);u.update(n);const f=u.digest();B(f);j(a,h,f);x(h,s.subarray(32));S(a,h);C(o,a);if(y(s,o)){return false}return true}t.verify=F;function q(t){let r=[e(),e(),e(),e()];if($(r,t)){throw new Error("Ed25519: invalid public key")}let i=e();let n=e();let s=r[1];A(i,a,s);E(n,a,s);I(n,n);M(i,i,n);let o=new Uint8Array(32);p(o,i);return o}t.convertPublicKeyToX25519=q;function L(t){const r=(0,i.hash)(t.subarray(0,32));r[0]&=248;r[31]&=127;r[31]|=64;const e=new Uint8Array(r.subarray(0,32));(0,n.wipe)(r);return e}t.convertSecretKeyToX25519=L})(Hw);const Qw="EdDSA";const Vw="JWT";const zw=".";const Jw="base64url";const Yw="utf8";const Ww="utf8";const Xw=":";const Zw="did";const tp="key";const rp="base58btc";const ip="z";const np="K36";const ep=32;function sp(t){return Ce(Ie(vv(t),Yw),Jw)}function op(t){const r=Ie(np,rp);const i=ip+Ce(Di([r,t]),rp);return[Zw,tp,i].join(Xw)}function ap(t){return Ce(t,Jw)}function hp(t){return Ie([sp(t.header),sp(t.payload)].join(zw),Ww)}function up(t){return[sp(t.header),sp(t.payload),ap(t.signature)].join(zw)}function fp(t=fi.randomBytes(ep)){return Hw.generateKeyPairFromSeed(t)}async function cp(t,r,i,n,e=U.fromMiliseconds(Date.now())){const s={alg:Qw,typ:Vw};const o=op(n.publicKey);const a=e+i;const h={iss:o,sub:t,aud:r,iat:e,exp:a};const u=hp({header:s,payload:h});const f=Hw.sign(n.secretKey,u);return up({header:s,payload:h,signature:f})}const lp="PARSE_ERROR";const dp="INVALID_REQUEST";const vp="METHOD_NOT_FOUND";const wp="INVALID_PARAMS";const pp="INTERNAL_ERROR";const yp="SERVER_ERROR";const bp=[-32700,-32600,-32601,-32602,-32603];const gp={[lp]:{code:-32700,message:"Parse error"},[dp]:{code:-32600,message:"Invalid Request"},[vp]:{code:-32601,message:"Method not found"},[wp]:{code:-32602,message:"Invalid params"},[pp]:{code:-32603,message:"Internal error"},[yp]:{code:-32e3,message:"Server error"}};const mp=yp;function Ap(t){return bp.includes(t)}function Ep(t){if(!Object.keys(gp).includes(t)){return gp[mp]}return gp[t]}function Mp(t){const r=Object.values(gp).find((r=>r.code===t));if(!r){return gp[mp]}return r}function _p(t,r,i){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${i} RPC url at ${r}`):t}var Ip={};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Op=function(t,r){Op=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)if(r.hasOwnProperty(i))t[i]=r[i]};return Op(t,r)};function Sp(t,r){Op(t,r);function i(){this.constructor=t}t.prototype=r===null?Object.create(r):(i.prototype=r.prototype,new i)}var Np=function(){Np=Object.assign||function t(r){for(var i,n=1,e=arguments.length;n<e;n++){i=arguments[n];for(var s in i)if(Object.prototype.hasOwnProperty.call(i,s))r[s]=i[s]}return r};return Np.apply(this,arguments)};function Cp(t,r){var i={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0)i[n]=t[n];if(t!=null&&typeof Object.getOwnPropertySymbols==="function")for(var e=0,n=Object.getOwnPropertySymbols(t);e<n.length;e++){if(r.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(t,n[e]))i[n[e]]=t[n[e]]}return i}function jp(t,r,i,n){var e=arguments.length,s=e<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,i):n,o;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")s=Reflect.decorate(t,r,i,n);else for(var a=t.length-1;a>=0;a--)if(o=t[a])s=(e<3?o(s):e>3?o(r,i,s):o(r,i))||s;return e>3&&s&&Object.defineProperty(r,i,s),s}function xp(t,r){return function(i,n){r(i,n,t)}}function Pp(t,r){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(t,r)}function Rp(t,r,i,n){function e(t){return t instanceof i?t:new i((function(r){r(t)}))}return new(i||(i=Promise))((function(i,s){function o(t){try{h(n.next(t))}catch(t){s(t)}}function a(t){try{h(n["throw"](t))}catch(t){s(t)}}function h(t){t.done?i(t.value):e(t.value).then(o,a)}h((n=n.apply(t,r||[])).next())}))}function Tp(t,r){var i={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,e,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol==="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(t){return function(r){return h([t,r])}}function h(o){if(n)throw new TypeError("Generator is already executing.");while(i)try{if(n=1,e&&(s=o[0]&2?e["return"]:o[0]?e["throw"]||((s=e["return"])&&s.call(e),0):e.next)&&!(s=s.call(e,o[1])).done)return s;if(e=0,s)o=[o[0]&2,s.value];switch(o[0]){case 0:case 1:s=o;break;case 4:i.label++;return{value:o[1],done:false};case 5:i.label++;e=o[1];o=[0];continue;case 7:o=i.ops.pop();i.trys.pop();continue;default:if(!(s=i.trys,s=s.length>0&&s[s.length-1])&&(o[0]===6||o[0]===2)){i=0;continue}if(o[0]===3&&(!s||o[1]>s[0]&&o[1]<s[3])){i.label=o[1];break}if(o[0]===6&&i.label<s[1]){i.label=s[1];s=o;break}if(s&&i.label<s[2]){i.label=s[2];i.ops.push(o);break}if(s[2])i.ops.pop();i.trys.pop();continue}o=r.call(t,i)}catch(t){o=[6,t];e=0}finally{n=s=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:true}}}function Dp(t,r,i,n){if(n===undefined)n=i;t[n]=r[i]}function Up(t,r){for(var i in t)if(i!=="default"&&!r.hasOwnProperty(i))r[i]=t[i]}function Bp(t){var r=typeof Symbol==="function"&&Symbol.iterator,i=r&&t[r],n=0;if(i)return i.call(t);if(t&&typeof t.length==="number")return{next:function(){if(t&&n>=t.length)t=void 0;return{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}function kp(t,r){var i=typeof Symbol==="function"&&t[Symbol.iterator];if(!i)return t;var n=i.call(t),e,s=[],o;try{while((r===void 0||r-- >0)&&!(e=n.next()).done)s.push(e.value)}catch(t){o={error:t}}finally{try{if(e&&!e.done&&(i=n["return"]))i.call(n)}finally{if(o)throw o.error}}return s}function $p(){for(var t=[],r=0;r<arguments.length;r++)t=t.concat(kp(arguments[r]));return t}function Fp(){for(var t=0,r=0,i=arguments.length;r<i;r++)t+=arguments[r].length;for(var n=Array(t),e=0,r=0;r<i;r++)for(var s=arguments[r],o=0,a=s.length;o<a;o++,e++)n[e]=s[o];return n}function qp(t){return this instanceof qp?(this.v=t,this):new qp(t)}function Lp(t,r,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=i.apply(t,r||[]),e,s=[];return e={},o("next"),o("throw"),o("return"),e[Symbol.asyncIterator]=function(){return this},e;function o(t){if(n[t])e[t]=function(r){return new Promise((function(i,n){s.push([t,r,i,n])>1||a(t,r)}))}}function a(t,r){try{h(n[t](r))}catch(t){c(s[0][3],t)}}function h(t){t.value instanceof qp?Promise.resolve(t.value.v).then(u,f):c(s[0][2],t)}function u(t){a("next",t)}function f(t){a("throw",t)}function c(t,r){if(t(r),s.shift(),s.length)a(s[0][0],s[0][1])}}function Kp(t){var r,i;return r={},n("next"),n("throw",(function(t){throw t})),n("return"),r[Symbol.iterator]=function(){return this},r;function n(n,e){r[n]=t[n]?function(r){return(i=!i)?{value:qp(t[n](r)),done:n==="return"}:e?e(r):r}:e}}function Hp(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t[Symbol.asyncIterator],i;return r?r.call(t):(t=typeof Bp==="function"?Bp(t):t[Symbol.iterator](),i={},n("next"),n("throw"),n("return"),i[Symbol.asyncIterator]=function(){return this},i);function n(r){i[r]=t[r]&&function(i){return new Promise((function(n,s){i=t[r](i),e(n,s,i.done,i.value)}))}}function e(t,r,i,n){Promise.resolve(n).then((function(r){t({value:r,done:i})}),r)}}function Gp(t,r){if(Object.defineProperty){Object.defineProperty(t,"raw",{value:r})}else{t.raw=r}return t}function Qp(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var i in t)if(Object.hasOwnProperty.call(t,i))r[i]=t[i];r.default=t;return r}function Vp(t){return t&&t.__esModule?t:{default:t}}function zp(t,r){if(!r.has(t)){throw new TypeError("attempted to get private field on non-instance")}return r.get(t)}function Jp(t,r,i){if(!r.has(t)){throw new TypeError("attempted to set private field on non-instance")}r.set(t,i);return i}const Yp=Object.freeze({__proto__:null,__extends:Sp,get __assign(){return Np},__rest:Cp,__decorate:jp,__param:xp,__metadata:Pp,__awaiter:Rp,__generator:Tp,__createBinding:Dp,__exportStar:Up,__values:Bp,__read:kp,__spread:$p,__spreadArrays:Fp,__await:qp,__asyncGenerator:Lp,__asyncDelegator:Kp,__asyncValues:Hp,__makeTemplateObject:Gp,__importStar:Qp,__importDefault:Vp,__classPrivateFieldGet:zp,__classPrivateFieldSet:Jp});const Wp=n(Yp);var Xp={};Object.defineProperty(Xp,"__esModule",{value:true});Xp.isBrowserCryptoAvailable=Xp.getSubtleCrypto=Xp.getBrowerCrypto=void 0;function Zp(){return(w===null||w===void 0?void 0:w.crypto)||(w===null||w===void 0?void 0:w.msCrypto)||{}}Xp.getBrowerCrypto=Zp;function ty(){const t=Zp();return t.subtle||t.webkitSubtle}Xp.getSubtleCrypto=ty;function ry(){return!!Zp()&&!!ty()}Xp.isBrowserCryptoAvailable=ry;var iy={};Object.defineProperty(iy,"__esModule",{value:true});iy.isBrowser=iy.isNode=iy.isReactNative=void 0;function ny(){return typeof document==="undefined"&&typeof navigator!=="undefined"&&navigator.product==="ReactNative"}iy.isReactNative=ny;function ey(){return typeof i!=="undefined"&&typeof i.versions!=="undefined"&&typeof i.versions.node!=="undefined"}iy.isNode=ey;function sy(){return!ny()&&!ey()}iy.isBrowser=sy;(function(t){Object.defineProperty(t,"__esModule",{value:true});const r=Wp;r.__exportStar(Xp,t);r.__exportStar(iy,t)})(Ip);function oy(t=3){const r=Date.now()*Math.pow(10,t);const i=Math.floor(Math.random()*Math.pow(10,t));return r+i}function ay(t=6){return BigInt(oy(t))}function hy(t,r,i){return{id:i||oy(),jsonrpc:"2.0",method:t,params:r}}function uy(t,r){return{id:t,jsonrpc:"2.0",result:r}}function fy(t,r,i){return{id:t,jsonrpc:"2.0",error:cy(r,i)}}function cy(t,r){if(typeof t==="undefined"){return Ep(pp)}if(typeof t==="string"){t=Object.assign(Object.assign({},Ep(yp)),{message:t})}if(typeof r!=="undefined"){t.data=r}if(Ap(t.code)){t=Mp(t.code)}return t}class ly{}class dy extends ly{constructor(){super()}}class vy extends dy{constructor(t){super()}}const wy="^https?:";const py="^wss?:";function yy(t){const r=t.match(new RegExp(/^\w+:/,"gi"));if(!r||!r.length)return;return r[0]}function by(t,r){const i=yy(t);if(typeof i==="undefined")return false;return new RegExp(r).test(i)}function gy(t){return by(t,wy)}function my(t){return by(t,py)}function Ay(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function Ey(t){return typeof t==="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function My(t){return Ey(t)&&"method"in t}function _y(t){return Ey(t)&&(Iy(t)||Oy(t))}function Iy(t){return"result"in t}function Oy(t){return"error"in t}class Sy extends vy{constructor(r){super(r),this.events=new t.exports.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(r),this.connection.connected&&this.registerEventListeners()}async connect(t=this.connection){await this.open(t)}async disconnect(){await this.close()}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}off(t,r){this.events.off(t,r)}removeListener(t,r){this.events.removeListener(t,r)}async request(t,r){return this.requestStrict(hy(t.method,t.params||[],t.id||ay().toString()),r)}async requestStrict(t,r){return new Promise((async(i,n)=>{if(!this.connection.connected)try{await this.open()}catch(t){n(t)}this.events.on(`${t.id}`,(t=>{Oy(t)?n(t.error):i(t.result)}));try{await this.connection.send(t,r)}catch(t){n(t)}}))}setConnection(t=this.connection){return t}onPayload(t){this.events.emit("payload",t),_y(t)?this.events.emit(`${t.id}`,t):this.events.emit("message",{type:t.method,data:t.params})}onClose(t){t&&t.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${t.code} ${t.reason?`(${t.reason})`:""}`)),this.events.emit("disconnect")}async open(t=this.connection){this.connection===t&&this.connection.connected||(this.connection.connected&&this.close(),typeof t=="string"&&(await this.connection.open(t),t=this.connection),this.connection=this.setConnection(t),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",(t=>this.onPayload(t))),this.connection.on("close",(t=>this.onClose(t))),this.connection.on("error",(t=>this.events.emit("error",t))),this.connection.on("register_error",(t=>this.onClose())),this.hasRegisteredEventListeners=!0)}}const Ny=()=>typeof WebSocket<"u"?WebSocket:typeof d<"u"&&typeof d.WebSocket<"u"?d.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),Cy=()=>typeof WebSocket<"u"||typeof d<"u"&&typeof d.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",jy=t=>t.split("?")[0],xy=10,Py=Ny();class Ry{constructor(r){if(this.url=r,this.events=new t.exports.EventEmitter,this.registering=!1,!my(r))throw new Error(`Provided URL is not compatible with WebSocket connection: ${r}`);this.url=r}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}off(t,r){this.events.off(t,r)}removeListener(t,r){this.events.removeListener(t,r)}async open(t=this.url){await this.register(t)}async close(){return new Promise(((t,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=r=>{this.onClose(r),t()},this.socket.close()}))}async send(t){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(vv(t))}catch(r){this.onError(t.id,r)}}register(t=this.url){if(!my(t))throw new Error(`Provided URL is not compatible with WebSocket connection: ${t}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise(((t,r)=>{this.events.once("register_error",(t=>{this.resetMaxListeners(),r(t)})),this.events.once("open",(()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return r(new Error("WebSocket connection is missing or invalid"));t(this.socket)}))}))}return this.url=t,this.registering=!0,new Promise(((r,i)=>{const n=new URLSearchParams(t).get("origin"),e=Ip.isReactNative()?{headers:{origin:n}}:{rejectUnauthorized:!Ay(t)},s=new Py(t,[],e);Cy()?s.onerror=t=>{const r=t;i(this.emitError(r.error))}:s.on("error",(t=>{i(this.emitError(t))})),s.onopen=()=>{this.onOpen(s),r(s)}}))}onOpen(t){t.onmessage=t=>this.onPayload(t),t.onclose=t=>this.onClose(t),this.socket=t,this.registering=!1,this.events.emit("open")}onClose(t){this.socket=void 0,this.registering=!1,this.events.emit("close",t)}onPayload(t){if(typeof t.data>"u")return;const r=typeof t.data=="string"?dv(t.data):t.data;this.events.emit("payload",r)}onError(t,r){const i=this.parseError(r),n=i.message||i.toString(),e=fy(t,n);this.events.emit("payload",e)}parseError(t,r=this.url){return _p(t,jy(r),"WS")}resetMaxListeners(){this.events.getMaxListeners()>xy&&this.events.setMaxListeners(xy)}emitError(t){const r=this.parseError(new Error(t?.message||`WebSocket connection failed for host: ${jy(this.url)}`));return this.events.emit("register_error",r),r}}var Ty={exports:{}};(function(t,r){var i=200;var n="__lodash_hash_undefined__";var e=1,s=2;var o=9007199254740991;var a="[object Arguments]",h="[object Array]",u="[object AsyncFunction]",f="[object Boolean]",c="[object Date]",l="[object Error]",d="[object Function]",v="[object GeneratorFunction]",p="[object Map]",y="[object Number]",b="[object Null]",g="[object Object]",m="[object Promise]",A="[object Proxy]",E="[object RegExp]",M="[object Set]",_="[object String]",I="[object Symbol]",O="[object Undefined]",S="[object WeakMap]";var N="[object ArrayBuffer]",C="[object DataView]",j="[object Float32Array]",x="[object Float64Array]",P="[object Int8Array]",R="[object Int16Array]",T="[object Int32Array]",D="[object Uint8Array]",U="[object Uint8ClampedArray]",B="[object Uint16Array]",k="[object Uint32Array]";var $=/[\\^$.*+?()[\]{}|]/g;var F=/^\[object .+?Constructor\]$/;var q=/^(?:0|[1-9]\d*)$/;var L={};L[j]=L[x]=L[P]=L[R]=L[T]=L[D]=L[U]=L[B]=L[k]=true;L[a]=L[h]=L[N]=L[f]=L[C]=L[c]=L[l]=L[d]=L[p]=L[y]=L[g]=L[E]=L[M]=L[_]=L[S]=false;var K=typeof w=="object"&&w&&w.Object===Object&&w;var H=typeof self=="object"&&self&&self.Object===Object&&self;var G=K||H||Function("return this")();var Q=r&&!r.nodeType&&r;var V=Q&&"object"=="object"&&t&&!t.nodeType&&t;var z=V&&V.exports===Q;var J=z&&K.process;var Y=function(){try{return J&&J.binding&&J.binding("util")}catch(t){}}();var W=Y&&Y.isTypedArray;function X(t,r){var i=-1,n=t==null?0:t.length,e=0,s=[];while(++i<n){var o=t[i];if(r(o,i,t)){s[e++]=o}}return s}function Z(t,r){var i=-1,n=r.length,e=t.length;while(++i<n){t[e+i]=r[i]}return t}function tt(t,r){var i=-1,n=t==null?0:t.length;while(++i<n){if(r(t[i],i,t)){return true}}return false}function rt(t,r){var i=-1,n=Array(t);while(++i<t){n[i]=r(i)}return n}function it(t){return function(r){return t(r)}}function nt(t,r){return t.has(r)}function et(t,r){return t==null?undefined:t[r]}function st(t){var r=-1,i=Array(t.size);t.forEach((function(t,n){i[++r]=[n,t]}));return i}function ot(t,r){return function(i){return t(r(i))}}function at(t){var r=-1,i=Array(t.size);t.forEach((function(t){i[++r]=t}));return i}var ht=Array.prototype,ut=Function.prototype,ft=Object.prototype;var ct=G["__core-js_shared__"];var lt=ut.toString;var dt=ft.hasOwnProperty;var vt=function(){var t=/[^.]+$/.exec(ct&&ct.keys&&ct.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();var wt=ft.toString;var pt=RegExp("^"+lt.call(dt).replace($,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var yt=z?G.Buffer:undefined,bt=G.Symbol,gt=G.Uint8Array,mt=ft.propertyIsEnumerable,At=ht.splice,Et=bt?bt.toStringTag:undefined;var Mt=Object.getOwnPropertySymbols,_t=yt?yt.isBuffer:undefined,It=ot(Object.keys,Object);var Ot=Sr(G,"DataView"),St=Sr(G,"Map"),Nt=Sr(G,"Promise"),Ct=Sr(G,"Set"),jt=Sr(G,"WeakMap"),xt=Sr(Object,"create");var Pt=Ur(Ot),Rt=Ur(St),Tt=Ur(Nt),Dt=Ur(Ct),Ut=Ur(jt);var Bt=bt?bt.prototype:undefined,kt=Bt?Bt.valueOf:undefined;function $t(t){var r=-1,i=t==null?0:t.length;this.clear();while(++r<i){var n=t[r];this.set(n[0],n[1])}}function Ft(){this.__data__=xt?xt(null):{};this.size=0}function qt(t){var r=this.has(t)&&delete this.__data__[t];this.size-=r?1:0;return r}function Lt(t){var r=this.__data__;if(xt){var i=r[t];return i===n?undefined:i}return dt.call(r,t)?r[t]:undefined}function Kt(t){var r=this.__data__;return xt?r[t]!==undefined:dt.call(r,t)}function Ht(t,r){var i=this.__data__;this.size+=this.has(t)?0:1;i[t]=xt&&r===undefined?n:r;return this}$t.prototype.clear=Ft;$t.prototype["delete"]=qt;$t.prototype.get=Lt;$t.prototype.has=Kt;$t.prototype.set=Ht;function Gt(t){var r=-1,i=t==null?0:t.length;this.clear();while(++r<i){var n=t[r];this.set(n[0],n[1])}}function Qt(){this.__data__=[];this.size=0}function Vt(t){var r=this.__data__,i=dr(r,t);if(i<0){return false}var n=r.length-1;if(i==n){r.pop()}else{At.call(r,i,1)}--this.size;return true}function zt(t){var r=this.__data__,i=dr(r,t);return i<0?undefined:r[i][1]}function Jt(t){return dr(this.__data__,t)>-1}function Yt(t,r){var i=this.__data__,n=dr(i,t);if(n<0){++this.size;i.push([t,r])}else{i[n][1]=r}return this}Gt.prototype.clear=Qt;Gt.prototype["delete"]=Vt;Gt.prototype.get=zt;Gt.prototype.has=Jt;Gt.prototype.set=Yt;function Wt(t){var r=-1,i=t==null?0:t.length;this.clear();while(++r<i){var n=t[r];this.set(n[0],n[1])}}function Xt(){this.size=0;this.__data__={hash:new $t,map:new(St||Gt),string:new $t}}function Zt(t){var r=Or(this,t)["delete"](t);this.size-=r?1:0;return r}function tr(t){return Or(this,t).get(t)}function rr(t){return Or(this,t).has(t)}function ir(t,r){var i=Or(this,t),n=i.size;i.set(t,r);this.size+=i.size==n?0:1;return this}Wt.prototype.clear=Xt;Wt.prototype["delete"]=Zt;Wt.prototype.get=tr;Wt.prototype.has=rr;Wt.prototype.set=ir;function nr(t){var r=-1,i=t==null?0:t.length;this.__data__=new Wt;while(++r<i){this.add(t[r])}}function er(t){this.__data__.set(t,n);return this}function sr(t){return this.__data__.has(t)}nr.prototype.add=nr.prototype.push=er;nr.prototype.has=sr;function or(t){var r=this.__data__=new Gt(t);this.size=r.size}function ar(){this.__data__=new Gt;this.size=0}function hr(t){var r=this.__data__,i=r["delete"](t);this.size=r.size;return i}function ur(t){return this.__data__.get(t)}function fr(t){return this.__data__.has(t)}function cr(t,r){var n=this.__data__;if(n instanceof Gt){var e=n.__data__;if(!St||e.length<i-1){e.push([t,r]);this.size=++n.size;return this}n=this.__data__=new Wt(e)}n.set(t,r);this.size=n.size;return this}or.prototype.clear=ar;or.prototype["delete"]=hr;or.prototype.get=ur;or.prototype.has=fr;or.prototype.set=cr;function lr(t,r){var i=$r(t),n=!i&&kr(t),e=!i&&!n&&qr(t),s=!i&&!n&&!e&&Vr(t),o=i||n||e||s,a=o?rt(t.length,String):[],h=a.length;for(var u in t){if((r||dt.call(t,u))&&!(o&&(u=="length"||e&&(u=="offset"||u=="parent")||s&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||xr(u,h)))){a.push(u)}}return a}function dr(t,r){var i=t.length;while(i--){if(Br(t[i][0],r)){return i}}return-1}function vr(t,r,i){var n=r(t);return $r(t)?n:Z(n,i(t))}function wr(t){if(t==null){return t===undefined?O:b}return Et&&Et in Object(t)?Nr(t):Dr(t)}function pr(t){return Qr(t)&&wr(t)==a}function yr(t,r,i,n,e){if(t===r){return true}if(t==null||r==null||!Qr(t)&&!Qr(r)){return t!==t&&r!==r}return br(t,r,i,n,yr,e)}function br(t,r,i,n,s,o){var u=$r(t),f=$r(r),c=u?h:jr(t),l=f?h:jr(r);c=c==a?g:c;l=l==a?g:l;var d=c==g,v=l==g,w=c==l;if(w&&qr(t)){if(!qr(r)){return false}u=true;d=false}if(w&&!d){o||(o=new or);return u||Vr(t)?Er(t,r,i,n,s,o):Mr(t,r,c,i,n,s,o)}if(!(i&e)){var p=d&&dt.call(t,"__wrapped__"),y=v&&dt.call(r,"__wrapped__");if(p||y){var b=p?t.value():t,m=y?r.value():r;o||(o=new or);return s(b,m,i,n,o)}}if(!w){return false}o||(o=new or);return _r(t,r,i,n,s,o)}function gr(t){if(!Gr(t)||Rr(t)){return false}var r=Kr(t)?pt:F;return r.test(Ur(t))}function mr(t){return Qr(t)&&Hr(t.length)&&!!L[wr(t)]}function Ar(t){if(!Tr(t)){return It(t)}var r=[];for(var i in Object(t)){if(dt.call(t,i)&&i!="constructor"){r.push(i)}}return r}function Er(t,r,i,n,o,a){var h=i&e,u=t.length,f=r.length;if(u!=f&&!(h&&f>u)){return false}var c=a.get(t);if(c&&a.get(r)){return c==r}var l=-1,d=true,v=i&s?new nr:undefined;a.set(t,r);a.set(r,t);while(++l<u){var w=t[l],p=r[l];if(n){var y=h?n(p,w,l,r,t,a):n(w,p,l,t,r,a)}if(y!==undefined){if(y){continue}d=false;break}if(v){if(!tt(r,(function(t,r){if(!nt(v,r)&&(w===t||o(w,t,i,n,a))){return v.push(r)}}))){d=false;break}}else if(!(w===p||o(w,p,i,n,a))){d=false;break}}a["delete"](t);a["delete"](r);return d}function Mr(t,r,i,n,o,a,h){switch(i){case C:if(t.byteLength!=r.byteLength||t.byteOffset!=r.byteOffset){return false}t=t.buffer;r=r.buffer;case N:if(t.byteLength!=r.byteLength||!a(new gt(t),new gt(r))){return false}return true;case f:case c:case y:return Br(+t,+r);case l:return t.name==r.name&&t.message==r.message;case E:case _:return t==r+"";case p:var u=st;case M:var d=n&e;u||(u=at);if(t.size!=r.size&&!d){return false}var v=h.get(t);if(v){return v==r}n|=s;h.set(t,r);var w=Er(u(t),u(r),n,o,a,h);h["delete"](t);return w;case I:if(kt){return kt.call(t)==kt.call(r)}}return false}function _r(t,r,i,n,s,o){var a=i&e,h=Ir(t),u=h.length,f=Ir(r),c=f.length;if(u!=c&&!a){return false}var l=u;while(l--){var d=h[l];if(!(a?d in r:dt.call(r,d))){return false}}var v=o.get(t);if(v&&o.get(r)){return v==r}var w=true;o.set(t,r);o.set(r,t);var p=a;while(++l<u){d=h[l];var y=t[d],b=r[d];if(n){var g=a?n(b,y,d,r,t,o):n(y,b,d,t,r,o)}if(!(g===undefined?y===b||s(y,b,i,n,o):g)){w=false;break}p||(p=d=="constructor")}if(w&&!p){var m=t.constructor,A=r.constructor;if(m!=A&&("constructor"in t&&"constructor"in r)&&!(typeof m=="function"&&m instanceof m&&typeof A=="function"&&A instanceof A)){w=false}}o["delete"](t);o["delete"](r);return w}function Ir(t){return vr(t,zr,Cr)}function Or(t,r){var i=t.__data__;return Pr(r)?i[typeof r=="string"?"string":"hash"]:i.map}function Sr(t,r){var i=et(t,r);return gr(i)?i:undefined}function Nr(t){var r=dt.call(t,Et),i=t[Et];try{t[Et]=undefined;var n=true}catch(t){}var e=wt.call(t);if(n){if(r){t[Et]=i}else{delete t[Et]}}return e}var Cr=!Mt?Jr:function(t){if(t==null){return[]}t=Object(t);return X(Mt(t),(function(r){return mt.call(t,r)}))};var jr=wr;if(Ot&&jr(new Ot(new ArrayBuffer(1)))!=C||St&&jr(new St)!=p||Nt&&jr(Nt.resolve())!=m||Ct&&jr(new Ct)!=M||jt&&jr(new jt)!=S){jr=function(t){var r=wr(t),i=r==g?t.constructor:undefined,n=i?Ur(i):"";if(n){switch(n){case Pt:return C;case Rt:return p;case Tt:return m;case Dt:return M;case Ut:return S}}return r}}function xr(t,r){r=r==null?o:r;return!!r&&(typeof t=="number"||q.test(t))&&(t>-1&&t%1==0&&t<r)}function Pr(t){var r=typeof t;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?t!=="__proto__":t===null}function Rr(t){return!!vt&&vt in t}function Tr(t){var r=t&&t.constructor,i=typeof r=="function"&&r.prototype||ft;return t===i}function Dr(t){return wt.call(t)}function Ur(t){if(t!=null){try{return lt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Br(t,r){return t===r||t!==t&&r!==r}var kr=pr(function(){return arguments}())?pr:function(t){return Qr(t)&&dt.call(t,"callee")&&!mt.call(t,"callee")};var $r=Array.isArray;function Fr(t){return t!=null&&Hr(t.length)&&!Kr(t)}var qr=_t||Yr;function Lr(t,r){return yr(t,r)}function Kr(t){if(!Gr(t)){return false}var r=wr(t);return r==d||r==v||r==u||r==A}function Hr(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=o}function Gr(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")}function Qr(t){return t!=null&&typeof t=="object"}var Vr=W?it(W):mr;function zr(t){return Fr(t)?lr(t):Ar(t)}function Jr(){return[]}function Yr(){return false}t.exports=Lr})(Ty,Ty.exports);const Dy=Ty.exports;function Uy(t,r){return r=r||{},new Promise((function(i,n){var e=new XMLHttpRequest,s=[],o=[],a={},h=function(){return{ok:2==(e.status/100|0),statusText:e.statusText,status:e.status,url:e.responseURL,text:function(){return Promise.resolve(e.responseText)},json:function(){return Promise.resolve(e.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([e.response]))},clone:h,headers:{keys:function(){return s},entries:function(){return o},get:function(t){return a[t.toLowerCase()]},has:function(t){return t.toLowerCase()in a}}}};for(var u in e.open(r.method||"get",t,!0),e.onload=function(){e.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,(function(t,r,i){s.push(r=r.toLowerCase()),o.push([r,i]),a[r]=a[r]?a[r]+","+i:i})),i(h())},e.onerror=n,e.withCredentials="include"==r.credentials,r.headers)e.setRequestHeader(u,r.headers[u]);e.send(r.body||null)}))}const By=Object.freeze({__proto__:null,default:Uy});const ky=n(By);var $y=self.fetch||(self.fetch=ky.default||ky);function Fy(t,r){if(t.length>=255)throw new TypeError("Alphabet too long");for(var i=new Uint8Array(256),n=0;n<i.length;n++)i[n]=255;for(var e=0;e<t.length;e++){var s=t.charAt(e),o=s.charCodeAt(0);if(i[o]!==255)throw new TypeError(s+" is ambiguous");i[o]=e}var a=t.length,h=t.charAt(0),u=Math.log(a)/Math.log(256),f=Math.log(256)/Math.log(a);function c(r){if(r instanceof Uint8Array||(ArrayBuffer.isView(r)?r=new Uint8Array(r.buffer,r.byteOffset,r.byteLength):Array.isArray(r)&&(r=Uint8Array.from(r))),!(r instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(r.length===0)return"";for(var i=0,n=0,e=0,s=r.length;e!==s&&r[e]===0;)e++,i++;for(var o=(s-e)*f+1>>>0,u=new Uint8Array(o);e!==s;){for(var c=r[e],l=0,d=o-1;(c!==0||l<n)&&d!==-1;d--,l++)c+=256*u[d]>>>0,u[d]=c%a>>>0,c=c/a>>>0;if(c!==0)throw new Error("Non-zero carry");n=l,e++}for(var v=o-n;v!==o&&u[v]===0;)v++;for(var w=h.repeat(i);v<o;++v)w+=t.charAt(u[v]);return w}function l(t){if(typeof t!="string")throw new TypeError("Expected String");if(t.length===0)return new Uint8Array;var r=0;if(t[r]!==" "){for(var n=0,e=0;t[r]===h;)n++,r++;for(var s=(t.length-r)*u+1>>>0,o=new Uint8Array(s);t[r];){var f=i[t.charCodeAt(r)];if(f===255)return;for(var c=0,l=s-1;(f!==0||c<e)&&l!==-1;l--,c++)f+=a*o[l]>>>0,o[l]=f%256>>>0,f=f/256>>>0;if(f!==0)throw new Error("Non-zero carry");e=c,r++}if(t[r]!==" "){for(var d=s-e;d!==s&&o[d]===0;)d++;for(var v=new Uint8Array(n+(s-d)),w=n;d!==s;)v[w++]=o[d++];return v}}}function d(t){var i=l(t);if(i)return i;throw new Error(`Non-${r} character`)}return{encode:c,decodeUnsafe:l,decode:d}}var qy=Fy,Ly=qy;const Ky=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},Hy=t=>(new TextEncoder).encode(t),Gy=t=>(new TextDecoder).decode(t);class Qy{constructor(t,r,i){this.name=t,this.prefix=r,this.baseEncode=i}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class Vy{constructor(t,r,i){if(this.name=t,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=i}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return Jy(this,t)}}class zy{constructor(t){this.decoders=t}or(t){return Jy(this,t)}decode(t){const r=t[0],i=this.decoders[r];if(i)return i.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Jy=(t,r)=>new zy({...t.decoders||{[t.prefix]:t},...r.decoders||{[r.prefix]:r}});class Yy{constructor(t,r,i,n){this.name=t,this.prefix=r,this.baseEncode=i,this.baseDecode=n,this.encoder=new Qy(t,r,i),this.decoder=new Vy(t,r,n)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const Wy=({name:t,prefix:r,encode:i,decode:n})=>new Yy(t,r,i,n),Xy=({prefix:t,name:r,alphabet:i})=>{const{encode:n,decode:e}=Ly(i,r);return Wy({prefix:t,name:r,encode:n,decode:t=>Ky(e(t))})},Zy=(t,r,i,n)=>{const e={};for(let t=0;t<r.length;++t)e[r[t]]=t;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*i/8|0);let a=0,h=0,u=0;for(let r=0;r<s;++r){const s=e[t[r]];if(s===void 0)throw new SyntaxError(`Non-${n} character`);h=h<<i|s,a+=i,a>=8&&(a-=8,o[u++]=255&h>>a)}if(a>=i||255&h<<8-a)throw new SyntaxError("Unexpected end of data");return o},tb=(t,r,i)=>{const n=r[r.length-1]==="=",e=(1<<i)-1;let s="",o=0,a=0;for(let n=0;n<t.length;++n)for(a=a<<8|t[n],o+=8;o>i;)o-=i,s+=r[e&a>>o];if(o&&(s+=r[e&a<<i-o]),n)for(;s.length*i&7;)s+="=";return s},rb=({name:t,prefix:r,bitsPerChar:i,alphabet:n})=>Wy({prefix:r,name:t,encode(t){return tb(t,n,i)},decode(r){return Zy(r,n,i,t)}}),ib=Wy({prefix:"\0",name:"identity",encode:t=>Gy(t),decode:t=>Hy(t)});var nb=Object.freeze({__proto__:null,identity:ib});const eb=rb({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var sb=Object.freeze({__proto__:null,base2:eb});const ob=rb({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var ab=Object.freeze({__proto__:null,base8:ob});const hb=Xy({prefix:"9",name:"base10",alphabet:"0123456789"});var ub=Object.freeze({__proto__:null,base10:hb});const fb=rb({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),cb=rb({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var lb=Object.freeze({__proto__:null,base16:fb,base16upper:cb});const db=rb({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),vb=rb({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),wb=rb({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),pb=rb({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),yb=rb({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),bb=rb({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),gb=rb({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),mb=rb({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Ab=rb({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Eb=Object.freeze({__proto__:null,base32:db,base32upper:vb,base32pad:wb,base32padupper:pb,base32hex:yb,base32hexupper:bb,base32hexpad:gb,base32hexpadupper:mb,base32z:Ab});const Mb=Xy({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),_b=Xy({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Ib=Object.freeze({__proto__:null,base36:Mb,base36upper:_b});const Ob=Xy({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Sb=Xy({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Nb=Object.freeze({__proto__:null,base58btc:Ob,base58flickr:Sb});const Cb=rb({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),jb=rb({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),xb=rb({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Pb=rb({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Rb=Object.freeze({__proto__:null,base64:Cb,base64pad:jb,base64url:xb,base64urlpad:Pb});const Tb=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),Db=Tb.reduce(((t,r,i)=>(t[i]=r,t)),[]),Ub=Tb.reduce(((t,r,i)=>(t[r.codePointAt(0)]=i,t)),[]);function Bb(t){return t.reduce(((t,r)=>(t+=Db[r],t)),"")}function kb(t){const r=[];for(const i of t){const t=Ub[i.codePointAt(0)];if(t===void 0)throw new Error(`Non-base256emoji character: ${i}`);r.push(t)}return new Uint8Array(r)}const $b=Wy({prefix:"🚀",name:"base256emoji",encode:Bb,decode:kb});var Fb=Object.freeze({__proto__:null,base256emoji:$b}),qb=Qb,Lb=128,Kb=127,Hb=~Kb,Gb=Math.pow(2,31);function Qb(t,r,i){r=r||[],i=i||0;for(var n=i;t>=Gb;)r[i++]=t&255|Lb,t/=128;for(;t&Hb;)r[i++]=t&255|Lb,t>>>=7;return r[i]=t|0,Qb.bytes=i-n+1,r}var Vb=Yb,zb=128,Jb=127;function Yb(t,r){var i=0,r=r||0,n=0,e=r,s,o=t.length;do{if(e>=o)throw Yb.bytes=0,new RangeError("Could not decode varint");s=t[e++],i+=n<28?(s&Jb)<<n:(s&Jb)*Math.pow(2,n),n+=7}while(s>=zb);return Yb.bytes=e-r,i}var Wb=Math.pow(2,7),Xb=Math.pow(2,14),Zb=Math.pow(2,21),tg=Math.pow(2,28),rg=Math.pow(2,35),ig=Math.pow(2,42),ng=Math.pow(2,49),eg=Math.pow(2,56),sg=Math.pow(2,63),og=function(t){return t<Wb?1:t<Xb?2:t<Zb?3:t<tg?4:t<rg?5:t<ig?6:t<ng?7:t<eg?8:t<sg?9:10},ag={encode:qb,decode:Vb,encodingLength:og},hg=ag;const ug=(t,r,i=0)=>(hg.encode(t,r,i),r),fg=t=>hg.encodingLength(t),cg=(t,r)=>{const i=r.byteLength,n=fg(t),e=n+fg(i),s=new Uint8Array(e+i);return ug(t,s,0),ug(i,s,n),s.set(r,e),new lg(t,i,r,s)};class lg{constructor(t,r,i,n){this.code=t,this.size=r,this.digest=i,this.bytes=n}}const dg=({name:t,code:r,encode:i})=>new vg(t,r,i);class vg{constructor(t,r,i){this.name=t,this.code=r,this.encode=i}digest(t){if(t instanceof Uint8Array){const r=this.encode(t);return r instanceof Uint8Array?cg(this.code,r):r.then((t=>cg(this.code,t)))}else throw Error("Unknown type, must be binary type")}}const wg=t=>async r=>new Uint8Array(await crypto.subtle.digest(t,r)),pg=dg({name:"sha2-256",code:18,encode:wg("SHA-256")}),yg=dg({name:"sha2-512",code:19,encode:wg("SHA-512")});Object.freeze({__proto__:null,sha256:pg,sha512:yg});const bg=0,gg="identity",mg=Ky,Ag=t=>cg(bg,mg(t)),Eg={code:bg,name:gg,encode:mg,digest:Ag};Object.freeze({__proto__:null,identity:Eg});new TextEncoder,new TextDecoder;const Mg={...nb,...sb,...ab,...ub,...lb,...Eb,...Ib,...Nb,...Rb,...Fb};function _g(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function Ig(t,r,i,n){return{name:t,prefix:r,encoder:{name:t,prefix:r,encode:i},decoder:{decode:n}}}const Og=Ig("utf8","u",(t=>"u"+new TextDecoder("utf8").decode(t)),(t=>(new TextEncoder).encode(t.substring(1)))),Sg=Ig("ascii","a",(t=>{let r="a";for(let i=0;i<t.length;i++)r+=String.fromCharCode(t[i]);return r}),(t=>{t=t.substring(1);const r=_g(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})),Ng={utf8:Og,"utf-8":Og,hex:Mg.base16,latin1:Sg,ascii:Sg,binary:Sg,...Mg};function Cg(t,r="utf8"){const i=Ng[r];if(!i)throw new Error(`Unsupported encoding "${r}"`);return(r==="utf8"||r==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):i.decoder.decode(`${i.prefix}${t}`)}const jg="wc",xg=2,Pg="core",Rg=`${jg}@2:${Pg}:`,Tg={name:Pg,logger:"error"},Dg={database:":memory:"},Ug="crypto",Bg="client_ed25519_seed",kg=U.ONE_DAY,$g="keychain",Fg="0.3",qg="messages",Lg="0.3",Kg=U.SIX_HOURS,Hg="publisher",Gg="irn",Qg="error",Vg="wss://relay.walletconnect.com",zg="wss://relay.walletconnect.org",Jg="relayer",Yg={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},Wg="_subscription",Xg={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},Zg=U.ONE_SECOND,tm="2.13.3",rm=1e4,im="0.3",nm="WALLETCONNECT_CLIENT_ID",em={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},sm="subscription",om="0.3",am=U.FIVE_SECONDS*1e3,hm="pairing",um="0.3",fm={wc_pairingDelete:{req:{ttl:U.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:U.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:U.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:U.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:U.ONE_DAY,prompt:!1,tag:0},res:{ttl:U.ONE_DAY,prompt:!1,tag:0}}},cm={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},lm={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},dm="history",vm="0.3",wm="expirer",pm={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},ym="0.3",bm="verify-api",gm="https://verify.walletconnect.com",mm="https://verify.walletconnect.org",Am=[gm,mm],Em="echo",Mm="https://echo.walletconnect.com";class _m{constructor(t,r){this.core=t,this.logger=r,this.keychain=new Map,this.name=$g,this.version=Fg,this.initialized=!1,this.storagePrefix=Rg,this.init=async()=>{if(!this.initialized){const t=await this.getKeyChain();typeof t<"u"&&(this.keychain=t),this.initialized=!0}},this.has=t=>(this.isInitialized(),this.keychain.has(t)),this.set=async(t,r)=>{this.isInitialized(),this.keychain.set(t,r),await this.persist()},this.get=t=>{this.isInitialized();const r=this.keychain.get(t);if(typeof r>"u"){const{message:r}=Bl("NO_MATCHING_KEY",`${this.name}: ${t}`);throw new Error(r)}return r},this.del=async t=>{this.isInitialized(),this.keychain.delete(t),await this.persist()},this.core=t,this.logger=Nw(r,this.name)}get context(){return Ow(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(t){await this.core.storage.setItem(this.storageKey,vs(t))}async getKeyChain(){const t=await this.core.storage.getItem(this.storageKey);return typeof t<"u"?ws(t):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:t}=Bl("NOT_INITIALIZED",this.name);throw new Error(t)}}}class Im{constructor(t,r,i){this.core=t,this.logger=r,this.name=Ug,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=t=>(this.isInitialized(),this.keychain.has(t)),this.getClientId=async()=>{this.isInitialized();const t=await this.getClientSeed(),r=fp(t);return op(r.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const t=Yc();return this.setPrivateKey(t.publicKey,t.privateKey)},this.signJWT=async t=>{this.isInitialized();const r=await this.getClientSeed(),i=fp(r),n=Wc(),e=kg;return await cp(n,t,e,i)},this.generateSharedKey=(t,r,i)=>{this.isInitialized();const n=this.getPrivateKey(t),e=Xc(n,r);return this.setSymKey(e,i)},this.setSymKey=async(t,r)=>{this.isInitialized();const i=r||Zc(t);return await this.keychain.set(i,t),i},this.deleteKeyPair=async t=>{this.isInitialized(),await this.keychain.del(t)},this.deleteSymKey=async t=>{this.isInitialized(),await this.keychain.del(t)},this.encode=async(t,r,i)=>{this.isInitialized();const n=hl(i),e=vv(r);if(ul(n)){const r=n.senderPublicKey,i=n.receiverPublicKey;t=await this.generateSharedKey(r,i)}const s=this.getSymKey(t),{type:o,senderPublicKey:a}=n;return nl({type:o,symKey:s,message:e,senderPublicKey:a})},this.decode=async(t,r,i)=>{this.isInitialized();const n=al(r,i);if(ul(n)){const r=n.receiverPublicKey,i=n.senderPublicKey;t=await this.generateSharedKey(r,i)}try{const i=this.getSymKey(t),n=el({symKey:i,encoded:r});return dv(n)}catch(r){this.logger.error(`Failed to decode message from topic: '${t}', clientId: '${await this.getClientId()}'`),this.logger.error(r)}},this.getPayloadType=t=>{const r=ol(t);return il(r.type)},this.getPayloadSenderPublicKey=t=>{const r=ol(t);return r.senderPublicKey?qe(r.senderPublicKey,qc):void 0},this.core=t,this.logger=Nw(r,this.name),this.keychain=i||new _m(this.core,this.logger)}get context(){return Ow(this.logger)}async setPrivateKey(t,r){return await this.keychain.set(t,r),t}getPrivateKey(t){return this.keychain.get(t)}async getClientSeed(){let t="";try{t=this.keychain.get(Bg)}catch{t=Wc(),await this.keychain.set(Bg,t)}return Cg(t,"base16")}getSymKey(t){return this.keychain.get(t)}isInitialized(){if(!this.initialized){const{message:t}=Bl("NOT_INITIALIZED",this.name);throw new Error(t)}}}class Om extends Tw{constructor(t,r){super(t,r),this.logger=t,this.core=r,this.messages=new Map,this.name=qg,this.version=Lg,this.initialized=!1,this.storagePrefix=Rg,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const t=await this.getRelayerMessages();typeof t<"u"&&(this.messages=t),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(t){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(t)}finally{this.initialized=!0}}},this.set=async(t,r)=>{this.isInitialized();const i=tl(r);let n=this.messages.get(t);return typeof n>"u"&&(n={}),typeof n[i]<"u"||(n[i]=r,this.messages.set(t,n),await this.persist()),i},this.get=t=>{this.isInitialized();let r=this.messages.get(t);return typeof r>"u"&&(r={}),r},this.has=(t,r)=>{this.isInitialized();const i=this.get(t),n=tl(r);return typeof i[n]<"u"},this.del=async t=>{this.isInitialized(),this.messages.delete(t),await this.persist()},this.logger=Nw(t,this.name),this.core=r}get context(){return Ow(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setRelayerMessages(t){await this.core.storage.setItem(this.storageKey,vs(t))}async getRelayerMessages(){const t=await this.core.storage.getItem(this.storageKey);return typeof t<"u"?ws(t):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:t}=Bl("NOT_INITIALIZED",this.name);throw new Error(t)}}}class Sm extends Dw{constructor(r,i){super(r,i),this.relayer=r,this.logger=i,this.events=new t.exports.EventEmitter,this.name=Hg,this.queue=new Map,this.publishTimeout=U.toMiliseconds(U.ONE_MINUTE),this.failedPublishTimeout=U.toMiliseconds(U.ONE_SECOND),this.needsTransportRestart=!1,this.publish=async(t,r,i)=>{var n;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:t,message:r,opts:i}});const e=i?.ttl||Kg,s=cl(i),o=i?.prompt||!1,a=i?.tag||0,h=i?.id||ay().toString(),u={topic:t,message:r,opts:{ttl:e,relay:s,prompt:o,tag:a,id:h}},f=`Failed to publish payload, please try again. id:${h} tag:${a}`,c=Date.now();let l,d=1;try{for(;l===void 0;){if(Date.now()-c>this.publishTimeout)throw new Error(f);this.logger.trace({id:h,attempts:d},`publisher.publish - attempt ${d}`),l=await await ys(this.rpcPublish(t,r,e,s,o,a,h).catch((t=>this.logger.warn(t))),this.publishTimeout,f),d++,l||await new Promise((t=>setTimeout(t,this.failedPublishTimeout)))}this.relayer.events.emit(Yg.publish,u),this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{id:h,topic:t,message:r,opts:i}})}catch(t){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(t),(n=i?.internal)!=null&&n.throwOnFailedPublish)throw t;this.queue.set(h,u)}},this.on=(t,r)=>{this.events.on(t,r)},this.once=(t,r)=>{this.events.once(t,r)},this.off=(t,r)=>{this.events.off(t,r)},this.removeListener=(t,r)=>{this.events.removeListener(t,r)},this.relayer=r,this.logger=Nw(i,this.name),this.registerEventListeners()}get context(){return Ow(this.logger)}rpcPublish(t,r,i,n,e,s,o){var a,h,u,f;const c={method:ll(n.protocol).publish,params:{topic:t,message:r,ttl:i,prompt:e,tag:s},id:o};return ql((a=c.params)==null?void 0:a.prompt)&&((h=c.params)==null||delete h.prompt),ql((u=c.params)==null?void 0:u.tag)&&((f=c.params)==null||delete f.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:c}),this.relayer.request(c)}removeRequestFromQueue(t){this.queue.delete(t)}checkQueue(){this.queue.forEach((async t=>{const{topic:r,message:i,opts:n}=t;await this.publish(r,i,n)}))}registerEventListeners(){this.relayer.core.heartbeat.on(Pv.pulse,(()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Yg.connection_stalled);return}this.checkQueue()})),this.relayer.on(Yg.message_ack,(t=>{this.removeRequestFromQueue(t.id.toString())}))}}class Nm{constructor(){this.map=new Map,this.set=(t,r)=>{const i=this.get(t);this.exists(t,r)||this.map.set(t,[...i,r])},this.get=t=>this.map.get(t)||[],this.exists=(t,r)=>this.get(t).includes(r),this.delete=(t,r)=>{if(typeof r>"u"){this.map.delete(t);return}if(!this.map.has(t))return;const i=this.get(t);if(!this.exists(t,r))return;const n=i.filter((t=>t!==r));if(!n.length){this.map.delete(t);return}this.map.set(t,n)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var Cm=Object.defineProperty,jm=Object.defineProperties,xm=Object.getOwnPropertyDescriptors,Pm=Object.getOwnPropertySymbols,Rm=Object.prototype.hasOwnProperty,Tm=Object.prototype.propertyIsEnumerable,Dm=(t,r,i)=>r in t?Cm(t,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[r]=i,Um=(t,r)=>{for(var i in r||(r={}))Rm.call(r,i)&&Dm(t,i,r[i]);if(Pm)for(var i of Pm(r))Tm.call(r,i)&&Dm(t,i,r[i]);return t},Bm=(t,r)=>jm(t,xm(r));class km extends kw{constructor(r,i){super(r,i),this.relayer=r,this.logger=i,this.subscriptions=new Map,this.topicMap=new Nm,this.events=new t.exports.EventEmitter,this.name=sm,this.version=om,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=Rg,this.subscribeTimeout=U.toMiliseconds(U.ONE_MINUTE),this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.pendingBatchMessages=[],this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(t,r)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:t,opts:r}});try{const i=cl(r),n={topic:t,relay:i};this.pending.set(t,n);const e=await this.rpcSubscribe(t,i);return typeof e=="string"&&(this.onSubscribe(e,n),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:t,opts:r}})),e}catch(t){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(t),t}},this.unsubscribe=async(t,r)=>{await this.restartToComplete(),this.isInitialized(),typeof r?.id<"u"?await this.unsubscribeById(t,r.id,r):await this.unsubscribeByTopic(t,r)},this.isSubscribed=async t=>{if(this.topics.includes(t))return!0;const r=`${this.pendingSubscriptionWatchLabel}_${t}`;return await new Promise(((i,n)=>{const e=new U.Watch;e.start(r);const s=setInterval((()=>{!this.pending.has(t)&&this.topics.includes(t)&&(clearInterval(s),e.stop(r),i(!0)),e.elapsed(r)>=am&&(clearInterval(s),e.stop(r),n(new Error("Subscription resolution timeout")))}),this.pollingInterval)})).catch((()=>!1))},this.on=(t,r)=>{this.events.on(t,r)},this.once=(t,r)=>{this.events.once(t,r)},this.off=(t,r)=>{this.events.off(t,r)},this.removeListener=(t,r)=>{this.events.removeListener(t,r)},this.start=async()=>{await this.onConnect()},this.stop=async()=>{await this.onDisconnect()},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=r,this.logger=Nw(i,this.name),this.clientId=""}get context(){return Ow(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(t,r){let i=!1;try{i=this.getSubscription(t).topic===r}catch{}return i}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(t,r){const i=this.topicMap.get(t);await Promise.all(i.map((async i=>await this.unsubscribeById(t,i,r))))}async unsubscribeById(t,r,i){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:t,id:r,opts:i}});try{const n=cl(i);await this.rpcUnsubscribe(t,r,n);const e=kl("USER_DISCONNECTED",`${this.name}, ${t}`);await this.onUnsubscribe(t,r,e),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:t,id:r,opts:i}})}catch(t){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(t),t}}async rpcSubscribe(t,r){const i={method:ll(r.protocol).subscribe,params:{topic:t}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});try{return await await ys(this.relayer.request(i).catch((t=>this.logger.warn(t))),this.subscribeTimeout)?tl(t+this.clientId):null}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Yg.connection_stalled)}return null}async rpcBatchSubscribe(t){if(!t.length)return;const r=t[0].relay,i={method:ll(r.protocol).batchSubscribe,params:{topics:t.map((t=>t.topic))}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});try{return await await ys(this.relayer.request(i).catch((t=>this.logger.warn(t))),this.subscribeTimeout)}catch{this.relayer.events.emit(Yg.connection_stalled)}}async rpcBatchFetchMessages(t){if(!t.length)return;const r=t[0].relay,i={method:ll(r.protocol).batchFetchMessages,params:{topics:t.map((t=>t.topic))}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});let n;try{n=await await ys(this.relayer.request(i).catch((t=>this.logger.warn(t))),this.subscribeTimeout)}catch{this.relayer.events.emit(Yg.connection_stalled)}return n}rpcUnsubscribe(t,r,i){const n={method:ll(i.protocol).unsubscribe,params:{topic:t,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n}),this.relayer.request(n)}onSubscribe(t,r){this.setSubscription(t,Bm(Um({},r),{id:t})),this.pending.delete(r.topic)}onBatchSubscribe(t){t.length&&t.forEach((t=>{this.setSubscription(t.id,Um({},t)),this.pending.delete(t.topic)}))}async onUnsubscribe(t,r,i){this.events.removeAllListeners(r),this.hasSubscription(r,t)&&this.deleteSubscription(r,i),await this.relayer.messages.del(t)}async setRelayerSubscriptions(t){await this.relayer.core.storage.setItem(this.storageKey,t)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(t,r){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:t,subscription:r}),this.addSubscription(t,r)}addSubscription(t,r){this.subscriptions.set(t,Um({},r)),this.topicMap.set(r.topic,t),this.events.emit(em.created,r)}getSubscription(t){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:t});const r=this.subscriptions.get(t);if(!r){const{message:r}=Bl("NO_MATCHING_KEY",`${this.name}: ${t}`);throw new Error(r)}return r}deleteSubscription(t,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:t,reason:r});const i=this.getSubscription(t);this.subscriptions.delete(t),this.topicMap.delete(i.topic,t),this.events.emit(em.deleted,Bm(Um({},i),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(em.sync)}async reset(){if(this.cached.length){const t=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<t;r++){const t=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchFetchMessages(t),await this.batchSubscribe(t)}}this.events.emit(em.resubscribed)}async restore(){try{const t=await this.getRelayerSubscriptions();if(typeof t>"u"||!t.length)return;if(this.subscriptions.size){const{message:t}=Bl("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(t)}this.cached=t,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(t){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(t)}}async batchSubscribe(t){if(!t.length)return;const r=await this.rpcBatchSubscribe(t);$l(r)&&this.onBatchSubscribe(r.map(((r,i)=>Bm(Um({},t[i]),{id:r}))))}async batchFetchMessages(t){if(!t.length)return;this.logger.trace(`Fetching batch messages for ${t.length} subscriptions`);const r=await this.rpcBatchFetchMessages(t);r&&r.messages&&(this.pendingBatchMessages=this.pendingBatchMessages.concat(r.messages))}async onConnect(){await this.restart(),this.onEnable()}onDisconnect(){this.onDisable()}async checkPending(){if(!this.initialized||!this.relayer.connected)return;const t=[];this.pending.forEach((r=>{t.push(r)})),await this.batchSubscribe(t),this.pendingBatchMessages.length&&(await this.relayer.handleBatchMessageEvents(this.pendingBatchMessages),this.pendingBatchMessages=[])}registerEventListeners(){this.relayer.core.heartbeat.on(Pv.pulse,(async()=>{await this.checkPending()})),this.events.on(em.created,(async t=>{const r=em.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),await this.persist()})),this.events.on(em.deleted,(async t=>{const r=em.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),await this.persist()}))}isInitialized(){if(!this.initialized){const{message:t}=Bl("NOT_INITIALIZED",this.name);throw new Error(t)}}async restartToComplete(){this.restartInProgress&&await new Promise((t=>{const r=setInterval((()=>{this.restartInProgress||(clearInterval(r),t())}),this.pollingInterval)}))}}var $m=Object.defineProperty,Fm=Object.getOwnPropertySymbols,qm=Object.prototype.hasOwnProperty,Lm=Object.prototype.propertyIsEnumerable,Km=(t,r,i)=>r in t?$m(t,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[r]=i,Hm=(t,r)=>{for(var i in r||(r={}))qm.call(r,i)&&Km(t,i,r[i]);if(Fm)for(var i of Fm(r))Lm.call(r,i)&&Km(t,i,r[i]);return t};class Gm extends Uw{constructor(r){super(r),this.protocol="wc",this.version=2,this.events=new t.exports.EventEmitter,this.name=Jg,this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","stalled","interrupted"],this.hasExperiencedNetworkDisruption=!1,this.requestsInFlight=new Map,this.heartBeatTimeout=U.toMiliseconds(U.THIRTY_SECONDS+U.ONE_SECOND),this.request=async t=>{var r,i;this.logger.debug("Publishing Request Payload");const n=t.id||ay().toString();await this.toEstablishConnection();try{const e=this.provider.request(t);this.requestsInFlight.set(n,{promise:e,request:t}),this.logger.trace({id:n,method:t.method,topic:(r=t.params)==null?void 0:r.topic},"relayer.request - attempt to publish...");const s=await new Promise((async(t,r)=>{const i=()=>{r(new Error(`relayer.request - publish interrupted, id: ${n}`))};this.provider.on(Xg.disconnect,i);const s=await e;this.provider.off(Xg.disconnect,i),t(s)}));return this.logger.trace({id:n,method:t.method,topic:(i=t.params)==null?void 0:i.topic},"relayer.request - published"),s}catch(t){throw this.logger.debug(`Failed to Publish Request: ${n}`),t}finally{this.requestsInFlight.delete(n)}},this.resetPingTimeout=()=>{if(is())try{clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout((()=>{var t,r,i;(i=(r=(t=this.provider)==null?void 0:t.connection)==null?void 0:r.socket)==null||i.terminate()}),this.heartBeatTimeout)}catch(t){this.logger.warn(t)}},this.onPayloadHandler=t=>{this.onProviderPayload(t),this.resetPingTimeout()},this.onConnectHandler=()=>{this.startPingTimeout(),this.events.emit(Yg.connect)},this.onDisconnectHandler=()=>{this.onProviderDisconnect()},this.onProviderErrorHandler=t=>{this.logger.error(t),this.events.emit(Yg.error,t),this.logger.info("Fatal socket error received, closing transport"),this.transportClose()},this.registerProviderListeners=()=>{this.provider.on(Xg.payload,this.onPayloadHandler),this.provider.on(Xg.connect,this.onConnectHandler),this.provider.on(Xg.disconnect,this.onDisconnectHandler),this.provider.on(Xg.error,this.onProviderErrorHandler)},this.core=r.core,this.logger=typeof r.logger<"u"&&typeof r.logger!="string"?Nw(r.logger,this.name):kv(Mw({level:r.logger||Qg})),this.messages=new Om(this.logger,r.core),this.subscriber=new km(this,this.logger),this.publisher=new Sm(this,this.logger),this.relayUrl=r?.relayUrl||Vg,this.projectId=r.projectId,this.bundleId=os(),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${zg}...`),await this.restartTransport(zg)}this.initialized=!0,setTimeout((async()=>{this.subscriber.topics.length===0&&this.subscriber.pending.size===0&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)}),rm)}get context(){return Ow(this.logger)}get connected(){var t,r,i;return((i=(r=(t=this.provider)==null?void 0:t.connection)==null?void 0:r.socket)==null?void 0:i.readyState)===1}get connecting(){var t,r,i;return((i=(r=(t=this.provider)==null?void 0:t.connection)==null?void 0:r.socket)==null?void 0:i.readyState)===0}async publish(t,r,i){this.isInitialized(),await this.publisher.publish(t,r,i),await this.recordMessageEvent({topic:t,message:r,publishedAt:Date.now()})}async subscribe(t,r){var i;this.isInitialized();let n=((i=this.subscriber.topicMap.get(t))==null?void 0:i[0])||"",e;const s=r=>{r.topic===t&&(this.subscriber.off(em.created,s),e())};return await Promise.all([new Promise((t=>{e=t,this.subscriber.on(em.created,s)})),new Promise((async i=>{n=await this.subscriber.subscribe(t,r)||n,i()}))]),n}async unsubscribe(t,r){this.isInitialized(),await this.subscriber.unsubscribe(t,r)}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}off(t,r){this.events.off(t,r)}removeListener(t,r){this.events.removeListener(t,r)}async transportDisconnect(){if(!this.hasExperiencedNetworkDisruption&&this.connected&&this.requestsInFlight.size>0)try{await Promise.all(Array.from(this.requestsInFlight.values()).map((t=>t.promise)))}catch(t){this.logger.warn(t)}this.hasExperiencedNetworkDisruption||this.connected?await ys(this.provider.disconnect(),2e3,"provider.disconnect()").catch((()=>this.onProviderDisconnect())):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(t){await this.confirmOnlineStateOrThrow(),t&&t!==this.relayUrl&&(this.relayUrl=t,await this.transportDisconnect()),await this.createProvider(),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;try{await new Promise((async(t,r)=>{const i=()=>{this.provider.off(Xg.disconnect,i),r(new Error("Connection interrupted while trying to subscribe"))};this.provider.on(Xg.disconnect,i),await ys(this.provider.connect(),U.toMiliseconds(U.ONE_MINUTE),`Socket stalled when trying to connect to ${this.relayUrl}`).catch((t=>{r(t)})),await this.subscriber.start(),this.hasExperiencedNetworkDisruption=!1,t()}))}catch(t){this.logger.error(t);const r=t;if(this.hasExperiencedNetworkDisruption=!0,!this.isConnectionStalled(r.message))throw t}finally{this.connectionAttemptInProgress=!1}}async restartTransport(t){this.connectionAttemptInProgress||(this.relayUrl=t||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await Ed())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(t){if(t?.length===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const r=t.sort(((t,r)=>t.publishedAt-r.publishedAt));this.logger.trace(`Batch of ${r.length} message events sorted`);for(const t of r)try{await this.onMessageEvent(t)}catch(t){this.logger.warn(t)}this.logger.trace(`Batch of ${r.length} message events processed`)}startPingTimeout(){var t,r,i,n,e;if(is())try{(r=(t=this.provider)==null?void 0:t.connection)!=null&&r.socket&&((e=(n=(i=this.provider)==null?void 0:i.connection)==null?void 0:n.socket)==null||e.once("ping",(()=>{this.resetPingTimeout()}))),this.resetPingTimeout()}catch(t){this.logger.warn(t)}}isConnectionStalled(t){return this.staleConnectionErrors.some((r=>t.includes(r)))}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const t=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Sy(new Ry(ls({sdkVersion:tm,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:t,useOnCloseEvent:!0,bundleId:this.bundleId}))),this.registerProviderListeners()}async recordMessageEvent(t){const{topic:r,message:i}=t;await this.messages.set(r,i)}async shouldIgnoreMessageEvent(t){const{topic:r,message:i}=t;if(!i||i.length===0)return this.logger.debug(`Ignoring invalid/empty message: ${i}`),!0;if(!await this.subscriber.isSubscribed(r))return this.logger.debug(`Ignoring message for non-subscribed topic ${r}`),!0;const n=this.messages.has(r,i);return n&&this.logger.debug(`Ignoring duplicate message: ${i}`),n}async onProviderPayload(t){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:t}),My(t)){if(!t.method.endsWith(Wg))return;const r=t.params,{topic:i,message:n,publishedAt:e}=r.data,s={topic:i,message:n,publishedAt:e};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(Hm({type:"event",event:r.id},s)),this.events.emit(r.id,s),await this.acknowledgePayload(t),await this.onMessageEvent(s)}else _y(t)&&this.events.emit(Yg.message_ack,t)}async onMessageEvent(t){await this.shouldIgnoreMessageEvent(t)||(this.events.emit(Yg.message,t),await this.recordMessageEvent(t))}async acknowledgePayload(t){const r=uy(t.id,!0);await this.provider.connection.send(r)}unregisterProviderListeners(){this.provider.off(Xg.payload,this.onPayloadHandler),this.provider.off(Xg.connect,this.onConnectHandler),this.provider.off(Xg.disconnect,this.onDisconnectHandler),this.provider.off(Xg.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let t=await Ed();Od((async r=>{t!==r&&(t=r,r?await this.restartTransport().catch((t=>this.logger.error(t))):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}))}async onProviderDisconnect(){await this.subscriber.stop(),this.requestsInFlight.clear(),clearTimeout(this.pingTimeout),this.events.emit(Yg.disconnect),this.connectionAttemptInProgress=!1,!this.transportExplicitlyClosed&&setTimeout((async()=>{await this.transportOpen().catch((t=>this.logger.error(t)))}),U.toMiliseconds(Zg))}isInitialized(){if(!this.initialized){const{message:t}=Bl("NOT_INITIALIZED",this.name);throw new Error(t)}}async toEstablishConnection(){await this.confirmOnlineStateOrThrow(),!this.connected&&(this.connectionAttemptInProgress&&await new Promise((t=>{const r=setInterval((()=>{this.connected&&(clearInterval(r),t())}),this.connectionStatusPollingInterval)})),await this.transportOpen())}}var Qm=Object.defineProperty,Vm=Object.getOwnPropertySymbols,zm=Object.prototype.hasOwnProperty,Jm=Object.prototype.propertyIsEnumerable,Ym=(t,r,i)=>r in t?Qm(t,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[r]=i,Wm=(t,r)=>{for(var i in r||(r={}))zm.call(r,i)&&Ym(t,i,r[i]);if(Vm)for(var i of Vm(r))Jm.call(r,i)&&Ym(t,i,r[i]);return t};class Xm extends Bw{constructor(t,r,i,n=Rg,e=void 0){super(t,r,i,n),this.core=t,this.logger=r,this.name=i,this.map=new Map,this.version=im,this.cached=[],this.initialized=!1,this.storagePrefix=Rg,this.recentlyDeleted=[],this.recentlyDeletedLimit=200,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach((t=>{this.getKey&&t!==null&&!ql(t)?this.map.set(this.getKey(t),t):zl(t)?this.map.set(t.id,t):Jl(t)&&this.map.set(t.topic,t)})),this.cached=[],this.initialized=!0)},this.set=async(t,r)=>{this.isInitialized(),this.map.has(t)?await this.update(t,r):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:t,value:r}),this.map.set(t,r),await this.persist())},this.get=t=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:t}),this.getData(t)),this.getAll=t=>(this.isInitialized(),t?this.values.filter((r=>Object.keys(t).every((i=>Dy(r[i],t[i]))))):this.values),this.update=async(t,r)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:t,update:r});const i=Wm(Wm({},this.getData(t)),r);this.map.set(t,i),await this.persist()},this.delete=async(t,r)=>{this.isInitialized(),this.map.has(t)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:t,reason:r}),this.map.delete(t),this.addToRecentlyDeleted(t),await this.persist())},this.logger=Nw(r,this.name),this.storagePrefix=n,this.getKey=e}get context(){return Ow(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(t){this.recentlyDeleted.push(t),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(t){await this.core.storage.setItem(this.storageKey,t)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(t){const r=this.map.get(t);if(!r){if(this.recentlyDeleted.includes(t)){const{message:r}=Bl("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${t}`);throw this.logger.error(r),new Error(r)}const{message:r}=Bl("NO_MATCHING_KEY",`${this.name}: ${t}`);throw this.logger.error(r),new Error(r)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const t=await this.getDataStore();if(typeof t>"u"||!t.length)return;if(this.map.size){const{message:t}=Bl("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=t,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(t){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(t)}}isInitialized(){if(!this.initialized){const{message:t}=Bl("NOT_INITIALIZED",this.name);throw new Error(t)}}}class Zm{constructor(t,i){this.core=t,this.logger=i,this.name=hm,this.version=um,this.events=new r,this.initialized=!1,this.storagePrefix=Rg,this.ignoredPayloadTypes=[Gc],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:t})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...t])]},this.create=async t=>{this.isInitialized();const r=Wc(),i=await this.core.crypto.setSymKey(r),n=Es(U.FIVE_MINUTES),e={protocol:Gg},s={topic:i,expiry:n,relay:e,active:!1},o=Ol({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:r,relay:e,expiryTimestamp:n,methods:t?.methods});return this.core.expirer.set(i,n),await this.pairings.set(i,s),await this.core.relayer.subscribe(i),{topic:i,uri:o}},this.pair=async t=>{this.isInitialized(),this.isValidPair(t);const{topic:r,symKey:i,relay:n,expiryTimestamp:e,methods:s}=Ml(t.uri);let o;if(this.pairings.keys.includes(r)&&(o=this.pairings.get(r),o.active))throw new Error(`Pairing already exists: ${r}. Please try again with a new connection URI.`);const a=e||Es(U.FIVE_MINUTES),h={topic:r,relay:n,expiry:a,active:!1,methods:s};return this.core.expirer.set(r,a),await this.pairings.set(r,h),t.activatePairing&&await this.activate({topic:r}),this.events.emit(cm.create,h),this.core.crypto.keychain.has(r)||await this.core.crypto.setSymKey(i,r),await this.core.relayer.subscribe(r,{relay:n}),h},this.activate=async({topic:t})=>{this.isInitialized();const r=Es(U.THIRTY_DAYS);this.core.expirer.set(t,r),await this.pairings.update(t,{active:!0,expiry:r})},this.ping=async t=>{this.isInitialized(),await this.isValidPing(t);const{topic:r}=t;if(this.pairings.keys.includes(r)){const t=await this.sendRequest(r,"wc_pairingPing",{}),{done:i,resolve:n,reject:e}=ps();this.events.once(_s("pairing_ping",t),(({error:t})=>{t?e(t):n()})),await i()}},this.updateExpiry=async({topic:t,expiry:r})=>{this.isInitialized(),await this.pairings.update(t,{expiry:r})},this.updateMetadata=async({topic:t,metadata:r})=>{this.isInitialized(),await this.pairings.update(t,{peerMetadata:r})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async t=>{this.isInitialized(),await this.isValidDisconnect(t);const{topic:r}=t;this.pairings.keys.includes(r)&&(await this.sendRequest(r,"wc_pairingDelete",kl("USER_DISCONNECTED")),await this.deletePairing(r))},this.sendRequest=async(t,r,i)=>{const n=hy(r,i),e=await this.core.crypto.encode(t,n),s=fm[r].req;return this.core.history.set(t,n),this.core.relayer.publish(t,e,s),n.id},this.sendResult=async(t,r,i)=>{const n=uy(t,i),e=await this.core.crypto.encode(r,n),s=await this.core.history.get(r,t),o=fm[s.request.method].res;await this.core.relayer.publish(r,e,o),await this.core.history.resolve(n)},this.sendError=async(t,r,i)=>{const n=fy(t,i),e=await this.core.crypto.encode(r,n),s=await this.core.history.get(r,t),o=fm[s.request.method]?fm[s.request.method].res:fm.unregistered_method.res;await this.core.relayer.publish(r,e,o),await this.core.history.resolve(n)},this.deletePairing=async(t,r)=>{await this.core.relayer.unsubscribe(t),await Promise.all([this.pairings.delete(t,kl("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(t),r?Promise.resolve():this.core.expirer.del(t)])},this.cleanup=async()=>{const t=this.pairings.getAll().filter((t=>Ms(t.expiry)));await Promise.all(t.map((t=>this.deletePairing(t.topic))))},this.onRelayEventRequest=t=>{const{topic:r,payload:i}=t;switch(i.method){case"wc_pairingPing":return this.onPairingPingRequest(r,i);case"wc_pairingDelete":return this.onPairingDeleteRequest(r,i);default:return this.onUnknownRpcMethodRequest(r,i)}},this.onRelayEventResponse=async t=>{const{topic:r,payload:i}=t,n=(await this.core.history.get(r,i.id)).request.method;switch(n){case"wc_pairingPing":return this.onPairingPingResponse(r,i);default:return this.onUnknownRpcMethodResponse(n)}},this.onPairingPingRequest=async(t,r)=>{const{id:i}=r;try{this.isValidPing({topic:t}),await this.sendResult(i,t,!0),this.events.emit(cm.ping,{id:i,topic:t})}catch(r){await this.sendError(i,t,r),this.logger.error(r)}},this.onPairingPingResponse=(t,r)=>{const{id:i}=r;setTimeout((()=>{Iy(r)?this.events.emit(_s("pairing_ping",i),{}):Oy(r)&&this.events.emit(_s("pairing_ping",i),{error:r.error})}),500)},this.onPairingDeleteRequest=async(t,r)=>{const{id:i}=r;try{this.isValidDisconnect({topic:t}),await this.deletePairing(t),this.events.emit(cm.delete,{id:i,topic:t})}catch(r){await this.sendError(i,t,r),this.logger.error(r)}},this.onUnknownRpcMethodRequest=async(t,r)=>{const{id:i,method:n}=r;try{if(this.registeredMethods.includes(n))return;const r=kl("WC_METHOD_UNSUPPORTED",n);await this.sendError(i,t,r),this.logger.error(r)}catch(r){await this.sendError(i,t,r),this.logger.error(r)}},this.onUnknownRpcMethodResponse=t=>{this.registeredMethods.includes(t)||this.logger.error(kl("WC_METHOD_UNSUPPORTED",t))},this.isValidPair=t=>{var r;if(!ud(t)){const{message:r}=Bl("MISSING_OR_INVALID",`pair() params: ${t}`);throw new Error(r)}if(!Vl(t.uri)){const{message:r}=Bl("MISSING_OR_INVALID",`pair() uri: ${t.uri}`);throw new Error(r)}const i=Ml(t.uri);if(!((r=i?.relay)!=null&&r.protocol)){const{message:t}=Bl("MISSING_OR_INVALID","pair() uri#relay-protocol");throw new Error(t)}if(!(i!=null&&i.symKey)){const{message:t}=Bl("MISSING_OR_INVALID","pair() uri#symKey");throw new Error(t)}if(i!=null&&i.expiryTimestamp&&U.toMiliseconds(i?.expiryTimestamp)<Date.now()){const{message:t}=Bl("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(t)}},this.isValidPing=async t=>{if(!ud(t)){const{message:r}=Bl("MISSING_OR_INVALID",`ping() params: ${t}`);throw new Error(r)}const{topic:r}=t;await this.isValidPairingTopic(r)},this.isValidDisconnect=async t=>{if(!ud(t)){const{message:r}=Bl("MISSING_OR_INVALID",`disconnect() params: ${t}`);throw new Error(r)}const{topic:r}=t;await this.isValidPairingTopic(r)},this.isValidPairingTopic=async t=>{if(!Ll(t,!1)){const{message:r}=Bl("MISSING_OR_INVALID",`pairing topic should be a string: ${t}`);throw new Error(r)}if(!this.pairings.keys.includes(t)){const{message:r}=Bl("NO_MATCHING_KEY",`pairing topic doesn't exist: ${t}`);throw new Error(r)}if(Ms(this.pairings.get(t).expiry)){await this.deletePairing(t);const{message:r}=Bl("EXPIRED",`pairing topic: ${t}`);throw new Error(r)}},this.core=t,this.logger=Nw(i,this.name),this.pairings=new Xm(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Ow(this.logger)}isInitialized(){if(!this.initialized){const{message:t}=Bl("NOT_INITIALIZED",this.name);throw new Error(t)}}registerRelayerEvents(){this.core.relayer.on(Yg.message,(async t=>{const{topic:r,message:i}=t;if(!this.pairings.keys.includes(r)||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(i)))return;const n=await this.core.crypto.decode(r,i);try{My(n)?(this.core.history.set(r,n),this.onRelayEventRequest({topic:r,payload:n})):_y(n)&&(await this.core.history.resolve(n),await this.onRelayEventResponse({topic:r,payload:n}),this.core.history.delete(r,n.id))}catch(t){this.logger.error(t)}}))}registerExpirerEvents(){this.core.expirer.on(pm.expired,(async t=>{const{topic:r}=As(t.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit(cm.expire,{topic:r}))}))}}class tA extends Rw{constructor(r,i){super(r,i),this.core=r,this.logger=i,this.records=new Map,this.events=new t.exports.EventEmitter,this.name=dm,this.version=vm,this.cached=[],this.initialized=!1,this.storagePrefix=Rg,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach((t=>this.records.set(t.id,t))),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(t,r,i)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:t,request:r,chainId:i}),this.records.has(r.id))return;const n={id:r.id,topic:t,request:{method:r.method,params:r.params||null},chainId:i,expiry:Es(U.THIRTY_DAYS)};this.records.set(n.id,n),this.persist(),this.events.emit(lm.created,n)},this.resolve=async t=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:t}),!this.records.has(t.id))return;const r=await this.getRecord(t.id);typeof r.response>"u"&&(r.response=Oy(t)?{error:t.error}:{result:t.result},this.records.set(r.id,r),this.persist(),this.events.emit(lm.updated,r))},this.get=async(t,r)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:t,id:r}),await this.getRecord(r)),this.delete=(t,r)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:r}),this.values.forEach((i=>{if(i.topic===t){if(typeof r<"u"&&i.id!==r)return;this.records.delete(i.id),this.events.emit(lm.deleted,i)}})),this.persist()},this.exists=async(t,r)=>(this.isInitialized(),this.records.has(r)?(await this.getRecord(r)).topic===t:!1),this.on=(t,r)=>{this.events.on(t,r)},this.once=(t,r)=>{this.events.once(t,r)},this.off=(t,r)=>{this.events.off(t,r)},this.removeListener=(t,r)=>{this.events.removeListener(t,r)},this.logger=Nw(i,this.name)}get context(){return Ow(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const t=[];return this.values.forEach((r=>{if(typeof r.response<"u")return;const i={topic:r.topic,request:hy(r.request.method,r.request.params,r.id),chainId:r.chainId};return t.push(i)})),t}async setJsonRpcRecords(t){await this.core.storage.setItem(this.storageKey,t)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(t){this.isInitialized();const r=this.records.get(t);if(!r){const{message:r}=Bl("NO_MATCHING_KEY",`${this.name}: ${t}`);throw new Error(r)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(lm.sync)}async restore(){try{const t=await this.getJsonRpcRecords();if(typeof t>"u"||!t.length)return;if(this.records.size){const{message:t}=Bl("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=t,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(t){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(t)}}registerEventListeners(){this.events.on(lm.created,(t=>{const r=lm.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:t})})),this.events.on(lm.updated,(t=>{const r=lm.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:t})})),this.events.on(lm.deleted,(t=>{const r=lm.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:t})})),this.core.heartbeat.on(Pv.pulse,(()=>{this.cleanup()}))}cleanup(){try{this.isInitialized();let t=!1;this.records.forEach((r=>{U.toMiliseconds(r.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${r.id}`),this.records.delete(r.id),this.events.emit(lm.deleted,r,!1),t=!0)})),t&&this.persist()}catch(t){this.logger.warn(t)}}isInitialized(){if(!this.initialized){const{message:t}=Bl("NOT_INITIALIZED",this.name);throw new Error(t)}}}class rA extends $w{constructor(r,i){super(r,i),this.core=r,this.logger=i,this.expirations=new Map,this.events=new t.exports.EventEmitter,this.name=wm,this.version=ym,this.cached=[],this.initialized=!1,this.storagePrefix=Rg,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach((t=>this.expirations.set(t.target,t))),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=t=>{try{const r=this.formatTarget(t);return typeof this.getExpiration(r)<"u"}catch{return!1}},this.set=(t,r)=>{this.isInitialized();const i=this.formatTarget(t),n={target:i,expiry:r};this.expirations.set(i,n),this.checkExpiry(i,n),this.events.emit(pm.created,{target:i,expiration:n})},this.get=t=>{this.isInitialized();const r=this.formatTarget(t);return this.getExpiration(r)},this.del=t=>{if(this.isInitialized(),this.has(t)){const r=this.formatTarget(t),i=this.getExpiration(r);this.expirations.delete(r),this.events.emit(pm.deleted,{target:r,expiration:i})}},this.on=(t,r)=>{this.events.on(t,r)},this.once=(t,r)=>{this.events.once(t,r)},this.off=(t,r)=>{this.events.off(t,r)},this.removeListener=(t,r)=>{this.events.removeListener(t,r)},this.logger=Nw(i,this.name)}get context(){return Ow(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(t){if(typeof t=="string")return gs(t);if(typeof t=="number")return ms(t);const{message:r}=Bl("UNKNOWN_TYPE",`Target type: ${typeof t}`);throw new Error(r)}async setExpirations(t){await this.core.storage.setItem(this.storageKey,t)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(pm.sync)}async restore(){try{const t=await this.getExpirations();if(typeof t>"u"||!t.length)return;if(this.expirations.size){const{message:t}=Bl("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=t,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(t){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(t)}}getExpiration(t){const r=this.expirations.get(t);if(!r){const{message:r}=Bl("NO_MATCHING_KEY",`${this.name}: ${t}`);throw this.logger.warn(r),new Error(r)}return r}checkExpiry(t,r){const{expiry:i}=r;U.toMiliseconds(i)-Date.now()<=0&&this.expire(t,r)}expire(t,r){this.expirations.delete(t),this.events.emit(pm.expired,{target:t,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach(((t,r)=>this.checkExpiry(r,t)))}registerEventListeners(){this.core.heartbeat.on(Pv.pulse,(()=>this.checkExpirations())),this.events.on(pm.created,(t=>{const r=pm.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),this.persist()})),this.events.on(pm.expired,(t=>{const r=pm.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),this.persist()})),this.events.on(pm.deleted,(t=>{const r=pm.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),this.persist()}))}isInitialized(){if(!this.initialized){const{message:t}=Bl("NOT_INITIALIZED",this.name);throw new Error(t)}}}class iA extends Fw{constructor(t,r){super(t,r),this.projectId=t,this.logger=r,this.name=bm,this.initialized=!1,this.queue=[],this.verifyDisabled=!1,this.init=async t=>{if(this.verifyDisabled||ns()||!es())return;const r=this.getVerifyUrl(t?.verifyUrl);this.verifyUrl!==r&&this.removeIframe(),this.verifyUrl=r;try{await this.createIframe()}catch(t){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(t)}if(!this.initialized){this.removeIframe(),this.verifyUrl=mm;try{await this.createIframe()}catch(t){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(t),this.verifyDisabled=!0}}},this.register=async t=>{this.initialized?this.sendPost(t.attestationId):(this.addToQueue(t.attestationId),await this.init())},this.resolve=async t=>{if(this.isDevEnv)return"";const r=this.getVerifyUrl(t?.verifyUrl);let i;try{i=await this.fetchAttestation(t.attestationId,r)}catch(n){this.logger.info(`failed to resolve attestation: ${t.attestationId} from url: ${r}`),this.logger.info(n),i=await this.fetchAttestation(t.attestationId,mm)}return i},this.fetchAttestation=async(t,r)=>{this.logger.info(`resolving attestation: ${t} from url: ${r}`);const i=this.startAbortTimer(U.ONE_SECOND*2),n=await fetch(`${r}/attestation/${t}`,{signal:this.abortController.signal});return clearTimeout(i),n.status===200?await n.json():void 0},this.addToQueue=t=>{this.queue.push(t)},this.processQueue=()=>{this.queue.length!==0&&(this.queue.forEach((t=>this.sendPost(t))),this.queue=[])},this.sendPost=t=>{var r;try{if(!this.iframe)return;(r=this.iframe.contentWindow)==null||r.postMessage(t,"*"),this.logger.info(`postMessage sent: ${t} ${this.verifyUrl}`)}catch{}},this.createIframe=async()=>{let t;const r=i=>{i.data==="verify_ready"&&(this.onInit(),window.removeEventListener("message",r),t())};await Promise.race([new Promise((i=>{const n=document.getElementById(bm);if(n)return this.iframe=n,this.onInit(),i();window.addEventListener("message",r);const e=document.createElement("iframe");e.id=bm,e.src=`${this.verifyUrl}/${this.projectId}`,e.style.display="none",document.body.append(e),this.iframe=e,t=i})),new Promise(((t,i)=>setTimeout((()=>{window.removeEventListener("message",r),i("verify iframe load timeout")}),U.toMiliseconds(U.FIVE_SECONDS))))])},this.onInit=()=>{this.initialized=!0,this.processQueue()},this.removeIframe=()=>{this.iframe&&(this.iframe.remove(),this.iframe=void 0,this.initialized=!1)},this.getVerifyUrl=t=>{let r=t||gm;return Am.includes(r)||(this.logger.info(`verify url: ${r}, not included in trusted list, assigning default: ${gm}`),r=gm),r},this.logger=Nw(r,this.name),this.verifyUrl=gm,this.abortController=new AbortController,this.isDevEnv=is()&&i.env.IS_VITEST}get context(){return Ow(this.logger)}startAbortTimer(t){return this.abortController=new AbortController,setTimeout((()=>this.abortController.abort()),U.toMiliseconds(t))}}class nA extends qw{constructor(t,r){super(t,r),this.projectId=t,this.logger=r,this.context=Em,this.registerDeviceToken=async t=>{const{clientId:r,token:i,notificationType:n,enableEncrypted:e=!1}=t,s=`${Mm}/${this.projectId}/clients`;await $y(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:r,type:n,token:i,always_raw:e})})},this.logger=Nw(r,this.context)}}var eA=Object.defineProperty,sA=Object.getOwnPropertySymbols,oA=Object.prototype.hasOwnProperty,aA=Object.prototype.propertyIsEnumerable,hA=(t,r,i)=>r in t?eA(t,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[r]=i,uA=(t,r)=>{for(var i in r||(r={}))oA.call(r,i)&&hA(t,i,r[i]);if(sA)for(var i of sA(r))aA.call(r,i)&&hA(t,i,r[i]);return t};class fA extends Pw{constructor(r){var i;super(r),this.protocol=jg,this.version=xg,this.name=Pg,this.events=new t.exports.EventEmitter,this.initialized=!1,this.on=(t,r)=>this.events.on(t,r),this.once=(t,r)=>this.events.once(t,r),this.off=(t,r)=>this.events.off(t,r),this.removeListener=(t,r)=>this.events.removeListener(t,r),this.projectId=r?.projectId,this.relayUrl=r?.relayUrl||Vg,this.customStoragePrefix=r!=null&&r.customStoragePrefix?`:${r.customStoragePrefix}`:"";const n=Mw({level:typeof r?.logger=="string"&&r.logger?r.logger:Tg.logger}),{logger:e,chunkLoggerController:s}=xw({opts:n,maxSizeInBytes:r?.maxLogBlobSizeInBytes,loggerOverride:r?.logger});this.logChunkController=s,(i=this.logChunkController)!=null&&i.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var t,r;(t=this.logChunkController)!=null&&t.downloadLogsBlobInBrowser&&((r=this.logChunkController)==null||r.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=Nw(e,this.name),this.heartbeat=new Rv,this.crypto=new Im(this,this.logger,r?.keychain),this.history=new tA(this,this.logger),this.expirer=new rA(this,this.logger),this.storage=r!=null&&r.storage?r.storage:new Nv(uA(uA({},Dg),r?.storageOptions)),this.relayer=new Gm({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new Zm(this,this.logger),this.verify=new iA(this.projectId||"",this.logger),this.echoClient=new nA(this.projectId||"",this.logger)}static async init(t){const r=new fA(t);await r.initialize();const i=await r.crypto.getClientId();return await r.storage.setItem(nm,i),r}get context(){return Ow(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var t;return(t=this.logChunkController)==null?void 0:t.logsToBlob({clientId:await this.crypto.getClientId()})}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(t){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,t),this.logger.error(t.message),t}}}const cA=fA;const lA="wc",dA=2,vA="client",wA=`${lA}@${dA}:${vA}:`,pA={name:vA,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},yA="WALLETCONNECT_DEEPLINK_CHOICE",bA="proposal",gA="Proposal expired",mA="session",AA=U.SEVEN_DAYS,EA="engine",MA={wc_sessionPropose:{req:{ttl:U.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:U.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:U.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:U.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:U.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:U.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:U.ONE_DAY,prompt:!1,tag:1104},res:{ttl:U.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:U.ONE_DAY,prompt:!1,tag:1106},res:{ttl:U.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:U.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:U.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:U.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:U.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:U.ONE_DAY,prompt:!1,tag:1112},res:{ttl:U.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:U.ONE_DAY,prompt:!1,tag:1114},res:{ttl:U.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:U.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:U.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:U.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:U.FIVE_MINUTES,prompt:!1,tag:1119}}},_A={min:U.FIVE_MINUTES,max:U.SEVEN_DAYS},IA={idle:"IDLE",active:"ACTIVE"},OA="request",SA=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"],NA="wc",CA="auth",jA="authKeys",xA="pairingTopics",PA="requests",RA=`${NA}@${1.5}:${CA}:`,TA=`${RA}:PUB_KEY`;var DA=Object.defineProperty,UA=Object.defineProperties,BA=Object.getOwnPropertyDescriptors,kA=Object.getOwnPropertySymbols,$A=Object.prototype.hasOwnProperty,FA=Object.prototype.propertyIsEnumerable,qA=(t,r,i)=>r in t?DA(t,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[r]=i,LA=(t,r)=>{for(var i in r||(r={}))$A.call(r,i)&&qA(t,i,r[i]);if(kA)for(var i of kA(r))FA.call(r,i)&&qA(t,i,r[i]);return t},KA=(t,r)=>UA(t,BA(r));class HA extends Kw{constructor(t){super(t),this.name=EA,this.events=new r,this.initialized=!1,this.requestQueue={state:IA.idle,queue:[]},this.sessionRequestQueue={state:IA.idle,queue:[]},this.requestQueueDelay=U.ONE_SECOND,this.expectedPairingMethodMap=new Map,this.recentlyDeletedMap=new Map,this.recentlyDeletedLimit=200,this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),this.client.core.pairing.register({methods:Object.keys(MA)}),this.initialized=!0,setTimeout((()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()}),U.toMiliseconds(this.requestQueueDelay)))},this.connect=async t=>{await this.isInitialized();const r=KA(LA({},t),{requiredNamespaces:t.requiredNamespaces||{},optionalNamespaces:t.optionalNamespaces||{}});await this.isValidConnect(r);const{pairingTopic:i,requiredNamespaces:n,optionalNamespaces:e,sessionProperties:s,relays:o}=r;let a=i,h,u=!1;try{a&&(u=this.client.core.pairing.pairings.get(a).active)}catch(t){throw this.client.logger.error(`connect() -> pairing.get(${a}) failed`),t}if(!a||!u){const{topic:t,uri:r}=await this.client.core.pairing.create();a=t,h=r}if(!a){const{message:t}=Bl("NO_MATCHING_KEY",`connect() pairing topic: ${a}`);throw new Error(t)}const f=await this.client.core.crypto.generateKeyPair(),c=MA.wc_sessionPropose.req.ttl||U.FIVE_MINUTES,l=Es(c),d=LA({requiredNamespaces:n,optionalNamespaces:e,relays:o??[{protocol:Gg}],proposer:{publicKey:f,metadata:this.client.metadata},expiryTimestamp:l,pairingTopic:a},s&&{sessionProperties:s}),{reject:v,resolve:w,done:p}=ps(c,gA);this.events.once(_s("session_connect"),(async({error:t,session:r})=>{if(t)v(t);else if(r){r.self.publicKey=f;const t=KA(LA({},r),{pairingTopic:d.pairingTopic,requiredNamespaces:d.requiredNamespaces,optionalNamespaces:d.optionalNamespaces});await this.client.session.set(r.topic,t),await this.setExpiry(r.topic,r.expiry),a&&await this.client.core.pairing.updateMetadata({topic:a,metadata:r.peer.metadata}),this.cleanupDuplicatePairings(t),w(t)}}));const y=await this.sendRequest({topic:a,method:"wc_sessionPropose",params:d,throwOnFailedPublish:!0});return await this.setProposal(y,LA({id:y},d)),{uri:h,approval:p}},this.pair=async t=>{await this.isInitialized();try{return await this.client.core.pairing.pair(t)}catch(t){throw this.client.logger.error("pair() failed"),t}},this.approve=async t=>{await this.isInitialized();try{await this.isValidApprove(t)}catch(t){throw this.client.logger.error("approve() -> isValidApprove() failed"),t}const{id:r,relayProtocol:i,namespaces:n,sessionProperties:e,sessionConfig:s}=t;let o;try{o=this.client.proposal.get(r)}catch(t){throw this.client.logger.error(`approve() -> proposal.get(${r}) failed`),t}const{pairingTopic:a,proposer:h,requiredNamespaces:u,optionalNamespaces:f}=o,c=await this.client.core.crypto.generateKeyPair(),l=h.publicKey,d=await this.client.core.crypto.generateSharedKey(c,l),v=LA(LA({relay:{protocol:i??"irn"},namespaces:n,controller:{publicKey:c,metadata:this.client.metadata},expiry:Es(AA)},e&&{sessionProperties:e}),s&&{sessionConfig:s});await this.client.core.relayer.subscribe(d);const w=KA(LA({},v),{topic:d,requiredNamespaces:u,optionalNamespaces:f,pairingTopic:a,acknowledged:!1,self:v.controller,peer:{publicKey:h.publicKey,metadata:h.metadata},controller:c});await this.client.session.set(d,w);try{await this.sendResult({id:r,topic:a,result:{relay:{protocol:i??"irn"},responderPublicKey:c},throwOnFailedPublish:!0}),await this.sendRequest({topic:d,method:"wc_sessionSettle",params:v,throwOnFailedPublish:!0})}catch(t){throw this.client.logger.error(t),this.client.session.delete(d,kl("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(d),t}return await this.client.core.pairing.updateMetadata({topic:a,metadata:h.metadata}),await this.client.proposal.delete(r,kl("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:a}),await this.setExpiry(d,Es(AA)),{topic:d,acknowledged:()=>new Promise((t=>setTimeout((()=>t(this.client.session.get(d))),500)))}},this.reject=async t=>{await this.isInitialized();try{await this.isValidReject(t)}catch(t){throw this.client.logger.error("reject() -> isValidReject() failed"),t}const{id:r,reason:i}=t;let n;try{n=this.client.proposal.get(r).pairingTopic}catch(t){throw this.client.logger.error(`reject() -> proposal.get(${r}) failed`),t}n&&(await this.sendError({id:r,topic:n,error:i,rpcOpts:MA.wc_sessionPropose.reject}),await this.client.proposal.delete(r,kl("USER_DISCONNECTED")))},this.update=async t=>{await this.isInitialized();try{await this.isValidUpdate(t)}catch(t){throw this.client.logger.error("update() -> isValidUpdate() failed"),t}const{topic:r,namespaces:i}=t,{done:n,resolve:e,reject:s}=ps(),o=oy(),a=ay().toString(),h=this.client.session.get(r).namespaces;return this.events.once(_s("session_update",o),(({error:t})=>{t?s(t):e()})),await this.client.session.update(r,{namespaces:i}),await this.sendRequest({topic:r,method:"wc_sessionUpdate",params:{namespaces:i},throwOnFailedPublish:!0,clientRpcId:o,relayRpcId:a}).catch((t=>{this.client.logger.error(t),this.client.session.update(r,{namespaces:h}),s(t)})),{acknowledged:n}},this.extend=async t=>{await this.isInitialized();try{await this.isValidExtend(t)}catch(t){throw this.client.logger.error("extend() -> isValidExtend() failed"),t}const{topic:r}=t,i=oy(),{done:n,resolve:e,reject:s}=ps();return this.events.once(_s("session_extend",i),(({error:t})=>{t?s(t):e()})),await this.setExpiry(r,Es(AA)),this.sendRequest({topic:r,method:"wc_sessionExtend",params:{},clientRpcId:i,throwOnFailedPublish:!0}).catch((t=>{s(t)})),{acknowledged:n}},this.request=async t=>{await this.isInitialized();try{await this.isValidRequest(t)}catch(t){throw this.client.logger.error("request() -> isValidRequest() failed"),t}const{chainId:r,request:i,topic:n,expiry:e=MA.wc_sessionRequest.req.ttl}=t,s=this.client.session.get(n),o=oy(),a=ay().toString(),{done:h,resolve:u,reject:f}=ps(e,"Request expired. Please try again.");return this.events.once(_s("session_request",o),(({error:t,result:r})=>{t?f(t):u(r)})),await Promise.all([new Promise((async t=>{await this.sendRequest({clientRpcId:o,relayRpcId:a,topic:n,method:"wc_sessionRequest",params:{request:KA(LA({},i),{expiryTimestamp:Es(e)}),chainId:r},expiry:e,throwOnFailedPublish:!0}).catch((t=>f(t))),this.client.events.emit("session_request_sent",{topic:n,request:i,chainId:r,id:o}),t()})),new Promise((async t=>{var r;if(!((r=s.sessionConfig)!=null&&r.disableDeepLink)){const t=await Ss(this.client.core.storage,yA);Os({id:o,topic:n,wcDeepLink:t})}t()})),h()]).then((t=>t[2]))},this.respond=async t=>{await this.isInitialized(),await this.isValidRespond(t);const{topic:r,response:i}=t,{id:n}=i;Iy(i)?await this.sendResult({id:n,topic:r,result:i.result,throwOnFailedPublish:!0}):Oy(i)&&await this.sendError({id:n,topic:r,error:i.error}),this.cleanupAfterResponse(t)},this.ping=async t=>{await this.isInitialized();try{await this.isValidPing(t)}catch(t){throw this.client.logger.error("ping() -> isValidPing() failed"),t}const{topic:r}=t;if(this.client.session.keys.includes(r)){const t=oy(),i=ay().toString(),{done:n,resolve:e,reject:s}=ps();this.events.once(_s("session_ping",t),(({error:t})=>{t?s(t):e()})),await Promise.all([this.sendRequest({topic:r,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:t,relayRpcId:i}),n()])}else this.client.core.pairing.pairings.keys.includes(r)&&await this.client.core.pairing.ping({topic:r})},this.emit=async t=>{await this.isInitialized(),await this.isValidEmit(t);const{topic:r,event:i,chainId:n}=t,e=ay().toString();await this.sendRequest({topic:r,method:"wc_sessionEvent",params:{event:i,chainId:n},throwOnFailedPublish:!0,relayRpcId:e})},this.disconnect=async t=>{await this.isInitialized(),await this.isValidDisconnect(t);const{topic:r}=t;if(this.client.session.keys.includes(r))await this.sendRequest({topic:r,method:"wc_sessionDelete",params:kl("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:r,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(r))await this.client.core.pairing.disconnect({topic:r});else{const{message:t}=Bl("MISMATCHED_TOPIC",`Session or pairing topic not found: ${r}`);throw new Error(t)}},this.find=t=>(this.isInitialized(),this.client.session.getAll().filter((r=>Hl(r,t)))),this.getPendingSessionRequests=()=>this.client.pendingRequest.getAll(),this.authenticate=async t=>{this.isInitialized(),this.isValidAuthenticate(t);const{chains:r,statement:i="",uri:n,domain:e,nonce:s,type:o,exp:a,nbf:h,methods:u=[],expiry:f}=t,c=[...t.resources||[]],{topic:l,uri:d}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"]});this.client.logger.info({message:"Generated new pairing",pairing:{topic:l,uri:d}});const v=await this.client.core.crypto.generateKeyPair(),w=Zc(v);if(await Promise.all([this.client.auth.authKeys.set(TA,{responseTopic:w,publicKey:v}),this.client.auth.pairingTopics.set(w,{topic:w,pairingTopic:l})]),await this.client.core.relayer.subscribe(w),this.client.logger.info(`sending request to new pairing topic: ${l}`),u.length>0){const{namespace:t}=He(r[0]);let i=Pc(t,"request",u);$c(c)&&(i=Tc(i,c.pop())),c.push(i)}const p=f&&f>MA.wc_sessionAuthenticate.req.ttl?f:MA.wc_sessionAuthenticate.req.ttl,y={authPayload:{type:o??"caip122",chains:r,statement:i,aud:n,domain:e,version:"1",nonce:s,iat:(new Date).toISOString(),exp:a,nbf:h,resources:c},requester:{publicKey:v,metadata:this.client.metadata},expiryTimestamp:Es(p)},b={eip155:{chains:r,methods:[...new Set(["personal_sign",...u])],events:["chainChanged","accountsChanged"]}},g={requiredNamespaces:{},optionalNamespaces:b,relays:[{protocol:"irn"}],pairingTopic:l,proposer:{publicKey:v,metadata:this.client.metadata},expiryTimestamp:Es(MA.wc_sessionPropose.req.ttl)},{done:m,resolve:A,reject:E}=ps(p,"Request expired"),M=async({error:t,session:r})=>{if(this.events.off(_s("session_request",I),_),t)E(t);else if(r){r.self.publicKey=v,await this.client.session.set(r.topic,r),await this.setExpiry(r.topic,r.expiry),l&&await this.client.core.pairing.updateMetadata({topic:l,metadata:r.peer.metadata});const t=this.client.session.get(r.topic);await this.deleteProposal(O),A({session:t})}},_=async t=>{if(await this.deletePendingAuthRequest(I,{message:"fulfilled",code:0}),t.error){const r=kl("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return t.error.code===r.code?void 0:(this.events.off(_s("session_connect"),M),E(t.error.message))}await this.deleteProposal(O),this.events.off(_s("session_connect"),M);const{cacaos:r,responder:i}=t.result,n=[],e=[];for(const t of r){await Mc({cacao:t,projectId:this.client.core.projectId})||(this.client.logger.error(t,"Signature verification failed"),E(kl("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:r}=t,i=$c(r.resources),s=[Ac(r.iss)],o=Ec(r.iss);if(i){const t=Bc(i),r=kc(i);n.push(...t),s.push(...r)}for(const t of s)e.push(`${t}:${o}`)}const s=await this.client.core.crypto.generateSharedKey(v,i.publicKey);let o;n.length>0&&(o={topic:s,acknowledged:!0,self:{publicKey:v,metadata:this.client.metadata},peer:i,controller:i.publicKey,expiry:Es(AA),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:l,namespaces:Tl([...new Set(n)],[...new Set(e)])},await this.client.core.relayer.subscribe(s),await this.client.session.set(s,o),o=this.client.session.get(s)),A({auths:r,session:o})},I=oy(),O=oy();this.events.once(_s("session_connect"),M),this.events.once(_s("session_request",I),_);try{await Promise.all([this.sendRequest({topic:l,method:"wc_sessionAuthenticate",params:y,expiry:t.expiry,throwOnFailedPublish:!0,clientRpcId:I}),this.sendRequest({topic:l,method:"wc_sessionPropose",params:g,expiry:MA.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:O})])}catch(t){throw this.events.off(_s("session_connect"),M),this.events.off(_s("session_request",I),_),t}return await this.setProposal(O,LA({id:O},g)),await this.setAuthRequest(I,{request:KA(LA({},y),{verifyContext:{}}),pairingTopic:l}),{uri:d,response:m}},this.approveSessionAuthenticate=async t=>{this.isInitialized();const{id:r,auths:i}=t,n=this.getPendingAuthRequest(r);if(!n)throw new Error(`Could not find pending auth request with id ${r}`);const e=n.requester.publicKey,s=await this.client.core.crypto.generateKeyPair(),o=Zc(e),a={type:Gc,receiverPublicKey:e,senderPublicKey:s},h=[],u=[];for(const t of i){if(!await Mc({cacao:t,projectId:this.client.core.projectId})){const t=kl("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:r,topic:o,error:t,encodeOpts:a}),new Error(t.message)}const{p:i}=t,n=$c(i.resources),e=[Ac(i.iss)],s=Ec(i.iss);if(n){const t=Bc(n),r=kc(n);h.push(...t),e.push(...r)}for(const t of e)u.push(`${t}:${s}`)}const f=await this.client.core.crypto.generateSharedKey(s,e);let c;return h?.length>0&&(c={topic:f,acknowledged:!0,self:{publicKey:s,metadata:this.client.metadata},peer:{publicKey:e,metadata:n.requester.metadata},controller:e,expiry:Es(AA),authentication:i,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:"",namespaces:Tl([...new Set(h)],[...new Set(u)])},await this.client.core.relayer.subscribe(f),await this.client.session.set(f,c)),await this.sendResult({topic:o,id:r,result:{cacaos:i,responder:{publicKey:s,metadata:this.client.metadata}},encodeOpts:a,throwOnFailedPublish:!0}),await this.client.auth.requests.delete(r,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:n.pairingTopic}),{session:c}},this.rejectSessionAuthenticate=async t=>{await this.isInitialized();const{id:r,reason:i}=t,n=this.getPendingAuthRequest(r);if(!n)throw new Error(`Could not find pending auth request with id ${r}`);const e=n.requester.publicKey,s=await this.client.core.crypto.generateKeyPair(),o=Zc(e),a={type:Gc,receiverPublicKey:e,senderPublicKey:s};await this.sendError({id:r,topic:o,error:i,encodeOpts:a,rpcOpts:MA.wc_sessionAuthenticate.reject}),await this.client.auth.requests.delete(r,{message:"rejected",code:0}),await this.client.proposal.delete(r,kl("USER_DISCONNECTED"))},this.formatAuthMessage=t=>{this.isInitialized();const{request:r,iss:i}=t;return _c(r,i)},this.cleanupDuplicatePairings=async t=>{if(t.pairingTopic)try{const r=this.client.core.pairing.pairings.get(t.pairingTopic),i=this.client.core.pairing.pairings.getAll().filter((i=>{var n,e;return((n=i.peerMetadata)==null?void 0:n.url)&&((e=i.peerMetadata)==null?void 0:e.url)===t.peer.metadata.url&&i.topic&&i.topic!==r.topic}));if(i.length===0)return;this.client.logger.info(`Cleaning up ${i.length} duplicate pairing(s)`),await Promise.all(i.map((t=>this.client.core.pairing.disconnect({topic:t.topic})))),this.client.logger.info("Duplicate pairings clean up finished")}catch(t){this.client.logger.error(t)}},this.deleteSession=async t=>{var r;const{topic:i,expirerHasDeleted:n=!1,emitEvent:e=!0,id:s=0}=t,{self:o}=this.client.session.get(i);await this.client.core.relayer.unsubscribe(i),await this.client.session.delete(i,kl("USER_DISCONNECTED")),this.addToRecentlyDeleted(i,"session"),this.client.core.crypto.keychain.has(o.publicKey)&&await this.client.core.crypto.deleteKeyPair(o.publicKey),this.client.core.crypto.keychain.has(i)&&await this.client.core.crypto.deleteSymKey(i),n||this.client.core.expirer.del(i),this.client.core.storage.removeItem(yA).catch((t=>this.client.logger.warn(t))),this.getPendingSessionRequests().forEach((t=>{t.topic===i&&this.deletePendingSessionRequest(t.id,kl("USER_DISCONNECTED"))})),i===((r=this.sessionRequestQueue.queue[0])==null?void 0:r.topic)&&(this.sessionRequestQueue.state=IA.idle),e&&this.client.events.emit("session_delete",{id:s,topic:i})},this.deleteProposal=async(t,r)=>{await Promise.all([this.client.proposal.delete(t,kl("USER_DISCONNECTED")),r?Promise.resolve():this.client.core.expirer.del(t)]),this.addToRecentlyDeleted(t,"proposal")},this.deletePendingSessionRequest=async(t,r,i=!1)=>{await Promise.all([this.client.pendingRequest.delete(t,r),i?Promise.resolve():this.client.core.expirer.del(t)]),this.addToRecentlyDeleted(t,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter((r=>r.id!==t)),i&&(this.sessionRequestQueue.state=IA.idle,this.client.events.emit("session_request_expire",{id:t}))},this.deletePendingAuthRequest=async(t,r,i=!1)=>{await Promise.all([this.client.auth.requests.delete(t,r),i?Promise.resolve():this.client.core.expirer.del(t)])},this.setExpiry=async(t,r)=>{this.client.session.keys.includes(t)&&(this.client.core.expirer.set(t,r),await this.client.session.update(t,{expiry:r}))},this.setProposal=async(t,r)=>{this.client.core.expirer.set(t,Es(MA.wc_sessionPropose.req.ttl)),await this.client.proposal.set(t,r)},this.setAuthRequest=async(t,r)=>{const{request:i,pairingTopic:n}=r;this.client.core.expirer.set(t,i.expiryTimestamp),await this.client.auth.requests.set(t,{authPayload:i.authPayload,requester:i.requester,expiryTimestamp:i.expiryTimestamp,id:t,pairingTopic:n,verifyContext:i.verifyContext})},this.setPendingSessionRequest=async t=>{const{id:r,topic:i,params:n,verifyContext:e}=t,s=n.request.expiryTimestamp||Es(MA.wc_sessionRequest.req.ttl);this.client.core.expirer.set(r,s),await this.client.pendingRequest.set(r,{id:r,topic:i,params:n,verifyContext:e})},this.sendRequest=async t=>{const{topic:r,method:i,params:n,expiry:e,relayRpcId:s,clientRpcId:o,throwOnFailedPublish:a}=t,h=hy(i,n,o);if(es()&&SA.includes(i)){const t=tl(JSON.stringify(h));this.client.core.verify.register({attestationId:t})}let u;try{u=await this.client.core.crypto.encode(r,h)}catch(t){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${r} failed`),t}const f=MA[i].req;return e&&(f.ttl=e),s&&(f.id=s),this.client.core.history.set(r,h),a?(f.internal=KA(LA({},f.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,u,f)):this.client.core.relayer.publish(r,u,f).catch((t=>this.client.logger.error(t))),h.id},this.sendResult=async t=>{const{id:r,topic:i,result:n,throwOnFailedPublish:e,encodeOpts:s}=t,o=uy(r,n);let a;try{a=await this.client.core.crypto.encode(i,o,s)}catch(t){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${i} failed`),t}let h;try{h=await this.client.core.history.get(i,r)}catch(t){throw this.client.logger.error(`sendResult() -> history.get(${i}, ${r}) failed`),t}const u=MA[h.request.method].res;e?(u.internal=KA(LA({},u.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(i,a,u)):this.client.core.relayer.publish(i,a,u).catch((t=>this.client.logger.error(t))),await this.client.core.history.resolve(o)},this.sendError=async t=>{const{id:r,topic:i,error:n,encodeOpts:e,rpcOpts:s}=t,o=fy(r,n);let a;try{a=await this.client.core.crypto.encode(i,o,e)}catch(t){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${i} failed`),t}let h;try{h=await this.client.core.history.get(i,r)}catch(t){throw this.client.logger.error(`sendError() -> history.get(${i}, ${r}) failed`),t}const u=s||MA[h.request.method].res;this.client.core.relayer.publish(i,a,u),await this.client.core.history.resolve(o)},this.cleanup=async()=>{const t=[],r=[];this.client.session.getAll().forEach((r=>{let i=!1;Ms(r.expiry)&&(i=!0),this.client.core.crypto.keychain.has(r.topic)||(i=!0),i&&t.push(r.topic)})),this.client.proposal.getAll().forEach((t=>{Ms(t.expiryTimestamp)&&r.push(t.id)})),await Promise.all([...t.map((t=>this.deleteSession({topic:t}))),...r.map((t=>this.deleteProposal(t)))])},this.onRelayEventRequest=async t=>{this.requestQueue.queue.push(t),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state===IA.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=IA.active;const t=this.requestQueue.queue.shift();if(t)try{this.processRequest(t),await new Promise((t=>setTimeout(t,300)))}catch(t){this.client.logger.warn(t)}}this.requestQueue.state=IA.idle},this.processRequest=t=>{const{topic:r,payload:i}=t,n=i.method;if(!this.shouldIgnorePairingRequest({topic:r,requestMethod:n}))switch(n){case"wc_sessionPropose":return this.onSessionProposeRequest(r,i);case"wc_sessionSettle":return this.onSessionSettleRequest(r,i);case"wc_sessionUpdate":return this.onSessionUpdateRequest(r,i);case"wc_sessionExtend":return this.onSessionExtendRequest(r,i);case"wc_sessionPing":return this.onSessionPingRequest(r,i);case"wc_sessionDelete":return this.onSessionDeleteRequest(r,i);case"wc_sessionRequest":return this.onSessionRequest(r,i);case"wc_sessionEvent":return this.onSessionEventRequest(r,i);case"wc_sessionAuthenticate":return this.onSessionAuthenticateRequest(r,i);default:return this.client.logger.info(`Unsupported request method ${n}`)}},this.onRelayEventResponse=async t=>{const{topic:r,payload:i}=t,n=(await this.client.core.history.get(r,i.id)).request.method;switch(n){case"wc_sessionPropose":return this.onSessionProposeResponse(r,i);case"wc_sessionSettle":return this.onSessionSettleResponse(r,i);case"wc_sessionUpdate":return this.onSessionUpdateResponse(r,i);case"wc_sessionExtend":return this.onSessionExtendResponse(r,i);case"wc_sessionPing":return this.onSessionPingResponse(r,i);case"wc_sessionRequest":return this.onSessionRequestResponse(r,i);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(r,i);default:return this.client.logger.info(`Unsupported response method ${n}`)}},this.onRelayEventUnknownPayload=t=>{const{topic:r}=t,{message:i}=Bl("MISSING_OR_INVALID",`Decoded payload on topic ${r} is not identifiable as a JSON-RPC request or a response.`);throw new Error(i)},this.shouldIgnorePairingRequest=t=>{const{topic:r,requestMethod:i}=t,n=this.expectedPairingMethodMap.get(r);return!n||n.includes(i)?!1:!!(n.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)},this.onSessionProposeRequest=async(t,r)=>{const{params:i,id:n}=r;try{this.isValidConnect(LA({},r.params));const e=i.expiryTimestamp||Es(MA.wc_sessionPropose.req.ttl),s=LA({id:n,pairingTopic:t,expiryTimestamp:e},i);await this.setProposal(n,s);const o=tl(JSON.stringify(r)),a=await this.getVerifyContext(o,s.proposer.metadata);this.client.events.emit("session_proposal",{id:n,params:s,verifyContext:a})}catch(r){await this.sendError({id:n,topic:t,error:r,rpcOpts:MA.wc_sessionPropose.autoReject}),this.client.logger.error(r)}},this.onSessionProposeResponse=async(t,r)=>{const{id:i}=r;if(Iy(r)){const{result:n}=r;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:n});const e=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:e});const s=e.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:s});const o=n.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:o});const a=await this.client.core.crypto.generateSharedKey(s,o);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:a});const h=await this.client.core.relayer.subscribe(a);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:h}),await this.client.core.pairing.activate({topic:t})}else if(Oy(r)){await this.client.proposal.delete(i,kl("USER_DISCONNECTED"));const t=_s("session_connect");if(this.events.listenerCount(t)===0)throw new Error(`emitting ${t} without any listeners, 954`);this.events.emit(_s("session_connect"),{error:r.error})}},this.onSessionSettleRequest=async(t,r)=>{const{id:i,params:n}=r;try{this.isValidSessionSettleRequest(n);const{relay:i,controller:e,expiry:s,namespaces:o,sessionProperties:a,sessionConfig:h}=r.params,u=LA(LA({topic:t,relay:i,expiry:s,namespaces:o,acknowledged:!0,pairingTopic:"",requiredNamespaces:{},optionalNamespaces:{},controller:e.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:e.publicKey,metadata:e.metadata}},a&&{sessionProperties:a}),h&&{sessionConfig:h});await this.sendResult({id:r.id,topic:t,result:!0,throwOnFailedPublish:!0});const f=_s("session_connect");if(this.events.listenerCount(f)===0)throw new Error(`emitting ${f} without any listeners 997`);this.events.emit(_s("session_connect"),{session:u})}catch(r){await this.sendError({id:i,topic:t,error:r}),this.client.logger.error(r)}},this.onSessionSettleResponse=async(t,r)=>{const{id:i}=r;Iy(r)?(await this.client.session.update(t,{acknowledged:!0}),this.events.emit(_s("session_approve",i),{})):Oy(r)&&(await this.client.session.delete(t,kl("USER_DISCONNECTED")),this.events.emit(_s("session_approve",i),{error:r.error}))},this.onSessionUpdateRequest=async(t,r)=>{const{params:i,id:n}=r;try{const r=`${t}_session_update`,e=jd.get(r);if(e&&this.isRequestOutOfSync(e,n)){this.client.logger.info(`Discarding out of sync request - ${n}`),this.sendError({id:n,topic:t,error:kl("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(LA({topic:t},i));try{jd.set(r,n),await this.client.session.update(t,{namespaces:i.namespaces}),await this.sendResult({id:n,topic:t,result:!0,throwOnFailedPublish:!0})}catch(t){throw jd.delete(r),t}this.client.events.emit("session_update",{id:n,topic:t,params:i})}catch(r){await this.sendError({id:n,topic:t,error:r}),this.client.logger.error(r)}},this.isRequestOutOfSync=(t,r)=>parseInt(r.toString().slice(0,-3))<=parseInt(t.toString().slice(0,-3)),this.onSessionUpdateResponse=(t,r)=>{const{id:i}=r,n=_s("session_update",i);if(this.events.listenerCount(n)===0)throw new Error(`emitting ${n} without any listeners`);Iy(r)?this.events.emit(_s("session_update",i),{}):Oy(r)&&this.events.emit(_s("session_update",i),{error:r.error})},this.onSessionExtendRequest=async(t,r)=>{const{id:i}=r;try{this.isValidExtend({topic:t}),await this.setExpiry(t,Es(AA)),await this.sendResult({id:i,topic:t,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:i,topic:t})}catch(r){await this.sendError({id:i,topic:t,error:r}),this.client.logger.error(r)}},this.onSessionExtendResponse=(t,r)=>{const{id:i}=r,n=_s("session_extend",i);if(this.events.listenerCount(n)===0)throw new Error(`emitting ${n} without any listeners`);Iy(r)?this.events.emit(_s("session_extend",i),{}):Oy(r)&&this.events.emit(_s("session_extend",i),{error:r.error})},this.onSessionPingRequest=async(t,r)=>{const{id:i}=r;try{this.isValidPing({topic:t}),await this.sendResult({id:i,topic:t,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:i,topic:t})}catch(r){await this.sendError({id:i,topic:t,error:r}),this.client.logger.error(r)}},this.onSessionPingResponse=(t,r)=>{const{id:i}=r,n=_s("session_ping",i);if(this.events.listenerCount(n)===0)throw new Error(`emitting ${n} without any listeners`);setTimeout((()=>{Iy(r)?this.events.emit(_s("session_ping",i),{}):Oy(r)&&this.events.emit(_s("session_ping",i),{error:r.error})}),500)},this.onSessionDeleteRequest=async(t,r)=>{const{id:i}=r;try{this.isValidDisconnect({topic:t,reason:r.params}),await Promise.all([new Promise((r=>{this.client.core.relayer.once(Yg.publish,(async()=>{r(await this.deleteSession({topic:t,id:i}))}))})),this.sendResult({id:i,topic:t,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:t,error:kl("USER_DISCONNECTED")})])}catch(t){this.client.logger.error(t)}},this.onSessionRequest=async(t,r)=>{var i;const{id:n,params:e}=r;try{await this.isValidRequest(LA({topic:t},e));const r=tl(JSON.stringify(hy("wc_sessionRequest",e,n))),s=this.client.session.get(t),o=await this.getVerifyContext(r,s.peer.metadata),a={id:n,topic:t,params:e,verifyContext:o};await this.setPendingSessionRequest(a),(i=this.client.signConfig)!=null&&i.disableRequestQueue?this.emitSessionRequest(a):(this.addSessionRequestToSessionRequestQueue(a),this.processSessionRequestQueue())}catch(r){await this.sendError({id:n,topic:t,error:r}),this.client.logger.error(r)}},this.onSessionRequestResponse=(t,r)=>{const{id:i}=r,n=_s("session_request",i);if(this.events.listenerCount(n)===0)throw new Error(`emitting ${n} without any listeners`);Iy(r)?this.events.emit(_s("session_request",i),{result:r.result}):Oy(r)&&this.events.emit(_s("session_request",i),{error:r.error})},this.onSessionEventRequest=async(t,r)=>{const{id:i,params:n}=r;try{const r=`${t}_session_event_${n.event.name}`,e=jd.get(r);if(e&&this.isRequestOutOfSync(e,i)){this.client.logger.info(`Discarding out of sync request - ${i}`);return}this.isValidEmit(LA({topic:t},n)),this.client.events.emit("session_event",{id:i,topic:t,params:n}),jd.set(r,i)}catch(r){await this.sendError({id:i,topic:t,error:r}),this.client.logger.error(r)}},this.onSessionAuthenticateResponse=(t,r)=>{const{id:i}=r;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:t,payload:r}),Iy(r)?this.events.emit(_s("session_request",i),{result:r.result}):Oy(r)&&this.events.emit(_s("session_request",i),{error:r.error})},this.onSessionAuthenticateRequest=async(t,r)=>{try{const{requester:i,authPayload:n,expiryTimestamp:e}=r.params,s=tl(JSON.stringify(r)),o=await this.getVerifyContext(s,this.client.metadata),a={requester:i,pairingTopic:t,id:r.id,authPayload:n,verifyContext:o,expiryTimestamp:e};await this.setAuthRequest(r.id,{request:a,pairingTopic:t}),this.client.events.emit("session_authenticate",{topic:t,params:r.params,id:r.id})}catch(i){this.client.logger.error(i);const n=r.params.requester.publicKey,e=await this.client.core.crypto.generateKeyPair(),s={type:Gc,receiverPublicKey:n,senderPublicKey:e};await this.sendError({id:r.id,topic:t,error:i,encodeOpts:s,rpcOpts:MA.wc_sessionAuthenticate.autoReject})}},this.addSessionRequestToSessionRequestQueue=t=>{this.sessionRequestQueue.queue.push(t)},this.cleanupAfterResponse=t=>{this.deletePendingSessionRequest(t.response.id,{message:"fulfilled",code:0}),setTimeout((()=>{this.sessionRequestQueue.state=IA.idle,this.processSessionRequestQueue()}),U.toMiliseconds(this.requestQueueDelay))},this.cleanupPendingSentRequestsForTopic=({topic:t,error:r})=>{const i=this.client.core.history.pending;i.length>0&&i.filter((r=>r.topic===t&&r.request.method==="wc_sessionRequest")).forEach((t=>{const i=t.request.id,n=_s("session_request",i);if(this.events.listenerCount(n)===0)throw new Error(`emitting ${n} without any listeners`);this.events.emit(_s("session_request",t.request.id),{error:r})}))},this.processSessionRequestQueue=()=>{if(this.sessionRequestQueue.state===IA.active){this.client.logger.info("session request queue is already active.");return}const t=this.sessionRequestQueue.queue[0];if(!t){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=IA.active,this.emitSessionRequest(t)}catch(t){this.client.logger.error(t)}},this.emitSessionRequest=t=>{this.client.events.emit("session_request",t)},this.onPairingCreated=t=>{if(t.methods&&this.expectedPairingMethodMap.set(t.topic,t.methods),t.active)return;const r=this.client.proposal.getAll().find((r=>r.pairingTopic===t.topic));r&&this.onSessionProposeRequest(t.topic,hy("wc_sessionPropose",{requiredNamespaces:r.requiredNamespaces,optionalNamespaces:r.optionalNamespaces,relays:r.relays,proposer:r.proposer,sessionProperties:r.sessionProperties},r.id))},this.isValidConnect=async t=>{if(!ud(t)){const{message:r}=Bl("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(t)}`);throw new Error(r)}const{pairingTopic:r,requiredNamespaces:i,optionalNamespaces:n,sessionProperties:e,relays:s}=t;if(ql(r)||await this.isValidPairingTopic(r),!ad(s,!0)){const{message:t}=Bl("MISSING_OR_INVALID",`connect() relays: ${s}`);throw new Error(t)}!ql(i)&&Fl(i)!==0&&this.validateNamespaces(i,"requiredNamespaces"),!ql(n)&&Fl(n)!==0&&this.validateNamespaces(n,"optionalNamespaces"),ql(e)||this.validateSessionProps(e,"sessionProperties")},this.validateNamespaces=(t,r)=>{const i=ed(t,"connect()",r);if(i)throw new Error(i.message)},this.isValidApprove=async t=>{if(!ud(t))throw new Error(Bl("MISSING_OR_INVALID",`approve() params: ${t}`).message);const{id:r,namespaces:i,relayProtocol:n,sessionProperties:e}=t;this.checkRecentlyDeleted(r),await this.isValidProposalId(r);const s=this.client.proposal.get(r),o=sd(i,"approve()");if(o)throw new Error(o.message);const a=yd(s.requiredNamespaces,i,"approve()");if(a)throw new Error(a.message);if(!Ll(n,!0)){const{message:t}=Bl("MISSING_OR_INVALID",`approve() relayProtocol: ${n}`);throw new Error(t)}ql(e)||this.validateSessionProps(e,"sessionProperties")},this.isValidReject=async t=>{if(!ud(t)){const{message:r}=Bl("MISSING_OR_INVALID",`reject() params: ${t}`);throw new Error(r)}const{id:r,reason:i}=t;if(this.checkRecentlyDeleted(r),await this.isValidProposalId(r),!fd(i)){const{message:t}=Bl("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(i)}`);throw new Error(t)}},this.isValidSessionSettleRequest=t=>{if(!ud(t)){const{message:r}=Bl("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${t}`);throw new Error(r)}const{relay:r,controller:i,namespaces:n,expiry:e}=t;if(!od(r)){const{message:t}=Bl("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(t)}const s=Yl(i,"onSessionSettleRequest()");if(s)throw new Error(s.message);const o=sd(n,"onSessionSettleRequest()");if(o)throw new Error(o.message);if(Ms(e)){const{message:t}=Bl("EXPIRED","onSessionSettleRequest()");throw new Error(t)}},this.isValidUpdate=async t=>{if(!ud(t)){const{message:r}=Bl("MISSING_OR_INVALID",`update() params: ${t}`);throw new Error(r)}const{topic:r,namespaces:i}=t;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const n=this.client.session.get(r),e=sd(i,"update()");if(e)throw new Error(e.message);const s=yd(n.requiredNamespaces,i,"update()");if(s)throw new Error(s.message)},this.isValidExtend=async t=>{if(!ud(t)){const{message:r}=Bl("MISSING_OR_INVALID",`extend() params: ${t}`);throw new Error(r)}const{topic:r}=t;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r)},this.isValidRequest=async t=>{if(!ud(t)){const{message:r}=Bl("MISSING_OR_INVALID",`request() params: ${t}`);throw new Error(r)}const{topic:r,request:i,chainId:n,expiry:e}=t;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const{namespaces:s}=this.client.session.get(r);if(!vd(s,n)){const{message:t}=Bl("MISSING_OR_INVALID",`request() chainId: ${n}`);throw new Error(t)}if(!cd(i)){const{message:t}=Bl("MISSING_OR_INVALID",`request() ${JSON.stringify(i)}`);throw new Error(t)}if(!wd(s,n,i.method)){const{message:t}=Bl("MISSING_OR_INVALID",`request() method: ${i.method}`);throw new Error(t)}if(e&&!Ad(e,_A)){const{message:t}=Bl("MISSING_OR_INVALID",`request() expiry: ${e}. Expiry must be a number (in seconds) between ${_A.min} and ${_A.max}`);throw new Error(t)}},this.isValidRespond=async t=>{var r;if(!ud(t)){const{message:r}=Bl("MISSING_OR_INVALID",`respond() params: ${t}`);throw new Error(r)}const{topic:i,response:n}=t;try{await this.isValidSessionTopic(i)}catch(i){throw(r=t?.response)!=null&&r.id&&this.cleanupAfterResponse(t),i}if(!ld(n)){const{message:t}=Bl("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(n)}`);throw new Error(t)}},this.isValidPing=async t=>{if(!ud(t)){const{message:r}=Bl("MISSING_OR_INVALID",`ping() params: ${t}`);throw new Error(r)}const{topic:r}=t;await this.isValidSessionOrPairingTopic(r)},this.isValidEmit=async t=>{if(!ud(t)){const{message:r}=Bl("MISSING_OR_INVALID",`emit() params: ${t}`);throw new Error(r)}const{topic:r,event:i,chainId:n}=t;await this.isValidSessionTopic(r);const{namespaces:e}=this.client.session.get(r);if(!vd(e,n)){const{message:t}=Bl("MISSING_OR_INVALID",`emit() chainId: ${n}`);throw new Error(t)}if(!dd(i)){const{message:t}=Bl("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(t)}if(!pd(e,n,i.name)){const{message:t}=Bl("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(t)}},this.isValidDisconnect=async t=>{if(!ud(t)){const{message:r}=Bl("MISSING_OR_INVALID",`disconnect() params: ${t}`);throw new Error(r)}const{topic:r}=t;await this.isValidSessionOrPairingTopic(r)},this.isValidAuthenticate=t=>{const{chains:r,uri:i,domain:n,nonce:e}=t;if(!Array.isArray(r)||r.length===0)throw new Error("chains is required and must be a non-empty array");if(!Ll(i,!1))throw new Error("uri is required parameter");if(!Ll(n,!1))throw new Error("domain is required parameter");if(!Ll(e,!1))throw new Error("nonce is required parameter");if([...new Set(r.map((t=>He(t).namespace)))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:s}=He(r[0]);if(s!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")},this.getVerifyContext=async(t,r)=>{const i={verified:{verifyUrl:r.verifyUrl||gm,validation:"UNKNOWN",origin:r.url||""}};try{const n=await this.client.core.verify.resolve({attestationId:t,verifyUrl:r.verifyUrl});n&&(i.verified.origin=n.origin,i.verified.isScam=n.isScam,i.verified.validation=n.origin===new URL(r.url).origin?"VALID":"INVALID")}catch(t){this.client.logger.info(t)}return this.client.logger.info(`Verify context: ${JSON.stringify(i)}`),i},this.validateSessionProps=(t,r)=>{Object.values(t).forEach((t=>{if(!Ll(t,!1)){const{message:i}=Bl("MISSING_OR_INVALID",`${r} must be in Record<string, string> format. Received: ${JSON.stringify(t)}`);throw new Error(i)}}))},this.getPendingAuthRequest=t=>{const r=this.client.auth.requests.get(t);return typeof r=="object"?r:void 0},this.addToRecentlyDeleted=(t,r)=>{if(this.recentlyDeletedMap.set(t,r),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let t=0;const r=this.recentlyDeletedLimit/2;for(const i of this.recentlyDeletedMap.keys()){if(t++>=r)break;this.recentlyDeletedMap.delete(i)}}},this.checkRecentlyDeleted=t=>{const r=this.recentlyDeletedMap.get(t);if(r){const{message:i}=Bl("MISSING_OR_INVALID",`Record was recently deleted - ${r}: ${t}`);throw new Error(i)}}}async isInitialized(){if(!this.initialized){const{message:t}=Bl("NOT_INITIALIZED",this.name);throw new Error(t)}await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(Yg.message,(async t=>{const{topic:r,message:i}=t,{publicKey:n}=this.client.auth.authKeys.keys.includes(TA)?this.client.auth.authKeys.get(TA):{responseTopic:void 0,publicKey:void 0},e=await this.client.core.crypto.decode(r,i,{receiverPublicKey:n});try{My(e)?(this.client.core.history.set(r,e),this.onRelayEventRequest({topic:r,payload:e})):_y(e)?(await this.client.core.history.resolve(e),await this.onRelayEventResponse({topic:r,payload:e}),this.client.core.history.delete(r,e.id)):this.onRelayEventUnknownPayload({topic:r,payload:e})}catch(t){this.client.logger.error(t)}}))}registerExpirerEvents(){this.client.core.expirer.on(pm.expired,(async t=>{const{topic:r,id:i}=As(t.target);if(i&&this.client.pendingRequest.keys.includes(i))return await this.deletePendingSessionRequest(i,Bl("EXPIRED"),!0);if(i&&this.client.auth.requests.keys.includes(i))return await this.deletePendingAuthRequest(i,Bl("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession({topic:r,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:r})):i&&(await this.deleteProposal(i,!0),this.client.events.emit("proposal_expire",{id:i}))}))}registerPairingEvents(){this.client.core.pairing.events.on(cm.create,(t=>this.onPairingCreated(t))),this.client.core.pairing.events.on(cm.delete,(t=>{this.addToRecentlyDeleted(t.topic,"pairing")}))}isValidPairingTopic(t){if(!Ll(t,!1)){const{message:r}=Bl("MISSING_OR_INVALID",`pairing topic should be a string: ${t}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(t)){const{message:r}=Bl("NO_MATCHING_KEY",`pairing topic doesn't exist: ${t}`);throw new Error(r)}if(Ms(this.client.core.pairing.pairings.get(t).expiry)){const{message:r}=Bl("EXPIRED",`pairing topic: ${t}`);throw new Error(r)}}async isValidSessionTopic(t){if(!Ll(t,!1)){const{message:r}=Bl("MISSING_OR_INVALID",`session topic should be a string: ${t}`);throw new Error(r)}if(this.checkRecentlyDeleted(t),!this.client.session.keys.includes(t)){const{message:r}=Bl("NO_MATCHING_KEY",`session topic doesn't exist: ${t}`);throw new Error(r)}if(Ms(this.client.session.get(t).expiry)){await this.deleteSession({topic:t});const{message:r}=Bl("EXPIRED",`session topic: ${t}`);throw new Error(r)}if(!this.client.core.crypto.keychain.has(t)){const{message:r}=Bl("MISSING_OR_INVALID",`session topic does not exist in keychain: ${t}`);throw await this.deleteSession({topic:t}),new Error(r)}}async isValidSessionOrPairingTopic(t){if(this.checkRecentlyDeleted(t),this.client.session.keys.includes(t))await this.isValidSessionTopic(t);else if(this.client.core.pairing.pairings.keys.includes(t))this.isValidPairingTopic(t);else if(Ll(t,!1)){const{message:r}=Bl("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${t}`);throw new Error(r)}else{const{message:r}=Bl("MISSING_OR_INVALID",`session or pairing topic should be a string: ${t}`);throw new Error(r)}}async isValidProposalId(t){if(!hd(t)){const{message:r}=Bl("MISSING_OR_INVALID",`proposal id should be a number: ${t}`);throw new Error(r)}if(!this.client.proposal.keys.includes(t)){const{message:r}=Bl("NO_MATCHING_KEY",`proposal id doesn't exist: ${t}`);throw new Error(r)}if(Ms(this.client.proposal.get(t).expiryTimestamp)){await this.deleteProposal(t);const{message:r}=Bl("EXPIRED",`proposal id: ${t}`);throw new Error(r)}}}class GA extends Xm{constructor(t,r){super(t,r,bA,wA),this.core=t,this.logger=r}}class QA extends Xm{constructor(t,r){super(t,r,mA,wA),this.core=t,this.logger=r}}class VA extends Xm{constructor(t,r){super(t,r,OA,wA,(t=>t.id)),this.core=t,this.logger=r}}class zA extends Xm{constructor(t,r){super(t,r,jA,RA,(()=>TA)),this.core=t,this.logger=r}}class JA extends Xm{constructor(t,r){super(t,r,xA,RA),this.core=t,this.logger=r}}class YA extends Xm{constructor(t,r){super(t,r,PA,RA,(t=>t.id)),this.core=t,this.logger=r}}class WA{constructor(t,r){this.core=t,this.logger=r,this.authKeys=new zA(this.core,this.logger),this.pairingTopics=new JA(this.core,this.logger),this.requests=new YA(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}class XA extends Lw{constructor(r){super(r),this.protocol=lA,this.version=dA,this.name=pA.name,this.events=new t.exports.EventEmitter,this.on=(t,r)=>this.events.on(t,r),this.once=(t,r)=>this.events.once(t,r),this.off=(t,r)=>this.events.off(t,r),this.removeListener=(t,r)=>this.events.removeListener(t,r),this.removeAllListeners=t=>this.events.removeAllListeners(t),this.connect=async t=>{try{return await this.engine.connect(t)}catch(t){throw this.logger.error(t.message),t}},this.pair=async t=>{try{return await this.engine.pair(t)}catch(t){throw this.logger.error(t.message),t}},this.approve=async t=>{try{return await this.engine.approve(t)}catch(t){throw this.logger.error(t.message),t}},this.reject=async t=>{try{return await this.engine.reject(t)}catch(t){throw this.logger.error(t.message),t}},this.update=async t=>{try{return await this.engine.update(t)}catch(t){throw this.logger.error(t.message),t}},this.extend=async t=>{try{return await this.engine.extend(t)}catch(t){throw this.logger.error(t.message),t}},this.request=async t=>{try{return await this.engine.request(t)}catch(t){throw this.logger.error(t.message),t}},this.respond=async t=>{try{return await this.engine.respond(t)}catch(t){throw this.logger.error(t.message),t}},this.ping=async t=>{try{return await this.engine.ping(t)}catch(t){throw this.logger.error(t.message),t}},this.emit=async t=>{try{return await this.engine.emit(t)}catch(t){throw this.logger.error(t.message),t}},this.disconnect=async t=>{try{return await this.engine.disconnect(t)}catch(t){throw this.logger.error(t.message),t}},this.find=t=>{try{return this.engine.find(t)}catch(t){throw this.logger.error(t.message),t}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(t){throw this.logger.error(t.message),t}},this.authenticate=async t=>{try{return await this.engine.authenticate(t)}catch(t){throw this.logger.error(t.message),t}},this.formatAuthMessage=t=>{try{return this.engine.formatAuthMessage(t)}catch(t){throw this.logger.error(t.message),t}},this.approveSessionAuthenticate=async t=>{try{return await this.engine.approveSessionAuthenticate(t)}catch(t){throw this.logger.error(t.message),t}},this.rejectSessionAuthenticate=async t=>{try{return await this.engine.rejectSessionAuthenticate(t)}catch(t){throw this.logger.error(t.message),t}},this.name=r?.name||pA.name,this.metadata=r?.metadata||hs(),this.signConfig=r?.signConfig;const i=typeof r?.logger<"u"&&typeof r?.logger!="string"?r.logger:kv(Mw({level:r?.logger||pA.logger}));this.core=r?.core||new cA(r),this.logger=Nw(i,this.name),this.session=new QA(this.core,this.logger),this.proposal=new GA(this.core,this.logger),this.pendingRequest=new VA(this.core,this.logger),this.engine=new HA(this),this.auth=new WA(this.core,this.logger)}static async init(t){const r=new XA(t);return await r.initialize(),r}get context(){return Ow(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),await this.auth.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(t){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(t.message),t}}}var ZA={exports:{}};(function(t,r){var i=typeof self!=="undefined"?self:w;var n=function(){function t(){this.fetch=false;this.DOMException=i.DOMException}t.prototype=i;return new t}();(function(t){(function(r){var i={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{new Blob;return true}catch(t){return false}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};function n(t){return t&&DataView.prototype.isPrototypeOf(t)}if(i.arrayBuffer){var e=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"];var s=ArrayBuffer.isView||function(t){return t&&e.indexOf(Object.prototype.toString.call(t))>-1}}function o(t){if(typeof t!=="string"){t=String(t)}if(/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t)){throw new TypeError("Invalid character in header field name")}return t.toLowerCase()}function a(t){if(typeof t!=="string"){t=String(t)}return t}function h(t){var r={next:function(){var r=t.shift();return{done:r===undefined,value:r}}};if(i.iterable){r[Symbol.iterator]=function(){return r}}return r}function u(t){this.map={};if(t instanceof u){t.forEach((function(t,r){this.append(r,t)}),this)}else if(Array.isArray(t)){t.forEach((function(t){this.append(t[0],t[1])}),this)}else if(t){Object.getOwnPropertyNames(t).forEach((function(r){this.append(r,t[r])}),this)}}u.prototype.append=function(t,r){t=o(t);r=a(r);var i=this.map[t];this.map[t]=i?i+", "+r:r};u.prototype["delete"]=function(t){delete this.map[o(t)]};u.prototype.get=function(t){t=o(t);return this.has(t)?this.map[t]:null};u.prototype.has=function(t){return this.map.hasOwnProperty(o(t))};u.prototype.set=function(t,r){this.map[o(t)]=a(r)};u.prototype.forEach=function(t,r){for(var i in this.map){if(this.map.hasOwnProperty(i)){t.call(r,this.map[i],i,this)}}};u.prototype.keys=function(){var t=[];this.forEach((function(r,i){t.push(i)}));return h(t)};u.prototype.values=function(){var t=[];this.forEach((function(r){t.push(r)}));return h(t)};u.prototype.entries=function(){var t=[];this.forEach((function(r,i){t.push([i,r])}));return h(t)};if(i.iterable){u.prototype[Symbol.iterator]=u.prototype.entries}function f(t){if(t.bodyUsed){return Promise.reject(new TypeError("Already read"))}t.bodyUsed=true}function c(t){return new Promise((function(r,i){t.onload=function(){r(t.result)};t.onerror=function(){i(t.error)}}))}function l(t){var r=new FileReader;var i=c(r);r.readAsArrayBuffer(t);return i}function d(t){var r=new FileReader;var i=c(r);r.readAsText(t);return i}function v(t){var r=new Uint8Array(t);var i=new Array(r.length);for(var n=0;n<r.length;n++){i[n]=String.fromCharCode(r[n])}return i.join("")}function w(t){if(t.slice){return t.slice(0)}else{var r=new Uint8Array(t.byteLength);r.set(new Uint8Array(t));return r.buffer}}function p(){this.bodyUsed=false;this._initBody=function(t){this._bodyInit=t;if(!t){this._bodyText=""}else if(typeof t==="string"){this._bodyText=t}else if(i.blob&&Blob.prototype.isPrototypeOf(t)){this._bodyBlob=t}else if(i.formData&&FormData.prototype.isPrototypeOf(t)){this._bodyFormData=t}else if(i.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)){this._bodyText=t.toString()}else if(i.arrayBuffer&&i.blob&&n(t)){this._bodyArrayBuffer=w(t.buffer);this._bodyInit=new Blob([this._bodyArrayBuffer])}else if(i.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(t)||s(t))){this._bodyArrayBuffer=w(t)}else{this._bodyText=t=Object.prototype.toString.call(t)}if(!this.headers.get("content-type")){if(typeof t==="string"){this.headers.set("content-type","text/plain;charset=UTF-8")}else if(this._bodyBlob&&this._bodyBlob.type){this.headers.set("content-type",this._bodyBlob.type)}else if(i.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)){this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8")}}};if(i.blob){this.blob=function(){var t=f(this);if(t){return t}if(this._bodyBlob){return Promise.resolve(this._bodyBlob)}else if(this._bodyArrayBuffer){return Promise.resolve(new Blob([this._bodyArrayBuffer]))}else if(this._bodyFormData){throw new Error("could not read FormData body as blob")}else{return Promise.resolve(new Blob([this._bodyText]))}};this.arrayBuffer=function(){if(this._bodyArrayBuffer){return f(this)||Promise.resolve(this._bodyArrayBuffer)}else{return this.blob().then(l)}}}this.text=function(){var t=f(this);if(t){return t}if(this._bodyBlob){return d(this._bodyBlob)}else if(this._bodyArrayBuffer){return Promise.resolve(v(this._bodyArrayBuffer))}else if(this._bodyFormData){throw new Error("could not read FormData body as text")}else{return Promise.resolve(this._bodyText)}};if(i.formData){this.formData=function(){return this.text().then(m)}}this.json=function(){return this.text().then(JSON.parse)};return this}var y=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function b(t){var r=t.toUpperCase();return y.indexOf(r)>-1?r:t}function g(t,r){r=r||{};var i=r.body;if(t instanceof g){if(t.bodyUsed){throw new TypeError("Already read")}this.url=t.url;this.credentials=t.credentials;if(!r.headers){this.headers=new u(t.headers)}this.method=t.method;this.mode=t.mode;this.signal=t.signal;if(!i&&t._bodyInit!=null){i=t._bodyInit;t.bodyUsed=true}}else{this.url=String(t)}this.credentials=r.credentials||this.credentials||"same-origin";if(r.headers||!this.headers){this.headers=new u(r.headers)}this.method=b(r.method||this.method||"GET");this.mode=r.mode||this.mode||null;this.signal=r.signal||this.signal;this.referrer=null;if((this.method==="GET"||this.method==="HEAD")&&i){throw new TypeError("Body not allowed for GET or HEAD requests")}this._initBody(i)}g.prototype.clone=function(){return new g(this,{body:this._bodyInit})};function m(t){var r=new FormData;t.trim().split("&").forEach((function(t){if(t){var i=t.split("=");var n=i.shift().replace(/\+/g," ");var e=i.join("=").replace(/\+/g," ");r.append(decodeURIComponent(n),decodeURIComponent(e))}}));return r}function A(t){var r=new u;var i=t.replace(/\r?\n[\t ]+/g," ");i.split(/\r?\n/).forEach((function(t){var i=t.split(":");var n=i.shift().trim();if(n){var e=i.join(":").trim();r.append(n,e)}}));return r}p.call(g.prototype);function E(t,r){if(!r){r={}}this.type="default";this.status=r.status===undefined?200:r.status;this.ok=this.status>=200&&this.status<300;this.statusText="statusText"in r?r.statusText:"OK";this.headers=new u(r.headers);this.url=r.url||"";this._initBody(t)}p.call(E.prototype);E.prototype.clone=function(){return new E(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new u(this.headers),url:this.url})};E.error=function(){var t=new E(null,{status:0,statusText:""});t.type="error";return t};var M=[301,302,303,307,308];E.redirect=function(t,r){if(M.indexOf(r)===-1){throw new RangeError("Invalid status code")}return new E(null,{status:r,headers:{location:t}})};r.DOMException=t.DOMException;try{new r.DOMException}catch(t){r.DOMException=function(t,r){this.message=t;this.name=r;var i=Error(t);this.stack=i.stack};r.DOMException.prototype=Object.create(Error.prototype);r.DOMException.prototype.constructor=r.DOMException}function _(t,n){return new Promise((function(e,s){var o=new g(t,n);if(o.signal&&o.signal.aborted){return s(new r.DOMException("Aborted","AbortError"))}var a=new XMLHttpRequest;function h(){a.abort()}a.onload=function(){var t={status:a.status,statusText:a.statusText,headers:A(a.getAllResponseHeaders()||"")};t.url="responseURL"in a?a.responseURL:t.headers.get("X-Request-URL");var r="response"in a?a.response:a.responseText;e(new E(r,t))};a.onerror=function(){s(new TypeError("Network request failed"))};a.ontimeout=function(){s(new TypeError("Network request failed"))};a.onabort=function(){s(new r.DOMException("Aborted","AbortError"))};a.open(o.method,o.url,true);if(o.credentials==="include"){a.withCredentials=true}else if(o.credentials==="omit"){a.withCredentials=false}if("responseType"in a&&i.blob){a.responseType="blob"}o.headers.forEach((function(t,r){a.setRequestHeader(r,t)}));if(o.signal){o.signal.addEventListener("abort",h);a.onreadystatechange=function(){if(a.readyState===4){o.signal.removeEventListener("abort",h)}}}a.send(typeof o._bodyInit==="undefined"?null:o._bodyInit)}))}_.polyfill=true;if(!t.fetch){t.fetch=_;t.Headers=u;t.Request=g;t.Response=E}r.Headers=u;r.Request=g;r.Response=E;r.fetch=_;Object.defineProperty(r,"__esModule",{value:true});return r})({})})(n);n.fetch.ponyfill=true;delete n.fetch.polyfill;var e=n;r=e.fetch;r.default=e.fetch;r.fetch=e.fetch;r.Headers=e.Headers;r.Request=e.Request;r.Response=e.Response;t.exports=r})(ZA,ZA.exports);const tE=p(ZA.exports);var rE=Object.defineProperty,iE=Object.defineProperties,nE=Object.getOwnPropertyDescriptors,eE=Object.getOwnPropertySymbols,sE=Object.prototype.hasOwnProperty,oE=Object.prototype.propertyIsEnumerable,aE=(t,r,i)=>r in t?rE(t,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[r]=i,hE=(t,r)=>{for(var i in r||(r={}))sE.call(r,i)&&aE(t,i,r[i]);if(eE)for(var i of eE(r))oE.call(r,i)&&aE(t,i,r[i]);return t},uE=(t,r)=>iE(t,nE(r));const fE={Accept:"application/json","Content-Type":"application/json"},cE="POST",lE={headers:fE,method:cE},dE=10;class vE{constructor(r,i=!1){if(this.url=r,this.disableProviderPing=i,this.events=new t.exports.EventEmitter,this.isAvailable=!1,this.registering=!1,!gy(r))throw new Error(`Provided URL is not compatible with HTTP connection: ${r}`);this.url=r,this.disableProviderPing=i}get connected(){return this.isAvailable}get connecting(){return this.registering}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}off(t,r){this.events.off(t,r)}removeListener(t,r){this.events.removeListener(t,r)}async open(t=this.url){await this.register(t)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(t){this.isAvailable||await this.register();try{const r=vv(t),i=await(await tE(this.url,uE(hE({},lE),{body:r}))).json();this.onPayload({data:i})}catch(r){this.onError(t.id,r)}}async register(t=this.url){if(!gy(t))throw new Error(`Provided URL is not compatible with HTTP connection: ${t}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise(((t,r)=>{this.events.once("register_error",(t=>{this.resetMaxListeners(),r(t)})),this.events.once("open",(()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return r(new Error("HTTP connection is missing or invalid"));t()}))}))}this.url=t,this.registering=!0;try{if(!this.disableProviderPing){const r=vv({id:1,jsonrpc:"2.0",method:"test",params:[]});await tE(t,uE(hE({},lE),{body:r}))}this.onOpen()}catch(t){const r=this.parseError(t);throw this.events.emit("register_error",r),this.onClose(),r}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(t){if(typeof t.data>"u")return;const r=typeof t.data=="string"?dv(t.data):t.data;this.events.emit("payload",r)}onError(t,r){const i=this.parseError(r),n=i.message||i.toString(),e=fy(t,n);this.events.emit("payload",e)}parseError(t,r=this.url){return _p(t,r,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>dE&&this.events.setMaxListeners(dE)}}const wE="error",pE="wss://relay.walletconnect.com",yE="wc",bE="universal_provider",gE=`${yE}@2:${bE}:`,mE="https://rpc.walletconnect.com/v1/",AE={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var EE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof d<"u"?d:typeof self<"u"?self:{},ME={exports:{}};
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(t,r){(function(){var i,n="4.17.21",e=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="Invalid `variable` option passed into `_.template`",h="__lodash_hash_undefined__",u=500,f="__lodash_placeholder__",c=1,l=2,d=4,v=1,w=2,p=1,y=2,b=4,g=8,m=16,A=32,E=64,M=128,_=256,I=512,O=30,S="...",N=800,C=16,j=1,x=2,P=3,R=1/0,T=9007199254740991,D=17976931348623157e292,U=0/0,B=4294967295,k=B-1,$=B>>>1,F=[["ary",M],["bind",p],["bindKey",y],["curry",g],["curryRight",m],["flip",I],["partial",A],["partialRight",E],["rearg",_]],q="[object Arguments]",L="[object Array]",K="[object AsyncFunction]",H="[object Boolean]",G="[object Date]",Q="[object DOMException]",V="[object Error]",z="[object Function]",J="[object GeneratorFunction]",Y="[object Map]",W="[object Number]",X="[object Null]",Z="[object Object]",tt="[object Promise]",rt="[object Proxy]",it="[object RegExp]",nt="[object Set]",et="[object String]",st="[object Symbol]",ot="[object Undefined]",at="[object WeakMap]",ht="[object WeakSet]",ut="[object ArrayBuffer]",ft="[object DataView]",ct="[object Float32Array]",lt="[object Float64Array]",dt="[object Int8Array]",vt="[object Int16Array]",wt="[object Int32Array]",pt="[object Uint8Array]",yt="[object Uint8ClampedArray]",bt="[object Uint16Array]",gt="[object Uint32Array]",mt=/\b__p \+= '';/g,At=/\b(__p \+=) '' \+/g,Et=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Mt=/&(?:amp|lt|gt|quot|#39);/g,_t=/[&<>"']/g,It=RegExp(Mt.source),Ot=RegExp(_t.source),St=/<%-([\s\S]+?)%>/g,Nt=/<%([\s\S]+?)%>/g,Ct=/<%=([\s\S]+?)%>/g,jt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,xt=/^\w*$/,Pt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Rt=/[\\^$.*+?()[\]{}|]/g,Tt=RegExp(Rt.source),Dt=/^\s+/,Ut=/\s/,Bt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,kt=/\{\n\/\* \[wrapped with (.+)\] \*/,$t=/,? & /,Ft=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,qt=/[()=,{}\[\]\/\s]/,Lt=/\\(\\)?/g,Kt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ht=/\w*$/,Gt=/^[-+]0x[0-9a-f]+$/i,Qt=/^0b[01]+$/i,Vt=/^\[object .+?Constructor\]$/,zt=/^0o[0-7]+$/i,Jt=/^(?:0|[1-9]\d*)$/,Yt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Wt=/($^)/,Xt=/['\n\r\u2028\u2029\\]/g,Zt="\\ud800-\\udfff",tr="\\u0300-\\u036f",rr="\\ufe20-\\ufe2f",ir="\\u20d0-\\u20ff",nr=tr+rr+ir,er="\\u2700-\\u27bf",sr="a-z\\xdf-\\xf6\\xf8-\\xff",or="\\xac\\xb1\\xd7\\xf7",ar="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",hr="\\u2000-\\u206f",ur=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",fr="A-Z\\xc0-\\xd6\\xd8-\\xde",cr="\\ufe0e\\ufe0f",lr=or+ar+hr+ur,dr="['’]",vr="["+Zt+"]",wr="["+lr+"]",pr="["+nr+"]",yr="\\d+",br="["+er+"]",gr="["+sr+"]",mr="[^"+Zt+lr+yr+er+sr+fr+"]",Ar="\\ud83c[\\udffb-\\udfff]",Er="(?:"+pr+"|"+Ar+")",Mr="[^"+Zt+"]",_r="(?:\\ud83c[\\udde6-\\uddff]){2}",Ir="[\\ud800-\\udbff][\\udc00-\\udfff]",Or="["+fr+"]",Sr="\\u200d",Nr="(?:"+gr+"|"+mr+")",Cr="(?:"+Or+"|"+mr+")",jr="(?:"+dr+"(?:d|ll|m|re|s|t|ve))?",xr="(?:"+dr+"(?:D|LL|M|RE|S|T|VE))?",Pr=Er+"?",Rr="["+cr+"]?",Tr="(?:"+Sr+"(?:"+[Mr,_r,Ir].join("|")+")"+Rr+Pr+")*",Dr="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ur="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Br=Rr+Pr+Tr,kr="(?:"+[br,_r,Ir].join("|")+")"+Br,$r="(?:"+[Mr+pr+"?",pr,_r,Ir,vr].join("|")+")",Fr=RegExp(dr,"g"),qr=RegExp(pr,"g"),Lr=RegExp(Ar+"(?="+Ar+")|"+$r+Br,"g"),Kr=RegExp([Or+"?"+gr+"+"+jr+"(?="+[wr,Or,"$"].join("|")+")",Cr+"+"+xr+"(?="+[wr,Or+Nr,"$"].join("|")+")",Or+"?"+Nr+"+"+jr,Or+"+"+xr,Ur,Dr,yr,kr].join("|"),"g"),Hr=RegExp("["+Sr+Zt+nr+cr+"]"),Gr=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Qr=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Vr=-1,zr={};zr[ct]=zr[lt]=zr[dt]=zr[vt]=zr[wt]=zr[pt]=zr[yt]=zr[bt]=zr[gt]=!0,zr[q]=zr[L]=zr[ut]=zr[H]=zr[ft]=zr[G]=zr[V]=zr[z]=zr[Y]=zr[W]=zr[Z]=zr[it]=zr[nt]=zr[et]=zr[at]=!1;var Jr={};Jr[q]=Jr[L]=Jr[ut]=Jr[ft]=Jr[H]=Jr[G]=Jr[ct]=Jr[lt]=Jr[dt]=Jr[vt]=Jr[wt]=Jr[Y]=Jr[W]=Jr[Z]=Jr[it]=Jr[nt]=Jr[et]=Jr[st]=Jr[pt]=Jr[yt]=Jr[bt]=Jr[gt]=!0,Jr[V]=Jr[z]=Jr[at]=!1;var Yr={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Wr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Xr={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Zr={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ti=parseFloat,ri=parseInt,ii=typeof EE=="object"&&EE&&EE.Object===Object&&EE,ni=typeof self=="object"&&self&&self.Object===Object&&self,ei=ii||ni||Function("return this")(),si=r&&!r.nodeType&&r,oi=si&&!0&&t&&!t.nodeType&&t,ai=oi&&oi.exports===si,hi=ai&&ii.process,ui=function(){try{var t=oi&&oi.require&&oi.require("util").types;return t||hi&&hi.binding&&hi.binding("util")}catch{}}(),fi=ui&&ui.isArrayBuffer,ci=ui&&ui.isDate,li=ui&&ui.isMap,di=ui&&ui.isRegExp,vi=ui&&ui.isSet,wi=ui&&ui.isTypedArray;function pi(t,r,i){switch(i.length){case 0:return t.call(r);case 1:return t.call(r,i[0]);case 2:return t.call(r,i[0],i[1]);case 3:return t.call(r,i[0],i[1],i[2])}return t.apply(r,i)}function yi(t,r,i,n){for(var e=-1,s=t==null?0:t.length;++e<s;){var o=t[e];r(n,o,i(o),t)}return n}function bi(t,r){for(var i=-1,n=t==null?0:t.length;++i<n&&r(t[i],i,t)!==!1;);return t}function gi(t,r){for(var i=t==null?0:t.length;i--&&r(t[i],i,t)!==!1;);return t}function mi(t,r){for(var i=-1,n=t==null?0:t.length;++i<n;)if(!r(t[i],i,t))return!1;return!0}function Ai(t,r){for(var i=-1,n=t==null?0:t.length,e=0,s=[];++i<n;){var o=t[i];r(o,i,t)&&(s[e++]=o)}return s}function Ei(t,r){var i=t==null?0:t.length;return!!i&&Ti(t,r,0)>-1}function Mi(t,r,i){for(var n=-1,e=t==null?0:t.length;++n<e;)if(i(r,t[n]))return!0;return!1}function _i(t,r){for(var i=-1,n=t==null?0:t.length,e=Array(n);++i<n;)e[i]=r(t[i],i,t);return e}function Ii(t,r){for(var i=-1,n=r.length,e=t.length;++i<n;)t[e+i]=r[i];return t}function Oi(t,r,i,n){var e=-1,s=t==null?0:t.length;for(n&&s&&(i=t[++e]);++e<s;)i=r(i,t[e],e,t);return i}function Si(t,r,i,n){var e=t==null?0:t.length;for(n&&e&&(i=t[--e]);e--;)i=r(i,t[e],e,t);return i}function Ni(t,r){for(var i=-1,n=t==null?0:t.length;++i<n;)if(r(t[i],i,t))return!0;return!1}var Ci=ki("length");function ji(t){return t.split("")}function xi(t){return t.match(Ft)||[]}function Pi(t,r,i){var n;return i(t,(function(t,i,e){if(r(t,i,e))return n=i,!1})),n}function Ri(t,r,i,n){for(var e=t.length,s=i+(n?1:-1);n?s--:++s<e;)if(r(t[s],s,t))return s;return-1}function Ti(t,r,i){return r===r?cn(t,r,i):Ri(t,Ui,i)}function Di(t,r,i,n){for(var e=i-1,s=t.length;++e<s;)if(n(t[e],r))return e;return-1}function Ui(t){return t!==t}function Bi(t,r){var i=t==null?0:t.length;return i?Li(t,r)/i:U}function ki(t){return function(r){return r==null?i:r[t]}}function $i(t){return function(r){return t==null?i:t[r]}}function Fi(t,r,i,n,e){return e(t,(function(t,e,s){i=n?(n=!1,t):r(i,t,e,s)})),i}function qi(t,r){var i=t.length;for(t.sort(r);i--;)t[i]=t[i].value;return t}function Li(t,r){for(var n,e=-1,s=t.length;++e<s;){var o=r(t[e]);o!==i&&(n=n===i?o:n+o)}return n}function Ki(t,r){for(var i=-1,n=Array(t);++i<t;)n[i]=r(i);return n}function Hi(t,r){return _i(r,(function(r){return[r,t[r]]}))}function Gi(t){return t&&t.slice(0,wn(t)+1).replace(Dt,"")}function Qi(t){return function(r){return t(r)}}function Vi(t,r){return _i(r,(function(r){return t[r]}))}function zi(t,r){return t.has(r)}function Ji(t,r){for(var i=-1,n=t.length;++i<n&&Ti(r,t[i],0)>-1;);return i}function Yi(t,r){for(var i=t.length;i--&&Ti(r,t[i],0)>-1;);return i}function Wi(t,r){for(var i=t.length,n=0;i--;)t[i]===r&&++n;return n}var Xi=$i(Yr),Zi=$i(Wr);function tn(t){return"\\"+Zr[t]}function rn(t,r){return t==null?i:t[r]}function nn(t){return Hr.test(t)}function en(t){return Gr.test(t)}function sn(t){for(var r,i=[];!(r=t.next()).done;)i.push(r.value);return i}function on(t){var r=-1,i=Array(t.size);return t.forEach((function(t,n){i[++r]=[n,t]})),i}function an(t,r){return function(i){return t(r(i))}}function hn(t,r){for(var i=-1,n=t.length,e=0,s=[];++i<n;){var o=t[i];(o===r||o===f)&&(t[i]=f,s[e++]=i)}return s}function un(t){var r=-1,i=Array(t.size);return t.forEach((function(t){i[++r]=t})),i}function fn(t){var r=-1,i=Array(t.size);return t.forEach((function(t){i[++r]=[t,t]})),i}function cn(t,r,i){for(var n=i-1,e=t.length;++n<e;)if(t[n]===r)return n;return-1}function ln(t,r,i){for(var n=i+1;n--;)if(t[n]===r)return n;return n}function dn(t){return nn(t)?yn(t):Ci(t)}function vn(t){return nn(t)?bn(t):ji(t)}function wn(t){for(var r=t.length;r--&&Ut.test(t.charAt(r)););return r}var pn=$i(Xr);function yn(t){for(var r=Lr.lastIndex=0;Lr.test(t);)++r;return r}function bn(t){return t.match(Lr)||[]}function gn(t){return t.match(Kr)||[]}var mn=function t(r){r=r==null?ei:An.defaults(ei.Object(),r,An.pick(ei,Qr));var Ut=r.Array,Ft=r.Date,Zt=r.Error,tr=r.Function,rr=r.Math,ir=r.Object,nr=r.RegExp,er=r.String,sr=r.TypeError,or=Ut.prototype,ar=tr.prototype,hr=ir.prototype,ur=r["__core-js_shared__"],fr=ar.toString,cr=hr.hasOwnProperty,lr=0,dr=function(){var t=/[^.]+$/.exec(ur&&ur.keys&&ur.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),vr=hr.toString,wr=fr.call(ir),pr=ei._,yr=nr("^"+fr.call(cr).replace(Rt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),br=ai?r.Buffer:i,gr=r.Symbol,mr=r.Uint8Array,Ar=br?br.allocUnsafe:i,Er=an(ir.getPrototypeOf,ir),Mr=ir.create,_r=hr.propertyIsEnumerable,Ir=or.splice,Or=gr?gr.isConcatSpreadable:i,Sr=gr?gr.iterator:i,Nr=gr?gr.toStringTag:i,Cr=function(){try{var t=Vo(ir,"defineProperty");return t({},"",{}),t}catch{}}(),jr=r.clearTimeout!==ei.clearTimeout&&r.clearTimeout,xr=Ft&&Ft.now!==ei.Date.now&&Ft.now,Pr=r.setTimeout!==ei.setTimeout&&r.setTimeout,Rr=rr.ceil,Tr=rr.floor,Dr=ir.getOwnPropertySymbols,Ur=br?br.isBuffer:i,Br=r.isFinite,kr=or.join,$r=an(ir.keys,ir),Lr=rr.max,Kr=rr.min,Hr=Ft.now,Gr=r.parseInt,Yr=rr.random,Wr=or.reverse,Xr=Vo(r,"DataView"),Zr=Vo(r,"Map"),ii=Vo(r,"Promise"),ni=Vo(r,"Set"),si=Vo(r,"WeakMap"),oi=Vo(ir,"create"),hi=si&&new si,ui={},Ci=Pa(Xr),ji=Pa(Zr),$i=Pa(ii),cn=Pa(ni),yn=Pa(si),bn=gr?gr.prototype:i,mn=bn?bn.valueOf:i,En=bn?bn.toString:i;function Mn(t){if(Of(t)&&!uf(t)&&!(t instanceof Sn)){if(t instanceof On)return t;if(cr.call(t,"__wrapped__"))return Ta(t)}return new On(t)}var _n=function(){function t(){}return function(r){if(!If(r))return{};if(Mr)return Mr(r);t.prototype=r;var n=new t;return t.prototype=i,n}}();function In(){}function On(t,r){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!r,this.__index__=0,this.__values__=i}Mn.templateSettings={escape:St,evaluate:Nt,interpolate:Ct,variable:"",imports:{_:Mn}},Mn.prototype=In.prototype,Mn.prototype.constructor=Mn,On.prototype=_n(In.prototype),On.prototype.constructor=On;function Sn(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=B,this.__views__=[]}function Nn(){var t=new Sn(this.__wrapped__);return t.__actions__=no(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=no(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=no(this.__views__),t}function Cn(){if(this.__filtered__){var t=new Sn(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function jn(){var t=this.__wrapped__.value(),r=this.__dir__,i=uf(t),n=r<0,e=i?t.length:0,s=Xo(0,e,this.__views__),o=s.start,a=s.end,h=a-o,u=n?a:o-1,f=this.__iteratees__,c=f.length,l=0,d=Kr(h,this.__takeCount__);if(!i||!n&&e==h&&d==h)return ks(t,this.__actions__);var v=[];t:for(;h--&&l<d;){u+=r;for(var w=-1,p=t[u];++w<c;){var y=f[w],b=y.iteratee,g=y.type,m=b(p);if(g==x)p=m;else if(!m){if(g==j)continue t;break t}}v[l++]=p}return v}Sn.prototype=_n(In.prototype),Sn.prototype.constructor=Sn;function xn(t){var r=-1,i=t==null?0:t.length;for(this.clear();++r<i;){var n=t[r];this.set(n[0],n[1])}}function Pn(){this.__data__=oi?oi(null):{},this.size=0}function Rn(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r}function Tn(t){var r=this.__data__;if(oi){var n=r[t];return n===h?i:n}return cr.call(r,t)?r[t]:i}function Dn(t){var r=this.__data__;return oi?r[t]!==i:cr.call(r,t)}function Un(t,r){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=oi&&r===i?h:r,this}xn.prototype.clear=Pn,xn.prototype.delete=Rn,xn.prototype.get=Tn,xn.prototype.has=Dn,xn.prototype.set=Un;function Bn(t){var r=-1,i=t==null?0:t.length;for(this.clear();++r<i;){var n=t[r];this.set(n[0],n[1])}}function kn(){this.__data__=[],this.size=0}function $n(t){var r=this.__data__,i=fe(r,t);if(i<0)return!1;var n=r.length-1;return i==n?r.pop():Ir.call(r,i,1),--this.size,!0}function Fn(t){var r=this.__data__,n=fe(r,t);return n<0?i:r[n][1]}function qn(t){return fe(this.__data__,t)>-1}function Ln(t,r){var i=this.__data__,n=fe(i,t);return n<0?(++this.size,i.push([t,r])):i[n][1]=r,this}Bn.prototype.clear=kn,Bn.prototype.delete=$n,Bn.prototype.get=Fn,Bn.prototype.has=qn,Bn.prototype.set=Ln;function Kn(t){var r=-1,i=t==null?0:t.length;for(this.clear();++r<i;){var n=t[r];this.set(n[0],n[1])}}function Hn(){this.size=0,this.__data__={hash:new xn,map:new(Zr||Bn),string:new xn}}function Gn(t){var r=Go(this,t).delete(t);return this.size-=r?1:0,r}function Qn(t){return Go(this,t).get(t)}function Vn(t){return Go(this,t).has(t)}function zn(t,r){var i=Go(this,t),n=i.size;return i.set(t,r),this.size+=i.size==n?0:1,this}Kn.prototype.clear=Hn,Kn.prototype.delete=Gn,Kn.prototype.get=Qn,Kn.prototype.has=Vn,Kn.prototype.set=zn;function Jn(t){var r=-1,i=t==null?0:t.length;for(this.__data__=new Kn;++r<i;)this.add(t[r])}function Yn(t){return this.__data__.set(t,h),this}function Wn(t){return this.__data__.has(t)}Jn.prototype.add=Jn.prototype.push=Yn,Jn.prototype.has=Wn;function Xn(t){var r=this.__data__=new Bn(t);this.size=r.size}function Zn(){this.__data__=new Bn,this.size=0}function te(t){var r=this.__data__,i=r.delete(t);return this.size=r.size,i}function re(t){return this.__data__.get(t)}function ie(t){return this.__data__.has(t)}function ne(t,r){var i=this.__data__;if(i instanceof Bn){var n=i.__data__;if(!Zr||n.length<e-1)return n.push([t,r]),this.size=++i.size,this;i=this.__data__=new Kn(n)}return i.set(t,r),this.size=i.size,this}Xn.prototype.clear=Zn,Xn.prototype.delete=te,Xn.prototype.get=re,Xn.prototype.has=ie,Xn.prototype.set=ne;function ee(t,r){var i=uf(t),n=!i&&hf(t),e=!i&&!n&&vf(t),s=!i&&!n&&!e&&qf(t),o=i||n||e||s,a=o?Ki(t.length,er):[],h=a.length;for(var u in t)(r||cr.call(t,u))&&!(o&&(u=="length"||e&&(u=="offset"||u=="parent")||s&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||oa(u,h)))&&a.push(u);return a}function se(t){var r=t.length;return r?t[ys(0,r-1)]:i}function oe(t,r){return Ca(no(t),pe(r,0,t.length))}function ae(t){return Ca(no(t))}function he(t,r,n){(n!==i&&!sf(t[r],n)||n===i&&!(r in t))&&ve(t,r,n)}function ue(t,r,n){var e=t[r];(!(cr.call(t,r)&&sf(e,n))||n===i&&!(r in t))&&ve(t,r,n)}function fe(t,r){for(var i=t.length;i--;)if(sf(t[i][0],r))return i;return-1}function ce(t,r,i,n){return Ee(t,(function(t,e,s){r(n,t,i(t),s)})),n}function le(t,r){return t&&eo(r,Mc(r),t)}function de(t,r){return t&&eo(r,_c(r),t)}function ve(t,r,i){r=="__proto__"&&Cr?Cr(t,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[r]=i}function we(t,r){for(var n=-1,e=r.length,s=Ut(e),o=t==null;++n<e;)s[n]=o?i:yc(t,r[n]);return s}function pe(t,r,n){return t===t&&(n!==i&&(t=t<=n?t:n),r!==i&&(t=t>=r?t:r)),t}function ye(t,r,n,e,s,o){var a,h=r&c,u=r&l,f=r&d;if(n&&(a=s?n(t,e,s,o):n(t)),a!==i)return a;if(!If(t))return t;var v=uf(t);if(v){if(a=ra(t),!h)return no(t,a)}else{var w=Wo(t),p=w==z||w==J;if(vf(t))return Vs(t,h);if(w==Z||w==q||p&&!s){if(a=u||p?{}:ia(t),!h)return u?oo(t,de(a,t)):so(t,le(a,t))}else{if(!Jr[w])return s?t:{};a=na(t,w,h)}}o||(o=new Xn);var y=o.get(t);if(y)return y;o.set(t,a),kf(t)?t.forEach((function(i){a.add(ye(i,r,n,i,t,o))})):Sf(t)&&t.forEach((function(i,e){a.set(e,ye(i,r,n,e,t,o))}));var b=f?u?Fo:$o:u?_c:Mc,g=v?i:b(t);return bi(g||t,(function(i,e){g&&(e=i,i=t[e]),ue(a,e,ye(i,r,n,e,t,o))})),a}function be(t){var r=Mc(t);return function(i){return ge(i,t,r)}}function ge(t,r,n){var e=n.length;if(t==null)return!e;for(t=ir(t);e--;){var s=n[e],o=r[s],a=t[s];if(a===i&&!(s in t)||!o(a))return!1}return!0}function me(t,r,n){if(typeof t!="function")throw new sr(o);return Ia((function(){t.apply(i,n)}),r)}function Ae(t,r,i,n){var s=-1,o=Ei,a=!0,h=t.length,u=[],f=r.length;if(!h)return u;i&&(r=_i(r,Qi(i))),n?(o=Mi,a=!1):r.length>=e&&(o=zi,a=!1,r=new Jn(r));t:for(;++s<h;){var c=t[s],l=i==null?c:i(c);if(c=n||c!==0?c:0,a&&l===l){for(var d=f;d--;)if(r[d]===l)continue t;u.push(c)}else o(r,l,n)||u.push(c)}return u}var Ee=uo(xe),Me=uo(Pe,!0);function _e(t,r){var i=!0;return Ee(t,(function(t,n,e){return i=!!r(t,n,e),i})),i}function Ie(t,r,n){for(var e=-1,s=t.length;++e<s;){var o=t[e],a=r(o);if(a!=null&&(h===i?a===a&&!Ff(a):n(a,h)))var h=a,u=o}return u}function Oe(t,r,n,e){var s=t.length;for(n=Jf(n),n<0&&(n=-n>s?0:s+n),e=e===i||e>s?s:Jf(e),e<0&&(e+=s),e=n>e?0:Yf(e);n<e;)t[n++]=r;return t}function Se(t,r){var i=[];return Ee(t,(function(t,n,e){r(t,n,e)&&i.push(t)})),i}function Ne(t,r,i,n,e){var s=-1,o=t.length;for(i||(i=sa),e||(e=[]);++s<o;){var a=t[s];r>0&&i(a)?r>1?Ne(a,r-1,i,n,e):Ii(e,a):n||(e[e.length]=a)}return e}var Ce=fo(),je=fo(!0);function xe(t,r){return t&&Ce(t,r,Mc)}function Pe(t,r){return t&&je(t,r,Mc)}function Re(t,r){return Ai(r,(function(r){return Ef(t[r])}))}function Te(t,r){r=Ks(r,t);for(var n=0,e=r.length;t!=null&&n<e;)t=t[xa(r[n++])];return n&&n==e?t:i}function De(t,r,i){var n=r(t);return uf(t)?n:Ii(n,i(t))}function Ue(t){return t==null?t===i?ot:X:Nr&&Nr in ir(t)?zo(t):ga(t)}function Be(t,r){return t>r}function ke(t,r){return t!=null&&cr.call(t,r)}function $e(t,r){return t!=null&&r in ir(t)}function Fe(t,r,i){return t>=Kr(r,i)&&t<Lr(r,i)}function qe(t,r,n){for(var e=n?Mi:Ei,s=t[0].length,o=t.length,a=o,h=Ut(o),u=1/0,f=[];a--;){var c=t[a];a&&r&&(c=_i(c,Qi(r))),u=Kr(c.length,u),h[a]=!n&&(r||s>=120&&c.length>=120)?new Jn(a&&c):i}c=t[0];var l=-1,d=h[0];t:for(;++l<s&&f.length<u;){var v=c[l],w=r?r(v):v;if(v=n||v!==0?v:0,!(d?zi(d,w):e(f,w,n))){for(a=o;--a;){var p=h[a];if(!(p?zi(p,w):e(t[a],w,n)))continue t}d&&d.push(w),f.push(v)}}return f}function Le(t,r,i,n){return xe(t,(function(t,e,s){r(n,i(t),e,s)})),n}function Ke(t,r,n){r=Ks(r,t),t=Aa(t,r);var e=t==null?t:t[xa(sh(r))];return e==null?i:pi(e,t,n)}function He(t){return Of(t)&&Ue(t)==q}function Ge(t){return Of(t)&&Ue(t)==ut}function Qe(t){return Of(t)&&Ue(t)==G}function Ve(t,r,i,n,e){return t===r?!0:t==null||r==null||!Of(t)&&!Of(r)?t!==t&&r!==r:ze(t,r,i,n,Ve,e)}function ze(t,r,i,n,e,s){var o=uf(t),a=uf(r),h=o?L:Wo(t),u=a?L:Wo(r);h=h==q?Z:h,u=u==q?Z:u;var f=h==Z,c=u==Z,l=h==u;if(l&&vf(t)){if(!vf(r))return!1;o=!0,f=!1}if(l&&!f)return s||(s=new Xn),o||qf(t)?Do(t,r,i,n,e,s):Uo(t,r,h,i,n,e,s);if(!(i&v)){var d=f&&cr.call(t,"__wrapped__"),w=c&&cr.call(r,"__wrapped__");if(d||w){var p=d?t.value():t,y=w?r.value():r;return s||(s=new Xn),e(p,y,i,n,s)}}return l?(s||(s=new Xn),Bo(t,r,i,n,e,s)):!1}function Je(t){return Of(t)&&Wo(t)==Y}function Ye(t,r,n,e){var s=n.length,o=s,a=!e;if(t==null)return!o;for(t=ir(t);s--;){var h=n[s];if(a&&h[2]?h[1]!==t[h[0]]:!(h[0]in t))return!1}for(;++s<o;){h=n[s];var u=h[0],f=t[u],c=h[1];if(a&&h[2]){if(f===i&&!(u in t))return!1}else{var l=new Xn;if(e)var d=e(f,c,u,t,r,l);if(!(d===i?Ve(c,f,v|w,e,l):d))return!1}}return!0}function We(t){if(!If(t)||ca(t))return!1;var r=Ef(t)?yr:Vt;return r.test(Pa(t))}function Xe(t){return Of(t)&&Ue(t)==it}function Ze(t){return Of(t)&&Wo(t)==nt}function ts(t){return Of(t)&&_f(t.length)&&!!zr[Ue(t)]}function rs(t){return typeof t=="function"?t:t==null?xl:typeof t=="object"?uf(t)?as(t[0],t[1]):os(t):Hl(t)}function is(t){if(!da(t))return $r(t);var r=[];for(var i in ir(t))cr.call(t,i)&&i!="constructor"&&r.push(i);return r}function ns(t){if(!If(t))return ba(t);var r=da(t),i=[];for(var n in t)n=="constructor"&&(r||!cr.call(t,n))||i.push(n);return i}function es(t,r){return t<r}function ss(t,r){var i=-1,n=cf(t)?Ut(t.length):[];return Ee(t,(function(t,e,s){n[++i]=r(t,e,s)})),n}function os(t){var r=Qo(t);return r.length==1&&r[0][2]?wa(r[0][0],r[0][1]):function(i){return i===t||Ye(i,t,r)}}function as(t,r){return ha(t)&&va(r)?wa(xa(t),r):function(n){var e=yc(n,t);return e===i&&e===r?gc(n,t):Ve(r,e,v|w)}}function hs(t,r,n,e,s){t!==r&&Ce(r,(function(o,a){if(s||(s=new Xn),If(o))us(t,r,a,n,hs,e,s);else{var h=e?e(Ma(t,a),o,a+"",t,r,s):i;h===i&&(h=o),he(t,a,h)}}),_c)}function us(t,r,n,e,s,o,a){var h=Ma(t,n),u=Ma(r,n),f=a.get(u);if(f){he(t,n,f);return}var c=o?o(h,u,n+"",t,r,a):i,l=c===i;if(l){var d=uf(u),v=!d&&vf(u),w=!d&&!v&&qf(u);c=u,d||v||w?uf(h)?c=h:lf(h)?c=no(h):v?(l=!1,c=Vs(u,!0)):w?(l=!1,c=Xs(u,!0)):c=[]:Df(u)||hf(u)?(c=h,hf(h)?c=Xf(h):(!If(h)||Ef(h))&&(c=ia(u))):l=!1}l&&(a.set(u,c),s(c,u,e,o,a),a.delete(u)),he(t,n,c)}function fs(t,r){var n=t.length;if(n)return r+=r<0?n:0,oa(r,n)?t[r]:i}function cs(t,r,i){r.length?r=_i(r,(function(t){return uf(t)?function(r){return Te(r,t.length===1?t[0]:t)}:t})):r=[xl];var n=-1;r=_i(r,Qi(Ho()));var e=ss(t,(function(t,i,e){var s=_i(r,(function(r){return r(t)}));return{criteria:s,index:++n,value:t}}));return qi(e,(function(t,r){return to(t,r,i)}))}function ls(t,r){return ds(t,r,(function(r,i){return gc(t,i)}))}function ds(t,r,i){for(var n=-1,e=r.length,s={};++n<e;){var o=r[n],a=Te(t,o);i(a,o)&&Ms(s,Ks(o,t),a)}return s}function vs(t){return function(r){return Te(r,t)}}function ws(t,r,i,n){var e=n?Di:Ti,s=-1,o=r.length,a=t;for(t===r&&(r=no(r)),i&&(a=_i(t,Qi(i)));++s<o;)for(var h=0,u=r[s],f=i?i(u):u;(h=e(a,f,h,n))>-1;)a!==t&&Ir.call(a,h,1),Ir.call(t,h,1);return t}function ps(t,r){for(var i=t?r.length:0,n=i-1;i--;){var e=r[i];if(i==n||e!==s){var s=e;oa(e)?Ir.call(t,e,1):Ds(t,e)}}return t}function ys(t,r){return t+Tr(Yr()*(r-t+1))}function bs(t,r,i,n){for(var e=-1,s=Lr(Rr((r-t)/(i||1)),0),o=Ut(s);s--;)o[n?s:++e]=t,t+=i;return o}function gs(t,r){var i="";if(!t||r<1||r>T)return i;do{r%2&&(i+=t),r=Tr(r/2),r&&(t+=t)}while(r);return i}function ms(t,r){return Oa(ma(t,r,xl),t+"")}function As(t){return se(Lc(t))}function Es(t,r){var i=Lc(t);return Ca(i,pe(r,0,i.length))}function Ms(t,r,n,e){if(!If(t))return t;r=Ks(r,t);for(var s=-1,o=r.length,a=o-1,h=t;h!=null&&++s<o;){var u=xa(r[s]),f=n;if(u==="__proto__"||u==="constructor"||u==="prototype")return t;if(s!=a){var c=h[u];f=e?e(c,u,h):i,f===i&&(f=If(c)?c:oa(r[s+1])?[]:{})}ue(h,u,f),h=h[u]}return t}var _s=hi?function(t,r){return hi.set(t,r),t}:xl,Is=Cr?function(t,r){return Cr(t,"toString",{configurable:!0,enumerable:!1,value:Sl(r),writable:!0})}:xl;function Os(t){return Ca(Lc(t))}function Ss(t,r,i){var n=-1,e=t.length;r<0&&(r=-r>e?0:e+r),i=i>e?e:i,i<0&&(i+=e),e=r>i?0:i-r>>>0,r>>>=0;for(var s=Ut(e);++n<e;)s[n]=t[n+r];return s}function Ns(t,r){var i;return Ee(t,(function(t,n,e){return i=r(t,n,e),!i})),!!i}function Cs(t,r,i){var n=0,e=t==null?n:t.length;if(typeof r=="number"&&r===r&&e<=$){for(;n<e;){var s=n+e>>>1,o=t[s];o!==null&&!Ff(o)&&(i?o<=r:o<r)?n=s+1:e=s}return e}return js(t,r,xl,i)}function js(t,r,n,e){var s=0,o=t==null?0:t.length;if(o===0)return 0;r=n(r);for(var a=r!==r,h=r===null,u=Ff(r),f=r===i;s<o;){var c=Tr((s+o)/2),l=n(t[c]),d=l!==i,v=l===null,w=l===l,p=Ff(l);if(a)var y=e||w;else f?y=w&&(e||d):h?y=w&&d&&(e||!v):u?y=w&&d&&!v&&(e||!p):v||p?y=!1:y=e?l<=r:l<r;y?s=c+1:o=c}return Kr(o,k)}function xs(t,r){for(var i=-1,n=t.length,e=0,s=[];++i<n;){var o=t[i],a=r?r(o):o;if(!i||!sf(a,h)){var h=a;s[e++]=o===0?0:o}}return s}function Ps(t){return typeof t=="number"?t:Ff(t)?U:+t}function Rs(t){if(typeof t=="string")return t;if(uf(t))return _i(t,Rs)+"";if(Ff(t))return En?En.call(t):"";var r=t+"";return r=="0"&&1/t==-R?"-0":r}function Ts(t,r,i){var n=-1,s=Ei,o=t.length,a=!0,h=[],u=h;if(i)a=!1,s=Mi;else if(o>=e){var f=r?null:Co(t);if(f)return un(f);a=!1,s=zi,u=new Jn}else u=r?[]:h;t:for(;++n<o;){var c=t[n],l=r?r(c):c;if(c=i||c!==0?c:0,a&&l===l){for(var d=u.length;d--;)if(u[d]===l)continue t;r&&u.push(l),h.push(c)}else s(u,l,i)||(u!==h&&u.push(l),h.push(c))}return h}function Ds(t,r){return r=Ks(r,t),t=Aa(t,r),t==null||delete t[xa(sh(r))]}function Us(t,r,i,n){return Ms(t,r,i(Te(t,r)),n)}function Bs(t,r,i,n){for(var e=t.length,s=n?e:-1;(n?s--:++s<e)&&r(t[s],s,t););return i?Ss(t,n?0:s,n?s+1:e):Ss(t,n?s+1:0,n?e:s)}function ks(t,r){var i=t;return i instanceof Sn&&(i=i.value()),Oi(r,(function(t,r){return r.func.apply(r.thisArg,Ii([t],r.args))}),i)}function $s(t,r,i){var n=t.length;if(n<2)return n?Ts(t[0]):[];for(var e=-1,s=Ut(n);++e<n;)for(var o=t[e],a=-1;++a<n;)a!=e&&(s[e]=Ae(s[e]||o,t[a],r,i));return Ts(Ne(s,1),r,i)}function Fs(t,r,n){for(var e=-1,s=t.length,o=r.length,a={};++e<s;){var h=e<o?r[e]:i;n(a,t[e],h)}return a}function qs(t){return lf(t)?t:[]}function Ls(t){return typeof t=="function"?t:xl}function Ks(t,r){return uf(t)?t:ha(t,r)?[t]:ja(tc(t))}var Hs=ms;function Gs(t,r,n){var e=t.length;return n=n===i?e:n,!r&&n>=e?t:Ss(t,r,n)}var Qs=jr||function(t){return ei.clearTimeout(t)};function Vs(t,r){if(r)return t.slice();var i=t.length,n=Ar?Ar(i):new t.constructor(i);return t.copy(n),n}function zs(t){var r=new t.constructor(t.byteLength);return new mr(r).set(new mr(t)),r}function Js(t,r){var i=r?zs(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.byteLength)}function Ys(t){var r=new t.constructor(t.source,Ht.exec(t));return r.lastIndex=t.lastIndex,r}function Ws(t){return mn?ir(mn.call(t)):{}}function Xs(t,r){var i=r?zs(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}function Zs(t,r){if(t!==r){var n=t!==i,e=t===null,s=t===t,o=Ff(t),a=r!==i,h=r===null,u=r===r,f=Ff(r);if(!h&&!f&&!o&&t>r||o&&a&&u&&!h&&!f||e&&a&&u||!n&&u||!s)return 1;if(!e&&!o&&!f&&t<r||f&&n&&s&&!e&&!o||h&&n&&s||!a&&s||!u)return-1}return 0}function to(t,r,i){for(var n=-1,e=t.criteria,s=r.criteria,o=e.length,a=i.length;++n<o;){var h=Zs(e[n],s[n]);if(h){if(n>=a)return h;var u=i[n];return h*(u=="desc"?-1:1)}}return t.index-r.index}function ro(t,r,i,n){for(var e=-1,s=t.length,o=i.length,a=-1,h=r.length,u=Lr(s-o,0),f=Ut(h+u),c=!n;++a<h;)f[a]=r[a];for(;++e<o;)(c||e<s)&&(f[i[e]]=t[e]);for(;u--;)f[a++]=t[e++];return f}function io(t,r,i,n){for(var e=-1,s=t.length,o=-1,a=i.length,h=-1,u=r.length,f=Lr(s-a,0),c=Ut(f+u),l=!n;++e<f;)c[e]=t[e];for(var d=e;++h<u;)c[d+h]=r[h];for(;++o<a;)(l||e<s)&&(c[d+i[o]]=t[e++]);return c}function no(t,r){var i=-1,n=t.length;for(r||(r=Ut(n));++i<n;)r[i]=t[i];return r}function eo(t,r,n,e){var s=!n;n||(n={});for(var o=-1,a=r.length;++o<a;){var h=r[o],u=e?e(n[h],t[h],h,n,t):i;u===i&&(u=t[h]),s?ve(n,h,u):ue(n,h,u)}return n}function so(t,r){return eo(t,Jo(t),r)}function oo(t,r){return eo(t,Yo(t),r)}function ao(t,r){return function(i,n){var e=uf(i)?yi:ce,s=r?r():{};return e(i,t,Ho(n,2),s)}}function ho(t){return ms((function(r,n){var e=-1,s=n.length,o=s>1?n[s-1]:i,a=s>2?n[2]:i;for(o=t.length>3&&typeof o=="function"?(s--,o):i,a&&aa(n[0],n[1],a)&&(o=s<3?i:o,s=1),r=ir(r);++e<s;){var h=n[e];h&&t(r,h,e,o)}return r}))}function uo(t,r){return function(i,n){if(i==null)return i;if(!cf(i))return t(i,n);for(var e=i.length,s=r?e:-1,o=ir(i);(r?s--:++s<e)&&n(o[s],s,o)!==!1;);return i}}function fo(t){return function(r,i,n){for(var e=-1,s=ir(r),o=n(r),a=o.length;a--;){var h=o[t?a:++e];if(i(s[h],h,s)===!1)break}return r}}function co(t,r,i){var n=r&p,e=wo(t);function s(){var r=this&&this!==ei&&this instanceof s?e:t;return r.apply(n?i:this,arguments)}return s}function lo(t){return function(r){r=tc(r);var n=nn(r)?vn(r):i,e=n?n[0]:r.charAt(0),s=n?Gs(n,1).join(""):r.slice(1);return e[t]()+s}}function vo(t){return function(r){return Oi(El(Jc(r).replace(Fr,"")),t,"")}}function wo(t){return function(){var r=arguments;switch(r.length){case 0:return new t;case 1:return new t(r[0]);case 2:return new t(r[0],r[1]);case 3:return new t(r[0],r[1],r[2]);case 4:return new t(r[0],r[1],r[2],r[3]);case 5:return new t(r[0],r[1],r[2],r[3],r[4]);case 6:return new t(r[0],r[1],r[2],r[3],r[4],r[5]);case 7:return new t(r[0],r[1],r[2],r[3],r[4],r[5],r[6])}var i=_n(t.prototype),n=t.apply(i,r);return If(n)?n:i}}function po(t,r,n){var e=wo(t);function s(){for(var o=arguments.length,a=Ut(o),h=o,u=Ko(s);h--;)a[h]=arguments[h];var f=o<3&&a[0]!==u&&a[o-1]!==u?[]:hn(a,u);if(o-=f.length,o<n)return So(t,r,go,s.placeholder,i,a,f,i,i,n-o);var c=this&&this!==ei&&this instanceof s?e:t;return pi(c,this,a)}return s}function yo(t){return function(r,n,e){var s=ir(r);if(!cf(r)){var o=Ho(n,3);r=Mc(r),n=function(t){return o(s[t],t,s)}}var a=t(r,n,e);return a>-1?s[o?r[a]:a]:i}}function bo(t){return ko((function(r){var n=r.length,e=n,s=On.prototype.thru;for(t&&r.reverse();e--;){var a=r[e];if(typeof a!="function")throw new sr(o);if(s&&!h&&Lo(a)=="wrapper")var h=new On([],!0)}for(e=h?e:n;++e<n;){a=r[e];var u=Lo(a),f=u=="wrapper"?qo(a):i;f&&fa(f[0])&&f[1]==(M|g|A|_)&&!f[4].length&&f[9]==1?h=h[Lo(f[0])].apply(h,f[3]):h=a.length==1&&fa(a)?h[u]():h.thru(a)}return function(){var t=arguments,i=t[0];if(h&&t.length==1&&uf(i))return h.plant(i).value();for(var e=0,s=n?r[e].apply(this,t):i;++e<n;)s=r[e].call(this,s);return s}}))}function go(t,r,n,e,s,o,a,h,u,f){var c=r&M,l=r&p,d=r&y,v=r&(g|m),w=r&I,b=d?i:wo(t);function A(){for(var i=arguments.length,p=Ut(i),y=i;y--;)p[y]=arguments[y];if(v)var g=Ko(A),m=Wi(p,g);if(e&&(p=ro(p,e,s,v)),o&&(p=io(p,o,a,v)),i-=m,v&&i<f){var E=hn(p,g);return So(t,r,go,A.placeholder,n,p,E,h,u,f-i)}var M=l?n:this,_=d?M[t]:t;return i=p.length,h?p=Ea(p,h):w&&i>1&&p.reverse(),c&&u<i&&(p.length=u),this&&this!==ei&&this instanceof A&&(_=b||wo(_)),_.apply(M,p)}return A}function mo(t,r){return function(i,n){return Le(i,t,r(n),{})}}function Ao(t,r){return function(n,e){var s;if(n===i&&e===i)return r;if(n!==i&&(s=n),e!==i){if(s===i)return e;typeof n=="string"||typeof e=="string"?(n=Rs(n),e=Rs(e)):(n=Ps(n),e=Ps(e)),s=t(n,e)}return s}}function Eo(t){return ko((function(r){return r=_i(r,Qi(Ho())),ms((function(i){var n=this;return t(r,(function(t){return pi(t,n,i)}))}))}))}function Mo(t,r){r=r===i?" ":Rs(r);var n=r.length;if(n<2)return n?gs(r,t):r;var e=gs(r,Rr(t/dn(r)));return nn(r)?Gs(vn(e),0,t).join(""):e.slice(0,t)}function _o(t,r,i,n){var e=r&p,s=wo(t);function o(){for(var r=-1,a=arguments.length,h=-1,u=n.length,f=Ut(u+a),c=this&&this!==ei&&this instanceof o?s:t;++h<u;)f[h]=n[h];for(;a--;)f[h++]=arguments[++r];return pi(c,e?i:this,f)}return o}function Io(t){return function(r,n,e){return e&&typeof e!="number"&&aa(r,n,e)&&(n=e=i),r=zf(r),n===i?(n=r,r=0):n=zf(n),e=e===i?r<n?1:-1:zf(e),bs(r,n,e,t)}}function Oo(t){return function(r,i){return typeof r=="string"&&typeof i=="string"||(r=Wf(r),i=Wf(i)),t(r,i)}}function So(t,r,n,e,s,o,a,h,u,f){var c=r&g,l=c?a:i,d=c?i:a,v=c?o:i,w=c?i:o;r|=c?A:E,r&=~(c?E:A),r&b||(r&=~(p|y));var m=[t,r,s,v,l,w,d,h,u,f],M=n.apply(i,m);return fa(t)&&_a(M,m),M.placeholder=e,Sa(M,t,r)}function No(t){var r=rr[t];return function(t,i){if(t=Wf(t),i=i==null?0:Kr(Jf(i),292),i&&Br(t)){var n=(tc(t)+"e").split("e"),e=r(n[0]+"e"+(+n[1]+i));return n=(tc(e)+"e").split("e"),+(n[0]+"e"+(+n[1]-i))}return r(t)}}var Co=ni&&1/un(new ni([,-0]))[1]==R?function(t){return new ni(t)}:$l;function jo(t){return function(r){var i=Wo(r);return i==Y?on(r):i==nt?fn(r):Hi(r,t(r))}}function xo(t,r,n,e,s,a,h,u){var f=r&y;if(!f&&typeof t!="function")throw new sr(o);var c=e?e.length:0;if(c||(r&=~(A|E),e=s=i),h=h===i?h:Lr(Jf(h),0),u=u===i?u:Jf(u),c-=s?s.length:0,r&E){var l=e,d=s;e=s=i}var v=f?i:qo(t),w=[t,r,n,e,s,l,d,a,h,u];if(v&&ya(w,v),t=w[0],r=w[1],n=w[2],e=w[3],s=w[4],u=w[9]=w[9]===i?f?0:t.length:Lr(w[9]-c,0),!u&&r&(g|m)&&(r&=~(g|m)),!r||r==p)var b=co(t,r,n);else r==g||r==m?b=po(t,r,u):(r==A||r==(p|A))&&!s.length?b=_o(t,r,n,e):b=go.apply(i,w);var M=v?_s:_a;return Sa(M(b,w),t,r)}function Po(t,r,n,e){return t===i||sf(t,hr[n])&&!cr.call(e,n)?r:t}function Ro(t,r,n,e,s,o){return If(t)&&If(r)&&(o.set(r,t),hs(t,r,i,Ro,o),o.delete(r)),t}function To(t){return Df(t)?i:t}function Do(t,r,n,e,s,o){var a=n&v,h=t.length,u=r.length;if(h!=u&&!(a&&u>h))return!1;var f=o.get(t),c=o.get(r);if(f&&c)return f==r&&c==t;var l=-1,d=!0,p=n&w?new Jn:i;for(o.set(t,r),o.set(r,t);++l<h;){var y=t[l],b=r[l];if(e)var g=a?e(b,y,l,r,t,o):e(y,b,l,t,r,o);if(g!==i){if(g)continue;d=!1;break}if(p){if(!Ni(r,(function(t,r){if(!zi(p,r)&&(y===t||s(y,t,n,e,o)))return p.push(r)}))){d=!1;break}}else if(!(y===b||s(y,b,n,e,o))){d=!1;break}}return o.delete(t),o.delete(r),d}function Uo(t,r,i,n,e,s,o){switch(i){case ft:if(t.byteLength!=r.byteLength||t.byteOffset!=r.byteOffset)return!1;t=t.buffer,r=r.buffer;case ut:return!(t.byteLength!=r.byteLength||!s(new mr(t),new mr(r)));case H:case G:case W:return sf(+t,+r);case V:return t.name==r.name&&t.message==r.message;case it:case et:return t==r+"";case Y:var a=on;case nt:var h=n&v;if(a||(a=un),t.size!=r.size&&!h)return!1;var u=o.get(t);if(u)return u==r;n|=w,o.set(t,r);var f=Do(a(t),a(r),n,e,s,o);return o.delete(t),f;case st:if(mn)return mn.call(t)==mn.call(r)}return!1}function Bo(t,r,n,e,s,o){var a=n&v,h=$o(t),u=h.length,f=$o(r),c=f.length;if(u!=c&&!a)return!1;for(var l=u;l--;){var d=h[l];if(!(a?d in r:cr.call(r,d)))return!1}var w=o.get(t),p=o.get(r);if(w&&p)return w==r&&p==t;var y=!0;o.set(t,r),o.set(r,t);for(var b=a;++l<u;){d=h[l];var g=t[d],m=r[d];if(e)var A=a?e(m,g,d,r,t,o):e(g,m,d,t,r,o);if(!(A===i?g===m||s(g,m,n,e,o):A)){y=!1;break}b||(b=d=="constructor")}if(y&&!b){var E=t.constructor,M=r.constructor;E!=M&&"constructor"in t&&"constructor"in r&&!(typeof E=="function"&&E instanceof E&&typeof M=="function"&&M instanceof M)&&(y=!1)}return o.delete(t),o.delete(r),y}function ko(t){return Oa(ma(t,i,za),t+"")}function $o(t){return De(t,Mc,Jo)}function Fo(t){return De(t,_c,Yo)}var qo=hi?function(t){return hi.get(t)}:$l;function Lo(t){for(var r=t.name+"",i=ui[r],n=cr.call(ui,r)?i.length:0;n--;){var e=i[n],s=e.func;if(s==null||s==t)return e.name}return r}function Ko(t){var r=cr.call(Mn,"placeholder")?Mn:t;return r.placeholder}function Ho(){var t=Mn.iteratee||Pl;return t=t===Pl?rs:t,arguments.length?t(arguments[0],arguments[1]):t}function Go(t,r){var i=t.__data__;return ua(r)?i[typeof r=="string"?"string":"hash"]:i.map}function Qo(t){for(var r=Mc(t),i=r.length;i--;){var n=r[i],e=t[n];r[i]=[n,e,va(e)]}return r}function Vo(t,r){var n=rn(t,r);return We(n)?n:i}function zo(t){var r=cr.call(t,Nr),n=t[Nr];try{t[Nr]=i;var e=!0}catch{}var s=vr.call(t);return e&&(r?t[Nr]=n:delete t[Nr]),s}var Jo=Dr?function(t){return t==null?[]:(t=ir(t),Ai(Dr(t),(function(r){return _r.call(t,r)})))}:zl,Yo=Dr?function(t){for(var r=[];t;)Ii(r,Jo(t)),t=Er(t);return r}:zl,Wo=Ue;(Xr&&Wo(new Xr(new ArrayBuffer(1)))!=ft||Zr&&Wo(new Zr)!=Y||ii&&Wo(ii.resolve())!=tt||ni&&Wo(new ni)!=nt||si&&Wo(new si)!=at)&&(Wo=function(t){var r=Ue(t),n=r==Z?t.constructor:i,e=n?Pa(n):"";if(e)switch(e){case Ci:return ft;case ji:return Y;case $i:return tt;case cn:return nt;case yn:return at}return r});function Xo(t,r,i){for(var n=-1,e=i.length;++n<e;){var s=i[n],o=s.size;switch(s.type){case"drop":t+=o;break;case"dropRight":r-=o;break;case"take":r=Kr(r,t+o);break;case"takeRight":t=Lr(t,r-o);break}}return{start:t,end:r}}function Zo(t){var r=t.match(kt);return r?r[1].split($t):[]}function ta(t,r,i){r=Ks(r,t);for(var n=-1,e=r.length,s=!1;++n<e;){var o=xa(r[n]);if(!(s=t!=null&&i(t,o)))break;t=t[o]}return s||++n!=e?s:(e=t==null?0:t.length,!!e&&_f(e)&&oa(o,e)&&(uf(t)||hf(t)))}function ra(t){var r=t.length,i=new t.constructor(r);return r&&typeof t[0]=="string"&&cr.call(t,"index")&&(i.index=t.index,i.input=t.input),i}function ia(t){return typeof t.constructor=="function"&&!da(t)?_n(Er(t)):{}}function na(t,r,i){var n=t.constructor;switch(r){case ut:return zs(t);case H:case G:return new n(+t);case ft:return Js(t,i);case ct:case lt:case dt:case vt:case wt:case pt:case yt:case bt:case gt:return Xs(t,i);case Y:return new n;case W:case et:return new n(t);case it:return Ys(t);case nt:return new n;case st:return Ws(t)}}function ea(t,r){var i=r.length;if(!i)return t;var n=i-1;return r[n]=(i>1?"& ":"")+r[n],r=r.join(i>2?", ":" "),t.replace(Bt,`{\n/* [wrapped with `+r+`] */\n`)}function sa(t){return uf(t)||hf(t)||!!(Or&&t&&t[Or])}function oa(t,r){var i=typeof t;return r=r??T,!!r&&(i=="number"||i!="symbol"&&Jt.test(t))&&t>-1&&t%1==0&&t<r}function aa(t,r,i){if(!If(i))return!1;var n=typeof r;return(n=="number"?cf(i)&&oa(r,i.length):n=="string"&&r in i)?sf(i[r],t):!1}function ha(t,r){if(uf(t))return!1;var i=typeof t;return i=="number"||i=="symbol"||i=="boolean"||t==null||Ff(t)?!0:xt.test(t)||!jt.test(t)||r!=null&&t in ir(r)}function ua(t){var r=typeof t;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?t!=="__proto__":t===null}function fa(t){var r=Lo(t),i=Mn[r];if(typeof i!="function"||!(r in Sn.prototype))return!1;if(t===i)return!0;var n=qo(i);return!!n&&t===n[0]}function ca(t){return!!dr&&dr in t}var la=ur?Ef:Jl;function da(t){var r=t&&t.constructor,i=typeof r=="function"&&r.prototype||hr;return t===i}function va(t){return t===t&&!If(t)}function wa(t,r){return function(n){return n==null?!1:n[t]===r&&(r!==i||t in ir(n))}}function pa(t){var r=Fu(t,(function(t){return i.size===u&&i.clear(),t})),i=r.cache;return r}function ya(t,r){var i=t[1],n=r[1],e=i|n,s=e<(p|y|M),o=n==M&&i==g||n==M&&i==_&&t[7].length<=r[8]||n==(M|_)&&r[7].length<=r[8]&&i==g;if(!(s||o))return t;n&p&&(t[2]=r[2],e|=i&p?0:b);var a=r[3];if(a){var h=t[3];t[3]=h?ro(h,a,r[4]):a,t[4]=h?hn(t[3],f):r[4]}return a=r[5],a&&(h=t[5],t[5]=h?io(h,a,r[6]):a,t[6]=h?hn(t[5],f):r[6]),a=r[7],a&&(t[7]=a),n&M&&(t[8]=t[8]==null?r[8]:Kr(t[8],r[8])),t[9]==null&&(t[9]=r[9]),t[0]=r[0],t[1]=e,t}function ba(t){var r=[];if(t!=null)for(var i in ir(t))r.push(i);return r}function ga(t){return vr.call(t)}function ma(t,r,n){return r=Lr(r===i?t.length-1:r,0),function(){for(var i=arguments,e=-1,s=Lr(i.length-r,0),o=Ut(s);++e<s;)o[e]=i[r+e];e=-1;for(var a=Ut(r+1);++e<r;)a[e]=i[e];return a[r]=n(o),pi(t,this,a)}}function Aa(t,r){return r.length<2?t:Te(t,Ss(r,0,-1))}function Ea(t,r){for(var n=t.length,e=Kr(r.length,n),s=no(t);e--;){var o=r[e];t[e]=oa(o,n)?s[o]:i}return t}function Ma(t,r){if(!(r==="constructor"&&typeof t[r]=="function")&&r!="__proto__")return t[r]}var _a=Na(_s),Ia=Pr||function(t,r){return ei.setTimeout(t,r)},Oa=Na(Is);function Sa(t,r,i){var n=r+"";return Oa(t,ea(n,Ra(Zo(n),i)))}function Na(t){var r=0,n=0;return function(){var e=Hr(),s=C-(e-n);if(n=e,s>0){if(++r>=N)return arguments[0]}else r=0;return t.apply(i,arguments)}}function Ca(t,r){var n=-1,e=t.length,s=e-1;for(r=r===i?e:r;++n<r;){var o=ys(n,s),a=t[o];t[o]=t[n],t[n]=a}return t.length=r,t}var ja=pa((function(t){var r=[];return t.charCodeAt(0)===46&&r.push(""),t.replace(Pt,(function(t,i,n,e){r.push(n?e.replace(Lt,"$1"):i||t)})),r}));function xa(t){if(typeof t=="string"||Ff(t))return t;var r=t+"";return r=="0"&&1/t==-R?"-0":r}function Pa(t){if(t!=null){try{return fr.call(t)}catch{}try{return t+""}catch{}}return""}function Ra(t,r){return bi(F,(function(i){var n="_."+i[0];r&i[1]&&!Ei(t,n)&&t.push(n)})),t.sort()}function Ta(t){if(t instanceof Sn)return t.clone();var r=new On(t.__wrapped__,t.__chain__);return r.__actions__=no(t.__actions__),r.__index__=t.__index__,r.__values__=t.__values__,r}function Da(t,r,n){(n?aa(t,r,n):r===i)?r=1:r=Lr(Jf(r),0);var e=t==null?0:t.length;if(!e||r<1)return[];for(var s=0,o=0,a=Ut(Rr(e/r));s<e;)a[o++]=Ss(t,s,s+=r);return a}function Ua(t){for(var r=-1,i=t==null?0:t.length,n=0,e=[];++r<i;){var s=t[r];s&&(e[n++]=s)}return e}function Ba(){var t=arguments.length;if(!t)return[];for(var r=Ut(t-1),i=arguments[0],n=t;n--;)r[n-1]=arguments[n];return Ii(uf(i)?no(i):[i],Ne(r,1))}var ka=ms((function(t,r){return lf(t)?Ae(t,Ne(r,1,lf,!0)):[]})),$a=ms((function(t,r){var n=sh(r);return lf(n)&&(n=i),lf(t)?Ae(t,Ne(r,1,lf,!0),Ho(n,2)):[]})),Fa=ms((function(t,r){var n=sh(r);return lf(n)&&(n=i),lf(t)?Ae(t,Ne(r,1,lf,!0),i,n):[]}));function qa(t,r,n){var e=t==null?0:t.length;return e?(r=n||r===i?1:Jf(r),Ss(t,r<0?0:r,e)):[]}function La(t,r,n){var e=t==null?0:t.length;return e?(r=n||r===i?1:Jf(r),r=e-r,Ss(t,0,r<0?0:r)):[]}function Ka(t,r){return t&&t.length?Bs(t,Ho(r,3),!0,!0):[]}function Ha(t,r){return t&&t.length?Bs(t,Ho(r,3),!0):[]}function Ga(t,r,i,n){var e=t==null?0:t.length;return e?(i&&typeof i!="number"&&aa(t,r,i)&&(i=0,n=e),Oe(t,r,i,n)):[]}function Qa(t,r,i){var n=t==null?0:t.length;if(!n)return-1;var e=i==null?0:Jf(i);return e<0&&(e=Lr(n+e,0)),Ri(t,Ho(r,3),e)}function Va(t,r,n){var e=t==null?0:t.length;if(!e)return-1;var s=e-1;return n!==i&&(s=Jf(n),s=n<0?Lr(e+s,0):Kr(s,e-1)),Ri(t,Ho(r,3),s,!0)}function za(t){var r=t==null?0:t.length;return r?Ne(t,1):[]}function Ja(t){var r=t==null?0:t.length;return r?Ne(t,R):[]}function Ya(t,r){var n=t==null?0:t.length;return n?(r=r===i?1:Jf(r),Ne(t,r)):[]}function Wa(t){for(var r=-1,i=t==null?0:t.length,n={};++r<i;){var e=t[r];n[e[0]]=e[1]}return n}function Xa(t){return t&&t.length?t[0]:i}function Za(t,r,i){var n=t==null?0:t.length;if(!n)return-1;var e=i==null?0:Jf(i);return e<0&&(e=Lr(n+e,0)),Ti(t,r,e)}function th(t){var r=t==null?0:t.length;return r?Ss(t,0,-1):[]}var rh=ms((function(t){var r=_i(t,qs);return r.length&&r[0]===t[0]?qe(r):[]})),ih=ms((function(t){var r=sh(t),n=_i(t,qs);return r===sh(n)?r=i:n.pop(),n.length&&n[0]===t[0]?qe(n,Ho(r,2)):[]})),nh=ms((function(t){var r=sh(t),n=_i(t,qs);return r=typeof r=="function"?r:i,r&&n.pop(),n.length&&n[0]===t[0]?qe(n,i,r):[]}));function eh(t,r){return t==null?"":kr.call(t,r)}function sh(t){var r=t==null?0:t.length;return r?t[r-1]:i}function oh(t,r,n){var e=t==null?0:t.length;if(!e)return-1;var s=e;return n!==i&&(s=Jf(n),s=s<0?Lr(e+s,0):Kr(s,e-1)),r===r?ln(t,r,s):Ri(t,Ui,s,!0)}function ah(t,r){return t&&t.length?fs(t,Jf(r)):i}var hh=ms(uh);function uh(t,r){return t&&t.length&&r&&r.length?ws(t,r):t}function fh(t,r,i){return t&&t.length&&r&&r.length?ws(t,r,Ho(i,2)):t}function ch(t,r,n){return t&&t.length&&r&&r.length?ws(t,r,i,n):t}var lh=ko((function(t,r){var i=t==null?0:t.length,n=we(t,r);return ps(t,_i(r,(function(t){return oa(t,i)?+t:t})).sort(Zs)),n}));function dh(t,r){var i=[];if(!(t&&t.length))return i;var n=-1,e=[],s=t.length;for(r=Ho(r,3);++n<s;){var o=t[n];r(o,n,t)&&(i.push(o),e.push(n))}return ps(t,e),i}function vh(t){return t==null?t:Wr.call(t)}function wh(t,r,n){var e=t==null?0:t.length;return e?(n&&typeof n!="number"&&aa(t,r,n)?(r=0,n=e):(r=r==null?0:Jf(r),n=n===i?e:Jf(n)),Ss(t,r,n)):[]}function ph(t,r){return Cs(t,r)}function yh(t,r,i){return js(t,r,Ho(i,2))}function bh(t,r){var i=t==null?0:t.length;if(i){var n=Cs(t,r);if(n<i&&sf(t[n],r))return n}return-1}function gh(t,r){return Cs(t,r,!0)}function mh(t,r,i){return js(t,r,Ho(i,2),!0)}function Ah(t,r){var i=t==null?0:t.length;if(i){var n=Cs(t,r,!0)-1;if(sf(t[n],r))return n}return-1}function Eh(t){return t&&t.length?xs(t):[]}function Mh(t,r){return t&&t.length?xs(t,Ho(r,2)):[]}function _h(t){var r=t==null?0:t.length;return r?Ss(t,1,r):[]}function Ih(t,r,n){return t&&t.length?(r=n||r===i?1:Jf(r),Ss(t,0,r<0?0:r)):[]}function Oh(t,r,n){var e=t==null?0:t.length;return e?(r=n||r===i?1:Jf(r),r=e-r,Ss(t,r<0?0:r,e)):[]}function Sh(t,r){return t&&t.length?Bs(t,Ho(r,3),!1,!0):[]}function Nh(t,r){return t&&t.length?Bs(t,Ho(r,3)):[]}var Ch=ms((function(t){return Ts(Ne(t,1,lf,!0))})),jh=ms((function(t){var r=sh(t);return lf(r)&&(r=i),Ts(Ne(t,1,lf,!0),Ho(r,2))})),xh=ms((function(t){var r=sh(t);return r=typeof r=="function"?r:i,Ts(Ne(t,1,lf,!0),i,r)}));function Ph(t){return t&&t.length?Ts(t):[]}function Rh(t,r){return t&&t.length?Ts(t,Ho(r,2)):[]}function Th(t,r){return r=typeof r=="function"?r:i,t&&t.length?Ts(t,i,r):[]}function Dh(t){if(!(t&&t.length))return[];var r=0;return t=Ai(t,(function(t){if(lf(t))return r=Lr(t.length,r),!0})),Ki(r,(function(r){return _i(t,ki(r))}))}function Uh(t,r){if(!(t&&t.length))return[];var n=Dh(t);return r==null?n:_i(n,(function(t){return pi(r,i,t)}))}var Bh=ms((function(t,r){return lf(t)?Ae(t,r):[]})),kh=ms((function(t){return $s(Ai(t,lf))})),$h=ms((function(t){var r=sh(t);return lf(r)&&(r=i),$s(Ai(t,lf),Ho(r,2))})),Fh=ms((function(t){var r=sh(t);return r=typeof r=="function"?r:i,$s(Ai(t,lf),i,r)})),qh=ms(Dh);function Lh(t,r){return Fs(t||[],r||[],ue)}function Kh(t,r){return Fs(t||[],r||[],Ms)}var Hh=ms((function(t){var r=t.length,n=r>1?t[r-1]:i;return n=typeof n=="function"?(t.pop(),n):i,Uh(t,n)}));function Gh(t){var r=Mn(t);return r.__chain__=!0,r}function Qh(t,r){return r(t),t}function Vh(t,r){return r(t)}var zh=ko((function(t){var r=t.length,n=r?t[0]:0,e=this.__wrapped__,s=function(r){return we(r,t)};return r>1||this.__actions__.length||!(e instanceof Sn)||!oa(n)?this.thru(s):(e=e.slice(n,+n+(r?1:0)),e.__actions__.push({func:Vh,args:[s],thisArg:i}),new On(e,this.__chain__).thru((function(t){return r&&!t.length&&t.push(i),t})))}));function Jh(){return Gh(this)}function Yh(){return new On(this.value(),this.__chain__)}function Wh(){this.__values__===i&&(this.__values__=Vf(this.value()));var t=this.__index__>=this.__values__.length,r=t?i:this.__values__[this.__index__++];return{done:t,value:r}}function Xh(){return this}function Zh(t){for(var r,n=this;n instanceof In;){var e=Ta(n);e.__index__=0,e.__values__=i,r?s.__wrapped__=e:r=e;var s=e;n=n.__wrapped__}return s.__wrapped__=t,r}function tu(){var t=this.__wrapped__;if(t instanceof Sn){var r=t;return this.__actions__.length&&(r=new Sn(this)),r=r.reverse(),r.__actions__.push({func:Vh,args:[vh],thisArg:i}),new On(r,this.__chain__)}return this.thru(vh)}function ru(){return ks(this.__wrapped__,this.__actions__)}var iu=ao((function(t,r,i){cr.call(t,i)?++t[i]:ve(t,i,1)}));function nu(t,r,n){var e=uf(t)?mi:_e;return n&&aa(t,r,n)&&(r=i),e(t,Ho(r,3))}function eu(t,r){var i=uf(t)?Ai:Se;return i(t,Ho(r,3))}var su=yo(Qa),ou=yo(Va);function au(t,r){return Ne(pu(t,r),1)}function hu(t,r){return Ne(pu(t,r),R)}function uu(t,r,n){return n=n===i?1:Jf(n),Ne(pu(t,r),n)}function fu(t,r){var i=uf(t)?bi:Ee;return i(t,Ho(r,3))}function cu(t,r){var i=uf(t)?gi:Me;return i(t,Ho(r,3))}var lu=ao((function(t,r,i){cr.call(t,i)?t[i].push(r):ve(t,i,[r])}));function du(t,r,i,n){t=cf(t)?t:Lc(t),i=i&&!n?Jf(i):0;var e=t.length;return i<0&&(i=Lr(e+i,0)),$f(t)?i<=e&&t.indexOf(r,i)>-1:!!e&&Ti(t,r,i)>-1}var vu=ms((function(t,r,i){var n=-1,e=typeof r=="function",s=cf(t)?Ut(t.length):[];return Ee(t,(function(t){s[++n]=e?pi(r,t,i):Ke(t,r,i)})),s})),wu=ao((function(t,r,i){ve(t,i,r)}));function pu(t,r){var i=uf(t)?_i:ss;return i(t,Ho(r,3))}function yu(t,r,n,e){return t==null?[]:(uf(r)||(r=r==null?[]:[r]),n=e?i:n,uf(n)||(n=n==null?[]:[n]),cs(t,r,n))}var bu=ao((function(t,r,i){t[i?0:1].push(r)}),(function(){return[[],[]]}));function gu(t,r,i){var n=uf(t)?Oi:Fi,e=arguments.length<3;return n(t,Ho(r,4),i,e,Ee)}function mu(t,r,i){var n=uf(t)?Si:Fi,e=arguments.length<3;return n(t,Ho(r,4),i,e,Me)}function Au(t,r){var i=uf(t)?Ai:Se;return i(t,qu(Ho(r,3)))}function Eu(t){var r=uf(t)?se:As;return r(t)}function Mu(t,r,n){(n?aa(t,r,n):r===i)?r=1:r=Jf(r);var e=uf(t)?oe:Es;return e(t,r)}function _u(t){var r=uf(t)?ae:Os;return r(t)}function Iu(t){if(t==null)return 0;if(cf(t))return $f(t)?dn(t):t.length;var r=Wo(t);return r==Y||r==nt?t.size:is(t).length}function Ou(t,r,n){var e=uf(t)?Ni:Ns;return n&&aa(t,r,n)&&(r=i),e(t,Ho(r,3))}var Su=ms((function(t,r){if(t==null)return[];var i=r.length;return i>1&&aa(t,r[0],r[1])?r=[]:i>2&&aa(r[0],r[1],r[2])&&(r=[r[0]]),cs(t,Ne(r,1),[])})),Nu=xr||function(){return ei.Date.now()};function Cu(t,r){if(typeof r!="function")throw new sr(o);return t=Jf(t),function(){if(--t<1)return r.apply(this,arguments)}}function ju(t,r,n){return r=n?i:r,r=t&&r==null?t.length:r,xo(t,M,i,i,i,i,r)}function xu(t,r){var n;if(typeof r!="function")throw new sr(o);return t=Jf(t),function(){return--t>0&&(n=r.apply(this,arguments)),t<=1&&(r=i),n}}var Pu=ms((function(t,r,i){var n=p;if(i.length){var e=hn(i,Ko(Pu));n|=A}return xo(t,n,r,i,e)})),Ru=ms((function(t,r,i){var n=p|y;if(i.length){var e=hn(i,Ko(Ru));n|=A}return xo(r,n,t,i,e)}));function Tu(t,r,n){r=n?i:r;var e=xo(t,g,i,i,i,i,i,r);return e.placeholder=Tu.placeholder,e}function Du(t,r,n){r=n?i:r;var e=xo(t,m,i,i,i,i,i,r);return e.placeholder=Du.placeholder,e}function Uu(t,r,n){var e,s,a,h,u,f,c=0,l=!1,d=!1,v=!0;if(typeof t!="function")throw new sr(o);r=Wf(r)||0,If(n)&&(l=!!n.leading,d="maxWait"in n,a=d?Lr(Wf(n.maxWait)||0,r):a,v="trailing"in n?!!n.trailing:v);function w(r){var n=e,o=s;return e=s=i,c=r,h=t.apply(o,n),h}function p(t){return c=t,u=Ia(g,r),l?w(t):h}function y(t){var i=t-f,n=t-c,e=r-i;return d?Kr(e,a-n):e}function b(t){var n=t-f,e=t-c;return f===i||n>=r||n<0||d&&e>=a}function g(){var t=Nu();if(b(t))return m(t);u=Ia(g,y(t))}function m(t){return u=i,v&&e?w(t):(e=s=i,h)}function A(){u!==i&&Qs(u),c=0,e=f=s=u=i}function E(){return u===i?h:m(Nu())}function M(){var t=Nu(),n=b(t);if(e=arguments,s=this,f=t,n){if(u===i)return p(f);if(d)return Qs(u),u=Ia(g,r),w(f)}return u===i&&(u=Ia(g,r)),h}return M.cancel=A,M.flush=E,M}var Bu=ms((function(t,r){return me(t,1,r)})),ku=ms((function(t,r,i){return me(t,Wf(r)||0,i)}));function $u(t){return xo(t,I)}function Fu(t,r){if(typeof t!="function"||r!=null&&typeof r!="function")throw new sr(o);var i=function(){var n=arguments,e=r?r.apply(this,n):n[0],s=i.cache;if(s.has(e))return s.get(e);var o=t.apply(this,n);return i.cache=s.set(e,o)||s,o};return i.cache=new(Fu.Cache||Kn),i}Fu.Cache=Kn;function qu(t){if(typeof t!="function")throw new sr(o);return function(){var r=arguments;switch(r.length){case 0:return!t.call(this);case 1:return!t.call(this,r[0]);case 2:return!t.call(this,r[0],r[1]);case 3:return!t.call(this,r[0],r[1],r[2])}return!t.apply(this,r)}}function Lu(t){return xu(2,t)}var Ku=Hs((function(t,r){r=r.length==1&&uf(r[0])?_i(r[0],Qi(Ho())):_i(Ne(r,1),Qi(Ho()));var i=r.length;return ms((function(n){for(var e=-1,s=Kr(n.length,i);++e<s;)n[e]=r[e].call(this,n[e]);return pi(t,this,n)}))})),Hu=ms((function(t,r){var n=hn(r,Ko(Hu));return xo(t,A,i,r,n)})),Gu=ms((function(t,r){var n=hn(r,Ko(Gu));return xo(t,E,i,r,n)})),Qu=ko((function(t,r){return xo(t,_,i,i,i,r)}));function Vu(t,r){if(typeof t!="function")throw new sr(o);return r=r===i?r:Jf(r),ms(t,r)}function zu(t,r){if(typeof t!="function")throw new sr(o);return r=r==null?0:Lr(Jf(r),0),ms((function(i){var n=i[r],e=Gs(i,0,r);return n&&Ii(e,n),pi(t,this,e)}))}function Ju(t,r,i){var n=!0,e=!0;if(typeof t!="function")throw new sr(o);return If(i)&&(n="leading"in i?!!i.leading:n,e="trailing"in i?!!i.trailing:e),Uu(t,r,{leading:n,maxWait:r,trailing:e})}function Yu(t){return ju(t,1)}function Wu(t,r){return Hu(Ls(r),t)}function Xu(){if(!arguments.length)return[];var t=arguments[0];return uf(t)?t:[t]}function Zu(t){return ye(t,d)}function tf(t,r){return r=typeof r=="function"?r:i,ye(t,d,r)}function rf(t){return ye(t,c|d)}function nf(t,r){return r=typeof r=="function"?r:i,ye(t,c|d,r)}function ef(t,r){return r==null||ge(t,r,Mc(r))}function sf(t,r){return t===r||t!==t&&r!==r}var of=Oo(Be),af=Oo((function(t,r){return t>=r})),hf=He(function(){return arguments}())?He:function(t){return Of(t)&&cr.call(t,"callee")&&!_r.call(t,"callee")},uf=Ut.isArray,ff=fi?Qi(fi):Ge;function cf(t){return t!=null&&_f(t.length)&&!Ef(t)}function lf(t){return Of(t)&&cf(t)}function df(t){return t===!0||t===!1||Of(t)&&Ue(t)==H}var vf=Ur||Jl,wf=ci?Qi(ci):Qe;function pf(t){return Of(t)&&t.nodeType===1&&!Df(t)}function yf(t){if(t==null)return!0;if(cf(t)&&(uf(t)||typeof t=="string"||typeof t.splice=="function"||vf(t)||qf(t)||hf(t)))return!t.length;var r=Wo(t);if(r==Y||r==nt)return!t.size;if(da(t))return!is(t).length;for(var i in t)if(cr.call(t,i))return!1;return!0}function bf(t,r){return Ve(t,r)}function gf(t,r,n){n=typeof n=="function"?n:i;var e=n?n(t,r):i;return e===i?Ve(t,r,i,n):!!e}function mf(t){if(!Of(t))return!1;var r=Ue(t);return r==V||r==Q||typeof t.message=="string"&&typeof t.name=="string"&&!Df(t)}function Af(t){return typeof t=="number"&&Br(t)}function Ef(t){if(!If(t))return!1;var r=Ue(t);return r==z||r==J||r==K||r==rt}function Mf(t){return typeof t=="number"&&t==Jf(t)}function _f(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=T}function If(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")}function Of(t){return t!=null&&typeof t=="object"}var Sf=li?Qi(li):Je;function Nf(t,r){return t===r||Ye(t,r,Qo(r))}function Cf(t,r,n){return n=typeof n=="function"?n:i,Ye(t,r,Qo(r),n)}function jf(t){return Tf(t)&&t!=+t}function xf(t){if(la(t))throw new Zt(s);return We(t)}function Pf(t){return t===null}function Rf(t){return t==null}function Tf(t){return typeof t=="number"||Of(t)&&Ue(t)==W}function Df(t){if(!Of(t)||Ue(t)!=Z)return!1;var r=Er(t);if(r===null)return!0;var i=cr.call(r,"constructor")&&r.constructor;return typeof i=="function"&&i instanceof i&&fr.call(i)==wr}var Uf=di?Qi(di):Xe;function Bf(t){return Mf(t)&&t>=-T&&t<=T}var kf=vi?Qi(vi):Ze;function $f(t){return typeof t=="string"||!uf(t)&&Of(t)&&Ue(t)==et}function Ff(t){return typeof t=="symbol"||Of(t)&&Ue(t)==st}var qf=wi?Qi(wi):ts;function Lf(t){return t===i}function Kf(t){return Of(t)&&Wo(t)==at}function Hf(t){return Of(t)&&Ue(t)==ht}var Gf=Oo(es),Qf=Oo((function(t,r){return t<=r}));function Vf(t){if(!t)return[];if(cf(t))return $f(t)?vn(t):no(t);if(Sr&&t[Sr])return sn(t[Sr]());var r=Wo(t),i=r==Y?on:r==nt?un:Lc;return i(t)}function zf(t){if(!t)return t===0?t:0;if(t=Wf(t),t===R||t===-R){var r=t<0?-1:1;return r*D}return t===t?t:0}function Jf(t){var r=zf(t),i=r%1;return r===r?i?r-i:r:0}function Yf(t){return t?pe(Jf(t),0,B):0}function Wf(t){if(typeof t=="number")return t;if(Ff(t))return U;if(If(t)){var r=typeof t.valueOf=="function"?t.valueOf():t;t=If(r)?r+"":r}if(typeof t!="string")return t===0?t:+t;t=Gi(t);var i=Qt.test(t);return i||zt.test(t)?ri(t.slice(2),i?2:8):Gt.test(t)?U:+t}function Xf(t){return eo(t,_c(t))}function Zf(t){return t?pe(Jf(t),-T,T):t===0?t:0}function tc(t){return t==null?"":Rs(t)}var rc=ho((function(t,r){if(da(r)||cf(r)){eo(r,Mc(r),t);return}for(var i in r)cr.call(r,i)&&ue(t,i,r[i])})),ic=ho((function(t,r){eo(r,_c(r),t)})),nc=ho((function(t,r,i,n){eo(r,_c(r),t,n)})),ec=ho((function(t,r,i,n){eo(r,Mc(r),t,n)})),sc=ko(we);function oc(t,r){var i=_n(t);return r==null?i:le(i,r)}var ac=ms((function(t,r){t=ir(t);var n=-1,e=r.length,s=e>2?r[2]:i;for(s&&aa(r[0],r[1],s)&&(e=1);++n<e;)for(var o=r[n],a=_c(o),h=-1,u=a.length;++h<u;){var f=a[h],c=t[f];(c===i||sf(c,hr[f])&&!cr.call(t,f))&&(t[f]=o[f])}return t})),hc=ms((function(t){return t.push(i,Ro),pi(Nc,i,t)}));function uc(t,r){return Pi(t,Ho(r,3),xe)}function fc(t,r){return Pi(t,Ho(r,3),Pe)}function cc(t,r){return t==null?t:Ce(t,Ho(r,3),_c)}function lc(t,r){return t==null?t:je(t,Ho(r,3),_c)}function dc(t,r){return t&&xe(t,Ho(r,3))}function vc(t,r){return t&&Pe(t,Ho(r,3))}function wc(t){return t==null?[]:Re(t,Mc(t))}function pc(t){return t==null?[]:Re(t,_c(t))}function yc(t,r,n){var e=t==null?i:Te(t,r);return e===i?n:e}function bc(t,r){return t!=null&&ta(t,r,ke)}function gc(t,r){return t!=null&&ta(t,r,$e)}var mc=mo((function(t,r,i){r!=null&&typeof r.toString!="function"&&(r=vr.call(r)),t[r]=i}),Sl(xl)),Ac=mo((function(t,r,i){r!=null&&typeof r.toString!="function"&&(r=vr.call(r)),cr.call(t,r)?t[r].push(i):t[r]=[i]}),Ho),Ec=ms(Ke);function Mc(t){return cf(t)?ee(t):is(t)}function _c(t){return cf(t)?ee(t,!0):ns(t)}function Ic(t,r){var i={};return r=Ho(r,3),xe(t,(function(t,n,e){ve(i,r(t,n,e),t)})),i}function Oc(t,r){var i={};return r=Ho(r,3),xe(t,(function(t,n,e){ve(i,n,r(t,n,e))})),i}var Sc=ho((function(t,r,i){hs(t,r,i)})),Nc=ho((function(t,r,i,n){hs(t,r,i,n)})),Cc=ko((function(t,r){var i={};if(t==null)return i;var n=!1;r=_i(r,(function(r){return r=Ks(r,t),n||(n=r.length>1),r})),eo(t,Fo(t),i),n&&(i=ye(i,c|l|d,To));for(var e=r.length;e--;)Ds(i,r[e]);return i}));function jc(t,r){return Pc(t,qu(Ho(r)))}var xc=ko((function(t,r){return t==null?{}:ls(t,r)}));function Pc(t,r){if(t==null)return{};var i=_i(Fo(t),(function(t){return[t]}));return r=Ho(r),ds(t,i,(function(t,i){return r(t,i[0])}))}function Rc(t,r,n){r=Ks(r,t);var e=-1,s=r.length;for(s||(s=1,t=i);++e<s;){var o=t==null?i:t[xa(r[e])];o===i&&(e=s,o=n),t=Ef(o)?o.call(t):o}return t}function Tc(t,r,i){return t==null?t:Ms(t,r,i)}function Dc(t,r,n,e){return e=typeof e=="function"?e:i,t==null?t:Ms(t,r,n,e)}var Uc=jo(Mc),Bc=jo(_c);function kc(t,r,i){var n=uf(t),e=n||vf(t)||qf(t);if(r=Ho(r,4),i==null){var s=t&&t.constructor;e?i=n?new s:[]:If(t)?i=Ef(s)?_n(Er(t)):{}:i={}}return(e?bi:xe)(t,(function(t,n,e){return r(i,t,n,e)})),i}function $c(t,r){return t==null?!0:Ds(t,r)}function Fc(t,r,i){return t==null?t:Us(t,r,Ls(i))}function qc(t,r,n,e){return e=typeof e=="function"?e:i,t==null?t:Us(t,r,Ls(n),e)}function Lc(t){return t==null?[]:Vi(t,Mc(t))}function Kc(t){return t==null?[]:Vi(t,_c(t))}function Hc(t,r,n){return n===i&&(n=r,r=i),n!==i&&(n=Wf(n),n=n===n?n:0),r!==i&&(r=Wf(r),r=r===r?r:0),pe(Wf(t),r,n)}function Gc(t,r,n){return r=zf(r),n===i?(n=r,r=0):n=zf(n),t=Wf(t),Fe(t,r,n)}function Qc(t,r,n){if(n&&typeof n!="boolean"&&aa(t,r,n)&&(r=n=i),n===i&&(typeof r=="boolean"?(n=r,r=i):typeof t=="boolean"&&(n=t,t=i)),t===i&&r===i?(t=0,r=1):(t=zf(t),r===i?(r=t,t=0):r=zf(r)),t>r){var e=t;t=r,r=e}if(n||t%1||r%1){var s=Yr();return Kr(t+s*(r-t+ti("1e-"+((s+"").length-1))),r)}return ys(t,r)}var Vc=vo((function(t,r,i){return r=r.toLowerCase(),t+(i?zc(r):r)}));function zc(t){return Al(tc(t).toLowerCase())}function Jc(t){return t=tc(t),t&&t.replace(Yt,Xi).replace(qr,"")}function Yc(t,r,n){t=tc(t),r=Rs(r);var e=t.length;n=n===i?e:pe(Jf(n),0,e);var s=n;return n-=r.length,n>=0&&t.slice(n,s)==r}function Wc(t){return t=tc(t),t&&Ot.test(t)?t.replace(_t,Zi):t}function Xc(t){return t=tc(t),t&&Tt.test(t)?t.replace(Rt,"\\$&"):t}var Zc=vo((function(t,r,i){return t+(i?"-":"")+r.toLowerCase()})),tl=vo((function(t,r,i){return t+(i?" ":"")+r.toLowerCase()})),rl=lo("toLowerCase");function il(t,r,i){t=tc(t),r=Jf(r);var n=r?dn(t):0;if(!r||n>=r)return t;var e=(r-n)/2;return Mo(Tr(e),i)+t+Mo(Rr(e),i)}function nl(t,r,i){t=tc(t),r=Jf(r);var n=r?dn(t):0;return r&&n<r?t+Mo(r-n,i):t}function el(t,r,i){t=tc(t),r=Jf(r);var n=r?dn(t):0;return r&&n<r?Mo(r-n,i)+t:t}function sl(t,r,i){return i||r==null?r=0:r&&(r=+r),Gr(tc(t).replace(Dt,""),r||0)}function ol(t,r,n){return(n?aa(t,r,n):r===i)?r=1:r=Jf(r),gs(tc(t),r)}function al(){var t=arguments,r=tc(t[0]);return t.length<3?r:r.replace(t[1],t[2])}var hl=vo((function(t,r,i){return t+(i?"_":"")+r.toLowerCase()}));function ul(t,r,n){return n&&typeof n!="number"&&aa(t,r,n)&&(r=n=i),n=n===i?B:n>>>0,n?(t=tc(t),t&&(typeof r=="string"||r!=null&&!Uf(r))&&(r=Rs(r),!r&&nn(t))?Gs(vn(t),0,n):t.split(r,n)):[]}var fl=vo((function(t,r,i){return t+(i?" ":"")+Al(r)}));function cl(t,r,i){return t=tc(t),i=i==null?0:pe(Jf(i),0,t.length),r=Rs(r),t.slice(i,i+r.length)==r}function ll(t,r,n){var e=Mn.templateSettings;n&&aa(t,r,n)&&(r=i),t=tc(t),r=nc({},r,e,Po);var s=nc({},r.imports,e.imports,Po),o=Mc(s),h=Vi(s,o),u,f,c=0,l=r.interpolate||Wt,d="__p += '",v=nr((r.escape||Wt).source+"|"+l.source+"|"+(l===Ct?Kt:Wt).source+"|"+(r.evaluate||Wt).source+"|$","g"),w="//# sourceURL="+(cr.call(r,"sourceURL")?(r.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Vr+"]")+`\n`;t.replace(v,(function(r,i,n,e,s,o){return n||(n=e),d+=t.slice(c,o).replace(Xt,tn),i&&(u=!0,d+=`' +\n__e(`+i+`) +\n'`),s&&(f=!0,d+=`';\n`+s+`;\n__p += '`),n&&(d+=`' +\n((__t = (`+n+`)) == null ? '' : __t) +\n'`),c=o+r.length,r})),d+=`';\n`;var p=cr.call(r,"variable")&&r.variable;if(!p)d=`with (obj) {\n`+d+`\n}\n`;else if(qt.test(p))throw new Zt(a);d=(f?d.replace(mt,""):d).replace(At,"$1").replace(Et,"$1;"),d="function("+(p||"obj")+`) {\n`+(p?"":`obj || (obj = {});\n`)+"var __t, __p = ''"+(u?", __e = _.escape":"")+(f?`, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n`:`;\n`)+d+`return __p\n}`;var y=Ml((function(){return tr(o,w+"return "+d).apply(i,h)}));if(y.source=d,mf(y))throw y;return y}function dl(t){return tc(t).toLowerCase()}function vl(t){return tc(t).toUpperCase()}function wl(t,r,n){if(t=tc(t),t&&(n||r===i))return Gi(t);if(!t||!(r=Rs(r)))return t;var e=vn(t),s=vn(r),o=Ji(e,s),a=Yi(e,s)+1;return Gs(e,o,a).join("")}function pl(t,r,n){if(t=tc(t),t&&(n||r===i))return t.slice(0,wn(t)+1);if(!t||!(r=Rs(r)))return t;var e=vn(t),s=Yi(e,vn(r))+1;return Gs(e,0,s).join("")}function yl(t,r,n){if(t=tc(t),t&&(n||r===i))return t.replace(Dt,"");if(!t||!(r=Rs(r)))return t;var e=vn(t),s=Ji(e,vn(r));return Gs(e,s).join("")}function bl(t,r){var n=O,e=S;if(If(r)){var s="separator"in r?r.separator:s;n="length"in r?Jf(r.length):n,e="omission"in r?Rs(r.omission):e}t=tc(t);var o=t.length;if(nn(t)){var a=vn(t);o=a.length}if(n>=o)return t;var h=n-dn(e);if(h<1)return e;var u=a?Gs(a,0,h).join(""):t.slice(0,h);if(s===i)return u+e;if(a&&(h+=u.length-h),Uf(s)){if(t.slice(h).search(s)){var f,c=u;for(s.global||(s=nr(s.source,tc(Ht.exec(s))+"g")),s.lastIndex=0;f=s.exec(c);)var l=f.index;u=u.slice(0,l===i?h:l)}}else if(t.indexOf(Rs(s),h)!=h){var d=u.lastIndexOf(s);d>-1&&(u=u.slice(0,d))}return u+e}function gl(t){return t=tc(t),t&&It.test(t)?t.replace(Mt,pn):t}var ml=vo((function(t,r,i){return t+(i?" ":"")+r.toUpperCase()})),Al=lo("toUpperCase");function El(t,r,n){return t=tc(t),r=n?i:r,r===i?en(t)?gn(t):xi(t):t.match(r)||[]}var Ml=ms((function(t,r){try{return pi(t,i,r)}catch(t){return mf(t)?t:new Zt(t)}})),_l=ko((function(t,r){return bi(r,(function(r){r=xa(r),ve(t,r,Pu(t[r],t))})),t}));function Il(t){var r=t==null?0:t.length,i=Ho();return t=r?_i(t,(function(t){if(typeof t[1]!="function")throw new sr(o);return[i(t[0]),t[1]]})):[],ms((function(i){for(var n=-1;++n<r;){var e=t[n];if(pi(e[0],this,i))return pi(e[1],this,i)}}))}function Ol(t){return be(ye(t,c))}function Sl(t){return function(){return t}}function Nl(t,r){return t==null||t!==t?r:t}var Cl=bo(),jl=bo(!0);function xl(t){return t}function Pl(t){return rs(typeof t=="function"?t:ye(t,c))}function Rl(t){return os(ye(t,c))}function Tl(t,r){return as(t,ye(r,c))}var Dl=ms((function(t,r){return function(i){return Ke(i,t,r)}})),Ul=ms((function(t,r){return function(i){return Ke(t,i,r)}}));function Bl(t,r,i){var n=Mc(r),e=Re(r,n);i==null&&!(If(r)&&(e.length||!n.length))&&(i=r,r=t,t=this,e=Re(r,Mc(r)));var s=!(If(i)&&"chain"in i)||!!i.chain,o=Ef(t);return bi(e,(function(i){var n=r[i];t[i]=n,o&&(t.prototype[i]=function(){var r=this.__chain__;if(s||r){var i=t(this.__wrapped__),e=i.__actions__=no(this.__actions__);return e.push({func:n,args:arguments,thisArg:t}),i.__chain__=r,i}return n.apply(t,Ii([this.value()],arguments))})})),t}function kl(){return ei._===this&&(ei._=pr),this}function $l(){}function Fl(t){return t=Jf(t),ms((function(r){return fs(r,t)}))}var ql=Eo(_i),Ll=Eo(mi),Kl=Eo(Ni);function Hl(t){return ha(t)?ki(xa(t)):vs(t)}function Gl(t){return function(r){return t==null?i:Te(t,r)}}var Ql=Io(),Vl=Io(!0);function zl(){return[]}function Jl(){return!1}function Yl(){return{}}function Wl(){return""}function Xl(){return!0}function Zl(t,r){if(t=Jf(t),t<1||t>T)return[];var i=B,n=Kr(t,B);r=Ho(r),t-=B;for(var e=Ki(n,r);++i<t;)r(i);return e}function td(t){return uf(t)?_i(t,xa):Ff(t)?[t]:no(ja(tc(t)))}function rd(t){var r=++lr;return tc(t)+r}var id=Ao((function(t,r){return t+r}),0),nd=No("ceil"),ed=Ao((function(t,r){return t/r}),1),sd=No("floor");function od(t){return t&&t.length?Ie(t,xl,Be):i}function ad(t,r){return t&&t.length?Ie(t,Ho(r,2),Be):i}function hd(t){return Bi(t,xl)}function ud(t,r){return Bi(t,Ho(r,2))}function fd(t){return t&&t.length?Ie(t,xl,es):i}function cd(t,r){return t&&t.length?Ie(t,Ho(r,2),es):i}var ld=Ao((function(t,r){return t*r}),1),dd=No("round"),vd=Ao((function(t,r){return t-r}),0);function wd(t){return t&&t.length?Li(t,xl):0}function pd(t,r){return t&&t.length?Li(t,Ho(r,2)):0}return Mn.after=Cu,Mn.ary=ju,Mn.assign=rc,Mn.assignIn=ic,Mn.assignInWith=nc,Mn.assignWith=ec,Mn.at=sc,Mn.before=xu,Mn.bind=Pu,Mn.bindAll=_l,Mn.bindKey=Ru,Mn.castArray=Xu,Mn.chain=Gh,Mn.chunk=Da,Mn.compact=Ua,Mn.concat=Ba,Mn.cond=Il,Mn.conforms=Ol,Mn.constant=Sl,Mn.countBy=iu,Mn.create=oc,Mn.curry=Tu,Mn.curryRight=Du,Mn.debounce=Uu,Mn.defaults=ac,Mn.defaultsDeep=hc,Mn.defer=Bu,Mn.delay=ku,Mn.difference=ka,Mn.differenceBy=$a,Mn.differenceWith=Fa,Mn.drop=qa,Mn.dropRight=La,Mn.dropRightWhile=Ka,Mn.dropWhile=Ha,Mn.fill=Ga,Mn.filter=eu,Mn.flatMap=au,Mn.flatMapDeep=hu,Mn.flatMapDepth=uu,Mn.flatten=za,Mn.flattenDeep=Ja,Mn.flattenDepth=Ya,Mn.flip=$u,Mn.flow=Cl,Mn.flowRight=jl,Mn.fromPairs=Wa,Mn.functions=wc,Mn.functionsIn=pc,Mn.groupBy=lu,Mn.initial=th,Mn.intersection=rh,Mn.intersectionBy=ih,Mn.intersectionWith=nh,Mn.invert=mc,Mn.invertBy=Ac,Mn.invokeMap=vu,Mn.iteratee=Pl,Mn.keyBy=wu,Mn.keys=Mc,Mn.keysIn=_c,Mn.map=pu,Mn.mapKeys=Ic,Mn.mapValues=Oc,Mn.matches=Rl,Mn.matchesProperty=Tl,Mn.memoize=Fu,Mn.merge=Sc,Mn.mergeWith=Nc,Mn.method=Dl,Mn.methodOf=Ul,Mn.mixin=Bl,Mn.negate=qu,Mn.nthArg=Fl,Mn.omit=Cc,Mn.omitBy=jc,Mn.once=Lu,Mn.orderBy=yu,Mn.over=ql,Mn.overArgs=Ku,Mn.overEvery=Ll,Mn.overSome=Kl,Mn.partial=Hu,Mn.partialRight=Gu,Mn.partition=bu,Mn.pick=xc,Mn.pickBy=Pc,Mn.property=Hl,Mn.propertyOf=Gl,Mn.pull=hh,Mn.pullAll=uh,Mn.pullAllBy=fh,Mn.pullAllWith=ch,Mn.pullAt=lh,Mn.range=Ql,Mn.rangeRight=Vl,Mn.rearg=Qu,Mn.reject=Au,Mn.remove=dh,Mn.rest=Vu,Mn.reverse=vh,Mn.sampleSize=Mu,Mn.set=Tc,Mn.setWith=Dc,Mn.shuffle=_u,Mn.slice=wh,Mn.sortBy=Su,Mn.sortedUniq=Eh,Mn.sortedUniqBy=Mh,Mn.split=ul,Mn.spread=zu,Mn.tail=_h,Mn.take=Ih,Mn.takeRight=Oh,Mn.takeRightWhile=Sh,Mn.takeWhile=Nh,Mn.tap=Qh,Mn.throttle=Ju,Mn.thru=Vh,Mn.toArray=Vf,Mn.toPairs=Uc,Mn.toPairsIn=Bc,Mn.toPath=td,Mn.toPlainObject=Xf,Mn.transform=kc,Mn.unary=Yu,Mn.union=Ch,Mn.unionBy=jh,Mn.unionWith=xh,Mn.uniq=Ph,Mn.uniqBy=Rh,Mn.uniqWith=Th,Mn.unset=$c,Mn.unzip=Dh,Mn.unzipWith=Uh,Mn.update=Fc,Mn.updateWith=qc,Mn.values=Lc,Mn.valuesIn=Kc,Mn.without=Bh,Mn.words=El,Mn.wrap=Wu,Mn.xor=kh,Mn.xorBy=$h,Mn.xorWith=Fh,Mn.zip=qh,Mn.zipObject=Lh,Mn.zipObjectDeep=Kh,Mn.zipWith=Hh,Mn.entries=Uc,Mn.entriesIn=Bc,Mn.extend=ic,Mn.extendWith=nc,Bl(Mn,Mn),Mn.add=id,Mn.attempt=Ml,Mn.camelCase=Vc,Mn.capitalize=zc,Mn.ceil=nd,Mn.clamp=Hc,Mn.clone=Zu,Mn.cloneDeep=rf,Mn.cloneDeepWith=nf,Mn.cloneWith=tf,Mn.conformsTo=ef,Mn.deburr=Jc,Mn.defaultTo=Nl,Mn.divide=ed,Mn.endsWith=Yc,Mn.eq=sf,Mn.escape=Wc,Mn.escapeRegExp=Xc,Mn.every=nu,Mn.find=su,Mn.findIndex=Qa,Mn.findKey=uc,Mn.findLast=ou,Mn.findLastIndex=Va,Mn.findLastKey=fc,Mn.floor=sd,Mn.forEach=fu,Mn.forEachRight=cu,Mn.forIn=cc,Mn.forInRight=lc,Mn.forOwn=dc,Mn.forOwnRight=vc,Mn.get=yc,Mn.gt=of,Mn.gte=af,Mn.has=bc,Mn.hasIn=gc,Mn.head=Xa,Mn.identity=xl,Mn.includes=du,Mn.indexOf=Za,Mn.inRange=Gc,Mn.invoke=Ec,Mn.isArguments=hf,Mn.isArray=uf,Mn.isArrayBuffer=ff,Mn.isArrayLike=cf,Mn.isArrayLikeObject=lf,Mn.isBoolean=df,Mn.isBuffer=vf,Mn.isDate=wf,Mn.isElement=pf,Mn.isEmpty=yf,Mn.isEqual=bf,Mn.isEqualWith=gf,Mn.isError=mf,Mn.isFinite=Af,Mn.isFunction=Ef,Mn.isInteger=Mf,Mn.isLength=_f,Mn.isMap=Sf,Mn.isMatch=Nf,Mn.isMatchWith=Cf,Mn.isNaN=jf,Mn.isNative=xf,Mn.isNil=Rf,Mn.isNull=Pf,Mn.isNumber=Tf,Mn.isObject=If,Mn.isObjectLike=Of,Mn.isPlainObject=Df,Mn.isRegExp=Uf,Mn.isSafeInteger=Bf,Mn.isSet=kf,Mn.isString=$f,Mn.isSymbol=Ff,Mn.isTypedArray=qf,Mn.isUndefined=Lf,Mn.isWeakMap=Kf,Mn.isWeakSet=Hf,Mn.join=eh,Mn.kebabCase=Zc,Mn.last=sh,Mn.lastIndexOf=oh,Mn.lowerCase=tl,Mn.lowerFirst=rl,Mn.lt=Gf,Mn.lte=Qf,Mn.max=od,Mn.maxBy=ad,Mn.mean=hd,Mn.meanBy=ud,Mn.min=fd,Mn.minBy=cd,Mn.stubArray=zl,Mn.stubFalse=Jl,Mn.stubObject=Yl,Mn.stubString=Wl,Mn.stubTrue=Xl,Mn.multiply=ld,Mn.nth=ah,Mn.noConflict=kl,Mn.noop=$l,Mn.now=Nu,Mn.pad=il,Mn.padEnd=nl,Mn.padStart=el,Mn.parseInt=sl,Mn.random=Qc,Mn.reduce=gu,Mn.reduceRight=mu,Mn.repeat=ol,Mn.replace=al,Mn.result=Rc,Mn.round=dd,Mn.runInContext=t,Mn.sample=Eu,Mn.size=Iu,Mn.snakeCase=hl,Mn.some=Ou,Mn.sortedIndex=ph,Mn.sortedIndexBy=yh,Mn.sortedIndexOf=bh,Mn.sortedLastIndex=gh,Mn.sortedLastIndexBy=mh,Mn.sortedLastIndexOf=Ah,Mn.startCase=fl,Mn.startsWith=cl,Mn.subtract=vd,Mn.sum=wd,Mn.sumBy=pd,Mn.template=ll,Mn.times=Zl,Mn.toFinite=zf,Mn.toInteger=Jf,Mn.toLength=Yf,Mn.toLower=dl,Mn.toNumber=Wf,Mn.toSafeInteger=Zf,Mn.toString=tc,Mn.toUpper=vl,Mn.trim=wl,Mn.trimEnd=pl,Mn.trimStart=yl,Mn.truncate=bl,Mn.unescape=gl,Mn.uniqueId=rd,Mn.upperCase=ml,Mn.upperFirst=Al,Mn.each=fu,Mn.eachRight=cu,Mn.first=Xa,Bl(Mn,function(){var t={};return xe(Mn,(function(r,i){cr.call(Mn.prototype,i)||(t[i]=r)})),t}(),{chain:!1}),Mn.VERSION=n,bi(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){Mn[t].placeholder=Mn})),bi(["drop","take"],(function(t,r){Sn.prototype[t]=function(n){n=n===i?1:Lr(Jf(n),0);var e=this.__filtered__&&!r?new Sn(this):this.clone();return e.__filtered__?e.__takeCount__=Kr(n,e.__takeCount__):e.__views__.push({size:Kr(n,B),type:t+(e.__dir__<0?"Right":"")}),e},Sn.prototype[t+"Right"]=function(r){return this.reverse()[t](r).reverse()}})),bi(["filter","map","takeWhile"],(function(t,r){var i=r+1,n=i==j||i==P;Sn.prototype[t]=function(t){var r=this.clone();return r.__iteratees__.push({iteratee:Ho(t,3),type:i}),r.__filtered__=r.__filtered__||n,r}})),bi(["head","last"],(function(t,r){var i="take"+(r?"Right":"");Sn.prototype[t]=function(){return this[i](1).value()[0]}})),bi(["initial","tail"],(function(t,r){var i="drop"+(r?"":"Right");Sn.prototype[t]=function(){return this.__filtered__?new Sn(this):this[i](1)}})),Sn.prototype.compact=function(){return this.filter(xl)},Sn.prototype.find=function(t){return this.filter(t).head()},Sn.prototype.findLast=function(t){return this.reverse().find(t)},Sn.prototype.invokeMap=ms((function(t,r){return typeof t=="function"?new Sn(this):this.map((function(i){return Ke(i,t,r)}))})),Sn.prototype.reject=function(t){return this.filter(qu(Ho(t)))},Sn.prototype.slice=function(t,r){t=Jf(t);var n=this;return n.__filtered__&&(t>0||r<0)?new Sn(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),r!==i&&(r=Jf(r),n=r<0?n.dropRight(-r):n.take(r-t)),n)},Sn.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Sn.prototype.toArray=function(){return this.take(B)},xe(Sn.prototype,(function(t,r){var n=/^(?:filter|find|map|reject)|While$/.test(r),e=/^(?:head|last)$/.test(r),s=Mn[e?"take"+(r=="last"?"Right":""):r],o=e||/^find/.test(r);s&&(Mn.prototype[r]=function(){var r=this.__wrapped__,a=e?[1]:arguments,h=r instanceof Sn,u=a[0],f=h||uf(r),c=function(t){var r=s.apply(Mn,Ii([t],a));return e&&l?r[0]:r};f&&n&&typeof u=="function"&&u.length!=1&&(h=f=!1);var l=this.__chain__,d=!!this.__actions__.length,v=o&&!l,w=h&&!d;if(!o&&f){r=w?r:new Sn(this);var p=t.apply(r,a);return p.__actions__.push({func:Vh,args:[c],thisArg:i}),new On(p,l)}return v&&w?t.apply(this,a):(p=this.thru(c),v?e?p.value()[0]:p.value():p)})})),bi(["pop","push","shift","sort","splice","unshift"],(function(t){var r=or[t],i=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",n=/^(?:pop|shift)$/.test(t);Mn.prototype[t]=function(){var t=arguments;if(n&&!this.__chain__){var e=this.value();return r.apply(uf(e)?e:[],t)}return this[i]((function(i){return r.apply(uf(i)?i:[],t)}))}})),xe(Sn.prototype,(function(t,r){var i=Mn[r];if(i){var n=i.name+"";cr.call(ui,n)||(ui[n]=[]),ui[n].push({name:r,func:i})}})),ui[go(i,y).name]=[{name:"wrapper",func:i}],Sn.prototype.clone=Nn,Sn.prototype.reverse=Cn,Sn.prototype.value=jn,Mn.prototype.at=zh,Mn.prototype.chain=Jh,Mn.prototype.commit=Yh,Mn.prototype.next=Wh,Mn.prototype.plant=Zh,Mn.prototype.reverse=tu,Mn.prototype.toJSON=Mn.prototype.valueOf=Mn.prototype.value=ru,Mn.prototype.first=Mn.prototype.head,Sr&&(Mn.prototype[Sr]=Xh),Mn},An=mn();oi?((oi.exports=An)._=An,si._=An):ei._=An}).call(EE)})(ME,ME.exports);var _E=Object.defineProperty,IE=Object.defineProperties,OE=Object.getOwnPropertyDescriptors,SE=Object.getOwnPropertySymbols,NE=Object.prototype.hasOwnProperty,CE=Object.prototype.propertyIsEnumerable,jE=(t,r,i)=>r in t?_E(t,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[r]=i,xE=(t,r)=>{for(var i in r||(r={}))NE.call(r,i)&&jE(t,i,r[i]);if(SE)for(var i of SE(r))CE.call(r,i)&&jE(t,i,r[i]);return t},PE=(t,r)=>IE(t,OE(r));function RE(t,r,i){var n;const e=He(t);return((n=r.rpcMap)==null?void 0:n[e.reference])||`${mE}?chainId=${e.namespace}:${e.reference}&projectId=${i}`}function TE(t){return t.includes(":")?t.split(":")[1]:t}function DE(t){return t.map((t=>`${t.split(":")[0]}:${t.split(":")[1]}`))}function UE(t,r){const i=Object.keys(r.namespaces).filter((r=>r.includes(t)));if(!i.length)return[];const n=[];return i.forEach((t=>{const i=r.namespaces[t].accounts;n.push(...i)})),n}function BE(t={},r={}){const i=kE(t),n=kE(r);return ME.exports.merge(i,n)}function kE(t){var r,i,n,e;const s={};if(!Fl(t))return s;for(const[o,a]of Object.entries(t)){const t=xl(o)?[o]:a.chains,h=a.methods||[],u=a.events||[],f=a.rpcMap||{},c=Pl(o);s[c]=PE(xE(xE({},s[c]),a),{chains:Is(t,(r=s[c])==null?void 0:r.chains),methods:Is(h,(i=s[c])==null?void 0:i.methods),events:Is(u,(n=s[c])==null?void 0:n.events),rpcMap:xE(xE({},f),(e=s[c])==null?void 0:e.rpcMap)})}return s}function $E(t){return t.includes(":")?t.split(":")[2]:t}function FE(t){const r={};for(const[i,n]of Object.entries(t)){const t=n.methods||[],e=n.events||[],s=n.accounts||[],o=xl(i)?[i]:n.chains?n.chains:DE(n.accounts);r[i]={chains:o,methods:t,events:e,accounts:s}}return r}function qE(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}const LE={},KE=t=>LE[t],HE=(t,r)=>{LE[t]=r};class GE{constructor(t){this.name="polkadot",this.namespace=t.namespace,this.events=KE("events"),this.client=KE("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){this.httpProviders[t]||this.setHttpProvider(t,r),this.chainId=t,this.events.emit(AE.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}getAccounts(){const t=this.namespace.accounts;return t?t.filter((t=>t.split(":")[1]===this.chainId.toString())).map((t=>t.split(":")[2]))||[]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach((r=>{var i;const n=TE(r);t[n]=this.createHttpProvider(n,(i=this.namespace.rpcMap)==null?void 0:i[r])})),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){const i=this.createHttpProvider(t,r);i&&(this.httpProviders[t]=i)}createHttpProvider(t,r){const i=r||RE(t,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${t}`);return new Sy(new vE(i,KE("disableProviderPing")))}}var QE=Object.defineProperty,VE=Object.defineProperties,zE=Object.getOwnPropertyDescriptors,JE=Object.getOwnPropertySymbols,YE=Object.prototype.hasOwnProperty,WE=Object.prototype.propertyIsEnumerable,XE=(t,r,i)=>r in t?QE(t,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[r]=i,ZE=(t,r)=>{for(var i in r||(r={}))YE.call(r,i)&&XE(t,i,r[i]);if(JE)for(var i of JE(r))WE.call(r,i)&&XE(t,i,r[i]);return t},tM=(t,r)=>VE(t,zE(r));class rM{constructor(t){this.name="eip155",this.namespace=t.namespace,this.events=KE("events"),this.client=KE("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(t){switch(t.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(t);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(t)}return this.namespace.methods.includes(t.request.method)?await this.client.request(t):this.getHttpProvider().request(t.request)}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}setDefaultChain(t,r){this.httpProviders[t]||this.setHttpProvider(parseInt(t),r),this.chainId=parseInt(t),this.events.emit(AE.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}createHttpProvider(t,r){const i=r||RE(`${this.name}:${t}`,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${t}`);return new Sy(new vE(i,KE("disableProviderPing")))}setHttpProvider(t,r){const i=this.createHttpProvider(t,r);i&&(this.httpProviders[t]=i)}createHttpProviders(){const t={};return this.namespace.chains.forEach((r=>{var i;const n=parseInt(TE(r));t[n]=this.createHttpProvider(n,(i=this.namespace.rpcMap)==null?void 0:i[r])})),t}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter((t=>t.split(":")[1]===this.chainId.toString())).map((t=>t.split(":")[2])))]:[]}getHttpProvider(){const t=this.chainId,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}async handleSwitchChain(t){var r,i;let n=t.request.params?(r=t.request.params[0])==null?void 0:r.chainId:"0x0";n=n.startsWith("0x")?n:`0x${n}`;const e=parseInt(n,16);if(this.isChainApproved(e))this.setDefaultChain(`${e}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:t.topic,request:{method:t.request.method,params:[{chainId:n}]},chainId:(i=this.namespace.chains)==null?void 0:i[0]}),this.setDefaultChain(`${e}`);else throw new Error(`Failed to switch to chain 'eip155:${e}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(t){return this.namespace.chains.includes(`${this.name}:${t}`)}async getCapabilities(t){var r,i,n;const e=(i=(r=t.request)==null?void 0:r.params)==null?void 0:i[0];if(!e)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const s=this.client.session.get(t.topic),o=((n=s?.sessionProperties)==null?void 0:n.capabilities)||{};if(o!=null&&o[e])return o?.[e];const a=await this.client.request(t);try{await this.client.session.update(t.topic,{sessionProperties:tM(ZE({},s.sessionProperties||{}),{capabilities:tM(ZE({},o||{}),{[e]:a})})})}catch(t){console.warn("Failed to update session with capabilities",t)}return a}}class iM{constructor(t){this.name="solana",this.namespace=t.namespace,this.events=KE("events"),this.client=KE("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){this.httpProviders[t]||this.setHttpProvider(t,r),this.chainId=t,this.events.emit(AE.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter((t=>t.split(":")[1]===this.chainId.toString())).map((t=>t.split(":")[2])))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach((r=>{var i;const n=TE(r);t[n]=this.createHttpProvider(n,(i=this.namespace.rpcMap)==null?void 0:i[r])})),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){const i=this.createHttpProvider(t,r);i&&(this.httpProviders[t]=i)}createHttpProvider(t,r){const i=r||RE(t,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${t}`);return new Sy(new vE(i,KE("disableProviderPing")))}}class nM{constructor(t){this.name="cosmos",this.namespace=t.namespace,this.events=KE("events"),this.client=KE("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){this.httpProviders[t]||this.setHttpProvider(t,r),this.chainId=t,this.events.emit(AE.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter((t=>t.split(":")[1]===this.chainId.toString())).map((t=>t.split(":")[2])))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach((r=>{var i;const n=TE(r);t[n]=this.createHttpProvider(n,(i=this.namespace.rpcMap)==null?void 0:i[r])})),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){const i=this.createHttpProvider(t,r);i&&(this.httpProviders[t]=i)}createHttpProvider(t,r){const i=r||RE(t,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${t}`);return new Sy(new vE(i,KE("disableProviderPing")))}}class eM{constructor(t){this.name="cip34",this.namespace=t.namespace,this.events=KE("events"),this.client=KE("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){this.httpProviders[t]||this.setHttpProvider(t,r),this.chainId=t,this.events.emit(AE.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter((t=>t.split(":")[1]===this.chainId.toString())).map((t=>t.split(":")[2])))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach((r=>{const i=this.getCardanoRPCUrl(r),n=TE(r);t[n]=this.createHttpProvider(n,i)})),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}getCardanoRPCUrl(t){const r=this.namespace.rpcMap;if(r)return r[t]}setHttpProvider(t,r){const i=this.createHttpProvider(t,r);i&&(this.httpProviders[t]=i)}createHttpProvider(t,r){const i=r||this.getCardanoRPCUrl(t);if(!i)throw new Error(`No RPC url provided for chainId: ${t}`);return new Sy(new vE(i,KE("disableProviderPing")))}}class sM{constructor(t){this.name="elrond",this.namespace=t.namespace,this.events=KE("events"),this.client=KE("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){this.httpProviders[t]||this.setHttpProvider(t,r),this.chainId=t,this.events.emit(AE.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter((t=>t.split(":")[1]===this.chainId.toString())).map((t=>t.split(":")[2])))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach((r=>{var i;const n=TE(r);t[n]=this.createHttpProvider(n,(i=this.namespace.rpcMap)==null?void 0:i[r])})),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){const i=this.createHttpProvider(t,r);i&&(this.httpProviders[t]=i)}createHttpProvider(t,r){const i=r||RE(t,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${t}`);return new Sy(new vE(i,KE("disableProviderPing")))}}class oM{constructor(t){this.name="multiversx",this.namespace=t.namespace,this.events=KE("events"),this.client=KE("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){this.httpProviders[t]||this.setHttpProvider(t,r),this.chainId=t,this.events.emit(AE.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter((t=>t.split(":")[1]===this.chainId.toString())).map((t=>t.split(":")[2])))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach((r=>{var i;const n=TE(r);t[n]=this.createHttpProvider(n,(i=this.namespace.rpcMap)==null?void 0:i[r])})),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){const i=this.createHttpProvider(t,r);i&&(this.httpProviders[t]=i)}createHttpProvider(t,r){const i=r||RE(t,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${t}`);return new Sy(new vE(i,KE("disableProviderPing")))}}class aM{constructor(t){this.name="near",this.namespace=t.namespace,this.events=KE("events"),this.client=KE("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){if(this.chainId=t,!this.httpProviders[t]){const i=r||RE(`${this.name}:${t}`,this.namespace);if(!i)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,i)}this.events.emit(AE.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const t=this.namespace.accounts;return t?t.filter((t=>t.split(":")[1]===this.chainId.toString())).map((t=>t.split(":")[2]))||[]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach((r=>{var i;t[r]=this.createHttpProvider(r,(i=this.namespace.rpcMap)==null?void 0:i[r])})),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){const i=this.createHttpProvider(t,r);i&&(this.httpProviders[t]=i)}createHttpProvider(t,r){const i=r||RE(t,this.namespace);return typeof i>"u"?void 0:new Sy(new vE(i,KE("disableProviderPing")))}}var hM=Object.defineProperty,uM=Object.defineProperties,fM=Object.getOwnPropertyDescriptors,cM=Object.getOwnPropertySymbols,lM=Object.prototype.hasOwnProperty,dM=Object.prototype.propertyIsEnumerable,vM=(t,r,i)=>r in t?hM(t,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[r]=i,wM=(t,r)=>{for(var i in r||(r={}))lM.call(r,i)&&vM(t,i,r[i]);if(cM)for(var i of cM(r))dM.call(r,i)&&vM(t,i,r[i]);return t},pM=(t,r)=>uM(t,fM(r));class yM{constructor(t){this.events=new r,this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=t,this.logger=typeof t?.logger<"u"&&typeof t?.logger!="string"?t.logger:kv(Mw({level:t?.logger||wE})),this.disableProviderPing=t?.disableProviderPing||!1}static async init(t){const r=new yM(t);return await r.initialize(),r}async request(t,r,i){const[n,e]=this.validateChain(r);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(n).request({request:wM({},t),chainId:`${n}:${e}`,topic:this.session.topic,expiry:i})}sendAsync(t,r,i,n){const e=(new Date).getTime();this.request(t,i,n).then((t=>r(null,uy(e,t)))).catch((t=>r(t,void 0)))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var t;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(t=this.session)==null?void 0:t.topic,reason:kl("USER_DISCONNECTED")}),await this.cleanup()}async connect(t){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(t),await this.cleanupPendingPairings(),!t.skipPairing)return await this.pair(t.pairingTopic)}async authenticate(t){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(t),await this.cleanupPendingPairings();const{uri:r,response:i}=await this.client.authenticate(t);r&&(this.uri=r,this.events.emit("display_uri",r));const n=await i();if(this.session=n.session,this.session){const t=FE(this.session.namespaces);this.namespaces=BE(this.namespaces,t),this.persist("namespaces",this.namespaces),this.onConnect()}return n}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}removeListener(t,r){this.events.removeListener(t,r)}off(t,r){this.events.off(t,r)}get isWalletConnect(){return!0}async pair(t){this.shouldAbortPairingAttempt=!1;let r=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(r>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:i,approval:n}=await this.client.connect({pairingTopic:t,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});i&&(this.uri=i,this.events.emit("display_uri",i)),await n().then((t=>{this.session=t;const r=FE(t.namespaces);this.namespaces=BE(this.namespaces,r),this.persist("namespaces",this.namespaces)})).catch((t=>{if(t.message!==gA)throw t;r++}))}while(!this.session);return this.onConnect(),this.session}setDefaultChain(t,r){try{if(!this.session)return;const[i,n]=this.validateChain(t);this.getProvider(i).setDefaultChain(n,r)}catch(t){if(!/Please call connect/.test(t.message))throw t}}async cleanupPendingPairings(t={}){this.logger.info("Cleaning up inactive pairings...");const r=this.client.pairing.getAll();if($l(r)){for(const i of r)t.deletePairings?this.client.core.expirer.set(i.topic,0):await this.client.core.relayer.subscriber.unsubscribe(i.topic);this.logger.info(`Inactive pairings cleared: ${r.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces"),this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const t=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[t]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await XA.init({logger:this.providerOpts.logger||wE,relayUrl:this.providerOpts.relayUrl||pE,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const t=[...new Set(Object.keys(this.session.namespaces).map((t=>Pl(t))))];HE("client",this.client),HE("events",this.events),HE("disableProviderPing",this.disableProviderPing),t.forEach((t=>{if(!this.session)return;const r=UE(t,this.session),i=DE(r),n=BE(this.namespaces,this.optionalNamespaces),e=pM(wM({},n[t]),{accounts:r,chains:i});switch(t){case"eip155":this.rpcProviders[t]=new rM({namespace:e});break;case"solana":this.rpcProviders[t]=new iM({namespace:e});break;case"cosmos":this.rpcProviders[t]=new nM({namespace:e});break;case"polkadot":this.rpcProviders[t]=new GE({namespace:e});break;case"cip34":this.rpcProviders[t]=new eM({namespace:e});break;case"elrond":this.rpcProviders[t]=new sM({namespace:e});break;case"multiversx":this.rpcProviders[t]=new oM({namespace:e});break;case"near":this.rpcProviders[t]=new aM({namespace:e});break}}))}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",(t=>{this.events.emit("session_ping",t)})),this.client.on("session_event",(t=>{const{params:r}=t,{event:i}=r;if(i.name==="accountsChanged"){const t=i.data;t&&$l(t)&&this.events.emit("accountsChanged",t.map($E))}else if(i.name==="chainChanged"){const t=r.chainId,i=r.event.data,n=Pl(t),e=qE(t)!==qE(i)?`${n}:${qE(i)}`:t;this.onChainChanged(e)}else this.events.emit(i.name,i.data);this.events.emit("session_event",t)})),this.client.on("session_update",(({topic:t,params:r})=>{var i;const{namespaces:n}=r,e=(i=this.client)==null?void 0:i.session.get(t);this.session=pM(wM({},e),{namespaces:n}),this.onSessionUpdate(),this.events.emit("session_update",{topic:t,params:r})})),this.client.on("session_delete",(async t=>{await this.cleanup(),this.events.emit("session_delete",t),this.events.emit("disconnect",pM(wM({},kl("USER_DISCONNECTED")),{data:t.topic}))})),this.on(AE.DEFAULT_CHAIN_CHANGED,(t=>{this.onChainChanged(t,!0)}))}getProvider(t){if(!this.rpcProviders[t])throw new Error(`Provider not found: ${t}`);return this.rpcProviders[t]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach((t=>{var r;this.getProvider(t).updateNamespace((r=this.session)==null?void 0:r.namespaces[t])}))}setNamespaces(t){const{namespaces:r,optionalNamespaces:i,sessionProperties:n}=t;r&&Object.keys(r).length&&(this.namespaces=r),i&&Object.keys(i).length&&(this.optionalNamespaces=i),this.sessionProperties=n,this.persist("namespaces",r),this.persist("optionalNamespaces",i)}validateChain(t){const[r,i]=t?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[r,i];if(r&&!Object.keys(this.namespaces||{}).map((t=>Pl(t))).includes(r))throw new Error(`Namespace '${r}' is not configured. Please call connect() first with namespace config.`);if(r&&i)return[r,i];const n=Pl(Object.keys(this.namespaces)[0]),e=this.rpcProviders[n].getDefaultChain();return[n,e]}async requestAccounts(){const[t]=this.validateChain();return await this.getProvider(t).requestAccounts()}onChainChanged(t,r=!1){if(!this.namespaces)return;const[i,n]=this.validateChain(t);n&&(r||this.getProvider(i).setDefaultChain(n),this.namespaces[i]?this.namespaces[i].defaultChain=n:this.namespaces[`${i}:${n}`]?this.namespaces[`${i}:${n}`].defaultChain=n:this.namespaces[`${i}:${n}`]={defaultChain:n},this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",n))}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,this.persist("namespaces",void 0),this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),await this.cleanupPendingPairings({deletePairings:!0})}persist(t,r){this.client.core.storage.setItem(`${gE}/${t}`,r)}async getFromStore(t){return await this.client.core.storage.getItem(`${gE}/${t}`)}}const bM=yM;const gM="wc",mM="ethereum_provider",AM=`${gM}@2:${mM}:`,EM="https://rpc.walletconnect.com/v1/",MM=["eth_sendTransaction","personal_sign"],_M=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_sendCalls","wallet_getCapabilities","wallet_getCallsStatus","wallet_showCallsStatus"],IM=["chainChanged","accountsChanged"],OM=["chainChanged","accountsChanged","message","disconnect","connect"];var SM=Object.defineProperty,NM=Object.defineProperties,CM=Object.getOwnPropertyDescriptors,jM=Object.getOwnPropertySymbols,xM=Object.prototype.hasOwnProperty,PM=Object.prototype.propertyIsEnumerable,RM=(t,r,i)=>r in t?SM(t,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[r]=i,TM=(t,r)=>{for(var i in r||(r={}))xM.call(r,i)&&RM(t,i,r[i]);if(jM)for(var i of jM(r))PM.call(r,i)&&RM(t,i,r[i]);return t},DM=(t,r)=>NM(t,CM(r));function UM(t){return Number(t[0].split(":")[1])}function BM(t){return`0x${t.toString(16)}`}function kM(t){const{chains:r,optionalChains:i,methods:n,optionalMethods:e,events:s,optionalEvents:o,rpcMap:a}=t;if(!$l(r))throw new Error("Invalid chains");const h={chains:r,methods:n||MM,events:s||IM,rpcMap:TM({},r.length?{[UM(r)]:a[UM(r)]}:{})},u=s?.filter((t=>!IM.includes(t))),f=n?.filter((t=>!MM.includes(t)));if(!i&&!o&&!e&&!(u!=null&&u.length)&&!(f!=null&&f.length))return{required:r.length?h:void 0};const c=u?.length&&f?.length||!i,l={chains:[...new Set(c?h.chains.concat(i||[]):i)],methods:[...new Set(h.methods.concat(e!=null&&e.length?e:_M))],events:[...new Set(h.events.concat(o!=null&&o.length?o:OM))],rpcMap:a};return{required:r.length?h:void 0,optional:i.length?l:void 0}}class $M{constructor(){this.events=new t.exports.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY=AM,this.on=(t,r)=>(this.events.on(t,r),this),this.once=(t,r)=>(this.events.once(t,r),this),this.removeListener=(t,r)=>(this.events.removeListener(t,r),this),this.off=(t,r)=>(this.events.off(t,r),this),this.parseAccount=t=>this.isCompatibleChainId(t)?this.parseAccountId(t).address:t,this.signer={},this.rpc={}}static async init(t){const r=new $M;return await r.initialize(t),r}async request(t,r){return await this.signer.request(t,this.formatChainId(this.chainId),r)}sendAsync(t,r,i){this.signer.sendAsync(t,r,this.formatChainId(this.chainId),i)}get connected(){return this.signer.client?this.signer.client.core.relayer.connected:!1}get connecting(){return this.signer.client?this.signer.client.core.relayer.connecting:!1}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(t){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(t);const{required:r,optional:i}=kM(this.rpc);try{const n=await new Promise((async(n,e)=>{var s;this.rpc.showQrModal&&((s=this.modal)==null||s.subscribeModal((t=>{!t.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),e(new Error("Connection request reset. Please try again.")))}))),await this.signer.connect(DM(TM({namespaces:TM({},r&&{[this.namespace]:r})},i&&{optionalNamespaces:{[this.namespace]:i}}),{pairingTopic:t?.pairingTopic})).then((t=>{n(t)})).catch((t=>{e(new Error(t.message))}))}));if(!n)return;const e=Ge(n.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:e),this.setAccounts(e),this.events.emit("connect",{chainId:BM(this.chainId)})}catch(t){throw this.signer.logger.error(t),t}finally{this.modal&&this.modal.closeModal()}}async authenticate(t){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts({chains:t?.chains});try{const r=await new Promise((async(r,i)=>{var n;this.rpc.showQrModal&&((n=this.modal)==null||n.subscribeModal((t=>{!t.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),i(new Error("Connection request reset. Please try again.")))}))),await this.signer.authenticate(DM(TM({},t),{chains:this.rpc.chains})).then((t=>{r(t)})).catch((t=>{i(new Error(t.message))}))})),i=r.session;if(i){const t=Ge(i.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:t),this.setAccounts(t),this.events.emit("connect",{chainId:BM(this.chainId)})}return r}catch(t){throw this.signer.logger.error(t),t}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",(t=>{const{params:r}=t,{event:i}=r;i.name==="accountsChanged"?(this.accounts=this.parseAccounts(i.data),this.events.emit("accountsChanged",this.accounts)):i.name==="chainChanged"?this.setChainId(this.formatChainId(i.data)):this.events.emit(i.name,i.data),this.events.emit("session_event",t)})),this.signer.on("chainChanged",(t=>{const r=parseInt(t);this.chainId=r,this.events.emit("chainChanged",BM(this.chainId)),this.persist()})),this.signer.on("session_update",(t=>{this.events.emit("session_update",t)})),this.signer.on("session_delete",(t=>{this.reset(),this.events.emit("session_delete",t),this.events.emit("disconnect",DM(TM({},kl("USER_DISCONNECTED")),{data:t.topic,name:"USER_DISCONNECTED"}))})),this.signer.on("display_uri",(t=>{var r,i;this.rpc.showQrModal&&((r=this.modal)==null||r.closeModal(),(i=this.modal)==null||i.openModal({uri:t})),this.events.emit("display_uri",t)}))}switchEthereumChain(t){this.request({method:"wallet_switchEthereumChain",params:[{chainId:t.toString(16)}]})}isCompatibleChainId(t){return typeof t=="string"?t.startsWith(`${this.namespace}:`):!1}formatChainId(t){return`${this.namespace}:${t}`}parseChainId(t){return Number(t.split(":")[1])}setChainIds(t){const r=t.filter((t=>this.isCompatibleChainId(t))).map((t=>this.parseChainId(t)));r.length&&(this.chainId=r[0],this.events.emit("chainChanged",BM(this.chainId)),this.persist())}setChainId(t){if(this.isCompatibleChainId(t)){const r=this.parseChainId(t);this.chainId=r,this.switchEthereumChain(r)}}parseAccountId(t){const[r,i,n]=t.split(":");return{chainId:`${r}:${i}`,address:n}}setAccounts(t){this.accounts=t.filter((t=>this.parseChainId(this.parseAccountId(t).chainId)===this.chainId)).map((t=>this.parseAccountId(t).address)),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(t){var r,i;const n=(r=t?.chains)!=null?r:[],e=(i=t?.optionalChains)!=null?i:[],s=n.concat(e);if(!s.length)throw new Error("No chains specified in either `chains` or `optionalChains`");const o=n.length?t?.methods||MM:[],a=n.length?t?.events||IM:[],h=t?.optionalMethods||[],u=t?.optionalEvents||[],f=t?.rpcMap||this.buildRpcMap(s,t.projectId),c=t?.qrModalOptions||void 0;return{chains:n?.map((t=>this.formatChainId(t))),optionalChains:e.map((t=>this.formatChainId(t))),methods:o,events:a,optionalMethods:h,optionalEvents:u,rpcMap:f,showQrModal:!!(t!=null&&t.showQrModal),qrModalOptions:c,projectId:t.projectId,metadata:t.metadata}}buildRpcMap(t,r){const i={};return t.forEach((t=>{i[t]=this.getRpcUrl(t,r)})),i}async initialize(t){if(this.rpc=this.getRpcConfig(t),this.chainId=this.rpc.chains.length?UM(this.rpc.chains):UM(this.rpc.optionalChains),this.signer=await bM.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:t.disableProviderPing,relayUrl:t.relayUrl,storageOptions:t.storageOptions}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let t;try{const{WalletConnectModal:r}=await import("./p-db50d7dc.js").then((function(t){return t.i}));t=r}catch{throw new Error("To use QR modal, please install @walletconnect/modal package")}if(t)try{this.modal=new t(TM({projectId:this.rpc.projectId},this.rpc.qrModalOptions))}catch(t){throw this.signer.logger.error(t),new Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(t){if(!t)return;const{chains:r,optionalChains:i,rpcMap:n}=t;r&&$l(r)&&(this.rpc.chains=r.map((t=>this.formatChainId(t))),r.forEach((t=>{this.rpc.rpcMap[t]=n?.[t]||this.getRpcUrl(t)}))),i&&$l(i)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=i?.map((t=>this.formatChainId(t))),i.forEach((t=>{this.rpc.rpcMap[t]=n?.[t]||this.getRpcUrl(t)})))}getRpcUrl(t,r){var i;return((i=this.rpc.rpcMap)==null?void 0:i[t])||`${EM}?chainId=eip155:${t}&projectId=${r||this.rpc.projectId}`}async loadPersistedSession(){if(this.session)try{const t=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),r=this.session.namespaces[`${this.namespace}:${t}`]?this.session.namespaces[`${this.namespace}:${t}`]:this.session.namespaces[this.namespace];this.setChainIds(t?[this.formatChainId(t)]:r?.accounts),this.setAccounts(r?.accounts)}catch(t){this.signer.logger.error("Failed to load persisted session, clearing state..."),this.signer.logger.error(t),await this.disconnect().catch((t=>this.signer.logger.warn(t)))}}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(t){return typeof t=="string"||t instanceof String?[this.parseAccount(t)]:t.map((t=>this.parseAccount(t)))}}const FM=Object.keys(y).map((t=>parseInt(t)));const qM=Object.entries(b).reduce(((t,[r,i])=>{t[r]=typeof i.rpc==="string"?i.rpc:i.rpc[0];return t}),{});const LM=async t=>await $M.init({projectId:"2ec7ead81da1226703ad789c0b2f7b30",methods:["eth_sendTransaction","eth_signTransaction","eth_sign","personal_sign","eth_signTypedData","wallet_addEthereumChain"],events:["chainChanged","accountsChanged"],metadata:{name:"Smart Token Viewer",description:"TokenScript Viewer is an easy way to run TokenScripts in your browser if you don't have a TokenScript compatible wallet.",url:`${location.origin}`,icons:[`${location.origin}/assets/icon/icon.png`]},showQrModal:!t,qrModalOptions:{themeVariables:{"--wcm-z-index":"200"}},optionalChains:FM,rpcMap:qM});const KM=Object.freeze({__proto__:null,WC_V2_DEFAULT_CHAINS:FM,WC_V2_RPC_MAP:qM,getWalletConnectV2ProviderInstance:LM});export{FM as W,KM as a,bi as r};
//# sourceMappingURL=p-4d4dcfe3.js.map