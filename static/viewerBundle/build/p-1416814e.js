import{c as t,a as n,b as r,g as e,d as i,r as s,e as o,f as u}from"./p-4c76b0c7.js";import"./p-cead5386.js";var a=typeof Reflect==="object"?Reflect:null;var c=a&&typeof a.apply==="function"?a.apply:function t(n,r,e){return Function.prototype.apply.call(n,r,e)};var f;if(a&&typeof a.ownKeys==="function"){f=a.ownKeys}else if(Object.getOwnPropertySymbols){f=function t(n){return Object.getOwnPropertyNames(n).concat(Object.getOwnPropertySymbols(n))}}else{f=function t(n){return Object.getOwnPropertyNames(n)}}function h(t){if(console&&console.warn)console.warn(t)}var l=Number.isNaN||function t(n){return n!==n};function d(){d.init.call(this)}var v=d;var p=A;d.EventEmitter=d;d.prototype._events=undefined;d.prototype._eventsCount=0;d.prototype._maxListeners=undefined;var w=10;function y(t){if(typeof t!=="function"){throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}}Object.defineProperty(d,"defaultMaxListeners",{enumerable:true,get:function(){return w},set:function(t){if(typeof t!=="number"||t<0||l(t)){throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".")}w=t}});d.init=function(){if(this._events===undefined||this._events===Object.getPrototypeOf(this)._events){this._events=Object.create(null);this._eventsCount=0}this._maxListeners=this._maxListeners||undefined};d.prototype.setMaxListeners=function t(n){if(typeof n!=="number"||n<0||l(n)){throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+n+".")}this._maxListeners=n;return this};function b(t){if(t._maxListeners===undefined)return d.defaultMaxListeners;return t._maxListeners}d.prototype.getMaxListeners=function t(){return b(this)};d.prototype.emit=function t(n){var r=[];for(var e=1;e<arguments.length;e++)r.push(arguments[e]);var i=n==="error";var s=this._events;if(s!==undefined)i=i&&s.error===undefined;else if(!i)return false;if(i){var o;if(r.length>0)o=r[0];if(o instanceof Error){throw o}var u=new Error("Unhandled error."+(o?" ("+o.message+")":""));u.context=o;throw u}var a=s[n];if(a===undefined)return false;if(typeof a==="function"){c(a,this,r)}else{var f=a.length;var h=S(a,f);for(var e=0;e<f;++e)c(h[e],this,r)}return true};function m(t,n,r,e){var i;var s;var o;y(r);s=t._events;if(s===undefined){s=t._events=Object.create(null);t._eventsCount=0}else{if(s.newListener!==undefined){t.emit("newListener",n,r.listener?r.listener:r);s=t._events}o=s[n]}if(o===undefined){o=s[n]=r;++t._eventsCount}else{if(typeof o==="function"){o=s[n]=e?[r,o]:[o,r]}else if(e){o.unshift(r)}else{o.push(r)}i=b(t);if(i>0&&o.length>i&&!o.warned){o.warned=true;var u=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(n)+" listeners "+"added. Use emitter.setMaxListeners() to "+"increase limit");u.name="MaxListenersExceededWarning";u.emitter=t;u.type=n;u.count=o.length;h(u)}}return t}d.prototype.addListener=function t(n,r){return m(this,n,r,false)};d.prototype.on=d.prototype.addListener;d.prototype.prependListener=function t(n,r){return m(this,n,r,true)};function _(){if(!this.fired){this.target.removeListener(this.type,this.wrapFn);this.fired=true;if(arguments.length===0)return this.listener.call(this.target);return this.listener.apply(this.target,arguments)}}function g(t,n,r){var e={fired:false,wrapFn:undefined,target:t,type:n,listener:r};var i=_.bind(e);i.listener=r;e.wrapFn=i;return i}d.prototype.once=function t(n,r){y(r);this.on(n,g(this,n,r));return this};d.prototype.prependOnceListener=function t(n,r){y(r);this.prependListener(n,g(this,n,r));return this};d.prototype.removeListener=function t(n,r){var e,i,s,o,u;y(r);i=this._events;if(i===undefined)return this;e=i[n];if(e===undefined)return this;if(e===r||e.listener===r){if(--this._eventsCount===0)this._events=Object.create(null);else{delete i[n];if(i.removeListener)this.emit("removeListener",n,e.listener||r)}}else if(typeof e!=="function"){s=-1;for(o=e.length-1;o>=0;o--){if(e[o]===r||e[o].listener===r){u=e[o].listener;s=o;break}}if(s<0)return this;if(s===0)e.shift();else{j(e,s)}if(e.length===1)i[n]=e[0];if(i.removeListener!==undefined)this.emit("removeListener",n,u||r)}return this};d.prototype.off=d.prototype.removeListener;d.prototype.removeAllListeners=function t(n){var r,e,i;e=this._events;if(e===undefined)return this;if(e.removeListener===undefined){if(arguments.length===0){this._events=Object.create(null);this._eventsCount=0}else if(e[n]!==undefined){if(--this._eventsCount===0)this._events=Object.create(null);else delete e[n]}return this}if(arguments.length===0){var s=Object.keys(e);var o;for(i=0;i<s.length;++i){o=s[i];if(o==="removeListener")continue;this.removeAllListeners(o)}this.removeAllListeners("removeListener");this._events=Object.create(null);this._eventsCount=0;return this}r=e[n];if(typeof r==="function"){this.removeListener(n,r)}else if(r!==undefined){for(i=r.length-1;i>=0;i--){this.removeListener(n,r[i])}}return this};function E(t,n,r){var e=t._events;if(e===undefined)return[];var i=e[n];if(i===undefined)return[];if(typeof i==="function")return r?[i.listener||i]:[i];return r?I(i):S(i,i.length)}d.prototype.listeners=function t(n){return E(this,n,true)};d.prototype.rawListeners=function t(n){return E(this,n,false)};d.listenerCount=function(t,n){if(typeof t.listenerCount==="function"){return t.listenerCount(n)}else{return O.call(t,n)}};d.prototype.listenerCount=O;function O(t){var n=this._events;if(n!==undefined){var r=n[t];if(typeof r==="function"){return 1}else if(r!==undefined){return r.length}}return 0}d.prototype.eventNames=function t(){return this._eventsCount>0?f(this._events):[]};function S(t,n){var r=new Array(n);for(var e=0;e<n;++e)r[e]=t[e];return r}function j(t,n){for(;n+1<t.length;n++)t[n]=t[n+1];t.pop()}function I(t){var n=new Array(t.length);for(var r=0;r<n.length;++r){n[r]=t[r].listener||t[r]}return n}function A(t,n){return new Promise((function(r,e){function i(r){t.removeListener(n,s);e(r)}function s(){if(typeof t.removeListener==="function"){t.removeListener("error",i)}r([].slice.call(arguments))}x(t,n,s,{once:true});if(n!=="error"){N(t,i,{once:true})}}))}function N(t,n,r){if(typeof t.on==="function"){x(t,"error",n,r)}}function x(t,n,r,e){if(typeof t.on==="function"){if(e.once){t.once(n,r)}else{t.on(n,r)}}else if(typeof t.addEventListener==="function"){t.addEventListener(n,(function i(s){if(e.once){t.removeEventListener(n,i)}r(s)}))}else{throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}}v.once=p;
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var P=function(t,n){P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)if(n.hasOwnProperty(r))t[r]=n[r]};return P(t,n)};function T(t,n){P(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}var U=function(){U=Object.assign||function t(n){for(var r,e=1,i=arguments.length;e<i;e++){r=arguments[e];for(var s in r)if(Object.prototype.hasOwnProperty.call(r,s))n[s]=r[s]}return n};return U.apply(this,arguments)};function $(t,n){var r={};for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e)&&n.indexOf(e)<0)r[e]=t[e];if(t!=null&&typeof Object.getOwnPropertySymbols==="function")for(var i=0,e=Object.getOwnPropertySymbols(t);i<e.length;i++){if(n.indexOf(e[i])<0&&Object.prototype.propertyIsEnumerable.call(t,e[i]))r[e[i]]=t[e[i]]}return r}function M(t,n,r,e){var i=arguments.length,s=i<3?n:e===null?e=Object.getOwnPropertyDescriptor(n,r):e,o;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")s=Reflect.decorate(t,n,r,e);else for(var u=t.length-1;u>=0;u--)if(o=t[u])s=(i<3?o(s):i>3?o(n,r,s):o(n,r))||s;return i>3&&s&&Object.defineProperty(n,r,s),s}function R(t,n){return function(r,e){n(r,e,t)}}function C(t,n){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(t,n)}function D(t,n,r,e){function i(t){return t instanceof r?t:new r((function(n){n(t)}))}return new(r||(r=Promise))((function(r,s){function o(t){try{a(e.next(t))}catch(t){s(t)}}function u(t){try{a(e["throw"](t))}catch(t){s(t)}}function a(t){t.done?r(t.value):i(t.value).then(o,u)}a((e=e.apply(t,n||[])).next())}))}function k(t,n){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},e,i,s,o;return o={next:u(0),throw:u(1),return:u(2)},typeof Symbol==="function"&&(o[Symbol.iterator]=function(){return this}),o;function u(t){return function(n){return a([t,n])}}function a(o){if(e)throw new TypeError("Generator is already executing.");while(r)try{if(e=1,i&&(s=o[0]&2?i["return"]:o[0]?i["throw"]||((s=i["return"])&&s.call(i),0):i.next)&&!(s=s.call(i,o[1])).done)return s;if(i=0,s)o=[o[0]&2,s.value];switch(o[0]){case 0:case 1:s=o;break;case 4:r.label++;return{value:o[1],done:false};case 5:r.label++;i=o[1];o=[0];continue;case 7:o=r.ops.pop();r.trys.pop();continue;default:if(!(s=r.trys,s=s.length>0&&s[s.length-1])&&(o[0]===6||o[0]===2)){r=0;continue}if(o[0]===3&&(!s||o[1]>s[0]&&o[1]<s[3])){r.label=o[1];break}if(o[0]===6&&r.label<s[1]){r.label=s[1];s=o;break}if(s&&r.label<s[2]){r.label=s[2];r.ops.push(o);break}if(s[2])r.ops.pop();r.trys.pop();continue}o=n.call(t,r)}catch(t){o=[6,t];i=0}finally{e=s=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:true}}}function L(t,n,r,e){if(e===undefined)e=r;t[e]=n[r]}function q(t,n){for(var r in t)if(r!=="default"&&!n.hasOwnProperty(r))n[r]=t[r]}function V(t){var n=typeof Symbol==="function"&&Symbol.iterator,r=n&&t[n],e=0;if(r)return r.call(t);if(t&&typeof t.length==="number")return{next:function(){if(t&&e>=t.length)t=void 0;return{value:t&&t[e++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function F(t,n){var r=typeof Symbol==="function"&&t[Symbol.iterator];if(!r)return t;var e=r.call(t),i,s=[],o;try{while((n===void 0||n-- >0)&&!(i=e.next()).done)s.push(i.value)}catch(t){o={error:t}}finally{try{if(i&&!i.done&&(r=e["return"]))r.call(e)}finally{if(o)throw o.error}}return s}function H(){for(var t=[],n=0;n<arguments.length;n++)t=t.concat(F(arguments[n]));return t}function G(){for(var t=0,n=0,r=arguments.length;n<r;n++)t+=arguments[n].length;for(var e=Array(t),i=0,n=0;n<r;n++)for(var s=arguments[n],o=0,u=s.length;o<u;o++,i++)e[i]=s[o];return e}function z(t){return this instanceof z?(this.v=t,this):new z(t)}function B(t,n,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r.apply(t,n||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(t){if(e[t])i[t]=function(n){return new Promise((function(r,e){s.push([t,n,r,e])>1||u(t,n)}))}}function u(t,n){try{a(e[t](n))}catch(t){h(s[0][3],t)}}function a(t){t.value instanceof z?Promise.resolve(t.value.v).then(c,f):h(s[0][2],t)}function c(t){u("next",t)}function f(t){u("throw",t)}function h(t,n){if(t(n),s.shift(),s.length)u(s[0][0],s[0][1])}}function W(t){var n,r;return n={},e("next"),e("throw",(function(t){throw t})),e("return"),n[Symbol.iterator]=function(){return this},n;function e(e,i){n[e]=t[e]?function(n){return(r=!r)?{value:z(t[e](n)),done:e==="return"}:i?i(n):n}:i}}function K(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t[Symbol.asyncIterator],r;return n?n.call(t):(t=typeof V==="function"?V(t):t[Symbol.iterator](),r={},e("next"),e("throw"),e("return"),r[Symbol.asyncIterator]=function(){return this},r);function e(n){r[n]=t[n]&&function(r){return new Promise((function(e,s){r=t[n](r),i(e,s,r.done,r.value)}))}}function i(t,n,r,e){Promise.resolve(e).then((function(n){t({value:n,done:r})}),n)}}function J(t,n){if(Object.defineProperty){Object.defineProperty(t,"raw",{value:n})}else{t.raw=n}return t}function Z(t){if(t&&t.__esModule)return t;var n={};if(t!=null)for(var r in t)if(Object.hasOwnProperty.call(t,r))n[r]=t[r];n.default=t;return n}function Y(t){return t&&t.__esModule?t:{default:t}}function Q(t,n){if(!n.has(t)){throw new TypeError("attempted to get private field on non-instance")}return n.get(t)}function X(t,n,r){if(!n.has(t)){throw new TypeError("attempted to set private field on non-instance")}n.set(t,r);return r}const tt=Object.freeze({__proto__:null,__extends:T,get __assign(){return U},__rest:$,__decorate:M,__param:R,__metadata:C,__awaiter:D,__generator:k,__createBinding:L,__exportStar:q,__values:V,__read:F,__spread:H,__spreadArrays:G,__await:z,__asyncGenerator:B,__asyncDelegator:W,__asyncValues:K,__makeTemplateObject:J,__importStar:Z,__importDefault:Y,__classPrivateFieldGet:Q,__classPrivateFieldSet:X});var nt=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});function r(t){if(typeof t!=="string"){throw new Error(`Cannot safe json parse value of type ${typeof t}`)}try{return JSON.parse(t)}catch(n){return t}}n.safeJsonParse=r;function e(t){return typeof t==="string"?t:JSON.stringify(t,((t,n)=>typeof n==="undefined"?null:n))}n.safeJsonStringify=e}));var rt=t((function(t){(function(){let r;function e(){}r=e;r.prototype.getItem=function(t){if(this.hasOwnProperty(t)){return String(this[t])}return null};r.prototype.setItem=function(t,n){this[t]=String(n)};r.prototype.removeItem=function(t){delete this[t]};r.prototype.clear=function(){const t=this;Object.keys(t).forEach((function(n){t[n]=undefined;delete t[n]}))};r.prototype.key=function(t){t=t||0;return Object.keys(this)[t]};r.prototype.__defineGetter__("length",(function(){return Object.keys(this).length}));if(typeof n!=="undefined"&&n.localStorage){t.exports=n.localStorage}else if(typeof window!=="undefined"&&window.localStorage){t.exports=window.localStorage}else{t.exports=new e}})()}));var et=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});n.IKeyValueStorage=void 0;class r{}n.IKeyValueStorage=r}));var it=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});n.parseEntry=void 0;function r(t){var n;return[t[0],nt.safeJsonParse((n=t[1])!==null&&n!==void 0?n:"")]}n.parseEntry=r}));const st=r(tt);var ot=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});st.__exportStar(et,n);st.__exportStar(it,n)}));var ut=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});n.KeyValueStorage=void 0;const r=st.__importDefault(rt);class e{constructor(){this.localStorage=r.default}getKeys(){return st.__awaiter(this,void 0,void 0,(function*(){return Object.keys(this.localStorage)}))}getEntries(){return st.__awaiter(this,void 0,void 0,(function*(){return Object.entries(this.localStorage).map(ot.parseEntry)}))}getItem(t){return st.__awaiter(this,void 0,void 0,(function*(){const n=this.localStorage.getItem(t);if(n===null){return undefined}return nt.safeJsonParse(n)}))}setItem(t,n){return st.__awaiter(this,void 0,void 0,(function*(){this.localStorage.setItem(t,nt.safeJsonStringify(n))}))}removeItem(t){return st.__awaiter(this,void 0,void 0,(function*(){this.localStorage.removeItem(t)}))}}n.KeyValueStorage=e;n.default=e}));const at=e(ut);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ct=function(t,n){ct=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)if(n.hasOwnProperty(r))t[r]=n[r]};return ct(t,n)};function ft(t,n){ct(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}var ht=function(){ht=Object.assign||function t(n){for(var r,e=1,i=arguments.length;e<i;e++){r=arguments[e];for(var s in r)if(Object.prototype.hasOwnProperty.call(r,s))n[s]=r[s]}return n};return ht.apply(this,arguments)};function lt(t,n){var r={};for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e)&&n.indexOf(e)<0)r[e]=t[e];if(t!=null&&typeof Object.getOwnPropertySymbols==="function")for(var i=0,e=Object.getOwnPropertySymbols(t);i<e.length;i++){if(n.indexOf(e[i])<0&&Object.prototype.propertyIsEnumerable.call(t,e[i]))r[e[i]]=t[e[i]]}return r}function dt(t,n,r,e){var i=arguments.length,s=i<3?n:e===null?e=Object.getOwnPropertyDescriptor(n,r):e,o;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")s=Reflect.decorate(t,n,r,e);else for(var u=t.length-1;u>=0;u--)if(o=t[u])s=(i<3?o(s):i>3?o(n,r,s):o(n,r))||s;return i>3&&s&&Object.defineProperty(n,r,s),s}function vt(t,n){return function(r,e){n(r,e,t)}}function pt(t,n){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(t,n)}function wt(t,n,r,e){function i(t){return t instanceof r?t:new r((function(n){n(t)}))}return new(r||(r=Promise))((function(r,s){function o(t){try{a(e.next(t))}catch(t){s(t)}}function u(t){try{a(e["throw"](t))}catch(t){s(t)}}function a(t){t.done?r(t.value):i(t.value).then(o,u)}a((e=e.apply(t,n||[])).next())}))}function yt(t,n){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},e,i,s,o;return o={next:u(0),throw:u(1),return:u(2)},typeof Symbol==="function"&&(o[Symbol.iterator]=function(){return this}),o;function u(t){return function(n){return a([t,n])}}function a(o){if(e)throw new TypeError("Generator is already executing.");while(r)try{if(e=1,i&&(s=o[0]&2?i["return"]:o[0]?i["throw"]||((s=i["return"])&&s.call(i),0):i.next)&&!(s=s.call(i,o[1])).done)return s;if(i=0,s)o=[o[0]&2,s.value];switch(o[0]){case 0:case 1:s=o;break;case 4:r.label++;return{value:o[1],done:false};case 5:r.label++;i=o[1];o=[0];continue;case 7:o=r.ops.pop();r.trys.pop();continue;default:if(!(s=r.trys,s=s.length>0&&s[s.length-1])&&(o[0]===6||o[0]===2)){r=0;continue}if(o[0]===3&&(!s||o[1]>s[0]&&o[1]<s[3])){r.label=o[1];break}if(o[0]===6&&r.label<s[1]){r.label=s[1];s=o;break}if(s&&r.label<s[2]){r.label=s[2];r.ops.push(o);break}if(s[2])r.ops.pop();r.trys.pop();continue}o=n.call(t,r)}catch(t){o=[6,t];i=0}finally{e=s=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:true}}}function bt(t,n,r,e){if(e===undefined)e=r;t[e]=n[r]}function mt(t,n){for(var r in t)if(r!=="default"&&!n.hasOwnProperty(r))n[r]=t[r]}function _t(t){var n=typeof Symbol==="function"&&Symbol.iterator,r=n&&t[n],e=0;if(r)return r.call(t);if(t&&typeof t.length==="number")return{next:function(){if(t&&e>=t.length)t=void 0;return{value:t&&t[e++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function gt(t,n){var r=typeof Symbol==="function"&&t[Symbol.iterator];if(!r)return t;var e=r.call(t),i,s=[],o;try{while((n===void 0||n-- >0)&&!(i=e.next()).done)s.push(i.value)}catch(t){o={error:t}}finally{try{if(i&&!i.done&&(r=e["return"]))r.call(e)}finally{if(o)throw o.error}}return s}function Et(){for(var t=[],n=0;n<arguments.length;n++)t=t.concat(gt(arguments[n]));return t}function Ot(){for(var t=0,n=0,r=arguments.length;n<r;n++)t+=arguments[n].length;for(var e=Array(t),i=0,n=0;n<r;n++)for(var s=arguments[n],o=0,u=s.length;o<u;o++,i++)e[i]=s[o];return e}function St(t){return this instanceof St?(this.v=t,this):new St(t)}function jt(t,n,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r.apply(t,n||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(t){if(e[t])i[t]=function(n){return new Promise((function(r,e){s.push([t,n,r,e])>1||u(t,n)}))}}function u(t,n){try{a(e[t](n))}catch(t){h(s[0][3],t)}}function a(t){t.value instanceof St?Promise.resolve(t.value.v).then(c,f):h(s[0][2],t)}function c(t){u("next",t)}function f(t){u("throw",t)}function h(t,n){if(t(n),s.shift(),s.length)u(s[0][0],s[0][1])}}function It(t){var n,r;return n={},e("next"),e("throw",(function(t){throw t})),e("return"),n[Symbol.iterator]=function(){return this},n;function e(e,i){n[e]=t[e]?function(n){return(r=!r)?{value:St(t[e](n)),done:e==="return"}:i?i(n):n}:i}}function At(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t[Symbol.asyncIterator],r;return n?n.call(t):(t=typeof _t==="function"?_t(t):t[Symbol.iterator](),r={},e("next"),e("throw"),e("return"),r[Symbol.asyncIterator]=function(){return this},r);function e(n){r[n]=t[n]&&function(r){return new Promise((function(e,s){r=t[n](r),i(e,s,r.done,r.value)}))}}function i(t,n,r,e){Promise.resolve(e).then((function(n){t({value:n,done:r})}),n)}}function Nt(t,n){if(Object.defineProperty){Object.defineProperty(t,"raw",{value:n})}else{t.raw=n}return t}function xt(t){if(t&&t.__esModule)return t;var n={};if(t!=null)for(var r in t)if(Object.hasOwnProperty.call(t,r))n[r]=t[r];n.default=t;return n}function Pt(t){return t&&t.__esModule?t:{default:t}}function Tt(t,n){if(!n.has(t)){throw new TypeError("attempted to get private field on non-instance")}return n.get(t)}function Ut(t,n,r){if(!n.has(t)){throw new TypeError("attempted to set private field on non-instance")}n.set(t,r);return r}const $t=Object.freeze({__proto__:null,__extends:ft,get __assign(){return ht},__rest:lt,__decorate:dt,__param:vt,__metadata:pt,__awaiter:wt,__generator:yt,__createBinding:bt,__exportStar:mt,__values:_t,__read:gt,__spread:Et,__spreadArrays:Ot,__await:St,__asyncGenerator:jt,__asyncDelegator:It,__asyncValues:At,__makeTemplateObject:Nt,__importStar:xt,__importDefault:Pt,__classPrivateFieldGet:Tt,__classPrivateFieldSet:Ut});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Mt=function(t,n){Mt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)if(n.hasOwnProperty(r))t[r]=n[r]};return Mt(t,n)};function Rt(t,n){Mt(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}var Ct=function(){Ct=Object.assign||function t(n){for(var r,e=1,i=arguments.length;e<i;e++){r=arguments[e];for(var s in r)if(Object.prototype.hasOwnProperty.call(r,s))n[s]=r[s]}return n};return Ct.apply(this,arguments)};function Dt(t,n){var r={};for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e)&&n.indexOf(e)<0)r[e]=t[e];if(t!=null&&typeof Object.getOwnPropertySymbols==="function")for(var i=0,e=Object.getOwnPropertySymbols(t);i<e.length;i++){if(n.indexOf(e[i])<0&&Object.prototype.propertyIsEnumerable.call(t,e[i]))r[e[i]]=t[e[i]]}return r}function kt(t,n,r,e){var i=arguments.length,s=i<3?n:e===null?e=Object.getOwnPropertyDescriptor(n,r):e,o;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")s=Reflect.decorate(t,n,r,e);else for(var u=t.length-1;u>=0;u--)if(o=t[u])s=(i<3?o(s):i>3?o(n,r,s):o(n,r))||s;return i>3&&s&&Object.defineProperty(n,r,s),s}function Lt(t,n){return function(r,e){n(r,e,t)}}function qt(t,n){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(t,n)}function Vt(t,n,r,e){function i(t){return t instanceof r?t:new r((function(n){n(t)}))}return new(r||(r=Promise))((function(r,s){function o(t){try{a(e.next(t))}catch(t){s(t)}}function u(t){try{a(e["throw"](t))}catch(t){s(t)}}function a(t){t.done?r(t.value):i(t.value).then(o,u)}a((e=e.apply(t,n||[])).next())}))}function Ft(t,n){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},e,i,s,o;return o={next:u(0),throw:u(1),return:u(2)},typeof Symbol==="function"&&(o[Symbol.iterator]=function(){return this}),o;function u(t){return function(n){return a([t,n])}}function a(o){if(e)throw new TypeError("Generator is already executing.");while(r)try{if(e=1,i&&(s=o[0]&2?i["return"]:o[0]?i["throw"]||((s=i["return"])&&s.call(i),0):i.next)&&!(s=s.call(i,o[1])).done)return s;if(i=0,s)o=[o[0]&2,s.value];switch(o[0]){case 0:case 1:s=o;break;case 4:r.label++;return{value:o[1],done:false};case 5:r.label++;i=o[1];o=[0];continue;case 7:o=r.ops.pop();r.trys.pop();continue;default:if(!(s=r.trys,s=s.length>0&&s[s.length-1])&&(o[0]===6||o[0]===2)){r=0;continue}if(o[0]===3&&(!s||o[1]>s[0]&&o[1]<s[3])){r.label=o[1];break}if(o[0]===6&&r.label<s[1]){r.label=s[1];s=o;break}if(s&&r.label<s[2]){r.label=s[2];r.ops.push(o);break}if(s[2])r.ops.pop();r.trys.pop();continue}o=n.call(t,r)}catch(t){o=[6,t];i=0}finally{e=s=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:true}}}function Ht(t,n,r,e){if(e===undefined)e=r;t[e]=n[r]}function Gt(t,n){for(var r in t)if(r!=="default"&&!n.hasOwnProperty(r))n[r]=t[r]}function zt(t){var n=typeof Symbol==="function"&&Symbol.iterator,r=n&&t[n],e=0;if(r)return r.call(t);if(t&&typeof t.length==="number")return{next:function(){if(t&&e>=t.length)t=void 0;return{value:t&&t[e++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function Bt(t,n){var r=typeof Symbol==="function"&&t[Symbol.iterator];if(!r)return t;var e=r.call(t),i,s=[],o;try{while((n===void 0||n-- >0)&&!(i=e.next()).done)s.push(i.value)}catch(t){o={error:t}}finally{try{if(i&&!i.done&&(r=e["return"]))r.call(e)}finally{if(o)throw o.error}}return s}function Wt(){for(var t=[],n=0;n<arguments.length;n++)t=t.concat(Bt(arguments[n]));return t}function Kt(){for(var t=0,n=0,r=arguments.length;n<r;n++)t+=arguments[n].length;for(var e=Array(t),i=0,n=0;n<r;n++)for(var s=arguments[n],o=0,u=s.length;o<u;o++,i++)e[i]=s[o];return e}function Jt(t){return this instanceof Jt?(this.v=t,this):new Jt(t)}function Zt(t,n,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r.apply(t,n||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(t){if(e[t])i[t]=function(n){return new Promise((function(r,e){s.push([t,n,r,e])>1||u(t,n)}))}}function u(t,n){try{a(e[t](n))}catch(t){h(s[0][3],t)}}function a(t){t.value instanceof Jt?Promise.resolve(t.value.v).then(c,f):h(s[0][2],t)}function c(t){u("next",t)}function f(t){u("throw",t)}function h(t,n){if(t(n),s.shift(),s.length)u(s[0][0],s[0][1])}}function Yt(t){var n,r;return n={},e("next"),e("throw",(function(t){throw t})),e("return"),n[Symbol.iterator]=function(){return this},n;function e(e,i){n[e]=t[e]?function(n){return(r=!r)?{value:Jt(t[e](n)),done:e==="return"}:i?i(n):n}:i}}function Qt(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t[Symbol.asyncIterator],r;return n?n.call(t):(t=typeof zt==="function"?zt(t):t[Symbol.iterator](),r={},e("next"),e("throw"),e("return"),r[Symbol.asyncIterator]=function(){return this},r);function e(n){r[n]=t[n]&&function(r){return new Promise((function(e,s){r=t[n](r),i(e,s,r.done,r.value)}))}}function i(t,n,r,e){Promise.resolve(e).then((function(n){t({value:n,done:r})}),n)}}function Xt(t,n){if(Object.defineProperty){Object.defineProperty(t,"raw",{value:n})}else{t.raw=n}return t}function tn(t){if(t&&t.__esModule)return t;var n={};if(t!=null)for(var r in t)if(Object.hasOwnProperty.call(t,r))n[r]=t[r];n.default=t;return n}function nn(t){return t&&t.__esModule?t:{default:t}}function rn(t,n){if(!n.has(t)){throw new TypeError("attempted to get private field on non-instance")}return n.get(t)}function en(t,n,r){if(!n.has(t)){throw new TypeError("attempted to set private field on non-instance")}n.set(t,r);return r}const sn=Object.freeze({__proto__:null,__extends:Rt,get __assign(){return Ct},__rest:Dt,__decorate:kt,__param:Lt,__metadata:qt,__awaiter:Vt,__generator:Ft,__createBinding:Ht,__exportStar:Gt,__values:zt,__read:Bt,__spread:Wt,__spreadArrays:Kt,__await:Jt,__asyncGenerator:Zt,__asyncDelegator:Yt,__asyncValues:Qt,__makeTemplateObject:Xt,__importStar:tn,__importDefault:nn,__classPrivateFieldGet:rn,__classPrivateFieldSet:en});var on=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});n.delay=void 0;function r(t){return new Promise((n=>{setTimeout((()=>{n(true)}),t)}))}n.delay=r}));var un=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});n.ONE_THOUSAND=n.ONE_HUNDRED=void 0;n.ONE_HUNDRED=100;n.ONE_THOUSAND=1e3}));var an=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});n.ONE_YEAR=n.FOUR_WEEKS=n.THREE_WEEKS=n.TWO_WEEKS=n.ONE_WEEK=n.THIRTY_DAYS=n.SEVEN_DAYS=n.FIVE_DAYS=n.THREE_DAYS=n.ONE_DAY=n.TWENTY_FOUR_HOURS=n.TWELVE_HOURS=n.SIX_HOURS=n.THREE_HOURS=n.ONE_HOUR=n.SIXTY_MINUTES=n.THIRTY_MINUTES=n.TEN_MINUTES=n.FIVE_MINUTES=n.ONE_MINUTE=n.SIXTY_SECONDS=n.THIRTY_SECONDS=n.TEN_SECONDS=n.FIVE_SECONDS=n.ONE_SECOND=void 0;n.ONE_SECOND=1;n.FIVE_SECONDS=5;n.TEN_SECONDS=10;n.THIRTY_SECONDS=30;n.SIXTY_SECONDS=60;n.ONE_MINUTE=n.SIXTY_SECONDS;n.FIVE_MINUTES=n.ONE_MINUTE*5;n.TEN_MINUTES=n.ONE_MINUTE*10;n.THIRTY_MINUTES=n.ONE_MINUTE*30;n.SIXTY_MINUTES=n.ONE_MINUTE*60;n.ONE_HOUR=n.SIXTY_MINUTES;n.THREE_HOURS=n.ONE_HOUR*3;n.SIX_HOURS=n.ONE_HOUR*6;n.TWELVE_HOURS=n.ONE_HOUR*12;n.TWENTY_FOUR_HOURS=n.ONE_HOUR*24;n.ONE_DAY=n.TWENTY_FOUR_HOURS;n.THREE_DAYS=n.ONE_DAY*3;n.FIVE_DAYS=n.ONE_DAY*5;n.SEVEN_DAYS=n.ONE_DAY*7;n.THIRTY_DAYS=n.ONE_DAY*30;n.ONE_WEEK=n.SEVEN_DAYS;n.TWO_WEEKS=n.ONE_WEEK*2;n.THREE_WEEKS=n.ONE_WEEK*3;n.FOUR_WEEKS=n.ONE_WEEK*4;n.ONE_YEAR=n.ONE_DAY*365}));const cn=r(sn);var fn=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});cn.__exportStar(un,n);cn.__exportStar(an,n)}));var hn=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});n.fromMiliseconds=n.toMiliseconds=void 0;function r(t){return t*fn.ONE_THOUSAND}n.toMiliseconds=r;function e(t){return Math.floor(t/fn.ONE_THOUSAND)}n.fromMiliseconds=e}));var ln=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});cn.__exportStar(on,n);cn.__exportStar(hn,n)}));var dn=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});n.Watch=void 0;class r{constructor(){this.timestamps=new Map}start(t){if(this.timestamps.has(t)){throw new Error(`Watch already started for label: ${t}`)}this.timestamps.set(t,{started:Date.now()})}stop(t){const n=this.get(t);if(typeof n.elapsed!=="undefined"){throw new Error(`Watch already stopped for label: ${t}`)}const r=Date.now()-n.started;this.timestamps.set(t,{started:n.started,elapsed:r})}get(t){const n=this.timestamps.get(t);if(typeof n==="undefined"){throw new Error(`No timestamp found for label: ${t}`)}return n}elapsed(t){const n=this.get(t);const r=n.elapsed||Date.now()-n.started;return r}}n.Watch=r;n.default=r}));var vn=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});n.IWatch=void 0;class r{}n.IWatch=r}));var pn=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});cn.__exportStar(vn,n)}));var wn=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});cn.__exportStar(ln,n);cn.__exportStar(dn,n);cn.__exportStar(pn,n);cn.__exportStar(fn,n)}));class yn{}const bn=Object.freeze({__proto__:null,IEvents:yn});const mn=r(bn);var _n=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});n.IHeartBeat=void 0;class r extends mn.IEvents{constructor(t){super()}}n.IHeartBeat=r}));const gn=r($t);var En=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});gn.__exportStar(_n,n)}));var On=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});n.HEARTBEAT_EVENTS=n.HEARTBEAT_INTERVAL=void 0;n.HEARTBEAT_INTERVAL=wn.FIVE_SECONDS;n.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"}}));var Sn=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});gn.__exportStar(On,n)}));var jn=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});n.HeartBeat=void 0;class r extends En.IHeartBeat{constructor(t){super(t);this.events=new v.EventEmitter;this.interval=Sn.HEARTBEAT_INTERVAL;this.interval=(t===null||t===void 0?void 0:t.interval)||Sn.HEARTBEAT_INTERVAL}static init(t){return gn.__awaiter(this,void 0,void 0,(function*(){const n=new r(t);yield n.init();return n}))}init(){return gn.__awaiter(this,void 0,void 0,(function*(){yield this.initialize()}))}stop(){clearInterval(this.intervalRef)}on(t,n){this.events.on(t,n)}once(t,n){this.events.once(t,n)}off(t,n){this.events.off(t,n)}removeListener(t,n){this.events.removeListener(t,n)}initialize(){return gn.__awaiter(this,void 0,void 0,(function*(){this.intervalRef=setInterval((()=>this.pulse()),wn.toMiliseconds(this.interval))}))}pulse(){this.events.emit(Sn.HEARTBEAT_EVENTS.pulse)}}n.HeartBeat=r}));var In=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});gn.__exportStar(jn,n);gn.__exportStar(En,n);gn.__exportStar(Sn,n)}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var An=function(t,n){An=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)if(n.hasOwnProperty(r))t[r]=n[r]};return An(t,n)};function Nn(t,n){An(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}var xn=function(){xn=Object.assign||function t(n){for(var r,e=1,i=arguments.length;e<i;e++){r=arguments[e];for(var s in r)if(Object.prototype.hasOwnProperty.call(r,s))n[s]=r[s]}return n};return xn.apply(this,arguments)};function Pn(t,n){var r={};for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e)&&n.indexOf(e)<0)r[e]=t[e];if(t!=null&&typeof Object.getOwnPropertySymbols==="function")for(var i=0,e=Object.getOwnPropertySymbols(t);i<e.length;i++){if(n.indexOf(e[i])<0&&Object.prototype.propertyIsEnumerable.call(t,e[i]))r[e[i]]=t[e[i]]}return r}function Tn(t,n,r,e){var i=arguments.length,s=i<3?n:e===null?e=Object.getOwnPropertyDescriptor(n,r):e,o;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")s=Reflect.decorate(t,n,r,e);else for(var u=t.length-1;u>=0;u--)if(o=t[u])s=(i<3?o(s):i>3?o(n,r,s):o(n,r))||s;return i>3&&s&&Object.defineProperty(n,r,s),s}function Un(t,n){return function(r,e){n(r,e,t)}}function $n(t,n){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(t,n)}function Mn(t,n,r,e){function i(t){return t instanceof r?t:new r((function(n){n(t)}))}return new(r||(r=Promise))((function(r,s){function o(t){try{a(e.next(t))}catch(t){s(t)}}function u(t){try{a(e["throw"](t))}catch(t){s(t)}}function a(t){t.done?r(t.value):i(t.value).then(o,u)}a((e=e.apply(t,n||[])).next())}))}function Rn(t,n){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},e,i,s,o;return o={next:u(0),throw:u(1),return:u(2)},typeof Symbol==="function"&&(o[Symbol.iterator]=function(){return this}),o;function u(t){return function(n){return a([t,n])}}function a(o){if(e)throw new TypeError("Generator is already executing.");while(r)try{if(e=1,i&&(s=o[0]&2?i["return"]:o[0]?i["throw"]||((s=i["return"])&&s.call(i),0):i.next)&&!(s=s.call(i,o[1])).done)return s;if(i=0,s)o=[o[0]&2,s.value];switch(o[0]){case 0:case 1:s=o;break;case 4:r.label++;return{value:o[1],done:false};case 5:r.label++;i=o[1];o=[0];continue;case 7:o=r.ops.pop();r.trys.pop();continue;default:if(!(s=r.trys,s=s.length>0&&s[s.length-1])&&(o[0]===6||o[0]===2)){r=0;continue}if(o[0]===3&&(!s||o[1]>s[0]&&o[1]<s[3])){r.label=o[1];break}if(o[0]===6&&r.label<s[1]){r.label=s[1];s=o;break}if(s&&r.label<s[2]){r.label=s[2];r.ops.push(o);break}if(s[2])r.ops.pop();r.trys.pop();continue}o=n.call(t,r)}catch(t){o=[6,t];i=0}finally{e=s=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:true}}}function Cn(t,n,r,e){if(e===undefined)e=r;t[e]=n[r]}function Dn(t,n){for(var r in t)if(r!=="default"&&!n.hasOwnProperty(r))n[r]=t[r]}function kn(t){var n=typeof Symbol==="function"&&Symbol.iterator,r=n&&t[n],e=0;if(r)return r.call(t);if(t&&typeof t.length==="number")return{next:function(){if(t&&e>=t.length)t=void 0;return{value:t&&t[e++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ln(t,n){var r=typeof Symbol==="function"&&t[Symbol.iterator];if(!r)return t;var e=r.call(t),i,s=[],o;try{while((n===void 0||n-- >0)&&!(i=e.next()).done)s.push(i.value)}catch(t){o={error:t}}finally{try{if(i&&!i.done&&(r=e["return"]))r.call(e)}finally{if(o)throw o.error}}return s}function qn(){for(var t=[],n=0;n<arguments.length;n++)t=t.concat(Ln(arguments[n]));return t}function Vn(){for(var t=0,n=0,r=arguments.length;n<r;n++)t+=arguments[n].length;for(var e=Array(t),i=0,n=0;n<r;n++)for(var s=arguments[n],o=0,u=s.length;o<u;o++,i++)e[i]=s[o];return e}function Fn(t){return this instanceof Fn?(this.v=t,this):new Fn(t)}function Hn(t,n,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r.apply(t,n||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(t){if(e[t])i[t]=function(n){return new Promise((function(r,e){s.push([t,n,r,e])>1||u(t,n)}))}}function u(t,n){try{a(e[t](n))}catch(t){h(s[0][3],t)}}function a(t){t.value instanceof Fn?Promise.resolve(t.value.v).then(c,f):h(s[0][2],t)}function c(t){u("next",t)}function f(t){u("throw",t)}function h(t,n){if(t(n),s.shift(),s.length)u(s[0][0],s[0][1])}}function Gn(t){var n,r;return n={},e("next"),e("throw",(function(t){throw t})),e("return"),n[Symbol.iterator]=function(){return this},n;function e(e,i){n[e]=t[e]?function(n){return(r=!r)?{value:Fn(t[e](n)),done:e==="return"}:i?i(n):n}:i}}function zn(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t[Symbol.asyncIterator],r;return n?n.call(t):(t=typeof kn==="function"?kn(t):t[Symbol.iterator](),r={},e("next"),e("throw"),e("return"),r[Symbol.asyncIterator]=function(){return this},r);function e(n){r[n]=t[n]&&function(r){return new Promise((function(e,s){r=t[n](r),i(e,s,r.done,r.value)}))}}function i(t,n,r,e){Promise.resolve(e).then((function(n){t({value:n,done:r})}),n)}}function Bn(t,n){if(Object.defineProperty){Object.defineProperty(t,"raw",{value:n})}else{t.raw=n}return t}function Wn(t){if(t&&t.__esModule)return t;var n={};if(t!=null)for(var r in t)if(Object.hasOwnProperty.call(t,r))n[r]=t[r];n.default=t;return n}function Kn(t){return t&&t.__esModule?t:{default:t}}function Jn(t,n){if(!n.has(t)){throw new TypeError("attempted to get private field on non-instance")}return n.get(t)}function Zn(t,n,r){if(!n.has(t)){throw new TypeError("attempted to set private field on non-instance")}n.set(t,r);return r}const Yn=Object.freeze({__proto__:null,__extends:Nn,get __assign(){return xn},__rest:Pn,__decorate:Tn,__param:Un,__metadata:$n,__awaiter:Mn,__generator:Rn,__createBinding:Cn,__exportStar:Dn,__values:kn,__read:Ln,__spread:qn,__spreadArrays:Vn,__await:Fn,__asyncGenerator:Hn,__asyncDelegator:Gn,__asyncValues:zn,__makeTemplateObject:Bn,__importStar:Wn,__importDefault:Kn,__classPrivateFieldGet:Jn,__classPrivateFieldSet:Zn});function Qn(t){try{return JSON.stringify(t)}catch(t){return'"[Circular]"'}}var Xn=tr;function tr(t,n,r){var e=r&&r.stringify||Qn;var i=1;if(typeof t==="object"&&t!==null){var s=n.length+i;if(s===1)return t;var o=new Array(s);o[0]=e(t);for(var u=1;u<s;u++){o[u]=e(n[u])}return o.join(" ")}if(typeof t!=="string"){return t}var a=n.length;if(a===0)return t;var c="";var f=1-i;var h=-1;var l=t&&t.length||0;for(var d=0;d<l;){if(t.charCodeAt(d)===37&&d+1<l){h=h>-1?h:0;switch(t.charCodeAt(d+1)){case 100:case 102:if(f>=a)break;if(n[f]==null)break;if(h<d)c+=t.slice(h,d);c+=Number(n[f]);h=d+2;d++;break;case 105:if(f>=a)break;if(n[f]==null)break;if(h<d)c+=t.slice(h,d);c+=Math.floor(Number(n[f]));h=d+2;d++;break;case 79:case 111:case 106:if(f>=a)break;if(n[f]===undefined)break;if(h<d)c+=t.slice(h,d);var v=typeof n[f];if(v==="string"){c+="'"+n[f]+"'";h=d+2;d++;break}if(v==="function"){c+=n[f].name||"<anonymous>";h=d+2;d++;break}c+=e(n[f]);h=d+2;d++;break;case 115:if(f>=a)break;if(h<d)c+=t.slice(h,d);c+=String(n[f]);h=d+2;d++;break;case 37:if(h<d)c+=t.slice(h,d);c+="%";h=d+2;d++;f--;break}++f}++d}if(h===-1)return t;else if(h<l){c+=t.slice(h)}return c}var nr=sr;const rr=Er().console||{};const er={mapHttpRequest:pr,mapHttpResponse:pr,wrapRequestSerializer:wr,wrapResponseSerializer:wr,wrapErrorSerializer:wr,req:pr,res:pr,err:dr};function ir(t,n){if(Array.isArray(t)){const n=t.filter((function(t){return t!=="!stdSerializers.err"}));return n}else if(t===true){return Object.keys(n)}return false}function sr(t){t=t||{};t.browser=t.browser||{};const n=t.browser.transmit;if(n&&typeof n.send!=="function"){throw Error("pino: transmit option must have a send function")}const r=t.browser.write||rr;if(t.browser.write)t.browser.asObject=true;const e=t.serializers||{};const i=ir(t.browser.serialize,e);let s=t.browser.serialize;if(Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1)s=false;const o=["error","fatal","warn","info","debug","trace"];if(typeof r==="function"){r.error=r.fatal=r.warn=r.info=r.debug=r.trace=r}if(t.enabled===false)t.level="silent";const u=t.level||"info";const a=Object.create(r);if(!a.log)a.log=yr;Object.defineProperty(a,"levelVal",{get:f});Object.defineProperty(a,"level",{get:h,set:l});const c={transmit:n,serialize:i,asObject:t.browser.asObject,levels:o,timestamp:vr(t)};a.levels=sr.levels;a.level=u;a.setMaxListeners=a.getMaxListeners=a.emit=a.addListener=a.on=a.prependListener=a.once=a.prependOnceListener=a.removeListener=a.removeAllListeners=a.listeners=a.listenerCount=a.eventNames=a.write=a.flush=yr;a.serializers=e;a._serialize=i;a._stdErrSerialize=s;a.child=d;if(n)a._logEvent=lr();function f(){return this.level==="silent"?Infinity:this.levels.values[this.level]}function h(){return this._level}function l(t){if(t!=="silent"&&!this.levels.values[t]){throw Error("unknown level "+t)}this._level=t;or(c,a,"error","log");or(c,a,"fatal","error");or(c,a,"warn","error");or(c,a,"info","log");or(c,a,"debug","log");or(c,a,"trace","log")}function d(r,s){if(!r){throw new Error("missing bindings for child Pino")}s=s||{};if(i&&r.serializers){s.serializers=r.serializers}const o=s.serializers;if(i&&o){var u=Object.assign({},e,o);var a=t.browser.serialize===true?Object.keys(u):i;delete r.serializers;cr([r],a,u,this._stdErrSerialize)}function c(t){this._childLevel=(t._childLevel|0)+1;this.error=fr(t,r,"error");this.fatal=fr(t,r,"fatal");this.warn=fr(t,r,"warn");this.info=fr(t,r,"info");this.debug=fr(t,r,"debug");this.trace=fr(t,r,"trace");if(u){this.serializers=u;this._serialize=a}if(n){this._logEvent=lr([].concat(t._logEvent.bindings,r))}}c.prototype=this;return new c(this)}return a}sr.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};sr.stdSerializers=er;sr.stdTimeFunctions=Object.assign({},{nullTime:br,epochTime:mr,unixTime:_r,isoTime:gr});function or(t,n,r,e){const i=Object.getPrototypeOf(n);n[r]=n.levelVal>n.levels.values[r]?yr:i[r]?i[r]:rr[r]||rr[e]||yr;ur(t,n,r)}function ur(t,n,r){if(!t.transmit&&n[r]===yr)return;n[r]=function(e){return function i(){const s=t.timestamp();const o=new Array(arguments.length);const u=Object.getPrototypeOf&&Object.getPrototypeOf(this)===rr?rr:this;for(var a=0;a<o.length;a++)o[a]=arguments[a];if(t.serialize&&!t.asObject){cr(o,this._serialize,this.serializers,this._stdErrSerialize)}if(t.asObject)e.call(u,ar(this,r,o,s));else e.apply(u,o);if(t.transmit){const e=t.transmit.level||n.level;const i=sr.levels.values[e];const u=sr.levels.values[r];if(u<i)return;hr(this,{ts:s,methodLevel:r,methodValue:u,transmitLevel:e,transmitValue:sr.levels.values[t.transmit.level||n.level],send:t.transmit.send,val:n.levelVal},o)}}}(n[r])}function ar(t,n,r,e){if(t._serialize)cr(r,t._serialize,t.serializers,t._stdErrSerialize);const i=r.slice();let s=i[0];const o={};if(e){o.time=e}o.level=sr.levels.values[n];let u=(t._childLevel|0)+1;if(u<1)u=1;if(s!==null&&typeof s==="object"){while(u--&&typeof i[0]==="object"){Object.assign(o,i.shift())}s=i.length?Xn(i.shift(),i):undefined}else if(typeof s==="string")s=Xn(i.shift(),i);if(s!==undefined)o.msg=s;return o}function cr(t,n,r,e){for(const i in t){if(e&&t[i]instanceof Error){t[i]=sr.stdSerializers.err(t[i])}else if(typeof t[i]==="object"&&!Array.isArray(t[i])){for(const e in t[i]){if(n&&n.indexOf(e)>-1&&e in r){t[i][e]=r[e](t[i][e])}}}}}function fr(t,n,r){return function(){const e=new Array(1+arguments.length);e[0]=n;for(var i=1;i<e.length;i++){e[i]=arguments[i-1]}return t[r].apply(this,e)}}function hr(t,n,r){const e=n.send;const i=n.ts;const s=n.methodLevel;const o=n.methodValue;const u=n.val;const a=t._logEvent.bindings;cr(r,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===undefined?true:t._stdErrSerialize);t._logEvent.ts=i;t._logEvent.messages=r.filter((function(t){return a.indexOf(t)===-1}));t._logEvent.level.label=s;t._logEvent.level.value=o;e(s,t._logEvent,u);t._logEvent=lr(a)}function lr(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function dr(t){const n={type:t.constructor.name,msg:t.message,stack:t.stack};for(const r in t){if(n[r]===undefined){n[r]=t[r]}}return n}function vr(t){if(typeof t.timestamp==="function"){return t.timestamp}if(t.timestamp===false){return br}return mr}function pr(){return{}}function wr(t){return t}function yr(){}function br(){return false}function mr(){return Date.now()}function _r(){return Math.round(Date.now()/1e3)}function gr(){return new Date(Date.now()).toISOString()}function Er(){function t(t){return typeof t!=="undefined"&&t}try{if(typeof globalThis!=="undefined")return globalThis;Object.defineProperty(Object.prototype,"globalThis",{get:function(){delete Object.prototype.globalThis;return this.globalThis=this},configurable:true});return globalThis}catch(n){return t(self)||t(window)||t(this)||{}}}var Or=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});n.PINO_CUSTOM_CONTEXT_KEY=n.PINO_LOGGER_DEFAULTS=void 0;n.PINO_LOGGER_DEFAULTS={level:"info"};n.PINO_CUSTOM_CONTEXT_KEY="custom_context"}));var Sr=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});n.generateChildLogger=n.formatChildLoggerContext=n.getLoggerContext=n.setBrowserLoggerContext=n.getBrowserLoggerContext=n.getDefaultLoggerOptions=void 0;function r(t){return Object.assign(Object.assign({},t),{level:(t===null||t===void 0?void 0:t.level)||Or.PINO_LOGGER_DEFAULTS.level})}n.getDefaultLoggerOptions=r;function e(t,n=Or.PINO_CUSTOM_CONTEXT_KEY){return t[n]||""}n.getBrowserLoggerContext=e;function i(t,n,r=Or.PINO_CUSTOM_CONTEXT_KEY){t[r]=n;return t}n.setBrowserLoggerContext=i;function s(t,n=Or.PINO_CUSTOM_CONTEXT_KEY){let r="";if(typeof t.bindings==="undefined"){r=e(t,n)}else{r=t.bindings().context||""}return r}n.getLoggerContext=s;function o(t,n,r=Or.PINO_CUSTOM_CONTEXT_KEY){const e=s(t,r);const i=e.trim()?`${e}/${n}`:n;return i}n.formatChildLoggerContext=o;function u(t,n,r=Or.PINO_CUSTOM_CONTEXT_KEY){const e=o(t,n,r);const s=t.child({context:e});return i(s,e,r)}n.generateChildLogger=u}));const jr=r(Yn);var Ir=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});n.pino=void 0;const r=jr.__importDefault(nr);Object.defineProperty(n,"pino",{enumerable:true,get:function(){return r.default}});jr.__exportStar(Or,n);jr.__exportStar(Sr,n)}));class Ar extends yn{constructor(t){super(),this.opts=t,this.protocol="wc",this.version=2}}class Nr extends yn{constructor(t,n){super(),this.core=t,this.logger=n,this.records=new Map}}class xr{constructor(t,n){this.logger=t,this.core=n}}class Pr extends yn{constructor(t,n){super(),this.relayer=t,this.logger=n}}class Tr extends yn{constructor(t){super()}}class Ur{constructor(t,n,r,e){this.core=t,this.logger=n,this.name=r}}class $r extends yn{constructor(t,n){super(),this.relayer=t,this.logger=n}}class Mr extends yn{constructor(t,n){super(),this.core=t,this.logger=n}}class Rr{constructor(t,n){this.projectId=t,this.logger=n}}class Cr{constructor(t){this.opts=t,this.protocol="wc",this.version=2}}class Dr{constructor(t){this.client=t}}const kr=t=>JSON.stringify(t,((t,n)=>typeof n==="bigint"?n.toString()+"n":n));const Lr=t=>{const n=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g;const r=t.replace(n,'$1"$2n"$3');return JSON.parse(r,((t,n)=>{const r=typeof n==="string"&&n.match(/^\d+n$/);if(r)return BigInt(n.substring(0,n.length-1));return n}))};function qr(t){if(typeof t!=="string"){throw new Error(`Cannot safe json parse value of type ${typeof t}`)}try{return Lr(t)}catch(n){return t}}function Vr(t){return typeof t==="string"?t:kr(t)||""}var Fr=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});n.BrowserRandomSource=void 0;const r=65536;class e{constructor(){this.isAvailable=false;this.isInstantiated=false;const t=typeof self!=="undefined"?self.crypto||self.msCrypto:null;if(t&&t.getRandomValues!==undefined){this._crypto=t;this.isAvailable=true;this.isInstantiated=true}}randomBytes(t){if(!this.isAvailable||!this._crypto){throw new Error("Browser random byte generator is not available.")}const n=new Uint8Array(t);for(let t=0;t<n.length;t+=r){this._crypto.getRandomValues(n.subarray(t,t+Math.min(n.length-t,r)))}return n}}n.BrowserRandomSource=e}));var Hr=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});function r(t){for(var n=0;n<t.length;n++){t[n]=0}return t}n.wipe=r}));var Gr=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});n.NodeRandomSource=void 0;class r{constructor(){this.isAvailable=false;this.isInstantiated=false;if(typeof i!=="undefined"){const t=s;if(t&&t.randomBytes){this._crypto=t;this.isAvailable=true;this.isInstantiated=true}}}randomBytes(t){if(!this.isAvailable||!this._crypto){throw new Error("Node.js random byte generator is not available.")}let n=this._crypto.randomBytes(t);if(n.length!==t){throw new Error("NodeRandomSource: got fewer bytes than requested")}const r=new Uint8Array(t);for(let t=0;t<r.length;t++){r[t]=n[t]}(0,Hr.wipe)(n);return r}}n.NodeRandomSource=r}));var zr=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});n.SystemRandomSource=void 0;class r{constructor(){this.isAvailable=false;this.name="";this._source=new Fr.BrowserRandomSource;if(this._source.isAvailable){this.isAvailable=true;this.name="Browser";return}this._source=new Gr.NodeRandomSource;if(this._source.isAvailable){this.isAvailable=true;this.name="Node";return}}randomBytes(t){if(!this.isAvailable){throw new Error("System random byte generator is not available.")}return this._source.randomBytes(t)}}n.SystemRandomSource=r}));var Br=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});function r(t,n){var r=t>>>16&65535,e=t&65535;var i=n>>>16&65535,s=n&65535;return e*s+(r*s+e*i<<16>>>0)|0}n.mul=Math.imul||r;function e(t,n){return t+n|0}n.add=e;function i(t,n){return t-n|0}n.sub=i;function s(t,n){return t<<n|t>>>32-n}n.rotl=s;function o(t,n){return t<<32-n|t>>>n}n.rotr=o;function u(t){return typeof t==="number"&&isFinite(t)&&Math.floor(t)===t}n.isInteger=Number.isInteger||u;n.MAX_SAFE_INTEGER=9007199254740991;n.isSafeInteger=function(t){return n.isInteger(t)&&(t>=-n.MAX_SAFE_INTEGER&&t<=n.MAX_SAFE_INTEGER)}}));var Wr=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});function r(t,n){if(n===void 0){n=0}return(t[n+0]<<8|t[n+1])<<16>>16}n.readInt16BE=r;function e(t,n){if(n===void 0){n=0}return(t[n+0]<<8|t[n+1])>>>0}n.readUint16BE=e;function i(t,n){if(n===void 0){n=0}return(t[n+1]<<8|t[n])<<16>>16}n.readInt16LE=i;function s(t,n){if(n===void 0){n=0}return(t[n+1]<<8|t[n])>>>0}n.readUint16LE=s;function o(t,n,r){if(n===void 0){n=new Uint8Array(2)}if(r===void 0){r=0}n[r+0]=t>>>8;n[r+1]=t>>>0;return n}n.writeUint16BE=o;n.writeInt16BE=o;function u(t,n,r){if(n===void 0){n=new Uint8Array(2)}if(r===void 0){r=0}n[r+0]=t>>>0;n[r+1]=t>>>8;return n}n.writeUint16LE=u;n.writeInt16LE=u;function a(t,n){if(n===void 0){n=0}return t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3]}n.readInt32BE=a;function c(t,n){if(n===void 0){n=0}return(t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3])>>>0}n.readUint32BE=c;function f(t,n){if(n===void 0){n=0}return t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]}n.readInt32LE=f;function h(t,n){if(n===void 0){n=0}return(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n])>>>0}n.readUint32LE=h;function l(t,n,r){if(n===void 0){n=new Uint8Array(4)}if(r===void 0){r=0}n[r+0]=t>>>24;n[r+1]=t>>>16;n[r+2]=t>>>8;n[r+3]=t>>>0;return n}n.writeUint32BE=l;n.writeInt32BE=l;function d(t,n,r){if(n===void 0){n=new Uint8Array(4)}if(r===void 0){r=0}n[r+0]=t>>>0;n[r+1]=t>>>8;n[r+2]=t>>>16;n[r+3]=t>>>24;return n}n.writeUint32LE=d;n.writeInt32LE=d;function v(t,n){if(n===void 0){n=0}var r=a(t,n);var e=a(t,n+4);return r*4294967296+e-(e>>31)*4294967296}n.readInt64BE=v;function p(t,n){if(n===void 0){n=0}var r=c(t,n);var e=c(t,n+4);return r*4294967296+e}n.readUint64BE=p;function w(t,n){if(n===void 0){n=0}var r=f(t,n);var e=f(t,n+4);return e*4294967296+r-(r>>31)*4294967296}n.readInt64LE=w;function y(t,n){if(n===void 0){n=0}var r=h(t,n);var e=h(t,n+4);return e*4294967296+r}n.readUint64LE=y;function b(t,n,r){if(n===void 0){n=new Uint8Array(8)}if(r===void 0){r=0}l(t/4294967296>>>0,n,r);l(t>>>0,n,r+4);return n}n.writeUint64BE=b;n.writeInt64BE=b;function m(t,n,r){if(n===void 0){n=new Uint8Array(8)}if(r===void 0){r=0}d(t>>>0,n,r);d(t/4294967296>>>0,n,r+4);return n}n.writeUint64LE=m;n.writeInt64LE=m;function _(t,n,r){if(r===void 0){r=0}if(t%8!==0){throw new Error("readUintBE supports only bitLengths divisible by 8")}if(t/8>n.length-r){throw new Error("readUintBE: array is too short for the given bitLength")}var e=0;var i=1;for(var s=t/8+r-1;s>=r;s--){e+=n[s]*i;i*=256}return e}n.readUintBE=_;function g(t,n,r){if(r===void 0){r=0}if(t%8!==0){throw new Error("readUintLE supports only bitLengths divisible by 8")}if(t/8>n.length-r){throw new Error("readUintLE: array is too short for the given bitLength")}var e=0;var i=1;for(var s=r;s<r+t/8;s++){e+=n[s]*i;i*=256}return e}n.readUintLE=g;function E(t,n,r,e){if(r===void 0){r=new Uint8Array(t/8)}if(e===void 0){e=0}if(t%8!==0){throw new Error("writeUintBE supports only bitLengths divisible by 8")}if(!Br.isSafeInteger(n)){throw new Error("writeUintBE value must be an integer")}var i=1;for(var s=t/8+e-1;s>=e;s--){r[s]=n/i&255;i*=256}return r}n.writeUintBE=E;function O(t,n,r,e){if(r===void 0){r=new Uint8Array(t/8)}if(e===void 0){e=0}if(t%8!==0){throw new Error("writeUintLE supports only bitLengths divisible by 8")}if(!Br.isSafeInteger(n)){throw new Error("writeUintLE value must be an integer")}var i=1;for(var s=e;s<e+t/8;s++){r[s]=n/i&255;i*=256}return r}n.writeUintLE=O;function S(t,n){if(n===void 0){n=0}var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(n)}n.readFloat32BE=S;function j(t,n){if(n===void 0){n=0}var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(n,true)}n.readFloat32LE=j;function I(t,n){if(n===void 0){n=0}var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(n)}n.readFloat64BE=I;function A(t,n){if(n===void 0){n=0}var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(n,true)}n.readFloat64LE=A;function N(t,n,r){if(n===void 0){n=new Uint8Array(4)}if(r===void 0){r=0}var e=new DataView(n.buffer,n.byteOffset,n.byteLength);e.setFloat32(r,t);return n}n.writeFloat32BE=N;function x(t,n,r){if(n===void 0){n=new Uint8Array(4)}if(r===void 0){r=0}var e=new DataView(n.buffer,n.byteOffset,n.byteLength);e.setFloat32(r,t,true);return n}n.writeFloat32LE=x;function P(t,n,r){if(n===void 0){n=new Uint8Array(8)}if(r===void 0){r=0}var e=new DataView(n.buffer,n.byteOffset,n.byteLength);e.setFloat64(r,t);return n}n.writeFloat64BE=P;function T(t,n,r){if(n===void 0){n=new Uint8Array(8)}if(r===void 0){r=0}var e=new DataView(n.buffer,n.byteOffset,n.byteLength);e.setFloat64(r,t,true);return n}n.writeFloat64LE=T}));var Kr=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});n.randomStringForEntropy=n.randomString=n.randomUint32=n.randomBytes=n.defaultRandomSource=void 0;n.defaultRandomSource=new zr.SystemRandomSource;function r(t,r=n.defaultRandomSource){return r.randomBytes(t)}n.randomBytes=r;function e(t=n.defaultRandomSource){const e=r(4,t);const i=(0,Wr.readUint32LE)(e);(0,Hr.wipe)(e);return i}n.randomUint32=e;const i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function s(t,e=i,s=n.defaultRandomSource){if(e.length<2){throw new Error("randomString charset is too short")}if(e.length>256){throw new Error("randomString charset is too long")}let o="";const u=e.length;const a=256-256%u;while(t>0){const n=r(Math.ceil(t*256/a),s);for(let r=0;r<n.length&&t>0;r++){const i=n[r];if(i<a){o+=e.charAt(i%u);t--}}(0,Hr.wipe)(n)}return o}n.randomString=s;function o(t,r=i,e=n.defaultRandomSource){const o=Math.ceil(t/(Math.log(r.length)/Math.LN2));return s(o,r,e)}n.randomStringForEntropy=o}));var Jr=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});n.DIGEST_LENGTH=64;n.BLOCK_SIZE=128;var r=function(){function t(){this.digestLength=n.DIGEST_LENGTH;this.blockSize=n.BLOCK_SIZE;this._stateHi=new Int32Array(8);this._stateLo=new Int32Array(8);this._tempHi=new Int32Array(16);this._tempLo=new Int32Array(16);this._buffer=new Uint8Array(256);this._bufferLength=0;this._bytesHashed=0;this._finished=false;this.reset()}t.prototype._initState=function(){this._stateHi[0]=1779033703;this._stateHi[1]=3144134277;this._stateHi[2]=1013904242;this._stateHi[3]=2773480762;this._stateHi[4]=1359893119;this._stateHi[5]=2600822924;this._stateHi[6]=528734635;this._stateHi[7]=1541459225;this._stateLo[0]=4089235720;this._stateLo[1]=2227873595;this._stateLo[2]=4271175723;this._stateLo[3]=1595750129;this._stateLo[4]=2917565137;this._stateLo[5]=725511199;this._stateLo[6]=4215389547;this._stateLo[7]=327033209};t.prototype.reset=function(){this._initState();this._bufferLength=0;this._bytesHashed=0;this._finished=false;return this};t.prototype.clean=function(){Hr.wipe(this._buffer);Hr.wipe(this._tempHi);Hr.wipe(this._tempLo);this.reset()};t.prototype.update=function(t,r){if(r===void 0){r=t.length}if(this._finished){throw new Error("SHA512: can't update because hash was finished.")}var e=0;this._bytesHashed+=r;if(this._bufferLength>0){while(this._bufferLength<n.BLOCK_SIZE&&r>0){this._buffer[this._bufferLength++]=t[e++];r--}if(this._bufferLength===this.blockSize){i(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize);this._bufferLength=0}}if(r>=this.blockSize){e=i(this._tempHi,this._tempLo,this._stateHi,this._stateLo,t,e,r);r%=this.blockSize}while(r>0){this._buffer[this._bufferLength++]=t[e++];r--}return this};t.prototype.finish=function(t){if(!this._finished){var n=this._bytesHashed;var r=this._bufferLength;var e=n/536870912|0;var s=n<<3;var o=n%128<112?128:256;this._buffer[r]=128;for(var u=r+1;u<o-8;u++){this._buffer[u]=0}Wr.writeUint32BE(e,this._buffer,o-8);Wr.writeUint32BE(s,this._buffer,o-4);i(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,o);this._finished=true}for(var u=0;u<this.digestLength/8;u++){Wr.writeUint32BE(this._stateHi[u],t,u*8);Wr.writeUint32BE(this._stateLo[u],t,u*8+4)}return this};t.prototype.digest=function(){var t=new Uint8Array(this.digestLength);this.finish(t);return t};t.prototype.saveState=function(){if(this._finished){throw new Error("SHA256: cannot save finished state")}return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):undefined,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}};t.prototype.restoreState=function(t){this._stateHi.set(t.stateHi);this._stateLo.set(t.stateLo);this._bufferLength=t.bufferLength;if(t.buffer){this._buffer.set(t.buffer)}this._bytesHashed=t.bytesHashed;this._finished=false;return this};t.prototype.cleanSavedState=function(t){Hr.wipe(t.stateHi);Hr.wipe(t.stateLo);if(t.buffer){Hr.wipe(t.buffer)}t.bufferLength=0;t.bytesHashed=0};return t}();n.SHA512=r;var e=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function i(t,n,r,i,s,o,u){var a=r[0],c=r[1],f=r[2],h=r[3],l=r[4],d=r[5],v=r[6],p=r[7],w=i[0],y=i[1],b=i[2],m=i[3],_=i[4],g=i[5],E=i[6],O=i[7];var S,j;var I,A;var N,x,P,T;while(u>=128){for(var U=0;U<16;U++){var $=8*U+o;t[U]=Wr.readUint32BE(s,$);n[U]=Wr.readUint32BE(s,$+4)}for(var U=0;U<80;U++){var M=a;var R=c;var C=f;var D=h;var k=l;var L=d;var q=v;var V=p;var F=w;var H=y;var G=b;var z=m;var B=_;var W=g;var K=E;var J=O;S=p;j=O;N=j&65535;x=j>>>16;P=S&65535;T=S>>>16;S=(l>>>14|_<<32-14)^(l>>>18|_<<32-18)^(_>>>41-32|l<<32-(41-32));j=(_>>>14|l<<32-14)^(_>>>18|l<<32-18)^(l>>>41-32|_<<32-(41-32));N+=j&65535;x+=j>>>16;P+=S&65535;T+=S>>>16;S=l&d^~l&v;j=_&g^~_&E;N+=j&65535;x+=j>>>16;P+=S&65535;T+=S>>>16;S=e[U*2];j=e[U*2+1];N+=j&65535;x+=j>>>16;P+=S&65535;T+=S>>>16;S=t[U%16];j=n[U%16];N+=j&65535;x+=j>>>16;P+=S&65535;T+=S>>>16;x+=N>>>16;P+=x>>>16;T+=P>>>16;I=P&65535|T<<16;A=N&65535|x<<16;S=I;j=A;N=j&65535;x=j>>>16;P=S&65535;T=S>>>16;S=(a>>>28|w<<32-28)^(w>>>34-32|a<<32-(34-32))^(w>>>39-32|a<<32-(39-32));j=(w>>>28|a<<32-28)^(a>>>34-32|w<<32-(34-32))^(a>>>39-32|w<<32-(39-32));N+=j&65535;x+=j>>>16;P+=S&65535;T+=S>>>16;S=a&c^a&f^c&f;j=w&y^w&b^y&b;N+=j&65535;x+=j>>>16;P+=S&65535;T+=S>>>16;x+=N>>>16;P+=x>>>16;T+=P>>>16;V=P&65535|T<<16;J=N&65535|x<<16;S=D;j=z;N=j&65535;x=j>>>16;P=S&65535;T=S>>>16;S=I;j=A;N+=j&65535;x+=j>>>16;P+=S&65535;T+=S>>>16;x+=N>>>16;P+=x>>>16;T+=P>>>16;D=P&65535|T<<16;z=N&65535|x<<16;c=M;f=R;h=C;l=D;d=k;v=L;p=q;a=V;y=F;b=H;m=G;_=z;g=B;E=W;O=K;w=J;if(U%16===15){for(var $=0;$<16;$++){S=t[$];j=n[$];N=j&65535;x=j>>>16;P=S&65535;T=S>>>16;S=t[($+9)%16];j=n[($+9)%16];N+=j&65535;x+=j>>>16;P+=S&65535;T+=S>>>16;I=t[($+1)%16];A=n[($+1)%16];S=(I>>>1|A<<32-1)^(I>>>8|A<<32-8)^I>>>7;j=(A>>>1|I<<32-1)^(A>>>8|I<<32-8)^(A>>>7|I<<32-7);N+=j&65535;x+=j>>>16;P+=S&65535;T+=S>>>16;I=t[($+14)%16];A=n[($+14)%16];S=(I>>>19|A<<32-19)^(A>>>61-32|I<<32-(61-32))^I>>>6;j=(A>>>19|I<<32-19)^(I>>>61-32|A<<32-(61-32))^(A>>>6|I<<32-6);N+=j&65535;x+=j>>>16;P+=S&65535;T+=S>>>16;x+=N>>>16;P+=x>>>16;T+=P>>>16;t[$]=P&65535|T<<16;n[$]=N&65535|x<<16}}}S=a;j=w;N=j&65535;x=j>>>16;P=S&65535;T=S>>>16;S=r[0];j=i[0];N+=j&65535;x+=j>>>16;P+=S&65535;T+=S>>>16;x+=N>>>16;P+=x>>>16;T+=P>>>16;r[0]=a=P&65535|T<<16;i[0]=w=N&65535|x<<16;S=c;j=y;N=j&65535;x=j>>>16;P=S&65535;T=S>>>16;S=r[1];j=i[1];N+=j&65535;x+=j>>>16;P+=S&65535;T+=S>>>16;x+=N>>>16;P+=x>>>16;T+=P>>>16;r[1]=c=P&65535|T<<16;i[1]=y=N&65535|x<<16;S=f;j=b;N=j&65535;x=j>>>16;P=S&65535;T=S>>>16;S=r[2];j=i[2];N+=j&65535;x+=j>>>16;P+=S&65535;T+=S>>>16;x+=N>>>16;P+=x>>>16;T+=P>>>16;r[2]=f=P&65535|T<<16;i[2]=b=N&65535|x<<16;S=h;j=m;N=j&65535;x=j>>>16;P=S&65535;T=S>>>16;S=r[3];j=i[3];N+=j&65535;x+=j>>>16;P+=S&65535;T+=S>>>16;x+=N>>>16;P+=x>>>16;T+=P>>>16;r[3]=h=P&65535|T<<16;i[3]=m=N&65535|x<<16;S=l;j=_;N=j&65535;x=j>>>16;P=S&65535;T=S>>>16;S=r[4];j=i[4];N+=j&65535;x+=j>>>16;P+=S&65535;T+=S>>>16;x+=N>>>16;P+=x>>>16;T+=P>>>16;r[4]=l=P&65535|T<<16;i[4]=_=N&65535|x<<16;S=d;j=g;N=j&65535;x=j>>>16;P=S&65535;T=S>>>16;S=r[5];j=i[5];N+=j&65535;x+=j>>>16;P+=S&65535;T+=S>>>16;x+=N>>>16;P+=x>>>16;T+=P>>>16;r[5]=d=P&65535|T<<16;i[5]=g=N&65535|x<<16;S=v;j=E;N=j&65535;x=j>>>16;P=S&65535;T=S>>>16;S=r[6];j=i[6];N+=j&65535;x+=j>>>16;P+=S&65535;T+=S>>>16;x+=N>>>16;P+=x>>>16;T+=P>>>16;r[6]=v=P&65535|T<<16;i[6]=E=N&65535|x<<16;S=p;j=O;N=j&65535;x=j>>>16;P=S&65535;T=S>>>16;S=r[7];j=i[7];N+=j&65535;x+=j>>>16;P+=S&65535;T+=S>>>16;x+=N>>>16;P+=x>>>16;T+=P>>>16;r[7]=p=P&65535|T<<16;i[7]=O=N&65535|x<<16;o+=128;u-=128}return o}function s(t){var n=new r;n.update(t);var e=n.digest();n.clean();return e}n.hash=s}));var Zr=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});n.convertSecretKeyToX25519=n.convertPublicKeyToX25519=n.verify=n.sign=n.extractPublicKeyFromSecretKey=n.generateKeyPair=n.generateKeyPairFromSeed=n.SEED_LENGTH=n.SECRET_KEY_LENGTH=n.PUBLIC_KEY_LENGTH=n.SIGNATURE_LENGTH=void 0;n.SIGNATURE_LENGTH=64;n.PUBLIC_KEY_LENGTH=32;n.SECRET_KEY_LENGTH=64;n.SEED_LENGTH=32;function r(t){const n=new Float64Array(16);if(t){for(let r=0;r<t.length;r++){n[r]=t[r]}}return n}const e=new Uint8Array(32);e[0]=9;const i=r();const s=r([1]);const o=r([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]);const u=r([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]);const a=r([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]);const c=r([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]);const f=r([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function h(t,n){for(let r=0;r<16;r++){t[r]=n[r]|0}}function l(t){let n=1;for(let r=0;r<16;r++){let e=t[r]+n+65535;n=Math.floor(e/65536);t[r]=e-n*65536}t[0]+=n-1+37*(n-1)}function d(t,n,r){const e=~(r-1);for(let r=0;r<16;r++){const i=e&(t[r]^n[r]);t[r]^=i;n[r]^=i}}function v(t,n){const e=r();const i=r();for(let t=0;t<16;t++){i[t]=n[t]}l(i);l(i);l(i);for(let t=0;t<2;t++){e[0]=i[0]-65517;for(let t=1;t<15;t++){e[t]=i[t]-65535-(e[t-1]>>16&1);e[t-1]&=65535}e[15]=i[15]-32767-(e[14]>>16&1);const t=e[15]>>16&1;e[14]&=65535;d(i,e,1-t)}for(let n=0;n<16;n++){t[2*n]=i[n]&255;t[2*n+1]=i[n]>>8}}function p(t,n){let r=0;for(let e=0;e<32;e++){r|=t[e]^n[e]}return(1&r-1>>>8)-1}function w(t,n){const r=new Uint8Array(32);const e=new Uint8Array(32);v(r,t);v(e,n);return p(r,e)}function y(t){const n=new Uint8Array(32);v(n,t);return n[0]&1}function b(t,n){for(let r=0;r<16;r++){t[r]=n[2*r]+(n[2*r+1]<<8)}t[15]&=32767}function m(t,n,r){for(let e=0;e<16;e++){t[e]=n[e]+r[e]}}function _(t,n,r){for(let e=0;e<16;e++){t[e]=n[e]-r[e]}}function g(t,n,r){let e,i,s=0,o=0,u=0,a=0,c=0,f=0,h=0,l=0,d=0,v=0,p=0,w=0,y=0,b=0,m=0,_=0,g=0,E=0,O=0,S=0,j=0,I=0,A=0,N=0,x=0,P=0,T=0,U=0,$=0,M=0,R=0,C=r[0],D=r[1],k=r[2],L=r[3],q=r[4],V=r[5],F=r[6],H=r[7],G=r[8],z=r[9],B=r[10],W=r[11],K=r[12],J=r[13],Z=r[14],Y=r[15];e=n[0];s+=e*C;o+=e*D;u+=e*k;a+=e*L;c+=e*q;f+=e*V;h+=e*F;l+=e*H;d+=e*G;v+=e*z;p+=e*B;w+=e*W;y+=e*K;b+=e*J;m+=e*Z;_+=e*Y;e=n[1];o+=e*C;u+=e*D;a+=e*k;c+=e*L;f+=e*q;h+=e*V;l+=e*F;d+=e*H;v+=e*G;p+=e*z;w+=e*B;y+=e*W;b+=e*K;m+=e*J;_+=e*Z;g+=e*Y;e=n[2];u+=e*C;a+=e*D;c+=e*k;f+=e*L;h+=e*q;l+=e*V;d+=e*F;v+=e*H;p+=e*G;w+=e*z;y+=e*B;b+=e*W;m+=e*K;_+=e*J;g+=e*Z;E+=e*Y;e=n[3];a+=e*C;c+=e*D;f+=e*k;h+=e*L;l+=e*q;d+=e*V;v+=e*F;p+=e*H;w+=e*G;y+=e*z;b+=e*B;m+=e*W;_+=e*K;g+=e*J;E+=e*Z;O+=e*Y;e=n[4];c+=e*C;f+=e*D;h+=e*k;l+=e*L;d+=e*q;v+=e*V;p+=e*F;w+=e*H;y+=e*G;b+=e*z;m+=e*B;_+=e*W;g+=e*K;E+=e*J;O+=e*Z;S+=e*Y;e=n[5];f+=e*C;h+=e*D;l+=e*k;d+=e*L;v+=e*q;p+=e*V;w+=e*F;y+=e*H;b+=e*G;m+=e*z;_+=e*B;g+=e*W;E+=e*K;O+=e*J;S+=e*Z;j+=e*Y;e=n[6];h+=e*C;l+=e*D;d+=e*k;v+=e*L;p+=e*q;w+=e*V;y+=e*F;b+=e*H;m+=e*G;_+=e*z;g+=e*B;E+=e*W;O+=e*K;S+=e*J;j+=e*Z;I+=e*Y;e=n[7];l+=e*C;d+=e*D;v+=e*k;p+=e*L;w+=e*q;y+=e*V;b+=e*F;m+=e*H;_+=e*G;g+=e*z;E+=e*B;O+=e*W;S+=e*K;j+=e*J;I+=e*Z;A+=e*Y;e=n[8];d+=e*C;v+=e*D;p+=e*k;w+=e*L;y+=e*q;b+=e*V;m+=e*F;_+=e*H;g+=e*G;E+=e*z;O+=e*B;S+=e*W;j+=e*K;I+=e*J;A+=e*Z;N+=e*Y;e=n[9];v+=e*C;p+=e*D;w+=e*k;y+=e*L;b+=e*q;m+=e*V;_+=e*F;g+=e*H;E+=e*G;O+=e*z;S+=e*B;j+=e*W;I+=e*K;A+=e*J;N+=e*Z;x+=e*Y;e=n[10];p+=e*C;w+=e*D;y+=e*k;b+=e*L;m+=e*q;_+=e*V;g+=e*F;E+=e*H;O+=e*G;S+=e*z;j+=e*B;I+=e*W;A+=e*K;N+=e*J;x+=e*Z;P+=e*Y;e=n[11];w+=e*C;y+=e*D;b+=e*k;m+=e*L;_+=e*q;g+=e*V;E+=e*F;O+=e*H;S+=e*G;j+=e*z;I+=e*B;A+=e*W;N+=e*K;x+=e*J;P+=e*Z;T+=e*Y;e=n[12];y+=e*C;b+=e*D;m+=e*k;_+=e*L;g+=e*q;E+=e*V;O+=e*F;S+=e*H;j+=e*G;I+=e*z;A+=e*B;N+=e*W;x+=e*K;P+=e*J;T+=e*Z;U+=e*Y;e=n[13];b+=e*C;m+=e*D;_+=e*k;g+=e*L;E+=e*q;O+=e*V;S+=e*F;j+=e*H;I+=e*G;A+=e*z;N+=e*B;x+=e*W;P+=e*K;T+=e*J;U+=e*Z;$+=e*Y;e=n[14];m+=e*C;_+=e*D;g+=e*k;E+=e*L;O+=e*q;S+=e*V;j+=e*F;I+=e*H;A+=e*G;N+=e*z;x+=e*B;P+=e*W;T+=e*K;U+=e*J;$+=e*Z;M+=e*Y;e=n[15];_+=e*C;g+=e*D;E+=e*k;O+=e*L;S+=e*q;j+=e*V;I+=e*F;A+=e*H;N+=e*G;x+=e*z;P+=e*B;T+=e*W;U+=e*K;$+=e*J;M+=e*Z;R+=e*Y;s+=38*g;o+=38*E;u+=38*O;a+=38*S;c+=38*j;f+=38*I;h+=38*A;l+=38*N;d+=38*x;v+=38*P;p+=38*T;w+=38*U;y+=38*$;b+=38*M;m+=38*R;i=1;e=s+i+65535;i=Math.floor(e/65536);s=e-i*65536;e=o+i+65535;i=Math.floor(e/65536);o=e-i*65536;e=u+i+65535;i=Math.floor(e/65536);u=e-i*65536;e=a+i+65535;i=Math.floor(e/65536);a=e-i*65536;e=c+i+65535;i=Math.floor(e/65536);c=e-i*65536;e=f+i+65535;i=Math.floor(e/65536);f=e-i*65536;e=h+i+65535;i=Math.floor(e/65536);h=e-i*65536;e=l+i+65535;i=Math.floor(e/65536);l=e-i*65536;e=d+i+65535;i=Math.floor(e/65536);d=e-i*65536;e=v+i+65535;i=Math.floor(e/65536);v=e-i*65536;e=p+i+65535;i=Math.floor(e/65536);p=e-i*65536;e=w+i+65535;i=Math.floor(e/65536);w=e-i*65536;e=y+i+65535;i=Math.floor(e/65536);y=e-i*65536;e=b+i+65535;i=Math.floor(e/65536);b=e-i*65536;e=m+i+65535;i=Math.floor(e/65536);m=e-i*65536;e=_+i+65535;i=Math.floor(e/65536);_=e-i*65536;s+=i-1+37*(i-1);i=1;e=s+i+65535;i=Math.floor(e/65536);s=e-i*65536;e=o+i+65535;i=Math.floor(e/65536);o=e-i*65536;e=u+i+65535;i=Math.floor(e/65536);u=e-i*65536;e=a+i+65535;i=Math.floor(e/65536);a=e-i*65536;e=c+i+65535;i=Math.floor(e/65536);c=e-i*65536;e=f+i+65535;i=Math.floor(e/65536);f=e-i*65536;e=h+i+65535;i=Math.floor(e/65536);h=e-i*65536;e=l+i+65535;i=Math.floor(e/65536);l=e-i*65536;e=d+i+65535;i=Math.floor(e/65536);d=e-i*65536;e=v+i+65535;i=Math.floor(e/65536);v=e-i*65536;e=p+i+65535;i=Math.floor(e/65536);p=e-i*65536;e=w+i+65535;i=Math.floor(e/65536);w=e-i*65536;e=y+i+65535;i=Math.floor(e/65536);y=e-i*65536;e=b+i+65535;i=Math.floor(e/65536);b=e-i*65536;e=m+i+65535;i=Math.floor(e/65536);m=e-i*65536;e=_+i+65535;i=Math.floor(e/65536);_=e-i*65536;s+=i-1+37*(i-1);t[0]=s;t[1]=o;t[2]=u;t[3]=a;t[4]=c;t[5]=f;t[6]=h;t[7]=l;t[8]=d;t[9]=v;t[10]=p;t[11]=w;t[12]=y;t[13]=b;t[14]=m;t[15]=_}function E(t,n){g(t,n,n)}function O(t,n){const e=r();let i;for(i=0;i<16;i++){e[i]=n[i]}for(i=253;i>=0;i--){E(e,e);if(i!==2&&i!==4){g(e,e,n)}}for(i=0;i<16;i++){t[i]=e[i]}}function S(t,n){const e=r();let i;for(i=0;i<16;i++){e[i]=n[i]}for(i=250;i>=0;i--){E(e,e);if(i!==1){g(e,e,n)}}for(i=0;i<16;i++){t[i]=e[i]}}function j(t,n){const e=r(),i=r(),s=r(),o=r(),a=r(),c=r(),f=r(),h=r(),l=r();_(e,t[1],t[0]);_(l,n[1],n[0]);g(e,e,l);m(i,t[0],t[1]);m(l,n[0],n[1]);g(i,i,l);g(s,t[3],n[3]);g(s,s,u);g(o,t[2],n[2]);m(o,o,o);_(a,i,e);_(c,o,s);m(f,o,s);m(h,i,e);g(t[0],a,c);g(t[1],h,f);g(t[2],f,c);g(t[3],a,h)}function I(t,n,r){for(let e=0;e<4;e++){d(t[e],n[e],r)}}function A(t,n){const e=r(),i=r(),s=r();O(s,n[2]);g(e,n[0],s);g(i,n[1],s);v(t,i);t[31]^=y(e)<<7}function N(t,n,r){h(t[0],i);h(t[1],s);h(t[2],s);h(t[3],i);for(let e=255;e>=0;--e){const i=r[e/8|0]>>(e&7)&1;I(t,n,i);j(n,t);j(t,t);I(t,n,i)}}function x(t,n){const e=[r(),r(),r(),r()];h(e[0],a);h(e[1],c);h(e[2],s);g(e[3],a,c);N(t,e,n)}function P(t){if(t.length!==n.SEED_LENGTH){throw new Error(`ed25519: seed must be ${n.SEED_LENGTH} bytes`)}const e=(0,Jr.hash)(t);e[0]&=248;e[31]&=127;e[31]|=64;const i=new Uint8Array(32);const s=[r(),r(),r(),r()];x(s,e);A(i,s);const o=new Uint8Array(64);o.set(t);o.set(i,32);return{publicKey:i,secretKey:o}}n.generateKeyPairFromSeed=P;function T(t){const n=(0,Kr.randomBytes)(32,t);const r=P(n);(0,Hr.wipe)(n);return r}n.generateKeyPair=T;function U(t){if(t.length!==n.SECRET_KEY_LENGTH){throw new Error(`ed25519: secret key must be ${n.SECRET_KEY_LENGTH} bytes`)}return new Uint8Array(t.subarray(32))}n.extractPublicKeyFromSecretKey=U;const $=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function M(t,n){let r;let e;let i;let s;for(e=63;e>=32;--e){r=0;for(i=e-32,s=e-12;i<s;++i){n[i]+=r-16*n[e]*$[i-(e-32)];r=Math.floor((n[i]+128)/256);n[i]-=r*256}n[i]+=r;n[e]=0}r=0;for(i=0;i<32;i++){n[i]+=r-(n[31]>>4)*$[i];r=n[i]>>8;n[i]&=255}for(i=0;i<32;i++){n[i]-=r*$[i]}for(e=0;e<32;e++){n[e+1]+=n[e]>>8;t[e]=n[e]&255}}function R(t){const n=new Float64Array(64);for(let r=0;r<64;r++){n[r]=t[r]}for(let n=0;n<64;n++){t[n]=0}M(t,n)}function C(t,n){const e=new Float64Array(64);const i=[r(),r(),r(),r()];const s=(0,Jr.hash)(t.subarray(0,32));s[0]&=248;s[31]&=127;s[31]|=64;const o=new Uint8Array(64);o.set(s.subarray(32),32);const u=new Jr.SHA512;u.update(o.subarray(32));u.update(n);const a=u.digest();u.clean();R(a);x(i,a);A(o,i);u.reset();u.update(o.subarray(0,32));u.update(t.subarray(32));u.update(n);const c=u.digest();R(c);for(let t=0;t<32;t++){e[t]=a[t]}for(let t=0;t<32;t++){for(let n=0;n<32;n++){e[t+n]+=c[t]*s[n]}}M(o.subarray(32),e);return o}n.sign=C;function D(t,n){const e=r(),u=r(),a=r(),c=r(),l=r(),d=r(),v=r();h(t[2],s);b(t[1],n);E(a,t[1]);g(c,a,o);_(a,a,t[2]);m(c,t[2],c);E(l,c);E(d,l);g(v,d,l);g(e,v,a);g(e,e,c);S(e,e);g(e,e,a);g(e,e,c);g(e,e,c);g(t[0],e,c);E(u,t[0]);g(u,u,c);if(w(u,a)){g(t[0],t[0],f)}E(u,t[0]);g(u,u,c);if(w(u,a)){return-1}if(y(t[0])===n[31]>>7){_(t[0],i,t[0])}g(t[3],t[0],t[1]);return 0}function k(t,e,i){const s=new Uint8Array(32);const o=[r(),r(),r(),r()];const u=[r(),r(),r(),r()];if(i.length!==n.SIGNATURE_LENGTH){throw new Error(`ed25519: signature must be ${n.SIGNATURE_LENGTH} bytes`)}if(D(u,t)){return false}const a=new Jr.SHA512;a.update(i.subarray(0,32));a.update(t);a.update(e);const c=a.digest();R(c);N(o,u,c);x(u,i.subarray(32));j(o,u);A(s,o);if(p(i,s)){return false}return true}n.verify=k;function L(t){let n=[r(),r(),r(),r()];if(D(n,t)){throw new Error("Ed25519: invalid public key")}let e=r();let i=r();let o=n[1];m(e,s,o);_(i,s,o);O(i,i);g(e,e,i);let u=new Uint8Array(32);v(u,e);return u}n.convertPublicKeyToX25519=L;function q(t){const n=(0,Jr.hash)(t.subarray(0,32));n[0]&=248;n[31]&=127;n[31]|=64;const r=new Uint8Array(n.subarray(0,32));(0,Hr.wipe)(n);return r}n.convertSecretKeyToX25519=q}));const Yr="EdDSA";const Qr="JWT";const Xr=".";const te="base64url";const ne="utf8";const re="utf8";const ee=":";const ie="did";const se="key";const oe="base58btc";const ue="z";const ae="K36";const ce=32;var fe=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});function r(t){if(globalThis.Buffer!=null){return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}return t}n.asUint8Array=r}));var he=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});function r(t=0){if(globalThis.Buffer!=null&&globalThis.Buffer.alloc!=null){return fe.asUint8Array(globalThis.Buffer.alloc(t))}return new Uint8Array(t)}function e(t=0){if(globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null){return fe.asUint8Array(globalThis.Buffer.allocUnsafe(t))}return new Uint8Array(t)}n.alloc=r;n.allocUnsafe=e}));var le=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});function r(t,n){if(!n){n=t.reduce(((t,n)=>t+n.length),0)}const r=he.allocUnsafe(n);let e=0;for(const n of t){r.set(n,e);e+=n.length}return fe.asUint8Array(r)}n.concat=r}));function de(t,n){if(t.length>=255){throw new TypeError("Alphabet too long")}var r=new Uint8Array(256);for(var e=0;e<r.length;e++){r[e]=255}for(var i=0;i<t.length;i++){var s=t.charAt(i);var o=s.charCodeAt(0);if(r[o]!==255){throw new TypeError(s+" is ambiguous")}r[o]=i}var u=t.length;var a=t.charAt(0);var c=Math.log(u)/Math.log(256);var f=Math.log(256)/Math.log(u);function h(n){if(n instanceof Uint8Array);else if(ArrayBuffer.isView(n)){n=new Uint8Array(n.buffer,n.byteOffset,n.byteLength)}else if(Array.isArray(n)){n=Uint8Array.from(n)}if(!(n instanceof Uint8Array)){throw new TypeError("Expected Uint8Array")}if(n.length===0){return""}var r=0;var e=0;var i=0;var s=n.length;while(i!==s&&n[i]===0){i++;r++}var o=(s-i)*f+1>>>0;var c=new Uint8Array(o);while(i!==s){var h=n[i];var l=0;for(var d=o-1;(h!==0||l<e)&&d!==-1;d--,l++){h+=256*c[d]>>>0;c[d]=h%u>>>0;h=h/u>>>0}if(h!==0){throw new Error("Non-zero carry")}e=l;i++}var v=o-e;while(v!==o&&c[v]===0){v++}var p=a.repeat(r);for(;v<o;++v){p+=t.charAt(c[v])}return p}function l(t){if(typeof t!=="string"){throw new TypeError("Expected String")}if(t.length===0){return new Uint8Array}var n=0;if(t[n]===" "){return}var e=0;var i=0;while(t[n]===a){e++;n++}var s=(t.length-n)*c+1>>>0;var o=new Uint8Array(s);while(t[n]){var f=r[t.charCodeAt(n)];if(f===255){return}var h=0;for(var l=s-1;(f!==0||h<i)&&l!==-1;l--,h++){f+=u*o[l]>>>0;o[l]=f%256>>>0;f=f/256>>>0}if(f!==0){throw new Error("Non-zero carry")}i=h;n++}if(t[n]===" "){return}var d=s-i;while(d!==s&&o[d]===0){d++}var v=new Uint8Array(e+(s-d));var p=e;while(d!==s){v[p++]=o[d++]}return v}function d(t){var r=l(t);if(r){return r}throw new Error(`Non-${n} character`)}return{encode:h,decodeUnsafe:l,decode:d}}var ve=de;var pe=ve;var we=pe;var ye=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});const r=new Uint8Array(0);const e=t=>t.reduce(((t,n)=>t+n.toString(16).padStart(2,"0")),"");const i=t=>{const n=t.match(/../g);return n?new Uint8Array(n.map((t=>parseInt(t,16)))):r};const s=(t,n)=>{if(t===n)return true;if(t.byteLength!==n.byteLength){return false}for(let r=0;r<t.byteLength;r++){if(t[r]!==n[r]){return false}}return true};const o=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t)){return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}throw new Error("Unknown type, must be binary type")};const u=t=>t instanceof ArrayBuffer||ArrayBuffer.isView(t);const a=t=>(new TextEncoder).encode(t);const c=t=>(new TextDecoder).decode(t);n.coerce=o;n.empty=r;n.equals=s;n.fromHex=i;n.fromString=a;n.isBinary=u;n.toHex=e;n.toString=c}));var be=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});class r{constructor(t,n,r){this.name=t;this.prefix=n;this.baseEncode=r}encode(t){if(t instanceof Uint8Array){return`${this.prefix}${this.baseEncode(t)}`}else{throw Error("Unknown type, must be binary type")}}}class e{constructor(t,n,r){this.name=t;this.prefix=n;if(n.codePointAt(0)===undefined){throw new Error("Invalid prefix character")}this.prefixCodePoint=n.codePointAt(0);this.baseDecode=r}decode(t){if(typeof t==="string"){if(t.codePointAt(0)!==this.prefixCodePoint){throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`)}return this.baseDecode(t.slice(this.prefix.length))}else{throw Error("Can only multibase decode strings")}}or(t){return s(this,t)}}class i{constructor(t){this.decoders=t}or(t){return s(this,t)}decode(t){const n=t[0];const r=this.decoders[n];if(r){return r.decode(t)}else{throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}}const s=(t,n)=>new i({...t.decoders||{[t.prefix]:t},...n.decoders||{[n.prefix]:n}});class o{constructor(t,n,i,s){this.name=t;this.prefix=n;this.baseEncode=i;this.baseDecode=s;this.encoder=new r(t,n,i);this.decoder=new e(t,n,s)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const u=({name:t,prefix:n,encode:r,decode:e})=>new o(t,n,r,e);const a=({prefix:t,name:n,alphabet:r})=>{const{encode:e,decode:i}=we(r,n);return u({prefix:t,name:n,encode:e,decode:t=>ye.coerce(i(t))})};const c=(t,n,r,e)=>{const i={};for(let t=0;t<n.length;++t){i[n[t]]=t}let s=t.length;while(t[s-1]==="="){--s}const o=new Uint8Array(s*r/8|0);let u=0;let a=0;let c=0;for(let n=0;n<s;++n){const s=i[t[n]];if(s===undefined){throw new SyntaxError(`Non-${e} character`)}a=a<<r|s;u+=r;if(u>=8){u-=8;o[c++]=255&a>>u}}if(u>=r||255&a<<8-u){throw new SyntaxError("Unexpected end of data")}return o};const f=(t,n,r)=>{const e=n[n.length-1]==="=";const i=(1<<r)-1;let s="";let o=0;let u=0;for(let e=0;e<t.length;++e){u=u<<8|t[e];o+=8;while(o>r){o-=r;s+=n[i&u>>o]}}if(o){s+=n[i&u<<r-o]}if(e){while(s.length*r&7){s+="="}}return s};const h=({name:t,prefix:n,bitsPerChar:r,alphabet:e})=>u({prefix:n,name:t,encode(t){return f(t,e,r)},decode(n){return c(n,e,r,t)}});n.Codec=o;n.baseX=a;n.from=u;n.or=s;n.rfc4648=h}));var me=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});const r=be.from({prefix:"\0",name:"identity",encode:t=>ye.toString(t),decode:t=>ye.fromString(t)});n.identity=r}));var _e=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});const r=be.rfc4648({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});n.base2=r}));var ge=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});const r=be.rfc4648({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});n.base8=r}));var Ee=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});const r=be.baseX({prefix:"9",name:"base10",alphabet:"0123456789"});n.base10=r}));var Oe=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});const r=be.rfc4648({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4});const e=be.rfc4648({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});n.base16=r;n.base16upper=e}));var Se=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});const r=be.rfc4648({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});const e=be.rfc4648({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});const i=be.rfc4648({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});const s=be.rfc4648({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});const o=be.rfc4648({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});const u=be.rfc4648({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});const a=be.rfc4648({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});const c=be.rfc4648({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});const f=be.rfc4648({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});n.base32=r;n.base32hex=o;n.base32hexpad=a;n.base32hexpadupper=c;n.base32hexupper=u;n.base32pad=i;n.base32padupper=s;n.base32upper=e;n.base32z=f}));var je=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});const r=be.baseX({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"});const e=be.baseX({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});n.base36=r;n.base36upper=e}));var Ie=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});const r=be.baseX({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});const e=be.baseX({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});n.base58btc=r;n.base58flickr=e}));var Ae=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});const r=be.rfc4648({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});const e=be.rfc4648({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6});const i=be.rfc4648({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6});const s=be.rfc4648({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});n.base64=r;n.base64pad=e;n.base64url=i;n.base64urlpad=s}));var Ne=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});const r=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂");const e=r.reduce(((t,n,r)=>{t[r]=n;return t}),[]);const i=r.reduce(((t,n,r)=>{t[n.codePointAt(0)]=r;return t}),[]);function s(t){return t.reduce(((t,n)=>{t+=e[n];return t}),"")}function o(t){const n=[];for(const r of t){const t=i[r.codePointAt(0)];if(t===undefined){throw new Error(`Non-base256emoji character: ${r}`)}n.push(t)}return new Uint8Array(n)}const u=be.from({prefix:"🚀",name:"base256emoji",encode:s,decode:o});n.base256emoji=u}));var xe=Me;var Pe=128,Te=127,Ue=~Te,$e=Math.pow(2,31);function Me(t,n,r){n=n||[];r=r||0;var e=r;while(t>=$e){n[r++]=t&255|Pe;t/=128}while(t&Ue){n[r++]=t&255|Pe;t>>>=7}n[r]=t|0;Me.bytes=r-e+1;return n}var Re=ke;var Ce=128,De=127;function ke(t,n){var r=0,n=n||0,e=0,i=n,s,o=t.length;do{if(i>=o){ke.bytes=0;throw new RangeError("Could not decode varint")}s=t[i++];r+=e<28?(s&De)<<e:(s&De)*Math.pow(2,e);e+=7}while(s>=Ce);ke.bytes=i-n;return r}var Le=Math.pow(2,7);var qe=Math.pow(2,14);var Ve=Math.pow(2,21);var Fe=Math.pow(2,28);var He=Math.pow(2,35);var Ge=Math.pow(2,42);var ze=Math.pow(2,49);var Be=Math.pow(2,56);var We=Math.pow(2,63);var Ke=function(t){return t<Le?1:t<qe?2:t<Ve?3:t<Fe?4:t<He?5:t<Ge?6:t<ze?7:t<Be?8:t<We?9:10};var Je={encode:xe,decode:Re,encodingLength:Ke};var Ze=Je;var Ye=Ze;var Qe=Ye;var Xe=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});const r=(t,n=0)=>{const r=Qe.decode(t,n);return[r,Qe.decode.bytes]};const e=(t,n,r=0)=>{Qe.encode(t,n,r);return n};const i=t=>Qe.encodingLength(t);n.decode=r;n.encodeTo=e;n.encodingLength=i}));var ti=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});const r=(t,n)=>{const r=n.byteLength;const e=Xe.encodingLength(t);const i=e+Xe.encodingLength(r);const o=new Uint8Array(i+r);Xe.encodeTo(t,o,0);Xe.encodeTo(r,o,e);o.set(n,i);return new s(t,r,n,o)};const e=t=>{const n=ye.coerce(t);const[r,e]=Xe.decode(n);const[i,o]=Xe.decode(n.subarray(e));const u=n.subarray(e+o);if(u.byteLength!==i){throw new Error("Incorrect length")}return new s(r,i,u,n)};const i=(t,n)=>{if(t===n){return true}else{return t.code===n.code&&t.size===n.size&&ye.equals(t.bytes,n.bytes)}};class s{constructor(t,n,r,e){this.code=t;this.size=n;this.digest=r;this.bytes=e}}n.Digest=s;n.create=r;n.decode=e;n.equals=i}));var ni=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});const r=({name:t,code:n,encode:r})=>new e(t,n,r);class e{constructor(t,n,r){this.name=t;this.code=n;this.encode=r}digest(t){if(t instanceof Uint8Array){const n=this.encode(t);return n instanceof Uint8Array?ti.create(this.code,n):n.then((t=>ti.create(this.code,t)))}else{throw Error("Unknown type, must be binary type")}}}n.Hasher=e;n.from=r}));var ri=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});const r=t=>async n=>new Uint8Array(await crypto.subtle.digest(t,n));const e=ni.from({name:"sha2-256",code:18,encode:r("SHA-256")});const i=ni.from({name:"sha2-512",code:19,encode:r("SHA-512")});n.sha256=e;n.sha512=i}));var ei=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});const r=0;const e="identity";const i=ye.coerce;const s=t=>ti.create(r,i(t));const o={code:r,name:e,encode:i,digest:s};n.identity=o}));var ii=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});const r="raw";const e=85;const i=t=>ye.coerce(t);const s=t=>ye.coerce(t);n.code=e;n.decode=s;n.encode=i;n.name=r}));var si=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});const r=new TextEncoder;const e=new TextDecoder;const i="json";const s=512;const o=t=>r.encode(JSON.stringify(t));const u=t=>JSON.parse(e.decode(t));n.code=s;n.decode=u;n.encode=o;n.name=i}));var oi=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});class r{constructor(t,n,r,e){this.code=n;this.version=t;this.multihash=r;this.bytes=e;this.byteOffset=e.byteOffset;this.byteLength=e.byteLength;this.asCID=this;this._baseCache=new Map;Object.defineProperties(this,{byteOffset:h,byteLength:h,code:f,version:f,multihash:f,bytes:f,_baseCache:h,asCID:h})}toV0(){switch(this.version){case 0:{return this}default:{const{code:t,multihash:n}=this;if(t!==o){throw new Error("Cannot convert a non dag-pb CID to CIDv0")}if(n.code!==u){throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0")}return r.createV0(n)}}}toV1(){switch(this.version){case 0:{const{code:t,digest:n}=this.multihash;const e=ti.create(t,n);return r.createV1(this.code,e)}case 1:{return this}default:{throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}}equals(t){return t&&this.code===t.code&&this.version===t.version&&ti.equals(this.multihash,t.multihash)}toString(t){const{bytes:n,version:r,_baseCache:e}=this;switch(r){case 0:return i(n,e,t||Ie.base58btc.encoder);default:return s(n,e,t||Se.base32.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(t){d(/^0\.0/,v);return!!(t&&(t[c]||t.asCID===t))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(t){if(t instanceof r){return t}else if(t!=null&&t.asCID===t){const{version:n,code:e,multihash:i,bytes:s}=t;return new r(n,e,i,s||a(n,e,i.bytes))}else if(t!=null&&t[c]===true){const{version:n,multihash:e,code:i}=t;const s=ti.decode(e);return r.create(n,i,s)}else{return null}}static create(t,n,e){if(typeof n!=="number"){throw new Error("String codecs are no longer supported")}switch(t){case 0:{if(n!==o){throw new Error(`Version 0 CID must use dag-pb (code: ${o}) block encoding`)}else{return new r(t,n,e,e.bytes)}}case 1:{const i=a(t,n,e.bytes);return new r(t,n,e,i)}default:{throw new Error("Invalid version")}}}static createV0(t){return r.create(0,o,t)}static createV1(t,n){return r.create(1,t,n)}static decode(t){const[n,e]=r.decodeFirst(t);if(e.length){throw new Error("Incorrect length")}return n}static decodeFirst(t){const n=r.inspectBytes(t);const e=n.size-n.multihashSize;const i=ye.coerce(t.subarray(e,e+n.multihashSize));if(i.byteLength!==n.multihashSize){throw new Error("Incorrect length")}const s=i.subarray(n.multihashSize-n.digestSize);const o=new ti.Digest(n.multihashCode,n.digestSize,s,i);const u=n.version===0?r.createV0(o):r.createV1(n.codec,o);return[u,t.subarray(n.size)]}static inspectBytes(t){let n=0;const r=()=>{const[r,e]=Xe.decode(t.subarray(n));n+=e;return r};let e=r();let i=o;if(e===18){e=0;n=0}else if(e===1){i=r()}if(e!==0&&e!==1){throw new RangeError(`Invalid CID version ${e}`)}const s=n;const u=r();const a=r();const c=n+a;const f=c-s;return{version:e,codec:i,multihashCode:u,digestSize:a,multihashSize:f,size:c}}static parse(t,n){const[i,s]=e(t,n);const o=r.decode(s);o._baseCache.set(i,t);return o}}const e=(t,n)=>{switch(t[0]){case"Q":{const r=n||Ie.base58btc;return[Ie.base58btc.prefix,r.decode(`${Ie.base58btc.prefix}${t}`)]}case Ie.base58btc.prefix:{const r=n||Ie.base58btc;return[Ie.base58btc.prefix,r.decode(t)]}case Se.base32.prefix:{const r=n||Se.base32;return[Se.base32.prefix,r.decode(t)]}default:{if(n==null){throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided")}return[t[0],n.decode(t)]}}};const i=(t,n,r)=>{const{prefix:e}=r;if(e!==Ie.base58btc.prefix){throw Error(`Cannot string encode V0 in ${r.name} encoding`)}const i=n.get(e);if(i==null){const i=r.encode(t).slice(1);n.set(e,i);return i}else{return i}};const s=(t,n,r)=>{const{prefix:e}=r;const i=n.get(e);if(i==null){const i=r.encode(t);n.set(e,i);return i}else{return i}};const o=112;const u=18;const a=(t,n,r)=>{const e=Xe.encodingLength(t);const i=e+Xe.encodingLength(n);const s=new Uint8Array(i+r.byteLength);Xe.encodeTo(t,s,0);Xe.encodeTo(n,s,e);s.set(r,i);return s};const c=Symbol.for("@ipld/js-cid/CID");const f={writable:false,configurable:false,enumerable:true};const h={writable:false,enumerable:false,configurable:false};const l="0.0.0-dev";const d=(t,n)=>{if(t.test(l)){console.warn(n)}else{throw new Error(n)}};const v=`CID.isCID(v) is deprecated and will be removed in the next major release.\nFollowing code pattern:\n\nif (CID.isCID(value)) {\n  doSomethingWithCID(value)\n}\n\nIs replaced with:\n\nconst cid = CID.asCID(value)\nif (cid) {\n  // Make sure to use cid instead of value\n  doSomethingWithCID(cid)\n}\n`;n.CID=r}));t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});n.CID=oi.CID;n.varint=Xe;n.bytes=ye;n.hasher=ni;n.digest=ti}));var ui=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});const r={...me,..._e,...ge,...Ee,...Oe,...Se,...je,...Ie,...Ae,...Ne};const e={...ri,...ei};const i={raw:ii,json:si};n.CID=oi.CID;n.hasher=ni;n.digest=ti;n.varint=Xe;n.bytes=ye;n.bases=r;n.codecs=i;n.hashes=e}));function ai(t,n,r,e){return{name:t,prefix:n,encoder:{name:t,prefix:n,encode:r},decoder:{decode:e}}}const ci=ai("utf8","u",(t=>{const n=new TextDecoder("utf8");return"u"+n.decode(t)}),(t=>{const n=new TextEncoder;return n.encode(t.substring(1))}));const fi=ai("ascii","a",(t=>{let n="a";for(let r=0;r<t.length;r++){n+=String.fromCharCode(t[r])}return n}),(t=>{t=t.substring(1);const n=he.allocUnsafe(t.length);for(let r=0;r<t.length;r++){n[r]=t.charCodeAt(r)}return n}));const hi={utf8:ci,"utf-8":ci,hex:ui.bases.base16,latin1:fi,ascii:fi,binary:fi,...ui.bases};var li=hi;var di=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});function r(t,n="utf8"){const r=li[n];if(!r){throw new Error(`Unsupported encoding "${n}"`)}if((n==="utf8"||n==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null){return globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8")}return r.encoder.encode(t).substring(1)}n.toString=r}));var vi=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});function r(t,n="utf8"){const r=li[n];if(!r){throw new Error(`Unsupported encoding "${n}"`)}if((n==="utf8"||n==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null){return fe.asUint8Array(globalThis.Buffer.from(t,"utf-8"))}return r.decoder.decode(`${r.prefix}${t}`)}n.fromString=r}));const pi=t=>JSON.stringify(t,((t,n)=>typeof n==="bigint"?n.toString()+"n":n));function wi(t){return typeof t==="string"?t:pi(t)||""}function yi(t){return di.toString(vi.fromString(wi(t),ne),te)}function bi(t){const n=vi.fromString(ae,oe);const r=ue+di.toString(le.concat([n,t]),oe);return[ie,se,r].join(ee)}function mi(t){return di.toString(t,te)}function _i(t){return vi.fromString([yi(t.header),yi(t.payload)].join(Xr),re)}function gi(t){return[yi(t.header),yi(t.payload),mi(t.signature)].join(Xr)}function Ei(t=Kr.randomBytes(ce)){return Zr.generateKeyPairFromSeed(t)}async function Oi(t,n,r,e,i=wn.fromMiliseconds(Date.now())){const s={alg:Yr,typ:Qr};const o=bi(e.publicKey);const u=i+r;const a={iss:o,sub:t,aud:n,iat:i,exp:u};const c=_i({header:s,payload:a});const f=Zr.sign(e.secretKey,c);return gi({header:s,payload:a,signature:f})}var Si=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});var r=20;function e(t,n,e){var i=1634760805;var s=857760878;var o=2036477234;var u=1797285236;var a=e[3]<<24|e[2]<<16|e[1]<<8|e[0];var c=e[7]<<24|e[6]<<16|e[5]<<8|e[4];var f=e[11]<<24|e[10]<<16|e[9]<<8|e[8];var h=e[15]<<24|e[14]<<16|e[13]<<8|e[12];var l=e[19]<<24|e[18]<<16|e[17]<<8|e[16];var d=e[23]<<24|e[22]<<16|e[21]<<8|e[20];var v=e[27]<<24|e[26]<<16|e[25]<<8|e[24];var p=e[31]<<24|e[30]<<16|e[29]<<8|e[28];var w=n[3]<<24|n[2]<<16|n[1]<<8|n[0];var y=n[7]<<24|n[6]<<16|n[5]<<8|n[4];var b=n[11]<<24|n[10]<<16|n[9]<<8|n[8];var m=n[15]<<24|n[14]<<16|n[13]<<8|n[12];var _=i;var g=s;var E=o;var O=u;var S=a;var j=c;var I=f;var A=h;var N=l;var x=d;var P=v;var T=p;var U=w;var $=y;var M=b;var R=m;for(var C=0;C<r;C+=2){_=_+S|0;U^=_;U=U>>>32-16|U<<16;N=N+U|0;S^=N;S=S>>>32-12|S<<12;g=g+j|0;$^=g;$=$>>>32-16|$<<16;x=x+$|0;j^=x;j=j>>>32-12|j<<12;E=E+I|0;M^=E;M=M>>>32-16|M<<16;P=P+M|0;I^=P;I=I>>>32-12|I<<12;O=O+A|0;R^=O;R=R>>>32-16|R<<16;T=T+R|0;A^=T;A=A>>>32-12|A<<12;E=E+I|0;M^=E;M=M>>>32-8|M<<8;P=P+M|0;I^=P;I=I>>>32-7|I<<7;O=O+A|0;R^=O;R=R>>>32-8|R<<8;T=T+R|0;A^=T;A=A>>>32-7|A<<7;g=g+j|0;$^=g;$=$>>>32-8|$<<8;x=x+$|0;j^=x;j=j>>>32-7|j<<7;_=_+S|0;U^=_;U=U>>>32-8|U<<8;N=N+U|0;S^=N;S=S>>>32-7|S<<7;_=_+j|0;R^=_;R=R>>>32-16|R<<16;P=P+R|0;j^=P;j=j>>>32-12|j<<12;g=g+I|0;U^=g;U=U>>>32-16|U<<16;T=T+U|0;I^=T;I=I>>>32-12|I<<12;E=E+A|0;$^=E;$=$>>>32-16|$<<16;N=N+$|0;A^=N;A=A>>>32-12|A<<12;O=O+S|0;M^=O;M=M>>>32-16|M<<16;x=x+M|0;S^=x;S=S>>>32-12|S<<12;E=E+A|0;$^=E;$=$>>>32-8|$<<8;N=N+$|0;A^=N;A=A>>>32-7|A<<7;O=O+S|0;M^=O;M=M>>>32-8|M<<8;x=x+M|0;S^=x;S=S>>>32-7|S<<7;g=g+I|0;U^=g;U=U>>>32-8|U<<8;T=T+U|0;I^=T;I=I>>>32-7|I<<7;_=_+j|0;R^=_;R=R>>>32-8|R<<8;P=P+R|0;j^=P;j=j>>>32-7|j<<7}Wr.writeUint32LE(_+i|0,t,0);Wr.writeUint32LE(g+s|0,t,4);Wr.writeUint32LE(E+o|0,t,8);Wr.writeUint32LE(O+u|0,t,12);Wr.writeUint32LE(S+a|0,t,16);Wr.writeUint32LE(j+c|0,t,20);Wr.writeUint32LE(I+f|0,t,24);Wr.writeUint32LE(A+h|0,t,28);Wr.writeUint32LE(N+l|0,t,32);Wr.writeUint32LE(x+d|0,t,36);Wr.writeUint32LE(P+v|0,t,40);Wr.writeUint32LE(T+p|0,t,44);Wr.writeUint32LE(U+w|0,t,48);Wr.writeUint32LE($+y|0,t,52);Wr.writeUint32LE(M+b|0,t,56);Wr.writeUint32LE(R+m|0,t,60)}function i(t,n,r,i,s){if(s===void 0){s=0}if(t.length!==32){throw new Error("ChaCha: key size must be 32 bytes")}if(i.length<r.length){throw new Error("ChaCha: destination is shorter than source")}var u;var a;if(s===0){if(n.length!==8&&n.length!==12){throw new Error("ChaCha nonce must be 8 or 12 bytes")}u=new Uint8Array(16);a=u.length-n.length;u.set(n,a)}else{if(n.length!==16){throw new Error("ChaCha nonce with counter must be 16 bytes")}u=n;a=s}var c=new Uint8Array(64);for(var f=0;f<r.length;f+=64){e(c,u,t);for(var h=f;h<f+64&&h<r.length;h++){i[h]=r[h]^c[h-f]}o(u,0,a)}Hr.wipe(c);if(s===0){Hr.wipe(u)}return i}n.streamXOR=i;function s(t,n,r,e){if(e===void 0){e=0}Hr.wipe(r);return i(t,n,r,r,e)}n.stream=s;function o(t,n,r){var e=1;while(r--){e=e+(t[n]&255)|0;t[n]=e&255;e>>>=8;n++}if(e>0){throw new Error("ChaCha: counter overflow")}}}));var ji=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});function r(t,n,r){return~(t-1)&n|t-1&r}n.select=r;function e(t,n){return(t|0)-(n|0)-1>>>31&1}n.lessOrEqual=e;function i(t,n){if(t.length!==n.length){return 0}var r=0;for(var e=0;e<t.length;e++){r|=t[e]^n[e]}return 1&r-1>>>8}n.compare=i;function s(t,n){if(t.length===0||n.length===0){return false}return i(t,n)!==0}n.equal=s}));var Ii=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});n.DIGEST_LENGTH=16;var r=function(){function t(t){this.digestLength=n.DIGEST_LENGTH;this._buffer=new Uint8Array(16);this._r=new Uint16Array(10);this._h=new Uint16Array(10);this._pad=new Uint16Array(8);this._leftover=0;this._fin=0;this._finished=false;var r=t[0]|t[1]<<8;this._r[0]=r&8191;var e=t[2]|t[3]<<8;this._r[1]=(r>>>13|e<<3)&8191;var i=t[4]|t[5]<<8;this._r[2]=(e>>>10|i<<6)&7939;var s=t[6]|t[7]<<8;this._r[3]=(i>>>7|s<<9)&8191;var o=t[8]|t[9]<<8;this._r[4]=(s>>>4|o<<12)&255;this._r[5]=o>>>1&8190;var u=t[10]|t[11]<<8;this._r[6]=(o>>>14|u<<2)&8191;var a=t[12]|t[13]<<8;this._r[7]=(u>>>11|a<<5)&8065;var c=t[14]|t[15]<<8;this._r[8]=(a>>>8|c<<8)&8191;this._r[9]=c>>>5&127;this._pad[0]=t[16]|t[17]<<8;this._pad[1]=t[18]|t[19]<<8;this._pad[2]=t[20]|t[21]<<8;this._pad[3]=t[22]|t[23]<<8;this._pad[4]=t[24]|t[25]<<8;this._pad[5]=t[26]|t[27]<<8;this._pad[6]=t[28]|t[29]<<8;this._pad[7]=t[30]|t[31]<<8}t.prototype._blocks=function(t,n,r){var e=this._fin?0:1<<11;var i=this._h[0],s=this._h[1],o=this._h[2],u=this._h[3],a=this._h[4],c=this._h[5],f=this._h[6],h=this._h[7],l=this._h[8],d=this._h[9];var v=this._r[0],p=this._r[1],w=this._r[2],y=this._r[3],b=this._r[4],m=this._r[5],_=this._r[6],g=this._r[7],E=this._r[8],O=this._r[9];while(r>=16){var S=t[n+0]|t[n+1]<<8;i+=S&8191;var j=t[n+2]|t[n+3]<<8;s+=(S>>>13|j<<3)&8191;var I=t[n+4]|t[n+5]<<8;o+=(j>>>10|I<<6)&8191;var A=t[n+6]|t[n+7]<<8;u+=(I>>>7|A<<9)&8191;var N=t[n+8]|t[n+9]<<8;a+=(A>>>4|N<<12)&8191;c+=N>>>1&8191;var x=t[n+10]|t[n+11]<<8;f+=(N>>>14|x<<2)&8191;var P=t[n+12]|t[n+13]<<8;h+=(x>>>11|P<<5)&8191;var T=t[n+14]|t[n+15]<<8;l+=(P>>>8|T<<8)&8191;d+=T>>>5|e;var U=0;var $=U;$+=i*v;$+=s*(5*O);$+=o*(5*E);$+=u*(5*g);$+=a*(5*_);U=$>>>13;$&=8191;$+=c*(5*m);$+=f*(5*b);$+=h*(5*y);$+=l*(5*w);$+=d*(5*p);U+=$>>>13;$&=8191;var M=U;M+=i*p;M+=s*v;M+=o*(5*O);M+=u*(5*E);M+=a*(5*g);U=M>>>13;M&=8191;M+=c*(5*_);M+=f*(5*m);M+=h*(5*b);M+=l*(5*y);M+=d*(5*w);U+=M>>>13;M&=8191;var R=U;R+=i*w;R+=s*p;R+=o*v;R+=u*(5*O);R+=a*(5*E);U=R>>>13;R&=8191;R+=c*(5*g);R+=f*(5*_);R+=h*(5*m);R+=l*(5*b);R+=d*(5*y);U+=R>>>13;R&=8191;var C=U;C+=i*y;C+=s*w;C+=o*p;C+=u*v;C+=a*(5*O);U=C>>>13;C&=8191;C+=c*(5*E);C+=f*(5*g);C+=h*(5*_);C+=l*(5*m);C+=d*(5*b);U+=C>>>13;C&=8191;var D=U;D+=i*b;D+=s*y;D+=o*w;D+=u*p;D+=a*v;U=D>>>13;D&=8191;D+=c*(5*O);D+=f*(5*E);D+=h*(5*g);D+=l*(5*_);D+=d*(5*m);U+=D>>>13;D&=8191;var k=U;k+=i*m;k+=s*b;k+=o*y;k+=u*w;k+=a*p;U=k>>>13;k&=8191;k+=c*v;k+=f*(5*O);k+=h*(5*E);k+=l*(5*g);k+=d*(5*_);U+=k>>>13;k&=8191;var L=U;L+=i*_;L+=s*m;L+=o*b;L+=u*y;L+=a*w;U=L>>>13;L&=8191;L+=c*p;L+=f*v;L+=h*(5*O);L+=l*(5*E);L+=d*(5*g);U+=L>>>13;L&=8191;var q=U;q+=i*g;q+=s*_;q+=o*m;q+=u*b;q+=a*y;U=q>>>13;q&=8191;q+=c*w;q+=f*p;q+=h*v;q+=l*(5*O);q+=d*(5*E);U+=q>>>13;q&=8191;var V=U;V+=i*E;V+=s*g;V+=o*_;V+=u*m;V+=a*b;U=V>>>13;V&=8191;V+=c*y;V+=f*w;V+=h*p;V+=l*v;V+=d*(5*O);U+=V>>>13;V&=8191;var F=U;F+=i*O;F+=s*E;F+=o*g;F+=u*_;F+=a*m;U=F>>>13;F&=8191;F+=c*b;F+=f*y;F+=h*w;F+=l*p;F+=d*v;U+=F>>>13;F&=8191;U=(U<<2)+U|0;U=U+$|0;$=U&8191;U=U>>>13;M+=U;i=$;s=M;o=R;u=C;a=D;c=k;f=L;h=q;l=V;d=F;n+=16;r-=16}this._h[0]=i;this._h[1]=s;this._h[2]=o;this._h[3]=u;this._h[4]=a;this._h[5]=c;this._h[6]=f;this._h[7]=h;this._h[8]=l;this._h[9]=d};t.prototype.finish=function(t,n){if(n===void 0){n=0}var r=new Uint16Array(10);var e;var i;var s;var o;if(this._leftover){o=this._leftover;this._buffer[o++]=1;for(;o<16;o++){this._buffer[o]=0}this._fin=1;this._blocks(this._buffer,0,16)}e=this._h[1]>>>13;this._h[1]&=8191;for(o=2;o<10;o++){this._h[o]+=e;e=this._h[o]>>>13;this._h[o]&=8191}this._h[0]+=e*5;e=this._h[0]>>>13;this._h[0]&=8191;this._h[1]+=e;e=this._h[1]>>>13;this._h[1]&=8191;this._h[2]+=e;r[0]=this._h[0]+5;e=r[0]>>>13;r[0]&=8191;for(o=1;o<10;o++){r[o]=this._h[o]+e;e=r[o]>>>13;r[o]&=8191}r[9]-=1<<13;i=(e^1)-1;for(o=0;o<10;o++){r[o]&=i}i=~i;for(o=0;o<10;o++){this._h[o]=this._h[o]&i|r[o]}this._h[0]=(this._h[0]|this._h[1]<<13)&65535;this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535;this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535;this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535;this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535;this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535;this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535;this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535;s=this._h[0]+this._pad[0];this._h[0]=s&65535;for(o=1;o<8;o++){s=(this._h[o]+this._pad[o]|0)+(s>>>16)|0;this._h[o]=s&65535}t[n+0]=this._h[0]>>>0;t[n+1]=this._h[0]>>>8;t[n+2]=this._h[1]>>>0;t[n+3]=this._h[1]>>>8;t[n+4]=this._h[2]>>>0;t[n+5]=this._h[2]>>>8;t[n+6]=this._h[3]>>>0;t[n+7]=this._h[3]>>>8;t[n+8]=this._h[4]>>>0;t[n+9]=this._h[4]>>>8;t[n+10]=this._h[5]>>>0;t[n+11]=this._h[5]>>>8;t[n+12]=this._h[6]>>>0;t[n+13]=this._h[6]>>>8;t[n+14]=this._h[7]>>>0;t[n+15]=this._h[7]>>>8;this._finished=true;return this};t.prototype.update=function(t){var n=0;var r=t.length;var e;if(this._leftover){e=16-this._leftover;if(e>r){e=r}for(var i=0;i<e;i++){this._buffer[this._leftover+i]=t[n+i]}r-=e;n+=e;this._leftover+=e;if(this._leftover<16){return this}this._blocks(this._buffer,0,16);this._leftover=0}if(r>=16){e=r-r%16;this._blocks(t,n,e);n+=e;r-=e}if(r){for(var i=0;i<r;i++){this._buffer[this._leftover+i]=t[n+i]}this._leftover+=r}return this};t.prototype.digest=function(){if(this._finished){throw new Error("Poly1305 was finished")}var t=new Uint8Array(16);this.finish(t);return t};t.prototype.clean=function(){Hr.wipe(this._buffer);Hr.wipe(this._r);Hr.wipe(this._h);Hr.wipe(this._pad);this._leftover=0;this._fin=0;this._finished=true;return this};return t}();n.Poly1305=r;function e(t,n){var e=new r(t);e.update(n);var i=e.digest();e.clean();return i}n.oneTimeAuth=e;function i(t,r){if(t.length!==n.DIGEST_LENGTH||r.length!==n.DIGEST_LENGTH){return false}return ji.equal(t,r)}n.equal=i}));var Ai=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});n.KEY_LENGTH=32;n.NONCE_LENGTH=12;n.TAG_LENGTH=16;var r=new Uint8Array(16);var e=function(){function t(t){this.nonceLength=n.NONCE_LENGTH;this.tagLength=n.TAG_LENGTH;if(t.length!==n.KEY_LENGTH){throw new Error("ChaCha20Poly1305 needs 32-byte key")}this._key=new Uint8Array(t)}t.prototype.seal=function(t,n,r,e){if(t.length>16){throw new Error("ChaCha20Poly1305: incorrect nonce length")}var i=new Uint8Array(16);i.set(t,i.length-t.length);var s=new Uint8Array(32);Si.stream(this._key,i,s,4);var o=n.length+this.tagLength;var u;if(e){if(e.length!==o){throw new Error("ChaCha20Poly1305: incorrect destination length")}u=e}else{u=new Uint8Array(o)}Si.streamXOR(this._key,i,n,u,4);this._authenticate(u.subarray(u.length-this.tagLength,u.length),s,u.subarray(0,u.length-this.tagLength),r);Hr.wipe(i);return u};t.prototype.open=function(t,n,r,e){if(t.length>16){throw new Error("ChaCha20Poly1305: incorrect nonce length")}if(n.length<this.tagLength){return null}var i=new Uint8Array(16);i.set(t,i.length-t.length);var s=new Uint8Array(32);Si.stream(this._key,i,s,4);var o=new Uint8Array(this.tagLength);this._authenticate(o,s,n.subarray(0,n.length-this.tagLength),r);if(!ji.equal(o,n.subarray(n.length-this.tagLength,n.length))){return null}var u=n.length-this.tagLength;var a;if(e){if(e.length!==u){throw new Error("ChaCha20Poly1305: incorrect destination length")}a=e}else{a=new Uint8Array(u)}Si.streamXOR(this._key,i,n.subarray(0,n.length-this.tagLength),a,4);Hr.wipe(i);return a};t.prototype.clean=function(){Hr.wipe(this._key);return this};t.prototype._authenticate=function(t,n,e,i){var s=new Ii.Poly1305(n);if(i){s.update(i);if(i.length%16>0){s.update(r.subarray(i.length%16))}}s.update(e);if(e.length%16>0){s.update(r.subarray(e.length%16))}var o=new Uint8Array(8);if(i){Wr.writeUint64LE(i.length,o)}s.update(o);Wr.writeUint64LE(e.length,o);s.update(o);var u=s.digest();for(var a=0;a<u.length;a++){t[a]=u[a]}s.clean();Hr.wipe(u);Hr.wipe(o)};return t}();n.ChaCha20Poly1305=e}));var Ni=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});function r(t){return typeof t.saveState!=="undefined"&&typeof t.restoreState!=="undefined"&&typeof t.cleanSavedState!=="undefined"}n.isSerializableHash=r}));var xi=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});var r=function(){function t(t,n){this._finished=false;this._inner=new t;this._outer=new t;this.blockSize=this._outer.blockSize;this.digestLength=this._outer.digestLength;var r=new Uint8Array(this.blockSize);if(n.length>this.blockSize){this._inner.update(n).finish(r).clean()}else{r.set(n)}for(var e=0;e<r.length;e++){r[e]^=54}this._inner.update(r);for(var e=0;e<r.length;e++){r[e]^=54^92}this._outer.update(r);if(Ni.isSerializableHash(this._inner)&&Ni.isSerializableHash(this._outer)){this._innerKeyedState=this._inner.saveState();this._outerKeyedState=this._outer.saveState()}Hr.wipe(r)}t.prototype.reset=function(){if(!Ni.isSerializableHash(this._inner)||!Ni.isSerializableHash(this._outer)){throw new Error("hmac: can't reset() because hash doesn't implement restoreState()")}this._inner.restoreState(this._innerKeyedState);this._outer.restoreState(this._outerKeyedState);this._finished=false;return this};t.prototype.clean=function(){if(Ni.isSerializableHash(this._inner)){this._inner.cleanSavedState(this._innerKeyedState)}if(Ni.isSerializableHash(this._outer)){this._outer.cleanSavedState(this._outerKeyedState)}this._inner.clean();this._outer.clean()};t.prototype.update=function(t){this._inner.update(t);return this};t.prototype.finish=function(t){if(this._finished){this._outer.finish(t);return this}this._inner.finish(t);this._outer.update(t.subarray(0,this.digestLength)).finish(t);this._finished=true;return this};t.prototype.digest=function(){var t=new Uint8Array(this.digestLength);this.finish(t);return t};t.prototype.saveState=function(){if(!Ni.isSerializableHash(this._inner)){throw new Error("hmac: can't saveState() because hash doesn't implement it")}return this._inner.saveState()};t.prototype.restoreState=function(t){if(!Ni.isSerializableHash(this._inner)||!Ni.isSerializableHash(this._outer)){throw new Error("hmac: can't restoreState() because hash doesn't implement it")}this._inner.restoreState(t);this._outer.restoreState(this._outerKeyedState);this._finished=false;return this};t.prototype.cleanSavedState=function(t){if(!Ni.isSerializableHash(this._inner)){throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it")}this._inner.cleanSavedState(t)};return t}();n.HMAC=r;function e(t,n,e){var i=new r(t,n);i.update(e);var s=i.digest();i.clean();return s}n.hmac=e;n.equal=ji.equal}));var Pi=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});var r=function(){function t(t,n,r,e){if(r===void 0){r=new Uint8Array(0)}this._counter=new Uint8Array(1);this._hash=t;this._info=e;var i=xi.hmac(this._hash,r,n);this._hmac=new xi.HMAC(t,i);this._buffer=new Uint8Array(this._hmac.digestLength);this._bufpos=this._buffer.length}t.prototype._fillBuffer=function(){this._counter[0]++;var t=this._counter[0];if(t===0){throw new Error("hkdf: cannot expand more")}this._hmac.reset();if(t>1){this._hmac.update(this._buffer)}if(this._info){this._hmac.update(this._info)}this._hmac.update(this._counter);this._hmac.finish(this._buffer);this._bufpos=0};t.prototype.expand=function(t){var n=new Uint8Array(t);for(var r=0;r<n.length;r++){if(this._bufpos===this._buffer.length){this._fillBuffer()}n[r]=this._buffer[this._bufpos++]}return n};t.prototype.clean=function(){this._hmac.clean();Hr.wipe(this._buffer);Hr.wipe(this._counter);this._bufpos=0};return t}();n.HKDF=r}));var Ti=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});n.DIGEST_LENGTH=32;n.BLOCK_SIZE=64;var r=function(){function t(){this.digestLength=n.DIGEST_LENGTH;this.blockSize=n.BLOCK_SIZE;this._state=new Int32Array(8);this._temp=new Int32Array(64);this._buffer=new Uint8Array(128);this._bufferLength=0;this._bytesHashed=0;this._finished=false;this.reset()}t.prototype._initState=function(){this._state[0]=1779033703;this._state[1]=3144134277;this._state[2]=1013904242;this._state[3]=2773480762;this._state[4]=1359893119;this._state[5]=2600822924;this._state[6]=528734635;this._state[7]=1541459225};t.prototype.reset=function(){this._initState();this._bufferLength=0;this._bytesHashed=0;this._finished=false;return this};t.prototype.clean=function(){Hr.wipe(this._buffer);Hr.wipe(this._temp);this.reset()};t.prototype.update=function(t,n){if(n===void 0){n=t.length}if(this._finished){throw new Error("SHA256: can't update because hash was finished.")}var r=0;this._bytesHashed+=n;if(this._bufferLength>0){while(this._bufferLength<this.blockSize&&n>0){this._buffer[this._bufferLength++]=t[r++];n--}if(this._bufferLength===this.blockSize){i(this._temp,this._state,this._buffer,0,this.blockSize);this._bufferLength=0}}if(n>=this.blockSize){r=i(this._temp,this._state,t,r,n);n%=this.blockSize}while(n>0){this._buffer[this._bufferLength++]=t[r++];n--}return this};t.prototype.finish=function(t){if(!this._finished){var n=this._bytesHashed;var r=this._bufferLength;var e=n/536870912|0;var s=n<<3;var o=n%64<56?64:128;this._buffer[r]=128;for(var u=r+1;u<o-8;u++){this._buffer[u]=0}Wr.writeUint32BE(e,this._buffer,o-8);Wr.writeUint32BE(s,this._buffer,o-4);i(this._temp,this._state,this._buffer,0,o);this._finished=true}for(var u=0;u<this.digestLength/4;u++){Wr.writeUint32BE(this._state[u],t,u*4)}return this};t.prototype.digest=function(){var t=new Uint8Array(this.digestLength);this.finish(t);return t};t.prototype.saveState=function(){if(this._finished){throw new Error("SHA256: cannot save finished state")}return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):undefined,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}};t.prototype.restoreState=function(t){this._state.set(t.state);this._bufferLength=t.bufferLength;if(t.buffer){this._buffer.set(t.buffer)}this._bytesHashed=t.bytesHashed;this._finished=false;return this};t.prototype.cleanSavedState=function(t){Hr.wipe(t.state);if(t.buffer){Hr.wipe(t.buffer)}t.bufferLength=0;t.bytesHashed=0};return t}();n.SHA256=r;var e=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function i(t,n,r,i,s){while(s>=64){var o=n[0];var u=n[1];var a=n[2];var c=n[3];var f=n[4];var h=n[5];var l=n[6];var d=n[7];for(var v=0;v<16;v++){var p=i+v*4;t[v]=Wr.readUint32BE(r,p)}for(var v=16;v<64;v++){var w=t[v-2];var y=(w>>>17|w<<32-17)^(w>>>19|w<<32-19)^w>>>10;w=t[v-15];var b=(w>>>7|w<<32-7)^(w>>>18|w<<32-18)^w>>>3;t[v]=(y+t[v-7]|0)+(b+t[v-16]|0)}for(var v=0;v<64;v++){var y=(((f>>>6|f<<32-6)^(f>>>11|f<<32-11)^(f>>>25|f<<32-25))+(f&h^~f&l)|0)+(d+(e[v]+t[v]|0)|0)|0;var b=((o>>>2|o<<32-2)^(o>>>13|o<<32-13)^(o>>>22|o<<32-22))+(o&u^o&a^u&a)|0;d=l;l=h;h=f;f=c+y|0;c=a;a=u;u=o;o=y+b|0}n[0]+=o;n[1]+=u;n[2]+=a;n[3]+=c;n[4]+=f;n[5]+=h;n[6]+=l;n[7]+=d;i+=64;s-=64}return i}function s(t){var n=new r;n.update(t);var e=n.digest();n.clean();return e}n.hash=s}));var Ui=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});n.sharedKey=n.generateKeyPair=n.generateKeyPairFromSeed=n.scalarMultBase=n.scalarMult=n.SHARED_KEY_LENGTH=n.SECRET_KEY_LENGTH=n.PUBLIC_KEY_LENGTH=void 0;n.PUBLIC_KEY_LENGTH=32;n.SECRET_KEY_LENGTH=32;n.SHARED_KEY_LENGTH=32;function r(t){const n=new Float64Array(16);if(t){for(let r=0;r<t.length;r++){n[r]=t[r]}}return n}const e=new Uint8Array(32);e[0]=9;const i=r([56129,1]);function s(t){let n=1;for(let r=0;r<16;r++){let e=t[r]+n+65535;n=Math.floor(e/65536);t[r]=e-n*65536}t[0]+=n-1+37*(n-1)}function o(t,n,r){const e=~(r-1);for(let r=0;r<16;r++){const i=e&(t[r]^n[r]);t[r]^=i;n[r]^=i}}function u(t,n){const e=r();const i=r();for(let t=0;t<16;t++){i[t]=n[t]}s(i);s(i);s(i);for(let t=0;t<2;t++){e[0]=i[0]-65517;for(let t=1;t<15;t++){e[t]=i[t]-65535-(e[t-1]>>16&1);e[t-1]&=65535}e[15]=i[15]-32767-(e[14]>>16&1);const t=e[15]>>16&1;e[14]&=65535;o(i,e,1-t)}for(let n=0;n<16;n++){t[2*n]=i[n]&255;t[2*n+1]=i[n]>>8}}function a(t,n){for(let r=0;r<16;r++){t[r]=n[2*r]+(n[2*r+1]<<8)}t[15]&=32767}function c(t,n,r){for(let e=0;e<16;e++){t[e]=n[e]+r[e]}}function f(t,n,r){for(let e=0;e<16;e++){t[e]=n[e]-r[e]}}function h(t,n,r){let e,i,s=0,o=0,u=0,a=0,c=0,f=0,h=0,l=0,d=0,v=0,p=0,w=0,y=0,b=0,m=0,_=0,g=0,E=0,O=0,S=0,j=0,I=0,A=0,N=0,x=0,P=0,T=0,U=0,$=0,M=0,R=0,C=r[0],D=r[1],k=r[2],L=r[3],q=r[4],V=r[5],F=r[6],H=r[7],G=r[8],z=r[9],B=r[10],W=r[11],K=r[12],J=r[13],Z=r[14],Y=r[15];e=n[0];s+=e*C;o+=e*D;u+=e*k;a+=e*L;c+=e*q;f+=e*V;h+=e*F;l+=e*H;d+=e*G;v+=e*z;p+=e*B;w+=e*W;y+=e*K;b+=e*J;m+=e*Z;_+=e*Y;e=n[1];o+=e*C;u+=e*D;a+=e*k;c+=e*L;f+=e*q;h+=e*V;l+=e*F;d+=e*H;v+=e*G;p+=e*z;w+=e*B;y+=e*W;b+=e*K;m+=e*J;_+=e*Z;g+=e*Y;e=n[2];u+=e*C;a+=e*D;c+=e*k;f+=e*L;h+=e*q;l+=e*V;d+=e*F;v+=e*H;p+=e*G;w+=e*z;y+=e*B;b+=e*W;m+=e*K;_+=e*J;g+=e*Z;E+=e*Y;e=n[3];a+=e*C;c+=e*D;f+=e*k;h+=e*L;l+=e*q;d+=e*V;v+=e*F;p+=e*H;w+=e*G;y+=e*z;b+=e*B;m+=e*W;_+=e*K;g+=e*J;E+=e*Z;O+=e*Y;e=n[4];c+=e*C;f+=e*D;h+=e*k;l+=e*L;d+=e*q;v+=e*V;p+=e*F;w+=e*H;y+=e*G;b+=e*z;m+=e*B;_+=e*W;g+=e*K;E+=e*J;O+=e*Z;S+=e*Y;e=n[5];f+=e*C;h+=e*D;l+=e*k;d+=e*L;v+=e*q;p+=e*V;w+=e*F;y+=e*H;b+=e*G;m+=e*z;_+=e*B;g+=e*W;E+=e*K;O+=e*J;S+=e*Z;j+=e*Y;e=n[6];h+=e*C;l+=e*D;d+=e*k;v+=e*L;p+=e*q;w+=e*V;y+=e*F;b+=e*H;m+=e*G;_+=e*z;g+=e*B;E+=e*W;O+=e*K;S+=e*J;j+=e*Z;I+=e*Y;e=n[7];l+=e*C;d+=e*D;v+=e*k;p+=e*L;w+=e*q;y+=e*V;b+=e*F;m+=e*H;_+=e*G;g+=e*z;E+=e*B;O+=e*W;S+=e*K;j+=e*J;I+=e*Z;A+=e*Y;e=n[8];d+=e*C;v+=e*D;p+=e*k;w+=e*L;y+=e*q;b+=e*V;m+=e*F;_+=e*H;g+=e*G;E+=e*z;O+=e*B;S+=e*W;j+=e*K;I+=e*J;A+=e*Z;N+=e*Y;e=n[9];v+=e*C;p+=e*D;w+=e*k;y+=e*L;b+=e*q;m+=e*V;_+=e*F;g+=e*H;E+=e*G;O+=e*z;S+=e*B;j+=e*W;I+=e*K;A+=e*J;N+=e*Z;x+=e*Y;e=n[10];p+=e*C;w+=e*D;y+=e*k;b+=e*L;m+=e*q;_+=e*V;g+=e*F;E+=e*H;O+=e*G;S+=e*z;j+=e*B;I+=e*W;A+=e*K;N+=e*J;x+=e*Z;P+=e*Y;e=n[11];w+=e*C;y+=e*D;b+=e*k;m+=e*L;_+=e*q;g+=e*V;E+=e*F;O+=e*H;S+=e*G;j+=e*z;I+=e*B;A+=e*W;N+=e*K;x+=e*J;P+=e*Z;T+=e*Y;e=n[12];y+=e*C;b+=e*D;m+=e*k;_+=e*L;g+=e*q;E+=e*V;O+=e*F;S+=e*H;j+=e*G;I+=e*z;A+=e*B;N+=e*W;x+=e*K;P+=e*J;T+=e*Z;U+=e*Y;e=n[13];b+=e*C;m+=e*D;_+=e*k;g+=e*L;E+=e*q;O+=e*V;S+=e*F;j+=e*H;I+=e*G;A+=e*z;N+=e*B;x+=e*W;P+=e*K;T+=e*J;U+=e*Z;$+=e*Y;e=n[14];m+=e*C;_+=e*D;g+=e*k;E+=e*L;O+=e*q;S+=e*V;j+=e*F;I+=e*H;A+=e*G;N+=e*z;x+=e*B;P+=e*W;T+=e*K;U+=e*J;$+=e*Z;M+=e*Y;e=n[15];_+=e*C;g+=e*D;E+=e*k;O+=e*L;S+=e*q;j+=e*V;I+=e*F;A+=e*H;N+=e*G;x+=e*z;P+=e*B;T+=e*W;U+=e*K;$+=e*J;M+=e*Z;R+=e*Y;s+=38*g;o+=38*E;u+=38*O;a+=38*S;c+=38*j;f+=38*I;h+=38*A;l+=38*N;d+=38*x;v+=38*P;p+=38*T;w+=38*U;y+=38*$;b+=38*M;m+=38*R;i=1;e=s+i+65535;i=Math.floor(e/65536);s=e-i*65536;e=o+i+65535;i=Math.floor(e/65536);o=e-i*65536;e=u+i+65535;i=Math.floor(e/65536);u=e-i*65536;e=a+i+65535;i=Math.floor(e/65536);a=e-i*65536;e=c+i+65535;i=Math.floor(e/65536);c=e-i*65536;e=f+i+65535;i=Math.floor(e/65536);f=e-i*65536;e=h+i+65535;i=Math.floor(e/65536);h=e-i*65536;e=l+i+65535;i=Math.floor(e/65536);l=e-i*65536;e=d+i+65535;i=Math.floor(e/65536);d=e-i*65536;e=v+i+65535;i=Math.floor(e/65536);v=e-i*65536;e=p+i+65535;i=Math.floor(e/65536);p=e-i*65536;e=w+i+65535;i=Math.floor(e/65536);w=e-i*65536;e=y+i+65535;i=Math.floor(e/65536);y=e-i*65536;e=b+i+65535;i=Math.floor(e/65536);b=e-i*65536;e=m+i+65535;i=Math.floor(e/65536);m=e-i*65536;e=_+i+65535;i=Math.floor(e/65536);_=e-i*65536;s+=i-1+37*(i-1);i=1;e=s+i+65535;i=Math.floor(e/65536);s=e-i*65536;e=o+i+65535;i=Math.floor(e/65536);o=e-i*65536;e=u+i+65535;i=Math.floor(e/65536);u=e-i*65536;e=a+i+65535;i=Math.floor(e/65536);a=e-i*65536;e=c+i+65535;i=Math.floor(e/65536);c=e-i*65536;e=f+i+65535;i=Math.floor(e/65536);f=e-i*65536;e=h+i+65535;i=Math.floor(e/65536);h=e-i*65536;e=l+i+65535;i=Math.floor(e/65536);l=e-i*65536;e=d+i+65535;i=Math.floor(e/65536);d=e-i*65536;e=v+i+65535;i=Math.floor(e/65536);v=e-i*65536;e=p+i+65535;i=Math.floor(e/65536);p=e-i*65536;e=w+i+65535;i=Math.floor(e/65536);w=e-i*65536;e=y+i+65535;i=Math.floor(e/65536);y=e-i*65536;e=b+i+65535;i=Math.floor(e/65536);b=e-i*65536;e=m+i+65535;i=Math.floor(e/65536);m=e-i*65536;e=_+i+65535;i=Math.floor(e/65536);_=e-i*65536;s+=i-1+37*(i-1);t[0]=s;t[1]=o;t[2]=u;t[3]=a;t[4]=c;t[5]=f;t[6]=h;t[7]=l;t[8]=d;t[9]=v;t[10]=p;t[11]=w;t[12]=y;t[13]=b;t[14]=m;t[15]=_}function l(t,n){h(t,n,n)}function d(t,n){const e=r();for(let t=0;t<16;t++){e[t]=n[t]}for(let t=253;t>=0;t--){l(e,e);if(t!==2&&t!==4){h(e,e,n)}}for(let n=0;n<16;n++){t[n]=e[n]}}function v(t,n){const e=new Uint8Array(32);const s=new Float64Array(80);const v=r(),p=r(),w=r(),y=r(),b=r(),m=r();for(let n=0;n<31;n++){e[n]=t[n]}e[31]=t[31]&127|64;e[0]&=248;a(s,n);for(let t=0;t<16;t++){p[t]=s[t]}v[0]=y[0]=1;for(let t=254;t>=0;--t){const n=e[t>>>3]>>>(t&7)&1;o(v,p,n);o(w,y,n);c(b,v,w);f(v,v,w);c(w,p,y);f(p,p,y);l(y,b);l(m,v);h(v,w,v);h(w,p,b);c(b,v,w);f(v,v,w);l(p,v);f(w,y,m);h(v,w,i);c(v,v,y);h(w,w,v);h(v,y,m);h(y,p,s);l(p,b);o(v,p,n);o(w,y,n)}for(let t=0;t<16;t++){s[t+16]=v[t];s[t+32]=w[t];s[t+48]=p[t];s[t+64]=y[t]}const _=s.subarray(32);const g=s.subarray(16);d(_,_);h(g,g,_);const E=new Uint8Array(32);u(E,g);return E}n.scalarMult=v;function p(t){return v(t,e)}n.scalarMultBase=p;function w(t){if(t.length!==n.SECRET_KEY_LENGTH){throw new Error(`x25519: seed must be ${n.SECRET_KEY_LENGTH} bytes`)}const r=new Uint8Array(t);const e=p(r);return{publicKey:e,secretKey:r}}n.generateKeyPairFromSeed=w;function y(t){const n=(0,Kr.randomBytes)(32,t);const r=w(n);(0,Hr.wipe)(n);return r}n.generateKeyPair=y;function b(t,r,e=false){if(t.length!==n.PUBLIC_KEY_LENGTH){throw new Error("X25519: incorrect secret key length")}if(r.length!==n.PUBLIC_KEY_LENGTH){throw new Error("X25519: incorrect public key length")}const i=v(t,r);if(e){let t=0;for(let n=0;n<i.length;n++){t|=i[n]}if(t===0){throw new Error("X25519: invalid shared key")}}return i}n.sharedKey=b}));var $i=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});function r(t,n){for(let r=0;r<t.byteLength;r++){if(t[r]<n[r]){return-1}if(t[r]>n[r]){return 1}}if(t.byteLength>n.byteLength){return 1}if(t.byteLength<n.byteLength){return-1}return 0}n.compare=r}));var Mi=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});function r(t){if(globalThis.Buffer!=null){return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}return t}n.asUint8Array=r}));var Ri=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});function r(t=0){if(globalThis.Buffer!=null&&globalThis.Buffer.alloc!=null){return Mi.asUint8Array(globalThis.Buffer.alloc(t))}return new Uint8Array(t)}function e(t=0){if(globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null){return Mi.asUint8Array(globalThis.Buffer.allocUnsafe(t))}return new Uint8Array(t)}n.alloc=r;n.allocUnsafe=e}));var Ci=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});function r(t,n){if(!n){n=t.reduce(((t,n)=>t+n.length),0)}const r=Ri.allocUnsafe(n);let e=0;for(const n of t){r.set(n,e);e+=n.length}return Mi.asUint8Array(r)}n.concat=r}));var Di=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});function r(t,n){if(t===n){return true}if(t.byteLength!==n.byteLength){return false}for(let r=0;r<t.byteLength;r++){if(t[r]!==n[r]){return false}}return true}n.equals=r}));function ki(t,n,r,e){return{name:t,prefix:n,encoder:{name:t,prefix:n,encode:r},decoder:{decode:e}}}const Li=ki("utf8","u",(t=>{const n=new TextDecoder("utf8");return"u"+n.decode(t)}),(t=>{const n=new TextEncoder;return n.encode(t.substring(1))}));const qi=ki("ascii","a",(t=>{let n="a";for(let r=0;r<t.length;r++){n+=String.fromCharCode(t[r])}return n}),(t=>{t=t.substring(1);const n=Ri.allocUnsafe(t.length);for(let r=0;r<t.length;r++){n[r]=t.charCodeAt(r)}return n}));const Vi={utf8:Li,"utf-8":Li,hex:ui.bases.base16,latin1:qi,ascii:qi,binary:qi,...ui.bases};var Fi=Vi;var Hi=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});function r(t,n="utf8"){const r=Fi[n];if(!r){throw new Error(`Unsupported encoding "${n}"`)}if((n==="utf8"||n==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null){return Mi.asUint8Array(globalThis.Buffer.from(t,"utf-8"))}return r.decoder.decode(`${r.prefix}${t}`)}n.fromString=r}));var Gi=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});function r(t,n="utf8"){const r=Fi[n];if(!r){throw new Error(`Unsupported encoding "${n}"`)}if((n==="utf8"||n==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null){return globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8")}return r.encoder.encode(t).substring(1)}n.toString=r}));var zi=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});function r(t,n){if(t.length!==n.length){throw new Error("Inputs should have the same length")}const r=Ri.allocUnsafe(t.length);for(let e=0;e<t.length;e++){r[e]=t[e]^n[e]}return Mi.asUint8Array(r)}n.xor=r}));var Bi=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});n.compare=$i.compare;n.concat=Ci.concat;n.equals=Di.equals;n.fromString=Hi.fromString;n.toString=Gi.toString;n.xor=zi.xor}));var Wi=undefined&&undefined.__spreadArray||function(t,n,r){if(r||arguments.length===2)for(var e=0,i=n.length,s;e<i;e++){if(s||!(e in n)){if(!s)s=Array.prototype.slice.call(n,0,e);s[e]=n[e]}}return t.concat(s||Array.prototype.slice.call(n))};var Ki=function(){function t(t,n,r){this.name=t;this.version=n;this.os=r;this.type="browser"}return t}();var Ji=function(){function t(t){this.version=t;this.type="node";this.name="node";this.os=o.platform}return t}();var Zi=function(){function t(t,n,r,e){this.name=t;this.version=n;this.os=r;this.bot=e;this.type="bot-device"}return t}();var Yi=function(){function t(){this.type="bot";this.bot=true;this.name="bot";this.version=null;this.os=null}return t}();var Qi=function(){function t(){this.type="react-native";this.name="react-native";this.version=null;this.os=null}return t}();var Xi=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/;var ts=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/;var ns=3;var rs=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",Xi]];var es=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function is(t){if(!!t){return os(t)}if(typeof document==="undefined"&&typeof navigator!=="undefined"&&navigator.product==="ReactNative"){return new Qi}if(typeof navigator!=="undefined"){return os(navigator.userAgent)}return as()}function ss(t){return t!==""&&rs.reduce((function(n,r){var e=r[0],i=r[1];if(n){return n}var s=i.exec(t);return!!s&&[e,s]}),false)}function os(t){var n=ss(t);if(!n){return null}var r=n[0],e=n[1];if(r==="searchbot"){return new Yi}var i=e[1]&&e[1].split(".").join("_").split("_").slice(0,3);if(i){if(i.length<ns){i=Wi(Wi([],i,true),cs(ns-i.length),true)}}else{i=[]}var s=i.join(".");var o=us(t);var u=ts.exec(t);if(u&&u[1]){return new Zi(r,s,o,u[1])}return new Ki(r,s,o)}function us(t){for(var n=0,r=es.length;n<r;n++){var e=es[n],i=e[0],s=e[1];var o=s.exec(t);if(o){return i}}return null}function as(){var t=typeof o!=="undefined"&&o.version;return t?new Ji(o.version.slice(1)):null}function cs(t){var n=[];for(var r=0;r<t;r++){n.push("0")}return n}var fs=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});n.getLocalStorage=n.getLocalStorageOrThrow=n.getCrypto=n.getCryptoOrThrow=n.getLocation=n.getLocationOrThrow=n.getNavigator=n.getNavigatorOrThrow=n.getDocument=n.getDocumentOrThrow=n.getFromWindowOrThrow=n.getFromWindow=void 0;function r(t){let n=undefined;if(typeof window!=="undefined"&&typeof window[t]!=="undefined"){n=window[t]}return n}n.getFromWindow=r;function e(t){const n=r(t);if(!n){throw new Error(`${t} is not defined in Window`)}return n}n.getFromWindowOrThrow=e;function i(){return e("document")}n.getDocumentOrThrow=i;function s(){return r("document")}n.getDocument=s;function o(){return e("navigator")}n.getNavigatorOrThrow=o;function u(){return r("navigator")}n.getNavigator=u;function a(){return e("location")}n.getLocationOrThrow=a;function c(){return r("location")}n.getLocation=c;function f(){return e("crypto")}n.getCryptoOrThrow=f;function h(){return r("crypto")}n.getCrypto=h;function l(){return e("localStorage")}n.getLocalStorageOrThrow=l;function d(){return r("localStorage")}n.getLocalStorage=d}));var hs=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});n.getWindowMetadata=void 0;function r(){let t;let n;try{t=fs.getDocumentOrThrow();n=fs.getLocationOrThrow()}catch(t){return null}function r(){const r=t.getElementsByTagName("link");const e=[];for(let t=0;t<r.length;t++){const i=r[t];const s=i.getAttribute("rel");if(s){if(s.toLowerCase().indexOf("icon")>-1){const t=i.getAttribute("href");if(t){if(t.toLowerCase().indexOf("https:")===-1&&t.toLowerCase().indexOf("http:")===-1&&t.indexOf("//")!==0){let r=n.protocol+"//"+n.host;if(t.indexOf("/")===0){r+=t}else{const e=n.pathname.split("/");e.pop();const i=e.join("/");r+=i+"/"+t}e.push(r)}else if(t.indexOf("//")===0){const r=n.protocol+t;e.push(r)}else{e.push(t)}}}}}return e}function e(...n){const r=t.getElementsByTagName("meta");for(let t=0;t<r.length;t++){const e=r[t];const i=["itemprop","property","name"].map((t=>e.getAttribute(t))).filter((t=>{if(t){return n.includes(t)}return false}));if(i.length&&i){const t=e.getAttribute("content");if(t){return t}}}return""}function i(){let n=e("name","og:site_name","og:title","twitter:title");if(!n){n=t.title}return n}function s(){const t=e("description","og:description","twitter:description","keywords");return t}const o=i();const u=s();const a=n.origin;const c=r();const f={description:u,url:a,icons:c,name:o};return f}n.getWindowMetadata=r}));var ls=t=>encodeURIComponent(t).replace(/[!'()*]/g,(t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`));var ds="%[a-f0-9]{2}";var vs=new RegExp("("+ds+")|([^%]+?)","gi");var ps=new RegExp("("+ds+")+","gi");function ws(t,n){try{return[decodeURIComponent(t.join(""))]}catch(t){}if(t.length===1){return t}n=n||1;var r=t.slice(0,n);var e=t.slice(n);return Array.prototype.concat.call([],ws(r),ws(e))}function ys(t){try{return decodeURIComponent(t)}catch(e){var n=t.match(vs)||[];for(var r=1;r<n.length;r++){t=ws(n,r).join("");n=t.match(vs)||[]}return t}}function bs(t){var n={"%FE%FF":"��","%FF%FE":"��"};var r=ps.exec(t);while(r){try{n[r[0]]=decodeURIComponent(r[0])}catch(t){var e=ys(r[0]);if(e!==r[0]){n[r[0]]=e}}r=ps.exec(t)}n["%C2"]="�";var i=Object.keys(n);for(var s=0;s<i.length;s++){var o=i[s];t=t.replace(new RegExp(o,"g"),n[o])}return t}var ms=function(t){if(typeof t!=="string"){throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`")}try{t=t.replace(/\+/g," ");return decodeURIComponent(t)}catch(n){return bs(t)}};var _s=(t,n)=>{if(!(typeof t==="string"&&typeof n==="string")){throw new TypeError("Expected the arguments to be of type `string`")}if(n===""){return[t]}const r=t.indexOf(n);if(r===-1){return[t]}return[t.slice(0,r),t.slice(r+n.length)]};var gs=function(t,n){var r={};var e=Object.keys(t);var i=Array.isArray(n);for(var s=0;s<e.length;s++){var o=e[s];var u=t[o];if(i?n.indexOf(o)!==-1:n(o,u,t)){r[o]=u}}return r};var Es=t((function(t,n){const r=t=>t===null||t===undefined;const e=Symbol("encodeFragmentIdentifier");function i(t){switch(t.arrayFormat){case"index":return n=>(r,e)=>{const i=r.length;if(e===undefined||t.skipNull&&e===null||t.skipEmptyString&&e===""){return r}if(e===null){return[...r,[u(n,t),"[",i,"]"].join("")]}return[...r,[u(n,t),"[",u(i,t),"]=",u(e,t)].join("")]};case"bracket":return n=>(r,e)=>{if(e===undefined||t.skipNull&&e===null||t.skipEmptyString&&e===""){return r}if(e===null){return[...r,[u(n,t),"[]"].join("")]}return[...r,[u(n,t),"[]=",u(e,t)].join("")]};case"colon-list-separator":return n=>(r,e)=>{if(e===undefined||t.skipNull&&e===null||t.skipEmptyString&&e===""){return r}if(e===null){return[...r,[u(n,t),":list="].join("")]}return[...r,[u(n,t),":list=",u(e,t)].join("")]};case"comma":case"separator":case"bracket-separator":{const n=t.arrayFormat==="bracket-separator"?"[]=":"=";return r=>(e,i)=>{if(i===undefined||t.skipNull&&i===null||t.skipEmptyString&&i===""){return e}i=i===null?"":i;if(e.length===0){return[[u(r,t),n,u(i,t)].join("")]}return[[e,u(i,t)].join(t.arrayFormatSeparator)]}}default:return n=>(r,e)=>{if(e===undefined||t.skipNull&&e===null||t.skipEmptyString&&e===""){return r}if(e===null){return[...r,u(n,t)]}return[...r,[u(n,t),"=",u(e,t)].join("")]}}}function s(t){let n;switch(t.arrayFormat){case"index":return(t,r,e)=>{n=/\[(\d*)\]$/.exec(t);t=t.replace(/\[\d*\]$/,"");if(!n){e[t]=r;return}if(e[t]===undefined){e[t]={}}e[t][n[1]]=r};case"bracket":return(t,r,e)=>{n=/(\[\])$/.exec(t);t=t.replace(/\[\]$/,"");if(!n){e[t]=r;return}if(e[t]===undefined){e[t]=[r];return}e[t]=[].concat(e[t],r)};case"colon-list-separator":return(t,r,e)=>{n=/(:list)$/.exec(t);t=t.replace(/:list$/,"");if(!n){e[t]=r;return}if(e[t]===undefined){e[t]=[r];return}e[t]=[].concat(e[t],r)};case"comma":case"separator":return(n,r,e)=>{const i=typeof r==="string"&&r.includes(t.arrayFormatSeparator);const s=typeof r==="string"&&!i&&a(r,t).includes(t.arrayFormatSeparator);r=s?a(r,t):r;const o=i||s?r.split(t.arrayFormatSeparator).map((n=>a(n,t))):r===null?r:a(r,t);e[n]=o};case"bracket-separator":return(n,r,e)=>{const i=/(\[\])$/.test(n);n=n.replace(/\[\]$/,"");if(!i){e[n]=r?a(r,t):r;return}const s=r===null?[]:r.split(t.arrayFormatSeparator).map((n=>a(n,t)));if(e[n]===undefined){e[n]=s;return}e[n]=[].concat(e[n],s)};default:return(t,n,r)=>{if(r[t]===undefined){r[t]=n;return}r[t]=[].concat(r[t],n)}}}function o(t){if(typeof t!=="string"||t.length!==1){throw new TypeError("arrayFormatSeparator must be single character string")}}function u(t,n){if(n.encode){return n.strict?ls(t):encodeURIComponent(t)}return t}function a(t,n){if(n.decode){return ms(t)}return t}function c(t){if(Array.isArray(t)){return t.sort()}if(typeof t==="object"){return c(Object.keys(t)).sort(((t,n)=>Number(t)-Number(n))).map((n=>t[n]))}return t}function f(t){const n=t.indexOf("#");if(n!==-1){t=t.slice(0,n)}return t}function h(t){let n="";const r=t.indexOf("#");if(r!==-1){n=t.slice(r)}return n}function l(t){t=f(t);const n=t.indexOf("?");if(n===-1){return""}return t.slice(n+1)}function d(t,n){if(n.parseNumbers&&!Number.isNaN(Number(t))&&(typeof t==="string"&&t.trim()!=="")){t=Number(t)}else if(n.parseBooleans&&t!==null&&(t.toLowerCase()==="true"||t.toLowerCase()==="false")){t=t.toLowerCase()==="true"}return t}function v(t,n){n=Object.assign({decode:true,sort:true,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:false,parseBooleans:false},n);o(n.arrayFormatSeparator);const r=s(n);const e=Object.create(null);if(typeof t!=="string"){return e}t=t.trim().replace(/^[?#&]/,"");if(!t){return e}for(const i of t.split("&")){if(i===""){continue}let[t,s]=_s(n.decode?i.replace(/\+/g," "):i,"=");s=s===undefined?null:["comma","separator","bracket-separator"].includes(n.arrayFormat)?s:a(s,n);r(a(t,n),s,e)}for(const t of Object.keys(e)){const r=e[t];if(typeof r==="object"&&r!==null){for(const t of Object.keys(r)){r[t]=d(r[t],n)}}else{e[t]=d(r,n)}}if(n.sort===false){return e}return(n.sort===true?Object.keys(e).sort():Object.keys(e).sort(n.sort)).reduce(((t,n)=>{const r=e[n];if(Boolean(r)&&typeof r==="object"&&!Array.isArray(r)){t[n]=c(r)}else{t[n]=r}return t}),Object.create(null))}n.extract=l;n.parse=v;n.stringify=(t,n)=>{if(!t){return""}n=Object.assign({encode:true,strict:true,arrayFormat:"none",arrayFormatSeparator:","},n);o(n.arrayFormatSeparator);const e=e=>n.skipNull&&r(t[e])||n.skipEmptyString&&t[e]==="";const s=i(n);const a={};for(const n of Object.keys(t)){if(!e(n)){a[n]=t[n]}}const c=Object.keys(a);if(n.sort!==false){c.sort(n.sort)}return c.map((r=>{const e=t[r];if(e===undefined){return""}if(e===null){return u(r,n)}if(Array.isArray(e)){if(e.length===0&&n.arrayFormat==="bracket-separator"){return u(r,n)+"[]"}return e.reduce(s(r),[]).join("&")}return u(r,n)+"="+u(e,n)})).filter((t=>t.length>0)).join("&")};n.parseUrl=(t,n)=>{n=Object.assign({decode:true},n);const[r,e]=_s(t,"#");return Object.assign({url:r.split("?")[0]||"",query:v(l(t),n)},n&&n.parseFragmentIdentifier&&e?{fragmentIdentifier:a(e,n)}:{})};n.stringifyUrl=(t,r)=>{r=Object.assign({encode:true,strict:true,[e]:true},r);const i=f(t.url).split("?")[0]||"";const s=n.extract(t.url);const o=n.parse(s,{sort:false});const a=Object.assign(o,t.query);let c=n.stringify(a,r);if(c){c=`?${c}`}let l=h(t.url);if(t.fragmentIdentifier){l=`#${r[e]?u(t.fragmentIdentifier,r):t.fragmentIdentifier}`}return`${i}${c}${l}`};n.pick=(t,r,i)=>{i=Object.assign({parseFragmentIdentifier:true,[e]:false},i);const{url:s,query:o,fragmentIdentifier:u}=n.parseUrl(t,i);return n.stringifyUrl({url:s,query:gs(o,r),fragmentIdentifier:u},i)};n.exclude=(t,r,e)=>{const i=Array.isArray(r)?t=>!r.includes(t):(t,n)=>!r(t,n);return n.pick(t,i,e)}}));const Os={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}};function Ss(t,n){return t.includes(":")?[t]:n.chains||[]}const js="base10",Is="base16",As="base64pad",Ns="utf8",xs=0,Ps=1,Ts=0,Us=1,$s=12,Ms=32;function Rs(){const t=Ui.generateKeyPair();return{privateKey:Bi.toString(t.secretKey,Is),publicKey:Bi.toString(t.publicKey,Is)}}function Cs(){const t=Kr.randomBytes(Ms);return Bi.toString(t,Is)}function Ds(t,n){const r=Ui.sharedKey(Bi.fromString(t,Is),Bi.fromString(n,Is)),e=new Pi.HKDF(Ti.SHA256,r).expand(Ms);return Bi.toString(e,Is)}function ks(t){const n=Ti.hash(Bi.fromString(t,Is));return Bi.toString(n,Is)}function Ls(t){const n=Ti.hash(Bi.fromString(t,Ns));return Bi.toString(n,Is)}function qs(t){return Bi.fromString(`${t}`,js)}function Vs(t){return Number(Bi.toString(t,js))}function Fs(t){const n=qs(typeof t.type<"u"?t.type:xs);if(Vs(n)===Ps&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof t.senderPublicKey<"u"?Bi.fromString(t.senderPublicKey,Is):void 0,e=typeof t.iv<"u"?Bi.fromString(t.iv,Is):Kr.randomBytes($s),i=new Ai.ChaCha20Poly1305(Bi.fromString(t.symKey,Is)).seal(e,Bi.fromString(t.message,Ns));return Gs({type:n,sealed:i,iv:e,senderPublicKey:r})}function Hs(t){const n=new Ai.ChaCha20Poly1305(Bi.fromString(t.symKey,Is)),{sealed:r,iv:e}=zs(t.encoded),i=n.open(e,r);if(i===null)throw new Error("Failed to decrypt");return Bi.toString(i,Ns)}function Gs(t){if(Vs(t.type)===Ps){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return Bi.toString(Bi.concat([t.type,t.senderPublicKey,t.iv,t.sealed]),As)}return Bi.toString(Bi.concat([t.type,t.iv,t.sealed]),As)}function zs(t){const n=Bi.fromString(t,As),r=n.slice(Ts,Us),e=Us;if(Vs(r)===Ps){const t=e+Ms,i=t+$s,s=n.slice(e,t),o=n.slice(t,i),u=n.slice(i);return{type:r,sealed:u,iv:o,senderPublicKey:s}}const i=e+$s,s=n.slice(e,i),o=n.slice(i);return{type:r,sealed:o,iv:s}}function Bs(t,n){const r=zs(t);return Ws({type:Vs(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?Bi.toString(r.senderPublicKey,Is):void 0,receiverPublicKey:n?.receiverPublicKey})}function Ws(t){const n=t?.type||xs;if(n===Ps){if(typeof t?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof t?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:n,senderPublicKey:t?.senderPublicKey,receiverPublicKey:t?.receiverPublicKey}}function Ks(t){return t.type===Ps&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}var Js=Object.defineProperty,Zs=Object.getOwnPropertySymbols,Ys=Object.prototype.hasOwnProperty,Qs=Object.prototype.propertyIsEnumerable,Xs=(t,n,r)=>n in t?Js(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,to=(t,n)=>{for(var r in n||(n={}))Ys.call(n,r)&&Xs(t,r,n[r]);if(Zs)for(var r of Zs(n))Qs.call(n,r)&&Xs(t,r,n[r]);return t};const no="ReactNative",ro={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},eo="js";function io(){return typeof o<"u"&&typeof o.versions<"u"&&typeof o.versions.node<"u"}function so(){return!fs.getDocument()&&!!fs.getNavigator()&&navigator.product===no}function oo(){return!io()&&!!fs.getNavigator()}function uo(){return so()?ro.reactNative:io()?ro.node:oo()?ro.browser:ro.unknown}function ao(t,n){let r=Es.parse(t);return r=to(to({},r),n),t=Es.stringify(r),t}function co(){return hs.getWindowMetadata()||{name:"",description:"",url:"",icons:[""]}}function fo(){const t=is();if(t===null)return"unknown";const n=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[n,t.name,t.version].join("-"):[n,t.version].join("-")}function ho(){var t;const n=uo();return n===ro.browser?[n,((t=fs.getLocation())==null?void 0:t.host)||"unknown"].join(":"):n}function lo(t,n,r){const e=fo(),i=ho();return[[t,n].join("-"),[eo,r].join("-"),e,i].join("/")}function vo({protocol:t,version:n,relayUrl:r,sdkVersion:e,auth:i,projectId:s,useOnCloseEvent:o}){const u=r.split("?"),a=lo(t,n,e),c={auth:i,ua:a,projectId:s,useOnCloseEvent:o||void 0},f=ao(u[1]||"",c);return u[0]+"?"+f}function po(t,n){return t.filter((t=>n.includes(t))).length===t.length}function wo(t){return Object.fromEntries(t.entries())}function yo(t){return new Map(Object.entries(t))}function bo(t=wn.FIVE_MINUTES,n){const r=wn.toMiliseconds(t||wn.FIVE_MINUTES);let e,i,s;return{resolve:t=>{s&&e&&(clearTimeout(s),e(t))},reject:t=>{s&&i&&(clearTimeout(s),i(t))},done:()=>new Promise(((t,o)=>{s=setTimeout((()=>{o(new Error(n))}),r),e=t,i=o}))}}function mo(t,n,r){return new Promise((async(e,i)=>{const s=setTimeout((()=>i(new Error(r))),n);try{const n=await t;e(n)}catch(t){i(t)}clearTimeout(s)}))}function _o(t,n){if(typeof n=="string"&&n.startsWith(`${t}:`))return n;if(t.toLowerCase()==="topic"){if(typeof n!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${n}`}else if(t.toLowerCase()==="id"){if(typeof n!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${n}`}throw new Error(`Unknown expirer target type: ${t}`)}function go(t){return _o("topic",t)}function Eo(t){return _o("id",t)}function Oo(t){const[n,r]=t.split(":"),e={id:void 0,topic:void 0};if(n==="topic"&&typeof r=="string")e.topic=r;else if(n==="id"&&Number.isInteger(Number(r)))e.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${n}:${r}`);return e}function So(t,n){return wn.fromMiliseconds((n||Date.now())+wn.toMiliseconds(t))}function jo(t){return Date.now()>=wn.toMiliseconds(t)}function Io(t,n){return`${t}${n?`:${n}`:""}`}const Ao="irn";function No(t){return t?.relay||{protocol:Ao}}function xo(t){const n=Os[t];if(typeof n>"u")throw new Error(`Relay Protocol not supported: ${t}`);return n}var Po=Object.defineProperty,To=Object.getOwnPropertySymbols,Uo=Object.prototype.hasOwnProperty,$o=Object.prototype.propertyIsEnumerable,Mo=(t,n,r)=>n in t?Po(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,Ro=(t,n)=>{for(var r in n||(n={}))Uo.call(n,r)&&Mo(t,r,n[r]);if(To)for(var r of To(n))$o.call(n,r)&&Mo(t,r,n[r]);return t};function Co(t,n="-"){const r={},e="relay"+n;return Object.keys(t).forEach((n=>{if(n.startsWith(e)){const i=n.replace(e,""),s=t[n];r[i]=s}})),r}function Do(t){const n=t.indexOf(":"),r=t.indexOf("?")!==-1?t.indexOf("?"):void 0,e=t.substring(0,n),i=t.substring(n+1,r).split("@"),s=typeof r<"u"?t.substring(r):"",o=Es.parse(s);return{protocol:e,topic:i[0],version:parseInt(i[1],10),symKey:o.symKey,relay:Co(o)}}function ko(t,n="-"){const r="relay",e={};return Object.keys(t).forEach((i=>{const s=r+n+i;t[i]&&(e[s]=t[i])})),e}function Lo(t){return`${t.protocol}:${t.topic}@${t.version}?`+Es.stringify(Ro({symKey:t.symKey},ko(t.relay)))}function qo(t){const n=[];return t.forEach((t=>{const[r,e]=t.split(":");n.push(`${r}:${e}`)})),n}function Vo(t){const n=[];return Object.values(t).forEach((t=>{n.push(...qo(t.accounts))})),n}function Fo(t,n){const r=[];return Object.values(t).forEach((t=>{qo(t.accounts).includes(n)&&r.push(...t.methods)})),r}function Ho(t,n){const r=[];return Object.values(t).forEach((t=>{qo(t.accounts).includes(n)&&r.push(...t.events)})),r}function Go(t,n){const r=pu(t,n);if(r)throw new Error(r.message);const e={};for(const[n,r]of Object.entries(t))e[n]={methods:r.methods,events:r.events,chains:r.accounts.map((t=>`${t.split(":")[0]}:${t.split(":")[1]}`))};return e}const zo={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},Bo={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function Wo(t,n){const{message:r,code:e}=Bo[t];return{message:n?`${r} ${n}`:r,code:e}}function Ko(t,n){const{message:r,code:e}=zo[t];return{message:n?`${r} ${n}`:r,code:e}}function Jo(t,n){return Array.isArray(t)?typeof n<"u"&&t.length?t.every(n):!0:!1}function Zo(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function Yo(t){return typeof t>"u"}function Qo(t,n){return n&&Yo(t)?!0:typeof t=="string"&&Boolean(t.trim().length)}function Xo(t,n){return n&&Yo(t)?!0:typeof t=="number"&&!isNaN(t)}function tu(t,n){const{requiredNamespaces:r}=n,e=Object.keys(t.namespaces),i=Object.keys(r);let s=!0;return po(i,e)?(e.forEach((n=>{const{accounts:e,methods:i,events:o}=t.namespaces[n],u=qo(e),a=r[n];(!po(Ss(n,a),u)||!po(a.methods,i)||!po(a.events,o))&&(s=!1)})),s):!1}function nu(t){return Qo(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function ru(t){if(Qo(t,!1)&&t.includes(":")){const n=t.split(":");if(n.length===3){const t=n[0]+":"+n[1];return!!n[2]&&nu(t)}}return!1}function eu(t){if(Qo(t,!1))try{return typeof new URL(t)<"u"}catch{return!1}return!1}function iu(t){var n;return(n=t?.proposer)==null?void 0:n.publicKey}function su(t){return t?.topic}function ou(t,n){let r=null;return Qo(t?.publicKey,!1)||(r=Wo("MISSING_OR_INVALID",`${n} controller public key should be a string`)),r}function uu(t){let n=!0;return Jo(t)?t.length&&(n=t.every((t=>Qo(t,!1)))):n=!1,n}function au(t,n,r){let e=null;return Jo(n)?n.forEach((n=>{e||(!nu(n)||!n.includes(t))&&(e=Ko("UNSUPPORTED_CHAINS",`${r}, chain ${n} should be a string and conform to "namespace:chainId" format`))})):e=Ko("UNSUPPORTED_CHAINS",`${r}, chains ${n} should be an array of strings conforming to "namespace:chainId" format`),e}function cu(t,n){let r=null;return Object.entries(t).forEach((([t,e])=>{if(r)return;const i=au(t,Ss(t,e),`${n} requiredNamespace`);i&&(r=i)})),r}function fu(t,n){let r=null;return Jo(t)?t.forEach((t=>{r||ru(t)||(r=Ko("UNSUPPORTED_ACCOUNTS",`${n}, account ${t} should be a string and conform to "namespace:chainId:address" format`))})):r=Ko("UNSUPPORTED_ACCOUNTS",`${n}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function hu(t,n){let r=null;return Object.values(t).forEach((t=>{if(r)return;const e=fu(t?.accounts,`${n} namespace`);e&&(r=e)})),r}function lu(t,n){let r=null;return uu(t?.methods)?uu(t?.events)||(r=Ko("UNSUPPORTED_EVENTS",`${n}, events should be an array of strings or empty array for no events`)):r=Ko("UNSUPPORTED_METHODS",`${n}, methods should be an array of strings or empty array for no methods`),r}function du(t,n){let r=null;return Object.values(t).forEach((t=>{if(r)return;const e=lu(t,`${n}, namespace`);e&&(r=e)})),r}function vu(t,n,r){let e=null;if(t&&Zo(t)){const r=du(t,n);r&&(e=r);const i=cu(t,n);i&&(e=i)}else e=Wo("MISSING_OR_INVALID",`${n}, ${r} should be an object with data`);return e}function pu(t,n){let r=null;if(t&&Zo(t)){const e=du(t,n);e&&(r=e);const i=hu(t,n);i&&(r=i)}else r=Wo("MISSING_OR_INVALID",`${n}, namespaces should be an object with data`);return r}function wu(t){return Qo(t.protocol,!0)}function yu(t,n){let r=!1;return n&&!t?r=!0:t&&Jo(t)&&t.length&&t.forEach((t=>{r=wu(t)})),r}function bu(t){return typeof t=="number"}function mu(t){return typeof t<"u"&&typeof t!==null}function _u(t){return!(!t||typeof t!="object"||!t.code||!Xo(t.code,!1)||!t.message||!Qo(t.message,!1))}function gu(t){return!(Yo(t)||!Qo(t.method,!1))}function Eu(t){return!(Yo(t)||Yo(t.result)&&Yo(t.error)||!Xo(t.id,!1)||!Qo(t.jsonrpc,!1))}function Ou(t){return!(Yo(t)||!Qo(t.name,!1))}function Su(t,n){return!(!nu(n)||!Vo(t).includes(n))}function ju(t,n,r){return Qo(r,!1)?Fo(t,n).includes(r):!1}function Iu(t,n,r){return Qo(r,!1)?Ho(t,n).includes(r):!1}function Au(t,n,r){let e=null;const i=Nu(t),s=Pu(n),o=Object.keys(i),u=Object.keys(s),a=xu(Object.keys(t)),c=xu(Object.keys(n)),f=a.filter((t=>!c.includes(t)));return f.length&&(e=Wo("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.\n      Required: ${f.toString()}\n      Received: ${Object.keys(n).toString()}`)),po(o,u)||(e=Wo("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.\n      Required: ${o.toString()}\n      Approved: ${u.toString()}`)),Object.keys(n).forEach((t=>{if(!t.includes(":")||e)return;const i=qo(n[t].accounts);i.includes(t)||(e=Wo("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${t}\n        Required: ${t}\n        Approved: ${i.toString()}`))})),o.forEach((t=>{e||(po(i[t].methods,s[t].methods)?po(i[t].events,s[t].events)||(e=Wo("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${t}`)):e=Wo("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${t}`))})),e}function Nu(t){const n={};return Object.keys(t).forEach((r=>{var e;r.includes(":")?n[r]=t[r]:(e=t[r].chains)==null||e.forEach((e=>{n[e]={methods:t[r].methods,events:t[r].events}}))})),n}function xu(t){return[...new Set(t.map((t=>t.includes(":")?t.split(":")[0]:t)))]}function Pu(t){const n={};return Object.keys(t).forEach((r=>{if(r.includes(":"))n[r]=t[r];else{const e=qo(t[r].accounts);e?.forEach((e=>{n[e]={accounts:t[r].accounts.filter((t=>t.includes(`${e}:`))),methods:t[r].methods,events:t[r].events}}))}})),n}function Tu(t,n){return Xo(t,!1)&&t<=n.max&&t>=n.min}const Uu="PARSE_ERROR";const $u="INVALID_REQUEST";const Mu="METHOD_NOT_FOUND";const Ru="INVALID_PARAMS";const Cu="INTERNAL_ERROR";const Du="SERVER_ERROR";const ku=[-32700,-32600,-32601,-32602,-32603];const Lu={[Uu]:{code:-32700,message:"Parse error"},[$u]:{code:-32600,message:"Invalid Request"},[Mu]:{code:-32601,message:"Method not found"},[Ru]:{code:-32602,message:"Invalid params"},[Cu]:{code:-32603,message:"Internal error"},[Du]:{code:-32e3,message:"Server error"}};const qu=Du;function Vu(t){return ku.includes(t)}function Fu(t){if(!Object.keys(Lu).includes(t)){return Lu[qu]}return Lu[t]}function Hu(t){const n=Object.values(Lu).find((n=>n.code===t));if(!n){return Lu[qu]}return n}function Gu(t,n,r){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${n}`):t}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var zu=function(t,n){zu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)if(n.hasOwnProperty(r))t[r]=n[r]};return zu(t,n)};function Bu(t,n){zu(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}var Wu=function(){Wu=Object.assign||function t(n){for(var r,e=1,i=arguments.length;e<i;e++){r=arguments[e];for(var s in r)if(Object.prototype.hasOwnProperty.call(r,s))n[s]=r[s]}return n};return Wu.apply(this,arguments)};function Ku(t,n){var r={};for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e)&&n.indexOf(e)<0)r[e]=t[e];if(t!=null&&typeof Object.getOwnPropertySymbols==="function")for(var i=0,e=Object.getOwnPropertySymbols(t);i<e.length;i++){if(n.indexOf(e[i])<0&&Object.prototype.propertyIsEnumerable.call(t,e[i]))r[e[i]]=t[e[i]]}return r}function Ju(t,n,r,e){var i=arguments.length,s=i<3?n:e===null?e=Object.getOwnPropertyDescriptor(n,r):e,o;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")s=Reflect.decorate(t,n,r,e);else for(var u=t.length-1;u>=0;u--)if(o=t[u])s=(i<3?o(s):i>3?o(n,r,s):o(n,r))||s;return i>3&&s&&Object.defineProperty(n,r,s),s}function Zu(t,n){return function(r,e){n(r,e,t)}}function Yu(t,n){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(t,n)}function Qu(t,n,r,e){function i(t){return t instanceof r?t:new r((function(n){n(t)}))}return new(r||(r=Promise))((function(r,s){function o(t){try{a(e.next(t))}catch(t){s(t)}}function u(t){try{a(e["throw"](t))}catch(t){s(t)}}function a(t){t.done?r(t.value):i(t.value).then(o,u)}a((e=e.apply(t,n||[])).next())}))}function Xu(t,n){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},e,i,s,o;return o={next:u(0),throw:u(1),return:u(2)},typeof Symbol==="function"&&(o[Symbol.iterator]=function(){return this}),o;function u(t){return function(n){return a([t,n])}}function a(o){if(e)throw new TypeError("Generator is already executing.");while(r)try{if(e=1,i&&(s=o[0]&2?i["return"]:o[0]?i["throw"]||((s=i["return"])&&s.call(i),0):i.next)&&!(s=s.call(i,o[1])).done)return s;if(i=0,s)o=[o[0]&2,s.value];switch(o[0]){case 0:case 1:s=o;break;case 4:r.label++;return{value:o[1],done:false};case 5:r.label++;i=o[1];o=[0];continue;case 7:o=r.ops.pop();r.trys.pop();continue;default:if(!(s=r.trys,s=s.length>0&&s[s.length-1])&&(o[0]===6||o[0]===2)){r=0;continue}if(o[0]===3&&(!s||o[1]>s[0]&&o[1]<s[3])){r.label=o[1];break}if(o[0]===6&&r.label<s[1]){r.label=s[1];s=o;break}if(s&&r.label<s[2]){r.label=s[2];r.ops.push(o);break}if(s[2])r.ops.pop();r.trys.pop();continue}o=n.call(t,r)}catch(t){o=[6,t];i=0}finally{e=s=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:true}}}function ta(t,n,r,e){if(e===undefined)e=r;t[e]=n[r]}function na(t,n){for(var r in t)if(r!=="default"&&!n.hasOwnProperty(r))n[r]=t[r]}function ra(t){var n=typeof Symbol==="function"&&Symbol.iterator,r=n&&t[n],e=0;if(r)return r.call(t);if(t&&typeof t.length==="number")return{next:function(){if(t&&e>=t.length)t=void 0;return{value:t&&t[e++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function ea(t,n){var r=typeof Symbol==="function"&&t[Symbol.iterator];if(!r)return t;var e=r.call(t),i,s=[],o;try{while((n===void 0||n-- >0)&&!(i=e.next()).done)s.push(i.value)}catch(t){o={error:t}}finally{try{if(i&&!i.done&&(r=e["return"]))r.call(e)}finally{if(o)throw o.error}}return s}function ia(){for(var t=[],n=0;n<arguments.length;n++)t=t.concat(ea(arguments[n]));return t}function sa(){for(var t=0,n=0,r=arguments.length;n<r;n++)t+=arguments[n].length;for(var e=Array(t),i=0,n=0;n<r;n++)for(var s=arguments[n],o=0,u=s.length;o<u;o++,i++)e[i]=s[o];return e}function oa(t){return this instanceof oa?(this.v=t,this):new oa(t)}function ua(t,n,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r.apply(t,n||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(t){if(e[t])i[t]=function(n){return new Promise((function(r,e){s.push([t,n,r,e])>1||u(t,n)}))}}function u(t,n){try{a(e[t](n))}catch(t){h(s[0][3],t)}}function a(t){t.value instanceof oa?Promise.resolve(t.value.v).then(c,f):h(s[0][2],t)}function c(t){u("next",t)}function f(t){u("throw",t)}function h(t,n){if(t(n),s.shift(),s.length)u(s[0][0],s[0][1])}}function aa(t){var n,r;return n={},e("next"),e("throw",(function(t){throw t})),e("return"),n[Symbol.iterator]=function(){return this},n;function e(e,i){n[e]=t[e]?function(n){return(r=!r)?{value:oa(t[e](n)),done:e==="return"}:i?i(n):n}:i}}function ca(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t[Symbol.asyncIterator],r;return n?n.call(t):(t=typeof ra==="function"?ra(t):t[Symbol.iterator](),r={},e("next"),e("throw"),e("return"),r[Symbol.asyncIterator]=function(){return this},r);function e(n){r[n]=t[n]&&function(r){return new Promise((function(e,s){r=t[n](r),i(e,s,r.done,r.value)}))}}function i(t,n,r,e){Promise.resolve(e).then((function(n){t({value:n,done:r})}),n)}}function fa(t,n){if(Object.defineProperty){Object.defineProperty(t,"raw",{value:n})}else{t.raw=n}return t}function ha(t){if(t&&t.__esModule)return t;var n={};if(t!=null)for(var r in t)if(Object.hasOwnProperty.call(t,r))n[r]=t[r];n.default=t;return n}function la(t){return t&&t.__esModule?t:{default:t}}function da(t,n){if(!n.has(t)){throw new TypeError("attempted to get private field on non-instance")}return n.get(t)}function va(t,n,r){if(!n.has(t)){throw new TypeError("attempted to set private field on non-instance")}n.set(t,r);return r}const pa=Object.freeze({__proto__:null,__extends:Bu,get __assign(){return Wu},__rest:Ku,__decorate:Ju,__param:Zu,__metadata:Yu,__awaiter:Qu,__generator:Xu,__createBinding:ta,__exportStar:na,__values:ra,__read:ea,__spread:ia,__spreadArrays:sa,__await:oa,__asyncGenerator:ua,__asyncDelegator:aa,__asyncValues:ca,__makeTemplateObject:fa,__importStar:ha,__importDefault:la,__classPrivateFieldGet:da,__classPrivateFieldSet:va});var wa=t((function(t,r){Object.defineProperty(r,"__esModule",{value:true});r.isBrowserCryptoAvailable=r.getSubtleCrypto=r.getBrowerCrypto=void 0;function e(){return(n===null||n===void 0?void 0:n.crypto)||(n===null||n===void 0?void 0:n.msCrypto)||{}}r.getBrowerCrypto=e;function i(){const t=e();return t.subtle||t.webkitSubtle}r.getSubtleCrypto=i;function s(){return!!e()&&!!i()}r.isBrowserCryptoAvailable=s}));var ya=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});n.isBrowser=n.isNode=n.isReactNative=void 0;function r(){return typeof document==="undefined"&&typeof navigator!=="undefined"&&navigator.product==="ReactNative"}n.isReactNative=r;function e(){return typeof o!=="undefined"&&typeof o.versions!=="undefined"&&typeof o.versions.node!=="undefined"}n.isNode=e;function i(){return!r()&&!e()}n.isBrowser=i}));const ba=r(pa);var ma=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});ba.__exportStar(wa,n);ba.__exportStar(ya,n)}));function _a(t=3){const n=Date.now()*Math.pow(10,t);const r=Math.floor(Math.random()*Math.pow(10,t));return n+r}function ga(t=6){return BigInt(_a(t))}function Ea(t,n,r){return{id:r||_a(),jsonrpc:"2.0",method:t,params:n}}function Oa(t,n){return{id:t,jsonrpc:"2.0",result:n}}function Sa(t,n,r){return{id:t,jsonrpc:"2.0",error:ja(n,r)}}function ja(t,n){if(typeof t==="undefined"){return Fu(Cu)}if(typeof t==="string"){t=Object.assign(Object.assign({},Fu(Du)),{message:t})}if(typeof n!=="undefined"){t.data=n}if(Vu(t.code)){t=Hu(t.code)}return t}class Ia{}class Aa extends Ia{constructor(){super()}}class Na extends Aa{constructor(t){super()}}const xa="^https?:";const Pa="^wss?:";function Ta(t){const n=t.match(new RegExp(/^\w+:/,"gi"));if(!n||!n.length)return;return n[0]}function Ua(t,n){const r=Ta(t);if(typeof r==="undefined")return false;return new RegExp(n).test(r)}function $a(t){return Ua(t,xa)}function Ma(t){return Ua(t,Pa)}function Ra(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function Ca(t){return typeof t==="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function Da(t){return Ca(t)&&"method"in t}function ka(t){return Ca(t)&&(La(t)||qa(t))}function La(t){return"result"in t}function qa(t){return"error"in t}class Va extends Na{constructor(t){super(t);this.events=new v.EventEmitter;this.hasRegisteredEventListeners=false;this.connection=this.setConnection(t);if(this.connection.connected){this.registerEventListeners()}}async connect(t=this.connection){await this.open(t)}async disconnect(){await this.close()}on(t,n){this.events.on(t,n)}once(t,n){this.events.once(t,n)}off(t,n){this.events.off(t,n)}removeListener(t,n){this.events.removeListener(t,n)}async request(t,n){return this.requestStrict(Ea(t.method,t.params||[],ga().toString()),n)}async requestStrict(t,n){return new Promise((async(r,e)=>{if(!this.connection.connected){try{await this.open()}catch(t){e(t)}}this.events.on(`${t.id}`,(t=>{if(qa(t)){e(t.error)}else{r(t.result)}}));try{await this.connection.send(t,n)}catch(t){e(t)}}))}setConnection(t=this.connection){return t}onPayload(t){this.events.emit("payload",t);if(ka(t)){this.events.emit(`${t.id}`,t)}else{this.events.emit("message",{type:t.method,data:t.params})}}onClose(t){if(t&&t.code===3e3){this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${t.code} ${t.reason?`(${t.reason})`:""}`))}this.events.emit("disconnect")}async open(t=this.connection){if(this.connection===t&&this.connection.connected)return;if(this.connection.connected)this.close();if(typeof t==="string"){await this.connection.open(t);t=this.connection}this.connection=this.setConnection(t);await this.connection.open();this.registerEventListeners();this.events.emit("connect")}async close(){await this.connection.close()}registerEventListeners(){if(this.hasRegisteredEventListeners)return;this.connection.on("payload",(t=>this.onPayload(t)));this.connection.on("close",(t=>this.onClose(t)));this.connection.on("error",(t=>this.events.emit("error",t)));this.connection.on("register_error",(t=>this.onClose()));this.hasRegisteredEventListeners=true}}const Fa=t=>JSON.stringify(t,((t,n)=>typeof n==="bigint"?n.toString()+"n":n));const Ha=t=>{const n=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g;const r=t.replace(n,'$1"$2n"$3');return JSON.parse(r,((t,n)=>{const r=typeof n==="string"&&n.match(/^\d+n$/);if(r)return BigInt(n.substring(0,n.length-1));return n}))};function Ga(t){if(typeof t!=="string"){throw new Error(`Cannot safe json parse value of type ${typeof t}`)}try{return Ha(t)}catch(n){return t}}function za(t){return typeof t==="string"?t:Fa(t)||""}const Ba=10;const Wa=()=>{if(typeof u!=="undefined"&&typeof u.WebSocket!=="undefined"){return u.WebSocket}if(typeof window!=="undefined"&&typeof window.WebSocket!=="undefined"){return window.WebSocket}return require("ws")};const Ka=()=>typeof window!=="undefined";const Ja=Wa();class Za{constructor(t){this.url=t;this.events=new v.EventEmitter;this.registering=false;if(!Ma(t)){throw new Error(`Provided URL is not compatible with WebSocket connection: ${t}`)}this.url=t}get connected(){return typeof this.socket!=="undefined"}get connecting(){return this.registering}on(t,n){this.events.on(t,n)}once(t,n){this.events.once(t,n)}off(t,n){this.events.off(t,n)}removeListener(t,n){this.events.removeListener(t,n)}async open(t=this.url){await this.register(t)}async close(){return new Promise(((t,n)=>{if(typeof this.socket==="undefined"){n(new Error("Connection already closed"));return}this.socket.onclose=n=>{this.onClose(n);t()};this.socket.close()}))}async send(t,n){if(typeof this.socket==="undefined"){this.socket=await this.register()}try{this.socket.send(za(t))}catch(n){this.onError(t.id,n)}}register(t=this.url){if(!Ma(t)){throw new Error(`Provided URL is not compatible with WebSocket connection: ${t}`)}if(this.registering){const t=this.events.getMaxListeners();if(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t){this.events.setMaxListeners(t+1)}return new Promise(((t,n)=>{this.events.once("register_error",(t=>{this.resetMaxListeners();n(t)}));this.events.once("open",(()=>{this.resetMaxListeners();if(typeof this.socket==="undefined"){return n(new Error("WebSocket connection is missing or invalid"))}t(this.socket)}))}))}this.url=t;this.registering=true;return new Promise(((n,r)=>{const e=!ma.isReactNative()?{rejectUnauthorized:!Ra(t)}:undefined;const i=new Ja(t,[],e);if(Ka()){i.onerror=t=>{const n=t;r(this.emitError(n.error))}}else{i.on("error",(t=>{r(this.emitError(t))}))}i.onopen=()=>{this.onOpen(i);n(i)}}))}onOpen(t){t.onmessage=t=>this.onPayload(t);t.onclose=t=>this.onClose(t);this.socket=t;this.registering=false;this.events.emit("open")}onClose(t){this.socket=undefined;this.registering=false;this.events.emit("close",t)}onPayload(t){if(typeof t.data==="undefined")return;const n=typeof t.data==="string"?Ga(t.data):t.data;this.events.emit("payload",n)}onError(t,n){const r=this.parseError(n);const e=r.message||r.toString();const i=Sa(t,e);this.events.emit("payload",i)}parseError(t,n=this.url){return Gu(t,n,"WS")}resetMaxListeners(){if(this.events.getMaxListeners()>Ba){this.events.setMaxListeners(Ba)}}emitError(t){const n=this.parseError(new Error((t===null||t===void 0?void 0:t.message)||`WebSocket connection failed for URL: ${this.url}`));this.events.emit("register_error",n);return n}}var Ya=t((function(t,r){var e=200;var i="__lodash_hash_undefined__";var s=1,o=2;var u=9007199254740991;var a="[object Arguments]",c="[object Array]",f="[object AsyncFunction]",h="[object Boolean]",l="[object Date]",d="[object Error]",v="[object Function]",p="[object GeneratorFunction]",w="[object Map]",y="[object Number]",b="[object Null]",m="[object Object]",_="[object Promise]",g="[object Proxy]",E="[object RegExp]",O="[object Set]",S="[object String]",j="[object Symbol]",I="[object Undefined]",A="[object WeakMap]";var N="[object ArrayBuffer]",x="[object DataView]",P="[object Float32Array]",T="[object Float64Array]",U="[object Int8Array]",$="[object Int16Array]",M="[object Int32Array]",R="[object Uint8Array]",C="[object Uint8ClampedArray]",D="[object Uint16Array]",k="[object Uint32Array]";var L=/[\\^$.*+?()[\]{}|]/g;var q=/^\[object .+?Constructor\]$/;var V=/^(?:0|[1-9]\d*)$/;var F={};F[P]=F[T]=F[U]=F[$]=F[M]=F[R]=F[C]=F[D]=F[k]=true;F[a]=F[c]=F[N]=F[h]=F[x]=F[l]=F[d]=F[v]=F[w]=F[y]=F[m]=F[E]=F[O]=F[S]=F[A]=false;var H=typeof n=="object"&&n&&n.Object===Object&&n;var G=typeof self=="object"&&self&&self.Object===Object&&self;var z=H||G||Function("return this")();var B=r&&!r.nodeType&&r;var W=B&&"object"=="object"&&t&&!t.nodeType&&t;var K=W&&W.exports===B;var J=K&&H.process;var Z=function(){try{return J&&J.binding&&J.binding("util")}catch(t){}}();var Y=Z&&Z.isTypedArray;function Q(t,n){var r=-1,e=t==null?0:t.length,i=0,s=[];while(++r<e){var o=t[r];if(n(o,r,t)){s[i++]=o}}return s}function X(t,n){var r=-1,e=n.length,i=t.length;while(++r<e){t[i+r]=n[r]}return t}function tt(t,n){var r=-1,e=t==null?0:t.length;while(++r<e){if(n(t[r],r,t)){return true}}return false}function nt(t,n){var r=-1,e=Array(t);while(++r<t){e[r]=n(r)}return e}function rt(t){return function(n){return t(n)}}function et(t,n){return t.has(n)}function it(t,n){return t==null?undefined:t[n]}function st(t){var n=-1,r=Array(t.size);t.forEach((function(t,e){r[++n]=[e,t]}));return r}function ot(t,n){return function(r){return t(n(r))}}function ut(t){var n=-1,r=Array(t.size);t.forEach((function(t){r[++n]=t}));return r}var at=Array.prototype,ct=Function.prototype,ft=Object.prototype;var ht=z["__core-js_shared__"];var lt=ct.toString;var dt=ft.hasOwnProperty;var vt=function(){var t=/[^.]+$/.exec(ht&&ht.keys&&ht.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();var pt=ft.toString;var wt=RegExp("^"+lt.call(dt).replace(L,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var yt=K?z.Buffer:undefined,bt=z.Symbol,mt=z.Uint8Array,_t=ft.propertyIsEnumerable,gt=at.splice,Et=bt?bt.toStringTag:undefined;var Ot=Object.getOwnPropertySymbols,St=yt?yt.isBuffer:undefined,jt=ot(Object.keys,Object);var It=Nn(z,"DataView"),At=Nn(z,"Map"),Nt=Nn(z,"Promise"),xt=Nn(z,"Set"),Pt=Nn(z,"WeakMap"),Tt=Nn(Object,"create");var Ut=Dn(It),$t=Dn(At),Mt=Dn(Nt),Rt=Dn(xt),Ct=Dn(Pt);var Dt=bt?bt.prototype:undefined,kt=Dt?Dt.valueOf:undefined;function Lt(t){var n=-1,r=t==null?0:t.length;this.clear();while(++n<r){var e=t[n];this.set(e[0],e[1])}}function qt(){this.__data__=Tt?Tt(null):{};this.size=0}function Vt(t){var n=this.has(t)&&delete this.__data__[t];this.size-=n?1:0;return n}function Ft(t){var n=this.__data__;if(Tt){var r=n[t];return r===i?undefined:r}return dt.call(n,t)?n[t]:undefined}function Ht(t){var n=this.__data__;return Tt?n[t]!==undefined:dt.call(n,t)}function Gt(t,n){var r=this.__data__;this.size+=this.has(t)?0:1;r[t]=Tt&&n===undefined?i:n;return this}Lt.prototype.clear=qt;Lt.prototype["delete"]=Vt;Lt.prototype.get=Ft;Lt.prototype.has=Ht;Lt.prototype.set=Gt;function zt(t){var n=-1,r=t==null?0:t.length;this.clear();while(++n<r){var e=t[n];this.set(e[0],e[1])}}function Bt(){this.__data__=[];this.size=0}function Wt(t){var n=this.__data__,r=vn(n,t);if(r<0){return false}var e=n.length-1;if(r==e){n.pop()}else{gt.call(n,r,1)}--this.size;return true}function Kt(t){var n=this.__data__,r=vn(n,t);return r<0?undefined:n[r][1]}function Jt(t){return vn(this.__data__,t)>-1}function Zt(t,n){var r=this.__data__,e=vn(r,t);if(e<0){++this.size;r.push([t,n])}else{r[e][1]=n}return this}zt.prototype.clear=Bt;zt.prototype["delete"]=Wt;zt.prototype.get=Kt;zt.prototype.has=Jt;zt.prototype.set=Zt;function Yt(t){var n=-1,r=t==null?0:t.length;this.clear();while(++n<r){var e=t[n];this.set(e[0],e[1])}}function Qt(){this.size=0;this.__data__={hash:new Lt,map:new(At||zt),string:new Lt}}function Xt(t){var n=An(this,t)["delete"](t);this.size-=n?1:0;return n}function tn(t){return An(this,t).get(t)}function nn(t){return An(this,t).has(t)}function rn(t,n){var r=An(this,t),e=r.size;r.set(t,n);this.size+=r.size==e?0:1;return this}Yt.prototype.clear=Qt;Yt.prototype["delete"]=Xt;Yt.prototype.get=tn;Yt.prototype.has=nn;Yt.prototype.set=rn;function en(t){var n=-1,r=t==null?0:t.length;this.__data__=new Yt;while(++n<r){this.add(t[n])}}function sn(t){this.__data__.set(t,i);return this}function on(t){return this.__data__.has(t)}en.prototype.add=en.prototype.push=sn;en.prototype.has=on;function un(t){var n=this.__data__=new zt(t);this.size=n.size}function an(){this.__data__=new zt;this.size=0}function cn(t){var n=this.__data__,r=n["delete"](t);this.size=n.size;return r}function fn(t){return this.__data__.get(t)}function hn(t){return this.__data__.has(t)}function ln(t,n){var r=this.__data__;if(r instanceof zt){var i=r.__data__;if(!At||i.length<e-1){i.push([t,n]);this.size=++r.size;return this}r=this.__data__=new Yt(i)}r.set(t,n);this.size=r.size;return this}un.prototype.clear=an;un.prototype["delete"]=cn;un.prototype.get=fn;un.prototype.has=hn;un.prototype.set=ln;function dn(t,n){var r=qn(t),e=!r&&Ln(t),i=!r&&!e&&Fn(t),s=!r&&!e&&!i&&Kn(t),o=r||e||i||s,u=o?nt(t.length,String):[],a=u.length;for(var c in t){if((n||dt.call(t,c))&&!(o&&(c=="length"||i&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||Un(c,a)))){u.push(c)}}return u}function vn(t,n){var r=t.length;while(r--){if(kn(t[r][0],n)){return r}}return-1}function pn(t,n,r){var e=n(t);return qn(t)?e:X(e,r(t))}function wn(t){if(t==null){return t===undefined?I:b}return Et&&Et in Object(t)?xn(t):Cn(t)}function yn(t){return Wn(t)&&wn(t)==a}function bn(t,n,r,e,i){if(t===n){return true}if(t==null||n==null||!Wn(t)&&!Wn(n)){return t!==t&&n!==n}return mn(t,n,r,e,bn,i)}function mn(t,n,r,e,i,o){var u=qn(t),f=qn(n),h=u?c:Tn(t),l=f?c:Tn(n);h=h==a?m:h;l=l==a?m:l;var d=h==m,v=l==m,p=h==l;if(p&&Fn(t)){if(!Fn(n)){return false}u=true;d=false}if(p&&!d){o||(o=new un);return u||Kn(t)?On(t,n,r,e,i,o):Sn(t,n,h,r,e,i,o)}if(!(r&s)){var w=d&&dt.call(t,"__wrapped__"),y=v&&dt.call(n,"__wrapped__");if(w||y){var b=w?t.value():t,_=y?n.value():n;o||(o=new un);return i(b,_,r,e,o)}}if(!p){return false}o||(o=new un);return jn(t,n,r,e,i,o)}function _n(t){if(!Bn(t)||Mn(t)){return false}var n=Gn(t)?wt:q;return n.test(Dn(t))}function gn(t){return Wn(t)&&zn(t.length)&&!!F[wn(t)]}function En(t){if(!Rn(t)){return jt(t)}var n=[];for(var r in Object(t)){if(dt.call(t,r)&&r!="constructor"){n.push(r)}}return n}function On(t,n,r,e,i,u){var a=r&s,c=t.length,f=n.length;if(c!=f&&!(a&&f>c)){return false}var h=u.get(t);if(h&&u.get(n)){return h==n}var l=-1,d=true,v=r&o?new en:undefined;u.set(t,n);u.set(n,t);while(++l<c){var p=t[l],w=n[l];if(e){var y=a?e(w,p,l,n,t,u):e(p,w,l,t,n,u)}if(y!==undefined){if(y){continue}d=false;break}if(v){if(!tt(n,(function(t,n){if(!et(v,n)&&(p===t||i(p,t,r,e,u))){return v.push(n)}}))){d=false;break}}else if(!(p===w||i(p,w,r,e,u))){d=false;break}}u["delete"](t);u["delete"](n);return d}function Sn(t,n,r,e,i,u,a){switch(r){case x:if(t.byteLength!=n.byteLength||t.byteOffset!=n.byteOffset){return false}t=t.buffer;n=n.buffer;case N:if(t.byteLength!=n.byteLength||!u(new mt(t),new mt(n))){return false}return true;case h:case l:case y:return kn(+t,+n);case d:return t.name==n.name&&t.message==n.message;case E:case S:return t==n+"";case w:var c=st;case O:var f=e&s;c||(c=ut);if(t.size!=n.size&&!f){return false}var v=a.get(t);if(v){return v==n}e|=o;a.set(t,n);var p=On(c(t),c(n),e,i,u,a);a["delete"](t);return p;case j:if(kt){return kt.call(t)==kt.call(n)}}return false}function jn(t,n,r,e,i,o){var u=r&s,a=In(t),c=a.length,f=In(n),h=f.length;if(c!=h&&!u){return false}var l=c;while(l--){var d=a[l];if(!(u?d in n:dt.call(n,d))){return false}}var v=o.get(t);if(v&&o.get(n)){return v==n}var p=true;o.set(t,n);o.set(n,t);var w=u;while(++l<c){d=a[l];var y=t[d],b=n[d];if(e){var m=u?e(b,y,d,n,t,o):e(y,b,d,t,n,o)}if(!(m===undefined?y===b||i(y,b,r,e,o):m)){p=false;break}w||(w=d=="constructor")}if(p&&!w){var _=t.constructor,g=n.constructor;if(_!=g&&("constructor"in t&&"constructor"in n)&&!(typeof _=="function"&&_ instanceof _&&typeof g=="function"&&g instanceof g)){p=false}}o["delete"](t);o["delete"](n);return p}function In(t){return pn(t,Jn,Pn)}function An(t,n){var r=t.__data__;return $n(n)?r[typeof n=="string"?"string":"hash"]:r.map}function Nn(t,n){var r=it(t,n);return _n(r)?r:undefined}function xn(t){var n=dt.call(t,Et),r=t[Et];try{t[Et]=undefined;var e=true}catch(t){}var i=pt.call(t);if(e){if(n){t[Et]=r}else{delete t[Et]}}return i}var Pn=!Ot?Zn:function(t){if(t==null){return[]}t=Object(t);return Q(Ot(t),(function(n){return _t.call(t,n)}))};var Tn=wn;if(It&&Tn(new It(new ArrayBuffer(1)))!=x||At&&Tn(new At)!=w||Nt&&Tn(Nt.resolve())!=_||xt&&Tn(new xt)!=O||Pt&&Tn(new Pt)!=A){Tn=function(t){var n=wn(t),r=n==m?t.constructor:undefined,e=r?Dn(r):"";if(e){switch(e){case Ut:return x;case $t:return w;case Mt:return _;case Rt:return O;case Ct:return A}}return n}}function Un(t,n){n=n==null?u:n;return!!n&&(typeof t=="number"||V.test(t))&&(t>-1&&t%1==0&&t<n)}function $n(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}function Mn(t){return!!vt&&vt in t}function Rn(t){var n=t&&t.constructor,r=typeof n=="function"&&n.prototype||ft;return t===r}function Cn(t){return pt.call(t)}function Dn(t){if(t!=null){try{return lt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function kn(t,n){return t===n||t!==t&&n!==n}var Ln=yn(function(){return arguments}())?yn:function(t){return Wn(t)&&dt.call(t,"callee")&&!_t.call(t,"callee")};var qn=Array.isArray;function Vn(t){return t!=null&&zn(t.length)&&!Gn(t)}var Fn=St||Yn;function Hn(t,n){return bn(t,n)}function Gn(t){if(!Bn(t)){return false}var n=wn(t);return n==v||n==p||n==f||n==g}function zn(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=u}function Bn(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}function Wn(t){return t!=null&&typeof t=="object"}var Kn=Y?rt(Y):gn;function Jn(t){return Vn(t)?dn(t):En(t)}function Zn(){return[]}function Yn(){return false}t.exports=Hn}));function Qa(t,n){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),e=0;e<r.length;e++)r[e]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var u=t.length,a=t.charAt(0),c=Math.log(u)/Math.log(256),f=Math.log(256)/Math.log(u);function h(n){if(n instanceof Uint8Array||(ArrayBuffer.isView(n)?n=new Uint8Array(n.buffer,n.byteOffset,n.byteLength):Array.isArray(n)&&(n=Uint8Array.from(n))),!(n instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(n.length===0)return"";for(var r=0,e=0,i=0,s=n.length;i!==s&&n[i]===0;)i++,r++;for(var o=(s-i)*f+1>>>0,c=new Uint8Array(o);i!==s;){for(var h=n[i],l=0,d=o-1;(h!==0||l<e)&&d!==-1;d--,l++)h+=256*c[d]>>>0,c[d]=h%u>>>0,h=h/u>>>0;if(h!==0)throw new Error("Non-zero carry");e=l,i++}for(var v=o-e;v!==o&&c[v]===0;)v++;for(var p=a.repeat(r);v<o;++v)p+=t.charAt(c[v]);return p}function l(t){if(typeof t!="string")throw new TypeError("Expected String");if(t.length===0)return new Uint8Array;var n=0;if(t[n]!==" "){for(var e=0,i=0;t[n]===a;)e++,n++;for(var s=(t.length-n)*c+1>>>0,o=new Uint8Array(s);t[n];){var f=r[t.charCodeAt(n)];if(f===255)return;for(var h=0,l=s-1;(f!==0||h<i)&&l!==-1;l--,h++)f+=u*o[l]>>>0,o[l]=f%256>>>0,f=f/256>>>0;if(f!==0)throw new Error("Non-zero carry");i=h,n++}if(t[n]!==" "){for(var d=s-i;d!==s&&o[d]===0;)d++;for(var v=new Uint8Array(e+(s-d)),p=e;d!==s;)v[p++]=o[d++];return v}}}function d(t){var r=l(t);if(r)return r;throw new Error(`Non-${n} character`)}return{encode:h,decodeUnsafe:l,decode:d}}var Xa=Qa,tc=Xa;const nc=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},rc=t=>(new TextEncoder).encode(t),ec=t=>(new TextDecoder).decode(t);class ic{constructor(t,n,r){this.name=t,this.prefix=n,this.baseEncode=r}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class sc{constructor(t,n,r){if(this.name=t,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return uc(this,t)}}class oc{constructor(t){this.decoders=t}or(t){return uc(this,t)}decode(t){const n=t[0],r=this.decoders[n];if(r)return r.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const uc=(t,n)=>new oc({...t.decoders||{[t.prefix]:t},...n.decoders||{[n.prefix]:n}});class ac{constructor(t,n,r,e){this.name=t,this.prefix=n,this.baseEncode=r,this.baseDecode=e,this.encoder=new ic(t,n,r),this.decoder=new sc(t,n,e)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const cc=({name:t,prefix:n,encode:r,decode:e})=>new ac(t,n,r,e),fc=({prefix:t,name:n,alphabet:r})=>{const{encode:e,decode:i}=tc(r,n);return cc({prefix:t,name:n,encode:e,decode:t=>nc(i(t))})},hc=(t,n,r,e)=>{const i={};for(let t=0;t<n.length;++t)i[n[t]]=t;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let u=0,a=0,c=0;for(let n=0;n<s;++n){const s=i[t[n]];if(s===void 0)throw new SyntaxError(`Non-${e} character`);a=a<<r|s,u+=r,u>=8&&(u-=8,o[c++]=255&a>>u)}if(u>=r||255&a<<8-u)throw new SyntaxError("Unexpected end of data");return o},lc=(t,n,r)=>{const e=n[n.length-1]==="=",i=(1<<r)-1;let s="",o=0,u=0;for(let e=0;e<t.length;++e)for(u=u<<8|t[e],o+=8;o>r;)o-=r,s+=n[i&u>>o];if(o&&(s+=n[i&u<<r-o]),e)for(;s.length*r&7;)s+="=";return s},dc=({name:t,prefix:n,bitsPerChar:r,alphabet:e})=>cc({prefix:n,name:t,encode(t){return lc(t,e,r)},decode(n){return hc(n,e,r,t)}}),vc=cc({prefix:"\0",name:"identity",encode:t=>ec(t),decode:t=>rc(t)});var pc=Object.freeze({__proto__:null,identity:vc});const wc=dc({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var yc=Object.freeze({__proto__:null,base2:wc});const bc=dc({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var mc=Object.freeze({__proto__:null,base8:bc});const _c=fc({prefix:"9",name:"base10",alphabet:"0123456789"});var gc=Object.freeze({__proto__:null,base10:_c});const Ec=dc({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Oc=dc({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Sc=Object.freeze({__proto__:null,base16:Ec,base16upper:Oc});const jc=dc({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Ic=dc({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Ac=dc({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Nc=dc({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),xc=dc({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Pc=dc({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Tc=dc({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Uc=dc({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),$c=dc({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Mc=Object.freeze({__proto__:null,base32:jc,base32upper:Ic,base32pad:Ac,base32padupper:Nc,base32hex:xc,base32hexupper:Pc,base32hexpad:Tc,base32hexpadupper:Uc,base32z:$c});const Rc=fc({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Cc=fc({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Dc=Object.freeze({__proto__:null,base36:Rc,base36upper:Cc});const kc=fc({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Lc=fc({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var qc=Object.freeze({__proto__:null,base58btc:kc,base58flickr:Lc});const Vc=dc({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Fc=dc({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Hc=dc({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Gc=dc({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var zc=Object.freeze({__proto__:null,base64:Vc,base64pad:Fc,base64url:Hc,base64urlpad:Gc});const Bc=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),Wc=Bc.reduce(((t,n,r)=>(t[r]=n,t)),[]),Kc=Bc.reduce(((t,n,r)=>(t[n.codePointAt(0)]=r,t)),[]);function Jc(t){return t.reduce(((t,n)=>(t+=Wc[n],t)),"")}function Zc(t){const n=[];for(const r of t){const t=Kc[r.codePointAt(0)];if(t===void 0)throw new Error(`Non-base256emoji character: ${r}`);n.push(t)}return new Uint8Array(n)}const Yc=cc({prefix:"🚀",name:"base256emoji",encode:Jc,decode:Zc});var Qc=Object.freeze({__proto__:null,base256emoji:Yc}),Xc=sf,tf=128,nf=127,rf=~nf,ef=Math.pow(2,31);function sf(t,n,r){n=n||[],r=r||0;for(var e=r;t>=ef;)n[r++]=t&255|tf,t/=128;for(;t&rf;)n[r++]=t&255|tf,t>>>=7;return n[r]=t|0,sf.bytes=r-e+1,n}var of=cf,uf=128,af=127;function cf(t,n){var r=0,n=n||0,e=0,i=n,s,o=t.length;do{if(i>=o)throw cf.bytes=0,new RangeError("Could not decode varint");s=t[i++],r+=e<28?(s&af)<<e:(s&af)*Math.pow(2,e),e+=7}while(s>=uf);return cf.bytes=i-n,r}var ff=Math.pow(2,7),hf=Math.pow(2,14),lf=Math.pow(2,21),df=Math.pow(2,28),vf=Math.pow(2,35),pf=Math.pow(2,42),wf=Math.pow(2,49),yf=Math.pow(2,56),bf=Math.pow(2,63),mf=function(t){return t<ff?1:t<hf?2:t<lf?3:t<df?4:t<vf?5:t<pf?6:t<wf?7:t<yf?8:t<bf?9:10},_f={encode:Xc,decode:of,encodingLength:mf},gf=_f;const Ef=(t,n,r=0)=>(gf.encode(t,n,r),n),Of=t=>gf.encodingLength(t),Sf=(t,n)=>{const r=n.byteLength,e=Of(t),i=e+Of(r),s=new Uint8Array(i+r);return Ef(t,s,0),Ef(r,s,e),s.set(n,i),new jf(t,r,n,s)};class jf{constructor(t,n,r,e){this.code=t,this.size=n,this.digest=r,this.bytes=e}}const If=({name:t,code:n,encode:r})=>new Af(t,n,r);class Af{constructor(t,n,r){this.name=t,this.code=n,this.encode=r}digest(t){if(t instanceof Uint8Array){const n=this.encode(t);return n instanceof Uint8Array?Sf(this.code,n):n.then((t=>Sf(this.code,t)))}else throw Error("Unknown type, must be binary type")}}const Nf=t=>async n=>new Uint8Array(await crypto.subtle.digest(t,n)),xf=If({name:"sha2-256",code:18,encode:Nf("SHA-256")}),Pf=If({name:"sha2-512",code:19,encode:Nf("SHA-512")});Object.freeze({__proto__:null,sha256:xf,sha512:Pf});const Tf=0,Uf="identity",$f=nc,Mf=t=>Sf(Tf,$f(t)),Rf={code:Tf,name:Uf,encode:$f,digest:Mf};Object.freeze({__proto__:null,identity:Rf});new TextEncoder,new TextDecoder;const Cf={...pc,...yc,...mc,...gc,...Sc,...Mc,...Dc,...qc,...zc,...Qc};function Df(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function kf(t,n,r,e){return{name:t,prefix:n,encoder:{name:t,prefix:n,encode:r},decoder:{decode:e}}}const Lf=kf("utf8","u",(t=>"u"+new TextDecoder("utf8").decode(t)),(t=>(new TextEncoder).encode(t.substring(1)))),qf=kf("ascii","a",(t=>{let n="a";for(let r=0;r<t.length;r++)n+=String.fromCharCode(t[r]);return n}),(t=>{t=t.substring(1);const n=Df(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n})),Vf={utf8:Lf,"utf-8":Lf,hex:Cf.base16,latin1:qf,ascii:qf,binary:qf,...Cf};function Ff(t,n="utf8"){const r=Vf[n];if(!r)throw new Error(`Unsupported encoding "${n}"`);return(n==="utf8"||n==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):r.decoder.decode(`${r.prefix}${t}`)}const Hf="wc",Gf=2,zf="core",Bf=`${Hf}@${2}:${zf}:`,Wf={name:zf,logger:"error"},Kf={database:":memory:"},Jf="crypto",Zf="client_ed25519_seed",Yf=wn.ONE_DAY,Qf="keychain",Xf="0.3",th="messages",nh="0.3",rh=wn.SIX_HOURS,eh="publisher",ih="irn",sh="error",oh="wss://relay.walletconnect.com",uh="relayer",ah={message:"relayer_message",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},ch="_subscription",fh={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},hh=wn.ONE_SECOND,lh="2.7.0",dh="0.3",vh={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},ph="subscription",wh="0.3",yh=wn.FIVE_SECONDS*1e3,bh="pairing",mh="0.3",_h={wc_pairingDelete:{req:{ttl:wn.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:wn.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:wn.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:wn.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:wn.ONE_DAY,prompt:!1,tag:0},res:{ttl:wn.ONE_DAY,prompt:!1,tag:0}}},gh={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},Eh="history",Oh="0.3",Sh="expirer",jh={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},Ih="0.3",Ah="verify-api",Nh="https://verify.walletconnect.com";class xh{constructor(t,n){this.core=t,this.logger=n,this.keychain=new Map,this.name=Qf,this.version=Xf,this.initialized=!1,this.storagePrefix=Bf,this.init=async()=>{if(!this.initialized){const t=await this.getKeyChain();typeof t<"u"&&(this.keychain=t),this.initialized=!0}},this.has=t=>(this.isInitialized(),this.keychain.has(t)),this.set=async(t,n)=>{this.isInitialized(),this.keychain.set(t,n),await this.persist()},this.get=t=>{this.isInitialized();const n=this.keychain.get(t);if(typeof n>"u"){const{message:n}=Wo("NO_MATCHING_KEY",`${this.name}: ${t}`);throw new Error(n)}return n},this.del=async t=>{this.isInitialized(),this.keychain.delete(t),await this.persist()},this.core=t,this.logger=Ir.generateChildLogger(n,this.name)}get context(){return Ir.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setKeyChain(t){await this.core.storage.setItem(this.storageKey,wo(t))}async getKeyChain(){const t=await this.core.storage.getItem(this.storageKey);return typeof t<"u"?yo(t):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:t}=Wo("NOT_INITIALIZED",this.name);throw new Error(t)}}}class Ph{constructor(t,n,r){this.core=t,this.logger=n,this.name=Jf,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=t=>(this.isInitialized(),this.keychain.has(t)),this.getClientId=async()=>{this.isInitialized();const t=await this.getClientSeed(),n=Ei(t);return bi(n.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const t=Rs();return this.setPrivateKey(t.publicKey,t.privateKey)},this.signJWT=async t=>{this.isInitialized();const n=await this.getClientSeed(),r=Ei(n),e=Cs(),i=Yf;return await Oi(e,t,i,r)},this.generateSharedKey=(t,n,r)=>{this.isInitialized();const e=this.getPrivateKey(t),i=Ds(e,n);return this.setSymKey(i,r)},this.setSymKey=async(t,n)=>{this.isInitialized();const r=n||ks(t);return await this.keychain.set(r,t),r},this.deleteKeyPair=async t=>{this.isInitialized(),await this.keychain.del(t)},this.deleteSymKey=async t=>{this.isInitialized(),await this.keychain.del(t)},this.encode=async(t,n,r)=>{this.isInitialized();const e=Ws(r),i=Vr(n);if(Ks(e)){const n=e.senderPublicKey,r=e.receiverPublicKey;t=await this.generateSharedKey(n,r)}const s=this.getSymKey(t),{type:o,senderPublicKey:u}=e;return Fs({type:o,symKey:s,message:i,senderPublicKey:u})},this.decode=async(t,n,r)=>{this.isInitialized();const e=Bs(n,r);if(Ks(e)){const n=e.receiverPublicKey,r=e.senderPublicKey;t=await this.generateSharedKey(n,r)}const i=this.getSymKey(t),s=Hs({symKey:i,encoded:n});return qr(s)},this.getPayloadType=t=>{const n=zs(t);return Vs(n.type)},this.getPayloadSenderPublicKey=t=>{const n=zs(t);return n.senderPublicKey?Bi.toString(n.senderPublicKey,Is):void 0},this.core=t,this.logger=Ir.generateChildLogger(n,this.name),this.keychain=r||new xh(this.core,this.logger)}get context(){return Ir.getLoggerContext(this.logger)}async setPrivateKey(t,n){return await this.keychain.set(t,n),t}getPrivateKey(t){return this.keychain.get(t)}async getClientSeed(){let t="";try{t=this.keychain.get(Zf)}catch{t=Cs(),await this.keychain.set(Zf,t)}return Ff(t,"base16")}getSymKey(t){return this.keychain.get(t)}isInitialized(){if(!this.initialized){const{message:t}=Wo("NOT_INITIALIZED",this.name);throw new Error(t)}}}class Th extends xr{constructor(t,n){super(t,n),this.logger=t,this.core=n,this.messages=new Map,this.name=th,this.version=nh,this.initialized=!1,this.storagePrefix=Bf,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const t=await this.getRelayerMessages();typeof t<"u"&&(this.messages=t),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(t){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(t)}finally{this.initialized=!0}}},this.set=async(t,n)=>{this.isInitialized();const r=Ls(n);let e=this.messages.get(t);return typeof e>"u"&&(e={}),typeof e[r]<"u"||(e[r]=n,this.messages.set(t,e),await this.persist()),r},this.get=t=>{this.isInitialized();let n=this.messages.get(t);return typeof n>"u"&&(n={}),n},this.has=(t,n)=>{this.isInitialized();const r=this.get(t),e=Ls(n);return typeof r[e]<"u"},this.del=async t=>{this.isInitialized(),this.messages.delete(t),await this.persist()},this.logger=Ir.generateChildLogger(t,this.name),this.core=n}get context(){return Ir.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setRelayerMessages(t){await this.core.storage.setItem(this.storageKey,wo(t))}async getRelayerMessages(){const t=await this.core.storage.getItem(this.storageKey);return typeof t<"u"?yo(t):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:t}=Wo("NOT_INITIALIZED",this.name);throw new Error(t)}}}class Uh extends Pr{constructor(t,n){super(t,n),this.relayer=t,this.logger=n,this.events=new v.EventEmitter,this.name=eh,this.queue=new Map,this.publishTimeout=1e4,this.publish=async(t,n,r)=>{this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:t,message:n,opts:r}});try{const e=r?.ttl||rh,i=No(r),s=r?.prompt||!1,o=r?.tag||0,u={topic:t,message:n,opts:{ttl:e,relay:i,prompt:s,tag:o}},a=Ls(n);this.queue.set(a,u);try{await await mo(this.rpcPublish(t,n,e,i,s,o),this.publishTimeout),this.relayer.events.emit(ah.publish,u)}catch{this.logger.debug("Publishing Payload stalled"),this.relayer.events.emit(ah.connection_stalled);return}this.onPublish(a,u),this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:t,message:n,opts:r}})}catch(t){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(t),t}},this.on=(t,n)=>{this.events.on(t,n)},this.once=(t,n)=>{this.events.once(t,n)},this.off=(t,n)=>{this.events.off(t,n)},this.removeListener=(t,n)=>{this.events.removeListener(t,n)},this.relayer=t,this.logger=Ir.generateChildLogger(n,this.name),this.registerEventListeners()}get context(){return Ir.getLoggerContext(this.logger)}rpcPublish(t,n,r,e,i,s){var o,u,a,c;const f={method:xo(e.protocol).publish,params:{topic:t,message:n,ttl:r,prompt:i,tag:s}};return Yo((o=f.params)==null?void 0:o.prompt)&&((u=f.params)==null||delete u.prompt),Yo((a=f.params)==null?void 0:a.tag)&&((c=f.params)==null||delete c.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:f}),this.relayer.request(f)}onPublish(t,n){this.queue.delete(t)}checkQueue(){this.queue.forEach((async t=>{const{topic:n,message:r,opts:e}=t;await this.publish(n,r,e)}))}registerEventListeners(){this.relayer.core.heartbeat.on(In.HEARTBEAT_EVENTS.pulse,(()=>{this.checkQueue()}))}}class $h{constructor(){this.map=new Map,this.set=(t,n)=>{const r=this.get(t);this.exists(t,n)||this.map.set(t,[...r,n])},this.get=t=>this.map.get(t)||[],this.exists=(t,n)=>this.get(t).includes(n),this.delete=(t,n)=>{if(typeof n>"u"){this.map.delete(t);return}if(!this.map.has(t))return;const r=this.get(t);if(!this.exists(t,n))return;const e=r.filter((t=>t!==n));if(!e.length){this.map.delete(t);return}this.map.set(t,e)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var Mh=Object.defineProperty,Rh=Object.defineProperties,Ch=Object.getOwnPropertyDescriptors,Dh=Object.getOwnPropertySymbols,kh=Object.prototype.hasOwnProperty,Lh=Object.prototype.propertyIsEnumerable,qh=(t,n,r)=>n in t?Mh(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,Vh=(t,n)=>{for(var r in n||(n={}))kh.call(n,r)&&qh(t,r,n[r]);if(Dh)for(var r of Dh(n))Lh.call(n,r)&&qh(t,r,n[r]);return t},Fh=(t,n)=>Rh(t,Ch(n));class Hh extends $r{constructor(t,n){super(t,n),this.relayer=t,this.logger=n,this.subscriptions=new Map,this.topicMap=new $h,this.events=new v.EventEmitter,this.name=ph,this.version=wh,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=Bf,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restart(),this.registerEventListeners(),this.onEnable(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(t,n)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:t,opts:n}});try{const r=No(n),e={topic:t,relay:r};this.pending.set(t,e);const i=await this.rpcSubscribe(t,r);return this.onSubscribe(i,e),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:t,opts:n}}),i}catch(t){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(t),t}},this.unsubscribe=async(t,n)=>{await this.restartToComplete(),this.isInitialized(),typeof n?.id<"u"?await this.unsubscribeById(t,n.id,n):await this.unsubscribeByTopic(t,n)},this.isSubscribed=async t=>this.topics.includes(t)?!0:await new Promise(((n,r)=>{const e=new wn.Watch;e.start(this.pendingSubscriptionWatchLabel);const i=setInterval((()=>{!this.pending.has(t)&&this.topics.includes(t)&&(clearInterval(i),e.stop(this.pendingSubscriptionWatchLabel),n(!0)),e.elapsed(this.pendingSubscriptionWatchLabel)>=yh&&(clearInterval(i),e.stop(this.pendingSubscriptionWatchLabel),r(!1))}),this.pollingInterval)})),this.on=(t,n)=>{this.events.on(t,n)},this.once=(t,n)=>{this.events.once(t,n)},this.off=(t,n)=>{this.events.off(t,n)},this.removeListener=(t,n)=>{this.events.removeListener(t,n)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=t,this.logger=Ir.generateChildLogger(n,this.name),this.clientId=""}get context(){return Ir.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(t,n){let r=!1;try{r=this.getSubscription(t).topic===n}catch{}return r}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(t,n){const r=this.topicMap.get(t);await Promise.all(r.map((async r=>await this.unsubscribeById(t,r,n))))}async unsubscribeById(t,n,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:t,id:n,opts:r}});try{const e=No(r);await this.rpcUnsubscribe(t,n,e);const i=Ko("USER_DISCONNECTED",`${this.name}, ${t}`);await this.onUnsubscribe(t,n,i),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:t,id:n,opts:r}})}catch(t){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(t),t}}async rpcSubscribe(t,n){const r={method:xo(n.protocol).subscribe,params:{topic:t}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{await await mo(this.relayer.request(r),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(ah.connection_stalled)}return Ls(t+this.clientId)}async rpcBatchSubscribe(t){if(!t.length)return;const n=t[0].relay,r={method:xo(n.protocol).batchSubscribe,params:{topics:t.map((t=>t.topic))}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{return await await mo(this.relayer.request(r),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(ah.connection_stalled)}}rpcUnsubscribe(t,n,r){const e={method:xo(r.protocol).unsubscribe,params:{topic:t,id:n}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:e}),this.relayer.request(e)}onSubscribe(t,n){this.setSubscription(t,Fh(Vh({},n),{id:t})),this.pending.delete(n.topic)}onBatchSubscribe(t){t.length&&t.forEach((t=>{this.setSubscription(t.id,Vh({},t)),this.pending.delete(t.topic)}))}async onUnsubscribe(t,n,r){this.events.removeAllListeners(n),this.hasSubscription(n,t)&&this.deleteSubscription(n,r),await this.relayer.messages.del(t)}async setRelayerSubscriptions(t){await this.relayer.core.storage.setItem(this.storageKey,t)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(t,n){this.subscriptions.has(t)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:t,subscription:n}),this.addSubscription(t,n))}addSubscription(t,n){this.subscriptions.set(t,Vh({},n)),this.topicMap.set(n.topic,t),this.events.emit(vh.created,n)}getSubscription(t){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:t});const n=this.subscriptions.get(t);if(!n){const{message:n}=Wo("NO_MATCHING_KEY",`${this.name}: ${t}`);throw new Error(n)}return n}deleteSubscription(t,n){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:t,reason:n});const r=this.getSubscription(t);this.subscriptions.delete(t),this.topicMap.delete(r.topic,t),this.events.emit(vh.deleted,Fh(Vh({},r),{reason:n}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(vh.sync)}async reset(){if(this.cached.length){const t=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let n=0;n<t;n++){const t=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(t)}}this.events.emit(vh.resubscribed)}async restore(){try{const t=await this.getRelayerSubscriptions();if(typeof t>"u"||!t.length)return;if(this.subscriptions.size){const{message:t}=Wo("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(t)}this.cached=t,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(t){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(t)}}async batchSubscribe(t){if(!t.length)return;const n=await this.rpcBatchSubscribe(t);Jo(n)&&this.onBatchSubscribe(n.map(((n,r)=>Fh(Vh({},t[r]),{id:n}))))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(this.relayer.transportExplicitlyClosed)return;const t=[];this.pending.forEach((n=>{t.push(n)})),await this.batchSubscribe(t)}registerEventListeners(){this.relayer.core.heartbeat.on(In.HEARTBEAT_EVENTS.pulse,(async()=>{await this.checkPending()})),this.relayer.on(ah.connect,(async()=>{await this.onConnect()})),this.relayer.on(ah.disconnect,(()=>{this.onDisconnect()})),this.events.on(vh.created,(async t=>{const n=vh.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:t}),await this.persist()})),this.events.on(vh.deleted,(async t=>{const n=vh.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:t}),await this.persist()}))}isInitialized(){if(!this.initialized){const{message:t}=Wo("NOT_INITIALIZED",this.name);throw new Error(t)}}async restartToComplete(){this.restartInProgress&&await new Promise((t=>{const n=setInterval((()=>{this.restartInProgress||(clearInterval(n),t())}),this.pollingInterval)}))}}var Gh=Object.defineProperty,zh=Object.getOwnPropertySymbols,Bh=Object.prototype.hasOwnProperty,Wh=Object.prototype.propertyIsEnumerable,Kh=(t,n,r)=>n in t?Gh(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,Jh=(t,n)=>{for(var r in n||(n={}))Bh.call(n,r)&&Kh(t,r,n[r]);if(zh)for(var r of zh(n))Wh.call(n,r)&&Kh(t,r,n[r]);return t};class Zh extends Tr{constructor(t){super(t),this.protocol="wc",this.version=2,this.events=new v.EventEmitter,this.name=uh,this.transportExplicitlyClosed=!1,this.initialized=!1,this.reconnecting=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.request=async t=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(t)}catch(t){throw this.logger.debug("Failed to Publish Request"),this.logger.error(t),t}},this.core=t.core,this.logger=typeof t.logger<"u"&&typeof t.logger!="string"?Ir.generateChildLogger(t.logger,this.name):Ir.pino(Ir.getDefaultLoggerOptions({level:t.logger||sh})),this.messages=new Th(this.logger,t.core),this.subscriber=new Hh(this,this.logger),this.publisher=new Uh(this,this.logger),this.relayUrl=t?.relayUrl||oh,this.projectId=t.projectId,this.provider={}}async init(){this.logger.trace("Initialized"),await this.createProvider(),await Promise.all([this.messages.init(),this.transportOpen(),this.subscriber.init()]),this.registerEventListeners(),this.initialized=!0}get context(){return Ir.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(t,n,r){this.isInitialized(),await this.publisher.publish(t,n,r),await this.recordMessageEvent({topic:t,message:n,publishedAt:Date.now()})}async subscribe(t,n){this.isInitialized();let r="";return await Promise.all([new Promise((n=>{this.subscriber.once(vh.created,(r=>{r.topic===t&&n()}))})),new Promise((async e=>{r=await this.subscriber.subscribe(t,n),e()}))]),r}async unsubscribe(t,n){this.isInitialized(),await this.subscriber.unsubscribe(t,n)}on(t,n){this.events.on(t,n)}once(t,n){this.events.once(t,n)}off(t,n){this.events.off(t,n)}removeListener(t,n){this.events.removeListener(t,n)}async transportClose(){this.transportExplicitlyClosed=!0,this.connected&&(await this.provider.disconnect(),this.events.emit(ah.transport_closed))}async transportOpen(t){if(this.transportExplicitlyClosed=!1,!this.reconnecting){this.relayUrl=t||this.relayUrl,this.reconnecting=!0;try{await Promise.all([new Promise((t=>{this.initialized||t(),this.subscriber.once(vh.resubscribed,(()=>{t()}))})),await Promise.race([new Promise((async(t,n)=>{await mo(this.provider.connect(),5e3,"socket stalled").catch((t=>n(t))).then((()=>t())).finally((()=>this.removeListener(ah.transport_closed,this.rejectTransportOpen)))})),new Promise((t=>this.once(ah.transport_closed,this.rejectTransportOpen)))])])}catch(t){this.logger.error(t);const n=t;if(!this.isConnectionStalled(n.message))throw t;this.events.emit(ah.transport_closed)}finally{this.reconnecting=!1}}}async restartTransport(t){this.transportExplicitlyClosed||(this.relayUrl=t||this.relayUrl,await Promise.all([new Promise((t=>{this.provider.once(fh.disconnect,(()=>{t()}))})),this.transportClose()]),await new Promise((t=>setTimeout(t,1e3))),await this.createProvider(),await this.transportOpen())}isConnectionStalled(t){return this.staleConnectionErrors.some((n=>t.includes(n)))}rejectTransportOpen(){throw new Error("closeTransport called before connection was established")}async createProvider(){const t=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Va(new Za(vo({sdkVersion:lh,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:t,useOnCloseEvent:!0}))),this.registerProviderListeners()}async recordMessageEvent(t){const{topic:n,message:r}=t;await this.messages.set(n,r)}async shouldIgnoreMessageEvent(t){const{topic:n,message:r}=t;return await this.subscriber.isSubscribed(n)?this.messages.has(n,r):!0}async onProviderPayload(t){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:t}),Da(t)){if(!t.method.endsWith(ch))return;const n=t.params,{topic:r,message:e,publishedAt:i}=n.data,s={topic:r,message:e,publishedAt:i};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(Jh({type:"event",event:n.id},s)),this.events.emit(n.id,s),await this.acknowledgePayload(t),await this.onMessageEvent(s)}}async onMessageEvent(t){await this.shouldIgnoreMessageEvent(t)||(this.events.emit(ah.message,t),await this.recordMessageEvent(t))}async acknowledgePayload(t){const n=Oa(t.id,!0);await this.provider.connection.send(n)}registerProviderListeners(){this.provider.on(fh.payload,(t=>this.onProviderPayload(t))),this.provider.on(fh.connect,(()=>{this.events.emit(ah.connect)})),this.provider.on(fh.disconnect,(()=>{this.onProviderDisconnect()})),this.provider.on(fh.error,(t=>{this.logger.error(t),this.events.emit(ah.error,t)}))}registerEventListeners(){this.events.on(ah.connection_stalled,(async()=>{await this.restartTransport()}))}onProviderDisconnect(){this.events.emit(ah.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||setTimeout((async()=>{await this.restartTransport()}),wn.toMiliseconds(hh))}isInitialized(){if(!this.initialized){const{message:t}=Wo("NOT_INITIALIZED",this.name);throw new Error(t)}}async toEstablishConnection(){if(!this.connected){if(this.connecting)return await new Promise((t=>{const n=setInterval((()=>{this.connected&&(clearInterval(n),t())}),this.connectionStatusPollingInterval)}));await this.restartTransport()}}}var Yh=Object.defineProperty,Qh=Object.getOwnPropertySymbols,Xh=Object.prototype.hasOwnProperty,tl=Object.prototype.propertyIsEnumerable,nl=(t,n,r)=>n in t?Yh(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,rl=(t,n)=>{for(var r in n||(n={}))Xh.call(n,r)&&nl(t,r,n[r]);if(Qh)for(var r of Qh(n))tl.call(n,r)&&nl(t,r,n[r]);return t};class el extends Ur{constructor(t,n,r,e=Bf,i=void 0){super(t,n,r,e),this.core=t,this.logger=n,this.name=r,this.map=new Map,this.version=dh,this.cached=[],this.initialized=!1,this.storagePrefix=Bf,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach((t=>{this.getKey&&t!==null&&!Yo(t)?this.map.set(this.getKey(t),t):iu(t)?this.map.set(t.id,t):su(t)&&this.map.set(t.topic,t)})),this.cached=[],this.initialized=!0)},this.set=async(t,n)=>{this.isInitialized(),this.map.has(t)?await this.update(t,n):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:t,value:n}),this.map.set(t,n),await this.persist())},this.get=t=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:t}),this.getData(t)),this.getAll=t=>(this.isInitialized(),t?this.values.filter((n=>Object.keys(t).every((r=>Ya(n[r],t[r]))))):this.values),this.update=async(t,n)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:t,update:n});const r=rl(rl({},this.getData(t)),n);this.map.set(t,r),await this.persist()},this.delete=async(t,n)=>{this.isInitialized(),this.map.has(t)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:t,reason:n}),this.map.delete(t),await this.persist())},this.logger=Ir.generateChildLogger(n,this.name),this.storagePrefix=e,this.getKey=i}get context(){return Ir.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(t){await this.core.storage.setItem(this.storageKey,t)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(t){const n=this.map.get(t);if(!n){const{message:n}=Wo("NO_MATCHING_KEY",`${this.name}: ${t}`);throw this.logger.error(n),new Error(n)}return n}async persist(){await this.setDataStore(this.values)}async restore(){try{const t=await this.getDataStore();if(typeof t>"u"||!t.length)return;if(this.map.size){const{message:t}=Wo("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=t,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(t){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(t)}}isInitialized(){if(!this.initialized){const{message:t}=Wo("NOT_INITIALIZED",this.name);throw new Error(t)}}}class il{constructor(t,n){this.core=t,this.logger=n,this.name=bh,this.version=mh,this.events=new v,this.initialized=!1,this.storagePrefix=Bf,this.ignoredPayloadTypes=[Ps],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:t})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...t])]},this.create=async()=>{this.isInitialized();const t=Cs(),n=await this.core.crypto.setSymKey(t),r=So(wn.FIVE_MINUTES),e={protocol:ih},i={topic:n,expiry:r,relay:e,active:!1},s=Lo({protocol:this.core.protocol,version:this.core.version,topic:n,symKey:t,relay:e});return await this.pairings.set(n,i),await this.core.relayer.subscribe(n),this.core.expirer.set(n,r),{topic:n,uri:s}},this.pair=async t=>{this.isInitialized(),this.isValidPair(t);const{topic:n,symKey:r,relay:e}=Do(t.uri);if(this.pairings.keys.includes(n))throw new Error(`Pairing already exists: ${n}`);if(this.core.crypto.hasKeys(n))throw new Error(`Keychain already exists: ${n}`);const i=So(wn.FIVE_MINUTES),s={topic:n,relay:e,expiry:i,active:!1};return await this.pairings.set(n,s),await this.core.crypto.setSymKey(r,n),await this.core.relayer.subscribe(n,{relay:e}),this.core.expirer.set(n,i),t.activatePairing&&await this.activate({topic:n}),s},this.activate=async({topic:t})=>{this.isInitialized();const n=So(wn.THIRTY_DAYS);await this.pairings.update(t,{active:!0,expiry:n}),this.core.expirer.set(t,n)},this.ping=async t=>{this.isInitialized(),await this.isValidPing(t);const{topic:n}=t;if(this.pairings.keys.includes(n)){const t=await this.sendRequest(n,"wc_pairingPing",{}),{done:r,resolve:e,reject:i}=bo();this.events.once(Io("pairing_ping",t),(({error:t})=>{t?i(t):e()})),await r()}},this.updateExpiry=async({topic:t,expiry:n})=>{this.isInitialized(),await this.pairings.update(t,{expiry:n})},this.updateMetadata=async({topic:t,metadata:n})=>{this.isInitialized(),await this.pairings.update(t,{peerMetadata:n})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async t=>{this.isInitialized(),await this.isValidDisconnect(t);const{topic:n}=t;this.pairings.keys.includes(n)&&(await this.sendRequest(n,"wc_pairingDelete",Ko("USER_DISCONNECTED")),await this.deletePairing(n))},this.sendRequest=async(t,n,r)=>{const e=Ea(n,r),i=await this.core.crypto.encode(t,e),s=_h[n].req;return this.core.history.set(t,e),await this.core.relayer.publish(t,i,s),e.id},this.sendResult=async(t,n,r)=>{const e=Oa(t,r),i=await this.core.crypto.encode(n,e),s=await this.core.history.get(n,t),o=_h[s.request.method].res;await this.core.relayer.publish(n,i,o),await this.core.history.resolve(e)},this.sendError=async(t,n,r)=>{const e=Sa(t,r),i=await this.core.crypto.encode(n,e),s=await this.core.history.get(n,t),o=_h[s.request.method]?_h[s.request.method].res:_h.unregistered_method.res;await this.core.relayer.publish(n,i,o),await this.core.history.resolve(e)},this.deletePairing=async(t,n)=>{await this.core.relayer.unsubscribe(t),await Promise.all([this.pairings.delete(t,Ko("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(t),n?Promise.resolve():this.core.expirer.del(t)])},this.cleanup=async()=>{const t=this.pairings.getAll().filter((t=>jo(t.expiry)));await Promise.all(t.map((t=>this.deletePairing(t.topic))))},this.onRelayEventRequest=t=>{const{topic:n,payload:r}=t,e=r.method;if(this.pairings.keys.includes(n))switch(e){case"wc_pairingPing":return this.onPairingPingRequest(n,r);case"wc_pairingDelete":return this.onPairingDeleteRequest(n,r);default:return this.onUnknownRpcMethodRequest(n,r)}},this.onRelayEventResponse=async t=>{const{topic:n,payload:r}=t,e=(await this.core.history.get(n,r.id)).request.method;if(this.pairings.keys.includes(n))switch(e){case"wc_pairingPing":return this.onPairingPingResponse(n,r);default:return this.onUnknownRpcMethodResponse(e)}},this.onPairingPingRequest=async(t,n)=>{const{id:r}=n;try{this.isValidPing({topic:t}),await this.sendResult(r,t,!0),this.events.emit("pairing_ping",{id:r,topic:t})}catch(n){await this.sendError(r,t,n),this.logger.error(n)}},this.onPairingPingResponse=(t,n)=>{const{id:r}=n;setTimeout((()=>{La(n)?this.events.emit(Io("pairing_ping",r),{}):qa(n)&&this.events.emit(Io("pairing_ping",r),{error:n.error})}),500)},this.onPairingDeleteRequest=async(t,n)=>{const{id:r}=n;try{this.isValidDisconnect({topic:t}),await this.deletePairing(t),this.events.emit("pairing_delete",{id:r,topic:t})}catch(n){await this.sendError(r,t,n),this.logger.error(n)}},this.onUnknownRpcMethodRequest=async(t,n)=>{const{id:r,method:e}=n;try{if(this.registeredMethods.includes(e))return;const n=Ko("WC_METHOD_UNSUPPORTED",e);await this.sendError(r,t,n),this.logger.error(n)}catch(n){await this.sendError(r,t,n),this.logger.error(n)}},this.onUnknownRpcMethodResponse=t=>{this.registeredMethods.includes(t)||this.logger.error(Ko("WC_METHOD_UNSUPPORTED",t))},this.isValidPair=t=>{if(!mu(t)){const{message:n}=Wo("MISSING_OR_INVALID",`pair() params: ${t}`);throw new Error(n)}if(!eu(t.uri)){const{message:n}=Wo("MISSING_OR_INVALID",`pair() uri: ${t.uri}`);throw new Error(n)}},this.isValidPing=async t=>{if(!mu(t)){const{message:n}=Wo("MISSING_OR_INVALID",`ping() params: ${t}`);throw new Error(n)}const{topic:n}=t;await this.isValidPairingTopic(n)},this.isValidDisconnect=async t=>{if(!mu(t)){const{message:n}=Wo("MISSING_OR_INVALID",`disconnect() params: ${t}`);throw new Error(n)}const{topic:n}=t;await this.isValidPairingTopic(n)},this.isValidPairingTopic=async t=>{if(!Qo(t,!1)){const{message:n}=Wo("MISSING_OR_INVALID",`pairing topic should be a string: ${t}`);throw new Error(n)}if(!this.pairings.keys.includes(t)){const{message:n}=Wo("NO_MATCHING_KEY",`pairing topic doesn't exist: ${t}`);throw new Error(n)}if(jo(this.pairings.get(t).expiry)){await this.deletePairing(t);const{message:n}=Wo("EXPIRED",`pairing topic: ${t}`);throw new Error(n)}},this.core=t,this.logger=Ir.generateChildLogger(n,this.name),this.pairings=new el(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Ir.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){const{message:t}=Wo("NOT_INITIALIZED",this.name);throw new Error(t)}}registerRelayerEvents(){this.core.relayer.on(ah.message,(async t=>{const{topic:n,message:r}=t;if(this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))return;const e=await this.core.crypto.decode(n,r);Da(e)?(this.core.history.set(n,e),this.onRelayEventRequest({topic:n,payload:e})):ka(e)&&(await this.core.history.resolve(e),this.onRelayEventResponse({topic:n,payload:e}))}))}registerExpirerEvents(){this.core.expirer.on(jh.expired,(async t=>{const{topic:n}=Oo(t.target);n&&this.pairings.keys.includes(n)&&(await this.deletePairing(n,!0),this.events.emit("pairing_expire",{topic:n}))}))}}class sl extends Nr{constructor(t,n){super(t,n),this.core=t,this.logger=n,this.records=new Map,this.events=new v.EventEmitter,this.name=Eh,this.version=Oh,this.cached=[],this.initialized=!1,this.storagePrefix=Bf,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach((t=>this.records.set(t.id,t))),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(t,n,r)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:t,request:n,chainId:r}),this.records.has(n.id))return;const e={id:n.id,topic:t,request:{method:n.method,params:n.params||null},chainId:r};this.records.set(e.id,e),this.events.emit(gh.created,e)},this.resolve=async t=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:t}),!this.records.has(t.id))return;const n=await this.getRecord(t.id);typeof n.response>"u"&&(n.response=qa(t)?{error:t.error}:{result:t.result},this.records.set(n.id,n),this.events.emit(gh.updated,n))},this.get=async(t,n)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:t,id:n}),await this.getRecord(n)),this.delete=(t,n)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:n}),this.values.forEach((r=>{if(r.topic===t){if(typeof n<"u"&&r.id!==n)return;this.records.delete(r.id),this.events.emit(gh.deleted,r)}}))},this.exists=async(t,n)=>(this.isInitialized(),this.records.has(n)?(await this.getRecord(n)).topic===t:!1),this.on=(t,n)=>{this.events.on(t,n)},this.once=(t,n)=>{this.events.once(t,n)},this.off=(t,n)=>{this.events.off(t,n)},this.removeListener=(t,n)=>{this.events.removeListener(t,n)},this.logger=Ir.generateChildLogger(n,this.name)}get context(){return Ir.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const t=[];return this.values.forEach((n=>{if(typeof n.response<"u")return;const r={topic:n.topic,request:Ea(n.request.method,n.request.params,n.id),chainId:n.chainId};return t.push(r)})),t}async setJsonRpcRecords(t){await this.core.storage.setItem(this.storageKey,t)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(t){this.isInitialized();const n=this.records.get(t);if(!n){const{message:n}=Wo("NO_MATCHING_KEY",`${this.name}: ${t}`);throw new Error(n)}return n}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(gh.sync)}async restore(){try{const t=await this.getJsonRpcRecords();if(typeof t>"u"||!t.length)return;if(this.records.size){const{message:t}=Wo("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=t,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(t){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(t)}}registerEventListeners(){this.events.on(gh.created,(t=>{const n=gh.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:t}),this.persist()})),this.events.on(gh.updated,(t=>{const n=gh.updated;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:t}),this.persist()})),this.events.on(gh.deleted,(t=>{const n=gh.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:t}),this.persist()}))}isInitialized(){if(!this.initialized){const{message:t}=Wo("NOT_INITIALIZED",this.name);throw new Error(t)}}}class ol extends Mr{constructor(t,n){super(t,n),this.core=t,this.logger=n,this.expirations=new Map,this.events=new v.EventEmitter,this.name=Sh,this.version=Ih,this.cached=[],this.initialized=!1,this.storagePrefix=Bf,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach((t=>this.expirations.set(t.target,t))),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=t=>{try{const n=this.formatTarget(t);return typeof this.getExpiration(n)<"u"}catch{return!1}},this.set=(t,n)=>{this.isInitialized();const r=this.formatTarget(t),e={target:r,expiry:n};this.expirations.set(r,e),this.checkExpiry(r,e),this.events.emit(jh.created,{target:r,expiration:e})},this.get=t=>{this.isInitialized();const n=this.formatTarget(t);return this.getExpiration(n)},this.del=t=>{if(this.isInitialized(),this.has(t)){const n=this.formatTarget(t),r=this.getExpiration(n);this.expirations.delete(n),this.events.emit(jh.deleted,{target:n,expiration:r})}},this.on=(t,n)=>{this.events.on(t,n)},this.once=(t,n)=>{this.events.once(t,n)},this.off=(t,n)=>{this.events.off(t,n)},this.removeListener=(t,n)=>{this.events.removeListener(t,n)},this.logger=Ir.generateChildLogger(n,this.name)}get context(){return Ir.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(t){if(typeof t=="string")return go(t);if(typeof t=="number")return Eo(t);const{message:n}=Wo("UNKNOWN_TYPE",`Target type: ${typeof t}`);throw new Error(n)}async setExpirations(t){await this.core.storage.setItem(this.storageKey,t)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(jh.sync)}async restore(){try{const t=await this.getExpirations();if(typeof t>"u"||!t.length)return;if(this.expirations.size){const{message:t}=Wo("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=t,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(t){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(t)}}getExpiration(t){const n=this.expirations.get(t);if(!n){const{message:n}=Wo("NO_MATCHING_KEY",`${this.name}: ${t}`);throw this.logger.error(n),new Error(n)}return n}checkExpiry(t,n){const{expiry:r}=n;wn.toMiliseconds(r)-Date.now()<=0&&this.expire(t,n)}expire(t,n){this.expirations.delete(t),this.events.emit(jh.expired,{target:t,expiration:n})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach(((t,n)=>this.checkExpiry(n,t)))}registerEventListeners(){this.core.heartbeat.on(In.HEARTBEAT_EVENTS.pulse,(()=>this.checkExpirations())),this.events.on(jh.created,(t=>{const n=jh.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:t}),this.persist()})),this.events.on(jh.expired,(t=>{const n=jh.expired;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:t}),this.persist()})),this.events.on(jh.deleted,(t=>{const n=jh.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:t}),this.persist()}))}isInitialized(){if(!this.initialized){const{message:t}=Wo("NOT_INITIALIZED",this.name);throw new Error(t)}}}class ul extends Rr{constructor(t,n){super(t,n),this.projectId=t,this.logger=n,this.name=Ah,this.initialized=!1,this.init=async t=>{!oo()||!document||(this.verifyUrl=t?.verifyUrl||Nh,await this.createIframe())},this.register=async t=>{var n;this.initialized||await this.init(),this.iframe&&((n=this.iframe.contentWindow)==null||n.postMessage(t.attestationId,this.verifyUrl),this.logger.info(`postMessage sent: ${t.attestationId} ${this.verifyUrl}`))},this.resolve=async t=>{var n;if(this.isDevEnv)return"";this.logger.info(`resolving attestation: ${t.attestationId}`);const r=this.startAbortTimer(wn.FIVE_SECONDS),e=await fetch(`${this.verifyUrl}/attestation/${t.attestationId}`,{signal:this.abortController.signal});return clearTimeout(r),((n=await e.json())==null?void 0:n.origin)||""},this.createIframe=async()=>{try{const t=this.startAbortTimer(wn.FIVE_SECONDS);await Promise.race([new Promise(((n,r)=>{const e=document.createElement("iframe");e.setAttribute("id",Ah),e.setAttribute("src",`${this.verifyUrl}/${this.projectId}`),e.style.display="none",e.addEventListener("load",(()=>{this.initialized=!0,clearTimeout(t),n()})),e.addEventListener("error",(t=>{r(t)})),document.body.append(e),this.iframe=e})),new Promise((t=>{this.abortController.signal.addEventListener("abort",(()=>{t("iframe load timeout")}))}))])}catch(t){this.logger.error(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.error(t)}},this.logger=Ir.generateChildLogger(n,this.name),this.verifyUrl=Nh,this.abortController=new AbortController,this.isDevEnv=io()&&o.env.IS_VITEST}get context(){return Ir.getLoggerContext(this.logger)}startAbortTimer(t){return setTimeout((()=>this.abortController.abort()),So(t))}}var al=Object.defineProperty,cl=Object.getOwnPropertySymbols,fl=Object.prototype.hasOwnProperty,hl=Object.prototype.propertyIsEnumerable,ll=(t,n,r)=>n in t?al(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,dl=(t,n)=>{for(var r in n||(n={}))fl.call(n,r)&&ll(t,r,n[r]);if(cl)for(var r of cl(n))hl.call(n,r)&&ll(t,r,n[r]);return t};class vl extends Ar{constructor(t){super(t),this.protocol=Hf,this.version=Gf,this.name=zf,this.events=new v.EventEmitter,this.initialized=!1,this.on=(t,n)=>this.events.on(t,n),this.once=(t,n)=>this.events.once(t,n),this.off=(t,n)=>this.events.off(t,n),this.removeListener=(t,n)=>this.events.removeListener(t,n),this.projectId=t?.projectId,this.relayUrl=t?.relayUrl||oh;const n=typeof t?.logger<"u"&&typeof t?.logger!="string"?t.logger:Ir.pino(Ir.getDefaultLoggerOptions({level:t?.logger||Wf.logger}));this.logger=Ir.generateChildLogger(n,this.name),this.heartbeat=new In.HeartBeat,this.crypto=new Ph(this,this.logger,t?.keychain),this.history=new sl(this,this.logger),this.expirer=new ol(this,this.logger),this.storage=t!=null&&t.storage?t.storage:new at(dl(dl({},Kf),t?.storageOptions)),this.relayer=new Zh({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new il(this,this.logger),this.verify=new ul(this.projectId||"",this.logger)}static async init(t){const n=new vl(t);return await n.initialize(),n}get context(){return Ir.getLoggerContext(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(t){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,t),this.logger.error(t.message),t}}}const pl=vl;const wl="wc",yl=2,bl="client",ml=`${wl}@${yl}:${bl}:`,_l={name:bl,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},gl="proposal",El="Proposal expired",Ol="session",Sl=wn.SEVEN_DAYS,jl="engine",Il={wc_sessionPropose:{req:{ttl:wn.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:wn.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:wn.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:wn.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:wn.ONE_DAY,prompt:!1,tag:1104},res:{ttl:wn.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:wn.ONE_DAY,prompt:!1,tag:1106},res:{ttl:wn.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:wn.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:wn.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:wn.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:wn.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:wn.ONE_DAY,prompt:!1,tag:1112},res:{ttl:wn.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:wn.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:wn.THIRTY_SECONDS,prompt:!1,tag:1115}}},Al={min:wn.FIVE_MINUTES,max:wn.SEVEN_DAYS},Nl="request",xl=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var Pl=Object.defineProperty,Tl=Object.defineProperties,Ul=Object.getOwnPropertyDescriptors,$l=Object.getOwnPropertySymbols,Ml=Object.prototype.hasOwnProperty,Rl=Object.prototype.propertyIsEnumerable,Cl=(t,n,r)=>n in t?Pl(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,Dl=(t,n)=>{for(var r in n||(n={}))Ml.call(n,r)&&Cl(t,r,n[r]);if($l)for(var r of $l(n))Rl.call(n,r)&&Cl(t,r,n[r]);return t},kl=(t,n)=>Tl(t,Ul(n));class Ll extends Dr{constructor(t){super(t),this.name=jl,this.events=new v,this.initialized=!1,this.ignoredPayloadTypes=[Ps],this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.client.core.pairing.register({methods:Object.keys(Il)}),this.initialized=!0)},this.connect=async t=>{this.isInitialized();const n=kl(Dl({},t),{requiredNamespaces:t.requiredNamespaces||{},optionalNamespaces:t.optionalNamespaces||{}});await this.isValidConnect(n);const{pairingTopic:r,requiredNamespaces:e,optionalNamespaces:i,sessionProperties:s,relays:o}=n;let u=r,a,c=!1;if(u&&(c=this.client.core.pairing.pairings.get(u).active),!u||!c){const{topic:t,uri:n}=await this.client.core.pairing.create();u=t,a=n}const f=await this.client.core.crypto.generateKeyPair(),h=Dl({requiredNamespaces:e,optionalNamespaces:i,relays:o??[{protocol:ih}],proposer:{publicKey:f,metadata:this.client.metadata}},s&&{sessionProperties:s}),{reject:l,resolve:d,done:v}=bo(wn.FIVE_MINUTES,El);if(this.events.once(Io("session_connect"),(async({error:t,session:n})=>{if(t)l(t);else if(n){n.self.publicKey=f;const t=kl(Dl({},n),{requiredNamespaces:n.requiredNamespaces,optionalNamespaces:n.optionalNamespaces});await this.client.session.set(n.topic,t),await this.setExpiry(n.topic,n.expiry),u&&await this.client.core.pairing.updateMetadata({topic:u,metadata:n.peer.metadata}),d(t)}})),!u){const{message:t}=Wo("NO_MATCHING_KEY",`connect() pairing topic: ${u}`);throw new Error(t)}const p=await this.sendRequest(u,"wc_sessionPropose",h),w=So(wn.FIVE_MINUTES);return await this.setProposal(p,Dl({id:p,expiry:w},h)),{uri:a,approval:v}},this.pair=async t=>(this.isInitialized(),await this.client.core.pairing.pair(t)),this.approve=async t=>{this.isInitialized(),await this.isValidApprove(t);const{id:n,relayProtocol:r,namespaces:e,sessionProperties:i}=t,s=this.client.proposal.get(n);let{pairingTopic:o,proposer:u,requiredNamespaces:a,optionalNamespaces:c}=s;o=o||"",Zo(a)||(a=Go(e,"approve()"));const f=await this.client.core.crypto.generateKeyPair(),h=u.publicKey,l=await this.client.core.crypto.generateSharedKey(f,h);o&&n&&(await this.client.core.pairing.updateMetadata({topic:o,metadata:u.metadata}),await this.sendResult(n,o,{relay:{protocol:r??"irn"},responderPublicKey:f}),await this.client.proposal.delete(n,Ko("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:o}));const d=Dl({relay:{protocol:r??"irn"},namespaces:e,requiredNamespaces:a,optionalNamespaces:c,pairingTopic:o,controller:{publicKey:f,metadata:this.client.metadata},expiry:So(Sl)},i&&{sessionProperties:i});await this.client.core.relayer.subscribe(l),await this.sendRequest(l,"wc_sessionSettle",d);const v=kl(Dl({},d),{topic:l,pairingTopic:o,acknowledged:!1,self:d.controller,peer:{publicKey:u.publicKey,metadata:u.metadata},controller:f});return await this.client.session.set(l,v),await this.setExpiry(l,So(Sl)),{topic:l,acknowledged:()=>new Promise((t=>t(this.client.session.get(l))))}},this.reject=async t=>{this.isInitialized(),await this.isValidReject(t);const{id:n,reason:r}=t,{pairingTopic:e}=this.client.proposal.get(n);e&&(await this.sendError(n,e,r),await this.client.proposal.delete(n,Ko("USER_DISCONNECTED")))},this.update=async t=>{this.isInitialized(),await this.isValidUpdate(t);const{topic:n,namespaces:r}=t,e=await this.sendRequest(n,"wc_sessionUpdate",{namespaces:r}),{done:i,resolve:s,reject:o}=bo();return this.events.once(Io("session_update",e),(({error:t})=>{t?o(t):s()})),await this.client.session.update(n,{namespaces:r}),{acknowledged:i}},this.extend=async t=>{this.isInitialized(),await this.isValidExtend(t);const{topic:n}=t,r=await this.sendRequest(n,"wc_sessionExtend",{}),{done:e,resolve:i,reject:s}=bo();return this.events.once(Io("session_extend",r),(({error:t})=>{t?s(t):i()})),await this.setExpiry(n,So(Sl)),{acknowledged:e}},this.request=async t=>{this.isInitialized(),await this.isValidRequest(t);const{chainId:n,request:r,topic:e,expiry:i}=t,s=await this.sendRequest(e,"wc_sessionRequest",{request:r,chainId:n},i),{done:o,resolve:u,reject:a}=bo(i);return this.events.once(Io("session_request",s),(({error:t,result:n})=>{t?a(t):u(n)})),this.client.events.emit("session_request_sent",{topic:e,request:r,chainId:n,id:s}),await o()},this.respond=async t=>{this.isInitialized(),await this.isValidRespond(t);const{topic:n,response:r}=t,{id:e}=r;La(r)?await this.sendResult(e,n,r.result):qa(r)&&await this.sendError(e,n,r.error),this.deletePendingSessionRequest(t.response.id,{message:"fulfilled",code:0})},this.ping=async t=>{this.isInitialized(),await this.isValidPing(t);const{topic:n}=t;if(this.client.session.keys.includes(n)){const t=await this.sendRequest(n,"wc_sessionPing",{}),{done:r,resolve:e,reject:i}=bo();this.events.once(Io("session_ping",t),(({error:t})=>{t?i(t):e()})),await r()}else this.client.core.pairing.pairings.keys.includes(n)&&await this.client.core.pairing.ping({topic:n})},this.emit=async t=>{this.isInitialized(),await this.isValidEmit(t);const{topic:n,event:r,chainId:e}=t;await this.sendRequest(n,"wc_sessionEvent",{event:r,chainId:e})},this.disconnect=async t=>{this.isInitialized(),await this.isValidDisconnect(t);const{topic:n}=t;this.client.session.keys.includes(n)?(await this.sendRequest(n,"wc_sessionDelete",Ko("USER_DISCONNECTED")),await this.deleteSession(n)):await this.client.core.pairing.disconnect({topic:n})},this.find=t=>(this.isInitialized(),this.client.session.getAll().filter((n=>tu(n,t)))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.deleteSession=async(t,n)=>{const{self:r}=this.client.session.get(t);await this.client.core.relayer.unsubscribe(t),await Promise.all([this.client.session.delete(t,Ko("USER_DISCONNECTED")),this.client.core.crypto.deleteKeyPair(r.publicKey),this.client.core.crypto.deleteSymKey(t),n?Promise.resolve():this.client.core.expirer.del(t)])},this.deleteProposal=async(t,n)=>{await Promise.all([this.client.proposal.delete(t,Ko("USER_DISCONNECTED")),n?Promise.resolve():this.client.core.expirer.del(t)])},this.deletePendingSessionRequest=async(t,n,r=!1)=>{await Promise.all([this.client.pendingRequest.delete(t,n),r?Promise.resolve():this.client.core.expirer.del(t)])},this.setExpiry=async(t,n)=>{this.client.session.keys.includes(t)&&await this.client.session.update(t,{expiry:n}),this.client.core.expirer.set(t,n)},this.setProposal=async(t,n)=>{await this.client.proposal.set(t,n),this.client.core.expirer.set(t,n.expiry)},this.setPendingSessionRequest=async t=>{const n=Il.wc_sessionRequest.req.ttl,{id:r,topic:e,params:i}=t;await this.client.pendingRequest.set(r,{id:r,topic:e,params:i}),n&&this.client.core.expirer.set(r,So(n))},this.sendRequest=async(t,n,r,e)=>{const i=Ea(n,r);if(oo()&&xl.includes(n)){const t=Ls(JSON.stringify(i));await this.client.core.verify.register({attestationId:t})}const s=await this.client.core.crypto.encode(t,i),o=Il[n].req;return e&&(o.ttl=e),this.client.core.history.set(t,i),this.client.core.relayer.publish(t,s,o),i.id},this.sendResult=async(t,n,r)=>{const e=Oa(t,r),i=await this.client.core.crypto.encode(n,e),s=await this.client.core.history.get(n,t),o=Il[s.request.method].res;this.client.core.relayer.publish(n,i,o),await this.client.core.history.resolve(e)},this.sendError=async(t,n,r)=>{const e=Sa(t,r),i=await this.client.core.crypto.encode(n,e),s=await this.client.core.history.get(n,t),o=Il[s.request.method].res;this.client.core.relayer.publish(n,i,o),await this.client.core.history.resolve(e)},this.cleanup=async()=>{const t=[],n=[];this.client.session.getAll().forEach((n=>{jo(n.expiry)&&t.push(n.topic)})),this.client.proposal.getAll().forEach((t=>{jo(t.expiry)&&n.push(t.id)})),await Promise.all([...t.map((t=>this.deleteSession(t))),...n.map((t=>this.deleteProposal(t)))])},this.onRelayEventRequest=t=>{const{topic:n,payload:r}=t,e=r.method;switch(e){case"wc_sessionPropose":return this.onSessionProposeRequest(n,r);case"wc_sessionSettle":return this.onSessionSettleRequest(n,r);case"wc_sessionUpdate":return this.onSessionUpdateRequest(n,r);case"wc_sessionExtend":return this.onSessionExtendRequest(n,r);case"wc_sessionPing":return this.onSessionPingRequest(n,r);case"wc_sessionDelete":return this.onSessionDeleteRequest(n,r);case"wc_sessionRequest":return this.onSessionRequest(n,r);case"wc_sessionEvent":return this.onSessionEventRequest(n,r);default:return this.client.logger.info(`Unsupported request method ${e}`)}},this.onRelayEventResponse=async t=>{const{topic:n,payload:r}=t,e=(await this.client.core.history.get(n,r.id)).request.method;switch(e){case"wc_sessionPropose":return this.onSessionProposeResponse(n,r);case"wc_sessionSettle":return this.onSessionSettleResponse(n,r);case"wc_sessionUpdate":return this.onSessionUpdateResponse(n,r);case"wc_sessionExtend":return this.onSessionExtendResponse(n,r);case"wc_sessionPing":return this.onSessionPingResponse(n,r);case"wc_sessionRequest":return this.onSessionRequestResponse(n,r);default:return this.client.logger.info(`Unsupported response method ${e}`)}},this.onSessionProposeRequest=async(t,n)=>{const{params:r,id:e}=n;try{this.isValidConnect(Dl({},n.params));const i=So(wn.FIVE_MINUTES),s=Dl({id:e,pairingTopic:t,expiry:i},r);await this.setProposal(e,s);const o=Ls(JSON.stringify(n)),u=await this.getVerifyContext(o,s.proposer.metadata);this.client.events.emit("session_proposal",{id:e,params:s,context:u})}catch(n){await this.sendError(e,t,n),this.client.logger.error(n)}},this.onSessionProposeResponse=async(t,n)=>{const{id:r}=n;if(La(n)){const{result:e}=n;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:e});const i=this.client.proposal.get(r);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:i});const s=i.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:s});const o=e.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:o});const u=await this.client.core.crypto.generateSharedKey(s,o);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:u});const a=await this.client.core.relayer.subscribe(u);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:a}),await this.client.core.pairing.activate({topic:t})}else qa(n)&&(await this.client.proposal.delete(r,Ko("USER_DISCONNECTED")),this.events.emit(Io("session_connect"),{error:n.error}))},this.onSessionSettleRequest=async(t,n)=>{const{id:r,params:e}=n;try{this.isValidSessionSettleRequest(e);const{relay:r,controller:i,expiry:s,namespaces:o,requiredNamespaces:u,optionalNamespaces:a,sessionProperties:c,pairingTopic:f}=n.params,h=Dl({topic:t,relay:r,expiry:s,namespaces:o,acknowledged:!0,pairingTopic:f,requiredNamespaces:u,optionalNamespaces:a,controller:i.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:i.publicKey,metadata:i.metadata}},c&&{sessionProperties:c});await this.sendResult(n.id,t,!0),this.events.emit(Io("session_connect"),{session:h})}catch(n){await this.sendError(r,t,n),this.client.logger.error(n)}},this.onSessionSettleResponse=async(t,n)=>{const{id:r}=n;La(n)?(await this.client.session.update(t,{acknowledged:!0}),this.events.emit(Io("session_approve",r),{})):qa(n)&&(await this.client.session.delete(t,Ko("USER_DISCONNECTED")),this.events.emit(Io("session_approve",r),{error:n.error}))},this.onSessionUpdateRequest=async(t,n)=>{const{params:r,id:e}=n;try{this.isValidUpdate(Dl({topic:t},r)),await this.client.session.update(t,{namespaces:r.namespaces}),await this.sendResult(e,t,!0),this.client.events.emit("session_update",{id:e,topic:t,params:r})}catch(n){await this.sendError(e,t,n),this.client.logger.error(n)}},this.onSessionUpdateResponse=(t,n)=>{const{id:r}=n;La(n)?this.events.emit(Io("session_update",r),{}):qa(n)&&this.events.emit(Io("session_update",r),{error:n.error})},this.onSessionExtendRequest=async(t,n)=>{const{id:r}=n;try{this.isValidExtend({topic:t}),await this.setExpiry(t,So(Sl)),await this.sendResult(r,t,!0),this.client.events.emit("session_extend",{id:r,topic:t})}catch(n){await this.sendError(r,t,n),this.client.logger.error(n)}},this.onSessionExtendResponse=(t,n)=>{const{id:r}=n;La(n)?this.events.emit(Io("session_extend",r),{}):qa(n)&&this.events.emit(Io("session_extend",r),{error:n.error})},this.onSessionPingRequest=async(t,n)=>{const{id:r}=n;try{this.isValidPing({topic:t}),await this.sendResult(r,t,!0),this.client.events.emit("session_ping",{id:r,topic:t})}catch(n){await this.sendError(r,t,n),this.client.logger.error(n)}},this.onSessionPingResponse=(t,n)=>{const{id:r}=n;setTimeout((()=>{La(n)?this.events.emit(Io("session_ping",r),{}):qa(n)&&this.events.emit(Io("session_ping",r),{error:n.error})}),500)},this.onSessionDeleteRequest=async(t,n)=>{const{id:r}=n;try{this.isValidDisconnect({topic:t,reason:n.params}),await Promise.all([new Promise((n=>{this.client.core.relayer.once(ah.publish,(async()=>{n(await this.deleteSession(t))}))})),this.sendResult(r,t,!0)]),this.client.events.emit("session_delete",{id:r,topic:t})}catch(n){await this.sendError(r,t,n),this.client.logger.error(n)}},this.onSessionRequest=async(t,n)=>{const{id:r,params:e}=n;try{this.isValidRequest(Dl({topic:t},e)),await this.setPendingSessionRequest({id:r,topic:t,params:e});const i=Ls(JSON.stringify(n)),s=this.client.session.get(t),o=await this.getVerifyContext(i,s.peer.metadata);this.client.events.emit("session_request",{id:r,topic:t,params:e,context:o})}catch(n){await this.sendError(r,t,n),this.client.logger.error(n)}},this.onSessionRequestResponse=(t,n)=>{const{id:r}=n;La(n)?this.events.emit(Io("session_request",r),{result:n.result}):qa(n)&&this.events.emit(Io("session_request",r),{error:n.error})},this.onSessionEventRequest=async(t,n)=>{const{id:r,params:e}=n;try{this.isValidEmit(Dl({topic:t},e)),this.client.events.emit("session_event",{id:r,topic:t,params:e})}catch(n){await this.sendError(r,t,n),this.client.logger.error(n)}},this.isValidConnect=async t=>{if(!mu(t)){const{message:n}=Wo("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(t)}`);throw new Error(n)}const{pairingTopic:n,requiredNamespaces:r,optionalNamespaces:e,sessionProperties:i,relays:s}=t;if(Yo(n)||await this.isValidPairingTopic(n),!yu(s,!0)){const{message:t}=Wo("MISSING_OR_INVALID",`connect() relays: ${s}`);throw new Error(t)}!Yo(r)&&Zo(r)!==0&&this.validateNamespaces(r,"requiredNamespaces"),!Yo(e)&&Zo(e)!==0&&this.validateNamespaces(e,"optionalNamespaces"),Yo(i)||this.validateSessionProps(i,"sessionProperties")},this.validateNamespaces=(t,n)=>{const r=vu(t,"connect()",n);if(r)throw new Error(r.message)},this.isValidApprove=async t=>{if(!mu(t))throw new Error(Wo("MISSING_OR_INVALID",`approve() params: ${t}`).message);const{id:n,namespaces:r,relayProtocol:e,sessionProperties:i}=t;await this.isValidProposalId(n);const s=this.client.proposal.get(n),o=pu(r,"approve()");if(o)throw new Error(o.message);const u=Au(s.requiredNamespaces,r,"approve()");if(u)throw new Error(u.message);if(!Qo(e,!0)){const{message:t}=Wo("MISSING_OR_INVALID",`approve() relayProtocol: ${e}`);throw new Error(t)}Yo(i)||this.validateSessionProps(i,"sessionProperties")},this.isValidReject=async t=>{if(!mu(t)){const{message:n}=Wo("MISSING_OR_INVALID",`reject() params: ${t}`);throw new Error(n)}const{id:n,reason:r}=t;if(await this.isValidProposalId(n),!_u(r)){const{message:t}=Wo("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(r)}`);throw new Error(t)}},this.isValidSessionSettleRequest=t=>{if(!mu(t)){const{message:n}=Wo("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${t}`);throw new Error(n)}const{relay:n,controller:r,namespaces:e,expiry:i}=t;if(!wu(n)){const{message:t}=Wo("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(t)}const s=ou(r,"onSessionSettleRequest()");if(s)throw new Error(s.message);const o=pu(e,"onSessionSettleRequest()");if(o)throw new Error(o.message);if(jo(i)){const{message:t}=Wo("EXPIRED","onSessionSettleRequest()");throw new Error(t)}},this.isValidUpdate=async t=>{if(!mu(t)){const{message:n}=Wo("MISSING_OR_INVALID",`update() params: ${t}`);throw new Error(n)}const{topic:n,namespaces:r}=t;await this.isValidSessionTopic(n);const e=this.client.session.get(n),i=pu(r,"update()");if(i)throw new Error(i.message);const s=Au(e.requiredNamespaces,r,"update()");if(s)throw new Error(s.message)},this.isValidExtend=async t=>{if(!mu(t)){const{message:n}=Wo("MISSING_OR_INVALID",`extend() params: ${t}`);throw new Error(n)}const{topic:n}=t;await this.isValidSessionTopic(n)},this.isValidRequest=async t=>{if(!mu(t)){const{message:n}=Wo("MISSING_OR_INVALID",`request() params: ${t}`);throw new Error(n)}const{topic:n,request:r,chainId:e,expiry:i}=t;await this.isValidSessionTopic(n);const{namespaces:s}=this.client.session.get(n);if(!Su(s,e)){const{message:t}=Wo("MISSING_OR_INVALID",`request() chainId: ${e}`);throw new Error(t)}if(!gu(r)){const{message:t}=Wo("MISSING_OR_INVALID",`request() ${JSON.stringify(r)}`);throw new Error(t)}if(!ju(s,e,r.method)){const{message:t}=Wo("MISSING_OR_INVALID",`request() method: ${r.method}`);throw new Error(t)}if(i&&!Tu(i,Al)){const{message:t}=Wo("MISSING_OR_INVALID",`request() expiry: ${i}. Expiry must be a number (in seconds) between ${Al.min} and ${Al.max}`);throw new Error(t)}},this.isValidRespond=async t=>{if(!mu(t)){const{message:n}=Wo("MISSING_OR_INVALID",`respond() params: ${t}`);throw new Error(n)}const{topic:n,response:r}=t;if(await this.isValidSessionTopic(n),!Eu(r)){const{message:t}=Wo("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(r)}`);throw new Error(t)}},this.isValidPing=async t=>{if(!mu(t)){const{message:n}=Wo("MISSING_OR_INVALID",`ping() params: ${t}`);throw new Error(n)}const{topic:n}=t;await this.isValidSessionOrPairingTopic(n)},this.isValidEmit=async t=>{if(!mu(t)){const{message:n}=Wo("MISSING_OR_INVALID",`emit() params: ${t}`);throw new Error(n)}const{topic:n,event:r,chainId:e}=t;await this.isValidSessionTopic(n);const{namespaces:i}=this.client.session.get(n);if(!Su(i,e)){const{message:t}=Wo("MISSING_OR_INVALID",`emit() chainId: ${e}`);throw new Error(t)}if(!Ou(r)){const{message:t}=Wo("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(r)}`);throw new Error(t)}if(!Iu(i,e,r.name)){const{message:t}=Wo("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(r)}`);throw new Error(t)}},this.isValidDisconnect=async t=>{if(!mu(t)){const{message:n}=Wo("MISSING_OR_INVALID",`disconnect() params: ${t}`);throw new Error(n)}const{topic:n}=t;await this.isValidSessionOrPairingTopic(n)},this.getVerifyContext=async(t,n)=>{const r={verified:{verifyUrl:n.verifyUrl||"",validation:"UNKNOWN",origin:n.url||""}};try{const e=await this.client.core.verify.resolve({attestationId:t,verifyUrl:n.verifyUrl});r.verified.origin=e,r.verified.validation=e===n.url?"VALID":"INVALID"}catch(t){this.client.logger.error(t)}return this.client.logger.info(`Verify context: ${JSON.stringify(r)}`),r},this.validateSessionProps=(t,n)=>{Object.values(t).forEach((t=>{if(!Qo(t,!1)){const{message:r}=Wo("MISSING_OR_INVALID",`${n} must be in Record<string, string> format. Received: ${JSON.stringify(t)}`);throw new Error(r)}}))}}isInitialized(){if(!this.initialized){const{message:t}=Wo("NOT_INITIALIZED",this.name);throw new Error(t)}}registerRelayerEvents(){this.client.core.relayer.on(ah.message,(async t=>{const{topic:n,message:r}=t;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(r)))return;const e=await this.client.core.crypto.decode(n,r);Da(e)?(this.client.core.history.set(n,e),this.onRelayEventRequest({topic:n,payload:e})):ka(e)&&(await this.client.core.history.resolve(e),this.onRelayEventResponse({topic:n,payload:e}))}))}registerExpirerEvents(){this.client.core.expirer.on(jh.expired,(async t=>{const{topic:n,id:r}=Oo(t.target);if(r&&this.client.pendingRequest.keys.includes(r))return await this.deletePendingSessionRequest(r,Wo("EXPIRED"),!0);n?this.client.session.keys.includes(n)&&(await this.deleteSession(n,!0),this.client.events.emit("session_expire",{topic:n})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r}))}))}isValidPairingTopic(t){if(!Qo(t,!1)){const{message:n}=Wo("MISSING_OR_INVALID",`pairing topic should be a string: ${t}`);throw new Error(n)}if(!this.client.core.pairing.pairings.keys.includes(t)){const{message:n}=Wo("NO_MATCHING_KEY",`pairing topic doesn't exist: ${t}`);throw new Error(n)}if(jo(this.client.core.pairing.pairings.get(t).expiry)){const{message:n}=Wo("EXPIRED",`pairing topic: ${t}`);throw new Error(n)}}async isValidSessionTopic(t){if(!Qo(t,!1)){const{message:n}=Wo("MISSING_OR_INVALID",`session topic should be a string: ${t}`);throw new Error(n)}if(!this.client.session.keys.includes(t)){const{message:n}=Wo("NO_MATCHING_KEY",`session topic doesn't exist: ${t}`);throw new Error(n)}if(jo(this.client.session.get(t).expiry)){await this.deleteSession(t);const{message:n}=Wo("EXPIRED",`session topic: ${t}`);throw new Error(n)}}async isValidSessionOrPairingTopic(t){if(this.client.session.keys.includes(t))await this.isValidSessionTopic(t);else if(this.client.core.pairing.pairings.keys.includes(t))this.isValidPairingTopic(t);else if(Qo(t,!1)){const{message:n}=Wo("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${t}`);throw new Error(n)}else{const{message:n}=Wo("MISSING_OR_INVALID",`session or pairing topic should be a string: ${t}`);throw new Error(n)}}async isValidProposalId(t){if(!bu(t)){const{message:n}=Wo("MISSING_OR_INVALID",`proposal id should be a number: ${t}`);throw new Error(n)}if(!this.client.proposal.keys.includes(t)){const{message:n}=Wo("NO_MATCHING_KEY",`proposal id doesn't exist: ${t}`);throw new Error(n)}if(jo(this.client.proposal.get(t).expiry)){await this.deleteProposal(t);const{message:n}=Wo("EXPIRED",`proposal id: ${t}`);throw new Error(n)}}}class ql extends el{constructor(t,n){super(t,n,gl,ml),this.core=t,this.logger=n}}class Vl extends el{constructor(t,n){super(t,n,Ol,ml),this.core=t,this.logger=n}}class Fl extends el{constructor(t,n){super(t,n,Nl,ml,(t=>t.id)),this.core=t,this.logger=n}}class Hl extends Cr{constructor(t){super(t),this.protocol=wl,this.version=yl,this.name=_l.name,this.events=new v.EventEmitter,this.on=(t,n)=>this.events.on(t,n),this.once=(t,n)=>this.events.once(t,n),this.off=(t,n)=>this.events.off(t,n),this.removeListener=(t,n)=>this.events.removeListener(t,n),this.removeAllListeners=t=>this.events.removeAllListeners(t),this.connect=async t=>{try{return await this.engine.connect(t)}catch(t){throw this.logger.error(t.message),t}},this.pair=async t=>{try{return await this.engine.pair(t)}catch(t){throw this.logger.error(t.message),t}},this.approve=async t=>{try{return await this.engine.approve(t)}catch(t){throw this.logger.error(t.message),t}},this.reject=async t=>{try{return await this.engine.reject(t)}catch(t){throw this.logger.error(t.message),t}},this.update=async t=>{try{return await this.engine.update(t)}catch(t){throw this.logger.error(t.message),t}},this.extend=async t=>{try{return await this.engine.extend(t)}catch(t){throw this.logger.error(t.message),t}},this.request=async t=>{try{return await this.engine.request(t)}catch(t){throw this.logger.error(t.message),t}},this.respond=async t=>{try{return await this.engine.respond(t)}catch(t){throw this.logger.error(t.message),t}},this.ping=async t=>{try{return await this.engine.ping(t)}catch(t){throw this.logger.error(t.message),t}},this.emit=async t=>{try{return await this.engine.emit(t)}catch(t){throw this.logger.error(t.message),t}},this.disconnect=async t=>{try{return await this.engine.disconnect(t)}catch(t){throw this.logger.error(t.message),t}},this.find=t=>{try{return this.engine.find(t)}catch(t){throw this.logger.error(t.message),t}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(t){throw this.logger.error(t.message),t}},this.name=t?.name||_l.name,this.metadata=t?.metadata||co();const n=typeof t?.logger<"u"&&typeof t?.logger!="string"?t.logger:Ir.pino(Ir.getDefaultLoggerOptions({level:t?.logger||_l.logger}));this.core=t?.core||new pl(t),this.logger=Ir.generateChildLogger(n,this.name),this.session=new Vl(this.core,this.logger),this.proposal=new ql(this.core,this.logger),this.pendingRequest=new Fl(this.core,this.logger),this.engine=new Ll(this)}static async init(t){const n=new Hl(t);return await n.initialize(),n}get context(){return Ir.getLoggerContext(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(t){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(t.message),t}}}var Gl=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});function r(t,n){for(let r=0;r<t.byteLength;r++){if(t[r]<n[r]){return-1}if(t[r]>n[r]){return 1}}if(t.byteLength>n.byteLength){return 1}if(t.byteLength<n.byteLength){return-1}return 0}n.compare=r}));var zl=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});function r(t){if(globalThis.Buffer!=null){return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}return t}n.asUint8Array=r}));var Bl=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});function r(t=0){if(globalThis.Buffer!=null&&globalThis.Buffer.alloc!=null){return zl.asUint8Array(globalThis.Buffer.alloc(t))}return new Uint8Array(t)}function e(t=0){if(globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null){return zl.asUint8Array(globalThis.Buffer.allocUnsafe(t))}return new Uint8Array(t)}n.alloc=r;n.allocUnsafe=e}));var Wl=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});function r(t,n){if(!n){n=t.reduce(((t,n)=>t+n.length),0)}const r=Bl.allocUnsafe(n);let e=0;for(const n of t){r.set(n,e);e+=n.length}return zl.asUint8Array(r)}n.concat=r}));var Kl=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});function r(t,n){if(t===n){return true}if(t.byteLength!==n.byteLength){return false}for(let r=0;r<t.byteLength;r++){if(t[r]!==n[r]){return false}}return true}n.equals=r}));function Jl(t,n,r,e){return{name:t,prefix:n,encoder:{name:t,prefix:n,encode:r},decoder:{decode:e}}}const Zl=Jl("utf8","u",(t=>{const n=new TextDecoder("utf8");return"u"+n.decode(t)}),(t=>{const n=new TextEncoder;return n.encode(t.substring(1))}));const Yl=Jl("ascii","a",(t=>{let n="a";for(let r=0;r<t.length;r++){n+=String.fromCharCode(t[r])}return n}),(t=>{t=t.substring(1);const n=Bl.allocUnsafe(t.length);for(let r=0;r<t.length;r++){n[r]=t.charCodeAt(r)}return n}));const Ql={utf8:Zl,"utf-8":Zl,hex:ui.bases.base16,latin1:Yl,ascii:Yl,binary:Yl,...ui.bases};var Xl=Ql;var td=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});function r(t,n="utf8"){const r=Xl[n];if(!r){throw new Error(`Unsupported encoding "${n}"`)}if((n==="utf8"||n==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null){return zl.asUint8Array(globalThis.Buffer.from(t,"utf-8"))}return r.decoder.decode(`${r.prefix}${t}`)}n.fromString=r}));var nd=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});function r(t,n="utf8"){const r=Xl[n];if(!r){throw new Error(`Unsupported encoding "${n}"`)}if((n==="utf8"||n==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null){return globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8")}return r.encoder.encode(t).substring(1)}n.toString=r}));var rd=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});function r(t,n){if(t.length!==n.length){throw new Error("Inputs should have the same length")}const r=Bl.allocUnsafe(t.length);for(let e=0;e<t.length;e++){r[e]=t[e]^n[e]}return zl.asUint8Array(r)}n.xor=r}));t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});n.compare=Gl.compare;n.concat=Wl.concat;n.equals=Kl.equals;n.fromString=td.fromString;n.toString=nd.toString;n.xor=rd.xor}));var ed=t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});n.getLocalStorage=n.getLocalStorageOrThrow=n.getCrypto=n.getCryptoOrThrow=n.getLocation=n.getLocationOrThrow=n.getNavigator=n.getNavigatorOrThrow=n.getDocument=n.getDocumentOrThrow=n.getFromWindowOrThrow=n.getFromWindow=void 0;function r(t){let n=undefined;if(typeof window!=="undefined"&&typeof window[t]!=="undefined"){n=window[t]}return n}n.getFromWindow=r;function e(t){const n=r(t);if(!n){throw new Error(`${t} is not defined in Window`)}return n}n.getFromWindowOrThrow=e;function i(){return e("document")}n.getDocumentOrThrow=i;function s(){return r("document")}n.getDocument=s;function o(){return e("navigator")}n.getNavigatorOrThrow=o;function u(){return r("navigator")}n.getNavigator=u;function a(){return e("location")}n.getLocationOrThrow=a;function c(){return r("location")}n.getLocation=c;function f(){return e("crypto")}n.getCryptoOrThrow=f;function h(){return r("crypto")}n.getCrypto=h;function l(){return e("localStorage")}n.getLocalStorageOrThrow=l;function d(){return r("localStorage")}n.getLocalStorage=d}));t((function(t,n){Object.defineProperty(n,"__esModule",{value:true});n.getWindowMetadata=void 0;function r(){let t;let n;try{t=ed.getDocumentOrThrow();n=ed.getLocationOrThrow()}catch(t){return null}function r(){const r=t.getElementsByTagName("link");const e=[];for(let t=0;t<r.length;t++){const i=r[t];const s=i.getAttribute("rel");if(s){if(s.toLowerCase().indexOf("icon")>-1){const t=i.getAttribute("href");if(t){if(t.toLowerCase().indexOf("https:")===-1&&t.toLowerCase().indexOf("http:")===-1&&t.indexOf("//")!==0){let r=n.protocol+"//"+n.host;if(t.indexOf("/")===0){r+=t}else{const e=n.pathname.split("/");e.pop();const i=e.join("/");r+=i+"/"+t}e.push(r)}else if(t.indexOf("//")===0){const r=n.protocol+t;e.push(r)}else{e.push(t)}}}}}return e}function e(...n){const r=t.getElementsByTagName("meta");for(let t=0;t<r.length;t++){const e=r[t];const i=["itemprop","property","name"].map((t=>e.getAttribute(t))).filter((t=>{if(t){return n.includes(t)}return false}));if(i.length&&i){const t=e.getAttribute("content");if(t){return t}}}return""}function i(){let n=e("name","og:site_name","og:title","twitter:title");if(!n){n=t.title}return n}function s(){const t=e("description","og:description","twitter:description","keywords");return t}const o=i();const u=s();const a=n.origin;const c=r();const f={description:u,url:a,icons:c,name:o};return f}n.getWindowMetadata=r}));t((function(t,n){const r=t=>t===null||t===undefined;const e=Symbol("encodeFragmentIdentifier");function i(t){switch(t.arrayFormat){case"index":return n=>(r,e)=>{const i=r.length;if(e===undefined||t.skipNull&&e===null||t.skipEmptyString&&e===""){return r}if(e===null){return[...r,[u(n,t),"[",i,"]"].join("")]}return[...r,[u(n,t),"[",u(i,t),"]=",u(e,t)].join("")]};case"bracket":return n=>(r,e)=>{if(e===undefined||t.skipNull&&e===null||t.skipEmptyString&&e===""){return r}if(e===null){return[...r,[u(n,t),"[]"].join("")]}return[...r,[u(n,t),"[]=",u(e,t)].join("")]};case"colon-list-separator":return n=>(r,e)=>{if(e===undefined||t.skipNull&&e===null||t.skipEmptyString&&e===""){return r}if(e===null){return[...r,[u(n,t),":list="].join("")]}return[...r,[u(n,t),":list=",u(e,t)].join("")]};case"comma":case"separator":case"bracket-separator":{const n=t.arrayFormat==="bracket-separator"?"[]=":"=";return r=>(e,i)=>{if(i===undefined||t.skipNull&&i===null||t.skipEmptyString&&i===""){return e}i=i===null?"":i;if(e.length===0){return[[u(r,t),n,u(i,t)].join("")]}return[[e,u(i,t)].join(t.arrayFormatSeparator)]}}default:return n=>(r,e)=>{if(e===undefined||t.skipNull&&e===null||t.skipEmptyString&&e===""){return r}if(e===null){return[...r,u(n,t)]}return[...r,[u(n,t),"=",u(e,t)].join("")]}}}function s(t){let n;switch(t.arrayFormat){case"index":return(t,r,e)=>{n=/\[(\d*)\]$/.exec(t);t=t.replace(/\[\d*\]$/,"");if(!n){e[t]=r;return}if(e[t]===undefined){e[t]={}}e[t][n[1]]=r};case"bracket":return(t,r,e)=>{n=/(\[\])$/.exec(t);t=t.replace(/\[\]$/,"");if(!n){e[t]=r;return}if(e[t]===undefined){e[t]=[r];return}e[t]=[].concat(e[t],r)};case"colon-list-separator":return(t,r,e)=>{n=/(:list)$/.exec(t);t=t.replace(/:list$/,"");if(!n){e[t]=r;return}if(e[t]===undefined){e[t]=[r];return}e[t]=[].concat(e[t],r)};case"comma":case"separator":return(n,r,e)=>{const i=typeof r==="string"&&r.includes(t.arrayFormatSeparator);const s=typeof r==="string"&&!i&&a(r,t).includes(t.arrayFormatSeparator);r=s?a(r,t):r;const o=i||s?r.split(t.arrayFormatSeparator).map((n=>a(n,t))):r===null?r:a(r,t);e[n]=o};case"bracket-separator":return(n,r,e)=>{const i=/(\[\])$/.test(n);n=n.replace(/\[\]$/,"");if(!i){e[n]=r?a(r,t):r;return}const s=r===null?[]:r.split(t.arrayFormatSeparator).map((n=>a(n,t)));if(e[n]===undefined){e[n]=s;return}e[n]=[].concat(e[n],s)};default:return(t,n,r)=>{if(r[t]===undefined){r[t]=n;return}r[t]=[].concat(r[t],n)}}}function o(t){if(typeof t!=="string"||t.length!==1){throw new TypeError("arrayFormatSeparator must be single character string")}}function u(t,n){if(n.encode){return n.strict?ls(t):encodeURIComponent(t)}return t}function a(t,n){if(n.decode){return ms(t)}return t}function c(t){if(Array.isArray(t)){return t.sort()}if(typeof t==="object"){return c(Object.keys(t)).sort(((t,n)=>Number(t)-Number(n))).map((n=>t[n]))}return t}function f(t){const n=t.indexOf("#");if(n!==-1){t=t.slice(0,n)}return t}function h(t){let n="";const r=t.indexOf("#");if(r!==-1){n=t.slice(r)}return n}function l(t){t=f(t);const n=t.indexOf("?");if(n===-1){return""}return t.slice(n+1)}function d(t,n){if(n.parseNumbers&&!Number.isNaN(Number(t))&&(typeof t==="string"&&t.trim()!=="")){t=Number(t)}else if(n.parseBooleans&&t!==null&&(t.toLowerCase()==="true"||t.toLowerCase()==="false")){t=t.toLowerCase()==="true"}return t}function v(t,n){n=Object.assign({decode:true,sort:true,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:false,parseBooleans:false},n);o(n.arrayFormatSeparator);const r=s(n);const e=Object.create(null);if(typeof t!=="string"){return e}t=t.trim().replace(/^[?#&]/,"");if(!t){return e}for(const i of t.split("&")){if(i===""){continue}let[t,s]=_s(n.decode?i.replace(/\+/g," "):i,"=");s=s===undefined?null:["comma","separator","bracket-separator"].includes(n.arrayFormat)?s:a(s,n);r(a(t,n),s,e)}for(const t of Object.keys(e)){const r=e[t];if(typeof r==="object"&&r!==null){for(const t of Object.keys(r)){r[t]=d(r[t],n)}}else{e[t]=d(r,n)}}if(n.sort===false){return e}return(n.sort===true?Object.keys(e).sort():Object.keys(e).sort(n.sort)).reduce(((t,n)=>{const r=e[n];if(Boolean(r)&&typeof r==="object"&&!Array.isArray(r)){t[n]=c(r)}else{t[n]=r}return t}),Object.create(null))}n.extract=l;n.parse=v;n.stringify=(t,n)=>{if(!t){return""}n=Object.assign({encode:true,strict:true,arrayFormat:"none",arrayFormatSeparator:","},n);o(n.arrayFormatSeparator);const e=e=>n.skipNull&&r(t[e])||n.skipEmptyString&&t[e]==="";const s=i(n);const a={};for(const n of Object.keys(t)){if(!e(n)){a[n]=t[n]}}const c=Object.keys(a);if(n.sort!==false){c.sort(n.sort)}return c.map((r=>{const e=t[r];if(e===undefined){return""}if(e===null){return u(r,n)}if(Array.isArray(e)){if(e.length===0&&n.arrayFormat==="bracket-separator"){return u(r,n)+"[]"}return e.reduce(s(r),[]).join("&")}return u(r,n)+"="+u(e,n)})).filter((t=>t.length>0)).join("&")};n.parseUrl=(t,n)=>{n=Object.assign({decode:true},n);const[r,e]=_s(t,"#");return Object.assign({url:r.split("?")[0]||"",query:v(l(t),n)},n&&n.parseFragmentIdentifier&&e?{fragmentIdentifier:a(e,n)}:{})};n.stringifyUrl=(t,r)=>{r=Object.assign({encode:true,strict:true,[e]:true},r);const i=f(t.url).split("?")[0]||"";const s=n.extract(t.url);const o=n.parse(s,{sort:false});const a=Object.assign(o,t.query);let c=n.stringify(a,r);if(c){c=`?${c}`}let l=h(t.url);if(t.fragmentIdentifier){l=`#${r[e]?u(t.fragmentIdentifier,r):t.fragmentIdentifier}`}return`${i}${c}${l}`};n.pick=(t,r,i)=>{i=Object.assign({parseFragmentIdentifier:true,[e]:false},i);const{url:s,query:o,fragmentIdentifier:u}=n.parseUrl(t,i);return n.stringifyUrl({url:s,query:gs(o,r),fragmentIdentifier:u},i)};n.exclude=(t,r,e)=>{const i=Array.isArray(r)?t=>!r.includes(t):(t,n)=>!r(t,n);return n.pick(t,i,e)}}));function id(t=[],n=[]){return[...new Set([...t,...n])]}function sd(t){return t.includes(":")}function od(t){return sd(t)?t.split(":")[0]:t}const ud={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}};function ad(t,n){const{message:r,code:e}=ud[t];return{message:n?`${r} ${n}`:r,code:e}}function cd(t,n){return Array.isArray(t)?typeof n<"u"&&t.length?t.every(n):!0:!1}function fd(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}var hd=t((function(t,r){var e=typeof self!=="undefined"?self:n;var i=function(){function t(){this.fetch=false;this.DOMException=e.DOMException}t.prototype=e;return new t}();(function(t){(function(n){var r={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{new Blob;return true}catch(t){return false}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};function e(t){return t&&DataView.prototype.isPrototypeOf(t)}if(r.arrayBuffer){var i=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"];var s=ArrayBuffer.isView||function(t){return t&&i.indexOf(Object.prototype.toString.call(t))>-1}}function o(t){if(typeof t!=="string"){t=String(t)}if(/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t)){throw new TypeError("Invalid character in header field name")}return t.toLowerCase()}function u(t){if(typeof t!=="string"){t=String(t)}return t}function a(t){var n={next:function(){var n=t.shift();return{done:n===undefined,value:n}}};if(r.iterable){n[Symbol.iterator]=function(){return n}}return n}function c(t){this.map={};if(t instanceof c){t.forEach((function(t,n){this.append(n,t)}),this)}else if(Array.isArray(t)){t.forEach((function(t){this.append(t[0],t[1])}),this)}else if(t){Object.getOwnPropertyNames(t).forEach((function(n){this.append(n,t[n])}),this)}}c.prototype.append=function(t,n){t=o(t);n=u(n);var r=this.map[t];this.map[t]=r?r+", "+n:n};c.prototype["delete"]=function(t){delete this.map[o(t)]};c.prototype.get=function(t){t=o(t);return this.has(t)?this.map[t]:null};c.prototype.has=function(t){return this.map.hasOwnProperty(o(t))};c.prototype.set=function(t,n){this.map[o(t)]=u(n)};c.prototype.forEach=function(t,n){for(var r in this.map){if(this.map.hasOwnProperty(r)){t.call(n,this.map[r],r,this)}}};c.prototype.keys=function(){var t=[];this.forEach((function(n,r){t.push(r)}));return a(t)};c.prototype.values=function(){var t=[];this.forEach((function(n){t.push(n)}));return a(t)};c.prototype.entries=function(){var t=[];this.forEach((function(n,r){t.push([r,n])}));return a(t)};if(r.iterable){c.prototype[Symbol.iterator]=c.prototype.entries}function f(t){if(t.bodyUsed){return Promise.reject(new TypeError("Already read"))}t.bodyUsed=true}function h(t){return new Promise((function(n,r){t.onload=function(){n(t.result)};t.onerror=function(){r(t.error)}}))}function l(t){var n=new FileReader;var r=h(n);n.readAsArrayBuffer(t);return r}function d(t){var n=new FileReader;var r=h(n);n.readAsText(t);return r}function v(t){var n=new Uint8Array(t);var r=new Array(n.length);for(var e=0;e<n.length;e++){r[e]=String.fromCharCode(n[e])}return r.join("")}function p(t){if(t.slice){return t.slice(0)}else{var n=new Uint8Array(t.byteLength);n.set(new Uint8Array(t));return n.buffer}}function w(){this.bodyUsed=false;this._initBody=function(t){this._bodyInit=t;if(!t){this._bodyText=""}else if(typeof t==="string"){this._bodyText=t}else if(r.blob&&Blob.prototype.isPrototypeOf(t)){this._bodyBlob=t}else if(r.formData&&FormData.prototype.isPrototypeOf(t)){this._bodyFormData=t}else if(r.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)){this._bodyText=t.toString()}else if(r.arrayBuffer&&r.blob&&e(t)){this._bodyArrayBuffer=p(t.buffer);this._bodyInit=new Blob([this._bodyArrayBuffer])}else if(r.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(t)||s(t))){this._bodyArrayBuffer=p(t)}else{this._bodyText=t=Object.prototype.toString.call(t)}if(!this.headers.get("content-type")){if(typeof t==="string"){this.headers.set("content-type","text/plain;charset=UTF-8")}else if(this._bodyBlob&&this._bodyBlob.type){this.headers.set("content-type",this._bodyBlob.type)}else if(r.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)){this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8")}}};if(r.blob){this.blob=function(){var t=f(this);if(t){return t}if(this._bodyBlob){return Promise.resolve(this._bodyBlob)}else if(this._bodyArrayBuffer){return Promise.resolve(new Blob([this._bodyArrayBuffer]))}else if(this._bodyFormData){throw new Error("could not read FormData body as blob")}else{return Promise.resolve(new Blob([this._bodyText]))}};this.arrayBuffer=function(){if(this._bodyArrayBuffer){return f(this)||Promise.resolve(this._bodyArrayBuffer)}else{return this.blob().then(l)}}}this.text=function(){var t=f(this);if(t){return t}if(this._bodyBlob){return d(this._bodyBlob)}else if(this._bodyArrayBuffer){return Promise.resolve(v(this._bodyArrayBuffer))}else if(this._bodyFormData){throw new Error("could not read FormData body as text")}else{return Promise.resolve(this._bodyText)}};if(r.formData){this.formData=function(){return this.text().then(_)}}this.json=function(){return this.text().then(JSON.parse)};return this}var y=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function b(t){var n=t.toUpperCase();return y.indexOf(n)>-1?n:t}function m(t,n){n=n||{};var r=n.body;if(t instanceof m){if(t.bodyUsed){throw new TypeError("Already read")}this.url=t.url;this.credentials=t.credentials;if(!n.headers){this.headers=new c(t.headers)}this.method=t.method;this.mode=t.mode;this.signal=t.signal;if(!r&&t._bodyInit!=null){r=t._bodyInit;t.bodyUsed=true}}else{this.url=String(t)}this.credentials=n.credentials||this.credentials||"same-origin";if(n.headers||!this.headers){this.headers=new c(n.headers)}this.method=b(n.method||this.method||"GET");this.mode=n.mode||this.mode||null;this.signal=n.signal||this.signal;this.referrer=null;if((this.method==="GET"||this.method==="HEAD")&&r){throw new TypeError("Body not allowed for GET or HEAD requests")}this._initBody(r)}m.prototype.clone=function(){return new m(this,{body:this._bodyInit})};function _(t){var n=new FormData;t.trim().split("&").forEach((function(t){if(t){var r=t.split("=");var e=r.shift().replace(/\+/g," ");var i=r.join("=").replace(/\+/g," ");n.append(decodeURIComponent(e),decodeURIComponent(i))}}));return n}function g(t){var n=new c;var r=t.replace(/\r?\n[\t ]+/g," ");r.split(/\r?\n/).forEach((function(t){var r=t.split(":");var e=r.shift().trim();if(e){var i=r.join(":").trim();n.append(e,i)}}));return n}w.call(m.prototype);function E(t,n){if(!n){n={}}this.type="default";this.status=n.status===undefined?200:n.status;this.ok=this.status>=200&&this.status<300;this.statusText="statusText"in n?n.statusText:"OK";this.headers=new c(n.headers);this.url=n.url||"";this._initBody(t)}w.call(E.prototype);E.prototype.clone=function(){return new E(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new c(this.headers),url:this.url})};E.error=function(){var t=new E(null,{status:0,statusText:""});t.type="error";return t};var O=[301,302,303,307,308];E.redirect=function(t,n){if(O.indexOf(n)===-1){throw new RangeError("Invalid status code")}return new E(null,{status:n,headers:{location:t}})};n.DOMException=t.DOMException;try{new n.DOMException}catch(t){n.DOMException=function(t,n){this.message=t;this.name=n;var r=Error(t);this.stack=r.stack};n.DOMException.prototype=Object.create(Error.prototype);n.DOMException.prototype.constructor=n.DOMException}function S(t,e){return new Promise((function(i,s){var o=new m(t,e);if(o.signal&&o.signal.aborted){return s(new n.DOMException("Aborted","AbortError"))}var u=new XMLHttpRequest;function a(){u.abort()}u.onload=function(){var t={status:u.status,statusText:u.statusText,headers:g(u.getAllResponseHeaders()||"")};t.url="responseURL"in u?u.responseURL:t.headers.get("X-Request-URL");var n="response"in u?u.response:u.responseText;i(new E(n,t))};u.onerror=function(){s(new TypeError("Network request failed"))};u.ontimeout=function(){s(new TypeError("Network request failed"))};u.onabort=function(){s(new n.DOMException("Aborted","AbortError"))};u.open(o.method,o.url,true);if(o.credentials==="include"){u.withCredentials=true}else if(o.credentials==="omit"){u.withCredentials=false}if("responseType"in u&&r.blob){u.responseType="blob"}o.headers.forEach((function(t,n){u.setRequestHeader(n,t)}));if(o.signal){o.signal.addEventListener("abort",a);u.onreadystatechange=function(){if(u.readyState===4){o.signal.removeEventListener("abort",a)}}}u.send(typeof o._bodyInit==="undefined"?null:o._bodyInit)}))}S.polyfill=true;if(!t.fetch){t.fetch=S;t.Headers=c;t.Request=m;t.Response=E}n.Headers=c;n.Request=m;n.Response=E;n.fetch=S;Object.defineProperty(n,"__esModule",{value:true});return n})({})})(i);i.fetch.ponyfill=true;delete i.fetch.polyfill;var s=i;r=s.fetch;r.default=s.fetch;r.fetch=s.fetch;r.Headers=s.Headers;r.Request=s.Request;r.Response=s.Response;t.exports=r}));const ld=e(hd);const dd=t=>JSON.stringify(t,((t,n)=>typeof n==="bigint"?n.toString()+"n":n));const vd=t=>{const n=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g;const r=t.replace(n,'$1"$2n"$3');return JSON.parse(r,((t,n)=>{const r=typeof n==="string"&&n.match(/^\d+n$/);if(r)return BigInt(n.substring(0,n.length-1));return n}))};function pd(t){if(typeof t!=="string"){throw new Error(`Cannot safe json parse value of type ${typeof t}`)}try{return vd(t)}catch(n){return t}}function wd(t){return typeof t==="string"?t:dd(t)||""}const yd={Accept:"application/json","Content-Type":"application/json"};const bd="POST";const md={headers:yd,method:bd};const _d=10;class gd{constructor(t){this.url=t;this.events=new v.EventEmitter;this.isAvailable=false;this.registering=false;if(!$a(t)){throw new Error(`Provided URL is not compatible with HTTP connection: ${t}`)}this.url=t}get connected(){return this.isAvailable}get connecting(){return this.registering}on(t,n){this.events.on(t,n)}once(t,n){this.events.once(t,n)}off(t,n){this.events.off(t,n)}removeListener(t,n){this.events.removeListener(t,n)}async open(t=this.url){await this.register(t)}async close(){if(!this.isAvailable){throw new Error("Connection already closed")}this.onClose()}async send(t,n){if(!this.isAvailable){await this.register()}try{const n=wd(t);const r=await ld(this.url,Object.assign(Object.assign({},md),{body:n}));const e=await r.json();this.onPayload({data:e})}catch(n){this.onError(t.id,n)}}async register(t=this.url){if(!$a(t)){throw new Error(`Provided URL is not compatible with HTTP connection: ${t}`)}if(this.registering){const t=this.events.getMaxListeners();if(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t){this.events.setMaxListeners(t+1)}return new Promise(((t,n)=>{this.events.once("register_error",(t=>{this.resetMaxListeners();n(t)}));this.events.once("open",(()=>{this.resetMaxListeners();if(typeof this.isAvailable==="undefined"){return n(new Error("HTTP connection is missing or invalid"))}t()}))}))}this.url=t;this.registering=true;try{const n=wd({id:1,jsonrpc:"2.0",method:"test",params:[]});await ld(t,Object.assign(Object.assign({},md),{body:n}));this.onOpen()}catch(t){const n=this.parseError(t);this.events.emit("register_error",n);this.onClose();throw n}}onOpen(){this.isAvailable=true;this.registering=false;this.events.emit("open")}onClose(){this.isAvailable=false;this.registering=false;this.events.emit("close")}onPayload(t){if(typeof t.data==="undefined")return;const n=typeof t.data==="string"?pd(t.data):t.data;this.events.emit("payload",n)}onError(t,n){const r=this.parseError(n);const e=r.message||r.toString();const i=Sa(t,e);this.events.emit("payload",i)}parseError(t,n=this.url){return Gu(t,n,"HTTP")}resetMaxListeners(){if(this.events.getMaxListeners()>_d){this.events.setMaxListeners(_d)}}}const Ed="error",Od="wss://relay.walletconnect.com",Sd="wc",jd="universal_provider",Id=`${Sd}@${2}:${jd}:`,Ad="https://rpc.walletconnect.com/v1",Nd={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var xd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof u<"u"?u:typeof self<"u"?self:{},Pd={exports:{}};
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(t,n){(function(){var r,e="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",u="Invalid `variable` option passed into `_.template`",a="__lodash_hash_undefined__",c=500,f="__lodash_placeholder__",h=1,l=2,d=4,v=1,p=2,w=1,y=2,b=4,m=8,_=16,g=32,E=64,O=128,S=256,j=512,I=30,A="...",N=800,x=16,P=1,T=2,U=3,$=1/0,M=9007199254740991,R=17976931348623157e292,C=0/0,D=4294967295,k=D-1,L=D>>>1,q=[["ary",O],["bind",w],["bindKey",y],["curry",m],["curryRight",_],["flip",j],["partial",g],["partialRight",E],["rearg",S]],V="[object Arguments]",F="[object Array]",H="[object AsyncFunction]",G="[object Boolean]",z="[object Date]",B="[object DOMException]",W="[object Error]",K="[object Function]",J="[object GeneratorFunction]",Z="[object Map]",Y="[object Number]",Q="[object Null]",X="[object Object]",tt="[object Promise]",nt="[object Proxy]",rt="[object RegExp]",et="[object Set]",it="[object String]",st="[object Symbol]",ot="[object Undefined]",ut="[object WeakMap]",at="[object WeakSet]",ct="[object ArrayBuffer]",ft="[object DataView]",ht="[object Float32Array]",lt="[object Float64Array]",dt="[object Int8Array]",vt="[object Int16Array]",pt="[object Int32Array]",wt="[object Uint8Array]",yt="[object Uint8ClampedArray]",bt="[object Uint16Array]",mt="[object Uint32Array]",_t=/\b__p \+= '';/g,gt=/\b(__p \+=) '' \+/g,Et=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ot=/&(?:amp|lt|gt|quot|#39);/g,St=/[&<>"']/g,jt=RegExp(Ot.source),It=RegExp(St.source),At=/<%-([\s\S]+?)%>/g,Nt=/<%([\s\S]+?)%>/g,xt=/<%=([\s\S]+?)%>/g,Pt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Tt=/^\w*$/,Ut=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,$t=/[\\^$.*+?()[\]{}|]/g,Mt=RegExp($t.source),Rt=/^\s+/,Ct=/\s/,Dt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,kt=/\{\n\/\* \[wrapped with (.+)\] \*/,Lt=/,? & /,qt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Vt=/[()=,{}\[\]\/\s]/,Ft=/\\(\\)?/g,Ht=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Gt=/\w*$/,zt=/^[-+]0x[0-9a-f]+$/i,Bt=/^0b[01]+$/i,Wt=/^\[object .+?Constructor\]$/,Kt=/^0o[0-7]+$/i,Jt=/^(?:0|[1-9]\d*)$/,Zt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Yt=/($^)/,Qt=/['\n\r\u2028\u2029\\]/g,Xt="\\ud800-\\udfff",tn="\\u0300-\\u036f",nn="\\ufe20-\\ufe2f",rn="\\u20d0-\\u20ff",en=tn+nn+rn,sn="\\u2700-\\u27bf",on="a-z\\xdf-\\xf6\\xf8-\\xff",un="\\xac\\xb1\\xd7\\xf7",an="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",cn="\\u2000-\\u206f",fn=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",hn="A-Z\\xc0-\\xd6\\xd8-\\xde",ln="\\ufe0e\\ufe0f",dn=un+an+cn+fn,vn="['’]",pn="["+Xt+"]",wn="["+dn+"]",yn="["+en+"]",bn="\\d+",mn="["+sn+"]",_n="["+on+"]",gn="[^"+Xt+dn+bn+sn+on+hn+"]",En="\\ud83c[\\udffb-\\udfff]",On="(?:"+yn+"|"+En+")",Sn="[^"+Xt+"]",jn="(?:\\ud83c[\\udde6-\\uddff]){2}",In="[\\ud800-\\udbff][\\udc00-\\udfff]",An="["+hn+"]",Nn="\\u200d",xn="(?:"+_n+"|"+gn+")",Pn="(?:"+An+"|"+gn+")",Tn="(?:"+vn+"(?:d|ll|m|re|s|t|ve))?",Un="(?:"+vn+"(?:D|LL|M|RE|S|T|VE))?",$n=On+"?",Mn="["+ln+"]?",Rn="(?:"+Nn+"(?:"+[Sn,jn,In].join("|")+")"+Mn+$n+")*",Cn="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Dn="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",kn=Mn+$n+Rn,Ln="(?:"+[mn,jn,In].join("|")+")"+kn,qn="(?:"+[Sn+yn+"?",yn,jn,In,pn].join("|")+")",Vn=RegExp(vn,"g"),Fn=RegExp(yn,"g"),Hn=RegExp(En+"(?="+En+")|"+qn+kn,"g"),Gn=RegExp([An+"?"+_n+"+"+Tn+"(?="+[wn,An,"$"].join("|")+")",Pn+"+"+Un+"(?="+[wn,An+xn,"$"].join("|")+")",An+"?"+xn+"+"+Tn,An+"+"+Un,Dn,Cn,bn,Ln].join("|"),"g"),zn=RegExp("["+Nn+Xt+en+ln+"]"),Bn=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Wn=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Kn=-1,Jn={};Jn[ht]=Jn[lt]=Jn[dt]=Jn[vt]=Jn[pt]=Jn[wt]=Jn[yt]=Jn[bt]=Jn[mt]=!0,Jn[V]=Jn[F]=Jn[ct]=Jn[G]=Jn[ft]=Jn[z]=Jn[W]=Jn[K]=Jn[Z]=Jn[Y]=Jn[X]=Jn[rt]=Jn[et]=Jn[it]=Jn[ut]=!1;var Zn={};Zn[V]=Zn[F]=Zn[ct]=Zn[ft]=Zn[G]=Zn[z]=Zn[ht]=Zn[lt]=Zn[dt]=Zn[vt]=Zn[pt]=Zn[Z]=Zn[Y]=Zn[X]=Zn[rt]=Zn[et]=Zn[it]=Zn[st]=Zn[wt]=Zn[yt]=Zn[bt]=Zn[mt]=!0,Zn[W]=Zn[K]=Zn[ut]=!1;var Yn={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Qn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Xn={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},tr={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},nr=parseFloat,rr=parseInt,er=typeof xd=="object"&&xd&&xd.Object===Object&&xd,ir=typeof self=="object"&&self&&self.Object===Object&&self,sr=er||ir||Function("return this")(),or=n&&!n.nodeType&&n,ur=or&&!0&&t&&!t.nodeType&&t,ar=ur&&ur.exports===or,cr=ar&&er.process,fr=function(){try{var t=ur&&ur.require&&ur.require("util").types;return t||cr&&cr.binding&&cr.binding("util")}catch{}}(),hr=fr&&fr.isArrayBuffer,lr=fr&&fr.isDate,dr=fr&&fr.isMap,vr=fr&&fr.isRegExp,pr=fr&&fr.isSet,wr=fr&&fr.isTypedArray;function yr(t,n,r){switch(r.length){case 0:return t.call(n);case 1:return t.call(n,r[0]);case 2:return t.call(n,r[0],r[1]);case 3:return t.call(n,r[0],r[1],r[2])}return t.apply(n,r)}function br(t,n,r,e){for(var i=-1,s=t==null?0:t.length;++i<s;){var o=t[i];n(e,o,r(o),t)}return e}function mr(t,n){for(var r=-1,e=t==null?0:t.length;++r<e&&n(t[r],r,t)!==!1;);return t}function _r(t,n){for(var r=t==null?0:t.length;r--&&n(t[r],r,t)!==!1;);return t}function gr(t,n){for(var r=-1,e=t==null?0:t.length;++r<e;)if(!n(t[r],r,t))return!1;return!0}function Er(t,n){for(var r=-1,e=t==null?0:t.length,i=0,s=[];++r<e;){var o=t[r];n(o,r,t)&&(s[i++]=o)}return s}function Or(t,n){var r=t==null?0:t.length;return!!r&&Rr(t,n,0)>-1}function Sr(t,n,r){for(var e=-1,i=t==null?0:t.length;++e<i;)if(r(n,t[e]))return!0;return!1}function jr(t,n){for(var r=-1,e=t==null?0:t.length,i=Array(e);++r<e;)i[r]=n(t[r],r,t);return i}function Ir(t,n){for(var r=-1,e=n.length,i=t.length;++r<e;)t[i+r]=n[r];return t}function Ar(t,n,r,e){var i=-1,s=t==null?0:t.length;for(e&&s&&(r=t[++i]);++i<s;)r=n(r,t[i],i,t);return r}function Nr(t,n,r,e){var i=t==null?0:t.length;for(e&&i&&(r=t[--i]);i--;)r=n(r,t[i],i,t);return r}function xr(t,n){for(var r=-1,e=t==null?0:t.length;++r<e;)if(n(t[r],r,t))return!0;return!1}var Pr=Lr("length");function Tr(t){return t.split("")}function Ur(t){return t.match(qt)||[]}function $r(t,n,r){var e;return r(t,(function(t,r,i){if(n(t,r,i))return e=r,!1})),e}function Mr(t,n,r,e){for(var i=t.length,s=r+(e?1:-1);e?s--:++s<i;)if(n(t[s],s,t))return s;return-1}function Rr(t,n,r){return n===n?he(t,n,r):Mr(t,Dr,r)}function Cr(t,n,r,e){for(var i=r-1,s=t.length;++i<s;)if(e(t[i],n))return i;return-1}function Dr(t){return t!==t}function kr(t,n){var r=t==null?0:t.length;return r?Hr(t,n)/r:C}function Lr(t){return function(n){return n==null?r:n[t]}}function qr(t){return function(n){return t==null?r:t[n]}}function Vr(t,n,r,e,i){return i(t,(function(t,i,s){r=e?(e=!1,t):n(r,t,i,s)})),r}function Fr(t,n){var r=t.length;for(t.sort(n);r--;)t[r]=t[r].value;return t}function Hr(t,n){for(var e,i=-1,s=t.length;++i<s;){var o=n(t[i]);o!==r&&(e=e===r?o:e+o)}return e}function Gr(t,n){for(var r=-1,e=Array(t);++r<t;)e[r]=n(r);return e}function zr(t,n){return jr(n,(function(n){return[n,t[n]]}))}function Br(t){return t&&t.slice(0,pe(t)+1).replace(Rt,"")}function Wr(t){return function(n){return t(n)}}function Kr(t,n){return jr(n,(function(n){return t[n]}))}function Jr(t,n){return t.has(n)}function Zr(t,n){for(var r=-1,e=t.length;++r<e&&Rr(n,t[r],0)>-1;);return r}function Yr(t,n){for(var r=t.length;r--&&Rr(n,t[r],0)>-1;);return r}function Qr(t,n){for(var r=t.length,e=0;r--;)t[r]===n&&++e;return e}var Xr=qr(Yn),te=qr(Qn);function ne(t){return"\\"+tr[t]}function re(t,n){return t==null?r:t[n]}function ee(t){return zn.test(t)}function ie(t){return Bn.test(t)}function se(t){for(var n,r=[];!(n=t.next()).done;)r.push(n.value);return r}function oe(t){var n=-1,r=Array(t.size);return t.forEach((function(t,e){r[++n]=[e,t]})),r}function ue(t,n){return function(r){return t(n(r))}}function ae(t,n){for(var r=-1,e=t.length,i=0,s=[];++r<e;){var o=t[r];(o===n||o===f)&&(t[r]=f,s[i++]=r)}return s}function ce(t){var n=-1,r=Array(t.size);return t.forEach((function(t){r[++n]=t})),r}function fe(t){var n=-1,r=Array(t.size);return t.forEach((function(t){r[++n]=[t,t]})),r}function he(t,n,r){for(var e=r-1,i=t.length;++e<i;)if(t[e]===n)return e;return-1}function le(t,n,r){for(var e=r+1;e--;)if(t[e]===n)return e;return e}function de(t){return ee(t)?ye(t):Pr(t)}function ve(t){return ee(t)?be(t):Tr(t)}function pe(t){for(var n=t.length;n--&&Ct.test(t.charAt(n)););return n}var we=qr(Xn);function ye(t){for(var n=Hn.lastIndex=0;Hn.test(t);)++n;return n}function be(t){return t.match(Hn)||[]}function me(t){return t.match(Gn)||[]}var _e=function t(n){n=n==null?sr:ge.defaults(sr.Object(),n,ge.pick(sr,Wn));var Ct=n.Array,qt=n.Date,Xt=n.Error,tn=n.Function,nn=n.Math,rn=n.Object,en=n.RegExp,sn=n.String,on=n.TypeError,un=Ct.prototype,an=tn.prototype,cn=rn.prototype,fn=n["__core-js_shared__"],hn=an.toString,ln=cn.hasOwnProperty,dn=0,vn=function(){var t=/[^.]+$/.exec(fn&&fn.keys&&fn.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),pn=cn.toString,wn=hn.call(rn),yn=sr._,bn=en("^"+hn.call(ln).replace($t,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),mn=ar?n.Buffer:r,_n=n.Symbol,gn=n.Uint8Array,En=mn?mn.allocUnsafe:r,On=ue(rn.getPrototypeOf,rn),Sn=rn.create,jn=cn.propertyIsEnumerable,In=un.splice,An=_n?_n.isConcatSpreadable:r,Nn=_n?_n.iterator:r,xn=_n?_n.toStringTag:r,Pn=function(){try{var t=Wo(rn,"defineProperty");return t({},"",{}),t}catch{}}(),Tn=n.clearTimeout!==sr.clearTimeout&&n.clearTimeout,Un=qt&&qt.now!==sr.Date.now&&qt.now,$n=n.setTimeout!==sr.setTimeout&&n.setTimeout,Mn=nn.ceil,Rn=nn.floor,Cn=rn.getOwnPropertySymbols,Dn=mn?mn.isBuffer:r,kn=n.isFinite,Ln=un.join,qn=ue(rn.keys,rn),Hn=nn.max,Gn=nn.min,zn=qt.now,Bn=n.parseInt,Yn=nn.random,Qn=un.reverse,Xn=Wo(n,"DataView"),tr=Wo(n,"Map"),er=Wo(n,"Promise"),ir=Wo(n,"Set"),or=Wo(n,"WeakMap"),ur=Wo(rn,"create"),cr=or&&new or,fr={},Pr=Uu(Xn),Tr=Uu(tr),qr=Uu(er),he=Uu(ir),ye=Uu(or),be=_n?_n.prototype:r,_e=be?be.valueOf:r,Ee=be?be.toString:r;function Oe(t){if(If(t)&&!cf(t)&&!(t instanceof Ae)){if(t instanceof Ie)return t;if(ln.call(t,"__wrapped__"))return Mu(t)}return new Ie(t)}var Se=function(){function t(){}return function(n){if(!jf(n))return{};if(Sn)return Sn(n);t.prototype=n;var e=new t;return t.prototype=r,e}}();function je(){}function Ie(t,n){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!n,this.__index__=0,this.__values__=r}Oe.templateSettings={escape:At,evaluate:Nt,interpolate:xt,variable:"",imports:{_:Oe}},Oe.prototype=je.prototype,Oe.prototype.constructor=Oe,Ie.prototype=Se(je.prototype),Ie.prototype.constructor=Ie;function Ae(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=D,this.__views__=[]}function Ne(){var t=new Ae(this.__wrapped__);return t.__actions__=eo(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=eo(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=eo(this.__views__),t}function xe(){if(this.__filtered__){var t=new Ae(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function Pe(){var t=this.__wrapped__.value(),n=this.__dir__,r=cf(t),e=n<0,i=r?t.length:0,s=Qo(0,i,this.__views__),o=s.start,u=s.end,a=u-o,c=e?u:o-1,f=this.__iteratees__,h=f.length,l=0,d=Gn(a,this.__takeCount__);if(!r||!e&&i==a&&d==a)return ks(t,this.__actions__);var v=[];t:for(;a--&&l<d;){c+=n;for(var p=-1,w=t[c];++p<h;){var y=f[p],b=y.iteratee,m=y.type,_=b(w);if(m==T)w=_;else if(!_){if(m==P)continue t;break t}}v[l++]=w}return v}Ae.prototype=Se(je.prototype),Ae.prototype.constructor=Ae;function Te(t){var n=-1,r=t==null?0:t.length;for(this.clear();++n<r;){var e=t[n];this.set(e[0],e[1])}}function Ue(){this.__data__=ur?ur(null):{},this.size=0}function $e(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}function Me(t){var n=this.__data__;if(ur){var e=n[t];return e===a?r:e}return ln.call(n,t)?n[t]:r}function Re(t){var n=this.__data__;return ur?n[t]!==r:ln.call(n,t)}function Ce(t,n){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=ur&&n===r?a:n,this}Te.prototype.clear=Ue,Te.prototype.delete=$e,Te.prototype.get=Me,Te.prototype.has=Re,Te.prototype.set=Ce;function De(t){var n=-1,r=t==null?0:t.length;for(this.clear();++n<r;){var e=t[n];this.set(e[0],e[1])}}function ke(){this.__data__=[],this.size=0}function Le(t){var n=this.__data__,r=fi(n,t);if(r<0)return!1;var e=n.length-1;return r==e?n.pop():In.call(n,r,1),--this.size,!0}function qe(t){var n=this.__data__,e=fi(n,t);return e<0?r:n[e][1]}function Ve(t){return fi(this.__data__,t)>-1}function Fe(t,n){var r=this.__data__,e=fi(r,t);return e<0?(++this.size,r.push([t,n])):r[e][1]=n,this}De.prototype.clear=ke,De.prototype.delete=Le,De.prototype.get=qe,De.prototype.has=Ve,De.prototype.set=Fe;function He(t){var n=-1,r=t==null?0:t.length;for(this.clear();++n<r;){var e=t[n];this.set(e[0],e[1])}}function Ge(){this.size=0,this.__data__={hash:new Te,map:new(tr||De),string:new Te}}function ze(t){var n=zo(this,t).delete(t);return this.size-=n?1:0,n}function Be(t){return zo(this,t).get(t)}function We(t){return zo(this,t).has(t)}function Ke(t,n){var r=zo(this,t),e=r.size;return r.set(t,n),this.size+=r.size==e?0:1,this}He.prototype.clear=Ge,He.prototype.delete=ze,He.prototype.get=Be,He.prototype.has=We,He.prototype.set=Ke;function Je(t){var n=-1,r=t==null?0:t.length;for(this.__data__=new He;++n<r;)this.add(t[n])}function Ze(t){return this.__data__.set(t,a),this}function Ye(t){return this.__data__.has(t)}Je.prototype.add=Je.prototype.push=Ze,Je.prototype.has=Ye;function Qe(t){var n=this.__data__=new De(t);this.size=n.size}function Xe(){this.__data__=new De,this.size=0}function ti(t){var n=this.__data__,r=n.delete(t);return this.size=n.size,r}function ni(t){return this.__data__.get(t)}function ri(t){return this.__data__.has(t)}function ei(t,n){var r=this.__data__;if(r instanceof De){var e=r.__data__;if(!tr||e.length<i-1)return e.push([t,n]),this.size=++r.size,this;r=this.__data__=new He(e)}return r.set(t,n),this.size=r.size,this}Qe.prototype.clear=Xe,Qe.prototype.delete=ti,Qe.prototype.get=ni,Qe.prototype.has=ri,Qe.prototype.set=ei;function ii(t,n){var r=cf(t),e=!r&&af(t),i=!r&&!e&&vf(t),s=!r&&!e&&!i&&Vf(t),o=r||e||i||s,u=o?Gr(t.length,sn):[],a=u.length;for(var c in t)(n||ln.call(t,c))&&!(o&&(c=="length"||i&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||ou(c,a)))&&u.push(c);return u}function si(t){var n=t.length;return n?t[ys(0,n-1)]:r}function oi(t,n){return xu(eo(t),wi(n,0,t.length))}function ui(t){return xu(eo(t))}function ai(t,n,e){(e!==r&&!sf(t[n],e)||e===r&&!(n in t))&&vi(t,n,e)}function ci(t,n,e){var i=t[n];(!(ln.call(t,n)&&sf(i,e))||e===r&&!(n in t))&&vi(t,n,e)}function fi(t,n){for(var r=t.length;r--;)if(sf(t[r][0],n))return r;return-1}function hi(t,n,r,e){return Ei(t,(function(t,i,s){n(e,t,r(t),s)})),e}function li(t,n){return t&&io(n,Oh(n),t)}function di(t,n){return t&&io(n,Sh(n),t)}function vi(t,n,r){n=="__proto__"&&Pn?Pn(t,n,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[n]=r}function pi(t,n){for(var e=-1,i=n.length,s=Ct(i),o=t==null;++e<i;)s[e]=o?r:yh(t,n[e]);return s}function wi(t,n,e){return t===t&&(e!==r&&(t=t<=e?t:e),n!==r&&(t=t>=n?t:n)),t}function yi(t,n,e,i,s,o){var u,a=n&h,c=n&l,f=n&d;if(e&&(u=s?e(t,i,s,o):e(t)),u!==r)return u;if(!jf(t))return t;var v=cf(t);if(v){if(u=nu(t),!a)return eo(t,u)}else{var p=Yo(t),w=p==K||p==J;if(vf(t))return Ws(t,a);if(p==X||p==V||w&&!s){if(u=c||w?{}:ru(t),!a)return c?oo(t,di(u,t)):so(t,li(u,t))}else{if(!Zn[p])return s?t:{};u=eu(t,p,a)}}o||(o=new Qe);var y=o.get(t);if(y)return y;o.set(t,u),kf(t)?t.forEach((function(r){u.add(yi(r,n,e,r,t,o))})):Af(t)&&t.forEach((function(r,i){u.set(i,yi(r,n,e,i,t,o))}));var b=f?c?qo:Lo:c?Sh:Oh,m=v?r:b(t);return mr(m||t,(function(r,i){m&&(i=r,r=t[i]),ci(u,i,yi(r,n,e,i,t,o))})),u}function bi(t){var n=Oh(t);return function(r){return mi(r,t,n)}}function mi(t,n,e){var i=e.length;if(t==null)return!i;for(t=rn(t);i--;){var s=e[i],o=n[s],u=t[s];if(u===r&&!(s in t)||!o(u))return!1}return!0}function _i(t,n,e){if(typeof t!="function")throw new on(o);return ju((function(){t.apply(r,e)}),n)}function gi(t,n,r,e){var s=-1,o=Or,u=!0,a=t.length,c=[],f=n.length;if(!a)return c;r&&(n=jr(n,Wr(r))),e?(o=Sr,u=!1):n.length>=i&&(o=Jr,u=!1,n=new Je(n));t:for(;++s<a;){var h=t[s],l=r==null?h:r(h);if(h=e||h!==0?h:0,u&&l===l){for(var d=f;d--;)if(n[d]===l)continue t;c.push(h)}else o(n,l,e)||c.push(h)}return c}var Ei=co(Ti),Oi=co(Ui,!0);function Si(t,n){var r=!0;return Ei(t,(function(t,e,i){return r=!!n(t,e,i),r})),r}function ji(t,n,e){for(var i=-1,s=t.length;++i<s;){var o=t[i],u=n(o);if(u!=null&&(a===r?u===u&&!qf(u):e(u,a)))var a=u,c=o}return c}function Ii(t,n,e,i){var s=t.length;for(e=Jf(e),e<0&&(e=-e>s?0:s+e),i=i===r||i>s?s:Jf(i),i<0&&(i+=s),i=e>i?0:Zf(i);e<i;)t[e++]=n;return t}function Ai(t,n){var r=[];return Ei(t,(function(t,e,i){n(t,e,i)&&r.push(t)})),r}function Ni(t,n,r,e,i){var s=-1,o=t.length;for(r||(r=su),i||(i=[]);++s<o;){var u=t[s];n>0&&r(u)?n>1?Ni(u,n-1,r,e,i):Ir(i,u):e||(i[i.length]=u)}return i}var xi=fo(),Pi=fo(!0);function Ti(t,n){return t&&xi(t,n,Oh)}function Ui(t,n){return t&&Pi(t,n,Oh)}function $i(t,n){return Er(n,(function(n){return Ef(t[n])}))}function Mi(t,n){n=Hs(n,t);for(var e=0,i=n.length;t!=null&&e<i;)t=t[Tu(n[e++])];return e&&e==i?t:r}function Ri(t,n,r){var e=n(t);return cf(t)?e:Ir(e,r(t))}function Ci(t){return t==null?t===r?ot:Q:xn&&xn in rn(t)?Ko(t):mu(t)}function Di(t,n){return t>n}function ki(t,n){return t!=null&&ln.call(t,n)}function Li(t,n){return t!=null&&n in rn(t)}function qi(t,n,r){return t>=Gn(n,r)&&t<Hn(n,r)}function Vi(t,n,e){for(var i=e?Sr:Or,s=t[0].length,o=t.length,u=o,a=Ct(o),c=1/0,f=[];u--;){var h=t[u];u&&n&&(h=jr(h,Wr(n))),c=Gn(h.length,c),a[u]=!e&&(n||s>=120&&h.length>=120)?new Je(u&&h):r}h=t[0];var l=-1,d=a[0];t:for(;++l<s&&f.length<c;){var v=h[l],p=n?n(v):v;if(v=e||v!==0?v:0,!(d?Jr(d,p):i(f,p,e))){for(u=o;--u;){var w=a[u];if(!(w?Jr(w,p):i(t[u],p,e)))continue t}d&&d.push(p),f.push(v)}}return f}function Fi(t,n,r,e){return Ti(t,(function(t,i,s){n(e,r(t),i,s)})),e}function Hi(t,n,e){n=Hs(n,t),t=gu(t,n);var i=t==null?t:t[Tu(sa(n))];return i==null?r:yr(i,t,e)}function Gi(t){return If(t)&&Ci(t)==V}function zi(t){return If(t)&&Ci(t)==ct}function Bi(t){return If(t)&&Ci(t)==z}function Wi(t,n,r,e,i){return t===n?!0:t==null||n==null||!If(t)&&!If(n)?t!==t&&n!==n:Ki(t,n,r,e,Wi,i)}function Ki(t,n,r,e,i,s){var o=cf(t),u=cf(n),a=o?F:Yo(t),c=u?F:Yo(n);a=a==V?X:a,c=c==V?X:c;var f=a==X,h=c==X,l=a==c;if(l&&vf(t)){if(!vf(n))return!1;o=!0,f=!1}if(l&&!f)return s||(s=new Qe),o||Vf(t)?Ro(t,n,r,e,i,s):Co(t,n,a,r,e,i,s);if(!(r&v)){var d=f&&ln.call(t,"__wrapped__"),p=h&&ln.call(n,"__wrapped__");if(d||p){var w=d?t.value():t,y=p?n.value():n;return s||(s=new Qe),i(w,y,r,e,s)}}return l?(s||(s=new Qe),Do(t,n,r,e,i,s)):!1}function Ji(t){return If(t)&&Yo(t)==Z}function Zi(t,n,e,i){var s=e.length,o=s,u=!i;if(t==null)return!o;for(t=rn(t);s--;){var a=e[s];if(u&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++s<o;){a=e[s];var c=a[0],f=t[c],h=a[1];if(u&&a[2]){if(f===r&&!(c in t))return!1}else{var l=new Qe;if(i)var d=i(f,h,c,t,n,l);if(!(d===r?Wi(h,f,v|p,i,l):d))return!1}}return!0}function Yi(t){if(!jf(t)||hu(t))return!1;var n=Ef(t)?bn:Wt;return n.test(Uu(t))}function Qi(t){return If(t)&&Ci(t)==rt}function Xi(t){return If(t)&&Yo(t)==et}function ts(t){return If(t)&&Sf(t.length)&&!!Jn[Ci(t)]}function ns(t){return typeof t=="function"?t:t==null?Tl:typeof t=="object"?cf(t)?us(t[0],t[1]):os(t):Gl(t)}function rs(t){if(!du(t))return qn(t);var n=[];for(var r in rn(t))ln.call(t,r)&&r!="constructor"&&n.push(r);return n}function es(t){if(!jf(t))return bu(t);var n=du(t),r=[];for(var e in t)e=="constructor"&&(n||!ln.call(t,e))||r.push(e);return r}function is(t,n){return t<n}function ss(t,n){var r=-1,e=hf(t)?Ct(t.length):[];return Ei(t,(function(t,i,s){e[++r]=n(t,i,s)})),e}function os(t){var n=Bo(t);return n.length==1&&n[0][2]?pu(n[0][0],n[0][1]):function(r){return r===t||Zi(r,t,n)}}function us(t,n){return au(t)&&vu(n)?pu(Tu(t),n):function(e){var i=yh(e,t);return i===r&&i===n?mh(e,t):Wi(n,i,v|p)}}function as(t,n,e,i,s){t!==n&&xi(n,(function(o,u){if(s||(s=new Qe),jf(o))cs(t,n,u,e,as,i,s);else{var a=i?i(Ou(t,u),o,u+"",t,n,s):r;a===r&&(a=o),ai(t,u,a)}}),Sh)}function cs(t,n,e,i,s,o,u){var a=Ou(t,e),c=Ou(n,e),f=u.get(c);if(f){ai(t,e,f);return}var h=o?o(a,c,e+"",t,n,u):r,l=h===r;if(l){var d=cf(c),v=!d&&vf(c),p=!d&&!v&&Vf(c);h=c,d||v||p?cf(a)?h=a:lf(a)?h=eo(a):v?(l=!1,h=Ws(c,!0)):p?(l=!1,h=Qs(c,!0)):h=[]:Rf(c)||af(c)?(h=a,af(a)?h=Qf(a):(!jf(a)||Ef(a))&&(h=ru(c))):l=!1}l&&(u.set(c,h),s(h,c,i,o,u),u.delete(c)),ai(t,e,h)}function fs(t,n){var e=t.length;if(e)return n+=n<0?e:0,ou(n,e)?t[n]:r}function hs(t,n,r){n.length?n=jr(n,(function(t){return cf(t)?function(n){return Mi(n,t.length===1?t[0]:t)}:t})):n=[Tl];var e=-1;n=jr(n,Wr(Go()));var i=ss(t,(function(t,r,i){var s=jr(n,(function(n){return n(t)}));return{criteria:s,index:++e,value:t}}));return Fr(i,(function(t,n){return to(t,n,r)}))}function ls(t,n){return ds(t,n,(function(n,r){return mh(t,r)}))}function ds(t,n,r){for(var e=-1,i=n.length,s={};++e<i;){var o=n[e],u=Mi(t,o);r(u,o)&&Os(s,Hs(o,t),u)}return s}function vs(t){return function(n){return Mi(n,t)}}function ps(t,n,r,e){var i=e?Cr:Rr,s=-1,o=n.length,u=t;for(t===n&&(n=eo(n)),r&&(u=jr(t,Wr(r)));++s<o;)for(var a=0,c=n[s],f=r?r(c):c;(a=i(u,f,a,e))>-1;)u!==t&&In.call(u,a,1),In.call(t,a,1);return t}function ws(t,n){for(var r=t?n.length:0,e=r-1;r--;){var i=n[r];if(r==e||i!==s){var s=i;ou(i)?In.call(t,i,1):Rs(t,i)}}return t}function ys(t,n){return t+Rn(Yn()*(n-t+1))}function bs(t,n,r,e){for(var i=-1,s=Hn(Mn((n-t)/(r||1)),0),o=Ct(s);s--;)o[e?s:++i]=t,t+=r;return o}function ms(t,n){var r="";if(!t||n<1||n>M)return r;do{n%2&&(r+=t),n=Rn(n/2),n&&(t+=t)}while(n);return r}function _s(t,n){return Iu(_u(t,n,Tl),t+"")}function gs(t){return si(Fh(t))}function Es(t,n){var r=Fh(t);return xu(r,wi(n,0,r.length))}function Os(t,n,e,i){if(!jf(t))return t;n=Hs(n,t);for(var s=-1,o=n.length,u=o-1,a=t;a!=null&&++s<o;){var c=Tu(n[s]),f=e;if(c==="__proto__"||c==="constructor"||c==="prototype")return t;if(s!=u){var h=a[c];f=i?i(h,c,a):r,f===r&&(f=jf(h)?h:ou(n[s+1])?[]:{})}ci(a,c,f),a=a[c]}return t}var Ss=cr?function(t,n){return cr.set(t,n),t}:Tl,js=Pn?function(t,n){return Pn(t,"toString",{configurable:!0,enumerable:!1,value:Al(n),writable:!0})}:Tl;function Is(t){return xu(Fh(t))}function As(t,n,r){var e=-1,i=t.length;n<0&&(n=-n>i?0:i+n),r=r>i?i:r,r<0&&(r+=i),i=n>r?0:r-n>>>0,n>>>=0;for(var s=Ct(i);++e<i;)s[e]=t[e+n];return s}function Ns(t,n){var r;return Ei(t,(function(t,e,i){return r=n(t,e,i),!r})),!!r}function xs(t,n,r){var e=0,i=t==null?e:t.length;if(typeof n=="number"&&n===n&&i<=L){for(;e<i;){var s=e+i>>>1,o=t[s];o!==null&&!qf(o)&&(r?o<=n:o<n)?e=s+1:i=s}return i}return Ps(t,n,Tl,r)}function Ps(t,n,e,i){var s=0,o=t==null?0:t.length;if(o===0)return 0;n=e(n);for(var u=n!==n,a=n===null,c=qf(n),f=n===r;s<o;){var h=Rn((s+o)/2),l=e(t[h]),d=l!==r,v=l===null,p=l===l,w=qf(l);if(u)var y=i||p;else f?y=p&&(i||d):a?y=p&&d&&(i||!v):c?y=p&&d&&!v&&(i||!w):v||w?y=!1:y=i?l<=n:l<n;y?s=h+1:o=h}return Gn(o,k)}function Ts(t,n){for(var r=-1,e=t.length,i=0,s=[];++r<e;){var o=t[r],u=n?n(o):o;if(!r||!sf(u,a)){var a=u;s[i++]=o===0?0:o}}return s}function Us(t){return typeof t=="number"?t:qf(t)?C:+t}function $s(t){if(typeof t=="string")return t;if(cf(t))return jr(t,$s)+"";if(qf(t))return Ee?Ee.call(t):"";var n=t+"";return n=="0"&&1/t==-$?"-0":n}function Ms(t,n,r){var e=-1,s=Or,o=t.length,u=!0,a=[],c=a;if(r)u=!1,s=Sr;else if(o>=i){var f=n?null:xo(t);if(f)return ce(f);u=!1,s=Jr,c=new Je}else c=n?[]:a;t:for(;++e<o;){var h=t[e],l=n?n(h):h;if(h=r||h!==0?h:0,u&&l===l){for(var d=c.length;d--;)if(c[d]===l)continue t;n&&c.push(l),a.push(h)}else s(c,l,r)||(c!==a&&c.push(l),a.push(h))}return a}function Rs(t,n){return n=Hs(n,t),t=gu(t,n),t==null||delete t[Tu(sa(n))]}function Cs(t,n,r,e){return Os(t,n,r(Mi(t,n)),e)}function Ds(t,n,r,e){for(var i=t.length,s=e?i:-1;(e?s--:++s<i)&&n(t[s],s,t););return r?As(t,e?0:s,e?s+1:i):As(t,e?s+1:0,e?i:s)}function ks(t,n){var r=t;return r instanceof Ae&&(r=r.value()),Ar(n,(function(t,n){return n.func.apply(n.thisArg,Ir([t],n.args))}),r)}function Ls(t,n,r){var e=t.length;if(e<2)return e?Ms(t[0]):[];for(var i=-1,s=Ct(e);++i<e;)for(var o=t[i],u=-1;++u<e;)u!=i&&(s[i]=gi(s[i]||o,t[u],n,r));return Ms(Ni(s,1),n,r)}function qs(t,n,e){for(var i=-1,s=t.length,o=n.length,u={};++i<s;){var a=i<o?n[i]:r;e(u,t[i],a)}return u}function Vs(t){return lf(t)?t:[]}function Fs(t){return typeof t=="function"?t:Tl}function Hs(t,n){return cf(t)?t:au(t,n)?[t]:Pu(th(t))}var Gs=_s;function zs(t,n,e){var i=t.length;return e=e===r?i:e,!n&&e>=i?t:As(t,n,e)}var Bs=Tn||function(t){return sr.clearTimeout(t)};function Ws(t,n){if(n)return t.slice();var r=t.length,e=En?En(r):new t.constructor(r);return t.copy(e),e}function Ks(t){var n=new t.constructor(t.byteLength);return new gn(n).set(new gn(t)),n}function Js(t,n){var r=n?Ks(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}function Zs(t){var n=new t.constructor(t.source,Gt.exec(t));return n.lastIndex=t.lastIndex,n}function Ys(t){return _e?rn(_e.call(t)):{}}function Qs(t,n){var r=n?Ks(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}function Xs(t,n){if(t!==n){var e=t!==r,i=t===null,s=t===t,o=qf(t),u=n!==r,a=n===null,c=n===n,f=qf(n);if(!a&&!f&&!o&&t>n||o&&u&&c&&!a&&!f||i&&u&&c||!e&&c||!s)return 1;if(!i&&!o&&!f&&t<n||f&&e&&s&&!i&&!o||a&&e&&s||!u&&s||!c)return-1}return 0}function to(t,n,r){for(var e=-1,i=t.criteria,s=n.criteria,o=i.length,u=r.length;++e<o;){var a=Xs(i[e],s[e]);if(a){if(e>=u)return a;var c=r[e];return a*(c=="desc"?-1:1)}}return t.index-n.index}function no(t,n,r,e){for(var i=-1,s=t.length,o=r.length,u=-1,a=n.length,c=Hn(s-o,0),f=Ct(a+c),h=!e;++u<a;)f[u]=n[u];for(;++i<o;)(h||i<s)&&(f[r[i]]=t[i]);for(;c--;)f[u++]=t[i++];return f}function ro(t,n,r,e){for(var i=-1,s=t.length,o=-1,u=r.length,a=-1,c=n.length,f=Hn(s-u,0),h=Ct(f+c),l=!e;++i<f;)h[i]=t[i];for(var d=i;++a<c;)h[d+a]=n[a];for(;++o<u;)(l||i<s)&&(h[d+r[o]]=t[i++]);return h}function eo(t,n){var r=-1,e=t.length;for(n||(n=Ct(e));++r<e;)n[r]=t[r];return n}function io(t,n,e,i){var s=!e;e||(e={});for(var o=-1,u=n.length;++o<u;){var a=n[o],c=i?i(e[a],t[a],a,e,t):r;c===r&&(c=t[a]),s?vi(e,a,c):ci(e,a,c)}return e}function so(t,n){return io(t,Jo(t),n)}function oo(t,n){return io(t,Zo(t),n)}function uo(t,n){return function(r,e){var i=cf(r)?br:hi,s=n?n():{};return i(r,t,Go(e,2),s)}}function ao(t){return _s((function(n,e){var i=-1,s=e.length,o=s>1?e[s-1]:r,u=s>2?e[2]:r;for(o=t.length>3&&typeof o=="function"?(s--,o):r,u&&uu(e[0],e[1],u)&&(o=s<3?r:o,s=1),n=rn(n);++i<s;){var a=e[i];a&&t(n,a,i,o)}return n}))}function co(t,n){return function(r,e){if(r==null)return r;if(!hf(r))return t(r,e);for(var i=r.length,s=n?i:-1,o=rn(r);(n?s--:++s<i)&&e(o[s],s,o)!==!1;);return r}}function fo(t){return function(n,r,e){for(var i=-1,s=rn(n),o=e(n),u=o.length;u--;){var a=o[t?u:++i];if(r(s[a],a,s)===!1)break}return n}}function ho(t,n,r){var e=n&w,i=po(t);function s(){var n=this&&this!==sr&&this instanceof s?i:t;return n.apply(e?r:this,arguments)}return s}function lo(t){return function(n){n=th(n);var e=ee(n)?ve(n):r,i=e?e[0]:n.charAt(0),s=e?zs(e,1).join(""):n.slice(1);return i[t]()+s}}function vo(t){return function(n){return Ar(El(Jh(n).replace(Vn,"")),t,"")}}function po(t){return function(){var n=arguments;switch(n.length){case 0:return new t;case 1:return new t(n[0]);case 2:return new t(n[0],n[1]);case 3:return new t(n[0],n[1],n[2]);case 4:return new t(n[0],n[1],n[2],n[3]);case 5:return new t(n[0],n[1],n[2],n[3],n[4]);case 6:return new t(n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return new t(n[0],n[1],n[2],n[3],n[4],n[5],n[6])}var r=Se(t.prototype),e=t.apply(r,n);return jf(e)?e:r}}function wo(t,n,e){var i=po(t);function s(){for(var o=arguments.length,u=Ct(o),a=o,c=Ho(s);a--;)u[a]=arguments[a];var f=o<3&&u[0]!==c&&u[o-1]!==c?[]:ae(u,c);if(o-=f.length,o<e)return Ao(t,n,mo,s.placeholder,r,u,f,r,r,e-o);var h=this&&this!==sr&&this instanceof s?i:t;return yr(h,this,u)}return s}function yo(t){return function(n,e,i){var s=rn(n);if(!hf(n)){var o=Go(e,3);n=Oh(n),e=function(t){return o(s[t],t,s)}}var u=t(n,e,i);return u>-1?s[o?n[u]:u]:r}}function bo(t){return ko((function(n){var e=n.length,i=e,s=Ie.prototype.thru;for(t&&n.reverse();i--;){var u=n[i];if(typeof u!="function")throw new on(o);if(s&&!a&&Fo(u)=="wrapper")var a=new Ie([],!0)}for(i=a?i:e;++i<e;){u=n[i];var c=Fo(u),f=c=="wrapper"?Vo(u):r;f&&fu(f[0])&&f[1]==(O|m|g|S)&&!f[4].length&&f[9]==1?a=a[Fo(f[0])].apply(a,f[3]):a=u.length==1&&fu(u)?a[c]():a.thru(u)}return function(){var t=arguments,r=t[0];if(a&&t.length==1&&cf(r))return a.plant(r).value();for(var i=0,s=e?n[i].apply(this,t):r;++i<e;)s=n[i].call(this,s);return s}}))}function mo(t,n,e,i,s,o,u,a,c,f){var h=n&O,l=n&w,d=n&y,v=n&(m|_),p=n&j,b=d?r:po(t);function g(){for(var r=arguments.length,w=Ct(r),y=r;y--;)w[y]=arguments[y];if(v)var m=Ho(g),_=Qr(w,m);if(i&&(w=no(w,i,s,v)),o&&(w=ro(w,o,u,v)),r-=_,v&&r<f){var E=ae(w,m);return Ao(t,n,mo,g.placeholder,e,w,E,a,c,f-r)}var O=l?e:this,S=d?O[t]:t;return r=w.length,a?w=Eu(w,a):p&&r>1&&w.reverse(),h&&c<r&&(w.length=c),this&&this!==sr&&this instanceof g&&(S=b||po(S)),S.apply(O,w)}return g}function _o(t,n){return function(r,e){return Fi(r,t,n(e),{})}}function go(t,n){return function(e,i){var s;if(e===r&&i===r)return n;if(e!==r&&(s=e),i!==r){if(s===r)return i;typeof e=="string"||typeof i=="string"?(e=$s(e),i=$s(i)):(e=Us(e),i=Us(i)),s=t(e,i)}return s}}function Eo(t){return ko((function(n){return n=jr(n,Wr(Go())),_s((function(r){var e=this;return t(n,(function(t){return yr(t,e,r)}))}))}))}function Oo(t,n){n=n===r?" ":$s(n);var e=n.length;if(e<2)return e?ms(n,t):n;var i=ms(n,Mn(t/de(n)));return ee(n)?zs(ve(i),0,t).join(""):i.slice(0,t)}function So(t,n,r,e){var i=n&w,s=po(t);function o(){for(var n=-1,u=arguments.length,a=-1,c=e.length,f=Ct(c+u),h=this&&this!==sr&&this instanceof o?s:t;++a<c;)f[a]=e[a];for(;u--;)f[a++]=arguments[++n];return yr(h,i?r:this,f)}return o}function jo(t){return function(n,e,i){return i&&typeof i!="number"&&uu(n,e,i)&&(e=i=r),n=Kf(n),e===r?(e=n,n=0):e=Kf(e),i=i===r?n<e?1:-1:Kf(i),bs(n,e,i,t)}}function Io(t){return function(n,r){return typeof n=="string"&&typeof r=="string"||(n=Yf(n),r=Yf(r)),t(n,r)}}function Ao(t,n,e,i,s,o,u,a,c,f){var h=n&m,l=h?u:r,d=h?r:u,v=h?o:r,p=h?r:o;n|=h?g:E,n&=~(h?E:g),n&b||(n&=~(w|y));var _=[t,n,s,v,l,p,d,a,c,f],O=e.apply(r,_);return fu(t)&&Su(O,_),O.placeholder=i,Au(O,t,n)}function No(t){var n=nn[t];return function(t,r){if(t=Yf(t),r=r==null?0:Gn(Jf(r),292),r&&kn(t)){var e=(th(t)+"e").split("e"),i=n(e[0]+"e"+(+e[1]+r));return e=(th(i)+"e").split("e"),+(e[0]+"e"+(+e[1]-r))}return n(t)}}var xo=ir&&1/ce(new ir([,-0]))[1]==$?function(t){return new ir(t)}:Ll;function Po(t){return function(n){var r=Yo(n);return r==Z?oe(n):r==et?fe(n):zr(n,t(n))}}function To(t,n,e,i,s,u,a,c){var f=n&y;if(!f&&typeof t!="function")throw new on(o);var h=i?i.length:0;if(h||(n&=~(g|E),i=s=r),a=a===r?a:Hn(Jf(a),0),c=c===r?c:Jf(c),h-=s?s.length:0,n&E){var l=i,d=s;i=s=r}var v=f?r:Vo(t),p=[t,n,e,i,s,l,d,u,a,c];if(v&&yu(p,v),t=p[0],n=p[1],e=p[2],i=p[3],s=p[4],c=p[9]=p[9]===r?f?0:t.length:Hn(p[9]-h,0),!c&&n&(m|_)&&(n&=~(m|_)),!n||n==w)var b=ho(t,n,e);else n==m||n==_?b=wo(t,n,c):(n==g||n==(w|g))&&!s.length?b=So(t,n,e,i):b=mo.apply(r,p);var O=v?Ss:Su;return Au(O(b,p),t,n)}function Uo(t,n,e,i){return t===r||sf(t,cn[e])&&!ln.call(i,e)?n:t}function $o(t,n,e,i,s,o){return jf(t)&&jf(n)&&(o.set(n,t),as(t,n,r,$o,o),o.delete(n)),t}function Mo(t){return Rf(t)?r:t}function Ro(t,n,e,i,s,o){var u=e&v,a=t.length,c=n.length;if(a!=c&&!(u&&c>a))return!1;var f=o.get(t),h=o.get(n);if(f&&h)return f==n&&h==t;var l=-1,d=!0,w=e&p?new Je:r;for(o.set(t,n),o.set(n,t);++l<a;){var y=t[l],b=n[l];if(i)var m=u?i(b,y,l,n,t,o):i(y,b,l,t,n,o);if(m!==r){if(m)continue;d=!1;break}if(w){if(!xr(n,(function(t,n){if(!Jr(w,n)&&(y===t||s(y,t,e,i,o)))return w.push(n)}))){d=!1;break}}else if(!(y===b||s(y,b,e,i,o))){d=!1;break}}return o.delete(t),o.delete(n),d}function Co(t,n,r,e,i,s,o){switch(r){case ft:if(t.byteLength!=n.byteLength||t.byteOffset!=n.byteOffset)return!1;t=t.buffer,n=n.buffer;case ct:return!(t.byteLength!=n.byteLength||!s(new gn(t),new gn(n)));case G:case z:case Y:return sf(+t,+n);case W:return t.name==n.name&&t.message==n.message;case rt:case it:return t==n+"";case Z:var u=oe;case et:var a=e&v;if(u||(u=ce),t.size!=n.size&&!a)return!1;var c=o.get(t);if(c)return c==n;e|=p,o.set(t,n);var f=Ro(u(t),u(n),e,i,s,o);return o.delete(t),f;case st:if(_e)return _e.call(t)==_e.call(n)}return!1}function Do(t,n,e,i,s,o){var u=e&v,a=Lo(t),c=a.length,f=Lo(n),h=f.length;if(c!=h&&!u)return!1;for(var l=c;l--;){var d=a[l];if(!(u?d in n:ln.call(n,d)))return!1}var p=o.get(t),w=o.get(n);if(p&&w)return p==n&&w==t;var y=!0;o.set(t,n),o.set(n,t);for(var b=u;++l<c;){d=a[l];var m=t[d],_=n[d];if(i)var g=u?i(_,m,d,n,t,o):i(m,_,d,t,n,o);if(!(g===r?m===_||s(m,_,e,i,o):g)){y=!1;break}b||(b=d=="constructor")}if(y&&!b){var E=t.constructor,O=n.constructor;E!=O&&"constructor"in t&&"constructor"in n&&!(typeof E=="function"&&E instanceof E&&typeof O=="function"&&O instanceof O)&&(y=!1)}return o.delete(t),o.delete(n),y}function ko(t){return Iu(_u(t,r,Ku),t+"")}function Lo(t){return Ri(t,Oh,Jo)}function qo(t){return Ri(t,Sh,Zo)}var Vo=cr?function(t){return cr.get(t)}:Ll;function Fo(t){for(var n=t.name+"",r=fr[n],e=ln.call(fr,n)?r.length:0;e--;){var i=r[e],s=i.func;if(s==null||s==t)return i.name}return n}function Ho(t){var n=ln.call(Oe,"placeholder")?Oe:t;return n.placeholder}function Go(){var t=Oe.iteratee||Ul;return t=t===Ul?ns:t,arguments.length?t(arguments[0],arguments[1]):t}function zo(t,n){var r=t.__data__;return cu(n)?r[typeof n=="string"?"string":"hash"]:r.map}function Bo(t){for(var n=Oh(t),r=n.length;r--;){var e=n[r],i=t[e];n[r]=[e,i,vu(i)]}return n}function Wo(t,n){var e=re(t,n);return Yi(e)?e:r}function Ko(t){var n=ln.call(t,xn),e=t[xn];try{t[xn]=r;var i=!0}catch{}var s=pn.call(t);return i&&(n?t[xn]=e:delete t[xn]),s}var Jo=Cn?function(t){return t==null?[]:(t=rn(t),Er(Cn(t),(function(n){return jn.call(t,n)})))}:Kl,Zo=Cn?function(t){for(var n=[];t;)Ir(n,Jo(t)),t=On(t);return n}:Kl,Yo=Ci;(Xn&&Yo(new Xn(new ArrayBuffer(1)))!=ft||tr&&Yo(new tr)!=Z||er&&Yo(er.resolve())!=tt||ir&&Yo(new ir)!=et||or&&Yo(new or)!=ut)&&(Yo=function(t){var n=Ci(t),e=n==X?t.constructor:r,i=e?Uu(e):"";if(i)switch(i){case Pr:return ft;case Tr:return Z;case qr:return tt;case he:return et;case ye:return ut}return n});function Qo(t,n,r){for(var e=-1,i=r.length;++e<i;){var s=r[e],o=s.size;switch(s.type){case"drop":t+=o;break;case"dropRight":n-=o;break;case"take":n=Gn(n,t+o);break;case"takeRight":t=Hn(t,n-o);break}}return{start:t,end:n}}function Xo(t){var n=t.match(kt);return n?n[1].split(Lt):[]}function tu(t,n,r){n=Hs(n,t);for(var e=-1,i=n.length,s=!1;++e<i;){var o=Tu(n[e]);if(!(s=t!=null&&r(t,o)))break;t=t[o]}return s||++e!=i?s:(i=t==null?0:t.length,!!i&&Sf(i)&&ou(o,i)&&(cf(t)||af(t)))}function nu(t){var n=t.length,r=new t.constructor(n);return n&&typeof t[0]=="string"&&ln.call(t,"index")&&(r.index=t.index,r.input=t.input),r}function ru(t){return typeof t.constructor=="function"&&!du(t)?Se(On(t)):{}}function eu(t,n,r){var e=t.constructor;switch(n){case ct:return Ks(t);case G:case z:return new e(+t);case ft:return Js(t,r);case ht:case lt:case dt:case vt:case pt:case wt:case yt:case bt:case mt:return Qs(t,r);case Z:return new e;case Y:case it:return new e(t);case rt:return Zs(t);case et:return new e;case st:return Ys(t)}}function iu(t,n){var r=n.length;if(!r)return t;var e=r-1;return n[e]=(r>1?"& ":"")+n[e],n=n.join(r>2?", ":" "),t.replace(Dt,`{\n/* [wrapped with `+n+`] */\n`)}function su(t){return cf(t)||af(t)||!!(An&&t&&t[An])}function ou(t,n){var r=typeof t;return n=n??M,!!n&&(r=="number"||r!="symbol"&&Jt.test(t))&&t>-1&&t%1==0&&t<n}function uu(t,n,r){if(!jf(r))return!1;var e=typeof n;return(e=="number"?hf(r)&&ou(n,r.length):e=="string"&&n in r)?sf(r[n],t):!1}function au(t,n){if(cf(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||qf(t)?!0:Tt.test(t)||!Pt.test(t)||n!=null&&t in rn(n)}function cu(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}function fu(t){var n=Fo(t),r=Oe[n];if(typeof r!="function"||!(n in Ae.prototype))return!1;if(t===r)return!0;var e=Vo(r);return!!e&&t===e[0]}function hu(t){return!!vn&&vn in t}var lu=fn?Ef:Jl;function du(t){var n=t&&t.constructor,r=typeof n=="function"&&n.prototype||cn;return t===r}function vu(t){return t===t&&!jf(t)}function pu(t,n){return function(e){return e==null?!1:e[t]===n&&(n!==r||t in rn(e))}}function wu(t){var n=qc(t,(function(t){return r.size===c&&r.clear(),t})),r=n.cache;return n}function yu(t,n){var r=t[1],e=n[1],i=r|e,s=i<(w|y|O),o=e==O&&r==m||e==O&&r==S&&t[7].length<=n[8]||e==(O|S)&&n[7].length<=n[8]&&r==m;if(!(s||o))return t;e&w&&(t[2]=n[2],i|=r&w?0:b);var u=n[3];if(u){var a=t[3];t[3]=a?no(a,u,n[4]):u,t[4]=a?ae(t[3],f):n[4]}return u=n[5],u&&(a=t[5],t[5]=a?ro(a,u,n[6]):u,t[6]=a?ae(t[5],f):n[6]),u=n[7],u&&(t[7]=u),e&O&&(t[8]=t[8]==null?n[8]:Gn(t[8],n[8])),t[9]==null&&(t[9]=n[9]),t[0]=n[0],t[1]=i,t}function bu(t){var n=[];if(t!=null)for(var r in rn(t))n.push(r);return n}function mu(t){return pn.call(t)}function _u(t,n,e){return n=Hn(n===r?t.length-1:n,0),function(){for(var r=arguments,i=-1,s=Hn(r.length-n,0),o=Ct(s);++i<s;)o[i]=r[n+i];i=-1;for(var u=Ct(n+1);++i<n;)u[i]=r[i];return u[n]=e(o),yr(t,this,u)}}function gu(t,n){return n.length<2?t:Mi(t,As(n,0,-1))}function Eu(t,n){for(var e=t.length,i=Gn(n.length,e),s=eo(t);i--;){var o=n[i];t[i]=ou(o,e)?s[o]:r}return t}function Ou(t,n){if(!(n==="constructor"&&typeof t[n]=="function")&&n!="__proto__")return t[n]}var Su=Nu(Ss),ju=$n||function(t,n){return sr.setTimeout(t,n)},Iu=Nu(js);function Au(t,n,r){var e=n+"";return Iu(t,iu(e,$u(Xo(e),r)))}function Nu(t){var n=0,e=0;return function(){var i=zn(),s=x-(i-e);if(e=i,s>0){if(++n>=N)return arguments[0]}else n=0;return t.apply(r,arguments)}}function xu(t,n){var e=-1,i=t.length,s=i-1;for(n=n===r?i:n;++e<n;){var o=ys(e,s),u=t[o];t[o]=t[e],t[e]=u}return t.length=n,t}var Pu=wu((function(t){var n=[];return t.charCodeAt(0)===46&&n.push(""),t.replace(Ut,(function(t,r,e,i){n.push(e?i.replace(Ft,"$1"):r||t)})),n}));function Tu(t){if(typeof t=="string"||qf(t))return t;var n=t+"";return n=="0"&&1/t==-$?"-0":n}function Uu(t){if(t!=null){try{return hn.call(t)}catch{}try{return t+""}catch{}}return""}function $u(t,n){return mr(q,(function(r){var e="_."+r[0];n&r[1]&&!Or(t,e)&&t.push(e)})),t.sort()}function Mu(t){if(t instanceof Ae)return t.clone();var n=new Ie(t.__wrapped__,t.__chain__);return n.__actions__=eo(t.__actions__),n.__index__=t.__index__,n.__values__=t.__values__,n}function Ru(t,n,e){(e?uu(t,n,e):n===r)?n=1:n=Hn(Jf(n),0);var i=t==null?0:t.length;if(!i||n<1)return[];for(var s=0,o=0,u=Ct(Mn(i/n));s<i;)u[o++]=As(t,s,s+=n);return u}function Cu(t){for(var n=-1,r=t==null?0:t.length,e=0,i=[];++n<r;){var s=t[n];s&&(i[e++]=s)}return i}function Du(){var t=arguments.length;if(!t)return[];for(var n=Ct(t-1),r=arguments[0],e=t;e--;)n[e-1]=arguments[e];return Ir(cf(r)?eo(r):[r],Ni(n,1))}var ku=_s((function(t,n){return lf(t)?gi(t,Ni(n,1,lf,!0)):[]})),Lu=_s((function(t,n){var e=sa(n);return lf(e)&&(e=r),lf(t)?gi(t,Ni(n,1,lf,!0),Go(e,2)):[]})),qu=_s((function(t,n){var e=sa(n);return lf(e)&&(e=r),lf(t)?gi(t,Ni(n,1,lf,!0),r,e):[]}));function Vu(t,n,e){var i=t==null?0:t.length;return i?(n=e||n===r?1:Jf(n),As(t,n<0?0:n,i)):[]}function Fu(t,n,e){var i=t==null?0:t.length;return i?(n=e||n===r?1:Jf(n),n=i-n,As(t,0,n<0?0:n)):[]}function Hu(t,n){return t&&t.length?Ds(t,Go(n,3),!0,!0):[]}function Gu(t,n){return t&&t.length?Ds(t,Go(n,3),!0):[]}function zu(t,n,r,e){var i=t==null?0:t.length;return i?(r&&typeof r!="number"&&uu(t,n,r)&&(r=0,e=i),Ii(t,n,r,e)):[]}function Bu(t,n,r){var e=t==null?0:t.length;if(!e)return-1;var i=r==null?0:Jf(r);return i<0&&(i=Hn(e+i,0)),Mr(t,Go(n,3),i)}function Wu(t,n,e){var i=t==null?0:t.length;if(!i)return-1;var s=i-1;return e!==r&&(s=Jf(e),s=e<0?Hn(i+s,0):Gn(s,i-1)),Mr(t,Go(n,3),s,!0)}function Ku(t){var n=t==null?0:t.length;return n?Ni(t,1):[]}function Ju(t){var n=t==null?0:t.length;return n?Ni(t,$):[]}function Zu(t,n){var e=t==null?0:t.length;return e?(n=n===r?1:Jf(n),Ni(t,n)):[]}function Yu(t){for(var n=-1,r=t==null?0:t.length,e={};++n<r;){var i=t[n];e[i[0]]=i[1]}return e}function Qu(t){return t&&t.length?t[0]:r}function Xu(t,n,r){var e=t==null?0:t.length;if(!e)return-1;var i=r==null?0:Jf(r);return i<0&&(i=Hn(e+i,0)),Rr(t,n,i)}function ta(t){var n=t==null?0:t.length;return n?As(t,0,-1):[]}var na=_s((function(t){var n=jr(t,Vs);return n.length&&n[0]===t[0]?Vi(n):[]})),ra=_s((function(t){var n=sa(t),e=jr(t,Vs);return n===sa(e)?n=r:e.pop(),e.length&&e[0]===t[0]?Vi(e,Go(n,2)):[]})),ea=_s((function(t){var n=sa(t),e=jr(t,Vs);return n=typeof n=="function"?n:r,n&&e.pop(),e.length&&e[0]===t[0]?Vi(e,r,n):[]}));function ia(t,n){return t==null?"":Ln.call(t,n)}function sa(t){var n=t==null?0:t.length;return n?t[n-1]:r}function oa(t,n,e){var i=t==null?0:t.length;if(!i)return-1;var s=i;return e!==r&&(s=Jf(e),s=s<0?Hn(i+s,0):Gn(s,i-1)),n===n?le(t,n,s):Mr(t,Dr,s,!0)}function ua(t,n){return t&&t.length?fs(t,Jf(n)):r}var aa=_s(ca);function ca(t,n){return t&&t.length&&n&&n.length?ps(t,n):t}function fa(t,n,r){return t&&t.length&&n&&n.length?ps(t,n,Go(r,2)):t}function ha(t,n,e){return t&&t.length&&n&&n.length?ps(t,n,r,e):t}var la=ko((function(t,n){var r=t==null?0:t.length,e=pi(t,n);return ws(t,jr(n,(function(t){return ou(t,r)?+t:t})).sort(Xs)),e}));function da(t,n){var r=[];if(!(t&&t.length))return r;var e=-1,i=[],s=t.length;for(n=Go(n,3);++e<s;){var o=t[e];n(o,e,t)&&(r.push(o),i.push(e))}return ws(t,i),r}function va(t){return t==null?t:Qn.call(t)}function pa(t,n,e){var i=t==null?0:t.length;return i?(e&&typeof e!="number"&&uu(t,n,e)?(n=0,e=i):(n=n==null?0:Jf(n),e=e===r?i:Jf(e)),As(t,n,e)):[]}function wa(t,n){return xs(t,n)}function ya(t,n,r){return Ps(t,n,Go(r,2))}function ba(t,n){var r=t==null?0:t.length;if(r){var e=xs(t,n);if(e<r&&sf(t[e],n))return e}return-1}function ma(t,n){return xs(t,n,!0)}function _a(t,n,r){return Ps(t,n,Go(r,2),!0)}function ga(t,n){var r=t==null?0:t.length;if(r){var e=xs(t,n,!0)-1;if(sf(t[e],n))return e}return-1}function Ea(t){return t&&t.length?Ts(t):[]}function Oa(t,n){return t&&t.length?Ts(t,Go(n,2)):[]}function Sa(t){var n=t==null?0:t.length;return n?As(t,1,n):[]}function ja(t,n,e){return t&&t.length?(n=e||n===r?1:Jf(n),As(t,0,n<0?0:n)):[]}function Ia(t,n,e){var i=t==null?0:t.length;return i?(n=e||n===r?1:Jf(n),n=i-n,As(t,n<0?0:n,i)):[]}function Aa(t,n){return t&&t.length?Ds(t,Go(n,3),!1,!0):[]}function Na(t,n){return t&&t.length?Ds(t,Go(n,3)):[]}var xa=_s((function(t){return Ms(Ni(t,1,lf,!0))})),Pa=_s((function(t){var n=sa(t);return lf(n)&&(n=r),Ms(Ni(t,1,lf,!0),Go(n,2))})),Ta=_s((function(t){var n=sa(t);return n=typeof n=="function"?n:r,Ms(Ni(t,1,lf,!0),r,n)}));function Ua(t){return t&&t.length?Ms(t):[]}function $a(t,n){return t&&t.length?Ms(t,Go(n,2)):[]}function Ma(t,n){return n=typeof n=="function"?n:r,t&&t.length?Ms(t,r,n):[]}function Ra(t){if(!(t&&t.length))return[];var n=0;return t=Er(t,(function(t){if(lf(t))return n=Hn(t.length,n),!0})),Gr(n,(function(n){return jr(t,Lr(n))}))}function Ca(t,n){if(!(t&&t.length))return[];var e=Ra(t);return n==null?e:jr(e,(function(t){return yr(n,r,t)}))}var Da=_s((function(t,n){return lf(t)?gi(t,n):[]})),ka=_s((function(t){return Ls(Er(t,lf))})),La=_s((function(t){var n=sa(t);return lf(n)&&(n=r),Ls(Er(t,lf),Go(n,2))})),qa=_s((function(t){var n=sa(t);return n=typeof n=="function"?n:r,Ls(Er(t,lf),r,n)})),Va=_s(Ra);function Fa(t,n){return qs(t||[],n||[],ci)}function Ha(t,n){return qs(t||[],n||[],Os)}var Ga=_s((function(t){var n=t.length,e=n>1?t[n-1]:r;return e=typeof e=="function"?(t.pop(),e):r,Ca(t,e)}));function za(t){var n=Oe(t);return n.__chain__=!0,n}function Ba(t,n){return n(t),t}function Wa(t,n){return n(t)}var Ka=ko((function(t){var n=t.length,e=n?t[0]:0,i=this.__wrapped__,s=function(n){return pi(n,t)};return n>1||this.__actions__.length||!(i instanceof Ae)||!ou(e)?this.thru(s):(i=i.slice(e,+e+(n?1:0)),i.__actions__.push({func:Wa,args:[s],thisArg:r}),new Ie(i,this.__chain__).thru((function(t){return n&&!t.length&&t.push(r),t})))}));function Ja(){return za(this)}function Za(){return new Ie(this.value(),this.__chain__)}function Ya(){this.__values__===r&&(this.__values__=Wf(this.value()));var t=this.__index__>=this.__values__.length,n=t?r:this.__values__[this.__index__++];return{done:t,value:n}}function Qa(){return this}function Xa(t){for(var n,e=this;e instanceof je;){var i=Mu(e);i.__index__=0,i.__values__=r,n?s.__wrapped__=i:n=i;var s=i;e=e.__wrapped__}return s.__wrapped__=t,n}function tc(){var t=this.__wrapped__;if(t instanceof Ae){var n=t;return this.__actions__.length&&(n=new Ae(this)),n=n.reverse(),n.__actions__.push({func:Wa,args:[va],thisArg:r}),new Ie(n,this.__chain__)}return this.thru(va)}function nc(){return ks(this.__wrapped__,this.__actions__)}var rc=uo((function(t,n,r){ln.call(t,r)?++t[r]:vi(t,r,1)}));function ec(t,n,e){var i=cf(t)?gr:Si;return e&&uu(t,n,e)&&(n=r),i(t,Go(n,3))}function ic(t,n){var r=cf(t)?Er:Ai;return r(t,Go(n,3))}var sc=yo(Bu),oc=yo(Wu);function uc(t,n){return Ni(wc(t,n),1)}function ac(t,n){return Ni(wc(t,n),$)}function cc(t,n,e){return e=e===r?1:Jf(e),Ni(wc(t,n),e)}function fc(t,n){var r=cf(t)?mr:Ei;return r(t,Go(n,3))}function hc(t,n){var r=cf(t)?_r:Oi;return r(t,Go(n,3))}var lc=uo((function(t,n,r){ln.call(t,r)?t[r].push(n):vi(t,r,[n])}));function dc(t,n,r,e){t=hf(t)?t:Fh(t),r=r&&!e?Jf(r):0;var i=t.length;return r<0&&(r=Hn(i+r,0)),Lf(t)?r<=i&&t.indexOf(n,r)>-1:!!i&&Rr(t,n,r)>-1}var vc=_s((function(t,n,r){var e=-1,i=typeof n=="function",s=hf(t)?Ct(t.length):[];return Ei(t,(function(t){s[++e]=i?yr(n,t,r):Hi(t,n,r)})),s})),pc=uo((function(t,n,r){vi(t,r,n)}));function wc(t,n){var r=cf(t)?jr:ss;return r(t,Go(n,3))}function yc(t,n,e,i){return t==null?[]:(cf(n)||(n=n==null?[]:[n]),e=i?r:e,cf(e)||(e=e==null?[]:[e]),hs(t,n,e))}var bc=uo((function(t,n,r){t[r?0:1].push(n)}),(function(){return[[],[]]}));function mc(t,n,r){var e=cf(t)?Ar:Vr,i=arguments.length<3;return e(t,Go(n,4),r,i,Ei)}function _c(t,n,r){var e=cf(t)?Nr:Vr,i=arguments.length<3;return e(t,Go(n,4),r,i,Oi)}function gc(t,n){var r=cf(t)?Er:Ai;return r(t,Vc(Go(n,3)))}function Ec(t){var n=cf(t)?si:gs;return n(t)}function Oc(t,n,e){(e?uu(t,n,e):n===r)?n=1:n=Jf(n);var i=cf(t)?oi:Es;return i(t,n)}function Sc(t){var n=cf(t)?ui:Is;return n(t)}function jc(t){if(t==null)return 0;if(hf(t))return Lf(t)?de(t):t.length;var n=Yo(t);return n==Z||n==et?t.size:rs(t).length}function Ic(t,n,e){var i=cf(t)?xr:Ns;return e&&uu(t,n,e)&&(n=r),i(t,Go(n,3))}var Ac=_s((function(t,n){if(t==null)return[];var r=n.length;return r>1&&uu(t,n[0],n[1])?n=[]:r>2&&uu(n[0],n[1],n[2])&&(n=[n[0]]),hs(t,Ni(n,1),[])})),Nc=Un||function(){return sr.Date.now()};function xc(t,n){if(typeof n!="function")throw new on(o);return t=Jf(t),function(){if(--t<1)return n.apply(this,arguments)}}function Pc(t,n,e){return n=e?r:n,n=t&&n==null?t.length:n,To(t,O,r,r,r,r,n)}function Tc(t,n){var e;if(typeof n!="function")throw new on(o);return t=Jf(t),function(){return--t>0&&(e=n.apply(this,arguments)),t<=1&&(n=r),e}}var Uc=_s((function(t,n,r){var e=w;if(r.length){var i=ae(r,Ho(Uc));e|=g}return To(t,e,n,r,i)})),$c=_s((function(t,n,r){var e=w|y;if(r.length){var i=ae(r,Ho($c));e|=g}return To(n,e,t,r,i)}));function Mc(t,n,e){n=e?r:n;var i=To(t,m,r,r,r,r,r,n);return i.placeholder=Mc.placeholder,i}function Rc(t,n,e){n=e?r:n;var i=To(t,_,r,r,r,r,r,n);return i.placeholder=Rc.placeholder,i}function Cc(t,n,e){var i,s,u,a,c,f,h=0,l=!1,d=!1,v=!0;if(typeof t!="function")throw new on(o);n=Yf(n)||0,jf(e)&&(l=!!e.leading,d="maxWait"in e,u=d?Hn(Yf(e.maxWait)||0,n):u,v="trailing"in e?!!e.trailing:v);function p(n){var e=i,o=s;return i=s=r,h=n,a=t.apply(o,e),a}function w(t){return h=t,c=ju(m,n),l?p(t):a}function y(t){var r=t-f,e=t-h,i=n-r;return d?Gn(i,u-e):i}function b(t){var e=t-f,i=t-h;return f===r||e>=n||e<0||d&&i>=u}function m(){var t=Nc();if(b(t))return _(t);c=ju(m,y(t))}function _(t){return c=r,v&&i?p(t):(i=s=r,a)}function g(){c!==r&&Bs(c),h=0,i=f=s=c=r}function E(){return c===r?a:_(Nc())}function O(){var t=Nc(),e=b(t);if(i=arguments,s=this,f=t,e){if(c===r)return w(f);if(d)return Bs(c),c=ju(m,n),p(f)}return c===r&&(c=ju(m,n)),a}return O.cancel=g,O.flush=E,O}var Dc=_s((function(t,n){return _i(t,1,n)})),kc=_s((function(t,n,r){return _i(t,Yf(n)||0,r)}));function Lc(t){return To(t,j)}function qc(t,n){if(typeof t!="function"||n!=null&&typeof n!="function")throw new on(o);var r=function(){var e=arguments,i=n?n.apply(this,e):e[0],s=r.cache;if(s.has(i))return s.get(i);var o=t.apply(this,e);return r.cache=s.set(i,o)||s,o};return r.cache=new(qc.Cache||He),r}qc.Cache=He;function Vc(t){if(typeof t!="function")throw new on(o);return function(){var n=arguments;switch(n.length){case 0:return!t.call(this);case 1:return!t.call(this,n[0]);case 2:return!t.call(this,n[0],n[1]);case 3:return!t.call(this,n[0],n[1],n[2])}return!t.apply(this,n)}}function Fc(t){return Tc(2,t)}var Hc=Gs((function(t,n){n=n.length==1&&cf(n[0])?jr(n[0],Wr(Go())):jr(Ni(n,1),Wr(Go()));var r=n.length;return _s((function(e){for(var i=-1,s=Gn(e.length,r);++i<s;)e[i]=n[i].call(this,e[i]);return yr(t,this,e)}))})),Gc=_s((function(t,n){var e=ae(n,Ho(Gc));return To(t,g,r,n,e)})),zc=_s((function(t,n){var e=ae(n,Ho(zc));return To(t,E,r,n,e)})),Bc=ko((function(t,n){return To(t,S,r,r,r,n)}));function Wc(t,n){if(typeof t!="function")throw new on(o);return n=n===r?n:Jf(n),_s(t,n)}function Kc(t,n){if(typeof t!="function")throw new on(o);return n=n==null?0:Hn(Jf(n),0),_s((function(r){var e=r[n],i=zs(r,0,n);return e&&Ir(i,e),yr(t,this,i)}))}function Jc(t,n,r){var e=!0,i=!0;if(typeof t!="function")throw new on(o);return jf(r)&&(e="leading"in r?!!r.leading:e,i="trailing"in r?!!r.trailing:i),Cc(t,n,{leading:e,maxWait:n,trailing:i})}function Zc(t){return Pc(t,1)}function Yc(t,n){return Gc(Fs(n),t)}function Qc(){if(!arguments.length)return[];var t=arguments[0];return cf(t)?t:[t]}function Xc(t){return yi(t,d)}function tf(t,n){return n=typeof n=="function"?n:r,yi(t,d,n)}function nf(t){return yi(t,h|d)}function rf(t,n){return n=typeof n=="function"?n:r,yi(t,h|d,n)}function ef(t,n){return n==null||mi(t,n,Oh(n))}function sf(t,n){return t===n||t!==t&&n!==n}var of=Io(Di),uf=Io((function(t,n){return t>=n})),af=Gi(function(){return arguments}())?Gi:function(t){return If(t)&&ln.call(t,"callee")&&!jn.call(t,"callee")},cf=Ct.isArray,ff=hr?Wr(hr):zi;function hf(t){return t!=null&&Sf(t.length)&&!Ef(t)}function lf(t){return If(t)&&hf(t)}function df(t){return t===!0||t===!1||If(t)&&Ci(t)==G}var vf=Dn||Jl,pf=lr?Wr(lr):Bi;function wf(t){return If(t)&&t.nodeType===1&&!Rf(t)}function yf(t){if(t==null)return!0;if(hf(t)&&(cf(t)||typeof t=="string"||typeof t.splice=="function"||vf(t)||Vf(t)||af(t)))return!t.length;var n=Yo(t);if(n==Z||n==et)return!t.size;if(du(t))return!rs(t).length;for(var r in t)if(ln.call(t,r))return!1;return!0}function bf(t,n){return Wi(t,n)}function mf(t,n,e){e=typeof e=="function"?e:r;var i=e?e(t,n):r;return i===r?Wi(t,n,r,e):!!i}function _f(t){if(!If(t))return!1;var n=Ci(t);return n==W||n==B||typeof t.message=="string"&&typeof t.name=="string"&&!Rf(t)}function gf(t){return typeof t=="number"&&kn(t)}function Ef(t){if(!jf(t))return!1;var n=Ci(t);return n==K||n==J||n==H||n==nt}function Of(t){return typeof t=="number"&&t==Jf(t)}function Sf(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=M}function jf(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}function If(t){return t!=null&&typeof t=="object"}var Af=dr?Wr(dr):Ji;function Nf(t,n){return t===n||Zi(t,n,Bo(n))}function xf(t,n,e){return e=typeof e=="function"?e:r,Zi(t,n,Bo(n),e)}function Pf(t){return Mf(t)&&t!=+t}function Tf(t){if(lu(t))throw new Xt(s);return Yi(t)}function Uf(t){return t===null}function $f(t){return t==null}function Mf(t){return typeof t=="number"||If(t)&&Ci(t)==Y}function Rf(t){if(!If(t)||Ci(t)!=X)return!1;var n=On(t);if(n===null)return!0;var r=ln.call(n,"constructor")&&n.constructor;return typeof r=="function"&&r instanceof r&&hn.call(r)==wn}var Cf=vr?Wr(vr):Qi;function Df(t){return Of(t)&&t>=-M&&t<=M}var kf=pr?Wr(pr):Xi;function Lf(t){return typeof t=="string"||!cf(t)&&If(t)&&Ci(t)==it}function qf(t){return typeof t=="symbol"||If(t)&&Ci(t)==st}var Vf=wr?Wr(wr):ts;function Ff(t){return t===r}function Hf(t){return If(t)&&Yo(t)==ut}function Gf(t){return If(t)&&Ci(t)==at}var zf=Io(is),Bf=Io((function(t,n){return t<=n}));function Wf(t){if(!t)return[];if(hf(t))return Lf(t)?ve(t):eo(t);if(Nn&&t[Nn])return se(t[Nn]());var n=Yo(t),r=n==Z?oe:n==et?ce:Fh;return r(t)}function Kf(t){if(!t)return t===0?t:0;if(t=Yf(t),t===$||t===-$){var n=t<0?-1:1;return n*R}return t===t?t:0}function Jf(t){var n=Kf(t),r=n%1;return n===n?r?n-r:n:0}function Zf(t){return t?wi(Jf(t),0,D):0}function Yf(t){if(typeof t=="number")return t;if(qf(t))return C;if(jf(t)){var n=typeof t.valueOf=="function"?t.valueOf():t;t=jf(n)?n+"":n}if(typeof t!="string")return t===0?t:+t;t=Br(t);var r=Bt.test(t);return r||Kt.test(t)?rr(t.slice(2),r?2:8):zt.test(t)?C:+t}function Qf(t){return io(t,Sh(t))}function Xf(t){return t?wi(Jf(t),-M,M):t===0?t:0}function th(t){return t==null?"":$s(t)}var nh=ao((function(t,n){if(du(n)||hf(n)){io(n,Oh(n),t);return}for(var r in n)ln.call(n,r)&&ci(t,r,n[r])})),rh=ao((function(t,n){io(n,Sh(n),t)})),eh=ao((function(t,n,r,e){io(n,Sh(n),t,e)})),ih=ao((function(t,n,r,e){io(n,Oh(n),t,e)})),sh=ko(pi);function oh(t,n){var r=Se(t);return n==null?r:li(r,n)}var uh=_s((function(t,n){t=rn(t);var e=-1,i=n.length,s=i>2?n[2]:r;for(s&&uu(n[0],n[1],s)&&(i=1);++e<i;)for(var o=n[e],u=Sh(o),a=-1,c=u.length;++a<c;){var f=u[a],h=t[f];(h===r||sf(h,cn[f])&&!ln.call(t,f))&&(t[f]=o[f])}return t})),ah=_s((function(t){return t.push(r,$o),yr(Nh,r,t)}));function ch(t,n){return $r(t,Go(n,3),Ti)}function fh(t,n){return $r(t,Go(n,3),Ui)}function hh(t,n){return t==null?t:xi(t,Go(n,3),Sh)}function lh(t,n){return t==null?t:Pi(t,Go(n,3),Sh)}function dh(t,n){return t&&Ti(t,Go(n,3))}function vh(t,n){return t&&Ui(t,Go(n,3))}function ph(t){return t==null?[]:$i(t,Oh(t))}function wh(t){return t==null?[]:$i(t,Sh(t))}function yh(t,n,e){var i=t==null?r:Mi(t,n);return i===r?e:i}function bh(t,n){return t!=null&&tu(t,n,ki)}function mh(t,n){return t!=null&&tu(t,n,Li)}var _h=_o((function(t,n,r){n!=null&&typeof n.toString!="function"&&(n=pn.call(n)),t[n]=r}),Al(Tl)),gh=_o((function(t,n,r){n!=null&&typeof n.toString!="function"&&(n=pn.call(n)),ln.call(t,n)?t[n].push(r):t[n]=[r]}),Go),Eh=_s(Hi);function Oh(t){return hf(t)?ii(t):rs(t)}function Sh(t){return hf(t)?ii(t,!0):es(t)}function jh(t,n){var r={};return n=Go(n,3),Ti(t,(function(t,e,i){vi(r,n(t,e,i),t)})),r}function Ih(t,n){var r={};return n=Go(n,3),Ti(t,(function(t,e,i){vi(r,e,n(t,e,i))})),r}var Ah=ao((function(t,n,r){as(t,n,r)})),Nh=ao((function(t,n,r,e){as(t,n,r,e)})),xh=ko((function(t,n){var r={};if(t==null)return r;var e=!1;n=jr(n,(function(n){return n=Hs(n,t),e||(e=n.length>1),n})),io(t,qo(t),r),e&&(r=yi(r,h|l|d,Mo));for(var i=n.length;i--;)Rs(r,n[i]);return r}));function Ph(t,n){return Uh(t,Vc(Go(n)))}var Th=ko((function(t,n){return t==null?{}:ls(t,n)}));function Uh(t,n){if(t==null)return{};var r=jr(qo(t),(function(t){return[t]}));return n=Go(n),ds(t,r,(function(t,r){return n(t,r[0])}))}function $h(t,n,e){n=Hs(n,t);var i=-1,s=n.length;for(s||(s=1,t=r);++i<s;){var o=t==null?r:t[Tu(n[i])];o===r&&(i=s,o=e),t=Ef(o)?o.call(t):o}return t}function Mh(t,n,r){return t==null?t:Os(t,n,r)}function Rh(t,n,e,i){return i=typeof i=="function"?i:r,t==null?t:Os(t,n,e,i)}var Ch=Po(Oh),Dh=Po(Sh);function kh(t,n,r){var e=cf(t),i=e||vf(t)||Vf(t);if(n=Go(n,4),r==null){var s=t&&t.constructor;i?r=e?new s:[]:jf(t)?r=Ef(s)?Se(On(t)):{}:r={}}return(i?mr:Ti)(t,(function(t,e,i){return n(r,t,e,i)})),r}function Lh(t,n){return t==null?!0:Rs(t,n)}function qh(t,n,r){return t==null?t:Cs(t,n,Fs(r))}function Vh(t,n,e,i){return i=typeof i=="function"?i:r,t==null?t:Cs(t,n,Fs(e),i)}function Fh(t){return t==null?[]:Kr(t,Oh(t))}function Hh(t){return t==null?[]:Kr(t,Sh(t))}function Gh(t,n,e){return e===r&&(e=n,n=r),e!==r&&(e=Yf(e),e=e===e?e:0),n!==r&&(n=Yf(n),n=n===n?n:0),wi(Yf(t),n,e)}function zh(t,n,e){return n=Kf(n),e===r?(e=n,n=0):e=Kf(e),t=Yf(t),qi(t,n,e)}function Bh(t,n,e){if(e&&typeof e!="boolean"&&uu(t,n,e)&&(n=e=r),e===r&&(typeof n=="boolean"?(e=n,n=r):typeof t=="boolean"&&(e=t,t=r)),t===r&&n===r?(t=0,n=1):(t=Kf(t),n===r?(n=t,t=0):n=Kf(n)),t>n){var i=t;t=n,n=i}if(e||t%1||n%1){var s=Yn();return Gn(t+s*(n-t+nr("1e-"+((s+"").length-1))),n)}return ys(t,n)}var Wh=vo((function(t,n,r){return n=n.toLowerCase(),t+(r?Kh(n):n)}));function Kh(t){return gl(th(t).toLowerCase())}function Jh(t){return t=th(t),t&&t.replace(Zt,Xr).replace(Fn,"")}function Zh(t,n,e){t=th(t),n=$s(n);var i=t.length;e=e===r?i:wi(Jf(e),0,i);var s=e;return e-=n.length,e>=0&&t.slice(e,s)==n}function Yh(t){return t=th(t),t&&It.test(t)?t.replace(St,te):t}function Qh(t){return t=th(t),t&&Mt.test(t)?t.replace($t,"\\$&"):t}var Xh=vo((function(t,n,r){return t+(r?"-":"")+n.toLowerCase()})),tl=vo((function(t,n,r){return t+(r?" ":"")+n.toLowerCase()})),nl=lo("toLowerCase");function rl(t,n,r){t=th(t),n=Jf(n);var e=n?de(t):0;if(!n||e>=n)return t;var i=(n-e)/2;return Oo(Rn(i),r)+t+Oo(Mn(i),r)}function el(t,n,r){t=th(t),n=Jf(n);var e=n?de(t):0;return n&&e<n?t+Oo(n-e,r):t}function il(t,n,r){t=th(t),n=Jf(n);var e=n?de(t):0;return n&&e<n?Oo(n-e,r)+t:t}function sl(t,n,r){return r||n==null?n=0:n&&(n=+n),Bn(th(t).replace(Rt,""),n||0)}function ol(t,n,e){return(e?uu(t,n,e):n===r)?n=1:n=Jf(n),ms(th(t),n)}function ul(){var t=arguments,n=th(t[0]);return t.length<3?n:n.replace(t[1],t[2])}var al=vo((function(t,n,r){return t+(r?"_":"")+n.toLowerCase()}));function cl(t,n,e){return e&&typeof e!="number"&&uu(t,n,e)&&(n=e=r),e=e===r?D:e>>>0,e?(t=th(t),t&&(typeof n=="string"||n!=null&&!Cf(n))&&(n=$s(n),!n&&ee(t))?zs(ve(t),0,e):t.split(n,e)):[]}var fl=vo((function(t,n,r){return t+(r?" ":"")+gl(n)}));function hl(t,n,r){return t=th(t),r=r==null?0:wi(Jf(r),0,t.length),n=$s(n),t.slice(r,r+n.length)==n}function ll(t,n,e){var i=Oe.templateSettings;e&&uu(t,n,e)&&(n=r),t=th(t),n=eh({},n,i,Uo);var s=eh({},n.imports,i.imports,Uo),o=Oh(s),a=Kr(s,o),c,f,h=0,l=n.interpolate||Yt,d="__p += '",v=en((n.escape||Yt).source+"|"+l.source+"|"+(l===xt?Ht:Yt).source+"|"+(n.evaluate||Yt).source+"|$","g"),p="//# sourceURL="+(ln.call(n,"sourceURL")?(n.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Kn+"]")+`\n`;t.replace(v,(function(n,r,e,i,s,o){return e||(e=i),d+=t.slice(h,o).replace(Qt,ne),r&&(c=!0,d+=`' +\n__e(`+r+`) +\n'`),s&&(f=!0,d+=`';\n`+s+`;\n__p += '`),e&&(d+=`' +\n((__t = (`+e+`)) == null ? '' : __t) +\n'`),h=o+n.length,n})),d+=`';\n`;var w=ln.call(n,"variable")&&n.variable;if(!w)d=`with (obj) {\n`+d+`\n}\n`;else if(Vt.test(w))throw new Xt(u);d=(f?d.replace(_t,""):d).replace(gt,"$1").replace(Et,"$1;"),d="function("+(w||"obj")+`) {\n`+(w?"":`obj || (obj = {});\n`)+"var __t, __p = ''"+(c?", __e = _.escape":"")+(f?`, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n`:`;\n`)+d+`return __p\n}`;var y=Ol((function(){return tn(o,p+"return "+d).apply(r,a)}));if(y.source=d,_f(y))throw y;return y}function dl(t){return th(t).toLowerCase()}function vl(t){return th(t).toUpperCase()}function pl(t,n,e){if(t=th(t),t&&(e||n===r))return Br(t);if(!t||!(n=$s(n)))return t;var i=ve(t),s=ve(n),o=Zr(i,s),u=Yr(i,s)+1;return zs(i,o,u).join("")}function wl(t,n,e){if(t=th(t),t&&(e||n===r))return t.slice(0,pe(t)+1);if(!t||!(n=$s(n)))return t;var i=ve(t),s=Yr(i,ve(n))+1;return zs(i,0,s).join("")}function yl(t,n,e){if(t=th(t),t&&(e||n===r))return t.replace(Rt,"");if(!t||!(n=$s(n)))return t;var i=ve(t),s=Zr(i,ve(n));return zs(i,s).join("")}function bl(t,n){var e=I,i=A;if(jf(n)){var s="separator"in n?n.separator:s;e="length"in n?Jf(n.length):e,i="omission"in n?$s(n.omission):i}t=th(t);var o=t.length;if(ee(t)){var u=ve(t);o=u.length}if(e>=o)return t;var a=e-de(i);if(a<1)return i;var c=u?zs(u,0,a).join(""):t.slice(0,a);if(s===r)return c+i;if(u&&(a+=c.length-a),Cf(s)){if(t.slice(a).search(s)){var f,h=c;for(s.global||(s=en(s.source,th(Gt.exec(s))+"g")),s.lastIndex=0;f=s.exec(h);)var l=f.index;c=c.slice(0,l===r?a:l)}}else if(t.indexOf($s(s),a)!=a){var d=c.lastIndexOf(s);d>-1&&(c=c.slice(0,d))}return c+i}function ml(t){return t=th(t),t&&jt.test(t)?t.replace(Ot,we):t}var _l=vo((function(t,n,r){return t+(r?" ":"")+n.toUpperCase()})),gl=lo("toUpperCase");function El(t,n,e){return t=th(t),n=e?r:n,n===r?ie(t)?me(t):Ur(t):t.match(n)||[]}var Ol=_s((function(t,n){try{return yr(t,r,n)}catch(t){return _f(t)?t:new Xt(t)}})),Sl=ko((function(t,n){return mr(n,(function(n){n=Tu(n),vi(t,n,Uc(t[n],t))})),t}));function jl(t){var n=t==null?0:t.length,r=Go();return t=n?jr(t,(function(t){if(typeof t[1]!="function")throw new on(o);return[r(t[0]),t[1]]})):[],_s((function(r){for(var e=-1;++e<n;){var i=t[e];if(yr(i[0],this,r))return yr(i[1],this,r)}}))}function Il(t){return bi(yi(t,h))}function Al(t){return function(){return t}}function Nl(t,n){return t==null||t!==t?n:t}var xl=bo(),Pl=bo(!0);function Tl(t){return t}function Ul(t){return ns(typeof t=="function"?t:yi(t,h))}function $l(t){return os(yi(t,h))}function Ml(t,n){return us(t,yi(n,h))}var Rl=_s((function(t,n){return function(r){return Hi(r,t,n)}})),Cl=_s((function(t,n){return function(r){return Hi(t,r,n)}}));function Dl(t,n,r){var e=Oh(n),i=$i(n,e);r==null&&!(jf(n)&&(i.length||!e.length))&&(r=n,n=t,t=this,i=$i(n,Oh(n)));var s=!(jf(r)&&"chain"in r)||!!r.chain,o=Ef(t);return mr(i,(function(r){var e=n[r];t[r]=e,o&&(t.prototype[r]=function(){var n=this.__chain__;if(s||n){var r=t(this.__wrapped__),i=r.__actions__=eo(this.__actions__);return i.push({func:e,args:arguments,thisArg:t}),r.__chain__=n,r}return e.apply(t,Ir([this.value()],arguments))})})),t}function kl(){return sr._===this&&(sr._=yn),this}function Ll(){}function ql(t){return t=Jf(t),_s((function(n){return fs(n,t)}))}var Vl=Eo(jr),Fl=Eo(gr),Hl=Eo(xr);function Gl(t){return au(t)?Lr(Tu(t)):vs(t)}function zl(t){return function(n){return t==null?r:Mi(t,n)}}var Bl=jo(),Wl=jo(!0);function Kl(){return[]}function Jl(){return!1}function Zl(){return{}}function Yl(){return""}function Ql(){return!0}function Xl(t,n){if(t=Jf(t),t<1||t>M)return[];var r=D,e=Gn(t,D);n=Go(n),t-=D;for(var i=Gr(e,n);++r<t;)n(r);return i}function td(t){return cf(t)?jr(t,Tu):qf(t)?[t]:eo(Pu(th(t)))}function nd(t){var n=++dn;return th(t)+n}var rd=go((function(t,n){return t+n}),0),ed=No("ceil"),id=go((function(t,n){return t/n}),1),sd=No("floor");function od(t){return t&&t.length?ji(t,Tl,Di):r}function ud(t,n){return t&&t.length?ji(t,Go(n,2),Di):r}function ad(t){return kr(t,Tl)}function cd(t,n){return kr(t,Go(n,2))}function fd(t){return t&&t.length?ji(t,Tl,is):r}function hd(t,n){return t&&t.length?ji(t,Go(n,2),is):r}var ld=go((function(t,n){return t*n}),1),dd=No("round"),vd=go((function(t,n){return t-n}),0);function pd(t){return t&&t.length?Hr(t,Tl):0}function wd(t,n){return t&&t.length?Hr(t,Go(n,2)):0}return Oe.after=xc,Oe.ary=Pc,Oe.assign=nh,Oe.assignIn=rh,Oe.assignInWith=eh,Oe.assignWith=ih,Oe.at=sh,Oe.before=Tc,Oe.bind=Uc,Oe.bindAll=Sl,Oe.bindKey=$c,Oe.castArray=Qc,Oe.chain=za,Oe.chunk=Ru,Oe.compact=Cu,Oe.concat=Du,Oe.cond=jl,Oe.conforms=Il,Oe.constant=Al,Oe.countBy=rc,Oe.create=oh,Oe.curry=Mc,Oe.curryRight=Rc,Oe.debounce=Cc,Oe.defaults=uh,Oe.defaultsDeep=ah,Oe.defer=Dc,Oe.delay=kc,Oe.difference=ku,Oe.differenceBy=Lu,Oe.differenceWith=qu,Oe.drop=Vu,Oe.dropRight=Fu,Oe.dropRightWhile=Hu,Oe.dropWhile=Gu,Oe.fill=zu,Oe.filter=ic,Oe.flatMap=uc,Oe.flatMapDeep=ac,Oe.flatMapDepth=cc,Oe.flatten=Ku,Oe.flattenDeep=Ju,Oe.flattenDepth=Zu,Oe.flip=Lc,Oe.flow=xl,Oe.flowRight=Pl,Oe.fromPairs=Yu,Oe.functions=ph,Oe.functionsIn=wh,Oe.groupBy=lc,Oe.initial=ta,Oe.intersection=na,Oe.intersectionBy=ra,Oe.intersectionWith=ea,Oe.invert=_h,Oe.invertBy=gh,Oe.invokeMap=vc,Oe.iteratee=Ul,Oe.keyBy=pc,Oe.keys=Oh,Oe.keysIn=Sh,Oe.map=wc,Oe.mapKeys=jh,Oe.mapValues=Ih,Oe.matches=$l,Oe.matchesProperty=Ml,Oe.memoize=qc,Oe.merge=Ah,Oe.mergeWith=Nh,Oe.method=Rl,Oe.methodOf=Cl,Oe.mixin=Dl,Oe.negate=Vc,Oe.nthArg=ql,Oe.omit=xh,Oe.omitBy=Ph,Oe.once=Fc,Oe.orderBy=yc,Oe.over=Vl,Oe.overArgs=Hc,Oe.overEvery=Fl,Oe.overSome=Hl,Oe.partial=Gc,Oe.partialRight=zc,Oe.partition=bc,Oe.pick=Th,Oe.pickBy=Uh,Oe.property=Gl,Oe.propertyOf=zl,Oe.pull=aa,Oe.pullAll=ca,Oe.pullAllBy=fa,Oe.pullAllWith=ha,Oe.pullAt=la,Oe.range=Bl,Oe.rangeRight=Wl,Oe.rearg=Bc,Oe.reject=gc,Oe.remove=da,Oe.rest=Wc,Oe.reverse=va,Oe.sampleSize=Oc,Oe.set=Mh,Oe.setWith=Rh,Oe.shuffle=Sc,Oe.slice=pa,Oe.sortBy=Ac,Oe.sortedUniq=Ea,Oe.sortedUniqBy=Oa,Oe.split=cl,Oe.spread=Kc,Oe.tail=Sa,Oe.take=ja,Oe.takeRight=Ia,Oe.takeRightWhile=Aa,Oe.takeWhile=Na,Oe.tap=Ba,Oe.throttle=Jc,Oe.thru=Wa,Oe.toArray=Wf,Oe.toPairs=Ch,Oe.toPairsIn=Dh,Oe.toPath=td,Oe.toPlainObject=Qf,Oe.transform=kh,Oe.unary=Zc,Oe.union=xa,Oe.unionBy=Pa,Oe.unionWith=Ta,Oe.uniq=Ua,Oe.uniqBy=$a,Oe.uniqWith=Ma,Oe.unset=Lh,Oe.unzip=Ra,Oe.unzipWith=Ca,Oe.update=qh,Oe.updateWith=Vh,Oe.values=Fh,Oe.valuesIn=Hh,Oe.without=Da,Oe.words=El,Oe.wrap=Yc,Oe.xor=ka,Oe.xorBy=La,Oe.xorWith=qa,Oe.zip=Va,Oe.zipObject=Fa,Oe.zipObjectDeep=Ha,Oe.zipWith=Ga,Oe.entries=Ch,Oe.entriesIn=Dh,Oe.extend=rh,Oe.extendWith=eh,Dl(Oe,Oe),Oe.add=rd,Oe.attempt=Ol,Oe.camelCase=Wh,Oe.capitalize=Kh,Oe.ceil=ed,Oe.clamp=Gh,Oe.clone=Xc,Oe.cloneDeep=nf,Oe.cloneDeepWith=rf,Oe.cloneWith=tf,Oe.conformsTo=ef,Oe.deburr=Jh,Oe.defaultTo=Nl,Oe.divide=id,Oe.endsWith=Zh,Oe.eq=sf,Oe.escape=Yh,Oe.escapeRegExp=Qh,Oe.every=ec,Oe.find=sc,Oe.findIndex=Bu,Oe.findKey=ch,Oe.findLast=oc,Oe.findLastIndex=Wu,Oe.findLastKey=fh,Oe.floor=sd,Oe.forEach=fc,Oe.forEachRight=hc,Oe.forIn=hh,Oe.forInRight=lh,Oe.forOwn=dh,Oe.forOwnRight=vh,Oe.get=yh,Oe.gt=of,Oe.gte=uf,Oe.has=bh,Oe.hasIn=mh,Oe.head=Qu,Oe.identity=Tl,Oe.includes=dc,Oe.indexOf=Xu,Oe.inRange=zh,Oe.invoke=Eh,Oe.isArguments=af,Oe.isArray=cf,Oe.isArrayBuffer=ff,Oe.isArrayLike=hf,Oe.isArrayLikeObject=lf,Oe.isBoolean=df,Oe.isBuffer=vf,Oe.isDate=pf,Oe.isElement=wf,Oe.isEmpty=yf,Oe.isEqual=bf,Oe.isEqualWith=mf,Oe.isError=_f,Oe.isFinite=gf,Oe.isFunction=Ef,Oe.isInteger=Of,Oe.isLength=Sf,Oe.isMap=Af,Oe.isMatch=Nf,Oe.isMatchWith=xf,Oe.isNaN=Pf,Oe.isNative=Tf,Oe.isNil=$f,Oe.isNull=Uf,Oe.isNumber=Mf,Oe.isObject=jf,Oe.isObjectLike=If,Oe.isPlainObject=Rf,Oe.isRegExp=Cf,Oe.isSafeInteger=Df,Oe.isSet=kf,Oe.isString=Lf,Oe.isSymbol=qf,Oe.isTypedArray=Vf,Oe.isUndefined=Ff,Oe.isWeakMap=Hf,Oe.isWeakSet=Gf,Oe.join=ia,Oe.kebabCase=Xh,Oe.last=sa,Oe.lastIndexOf=oa,Oe.lowerCase=tl,Oe.lowerFirst=nl,Oe.lt=zf,Oe.lte=Bf,Oe.max=od,Oe.maxBy=ud,Oe.mean=ad,Oe.meanBy=cd,Oe.min=fd,Oe.minBy=hd,Oe.stubArray=Kl,Oe.stubFalse=Jl,Oe.stubObject=Zl,Oe.stubString=Yl,Oe.stubTrue=Ql,Oe.multiply=ld,Oe.nth=ua,Oe.noConflict=kl,Oe.noop=Ll,Oe.now=Nc,Oe.pad=rl,Oe.padEnd=el,Oe.padStart=il,Oe.parseInt=sl,Oe.random=Bh,Oe.reduce=mc,Oe.reduceRight=_c,Oe.repeat=ol,Oe.replace=ul,Oe.result=$h,Oe.round=dd,Oe.runInContext=t,Oe.sample=Ec,Oe.size=jc,Oe.snakeCase=al,Oe.some=Ic,Oe.sortedIndex=wa,Oe.sortedIndexBy=ya,Oe.sortedIndexOf=ba,Oe.sortedLastIndex=ma,Oe.sortedLastIndexBy=_a,Oe.sortedLastIndexOf=ga,Oe.startCase=fl,Oe.startsWith=hl,Oe.subtract=vd,Oe.sum=pd,Oe.sumBy=wd,Oe.template=ll,Oe.times=Xl,Oe.toFinite=Kf,Oe.toInteger=Jf,Oe.toLength=Zf,Oe.toLower=dl,Oe.toNumber=Yf,Oe.toSafeInteger=Xf,Oe.toString=th,Oe.toUpper=vl,Oe.trim=pl,Oe.trimEnd=wl,Oe.trimStart=yl,Oe.truncate=bl,Oe.unescape=ml,Oe.uniqueId=nd,Oe.upperCase=_l,Oe.upperFirst=gl,Oe.each=fc,Oe.eachRight=hc,Oe.first=Qu,Dl(Oe,function(){var t={};return Ti(Oe,(function(n,r){ln.call(Oe.prototype,r)||(t[r]=n)})),t}(),{chain:!1}),Oe.VERSION=e,mr(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){Oe[t].placeholder=Oe})),mr(["drop","take"],(function(t,n){Ae.prototype[t]=function(e){e=e===r?1:Hn(Jf(e),0);var i=this.__filtered__&&!n?new Ae(this):this.clone();return i.__filtered__?i.__takeCount__=Gn(e,i.__takeCount__):i.__views__.push({size:Gn(e,D),type:t+(i.__dir__<0?"Right":"")}),i},Ae.prototype[t+"Right"]=function(n){return this.reverse()[t](n).reverse()}})),mr(["filter","map","takeWhile"],(function(t,n){var r=n+1,e=r==P||r==U;Ae.prototype[t]=function(t){var n=this.clone();return n.__iteratees__.push({iteratee:Go(t,3),type:r}),n.__filtered__=n.__filtered__||e,n}})),mr(["head","last"],(function(t,n){var r="take"+(n?"Right":"");Ae.prototype[t]=function(){return this[r](1).value()[0]}})),mr(["initial","tail"],(function(t,n){var r="drop"+(n?"":"Right");Ae.prototype[t]=function(){return this.__filtered__?new Ae(this):this[r](1)}})),Ae.prototype.compact=function(){return this.filter(Tl)},Ae.prototype.find=function(t){return this.filter(t).head()},Ae.prototype.findLast=function(t){return this.reverse().find(t)},Ae.prototype.invokeMap=_s((function(t,n){return typeof t=="function"?new Ae(this):this.map((function(r){return Hi(r,t,n)}))})),Ae.prototype.reject=function(t){return this.filter(Vc(Go(t)))},Ae.prototype.slice=function(t,n){t=Jf(t);var e=this;return e.__filtered__&&(t>0||n<0)?new Ae(e):(t<0?e=e.takeRight(-t):t&&(e=e.drop(t)),n!==r&&(n=Jf(n),e=n<0?e.dropRight(-n):e.take(n-t)),e)},Ae.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Ae.prototype.toArray=function(){return this.take(D)},Ti(Ae.prototype,(function(t,n){var e=/^(?:filter|find|map|reject)|While$/.test(n),i=/^(?:head|last)$/.test(n),s=Oe[i?"take"+(n=="last"?"Right":""):n],o=i||/^find/.test(n);s&&(Oe.prototype[n]=function(){var n=this.__wrapped__,u=i?[1]:arguments,a=n instanceof Ae,c=u[0],f=a||cf(n),h=function(t){var n=s.apply(Oe,Ir([t],u));return i&&l?n[0]:n};f&&e&&typeof c=="function"&&c.length!=1&&(a=f=!1);var l=this.__chain__,d=!!this.__actions__.length,v=o&&!l,p=a&&!d;if(!o&&f){n=p?n:new Ae(this);var w=t.apply(n,u);return w.__actions__.push({func:Wa,args:[h],thisArg:r}),new Ie(w,l)}return v&&p?t.apply(this,u):(w=this.thru(h),v?i?w.value()[0]:w.value():w)})})),mr(["pop","push","shift","sort","splice","unshift"],(function(t){var n=un[t],r=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",e=/^(?:pop|shift)$/.test(t);Oe.prototype[t]=function(){var t=arguments;if(e&&!this.__chain__){var i=this.value();return n.apply(cf(i)?i:[],t)}return this[r]((function(r){return n.apply(cf(r)?r:[],t)}))}})),Ti(Ae.prototype,(function(t,n){var r=Oe[n];if(r){var e=r.name+"";ln.call(fr,e)||(fr[e]=[]),fr[e].push({name:n,func:r})}})),fr[mo(r,y).name]=[{name:"wrapper",func:r}],Ae.prototype.clone=Ne,Ae.prototype.reverse=xe,Ae.prototype.value=Pe,Oe.prototype.at=Ka,Oe.prototype.chain=Ja,Oe.prototype.commit=Za,Oe.prototype.next=Ya,Oe.prototype.plant=Xa,Oe.prototype.reverse=tc,Oe.prototype.toJSON=Oe.prototype.valueOf=Oe.prototype.value=nc,Oe.prototype.first=Oe.prototype.head,Nn&&(Oe.prototype[Nn]=Qa),Oe},ge=_e();ur?((ur.exports=ge)._=ge,or._=ge):sr._=ge}).call(xd)})(Pd,Pd.exports);var Td=Object.defineProperty,Ud=Object.defineProperties,$d=Object.getOwnPropertyDescriptors,Md=Object.getOwnPropertySymbols,Rd=Object.prototype.hasOwnProperty,Cd=Object.prototype.propertyIsEnumerable,Dd=(t,n,r)=>n in t?Td(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,kd=(t,n)=>{for(var r in n||(n={}))Rd.call(n,r)&&Dd(t,r,n[r]);if(Md)for(var r of Md(n))Cd.call(n,r)&&Dd(t,r,n[r]);return t},Ld=(t,n)=>Ud(t,$d(n));function qd(t,n,r){let e;const i=Vd(t);return n.rpcMap&&(e=n.rpcMap[i]),e||(e=`${Ad}?chainId=eip155:${i}&projectId=${r}`),e}function Vd(t){return t.includes("eip155")?Number(t.split(":")[1]):Number(t)}function Fd(t,n){if(!n.includes(t))throw new Error(`Chain '${t}' not approved. Please use one of the following: ${n.toString()}`)}function Hd(t){return t.map((t=>`${t.split(":")[0]}:${t.split(":")[1]}`))}function Gd(t,n){const r=Object.keys(n.namespaces).filter((n=>n.includes(t)));if(!r.length)return[];const e=[];return r.forEach((t=>{const r=n.namespaces[t].accounts;e.push(...r)})),e}function zd(t,n={}){const r=Bd(t),e=Bd(n);return Pd.exports.merge(r,e)}function Bd(t){var n,r,e,i;const s={};if(!fd(t))return s;for(const[o,u]of Object.entries(t)){const t=sd(o)?[o]:u.chains,a=u.methods||[],c=u.events||[],f=u.rpcMap||{},h=od(o);s[h]=Ld(kd(kd({},s[h]),u),{chains:id(t,(n=s[h])==null?void 0:n.chains),methods:id(a,(r=s[h])==null?void 0:r.methods),events:id(c,(e=s[h])==null?void 0:e.events),rpcMap:kd(kd({},f),(i=s[h])==null?void 0:i.rpcMap)})}return s}const Wd=(t,n)=>{const r=e=>{e.request!==n.request||e.topic!==n.topic||(t.events.removeListener("session_request_sent",r),Kd(n))};t.on("session_request_sent",r)};function Kd(t){if(typeof window<"u")try{const n=window.localStorage.getItem("WALLETCONNECT_DEEPLINK_CHOICE");if(n){const r=JSON.parse(n),e=r?.href;if(typeof e=="string"){e.endsWith("/")&&e.slice(0,-1);const n=`${e}/wc?requestId=${t.id}&sessionTopic=${t.topic}`;window.open(n,"_self","noreferrer noopener")}}}catch(t){console.error(t)}}class Jd{constructor(t){this.name="polkadot",this.namespace=t.namespace,this.events=t.events,this.client=t.client,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?(Wd(this.client,t),this.client.request(t)):this.getHttpProvider().request(t.request)}setDefaultChain(t,n){if(this.chainId=t,!this.httpProviders[t]){const r=n||qd(`${this.name}:${t}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,r)}this.events.emit(Nd.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const t=this.namespace.accounts;return t?t.filter((t=>t.split(":")[1]===this.chainId.toString())).map((t=>t.split(":")[2]))||[]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach((n=>{var r;t[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])})),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,n=this.httpProviders[t];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return n}setHttpProvider(t,n){const r=this.createHttpProvider(t,n);r&&(this.httpProviders[t]=r)}createHttpProvider(t,n){const r=n||qd(t,this.namespace);return typeof r>"u"?void 0:new Va(new gd(r))}}class Zd{constructor(t){this.name="eip155",this.namespace=t.namespace,this.client=t.client,this.events=t.events,this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(t){var n;switch(t.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return this.handleSwitchChain(t.request.params?(n=t.request.params[0])==null?void 0:n.chainId:"0x0"),null;case"eth_chainId":return parseInt(this.getDefaultChain())}return this.namespace.methods.includes(t.request.method)?(Wd(this.client,t),await this.client.request(t)):this.getHttpProvider().request(t.request)}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}setDefaultChain(t,n){const r=Vd(t);if(!this.httpProviders[r]){const t=n||qd(`${this.name}:${r}`,this.namespace,this.client.core.projectId);if(!t)throw new Error(`No RPC url provided for chainId: ${r}`);this.setHttpProvider(r,t)}this.chainId=r,this.events.emit(Nd.DEFAULT_CHAIN_CHANGED,`${this.name}:${r}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}createHttpProvider(t,n){const r=n||qd(`${this.name}:${t}`,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new Va(new gd(r))}setHttpProvider(t,n){const r=this.createHttpProvider(t,n);r&&(this.httpProviders[t]=r)}createHttpProviders(){const t={};return this.namespace.chains.forEach((n=>{var r;const e=Vd(n);t[e]=this.createHttpProvider(e,(r=this.namespace.rpcMap)==null?void 0:r[n])})),t}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter((t=>t.split(":")[1]===this.chainId.toString())).map((t=>t.split(":")[2])))]:[]}getHttpProvider(){const t=this.chainId,n=this.httpProviders[t];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return n}handleSwitchChain(t){const n=parseInt(t,16),r=`${this.name}:${n}`;Fd(r,this.namespace.chains),this.setDefaultChain(`${n}`)}}class Yd{constructor(t){this.name="solana",this.namespace=t.namespace,this.events=t.events,this.client=t.client,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?(Wd(this.client,t),this.client.request(t)):this.getHttpProvider().request(t.request)}setDefaultChain(t,n){if(!this.httpProviders[t]){const r=n||qd(`${this.name}:${t}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,r)}this.chainId=t,this.events.emit(Nd.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter((t=>t.split(":")[1]===this.chainId.toString())).map((t=>t.split(":")[2])))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach((n=>{var r;t[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])})),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,n=this.httpProviders[t];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return n}setHttpProvider(t,n){const r=this.createHttpProvider(t,n);r&&(this.httpProviders[t]=r)}createHttpProvider(t,n){const r=n||qd(t,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new Va(new gd(r))}}class Qd{constructor(t){this.name="cosmos",this.namespace=t.namespace,this.events=t.events,this.client=t.client,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?(Wd(this.client,t),this.client.request(t)):this.getHttpProvider().request(t.request)}setDefaultChain(t,n){if(this.chainId=t,!this.httpProviders[t]){const r=n||qd(`${this.name}:${t}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,r)}this.events.emit(Nd.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter((t=>t.split(":")[1]===this.chainId.toString())).map((t=>t.split(":")[2])))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach((n=>{var r;t[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])})),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,n=this.httpProviders[t];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return n}setHttpProvider(t,n){const r=this.createHttpProvider(t,n);r&&(this.httpProviders[t]=r)}createHttpProvider(t,n){const r=n||qd(t,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new Va(new gd(r))}}class Xd{constructor(t){this.name="cip34",this.namespace=t.namespace,this.events=t.events,this.client=t.client,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?(Wd(this.client,t),this.client.request(t)):this.getHttpProvider().request(t.request)}setDefaultChain(t,n){if(this.chainId=t,!this.httpProviders[t]){const r=n||this.getCardanoRPCUrl(t);if(!r)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,r)}this.events.emit(Nd.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter((t=>t.split(":")[1]===this.chainId.toString())).map((t=>t.split(":")[2])))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach((n=>{const r=this.getCardanoRPCUrl(n);t[n]=this.createHttpProvider(n,r)})),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,n=this.httpProviders[t];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return n}getCardanoRPCUrl(t){const n=this.namespace.rpcMap;if(n)return n[t]}setHttpProvider(t,n){const r=this.createHttpProvider(t,n);r&&(this.httpProviders[t]=r)}createHttpProvider(t,n){const r=n||this.getCardanoRPCUrl(t);return typeof r>"u"?void 0:new Va(new gd(r))}}class tv{constructor(t){this.name="elrond",this.namespace=t.namespace,this.events=t.events,this.client=t.client,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?(Wd(this.client,t),this.client.request(t)):this.getHttpProvider().request(t.request)}setDefaultChain(t,n){if(!this.httpProviders[t]){const r=n||qd(`${this.name}:${t}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,r)}this.chainId=t,this.events.emit(Nd.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter((t=>t.split(":")[1]===this.chainId.toString())).map((t=>t.split(":")[2])))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach((n=>{var r;t[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])})),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,n=this.httpProviders[t];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return n}setHttpProvider(t,n){const r=this.createHttpProvider(t,n);r&&(this.httpProviders[t]=r)}createHttpProvider(t,n){const r=n||qd(t,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new Va(new gd(r))}}class nv{constructor(t){this.name="multiversx",this.namespace=t.namespace,this.events=t.events,this.client=t.client,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?(Wd(this.client,t),this.client.request(t)):this.getHttpProvider().request(t.request)}setDefaultChain(t,n){if(!this.httpProviders[t]){const r=n||qd(`${this.name}:${t}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,r)}this.chainId=t,this.events.emit(Nd.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter((t=>t.split(":")[1]===this.chainId.toString())).map((t=>t.split(":")[2])))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach((n=>{var r;t[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])})),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,n=this.httpProviders[t];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return n}setHttpProvider(t,n){const r=this.createHttpProvider(t,n);r&&(this.httpProviders[t]=r)}createHttpProvider(t,n){const r=n||qd(t,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new Va(new gd(r))}}var rv=Object.defineProperty,ev=Object.defineProperties,iv=Object.getOwnPropertyDescriptors,sv=Object.getOwnPropertySymbols,ov=Object.prototype.hasOwnProperty,uv=Object.prototype.propertyIsEnumerable,av=(t,n,r)=>n in t?rv(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,cv=(t,n)=>{for(var r in n||(n={}))ov.call(n,r)&&av(t,r,n[r]);if(sv)for(var r of sv(n))uv.call(n,r)&&av(t,r,n[r]);return t},fv=(t,n)=>ev(t,iv(n));class hv{constructor(t){this.events=new v,this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.providerOpts=t,this.logger=typeof t?.logger<"u"&&typeof t?.logger!="string"?t.logger:Ir.pino(Ir.getDefaultLoggerOptions({level:t?.logger||Ed}))}static async init(t){const n=new hv(t);return await n.initialize(),n}async request(t,n){const[r,e]=this.validateChain(n);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(r).request({request:cv({},t),chainId:`${r}:${e}`,topic:this.session.topic})}sendAsync(t,n,r){this.request(t,r).then((t=>n(null,t))).catch((t=>n(t,void 0)))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var t;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(t=this.session)==null?void 0:t.topic,reason:ad("USER_DISCONNECTED")}),await this.cleanup()}async connect(t){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(t),await this.cleanupPendingPairings(),!t.skipPairing)return await this.pair(t.pairingTopic)}on(t,n){this.events.on(t,n)}once(t,n){this.events.once(t,n)}removeListener(t,n){this.events.removeListener(t,n)}off(t,n){this.events.off(t,n)}get isWalletConnect(){return!0}async pair(t){this.shouldAbortPairingAttempt=!1;let n=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(n>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:r,approval:e}=await this.client.connect({pairingTopic:t,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});r&&(this.uri=r,this.events.emit("display_uri",r)),await e().then((t=>{this.session=t})).catch((t=>{if(t.message!==El)throw t;n++}))}while(!this.session);return this.onConnect(),this.session}setDefaultChain(t,n){try{const[r,e]=this.validateChain(t);this.getProvider(r).setDefaultChain(e,n)}catch(t){if(!/Please call connect/.test(t.message))throw t}}async cleanupPendingPairings(t={}){this.logger.info("Cleaning up inactive pairings...");const n=this.client.pairing.getAll();if(cd(n)){for(const r of n)t.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${n.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const t=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[t]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await Hl.init({logger:this.providerOpts.logger||Ed,relayUrl:this.providerOpts.relayUrl||Od,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,name:this.providerOpts.name}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");[...new Set(Object.keys(this.session.namespaces).map((t=>od(t))))].forEach((t=>{if(!this.session)return;const n=Gd(t,this.session),r=Hd(n),e=zd(this.namespaces,this.optionalNamespaces),i=fv(cv({},e[t]),{accounts:n,chains:r});switch(t){case"eip155":this.rpcProviders[t]=new Zd({client:this.client,namespace:i,events:this.events});break;case"solana":this.rpcProviders[t]=new Yd({client:this.client,namespace:i,events:this.events});break;case"cosmos":this.rpcProviders[t]=new Qd({client:this.client,namespace:i,events:this.events});break;case"polkadot":this.rpcProviders[t]=new Jd({client:this.client,namespace:i,events:this.events});break;case"cip34":this.rpcProviders[t]=new Xd({client:this.client,namespace:i,events:this.events});break;case"elrond":this.rpcProviders[t]=new tv({client:this.client,namespace:i,events:this.events});break;case"multiversx":this.rpcProviders[t]=new nv({client:this.client,namespace:i,events:this.events});break}}))}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",(t=>{this.events.emit("session_ping",t)})),this.client.on("session_event",(t=>{const{params:n}=t,{event:r}=n;r.name==="accountsChanged"?this.events.emit("accountsChanged",r.data):r.name==="chainChanged"?this.onChainChanged(n.chainId):this.events.emit(r.name,r.data),this.events.emit("session_event",t)})),this.client.on("session_update",(({topic:t,params:n})=>{var r;const{namespaces:e}=n,i=(r=this.client)==null?void 0:r.session.get(t);this.session=fv(cv({},i),{namespaces:e}),this.onSessionUpdate(),this.events.emit("session_update",{topic:t,params:n})})),this.client.on("session_delete",(async t=>{await this.cleanup(),this.events.emit("session_delete",t),this.events.emit("disconnect",fv(cv({},ad("USER_DISCONNECTED")),{data:t.topic}))})),this.on(Nd.DEFAULT_CHAIN_CHANGED,(t=>{this.onChainChanged(t,!0)}))}getProvider(t){if(!this.rpcProviders[t])throw new Error(`Provider not found: ${t}`);return this.rpcProviders[t]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach((t=>{var n;this.getProvider(t).updateNamespace((n=this.session)==null?void 0:n.namespaces[t])}))}setNamespaces(t){const{namespaces:n,optionalNamespaces:r,sessionProperties:e}=t;if(!n||!Object.keys(n).length)throw new Error("Namespaces must be not empty");this.namespaces=n,this.optionalNamespaces=r,this.sessionProperties=e,this.persist("namespaces",n),this.persist("optionalNamespaces",r)}validateChain(t){const[n,r]=t?.split(":")||["",""];if(n&&!Object.keys(this.namespaces).map((t=>od(t))).includes(n))throw new Error(`Namespace '${n}' is not configured. Please call connect() first with namespace config.`);if(n&&r)return[n,r];const e=od(Object.keys(this.namespaces)[0]),i=this.rpcProviders[e].getDefaultChain();return[e,i]}async requestAccounts(){const[t]=this.validateChain();return await this.getProvider(t).requestAccounts()}onChainChanged(t,n=!1){var r;const[e,i]=this.validateChain(t);n||this.getProvider(e).setDefaultChain(i),((r=this.namespaces[e])!=null?r:this.namespaces[`${e}:${i}`]).defaultChain=i,this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",i)}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0})}persist(t,n){this.client.core.storage.setItem(`${Id}/${t}`,n)}async getFromStore(t){return await this.client.core.storage.getItem(`${Id}/${t}`)}}const lv={1:"https://ethereum.publicnode.com",5:"https://eth-goerli.g.alchemy.com/v2/yVhq9zPJorAWsw-F87fEabSUl7cCU6z4",11155111:"https://sepolia.infura.io/v3/9f79b2f9274344af90b8d4e244b580ef",137:"https://polygon-rpc.com/",80001:"https://polygon-mumbai.g.alchemy.com/v2/rVI6pOV4irVsrw20cJxc1fxK_1cSeiY0",56:"https://bsc-dataseed.binance.org/",97:"https://data-seed-prebsc-1-s1.binance.org:8545",43114:"https://api.avax.network/ext/bc/C/rpc",43113:"https://api.avax-test.network/ext/bc/C/rpc",250:"https://rpc.fantom.network/",25:"https://evm-cronos.crypto.org",338:"https://evm-t3.cronos.org",42161:"https://arb1.arbitrum.io/rpc",421613:"https://arb-goerli.g.alchemy.com/v2/nFrflomLgsQQL5NWjGileAVqIGGxZWce",10:"https://mainnet.optimism.io"};const dv=["eip155:1","eip155:137","eip155:250","eip155:25","eip155:42161","eip155:10"];const vv=async()=>await hv.init({projectId:"2ec7ead81da1226703ad789c0b2f7b30",logger:"debug",relayUrl:"wss://relay.walletconnect.com"});export{lv as WC_DEFAULT_RPC_MAP,dv as WC_V2_DEFAULT_CHAINS,vv as getWalletConnectV2ProviderInstance};
//# sourceMappingURL=p-1416814e.js.map