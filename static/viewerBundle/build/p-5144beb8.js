import{d as t,p as e,c as n,g as i}from"./p-bda0c6c7.js";import{e as s}from"./p-1d75f834.js";import{e as r}from"./p-404a2ccb.js";import{r as o,W as a}from"./p-2eb1ef77.js";import{s as u,a as c}from"./p-582e7fbd.js";import"./p-ea15b96e.js";var h={};var l={};var f={};Object.defineProperty(f,"__esModule",{value:true});f.walletLogo=void 0;const d=(t,e)=>{let n;switch(t){case"standard":n=e;return`data:image/svg+xml,%3Csvg width='${e}' height='${n}' viewBox='0 0 1024 1024' fill='none' xmlns='http://www.w3.org/2000/svg'%3E %3Crect width='1024' height='1024' fill='%230052FF'/%3E %3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M152 512C152 710.823 313.177 872 512 872C710.823 872 872 710.823 872 512C872 313.177 710.823 152 512 152C313.177 152 152 313.177 152 512ZM420 396C406.745 396 396 406.745 396 420V604C396 617.255 406.745 628 420 628H604C617.255 628 628 617.255 628 604V420C628 406.745 617.255 396 604 396H420Z' fill='white'/%3E %3C/svg%3E `;case"circle":n=e;return`data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='${e}' height='${n}' viewBox='0 0 999.81 999.81'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%230052fe;%7D.cls-2%7Bfill:%23fefefe;%7D.cls-3%7Bfill:%230152fe;%7D%3C/style%3E%3C/defs%3E%3Cpath class='cls-1' d='M655-115.9h56c.83,1.59,2.36.88,3.56,1a478,478,0,0,1,75.06,10.42C891.4-81.76,978.33-32.58,1049.19,44q116.7,126,131.94,297.61c.38,4.14-.34,8.53,1.78,12.45v59c-1.58.84-.91,2.35-1,3.56a482.05,482.05,0,0,1-10.38,74.05c-24,106.72-76.64,196.76-158.83,268.93s-178.18,112.82-287.2,122.6c-4.83.43-9.86-.25-14.51,1.77H654c-1-1.68-2.69-.91-4.06-1a496.89,496.89,0,0,1-105.9-18.59c-93.54-27.42-172.78-77.59-236.91-150.94Q199.34,590.1,184.87,426.58c-.47-5.19.25-10.56-1.77-15.59V355c1.68-1,.91-2.7,1-4.06a498.12,498.12,0,0,1,18.58-105.9c26-88.75,72.64-164.9,140.6-227.57q126-116.27,297.21-131.61C645.32-114.57,650.35-113.88,655-115.9Zm377.92,500c0-192.44-156.31-349.49-347.56-350.15-194.13-.68-350.94,155.13-352.29,347.42-1.37,194.55,155.51,352.1,348.56,352.47C876.15,734.23,1032.93,577.84,1032.93,384.11Z' transform='translate(-183.1 115.9)'/%3E%3Cpath class='cls-2' d='M1032.93,384.11c0,193.73-156.78,350.12-351.29,349.74-193-.37-349.93-157.92-348.56-352.47C334.43,189.09,491.24,33.28,685.37,34,876.62,34.62,1032.94,191.67,1032.93,384.11ZM683,496.81q43.74,0,87.48,0c15.55,0,25.32-9.72,25.33-25.21q0-87.48,0-175c0-15.83-9.68-25.46-25.59-25.46H595.77c-15.88,0-25.57,9.64-25.58,25.46q0,87.23,0,174.45c0,16.18,9.59,25.7,25.84,25.71Z' transform='translate(-183.1 115.9)'/%3E%3Cpath class='cls-3' d='M683,496.81H596c-16.25,0-25.84-9.53-25.84-25.71q0-87.23,0-174.45c0-15.82,9.7-25.46,25.58-25.46H770.22c15.91,0,25.59,9.63,25.59,25.46q0,87.47,0,175c0,15.49-9.78,25.2-25.33,25.21Q726.74,496.84,683,496.81Z' transform='translate(-183.1 115.9)'/%3E%3C/svg%3E`;case"text":n=(.1*e).toFixed(2);return`data:image/svg+xml,%3Csvg width='${e}' height='${n}' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 528.15 53.64'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%230052ff;%7D%3C/style%3E%3C/defs%3E%3Ctitle%3ECoinbase_Wordmark_SubBrands_ALL%3C/title%3E%3Cpath class='cls-1' d='M164.45,15a15,15,0,0,0-11.74,5.4V0h-8.64V52.92h8.5V48a15,15,0,0,0,11.88,5.62c10.37,0,18.21-8.21,18.21-19.3S174.67,15,164.45,15Zm-1.3,30.67c-6.19,0-10.73-4.83-10.73-11.31S157,23,163.22,23s10.66,4.82,10.66,11.37S169.34,45.65,163.15,45.65Zm83.31-14.91-6.34-.93c-3-.43-5.18-1.44-5.18-3.82,0-2.59,2.8-3.89,6.62-3.89,4.18,0,6.84,1.8,7.42,4.76h8.35c-.94-7.49-6.7-11.88-15.55-11.88-9.15,0-15.2,4.68-15.2,11.3,0,6.34,4,10,12,11.16l6.33.94c3.1.43,4.83,1.65,4.83,4,0,2.95-3,4.17-7.2,4.17-5.12,0-8-2.09-8.43-5.25h-8.49c.79,7.27,6.48,12.38,16.84,12.38,9.44,0,15.7-4.32,15.7-11.74C258.12,35.28,253.58,31.82,246.46,30.74Zm-27.65-2.3c0-8.06-4.9-13.46-15.27-13.46-9.79,0-15.26,5-16.34,12.6h8.57c.43-3,2.73-5.4,7.63-5.4,4.39,0,6.55,1.94,6.55,4.32,0,3.09-4,3.88-8.85,4.39-6.63.72-14.84,3-14.84,11.66,0,6.7,5,11,12.89,11,6.19,0,10.08-2.59,12-6.7.28,3.67,3,6.05,6.84,6.05h5v-7.7h-4.25Zm-8.5,9.36c0,5-4.32,8.64-9.57,8.64-3.24,0-6-1.37-6-4.25,0-3.67,4.39-4.68,8.42-5.11s6-1.22,7.13-2.88ZM281.09,15c-11.09,0-19.23,8.35-19.23,19.36,0,11.6,8.72,19.3,19.37,19.3,9,0,16.06-5.33,17.86-12.89h-9c-1.3,3.31-4.47,5.19-8.71,5.19-5.55,0-9.72-3.46-10.66-9.51H299.3V33.12C299.3,22.46,291.53,15,281.09,15Zm-9.87,15.26c1.37-5.18,5.26-7.7,9.72-7.7,4.9,0,8.64,2.8,9.51,7.7ZM19.3,23a9.84,9.84,0,0,1,9.5,7h9.14c-1.65-8.93-9-15-18.57-15A19,19,0,0,0,0,34.34c0,11.09,8.28,19.3,19.37,19.3,9.36,0,16.85-6,18.5-15H28.8a9.75,9.75,0,0,1-9.43,7.06c-6.27,0-10.66-4.83-10.66-11.31S13,23,19.3,23Zm41.11-8A19,19,0,0,0,41,34.34c0,11.09,8.28,19.3,19.37,19.3A19,19,0,0,0,79.92,34.27C79.92,23.33,71.64,15,60.41,15Zm.07,30.67c-6.19,0-10.73-4.83-10.73-11.31S54.22,23,60.41,23s10.8,4.89,10.8,11.37S66.67,45.65,60.48,45.65ZM123.41,15c-5.62,0-9.29,2.3-11.45,5.54V15.7h-8.57V52.92H112V32.69C112,27,115.63,23,121,23c5,0,8.06,3.53,8.06,8.64V52.92h8.64V31C137.66,21.6,132.84,15,123.41,15ZM92,.36a5.36,5.36,0,0,0-5.55,5.47,5.55,5.55,0,0,0,11.09,0A5.35,5.35,0,0,0,92,.36Zm-9.72,23h5.4V52.92h8.64V15.7h-14Zm298.17-7.7L366.2,52.92H372L375.29,44H392l3.33,8.88h6L386.87,15.7ZM377,39.23l6.45-17.56h.1l6.56,17.56ZM362.66,15.7l-7.88,29h-.11l-8.14-29H341l-8,28.93h-.1l-8-28.87H319L329.82,53h5.45l8.19-29.24h.11L352,53h5.66L368.1,15.7Zm135.25,0v4.86h12.32V52.92h5.6V20.56h12.32V15.7ZM467.82,52.92h25.54V48.06H473.43v-12h18.35V31.35H473.43V20.56h19.93V15.7H467.82ZM443,15.7h-5.6V52.92h24.32V48.06H443Zm-30.45,0h-5.61V52.92h24.32V48.06H412.52Z'/%3E%3C/svg%3E`;case"textWithLogo":n=(.25*e).toFixed(2);return`data:image/svg+xml,%3Csvg width='${e}' height='${n}' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 308.44 77.61'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%230052ff;%7D%3C/style%3E%3C/defs%3E%3Cpath class='cls-1' d='M142.94,20.2l-7.88,29H135l-8.15-29h-5.55l-8,28.93h-.11l-8-28.87H99.27l10.84,37.27h5.44l8.2-29.24h.1l8.41,29.24h5.66L148.39,20.2Zm17.82,0L146.48,57.42h5.82l3.28-8.88h16.65l3.34,8.88h6L167.16,20.2Zm-3.44,23.52,6.45-17.55h.11l6.56,17.55ZM278.2,20.2v4.86h12.32V57.42h5.6V25.06h12.32V20.2ZM248.11,57.42h25.54V52.55H253.71V40.61h18.35V35.85H253.71V25.06h19.94V20.2H248.11ZM223.26,20.2h-5.61V57.42H242V52.55H223.26Zm-30.46,0h-5.6V57.42h24.32V52.55H192.8Zm-154,38A19.41,19.41,0,1,1,57.92,35.57H77.47a38.81,38.81,0,1,0,0,6.47H57.92A19.39,19.39,0,0,1,38.81,58.21Z'/%3E%3C/svg%3E`;case"textLight":n=(.1*e).toFixed(2);return`data:image/svg+xml,%3Csvg width='${e}' height='${n}' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 528.15 53.64'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%23fefefe;%7D%3C/style%3E%3C/defs%3E%3Ctitle%3ECoinbase_Wordmark_SubBrands_ALL%3C/title%3E%3Cpath class='cls-1' d='M164.45,15a15,15,0,0,0-11.74,5.4V0h-8.64V52.92h8.5V48a15,15,0,0,0,11.88,5.62c10.37,0,18.21-8.21,18.21-19.3S174.67,15,164.45,15Zm-1.3,30.67c-6.19,0-10.73-4.83-10.73-11.31S157,23,163.22,23s10.66,4.82,10.66,11.37S169.34,45.65,163.15,45.65Zm83.31-14.91-6.34-.93c-3-.43-5.18-1.44-5.18-3.82,0-2.59,2.8-3.89,6.62-3.89,4.18,0,6.84,1.8,7.42,4.76h8.35c-.94-7.49-6.7-11.88-15.55-11.88-9.15,0-15.2,4.68-15.2,11.3,0,6.34,4,10,12,11.16l6.33.94c3.1.43,4.83,1.65,4.83,4,0,2.95-3,4.17-7.2,4.17-5.12,0-8-2.09-8.43-5.25h-8.49c.79,7.27,6.48,12.38,16.84,12.38,9.44,0,15.7-4.32,15.7-11.74C258.12,35.28,253.58,31.82,246.46,30.74Zm-27.65-2.3c0-8.06-4.9-13.46-15.27-13.46-9.79,0-15.26,5-16.34,12.6h8.57c.43-3,2.73-5.4,7.63-5.4,4.39,0,6.55,1.94,6.55,4.32,0,3.09-4,3.88-8.85,4.39-6.63.72-14.84,3-14.84,11.66,0,6.7,5,11,12.89,11,6.19,0,10.08-2.59,12-6.7.28,3.67,3,6.05,6.84,6.05h5v-7.7h-4.25Zm-8.5,9.36c0,5-4.32,8.64-9.57,8.64-3.24,0-6-1.37-6-4.25,0-3.67,4.39-4.68,8.42-5.11s6-1.22,7.13-2.88ZM281.09,15c-11.09,0-19.23,8.35-19.23,19.36,0,11.6,8.72,19.3,19.37,19.3,9,0,16.06-5.33,17.86-12.89h-9c-1.3,3.31-4.47,5.19-8.71,5.19-5.55,0-9.72-3.46-10.66-9.51H299.3V33.12C299.3,22.46,291.53,15,281.09,15Zm-9.87,15.26c1.37-5.18,5.26-7.7,9.72-7.7,4.9,0,8.64,2.8,9.51,7.7ZM19.3,23a9.84,9.84,0,0,1,9.5,7h9.14c-1.65-8.93-9-15-18.57-15A19,19,0,0,0,0,34.34c0,11.09,8.28,19.3,19.37,19.3,9.36,0,16.85-6,18.5-15H28.8a9.75,9.75,0,0,1-9.43,7.06c-6.27,0-10.66-4.83-10.66-11.31S13,23,19.3,23Zm41.11-8A19,19,0,0,0,41,34.34c0,11.09,8.28,19.3,19.37,19.3A19,19,0,0,0,79.92,34.27C79.92,23.33,71.64,15,60.41,15Zm.07,30.67c-6.19,0-10.73-4.83-10.73-11.31S54.22,23,60.41,23s10.8,4.89,10.8,11.37S66.67,45.65,60.48,45.65ZM123.41,15c-5.62,0-9.29,2.3-11.45,5.54V15.7h-8.57V52.92H112V32.69C112,27,115.63,23,121,23c5,0,8.06,3.53,8.06,8.64V52.92h8.64V31C137.66,21.6,132.84,15,123.41,15ZM92,.36a5.36,5.36,0,0,0-5.55,5.47,5.55,5.55,0,0,0,11.09,0A5.35,5.35,0,0,0,92,.36Zm-9.72,23h5.4V52.92h8.64V15.7h-14Zm298.17-7.7L366.2,52.92H372L375.29,44H392l3.33,8.88h6L386.87,15.7ZM377,39.23l6.45-17.56h.1l6.56,17.56ZM362.66,15.7l-7.88,29h-.11l-8.14-29H341l-8,28.93h-.1l-8-28.87H319L329.82,53h5.45l8.19-29.24h.11L352,53h5.66L368.1,15.7Zm135.25,0v4.86h12.32V52.92h5.6V20.56h12.32V15.7ZM467.82,52.92h25.54V48.06H473.43v-12h18.35V31.35H473.43V20.56h19.93V15.7H467.82ZM443,15.7h-5.6V52.92h24.32V48.06H443Zm-30.45,0h-5.61V52.92h24.32V48.06H412.52Z'/%3E%3C/svg%3E`;case"textWithLogoLight":n=(.25*e).toFixed(2);return`data:image/svg+xml,%3Csvg width='${e}' height='${n}' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 308.44 77.61'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%23fefefe;%7D%3C/style%3E%3C/defs%3E%3Cpath class='cls-1' d='M142.94,20.2l-7.88,29H135l-8.15-29h-5.55l-8,28.93h-.11l-8-28.87H99.27l10.84,37.27h5.44l8.2-29.24h.1l8.41,29.24h5.66L148.39,20.2Zm17.82,0L146.48,57.42h5.82l3.28-8.88h16.65l3.34,8.88h6L167.16,20.2Zm-3.44,23.52,6.45-17.55h.11l6.56,17.55ZM278.2,20.2v4.86h12.32V57.42h5.6V25.06h12.32V20.2ZM248.11,57.42h25.54V52.55H253.71V40.61h18.35V35.85H253.71V25.06h19.94V20.2H248.11ZM223.26,20.2h-5.61V57.42H242V52.55H223.26Zm-30.46,0h-5.6V57.42h24.32V52.55H192.8Zm-154,38A19.41,19.41,0,1,1,57.92,35.57H77.47a38.81,38.81,0,1,0,0,6.47H57.92A19.39,19.39,0,0,1,38.81,58.21Z'/%3E%3C/svg%3E`;default:n=e;return`data:image/svg+xml,%3Csvg width='${e}' height='${n}' viewBox='0 0 1024 1024' fill='none' xmlns='http://www.w3.org/2000/svg'%3E %3Crect width='1024' height='1024' fill='%230052FF'/%3E %3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M152 512C152 710.823 313.177 872 512 872C710.823 872 872 710.823 872 512C872 313.177 710.823 152 512 152C313.177 152 152 313.177 152 512ZM420 396C406.745 396 396 406.745 396 420V604C396 617.255 406.745 628 420 628H604C617.255 628 628 617.255 628 604V420C628 406.745 617.255 396 604 396H420Z' fill='white'/%3E %3C/svg%3E `}};f.walletLogo=d;var v={};var w={};var p={};Object.defineProperty(p,"__esModule",{value:true});p.errorValues=p.standardErrorCodes=void 0;p.standardErrorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901,unsupportedChain:4902}};p.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."},4902:{standard:"EIP-3085",message:"Unrecognized chain ID."}};var b={};var m={};(function(t){Object.defineProperty(t,"__esModule",{value:true});t.serialize=t.getErrorCode=t.isValidCode=t.getMessageFromCode=t.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;const e=p;const n="Unspecified error message.";t.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.";function i(i,s=n){if(i&&Number.isInteger(i)){const n=i.toString();if(h(e.errorValues,n)){return e.errorValues[n].message}if(u(i)){return t.JSON_RPC_SERVER_ERROR_MESSAGE}}return s}t.getMessageFromCode=i;function s(t){if(!Number.isInteger(t)){return false}const n=t.toString();if(e.errorValues[n]){return true}if(u(t)){return true}return false}t.isValidCode=s;function r(t){var e;if(typeof t==="number"){return t}else if(o(t)){return(e=t.code)!==null&&e!==void 0?e:t.errorCode}return undefined}t.getErrorCode=r;function o(t){return typeof t==="object"&&t!==null&&(typeof t.code==="number"||typeof t.errorCode==="number")}function a(t,{shouldIncludeStack:r=false}={}){const o={};if(t&&typeof t==="object"&&!Array.isArray(t)&&h(t,"code")&&s(t.code)){const e=t;o.code=e.code;if(e.message&&typeof e.message==="string"){o.message=e.message;if(h(e,"data")){o.data=e.data}}else{o.message=i(o.code);o.data={originalError:c(t)}}}else{o.code=e.standardErrorCodes.rpc.internal;o.message=l(t,"message")?t.message:n;o.data={originalError:c(t)}}if(r){o.stack=l(t,"stack")?t.stack:undefined}return o}t.serialize=a;function u(t){return t>=-32099&&t<=-32e3}function c(t){if(t&&typeof t==="object"&&!Array.isArray(t)){return Object.assign({},t)}return t}function h(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function l(t,e){return typeof t==="object"&&t!==null&&e in t&&typeof t[e]==="string"}})(m);Object.defineProperty(b,"__esModule",{value:true});b.standardErrors=void 0;const g=p;const y=m;b.standardErrors={rpc:{parse:t=>k(g.standardErrorCodes.rpc.parse,t),invalidRequest:t=>k(g.standardErrorCodes.rpc.invalidRequest,t),invalidParams:t=>k(g.standardErrorCodes.rpc.invalidParams,t),methodNotFound:t=>k(g.standardErrorCodes.rpc.methodNotFound,t),internal:t=>k(g.standardErrorCodes.rpc.internal,t),server:t=>{if(!t||typeof t!=="object"||Array.isArray(t)){throw new Error("Ethereum RPC Server errors must provide single object argument.")}const{code:e}=t;if(!Number.isInteger(e)||e>-32005||e<-32099){throw new Error('"code" must be an integer such that: -32099 <= code <= -32005')}return k(e,t)},invalidInput:t=>k(g.standardErrorCodes.rpc.invalidInput,t),resourceNotFound:t=>k(g.standardErrorCodes.rpc.resourceNotFound,t),resourceUnavailable:t=>k(g.standardErrorCodes.rpc.resourceUnavailable,t),transactionRejected:t=>k(g.standardErrorCodes.rpc.transactionRejected,t),methodNotSupported:t=>k(g.standardErrorCodes.rpc.methodNotSupported,t),limitExceeded:t=>k(g.standardErrorCodes.rpc.limitExceeded,t)},provider:{userRejectedRequest:t=>E(g.standardErrorCodes.provider.userRejectedRequest,t),unauthorized:t=>E(g.standardErrorCodes.provider.unauthorized,t),unsupportedMethod:t=>E(g.standardErrorCodes.provider.unsupportedMethod,t),disconnected:t=>E(g.standardErrorCodes.provider.disconnected,t),chainDisconnected:t=>E(g.standardErrorCodes.provider.chainDisconnected,t),unsupportedChain:t=>E(g.standardErrorCodes.provider.unsupportedChain,t),custom:t=>{if(!t||typeof t!=="object"||Array.isArray(t)){throw new Error("Ethereum Provider custom errors must provide single object argument.")}const{code:e,message:n,data:i}=t;if(!n||typeof n!=="string"){throw new Error('"message" must be a nonempty string')}return new C(e,n,i)}}};function k(t,e){const[n,i]=_(e);return new M(t,n||(0,y.getMessageFromCode)(t),i)}function E(t,e){const[n,i]=_(e);return new C(t,n||(0,y.getMessageFromCode)(t),i)}function _(t){if(t){if(typeof t==="string"){return[t]}else if(typeof t==="object"&&!Array.isArray(t)){const{message:e,data:n}=t;if(e&&typeof e!=="string"){throw new Error("Must specify string message.")}return[e||undefined,n]}}return[]}class M extends Error{constructor(t,e,n){if(!Number.isInteger(t)){throw new Error('"code" must be an integer.')}if(!e||typeof e!=="string"){throw new Error('"message" must be a nonempty string.')}super(e);this.code=t;if(n!==undefined){this.data=n}}}class C extends M{constructor(t,e,n){if(!j(t)){throw new Error('"code" must be an integer such that: 1000 <= code <= 4999')}super(t,e,n)}}function j(t){return Number.isInteger(t)&&t>=1e3&&t<=4999}(function(t){Object.defineProperty(t,"__esModule",{value:true});t.standardErrors=t.standardErrorCodes=void 0;var e=p;Object.defineProperty(t,"standardErrorCodes",{enumerable:true,get:function(){return e.standardErrorCodes}});var n=b;Object.defineProperty(t,"standardErrors",{enumerable:true,get:function(){return n.standardErrors}})})(w);var x={};var S={};Object.defineProperty(S,"__esModule",{value:true});S.isErrorResponse=void 0;function I(t){return t.errorMessage!==undefined}S.isErrorResponse=I;var A={};Object.defineProperty(A,"__esModule",{value:true});A.LIB_VERSION=void 0;A.LIB_VERSION="4.0.4";Object.defineProperty(x,"__esModule",{value:true});x.serializeError=void 0;const O=S;const L=A;const T=p;const N=m;function D(t,e){const n=(0,N.serialize)(R(t),{shouldIncludeStack:true});const i=new URL("https://docs.cloud.coinbase.com/wallet-sdk/docs/errors");i.searchParams.set("version",L.LIB_VERSION);i.searchParams.set("code",n.code.toString());const s=P(n.data,e);if(s){i.searchParams.set("method",s)}i.searchParams.set("message",n.message);return Object.assign(Object.assign({},n),{docUrl:i.href})}x.serializeError=D;function R(t){if(typeof t==="string"){return{message:t,code:T.standardErrorCodes.rpc.internal}}else if((0,O.isErrorResponse)(t)){return Object.assign(Object.assign({},t),{message:t.errorMessage,code:t.errorCode,data:{method:t.method}})}return t}function P(t,e){const n=t===null||t===void 0?void 0:t.method;if(n){return n}if(e===undefined){return undefined}else if(typeof e==="string"){return e}else if(!Array.isArray(e)){return e.method}else if(e.length>0){return e[0].method}return undefined}var U={};Object.defineProperty(U,"__esModule",{value:true});U.RegExpString=U.IntNumber=U.BigIntString=U.AddressString=U.HexString=U.OpaqueType=void 0;function H(){return t=>t}U.OpaqueType=H;U.HexString=H();U.AddressString=H();U.BigIntString=H();function V(t){return Math.floor(t)}U.IntNumber=V;U.RegExpString=H();var Z={};Object.defineProperty(Z,"__esModule",{value:true});Z.areAddressArraysEqual=Z.getFavicon=Z.range=Z.isBigNumber=Z.ensureParsedJSONObject=Z.ensureBigInt=Z.ensureRegExpString=Z.ensureIntNumber=Z.ensureBuffer=Z.ensureAddressString=Z.ensureEvenLengthHexString=Z.ensureHexString=Z.isHexString=Z.prepend0x=Z.strip0x=Z.has0xPrefix=Z.hexStringFromIntNumber=Z.intNumberFromHexString=Z.bigIntStringFromBigInt=Z.hexStringFromBuffer=Z.hexStringToUint8Array=Z.uint8ArrayToHex=Z.randomBytesHex=void 0;const z=w;const B=U;const W=/^[0-9]*$/;const q=/^[a-f0-9]*$/;function $(t){return F(crypto.getRandomValues(new Uint8Array(t)))}Z.randomBytesHex=$;function F(t){return[...t].map((t=>t.toString(16).padStart(2,"0"))).join("")}Z.uint8ArrayToHex=F;function G(t){return new Uint8Array(t.match(/.{1,2}/g).map((t=>parseInt(t,16))))}Z.hexStringToUint8Array=G;function Y(t,e=false){const n=t.toString("hex");return(0,B.HexString)(e?`0x${n}`:n)}Z.hexStringFromBuffer=Y;function J(t){return(0,B.BigIntString)(t.toString(10))}Z.bigIntStringFromBigInt=J;function Q(t){return(0,B.IntNumber)(Number(BigInt(st(t,true))))}Z.intNumberFromHexString=Q;function K(t){return(0,B.HexString)(`0x${BigInt(t).toString(16)}`)}Z.hexStringFromIntNumber=K;function X(t){return t.startsWith("0x")||t.startsWith("0X")}Z.has0xPrefix=X;function tt(t){if(X(t)){return t.slice(2)}return t}Z.strip0x=tt;function et(t){if(X(t)){return`0x${t.slice(2)}`}return`0x${t}`}Z.prepend0x=et;function nt(t){if(typeof t!=="string"){return false}const e=tt(t).toLowerCase();return q.test(e)}Z.isHexString=nt;function it(t,e=false){if(typeof t==="string"){const n=tt(t).toLowerCase();if(q.test(n)){return(0,B.HexString)(e?`0x${n}`:n)}}throw z.standardErrors.rpc.invalidParams(`"${String(t)}" is not a hexadecimal string`)}Z.ensureHexString=it;function st(t,e=false){let n=it(t,false);if(n.length%2===1){n=(0,B.HexString)(`0${n}`)}return e?(0,B.HexString)(`0x${n}`):n}Z.ensureEvenLengthHexString=st;function rt(t){if(typeof t==="string"){const e=tt(t).toLowerCase();if(nt(e)&&e.length===40){return(0,B.AddressString)(et(e))}}throw z.standardErrors.rpc.invalidParams(`Invalid Ethereum address: ${String(t)}`)}Z.ensureAddressString=rt;function ot(e){if(t.Buffer.isBuffer(e)){return e}if(typeof e==="string"){if(nt(e)){const n=st(e,false);return t.Buffer.from(n,"hex")}return t.Buffer.from(e,"utf8")}throw z.standardErrors.rpc.invalidParams(`Not binary data: ${String(e)}`)}Z.ensureBuffer=ot;function at(t){if(typeof t==="number"&&Number.isInteger(t)){return(0,B.IntNumber)(t)}if(typeof t==="string"){if(W.test(t)){return(0,B.IntNumber)(Number(t))}if(nt(t)){return(0,B.IntNumber)(Number(BigInt(st(t,true))))}}throw z.standardErrors.rpc.invalidParams(`Not an integer: ${String(t)}`)}Z.ensureIntNumber=at;function ut(t){if(t instanceof RegExp){return(0,B.RegExpString)(t.toString())}throw z.standardErrors.rpc.invalidParams(`Not a RegExp: ${String(t)}`)}Z.ensureRegExpString=ut;function ct(t){if(t!==null&&(typeof t==="bigint"||lt(t))){return BigInt(t.toString(10))}if(typeof t==="number"){return BigInt(at(t))}if(typeof t==="string"){if(W.test(t)){return BigInt(t)}if(nt(t)){return BigInt(st(t,true))}}throw z.standardErrors.rpc.invalidParams(`Not an integer: ${String(t)}`)}Z.ensureBigInt=ct;function ht(t){if(typeof t==="string"){return JSON.parse(t)}if(typeof t==="object"){return t}throw z.standardErrors.rpc.invalidParams(`Not a JSON string or an object: ${String(t)}`)}Z.ensureParsedJSONObject=ht;function lt(t){if(t==null||typeof t.constructor!=="function"){return false}const{constructor:e}=t;return typeof e.config==="function"&&typeof e.EUCLID==="number"}Z.isBigNumber=lt;function ft(t,e){return Array.from({length:e-t},((e,n)=>t+n))}Z.range=ft;function dt(){const t=document.querySelector('link[sizes="192x192"]')||document.querySelector('link[sizes="180x180"]')||document.querySelector('link[rel="icon"]')||document.querySelector('link[rel="shortcut icon"]');const{protocol:e,host:n}=document.location;const i=t?t.getAttribute("href"):null;if(!i||i.startsWith("javascript:")||i.startsWith("vbscript:")){return null}if(i.startsWith("http://")||i.startsWith("https://")||i.startsWith("data:")){return i}if(i.startsWith("//")){return e+i}return`${e}//${n}${i}`}Z.getFavicon=dt;function vt(t,e){return t.length===e.length&&t.every(((t,n)=>t===e[n]))}Z.areAddressArraysEqual=vt;var wt={};var pt={};var bt={};var mt={};Object.defineProperty(mt,"__esModule",{value:true});mt.decryptContent=mt.encryptContent=mt.importKeyFromHexString=mt.exportKeyToHexString=mt.decrypt=mt.encrypt=mt.deriveSharedSecret=mt.generateKeyPair=void 0;const gt=Z;async function yt(){return crypto.subtle.generateKey({name:"ECDH",namedCurve:"P-256"},true,["deriveKey"])}mt.generateKeyPair=yt;async function kt(t,e){return crypto.subtle.deriveKey({name:"ECDH",public:e},t,{name:"AES-GCM",length:256},false,["encrypt","decrypt"])}mt.deriveSharedSecret=kt;async function Et(t,e){const n=crypto.getRandomValues(new Uint8Array(12));const i=await crypto.subtle.encrypt({name:"AES-GCM",iv:n},t,(new TextEncoder).encode(e));return{iv:n,cipherText:i}}mt.encrypt=Et;async function _t(t,{iv:e,cipherText:n}){const i=await crypto.subtle.decrypt({name:"AES-GCM",iv:e},t,n);return(new TextDecoder).decode(i)}mt.decrypt=_t;function Mt(t){switch(t){case"public":return"spki";case"private":return"pkcs8"}}async function Ct(t,e){const n=Mt(t);const i=await crypto.subtle.exportKey(n,e);return(0,gt.uint8ArrayToHex)(new Uint8Array(i))}mt.exportKeyToHexString=Ct;async function jt(t,e){const n=Mt(t);const i=(0,gt.hexStringToUint8Array)(e).buffer;return await crypto.subtle.importKey(n,i,{name:"ECDH",namedCurve:"P-256"},true,t==="private"?["deriveKey"]:[])}mt.importKeyFromHexString=jt;async function xt(t,e){const n=JSON.stringify(t,((t,e)=>{if(!(e instanceof Error))return e;const n=e;return Object.assign(Object.assign({},n.code?{code:n.code}:{}),{message:n.message})}));return Et(e,n)}mt.encryptContent=xt;async function St(t,e){return JSON.parse(await _t(e,t))}mt.decryptContent=St;var It={};Object.defineProperty(It,"__esModule",{value:true});It.ScopedLocalStorage=void 0;class At{constructor(t,e){this.scope=t;this.module=e}setItem(t,e){localStorage.setItem(this.scopedKey(t),e)}getItem(t){return localStorage.getItem(this.scopedKey(t))}removeItem(t){localStorage.removeItem(this.scopedKey(t))}clear(){const t=this.scopedKey("");const e=[];for(let n=0;n<localStorage.length;n++){const i=localStorage.key(n);if(typeof i==="string"&&i.startsWith(t)){e.push(i)}}e.forEach((t=>localStorage.removeItem(t)))}scopedKey(t){return`-${this.scope}${this.module?`:${this.module}`:""}:${t}`}static clearAll(){new At("CBWSDK").clear();new At("walletlink").clear()}}It.ScopedLocalStorage=At;Object.defineProperty(bt,"__esModule",{value:true});bt.SCWKeyManager=void 0;const Ot=mt;const Lt=It;const Tt={storageKey:"ownPrivateKey",keyType:"private"};const Nt={storageKey:"ownPublicKey",keyType:"public"};const Dt={storageKey:"peerPublicKey",keyType:"public"};class Rt{constructor(){this.storage=new Lt.ScopedLocalStorage("CBWSDK","SCWKeyManager");this.ownPrivateKey=null;this.ownPublicKey=null;this.peerPublicKey=null;this.sharedSecret=null}async getOwnPublicKey(){await this.loadKeysIfNeeded();return this.ownPublicKey}async getSharedSecret(){await this.loadKeysIfNeeded();return this.sharedSecret}async setPeerPublicKey(t){this.sharedSecret=null;this.peerPublicKey=t;await this.storeKey(Dt,t);await this.loadKeysIfNeeded()}async clear(){this.ownPrivateKey=null;this.ownPublicKey=null;this.peerPublicKey=null;this.sharedSecret=null;this.storage.removeItem(Nt.storageKey);this.storage.removeItem(Tt.storageKey);this.storage.removeItem(Dt.storageKey)}async generateKeyPair(){const t=await(0,Ot.generateKeyPair)();this.ownPrivateKey=t.privateKey;this.ownPublicKey=t.publicKey;await this.storeKey(Tt,t.privateKey);await this.storeKey(Nt,t.publicKey)}async loadKeysIfNeeded(){if(this.ownPrivateKey===null){this.ownPrivateKey=await this.loadKey(Tt)}if(this.ownPublicKey===null){this.ownPublicKey=await this.loadKey(Nt)}if(this.ownPrivateKey===null||this.ownPublicKey===null){await this.generateKeyPair()}if(this.peerPublicKey===null){this.peerPublicKey=await this.loadKey(Dt)}if(this.sharedSecret===null){if(this.ownPrivateKey===null||this.peerPublicKey===null)return;this.sharedSecret=await(0,Ot.deriveSharedSecret)(this.ownPrivateKey,this.peerPublicKey)}}async loadKey(t){const e=this.storage.getItem(t.storageKey);if(!e)return null;return(0,Ot.importKeyFromHexString)(t.keyType,e)}async storeKey(t,e){const n=await(0,Ot.exportKeyToHexString)(t.keyType,e);this.storage.setItem(t.storageKey,n)}}bt.SCWKeyManager=Rt;var Pt={};Object.defineProperty(Pt,"__esModule",{value:true});Pt.SCWStateManager=void 0;const Ut=It;const Ht="accounts";const Vt="activeChain";const Zt="availableChains";const zt="walletCapabilities";class Bt{get accounts(){return this._accounts}get activeChain(){return this._activeChain}get walletCapabilities(){return this._walletCapabilities}constructor(t){var e,n;this.storage=new Ut.ScopedLocalStorage("CBWSDK","SCWStateManager");this.updateListener=t.updateListener;this.availableChains=this.loadItemFromStorage(Zt);this._walletCapabilities=this.loadItemFromStorage(zt);const i=this.loadItemFromStorage(Ht);const s=this.loadItemFromStorage(Vt);if(i){this.updateListener.onAccountsUpdate({accounts:i,source:"storage"})}if(s){this.updateListener.onChainUpdate({chain:s,source:"storage"})}this._accounts=i||[];this._activeChain=s||{id:(n=(e=t.appChainIds)===null||e===void 0?void 0:e[0])!==null&&n!==void 0?n:1}}updateAccounts(t){this._accounts=t;this.storeItemToStorage(Ht,t);this.updateListener.onAccountsUpdate({accounts:t,source:"wallet"})}switchChain(t){var e;const n=(e=this.availableChains)===null||e===void 0?void 0:e.find((e=>e.id===t));if(!n)return false;if(n===this._activeChain)return true;this._activeChain=n;this.storeItemToStorage(Vt,n);this.updateListener.onChainUpdate({chain:n,source:"wallet"});return true}updateAvailableChains(t){if(!t||Object.keys(t).length===0)return;const e=Object.entries(t).map((([t,e])=>({id:Number(t),rpcUrl:e})));this.availableChains=e;this.storeItemToStorage(Zt,e);this.switchChain(this._activeChain.id)}updateWalletCapabilities(t){this._walletCapabilities=t;this.storeItemToStorage(zt,t)}storeItemToStorage(t,e){this.storage.setItem(t,JSON.stringify(e))}loadItemFromStorage(t){const e=this.storage.getItem(t);return e?JSON.parse(e):undefined}clear(){this.storage.clear()}}Pt.SCWStateManager=Bt;Object.defineProperty(pt,"__esModule",{value:true});pt.SCWSigner=void 0;const Wt=bt;const qt=Pt;const $t=w;const Ft=Z;const Gt=mt;class Yt{constructor(t){this.metadata=t.metadata;this.communicator=t.communicator;this.keyManager=new Wt.SCWKeyManager;this.stateManager=new qt.SCWStateManager({appChainIds:this.metadata.appChainIds,updateListener:t.updateListener});this.handshake=this.handshake.bind(this);this.request=this.request.bind(this);this.createRequestMessage=this.createRequestMessage.bind(this);this.decryptResponseMessage=this.decryptResponseMessage.bind(this)}async handshake(){const t=await this.createRequestMessage({handshake:{method:"eth_requestAccounts",params:this.metadata}});const e=await this.communicator.postRequestAndWaitForResponse(t);if("failure"in e.content)throw e.content.failure;const n=await(0,Gt.importKeyFromHexString)("public",e.sender);await this.keyManager.setPeerPublicKey(n);const i=await this.decryptResponseMessage(e);this.updateInternalState({method:"eth_requestAccounts"},i);const s=i.result;if("error"in s)throw s.error;return this.stateManager.accounts}async request(t){const e=this.tryLocalHandling(t);if(e!==undefined){if(e instanceof Error)throw e;return e}await this.communicator.waitForPopupLoaded();const n=await this.sendEncryptedRequest(t);const i=await this.decryptResponseMessage(n);this.updateInternalState(t,i);const s=i.result;if("error"in s)throw s.error;return s.value}async disconnect(){this.stateManager.clear();await this.keyManager.clear()}tryLocalHandling(t){var e;switch(t.method){case"wallet_switchEthereumChain":{const n=t.params;if(!n||!((e=n[0])===null||e===void 0?void 0:e.chainId)){throw $t.standardErrors.rpc.invalidParams()}const i=(0,Ft.ensureIntNumber)(n[0].chainId);const s=this.stateManager.switchChain(i);return s?null:undefined}case"wallet_getCapabilities":{const t=this.stateManager.walletCapabilities;if(!t){throw $t.standardErrors.provider.unauthorized("No wallet capabilities found, please disconnect and reconnect")}return t}default:return undefined}}async sendEncryptedRequest(t){const e=await this.keyManager.getSharedSecret();if(!e){throw $t.standardErrors.provider.unauthorized("No valid session found, try requestAccounts before other methods")}const n=await(0,Gt.encryptContent)({action:t,chainId:this.stateManager.activeChain.id},e);const i=await this.createRequestMessage({encrypted:n});return this.communicator.postRequestAndWaitForResponse(i)}async createRequestMessage(t){const e=await(0,Gt.exportKeyToHexString)("public",await this.keyManager.getOwnPublicKey());return{id:crypto.randomUUID(),sender:e,content:t,timestamp:new Date}}async decryptResponseMessage(t){const e=t.content;if("failure"in e){throw e.failure}const n=await this.keyManager.getSharedSecret();if(!n){throw $t.standardErrors.provider.unauthorized("Invalid session")}return(0,Gt.decryptContent)(e.encrypted,n)}updateInternalState(t,e){var n,i;const s=(n=e.data)===null||n===void 0?void 0:n.chains;if(s){this.stateManager.updateAvailableChains(s)}const r=(i=e.data)===null||i===void 0?void 0:i.capabilities;if(r){this.stateManager.updateWalletCapabilities(r)}const o=e.result;if("error"in o)return;switch(t.method){case"eth_requestAccounts":{const t=o.value;this.stateManager.updateAccounts(t);break}case"wallet_switchEthereumChain":{if(o.value!==null)return;const e=t.params;const n=(0,Ft.ensureIntNumber)(e[0].chainId);this.stateManager.switchChain(n);break}}}}pt.SCWSigner=Yt;var Jt={};var Qt={exports:{}};var Kt=r.exports.EventEmitter;function Xt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function te(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Xt(Object(n),!0).forEach((function(e){ee(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Xt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ee(t,e,n){e=re(e);if(e in t){Object.defineProperty(t,e,{value:n,enumerable:true,configurable:true,writable:true})}else{t[e]=n}return t}function ne(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function ie(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(t,re(i.key),i)}}function se(t,e,n){if(e)ie(t.prototype,e);if(n)ie(t,n);Object.defineProperty(t,"prototype",{writable:false});return t}function re(t){var e=oe(t,"string");return typeof e==="symbol"?e:String(e)}function oe(t,e){if(typeof t!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==undefined){var i=n.call(t,e||"default");if(typeof i!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ae=t,ue=ae.Buffer;var ce=o,he=ce.inspect;var le=he&&he.custom||"inspect";function fe(t,e,n){ue.prototype.copy.call(t,e,n)}var de=function(){function t(){ne(this,t);this.head=null;this.tail=null;this.length=0}se(t,[{key:"push",value:function t(e){var n={data:e,next:null};if(this.length>0)this.tail.next=n;else this.head=n;this.tail=n;++this.length}},{key:"unshift",value:function t(e){var n={data:e,next:this.head};if(this.length===0)this.tail=n;this.head=n;++this.length}},{key:"shift",value:function t(){if(this.length===0)return;var e=this.head.data;if(this.length===1)this.head=this.tail=null;else this.head=this.head.next;--this.length;return e}},{key:"clear",value:function t(){this.head=this.tail=null;this.length=0}},{key:"join",value:function t(e){if(this.length===0)return"";var n=this.head;var i=""+n.data;while(n=n.next)i+=e+n.data;return i}},{key:"concat",value:function t(e){if(this.length===0)return ue.alloc(0);var n=ue.allocUnsafe(e>>>0);var i=this.head;var s=0;while(i){fe(i.data,n,s);s+=i.data.length;i=i.next}return n}},{key:"consume",value:function t(e,n){var i;if(e<this.head.data.length){i=this.head.data.slice(0,e);this.head.data=this.head.data.slice(e)}else if(e===this.head.data.length){i=this.shift()}else{i=n?this._getString(e):this._getBuffer(e)}return i}},{key:"first",value:function t(){return this.head.data}},{key:"_getString",value:function t(e){var n=this.head;var i=1;var s=n.data;e-=s.length;while(n=n.next){var r=n.data;var o=e>r.length?r.length:e;if(o===r.length)s+=r;else s+=r.slice(0,e);e-=o;if(e===0){if(o===r.length){++i;if(n.next)this.head=n.next;else this.head=this.tail=null}else{this.head=n;n.data=r.slice(o)}break}++i}this.length-=i;return s}},{key:"_getBuffer",value:function t(e){var n=ue.allocUnsafe(e);var i=this.head;var s=1;i.data.copy(n);e-=i.data.length;while(i=i.next){var r=i.data;var o=e>r.length?r.length:e;r.copy(n,n.length-e,0,o);e-=o;if(e===0){if(o===r.length){++s;if(i.next)this.head=i.next;else this.head=this.tail=null}else{this.head=i;i.data=r.slice(o)}break}++s}this.length-=s;return n}},{key:le,value:function t(e,n){return he(this,te(te({},n),{},{depth:0,customInspect:false}))}}]);return t}();function ve(t,n){var i=this;var s=this._readableState&&this._readableState.destroyed;var r=this._writableState&&this._writableState.destroyed;if(s||r){if(n){n(t)}else if(t){if(!this._writableState){e.nextTick(me,this,t)}else if(!this._writableState.errorEmitted){this._writableState.errorEmitted=true;e.nextTick(me,this,t)}}return this}if(this._readableState){this._readableState.destroyed=true}if(this._writableState){this._writableState.destroyed=true}this._destroy(t||null,(function(t){if(!n&&t){if(!i._writableState){e.nextTick(we,i,t)}else if(!i._writableState.errorEmitted){i._writableState.errorEmitted=true;e.nextTick(we,i,t)}else{e.nextTick(pe,i)}}else if(n){e.nextTick(pe,i);n(t)}else{e.nextTick(pe,i)}}));return this}function we(t,e){me(t,e);pe(t)}function pe(t){if(t._writableState&&!t._writableState.emitClose)return;if(t._readableState&&!t._readableState.emitClose)return;t.emit("close")}function be(){if(this._readableState){this._readableState.destroyed=false;this._readableState.reading=false;this._readableState.ended=false;this._readableState.endEmitted=false}if(this._writableState){this._writableState.destroyed=false;this._writableState.ended=false;this._writableState.ending=false;this._writableState.finalCalled=false;this._writableState.prefinished=false;this._writableState.finished=false;this._writableState.errorEmitted=false}}function me(t,e){t.emit("error",e)}function ge(t,e){var n=t._readableState;var i=t._writableState;if(n&&n.autoDestroy||i&&i.autoDestroy)t.destroy(e);else t.emit("error",e)}var ye={destroy:ve,undestroy:be,errorOrDestroy:ge};var ke={};function Ee(t,e){t.prototype=Object.create(e.prototype);t.prototype.constructor=t;t.__proto__=e}var _e={};function Me(t,e,n){if(!n){n=Error}function i(t,n,i){if(typeof e==="string"){return e}else{return e(t,n,i)}}var s=function(t){Ee(e,t);function e(e,n,s){return t.call(this,i(e,n,s))||this}return e}(n);s.prototype.name=n.name;s.prototype.code=t;_e[t]=s}function Ce(t,e){if(Array.isArray(t)){var n=t.length;t=t.map((function(t){return String(t)}));if(n>2){return"one of ".concat(e," ").concat(t.slice(0,n-1).join(", "),", or ")+t[n-1]}else if(n===2){return"one of ".concat(e," ").concat(t[0]," or ").concat(t[1])}else{return"of ".concat(e," ").concat(t[0])}}else{return"of ".concat(e," ").concat(String(t))}}function je(t,e,n){return t.substr(!n||n<0?0:+n,e.length)===e}function xe(t,e,n){if(n===undefined||n>t.length){n=t.length}return t.substring(n-e.length,n)===e}function Se(t,e,n){if(typeof n!=="number"){n=0}if(n+e.length>t.length){return false}else{return t.indexOf(e,n)!==-1}}Me("ERR_INVALID_OPT_VALUE",(function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'}),TypeError);Me("ERR_INVALID_ARG_TYPE",(function(t,e,n){var i;if(typeof e==="string"&&je(e,"not ")){i="must not be";e=e.replace(/^not /,"")}else{i="must be"}var s;if(xe(t," argument")){s="The ".concat(t," ").concat(i," ").concat(Ce(e,"type"))}else{var r=Se(t,".")?"property":"argument";s='The "'.concat(t,'" ').concat(r," ").concat(i," ").concat(Ce(e,"type"))}s+=". Received type ".concat(typeof n);return s}),TypeError);Me("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");Me("ERR_METHOD_NOT_IMPLEMENTED",(function(t){return"The "+t+" method is not implemented"}));Me("ERR_STREAM_PREMATURE_CLOSE","Premature close");Me("ERR_STREAM_DESTROYED",(function(t){return"Cannot call "+t+" after a stream was destroyed"}));Me("ERR_MULTIPLE_CALLBACK","Callback called multiple times");Me("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");Me("ERR_STREAM_WRITE_AFTER_END","write after end");Me("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);Me("ERR_UNKNOWN_ENCODING",(function(t){return"Unknown encoding: "+t}),TypeError);Me("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");ke.codes=_e;var Ie=ke.codes.ERR_INVALID_OPT_VALUE;function Ae(t,e,n){return t.highWaterMark!=null?t.highWaterMark:e?t[n]:null}function Oe(t,e,n,i){var s=Ae(e,i,n);if(s!=null){if(!(isFinite(s)&&Math.floor(s)===s)||s<0){var r=i?n:"highWaterMark";throw new Ie(r,s)}return Math.floor(s)}return t.objectMode?16:16*1024}var Le={getHighWaterMark:Oe};var Te={exports:{}};if(typeof Object.create==="function"){Te.exports=function t(e,n){if(n){e.super_=n;e.prototype=Object.create(n.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}})}}}else{Te.exports=function t(e,n){if(n){e.super_=n;var i=function(){};i.prototype=n.prototype;e.prototype=new i;e.prototype.constructor=e}}}var Ne=De;function De(t,e){if(Re("noDeprecation")){return t}var n=false;function i(){if(!n){if(Re("throwDeprecation")){throw new Error(e)}else if(Re("traceDeprecation")){console.trace(e)}else{console.warn(e)}n=true}return t.apply(this,arguments)}return i}function Re(t){try{if(!n.localStorage)return false}catch(t){return false}var e=n.localStorage[t];if(null==e)return false;return String(e).toLowerCase()==="true"}var Pe=cn;function Ue(t){var e=this;this.next=null;this.entry=null;this.finish=function(){jn(e,t)}}var He;cn.WritableState=an;var Ve={deprecate:Ne};var Ze=Kt;var ze=t.Buffer;var Be=(typeof n!=="undefined"?n:typeof window!=="undefined"?window:typeof self!=="undefined"?self:{}).Uint8Array||function(){};function We(t){return ze.from(t)}function qe(t){return ze.isBuffer(t)||t instanceof Be}var $e=ye;var Fe=Le,Ge=Fe.getHighWaterMark;var Ye=ke.codes,Je=Ye.ERR_INVALID_ARG_TYPE,Qe=Ye.ERR_METHOD_NOT_IMPLEMENTED,Ke=Ye.ERR_MULTIPLE_CALLBACK,Xe=Ye.ERR_STREAM_CANNOT_PIPE,tn=Ye.ERR_STREAM_DESTROYED,en=Ye.ERR_STREAM_NULL_VALUES,nn=Ye.ERR_STREAM_WRITE_AFTER_END,sn=Ye.ERR_UNKNOWN_ENCODING;var rn=$e.errorOrDestroy;Te.exports(cn,Ze);function on(){}function an(t,e,n){He=He||Sn;t=t||{};if(typeof n!=="boolean")n=e instanceof He;this.objectMode=!!t.objectMode;if(n)this.objectMode=this.objectMode||!!t.writableObjectMode;this.highWaterMark=Ge(this,t,"writableHighWaterMark",n);this.finalCalled=false;this.needDrain=false;this.ending=false;this.ended=false;this.finished=false;this.destroyed=false;var i=t.decodeStrings===false;this.decodeStrings=!i;this.defaultEncoding=t.defaultEncoding||"utf8";this.length=0;this.writing=false;this.corked=0;this.sync=true;this.bufferProcessing=false;this.onwrite=function(t){bn(e,t)};this.writecb=null;this.writelen=0;this.bufferedRequest=null;this.lastBufferedRequest=null;this.pendingcb=0;this.prefinished=false;this.errorEmitted=false;this.emitClose=t.emitClose!==false;this.autoDestroy=!!t.autoDestroy;this.bufferedRequestCount=0;this.corkedRequestsFree=new Ue(this)}an.prototype.getBuffer=function t(){var e=this.bufferedRequest;var n=[];while(e){n.push(e);e=e.next}return n};(function(){try{Object.defineProperty(an.prototype,"buffer",{get:Ve.deprecate((function t(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer "+"instead.","DEP0003")})}catch(t){}})();var un;if(typeof Symbol==="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]==="function"){un=Function.prototype[Symbol.hasInstance];Object.defineProperty(cn,Symbol.hasInstance,{value:function t(e){if(un.call(this,e))return true;if(this!==cn)return false;return e&&e._writableState instanceof an}})}else{un=function t(e){return e instanceof this}}function cn(t){He=He||Sn;var e=this instanceof He;if(!e&&!un.call(cn,this))return new cn(t);this._writableState=new an(t,this,e);this.writable=true;if(t){if(typeof t.write==="function")this._write=t.write;if(typeof t.writev==="function")this._writev=t.writev;if(typeof t.destroy==="function")this._destroy=t.destroy;if(typeof t.final==="function")this._final=t.final}Ze.call(this)}cn.prototype.pipe=function(){rn(this,new Xe)};function hn(t,n){var i=new nn;rn(t,i);e.nextTick(n,i)}function ln(t,n,i,s){var r;if(i===null){r=new en}else if(typeof i!=="string"&&!n.objectMode){r=new Je("chunk",["string","Buffer"],i)}if(r){rn(t,r);e.nextTick(s,r);return false}return true}cn.prototype.write=function(t,e,n){var i=this._writableState;var s=false;var r=!i.objectMode&&qe(t);if(r&&!ze.isBuffer(t)){t=We(t)}if(typeof e==="function"){n=e;e=null}if(r)e="buffer";else if(!e)e=i.defaultEncoding;if(typeof n!=="function")n=on;if(i.ending)hn(this,n);else if(r||ln(this,i,t,n)){i.pendingcb++;s=dn(this,i,r,t,e,n)}return s};cn.prototype.cork=function(){this._writableState.corked++};cn.prototype.uncork=function(){var t=this._writableState;if(t.corked){t.corked--;if(!t.writing&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest)yn(this,t)}};cn.prototype.setDefaultEncoding=function t(e){if(typeof e==="string")e=e.toLowerCase();if(!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new sn(e);this._writableState.defaultEncoding=e;return this};Object.defineProperty(cn.prototype,"writableBuffer",{enumerable:false,get:function t(){return this._writableState&&this._writableState.getBuffer()}});function fn(t,e,n){if(!t.objectMode&&t.decodeStrings!==false&&typeof e==="string"){e=ze.from(e,n)}return e}Object.defineProperty(cn.prototype,"writableHighWaterMark",{enumerable:false,get:function t(){return this._writableState.highWaterMark}});function dn(t,e,n,i,s,r){if(!n){var o=fn(e,i,s);if(i!==o){n=true;s="buffer";i=o}}var a=e.objectMode?1:i.length;e.length+=a;var u=e.length<e.highWaterMark;if(!u)e.needDrain=true;if(e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:i,encoding:s,isBuf:n,callback:r,next:null};if(c){c.next=e.lastBufferedRequest}else{e.bufferedRequest=e.lastBufferedRequest}e.bufferedRequestCount+=1}else{vn(t,e,false,a,i,s,r)}return u}function vn(t,e,n,i,s,r,o){e.writelen=i;e.writecb=o;e.writing=true;e.sync=true;if(e.destroyed)e.onwrite(new tn("write"));else if(n)t._writev(s,e.onwrite);else t._write(s,r,e.onwrite);e.sync=false}function wn(t,n,i,s,r){--n.pendingcb;if(i){e.nextTick(r,s);e.nextTick(Mn,t,n);t._writableState.errorEmitted=true;rn(t,s)}else{r(s);t._writableState.errorEmitted=true;rn(t,s);Mn(t,n)}}function pn(t){t.writing=false;t.writecb=null;t.length-=t.writelen;t.writelen=0}function bn(t,n){var i=t._writableState;var s=i.sync;var r=i.writecb;if(typeof r!=="function")throw new Ke;pn(i);if(n)wn(t,i,s,n,r);else{var o=kn(i)||t.destroyed;if(!o&&!i.corked&&!i.bufferProcessing&&i.bufferedRequest){yn(t,i)}if(s){e.nextTick(mn,t,i,o,r)}else{mn(t,i,o,r)}}}function mn(t,e,n,i){if(!n)gn(t,e);e.pendingcb--;i();Mn(t,e)}function gn(t,e){if(e.length===0&&e.needDrain){e.needDrain=false;t.emit("drain")}}function yn(t,e){e.bufferProcessing=true;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var i=e.bufferedRequestCount;var s=new Array(i);var r=e.corkedRequestsFree;r.entry=n;var o=0;var a=true;while(n){s[o]=n;if(!n.isBuf)a=false;n=n.next;o+=1}s.allBuffers=a;vn(t,e,true,e.length,s,"",r.finish);e.pendingcb++;e.lastBufferedRequest=null;if(r.next){e.corkedRequestsFree=r.next;r.next=null}else{e.corkedRequestsFree=new Ue(e)}e.bufferedRequestCount=0}else{while(n){var u=n.chunk;var c=n.encoding;var h=n.callback;var l=e.objectMode?1:u.length;vn(t,e,false,l,u,c,h);n=n.next;e.bufferedRequestCount--;if(e.writing){break}}if(n===null)e.lastBufferedRequest=null}e.bufferedRequest=n;e.bufferProcessing=false}cn.prototype._write=function(t,e,n){n(new Qe("_write()"))};cn.prototype._writev=null;cn.prototype.end=function(t,e,n){var i=this._writableState;if(typeof t==="function"){n=t;t=null;e=null}else if(typeof e==="function"){n=e;e=null}if(t!==null&&t!==undefined)this.write(t,e);if(i.corked){i.corked=1;this.uncork()}if(!i.ending)Cn(this,i,n);return this};Object.defineProperty(cn.prototype,"writableLength",{enumerable:false,get:function t(){return this._writableState.length}});function kn(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function En(t,e){t._final((function(n){e.pendingcb--;if(n){rn(t,n)}e.prefinished=true;t.emit("prefinish");Mn(t,e)}))}function _n(t,n){if(!n.prefinished&&!n.finalCalled){if(typeof t._final==="function"&&!n.destroyed){n.pendingcb++;n.finalCalled=true;e.nextTick(En,t,n)}else{n.prefinished=true;t.emit("prefinish")}}}function Mn(t,e){var n=kn(e);if(n){_n(t,e);if(e.pendingcb===0){e.finished=true;t.emit("finish");if(e.autoDestroy){var i=t._readableState;if(!i||i.autoDestroy&&i.endEmitted){t.destroy()}}}}return n}function Cn(t,n,i){n.ending=true;Mn(t,n);if(i){if(n.finished)e.nextTick(i);else t.once("finish",i)}n.ended=true;t.writable=false}function jn(t,e,n){var i=t.entry;t.entry=null;while(i){var s=i.callback;e.pendingcb--;s(n);i=i.next}e.corkedRequestsFree.next=t}Object.defineProperty(cn.prototype,"destroyed",{enumerable:false,get:function t(){if(this._writableState===undefined){return false}return this._writableState.destroyed},set:function t(e){if(!this._writableState){return}this._writableState.destroyed=e}});cn.prototype.destroy=$e.destroy;cn.prototype._undestroy=$e.undestroy;cn.prototype._destroy=function(t,e){e(t)};var xn=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};var Sn=Nn;var In=hi;var An=Pe;Te.exports(Nn,In);{var On=xn(An.prototype);for(var Ln=0;Ln<On.length;Ln++){var Tn=On[Ln];if(!Nn.prototype[Tn])Nn.prototype[Tn]=An.prototype[Tn]}}function Nn(t){if(!(this instanceof Nn))return new Nn(t);In.call(this,t);An.call(this,t);this.allowHalfOpen=true;if(t){if(t.readable===false)this.readable=false;if(t.writable===false)this.writable=false;if(t.allowHalfOpen===false){this.allowHalfOpen=false;this.once("end",Dn)}}}Object.defineProperty(Nn.prototype,"writableHighWaterMark",{enumerable:false,get:function t(){return this._writableState.highWaterMark}});Object.defineProperty(Nn.prototype,"writableBuffer",{enumerable:false,get:function t(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(Nn.prototype,"writableLength",{enumerable:false,get:function t(){return this._writableState.length}});function Dn(){if(this._writableState.ended)return;e.nextTick(Rn,this)}function Rn(t){t.end()}Object.defineProperty(Nn.prototype,"destroyed",{enumerable:false,get:function t(){if(this._readableState===undefined||this._writableState===undefined){return false}return this._readableState.destroyed&&this._writableState.destroyed},set:function t(e){if(this._readableState===undefined||this._writableState===undefined){return}this._readableState.destroyed=e;this._writableState.destroyed=e}});var Pn=ke.codes.ERR_STREAM_PREMATURE_CLOSE;function Un(t){var e=false;return function(){if(e)return;e=true;for(var n=arguments.length,i=new Array(n),s=0;s<n;s++){i[s]=arguments[s]}t.apply(this,i)}}function Hn(){}function Vn(t){return t.setHeader&&typeof t.abort==="function"}function Zn(t,e,n){if(typeof e==="function")return Zn(t,null,e);if(!e)e={};n=Un(n||Hn);var i=e.readable||e.readable!==false&&t.readable;var s=e.writable||e.writable!==false&&t.writable;var r=function e(){if(!t.writable)a()};var o=t._writableState&&t._writableState.finished;var a=function e(){s=false;o=true;if(!i)n.call(t)};var u=t._readableState&&t._readableState.endEmitted;var c=function e(){i=false;u=true;if(!s)n.call(t)};var h=function e(i){n.call(t,i)};var l=function e(){var r;if(i&&!u){if(!t._readableState||!t._readableState.ended)r=new Pn;return n.call(t,r)}if(s&&!o){if(!t._writableState||!t._writableState.ended)r=new Pn;return n.call(t,r)}};var f=function e(){t.req.on("finish",a)};if(Vn(t)){t.on("complete",a);t.on("abort",l);if(t.req)f();else t.on("request",f)}else if(s&&!t._writableState){t.on("end",r);t.on("close",r)}t.on("end",c);t.on("finish",a);if(e.error!==false)t.on("error",h);t.on("close",l);return function(){t.removeListener("complete",a);t.removeListener("abort",l);t.removeListener("request",f);if(t.req)t.req.removeListener("finish",a);t.removeListener("end",r);t.removeListener("close",r);t.removeListener("finish",a);t.removeListener("end",c);t.removeListener("error",h);t.removeListener("close",l)}}var zn=Zn;var Bn;function Wn(t,e,n){e=qn(e);if(e in t){Object.defineProperty(t,e,{value:n,enumerable:true,configurable:true,writable:true})}else{t[e]=n}return t}function qn(t){var e=$n(t,"string");return typeof e==="symbol"?e:String(e)}function $n(t,e){if(typeof t!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==undefined){var i=n.call(t,e||"default");if(typeof i!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Fn=zn;var Gn=Symbol("lastResolve");var Yn=Symbol("lastReject");var Jn=Symbol("error");var Qn=Symbol("ended");var Kn=Symbol("lastPromise");var Xn=Symbol("handlePromise");var ti=Symbol("stream");function ei(t,e){return{value:t,done:e}}function ni(t){var e=t[Gn];if(e!==null){var n=t[ti].read();if(n!==null){t[Kn]=null;t[Gn]=null;t[Yn]=null;e(ei(n,false))}}}function ii(t){e.nextTick(ni,t)}function si(t,e){return function(n,i){t.then((function(){if(e[Qn]){n(ei(undefined,true));return}e[Xn](n,i)}),i)}}var ri=Object.getPrototypeOf((function(){}));var oi=Object.setPrototypeOf((Bn={get stream(){return this[ti]},next:function t(){var n=this;var i=this[Jn];if(i!==null){return Promise.reject(i)}if(this[Qn]){return Promise.resolve(ei(undefined,true))}if(this[ti].destroyed){return new Promise((function(t,i){e.nextTick((function(){if(n[Jn]){i(n[Jn])}else{t(ei(undefined,true))}}))}))}var s=this[Kn];var r;if(s){r=new Promise(si(s,this))}else{var o=this[ti].read();if(o!==null){return Promise.resolve(ei(o,false))}r=new Promise(this[Xn])}this[Kn]=r;return r}},Wn(Bn,Symbol.asyncIterator,(function(){return this})),Wn(Bn,"return",(function t(){var e=this;return new Promise((function(t,n){e[ti].destroy(null,(function(e){if(e){n(e);return}t(ei(undefined,true))}))}))})),Bn),ri);var ai=function t(e){var n;var i=Object.create(oi,(n={},Wn(n,ti,{value:e,writable:true}),Wn(n,Gn,{value:null,writable:true}),Wn(n,Yn,{value:null,writable:true}),Wn(n,Jn,{value:null,writable:true}),Wn(n,Qn,{value:e._readableState.endEmitted,writable:true}),Wn(n,Xn,{value:function t(e,n){var s=i[ti].read();if(s){i[Kn]=null;i[Gn]=null;i[Yn]=null;e(ei(s,false))}else{i[Gn]=e;i[Yn]=n}},writable:true}),n));i[Kn]=null;Fn(e,(function(t){if(t&&t.code!=="ERR_STREAM_PREMATURE_CLOSE"){var e=i[Yn];if(e!==null){i[Kn]=null;i[Gn]=null;i[Yn]=null;e(t)}i[Jn]=t;return}var n=i[Gn];if(n!==null){i[Kn]=null;i[Gn]=null;i[Yn]=null;n(ei(undefined,true))}i[Qn]=true}));e.on("readable",ii.bind(null,i));return i};var ui=ai;var ci=function(){throw new Error("Readable.from is not available in the browser")};var hi=Ri;var li;Ri.ReadableState=Di;var fi=function t(e,n){return e.listeners(n).length};var di=Kt;var vi=t.Buffer;var wi=(typeof n!=="undefined"?n:typeof window!=="undefined"?window:typeof self!=="undefined"?self:{}).Uint8Array||function(){};function pi(t){return vi.from(t)}function bi(t){return vi.isBuffer(t)||t instanceof wi}var mi=o;var gi;if(mi&&mi.debuglog){gi=mi.debuglog("stream")}else{gi=function t(){}}var yi=de;var ki=ye;var Ei=Le,_i=Ei.getHighWaterMark;var Mi=ke.codes,Ci=Mi.ERR_INVALID_ARG_TYPE,ji=Mi.ERR_STREAM_PUSH_AFTER_EOF,xi=Mi.ERR_METHOD_NOT_IMPLEMENTED,Si=Mi.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;var Ii;var Ai;var Oi;Te.exports(Ri,di);var Li=ki.errorOrDestroy;var Ti=["error","close","destroy","pause","resume"];function Ni(t,e,n){if(typeof t.prependListener==="function")return t.prependListener(e,n);if(!t._events||!t._events[e])t.on(e,n);else if(Array.isArray(t._events[e]))t._events[e].unshift(n);else t._events[e]=[n,t._events[e]]}function Di(t,e,n){li=li||Sn;t=t||{};if(typeof n!=="boolean")n=e instanceof li;this.objectMode=!!t.objectMode;if(n)this.objectMode=this.objectMode||!!t.readableObjectMode;this.highWaterMark=_i(this,t,"readableHighWaterMark",n);this.buffer=new yi;this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.ended=false;this.endEmitted=false;this.reading=false;this.sync=true;this.needReadable=false;this.emittedReadable=false;this.readableListening=false;this.resumeScheduled=false;this.paused=true;this.emitClose=t.emitClose!==false;this.autoDestroy=!!t.autoDestroy;this.destroyed=false;this.defaultEncoding=t.defaultEncoding||"utf8";this.awaitDrain=0;this.readingMore=false;this.decoder=null;this.encoding=null;if(t.encoding){if(!Ii)Ii=u.StringDecoder;this.decoder=new Ii(t.encoding);this.encoding=t.encoding}}function Ri(t){li=li||Sn;if(!(this instanceof Ri))return new Ri(t);var e=this instanceof li;this._readableState=new Di(t,this,e);this.readable=true;if(t){if(typeof t.read==="function")this._read=t.read;if(typeof t.destroy==="function")this._destroy=t.destroy}di.call(this)}Object.defineProperty(Ri.prototype,"destroyed",{enumerable:false,get:function t(){if(this._readableState===undefined){return false}return this._readableState.destroyed},set:function t(e){if(!this._readableState){return}this._readableState.destroyed=e}});Ri.prototype.destroy=ki.destroy;Ri.prototype._undestroy=ki.undestroy;Ri.prototype._destroy=function(t,e){e(t)};Ri.prototype.push=function(t,e){var n=this._readableState;var i;if(!n.objectMode){if(typeof t==="string"){e=e||n.defaultEncoding;if(e!==n.encoding){t=vi.from(t,e);e=""}i=true}}else{i=true}return Pi(this,t,e,false,i)};Ri.prototype.unshift=function(t){return Pi(this,t,null,true,false)};function Pi(t,e,n,i,s){gi("readableAddChunk",e);var r=t._readableState;if(e===null){r.reading=false;Bi(t,r)}else{var o;if(!s)o=Hi(r,e);if(o){Li(t,o)}else if(r.objectMode||e&&e.length>0){if(typeof e!=="string"&&!r.objectMode&&Object.getPrototypeOf(e)!==vi.prototype){e=pi(e)}if(i){if(r.endEmitted)Li(t,new Si);else Ui(t,r,e,true)}else if(r.ended){Li(t,new ji)}else if(r.destroyed){return false}else{r.reading=false;if(r.decoder&&!n){e=r.decoder.write(e);if(r.objectMode||e.length!==0)Ui(t,r,e,false);else $i(t,r)}else{Ui(t,r,e,false)}}}else if(!i){r.reading=false;$i(t,r)}}return!r.ended&&(r.length<r.highWaterMark||r.length===0)}function Ui(t,e,n,i){if(e.flowing&&e.length===0&&!e.sync){e.awaitDrain=0;t.emit("data",n)}else{e.length+=e.objectMode?1:n.length;if(i)e.buffer.unshift(n);else e.buffer.push(n);if(e.needReadable)Wi(t)}$i(t,e)}function Hi(t,e){var n;if(!bi(e)&&typeof e!=="string"&&e!==undefined&&!t.objectMode){n=new Ci("chunk",["string","Buffer","Uint8Array"],e)}return n}Ri.prototype.isPaused=function(){return this._readableState.flowing===false};Ri.prototype.setEncoding=function(t){if(!Ii)Ii=u.StringDecoder;var e=new Ii(t);this._readableState.decoder=e;this._readableState.encoding=this._readableState.decoder.encoding;var n=this._readableState.buffer.head;var i="";while(n!==null){i+=e.write(n.data);n=n.next}this._readableState.buffer.clear();if(i!=="")this._readableState.buffer.push(i);this._readableState.length=i.length;return this};var Vi=1073741824;function Zi(t){if(t>=Vi){t=Vi}else{t--;t|=t>>>1;t|=t>>>2;t|=t>>>4;t|=t>>>8;t|=t>>>16;t++}return t}function zi(t,e){if(t<=0||e.length===0&&e.ended)return 0;if(e.objectMode)return 1;if(t!==t){if(e.flowing&&e.length)return e.buffer.head.data.length;else return e.length}if(t>e.highWaterMark)e.highWaterMark=Zi(t);if(t<=e.length)return t;if(!e.ended){e.needReadable=true;return 0}return e.length}Ri.prototype.read=function(t){gi("read",t);t=parseInt(t,10);var e=this._readableState;var n=t;if(t!==0)e.emittedReadable=false;if(t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended)){gi("read: emitReadable",e.length,e.ended);if(e.length===0&&e.ended)es(this);else Wi(this);return null}t=zi(t,e);if(t===0&&e.ended){if(e.length===0)es(this);return null}var i=e.needReadable;gi("need readable",i);if(e.length===0||e.length-t<e.highWaterMark){i=true;gi("length less than watermark",i)}if(e.ended||e.reading){i=false;gi("reading or ended",i)}else if(i){gi("do read");e.reading=true;e.sync=true;if(e.length===0)e.needReadable=true;this._read(e.highWaterMark);e.sync=false;if(!e.reading)t=zi(n,e)}var s;if(t>0)s=ts(t,e);else s=null;if(s===null){e.needReadable=e.length<=e.highWaterMark;t=0}else{e.length-=t;e.awaitDrain=0}if(e.length===0){if(!e.ended)e.needReadable=true;if(n!==t&&e.ended)es(this)}if(s!==null)this.emit("data",s);return s};function Bi(t,e){gi("onEofChunk");if(e.ended)return;if(e.decoder){var n=e.decoder.end();if(n&&n.length){e.buffer.push(n);e.length+=e.objectMode?1:n.length}}e.ended=true;if(e.sync){Wi(t)}else{e.needReadable=false;if(!e.emittedReadable){e.emittedReadable=true;qi(t)}}}function Wi(t){var n=t._readableState;gi("emitReadable",n.needReadable,n.emittedReadable);n.needReadable=false;if(!n.emittedReadable){gi("emitReadable",n.flowing);n.emittedReadable=true;e.nextTick(qi,t)}}function qi(t){var e=t._readableState;gi("emitReadable_",e.destroyed,e.length,e.ended);if(!e.destroyed&&(e.length||e.ended)){t.emit("readable");e.emittedReadable=false}e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark;Xi(t)}function $i(t,n){if(!n.readingMore){n.readingMore=true;e.nextTick(Fi,t,n)}}function Fi(t,e){while(!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0)){var n=e.length;gi("maybeReadMore read 0");t.read(0);if(n===e.length)break}e.readingMore=false}Ri.prototype._read=function(t){Li(this,new xi("_read()"))};Ri.prototype.pipe=function(t,n){var i=this;var s=this._readableState;switch(s.pipesCount){case 0:s.pipes=t;break;case 1:s.pipes=[s.pipes,t];break;default:s.pipes.push(t);break}s.pipesCount+=1;gi("pipe count=%d opts=%j",s.pipesCount,n);var r=(!n||n.end!==false)&&t!==e.stdout&&t!==e.stderr;var o=r?u:p;if(s.endEmitted)e.nextTick(o);else i.once("end",o);t.on("unpipe",a);function a(t,e){gi("onunpipe");if(t===i){if(e&&e.hasUnpiped===false){e.hasUnpiped=true;l()}}}function u(){gi("onend");t.end()}var c=Gi(i);t.on("drain",c);var h=false;function l(){gi("cleanup");t.removeListener("close",v);t.removeListener("finish",w);t.removeListener("drain",c);t.removeListener("error",d);t.removeListener("unpipe",a);i.removeListener("end",u);i.removeListener("end",p);i.removeListener("data",f);h=true;if(s.awaitDrain&&(!t._writableState||t._writableState.needDrain))c()}i.on("data",f);function f(e){gi("ondata");var n=t.write(e);gi("dest.write",n);if(n===false){if((s.pipesCount===1&&s.pipes===t||s.pipesCount>1&&is(s.pipes,t)!==-1)&&!h){gi("false write response, pause",s.awaitDrain);s.awaitDrain++}i.pause()}}function d(e){gi("onerror",e);p();t.removeListener("error",d);if(fi(t,"error")===0)Li(t,e)}Ni(t,"error",d);function v(){t.removeListener("finish",w);p()}t.once("close",v);function w(){gi("onfinish");t.removeListener("close",v);p()}t.once("finish",w);function p(){gi("unpipe");i.unpipe(t)}t.emit("pipe",i);if(!s.flowing){gi("pipe resume");i.resume()}return t};function Gi(t){return function e(){var n=t._readableState;gi("pipeOnDrain",n.awaitDrain);if(n.awaitDrain)n.awaitDrain--;if(n.awaitDrain===0&&fi(t,"data")){n.flowing=true;Xi(t)}}}Ri.prototype.unpipe=function(t){var e=this._readableState;var n={hasUnpiped:false};if(e.pipesCount===0)return this;if(e.pipesCount===1){if(t&&t!==e.pipes)return this;if(!t)t=e.pipes;e.pipes=null;e.pipesCount=0;e.flowing=false;if(t)t.emit("unpipe",this,n);return this}if(!t){var i=e.pipes;var s=e.pipesCount;e.pipes=null;e.pipesCount=0;e.flowing=false;for(var r=0;r<s;r++)i[r].emit("unpipe",this,{hasUnpiped:false});return this}var o=is(e.pipes,t);if(o===-1)return this;e.pipes.splice(o,1);e.pipesCount-=1;if(e.pipesCount===1)e.pipes=e.pipes[0];t.emit("unpipe",this,n);return this};Ri.prototype.on=function(t,n){var i=di.prototype.on.call(this,t,n);var s=this._readableState;if(t==="data"){s.readableListening=this.listenerCount("readable")>0;if(s.flowing!==false)this.resume()}else if(t==="readable"){if(!s.endEmitted&&!s.readableListening){s.readableListening=s.needReadable=true;s.flowing=false;s.emittedReadable=false;gi("on readable",s.length,s.reading);if(s.length){Wi(this)}else if(!s.reading){e.nextTick(Ji,this)}}}return i};Ri.prototype.addListener=Ri.prototype.on;Ri.prototype.removeListener=function(t,n){var i=di.prototype.removeListener.call(this,t,n);if(t==="readable"){e.nextTick(Yi,this)}return i};Ri.prototype.removeAllListeners=function(t){var n=di.prototype.removeAllListeners.apply(this,arguments);if(t==="readable"||t===undefined){e.nextTick(Yi,this)}return n};function Yi(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0;if(e.resumeScheduled&&!e.paused){e.flowing=true}else if(t.listenerCount("data")>0){t.resume()}}function Ji(t){gi("readable nexttick read 0");t.read(0)}Ri.prototype.resume=function(){var t=this._readableState;if(!t.flowing){gi("resume");t.flowing=!t.readableListening;Qi(this,t)}t.paused=false;return this};function Qi(t,n){if(!n.resumeScheduled){n.resumeScheduled=true;e.nextTick(Ki,t,n)}}function Ki(t,e){gi("resume",e.reading);if(!e.reading){t.read(0)}e.resumeScheduled=false;t.emit("resume");Xi(t);if(e.flowing&&!e.reading)t.read(0)}Ri.prototype.pause=function(){gi("call pause flowing=%j",this._readableState.flowing);if(this._readableState.flowing!==false){gi("pause");this._readableState.flowing=false;this.emit("pause")}this._readableState.paused=true;return this};function Xi(t){var e=t._readableState;gi("flow",e.flowing);while(e.flowing&&t.read()!==null);}Ri.prototype.wrap=function(t){var e=this;var n=this._readableState;var i=false;t.on("end",(function(){gi("wrapped end");if(n.decoder&&!n.ended){var t=n.decoder.end();if(t&&t.length)e.push(t)}e.push(null)}));t.on("data",(function(s){gi("wrapped data");if(n.decoder)s=n.decoder.write(s);if(n.objectMode&&(s===null||s===undefined))return;else if(!n.objectMode&&(!s||!s.length))return;var r=e.push(s);if(!r){i=true;t.pause()}}));for(var s in t){if(this[s]===undefined&&typeof t[s]==="function"){this[s]=function e(n){return function e(){return t[n].apply(t,arguments)}}(s)}}for(var r=0;r<Ti.length;r++){t.on(Ti[r],this.emit.bind(this,Ti[r]))}this._read=function(e){gi("wrapped _read",e);if(i){i=false;t.resume()}};return this};if(typeof Symbol==="function"){Ri.prototype[Symbol.asyncIterator]=function(){if(Ai===undefined){Ai=ui}return Ai(this)}}Object.defineProperty(Ri.prototype,"readableHighWaterMark",{enumerable:false,get:function t(){return this._readableState.highWaterMark}});Object.defineProperty(Ri.prototype,"readableBuffer",{enumerable:false,get:function t(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(Ri.prototype,"readableFlowing",{enumerable:false,get:function t(){return this._readableState.flowing},set:function t(e){if(this._readableState){this._readableState.flowing=e}}});Ri._fromList=ts;Object.defineProperty(Ri.prototype,"readableLength",{enumerable:false,get:function t(){return this._readableState.length}});function ts(t,e){if(e.length===0)return null;var n;if(e.objectMode)n=e.buffer.shift();else if(!t||t>=e.length){if(e.decoder)n=e.buffer.join("");else if(e.buffer.length===1)n=e.buffer.first();else n=e.buffer.concat(e.length);e.buffer.clear()}else{n=e.buffer.consume(t,e.decoder)}return n}function es(t){var n=t._readableState;gi("endReadable",n.endEmitted);if(!n.endEmitted){n.ended=true;e.nextTick(ns,n,t)}}function ns(t,e){gi("endReadableNT",t.endEmitted,t.length);if(!t.endEmitted&&t.length===0){t.endEmitted=true;e.readable=false;e.emit("end");if(t.autoDestroy){var n=e._writableState;if(!n||n.autoDestroy&&n.finished){e.destroy()}}}}if(typeof Symbol==="function"){Ri.from=function(t,e){if(Oi===undefined){Oi=ci}return Oi(Ri,t,e)}}function is(t,e){for(var n=0,i=t.length;n<i;n++){if(t[n]===e)return n}return-1}var ss=fs;var rs=ke.codes,os=rs.ERR_METHOD_NOT_IMPLEMENTED,as=rs.ERR_MULTIPLE_CALLBACK,us=rs.ERR_TRANSFORM_ALREADY_TRANSFORMING,cs=rs.ERR_TRANSFORM_WITH_LENGTH_0;var hs=Sn;Te.exports(fs,hs);function ls(t,e){var n=this._transformState;n.transforming=false;var i=n.writecb;if(i===null){return this.emit("error",new as)}n.writechunk=null;n.writecb=null;if(e!=null)this.push(e);i(t);var s=this._readableState;s.reading=false;if(s.needReadable||s.length<s.highWaterMark){this._read(s.highWaterMark)}}function fs(t){if(!(this instanceof fs))return new fs(t);hs.call(this,t);this._transformState={afterTransform:ls.bind(this),needTransform:false,transforming:false,writecb:null,writechunk:null,writeencoding:null};this._readableState.needReadable=true;this._readableState.sync=false;if(t){if(typeof t.transform==="function")this._transform=t.transform;if(typeof t.flush==="function")this._flush=t.flush}this.on("prefinish",ds)}function ds(){var t=this;if(typeof this._flush==="function"&&!this._readableState.destroyed){this._flush((function(e,n){vs(t,e,n)}))}else{vs(this,null,null)}}fs.prototype.push=function(t,e){this._transformState.needTransform=false;return hs.prototype.push.call(this,t,e)};fs.prototype._transform=function(t,e,n){n(new os("_transform()"))};fs.prototype._write=function(t,e,n){var i=this._transformState;i.writecb=n;i.writechunk=t;i.writeencoding=e;if(!i.transforming){var s=this._readableState;if(i.needTransform||s.needReadable||s.length<s.highWaterMark)this._read(s.highWaterMark)}};fs.prototype._read=function(t){var e=this._transformState;if(e.writechunk!==null&&!e.transforming){e.transforming=true;this._transform(e.writechunk,e.writeencoding,e.afterTransform)}else{e.needTransform=true}};fs.prototype._destroy=function(t,e){hs.prototype._destroy.call(this,t,(function(t){e(t)}))};function vs(t,e,n){if(e)return t.emit("error",e);if(n!=null)t.push(n);if(t._writableState.length)throw new cs;if(t._transformState.transforming)throw new us;return t.push(null)}var ws=bs;var ps=ss;Te.exports(bs,ps);function bs(t){if(!(this instanceof bs))return new bs(t);ps.call(this,t)}bs.prototype._transform=function(t,e,n){n(null,t)};var ms;function gs(t){var e=false;return function(){if(e)return;e=true;t.apply(void 0,arguments)}}var ys=ke.codes,ks=ys.ERR_MISSING_ARGS,Es=ys.ERR_STREAM_DESTROYED;function _s(t){if(t)throw t}function Ms(t){return t.setHeader&&typeof t.abort==="function"}function Cs(t,e,n,i){i=gs(i);var s=false;t.on("close",(function(){s=true}));if(ms===undefined)ms=zn;ms(t,{readable:e,writable:n},(function(t){if(t)return i(t);s=true;i()}));var r=false;return function(e){if(s)return;if(r)return;r=true;if(Ms(t))return t.abort();if(typeof t.destroy==="function")return t.destroy();i(e||new Es("pipe"))}}function js(t){t()}function xs(t,e){return t.pipe(e)}function Ss(t){if(!t.length)return _s;if(typeof t[t.length-1]!=="function")return _s;return t.pop()}function Is(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++){e[n]=arguments[n]}var i=Ss(e);if(Array.isArray(e[0]))e=e[0];if(e.length<2){throw new ks("streams")}var s;var r=e.map((function(t,n){var o=n<e.length-1;var a=n>0;return Cs(t,o,a,(function(t){if(!s)s=t;if(t)r.forEach(js);if(o)return;r.forEach(js);i(s)}))}));return e.reduce(xs)}var As=Is;(function(t,e){e=t.exports=hi;e.Stream=e;e.Readable=e;e.Writable=Pe;e.Duplex=Sn;e.Transform=ss;e.PassThrough=ws;e.finished=zn;e.pipeline=As})(Qt,Qt.exports);const{Transform:Os}=Qt.exports;var Ls=e=>class n extends Os{constructor(t,n,i,s,r){super(r);this._rate=t;this._capacity=n;this._delimitedSuffix=i;this._hashBitLength=s;this._options=r;this._state=new e;this._state.initialize(t,n);this._finalized=false}_transform(t,e,n){let i=null;try{this.update(t,e)}catch(t){i=t}n(i)}_flush(t){let e=null;try{this.push(this.digest())}catch(t){e=t}t(e)}update(e,n){if(!t.Buffer.isBuffer(e)&&typeof e!=="string")throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Digest already called");if(!t.Buffer.isBuffer(e))e=t.Buffer.from(e,n);this._state.absorb(e);return this}digest(t){if(this._finalized)throw new Error("Digest already called");this._finalized=true;if(this._delimitedSuffix)this._state.absorbLastFewBits(this._delimitedSuffix);let e=this._state.squeeze(this._hashBitLength/8);if(t!==undefined)e=e.toString(t);this._resetState();return e}_resetState(){this._state.initialize(this._rate,this._capacity);return this}_clone(){const t=new n(this._rate,this._capacity,this._delimitedSuffix,this._hashBitLength,this._options);this._state.copy(t._state);t._finalized=this._finalized;return t}};const{Transform:Ts}=Qt.exports;var Ns=e=>class n extends Ts{constructor(t,n,i,s){super(s);this._rate=t;this._capacity=n;this._delimitedSuffix=i;this._options=s;this._state=new e;this._state.initialize(t,n);this._finalized=false}_transform(t,e,n){let i=null;try{this.update(t,e)}catch(t){i=t}n(i)}_flush(){}_read(t){this.push(this.squeeze(t))}update(e,n){if(!t.Buffer.isBuffer(e)&&typeof e!=="string")throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Squeeze already called");if(!t.Buffer.isBuffer(e))e=t.Buffer.from(e,n);this._state.absorb(e);return this}squeeze(t,e){if(!this._finalized){this._finalized=true;this._state.absorbLastFewBits(this._delimitedSuffix)}let n=this._state.squeeze(t);if(e!==undefined)n=n.toString(e);return n}_resetState(){this._state.initialize(this._rate,this._capacity);return this}_clone(){const t=new n(this._rate,this._capacity,this._delimitedSuffix,this._options);this._state.copy(t._state);t._finalized=this._finalized;return t}};const Ds=Ls;const Rs=Ns;var Ps=function(t){const e=Ds(t);const n=Rs(t);return function(t,i){const s=typeof t==="string"?t.toLowerCase():t;switch(s){case"keccak224":return new e(1152,448,null,224,i);case"keccak256":return new e(1088,512,null,256,i);case"keccak384":return new e(832,768,null,384,i);case"keccak512":return new e(576,1024,null,512,i);case"sha3-224":return new e(1152,448,6,224,i);case"sha3-256":return new e(1088,512,6,256,i);case"sha3-384":return new e(832,768,6,384,i);case"sha3-512":return new e(576,1024,6,512,i);case"shake128":return new n(1344,256,31,i);case"shake256":return new n(1088,512,31,i);default:throw new Error("Invald algorithm: "+t)}}};var Us={};const Hs=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648];Us.p1600=function(t){for(let e=0;e<24;++e){const n=t[0]^t[10]^t[20]^t[30]^t[40];const i=t[1]^t[11]^t[21]^t[31]^t[41];const s=t[2]^t[12]^t[22]^t[32]^t[42];const r=t[3]^t[13]^t[23]^t[33]^t[43];const o=t[4]^t[14]^t[24]^t[34]^t[44];const a=t[5]^t[15]^t[25]^t[35]^t[45];const u=t[6]^t[16]^t[26]^t[36]^t[46];const c=t[7]^t[17]^t[27]^t[37]^t[47];const h=t[8]^t[18]^t[28]^t[38]^t[48];const l=t[9]^t[19]^t[29]^t[39]^t[49];let f=h^(s<<1|r>>>31);let d=l^(r<<1|s>>>31);const v=t[0]^f;const w=t[1]^d;const p=t[10]^f;const b=t[11]^d;const m=t[20]^f;const g=t[21]^d;const y=t[30]^f;const k=t[31]^d;const E=t[40]^f;const _=t[41]^d;f=n^(o<<1|a>>>31);d=i^(a<<1|o>>>31);const M=t[2]^f;const C=t[3]^d;const j=t[12]^f;const x=t[13]^d;const S=t[22]^f;const I=t[23]^d;const A=t[32]^f;const O=t[33]^d;const L=t[42]^f;const T=t[43]^d;f=s^(u<<1|c>>>31);d=r^(c<<1|u>>>31);const N=t[4]^f;const D=t[5]^d;const R=t[14]^f;const P=t[15]^d;const U=t[24]^f;const H=t[25]^d;const V=t[34]^f;const Z=t[35]^d;const z=t[44]^f;const B=t[45]^d;f=o^(h<<1|l>>>31);d=a^(l<<1|h>>>31);const W=t[6]^f;const q=t[7]^d;const $=t[16]^f;const F=t[17]^d;const G=t[26]^f;const Y=t[27]^d;const J=t[36]^f;const Q=t[37]^d;const K=t[46]^f;const X=t[47]^d;f=u^(n<<1|i>>>31);d=c^(i<<1|n>>>31);const tt=t[8]^f;const et=t[9]^d;const nt=t[18]^f;const it=t[19]^d;const st=t[28]^f;const rt=t[29]^d;const ot=t[38]^f;const at=t[39]^d;const ut=t[48]^f;const ct=t[49]^d;const ht=v;const lt=w;const ft=b<<4|p>>>28;const dt=p<<4|b>>>28;const vt=m<<3|g>>>29;const wt=g<<3|m>>>29;const pt=k<<9|y>>>23;const bt=y<<9|k>>>23;const mt=E<<18|_>>>14;const gt=_<<18|E>>>14;const yt=M<<1|C>>>31;const kt=C<<1|M>>>31;const Et=x<<12|j>>>20;const _t=j<<12|x>>>20;const Mt=S<<10|I>>>22;const Ct=I<<10|S>>>22;const jt=O<<13|A>>>19;const xt=A<<13|O>>>19;const St=L<<2|T>>>30;const It=T<<2|L>>>30;const At=D<<30|N>>>2;const Ot=N<<30|D>>>2;const Lt=R<<6|P>>>26;const Tt=P<<6|R>>>26;const Nt=H<<11|U>>>21;const Dt=U<<11|H>>>21;const Rt=V<<15|Z>>>17;const Pt=Z<<15|V>>>17;const Ut=B<<29|z>>>3;const Ht=z<<29|B>>>3;const Vt=W<<28|q>>>4;const Zt=q<<28|W>>>4;const zt=F<<23|$>>>9;const Bt=$<<23|F>>>9;const Wt=G<<25|Y>>>7;const qt=Y<<25|G>>>7;const $t=J<<21|Q>>>11;const Ft=Q<<21|J>>>11;const Gt=X<<24|K>>>8;const Yt=K<<24|X>>>8;const Jt=tt<<27|et>>>5;const Qt=et<<27|tt>>>5;const Kt=nt<<20|it>>>12;const Xt=it<<20|nt>>>12;const te=rt<<7|st>>>25;const ee=st<<7|rt>>>25;const ne=ot<<8|at>>>24;const ie=at<<8|ot>>>24;const se=ut<<14|ct>>>18;const re=ct<<14|ut>>>18;t[0]=ht^~Et&Nt;t[1]=lt^~_t&Dt;t[10]=Vt^~Kt&vt;t[11]=Zt^~Xt&wt;t[20]=yt^~Lt&Wt;t[21]=kt^~Tt&qt;t[30]=Jt^~ft&Mt;t[31]=Qt^~dt&Ct;t[40]=At^~zt&te;t[41]=Ot^~Bt&ee;t[2]=Et^~Nt&$t;t[3]=_t^~Dt&Ft;t[12]=Kt^~vt&jt;t[13]=Xt^~wt&xt;t[22]=Lt^~Wt&ne;t[23]=Tt^~qt&ie;t[32]=ft^~Mt&Rt;t[33]=dt^~Ct&Pt;t[42]=zt^~te&pt;t[43]=Bt^~ee&bt;t[4]=Nt^~$t&se;t[5]=Dt^~Ft&re;t[14]=vt^~jt&Ut;t[15]=wt^~xt&Ht;t[24]=Wt^~ne&mt;t[25]=qt^~ie&gt;t[34]=Mt^~Rt&Gt;t[35]=Ct^~Pt&Yt;t[44]=te^~pt&St;t[45]=ee^~bt&It;t[6]=$t^~se&ht;t[7]=Ft^~re&lt;t[16]=jt^~Ut&Vt;t[17]=xt^~Ht&Zt;t[26]=ne^~mt&yt;t[27]=ie^~gt&kt;t[36]=Rt^~Gt&Jt;t[37]=Pt^~Yt&Qt;t[46]=pt^~St&At;t[47]=bt^~It&Ot;t[8]=se^~ht&Et;t[9]=re^~lt&_t;t[18]=Ut^~Vt&Kt;t[19]=Ht^~Zt&Xt;t[28]=mt^~yt&Lt;t[29]=gt^~kt&Tt;t[38]=Gt^~Jt&ft;t[39]=Yt^~Qt&dt;t[48]=St^~At&zt;t[49]=It^~Ot&Bt;t[0]^=Hs[e*2];t[1]^=Hs[e*2+1]}};const Vs=Us;function Zs(){this.state=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.blockSize=null;this.count=0;this.squeezing=false}Zs.prototype.initialize=function(t,e){for(let t=0;t<50;++t)this.state[t]=0;this.blockSize=t/8;this.count=0;this.squeezing=false};Zs.prototype.absorb=function(t){for(let e=0;e<t.length;++e){this.state[~~(this.count/4)]^=t[e]<<8*(this.count%4);this.count+=1;if(this.count===this.blockSize){Vs.p1600(this.state);this.count=0}}};Zs.prototype.absorbLastFewBits=function(t){this.state[~~(this.count/4)]^=t<<8*(this.count%4);if((t&128)!==0&&this.count===this.blockSize-1)Vs.p1600(this.state);this.state[~~((this.blockSize-1)/4)]^=128<<8*((this.blockSize-1)%4);Vs.p1600(this.state);this.count=0;this.squeezing=true};Zs.prototype.squeeze=function(e){if(!this.squeezing)this.absorbLastFewBits(1);const n=t.Buffer.alloc(e);for(let t=0;t<e;++t){n[t]=this.state[~~(this.count/4)]>>>8*(this.count%4)&255;this.count+=1;if(this.count===this.blockSize){Vs.p1600(this.state);this.count=0}}return n};Zs.prototype.copy=function(t){for(let e=0;e<50;++e)t.state[e]=this.state[e];t.blockSize=this.blockSize;t.count=this.count;t.squeezing=this.squeezing};var zs=Zs;var Bs=Ps(zs);const Ws=Bs;function qs(e){return t.Buffer.allocUnsafe(e).fill(0)}function $s(t){return t.toString(2).length}function Fs(e,n){let i=e.toString(16);if(i.length%2!==0)i="0"+i;const s=i.match(/.{1,2}/g).map((t=>parseInt(t,16)));while(s.length<n){s.unshift(0)}return t.Buffer.from(s)}function Gs(t,e){const n=t<0n;let i;if(n){const n=(1n<<BigInt(e))-1n;i=(~t&n)+1n}else{i=t}i&=(1n<<BigInt(e))-1n;return i}function Ys(t,e,n){const i=qs(e);t=Qs(t);if(n){if(t.length<e){t.copy(i);return i}return t.slice(0,e)}else{if(t.length<e){t.copy(i,e-t.length);return i}return t.slice(-e)}}function Js(t,e){return Ys(t,e,true)}function Qs(e){if(!t.Buffer.isBuffer(e)){if(Array.isArray(e)){e=t.Buffer.from(e)}else if(typeof e==="string"){if(er(e)){e=t.Buffer.from(tr(nr(e)),"hex")}else{e=t.Buffer.from(e)}}else if(typeof e==="number"){e=intToBuffer(e)}else if(e===null||e===undefined){e=t.Buffer.allocUnsafe(0)}else if(typeof e==="bigint"){e=Fs(e)}else if(e.toArray){e=t.Buffer.from(e.toArray())}else{throw new Error("invalid type")}}return e}function Ks(t){t=Qs(t);return"0x"+t.toString("hex")}function Xs(t,e){t=Qs(t);if(!e)e=256;return Ws("keccak"+e).update(t).digest()}function tr(t){return t.length%2?"0"+t:t}function er(t){return typeof t==="string"&&t.match(/^0x[0-9A-Fa-f]*$/)}function nr(t){if(typeof t==="string"&&t.startsWith("0x")){return t.slice(2)}return t}var ir={zeros:qs,setLength:Ys,setLengthRight:Js,isHexString:er,stripHexPrefix:nr,toBuffer:Qs,bufferToHex:Ks,keccak:Xs,bitLengthFromBigInt:$s,bufferBEFromBigInt:Fs,twosFromBigInt:Gs};const sr=ir;function rr(t){if(t.startsWith("int[")){return"int256"+t.slice(3)}else if(t==="int"){return"int256"}else if(t.startsWith("uint[")){return"uint256"+t.slice(4)}else if(t==="uint"){return"uint256"}else if(t.startsWith("fixed[")){return"fixed128x128"+t.slice(5)}else if(t==="fixed"){return"fixed128x128"}else if(t.startsWith("ufixed[")){return"ufixed128x128"+t.slice(6)}else if(t==="ufixed"){return"ufixed128x128"}return t}function or(t){return parseInt(/^\D+(\d+)$/.exec(t)[1],10)}function ar(t){var e=/^\D+(\d+)x(\d+)$/.exec(t);return[parseInt(e[1],10),parseInt(e[2],10)]}function ur(t){var e=t.match(/(.*)\[(.*?)\]$/);if(e){return e[2]===""?"dynamic":parseInt(e[2],10)}return null}function cr(t){var e=typeof t;if(e==="string"||e==="number"){return BigInt(t)}else if(e==="bigint"){return t}else{throw new Error("Argument is not a number")}}function hr(e,n){var i,s,r,o;if(e==="address"){return hr("uint160",cr(n))}else if(e==="bool"){return hr("uint8",n?1:0)}else if(e==="string"){return hr("bytes",new t.Buffer(n,"utf8"))}else if(fr(e)){if(typeof n.length==="undefined"){throw new Error("Not an array?")}i=ur(e);if(i!=="dynamic"&&i!==0&&n.length>i){throw new Error("Elements exceed array size: "+i)}r=[];e=e.slice(0,e.lastIndexOf("["));if(typeof n==="string"){n=JSON.parse(n)}for(o in n){r.push(hr(e,n[o]))}if(i==="dynamic"){var a=hr("uint256",n.length);r.unshift(a)}return t.Buffer.concat(r)}else if(e==="bytes"){n=new t.Buffer(n);r=t.Buffer.concat([hr("uint256",n.length),n]);if(n.length%32!==0){r=t.Buffer.concat([r,sr.zeros(32-n.length%32)])}return r}else if(e.startsWith("bytes")){i=or(e);if(i<1||i>32){throw new Error("Invalid bytes<N> width: "+i)}return sr.setLengthRight(n,32)}else if(e.startsWith("uint")){i=or(e);if(i%8||i<8||i>256){throw new Error("Invalid uint<N> width: "+i)}s=cr(n);const t=sr.bitLengthFromBigInt(s);if(t>i){throw new Error("Supplied uint exceeds width: "+i+" vs "+t)}if(s<0){throw new Error("Supplied uint is negative")}return sr.bufferBEFromBigInt(s,32)}else if(e.startsWith("int")){i=or(e);if(i%8||i<8||i>256){throw new Error("Invalid int<N> width: "+i)}s=cr(n);const t=sr.bitLengthFromBigInt(s);if(t>i){throw new Error("Supplied int exceeds width: "+i+" vs "+t)}const r=sr.twosFromBigInt(s,256);return sr.bufferBEFromBigInt(r,32)}else if(e.startsWith("ufixed")){i=ar(e);s=cr(n);if(s<0){throw new Error("Supplied ufixed is negative")}return hr("uint256",s*BigInt(2)**BigInt(i[1]))}else if(e.startsWith("fixed")){i=ar(e);return hr("int256",cr(n)*BigInt(2)**BigInt(i[1]))}throw new Error("Unsupported or invalid type: "+e)}function lr(t){return t==="string"||t==="bytes"||ur(t)==="dynamic"}function fr(t){return t.lastIndexOf("]")===t.length-1}function dr(e,n){var i=[];var s=[];var r=32*e.length;for(var o in e){var a=rr(e[o]);var u=n[o];var c=hr(a,u);if(lr(a)){i.push(hr("uint256",r));s.push(c);r+=c.length}else{i.push(c)}}return t.Buffer.concat(i.concat(s))}function vr(e,n){if(e.length!==n.length){throw new Error("Number of types are not matching the values")}var i,s;var r=[];for(var o=0;o<e.length;o++){var a=rr(e[o]);var u=n[o];if(a==="bytes"){r.push(u)}else if(a==="string"){r.push(new t.Buffer(u,"utf8"))}else if(a==="bool"){r.push(new t.Buffer(u?"01":"00","hex"))}else if(a==="address"){r.push(sr.setLength(u,20))}else if(a.startsWith("bytes")){i=or(a);if(i<1||i>32){throw new Error("Invalid bytes<N> width: "+i)}r.push(sr.setLengthRight(u,i))}else if(a.startsWith("uint")){i=or(a);if(i%8||i<8||i>256){throw new Error("Invalid uint<N> width: "+i)}s=cr(u);const t=sr.bitLengthFromBigInt(s);if(t>i){throw new Error("Supplied uint exceeds width: "+i+" vs "+t)}r.push(sr.bufferBEFromBigInt(s,i/8))}else if(a.startsWith("int")){i=or(a);if(i%8||i<8||i>256){throw new Error("Invalid int<N> width: "+i)}s=cr(u);const t=sr.bitLengthFromBigInt(s);if(t>i){throw new Error("Supplied int exceeds width: "+i+" vs "+t)}const e=sr.twosFromBigInt(s,i);r.push(sr.bufferBEFromBigInt(e,i/8))}else{throw new Error("Unsupported or invalid type: "+a)}}return t.Buffer.concat(r)}function wr(t,e){return sr.keccak(vr(t,e))}var pr={rawEncode:dr,solidityPack:vr,soliditySHA3:wr};const br=ir;const mr=pr;const gr={type:"object",properties:{types:{type:"object",additionalProperties:{type:"array",items:{type:"object",properties:{name:{type:"string"},type:{type:"string"}},required:["name","type"]}}},primaryType:{type:"string"},domain:{type:"object"},message:{type:"object"}},required:["types","primaryType","domain","message"]};const yr={encodeData(e,n,i,s=true){const r=["bytes32"];const o=[this.hashType(e,i)];if(s){const a=(e,n,r)=>{if(i[n]!==undefined){return["bytes32",r==null?"0x0000000000000000000000000000000000000000000000000000000000000000":br.keccak(this.encodeData(n,r,i,s))]}if(r===undefined)throw new Error(`missing value for field ${e} of type ${n}`);if(n==="bytes"){return["bytes32",br.keccak(r)]}if(n==="string"){if(typeof r==="string"){r=t.Buffer.from(r,"utf8")}return["bytes32",br.keccak(r)]}if(n.lastIndexOf("]")===n.length-1){const t=n.slice(0,n.lastIndexOf("["));const i=r.map((n=>a(e,t,n)));return["bytes32",br.keccak(mr.rawEncode(i.map((([t])=>t)),i.map((([,t])=>t))))]}return[n,r]};for(const t of i[e]){const[e,i]=a(t.name,t.type,n[t.name]);r.push(e);o.push(i)}}else{for(const a of i[e]){let e=n[a.name];if(e!==undefined){if(a.type==="bytes"){r.push("bytes32");e=br.keccak(e);o.push(e)}else if(a.type==="string"){r.push("bytes32");if(typeof e==="string"){e=t.Buffer.from(e,"utf8")}e=br.keccak(e);o.push(e)}else if(i[a.type]!==undefined){r.push("bytes32");e=br.keccak(this.encodeData(a.type,e,i,s));o.push(e)}else if(a.type.lastIndexOf("]")===a.type.length-1){throw new Error("Arrays currently unimplemented in encodeData")}else{r.push(a.type);o.push(e)}}}}return mr.rawEncode(r,o)},encodeType(t,e){let n="";let i=this.findTypeDependencies(t,e).filter((e=>e!==t));i=[t].concat(i.sort());for(const t of i){const i=e[t];if(!i){throw new Error("No type definition specified: "+t)}n+=t+"("+e[t].map((({name:t,type:e})=>e+" "+t)).join(",")+")"}return n},findTypeDependencies(t,e,n=[]){t=t.match(/^\w*/)[0];if(n.includes(t)||e[t]===undefined){return n}n.push(t);for(const i of e[t]){for(const t of this.findTypeDependencies(i.type,e,n)){!n.includes(t)&&n.push(t)}}return n},hashStruct(t,e,n,i=true){return br.keccak(this.encodeData(t,e,n,i))},hashType(t,e){return br.keccak(this.encodeType(t,e))},sanitizeData(t){const e={};for(const n in gr.properties){t[n]&&(e[n]=t[n])}if(e.types){e.types=Object.assign({EIP712Domain:[]},e.types)}return e},hash(e,n=true){const i=this.sanitizeData(e);const s=[t.Buffer.from("1901","hex")];s.push(this.hashStruct("EIP712Domain",i.domain,i.types,n));if(i.primaryType!=="EIP712Domain"){s.push(this.hashStruct(i.primaryType,i.message,i.types,n))}return br.keccak(t.Buffer.concat(s))}};var kr={TYPED_MESSAGE_SCHEMA:gr,TypedDataUtils:yr,hashForSignTypedDataLegacy:function(t){return Er(t.data)},hashForSignTypedData_v3:function(t){return yr.hash(t.data,false)},hashForSignTypedData_v4:function(t){return yr.hash(t.data)}};function Er(t){const e=new Error("Expect argument to be non-empty array");if(typeof t!=="object"||!t.length)throw e;const n=t.map((function(t){return t.type==="bytes"?br.toBuffer(t.value):t.value}));const i=t.map((function(t){return t.type}));const s=t.map((function(t){if(!t.name)throw e;return t.type+" "+t.name}));return mr.soliditySHA3(["bytes32","bytes32"],[mr.soliditySHA3(new Array(t.length).fill("string"),s),mr.soliditySHA3(i,n)])}var _r={};Object.defineProperty(_r,"__esModule",{value:true});_r.APP_VERSION_KEY=_r.LOCAL_STORAGE_ADDRESSES_KEY=_r.WALLET_USER_NAME_KEY=void 0;_r.WALLET_USER_NAME_KEY="walletUsername";_r.LOCAL_STORAGE_ADDRESSES_KEY="Addresses";_r.APP_VERSION_KEY="AppVersion";var Mr={};Object.defineProperty(Mr,"__esModule",{value:true});Mr.RelayEventManager=void 0;const Cr=Z;class jr{constructor(){this._nextRequestId=0;this.callbacks=new Map}makeRequestId(){this._nextRequestId=(this._nextRequestId+1)%2147483647;const t=this._nextRequestId;const e=(0,Cr.prepend0x)(t.toString(16));const n=this.callbacks.get(e);if(n){this.callbacks.delete(e)}return t}}Mr.RelayEventManager=jr;var xr={};var Sr={};var Ir={};Object.defineProperty(Ir,"__esModule",{value:true});Ir.WalletLinkCipher=void 0;const Ar=Z;class Or{constructor(t){this.secret=t}async encrypt(t){const e=this.secret;if(e.length!==64)throw Error(`secret must be 256 bits`);const n=crypto.getRandomValues(new Uint8Array(12));const i=await crypto.subtle.importKey("raw",(0,Ar.hexStringToUint8Array)(e),{name:"aes-gcm"},false,["encrypt","decrypt"]);const s=new TextEncoder;const r=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:n},i,s.encode(t));const o=16;const a=r.slice(r.byteLength-o);const u=r.slice(0,r.byteLength-o);const c=new Uint8Array(a);const h=new Uint8Array(u);const l=new Uint8Array([...n,...c,...h]);return(0,Ar.uint8ArrayToHex)(l)}async decrypt(t){const e=this.secret;if(e.length!==64)throw Error(`secret must be 256 bits`);return new Promise(((n,i)=>{void async function(){const s=await crypto.subtle.importKey("raw",(0,Ar.hexStringToUint8Array)(e),{name:"aes-gcm"},false,["encrypt","decrypt"]);const r=(0,Ar.hexStringToUint8Array)(t);const o=r.slice(0,12);const a=r.slice(12,28);const u=r.slice(28);const c=new Uint8Array([...u,...a]);const h={name:"AES-GCM",iv:new Uint8Array(o)};try{const t=await window.crypto.subtle.decrypt(h,s,c);const e=new TextDecoder;n(e.decode(t))}catch(t){i(t)}}()}))}}Ir.WalletLinkCipher=Or;var Lr={};Object.defineProperty(Lr,"__esModule",{value:true});Lr.WalletLinkHTTP=void 0;class Tr{constructor(t,e,n){this.linkAPIUrl=t;this.sessionId=e;const i=`${e}:${n}`;this.auth=`Basic ${btoa(i)}`}async markUnseenEventsAsSeen(t){return Promise.all(t.map((t=>fetch(`${this.linkAPIUrl}/events/${t.eventId}/seen`,{method:"POST",headers:{Authorization:this.auth}})))).catch((t=>console.error("Unabled to mark event as failed:",t)))}async fetchUnseenEvents(){var t;const e=await fetch(`${this.linkAPIUrl}/events?unseen=true`,{headers:{Authorization:this.auth}});if(e.ok){const{events:n,error:i}=await e.json();if(i){throw new Error(`Check unseen events failed: ${i}`)}const s=(t=n===null||n===void 0?void 0:n.filter((t=>t.event==="Web3Response")).map((t=>({type:"Event",sessionId:this.sessionId,eventId:t.id,event:t.event,data:t.data}))))!==null&&t!==void 0?t:[];this.markUnseenEventsAsSeen(s);return s}throw new Error(`Check unseen events failed: ${e.status}`)}}Lr.WalletLinkHTTP=Tr;var Nr={};Object.defineProperty(Nr,"__esModule",{value:true});Nr.WalletLinkWebSocket=Nr.ConnectionState=void 0;var Dr;(function(t){t[t["DISCONNECTED"]=0]="DISCONNECTED";t[t["CONNECTING"]=1]="CONNECTING";t[t["CONNECTED"]=2]="CONNECTED"})(Dr||(Nr.ConnectionState=Dr={}));class Rr{setConnectionStateListener(t){this.connectionStateListener=t}setIncomingDataListener(t){this.incomingDataListener=t}constructor(t,e=WebSocket){this.WebSocketClass=e;this.webSocket=null;this.pendingData=[];this.url=t.replace(/^http/,"ws")}async connect(){if(this.webSocket){throw new Error("webSocket object is not null")}return new Promise(((t,e)=>{var n;let i;try{this.webSocket=i=new this.WebSocketClass(this.url)}catch(t){e(t);return}(n=this.connectionStateListener)===null||n===void 0?void 0:n.call(this,Dr.CONNECTING);i.onclose=t=>{var n;this.clearWebSocket();e(new Error(`websocket error ${t.code}: ${t.reason}`));(n=this.connectionStateListener)===null||n===void 0?void 0:n.call(this,Dr.DISCONNECTED)};i.onopen=e=>{var n;t();(n=this.connectionStateListener)===null||n===void 0?void 0:n.call(this,Dr.CONNECTED);if(this.pendingData.length>0){const t=[...this.pendingData];t.forEach((t=>this.sendData(t)));this.pendingData=[]}};i.onmessage=t=>{var e,n;if(t.data==="h"){(e=this.incomingDataListener)===null||e===void 0?void 0:e.call(this,{type:"Heartbeat"})}else{try{const e=JSON.parse(t.data);(n=this.incomingDataListener)===null||n===void 0?void 0:n.call(this,e)}catch(t){}}}}))}disconnect(){var t;const{webSocket:e}=this;if(!e){return}this.clearWebSocket();(t=this.connectionStateListener)===null||t===void 0?void 0:t.call(this,Dr.DISCONNECTED);this.connectionStateListener=undefined;this.incomingDataListener=undefined;try{e.close()}catch(t){}}sendData(t){const{webSocket:e}=this;if(!e){this.pendingData.push(t);this.connect();return}e.send(t)}clearWebSocket(){const{webSocket:t}=this;if(!t){return}this.webSocket=null;t.onclose=null;t.onerror=null;t.onmessage=null;t.onopen=null}}Nr.WalletLinkWebSocket=Rr;Object.defineProperty(Sr,"__esModule",{value:true});Sr.WalletLinkConnection=void 0;const Pr=_r;const Ur=Ir;const Hr=Lr;const Vr=Nr;const Zr=U;const zr=1e4;const Br=6e4;class Wr{constructor({session:t,linkAPIUrl:e,listener:n,WebSocketClass:i=WebSocket}){this.destroyed=false;this.lastHeartbeatResponse=0;this.nextReqId=(0,Zr.IntNumber)(1);this._connected=false;this._linked=false;this.shouldFetchUnseenEventsOnConnect=false;this.requestResolutions=new Map;this.handleSessionMetadataUpdated=t=>{if(!t)return;const e=new Map([["__destroyed",this.handleDestroyed],["EthereumAddress",this.handleAccountUpdated],["WalletUsername",this.handleWalletUsernameUpdated],["AppVersion",this.handleAppVersionUpdated],["ChainId",e=>t.JsonRpcUrl&&this.handleChainUpdated(e,t.JsonRpcUrl)]]);e.forEach(((e,n)=>{const i=t[n];if(i===undefined)return;e(i)}))};this.handleDestroyed=t=>{var e;if(t!=="1")return;(e=this.listener)===null||e===void 0?void 0:e.resetAndReload()};this.handleAccountUpdated=async t=>{var e;{const n=await this.cipher.decrypt(t);(e=this.listener)===null||e===void 0?void 0:e.accountUpdated(n)}};this.handleMetadataUpdated=async(t,e)=>{var n;{const i=await this.cipher.decrypt(e);(n=this.listener)===null||n===void 0?void 0:n.metadataUpdated(t,i)}};this.handleWalletUsernameUpdated=async t=>{this.handleMetadataUpdated(Pr.WALLET_USER_NAME_KEY,t)};this.handleAppVersionUpdated=async t=>{this.handleMetadataUpdated(Pr.APP_VERSION_KEY,t)};this.handleChainUpdated=async(t,e)=>{var n;{const i=await this.cipher.decrypt(t);const s=await this.cipher.decrypt(e);(n=this.listener)===null||n===void 0?void 0:n.chainUpdated(i,s)}};this.session=t;this.cipher=new Ur.WalletLinkCipher(t.secret);this.listener=n;const s=new Vr.WalletLinkWebSocket(`${e}/rpc`,i);s.setConnectionStateListener((async t=>{let e=false;switch(t){case Vr.ConnectionState.DISCONNECTED:if(!this.destroyed){const t=async()=>{await new Promise((t=>setTimeout(t,5e3)));if(!this.destroyed){s.connect().catch((()=>{t()}))}};t()}break;case Vr.ConnectionState.CONNECTED:try{await this.authenticate();this.sendIsLinked();this.sendGetSessionConfig();e=true}catch(t){}this.updateLastHeartbeat();setInterval((()=>{this.heartbeat()}),zr);if(this.shouldFetchUnseenEventsOnConnect){this.fetchUnseenEventsAPI()}break}if(this.connected!==e){this.connected=e}}));s.setIncomingDataListener((t=>{var e;switch(t.type){case"Heartbeat":this.updateLastHeartbeat();return;case"IsLinkedOK":case"Linked":{const e=t.type==="IsLinkedOK"?t.linked:undefined;this.linked=e||t.onlineGuests>0;break}case"GetSessionConfigOK":case"SessionConfigUpdated":{this.handleSessionMetadataUpdated(t.metadata);break}case"Event":{this.handleIncomingEvent(t);break}}if(t.id!==undefined){(e=this.requestResolutions.get(t.id))===null||e===void 0?void 0:e(t)}}));this.ws=s;this.http=new Hr.WalletLinkHTTP(e,t.id,t.key)}connect(){if(this.destroyed){throw new Error("instance is destroyed")}this.ws.connect()}destroy(){this.destroyed=true;this.ws.disconnect();this.listener=undefined}get isDestroyed(){return this.destroyed}get connected(){return this._connected}set connected(t){var e;this._connected=t;if(t)(e=this.onceConnected)===null||e===void 0?void 0:e.call(this)}setOnceConnected(t){return new Promise((e=>{if(this.connected){t().then(e)}else{this.onceConnected=()=>{t().then(e);this.onceConnected=undefined}}}))}get linked(){return this._linked}set linked(t){var e,n;this._linked=t;if(t)(e=this.onceLinked)===null||e===void 0?void 0:e.call(this);(n=this.listener)===null||n===void 0?void 0:n.linkedUpdated(t)}setOnceLinked(t){return new Promise((e=>{if(this.linked){t().then(e)}else{this.onceLinked=()=>{t().then(e);this.onceLinked=undefined}}}))}async handleIncomingEvent(t){var e;if(t.type!=="Event"||t.event!=="Web3Response"){return}{const n=await this.cipher.decrypt(t.data);const i=JSON.parse(n);if(i.type!=="WEB3_RESPONSE")return;(e=this.listener)===null||e===void 0?void 0:e.handleWeb3ResponseMessage(i)}}async checkUnseenEvents(){if(!this.connected){this.shouldFetchUnseenEventsOnConnect=true;return}await new Promise((t=>setTimeout(t,250)));try{await this.fetchUnseenEventsAPI()}catch(t){console.error("Unable to check for unseen events",t)}}async fetchUnseenEventsAPI(){this.shouldFetchUnseenEventsOnConnect=false;const t=await this.http.fetchUnseenEvents();t.forEach((t=>this.handleIncomingEvent(t)))}async setSessionMetadata(t,e){const n={type:"SetSessionConfig",id:(0,Zr.IntNumber)(this.nextReqId++),sessionId:this.session.id,metadata:{[t]:e}};return this.setOnceConnected((async()=>{const t=await this.makeRequest(n);if(t.type==="Fail"){throw new Error(t.error||"failed to set session metadata")}}))}async publishEvent(t,e,n=false){const i=await this.cipher.encrypt(JSON.stringify(Object.assign(Object.assign({},e),{origin:location.origin,relaySource:"coinbaseWalletExtension"in window&&window.coinbaseWalletExtension?"injected_sdk":"sdk"})));const s={type:"PublishEvent",id:(0,Zr.IntNumber)(this.nextReqId++),sessionId:this.session.id,event:t,data:i,callWebhook:n};return this.setOnceLinked((async()=>{const t=await this.makeRequest(s);if(t.type==="Fail"){throw new Error(t.error||"failed to publish event")}return t.eventId}))}sendData(t){this.ws.sendData(JSON.stringify(t))}updateLastHeartbeat(){this.lastHeartbeatResponse=Date.now()}heartbeat(){if(Date.now()-this.lastHeartbeatResponse>zr*2){this.ws.disconnect();return}try{this.ws.sendData("h")}catch(t){}}async makeRequest(t,e=Br){const n=t.id;this.sendData(t);let i;return Promise.race([new Promise(((t,s)=>{i=window.setTimeout((()=>{s(new Error(`request ${n} timed out`))}),e)})),new Promise((t=>{this.requestResolutions.set(n,(e=>{clearTimeout(i);t(e);this.requestResolutions.delete(n)}))}))])}async authenticate(){const t={type:"HostSession",id:(0,Zr.IntNumber)(this.nextReqId++),sessionId:this.session.id,sessionKey:this.session.key};const e=await this.makeRequest(t);if(e.type==="Fail"){throw new Error(e.error||"failed to authenticate")}}sendIsLinked(){const t={type:"IsLinked",id:(0,Zr.IntNumber)(this.nextReqId++),sessionId:this.session.id};this.sendData(t)}sendGetSessionConfig(){const t={type:"GetSessionConfig",id:(0,Zr.IntNumber)(this.nextReqId++),sessionId:this.session.id};this.sendData(t)}}Sr.WalletLinkConnection=Wr;var qr={};var $r={exports:{}};var Fr=c.exports.Buffer;function Gr(t,e){this._block=Fr.alloc(t);this._finalSize=e;this._blockSize=t;this._len=0}Gr.prototype.update=function(t,e){if(typeof t==="string"){e=e||"utf8";t=Fr.from(t,e)}var n=this._block;var i=this._blockSize;var s=t.length;var r=this._len;for(var o=0;o<s;){var a=r%i;var u=Math.min(s-o,i-a);for(var c=0;c<u;c++){n[a+c]=t[o+c]}r+=u;o+=u;if(r%i===0){this._update(n)}}this._len+=s;return this};Gr.prototype.digest=function(t){var e=this._len%this._blockSize;this._block[e]=128;this._block.fill(0,e+1);if(e>=this._finalSize){this._update(this._block);this._block.fill(0)}var n=this._len*8;if(n<=4294967295){this._block.writeUInt32BE(n,this._blockSize-4)}else{var i=(n&4294967295)>>>0;var s=(n-i)/4294967296;this._block.writeUInt32BE(s,this._blockSize-8);this._block.writeUInt32BE(i,this._blockSize-4)}this._update(this._block);var r=this._hash();return t?r.toString(t):r};Gr.prototype._update=function(){throw new Error("_update must be implemented by subclass")};var Yr=Gr;var Jr=Te.exports;var Qr=Yr;var Kr=c.exports.Buffer;var Xr=[1518500249,1859775393,2400959708|0,3395469782|0];var to=new Array(80);function eo(){this.init();this._w=to;Qr.call(this,64,56)}Jr(eo,Qr);eo.prototype.init=function(){this._a=1732584193;this._b=4023233417;this._c=2562383102;this._d=271733878;this._e=3285377520;return this};function no(t){return t<<5|t>>>27}function io(t){return t<<30|t>>>2}function so(t,e,n,i){if(t===0)return e&n|~e&i;if(t===2)return e&n|e&i|n&i;return e^n^i}eo.prototype._update=function(t){var e=this._w;var n=this._a|0;var i=this._b|0;var s=this._c|0;var r=this._d|0;var o=this._e|0;for(var a=0;a<16;++a)e[a]=t.readInt32BE(a*4);for(;a<80;++a)e[a]=e[a-3]^e[a-8]^e[a-14]^e[a-16];for(var u=0;u<80;++u){var c=~~(u/20);var h=no(n)+so(c,i,s,r)+o+e[u]+Xr[c]|0;o=r;r=s;s=io(i);i=n;n=h}this._a=n+this._a|0;this._b=i+this._b|0;this._c=s+this._c|0;this._d=r+this._d|0;this._e=o+this._e|0};eo.prototype._hash=function(){var t=Kr.allocUnsafe(20);t.writeInt32BE(this._a|0,0);t.writeInt32BE(this._b|0,4);t.writeInt32BE(this._c|0,8);t.writeInt32BE(this._d|0,12);t.writeInt32BE(this._e|0,16);return t};var ro=eo;var oo=Te.exports;var ao=Yr;var uo=c.exports.Buffer;var co=[1518500249,1859775393,2400959708|0,3395469782|0];var ho=new Array(80);function lo(){this.init();this._w=ho;ao.call(this,64,56)}oo(lo,ao);lo.prototype.init=function(){this._a=1732584193;this._b=4023233417;this._c=2562383102;this._d=271733878;this._e=3285377520;return this};function fo(t){return t<<1|t>>>31}function vo(t){return t<<5|t>>>27}function wo(t){return t<<30|t>>>2}function po(t,e,n,i){if(t===0)return e&n|~e&i;if(t===2)return e&n|e&i|n&i;return e^n^i}lo.prototype._update=function(t){var e=this._w;var n=this._a|0;var i=this._b|0;var s=this._c|0;var r=this._d|0;var o=this._e|0;for(var a=0;a<16;++a)e[a]=t.readInt32BE(a*4);for(;a<80;++a)e[a]=fo(e[a-3]^e[a-8]^e[a-14]^e[a-16]);for(var u=0;u<80;++u){var c=~~(u/20);var h=vo(n)+po(c,i,s,r)+o+e[u]+co[c]|0;o=r;r=s;s=wo(i);i=n;n=h}this._a=n+this._a|0;this._b=i+this._b|0;this._c=s+this._c|0;this._d=r+this._d|0;this._e=o+this._e|0};lo.prototype._hash=function(){var t=uo.allocUnsafe(20);t.writeInt32BE(this._a|0,0);t.writeInt32BE(this._b|0,4);t.writeInt32BE(this._c|0,8);t.writeInt32BE(this._d|0,12);t.writeInt32BE(this._e|0,16);return t};var bo=lo;var mo=Te.exports;var go=Yr;var yo=c.exports.Buffer;var ko=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];var Eo=new Array(64);function _o(){this.init();this._w=Eo;go.call(this,64,56)}mo(_o,go);_o.prototype.init=function(){this._a=1779033703;this._b=3144134277;this._c=1013904242;this._d=2773480762;this._e=1359893119;this._f=2600822924;this._g=528734635;this._h=1541459225;return this};function Mo(t,e,n){return n^t&(e^n)}function Co(t,e,n){return t&e|n&(t|e)}function jo(t){return(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10)}function xo(t){return(t>>>6|t<<26)^(t>>>11|t<<21)^(t>>>25|t<<7)}function So(t){return(t>>>7|t<<25)^(t>>>18|t<<14)^t>>>3}function Io(t){return(t>>>17|t<<15)^(t>>>19|t<<13)^t>>>10}_o.prototype._update=function(t){var e=this._w;var n=this._a|0;var i=this._b|0;var s=this._c|0;var r=this._d|0;var o=this._e|0;var a=this._f|0;var u=this._g|0;var c=this._h|0;for(var h=0;h<16;++h)e[h]=t.readInt32BE(h*4);for(;h<64;++h)e[h]=Io(e[h-2])+e[h-7]+So(e[h-15])+e[h-16]|0;for(var l=0;l<64;++l){var f=c+xo(o)+Mo(o,a,u)+ko[l]+e[l]|0;var d=jo(n)+Co(n,i,s)|0;c=u;u=a;a=o;o=r+f|0;r=s;s=i;i=n;n=f+d|0}this._a=n+this._a|0;this._b=i+this._b|0;this._c=s+this._c|0;this._d=r+this._d|0;this._e=o+this._e|0;this._f=a+this._f|0;this._g=u+this._g|0;this._h=c+this._h|0};_o.prototype._hash=function(){var t=yo.allocUnsafe(32);t.writeInt32BE(this._a,0);t.writeInt32BE(this._b,4);t.writeInt32BE(this._c,8);t.writeInt32BE(this._d,12);t.writeInt32BE(this._e,16);t.writeInt32BE(this._f,20);t.writeInt32BE(this._g,24);t.writeInt32BE(this._h,28);return t};var Ao=_o;var Oo=Te.exports;var Lo=Ao;var To=Yr;var No=c.exports.Buffer;var Do=new Array(64);function Ro(){this.init();this._w=Do;To.call(this,64,56)}Oo(Ro,Lo);Ro.prototype.init=function(){this._a=3238371032;this._b=914150663;this._c=812702999;this._d=4144912697;this._e=4290775857;this._f=1750603025;this._g=1694076839;this._h=3204075428;return this};Ro.prototype._hash=function(){var t=No.allocUnsafe(28);t.writeInt32BE(this._a,0);t.writeInt32BE(this._b,4);t.writeInt32BE(this._c,8);t.writeInt32BE(this._d,12);t.writeInt32BE(this._e,16);t.writeInt32BE(this._f,20);t.writeInt32BE(this._g,24);return t};var Po=Ro;var Uo=Te.exports;var Ho=Yr;var Vo=c.exports.Buffer;var Zo=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];var zo=new Array(160);function Bo(){this.init();this._w=zo;Ho.call(this,128,112)}Uo(Bo,Ho);Bo.prototype.init=function(){this._ah=1779033703;this._bh=3144134277;this._ch=1013904242;this._dh=2773480762;this._eh=1359893119;this._fh=2600822924;this._gh=528734635;this._hh=1541459225;this._al=4089235720;this._bl=2227873595;this._cl=4271175723;this._dl=1595750129;this._el=2917565137;this._fl=725511199;this._gl=4215389547;this._hl=327033209;return this};function Wo(t,e,n){return n^t&(e^n)}function qo(t,e,n){return t&e|n&(t|e)}function $o(t,e){return(t>>>28|e<<4)^(e>>>2|t<<30)^(e>>>7|t<<25)}function Fo(t,e){return(t>>>14|e<<18)^(t>>>18|e<<14)^(e>>>9|t<<23)}function Go(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^t>>>7}function Yo(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^(t>>>7|e<<25)}function Jo(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^t>>>6}function Qo(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^(t>>>6|e<<26)}function Ko(t,e){return t>>>0<e>>>0?1:0}Bo.prototype._update=function(t){var e=this._w;var n=this._ah|0;var i=this._bh|0;var s=this._ch|0;var r=this._dh|0;var o=this._eh|0;var a=this._fh|0;var u=this._gh|0;var c=this._hh|0;var h=this._al|0;var l=this._bl|0;var f=this._cl|0;var d=this._dl|0;var v=this._el|0;var w=this._fl|0;var p=this._gl|0;var b=this._hl|0;for(var m=0;m<32;m+=2){e[m]=t.readInt32BE(m*4);e[m+1]=t.readInt32BE(m*4+4)}for(;m<160;m+=2){var g=e[m-15*2];var y=e[m-15*2+1];var k=Go(g,y);var E=Yo(y,g);g=e[m-2*2];y=e[m-2*2+1];var _=Jo(g,y);var M=Qo(y,g);var C=e[m-7*2];var j=e[m-7*2+1];var x=e[m-16*2];var S=e[m-16*2+1];var I=E+j|0;var A=k+C+Ko(I,E)|0;I=I+M|0;A=A+_+Ko(I,M)|0;I=I+S|0;A=A+x+Ko(I,S)|0;e[m]=A;e[m+1]=I}for(var O=0;O<160;O+=2){A=e[O];I=e[O+1];var L=qo(n,i,s);var T=qo(h,l,f);var N=$o(n,h);var D=$o(h,n);var R=Fo(o,v);var P=Fo(v,o);var U=Zo[O];var H=Zo[O+1];var V=Wo(o,a,u);var Z=Wo(v,w,p);var z=b+P|0;var B=c+R+Ko(z,b)|0;z=z+Z|0;B=B+V+Ko(z,Z)|0;z=z+H|0;B=B+U+Ko(z,H)|0;z=z+I|0;B=B+A+Ko(z,I)|0;var W=D+T|0;var q=N+L+Ko(W,D)|0;c=u;b=p;u=a;p=w;a=o;w=v;v=d+z|0;o=r+B+Ko(v,d)|0;r=s;d=f;s=i;f=l;i=n;l=h;h=z+W|0;n=B+q+Ko(h,z)|0}this._al=this._al+h|0;this._bl=this._bl+l|0;this._cl=this._cl+f|0;this._dl=this._dl+d|0;this._el=this._el+v|0;this._fl=this._fl+w|0;this._gl=this._gl+p|0;this._hl=this._hl+b|0;this._ah=this._ah+n+Ko(this._al,h)|0;this._bh=this._bh+i+Ko(this._bl,l)|0;this._ch=this._ch+s+Ko(this._cl,f)|0;this._dh=this._dh+r+Ko(this._dl,d)|0;this._eh=this._eh+o+Ko(this._el,v)|0;this._fh=this._fh+a+Ko(this._fl,w)|0;this._gh=this._gh+u+Ko(this._gl,p)|0;this._hh=this._hh+c+Ko(this._hl,b)|0};Bo.prototype._hash=function(){var t=Vo.allocUnsafe(64);function e(e,n,i){t.writeInt32BE(e,i);t.writeInt32BE(n,i+4)}e(this._ah,this._al,0);e(this._bh,this._bl,8);e(this._ch,this._cl,16);e(this._dh,this._dl,24);e(this._eh,this._el,32);e(this._fh,this._fl,40);e(this._gh,this._gl,48);e(this._hh,this._hl,56);return t};var Xo=Bo;var ta=Te.exports;var ea=Xo;var na=Yr;var ia=c.exports.Buffer;var sa=new Array(160);function ra(){this.init();this._w=sa;na.call(this,128,112)}ta(ra,ea);ra.prototype.init=function(){this._ah=3418070365;this._bh=1654270250;this._ch=2438529370;this._dh=355462360;this._eh=1731405415;this._fh=2394180231;this._gh=3675008525;this._hh=1203062813;this._al=3238371032;this._bl=914150663;this._cl=812702999;this._dl=4144912697;this._el=4290775857;this._fl=1750603025;this._gl=1694076839;this._hl=3204075428;return this};ra.prototype._hash=function(){var t=ia.allocUnsafe(48);function e(e,n,i){t.writeInt32BE(e,i);t.writeInt32BE(n,i+4)}e(this._ah,this._al,0);e(this._bh,this._bl,8);e(this._ch,this._cl,16);e(this._dh,this._dl,24);e(this._eh,this._el,32);e(this._fh,this._fl,40);return t};var oa=ra;var aa=$r.exports=function t(e){e=e.toLowerCase();var n=aa[e];if(!n)throw new Error(e+" is not supported (we accept pull requests)");return new n};aa.sha=ro;aa.sha1=bo;aa.sha224=Po;aa.sha256=Ao;aa.sha384=oa;aa.sha512=Xo;Object.defineProperty(qr,"__esModule",{value:true});qr.WalletLinkSession=void 0;const ua=$r.exports;const ca=Z;const ha="session:id";const la="session:secret";const fa="session:linked";class da{constructor(t,e,n,i){this._storage=t;this._id=e||(0,ca.randomBytesHex)(16);this._secret=n||(0,ca.randomBytesHex)(32);this._key=(new ua.sha256).update(`${this._id}, ${this._secret} WalletLink`).digest("hex");this._linked=!!i}static load(t){const e=t.getItem(ha);const n=t.getItem(fa);const i=t.getItem(la);if(e&&i){return new da(t,e,i,n==="1")}return null}get id(){return this._id}get secret(){return this._secret}get key(){return this._key}get linked(){return this._linked}set linked(t){this._linked=t;this.persistLinked()}save(){this._storage.setItem(ha,this._id);this._storage.setItem(la,this._secret);this.persistLinked();return this}persistLinked(){this._storage.setItem(fa,this._linked?"1":"0")}}qr.WalletLinkSession=da;var va={};Object.defineProperty(va,"__esModule",{value:true});va.isDarkMode=va.isMobileWeb=va.getLocation=va.createQrUrl=void 0;function wa(t,e,n,i,s,r){const o=i?"parent-id":"id";const a=new URLSearchParams({[o]:t,secret:e,server:n,v:s,chainId:r.toString()}).toString();const u=`${n}/#/link?${a}`;return u}va.createQrUrl=wa;function pa(){try{return window.frameElement!==null}catch(t){return false}}function ba(){try{if(pa()&&window.top){return window.top.location}return window.location}catch(t){return window.location}}va.getLocation=ba;function ma(){var t;return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test((t=window===null||window===void 0?void 0:window.navigator)===null||t===void 0?void 0:t.userAgent)}va.isMobileWeb=ma;function ga(){var t,e;return(e=(t=window===null||window===void 0?void 0:window.matchMedia)===null||t===void 0?void 0:t.call(window,"(prefers-color-scheme: dark)").matches)!==null&&e!==void 0?e:false}va.isDarkMode=ga;var ya={};var ka={};var Ea={};Object.defineProperty(Ea,"__esModule",{value:true});Ea.default=(()=>`@namespace svg "http://www.w3.org/2000/svg";.-cbwsdk-css-reset,.-cbwsdk-css-reset *{animation:none;animation-delay:0;animation-direction:normal;animation-duration:0;animation-fill-mode:none;animation-iteration-count:1;animation-name:none;animation-play-state:running;animation-timing-function:ease;backface-visibility:visible;background:0;background-attachment:scroll;background-clip:border-box;background-color:rgba(0,0,0,0);background-image:none;background-origin:padding-box;background-position:0 0;background-position-x:0;background-position-y:0;background-repeat:repeat;background-size:auto auto;border:0;border-style:none;border-width:medium;border-color:inherit;border-bottom:0;border-bottom-color:inherit;border-bottom-left-radius:0;border-bottom-right-radius:0;border-bottom-style:none;border-bottom-width:medium;border-collapse:separate;border-image:none;border-left:0;border-left-color:inherit;border-left-style:none;border-left-width:medium;border-radius:0;border-right:0;border-right-color:inherit;border-right-style:none;border-right-width:medium;border-spacing:0;border-top:0;border-top-color:inherit;border-top-left-radius:0;border-top-right-radius:0;border-top-style:none;border-top-width:medium;box-shadow:none;box-sizing:border-box;caption-side:top;clear:none;clip:auto;color:inherit;columns:auto;column-count:auto;column-fill:balance;column-gap:normal;column-rule:medium none currentColor;column-rule-color:currentColor;column-rule-style:none;column-rule-width:none;column-span:1;column-width:auto;counter-increment:none;counter-reset:none;direction:ltr;empty-cells:show;float:none;font:normal;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,sans-serif;font-size:medium;font-style:normal;font-variant:normal;font-weight:normal;height:auto;hyphens:none;letter-spacing:normal;line-height:normal;list-style:none;list-style-image:none;list-style-position:outside;list-style-type:disc;margin:0;margin-bottom:0;margin-left:0;margin-right:0;margin-top:0;opacity:1;orphans:0;outline:0;outline-color:invert;outline-style:none;outline-width:medium;overflow:visible;overflow-x:visible;overflow-y:visible;padding:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;page-break-after:auto;page-break-before:auto;page-break-inside:auto;perspective:none;perspective-origin:50% 50%;pointer-events:auto;position:static;quotes:"\\201C" "\\201D" "\\2018" "\\2019";tab-size:8;table-layout:auto;text-align:inherit;text-align-last:auto;text-decoration:none;text-decoration-color:inherit;text-decoration-line:none;text-decoration-style:solid;text-indent:0;text-shadow:none;text-transform:none;transform:none;transform-style:flat;transition:none;transition-delay:0s;transition-duration:0s;transition-property:none;transition-timing-function:ease;unicode-bidi:normal;vertical-align:baseline;visibility:visible;white-space:normal;widows:0;word-spacing:normal;z-index:auto}.-cbwsdk-css-reset strong{font-weight:bold}.-cbwsdk-css-reset *{box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,sans-serif;line-height:1}.-cbwsdk-css-reset [class*=container]{margin:0;padding:0}.-cbwsdk-css-reset style{display:none}`)();var _a=n&&n.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ka,"__esModule",{value:true});ka.injectCssReset=void 0;const Ma=_a(Ea);function Ca(){const t=document.createElement("style");t.type="text/css";t.appendChild(document.createTextNode(Ma.default));document.documentElement.appendChild(t)}ka.injectCssReset=Ca;var ja={};function xa(t){var e,n,i="";if("string"==typeof t||"number"==typeof t)i+=t;else if("object"==typeof t)if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=xa(t[e]))&&(i&&(i+=" "),i+=n);else for(e in t)t[e]&&(i&&(i+=" "),i+=e);return i}function Sa(){for(var t,e,n=0,i="";n<arguments.length;)(t=arguments[n++])&&(e=xa(t))&&(i&&(i+=" "),i+=e);return i}const Ia=Object.freeze({__proto__:null,clsx:Sa,default:Sa});const Aa=i(Ia);var Oa,La,Ta,Na,Da,Ra,Pa,Ua,Ha,Va,Za,za,Ba={},Wa=[],qa=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,$a=Array.isArray;function Fa(t,e){for(var n in e)t[n]=e[n];return t}function Ga(t){var e=t.parentNode;e&&e.removeChild(t)}function Ya(t,e,n){var i,s,r,o={};for(r in e)"key"==r?i=e[r]:"ref"==r?s=e[r]:o[r]=e[r];if(arguments.length>2&&(o.children=arguments.length>3?Oa.call(arguments,2):n),"function"==typeof t&&null!=t.defaultProps)for(r in t.defaultProps)void 0===o[r]&&(o[r]=t.defaultProps[r]);return Ja(t,o,i,s,null)}function Ja(t,e,n,i,s){var r={type:t,props:e,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:null==s?++Ta:s,__i:-1,__u:0};return null==s&&null!=La.vnode&&La.vnode(r),r}function Qa(){return{current:null}}function Ka(t){return t.children}function Xa(t,e){this.props=t,this.context=e}function tu(t,e){if(null==e)return t.__?tu(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e)return n.__e;return"function"==typeof t.type?tu(t):null}function eu(t){var e,n;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e){t.__e=t.__c.base=n.__e;break}return eu(t)}}function nu(t){(!t.__d&&(t.__d=!0)&&Da.push(t)&&!iu.__r++||Ra!==La.debounceRendering)&&((Ra=La.debounceRendering)||Pa)(iu)}function iu(){var t,e,n,i,s,r,o,a;for(Da.sort(Ua);t=Da.shift();)t.__d&&(e=Da.length,i=void 0,r=(s=(n=t).__v).__e,o=[],a=[],n.__P&&((i=Fa({},s)).__v=s.__v+1,La.vnode&&La.vnode(i),fu(n.__P,i,s,n.__n,n.__P.namespaceURI,32&s.__u?[r]:null,o,null==r?tu(s):r,!!(32&s.__u),a),i.__v=s.__v,i.__.__k[i.__i]=i,du(o,i,a),i.__e!=r&&eu(i)),Da.length>e&&Da.sort(Ua));iu.__r=0}function su(t,e,n,i,s,r,o,a,u,c,h){var l,f,d,v,w,p=i&&i.__k||Wa,b=e.length;for(n.__d=u,ru(n,e,p),u=n.__d,l=0;l<b;l++)null!=(d=n.__k[l])&&"boolean"!=typeof d&&"function"!=typeof d&&(f=-1===d.__i?Ba:p[d.__i]||Ba,d.__i=l,fu(t,d,f,s,r,o,a,u,c,h),v=d.__e,d.ref&&f.ref!=d.ref&&(f.ref&&wu(f.ref,null,d),h.push(d.ref,d.__c||v,d)),null==w&&null!=v&&(w=v),65536&d.__u||f.__k===d.__k?(u&&"string"==typeof d.type&&!t.contains(u)&&(u=tu(f)),u=ou(d,u,t)):"function"==typeof d.type&&void 0!==d.__d?u=d.__d:v&&(u=v.nextSibling),d.__d=void 0,d.__u&=-196609);n.__d=u,n.__e=w}function ru(t,e,n){var i,s,r,o,a,u=e.length,c=n.length,h=c,l=0;for(t.__k=[],i=0;i<u;i++)o=i+l,null!=(s=t.__k[i]=null==(s=e[i])||"boolean"==typeof s||"function"==typeof s?null:"string"==typeof s||"number"==typeof s||"bigint"==typeof s||s.constructor==String?Ja(null,s,null,null,null):$a(s)?Ja(Ka,{children:s},null,null,null):void 0===s.constructor&&s.__b>0?Ja(s.type,s.props,s.key,s.ref?s.ref:null,s.__v):s)?(s.__=t,s.__b=t.__b+1,a=uu(s,n,o,h),s.__i=a,r=null,-1!==a&&(h--,(r=n[a])&&(r.__u|=131072)),null==r||null===r.__v?(-1==a&&l--,"function"!=typeof s.type&&(s.__u|=65536)):a!==o&&(a==o-1?l=a-o:a==o+1?l++:a>o?h>u-o?l+=a-o:l--:a<o&&l++,a!==i+l&&(s.__u|=65536))):(r=n[o])&&null==r.key&&r.__e&&0==(131072&r.__u)&&(r.__e==t.__d&&(t.__d=tu(r)),pu(r,r,!1),n[o]=null,h--);if(h)for(i=0;i<c;i++)null!=(r=n[i])&&0==(131072&r.__u)&&(r.__e==t.__d&&(t.__d=tu(r)),pu(r,r))}function ou(t,e,n){var i,s;if("function"==typeof t.type){for(i=t.__k,s=0;i&&s<i.length;s++)i[s]&&(i[s].__=t,e=ou(i[s],e,n));return e}t.__e!=e&&(n.insertBefore(t.__e,e||null),e=t.__e);do{e=e&&e.nextSibling}while(null!=e&&8===e.nodeType);return e}function au(t,e){return e=e||[],null==t||"boolean"==typeof t||($a(t)?t.some((function(t){au(t,e)})):e.push(t)),e}function uu(t,e,n,i){var s=t.key,r=t.type,o=n-1,a=n+1,u=e[n];if(null===u||u&&s==u.key&&r===u.type&&0==(131072&u.__u))return n;if(i>(null!=u&&0==(131072&u.__u)?1:0))for(;o>=0||a<e.length;){if(o>=0){if((u=e[o])&&0==(131072&u.__u)&&s==u.key&&r===u.type)return o;o--}if(a<e.length){if((u=e[a])&&0==(131072&u.__u)&&s==u.key&&r===u.type)return a;a++}}return-1}function cu(t,e,n){"-"===e[0]?t.setProperty(e,null==n?"":n):t[e]=null==n?"":"number"!=typeof n||qa.test(e)?n:n+"px"}function hu(t,e,n,i,s){var r;t:if("style"===e)if("string"==typeof n)t.style.cssText=n;else{if("string"==typeof i&&(t.style.cssText=i=""),i)for(e in i)n&&e in n||cu(t.style,e,"");if(n)for(e in n)i&&n[e]===i[e]||cu(t.style,e,n[e])}else if("o"===e[0]&&"n"===e[1])r=e!==(e=e.replace(/(PointerCapture)$|Capture$/i,"$1")),e=e.toLowerCase()in t||"onFocusOut"===e||"onFocusIn"===e?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+r]=n,n?i?n.u=i.u:(n.u=Ha,t.addEventListener(e,r?Za:Va,r)):t.removeEventListener(e,r?Za:Va,r);else{if("http://www.w3.org/2000/svg"==s)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=e&&"height"!=e&&"href"!=e&&"list"!=e&&"form"!=e&&"tabIndex"!=e&&"download"!=e&&"rowSpan"!=e&&"colSpan"!=e&&"role"!=e&&"popover"!=e&&e in t)try{t[e]=null==n?"":n;break t}catch(t){}"function"==typeof n||(null==n||!1===n&&"-"!==e[4]?t.removeAttribute(e):t.setAttribute(e,"popover"==e&&1==n?"":n))}}function lu(t){return function(e){if(this.l){var n=this.l[e.type+t];if(null==e.t)e.t=Ha++;else if(e.t<n.u)return;return n(La.event?La.event(e):e)}}}function fu(t,e,n,i,s,r,o,a,u,c){var h,l,f,d,v,w,p,b,m,g,y,k,E,_,M,C,j=e.type;if(void 0!==e.constructor)return null;128&n.__u&&(u=!!(32&n.__u),r=[a=e.__e=n.__e]),(h=La.__b)&&h(e);t:if("function"==typeof j)try{if(b=e.props,m="prototype"in j&&j.prototype.render,g=(h=j.contextType)&&i[h.__c],y=h?g?g.props.value:h.__:i,n.__c?p=(l=e.__c=n.__c).__=l.__E:(m?e.__c=l=new j(b,y):(e.__c=l=new Xa(b,y),l.constructor=j,l.render=bu),g&&g.sub(l),l.props=b,l.state||(l.state={}),l.context=y,l.__n=i,f=l.__d=!0,l.__h=[],l._sb=[]),m&&null==l.__s&&(l.__s=l.state),m&&null!=j.getDerivedStateFromProps&&(l.__s==l.state&&(l.__s=Fa({},l.__s)),Fa(l.__s,j.getDerivedStateFromProps(b,l.__s))),d=l.props,v=l.state,l.__v=e,f)m&&null==j.getDerivedStateFromProps&&null!=l.componentWillMount&&l.componentWillMount(),m&&null!=l.componentDidMount&&l.__h.push(l.componentDidMount);else{if(m&&null==j.getDerivedStateFromProps&&b!==d&&null!=l.componentWillReceiveProps&&l.componentWillReceiveProps(b,y),!l.__e&&(null!=l.shouldComponentUpdate&&!1===l.shouldComponentUpdate(b,l.__s,y)||e.__v===n.__v)){for(e.__v!==n.__v&&(l.props=b,l.state=l.__s,l.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.forEach((function(t){t&&(t.__=e)})),k=0;k<l._sb.length;k++)l.__h.push(l._sb[k]);l._sb=[],l.__h.length&&o.push(l);break t}null!=l.componentWillUpdate&&l.componentWillUpdate(b,l.__s,y),m&&null!=l.componentDidUpdate&&l.__h.push((function(){l.componentDidUpdate(d,v,w)}))}if(l.context=y,l.props=b,l.__P=t,l.__e=!1,E=La.__r,_=0,m){for(l.state=l.__s,l.__d=!1,E&&E(e),h=l.render(l.props,l.state,l.context),M=0;M<l._sb.length;M++)l.__h.push(l._sb[M]);l._sb=[]}else do{l.__d=!1,E&&E(e),h=l.render(l.props,l.state,l.context),l.state=l.__s}while(l.__d&&++_<25);l.state=l.__s,null!=l.getChildContext&&(i=Fa(Fa({},i),l.getChildContext())),m&&!f&&null!=l.getSnapshotBeforeUpdate&&(w=l.getSnapshotBeforeUpdate(d,v)),su(t,$a(C=null!=h&&h.type===Ka&&null==h.key?h.props.children:h)?C:[C],e,n,i,s,r,o,a,u,c),l.base=e.__e,e.__u&=-161,l.__h.length&&o.push(l),p&&(l.__E=l.__=null)}catch(t){e.__v=null,u||null!=r?(e.__e=a,e.__u|=u?160:32,r[r.indexOf(a)]=null):(e.__e=n.__e,e.__k=n.__k),La.__e(t,e,n)}else null==r&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=vu(n.__e,e,n,i,s,r,o,u,c);(h=La.diffed)&&h(e)}function du(t,e,n){e.__d=void 0;for(var i=0;i<n.length;i++)wu(n[i],n[++i],n[++i]);La.__c&&La.__c(e,t),t.some((function(e){try{t=e.__h,e.__h=[],t.some((function(t){t.call(e)}))}catch(t){La.__e(t,e.__v)}}))}function vu(t,e,n,i,s,r,o,a,u){var c,h,l,f,d,v,w,p=n.props,b=e.props,m=e.type;if("svg"===m?s="http://www.w3.org/2000/svg":"math"===m?s="http://www.w3.org/1998/Math/MathML":s||(s="http://www.w3.org/1999/xhtml"),null!=r)for(c=0;c<r.length;c++)if((d=r[c])&&"setAttribute"in d==!!m&&(m?d.localName===m:3===d.nodeType)){t=d,r[c]=null;break}if(null==t){if(null===m)return document.createTextNode(b);t=document.createElementNS(s,m,b.is&&b),r=null,a=!1}if(null===m)p===b||a&&t.data===b||(t.data=b);else{if(r=r&&Oa.call(t.childNodes),p=n.props||Ba,!a&&null!=r)for(p={},c=0;c<t.attributes.length;c++)p[(d=t.attributes[c]).name]=d.value;for(c in p)if(d=p[c],"children"==c);else if("dangerouslySetInnerHTML"==c)l=d;else if("key"!==c&&!(c in b)){if("value"==c&&"defaultValue"in b||"checked"==c&&"defaultChecked"in b)continue;hu(t,c,null,d,s)}for(c in b)d=b[c],"children"==c?f=d:"dangerouslySetInnerHTML"==c?h=d:"value"==c?v=d:"checked"==c?w=d:"key"===c||a&&"function"!=typeof d||p[c]===d||hu(t,c,d,p[c],s);if(h)a||l&&(h.__html===l.__html||h.__html===t.innerHTML)||(t.innerHTML=h.__html),e.__k=[];else if(l&&(t.innerHTML=""),su(t,$a(f)?f:[f],e,n,i,"foreignObject"===m?"http://www.w3.org/1999/xhtml":s,r,o,r?r[0]:n.__k&&tu(n,0),a,u),null!=r)for(c=r.length;c--;)null!=r[c]&&Ga(r[c]);a||(c="value",void 0!==v&&(v!==t[c]||"progress"===m&&!v||"option"===m&&v!==p[c])&&hu(t,c,v,p[c],s),c="checked",void 0!==w&&w!==t[c]&&hu(t,c,w,p[c],s))}return t}function wu(t,e,n){try{"function"==typeof t?t(e):t.current=e}catch(t){La.__e(t,n)}}function pu(t,e,n){var i,s;if(La.unmount&&La.unmount(t),(i=t.ref)&&(i.current&&i.current!==t.__e||wu(i,null,e)),null!=(i=t.__c)){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(t){La.__e(t,e)}i.base=i.__P=null}if(i=t.__k)for(s=0;s<i.length;s++)i[s]&&pu(i[s],e,n||"function"!=typeof t.type);n||null==t.__e||Ga(t.__e),t.__c=t.__=t.__e=t.__d=void 0}function bu(t,e,n){return this.constructor(t,n)}function mu(t,e,n){var i,s,r,o;La.__&&La.__(t,e),s=(i="function"==typeof n)?null:n&&n.__k||e.__k,r=[],o=[],fu(e,t=(!i&&n||e).__k=Ya(Ka,null,[t]),s||Ba,Ba,e.namespaceURI,!i&&n?[n]:s?null:e.firstChild?Oa.call(e.childNodes):null,r,!i&&n?n:s?s.__e:e.firstChild,i,o),du(r,t,o)}function gu(t,e){mu(t,e,gu)}function yu(t,e,n){var i,s,r,o,a=Fa({},t.props);for(r in t.type&&t.type.defaultProps&&(o=t.type.defaultProps),e)"key"==r?i=e[r]:"ref"==r?s=e[r]:a[r]=void 0===e[r]&&void 0!==o?o[r]:e[r];return arguments.length>2&&(a.children=arguments.length>3?Oa.call(arguments,2):n),Ja(t.type,a,i||t.key,s||t.ref,null)}function ku(t,e){var n={__c:e="__cC"+za++,__:t,Consumer:function(t,e){return t.children(e)},Provider:function(t){var n,i;return this.getChildContext||(n=[],(i={})[e]=this,this.getChildContext=function(){return i},this.componentWillUnmount=function(){n=null},this.shouldComponentUpdate=function(t){this.props.value!==t.value&&n.some((function(t){t.__e=!0,nu(t)}))},this.sub=function(t){n.push(t);var e=t.componentWillUnmount;t.componentWillUnmount=function(){n&&n.splice(n.indexOf(t),1),e&&e.call(t)}}),t.children}};return n.Provider.__=n.Consumer.contextType=n}Oa=Wa.slice,La={__e:function(t,e,n,i){for(var s,r,o;e=e.__;)if((s=e.__c)&&!s.__)try{if((r=s.constructor)&&null!=r.getDerivedStateFromError&&(s.setState(r.getDerivedStateFromError(t)),o=s.__d),null!=s.componentDidCatch&&(s.componentDidCatch(t,i||{}),o=s.__d),o)return s.__E=s}catch(e){t=e}throw t}},Ta=0,Na=function(t){return null!=t&&null==t.constructor},Xa.prototype.setState=function(t,e){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=Fa({},this.state),"function"==typeof t&&(t=t(Fa({},n),this.props)),t&&Fa(n,t),null!=t&&this.__v&&(e&&this._sb.push(e),nu(this))},Xa.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),nu(this))},Xa.prototype.render=Ka,Da=[],Pa="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Ua=function(t,e){return t.__v.__b-e.__v.__b},iu.__r=0,Ha=0,Va=lu(!1),Za=lu(!0),za=0;const Eu=Object.freeze({__proto__:null,Component:Xa,Fragment:Ka,cloneElement:yu,createContext:ku,createElement:Ya,createRef:Qa,h:Ya,hydrate:gu,get isValidElement(){return Na},get options(){return La},render:mu,toChildArray:au});const _u=i(Eu);var Mu,Cu,ju,xu,Su=0,Iu=[],Au=La,Ou=Au.__b,Lu=Au.__r,Tu=Au.diffed,Nu=Au.__c,Du=Au.unmount,Ru=Au.__;function Pu(t,e){Au.__h&&Au.__h(Cu,t,Su||e),Su=0;var n=Cu.__H||(Cu.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function Uu(t){return Su=1,Hu(nc,t)}function Hu(t,e,n){var i=Pu(Mu++,2);if(i.t=t,!i.__c&&(i.__=[n?n(e):nc(void 0,e),function(t){var e=i.__N?i.__N[0]:i.__[0],n=i.t(e,t);e!==n&&(i.__N=[n,i.__[1]],i.__c.setState({}))}],i.__c=Cu,!Cu.u)){var s=function(t,e,n){if(!i.__c.__H)return!0;var s=i.__c.__H.__.filter((function(t){return!!t.__c}));if(s.every((function(t){return!t.__N})))return!r||r.call(this,t,e,n);var o=!1;return s.forEach((function(t){if(t.__N){var e=t.__[0];t.__=t.__N,t.__N=void 0,e!==t.__[0]&&(o=!0)}})),!(!o&&i.__c.props===t)&&(!r||r.call(this,t,e,n))};Cu.u=!0;var r=Cu.shouldComponentUpdate,o=Cu.componentWillUpdate;Cu.componentWillUpdate=function(t,e,n){if(this.__e){var i=r;r=void 0,s(t,e,n),r=i}o&&o.call(this,t,e,n)},Cu.shouldComponentUpdate=s}return i.__N||i.__}function Vu(t,e){var n=Pu(Mu++,3);!Au.__s&&ec(n.__H,e)&&(n.__=t,n.i=e,Cu.__H.__h.push(n))}function Zu(t,e){var n=Pu(Mu++,4);!Au.__s&&ec(n.__H,e)&&(n.__=t,n.i=e,Cu.__h.push(n))}function zu(t){return Su=5,Wu((function(){return{current:t}}),[])}function Bu(t,e,n){Su=6,Zu((function(){return"function"==typeof t?(t(e()),function(){return t(null)}):t?(t.current=e(),function(){return t.current=null}):void 0}),null==n?n:n.concat(t))}function Wu(t,e){var n=Pu(Mu++,7);return ec(n.__H,e)&&(n.__=t(),n.__H=e,n.__h=t),n.__}function qu(t,e){return Su=8,Wu((function(){return t}),e)}function $u(t){var e=Cu.context[t.__c],n=Pu(Mu++,9);return n.c=t,e?(null==n.__&&(n.__=!0,e.sub(Cu)),e.props.value):t.__}function Fu(t,e){Au.useDebugValue&&Au.useDebugValue(e?e(t):t)}function Gu(t){var e=Pu(Mu++,10),n=Uu();return e.__=t,Cu.componentDidCatch||(Cu.componentDidCatch=function(t,i){e.__&&e.__(t,i),n[1](t)}),[n[0],function(){n[1](void 0)}]}function Yu(){var t=Pu(Mu++,11);if(!t.__){for(var e=Cu.__v;null!==e&&!e.__m&&null!==e.__;)e=e.__;var n=e.__m||(e.__m=[0,0]);t.__="P"+n[0]+"-"+n[1]++}return t.__}function Ju(){for(var t;t=Iu.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(Xu),t.__H.__h.forEach(tc),t.__H.__h=[]}catch(e){t.__H.__h=[],Au.__e(e,t.__v)}}Au.__b=function(t){Cu=null,Ou&&Ou(t)},Au.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),Ru&&Ru(t,e)},Au.__r=function(t){Lu&&Lu(t),Mu=0;var e=(Cu=t.__c).__H;e&&(ju===Cu?(e.__h=[],Cu.__h=[],e.__.forEach((function(t){t.__N&&(t.__=t.__N),t.i=t.__N=void 0}))):(e.__h.forEach(Xu),e.__h.forEach(tc),e.__h=[],Mu=0)),ju=Cu},Au.diffed=function(t){Tu&&Tu(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(1!==Iu.push(e)&&xu===Au.requestAnimationFrame||((xu=Au.requestAnimationFrame)||Ku)(Ju)),e.__H.__.forEach((function(t){t.i&&(t.__H=t.i),t.i=void 0}))),ju=Cu=null},Au.__c=function(t,e){e.some((function(t){try{t.__h.forEach(Xu),t.__h=t.__h.filter((function(t){return!t.__||tc(t)}))}catch(n){e.some((function(t){t.__h&&(t.__h=[])})),e=[],Au.__e(n,t.__v)}})),Nu&&Nu(t,e)},Au.unmount=function(t){Du&&Du(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach((function(t){try{Xu(t)}catch(t){e=t}})),n.__H=void 0,e&&Au.__e(e,n.__v))};var Qu="function"==typeof requestAnimationFrame;function Ku(t){var e,n=function(){clearTimeout(i),Qu&&cancelAnimationFrame(e),setTimeout(t)},i=setTimeout(n,100);Qu&&(e=requestAnimationFrame(n))}function Xu(t){var e=Cu,n=t.__c;"function"==typeof n&&(t.__c=void 0,n()),Cu=e}function tc(t){var e=Cu;t.__c=t.__(),Cu=e}function ec(t,e){return!t||t.length!==e.length||e.some((function(e,n){return e!==t[n]}))}function nc(t,e){return"function"==typeof e?e(t):e}const ic=Object.freeze({__proto__:null,useCallback:qu,useContext:$u,useDebugValue:Fu,useEffect:Vu,useErrorBoundary:Gu,useId:Yu,useImperativeHandle:Bu,useLayoutEffect:Zu,useMemo:Wu,useReducer:Hu,useRef:zu,useState:Uu});const sc=i(ic);var rc={};Object.defineProperty(rc,"__esModule",{value:true});rc.default=(()=>`.-cbwsdk-css-reset .-gear-container{margin-left:16px !important;margin-right:9px !important;display:flex;align-items:center;justify-content:center;width:24px;height:24px;transition:opacity .25s}.-cbwsdk-css-reset .-gear-container *{user-select:none}.-cbwsdk-css-reset .-gear-container svg{opacity:0;position:absolute}.-cbwsdk-css-reset .-gear-icon{height:12px;width:12px;z-index:10000}.-cbwsdk-css-reset .-cbwsdk-snackbar{align-items:flex-end;display:flex;flex-direction:column;position:fixed;right:0;top:0;z-index:2147483647}.-cbwsdk-css-reset .-cbwsdk-snackbar *{user-select:none}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance{display:flex;flex-direction:column;margin:8px 16px 0 16px;overflow:visible;text-align:left;transform:translateX(0);transition:opacity .25s,transform .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header:hover .-gear-container svg{opacity:1}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header{display:flex;align-items:center;background:#fff;overflow:hidden;border:1px solid #e7ebee;box-sizing:border-box;border-radius:8px;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header-cblogo{margin:8px 8px 8px 8px}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header *{cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header-message{color:#000;font-size:13px;line-height:1.5;user-select:none}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu{background:#fff;transition:opacity .25s ease-in-out,transform .25s linear,visibility 0s;visibility:hidden;border:1px solid #e7ebee;box-sizing:border-box;border-radius:8px;opacity:0;flex-direction:column;padding-left:8px;padding-right:8px}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:last-child{margin-bottom:8px !important}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover{background:#f5f7f8;border-radius:6px;transition:background .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover span{color:#050f19;transition:color .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover svg path{fill:#000;transition:fill .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item{visibility:inherit;height:35px;margin-top:8px;margin-bottom:0;display:flex;flex-direction:row;align-items:center;padding:8px;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item *{visibility:inherit;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover{background:rgba(223,95,103,.2);transition:background .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover *{cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover svg path{fill:#df5f67;transition:fill .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover span{color:#df5f67;transition:color .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-info{color:#aaa;font-size:13px;margin:0 8px 0 32px;position:absolute}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-hidden{opacity:0;text-align:left;transform:translateX(25%);transition:opacity .5s linear}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-expanded .-cbwsdk-snackbar-instance-menu{opacity:1;display:flex;transform:translateY(8px);visibility:visible}`)();(function(t){var e=n&&n.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(t,"__esModule",{value:true});t.SnackbarInstance=t.SnackbarContainer=t.Snackbar=void 0;const i=e(Aa);const s=_u;const r=sc;const o=va;const a=e(rc);const u=`data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEuNDkyIDEwLjQxOWE4LjkzIDguOTMgMCAwMTguOTMtOC45M2gxMS4xNjNhOC45MyA4LjkzIDAgMDE4LjkzIDguOTN2MTEuMTYzYTguOTMgOC45MyAwIDAxLTguOTMgOC45M0gxMC40MjJhOC45MyA4LjkzIDAgMDEtOC45My04LjkzVjEwLjQxOXoiIGZpbGw9IiMxNjUyRjAiLz48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEwLjQxOSAwSDIxLjU4QzI3LjMzNSAwIDMyIDQuNjY1IDMyIDEwLjQxOVYyMS41OEMzMiAyNy4zMzUgMjcuMzM1IDMyIDIxLjU4MSAzMkgxMC40MkM0LjY2NSAzMiAwIDI3LjMzNSAwIDIxLjU4MVYxMC40MkMwIDQuNjY1IDQuNjY1IDAgMTAuNDE5IDB6bTAgMS40ODhhOC45MyA4LjkzIDAgMDAtOC45MyA4LjkzdjExLjE2M2E4LjkzIDguOTMgMCAwMDguOTMgOC45M0gyMS41OGE4LjkzIDguOTMgMCAwMDguOTMtOC45M1YxMC40MmE4LjkzIDguOTMgMCAwMC04LjkzLTguOTNIMTAuNDJ6IiBmaWxsPSIjZmZmIi8+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNS45OTggMjYuMDQ5Yy01LjU0OSAwLTEwLjA0Ny00LjQ5OC0xMC4wNDctMTAuMDQ3IDAtNS41NDggNC40OTgtMTAuMDQ2IDEwLjA0Ny0xMC4wNDYgNS41NDggMCAxMC4wNDYgNC40OTggMTAuMDQ2IDEwLjA0NiAwIDUuNTQ5LTQuNDk4IDEwLjA0Ny0xMC4wNDYgMTAuMDQ3eiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Ik0xMi43NjIgMTQuMjU0YzAtLjgyMi42NjctMS40ODkgMS40ODktMS40ODloMy40OTdjLjgyMiAwIDEuNDg4LjY2NiAxLjQ4OCAxLjQ4OXYzLjQ5N2MwIC44MjItLjY2NiAxLjQ4OC0xLjQ4OCAxLjQ4OGgtMy40OTdhMS40ODggMS40ODggMCAwMS0xLjQ4OS0xLjQ4OHYtMy40OTh6IiBmaWxsPSIjMTY1MkYwIi8+PC9zdmc+`;const c=`data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIiIGhlaWdodD0iMTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEyIDYuNzV2LTEuNWwtMS43Mi0uNTdjLS4wOC0uMjctLjE5LS41Mi0uMzItLjc3bC44MS0xLjYyLTEuMDYtMS4wNi0xLjYyLjgxYy0uMjQtLjEzLS41LS4yNC0uNzctLjMyTDYuNzUgMGgtMS41bC0uNTcgMS43MmMtLjI3LjA4LS41My4xOS0uNzcuMzJsLTEuNjItLjgxLTEuMDYgMS4wNi44MSAxLjYyYy0uMTMuMjQtLjI0LjUtLjMyLjc3TDAgNS4yNXYxLjVsMS43Mi41N2MuMDguMjcuMTkuNTMuMzIuNzdsLS44MSAxLjYyIDEuMDYgMS4wNiAxLjYyLS44MWMuMjQuMTMuNS4yMy43Ny4zMkw1LjI1IDEyaDEuNWwuNTctMS43MmMuMjctLjA4LjUyLS4xOS43Ny0uMzJsMS42Mi44MSAxLjA2LTEuMDYtLjgxLTEuNjJjLjEzLS4yNC4yMy0uNS4zMi0uNzdMMTIgNi43NXpNNiA4LjVhMi41IDIuNSAwIDAxMC01IDIuNSAyLjUgMCAwMTAgNXoiIGZpbGw9IiMwNTBGMTkiLz48L3N2Zz4=`;class h{constructor(){this.items=new Map;this.nextItemKey=0;this.root=null;this.darkMode=(0,o.isDarkMode)()}attach(t){this.root=document.createElement("div");this.root.className="-cbwsdk-snackbar-root";t.appendChild(this.root);this.render()}presentItem(t){const e=this.nextItemKey++;this.items.set(e,t);this.render();return()=>{this.items.delete(e);this.render()}}clear(){this.items.clear();this.render()}render(){if(!this.root){return}(0,s.render)((0,s.h)("div",null,(0,s.h)(t.SnackbarContainer,{darkMode:this.darkMode},Array.from(this.items.entries()).map((([e,n])=>(0,s.h)(t.SnackbarInstance,Object.assign({},n,{key:e})))))),this.root)}}t.Snackbar=h;const l=t=>(0,s.h)("div",{class:(0,i.default)("-cbwsdk-snackbar-container")},(0,s.h)("style",null,a.default),(0,s.h)("div",{class:"-cbwsdk-snackbar"},t.children));t.SnackbarContainer=l;const f=({autoExpand:t,message:e,menuItems:n})=>{const[o,a]=(0,r.useState)(true);const[h,l]=(0,r.useState)(t!==null&&t!==void 0?t:false);(0,r.useEffect)((()=>{const t=[window.setTimeout((()=>{a(false)}),1),window.setTimeout((()=>{l(true)}),1e4)];return()=>{t.forEach(window.clearTimeout)}}));const f=()=>{l(!h)};return(0,s.h)("div",{class:(0,i.default)("-cbwsdk-snackbar-instance",o&&"-cbwsdk-snackbar-instance-hidden",h&&"-cbwsdk-snackbar-instance-expanded")},(0,s.h)("div",{class:"-cbwsdk-snackbar-instance-header",onClick:f},(0,s.h)("img",{src:u,class:"-cbwsdk-snackbar-instance-header-cblogo"})," ",(0,s.h)("div",{class:"-cbwsdk-snackbar-instance-header-message"},e),(0,s.h)("div",{class:"-gear-container"},!h&&(0,s.h)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,s.h)("circle",{cx:"12",cy:"12",r:"12",fill:"#F5F7F8"})),(0,s.h)("img",{src:c,class:"-gear-icon",title:"Expand"}))),n&&n.length>0&&(0,s.h)("div",{class:"-cbwsdk-snackbar-instance-menu"},n.map(((t,e)=>(0,s.h)("div",{class:(0,i.default)("-cbwsdk-snackbar-instance-menu-item",t.isRed&&"-cbwsdk-snackbar-instance-menu-item-is-red"),onClick:t.onClick,key:e},(0,s.h)("svg",{width:t.svgWidth,height:t.svgHeight,viewBox:"0 0 10 11",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,s.h)("path",{"fill-rule":t.defaultFillRule,"clip-rule":t.defaultClipRule,d:t.path,fill:"#AAAAAA"})),(0,s.h)("span",{class:(0,i.default)("-cbwsdk-snackbar-instance-menu-item-info",t.isRed&&"-cbwsdk-snackbar-instance-menu-item-info-is-red")},t.info))))))};t.SnackbarInstance=f})(ja);Object.defineProperty(ya,"__esModule",{value:true});ya.WalletLinkRelayUI=void 0;const oc=ka;const ac=ja;class uc{constructor(){this.attached=false;this.snackbar=new ac.Snackbar}attach(){if(this.attached){throw new Error("Coinbase Wallet SDK UI is already attached")}const t=document.documentElement;const e=document.createElement("div");e.className="-cbwsdk-css-reset";t.appendChild(e);this.snackbar.attach(e);this.attached=true;(0,oc.injectCssReset)()}showConnecting(t){let e;if(t.isUnlinkedErrorState){e={autoExpand:true,message:"Connection lost",menuItems:[{isRed:false,info:"Reset connection",svgWidth:"10",svgHeight:"11",path:"M5.00008 0.96875C6.73133 0.96875 8.23758 1.94375 9.00008 3.375L10.0001 2.375V5.5H9.53133H7.96883H6.87508L7.80633 4.56875C7.41258 3.3875 6.31258 2.53125 5.00008 2.53125C3.76258 2.53125 2.70633 3.2875 2.25633 4.36875L0.812576 3.76875C1.50008 2.125 3.11258 0.96875 5.00008 0.96875ZM2.19375 6.43125C2.5875 7.6125 3.6875 8.46875 5 8.46875C6.2375 8.46875 7.29375 7.7125 7.74375 6.63125L9.1875 7.23125C8.5 8.875 6.8875 10.0312 5 10.0312C3.26875 10.0312 1.7625 9.05625 1 7.625L0 8.625V5.5H0.46875H2.03125H3.125L2.19375 6.43125Z",defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:t.onResetConnection}]}}else{e={message:"Confirm on phone",menuItems:[{isRed:true,info:"Cancel transaction",svgWidth:"11",svgHeight:"11",path:"M10.3711 1.52346L9.21775 0.370117L5.37109 4.21022L1.52444 0.370117L0.371094 1.52346L4.2112 5.37012L0.371094 9.21677L1.52444 10.3701L5.37109 6.53001L9.21775 10.3701L10.3711 9.21677L6.53099 5.37012L10.3711 1.52346Z",defaultFillRule:"inherit",defaultClipRule:"inherit",onClick:t.onCancel},{isRed:false,info:"Reset connection",svgWidth:"10",svgHeight:"11",path:"M5.00008 0.96875C6.73133 0.96875 8.23758 1.94375 9.00008 3.375L10.0001 2.375V5.5H9.53133H7.96883H6.87508L7.80633 4.56875C7.41258 3.3875 6.31258 2.53125 5.00008 2.53125C3.76258 2.53125 2.70633 3.2875 2.25633 4.36875L0.812576 3.76875C1.50008 2.125 3.11258 0.96875 5.00008 0.96875ZM2.19375 6.43125C2.5875 7.6125 3.6875 8.46875 5 8.46875C6.2375 8.46875 7.29375 7.7125 7.74375 6.63125L9.1875 7.23125C8.5 8.875 6.8875 10.0312 5 10.0312C3.26875 10.0312 1.7625 9.05625 1 7.625L0 8.625V5.5H0.46875H2.03125H3.125L2.19375 6.43125Z",defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:t.onResetConnection}]}}return this.snackbar.presentItem(e)}}ya.WalletLinkRelayUI=uc;var cc={};var hc={};var lc={};Object.defineProperty(lc,"__esModule",{value:true});lc.default=(()=>`.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-backdrop{position:fixed;top:0;left:0;right:0;bottom:0;transition:opacity .25s;background-color:rgba(10,11,13,.5)}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-backdrop-hidden{opacity:0}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box{display:block;position:fixed;top:50%;left:50%;transform:translate(-50%, -50%);padding:20px;border-radius:8px;background-color:#fff;color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box p{display:block;font-weight:400;font-size:14px;line-height:20px;padding-bottom:12px;color:#5b636e}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box button{appearance:none;border:none;background:none;color:#0052ff;padding:0;text-decoration:none;display:block;font-weight:600;font-size:16px;line-height:24px}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.dark{background-color:#0a0b0d;color:#fff}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.dark button{color:#0052ff}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.light{background-color:#fff;color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.light button{color:#0052ff}`)();var fc=n&&n.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(hc,"__esModule",{value:true});hc.RedirectDialog=void 0;const dc=fc(Aa);const vc=_u;const wc=ka;const pc=ja;const bc=va;const mc=fc(lc);class gc{constructor(){this.root=null;this.darkMode=(0,bc.isDarkMode)()}attach(){const t=document.documentElement;this.root=document.createElement("div");this.root.className="-cbwsdk-css-reset";t.appendChild(this.root);(0,wc.injectCssReset)()}present(t){this.render(t)}clear(){this.render(null)}render(t){if(!this.root)return;(0,vc.render)(null,this.root);if(!t)return;(0,vc.render)((0,vc.h)(yc,Object.assign({},t,{onDismiss:()=>{this.clear()},darkMode:this.darkMode})),this.root)}}hc.RedirectDialog=gc;const yc=({title:t,buttonText:e,darkMode:n,onButtonClick:i,onDismiss:s})=>{const r=n?"dark":"light";return(0,vc.h)(pc.SnackbarContainer,{darkMode:n},(0,vc.h)("div",{class:"-cbwsdk-redirect-dialog"},(0,vc.h)("style",null,mc.default),(0,vc.h)("div",{class:"-cbwsdk-redirect-dialog-backdrop",onClick:s}),(0,vc.h)("div",{class:(0,dc.default)("-cbwsdk-redirect-dialog-box",r)},(0,vc.h)("p",null,t),(0,vc.h)("button",{onClick:i},e))))};var kc={};Object.defineProperty(kc,"__esModule",{value:true});kc.CBW_MOBILE_DEEPLINK_URL=kc.WALLETLINK_URL=kc.CB_KEYS_URL=void 0;kc.CB_KEYS_URL="https://keys.coinbase.com/connect";kc.WALLETLINK_URL="https://www.walletlink.org";kc.CBW_MOBILE_DEEPLINK_URL="https://go.cb-w.com/walletlink";Object.defineProperty(cc,"__esModule",{value:true});cc.WLMobileRelayUI=void 0;const Ec=hc;const _c=va;const Mc=kc;class Cc{constructor(){this.attached=false;this.redirectDialog=new Ec.RedirectDialog}attach(){if(this.attached){throw new Error("Coinbase Wallet SDK UI is already attached")}this.redirectDialog.attach();this.attached=true}redirectToCoinbaseWallet(t){const e=new URL(Mc.CBW_MOBILE_DEEPLINK_URL);e.searchParams.append("redirect_url",(0,_c.getLocation)().href);if(t){e.searchParams.append("wl_url",t)}const n=document.createElement("a");n.target="cbw-opener";n.href=e.href;n.rel="noreferrer noopener";n.click()}openCoinbaseWalletDeeplink(t){this.redirectDialog.present({title:"Redirecting to Coinbase Wallet...",buttonText:"Open",onButtonClick:()=>{this.redirectToCoinbaseWallet(t)}});setTimeout((()=>{this.redirectToCoinbaseWallet(t)}),99)}showConnecting(t){return()=>{this.redirectDialog.clear()}}}cc.WLMobileRelayUI=Cc;Object.defineProperty(xr,"__esModule",{value:true});xr.WalletLinkRelay=void 0;const jc=Sr;const xc=_r;const Sc=Mr;const Ic=qr;const Ac=S;const Oc=va;const Lc=ya;const Tc=cc;const Nc=w;const Dc=Z;const Rc=It;class Pc{constructor(t){this.accountsCallback=null;this.chainCallbackParams={chainId:"",jsonRpcUrl:""};this.chainCallback=null;this.dappDefaultChain=1;this.isMobileWeb=(0,Oc.isMobileWeb)();this.appName="";this.appLogoUrl=null;this.linkedUpdated=t=>{this.isLinked=t;const e=this.storage.getItem(xc.LOCAL_STORAGE_ADDRESSES_KEY);if(t){this._session.linked=t}this.isUnlinkedErrorState=false;if(e){const n=e.split(" ");const i=this.storage.getItem("IsStandaloneSigning")==="true";if(n[0]!==""&&!t&&this._session.linked&&!i){this.isUnlinkedErrorState=true}}};this.metadataUpdated=(t,e)=>{this.storage.setItem(t,e)};this.chainUpdated=(t,e)=>{if(this.chainCallbackParams.chainId===t&&this.chainCallbackParams.jsonRpcUrl===e){return}this.chainCallbackParams={chainId:t,jsonRpcUrl:e};if(this.chainCallback){this.chainCallback(t,e)}};this.accountUpdated=t=>{if(this.accountsCallback){this.accountsCallback([t])}if(Pc.accountRequestCallbackIds.size>0){Array.from(Pc.accountRequestCallbackIds.values()).forEach((e=>{const n={type:"WEB3_RESPONSE",id:e,response:{method:"requestEthereumAccounts",result:[t]}};this.invokeCallback(Object.assign(Object.assign({},n),{id:e}))}));Pc.accountRequestCallbackIds.clear()}};this.resetAndReload=this.resetAndReload.bind(this);this.linkAPIUrl=t.linkAPIUrl;this.storage=t.storage;const{session:e,ui:n,connection:i}=this.subscribe();this._session=e;this.connection=i;this.relayEventManager=new Sc.RelayEventManager;this.ui=n}subscribe(){const t=Ic.WalletLinkSession.load(this.storage)||new Ic.WalletLinkSession(this.storage).save();const{linkAPIUrl:e}=this;const n=new jc.WalletLinkConnection({session:t,linkAPIUrl:e,listener:this});const i=this.isMobileWeb?new Tc.WLMobileRelayUI:new Lc.WalletLinkRelayUI;n.connect();return{session:t,ui:i,connection:n}}attachUI(){this.ui.attach()}resetAndReload(){Promise.race([this.connection.setSessionMetadata("__destroyed","1"),new Promise((t=>setTimeout((()=>t(null)),1e3)))]).then((()=>{this.connection.destroy();const t=Ic.WalletLinkSession.load(this.storage);if((t===null||t===void 0?void 0:t.id)===this._session.id){Rc.ScopedLocalStorage.clearAll()}document.location.reload()})).catch((t=>{}))}setAppInfo(t,e){this.appName=t;this.appLogoUrl=e}getStorageItem(t){return this.storage.getItem(t)}setStorageItem(t,e){this.storage.setItem(t,e)}signEthereumMessage(t,e,n,i){return this.sendRequest({method:"signEthereumMessage",params:{message:(0,Dc.hexStringFromBuffer)(t,true),address:e,addPrefix:n,typedDataJson:i||null}})}ethereumAddressFromSignedMessage(t,e,n){return this.sendRequest({method:"ethereumAddressFromSignedMessage",params:{message:(0,Dc.hexStringFromBuffer)(t,true),signature:(0,Dc.hexStringFromBuffer)(e,true),addPrefix:n}})}signEthereumTransaction(t){return this.sendRequest({method:"signEthereumTransaction",params:{fromAddress:t.fromAddress,toAddress:t.toAddress,weiValue:(0,Dc.bigIntStringFromBigInt)(t.weiValue),data:(0,Dc.hexStringFromBuffer)(t.data,true),nonce:t.nonce,gasPriceInWei:t.gasPriceInWei?(0,Dc.bigIntStringFromBigInt)(t.gasPriceInWei):null,maxFeePerGas:t.gasPriceInWei?(0,Dc.bigIntStringFromBigInt)(t.gasPriceInWei):null,maxPriorityFeePerGas:t.gasPriceInWei?(0,Dc.bigIntStringFromBigInt)(t.gasPriceInWei):null,gasLimit:t.gasLimit?(0,Dc.bigIntStringFromBigInt)(t.gasLimit):null,chainId:t.chainId,shouldSubmit:false}})}signAndSubmitEthereumTransaction(t){return this.sendRequest({method:"signEthereumTransaction",params:{fromAddress:t.fromAddress,toAddress:t.toAddress,weiValue:(0,Dc.bigIntStringFromBigInt)(t.weiValue),data:(0,Dc.hexStringFromBuffer)(t.data,true),nonce:t.nonce,gasPriceInWei:t.gasPriceInWei?(0,Dc.bigIntStringFromBigInt)(t.gasPriceInWei):null,maxFeePerGas:t.maxFeePerGas?(0,Dc.bigIntStringFromBigInt)(t.maxFeePerGas):null,maxPriorityFeePerGas:t.maxPriorityFeePerGas?(0,Dc.bigIntStringFromBigInt)(t.maxPriorityFeePerGas):null,gasLimit:t.gasLimit?(0,Dc.bigIntStringFromBigInt)(t.gasLimit):null,chainId:t.chainId,shouldSubmit:true}})}submitEthereumTransaction(t,e){return this.sendRequest({method:"submitEthereumTransaction",params:{signedTransaction:(0,Dc.hexStringFromBuffer)(t,true),chainId:e}})}scanQRCode(t){return this.sendRequest({method:"scanQRCode",params:{regExp:t}})}getWalletLinkSession(){return this._session}genericRequest(t,e){return this.sendRequest({method:"generic",params:{action:e,data:t}})}sendGenericMessage(t){return this.sendRequest(t)}sendRequest(t){let e=null;const n=(0,Dc.randomBytesHex)(8);const i=i=>{this.publishWeb3RequestCanceledEvent(n);this.handleErrorResponse(n,t.method,i);e===null||e===void 0?void 0:e()};return new Promise(((s,r)=>{{e=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:i,onResetConnection:this.resetAndReload})}this.relayEventManager.callbacks.set(n,(t=>{e===null||e===void 0?void 0:e();if((0,Ac.isErrorResponse)(t)){return r(new Error(t.errorMessage))}s(t)}));this.publishWeb3RequestEvent(n,t)}))}setAccountsCallback(t){this.accountsCallback=t}setChainCallback(t){this.chainCallback=t}setDappDefaultChainCallback(t){this.dappDefaultChain=t}publishWeb3RequestEvent(t,e){const n={type:"WEB3_REQUEST",id:t,request:e};this.publishEvent("Web3Request",n,true).then((t=>{})).catch((t=>{this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:n.id,response:{method:e.method,errorMessage:t.message}})}));if(this.isMobileWeb){this.openCoinbaseWalletDeeplink(e.method)}}openCoinbaseWalletDeeplink(t){if(!(this.ui instanceof Tc.WLMobileRelayUI))return;switch(t){case"requestEthereumAccounts":case"switchEthereumChain":return;default:window.addEventListener("blur",(()=>{window.addEventListener("focus",(()=>{this.connection.checkUnseenEvents()}),{once:true})}),{once:true});this.ui.openCoinbaseWalletDeeplink();break}}publishWeb3RequestCanceledEvent(t){const e={type:"WEB3_REQUEST_CANCELED",id:t};this.publishEvent("Web3RequestCanceled",e,false).then()}publishEvent(t,e,n){return this.connection.publishEvent(t,e,n)}handleWeb3ResponseMessage(t){const{response:e}=t;if(e.method==="requestEthereumAccounts"){Pc.accountRequestCallbackIds.forEach((e=>this.invokeCallback(Object.assign(Object.assign({},t),{id:e}))));Pc.accountRequestCallbackIds.clear();return}this.invokeCallback(t)}handleErrorResponse(t,e,n){var i;const s=(i=n===null||n===void 0?void 0:n.message)!==null&&i!==void 0?i:"Unspecified error message.";this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:t,response:{method:e,errorMessage:s}})}invokeCallback(t){const e=this.relayEventManager.callbacks.get(t.id);if(e){e(t.response);this.relayEventManager.callbacks.delete(t.id)}}requestEthereumAccounts(){const t={method:"requestEthereumAccounts",params:{appName:this.appName,appLogoUrl:this.appLogoUrl||null}};const e=(0,Dc.randomBytesHex)(8);return new Promise(((n,i)=>{this.relayEventManager.callbacks.set(e,(t=>{if((0,Ac.isErrorResponse)(t)){return i(new Error(t.errorMessage))}n(t)}));Pc.accountRequestCallbackIds.add(e);this.publishWeb3RequestEvent(e,t)}))}watchAsset(t,e,n,i,s,r){const o={method:"watchAsset",params:{type:t,options:{address:e,symbol:n,decimals:i,image:s},chainId:r}};let a=null;const u=(0,Dc.randomBytesHex)(8);const c=t=>{this.publishWeb3RequestCanceledEvent(u);this.handleErrorResponse(u,o.method,t);a===null||a===void 0?void 0:a()};{a=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:c,onResetConnection:this.resetAndReload})}return new Promise(((t,e)=>{this.relayEventManager.callbacks.set(u,(n=>{a===null||a===void 0?void 0:a();if((0,Ac.isErrorResponse)(n)){return e(new Error(n.errorMessage))}t(n)}));this.publishWeb3RequestEvent(u,o)}))}addEthereumChain(t,e,n,i,s,r){const o={method:"addEthereumChain",params:{chainId:t,rpcUrls:e,blockExplorerUrls:i,chainName:s,iconUrls:n,nativeCurrency:r}};let a=null;const u=(0,Dc.randomBytesHex)(8);const c=t=>{this.publishWeb3RequestCanceledEvent(u);this.handleErrorResponse(u,o.method,t);a===null||a===void 0?void 0:a()};{a=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:c,onResetConnection:this.resetAndReload})}return new Promise(((t,e)=>{this.relayEventManager.callbacks.set(u,(n=>{a===null||a===void 0?void 0:a();if((0,Ac.isErrorResponse)(n)){return e(new Error(n.errorMessage))}t(n)}));this.publishWeb3RequestEvent(u,o)}))}switchEthereumChain(t,e){const n={method:"switchEthereumChain",params:Object.assign({chainId:t},{address:e})};const i=(0,Dc.randomBytesHex)(8);return new Promise(((t,e)=>{this.relayEventManager.callbacks.set(i,(n=>{if((0,Ac.isErrorResponse)(n)&&n.errorCode){return e(Nc.standardErrors.provider.custom({code:n.errorCode,message:`Unrecognized chain ID. Try adding the chain using addEthereumChain first.`}))}else if((0,Ac.isErrorResponse)(n)){return e(new Error(n.errorMessage))}t(n)}));this.publishWeb3RequestEvent(i,n)}))}}xr.WalletLinkRelay=Pc;Pc.accountRequestCallbackIds=new Set;var Uc=n&&n.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Jt,"__esModule",{value:true});Jt.WalletLinkSigner=void 0;const Hc=Uc(kr);const Vc=_r;const Zc=Mr;const zc=S;const Bc=xr;const Wc=kc;const qc=w;const $c=Z;const Fc=It;const Gc="DefaultChainId";const Yc="DefaultJsonRpcUrl";class Jc{constructor(t){var e,n;this._relay=null;this._addresses=[];this.hasMadeFirstChainChangedEmission=false;const{appName:i,appLogoUrl:s}=t.metadata;this._appName=i;this._appLogoUrl=s;this._storage=new Fc.ScopedLocalStorage("walletlink",Wc.WALLETLINK_URL);this.updateListener=t.updateListener;this._relayEventManager=new Zc.RelayEventManager;this._jsonRpcUrlFromOpts="";const r=this._storage.getItem(Vc.LOCAL_STORAGE_ADDRESSES_KEY);if(r){const t=r.split(" ");if(t[0]!==""){this._addresses=t.map((t=>(0,$c.ensureAddressString)(t)));(e=this.updateListener)===null||e===void 0?void 0:e.onAccountsUpdate({accounts:this._addresses,source:"storage"})}}const o=this._storage.getItem(Gc);if(o){(n=this.updateListener)===null||n===void 0?void 0:n.onChainUpdate({chain:{id:this.getChainId(),rpcUrl:this.jsonRpcUrl},source:"storage"});this.hasMadeFirstChainChangedEmission=true}this.initializeRelay()}getSession(){const t=this.initializeRelay();const{id:e,secret:n}=t.getWalletLinkSession();return{id:e,secret:n}}async handshake(){const t=await this.request({method:"eth_requestAccounts"});return t}get selectedAddress(){return this._addresses[0]||undefined}get jsonRpcUrl(){var t;return(t=this._storage.getItem(Yc))!==null&&t!==void 0?t:this._jsonRpcUrlFromOpts}set jsonRpcUrl(t){this._storage.setItem(Yc,t)}updateProviderInfo(t,e){var n;this.jsonRpcUrl=t;const i=this.getChainId();this._storage.setItem(Gc,e.toString(10));const s=(0,$c.ensureIntNumber)(e)!==i;if(s||!this.hasMadeFirstChainChangedEmission){(n=this.updateListener)===null||n===void 0?void 0:n.onChainUpdate({chain:{id:e,rpcUrl:t},source:"wallet"});this.hasMadeFirstChainChangedEmission=true}}async watchAsset(t,e,n,i,s,r){const o=this.initializeRelay();const a=await o.watchAsset(t,e,n,i,s,r===null||r===void 0?void 0:r.toString());if((0,zc.isErrorResponse)(a))return false;return!!a.result}async addEthereumChain(t,e,n,i,s,r){var o,a;if((0,$c.ensureIntNumber)(t)===this.getChainId()){return false}const u=this.initializeRelay();if(!this._isAuthorized()){await u.requestEthereumAccounts()}const c=await u.addEthereumChain(t.toString(),e,s,n,i,r);if((0,zc.isErrorResponse)(c))return false;if(((o=c.result)===null||o===void 0?void 0:o.isApproved)===true){this.updateProviderInfo(e[0],t)}return((a=c.result)===null||a===void 0?void 0:a.isApproved)===true}async switchEthereumChain(t){const e=this.initializeRelay();const n=await e.switchEthereumChain(t.toString(10),this.selectedAddress||undefined);if((0,zc.isErrorResponse)(n)){if(!n.errorCode)return;if(n.errorCode===qc.standardErrorCodes.provider.unsupportedChain){throw qc.standardErrors.provider.unsupportedChain()}else{throw qc.standardErrors.provider.custom({message:n.errorMessage,code:n.errorCode})}}const i=n.result;if(i.isApproved&&i.rpcUrl.length>0){this.updateProviderInfo(i.rpcUrl,t)}}async disconnect(){if(this._relay){this._relay.resetAndReload()}this._storage.clear()}async request(t){try{return this._request(t).catch((t=>{throw t}))}catch(t){return Promise.reject(t)}}async _request(t){if(!t||typeof t!=="object"||Array.isArray(t)){throw qc.standardErrors.rpc.invalidRequest({message:"Expected a single, non-array, object argument.",data:t})}const{method:e,params:n}=t;if(typeof e!=="string"||e.length===0){throw qc.standardErrors.rpc.invalidRequest({message:"'args.method' must be a non-empty string.",data:t})}if(n!==undefined&&!Array.isArray(n)&&(typeof n!=="object"||n===null)){throw qc.standardErrors.rpc.invalidRequest({message:"'args.params' must be an object or array if provided.",data:t})}const i=n===undefined?[]:n;const s=this._relayEventManager.makeRequestId();const r=await this._sendRequestAsync({method:e,params:i,jsonrpc:"2.0",id:s});return r.result}_setAddresses(t,e){var n;if(!Array.isArray(t)){throw new Error("addresses is not an array")}const i=t.map((t=>(0,$c.ensureAddressString)(t)));if(JSON.stringify(i)===JSON.stringify(this._addresses)){return}this._addresses=i;(n=this.updateListener)===null||n===void 0?void 0:n.onAccountsUpdate({accounts:i,source:"wallet"});this._storage.setItem(Vc.LOCAL_STORAGE_ADDRESSES_KEY,i.join(" "))}_sendRequestAsync(t){return new Promise(((e,n)=>{try{const n=this._handleSynchronousMethods(t);if(n!==undefined){return e({jsonrpc:"2.0",id:t.id,result:n})}}catch(t){return n(t)}this._handleAsynchronousMethods(t).then((n=>n&&e(Object.assign(Object.assign({},n),{id:t.id})))).catch((t=>n(t)))}))}_handleSynchronousMethods(t){const{method:e}=t;switch(e){case"eth_accounts":return this._eth_accounts();case"eth_coinbase":return this._eth_coinbase();case"net_version":return this._net_version();case"eth_chainId":return this._eth_chainId();default:return undefined}}async _handleAsynchronousMethods(t){const{method:e}=t;const n=t.params||[];switch(e){case"eth_requestAccounts":return this._eth_requestAccounts();case"eth_sign":return this._eth_sign(n);case"eth_ecRecover":return this._eth_ecRecover(n);case"personal_sign":return this._personal_sign(n);case"personal_ecRecover":return this._personal_ecRecover(n);case"eth_signTransaction":return this._eth_signTransaction(n);case"eth_sendRawTransaction":return this._eth_sendRawTransaction(n);case"eth_sendTransaction":return this._eth_sendTransaction(n);case"eth_signTypedData_v1":return this._eth_signTypedData_v1(n);case"eth_signTypedData_v2":return this._throwUnsupportedMethodError();case"eth_signTypedData_v3":return this._eth_signTypedData_v3(n);case"eth_signTypedData_v4":case"eth_signTypedData":return this._eth_signTypedData_v4(n);case"wallet_addEthereumChain":return this._wallet_addEthereumChain(n);case"wallet_switchEthereumChain":return this._wallet_switchEthereumChain(n);case"wallet_watchAsset":return this._wallet_watchAsset(n);default:return this._throwUnsupportedMethodError()}}_isKnownAddress(t){try{const e=(0,$c.ensureAddressString)(t);const n=this._addresses.map((t=>(0,$c.ensureAddressString)(t)));return n.includes(e)}catch(t){}return false}_ensureKnownAddress(t){if(!this._isKnownAddress(t)){throw new Error("Unknown Ethereum address")}}_prepareTransactionParams(e){const n=e.from?(0,$c.ensureAddressString)(e.from):this.selectedAddress;if(!n){throw new Error("Ethereum address is unavailable")}this._ensureKnownAddress(n);const i=e.to?(0,$c.ensureAddressString)(e.to):null;const s=e.value!=null?(0,$c.ensureBigInt)(e.value):BigInt(0);const r=e.data?(0,$c.ensureBuffer)(e.data):t.Buffer.alloc(0);const o=e.nonce!=null?(0,$c.ensureIntNumber)(e.nonce):null;const a=e.gasPrice!=null?(0,$c.ensureBigInt)(e.gasPrice):null;const u=e.maxFeePerGas!=null?(0,$c.ensureBigInt)(e.maxFeePerGas):null;const c=e.maxPriorityFeePerGas!=null?(0,$c.ensureBigInt)(e.maxPriorityFeePerGas):null;const h=e.gas!=null?(0,$c.ensureBigInt)(e.gas):null;const l=e.chainId?(0,$c.ensureIntNumber)(e.chainId):this.getChainId();return{fromAddress:n,toAddress:i,weiValue:s,data:r,nonce:o,gasPriceInWei:a,maxFeePerGas:u,maxPriorityFeePerGas:c,gasLimit:h,chainId:l}}_isAuthorized(){return this._addresses.length>0}_requireAuthorization(){if(!this._isAuthorized()){throw qc.standardErrors.provider.unauthorized({})}}_throwUnsupportedMethodError(){throw qc.standardErrors.provider.unsupportedMethod({})}async _signEthereumMessage(t,e,n,i){this._ensureKnownAddress(e);try{const s=this.initializeRelay();const r=await s.signEthereumMessage(t,e,n,i);if((0,zc.isErrorResponse)(r)){throw new Error(r.errorMessage)}return{jsonrpc:"2.0",id:0,result:r.result}}catch(t){if(typeof t.message==="string"&&t.message.match(/(denied|rejected)/i)){throw qc.standardErrors.provider.userRejectedRequest("User denied message signature")}throw t}}async _ethereumAddressFromSignedMessage(t,e,n){const i=this.initializeRelay();const s=await i.ethereumAddressFromSignedMessage(t,e,n);if((0,zc.isErrorResponse)(s)){throw new Error(s.errorMessage)}return{jsonrpc:"2.0",id:0,result:s.result}}_eth_accounts(){return[...this._addresses]}_eth_coinbase(){return this.selectedAddress||null}_net_version(){return this.getChainId().toString(10)}_eth_chainId(){return(0,$c.hexStringFromIntNumber)(this.getChainId())}getChainId(){const t=this._storage.getItem(Gc);if(!t){return(0,$c.ensureIntNumber)(1)}const e=parseInt(t,10);return(0,$c.ensureIntNumber)(e)}async _eth_requestAccounts(){if(this._isAuthorized()){return Promise.resolve({jsonrpc:"2.0",id:0,result:this._addresses})}let t;try{const e=this.initializeRelay();t=await e.requestEthereumAccounts();if((0,zc.isErrorResponse)(t)){throw new Error(t.errorMessage)}}catch(t){if(typeof t.message==="string"&&t.message.match(/(denied|rejected)/i)){throw qc.standardErrors.provider.userRejectedRequest("User denied account authorization")}throw t}if(!t.result){throw new Error("accounts received is empty")}this._setAddresses(t.result);return{jsonrpc:"2.0",id:0,result:this._addresses}}_eth_sign(t){this._requireAuthorization();const e=(0,$c.ensureAddressString)(t[0]);const n=(0,$c.ensureBuffer)(t[1]);return this._signEthereumMessage(n,e,false)}_eth_ecRecover(t){const e=(0,$c.ensureBuffer)(t[0]);const n=(0,$c.ensureBuffer)(t[1]);return this._ethereumAddressFromSignedMessage(e,n,false)}_personal_sign(t){this._requireAuthorization();const e=(0,$c.ensureBuffer)(t[0]);const n=(0,$c.ensureAddressString)(t[1]);return this._signEthereumMessage(e,n,true)}_personal_ecRecover(t){const e=(0,$c.ensureBuffer)(t[0]);const n=(0,$c.ensureBuffer)(t[1]);return this._ethereumAddressFromSignedMessage(e,n,true)}async _eth_signTransaction(t){this._requireAuthorization();const e=this._prepareTransactionParams(t[0]||{});try{const t=this.initializeRelay();const n=await t.signEthereumTransaction(e);if((0,zc.isErrorResponse)(n)){throw new Error(n.errorMessage)}return{jsonrpc:"2.0",id:0,result:n.result}}catch(t){if(typeof t.message==="string"&&t.message.match(/(denied|rejected)/i)){throw qc.standardErrors.provider.userRejectedRequest("User denied transaction signature")}throw t}}async _eth_sendRawTransaction(t){const e=(0,$c.ensureBuffer)(t[0]);const n=this.initializeRelay();const i=await n.submitEthereumTransaction(e,this.getChainId());if((0,zc.isErrorResponse)(i)){throw new Error(i.errorMessage)}return{jsonrpc:"2.0",id:0,result:i.result}}async _eth_sendTransaction(t){this._requireAuthorization();const e=this._prepareTransactionParams(t[0]||{});try{const t=this.initializeRelay();const n=await t.signAndSubmitEthereumTransaction(e);if((0,zc.isErrorResponse)(n)){throw new Error(n.errorMessage)}return{jsonrpc:"2.0",id:0,result:n.result}}catch(t){if(typeof t.message==="string"&&t.message.match(/(denied|rejected)/i)){throw qc.standardErrors.provider.userRejectedRequest("User denied transaction signature")}throw t}}async _eth_signTypedData_v1(t){this._requireAuthorization();const e=(0,$c.ensureParsedJSONObject)(t[0]);const n=(0,$c.ensureAddressString)(t[1]);this._ensureKnownAddress(n);const i=Hc.default.hashForSignTypedDataLegacy({data:e});const s=JSON.stringify(e,null,2);return this._signEthereumMessage(i,n,false,s)}async _eth_signTypedData_v3(t){this._requireAuthorization();const e=(0,$c.ensureAddressString)(t[0]);const n=(0,$c.ensureParsedJSONObject)(t[1]);this._ensureKnownAddress(e);const i=Hc.default.hashForSignTypedData_v3({data:n});const s=JSON.stringify(n,null,2);return this._signEthereumMessage(i,e,false,s)}async _eth_signTypedData_v4(t){this._requireAuthorization();const e=(0,$c.ensureAddressString)(t[0]);const n=(0,$c.ensureParsedJSONObject)(t[1]);this._ensureKnownAddress(e);const i=Hc.default.hashForSignTypedData_v4({data:n});const s=JSON.stringify(n,null,2);return this._signEthereumMessage(i,e,false,s)}async _wallet_addEthereumChain(t){var e,n,i,s;const r=t[0];if(((e=r.rpcUrls)===null||e===void 0?void 0:e.length)===0){return{jsonrpc:"2.0",id:0,error:{code:2,message:`please pass in at least 1 rpcUrl`}}}if(!r.chainName||r.chainName.trim()===""){throw qc.standardErrors.rpc.invalidParams("chainName is a required field")}if(!r.nativeCurrency){throw qc.standardErrors.rpc.invalidParams("nativeCurrency is a required field")}const o=parseInt(r.chainId,16);const a=await this.addEthereumChain(o,(n=r.rpcUrls)!==null&&n!==void 0?n:[],(i=r.blockExplorerUrls)!==null&&i!==void 0?i:[],r.chainName,(s=r.iconUrls)!==null&&s!==void 0?s:[],r.nativeCurrency);if(a){return{jsonrpc:"2.0",id:0,result:null}}return{jsonrpc:"2.0",id:0,error:{code:2,message:`unable to add ethereum chain`}}}async _wallet_switchEthereumChain(t){const e=t[0];await this.switchEthereumChain(parseInt(e.chainId,16));return{jsonrpc:"2.0",id:0,result:null}}async _wallet_watchAsset(t){const e=Array.isArray(t)?t[0]:t;if(!e.type){throw qc.standardErrors.rpc.invalidParams("Type is required")}if((e===null||e===void 0?void 0:e.type)!=="ERC20"){throw qc.standardErrors.rpc.invalidParams(`Asset of type '${e.type}' is not supported`)}if(!(e===null||e===void 0?void 0:e.options)){throw qc.standardErrors.rpc.invalidParams("Options are required")}if(!(e===null||e===void 0?void 0:e.options.address)){throw qc.standardErrors.rpc.invalidParams("Address is required")}const n=this.getChainId();const{address:i,symbol:s,image:r,decimals:o}=e.options;const a=await this.watchAsset(e.type,i,s,o,r,n);return{jsonrpc:"2.0",id:0,result:a}}initializeRelay(){if(!this._relay){const t=new Bc.WalletLinkRelay({linkAPIUrl:Wc.WALLETLINK_URL,storage:this._storage});t.setAppInfo(this._appName,this._appLogoUrl);t.attachUI();t.setAccountsCallback(((t,e)=>this._setAddresses(t,e)));t.setChainCallback(((t,e)=>{this.updateProviderInfo(e,parseInt(t,10))}));this._relay=t}return this._relay}}Jt.WalletLinkSigner=Jc;var Qc={};Object.defineProperty(Qc,"__esModule",{value:true});Qc.checkErrorForInvalidRequestArgs=Qc.getCoinbaseInjectedProvider=Qc.getCoinbaseInjectedSigner=Qc.fetchRPCRequest=void 0;const Kc=A;const Xc=w;async function th(t,e){if(!e.rpcUrl)throw Xc.standardErrors.rpc.internal("No RPC URL set for chain");const n=Object.assign(Object.assign({},t),{jsonrpc:"2.0",id:crypto.randomUUID()});const i=await window.fetch(e.rpcUrl,{method:"POST",body:JSON.stringify(n),mode:"cors",headers:{"Content-Type":"application/json","X-Cbw-Sdk-Version":Kc.LIB_VERSION}});const s=await i.json();return s.result}Qc.fetchRPCRequest=th;function eh(){const t=globalThis;return t.coinbaseWalletSigner}Qc.getCoinbaseInjectedSigner=eh;function nh(){const t=globalThis;return t.coinbaseWalletExtension}function ih(){var t,e;try{const n=globalThis;return(t=n.ethereum)!==null&&t!==void 0?t:(e=n.top)===null||e===void 0?void 0:e.ethereum}catch(t){return undefined}}function sh({metadata:t,preference:e}){var n;if(e.options!=="smartWalletOnly"){const e=eh();if(e)return undefined;const i=nh();if(i){const{appName:e,appLogoUrl:s,appChainIds:r}=t;(n=i.setAppInfo)===null||n===void 0?void 0:n.call(i,e,s,r);return i}}const i=ih();if(i===null||i===void 0?void 0:i.isCoinbaseBrowser){return i}return undefined}Qc.getCoinbaseInjectedProvider=sh;function rh(t){if(!t||typeof t!=="object"||Array.isArray(t)){return Xc.standardErrors.rpc.invalidParams({message:"Expected a single, non-array, object argument.",data:t})}const{method:e,params:n}=t;if(typeof e!=="string"||e.length===0){return Xc.standardErrors.rpc.invalidParams({message:"'args.method' must be a non-empty string.",data:t})}if(n!==undefined&&!Array.isArray(n)&&(typeof n!=="object"||n===null)){return Xc.standardErrors.rpc.invalidParams({message:"'args.params' must be an object or array if provided.",data:t})}return undefined}Qc.checkErrorForInvalidRequestArgs=rh;Object.defineProperty(wt,"__esModule",{value:true});wt.createSigner=wt.fetchSignerType=wt.storeSignerType=wt.loadSignerType=void 0;const oh=pt;const ah=Jt;const uh=w;const ch=Qc;const hh=It;const lh="SignerType";const fh=new hh.ScopedLocalStorage("CBWSDK","SignerConfigurator");function dh(){return fh.getItem(lh)}wt.loadSignerType=dh;function vh(t){fh.setItem(lh,t)}wt.storeSignerType=vh;async function wh(t){const{communicator:e,metadata:n}=t;bh(e,n).catch((()=>{}));const i={id:crypto.randomUUID(),event:"selectSignerType",data:t.preference};const{data:s}=await e.postRequestAndWaitForResponse(i);return s}wt.fetchSignerType=wh;function ph(t){const{signerType:e,metadata:n,communicator:i,updateListener:s}=t;switch(e){case"scw":return new oh.SCWSigner({metadata:n,updateListener:s,communicator:i});case"walletlink":return new ah.WalletLinkSigner({metadata:n,updateListener:s});case"extension":{const t=(0,ch.getCoinbaseInjectedSigner)();if(!t){throw uh.standardErrors.rpc.internal("injected signer not found")}return t}}}wt.createSigner=ph;async function bh(t,e){await t.onMessage((({event:t})=>t==="WalletLinkSessionRequest"));const n=new ah.WalletLinkSigner({metadata:e});t.postMessage({event:"WalletLinkUpdate",data:{session:n.getSession()}});await n.handshake();t.postMessage({event:"WalletLinkUpdate",data:{connected:true}})}var mh={};var gh={};Object.defineProperty(gh,"__esModule",{value:true});gh.closePopup=gh.openPopup=void 0;const yh=w;const kh=420;const Eh=540;function _h(t){const e=(window.innerWidth-kh)/2+window.screenX;const n=(window.innerHeight-Eh)/2+window.screenY;const i=window.open(t,"Smart Wallet",`width=${kh}, height=${Eh}, left=${e}, top=${n}`);i===null||i===void 0?void 0:i.focus();if(!i){throw yh.standardErrors.rpc.internal("Pop up window failed to open")}return i}gh.openPopup=_h;function Mh(t){if(t&&!t.closed){t.close()}}gh.closePopup=Mh;Object.defineProperty(mh,"__esModule",{value:true});mh.Communicator=void 0;const Ch=A;const jh=gh;const xh=kc;const Sh=w;class Ih{constructor(t=xh.CB_KEYS_URL){this.popup=null;this.listeners=new Map;this.postMessage=async t=>{const e=await this.waitForPopupLoaded();e.postMessage(t,this.url.origin)};this.postRequestAndWaitForResponse=async t=>{const e=this.onMessage((({requestId:e})=>e===t.id));this.postMessage(t);return await e};this.onMessage=async t=>new Promise(((e,n)=>{const i=n=>{if(n.origin!==this.url.origin)return;const s=n.data;if(t(s)){e(s);window.removeEventListener("message",i);this.listeners.delete(i)}};window.addEventListener("message",i);this.listeners.set(i,{reject:n})}));this.disconnect=()=>{(0,jh.closePopup)(this.popup);this.popup=null;this.listeners.forEach((({reject:t},e)=>{t(Sh.standardErrors.provider.userRejectedRequest("Request rejected"));window.removeEventListener("message",e)}));this.listeners.clear()};this.waitForPopupLoaded=async()=>{if(this.popup&&!this.popup.closed){this.popup.focus();return this.popup}this.popup=(0,jh.openPopup)(this.url);this.onMessage((({event:t})=>t==="PopupUnload")).then(this.disconnect).catch((()=>{}));return this.onMessage((({event:t})=>t==="PopupLoaded")).then((t=>{this.postMessage({requestId:t.id,data:{version:Ch.LIB_VERSION}})})).then((()=>{if(!this.popup)throw Sh.standardErrors.rpc.internal();return this.popup}))};this.url=new URL(t)}}mh.Communicator=Ih;var Ah={};Object.defineProperty(Ah,"__esModule",{value:true});Ah.determineMethodCategory=void 0;const Oh={handshake:["eth_requestAccounts"],sign:["eth_ecRecover","personal_sign","personal_ecRecover","eth_signTransaction","eth_sendTransaction","eth_signTypedData_v1","eth_signTypedData_v3","eth_signTypedData_v4","eth_signTypedData","wallet_addEthereumChain","wallet_switchEthereumChain","wallet_watchAsset","wallet_getCapabilities","wallet_sendCalls","wallet_showCallsStatus"],state:["eth_chainId","eth_accounts","eth_coinbase","net_version"],deprecated:["eth_sign","eth_signTypedData_v2"],unsupported:["eth_subscribe","eth_unsubscribe"],fetch:[]};function Lh(t){for(const e in Oh){const n=e;if(Oh[n].includes(t)){return n}}return undefined}Ah.determineMethodCategory=Lh;var Th=n&&n.__rest||function(t,e){var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0)n[i]=t[i];if(t!=null&&typeof Object.getOwnPropertySymbols==="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++){if(e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s]))n[i[s]]=t[i[s]]}return n};var Nh=n&&n.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(v,"__esModule",{value:true});v.CoinbaseWalletProvider=void 0;const Dh=Nh(s.exports);const Rh=w;const Ph=x;const Uh=U;const Hh=Z;const Vh=wt;const Zh=Qc;const zh=mh;const Bh=Ah;const Wh=It;class qh extends Dh.default{constructor(t){var e,n;var{metadata:i}=t,s=t.preference,{keysUrl:r}=s,o=Th(s,["keysUrl"]);super();this.accounts=[];this.handlers={handshake:async t=>{try{if(this.connected){this.emit("connect",{chainId:(0,Hh.hexStringFromIntNumber)((0,Uh.IntNumber)(this.chain.id))});return this.accounts}const t=await this.requestSignerSelection();const e=this.initSigner(t);const n=await e.handshake();this.signer=e;(0,Vh.storeSignerType)(t);this.emit("connect",{chainId:(0,Hh.hexStringFromIntNumber)((0,Uh.IntNumber)(this.chain.id))});return n}catch(t){this.handleUnauthorizedError(t);throw t}},sign:async t=>{if(!this.connected||!this.signer){throw Rh.standardErrors.provider.unauthorized("Must call 'eth_requestAccounts' before other methods")}try{return await this.signer.request(t)}catch(t){this.handleUnauthorizedError(t);throw t}},fetch:t=>(0,Zh.fetchRPCRequest)(t,this.chain),state:t=>{const e=()=>{if(this.connected)return this.accounts;throw Rh.standardErrors.provider.unauthorized("Must call 'eth_requestAccounts' before other methods")};switch(t.method){case"eth_chainId":return(0,Hh.hexStringFromIntNumber)((0,Uh.IntNumber)(this.chain.id));case"net_version":return this.chain.id;case"eth_accounts":return e();case"eth_coinbase":return e()[0];default:return this.handlers.unsupported(t)}},deprecated:({method:t})=>{throw Rh.standardErrors.rpc.methodNotSupported(`Method ${t} is deprecated.`)},unsupported:({method:t})=>{throw Rh.standardErrors.rpc.methodNotSupported(`Method ${t} is not supported.`)}};this.isCoinbaseWallet=true;this.updateListener={onAccountsUpdate:({accounts:t,source:e})=>{if((0,Hh.areAddressArraysEqual)(this.accounts,t))return;this.accounts=t;if(e==="storage")return;this.emit("accountsChanged",this.accounts)},onChainUpdate:({chain:t,source:e})=>{if(t.id===this.chain.id&&t.rpcUrl===this.chain.rpcUrl)return;this.chain=t;if(e==="storage")return;this.emit("chainChanged",(0,Hh.hexStringFromIntNumber)((0,Uh.IntNumber)(t.id)))}};this.metadata=i;this.preference=o;this.communicator=new zh.Communicator(r);this.chain={id:(n=(e=i.appChainIds)===null||e===void 0?void 0:e[0])!==null&&n!==void 0?n:1};const a=(0,Vh.loadSignerType)();this.signer=a?this.initSigner(a):null}get connected(){return this.accounts.length>0}async request(t){var e;try{const n=(0,Zh.checkErrorForInvalidRequestArgs)(t);if(n)throw n;const i=(e=(0,Bh.determineMethodCategory)(t.method))!==null&&e!==void 0?e:"fetch";return this.handlers[i](t)}catch(e){return Promise.reject((0,Ph.serializeError)(e,t.method))}}handleUnauthorizedError(t){const e=t;if(e.code===Rh.standardErrorCodes.provider.unauthorized)this.disconnect()}async enable(){console.warn(`.enable() has been deprecated. Please use .request({ method: "eth_requestAccounts" }) instead.`);return await this.request({method:"eth_requestAccounts"})}async disconnect(){this.accounts=[];this.chain={id:1};Wh.ScopedLocalStorage.clearAll();this.emit("disconnect",Rh.standardErrors.provider.disconnected("User initiated disconnection"))}requestSignerSelection(){return(0,Vh.fetchSignerType)({communicator:this.communicator,preference:this.preference,metadata:this.metadata})}initSigner(t){return(0,Vh.createSigner)({signerType:t,metadata:this.metadata,communicator:this.communicator,updateListener:this.updateListener})}}v.CoinbaseWalletProvider=qh;Object.defineProperty(l,"__esModule",{value:true});l.CoinbaseWalletSDK=void 0;const $h=f;const Fh=v;const Gh=It;const Yh=A;const Jh=Z;const Qh=Qc;class Kh{constructor(t){this.metadata={appName:t.appName||"Dapp",appLogoUrl:t.appLogoUrl||(0,Jh.getFavicon)(),appChainIds:t.appChainIds||[]};this.storeLatestVersion()}makeWeb3Provider(t={options:"all"}){var e;const n={metadata:this.metadata,preference:t};return(e=(0,Qh.getCoinbaseInjectedProvider)(n))!==null&&e!==void 0?e:new Fh.CoinbaseWalletProvider(n)}getCoinbaseWalletLogo(t,e=240){return(0,$h.walletLogo)(t,e)}storeLatestVersion(){const t=new Gh.ScopedLocalStorage("CBWSDK");t.setItem("VERSION",Yh.LIB_VERSION)}}l.CoinbaseWalletSDK=Kh;(function(t){Object.defineProperty(t,"__esModule",{value:true});t.CoinbaseWalletSDK=void 0;const e=l;t.default=e.CoinbaseWalletSDK;var n=l;Object.defineProperty(t,"CoinbaseWalletSDK",{enumerable:true,get:function(){return n.CoinbaseWalletSDK}})})(h);const Xh=async()=>{const t=new h.CoinbaseWalletSDK({appLogoUrl:"/",appName:"Charity",appChainIds:a});return t.makeWeb3Provider()};export{Xh as getCoinbaseProviderInstance};
//# sourceMappingURL=p-5144beb8.js.map