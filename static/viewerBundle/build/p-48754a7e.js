import{l as t,W as r,m as n}from"./p-d51d1b82.js";import{p as i,g as e,e as s,f as o,h as a,i as u,j as h,k as f,v as c,l,m as d,a as v,d as w,c as p,o as y}from"./p-e04f0cde.js";import"./p-6ad9f672.js";var b=undefined&&undefined.__spreadArray||function(t,r,n){if(n||arguments.length===2)for(var i=0,e=r.length,s;i<e;i++){if(s||!(i in r)){if(!s)s=Array.prototype.slice.call(r,0,i);s[i]=r[i]}}return t.concat(s||Array.prototype.slice.call(r))};var g=function(){function t(t,r,n){this.name=t;this.version=r;this.os=n;this.type="browser"}return t}();var m=function(){function t(t){this.version=t;this.type="node";this.name="node";this.os=i.platform}return t}();var A=function(){function t(t,r,n,i){this.name=t;this.version=r;this.os=n;this.bot=i;this.type="bot-device"}return t}();var E=function(){function t(){this.type="bot";this.bot=true;this.name="bot";this.version=null;this.os=null}return t}();var M=function(){function t(){this.type="react-native";this.name="react-native";this.version=null;this.os=null}return t}();var _=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/;var O=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/;var I=3;var S=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",_]];var N=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function C(t){if(!!t){return x(t)}if(typeof document==="undefined"&&typeof navigator!=="undefined"&&navigator.product==="ReactNative"){return new M}if(typeof navigator!=="undefined"){return x(navigator.userAgent)}return T()}function j(t){return t!==""&&S.reduce((function(r,n){var i=n[0],e=n[1];if(r){return r}var s=e.exec(t);return!!s&&[i,s]}),false)}function x(t){var r=j(t);if(!r){return null}var n=r[0],i=r[1];if(n==="searchbot"){return new E}var e=i[1]&&i[1].split(".").join("_").split("_").slice(0,3);if(e){if(e.length<I){e=b(b([],e,true),R(I-e.length),true)}}else{e=[]}var s=e.join(".");var o=P(t);var a=O.exec(t);if(a&&a[1]){return new A(n,s,o,a[1])}return new g(n,s,o)}function P(t){for(var r=0,n=N.length;r<n;r++){var i=N[r],e=i[0],s=i[1];var o=s.exec(t);if(o){return e}}return null}function T(){var t=typeof i!=="undefined"&&i.version;return t?new m(i.version.slice(1)):null}function R(t){var r=[];for(var n=0;n<t;n++){r.push("0")}return r}var D={};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var U=function(t,r){U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)if(r.hasOwnProperty(n))t[n]=r[n]};return U(t,r)};function B(t,r){U(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}var k=function(){k=Object.assign||function t(r){for(var n,i=1,e=arguments.length;i<e;i++){n=arguments[i];for(var s in n)if(Object.prototype.hasOwnProperty.call(n,s))r[s]=n[s]}return r};return k.apply(this,arguments)};function $(t,r){var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)&&r.indexOf(i)<0)n[i]=t[i];if(t!=null&&typeof Object.getOwnPropertySymbols==="function")for(var e=0,i=Object.getOwnPropertySymbols(t);e<i.length;e++){if(r.indexOf(i[e])<0&&Object.prototype.propertyIsEnumerable.call(t,i[e]))n[i[e]]=t[i[e]]}return n}function F(t,r,n,i){var e=arguments.length,s=e<3?r:i===null?i=Object.getOwnPropertyDescriptor(r,n):i,o;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")s=Reflect.decorate(t,r,n,i);else for(var a=t.length-1;a>=0;a--)if(o=t[a])s=(e<3?o(s):e>3?o(r,n,s):o(r,n))||s;return e>3&&s&&Object.defineProperty(r,n,s),s}function q(t,r){return function(n,i){r(n,i,t)}}function L(t,r){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(t,r)}function K(t,r,n,i){function e(t){return t instanceof n?t:new n((function(r){r(t)}))}return new(n||(n=Promise))((function(n,s){function o(t){try{u(i.next(t))}catch(t){s(t)}}function a(t){try{u(i["throw"](t))}catch(t){s(t)}}function u(t){t.done?n(t.value):e(t.value).then(o,a)}u((i=i.apply(t,r||[])).next())}))}function H(t,r){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,e,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol==="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(t){return function(r){return u([t,r])}}function u(o){if(i)throw new TypeError("Generator is already executing.");while(n)try{if(i=1,e&&(s=o[0]&2?e["return"]:o[0]?e["throw"]||((s=e["return"])&&s.call(e),0):e.next)&&!(s=s.call(e,o[1])).done)return s;if(e=0,s)o=[o[0]&2,s.value];switch(o[0]){case 0:case 1:s=o;break;case 4:n.label++;return{value:o[1],done:false};case 5:n.label++;e=o[1];o=[0];continue;case 7:o=n.ops.pop();n.trys.pop();continue;default:if(!(s=n.trys,s=s.length>0&&s[s.length-1])&&(o[0]===6||o[0]===2)){n=0;continue}if(o[0]===3&&(!s||o[1]>s[0]&&o[1]<s[3])){n.label=o[1];break}if(o[0]===6&&n.label<s[1]){n.label=s[1];s=o;break}if(s&&n.label<s[2]){n.label=s[2];n.ops.push(o);break}if(s[2])n.ops.pop();n.trys.pop();continue}o=r.call(t,n)}catch(t){o=[6,t];e=0}finally{i=s=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:true}}}function G(t,r,n,i){if(i===undefined)i=n;t[i]=r[n]}function Q(t,r){for(var n in t)if(n!=="default"&&!r.hasOwnProperty(n))r[n]=t[n]}function J(t){var r=typeof Symbol==="function"&&Symbol.iterator,n=r&&t[r],i=0;if(n)return n.call(t);if(t&&typeof t.length==="number")return{next:function(){if(t&&i>=t.length)t=void 0;return{value:t&&t[i++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}function V(t,r){var n=typeof Symbol==="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),e,s=[],o;try{while((r===void 0||r-- >0)&&!(e=i.next()).done)s.push(e.value)}catch(t){o={error:t}}finally{try{if(e&&!e.done&&(n=i["return"]))n.call(i)}finally{if(o)throw o.error}}return s}function z(){for(var t=[],r=0;r<arguments.length;r++)t=t.concat(V(arguments[r]));return t}function Y(){for(var t=0,r=0,n=arguments.length;r<n;r++)t+=arguments[r].length;for(var i=Array(t),e=0,r=0;r<n;r++)for(var s=arguments[r],o=0,a=s.length;o<a;o++,e++)i[e]=s[o];return i}function W(t){return this instanceof W?(this.v=t,this):new W(t)}function X(t,r,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,r||[]),e,s=[];return e={},o("next"),o("throw"),o("return"),e[Symbol.asyncIterator]=function(){return this},e;function o(t){if(i[t])e[t]=function(r){return new Promise((function(n,i){s.push([t,r,n,i])>1||a(t,r)}))}}function a(t,r){try{u(i[t](r))}catch(t){c(s[0][3],t)}}function u(t){t.value instanceof W?Promise.resolve(t.value.v).then(h,f):c(s[0][2],t)}function h(t){a("next",t)}function f(t){a("throw",t)}function c(t,r){if(t(r),s.shift(),s.length)a(s[0][0],s[0][1])}}function Z(t){var r,n;return r={},i("next"),i("throw",(function(t){throw t})),i("return"),r[Symbol.iterator]=function(){return this},r;function i(i,e){r[i]=t[i]?function(r){return(n=!n)?{value:W(t[i](r)),done:i==="return"}:e?e(r):r}:e}}function tt(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t[Symbol.asyncIterator],n;return r?r.call(t):(t=typeof J==="function"?J(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(r){n[r]=t[r]&&function(n){return new Promise((function(i,s){n=t[r](n),e(i,s,n.done,n.value)}))}}function e(t,r,n,i){Promise.resolve(i).then((function(r){t({value:r,done:n})}),r)}}function rt(t,r){if(Object.defineProperty){Object.defineProperty(t,"raw",{value:r})}else{t.raw=r}return t}function nt(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var n in t)if(Object.hasOwnProperty.call(t,n))r[n]=t[n];r.default=t;return r}function it(t){return t&&t.__esModule?t:{default:t}}function et(t,r){if(!r.has(t)){throw new TypeError("attempted to get private field on non-instance")}return r.get(t)}function st(t,r,n){if(!r.has(t)){throw new TypeError("attempted to set private field on non-instance")}r.set(t,n);return n}const ot=Object.freeze({__proto__:null,__extends:B,get __assign(){return k},__rest:$,__decorate:F,__param:q,__metadata:L,__awaiter:K,__generator:H,__createBinding:G,__exportStar:Q,__values:J,__read:V,__spread:z,__spreadArrays:Y,__await:W,__asyncGenerator:X,__asyncDelegator:Z,__asyncValues:tt,__makeTemplateObject:rt,__importStar:nt,__importDefault:it,__classPrivateFieldGet:et,__classPrivateFieldSet:st});const at=e(ot);var ut={};var ht={};Object.defineProperty(ht,"__esModule",{value:true});ht.delay=void 0;function ft(t){return new Promise((r=>{setTimeout((()=>{r(true)}),t)}))}ht.delay=ft;var ct={};var lt={};var dt={};Object.defineProperty(dt,"__esModule",{value:true});dt.ONE_THOUSAND=dt.ONE_HUNDRED=void 0;dt.ONE_HUNDRED=100;dt.ONE_THOUSAND=1e3;var vt={};(function(t){Object.defineProperty(t,"__esModule",{value:true});t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0;t.ONE_SECOND=1;t.FIVE_SECONDS=5;t.TEN_SECONDS=10;t.THIRTY_SECONDS=30;t.SIXTY_SECONDS=60;t.ONE_MINUTE=t.SIXTY_SECONDS;t.FIVE_MINUTES=t.ONE_MINUTE*5;t.TEN_MINUTES=t.ONE_MINUTE*10;t.THIRTY_MINUTES=t.ONE_MINUTE*30;t.SIXTY_MINUTES=t.ONE_MINUTE*60;t.ONE_HOUR=t.SIXTY_MINUTES;t.THREE_HOURS=t.ONE_HOUR*3;t.SIX_HOURS=t.ONE_HOUR*6;t.TWELVE_HOURS=t.ONE_HOUR*12;t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24;t.ONE_DAY=t.TWENTY_FOUR_HOURS;t.THREE_DAYS=t.ONE_DAY*3;t.FIVE_DAYS=t.ONE_DAY*5;t.SEVEN_DAYS=t.ONE_DAY*7;t.THIRTY_DAYS=t.ONE_DAY*30;t.ONE_WEEK=t.SEVEN_DAYS;t.TWO_WEEKS=t.ONE_WEEK*2;t.THREE_WEEKS=t.ONE_WEEK*3;t.FOUR_WEEKS=t.ONE_WEEK*4;t.ONE_YEAR=t.ONE_DAY*365})(vt);(function(t){Object.defineProperty(t,"__esModule",{value:true});const r=at;r.__exportStar(dt,t);r.__exportStar(vt,t)})(lt);Object.defineProperty(ct,"__esModule",{value:true});ct.fromMiliseconds=ct.toMiliseconds=void 0;const wt=lt;function pt(t){return t*wt.ONE_THOUSAND}ct.toMiliseconds=pt;function yt(t){return Math.floor(t/wt.ONE_THOUSAND)}ct.fromMiliseconds=yt;(function(t){Object.defineProperty(t,"__esModule",{value:true});const r=at;r.__exportStar(ht,t);r.__exportStar(ct,t)})(ut);var bt={};Object.defineProperty(bt,"__esModule",{value:true});bt.Watch=void 0;class gt{constructor(){this.timestamps=new Map}start(t){if(this.timestamps.has(t)){throw new Error(`Watch already started for label: ${t}`)}this.timestamps.set(t,{started:Date.now()})}stop(t){const r=this.get(t);if(typeof r.elapsed!=="undefined"){throw new Error(`Watch already stopped for label: ${t}`)}const n=Date.now()-r.started;this.timestamps.set(t,{started:r.started,elapsed:n})}get(t){const r=this.timestamps.get(t);if(typeof r==="undefined"){throw new Error(`No timestamp found for label: ${t}`)}return r}elapsed(t){const r=this.get(t);const n=r.elapsed||Date.now()-r.started;return n}}bt.Watch=gt;bt.default=gt;var mt={};var At={};Object.defineProperty(At,"__esModule",{value:true});At.IWatch=void 0;class Et{}At.IWatch=Et;(function(t){Object.defineProperty(t,"__esModule",{value:true});const r=at;r.__exportStar(At,t)})(mt);(function(t){Object.defineProperty(t,"__esModule",{value:true});const r=at;r.__exportStar(ut,t);r.__exportStar(bt,t);r.__exportStar(mt,t);r.__exportStar(lt,t)})(D);var Mt={};Object.defineProperty(Mt,"__esModule",{value:true});Mt.getLocalStorage=Mt.getLocalStorageOrThrow=Mt.getCrypto=Mt.getCryptoOrThrow=Rt=Mt.getLocation=Mt.getLocationOrThrow=xt=Mt.getNavigator=Mt.getNavigatorOrThrow=Nt=Mt.getDocument=Mt.getDocumentOrThrow=Mt.getFromWindowOrThrow=Mt.getFromWindow=void 0;function _t(t){let r=undefined;if(typeof window!=="undefined"&&typeof window[t]!=="undefined"){r=window[t]}return r}Mt.getFromWindow=_t;function Ot(t){const r=_t(t);if(!r){throw new Error(`${t} is not defined in Window`)}return r}Mt.getFromWindowOrThrow=Ot;function It(){return Ot("document")}Mt.getDocumentOrThrow=It;function St(){return _t("document")}var Nt=Mt.getDocument=St;function Ct(){return Ot("navigator")}Mt.getNavigatorOrThrow=Ct;function jt(){return _t("navigator")}var xt=Mt.getNavigator=jt;function Pt(){return Ot("location")}Mt.getLocationOrThrow=Pt;function Tt(){return _t("location")}var Rt=Mt.getLocation=Tt;function Dt(){return Ot("crypto")}Mt.getCryptoOrThrow=Dt;function Ut(){return _t("crypto")}Mt.getCrypto=Ut;function Bt(){return Ot("localStorage")}Mt.getLocalStorageOrThrow=Bt;function kt(){return _t("localStorage")}Mt.getLocalStorage=kt;var $t={};Object.defineProperty($t,"__esModule",{value:true});var Ft=$t.getWindowMetadata=void 0;const qt=Mt;function Lt(){let t;let r;try{t=qt.getDocumentOrThrow();r=qt.getLocationOrThrow()}catch(t){return null}function n(){const n=t.getElementsByTagName("link");const i=[];for(let t=0;t<n.length;t++){const e=n[t];const s=e.getAttribute("rel");if(s){if(s.toLowerCase().indexOf("icon")>-1){const t=e.getAttribute("href");if(t){if(t.toLowerCase().indexOf("https:")===-1&&t.toLowerCase().indexOf("http:")===-1&&t.indexOf("//")!==0){let n=r.protocol+"//"+r.host;if(t.indexOf("/")===0){n+=t}else{const i=r.pathname.split("/");i.pop();const e=i.join("/");n+=e+"/"+t}i.push(n)}else if(t.indexOf("//")===0){const n=r.protocol+t;i.push(n)}else{i.push(t)}}}}}return i}function i(...r){const n=t.getElementsByTagName("meta");for(let t=0;t<n.length;t++){const i=n[t];const e=["itemprop","property","name"].map((t=>i.getAttribute(t))).filter((t=>{if(t){return r.includes(t)}return false}));if(e.length&&e){const t=i.getAttribute("content");if(t){return t}}}return""}function e(){let r=i("name","og:site_name","og:title","twitter:title");if(!r){r=t.title}return r}function s(){const t=i("description","og:description","twitter:description","keywords");return t}const o=e();const a=s();const u=r.origin;const h=n();const f={description:a,url:u,icons:h,name:o};return f}Ft=$t.getWindowMetadata=Lt;var Kt={};var Ht=t=>encodeURIComponent(t).replace(/[!'()*]/g,(t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`));var Gt="%[a-f0-9]{2}";var Qt=new RegExp("("+Gt+")|([^%]+?)","gi");var Jt=new RegExp("("+Gt+")+","gi");function Vt(t,r){try{return[decodeURIComponent(t.join(""))]}catch(t){}if(t.length===1){return t}r=r||1;var n=t.slice(0,r);var i=t.slice(r);return Array.prototype.concat.call([],Vt(n),Vt(i))}function zt(t){try{return decodeURIComponent(t)}catch(i){var r=t.match(Qt)||[];for(var n=1;n<r.length;n++){t=Vt(r,n).join("");r=t.match(Qt)||[]}return t}}function Yt(t){var r={"%FE%FF":"��","%FF%FE":"��"};var n=Jt.exec(t);while(n){try{r[n[0]]=decodeURIComponent(n[0])}catch(t){var i=zt(n[0]);if(i!==n[0]){r[n[0]]=i}}n=Jt.exec(t)}r["%C2"]="�";var e=Object.keys(r);for(var s=0;s<e.length;s++){var o=e[s];t=t.replace(new RegExp(o,"g"),r[o])}return t}var Wt=function(t){if(typeof t!=="string"){throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`")}try{t=t.replace(/\+/g," ");return decodeURIComponent(t)}catch(r){return Yt(t)}};var Xt=(t,r)=>{if(!(typeof t==="string"&&typeof r==="string")){throw new TypeError("Expected the arguments to be of type `string`")}if(r===""){return[t]}const n=t.indexOf(r);if(n===-1){return[t]}return[t.slice(0,n),t.slice(n+r.length)]};var Zt=function(t,r){var n={};var i=Object.keys(t);var e=Array.isArray(r);for(var s=0;s<i.length;s++){var o=i[s];var a=t[o];if(e?r.indexOf(o)!==-1:r(o,a,t)){n[o]=a}}return n};(function(t){const r=Ht;const n=Wt;const i=Xt;const e=Zt;const s=t=>t===null||t===undefined;const o=Symbol("encodeFragmentIdentifier");function a(t){switch(t.arrayFormat){case"index":return r=>(n,i)=>{const e=n.length;if(i===undefined||t.skipNull&&i===null||t.skipEmptyString&&i===""){return n}if(i===null){return[...n,[f(r,t),"[",e,"]"].join("")]}return[...n,[f(r,t),"[",f(e,t),"]=",f(i,t)].join("")]};case"bracket":return r=>(n,i)=>{if(i===undefined||t.skipNull&&i===null||t.skipEmptyString&&i===""){return n}if(i===null){return[...n,[f(r,t),"[]"].join("")]}return[...n,[f(r,t),"[]=",f(i,t)].join("")]};case"colon-list-separator":return r=>(n,i)=>{if(i===undefined||t.skipNull&&i===null||t.skipEmptyString&&i===""){return n}if(i===null){return[...n,[f(r,t),":list="].join("")]}return[...n,[f(r,t),":list=",f(i,t)].join("")]};case"comma":case"separator":case"bracket-separator":{const r=t.arrayFormat==="bracket-separator"?"[]=":"=";return n=>(i,e)=>{if(e===undefined||t.skipNull&&e===null||t.skipEmptyString&&e===""){return i}e=e===null?"":e;if(i.length===0){return[[f(n,t),r,f(e,t)].join("")]}return[[i,f(e,t)].join(t.arrayFormatSeparator)]}}default:return r=>(n,i)=>{if(i===undefined||t.skipNull&&i===null||t.skipEmptyString&&i===""){return n}if(i===null){return[...n,f(r,t)]}return[...n,[f(r,t),"=",f(i,t)].join("")]}}}function u(t){let r;switch(t.arrayFormat){case"index":return(t,n,i)=>{r=/\[(\d*)\]$/.exec(t);t=t.replace(/\[\d*\]$/,"");if(!r){i[t]=n;return}if(i[t]===undefined){i[t]={}}i[t][r[1]]=n};case"bracket":return(t,n,i)=>{r=/(\[\])$/.exec(t);t=t.replace(/\[\]$/,"");if(!r){i[t]=n;return}if(i[t]===undefined){i[t]=[n];return}i[t]=[].concat(i[t],n)};case"colon-list-separator":return(t,n,i)=>{r=/(:list)$/.exec(t);t=t.replace(/:list$/,"");if(!r){i[t]=n;return}if(i[t]===undefined){i[t]=[n];return}i[t]=[].concat(i[t],n)};case"comma":case"separator":return(r,n,i)=>{const e=typeof n==="string"&&n.includes(t.arrayFormatSeparator);const s=typeof n==="string"&&!e&&c(n,t).includes(t.arrayFormatSeparator);n=s?c(n,t):n;const o=e||s?n.split(t.arrayFormatSeparator).map((r=>c(r,t))):n===null?n:c(n,t);i[r]=o};case"bracket-separator":return(r,n,i)=>{const e=/(\[\])$/.test(r);r=r.replace(/\[\]$/,"");if(!e){i[r]=n?c(n,t):n;return}const s=n===null?[]:n.split(t.arrayFormatSeparator).map((r=>c(r,t)));if(i[r]===undefined){i[r]=s;return}i[r]=[].concat(i[r],s)};default:return(t,r,n)=>{if(n[t]===undefined){n[t]=r;return}n[t]=[].concat(n[t],r)}}}function h(t){if(typeof t!=="string"||t.length!==1){throw new TypeError("arrayFormatSeparator must be single character string")}}function f(t,n){if(n.encode){return n.strict?r(t):encodeURIComponent(t)}return t}function c(t,r){if(r.decode){return n(t)}return t}function l(t){if(Array.isArray(t)){return t.sort()}if(typeof t==="object"){return l(Object.keys(t)).sort(((t,r)=>Number(t)-Number(r))).map((r=>t[r]))}return t}function d(t){const r=t.indexOf("#");if(r!==-1){t=t.slice(0,r)}return t}function v(t){let r="";const n=t.indexOf("#");if(n!==-1){r=t.slice(n)}return r}function w(t){t=d(t);const r=t.indexOf("?");if(r===-1){return""}return t.slice(r+1)}function p(t,r){if(r.parseNumbers&&!Number.isNaN(Number(t))&&(typeof t==="string"&&t.trim()!=="")){t=Number(t)}else if(r.parseBooleans&&t!==null&&(t.toLowerCase()==="true"||t.toLowerCase()==="false")){t=t.toLowerCase()==="true"}return t}function y(t,r){r=Object.assign({decode:true,sort:true,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:false,parseBooleans:false},r);h(r.arrayFormatSeparator);const n=u(r);const e=Object.create(null);if(typeof t!=="string"){return e}t=t.trim().replace(/^[?#&]/,"");if(!t){return e}for(const s of t.split("&")){if(s===""){continue}let[t,o]=i(r.decode?s.replace(/\+/g," "):s,"=");o=o===undefined?null:["comma","separator","bracket-separator"].includes(r.arrayFormat)?o:c(o,r);n(c(t,r),o,e)}for(const t of Object.keys(e)){const n=e[t];if(typeof n==="object"&&n!==null){for(const t of Object.keys(n)){n[t]=p(n[t],r)}}else{e[t]=p(n,r)}}if(r.sort===false){return e}return(r.sort===true?Object.keys(e).sort():Object.keys(e).sort(r.sort)).reduce(((t,r)=>{const n=e[r];if(Boolean(n)&&typeof n==="object"&&!Array.isArray(n)){t[r]=l(n)}else{t[r]=n}return t}),Object.create(null))}t.extract=w;t.parse=y;t.stringify=(t,r)=>{if(!t){return""}r=Object.assign({encode:true,strict:true,arrayFormat:"none",arrayFormatSeparator:","},r);h(r.arrayFormatSeparator);const n=n=>r.skipNull&&s(t[n])||r.skipEmptyString&&t[n]==="";const i=a(r);const e={};for(const r of Object.keys(t)){if(!n(r)){e[r]=t[r]}}const o=Object.keys(e);if(r.sort!==false){o.sort(r.sort)}return o.map((n=>{const e=t[n];if(e===undefined){return""}if(e===null){return f(n,r)}if(Array.isArray(e)){if(e.length===0&&r.arrayFormat==="bracket-separator"){return f(n,r)+"[]"}return e.reduce(i(n),[]).join("&")}return f(n,r)+"="+f(e,r)})).filter((t=>t.length>0)).join("&")};t.parseUrl=(t,r)=>{r=Object.assign({decode:true},r);const[n,e]=i(t,"#");return Object.assign({url:n.split("?")[0]||"",query:y(w(t),r)},r&&r.parseFragmentIdentifier&&e?{fragmentIdentifier:c(e,r)}:{})};t.stringifyUrl=(r,n)=>{n=Object.assign({encode:true,strict:true,[o]:true},n);const i=d(r.url).split("?")[0]||"";const e=t.extract(r.url);const s=t.parse(e,{sort:false});const a=Object.assign(s,r.query);let u=t.stringify(a,n);if(u){u=`?${u}`}let h=v(r.url);if(r.fragmentIdentifier){h=`#${n[o]?f(r.fragmentIdentifier,n):r.fragmentIdentifier}`}return`${i}${u}${h}`};t.pick=(r,n,i)=>{i=Object.assign({parseFragmentIdentifier:true,[o]:false},i);const{url:s,query:a,fragmentIdentifier:u}=t.parseUrl(r,i);return t.stringifyUrl({url:s,query:e(a,n),fragmentIdentifier:u},i)};t.exclude=(r,n,i)=>{const e=Array.isArray(n)?t=>!n.includes(t):(t,r)=>!n(t,r);return t.pick(r,e,i)}})(Kt);var tr={};var rr={};var nr={};var ir={};(function(t){Object.defineProperty(t,"__esModule",{value:true});function r(t,r){var n=t>>>16&65535,i=t&65535;var e=r>>>16&65535,s=r&65535;return i*s+(n*s+i*e<<16>>>0)|0}t.mul=Math.imul||r;function n(t,r){return t+r|0}t.add=n;function i(t,r){return t-r|0}t.sub=i;function e(t,r){return t<<r|t>>>32-r}t.rotl=e;function s(t,r){return t<<32-r|t>>>r}t.rotr=s;function o(t){return typeof t==="number"&&isFinite(t)&&Math.floor(t)===t}t.isInteger=Number.isInteger||o;t.MAX_SAFE_INTEGER=9007199254740991;t.isSafeInteger=function(r){return t.isInteger(r)&&(r>=-t.MAX_SAFE_INTEGER&&r<=t.MAX_SAFE_INTEGER)}})(ir);Object.defineProperty(nr,"__esModule",{value:true});var er=ir;function sr(t,r){if(r===void 0){r=0}return(t[r+0]<<8|t[r+1])<<16>>16}nr.readInt16BE=sr;function or(t,r){if(r===void 0){r=0}return(t[r+0]<<8|t[r+1])>>>0}nr.readUint16BE=or;function ar(t,r){if(r===void 0){r=0}return(t[r+1]<<8|t[r])<<16>>16}nr.readInt16LE=ar;function ur(t,r){if(r===void 0){r=0}return(t[r+1]<<8|t[r])>>>0}nr.readUint16LE=ur;function hr(t,r,n){if(r===void 0){r=new Uint8Array(2)}if(n===void 0){n=0}r[n+0]=t>>>8;r[n+1]=t>>>0;return r}nr.writeUint16BE=hr;nr.writeInt16BE=hr;function fr(t,r,n){if(r===void 0){r=new Uint8Array(2)}if(n===void 0){n=0}r[n+0]=t>>>0;r[n+1]=t>>>8;return r}nr.writeUint16LE=fr;nr.writeInt16LE=fr;function cr(t,r){if(r===void 0){r=0}return t[r]<<24|t[r+1]<<16|t[r+2]<<8|t[r+3]}nr.readInt32BE=cr;function lr(t,r){if(r===void 0){r=0}return(t[r]<<24|t[r+1]<<16|t[r+2]<<8|t[r+3])>>>0}nr.readUint32BE=lr;function dr(t,r){if(r===void 0){r=0}return t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]}nr.readInt32LE=dr;function vr(t,r){if(r===void 0){r=0}return(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r])>>>0}nr.readUint32LE=vr;function wr(t,r,n){if(r===void 0){r=new Uint8Array(4)}if(n===void 0){n=0}r[n+0]=t>>>24;r[n+1]=t>>>16;r[n+2]=t>>>8;r[n+3]=t>>>0;return r}nr.writeUint32BE=wr;nr.writeInt32BE=wr;function pr(t,r,n){if(r===void 0){r=new Uint8Array(4)}if(n===void 0){n=0}r[n+0]=t>>>0;r[n+1]=t>>>8;r[n+2]=t>>>16;r[n+3]=t>>>24;return r}nr.writeUint32LE=pr;nr.writeInt32LE=pr;function yr(t,r){if(r===void 0){r=0}var n=cr(t,r);var i=cr(t,r+4);return n*4294967296+i-(i>>31)*4294967296}nr.readInt64BE=yr;function br(t,r){if(r===void 0){r=0}var n=lr(t,r);var i=lr(t,r+4);return n*4294967296+i}nr.readUint64BE=br;function gr(t,r){if(r===void 0){r=0}var n=dr(t,r);var i=dr(t,r+4);return i*4294967296+n-(n>>31)*4294967296}nr.readInt64LE=gr;function mr(t,r){if(r===void 0){r=0}var n=vr(t,r);var i=vr(t,r+4);return i*4294967296+n}nr.readUint64LE=mr;function Ar(t,r,n){if(r===void 0){r=new Uint8Array(8)}if(n===void 0){n=0}wr(t/4294967296>>>0,r,n);wr(t>>>0,r,n+4);return r}nr.writeUint64BE=Ar;nr.writeInt64BE=Ar;function Er(t,r,n){if(r===void 0){r=new Uint8Array(8)}if(n===void 0){n=0}pr(t>>>0,r,n);pr(t/4294967296>>>0,r,n+4);return r}nr.writeUint64LE=Er;nr.writeInt64LE=Er;function Mr(t,r,n){if(n===void 0){n=0}if(t%8!==0){throw new Error("readUintBE supports only bitLengths divisible by 8")}if(t/8>r.length-n){throw new Error("readUintBE: array is too short for the given bitLength")}var i=0;var e=1;for(var s=t/8+n-1;s>=n;s--){i+=r[s]*e;e*=256}return i}nr.readUintBE=Mr;function _r(t,r,n){if(n===void 0){n=0}if(t%8!==0){throw new Error("readUintLE supports only bitLengths divisible by 8")}if(t/8>r.length-n){throw new Error("readUintLE: array is too short for the given bitLength")}var i=0;var e=1;for(var s=n;s<n+t/8;s++){i+=r[s]*e;e*=256}return i}nr.readUintLE=_r;function Or(t,r,n,i){if(n===void 0){n=new Uint8Array(t/8)}if(i===void 0){i=0}if(t%8!==0){throw new Error("writeUintBE supports only bitLengths divisible by 8")}if(!er.isSafeInteger(r)){throw new Error("writeUintBE value must be an integer")}var e=1;for(var s=t/8+i-1;s>=i;s--){n[s]=r/e&255;e*=256}return n}nr.writeUintBE=Or;function Ir(t,r,n,i){if(n===void 0){n=new Uint8Array(t/8)}if(i===void 0){i=0}if(t%8!==0){throw new Error("writeUintLE supports only bitLengths divisible by 8")}if(!er.isSafeInteger(r)){throw new Error("writeUintLE value must be an integer")}var e=1;for(var s=i;s<i+t/8;s++){n[s]=r/e&255;e*=256}return n}nr.writeUintLE=Ir;function Sr(t,r){if(r===void 0){r=0}var n=new DataView(t.buffer,t.byteOffset,t.byteLength);return n.getFloat32(r)}nr.readFloat32BE=Sr;function Nr(t,r){if(r===void 0){r=0}var n=new DataView(t.buffer,t.byteOffset,t.byteLength);return n.getFloat32(r,true)}nr.readFloat32LE=Nr;function Cr(t,r){if(r===void 0){r=0}var n=new DataView(t.buffer,t.byteOffset,t.byteLength);return n.getFloat64(r)}nr.readFloat64BE=Cr;function jr(t,r){if(r===void 0){r=0}var n=new DataView(t.buffer,t.byteOffset,t.byteLength);return n.getFloat64(r,true)}nr.readFloat64LE=jr;function xr(t,r,n){if(r===void 0){r=new Uint8Array(4)}if(n===void 0){n=0}var i=new DataView(r.buffer,r.byteOffset,r.byteLength);i.setFloat32(n,t);return r}nr.writeFloat32BE=xr;function Pr(t,r,n){if(r===void 0){r=new Uint8Array(4)}if(n===void 0){n=0}var i=new DataView(r.buffer,r.byteOffset,r.byteLength);i.setFloat32(n,t,true);return r}nr.writeFloat32LE=Pr;function Tr(t,r,n){if(r===void 0){r=new Uint8Array(8)}if(n===void 0){n=0}var i=new DataView(r.buffer,r.byteOffset,r.byteLength);i.setFloat64(n,t);return r}nr.writeFloat64BE=Tr;function Rr(t,r,n){if(r===void 0){r=new Uint8Array(8)}if(n===void 0){n=0}var i=new DataView(r.buffer,r.byteOffset,r.byteLength);i.setFloat64(n,t,true);return r}nr.writeFloat64LE=Rr;var Dr={};Object.defineProperty(Dr,"__esModule",{value:true});function Ur(t){for(var r=0;r<t.length;r++){t[r]=0}return t}Dr.wipe=Ur;Object.defineProperty(rr,"__esModule",{value:true});var Br=nr;var kr=Dr;var $r=20;function Fr(t,r,n){var i=1634760805;var e=857760878;var s=2036477234;var o=1797285236;var a=n[3]<<24|n[2]<<16|n[1]<<8|n[0];var u=n[7]<<24|n[6]<<16|n[5]<<8|n[4];var h=n[11]<<24|n[10]<<16|n[9]<<8|n[8];var f=n[15]<<24|n[14]<<16|n[13]<<8|n[12];var c=n[19]<<24|n[18]<<16|n[17]<<8|n[16];var l=n[23]<<24|n[22]<<16|n[21]<<8|n[20];var d=n[27]<<24|n[26]<<16|n[25]<<8|n[24];var v=n[31]<<24|n[30]<<16|n[29]<<8|n[28];var w=r[3]<<24|r[2]<<16|r[1]<<8|r[0];var p=r[7]<<24|r[6]<<16|r[5]<<8|r[4];var y=r[11]<<24|r[10]<<16|r[9]<<8|r[8];var b=r[15]<<24|r[14]<<16|r[13]<<8|r[12];var g=i;var m=e;var A=s;var E=o;var M=a;var _=u;var O=h;var I=f;var S=c;var N=l;var C=d;var j=v;var x=w;var P=p;var T=y;var R=b;for(var D=0;D<$r;D+=2){g=g+M|0;x^=g;x=x>>>32-16|x<<16;S=S+x|0;M^=S;M=M>>>32-12|M<<12;m=m+_|0;P^=m;P=P>>>32-16|P<<16;N=N+P|0;_^=N;_=_>>>32-12|_<<12;A=A+O|0;T^=A;T=T>>>32-16|T<<16;C=C+T|0;O^=C;O=O>>>32-12|O<<12;E=E+I|0;R^=E;R=R>>>32-16|R<<16;j=j+R|0;I^=j;I=I>>>32-12|I<<12;A=A+O|0;T^=A;T=T>>>32-8|T<<8;C=C+T|0;O^=C;O=O>>>32-7|O<<7;E=E+I|0;R^=E;R=R>>>32-8|R<<8;j=j+R|0;I^=j;I=I>>>32-7|I<<7;m=m+_|0;P^=m;P=P>>>32-8|P<<8;N=N+P|0;_^=N;_=_>>>32-7|_<<7;g=g+M|0;x^=g;x=x>>>32-8|x<<8;S=S+x|0;M^=S;M=M>>>32-7|M<<7;g=g+_|0;R^=g;R=R>>>32-16|R<<16;C=C+R|0;_^=C;_=_>>>32-12|_<<12;m=m+O|0;x^=m;x=x>>>32-16|x<<16;j=j+x|0;O^=j;O=O>>>32-12|O<<12;A=A+I|0;P^=A;P=P>>>32-16|P<<16;S=S+P|0;I^=S;I=I>>>32-12|I<<12;E=E+M|0;T^=E;T=T>>>32-16|T<<16;N=N+T|0;M^=N;M=M>>>32-12|M<<12;A=A+I|0;P^=A;P=P>>>32-8|P<<8;S=S+P|0;I^=S;I=I>>>32-7|I<<7;E=E+M|0;T^=E;T=T>>>32-8|T<<8;N=N+T|0;M^=N;M=M>>>32-7|M<<7;m=m+O|0;x^=m;x=x>>>32-8|x<<8;j=j+x|0;O^=j;O=O>>>32-7|O<<7;g=g+_|0;R^=g;R=R>>>32-8|R<<8;C=C+R|0;_^=C;_=_>>>32-7|_<<7}Br.writeUint32LE(g+i|0,t,0);Br.writeUint32LE(m+e|0,t,4);Br.writeUint32LE(A+s|0,t,8);Br.writeUint32LE(E+o|0,t,12);Br.writeUint32LE(M+a|0,t,16);Br.writeUint32LE(_+u|0,t,20);Br.writeUint32LE(O+h|0,t,24);Br.writeUint32LE(I+f|0,t,28);Br.writeUint32LE(S+c|0,t,32);Br.writeUint32LE(N+l|0,t,36);Br.writeUint32LE(C+d|0,t,40);Br.writeUint32LE(j+v|0,t,44);Br.writeUint32LE(x+w|0,t,48);Br.writeUint32LE(P+p|0,t,52);Br.writeUint32LE(T+y|0,t,56);Br.writeUint32LE(R+b|0,t,60)}function qr(t,r,n,i,e){if(e===void 0){e=0}if(t.length!==32){throw new Error("ChaCha: key size must be 32 bytes")}if(i.length<n.length){throw new Error("ChaCha: destination is shorter than source")}var s;var o;if(e===0){if(r.length!==8&&r.length!==12){throw new Error("ChaCha nonce must be 8 or 12 bytes")}s=new Uint8Array(16);o=s.length-r.length;s.set(r,o)}else{if(r.length!==16){throw new Error("ChaCha nonce with counter must be 16 bytes")}s=r;o=e}var a=new Uint8Array(64);for(var u=0;u<n.length;u+=64){Fr(a,s,t);for(var h=u;h<u+64&&h<n.length;h++){i[h]=n[h]^a[h-u]}Kr(s,0,o)}kr.wipe(a);if(e===0){kr.wipe(s)}return i}rr.streamXOR=qr;function Lr(t,r,n,i){if(i===void 0){i=0}kr.wipe(n);return qr(t,r,n,n,i)}rr.stream=Lr;function Kr(t,r,n){var i=1;while(n--){i=i+(t[r]&255)|0;t[r]=i&255;i>>>=8;r++}if(i>0){throw new Error("ChaCha: counter overflow")}}var Hr={};var Gr={};Object.defineProperty(Gr,"__esModule",{value:true});function Qr(t,r,n){return~(t-1)&r|t-1&n}Gr.select=Qr;function Jr(t,r){return(t|0)-(r|0)-1>>>31&1}Gr.lessOrEqual=Jr;function Vr(t,r){if(t.length!==r.length){return 0}var n=0;for(var i=0;i<t.length;i++){n|=t[i]^r[i]}return 1&n-1>>>8}Gr.compare=Vr;function zr(t,r){if(t.length===0||r.length===0){return false}return Vr(t,r)!==0}Gr.equal=zr;(function(t){Object.defineProperty(t,"__esModule",{value:true});var r=Gr;var n=Dr;t.DIGEST_LENGTH=16;var i=function(){function r(r){this.digestLength=t.DIGEST_LENGTH;this._buffer=new Uint8Array(16);this._r=new Uint16Array(10);this._h=new Uint16Array(10);this._pad=new Uint16Array(8);this._leftover=0;this._fin=0;this._finished=false;var n=r[0]|r[1]<<8;this._r[0]=n&8191;var i=r[2]|r[3]<<8;this._r[1]=(n>>>13|i<<3)&8191;var e=r[4]|r[5]<<8;this._r[2]=(i>>>10|e<<6)&7939;var s=r[6]|r[7]<<8;this._r[3]=(e>>>7|s<<9)&8191;var o=r[8]|r[9]<<8;this._r[4]=(s>>>4|o<<12)&255;this._r[5]=o>>>1&8190;var a=r[10]|r[11]<<8;this._r[6]=(o>>>14|a<<2)&8191;var u=r[12]|r[13]<<8;this._r[7]=(a>>>11|u<<5)&8065;var h=r[14]|r[15]<<8;this._r[8]=(u>>>8|h<<8)&8191;this._r[9]=h>>>5&127;this._pad[0]=r[16]|r[17]<<8;this._pad[1]=r[18]|r[19]<<8;this._pad[2]=r[20]|r[21]<<8;this._pad[3]=r[22]|r[23]<<8;this._pad[4]=r[24]|r[25]<<8;this._pad[5]=r[26]|r[27]<<8;this._pad[6]=r[28]|r[29]<<8;this._pad[7]=r[30]|r[31]<<8}r.prototype._blocks=function(t,r,n){var i=this._fin?0:1<<11;var e=this._h[0],s=this._h[1],o=this._h[2],a=this._h[3],u=this._h[4],h=this._h[5],f=this._h[6],c=this._h[7],l=this._h[8],d=this._h[9];var v=this._r[0],w=this._r[1],p=this._r[2],y=this._r[3],b=this._r[4],g=this._r[5],m=this._r[6],A=this._r[7],E=this._r[8],M=this._r[9];while(n>=16){var _=t[r+0]|t[r+1]<<8;e+=_&8191;var O=t[r+2]|t[r+3]<<8;s+=(_>>>13|O<<3)&8191;var I=t[r+4]|t[r+5]<<8;o+=(O>>>10|I<<6)&8191;var S=t[r+6]|t[r+7]<<8;a+=(I>>>7|S<<9)&8191;var N=t[r+8]|t[r+9]<<8;u+=(S>>>4|N<<12)&8191;h+=N>>>1&8191;var C=t[r+10]|t[r+11]<<8;f+=(N>>>14|C<<2)&8191;var j=t[r+12]|t[r+13]<<8;c+=(C>>>11|j<<5)&8191;var x=t[r+14]|t[r+15]<<8;l+=(j>>>8|x<<8)&8191;d+=x>>>5|i;var P=0;var T=P;T+=e*v;T+=s*(5*M);T+=o*(5*E);T+=a*(5*A);T+=u*(5*m);P=T>>>13;T&=8191;T+=h*(5*g);T+=f*(5*b);T+=c*(5*y);T+=l*(5*p);T+=d*(5*w);P+=T>>>13;T&=8191;var R=P;R+=e*w;R+=s*v;R+=o*(5*M);R+=a*(5*E);R+=u*(5*A);P=R>>>13;R&=8191;R+=h*(5*m);R+=f*(5*g);R+=c*(5*b);R+=l*(5*y);R+=d*(5*p);P+=R>>>13;R&=8191;var D=P;D+=e*p;D+=s*w;D+=o*v;D+=a*(5*M);D+=u*(5*E);P=D>>>13;D&=8191;D+=h*(5*A);D+=f*(5*m);D+=c*(5*g);D+=l*(5*b);D+=d*(5*y);P+=D>>>13;D&=8191;var U=P;U+=e*y;U+=s*p;U+=o*w;U+=a*v;U+=u*(5*M);P=U>>>13;U&=8191;U+=h*(5*E);U+=f*(5*A);U+=c*(5*m);U+=l*(5*g);U+=d*(5*b);P+=U>>>13;U&=8191;var B=P;B+=e*b;B+=s*y;B+=o*p;B+=a*w;B+=u*v;P=B>>>13;B&=8191;B+=h*(5*M);B+=f*(5*E);B+=c*(5*A);B+=l*(5*m);B+=d*(5*g);P+=B>>>13;B&=8191;var k=P;k+=e*g;k+=s*b;k+=o*y;k+=a*p;k+=u*w;P=k>>>13;k&=8191;k+=h*v;k+=f*(5*M);k+=c*(5*E);k+=l*(5*A);k+=d*(5*m);P+=k>>>13;k&=8191;var $=P;$+=e*m;$+=s*g;$+=o*b;$+=a*y;$+=u*p;P=$>>>13;$&=8191;$+=h*w;$+=f*v;$+=c*(5*M);$+=l*(5*E);$+=d*(5*A);P+=$>>>13;$&=8191;var F=P;F+=e*A;F+=s*m;F+=o*g;F+=a*b;F+=u*y;P=F>>>13;F&=8191;F+=h*p;F+=f*w;F+=c*v;F+=l*(5*M);F+=d*(5*E);P+=F>>>13;F&=8191;var q=P;q+=e*E;q+=s*A;q+=o*m;q+=a*g;q+=u*b;P=q>>>13;q&=8191;q+=h*y;q+=f*p;q+=c*w;q+=l*v;q+=d*(5*M);P+=q>>>13;q&=8191;var L=P;L+=e*M;L+=s*E;L+=o*A;L+=a*m;L+=u*g;P=L>>>13;L&=8191;L+=h*b;L+=f*y;L+=c*p;L+=l*w;L+=d*v;P+=L>>>13;L&=8191;P=(P<<2)+P|0;P=P+T|0;T=P&8191;P=P>>>13;R+=P;e=T;s=R;o=D;a=U;u=B;h=k;f=$;c=F;l=q;d=L;r+=16;n-=16}this._h[0]=e;this._h[1]=s;this._h[2]=o;this._h[3]=a;this._h[4]=u;this._h[5]=h;this._h[6]=f;this._h[7]=c;this._h[8]=l;this._h[9]=d};r.prototype.finish=function(t,r){if(r===void 0){r=0}var n=new Uint16Array(10);var i;var e;var s;var o;if(this._leftover){o=this._leftover;this._buffer[o++]=1;for(;o<16;o++){this._buffer[o]=0}this._fin=1;this._blocks(this._buffer,0,16)}i=this._h[1]>>>13;this._h[1]&=8191;for(o=2;o<10;o++){this._h[o]+=i;i=this._h[o]>>>13;this._h[o]&=8191}this._h[0]+=i*5;i=this._h[0]>>>13;this._h[0]&=8191;this._h[1]+=i;i=this._h[1]>>>13;this._h[1]&=8191;this._h[2]+=i;n[0]=this._h[0]+5;i=n[0]>>>13;n[0]&=8191;for(o=1;o<10;o++){n[o]=this._h[o]+i;i=n[o]>>>13;n[o]&=8191}n[9]-=1<<13;e=(i^1)-1;for(o=0;o<10;o++){n[o]&=e}e=~e;for(o=0;o<10;o++){this._h[o]=this._h[o]&e|n[o]}this._h[0]=(this._h[0]|this._h[1]<<13)&65535;this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535;this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535;this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535;this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535;this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535;this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535;this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535;s=this._h[0]+this._pad[0];this._h[0]=s&65535;for(o=1;o<8;o++){s=(this._h[o]+this._pad[o]|0)+(s>>>16)|0;this._h[o]=s&65535}t[r+0]=this._h[0]>>>0;t[r+1]=this._h[0]>>>8;t[r+2]=this._h[1]>>>0;t[r+3]=this._h[1]>>>8;t[r+4]=this._h[2]>>>0;t[r+5]=this._h[2]>>>8;t[r+6]=this._h[3]>>>0;t[r+7]=this._h[3]>>>8;t[r+8]=this._h[4]>>>0;t[r+9]=this._h[4]>>>8;t[r+10]=this._h[5]>>>0;t[r+11]=this._h[5]>>>8;t[r+12]=this._h[6]>>>0;t[r+13]=this._h[6]>>>8;t[r+14]=this._h[7]>>>0;t[r+15]=this._h[7]>>>8;this._finished=true;return this};r.prototype.update=function(t){var r=0;var n=t.length;var i;if(this._leftover){i=16-this._leftover;if(i>n){i=n}for(var e=0;e<i;e++){this._buffer[this._leftover+e]=t[r+e]}n-=i;r+=i;this._leftover+=i;if(this._leftover<16){return this}this._blocks(this._buffer,0,16);this._leftover=0}if(n>=16){i=n-n%16;this._blocks(t,r,i);r+=i;n-=i}if(n){for(var e=0;e<n;e++){this._buffer[this._leftover+e]=t[r+e]}this._leftover+=n}return this};r.prototype.digest=function(){if(this._finished){throw new Error("Poly1305 was finished")}var t=new Uint8Array(16);this.finish(t);return t};r.prototype.clean=function(){n.wipe(this._buffer);n.wipe(this._r);n.wipe(this._h);n.wipe(this._pad);this._leftover=0;this._fin=0;this._finished=true;return this};return r}();t.Poly1305=i;function e(t,r){var n=new i(t);n.update(r);var e=n.digest();n.clean();return e}t.oneTimeAuth=e;function s(n,i){if(n.length!==t.DIGEST_LENGTH||i.length!==t.DIGEST_LENGTH){return false}return r.equal(n,i)}t.equal=s})(Hr);(function(t){Object.defineProperty(t,"__esModule",{value:true});var r=rr;var n=Hr;var i=Dr;var e=nr;var s=Gr;t.KEY_LENGTH=32;t.NONCE_LENGTH=12;t.TAG_LENGTH=16;var o=new Uint8Array(16);var a=function(){function a(r){this.nonceLength=t.NONCE_LENGTH;this.tagLength=t.TAG_LENGTH;if(r.length!==t.KEY_LENGTH){throw new Error("ChaCha20Poly1305 needs 32-byte key")}this._key=new Uint8Array(r)}a.prototype.seal=function(t,n,e,s){if(t.length>16){throw new Error("ChaCha20Poly1305: incorrect nonce length")}var o=new Uint8Array(16);o.set(t,o.length-t.length);var a=new Uint8Array(32);r.stream(this._key,o,a,4);var u=n.length+this.tagLength;var h;if(s){if(s.length!==u){throw new Error("ChaCha20Poly1305: incorrect destination length")}h=s}else{h=new Uint8Array(u)}r.streamXOR(this._key,o,n,h,4);this._authenticate(h.subarray(h.length-this.tagLength,h.length),a,h.subarray(0,h.length-this.tagLength),e);i.wipe(o);return h};a.prototype.open=function(t,n,e,o){if(t.length>16){throw new Error("ChaCha20Poly1305: incorrect nonce length")}if(n.length<this.tagLength){return null}var a=new Uint8Array(16);a.set(t,a.length-t.length);var u=new Uint8Array(32);r.stream(this._key,a,u,4);var h=new Uint8Array(this.tagLength);this._authenticate(h,u,n.subarray(0,n.length-this.tagLength),e);if(!s.equal(h,n.subarray(n.length-this.tagLength,n.length))){return null}var f=n.length-this.tagLength;var c;if(o){if(o.length!==f){throw new Error("ChaCha20Poly1305: incorrect destination length")}c=o}else{c=new Uint8Array(f)}r.streamXOR(this._key,a,n.subarray(0,n.length-this.tagLength),c,4);i.wipe(a);return c};a.prototype.clean=function(){i.wipe(this._key);return this};a.prototype._authenticate=function(t,r,s,a){var u=new n.Poly1305(r);if(a){u.update(a);if(a.length%16>0){u.update(o.subarray(a.length%16))}}u.update(s);if(s.length%16>0){u.update(o.subarray(s.length%16))}var h=new Uint8Array(8);if(a){e.writeUint64LE(a.length,h)}u.update(h);e.writeUint64LE(s.length,h);u.update(h);var f=u.digest();for(var c=0;c<f.length;c++){t[c]=f[c]}u.clean();i.wipe(f);i.wipe(h)};return a}();t.ChaCha20Poly1305=a})(tr);var Yr={};var Wr={};var Xr={};Object.defineProperty(Xr,"__esModule",{value:true});function Zr(t){return typeof t.saveState!=="undefined"&&typeof t.restoreState!=="undefined"&&typeof t.cleanSavedState!=="undefined"}Xr.isSerializableHash=Zr;Object.defineProperty(Wr,"__esModule",{value:true});var tn=Xr;var rn=Gr;var nn=Dr;var en=function(){function t(t,r){this._finished=false;this._inner=new t;this._outer=new t;this.blockSize=this._outer.blockSize;this.digestLength=this._outer.digestLength;var n=new Uint8Array(this.blockSize);if(r.length>this.blockSize){this._inner.update(r).finish(n).clean()}else{n.set(r)}for(var i=0;i<n.length;i++){n[i]^=54}this._inner.update(n);for(var i=0;i<n.length;i++){n[i]^=54^92}this._outer.update(n);if(tn.isSerializableHash(this._inner)&&tn.isSerializableHash(this._outer)){this._innerKeyedState=this._inner.saveState();this._outerKeyedState=this._outer.saveState()}nn.wipe(n)}t.prototype.reset=function(){if(!tn.isSerializableHash(this._inner)||!tn.isSerializableHash(this._outer)){throw new Error("hmac: can't reset() because hash doesn't implement restoreState()")}this._inner.restoreState(this._innerKeyedState);this._outer.restoreState(this._outerKeyedState);this._finished=false;return this};t.prototype.clean=function(){if(tn.isSerializableHash(this._inner)){this._inner.cleanSavedState(this._innerKeyedState)}if(tn.isSerializableHash(this._outer)){this._outer.cleanSavedState(this._outerKeyedState)}this._inner.clean();this._outer.clean()};t.prototype.update=function(t){this._inner.update(t);return this};t.prototype.finish=function(t){if(this._finished){this._outer.finish(t);return this}this._inner.finish(t);this._outer.update(t.subarray(0,this.digestLength)).finish(t);this._finished=true;return this};t.prototype.digest=function(){var t=new Uint8Array(this.digestLength);this.finish(t);return t};t.prototype.saveState=function(){if(!tn.isSerializableHash(this._inner)){throw new Error("hmac: can't saveState() because hash doesn't implement it")}return this._inner.saveState()};t.prototype.restoreState=function(t){if(!tn.isSerializableHash(this._inner)||!tn.isSerializableHash(this._outer)){throw new Error("hmac: can't restoreState() because hash doesn't implement it")}this._inner.restoreState(t);this._outer.restoreState(this._outerKeyedState);this._finished=false;return this};t.prototype.cleanSavedState=function(t){if(!tn.isSerializableHash(this._inner)){throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it")}this._inner.cleanSavedState(t)};return t}();Wr.HMAC=en;function sn(t,r,n){var i=new en(t,r);i.update(n);var e=i.digest();i.clean();return e}Wr.hmac=sn;Wr.equal=rn.equal;Object.defineProperty(Yr,"__esModule",{value:true});var on=Wr;var an=Dr;var un=function(){function t(t,r,n,i){if(n===void 0){n=new Uint8Array(0)}this._counter=new Uint8Array(1);this._hash=t;this._info=i;var e=on.hmac(this._hash,n,r);this._hmac=new on.HMAC(t,e);this._buffer=new Uint8Array(this._hmac.digestLength);this._bufpos=this._buffer.length}t.prototype._fillBuffer=function(){this._counter[0]++;var t=this._counter[0];if(t===0){throw new Error("hkdf: cannot expand more")}this._hmac.reset();if(t>1){this._hmac.update(this._buffer)}if(this._info){this._hmac.update(this._info)}this._hmac.update(this._counter);this._hmac.finish(this._buffer);this._bufpos=0};t.prototype.expand=function(t){var r=new Uint8Array(t);for(var n=0;n<r.length;n++){if(this._bufpos===this._buffer.length){this._fillBuffer()}r[n]=this._buffer[this._bufpos++]}return r};t.prototype.clean=function(){this._hmac.clean();an.wipe(this._buffer);an.wipe(this._counter);this._bufpos=0};return t}();var hn=Yr.HKDF=un;var fn={};var cn={};var ln={};Object.defineProperty(ln,"__esModule",{value:true});ln.BrowserRandomSource=void 0;const dn=65536;class vn{constructor(){this.isAvailable=false;this.isInstantiated=false;const t=typeof self!=="undefined"?self.crypto||self.msCrypto:null;if(t&&t.getRandomValues!==undefined){this._crypto=t;this.isAvailable=true;this.isInstantiated=true}}randomBytes(t){if(!this.isAvailable||!this._crypto){throw new Error("Browser random byte generator is not available.")}const r=new Uint8Array(t);for(let t=0;t<r.length;t+=dn){this._crypto.getRandomValues(r.subarray(t,t+Math.min(r.length-t,dn)))}return r}}ln.BrowserRandomSource=vn;var wn={};const pn={};const yn=Object.freeze({__proto__:null,default:pn});const bn=e(yn);Object.defineProperty(wn,"__esModule",{value:true});wn.NodeRandomSource=void 0;const gn=Dr;class mn{constructor(){this.isAvailable=false;this.isInstantiated=false;if(typeof s!=="undefined"){const t=bn;if(t&&t.randomBytes){this._crypto=t;this.isAvailable=true;this.isInstantiated=true}}}randomBytes(t){if(!this.isAvailable||!this._crypto){throw new Error("Node.js random byte generator is not available.")}let r=this._crypto.randomBytes(t);if(r.length!==t){throw new Error("NodeRandomSource: got fewer bytes than requested")}const n=new Uint8Array(t);for(let t=0;t<n.length;t++){n[t]=r[t]}(0,gn.wipe)(r);return n}}wn.NodeRandomSource=mn;Object.defineProperty(cn,"__esModule",{value:true});cn.SystemRandomSource=void 0;const An=ln;const En=wn;class Mn{constructor(){this.isAvailable=false;this.name="";this._source=new An.BrowserRandomSource;if(this._source.isAvailable){this.isAvailable=true;this.name="Browser";return}this._source=new En.NodeRandomSource;if(this._source.isAvailable){this.isAvailable=true;this.name="Node";return}}randomBytes(t){if(!this.isAvailable){throw new Error("System random byte generator is not available.")}return this._source.randomBytes(t)}}cn.SystemRandomSource=Mn;(function(t){Object.defineProperty(t,"__esModule",{value:true});t.randomStringForEntropy=t.randomString=t.randomUint32=t.randomBytes=t.defaultRandomSource=void 0;const r=cn;const n=nr;const i=Dr;t.defaultRandomSource=new r.SystemRandomSource;function e(r,n=t.defaultRandomSource){return n.randomBytes(r)}t.randomBytes=e;function s(r=t.defaultRandomSource){const s=e(4,r);const o=(0,n.readUint32LE)(s);(0,i.wipe)(s);return o}t.randomUint32=s;const o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function a(r,n=o,s=t.defaultRandomSource){if(n.length<2){throw new Error("randomString charset is too short")}if(n.length>256){throw new Error("randomString charset is too long")}let a="";const u=n.length;const h=256-256%u;while(r>0){const t=e(Math.ceil(r*256/h),s);for(let i=0;i<t.length&&r>0;i++){const e=t[i];if(e<h){a+=n.charAt(e%u);r--}}(0,i.wipe)(t)}return a}t.randomString=a;function u(r,n=o,i=t.defaultRandomSource){const e=Math.ceil(r/(Math.log(n.length)/Math.LN2));return a(e,n,i)}t.randomStringForEntropy=u})(fn);var _n={};(function(t){Object.defineProperty(t,"__esModule",{value:true});var r=nr;var n=Dr;t.DIGEST_LENGTH=32;t.BLOCK_SIZE=64;var i=function(){function i(){this.digestLength=t.DIGEST_LENGTH;this.blockSize=t.BLOCK_SIZE;this._state=new Int32Array(8);this._temp=new Int32Array(64);this._buffer=new Uint8Array(128);this._bufferLength=0;this._bytesHashed=0;this._finished=false;this.reset()}i.prototype._initState=function(){this._state[0]=1779033703;this._state[1]=3144134277;this._state[2]=1013904242;this._state[3]=2773480762;this._state[4]=1359893119;this._state[5]=2600822924;this._state[6]=528734635;this._state[7]=1541459225};i.prototype.reset=function(){this._initState();this._bufferLength=0;this._bytesHashed=0;this._finished=false;return this};i.prototype.clean=function(){n.wipe(this._buffer);n.wipe(this._temp);this.reset()};i.prototype.update=function(t,r){if(r===void 0){r=t.length}if(this._finished){throw new Error("SHA256: can't update because hash was finished.")}var n=0;this._bytesHashed+=r;if(this._bufferLength>0){while(this._bufferLength<this.blockSize&&r>0){this._buffer[this._bufferLength++]=t[n++];r--}if(this._bufferLength===this.blockSize){s(this._temp,this._state,this._buffer,0,this.blockSize);this._bufferLength=0}}if(r>=this.blockSize){n=s(this._temp,this._state,t,n,r);r%=this.blockSize}while(r>0){this._buffer[this._bufferLength++]=t[n++];r--}return this};i.prototype.finish=function(t){if(!this._finished){var n=this._bytesHashed;var i=this._bufferLength;var e=n/536870912|0;var o=n<<3;var a=n%64<56?64:128;this._buffer[i]=128;for(var u=i+1;u<a-8;u++){this._buffer[u]=0}r.writeUint32BE(e,this._buffer,a-8);r.writeUint32BE(o,this._buffer,a-4);s(this._temp,this._state,this._buffer,0,a);this._finished=true}for(var u=0;u<this.digestLength/4;u++){r.writeUint32BE(this._state[u],t,u*4)}return this};i.prototype.digest=function(){var t=new Uint8Array(this.digestLength);this.finish(t);return t};i.prototype.saveState=function(){if(this._finished){throw new Error("SHA256: cannot save finished state")}return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):undefined,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}};i.prototype.restoreState=function(t){this._state.set(t.state);this._bufferLength=t.bufferLength;if(t.buffer){this._buffer.set(t.buffer)}this._bytesHashed=t.bytesHashed;this._finished=false;return this};i.prototype.cleanSavedState=function(t){n.wipe(t.state);if(t.buffer){n.wipe(t.buffer)}t.bufferLength=0;t.bytesHashed=0};return i}();t.SHA256=i;var e=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function s(t,n,i,s,o){while(o>=64){var a=n[0];var u=n[1];var h=n[2];var f=n[3];var c=n[4];var l=n[5];var d=n[6];var v=n[7];for(var w=0;w<16;w++){var p=s+w*4;t[w]=r.readUint32BE(i,p)}for(var w=16;w<64;w++){var y=t[w-2];var b=(y>>>17|y<<32-17)^(y>>>19|y<<32-19)^y>>>10;y=t[w-15];var g=(y>>>7|y<<32-7)^(y>>>18|y<<32-18)^y>>>3;t[w]=(b+t[w-7]|0)+(g+t[w-16]|0)}for(var w=0;w<64;w++){var b=(((c>>>6|c<<32-6)^(c>>>11|c<<32-11)^(c>>>25|c<<32-25))+(c&l^~c&d)|0)+(v+(e[w]+t[w]|0)|0)|0;var g=((a>>>2|a<<32-2)^(a>>>13|a<<32-13)^(a>>>22|a<<32-22))+(a&u^a&h^u&h)|0;v=d;d=l;l=c;c=f+b|0;f=h;h=u;u=a;a=b+g|0}n[0]+=a;n[1]+=u;n[2]+=h;n[3]+=f;n[4]+=c;n[5]+=l;n[6]+=d;n[7]+=v;s+=64;o-=64}return s}function o(t){var r=new i;r.update(t);var n=r.digest();r.clean();return n}t.hash=o})(_n);var On={};(function(t){Object.defineProperty(t,"__esModule",{value:true});t.sharedKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.scalarMultBase=t.scalarMult=t.SHARED_KEY_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=void 0;const r=fn;const n=Dr;t.PUBLIC_KEY_LENGTH=32;t.SECRET_KEY_LENGTH=32;t.SHARED_KEY_LENGTH=32;function i(t){const r=new Float64Array(16);if(t){for(let n=0;n<t.length;n++){r[n]=t[n]}}return r}const e=new Uint8Array(32);e[0]=9;const s=i([56129,1]);function o(t){let r=1;for(let n=0;n<16;n++){let i=t[n]+r+65535;r=Math.floor(i/65536);t[n]=i-r*65536}t[0]+=r-1+37*(r-1)}function a(t,r,n){const i=~(n-1);for(let n=0;n<16;n++){const e=i&(t[n]^r[n]);t[n]^=e;r[n]^=e}}function u(t,r){const n=i();const e=i();for(let t=0;t<16;t++){e[t]=r[t]}o(e);o(e);o(e);for(let t=0;t<2;t++){n[0]=e[0]-65517;for(let t=1;t<15;t++){n[t]=e[t]-65535-(n[t-1]>>16&1);n[t-1]&=65535}n[15]=e[15]-32767-(n[14]>>16&1);const t=n[15]>>16&1;n[14]&=65535;a(e,n,1-t)}for(let r=0;r<16;r++){t[2*r]=e[r]&255;t[2*r+1]=e[r]>>8}}function h(t,r){for(let n=0;n<16;n++){t[n]=r[2*n]+(r[2*n+1]<<8)}t[15]&=32767}function f(t,r,n){for(let i=0;i<16;i++){t[i]=r[i]+n[i]}}function c(t,r,n){for(let i=0;i<16;i++){t[i]=r[i]-n[i]}}function l(t,r,n){let i,e,s=0,o=0,a=0,u=0,h=0,f=0,c=0,l=0,d=0,v=0,w=0,p=0,y=0,b=0,g=0,m=0,A=0,E=0,M=0,_=0,O=0,I=0,S=0,N=0,C=0,j=0,x=0,P=0,T=0,R=0,D=0,U=n[0],B=n[1],k=n[2],$=n[3],F=n[4],q=n[5],L=n[6],K=n[7],H=n[8],G=n[9],Q=n[10],J=n[11],V=n[12],z=n[13],Y=n[14],W=n[15];i=r[0];s+=i*U;o+=i*B;a+=i*k;u+=i*$;h+=i*F;f+=i*q;c+=i*L;l+=i*K;d+=i*H;v+=i*G;w+=i*Q;p+=i*J;y+=i*V;b+=i*z;g+=i*Y;m+=i*W;i=r[1];o+=i*U;a+=i*B;u+=i*k;h+=i*$;f+=i*F;c+=i*q;l+=i*L;d+=i*K;v+=i*H;w+=i*G;p+=i*Q;y+=i*J;b+=i*V;g+=i*z;m+=i*Y;A+=i*W;i=r[2];a+=i*U;u+=i*B;h+=i*k;f+=i*$;c+=i*F;l+=i*q;d+=i*L;v+=i*K;w+=i*H;p+=i*G;y+=i*Q;b+=i*J;g+=i*V;m+=i*z;A+=i*Y;E+=i*W;i=r[3];u+=i*U;h+=i*B;f+=i*k;c+=i*$;l+=i*F;d+=i*q;v+=i*L;w+=i*K;p+=i*H;y+=i*G;b+=i*Q;g+=i*J;m+=i*V;A+=i*z;E+=i*Y;M+=i*W;i=r[4];h+=i*U;f+=i*B;c+=i*k;l+=i*$;d+=i*F;v+=i*q;w+=i*L;p+=i*K;y+=i*H;b+=i*G;g+=i*Q;m+=i*J;A+=i*V;E+=i*z;M+=i*Y;_+=i*W;i=r[5];f+=i*U;c+=i*B;l+=i*k;d+=i*$;v+=i*F;w+=i*q;p+=i*L;y+=i*K;b+=i*H;g+=i*G;m+=i*Q;A+=i*J;E+=i*V;M+=i*z;_+=i*Y;O+=i*W;i=r[6];c+=i*U;l+=i*B;d+=i*k;v+=i*$;w+=i*F;p+=i*q;y+=i*L;b+=i*K;g+=i*H;m+=i*G;A+=i*Q;E+=i*J;M+=i*V;_+=i*z;O+=i*Y;I+=i*W;i=r[7];l+=i*U;d+=i*B;v+=i*k;w+=i*$;p+=i*F;y+=i*q;b+=i*L;g+=i*K;m+=i*H;A+=i*G;E+=i*Q;M+=i*J;_+=i*V;O+=i*z;I+=i*Y;S+=i*W;i=r[8];d+=i*U;v+=i*B;w+=i*k;p+=i*$;y+=i*F;b+=i*q;g+=i*L;m+=i*K;A+=i*H;E+=i*G;M+=i*Q;_+=i*J;O+=i*V;I+=i*z;S+=i*Y;N+=i*W;i=r[9];v+=i*U;w+=i*B;p+=i*k;y+=i*$;b+=i*F;g+=i*q;m+=i*L;A+=i*K;E+=i*H;M+=i*G;_+=i*Q;O+=i*J;I+=i*V;S+=i*z;N+=i*Y;C+=i*W;i=r[10];w+=i*U;p+=i*B;y+=i*k;b+=i*$;g+=i*F;m+=i*q;A+=i*L;E+=i*K;M+=i*H;_+=i*G;O+=i*Q;I+=i*J;S+=i*V;N+=i*z;C+=i*Y;j+=i*W;i=r[11];p+=i*U;y+=i*B;b+=i*k;g+=i*$;m+=i*F;A+=i*q;E+=i*L;M+=i*K;_+=i*H;O+=i*G;I+=i*Q;S+=i*J;N+=i*V;C+=i*z;j+=i*Y;x+=i*W;i=r[12];y+=i*U;b+=i*B;g+=i*k;m+=i*$;A+=i*F;E+=i*q;M+=i*L;_+=i*K;O+=i*H;I+=i*G;S+=i*Q;N+=i*J;C+=i*V;j+=i*z;x+=i*Y;P+=i*W;i=r[13];b+=i*U;g+=i*B;m+=i*k;A+=i*$;E+=i*F;M+=i*q;_+=i*L;O+=i*K;I+=i*H;S+=i*G;N+=i*Q;C+=i*J;j+=i*V;x+=i*z;P+=i*Y;T+=i*W;i=r[14];g+=i*U;m+=i*B;A+=i*k;E+=i*$;M+=i*F;_+=i*q;O+=i*L;I+=i*K;S+=i*H;N+=i*G;C+=i*Q;j+=i*J;x+=i*V;P+=i*z;T+=i*Y;R+=i*W;i=r[15];m+=i*U;A+=i*B;E+=i*k;M+=i*$;_+=i*F;O+=i*q;I+=i*L;S+=i*K;N+=i*H;C+=i*G;j+=i*Q;x+=i*J;P+=i*V;T+=i*z;R+=i*Y;D+=i*W;s+=38*A;o+=38*E;a+=38*M;u+=38*_;h+=38*O;f+=38*I;c+=38*S;l+=38*N;d+=38*C;v+=38*j;w+=38*x;p+=38*P;y+=38*T;b+=38*R;g+=38*D;e=1;i=s+e+65535;e=Math.floor(i/65536);s=i-e*65536;i=o+e+65535;e=Math.floor(i/65536);o=i-e*65536;i=a+e+65535;e=Math.floor(i/65536);a=i-e*65536;i=u+e+65535;e=Math.floor(i/65536);u=i-e*65536;i=h+e+65535;e=Math.floor(i/65536);h=i-e*65536;i=f+e+65535;e=Math.floor(i/65536);f=i-e*65536;i=c+e+65535;e=Math.floor(i/65536);c=i-e*65536;i=l+e+65535;e=Math.floor(i/65536);l=i-e*65536;i=d+e+65535;e=Math.floor(i/65536);d=i-e*65536;i=v+e+65535;e=Math.floor(i/65536);v=i-e*65536;i=w+e+65535;e=Math.floor(i/65536);w=i-e*65536;i=p+e+65535;e=Math.floor(i/65536);p=i-e*65536;i=y+e+65535;e=Math.floor(i/65536);y=i-e*65536;i=b+e+65535;e=Math.floor(i/65536);b=i-e*65536;i=g+e+65535;e=Math.floor(i/65536);g=i-e*65536;i=m+e+65535;e=Math.floor(i/65536);m=i-e*65536;s+=e-1+37*(e-1);e=1;i=s+e+65535;e=Math.floor(i/65536);s=i-e*65536;i=o+e+65535;e=Math.floor(i/65536);o=i-e*65536;i=a+e+65535;e=Math.floor(i/65536);a=i-e*65536;i=u+e+65535;e=Math.floor(i/65536);u=i-e*65536;i=h+e+65535;e=Math.floor(i/65536);h=i-e*65536;i=f+e+65535;e=Math.floor(i/65536);f=i-e*65536;i=c+e+65535;e=Math.floor(i/65536);c=i-e*65536;i=l+e+65535;e=Math.floor(i/65536);l=i-e*65536;i=d+e+65535;e=Math.floor(i/65536);d=i-e*65536;i=v+e+65535;e=Math.floor(i/65536);v=i-e*65536;i=w+e+65535;e=Math.floor(i/65536);w=i-e*65536;i=p+e+65535;e=Math.floor(i/65536);p=i-e*65536;i=y+e+65535;e=Math.floor(i/65536);y=i-e*65536;i=b+e+65535;e=Math.floor(i/65536);b=i-e*65536;i=g+e+65535;e=Math.floor(i/65536);g=i-e*65536;i=m+e+65535;e=Math.floor(i/65536);m=i-e*65536;s+=e-1+37*(e-1);t[0]=s;t[1]=o;t[2]=a;t[3]=u;t[4]=h;t[5]=f;t[6]=c;t[7]=l;t[8]=d;t[9]=v;t[10]=w;t[11]=p;t[12]=y;t[13]=b;t[14]=g;t[15]=m}function d(t,r){l(t,r,r)}function v(t,r){const n=i();for(let t=0;t<16;t++){n[t]=r[t]}for(let t=253;t>=0;t--){d(n,n);if(t!==2&&t!==4){l(n,n,r)}}for(let r=0;r<16;r++){t[r]=n[r]}}function w(t,r){const n=new Uint8Array(32);const e=new Float64Array(80);const o=i(),w=i(),p=i(),y=i(),b=i(),g=i();for(let r=0;r<31;r++){n[r]=t[r]}n[31]=t[31]&127|64;n[0]&=248;h(e,r);for(let t=0;t<16;t++){w[t]=e[t]}o[0]=y[0]=1;for(let t=254;t>=0;--t){const r=n[t>>>3]>>>(t&7)&1;a(o,w,r);a(p,y,r);f(b,o,p);c(o,o,p);f(p,w,y);c(w,w,y);d(y,b);d(g,o);l(o,p,o);l(p,w,b);f(b,o,p);c(o,o,p);d(w,o);c(p,y,g);l(o,p,s);f(o,o,y);l(p,p,o);l(o,y,g);l(y,w,e);d(w,b);a(o,w,r);a(p,y,r)}for(let t=0;t<16;t++){e[t+16]=o[t];e[t+32]=p[t];e[t+48]=w[t];e[t+64]=y[t]}const m=e.subarray(32);const A=e.subarray(16);v(m,m);l(A,A,m);const E=new Uint8Array(32);u(E,A);return E}t.scalarMult=w;function p(t){return w(t,e)}t.scalarMultBase=p;function y(r){if(r.length!==t.SECRET_KEY_LENGTH){throw new Error(`x25519: seed must be ${t.SECRET_KEY_LENGTH} bytes`)}const n=new Uint8Array(r);const i=p(n);return{publicKey:i,secretKey:n}}t.generateKeyPairFromSeed=y;function b(t){const i=(0,r.randomBytes)(32,t);const e=y(i);(0,n.wipe)(i);return e}t.generateKeyPair=b;function g(r,n,i=false){if(r.length!==t.PUBLIC_KEY_LENGTH){throw new Error("X25519: incorrect secret key length")}if(n.length!==t.PUBLIC_KEY_LENGTH){throw new Error("X25519: incorrect public key length")}const e=w(r,n);if(i){let t=0;for(let r=0;r<e.length;r++){t|=e[r]}if(t===0){throw new Error("X25519: invalid shared key")}}return e}t.sharedKey=g})(On);var In={};var Sn={};Object.defineProperty(Sn,"__esModule",{value:true});function Nn(t,r){for(let n=0;n<t.byteLength;n++){if(t[n]<r[n]){return-1}if(t[n]>r[n]){return 1}}if(t.byteLength>r.byteLength){return 1}if(t.byteLength<r.byteLength){return-1}return 0}Sn.compare=Nn;var Cn={};var jn={};var xn={};Object.defineProperty(xn,"__esModule",{value:true});function Pn(t){if(globalThis.Buffer!=null){return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}return t}xn.asUint8Array=Pn;Object.defineProperty(jn,"__esModule",{value:true});var Tn=xn;function Rn(t=0){if(globalThis.Buffer!=null&&globalThis.Buffer.alloc!=null){return Tn.asUint8Array(globalThis.Buffer.alloc(t))}return new Uint8Array(t)}function Dn(t=0){if(globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null){return Tn.asUint8Array(globalThis.Buffer.allocUnsafe(t))}return new Uint8Array(t)}jn.alloc=Rn;jn.allocUnsafe=Dn;Object.defineProperty(Cn,"__esModule",{value:true});var Un=jn;var Bn=xn;function kn(t,r){if(!r){r=t.reduce(((t,r)=>t+r.length),0)}const n=Un.allocUnsafe(r);let i=0;for(const r of t){n.set(r,i);i+=r.length}return Bn.asUint8Array(n)}Cn.concat=kn;var $n={};Object.defineProperty($n,"__esModule",{value:true});function Fn(t,r){if(t===r){return true}if(t.byteLength!==r.byteLength){return false}for(let n=0;n<t.byteLength;n++){if(t[n]!==r[n]){return false}}return true}$n.equals=Fn;var qn={};var Ln={};var Kn={};Object.defineProperty(Kn,"__esModule",{value:true});var Hn=o;var Gn=a;const Qn=Hn.from({prefix:"\0",name:"identity",encode:t=>Gn.toString(t),decode:t=>Gn.fromString(t)});Kn.identity=Qn;var Jn={};Object.defineProperty(Jn,"__esModule",{value:true});var Vn=o;const zn=Vn.rfc4648({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});Jn.base2=zn;var Yn={};Object.defineProperty(Yn,"__esModule",{value:true});var Wn=o;const Xn=Wn.rfc4648({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});Yn.base8=Xn;var Zn={};Object.defineProperty(Zn,"__esModule",{value:true});var ti=o;const ri=ti.baseX({prefix:"9",name:"base10",alphabet:"0123456789"});Zn.base10=ri;var ni={};Object.defineProperty(ni,"__esModule",{value:true});var ii=o;const ei=ii.rfc4648({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4});const si=ii.rfc4648({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});ni.base16=ei;ni.base16upper=si;var oi={};Object.defineProperty(oi,"__esModule",{value:true});var ai=o;const ui=ai.baseX({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"});const hi=ai.baseX({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});oi.base36=ui;oi.base36upper=hi;var fi={};Object.defineProperty(fi,"__esModule",{value:true});var ci=o;const li=ci.rfc4648({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});const di=ci.rfc4648({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6});const vi=ci.rfc4648({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6});const wi=ci.rfc4648({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});fi.base64=li;fi.base64pad=di;fi.base64url=vi;fi.base64urlpad=wi;var pi={};Object.defineProperty(pi,"__esModule",{value:true});var yi=o;const bi=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂");const gi=bi.reduce(((t,r,n)=>{t[n]=r;return t}),[]);const mi=bi.reduce(((t,r,n)=>{t[r.codePointAt(0)]=n;return t}),[]);function Ai(t){return t.reduce(((t,r)=>{t+=gi[r];return t}),"")}function Ei(t){const r=[];for(const n of t){const t=mi[n.codePointAt(0)];if(t===undefined){throw new Error(`Non-base256emoji character: ${n}`)}r.push(t)}return new Uint8Array(r)}const Mi=yi.from({prefix:"🚀",name:"base256emoji",encode:Ai,decode:Ei});pi.base256emoji=Mi;var _i={};Object.defineProperty(_i,"__esModule",{value:true});var Oi=u;const Ii=t=>async r=>new Uint8Array(await crypto.subtle.digest(t,r));const Si=Oi.from({name:"sha2-256",code:18,encode:Ii("SHA-256")});const Ni=Oi.from({name:"sha2-512",code:19,encode:Ii("SHA-512")});_i.sha256=Si;_i.sha512=Ni;var Ci={};Object.defineProperty(Ci,"__esModule",{value:true});var ji=a;var xi=h;const Pi=0;const Ti="identity";const Ri=ji.coerce;const Di=t=>xi.create(Pi,Ri(t));const Ui={code:Pi,name:Ti,encode:Ri,digest:Di};Ci.identity=Ui;var Bi={};Object.defineProperty(Bi,"__esModule",{value:true});var ki=a;const $i="raw";const Fi=85;const qi=t=>ki.coerce(t);const Li=t=>ki.coerce(t);Bi.code=Fi;Bi.decode=Li;Bi.encode=qi;Bi.name=$i;var Ki={};Object.defineProperty(Ki,"__esModule",{value:true});const Hi=new TextEncoder;const Gi=new TextDecoder;const Qi="json";const Ji=512;const Vi=t=>Hi.encode(JSON.stringify(t));const zi=t=>JSON.parse(Gi.decode(t));Ki.code=Ji;Ki.decode=zi;Ki.encode=Vi;Ki.name=Qi;Object.defineProperty(Ln,"__esModule",{value:true});var Yi=Kn;var Wi=Jn;var Xi=Yn;var Zi=Zn;var te=ni;var re=l;var ne=oi;var ie=d;var ee=fi;var se=pi;var oe=_i;var ae=Ci;var ue=Bi;var he=Ki;var fe=f;var ce=u;var le=h;var de=c;var ve=a;const we={...Yi,...Wi,...Xi,...Zi,...te,...re,...ne,...ie,...ee,...se};const pe={...oe,...ae};const ye={raw:ue,json:he};Ln.CID=fe.CID;Ln.hasher=ce;Ln.digest=le;Ln.varint=de;Ln.bytes=ve;Ln.bases=we;Ln.codecs=ye;Ln.hashes=pe;var be=Ln;var ge=jn;function me(t,r,n,i){return{name:t,prefix:r,encoder:{name:t,prefix:r,encode:n},decoder:{decode:i}}}const Ae=me("utf8","u",(t=>{const r=new TextDecoder("utf8");return"u"+r.decode(t)}),(t=>{const r=new TextEncoder;return r.encode(t.substring(1))}));const Ee=me("ascii","a",(t=>{let r="a";for(let n=0;n<t.length;n++){r+=String.fromCharCode(t[n])}return r}),(t=>{t=t.substring(1);const r=ge.allocUnsafe(t.length);for(let n=0;n<t.length;n++){r[n]=t.charCodeAt(n)}return r}));const Me={utf8:Ae,"utf-8":Ae,hex:be.bases.base16,latin1:Ee,ascii:Ee,binary:Ee,...be.bases};var _e=Me;Object.defineProperty(qn,"__esModule",{value:true});var Oe=_e;var Ie=xn;function Se(t,r="utf8"){const n=Oe[r];if(!n){throw new Error(`Unsupported encoding "${r}"`)}if((r==="utf8"||r==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null){return Ie.asUint8Array(globalThis.Buffer.from(t,"utf-8"))}return n.decoder.decode(`${n.prefix}${t}`)}qn.fromString=Se;var Ne={};Object.defineProperty(Ne,"__esModule",{value:true});var Ce=_e;function je(t,r="utf8"){const n=Ce[r];if(!n){throw new Error(`Unsupported encoding "${r}"`)}if((r==="utf8"||r==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null){return globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8")}return n.encoder.encode(t).substring(1)}Ne.toString=je;var xe={};Object.defineProperty(xe,"__esModule",{value:true});var Pe=jn;var Te=xn;function Re(t,r){if(t.length!==r.length){throw new Error("Inputs should have the same length")}const n=Pe.allocUnsafe(t.length);for(let i=0;i<t.length;i++){n[i]=t[i]^r[i]}return Te.asUint8Array(n)}xe.xor=Re;Object.defineProperty(In,"__esModule",{value:true});var De=Sn;var Ue=Cn;var Be=$n;var ke=qn;var $e=Ne;var Fe=xe;In.compare=De.compare;var qe=In.concat=Ue.concat;In.equals=Be.equals;var Le=In.fromString=ke.fromString;var Ke=In.toString=$e.toString;In.xor=Fe.xor;const He={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}};const Ge=":";function Qe(t){const[r,n]=t.split(Ge);return{namespace:r,reference:n}}function Je(t,r=[]){const n=[];return Object.keys(t).forEach((i=>{if(r.length&&!r.includes(i))return;const e=t[i];n.push(...e.accounts)})),n}function Ve(t,r){return t.includes(":")?[t]:r.chains||[]}var ze=Object.defineProperty,Ye=Object.getOwnPropertySymbols,We=Object.prototype.hasOwnProperty,Xe=Object.prototype.propertyIsEnumerable,Ze=(t,r,n)=>r in t?ze(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n,ts=(t,r)=>{for(var n in r||(r={}))We.call(r,n)&&Ze(t,n,r[n]);if(Ye)for(var n of Ye(r))Xe.call(r,n)&&Ze(t,n,r[n]);return t};const rs="ReactNative",ns={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},is="js";function es(){return typeof i<"u"&&typeof i.versions<"u"&&typeof i.versions.node<"u"}function ss(){return!Nt()&&!!xt()&&navigator.product===rs}function os(){return!es()&&!!xt()&&!!Nt()}function as(){return ss()?ns.reactNative:es()?ns.node:os()?ns.browser:ns.unknown}function us(){var t;try{return ss()&&typeof v<"u"&&typeof(v==null?void 0:v.Application)<"u"?(t=v.Application)==null?void 0:t.applicationId:void 0}catch{return}}function hs(t,r){let n=Kt.parse(t);return n=ts(ts({},n),r),t=Kt.stringify(n),t}function fs(){return Ft()||{name:"",description:"",url:"",icons:[""]}}function cs(){if(as()===ns.reactNative&&typeof v<"u"&&typeof(v==null?void 0:v.Platform)<"u"){const{OS:t,Version:r}=v.Platform;return[t,r].join("-")}const t=C();if(t===null)return"unknown";const r=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[r,t.name,t.version].join("-"):[r,t.version].join("-")}function ls(){var t;const r=as();return r===ns.browser?[r,((t=Rt())==null?void 0:t.host)||"unknown"].join(":"):r}function ds(t,r,n){const i=cs(),e=ls();return[[t,r].join("-"),[is,n].join("-"),i,e].join("/")}function vs({protocol:t,version:r,relayUrl:n,sdkVersion:i,auth:e,projectId:s,useOnCloseEvent:o,bundleId:a}){const u=n.split("?"),h=ds(t,r,i),f={auth:e,ua:h,projectId:s,useOnCloseEvent:o||void 0,origin:a||void 0},c=hs(u[1]||"",f);return u[0]+"?"+c}function ws(t,r){return t.filter((t=>r.includes(t))).length===t.length}function ps(t){return Object.fromEntries(t.entries())}function ys(t){return new Map(Object.entries(t))}function bs(t=D.FIVE_MINUTES,r){const n=D.toMiliseconds(t||D.FIVE_MINUTES);let i,e,s;return{resolve:t=>{s&&i&&(clearTimeout(s),i(t))},reject:t=>{s&&e&&(clearTimeout(s),e(t))},done:()=>new Promise(((t,o)=>{s=setTimeout((()=>{o(new Error(r))}),n),i=t,e=o}))}}function gs(t,r,n){return new Promise((async(i,e)=>{const s=setTimeout((()=>e(new Error(n))),r);try{const r=await t;i(r)}catch(t){e(t)}clearTimeout(s)}))}function ms(t,r){if(typeof r=="string"&&r.startsWith(`${t}:`))return r;if(t.toLowerCase()==="topic"){if(typeof r!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${r}`}else if(t.toLowerCase()==="id"){if(typeof r!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${r}`}throw new Error(`Unknown expirer target type: ${t}`)}function As(t){return ms("topic",t)}function Es(t){return ms("id",t)}function Ms(t){const[r,n]=t.split(":"),i={id:void 0,topic:void 0};if(r==="topic"&&typeof n=="string")i.topic=n;else if(r==="id"&&Number.isInteger(Number(n)))i.id=Number(n);else throw new Error(`Invalid target, expected id:number or topic:string, got ${r}:${n}`);return i}function _s(t,r){return D.fromMiliseconds((r||Date.now())+D.toMiliseconds(t))}function Os(t){return Date.now()>=D.toMiliseconds(t)}function Is(t,r){return`${t}${r?`:${r}`:""}`}function Ss(t=[],r=[]){return[...new Set([...t,...r])]}async function Ns({id:t,topic:r,wcDeepLink:n}){try{if(!n)return;const i=typeof n=="string"?JSON.parse(n):n;let e=i?.href;if(typeof e!="string")return;e.endsWith("/")&&(e=e.slice(0,-1));const s=`${e}/wc?requestId=${t}&sessionTopic=${r}`,o=as();o===ns.browser?s.startsWith("https://")||s.startsWith("http://")?window.open(s,"_blank","noreferrer noopener"):window.open(s,"_self","noreferrer noopener"):o===ns.reactNative&&typeof(v==null?void 0:v.Linking)<"u"&&await v.Linking.openURL(s)}catch(t){console.error(t)}}async function Cs(t,r){try{return await t.getItem(r)||(os()?localStorage.getItem(r):void 0)}catch(t){console.error(t)}}var js=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof v<"u"?v:typeof self<"u"?self:{};function xs(t){var r=t.default;if(typeof r=="function"){var n=function(){return r.apply(this,arguments)};n.prototype=r.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach((function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})})),n}var Ps={exports:{}};
/**
 * [js-sha3]{@link https://github.com/emn178/js-sha3}
 *
 * @version 0.8.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2015-2018
 * @license MIT
 */(function(t){(function(){var r="input is invalid type",n="finalize already called",e=typeof window=="object",s=e?window:{};s.JS_SHA3_NO_WINDOW&&(e=!1);var o=!e&&typeof self=="object",a=!s.JS_SHA3_NO_NODE_JS&&typeof i=="object"&&i.versions&&i.versions.node;a?s=js:o&&(s=self);var u=!s.JS_SHA3_NO_COMMON_JS&&!0&&t.exports,h=!s.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",f="0123456789abcdef".split(""),c=[31,7936,2031616,520093696],l=[4,1024,262144,67108864],d=[1,256,65536,16777216],v=[6,1536,393216,100663296],w=[0,8,16,24],p=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],y=[224,256,384,512],b=[128,256],g=["hex","buffer","arrayBuffer","array","digest"],m={128:168,256:136};(s.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(t){return Object.prototype.toString.call(t)==="[object Array]"}),h&&(s.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(t){return typeof t=="object"&&t.buffer&&t.buffer.constructor===ArrayBuffer});for(var A=function(t,r,n){return function(i){return new $(t,r,t).update(i)[n]()}},E=function(t,r,n){return function(i,e){return new $(t,r,e).update(i)[n]()}},M=function(t,r,n){return function(r,i,e,s){return x["cshake"+t].update(r,i,e,s)[n]()}},_=function(t,r,n){return function(r,i,e,s){return x["kmac"+t].update(r,i,e,s)[n]()}},O=function(t,r,n,i){for(var e=0;e<g.length;++e){var s=g[e];t[s]=r(n,i,s)}return t},I=function(t,r){var n=A(t,r,"hex");return n.create=function(){return new $(t,r,t)},n.update=function(t){return n.create().update(t)},O(n,A,t,r)},S=function(t,r){var n=E(t,r,"hex");return n.create=function(n){return new $(t,r,n)},n.update=function(t,r){return n.create(r).update(t)},O(n,E,t,r)},N=function(t,r){var n=m[t],i=M(t,r,"hex");return i.create=function(i,e,s){return!e&&!s?x["shake"+t].create(i):new $(t,r,i).bytepad([e,s],n)},i.update=function(t,r,n,e){return i.create(r,n,e).update(t)},O(i,M,t,r)},C=function(t,r){var n=m[t],i=_(t,r,"hex");return i.create=function(i,e,s){return new F(t,r,e).bytepad(["KMAC",s],n).bytepad([i],n)},i.update=function(t,r,n,e){return i.create(t,n,e).update(r)},O(i,_,t,r)},j=[{name:"keccak",padding:d,bits:y,createMethod:I},{name:"sha3",padding:v,bits:y,createMethod:I},{name:"shake",padding:c,bits:b,createMethod:S},{name:"cshake",padding:l,bits:b,createMethod:N},{name:"kmac",padding:l,bits:b,createMethod:C}],x={},P=[],T=0;T<j.length;++T)for(var R=j[T],D=R.bits,U=0;U<D.length;++U){var B=R.name+"_"+D[U];if(P.push(B),x[B]=R.createMethod(D[U],R.padding),R.name!=="sha3"){var k=R.name+D[U];P.push(k),x[k]=x[B]}}function $(t,r,n){this.blocks=[],this.s=[],this.padding=r,this.outputBits=n,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(t<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=n>>5,this.extraBytes=(n&31)>>3;for(var i=0;i<50;++i)this.s[i]=0}$.prototype.update=function(t){if(this.finalized)throw new Error(n);var i,e=typeof t;if(e!=="string"){if(e==="object"){if(t===null)throw new Error(r);if(h&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!Array.isArray(t)&&(!h||!ArrayBuffer.isView(t)))throw new Error(r)}else throw new Error(r);i=!0}for(var s=this.blocks,o=this.byteCount,a=t.length,u=this.blockCount,f=0,c=this.s,l,d;f<a;){if(this.reset)for(this.reset=!1,s[0]=this.block,l=1;l<u+1;++l)s[l]=0;if(i)for(l=this.start;f<a&&l<o;++f)s[l>>2]|=t[f]<<w[l++&3];else for(l=this.start;f<a&&l<o;++f)d=t.charCodeAt(f),d<128?s[l>>2]|=d<<w[l++&3]:d<2048?(s[l>>2]|=(192|d>>6)<<w[l++&3],s[l>>2]|=(128|d&63)<<w[l++&3]):d<55296||d>=57344?(s[l>>2]|=(224|d>>12)<<w[l++&3],s[l>>2]|=(128|d>>6&63)<<w[l++&3],s[l>>2]|=(128|d&63)<<w[l++&3]):(d=65536+((d&1023)<<10|t.charCodeAt(++f)&1023),s[l>>2]|=(240|d>>18)<<w[l++&3],s[l>>2]|=(128|d>>12&63)<<w[l++&3],s[l>>2]|=(128|d>>6&63)<<w[l++&3],s[l>>2]|=(128|d&63)<<w[l++&3]);if(this.lastByteIndex=l,l>=o){for(this.start=l-o,this.block=s[u],l=0;l<u;++l)c[l]^=s[l];q(c),this.reset=!0}else this.start=l}return this},$.prototype.encode=function(t,r){var n=t&255,i=1,e=[n];for(t=t>>8,n=t&255;n>0;)e.unshift(n),t=t>>8,n=t&255,++i;return r?e.push(i):e.unshift(i),this.update(e),e.length},$.prototype.encodeString=function(t){var n,i=typeof t;if(i!=="string"){if(i==="object"){if(t===null)throw new Error(r);if(h&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!Array.isArray(t)&&(!h||!ArrayBuffer.isView(t)))throw new Error(r)}else throw new Error(r);n=!0}var e=0,s=t.length;if(n)e=s;else for(var o=0;o<t.length;++o){var a=t.charCodeAt(o);a<128?e+=1:a<2048?e+=2:a<55296||a>=57344?e+=3:(a=65536+((a&1023)<<10|t.charCodeAt(++o)&1023),e+=4)}return e+=this.encode(e*8),this.update(t),e},$.prototype.bytepad=function(t,r){for(var n=this.encode(r),i=0;i<t.length;++i)n+=this.encodeString(t[i]);var e=r-n%r,s=[];return s.length=e,this.update(s),this},$.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var t=this.blocks,r=this.lastByteIndex,n=this.blockCount,i=this.s;if(t[r>>2]|=this.padding[r&3],this.lastByteIndex===this.byteCount)for(t[0]=t[n],r=1;r<n+1;++r)t[r]=0;for(t[n-1]|=2147483648,r=0;r<n;++r)i[r]^=t[r];q(i)}},$.prototype.toString=$.prototype.hex=function(){this.finalize();for(var t=this.blockCount,r=this.s,n=this.outputBlocks,i=this.extraBytes,e=0,s=0,o="",a;s<n;){for(e=0;e<t&&s<n;++e,++s)a=r[e],o+=f[a>>4&15]+f[a&15]+f[a>>12&15]+f[a>>8&15]+f[a>>20&15]+f[a>>16&15]+f[a>>28&15]+f[a>>24&15];s%t===0&&(q(r),e=0)}return i&&(a=r[e],o+=f[a>>4&15]+f[a&15],i>1&&(o+=f[a>>12&15]+f[a>>8&15]),i>2&&(o+=f[a>>20&15]+f[a>>16&15])),o},$.prototype.arrayBuffer=function(){this.finalize();var t=this.blockCount,r=this.s,n=this.outputBlocks,i=this.extraBytes,e=0,s=0,o=this.outputBits>>3,a;i?a=new ArrayBuffer(n+1<<2):a=new ArrayBuffer(o);for(var u=new Uint32Array(a);s<n;){for(e=0;e<t&&s<n;++e,++s)u[s]=r[e];s%t===0&&q(r)}return i&&(u[e]=r[e],a=a.slice(0,o)),a},$.prototype.buffer=$.prototype.arrayBuffer,$.prototype.digest=$.prototype.array=function(){this.finalize();for(var t=this.blockCount,r=this.s,n=this.outputBlocks,i=this.extraBytes,e=0,s=0,o=[],a,u;s<n;){for(e=0;e<t&&s<n;++e,++s)a=s<<2,u=r[e],o[a]=u&255,o[a+1]=u>>8&255,o[a+2]=u>>16&255,o[a+3]=u>>24&255;s%t===0&&q(r)}return i&&(a=s<<2,u=r[e],o[a]=u&255,i>1&&(o[a+1]=u>>8&255),i>2&&(o[a+2]=u>>16&255)),o};function F(t,r,n){$.call(this,t,r,n)}F.prototype=new $,F.prototype.finalize=function(){return this.encode(this.outputBits,!0),$.prototype.finalize.call(this)};var q=function(t){var r,n,i,e,s,o,a,u,h,f,c,l,d,v,w,y,b,g,m,A,E,M,_,O,I,S,N,C,j,x,P,T,R,D,U,B,k,$,F,q,L,K,H,G,Q,J,V,z,Y,W,X,Z,tt,rt,nt,it,et,st,ot,at,ut,ht,ft;for(i=0;i<48;i+=2)e=t[0]^t[10]^t[20]^t[30]^t[40],s=t[1]^t[11]^t[21]^t[31]^t[41],o=t[2]^t[12]^t[22]^t[32]^t[42],a=t[3]^t[13]^t[23]^t[33]^t[43],u=t[4]^t[14]^t[24]^t[34]^t[44],h=t[5]^t[15]^t[25]^t[35]^t[45],f=t[6]^t[16]^t[26]^t[36]^t[46],c=t[7]^t[17]^t[27]^t[37]^t[47],l=t[8]^t[18]^t[28]^t[38]^t[48],d=t[9]^t[19]^t[29]^t[39]^t[49],r=l^(o<<1|a>>>31),n=d^(a<<1|o>>>31),t[0]^=r,t[1]^=n,t[10]^=r,t[11]^=n,t[20]^=r,t[21]^=n,t[30]^=r,t[31]^=n,t[40]^=r,t[41]^=n,r=e^(u<<1|h>>>31),n=s^(h<<1|u>>>31),t[2]^=r,t[3]^=n,t[12]^=r,t[13]^=n,t[22]^=r,t[23]^=n,t[32]^=r,t[33]^=n,t[42]^=r,t[43]^=n,r=o^(f<<1|c>>>31),n=a^(c<<1|f>>>31),t[4]^=r,t[5]^=n,t[14]^=r,t[15]^=n,t[24]^=r,t[25]^=n,t[34]^=r,t[35]^=n,t[44]^=r,t[45]^=n,r=u^(l<<1|d>>>31),n=h^(d<<1|l>>>31),t[6]^=r,t[7]^=n,t[16]^=r,t[17]^=n,t[26]^=r,t[27]^=n,t[36]^=r,t[37]^=n,t[46]^=r,t[47]^=n,r=f^(e<<1|s>>>31),n=c^(s<<1|e>>>31),t[8]^=r,t[9]^=n,t[18]^=r,t[19]^=n,t[28]^=r,t[29]^=n,t[38]^=r,t[39]^=n,t[48]^=r,t[49]^=n,v=t[0],w=t[1],J=t[11]<<4|t[10]>>>28,V=t[10]<<4|t[11]>>>28,C=t[20]<<3|t[21]>>>29,j=t[21]<<3|t[20]>>>29,at=t[31]<<9|t[30]>>>23,ut=t[30]<<9|t[31]>>>23,K=t[40]<<18|t[41]>>>14,H=t[41]<<18|t[40]>>>14,D=t[2]<<1|t[3]>>>31,U=t[3]<<1|t[2]>>>31,y=t[13]<<12|t[12]>>>20,b=t[12]<<12|t[13]>>>20,z=t[22]<<10|t[23]>>>22,Y=t[23]<<10|t[22]>>>22,x=t[33]<<13|t[32]>>>19,P=t[32]<<13|t[33]>>>19,ht=t[42]<<2|t[43]>>>30,ft=t[43]<<2|t[42]>>>30,rt=t[5]<<30|t[4]>>>2,nt=t[4]<<30|t[5]>>>2,B=t[14]<<6|t[15]>>>26,k=t[15]<<6|t[14]>>>26,g=t[25]<<11|t[24]>>>21,m=t[24]<<11|t[25]>>>21,W=t[34]<<15|t[35]>>>17,X=t[35]<<15|t[34]>>>17,T=t[45]<<29|t[44]>>>3,R=t[44]<<29|t[45]>>>3,O=t[6]<<28|t[7]>>>4,I=t[7]<<28|t[6]>>>4,it=t[17]<<23|t[16]>>>9,et=t[16]<<23|t[17]>>>9,$=t[26]<<25|t[27]>>>7,F=t[27]<<25|t[26]>>>7,A=t[36]<<21|t[37]>>>11,E=t[37]<<21|t[36]>>>11,Z=t[47]<<24|t[46]>>>8,tt=t[46]<<24|t[47]>>>8,G=t[8]<<27|t[9]>>>5,Q=t[9]<<27|t[8]>>>5,S=t[18]<<20|t[19]>>>12,N=t[19]<<20|t[18]>>>12,st=t[29]<<7|t[28]>>>25,ot=t[28]<<7|t[29]>>>25,q=t[38]<<8|t[39]>>>24,L=t[39]<<8|t[38]>>>24,M=t[48]<<14|t[49]>>>18,_=t[49]<<14|t[48]>>>18,t[0]=v^~y&g,t[1]=w^~b&m,t[10]=O^~S&C,t[11]=I^~N&j,t[20]=D^~B&$,t[21]=U^~k&F,t[30]=G^~J&z,t[31]=Q^~V&Y,t[40]=rt^~it&st,t[41]=nt^~et&ot,t[2]=y^~g&A,t[3]=b^~m&E,t[12]=S^~C&x,t[13]=N^~j&P,t[22]=B^~$&q,t[23]=k^~F&L,t[32]=J^~z&W,t[33]=V^~Y&X,t[42]=it^~st&at,t[43]=et^~ot&ut,t[4]=g^~A&M,t[5]=m^~E&_,t[14]=C^~x&T,t[15]=j^~P&R,t[24]=$^~q&K,t[25]=F^~L&H,t[34]=z^~W&Z,t[35]=Y^~X&tt,t[44]=st^~at&ht,t[45]=ot^~ut&ft,t[6]=A^~M&v,t[7]=E^~_&w,t[16]=x^~T&O,t[17]=P^~R&I,t[26]=q^~K&D,t[27]=L^~H&U,t[36]=W^~Z&G,t[37]=X^~tt&Q,t[46]=at^~ht&rt,t[47]=ut^~ft&nt,t[8]=M^~v&y,t[9]=_^~w&b,t[18]=T^~O&S,t[19]=R^~I&N,t[28]=K^~D&B,t[29]=H^~U&k,t[38]=Z^~G&J,t[39]=tt^~Q&V,t[48]=ht^~rt&it,t[49]=ft^~nt&et,t[0]^=p[i],t[1]^=p[i+1]};if(u)t.exports=x;else for(T=0;T<P.length;++T)s[P[T]]=x[P[T]]})()})(Ps);var Ts=Ps.exports;const Rs="logger/5.7.0";let Ds=!1,Us=!1;const Bs={debug:1,default:2,info:2,warning:3,error:4,off:5};let ks=Bs.default,$s=null;function Fs(){try{const t=[];if(["NFD","NFC","NFKD","NFKC"].forEach((r=>{try{if("test".normalize(r)!=="test")throw new Error("bad normalize")}catch{t.push(r)}})),t.length)throw new Error("missing "+t.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(t){return t.message}return null}const qs=Fs();var Ls;(function(t){t.DEBUG="DEBUG",t.INFO="INFO",t.WARNING="WARNING",t.ERROR="ERROR",t.OFF="OFF"})(Ls||(Ls={}));var Ks;(function(t){t.UNKNOWN_ERROR="UNKNOWN_ERROR",t.NOT_IMPLEMENTED="NOT_IMPLEMENTED",t.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",t.NETWORK_ERROR="NETWORK_ERROR",t.SERVER_ERROR="SERVER_ERROR",t.TIMEOUT="TIMEOUT",t.BUFFER_OVERRUN="BUFFER_OVERRUN",t.NUMERIC_FAULT="NUMERIC_FAULT",t.MISSING_NEW="MISSING_NEW",t.INVALID_ARGUMENT="INVALID_ARGUMENT",t.MISSING_ARGUMENT="MISSING_ARGUMENT",t.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",t.CALL_EXCEPTION="CALL_EXCEPTION",t.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",t.NONCE_EXPIRED="NONCE_EXPIRED",t.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",t.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",t.TRANSACTION_REPLACED="TRANSACTION_REPLACED",t.ACTION_REJECTED="ACTION_REJECTED"})(Ks||(Ks={}));const Hs="0123456789abcdef";class Gs{constructor(t){Object.defineProperty(this,"version",{enumerable:!0,value:t,writable:!1})}_log(t,r){const n=t.toLowerCase();Bs[n]==null&&this.throwArgumentError("invalid log level name","logLevel",t),!(ks>Bs[n])&&console.log.apply(console,r)}debug(...t){this._log(Gs.levels.DEBUG,t)}info(...t){this._log(Gs.levels.INFO,t)}warn(...t){this._log(Gs.levels.WARNING,t)}makeError(t,r,n){if(Us)return this.makeError("censored error",r,{});r||(r=Gs.errors.UNKNOWN_ERROR),n||(n={});const i=[];Object.keys(n).forEach((t=>{const r=n[t];try{if(r instanceof Uint8Array){let n="";for(let t=0;t<r.length;t++)n+=Hs[r[t]>>4],n+=Hs[r[t]&15];i.push(t+"=Uint8Array(0x"+n+")")}else i.push(t+"="+JSON.stringify(r))}catch{i.push(t+"="+JSON.stringify(n[t].toString()))}})),i.push(`code=${r}`),i.push(`version=${this.version}`);const e=t;let s="";switch(r){case Ks.NUMERIC_FAULT:{s="NUMERIC_FAULT";const r=t;switch(r){case"overflow":case"underflow":case"division-by-zero":s+="-"+r;break;case"negative-power":case"negative-width":s+="-unsupported";break;case"unbound-bitwise-result":s+="-unbound-result";break}break}case Ks.CALL_EXCEPTION:case Ks.INSUFFICIENT_FUNDS:case Ks.MISSING_NEW:case Ks.NONCE_EXPIRED:case Ks.REPLACEMENT_UNDERPRICED:case Ks.TRANSACTION_REPLACED:case Ks.UNPREDICTABLE_GAS_LIMIT:s=r;break}s&&(t+=" [ See: https://links.ethers.org/v5-errors-"+s+" ]"),i.length&&(t+=" ("+i.join(", ")+")");const o=new Error(t);return o.reason=e,o.code=r,Object.keys(n).forEach((function(t){o[t]=n[t]})),o}throwError(t,r,n){throw this.makeError(t,r,n)}throwArgumentError(t,r,n){return this.throwError(t,Gs.errors.INVALID_ARGUMENT,{argument:r,value:n})}assert(t,r,n,i){t||this.throwError(r,n,i)}assertArgument(t,r,n,i){t||this.throwArgumentError(r,n,i)}checkNormalize(t){qs&&this.throwError("platform missing String.prototype.normalize",Gs.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:qs})}checkSafeUint53(t,r){typeof t=="number"&&(r==null&&(r="value not safe"),(t<0||t>=9007199254740991)&&this.throwError(r,Gs.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:t}),t%1&&this.throwError(r,Gs.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:t}))}checkArgumentCount(t,r,n){n?n=": "+n:n="",t<r&&this.throwError("missing argument"+n,Gs.errors.MISSING_ARGUMENT,{count:t,expectedCount:r}),t>r&&this.throwError("too many arguments"+n,Gs.errors.UNEXPECTED_ARGUMENT,{count:t,expectedCount:r})}checkNew(t,r){(t===Object||t==null)&&this.throwError("missing new",Gs.errors.MISSING_NEW,{name:r.name})}checkAbstract(t,r){t===r?this.throwError("cannot instantiate abstract class "+JSON.stringify(r.name)+" directly; use a sub-class",Gs.errors.UNSUPPORTED_OPERATION,{name:t.name,operation:"new"}):(t===Object||t==null)&&this.throwError("missing new",Gs.errors.MISSING_NEW,{name:r.name})}static globalLogger(){return $s||($s=new Gs(Rs)),$s}static setCensorship(t,r){if(!t&&r&&this.globalLogger().throwError("cannot permanently disable censorship",Gs.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),Ds){if(!t)return;this.globalLogger().throwError("error censorship permanent",Gs.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}Us=!!t,Ds=!!r}static setLogLevel(t){const r=Bs[t.toLowerCase()];if(r==null){Gs.globalLogger().warn("invalid log level - "+t);return}ks=r}static from(t){return new Gs(t)}}Gs.errors=Ks,Gs.levels=Ls;const Qs="bytes/5.7.0",Js=new Gs(Qs);function Vs(t){return!!t.toHexString}function zs(t){return t.slice||(t.slice=function(){const r=Array.prototype.slice.call(arguments);return zs(new Uint8Array(Array.prototype.slice.apply(t,r)))}),t}function Ys(t){return no(t)&&!(t.length%2)||Xs(t)}function Ws(t){return typeof t=="number"&&t==t&&t%1===0}function Xs(t){if(t==null)return!1;if(t.constructor===Uint8Array)return!0;if(typeof t=="string"||!Ws(t.length)||t.length<0)return!1;for(let r=0;r<t.length;r++){const n=t[r];if(!Ws(n)||n<0||n>=256)return!1}return!0}function Zs(t,r){if(r||(r={}),typeof t=="number"){Js.checkSafeUint53(t,"invalid arrayify value");const r=[];for(;t;)r.unshift(t&255),t=parseInt(String(t/256));return r.length===0&&r.push(0),zs(new Uint8Array(r))}if(r.allowMissingPrefix&&typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),Vs(t)&&(t=t.toHexString()),no(t)){let n=t.substring(2);n.length%2&&(r.hexPad==="left"?n="0"+n:r.hexPad==="right"?n+="0":Js.throwArgumentError("hex data is odd-length","value",t));const i=[];for(let t=0;t<n.length;t+=2)i.push(parseInt(n.substring(t,t+2),16));return zs(new Uint8Array(i))}return Xs(t)?zs(new Uint8Array(t)):Js.throwArgumentError("invalid arrayify value","value",t)}function to(t){const r=t.map((t=>Zs(t))),n=r.reduce(((t,r)=>t+r.length),0),i=new Uint8Array(n);return r.reduce(((t,r)=>(i.set(r,t),t+r.length)),0),zs(i)}function ro(t,r){t=Zs(t),t.length>r&&Js.throwArgumentError("value out of range","value",arguments[0]);const n=new Uint8Array(r);return n.set(t,r-t.length),zs(n)}function no(t,r){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||r&&t.length!==2+2*r)}const io="0123456789abcdef";function eo(t,r){if(r||(r={}),typeof t=="number"){Js.checkSafeUint53(t,"invalid hexlify value");let r="";for(;t;)r=io[t&15]+r,t=Math.floor(t/16);return r.length?(r.length%2&&(r="0"+r),"0x"+r):"0x00"}if(typeof t=="bigint")return t=t.toString(16),t.length%2?"0x0"+t:"0x"+t;if(r.allowMissingPrefix&&typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),Vs(t))return t.toHexString();if(no(t))return t.length%2&&(r.hexPad==="left"?t="0x0"+t.substring(2):r.hexPad==="right"?t+="0":Js.throwArgumentError("hex data is odd-length","value",t)),t.toLowerCase();if(Xs(t)){let r="0x";for(let n=0;n<t.length;n++){let i=t[n];r+=io[(i&240)>>4]+io[i&15]}return r}return Js.throwArgumentError("invalid hexlify value","value",t)}function so(t){if(typeof t!="string")t=eo(t);else if(!no(t)||t.length%2)return null;return(t.length-2)/2}function oo(t,r,n){return typeof t!="string"?t=eo(t):(!no(t)||t.length%2)&&Js.throwArgumentError("invalid hexData","value",t),r=2+2*r,n!=null?"0x"+t.substring(r,2+2*n):"0x"+t.substring(r)}function ao(t,r){for(typeof t!="string"?t=eo(t):no(t)||Js.throwArgumentError("invalid hex string","value",t),t.length>2*r+2&&Js.throwArgumentError("value out of range","value",arguments[1]);t.length<2*r+2;)t="0x0"+t.substring(2);return t}function uo(t){const r={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(Ys(t)){let n=Zs(t);n.length===64?(r.v=27+(n[32]>>7),n[32]&=127,r.r=eo(n.slice(0,32)),r.s=eo(n.slice(32,64))):n.length===65?(r.r=eo(n.slice(0,32)),r.s=eo(n.slice(32,64)),r.v=n[64]):Js.throwArgumentError("invalid signature string","signature",t),r.v<27&&(r.v===0||r.v===1?r.v+=27:Js.throwArgumentError("signature invalid v byte","signature",t)),r.recoveryParam=1-r.v%2,r.recoveryParam&&(n[32]|=128),r._vs=eo(n.slice(32,64))}else{if(r.r=t.r,r.s=t.s,r.v=t.v,r.recoveryParam=t.recoveryParam,r._vs=t._vs,r._vs!=null){const n=ro(Zs(r._vs),32);r._vs=eo(n);const i=n[0]>=128?1:0;r.recoveryParam==null?r.recoveryParam=i:r.recoveryParam!==i&&Js.throwArgumentError("signature recoveryParam mismatch _vs","signature",t),n[0]&=127;const e=eo(n);r.s==null?r.s=e:r.s!==e&&Js.throwArgumentError("signature v mismatch _vs","signature",t)}if(r.recoveryParam==null)r.v==null?Js.throwArgumentError("signature missing v and recoveryParam","signature",t):r.v===0||r.v===1?r.recoveryParam=r.v:r.recoveryParam=1-r.v%2;else if(r.v==null)r.v=27+r.recoveryParam;else{const n=r.v===0||r.v===1?r.v:1-r.v%2;r.recoveryParam!==n&&Js.throwArgumentError("signature recoveryParam mismatch v","signature",t)}r.r==null||!no(r.r)?Js.throwArgumentError("signature missing or invalid r","signature",t):r.r=ao(r.r,32),r.s==null||!no(r.s)?Js.throwArgumentError("signature missing or invalid s","signature",t):r.s=ao(r.s,32);const n=Zs(r.s);n[0]>=128&&Js.throwArgumentError("signature s out of range","signature",t),r.recoveryParam&&(n[0]|=128);const i=eo(n);r._vs&&(no(r._vs)||Js.throwArgumentError("signature invalid _vs","signature",t),r._vs=ao(r._vs,32)),r._vs==null?r._vs=i:r._vs!==i&&Js.throwArgumentError("signature _vs mismatch v and s","signature",t)}return r.yParityAndS=r._vs,r.compact=r.r+r.yParityAndS.substring(2),r}function ho(t){return"0x"+Ts.keccak_256(Zs(t))}var fo={exports:{}},co={},lo=Object.freeze({__proto__:null,default:co}),vo=xs(lo);(function(t){(function(t,r){function n(t,r){if(!t)throw new Error(r||"Assertion failed")}function i(t,r){t.super_=r;var n=function(){};n.prototype=r.prototype,t.prototype=new n,t.prototype.constructor=t}function e(t,r,n){if(e.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,t!==null&&((r==="le"||r==="be")&&(n=r,r=10),this._init(t||0,r||10,n||"be"))}typeof t=="object"?t.exports=e:r.BN=e,e.BN=e,e.wordSize=26;var s;try{typeof window<"u"&&typeof window.Buffer<"u"?s=window.Buffer:s=vo.Buffer}catch{}e.isBN=function(t){return t instanceof e?!0:t!==null&&typeof t=="object"&&t.constructor.wordSize===e.wordSize&&Array.isArray(t.words)},e.max=function(t,r){return t.cmp(r)>0?t:r},e.min=function(t,r){return t.cmp(r)<0?t:r},e.prototype._init=function(t,r,i){if(typeof t=="number")return this._initNumber(t,r,i);if(typeof t=="object")return this._initArray(t,r,i);r==="hex"&&(r=16),n(r===(r|0)&&r>=2&&r<=36),t=t.toString().replace(/\s+/g,"");var e=0;t[0]==="-"&&(e++,this.negative=1),e<t.length&&(r===16?this._parseHex(t,e,i):(this._parseBase(t,r,e),i==="le"&&this._initArray(this.toArray(),r,i)))},e.prototype._initNumber=function(t,r,i){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[t&67108863],this.length=1):t<4503599627370496?(this.words=[t&67108863,t/67108864&67108863],this.length=2):(n(t<9007199254740992),this.words=[t&67108863,t/67108864&67108863,1],this.length=3),i==="le"&&this._initArray(this.toArray(),r,i)},e.prototype._initArray=function(t,r,i){if(n(typeof t.length=="number"),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var e=0;e<this.length;e++)this.words[e]=0;var s,o,a=0;if(i==="be")for(e=t.length-1,s=0;e>=0;e-=3)o=t[e]|t[e-1]<<8|t[e-2]<<16,this.words[s]|=o<<a&67108863,this.words[s+1]=o>>>26-a&67108863,a+=24,a>=26&&(a-=26,s++);else if(i==="le")for(e=0,s=0;e<t.length;e+=3)o=t[e]|t[e+1]<<8|t[e+2]<<16,this.words[s]|=o<<a&67108863,this.words[s+1]=o>>>26-a&67108863,a+=24,a>=26&&(a-=26,s++);return this._strip()};function o(t,r){var i=t.charCodeAt(r);if(i>=48&&i<=57)return i-48;if(i>=65&&i<=70)return i-55;if(i>=97&&i<=102)return i-87;n(!1,"Invalid character in "+t)}function a(t,r,n){var i=o(t,n);return n-1>=r&&(i|=o(t,n-1)<<4),i}e.prototype._parseHex=function(t,r,n){this.length=Math.ceil((t.length-r)/6),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var e=0,s=0,o;if(n==="be")for(i=t.length-1;i>=r;i-=2)o=a(t,r,i)<<e,this.words[s]|=o&67108863,e>=18?(e-=18,s+=1,this.words[s]|=o>>>26):e+=8;else{var u=t.length-r;for(i=u%2===0?r+1:r;i<t.length;i+=2)o=a(t,r,i)<<e,this.words[s]|=o&67108863,e>=18?(e-=18,s+=1,this.words[s]|=o>>>26):e+=8}this._strip()};function u(t,r,i,e){for(var s=0,o=0,a=Math.min(t.length,i),u=r;u<a;u++){var h=t.charCodeAt(u)-48;s*=e,h>=49?o=h-49+10:h>=17?o=h-17+10:o=h,n(h>=0&&o<e,"Invalid character"),s+=o}return s}e.prototype._parseBase=function(t,r,n){this.words=[0],this.length=1;for(var i=0,e=1;e<=67108863;e*=r)i++;i--,e=e/r|0;for(var s=t.length-n,o=s%i,a=Math.min(s,s-o)+n,h=0,f=n;f<a;f+=i)h=u(t,f,f+i,r),this.imuln(e),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h);if(o!==0){var c=1;for(h=u(t,f,t.length,r),f=0;f<o;f++)c*=r;this.imuln(c),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h)}this._strip()},e.prototype.copy=function(t){t.words=new Array(this.length);for(var r=0;r<this.length;r++)t.words[r]=this.words[r];t.length=this.length,t.negative=this.negative,t.red=this.red};function h(t,r){t.words=r.words,t.length=r.length,t.negative=r.negative,t.red=r.red}if(e.prototype._move=function(t){h(t,this)},e.prototype.clone=function(){var t=new e(null);return this.copy(t),t},e.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},e.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},e.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{e.prototype[Symbol.for("nodejs.util.inspect.custom")]=f}catch{e.prototype.inspect=f}else e.prototype.inspect=f;function f(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var c=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],l=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],d=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];e.prototype.toString=function(t,r){t=t||10,r=r|0||1;var i;if(t===16||t==="hex"){i="";for(var e=0,s=0,o=0;o<this.length;o++){var a=this.words[o],u=((a<<e|s)&16777215).toString(16);s=a>>>24-e&16777215,e+=2,e>=26&&(e-=26,o--),s!==0||o!==this.length-1?i=c[6-u.length]+u+i:i=u+i}for(s!==0&&(i=s.toString(16)+i);i.length%r!==0;)i="0"+i;return this.negative!==0&&(i="-"+i),i}if(t===(t|0)&&t>=2&&t<=36){var h=l[t],f=d[t];i="";var v=this.clone();for(v.negative=0;!v.isZero();){var w=v.modrn(f).toString(t);v=v.idivn(f),v.isZero()?i=w+i:i=c[h-w.length]+w+i}for(this.isZero()&&(i="0"+i);i.length%r!==0;)i="0"+i;return this.negative!==0&&(i="-"+i),i}n(!1,"Base should be between 2 and 36")},e.prototype.toNumber=function(){var t=this.words[0];return this.length===2?t+=this.words[1]*67108864:this.length===3&&this.words[2]===1?t+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-t:t},e.prototype.toJSON=function(){return this.toString(16,2)},s&&(e.prototype.toBuffer=function(t,r){return this.toArrayLike(s,t,r)}),e.prototype.toArray=function(t,r){return this.toArrayLike(Array,t,r)};var v=function(t,r){return t.allocUnsafe?t.allocUnsafe(r):new t(r)};e.prototype.toArrayLike=function(t,r,i){this._strip();var e=this.byteLength(),s=i||Math.max(1,e);n(e<=s,"byte array longer than desired length"),n(s>0,"Requested array length <= 0");var o=v(t,s),a=r==="le"?"LE":"BE";return this["_toArrayLike"+a](o,e),o},e.prototype._toArrayLikeLE=function(t,r){for(var n=0,i=0,e=0,s=0;e<this.length;e++){var o=this.words[e]<<s|i;t[n++]=o&255,n<t.length&&(t[n++]=o>>8&255),n<t.length&&(t[n++]=o>>16&255),s===6?(n<t.length&&(t[n++]=o>>24&255),i=0,s=0):(i=o>>>24,s+=2)}if(n<t.length)for(t[n++]=i;n<t.length;)t[n++]=0},e.prototype._toArrayLikeBE=function(t,r){for(var n=t.length-1,i=0,e=0,s=0;e<this.length;e++){var o=this.words[e]<<s|i;t[n--]=o&255,n>=0&&(t[n--]=o>>8&255),n>=0&&(t[n--]=o>>16&255),s===6?(n>=0&&(t[n--]=o>>24&255),i=0,s=0):(i=o>>>24,s+=2)}if(n>=0)for(t[n--]=i;n>=0;)t[n--]=0},Math.clz32?e.prototype._countBits=function(t){return 32-Math.clz32(t)}:e.prototype._countBits=function(t){var r=t,n=0;return r>=4096&&(n+=13,r>>>=13),r>=64&&(n+=7,r>>>=7),r>=8&&(n+=4,r>>>=4),r>=2&&(n+=2,r>>>=2),n+r},e.prototype._zeroBits=function(t){if(t===0)return 26;var r=t,n=0;return r&8191||(n+=13,r>>>=13),r&127||(n+=7,r>>>=7),r&15||(n+=4,r>>>=4),r&3||(n+=2,r>>>=2),r&1||n++,n},e.prototype.bitLength=function(){var t=this.words[this.length-1],r=this._countBits(t);return(this.length-1)*26+r};function w(t){for(var r=new Array(t.bitLength()),n=0;n<r.length;n++){var i=n/26|0,e=n%26;r[n]=t.words[i]>>>e&1}return r}e.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,r=0;r<this.length;r++){var n=this._zeroBits(this.words[r]);if(t+=n,n!==26)break}return t},e.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},e.prototype.toTwos=function(t){return this.negative!==0?this.abs().inotn(t).iaddn(1):this.clone()},e.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},e.prototype.isNeg=function(){return this.negative!==0},e.prototype.neg=function(){return this.clone().ineg()},e.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},e.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]|t.words[r];return this._strip()},e.prototype.ior=function(t){return n((this.negative|t.negative)===0),this.iuor(t)},e.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},e.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},e.prototype.iuand=function(t){var r;this.length>t.length?r=t:r=this;for(var n=0;n<r.length;n++)this.words[n]=this.words[n]&t.words[n];return this.length=r.length,this._strip()},e.prototype.iand=function(t){return n((this.negative|t.negative)===0),this.iuand(t)},e.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},e.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},e.prototype.iuxor=function(t){var r,n;this.length>t.length?(r=this,n=t):(r=t,n=this);for(var i=0;i<n.length;i++)this.words[i]=r.words[i]^n.words[i];if(this!==r)for(;i<r.length;i++)this.words[i]=r.words[i];return this.length=r.length,this._strip()},e.prototype.ixor=function(t){return n((this.negative|t.negative)===0),this.iuxor(t)},e.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},e.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},e.prototype.inotn=function(t){n(typeof t=="number"&&t>=0);var r=Math.ceil(t/26)|0,i=t%26;this._expand(r),i>0&&r--;for(var e=0;e<r;e++)this.words[e]=~this.words[e]&67108863;return i>0&&(this.words[e]=~this.words[e]&67108863>>26-i),this._strip()},e.prototype.notn=function(t){return this.clone().inotn(t)},e.prototype.setn=function(t,r){n(typeof t=="number"&&t>=0);var i=t/26|0,e=t%26;return this._expand(i+1),r?this.words[i]=this.words[i]|1<<e:this.words[i]=this.words[i]&~(1<<e),this._strip()},e.prototype.iadd=function(t){var r;if(this.negative!==0&&t.negative===0)return this.negative=0,r=this.isub(t),this.negative^=1,this._normSign();if(this.negative===0&&t.negative!==0)return t.negative=0,r=this.isub(t),t.negative=1,r._normSign();var n,i;this.length>t.length?(n=this,i=t):(n=t,i=this);for(var e=0,s=0;s<i.length;s++)r=(n.words[s]|0)+(i.words[s]|0)+e,this.words[s]=r&67108863,e=r>>>26;for(;e!==0&&s<n.length;s++)r=(n.words[s]|0)+e,this.words[s]=r&67108863,e=r>>>26;if(this.length=n.length,e!==0)this.words[this.length]=e,this.length++;else if(n!==this)for(;s<n.length;s++)this.words[s]=n.words[s];return this},e.prototype.add=function(t){var r;return t.negative!==0&&this.negative===0?(t.negative=0,r=this.sub(t),t.negative^=1,r):t.negative===0&&this.negative!==0?(this.negative=0,r=t.sub(this),this.negative=1,r):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},e.prototype.isub=function(t){if(t.negative!==0){t.negative=0;var r=this.iadd(t);return t.negative=1,r._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var n=this.cmp(t);if(n===0)return this.negative=0,this.length=1,this.words[0]=0,this;var i,e;n>0?(i=this,e=t):(i=t,e=this);for(var s=0,o=0;o<e.length;o++)r=(i.words[o]|0)-(e.words[o]|0)+s,s=r>>26,this.words[o]=r&67108863;for(;s!==0&&o<i.length;o++)r=(i.words[o]|0)+s,s=r>>26,this.words[o]=r&67108863;if(s===0&&o<i.length&&i!==this)for(;o<i.length;o++)this.words[o]=i.words[o];return this.length=Math.max(this.length,o),i!==this&&(this.negative=1),this._strip()},e.prototype.sub=function(t){return this.clone().isub(t)};function p(t,r,n){n.negative=r.negative^t.negative;var i=t.length+r.length|0;n.length=i,i=i-1|0;var e=t.words[0]|0,s=r.words[0]|0,o=e*s,a=o&67108863,u=o/67108864|0;n.words[0]=a;for(var h=1;h<i;h++){for(var f=u>>>26,c=u&67108863,l=Math.min(h,r.length-1),d=Math.max(0,h-t.length+1);d<=l;d++){var v=h-d|0;e=t.words[v]|0,s=r.words[d]|0,o=e*s+c,f+=o/67108864|0,c=o&67108863}n.words[h]=c|0,u=f|0}return u!==0?n.words[h]=u|0:n.length--,n._strip()}var y=function(t,r,n){var i=t.words,e=r.words,s=n.words,o=0,a,u,h,f=i[0]|0,c=f&8191,l=f>>>13,d=i[1]|0,v=d&8191,w=d>>>13,p=i[2]|0,y=p&8191,b=p>>>13,g=i[3]|0,m=g&8191,A=g>>>13,E=i[4]|0,M=E&8191,_=E>>>13,O=i[5]|0,I=O&8191,S=O>>>13,N=i[6]|0,C=N&8191,j=N>>>13,x=i[7]|0,P=x&8191,T=x>>>13,R=i[8]|0,D=R&8191,U=R>>>13,B=i[9]|0,k=B&8191,$=B>>>13,F=e[0]|0,q=F&8191,L=F>>>13,K=e[1]|0,H=K&8191,G=K>>>13,Q=e[2]|0,J=Q&8191,V=Q>>>13,z=e[3]|0,Y=z&8191,W=z>>>13,X=e[4]|0,Z=X&8191,tt=X>>>13,rt=e[5]|0,nt=rt&8191,it=rt>>>13,et=e[6]|0,st=et&8191,ot=et>>>13,at=e[7]|0,ut=at&8191,ht=at>>>13,ft=e[8]|0,ct=ft&8191,lt=ft>>>13,dt=e[9]|0,vt=dt&8191,wt=dt>>>13;n.negative=t.negative^r.negative,n.length=19,a=Math.imul(c,q),u=Math.imul(c,L),u=u+Math.imul(l,q)|0,h=Math.imul(l,L);var pt=(o+a|0)+((u&8191)<<13)|0;o=(h+(u>>>13)|0)+(pt>>>26)|0,pt&=67108863,a=Math.imul(v,q),u=Math.imul(v,L),u=u+Math.imul(w,q)|0,h=Math.imul(w,L),a=a+Math.imul(c,H)|0,u=u+Math.imul(c,G)|0,u=u+Math.imul(l,H)|0,h=h+Math.imul(l,G)|0;var yt=(o+a|0)+((u&8191)<<13)|0;o=(h+(u>>>13)|0)+(yt>>>26)|0,yt&=67108863,a=Math.imul(y,q),u=Math.imul(y,L),u=u+Math.imul(b,q)|0,h=Math.imul(b,L),a=a+Math.imul(v,H)|0,u=u+Math.imul(v,G)|0,u=u+Math.imul(w,H)|0,h=h+Math.imul(w,G)|0,a=a+Math.imul(c,J)|0,u=u+Math.imul(c,V)|0,u=u+Math.imul(l,J)|0,h=h+Math.imul(l,V)|0;var bt=(o+a|0)+((u&8191)<<13)|0;o=(h+(u>>>13)|0)+(bt>>>26)|0,bt&=67108863,a=Math.imul(m,q),u=Math.imul(m,L),u=u+Math.imul(A,q)|0,h=Math.imul(A,L),a=a+Math.imul(y,H)|0,u=u+Math.imul(y,G)|0,u=u+Math.imul(b,H)|0,h=h+Math.imul(b,G)|0,a=a+Math.imul(v,J)|0,u=u+Math.imul(v,V)|0,u=u+Math.imul(w,J)|0,h=h+Math.imul(w,V)|0,a=a+Math.imul(c,Y)|0,u=u+Math.imul(c,W)|0,u=u+Math.imul(l,Y)|0,h=h+Math.imul(l,W)|0;var gt=(o+a|0)+((u&8191)<<13)|0;o=(h+(u>>>13)|0)+(gt>>>26)|0,gt&=67108863,a=Math.imul(M,q),u=Math.imul(M,L),u=u+Math.imul(_,q)|0,h=Math.imul(_,L),a=a+Math.imul(m,H)|0,u=u+Math.imul(m,G)|0,u=u+Math.imul(A,H)|0,h=h+Math.imul(A,G)|0,a=a+Math.imul(y,J)|0,u=u+Math.imul(y,V)|0,u=u+Math.imul(b,J)|0,h=h+Math.imul(b,V)|0,a=a+Math.imul(v,Y)|0,u=u+Math.imul(v,W)|0,u=u+Math.imul(w,Y)|0,h=h+Math.imul(w,W)|0,a=a+Math.imul(c,Z)|0,u=u+Math.imul(c,tt)|0,u=u+Math.imul(l,Z)|0,h=h+Math.imul(l,tt)|0;var mt=(o+a|0)+((u&8191)<<13)|0;o=(h+(u>>>13)|0)+(mt>>>26)|0,mt&=67108863,a=Math.imul(I,q),u=Math.imul(I,L),u=u+Math.imul(S,q)|0,h=Math.imul(S,L),a=a+Math.imul(M,H)|0,u=u+Math.imul(M,G)|0,u=u+Math.imul(_,H)|0,h=h+Math.imul(_,G)|0,a=a+Math.imul(m,J)|0,u=u+Math.imul(m,V)|0,u=u+Math.imul(A,J)|0,h=h+Math.imul(A,V)|0,a=a+Math.imul(y,Y)|0,u=u+Math.imul(y,W)|0,u=u+Math.imul(b,Y)|0,h=h+Math.imul(b,W)|0,a=a+Math.imul(v,Z)|0,u=u+Math.imul(v,tt)|0,u=u+Math.imul(w,Z)|0,h=h+Math.imul(w,tt)|0,a=a+Math.imul(c,nt)|0,u=u+Math.imul(c,it)|0,u=u+Math.imul(l,nt)|0,h=h+Math.imul(l,it)|0;var At=(o+a|0)+((u&8191)<<13)|0;o=(h+(u>>>13)|0)+(At>>>26)|0,At&=67108863,a=Math.imul(C,q),u=Math.imul(C,L),u=u+Math.imul(j,q)|0,h=Math.imul(j,L),a=a+Math.imul(I,H)|0,u=u+Math.imul(I,G)|0,u=u+Math.imul(S,H)|0,h=h+Math.imul(S,G)|0,a=a+Math.imul(M,J)|0,u=u+Math.imul(M,V)|0,u=u+Math.imul(_,J)|0,h=h+Math.imul(_,V)|0,a=a+Math.imul(m,Y)|0,u=u+Math.imul(m,W)|0,u=u+Math.imul(A,Y)|0,h=h+Math.imul(A,W)|0,a=a+Math.imul(y,Z)|0,u=u+Math.imul(y,tt)|0,u=u+Math.imul(b,Z)|0,h=h+Math.imul(b,tt)|0,a=a+Math.imul(v,nt)|0,u=u+Math.imul(v,it)|0,u=u+Math.imul(w,nt)|0,h=h+Math.imul(w,it)|0,a=a+Math.imul(c,st)|0,u=u+Math.imul(c,ot)|0,u=u+Math.imul(l,st)|0,h=h+Math.imul(l,ot)|0;var Et=(o+a|0)+((u&8191)<<13)|0;o=(h+(u>>>13)|0)+(Et>>>26)|0,Et&=67108863,a=Math.imul(P,q),u=Math.imul(P,L),u=u+Math.imul(T,q)|0,h=Math.imul(T,L),a=a+Math.imul(C,H)|0,u=u+Math.imul(C,G)|0,u=u+Math.imul(j,H)|0,h=h+Math.imul(j,G)|0,a=a+Math.imul(I,J)|0,u=u+Math.imul(I,V)|0,u=u+Math.imul(S,J)|0,h=h+Math.imul(S,V)|0,a=a+Math.imul(M,Y)|0,u=u+Math.imul(M,W)|0,u=u+Math.imul(_,Y)|0,h=h+Math.imul(_,W)|0,a=a+Math.imul(m,Z)|0,u=u+Math.imul(m,tt)|0,u=u+Math.imul(A,Z)|0,h=h+Math.imul(A,tt)|0,a=a+Math.imul(y,nt)|0,u=u+Math.imul(y,it)|0,u=u+Math.imul(b,nt)|0,h=h+Math.imul(b,it)|0,a=a+Math.imul(v,st)|0,u=u+Math.imul(v,ot)|0,u=u+Math.imul(w,st)|0,h=h+Math.imul(w,ot)|0,a=a+Math.imul(c,ut)|0,u=u+Math.imul(c,ht)|0,u=u+Math.imul(l,ut)|0,h=h+Math.imul(l,ht)|0;var Mt=(o+a|0)+((u&8191)<<13)|0;o=(h+(u>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,a=Math.imul(D,q),u=Math.imul(D,L),u=u+Math.imul(U,q)|0,h=Math.imul(U,L),a=a+Math.imul(P,H)|0,u=u+Math.imul(P,G)|0,u=u+Math.imul(T,H)|0,h=h+Math.imul(T,G)|0,a=a+Math.imul(C,J)|0,u=u+Math.imul(C,V)|0,u=u+Math.imul(j,J)|0,h=h+Math.imul(j,V)|0,a=a+Math.imul(I,Y)|0,u=u+Math.imul(I,W)|0,u=u+Math.imul(S,Y)|0,h=h+Math.imul(S,W)|0,a=a+Math.imul(M,Z)|0,u=u+Math.imul(M,tt)|0,u=u+Math.imul(_,Z)|0,h=h+Math.imul(_,tt)|0,a=a+Math.imul(m,nt)|0,u=u+Math.imul(m,it)|0,u=u+Math.imul(A,nt)|0,h=h+Math.imul(A,it)|0,a=a+Math.imul(y,st)|0,u=u+Math.imul(y,ot)|0,u=u+Math.imul(b,st)|0,h=h+Math.imul(b,ot)|0,a=a+Math.imul(v,ut)|0,u=u+Math.imul(v,ht)|0,u=u+Math.imul(w,ut)|0,h=h+Math.imul(w,ht)|0,a=a+Math.imul(c,ct)|0,u=u+Math.imul(c,lt)|0,u=u+Math.imul(l,ct)|0,h=h+Math.imul(l,lt)|0;var _t=(o+a|0)+((u&8191)<<13)|0;o=(h+(u>>>13)|0)+(_t>>>26)|0,_t&=67108863,a=Math.imul(k,q),u=Math.imul(k,L),u=u+Math.imul($,q)|0,h=Math.imul($,L),a=a+Math.imul(D,H)|0,u=u+Math.imul(D,G)|0,u=u+Math.imul(U,H)|0,h=h+Math.imul(U,G)|0,a=a+Math.imul(P,J)|0,u=u+Math.imul(P,V)|0,u=u+Math.imul(T,J)|0,h=h+Math.imul(T,V)|0,a=a+Math.imul(C,Y)|0,u=u+Math.imul(C,W)|0,u=u+Math.imul(j,Y)|0,h=h+Math.imul(j,W)|0,a=a+Math.imul(I,Z)|0,u=u+Math.imul(I,tt)|0,u=u+Math.imul(S,Z)|0,h=h+Math.imul(S,tt)|0,a=a+Math.imul(M,nt)|0,u=u+Math.imul(M,it)|0,u=u+Math.imul(_,nt)|0,h=h+Math.imul(_,it)|0,a=a+Math.imul(m,st)|0,u=u+Math.imul(m,ot)|0,u=u+Math.imul(A,st)|0,h=h+Math.imul(A,ot)|0,a=a+Math.imul(y,ut)|0,u=u+Math.imul(y,ht)|0,u=u+Math.imul(b,ut)|0,h=h+Math.imul(b,ht)|0,a=a+Math.imul(v,ct)|0,u=u+Math.imul(v,lt)|0,u=u+Math.imul(w,ct)|0,h=h+Math.imul(w,lt)|0,a=a+Math.imul(c,vt)|0,u=u+Math.imul(c,wt)|0,u=u+Math.imul(l,vt)|0,h=h+Math.imul(l,wt)|0;var Ot=(o+a|0)+((u&8191)<<13)|0;o=(h+(u>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,a=Math.imul(k,H),u=Math.imul(k,G),u=u+Math.imul($,H)|0,h=Math.imul($,G),a=a+Math.imul(D,J)|0,u=u+Math.imul(D,V)|0,u=u+Math.imul(U,J)|0,h=h+Math.imul(U,V)|0,a=a+Math.imul(P,Y)|0,u=u+Math.imul(P,W)|0,u=u+Math.imul(T,Y)|0,h=h+Math.imul(T,W)|0,a=a+Math.imul(C,Z)|0,u=u+Math.imul(C,tt)|0,u=u+Math.imul(j,Z)|0,h=h+Math.imul(j,tt)|0,a=a+Math.imul(I,nt)|0,u=u+Math.imul(I,it)|0,u=u+Math.imul(S,nt)|0,h=h+Math.imul(S,it)|0,a=a+Math.imul(M,st)|0,u=u+Math.imul(M,ot)|0,u=u+Math.imul(_,st)|0,h=h+Math.imul(_,ot)|0,a=a+Math.imul(m,ut)|0,u=u+Math.imul(m,ht)|0,u=u+Math.imul(A,ut)|0,h=h+Math.imul(A,ht)|0,a=a+Math.imul(y,ct)|0,u=u+Math.imul(y,lt)|0,u=u+Math.imul(b,ct)|0,h=h+Math.imul(b,lt)|0,a=a+Math.imul(v,vt)|0,u=u+Math.imul(v,wt)|0,u=u+Math.imul(w,vt)|0,h=h+Math.imul(w,wt)|0;var It=(o+a|0)+((u&8191)<<13)|0;o=(h+(u>>>13)|0)+(It>>>26)|0,It&=67108863,a=Math.imul(k,J),u=Math.imul(k,V),u=u+Math.imul($,J)|0,h=Math.imul($,V),a=a+Math.imul(D,Y)|0,u=u+Math.imul(D,W)|0,u=u+Math.imul(U,Y)|0,h=h+Math.imul(U,W)|0,a=a+Math.imul(P,Z)|0,u=u+Math.imul(P,tt)|0,u=u+Math.imul(T,Z)|0,h=h+Math.imul(T,tt)|0,a=a+Math.imul(C,nt)|0,u=u+Math.imul(C,it)|0,u=u+Math.imul(j,nt)|0,h=h+Math.imul(j,it)|0,a=a+Math.imul(I,st)|0,u=u+Math.imul(I,ot)|0,u=u+Math.imul(S,st)|0,h=h+Math.imul(S,ot)|0,a=a+Math.imul(M,ut)|0,u=u+Math.imul(M,ht)|0,u=u+Math.imul(_,ut)|0,h=h+Math.imul(_,ht)|0,a=a+Math.imul(m,ct)|0,u=u+Math.imul(m,lt)|0,u=u+Math.imul(A,ct)|0,h=h+Math.imul(A,lt)|0,a=a+Math.imul(y,vt)|0,u=u+Math.imul(y,wt)|0,u=u+Math.imul(b,vt)|0,h=h+Math.imul(b,wt)|0;var St=(o+a|0)+((u&8191)<<13)|0;o=(h+(u>>>13)|0)+(St>>>26)|0,St&=67108863,a=Math.imul(k,Y),u=Math.imul(k,W),u=u+Math.imul($,Y)|0,h=Math.imul($,W),a=a+Math.imul(D,Z)|0,u=u+Math.imul(D,tt)|0,u=u+Math.imul(U,Z)|0,h=h+Math.imul(U,tt)|0,a=a+Math.imul(P,nt)|0,u=u+Math.imul(P,it)|0,u=u+Math.imul(T,nt)|0,h=h+Math.imul(T,it)|0,a=a+Math.imul(C,st)|0,u=u+Math.imul(C,ot)|0,u=u+Math.imul(j,st)|0,h=h+Math.imul(j,ot)|0,a=a+Math.imul(I,ut)|0,u=u+Math.imul(I,ht)|0,u=u+Math.imul(S,ut)|0,h=h+Math.imul(S,ht)|0,a=a+Math.imul(M,ct)|0,u=u+Math.imul(M,lt)|0,u=u+Math.imul(_,ct)|0,h=h+Math.imul(_,lt)|0,a=a+Math.imul(m,vt)|0,u=u+Math.imul(m,wt)|0,u=u+Math.imul(A,vt)|0,h=h+Math.imul(A,wt)|0;var Nt=(o+a|0)+((u&8191)<<13)|0;o=(h+(u>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,a=Math.imul(k,Z),u=Math.imul(k,tt),u=u+Math.imul($,Z)|0,h=Math.imul($,tt),a=a+Math.imul(D,nt)|0,u=u+Math.imul(D,it)|0,u=u+Math.imul(U,nt)|0,h=h+Math.imul(U,it)|0,a=a+Math.imul(P,st)|0,u=u+Math.imul(P,ot)|0,u=u+Math.imul(T,st)|0,h=h+Math.imul(T,ot)|0,a=a+Math.imul(C,ut)|0,u=u+Math.imul(C,ht)|0,u=u+Math.imul(j,ut)|0,h=h+Math.imul(j,ht)|0,a=a+Math.imul(I,ct)|0,u=u+Math.imul(I,lt)|0,u=u+Math.imul(S,ct)|0,h=h+Math.imul(S,lt)|0,a=a+Math.imul(M,vt)|0,u=u+Math.imul(M,wt)|0,u=u+Math.imul(_,vt)|0,h=h+Math.imul(_,wt)|0;var Ct=(o+a|0)+((u&8191)<<13)|0;o=(h+(u>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,a=Math.imul(k,nt),u=Math.imul(k,it),u=u+Math.imul($,nt)|0,h=Math.imul($,it),a=a+Math.imul(D,st)|0,u=u+Math.imul(D,ot)|0,u=u+Math.imul(U,st)|0,h=h+Math.imul(U,ot)|0,a=a+Math.imul(P,ut)|0,u=u+Math.imul(P,ht)|0,u=u+Math.imul(T,ut)|0,h=h+Math.imul(T,ht)|0,a=a+Math.imul(C,ct)|0,u=u+Math.imul(C,lt)|0,u=u+Math.imul(j,ct)|0,h=h+Math.imul(j,lt)|0,a=a+Math.imul(I,vt)|0,u=u+Math.imul(I,wt)|0,u=u+Math.imul(S,vt)|0,h=h+Math.imul(S,wt)|0;var jt=(o+a|0)+((u&8191)<<13)|0;o=(h+(u>>>13)|0)+(jt>>>26)|0,jt&=67108863,a=Math.imul(k,st),u=Math.imul(k,ot),u=u+Math.imul($,st)|0,h=Math.imul($,ot),a=a+Math.imul(D,ut)|0,u=u+Math.imul(D,ht)|0,u=u+Math.imul(U,ut)|0,h=h+Math.imul(U,ht)|0,a=a+Math.imul(P,ct)|0,u=u+Math.imul(P,lt)|0,u=u+Math.imul(T,ct)|0,h=h+Math.imul(T,lt)|0,a=a+Math.imul(C,vt)|0,u=u+Math.imul(C,wt)|0,u=u+Math.imul(j,vt)|0,h=h+Math.imul(j,wt)|0;var xt=(o+a|0)+((u&8191)<<13)|0;o=(h+(u>>>13)|0)+(xt>>>26)|0,xt&=67108863,a=Math.imul(k,ut),u=Math.imul(k,ht),u=u+Math.imul($,ut)|0,h=Math.imul($,ht),a=a+Math.imul(D,ct)|0,u=u+Math.imul(D,lt)|0,u=u+Math.imul(U,ct)|0,h=h+Math.imul(U,lt)|0,a=a+Math.imul(P,vt)|0,u=u+Math.imul(P,wt)|0,u=u+Math.imul(T,vt)|0,h=h+Math.imul(T,wt)|0;var Pt=(o+a|0)+((u&8191)<<13)|0;o=(h+(u>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,a=Math.imul(k,ct),u=Math.imul(k,lt),u=u+Math.imul($,ct)|0,h=Math.imul($,lt),a=a+Math.imul(D,vt)|0,u=u+Math.imul(D,wt)|0,u=u+Math.imul(U,vt)|0,h=h+Math.imul(U,wt)|0;var Tt=(o+a|0)+((u&8191)<<13)|0;o=(h+(u>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,a=Math.imul(k,vt),u=Math.imul(k,wt),u=u+Math.imul($,vt)|0,h=Math.imul($,wt);var Rt=(o+a|0)+((u&8191)<<13)|0;return o=(h+(u>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,s[0]=pt,s[1]=yt,s[2]=bt,s[3]=gt,s[4]=mt,s[5]=At,s[6]=Et,s[7]=Mt,s[8]=_t,s[9]=Ot,s[10]=It,s[11]=St,s[12]=Nt,s[13]=Ct,s[14]=jt,s[15]=xt,s[16]=Pt,s[17]=Tt,s[18]=Rt,o!==0&&(s[19]=o,n.length++),n};Math.imul||(y=p);function b(t,r,n){n.negative=r.negative^t.negative,n.length=t.length+r.length;for(var i=0,e=0,s=0;s<n.length-1;s++){var o=e;e=0;for(var a=i&67108863,u=Math.min(s,r.length-1),h=Math.max(0,s-t.length+1);h<=u;h++){var f=s-h,c=t.words[f]|0,l=r.words[h]|0,d=c*l,v=d&67108863;o=o+(d/67108864|0)|0,v=v+a|0,a=v&67108863,o=o+(v>>>26)|0,e+=o>>>26,o&=67108863}n.words[s]=a,i=o,o=e}return i!==0?n.words[s]=i:n.length--,n._strip()}function g(t,r,n){return b(t,r,n)}e.prototype.mulTo=function(t,r){var n,i=this.length+t.length;return this.length===10&&t.length===10?n=y(this,t,r):i<63?n=p(this,t,r):i<1024?n=b(this,t,r):n=g(this,t,r),n},e.prototype.mul=function(t){var r=new e(null);return r.words=new Array(this.length+t.length),this.mulTo(t,r)},e.prototype.mulf=function(t){var r=new e(null);return r.words=new Array(this.length+t.length),g(this,t,r)},e.prototype.imul=function(t){return this.clone().mulTo(t,this)},e.prototype.imuln=function(t){var r=t<0;r&&(t=-t),n(typeof t=="number"),n(t<67108864);for(var i=0,e=0;e<this.length;e++){var s=(this.words[e]|0)*t,o=(s&67108863)+(i&67108863);i>>=26,i+=s/67108864|0,i+=o>>>26,this.words[e]=o&67108863}return i!==0&&(this.words[e]=i,this.length++),r?this.ineg():this},e.prototype.muln=function(t){return this.clone().imuln(t)},e.prototype.sqr=function(){return this.mul(this)},e.prototype.isqr=function(){return this.imul(this.clone())},e.prototype.pow=function(t){var r=w(t);if(r.length===0)return new e(1);for(var n=this,i=0;i<r.length&&r[i]===0;i++,n=n.sqr());if(++i<r.length)for(var s=n.sqr();i<r.length;i++,s=s.sqr())r[i]!==0&&(n=n.mul(s));return n},e.prototype.iushln=function(t){n(typeof t=="number"&&t>=0);var r=t%26,i=(t-r)/26,e=67108863>>>26-r<<26-r,s;if(r!==0){var o=0;for(s=0;s<this.length;s++){var a=this.words[s]&e,u=(this.words[s]|0)-a<<r;this.words[s]=u|o,o=a>>>26-r}o&&(this.words[s]=o,this.length++)}if(i!==0){for(s=this.length-1;s>=0;s--)this.words[s+i]=this.words[s];for(s=0;s<i;s++)this.words[s]=0;this.length+=i}return this._strip()},e.prototype.ishln=function(t){return n(this.negative===0),this.iushln(t)},e.prototype.iushrn=function(t,r,i){n(typeof t=="number"&&t>=0);var e;r?e=(r-r%26)/26:e=0;var s=t%26,o=Math.min((t-s)/26,this.length),a=67108863^67108863>>>s<<s,u=i;if(e-=o,e=Math.max(0,e),u){for(var h=0;h<o;h++)u.words[h]=this.words[h];u.length=o}if(o!==0)if(this.length>o)for(this.length-=o,h=0;h<this.length;h++)this.words[h]=this.words[h+o];else this.words[0]=0,this.length=1;var f=0;for(h=this.length-1;h>=0&&(f!==0||h>=e);h--){var c=this.words[h]|0;this.words[h]=f<<26-s|c>>>s,f=c&a}return u&&f!==0&&(u.words[u.length++]=f),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},e.prototype.ishrn=function(t,r,i){return n(this.negative===0),this.iushrn(t,r,i)},e.prototype.shln=function(t){return this.clone().ishln(t)},e.prototype.ushln=function(t){return this.clone().iushln(t)},e.prototype.shrn=function(t){return this.clone().ishrn(t)},e.prototype.ushrn=function(t){return this.clone().iushrn(t)},e.prototype.testn=function(t){n(typeof t=="number"&&t>=0);var r=t%26,i=(t-r)/26,e=1<<r;if(this.length<=i)return!1;var s=this.words[i];return!!(s&e)},e.prototype.imaskn=function(t){n(typeof t=="number"&&t>=0);var r=t%26,i=(t-r)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=i)return this;if(r!==0&&i++,this.length=Math.min(i,this.length),r!==0){var e=67108863^67108863>>>r<<r;this.words[this.length-1]&=e}return this._strip()},e.prototype.maskn=function(t){return this.clone().imaskn(t)},e.prototype.iaddn=function(t){return n(typeof t=="number"),n(t<67108864),t<0?this.isubn(-t):this.negative!==0?this.length===1&&(this.words[0]|0)<=t?(this.words[0]=t-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},e.prototype._iaddn=function(t){this.words[0]+=t;for(var r=0;r<this.length&&this.words[r]>=67108864;r++)this.words[r]-=67108864,r===this.length-1?this.words[r+1]=1:this.words[r+1]++;return this.length=Math.max(this.length,r+1),this},e.prototype.isubn=function(t){if(n(typeof t=="number"),n(t<67108864),t<0)return this.iaddn(-t);if(this.negative!==0)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var r=0;r<this.length&&this.words[r]<0;r++)this.words[r]+=67108864,this.words[r+1]-=1;return this._strip()},e.prototype.addn=function(t){return this.clone().iaddn(t)},e.prototype.subn=function(t){return this.clone().isubn(t)},e.prototype.iabs=function(){return this.negative=0,this},e.prototype.abs=function(){return this.clone().iabs()},e.prototype._ishlnsubmul=function(t,r,i){var e=t.length+i,s;this._expand(e);var o,a=0;for(s=0;s<t.length;s++){o=(this.words[s+i]|0)+a;var u=(t.words[s]|0)*r;o-=u&67108863,a=(o>>26)-(u/67108864|0),this.words[s+i]=o&67108863}for(;s<this.length-i;s++)o=(this.words[s+i]|0)+a,a=o>>26,this.words[s+i]=o&67108863;if(a===0)return this._strip();for(n(a===-1),a=0,s=0;s<this.length;s++)o=-(this.words[s]|0)+a,a=o>>26,this.words[s]=o&67108863;return this.negative=1,this._strip()},e.prototype._wordDiv=function(t,r){var n=this.length-t.length,i=this.clone(),s=t,o=s.words[s.length-1]|0,a=this._countBits(o);n=26-a,n!==0&&(s=s.ushln(n),i.iushln(n),o=s.words[s.length-1]|0);var u=i.length-s.length,h;if(r!=="mod"){h=new e(null),h.length=u+1,h.words=new Array(h.length);for(var f=0;f<h.length;f++)h.words[f]=0}var c=i.clone()._ishlnsubmul(s,1,u);c.negative===0&&(i=c,h&&(h.words[u]=1));for(var l=u-1;l>=0;l--){var d=(i.words[s.length+l]|0)*67108864+(i.words[s.length+l-1]|0);for(d=Math.min(d/o|0,67108863),i._ishlnsubmul(s,d,l);i.negative!==0;)d--,i.negative=0,i._ishlnsubmul(s,1,l),i.isZero()||(i.negative^=1);h&&(h.words[l]=d)}return h&&h._strip(),i._strip(),r!=="div"&&n!==0&&i.iushrn(n),{div:h||null,mod:i}},e.prototype.divmod=function(t,r,i){if(n(!t.isZero()),this.isZero())return{div:new e(0),mod:new e(0)};var s,o,a;return this.negative!==0&&t.negative===0?(a=this.neg().divmod(t,r),r!=="mod"&&(s=a.div.neg()),r!=="div"&&(o=a.mod.neg(),i&&o.negative!==0&&o.iadd(t)),{div:s,mod:o}):this.negative===0&&t.negative!==0?(a=this.divmod(t.neg(),r),r!=="mod"&&(s=a.div.neg()),{div:s,mod:a.mod}):this.negative&t.negative?(a=this.neg().divmod(t.neg(),r),r!=="div"&&(o=a.mod.neg(),i&&o.negative!==0&&o.isub(t)),{div:a.div,mod:o}):t.length>this.length||this.cmp(t)<0?{div:new e(0),mod:this}:t.length===1?r==="div"?{div:this.divn(t.words[0]),mod:null}:r==="mod"?{div:null,mod:new e(this.modrn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new e(this.modrn(t.words[0]))}:this._wordDiv(t,r)},e.prototype.div=function(t){return this.divmod(t,"div",!1).div},e.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},e.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},e.prototype.divRound=function(t){var r=this.divmod(t);if(r.mod.isZero())return r.div;var n=r.div.negative!==0?r.mod.isub(t):r.mod,i=t.ushrn(1),e=t.andln(1),s=n.cmp(i);return s<0||e===1&&s===0?r.div:r.div.negative!==0?r.div.isubn(1):r.div.iaddn(1)},e.prototype.modrn=function(t){var r=t<0;r&&(t=-t),n(t<=67108863);for(var i=(1<<26)%t,e=0,s=this.length-1;s>=0;s--)e=(i*e+(this.words[s]|0))%t;return r?-e:e},e.prototype.modn=function(t){return this.modrn(t)},e.prototype.idivn=function(t){var r=t<0;r&&(t=-t),n(t<=67108863);for(var i=0,e=this.length-1;e>=0;e--){var s=(this.words[e]|0)+i*67108864;this.words[e]=s/t|0,i=s%t}return this._strip(),r?this.ineg():this},e.prototype.divn=function(t){return this.clone().idivn(t)},e.prototype.egcd=function(t){n(t.negative===0),n(!t.isZero());var r=this,i=t.clone();r.negative!==0?r=r.umod(t):r=r.clone();for(var s=new e(1),o=new e(0),a=new e(0),u=new e(1),h=0;r.isEven()&&i.isEven();)r.iushrn(1),i.iushrn(1),++h;for(var f=i.clone(),c=r.clone();!r.isZero();){for(var l=0,d=1;!(r.words[0]&d)&&l<26;++l,d<<=1);if(l>0)for(r.iushrn(l);l-- >0;)(s.isOdd()||o.isOdd())&&(s.iadd(f),o.isub(c)),s.iushrn(1),o.iushrn(1);for(var v=0,w=1;!(i.words[0]&w)&&v<26;++v,w<<=1);if(v>0)for(i.iushrn(v);v-- >0;)(a.isOdd()||u.isOdd())&&(a.iadd(f),u.isub(c)),a.iushrn(1),u.iushrn(1);r.cmp(i)>=0?(r.isub(i),s.isub(a),o.isub(u)):(i.isub(r),a.isub(s),u.isub(o))}return{a,b:u,gcd:i.iushln(h)}},e.prototype._invmp=function(t){n(t.negative===0),n(!t.isZero());var r=this,i=t.clone();r.negative!==0?r=r.umod(t):r=r.clone();for(var s=new e(1),o=new e(0),a=i.clone();r.cmpn(1)>0&&i.cmpn(1)>0;){for(var u=0,h=1;!(r.words[0]&h)&&u<26;++u,h<<=1);if(u>0)for(r.iushrn(u);u-- >0;)s.isOdd()&&s.iadd(a),s.iushrn(1);for(var f=0,c=1;!(i.words[0]&c)&&f<26;++f,c<<=1);if(f>0)for(i.iushrn(f);f-- >0;)o.isOdd()&&o.iadd(a),o.iushrn(1);r.cmp(i)>=0?(r.isub(i),s.isub(o)):(i.isub(r),o.isub(s))}var l;return r.cmpn(1)===0?l=s:l=o,l.cmpn(0)<0&&l.iadd(t),l},e.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var r=this.clone(),n=t.clone();r.negative=0,n.negative=0;for(var i=0;r.isEven()&&n.isEven();i++)r.iushrn(1),n.iushrn(1);do{for(;r.isEven();)r.iushrn(1);for(;n.isEven();)n.iushrn(1);var e=r.cmp(n);if(e<0){var s=r;r=n,n=s}else if(e===0||n.cmpn(1)===0)break;r.isub(n)}while(!0);return n.iushln(i)},e.prototype.invm=function(t){return this.egcd(t).a.umod(t)},e.prototype.isEven=function(){return(this.words[0]&1)===0},e.prototype.isOdd=function(){return(this.words[0]&1)===1},e.prototype.andln=function(t){return this.words[0]&t},e.prototype.bincn=function(t){n(typeof t=="number");var r=t%26,i=(t-r)/26,e=1<<r;if(this.length<=i)return this._expand(i+1),this.words[i]|=e,this;for(var s=e,o=i;s!==0&&o<this.length;o++){var a=this.words[o]|0;a+=s,s=a>>>26,a&=67108863,this.words[o]=a}return s!==0&&(this.words[o]=s,this.length++),this},e.prototype.isZero=function(){return this.length===1&&this.words[0]===0},e.prototype.cmpn=function(t){var r=t<0;if(this.negative!==0&&!r)return-1;if(this.negative===0&&r)return 1;this._strip();var i;if(this.length>1)i=1;else{r&&(t=-t),n(t<=67108863,"Number is too big");var e=this.words[0]|0;i=e===t?0:e<t?-1:1}return this.negative!==0?-i|0:i},e.prototype.cmp=function(t){if(this.negative!==0&&t.negative===0)return-1;if(this.negative===0&&t.negative!==0)return 1;var r=this.ucmp(t);return this.negative!==0?-r|0:r},e.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var r=0,n=this.length-1;n>=0;n--){var i=this.words[n]|0,e=t.words[n]|0;if(i!==e){i<e?r=-1:i>e&&(r=1);break}}return r},e.prototype.gtn=function(t){return this.cmpn(t)===1},e.prototype.gt=function(t){return this.cmp(t)===1},e.prototype.gten=function(t){return this.cmpn(t)>=0},e.prototype.gte=function(t){return this.cmp(t)>=0},e.prototype.ltn=function(t){return this.cmpn(t)===-1},e.prototype.lt=function(t){return this.cmp(t)===-1},e.prototype.lten=function(t){return this.cmpn(t)<=0},e.prototype.lte=function(t){return this.cmp(t)<=0},e.prototype.eqn=function(t){return this.cmpn(t)===0},e.prototype.eq=function(t){return this.cmp(t)===0},e.red=function(t){return new I(t)},e.prototype.toRed=function(t){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),t.convertTo(this)._forceRed(t)},e.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},e.prototype._forceRed=function(t){return this.red=t,this},e.prototype.forceRed=function(t){return n(!this.red,"Already a number in reduction context"),this._forceRed(t)},e.prototype.redAdd=function(t){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},e.prototype.redIAdd=function(t){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},e.prototype.redSub=function(t){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},e.prototype.redISub=function(t){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},e.prototype.redShl=function(t){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},e.prototype.redMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},e.prototype.redIMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},e.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},e.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},e.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},e.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},e.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},e.prototype.redPow=function(t){return n(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var m={k256:null,p224:null,p192:null,p25519:null};function A(t,r){this.name=t,this.p=new e(r,16),this.n=this.p.bitLength(),this.k=new e(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}A.prototype._tmp=function(){var t=new e(null);return t.words=new Array(Math.ceil(this.n/13)),t},A.prototype.ireduce=function(t){var r=t,n;do{this.split(r,this.tmp),r=this.imulK(r),r=r.iadd(this.tmp),n=r.bitLength()}while(n>this.n);var i=n<this.n?-1:r.ucmp(this.p);return i===0?(r.words[0]=0,r.length=1):i>0?r.isub(this.p):r.strip!==void 0?r.strip():r._strip(),r},A.prototype.split=function(t,r){t.iushrn(this.n,0,r)},A.prototype.imulK=function(t){return t.imul(this.k)};function E(){A.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(E,A),E.prototype.split=function(t,r){for(var n=4194303,i=Math.min(t.length,9),e=0;e<i;e++)r.words[e]=t.words[e];if(r.length=i,t.length<=9){t.words[0]=0,t.length=1;return}var s=t.words[9];for(r.words[r.length++]=s&n,e=10;e<t.length;e++){var o=t.words[e]|0;t.words[e-10]=(o&n)<<4|s>>>22,s=o}s>>>=22,t.words[e-10]=s,s===0&&t.length>10?t.length-=10:t.length-=9},E.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var r=0,n=0;n<t.length;n++){var i=t.words[n]|0;r+=i*977,t.words[n]=r&67108863,r=i*64+(r/67108864|0)}return t.words[t.length-1]===0&&(t.length--,t.words[t.length-1]===0&&t.length--),t};function M(){A.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(M,A);function _(){A.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(_,A);function O(){A.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(O,A),O.prototype.imulK=function(t){for(var r=0,n=0;n<t.length;n++){var i=(t.words[n]|0)*19+r,e=i&67108863;i>>>=26,t.words[n]=e,r=i}return r!==0&&(t.words[t.length++]=r),t},e._prime=function(t){if(m[t])return m[t];var r;if(t==="k256")r=new E;else if(t==="p224")r=new M;else if(t==="p192")r=new _;else if(t==="p25519")r=new O;else throw new Error("Unknown prime "+t);return m[t]=r,r};function I(t){if(typeof t=="string"){var r=e._prime(t);this.m=r.p,this.prime=r}else n(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}I.prototype._verify1=function(t){n(t.negative===0,"red works only with positives"),n(t.red,"red works only with red numbers")},I.prototype._verify2=function(t,r){n((t.negative|r.negative)===0,"red works only with positives"),n(t.red&&t.red===r.red,"red works only with red numbers")},I.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):(h(t,t.umod(this.m)._forceRed(this)),t)},I.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},I.prototype.add=function(t,r){this._verify2(t,r);var n=t.add(r);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},I.prototype.iadd=function(t,r){this._verify2(t,r);var n=t.iadd(r);return n.cmp(this.m)>=0&&n.isub(this.m),n},I.prototype.sub=function(t,r){this._verify2(t,r);var n=t.sub(r);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},I.prototype.isub=function(t,r){this._verify2(t,r);var n=t.isub(r);return n.cmpn(0)<0&&n.iadd(this.m),n},I.prototype.shl=function(t,r){return this._verify1(t),this.imod(t.ushln(r))},I.prototype.imul=function(t,r){return this._verify2(t,r),this.imod(t.imul(r))},I.prototype.mul=function(t,r){return this._verify2(t,r),this.imod(t.mul(r))},I.prototype.isqr=function(t){return this.imul(t,t.clone())},I.prototype.sqr=function(t){return this.mul(t,t)},I.prototype.sqrt=function(t){if(t.isZero())return t.clone();var r=this.m.andln(3);if(n(r%2===1),r===3){var i=this.m.add(new e(1)).iushrn(2);return this.pow(t,i)}for(var s=this.m.subn(1),o=0;!s.isZero()&&s.andln(1)===0;)o++,s.iushrn(1);n(!s.isZero());var a=new e(1).toRed(this),u=a.redNeg(),h=this.m.subn(1).iushrn(1),f=this.m.bitLength();for(f=new e(2*f*f).toRed(this);this.pow(f,h).cmp(u)!==0;)f.redIAdd(u);for(var c=this.pow(f,s),l=this.pow(t,s.addn(1).iushrn(1)),d=this.pow(t,s),v=o;d.cmp(a)!==0;){for(var w=d,p=0;w.cmp(a)!==0;p++)w=w.redSqr();n(p<v);var y=this.pow(c,new e(1).iushln(v-p-1));l=l.redMul(y),c=y.redSqr(),d=d.redMul(c),v=p}return l},I.prototype.invm=function(t){var r=t._invmp(this.m);return r.negative!==0?(r.negative=0,this.imod(r).redNeg()):this.imod(r)},I.prototype.pow=function(t,r){if(r.isZero())return new e(1).toRed(this);if(r.cmpn(1)===0)return t.clone();var n=4,i=new Array(1<<n);i[0]=new e(1).toRed(this),i[1]=t;for(var s=2;s<i.length;s++)i[s]=this.mul(i[s-1],t);var o=i[0],a=0,u=0,h=r.bitLength()%26;for(h===0&&(h=26),s=r.length-1;s>=0;s--){for(var f=r.words[s],c=h-1;c>=0;c--){var l=f>>c&1;if(o!==i[0]&&(o=this.sqr(o)),l===0&&a===0){u=0;continue}a<<=1,a|=l,u++,!(u!==n&&(s!==0||c!==0))&&(o=this.mul(o,i[a]),u=0,a=0)}h=26}return o},I.prototype.convertTo=function(t){var r=t.umod(this.m);return r===t?r.clone():r},I.prototype.convertFrom=function(t){var r=t.clone();return r.red=null,r},e.mont=function(t){return new S(t)};function S(t){I.call(this,t),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new e(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(S,I),S.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},S.prototype.convertFrom=function(t){var r=this.imod(t.mul(this.rinv));return r.red=null,r},S.prototype.imul=function(t,r){if(t.isZero()||r.isZero())return t.words[0]=0,t.length=1,t;var n=t.imul(r),i=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),e=n.isub(i).iushrn(this.shift),s=e;return e.cmp(this.m)>=0?s=e.isub(this.m):e.cmpn(0)<0&&(s=e.iadd(this.m)),s._forceRed(this)},S.prototype.mul=function(t,r){if(t.isZero()||r.isZero())return new e(0)._forceRed(this);var n=t.mul(r),i=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),s=n.isub(i).iushrn(this.shift),o=s;return s.cmp(this.m)>=0?o=s.isub(this.m):s.cmpn(0)<0&&(o=s.iadd(this.m)),o._forceRed(this)},S.prototype.invm=function(t){var r=this.imod(t._invmp(this.m).mul(this.r2));return r._forceRed(this)}})(t,js)})(fo);var wo=fo.exports;const po="bignumber/5.7.0";var yo=wo.BN;const bo=new Gs(po),go={},mo=9007199254740991;function Ao(t){return t!=null&&(Mo.isBigNumber(t)||typeof t=="number"&&t%1===0||typeof t=="string"&&!!t.match(/^-?[0-9]+$/)||no(t)||typeof t=="bigint"||Xs(t))}let Eo=!1;class Mo{constructor(t,r){t!==go&&bo.throwError("cannot call constructor directly; use BigNumber.from",Gs.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=r,this._isBigNumber=!0,Object.freeze(this)}fromTwos(t){return Oo(Io(this).fromTwos(t))}toTwos(t){return Oo(Io(this).toTwos(t))}abs(){return this._hex[0]==="-"?Mo.from(this._hex.substring(1)):this}add(t){return Oo(Io(this).add(Io(t)))}sub(t){return Oo(Io(this).sub(Io(t)))}div(t){return Mo.from(t).isZero()&&So("division-by-zero","div"),Oo(Io(this).div(Io(t)))}mul(t){return Oo(Io(this).mul(Io(t)))}mod(t){const r=Io(t);return r.isNeg()&&So("division-by-zero","mod"),Oo(Io(this).umod(r))}pow(t){const r=Io(t);return r.isNeg()&&So("negative-power","pow"),Oo(Io(this).pow(r))}and(t){const r=Io(t);return(this.isNegative()||r.isNeg())&&So("unbound-bitwise-result","and"),Oo(Io(this).and(r))}or(t){const r=Io(t);return(this.isNegative()||r.isNeg())&&So("unbound-bitwise-result","or"),Oo(Io(this).or(r))}xor(t){const r=Io(t);return(this.isNegative()||r.isNeg())&&So("unbound-bitwise-result","xor"),Oo(Io(this).xor(r))}mask(t){return(this.isNegative()||t<0)&&So("negative-width","mask"),Oo(Io(this).maskn(t))}shl(t){return(this.isNegative()||t<0)&&So("negative-width","shl"),Oo(Io(this).shln(t))}shr(t){return(this.isNegative()||t<0)&&So("negative-width","shr"),Oo(Io(this).shrn(t))}eq(t){return Io(this).eq(Io(t))}lt(t){return Io(this).lt(Io(t))}lte(t){return Io(this).lte(Io(t))}gt(t){return Io(this).gt(Io(t))}gte(t){return Io(this).gte(Io(t))}isNegative(){return this._hex[0]==="-"}isZero(){return Io(this).isZero()}toNumber(){try{return Io(this).toNumber()}catch{So("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch{}return bo.throwError("this platform does not support BigInt",Gs.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(arguments[0]===10?Eo||(Eo=!0,bo.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):arguments[0]===16?bo.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",Gs.errors.UNEXPECTED_ARGUMENT,{}):bo.throwError("BigNumber.toString does not accept parameters",Gs.errors.UNEXPECTED_ARGUMENT,{})),Io(this).toString(10)}toHexString(){return this._hex}toJSON(t){return{type:"BigNumber",hex:this.toHexString()}}static from(t){if(t instanceof Mo)return t;if(typeof t=="string")return t.match(/^-?0x[0-9a-f]+$/i)?new Mo(go,_o(t)):t.match(/^-?[0-9]+$/)?new Mo(go,_o(new yo(t))):bo.throwArgumentError("invalid BigNumber string","value",t);if(typeof t=="number")return t%1&&So("underflow","BigNumber.from",t),(t>=mo||t<=-mo)&&So("overflow","BigNumber.from",t),Mo.from(String(t));const r=t;if(typeof r=="bigint")return Mo.from(r.toString());if(Xs(r))return Mo.from(eo(r));if(r)if(r.toHexString){const t=r.toHexString();if(typeof t=="string")return Mo.from(t)}else{let t=r._hex;if(t==null&&r.type==="BigNumber"&&(t=r.hex),typeof t=="string"&&(no(t)||t[0]==="-"&&no(t.substring(1))))return Mo.from(t)}return bo.throwArgumentError("invalid BigNumber value","value",t)}static isBigNumber(t){return!!(t&&t._isBigNumber)}}function _o(t){if(typeof t!="string")return _o(t.toString(16));if(t[0]==="-")return t=t.substring(1),t[0]==="-"&&bo.throwArgumentError("invalid hex","value",t),t=_o(t),t==="0x00"?t:"-"+t;if(t.substring(0,2)!=="0x"&&(t="0x"+t),t==="0x")return"0x00";for(t.length%2&&(t="0x0"+t.substring(2));t.length>4&&t.substring(0,4)==="0x00";)t="0x"+t.substring(4);return t}function Oo(t){return Mo.from(_o(t))}function Io(t){const r=Mo.from(t).toHexString();return r[0]==="-"?new yo("-"+r.substring(3),16):new yo(r.substring(2),16)}function So(t,r,n){const i={fault:t,operation:r};return n!=null&&(i.value=n),bo.throwError(t,Gs.errors.NUMERIC_FAULT,i)}function No(t){return new yo(t,36).toString(16)}const Co=new Gs(po),jo={},xo=Mo.from(0),Po=Mo.from(-1);function To(t,r,n,i){const e={fault:r,operation:n};return i!==void 0&&(e.value=i),Co.throwError(t,Gs.errors.NUMERIC_FAULT,e)}let Ro="0";for(;Ro.length<256;)Ro+=Ro;function Do(t){if(typeof t!="number")try{t=Mo.from(t).toNumber()}catch{}return typeof t=="number"&&t>=0&&t<=256&&!(t%1)?"1"+Ro.substring(0,t):Co.throwArgumentError("invalid decimal size","decimals",t)}function Uo(t,r){r==null&&(r=0);const n=Do(r);t=Mo.from(t);const i=t.lt(xo);i&&(t=t.mul(Po));let e=t.mod(n).toString();for(;e.length<n.length-1;)e="0"+e;e=e.match(/^([0-9]*[1-9]|0)(0*)/)[1];const s=t.div(n).toString();return n.length===1?t=s:t=s+"."+e,i&&(t="-"+t),t}function Bo(t,r){r==null&&(r=0);const n=Do(r);(typeof t!="string"||!t.match(/^-?[0-9.]+$/))&&Co.throwArgumentError("invalid decimal value","value",t);const i=t.substring(0,1)==="-";i&&(t=t.substring(1)),t==="."&&Co.throwArgumentError("missing value","value",t);const e=t.split(".");e.length>2&&Co.throwArgumentError("too many decimal points","value",t);let s=e[0],o=e[1];for(s||(s="0"),o||(o="0");o[o.length-1]==="0";)o=o.substring(0,o.length-1);for(o.length>n.length-1&&To("fractional component exceeds decimals","underflow","parseFixed"),o===""&&(o="0");o.length<n.length-1;)o+="0";const a=Mo.from(s),u=Mo.from(o);let h=a.mul(n).add(u);return i&&(h=h.mul(Po)),h}class ko{constructor(t,r,n,i){t!==jo&&Co.throwError("cannot use FixedFormat constructor; use FixedFormat.from",Gs.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.signed=r,this.width=n,this.decimals=i,this.name=(r?"":"u")+"fixed"+String(n)+"x"+String(i),this._multiplier=Do(i),Object.freeze(this)}static from(t){if(t instanceof ko)return t;typeof t=="number"&&(t=`fixed128x${t}`);let r=!0,n=128,i=18;if(typeof t=="string"){if(t!=="fixed")if(t==="ufixed")r=!1;else{const e=t.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);e||Co.throwArgumentError("invalid fixed format","format",t),r=e[1]!=="u",n=parseInt(e[2]),i=parseInt(e[3])}}else if(t){const e=(r,n,i)=>t[r]==null?i:(typeof t[r]!==n&&Co.throwArgumentError("invalid fixed format ("+r+" not "+n+")","format."+r,t[r]),t[r]);r=e("signed","boolean",r),n=e("width","number",n),i=e("decimals","number",i)}return n%8&&Co.throwArgumentError("invalid fixed format width (not byte aligned)","format.width",n),i>80&&Co.throwArgumentError("invalid fixed format (decimals too large)","format.decimals",i),new ko(jo,r,n,i)}}class $o{constructor(t,r,n,i){t!==jo&&Co.throwError("cannot use FixedNumber constructor; use FixedNumber.from",Gs.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.format=i,this._hex=r,this._value=n,this._isFixedNumber=!0,Object.freeze(this)}_checkFormat(t){this.format.name!==t.format.name&&Co.throwArgumentError("incompatible format; use fixedNumber.toFormat","other",t)}addUnsafe(t){this._checkFormat(t);const r=Bo(this._value,this.format.decimals),n=Bo(t._value,t.format.decimals);return $o.fromValue(r.add(n),this.format.decimals,this.format)}subUnsafe(t){this._checkFormat(t);const r=Bo(this._value,this.format.decimals),n=Bo(t._value,t.format.decimals);return $o.fromValue(r.sub(n),this.format.decimals,this.format)}mulUnsafe(t){this._checkFormat(t);const r=Bo(this._value,this.format.decimals),n=Bo(t._value,t.format.decimals);return $o.fromValue(r.mul(n).div(this.format._multiplier),this.format.decimals,this.format)}divUnsafe(t){this._checkFormat(t);const r=Bo(this._value,this.format.decimals),n=Bo(t._value,t.format.decimals);return $o.fromValue(r.mul(this.format._multiplier).div(n),this.format.decimals,this.format)}floor(){const t=this.toString().split(".");t.length===1&&t.push("0");let r=$o.from(t[0],this.format);const n=!t[1].match(/^(0*)$/);return this.isNegative()&&n&&(r=r.subUnsafe(Fo.toFormat(r.format))),r}ceiling(){const t=this.toString().split(".");t.length===1&&t.push("0");let r=$o.from(t[0],this.format);const n=!t[1].match(/^(0*)$/);return!this.isNegative()&&n&&(r=r.addUnsafe(Fo.toFormat(r.format))),r}round(t){t==null&&(t=0);const r=this.toString().split(".");if(r.length===1&&r.push("0"),(t<0||t>80||t%1)&&Co.throwArgumentError("invalid decimal count","decimals",t),r[1].length<=t)return this;const n=$o.from("1"+Ro.substring(0,t),this.format),i=qo.toFormat(this.format);return this.mulUnsafe(n).addUnsafe(i).floor().divUnsafe(n)}isZero(){return this._value==="0.0"||this._value==="0"}isNegative(){return this._value[0]==="-"}toString(){return this._value}toHexString(t){if(t==null)return this._hex;t%8&&Co.throwArgumentError("invalid byte width","width",t);const r=Mo.from(this._hex).fromTwos(this.format.width).toTwos(t).toHexString();return ao(r,t/8)}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(t){return $o.fromString(this._value,t)}static fromValue(t,r,n){return n==null&&r!=null&&!Ao(r)&&(n=r,r=null),r==null&&(r=0),n==null&&(n="fixed"),$o.fromString(Uo(t,r),ko.from(n))}static fromString(t,r){r==null&&(r="fixed");const n=ko.from(r),i=Bo(t,n.decimals);!n.signed&&i.lt(xo)&&To("unsigned value cannot be negative","overflow","value",t);let e=null;n.signed?e=i.toTwos(n.width).toHexString():(e=i.toHexString(),e=ao(e,n.width/8));const s=Uo(i,n.decimals);return new $o(jo,e,s,n)}static fromBytes(t,r){r==null&&(r="fixed");const n=ko.from(r);if(Zs(t).length>n.width/8)throw new Error("overflow");let i=Mo.from(t);n.signed&&(i=i.fromTwos(n.width));const e=i.toTwos((n.signed?0:1)+n.width).toHexString(),s=Uo(i,n.decimals);return new $o(jo,e,s,n)}static from(t,r){if(typeof t=="string")return $o.fromString(t,r);if(Xs(t))return $o.fromBytes(t,r);try{return $o.fromValue(t,0,r)}catch(t){if(t.code!==Gs.errors.INVALID_ARGUMENT)throw t}return Co.throwArgumentError("invalid FixedNumber value","value",t)}static isFixedNumber(t){return!!(t&&t._isFixedNumber)}}const Fo=$o.from(1),qo=$o.from("0.5"),Lo="strings/5.7.0",Ko=new Gs(Lo);var Ho;(function(t){t.current="",t.NFC="NFC",t.NFD="NFD",t.NFKC="NFKC",t.NFKD="NFKD"})(Ho||(Ho={}));var Go;(function(t){t.UNEXPECTED_CONTINUE="unexpected continuation byte",t.BAD_PREFIX="bad codepoint prefix",t.OVERRUN="string overrun",t.MISSING_CONTINUE="missing continuation byte",t.OUT_OF_RANGE="out of UTF-8 range",t.UTF16_SURROGATE="UTF-16 surrogate",t.OVERLONG="overlong representation"})(Go||(Go={}));function Qo(t,r,n,i,e){return Ko.throwArgumentError(`invalid codepoint at offset ${r}; ${t}`,"bytes",n)}function Jo(t,r,n,i,e){if(t===Go.BAD_PREFIX||t===Go.UNEXPECTED_CONTINUE){let t=0;for(let i=r+1;i<n.length&&n[i]>>6===2;i++)t++;return t}return t===Go.OVERRUN?n.length-r-1:0}function Vo(t,r,n,i,e){return t===Go.OVERLONG?(i.push(e),0):(i.push(65533),Jo(t,r,n))}Object.freeze({error:Qo,ignore:Jo,replace:Vo});function zo(t,r=Ho.current){r!=Ho.current&&(Ko.checkNormalize(),t=t.normalize(r));let n=[];for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);if(i<128)n.push(i);else if(i<2048)n.push(i>>6|192),n.push(i&63|128);else if((i&64512)==55296){r++;const e=t.charCodeAt(r);if(r>=t.length||(e&64512)!==56320)throw new Error("invalid utf-8 string");const s=65536+((i&1023)<<10)+(e&1023);n.push(s>>18|240),n.push(s>>12&63|128),n.push(s>>6&63|128),n.push(s&63|128)}else n.push(i>>12|224),n.push(i>>6&63|128),n.push(i&63|128)}return Zs(n)}function Yo(t){if(t.length%4!==0)throw new Error("bad data");let r=[];for(let n=0;n<t.length;n+=4)r.push(parseInt(t.substring(n,n+4),16));return r}function Wo(t,r){r||(r=function(t){return[parseInt(t,16)]});let n=0,i={};return t.split(",").forEach((t=>{let e=t.split(":");n+=parseInt(e[0],16),i[n]=r(e[1])})),i}function Xo(t){let r=0;return t.split(",").map((t=>{let n=t.split("-");n.length===1?n[1]="0":n[1]===""&&(n[1]="1");let i=r+parseInt(n[0],16);return r=parseInt(n[1],16),{l:i,h:r}}))}Xo("221,13-1b,5f-,40-10,51-f,11-3,3-3,2-2,2-4,8,2,15,2d,28-8,88,48,27-,3-5,11-20,27-,8,28,3-5,12,18,b-a,1c-4,6-16,2-d,2-2,2,1b-4,17-9,8f-,10,f,1f-2,1c-34,33-14e,4,36-,13-,6-2,1a-f,4,9-,3-,17,8,2-2,5-,2,8-,3-,4-8,2-3,3,6-,16-6,2-,7-3,3-,17,8,3,3,3-,2,6-3,3-,4-a,5,2-6,10-b,4,8,2,4,17,8,3,6-,b,4,4-,2-e,2-4,b-10,4,9-,3-,17,8,3-,5-,9-2,3-,4-7,3-3,3,4-3,c-10,3,7-2,4,5-2,3,2,3-2,3-2,4-2,9,4-3,6-2,4,5-8,2-e,d-d,4,9,4,18,b,6-3,8,4,5-6,3-8,3-3,b-11,3,9,4,18,b,6-3,8,4,5-6,3-6,2,3-3,b-11,3,9,4,18,11-3,7-,4,5-8,2-7,3-3,b-11,3,13-2,19,a,2-,8-2,2-3,7,2,9-11,4-b,3b-3,1e-24,3,2-,3,2-,2-5,5,8,4,2,2-,3,e,4-,6,2,7-,b-,3-21,49,23-5,1c-3,9,25,10-,2-2f,23,6,3,8-2,5-5,1b-45,27-9,2a-,2-3,5b-4,45-4,53-5,8,40,2,5-,8,2,5-,28,2,5-,20,2,5-,8,2,5-,8,8,18,20,2,5-,8,28,14-5,1d-22,56-b,277-8,1e-2,52-e,e,8-a,18-8,15-b,e,4,3-b,5e-2,b-15,10,b-5,59-7,2b-555,9d-3,5b-5,17-,7-,27-,7-,9,2,2,2,20-,36,10,f-,7,14-,4,a,54-3,2-6,6-5,9-,1c-10,13-1d,1c-14,3c-,10-6,32-b,240-30,28-18,c-14,a0,115-,3,66-,b-76,5,5-,1d,24,2,5-2,2,8-,35-2,19,f-10,1d-3,311-37f,1b,5a-b,d7-19,d-3,41,57-,68-4,29-3,5f,29-37,2e-2,25-c,2c-2,4e-3,30,78-3,64-,20,19b7-49,51a7-59,48e-2,38-738,2ba5-5b,222f-,3c-94,8-b,6-4,1b,6,2,3,3,6d-20,16e-f,41-,37-7,2e-2,11-f,5-b,18-,b,14,5-3,6,88-,2,bf-2,7-,7-,7-,4-2,8,8-9,8-2ff,20,5-b,1c-b4,27-,27-cbb1,f7-9,28-2,b5-221,56,48,3-,2-,3-,5,d,2,5,3,42,5-,9,8,1d,5,6,2-2,8,153-3,123-3,33-27fd,a6da-5128,21f-5df,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3,2-1d,61-ff7d"),"ad,34f,1806,180b,180c,180d,200b,200c,200d,2060,feff".split(",").map((t=>parseInt(t,16))),Wo("b5:3bc,c3:ff,7:73,2:253,5:254,3:256,1:257,5:259,1:25b,3:260,1:263,2:269,1:268,5:26f,1:272,2:275,7:280,3:283,5:288,3:28a,1:28b,5:292,3f:195,1:1bf,29:19e,125:3b9,8b:3b2,1:3b8,1:3c5,3:3c6,1:3c0,1a:3ba,1:3c1,1:3c3,2:3b8,1:3b5,1bc9:3b9,1c:1f76,1:1f77,f:1f7a,1:1f7b,d:1f78,1:1f79,1:1f7c,1:1f7d,107:63,5:25b,4:68,1:68,1:68,3:69,1:69,1:6c,3:6e,4:70,1:71,1:72,1:72,1:72,7:7a,2:3c9,2:7a,2:6b,1:e5,1:62,1:63,3:65,1:66,2:6d,b:3b3,1:3c0,6:64,1b574:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3"),Wo("179:1,2:1,2:1,5:1,2:1,a:4f,a:1,8:1,2:1,2:1,3:1,5:1,3:1,4:1,2:1,3:1,4:1,8:2,1:1,2:2,1:1,2:2,27:2,195:26,2:25,1:25,1:25,2:40,2:3f,1:3f,33:1,11:-6,1:-9,1ac7:-3a,6d:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,b:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,c:-8,2:-8,2:-8,2:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,49:-8,1:-8,1:-4a,1:-4a,d:-56,1:-56,1:-56,1:-56,d:-8,1:-8,f:-8,1:-8,3:-7"),Wo("df:00730073,51:00690307,19:02BC006E,a7:006A030C,18a:002003B9,16:03B903080301,20:03C503080301,1d7:05650582,190f:00680331,1:00740308,1:0077030A,1:0079030A,1:006102BE,b6:03C50313,2:03C503130300,2:03C503130301,2:03C503130342,2a:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,3:1F7003B9,1:03B103B9,1:03AC03B9,2:03B10342,1:03B1034203B9,5:03B103B9,6:1F7403B9,1:03B703B9,1:03AE03B9,2:03B70342,1:03B7034203B9,5:03B703B9,6:03B903080300,1:03B903080301,3:03B90342,1:03B903080342,b:03C503080300,1:03C503080301,1:03C10313,2:03C50342,1:03C503080342,b:1F7C03B9,1:03C903B9,1:03CE03B9,2:03C90342,1:03C9034203B9,5:03C903B9,ac:00720073,5b:00B00063,6:00B00066,d:006E006F,a:0073006D,1:00740065006C,1:0074006D,124f:006800700061,2:00610075,2:006F0076,b:00700061,1:006E0061,1:03BC0061,1:006D0061,1:006B0061,1:006B0062,1:006D0062,1:00670062,3:00700066,1:006E0066,1:03BC0066,4:0068007A,1:006B0068007A,1:006D0068007A,1:00670068007A,1:00740068007A,15:00700061,1:006B00700061,1:006D00700061,1:006700700061,8:00700076,1:006E0076,1:03BC0076,1:006D0076,1:006B0076,1:006D0076,1:00700077,1:006E0077,1:03BC0077,1:006D0077,1:006B0077,1:006D0077,1:006B03C9,1:006D03C9,2:00620071,3:00632215006B0067,1:0063006F002E,1:00640062,1:00670079,2:00680070,2:006B006B,1:006B006D,9:00700068,2:00700070006D,1:00700072,2:00730076,1:00770062,c723:00660066,1:00660069,1:0066006C,1:006600660069,1:00660066006C,1:00730074,1:00730074,d:05740576,1:05740565,1:0574056B,1:057E0576,1:0574056D",Yo),Xo("80-20,2a0-,39c,32,f71,18e,7f2-f,19-7,30-4,7-5,f81-b,5,a800-20ff,4d1-1f,110,fa-6,d174-7,2e84-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,2,1f-5f,ff7f-20001");const Zo="hash/5.7.0";function ta(t){t=atob(t);const r=[];for(let n=0;n<t.length;n++)r.push(t.charCodeAt(n));return Zs(r)}function ra(t,r){r==null&&(r=1);const n=[],i=n.forEach,e=function(t,r){i.call(t,(function(t){r>0&&Array.isArray(t)?e(t,r-1):n.push(t)}))};return e(t,r),n}function na(t){const r={};for(let n=0;n<t.length;n++){const i=t[n];r[i[0]]=i[1]}return r}function ia(t){let r=0;function n(){return t[r++]<<8|t[r++]}let i=n(),e=1,s=[0,1];for(let t=1;t<i;t++)s.push(e+=n());let o=n(),a=r;r+=o;let u=0,h=0;function f(){return u==0&&(h=h<<8|t[r++],u=8),h>>--u&1}const c=31,l=Math.pow(2,c),d=l>>>1,v=d>>1,w=l-1;let p=0;for(let t=0;t<c;t++)p=p<<1|f();let y=[],b=0,g=l;for(;;){let t=Math.floor(((p-b+1)*e-1)/g),r=0,n=i;for(;n-r>1;){let i=r+n>>>1;t<s[i]?n=i:r=i}if(r==0)break;y.push(r);let o=b+Math.floor(g*s[r]/e),a=b+Math.floor(g*s[r+1]/e)-1;for(;!((o^a)&d);)p=p<<1&w|f(),o=o<<1&w,a=a<<1&w|1;for(;o&~a&v;)p=p&d|p<<1&w>>>1|f(),o=o<<1^d,a=(a^d)<<1|d|1;b=o,g=1+a-o}let m=i-4;return y.map((r=>{switch(r-m){case 3:return m+65792+(t[a++]<<16|t[a++]<<8|t[a++]);case 2:return m+256+(t[a++]<<8|t[a++]);case 1:return m+t[a++];default:return r-1}}))}function ea(t){let r=0;return()=>t[r++]}function sa(t){return ea(ia(t))}function oa(t){return t&1?~t>>1:t>>1}function aa(t,r){let n=Array(t);for(let i=0;i<t;i++)n[i]=1+r();return n}function ua(t,r){let n=Array(t);for(let i=0,e=-1;i<t;i++)n[i]=e+=1+r();return n}function ha(t,r){let n=Array(t);for(let i=0,e=0;i<t;i++)n[i]=e+=oa(r());return n}function fa(t,r){let n=ua(t(),t),i=t(),e=ua(i,t),s=aa(i,t);for(let t=0;t<i;t++)for(let r=0;r<s[t];r++)n.push(e[t]+r);return r?n.map((t=>r[t])):n}function ca(t){let r=[];for(;;){let n=t();if(n==0)break;r.push(va(n,t))}for(;;){let n=t()-1;if(n<0)break;r.push(wa(n,t))}return na(ra(r))}function la(t){let r=[];for(;;){let n=t();if(n==0)break;r.push(n)}return r}function da(t,r,n){let i=Array(t).fill(void 0).map((()=>[]));for(let e=0;e<r;e++)ha(t,n).forEach(((t,r)=>i[r].push(t)));return i}function va(t,r){let n=1+r(),i=r(),e=la(r),s=da(e.length,1+t,r);return ra(s.map(((t,r)=>{const s=t[0],o=t.slice(1);return Array(e[r]).fill(void 0).map(((t,r)=>{let e=r*i;return[s+r*n,o.map((t=>t+e))]}))})))}function wa(t,r){let n=1+r();return da(n,1+t,r).map((t=>[t[0],t.slice(1)]))}function pa(t){let r=fa(t).sort(((t,r)=>t-r));return n();function n(){let i=[];for(;;){let e=fa(t,r);if(e.length==0)break;i.push({set:new Set(e),node:n()})}i.sort(((t,r)=>r.set.size-t.set.size));let e=t(),s=e%3;e=e/3|0;let o=!!(e&1);e>>=1;let a=e==1,u=e==2;return{branches:i,valid:s,fe0f:o,save:a,check:u}}}function ya(){return sa(ta("AEQF2AO2DEsA2wIrAGsBRABxAN8AZwCcAEwAqgA0AGwAUgByADcATAAVAFYAIQAyACEAKAAYAFgAGwAjABQAMAAmADIAFAAfABQAKwATACoADgAbAA8AHQAYABoAGQAxADgALAAoADwAEwA9ABMAGgARAA4ADwAWABMAFgAIAA8AHgQXBYMA5BHJAS8JtAYoAe4AExozi0UAH21tAaMnBT8CrnIyhrMDhRgDygIBUAEHcoFHUPe8AXBjAewCjgDQR8IICIcEcQLwATXCDgzvHwBmBoHNAqsBdBcUAykgDhAMShskMgo8AY8jqAQfAUAfHw8BDw87MioGlCIPBwZCa4ELatMAAMspJVgsDl8AIhckSg8XAHdvTwBcIQEiDT4OPhUqbyECAEoAS34Aej8Ybx83JgT/Xw8gHxZ/7w8RICxPHA9vBw+Pfw8PHwAPFv+fAsAvCc8vEr8ivwD/EQ8Bol8OEBa/A78hrwAPCU8vESNvvwWfHwNfAVoDHr+ZAAED34YaAdJPAK7PLwSEgDLHAGo1Pz8Pvx9fUwMrpb8O/58VTzAPIBoXIyQJNF8hpwIVAT8YGAUADDNBaX3RAMomJCg9EhUeA29MABsZBTMNJipjOhc19gcIDR8bBwQHEggCWi6DIgLuAQYA+BAFCha3A5XiAEsqM7UFFgFLhAMjFTMYE1Klnw74nRVBG/ASCm0BYRN/BrsU3VoWy+S0vV8LQx+vN8gF2AC2AK5EAWwApgYDKmAAroQ0NDQ0AT+OCg7wAAIHRAbpNgVcBV0APTA5BfbPFgMLzcYL/QqqA82eBALKCjQCjqYCht0/k2+OAsXQAoP3ASTKDgDw6ACKAUYCMpIKJpRaAE4A5womABzZvs0REEKiACIQAd5QdAECAj4Ywg/wGqY2AVgAYADYvAoCGAEubA0gvAY2ALAAbpbvqpyEAGAEpgQAJgAG7gAgAEACmghUFwCqAMpAINQIwC4DthRAAPcycKgApoIdABwBfCisABoATwBqASIAvhnSBP8aH/ECeAKXAq40NjgDBTwFYQU6AXs3oABgAD4XNgmcCY1eCl5tIFZeUqGgyoNHABgAEQAaABNwWQAmABMATPMa3T34ADldyprmM1M2XociUQgLzvwAXT3xABgAEQAaABNwIGFAnADD8AAgAD4BBJWzaCcIAIEBFMAWwKoAAdq9BWAF5wLQpALEtQAKUSGkahR4GnJM+gsAwCgeFAiUAECQ0BQuL8AAIAAAADKeIheclvFqQAAETr4iAMxIARMgAMIoHhQIAn0E0pDQFC4HhznoAAAAIAI2C0/4lvFqQAAETgBJJwYCAy4ABgYAFAA8MBKYEH4eRhTkAjYeFcgACAYAeABsOqyQ5gRwDayqugEgaIIAtgoACgDmEABmBAWGme5OBJJA2m4cDeoAmITWAXwrMgOgAGwBCh6CBXYF1Tzg1wKAAFdiuABRAFwAXQBsAG8AdgBrAHYAbwCEAHEwfxQBVE5TEQADVFhTBwBDANILAqcCzgLTApQCrQL6vAAMAL8APLhNBKkE6glGKTAU4Dr4N2EYEwBCkABKk8rHAbYBmwIoAiU4Ajf/Aq4CowCAANIChzgaNBsCsTgeODcFXrgClQKdAqQBiQGYAqsCsjTsNHsfNPA0ixsAWTWiOAMFPDQSNCk2BDZHNow2TTZUNhk28Jk9VzI3QkEoAoICoQKwAqcAQAAxBV4FXbS9BW47YkIXP1ciUqs05DS/FwABUwJW11e6nHuYZmSh/RAYA8oMKvZ8KASoUAJYWAJ6ILAsAZSoqjpgA0ocBIhmDgDWAAawRDQoAAcuAj5iAHABZiR2AIgiHgCaAU68ACxuHAG0ygM8MiZIAlgBdF4GagJqAPZOHAMuBgoATkYAsABiAHgAMLoGDPj0HpKEBAAOJgAuALggTAHWAeAMEDbd20Uege0ADwAWADkAQgA9OHd+2MUQZBBhBgNNDkxxPxUQArEPqwvqERoM1irQ090ANK4H8ANYB/ADWANYB/AH8ANYB/ADWANYA1gDWBwP8B/YxRBkD00EcgWTBZAE2wiIJk4RhgctCNdUEnQjHEwDSgEBIypJITuYMxAlR0wRTQgIATZHbKx9PQNMMbBU+pCnA9AyVDlxBgMedhKlAC8PeCE1uk6DekxxpQpQT7NX9wBFBgASqwAS5gBJDSgAUCwGPQBI4zTYABNGAE2bAE3KAExdGABKaAbgAFBXAFCOAFBJABI2SWdObALDOq0//QomCZhvwHdTBkIQHCemEPgMNAG2ATwN7kvZBPIGPATKH34ZGg/OlZ0Ipi3eDO4m5C6igFsj9iqEBe5L9TzeC05RaQ9aC2YJ5DpkgU8DIgEOIowK3g06CG4Q9ArKbA3mEUYHOgPWSZsApgcCCxIdNhW2JhFirQsKOXgG/Br3C5AmsBMqev0F1BoiBk4BKhsAANAu6IWxWjJcHU9gBgQLJiPIFKlQIQ0mQLh4SRocBxYlqgKSQ3FKiFE3HpQh9zw+DWcuFFF9B/Y8BhlQC4I8n0asRQ8R0z6OPUkiSkwtBDaALDAnjAnQD4YMunxzAVoJIgmyDHITMhEYN8YIOgcaLpclJxYIIkaWYJsE+KAD9BPSAwwFQAlCBxQDthwuEy8VKgUOgSXYAvQ21i60ApBWgQEYBcwPJh/gEFFH4Q7qCJwCZgOEJewALhUiABginAhEZABgj9lTBi7MCMhqbSN1A2gU6GIRdAeSDlgHqBw0FcAc4nDJXgyGCSiksAlcAXYJmgFgBOQICjVcjKEgQmdUi1kYnCBiQUBd/QIyDGYVoES+h3kCjA9sEhwBNgF0BzoNAgJ4Ee4RbBCWCOyGBTW2M/k6JgRQIYQgEgooA1BszwsoJvoM+WoBpBJjAw00PnfvZ6xgtyUX/gcaMsZBYSHyC5NPzgydGsIYQ1QvGeUHwAP0GvQn60FYBgADpAQUOk4z7wS+C2oIjAlAAEoOpBgH2BhrCnKM0QEyjAG4mgNYkoQCcJAGOAcMAGgMiAV65gAeAqgIpAAGANADWAA6Aq4HngAaAIZCAT4DKDABIuYCkAOUCDLMAZYwAfQqBBzEDBYA+DhuSwLDsgKAa2ajBd5ZAo8CSjYBTiYEBk9IUgOwcuIA3ABMBhTgSAEWrEvMG+REAeBwLADIAPwABjYHBkIBzgH0bgC4AWALMgmjtLYBTuoqAIQAFmwB2AKKAN4ANgCA8gFUAE4FWvoF1AJQSgESMhksWGIBvAMgATQBDgB6BsyOpsoIIARuB9QCEBwV4gLvLwe2AgMi4BPOQsYCvd9WADIXUu5eZwqoCqdeaAC0YTQHMnM9UQAPH6k+yAdy/BZIiQImSwBQ5gBQQzSaNTFWSTYBpwGqKQK38AFtqwBI/wK37gK3rQK3sAK6280C0gK33AK3zxAAUEIAUD9SklKDArekArw5AEQAzAHCO147WTteO1k7XjtZO147WTteO1kDmChYI03AVU0oJqkKbV9GYewMpw3VRMk6ShPcYFJgMxPJLbgUwhXPJVcZPhq9JwYl5VUKDwUt1GYxCC00dhe9AEApaYNCY4ceMQpMHOhTklT5LRwAskujM7ANrRsWREEFSHXuYisWDwojAmSCAmJDXE6wXDchAqH4AmiZAmYKAp+FOBwMAmY8AmYnBG8EgAN/FAN+kzkHOXgYOYM6JCQCbB4CMjc4CwJtyAJtr/CLADRoRiwBaADfAOIASwYHmQyOAP8MwwAOtgJ3MAJ2o0ACeUxEAni7Hl3cRa9G9AJ8QAJ6yQJ9CgJ88UgBSH5kJQAsFklZSlwWGErNAtECAtDNSygDiFADh+dExpEzAvKiXQQDA69Lz0wuJgTQTU1NsAKLQAKK2cIcCB5EaAa4Ao44Ao5dQZiCAo7aAo5deVG1UzYLUtVUhgKT/AKTDQDqAB1VH1WwVdEHLBwplocy4nhnRTw6ApegAu+zWCKpAFomApaQApZ9nQCqWa1aCoJOADwClrYClk9cRVzSApnMApllXMtdCBoCnJw5wzqeApwXAp+cAp65iwAeEDIrEAKd8gKekwC2PmE1YfACntQCoG8BqgKeoCACnk+mY8lkKCYsAiewAiZ/AqD8AqBN2AKmMAKlzwKoAAB+AqfzaH1osgAESmodatICrOQCrK8CrWgCrQMCVx4CVd0CseLYAx9PbJgCsr4OArLpGGzhbWRtSWADJc4Ctl08QG6RAylGArhfArlIFgK5K3hwN3DiAr0aAy2zAzISAr6JcgMDM3ICvhtzI3NQAsPMAsMFc4N0TDZGdOEDPKgDPJsDPcACxX0CxkgCxhGKAshqUgLIRQLJUALJLwJkngLd03h6YniveSZL0QMYpGcDAmH1GfSVJXsMXpNevBICz2wCz20wTFTT9BSgAMeuAs90ASrrA04TfkwGAtwoAtuLAtJQA1JdA1NgAQIDVY2AikABzBfuYUZ2AILPg44C2sgC2d+EEYRKpz0DhqYAMANkD4ZyWvoAVgLfZgLeuXR4AuIw7RUB8zEoAfScAfLTiALr9ALpcXoAAur6AurlAPpIAboC7ooC652Wq5cEAu5AA4XhmHpw4XGiAvMEAGoDjheZlAL3FAORbwOSiAL3mQL52gL4Z5odmqy8OJsfA52EAv77ARwAOp8dn7QDBY4DpmsDptoA0sYDBmuhiaIGCgMMSgFgASACtgNGAJwEgLpoBgC8BGzAEowcggCEDC6kdjoAJAM0C5IKRoABZCgiAIzw3AYBLACkfng9ogigkgNmWAN6AEQCvrkEVqTGAwCsBRbAA+4iQkMCHR072jI2PTbUNsk2RjY5NvA23TZKNiU3EDcZN5I+RTxDRTBCJkK5VBYKFhZfwQCWygU3AJBRHpu+OytgNxa61A40GMsYjsn7BVwFXQVcBV0FaAVdBVwFXQVcBV0FXAVdBVwFXUsaCNyKAK4AAQUHBwKU7oICoW1e7jAEzgPxA+YDwgCkBFDAwADABKzAAOxFLhitA1UFTDeyPkM+bj51QkRCuwTQWWQ8X+0AWBYzsACNA8xwzAGm7EZ/QisoCTAbLDs6fnLfb8H2GccsbgFw13M1HAVkBW/Jxsm9CNRO8E8FDD0FBQw9FkcClOYCoMFegpDfADgcMiA2AJQACB8AsigKAIzIEAJKeBIApY5yPZQIAKQiHb4fvj5BKSRPQrZCOz0oXyxgOywfKAnGbgMClQaCAkILXgdeCD9IIGUgQj5fPoY+dT52Ao5CM0dAX9BTVG9SDzFwWTQAbxBzJF/lOEIQQglCCkKJIAls5AcClQICoKPMODEFxhi6KSAbiyfIRrMjtCgdWCAkPlFBIitCsEJRzAbMAV/OEyQzDg0OAQQEJ36i328/Mk9AybDJsQlq3tDRApUKAkFzXf1d/j9uALYP6hCoFgCTGD8kPsFKQiobrm0+zj0KSD8kPnVCRBwMDyJRTHFgMTJa5rwXQiQ2YfI/JD7BMEJEHGINTw4TOFlIRzwJO0icMQpyPyQ+wzJCRBv6DVgnKB01NgUKj2bwYzMqCoBkznBgEF+zYDIocwRIX+NgHj4HICNfh2C4CwdwFWpTG/lgUhYGAwRfv2Ts8mAaXzVgml/XYIJfuWC4HI1gUF9pYJZgMR6ilQHMAOwLAlDRefC0in4AXAEJA6PjCwc0IamOANMMCAECRQDFNRTZBgd+CwQlRA+r6+gLBDEFBnwUBXgKATIArwAGRAAHA3cDdAN2A3kDdwN9A3oDdQN7A30DfAN4A3oDfQAYEAAlAtYASwMAUAFsAHcKAHcAmgB3AHUAdQB2AHVu8UgAygDAAHcAdQB1AHYAdQALCgB3AAsAmgB3AAsCOwB3AAtu8UgAygDAAHgKAJoAdwB3AHUAdQB2AHUAeAB1AHUAdgB1bvFIAMoAwAALCgCaAHcACwB3AAsCOwB3AAtu8UgAygDAAH4ACwGgALcBpwC6AahdAu0COwLtbvFIAMoAwAALCgCaAu0ACwLtAAsCOwLtAAtu8UgAygDAA24ACwNvAAu0VsQAAzsAABCkjUIpAAsAUIusOggWcgMeBxVsGwL67U/2HlzmWOEeOgALASvuAAseAfpKUpnpGgYJDCIZM6YyARUE9ThqAD5iXQgnAJYJPnOzw0ZAEZxEKsIAkA4DhAHnTAIDxxUDK0lxCQlPYgIvIQVYJQBVqE1GakUAKGYiDToSBA1EtAYAXQJYAIF8GgMHRyAAIAjOe9YncekRAA0KACUrjwE7Ayc6AAYWAqaiKG4McEcqANoN3+Mg9TwCBhIkuCny+JwUQ29L008JluRxu3K+oAdqiHOqFH0AG5SUIfUJ5SxCGfxdipRzqTmT4V5Zb+r1Uo4Vm+NqSSEl2mNvR2JhIa8SpYO6ntdwFXHCWTCK8f2+Hxo7uiG3drDycAuKIMP5bhi06ACnqArH1rz4Rqg//lm6SgJGEVbF9xJHISaR6HxqxSnkw6shDnelHKNEfGUXSJRJ1GcsmtJw25xrZMDK9gXSm1/YMkdX4/6NKYOdtk/NQ3/NnDASjTc3fPjIjW/5sVfVObX2oTDWkr1dF9f3kxBsD3/3aQO8hPfRz+e0uEiJqt1161griu7gz8hDDwtpy+F+BWtefnKHZPAxcZoWbnznhJpy0e842j36bcNzGnIEusgGX0a8ZxsnjcSsPDZ09yZ36fCQbriHeQ72JRMILNl6ePPf2HWoVwgWAm1fb3V2sAY0+B6rAXqSwPBgseVmoqsBTSrm91+XasMYYySI8eeRxH3ZvHkMz3BQ5aJ3iUVbYPNM3/7emRtjlsMgv/9VyTsyt/mK+8fgWeT6SoFaclXqn42dAIsvAarF5vNNWHzKSkKQ/8Hfk5ZWK7r9yliOsooyBjRhfkHP4Q2DkWXQi6FG/9r/IwbmkV5T7JSopHKn1pJwm9tb5Ot0oyN1Z2mPpKXHTxx2nlK08fKk1hEYA8WgVVWL5lgx0iTv+KdojJeU23ZDjmiubXOxVXJKKi2Wjuh2HLZOFLiSC7Tls5SMh4f+Pj6xUSrNjFqLGehRNB8lC0QSLNmkJJx/wSG3MnjE9T1CkPwJI0wH2lfzwETIiVqUxg0dfu5q39Gt+hwdcxkhhNvQ4TyrBceof3Mhs/IxFci1HmHr4FMZgXEEczPiGCx0HRwzAqDq2j9AVm1kwN0mRVLWLylgtoPNapF5cY4Y1wJh/e0BBwZj44YgZrDNqvD/9Hv7GFYdUQeDJuQ3EWI4HaKqavU1XjC/n41kT4L79kqGq0kLhdTZvgP3TA3fS0ozVz+5piZsoOtIvBUFoMKbNcmBL6YxxaUAusHB38XrS8dQMnQwJfUUkpRoGr5AUeWicvBTzyK9g77+yCkf5PAysL7r/JjcZgrbvRpMW9iyaxZvKO6ceZN2EwIxKwVFPuvFuiEPGCoagbMo+SpydLrXqBzNCDGFCrO/rkcwa2xhokQZ5CdZ0AsU3JfSqJ6n5I14YA+P/uAgfhPU84Tlw7cEFfp7AEE8ey4sP12PTt4Cods1GRgDOB5xvyiR5m+Bx8O5nBCNctU8BevfV5A08x6RHd5jcwPTMDSZJOedIZ1cGQ704lxbAzqZOP05ZxaOghzSdvFBHYqomATARyAADK4elP8Ly3IrUZKfWh23Xy20uBUmLS4Pfagu9+oyVa2iPgqRP3F2CTUsvJ7+RYnN8fFZbU/HVvxvcFFDKkiTqV5UBZ3Gz54JAKByi9hkKMZJvuGgcSYXFmw08UyoQyVdfTD1/dMkCHXcTGAKeROgArsvmRrQTLUOXioOHGK2QkjHuoYFgXciZoTJd6Fs5q1QX1G+p/e26hYsEf7QZD1nnIyl/SFkNtYYmmBhpBrxl9WbY0YpHWRuw2Ll/tj9mD8P4snVzJl4F9J+1arVeTb9E5r2ILH04qStjxQNwn3m4YNqxmaNbLAqW2TN6LidwuJRqS+NXbtqxoeDXpxeGWmxzSkWxjkyCkX4NQRme6q5SAcC+M7+9ETfA/EwrzQajKakCwYyeunP6ZFlxU2oMEn1Pz31zeStW74G406ZJFCl1wAXIoUKkWotYEpOuXB1uVNxJ63dpJEqfxBeptwIHNrPz8BllZoIcBoXwgfJ+8VAUnVPvRvexnw0Ma/WiGYuJO5y8QTvEYBigFmhUxY5RqzE8OcywN/8m4UYrlaniJO75XQ6KSo9+tWHlu+hMi0UVdiKQp7NelnoZUzNaIyBPVeOwK6GNp+FfHuPOoyhaWuNvTYFkvxscMQWDh+zeFCFkgwbXftiV23ywJ4+uwRqmg9k3KzwIQpzppt8DBBOMbrqwQM5Gb05sEwdKzMiAqOloaA/lr0KA+1pr0/+HiWoiIjHA/wir2nIuS3PeU/ji3O6ZwoxcR1SZ9FhtLC5S0FIzFhbBWcGVP/KpxOPSiUoAdWUpqKH++6Scz507iCcxYI6rdMBICPJZea7OcmeFw5mObJSiqpjg2UoWNIs+cFhyDSt6geV5qgi3FunmwwDoGSMgerFOZGX1m0dMCYo5XOruxO063dwENK9DbnVM9wYFREzh4vyU1WYYJ/LRRp6oxgjqP/X5a8/4Af6p6NWkQferzBmXme0zY/4nwMJm/wd1tIqSwGz+E3xPEAOoZlJit3XddD7/BT1pllzOx+8bmQtANQ/S6fZexc6qi3W+Q2xcmXTUhuS5mpHQRvcxZUN0S5+PL9lXWUAaRZhEH8hTdAcuNMMCuVNKTEGtSUKNi3O6KhSaTzck8csZ2vWRZ+d7mW8c4IKwXIYd25S/zIftPkwPzufjEvOHWVD1m+FjpDVUTV0DGDuHj6QnaEwLu/dEgdLQOg9E1Sro9XHJ8ykLAwtPu+pxqKDuFexqON1sKQm7rwbE1E68UCfA/erovrTCG+DBSNg0l4goDQvZN6uNlbyLpcZAwj2UclycvLpIZMgv4yRlpb3YuMftozorbcGVHt/VeDV3+Fdf1TP0iuaCsPi2G4XeGhsyF1ubVDxkoJhmniQ0/jSg/eYML9KLfnCFgISWkp91eauR3IQvED0nAPXK+6hPCYs+n3+hCZbiskmVMG2da+0EsZPonUeIY8EbfusQXjsK/eFDaosbPjEfQS0RKG7yj5GG69M7MeO1HmiUYocgygJHL6M1qzUDDwUSmr99V7Sdr2F3JjQAJY+F0yH33Iv3+C9M38eML7gTgmNu/r2bUMiPvpYbZ6v1/IaESirBHNa7mPKn4dEmYg7v/+HQgPN1G79jBQ1+soydfDC2r+h2Bl/KIc5KjMK7OH6nb1jLsNf0EHVe2KBiE51ox636uyG6Lho0t3J34L5QY/ilE3mikaF4HKXG1mG1rCevT1Vv6GavltxoQe/bMrpZvRggnBxSEPEeEzkEdOxTnPXHVjUYdw8JYvjB/o7Eegc3Ma+NUxLLnsK0kJlinPmUHzHGtrk5+CAbVzFOBqpyy3QVUnzTDfC/0XD94/okH+OB+i7g9lolhWIjSnfIb+Eq43ZXOWmwvjyV/qqD+t0e+7mTEM74qP/Ozt8nmC7mRpyu63OB4KnUzFc074SqoyPUAgM+/TJGFo6T44EHnQU4X4z6qannVqgw/U7zCpwcmXV1AubIrvOmkKHazJAR55ePjp5tLBsN8vAqs3NAHdcEHOR2xQ0lsNAFzSUuxFQCFYvXLZJdOj9p4fNq6p0HBGUik2YzaI4xySy91KzhQ0+q1hjxvImRwPRf76tChlRkhRCi74NXZ9qUNeIwP+s5p+3m5nwPdNOHgSLD79n7O9m1n1uDHiMntq4nkYwV5OZ1ENbXxFd4PgrlvavZsyUO4MqYlqqn1O8W/I1dEZq5dXhrbETLaZIbC2Kj/Aa/QM+fqUOHdf0tXAQ1huZ3cmWECWSXy/43j35+Mvq9xws7JKseriZ1pEWKc8qlzNrGPUGcVgOa9cPJYIJsGnJTAUsEcDOEVULO5x0rXBijc1lgXEzQQKhROf8zIV82w8eswc78YX11KYLWQRcgHNJElBxfXr72lS2RBSl07qTKorO2uUDZr3sFhYsvnhLZn0A94KRzJ/7DEGIAhW5ZWFpL8gEwu1aLA9MuWZzNwl8Oze9Y+bX+v9gywRVnoB5I/8kXTXU3141yRLYrIOOz6SOnyHNy4SieqzkBXharjfjqq1q6tklaEbA8Qfm2DaIPs7OTq/nvJBjKfO2H9bH2cCMh1+5gspfycu8f/cuuRmtDjyqZ7uCIMyjdV3a+p3fqmXsRx4C8lujezIFHnQiVTXLXuI1XrwN3+siYYj2HHTvESUx8DlOTXpak9qFRK+L3mgJ1WsD7F4cu1aJoFoYQnu+wGDMOjJM3kiBQWHCcvhJ/HRdxodOQp45YZaOTA22Nb4XKCVxqkbwMYFhzYQYIAnCW8FW14uf98jhUG2zrKhQQ0q0CEq0t5nXyvUyvR8DvD69LU+g3i+HFWQMQ8PqZuHD+sNKAV0+M6EJC0szq7rEr7B5bQ8BcNHzvDMc9eqB5ZCQdTf80Obn4uzjwpYU7SISdtV0QGa9D3Wrh2BDQtpBKxaNFV+/Cy2P/Sv+8s7Ud0Fd74X4+o/TNztWgETUapy+majNQ68Lq3ee0ZO48VEbTZYiH1Co4OlfWef82RWeyUXo7woM03PyapGfikTnQinoNq5z5veLpeMV3HCAMTaZmA1oGLAn7XS3XYsz+XK7VMQsc4XKrmDXOLU/pSXVNUq8dIqTba///3x6LiLS6xs1xuCAYSfcQ3+rQgmu7uvf3THKt5Ooo97TqcbRqxx7EASizaQCBQllG/rYxVapMLgtLbZS64w1MDBMXX+PQpBKNwqUKOf2DDRDUXQf9EhOS0Qj4nTmlA8dzSLz/G1d+Ud8MTy/6ghhdiLpeerGY/UlDOfiuqFsMUU5/UYlP+BAmgRLuNpvrUaLlVkrqDievNVEAwF+4CoM1MZTmjxjJMsKJq+u8Zd7tNCUFy6LiyYXRJQ4VyvEQFFaCGKsxIwQkk7EzZ6LTJq2hUuPhvAW+gQnSG6J+MszC+7QCRHcnqDdyNRJ6T9xyS87A6MDutbzKGvGktpbXqtzWtXb9HsfK2cBMomjN9a4y+TaJLnXxAeX/HWzmf4cR4vALt/P4w4qgKY04ml4ZdLOinFYS6cup3G/1ie4+t1eOnpBNlqGqs75ilzkT4+DsZQxNvaSKJ//6zIbbk/M7LOhFmRc/1R+kBtz7JFGdZm/COotIdvQoXpTqP/1uqEUmCb/QWoGLMwO5ANcHzxdY48IGP5+J+zKOTBFZ4Pid+GTM+Wq12MV/H86xEJptBa6T+p3kgpwLedManBHC2GgNrFpoN2xnrMz9WFWX/8/ygSBkavq2Uv7FdCsLEYLu9LLIvAU0bNRDtzYl+/vXmjpIvuJFYjmI0im6QEYqnIeMsNjXG4vIutIGHijeAG/9EDBozKV5cldkHbLxHh25vT+ZEzbhXlqvpzKJwcEgfNwLAKFeo0/pvEE10XDB+EXRTXtSzJozQKFFAJhMxYkVaCW+E9AL7tMeU8acxidHqzb6lX4691UsDpy/LLRmT+epgW56+5Cw8tB4kMUv6s9lh3eRKbyGs+H/4mQMaYzPTf2OOdokEn+zzgvoD3FqNKk8QqGAXVsqcGdXrT62fSPkR2vROFi68A6se86UxRUk4cajfPyCC4G5wDhD+zNq4jodQ4u4n/m37Lr36n4LIAAsVr02dFi9AiwA81MYs2rm4eDlDNmdMRvEKRHfBwW5DdMNp0jPFZMeARqF/wL4XBfd+EMLBfMzpH5GH6NaW+1vrvMdg+VxDzatk3MXgO3ro3P/DpcC6+Mo4MySJhKJhSR01SGGGp5hPWmrrUgrv3lDnP+HhcI3nt3YqBoVAVTBAQT5iuhTg8nvPtd8ZeYj6w1x6RqGUBrSku7+N1+BaasZvjTk64RoIDlL8brpEcJx3OmY7jLoZsswdtmhfC/G21llXhITOwmvRDDeTTPbyASOa16cF5/A1fZAidJpqju3wYAy9avPR1ya6eNp9K8XYrrtuxlqi+bDKwlfrYdR0RRiKRVTLOH85+ZY7XSmzRpfZBJjaTa81VDcJHpZnZnSQLASGYW9l51ZV/h7eVzTi3Hv6hUsgc/51AqJRTkpbFVLXXszoBL8nBX0u/0jBLT8nH+fJePbrwURT58OY+UieRjd1vs04w0VG5VN2U6MoGZkQzKN/ptz0Q366dxoTGmj7i1NQGHi9GgnquXFYdrCfZBmeb7s0T6yrdlZH5cZuwHFyIJ/kAtGsTg0xH5taAAq44BAk1CPk9KVVbqQzrCUiFdF/6gtlPQ8bHHc1G1W92MXGZ5HEHftyLYs8mbD/9xYRUWkHmlM0zC2ilJlnNgV4bfALpQghxOUoZL7VTqtCHIaQSXm+YUMnpkXybnV+A6xlm2CVy8fn0Xlm2XRa0+zzOa21JWWmixfiPMSCZ7qA4rS93VN3pkpF1s5TonQjisHf7iU9ZGvUPOAKZcR1pbeVf/Ul7OhepGCaId9wOtqo7pJ7yLcBZ0pFkOF28y4zEI/kcUNmutBHaQpBdNM8vjCS6HZRokkeo88TBAjGyG7SR+6vUgTcyK9Imalj0kuxz0wmK+byQU11AiJFk/ya5dNduRClcnU64yGu/ieWSeOos1t3ep+RPIWQ2pyTYVbZltTbsb7NiwSi3AV+8KLWk7LxCnfZUetEM8ThnsSoGH38/nyAwFguJp8FjvlHtcWZuU4hPva0rHfr0UhOOJ/F6vS62FW7KzkmRll2HEc7oUq4fyi5T70Vl7YVIfsPHUCdHesf9Lk7WNVWO75JDkYbMI8TOW8JKVtLY9d6UJRITO8oKo0xS+o99Yy04iniGHAaGj88kEWgwv0OrHdY/nr76DOGNS59hXCGXzTKUvDl9iKpLSWYN1lxIeyywdNpTkhay74w2jFT6NS8qkjo5CxA1yfSYwp6AJIZNKIeEK5PJAW7ORgWgwp0VgzYpqovMrWxbu+DGZ6Lhie1RAqpzm8VUzKJOH3mCzWuTOLsN3VT/dv2eeYe9UjbR8YTBsLz7q60VN1sU51k+um1f8JxD5pPhbhSC8rRaB454tmh6YUWrJI3+GWY0qeWioj/tbkYITOkJaeuGt4JrJvHA+l0Gu7kY7XOaa05alMnRWVCXqFgLIwSY4uF59Ue5SU4QKuc/HamDxbr0x6csCetXGoP7Qn1Bk/J9DsynO/UD6iZ1Hyrz+jit0hDCwi/E9OjgKTbB3ZQKQ/0ZOvevfNHG0NK4Aj3Cp7NpRk07RT1i/S0EL93Ag8GRgKI9CfpajKyK6+Jj/PI1KO5/85VAwz2AwzP8FTBb075IxCXv6T9RVvWT2tUaqxDS92zrGUbWzUYk9mSs82pECH+fkqsDt93VW++4YsR/dHCYcQSYTO/KaBMDj9LSD/J/+z20Kq8XvZUAIHtm9hRPP3ItbuAu2Hm5lkPs92pd7kCxgRs0xOVBnZ13ccdA0aunrwv9SdqElJRC3g+oCu+nXyCgmXUs9yMjTMAIHfxZV+aPKcZeUBWt057Xo85Ks1Ir5gzEHCWqZEhrLZMuF11ziGtFQUds/EESajhagzcKsxamcSZxGth4UII+adPhQkUnx2WyN+4YWR+r3f8MnkyGFuR4zjzxJS8WsQYR5PTyRaD9ixa6Mh741nBHbzfjXHskGDq179xaRNrCIB1z1xRfWfjqw2pHc1zk9xlPpL8sQWAIuETZZhbnmL54rceXVNRvUiKrrqIkeogsl0XXb17ylNb0f4GA9Wd44vffEG8FSZGHEL2fbaTGRcSiCeA8PmA/f6Hz8HCS76fXUHwgwkzSwlI71ekZ7Fapmlk/KC+Hs8hUcw3N2LN5LhkVYyizYFl/uPeVP5lsoJHhhfWvvSWruCUW1ZcJOeuTbrDgywJ/qG07gZJplnTvLcYdNaH0KMYOYMGX+rB4NGPFmQsNaIwlWrfCezxre8zXBrsMT+edVLbLqN1BqB76JH4BvZTqUIMfGwPGEn+EnmTV86fPBaYbFL3DFEhjB45CewkXEAtJxk4/Ms2pPXnaRqdky0HOYdcUcE2zcXq4vaIvW2/v0nHFJH2XXe22ueDmq/18XGtELSq85j9X8q0tcNSSKJIX8FTuJF/Pf8j5PhqG2u+osvsLxYrvvfeVJL+4tkcXcr9JV7v0ERmj/X6fM3NC4j6dS1+9Umr2oPavqiAydTZPLMNRGY23LO9zAVDly7jD+70G5TPPLdhRIl4WxcYjLnM+SNcJ26FOrkrISUtPObIz5Zb3AG612krnpy15RMW+1cQjlnWFI6538qky9axd2oJmHIHP08KyP0ubGO+TQNOYuv2uh17yCIvR8VcStw7o1g0NM60sk+8Tq7YfIBJrtp53GkvzXH7OA0p8/n/u1satf/VJhtR1l8Wa6Gmaug7haSpaCaYQax6ta0mkutlb+eAOSG1aobM81D9A4iS1RRlzBBoVX6tU1S6WE2N9ORY6DfeLRC4l9Rvr5h95XDWB2mR1d4WFudpsgVYwiTwT31ljskD8ZyDOlm5DkGh9N/UB/0AI5Xvb8ZBmai2hQ4BWMqFwYnzxwB26YHSOv9WgY3JXnvoN+2R4rqGVh/LLDMtpFP+SpMGJNWvbIl5SOodbCczW2RKleksPoUeGEzrjtKHVdtZA+kfqO+rVx/iclCqwoopepvJpSTDjT+b9GWylGRF8EDbGlw6eUzmJM95Ovoz+kwLX3c2fTjFeYEsE7vUZm3mqdGJuKh2w9/QGSaqRHs99aScGOdDqkFcACoqdbBoQqqjamhH6Q9ng39JCg3lrGJwd50Qk9ovnqBTr8MME7Ps2wiVfygUmPoUBJJfJWX5Nda0nuncbFkA=="))}const ba=ya();new Set(fa(ba)),new Set(fa(ba)),ca(ba),pa(ba),new Gs(Zo);const ga=new Uint8Array(32);ga.fill(0);const ma=`Ethereum Signed Message:\n`;function Aa(t){return typeof t=="string"&&(t=zo(t)),ho(to([zo(ma),zo(String(t.length)),t]))}const Ea="rlp/5.7.0";new Gs(Ea);const Ma="address/5.7.0",_a=new Gs(Ma);function Oa(t){no(t,20)||_a.throwArgumentError("invalid address","address",t),t=t.toLowerCase();const r=t.substring(2).split(""),n=new Uint8Array(40);for(let t=0;t<40;t++)n[t]=r[t].charCodeAt(0);const i=Zs(ho(n));for(let t=0;t<40;t+=2)i[t>>1]>>4>=8&&(r[t]=r[t].toUpperCase()),(i[t>>1]&15)>=8&&(r[t+1]=r[t+1].toUpperCase());return"0x"+r.join("")}const Ia=9007199254740991;function Sa(t){return Math.log10?Math.log10(t):Math.log(t)/Math.LN10}const Na={};for(let t=0;t<10;t++)Na[String(t)]=String(t);for(let t=0;t<26;t++)Na[String.fromCharCode(65+t)]=String(10+t);const Ca=Math.floor(Sa(Ia));function ja(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let r=t.split("").map((t=>Na[t])).join("");for(;r.length>=Ca;){let t=r.substring(0,Ca);r=parseInt(t,10)%97+r.substring(t.length)}let n=String(98-parseInt(r,10)%97);for(;n.length<2;)n="0"+n;return n}function xa(t){let r=null;if(typeof t!="string"&&_a.throwArgumentError("invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/))t.substring(0,2)!=="0x"&&(t="0x"+t),r=Oa(t),t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&r!==t&&_a.throwArgumentError("bad address checksum","address",t);else if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(t.substring(2,4)!==ja(t)&&_a.throwArgumentError("bad icap checksum","address",t),r=No(t.substring(4));r.length<40;)r="0"+r;r=Oa("0x"+r)}else _a.throwArgumentError("invalid address","address",t);return r}const Pa="properties/5.7.0";new Gs(Pa);function Ta(t,r,n){Object.defineProperty(t,r,{enumerable:!0,value:n,writable:!1})}new Gs(Zo);const Ra=new Uint8Array(32);Ra.fill(0),Mo.from(-1);const Da=Mo.from(0),Ua=Mo.from(1);Mo.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),ao(Ua.toHexString(),32),ao(Da.toHexString(),32);var Ba={},ka={},$a=Fa;function Fa(t,r){if(!t)throw new Error(r||"Assertion failed")}Fa.equal=function(t,r,n){if(t!=r)throw new Error(n||"Assertion failed: "+t+" != "+r)};var qa={exports:{}};typeof Object.create=="function"?qa.exports=function(t,r){r&&(t.super_=r,t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:qa.exports=function(t,r){if(r){t.super_=r;var n=function(){};n.prototype=r.prototype,t.prototype=new n,t.prototype.constructor=t}};var La=$a,Ka=qa.exports;ka.inherits=Ka;function Ha(t,r){return(t.charCodeAt(r)&64512)!==55296||r<0||r+1>=t.length?!1:(t.charCodeAt(r+1)&64512)===56320}function Ga(t,r){if(Array.isArray(t))return t.slice();if(!t)return[];var n=[];if(typeof t=="string")if(r){if(r==="hex")for(t=t.replace(/[^a-z0-9]+/gi,""),t.length%2!==0&&(t="0"+t),e=0;e<t.length;e+=2)n.push(parseInt(t[e]+t[e+1],16))}else for(var i=0,e=0;e<t.length;e++){var s=t.charCodeAt(e);s<128?n[i++]=s:s<2048?(n[i++]=s>>6|192,n[i++]=s&63|128):Ha(t,e)?(s=65536+((s&1023)<<10)+(t.charCodeAt(++e)&1023),n[i++]=s>>18|240,n[i++]=s>>12&63|128,n[i++]=s>>6&63|128,n[i++]=s&63|128):(n[i++]=s>>12|224,n[i++]=s>>6&63|128,n[i++]=s&63|128)}else for(e=0;e<t.length;e++)n[e]=t[e]|0;return n}ka.toArray=Ga;function Qa(t){for(var r="",n=0;n<t.length;n++)r+=za(t[n].toString(16));return r}ka.toHex=Qa;function Ja(t){var r=t>>>24|t>>>8&65280|t<<8&16711680|(t&255)<<24;return r>>>0}ka.htonl=Ja;function Va(t,r){for(var n="",i=0;i<t.length;i++){var e=t[i];r==="little"&&(e=Ja(e)),n+=Ya(e.toString(16))}return n}ka.toHex32=Va;function za(t){return t.length===1?"0"+t:t}ka.zero2=za;function Ya(t){return t.length===7?"0"+t:t.length===6?"00"+t:t.length===5?"000"+t:t.length===4?"0000"+t:t.length===3?"00000"+t:t.length===2?"000000"+t:t.length===1?"0000000"+t:t}ka.zero8=Ya;function Wa(t,r,n,i){var e=n-r;La(e%4===0);for(var s=new Array(e/4),o=0,a=r;o<s.length;o++,a+=4){var u;i==="big"?u=t[a]<<24|t[a+1]<<16|t[a+2]<<8|t[a+3]:u=t[a+3]<<24|t[a+2]<<16|t[a+1]<<8|t[a],s[o]=u>>>0}return s}ka.join32=Wa;function Xa(t,r){for(var n=new Array(t.length*4),i=0,e=0;i<t.length;i++,e+=4){var s=t[i];r==="big"?(n[e]=s>>>24,n[e+1]=s>>>16&255,n[e+2]=s>>>8&255,n[e+3]=s&255):(n[e+3]=s>>>24,n[e+2]=s>>>16&255,n[e+1]=s>>>8&255,n[e]=s&255)}return n}ka.split32=Xa;function Za(t,r){return t>>>r|t<<32-r}ka.rotr32=Za;function tu(t,r){return t<<r|t>>>32-r}ka.rotl32=tu;function ru(t,r){return t+r>>>0}ka.sum32=ru;function nu(t,r,n){return t+r+n>>>0}ka.sum32_3=nu;function iu(t,r,n,i){return t+r+n+i>>>0}ka.sum32_4=iu;function eu(t,r,n,i,e){return t+r+n+i+e>>>0}ka.sum32_5=eu;function su(t,r,n,i){var e=t[r],s=t[r+1],o=i+s>>>0,a=(o<i?1:0)+n+e;t[r]=a>>>0,t[r+1]=o}ka.sum64=su;function ou(t,r,n,i){var e=r+i>>>0,s=(e<r?1:0)+t+n;return s>>>0}ka.sum64_hi=ou;function au(t,r,n,i){var e=r+i;return e>>>0}ka.sum64_lo=au;function uu(t,r,n,i,e,s,o,a){var u=0,h=r;h=h+i>>>0,u+=h<r?1:0,h=h+s>>>0,u+=h<s?1:0,h=h+a>>>0,u+=h<a?1:0;var f=t+n+e+o+u;return f>>>0}ka.sum64_4_hi=uu;function hu(t,r,n,i,e,s,o,a){var u=r+i+s+a;return u>>>0}ka.sum64_4_lo=hu;function fu(t,r,n,i,e,s,o,a,u,h){var f=0,c=r;c=c+i>>>0,f+=c<r?1:0,c=c+s>>>0,f+=c<s?1:0,c=c+a>>>0,f+=c<a?1:0,c=c+h>>>0,f+=c<h?1:0;var l=t+n+e+o+u+f;return l>>>0}ka.sum64_5_hi=fu;function cu(t,r,n,i,e,s,o,a,u,h){var f=r+i+s+a+h;return f>>>0}ka.sum64_5_lo=cu;function lu(t,r,n){var i=r<<32-n|t>>>n;return i>>>0}ka.rotr64_hi=lu;function du(t,r,n){var i=t<<32-n|r>>>n;return i>>>0}ka.rotr64_lo=du;function vu(t,r,n){return t>>>n}ka.shr64_hi=vu;function wu(t,r,n){var i=t<<32-n|r>>>n;return i>>>0}ka.shr64_lo=wu;var pu={},yu=ka,bu=$a;function gu(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}pu.BlockHash=gu,gu.prototype.update=function(t,r){if(t=yu.toArray(t,r),this.pending?this.pending=this.pending.concat(t):this.pending=t,this.pendingTotal+=t.length,this.pending.length>=this._delta8){t=this.pending;var n=t.length%this._delta8;this.pending=t.slice(t.length-n,t.length),this.pending.length===0&&(this.pending=null),t=yu.join32(t,0,t.length-n,this.endian);for(var i=0;i<t.length;i+=this._delta32)this._update(t,i,i+this._delta32)}return this},gu.prototype.digest=function(t){return this.update(this._pad()),bu(this.pending===null),this._digest(t)},gu.prototype._pad=function(){var t=this.pendingTotal,r=this._delta8,n=r-(t+this.padLength)%r,i=new Array(n+this.padLength);i[0]=128;for(var e=1;e<n;e++)i[e]=0;if(t<<=3,this.endian==="big"){for(var s=8;s<this.padLength;s++)i[e++]=0;i[e++]=0,i[e++]=0,i[e++]=0,i[e++]=0,i[e++]=t>>>24&255,i[e++]=t>>>16&255,i[e++]=t>>>8&255,i[e++]=t&255}else for(i[e++]=t&255,i[e++]=t>>>8&255,i[e++]=t>>>16&255,i[e++]=t>>>24&255,i[e++]=0,i[e++]=0,i[e++]=0,i[e++]=0,s=8;s<this.padLength;s++)i[e++]=0;return i};var mu={},Au={},Eu=ka,Mu=Eu.rotr32;function _u(t,r,n,i){if(t===0)return Ou(r,n,i);if(t===1||t===3)return Su(r,n,i);if(t===2)return Iu(r,n,i)}Au.ft_1=_u;function Ou(t,r,n){return t&r^~t&n}Au.ch32=Ou;function Iu(t,r,n){return t&r^t&n^r&n}Au.maj32=Iu;function Su(t,r,n){return t^r^n}Au.p32=Su;function Nu(t){return Mu(t,2)^Mu(t,13)^Mu(t,22)}Au.s0_256=Nu;function Cu(t){return Mu(t,6)^Mu(t,11)^Mu(t,25)}Au.s1_256=Cu;function ju(t){return Mu(t,7)^Mu(t,18)^t>>>3}Au.g0_256=ju;function xu(t){return Mu(t,17)^Mu(t,19)^t>>>10}Au.g1_256=xu;var Pu=ka,Tu=pu,Ru=Au,Du=Pu.rotl32,Uu=Pu.sum32,Bu=Pu.sum32_5,ku=Ru.ft_1,$u=Tu.BlockHash,Fu=[1518500249,1859775393,2400959708,3395469782];function qu(){if(!(this instanceof qu))return new qu;$u.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}Pu.inherits(qu,$u);var Lu=qu;qu.blockSize=512,qu.outSize=160,qu.hmacStrength=80,qu.padLength=64,qu.prototype._update=function(t,r){for(var n=this.W,i=0;i<16;i++)n[i]=t[r+i];for(;i<n.length;i++)n[i]=Du(n[i-3]^n[i-8]^n[i-14]^n[i-16],1);var e=this.h[0],s=this.h[1],o=this.h[2],a=this.h[3],u=this.h[4];for(i=0;i<n.length;i++){var h=~~(i/20),f=Bu(Du(e,5),ku(h,s,o,a),u,n[i],Fu[h]);u=a,a=o,o=Du(s,30),s=e,e=f}this.h[0]=Uu(this.h[0],e),this.h[1]=Uu(this.h[1],s),this.h[2]=Uu(this.h[2],o),this.h[3]=Uu(this.h[3],a),this.h[4]=Uu(this.h[4],u)},qu.prototype._digest=function(t){return t==="hex"?Pu.toHex32(this.h,"big"):Pu.split32(this.h,"big")};var Ku=ka,Hu=pu,Gu=Au,Qu=$a,Ju=Ku.sum32,Vu=Ku.sum32_4,zu=Ku.sum32_5,Yu=Gu.ch32,Wu=Gu.maj32,Xu=Gu.s0_256,Zu=Gu.s1_256,th=Gu.g0_256,rh=Gu.g1_256,nh=Hu.BlockHash,ih=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function eh(){if(!(this instanceof eh))return new eh;nh.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=ih,this.W=new Array(64)}Ku.inherits(eh,nh);var sh=eh;eh.blockSize=512,eh.outSize=256,eh.hmacStrength=192,eh.padLength=64,eh.prototype._update=function(t,r){for(var n=this.W,i=0;i<16;i++)n[i]=t[r+i];for(;i<n.length;i++)n[i]=Vu(rh(n[i-2]),n[i-7],th(n[i-15]),n[i-16]);var e=this.h[0],s=this.h[1],o=this.h[2],a=this.h[3],u=this.h[4],h=this.h[5],f=this.h[6],c=this.h[7];for(Qu(this.k.length===n.length),i=0;i<n.length;i++){var l=zu(c,Zu(u),Yu(u,h,f),this.k[i],n[i]),d=Ju(Xu(e),Wu(e,s,o));c=f,f=h,h=u,u=Ju(a,l),a=o,o=s,s=e,e=Ju(l,d)}this.h[0]=Ju(this.h[0],e),this.h[1]=Ju(this.h[1],s),this.h[2]=Ju(this.h[2],o),this.h[3]=Ju(this.h[3],a),this.h[4]=Ju(this.h[4],u),this.h[5]=Ju(this.h[5],h),this.h[6]=Ju(this.h[6],f),this.h[7]=Ju(this.h[7],c)},eh.prototype._digest=function(t){return t==="hex"?Ku.toHex32(this.h,"big"):Ku.split32(this.h,"big")};var oh=ka,ah=sh;function uh(){if(!(this instanceof uh))return new uh;ah.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}oh.inherits(uh,ah);var hh=uh;uh.blockSize=512,uh.outSize=224,uh.hmacStrength=192,uh.padLength=64,uh.prototype._digest=function(t){return t==="hex"?oh.toHex32(this.h.slice(0,7),"big"):oh.split32(this.h.slice(0,7),"big")};var fh=ka,ch=pu,lh=$a,dh=fh.rotr64_hi,vh=fh.rotr64_lo,wh=fh.shr64_hi,ph=fh.shr64_lo,yh=fh.sum64,bh=fh.sum64_hi,gh=fh.sum64_lo,mh=fh.sum64_4_hi,Ah=fh.sum64_4_lo,Eh=fh.sum64_5_hi,Mh=fh.sum64_5_lo,_h=ch.BlockHash,Oh=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Ih(){if(!(this instanceof Ih))return new Ih;_h.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=Oh,this.W=new Array(160)}fh.inherits(Ih,_h);var Sh=Ih;Ih.blockSize=1024,Ih.outSize=512,Ih.hmacStrength=192,Ih.padLength=128,Ih.prototype._prepareBlock=function(t,r){for(var n=this.W,i=0;i<32;i++)n[i]=t[r+i];for(;i<n.length;i+=2){var e=kh(n[i-4],n[i-3]),s=$h(n[i-4],n[i-3]),o=n[i-14],a=n[i-13],u=Uh(n[i-30],n[i-29]),h=Bh(n[i-30],n[i-29]),f=n[i-32],c=n[i-31];n[i]=mh(e,s,o,a,u,h,f,c),n[i+1]=Ah(e,s,o,a,u,h,f,c)}},Ih.prototype._update=function(t,r){this._prepareBlock(t,r);var n=this.W,i=this.h[0],e=this.h[1],s=this.h[2],o=this.h[3],a=this.h[4],u=this.h[5],h=this.h[6],f=this.h[7],c=this.h[8],l=this.h[9],d=this.h[10],v=this.h[11],w=this.h[12],p=this.h[13],y=this.h[14],b=this.h[15];lh(this.k.length===n.length);for(var g=0;g<n.length;g+=2){var m=y,A=b,E=Rh(c,l),M=Dh(c,l),_=Nh(c,l,d,v,w),O=Ch(c,l,d,v,w,p),I=this.k[g],S=this.k[g+1],N=n[g],C=n[g+1],j=Eh(m,A,E,M,_,O,I,S,N,C),x=Mh(m,A,E,M,_,O,I,S,N,C);m=Ph(i,e),A=Th(i,e),E=jh(i,e,s,o,a),M=xh(i,e,s,o,a,u);var P=bh(m,A,E,M),T=gh(m,A,E,M);y=w,b=p,w=d,p=v,d=c,v=l,c=bh(h,f,j,x),l=gh(f,f,j,x),h=a,f=u,a=s,u=o,s=i,o=e,i=bh(j,x,P,T),e=gh(j,x,P,T)}yh(this.h,0,i,e),yh(this.h,2,s,o),yh(this.h,4,a,u),yh(this.h,6,h,f),yh(this.h,8,c,l),yh(this.h,10,d,v),yh(this.h,12,w,p),yh(this.h,14,y,b)},Ih.prototype._digest=function(t){return t==="hex"?fh.toHex32(this.h,"big"):fh.split32(this.h,"big")};function Nh(t,r,n,i,e){var s=t&n^~t&e;return s<0&&(s+=4294967296),s}function Ch(t,r,n,i,e,s){var o=r&i^~r&s;return o<0&&(o+=4294967296),o}function jh(t,r,n,i,e){var s=t&n^t&e^n&e;return s<0&&(s+=4294967296),s}function xh(t,r,n,i,e,s){var o=r&i^r&s^i&s;return o<0&&(o+=4294967296),o}function Ph(t,r){var n=dh(t,r,28),i=dh(r,t,2),e=dh(r,t,7),s=n^i^e;return s<0&&(s+=4294967296),s}function Th(t,r){var n=vh(t,r,28),i=vh(r,t,2),e=vh(r,t,7),s=n^i^e;return s<0&&(s+=4294967296),s}function Rh(t,r){var n=dh(t,r,14),i=dh(t,r,18),e=dh(r,t,9),s=n^i^e;return s<0&&(s+=4294967296),s}function Dh(t,r){var n=vh(t,r,14),i=vh(t,r,18),e=vh(r,t,9),s=n^i^e;return s<0&&(s+=4294967296),s}function Uh(t,r){var n=dh(t,r,1),i=dh(t,r,8),e=wh(t,r,7),s=n^i^e;return s<0&&(s+=4294967296),s}function Bh(t,r){var n=vh(t,r,1),i=vh(t,r,8),e=ph(t,r,7),s=n^i^e;return s<0&&(s+=4294967296),s}function kh(t,r){var n=dh(t,r,19),i=dh(r,t,29),e=wh(t,r,6),s=n^i^e;return s<0&&(s+=4294967296),s}function $h(t,r){var n=vh(t,r,19),i=vh(r,t,29),e=ph(t,r,6),s=n^i^e;return s<0&&(s+=4294967296),s}var Fh=ka,qh=Sh;function Lh(){if(!(this instanceof Lh))return new Lh;qh.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}Fh.inherits(Lh,qh);var Kh=Lh;Lh.blockSize=1024,Lh.outSize=384,Lh.hmacStrength=192,Lh.padLength=128,Lh.prototype._digest=function(t){return t==="hex"?Fh.toHex32(this.h.slice(0,12),"big"):Fh.split32(this.h.slice(0,12),"big")},mu.sha1=Lu,mu.sha224=hh,mu.sha256=sh,mu.sha384=Kh,mu.sha512=Sh;var Hh={},Gh=ka,Qh=pu,Jh=Gh.rotl32,Vh=Gh.sum32,zh=Gh.sum32_3,Yh=Gh.sum32_4,Wh=Qh.BlockHash;function Xh(){if(!(this instanceof Xh))return new Xh;Wh.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}Gh.inherits(Xh,Wh),Hh.ripemd160=Xh,Xh.blockSize=512,Xh.outSize=160,Xh.hmacStrength=192,Xh.padLength=64,Xh.prototype._update=function(t,r){for(var n=this.h[0],i=this.h[1],e=this.h[2],s=this.h[3],o=this.h[4],a=n,u=i,h=e,f=s,c=o,l=0;l<80;l++){var d=Vh(Jh(Yh(n,Zh(l,i,e,s),t[nf[l]+r],tf(l)),sf[l]),o);n=o,o=s,s=Jh(e,10),e=i,i=d,d=Vh(Jh(Yh(a,Zh(79-l,u,h,f),t[ef[l]+r],rf(l)),of[l]),c),a=c,c=f,f=Jh(h,10),h=u,u=d}d=zh(this.h[1],e,f),this.h[1]=zh(this.h[2],s,c),this.h[2]=zh(this.h[3],o,a),this.h[3]=zh(this.h[4],n,u),this.h[4]=zh(this.h[0],i,h),this.h[0]=d},Xh.prototype._digest=function(t){return t==="hex"?Gh.toHex32(this.h,"little"):Gh.split32(this.h,"little")};function Zh(t,r,n,i){return t<=15?r^n^i:t<=31?r&n|~r&i:t<=47?(r|~n)^i:t<=63?r&i|n&~i:r^(n|~i)}function tf(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function rf(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}var nf=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],ef=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],sf=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],of=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],af=ka,uf=$a;function hf(t,r,n){if(!(this instanceof hf))return new hf(t,r,n);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(af.toArray(r,n))}var ff=hf;hf.prototype._init=function(t){t.length>this.blockSize&&(t=(new this.Hash).update(t).digest()),uf(t.length<=this.blockSize);for(var r=t.length;r<this.blockSize;r++)t.push(0);for(r=0;r<t.length;r++)t[r]^=54;for(this.inner=(new this.Hash).update(t),r=0;r<t.length;r++)t[r]^=106;this.outer=(new this.Hash).update(t)},hf.prototype.update=function(t,r){return this.inner.update(t,r),this},hf.prototype.digest=function(t){return this.outer.update(this.inner.digest()),this.outer.digest(t)},function(t){var r=t;r.utils=ka,r.common=pu,r.sha=mu,r.ripemd=Hh,r.hmac=ff,r.sha1=r.sha.sha1,r.sha256=r.sha.sha256,r.sha224=r.sha.sha224,r.sha384=r.sha.sha384,r.sha512=r.sha.sha512,r.ripemd160=r.ripemd.ripemd160}(Ba);function cf(t,r,n){return n={path:r,exports:{},require:function(t,r){return lf()}},t(n,n.exports),n.exports}function lf(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var df=vf;function vf(t,r){if(!t)throw new Error(r||"Assertion failed")}vf.equal=function(t,r,n){if(t!=r)throw new Error(n||"Assertion failed: "+t+" != "+r)};var wf=cf((function(t,r){var n=r;function i(t,r){if(Array.isArray(t))return t.slice();if(!t)return[];var n=[];if(typeof t!="string"){for(var i=0;i<t.length;i++)n[i]=t[i]|0;return n}if(r==="hex"){t=t.replace(/[^a-z0-9]+/gi,""),t.length%2!==0&&(t="0"+t);for(var i=0;i<t.length;i+=2)n.push(parseInt(t[i]+t[i+1],16))}else for(var i=0;i<t.length;i++){var e=t.charCodeAt(i),s=e>>8,o=e&255;s?n.push(s,o):n.push(o)}return n}n.toArray=i;function e(t){return t.length===1?"0"+t:t}n.zero2=e;function s(t){for(var r="",n=0;n<t.length;n++)r+=e(t[n].toString(16));return r}n.toHex=s,n.encode=function(t,r){return r==="hex"?s(t):t}})),pf=cf((function(t,r){var n=r;n.assert=df,n.toArray=wf.toArray,n.zero2=wf.zero2,n.toHex=wf.toHex,n.encode=wf.encode;function i(t,r,n){var i=new Array(Math.max(t.bitLength(),n)+1);i.fill(0);for(var e=1<<r+1,s=t.clone(),o=0;o<i.length;o++){var a,u=s.andln(e-1);s.isOdd()?(u>(e>>1)-1?a=(e>>1)-u:a=u,s.isubn(a)):a=0,i[o]=a,s.iushrn(1)}return i}n.getNAF=i;function e(t,r){var n=[[],[]];t=t.clone(),r=r.clone();for(var i=0,e=0,s;t.cmpn(-i)>0||r.cmpn(-e)>0;){var o=t.andln(3)+i&3,a=r.andln(3)+e&3;o===3&&(o=-1),a===3&&(a=-1);var u;o&1?(s=t.andln(7)+i&7,(s===3||s===5)&&a===2?u=-o:u=o):u=0,n[0].push(u);var h;a&1?(s=r.andln(7)+e&7,(s===3||s===5)&&o===2?h=-a:h=a):h=0,n[1].push(h),2*i===u+1&&(i=1-i),2*e===h+1&&(e=1-e),t.iushrn(1),r.iushrn(1)}return n}n.getJSF=e;function s(t,r,n){var i="_"+r;t.prototype[r]=function(){return this[i]!==void 0?this[i]:this[i]=n.call(this)}}n.cachedProperty=s;function o(t){return typeof t=="string"?n.toArray(t,"hex"):t}n.parseBytes=o;function a(t){return new wo(t,"hex","le")}n.intFromLE=a})),yf=pf.getNAF,bf=pf.getJSF,gf=pf.assert;function mf(t,r){this.type=t,this.p=new wo(r.p,16),this.red=r.prime?wo.red(r.prime):wo.mont(this.p),this.zero=new wo(0).toRed(this.red),this.one=new wo(1).toRed(this.red),this.two=new wo(2).toRed(this.red),this.n=r.n&&new wo(r.n,16),this.g=r.g&&this.pointFromJSON(r.g,r.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var n=this.n&&this.p.div(this.n);!n||n.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var Af=mf;mf.prototype.point=function(){throw new Error("Not implemented")},mf.prototype.validate=function(){throw new Error("Not implemented")},mf.prototype._fixedNafMul=function(t,r){gf(t.precomputed);var n=t._getDoubles(),i=yf(r,1,this._bitLength),e=(1<<n.step+1)-(n.step%2===0?2:1);e/=3;var s=[],o,a;for(o=0;o<i.length;o+=n.step){a=0;for(var u=o+n.step-1;u>=o;u--)a=(a<<1)+i[u];s.push(a)}for(var h=this.jpoint(null,null,null),f=this.jpoint(null,null,null),c=e;c>0;c--){for(o=0;o<s.length;o++)a=s[o],a===c?f=f.mixedAdd(n.points[o]):a===-c&&(f=f.mixedAdd(n.points[o].neg()));h=h.add(f)}return h.toP()},mf.prototype._wnafMul=function(t,r){var n=4,i=t._getNAFPoints(n);n=i.wnd;for(var e=i.points,s=yf(r,n,this._bitLength),o=this.jpoint(null,null,null),a=s.length-1;a>=0;a--){for(var u=0;a>=0&&s[a]===0;a--)u++;if(a>=0&&u++,o=o.dblp(u),a<0)break;var h=s[a];gf(h!==0),t.type==="affine"?h>0?o=o.mixedAdd(e[h-1>>1]):o=o.mixedAdd(e[-h-1>>1].neg()):h>0?o=o.add(e[h-1>>1]):o=o.add(e[-h-1>>1].neg())}return t.type==="affine"?o.toP():o},mf.prototype._wnafMulAdd=function(t,r,n,i,e){var s=this._wnafT1,o=this._wnafT2,a=this._wnafT3,u=0,h,f,c;for(h=0;h<i;h++){c=r[h];var l=c._getNAFPoints(t);s[h]=l.wnd,o[h]=l.points}for(h=i-1;h>=1;h-=2){var d=h-1,v=h;if(s[d]!==1||s[v]!==1){a[d]=yf(n[d],s[d],this._bitLength),a[v]=yf(n[v],s[v],this._bitLength),u=Math.max(a[d].length,u),u=Math.max(a[v].length,u);continue}var w=[r[d],null,null,r[v]];r[d].y.cmp(r[v].y)===0?(w[1]=r[d].add(r[v]),w[2]=r[d].toJ().mixedAdd(r[v].neg())):r[d].y.cmp(r[v].y.redNeg())===0?(w[1]=r[d].toJ().mixedAdd(r[v]),w[2]=r[d].add(r[v].neg())):(w[1]=r[d].toJ().mixedAdd(r[v]),w[2]=r[d].toJ().mixedAdd(r[v].neg()));var p=[-3,-1,-5,-7,0,7,5,1,3],y=bf(n[d],n[v]);for(u=Math.max(y[0].length,u),a[d]=new Array(u),a[v]=new Array(u),f=0;f<u;f++){var b=y[0][f]|0,g=y[1][f]|0;a[d][f]=p[(b+1)*3+(g+1)],a[v][f]=0,o[d]=w}}var m=this.jpoint(null,null,null),A=this._wnafT4;for(h=u;h>=0;h--){for(var E=0;h>=0;){var M=!0;for(f=0;f<i;f++)A[f]=a[f][h]|0,A[f]!==0&&(M=!1);if(!M)break;E++,h--}if(h>=0&&E++,m=m.dblp(E),h<0)break;for(f=0;f<i;f++){var _=A[f];_!==0&&(_>0?c=o[f][_-1>>1]:_<0&&(c=o[f][-_-1>>1].neg()),c.type==="affine"?m=m.mixedAdd(c):m=m.add(c))}}for(h=0;h<i;h++)o[h]=null;return e?m:m.toP()};function Ef(t,r){this.curve=t,this.type=r,this.precomputed=null}mf.BasePoint=Ef,Ef.prototype.eq=function(){throw new Error("Not implemented")},Ef.prototype.validate=function(){return this.curve.validate(this)},mf.prototype.decodePoint=function(t,r){t=pf.toArray(t,r);var n=this.p.byteLength();if((t[0]===4||t[0]===6||t[0]===7)&&t.length-1===2*n){t[0]===6?gf(t[t.length-1]%2===0):t[0]===7&&gf(t[t.length-1]%2===1);var i=this.point(t.slice(1,1+n),t.slice(1+n,1+2*n));return i}else if((t[0]===2||t[0]===3)&&t.length-1===n)return this.pointFromX(t.slice(1,1+n),t[0]===3);throw new Error("Unknown point format")},Ef.prototype.encodeCompressed=function(t){return this.encode(t,!0)},Ef.prototype._encode=function(t){var r=this.curve.p.byteLength(),n=this.getX().toArray("be",r);return t?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",r))},Ef.prototype.encode=function(t,r){return pf.encode(this._encode(r),t)},Ef.prototype.precompute=function(t){if(this.precomputed)return this;var r={doubles:null,naf:null,beta:null};return r.naf=this._getNAFPoints(8),r.doubles=this._getDoubles(4,t),r.beta=this._getBeta(),this.precomputed=r,this},Ef.prototype._hasDoubles=function(t){if(!this.precomputed)return!1;var r=this.precomputed.doubles;return r?r.points.length>=Math.ceil((t.bitLength()+1)/r.step):!1},Ef.prototype._getDoubles=function(t,r){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],i=this,e=0;e<r;e+=t){for(var s=0;s<t;s++)i=i.dbl();n.push(i)}return{step:t,points:n}},Ef.prototype._getNAFPoints=function(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var r=[this],n=(1<<t)-1,i=n===1?null:this.dbl(),e=1;e<n;e++)r[e]=r[e-1].add(i);return{wnd:t,points:r}},Ef.prototype._getBeta=function(){return null},Ef.prototype.dblp=function(t){for(var r=this,n=0;n<t;n++)r=r.dbl();return r};var Mf=cf((function(t){typeof Object.create=="function"?t.exports=function(t,r){r&&(t.super_=r,t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,r){if(r){t.super_=r;var n=function(){};n.prototype=r.prototype,t.prototype=new n,t.prototype.constructor=t}}})),_f=pf.assert;function Of(t){Af.call(this,"short",t),this.a=new wo(t.a,16).toRed(this.red),this.b=new wo(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}Mf(Of,Af);var If=Of;Of.prototype._getEndomorphism=function(t){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var r,n;if(t.beta)r=new wo(t.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);r=i[0].cmp(i[1])<0?i[0]:i[1],r=r.toRed(this.red)}if(t.lambda)n=new wo(t.lambda,16);else{var e=this._getEndoRoots(this.n);this.g.mul(e[0]).x.cmp(this.g.x.redMul(r))===0?n=e[0]:(n=e[1],_f(this.g.mul(n).x.cmp(this.g.x.redMul(r))===0))}var s;return t.basis?s=t.basis.map((function(t){return{a:new wo(t.a,16),b:new wo(t.b,16)}})):s=this._getEndoBasis(n),{beta:r,lambda:n,basis:s}}},Of.prototype._getEndoRoots=function(t){var r=t===this.p?this.red:wo.mont(t),n=new wo(2).toRed(r).redInvm(),i=n.redNeg(),e=new wo(3).toRed(r).redNeg().redSqrt().redMul(n),s=i.redAdd(e).fromRed(),o=i.redSub(e).fromRed();return[s,o]},Of.prototype._getEndoBasis=function(t){for(var r=this.n.ushrn(Math.floor(this.n.bitLength()/2)),n=t,i=this.n.clone(),e=new wo(1),s=new wo(0),o=new wo(0),a=new wo(1),u,h,f,c,l,d,v,w=0,p,y;n.cmpn(0)!==0;){var b=i.div(n);p=i.sub(b.mul(n)),y=o.sub(b.mul(e));var g=a.sub(b.mul(s));if(!f&&p.cmp(r)<0)u=v.neg(),h=e,f=p.neg(),c=y;else if(f&&++w===2)break;v=p,i=n,n=p,o=e,e=y,a=s,s=g}l=p.neg(),d=y;var m=f.sqr().add(c.sqr()),A=l.sqr().add(d.sqr());return A.cmp(m)>=0&&(l=u,d=h),f.negative&&(f=f.neg(),c=c.neg()),l.negative&&(l=l.neg(),d=d.neg()),[{a:f,b:c},{a:l,b:d}]},Of.prototype._endoSplit=function(t){var r=this.endo.basis,n=r[0],i=r[1],e=i.b.mul(t).divRound(this.n),s=n.b.neg().mul(t).divRound(this.n),o=e.mul(n.a),a=s.mul(i.a),u=e.mul(n.b),h=s.mul(i.b),f=t.sub(o).sub(a),c=u.add(h).neg();return{k1:f,k2:c}},Of.prototype.pointFromX=function(t,r){t=new wo(t,16),t.red||(t=t.toRed(this.red));var n=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b),i=n.redSqrt();if(i.redSqr().redSub(n).cmp(this.zero)!==0)throw new Error("invalid point");var e=i.fromRed().isOdd();return(r&&!e||!r&&e)&&(i=i.redNeg()),this.point(t,i)},Of.prototype.validate=function(t){if(t.inf)return!0;var r=t.x,n=t.y,i=this.a.redMul(r),e=r.redSqr().redMul(r).redIAdd(i).redIAdd(this.b);return n.redSqr().redISub(e).cmpn(0)===0},Of.prototype._endoWnafMulAdd=function(t,r,n){for(var i=this._endoWnafT1,e=this._endoWnafT2,s=0;s<t.length;s++){var o=this._endoSplit(r[s]),a=t[s],u=a._getBeta();o.k1.negative&&(o.k1.ineg(),a=a.neg(!0)),o.k2.negative&&(o.k2.ineg(),u=u.neg(!0)),i[s*2]=a,i[s*2+1]=u,e[s*2]=o.k1,e[s*2+1]=o.k2}for(var h=this._wnafMulAdd(1,i,e,s*2,n),f=0;f<s*2;f++)i[f]=null,e[f]=null;return h};function Sf(t,r,n,i){Af.BasePoint.call(this,t,"affine"),r===null&&n===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new wo(r,16),this.y=new wo(n,16),i&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}Mf(Sf,Af.BasePoint),Of.prototype.point=function(t,r,n){return new Sf(this,t,r,n)},Of.prototype.pointFromJSON=function(t,r){return Sf.fromJSON(this,t,r)},Sf.prototype._getBeta=function(){if(this.curve.endo){var t=this.precomputed;if(t&&t.beta)return t.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){var n=this.curve,i=function(t){return n.point(t.x.redMul(n.endo.beta),t.y)};t.beta=r,r.precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(i)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(i)}}}return r}},Sf.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},Sf.fromJSON=function(t,r,n){typeof r=="string"&&(r=JSON.parse(r));var i=t.point(r[0],r[1],n);if(!r[2])return i;function e(r){return t.point(r[0],r[1],n)}var s=r[2];return i.precomputed={beta:null,doubles:s.doubles&&{step:s.doubles.step,points:[i].concat(s.doubles.points.map(e))},naf:s.naf&&{wnd:s.naf.wnd,points:[i].concat(s.naf.points.map(e))}},i},Sf.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},Sf.prototype.isInfinity=function(){return this.inf},Sf.prototype.add=function(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t))return this.curve.point(null,null);if(this.x.cmp(t.x)===0)return this.curve.point(null,null);var r=this.y.redSub(t.y);r.cmpn(0)!==0&&(r=r.redMul(this.x.redSub(t.x).redInvm()));var n=r.redSqr().redISub(this.x).redISub(t.x),i=r.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,i)},Sf.prototype.dbl=function(){if(this.inf)return this;var t=this.y.redAdd(this.y);if(t.cmpn(0)===0)return this.curve.point(null,null);var r=this.curve.a,n=this.x.redSqr(),i=t.redInvm(),e=n.redAdd(n).redIAdd(n).redIAdd(r).redMul(i),s=e.redSqr().redISub(this.x.redAdd(this.x)),o=e.redMul(this.x.redSub(s)).redISub(this.y);return this.curve.point(s,o)},Sf.prototype.getX=function(){return this.x.fromRed()},Sf.prototype.getY=function(){return this.y.fromRed()},Sf.prototype.mul=function(t){return t=new wo(t,16),this.isInfinity()?this:this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve.endo?this.curve._endoWnafMulAdd([this],[t]):this.curve._wnafMul(this,t)},Sf.prototype.mulAdd=function(t,r,n){var i=[this,r],e=[t,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,e):this.curve._wnafMulAdd(1,i,e,2)},Sf.prototype.jmulAdd=function(t,r,n){var i=[this,r],e=[t,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,e,!0):this.curve._wnafMulAdd(1,i,e,2,!0)},Sf.prototype.eq=function(t){return this===t||this.inf===t.inf&&(this.inf||this.x.cmp(t.x)===0&&this.y.cmp(t.y)===0)},Sf.prototype.neg=function(t){if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){var n=this.precomputed,i=function(t){return t.neg()};r.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(i)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(i)}}}return r},Sf.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var t=this.curve.jpoint(this.x,this.y,this.curve.one);return t};function Nf(t,r,n,i){Af.BasePoint.call(this,t,"jacobian"),r===null&&n===null&&i===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new wo(0)):(this.x=new wo(r,16),this.y=new wo(n,16),this.z=new wo(i,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}Mf(Nf,Af.BasePoint),Of.prototype.jpoint=function(t,r,n){return new Nf(this,t,r,n)},Nf.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var t=this.z.redInvm(),r=t.redSqr(),n=this.x.redMul(r),i=this.y.redMul(r).redMul(t);return this.curve.point(n,i)},Nf.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},Nf.prototype.add=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var r=t.z.redSqr(),n=this.z.redSqr(),i=this.x.redMul(r),e=t.x.redMul(n),s=this.y.redMul(r.redMul(t.z)),o=t.y.redMul(n.redMul(this.z)),a=i.redSub(e),u=s.redSub(o);if(a.cmpn(0)===0)return u.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var h=a.redSqr(),f=h.redMul(a),c=i.redMul(h),l=u.redSqr().redIAdd(f).redISub(c).redISub(c),d=u.redMul(c.redISub(l)).redISub(s.redMul(f)),v=this.z.redMul(t.z).redMul(a);return this.curve.jpoint(l,d,v)},Nf.prototype.mixedAdd=function(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;var r=this.z.redSqr(),n=this.x,i=t.x.redMul(r),e=this.y,s=t.y.redMul(r).redMul(this.z),o=n.redSub(i),a=e.redSub(s);if(o.cmpn(0)===0)return a.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var u=o.redSqr(),h=u.redMul(o),f=n.redMul(u),c=a.redSqr().redIAdd(h).redISub(f).redISub(f),l=a.redMul(f.redISub(c)).redISub(e.redMul(h)),d=this.z.redMul(o);return this.curve.jpoint(c,l,d)},Nf.prototype.dblp=function(t){if(t===0)return this;if(this.isInfinity())return this;if(!t)return this.dbl();var r;if(this.curve.zeroA||this.curve.threeA){var n=this;for(r=0;r<t;r++)n=n.dbl();return n}var i=this.curve.a,e=this.curve.tinv,s=this.x,o=this.y,a=this.z,u=a.redSqr().redSqr(),h=o.redAdd(o);for(r=0;r<t;r++){var f=s.redSqr(),c=h.redSqr(),l=c.redSqr(),d=f.redAdd(f).redIAdd(f).redIAdd(i.redMul(u)),v=s.redMul(c),w=d.redSqr().redISub(v.redAdd(v)),p=v.redISub(w),y=d.redMul(p);y=y.redIAdd(y).redISub(l);var b=h.redMul(a);r+1<t&&(u=u.redMul(l)),s=w,a=b,h=y}return this.curve.jpoint(s,h.redMul(e),a)},Nf.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},Nf.prototype._zeroDbl=function(){var t,r,n;if(this.zOne){var i=this.x.redSqr(),e=this.y.redSqr(),s=e.redSqr(),o=this.x.redAdd(e).redSqr().redISub(i).redISub(s);o=o.redIAdd(o);var a=i.redAdd(i).redIAdd(i),u=a.redSqr().redISub(o).redISub(o),h=s.redIAdd(s);h=h.redIAdd(h),h=h.redIAdd(h),t=u,r=a.redMul(o.redISub(u)).redISub(h),n=this.y.redAdd(this.y)}else{var f=this.x.redSqr(),c=this.y.redSqr(),l=c.redSqr(),d=this.x.redAdd(c).redSqr().redISub(f).redISub(l);d=d.redIAdd(d);var v=f.redAdd(f).redIAdd(f),w=v.redSqr(),p=l.redIAdd(l);p=p.redIAdd(p),p=p.redIAdd(p),t=w.redISub(d).redISub(d),r=v.redMul(d.redISub(t)).redISub(p),n=this.y.redMul(this.z),n=n.redIAdd(n)}return this.curve.jpoint(t,r,n)},Nf.prototype._threeDbl=function(){var t,r,n;if(this.zOne){var i=this.x.redSqr(),e=this.y.redSqr(),s=e.redSqr(),o=this.x.redAdd(e).redSqr().redISub(i).redISub(s);o=o.redIAdd(o);var a=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),u=a.redSqr().redISub(o).redISub(o);t=u;var h=s.redIAdd(s);h=h.redIAdd(h),h=h.redIAdd(h),r=a.redMul(o.redISub(u)).redISub(h),n=this.y.redAdd(this.y)}else{var f=this.z.redSqr(),c=this.y.redSqr(),l=this.x.redMul(c),d=this.x.redSub(f).redMul(this.x.redAdd(f));d=d.redAdd(d).redIAdd(d);var v=l.redIAdd(l);v=v.redIAdd(v);var w=v.redAdd(v);t=d.redSqr().redISub(w),n=this.y.redAdd(this.z).redSqr().redISub(c).redISub(f);var p=c.redSqr();p=p.redIAdd(p),p=p.redIAdd(p),p=p.redIAdd(p),r=d.redMul(v.redISub(t)).redISub(p)}return this.curve.jpoint(t,r,n)},Nf.prototype._dbl=function(){var t=this.curve.a,r=this.x,n=this.y,i=this.z,e=i.redSqr().redSqr(),s=r.redSqr(),o=n.redSqr(),a=s.redAdd(s).redIAdd(s).redIAdd(t.redMul(e)),u=r.redAdd(r);u=u.redIAdd(u);var h=u.redMul(o),f=a.redSqr().redISub(h.redAdd(h)),c=h.redISub(f),l=o.redSqr();l=l.redIAdd(l),l=l.redIAdd(l),l=l.redIAdd(l);var d=a.redMul(c).redISub(l),v=n.redAdd(n).redMul(i);return this.curve.jpoint(f,d,v)},Nf.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var t=this.x.redSqr(),r=this.y.redSqr(),n=this.z.redSqr(),i=r.redSqr(),e=t.redAdd(t).redIAdd(t),s=e.redSqr(),o=this.x.redAdd(r).redSqr().redISub(t).redISub(i);o=o.redIAdd(o),o=o.redAdd(o).redIAdd(o),o=o.redISub(s);var a=o.redSqr(),u=i.redIAdd(i);u=u.redIAdd(u),u=u.redIAdd(u),u=u.redIAdd(u);var h=e.redIAdd(o).redSqr().redISub(s).redISub(a).redISub(u),f=r.redMul(h);f=f.redIAdd(f),f=f.redIAdd(f);var c=this.x.redMul(a).redISub(f);c=c.redIAdd(c),c=c.redIAdd(c);var l=this.y.redMul(h.redMul(u.redISub(h)).redISub(o.redMul(a)));l=l.redIAdd(l),l=l.redIAdd(l),l=l.redIAdd(l);var d=this.z.redAdd(o).redSqr().redISub(n).redISub(a);return this.curve.jpoint(c,l,d)},Nf.prototype.mul=function(t,r){return t=new wo(t,r),this.curve._wnafMul(this,t)},Nf.prototype.eq=function(t){if(t.type==="affine")return this.eq(t.toJ());if(this===t)return!0;var r=this.z.redSqr(),n=t.z.redSqr();if(this.x.redMul(n).redISub(t.x.redMul(r)).cmpn(0)!==0)return!1;var i=r.redMul(this.z),e=n.redMul(t.z);return this.y.redMul(e).redISub(t.y.redMul(i)).cmpn(0)===0},Nf.prototype.eqXToP=function(t){var r=this.z.redSqr(),n=t.toRed(this.curve.red).redMul(r);if(this.x.cmp(n)===0)return!0;for(var i=t.clone(),e=this.curve.redN.redMul(r);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(e),this.x.cmp(n)===0)return!0}},Nf.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},Nf.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var Cf=cf((function(t,r){var n=r;n.base=Af,n.short=If,n.mont=null,n.edwards=null})),jf=cf((function(t,r){var n=r,i=pf.assert;function e(t){t.type==="short"?this.curve=new Cf.short(t):t.type==="edwards"?this.curve=new Cf.edwards(t):this.curve=new Cf.mont(t),this.g=this.curve.g,this.n=this.curve.n,this.hash=t.hash,i(this.g.validate(),"Invalid curve"),i(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}n.PresetCurve=e;function s(t,r){Object.defineProperty(n,t,{configurable:!0,enumerable:!0,get:function(){var i=new e(r);return Object.defineProperty(n,t,{configurable:!0,enumerable:!0,value:i}),i}})}s("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:Ba.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),s("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:Ba.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),s("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:Ba.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),s("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:Ba.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),s("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:Ba.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),s("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Ba.sha256,gRed:!1,g:["9"]}),s("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Ba.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var o;try{o=null.crash()}catch{o=void 0}s("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:Ba.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",o]})}));function xf(t){if(!(this instanceof xf))return new xf(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var r=wf.toArray(t.entropy,t.entropyEnc||"hex"),n=wf.toArray(t.nonce,t.nonceEnc||"hex"),i=wf.toArray(t.pers,t.persEnc||"hex");df(r.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(r,n,i)}var Pf=xf;xf.prototype._init=function(t,r,n){var i=t.concat(r).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var e=0;e<this.V.length;e++)this.K[e]=0,this.V[e]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656},xf.prototype._hmac=function(){return new Ba.hmac(this.hash,this.K)},xf.prototype._update=function(t){var r=this._hmac().update(this.V).update([0]);t&&(r=r.update(t)),this.K=r.digest(),this.V=this._hmac().update(this.V).digest(),t&&(this.K=this._hmac().update(this.V).update([1]).update(t).digest(),this.V=this._hmac().update(this.V).digest())},xf.prototype.reseed=function(t,r,n,i){typeof r!="string"&&(i=n,n=r,r=null),t=wf.toArray(t,r),n=wf.toArray(n,i),df(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(t.concat(n||[])),this._reseed=1},xf.prototype.generate=function(t,r,n,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof r!="string"&&(i=n,n=r,r=null),n&&(n=wf.toArray(n,i||"hex"),this._update(n));for(var e=[];e.length<t;)this.V=this._hmac().update(this.V).digest(),e=e.concat(this.V);var s=e.slice(0,t);return this._update(n),this._reseed++,wf.encode(s,r)};var Tf=pf.assert;function Rf(t,r){this.ec=t,this.priv=null,this.pub=null,r.priv&&this._importPrivate(r.priv,r.privEnc),r.pub&&this._importPublic(r.pub,r.pubEnc)}var Df=Rf;Rf.fromPublic=function(t,r,n){return r instanceof Rf?r:new Rf(t,{pub:r,pubEnc:n})},Rf.fromPrivate=function(t,r,n){return r instanceof Rf?r:new Rf(t,{priv:r,privEnc:n})},Rf.prototype.validate=function(){var t=this.getPublic();return t.isInfinity()?{result:!1,reason:"Invalid public key"}:t.validate()?t.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},Rf.prototype.getPublic=function(t,r){return typeof t=="string"&&(r=t,t=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),r?this.pub.encode(r,t):this.pub},Rf.prototype.getPrivate=function(t){return t==="hex"?this.priv.toString(16,2):this.priv},Rf.prototype._importPrivate=function(t,r){this.priv=new wo(t,r||16),this.priv=this.priv.umod(this.ec.curve.n)},Rf.prototype._importPublic=function(t,r){if(t.x||t.y){this.ec.curve.type==="mont"?Tf(t.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&Tf(t.x&&t.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(t.x,t.y);return}this.pub=this.ec.curve.decodePoint(t,r)},Rf.prototype.derive=function(t){return t.validate()||Tf(t.validate(),"public point not validated"),t.mul(this.priv).getX()},Rf.prototype.sign=function(t,r,n){return this.ec.sign(t,this,r,n)},Rf.prototype.verify=function(t,r){return this.ec.verify(t,r,this)},Rf.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var Uf=pf.assert;function Bf(t,r){if(t instanceof Bf)return t;this._importDER(t,r)||(Uf(t.r&&t.s,"Signature without r or s"),this.r=new wo(t.r,16),this.s=new wo(t.s,16),t.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}var kf=Bf;function $f(){this.place=0}function Ff(t,r){var n=t[r.place++];if(!(n&128))return n;var i=n&15;if(i===0||i>4)return!1;for(var e=0,s=0,o=r.place;s<i;s++,o++)e<<=8,e|=t[o],e>>>=0;return e<=127?!1:(r.place=o,e)}function qf(t){for(var r=0,n=t.length-1;!t[r]&&!(t[r+1]&128)&&r<n;)r++;return r===0?t:t.slice(r)}Bf.prototype._importDER=function(t,r){t=pf.toArray(t,r);var n=new $f;if(t[n.place++]!==48)return!1;var i=Ff(t,n);if(i===!1||i+n.place!==t.length||t[n.place++]!==2)return!1;var e=Ff(t,n);if(e===!1)return!1;var s=t.slice(n.place,e+n.place);if(n.place+=e,t[n.place++]!==2)return!1;var o=Ff(t,n);if(o===!1||t.length!==o+n.place)return!1;var a=t.slice(n.place,o+n.place);if(s[0]===0)if(s[1]&128)s=s.slice(1);else return!1;if(a[0]===0)if(a[1]&128)a=a.slice(1);else return!1;return this.r=new wo(s),this.s=new wo(a),this.recoveryParam=null,!0};function Lf(t,r){if(r<128){t.push(r);return}var n=1+(Math.log(r)/Math.LN2>>>3);for(t.push(n|128);--n;)t.push(r>>>(n<<3)&255);t.push(r)}Bf.prototype.toDER=function(t){var r=this.r.toArray(),n=this.s.toArray();for(r[0]&128&&(r=[0].concat(r)),n[0]&128&&(n=[0].concat(n)),r=qf(r),n=qf(n);!n[0]&&!(n[1]&128);)n=n.slice(1);var i=[2];Lf(i,r.length),i=i.concat(r),i.push(2),Lf(i,n.length);var e=i.concat(n),s=[48];return Lf(s,e.length),s=s.concat(e),pf.encode(s,t)};var Kf=function(){throw new Error("unsupported")},Hf=pf.assert;function Gf(t){if(!(this instanceof Gf))return new Gf(t);typeof t=="string"&&(Hf(Object.prototype.hasOwnProperty.call(jf,t),"Unknown curve "+t),t=jf[t]),t instanceof jf.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}var Qf=Gf;Gf.prototype.keyPair=function(t){return new Df(this,t)},Gf.prototype.keyFromPrivate=function(t,r){return Df.fromPrivate(this,t,r)},Gf.prototype.keyFromPublic=function(t,r){return Df.fromPublic(this,t,r)},Gf.prototype.genKeyPair=function(t){t||(t={});for(var r=new Pf({hash:this.hash,pers:t.pers,persEnc:t.persEnc||"utf8",entropy:t.entropy||Kf(),entropyEnc:t.entropy&&t.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),i=this.n.sub(new wo(2));;){var e=new wo(r.generate(n));if(!(e.cmp(i)>0))return e.iaddn(1),this.keyFromPrivate(e)}},Gf.prototype._truncateToN=function(t,r){var n=t.byteLength()*8-this.n.bitLength();return n>0&&(t=t.ushrn(n)),!r&&t.cmp(this.n)>=0?t.sub(this.n):t},Gf.prototype.sign=function(t,r,n,i){typeof n=="object"&&(i=n,n=null),i||(i={}),r=this.keyFromPrivate(r,n),t=this._truncateToN(new wo(t,16));for(var e=this.n.byteLength(),s=r.getPrivate().toArray("be",e),o=t.toArray("be",e),a=new Pf({hash:this.hash,entropy:s,nonce:o,pers:i.pers,persEnc:i.persEnc||"utf8"}),u=this.n.sub(new wo(1)),h=0;;h++){var f=i.k?i.k(h):new wo(a.generate(this.n.byteLength()));if(f=this._truncateToN(f,!0),!(f.cmpn(1)<=0||f.cmp(u)>=0)){var c=this.g.mul(f);if(!c.isInfinity()){var l=c.getX(),d=l.umod(this.n);if(d.cmpn(0)!==0){var v=f.invm(this.n).mul(d.mul(r.getPrivate()).iadd(t));if(v=v.umod(this.n),v.cmpn(0)!==0){var w=(c.getY().isOdd()?1:0)|(l.cmp(d)!==0?2:0);return i.canonical&&v.cmp(this.nh)>0&&(v=this.n.sub(v),w^=1),new kf({r:d,s:v,recoveryParam:w})}}}}}},Gf.prototype.verify=function(t,r,n,i){t=this._truncateToN(new wo(t,16)),n=this.keyFromPublic(n,i),r=new kf(r,"hex");var e=r.r,s=r.s;if(e.cmpn(1)<0||e.cmp(this.n)>=0||s.cmpn(1)<0||s.cmp(this.n)>=0)return!1;var o=s.invm(this.n),a=o.mul(t).umod(this.n),u=o.mul(e).umod(this.n),h;return this.curve._maxwellTrick?(h=this.g.jmulAdd(a,n.getPublic(),u),h.isInfinity()?!1:h.eqXToP(e)):(h=this.g.mulAdd(a,n.getPublic(),u),h.isInfinity()?!1:h.getX().umod(this.n).cmp(e)===0)},Gf.prototype.recoverPubKey=function(t,r,n,i){Hf((3&n)===n,"The recovery param is more than two bits"),r=new kf(r,i);var e=this.n,s=new wo(t),o=r.r,a=r.s,u=n&1,h=n>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&h)throw new Error("Unable to find sencond key candinate");h?o=this.curve.pointFromX(o.add(this.curve.n),u):o=this.curve.pointFromX(o,u);var f=r.r.invm(e),c=e.sub(s).mul(f).umod(e),l=a.mul(f).umod(e);return this.g.mulAdd(c,o,l)},Gf.prototype.getKeyRecoveryParam=function(t,r,n,i){if(r=new kf(r,i),r.recoveryParam!==null)return r.recoveryParam;for(var e=0;e<4;e++){var s;try{s=this.recoverPubKey(t,r,e)}catch{continue}if(s.eq(n))return e}throw new Error("Unable to find valid recovery factor")};var Jf=cf((function(t,r){var n=r;n.version="6.5.4",n.utils=pf,n.rand=function(){throw new Error("unsupported")},n.curve=Cf,n.curves=jf,n.ec=Qf,n.eddsa=null})),Vf=Jf.ec;const zf="signing-key/5.7.0",Yf=new Gs(zf);let Wf=null;function Xf(){return Wf||(Wf=new Vf("secp256k1")),Wf}class Zf{constructor(t){Ta(this,"curve","secp256k1"),Ta(this,"privateKey",eo(t)),so(this.privateKey)!==32&&Yf.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");const r=Xf().keyFromPrivate(Zs(this.privateKey));Ta(this,"publicKey","0x"+r.getPublic(!1,"hex")),Ta(this,"compressedPublicKey","0x"+r.getPublic(!0,"hex")),Ta(this,"_isSigningKey",!0)}_addPoint(t){const r=Xf().keyFromPublic(Zs(this.publicKey)),n=Xf().keyFromPublic(Zs(t));return"0x"+r.pub.add(n.pub).encodeCompressed("hex")}signDigest(t){const r=Xf().keyFromPrivate(Zs(this.privateKey)),n=Zs(t);n.length!==32&&Yf.throwArgumentError("bad digest length","digest",t);const i=r.sign(n,{canonical:!0});return uo({recoveryParam:i.recoveryParam,r:ao("0x"+i.r.toString(16),32),s:ao("0x"+i.s.toString(16),32)})}computeSharedSecret(t){const r=Xf().keyFromPrivate(Zs(this.privateKey)),n=Xf().keyFromPublic(Zs(rc(t)));return ao("0x"+r.derive(n.getPublic()).toString(16),32)}static isSigningKey(t){return!!(t&&t._isSigningKey)}}function tc(t,r){const n=uo(r),i={r:Zs(n.r),s:Zs(n.s)};return"0x"+Xf().recoverPubKey(Zs(t),i,n.recoveryParam).encode("hex",!1)}function rc(t,r){const n=Zs(t);if(n.length===32){const t=new Zf(n);return r?"0x"+Xf().keyFromPrivate(n).getPublic(!0,"hex"):t.publicKey}else{if(n.length===33)return r?eo(n):"0x"+Xf().keyFromPublic(n).getPublic(!1,"hex");if(n.length===65)return r?"0x"+Xf().keyFromPublic(n).getPublic(!0,"hex"):eo(n)}return Yf.throwArgumentError("invalid public or private key","key","[REDACTED]")}const nc="transactions/5.7.0";new Gs(nc);var ic;(function(t){t[t.legacy=0]="legacy",t[t.eip2930=1]="eip2930",t[t.eip1559=2]="eip1559"})(ic||(ic={}));function ec(t){const r=rc(t);return xa(oo(ho(oo(r,1)),12))}function sc(t,r){return ec(tc(Zs(t),r))}const oc="https://rpc.walletconnect.com/v1";async function ac(t,r,n,i,e,s){switch(n.t){case"eip191":return uc(t,r,n.s);case"eip1271":return await hc(t,r,n.s,i,e,s);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${n.t}`)}}function uc(t,r,n){return sc(Aa(r),n).toLowerCase()===t.toLowerCase()}async function hc(t,r,n,i,e,s){try{const o="0x1626ba7e",a="0000000000000000000000000000000000000000000000000000000000000040",u="0000000000000000000000000000000000000000000000000000000000000041",h=n.substring(2),f=Aa(r).substring(2),c=o+f+a+u+h,l=await fetch(`${s||oc}/?chainId=${i}&projectId=${e}`,{method:"POST",body:JSON.stringify({id:fc(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:c},"latest"]})}),{result:d}=await l.json();return d?d.slice(0,o.length).toLowerCase()===o.toLowerCase():!1}catch(t){return console.error("isValidEip1271Signature: ",t),!1}}function fc(){return Date.now()+Math.floor(Math.random()*1e3)}var cc=Object.defineProperty,lc=Object.defineProperties,dc=Object.getOwnPropertyDescriptors,vc=Object.getOwnPropertySymbols,wc=Object.prototype.hasOwnProperty,pc=Object.prototype.propertyIsEnumerable,yc=(t,r,n)=>r in t?cc(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n,bc=(t,r)=>{for(var n in r||(r={}))wc.call(r,n)&&yc(t,n,r[n]);if(vc)for(var n of vc(r))pc.call(r,n)&&yc(t,n,r[n]);return t},gc=(t,r)=>lc(t,dc(r));const mc="did:pkh:",Ac=t=>t?.split(":"),Ec=t=>{const r=t&&Ac(t);if(r)return t.includes(mc)?r[3]:r[1]},Mc=t=>{const r=t&&Ac(t);if(r)return r[2]+":"+r[3]},_c=t=>{const r=t&&Ac(t);if(r)return r.pop()};async function Oc(t){const{cacao:r,projectId:n}=t,{s:i,p:e}=r,s=Ic(e,e.iss),o=_c(e.iss);return await ac(o,s,i,Ec(e.iss),n)}const Ic=(t,r)=>{const n=`${t.domain} wants you to sign in with your Ethereum account:`,i=_c(r);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let e=t.statement||void 0;const s=`URI: ${t.aud||t.uri}`,o=`Version: ${t.version}`,a=`Chain ID: ${Ec(r)}`,u=`Nonce: ${t.nonce}`,h=`Issued At: ${t.iat}`,f=t.resources?`Resources:${t.resources.map((t=>`\n- ${t}`)).join("")}`:void 0,c=qc(t.resources);if(c){const t=Tc(c);e=kc(e,t)}return[n,i,"",e,"",s,o,a,u,h,f].filter((t=>t!=null)).join(`\n`)};function Sc(t){return w.Buffer.from(JSON.stringify(t)).toString("base64")}function Nc(t){return JSON.parse(w.Buffer.from(t,"base64").toString("utf-8"))}function Cc(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const r=Object.keys(t.att);if(!(r!=null&&r.length))throw new Error("No resources found in `att` property");r.forEach((r=>{const n=t.att[r];if(Array.isArray(n))throw new Error(`Resource must be an object: ${r}`);if(typeof n!="object")throw new Error(`Resource must be an object: ${r}`);if(!Object.keys(n).length)throw new Error(`Resource object is empty: ${r}`);Object.keys(n).forEach((t=>{const r=n[t];if(!Array.isArray(r))throw new Error(`Ability limits ${t} must be an array of objects, found: ${r}`);if(!r.length)throw new Error(`Value of ${t} is empty array, must be an array with objects`);r.forEach((r=>{if(typeof r!="object")throw new Error(`Ability limits (${t}) must be an array of objects, found: ${r}`)}))}))}))}function jc(t,r,n,i={}){return n?.sort(((t,r)=>t.localeCompare(r))),{att:{[t]:xc(r,n,i)}}}function xc(t,r,n={}){r=r?.sort(((t,r)=>t.localeCompare(r)));const i=r.map((r=>({[`${t}/${r}`]:[n]})));return Object.assign({},...i)}function Pc(t){return Cc(t),`urn:recap:${Sc(t).replace(/=/g,"")}`}function Tc(t){const r=Nc(t.replace("urn:recap:",""));return Cc(r),r}function Rc(t,r,n){const i=jc(t,r,n);return Pc(i)}function Dc(t){return t&&t.includes("urn:recap:")}function Uc(t,r){const n=Tc(t),i=Tc(r),e=Bc(n,i);return Pc(e)}function Bc(t,r){Cc(t),Cc(r);const n=Object.keys(t.att).concat(Object.keys(r.att)).sort(((t,r)=>t.localeCompare(r))),i={att:{}};return n.forEach((n=>{var e,s;Object.keys(((e=t.att)==null?void 0:e[n])||{}).concat(Object.keys(((s=r.att)==null?void 0:s[n])||{})).sort(((t,r)=>t.localeCompare(r))).forEach((e=>{var s,o;i.att[n]=gc(bc({},i.att[n]),{[e]:((s=t.att[n])==null?void 0:s[e])||((o=r.att[n])==null?void 0:o[e])})}))})),i}function kc(t="",r){Cc(r);const n="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(n))return t;const i=[];let e=0;Object.keys(r.att).forEach((t=>{const n=Object.keys(r.att[t]).map((t=>({ability:t.split("/")[0],action:t.split("/")[1]})));n.sort(((t,r)=>t.action.localeCompare(r.action)));const s={};n.forEach((t=>{s[t.ability]||(s[t.ability]=[]),s[t.ability].push(t.action)}));const o=Object.keys(s).map((r=>(e++,`(${e}) '${r}': '${s[r].join("', '")}' for '${t}'.`)));i.push(o.join(", ").replace(".,","."))}));const s=i.join(" "),o=`${n}${s}`;return`${t?t+" ":""}${o}`}function $c(t){var r;const n=Tc(t);Cc(n);const i=(r=n.att)==null?void 0:r.eip155;return i?Object.keys(i).map((t=>t.split("/")[1])):[]}function Fc(t){const r=Tc(t);Cc(r);const n=[];return Object.values(r.att).forEach((t=>{Object.values(t).forEach((t=>{var r;(r=t?.[0])!=null&&r.chains&&n.push(t[0].chains)}))})),[...new Set(n.flat())]}function qc(t){if(!t)return;const r=t?.[t.length-1];return Dc(r)?r:void 0}const Lc="base10",Kc="base16",Hc="base64pad",Gc="utf8",Qc=0,Jc=1,Vc=0,zc=1,Yc=12,Wc=32;function Xc(){const t=On.generateKeyPair();return{privateKey:Ke(t.secretKey,Kc),publicKey:Ke(t.publicKey,Kc)}}function Zc(){const t=fn.randomBytes(Wc);return Ke(t,Kc)}function tl(t,r){const n=On.sharedKey(Le(t,Kc),Le(r,Kc),!0),i=new hn(_n.SHA256,n).expand(Wc);return Ke(i,Kc)}function rl(t){const r=_n.hash(Le(t,Kc));return Ke(r,Kc)}function nl(t){const r=_n.hash(Le(t,Gc));return Ke(r,Kc)}function il(t){return Le(`${t}`,Lc)}function el(t){return Number(Ke(t,Lc))}function sl(t){const r=il(typeof t.type<"u"?t.type:Qc);if(el(r)===Jc&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof t.senderPublicKey<"u"?Le(t.senderPublicKey,Kc):void 0,i=typeof t.iv<"u"?Le(t.iv,Kc):fn.randomBytes(Yc),e=new tr.ChaCha20Poly1305(Le(t.symKey,Kc)).seal(i,Le(t.message,Gc));return al({type:r,sealed:e,iv:i,senderPublicKey:n})}function ol(t){const r=new tr.ChaCha20Poly1305(Le(t.symKey,Kc)),{sealed:n,iv:i}=ul(t.encoded),e=r.open(i,n);if(e===null)throw new Error("Failed to decrypt");return Ke(e,Gc)}function al(t){if(el(t.type)===Jc){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return Ke(qe([t.type,t.senderPublicKey,t.iv,t.sealed]),Hc)}return Ke(qe([t.type,t.iv,t.sealed]),Hc)}function ul(t){const r=Le(t,Hc),n=r.slice(Vc,zc),i=zc;if(el(n)===Jc){const t=i+Wc,e=t+Yc,s=r.slice(i,t),o=r.slice(t,e),a=r.slice(e);return{type:n,sealed:a,iv:o,senderPublicKey:s}}const e=i+Yc,s=r.slice(i,e),o=r.slice(e);return{type:n,sealed:o,iv:s}}function hl(t,r){const n=ul(t);return fl({type:el(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?Ke(n.senderPublicKey,Kc):void 0,receiverPublicKey:r?.receiverPublicKey})}function fl(t){const r=t?.type||Qc;if(r===Jc){if(typeof t?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof t?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:r,senderPublicKey:t?.senderPublicKey,receiverPublicKey:t?.receiverPublicKey}}function cl(t){return t.type===Jc&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}const ll="irn";function dl(t){return t?.relay||{protocol:ll}}function vl(t){const r=He[t];if(typeof r>"u")throw new Error(`Relay Protocol not supported: ${t}`);return r}var wl=Object.defineProperty,pl=Object.defineProperties,yl=Object.getOwnPropertyDescriptors,bl=Object.getOwnPropertySymbols,gl=Object.prototype.hasOwnProperty,ml=Object.prototype.propertyIsEnumerable,Al=(t,r,n)=>r in t?wl(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n,El=(t,r)=>{for(var n in r||(r={}))gl.call(r,n)&&Al(t,n,r[n]);if(bl)for(var n of bl(r))ml.call(r,n)&&Al(t,n,r[n]);return t},Ml=(t,r)=>pl(t,yl(r));function _l(t,r="-"){const n={},i="relay"+r;return Object.keys(t).forEach((r=>{if(r.startsWith(i)){const e=r.replace(i,""),s=t[r];n[e]=s}})),n}function Ol(t){t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const r=t.indexOf(":"),n=t.indexOf("?")!==-1?t.indexOf("?"):void 0,i=t.substring(0,r),e=t.substring(r+1,n).split("@"),s=typeof n<"u"?t.substring(n):"",o=Kt.parse(s),a=typeof o.methods=="string"?o.methods.split(","):void 0;return{protocol:i,topic:Il(e[0]),version:parseInt(e[1],10),symKey:o.symKey,relay:_l(o),methods:a,expiryTimestamp:o.expiryTimestamp?parseInt(o.expiryTimestamp,10):void 0}}function Il(t){return t.startsWith("//")?t.substring(2):t}function Sl(t,r="-"){const n="relay",i={};return Object.keys(t).forEach((e=>{const s=n+r+e;t[e]&&(i[s]=t[e])})),i}function Nl(t){return`${t.protocol}:${t.topic}@${t.version}?`+Kt.stringify(El(Ml(El({symKey:t.symKey},Sl(t.relay)),{expiryTimestamp:t.expiryTimestamp}),t.methods?{methods:t.methods.join(",")}:{}))}function Cl(t){const r=[];return t.forEach((t=>{const[n,i]=t.split(":");r.push(`${n}:${i}`)})),r}function jl(t){const r=[];return Object.values(t).forEach((t=>{r.push(...Cl(t.accounts))})),r}function xl(t,r){const n=[];return Object.values(t).forEach((t=>{Cl(t.accounts).includes(r)&&n.push(...t.methods)})),n}function Pl(t,r){const n=[];return Object.values(t).forEach((t=>{Cl(t.accounts).includes(r)&&n.push(...t.events)})),n}function Tl(t){return t.includes(":")}function Rl(t){return Tl(t)?t.split(":")[0]:t}function Dl(t){const r={};return t?.forEach((t=>{const[n,i]=t.split(":");r[n]||(r[n]={accounts:[],chains:[],events:[]}),r[n].accounts.push(t),r[n].chains.push(`${n}:${i}`)})),r}function Ul(t,r){r=r.map((t=>t.replace("did:pkh:","")));const n=Dl(r);for(const[r,i]of Object.entries(n))i.methods?i.methods=Ss(i.methods,t):i.methods=t,i.events=["chainChanged","accountsChanged"];return n}const Bl={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},kl={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function $l(t,r){const{message:n,code:i}=kl[t];return{message:r?`${n} ${r}`:n,code:i}}function Fl(t,r){const{message:n,code:i}=Bl[t];return{message:r?`${n} ${r}`:n,code:i}}function ql(t,r){return Array.isArray(t)?typeof r<"u"&&t.length?t.every(r):!0:!1}function Ll(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function Kl(t){return typeof t>"u"}function Hl(t,r){return r&&Kl(t)?!0:typeof t=="string"&&!!t.trim().length}function Gl(t,r){return r&&Kl(t)?!0:typeof t=="number"&&!isNaN(t)}function Ql(t,r){const{requiredNamespaces:n}=r,i=Object.keys(t.namespaces),e=Object.keys(n);let s=!0;return ws(e,i)?(i.forEach((r=>{const{accounts:i,methods:e,events:o}=t.namespaces[r],a=Cl(i),u=n[r];(!ws(Ve(r,u),a)||!ws(u.methods,e)||!ws(u.events,o))&&(s=!1)})),s):!1}function Jl(t){return Hl(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function Vl(t){if(Hl(t,!1)&&t.includes(":")){const r=t.split(":");if(r.length===3){const t=r[0]+":"+r[1];return!!r[2]&&Jl(t)}}return!1}function zl(t){if(Hl(t,!1))try{return typeof new URL(t)<"u"}catch{return!1}return!1}function Yl(t){var r;return(r=t?.proposer)==null?void 0:r.publicKey}function Wl(t){return t?.topic}function Xl(t,r){let n=null;return Hl(t?.publicKey,!1)||(n=$l("MISSING_OR_INVALID",`${r} controller public key should be a string`)),n}function Zl(t){let r=!0;return ql(t)?t.length&&(r=t.every((t=>Hl(t,!1)))):r=!1,r}function td(t,r,n){let i=null;return ql(r)&&r.length?r.forEach((t=>{i||Jl(t)||(i=Fl("UNSUPPORTED_CHAINS",`${n}, chain ${t} should be a string and conform to "namespace:chainId" format`))})):Jl(t)||(i=Fl("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),i}function rd(t,r,n){let i=null;return Object.entries(t).forEach((([t,e])=>{if(i)return;const s=td(t,Ve(t,e),`${r} ${n}`);s&&(i=s)})),i}function nd(t,r){let n=null;return ql(t)?t.forEach((t=>{n||Vl(t)||(n=Fl("UNSUPPORTED_ACCOUNTS",`${r}, account ${t} should be a string and conform to "namespace:chainId:address" format`))})):n=Fl("UNSUPPORTED_ACCOUNTS",`${r}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function id(t,r){let n=null;return Object.values(t).forEach((t=>{if(n)return;const i=nd(t?.accounts,`${r} namespace`);i&&(n=i)})),n}function ed(t,r){let n=null;return Zl(t?.methods)?Zl(t?.events)||(n=Fl("UNSUPPORTED_EVENTS",`${r}, events should be an array of strings or empty array for no events`)):n=Fl("UNSUPPORTED_METHODS",`${r}, methods should be an array of strings or empty array for no methods`),n}function sd(t,r){let n=null;return Object.values(t).forEach((t=>{if(n)return;const i=ed(t,`${r}, namespace`);i&&(n=i)})),n}function od(t,r,n){let i=null;if(t&&Ll(t)){const e=sd(t,r);e&&(i=e);const s=rd(t,r,n);s&&(i=s)}else i=$l("MISSING_OR_INVALID",`${r}, ${n} should be an object with data`);return i}function ad(t,r){let n=null;if(t&&Ll(t)){const i=sd(t,r);i&&(n=i);const e=id(t,r);e&&(n=e)}else n=$l("MISSING_OR_INVALID",`${r}, namespaces should be an object with data`);return n}function ud(t){return Hl(t.protocol,!0)}function hd(t,r){let n=!1;return r&&!t?n=!0:t&&ql(t)&&t.length&&t.forEach((t=>{n=ud(t)})),n}function fd(t){return typeof t=="number"}function cd(t){return typeof t<"u"&&typeof t!==null}function ld(t){return!(!t||typeof t!="object"||!t.code||!Gl(t.code,!1)||!t.message||!Hl(t.message,!1))}function dd(t){return!(Kl(t)||!Hl(t.method,!1))}function vd(t){return!(Kl(t)||Kl(t.result)&&Kl(t.error)||!Gl(t.id,!1)||!Hl(t.jsonrpc,!1))}function wd(t){return!(Kl(t)||!Hl(t.name,!1))}function pd(t,r){return!(!Jl(r)||!jl(t).includes(r))}function yd(t,r,n){return Hl(n,!1)?xl(t,r).includes(n):!1}function bd(t,r,n){return Hl(n,!1)?Pl(t,r).includes(n):!1}function gd(t,r,n){let i=null;const e=md(t),s=Ed(r),o=Object.keys(e),a=Object.keys(s),u=Ad(Object.keys(t)),h=Ad(Object.keys(r)),f=u.filter((t=>!h.includes(t)));return f.length&&(i=$l("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.\n      Required: ${f.toString()}\n      Received: ${Object.keys(r).toString()}`)),ws(o,a)||(i=$l("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.\n      Required: ${o.toString()}\n      Approved: ${a.toString()}`)),Object.keys(r).forEach((t=>{if(!t.includes(":")||i)return;const e=Cl(r[t].accounts);e.includes(t)||(i=$l("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${t}\n        Required: ${t}\n        Approved: ${e.toString()}`))})),o.forEach((t=>{i||(ws(e[t].methods,s[t].methods)?ws(e[t].events,s[t].events)||(i=$l("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${t}`)):i=$l("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${t}`))})),i}function md(t){const r={};return Object.keys(t).forEach((n=>{var i;n.includes(":")?r[n]=t[n]:(i=t[n].chains)==null||i.forEach((i=>{r[i]={methods:t[n].methods,events:t[n].events}}))})),r}function Ad(t){return[...new Set(t.map((t=>t.includes(":")?t.split(":")[0]:t)))]}function Ed(t){const r={};return Object.keys(t).forEach((n=>{if(n.includes(":"))r[n]=t[n];else{const i=Cl(t[n].accounts);i?.forEach((i=>{r[i]={accounts:t[n].accounts.filter((t=>t.includes(`${i}:`))),methods:t[n].methods,events:t[n].events}}))}})),r}function Md(t,r){return Gl(t,!1)&&t<=r.max&&t>=r.min}function _d(){const t=as();return new Promise((r=>{switch(t){case ns.browser:r(Od());break;case ns.reactNative:r(Id());break;case ns.node:r(Sd());break;default:r(!0)}}))}function Od(){return os()&&navigator?.onLine}async function Id(){if(ss()&&typeof v<"u"&&v!=null&&v.NetInfo){const t=await(v==null?void 0:v.NetInfo.fetch());return t?.isConnected}return!0}function Sd(){return!0}function Nd(t){switch(as()){case ns.browser:Cd(t);break;case ns.reactNative:jd(t);break}}function Cd(t){!ss()&&os()&&(window.addEventListener("online",(()=>t(!0))),window.addEventListener("offline",(()=>t(!1))))}function jd(t){ss()&&typeof v<"u"&&v!=null&&v.NetInfo&&v?.NetInfo.addEventListener((r=>t(r?.isConnected)))}const xd={};class Pd{static get(t){return xd[t]}static set(t,r){xd[t]=r}static delete(t){delete xd[t]}}const Td=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/;const Rd=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;const Dd=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function Ud(t,r){if(t==="__proto__"||t==="constructor"&&r&&typeof r==="object"&&"prototype"in r){Bd(t);return}return r}function Bd(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function kd(t,r={}){if(typeof t!=="string"){return t}const n=t.trim();if(t[0]==='"'&&t.endsWith('"')&&!t.includes("\\")){return n.slice(1,-1)}if(n.length<=9){const t=n.toLowerCase();if(t==="true"){return true}if(t==="false"){return false}if(t==="undefined"){return void 0}if(t==="null"){return null}if(t==="nan"){return Number.NaN}if(t==="infinity"){return Number.POSITIVE_INFINITY}if(t==="-infinity"){return Number.NEGATIVE_INFINITY}}if(!Dd.test(t)){if(r.strict){throw new SyntaxError("[destr] Invalid JSON")}return t}try{if(Td.test(t)||Rd.test(t)){if(r.strict){throw new Error("[destr] Possible prototype pollution")}return JSON.parse(t,Ud)}return JSON.parse(t)}catch(n){if(r.strict){throw n}return t}}function $d(t){if(!t||typeof t.then!=="function"){return Promise.resolve(t)}return t}function Fd(t,...r){try{return $d(t(...r))}catch(t){return Promise.reject(t)}}function qd(t){const r=typeof t;return t===null||r!=="object"&&r!=="function"}function Ld(t){const r=Object.getPrototypeOf(t);return!r||r.isPrototypeOf(Object)}function Kd(t){if(qd(t)){return String(t)}if(Ld(t)||Array.isArray(t)){return JSON.stringify(t)}if(typeof t.toJSON==="function"){return Kd(t.toJSON())}throw new Error("[unstorage] Cannot stringify value!")}function Hd(){if(typeof Buffer===void 0){throw new TypeError("[unstorage] Buffer is not supported!")}}const Gd="base64:";function Qd(t){if(typeof t==="string"){return t}Hd();const r=Buffer.from(t).toString("base64");return Gd+r}function Jd(t){if(typeof t!=="string"){return t}if(!t.startsWith(Gd)){return t}Hd();return Buffer.from(t.slice(Gd.length),"base64")}function Vd(t){if(!t){return""}return t.split("?")[0].replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,"")}function zd(...t){return Vd(t.join(":"))}function Yd(t){t=Vd(t);return t?t+":":""}function Wd(t){return t}const Xd="memory";const Zd=Wd((()=>{const t=new Map;return{name:Xd,options:{},hasItem(r){return t.has(r)},getItem(r){return t.get(r)??null},getItemRaw(r){return t.get(r)??null},setItem(r,n){t.set(r,n)},setItemRaw(r,n){t.set(r,n)},removeItem(r){t.delete(r)},getKeys(){return Array.from(t.keys())},clear(){t.clear()},dispose(){t.clear()}}}));function tv(t={}){const r={mounts:{"":t.driver||Zd()},mountpoints:[""],watching:false,watchListeners:[],unwatch:{}};const n=t=>{for(const n of r.mountpoints){if(t.startsWith(n)){return{base:n,relativeKey:t.slice(n.length),driver:r.mounts[n]}}}return{base:"",relativeKey:t,driver:r.mounts[""]}};const i=(t,n)=>r.mountpoints.filter((r=>r.startsWith(t)||n&&t.startsWith(r))).map((n=>({relativeBase:t.length>n.length?t.slice(n.length):void 0,mountpoint:n,driver:r.mounts[n]})));const e=(t,n)=>{if(!r.watching){return}n=Vd(n);for(const i of r.watchListeners){i(t,n)}};const s=async()=>{if(r.watching){return}r.watching=true;for(const t in r.mounts){r.unwatch[t]=await rv(r.mounts[t],e,t)}};const o=async()=>{if(!r.watching){return}for(const t in r.unwatch){await r.unwatch[t]()}r.unwatch={};r.watching=false};const a=(t,r,i)=>{const e=new Map;const s=t=>{let r=e.get(t.base);if(!r){r={driver:t.driver,base:t.base,items:[]};e.set(t.base,r)}return r};for(const i of t){const t=typeof i==="string";const e=Vd(t?i:i.key);const o=t?void 0:i.value;const a=t||!i.options?r:{...r,...i.options};const u=n(e);s(u).items.push({key:e,value:o,relativeKey:u.relativeKey,options:a})}return Promise.all([...e.values()].map((t=>i(t)))).then((t=>t.flat()))};const u={hasItem(t,r={}){t=Vd(t);const{relativeKey:i,driver:e}=n(t);return Fd(e.hasItem,i,r)},getItem(t,r={}){t=Vd(t);const{relativeKey:i,driver:e}=n(t);return Fd(e.getItem,i,r).then((t=>kd(t)))},getItems(t,r){return a(t,r,(t=>{if(t.driver.getItems){return Fd(t.driver.getItems,t.items.map((t=>({key:t.relativeKey,options:t.options}))),r).then((r=>r.map((r=>({key:zd(t.base,r.key),value:kd(r.value)})))))}return Promise.all(t.items.map((r=>Fd(t.driver.getItem,r.relativeKey,r.options).then((t=>({key:r.key,value:kd(t)}))))))}))},getItemRaw(t,r={}){t=Vd(t);const{relativeKey:i,driver:e}=n(t);if(e.getItemRaw){return Fd(e.getItemRaw,i,r)}return Fd(e.getItem,i,r).then((t=>Jd(t)))},async setItem(t,r,i={}){if(r===void 0){return u.removeItem(t)}t=Vd(t);const{relativeKey:s,driver:o}=n(t);if(!o.setItem){return}await Fd(o.setItem,s,Kd(r),i);if(!o.watch){e("update",t)}},async setItems(t,r){await a(t,r,(async t=>{if(t.driver.setItems){return Fd(t.driver.setItems,t.items.map((t=>({key:t.relativeKey,value:Kd(t.value),options:t.options}))),r)}if(!t.driver.setItem){return}await Promise.all(t.items.map((r=>Fd(t.driver.setItem,r.relativeKey,Kd(r.value),r.options))))}))},async setItemRaw(t,r,i={}){if(r===void 0){return u.removeItem(t,i)}t=Vd(t);const{relativeKey:s,driver:o}=n(t);if(o.setItemRaw){await Fd(o.setItemRaw,s,r,i)}else if(o.setItem){await Fd(o.setItem,s,Qd(r),i)}else{return}if(!o.watch){e("update",t)}},async removeItem(t,r={}){if(typeof r==="boolean"){r={removeMeta:r}}t=Vd(t);const{relativeKey:i,driver:s}=n(t);if(!s.removeItem){return}await Fd(s.removeItem,i,r);if(r.removeMeta||r.removeMata){await Fd(s.removeItem,i+"$",r)}if(!s.watch){e("remove",t)}},async getMeta(t,r={}){if(typeof r==="boolean"){r={nativeOnly:r}}t=Vd(t);const{relativeKey:i,driver:e}=n(t);const s=Object.create(null);if(e.getMeta){Object.assign(s,await Fd(e.getMeta,i,r))}if(!r.nativeOnly){const t=await Fd(e.getItem,i+"$",r).then((t=>kd(t)));if(t&&typeof t==="object"){if(typeof t.atime==="string"){t.atime=new Date(t.atime)}if(typeof t.mtime==="string"){t.mtime=new Date(t.mtime)}Object.assign(s,t)}}return s},setMeta(t,r,n={}){return this.setItem(t+"$",r,n)},removeMeta(t,r={}){return this.removeItem(t+"$",r)},async getKeys(t,r={}){t=Yd(t);const n=i(t,true);let e=[];const s=[];for(const t of n){const n=await Fd(t.driver.getKeys,t.relativeBase,r);const i=n.map((r=>t.mountpoint+Vd(r))).filter((t=>!e.some((r=>t.startsWith(r)))));s.push(...i);e=[t.mountpoint,...e.filter((r=>!r.startsWith(t.mountpoint)))]}return t?s.filter((r=>r.startsWith(t)&&!r.endsWith("$"))):s.filter((t=>!t.endsWith("$")))},async clear(t,r={}){t=Yd(t);await Promise.all(i(t,false).map((async t=>{if(t.driver.clear){return Fd(t.driver.clear,t.relativeBase,r)}if(t.driver.removeItem){const n=await t.driver.getKeys(t.relativeBase||"",r);return Promise.all(n.map((n=>t.driver.removeItem(n,r))))}})))},async dispose(){await Promise.all(Object.values(r.mounts).map((t=>nv(t))))},async watch(t){await s();r.watchListeners.push(t);return async()=>{r.watchListeners=r.watchListeners.filter((r=>r!==t));if(r.watchListeners.length===0){await o()}}},async unwatch(){r.watchListeners=[];await o()},mount(t,n){t=Yd(t);if(t&&r.mounts[t]){throw new Error(`already mounted at ${t}`)}if(t){r.mountpoints.push(t);r.mountpoints.sort(((t,r)=>r.length-t.length))}r.mounts[t]=n;if(r.watching){Promise.resolve(rv(n,e,t)).then((n=>{r.unwatch[t]=n})).catch(console.error)}return u},async unmount(t,n=true){t=Yd(t);if(!t||!r.mounts[t]){return}if(r.watching&&t in r.unwatch){r.unwatch[t]();delete r.unwatch[t]}if(n){await nv(r.mounts[t])}r.mountpoints=r.mountpoints.filter((r=>r!==t));delete r.mounts[t]},getMount(t=""){t=Vd(t)+":";const r=n(t);return{driver:r.driver,base:r.base}},getMounts(t="",r={}){t=Vd(t);const n=i(t,r.parents);return n.map((t=>({driver:t.driver,base:t.mountpoint})))}};return u}function rv(t,r,n){return t.watch?t.watch(((t,i)=>r(t,n+i))):()=>{}}async function nv(t){if(typeof t.dispose==="function"){await Fd(t.dispose)}}function iv(t){return new Promise((function(r,n){t.oncomplete=t.onsuccess=function(){return r(t.result)};t.onabort=t.onerror=function(){return n(t.error)}}))}function ev(t,r){var n=indexedDB.open(t);n.onupgradeneeded=function(){return n.result.createObjectStore(r)};var i=iv(n);return function(t,n){return i.then((function(i){return n(i.transaction(r,t).objectStore(r))}))}}var sv;function ov(){if(!sv){sv=ev("keyval-store","keyval")}return sv}function av(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:ov();return r("readonly",(function(r){return iv(r.get(t))}))}function uv(t,r){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:ov();return n("readwrite",(function(n){n.put(r,t);return iv(n.transaction)}))}function hv(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:ov();return r("readwrite",(function(r){r.delete(t);return iv(r.transaction)}))}function fv(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:ov();return t("readwrite",(function(t){t.clear();return iv(t.transaction)}))}function cv(t,r){t.openCursor().onsuccess=function(){if(!this.result)return;r(this.result);this.result.continue()};return iv(t.transaction)}function lv(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:ov();return t("readonly",(function(t){if(t.getAllKeys){return iv(t.getAllKeys())}var r=[];return cv(t,(function(t){return r.push(t.key)})).then((function(){return r}))}))}const dv=t=>JSON.stringify(t,((t,r)=>typeof r==="bigint"?r.toString()+"n":r));const vv=t=>{const r=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g;const n=t.replace(r,'$1"$2n"$3');return JSON.parse(n,((t,r)=>{const n=typeof r==="string"&&r.match(/^\d+n$/);if(n)return BigInt(r.substring(0,r.length-1));return r}))};function wv(t){if(typeof t!=="string"){throw new Error(`Cannot safe json parse value of type ${typeof t}`)}try{return vv(t)}catch(r){return t}}function pv(t){return typeof t==="string"?t:dv(t)||""}const yv="idb-keyval";var bv=(t={})=>{const r=t.base&&t.base.length>0?`${t.base}:`:"",n=t=>r+t;let i;return t.dbName&&t.storeName&&(i=ev(t.dbName,t.storeName)),{name:yv,options:t,async hasItem(t){return!(typeof await av(n(t),i)>"u")},async getItem(t){return await av(n(t),i)??null},setItem(t,r){return uv(n(t),r,i)},removeItem(t){return hv(n(t),i)},getKeys(){return lv(i)},clear(){return fv(i)}}};const gv="WALLET_CONNECT_V2_INDEXED_DB",mv="keyvaluestorage";class Av{constructor(){this.indexedDb=tv({driver:bv({dbName:gv,storeName:mv})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map((t=>[t.key,t.value]))}async getItem(t){const r=await this.indexedDb.getItem(t);if(r!==null)return r}async setItem(t,r){await this.indexedDb.setItem(t,pv(r))}async removeItem(t){await this.indexedDb.removeItem(t)}}var Ev=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof v<"u"?v:typeof self<"u"?self:{},Mv={exports:{}};(function(){let t;function r(){}t=r,t.prototype.getItem=function(t){return this.hasOwnProperty(t)?String(this[t]):null},t.prototype.setItem=function(t,r){this[t]=String(r)},t.prototype.removeItem=function(t){delete this[t]},t.prototype.clear=function(){const t=this;Object.keys(t).forEach((function(r){t[r]=void 0,delete t[r]}))},t.prototype.key=function(t){return t=t||0,Object.keys(this)[t]},t.prototype.__defineGetter__("length",(function(){return Object.keys(this).length})),typeof Ev<"u"&&Ev.localStorage?Mv.exports=Ev.localStorage:typeof window<"u"&&window.localStorage?Mv.exports=window.localStorage:Mv.exports=new r})();function _v(t){var r;return[t[0],wv((r=t[1])!=null?r:"")]}class Ov{constructor(){this.localStorage=Mv.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(_v)}async getItem(t){const r=this.localStorage.getItem(t);if(r!==null)return wv(r)}async setItem(t,r){this.localStorage.setItem(t,pv(r))}async removeItem(t){this.localStorage.removeItem(t)}}const Iv="wc_storage_version",Sv=1,Nv=async(t,r,n)=>{const i=Iv,e=await r.getItem(i);if(e&&e>=Sv){n(r);return}const s=await t.getKeys();if(!s.length){n(r);return}const o=[];for(;s.length;){const n=s.shift();if(!n)continue;const i=n.toLowerCase();if(i.includes("wc@")||i.includes("walletconnect")||i.includes("wc_")||i.includes("wallet_connect")){const i=await t.getItem(n);await r.setItem(n,i),o.push(n)}}await r.setItem(i,Sv),n(r),Cv(t,o)},Cv=async(t,r)=>{r.length&&r.forEach((async r=>{await t.removeItem(r)}))};class jv{constructor(){this.initialized=!1,this.setInitialized=t=>{this.storage=t,this.initialized=!0};const t=new Ov;this.storage=t;try{const r=new Av;Nv(t,r,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(t){return await this.initialize(),this.storage.getItem(t)}async setItem(t,r){return await this.initialize(),this.storage.setItem(t,r)}async removeItem(t){return await this.initialize(),this.storage.removeItem(t)}async initialize(){this.initialized||await new Promise((t=>{const r=setInterval((()=>{this.initialized&&(clearInterval(r),t())}),20)}))}}var xv={};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Pv=function(t,r){Pv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)if(r.hasOwnProperty(n))t[n]=r[n]};return Pv(t,r)};function Tv(t,r){Pv(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}var Rv=function(){Rv=Object.assign||function t(r){for(var n,i=1,e=arguments.length;i<e;i++){n=arguments[i];for(var s in n)if(Object.prototype.hasOwnProperty.call(n,s))r[s]=n[s]}return r};return Rv.apply(this,arguments)};function Dv(t,r){var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)&&r.indexOf(i)<0)n[i]=t[i];if(t!=null&&typeof Object.getOwnPropertySymbols==="function")for(var e=0,i=Object.getOwnPropertySymbols(t);e<i.length;e++){if(r.indexOf(i[e])<0&&Object.prototype.propertyIsEnumerable.call(t,i[e]))n[i[e]]=t[i[e]]}return n}function Uv(t,r,n,i){var e=arguments.length,s=e<3?r:i===null?i=Object.getOwnPropertyDescriptor(r,n):i,o;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")s=Reflect.decorate(t,r,n,i);else for(var a=t.length-1;a>=0;a--)if(o=t[a])s=(e<3?o(s):e>3?o(r,n,s):o(r,n))||s;return e>3&&s&&Object.defineProperty(r,n,s),s}function Bv(t,r){return function(n,i){r(n,i,t)}}function kv(t,r){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(t,r)}function $v(t,r,n,i){function e(t){return t instanceof n?t:new n((function(r){r(t)}))}return new(n||(n=Promise))((function(n,s){function o(t){try{u(i.next(t))}catch(t){s(t)}}function a(t){try{u(i["throw"](t))}catch(t){s(t)}}function u(t){t.done?n(t.value):e(t.value).then(o,a)}u((i=i.apply(t,r||[])).next())}))}function Fv(t,r){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,e,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol==="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(t){return function(r){return u([t,r])}}function u(o){if(i)throw new TypeError("Generator is already executing.");while(n)try{if(i=1,e&&(s=o[0]&2?e["return"]:o[0]?e["throw"]||((s=e["return"])&&s.call(e),0):e.next)&&!(s=s.call(e,o[1])).done)return s;if(e=0,s)o=[o[0]&2,s.value];switch(o[0]){case 0:case 1:s=o;break;case 4:n.label++;return{value:o[1],done:false};case 5:n.label++;e=o[1];o=[0];continue;case 7:o=n.ops.pop();n.trys.pop();continue;default:if(!(s=n.trys,s=s.length>0&&s[s.length-1])&&(o[0]===6||o[0]===2)){n=0;continue}if(o[0]===3&&(!s||o[1]>s[0]&&o[1]<s[3])){n.label=o[1];break}if(o[0]===6&&n.label<s[1]){n.label=s[1];s=o;break}if(s&&n.label<s[2]){n.label=s[2];n.ops.push(o);break}if(s[2])n.ops.pop();n.trys.pop();continue}o=r.call(t,n)}catch(t){o=[6,t];e=0}finally{i=s=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:true}}}function qv(t,r,n,i){if(i===undefined)i=n;t[i]=r[n]}function Lv(t,r){for(var n in t)if(n!=="default"&&!r.hasOwnProperty(n))r[n]=t[n]}function Kv(t){var r=typeof Symbol==="function"&&Symbol.iterator,n=r&&t[r],i=0;if(n)return n.call(t);if(t&&typeof t.length==="number")return{next:function(){if(t&&i>=t.length)t=void 0;return{value:t&&t[i++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}function Hv(t,r){var n=typeof Symbol==="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),e,s=[],o;try{while((r===void 0||r-- >0)&&!(e=i.next()).done)s.push(e.value)}catch(t){o={error:t}}finally{try{if(e&&!e.done&&(n=i["return"]))n.call(i)}finally{if(o)throw o.error}}return s}function Gv(){for(var t=[],r=0;r<arguments.length;r++)t=t.concat(Hv(arguments[r]));return t}function Qv(){for(var t=0,r=0,n=arguments.length;r<n;r++)t+=arguments[r].length;for(var i=Array(t),e=0,r=0;r<n;r++)for(var s=arguments[r],o=0,a=s.length;o<a;o++,e++)i[e]=s[o];return i}function Jv(t){return this instanceof Jv?(this.v=t,this):new Jv(t)}function Vv(t,r,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,r||[]),e,s=[];return e={},o("next"),o("throw"),o("return"),e[Symbol.asyncIterator]=function(){return this},e;function o(t){if(i[t])e[t]=function(r){return new Promise((function(n,i){s.push([t,r,n,i])>1||a(t,r)}))}}function a(t,r){try{u(i[t](r))}catch(t){c(s[0][3],t)}}function u(t){t.value instanceof Jv?Promise.resolve(t.value.v).then(h,f):c(s[0][2],t)}function h(t){a("next",t)}function f(t){a("throw",t)}function c(t,r){if(t(r),s.shift(),s.length)a(s[0][0],s[0][1])}}function zv(t){var r,n;return r={},i("next"),i("throw",(function(t){throw t})),i("return"),r[Symbol.iterator]=function(){return this},r;function i(i,e){r[i]=t[i]?function(r){return(n=!n)?{value:Jv(t[i](r)),done:i==="return"}:e?e(r):r}:e}}function Yv(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t[Symbol.asyncIterator],n;return r?r.call(t):(t=typeof Kv==="function"?Kv(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(r){n[r]=t[r]&&function(n){return new Promise((function(i,s){n=t[r](n),e(i,s,n.done,n.value)}))}}function e(t,r,n,i){Promise.resolve(i).then((function(r){t({value:r,done:n})}),r)}}function Wv(t,r){if(Object.defineProperty){Object.defineProperty(t,"raw",{value:r})}else{t.raw=r}return t}function Xv(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var n in t)if(Object.hasOwnProperty.call(t,n))r[n]=t[n];r.default=t;return r}function Zv(t){return t&&t.__esModule?t:{default:t}}function tw(t,r){if(!r.has(t)){throw new TypeError("attempted to get private field on non-instance")}return r.get(t)}function rw(t,r,n){if(!r.has(t)){throw new TypeError("attempted to set private field on non-instance")}r.set(t,n);return n}const nw=Object.freeze({__proto__:null,__extends:Tv,get __assign(){return Rv},__rest:Dv,__decorate:Uv,__param:Bv,__metadata:kv,__awaiter:$v,__generator:Fv,__createBinding:qv,__exportStar:Lv,__values:Kv,__read:Hv,__spread:Gv,__spreadArrays:Qv,__await:Jv,__asyncGenerator:Vv,__asyncDelegator:zv,__asyncValues:Yv,__makeTemplateObject:Wv,__importStar:Xv,__importDefault:Zv,__classPrivateFieldGet:tw,__classPrivateFieldSet:rw});const iw=e(nw);var ew={};var sw={};var ow={};class aw{}const uw=Object.freeze({__proto__:null,IEvents:aw});const hw=e(uw);Object.defineProperty(ow,"__esModule",{value:true});ow.IHeartBeat=void 0;const fw=hw;class cw extends fw.IEvents{constructor(t){super()}}ow.IHeartBeat=cw;(function(t){Object.defineProperty(t,"__esModule",{value:true});const r=iw;r.__exportStar(ow,t)})(sw);var lw={};var dw={};Object.defineProperty(dw,"__esModule",{value:true});dw.HEARTBEAT_EVENTS=dw.HEARTBEAT_INTERVAL=void 0;const vw=D;dw.HEARTBEAT_INTERVAL=vw.FIVE_SECONDS;dw.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"};(function(t){Object.defineProperty(t,"__esModule",{value:true});const r=iw;r.__exportStar(dw,t)})(lw);Object.defineProperty(ew,"__esModule",{value:true});ew.HeartBeat=void 0;const ww=iw;const pw=t.exports;const yw=D;const bw=sw;const gw=lw;class mw extends bw.IHeartBeat{constructor(t){super(t);this.events=new pw.EventEmitter;this.interval=gw.HEARTBEAT_INTERVAL;this.interval=(t===null||t===void 0?void 0:t.interval)||gw.HEARTBEAT_INTERVAL}static init(t){return ww.__awaiter(this,void 0,void 0,(function*(){const r=new mw(t);yield r.init();return r}))}init(){return ww.__awaiter(this,void 0,void 0,(function*(){yield this.initialize()}))}stop(){clearInterval(this.intervalRef)}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}off(t,r){this.events.off(t,r)}removeListener(t,r){this.events.removeListener(t,r)}initialize(){return ww.__awaiter(this,void 0,void 0,(function*(){this.intervalRef=setInterval((()=>this.pulse()),yw.toMiliseconds(this.interval))}))}pulse(){this.events.emit(gw.HEARTBEAT_EVENTS.pulse)}}ew.HeartBeat=mw;(function(t){Object.defineProperty(t,"__esModule",{value:true});const r=iw;r.__exportStar(ew,t);r.__exportStar(sw,t);r.__exportStar(lw,t)})(xv);function Aw(t){try{return JSON.stringify(t)}catch(t){return'"[Circular]"'}}var Ew=Mw;function Mw(t,r,n){var i=n&&n.stringify||Aw;var e=1;if(typeof t==="object"&&t!==null){var s=r.length+e;if(s===1)return t;var o=new Array(s);o[0]=i(t);for(var a=1;a<s;a++){o[a]=i(r[a])}return o.join(" ")}if(typeof t!=="string"){return t}var u=r.length;if(u===0)return t;var h="";var f=1-e;var c=-1;var l=t&&t.length||0;for(var d=0;d<l;){if(t.charCodeAt(d)===37&&d+1<l){c=c>-1?c:0;switch(t.charCodeAt(d+1)){case 100:case 102:if(f>=u)break;if(r[f]==null)break;if(c<d)h+=t.slice(c,d);h+=Number(r[f]);c=d+2;d++;break;case 105:if(f>=u)break;if(r[f]==null)break;if(c<d)h+=t.slice(c,d);h+=Math.floor(Number(r[f]));c=d+2;d++;break;case 79:case 111:case 106:if(f>=u)break;if(r[f]===undefined)break;if(c<d)h+=t.slice(c,d);var v=typeof r[f];if(v==="string"){h+="'"+r[f]+"'";c=d+2;d++;break}if(v==="function"){h+=r[f].name||"<anonymous>";c=d+2;d++;break}h+=i(r[f]);c=d+2;d++;break;case 115:if(f>=u)break;if(c<d)h+=t.slice(c,d);h+=String(r[f]);c=d+2;d++;break;case 37:if(c<d)h+=t.slice(c,d);h+="%";c=d+2;d++;f--;break}++f}++d}if(c===-1)return t;else if(c<l){h+=t.slice(c)}return h}const _w=Ew;var Ow=Cw;const Iw=Qw().console||{};const Sw={mapHttpRequest:$w,mapHttpResponse:$w,wrapRequestSerializer:Fw,wrapResponseSerializer:Fw,wrapErrorSerializer:Fw,req:$w,res:$w,err:Bw};function Nw(t,r){if(Array.isArray(t)){const r=t.filter((function(t){return t!=="!stdSerializers.err"}));return r}else if(t===true){return Object.keys(r)}return false}function Cw(t){t=t||{};t.browser=t.browser||{};const r=t.browser.transmit;if(r&&typeof r.send!=="function"){throw Error("pino: transmit option must have a send function")}const n=t.browser.write||Iw;if(t.browser.write)t.browser.asObject=true;const i=t.serializers||{};const e=Nw(t.browser.serialize,i);let s=t.browser.serialize;if(Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1)s=false;const o=["error","fatal","warn","info","debug","trace"];if(typeof n==="function"){n.error=n.fatal=n.warn=n.info=n.debug=n.trace=n}if(t.enabled===false)t.level="silent";const a=t.level||"info";const u=Object.create(n);if(!u.log)u.log=qw;Object.defineProperty(u,"levelVal",{get:f});Object.defineProperty(u,"level",{get:c,set:l});const h={transmit:r,serialize:e,asObject:t.browser.asObject,levels:o,timestamp:kw(t)};u.levels=Cw.levels;u.level=a;u.setMaxListeners=u.getMaxListeners=u.emit=u.addListener=u.on=u.prependListener=u.once=u.prependOnceListener=u.removeListener=u.removeAllListeners=u.listeners=u.listenerCount=u.eventNames=u.write=u.flush=qw;u.serializers=i;u._serialize=e;u._stdErrSerialize=s;u.child=d;if(r)u._logEvent=Uw();function f(){return this.level==="silent"?Infinity:this.levels.values[this.level]}function c(){return this._level}function l(t){if(t!=="silent"&&!this.levels.values[t]){throw Error("unknown level "+t)}this._level=t;jw(h,u,"error","log");jw(h,u,"fatal","error");jw(h,u,"warn","error");jw(h,u,"info","log");jw(h,u,"debug","log");jw(h,u,"trace","log")}function d(n,s){if(!n){throw new Error("missing bindings for child Pino")}s=s||{};if(e&&n.serializers){s.serializers=n.serializers}const o=s.serializers;if(e&&o){var a=Object.assign({},i,o);var u=t.browser.serialize===true?Object.keys(a):e;delete n.serializers;Tw([n],u,a,this._stdErrSerialize)}function h(t){this._childLevel=(t._childLevel|0)+1;this.error=Rw(t,n,"error");this.fatal=Rw(t,n,"fatal");this.warn=Rw(t,n,"warn");this.info=Rw(t,n,"info");this.debug=Rw(t,n,"debug");this.trace=Rw(t,n,"trace");if(a){this.serializers=a;this._serialize=u}if(r){this._logEvent=Uw([].concat(t._logEvent.bindings,n))}}h.prototype=this;return new h(this)}return u}Cw.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};Cw.stdSerializers=Sw;Cw.stdTimeFunctions=Object.assign({},{nullTime:Lw,epochTime:Kw,unixTime:Hw,isoTime:Gw});function jw(t,r,n,i){const e=Object.getPrototypeOf(r);r[n]=r.levelVal>r.levels.values[n]?qw:e[n]?e[n]:Iw[n]||Iw[i]||qw;xw(t,r,n)}function xw(t,r,n){if(!t.transmit&&r[n]===qw)return;r[n]=function(i){return function e(){const s=t.timestamp();const o=new Array(arguments.length);const a=Object.getPrototypeOf&&Object.getPrototypeOf(this)===Iw?Iw:this;for(var u=0;u<o.length;u++)o[u]=arguments[u];if(t.serialize&&!t.asObject){Tw(o,this._serialize,this.serializers,this._stdErrSerialize)}if(t.asObject)i.call(a,Pw(this,n,o,s));else i.apply(a,o);if(t.transmit){const i=t.transmit.level||r.level;const e=Cw.levels.values[i];const a=Cw.levels.values[n];if(a<e)return;Dw(this,{ts:s,methodLevel:n,methodValue:a,transmitLevel:i,transmitValue:Cw.levels.values[t.transmit.level||r.level],send:t.transmit.send,val:r.levelVal},o)}}}(r[n])}function Pw(t,r,n,i){if(t._serialize)Tw(n,t._serialize,t.serializers,t._stdErrSerialize);const e=n.slice();let s=e[0];const o={};if(i){o.time=i}o.level=Cw.levels.values[r];let a=(t._childLevel|0)+1;if(a<1)a=1;if(s!==null&&typeof s==="object"){while(a--&&typeof e[0]==="object"){Object.assign(o,e.shift())}s=e.length?_w(e.shift(),e):undefined}else if(typeof s==="string")s=_w(e.shift(),e);if(s!==undefined)o.msg=s;return o}function Tw(t,r,n,i){for(const e in t){if(i&&t[e]instanceof Error){t[e]=Cw.stdSerializers.err(t[e])}else if(typeof t[e]==="object"&&!Array.isArray(t[e])){for(const i in t[e]){if(r&&r.indexOf(i)>-1&&i in n){t[e][i]=n[i](t[e][i])}}}}}function Rw(t,r,n){return function(){const i=new Array(1+arguments.length);i[0]=r;for(var e=1;e<i.length;e++){i[e]=arguments[e-1]}return t[n].apply(this,i)}}function Dw(t,r,n){const i=r.send;const e=r.ts;const s=r.methodLevel;const o=r.methodValue;const a=r.val;const u=t._logEvent.bindings;Tw(n,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===undefined?true:t._stdErrSerialize);t._logEvent.ts=e;t._logEvent.messages=n.filter((function(t){return u.indexOf(t)===-1}));t._logEvent.level.label=s;t._logEvent.level.value=o;i(s,t._logEvent,a);t._logEvent=Uw(u)}function Uw(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function Bw(t){const r={type:t.constructor.name,msg:t.message,stack:t.stack};for(const n in t){if(r[n]===undefined){r[n]=t[n]}}return r}function kw(t){if(typeof t.timestamp==="function"){return t.timestamp}if(t.timestamp===false){return Lw}return Kw}function $w(){return{}}function Fw(t){return t}function qw(){}function Lw(){return false}function Kw(){return Date.now()}function Hw(){return Math.round(Date.now()/1e3)}function Gw(){return new Date(Date.now()).toISOString()}function Qw(){function t(t){return typeof t!=="undefined"&&t}try{if(typeof globalThis!=="undefined")return globalThis;Object.defineProperty(Object.prototype,"globalThis",{get:function(){delete Object.prototype.globalThis;return this.globalThis=this},configurable:true});return globalThis}catch(r){return t(self)||t(window)||t(this)||{}}}const Jw=t=>JSON.stringify(t,((t,r)=>typeof r==="bigint"?r.toString()+"n":r));function Vw(t){return typeof t==="string"?t:Jw(t)||""}const zw={level:"info"},Yw="custom_context",Ww=1e3*1024;class Xw{constructor(t){this.nodeValue=t,this.sizeInBytes=(new TextEncoder).encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}}class Zw{constructor(t){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=t,this.sizeInBytes=0}append(t){const r=new Xw(t);if(r.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${t} with size ${r.size}`);for(;this.size+r.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=r),this.tail=r):(this.head=r,this.tail=r),this.lengthInNodes++,this.sizeInBytes+=r.size}shift(){if(!this.head)return;const t=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=t.size}toArray(){const t=[];let r=this.head;for(;r!==null;)t.push(r.value),r=r.next;return t}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let t=this.head;return{next:()=>{if(!t)return{done:!0,value:null};const r=t.value;return t=t.next,{done:!1,value:r}}}}}class tp{constructor(t,r=Ww){this.level=t??"error",this.levelValue=Ow.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=r,this.logs=new Zw(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(t,r){r===Ow.levels.values.error?console.error(t):r===Ow.levels.values.warn?console.warn(t):r===Ow.levels.values.debug?console.debug(t):r===Ow.levels.values.trace?console.trace(t):console.log(t)}appendToLogs(t){this.logs.append(Vw({timestamp:(new Date).toISOString(),log:t}));const r=typeof t=="string"?JSON.parse(t).level:t.level;r>=this.levelValue&&this.forwardToConsole(t,r)}getLogs(){return this.logs}clearLogs(){this.logs=new Zw(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(t){const r=this.getLogArray();return r.push(Vw({extraMetadata:t})),new Blob(r,{type:"application/json"})}}class rp{constructor(t,r=Ww){this.baseChunkLogger=new tp(t,r)}write(t){this.baseChunkLogger.appendToLogs(t)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(t){return this.baseChunkLogger.logsToBlob(t)}downloadLogsBlobInBrowser(t){const r=URL.createObjectURL(this.logsToBlob(t)),n=document.createElement("a");n.href=r,n.download=`w3i-logs-${(new Date).toISOString()}.txt`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(r)}}class np extends r{constructor(t,r=Ww){super({objectMode:!0}),this.baseChunkLogger=new tp(t,r)}_write(t,r,n){try{this.baseChunkLogger.appendToLogs(t),n()}catch(t){n(t)}}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(t){return this.baseChunkLogger.logsToBlob(t)}}var ip=Object.defineProperty,ep=Object.defineProperties,sp=Object.getOwnPropertyDescriptors,op=Object.getOwnPropertySymbols,ap=Object.prototype.hasOwnProperty,up=Object.prototype.propertyIsEnumerable,hp=(t,r,n)=>r in t?ip(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n,fp=(t,r)=>{for(var n in r||(r={}))ap.call(r,n)&&hp(t,n,r[n]);if(op)for(var n of op(r))up.call(r,n)&&hp(t,n,r[n]);return t},cp=(t,r)=>ep(t,sp(r));function lp(t){return cp(fp({},t),{level:t?.level||zw.level})}function dp(t,r=Yw){return t[r]||""}function vp(t,r,n=Yw){return t[n]=r,t}function wp(t,r=Yw){let n="";return typeof t.bindings>"u"?n=dp(t,r):n=t.bindings().context||"",n}function pp(t,r,n=Yw){const i=wp(t,n);return i.trim()?`${i}/${r}`:r}function yp(t,r,n=Yw){const i=pp(t,r,n),e=t.child({context:i});return vp(e,i,n)}function bp(t){var r,n;const i=new rp((r=t.opts)==null?void 0:r.level,t.maxSizeInBytes);return{logger:Ow(cp(fp({},t.opts),{level:"trace",browser:cp(fp({},(n=t.opts)==null?void 0:n.browser),{write:t=>i.write(t)})})),chunkLoggerController:i}}function gp(t){var r;const n=new np((r=t.opts)==null?void 0:r.level,t.maxSizeInBytes);return{logger:Ow(cp(fp({},t.opts),{level:"trace"}),n),chunkLoggerController:n}}function mp(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?bp(t):gp(t)}class Ap extends aw{constructor(t){super(),this.opts=t,this.protocol="wc",this.version=2}}class Ep extends aw{constructor(t,r){super(),this.core=t,this.logger=r,this.records=new Map}}class Mp{constructor(t,r){this.logger=t,this.core=r}}class _p extends aw{constructor(t,r){super(),this.relayer=t,this.logger=r}}class Op extends aw{constructor(t){super()}}class Ip{constructor(t,r,n,i){this.core=t,this.logger=r,this.name=n}}class Sp extends aw{constructor(t,r){super(),this.relayer=t,this.logger=r}}class Np extends aw{constructor(t,r){super(),this.core=t,this.logger=r}}class Cp{constructor(t,r){this.projectId=t,this.logger=r}}class jp{constructor(t,r){this.projectId=t,this.logger=r}}const xp=t=>JSON.stringify(t,((t,r)=>typeof r==="bigint"?r.toString()+"n":r));const Pp=t=>{const r=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g;const n=t.replace(r,'$1"$2n"$3');return JSON.parse(n,((t,r)=>{const n=typeof r==="string"&&r.match(/^\d+n$/);if(n)return BigInt(r.substring(0,r.length-1));return r}))};function Tp(t){if(typeof t!=="string"){throw new Error(`Cannot safe json parse value of type ${typeof t}`)}try{return Pp(t)}catch(r){return t}}function Rp(t){return typeof t==="string"?t:xp(t)||""}var Dp={};var Up={};(function(t){Object.defineProperty(t,"__esModule",{value:true});var r=nr;var n=Dr;t.DIGEST_LENGTH=64;t.BLOCK_SIZE=128;var i=function(){function i(){this.digestLength=t.DIGEST_LENGTH;this.blockSize=t.BLOCK_SIZE;this._stateHi=new Int32Array(8);this._stateLo=new Int32Array(8);this._tempHi=new Int32Array(16);this._tempLo=new Int32Array(16);this._buffer=new Uint8Array(256);this._bufferLength=0;this._bytesHashed=0;this._finished=false;this.reset()}i.prototype._initState=function(){this._stateHi[0]=1779033703;this._stateHi[1]=3144134277;this._stateHi[2]=1013904242;this._stateHi[3]=2773480762;this._stateHi[4]=1359893119;this._stateHi[5]=2600822924;this._stateHi[6]=528734635;this._stateHi[7]=1541459225;this._stateLo[0]=4089235720;this._stateLo[1]=2227873595;this._stateLo[2]=4271175723;this._stateLo[3]=1595750129;this._stateLo[4]=2917565137;this._stateLo[5]=725511199;this._stateLo[6]=4215389547;this._stateLo[7]=327033209};i.prototype.reset=function(){this._initState();this._bufferLength=0;this._bytesHashed=0;this._finished=false;return this};i.prototype.clean=function(){n.wipe(this._buffer);n.wipe(this._tempHi);n.wipe(this._tempLo);this.reset()};i.prototype.update=function(r,n){if(n===void 0){n=r.length}if(this._finished){throw new Error("SHA512: can't update because hash was finished.")}var i=0;this._bytesHashed+=n;if(this._bufferLength>0){while(this._bufferLength<t.BLOCK_SIZE&&n>0){this._buffer[this._bufferLength++]=r[i++];n--}if(this._bufferLength===this.blockSize){s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize);this._bufferLength=0}}if(n>=this.blockSize){i=s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,r,i,n);n%=this.blockSize}while(n>0){this._buffer[this._bufferLength++]=r[i++];n--}return this};i.prototype.finish=function(t){if(!this._finished){var n=this._bytesHashed;var i=this._bufferLength;var e=n/536870912|0;var o=n<<3;var a=n%128<112?128:256;this._buffer[i]=128;for(var u=i+1;u<a-8;u++){this._buffer[u]=0}r.writeUint32BE(e,this._buffer,a-8);r.writeUint32BE(o,this._buffer,a-4);s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,a);this._finished=true}for(var u=0;u<this.digestLength/8;u++){r.writeUint32BE(this._stateHi[u],t,u*8);r.writeUint32BE(this._stateLo[u],t,u*8+4)}return this};i.prototype.digest=function(){var t=new Uint8Array(this.digestLength);this.finish(t);return t};i.prototype.saveState=function(){if(this._finished){throw new Error("SHA256: cannot save finished state")}return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):undefined,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}};i.prototype.restoreState=function(t){this._stateHi.set(t.stateHi);this._stateLo.set(t.stateLo);this._bufferLength=t.bufferLength;if(t.buffer){this._buffer.set(t.buffer)}this._bytesHashed=t.bytesHashed;this._finished=false;return this};i.prototype.cleanSavedState=function(t){n.wipe(t.stateHi);n.wipe(t.stateLo);if(t.buffer){n.wipe(t.buffer)}t.bufferLength=0;t.bytesHashed=0};return i}();t.SHA512=i;var e=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function s(t,n,i,s,o,a,u){var h=i[0],f=i[1],c=i[2],l=i[3],d=i[4],v=i[5],w=i[6],p=i[7],y=s[0],b=s[1],g=s[2],m=s[3],A=s[4],E=s[5],M=s[6],_=s[7];var O,I;var S,N;var C,j,x,P;while(u>=128){for(var T=0;T<16;T++){var R=8*T+a;t[T]=r.readUint32BE(o,R);n[T]=r.readUint32BE(o,R+4)}for(var T=0;T<80;T++){var D=h;var U=f;var B=c;var k=l;var $=d;var F=v;var q=w;var L=p;var K=y;var H=b;var G=g;var Q=m;var J=A;var V=E;var z=M;var Y=_;O=p;I=_;C=I&65535;j=I>>>16;x=O&65535;P=O>>>16;O=(d>>>14|A<<32-14)^(d>>>18|A<<32-18)^(A>>>41-32|d<<32-(41-32));I=(A>>>14|d<<32-14)^(A>>>18|d<<32-18)^(d>>>41-32|A<<32-(41-32));C+=I&65535;j+=I>>>16;x+=O&65535;P+=O>>>16;O=d&v^~d&w;I=A&E^~A&M;C+=I&65535;j+=I>>>16;x+=O&65535;P+=O>>>16;O=e[T*2];I=e[T*2+1];C+=I&65535;j+=I>>>16;x+=O&65535;P+=O>>>16;O=t[T%16];I=n[T%16];C+=I&65535;j+=I>>>16;x+=O&65535;P+=O>>>16;j+=C>>>16;x+=j>>>16;P+=x>>>16;S=x&65535|P<<16;N=C&65535|j<<16;O=S;I=N;C=I&65535;j=I>>>16;x=O&65535;P=O>>>16;O=(h>>>28|y<<32-28)^(y>>>34-32|h<<32-(34-32))^(y>>>39-32|h<<32-(39-32));I=(y>>>28|h<<32-28)^(h>>>34-32|y<<32-(34-32))^(h>>>39-32|y<<32-(39-32));C+=I&65535;j+=I>>>16;x+=O&65535;P+=O>>>16;O=h&f^h&c^f&c;I=y&b^y&g^b&g;C+=I&65535;j+=I>>>16;x+=O&65535;P+=O>>>16;j+=C>>>16;x+=j>>>16;P+=x>>>16;L=x&65535|P<<16;Y=C&65535|j<<16;O=k;I=Q;C=I&65535;j=I>>>16;x=O&65535;P=O>>>16;O=S;I=N;C+=I&65535;j+=I>>>16;x+=O&65535;P+=O>>>16;j+=C>>>16;x+=j>>>16;P+=x>>>16;k=x&65535|P<<16;Q=C&65535|j<<16;f=D;c=U;l=B;d=k;v=$;w=F;p=q;h=L;b=K;g=H;m=G;A=Q;E=J;M=V;_=z;y=Y;if(T%16===15){for(var R=0;R<16;R++){O=t[R];I=n[R];C=I&65535;j=I>>>16;x=O&65535;P=O>>>16;O=t[(R+9)%16];I=n[(R+9)%16];C+=I&65535;j+=I>>>16;x+=O&65535;P+=O>>>16;S=t[(R+1)%16];N=n[(R+1)%16];O=(S>>>1|N<<32-1)^(S>>>8|N<<32-8)^S>>>7;I=(N>>>1|S<<32-1)^(N>>>8|S<<32-8)^(N>>>7|S<<32-7);C+=I&65535;j+=I>>>16;x+=O&65535;P+=O>>>16;S=t[(R+14)%16];N=n[(R+14)%16];O=(S>>>19|N<<32-19)^(N>>>61-32|S<<32-(61-32))^S>>>6;I=(N>>>19|S<<32-19)^(S>>>61-32|N<<32-(61-32))^(N>>>6|S<<32-6);C+=I&65535;j+=I>>>16;x+=O&65535;P+=O>>>16;j+=C>>>16;x+=j>>>16;P+=x>>>16;t[R]=x&65535|P<<16;n[R]=C&65535|j<<16}}}O=h;I=y;C=I&65535;j=I>>>16;x=O&65535;P=O>>>16;O=i[0];I=s[0];C+=I&65535;j+=I>>>16;x+=O&65535;P+=O>>>16;j+=C>>>16;x+=j>>>16;P+=x>>>16;i[0]=h=x&65535|P<<16;s[0]=y=C&65535|j<<16;O=f;I=b;C=I&65535;j=I>>>16;x=O&65535;P=O>>>16;O=i[1];I=s[1];C+=I&65535;j+=I>>>16;x+=O&65535;P+=O>>>16;j+=C>>>16;x+=j>>>16;P+=x>>>16;i[1]=f=x&65535|P<<16;s[1]=b=C&65535|j<<16;O=c;I=g;C=I&65535;j=I>>>16;x=O&65535;P=O>>>16;O=i[2];I=s[2];C+=I&65535;j+=I>>>16;x+=O&65535;P+=O>>>16;j+=C>>>16;x+=j>>>16;P+=x>>>16;i[2]=c=x&65535|P<<16;s[2]=g=C&65535|j<<16;O=l;I=m;C=I&65535;j=I>>>16;x=O&65535;P=O>>>16;O=i[3];I=s[3];C+=I&65535;j+=I>>>16;x+=O&65535;P+=O>>>16;j+=C>>>16;x+=j>>>16;P+=x>>>16;i[3]=l=x&65535|P<<16;s[3]=m=C&65535|j<<16;O=d;I=A;C=I&65535;j=I>>>16;x=O&65535;P=O>>>16;O=i[4];I=s[4];C+=I&65535;j+=I>>>16;x+=O&65535;P+=O>>>16;j+=C>>>16;x+=j>>>16;P+=x>>>16;i[4]=d=x&65535|P<<16;s[4]=A=C&65535|j<<16;O=v;I=E;C=I&65535;j=I>>>16;x=O&65535;P=O>>>16;O=i[5];I=s[5];C+=I&65535;j+=I>>>16;x+=O&65535;P+=O>>>16;j+=C>>>16;x+=j>>>16;P+=x>>>16;i[5]=v=x&65535|P<<16;s[5]=E=C&65535|j<<16;O=w;I=M;C=I&65535;j=I>>>16;x=O&65535;P=O>>>16;O=i[6];I=s[6];C+=I&65535;j+=I>>>16;x+=O&65535;P+=O>>>16;j+=C>>>16;x+=j>>>16;P+=x>>>16;i[6]=w=x&65535|P<<16;s[6]=M=C&65535|j<<16;O=p;I=_;C=I&65535;j=I>>>16;x=O&65535;P=O>>>16;O=i[7];I=s[7];C+=I&65535;j+=I>>>16;x+=O&65535;P+=O>>>16;j+=C>>>16;x+=j>>>16;P+=x>>>16;i[7]=p=x&65535|P<<16;s[7]=_=C&65535|j<<16;a+=128;u-=128}return a}function o(t){var r=new i;r.update(t);var n=r.digest();r.clean();return n}t.hash=o})(Up);(function(t){Object.defineProperty(t,"__esModule",{value:true});t.convertSecretKeyToX25519=t.convertPublicKeyToX25519=t.verify=t.sign=t.extractPublicKeyFromSecretKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.SEED_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=t.SIGNATURE_LENGTH=void 0;const r=fn;const n=Up;const i=Dr;t.SIGNATURE_LENGTH=64;t.PUBLIC_KEY_LENGTH=32;t.SECRET_KEY_LENGTH=64;t.SEED_LENGTH=32;function e(t){const r=new Float64Array(16);if(t){for(let n=0;n<t.length;n++){r[n]=t[n]}}return r}const s=new Uint8Array(32);s[0]=9;const o=e();const a=e([1]);const u=e([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]);const h=e([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]);const f=e([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]);const c=e([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]);const l=e([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function d(t,r){for(let n=0;n<16;n++){t[n]=r[n]|0}}function v(t){let r=1;for(let n=0;n<16;n++){let i=t[n]+r+65535;r=Math.floor(i/65536);t[n]=i-r*65536}t[0]+=r-1+37*(r-1)}function w(t,r,n){const i=~(n-1);for(let n=0;n<16;n++){const e=i&(t[n]^r[n]);t[n]^=e;r[n]^=e}}function p(t,r){const n=e();const i=e();for(let t=0;t<16;t++){i[t]=r[t]}v(i);v(i);v(i);for(let t=0;t<2;t++){n[0]=i[0]-65517;for(let t=1;t<15;t++){n[t]=i[t]-65535-(n[t-1]>>16&1);n[t-1]&=65535}n[15]=i[15]-32767-(n[14]>>16&1);const t=n[15]>>16&1;n[14]&=65535;w(i,n,1-t)}for(let r=0;r<16;r++){t[2*r]=i[r]&255;t[2*r+1]=i[r]>>8}}function y(t,r){let n=0;for(let i=0;i<32;i++){n|=t[i]^r[i]}return(1&n-1>>>8)-1}function b(t,r){const n=new Uint8Array(32);const i=new Uint8Array(32);p(n,t);p(i,r);return y(n,i)}function g(t){const r=new Uint8Array(32);p(r,t);return r[0]&1}function m(t,r){for(let n=0;n<16;n++){t[n]=r[2*n]+(r[2*n+1]<<8)}t[15]&=32767}function A(t,r,n){for(let i=0;i<16;i++){t[i]=r[i]+n[i]}}function E(t,r,n){for(let i=0;i<16;i++){t[i]=r[i]-n[i]}}function M(t,r,n){let i,e,s=0,o=0,a=0,u=0,h=0,f=0,c=0,l=0,d=0,v=0,w=0,p=0,y=0,b=0,g=0,m=0,A=0,E=0,M=0,_=0,O=0,I=0,S=0,N=0,C=0,j=0,x=0,P=0,T=0,R=0,D=0,U=n[0],B=n[1],k=n[2],$=n[3],F=n[4],q=n[5],L=n[6],K=n[7],H=n[8],G=n[9],Q=n[10],J=n[11],V=n[12],z=n[13],Y=n[14],W=n[15];i=r[0];s+=i*U;o+=i*B;a+=i*k;u+=i*$;h+=i*F;f+=i*q;c+=i*L;l+=i*K;d+=i*H;v+=i*G;w+=i*Q;p+=i*J;y+=i*V;b+=i*z;g+=i*Y;m+=i*W;i=r[1];o+=i*U;a+=i*B;u+=i*k;h+=i*$;f+=i*F;c+=i*q;l+=i*L;d+=i*K;v+=i*H;w+=i*G;p+=i*Q;y+=i*J;b+=i*V;g+=i*z;m+=i*Y;A+=i*W;i=r[2];a+=i*U;u+=i*B;h+=i*k;f+=i*$;c+=i*F;l+=i*q;d+=i*L;v+=i*K;w+=i*H;p+=i*G;y+=i*Q;b+=i*J;g+=i*V;m+=i*z;A+=i*Y;E+=i*W;i=r[3];u+=i*U;h+=i*B;f+=i*k;c+=i*$;l+=i*F;d+=i*q;v+=i*L;w+=i*K;p+=i*H;y+=i*G;b+=i*Q;g+=i*J;m+=i*V;A+=i*z;E+=i*Y;M+=i*W;i=r[4];h+=i*U;f+=i*B;c+=i*k;l+=i*$;d+=i*F;v+=i*q;w+=i*L;p+=i*K;y+=i*H;b+=i*G;g+=i*Q;m+=i*J;A+=i*V;E+=i*z;M+=i*Y;_+=i*W;i=r[5];f+=i*U;c+=i*B;l+=i*k;d+=i*$;v+=i*F;w+=i*q;p+=i*L;y+=i*K;b+=i*H;g+=i*G;m+=i*Q;A+=i*J;E+=i*V;M+=i*z;_+=i*Y;O+=i*W;i=r[6];c+=i*U;l+=i*B;d+=i*k;v+=i*$;w+=i*F;p+=i*q;y+=i*L;b+=i*K;g+=i*H;m+=i*G;A+=i*Q;E+=i*J;M+=i*V;_+=i*z;O+=i*Y;I+=i*W;i=r[7];l+=i*U;d+=i*B;v+=i*k;w+=i*$;p+=i*F;y+=i*q;b+=i*L;g+=i*K;m+=i*H;A+=i*G;E+=i*Q;M+=i*J;_+=i*V;O+=i*z;I+=i*Y;S+=i*W;i=r[8];d+=i*U;v+=i*B;w+=i*k;p+=i*$;y+=i*F;b+=i*q;g+=i*L;m+=i*K;A+=i*H;E+=i*G;M+=i*Q;_+=i*J;O+=i*V;I+=i*z;S+=i*Y;N+=i*W;i=r[9];v+=i*U;w+=i*B;p+=i*k;y+=i*$;b+=i*F;g+=i*q;m+=i*L;A+=i*K;E+=i*H;M+=i*G;_+=i*Q;O+=i*J;I+=i*V;S+=i*z;N+=i*Y;C+=i*W;i=r[10];w+=i*U;p+=i*B;y+=i*k;b+=i*$;g+=i*F;m+=i*q;A+=i*L;E+=i*K;M+=i*H;_+=i*G;O+=i*Q;I+=i*J;S+=i*V;N+=i*z;C+=i*Y;j+=i*W;i=r[11];p+=i*U;y+=i*B;b+=i*k;g+=i*$;m+=i*F;A+=i*q;E+=i*L;M+=i*K;_+=i*H;O+=i*G;I+=i*Q;S+=i*J;N+=i*V;C+=i*z;j+=i*Y;x+=i*W;i=r[12];y+=i*U;b+=i*B;g+=i*k;m+=i*$;A+=i*F;E+=i*q;M+=i*L;_+=i*K;O+=i*H;I+=i*G;S+=i*Q;N+=i*J;C+=i*V;j+=i*z;x+=i*Y;P+=i*W;i=r[13];b+=i*U;g+=i*B;m+=i*k;A+=i*$;E+=i*F;M+=i*q;_+=i*L;O+=i*K;I+=i*H;S+=i*G;N+=i*Q;C+=i*J;j+=i*V;x+=i*z;P+=i*Y;T+=i*W;i=r[14];g+=i*U;m+=i*B;A+=i*k;E+=i*$;M+=i*F;_+=i*q;O+=i*L;I+=i*K;S+=i*H;N+=i*G;C+=i*Q;j+=i*J;x+=i*V;P+=i*z;T+=i*Y;R+=i*W;i=r[15];m+=i*U;A+=i*B;E+=i*k;M+=i*$;_+=i*F;O+=i*q;I+=i*L;S+=i*K;N+=i*H;C+=i*G;j+=i*Q;x+=i*J;P+=i*V;T+=i*z;R+=i*Y;D+=i*W;s+=38*A;o+=38*E;a+=38*M;u+=38*_;h+=38*O;f+=38*I;c+=38*S;l+=38*N;d+=38*C;v+=38*j;w+=38*x;p+=38*P;y+=38*T;b+=38*R;g+=38*D;e=1;i=s+e+65535;e=Math.floor(i/65536);s=i-e*65536;i=o+e+65535;e=Math.floor(i/65536);o=i-e*65536;i=a+e+65535;e=Math.floor(i/65536);a=i-e*65536;i=u+e+65535;e=Math.floor(i/65536);u=i-e*65536;i=h+e+65535;e=Math.floor(i/65536);h=i-e*65536;i=f+e+65535;e=Math.floor(i/65536);f=i-e*65536;i=c+e+65535;e=Math.floor(i/65536);c=i-e*65536;i=l+e+65535;e=Math.floor(i/65536);l=i-e*65536;i=d+e+65535;e=Math.floor(i/65536);d=i-e*65536;i=v+e+65535;e=Math.floor(i/65536);v=i-e*65536;i=w+e+65535;e=Math.floor(i/65536);w=i-e*65536;i=p+e+65535;e=Math.floor(i/65536);p=i-e*65536;i=y+e+65535;e=Math.floor(i/65536);y=i-e*65536;i=b+e+65535;e=Math.floor(i/65536);b=i-e*65536;i=g+e+65535;e=Math.floor(i/65536);g=i-e*65536;i=m+e+65535;e=Math.floor(i/65536);m=i-e*65536;s+=e-1+37*(e-1);e=1;i=s+e+65535;e=Math.floor(i/65536);s=i-e*65536;i=o+e+65535;e=Math.floor(i/65536);o=i-e*65536;i=a+e+65535;e=Math.floor(i/65536);a=i-e*65536;i=u+e+65535;e=Math.floor(i/65536);u=i-e*65536;i=h+e+65535;e=Math.floor(i/65536);h=i-e*65536;i=f+e+65535;e=Math.floor(i/65536);f=i-e*65536;i=c+e+65535;e=Math.floor(i/65536);c=i-e*65536;i=l+e+65535;e=Math.floor(i/65536);l=i-e*65536;i=d+e+65535;e=Math.floor(i/65536);d=i-e*65536;i=v+e+65535;e=Math.floor(i/65536);v=i-e*65536;i=w+e+65535;e=Math.floor(i/65536);w=i-e*65536;i=p+e+65535;e=Math.floor(i/65536);p=i-e*65536;i=y+e+65535;e=Math.floor(i/65536);y=i-e*65536;i=b+e+65535;e=Math.floor(i/65536);b=i-e*65536;i=g+e+65535;e=Math.floor(i/65536);g=i-e*65536;i=m+e+65535;e=Math.floor(i/65536);m=i-e*65536;s+=e-1+37*(e-1);t[0]=s;t[1]=o;t[2]=a;t[3]=u;t[4]=h;t[5]=f;t[6]=c;t[7]=l;t[8]=d;t[9]=v;t[10]=w;t[11]=p;t[12]=y;t[13]=b;t[14]=g;t[15]=m}function _(t,r){M(t,r,r)}function O(t,r){const n=e();let i;for(i=0;i<16;i++){n[i]=r[i]}for(i=253;i>=0;i--){_(n,n);if(i!==2&&i!==4){M(n,n,r)}}for(i=0;i<16;i++){t[i]=n[i]}}function I(t,r){const n=e();let i;for(i=0;i<16;i++){n[i]=r[i]}for(i=250;i>=0;i--){_(n,n);if(i!==1){M(n,n,r)}}for(i=0;i<16;i++){t[i]=n[i]}}function S(t,r){const n=e(),i=e(),s=e(),o=e(),a=e(),u=e(),f=e(),c=e(),l=e();E(n,t[1],t[0]);E(l,r[1],r[0]);M(n,n,l);A(i,t[0],t[1]);A(l,r[0],r[1]);M(i,i,l);M(s,t[3],r[3]);M(s,s,h);M(o,t[2],r[2]);A(o,o,o);E(a,i,n);E(u,o,s);A(f,o,s);A(c,i,n);M(t[0],a,u);M(t[1],c,f);M(t[2],f,u);M(t[3],a,c)}function N(t,r,n){for(let i=0;i<4;i++){w(t[i],r[i],n)}}function C(t,r){const n=e(),i=e(),s=e();O(s,r[2]);M(n,r[0],s);M(i,r[1],s);p(t,i);t[31]^=g(n)<<7}function j(t,r,n){d(t[0],o);d(t[1],a);d(t[2],a);d(t[3],o);for(let i=255;i>=0;--i){const e=n[i/8|0]>>(i&7)&1;N(t,r,e);S(r,t);S(t,t);N(t,r,e)}}function x(t,r){const n=[e(),e(),e(),e()];d(n[0],f);d(n[1],c);d(n[2],a);M(n[3],f,c);j(t,n,r)}function P(r){if(r.length!==t.SEED_LENGTH){throw new Error(`ed25519: seed must be ${t.SEED_LENGTH} bytes`)}const i=(0,n.hash)(r);i[0]&=248;i[31]&=127;i[31]|=64;const s=new Uint8Array(32);const o=[e(),e(),e(),e()];x(o,i);C(s,o);const a=new Uint8Array(64);a.set(r);a.set(s,32);return{publicKey:s,secretKey:a}}t.generateKeyPairFromSeed=P;function T(t){const n=(0,r.randomBytes)(32,t);const e=P(n);(0,i.wipe)(n);return e}t.generateKeyPair=T;function R(r){if(r.length!==t.SECRET_KEY_LENGTH){throw new Error(`ed25519: secret key must be ${t.SECRET_KEY_LENGTH} bytes`)}return new Uint8Array(r.subarray(32))}t.extractPublicKeyFromSecretKey=R;const D=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function U(t,r){let n;let i;let e;let s;for(i=63;i>=32;--i){n=0;for(e=i-32,s=i-12;e<s;++e){r[e]+=n-16*r[i]*D[e-(i-32)];n=Math.floor((r[e]+128)/256);r[e]-=n*256}r[e]+=n;r[i]=0}n=0;for(e=0;e<32;e++){r[e]+=n-(r[31]>>4)*D[e];n=r[e]>>8;r[e]&=255}for(e=0;e<32;e++){r[e]-=n*D[e]}for(i=0;i<32;i++){r[i+1]+=r[i]>>8;t[i]=r[i]&255}}function B(t){const r=new Float64Array(64);for(let n=0;n<64;n++){r[n]=t[n]}for(let r=0;r<64;r++){t[r]=0}U(t,r)}function k(t,r){const i=new Float64Array(64);const s=[e(),e(),e(),e()];const o=(0,n.hash)(t.subarray(0,32));o[0]&=248;o[31]&=127;o[31]|=64;const a=new Uint8Array(64);a.set(o.subarray(32),32);const u=new n.SHA512;u.update(a.subarray(32));u.update(r);const h=u.digest();u.clean();B(h);x(s,h);C(a,s);u.reset();u.update(a.subarray(0,32));u.update(t.subarray(32));u.update(r);const f=u.digest();B(f);for(let t=0;t<32;t++){i[t]=h[t]}for(let t=0;t<32;t++){for(let r=0;r<32;r++){i[t+r]+=f[t]*o[r]}}U(a.subarray(32),i);return a}t.sign=k;function $(t,r){const n=e(),i=e(),s=e(),h=e(),f=e(),c=e(),v=e();d(t[2],a);m(t[1],r);_(s,t[1]);M(h,s,u);E(s,s,t[2]);A(h,t[2],h);_(f,h);_(c,f);M(v,c,f);M(n,v,s);M(n,n,h);I(n,n);M(n,n,s);M(n,n,h);M(n,n,h);M(t[0],n,h);_(i,t[0]);M(i,i,h);if(b(i,s)){M(t[0],t[0],l)}_(i,t[0]);M(i,i,h);if(b(i,s)){return-1}if(g(t[0])===r[31]>>7){E(t[0],o,t[0])}M(t[3],t[0],t[1]);return 0}function F(r,i,s){const o=new Uint8Array(32);const a=[e(),e(),e(),e()];const u=[e(),e(),e(),e()];if(s.length!==t.SIGNATURE_LENGTH){throw new Error(`ed25519: signature must be ${t.SIGNATURE_LENGTH} bytes`)}if($(u,r)){return false}const h=new n.SHA512;h.update(s.subarray(0,32));h.update(r);h.update(i);const f=h.digest();B(f);j(a,u,f);x(u,s.subarray(32));S(a,u);C(o,a);if(y(s,o)){return false}return true}t.verify=F;function q(t){let r=[e(),e(),e(),e()];if($(r,t)){throw new Error("Ed25519: invalid public key")}let n=e();let i=e();let s=r[1];A(n,a,s);E(i,a,s);O(i,i);M(n,n,i);let o=new Uint8Array(32);p(o,n);return o}t.convertPublicKeyToX25519=q;function L(t){const r=(0,n.hash)(t.subarray(0,32));r[0]&=248;r[31]&=127;r[31]|=64;const e=new Uint8Array(r.subarray(0,32));(0,i.wipe)(r);return e}t.convertSecretKeyToX25519=L})(Dp);const Bp="EdDSA";const kp="JWT";const $p=".";const Fp="base64url";const qp="utf8";const Lp="utf8";const Kp=":";const Hp="did";const Gp="key";const Qp="base58btc";const Jp="z";const Vp="K36";const zp=32;var Yp={};var Wp={};var Xp={};Object.defineProperty(Xp,"__esModule",{value:true});function Zp(t){if(globalThis.Buffer!=null){return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}return t}Xp.asUint8Array=Zp;Object.defineProperty(Wp,"__esModule",{value:true});var ty=Xp;function ry(t=0){if(globalThis.Buffer!=null&&globalThis.Buffer.alloc!=null){return ty.asUint8Array(globalThis.Buffer.alloc(t))}return new Uint8Array(t)}function ny(t=0){if(globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null){return ty.asUint8Array(globalThis.Buffer.allocUnsafe(t))}return new Uint8Array(t)}Wp.alloc=ry;Wp.allocUnsafe=ny;Object.defineProperty(Yp,"__esModule",{value:true});var iy=Wp;var ey=Xp;function sy(t,r){if(!r){r=t.reduce(((t,r)=>t+r.length),0)}const n=iy.allocUnsafe(r);let i=0;for(const r of t){n.set(r,i);i+=r.length}return ey.asUint8Array(n)}var oy=Yp.concat=sy;var ay={};var uy=Ln;var hy=Wp;function fy(t,r,n,i){return{name:t,prefix:r,encoder:{name:t,prefix:r,encode:n},decoder:{decode:i}}}const cy=fy("utf8","u",(t=>{const r=new TextDecoder("utf8");return"u"+r.decode(t)}),(t=>{const r=new TextEncoder;return r.encode(t.substring(1))}));const ly=fy("ascii","a",(t=>{let r="a";for(let n=0;n<t.length;n++){r+=String.fromCharCode(t[n])}return r}),(t=>{t=t.substring(1);const r=hy.allocUnsafe(t.length);for(let n=0;n<t.length;n++){r[n]=t.charCodeAt(n)}return r}));const dy={utf8:cy,"utf-8":cy,hex:uy.bases.base16,latin1:ly,ascii:ly,binary:ly,...uy.bases};var vy=dy;Object.defineProperty(ay,"__esModule",{value:true});var wy=vy;function py(t,r="utf8"){const n=wy[r];if(!n){throw new Error(`Unsupported encoding "${r}"`)}if((r==="utf8"||r==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null){return globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8")}return n.encoder.encode(t).substring(1)}var yy=ay.toString=py;var by={};Object.defineProperty(by,"__esModule",{value:true});var gy=vy;var my=Xp;function Ay(t,r="utf8"){const n=gy[r];if(!n){throw new Error(`Unsupported encoding "${r}"`)}if((r==="utf8"||r==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null){return my.asUint8Array(globalThis.Buffer.from(t,"utf-8"))}return n.decoder.decode(`${n.prefix}${t}`)}var Ey=by.fromString=Ay;const My=t=>JSON.stringify(t,((t,r)=>typeof r==="bigint"?r.toString()+"n":r));function _y(t){return typeof t==="string"?t:My(t)||""}function Oy(t){return yy(Ey(_y(t),qp),Fp)}function Iy(t){const r=Ey(Vp,Qp);const n=Jp+yy(oy([r,t]),Qp);return[Hp,Gp,n].join(Kp)}function Sy(t){return yy(t,Fp)}function Ny(t){return Ey([Oy(t.header),Oy(t.payload)].join($p),Lp)}function Cy(t){return[Oy(t.header),Oy(t.payload),Sy(t.signature)].join($p)}function jy(t=fn.randomBytes(zp)){return Dp.generateKeyPairFromSeed(t)}async function xy(t,r,n,i,e=D.fromMiliseconds(Date.now())){const s={alg:Bp,typ:kp};const o=Iy(i.publicKey);const a=e+n;const u={iss:o,sub:t,aud:r,iat:e,exp:a};const h=Ny({header:s,payload:u});const f=Dp.sign(i.secretKey,h);return Cy({header:s,payload:u,signature:f})}var Py={};var Ty={};Object.defineProperty(Ty,"__esModule",{value:true});function Ry(t,r){for(let n=0;n<t.byteLength;n++){if(t[n]<r[n]){return-1}if(t[n]>r[n]){return 1}}if(t.byteLength>r.byteLength){return 1}if(t.byteLength<r.byteLength){return-1}return 0}Ty.compare=Ry;var Dy={};var Uy={};var By={};Object.defineProperty(By,"__esModule",{value:true});function ky(t){if(globalThis.Buffer!=null){return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}return t}By.asUint8Array=ky;Object.defineProperty(Uy,"__esModule",{value:true});var $y=By;function Fy(t=0){if(globalThis.Buffer!=null&&globalThis.Buffer.alloc!=null){return $y.asUint8Array(globalThis.Buffer.alloc(t))}return new Uint8Array(t)}function qy(t=0){if(globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null){return $y.asUint8Array(globalThis.Buffer.allocUnsafe(t))}return new Uint8Array(t)}Uy.alloc=Fy;Uy.allocUnsafe=qy;Object.defineProperty(Dy,"__esModule",{value:true});var Ly=Uy;var Ky=By;function Hy(t,r){if(!r){r=t.reduce(((t,r)=>t+r.length),0)}const n=Ly.allocUnsafe(r);let i=0;for(const r of t){n.set(r,i);i+=r.length}return Ky.asUint8Array(n)}Dy.concat=Hy;var Gy={};Object.defineProperty(Gy,"__esModule",{value:true});function Qy(t,r){if(t===r){return true}if(t.byteLength!==r.byteLength){return false}for(let n=0;n<t.byteLength;n++){if(t[n]!==r[n]){return false}}return true}Gy.equals=Qy;var Jy={};var Vy=Ln;var zy=Uy;function Yy(t,r,n,i){return{name:t,prefix:r,encoder:{name:t,prefix:r,encode:n},decoder:{decode:i}}}const Wy=Yy("utf8","u",(t=>{const r=new TextDecoder("utf8");return"u"+r.decode(t)}),(t=>{const r=new TextEncoder;return r.encode(t.substring(1))}));const Xy=Yy("ascii","a",(t=>{let r="a";for(let n=0;n<t.length;n++){r+=String.fromCharCode(t[n])}return r}),(t=>{t=t.substring(1);const r=zy.allocUnsafe(t.length);for(let n=0;n<t.length;n++){r[n]=t.charCodeAt(n)}return r}));const Zy={utf8:Wy,"utf-8":Wy,hex:Vy.bases.base16,latin1:Xy,ascii:Xy,binary:Xy,...Vy.bases};var tb=Zy;Object.defineProperty(Jy,"__esModule",{value:true});var rb=tb;var nb=By;function ib(t,r="utf8"){const n=rb[r];if(!n){throw new Error(`Unsupported encoding "${r}"`)}if((r==="utf8"||r==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null){return nb.asUint8Array(globalThis.Buffer.from(t,"utf-8"))}return n.decoder.decode(`${n.prefix}${t}`)}Jy.fromString=ib;var eb={};Object.defineProperty(eb,"__esModule",{value:true});var sb=tb;function ob(t,r="utf8"){const n=sb[r];if(!n){throw new Error(`Unsupported encoding "${r}"`)}if((r==="utf8"||r==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null){return globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8")}return n.encoder.encode(t).substring(1)}eb.toString=ob;var ab={};Object.defineProperty(ab,"__esModule",{value:true});var ub=Uy;var hb=By;function fb(t,r){if(t.length!==r.length){throw new Error("Inputs should have the same length")}const n=ub.allocUnsafe(t.length);for(let i=0;i<t.length;i++){n[i]=t[i]^r[i]}return hb.asUint8Array(n)}ab.xor=fb;Object.defineProperty(Py,"__esModule",{value:true});var cb=Ty;var lb=Dy;var db=Gy;var vb=Jy;var wb=eb;var pb=ab;Py.compare=cb.compare;Py.concat=lb.concat;Py.equals=db.equals;Py.fromString=vb.fromString;var yb=Py.toString=wb.toString;Py.xor=pb.xor;const bb="PARSE_ERROR";const gb="INVALID_REQUEST";const mb="METHOD_NOT_FOUND";const Ab="INVALID_PARAMS";const Eb="INTERNAL_ERROR";const Mb="SERVER_ERROR";const _b=[-32700,-32600,-32601,-32602,-32603];const Ob={[bb]:{code:-32700,message:"Parse error"},[gb]:{code:-32600,message:"Invalid Request"},[mb]:{code:-32601,message:"Method not found"},[Ab]:{code:-32602,message:"Invalid params"},[Eb]:{code:-32603,message:"Internal error"},[Mb]:{code:-32e3,message:"Server error"}};const Ib=Mb;function Sb(t){return _b.includes(t)}function Nb(t){if(!Object.keys(Ob).includes(t)){return Ob[Ib]}return Ob[t]}function Cb(t){const r=Object.values(Ob).find((r=>r.code===t));if(!r){return Ob[Ib]}return r}function jb(t,r,n){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${n} RPC url at ${r}`):t}var xb={};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Pb=function(t,r){Pb=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)if(r.hasOwnProperty(n))t[n]=r[n]};return Pb(t,r)};function Tb(t,r){Pb(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}var Rb=function(){Rb=Object.assign||function t(r){for(var n,i=1,e=arguments.length;i<e;i++){n=arguments[i];for(var s in n)if(Object.prototype.hasOwnProperty.call(n,s))r[s]=n[s]}return r};return Rb.apply(this,arguments)};function Db(t,r){var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)&&r.indexOf(i)<0)n[i]=t[i];if(t!=null&&typeof Object.getOwnPropertySymbols==="function")for(var e=0,i=Object.getOwnPropertySymbols(t);e<i.length;e++){if(r.indexOf(i[e])<0&&Object.prototype.propertyIsEnumerable.call(t,i[e]))n[i[e]]=t[i[e]]}return n}function Ub(t,r,n,i){var e=arguments.length,s=e<3?r:i===null?i=Object.getOwnPropertyDescriptor(r,n):i,o;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")s=Reflect.decorate(t,r,n,i);else for(var a=t.length-1;a>=0;a--)if(o=t[a])s=(e<3?o(s):e>3?o(r,n,s):o(r,n))||s;return e>3&&s&&Object.defineProperty(r,n,s),s}function Bb(t,r){return function(n,i){r(n,i,t)}}function kb(t,r){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(t,r)}function $b(t,r,n,i){function e(t){return t instanceof n?t:new n((function(r){r(t)}))}return new(n||(n=Promise))((function(n,s){function o(t){try{u(i.next(t))}catch(t){s(t)}}function a(t){try{u(i["throw"](t))}catch(t){s(t)}}function u(t){t.done?n(t.value):e(t.value).then(o,a)}u((i=i.apply(t,r||[])).next())}))}function Fb(t,r){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,e,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol==="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(t){return function(r){return u([t,r])}}function u(o){if(i)throw new TypeError("Generator is already executing.");while(n)try{if(i=1,e&&(s=o[0]&2?e["return"]:o[0]?e["throw"]||((s=e["return"])&&s.call(e),0):e.next)&&!(s=s.call(e,o[1])).done)return s;if(e=0,s)o=[o[0]&2,s.value];switch(o[0]){case 0:case 1:s=o;break;case 4:n.label++;return{value:o[1],done:false};case 5:n.label++;e=o[1];o=[0];continue;case 7:o=n.ops.pop();n.trys.pop();continue;default:if(!(s=n.trys,s=s.length>0&&s[s.length-1])&&(o[0]===6||o[0]===2)){n=0;continue}if(o[0]===3&&(!s||o[1]>s[0]&&o[1]<s[3])){n.label=o[1];break}if(o[0]===6&&n.label<s[1]){n.label=s[1];s=o;break}if(s&&n.label<s[2]){n.label=s[2];n.ops.push(o);break}if(s[2])n.ops.pop();n.trys.pop();continue}o=r.call(t,n)}catch(t){o=[6,t];e=0}finally{i=s=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:true}}}function qb(t,r,n,i){if(i===undefined)i=n;t[i]=r[n]}function Lb(t,r){for(var n in t)if(n!=="default"&&!r.hasOwnProperty(n))r[n]=t[n]}function Kb(t){var r=typeof Symbol==="function"&&Symbol.iterator,n=r&&t[r],i=0;if(n)return n.call(t);if(t&&typeof t.length==="number")return{next:function(){if(t&&i>=t.length)t=void 0;return{value:t&&t[i++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}function Hb(t,r){var n=typeof Symbol==="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),e,s=[],o;try{while((r===void 0||r-- >0)&&!(e=i.next()).done)s.push(e.value)}catch(t){o={error:t}}finally{try{if(e&&!e.done&&(n=i["return"]))n.call(i)}finally{if(o)throw o.error}}return s}function Gb(){for(var t=[],r=0;r<arguments.length;r++)t=t.concat(Hb(arguments[r]));return t}function Qb(){for(var t=0,r=0,n=arguments.length;r<n;r++)t+=arguments[r].length;for(var i=Array(t),e=0,r=0;r<n;r++)for(var s=arguments[r],o=0,a=s.length;o<a;o++,e++)i[e]=s[o];return i}function Jb(t){return this instanceof Jb?(this.v=t,this):new Jb(t)}function Vb(t,r,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,r||[]),e,s=[];return e={},o("next"),o("throw"),o("return"),e[Symbol.asyncIterator]=function(){return this},e;function o(t){if(i[t])e[t]=function(r){return new Promise((function(n,i){s.push([t,r,n,i])>1||a(t,r)}))}}function a(t,r){try{u(i[t](r))}catch(t){c(s[0][3],t)}}function u(t){t.value instanceof Jb?Promise.resolve(t.value.v).then(h,f):c(s[0][2],t)}function h(t){a("next",t)}function f(t){a("throw",t)}function c(t,r){if(t(r),s.shift(),s.length)a(s[0][0],s[0][1])}}function zb(t){var r,n;return r={},i("next"),i("throw",(function(t){throw t})),i("return"),r[Symbol.iterator]=function(){return this},r;function i(i,e){r[i]=t[i]?function(r){return(n=!n)?{value:Jb(t[i](r)),done:i==="return"}:e?e(r):r}:e}}function Yb(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t[Symbol.asyncIterator],n;return r?r.call(t):(t=typeof Kb==="function"?Kb(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(r){n[r]=t[r]&&function(n){return new Promise((function(i,s){n=t[r](n),e(i,s,n.done,n.value)}))}}function e(t,r,n,i){Promise.resolve(i).then((function(r){t({value:r,done:n})}),r)}}function Wb(t,r){if(Object.defineProperty){Object.defineProperty(t,"raw",{value:r})}else{t.raw=r}return t}function Xb(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var n in t)if(Object.hasOwnProperty.call(t,n))r[n]=t[n];r.default=t;return r}function Zb(t){return t&&t.__esModule?t:{default:t}}function tg(t,r){if(!r.has(t)){throw new TypeError("attempted to get private field on non-instance")}return r.get(t)}function rg(t,r,n){if(!r.has(t)){throw new TypeError("attempted to set private field on non-instance")}r.set(t,n);return n}const ng=Object.freeze({__proto__:null,__extends:Tb,get __assign(){return Rb},__rest:Db,__decorate:Ub,__param:Bb,__metadata:kb,__awaiter:$b,__generator:Fb,__createBinding:qb,__exportStar:Lb,__values:Kb,__read:Hb,__spread:Gb,__spreadArrays:Qb,__await:Jb,__asyncGenerator:Vb,__asyncDelegator:zb,__asyncValues:Yb,__makeTemplateObject:Wb,__importStar:Xb,__importDefault:Zb,__classPrivateFieldGet:tg,__classPrivateFieldSet:rg});const ig=e(ng);var eg={};Object.defineProperty(eg,"__esModule",{value:true});eg.isBrowserCryptoAvailable=eg.getSubtleCrypto=eg.getBrowerCrypto=void 0;function sg(){return(p===null||p===void 0?void 0:p.crypto)||(p===null||p===void 0?void 0:p.msCrypto)||{}}eg.getBrowerCrypto=sg;function og(){const t=sg();return t.subtle||t.webkitSubtle}eg.getSubtleCrypto=og;function ag(){return!!sg()&&!!og()}eg.isBrowserCryptoAvailable=ag;var ug={};Object.defineProperty(ug,"__esModule",{value:true});ug.isBrowser=ug.isNode=ug.isReactNative=void 0;function hg(){return typeof document==="undefined"&&typeof navigator!=="undefined"&&navigator.product==="ReactNative"}ug.isReactNative=hg;function fg(){return typeof i!=="undefined"&&typeof i.versions!=="undefined"&&typeof i.versions.node!=="undefined"}ug.isNode=fg;function cg(){return!hg()&&!fg()}ug.isBrowser=cg;(function(t){Object.defineProperty(t,"__esModule",{value:true});const r=ig;r.__exportStar(eg,t);r.__exportStar(ug,t)})(xb);function lg(t=3){const r=Date.now()*Math.pow(10,t);const n=Math.floor(Math.random()*Math.pow(10,t));return r+n}function dg(t=6){return BigInt(lg(t))}function vg(t,r,n){return{id:n||lg(),jsonrpc:"2.0",method:t,params:r}}function wg(t,r){return{id:t,jsonrpc:"2.0",result:r}}function pg(t,r,n){return{id:t,jsonrpc:"2.0",error:yg(r,n)}}function yg(t,r){if(typeof t==="undefined"){return Nb(Eb)}if(typeof t==="string"){t=Object.assign(Object.assign({},Nb(Mb)),{message:t})}if(typeof r!=="undefined"){t.data=r}if(Sb(t.code)){t=Cb(t.code)}return t}class bg{}class gg extends bg{constructor(){super()}}class mg extends gg{constructor(t){super()}}const Ag="^https?:";const Eg="^wss?:";function Mg(t){const r=t.match(new RegExp(/^\w+:/,"gi"));if(!r||!r.length)return;return r[0]}function _g(t,r){const n=Mg(t);if(typeof n==="undefined")return false;return new RegExp(r).test(n)}function Og(t){return _g(t,Ag)}function Ig(t){return _g(t,Eg)}function Sg(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function Ng(t){return typeof t==="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function Cg(t){return Ng(t)&&"method"in t}function jg(t){return Ng(t)&&(xg(t)||Pg(t))}function xg(t){return"result"in t}function Pg(t){return"error"in t}class Tg extends mg{constructor(r){super(r);this.events=new t.exports.EventEmitter;this.hasRegisteredEventListeners=false;this.connection=this.setConnection(r);if(this.connection.connected){this.registerEventListeners()}}async connect(t=this.connection){await this.open(t)}async disconnect(){await this.close()}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}off(t,r){this.events.off(t,r)}removeListener(t,r){this.events.removeListener(t,r)}async request(t,r){return this.requestStrict(vg(t.method,t.params||[],t.id||dg().toString()),r)}async requestStrict(t,r){return new Promise((async(n,i)=>{if(!this.connection.connected){try{await this.open()}catch(t){i(t)}}this.events.on(`${t.id}`,(t=>{if(Pg(t)){i(t.error)}else{n(t.result)}}));try{await this.connection.send(t,r)}catch(t){i(t)}}))}setConnection(t=this.connection){return t}onPayload(t){this.events.emit("payload",t);if(jg(t)){this.events.emit(`${t.id}`,t)}else{this.events.emit("message",{type:t.method,data:t.params})}}onClose(t){if(t&&t.code===3e3){this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${t.code} ${t.reason?`(${t.reason})`:""}`))}this.events.emit("disconnect")}async open(t=this.connection){if(this.connection===t&&this.connection.connected)return;if(this.connection.connected)this.close();if(typeof t==="string"){await this.connection.open(t);t=this.connection}this.connection=this.setConnection(t);await this.connection.open();this.registerEventListeners();this.events.emit("connect")}async close(){await this.connection.close()}registerEventListeners(){if(this.hasRegisteredEventListeners)return;this.connection.on("payload",(t=>this.onPayload(t)));this.connection.on("close",(t=>this.onClose(t)));this.connection.on("error",(t=>this.events.emit("error",t)));this.connection.on("register_error",(t=>this.onClose()));this.hasRegisteredEventListeners=true}}const Rg=t=>JSON.stringify(t,((t,r)=>typeof r==="bigint"?r.toString()+"n":r));const Dg=t=>{const r=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g;const n=t.replace(r,'$1"$2n"$3');return JSON.parse(n,((t,r)=>{const n=typeof r==="string"&&r.match(/^\d+n$/);if(n)return BigInt(r.substring(0,r.length-1));return r}))};function Ug(t){if(typeof t!=="string"){throw new Error(`Cannot safe json parse value of type ${typeof t}`)}try{return Dg(t)}catch(r){return t}}function Bg(t){return typeof t==="string"?t:Rg(t)||""}const kg=()=>typeof WebSocket<"u"?WebSocket:typeof v<"u"&&typeof v.WebSocket<"u"?v.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),$g=()=>typeof WebSocket<"u"||typeof v<"u"&&typeof v.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",Fg=t=>t.split("?")[0],qg=10,Lg=kg();class Kg{constructor(r){if(this.url=r,this.events=new t.exports.EventEmitter,this.registering=!1,!Ig(r))throw new Error(`Provided URL is not compatible with WebSocket connection: ${r}`);this.url=r}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}off(t,r){this.events.off(t,r)}removeListener(t,r){this.events.removeListener(t,r)}async open(t=this.url){await this.register(t)}async close(){return new Promise(((t,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=r=>{this.onClose(r),t()},this.socket.close()}))}async send(t){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Bg(t))}catch(r){this.onError(t.id,r)}}register(t=this.url){if(!Ig(t))throw new Error(`Provided URL is not compatible with WebSocket connection: ${t}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise(((t,r)=>{this.events.once("register_error",(t=>{this.resetMaxListeners(),r(t)})),this.events.once("open",(()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return r(new Error("WebSocket connection is missing or invalid"));t(this.socket)}))}))}return this.url=t,this.registering=!0,new Promise(((r,n)=>{const i=new URLSearchParams(t).get("origin"),e=xb.isReactNative()?{headers:{origin:i}}:{rejectUnauthorized:!Sg(t)},s=new Lg(t,[],e);$g()?s.onerror=t=>{const r=t;n(this.emitError(r.error))}:s.on("error",(t=>{n(this.emitError(t))})),s.onopen=()=>{this.onOpen(s),r(s)}}))}onOpen(t){t.onmessage=t=>this.onPayload(t),t.onclose=t=>this.onClose(t),this.socket=t,this.registering=!1,this.events.emit("open")}onClose(t){this.socket=void 0,this.registering=!1,this.events.emit("close",t)}onPayload(t){if(typeof t.data>"u")return;const r=typeof t.data=="string"?Ug(t.data):t.data;this.events.emit("payload",r)}onError(t,r){const n=this.parseError(r),i=n.message||n.toString(),e=pg(t,i);this.events.emit("payload",e)}parseError(t,r=this.url){return jb(t,Fg(r),"WS")}resetMaxListeners(){this.events.getMaxListeners()>qg&&this.events.setMaxListeners(qg)}emitError(t){const r=this.parseError(new Error(t?.message||`WebSocket connection failed for host: ${Fg(this.url)}`));return this.events.emit("register_error",r),r}}var Hg={exports:{}};(function(t,r){var n=200;var i="__lodash_hash_undefined__";var e=1,s=2;var o=9007199254740991;var a="[object Arguments]",u="[object Array]",h="[object AsyncFunction]",f="[object Boolean]",c="[object Date]",l="[object Error]",d="[object Function]",v="[object GeneratorFunction]",w="[object Map]",y="[object Number]",b="[object Null]",g="[object Object]",m="[object Promise]",A="[object Proxy]",E="[object RegExp]",M="[object Set]",_="[object String]",O="[object Symbol]",I="[object Undefined]",S="[object WeakMap]";var N="[object ArrayBuffer]",C="[object DataView]",j="[object Float32Array]",x="[object Float64Array]",P="[object Int8Array]",T="[object Int16Array]",R="[object Int32Array]",D="[object Uint8Array]",U="[object Uint8ClampedArray]",B="[object Uint16Array]",k="[object Uint32Array]";var $=/[\\^$.*+?()[\]{}|]/g;var F=/^\[object .+?Constructor\]$/;var q=/^(?:0|[1-9]\d*)$/;var L={};L[j]=L[x]=L[P]=L[T]=L[R]=L[D]=L[U]=L[B]=L[k]=true;L[a]=L[u]=L[N]=L[f]=L[C]=L[c]=L[l]=L[d]=L[w]=L[y]=L[g]=L[E]=L[M]=L[_]=L[S]=false;var K=typeof p=="object"&&p&&p.Object===Object&&p;var H=typeof self=="object"&&self&&self.Object===Object&&self;var G=K||H||Function("return this")();var Q=r&&!r.nodeType&&r;var J=Q&&"object"=="object"&&t&&!t.nodeType&&t;var V=J&&J.exports===Q;var z=V&&K.process;var Y=function(){try{return z&&z.binding&&z.binding("util")}catch(t){}}();var W=Y&&Y.isTypedArray;function X(t,r){var n=-1,i=t==null?0:t.length,e=0,s=[];while(++n<i){var o=t[n];if(r(o,n,t)){s[e++]=o}}return s}function Z(t,r){var n=-1,i=r.length,e=t.length;while(++n<i){t[e+n]=r[n]}return t}function tt(t,r){var n=-1,i=t==null?0:t.length;while(++n<i){if(r(t[n],n,t)){return true}}return false}function rt(t,r){var n=-1,i=Array(t);while(++n<t){i[n]=r(n)}return i}function nt(t){return function(r){return t(r)}}function it(t,r){return t.has(r)}function et(t,r){return t==null?undefined:t[r]}function st(t){var r=-1,n=Array(t.size);t.forEach((function(t,i){n[++r]=[i,t]}));return n}function ot(t,r){return function(n){return t(r(n))}}function at(t){var r=-1,n=Array(t.size);t.forEach((function(t){n[++r]=t}));return n}var ut=Array.prototype,ht=Function.prototype,ft=Object.prototype;var ct=G["__core-js_shared__"];var lt=ht.toString;var dt=ft.hasOwnProperty;var vt=function(){var t=/[^.]+$/.exec(ct&&ct.keys&&ct.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();var wt=ft.toString;var pt=RegExp("^"+lt.call(dt).replace($,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var yt=V?G.Buffer:undefined,bt=G.Symbol,gt=G.Uint8Array,mt=ft.propertyIsEnumerable,At=ut.splice,Et=bt?bt.toStringTag:undefined;var Mt=Object.getOwnPropertySymbols,_t=yt?yt.isBuffer:undefined,Ot=ot(Object.keys,Object);var It=Sr(G,"DataView"),St=Sr(G,"Map"),Nt=Sr(G,"Promise"),Ct=Sr(G,"Set"),jt=Sr(G,"WeakMap"),xt=Sr(Object,"create");var Pt=Ur(It),Tt=Ur(St),Rt=Ur(Nt),Dt=Ur(Ct),Ut=Ur(jt);var Bt=bt?bt.prototype:undefined,kt=Bt?Bt.valueOf:undefined;function $t(t){var r=-1,n=t==null?0:t.length;this.clear();while(++r<n){var i=t[r];this.set(i[0],i[1])}}function Ft(){this.__data__=xt?xt(null):{};this.size=0}function qt(t){var r=this.has(t)&&delete this.__data__[t];this.size-=r?1:0;return r}function Lt(t){var r=this.__data__;if(xt){var n=r[t];return n===i?undefined:n}return dt.call(r,t)?r[t]:undefined}function Kt(t){var r=this.__data__;return xt?r[t]!==undefined:dt.call(r,t)}function Ht(t,r){var n=this.__data__;this.size+=this.has(t)?0:1;n[t]=xt&&r===undefined?i:r;return this}$t.prototype.clear=Ft;$t.prototype["delete"]=qt;$t.prototype.get=Lt;$t.prototype.has=Kt;$t.prototype.set=Ht;function Gt(t){var r=-1,n=t==null?0:t.length;this.clear();while(++r<n){var i=t[r];this.set(i[0],i[1])}}function Qt(){this.__data__=[];this.size=0}function Jt(t){var r=this.__data__,n=dr(r,t);if(n<0){return false}var i=r.length-1;if(n==i){r.pop()}else{At.call(r,n,1)}--this.size;return true}function Vt(t){var r=this.__data__,n=dr(r,t);return n<0?undefined:r[n][1]}function zt(t){return dr(this.__data__,t)>-1}function Yt(t,r){var n=this.__data__,i=dr(n,t);if(i<0){++this.size;n.push([t,r])}else{n[i][1]=r}return this}Gt.prototype.clear=Qt;Gt.prototype["delete"]=Jt;Gt.prototype.get=Vt;Gt.prototype.has=zt;Gt.prototype.set=Yt;function Wt(t){var r=-1,n=t==null?0:t.length;this.clear();while(++r<n){var i=t[r];this.set(i[0],i[1])}}function Xt(){this.size=0;this.__data__={hash:new $t,map:new(St||Gt),string:new $t}}function Zt(t){var r=Ir(this,t)["delete"](t);this.size-=r?1:0;return r}function tr(t){return Ir(this,t).get(t)}function rr(t){return Ir(this,t).has(t)}function nr(t,r){var n=Ir(this,t),i=n.size;n.set(t,r);this.size+=n.size==i?0:1;return this}Wt.prototype.clear=Xt;Wt.prototype["delete"]=Zt;Wt.prototype.get=tr;Wt.prototype.has=rr;Wt.prototype.set=nr;function ir(t){var r=-1,n=t==null?0:t.length;this.__data__=new Wt;while(++r<n){this.add(t[r])}}function er(t){this.__data__.set(t,i);return this}function sr(t){return this.__data__.has(t)}ir.prototype.add=ir.prototype.push=er;ir.prototype.has=sr;function or(t){var r=this.__data__=new Gt(t);this.size=r.size}function ar(){this.__data__=new Gt;this.size=0}function ur(t){var r=this.__data__,n=r["delete"](t);this.size=r.size;return n}function hr(t){return this.__data__.get(t)}function fr(t){return this.__data__.has(t)}function cr(t,r){var i=this.__data__;if(i instanceof Gt){var e=i.__data__;if(!St||e.length<n-1){e.push([t,r]);this.size=++i.size;return this}i=this.__data__=new Wt(e)}i.set(t,r);this.size=i.size;return this}or.prototype.clear=ar;or.prototype["delete"]=ur;or.prototype.get=hr;or.prototype.has=fr;or.prototype.set=cr;function lr(t,r){var n=$r(t),i=!n&&kr(t),e=!n&&!i&&qr(t),s=!n&&!i&&!e&&Jr(t),o=n||i||e||s,a=o?rt(t.length,String):[],u=a.length;for(var h in t){if((r||dt.call(t,h))&&!(o&&(h=="length"||e&&(h=="offset"||h=="parent")||s&&(h=="buffer"||h=="byteLength"||h=="byteOffset")||xr(h,u)))){a.push(h)}}return a}function dr(t,r){var n=t.length;while(n--){if(Br(t[n][0],r)){return n}}return-1}function vr(t,r,n){var i=r(t);return $r(t)?i:Z(i,n(t))}function wr(t){if(t==null){return t===undefined?I:b}return Et&&Et in Object(t)?Nr(t):Dr(t)}function pr(t){return Qr(t)&&wr(t)==a}function yr(t,r,n,i,e){if(t===r){return true}if(t==null||r==null||!Qr(t)&&!Qr(r)){return t!==t&&r!==r}return br(t,r,n,i,yr,e)}function br(t,r,n,i,s,o){var h=$r(t),f=$r(r),c=h?u:jr(t),l=f?u:jr(r);c=c==a?g:c;l=l==a?g:l;var d=c==g,v=l==g,w=c==l;if(w&&qr(t)){if(!qr(r)){return false}h=true;d=false}if(w&&!d){o||(o=new or);return h||Jr(t)?Er(t,r,n,i,s,o):Mr(t,r,c,n,i,s,o)}if(!(n&e)){var p=d&&dt.call(t,"__wrapped__"),y=v&&dt.call(r,"__wrapped__");if(p||y){var b=p?t.value():t,m=y?r.value():r;o||(o=new or);return s(b,m,n,i,o)}}if(!w){return false}o||(o=new or);return _r(t,r,n,i,s,o)}function gr(t){if(!Gr(t)||Tr(t)){return false}var r=Kr(t)?pt:F;return r.test(Ur(t))}function mr(t){return Qr(t)&&Hr(t.length)&&!!L[wr(t)]}function Ar(t){if(!Rr(t)){return Ot(t)}var r=[];for(var n in Object(t)){if(dt.call(t,n)&&n!="constructor"){r.push(n)}}return r}function Er(t,r,n,i,o,a){var u=n&e,h=t.length,f=r.length;if(h!=f&&!(u&&f>h)){return false}var c=a.get(t);if(c&&a.get(r)){return c==r}var l=-1,d=true,v=n&s?new ir:undefined;a.set(t,r);a.set(r,t);while(++l<h){var w=t[l],p=r[l];if(i){var y=u?i(p,w,l,r,t,a):i(w,p,l,t,r,a)}if(y!==undefined){if(y){continue}d=false;break}if(v){if(!tt(r,(function(t,r){if(!it(v,r)&&(w===t||o(w,t,n,i,a))){return v.push(r)}}))){d=false;break}}else if(!(w===p||o(w,p,n,i,a))){d=false;break}}a["delete"](t);a["delete"](r);return d}function Mr(t,r,n,i,o,a,u){switch(n){case C:if(t.byteLength!=r.byteLength||t.byteOffset!=r.byteOffset){return false}t=t.buffer;r=r.buffer;case N:if(t.byteLength!=r.byteLength||!a(new gt(t),new gt(r))){return false}return true;case f:case c:case y:return Br(+t,+r);case l:return t.name==r.name&&t.message==r.message;case E:case _:return t==r+"";case w:var h=st;case M:var d=i&e;h||(h=at);if(t.size!=r.size&&!d){return false}var v=u.get(t);if(v){return v==r}i|=s;u.set(t,r);var p=Er(h(t),h(r),i,o,a,u);u["delete"](t);return p;case O:if(kt){return kt.call(t)==kt.call(r)}}return false}function _r(t,r,n,i,s,o){var a=n&e,u=Or(t),h=u.length,f=Or(r),c=f.length;if(h!=c&&!a){return false}var l=h;while(l--){var d=u[l];if(!(a?d in r:dt.call(r,d))){return false}}var v=o.get(t);if(v&&o.get(r)){return v==r}var w=true;o.set(t,r);o.set(r,t);var p=a;while(++l<h){d=u[l];var y=t[d],b=r[d];if(i){var g=a?i(b,y,d,r,t,o):i(y,b,d,t,r,o)}if(!(g===undefined?y===b||s(y,b,n,i,o):g)){w=false;break}p||(p=d=="constructor")}if(w&&!p){var m=t.constructor,A=r.constructor;if(m!=A&&("constructor"in t&&"constructor"in r)&&!(typeof m=="function"&&m instanceof m&&typeof A=="function"&&A instanceof A)){w=false}}o["delete"](t);o["delete"](r);return w}function Or(t){return vr(t,Vr,Cr)}function Ir(t,r){var n=t.__data__;return Pr(r)?n[typeof r=="string"?"string":"hash"]:n.map}function Sr(t,r){var n=et(t,r);return gr(n)?n:undefined}function Nr(t){var r=dt.call(t,Et),n=t[Et];try{t[Et]=undefined;var i=true}catch(t){}var e=wt.call(t);if(i){if(r){t[Et]=n}else{delete t[Et]}}return e}var Cr=!Mt?zr:function(t){if(t==null){return[]}t=Object(t);return X(Mt(t),(function(r){return mt.call(t,r)}))};var jr=wr;if(It&&jr(new It(new ArrayBuffer(1)))!=C||St&&jr(new St)!=w||Nt&&jr(Nt.resolve())!=m||Ct&&jr(new Ct)!=M||jt&&jr(new jt)!=S){jr=function(t){var r=wr(t),n=r==g?t.constructor:undefined,i=n?Ur(n):"";if(i){switch(i){case Pt:return C;case Tt:return w;case Rt:return m;case Dt:return M;case Ut:return S}}return r}}function xr(t,r){r=r==null?o:r;return!!r&&(typeof t=="number"||q.test(t))&&(t>-1&&t%1==0&&t<r)}function Pr(t){var r=typeof t;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?t!=="__proto__":t===null}function Tr(t){return!!vt&&vt in t}function Rr(t){var r=t&&t.constructor,n=typeof r=="function"&&r.prototype||ft;return t===n}function Dr(t){return wt.call(t)}function Ur(t){if(t!=null){try{return lt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Br(t,r){return t===r||t!==t&&r!==r}var kr=pr(function(){return arguments}())?pr:function(t){return Qr(t)&&dt.call(t,"callee")&&!mt.call(t,"callee")};var $r=Array.isArray;function Fr(t){return t!=null&&Hr(t.length)&&!Kr(t)}var qr=_t||Yr;function Lr(t,r){return yr(t,r)}function Kr(t){if(!Gr(t)){return false}var r=wr(t);return r==d||r==v||r==h||r==A}function Hr(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=o}function Gr(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")}function Qr(t){return t!=null&&typeof t=="object"}var Jr=W?nt(W):mr;function Vr(t){return Fr(t)?lr(t):Ar(t)}function zr(){return[]}function Yr(){return false}t.exports=Lr})(Hg,Hg.exports);const Gg=Hg.exports;function Qg(t,r){return r=r||{},new Promise((function(n,i){var e=new XMLHttpRequest,s=[],o=[],a={},u=function(){return{ok:2==(e.status/100|0),statusText:e.statusText,status:e.status,url:e.responseURL,text:function(){return Promise.resolve(e.responseText)},json:function(){return Promise.resolve(e.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([e.response]))},clone:u,headers:{keys:function(){return s},entries:function(){return o},get:function(t){return a[t.toLowerCase()]},has:function(t){return t.toLowerCase()in a}}}};for(var h in e.open(r.method||"get",t,!0),e.onload=function(){e.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,(function(t,r,n){s.push(r=r.toLowerCase()),o.push([r,n]),a[r]=a[r]?a[r]+","+n:n})),n(u())},e.onerror=i,e.withCredentials="include"==r.credentials,r.headers)e.setRequestHeader(h,r.headers[h]);e.send(r.body||null)}))}const Jg=Object.freeze({__proto__:null,default:Qg});const Vg=e(Jg);var zg=self.fetch||(self.fetch=Vg.default||Vg);function Yg(t,r){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),i=0;i<n.length;i++)n[i]=255;for(var e=0;e<t.length;e++){var s=t.charAt(e),o=s.charCodeAt(0);if(n[o]!==255)throw new TypeError(s+" is ambiguous");n[o]=e}var a=t.length,u=t.charAt(0),h=Math.log(a)/Math.log(256),f=Math.log(256)/Math.log(a);function c(r){if(r instanceof Uint8Array||(ArrayBuffer.isView(r)?r=new Uint8Array(r.buffer,r.byteOffset,r.byteLength):Array.isArray(r)&&(r=Uint8Array.from(r))),!(r instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(r.length===0)return"";for(var n=0,i=0,e=0,s=r.length;e!==s&&r[e]===0;)e++,n++;for(var o=(s-e)*f+1>>>0,h=new Uint8Array(o);e!==s;){for(var c=r[e],l=0,d=o-1;(c!==0||l<i)&&d!==-1;d--,l++)c+=256*h[d]>>>0,h[d]=c%a>>>0,c=c/a>>>0;if(c!==0)throw new Error("Non-zero carry");i=l,e++}for(var v=o-i;v!==o&&h[v]===0;)v++;for(var w=u.repeat(n);v<o;++v)w+=t.charAt(h[v]);return w}function l(t){if(typeof t!="string")throw new TypeError("Expected String");if(t.length===0)return new Uint8Array;var r=0;if(t[r]!==" "){for(var i=0,e=0;t[r]===u;)i++,r++;for(var s=(t.length-r)*h+1>>>0,o=new Uint8Array(s);t[r];){var f=n[t.charCodeAt(r)];if(f===255)return;for(var c=0,l=s-1;(f!==0||c<e)&&l!==-1;l--,c++)f+=a*o[l]>>>0,o[l]=f%256>>>0,f=f/256>>>0;if(f!==0)throw new Error("Non-zero carry");e=c,r++}if(t[r]!==" "){for(var d=s-e;d!==s&&o[d]===0;)d++;for(var v=new Uint8Array(i+(s-d)),w=i;d!==s;)v[w++]=o[d++];return v}}}function d(t){var n=l(t);if(n)return n;throw new Error(`Non-${r} character`)}return{encode:c,decodeUnsafe:l,decode:d}}var Wg=Yg,Xg=Wg;const Zg=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},tm=t=>(new TextEncoder).encode(t),rm=t=>(new TextDecoder).decode(t);class nm{constructor(t,r,n){this.name=t,this.prefix=r,this.baseEncode=n}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class im{constructor(t,r,n){if(this.name=t,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return sm(this,t)}}class em{constructor(t){this.decoders=t}or(t){return sm(this,t)}decode(t){const r=t[0],n=this.decoders[r];if(n)return n.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const sm=(t,r)=>new em({...t.decoders||{[t.prefix]:t},...r.decoders||{[r.prefix]:r}});class om{constructor(t,r,n,i){this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new nm(t,r,n),this.decoder=new im(t,r,i)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const am=({name:t,prefix:r,encode:n,decode:i})=>new om(t,r,n,i),um=({prefix:t,name:r,alphabet:n})=>{const{encode:i,decode:e}=Xg(n,r);return am({prefix:t,name:r,encode:i,decode:t=>Zg(e(t))})},hm=(t,r,n,i)=>{const e={};for(let t=0;t<r.length;++t)e[r[t]]=t;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*n/8|0);let a=0,u=0,h=0;for(let r=0;r<s;++r){const s=e[t[r]];if(s===void 0)throw new SyntaxError(`Non-${i} character`);u=u<<n|s,a+=n,a>=8&&(a-=8,o[h++]=255&u>>a)}if(a>=n||255&u<<8-a)throw new SyntaxError("Unexpected end of data");return o},fm=(t,r,n)=>{const i=r[r.length-1]==="=",e=(1<<n)-1;let s="",o=0,a=0;for(let i=0;i<t.length;++i)for(a=a<<8|t[i],o+=8;o>n;)o-=n,s+=r[e&a>>o];if(o&&(s+=r[e&a<<n-o]),i)for(;s.length*n&7;)s+="=";return s},cm=({name:t,prefix:r,bitsPerChar:n,alphabet:i})=>am({prefix:r,name:t,encode(t){return fm(t,i,n)},decode(r){return hm(r,i,n,t)}}),lm=am({prefix:"\0",name:"identity",encode:t=>rm(t),decode:t=>tm(t)});var dm=Object.freeze({__proto__:null,identity:lm});const vm=cm({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var wm=Object.freeze({__proto__:null,base2:vm});const pm=cm({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var ym=Object.freeze({__proto__:null,base8:pm});const bm=um({prefix:"9",name:"base10",alphabet:"0123456789"});var gm=Object.freeze({__proto__:null,base10:bm});const mm=cm({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Am=cm({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Em=Object.freeze({__proto__:null,base16:mm,base16upper:Am});const Mm=cm({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),_m=cm({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Om=cm({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Im=cm({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Sm=cm({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Nm=cm({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Cm=cm({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),jm=cm({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),xm=cm({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Pm=Object.freeze({__proto__:null,base32:Mm,base32upper:_m,base32pad:Om,base32padupper:Im,base32hex:Sm,base32hexupper:Nm,base32hexpad:Cm,base32hexpadupper:jm,base32z:xm});const Tm=um({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Rm=um({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Dm=Object.freeze({__proto__:null,base36:Tm,base36upper:Rm});const Um=um({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Bm=um({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var km=Object.freeze({__proto__:null,base58btc:Um,base58flickr:Bm});const $m=cm({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Fm=cm({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),qm=cm({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Lm=cm({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Km=Object.freeze({__proto__:null,base64:$m,base64pad:Fm,base64url:qm,base64urlpad:Lm});const Hm=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),Gm=Hm.reduce(((t,r,n)=>(t[n]=r,t)),[]),Qm=Hm.reduce(((t,r,n)=>(t[r.codePointAt(0)]=n,t)),[]);function Jm(t){return t.reduce(((t,r)=>(t+=Gm[r],t)),"")}function Vm(t){const r=[];for(const n of t){const t=Qm[n.codePointAt(0)];if(t===void 0)throw new Error(`Non-base256emoji character: ${n}`);r.push(t)}return new Uint8Array(r)}const zm=am({prefix:"🚀",name:"base256emoji",encode:Jm,decode:Vm});var Ym=Object.freeze({__proto__:null,base256emoji:zm}),Wm=nA,Xm=128,Zm=127,tA=~Zm,rA=Math.pow(2,31);function nA(t,r,n){r=r||[],n=n||0;for(var i=n;t>=rA;)r[n++]=t&255|Xm,t/=128;for(;t&tA;)r[n++]=t&255|Xm,t>>>=7;return r[n]=t|0,nA.bytes=n-i+1,r}var iA=oA,eA=128,sA=127;function oA(t,r){var n=0,r=r||0,i=0,e=r,s,o=t.length;do{if(e>=o)throw oA.bytes=0,new RangeError("Could not decode varint");s=t[e++],n+=i<28?(s&sA)<<i:(s&sA)*Math.pow(2,i),i+=7}while(s>=eA);return oA.bytes=e-r,n}var aA=Math.pow(2,7),uA=Math.pow(2,14),hA=Math.pow(2,21),fA=Math.pow(2,28),cA=Math.pow(2,35),lA=Math.pow(2,42),dA=Math.pow(2,49),vA=Math.pow(2,56),wA=Math.pow(2,63),pA=function(t){return t<aA?1:t<uA?2:t<hA?3:t<fA?4:t<cA?5:t<lA?6:t<dA?7:t<vA?8:t<wA?9:10},yA={encode:Wm,decode:iA,encodingLength:pA},bA=yA;const gA=(t,r,n=0)=>(bA.encode(t,r,n),r),mA=t=>bA.encodingLength(t),AA=(t,r)=>{const n=r.byteLength,i=mA(t),e=i+mA(n),s=new Uint8Array(e+n);return gA(t,s,0),gA(n,s,i),s.set(r,e),new EA(t,n,r,s)};class EA{constructor(t,r,n,i){this.code=t,this.size=r,this.digest=n,this.bytes=i}}const MA=({name:t,code:r,encode:n})=>new _A(t,r,n);class _A{constructor(t,r,n){this.name=t,this.code=r,this.encode=n}digest(t){if(t instanceof Uint8Array){const r=this.encode(t);return r instanceof Uint8Array?AA(this.code,r):r.then((t=>AA(this.code,t)))}else throw Error("Unknown type, must be binary type")}}const OA=t=>async r=>new Uint8Array(await crypto.subtle.digest(t,r)),IA=MA({name:"sha2-256",code:18,encode:OA("SHA-256")}),SA=MA({name:"sha2-512",code:19,encode:OA("SHA-512")});Object.freeze({__proto__:null,sha256:IA,sha512:SA});const NA=0,CA="identity",jA=Zg,xA=t=>AA(NA,jA(t)),PA={code:NA,name:CA,encode:jA,digest:xA};Object.freeze({__proto__:null,identity:PA});new TextEncoder,new TextDecoder;const TA={...dm,...wm,...ym,...gm,...Em,...Pm,...Dm,...km,...Km,...Ym};function RA(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function DA(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?RA(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function UA(t,r,n,i){return{name:t,prefix:r,encoder:{name:t,prefix:r,encode:n},decoder:{decode:i}}}const BA=UA("utf8","u",(t=>"u"+new TextDecoder("utf8").decode(t)),(t=>(new TextEncoder).encode(t.substring(1)))),kA=UA("ascii","a",(t=>{let r="a";for(let n=0;n<t.length;n++)r+=String.fromCharCode(t[n]);return r}),(t=>{t=t.substring(1);const r=DA(t.length);for(let n=0;n<t.length;n++)r[n]=t.charCodeAt(n);return r})),$A={utf8:BA,"utf-8":BA,hex:TA.base16,latin1:kA,ascii:kA,binary:kA,...TA};function FA(t,r="utf8"){const n=$A[r];if(!n)throw new Error(`Unsupported encoding "${r}"`);return(r==="utf8"||r==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?RA(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}const qA="wc",LA=2,KA="core",HA=`${qA}@2:${KA}:`,GA={name:KA,logger:"error"},QA={database:":memory:"},JA="crypto",VA="client_ed25519_seed",zA=D.ONE_DAY,YA="keychain",WA="0.3",XA="messages",ZA="0.3",tE=D.SIX_HOURS,rE="publisher",nE="irn",iE="error",eE="wss://relay.walletconnect.com",sE="wss://relay.walletconnect.org",oE="relayer",aE={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},uE="_subscription",hE={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},fE=D.ONE_SECOND,cE="2.12.1",lE=1e4,dE="0.3",vE="WALLETCONNECT_CLIENT_ID",wE={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},pE="subscription",yE="0.3",bE=D.FIVE_SECONDS*1e3,gE="pairing",mE="0.3",AE={wc_pairingDelete:{req:{ttl:D.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:D.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:D.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:D.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:D.ONE_DAY,prompt:!1,tag:0},res:{ttl:D.ONE_DAY,prompt:!1,tag:0}}},EE={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},ME={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},_E="history",OE="0.3",IE="expirer",SE={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},NE="0.3",CE="verify-api",jE="https://verify.walletconnect.com",xE="https://verify.walletconnect.org",PE=[jE,xE],TE="echo",RE="https://echo.walletconnect.com";class DE{constructor(t,r){this.core=t,this.logger=r,this.keychain=new Map,this.name=YA,this.version=WA,this.initialized=!1,this.storagePrefix=HA,this.init=async()=>{if(!this.initialized){const t=await this.getKeyChain();typeof t<"u"&&(this.keychain=t),this.initialized=!0}},this.has=t=>(this.isInitialized(),this.keychain.has(t)),this.set=async(t,r)=>{this.isInitialized(),this.keychain.set(t,r),await this.persist()},this.get=t=>{this.isInitialized();const r=this.keychain.get(t);if(typeof r>"u"){const{message:r}=$l("NO_MATCHING_KEY",`${this.name}: ${t}`);throw new Error(r)}return r},this.del=async t=>{this.isInitialized(),this.keychain.delete(t),await this.persist()},this.core=t,this.logger=yp(r,this.name)}get context(){return wp(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(t){await this.core.storage.setItem(this.storageKey,ps(t))}async getKeyChain(){const t=await this.core.storage.getItem(this.storageKey);return typeof t<"u"?ys(t):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:t}=$l("NOT_INITIALIZED",this.name);throw new Error(t)}}}class UE{constructor(t,r,n){this.core=t,this.logger=r,this.name=JA,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=t=>(this.isInitialized(),this.keychain.has(t)),this.getClientId=async()=>{this.isInitialized();const t=await this.getClientSeed(),r=jy(t);return Iy(r.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const t=Xc();return this.setPrivateKey(t.publicKey,t.privateKey)},this.signJWT=async t=>{this.isInitialized();const r=await this.getClientSeed(),n=jy(r),i=Zc(),e=zA;return await xy(i,t,e,n)},this.generateSharedKey=(t,r,n)=>{this.isInitialized();const i=this.getPrivateKey(t),e=tl(i,r);return this.setSymKey(e,n)},this.setSymKey=async(t,r)=>{this.isInitialized();const n=r||rl(t);return await this.keychain.set(n,t),n},this.deleteKeyPair=async t=>{this.isInitialized(),await this.keychain.del(t)},this.deleteSymKey=async t=>{this.isInitialized(),await this.keychain.del(t)},this.encode=async(t,r,n)=>{this.isInitialized();const i=fl(n),e=Rp(r);if(cl(i)){const r=i.senderPublicKey,n=i.receiverPublicKey;t=await this.generateSharedKey(r,n)}const s=this.getSymKey(t),{type:o,senderPublicKey:a}=i;return sl({type:o,symKey:s,message:e,senderPublicKey:a})},this.decode=async(t,r,n)=>{this.isInitialized();const i=hl(r,n);if(cl(i)){const r=i.receiverPublicKey,n=i.senderPublicKey;t=await this.generateSharedKey(r,n)}try{const n=this.getSymKey(t),i=ol({symKey:n,encoded:r});return Tp(i)}catch(r){this.logger.error(`Failed to decode message from topic: '${t}', clientId: '${await this.getClientId()}'`),this.logger.error(r)}},this.getPayloadType=t=>{const r=ul(t);return el(r.type)},this.getPayloadSenderPublicKey=t=>{const r=ul(t);return r.senderPublicKey?yb(r.senderPublicKey,Kc):void 0},this.core=t,this.logger=yp(r,this.name),this.keychain=n||new DE(this.core,this.logger)}get context(){return wp(this.logger)}async setPrivateKey(t,r){return await this.keychain.set(t,r),t}getPrivateKey(t){return this.keychain.get(t)}async getClientSeed(){let t="";try{t=this.keychain.get(VA)}catch{t=Zc(),await this.keychain.set(VA,t)}return FA(t,"base16")}getSymKey(t){return this.keychain.get(t)}isInitialized(){if(!this.initialized){const{message:t}=$l("NOT_INITIALIZED",this.name);throw new Error(t)}}}class BE extends Mp{constructor(t,r){super(t,r),this.logger=t,this.core=r,this.messages=new Map,this.name=XA,this.version=ZA,this.initialized=!1,this.storagePrefix=HA,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const t=await this.getRelayerMessages();typeof t<"u"&&(this.messages=t),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(t){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(t)}finally{this.initialized=!0}}},this.set=async(t,r)=>{this.isInitialized();const n=nl(r);let i=this.messages.get(t);return typeof i>"u"&&(i={}),typeof i[n]<"u"||(i[n]=r,this.messages.set(t,i),await this.persist()),n},this.get=t=>{this.isInitialized();let r=this.messages.get(t);return typeof r>"u"&&(r={}),r},this.has=(t,r)=>{this.isInitialized();const n=this.get(t),i=nl(r);return typeof n[i]<"u"},this.del=async t=>{this.isInitialized(),this.messages.delete(t),await this.persist()},this.logger=yp(t,this.name),this.core=r}get context(){return wp(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setRelayerMessages(t){await this.core.storage.setItem(this.storageKey,ps(t))}async getRelayerMessages(){const t=await this.core.storage.getItem(this.storageKey);return typeof t<"u"?ys(t):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:t}=$l("NOT_INITIALIZED",this.name);throw new Error(t)}}}class kE extends _p{constructor(r,n){super(r,n),this.relayer=r,this.logger=n,this.events=new t.exports.EventEmitter,this.name=rE,this.queue=new Map,this.publishTimeout=D.toMiliseconds(D.ONE_MINUTE),this.failedPublishTimeout=D.toMiliseconds(D.ONE_SECOND),this.needsTransportRestart=!1,this.publish=async(t,r,n)=>{var i;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:t,message:r,opts:n}});const e=n?.ttl||tE,s=dl(n),o=n?.prompt||!1,a=n?.tag||0,u=n?.id||dg().toString(),h={topic:t,message:r,opts:{ttl:e,relay:s,prompt:o,tag:a,id:u}},f=`Failed to publish payload, please try again. id:${u} tag:${a}`,c=Date.now();let l,d=1;try{for(;l===void 0;){if(Date.now()-c>this.publishTimeout)throw new Error(f);this.logger.trace({id:u,attempts:d},`publisher.publish - attempt ${d}`),l=await await gs(this.rpcPublish(t,r,e,s,o,a,u).catch((t=>this.logger.warn(t))),this.publishTimeout,f),d++,l||await new Promise((t=>setTimeout(t,this.failedPublishTimeout)))}this.relayer.events.emit(aE.publish,h),this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{id:u,topic:t,message:r,opts:n}})}catch(t){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(t),(i=n?.internal)!=null&&i.throwOnFailedPublish)throw t;this.queue.set(u,h)}},this.on=(t,r)=>{this.events.on(t,r)},this.once=(t,r)=>{this.events.once(t,r)},this.off=(t,r)=>{this.events.off(t,r)},this.removeListener=(t,r)=>{this.events.removeListener(t,r)},this.relayer=r,this.logger=yp(n,this.name),this.registerEventListeners()}get context(){return wp(this.logger)}rpcPublish(t,r,n,i,e,s,o){var a,u,h,f;const c={method:vl(i.protocol).publish,params:{topic:t,message:r,ttl:n,prompt:e,tag:s},id:o};return Kl((a=c.params)==null?void 0:a.prompt)&&((u=c.params)==null||delete u.prompt),Kl((h=c.params)==null?void 0:h.tag)&&((f=c.params)==null||delete f.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:c}),this.relayer.request(c)}removeRequestFromQueue(t){this.queue.delete(t)}checkQueue(){this.queue.forEach((async t=>{const{topic:r,message:n,opts:i}=t;await this.publish(r,n,i)}))}registerEventListeners(){this.relayer.core.heartbeat.on(xv.HEARTBEAT_EVENTS.pulse,(()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(aE.connection_stalled);return}this.checkQueue()})),this.relayer.on(aE.message_ack,(t=>{this.removeRequestFromQueue(t.id.toString())}))}}class $E{constructor(){this.map=new Map,this.set=(t,r)=>{const n=this.get(t);this.exists(t,r)||this.map.set(t,[...n,r])},this.get=t=>this.map.get(t)||[],this.exists=(t,r)=>this.get(t).includes(r),this.delete=(t,r)=>{if(typeof r>"u"){this.map.delete(t);return}if(!this.map.has(t))return;const n=this.get(t);if(!this.exists(t,r))return;const i=n.filter((t=>t!==r));if(!i.length){this.map.delete(t);return}this.map.set(t,i)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var FE=Object.defineProperty,qE=Object.defineProperties,LE=Object.getOwnPropertyDescriptors,KE=Object.getOwnPropertySymbols,HE=Object.prototype.hasOwnProperty,GE=Object.prototype.propertyIsEnumerable,QE=(t,r,n)=>r in t?FE(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n,JE=(t,r)=>{for(var n in r||(r={}))HE.call(r,n)&&QE(t,n,r[n]);if(KE)for(var n of KE(r))GE.call(r,n)&&QE(t,n,r[n]);return t},VE=(t,r)=>qE(t,LE(r));class zE extends Sp{constructor(r,n){super(r,n),this.relayer=r,this.logger=n,this.subscriptions=new Map,this.topicMap=new $E,this.events=new t.exports.EventEmitter,this.name=pE,this.version=yE,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=HA,this.subscribeTimeout=D.toMiliseconds(D.ONE_MINUTE),this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(t,r)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:t,opts:r}});try{const n=dl(r),i={topic:t,relay:n};this.pending.set(t,i);const e=await this.rpcSubscribe(t,n);return typeof e=="string"&&(this.onSubscribe(e,i),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:t,opts:r}})),e}catch(t){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(t),t}},this.unsubscribe=async(t,r)=>{await this.restartToComplete(),this.isInitialized(),typeof r?.id<"u"?await this.unsubscribeById(t,r.id,r):await this.unsubscribeByTopic(t,r)},this.isSubscribed=async t=>{if(this.topics.includes(t))return!0;const r=`${this.pendingSubscriptionWatchLabel}_${t}`;return await new Promise(((n,i)=>{const e=new D.Watch;e.start(r);const s=setInterval((()=>{!this.pending.has(t)&&this.topics.includes(t)&&(clearInterval(s),e.stop(r),n(!0)),e.elapsed(r)>=bE&&(clearInterval(s),e.stop(r),i(new Error("Subscription resolution timeout")))}),this.pollingInterval)})).catch((()=>!1))},this.on=(t,r)=>{this.events.on(t,r)},this.once=(t,r)=>{this.events.once(t,r)},this.off=(t,r)=>{this.events.off(t,r)},this.removeListener=(t,r)=>{this.events.removeListener(t,r)},this.start=async()=>{await this.onConnect()},this.stop=async()=>{await this.onDisconnect()},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=r,this.logger=yp(n,this.name),this.clientId=""}get context(){return wp(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(t,r){let n=!1;try{n=this.getSubscription(t).topic===r}catch{}return n}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(t,r){const n=this.topicMap.get(t);await Promise.all(n.map((async n=>await this.unsubscribeById(t,n,r))))}async unsubscribeById(t,r,n){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:t,id:r,opts:n}});try{const i=dl(n);await this.rpcUnsubscribe(t,r,i);const e=Fl("USER_DISCONNECTED",`${this.name}, ${t}`);await this.onUnsubscribe(t,r,e),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:t,id:r,opts:n}})}catch(t){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(t),t}}async rpcSubscribe(t,r){const n={method:vl(r.protocol).subscribe,params:{topic:t}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{return await await gs(this.relayer.request(n).catch((t=>this.logger.warn(t))),this.subscribeTimeout)?nl(t+this.clientId):null}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(aE.connection_stalled)}return null}async rpcBatchSubscribe(t){if(!t.length)return;const r=t[0].relay,n={method:vl(r.protocol).batchSubscribe,params:{topics:t.map((t=>t.topic))}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{return await await gs(this.relayer.request(n).catch((t=>this.logger.warn(t))),this.subscribeTimeout)}catch{this.relayer.events.emit(aE.connection_stalled)}}rpcUnsubscribe(t,r,n){const i={method:vl(n.protocol).unsubscribe,params:{topic:t,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i}),this.relayer.request(i)}onSubscribe(t,r){this.setSubscription(t,VE(JE({},r),{id:t})),this.pending.delete(r.topic)}onBatchSubscribe(t){t.length&&t.forEach((t=>{this.setSubscription(t.id,JE({},t)),this.pending.delete(t.topic)}))}async onUnsubscribe(t,r,n){this.events.removeAllListeners(r),this.hasSubscription(r,t)&&this.deleteSubscription(r,n),await this.relayer.messages.del(t)}async setRelayerSubscriptions(t){await this.relayer.core.storage.setItem(this.storageKey,t)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(t,r){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:t,subscription:r}),this.addSubscription(t,r)}addSubscription(t,r){this.subscriptions.set(t,JE({},r)),this.topicMap.set(r.topic,t),this.events.emit(wE.created,r)}getSubscription(t){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:t});const r=this.subscriptions.get(t);if(!r){const{message:r}=$l("NO_MATCHING_KEY",`${this.name}: ${t}`);throw new Error(r)}return r}deleteSubscription(t,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:t,reason:r});const n=this.getSubscription(t);this.subscriptions.delete(t),this.topicMap.delete(n.topic,t),this.events.emit(wE.deleted,VE(JE({},n),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(wE.sync)}async reset(){if(this.cached.length){const t=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<t;r++){const t=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(t)}}this.events.emit(wE.resubscribed)}async restore(){try{const t=await this.getRelayerSubscriptions();if(typeof t>"u"||!t.length)return;if(this.subscriptions.size){const{message:t}=$l("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(t)}this.cached=t,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(t){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(t)}}async batchSubscribe(t){if(!t.length)return;const r=await this.rpcBatchSubscribe(t);ql(r)&&this.onBatchSubscribe(r.map(((r,n)=>VE(JE({},t[n]),{id:r}))))}async onConnect(){await this.restart(),this.onEnable()}onDisconnect(){this.onDisable()}async checkPending(){if(!this.initialized||!this.relayer.connected)return;const t=[];this.pending.forEach((r=>{t.push(r)})),await this.batchSubscribe(t)}registerEventListeners(){this.relayer.core.heartbeat.on(xv.HEARTBEAT_EVENTS.pulse,(async()=>{await this.checkPending()})),this.events.on(wE.created,(async t=>{const r=wE.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),await this.persist()})),this.events.on(wE.deleted,(async t=>{const r=wE.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),await this.persist()}))}isInitialized(){if(!this.initialized){const{message:t}=$l("NOT_INITIALIZED",this.name);throw new Error(t)}}async restartToComplete(){this.restartInProgress&&await new Promise((t=>{const r=setInterval((()=>{this.restartInProgress||(clearInterval(r),t())}),this.pollingInterval)}))}}var YE=Object.defineProperty,WE=Object.getOwnPropertySymbols,XE=Object.prototype.hasOwnProperty,ZE=Object.prototype.propertyIsEnumerable,tM=(t,r,n)=>r in t?YE(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n,rM=(t,r)=>{for(var n in r||(r={}))XE.call(r,n)&&tM(t,n,r[n]);if(WE)for(var n of WE(r))ZE.call(r,n)&&tM(t,n,r[n]);return t};class nM extends Op{constructor(r){super(r),this.protocol="wc",this.version=2,this.events=new t.exports.EventEmitter,this.name=oE,this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled","interrupted"],this.hasExperiencedNetworkDisruption=!1,this.requestsInFlight=new Map,this.heartBeatTimeout=D.toMiliseconds(D.THIRTY_SECONDS+D.ONE_SECOND),this.request=async t=>{var r,n;this.logger.debug("Publishing Request Payload");const i=t.id||dg().toString();await this.toEstablishConnection();try{const e=this.provider.request(t);this.requestsInFlight.set(i,{promise:e,request:t}),this.logger.trace({id:i,method:t.method,topic:(r=t.params)==null?void 0:r.topic},"relayer.request - attempt to publish...");const s=await new Promise((async(t,r)=>{const n=()=>{r(new Error(`relayer.request - publish interrupted, id: ${i}`))};this.provider.on(hE.disconnect,n);const s=await e;this.provider.off(hE.disconnect,n),t(s)}));return this.logger.trace({id:i,method:t.method,topic:(n=t.params)==null?void 0:n.topic},"relayer.request - published"),s}catch(t){throw this.logger.debug(`Failed to Publish Request: ${i}`),t}finally{this.requestsInFlight.delete(i)}},this.resetPingTimeout=()=>{if(es())try{clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout((()=>{var t,r,n;(n=(r=(t=this.provider)==null?void 0:t.connection)==null?void 0:r.socket)==null||n.terminate()}),this.heartBeatTimeout)}catch(t){this.logger.warn(t)}},this.onPayloadHandler=t=>{this.onProviderPayload(t),this.resetPingTimeout()},this.onConnectHandler=()=>{this.startPingTimeout(),this.events.emit(aE.connect)},this.onDisconnectHandler=()=>{this.onProviderDisconnect()},this.onProviderErrorHandler=t=>{this.logger.error(t),this.events.emit(aE.error,t),this.logger.info("Fatal socket error received, closing transport"),this.transportClose()},this.registerProviderListeners=()=>{this.provider.on(hE.payload,this.onPayloadHandler),this.provider.on(hE.connect,this.onConnectHandler),this.provider.on(hE.disconnect,this.onDisconnectHandler),this.provider.on(hE.error,this.onProviderErrorHandler)},this.core=r.core,this.logger=typeof r.logger<"u"&&typeof r.logger!="string"?yp(r.logger,this.name):Ow(lp({level:r.logger||iE})),this.messages=new BE(this.logger,r.core),this.subscriber=new zE(this,this.logger),this.publisher=new kE(this,this.logger),this.relayUrl=r?.relayUrl||eE,this.projectId=r.projectId,this.bundleId=us(),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${sE}...`),await this.restartTransport(sE)}this.initialized=!0,setTimeout((async()=>{this.subscriber.topics.length===0&&this.subscriber.pending.size===0&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)}),lE)}get context(){return wp(this.logger)}get connected(){var t,r,n;return((n=(r=(t=this.provider)==null?void 0:t.connection)==null?void 0:r.socket)==null?void 0:n.readyState)===1}get connecting(){var t,r,n;return((n=(r=(t=this.provider)==null?void 0:t.connection)==null?void 0:r.socket)==null?void 0:n.readyState)===0}async publish(t,r,n){this.isInitialized(),await this.publisher.publish(t,r,n),await this.recordMessageEvent({topic:t,message:r,publishedAt:Date.now()})}async subscribe(t,r){var n;this.isInitialized();let i=((n=this.subscriber.topicMap.get(t))==null?void 0:n[0])||"",e;const s=r=>{r.topic===t&&(this.subscriber.off(wE.created,s),e())};return await Promise.all([new Promise((t=>{e=t,this.subscriber.on(wE.created,s)})),new Promise((async n=>{i=await this.subscriber.subscribe(t,r)||i,n()}))]),i}async unsubscribe(t,r){this.isInitialized(),await this.subscriber.unsubscribe(t,r)}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}off(t,r){this.events.off(t,r)}removeListener(t,r){this.events.removeListener(t,r)}async transportDisconnect(){if(!this.hasExperiencedNetworkDisruption&&this.connected&&this.requestsInFlight.size>0)try{await Promise.all(Array.from(this.requestsInFlight.values()).map((t=>t.promise)))}catch(t){this.logger.warn(t)}this.hasExperiencedNetworkDisruption||this.connected?await gs(this.provider.disconnect(),2e3,"provider.disconnect()").catch((()=>this.onProviderDisconnect())):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(t){await this.confirmOnlineStateOrThrow(),t&&t!==this.relayUrl&&(this.relayUrl=t,await this.transportDisconnect(),await this.createProvider()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;try{await new Promise((async(t,r)=>{const n=()=>{this.provider.off(hE.disconnect,n),r(new Error("Connection interrupted while trying to subscribe"))};this.provider.on(hE.disconnect,n),await gs(this.provider.connect(),D.toMiliseconds(D.ONE_MINUTE),`Socket stalled when trying to connect to ${this.relayUrl}`).catch((t=>{r(t)})),await this.subscriber.start(),this.hasExperiencedNetworkDisruption=!1,t()}))}catch(t){this.logger.error(t);const r=t;if(!this.isConnectionStalled(r.message))throw t}finally{this.connectionAttemptInProgress=!1}}async restartTransport(t){this.connectionAttemptInProgress||(this.relayUrl=t||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.createProvider(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await _d())throw new Error("No internet connection detected. Please restart your network and try again.")}startPingTimeout(){var t,r,n,i,e;if(es())try{(r=(t=this.provider)==null?void 0:t.connection)!=null&&r.socket&&((e=(i=(n=this.provider)==null?void 0:n.connection)==null?void 0:i.socket)==null||e.once("ping",(()=>{this.resetPingTimeout()}))),this.resetPingTimeout()}catch(t){this.logger.warn(t)}}isConnectionStalled(t){return this.staleConnectionErrors.some((r=>t.includes(r)))}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const t=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Tg(new Kg(vs({sdkVersion:cE,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:t,useOnCloseEvent:!0,bundleId:this.bundleId}))),this.registerProviderListeners()}async recordMessageEvent(t){const{topic:r,message:n}=t;await this.messages.set(r,n)}async shouldIgnoreMessageEvent(t){const{topic:r,message:n}=t;if(!n||n.length===0)return this.logger.debug(`Ignoring invalid/empty message: ${n}`),!0;if(!await this.subscriber.isSubscribed(r))return this.logger.debug(`Ignoring message for non-subscribed topic ${r}`),!0;const i=this.messages.has(r,n);return i&&this.logger.debug(`Ignoring duplicate message: ${n}`),i}async onProviderPayload(t){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:t}),Cg(t)){if(!t.method.endsWith(uE))return;const r=t.params,{topic:n,message:i,publishedAt:e}=r.data,s={topic:n,message:i,publishedAt:e};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(rM({type:"event",event:r.id},s)),this.events.emit(r.id,s),await this.acknowledgePayload(t),await this.onMessageEvent(s)}else jg(t)&&this.events.emit(aE.message_ack,t)}async onMessageEvent(t){await this.shouldIgnoreMessageEvent(t)||(this.events.emit(aE.message,t),await this.recordMessageEvent(t))}async acknowledgePayload(t){const r=wg(t.id,!0);await this.provider.connection.send(r)}unregisterProviderListeners(){this.provider.off(hE.payload,this.onPayloadHandler),this.provider.off(hE.connect,this.onConnectHandler),this.provider.off(hE.disconnect,this.onDisconnectHandler),this.provider.off(hE.error,this.onProviderErrorHandler)}async registerEventListeners(){let t=await _d();Nd((async r=>{t!==r&&(t=r,r?await this.restartTransport().catch((t=>this.logger.error(t))):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}))}async onProviderDisconnect(){await this.subscriber.stop(),this.events.emit(aE.disconnect),this.connectionAttemptInProgress=!1,!this.transportExplicitlyClosed&&setTimeout((async()=>{await this.transportOpen().catch((t=>this.logger.error(t)))}),D.toMiliseconds(fE))}isInitialized(){if(!this.initialized){const{message:t}=$l("NOT_INITIALIZED",this.name);throw new Error(t)}}async toEstablishConnection(){await this.confirmOnlineStateOrThrow(),!this.connected&&(this.connectionAttemptInProgress&&await new Promise((t=>{const r=setInterval((()=>{this.connected&&(clearInterval(r),t())}),this.connectionStatusPollingInterval)})),await this.transportOpen())}}var iM=Object.defineProperty,eM=Object.getOwnPropertySymbols,sM=Object.prototype.hasOwnProperty,oM=Object.prototype.propertyIsEnumerable,aM=(t,r,n)=>r in t?iM(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n,uM=(t,r)=>{for(var n in r||(r={}))sM.call(r,n)&&aM(t,n,r[n]);if(eM)for(var n of eM(r))oM.call(r,n)&&aM(t,n,r[n]);return t};class hM extends Ip{constructor(t,r,n,i=HA,e=void 0){super(t,r,n,i),this.core=t,this.logger=r,this.name=n,this.map=new Map,this.version=dE,this.cached=[],this.initialized=!1,this.storagePrefix=HA,this.recentlyDeleted=[],this.recentlyDeletedLimit=200,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach((t=>{this.getKey&&t!==null&&!Kl(t)?this.map.set(this.getKey(t),t):Yl(t)?this.map.set(t.id,t):Wl(t)&&this.map.set(t.topic,t)})),this.cached=[],this.initialized=!0)},this.set=async(t,r)=>{this.isInitialized(),this.map.has(t)?await this.update(t,r):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:t,value:r}),this.map.set(t,r),await this.persist())},this.get=t=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:t}),this.getData(t)),this.getAll=t=>(this.isInitialized(),t?this.values.filter((r=>Object.keys(t).every((n=>Gg(r[n],t[n]))))):this.values),this.update=async(t,r)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:t,update:r});const n=uM(uM({},this.getData(t)),r);this.map.set(t,n),await this.persist()},this.delete=async(t,r)=>{this.isInitialized(),this.map.has(t)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:t,reason:r}),this.map.delete(t),this.addToRecentlyDeleted(t),await this.persist())},this.logger=yp(r,this.name),this.storagePrefix=i,this.getKey=e}get context(){return wp(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(t){this.recentlyDeleted.push(t),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(t){await this.core.storage.setItem(this.storageKey,t)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(t){const r=this.map.get(t);if(!r){if(this.recentlyDeleted.includes(t)){const{message:r}=$l("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${t}`);throw this.logger.error(r),new Error(r)}const{message:r}=$l("NO_MATCHING_KEY",`${this.name}: ${t}`);throw this.logger.error(r),new Error(r)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const t=await this.getDataStore();if(typeof t>"u"||!t.length)return;if(this.map.size){const{message:t}=$l("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=t,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(t){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(t)}}isInitialized(){if(!this.initialized){const{message:t}=$l("NOT_INITIALIZED",this.name);throw new Error(t)}}}class fM{constructor(t,r){this.core=t,this.logger=r,this.name=gE,this.version=mE,this.events=new n,this.initialized=!1,this.storagePrefix=HA,this.ignoredPayloadTypes=[Jc],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:t})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...t])]},this.create=async t=>{this.isInitialized();const r=Zc(),n=await this.core.crypto.setSymKey(r),i=_s(D.FIVE_MINUTES),e={protocol:nE},s={topic:n,expiry:i,relay:e,active:!1},o=Nl({protocol:this.core.protocol,version:this.core.version,topic:n,symKey:r,relay:e,expiryTimestamp:i,methods:t?.methods});return await this.pairings.set(n,s),await this.core.relayer.subscribe(n),this.core.expirer.set(n,i),{topic:n,uri:o}},this.pair=async t=>{this.isInitialized(),this.isValidPair(t);const{topic:r,symKey:n,relay:i,expiryTimestamp:e,methods:s}=Ol(t.uri);let o;if(this.pairings.keys.includes(r)&&(o=this.pairings.get(r),o.active))throw new Error(`Pairing already exists: ${r}. Please try again with a new connection URI.`);const a=e||_s(D.FIVE_MINUTES),u={topic:r,relay:i,expiry:a,active:!1,methods:s};return await this.pairings.set(r,u),this.core.expirer.set(r,a),t.activatePairing&&await this.activate({topic:r}),this.events.emit(EE.create,u),this.core.crypto.keychain.has(r)||await this.core.crypto.setSymKey(n,r),await this.core.relayer.subscribe(r,{relay:i}),u},this.activate=async({topic:t})=>{this.isInitialized();const r=_s(D.THIRTY_DAYS);await this.pairings.update(t,{active:!0,expiry:r}),this.core.expirer.set(t,r)},this.ping=async t=>{this.isInitialized(),await this.isValidPing(t);const{topic:r}=t;if(this.pairings.keys.includes(r)){const t=await this.sendRequest(r,"wc_pairingPing",{}),{done:n,resolve:i,reject:e}=bs();this.events.once(Is("pairing_ping",t),(({error:t})=>{t?e(t):i()})),await n()}},this.updateExpiry=async({topic:t,expiry:r})=>{this.isInitialized(),await this.pairings.update(t,{expiry:r})},this.updateMetadata=async({topic:t,metadata:r})=>{this.isInitialized(),await this.pairings.update(t,{peerMetadata:r})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async t=>{this.isInitialized(),await this.isValidDisconnect(t);const{topic:r}=t;this.pairings.keys.includes(r)&&(await this.sendRequest(r,"wc_pairingDelete",Fl("USER_DISCONNECTED")),await this.deletePairing(r))},this.sendRequest=async(t,r,n)=>{const i=vg(r,n),e=await this.core.crypto.encode(t,i),s=AE[r].req;return this.core.history.set(t,i),this.core.relayer.publish(t,e,s),i.id},this.sendResult=async(t,r,n)=>{const i=wg(t,n),e=await this.core.crypto.encode(r,i),s=await this.core.history.get(r,t),o=AE[s.request.method].res;await this.core.relayer.publish(r,e,o),await this.core.history.resolve(i)},this.sendError=async(t,r,n)=>{const i=pg(t,n),e=await this.core.crypto.encode(r,i),s=await this.core.history.get(r,t),o=AE[s.request.method]?AE[s.request.method].res:AE.unregistered_method.res;await this.core.relayer.publish(r,e,o),await this.core.history.resolve(i)},this.deletePairing=async(t,r)=>{await this.core.relayer.unsubscribe(t),await Promise.all([this.pairings.delete(t,Fl("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(t),r?Promise.resolve():this.core.expirer.del(t)])},this.cleanup=async()=>{const t=this.pairings.getAll().filter((t=>Os(t.expiry)));await Promise.all(t.map((t=>this.deletePairing(t.topic))))},this.onRelayEventRequest=t=>{const{topic:r,payload:n}=t;switch(n.method){case"wc_pairingPing":return this.onPairingPingRequest(r,n);case"wc_pairingDelete":return this.onPairingDeleteRequest(r,n);default:return this.onUnknownRpcMethodRequest(r,n)}},this.onRelayEventResponse=async t=>{const{topic:r,payload:n}=t,i=(await this.core.history.get(r,n.id)).request.method;switch(i){case"wc_pairingPing":return this.onPairingPingResponse(r,n);default:return this.onUnknownRpcMethodResponse(i)}},this.onPairingPingRequest=async(t,r)=>{const{id:n}=r;try{this.isValidPing({topic:t}),await this.sendResult(n,t,!0),this.events.emit(EE.ping,{id:n,topic:t})}catch(r){await this.sendError(n,t,r),this.logger.error(r)}},this.onPairingPingResponse=(t,r)=>{const{id:n}=r;setTimeout((()=>{xg(r)?this.events.emit(Is("pairing_ping",n),{}):Pg(r)&&this.events.emit(Is("pairing_ping",n),{error:r.error})}),500)},this.onPairingDeleteRequest=async(t,r)=>{const{id:n}=r;try{this.isValidDisconnect({topic:t}),await this.deletePairing(t),this.events.emit(EE.delete,{id:n,topic:t})}catch(r){await this.sendError(n,t,r),this.logger.error(r)}},this.onUnknownRpcMethodRequest=async(t,r)=>{const{id:n,method:i}=r;try{if(this.registeredMethods.includes(i))return;const r=Fl("WC_METHOD_UNSUPPORTED",i);await this.sendError(n,t,r),this.logger.error(r)}catch(r){await this.sendError(n,t,r),this.logger.error(r)}},this.onUnknownRpcMethodResponse=t=>{this.registeredMethods.includes(t)||this.logger.error(Fl("WC_METHOD_UNSUPPORTED",t))},this.isValidPair=t=>{var r;if(!cd(t)){const{message:r}=$l("MISSING_OR_INVALID",`pair() params: ${t}`);throw new Error(r)}if(!zl(t.uri)){const{message:r}=$l("MISSING_OR_INVALID",`pair() uri: ${t.uri}`);throw new Error(r)}const n=Ol(t.uri);if(!((r=n?.relay)!=null&&r.protocol)){const{message:t}=$l("MISSING_OR_INVALID","pair() uri#relay-protocol");throw new Error(t)}if(!(n!=null&&n.symKey)){const{message:t}=$l("MISSING_OR_INVALID","pair() uri#symKey");throw new Error(t)}if(n!=null&&n.expiryTimestamp&&D.toMiliseconds(n?.expiryTimestamp)<Date.now()){const{message:t}=$l("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(t)}},this.isValidPing=async t=>{if(!cd(t)){const{message:r}=$l("MISSING_OR_INVALID",`ping() params: ${t}`);throw new Error(r)}const{topic:r}=t;await this.isValidPairingTopic(r)},this.isValidDisconnect=async t=>{if(!cd(t)){const{message:r}=$l("MISSING_OR_INVALID",`disconnect() params: ${t}`);throw new Error(r)}const{topic:r}=t;await this.isValidPairingTopic(r)},this.isValidPairingTopic=async t=>{if(!Hl(t,!1)){const{message:r}=$l("MISSING_OR_INVALID",`pairing topic should be a string: ${t}`);throw new Error(r)}if(!this.pairings.keys.includes(t)){const{message:r}=$l("NO_MATCHING_KEY",`pairing topic doesn't exist: ${t}`);throw new Error(r)}if(Os(this.pairings.get(t).expiry)){await this.deletePairing(t);const{message:r}=$l("EXPIRED",`pairing topic: ${t}`);throw new Error(r)}},this.core=t,this.logger=yp(r,this.name),this.pairings=new hM(this.core,this.logger,this.name,this.storagePrefix)}get context(){return wp(this.logger)}isInitialized(){if(!this.initialized){const{message:t}=$l("NOT_INITIALIZED",this.name);throw new Error(t)}}registerRelayerEvents(){this.core.relayer.on(aE.message,(async t=>{const{topic:r,message:n}=t;if(!this.pairings.keys.includes(r)||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(n)))return;const i=await this.core.crypto.decode(r,n);try{Cg(i)?(this.core.history.set(r,i),this.onRelayEventRequest({topic:r,payload:i})):jg(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:r,payload:i}),this.core.history.delete(r,i.id))}catch(t){this.logger.error(t)}}))}registerExpirerEvents(){this.core.expirer.on(SE.expired,(async t=>{const{topic:r}=Ms(t.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit(EE.expire,{topic:r}))}))}}class cM extends Ep{constructor(r,n){super(r,n),this.core=r,this.logger=n,this.records=new Map,this.events=new t.exports.EventEmitter,this.name=_E,this.version=OE,this.cached=[],this.initialized=!1,this.storagePrefix=HA,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach((t=>this.records.set(t.id,t))),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(t,r,n)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:t,request:r,chainId:n}),this.records.has(r.id))return;const i={id:r.id,topic:t,request:{method:r.method,params:r.params||null},chainId:n,expiry:_s(D.THIRTY_DAYS)};this.records.set(i.id,i),this.persist(),this.events.emit(ME.created,i)},this.resolve=async t=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:t}),!this.records.has(t.id))return;const r=await this.getRecord(t.id);typeof r.response>"u"&&(r.response=Pg(t)?{error:t.error}:{result:t.result},this.records.set(r.id,r),this.persist(),this.events.emit(ME.updated,r))},this.get=async(t,r)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:t,id:r}),await this.getRecord(r)),this.delete=(t,r)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:r}),this.values.forEach((n=>{if(n.topic===t){if(typeof r<"u"&&n.id!==r)return;this.records.delete(n.id),this.events.emit(ME.deleted,n)}})),this.persist()},this.exists=async(t,r)=>(this.isInitialized(),this.records.has(r)?(await this.getRecord(r)).topic===t:!1),this.on=(t,r)=>{this.events.on(t,r)},this.once=(t,r)=>{this.events.once(t,r)},this.off=(t,r)=>{this.events.off(t,r)},this.removeListener=(t,r)=>{this.events.removeListener(t,r)},this.logger=yp(n,this.name)}get context(){return wp(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const t=[];return this.values.forEach((r=>{if(typeof r.response<"u")return;const n={topic:r.topic,request:vg(r.request.method,r.request.params,r.id),chainId:r.chainId};return t.push(n)})),t}async setJsonRpcRecords(t){await this.core.storage.setItem(this.storageKey,t)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(t){this.isInitialized();const r=this.records.get(t);if(!r){const{message:r}=$l("NO_MATCHING_KEY",`${this.name}: ${t}`);throw new Error(r)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(ME.sync)}async restore(){try{const t=await this.getJsonRpcRecords();if(typeof t>"u"||!t.length)return;if(this.records.size){const{message:t}=$l("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=t,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(t){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(t)}}registerEventListeners(){this.events.on(ME.created,(t=>{const r=ME.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:t})})),this.events.on(ME.updated,(t=>{const r=ME.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:t})})),this.events.on(ME.deleted,(t=>{const r=ME.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:t})})),this.core.heartbeat.on(xv.HEARTBEAT_EVENTS.pulse,(()=>{this.cleanup()}))}cleanup(){try{this.isInitialized();let t=!1;this.records.forEach((r=>{D.toMiliseconds(r.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${r.id}`),this.records.delete(r.id),this.events.emit(ME.deleted,r,!1),t=!0)})),t&&this.persist()}catch(t){this.logger.warn(t)}}isInitialized(){if(!this.initialized){const{message:t}=$l("NOT_INITIALIZED",this.name);throw new Error(t)}}}class lM extends Np{constructor(r,n){super(r,n),this.core=r,this.logger=n,this.expirations=new Map,this.events=new t.exports.EventEmitter,this.name=IE,this.version=NE,this.cached=[],this.initialized=!1,this.storagePrefix=HA,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach((t=>this.expirations.set(t.target,t))),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=t=>{try{const r=this.formatTarget(t);return typeof this.getExpiration(r)<"u"}catch{return!1}},this.set=(t,r)=>{this.isInitialized();const n=this.formatTarget(t),i={target:n,expiry:r};this.expirations.set(n,i),this.checkExpiry(n,i),this.events.emit(SE.created,{target:n,expiration:i})},this.get=t=>{this.isInitialized();const r=this.formatTarget(t);return this.getExpiration(r)},this.del=t=>{if(this.isInitialized(),this.has(t)){const r=this.formatTarget(t),n=this.getExpiration(r);this.expirations.delete(r),this.events.emit(SE.deleted,{target:r,expiration:n})}},this.on=(t,r)=>{this.events.on(t,r)},this.once=(t,r)=>{this.events.once(t,r)},this.off=(t,r)=>{this.events.off(t,r)},this.removeListener=(t,r)=>{this.events.removeListener(t,r)},this.logger=yp(n,this.name)}get context(){return wp(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(t){if(typeof t=="string")return As(t);if(typeof t=="number")return Es(t);const{message:r}=$l("UNKNOWN_TYPE",`Target type: ${typeof t}`);throw new Error(r)}async setExpirations(t){await this.core.storage.setItem(this.storageKey,t)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(SE.sync)}async restore(){try{const t=await this.getExpirations();if(typeof t>"u"||!t.length)return;if(this.expirations.size){const{message:t}=$l("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=t,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(t){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(t)}}getExpiration(t){const r=this.expirations.get(t);if(!r){const{message:r}=$l("NO_MATCHING_KEY",`${this.name}: ${t}`);throw this.logger.warn(r),new Error(r)}return r}checkExpiry(t,r){const{expiry:n}=r;D.toMiliseconds(n)-Date.now()<=0&&this.expire(t,r)}expire(t,r){this.expirations.delete(t),this.events.emit(SE.expired,{target:t,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach(((t,r)=>this.checkExpiry(r,t)))}registerEventListeners(){this.core.heartbeat.on(xv.HEARTBEAT_EVENTS.pulse,(()=>this.checkExpirations())),this.events.on(SE.created,(t=>{const r=SE.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),this.persist()})),this.events.on(SE.expired,(t=>{const r=SE.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),this.persist()})),this.events.on(SE.deleted,(t=>{const r=SE.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),this.persist()}))}isInitialized(){if(!this.initialized){const{message:t}=$l("NOT_INITIALIZED",this.name);throw new Error(t)}}}class dM extends Cp{constructor(t,r){super(t,r),this.projectId=t,this.logger=r,this.name=CE,this.initialized=!1,this.queue=[],this.verifyDisabled=!1,this.init=async t=>{if(this.verifyDisabled||ss()||!os())return;const r=this.getVerifyUrl(t?.verifyUrl);this.verifyUrl!==r&&this.removeIframe(),this.verifyUrl=r;try{await this.createIframe()}catch(t){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(t)}if(!this.initialized){this.removeIframe(),this.verifyUrl=xE;try{await this.createIframe()}catch(t){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(t),this.verifyDisabled=!0}}},this.register=async t=>{this.initialized?this.sendPost(t.attestationId):(this.addToQueue(t.attestationId),await this.init())},this.resolve=async t=>{if(this.isDevEnv)return"";const r=this.getVerifyUrl(t?.verifyUrl);let n;try{n=await this.fetchAttestation(t.attestationId,r)}catch(i){this.logger.info(`failed to resolve attestation: ${t.attestationId} from url: ${r}`),this.logger.info(i),n=await this.fetchAttestation(t.attestationId,xE)}return n},this.fetchAttestation=async(t,r)=>{this.logger.info(`resolving attestation: ${t} from url: ${r}`);const n=this.startAbortTimer(D.ONE_SECOND*2),i=await fetch(`${r}/attestation/${t}`,{signal:this.abortController.signal});return clearTimeout(n),i.status===200?await i.json():void 0},this.addToQueue=t=>{this.queue.push(t)},this.processQueue=()=>{this.queue.length!==0&&(this.queue.forEach((t=>this.sendPost(t))),this.queue=[])},this.sendPost=t=>{var r;try{if(!this.iframe)return;(r=this.iframe.contentWindow)==null||r.postMessage(t,"*"),this.logger.info(`postMessage sent: ${t} ${this.verifyUrl}`)}catch{}},this.createIframe=async()=>{let t;const r=n=>{n.data==="verify_ready"&&(this.onInit(),window.removeEventListener("message",r),t())};await Promise.race([new Promise((n=>{const i=document.getElementById(CE);if(i)return this.iframe=i,this.onInit(),n();window.addEventListener("message",r);const e=document.createElement("iframe");e.id=CE,e.src=`${this.verifyUrl}/${this.projectId}`,e.style.display="none",document.body.append(e),this.iframe=e,t=n})),new Promise(((t,n)=>setTimeout((()=>{window.removeEventListener("message",r),n("verify iframe load timeout")}),D.toMiliseconds(D.FIVE_SECONDS))))])},this.onInit=()=>{this.initialized=!0,this.processQueue()},this.removeIframe=()=>{this.iframe&&(this.iframe.remove(),this.iframe=void 0,this.initialized=!1)},this.getVerifyUrl=t=>{let r=t||jE;return PE.includes(r)||(this.logger.info(`verify url: ${r}, not included in trusted list, assigning default: ${jE}`),r=jE),r},this.logger=yp(r,this.name),this.verifyUrl=jE,this.abortController=new AbortController,this.isDevEnv=es()&&i.env.IS_VITEST}get context(){return wp(this.logger)}startAbortTimer(t){return this.abortController=new AbortController,setTimeout((()=>this.abortController.abort()),D.toMiliseconds(t))}}class vM extends jp{constructor(t,r){super(t,r),this.projectId=t,this.logger=r,this.context=TE,this.registerDeviceToken=async t=>{const{clientId:r,token:n,notificationType:i,enableEncrypted:e=!1}=t,s=`${RE}/${this.projectId}/clients`;await zg(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:r,type:i,token:n,always_raw:e})})},this.logger=yp(r,this.context)}}var wM=Object.defineProperty,pM=Object.getOwnPropertySymbols,yM=Object.prototype.hasOwnProperty,bM=Object.prototype.propertyIsEnumerable,gM=(t,r,n)=>r in t?wM(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n,mM=(t,r)=>{for(var n in r||(r={}))yM.call(r,n)&&gM(t,n,r[n]);if(pM)for(var n of pM(r))bM.call(r,n)&&gM(t,n,r[n]);return t};class AM extends Ap{constructor(r){var n;super(r),this.protocol=qA,this.version=LA,this.name=KA,this.events=new t.exports.EventEmitter,this.initialized=!1,this.on=(t,r)=>this.events.on(t,r),this.once=(t,r)=>this.events.once(t,r),this.off=(t,r)=>this.events.off(t,r),this.removeListener=(t,r)=>this.events.removeListener(t,r),this.projectId=r?.projectId,this.relayUrl=r?.relayUrl||eE,this.customStoragePrefix=r!=null&&r.customStoragePrefix?`:${r.customStoragePrefix}`:"";const i=lp({level:typeof r?.logger=="string"&&r.logger?r.logger:GA.logger}),{logger:e,chunkLoggerController:s}=mp({opts:i,maxSizeInBytes:r?.maxLogBlobSizeInBytes,loggerOverride:r?.logger});this.logChunkController=s,(n=this.logChunkController)!=null&&n.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var t,r;(t=this.logChunkController)!=null&&t.downloadLogsBlobInBrowser&&((r=this.logChunkController)==null||r.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=yp(e,this.name),this.heartbeat=new xv.HeartBeat,this.crypto=new UE(this,this.logger,r?.keychain),this.history=new cM(this,this.logger),this.expirer=new lM(this,this.logger),this.storage=r!=null&&r.storage?r.storage:new jv(mM(mM({},QA),r?.storageOptions)),this.relayer=new nM({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new fM(this,this.logger),this.verify=new dM(this.projectId||"",this.logger),this.echoClient=new vM(this.projectId||"",this.logger)}static async init(t){const r=new AM(t);await r.initialize();const n=await r.crypto.getClientId();return await r.storage.setItem(vE,n),r}get context(){return wp(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var t;return(t=this.logChunkController)==null?void 0:t.logsToBlob({clientId:await this.crypto.getClientId()})}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(t){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,t),this.logger.error(t.message),t}}}const EM=AM;class MM{constructor(t){this.opts=t,this.protocol="wc",this.version=2}}class _M{constructor(t){this.client=t}}const OM="wc",IM=2,SM="client",NM=`${OM}@${IM}:${SM}:`,CM={name:SM,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},jM="WALLETCONNECT_DEEPLINK_CHOICE",xM="proposal",PM="Proposal expired",TM="session",RM=D.SEVEN_DAYS,DM="engine",UM={wc_sessionPropose:{req:{ttl:D.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:D.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:D.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:D.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:D.ONE_DAY,prompt:!1,tag:1104},res:{ttl:D.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:D.ONE_DAY,prompt:!1,tag:1106},res:{ttl:D.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:D.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:D.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:D.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:D.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:D.ONE_DAY,prompt:!1,tag:1112},res:{ttl:D.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:D.ONE_DAY,prompt:!1,tag:1114},res:{ttl:D.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:D.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:D.ONE_HOUR,prompt:!1,tag:1117}}},BM={min:D.FIVE_MINUTES,max:D.SEVEN_DAYS},kM={idle:"IDLE",active:"ACTIVE"},$M="request",FM=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"],qM="wc",LM="auth",KM="authKeys",HM="pairingTopics",GM="requests",QM=`${qM}@${1.5}:${LM}:`,JM=`${QM}:PUB_KEY`;var VM=Object.defineProperty,zM=Object.defineProperties,YM=Object.getOwnPropertyDescriptors,WM=Object.getOwnPropertySymbols,XM=Object.prototype.hasOwnProperty,ZM=Object.prototype.propertyIsEnumerable,t_=(t,r,n)=>r in t?VM(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n,r_=(t,r)=>{for(var n in r||(r={}))XM.call(r,n)&&t_(t,n,r[n]);if(WM)for(var n of WM(r))ZM.call(r,n)&&t_(t,n,r[n]);return t},n_=(t,r)=>zM(t,YM(r));class i_ extends _M{constructor(t){super(t),this.name=DM,this.events=new n,this.initialized=!1,this.requestQueue={state:kM.idle,queue:[]},this.sessionRequestQueue={state:kM.idle,queue:[]},this.requestQueueDelay=D.ONE_SECOND,this.expectedPairingMethodMap=new Map,this.recentlyDeletedMap=new Map,this.recentlyDeletedLimit=200,this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),this.client.core.pairing.register({methods:Object.keys(UM)}),this.initialized=!0,setTimeout((()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()}),D.toMiliseconds(this.requestQueueDelay)))},this.connect=async t=>{await this.isInitialized();const r=n_(r_({},t),{requiredNamespaces:t.requiredNamespaces||{},optionalNamespaces:t.optionalNamespaces||{}});await this.isValidConnect(r);const{pairingTopic:n,requiredNamespaces:i,optionalNamespaces:e,sessionProperties:s,relays:o}=r;let a=n,u,h=!1;try{a&&(h=this.client.core.pairing.pairings.get(a).active)}catch(t){throw this.client.logger.error(`connect() -> pairing.get(${a}) failed`),t}if(!a||!h){const{topic:t,uri:r}=await this.client.core.pairing.create();a=t,u=r}if(!a){const{message:t}=$l("NO_MATCHING_KEY",`connect() pairing topic: ${a}`);throw new Error(t)}const f=await this.client.core.crypto.generateKeyPair(),c=UM.wc_sessionPropose.req.ttl||D.FIVE_MINUTES,l=_s(c),d=r_({requiredNamespaces:i,optionalNamespaces:e,relays:o??[{protocol:nE}],proposer:{publicKey:f,metadata:this.client.metadata},expiryTimestamp:l},s&&{sessionProperties:s}),{reject:v,resolve:w,done:p}=bs(c,PM);this.events.once(Is("session_connect"),(async({error:t,session:r})=>{if(t)v(t);else if(r){r.self.publicKey=f;const t=n_(r_({},r),{requiredNamespaces:d.requiredNamespaces,optionalNamespaces:d.optionalNamespaces});await this.client.session.set(r.topic,t),await this.setExpiry(r.topic,r.expiry),a&&await this.client.core.pairing.updateMetadata({topic:a,metadata:r.peer.metadata}),w(t)}}));const y=await this.sendRequest({topic:a,method:"wc_sessionPropose",params:d,throwOnFailedPublish:!0});return await this.setProposal(y,r_({id:y},d)),{uri:u,approval:p}},this.pair=async t=>{await this.isInitialized();try{return await this.client.core.pairing.pair(t)}catch(t){throw this.client.logger.error("pair() failed"),t}},this.approve=async t=>{await this.isInitialized();try{await this.isValidApprove(t)}catch(t){throw this.client.logger.error("approve() -> isValidApprove() failed"),t}const{id:r,relayProtocol:n,namespaces:i,sessionProperties:e,sessionConfig:s}=t;let o;try{o=this.client.proposal.get(r)}catch(t){throw this.client.logger.error(`approve() -> proposal.get(${r}) failed`),t}let{pairingTopic:a,proposer:u,requiredNamespaces:h,optionalNamespaces:f}=o;a=a||"";const c=await this.client.core.crypto.generateKeyPair(),l=u.publicKey,d=await this.client.core.crypto.generateSharedKey(c,l),v=r_(r_({relay:{protocol:n??"irn"},namespaces:i,pairingTopic:a,controller:{publicKey:c,metadata:this.client.metadata},expiry:_s(RM)},e&&{sessionProperties:e}),s&&{sessionConfig:s});await this.client.core.relayer.subscribe(d);const w=n_(r_({},v),{topic:d,requiredNamespaces:h,optionalNamespaces:f,pairingTopic:a,acknowledged:!1,self:v.controller,peer:{publicKey:u.publicKey,metadata:u.metadata},controller:c});await this.client.session.set(d,w);try{await this.sendResult({id:r,topic:a,result:{relay:{protocol:n??"irn"},responderPublicKey:c},throwOnFailedPublish:!0}),await this.sendRequest({topic:d,method:"wc_sessionSettle",params:v,throwOnFailedPublish:!0})}catch(t){throw this.client.logger.error(t),this.client.session.delete(d,Fl("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(d),t}return await this.client.core.pairing.updateMetadata({topic:a,metadata:u.metadata}),await this.client.proposal.delete(r,Fl("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:a}),await this.setExpiry(d,_s(RM)),{topic:d,acknowledged:()=>new Promise((t=>setTimeout((()=>t(this.client.session.get(d))),500)))}},this.reject=async t=>{await this.isInitialized();try{await this.isValidReject(t)}catch(t){throw this.client.logger.error("reject() -> isValidReject() failed"),t}const{id:r,reason:n}=t;let i;try{i=this.client.proposal.get(r).pairingTopic}catch(t){throw this.client.logger.error(`reject() -> proposal.get(${r}) failed`),t}i&&(await this.sendError({id:r,topic:i,error:n}),await this.client.proposal.delete(r,Fl("USER_DISCONNECTED")))},this.update=async t=>{await this.isInitialized();try{await this.isValidUpdate(t)}catch(t){throw this.client.logger.error("update() -> isValidUpdate() failed"),t}const{topic:r,namespaces:n}=t,{done:i,resolve:e,reject:s}=bs(),o=lg(),a=dg().toString(),u=this.client.session.get(r).namespaces;return this.events.once(Is("session_update",o),(({error:t})=>{t?s(t):e()})),await this.client.session.update(r,{namespaces:n}),this.sendRequest({topic:r,method:"wc_sessionUpdate",params:{namespaces:n},throwOnFailedPublish:!0,clientRpcId:o,relayRpcId:a}).catch((t=>{this.client.logger.error(t),this.client.session.update(r,{namespaces:u}),s(t)})),{acknowledged:i}},this.extend=async t=>{await this.isInitialized();try{await this.isValidExtend(t)}catch(t){throw this.client.logger.error("extend() -> isValidExtend() failed"),t}const{topic:r}=t,n=lg(),{done:i,resolve:e,reject:s}=bs();return this.events.once(Is("session_extend",n),(({error:t})=>{t?s(t):e()})),await this.setExpiry(r,_s(RM)),this.sendRequest({topic:r,method:"wc_sessionExtend",params:{},clientRpcId:n,throwOnFailedPublish:!0}).catch((t=>{s(t)})),{acknowledged:i}},this.request=async t=>{await this.isInitialized();try{await this.isValidRequest(t)}catch(t){throw this.client.logger.error("request() -> isValidRequest() failed"),t}const{chainId:r,request:n,topic:i,expiry:e=UM.wc_sessionRequest.req.ttl}=t,s=this.client.session.get(i),o=lg(),a=dg().toString(),{done:u,resolve:h,reject:f}=bs(e,"Request expired. Please try again.");return this.events.once(Is("session_request",o),(({error:t,result:r})=>{t?f(t):h(r)})),await Promise.all([new Promise((async t=>{await this.sendRequest({clientRpcId:o,relayRpcId:a,topic:i,method:"wc_sessionRequest",params:{request:n_(r_({},n),{expiryTimestamp:_s(e)}),chainId:r},expiry:e,throwOnFailedPublish:!0}).catch((t=>f(t))),this.client.events.emit("session_request_sent",{topic:i,request:n,chainId:r,id:o}),t()})),new Promise((async t=>{var r;if(!((r=s.sessionConfig)!=null&&r.disableDeepLink)){const t=await Cs(this.client.core.storage,jM);Ns({id:o,topic:i,wcDeepLink:t})}t()})),u()]).then((t=>t[2]))},this.respond=async t=>{await this.isInitialized(),await this.isValidRespond(t);const{topic:r,response:n}=t,{id:i}=n;xg(n)?await this.sendResult({id:i,topic:r,result:n.result,throwOnFailedPublish:!0}):Pg(n)&&await this.sendError({id:i,topic:r,error:n.error}),this.cleanupAfterResponse(t)},this.ping=async t=>{await this.isInitialized();try{await this.isValidPing(t)}catch(t){throw this.client.logger.error("ping() -> isValidPing() failed"),t}const{topic:r}=t;if(this.client.session.keys.includes(r)){const t=lg(),n=dg().toString(),{done:i,resolve:e,reject:s}=bs();this.events.once(Is("session_ping",t),(({error:t})=>{t?s(t):e()})),await Promise.all([this.sendRequest({topic:r,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:t,relayRpcId:n}),i()])}else this.client.core.pairing.pairings.keys.includes(r)&&await this.client.core.pairing.ping({topic:r})},this.emit=async t=>{await this.isInitialized(),await this.isValidEmit(t);const{topic:r,event:n,chainId:i}=t,e=dg().toString();await this.sendRequest({topic:r,method:"wc_sessionEvent",params:{event:n,chainId:i},throwOnFailedPublish:!0,relayRpcId:e})},this.disconnect=async t=>{await this.isInitialized(),await this.isValidDisconnect(t);const{topic:r}=t;if(this.client.session.keys.includes(r))await this.sendRequest({topic:r,method:"wc_sessionDelete",params:Fl("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:r,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(r))await this.client.core.pairing.disconnect({topic:r});else{const{message:t}=$l("MISMATCHED_TOPIC",`Session or pairing topic not found: ${r}`);throw new Error(t)}},this.find=t=>(this.isInitialized(),this.client.session.getAll().filter((r=>Ql(r,t)))),this.getPendingSessionRequests=()=>this.client.pendingRequest.getAll(),this.authenticate=async t=>{this.isInitialized(),this.isValidAuthenticate(t);const{chains:r,statement:n="",uri:i,domain:e,nonce:s,type:o,exp:a,nbf:u,methods:h=[]}=t,f=[...t.resources||[]],{topic:c,uri:l}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"]});this.client.logger.info({message:"Generated new pairing",pairing:{topic:c,uri:l}});const d=await this.client.core.crypto.generateKeyPair(),v=rl(d);if(await Promise.all([this.client.auth.authKeys.set(JM,{responseTopic:v,publicKey:d}),this.client.auth.pairingTopics.set(v,{topic:v,pairingTopic:c})]),await this.client.core.relayer.subscribe(v),this.client.logger.info(`sending request to new pairing topic: ${c}`),h.length>0){const{namespace:t}=Qe(r[0]);let n=Rc(t,"request",h);qc(f)&&(n=Uc(n,f.pop())),f.push(n)}const w=_s(UM.wc_sessionPropose.req.ttl),p={authPayload:{type:o??"caip122",chains:r,statement:n,aud:i,domain:e,version:"1",nonce:s,iat:(new Date).toISOString(),exp:a,nbf:u,resources:f},requester:{publicKey:d,metadata:this.client.metadata},expiryTimestamp:w},y={eip155:{chains:r,methods:[...new Set(["personal_sign",...h])],events:["chainChanged","accountsChanged"]}},b={requiredNamespaces:{},optionalNamespaces:y,relays:[{protocol:"irn"}],proposer:{publicKey:d,metadata:this.client.metadata},expiryTimestamp:w},{done:g,resolve:m,reject:A}=bs(UM.wc_sessionAuthenticate.req.ttl,"Request expired"),E=async({error:t,session:r})=>{if(this.events.off(Is("session_request",_),M),t)A(t);else if(r){r.self.publicKey=d,await this.client.session.set(r.topic,r),await this.setExpiry(r.topic,r.expiry),c&&await this.client.core.pairing.updateMetadata({topic:c,metadata:r.peer.metadata});const t=this.client.session.get(r.topic);m({session:t})}},M=async t=>{if(t.error){const r=Fl("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return t.error.code===r.code?void 0:(this.events.off(Is("session_connect"),E),A(t.error.message))}this.events.off(Is("session_connect"),E);const{cacaos:r,responder:n}=t.result,i=[],e=[];for(const t of r){await Oc({cacao:t,projectId:this.client.core.projectId})||(this.client.logger.error(t,"Signature verification failed"),A(Fl("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:r}=t,n=qc(r.resources),s=[Mc(r.iss)],o=_c(r.iss);if(n){const t=$c(n),r=Fc(n);i.push(...t),s.push(...r)}for(const t of s)e.push(`${t}:${o}`)}const s=await this.client.core.crypto.generateSharedKey(d,n.publicKey);let o;i.length>0&&(o={topic:s,acknowledged:!0,self:{publicKey:d,metadata:this.client.metadata},peer:n,controller:n.publicKey,expiry:_s(RM),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:c,namespaces:Ul([...new Set(i)],[...new Set(e)])},await this.client.core.relayer.subscribe(s),await this.client.session.set(s,o),o=this.client.session.get(s)),m({auths:r,session:o})},_=lg(),O=lg();this.events.once(Is("session_connect"),E),this.events.once(Is("session_request",_),M);try{await Promise.all([this.sendRequest({topic:c,method:"wc_sessionAuthenticate",params:p,expiry:t.expiry,throwOnFailedPublish:!0,clientRpcId:_}),this.sendRequest({topic:c,method:"wc_sessionPropose",params:b,expiry:UM.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:O})])}catch(t){throw this.events.off(Is("session_connect"),E),this.events.off(Is("session_request",_),M),t}return await this.setProposal(O,r_({id:O},b)),await this.client.auth.requests.set(_,{authPayload:p.authPayload,requester:p.requester,expiryTimestamp:w,id:_,pairingTopic:c,verifyContext:{}}),{uri:l,response:g}},this.approveSessionAuthenticate=async t=>{this.isInitialized();const{id:r,auths:n}=t,i=this.getPendingAuthRequest(r);if(!i)throw new Error(`Could not find pending auth request with id ${r}`);const e=i.requester.publicKey,s=await this.client.core.crypto.generateKeyPair(),o=rl(e),a={type:Jc,receiverPublicKey:e,senderPublicKey:s},u=[],h=[];for(const t of n){if(!await Oc({cacao:t,projectId:this.client.core.projectId})){const t=Fl("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:r,topic:o,error:t,encodeOpts:a}),new Error(t.message)}const{p:n}=t,i=qc(n.resources),e=[Mc(n.iss)],s=_c(n.iss);if(i){const t=$c(i),r=Fc(i);u.push(...t),e.push(...r)}for(const t of e)h.push(`${t}:${s}`)}const f=await this.client.core.crypto.generateSharedKey(s,e);let c;return u?.length>0&&(c={topic:f,acknowledged:!0,self:{publicKey:s,metadata:this.client.metadata},peer:{publicKey:e,metadata:i.requester.metadata},controller:e,expiry:_s(RM),authentication:n,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:"",namespaces:Ul([...new Set(u)],[...new Set(h)])},await this.client.core.relayer.subscribe(f),await this.client.session.set(f,c)),await this.sendResult({topic:o,id:r,result:{cacaos:n,responder:{publicKey:s,metadata:this.client.metadata}},encodeOpts:a,throwOnFailedPublish:!0}),await this.client.auth.requests.delete(r,{message:"fullfilled",code:0}),await this.client.core.pairing.activate({topic:i.pairingTopic}),{session:c}},this.rejectSessionAuthenticate=async t=>{await this.isInitialized();const{id:r,reason:n}=t,i=this.getPendingAuthRequest(r);if(!i)throw new Error(`Could not find pending auth request with id ${r}`);const e=i.requester.publicKey,s=await this.client.core.crypto.generateKeyPair(),o=rl(e),a={type:Jc,receiverPublicKey:e,senderPublicKey:s};await this.sendError({id:r,topic:o,error:n,encodeOpts:a}),await this.client.auth.requests.delete(r,{message:"rejected",code:0}),await this.client.proposal.delete(r,Fl("USER_DISCONNECTED"))},this.formatAuthMessage=t=>{this.isInitialized();const{request:r,iss:n}=t;return Ic(r,n)},this.cleanupDuplicatePairings=async t=>{if(t.pairingTopic)try{const r=this.client.core.pairing.pairings.get(t.pairingTopic),n=this.client.core.pairing.pairings.getAll().filter((n=>{var i,e;return((i=n.peerMetadata)==null?void 0:i.url)&&((e=n.peerMetadata)==null?void 0:e.url)===t.peer.metadata.url&&n.topic&&n.topic!==r.topic}));if(n.length===0)return;this.client.logger.info(`Cleaning up ${n.length} duplicate pairing(s)`),await Promise.all(n.map((t=>this.client.core.pairing.disconnect({topic:t.topic})))),this.client.logger.info("Duplicate pairings clean up finished")}catch(t){this.client.logger.error(t)}},this.deleteSession=async t=>{const{topic:r,expirerHasDeleted:n=!1,emitEvent:i=!0,id:e=0}=t,{self:s}=this.client.session.get(r);await this.client.core.relayer.unsubscribe(r),await this.client.session.delete(r,Fl("USER_DISCONNECTED")),this.addToRecentlyDeleted(r,"session"),this.client.core.crypto.keychain.has(s.publicKey)&&await this.client.core.crypto.deleteKeyPair(s.publicKey),this.client.core.crypto.keychain.has(r)&&await this.client.core.crypto.deleteSymKey(r),n||this.client.core.expirer.del(r),this.client.core.storage.removeItem(jM).catch((t=>this.client.logger.warn(t))),this.getPendingSessionRequests().forEach((t=>{t.topic===r&&this.deletePendingSessionRequest(t.id,Fl("USER_DISCONNECTED"))})),i&&this.client.events.emit("session_delete",{id:e,topic:r})},this.deleteProposal=async(t,r)=>{await Promise.all([this.client.proposal.delete(t,Fl("USER_DISCONNECTED")),r?Promise.resolve():this.client.core.expirer.del(t)]),this.addToRecentlyDeleted(t,"proposal")},this.deletePendingSessionRequest=async(t,r,n=!1)=>{await Promise.all([this.client.pendingRequest.delete(t,r),n?Promise.resolve():this.client.core.expirer.del(t)]),this.addToRecentlyDeleted(t,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter((r=>r.id!==t)),n&&(this.sessionRequestQueue.state=kM.idle,this.client.events.emit("session_request_expire",{id:t}))},this.setExpiry=async(t,r)=>{this.client.session.keys.includes(t)&&await this.client.session.update(t,{expiry:r}),this.client.core.expirer.set(t,r)},this.setProposal=async(t,r)=>{await this.client.proposal.set(t,r),this.client.core.expirer.set(t,_s(UM.wc_sessionPropose.req.ttl))},this.setPendingSessionRequest=async t=>{const{id:r,topic:n,params:i,verifyContext:e}=t,s=i.request.expiryTimestamp||_s(UM.wc_sessionRequest.req.ttl);await this.client.pendingRequest.set(r,{id:r,topic:n,params:i,verifyContext:e}),s&&this.client.core.expirer.set(r,s)},this.sendRequest=async t=>{const{topic:r,method:n,params:i,expiry:e,relayRpcId:s,clientRpcId:o,throwOnFailedPublish:a}=t,u=vg(n,i,o);if(os()&&FM.includes(n)){const t=nl(JSON.stringify(u));this.client.core.verify.register({attestationId:t})}let h;try{h=await this.client.core.crypto.encode(r,u)}catch(t){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${r} failed`),t}const f=UM[n].req;return e&&(f.ttl=e),s&&(f.id=s),this.client.core.history.set(r,u),a?(f.internal=n_(r_({},f.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,h,f)):this.client.core.relayer.publish(r,h,f).catch((t=>this.client.logger.error(t))),u.id},this.sendResult=async t=>{const{id:r,topic:n,result:i,throwOnFailedPublish:e,encodeOpts:s}=t,o=wg(r,i);let a;try{a=await this.client.core.crypto.encode(n,o,s)}catch(t){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${n} failed`),t}let u;try{u=await this.client.core.history.get(n,r)}catch(t){throw this.client.logger.error(`sendResult() -> history.get(${n}, ${r}) failed`),t}const h=UM[u.request.method].res;e?(h.internal=n_(r_({},h.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(n,a,h)):this.client.core.relayer.publish(n,a,h).catch((t=>this.client.logger.error(t))),await this.client.core.history.resolve(o)},this.sendError=async t=>{const{id:r,topic:n,error:i,encodeOpts:e}=t,s=pg(r,i);let o;try{o=await this.client.core.crypto.encode(n,s,e)}catch(t){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${n} failed`),t}let a;try{a=await this.client.core.history.get(n,r)}catch(t){throw this.client.logger.error(`sendError() -> history.get(${n}, ${r}) failed`),t}const u=UM[a.request.method].res;this.client.core.relayer.publish(n,o,u),await this.client.core.history.resolve(s)},this.cleanup=async()=>{const t=[],r=[];this.client.session.getAll().forEach((r=>{let n=!1;Os(r.expiry)&&(n=!0),this.client.core.crypto.keychain.has(r.topic)||(n=!0),n&&t.push(r.topic)})),this.client.proposal.getAll().forEach((t=>{Os(t.expiryTimestamp)&&r.push(t.id)})),await Promise.all([...t.map((t=>this.deleteSession({topic:t}))),...r.map((t=>this.deleteProposal(t)))])},this.onRelayEventRequest=async t=>{this.requestQueue.queue.push(t),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state===kM.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=kM.active;const t=this.requestQueue.queue.shift();if(t)try{this.processRequest(t),await new Promise((t=>setTimeout(t,300)))}catch(t){this.client.logger.warn(t)}}this.requestQueue.state=kM.idle},this.processRequest=t=>{const{topic:r,payload:n}=t,i=n.method;if(!this.shouldIgnorePairingRequest({topic:r,requestMethod:i}))switch(i){case"wc_sessionPropose":return this.onSessionProposeRequest(r,n);case"wc_sessionSettle":return this.onSessionSettleRequest(r,n);case"wc_sessionUpdate":return this.onSessionUpdateRequest(r,n);case"wc_sessionExtend":return this.onSessionExtendRequest(r,n);case"wc_sessionPing":return this.onSessionPingRequest(r,n);case"wc_sessionDelete":return this.onSessionDeleteRequest(r,n);case"wc_sessionRequest":return this.onSessionRequest(r,n);case"wc_sessionEvent":return this.onSessionEventRequest(r,n);case"wc_sessionAuthenticate":return this.onSessionAuthenticateRequest(r,n);default:return this.client.logger.info(`Unsupported request method ${i}`)}},this.onRelayEventResponse=async t=>{const{topic:r,payload:n}=t,i=(await this.client.core.history.get(r,n.id)).request.method;switch(i){case"wc_sessionPropose":return this.onSessionProposeResponse(r,n);case"wc_sessionSettle":return this.onSessionSettleResponse(r,n);case"wc_sessionUpdate":return this.onSessionUpdateResponse(r,n);case"wc_sessionExtend":return this.onSessionExtendResponse(r,n);case"wc_sessionPing":return this.onSessionPingResponse(r,n);case"wc_sessionRequest":return this.onSessionRequestResponse(r,n);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(r,n);default:return this.client.logger.info(`Unsupported response method ${i}`)}},this.onRelayEventUnknownPayload=t=>{const{topic:r}=t,{message:n}=$l("MISSING_OR_INVALID",`Decoded payload on topic ${r} is not identifiable as a JSON-RPC request or a response.`);throw new Error(n)},this.shouldIgnorePairingRequest=t=>{const{topic:r,requestMethod:n}=t,i=this.expectedPairingMethodMap.get(r);return!i||i.includes(n)?!1:!!(i.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)},this.onSessionProposeRequest=async(t,r)=>{const{params:n,id:i}=r;try{this.isValidConnect(r_({},r.params));const e=n.expiryTimestamp||_s(UM.wc_sessionPropose.req.ttl),s=r_({id:i,pairingTopic:t,expiryTimestamp:e},n);await this.setProposal(i,s);const o=nl(JSON.stringify(r)),a=await this.getVerifyContext(o,s.proposer.metadata);this.client.events.emit("session_proposal",{id:i,params:s,verifyContext:a})}catch(r){await this.sendError({id:i,topic:t,error:r}),this.client.logger.error(r)}},this.onSessionProposeResponse=async(t,r)=>{const{id:n}=r;if(xg(r)){const{result:i}=r;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:i});const e=this.client.proposal.get(n);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:e});const s=e.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:s});const o=i.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:o});const a=await this.client.core.crypto.generateSharedKey(s,o);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:a});const u=await this.client.core.relayer.subscribe(a);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:u}),await this.client.core.pairing.activate({topic:t})}else if(Pg(r)){await this.client.proposal.delete(n,Fl("USER_DISCONNECTED"));const t=Is("session_connect");if(this.events.listenerCount(t)===0)throw new Error(`emitting ${t} without any listeners, 954`);this.events.emit(Is("session_connect"),{error:r.error})}},this.onSessionSettleRequest=async(t,r)=>{const{id:n,params:i}=r;try{this.isValidSessionSettleRequest(i);const{relay:n,controller:e,expiry:s,namespaces:o,sessionProperties:a,pairingTopic:u,sessionConfig:h}=r.params,f=r_(r_({topic:t,relay:n,expiry:s,namespaces:o,acknowledged:!0,pairingTopic:u,requiredNamespaces:{},optionalNamespaces:{},controller:e.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:e.publicKey,metadata:e.metadata}},a&&{sessionProperties:a}),h&&{sessionConfig:h});await this.sendResult({id:r.id,topic:t,result:!0,throwOnFailedPublish:!0});const c=Is("session_connect");if(this.events.listenerCount(c)===0)throw new Error(`emitting ${c} without any listeners 997`);this.events.emit(Is("session_connect"),{session:f}),this.cleanupDuplicatePairings(f)}catch(r){await this.sendError({id:n,topic:t,error:r}),this.client.logger.error(r)}},this.onSessionSettleResponse=async(t,r)=>{const{id:n}=r;xg(r)?(await this.client.session.update(t,{acknowledged:!0}),this.events.emit(Is("session_approve",n),{})):Pg(r)&&(await this.client.session.delete(t,Fl("USER_DISCONNECTED")),this.events.emit(Is("session_approve",n),{error:r.error}))},this.onSessionUpdateRequest=async(t,r)=>{const{params:n,id:i}=r;try{const r=`${t}_session_update`,e=Pd.get(r);if(e&&this.isRequestOutOfSync(e,i)){this.client.logger.info(`Discarding out of sync request - ${i}`),this.sendError({id:i,topic:t,error:Fl("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(r_({topic:t},n));try{Pd.set(r,i),await this.client.session.update(t,{namespaces:n.namespaces}),await this.sendResult({id:i,topic:t,result:!0,throwOnFailedPublish:!0})}catch(t){throw Pd.delete(r),t}this.client.events.emit("session_update",{id:i,topic:t,params:n})}catch(r){await this.sendError({id:i,topic:t,error:r}),this.client.logger.error(r)}},this.isRequestOutOfSync=(t,r)=>parseInt(r.toString().slice(0,-3))<=parseInt(t.toString().slice(0,-3)),this.onSessionUpdateResponse=(t,r)=>{const{id:n}=r,i=Is("session_update",n);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);xg(r)?this.events.emit(Is("session_update",n),{}):Pg(r)&&this.events.emit(Is("session_update",n),{error:r.error})},this.onSessionExtendRequest=async(t,r)=>{const{id:n}=r;try{this.isValidExtend({topic:t}),await this.setExpiry(t,_s(RM)),await this.sendResult({id:n,topic:t,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:n,topic:t})}catch(r){await this.sendError({id:n,topic:t,error:r}),this.client.logger.error(r)}},this.onSessionExtendResponse=(t,r)=>{const{id:n}=r,i=Is("session_extend",n);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);xg(r)?this.events.emit(Is("session_extend",n),{}):Pg(r)&&this.events.emit(Is("session_extend",n),{error:r.error})},this.onSessionPingRequest=async(t,r)=>{const{id:n}=r;try{this.isValidPing({topic:t}),await this.sendResult({id:n,topic:t,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:n,topic:t})}catch(r){await this.sendError({id:n,topic:t,error:r}),this.client.logger.error(r)}},this.onSessionPingResponse=(t,r)=>{const{id:n}=r,i=Is("session_ping",n);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);setTimeout((()=>{xg(r)?this.events.emit(Is("session_ping",n),{}):Pg(r)&&this.events.emit(Is("session_ping",n),{error:r.error})}),500)},this.onSessionDeleteRequest=async(t,r)=>{const{id:n}=r;try{this.isValidDisconnect({topic:t,reason:r.params}),await Promise.all([new Promise((r=>{this.client.core.relayer.once(aE.publish,(async()=>{r(await this.deleteSession({topic:t,id:n}))}))})),this.sendResult({id:n,topic:t,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:t,error:Fl("USER_DISCONNECTED")})])}catch(t){this.client.logger.error(t)}},this.onSessionRequest=async(t,r)=>{const{id:n,params:i}=r;try{await this.isValidRequest(r_({topic:t},i));const r=nl(JSON.stringify(vg("wc_sessionRequest",i,n))),e=this.client.session.get(t),s=await this.getVerifyContext(r,e.peer.metadata),o={id:n,topic:t,params:i,verifyContext:s};await this.setPendingSessionRequest(o),this.addSessionRequestToSessionRequestQueue(o),this.processSessionRequestQueue()}catch(r){await this.sendError({id:n,topic:t,error:r}),this.client.logger.error(r)}},this.onSessionRequestResponse=(t,r)=>{const{id:n}=r,i=Is("session_request",n);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);xg(r)?this.events.emit(Is("session_request",n),{result:r.result}):Pg(r)&&this.events.emit(Is("session_request",n),{error:r.error})},this.onSessionEventRequest=async(t,r)=>{const{id:n,params:i}=r;try{const r=`${t}_session_event_${i.event.name}`,e=Pd.get(r);if(e&&this.isRequestOutOfSync(e,n)){this.client.logger.info(`Discarding out of sync request - ${n}`);return}this.isValidEmit(r_({topic:t},i)),this.client.events.emit("session_event",{id:n,topic:t,params:i}),Pd.set(r,n)}catch(r){await this.sendError({id:n,topic:t,error:r}),this.client.logger.error(r)}},this.onSessionAuthenticateResponse=(t,r)=>{const{id:n}=r;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:t,payload:r}),xg(r)?this.events.emit(Is("session_request",n),{result:r.result}):Pg(r)&&this.events.emit(Is("session_request",n),{error:r.error})},this.onSessionAuthenticateRequest=async(t,r)=>{const{requester:n,authPayload:i,expiryTimestamp:e}=r.params,s=nl(JSON.stringify(r)),o=await this.getVerifyContext(s,this.client.metadata),a={requester:n,pairingTopic:t,id:r.id,authPayload:i,verifyContext:o,expiryTimestamp:e};await this.client.auth.requests.set(r.id,a),this.client.events.emit("session_authenticate",{topic:t,params:r.params,id:r.id})},this.addSessionRequestToSessionRequestQueue=t=>{this.sessionRequestQueue.queue.push(t)},this.cleanupAfterResponse=t=>{this.deletePendingSessionRequest(t.response.id,{message:"fulfilled",code:0}),setTimeout((()=>{this.sessionRequestQueue.state=kM.idle,this.processSessionRequestQueue()}),D.toMiliseconds(this.requestQueueDelay))},this.cleanupPendingSentRequestsForTopic=({topic:t,error:r})=>{const n=this.client.core.history.pending;n.length>0&&n.filter((r=>r.topic===t&&r.request.method==="wc_sessionRequest")).forEach((t=>{const n=t.request.id,i=Is("session_request",n);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);this.events.emit(Is("session_request",t.request.id),{error:r})}))},this.processSessionRequestQueue=()=>{if(this.sessionRequestQueue.state===kM.active){this.client.logger.info("session request queue is already active.");return}const t=this.sessionRequestQueue.queue[0];if(!t){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=kM.active,this.client.events.emit("session_request",t)}catch(t){this.client.logger.error(t)}},this.onPairingCreated=t=>{if(t.methods&&this.expectedPairingMethodMap.set(t.topic,t.methods),t.active)return;const r=this.client.proposal.getAll().find((r=>r.pairingTopic===t.topic));r&&this.onSessionProposeRequest(t.topic,vg("wc_sessionPropose",{requiredNamespaces:r.requiredNamespaces,optionalNamespaces:r.optionalNamespaces,relays:r.relays,proposer:r.proposer,sessionProperties:r.sessionProperties},r.id))},this.isValidConnect=async t=>{if(!cd(t)){const{message:r}=$l("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(t)}`);throw new Error(r)}const{pairingTopic:r,requiredNamespaces:n,optionalNamespaces:i,sessionProperties:e,relays:s}=t;if(Kl(r)||await this.isValidPairingTopic(r),!hd(s,!0)){const{message:t}=$l("MISSING_OR_INVALID",`connect() relays: ${s}`);throw new Error(t)}!Kl(n)&&Ll(n)!==0&&this.validateNamespaces(n,"requiredNamespaces"),!Kl(i)&&Ll(i)!==0&&this.validateNamespaces(i,"optionalNamespaces"),Kl(e)||this.validateSessionProps(e,"sessionProperties")},this.validateNamespaces=(t,r)=>{const n=od(t,"connect()",r);if(n)throw new Error(n.message)},this.isValidApprove=async t=>{if(!cd(t))throw new Error($l("MISSING_OR_INVALID",`approve() params: ${t}`).message);const{id:r,namespaces:n,relayProtocol:i,sessionProperties:e}=t;this.checkRecentlyDeleted(r),await this.isValidProposalId(r);const s=this.client.proposal.get(r),o=ad(n,"approve()");if(o)throw new Error(o.message);const a=gd(s.requiredNamespaces,n,"approve()");if(a)throw new Error(a.message);if(!Hl(i,!0)){const{message:t}=$l("MISSING_OR_INVALID",`approve() relayProtocol: ${i}`);throw new Error(t)}Kl(e)||this.validateSessionProps(e,"sessionProperties")},this.isValidReject=async t=>{if(!cd(t)){const{message:r}=$l("MISSING_OR_INVALID",`reject() params: ${t}`);throw new Error(r)}const{id:r,reason:n}=t;if(this.checkRecentlyDeleted(r),await this.isValidProposalId(r),!ld(n)){const{message:t}=$l("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(n)}`);throw new Error(t)}},this.isValidSessionSettleRequest=t=>{if(!cd(t)){const{message:r}=$l("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${t}`);throw new Error(r)}const{relay:r,controller:n,namespaces:i,expiry:e}=t;if(!ud(r)){const{message:t}=$l("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(t)}const s=Xl(n,"onSessionSettleRequest()");if(s)throw new Error(s.message);const o=ad(i,"onSessionSettleRequest()");if(o)throw new Error(o.message);if(Os(e)){const{message:t}=$l("EXPIRED","onSessionSettleRequest()");throw new Error(t)}},this.isValidUpdate=async t=>{if(!cd(t)){const{message:r}=$l("MISSING_OR_INVALID",`update() params: ${t}`);throw new Error(r)}const{topic:r,namespaces:n}=t;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const i=this.client.session.get(r),e=ad(n,"update()");if(e)throw new Error(e.message);const s=gd(i.requiredNamespaces,n,"update()");if(s)throw new Error(s.message)},this.isValidExtend=async t=>{if(!cd(t)){const{message:r}=$l("MISSING_OR_INVALID",`extend() params: ${t}`);throw new Error(r)}const{topic:r}=t;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r)},this.isValidRequest=async t=>{if(!cd(t)){const{message:r}=$l("MISSING_OR_INVALID",`request() params: ${t}`);throw new Error(r)}const{topic:r,request:n,chainId:i,expiry:e}=t;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const{namespaces:s}=this.client.session.get(r);if(!pd(s,i)){const{message:t}=$l("MISSING_OR_INVALID",`request() chainId: ${i}`);throw new Error(t)}if(!dd(n)){const{message:t}=$l("MISSING_OR_INVALID",`request() ${JSON.stringify(n)}`);throw new Error(t)}if(!yd(s,i,n.method)){const{message:t}=$l("MISSING_OR_INVALID",`request() method: ${n.method}`);throw new Error(t)}if(e&&!Md(e,BM)){const{message:t}=$l("MISSING_OR_INVALID",`request() expiry: ${e}. Expiry must be a number (in seconds) between ${BM.min} and ${BM.max}`);throw new Error(t)}},this.isValidRespond=async t=>{var r;if(!cd(t)){const{message:r}=$l("MISSING_OR_INVALID",`respond() params: ${t}`);throw new Error(r)}const{topic:n,response:i}=t;try{await this.isValidSessionTopic(n)}catch(n){throw(r=t?.response)!=null&&r.id&&this.cleanupAfterResponse(t),n}if(!vd(i)){const{message:t}=$l("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(t)}},this.isValidPing=async t=>{if(!cd(t)){const{message:r}=$l("MISSING_OR_INVALID",`ping() params: ${t}`);throw new Error(r)}const{topic:r}=t;await this.isValidSessionOrPairingTopic(r)},this.isValidEmit=async t=>{if(!cd(t)){const{message:r}=$l("MISSING_OR_INVALID",`emit() params: ${t}`);throw new Error(r)}const{topic:r,event:n,chainId:i}=t;await this.isValidSessionTopic(r);const{namespaces:e}=this.client.session.get(r);if(!pd(e,i)){const{message:t}=$l("MISSING_OR_INVALID",`emit() chainId: ${i}`);throw new Error(t)}if(!wd(n)){const{message:t}=$l("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(n)}`);throw new Error(t)}if(!bd(e,i,n.name)){const{message:t}=$l("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(n)}`);throw new Error(t)}},this.isValidDisconnect=async t=>{if(!cd(t)){const{message:r}=$l("MISSING_OR_INVALID",`disconnect() params: ${t}`);throw new Error(r)}const{topic:r}=t;await this.isValidSessionOrPairingTopic(r)},this.isValidAuthenticate=t=>{const{chains:r,uri:n,domain:i,nonce:e}=t;if(!Array.isArray(r)||r.length===0)throw new Error("chains is required and must be a non-empty array");if(!Hl(n,!1))throw new Error("uri is required parameter");if(!Hl(i,!1))throw new Error("domain is required parameter");if(!Hl(e,!1))throw new Error("nonce is required parameter");if([...new Set(r.map((t=>Qe(t).namespace)))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:s}=Qe(r[0]);if(s!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")},this.getVerifyContext=async(t,r)=>{const n={verified:{verifyUrl:r.verifyUrl||jE,validation:"UNKNOWN",origin:r.url||""}};try{const i=await this.client.core.verify.resolve({attestationId:t,verifyUrl:r.verifyUrl});i&&(n.verified.origin=i.origin,n.verified.isScam=i.isScam,n.verified.validation=i.origin===new URL(r.url).origin?"VALID":"INVALID")}catch(t){this.client.logger.info(t)}return this.client.logger.info(`Verify context: ${JSON.stringify(n)}`),n},this.validateSessionProps=(t,r)=>{Object.values(t).forEach((t=>{if(!Hl(t,!1)){const{message:n}=$l("MISSING_OR_INVALID",`${r} must be in Record<string, string> format. Received: ${JSON.stringify(t)}`);throw new Error(n)}}))},this.getPendingAuthRequest=t=>{const r=this.client.auth.requests.get(t);return typeof r=="object"?r:void 0},this.addToRecentlyDeleted=(t,r)=>{if(this.recentlyDeletedMap.set(t,r),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let t=0;const r=this.recentlyDeletedLimit/2;for(const n of this.recentlyDeletedMap.keys()){if(t++>=r)break;this.recentlyDeletedMap.delete(n)}}},this.checkRecentlyDeleted=t=>{const r=this.recentlyDeletedMap.get(t);if(r){const{message:n}=$l("MISSING_OR_INVALID",`Record was recently deleted - ${r}: ${t}`);throw new Error(n)}}}async isInitialized(){if(!this.initialized){const{message:t}=$l("NOT_INITIALIZED",this.name);throw new Error(t)}await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(aE.message,(async t=>{const{topic:r,message:n}=t,{publicKey:i}=this.client.auth.authKeys.keys.includes(JM)?this.client.auth.authKeys.get(JM):{responseTopic:void 0,publicKey:void 0},e=await this.client.core.crypto.decode(r,n,{receiverPublicKey:i});try{Cg(e)?(this.client.core.history.set(r,e),this.onRelayEventRequest({topic:r,payload:e})):jg(e)?(await this.client.core.history.resolve(e),await this.onRelayEventResponse({topic:r,payload:e}),this.client.core.history.delete(r,e.id)):this.onRelayEventUnknownPayload({topic:r,payload:e})}catch(t){this.client.logger.error(t)}}))}registerExpirerEvents(){this.client.core.expirer.on(SE.expired,(async t=>{const{topic:r,id:n}=Ms(t.target);if(n&&this.client.pendingRequest.keys.includes(n))return await this.deletePendingSessionRequest(n,$l("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession({topic:r,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:r})):n&&(await this.deleteProposal(n,!0),this.client.events.emit("proposal_expire",{id:n}))}))}registerPairingEvents(){this.client.core.pairing.events.on(EE.create,(t=>this.onPairingCreated(t))),this.client.core.pairing.events.on(EE.delete,(t=>{this.addToRecentlyDeleted(t.topic,"pairing")}))}isValidPairingTopic(t){if(!Hl(t,!1)){const{message:r}=$l("MISSING_OR_INVALID",`pairing topic should be a string: ${t}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(t)){const{message:r}=$l("NO_MATCHING_KEY",`pairing topic doesn't exist: ${t}`);throw new Error(r)}if(Os(this.client.core.pairing.pairings.get(t).expiry)){const{message:r}=$l("EXPIRED",`pairing topic: ${t}`);throw new Error(r)}}async isValidSessionTopic(t){if(!Hl(t,!1)){const{message:r}=$l("MISSING_OR_INVALID",`session topic should be a string: ${t}`);throw new Error(r)}if(this.checkRecentlyDeleted(t),!this.client.session.keys.includes(t)){const{message:r}=$l("NO_MATCHING_KEY",`session topic doesn't exist: ${t}`);throw new Error(r)}if(Os(this.client.session.get(t).expiry)){await this.deleteSession({topic:t});const{message:r}=$l("EXPIRED",`session topic: ${t}`);throw new Error(r)}if(!this.client.core.crypto.keychain.has(t)){const{message:r}=$l("MISSING_OR_INVALID",`session topic does not exist in keychain: ${t}`);throw await this.deleteSession({topic:t}),new Error(r)}}async isValidSessionOrPairingTopic(t){if(this.checkRecentlyDeleted(t),this.client.session.keys.includes(t))await this.isValidSessionTopic(t);else if(this.client.core.pairing.pairings.keys.includes(t))this.isValidPairingTopic(t);else if(Hl(t,!1)){const{message:r}=$l("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${t}`);throw new Error(r)}else{const{message:r}=$l("MISSING_OR_INVALID",`session or pairing topic should be a string: ${t}`);throw new Error(r)}}async isValidProposalId(t){if(!fd(t)){const{message:r}=$l("MISSING_OR_INVALID",`proposal id should be a number: ${t}`);throw new Error(r)}if(!this.client.proposal.keys.includes(t)){const{message:r}=$l("NO_MATCHING_KEY",`proposal id doesn't exist: ${t}`);throw new Error(r)}if(Os(this.client.proposal.get(t).expiryTimestamp)){await this.deleteProposal(t);const{message:r}=$l("EXPIRED",`proposal id: ${t}`);throw new Error(r)}}}class e_ extends hM{constructor(t,r){super(t,r,xM,NM),this.core=t,this.logger=r}}class s_ extends hM{constructor(t,r){super(t,r,TM,NM),this.core=t,this.logger=r}}class o_ extends hM{constructor(t,r){super(t,r,$M,NM,(t=>t.id)),this.core=t,this.logger=r}}class a_ extends hM{constructor(t,r){super(t,r,KM,QM,(()=>JM)),this.core=t,this.logger=r}}class u_ extends hM{constructor(t,r){super(t,r,HM,QM),this.core=t,this.logger=r}}class h_ extends hM{constructor(t,r){super(t,r,GM,QM,(t=>t.id)),this.core=t,this.logger=r}}class f_{constructor(t,r){this.core=t,this.logger=r,this.authKeys=new a_(this.core,this.logger),this.pairingTopics=new u_(this.core,this.logger),this.requests=new h_(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}class c_ extends MM{constructor(r){super(r),this.protocol=OM,this.version=IM,this.name=CM.name,this.events=new t.exports.EventEmitter,this.on=(t,r)=>this.events.on(t,r),this.once=(t,r)=>this.events.once(t,r),this.off=(t,r)=>this.events.off(t,r),this.removeListener=(t,r)=>this.events.removeListener(t,r),this.removeAllListeners=t=>this.events.removeAllListeners(t),this.connect=async t=>{try{return await this.engine.connect(t)}catch(t){throw this.logger.error(t.message),t}},this.pair=async t=>{try{return await this.engine.pair(t)}catch(t){throw this.logger.error(t.message),t}},this.approve=async t=>{try{return await this.engine.approve(t)}catch(t){throw this.logger.error(t.message),t}},this.reject=async t=>{try{return await this.engine.reject(t)}catch(t){throw this.logger.error(t.message),t}},this.update=async t=>{try{return await this.engine.update(t)}catch(t){throw this.logger.error(t.message),t}},this.extend=async t=>{try{return await this.engine.extend(t)}catch(t){throw this.logger.error(t.message),t}},this.request=async t=>{try{return await this.engine.request(t)}catch(t){throw this.logger.error(t.message),t}},this.respond=async t=>{try{return await this.engine.respond(t)}catch(t){throw this.logger.error(t.message),t}},this.ping=async t=>{try{return await this.engine.ping(t)}catch(t){throw this.logger.error(t.message),t}},this.emit=async t=>{try{return await this.engine.emit(t)}catch(t){throw this.logger.error(t.message),t}},this.disconnect=async t=>{try{return await this.engine.disconnect(t)}catch(t){throw this.logger.error(t.message),t}},this.find=t=>{try{return this.engine.find(t)}catch(t){throw this.logger.error(t.message),t}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(t){throw this.logger.error(t.message),t}},this.authenticate=async t=>{try{return await this.engine.authenticate(t)}catch(t){throw this.logger.error(t.message),t}},this.formatAuthMessage=t=>{try{return this.engine.formatAuthMessage(t)}catch(t){throw this.logger.error(t.message),t}},this.approveSessionAuthenticate=async t=>{try{return await this.engine.approveSessionAuthenticate(t)}catch(t){throw this.logger.error(t.message),t}},this.rejectSessionAuthenticate=async t=>{try{return await this.engine.rejectSessionAuthenticate(t)}catch(t){throw this.logger.error(t.message),t}},this.name=r?.name||CM.name,this.metadata=r?.metadata||fs();const n=typeof r?.logger<"u"&&typeof r?.logger!="string"?r.logger:Ow(lp({level:r?.logger||CM.logger}));this.core=r?.core||new EM(r),this.logger=yp(n,this.name),this.session=new s_(this.core,this.logger),this.proposal=new e_(this.core,this.logger),this.pendingRequest=new o_(this.core,this.logger),this.engine=new i_(this),this.auth=new f_(this.core,this.logger)}static async init(t){const r=new c_(t);return await r.initialize(),r}get context(){return wp(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),await this.auth.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(t){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(t.message),t}}}var l_={exports:{}};(function(t,r){var n=typeof self!=="undefined"?self:p;var i=function(){function t(){this.fetch=false;this.DOMException=n.DOMException}t.prototype=n;return new t}();(function(t){(function(r){var n={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{new Blob;return true}catch(t){return false}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};function i(t){return t&&DataView.prototype.isPrototypeOf(t)}if(n.arrayBuffer){var e=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"];var s=ArrayBuffer.isView||function(t){return t&&e.indexOf(Object.prototype.toString.call(t))>-1}}function o(t){if(typeof t!=="string"){t=String(t)}if(/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t)){throw new TypeError("Invalid character in header field name")}return t.toLowerCase()}function a(t){if(typeof t!=="string"){t=String(t)}return t}function u(t){var r={next:function(){var r=t.shift();return{done:r===undefined,value:r}}};if(n.iterable){r[Symbol.iterator]=function(){return r}}return r}function h(t){this.map={};if(t instanceof h){t.forEach((function(t,r){this.append(r,t)}),this)}else if(Array.isArray(t)){t.forEach((function(t){this.append(t[0],t[1])}),this)}else if(t){Object.getOwnPropertyNames(t).forEach((function(r){this.append(r,t[r])}),this)}}h.prototype.append=function(t,r){t=o(t);r=a(r);var n=this.map[t];this.map[t]=n?n+", "+r:r};h.prototype["delete"]=function(t){delete this.map[o(t)]};h.prototype.get=function(t){t=o(t);return this.has(t)?this.map[t]:null};h.prototype.has=function(t){return this.map.hasOwnProperty(o(t))};h.prototype.set=function(t,r){this.map[o(t)]=a(r)};h.prototype.forEach=function(t,r){for(var n in this.map){if(this.map.hasOwnProperty(n)){t.call(r,this.map[n],n,this)}}};h.prototype.keys=function(){var t=[];this.forEach((function(r,n){t.push(n)}));return u(t)};h.prototype.values=function(){var t=[];this.forEach((function(r){t.push(r)}));return u(t)};h.prototype.entries=function(){var t=[];this.forEach((function(r,n){t.push([n,r])}));return u(t)};if(n.iterable){h.prototype[Symbol.iterator]=h.prototype.entries}function f(t){if(t.bodyUsed){return Promise.reject(new TypeError("Already read"))}t.bodyUsed=true}function c(t){return new Promise((function(r,n){t.onload=function(){r(t.result)};t.onerror=function(){n(t.error)}}))}function l(t){var r=new FileReader;var n=c(r);r.readAsArrayBuffer(t);return n}function d(t){var r=new FileReader;var n=c(r);r.readAsText(t);return n}function v(t){var r=new Uint8Array(t);var n=new Array(r.length);for(var i=0;i<r.length;i++){n[i]=String.fromCharCode(r[i])}return n.join("")}function w(t){if(t.slice){return t.slice(0)}else{var r=new Uint8Array(t.byteLength);r.set(new Uint8Array(t));return r.buffer}}function p(){this.bodyUsed=false;this._initBody=function(t){this._bodyInit=t;if(!t){this._bodyText=""}else if(typeof t==="string"){this._bodyText=t}else if(n.blob&&Blob.prototype.isPrototypeOf(t)){this._bodyBlob=t}else if(n.formData&&FormData.prototype.isPrototypeOf(t)){this._bodyFormData=t}else if(n.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)){this._bodyText=t.toString()}else if(n.arrayBuffer&&n.blob&&i(t)){this._bodyArrayBuffer=w(t.buffer);this._bodyInit=new Blob([this._bodyArrayBuffer])}else if(n.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(t)||s(t))){this._bodyArrayBuffer=w(t)}else{this._bodyText=t=Object.prototype.toString.call(t)}if(!this.headers.get("content-type")){if(typeof t==="string"){this.headers.set("content-type","text/plain;charset=UTF-8")}else if(this._bodyBlob&&this._bodyBlob.type){this.headers.set("content-type",this._bodyBlob.type)}else if(n.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)){this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8")}}};if(n.blob){this.blob=function(){var t=f(this);if(t){return t}if(this._bodyBlob){return Promise.resolve(this._bodyBlob)}else if(this._bodyArrayBuffer){return Promise.resolve(new Blob([this._bodyArrayBuffer]))}else if(this._bodyFormData){throw new Error("could not read FormData body as blob")}else{return Promise.resolve(new Blob([this._bodyText]))}};this.arrayBuffer=function(){if(this._bodyArrayBuffer){return f(this)||Promise.resolve(this._bodyArrayBuffer)}else{return this.blob().then(l)}}}this.text=function(){var t=f(this);if(t){return t}if(this._bodyBlob){return d(this._bodyBlob)}else if(this._bodyArrayBuffer){return Promise.resolve(v(this._bodyArrayBuffer))}else if(this._bodyFormData){throw new Error("could not read FormData body as text")}else{return Promise.resolve(this._bodyText)}};if(n.formData){this.formData=function(){return this.text().then(m)}}this.json=function(){return this.text().then(JSON.parse)};return this}var y=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function b(t){var r=t.toUpperCase();return y.indexOf(r)>-1?r:t}function g(t,r){r=r||{};var n=r.body;if(t instanceof g){if(t.bodyUsed){throw new TypeError("Already read")}this.url=t.url;this.credentials=t.credentials;if(!r.headers){this.headers=new h(t.headers)}this.method=t.method;this.mode=t.mode;this.signal=t.signal;if(!n&&t._bodyInit!=null){n=t._bodyInit;t.bodyUsed=true}}else{this.url=String(t)}this.credentials=r.credentials||this.credentials||"same-origin";if(r.headers||!this.headers){this.headers=new h(r.headers)}this.method=b(r.method||this.method||"GET");this.mode=r.mode||this.mode||null;this.signal=r.signal||this.signal;this.referrer=null;if((this.method==="GET"||this.method==="HEAD")&&n){throw new TypeError("Body not allowed for GET or HEAD requests")}this._initBody(n)}g.prototype.clone=function(){return new g(this,{body:this._bodyInit})};function m(t){var r=new FormData;t.trim().split("&").forEach((function(t){if(t){var n=t.split("=");var i=n.shift().replace(/\+/g," ");var e=n.join("=").replace(/\+/g," ");r.append(decodeURIComponent(i),decodeURIComponent(e))}}));return r}function A(t){var r=new h;var n=t.replace(/\r?\n[\t ]+/g," ");n.split(/\r?\n/).forEach((function(t){var n=t.split(":");var i=n.shift().trim();if(i){var e=n.join(":").trim();r.append(i,e)}}));return r}p.call(g.prototype);function E(t,r){if(!r){r={}}this.type="default";this.status=r.status===undefined?200:r.status;this.ok=this.status>=200&&this.status<300;this.statusText="statusText"in r?r.statusText:"OK";this.headers=new h(r.headers);this.url=r.url||"";this._initBody(t)}p.call(E.prototype);E.prototype.clone=function(){return new E(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new h(this.headers),url:this.url})};E.error=function(){var t=new E(null,{status:0,statusText:""});t.type="error";return t};var M=[301,302,303,307,308];E.redirect=function(t,r){if(M.indexOf(r)===-1){throw new RangeError("Invalid status code")}return new E(null,{status:r,headers:{location:t}})};r.DOMException=t.DOMException;try{new r.DOMException}catch(t){r.DOMException=function(t,r){this.message=t;this.name=r;var n=Error(t);this.stack=n.stack};r.DOMException.prototype=Object.create(Error.prototype);r.DOMException.prototype.constructor=r.DOMException}function _(t,i){return new Promise((function(e,s){var o=new g(t,i);if(o.signal&&o.signal.aborted){return s(new r.DOMException("Aborted","AbortError"))}var a=new XMLHttpRequest;function u(){a.abort()}a.onload=function(){var t={status:a.status,statusText:a.statusText,headers:A(a.getAllResponseHeaders()||"")};t.url="responseURL"in a?a.responseURL:t.headers.get("X-Request-URL");var r="response"in a?a.response:a.responseText;e(new E(r,t))};a.onerror=function(){s(new TypeError("Network request failed"))};a.ontimeout=function(){s(new TypeError("Network request failed"))};a.onabort=function(){s(new r.DOMException("Aborted","AbortError"))};a.open(o.method,o.url,true);if(o.credentials==="include"){a.withCredentials=true}else if(o.credentials==="omit"){a.withCredentials=false}if("responseType"in a&&n.blob){a.responseType="blob"}o.headers.forEach((function(t,r){a.setRequestHeader(r,t)}));if(o.signal){o.signal.addEventListener("abort",u);a.onreadystatechange=function(){if(a.readyState===4){o.signal.removeEventListener("abort",u)}}}a.send(typeof o._bodyInit==="undefined"?null:o._bodyInit)}))}_.polyfill=true;if(!t.fetch){t.fetch=_;t.Headers=h;t.Request=g;t.Response=E}r.Headers=h;r.Request=g;r.Response=E;r.fetch=_;Object.defineProperty(r,"__esModule",{value:true});return r})({})})(i);i.fetch.ponyfill=true;delete i.fetch.polyfill;var e=i;r=e.fetch;r.default=e.fetch;r.fetch=e.fetch;r.Headers=e.Headers;r.Request=e.Request;r.Response=e.Response;t.exports=r})(l_,l_.exports);const d_=y(l_.exports);const v_=t=>JSON.stringify(t,((t,r)=>typeof r==="bigint"?r.toString()+"n":r));const w_=t=>{const r=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g;const n=t.replace(r,'$1"$2n"$3');return JSON.parse(n,((t,r)=>{const n=typeof r==="string"&&r.match(/^\d+n$/);if(n)return BigInt(r.substring(0,r.length-1));return r}))};function p_(t){if(typeof t!=="string"){throw new Error(`Cannot safe json parse value of type ${typeof t}`)}try{return w_(t)}catch(r){return t}}function y_(t){return typeof t==="string"?t:v_(t)||""}const b_={Accept:"application/json","Content-Type":"application/json"};const g_="POST";const m_={headers:b_,method:g_};const A_=10;class E_{constructor(r,n=false){this.url=r;this.disableProviderPing=n;this.events=new t.exports.EventEmitter;this.isAvailable=false;this.registering=false;if(!Og(r)){throw new Error(`Provided URL is not compatible with HTTP connection: ${r}`)}this.url=r;this.disableProviderPing=n}get connected(){return this.isAvailable}get connecting(){return this.registering}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}off(t,r){this.events.off(t,r)}removeListener(t,r){this.events.removeListener(t,r)}async open(t=this.url){await this.register(t)}async close(){if(!this.isAvailable){throw new Error("Connection already closed")}this.onClose()}async send(t,r){if(!this.isAvailable){await this.register()}try{const r=y_(t);const n=await d_(this.url,Object.assign(Object.assign({},m_),{body:r}));const i=await n.json();this.onPayload({data:i})}catch(r){this.onError(t.id,r)}}async register(t=this.url){if(!Og(t)){throw new Error(`Provided URL is not compatible with HTTP connection: ${t}`)}if(this.registering){const t=this.events.getMaxListeners();if(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t){this.events.setMaxListeners(t+1)}return new Promise(((t,r)=>{this.events.once("register_error",(t=>{this.resetMaxListeners();r(t)}));this.events.once("open",(()=>{this.resetMaxListeners();if(typeof this.isAvailable==="undefined"){return r(new Error("HTTP connection is missing or invalid"))}t()}))}))}this.url=t;this.registering=true;try{if(!this.disableProviderPing){const r=y_({id:1,jsonrpc:"2.0",method:"test",params:[]});await d_(t,Object.assign(Object.assign({},m_),{body:r}))}this.onOpen()}catch(t){const r=this.parseError(t);this.events.emit("register_error",r);this.onClose();throw r}}onOpen(){this.isAvailable=true;this.registering=false;this.events.emit("open")}onClose(){this.isAvailable=false;this.registering=false;this.events.emit("close")}onPayload(t){if(typeof t.data==="undefined")return;const r=typeof t.data==="string"?p_(t.data):t.data;this.events.emit("payload",r)}onError(t,r){const n=this.parseError(r);const i=n.message||n.toString();const e=pg(t,i);this.events.emit("payload",e)}parseError(t,r=this.url){return jb(t,r,"HTTP")}resetMaxListeners(){if(this.events.getMaxListeners()>A_){this.events.setMaxListeners(A_)}}}const M_="error",__="wss://relay.walletconnect.com",O_="wc",I_="universal_provider",S_=`${O_}@2:${I_}:`,N_="https://rpc.walletconnect.com/v1/",C_={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var j_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof v<"u"?v:typeof self<"u"?self:{},x_={exports:{}};
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(t,r){(function(){var n,i="4.17.21",e=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="Invalid `variable` option passed into `_.template`",u="__lodash_hash_undefined__",h=500,f="__lodash_placeholder__",c=1,l=2,d=4,v=1,w=2,p=1,y=2,b=4,g=8,m=16,A=32,E=64,M=128,_=256,O=512,I=30,S="...",N=800,C=16,j=1,x=2,P=3,T=1/0,R=9007199254740991,D=17976931348623157e292,U=0/0,B=4294967295,k=B-1,$=B>>>1,F=[["ary",M],["bind",p],["bindKey",y],["curry",g],["curryRight",m],["flip",O],["partial",A],["partialRight",E],["rearg",_]],q="[object Arguments]",L="[object Array]",K="[object AsyncFunction]",H="[object Boolean]",G="[object Date]",Q="[object DOMException]",J="[object Error]",V="[object Function]",z="[object GeneratorFunction]",Y="[object Map]",W="[object Number]",X="[object Null]",Z="[object Object]",tt="[object Promise]",rt="[object Proxy]",nt="[object RegExp]",it="[object Set]",et="[object String]",st="[object Symbol]",ot="[object Undefined]",at="[object WeakMap]",ut="[object WeakSet]",ht="[object ArrayBuffer]",ft="[object DataView]",ct="[object Float32Array]",lt="[object Float64Array]",dt="[object Int8Array]",vt="[object Int16Array]",wt="[object Int32Array]",pt="[object Uint8Array]",yt="[object Uint8ClampedArray]",bt="[object Uint16Array]",gt="[object Uint32Array]",mt=/\b__p \+= '';/g,At=/\b(__p \+=) '' \+/g,Et=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Mt=/&(?:amp|lt|gt|quot|#39);/g,_t=/[&<>"']/g,Ot=RegExp(Mt.source),It=RegExp(_t.source),St=/<%-([\s\S]+?)%>/g,Nt=/<%([\s\S]+?)%>/g,Ct=/<%=([\s\S]+?)%>/g,jt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,xt=/^\w*$/,Pt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Tt=/[\\^$.*+?()[\]{}|]/g,Rt=RegExp(Tt.source),Dt=/^\s+/,Ut=/\s/,Bt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,kt=/\{\n\/\* \[wrapped with (.+)\] \*/,$t=/,? & /,Ft=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,qt=/[()=,{}\[\]\/\s]/,Lt=/\\(\\)?/g,Kt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ht=/\w*$/,Gt=/^[-+]0x[0-9a-f]+$/i,Qt=/^0b[01]+$/i,Jt=/^\[object .+?Constructor\]$/,Vt=/^0o[0-7]+$/i,zt=/^(?:0|[1-9]\d*)$/,Yt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Wt=/($^)/,Xt=/['\n\r\u2028\u2029\\]/g,Zt="\\ud800-\\udfff",tr="\\u0300-\\u036f",rr="\\ufe20-\\ufe2f",nr="\\u20d0-\\u20ff",ir=tr+rr+nr,er="\\u2700-\\u27bf",sr="a-z\\xdf-\\xf6\\xf8-\\xff",or="\\xac\\xb1\\xd7\\xf7",ar="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ur="\\u2000-\\u206f",hr=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",fr="A-Z\\xc0-\\xd6\\xd8-\\xde",cr="\\ufe0e\\ufe0f",lr=or+ar+ur+hr,dr="['’]",vr="["+Zt+"]",wr="["+lr+"]",pr="["+ir+"]",yr="\\d+",br="["+er+"]",gr="["+sr+"]",mr="[^"+Zt+lr+yr+er+sr+fr+"]",Ar="\\ud83c[\\udffb-\\udfff]",Er="(?:"+pr+"|"+Ar+")",Mr="[^"+Zt+"]",_r="(?:\\ud83c[\\udde6-\\uddff]){2}",Or="[\\ud800-\\udbff][\\udc00-\\udfff]",Ir="["+fr+"]",Sr="\\u200d",Nr="(?:"+gr+"|"+mr+")",Cr="(?:"+Ir+"|"+mr+")",jr="(?:"+dr+"(?:d|ll|m|re|s|t|ve))?",xr="(?:"+dr+"(?:D|LL|M|RE|S|T|VE))?",Pr=Er+"?",Tr="["+cr+"]?",Rr="(?:"+Sr+"(?:"+[Mr,_r,Or].join("|")+")"+Tr+Pr+")*",Dr="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ur="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Br=Tr+Pr+Rr,kr="(?:"+[br,_r,Or].join("|")+")"+Br,$r="(?:"+[Mr+pr+"?",pr,_r,Or,vr].join("|")+")",Fr=RegExp(dr,"g"),qr=RegExp(pr,"g"),Lr=RegExp(Ar+"(?="+Ar+")|"+$r+Br,"g"),Kr=RegExp([Ir+"?"+gr+"+"+jr+"(?="+[wr,Ir,"$"].join("|")+")",Cr+"+"+xr+"(?="+[wr,Ir+Nr,"$"].join("|")+")",Ir+"?"+Nr+"+"+jr,Ir+"+"+xr,Ur,Dr,yr,kr].join("|"),"g"),Hr=RegExp("["+Sr+Zt+ir+cr+"]"),Gr=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Qr=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Jr=-1,Vr={};Vr[ct]=Vr[lt]=Vr[dt]=Vr[vt]=Vr[wt]=Vr[pt]=Vr[yt]=Vr[bt]=Vr[gt]=!0,Vr[q]=Vr[L]=Vr[ht]=Vr[H]=Vr[ft]=Vr[G]=Vr[J]=Vr[V]=Vr[Y]=Vr[W]=Vr[Z]=Vr[nt]=Vr[it]=Vr[et]=Vr[at]=!1;var zr={};zr[q]=zr[L]=zr[ht]=zr[ft]=zr[H]=zr[G]=zr[ct]=zr[lt]=zr[dt]=zr[vt]=zr[wt]=zr[Y]=zr[W]=zr[Z]=zr[nt]=zr[it]=zr[et]=zr[st]=zr[pt]=zr[yt]=zr[bt]=zr[gt]=!0,zr[J]=zr[V]=zr[at]=!1;var Yr={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Wr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Xr={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Zr={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},tn=parseFloat,rn=parseInt,nn=typeof j_=="object"&&j_&&j_.Object===Object&&j_,en=typeof self=="object"&&self&&self.Object===Object&&self,sn=nn||en||Function("return this")(),on=r&&!r.nodeType&&r,an=on&&!0&&t&&!t.nodeType&&t,un=an&&an.exports===on,hn=un&&nn.process,fn=function(){try{var t=an&&an.require&&an.require("util").types;return t||hn&&hn.binding&&hn.binding("util")}catch{}}(),cn=fn&&fn.isArrayBuffer,ln=fn&&fn.isDate,dn=fn&&fn.isMap,vn=fn&&fn.isRegExp,wn=fn&&fn.isSet,pn=fn&&fn.isTypedArray;function yn(t,r,n){switch(n.length){case 0:return t.call(r);case 1:return t.call(r,n[0]);case 2:return t.call(r,n[0],n[1]);case 3:return t.call(r,n[0],n[1],n[2])}return t.apply(r,n)}function bn(t,r,n,i){for(var e=-1,s=t==null?0:t.length;++e<s;){var o=t[e];r(i,o,n(o),t)}return i}function gn(t,r){for(var n=-1,i=t==null?0:t.length;++n<i&&r(t[n],n,t)!==!1;);return t}function mn(t,r){for(var n=t==null?0:t.length;n--&&r(t[n],n,t)!==!1;);return t}function An(t,r){for(var n=-1,i=t==null?0:t.length;++n<i;)if(!r(t[n],n,t))return!1;return!0}function En(t,r){for(var n=-1,i=t==null?0:t.length,e=0,s=[];++n<i;){var o=t[n];r(o,n,t)&&(s[e++]=o)}return s}function Mn(t,r){var n=t==null?0:t.length;return!!n&&Dn(t,r,0)>-1}function _n(t,r,n){for(var i=-1,e=t==null?0:t.length;++i<e;)if(n(r,t[i]))return!0;return!1}function On(t,r){for(var n=-1,i=t==null?0:t.length,e=Array(i);++n<i;)e[n]=r(t[n],n,t);return e}function In(t,r){for(var n=-1,i=r.length,e=t.length;++n<i;)t[e+n]=r[n];return t}function Sn(t,r,n,i){var e=-1,s=t==null?0:t.length;for(i&&s&&(n=t[++e]);++e<s;)n=r(n,t[e],e,t);return n}function Nn(t,r,n,i){var e=t==null?0:t.length;for(i&&e&&(n=t[--e]);e--;)n=r(n,t[e],e,t);return n}function Cn(t,r){for(var n=-1,i=t==null?0:t.length;++n<i;)if(r(t[n],n,t))return!0;return!1}var jn=$n("length");function xn(t){return t.split("")}function Pn(t){return t.match(Ft)||[]}function Tn(t,r,n){var i;return n(t,(function(t,n,e){if(r(t,n,e))return i=n,!1})),i}function Rn(t,r,n,i){for(var e=t.length,s=n+(i?1:-1);i?s--:++s<e;)if(r(t[s],s,t))return s;return-1}function Dn(t,r,n){return r===r?ci(t,r,n):Rn(t,Bn,n)}function Un(t,r,n,i){for(var e=n-1,s=t.length;++e<s;)if(i(t[e],r))return e;return-1}function Bn(t){return t!==t}function kn(t,r){var n=t==null?0:t.length;return n?Kn(t,r)/n:U}function $n(t){return function(r){return r==null?n:r[t]}}function Fn(t){return function(r){return t==null?n:t[r]}}function qn(t,r,n,i,e){return e(t,(function(t,e,s){n=i?(i=!1,t):r(n,t,e,s)})),n}function Ln(t,r){var n=t.length;for(t.sort(r);n--;)t[n]=t[n].value;return t}function Kn(t,r){for(var i,e=-1,s=t.length;++e<s;){var o=r(t[e]);o!==n&&(i=i===n?o:i+o)}return i}function Hn(t,r){for(var n=-1,i=Array(t);++n<t;)i[n]=r(n);return i}function Gn(t,r){return On(r,(function(r){return[r,t[r]]}))}function Qn(t){return t&&t.slice(0,wi(t)+1).replace(Dt,"")}function Jn(t){return function(r){return t(r)}}function Vn(t,r){return On(r,(function(r){return t[r]}))}function zn(t,r){return t.has(r)}function Yn(t,r){for(var n=-1,i=t.length;++n<i&&Dn(r,t[n],0)>-1;);return n}function Wn(t,r){for(var n=t.length;n--&&Dn(r,t[n],0)>-1;);return n}function Xn(t,r){for(var n=t.length,i=0;n--;)t[n]===r&&++i;return i}var Zn=Fn(Yr),ti=Fn(Wr);function ri(t){return"\\"+Zr[t]}function ni(t,r){return t==null?n:t[r]}function ii(t){return Hr.test(t)}function ei(t){return Gr.test(t)}function si(t){for(var r,n=[];!(r=t.next()).done;)n.push(r.value);return n}function oi(t){var r=-1,n=Array(t.size);return t.forEach((function(t,i){n[++r]=[i,t]})),n}function ai(t,r){return function(n){return t(r(n))}}function ui(t,r){for(var n=-1,i=t.length,e=0,s=[];++n<i;){var o=t[n];(o===r||o===f)&&(t[n]=f,s[e++]=n)}return s}function hi(t){var r=-1,n=Array(t.size);return t.forEach((function(t){n[++r]=t})),n}function fi(t){var r=-1,n=Array(t.size);return t.forEach((function(t){n[++r]=[t,t]})),n}function ci(t,r,n){for(var i=n-1,e=t.length;++i<e;)if(t[i]===r)return i;return-1}function li(t,r,n){for(var i=n+1;i--;)if(t[i]===r)return i;return i}function di(t){return ii(t)?yi(t):jn(t)}function vi(t){return ii(t)?bi(t):xn(t)}function wi(t){for(var r=t.length;r--&&Ut.test(t.charAt(r)););return r}var pi=Fn(Xr);function yi(t){for(var r=Lr.lastIndex=0;Lr.test(t);)++r;return r}function bi(t){return t.match(Lr)||[]}function gi(t){return t.match(Kr)||[]}var mi=function t(r){r=r==null?sn:Ai.defaults(sn.Object(),r,Ai.pick(sn,Qr));var Ut=r.Array,Ft=r.Date,Zt=r.Error,tr=r.Function,rr=r.Math,nr=r.Object,ir=r.RegExp,er=r.String,sr=r.TypeError,or=Ut.prototype,ar=tr.prototype,ur=nr.prototype,hr=r["__core-js_shared__"],fr=ar.toString,cr=ur.hasOwnProperty,lr=0,dr=function(){var t=/[^.]+$/.exec(hr&&hr.keys&&hr.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),vr=ur.toString,wr=fr.call(nr),pr=sn._,yr=ir("^"+fr.call(cr).replace(Tt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),br=un?r.Buffer:n,gr=r.Symbol,mr=r.Uint8Array,Ar=br?br.allocUnsafe:n,Er=ai(nr.getPrototypeOf,nr),Mr=nr.create,_r=ur.propertyIsEnumerable,Or=or.splice,Ir=gr?gr.isConcatSpreadable:n,Sr=gr?gr.iterator:n,Nr=gr?gr.toStringTag:n,Cr=function(){try{var t=Jo(nr,"defineProperty");return t({},"",{}),t}catch{}}(),jr=r.clearTimeout!==sn.clearTimeout&&r.clearTimeout,xr=Ft&&Ft.now!==sn.Date.now&&Ft.now,Pr=r.setTimeout!==sn.setTimeout&&r.setTimeout,Tr=rr.ceil,Rr=rr.floor,Dr=nr.getOwnPropertySymbols,Ur=br?br.isBuffer:n,Br=r.isFinite,kr=or.join,$r=ai(nr.keys,nr),Lr=rr.max,Kr=rr.min,Hr=Ft.now,Gr=r.parseInt,Yr=rr.random,Wr=or.reverse,Xr=Jo(r,"DataView"),Zr=Jo(r,"Map"),nn=Jo(r,"Promise"),en=Jo(r,"Set"),on=Jo(r,"WeakMap"),an=Jo(nr,"create"),hn=on&&new on,fn={},jn=Pa(Xr),xn=Pa(Zr),Fn=Pa(nn),ci=Pa(en),yi=Pa(on),bi=gr?gr.prototype:n,mi=bi?bi.valueOf:n,Ei=bi?bi.toString:n;function Mi(t){if(If(t)&&!hf(t)&&!(t instanceof Si)){if(t instanceof Ii)return t;if(cr.call(t,"__wrapped__"))return Ra(t)}return new Ii(t)}var _i=function(){function t(){}return function(r){if(!Of(r))return{};if(Mr)return Mr(r);t.prototype=r;var i=new t;return t.prototype=n,i}}();function Oi(){}function Ii(t,r){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!r,this.__index__=0,this.__values__=n}Mi.templateSettings={escape:St,evaluate:Nt,interpolate:Ct,variable:"",imports:{_:Mi}},Mi.prototype=Oi.prototype,Mi.prototype.constructor=Mi,Ii.prototype=_i(Oi.prototype),Ii.prototype.constructor=Ii;function Si(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=B,this.__views__=[]}function Ni(){var t=new Si(this.__wrapped__);return t.__actions__=io(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=io(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=io(this.__views__),t}function Ci(){if(this.__filtered__){var t=new Si(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function ji(){var t=this.__wrapped__.value(),r=this.__dir__,n=hf(t),i=r<0,e=n?t.length:0,s=Xo(0,e,this.__views__),o=s.start,a=s.end,u=a-o,h=i?a:o-1,f=this.__iteratees__,c=f.length,l=0,d=Kr(u,this.__takeCount__);if(!n||!i&&e==u&&d==u)return ks(t,this.__actions__);var v=[];t:for(;u--&&l<d;){h+=r;for(var w=-1,p=t[h];++w<c;){var y=f[w],b=y.iteratee,g=y.type,m=b(p);if(g==x)p=m;else if(!m){if(g==j)continue t;break t}}v[l++]=p}return v}Si.prototype=_i(Oi.prototype),Si.prototype.constructor=Si;function xi(t){var r=-1,n=t==null?0:t.length;for(this.clear();++r<n;){var i=t[r];this.set(i[0],i[1])}}function Pi(){this.__data__=an?an(null):{},this.size=0}function Ti(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r}function Ri(t){var r=this.__data__;if(an){var i=r[t];return i===u?n:i}return cr.call(r,t)?r[t]:n}function Di(t){var r=this.__data__;return an?r[t]!==n:cr.call(r,t)}function Ui(t,r){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=an&&r===n?u:r,this}xi.prototype.clear=Pi,xi.prototype.delete=Ti,xi.prototype.get=Ri,xi.prototype.has=Di,xi.prototype.set=Ui;function Bi(t){var r=-1,n=t==null?0:t.length;for(this.clear();++r<n;){var i=t[r];this.set(i[0],i[1])}}function ki(){this.__data__=[],this.size=0}function $i(t){var r=this.__data__,n=fe(r,t);if(n<0)return!1;var i=r.length-1;return n==i?r.pop():Or.call(r,n,1),--this.size,!0}function Fi(t){var r=this.__data__,i=fe(r,t);return i<0?n:r[i][1]}function qi(t){return fe(this.__data__,t)>-1}function Li(t,r){var n=this.__data__,i=fe(n,t);return i<0?(++this.size,n.push([t,r])):n[i][1]=r,this}Bi.prototype.clear=ki,Bi.prototype.delete=$i,Bi.prototype.get=Fi,Bi.prototype.has=qi,Bi.prototype.set=Li;function Ki(t){var r=-1,n=t==null?0:t.length;for(this.clear();++r<n;){var i=t[r];this.set(i[0],i[1])}}function Hi(){this.size=0,this.__data__={hash:new xi,map:new(Zr||Bi),string:new xi}}function Gi(t){var r=Go(this,t).delete(t);return this.size-=r?1:0,r}function Qi(t){return Go(this,t).get(t)}function Ji(t){return Go(this,t).has(t)}function Vi(t,r){var n=Go(this,t),i=n.size;return n.set(t,r),this.size+=n.size==i?0:1,this}Ki.prototype.clear=Hi,Ki.prototype.delete=Gi,Ki.prototype.get=Qi,Ki.prototype.has=Ji,Ki.prototype.set=Vi;function zi(t){var r=-1,n=t==null?0:t.length;for(this.__data__=new Ki;++r<n;)this.add(t[r])}function Yi(t){return this.__data__.set(t,u),this}function Wi(t){return this.__data__.has(t)}zi.prototype.add=zi.prototype.push=Yi,zi.prototype.has=Wi;function Xi(t){var r=this.__data__=new Bi(t);this.size=r.size}function Zi(){this.__data__=new Bi,this.size=0}function te(t){var r=this.__data__,n=r.delete(t);return this.size=r.size,n}function re(t){return this.__data__.get(t)}function ne(t){return this.__data__.has(t)}function ie(t,r){var n=this.__data__;if(n instanceof Bi){var i=n.__data__;if(!Zr||i.length<e-1)return i.push([t,r]),this.size=++n.size,this;n=this.__data__=new Ki(i)}return n.set(t,r),this.size=n.size,this}Xi.prototype.clear=Zi,Xi.prototype.delete=te,Xi.prototype.get=re,Xi.prototype.has=ne,Xi.prototype.set=ie;function ee(t,r){var n=hf(t),i=!n&&uf(t),e=!n&&!i&&vf(t),s=!n&&!i&&!e&&qf(t),o=n||i||e||s,a=o?Hn(t.length,er):[],u=a.length;for(var h in t)(r||cr.call(t,h))&&!(o&&(h=="length"||e&&(h=="offset"||h=="parent")||s&&(h=="buffer"||h=="byteLength"||h=="byteOffset")||oa(h,u)))&&a.push(h);return a}function se(t){var r=t.length;return r?t[ys(0,r-1)]:n}function oe(t,r){return Ca(io(t),pe(r,0,t.length))}function ae(t){return Ca(io(t))}function ue(t,r,i){(i!==n&&!sf(t[r],i)||i===n&&!(r in t))&&ve(t,r,i)}function he(t,r,i){var e=t[r];(!(cr.call(t,r)&&sf(e,i))||i===n&&!(r in t))&&ve(t,r,i)}function fe(t,r){for(var n=t.length;n--;)if(sf(t[n][0],r))return n;return-1}function ce(t,r,n,i){return Ee(t,(function(t,e,s){r(i,t,n(t),s)})),i}function le(t,r){return t&&eo(r,Mc(r),t)}function de(t,r){return t&&eo(r,_c(r),t)}function ve(t,r,n){r=="__proto__"&&Cr?Cr(t,r,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[r]=n}function we(t,r){for(var i=-1,e=r.length,s=Ut(e),o=t==null;++i<e;)s[i]=o?n:yc(t,r[i]);return s}function pe(t,r,i){return t===t&&(i!==n&&(t=t<=i?t:i),r!==n&&(t=t>=r?t:r)),t}function ye(t,r,i,e,s,o){var a,u=r&c,h=r&l,f=r&d;if(i&&(a=s?i(t,e,s,o):i(t)),a!==n)return a;if(!Of(t))return t;var v=hf(t);if(v){if(a=ra(t),!u)return io(t,a)}else{var w=Wo(t),p=w==V||w==z;if(vf(t))return Js(t,u);if(w==Z||w==q||p&&!s){if(a=h||p?{}:na(t),!u)return h?oo(t,de(a,t)):so(t,le(a,t))}else{if(!zr[w])return s?t:{};a=ia(t,w,u)}}o||(o=new Xi);var y=o.get(t);if(y)return y;o.set(t,a),kf(t)?t.forEach((function(n){a.add(ye(n,r,i,n,t,o))})):Sf(t)&&t.forEach((function(n,e){a.set(e,ye(n,r,i,e,t,o))}));var b=f?h?Fo:$o:h?_c:Mc,g=v?n:b(t);return gn(g||t,(function(n,e){g&&(e=n,n=t[e]),he(a,e,ye(n,r,i,e,t,o))})),a}function be(t){var r=Mc(t);return function(n){return ge(n,t,r)}}function ge(t,r,i){var e=i.length;if(t==null)return!e;for(t=nr(t);e--;){var s=i[e],o=r[s],a=t[s];if(a===n&&!(s in t)||!o(a))return!1}return!0}function me(t,r,i){if(typeof t!="function")throw new sr(o);return Oa((function(){t.apply(n,i)}),r)}function Ae(t,r,n,i){var s=-1,o=Mn,a=!0,u=t.length,h=[],f=r.length;if(!u)return h;n&&(r=On(r,Jn(n))),i?(o=_n,a=!1):r.length>=e&&(o=zn,a=!1,r=new zi(r));t:for(;++s<u;){var c=t[s],l=n==null?c:n(c);if(c=i||c!==0?c:0,a&&l===l){for(var d=f;d--;)if(r[d]===l)continue t;h.push(c)}else o(r,l,i)||h.push(c)}return h}var Ee=ho(xe),Me=ho(Pe,!0);function _e(t,r){var n=!0;return Ee(t,(function(t,i,e){return n=!!r(t,i,e),n})),n}function Oe(t,r,i){for(var e=-1,s=t.length;++e<s;){var o=t[e],a=r(o);if(a!=null&&(u===n?a===a&&!Ff(a):i(a,u)))var u=a,h=o}return h}function Ie(t,r,i,e){var s=t.length;for(i=zf(i),i<0&&(i=-i>s?0:s+i),e=e===n||e>s?s:zf(e),e<0&&(e+=s),e=i>e?0:Yf(e);i<e;)t[i++]=r;return t}function Se(t,r){var n=[];return Ee(t,(function(t,i,e){r(t,i,e)&&n.push(t)})),n}function Ne(t,r,n,i,e){var s=-1,o=t.length;for(n||(n=sa),e||(e=[]);++s<o;){var a=t[s];r>0&&n(a)?r>1?Ne(a,r-1,n,i,e):In(e,a):i||(e[e.length]=a)}return e}var Ce=fo(),je=fo(!0);function xe(t,r){return t&&Ce(t,r,Mc)}function Pe(t,r){return t&&je(t,r,Mc)}function Te(t,r){return En(r,(function(r){return Ef(t[r])}))}function Re(t,r){r=Ks(r,t);for(var i=0,e=r.length;t!=null&&i<e;)t=t[xa(r[i++])];return i&&i==e?t:n}function De(t,r,n){var i=r(t);return hf(t)?i:In(i,n(t))}function Ue(t){return t==null?t===n?ot:X:Nr&&Nr in nr(t)?Vo(t):ga(t)}function Be(t,r){return t>r}function ke(t,r){return t!=null&&cr.call(t,r)}function $e(t,r){return t!=null&&r in nr(t)}function Fe(t,r,n){return t>=Kr(r,n)&&t<Lr(r,n)}function qe(t,r,i){for(var e=i?_n:Mn,s=t[0].length,o=t.length,a=o,u=Ut(o),h=1/0,f=[];a--;){var c=t[a];a&&r&&(c=On(c,Jn(r))),h=Kr(c.length,h),u[a]=!i&&(r||s>=120&&c.length>=120)?new zi(a&&c):n}c=t[0];var l=-1,d=u[0];t:for(;++l<s&&f.length<h;){var v=c[l],w=r?r(v):v;if(v=i||v!==0?v:0,!(d?zn(d,w):e(f,w,i))){for(a=o;--a;){var p=u[a];if(!(p?zn(p,w):e(t[a],w,i)))continue t}d&&d.push(w),f.push(v)}}return f}function Le(t,r,n,i){return xe(t,(function(t,e,s){r(i,n(t),e,s)})),i}function Ke(t,r,i){r=Ks(r,t),t=Aa(t,r);var e=t==null?t:t[xa(su(r))];return e==null?n:yn(e,t,i)}function He(t){return If(t)&&Ue(t)==q}function Ge(t){return If(t)&&Ue(t)==ht}function Qe(t){return If(t)&&Ue(t)==G}function Je(t,r,n,i,e){return t===r?!0:t==null||r==null||!If(t)&&!If(r)?t!==t&&r!==r:Ve(t,r,n,i,Je,e)}function Ve(t,r,n,i,e,s){var o=hf(t),a=hf(r),u=o?L:Wo(t),h=a?L:Wo(r);u=u==q?Z:u,h=h==q?Z:h;var f=u==Z,c=h==Z,l=u==h;if(l&&vf(t)){if(!vf(r))return!1;o=!0,f=!1}if(l&&!f)return s||(s=new Xi),o||qf(t)?Do(t,r,n,i,e,s):Uo(t,r,u,n,i,e,s);if(!(n&v)){var d=f&&cr.call(t,"__wrapped__"),w=c&&cr.call(r,"__wrapped__");if(d||w){var p=d?t.value():t,y=w?r.value():r;return s||(s=new Xi),e(p,y,n,i,s)}}return l?(s||(s=new Xi),Bo(t,r,n,i,e,s)):!1}function ze(t){return If(t)&&Wo(t)==Y}function Ye(t,r,i,e){var s=i.length,o=s,a=!e;if(t==null)return!o;for(t=nr(t);s--;){var u=i[s];if(a&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++s<o;){u=i[s];var h=u[0],f=t[h],c=u[1];if(a&&u[2]){if(f===n&&!(h in t))return!1}else{var l=new Xi;if(e)var d=e(f,c,h,t,r,l);if(!(d===n?Je(c,f,v|w,e,l):d))return!1}}return!0}function We(t){if(!Of(t)||ca(t))return!1;var r=Ef(t)?yr:Jt;return r.test(Pa(t))}function Xe(t){return If(t)&&Ue(t)==nt}function Ze(t){return If(t)&&Wo(t)==it}function ts(t){return If(t)&&_f(t.length)&&!!Vr[Ue(t)]}function rs(t){return typeof t=="function"?t:t==null?xl:typeof t=="object"?hf(t)?as(t[0],t[1]):os(t):Hl(t)}function ns(t){if(!da(t))return $r(t);var r=[];for(var n in nr(t))cr.call(t,n)&&n!="constructor"&&r.push(n);return r}function is(t){if(!Of(t))return ba(t);var r=da(t),n=[];for(var i in t)i=="constructor"&&(r||!cr.call(t,i))||n.push(i);return n}function es(t,r){return t<r}function ss(t,r){var n=-1,i=cf(t)?Ut(t.length):[];return Ee(t,(function(t,e,s){i[++n]=r(t,e,s)})),i}function os(t){var r=Qo(t);return r.length==1&&r[0][2]?wa(r[0][0],r[0][1]):function(n){return n===t||Ye(n,t,r)}}function as(t,r){return ua(t)&&va(r)?wa(xa(t),r):function(i){var e=yc(i,t);return e===n&&e===r?gc(i,t):Je(r,e,v|w)}}function us(t,r,i,e,s){t!==r&&Ce(r,(function(o,a){if(s||(s=new Xi),Of(o))hs(t,r,a,i,us,e,s);else{var u=e?e(Ma(t,a),o,a+"",t,r,s):n;u===n&&(u=o),ue(t,a,u)}}),_c)}function hs(t,r,i,e,s,o,a){var u=Ma(t,i),h=Ma(r,i),f=a.get(h);if(f){ue(t,i,f);return}var c=o?o(u,h,i+"",t,r,a):n,l=c===n;if(l){var d=hf(h),v=!d&&vf(h),w=!d&&!v&&qf(h);c=h,d||v||w?hf(u)?c=u:lf(u)?c=io(u):v?(l=!1,c=Js(h,!0)):w?(l=!1,c=Xs(h,!0)):c=[]:Df(h)||uf(h)?(c=u,uf(u)?c=Xf(u):(!Of(u)||Ef(u))&&(c=na(h))):l=!1}l&&(a.set(h,c),s(c,h,e,o,a),a.delete(h)),ue(t,i,c)}function fs(t,r){var i=t.length;if(i)return r+=r<0?i:0,oa(r,i)?t[r]:n}function cs(t,r,n){r.length?r=On(r,(function(t){return hf(t)?function(r){return Re(r,t.length===1?t[0]:t)}:t})):r=[xl];var i=-1;r=On(r,Jn(Ho()));var e=ss(t,(function(t,n,e){var s=On(r,(function(r){return r(t)}));return{criteria:s,index:++i,value:t}}));return Ln(e,(function(t,r){return to(t,r,n)}))}function ls(t,r){return ds(t,r,(function(r,n){return gc(t,n)}))}function ds(t,r,n){for(var i=-1,e=r.length,s={};++i<e;){var o=r[i],a=Re(t,o);n(a,o)&&Ms(s,Ks(o,t),a)}return s}function vs(t){return function(r){return Re(r,t)}}function ws(t,r,n,i){var e=i?Un:Dn,s=-1,o=r.length,a=t;for(t===r&&(r=io(r)),n&&(a=On(t,Jn(n)));++s<o;)for(var u=0,h=r[s],f=n?n(h):h;(u=e(a,f,u,i))>-1;)a!==t&&Or.call(a,u,1),Or.call(t,u,1);return t}function ps(t,r){for(var n=t?r.length:0,i=n-1;n--;){var e=r[n];if(n==i||e!==s){var s=e;oa(e)?Or.call(t,e,1):Ds(t,e)}}return t}function ys(t,r){return t+Rr(Yr()*(r-t+1))}function bs(t,r,n,i){for(var e=-1,s=Lr(Tr((r-t)/(n||1)),0),o=Ut(s);s--;)o[i?s:++e]=t,t+=n;return o}function gs(t,r){var n="";if(!t||r<1||r>R)return n;do{r%2&&(n+=t),r=Rr(r/2),r&&(t+=t)}while(r);return n}function ms(t,r){return Ia(ma(t,r,xl),t+"")}function As(t){return se(Lc(t))}function Es(t,r){var n=Lc(t);return Ca(n,pe(r,0,n.length))}function Ms(t,r,i,e){if(!Of(t))return t;r=Ks(r,t);for(var s=-1,o=r.length,a=o-1,u=t;u!=null&&++s<o;){var h=xa(r[s]),f=i;if(h==="__proto__"||h==="constructor"||h==="prototype")return t;if(s!=a){var c=u[h];f=e?e(c,h,u):n,f===n&&(f=Of(c)?c:oa(r[s+1])?[]:{})}he(u,h,f),u=u[h]}return t}var _s=hn?function(t,r){return hn.set(t,r),t}:xl,Os=Cr?function(t,r){return Cr(t,"toString",{configurable:!0,enumerable:!1,value:Sl(r),writable:!0})}:xl;function Is(t){return Ca(Lc(t))}function Ss(t,r,n){var i=-1,e=t.length;r<0&&(r=-r>e?0:e+r),n=n>e?e:n,n<0&&(n+=e),e=r>n?0:n-r>>>0,r>>>=0;for(var s=Ut(e);++i<e;)s[i]=t[i+r];return s}function Ns(t,r){var n;return Ee(t,(function(t,i,e){return n=r(t,i,e),!n})),!!n}function Cs(t,r,n){var i=0,e=t==null?i:t.length;if(typeof r=="number"&&r===r&&e<=$){for(;i<e;){var s=i+e>>>1,o=t[s];o!==null&&!Ff(o)&&(n?o<=r:o<r)?i=s+1:e=s}return e}return js(t,r,xl,n)}function js(t,r,i,e){var s=0,o=t==null?0:t.length;if(o===0)return 0;r=i(r);for(var a=r!==r,u=r===null,h=Ff(r),f=r===n;s<o;){var c=Rr((s+o)/2),l=i(t[c]),d=l!==n,v=l===null,w=l===l,p=Ff(l);if(a)var y=e||w;else f?y=w&&(e||d):u?y=w&&d&&(e||!v):h?y=w&&d&&!v&&(e||!p):v||p?y=!1:y=e?l<=r:l<r;y?s=c+1:o=c}return Kr(o,k)}function xs(t,r){for(var n=-1,i=t.length,e=0,s=[];++n<i;){var o=t[n],a=r?r(o):o;if(!n||!sf(a,u)){var u=a;s[e++]=o===0?0:o}}return s}function Ps(t){return typeof t=="number"?t:Ff(t)?U:+t}function Ts(t){if(typeof t=="string")return t;if(hf(t))return On(t,Ts)+"";if(Ff(t))return Ei?Ei.call(t):"";var r=t+"";return r=="0"&&1/t==-T?"-0":r}function Rs(t,r,n){var i=-1,s=Mn,o=t.length,a=!0,u=[],h=u;if(n)a=!1,s=_n;else if(o>=e){var f=r?null:Co(t);if(f)return hi(f);a=!1,s=zn,h=new zi}else h=r?[]:u;t:for(;++i<o;){var c=t[i],l=r?r(c):c;if(c=n||c!==0?c:0,a&&l===l){for(var d=h.length;d--;)if(h[d]===l)continue t;r&&h.push(l),u.push(c)}else s(h,l,n)||(h!==u&&h.push(l),u.push(c))}return u}function Ds(t,r){return r=Ks(r,t),t=Aa(t,r),t==null||delete t[xa(su(r))]}function Us(t,r,n,i){return Ms(t,r,n(Re(t,r)),i)}function Bs(t,r,n,i){for(var e=t.length,s=i?e:-1;(i?s--:++s<e)&&r(t[s],s,t););return n?Ss(t,i?0:s,i?s+1:e):Ss(t,i?s+1:0,i?e:s)}function ks(t,r){var n=t;return n instanceof Si&&(n=n.value()),Sn(r,(function(t,r){return r.func.apply(r.thisArg,In([t],r.args))}),n)}function $s(t,r,n){var i=t.length;if(i<2)return i?Rs(t[0]):[];for(var e=-1,s=Ut(i);++e<i;)for(var o=t[e],a=-1;++a<i;)a!=e&&(s[e]=Ae(s[e]||o,t[a],r,n));return Rs(Ne(s,1),r,n)}function Fs(t,r,i){for(var e=-1,s=t.length,o=r.length,a={};++e<s;){var u=e<o?r[e]:n;i(a,t[e],u)}return a}function qs(t){return lf(t)?t:[]}function Ls(t){return typeof t=="function"?t:xl}function Ks(t,r){return hf(t)?t:ua(t,r)?[t]:ja(tc(t))}var Hs=ms;function Gs(t,r,i){var e=t.length;return i=i===n?e:i,!r&&i>=e?t:Ss(t,r,i)}var Qs=jr||function(t){return sn.clearTimeout(t)};function Js(t,r){if(r)return t.slice();var n=t.length,i=Ar?Ar(n):new t.constructor(n);return t.copy(i),i}function Vs(t){var r=new t.constructor(t.byteLength);return new mr(r).set(new mr(t)),r}function zs(t,r){var n=r?Vs(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}function Ys(t){var r=new t.constructor(t.source,Ht.exec(t));return r.lastIndex=t.lastIndex,r}function Ws(t){return mi?nr(mi.call(t)):{}}function Xs(t,r){var n=r?Vs(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Zs(t,r){if(t!==r){var i=t!==n,e=t===null,s=t===t,o=Ff(t),a=r!==n,u=r===null,h=r===r,f=Ff(r);if(!u&&!f&&!o&&t>r||o&&a&&h&&!u&&!f||e&&a&&h||!i&&h||!s)return 1;if(!e&&!o&&!f&&t<r||f&&i&&s&&!e&&!o||u&&i&&s||!a&&s||!h)return-1}return 0}function to(t,r,n){for(var i=-1,e=t.criteria,s=r.criteria,o=e.length,a=n.length;++i<o;){var u=Zs(e[i],s[i]);if(u){if(i>=a)return u;var h=n[i];return u*(h=="desc"?-1:1)}}return t.index-r.index}function ro(t,r,n,i){for(var e=-1,s=t.length,o=n.length,a=-1,u=r.length,h=Lr(s-o,0),f=Ut(u+h),c=!i;++a<u;)f[a]=r[a];for(;++e<o;)(c||e<s)&&(f[n[e]]=t[e]);for(;h--;)f[a++]=t[e++];return f}function no(t,r,n,i){for(var e=-1,s=t.length,o=-1,a=n.length,u=-1,h=r.length,f=Lr(s-a,0),c=Ut(f+h),l=!i;++e<f;)c[e]=t[e];for(var d=e;++u<h;)c[d+u]=r[u];for(;++o<a;)(l||e<s)&&(c[d+n[o]]=t[e++]);return c}function io(t,r){var n=-1,i=t.length;for(r||(r=Ut(i));++n<i;)r[n]=t[n];return r}function eo(t,r,i,e){var s=!i;i||(i={});for(var o=-1,a=r.length;++o<a;){var u=r[o],h=e?e(i[u],t[u],u,i,t):n;h===n&&(h=t[u]),s?ve(i,u,h):he(i,u,h)}return i}function so(t,r){return eo(t,zo(t),r)}function oo(t,r){return eo(t,Yo(t),r)}function ao(t,r){return function(n,i){var e=hf(n)?bn:ce,s=r?r():{};return e(n,t,Ho(i,2),s)}}function uo(t){return ms((function(r,i){var e=-1,s=i.length,o=s>1?i[s-1]:n,a=s>2?i[2]:n;for(o=t.length>3&&typeof o=="function"?(s--,o):n,a&&aa(i[0],i[1],a)&&(o=s<3?n:o,s=1),r=nr(r);++e<s;){var u=i[e];u&&t(r,u,e,o)}return r}))}function ho(t,r){return function(n,i){if(n==null)return n;if(!cf(n))return t(n,i);for(var e=n.length,s=r?e:-1,o=nr(n);(r?s--:++s<e)&&i(o[s],s,o)!==!1;);return n}}function fo(t){return function(r,n,i){for(var e=-1,s=nr(r),o=i(r),a=o.length;a--;){var u=o[t?a:++e];if(n(s[u],u,s)===!1)break}return r}}function co(t,r,n){var i=r&p,e=wo(t);function s(){var r=this&&this!==sn&&this instanceof s?e:t;return r.apply(i?n:this,arguments)}return s}function lo(t){return function(r){r=tc(r);var i=ii(r)?vi(r):n,e=i?i[0]:r.charAt(0),s=i?Gs(i,1).join(""):r.slice(1);return e[t]()+s}}function vo(t){return function(r){return Sn(El(zc(r).replace(Fr,"")),t,"")}}function wo(t){return function(){var r=arguments;switch(r.length){case 0:return new t;case 1:return new t(r[0]);case 2:return new t(r[0],r[1]);case 3:return new t(r[0],r[1],r[2]);case 4:return new t(r[0],r[1],r[2],r[3]);case 5:return new t(r[0],r[1],r[2],r[3],r[4]);case 6:return new t(r[0],r[1],r[2],r[3],r[4],r[5]);case 7:return new t(r[0],r[1],r[2],r[3],r[4],r[5],r[6])}var n=_i(t.prototype),i=t.apply(n,r);return Of(i)?i:n}}function po(t,r,i){var e=wo(t);function s(){for(var o=arguments.length,a=Ut(o),u=o,h=Ko(s);u--;)a[u]=arguments[u];var f=o<3&&a[0]!==h&&a[o-1]!==h?[]:ui(a,h);if(o-=f.length,o<i)return So(t,r,go,s.placeholder,n,a,f,n,n,i-o);var c=this&&this!==sn&&this instanceof s?e:t;return yn(c,this,a)}return s}function yo(t){return function(r,i,e){var s=nr(r);if(!cf(r)){var o=Ho(i,3);r=Mc(r),i=function(t){return o(s[t],t,s)}}var a=t(r,i,e);return a>-1?s[o?r[a]:a]:n}}function bo(t){return ko((function(r){var i=r.length,e=i,s=Ii.prototype.thru;for(t&&r.reverse();e--;){var a=r[e];if(typeof a!="function")throw new sr(o);if(s&&!u&&Lo(a)=="wrapper")var u=new Ii([],!0)}for(e=u?e:i;++e<i;){a=r[e];var h=Lo(a),f=h=="wrapper"?qo(a):n;f&&fa(f[0])&&f[1]==(M|g|A|_)&&!f[4].length&&f[9]==1?u=u[Lo(f[0])].apply(u,f[3]):u=a.length==1&&fa(a)?u[h]():u.thru(a)}return function(){var t=arguments,n=t[0];if(u&&t.length==1&&hf(n))return u.plant(n).value();for(var e=0,s=i?r[e].apply(this,t):n;++e<i;)s=r[e].call(this,s);return s}}))}function go(t,r,i,e,s,o,a,u,h,f){var c=r&M,l=r&p,d=r&y,v=r&(g|m),w=r&O,b=d?n:wo(t);function A(){for(var n=arguments.length,p=Ut(n),y=n;y--;)p[y]=arguments[y];if(v)var g=Ko(A),m=Xn(p,g);if(e&&(p=ro(p,e,s,v)),o&&(p=no(p,o,a,v)),n-=m,v&&n<f){var E=ui(p,g);return So(t,r,go,A.placeholder,i,p,E,u,h,f-n)}var M=l?i:this,_=d?M[t]:t;return n=p.length,u?p=Ea(p,u):w&&n>1&&p.reverse(),c&&h<n&&(p.length=h),this&&this!==sn&&this instanceof A&&(_=b||wo(_)),_.apply(M,p)}return A}function mo(t,r){return function(n,i){return Le(n,t,r(i),{})}}function Ao(t,r){return function(i,e){var s;if(i===n&&e===n)return r;if(i!==n&&(s=i),e!==n){if(s===n)return e;typeof i=="string"||typeof e=="string"?(i=Ts(i),e=Ts(e)):(i=Ps(i),e=Ps(e)),s=t(i,e)}return s}}function Eo(t){return ko((function(r){return r=On(r,Jn(Ho())),ms((function(n){var i=this;return t(r,(function(t){return yn(t,i,n)}))}))}))}function Mo(t,r){r=r===n?" ":Ts(r);var i=r.length;if(i<2)return i?gs(r,t):r;var e=gs(r,Tr(t/di(r)));return ii(r)?Gs(vi(e),0,t).join(""):e.slice(0,t)}function _o(t,r,n,i){var e=r&p,s=wo(t);function o(){for(var r=-1,a=arguments.length,u=-1,h=i.length,f=Ut(h+a),c=this&&this!==sn&&this instanceof o?s:t;++u<h;)f[u]=i[u];for(;a--;)f[u++]=arguments[++r];return yn(c,e?n:this,f)}return o}function Oo(t){return function(r,i,e){return e&&typeof e!="number"&&aa(r,i,e)&&(i=e=n),r=Vf(r),i===n?(i=r,r=0):i=Vf(i),e=e===n?r<i?1:-1:Vf(e),bs(r,i,e,t)}}function Io(t){return function(r,n){return typeof r=="string"&&typeof n=="string"||(r=Wf(r),n=Wf(n)),t(r,n)}}function So(t,r,i,e,s,o,a,u,h,f){var c=r&g,l=c?a:n,d=c?n:a,v=c?o:n,w=c?n:o;r|=c?A:E,r&=~(c?E:A),r&b||(r&=~(p|y));var m=[t,r,s,v,l,w,d,u,h,f],M=i.apply(n,m);return fa(t)&&_a(M,m),M.placeholder=e,Sa(M,t,r)}function No(t){var r=rr[t];return function(t,n){if(t=Wf(t),n=n==null?0:Kr(zf(n),292),n&&Br(t)){var i=(tc(t)+"e").split("e"),e=r(i[0]+"e"+(+i[1]+n));return i=(tc(e)+"e").split("e"),+(i[0]+"e"+(+i[1]-n))}return r(t)}}var Co=en&&1/hi(new en([,-0]))[1]==T?function(t){return new en(t)}:$l;function jo(t){return function(r){var n=Wo(r);return n==Y?oi(r):n==it?fi(r):Gn(r,t(r))}}function xo(t,r,i,e,s,a,u,h){var f=r&y;if(!f&&typeof t!="function")throw new sr(o);var c=e?e.length:0;if(c||(r&=~(A|E),e=s=n),u=u===n?u:Lr(zf(u),0),h=h===n?h:zf(h),c-=s?s.length:0,r&E){var l=e,d=s;e=s=n}var v=f?n:qo(t),w=[t,r,i,e,s,l,d,a,u,h];if(v&&ya(w,v),t=w[0],r=w[1],i=w[2],e=w[3],s=w[4],h=w[9]=w[9]===n?f?0:t.length:Lr(w[9]-c,0),!h&&r&(g|m)&&(r&=~(g|m)),!r||r==p)var b=co(t,r,i);else r==g||r==m?b=po(t,r,h):(r==A||r==(p|A))&&!s.length?b=_o(t,r,i,e):b=go.apply(n,w);var M=v?_s:_a;return Sa(M(b,w),t,r)}function Po(t,r,i,e){return t===n||sf(t,ur[i])&&!cr.call(e,i)?r:t}function To(t,r,i,e,s,o){return Of(t)&&Of(r)&&(o.set(r,t),us(t,r,n,To,o),o.delete(r)),t}function Ro(t){return Df(t)?n:t}function Do(t,r,i,e,s,o){var a=i&v,u=t.length,h=r.length;if(u!=h&&!(a&&h>u))return!1;var f=o.get(t),c=o.get(r);if(f&&c)return f==r&&c==t;var l=-1,d=!0,p=i&w?new zi:n;for(o.set(t,r),o.set(r,t);++l<u;){var y=t[l],b=r[l];if(e)var g=a?e(b,y,l,r,t,o):e(y,b,l,t,r,o);if(g!==n){if(g)continue;d=!1;break}if(p){if(!Cn(r,(function(t,r){if(!zn(p,r)&&(y===t||s(y,t,i,e,o)))return p.push(r)}))){d=!1;break}}else if(!(y===b||s(y,b,i,e,o))){d=!1;break}}return o.delete(t),o.delete(r),d}function Uo(t,r,n,i,e,s,o){switch(n){case ft:if(t.byteLength!=r.byteLength||t.byteOffset!=r.byteOffset)return!1;t=t.buffer,r=r.buffer;case ht:return!(t.byteLength!=r.byteLength||!s(new mr(t),new mr(r)));case H:case G:case W:return sf(+t,+r);case J:return t.name==r.name&&t.message==r.message;case nt:case et:return t==r+"";case Y:var a=oi;case it:var u=i&v;if(a||(a=hi),t.size!=r.size&&!u)return!1;var h=o.get(t);if(h)return h==r;i|=w,o.set(t,r);var f=Do(a(t),a(r),i,e,s,o);return o.delete(t),f;case st:if(mi)return mi.call(t)==mi.call(r)}return!1}function Bo(t,r,i,e,s,o){var a=i&v,u=$o(t),h=u.length,f=$o(r),c=f.length;if(h!=c&&!a)return!1;for(var l=h;l--;){var d=u[l];if(!(a?d in r:cr.call(r,d)))return!1}var w=o.get(t),p=o.get(r);if(w&&p)return w==r&&p==t;var y=!0;o.set(t,r),o.set(r,t);for(var b=a;++l<h;){d=u[l];var g=t[d],m=r[d];if(e)var A=a?e(m,g,d,r,t,o):e(g,m,d,t,r,o);if(!(A===n?g===m||s(g,m,i,e,o):A)){y=!1;break}b||(b=d=="constructor")}if(y&&!b){var E=t.constructor,M=r.constructor;E!=M&&"constructor"in t&&"constructor"in r&&!(typeof E=="function"&&E instanceof E&&typeof M=="function"&&M instanceof M)&&(y=!1)}return o.delete(t),o.delete(r),y}function ko(t){return Ia(ma(t,n,Va),t+"")}function $o(t){return De(t,Mc,zo)}function Fo(t){return De(t,_c,Yo)}var qo=hn?function(t){return hn.get(t)}:$l;function Lo(t){for(var r=t.name+"",n=fn[r],i=cr.call(fn,r)?n.length:0;i--;){var e=n[i],s=e.func;if(s==null||s==t)return e.name}return r}function Ko(t){var r=cr.call(Mi,"placeholder")?Mi:t;return r.placeholder}function Ho(){var t=Mi.iteratee||Pl;return t=t===Pl?rs:t,arguments.length?t(arguments[0],arguments[1]):t}function Go(t,r){var n=t.__data__;return ha(r)?n[typeof r=="string"?"string":"hash"]:n.map}function Qo(t){for(var r=Mc(t),n=r.length;n--;){var i=r[n],e=t[i];r[n]=[i,e,va(e)]}return r}function Jo(t,r){var i=ni(t,r);return We(i)?i:n}function Vo(t){var r=cr.call(t,Nr),i=t[Nr];try{t[Nr]=n;var e=!0}catch{}var s=vr.call(t);return e&&(r?t[Nr]=i:delete t[Nr]),s}var zo=Dr?function(t){return t==null?[]:(t=nr(t),En(Dr(t),(function(r){return _r.call(t,r)})))}:Vl,Yo=Dr?function(t){for(var r=[];t;)In(r,zo(t)),t=Er(t);return r}:Vl,Wo=Ue;(Xr&&Wo(new Xr(new ArrayBuffer(1)))!=ft||Zr&&Wo(new Zr)!=Y||nn&&Wo(nn.resolve())!=tt||en&&Wo(new en)!=it||on&&Wo(new on)!=at)&&(Wo=function(t){var r=Ue(t),i=r==Z?t.constructor:n,e=i?Pa(i):"";if(e)switch(e){case jn:return ft;case xn:return Y;case Fn:return tt;case ci:return it;case yi:return at}return r});function Xo(t,r,n){for(var i=-1,e=n.length;++i<e;){var s=n[i],o=s.size;switch(s.type){case"drop":t+=o;break;case"dropRight":r-=o;break;case"take":r=Kr(r,t+o);break;case"takeRight":t=Lr(t,r-o);break}}return{start:t,end:r}}function Zo(t){var r=t.match(kt);return r?r[1].split($t):[]}function ta(t,r,n){r=Ks(r,t);for(var i=-1,e=r.length,s=!1;++i<e;){var o=xa(r[i]);if(!(s=t!=null&&n(t,o)))break;t=t[o]}return s||++i!=e?s:(e=t==null?0:t.length,!!e&&_f(e)&&oa(o,e)&&(hf(t)||uf(t)))}function ra(t){var r=t.length,n=new t.constructor(r);return r&&typeof t[0]=="string"&&cr.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function na(t){return typeof t.constructor=="function"&&!da(t)?_i(Er(t)):{}}function ia(t,r,n){var i=t.constructor;switch(r){case ht:return Vs(t);case H:case G:return new i(+t);case ft:return zs(t,n);case ct:case lt:case dt:case vt:case wt:case pt:case yt:case bt:case gt:return Xs(t,n);case Y:return new i;case W:case et:return new i(t);case nt:return Ys(t);case it:return new i;case st:return Ws(t)}}function ea(t,r){var n=r.length;if(!n)return t;var i=n-1;return r[i]=(n>1?"& ":"")+r[i],r=r.join(n>2?", ":" "),t.replace(Bt,`{\n/* [wrapped with `+r+`] */\n`)}function sa(t){return hf(t)||uf(t)||!!(Ir&&t&&t[Ir])}function oa(t,r){var n=typeof t;return r=r??R,!!r&&(n=="number"||n!="symbol"&&zt.test(t))&&t>-1&&t%1==0&&t<r}function aa(t,r,n){if(!Of(n))return!1;var i=typeof r;return(i=="number"?cf(n)&&oa(r,n.length):i=="string"&&r in n)?sf(n[r],t):!1}function ua(t,r){if(hf(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||Ff(t)?!0:xt.test(t)||!jt.test(t)||r!=null&&t in nr(r)}function ha(t){var r=typeof t;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?t!=="__proto__":t===null}function fa(t){var r=Lo(t),n=Mi[r];if(typeof n!="function"||!(r in Si.prototype))return!1;if(t===n)return!0;var i=qo(n);return!!i&&t===i[0]}function ca(t){return!!dr&&dr in t}var la=hr?Ef:zl;function da(t){var r=t&&t.constructor,n=typeof r=="function"&&r.prototype||ur;return t===n}function va(t){return t===t&&!Of(t)}function wa(t,r){return function(i){return i==null?!1:i[t]===r&&(r!==n||t in nr(i))}}function pa(t){var r=Fh(t,(function(t){return n.size===h&&n.clear(),t})),n=r.cache;return r}function ya(t,r){var n=t[1],i=r[1],e=n|i,s=e<(p|y|M),o=i==M&&n==g||i==M&&n==_&&t[7].length<=r[8]||i==(M|_)&&r[7].length<=r[8]&&n==g;if(!(s||o))return t;i&p&&(t[2]=r[2],e|=n&p?0:b);var a=r[3];if(a){var u=t[3];t[3]=u?ro(u,a,r[4]):a,t[4]=u?ui(t[3],f):r[4]}return a=r[5],a&&(u=t[5],t[5]=u?no(u,a,r[6]):a,t[6]=u?ui(t[5],f):r[6]),a=r[7],a&&(t[7]=a),i&M&&(t[8]=t[8]==null?r[8]:Kr(t[8],r[8])),t[9]==null&&(t[9]=r[9]),t[0]=r[0],t[1]=e,t}function ba(t){var r=[];if(t!=null)for(var n in nr(t))r.push(n);return r}function ga(t){return vr.call(t)}function ma(t,r,i){return r=Lr(r===n?t.length-1:r,0),function(){for(var n=arguments,e=-1,s=Lr(n.length-r,0),o=Ut(s);++e<s;)o[e]=n[r+e];e=-1;for(var a=Ut(r+1);++e<r;)a[e]=n[e];return a[r]=i(o),yn(t,this,a)}}function Aa(t,r){return r.length<2?t:Re(t,Ss(r,0,-1))}function Ea(t,r){for(var i=t.length,e=Kr(r.length,i),s=io(t);e--;){var o=r[e];t[e]=oa(o,i)?s[o]:n}return t}function Ma(t,r){if(!(r==="constructor"&&typeof t[r]=="function")&&r!="__proto__")return t[r]}var _a=Na(_s),Oa=Pr||function(t,r){return sn.setTimeout(t,r)},Ia=Na(Os);function Sa(t,r,n){var i=r+"";return Ia(t,ea(i,Ta(Zo(i),n)))}function Na(t){var r=0,i=0;return function(){var e=Hr(),s=C-(e-i);if(i=e,s>0){if(++r>=N)return arguments[0]}else r=0;return t.apply(n,arguments)}}function Ca(t,r){var i=-1,e=t.length,s=e-1;for(r=r===n?e:r;++i<r;){var o=ys(i,s),a=t[o];t[o]=t[i],t[i]=a}return t.length=r,t}var ja=pa((function(t){var r=[];return t.charCodeAt(0)===46&&r.push(""),t.replace(Pt,(function(t,n,i,e){r.push(i?e.replace(Lt,"$1"):n||t)})),r}));function xa(t){if(typeof t=="string"||Ff(t))return t;var r=t+"";return r=="0"&&1/t==-T?"-0":r}function Pa(t){if(t!=null){try{return fr.call(t)}catch{}try{return t+""}catch{}}return""}function Ta(t,r){return gn(F,(function(n){var i="_."+n[0];r&n[1]&&!Mn(t,i)&&t.push(i)})),t.sort()}function Ra(t){if(t instanceof Si)return t.clone();var r=new Ii(t.__wrapped__,t.__chain__);return r.__actions__=io(t.__actions__),r.__index__=t.__index__,r.__values__=t.__values__,r}function Da(t,r,i){(i?aa(t,r,i):r===n)?r=1:r=Lr(zf(r),0);var e=t==null?0:t.length;if(!e||r<1)return[];for(var s=0,o=0,a=Ut(Tr(e/r));s<e;)a[o++]=Ss(t,s,s+=r);return a}function Ua(t){for(var r=-1,n=t==null?0:t.length,i=0,e=[];++r<n;){var s=t[r];s&&(e[i++]=s)}return e}function Ba(){var t=arguments.length;if(!t)return[];for(var r=Ut(t-1),n=arguments[0],i=t;i--;)r[i-1]=arguments[i];return In(hf(n)?io(n):[n],Ne(r,1))}var ka=ms((function(t,r){return lf(t)?Ae(t,Ne(r,1,lf,!0)):[]})),$a=ms((function(t,r){var i=su(r);return lf(i)&&(i=n),lf(t)?Ae(t,Ne(r,1,lf,!0),Ho(i,2)):[]})),Fa=ms((function(t,r){var i=su(r);return lf(i)&&(i=n),lf(t)?Ae(t,Ne(r,1,lf,!0),n,i):[]}));function qa(t,r,i){var e=t==null?0:t.length;return e?(r=i||r===n?1:zf(r),Ss(t,r<0?0:r,e)):[]}function La(t,r,i){var e=t==null?0:t.length;return e?(r=i||r===n?1:zf(r),r=e-r,Ss(t,0,r<0?0:r)):[]}function Ka(t,r){return t&&t.length?Bs(t,Ho(r,3),!0,!0):[]}function Ha(t,r){return t&&t.length?Bs(t,Ho(r,3),!0):[]}function Ga(t,r,n,i){var e=t==null?0:t.length;return e?(n&&typeof n!="number"&&aa(t,r,n)&&(n=0,i=e),Ie(t,r,n,i)):[]}function Qa(t,r,n){var i=t==null?0:t.length;if(!i)return-1;var e=n==null?0:zf(n);return e<0&&(e=Lr(i+e,0)),Rn(t,Ho(r,3),e)}function Ja(t,r,i){var e=t==null?0:t.length;if(!e)return-1;var s=e-1;return i!==n&&(s=zf(i),s=i<0?Lr(e+s,0):Kr(s,e-1)),Rn(t,Ho(r,3),s,!0)}function Va(t){var r=t==null?0:t.length;return r?Ne(t,1):[]}function za(t){var r=t==null?0:t.length;return r?Ne(t,T):[]}function Ya(t,r){var i=t==null?0:t.length;return i?(r=r===n?1:zf(r),Ne(t,r)):[]}function Wa(t){for(var r=-1,n=t==null?0:t.length,i={};++r<n;){var e=t[r];i[e[0]]=e[1]}return i}function Xa(t){return t&&t.length?t[0]:n}function Za(t,r,n){var i=t==null?0:t.length;if(!i)return-1;var e=n==null?0:zf(n);return e<0&&(e=Lr(i+e,0)),Dn(t,r,e)}function tu(t){var r=t==null?0:t.length;return r?Ss(t,0,-1):[]}var ru=ms((function(t){var r=On(t,qs);return r.length&&r[0]===t[0]?qe(r):[]})),nu=ms((function(t){var r=su(t),i=On(t,qs);return r===su(i)?r=n:i.pop(),i.length&&i[0]===t[0]?qe(i,Ho(r,2)):[]})),iu=ms((function(t){var r=su(t),i=On(t,qs);return r=typeof r=="function"?r:n,r&&i.pop(),i.length&&i[0]===t[0]?qe(i,n,r):[]}));function eu(t,r){return t==null?"":kr.call(t,r)}function su(t){var r=t==null?0:t.length;return r?t[r-1]:n}function ou(t,r,i){var e=t==null?0:t.length;if(!e)return-1;var s=e;return i!==n&&(s=zf(i),s=s<0?Lr(e+s,0):Kr(s,e-1)),r===r?li(t,r,s):Rn(t,Bn,s,!0)}function au(t,r){return t&&t.length?fs(t,zf(r)):n}var uu=ms(hu);function hu(t,r){return t&&t.length&&r&&r.length?ws(t,r):t}function fu(t,r,n){return t&&t.length&&r&&r.length?ws(t,r,Ho(n,2)):t}function cu(t,r,i){return t&&t.length&&r&&r.length?ws(t,r,n,i):t}var lu=ko((function(t,r){var n=t==null?0:t.length,i=we(t,r);return ps(t,On(r,(function(t){return oa(t,n)?+t:t})).sort(Zs)),i}));function du(t,r){var n=[];if(!(t&&t.length))return n;var i=-1,e=[],s=t.length;for(r=Ho(r,3);++i<s;){var o=t[i];r(o,i,t)&&(n.push(o),e.push(i))}return ps(t,e),n}function vu(t){return t==null?t:Wr.call(t)}function wu(t,r,i){var e=t==null?0:t.length;return e?(i&&typeof i!="number"&&aa(t,r,i)?(r=0,i=e):(r=r==null?0:zf(r),i=i===n?e:zf(i)),Ss(t,r,i)):[]}function pu(t,r){return Cs(t,r)}function yu(t,r,n){return js(t,r,Ho(n,2))}function bu(t,r){var n=t==null?0:t.length;if(n){var i=Cs(t,r);if(i<n&&sf(t[i],r))return i}return-1}function gu(t,r){return Cs(t,r,!0)}function mu(t,r,n){return js(t,r,Ho(n,2),!0)}function Au(t,r){var n=t==null?0:t.length;if(n){var i=Cs(t,r,!0)-1;if(sf(t[i],r))return i}return-1}function Eu(t){return t&&t.length?xs(t):[]}function Mu(t,r){return t&&t.length?xs(t,Ho(r,2)):[]}function _u(t){var r=t==null?0:t.length;return r?Ss(t,1,r):[]}function Ou(t,r,i){return t&&t.length?(r=i||r===n?1:zf(r),Ss(t,0,r<0?0:r)):[]}function Iu(t,r,i){var e=t==null?0:t.length;return e?(r=i||r===n?1:zf(r),r=e-r,Ss(t,r<0?0:r,e)):[]}function Su(t,r){return t&&t.length?Bs(t,Ho(r,3),!1,!0):[]}function Nu(t,r){return t&&t.length?Bs(t,Ho(r,3)):[]}var Cu=ms((function(t){return Rs(Ne(t,1,lf,!0))})),ju=ms((function(t){var r=su(t);return lf(r)&&(r=n),Rs(Ne(t,1,lf,!0),Ho(r,2))})),xu=ms((function(t){var r=su(t);return r=typeof r=="function"?r:n,Rs(Ne(t,1,lf,!0),n,r)}));function Pu(t){return t&&t.length?Rs(t):[]}function Tu(t,r){return t&&t.length?Rs(t,Ho(r,2)):[]}function Ru(t,r){return r=typeof r=="function"?r:n,t&&t.length?Rs(t,n,r):[]}function Du(t){if(!(t&&t.length))return[];var r=0;return t=En(t,(function(t){if(lf(t))return r=Lr(t.length,r),!0})),Hn(r,(function(r){return On(t,$n(r))}))}function Uu(t,r){if(!(t&&t.length))return[];var i=Du(t);return r==null?i:On(i,(function(t){return yn(r,n,t)}))}var Bu=ms((function(t,r){return lf(t)?Ae(t,r):[]})),ku=ms((function(t){return $s(En(t,lf))})),$u=ms((function(t){var r=su(t);return lf(r)&&(r=n),$s(En(t,lf),Ho(r,2))})),Fu=ms((function(t){var r=su(t);return r=typeof r=="function"?r:n,$s(En(t,lf),n,r)})),qu=ms(Du);function Lu(t,r){return Fs(t||[],r||[],he)}function Ku(t,r){return Fs(t||[],r||[],Ms)}var Hu=ms((function(t){var r=t.length,i=r>1?t[r-1]:n;return i=typeof i=="function"?(t.pop(),i):n,Uu(t,i)}));function Gu(t){var r=Mi(t);return r.__chain__=!0,r}function Qu(t,r){return r(t),t}function Ju(t,r){return r(t)}var Vu=ko((function(t){var r=t.length,i=r?t[0]:0,e=this.__wrapped__,s=function(r){return we(r,t)};return r>1||this.__actions__.length||!(e instanceof Si)||!oa(i)?this.thru(s):(e=e.slice(i,+i+(r?1:0)),e.__actions__.push({func:Ju,args:[s],thisArg:n}),new Ii(e,this.__chain__).thru((function(t){return r&&!t.length&&t.push(n),t})))}));function zu(){return Gu(this)}function Yu(){return new Ii(this.value(),this.__chain__)}function Wu(){this.__values__===n&&(this.__values__=Jf(this.value()));var t=this.__index__>=this.__values__.length,r=t?n:this.__values__[this.__index__++];return{done:t,value:r}}function Xu(){return this}function Zu(t){for(var r,i=this;i instanceof Oi;){var e=Ra(i);e.__index__=0,e.__values__=n,r?s.__wrapped__=e:r=e;var s=e;i=i.__wrapped__}return s.__wrapped__=t,r}function th(){var t=this.__wrapped__;if(t instanceof Si){var r=t;return this.__actions__.length&&(r=new Si(this)),r=r.reverse(),r.__actions__.push({func:Ju,args:[vu],thisArg:n}),new Ii(r,this.__chain__)}return this.thru(vu)}function rh(){return ks(this.__wrapped__,this.__actions__)}var nh=ao((function(t,r,n){cr.call(t,n)?++t[n]:ve(t,n,1)}));function ih(t,r,i){var e=hf(t)?An:_e;return i&&aa(t,r,i)&&(r=n),e(t,Ho(r,3))}function eh(t,r){var n=hf(t)?En:Se;return n(t,Ho(r,3))}var sh=yo(Qa),oh=yo(Ja);function ah(t,r){return Ne(ph(t,r),1)}function uh(t,r){return Ne(ph(t,r),T)}function hh(t,r,i){return i=i===n?1:zf(i),Ne(ph(t,r),i)}function fh(t,r){var n=hf(t)?gn:Ee;return n(t,Ho(r,3))}function ch(t,r){var n=hf(t)?mn:Me;return n(t,Ho(r,3))}var lh=ao((function(t,r,n){cr.call(t,n)?t[n].push(r):ve(t,n,[r])}));function dh(t,r,n,i){t=cf(t)?t:Lc(t),n=n&&!i?zf(n):0;var e=t.length;return n<0&&(n=Lr(e+n,0)),$f(t)?n<=e&&t.indexOf(r,n)>-1:!!e&&Dn(t,r,n)>-1}var vh=ms((function(t,r,n){var i=-1,e=typeof r=="function",s=cf(t)?Ut(t.length):[];return Ee(t,(function(t){s[++i]=e?yn(r,t,n):Ke(t,r,n)})),s})),wh=ao((function(t,r,n){ve(t,n,r)}));function ph(t,r){var n=hf(t)?On:ss;return n(t,Ho(r,3))}function yh(t,r,i,e){return t==null?[]:(hf(r)||(r=r==null?[]:[r]),i=e?n:i,hf(i)||(i=i==null?[]:[i]),cs(t,r,i))}var bh=ao((function(t,r,n){t[n?0:1].push(r)}),(function(){return[[],[]]}));function gh(t,r,n){var i=hf(t)?Sn:qn,e=arguments.length<3;return i(t,Ho(r,4),n,e,Ee)}function mh(t,r,n){var i=hf(t)?Nn:qn,e=arguments.length<3;return i(t,Ho(r,4),n,e,Me)}function Ah(t,r){var n=hf(t)?En:Se;return n(t,qh(Ho(r,3)))}function Eh(t){var r=hf(t)?se:As;return r(t)}function Mh(t,r,i){(i?aa(t,r,i):r===n)?r=1:r=zf(r);var e=hf(t)?oe:Es;return e(t,r)}function _h(t){var r=hf(t)?ae:Is;return r(t)}function Oh(t){if(t==null)return 0;if(cf(t))return $f(t)?di(t):t.length;var r=Wo(t);return r==Y||r==it?t.size:ns(t).length}function Ih(t,r,i){var e=hf(t)?Cn:Ns;return i&&aa(t,r,i)&&(r=n),e(t,Ho(r,3))}var Sh=ms((function(t,r){if(t==null)return[];var n=r.length;return n>1&&aa(t,r[0],r[1])?r=[]:n>2&&aa(r[0],r[1],r[2])&&(r=[r[0]]),cs(t,Ne(r,1),[])})),Nh=xr||function(){return sn.Date.now()};function Ch(t,r){if(typeof r!="function")throw new sr(o);return t=zf(t),function(){if(--t<1)return r.apply(this,arguments)}}function jh(t,r,i){return r=i?n:r,r=t&&r==null?t.length:r,xo(t,M,n,n,n,n,r)}function xh(t,r){var i;if(typeof r!="function")throw new sr(o);return t=zf(t),function(){return--t>0&&(i=r.apply(this,arguments)),t<=1&&(r=n),i}}var Ph=ms((function(t,r,n){var i=p;if(n.length){var e=ui(n,Ko(Ph));i|=A}return xo(t,i,r,n,e)})),Th=ms((function(t,r,n){var i=p|y;if(n.length){var e=ui(n,Ko(Th));i|=A}return xo(r,i,t,n,e)}));function Rh(t,r,i){r=i?n:r;var e=xo(t,g,n,n,n,n,n,r);return e.placeholder=Rh.placeholder,e}function Dh(t,r,i){r=i?n:r;var e=xo(t,m,n,n,n,n,n,r);return e.placeholder=Dh.placeholder,e}function Uh(t,r,i){var e,s,a,u,h,f,c=0,l=!1,d=!1,v=!0;if(typeof t!="function")throw new sr(o);r=Wf(r)||0,Of(i)&&(l=!!i.leading,d="maxWait"in i,a=d?Lr(Wf(i.maxWait)||0,r):a,v="trailing"in i?!!i.trailing:v);function w(r){var i=e,o=s;return e=s=n,c=r,u=t.apply(o,i),u}function p(t){return c=t,h=Oa(g,r),l?w(t):u}function y(t){var n=t-f,i=t-c,e=r-n;return d?Kr(e,a-i):e}function b(t){var i=t-f,e=t-c;return f===n||i>=r||i<0||d&&e>=a}function g(){var t=Nh();if(b(t))return m(t);h=Oa(g,y(t))}function m(t){return h=n,v&&e?w(t):(e=s=n,u)}function A(){h!==n&&Qs(h),c=0,e=f=s=h=n}function E(){return h===n?u:m(Nh())}function M(){var t=Nh(),i=b(t);if(e=arguments,s=this,f=t,i){if(h===n)return p(f);if(d)return Qs(h),h=Oa(g,r),w(f)}return h===n&&(h=Oa(g,r)),u}return M.cancel=A,M.flush=E,M}var Bh=ms((function(t,r){return me(t,1,r)})),kh=ms((function(t,r,n){return me(t,Wf(r)||0,n)}));function $h(t){return xo(t,O)}function Fh(t,r){if(typeof t!="function"||r!=null&&typeof r!="function")throw new sr(o);var n=function(){var i=arguments,e=r?r.apply(this,i):i[0],s=n.cache;if(s.has(e))return s.get(e);var o=t.apply(this,i);return n.cache=s.set(e,o)||s,o};return n.cache=new(Fh.Cache||Ki),n}Fh.Cache=Ki;function qh(t){if(typeof t!="function")throw new sr(o);return function(){var r=arguments;switch(r.length){case 0:return!t.call(this);case 1:return!t.call(this,r[0]);case 2:return!t.call(this,r[0],r[1]);case 3:return!t.call(this,r[0],r[1],r[2])}return!t.apply(this,r)}}function Lh(t){return xh(2,t)}var Kh=Hs((function(t,r){r=r.length==1&&hf(r[0])?On(r[0],Jn(Ho())):On(Ne(r,1),Jn(Ho()));var n=r.length;return ms((function(i){for(var e=-1,s=Kr(i.length,n);++e<s;)i[e]=r[e].call(this,i[e]);return yn(t,this,i)}))})),Hh=ms((function(t,r){var i=ui(r,Ko(Hh));return xo(t,A,n,r,i)})),Gh=ms((function(t,r){var i=ui(r,Ko(Gh));return xo(t,E,n,r,i)})),Qh=ko((function(t,r){return xo(t,_,n,n,n,r)}));function Jh(t,r){if(typeof t!="function")throw new sr(o);return r=r===n?r:zf(r),ms(t,r)}function Vh(t,r){if(typeof t!="function")throw new sr(o);return r=r==null?0:Lr(zf(r),0),ms((function(n){var i=n[r],e=Gs(n,0,r);return i&&In(e,i),yn(t,this,e)}))}function zh(t,r,n){var i=!0,e=!0;if(typeof t!="function")throw new sr(o);return Of(n)&&(i="leading"in n?!!n.leading:i,e="trailing"in n?!!n.trailing:e),Uh(t,r,{leading:i,maxWait:r,trailing:e})}function Yh(t){return jh(t,1)}function Wh(t,r){return Hh(Ls(r),t)}function Xh(){if(!arguments.length)return[];var t=arguments[0];return hf(t)?t:[t]}function Zh(t){return ye(t,d)}function tf(t,r){return r=typeof r=="function"?r:n,ye(t,d,r)}function rf(t){return ye(t,c|d)}function nf(t,r){return r=typeof r=="function"?r:n,ye(t,c|d,r)}function ef(t,r){return r==null||ge(t,r,Mc(r))}function sf(t,r){return t===r||t!==t&&r!==r}var of=Io(Be),af=Io((function(t,r){return t>=r})),uf=He(function(){return arguments}())?He:function(t){return If(t)&&cr.call(t,"callee")&&!_r.call(t,"callee")},hf=Ut.isArray,ff=cn?Jn(cn):Ge;function cf(t){return t!=null&&_f(t.length)&&!Ef(t)}function lf(t){return If(t)&&cf(t)}function df(t){return t===!0||t===!1||If(t)&&Ue(t)==H}var vf=Ur||zl,wf=ln?Jn(ln):Qe;function pf(t){return If(t)&&t.nodeType===1&&!Df(t)}function yf(t){if(t==null)return!0;if(cf(t)&&(hf(t)||typeof t=="string"||typeof t.splice=="function"||vf(t)||qf(t)||uf(t)))return!t.length;var r=Wo(t);if(r==Y||r==it)return!t.size;if(da(t))return!ns(t).length;for(var n in t)if(cr.call(t,n))return!1;return!0}function bf(t,r){return Je(t,r)}function gf(t,r,i){i=typeof i=="function"?i:n;var e=i?i(t,r):n;return e===n?Je(t,r,n,i):!!e}function mf(t){if(!If(t))return!1;var r=Ue(t);return r==J||r==Q||typeof t.message=="string"&&typeof t.name=="string"&&!Df(t)}function Af(t){return typeof t=="number"&&Br(t)}function Ef(t){if(!Of(t))return!1;var r=Ue(t);return r==V||r==z||r==K||r==rt}function Mf(t){return typeof t=="number"&&t==zf(t)}function _f(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=R}function Of(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")}function If(t){return t!=null&&typeof t=="object"}var Sf=dn?Jn(dn):ze;function Nf(t,r){return t===r||Ye(t,r,Qo(r))}function Cf(t,r,i){return i=typeof i=="function"?i:n,Ye(t,r,Qo(r),i)}function jf(t){return Rf(t)&&t!=+t}function xf(t){if(la(t))throw new Zt(s);return We(t)}function Pf(t){return t===null}function Tf(t){return t==null}function Rf(t){return typeof t=="number"||If(t)&&Ue(t)==W}function Df(t){if(!If(t)||Ue(t)!=Z)return!1;var r=Er(t);if(r===null)return!0;var n=cr.call(r,"constructor")&&r.constructor;return typeof n=="function"&&n instanceof n&&fr.call(n)==wr}var Uf=vn?Jn(vn):Xe;function Bf(t){return Mf(t)&&t>=-R&&t<=R}var kf=wn?Jn(wn):Ze;function $f(t){return typeof t=="string"||!hf(t)&&If(t)&&Ue(t)==et}function Ff(t){return typeof t=="symbol"||If(t)&&Ue(t)==st}var qf=pn?Jn(pn):ts;function Lf(t){return t===n}function Kf(t){return If(t)&&Wo(t)==at}function Hf(t){return If(t)&&Ue(t)==ut}var Gf=Io(es),Qf=Io((function(t,r){return t<=r}));function Jf(t){if(!t)return[];if(cf(t))return $f(t)?vi(t):io(t);if(Sr&&t[Sr])return si(t[Sr]());var r=Wo(t),n=r==Y?oi:r==it?hi:Lc;return n(t)}function Vf(t){if(!t)return t===0?t:0;if(t=Wf(t),t===T||t===-T){var r=t<0?-1:1;return r*D}return t===t?t:0}function zf(t){var r=Vf(t),n=r%1;return r===r?n?r-n:r:0}function Yf(t){return t?pe(zf(t),0,B):0}function Wf(t){if(typeof t=="number")return t;if(Ff(t))return U;if(Of(t)){var r=typeof t.valueOf=="function"?t.valueOf():t;t=Of(r)?r+"":r}if(typeof t!="string")return t===0?t:+t;t=Qn(t);var n=Qt.test(t);return n||Vt.test(t)?rn(t.slice(2),n?2:8):Gt.test(t)?U:+t}function Xf(t){return eo(t,_c(t))}function Zf(t){return t?pe(zf(t),-R,R):t===0?t:0}function tc(t){return t==null?"":Ts(t)}var rc=uo((function(t,r){if(da(r)||cf(r)){eo(r,Mc(r),t);return}for(var n in r)cr.call(r,n)&&he(t,n,r[n])})),nc=uo((function(t,r){eo(r,_c(r),t)})),ic=uo((function(t,r,n,i){eo(r,_c(r),t,i)})),ec=uo((function(t,r,n,i){eo(r,Mc(r),t,i)})),sc=ko(we);function oc(t,r){var n=_i(t);return r==null?n:le(n,r)}var ac=ms((function(t,r){t=nr(t);var i=-1,e=r.length,s=e>2?r[2]:n;for(s&&aa(r[0],r[1],s)&&(e=1);++i<e;)for(var o=r[i],a=_c(o),u=-1,h=a.length;++u<h;){var f=a[u],c=t[f];(c===n||sf(c,ur[f])&&!cr.call(t,f))&&(t[f]=o[f])}return t})),uc=ms((function(t){return t.push(n,To),yn(Nc,n,t)}));function hc(t,r){return Tn(t,Ho(r,3),xe)}function fc(t,r){return Tn(t,Ho(r,3),Pe)}function cc(t,r){return t==null?t:Ce(t,Ho(r,3),_c)}function lc(t,r){return t==null?t:je(t,Ho(r,3),_c)}function dc(t,r){return t&&xe(t,Ho(r,3))}function vc(t,r){return t&&Pe(t,Ho(r,3))}function wc(t){return t==null?[]:Te(t,Mc(t))}function pc(t){return t==null?[]:Te(t,_c(t))}function yc(t,r,i){var e=t==null?n:Re(t,r);return e===n?i:e}function bc(t,r){return t!=null&&ta(t,r,ke)}function gc(t,r){return t!=null&&ta(t,r,$e)}var mc=mo((function(t,r,n){r!=null&&typeof r.toString!="function"&&(r=vr.call(r)),t[r]=n}),Sl(xl)),Ac=mo((function(t,r,n){r!=null&&typeof r.toString!="function"&&(r=vr.call(r)),cr.call(t,r)?t[r].push(n):t[r]=[n]}),Ho),Ec=ms(Ke);function Mc(t){return cf(t)?ee(t):ns(t)}function _c(t){return cf(t)?ee(t,!0):is(t)}function Oc(t,r){var n={};return r=Ho(r,3),xe(t,(function(t,i,e){ve(n,r(t,i,e),t)})),n}function Ic(t,r){var n={};return r=Ho(r,3),xe(t,(function(t,i,e){ve(n,i,r(t,i,e))})),n}var Sc=uo((function(t,r,n){us(t,r,n)})),Nc=uo((function(t,r,n,i){us(t,r,n,i)})),Cc=ko((function(t,r){var n={};if(t==null)return n;var i=!1;r=On(r,(function(r){return r=Ks(r,t),i||(i=r.length>1),r})),eo(t,Fo(t),n),i&&(n=ye(n,c|l|d,Ro));for(var e=r.length;e--;)Ds(n,r[e]);return n}));function jc(t,r){return Pc(t,qh(Ho(r)))}var xc=ko((function(t,r){return t==null?{}:ls(t,r)}));function Pc(t,r){if(t==null)return{};var n=On(Fo(t),(function(t){return[t]}));return r=Ho(r),ds(t,n,(function(t,n){return r(t,n[0])}))}function Tc(t,r,i){r=Ks(r,t);var e=-1,s=r.length;for(s||(s=1,t=n);++e<s;){var o=t==null?n:t[xa(r[e])];o===n&&(e=s,o=i),t=Ef(o)?o.call(t):o}return t}function Rc(t,r,n){return t==null?t:Ms(t,r,n)}function Dc(t,r,i,e){return e=typeof e=="function"?e:n,t==null?t:Ms(t,r,i,e)}var Uc=jo(Mc),Bc=jo(_c);function kc(t,r,n){var i=hf(t),e=i||vf(t)||qf(t);if(r=Ho(r,4),n==null){var s=t&&t.constructor;e?n=i?new s:[]:Of(t)?n=Ef(s)?_i(Er(t)):{}:n={}}return(e?gn:xe)(t,(function(t,i,e){return r(n,t,i,e)})),n}function $c(t,r){return t==null?!0:Ds(t,r)}function Fc(t,r,n){return t==null?t:Us(t,r,Ls(n))}function qc(t,r,i,e){return e=typeof e=="function"?e:n,t==null?t:Us(t,r,Ls(i),e)}function Lc(t){return t==null?[]:Vn(t,Mc(t))}function Kc(t){return t==null?[]:Vn(t,_c(t))}function Hc(t,r,i){return i===n&&(i=r,r=n),i!==n&&(i=Wf(i),i=i===i?i:0),r!==n&&(r=Wf(r),r=r===r?r:0),pe(Wf(t),r,i)}function Gc(t,r,i){return r=Vf(r),i===n?(i=r,r=0):i=Vf(i),t=Wf(t),Fe(t,r,i)}function Qc(t,r,i){if(i&&typeof i!="boolean"&&aa(t,r,i)&&(r=i=n),i===n&&(typeof r=="boolean"?(i=r,r=n):typeof t=="boolean"&&(i=t,t=n)),t===n&&r===n?(t=0,r=1):(t=Vf(t),r===n?(r=t,t=0):r=Vf(r)),t>r){var e=t;t=r,r=e}if(i||t%1||r%1){var s=Yr();return Kr(t+s*(r-t+tn("1e-"+((s+"").length-1))),r)}return ys(t,r)}var Jc=vo((function(t,r,n){return r=r.toLowerCase(),t+(n?Vc(r):r)}));function Vc(t){return Al(tc(t).toLowerCase())}function zc(t){return t=tc(t),t&&t.replace(Yt,Zn).replace(qr,"")}function Yc(t,r,i){t=tc(t),r=Ts(r);var e=t.length;i=i===n?e:pe(zf(i),0,e);var s=i;return i-=r.length,i>=0&&t.slice(i,s)==r}function Wc(t){return t=tc(t),t&&It.test(t)?t.replace(_t,ti):t}function Xc(t){return t=tc(t),t&&Rt.test(t)?t.replace(Tt,"\\$&"):t}var Zc=vo((function(t,r,n){return t+(n?"-":"")+r.toLowerCase()})),tl=vo((function(t,r,n){return t+(n?" ":"")+r.toLowerCase()})),rl=lo("toLowerCase");function nl(t,r,n){t=tc(t),r=zf(r);var i=r?di(t):0;if(!r||i>=r)return t;var e=(r-i)/2;return Mo(Rr(e),n)+t+Mo(Tr(e),n)}function il(t,r,n){t=tc(t),r=zf(r);var i=r?di(t):0;return r&&i<r?t+Mo(r-i,n):t}function el(t,r,n){t=tc(t),r=zf(r);var i=r?di(t):0;return r&&i<r?Mo(r-i,n)+t:t}function sl(t,r,n){return n||r==null?r=0:r&&(r=+r),Gr(tc(t).replace(Dt,""),r||0)}function ol(t,r,i){return(i?aa(t,r,i):r===n)?r=1:r=zf(r),gs(tc(t),r)}function al(){var t=arguments,r=tc(t[0]);return t.length<3?r:r.replace(t[1],t[2])}var ul=vo((function(t,r,n){return t+(n?"_":"")+r.toLowerCase()}));function hl(t,r,i){return i&&typeof i!="number"&&aa(t,r,i)&&(r=i=n),i=i===n?B:i>>>0,i?(t=tc(t),t&&(typeof r=="string"||r!=null&&!Uf(r))&&(r=Ts(r),!r&&ii(t))?Gs(vi(t),0,i):t.split(r,i)):[]}var fl=vo((function(t,r,n){return t+(n?" ":"")+Al(r)}));function cl(t,r,n){return t=tc(t),n=n==null?0:pe(zf(n),0,t.length),r=Ts(r),t.slice(n,n+r.length)==r}function ll(t,r,i){var e=Mi.templateSettings;i&&aa(t,r,i)&&(r=n),t=tc(t),r=ic({},r,e,Po);var s=ic({},r.imports,e.imports,Po),o=Mc(s),u=Vn(s,o),h,f,c=0,l=r.interpolate||Wt,d="__p += '",v=ir((r.escape||Wt).source+"|"+l.source+"|"+(l===Ct?Kt:Wt).source+"|"+(r.evaluate||Wt).source+"|$","g"),w="//# sourceURL="+(cr.call(r,"sourceURL")?(r.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Jr+"]")+`\n`;t.replace(v,(function(r,n,i,e,s,o){return i||(i=e),d+=t.slice(c,o).replace(Xt,ri),n&&(h=!0,d+=`' +\n__e(`+n+`) +\n'`),s&&(f=!0,d+=`';\n`+s+`;\n__p += '`),i&&(d+=`' +\n((__t = (`+i+`)) == null ? '' : __t) +\n'`),c=o+r.length,r})),d+=`';\n`;var p=cr.call(r,"variable")&&r.variable;if(!p)d=`with (obj) {\n`+d+`\n}\n`;else if(qt.test(p))throw new Zt(a);d=(f?d.replace(mt,""):d).replace(At,"$1").replace(Et,"$1;"),d="function("+(p||"obj")+`) {\n`+(p?"":`obj || (obj = {});\n`)+"var __t, __p = ''"+(h?", __e = _.escape":"")+(f?`, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n`:`;\n`)+d+`return __p\n}`;var y=Ml((function(){return tr(o,w+"return "+d).apply(n,u)}));if(y.source=d,mf(y))throw y;return y}function dl(t){return tc(t).toLowerCase()}function vl(t){return tc(t).toUpperCase()}function wl(t,r,i){if(t=tc(t),t&&(i||r===n))return Qn(t);if(!t||!(r=Ts(r)))return t;var e=vi(t),s=vi(r),o=Yn(e,s),a=Wn(e,s)+1;return Gs(e,o,a).join("")}function pl(t,r,i){if(t=tc(t),t&&(i||r===n))return t.slice(0,wi(t)+1);if(!t||!(r=Ts(r)))return t;var e=vi(t),s=Wn(e,vi(r))+1;return Gs(e,0,s).join("")}function yl(t,r,i){if(t=tc(t),t&&(i||r===n))return t.replace(Dt,"");if(!t||!(r=Ts(r)))return t;var e=vi(t),s=Yn(e,vi(r));return Gs(e,s).join("")}function bl(t,r){var i=I,e=S;if(Of(r)){var s="separator"in r?r.separator:s;i="length"in r?zf(r.length):i,e="omission"in r?Ts(r.omission):e}t=tc(t);var o=t.length;if(ii(t)){var a=vi(t);o=a.length}if(i>=o)return t;var u=i-di(e);if(u<1)return e;var h=a?Gs(a,0,u).join(""):t.slice(0,u);if(s===n)return h+e;if(a&&(u+=h.length-u),Uf(s)){if(t.slice(u).search(s)){var f,c=h;for(s.global||(s=ir(s.source,tc(Ht.exec(s))+"g")),s.lastIndex=0;f=s.exec(c);)var l=f.index;h=h.slice(0,l===n?u:l)}}else if(t.indexOf(Ts(s),u)!=u){var d=h.lastIndexOf(s);d>-1&&(h=h.slice(0,d))}return h+e}function gl(t){return t=tc(t),t&&Ot.test(t)?t.replace(Mt,pi):t}var ml=vo((function(t,r,n){return t+(n?" ":"")+r.toUpperCase()})),Al=lo("toUpperCase");function El(t,r,i){return t=tc(t),r=i?n:r,r===n?ei(t)?gi(t):Pn(t):t.match(r)||[]}var Ml=ms((function(t,r){try{return yn(t,n,r)}catch(t){return mf(t)?t:new Zt(t)}})),_l=ko((function(t,r){return gn(r,(function(r){r=xa(r),ve(t,r,Ph(t[r],t))})),t}));function Ol(t){var r=t==null?0:t.length,n=Ho();return t=r?On(t,(function(t){if(typeof t[1]!="function")throw new sr(o);return[n(t[0]),t[1]]})):[],ms((function(n){for(var i=-1;++i<r;){var e=t[i];if(yn(e[0],this,n))return yn(e[1],this,n)}}))}function Il(t){return be(ye(t,c))}function Sl(t){return function(){return t}}function Nl(t,r){return t==null||t!==t?r:t}var Cl=bo(),jl=bo(!0);function xl(t){return t}function Pl(t){return rs(typeof t=="function"?t:ye(t,c))}function Tl(t){return os(ye(t,c))}function Rl(t,r){return as(t,ye(r,c))}var Dl=ms((function(t,r){return function(n){return Ke(n,t,r)}})),Ul=ms((function(t,r){return function(n){return Ke(t,n,r)}}));function Bl(t,r,n){var i=Mc(r),e=Te(r,i);n==null&&!(Of(r)&&(e.length||!i.length))&&(n=r,r=t,t=this,e=Te(r,Mc(r)));var s=!(Of(n)&&"chain"in n)||!!n.chain,o=Ef(t);return gn(e,(function(n){var i=r[n];t[n]=i,o&&(t.prototype[n]=function(){var r=this.__chain__;if(s||r){var n=t(this.__wrapped__),e=n.__actions__=io(this.__actions__);return e.push({func:i,args:arguments,thisArg:t}),n.__chain__=r,n}return i.apply(t,In([this.value()],arguments))})})),t}function kl(){return sn._===this&&(sn._=pr),this}function $l(){}function Fl(t){return t=zf(t),ms((function(r){return fs(r,t)}))}var ql=Eo(On),Ll=Eo(An),Kl=Eo(Cn);function Hl(t){return ua(t)?$n(xa(t)):vs(t)}function Gl(t){return function(r){return t==null?n:Re(t,r)}}var Ql=Oo(),Jl=Oo(!0);function Vl(){return[]}function zl(){return!1}function Yl(){return{}}function Wl(){return""}function Xl(){return!0}function Zl(t,r){if(t=zf(t),t<1||t>R)return[];var n=B,i=Kr(t,B);r=Ho(r),t-=B;for(var e=Hn(i,r);++n<t;)r(n);return e}function td(t){return hf(t)?On(t,xa):Ff(t)?[t]:io(ja(tc(t)))}function rd(t){var r=++lr;return tc(t)+r}var nd=Ao((function(t,r){return t+r}),0),id=No("ceil"),ed=Ao((function(t,r){return t/r}),1),sd=No("floor");function od(t){return t&&t.length?Oe(t,xl,Be):n}function ad(t,r){return t&&t.length?Oe(t,Ho(r,2),Be):n}function ud(t){return kn(t,xl)}function hd(t,r){return kn(t,Ho(r,2))}function fd(t){return t&&t.length?Oe(t,xl,es):n}function cd(t,r){return t&&t.length?Oe(t,Ho(r,2),es):n}var ld=Ao((function(t,r){return t*r}),1),dd=No("round"),vd=Ao((function(t,r){return t-r}),0);function wd(t){return t&&t.length?Kn(t,xl):0}function pd(t,r){return t&&t.length?Kn(t,Ho(r,2)):0}return Mi.after=Ch,Mi.ary=jh,Mi.assign=rc,Mi.assignIn=nc,Mi.assignInWith=ic,Mi.assignWith=ec,Mi.at=sc,Mi.before=xh,Mi.bind=Ph,Mi.bindAll=_l,Mi.bindKey=Th,Mi.castArray=Xh,Mi.chain=Gu,Mi.chunk=Da,Mi.compact=Ua,Mi.concat=Ba,Mi.cond=Ol,Mi.conforms=Il,Mi.constant=Sl,Mi.countBy=nh,Mi.create=oc,Mi.curry=Rh,Mi.curryRight=Dh,Mi.debounce=Uh,Mi.defaults=ac,Mi.defaultsDeep=uc,Mi.defer=Bh,Mi.delay=kh,Mi.difference=ka,Mi.differenceBy=$a,Mi.differenceWith=Fa,Mi.drop=qa,Mi.dropRight=La,Mi.dropRightWhile=Ka,Mi.dropWhile=Ha,Mi.fill=Ga,Mi.filter=eh,Mi.flatMap=ah,Mi.flatMapDeep=uh,Mi.flatMapDepth=hh,Mi.flatten=Va,Mi.flattenDeep=za,Mi.flattenDepth=Ya,Mi.flip=$h,Mi.flow=Cl,Mi.flowRight=jl,Mi.fromPairs=Wa,Mi.functions=wc,Mi.functionsIn=pc,Mi.groupBy=lh,Mi.initial=tu,Mi.intersection=ru,Mi.intersectionBy=nu,Mi.intersectionWith=iu,Mi.invert=mc,Mi.invertBy=Ac,Mi.invokeMap=vh,Mi.iteratee=Pl,Mi.keyBy=wh,Mi.keys=Mc,Mi.keysIn=_c,Mi.map=ph,Mi.mapKeys=Oc,Mi.mapValues=Ic,Mi.matches=Tl,Mi.matchesProperty=Rl,Mi.memoize=Fh,Mi.merge=Sc,Mi.mergeWith=Nc,Mi.method=Dl,Mi.methodOf=Ul,Mi.mixin=Bl,Mi.negate=qh,Mi.nthArg=Fl,Mi.omit=Cc,Mi.omitBy=jc,Mi.once=Lh,Mi.orderBy=yh,Mi.over=ql,Mi.overArgs=Kh,Mi.overEvery=Ll,Mi.overSome=Kl,Mi.partial=Hh,Mi.partialRight=Gh,Mi.partition=bh,Mi.pick=xc,Mi.pickBy=Pc,Mi.property=Hl,Mi.propertyOf=Gl,Mi.pull=uu,Mi.pullAll=hu,Mi.pullAllBy=fu,Mi.pullAllWith=cu,Mi.pullAt=lu,Mi.range=Ql,Mi.rangeRight=Jl,Mi.rearg=Qh,Mi.reject=Ah,Mi.remove=du,Mi.rest=Jh,Mi.reverse=vu,Mi.sampleSize=Mh,Mi.set=Rc,Mi.setWith=Dc,Mi.shuffle=_h,Mi.slice=wu,Mi.sortBy=Sh,Mi.sortedUniq=Eu,Mi.sortedUniqBy=Mu,Mi.split=hl,Mi.spread=Vh,Mi.tail=_u,Mi.take=Ou,Mi.takeRight=Iu,Mi.takeRightWhile=Su,Mi.takeWhile=Nu,Mi.tap=Qu,Mi.throttle=zh,Mi.thru=Ju,Mi.toArray=Jf,Mi.toPairs=Uc,Mi.toPairsIn=Bc,Mi.toPath=td,Mi.toPlainObject=Xf,Mi.transform=kc,Mi.unary=Yh,Mi.union=Cu,Mi.unionBy=ju,Mi.unionWith=xu,Mi.uniq=Pu,Mi.uniqBy=Tu,Mi.uniqWith=Ru,Mi.unset=$c,Mi.unzip=Du,Mi.unzipWith=Uu,Mi.update=Fc,Mi.updateWith=qc,Mi.values=Lc,Mi.valuesIn=Kc,Mi.without=Bu,Mi.words=El,Mi.wrap=Wh,Mi.xor=ku,Mi.xorBy=$u,Mi.xorWith=Fu,Mi.zip=qu,Mi.zipObject=Lu,Mi.zipObjectDeep=Ku,Mi.zipWith=Hu,Mi.entries=Uc,Mi.entriesIn=Bc,Mi.extend=nc,Mi.extendWith=ic,Bl(Mi,Mi),Mi.add=nd,Mi.attempt=Ml,Mi.camelCase=Jc,Mi.capitalize=Vc,Mi.ceil=id,Mi.clamp=Hc,Mi.clone=Zh,Mi.cloneDeep=rf,Mi.cloneDeepWith=nf,Mi.cloneWith=tf,Mi.conformsTo=ef,Mi.deburr=zc,Mi.defaultTo=Nl,Mi.divide=ed,Mi.endsWith=Yc,Mi.eq=sf,Mi.escape=Wc,Mi.escapeRegExp=Xc,Mi.every=ih,Mi.find=sh,Mi.findIndex=Qa,Mi.findKey=hc,Mi.findLast=oh,Mi.findLastIndex=Ja,Mi.findLastKey=fc,Mi.floor=sd,Mi.forEach=fh,Mi.forEachRight=ch,Mi.forIn=cc,Mi.forInRight=lc,Mi.forOwn=dc,Mi.forOwnRight=vc,Mi.get=yc,Mi.gt=of,Mi.gte=af,Mi.has=bc,Mi.hasIn=gc,Mi.head=Xa,Mi.identity=xl,Mi.includes=dh,Mi.indexOf=Za,Mi.inRange=Gc,Mi.invoke=Ec,Mi.isArguments=uf,Mi.isArray=hf,Mi.isArrayBuffer=ff,Mi.isArrayLike=cf,Mi.isArrayLikeObject=lf,Mi.isBoolean=df,Mi.isBuffer=vf,Mi.isDate=wf,Mi.isElement=pf,Mi.isEmpty=yf,Mi.isEqual=bf,Mi.isEqualWith=gf,Mi.isError=mf,Mi.isFinite=Af,Mi.isFunction=Ef,Mi.isInteger=Mf,Mi.isLength=_f,Mi.isMap=Sf,Mi.isMatch=Nf,Mi.isMatchWith=Cf,Mi.isNaN=jf,Mi.isNative=xf,Mi.isNil=Tf,Mi.isNull=Pf,Mi.isNumber=Rf,Mi.isObject=Of,Mi.isObjectLike=If,Mi.isPlainObject=Df,Mi.isRegExp=Uf,Mi.isSafeInteger=Bf,Mi.isSet=kf,Mi.isString=$f,Mi.isSymbol=Ff,Mi.isTypedArray=qf,Mi.isUndefined=Lf,Mi.isWeakMap=Kf,Mi.isWeakSet=Hf,Mi.join=eu,Mi.kebabCase=Zc,Mi.last=su,Mi.lastIndexOf=ou,Mi.lowerCase=tl,Mi.lowerFirst=rl,Mi.lt=Gf,Mi.lte=Qf,Mi.max=od,Mi.maxBy=ad,Mi.mean=ud,Mi.meanBy=hd,Mi.min=fd,Mi.minBy=cd,Mi.stubArray=Vl,Mi.stubFalse=zl,Mi.stubObject=Yl,Mi.stubString=Wl,Mi.stubTrue=Xl,Mi.multiply=ld,Mi.nth=au,Mi.noConflict=kl,Mi.noop=$l,Mi.now=Nh,Mi.pad=nl,Mi.padEnd=il,Mi.padStart=el,Mi.parseInt=sl,Mi.random=Qc,Mi.reduce=gh,Mi.reduceRight=mh,Mi.repeat=ol,Mi.replace=al,Mi.result=Tc,Mi.round=dd,Mi.runInContext=t,Mi.sample=Eh,Mi.size=Oh,Mi.snakeCase=ul,Mi.some=Ih,Mi.sortedIndex=pu,Mi.sortedIndexBy=yu,Mi.sortedIndexOf=bu,Mi.sortedLastIndex=gu,Mi.sortedLastIndexBy=mu,Mi.sortedLastIndexOf=Au,Mi.startCase=fl,Mi.startsWith=cl,Mi.subtract=vd,Mi.sum=wd,Mi.sumBy=pd,Mi.template=ll,Mi.times=Zl,Mi.toFinite=Vf,Mi.toInteger=zf,Mi.toLength=Yf,Mi.toLower=dl,Mi.toNumber=Wf,Mi.toSafeInteger=Zf,Mi.toString=tc,Mi.toUpper=vl,Mi.trim=wl,Mi.trimEnd=pl,Mi.trimStart=yl,Mi.truncate=bl,Mi.unescape=gl,Mi.uniqueId=rd,Mi.upperCase=ml,Mi.upperFirst=Al,Mi.each=fh,Mi.eachRight=ch,Mi.first=Xa,Bl(Mi,function(){var t={};return xe(Mi,(function(r,n){cr.call(Mi.prototype,n)||(t[n]=r)})),t}(),{chain:!1}),Mi.VERSION=i,gn(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){Mi[t].placeholder=Mi})),gn(["drop","take"],(function(t,r){Si.prototype[t]=function(i){i=i===n?1:Lr(zf(i),0);var e=this.__filtered__&&!r?new Si(this):this.clone();return e.__filtered__?e.__takeCount__=Kr(i,e.__takeCount__):e.__views__.push({size:Kr(i,B),type:t+(e.__dir__<0?"Right":"")}),e},Si.prototype[t+"Right"]=function(r){return this.reverse()[t](r).reverse()}})),gn(["filter","map","takeWhile"],(function(t,r){var n=r+1,i=n==j||n==P;Si.prototype[t]=function(t){var r=this.clone();return r.__iteratees__.push({iteratee:Ho(t,3),type:n}),r.__filtered__=r.__filtered__||i,r}})),gn(["head","last"],(function(t,r){var n="take"+(r?"Right":"");Si.prototype[t]=function(){return this[n](1).value()[0]}})),gn(["initial","tail"],(function(t,r){var n="drop"+(r?"":"Right");Si.prototype[t]=function(){return this.__filtered__?new Si(this):this[n](1)}})),Si.prototype.compact=function(){return this.filter(xl)},Si.prototype.find=function(t){return this.filter(t).head()},Si.prototype.findLast=function(t){return this.reverse().find(t)},Si.prototype.invokeMap=ms((function(t,r){return typeof t=="function"?new Si(this):this.map((function(n){return Ke(n,t,r)}))})),Si.prototype.reject=function(t){return this.filter(qh(Ho(t)))},Si.prototype.slice=function(t,r){t=zf(t);var i=this;return i.__filtered__&&(t>0||r<0)?new Si(i):(t<0?i=i.takeRight(-t):t&&(i=i.drop(t)),r!==n&&(r=zf(r),i=r<0?i.dropRight(-r):i.take(r-t)),i)},Si.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Si.prototype.toArray=function(){return this.take(B)},xe(Si.prototype,(function(t,r){var i=/^(?:filter|find|map|reject)|While$/.test(r),e=/^(?:head|last)$/.test(r),s=Mi[e?"take"+(r=="last"?"Right":""):r],o=e||/^find/.test(r);s&&(Mi.prototype[r]=function(){var r=this.__wrapped__,a=e?[1]:arguments,u=r instanceof Si,h=a[0],f=u||hf(r),c=function(t){var r=s.apply(Mi,In([t],a));return e&&l?r[0]:r};f&&i&&typeof h=="function"&&h.length!=1&&(u=f=!1);var l=this.__chain__,d=!!this.__actions__.length,v=o&&!l,w=u&&!d;if(!o&&f){r=w?r:new Si(this);var p=t.apply(r,a);return p.__actions__.push({func:Ju,args:[c],thisArg:n}),new Ii(p,l)}return v&&w?t.apply(this,a):(p=this.thru(c),v?e?p.value()[0]:p.value():p)})})),gn(["pop","push","shift","sort","splice","unshift"],(function(t){var r=or[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:pop|shift)$/.test(t);Mi.prototype[t]=function(){var t=arguments;if(i&&!this.__chain__){var e=this.value();return r.apply(hf(e)?e:[],t)}return this[n]((function(n){return r.apply(hf(n)?n:[],t)}))}})),xe(Si.prototype,(function(t,r){var n=Mi[r];if(n){var i=n.name+"";cr.call(fn,i)||(fn[i]=[]),fn[i].push({name:r,func:n})}})),fn[go(n,y).name]=[{name:"wrapper",func:n}],Si.prototype.clone=Ni,Si.prototype.reverse=Ci,Si.prototype.value=ji,Mi.prototype.at=Vu,Mi.prototype.chain=zu,Mi.prototype.commit=Yu,Mi.prototype.next=Wu,Mi.prototype.plant=Zu,Mi.prototype.reverse=th,Mi.prototype.toJSON=Mi.prototype.valueOf=Mi.prototype.value=rh,Mi.prototype.first=Mi.prototype.head,Sr&&(Mi.prototype[Sr]=Xu),Mi},Ai=mi();an?((an.exports=Ai)._=Ai,on._=Ai):sn._=Ai}).call(j_)})(x_,x_.exports);var P_=Object.defineProperty,T_=Object.defineProperties,R_=Object.getOwnPropertyDescriptors,D_=Object.getOwnPropertySymbols,U_=Object.prototype.hasOwnProperty,B_=Object.prototype.propertyIsEnumerable,k_=(t,r,n)=>r in t?P_(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n,$_=(t,r)=>{for(var n in r||(r={}))U_.call(r,n)&&k_(t,n,r[n]);if(D_)for(var n of D_(r))B_.call(r,n)&&k_(t,n,r[n]);return t},F_=(t,r)=>T_(t,R_(r));function q_(t,r,n){var i;const e=Qe(t);return((i=r.rpcMap)==null?void 0:i[e.reference])||`${N_}?chainId=${e.namespace}:${e.reference}&projectId=${n}`}function L_(t){return t.includes(":")?t.split(":")[1]:t}function K_(t){return t.map((t=>`${t.split(":")[0]}:${t.split(":")[1]}`))}function H_(t,r){const n=Object.keys(r.namespaces).filter((r=>r.includes(t)));if(!n.length)return[];const i=[];return n.forEach((t=>{const n=r.namespaces[t].accounts;i.push(...n)})),i}function G_(t={},r={}){const n=Q_(t),i=Q_(r);return x_.exports.merge(n,i)}function Q_(t){var r,n,i,e;const s={};if(!Ll(t))return s;for(const[o,a]of Object.entries(t)){const t=Tl(o)?[o]:a.chains,u=a.methods||[],h=a.events||[],f=a.rpcMap||{},c=Rl(o);s[c]=F_($_($_({},s[c]),a),{chains:Ss(t,(r=s[c])==null?void 0:r.chains),methods:Ss(u,(n=s[c])==null?void 0:n.methods),events:Ss(h,(i=s[c])==null?void 0:i.events),rpcMap:$_($_({},f),(e=s[c])==null?void 0:e.rpcMap)})}return s}function J_(t){return t.includes(":")?t.split(":")[2]:t}function V_(t){const r={};for(const[n,i]of Object.entries(t)){const t=i.methods||[],e=i.events||[],s=i.accounts||[],o=Tl(n)?[n]:i.chains?i.chains:K_(i.accounts);r[n]={chains:o,methods:t,events:e,accounts:s}}return r}function z_(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}const Y_={},W_=t=>Y_[t],X_=(t,r)=>{Y_[t]=r};class Z_{constructor(t){this.name="polkadot",this.namespace=t.namespace,this.events=W_("events"),this.client=W_("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){this.httpProviders[t]||this.setHttpProvider(t,r),this.chainId=t,this.events.emit(C_.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}getAccounts(){const t=this.namespace.accounts;return t?t.filter((t=>t.split(":")[1]===this.chainId.toString())).map((t=>t.split(":")[2]))||[]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach((r=>{var n;const i=L_(r);t[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])})),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){const n=this.createHttpProvider(t,r);n&&(this.httpProviders[t]=n)}createHttpProvider(t,r){const n=r||q_(t,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${t}`);return new Tg(new E_(n,W_("disableProviderPing")))}}class tO{constructor(t){this.name="eip155",this.namespace=t.namespace,this.events=W_("events"),this.client=W_("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(t){switch(t.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(t);case"eth_chainId":return parseInt(this.getDefaultChain())}return this.namespace.methods.includes(t.request.method)?await this.client.request(t):this.getHttpProvider().request(t.request)}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}setDefaultChain(t,r){this.httpProviders[t]||this.setHttpProvider(parseInt(t),r),this.chainId=parseInt(t),this.events.emit(C_.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}createHttpProvider(t,r){const n=r||q_(`${this.name}:${t}`,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${t}`);return new Tg(new E_(n,W_("disableProviderPing")))}setHttpProvider(t,r){const n=this.createHttpProvider(t,r);n&&(this.httpProviders[t]=n)}createHttpProviders(){const t={};return this.namespace.chains.forEach((r=>{var n;const i=parseInt(L_(r));t[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])})),t}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter((t=>t.split(":")[1]===this.chainId.toString())).map((t=>t.split(":")[2])))]:[]}getHttpProvider(){const t=this.chainId,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}async handleSwitchChain(t){var r,n;let i=t.request.params?(r=t.request.params[0])==null?void 0:r.chainId:"0x0";i=i.startsWith("0x")?i:`0x${i}`;const e=parseInt(i,16);if(this.isChainApproved(e))this.setDefaultChain(`${e}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:t.topic,request:{method:t.request.method,params:[{chainId:i}]},chainId:(n=this.namespace.chains)==null?void 0:n[0]}),this.setDefaultChain(`${e}`);else throw new Error(`Failed to switch to chain 'eip155:${e}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(t){return this.namespace.chains.includes(`${this.name}:${t}`)}}class rO{constructor(t){this.name="solana",this.namespace=t.namespace,this.events=W_("events"),this.client=W_("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){this.httpProviders[t]||this.setHttpProvider(t,r),this.chainId=t,this.events.emit(C_.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter((t=>t.split(":")[1]===this.chainId.toString())).map((t=>t.split(":")[2])))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach((r=>{var n;const i=L_(r);t[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])})),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){const n=this.createHttpProvider(t,r);n&&(this.httpProviders[t]=n)}createHttpProvider(t,r){const n=r||q_(t,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${t}`);return new Tg(new E_(n,W_("disableProviderPing")))}}class nO{constructor(t){this.name="cosmos",this.namespace=t.namespace,this.events=W_("events"),this.client=W_("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){this.httpProviders[t]||this.setHttpProvider(t,r),this.chainId=t,this.events.emit(C_.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter((t=>t.split(":")[1]===this.chainId.toString())).map((t=>t.split(":")[2])))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach((r=>{var n;const i=L_(r);t[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])})),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){const n=this.createHttpProvider(t,r);n&&(this.httpProviders[t]=n)}createHttpProvider(t,r){const n=r||q_(t,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${t}`);return new Tg(new E_(n,W_("disableProviderPing")))}}class iO{constructor(t){this.name="cip34",this.namespace=t.namespace,this.events=W_("events"),this.client=W_("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){this.httpProviders[t]||this.setHttpProvider(t,r),this.chainId=t,this.events.emit(C_.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter((t=>t.split(":")[1]===this.chainId.toString())).map((t=>t.split(":")[2])))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach((r=>{const n=this.getCardanoRPCUrl(r),i=L_(r);t[i]=this.createHttpProvider(i,n)})),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}getCardanoRPCUrl(t){const r=this.namespace.rpcMap;if(r)return r[t]}setHttpProvider(t,r){const n=this.createHttpProvider(t,r);n&&(this.httpProviders[t]=n)}createHttpProvider(t,r){const n=r||this.getCardanoRPCUrl(t);if(!n)throw new Error(`No RPC url provided for chainId: ${t}`);return new Tg(new E_(n,W_("disableProviderPing")))}}class eO{constructor(t){this.name="elrond",this.namespace=t.namespace,this.events=W_("events"),this.client=W_("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){this.httpProviders[t]||this.setHttpProvider(t,r),this.chainId=t,this.events.emit(C_.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter((t=>t.split(":")[1]===this.chainId.toString())).map((t=>t.split(":")[2])))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach((r=>{var n;const i=L_(r);t[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])})),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){const n=this.createHttpProvider(t,r);n&&(this.httpProviders[t]=n)}createHttpProvider(t,r){const n=r||q_(t,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${t}`);return new Tg(new E_(n,W_("disableProviderPing")))}}class sO{constructor(t){this.name="multiversx",this.namespace=t.namespace,this.events=W_("events"),this.client=W_("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){this.httpProviders[t]||this.setHttpProvider(t,r),this.chainId=t,this.events.emit(C_.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter((t=>t.split(":")[1]===this.chainId.toString())).map((t=>t.split(":")[2])))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach((r=>{var n;const i=L_(r);t[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])})),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){const n=this.createHttpProvider(t,r);n&&(this.httpProviders[t]=n)}createHttpProvider(t,r){const n=r||q_(t,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${t}`);return new Tg(new E_(n,W_("disableProviderPing")))}}class oO{constructor(t){this.name="near",this.namespace=t.namespace,this.events=W_("events"),this.client=W_("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){if(this.chainId=t,!this.httpProviders[t]){const n=r||q_(`${this.name}:${t}`,this.namespace);if(!n)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,n)}this.events.emit(C_.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const t=this.namespace.accounts;return t?t.filter((t=>t.split(":")[1]===this.chainId.toString())).map((t=>t.split(":")[2]))||[]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach((r=>{var n;t[r]=this.createHttpProvider(r,(n=this.namespace.rpcMap)==null?void 0:n[r])})),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){const n=this.createHttpProvider(t,r);n&&(this.httpProviders[t]=n)}createHttpProvider(t,r){const n=r||q_(t,this.namespace);return typeof n>"u"?void 0:new Tg(new E_(n,W_("disableProviderPing")))}}var aO=Object.defineProperty,uO=Object.defineProperties,hO=Object.getOwnPropertyDescriptors,fO=Object.getOwnPropertySymbols,cO=Object.prototype.hasOwnProperty,lO=Object.prototype.propertyIsEnumerable,dO=(t,r,n)=>r in t?aO(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n,vO=(t,r)=>{for(var n in r||(r={}))cO.call(r,n)&&dO(t,n,r[n]);if(fO)for(var n of fO(r))lO.call(r,n)&&dO(t,n,r[n]);return t},wO=(t,r)=>uO(t,hO(r));class pO{constructor(t){this.events=new n,this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=t,this.logger=typeof t?.logger<"u"&&typeof t?.logger!="string"?t.logger:Ow(lp({level:t?.logger||M_})),this.disableProviderPing=t?.disableProviderPing||!1}static async init(t){const r=new pO(t);return await r.initialize(),r}async request(t,r,n){const[i,e]=this.validateChain(r);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(i).request({request:vO({},t),chainId:`${i}:${e}`,topic:this.session.topic,expiry:n})}sendAsync(t,r,n,i){const e=(new Date).getTime();this.request(t,n,i).then((t=>r(null,wg(e,t)))).catch((t=>r(t,void 0)))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var t;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(t=this.session)==null?void 0:t.topic,reason:Fl("USER_DISCONNECTED")}),await this.cleanup()}async connect(t){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(t),await this.cleanupPendingPairings(),!t.skipPairing)return await this.pair(t.pairingTopic)}async authenticate(t){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(t),await this.cleanupPendingPairings();const{uri:r,response:n}=await this.client.authenticate(t);r&&(this.uri=r,this.events.emit("display_uri",r));const i=await n();if(this.session=i.session,this.session){const t=V_(this.session.namespaces);this.namespaces=G_(this.namespaces,t),this.persist("namespaces",this.namespaces),this.onConnect()}return i}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}removeListener(t,r){this.events.removeListener(t,r)}off(t,r){this.events.off(t,r)}get isWalletConnect(){return!0}async pair(t){this.shouldAbortPairingAttempt=!1;let r=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(r>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:n,approval:i}=await this.client.connect({pairingTopic:t,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});n&&(this.uri=n,this.events.emit("display_uri",n)),await i().then((t=>{this.session=t;const r=V_(t.namespaces);this.namespaces=G_(this.namespaces,r),this.persist("namespaces",this.namespaces)})).catch((t=>{if(t.message!==PM)throw t;r++}))}while(!this.session);return this.onConnect(),this.session}setDefaultChain(t,r){try{if(!this.session)return;const[n,i]=this.validateChain(t);this.getProvider(n).setDefaultChain(i,r)}catch(t){if(!/Please call connect/.test(t.message))throw t}}async cleanupPendingPairings(t={}){this.logger.info("Cleaning up inactive pairings...");const r=this.client.pairing.getAll();if(ql(r)){for(const n of r)t.deletePairings?this.client.core.expirer.set(n.topic,0):await this.client.core.relayer.subscriber.unsubscribe(n.topic);this.logger.info(`Inactive pairings cleared: ${r.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces"),this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const t=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[t]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await c_.init({logger:this.providerOpts.logger||M_,relayUrl:this.providerOpts.relayUrl||__,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const t=[...new Set(Object.keys(this.session.namespaces).map((t=>Rl(t))))];X_("client",this.client),X_("events",this.events),X_("disableProviderPing",this.disableProviderPing),t.forEach((t=>{if(!this.session)return;const r=H_(t,this.session),n=K_(r),i=G_(this.namespaces,this.optionalNamespaces),e=wO(vO({},i[t]),{accounts:r,chains:n});switch(t){case"eip155":this.rpcProviders[t]=new tO({namespace:e});break;case"solana":this.rpcProviders[t]=new rO({namespace:e});break;case"cosmos":this.rpcProviders[t]=new nO({namespace:e});break;case"polkadot":this.rpcProviders[t]=new Z_({namespace:e});break;case"cip34":this.rpcProviders[t]=new iO({namespace:e});break;case"elrond":this.rpcProviders[t]=new eO({namespace:e});break;case"multiversx":this.rpcProviders[t]=new sO({namespace:e});break;case"near":this.rpcProviders[t]=new oO({namespace:e});break}}))}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",(t=>{this.events.emit("session_ping",t)})),this.client.on("session_event",(t=>{const{params:r}=t,{event:n}=r;if(n.name==="accountsChanged"){const t=n.data;t&&ql(t)&&this.events.emit("accountsChanged",t.map(J_))}else if(n.name==="chainChanged"){const t=r.chainId,n=r.event.data,i=Rl(t),e=z_(t)!==z_(n)?`${i}:${z_(n)}`:t;this.onChainChanged(e)}else this.events.emit(n.name,n.data);this.events.emit("session_event",t)})),this.client.on("session_update",(({topic:t,params:r})=>{var n;const{namespaces:i}=r,e=(n=this.client)==null?void 0:n.session.get(t);this.session=wO(vO({},e),{namespaces:i}),this.onSessionUpdate(),this.events.emit("session_update",{topic:t,params:r})})),this.client.on("session_delete",(async t=>{await this.cleanup(),this.events.emit("session_delete",t),this.events.emit("disconnect",wO(vO({},Fl("USER_DISCONNECTED")),{data:t.topic}))})),this.on(C_.DEFAULT_CHAIN_CHANGED,(t=>{this.onChainChanged(t,!0)}))}getProvider(t){if(!this.rpcProviders[t])throw new Error(`Provider not found: ${t}`);return this.rpcProviders[t]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach((t=>{var r;this.getProvider(t).updateNamespace((r=this.session)==null?void 0:r.namespaces[t])}))}setNamespaces(t){const{namespaces:r,optionalNamespaces:n,sessionProperties:i}=t;r&&Object.keys(r).length&&(this.namespaces=r),n&&Object.keys(n).length&&(this.optionalNamespaces=n),this.sessionProperties=i,this.persist("namespaces",r),this.persist("optionalNamespaces",n)}validateChain(t){const[r,n]=t?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[r,n];if(r&&!Object.keys(this.namespaces||{}).map((t=>Rl(t))).includes(r))throw new Error(`Namespace '${r}' is not configured. Please call connect() first with namespace config.`);if(r&&n)return[r,n];const i=Rl(Object.keys(this.namespaces)[0]),e=this.rpcProviders[i].getDefaultChain();return[i,e]}async requestAccounts(){const[t]=this.validateChain();return await this.getProvider(t).requestAccounts()}onChainChanged(t,r=!1){if(!this.namespaces)return;const[n,i]=this.validateChain(t);i&&(r||this.getProvider(n).setDefaultChain(i),this.namespaces[n]?this.namespaces[n].defaultChain=i:this.namespaces[`${n}:${i}`]?this.namespaces[`${n}:${i}`].defaultChain=i:this.namespaces[`${n}:${i}`]={defaultChain:i},this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",i))}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,this.persist("namespaces",void 0),this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),await this.cleanupPendingPairings({deletePairings:!0})}persist(t,r){this.client.core.storage.setItem(`${S_}/${t}`,r)}async getFromStore(t){return await this.client.core.storage.getItem(`${S_}/${t}`)}}const yO=pO;const bO="wc",gO="ethereum_provider",mO=`${bO}@2:${gO}:`,AO="https://rpc.walletconnect.com/v1/",EO=["eth_sendTransaction","personal_sign"],MO=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],_O=["chainChanged","accountsChanged"],OO=["chainChanged","accountsChanged","message","disconnect","connect"];var IO=Object.defineProperty,SO=Object.defineProperties,NO=Object.getOwnPropertyDescriptors,CO=Object.getOwnPropertySymbols,jO=Object.prototype.hasOwnProperty,xO=Object.prototype.propertyIsEnumerable,PO=(t,r,n)=>r in t?IO(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n,TO=(t,r)=>{for(var n in r||(r={}))jO.call(r,n)&&PO(t,n,r[n]);if(CO)for(var n of CO(r))xO.call(r,n)&&PO(t,n,r[n]);return t},RO=(t,r)=>SO(t,NO(r));function DO(t){return Number(t[0].split(":")[1])}function UO(t){return`0x${t.toString(16)}`}function BO(t){const{chains:r,optionalChains:n,methods:i,optionalMethods:e,events:s,optionalEvents:o,rpcMap:a}=t;if(!ql(r))throw new Error("Invalid chains");const u={chains:r,methods:i||EO,events:s||_O,rpcMap:TO({},r.length?{[DO(r)]:a[DO(r)]}:{})},h=s?.filter((t=>!_O.includes(t))),f=i?.filter((t=>!EO.includes(t)));if(!n&&!o&&!e&&!(h!=null&&h.length)&&!(f!=null&&f.length))return{required:r.length?u:void 0};const c=h?.length&&f?.length||!n,l={chains:[...new Set(c?u.chains.concat(n||[]):n)],methods:[...new Set(u.methods.concat(e!=null&&e.length?e:MO))],events:[...new Set(u.events.concat(o!=null&&o.length?o:OO))],rpcMap:a};return{required:r.length?u:void 0,optional:n.length?l:void 0}}class kO{constructor(){this.events=new t.exports.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY=mO,this.on=(t,r)=>(this.events.on(t,r),this),this.once=(t,r)=>(this.events.once(t,r),this),this.removeListener=(t,r)=>(this.events.removeListener(t,r),this),this.off=(t,r)=>(this.events.off(t,r),this),this.parseAccount=t=>this.isCompatibleChainId(t)?this.parseAccountId(t).address:t,this.signer={},this.rpc={}}static async init(t){const r=new kO;return await r.initialize(t),r}async request(t,r){return await this.signer.request(t,this.formatChainId(this.chainId),r)}sendAsync(t,r,n){this.signer.sendAsync(t,r,this.formatChainId(this.chainId),n)}get connected(){return this.signer.client?this.signer.client.core.relayer.connected:!1}get connecting(){return this.signer.client?this.signer.client.core.relayer.connecting:!1}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(t){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(t);const{required:r,optional:n}=BO(this.rpc);try{const i=await new Promise((async(i,e)=>{var s;this.rpc.showQrModal&&((s=this.modal)==null||s.subscribeModal((t=>{!t.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),e(new Error("Connection request reset. Please try again.")))}))),await this.signer.connect(RO(TO({namespaces:TO({},r&&{[this.namespace]:r})},n&&{optionalNamespaces:{[this.namespace]:n}}),{pairingTopic:t?.pairingTopic})).then((t=>{i(t)})).catch((t=>{e(new Error(t.message))}))}));if(!i)return;const e=Je(i.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:e),this.setAccounts(e),this.events.emit("connect",{chainId:UO(this.chainId)})}catch(t){throw this.signer.logger.error(t),t}finally{this.modal&&this.modal.closeModal()}}async authenticate(t){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts({chains:t?.chains});try{const r=await new Promise((async(r,n)=>{var i;this.rpc.showQrModal&&((i=this.modal)==null||i.subscribeModal((t=>{!t.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),n(new Error("Connection request reset. Please try again.")))}))),await this.signer.authenticate(RO(TO({},t),{chains:this.rpc.chains})).then((t=>{r(t)})).catch((t=>{n(new Error(t.message))}))})),n=r.session;if(n){const t=Je(n.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:t),this.setAccounts(t),this.events.emit("connect",{chainId:UO(this.chainId)})}return r}catch(t){throw this.signer.logger.error(t),t}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",(t=>{const{params:r}=t,{event:n}=r;n.name==="accountsChanged"?(this.accounts=this.parseAccounts(n.data),this.events.emit("accountsChanged",this.accounts)):n.name==="chainChanged"?this.setChainId(this.formatChainId(n.data)):this.events.emit(n.name,n.data),this.events.emit("session_event",t)})),this.signer.on("chainChanged",(t=>{const r=parseInt(t);this.chainId=r,this.events.emit("chainChanged",UO(this.chainId)),this.persist()})),this.signer.on("session_update",(t=>{this.events.emit("session_update",t)})),this.signer.on("session_delete",(t=>{this.reset(),this.events.emit("session_delete",t),this.events.emit("disconnect",RO(TO({},Fl("USER_DISCONNECTED")),{data:t.topic,name:"USER_DISCONNECTED"}))})),this.signer.on("display_uri",(t=>{var r,n;this.rpc.showQrModal&&((r=this.modal)==null||r.closeModal(),(n=this.modal)==null||n.openModal({uri:t})),this.events.emit("display_uri",t)}))}switchEthereumChain(t){this.request({method:"wallet_switchEthereumChain",params:[{chainId:t.toString(16)}]})}isCompatibleChainId(t){return typeof t=="string"?t.startsWith(`${this.namespace}:`):!1}formatChainId(t){return`${this.namespace}:${t}`}parseChainId(t){return Number(t.split(":")[1])}setChainIds(t){const r=t.filter((t=>this.isCompatibleChainId(t))).map((t=>this.parseChainId(t)));r.length&&(this.chainId=r[0],this.events.emit("chainChanged",UO(this.chainId)),this.persist())}setChainId(t){if(this.isCompatibleChainId(t)){const r=this.parseChainId(t);this.chainId=r,this.switchEthereumChain(r)}}parseAccountId(t){const[r,n,i]=t.split(":");return{chainId:`${r}:${n}`,address:i}}setAccounts(t){this.accounts=t.filter((t=>this.parseChainId(this.parseAccountId(t).chainId)===this.chainId)).map((t=>this.parseAccountId(t).address)),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(t){var r,n;const i=(r=t?.chains)!=null?r:[],e=(n=t?.optionalChains)!=null?n:[],s=i.concat(e);if(!s.length)throw new Error("No chains specified in either `chains` or `optionalChains`");const o=i.length?t?.methods||EO:[],a=i.length?t?.events||_O:[],u=t?.optionalMethods||[],h=t?.optionalEvents||[],f=t?.rpcMap||this.buildRpcMap(s,t.projectId),c=t?.qrModalOptions||void 0;return{chains:i?.map((t=>this.formatChainId(t))),optionalChains:e.map((t=>this.formatChainId(t))),methods:o,events:a,optionalMethods:u,optionalEvents:h,rpcMap:f,showQrModal:!!(t!=null&&t.showQrModal),qrModalOptions:c,projectId:t.projectId,metadata:t.metadata}}buildRpcMap(t,r){const n={};return t.forEach((t=>{n[t]=this.getRpcUrl(t,r)})),n}async initialize(t){if(this.rpc=this.getRpcConfig(t),this.chainId=this.rpc.chains.length?DO(this.rpc.chains):DO(this.rpc.optionalChains),this.signer=await yO.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:t.disableProviderPing,relayUrl:t.relayUrl,storageOptions:t.storageOptions}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let t;try{const{WalletConnectModal:r}=await import("./p-2e86b76f.js").then((function(t){return t.i}));t=r}catch{throw new Error("To use QR modal, please install @walletconnect/modal package")}if(t)try{this.modal=new t(TO({projectId:this.rpc.projectId},this.rpc.qrModalOptions))}catch(t){throw this.signer.logger.error(t),new Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(t){if(!t)return;const{chains:r,optionalChains:n,rpcMap:i}=t;r&&ql(r)&&(this.rpc.chains=r.map((t=>this.formatChainId(t))),r.forEach((t=>{this.rpc.rpcMap[t]=i?.[t]||this.getRpcUrl(t)}))),n&&ql(n)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=n?.map((t=>this.formatChainId(t))),n.forEach((t=>{this.rpc.rpcMap[t]=i?.[t]||this.getRpcUrl(t)})))}getRpcUrl(t,r){var n;return((n=this.rpc.rpcMap)==null?void 0:n[t])||`${AO}?chainId=eip155:${t}&projectId=${r||this.rpc.projectId}`}async loadPersistedSession(){if(this.session)try{const t=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),r=this.session.namespaces[`${this.namespace}:${t}`]?this.session.namespaces[`${this.namespace}:${t}`]:this.session.namespaces[this.namespace];this.setChainIds(t?[this.formatChainId(t)]:r?.accounts),this.setAccounts(r?.accounts)}catch(t){this.signer.logger.error("Failed to load persisted session, clearing state..."),this.signer.logger.error(t),await this.disconnect().catch((t=>this.signer.logger.warn(t)))}}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(t){return typeof t=="string"||t instanceof String?[this.parseAccount(t)]:t.map((t=>this.parseAccount(t)))}}const $O={1:"https://ethereum.publicnode.com",5:"https://eth-goerli.g.alchemy.com/v2/yVhq9zPJorAWsw-F87fEabSUl7cCU6z4",11155111:"https://sepolia.infura.io/v3/9f79b2f9274344af90b8d4e244b580ef",137:"https://polygon-rpc.com/",80001:"https://polygon-mumbai.g.alchemy.com/v2/rVI6pOV4irVsrw20cJxc1fxK_1cSeiY0",56:"https://bsc-dataseed.binance.org/",97:"https://data-seed-prebsc-1-s1.binance.org:8545",43114:"https://api.avax.network/ext/bc/C/rpc",43113:"https://api.avax-test.network/ext/bc/C/rpc",250:"https://rpc.fantom.network/",25:"https://evm-cronos.crypto.org",338:"https://evm-t3.cronos.org",42161:"https://arb1.arbitrum.io/rpc",421613:"https://arb-goerli.g.alchemy.com/v2/nFrflomLgsQQL5NWjGileAVqIGGxZWce",10:"https://mainnet.optimism.io"};const FO=[1,5,11155111,137,80001,56,97,42161,10];const qO=async t=>await kO.init({projectId:"2ec7ead81da1226703ad789c0b2f7b30",methods:["eth_sendTransaction","eth_signTransaction","eth_sign","personal_sign","eth_signTypedData"],events:["chainChanged","accountsChanged"],showQrModal:!t,optionalChains:FO});export{$O as WC_DEFAULT_RPC_MAP,FO as WC_V2_DEFAULT_CHAINS,qO as getWalletConnectV2ProviderInstance};
//# sourceMappingURL=p-48754a7e.js.map