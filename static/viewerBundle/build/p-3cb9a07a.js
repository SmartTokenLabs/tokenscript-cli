import{c as t,a as e,r,g as n}from"./p-e52a38f8.js";var i=v;var s=p;var a=w;var o=[];var f=[];var c=typeof Uint8Array!=="undefined"?Uint8Array:Array;var u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var h=0,l=u.length;h<l;++h){o[h]=u[h];f[u.charCodeAt(h)]=h}f["-".charCodeAt(0)]=62;f["_".charCodeAt(0)]=63;function d(t){var e=t.length;if(e%4>0){throw new Error("Invalid string. Length must be a multiple of 4")}var r=t.indexOf("=");if(r===-1)r=e;var n=r===e?0:4-r%4;return[r,n]}function v(t){var e=d(t);var r=e[0];var n=e[1];return(r+n)*3/4-n}function b(t,e,r){return(e+r)*3/4-r}function p(t){var e;var r=d(t);var n=r[0];var i=r[1];var s=new c(b(t,n,i));var a=0;var o=i>0?n-4:n;var u;for(u=0;u<o;u+=4){e=f[t.charCodeAt(u)]<<18|f[t.charCodeAt(u+1)]<<12|f[t.charCodeAt(u+2)]<<6|f[t.charCodeAt(u+3)];s[a++]=e>>16&255;s[a++]=e>>8&255;s[a++]=e&255}if(i===2){e=f[t.charCodeAt(u)]<<2|f[t.charCodeAt(u+1)]>>4;s[a++]=e&255}if(i===1){e=f[t.charCodeAt(u)]<<10|f[t.charCodeAt(u+1)]<<4|f[t.charCodeAt(u+2)]>>2;s[a++]=e>>8&255;s[a++]=e&255}return s}function g(t){return o[t>>18&63]+o[t>>12&63]+o[t>>6&63]+o[t&63]}function y(t,e,r){var n;var i=[];for(var s=e;s<r;s+=3){n=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255);i.push(g(n))}return i.join("")}function w(t){var e;var r=t.length;var n=r%3;var i=[];var s=16383;for(var a=0,f=r-n;a<f;a+=s){i.push(y(t,a,a+s>f?f:a+s))}if(n===1){e=t[r-1];i.push(o[e>>2]+o[e<<4&63]+"==")}else if(n===2){e=(t[r-2]<<8)+t[r-1];i.push(o[e>>10]+o[e>>4&63]+o[e<<2&63]+"=")}return i.join("")}var m={byteLength:i,toByteArray:s,fromByteArray:a};
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var A=function(t,e,r,n,i){var s,a;var o=i*8-n-1;var f=(1<<o)-1;var c=f>>1;var u=-7;var h=r?i-1:0;var l=r?-1:1;var d=t[e+h];h+=l;s=d&(1<<-u)-1;d>>=-u;u+=o;for(;u>0;s=s*256+t[e+h],h+=l,u-=8){}a=s&(1<<-u)-1;s>>=-u;u+=n;for(;u>0;a=a*256+t[e+h],h+=l,u-=8){}if(s===0){s=1-c}else if(s===f){return a?NaN:(d?-1:1)*Infinity}else{a=a+Math.pow(2,n);s=s-c}return(d?-1:1)*a*Math.pow(2,s-n)};var E=function(t,e,r,n,i,s){var a,o,f;var c=s*8-i-1;var u=(1<<c)-1;var h=u>>1;var l=i===23?Math.pow(2,-24)-Math.pow(2,-77):0;var d=n?0:s-1;var v=n?1:-1;var b=e<0||e===0&&1/e<0?1:0;e=Math.abs(e);if(isNaN(e)||e===Infinity){o=isNaN(e)?1:0;a=u}else{a=Math.floor(Math.log(e)/Math.LN2);if(e*(f=Math.pow(2,-a))<1){a--;f*=2}if(a+h>=1){e+=l/f}else{e+=l*Math.pow(2,1-h)}if(e*f>=2){a++;f/=2}if(a+h>=u){o=0;a=u}else if(a+h>=1){o=(e*f-1)*Math.pow(2,i);a=a+h}else{o=e*Math.pow(2,h-1)*Math.pow(2,i);a=0}}for(;i>=8;t[r+d]=o&255,d+=v,o/=256,i-=8){}a=a<<i|o;c+=i;for(;c>0;t[r+d]=a&255,d+=v,a/=256,c-=8){}t[r+d-v]|=b*128};var k={read:A,write:E};var M=t((function(t,e){const r=typeof Symbol==="function"&&typeof Symbol["for"]==="function"?Symbol["for"]("nodejs.util.inspect.custom"):null;e.Buffer=a;e.SlowBuffer=g;e.INSPECT_MAX_BYTES=50;const n=2147483647;e.kMaxLength=n;a.TYPED_ARRAY_SUPPORT=i();if(!a.TYPED_ARRAY_SUPPORT&&typeof console!=="undefined"&&typeof console.error==="function"){console.error("This browser lacks typed array (Uint8Array) support which is required by "+"`buffer` v5.x. Use `buffer` v4.x if you require old browser support.")}function i(){try{const t=new Uint8Array(1);const e={foo:function(){return 42}};Object.setPrototypeOf(e,Uint8Array.prototype);Object.setPrototypeOf(t,e);return t.foo()===42}catch(t){return false}}Object.defineProperty(a.prototype,"parent",{enumerable:true,get:function(){if(!a.isBuffer(this))return undefined;return this.buffer}});Object.defineProperty(a.prototype,"offset",{enumerable:true,get:function(){if(!a.isBuffer(this))return undefined;return this.byteOffset}});function s(t){if(t>n){throw new RangeError('The value "'+t+'" is invalid for option "size"')}const e=new Uint8Array(t);Object.setPrototypeOf(e,a.prototype);return e}function a(t,e,r){if(typeof t==="number"){if(typeof e==="string"){throw new TypeError('The "string" argument must be of type string. Received type number')}return u(t)}return o(t,e,r)}a.poolSize=8192;function o(t,e,r){if(typeof t==="string"){return h(t,e)}if(ArrayBuffer.isView(t)){return d(t)}if(t==null){throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, "+"or Array-like Object. Received type "+typeof t)}if(st(t,ArrayBuffer)||t&&st(t.buffer,ArrayBuffer)){return v(t,e,r)}if(typeof SharedArrayBuffer!=="undefined"&&(st(t,SharedArrayBuffer)||t&&st(t.buffer,SharedArrayBuffer))){return v(t,e,r)}if(typeof t==="number"){throw new TypeError('The "value" argument must not be of type number. Received type number')}const n=t.valueOf&&t.valueOf();if(n!=null&&n!==t){return a.from(n,e,r)}const i=b(t);if(i)return i;if(typeof Symbol!=="undefined"&&Symbol.toPrimitive!=null&&typeof t[Symbol.toPrimitive]==="function"){return a.from(t[Symbol.toPrimitive]("string"),e,r)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, "+"or Array-like Object. Received type "+typeof t)}a.from=function(t,e,r){return o(t,e,r)};Object.setPrototypeOf(a.prototype,Uint8Array.prototype);Object.setPrototypeOf(a,Uint8Array);function f(t){if(typeof t!=="number"){throw new TypeError('"size" argument must be of type number')}else if(t<0){throw new RangeError('The value "'+t+'" is invalid for option "size"')}}function c(t,e,r){f(t);if(t<=0){return s(t)}if(e!==undefined){return typeof r==="string"?s(t).fill(e,r):s(t).fill(e)}return s(t)}a.alloc=function(t,e,r){return c(t,e,r)};function u(t){f(t);return s(t<0?0:p(t)|0)}a.allocUnsafe=function(t){return u(t)};a.allocUnsafeSlow=function(t){return u(t)};function h(t,e){if(typeof e!=="string"||e===""){e="utf8"}if(!a.isEncoding(e)){throw new TypeError("Unknown encoding: "+e)}const r=y(t,e)|0;let n=s(r);const i=n.write(t,e);if(i!==r){n=n.slice(0,i)}return n}function l(t){const e=t.length<0?0:p(t.length)|0;const r=s(e);for(let n=0;n<e;n+=1){r[n]=t[n]&255}return r}function d(t){if(st(t,Uint8Array)){const e=new Uint8Array(t);return v(e.buffer,e.byteOffset,e.byteLength)}return l(t)}function v(t,e,r){if(e<0||t.byteLength<e){throw new RangeError('"offset" is outside of buffer bounds')}if(t.byteLength<e+(r||0)){throw new RangeError('"length" is outside of buffer bounds')}let n;if(e===undefined&&r===undefined){n=new Uint8Array(t)}else if(r===undefined){n=new Uint8Array(t,e)}else{n=new Uint8Array(t,e,r)}Object.setPrototypeOf(n,a.prototype);return n}function b(t){if(a.isBuffer(t)){const e=p(t.length)|0;const r=s(e);if(r.length===0){return r}t.copy(r,0,0,e);return r}if(t.length!==undefined){if(typeof t.length!=="number"||at(t.length)){return s(0)}return l(t)}if(t.type==="Buffer"&&Array.isArray(t.data)){return l(t.data)}}function p(t){if(t>=n){throw new RangeError("Attempt to allocate Buffer larger than maximum "+"size: 0x"+n.toString(16)+" bytes")}return t|0}function g(t){if(+t!=t){t=0}return a.alloc(+t)}a.isBuffer=function t(e){return e!=null&&e._isBuffer===true&&e!==a.prototype};a.compare=function t(e,r){if(st(e,Uint8Array))e=a.from(e,e.offset,e.byteLength);if(st(r,Uint8Array))r=a.from(r,r.offset,r.byteLength);if(!a.isBuffer(e)||!a.isBuffer(r)){throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array')}if(e===r)return 0;let n=e.length;let i=r.length;for(let t=0,s=Math.min(n,i);t<s;++t){if(e[t]!==r[t]){n=e[t];i=r[t];break}}if(n<i)return-1;if(i<n)return 1;return 0};a.isEncoding=function t(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return true;default:return false}};a.concat=function t(e,r){if(!Array.isArray(e)){throw new TypeError('"list" argument must be an Array of Buffers')}if(e.length===0){return a.alloc(0)}let n;if(r===undefined){r=0;for(n=0;n<e.length;++n){r+=e[n].length}}const i=a.allocUnsafe(r);let s=0;for(n=0;n<e.length;++n){let t=e[n];if(st(t,Uint8Array)){if(s+t.length>i.length){if(!a.isBuffer(t))t=a.from(t);t.copy(i,s)}else{Uint8Array.prototype.set.call(i,t,s)}}else if(!a.isBuffer(t)){throw new TypeError('"list" argument must be an Array of Buffers')}else{t.copy(i,s)}s+=t.length}return i};function y(t,e){if(a.isBuffer(t)){return t.length}if(ArrayBuffer.isView(t)||st(t,ArrayBuffer)){return t.byteLength}if(typeof t!=="string"){throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. '+"Received type "+typeof t)}const r=t.length;const n=arguments.length>2&&arguments[2]===true;if(!n&&r===0)return 0;let i=false;for(;;){switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return tt(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return nt(t).length;default:if(i){return n?-1:tt(t).length}e=(""+e).toLowerCase();i=true}}}a.byteLength=y;function w(t,e,r){let n=false;if(e===undefined||e<0){e=0}if(e>this.length){return""}if(r===undefined||r>this.length){r=this.length}if(r<=0){return""}r>>>=0;e>>>=0;if(r<=e){return""}if(!t)t="utf8";while(true){switch(t){case"hex":return j(this,e,r);case"utf8":case"utf-8":return T(this,e,r);case"ascii":return N(this,e,r);case"latin1":case"binary":return U(this,e,r);case"base64":return I(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase();n=true}}}a.prototype._isBuffer=true;function A(t,e,r){const n=t[e];t[e]=t[r];t[r]=n}a.prototype.swap16=function t(){const e=this.length;if(e%2!==0){throw new RangeError("Buffer size must be a multiple of 16-bits")}for(let t=0;t<e;t+=2){A(this,t,t+1)}return this};a.prototype.swap32=function t(){const e=this.length;if(e%4!==0){throw new RangeError("Buffer size must be a multiple of 32-bits")}for(let t=0;t<e;t+=4){A(this,t,t+3);A(this,t+1,t+2)}return this};a.prototype.swap64=function t(){const e=this.length;if(e%8!==0){throw new RangeError("Buffer size must be a multiple of 64-bits")}for(let t=0;t<e;t+=8){A(this,t,t+7);A(this,t+1,t+6);A(this,t+2,t+5);A(this,t+3,t+4)}return this};a.prototype.toString=function t(){const e=this.length;if(e===0)return"";if(arguments.length===0)return T(this,0,e);return w.apply(this,arguments)};a.prototype.toLocaleString=a.prototype.toString;a.prototype.equals=function t(e){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(this===e)return true;return a.compare(this,e)===0};a.prototype.inspect=function t(){let r="";const n=e.INSPECT_MAX_BYTES;r=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim();if(this.length>n)r+=" ... ";return"<Buffer "+r+">"};if(r){a.prototype[r]=a.prototype.inspect}a.prototype.compare=function t(e,r,n,i,s){if(st(e,Uint8Array)){e=a.from(e,e.offset,e.byteLength)}if(!a.isBuffer(e)){throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. '+"Received type "+typeof e)}if(r===undefined){r=0}if(n===undefined){n=e?e.length:0}if(i===undefined){i=0}if(s===undefined){s=this.length}if(r<0||n>e.length||i<0||s>this.length){throw new RangeError("out of range index")}if(i>=s&&r>=n){return 0}if(i>=s){return-1}if(r>=n){return 1}r>>>=0;n>>>=0;i>>>=0;s>>>=0;if(this===e)return 0;let o=s-i;let f=n-r;const c=Math.min(o,f);const u=this.slice(i,s);const h=e.slice(r,n);for(let t=0;t<c;++t){if(u[t]!==h[t]){o=u[t];f=h[t];break}}if(o<f)return-1;if(f<o)return 1;return 0};function E(t,e,r,n,i){if(t.length===0)return-1;if(typeof r==="string"){n=r;r=0}else if(r>2147483647){r=2147483647}else if(r<-2147483648){r=-2147483648}r=+r;if(at(r)){r=i?0:t.length-1}if(r<0)r=t.length+r;if(r>=t.length){if(i)return-1;else r=t.length-1}else if(r<0){if(i)r=0;else return-1}if(typeof e==="string"){e=a.from(e,n)}if(a.isBuffer(e)){if(e.length===0){return-1}return M(t,e,r,n,i)}else if(typeof e==="number"){e=e&255;if(typeof Uint8Array.prototype.indexOf==="function"){if(i){return Uint8Array.prototype.indexOf.call(t,e,r)}else{return Uint8Array.prototype.lastIndexOf.call(t,e,r)}}return M(t,[e],r,n,i)}throw new TypeError("val must be string, number or Buffer")}function M(t,e,r,n,i){let s=1;let a=t.length;let o=e.length;if(n!==undefined){n=String(n).toLowerCase();if(n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le"){if(t.length<2||e.length<2){return-1}s=2;a/=2;o/=2;r/=2}}function f(t,e){if(s===1){return t[e]}else{return t.readUInt16BE(e*s)}}let c;if(i){let n=-1;for(c=r;c<a;c++){if(f(t,c)===f(e,n===-1?0:c-n)){if(n===-1)n=c;if(c-n+1===o)return n*s}else{if(n!==-1)c-=c-n;n=-1}}}else{if(r+o>a)r=a-o;for(c=r;c>=0;c--){let r=true;for(let n=0;n<o;n++){if(f(t,c+n)!==f(e,n)){r=false;break}}if(r)return c}}return-1}a.prototype.includes=function t(e,r,n){return this.indexOf(e,r,n)!==-1};a.prototype.indexOf=function t(e,r,n){return E(this,e,r,n,true)};a.prototype.lastIndexOf=function t(e,r,n){return E(this,e,r,n,false)};function B(t,e,r,n){r=Number(r)||0;const i=t.length-r;if(!n){n=i}else{n=Number(n);if(n>i){n=i}}const s=e.length;if(n>s/2){n=s/2}let a;for(a=0;a<n;++a){const n=parseInt(e.substr(a*2,2),16);if(at(n))return a;t[r+a]=n}return a}function S(t,e,r,n){return it(tt(e,t.length-r),t,r,n)}function C(t,e,r,n){return it(et(e),t,r,n)}function x(t,e,r,n){return it(nt(e),t,r,n)}function P(t,e,r,n){return it(rt(e,t.length-r),t,r,n)}a.prototype.write=function t(e,r,n,i){if(r===undefined){i="utf8";n=this.length;r=0}else if(n===undefined&&typeof r==="string"){i=r;n=this.length;r=0}else if(isFinite(r)){r=r>>>0;if(isFinite(n)){n=n>>>0;if(i===undefined)i="utf8"}else{i=n;n=undefined}}else{throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported")}const s=this.length-r;if(n===undefined||n>s)n=s;if(e.length>0&&(n<0||r<0)||r>this.length){throw new RangeError("Attempt to write outside buffer bounds")}if(!i)i="utf8";let a=false;for(;;){switch(i){case"hex":return B(this,e,r,n);case"utf8":case"utf-8":return S(this,e,r,n);case"ascii":case"latin1":case"binary":return C(this,e,r,n);case"base64":return x(this,e,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,e,r,n);default:if(a)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase();a=true}}};a.prototype.toJSON=function t(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function I(t,e,r){if(e===0&&r===t.length){return m.fromByteArray(t)}else{return m.fromByteArray(t.slice(e,r))}}function T(t,e,r){r=Math.min(t.length,r);const n=[];let i=e;while(i<r){const e=t[i];let s=null;let a=e>239?4:e>223?3:e>191?2:1;if(i+a<=r){let r,n,o,f;switch(a){case 1:if(e<128){s=e}break;case 2:r=t[i+1];if((r&192)===128){f=(e&31)<<6|r&63;if(f>127){s=f}}break;case 3:r=t[i+1];n=t[i+2];if((r&192)===128&&(n&192)===128){f=(e&15)<<12|(r&63)<<6|n&63;if(f>2047&&(f<55296||f>57343)){s=f}}break;case 4:r=t[i+1];n=t[i+2];o=t[i+3];if((r&192)===128&&(n&192)===128&&(o&192)===128){f=(e&15)<<18|(r&63)<<12|(n&63)<<6|o&63;if(f>65535&&f<1114112){s=f}}}}if(s===null){s=65533;a=1}else if(s>65535){s-=65536;n.push(s>>>10&1023|55296);s=56320|s&1023}n.push(s);i+=a}return D(n)}const O=4096;function D(t){const e=t.length;if(e<=O){return String.fromCharCode.apply(String,t)}let r="";let n=0;while(n<e){r+=String.fromCharCode.apply(String,t.slice(n,n+=O))}return r}function N(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i){n+=String.fromCharCode(t[i]&127)}return n}function U(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i){n+=String.fromCharCode(t[i])}return n}function j(t,e,r){const n=t.length;if(!e||e<0)e=0;if(!r||r<0||r>n)r=n;let i="";for(let n=e;n<r;++n){i+=ot[t[n]]}return i}function R(t,e,r){const n=t.slice(e,r);let i="";for(let t=0;t<n.length-1;t+=2){i+=String.fromCharCode(n[t]+n[t+1]*256)}return i}a.prototype.slice=function t(e,r){const n=this.length;e=~~e;r=r===undefined?n:~~r;if(e<0){e+=n;if(e<0)e=0}else if(e>n){e=n}if(r<0){r+=n;if(r<0)r=0}else if(r>n){r=n}if(r<e)r=e;const i=this.subarray(e,r);Object.setPrototypeOf(i,a.prototype);return i};function F(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function t(e,r,n){e=e>>>0;r=r>>>0;if(!n)F(e,r,this.length);let i=this[e];let s=1;let a=0;while(++a<r&&(s*=256)){i+=this[e+a]*s}return i};a.prototype.readUintBE=a.prototype.readUIntBE=function t(e,r,n){e=e>>>0;r=r>>>0;if(!n){F(e,r,this.length)}let i=this[e+--r];let s=1;while(r>0&&(s*=256)){i+=this[e+--r]*s}return i};a.prototype.readUint8=a.prototype.readUInt8=function t(e,r){e=e>>>0;if(!r)F(e,1,this.length);return this[e]};a.prototype.readUint16LE=a.prototype.readUInt16LE=function t(e,r){e=e>>>0;if(!r)F(e,2,this.length);return this[e]|this[e+1]<<8};a.prototype.readUint16BE=a.prototype.readUInt16BE=function t(e,r){e=e>>>0;if(!r)F(e,2,this.length);return this[e]<<8|this[e+1]};a.prototype.readUint32LE=a.prototype.readUInt32LE=function t(e,r){e=e>>>0;if(!r)F(e,4,this.length);return(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};a.prototype.readUint32BE=a.prototype.readUInt32BE=function t(e,r){e=e>>>0;if(!r)F(e,4,this.length);return this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};a.prototype.readBigUInt64LE=ft((function t(e){e=e>>>0;_(e,"offset");const r=this[e];const n=this[e+7];if(r===undefined||n===undefined){Z(e,this.length-8)}const i=r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24;const s=this[++e]+this[++e]*2**8+this[++e]*2**16+n*2**24;return BigInt(i)+(BigInt(s)<<BigInt(32))}));a.prototype.readBigUInt64BE=ft((function t(e){e=e>>>0;_(e,"offset");const r=this[e];const n=this[e+7];if(r===undefined||n===undefined){Z(e,this.length-8)}const i=r*2**24+this[++e]*2**16+this[++e]*2**8+this[++e];const s=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n;return(BigInt(i)<<BigInt(32))+BigInt(s)}));a.prototype.readIntLE=function t(e,r,n){e=e>>>0;r=r>>>0;if(!n)F(e,r,this.length);let i=this[e];let s=1;let a=0;while(++a<r&&(s*=256)){i+=this[e+a]*s}s*=128;if(i>=s)i-=Math.pow(2,8*r);return i};a.prototype.readIntBE=function t(e,r,n){e=e>>>0;r=r>>>0;if(!n)F(e,r,this.length);let i=r;let s=1;let a=this[e+--i];while(i>0&&(s*=256)){a+=this[e+--i]*s}s*=128;if(a>=s)a-=Math.pow(2,8*r);return a};a.prototype.readInt8=function t(e,r){e=e>>>0;if(!r)F(e,1,this.length);if(!(this[e]&128))return this[e];return(255-this[e]+1)*-1};a.prototype.readInt16LE=function t(e,r){e=e>>>0;if(!r)F(e,2,this.length);const n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};a.prototype.readInt16BE=function t(e,r){e=e>>>0;if(!r)F(e,2,this.length);const n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};a.prototype.readInt32LE=function t(e,r){e=e>>>0;if(!r)F(e,4,this.length);return this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};a.prototype.readInt32BE=function t(e,r){e=e>>>0;if(!r)F(e,4,this.length);return this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};a.prototype.readBigInt64LE=ft((function t(e){e=e>>>0;_(e,"offset");const r=this[e];const n=this[e+7];if(r===undefined||n===undefined){Z(e,this.length-8)}const i=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(n<<24);return(BigInt(i)<<BigInt(32))+BigInt(r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)}));a.prototype.readBigInt64BE=ft((function t(e){e=e>>>0;_(e,"offset");const r=this[e];const n=this[e+7];if(r===undefined||n===undefined){Z(e,this.length-8)}const i=(r<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(i)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n)}));a.prototype.readFloatLE=function t(e,r){e=e>>>0;if(!r)F(e,4,this.length);return k.read(this,e,true,23,4)};a.prototype.readFloatBE=function t(e,r){e=e>>>0;if(!r)F(e,4,this.length);return k.read(this,e,false,23,4)};a.prototype.readDoubleLE=function t(e,r){e=e>>>0;if(!r)F(e,8,this.length);return k.read(this,e,true,52,8)};a.prototype.readDoubleBE=function t(e,r){e=e>>>0;if(!r)F(e,8,this.length);return k.read(this,e,false,52,8)};function L(t,e,r,n,i,s){if(!a.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<s)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function t(e,r,n,i){e=+e;r=r>>>0;n=n>>>0;if(!i){const t=Math.pow(2,8*n)-1;L(this,e,r,n,t,0)}let s=1;let a=0;this[r]=e&255;while(++a<n&&(s*=256)){this[r+a]=e/s&255}return r+n};a.prototype.writeUintBE=a.prototype.writeUIntBE=function t(e,r,n,i){e=+e;r=r>>>0;n=n>>>0;if(!i){const t=Math.pow(2,8*n)-1;L(this,e,r,n,t,0)}let s=n-1;let a=1;this[r+s]=e&255;while(--s>=0&&(a*=256)){this[r+s]=e/a&255}return r+n};a.prototype.writeUint8=a.prototype.writeUInt8=function t(e,r,n){e=+e;r=r>>>0;if(!n)L(this,e,r,1,255,0);this[r]=e&255;return r+1};a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function t(e,r,n){e=+e;r=r>>>0;if(!n)L(this,e,r,2,65535,0);this[r]=e&255;this[r+1]=e>>>8;return r+2};a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function t(e,r,n){e=+e;r=r>>>0;if(!n)L(this,e,r,2,65535,0);this[r]=e>>>8;this[r+1]=e&255;return r+2};a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function t(e,r,n){e=+e;r=r>>>0;if(!n)L(this,e,r,4,4294967295,0);this[r+3]=e>>>24;this[r+2]=e>>>16;this[r+1]=e>>>8;this[r]=e&255;return r+4};a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function t(e,r,n){e=+e;r=r>>>0;if(!n)L(this,e,r,4,4294967295,0);this[r]=e>>>24;this[r+1]=e>>>16;this[r+2]=e>>>8;this[r+3]=e&255;return r+4};function Q(t,e,r,n,i){Y(e,n,i,t,r,7);let s=Number(e&BigInt(4294967295));t[r++]=s;s=s>>8;t[r++]=s;s=s>>8;t[r++]=s;s=s>>8;t[r++]=s;let a=Number(e>>BigInt(32)&BigInt(4294967295));t[r++]=a;a=a>>8;t[r++]=a;a=a>>8;t[r++]=a;a=a>>8;t[r++]=a;return r}function H(t,e,r,n,i){Y(e,n,i,t,r,7);let s=Number(e&BigInt(4294967295));t[r+7]=s;s=s>>8;t[r+6]=s;s=s>>8;t[r+5]=s;s=s>>8;t[r+4]=s;let a=Number(e>>BigInt(32)&BigInt(4294967295));t[r+3]=a;a=a>>8;t[r+2]=a;a=a>>8;t[r+1]=a;a=a>>8;t[r]=a;return r+8}a.prototype.writeBigUInt64LE=ft((function t(e,r=0){return Q(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))}));a.prototype.writeBigUInt64BE=ft((function t(e,r=0){return H(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))}));a.prototype.writeIntLE=function t(e,r,n,i){e=+e;r=r>>>0;if(!i){const t=Math.pow(2,8*n-1);L(this,e,r,n,t-1,-t)}let s=0;let a=1;let o=0;this[r]=e&255;while(++s<n&&(a*=256)){if(e<0&&o===0&&this[r+s-1]!==0){o=1}this[r+s]=(e/a>>0)-o&255}return r+n};a.prototype.writeIntBE=function t(e,r,n,i){e=+e;r=r>>>0;if(!i){const t=Math.pow(2,8*n-1);L(this,e,r,n,t-1,-t)}let s=n-1;let a=1;let o=0;this[r+s]=e&255;while(--s>=0&&(a*=256)){if(e<0&&o===0&&this[r+s+1]!==0){o=1}this[r+s]=(e/a>>0)-o&255}return r+n};a.prototype.writeInt8=function t(e,r,n){e=+e;r=r>>>0;if(!n)L(this,e,r,1,127,-128);if(e<0)e=255+e+1;this[r]=e&255;return r+1};a.prototype.writeInt16LE=function t(e,r,n){e=+e;r=r>>>0;if(!n)L(this,e,r,2,32767,-32768);this[r]=e&255;this[r+1]=e>>>8;return r+2};a.prototype.writeInt16BE=function t(e,r,n){e=+e;r=r>>>0;if(!n)L(this,e,r,2,32767,-32768);this[r]=e>>>8;this[r+1]=e&255;return r+2};a.prototype.writeInt32LE=function t(e,r,n){e=+e;r=r>>>0;if(!n)L(this,e,r,4,2147483647,-2147483648);this[r]=e&255;this[r+1]=e>>>8;this[r+2]=e>>>16;this[r+3]=e>>>24;return r+4};a.prototype.writeInt32BE=function t(e,r,n){e=+e;r=r>>>0;if(!n)L(this,e,r,4,2147483647,-2147483648);if(e<0)e=4294967295+e+1;this[r]=e>>>24;this[r+1]=e>>>16;this[r+2]=e>>>8;this[r+3]=e&255;return r+4};a.prototype.writeBigInt64LE=ft((function t(e,r=0){return Q(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}));a.prototype.writeBigInt64BE=ft((function t(e,r=0){return H(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}));function G(t,e,r,n,i,s){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function K(t,e,r,n,i){e=+e;r=r>>>0;if(!i){G(t,e,r,4)}k.write(t,e,r,n,23,4);return r+4}a.prototype.writeFloatLE=function t(e,r,n){return K(this,e,r,true,n)};a.prototype.writeFloatBE=function t(e,r,n){return K(this,e,r,false,n)};function J(t,e,r,n,i){e=+e;r=r>>>0;if(!i){G(t,e,r,8)}k.write(t,e,r,n,52,8);return r+8}a.prototype.writeDoubleLE=function t(e,r,n){return J(this,e,r,true,n)};a.prototype.writeDoubleBE=function t(e,r,n){return J(this,e,r,false,n)};a.prototype.copy=function t(e,r,n,i){if(!a.isBuffer(e))throw new TypeError("argument should be a Buffer");if(!n)n=0;if(!i&&i!==0)i=this.length;if(r>=e.length)r=e.length;if(!r)r=0;if(i>0&&i<n)i=n;if(i===n)return 0;if(e.length===0||this.length===0)return 0;if(r<0){throw new RangeError("targetStart out of bounds")}if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");if(i>this.length)i=this.length;if(e.length-r<i-n){i=e.length-r+n}const s=i-n;if(this===e&&typeof Uint8Array.prototype.copyWithin==="function"){this.copyWithin(r,n,i)}else{Uint8Array.prototype.set.call(e,this.subarray(n,i),r)}return s};a.prototype.fill=function t(e,r,n,i){if(typeof e==="string"){if(typeof r==="string"){i=r;r=0;n=this.length}else if(typeof n==="string"){i=n;n=this.length}if(i!==undefined&&typeof i!=="string"){throw new TypeError("encoding must be a string")}if(typeof i==="string"&&!a.isEncoding(i)){throw new TypeError("Unknown encoding: "+i)}if(e.length===1){const t=e.charCodeAt(0);if(i==="utf8"&&t<128||i==="latin1"){e=t}}}else if(typeof e==="number"){e=e&255}else if(typeof e==="boolean"){e=Number(e)}if(r<0||this.length<r||this.length<n){throw new RangeError("Out of range index")}if(n<=r){return this}r=r>>>0;n=n===undefined?this.length:n>>>0;if(!e)e=0;let s;if(typeof e==="number"){for(s=r;s<n;++s){this[s]=e}}else{const t=a.isBuffer(e)?e:a.from(e,i);const o=t.length;if(o===0){throw new TypeError('The value "'+e+'" is invalid for argument "value"')}for(s=0;s<n-r;++s){this[s+r]=t[s%o]}}return this};const z={};function W(t,e,r){z[t]=class n extends r{constructor(){super();Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:true,configurable:true});this.name=`${this.name} [${t}]`;delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:true,enumerable:true,value:t,writable:true})}toString(){return`${this.name} [${t}]: ${this.message}`}}}W("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){if(t){return`${t} is outside of buffer bounds`}return"Attempt to access memory outside buffer bounds"}),RangeError);W("ERR_INVALID_ARG_TYPE",(function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`}),TypeError);W("ERR_OUT_OF_RANGE",(function(t,e,r){let n=`The value of "${t}" is out of range.`;let i=r;if(Number.isInteger(r)&&Math.abs(r)>2**32){i=q(String(r))}else if(typeof r==="bigint"){i=String(r);if(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32))){i=q(i)}i+="n"}n+=` It must be ${e}. Received ${i}`;return n}),RangeError);function q(t){let e="";let r=t.length;const n=t[0]==="-"?1:0;for(;r>=n+4;r-=3){e=`_${t.slice(r-3,r)}${e}`}return`${t.slice(0,r)}${e}`}function V(t,e,r){_(e,"offset");if(t[e]===undefined||t[e+r]===undefined){Z(e,t.length-(r+1))}}function Y(t,e,r,n,i,s){if(t>r||t<e){const n=typeof e==="bigint"?"n":"";let i;if(s>3){if(e===0||e===BigInt(0)){i=`>= 0${n} and < 2${n} ** ${(s+1)*8}${n}`}else{i=`>= -(2${n} ** ${(s+1)*8-1}${n}) and < 2 ** `+`${(s+1)*8-1}${n}`}}else{i=`>= ${e}${n} and <= ${r}${n}`}throw new z.ERR_OUT_OF_RANGE("value",i,t)}V(n,i,s)}function _(t,e){if(typeof t!=="number"){throw new z.ERR_INVALID_ARG_TYPE(e,"number",t)}}function Z(t,e,r){if(Math.floor(t)!==t){_(t,r);throw new z.ERR_OUT_OF_RANGE(r||"offset","an integer",t)}if(e<0){throw new z.ERR_BUFFER_OUT_OF_BOUNDS}throw new z.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${e}`,t)}const X=/[^+/0-9A-Za-z-_]/g;function $(t){t=t.split("=")[0];t=t.trim().replace(X,"");if(t.length<2)return"";while(t.length%4!==0){t=t+"="}return t}function tt(t,e){e=e||Infinity;let r;const n=t.length;let i=null;const s=[];for(let a=0;a<n;++a){r=t.charCodeAt(a);if(r>55295&&r<57344){if(!i){if(r>56319){if((e-=3)>-1)s.push(239,191,189);continue}else if(a+1===n){if((e-=3)>-1)s.push(239,191,189);continue}i=r;continue}if(r<56320){if((e-=3)>-1)s.push(239,191,189);i=r;continue}r=(i-55296<<10|r-56320)+65536}else if(i){if((e-=3)>-1)s.push(239,191,189)}i=null;if(r<128){if((e-=1)<0)break;s.push(r)}else if(r<2048){if((e-=2)<0)break;s.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;s.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else{throw new Error("Invalid code point")}}return s}function et(t){const e=[];for(let r=0;r<t.length;++r){e.push(t.charCodeAt(r)&255)}return e}function rt(t,e){let r,n,i;const s=[];for(let a=0;a<t.length;++a){if((e-=2)<0)break;r=t.charCodeAt(a);n=r>>8;i=r%256;s.push(i);s.push(n)}return s}function nt(t){return m.toByteArray($(t))}function it(t,e,r,n){let i;for(i=0;i<n;++i){if(i+r>=e.length||i>=t.length)break;e[i+r]=t[i]}return i}function st(t,e){return t instanceof e||t!=null&&t.constructor!=null&&t.constructor.name!=null&&t.constructor.name===e.name}function at(t){return t!==t}const ot=function(){const t="0123456789abcdef";const e=new Array(256);for(let r=0;r<16;++r){const n=r*16;for(let i=0;i<16;++i){e[n+i]=t[r]+t[i]}}return e}();function ft(t){return typeof BigInt==="undefined"?ct:t}function ct(){throw new Error("BigInt not supported")}}));var B=undefined&&undefined.__awaiter||function(t,e,r,n){function i(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,s){function a(t){try{f(n.next(t))}catch(t){s(t)}}function o(t){try{f(n["throw"](t))}catch(t){s(t)}}function f(t){t.done?r(t.value):i(t.value).then(a,o)}f((n=n.apply(t,e||[])).next())}))};function S(t,...e){if(!window.DISPLAY_DEBUG_LEVEL||t>parseInt(window.DISPLAY_DEBUG_LEVEL))return;console.log(...e)}const C=(t,e)=>{if(!t)throw new Error(e)};function x(t){if(typeof M.Buffer!=="undefined"){return M.Buffer.from(t)}else{return t}}const P=(t,e)=>{const r=Object.keys(t);const n=Object.keys(e);if(r.length!==n.length){return false}for(let n of r){if(typeof e[n]==="object"){if(JSON.stringify(t[n])!==JSON.stringify(e[n])){return false}}else if(t[n]!==e[n]){return false}}return true};const I=t=>{t=t.split("-").join("+").split("_").join("/").split(".").join("=");return Uint8Array.from(M.Buffer.from(t,"base64"))};const T=t=>{if(window.addEventListener){window.addEventListener("message",t,false)}else{window.attachEvent("onmessage",t)}};const O=t=>{if(window.removeEventListener){window.removeEventListener("message",t)}else{window.detachEvent("onmessage",t)}};const D=t=>new Promise((e=>{if(document.querySelector(t)){return e(document.querySelector(t))}const r=new MutationObserver((()=>{if(document.querySelector(t)){e(document.querySelector(t));r.disconnect()}}));r.observe(document.body,{childList:true,subtree:true})}));const N=(t,e,r,n,i=true,s=false)=>{var a;let o;if(typeof t==="object"){o=(a=t.message)!==null&&a!==void 0?a:"Unknown error type: "+JSON.stringify(t)}else{o=t}if(i)S(2,e+": "+o);if(r)r();if(s){throw new U(o,t)}return{type:e,message:t,data:n}};class U extends Error{constructor(t,e,r){super(t);this.originalError=e;this.code=r}}const j=(t,e)=>B(void 0,void 0,void 0,(function*(){try{const r=yield fetch(t);const n=r.status>=200&&r.status<=299;if(!n&&e===true){console.warn("token api request failed: ",t);return}if(n)return r.json();else throw new Error(`HTTP error! status: ${r.status}`)}catch(t){throw new Error(`HTTP error.`)}}));const R=(t,e=[],r=q)=>{if(r)for(let e of Array.from(t.keys())){if(e.indexOf(r)===0)t.delete(e)}for(let r of e){if(t.has(r))t.delete(r)}return t};const F=()=>{var t;const e=typeof window!=="undefined";const r=e&&window.navigator.userAgent.toLowerCase();const n=r&&/msie|trident/.test(r);const i=r&&r.indexOf("msie 9.0")>0;const s=r&&r.indexOf("edg/")>0;const a=r&&/chrome\/\d+/.test(r)&&!s;const o=r&&/phantomjs/.test(r);const f=r&&/firefox|fxios\/\d+/.test(r);const c=H()||Q();const u=!!window.navigator["brave"];const h=r&&r.indexOf("android")>0;const l=r&&/iphone|ipad|ipod|ios/.test(r);const d=r&&/\smac\s/.test(r);const v=r&&/windows/.test(r);let b=false;let p=window.matchMedia;if(p){let t=p("(pointer:coarse)");b=t.matches}let g=window.ethereum;if(typeof window.ethereum==="undefined"){g={isMetaMask:false,isAlphaWallet:false,isTrust:false,isStatusWallet:false,isGoWallet:false,isBraveWallet:false}}const y=b&&!!g.isAlphaWallet;const w=b&&!!g.isTrust;const m=b&&!!g.isStatusWallet;const A=b&&!!g.isGoWallet;const E=b&&!!g.isTrust&&!!g.isMetaMask;const k=!!navigator.userAgent.match(/\simToken\//);const M=b&&!!g.isMetaMask&&!w&&!u;return{iE:n,iE9:i,edge:s,chrome:a,phantomJS:o,fireFox:f,safari:c,android:h,iOS:l,mac:d,windows:v,desktop:((t=navigator.userAgent)===null||t===void 0?void 0:t.indexOf("Mobi"))===-1,touchDevice:b,metaMask:M,anyMetamask:!!g.isMetaMask&&!w&&!g.isBraveWallet,alphaWallet:y,mew:E,trust:w,goWallet:A,status:m,imToken:k,brave:u,braveAndroid:u&&h,braveIOS:u&&l,metaMaskAndroid:h&&M,alphaWalletAndroid:h&&y,mewAndroid:h&&E,imTokenAndroid:h&&k}};function L(){return!!window.navigator["brave"]}function Q(){let t=window.navigator.userAgent?window.navigator.userAgent.toLowerCase():"";return/ip(ad|od|hone)/i.test(t)&&/webkit/i.test(t)&&!/(crios|fxios|opios|mercury)/i.test(t)&&!L()}function H(){return!!window.safari}function G(){return H()||Q()}function K(){let t=F();return t.iOS||G()||L()||t.fireFox}function J(t){let e=F();switch(t){case"always":return true;case"never":return false;default:return L()||e.fireFox||e.iOS&&!G()}}var z=undefined&&undefined.__awaiter||function(t,e,r,n){function i(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,s){function a(t){try{f(n.next(t))}catch(t){s(t)}}function o(t){try{f(n["throw"](t))}catch(t){s(t)}}function f(t){t.done?r(t.value):i(t.value).then(a,o)}f((n=n.apply(t,e||[])).next())}))};var W;(function(t){t["COOKIE_CHECK"]="cookie-check";t["ERROR"]="error";t["SHOW_FRAME"]="show-frame"})(W||(W={}));const q="tn-";class V{constructor(){this.iframeStorageSupport=null;this.iframe=null;this.listenerSet=false}sendMessage(t,e=false,r=false){return z(this,void 0,void 0,(function*(){S(2,"Send request: ");S(2,t);if(r){this.sendRedirect(t,r);return}if(!e&&this.iframeStorageSupport===null){this.iframeStorageSupport=!K()}if(!e&&this.iframeStorageSupport!==false){try{return yield this.sendIframe(t)}catch(e){if(e==="IFRAME_STORAGE"){return this.sendPopup(t)}throw e}}else{return this.sendPopup(t)}}))}sendRedirect(t,e){let r=V.getUniqueEventId();const n=this.constructUrl(r,t);let i=`${n}&${q}redirect=true&${q}requestor=${encodeURIComponent(e)}`;S(2,`redirect from ${document.location.href} to ${i}`);document.location.href=i}sendIframe(t){return new Promise(((e,r)=>{let n=V.getUniqueEventId();let i=this.constructUrl(n,t);this.iframe=this.createIframe((()=>{this.listenerSet=false;this.removeModal();r(fP.USER_ABORT)}));if(!this.listenerSet){this.listenerSet=true;this.setResponseListener(n,t.origin,t.timeout,e,r,(()=>{this.listenerSet=false;this.removeModal()}))}this.iframe.src=i}))}sendPopup(t){return new Promise(((e,r)=>{let n=V.getUniqueEventId();let i=null;this.setResponseListener(n,t.origin,t.timeout,e,r,(()=>{if(i)i.close()}));i=this.openTab(this.constructUrl(n,t));if(!i||i.closed||typeof i.closed=="undefined"){r(fP.POPUP_BLOCKED);return}let s=setInterval((()=>{if(!i||i.closed){clearInterval(s);r(fP.USER_ABORT)}}),500)}))}setResponseListener(t,e,r,n,i,s){let a=false;let o=null;let f=r=>{if(r.data.target){return}let s=r.data;let f=new URL(e);if(s.evtid===t){if(f.origin===r.origin&&s.evt){S(2,"event response received");S(2,r.data);a=true;if(s.evt===W.ERROR){if(s.errors[0]==="IFRAME_STORAGE"){this.iframeStorageSupport=false;i("IFRAME_STORAGE")}else{i(new Error(s.errors.join(". ")))}}else if(s.evt===W.SHOW_FRAME){if(o)clearTimeout(o);if(this.iframe){let t=this.getModal();t.style.display="block";if(s.max_width){let e=t.querySelector(".modal-content-tn");if(e){e.style.maxWidth=s.max_width}}if(s.min_height){let e=t.querySelector("iframe");if(e){e.style.minHeight=s.min_height}}}return}else{n(s)}c()}else{S(2,"Does not match origin "+r.origin)}}};let c=()=>{if(o)clearTimeout(o);O(f);if(!window.NEGOTIATOR_DEBUG)s()};T(f);if(r===undefined)r=2e4;if(r>0)o=setTimeout((()=>{if(!a)i(new Error("Failed to receive response from window/iframe"));c()}),r)}getModal(t){let e=document.getElementById("modal-tn");if(e||!t)return e;e=document.createElement("div");e.id="modal-tn";e.className="modal-tn";e.style.display="none";e.innerHTML=`\n            <div class="modal-content-tn">\n                <div class="modal-header-tn">\n                    <span class="modal-close-tn">&times;</span>\n                </div>\n                <div class="modal-body-tn"></div>\n            </div>\n        `;document.body.appendChild(e);e.getElementsByClassName("modal-close-tn")[0].addEventListener("click",(()=>{t()}));return e}removeModal(){let t=this.getModal();if(t){t.style.display="none";t.remove()}}constructUrl(t,e){let r=`${e.origin}#${q}evtid=${t}&${q}action=${e.action}`;if(typeof e.data.token!=="undefined"){r+=`&${q}token=${encodeURIComponent(JSON.stringify(e.data.token))}`}for(let t in e.data){let n=e.data[t];if(t==="issuer"||t==="token")continue;if(!n)continue;if(n instanceof Array||n instanceof Object){r+=`&${q}${t}=${JSON.stringify(n)}`}else{if(t==="urlParams"){r+=`&${n}`}else{r+=`&${q}${t}=${n}`}}}return r}openTab(t){return window.open(t,"_blank")}createIframe(t){const e=document.createElement("iframe");e.setAttribute("allow","clipboard-read");let r=this.getModal(t);r.getElementsByClassName("modal-body-tn")[0].appendChild(e);return e}static getUniqueEventId(){return(new Date).getTime().toString()}}var Y=undefined&&undefined.__awaiter||function(t,e,r,n){function i(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,s){function a(t){try{f(n.next(t))}catch(t){s(t)}}function o(t){try{f(n["throw"](t))}catch(t){s(t)}}function f(t){t.done?r(t.value):i(t.value).then(a,o)}f((n=n.apply(t,e||[])).next())}))};var _;(function(t){t["MAGIC_URL"]="magic-url";t["GET_ISSUER_TOKENS"]="get-issuer-tokens";t["GET_PROOF"]="get-proof";t["GET_PROOF_CALLBACK"]="proof-callback";t["EMAIL_ATTEST_CALLBACK"]="email-callback"})(_||(_={}));var Z;(function(t){t["ISSUER_TOKENS"]="issuer-tokens";t["PROOF"]="proof"})(Z||(Z={}));class X{constructor(){this.core=new V}sendMessage(t,e=false,r,n=false){return Y(this,void 0,void 0,(function*(){try{return yield this.core.sendMessage(t,e,n)}catch(n){if(n===fP.POPUP_BLOCKED){if(r){return this.handleUserClose(t,r,e)}else{n=this.createNamedError(n,cP.POPUP_BLOCKED)}}if(n===fP.USER_ABORT){n=this.createNamedError(n,cP.USER_ABORT)}throw n}}))}handleUserClose(t,e,r){return new Promise(((n,i)=>{e.showError("Mmmmm looks like your popup blocker is getting in the way.");e.setErrorRetryCallback((()=>{this.core.sendMessage(t,r).then((t=>{n(t)})).catch((t=>{if(t===fP.POPUP_BLOCKED){t=this.createNamedError(t,cP.POPUP_BLOCKED)}else if(t===fP.USER_ABORT){t=this.createNamedError(t,cP.USER_ABORT)}i(t)}))}))}))}createNamedError(t,e){let r=new Error(e);r.name=t;return r}}class ${constructor(t,e,r,n){this.client=t;this.ui=e;this.viewContainer=r;this.params=n;this.init()}init(){}update(t){this.params=Object.assign(Object.assign({},this.params),t);this.render()}}var tt=undefined&&undefined.__awaiter||function(t,e,r,n){function i(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,s){function a(t){try{f(n.next(t))}catch(t){s(t)}}function o(t){try{f(n["throw"](t))}catch(t){s(t)}}function f(t){t.done?r(t.value):i(t.value).then(a,o)}f((n=n.apply(t,e||[])).next())}))};class et extends ${render(){this.viewContainer.innerHTML=this.renderMainTemplate();this.viewContainer.querySelector(".opening-btn-tn").addEventListener("click",this.goToWalletSelection.bind(this))}renderMainTemplate(){var t;return`\n\t\t\t<div class="opening-content-view-tn">\n              <div class="brand-tn"></div>\n              <div class="inner-content-tn">\n                <div class="inner-content-block-tn">\n                  <button class="opening-btn-tn" aria-label="Start connecting your tokens">\n\t\t\t\t  ${(t=this.params.options.openingButtonText)!==null&&t!==void 0?t:"Let's go!"}\n\t\t\t\t  </button>\n                  <div class="opening-heading-tn">${this.params.options.openingHeading}</div>\n                </div>\n              </div>\n            </div>\n\t\t`}goToWalletSelection(){return tt(this,void 0,void 0,(function*(){this.ui.showLoaderDelayed(["Initializing wallet.."],500);const t={viewTransition:"slide-in-right"};if(yield this.ui.canSkipWalletSelection()){this.client.enrichTokenLookupDataOnChainTokens();this.ui.updateUI("main",{viewName:"main"},t)}else{this.ui.updateUI("wallet",{viewName:"main"},t)}this.ui.dismissLoader()}))}}class rt{constructor(t,e){this.autoEnableTokens=t;this.tokenPersistenceTTL=e;this.currentIssuers={};this.tokenData={};this.tokenLookup={};this.selectedTokens={};if(this.tokenPersistenceTTL>0)this.loadTokenStore()}loadTokenStore(){const t=JSON.parse(localStorage.getItem(rt.LOCAL_STORAGE_KEY));if(!t)return;for(let e in t.tokenLookup){const r=t.tokenLookup[e];if(r.timestamp+this.tokenPersistenceTTL*1e3>Date.now()){this.tokenLookup[e]=r}}for(let e in t.tokenData){const r=t.tokenData[e];if(r.timestamp+this.tokenPersistenceTTL*1e3>Date.now()){this.tokenData[e]=r}}this.saveTokenStore()}saveTokenStore(){if(this.tokenPersistenceTTL>0)localStorage.setItem(rt.LOCAL_STORAGE_KEY,JSON.stringify({tokenLookup:this.tokenLookup,tokenData:this.tokenData}))}updateIssuers(t){if(Object.keys(this.currentIssuers).length>0){this.selectedTokens={}}this.prePopulateTokenLookupStore(t)}clearCachedTokens(t){for(let e in this.tokenData){if(t!==undefined&&t!==this.tokenLookup[e].onChain)continue;delete this.tokenData[e]}this.selectedTokens={};this.saveTokenStore()}hasOnChainTokens(){for(let t in this.currentIssuers){if(this.currentIssuers[t])return true}return false}getCurrentIssuers(t){let e={};for(let r in this.currentIssuers){if(t===undefined||t===this.currentIssuers[r])e[r]=this.tokenLookup[r]}return e}getCurrentTokens(t){var e,r;let n={};for(let i in this.currentIssuers){if(t===undefined||t===this.currentIssuers[i])n[i]=(r=(e=this.tokenData[i])===null||e===void 0?void 0:e.tokens)!==null&&r!==void 0?r:[]}return n}getTotalTokenCount(t){const e=this.getCurrentTokens(t);return Object.keys(e).reduce(((t,r)=>t+e[r].length),0)}hasUnloadedIssuers(){let t=this.getCurrentIssuers(true);for(let e in t){if(!t[e].title)return true}return false}hasUnloadedTokens(){for(let t of Object.values(this.getCurrentTokens())){if(t.length===0)return true}return false}getIssuerTokens(t){var e;if(this.tokenData[t])return(e=this.tokenData[t].tokens)!==null&&e!==void 0?e:[];return null}setTokens(t,e){this.tokenData[t]={timestamp:Date.now(),tokens:e};this.saveTokenStore();if(this.autoEnableTokens)this.selectedTokens[t]={tokens:e}}getSelectedTokens(){return this.selectedTokens}setSelectedTokens(t){this.selectedTokens=t}prePopulateTokenLookupStore(t){let e={};t.forEach(((t,r)=>{var n;if(!t.collectionID)return;if(t.onChain===undefined)t.onChain=true;t.collectionID=this.formatCollectionID(t.collectionID);if(e[t.collectionID]!==undefined){S(1,`duplicate collectionID key ${t.collectionID}, use unique keys per collection.`);return}if("chain"in t)t.chain=this.formatCollectionChain(t.chain);if(this.tokenData[t.collectionID]!==undefined){if(this.autoEnableTokens&&((n=this.tokenData[t.collectionID].tokens)===null||n===void 0?void 0:n.length))this.selectedTokens[t.collectionID]={tokens:this.tokenData[t.collectionID].tokens}}if(!this.tokenLookup[t.collectionID])this.updateTokenLookupStore(t.collectionID,t,false);e[t.collectionID]=t.onChain}));this.currentIssuers=e}updateTokenLookupStore(t,e,r=true){this.tokenLookup[t]=Object.assign(Object.assign(Object.assign({},this.tokenLookup[t]),e),{timestamp:Date.now()});if(r)this.saveTokenStore()}formatCollectionChain(t){return t.toLowerCase()}formatCollectionID(t){let e=t;if(/[A-Z]+/g.test(t)||/\s+/g.test(t)){e=t.replace(/\s+/g,"-").toLowerCase();S(1,`Token Negotiator: Spaces or capital letters found in collectionID definition ${t}, this has been re-formatted to ${e}`);t=e}return t}}rt.LOCAL_STORAGE_KEY="tn-tokenStore";class nt{constructor(t,e){this.params={};this.viewContainer=t;this.params=e}render(){let t=this.params.src;let e;if(t&&t!=="undefined"){e=document.createElement("img");e.loading="lazy";e.addEventListener("load",(t=>{this.onLoad(t)}));e.addEventListener("error",(t=>{this.onError(t)}));e.src=t}else{e=this.createAvatar();this.viewContainer.classList.remove("shimmer-tn")}this.viewContainer.appendChild(e)}onLoad(t){this.viewContainer.classList.remove("shimmer-tn")}onError(t){this.viewContainer.innerHTML="";this.viewContainer.appendChild(this.createAvatar());this.viewContainer.classList.remove("shimmer-tn")}createAvatar(){let t=document.createElement("img");t.src=this.generateAvatar(this.params.title);return t}generateAvatar(t){const e=document.createElement("canvas");const r=e.getContext("2d");e.width=200;e.height=200;if(!r)return"";r.fillStyle=this.getRandomBackgroundColor();r.fillRect(0,0,e.width,e.height);r.font="bold 100px 'Arial', sans-serif";r.fillStyle="#fff";r.textAlign="center";r.textBaseline="middle";let n=t.split(" ");let i="";for(let t=0;i.length<2&&t<n.length;t++){let e=n[t].split("");if(e.length)i+=e[0].toUpperCase()}r.fillText(i,e.width/2,e.height/2);return e.toDataURL("image/png")}getRandomBackgroundColor(){return"#0029a7"}}var it=t((function(t){(function(t,e){function n(t,e){if(!t)throw new Error(e||"Assertion failed")}function i(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype;t.prototype=new r;t.prototype.constructor=t}function s(t,e,r){if(s.isBN(t)){return t}this.negative=0;this.words=null;this.length=0;this.red=null;if(t!==null){if(e==="le"||e==="be"){r=e;e=10}this._init(t||0,e||10,r||"be")}}if(typeof t==="object"){t.exports=s}else{e.BN=s}s.BN=s;s.wordSize=26;var a;try{if(typeof window!=="undefined"&&typeof window.Buffer!=="undefined"){a=window.Buffer}else{a=r.Buffer}}catch(t){}s.isBN=function t(e){if(e instanceof s){return true}return e!==null&&typeof e==="object"&&e.constructor.wordSize===s.wordSize&&Array.isArray(e.words)};s.max=function t(e,r){if(e.cmp(r)>0)return e;return r};s.min=function t(e,r){if(e.cmp(r)<0)return e;return r};s.prototype._init=function t(e,r,i){if(typeof e==="number"){return this._initNumber(e,r,i)}if(typeof e==="object"){return this._initArray(e,r,i)}if(r==="hex"){r=16}n(r===(r|0)&&r>=2&&r<=36);e=e.toString().replace(/\s+/g,"");var s=0;if(e[0]==="-"){s++;this.negative=1}if(s<e.length){if(r===16){this._parseHex(e,s,i)}else{this._parseBase(e,r,s);if(i==="le"){this._initArray(this.toArray(),r,i)}}}};s.prototype._initNumber=function t(e,r,i){if(e<0){this.negative=1;e=-e}if(e<67108864){this.words=[e&67108863];this.length=1}else if(e<4503599627370496){this.words=[e&67108863,e/67108864&67108863];this.length=2}else{n(e<9007199254740992);this.words=[e&67108863,e/67108864&67108863,1];this.length=3}if(i!=="le")return;this._initArray(this.toArray(),r,i)};s.prototype._initArray=function t(e,r,i){n(typeof e.length==="number");if(e.length<=0){this.words=[0];this.length=1;return this}this.length=Math.ceil(e.length/3);this.words=new Array(this.length);for(var s=0;s<this.length;s++){this.words[s]=0}var a,o;var f=0;if(i==="be"){for(s=e.length-1,a=0;s>=0;s-=3){o=e[s]|e[s-1]<<8|e[s-2]<<16;this.words[a]|=o<<f&67108863;this.words[a+1]=o>>>26-f&67108863;f+=24;if(f>=26){f-=26;a++}}}else if(i==="le"){for(s=0,a=0;s<e.length;s+=3){o=e[s]|e[s+1]<<8|e[s+2]<<16;this.words[a]|=o<<f&67108863;this.words[a+1]=o>>>26-f&67108863;f+=24;if(f>=26){f-=26;a++}}}return this._strip()};function o(t,e){var r=t.charCodeAt(e);if(r>=48&&r<=57){return r-48}else if(r>=65&&r<=70){return r-55}else if(r>=97&&r<=102){return r-87}else{n(false,"Invalid character in "+t)}}function f(t,e,r){var n=o(t,r);if(r-1>=e){n|=o(t,r-1)<<4}return n}s.prototype._parseHex=function t(e,r,n){this.length=Math.ceil((e.length-r)/6);this.words=new Array(this.length);for(var i=0;i<this.length;i++){this.words[i]=0}var s=0;var a=0;var o;if(n==="be"){for(i=e.length-1;i>=r;i-=2){o=f(e,r,i)<<s;this.words[a]|=o&67108863;if(s>=18){s-=18;a+=1;this.words[a]|=o>>>26}else{s+=8}}}else{var c=e.length-r;for(i=c%2===0?r+1:r;i<e.length;i+=2){o=f(e,r,i)<<s;this.words[a]|=o&67108863;if(s>=18){s-=18;a+=1;this.words[a]|=o>>>26}else{s+=8}}}this._strip()};function c(t,e,r,i){var s=0;var a=0;var o=Math.min(t.length,r);for(var f=e;f<o;f++){var c=t.charCodeAt(f)-48;s*=i;if(c>=49){a=c-49+10}else if(c>=17){a=c-17+10}else{a=c}n(c>=0&&a<i,"Invalid character");s+=a}return s}s.prototype._parseBase=function t(e,r,n){this.words=[0];this.length=1;for(var i=0,s=1;s<=67108863;s*=r){i++}i--;s=s/r|0;var a=e.length-n;var o=a%i;var f=Math.min(a,a-o)+n;var u=0;for(var h=n;h<f;h+=i){u=c(e,h,h+i,r);this.imuln(s);if(this.words[0]+u<67108864){this.words[0]+=u}else{this._iaddn(u)}}if(o!==0){var l=1;u=c(e,h,e.length,r);for(h=0;h<o;h++){l*=r}this.imuln(l);if(this.words[0]+u<67108864){this.words[0]+=u}else{this._iaddn(u)}}this._strip()};s.prototype.copy=function t(e){e.words=new Array(this.length);for(var r=0;r<this.length;r++){e.words[r]=this.words[r]}e.length=this.length;e.negative=this.negative;e.red=this.red};function u(t,e){t.words=e.words;t.length=e.length;t.negative=e.negative;t.red=e.red}s.prototype._move=function t(e){u(e,this)};s.prototype.clone=function t(){var e=new s(null);this.copy(e);return e};s.prototype._expand=function t(e){while(this.length<e){this.words[this.length++]=0}return this};s.prototype._strip=function t(){while(this.length>1&&this.words[this.length-1]===0){this.length--}return this._normSign()};s.prototype._normSign=function t(){if(this.length===1&&this.words[0]===0){this.negative=0}return this};if(typeof Symbol!=="undefined"&&typeof Symbol.for==="function"){try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=h}catch(t){s.prototype.inspect=h}}else{s.prototype.inspect=h}function h(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var l=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"];var d=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5];var v=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function t(e,r){e=e||10;r=r|0||1;var i;if(e===16||e==="hex"){i="";var s=0;var a=0;for(var o=0;o<this.length;o++){var f=this.words[o];var c=((f<<s|a)&16777215).toString(16);a=f>>>24-s&16777215;s+=2;if(s>=26){s-=26;o--}if(a!==0||o!==this.length-1){i=l[6-c.length]+c+i}else{i=c+i}}if(a!==0){i=a.toString(16)+i}while(i.length%r!==0){i="0"+i}if(this.negative!==0){i="-"+i}return i}if(e===(e|0)&&e>=2&&e<=36){var u=d[e];var h=v[e];i="";var b=this.clone();b.negative=0;while(!b.isZero()){var p=b.modrn(h).toString(e);b=b.idivn(h);if(!b.isZero()){i=l[u-p.length]+p+i}else{i=p+i}}if(this.isZero()){i="0"+i}while(i.length%r!==0){i="0"+i}if(this.negative!==0){i="-"+i}return i}n(false,"Base should be between 2 and 36")};s.prototype.toNumber=function t(){var e=this.words[0];if(this.length===2){e+=this.words[1]*67108864}else if(this.length===3&&this.words[2]===1){e+=4503599627370496+this.words[1]*67108864}else if(this.length>2){n(false,"Number can only safely store up to 53 bits")}return this.negative!==0?-e:e};s.prototype.toJSON=function t(){return this.toString(16,2)};if(a){s.prototype.toBuffer=function t(e,r){return this.toArrayLike(a,e,r)}}s.prototype.toArray=function t(e,r){return this.toArrayLike(Array,e,r)};var b=function t(e,r){if(e.allocUnsafe){return e.allocUnsafe(r)}return new e(r)};s.prototype.toArrayLike=function t(e,r,i){this._strip();var s=this.byteLength();var a=i||Math.max(1,s);n(s<=a,"byte array longer than desired length");n(a>0,"Requested array length <= 0");var o=b(e,a);var f=r==="le"?"LE":"BE";this["_toArrayLike"+f](o,s);return o};s.prototype._toArrayLikeLE=function t(e,r){var n=0;var i=0;for(var s=0,a=0;s<this.length;s++){var o=this.words[s]<<a|i;e[n++]=o&255;if(n<e.length){e[n++]=o>>8&255}if(n<e.length){e[n++]=o>>16&255}if(a===6){if(n<e.length){e[n++]=o>>24&255}i=0;a=0}else{i=o>>>24;a+=2}}if(n<e.length){e[n++]=i;while(n<e.length){e[n++]=0}}};s.prototype._toArrayLikeBE=function t(e,r){var n=e.length-1;var i=0;for(var s=0,a=0;s<this.length;s++){var o=this.words[s]<<a|i;e[n--]=o&255;if(n>=0){e[n--]=o>>8&255}if(n>=0){e[n--]=o>>16&255}if(a===6){if(n>=0){e[n--]=o>>24&255}i=0;a=0}else{i=o>>>24;a+=2}}if(n>=0){e[n--]=i;while(n>=0){e[n--]=0}}};if(Math.clz32){s.prototype._countBits=function t(e){return 32-Math.clz32(e)}}else{s.prototype._countBits=function t(e){var r=e;var n=0;if(r>=4096){n+=13;r>>>=13}if(r>=64){n+=7;r>>>=7}if(r>=8){n+=4;r>>>=4}if(r>=2){n+=2;r>>>=2}return n+r}}s.prototype._zeroBits=function t(e){if(e===0)return 26;var r=e;var n=0;if((r&8191)===0){n+=13;r>>>=13}if((r&127)===0){n+=7;r>>>=7}if((r&15)===0){n+=4;r>>>=4}if((r&3)===0){n+=2;r>>>=2}if((r&1)===0){n++}return n};s.prototype.bitLength=function t(){var e=this.words[this.length-1];var r=this._countBits(e);return(this.length-1)*26+r};function p(t){var e=new Array(t.bitLength());for(var r=0;r<e.length;r++){var n=r/26|0;var i=r%26;e[r]=t.words[n]>>>i&1}return e}s.prototype.zeroBits=function t(){if(this.isZero())return 0;var e=0;for(var r=0;r<this.length;r++){var n=this._zeroBits(this.words[r]);e+=n;if(n!==26)break}return e};s.prototype.byteLength=function t(){return Math.ceil(this.bitLength()/8)};s.prototype.toTwos=function t(e){if(this.negative!==0){return this.abs().inotn(e).iaddn(1)}return this.clone()};s.prototype.fromTwos=function t(e){if(this.testn(e-1)){return this.notn(e).iaddn(1).ineg()}return this.clone()};s.prototype.isNeg=function t(){return this.negative!==0};s.prototype.neg=function t(){return this.clone().ineg()};s.prototype.ineg=function t(){if(!this.isZero()){this.negative^=1}return this};s.prototype.iuor=function t(e){while(this.length<e.length){this.words[this.length++]=0}for(var r=0;r<e.length;r++){this.words[r]=this.words[r]|e.words[r]}return this._strip()};s.prototype.ior=function t(e){n((this.negative|e.negative)===0);return this.iuor(e)};s.prototype.or=function t(e){if(this.length>e.length)return this.clone().ior(e);return e.clone().ior(this)};s.prototype.uor=function t(e){if(this.length>e.length)return this.clone().iuor(e);return e.clone().iuor(this)};s.prototype.iuand=function t(e){var r;if(this.length>e.length){r=e}else{r=this}for(var n=0;n<r.length;n++){this.words[n]=this.words[n]&e.words[n]}this.length=r.length;return this._strip()};s.prototype.iand=function t(e){n((this.negative|e.negative)===0);return this.iuand(e)};s.prototype.and=function t(e){if(this.length>e.length)return this.clone().iand(e);return e.clone().iand(this)};s.prototype.uand=function t(e){if(this.length>e.length)return this.clone().iuand(e);return e.clone().iuand(this)};s.prototype.iuxor=function t(e){var r;var n;if(this.length>e.length){r=this;n=e}else{r=e;n=this}for(var i=0;i<n.length;i++){this.words[i]=r.words[i]^n.words[i]}if(this!==r){for(;i<r.length;i++){this.words[i]=r.words[i]}}this.length=r.length;return this._strip()};s.prototype.ixor=function t(e){n((this.negative|e.negative)===0);return this.iuxor(e)};s.prototype.xor=function t(e){if(this.length>e.length)return this.clone().ixor(e);return e.clone().ixor(this)};s.prototype.uxor=function t(e){if(this.length>e.length)return this.clone().iuxor(e);return e.clone().iuxor(this)};s.prototype.inotn=function t(e){n(typeof e==="number"&&e>=0);var r=Math.ceil(e/26)|0;var i=e%26;this._expand(r);if(i>0){r--}for(var s=0;s<r;s++){this.words[s]=~this.words[s]&67108863}if(i>0){this.words[s]=~this.words[s]&67108863>>26-i}return this._strip()};s.prototype.notn=function t(e){return this.clone().inotn(e)};s.prototype.setn=function t(e,r){n(typeof e==="number"&&e>=0);var i=e/26|0;var s=e%26;this._expand(i+1);if(r){this.words[i]=this.words[i]|1<<s}else{this.words[i]=this.words[i]&~(1<<s)}return this._strip()};s.prototype.iadd=function t(e){var r;if(this.negative!==0&&e.negative===0){this.negative=0;r=this.isub(e);this.negative^=1;return this._normSign()}else if(this.negative===0&&e.negative!==0){e.negative=0;r=this.isub(e);e.negative=1;return r._normSign()}var n,i;if(this.length>e.length){n=this;i=e}else{n=e;i=this}var s=0;for(var a=0;a<i.length;a++){r=(n.words[a]|0)+(i.words[a]|0)+s;this.words[a]=r&67108863;s=r>>>26}for(;s!==0&&a<n.length;a++){r=(n.words[a]|0)+s;this.words[a]=r&67108863;s=r>>>26}this.length=n.length;if(s!==0){this.words[this.length]=s;this.length++}else if(n!==this){for(;a<n.length;a++){this.words[a]=n.words[a]}}return this};s.prototype.add=function t(e){var r;if(e.negative!==0&&this.negative===0){e.negative=0;r=this.sub(e);e.negative^=1;return r}else if(e.negative===0&&this.negative!==0){this.negative=0;r=e.sub(this);this.negative=1;return r}if(this.length>e.length)return this.clone().iadd(e);return e.clone().iadd(this)};s.prototype.isub=function t(e){if(e.negative!==0){e.negative=0;var r=this.iadd(e);e.negative=1;return r._normSign()}else if(this.negative!==0){this.negative=0;this.iadd(e);this.negative=1;return this._normSign()}var n=this.cmp(e);if(n===0){this.negative=0;this.length=1;this.words[0]=0;return this}var i,s;if(n>0){i=this;s=e}else{i=e;s=this}var a=0;for(var o=0;o<s.length;o++){r=(i.words[o]|0)-(s.words[o]|0)+a;a=r>>26;this.words[o]=r&67108863}for(;a!==0&&o<i.length;o++){r=(i.words[o]|0)+a;a=r>>26;this.words[o]=r&67108863}if(a===0&&o<i.length&&i!==this){for(;o<i.length;o++){this.words[o]=i.words[o]}}this.length=Math.max(this.length,o);if(i!==this){this.negative=1}return this._strip()};s.prototype.sub=function t(e){return this.clone().isub(e)};function g(t,e,r){r.negative=e.negative^t.negative;var n=t.length+e.length|0;r.length=n;n=n-1|0;var i=t.words[0]|0;var s=e.words[0]|0;var a=i*s;var o=a&67108863;var f=a/67108864|0;r.words[0]=o;for(var c=1;c<n;c++){var u=f>>>26;var h=f&67108863;var l=Math.min(c,e.length-1);for(var d=Math.max(0,c-t.length+1);d<=l;d++){var v=c-d|0;i=t.words[v]|0;s=e.words[d]|0;a=i*s+h;u+=a/67108864|0;h=a&67108863}r.words[c]=h|0;f=u|0}if(f!==0){r.words[c]=f|0}else{r.length--}return r._strip()}var y=function t(e,r,n){var i=e.words;var s=r.words;var a=n.words;var o=0;var f;var c;var u;var h=i[0]|0;var l=h&8191;var d=h>>>13;var v=i[1]|0;var b=v&8191;var p=v>>>13;var g=i[2]|0;var y=g&8191;var w=g>>>13;var m=i[3]|0;var A=m&8191;var E=m>>>13;var k=i[4]|0;var M=k&8191;var B=k>>>13;var S=i[5]|0;var C=S&8191;var x=S>>>13;var P=i[6]|0;var I=P&8191;var T=P>>>13;var O=i[7]|0;var D=O&8191;var N=O>>>13;var U=i[8]|0;var j=U&8191;var R=U>>>13;var F=i[9]|0;var L=F&8191;var Q=F>>>13;var H=s[0]|0;var G=H&8191;var K=H>>>13;var J=s[1]|0;var z=J&8191;var W=J>>>13;var q=s[2]|0;var V=q&8191;var Y=q>>>13;var _=s[3]|0;var Z=_&8191;var X=_>>>13;var $=s[4]|0;var tt=$&8191;var et=$>>>13;var rt=s[5]|0;var nt=rt&8191;var it=rt>>>13;var st=s[6]|0;var at=st&8191;var ot=st>>>13;var ft=s[7]|0;var ct=ft&8191;var ut=ft>>>13;var ht=s[8]|0;var lt=ht&8191;var dt=ht>>>13;var vt=s[9]|0;var bt=vt&8191;var pt=vt>>>13;n.negative=e.negative^r.negative;n.length=19;f=Math.imul(l,G);c=Math.imul(l,K);c=c+Math.imul(d,G)|0;u=Math.imul(d,K);var gt=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(gt>>>26)|0;gt&=67108863;f=Math.imul(b,G);c=Math.imul(b,K);c=c+Math.imul(p,G)|0;u=Math.imul(p,K);f=f+Math.imul(l,z)|0;c=c+Math.imul(l,W)|0;c=c+Math.imul(d,z)|0;u=u+Math.imul(d,W)|0;var yt=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(yt>>>26)|0;yt&=67108863;f=Math.imul(y,G);c=Math.imul(y,K);c=c+Math.imul(w,G)|0;u=Math.imul(w,K);f=f+Math.imul(b,z)|0;c=c+Math.imul(b,W)|0;c=c+Math.imul(p,z)|0;u=u+Math.imul(p,W)|0;f=f+Math.imul(l,V)|0;c=c+Math.imul(l,Y)|0;c=c+Math.imul(d,V)|0;u=u+Math.imul(d,Y)|0;var wt=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(wt>>>26)|0;wt&=67108863;f=Math.imul(A,G);c=Math.imul(A,K);c=c+Math.imul(E,G)|0;u=Math.imul(E,K);f=f+Math.imul(y,z)|0;c=c+Math.imul(y,W)|0;c=c+Math.imul(w,z)|0;u=u+Math.imul(w,W)|0;f=f+Math.imul(b,V)|0;c=c+Math.imul(b,Y)|0;c=c+Math.imul(p,V)|0;u=u+Math.imul(p,Y)|0;f=f+Math.imul(l,Z)|0;c=c+Math.imul(l,X)|0;c=c+Math.imul(d,Z)|0;u=u+Math.imul(d,X)|0;var mt=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(mt>>>26)|0;mt&=67108863;f=Math.imul(M,G);c=Math.imul(M,K);c=c+Math.imul(B,G)|0;u=Math.imul(B,K);f=f+Math.imul(A,z)|0;c=c+Math.imul(A,W)|0;c=c+Math.imul(E,z)|0;u=u+Math.imul(E,W)|0;f=f+Math.imul(y,V)|0;c=c+Math.imul(y,Y)|0;c=c+Math.imul(w,V)|0;u=u+Math.imul(w,Y)|0;f=f+Math.imul(b,Z)|0;c=c+Math.imul(b,X)|0;c=c+Math.imul(p,Z)|0;u=u+Math.imul(p,X)|0;f=f+Math.imul(l,tt)|0;c=c+Math.imul(l,et)|0;c=c+Math.imul(d,tt)|0;u=u+Math.imul(d,et)|0;var At=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(At>>>26)|0;At&=67108863;f=Math.imul(C,G);c=Math.imul(C,K);c=c+Math.imul(x,G)|0;u=Math.imul(x,K);f=f+Math.imul(M,z)|0;c=c+Math.imul(M,W)|0;c=c+Math.imul(B,z)|0;u=u+Math.imul(B,W)|0;f=f+Math.imul(A,V)|0;c=c+Math.imul(A,Y)|0;c=c+Math.imul(E,V)|0;u=u+Math.imul(E,Y)|0;f=f+Math.imul(y,Z)|0;c=c+Math.imul(y,X)|0;c=c+Math.imul(w,Z)|0;u=u+Math.imul(w,X)|0;f=f+Math.imul(b,tt)|0;c=c+Math.imul(b,et)|0;c=c+Math.imul(p,tt)|0;u=u+Math.imul(p,et)|0;f=f+Math.imul(l,nt)|0;c=c+Math.imul(l,it)|0;c=c+Math.imul(d,nt)|0;u=u+Math.imul(d,it)|0;var Et=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Et>>>26)|0;Et&=67108863;f=Math.imul(I,G);c=Math.imul(I,K);c=c+Math.imul(T,G)|0;u=Math.imul(T,K);f=f+Math.imul(C,z)|0;c=c+Math.imul(C,W)|0;c=c+Math.imul(x,z)|0;u=u+Math.imul(x,W)|0;f=f+Math.imul(M,V)|0;c=c+Math.imul(M,Y)|0;c=c+Math.imul(B,V)|0;u=u+Math.imul(B,Y)|0;f=f+Math.imul(A,Z)|0;c=c+Math.imul(A,X)|0;c=c+Math.imul(E,Z)|0;u=u+Math.imul(E,X)|0;f=f+Math.imul(y,tt)|0;c=c+Math.imul(y,et)|0;c=c+Math.imul(w,tt)|0;u=u+Math.imul(w,et)|0;f=f+Math.imul(b,nt)|0;c=c+Math.imul(b,it)|0;c=c+Math.imul(p,nt)|0;u=u+Math.imul(p,it)|0;f=f+Math.imul(l,at)|0;c=c+Math.imul(l,ot)|0;c=c+Math.imul(d,at)|0;u=u+Math.imul(d,ot)|0;var kt=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(kt>>>26)|0;kt&=67108863;f=Math.imul(D,G);c=Math.imul(D,K);c=c+Math.imul(N,G)|0;u=Math.imul(N,K);f=f+Math.imul(I,z)|0;c=c+Math.imul(I,W)|0;c=c+Math.imul(T,z)|0;u=u+Math.imul(T,W)|0;f=f+Math.imul(C,V)|0;c=c+Math.imul(C,Y)|0;c=c+Math.imul(x,V)|0;u=u+Math.imul(x,Y)|0;f=f+Math.imul(M,Z)|0;c=c+Math.imul(M,X)|0;c=c+Math.imul(B,Z)|0;u=u+Math.imul(B,X)|0;f=f+Math.imul(A,tt)|0;c=c+Math.imul(A,et)|0;c=c+Math.imul(E,tt)|0;u=u+Math.imul(E,et)|0;f=f+Math.imul(y,nt)|0;c=c+Math.imul(y,it)|0;c=c+Math.imul(w,nt)|0;u=u+Math.imul(w,it)|0;f=f+Math.imul(b,at)|0;c=c+Math.imul(b,ot)|0;c=c+Math.imul(p,at)|0;u=u+Math.imul(p,ot)|0;f=f+Math.imul(l,ct)|0;c=c+Math.imul(l,ut)|0;c=c+Math.imul(d,ct)|0;u=u+Math.imul(d,ut)|0;var Mt=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Mt>>>26)|0;Mt&=67108863;f=Math.imul(j,G);c=Math.imul(j,K);c=c+Math.imul(R,G)|0;u=Math.imul(R,K);f=f+Math.imul(D,z)|0;c=c+Math.imul(D,W)|0;c=c+Math.imul(N,z)|0;u=u+Math.imul(N,W)|0;f=f+Math.imul(I,V)|0;c=c+Math.imul(I,Y)|0;c=c+Math.imul(T,V)|0;u=u+Math.imul(T,Y)|0;f=f+Math.imul(C,Z)|0;c=c+Math.imul(C,X)|0;c=c+Math.imul(x,Z)|0;u=u+Math.imul(x,X)|0;f=f+Math.imul(M,tt)|0;c=c+Math.imul(M,et)|0;c=c+Math.imul(B,tt)|0;u=u+Math.imul(B,et)|0;f=f+Math.imul(A,nt)|0;c=c+Math.imul(A,it)|0;c=c+Math.imul(E,nt)|0;u=u+Math.imul(E,it)|0;f=f+Math.imul(y,at)|0;c=c+Math.imul(y,ot)|0;c=c+Math.imul(w,at)|0;u=u+Math.imul(w,ot)|0;f=f+Math.imul(b,ct)|0;c=c+Math.imul(b,ut)|0;c=c+Math.imul(p,ct)|0;u=u+Math.imul(p,ut)|0;f=f+Math.imul(l,lt)|0;c=c+Math.imul(l,dt)|0;c=c+Math.imul(d,lt)|0;u=u+Math.imul(d,dt)|0;var Bt=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Bt>>>26)|0;Bt&=67108863;f=Math.imul(L,G);c=Math.imul(L,K);c=c+Math.imul(Q,G)|0;u=Math.imul(Q,K);f=f+Math.imul(j,z)|0;c=c+Math.imul(j,W)|0;c=c+Math.imul(R,z)|0;u=u+Math.imul(R,W)|0;f=f+Math.imul(D,V)|0;c=c+Math.imul(D,Y)|0;c=c+Math.imul(N,V)|0;u=u+Math.imul(N,Y)|0;f=f+Math.imul(I,Z)|0;c=c+Math.imul(I,X)|0;c=c+Math.imul(T,Z)|0;u=u+Math.imul(T,X)|0;f=f+Math.imul(C,tt)|0;c=c+Math.imul(C,et)|0;c=c+Math.imul(x,tt)|0;u=u+Math.imul(x,et)|0;f=f+Math.imul(M,nt)|0;c=c+Math.imul(M,it)|0;c=c+Math.imul(B,nt)|0;u=u+Math.imul(B,it)|0;f=f+Math.imul(A,at)|0;c=c+Math.imul(A,ot)|0;c=c+Math.imul(E,at)|0;u=u+Math.imul(E,ot)|0;f=f+Math.imul(y,ct)|0;c=c+Math.imul(y,ut)|0;c=c+Math.imul(w,ct)|0;u=u+Math.imul(w,ut)|0;f=f+Math.imul(b,lt)|0;c=c+Math.imul(b,dt)|0;c=c+Math.imul(p,lt)|0;u=u+Math.imul(p,dt)|0;f=f+Math.imul(l,bt)|0;c=c+Math.imul(l,pt)|0;c=c+Math.imul(d,bt)|0;u=u+Math.imul(d,pt)|0;var St=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(St>>>26)|0;St&=67108863;f=Math.imul(L,z);c=Math.imul(L,W);c=c+Math.imul(Q,z)|0;u=Math.imul(Q,W);f=f+Math.imul(j,V)|0;c=c+Math.imul(j,Y)|0;c=c+Math.imul(R,V)|0;u=u+Math.imul(R,Y)|0;f=f+Math.imul(D,Z)|0;c=c+Math.imul(D,X)|0;c=c+Math.imul(N,Z)|0;u=u+Math.imul(N,X)|0;f=f+Math.imul(I,tt)|0;c=c+Math.imul(I,et)|0;c=c+Math.imul(T,tt)|0;u=u+Math.imul(T,et)|0;f=f+Math.imul(C,nt)|0;c=c+Math.imul(C,it)|0;c=c+Math.imul(x,nt)|0;u=u+Math.imul(x,it)|0;f=f+Math.imul(M,at)|0;c=c+Math.imul(M,ot)|0;c=c+Math.imul(B,at)|0;u=u+Math.imul(B,ot)|0;f=f+Math.imul(A,ct)|0;c=c+Math.imul(A,ut)|0;c=c+Math.imul(E,ct)|0;u=u+Math.imul(E,ut)|0;f=f+Math.imul(y,lt)|0;c=c+Math.imul(y,dt)|0;c=c+Math.imul(w,lt)|0;u=u+Math.imul(w,dt)|0;f=f+Math.imul(b,bt)|0;c=c+Math.imul(b,pt)|0;c=c+Math.imul(p,bt)|0;u=u+Math.imul(p,pt)|0;var Ct=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Ct>>>26)|0;Ct&=67108863;f=Math.imul(L,V);c=Math.imul(L,Y);c=c+Math.imul(Q,V)|0;u=Math.imul(Q,Y);f=f+Math.imul(j,Z)|0;c=c+Math.imul(j,X)|0;c=c+Math.imul(R,Z)|0;u=u+Math.imul(R,X)|0;f=f+Math.imul(D,tt)|0;c=c+Math.imul(D,et)|0;c=c+Math.imul(N,tt)|0;u=u+Math.imul(N,et)|0;f=f+Math.imul(I,nt)|0;c=c+Math.imul(I,it)|0;c=c+Math.imul(T,nt)|0;u=u+Math.imul(T,it)|0;f=f+Math.imul(C,at)|0;c=c+Math.imul(C,ot)|0;c=c+Math.imul(x,at)|0;u=u+Math.imul(x,ot)|0;f=f+Math.imul(M,ct)|0;c=c+Math.imul(M,ut)|0;c=c+Math.imul(B,ct)|0;u=u+Math.imul(B,ut)|0;f=f+Math.imul(A,lt)|0;c=c+Math.imul(A,dt)|0;c=c+Math.imul(E,lt)|0;u=u+Math.imul(E,dt)|0;f=f+Math.imul(y,bt)|0;c=c+Math.imul(y,pt)|0;c=c+Math.imul(w,bt)|0;u=u+Math.imul(w,pt)|0;var xt=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(xt>>>26)|0;xt&=67108863;f=Math.imul(L,Z);c=Math.imul(L,X);c=c+Math.imul(Q,Z)|0;u=Math.imul(Q,X);f=f+Math.imul(j,tt)|0;c=c+Math.imul(j,et)|0;c=c+Math.imul(R,tt)|0;u=u+Math.imul(R,et)|0;f=f+Math.imul(D,nt)|0;c=c+Math.imul(D,it)|0;c=c+Math.imul(N,nt)|0;u=u+Math.imul(N,it)|0;f=f+Math.imul(I,at)|0;c=c+Math.imul(I,ot)|0;c=c+Math.imul(T,at)|0;u=u+Math.imul(T,ot)|0;f=f+Math.imul(C,ct)|0;c=c+Math.imul(C,ut)|0;c=c+Math.imul(x,ct)|0;u=u+Math.imul(x,ut)|0;f=f+Math.imul(M,lt)|0;c=c+Math.imul(M,dt)|0;c=c+Math.imul(B,lt)|0;u=u+Math.imul(B,dt)|0;f=f+Math.imul(A,bt)|0;c=c+Math.imul(A,pt)|0;c=c+Math.imul(E,bt)|0;u=u+Math.imul(E,pt)|0;var Pt=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Pt>>>26)|0;Pt&=67108863;f=Math.imul(L,tt);c=Math.imul(L,et);c=c+Math.imul(Q,tt)|0;u=Math.imul(Q,et);f=f+Math.imul(j,nt)|0;c=c+Math.imul(j,it)|0;c=c+Math.imul(R,nt)|0;u=u+Math.imul(R,it)|0;f=f+Math.imul(D,at)|0;c=c+Math.imul(D,ot)|0;c=c+Math.imul(N,at)|0;u=u+Math.imul(N,ot)|0;f=f+Math.imul(I,ct)|0;c=c+Math.imul(I,ut)|0;c=c+Math.imul(T,ct)|0;u=u+Math.imul(T,ut)|0;f=f+Math.imul(C,lt)|0;c=c+Math.imul(C,dt)|0;c=c+Math.imul(x,lt)|0;u=u+Math.imul(x,dt)|0;f=f+Math.imul(M,bt)|0;c=c+Math.imul(M,pt)|0;c=c+Math.imul(B,bt)|0;u=u+Math.imul(B,pt)|0;var It=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(It>>>26)|0;It&=67108863;f=Math.imul(L,nt);c=Math.imul(L,it);c=c+Math.imul(Q,nt)|0;u=Math.imul(Q,it);f=f+Math.imul(j,at)|0;c=c+Math.imul(j,ot)|0;c=c+Math.imul(R,at)|0;u=u+Math.imul(R,ot)|0;f=f+Math.imul(D,ct)|0;c=c+Math.imul(D,ut)|0;c=c+Math.imul(N,ct)|0;u=u+Math.imul(N,ut)|0;f=f+Math.imul(I,lt)|0;c=c+Math.imul(I,dt)|0;c=c+Math.imul(T,lt)|0;u=u+Math.imul(T,dt)|0;f=f+Math.imul(C,bt)|0;c=c+Math.imul(C,pt)|0;c=c+Math.imul(x,bt)|0;u=u+Math.imul(x,pt)|0;var Tt=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Tt>>>26)|0;Tt&=67108863;f=Math.imul(L,at);c=Math.imul(L,ot);c=c+Math.imul(Q,at)|0;u=Math.imul(Q,ot);f=f+Math.imul(j,ct)|0;c=c+Math.imul(j,ut)|0;c=c+Math.imul(R,ct)|0;u=u+Math.imul(R,ut)|0;f=f+Math.imul(D,lt)|0;c=c+Math.imul(D,dt)|0;c=c+Math.imul(N,lt)|0;u=u+Math.imul(N,dt)|0;f=f+Math.imul(I,bt)|0;c=c+Math.imul(I,pt)|0;c=c+Math.imul(T,bt)|0;u=u+Math.imul(T,pt)|0;var Ot=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Ot>>>26)|0;Ot&=67108863;f=Math.imul(L,ct);c=Math.imul(L,ut);c=c+Math.imul(Q,ct)|0;u=Math.imul(Q,ut);f=f+Math.imul(j,lt)|0;c=c+Math.imul(j,dt)|0;c=c+Math.imul(R,lt)|0;u=u+Math.imul(R,dt)|0;f=f+Math.imul(D,bt)|0;c=c+Math.imul(D,pt)|0;c=c+Math.imul(N,bt)|0;u=u+Math.imul(N,pt)|0;var Dt=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Dt>>>26)|0;Dt&=67108863;f=Math.imul(L,lt);c=Math.imul(L,dt);c=c+Math.imul(Q,lt)|0;u=Math.imul(Q,dt);f=f+Math.imul(j,bt)|0;c=c+Math.imul(j,pt)|0;c=c+Math.imul(R,bt)|0;u=u+Math.imul(R,pt)|0;var Nt=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Nt>>>26)|0;Nt&=67108863;f=Math.imul(L,bt);c=Math.imul(L,pt);c=c+Math.imul(Q,bt)|0;u=Math.imul(Q,pt);var Ut=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Ut>>>26)|0;Ut&=67108863;a[0]=gt;a[1]=yt;a[2]=wt;a[3]=mt;a[4]=At;a[5]=Et;a[6]=kt;a[7]=Mt;a[8]=Bt;a[9]=St;a[10]=Ct;a[11]=xt;a[12]=Pt;a[13]=It;a[14]=Tt;a[15]=Ot;a[16]=Dt;a[17]=Nt;a[18]=Ut;if(o!==0){a[19]=o;n.length++}return n};if(!Math.imul){y=g}function w(t,e,r){r.negative=e.negative^t.negative;r.length=t.length+e.length;var n=0;var i=0;for(var s=0;s<r.length-1;s++){var a=i;i=0;var o=n&67108863;var f=Math.min(s,e.length-1);for(var c=Math.max(0,s-t.length+1);c<=f;c++){var u=s-c;var h=t.words[u]|0;var l=e.words[c]|0;var d=h*l;var v=d&67108863;a=a+(d/67108864|0)|0;v=v+o|0;o=v&67108863;a=a+(v>>>26)|0;i+=a>>>26;a&=67108863}r.words[s]=o;n=a;a=i}if(n!==0){r.words[s]=n}else{r.length--}return r._strip()}function m(t,e,r){return w(t,e,r)}s.prototype.mulTo=function t(e,r){var n;var i=this.length+e.length;if(this.length===10&&e.length===10){n=y(this,e,r)}else if(i<63){n=g(this,e,r)}else if(i<1024){n=w(this,e,r)}else{n=m(this,e,r)}return n};s.prototype.mul=function t(e){var r=new s(null);r.words=new Array(this.length+e.length);return this.mulTo(e,r)};s.prototype.mulf=function t(e){var r=new s(null);r.words=new Array(this.length+e.length);return m(this,e,r)};s.prototype.imul=function t(e){return this.clone().mulTo(e,this)};s.prototype.imuln=function t(e){var r=e<0;if(r)e=-e;n(typeof e==="number");n(e<67108864);var i=0;for(var s=0;s<this.length;s++){var a=(this.words[s]|0)*e;var o=(a&67108863)+(i&67108863);i>>=26;i+=a/67108864|0;i+=o>>>26;this.words[s]=o&67108863}if(i!==0){this.words[s]=i;this.length++}return r?this.ineg():this};s.prototype.muln=function t(e){return this.clone().imuln(e)};s.prototype.sqr=function t(){return this.mul(this)};s.prototype.isqr=function t(){return this.imul(this.clone())};s.prototype.pow=function t(e){var r=p(e);if(r.length===0)return new s(1);var n=this;for(var i=0;i<r.length;i++,n=n.sqr()){if(r[i]!==0)break}if(++i<r.length){for(var a=n.sqr();i<r.length;i++,a=a.sqr()){if(r[i]===0)continue;n=n.mul(a)}}return n};s.prototype.iushln=function t(e){n(typeof e==="number"&&e>=0);var r=e%26;var i=(e-r)/26;var s=67108863>>>26-r<<26-r;var a;if(r!==0){var o=0;for(a=0;a<this.length;a++){var f=this.words[a]&s;var c=(this.words[a]|0)-f<<r;this.words[a]=c|o;o=f>>>26-r}if(o){this.words[a]=o;this.length++}}if(i!==0){for(a=this.length-1;a>=0;a--){this.words[a+i]=this.words[a]}for(a=0;a<i;a++){this.words[a]=0}this.length+=i}return this._strip()};s.prototype.ishln=function t(e){n(this.negative===0);return this.iushln(e)};s.prototype.iushrn=function t(e,r,i){n(typeof e==="number"&&e>=0);var s;if(r){s=(r-r%26)/26}else{s=0}var a=e%26;var o=Math.min((e-a)/26,this.length);var f=67108863^67108863>>>a<<a;var c=i;s-=o;s=Math.max(0,s);if(c){for(var u=0;u<o;u++){c.words[u]=this.words[u]}c.length=o}if(o===0);else if(this.length>o){this.length-=o;for(u=0;u<this.length;u++){this.words[u]=this.words[u+o]}}else{this.words[0]=0;this.length=1}var h=0;for(u=this.length-1;u>=0&&(h!==0||u>=s);u--){var l=this.words[u]|0;this.words[u]=h<<26-a|l>>>a;h=l&f}if(c&&h!==0){c.words[c.length++]=h}if(this.length===0){this.words[0]=0;this.length=1}return this._strip()};s.prototype.ishrn=function t(e,r,i){n(this.negative===0);return this.iushrn(e,r,i)};s.prototype.shln=function t(e){return this.clone().ishln(e)};s.prototype.ushln=function t(e){return this.clone().iushln(e)};s.prototype.shrn=function t(e){return this.clone().ishrn(e)};s.prototype.ushrn=function t(e){return this.clone().iushrn(e)};s.prototype.testn=function t(e){n(typeof e==="number"&&e>=0);var r=e%26;var i=(e-r)/26;var s=1<<r;if(this.length<=i)return false;var a=this.words[i];return!!(a&s)};s.prototype.imaskn=function t(e){n(typeof e==="number"&&e>=0);var r=e%26;var i=(e-r)/26;n(this.negative===0,"imaskn works only with positive numbers");if(this.length<=i){return this}if(r!==0){i++}this.length=Math.min(i,this.length);if(r!==0){var s=67108863^67108863>>>r<<r;this.words[this.length-1]&=s}return this._strip()};s.prototype.maskn=function t(e){return this.clone().imaskn(e)};s.prototype.iaddn=function t(e){n(typeof e==="number");n(e<67108864);if(e<0)return this.isubn(-e);if(this.negative!==0){if(this.length===1&&(this.words[0]|0)<=e){this.words[0]=e-(this.words[0]|0);this.negative=0;return this}this.negative=0;this.isubn(e);this.negative=1;return this}return this._iaddn(e)};s.prototype._iaddn=function t(e){this.words[0]+=e;for(var r=0;r<this.length&&this.words[r]>=67108864;r++){this.words[r]-=67108864;if(r===this.length-1){this.words[r+1]=1}else{this.words[r+1]++}}this.length=Math.max(this.length,r+1);return this};s.prototype.isubn=function t(e){n(typeof e==="number");n(e<67108864);if(e<0)return this.iaddn(-e);if(this.negative!==0){this.negative=0;this.iaddn(e);this.negative=1;return this}this.words[0]-=e;if(this.length===1&&this.words[0]<0){this.words[0]=-this.words[0];this.negative=1}else{for(var r=0;r<this.length&&this.words[r]<0;r++){this.words[r]+=67108864;this.words[r+1]-=1}}return this._strip()};s.prototype.addn=function t(e){return this.clone().iaddn(e)};s.prototype.subn=function t(e){return this.clone().isubn(e)};s.prototype.iabs=function t(){this.negative=0;return this};s.prototype.abs=function t(){return this.clone().iabs()};s.prototype._ishlnsubmul=function t(e,r,i){var s=e.length+i;var a;this._expand(s);var o;var f=0;for(a=0;a<e.length;a++){o=(this.words[a+i]|0)+f;var c=(e.words[a]|0)*r;o-=c&67108863;f=(o>>26)-(c/67108864|0);this.words[a+i]=o&67108863}for(;a<this.length-i;a++){o=(this.words[a+i]|0)+f;f=o>>26;this.words[a+i]=o&67108863}if(f===0)return this._strip();n(f===-1);f=0;for(a=0;a<this.length;a++){o=-(this.words[a]|0)+f;f=o>>26;this.words[a]=o&67108863}this.negative=1;return this._strip()};s.prototype._wordDiv=function t(e,r){var n=this.length-e.length;var i=this.clone();var a=e;var o=a.words[a.length-1]|0;var f=this._countBits(o);n=26-f;if(n!==0){a=a.ushln(n);i.iushln(n);o=a.words[a.length-1]|0}var c=i.length-a.length;var u;if(r!=="mod"){u=new s(null);u.length=c+1;u.words=new Array(u.length);for(var h=0;h<u.length;h++){u.words[h]=0}}var l=i.clone()._ishlnsubmul(a,1,c);if(l.negative===0){i=l;if(u){u.words[c]=1}}for(var d=c-1;d>=0;d--){var v=(i.words[a.length+d]|0)*67108864+(i.words[a.length+d-1]|0);v=Math.min(v/o|0,67108863);i._ishlnsubmul(a,v,d);while(i.negative!==0){v--;i.negative=0;i._ishlnsubmul(a,1,d);if(!i.isZero()){i.negative^=1}}if(u){u.words[d]=v}}if(u){u._strip()}i._strip();if(r!=="div"&&n!==0){i.iushrn(n)}return{div:u||null,mod:i}};s.prototype.divmod=function t(e,r,i){n(!e.isZero());if(this.isZero()){return{div:new s(0),mod:new s(0)}}var a,o,f;if(this.negative!==0&&e.negative===0){f=this.neg().divmod(e,r);if(r!=="mod"){a=f.div.neg()}if(r!=="div"){o=f.mod.neg();if(i&&o.negative!==0){o.iadd(e)}}return{div:a,mod:o}}if(this.negative===0&&e.negative!==0){f=this.divmod(e.neg(),r);if(r!=="mod"){a=f.div.neg()}return{div:a,mod:f.mod}}if((this.negative&e.negative)!==0){f=this.neg().divmod(e.neg(),r);if(r!=="div"){o=f.mod.neg();if(i&&o.negative!==0){o.isub(e)}}return{div:f.div,mod:o}}if(e.length>this.length||this.cmp(e)<0){return{div:new s(0),mod:this}}if(e.length===1){if(r==="div"){return{div:this.divn(e.words[0]),mod:null}}if(r==="mod"){return{div:null,mod:new s(this.modrn(e.words[0]))}}return{div:this.divn(e.words[0]),mod:new s(this.modrn(e.words[0]))}}return this._wordDiv(e,r)};s.prototype.div=function t(e){return this.divmod(e,"div",false).div};s.prototype.mod=function t(e){return this.divmod(e,"mod",false).mod};s.prototype.umod=function t(e){return this.divmod(e,"mod",true).mod};s.prototype.divRound=function t(e){var r=this.divmod(e);if(r.mod.isZero())return r.div;var n=r.div.negative!==0?r.mod.isub(e):r.mod;var i=e.ushrn(1);var s=e.andln(1);var a=n.cmp(i);if(a<0||s===1&&a===0)return r.div;return r.div.negative!==0?r.div.isubn(1):r.div.iaddn(1)};s.prototype.modrn=function t(e){var r=e<0;if(r)e=-e;n(e<=67108863);var i=(1<<26)%e;var s=0;for(var a=this.length-1;a>=0;a--){s=(i*s+(this.words[a]|0))%e}return r?-s:s};s.prototype.modn=function t(e){return this.modrn(e)};s.prototype.idivn=function t(e){var r=e<0;if(r)e=-e;n(e<=67108863);var i=0;for(var s=this.length-1;s>=0;s--){var a=(this.words[s]|0)+i*67108864;this.words[s]=a/e|0;i=a%e}this._strip();return r?this.ineg():this};s.prototype.divn=function t(e){return this.clone().idivn(e)};s.prototype.egcd=function t(e){n(e.negative===0);n(!e.isZero());var r=this;var i=e.clone();if(r.negative!==0){r=r.umod(e)}else{r=r.clone()}var a=new s(1);var o=new s(0);var f=new s(0);var c=new s(1);var u=0;while(r.isEven()&&i.isEven()){r.iushrn(1);i.iushrn(1);++u}var h=i.clone();var l=r.clone();while(!r.isZero()){for(var d=0,v=1;(r.words[0]&v)===0&&d<26;++d,v<<=1);if(d>0){r.iushrn(d);while(d-- >0){if(a.isOdd()||o.isOdd()){a.iadd(h);o.isub(l)}a.iushrn(1);o.iushrn(1)}}for(var b=0,p=1;(i.words[0]&p)===0&&b<26;++b,p<<=1);if(b>0){i.iushrn(b);while(b-- >0){if(f.isOdd()||c.isOdd()){f.iadd(h);c.isub(l)}f.iushrn(1);c.iushrn(1)}}if(r.cmp(i)>=0){r.isub(i);a.isub(f);o.isub(c)}else{i.isub(r);f.isub(a);c.isub(o)}}return{a:f,b:c,gcd:i.iushln(u)}};s.prototype._invmp=function t(e){n(e.negative===0);n(!e.isZero());var r=this;var i=e.clone();if(r.negative!==0){r=r.umod(e)}else{r=r.clone()}var a=new s(1);var o=new s(0);var f=i.clone();while(r.cmpn(1)>0&&i.cmpn(1)>0){for(var c=0,u=1;(r.words[0]&u)===0&&c<26;++c,u<<=1);if(c>0){r.iushrn(c);while(c-- >0){if(a.isOdd()){a.iadd(f)}a.iushrn(1)}}for(var h=0,l=1;(i.words[0]&l)===0&&h<26;++h,l<<=1);if(h>0){i.iushrn(h);while(h-- >0){if(o.isOdd()){o.iadd(f)}o.iushrn(1)}}if(r.cmp(i)>=0){r.isub(i);a.isub(o)}else{i.isub(r);o.isub(a)}}var d;if(r.cmpn(1)===0){d=a}else{d=o}if(d.cmpn(0)<0){d.iadd(e)}return d};s.prototype.gcd=function t(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var r=this.clone();var n=e.clone();r.negative=0;n.negative=0;for(var i=0;r.isEven()&&n.isEven();i++){r.iushrn(1);n.iushrn(1)}do{while(r.isEven()){r.iushrn(1)}while(n.isEven()){n.iushrn(1)}var s=r.cmp(n);if(s<0){var a=r;r=n;n=a}else if(s===0||n.cmpn(1)===0){break}r.isub(n)}while(true);return n.iushln(i)};s.prototype.invm=function t(e){return this.egcd(e).a.umod(e)};s.prototype.isEven=function t(){return(this.words[0]&1)===0};s.prototype.isOdd=function t(){return(this.words[0]&1)===1};s.prototype.andln=function t(e){return this.words[0]&e};s.prototype.bincn=function t(e){n(typeof e==="number");var r=e%26;var i=(e-r)/26;var s=1<<r;if(this.length<=i){this._expand(i+1);this.words[i]|=s;return this}var a=s;for(var o=i;a!==0&&o<this.length;o++){var f=this.words[o]|0;f+=a;a=f>>>26;f&=67108863;this.words[o]=f}if(a!==0){this.words[o]=a;this.length++}return this};s.prototype.isZero=function t(){return this.length===1&&this.words[0]===0};s.prototype.cmpn=function t(e){var r=e<0;if(this.negative!==0&&!r)return-1;if(this.negative===0&&r)return 1;this._strip();var i;if(this.length>1){i=1}else{if(r){e=-e}n(e<=67108863,"Number is too big");var s=this.words[0]|0;i=s===e?0:s<e?-1:1}if(this.negative!==0)return-i|0;return i};s.prototype.cmp=function t(e){if(this.negative!==0&&e.negative===0)return-1;if(this.negative===0&&e.negative!==0)return 1;var r=this.ucmp(e);if(this.negative!==0)return-r|0;return r};s.prototype.ucmp=function t(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;var r=0;for(var n=this.length-1;n>=0;n--){var i=this.words[n]|0;var s=e.words[n]|0;if(i===s)continue;if(i<s){r=-1}else if(i>s){r=1}break}return r};s.prototype.gtn=function t(e){return this.cmpn(e)===1};s.prototype.gt=function t(e){return this.cmp(e)===1};s.prototype.gten=function t(e){return this.cmpn(e)>=0};s.prototype.gte=function t(e){return this.cmp(e)>=0};s.prototype.ltn=function t(e){return this.cmpn(e)===-1};s.prototype.lt=function t(e){return this.cmp(e)===-1};s.prototype.lten=function t(e){return this.cmpn(e)<=0};s.prototype.lte=function t(e){return this.cmp(e)<=0};s.prototype.eqn=function t(e){return this.cmpn(e)===0};s.prototype.eq=function t(e){return this.cmp(e)===0};s.red=function t(e){return new C(e)};s.prototype.toRed=function t(e){n(!this.red,"Already a number in reduction context");n(this.negative===0,"red works only with positives");return e.convertTo(this)._forceRed(e)};s.prototype.fromRed=function t(){n(this.red,"fromRed works only with numbers in reduction context");return this.red.convertFrom(this)};s.prototype._forceRed=function t(e){this.red=e;return this};s.prototype.forceRed=function t(e){n(!this.red,"Already a number in reduction context");return this._forceRed(e)};s.prototype.redAdd=function t(e){n(this.red,"redAdd works only with red numbers");return this.red.add(this,e)};s.prototype.redIAdd=function t(e){n(this.red,"redIAdd works only with red numbers");return this.red.iadd(this,e)};s.prototype.redSub=function t(e){n(this.red,"redSub works only with red numbers");return this.red.sub(this,e)};s.prototype.redISub=function t(e){n(this.red,"redISub works only with red numbers");return this.red.isub(this,e)};s.prototype.redShl=function t(e){n(this.red,"redShl works only with red numbers");return this.red.shl(this,e)};s.prototype.redMul=function t(e){n(this.red,"redMul works only with red numbers");this.red._verify2(this,e);return this.red.mul(this,e)};s.prototype.redIMul=function t(e){n(this.red,"redMul works only with red numbers");this.red._verify2(this,e);return this.red.imul(this,e)};s.prototype.redSqr=function t(){n(this.red,"redSqr works only with red numbers");this.red._verify1(this);return this.red.sqr(this)};s.prototype.redISqr=function t(){n(this.red,"redISqr works only with red numbers");this.red._verify1(this);return this.red.isqr(this)};s.prototype.redSqrt=function t(){n(this.red,"redSqrt works only with red numbers");this.red._verify1(this);return this.red.sqrt(this)};s.prototype.redInvm=function t(){n(this.red,"redInvm works only with red numbers");this.red._verify1(this);return this.red.invm(this)};s.prototype.redNeg=function t(){n(this.red,"redNeg works only with red numbers");this.red._verify1(this);return this.red.neg(this)};s.prototype.redPow=function t(e){n(this.red&&!e.red,"redPow(normalNum)");this.red._verify1(this);return this.red.pow(this,e)};var A={k256:null,p224:null,p192:null,p25519:null};function E(t,e){this.name=t;this.p=new s(e,16);this.n=this.p.bitLength();this.k=new s(1).iushln(this.n).isub(this.p);this.tmp=this._tmp()}E.prototype._tmp=function t(){var e=new s(null);e.words=new Array(Math.ceil(this.n/13));return e};E.prototype.ireduce=function t(e){var r=e;var n;do{this.split(r,this.tmp);r=this.imulK(r);r=r.iadd(this.tmp);n=r.bitLength()}while(n>this.n);var i=n<this.n?-1:r.ucmp(this.p);if(i===0){r.words[0]=0;r.length=1}else if(i>0){r.isub(this.p)}else{if(r.strip!==undefined){r.strip()}else{r._strip()}}return r};E.prototype.split=function t(e,r){e.iushrn(this.n,0,r)};E.prototype.imulK=function t(e){return e.imul(this.k)};function k(){E.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(k,E);k.prototype.split=function t(e,r){var n=4194303;var i=Math.min(e.length,9);for(var s=0;s<i;s++){r.words[s]=e.words[s]}r.length=i;if(e.length<=9){e.words[0]=0;e.length=1;return}var a=e.words[9];r.words[r.length++]=a&n;for(s=10;s<e.length;s++){var o=e.words[s]|0;e.words[s-10]=(o&n)<<4|a>>>22;a=o}a>>>=22;e.words[s-10]=a;if(a===0&&e.length>10){e.length-=10}else{e.length-=9}};k.prototype.imulK=function t(e){e.words[e.length]=0;e.words[e.length+1]=0;e.length+=2;var r=0;for(var n=0;n<e.length;n++){var i=e.words[n]|0;r+=i*977;e.words[n]=r&67108863;r=i*64+(r/67108864|0)}if(e.words[e.length-1]===0){e.length--;if(e.words[e.length-1]===0){e.length--}}return e};function M(){E.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(M,E);function B(){E.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(B,E);function S(){E.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(S,E);S.prototype.imulK=function t(e){var r=0;for(var n=0;n<e.length;n++){var i=(e.words[n]|0)*19+r;var s=i&67108863;i>>>=26;e.words[n]=s;r=i}if(r!==0){e.words[e.length++]=r}return e};s._prime=function t(e){if(A[e])return A[e];var t;if(e==="k256"){t=new k}else if(e==="p224"){t=new M}else if(e==="p192"){t=new B}else if(e==="p25519"){t=new S}else{throw new Error("Unknown prime "+e)}A[e]=t;return t};function C(t){if(typeof t==="string"){var e=s._prime(t);this.m=e.p;this.prime=e}else{n(t.gtn(1),"modulus must be greater than 1");this.m=t;this.prime=null}}C.prototype._verify1=function t(e){n(e.negative===0,"red works only with positives");n(e.red,"red works only with red numbers")};C.prototype._verify2=function t(e,r){n((e.negative|r.negative)===0,"red works only with positives");n(e.red&&e.red===r.red,"red works only with red numbers")};C.prototype.imod=function t(e){if(this.prime)return this.prime.ireduce(e)._forceRed(this);u(e,e.umod(this.m)._forceRed(this));return e};C.prototype.neg=function t(e){if(e.isZero()){return e.clone()}return this.m.sub(e)._forceRed(this)};C.prototype.add=function t(e,r){this._verify2(e,r);var n=e.add(r);if(n.cmp(this.m)>=0){n.isub(this.m)}return n._forceRed(this)};C.prototype.iadd=function t(e,r){this._verify2(e,r);var n=e.iadd(r);if(n.cmp(this.m)>=0){n.isub(this.m)}return n};C.prototype.sub=function t(e,r){this._verify2(e,r);var n=e.sub(r);if(n.cmpn(0)<0){n.iadd(this.m)}return n._forceRed(this)};C.prototype.isub=function t(e,r){this._verify2(e,r);var n=e.isub(r);if(n.cmpn(0)<0){n.iadd(this.m)}return n};C.prototype.shl=function t(e,r){this._verify1(e);return this.imod(e.ushln(r))};C.prototype.imul=function t(e,r){this._verify2(e,r);return this.imod(e.imul(r))};C.prototype.mul=function t(e,r){this._verify2(e,r);return this.imod(e.mul(r))};C.prototype.isqr=function t(e){return this.imul(e,e.clone())};C.prototype.sqr=function t(e){return this.mul(e,e)};C.prototype.sqrt=function t(e){if(e.isZero())return e.clone();var r=this.m.andln(3);n(r%2===1);if(r===3){var i=this.m.add(new s(1)).iushrn(2);return this.pow(e,i)}var a=this.m.subn(1);var o=0;while(!a.isZero()&&a.andln(1)===0){o++;a.iushrn(1)}n(!a.isZero());var f=new s(1).toRed(this);var c=f.redNeg();var u=this.m.subn(1).iushrn(1);var h=this.m.bitLength();h=new s(2*h*h).toRed(this);while(this.pow(h,u).cmp(c)!==0){h.redIAdd(c)}var l=this.pow(h,a);var d=this.pow(e,a.addn(1).iushrn(1));var v=this.pow(e,a);var b=o;while(v.cmp(f)!==0){var p=v;for(var g=0;p.cmp(f)!==0;g++){p=p.redSqr()}n(g<b);var y=this.pow(l,new s(1).iushln(b-g-1));d=d.redMul(y);l=y.redSqr();v=v.redMul(l);b=g}return d};C.prototype.invm=function t(e){var r=e._invmp(this.m);if(r.negative!==0){r.negative=0;return this.imod(r).redNeg()}else{return this.imod(r)}};C.prototype.pow=function t(e,r){if(r.isZero())return new s(1).toRed(this);if(r.cmpn(1)===0)return e.clone();var n=4;var i=new Array(1<<n);i[0]=new s(1).toRed(this);i[1]=e;for(var a=2;a<i.length;a++){i[a]=this.mul(i[a-1],e)}var o=i[0];var f=0;var c=0;var u=r.bitLength()%26;if(u===0){u=26}for(a=r.length-1;a>=0;a--){var h=r.words[a];for(var l=u-1;l>=0;l--){var d=h>>l&1;if(o!==i[0]){o=this.sqr(o)}if(d===0&&f===0){c=0;continue}f<<=1;f|=d;c++;if(c!==n&&(a!==0||l!==0))continue;o=this.mul(o,i[f]);c=0;f=0}u=26}return o};C.prototype.convertTo=function t(e){var r=e.umod(this.m);return r===e?r.clone():r};C.prototype.convertFrom=function t(e){var r=e.clone();r.red=null;return r};s.mont=function t(e){return new x(e)};function x(t){C.call(this,t);this.shift=this.m.bitLength();if(this.shift%26!==0){this.shift+=26-this.shift%26}this.r=new s(1).iushln(this.shift);this.r2=this.imod(this.r.sqr());this.rinv=this.r._invmp(this.m);this.minv=this.rinv.mul(this.r).isubn(1).div(this.m);this.minv=this.minv.umod(this.r);this.minv=this.r.sub(this.minv)}i(x,C);x.prototype.convertTo=function t(e){return this.imod(e.ushln(this.shift))};x.prototype.convertFrom=function t(e){var r=this.imod(e.mul(this.rinv));r.red=null;return r};x.prototype.imul=function t(e,r){if(e.isZero()||r.isZero()){e.words[0]=0;e.length=1;return e}var n=e.imul(r);var i=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);var s=n.isub(i).iushrn(this.shift);var a=s;if(s.cmp(this.m)>=0){a=s.isub(this.m)}else if(s.cmpn(0)<0){a=s.iadd(this.m)}return a._forceRed(this)};x.prototype.mul=function t(e,r){if(e.isZero()||r.isZero())return new s(0)._forceRed(this);var n=e.mul(r);var i=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);var a=n.isub(i).iushrn(this.shift);var o=a;if(a.cmp(this.m)>=0){o=a.isub(this.m)}else if(a.cmpn(0)<0){o=a.iadd(this.m)}return o._forceRed(this)};x.prototype.invm=function t(e){var r=this.imod(e._invmp(this.m).mul(this.r2));return r._forceRed(this)}})(t,e)}));const st="logger/5.7.0";let at=false;let ot=false;const ft={debug:1,default:2,info:2,warning:3,error:4,off:5};let ct=ft["default"];let ut=null;function ht(){try{const t=[];["NFD","NFC","NFKD","NFKC"].forEach((e=>{try{if("test".normalize(e)!=="test"){throw new Error("bad normalize")}}catch(r){t.push(e)}}));if(t.length){throw new Error("missing "+t.join(", "))}if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769)){throw new Error("broken implementation")}}catch(t){return t.message}return null}const lt=ht();var dt;(function(t){t["DEBUG"]="DEBUG";t["INFO"]="INFO";t["WARNING"]="WARNING";t["ERROR"]="ERROR";t["OFF"]="OFF"})(dt||(dt={}));var vt;(function(t){t["UNKNOWN_ERROR"]="UNKNOWN_ERROR";t["NOT_IMPLEMENTED"]="NOT_IMPLEMENTED";t["UNSUPPORTED_OPERATION"]="UNSUPPORTED_OPERATION";t["NETWORK_ERROR"]="NETWORK_ERROR";t["SERVER_ERROR"]="SERVER_ERROR";t["TIMEOUT"]="TIMEOUT";t["BUFFER_OVERRUN"]="BUFFER_OVERRUN";t["NUMERIC_FAULT"]="NUMERIC_FAULT";t["MISSING_NEW"]="MISSING_NEW";t["INVALID_ARGUMENT"]="INVALID_ARGUMENT";t["MISSING_ARGUMENT"]="MISSING_ARGUMENT";t["UNEXPECTED_ARGUMENT"]="UNEXPECTED_ARGUMENT";t["CALL_EXCEPTION"]="CALL_EXCEPTION";t["INSUFFICIENT_FUNDS"]="INSUFFICIENT_FUNDS";t["NONCE_EXPIRED"]="NONCE_EXPIRED";t["REPLACEMENT_UNDERPRICED"]="REPLACEMENT_UNDERPRICED";t["UNPREDICTABLE_GAS_LIMIT"]="UNPREDICTABLE_GAS_LIMIT";t["TRANSACTION_REPLACED"]="TRANSACTION_REPLACED";t["ACTION_REJECTED"]="ACTION_REJECTED"})(vt||(vt={}));const bt="0123456789abcdef";class pt{constructor(t){Object.defineProperty(this,"version",{enumerable:true,value:t,writable:false})}_log(t,e){const r=t.toLowerCase();if(ft[r]==null){this.throwArgumentError("invalid log level name","logLevel",t)}if(ct>ft[r]){return}console.log.apply(console,e)}debug(...t){this._log(pt.levels.DEBUG,t)}info(...t){this._log(pt.levels.INFO,t)}warn(...t){this._log(pt.levels.WARNING,t)}makeError(t,e,r){if(ot){return this.makeError("censored error",e,{})}if(!e){e=pt.errors.UNKNOWN_ERROR}if(!r){r={}}const n=[];Object.keys(r).forEach((t=>{const e=r[t];try{if(e instanceof Uint8Array){let r="";for(let t=0;t<e.length;t++){r+=bt[e[t]>>4];r+=bt[e[t]&15]}n.push(t+"=Uint8Array(0x"+r+")")}else{n.push(t+"="+JSON.stringify(e))}}catch(e){n.push(t+"="+JSON.stringify(r[t].toString()))}}));n.push(`code=${e}`);n.push(`version=${this.version}`);const i=t;let s="";switch(e){case vt.NUMERIC_FAULT:{s="NUMERIC_FAULT";const e=t;switch(e){case"overflow":case"underflow":case"division-by-zero":s+="-"+e;break;case"negative-power":case"negative-width":s+="-unsupported";break;case"unbound-bitwise-result":s+="-unbound-result";break}break}case vt.CALL_EXCEPTION:case vt.INSUFFICIENT_FUNDS:case vt.MISSING_NEW:case vt.NONCE_EXPIRED:case vt.REPLACEMENT_UNDERPRICED:case vt.TRANSACTION_REPLACED:case vt.UNPREDICTABLE_GAS_LIMIT:s=e;break}if(s){t+=" [ See: https://links.ethers.org/v5-errors-"+s+" ]"}if(n.length){t+=" ("+n.join(", ")+")"}const a=new Error(t);a.reason=i;a.code=e;Object.keys(r).forEach((function(t){a[t]=r[t]}));return a}throwError(t,e,r){throw this.makeError(t,e,r)}throwArgumentError(t,e,r){return this.throwError(t,pt.errors.INVALID_ARGUMENT,{argument:e,value:r})}assert(t,e,r,n){if(!!t){return}this.throwError(e,r,n)}assertArgument(t,e,r,n){if(!!t){return}this.throwArgumentError(e,r,n)}checkNormalize(t){if(lt){this.throwError("platform missing String.prototype.normalize",pt.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:lt})}}checkSafeUint53(t,e){if(typeof t!=="number"){return}if(e==null){e="value not safe"}if(t<0||t>=9007199254740991){this.throwError(e,pt.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:t})}if(t%1){this.throwError(e,pt.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:t})}}checkArgumentCount(t,e,r){if(r){r=": "+r}else{r=""}if(t<e){this.throwError("missing argument"+r,pt.errors.MISSING_ARGUMENT,{count:t,expectedCount:e})}if(t>e){this.throwError("too many arguments"+r,pt.errors.UNEXPECTED_ARGUMENT,{count:t,expectedCount:e})}}checkNew(t,e){if(t===Object||t==null){this.throwError("missing new",pt.errors.MISSING_NEW,{name:e.name})}}checkAbstract(t,e){if(t===e){this.throwError("cannot instantiate abstract class "+JSON.stringify(e.name)+" directly; use a sub-class",pt.errors.UNSUPPORTED_OPERATION,{name:t.name,operation:"new"})}else if(t===Object||t==null){this.throwError("missing new",pt.errors.MISSING_NEW,{name:e.name})}}static globalLogger(){if(!ut){ut=new pt(st)}return ut}static setCensorship(t,e){if(!t&&e){this.globalLogger().throwError("cannot permanently disable censorship",pt.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}if(at){if(!t){return}this.globalLogger().throwError("error censorship permanent",pt.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}ot=!!t;at=!!e}static setLogLevel(t){const e=ft[t.toLowerCase()];if(e==null){pt.globalLogger().warn("invalid log level - "+t);return}ct=e}static from(t){return new pt(t)}}pt.errors=vt;pt.levels=dt;const gt=Object.freeze({__proto__:null,get LogLevel(){return dt},get ErrorCode(){return vt},Logger:pt});const yt="bytes/5.7.0";const wt=new pt(yt);function mt(t){return!!t.toHexString}function At(t){if(t.slice){return t}t.slice=function(){const e=Array.prototype.slice.call(arguments);return At(new Uint8Array(Array.prototype.slice.apply(t,e)))};return t}function Et(t){return Pt(t)&&!(t.length%2)||Mt(t)}function kt(t){return typeof t==="number"&&t==t&&t%1===0}function Mt(t){if(t==null){return false}if(t.constructor===Uint8Array){return true}if(typeof t==="string"){return false}if(!kt(t.length)||t.length<0){return false}for(let e=0;e<t.length;e++){const r=t[e];if(!kt(r)||r<0||r>=256){return false}}return true}function Bt(t,e){if(!e){e={}}if(typeof t==="number"){wt.checkSafeUint53(t,"invalid arrayify value");const e=[];while(t){e.unshift(t&255);t=parseInt(String(t/256))}if(e.length===0){e.push(0)}return At(new Uint8Array(e))}if(e.allowMissingPrefix&&typeof t==="string"&&t.substring(0,2)!=="0x"){t="0x"+t}if(mt(t)){t=t.toHexString()}if(Pt(t)){let r=t.substring(2);if(r.length%2){if(e.hexPad==="left"){r="0"+r}else if(e.hexPad==="right"){r+="0"}else{wt.throwArgumentError("hex data is odd-length","value",t)}}const n=[];for(let t=0;t<r.length;t+=2){n.push(parseInt(r.substring(t,t+2),16))}return At(new Uint8Array(n))}if(Mt(t)){return At(new Uint8Array(t))}return wt.throwArgumentError("invalid arrayify value","value",t)}function St(t){const e=t.map((t=>Bt(t)));const r=e.reduce(((t,e)=>t+e.length),0);const n=new Uint8Array(r);e.reduce(((t,e)=>{n.set(e,t);return t+e.length}),0);return At(n)}function Ct(t){let e=Bt(t);if(e.length===0){return e}let r=0;while(r<e.length&&e[r]===0){r++}if(r){e=e.slice(r)}return e}function xt(t,e){t=Bt(t);if(t.length>e){wt.throwArgumentError("value out of range","value",arguments[0])}const r=new Uint8Array(e);r.set(t,e-t.length);return At(r)}function Pt(t,e){if(typeof t!=="string"||!t.match(/^0x[0-9A-Fa-f]*$/)){return false}if(e&&t.length!==2+2*e){return false}return true}const It="0123456789abcdef";function Tt(t,e){if(!e){e={}}if(typeof t==="number"){wt.checkSafeUint53(t,"invalid hexlify value");let e="";while(t){e=It[t&15]+e;t=Math.floor(t/16)}if(e.length){if(e.length%2){e="0"+e}return"0x"+e}return"0x00"}if(typeof t==="bigint"){t=t.toString(16);if(t.length%2){return"0x0"+t}return"0x"+t}if(e.allowMissingPrefix&&typeof t==="string"&&t.substring(0,2)!=="0x"){t="0x"+t}if(mt(t)){return t.toHexString()}if(Pt(t)){if(t.length%2){if(e.hexPad==="left"){t="0x0"+t.substring(2)}else if(e.hexPad==="right"){t+="0"}else{wt.throwArgumentError("hex data is odd-length","value",t)}}return t.toLowerCase()}if(Mt(t)){let e="0x";for(let r=0;r<t.length;r++){let n=t[r];e+=It[(n&240)>>4]+It[n&15]}return e}return wt.throwArgumentError("invalid hexlify value","value",t)}function Ot(t){if(typeof t!=="string"){t=Tt(t)}else if(!Pt(t)||t.length%2){return null}return(t.length-2)/2}function Dt(t,e,r){if(typeof t!=="string"){t=Tt(t)}else if(!Pt(t)||t.length%2){wt.throwArgumentError("invalid hexData","value",t)}e=2+2*e;if(r!=null){return"0x"+t.substring(e,2+2*r)}return"0x"+t.substring(e)}function Nt(t){let e="0x";t.forEach((t=>{e+=Tt(t).substring(2)}));return e}function Ut(t){const e=jt(Tt(t,{hexPad:"left"}));if(e==="0x"){return"0x0"}return e}function jt(t){if(typeof t!=="string"){t=Tt(t)}if(!Pt(t)){wt.throwArgumentError("invalid hex string","value",t)}t=t.substring(2);let e=0;while(e<t.length&&t[e]==="0"){e++}return"0x"+t.substring(e)}function Rt(t,e){if(typeof t!=="string"){t=Tt(t)}else if(!Pt(t)){wt.throwArgumentError("invalid hex string","value",t)}if(t.length>2*e+2){wt.throwArgumentError("value out of range","value",arguments[1])}while(t.length<2*e+2){t="0x0"+t.substring(2)}return t}function Ft(t){const e={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(Et(t)){let r=Bt(t);if(r.length===64){e.v=27+(r[32]>>7);r[32]&=127;e.r=Tt(r.slice(0,32));e.s=Tt(r.slice(32,64))}else if(r.length===65){e.r=Tt(r.slice(0,32));e.s=Tt(r.slice(32,64));e.v=r[64]}else{wt.throwArgumentError("invalid signature string","signature",t)}if(e.v<27){if(e.v===0||e.v===1){e.v+=27}else{wt.throwArgumentError("signature invalid v byte","signature",t)}}e.recoveryParam=1-e.v%2;if(e.recoveryParam){r[32]|=128}e._vs=Tt(r.slice(32,64))}else{e.r=t.r;e.s=t.s;e.v=t.v;e.recoveryParam=t.recoveryParam;e._vs=t._vs;if(e._vs!=null){const r=xt(Bt(e._vs),32);e._vs=Tt(r);const n=r[0]>=128?1:0;if(e.recoveryParam==null){e.recoveryParam=n}else if(e.recoveryParam!==n){wt.throwArgumentError("signature recoveryParam mismatch _vs","signature",t)}r[0]&=127;const i=Tt(r);if(e.s==null){e.s=i}else if(e.s!==i){wt.throwArgumentError("signature v mismatch _vs","signature",t)}}if(e.recoveryParam==null){if(e.v==null){wt.throwArgumentError("signature missing v and recoveryParam","signature",t)}else if(e.v===0||e.v===1){e.recoveryParam=e.v}else{e.recoveryParam=1-e.v%2}}else{if(e.v==null){e.v=27+e.recoveryParam}else{const r=e.v===0||e.v===1?e.v:1-e.v%2;if(e.recoveryParam!==r){wt.throwArgumentError("signature recoveryParam mismatch v","signature",t)}}}if(e.r==null||!Pt(e.r)){wt.throwArgumentError("signature missing or invalid r","signature",t)}else{e.r=Rt(e.r,32)}if(e.s==null||!Pt(e.s)){wt.throwArgumentError("signature missing or invalid s","signature",t)}else{e.s=Rt(e.s,32)}const r=Bt(e.s);if(r[0]>=128){wt.throwArgumentError("signature s out of range","signature",t)}if(e.recoveryParam){r[0]|=128}const n=Tt(r);if(e._vs){if(!Pt(e._vs)){wt.throwArgumentError("signature invalid _vs","signature",t)}e._vs=Rt(e._vs,32)}if(e._vs==null){e._vs=n}else if(e._vs!==n){wt.throwArgumentError("signature _vs mismatch v and s","signature",t)}}e.yParityAndS=e._vs;e.compact=e.r+e.yParityAndS.substring(2);return e}function Lt(t){t=Ft(t);return Tt(St([t.r,t.s,t.recoveryParam?"0x1c":"0x1b"]))}const Qt=Object.freeze({__proto__:null,isBytesLike:Et,isBytes:Mt,arrayify:Bt,concat:St,stripZeros:Ct,zeroPad:xt,isHexString:Pt,hexlify:Tt,hexDataLength:Ot,hexDataSlice:Dt,hexConcat:Nt,hexValue:Ut,hexStripZeros:jt,hexZeroPad:Rt,splitSignature:Ft,joinSignature:Lt});const Ht="bignumber/5.7.0";var Gt=it.BN;const Kt=new pt(Ht);const Jt={};const zt=9007199254740991;function Wt(t){return t!=null&&(Vt.isBigNumber(t)||typeof t==="number"&&t%1===0||typeof t==="string"&&!!t.match(/^-?[0-9]+$/)||Pt(t)||typeof t==="bigint"||Mt(t))}let qt=false;class Vt{constructor(t,e){if(t!==Jt){Kt.throwError("cannot call constructor directly; use BigNumber.from",pt.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"})}this._hex=e;this._isBigNumber=true;Object.freeze(this)}fromTwos(t){return _t(Zt(this).fromTwos(t))}toTwos(t){return _t(Zt(this).toTwos(t))}abs(){if(this._hex[0]==="-"){return Vt.from(this._hex.substring(1))}return this}add(t){return _t(Zt(this).add(Zt(t)))}sub(t){return _t(Zt(this).sub(Zt(t)))}div(t){const e=Vt.from(t);if(e.isZero()){Xt("division-by-zero","div")}return _t(Zt(this).div(Zt(t)))}mul(t){return _t(Zt(this).mul(Zt(t)))}mod(t){const e=Zt(t);if(e.isNeg()){Xt("division-by-zero","mod")}return _t(Zt(this).umod(e))}pow(t){const e=Zt(t);if(e.isNeg()){Xt("negative-power","pow")}return _t(Zt(this).pow(e))}and(t){const e=Zt(t);if(this.isNegative()||e.isNeg()){Xt("unbound-bitwise-result","and")}return _t(Zt(this).and(e))}or(t){const e=Zt(t);if(this.isNegative()||e.isNeg()){Xt("unbound-bitwise-result","or")}return _t(Zt(this).or(e))}xor(t){const e=Zt(t);if(this.isNegative()||e.isNeg()){Xt("unbound-bitwise-result","xor")}return _t(Zt(this).xor(e))}mask(t){if(this.isNegative()||t<0){Xt("negative-width","mask")}return _t(Zt(this).maskn(t))}shl(t){if(this.isNegative()||t<0){Xt("negative-width","shl")}return _t(Zt(this).shln(t))}shr(t){if(this.isNegative()||t<0){Xt("negative-width","shr")}return _t(Zt(this).shrn(t))}eq(t){return Zt(this).eq(Zt(t))}lt(t){return Zt(this).lt(Zt(t))}lte(t){return Zt(this).lte(Zt(t))}gt(t){return Zt(this).gt(Zt(t))}gte(t){return Zt(this).gte(Zt(t))}isNegative(){return this._hex[0]==="-"}isZero(){return Zt(this).isZero()}toNumber(){try{return Zt(this).toNumber()}catch(t){Xt("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch(t){}return Kt.throwError("this platform does not support BigInt",pt.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){if(arguments.length>0){if(arguments[0]===10){if(!qt){qt=true;Kt.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")}}else if(arguments[0]===16){Kt.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",pt.errors.UNEXPECTED_ARGUMENT,{})}else{Kt.throwError("BigNumber.toString does not accept parameters",pt.errors.UNEXPECTED_ARGUMENT,{})}}return Zt(this).toString(10)}toHexString(){return this._hex}toJSON(t){return{type:"BigNumber",hex:this.toHexString()}}static from(t){if(t instanceof Vt){return t}if(typeof t==="string"){if(t.match(/^-?0x[0-9a-f]+$/i)){return new Vt(Jt,Yt(t))}if(t.match(/^-?[0-9]+$/)){return new Vt(Jt,Yt(new Gt(t)))}return Kt.throwArgumentError("invalid BigNumber string","value",t)}if(typeof t==="number"){if(t%1){Xt("underflow","BigNumber.from",t)}if(t>=zt||t<=-zt){Xt("overflow","BigNumber.from",t)}return Vt.from(String(t))}const e=t;if(typeof e==="bigint"){return Vt.from(e.toString())}if(Mt(e)){return Vt.from(Tt(e))}if(e){if(e.toHexString){const t=e.toHexString();if(typeof t==="string"){return Vt.from(t)}}else{let t=e._hex;if(t==null&&e.type==="BigNumber"){t=e.hex}if(typeof t==="string"){if(Pt(t)||t[0]==="-"&&Pt(t.substring(1))){return Vt.from(t)}}}}return Kt.throwArgumentError("invalid BigNumber value","value",t)}static isBigNumber(t){return!!(t&&t._isBigNumber)}}function Yt(t){if(typeof t!=="string"){return Yt(t.toString(16))}if(t[0]==="-"){t=t.substring(1);if(t[0]==="-"){Kt.throwArgumentError("invalid hex","value",t)}t=Yt(t);if(t==="0x00"){return t}return"-"+t}if(t.substring(0,2)!=="0x"){t="0x"+t}if(t==="0x"){return"0x00"}if(t.length%2){t="0x0"+t.substring(2)}while(t.length>4&&t.substring(0,4)==="0x00"){t="0x"+t.substring(4)}return t}function _t(t){return Vt.from(Yt(t))}function Zt(t){const e=Vt.from(t).toHexString();if(e[0]==="-"){return new Gt("-"+e.substring(3),16)}return new Gt(e.substring(2),16)}function Xt(t,e,r){const n={fault:t,operation:e};if(r!=null){n.value=r}return Kt.throwError(t,pt.errors.NUMERIC_FAULT,n)}function $t(t){return new Gt(t,36).toString(16)}function te(t){return new Gt(t,16).toString(36)}const ee=new pt(Ht);const re={};const ne=Vt.from(0);const ie=Vt.from(-1);function se(t,e,r,n){const i={fault:e,operation:r};if(n!==undefined){i.value=n}return ee.throwError(t,pt.errors.NUMERIC_FAULT,i)}let ae="0";while(ae.length<256){ae+=ae}function oe(t){if(typeof t!=="number"){try{t=Vt.from(t).toNumber()}catch(t){}}if(typeof t==="number"&&t>=0&&t<=256&&!(t%1)){return"1"+ae.substring(0,t)}return ee.throwArgumentError("invalid decimal size","decimals",t)}function fe(t,e){if(e==null){e=0}const r=oe(e);t=Vt.from(t);const n=t.lt(ne);if(n){t=t.mul(ie)}let i=t.mod(r).toString();while(i.length<r.length-1){i="0"+i}i=i.match(/^([0-9]*[1-9]|0)(0*)/)[1];const s=t.div(r).toString();if(r.length===1){t=s}else{t=s+"."+i}if(n){t="-"+t}return t}function ce(t,e){if(e==null){e=0}const r=oe(e);if(typeof t!=="string"||!t.match(/^-?[0-9.]+$/)){ee.throwArgumentError("invalid decimal value","value",t)}const n=t.substring(0,1)==="-";if(n){t=t.substring(1)}if(t==="."){ee.throwArgumentError("missing value","value",t)}const i=t.split(".");if(i.length>2){ee.throwArgumentError("too many decimal points","value",t)}let s=i[0],a=i[1];if(!s){s="0"}if(!a){a="0"}while(a[a.length-1]==="0"){a=a.substring(0,a.length-1)}if(a.length>r.length-1){se("fractional component exceeds decimals","underflow","parseFixed")}if(a===""){a="0"}while(a.length<r.length-1){a+="0"}const o=Vt.from(s);const f=Vt.from(a);let c=o.mul(r).add(f);if(n){c=c.mul(ie)}return c}class ue{constructor(t,e,r,n){if(t!==re){ee.throwError("cannot use FixedFormat constructor; use FixedFormat.from",pt.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"})}this.signed=e;this.width=r;this.decimals=n;this.name=(e?"":"u")+"fixed"+String(r)+"x"+String(n);this._multiplier=oe(n);Object.freeze(this)}static from(t){if(t instanceof ue){return t}if(typeof t==="number"){t=`fixed128x${t}`}let e=true;let r=128;let n=18;if(typeof t==="string"){if(t==="fixed");else if(t==="ufixed"){e=false}else{const i=t.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);if(!i){ee.throwArgumentError("invalid fixed format","format",t)}e=i[1]!=="u";r=parseInt(i[2]);n=parseInt(i[3])}}else if(t){const i=(e,r,n)=>{if(t[e]==null){return n}if(typeof t[e]!==r){ee.throwArgumentError("invalid fixed format ("+e+" not "+r+")","format."+e,t[e])}return t[e]};e=i("signed","boolean",e);r=i("width","number",r);n=i("decimals","number",n)}if(r%8){ee.throwArgumentError("invalid fixed format width (not byte aligned)","format.width",r)}if(n>80){ee.throwArgumentError("invalid fixed format (decimals too large)","format.decimals",n)}return new ue(re,e,r,n)}}class he{constructor(t,e,r,n){if(t!==re){ee.throwError("cannot use FixedNumber constructor; use FixedNumber.from",pt.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"})}this.format=n;this._hex=e;this._value=r;this._isFixedNumber=true;Object.freeze(this)}_checkFormat(t){if(this.format.name!==t.format.name){ee.throwArgumentError("incompatible format; use fixedNumber.toFormat","other",t)}}addUnsafe(t){this._checkFormat(t);const e=ce(this._value,this.format.decimals);const r=ce(t._value,t.format.decimals);return he.fromValue(e.add(r),this.format.decimals,this.format)}subUnsafe(t){this._checkFormat(t);const e=ce(this._value,this.format.decimals);const r=ce(t._value,t.format.decimals);return he.fromValue(e.sub(r),this.format.decimals,this.format)}mulUnsafe(t){this._checkFormat(t);const e=ce(this._value,this.format.decimals);const r=ce(t._value,t.format.decimals);return he.fromValue(e.mul(r).div(this.format._multiplier),this.format.decimals,this.format)}divUnsafe(t){this._checkFormat(t);const e=ce(this._value,this.format.decimals);const r=ce(t._value,t.format.decimals);return he.fromValue(e.mul(this.format._multiplier).div(r),this.format.decimals,this.format)}floor(){const t=this.toString().split(".");if(t.length===1){t.push("0")}let e=he.from(t[0],this.format);const r=!t[1].match(/^(0*)$/);if(this.isNegative()&&r){e=e.subUnsafe(le.toFormat(e.format))}return e}ceiling(){const t=this.toString().split(".");if(t.length===1){t.push("0")}let e=he.from(t[0],this.format);const r=!t[1].match(/^(0*)$/);if(!this.isNegative()&&r){e=e.addUnsafe(le.toFormat(e.format))}return e}round(t){if(t==null){t=0}const e=this.toString().split(".");if(e.length===1){e.push("0")}if(t<0||t>80||t%1){ee.throwArgumentError("invalid decimal count","decimals",t)}if(e[1].length<=t){return this}const r=he.from("1"+ae.substring(0,t),this.format);const n=de.toFormat(this.format);return this.mulUnsafe(r).addUnsafe(n).floor().divUnsafe(r)}isZero(){return this._value==="0.0"||this._value==="0"}isNegative(){return this._value[0]==="-"}toString(){return this._value}toHexString(t){if(t==null){return this._hex}if(t%8){ee.throwArgumentError("invalid byte width","width",t)}const e=Vt.from(this._hex).fromTwos(this.format.width).toTwos(t).toHexString();return Rt(e,t/8)}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(t){return he.fromString(this._value,t)}static fromValue(t,e,r){if(r==null&&e!=null&&!Wt(e)){r=e;e=null}if(e==null){e=0}if(r==null){r="fixed"}return he.fromString(fe(t,e),ue.from(r))}static fromString(t,e){if(e==null){e="fixed"}const r=ue.from(e);const n=ce(t,r.decimals);if(!r.signed&&n.lt(ne)){se("unsigned value cannot be negative","overflow","value",t)}let i=null;if(r.signed){i=n.toTwos(r.width).toHexString()}else{i=n.toHexString();i=Rt(i,r.width/8)}const s=fe(n,r.decimals);return new he(re,i,s,r)}static fromBytes(t,e){if(e==null){e="fixed"}const r=ue.from(e);if(Bt(t).length>r.width/8){throw new Error("overflow")}let n=Vt.from(t);if(r.signed){n=n.fromTwos(r.width)}const i=n.toTwos((r.signed?0:1)+r.width).toHexString();const s=fe(n,r.decimals);return new he(re,i,s,r)}static from(t,e){if(typeof t==="string"){return he.fromString(t,e)}if(Mt(t)){return he.fromBytes(t,e)}try{return he.fromValue(t,0,e)}catch(t){if(t.code!==pt.errors.INVALID_ARGUMENT){throw t}}return ee.throwArgumentError("invalid FixedNumber value","value",t)}static isFixedNumber(t){return!!(t&&t._isFixedNumber)}}const le=he.from(1);const de=he.from("0.5");const ve="properties/5.7.0";var be=undefined&&undefined.__awaiter||function(t,e,r,n){function i(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,s){function a(t){try{f(n.next(t))}catch(t){s(t)}}function o(t){try{f(n["throw"](t))}catch(t){s(t)}}function f(t){t.done?r(t.value):i(t.value).then(a,o)}f((n=n.apply(t,e||[])).next())}))};const pe=new pt(ve);function ge(t,e,r){Object.defineProperty(t,e,{enumerable:true,value:r,writable:false})}function ye(t,e){for(let r=0;r<32;r++){if(t[e]){return t[e]}if(!t.prototype||typeof t.prototype!=="object"){break}t=Object.getPrototypeOf(t.prototype).constructor}return null}function we(t){return be(this,void 0,void 0,(function*(){const e=Object.keys(t).map((e=>{const r=t[e];return Promise.resolve(r).then((t=>({key:e,value:t})))}));const r=yield Promise.all(e);return r.reduce(((t,e)=>{t[e.key]=e.value;return t}),{})}))}function me(t,e){if(!t||typeof t!=="object"){pe.throwArgumentError("invalid object","object",t)}Object.keys(t).forEach((r=>{if(!e[r]){pe.throwArgumentError("invalid object key - "+r,"transaction:"+r,t)}}))}function Ae(t){const e={};for(const r in t){e[r]=t[r]}return e}const Ee={bigint:true,boolean:true,function:true,number:true,string:true};function ke(t){if(t===undefined||t===null||Ee[typeof t]){return true}if(Array.isArray(t)||typeof t==="object"){if(!Object.isFrozen(t)){return false}const e=Object.keys(t);for(let r=0;r<e.length;r++){let n=null;try{n=t[e[r]]}catch(t){continue}if(!ke(n)){return false}}return true}return pe.throwArgumentError(`Cannot deepCopy ${typeof t}`,"object",t)}function Me(t){if(ke(t)){return t}if(Array.isArray(t)){return Object.freeze(t.map((t=>Be(t))))}if(typeof t==="object"){const e={};for(const r in t){const n=t[r];if(n===undefined){continue}ge(e,r,Be(n))}return e}return pe.throwArgumentError(`Cannot deepCopy ${typeof t}`,"object",t)}function Be(t){return Me(t)}class Se{constructor(t){for(const e in t){this[e]=Be(t[e])}}}const Ce=Object.freeze({__proto__:null,defineReadOnly:ge,getStatic:ye,resolveProperties:we,checkProperties:me,shallowCopy:Ae,deepCopy:Be,Description:Se});const xe="abi/5.7.0";const Pe=new pt(xe);const Ie={};let Te={calldata:true,memory:true,storage:true};let Oe={calldata:true,memory:true};function De(t,e){if(t==="bytes"||t==="string"){if(Te[e]){return true}}else if(t==="address"){if(e==="payable"){return true}}else if(t.indexOf("[")>=0||t==="tuple"){if(Oe[e]){return true}}if(Te[e]||e==="payable"){Pe.throwArgumentError("invalid modifier","name",e)}return false}function Ne(t,e){let r=t;function n(e){Pe.throwArgumentError(`unexpected character at position ${e}`,"param",t)}t=t.replace(/\s/g," ");function i(t){let r={type:"",name:"",parent:t,state:{allowType:true}};if(e){r.indexed=false}return r}let s={type:"",name:"",state:{allowType:true}};let a=s;for(let r=0;r<t.length;r++){let s=t[r];switch(s){case"(":if(a.state.allowType&&a.type===""){a.type="tuple"}else if(!a.state.allowParams){n(r)}a.state.allowType=false;a.type=Ye(a.type);a.components=[i(a)];a=a.components[0];break;case")":delete a.state;if(a.name==="indexed"){if(!e){n(r)}a.indexed=true;a.name=""}if(De(a.type,a.name)){a.name=""}a.type=Ye(a.type);let t=a;a=a.parent;if(!a){n(r)}delete t.parent;a.state.allowParams=false;a.state.allowName=true;a.state.allowArray=true;break;case",":delete a.state;if(a.name==="indexed"){if(!e){n(r)}a.indexed=true;a.name=""}if(De(a.type,a.name)){a.name=""}a.type=Ye(a.type);let o=i(a.parent);a.parent.components.push(o);delete a.parent;a=o;break;case" ":if(a.state.allowType){if(a.type!==""){a.type=Ye(a.type);delete a.state.allowType;a.state.allowName=true;a.state.allowParams=true}}if(a.state.allowName){if(a.name!==""){if(a.name==="indexed"){if(!e){n(r)}if(a.indexed){n(r)}a.indexed=true;a.name=""}else if(De(a.type,a.name)){a.name=""}else{a.state.allowName=false}}}break;case"[":if(!a.state.allowArray){n(r)}a.type+=s;a.state.allowArray=false;a.state.allowName=false;a.state.readArray=true;break;case"]":if(!a.state.readArray){n(r)}a.type+=s;a.state.readArray=false;a.state.allowArray=true;a.state.allowName=true;break;default:if(a.state.allowType){a.type+=s;a.state.allowParams=true;a.state.allowArray=true}else if(a.state.allowName){a.name+=s;delete a.state.allowArray}else if(a.state.readArray){a.type+=s}else{n(r)}}}if(a.parent){Pe.throwArgumentError("unexpected eof","param",t)}delete s.state;if(a.name==="indexed"){if(!e){n(r.length-7)}if(a.indexed){n(r.length-7)}a.indexed=true;a.name=""}else if(De(a.type,a.name)){a.name=""}s.type=Ye(s.type);return s}function Ue(t,e){for(let r in e){ge(t,r,e[r])}}const je=Object.freeze({sighash:"sighash",minimal:"minimal",full:"full",json:"json"});const Re=new RegExp(/^(.*)\[([0-9]*)\]$/);class Fe{constructor(t,e){if(t!==Ie){Pe.throwError("use fromString",pt.errors.UNSUPPORTED_OPERATION,{operation:"new ParamType()"})}Ue(this,e);let r=this.type.match(Re);if(r){Ue(this,{arrayLength:parseInt(r[2]||"-1"),arrayChildren:Fe.fromObject({type:r[1],components:this.components}),baseType:"array"})}else{Ue(this,{arrayLength:null,arrayChildren:null,baseType:this.components!=null?"tuple":this.type})}this._isParamType=true;Object.freeze(this)}format(t){if(!t){t=je.sighash}if(!je[t]){Pe.throwArgumentError("invalid format type","format",t)}if(t===je.json){let e={type:this.baseType==="tuple"?"tuple":this.type,name:this.name||undefined};if(typeof this.indexed==="boolean"){e.indexed=this.indexed}if(this.components){e.components=this.components.map((e=>JSON.parse(e.format(t))))}return JSON.stringify(e)}let e="";if(this.baseType==="array"){e+=this.arrayChildren.format(t);e+="["+(this.arrayLength<0?"":String(this.arrayLength))+"]"}else{if(this.baseType==="tuple"){if(t!==je.sighash){e+=this.type}e+="("+this.components.map((e=>e.format(t))).join(t===je.full?", ":",")+")"}else{e+=this.type}}if(t!==je.sighash){if(this.indexed===true){e+=" indexed"}if(t===je.full&&this.name){e+=" "+this.name}}return e}static from(t,e){if(typeof t==="string"){return Fe.fromString(t,e)}return Fe.fromObject(t)}static fromObject(t){if(Fe.isParamType(t)){return t}return new Fe(Ie,{name:t.name||null,type:Ye(t.type),indexed:t.indexed==null?null:!!t.indexed,components:t.components?t.components.map(Fe.fromObject):null})}static fromString(t,e){function r(t){return Fe.fromObject({name:t.name,type:t.type,indexed:t.indexed,components:t.components})}return r(Ne(t,!!e))}static isParamType(t){return!!(t!=null&&t._isParamType)}}function Le(t,e){return $e(t).map((t=>Fe.fromString(t,e)))}class Qe{constructor(t,e){if(t!==Ie){Pe.throwError("use a static from method",pt.errors.UNSUPPORTED_OPERATION,{operation:"new Fragment()"})}Ue(this,e);this._isFragment=true;Object.freeze(this)}static from(t){if(Qe.isFragment(t)){return t}if(typeof t==="string"){return Qe.fromString(t)}return Qe.fromObject(t)}static fromObject(t){if(Qe.isFragment(t)){return t}switch(t.type){case"function":return We.fromObject(t);case"event":return He.fromObject(t);case"constructor":return ze.fromObject(t);case"error":return Ve.fromObject(t);case"fallback":case"receive":return null}return Pe.throwArgumentError("invalid fragment object","value",t)}static fromString(t){t=t.replace(/\s/g," ");t=t.replace(/\(/g," (").replace(/\)/g,") ").replace(/\s+/g," ");t=t.trim();if(t.split(" ")[0]==="event"){return He.fromString(t.substring(5).trim())}else if(t.split(" ")[0]==="function"){return We.fromString(t.substring(8).trim())}else if(t.split("(")[0].trim()==="constructor"){return ze.fromString(t.trim())}else if(t.split(" ")[0]==="error"){return Ve.fromString(t.substring(5).trim())}return Pe.throwArgumentError("unsupported fragment","value",t)}static isFragment(t){return!!(t&&t._isFragment)}}class He extends Qe{format(t){if(!t){t=je.sighash}if(!je[t]){Pe.throwArgumentError("invalid format type","format",t)}if(t===je.json){return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map((e=>JSON.parse(e.format(t))))})}let e="";if(t!==je.sighash){e+="event "}e+=this.name+"("+this.inputs.map((e=>e.format(t))).join(t===je.full?", ":",")+") ";if(t!==je.sighash){if(this.anonymous){e+="anonymous "}}return e.trim()}static from(t){if(typeof t==="string"){return He.fromString(t)}return He.fromObject(t)}static fromObject(t){if(He.isEventFragment(t)){return t}if(t.type!=="event"){Pe.throwArgumentError("invalid event object","value",t)}const e={name:Ze(t.name),anonymous:t.anonymous,inputs:t.inputs?t.inputs.map(Fe.fromObject):[],type:"event"};return new He(Ie,e)}static fromString(t){let e=t.match(Xe);if(!e){Pe.throwArgumentError("invalid event string","value",t)}let r=false;e[3].split(" ").forEach((t=>{switch(t.trim()){case"anonymous":r=true;break;case"":break;default:Pe.warn("unknown modifier: "+t)}}));return He.fromObject({name:e[1].trim(),anonymous:r,inputs:Le(e[2],true),type:"event"})}static isEventFragment(t){return t&&t._isFragment&&t.type==="event"}}function Ge(t,e){e.gas=null;let r=t.split("@");if(r.length!==1){if(r.length>2){Pe.throwArgumentError("invalid human-readable ABI signature","value",t)}if(!r[1].match(/^[0-9]+$/)){Pe.throwArgumentError("invalid human-readable ABI signature gas","value",t)}e.gas=Vt.from(r[1]);return r[0]}return t}function Ke(t,e){e.constant=false;e.payable=false;e.stateMutability="nonpayable";t.split(" ").forEach((t=>{switch(t.trim()){case"constant":e.constant=true;break;case"payable":e.payable=true;e.stateMutability="payable";break;case"nonpayable":e.payable=false;e.stateMutability="nonpayable";break;case"pure":e.constant=true;e.stateMutability="pure";break;case"view":e.constant=true;e.stateMutability="view";break;case"external":case"public":case"":break;default:console.log("unknown modifier: "+t)}}))}function Je(t){let e={constant:false,payable:true,stateMutability:"payable"};if(t.stateMutability!=null){e.stateMutability=t.stateMutability;e.constant=e.stateMutability==="view"||e.stateMutability==="pure";if(t.constant!=null){if(!!t.constant!==e.constant){Pe.throwArgumentError("cannot have constant function with mutability "+e.stateMutability,"value",t)}}e.payable=e.stateMutability==="payable";if(t.payable!=null){if(!!t.payable!==e.payable){Pe.throwArgumentError("cannot have payable function with mutability "+e.stateMutability,"value",t)}}}else if(t.payable!=null){e.payable=!!t.payable;if(t.constant==null&&!e.payable&&t.type!=="constructor"){Pe.throwArgumentError("unable to determine stateMutability","value",t)}e.constant=!!t.constant;if(e.constant){e.stateMutability="view"}else{e.stateMutability=e.payable?"payable":"nonpayable"}if(e.payable&&e.constant){Pe.throwArgumentError("cannot have constant payable function","value",t)}}else if(t.constant!=null){e.constant=!!t.constant;e.payable=!e.constant;e.stateMutability=e.constant?"view":"payable"}else if(t.type!=="constructor"){Pe.throwArgumentError("unable to determine stateMutability","value",t)}return e}class ze extends Qe{format(t){if(!t){t=je.sighash}if(!je[t]){Pe.throwArgumentError("invalid format type","format",t)}if(t===je.json){return JSON.stringify({type:"constructor",stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:undefined,payable:this.payable,gas:this.gas?this.gas.toNumber():undefined,inputs:this.inputs.map((e=>JSON.parse(e.format(t))))})}if(t===je.sighash){Pe.throwError("cannot format a constructor for sighash",pt.errors.UNSUPPORTED_OPERATION,{operation:"format(sighash)"})}let e="constructor("+this.inputs.map((e=>e.format(t))).join(t===je.full?", ":",")+") ";if(this.stateMutability&&this.stateMutability!=="nonpayable"){e+=this.stateMutability+" "}return e.trim()}static from(t){if(typeof t==="string"){return ze.fromString(t)}return ze.fromObject(t)}static fromObject(t){if(ze.isConstructorFragment(t)){return t}if(t.type!=="constructor"){Pe.throwArgumentError("invalid constructor object","value",t)}let e=Je(t);if(e.constant){Pe.throwArgumentError("constructor cannot be constant","value",t)}const r={name:null,type:t.type,inputs:t.inputs?t.inputs.map(Fe.fromObject):[],payable:e.payable,stateMutability:e.stateMutability,gas:t.gas?Vt.from(t.gas):null};return new ze(Ie,r)}static fromString(t){let e={type:"constructor"};t=Ge(t,e);let r=t.match(Xe);if(!r||r[1].trim()!=="constructor"){Pe.throwArgumentError("invalid constructor string","value",t)}e.inputs=Le(r[2].trim(),false);Ke(r[3].trim(),e);return ze.fromObject(e)}static isConstructorFragment(t){return t&&t._isFragment&&t.type==="constructor"}}class We extends ze{format(t){if(!t){t=je.sighash}if(!je[t]){Pe.throwArgumentError("invalid format type","format",t)}if(t===je.json){return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:undefined,payable:this.payable,gas:this.gas?this.gas.toNumber():undefined,inputs:this.inputs.map((e=>JSON.parse(e.format(t)))),outputs:this.outputs.map((e=>JSON.parse(e.format(t))))})}let e="";if(t!==je.sighash){e+="function "}e+=this.name+"("+this.inputs.map((e=>e.format(t))).join(t===je.full?", ":",")+") ";if(t!==je.sighash){if(this.stateMutability){if(this.stateMutability!=="nonpayable"){e+=this.stateMutability+" "}}else if(this.constant){e+="view "}if(this.outputs&&this.outputs.length){e+="returns ("+this.outputs.map((e=>e.format(t))).join(", ")+") "}if(this.gas!=null){e+="@"+this.gas.toString()+" "}}return e.trim()}static from(t){if(typeof t==="string"){return We.fromString(t)}return We.fromObject(t)}static fromObject(t){if(We.isFunctionFragment(t)){return t}if(t.type!=="function"){Pe.throwArgumentError("invalid function object","value",t)}let e=Je(t);const r={type:t.type,name:Ze(t.name),constant:e.constant,inputs:t.inputs?t.inputs.map(Fe.fromObject):[],outputs:t.outputs?t.outputs.map(Fe.fromObject):[],payable:e.payable,stateMutability:e.stateMutability,gas:t.gas?Vt.from(t.gas):null};return new We(Ie,r)}static fromString(t){let e={type:"function"};t=Ge(t,e);let r=t.split(" returns ");if(r.length>2){Pe.throwArgumentError("invalid function string","value",t)}let n=r[0].match(Xe);if(!n){Pe.throwArgumentError("invalid function signature","value",t)}e.name=n[1].trim();if(e.name){Ze(e.name)}e.inputs=Le(n[2],false);Ke(n[3].trim(),e);if(r.length>1){let n=r[1].match(Xe);if(n[1].trim()!=""||n[3].trim()!=""){Pe.throwArgumentError("unexpected tokens","value",t)}e.outputs=Le(n[2],false)}else{e.outputs=[]}return We.fromObject(e)}static isFunctionFragment(t){return t&&t._isFragment&&t.type==="function"}}function qe(t){const e=t.format();if(e==="Error(string)"||e==="Panic(uint256)"){Pe.throwArgumentError(`cannot specify user defined ${e} error`,"fragment",t)}return t}class Ve extends Qe{format(t){if(!t){t=je.sighash}if(!je[t]){Pe.throwArgumentError("invalid format type","format",t)}if(t===je.json){return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map((e=>JSON.parse(e.format(t))))})}let e="";if(t!==je.sighash){e+="error "}e+=this.name+"("+this.inputs.map((e=>e.format(t))).join(t===je.full?", ":",")+") ";return e.trim()}static from(t){if(typeof t==="string"){return Ve.fromString(t)}return Ve.fromObject(t)}static fromObject(t){if(Ve.isErrorFragment(t)){return t}if(t.type!=="error"){Pe.throwArgumentError("invalid error object","value",t)}const e={type:t.type,name:Ze(t.name),inputs:t.inputs?t.inputs.map(Fe.fromObject):[]};return qe(new Ve(Ie,e))}static fromString(t){let e={type:"error"};let r=t.match(Xe);if(!r){Pe.throwArgumentError("invalid error signature","value",t)}e.name=r[1].trim();if(e.name){Ze(e.name)}e.inputs=Le(r[2],false);return qe(Ve.fromObject(e))}static isErrorFragment(t){return t&&t._isFragment&&t.type==="error"}}function Ye(t){if(t.match(/^uint($|[^1-9])/)){t="uint256"+t.substring(4)}else if(t.match(/^int($|[^1-9])/)){t="int256"+t.substring(3)}return t}const _e=new RegExp("^[a-zA-Z$_][a-zA-Z0-9$_]*$");function Ze(t){if(!t||!t.match(_e)){Pe.throwArgumentError(`invalid identifier "${t}"`,"value",t)}return t}const Xe=new RegExp("^([^)(]*)\\((.*)\\)([^)(]*)$");function $e(t){t=t.trim();let e=[];let r="";let n=0;for(let i=0;i<t.length;i++){let s=t[i];if(s===","&&n===0){e.push(r);r=""}else{r+=s;if(s==="("){n++}else if(s===")"){n--;if(n===-1){Pe.throwArgumentError("unbalanced parenthesis","value",t)}}}}if(r){e.push(r)}return e}const tr=new pt(xe);function er(t){const e=[];const r=function(t,n){if(!Array.isArray(n)){return}for(let i in n){const s=t.slice();s.push(i);try{r(s,n[i])}catch(t){e.push({path:s,error:t})}}};r([],t);return e}class rr{constructor(t,e,r,n){this.name=t;this.type=e;this.localName=r;this.dynamic=n}_throwError(t,e){tr.throwArgumentError(t,this.localName,e)}}class nr{constructor(t){ge(this,"wordSize",t||32);this._data=[];this._dataLength=0;this._padding=new Uint8Array(t)}get data(){return Nt(this._data)}get length(){return this._dataLength}_writeData(t){this._data.push(t);this._dataLength+=t.length;return t.length}appendWriter(t){return this._writeData(St(t._data))}writeBytes(t){let e=Bt(t);const r=e.length%this.wordSize;if(r){e=St([e,this._padding.slice(r)])}return this._writeData(e)}_getValue(t){let e=Bt(Vt.from(t));if(e.length>this.wordSize){tr.throwError("value out-of-bounds",pt.errors.BUFFER_OVERRUN,{length:this.wordSize,offset:e.length})}if(e.length%this.wordSize){e=St([this._padding.slice(e.length%this.wordSize),e])}return e}writeValue(t){return this._writeData(this._getValue(t))}writeUpdatableValue(){const t=this._data.length;this._data.push(this._padding);this._dataLength+=this.wordSize;return e=>{this._data[t]=this._getValue(e)}}}class ir{constructor(t,e,r,n){ge(this,"_data",Bt(t));ge(this,"wordSize",e||32);ge(this,"_coerceFunc",r);ge(this,"allowLoose",n);this._offset=0}get data(){return Tt(this._data)}get consumed(){return this._offset}static coerce(t,e){let r=t.match("^u?int([0-9]+)$");if(r&&parseInt(r[1])<=48){e=e.toNumber()}return e}coerce(t,e){if(this._coerceFunc){return this._coerceFunc(t,e)}return ir.coerce(t,e)}_peekBytes(t,e,r){let n=Math.ceil(e/this.wordSize)*this.wordSize;if(this._offset+n>this._data.length){if(this.allowLoose&&r&&this._offset+e<=this._data.length){n=e}else{tr.throwError("data out-of-bounds",pt.errors.BUFFER_OVERRUN,{length:this._data.length,offset:this._offset+n})}}return this._data.slice(this._offset,this._offset+n)}subReader(t){return new ir(this._data.slice(this._offset+t),this.wordSize,this._coerceFunc,this.allowLoose)}readBytes(t,e){let r=this._peekBytes(0,t,!!e);this._offset+=r.length;return r.slice(0,t)}readValue(){return Vt.from(this.readBytes(this.wordSize))}}var sr=t((function(t){
/**
 * [js-sha3]{@link https://github.com/emn178/js-sha3}
 *
 * @version 0.8.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2015-2018
 * @license MIT
 */
(function(){var r="input is invalid type";var n="finalize already called";var i=typeof window==="object";var s=i?window:{};if(s.JS_SHA3_NO_WINDOW){i=false}var a=!i&&typeof self==="object";var o=!s.JS_SHA3_NO_NODE_JS&&typeof process==="object"&&process.versions&&process.versions.node;if(o){s=e}else if(a){s=self}var f=!s.JS_SHA3_NO_COMMON_JS&&"object"==="object"&&t.exports;var c=!s.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer!=="undefined";var u="0123456789abcdef".split("");var h=[31,7936,2031616,520093696];var l=[4,1024,262144,67108864];var d=[1,256,65536,16777216];var v=[6,1536,393216,100663296];var b=[0,8,16,24];var p=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648];var g=[224,256,384,512];var y=[128,256];var w=["hex","buffer","arrayBuffer","array","digest"];var m={128:168,256:136};if(s.JS_SHA3_NO_NODE_JS||!Array.isArray){Array.isArray=function(t){return Object.prototype.toString.call(t)==="[object Array]"}}if(c&&(s.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)){ArrayBuffer.isView=function(t){return typeof t==="object"&&t.buffer&&t.buffer.constructor===ArrayBuffer}}var A=function(t,e,r){return function(n){return new L(t,e,t).update(n)[r]()}};var E=function(t,e,r){return function(n,i){return new L(t,e,i).update(n)[r]()}};var k=function(t,e,r){return function(e,n,i,s){return T["cshake"+t].update(e,n,i,s)[r]()}};var M=function(t,e,r){return function(e,n,i,s){return T["kmac"+t].update(e,n,i,s)[r]()}};var B=function(t,e,r,n){for(var i=0;i<w.length;++i){var s=w[i];t[s]=e(r,n,s)}return t};var S=function(t,e){var r=A(t,e,"hex");r.create=function(){return new L(t,e,t)};r.update=function(t){return r.create().update(t)};return B(r,A,t,e)};var C=function(t,e){var r=E(t,e,"hex");r.create=function(r){return new L(t,e,r)};r.update=function(t,e){return r.create(e).update(t)};return B(r,E,t,e)};var x=function(t,e){var r=m[t];var n=k(t,e,"hex");n.create=function(n,i,s){if(!i&&!s){return T["shake"+t].create(n)}else{return new L(t,e,n).bytepad([i,s],r)}};n.update=function(t,e,r,i){return n.create(e,r,i).update(t)};return B(n,k,t,e)};var P=function(t,e){var r=m[t];var n=M(t,e,"hex");n.create=function(n,i,s){return new Q(t,e,i).bytepad(["KMAC",s],r).bytepad([n],r)};n.update=function(t,e,r,i){return n.create(t,r,i).update(e)};return B(n,M,t,e)};var I=[{name:"keccak",padding:d,bits:g,createMethod:S},{name:"sha3",padding:v,bits:g,createMethod:S},{name:"shake",padding:h,bits:y,createMethod:C},{name:"cshake",padding:l,bits:y,createMethod:x},{name:"kmac",padding:l,bits:y,createMethod:P}];var T={},O=[];for(var D=0;D<I.length;++D){var N=I[D];var U=N.bits;for(var j=0;j<U.length;++j){var R=N.name+"_"+U[j];O.push(R);T[R]=N.createMethod(U[j],N.padding);if(N.name!=="sha3"){var F=N.name+U[j];O.push(F);T[F]=T[R]}}}function L(t,e,r){this.blocks=[];this.s=[];this.padding=e;this.outputBits=r;this.reset=true;this.finalized=false;this.block=0;this.start=0;this.blockCount=1600-(t<<1)>>5;this.byteCount=this.blockCount<<2;this.outputBlocks=r>>5;this.extraBytes=(r&31)>>3;for(var n=0;n<50;++n){this.s[n]=0}}L.prototype.update=function(t){if(this.finalized){throw new Error(n)}var e,i=typeof t;if(i!=="string"){if(i==="object"){if(t===null){throw new Error(r)}else if(c&&t.constructor===ArrayBuffer){t=new Uint8Array(t)}else if(!Array.isArray(t)){if(!c||!ArrayBuffer.isView(t)){throw new Error(r)}}}else{throw new Error(r)}e=true}var s=this.blocks,a=this.byteCount,o=t.length,f=this.blockCount,u=0,h=this.s,l,d;while(u<o){if(this.reset){this.reset=false;s[0]=this.block;for(l=1;l<f+1;++l){s[l]=0}}if(e){for(l=this.start;u<o&&l<a;++u){s[l>>2]|=t[u]<<b[l++&3]}}else{for(l=this.start;u<o&&l<a;++u){d=t.charCodeAt(u);if(d<128){s[l>>2]|=d<<b[l++&3]}else if(d<2048){s[l>>2]|=(192|d>>6)<<b[l++&3];s[l>>2]|=(128|d&63)<<b[l++&3]}else if(d<55296||d>=57344){s[l>>2]|=(224|d>>12)<<b[l++&3];s[l>>2]|=(128|d>>6&63)<<b[l++&3];s[l>>2]|=(128|d&63)<<b[l++&3]}else{d=65536+((d&1023)<<10|t.charCodeAt(++u)&1023);s[l>>2]|=(240|d>>18)<<b[l++&3];s[l>>2]|=(128|d>>12&63)<<b[l++&3];s[l>>2]|=(128|d>>6&63)<<b[l++&3];s[l>>2]|=(128|d&63)<<b[l++&3]}}}this.lastByteIndex=l;if(l>=a){this.start=l-a;this.block=s[f];for(l=0;l<f;++l){h[l]^=s[l]}H(h);this.reset=true}else{this.start=l}}return this};L.prototype.encode=function(t,e){var r=t&255,n=1;var i=[r];t=t>>8;r=t&255;while(r>0){i.unshift(r);t=t>>8;r=t&255;++n}if(e){i.push(n)}else{i.unshift(n)}this.update(i);return i.length};L.prototype.encodeString=function(t){var e,n=typeof t;if(n!=="string"){if(n==="object"){if(t===null){throw new Error(r)}else if(c&&t.constructor===ArrayBuffer){t=new Uint8Array(t)}else if(!Array.isArray(t)){if(!c||!ArrayBuffer.isView(t)){throw new Error(r)}}}else{throw new Error(r)}e=true}var i=0,s=t.length;if(e){i=s}else{for(var a=0;a<t.length;++a){var o=t.charCodeAt(a);if(o<128){i+=1}else if(o<2048){i+=2}else if(o<55296||o>=57344){i+=3}else{o=65536+((o&1023)<<10|t.charCodeAt(++a)&1023);i+=4}}}i+=this.encode(i*8);this.update(t);return i};L.prototype.bytepad=function(t,e){var r=this.encode(e);for(var n=0;n<t.length;++n){r+=this.encodeString(t[n])}var i=e-r%e;var s=[];s.length=i;this.update(s);return this};L.prototype.finalize=function(){if(this.finalized){return}this.finalized=true;var t=this.blocks,e=this.lastByteIndex,r=this.blockCount,n=this.s;t[e>>2]|=this.padding[e&3];if(this.lastByteIndex===this.byteCount){t[0]=t[r];for(e=1;e<r+1;++e){t[e]=0}}t[r-1]|=2147483648;for(e=0;e<r;++e){n[e]^=t[e]}H(n)};L.prototype.toString=L.prototype.hex=function(){this.finalize();var t=this.blockCount,e=this.s,r=this.outputBlocks,n=this.extraBytes,i=0,s=0;var a="",o;while(s<r){for(i=0;i<t&&s<r;++i,++s){o=e[i];a+=u[o>>4&15]+u[o&15]+u[o>>12&15]+u[o>>8&15]+u[o>>20&15]+u[o>>16&15]+u[o>>28&15]+u[o>>24&15]}if(s%t===0){H(e);i=0}}if(n){o=e[i];a+=u[o>>4&15]+u[o&15];if(n>1){a+=u[o>>12&15]+u[o>>8&15]}if(n>2){a+=u[o>>20&15]+u[o>>16&15]}}return a};L.prototype.arrayBuffer=function(){this.finalize();var t=this.blockCount,e=this.s,r=this.outputBlocks,n=this.extraBytes,i=0,s=0;var a=this.outputBits>>3;var o;if(n){o=new ArrayBuffer(r+1<<2)}else{o=new ArrayBuffer(a)}var f=new Uint32Array(o);while(s<r){for(i=0;i<t&&s<r;++i,++s){f[s]=e[i]}if(s%t===0){H(e)}}if(n){f[i]=e[i];o=o.slice(0,a)}return o};L.prototype.buffer=L.prototype.arrayBuffer;L.prototype.digest=L.prototype.array=function(){this.finalize();var t=this.blockCount,e=this.s,r=this.outputBlocks,n=this.extraBytes,i=0,s=0;var a=[],o,f;while(s<r){for(i=0;i<t&&s<r;++i,++s){o=s<<2;f=e[i];a[o]=f&255;a[o+1]=f>>8&255;a[o+2]=f>>16&255;a[o+3]=f>>24&255}if(s%t===0){H(e)}}if(n){o=s<<2;f=e[i];a[o]=f&255;if(n>1){a[o+1]=f>>8&255}if(n>2){a[o+2]=f>>16&255}}return a};function Q(t,e,r){L.call(this,t,e,r)}Q.prototype=new L;Q.prototype.finalize=function(){this.encode(this.outputBits,true);return L.prototype.finalize.call(this)};var H=function(t){var e,r,n,i,s,a,o,f,c,u,h,l,d,v,b,g,y,w,m,A,E,k,M,B,S,C,x,P,I,T,O,D,N,U,j,R,F,L,Q,H,G,K,J,z,W,q,V,Y,_,Z,X,$,tt,et,rt,nt,it,st,at,ot,ft,ct,ut;for(n=0;n<48;n+=2){i=t[0]^t[10]^t[20]^t[30]^t[40];s=t[1]^t[11]^t[21]^t[31]^t[41];a=t[2]^t[12]^t[22]^t[32]^t[42];o=t[3]^t[13]^t[23]^t[33]^t[43];f=t[4]^t[14]^t[24]^t[34]^t[44];c=t[5]^t[15]^t[25]^t[35]^t[45];u=t[6]^t[16]^t[26]^t[36]^t[46];h=t[7]^t[17]^t[27]^t[37]^t[47];l=t[8]^t[18]^t[28]^t[38]^t[48];d=t[9]^t[19]^t[29]^t[39]^t[49];e=l^(a<<1|o>>>31);r=d^(o<<1|a>>>31);t[0]^=e;t[1]^=r;t[10]^=e;t[11]^=r;t[20]^=e;t[21]^=r;t[30]^=e;t[31]^=r;t[40]^=e;t[41]^=r;e=i^(f<<1|c>>>31);r=s^(c<<1|f>>>31);t[2]^=e;t[3]^=r;t[12]^=e;t[13]^=r;t[22]^=e;t[23]^=r;t[32]^=e;t[33]^=r;t[42]^=e;t[43]^=r;e=a^(u<<1|h>>>31);r=o^(h<<1|u>>>31);t[4]^=e;t[5]^=r;t[14]^=e;t[15]^=r;t[24]^=e;t[25]^=r;t[34]^=e;t[35]^=r;t[44]^=e;t[45]^=r;e=f^(l<<1|d>>>31);r=c^(d<<1|l>>>31);t[6]^=e;t[7]^=r;t[16]^=e;t[17]^=r;t[26]^=e;t[27]^=r;t[36]^=e;t[37]^=r;t[46]^=e;t[47]^=r;e=u^(i<<1|s>>>31);r=h^(s<<1|i>>>31);t[8]^=e;t[9]^=r;t[18]^=e;t[19]^=r;t[28]^=e;t[29]^=r;t[38]^=e;t[39]^=r;t[48]^=e;t[49]^=r;v=t[0];b=t[1];q=t[11]<<4|t[10]>>>28;V=t[10]<<4|t[11]>>>28;P=t[20]<<3|t[21]>>>29;I=t[21]<<3|t[20]>>>29;ot=t[31]<<9|t[30]>>>23;ft=t[30]<<9|t[31]>>>23;K=t[40]<<18|t[41]>>>14;J=t[41]<<18|t[40]>>>14;U=t[2]<<1|t[3]>>>31;j=t[3]<<1|t[2]>>>31;g=t[13]<<12|t[12]>>>20;y=t[12]<<12|t[13]>>>20;Y=t[22]<<10|t[23]>>>22;_=t[23]<<10|t[22]>>>22;T=t[33]<<13|t[32]>>>19;O=t[32]<<13|t[33]>>>19;ct=t[42]<<2|t[43]>>>30;ut=t[43]<<2|t[42]>>>30;et=t[5]<<30|t[4]>>>2;rt=t[4]<<30|t[5]>>>2;R=t[14]<<6|t[15]>>>26;F=t[15]<<6|t[14]>>>26;w=t[25]<<11|t[24]>>>21;m=t[24]<<11|t[25]>>>21;Z=t[34]<<15|t[35]>>>17;X=t[35]<<15|t[34]>>>17;D=t[45]<<29|t[44]>>>3;N=t[44]<<29|t[45]>>>3;B=t[6]<<28|t[7]>>>4;S=t[7]<<28|t[6]>>>4;nt=t[17]<<23|t[16]>>>9;it=t[16]<<23|t[17]>>>9;L=t[26]<<25|t[27]>>>7;Q=t[27]<<25|t[26]>>>7;A=t[36]<<21|t[37]>>>11;E=t[37]<<21|t[36]>>>11;$=t[47]<<24|t[46]>>>8;tt=t[46]<<24|t[47]>>>8;z=t[8]<<27|t[9]>>>5;W=t[9]<<27|t[8]>>>5;C=t[18]<<20|t[19]>>>12;x=t[19]<<20|t[18]>>>12;st=t[29]<<7|t[28]>>>25;at=t[28]<<7|t[29]>>>25;H=t[38]<<8|t[39]>>>24;G=t[39]<<8|t[38]>>>24;k=t[48]<<14|t[49]>>>18;M=t[49]<<14|t[48]>>>18;t[0]=v^~g&w;t[1]=b^~y&m;t[10]=B^~C&P;t[11]=S^~x&I;t[20]=U^~R&L;t[21]=j^~F&Q;t[30]=z^~q&Y;t[31]=W^~V&_;t[40]=et^~nt&st;t[41]=rt^~it&at;t[2]=g^~w&A;t[3]=y^~m&E;t[12]=C^~P&T;t[13]=x^~I&O;t[22]=R^~L&H;t[23]=F^~Q&G;t[32]=q^~Y&Z;t[33]=V^~_&X;t[42]=nt^~st&ot;t[43]=it^~at&ft;t[4]=w^~A&k;t[5]=m^~E&M;t[14]=P^~T&D;t[15]=I^~O&N;t[24]=L^~H&K;t[25]=Q^~G&J;t[34]=Y^~Z&$;t[35]=_^~X&tt;t[44]=st^~ot&ct;t[45]=at^~ft&ut;t[6]=A^~k&v;t[7]=E^~M&b;t[16]=T^~D&B;t[17]=O^~N&S;t[26]=H^~K&U;t[27]=G^~J&j;t[36]=Z^~$&z;t[37]=X^~tt&W;t[46]=ot^~ct&et;t[47]=ft^~ut&rt;t[8]=k^~v&g;t[9]=M^~b&y;t[18]=D^~B&C;t[19]=N^~S&x;t[28]=K^~U&R;t[29]=J^~j&F;t[38]=$^~z&q;t[39]=tt^~W&V;t[48]=ct^~et&nt;t[49]=ut^~rt&it;t[0]^=p[n];t[1]^=p[n+1]}};if(f){t.exports=T}else{for(D=0;D<O.length;++D){s[O[D]]=T[O[D]]}}})()}));function ar(t){return"0x"+sr.keccak_256(Bt(t))}const or=Object.freeze({__proto__:null,keccak256:ar});const fr="rlp/5.7.0";const cr=new pt(fr);function ur(t){const e=[];while(t){e.unshift(t&255);t>>=8}return e}function hr(t,e,r){let n=0;for(let i=0;i<r;i++){n=n*256+t[e+i]}return n}function lr(t){if(Array.isArray(t)){let e=[];t.forEach((function(t){e=e.concat(lr(t))}));if(e.length<=55){e.unshift(192+e.length);return e}const r=ur(e.length);r.unshift(247+r.length);return r.concat(e)}if(!Et(t)){cr.throwArgumentError("RLP object must be BytesLike","object",t)}const e=Array.prototype.slice.call(Bt(t));if(e.length===1&&e[0]<=127){return e}else if(e.length<=55){e.unshift(128+e.length);return e}const r=ur(e.length);r.unshift(183+r.length);return r.concat(e)}function dr(t){return Tt(lr(t))}function vr(t,e,r,n){const i=[];while(r<e+1+n){const s=br(t,r);i.push(s.result);r+=s.consumed;if(r>e+1+n){cr.throwError("child data too short",pt.errors.BUFFER_OVERRUN,{})}}return{consumed:1+n,result:i}}function br(t,e){if(t.length===0){cr.throwError("data too short",pt.errors.BUFFER_OVERRUN,{})}if(t[e]>=248){const r=t[e]-247;if(e+1+r>t.length){cr.throwError("data short segment too short",pt.errors.BUFFER_OVERRUN,{})}const n=hr(t,e+1,r);if(e+1+r+n>t.length){cr.throwError("data long segment too short",pt.errors.BUFFER_OVERRUN,{})}return vr(t,e,e+1+r,r+n)}else if(t[e]>=192){const r=t[e]-192;if(e+1+r>t.length){cr.throwError("data array too short",pt.errors.BUFFER_OVERRUN,{})}return vr(t,e,e+1,r)}else if(t[e]>=184){const r=t[e]-183;if(e+1+r>t.length){cr.throwError("data array too short",pt.errors.BUFFER_OVERRUN,{})}const n=hr(t,e+1,r);if(e+1+r+n>t.length){cr.throwError("data array too short",pt.errors.BUFFER_OVERRUN,{})}const i=Tt(t.slice(e+1+r,e+1+r+n));return{consumed:1+r+n,result:i}}else if(t[e]>=128){const r=t[e]-128;if(e+1+r>t.length){cr.throwError("data too short",pt.errors.BUFFER_OVERRUN,{})}const n=Tt(t.slice(e+1,e+1+r));return{consumed:1+r,result:n}}return{consumed:1,result:Tt(t[e])}}function pr(t){const e=Bt(t);const r=br(e,0);if(r.consumed!==e.length){cr.throwArgumentError("invalid rlp data","data",t)}return r.result}const gr=Object.freeze({__proto__:null,encode:dr,decode:pr});const yr="address/5.7.0";const wr=new pt(yr);function mr(t){if(!Pt(t,20)){wr.throwArgumentError("invalid address","address",t)}t=t.toLowerCase();const e=t.substring(2).split("");const r=new Uint8Array(40);for(let t=0;t<40;t++){r[t]=e[t].charCodeAt(0)}const n=Bt(ar(r));for(let t=0;t<40;t+=2){if(n[t>>1]>>4>=8){e[t]=e[t].toUpperCase()}if((n[t>>1]&15)>=8){e[t+1]=e[t+1].toUpperCase()}}return"0x"+e.join("")}const Ar=9007199254740991;function Er(t){if(Math.log10){return Math.log10(t)}return Math.log(t)/Math.LN10}const kr={};for(let t=0;t<10;t++){kr[String(t)]=String(t)}for(let t=0;t<26;t++){kr[String.fromCharCode(65+t)]=String(10+t)}const Mr=Math.floor(Er(Ar));function Br(t){t=t.toUpperCase();t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map((t=>kr[t])).join("");while(e.length>=Mr){let t=e.substring(0,Mr);e=parseInt(t,10)%97+e.substring(t.length)}let r=String(98-parseInt(e,10)%97);while(r.length<2){r="0"+r}return r}function Sr(t){let e=null;if(typeof t!=="string"){wr.throwArgumentError("invalid address","address",t)}if(t.match(/^(0x)?[0-9a-fA-F]{40}$/)){if(t.substring(0,2)!=="0x"){t="0x"+t}e=mr(t);if(t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&e!==t){wr.throwArgumentError("bad address checksum","address",t)}}else if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){if(t.substring(2,4)!==Br(t)){wr.throwArgumentError("bad icap checksum","address",t)}e=$t(t.substring(4));while(e.length<40){e="0"+e}e=mr("0x"+e)}else{wr.throwArgumentError("invalid address","address",t)}return e}function Cr(t){try{Sr(t);return true}catch(t){}return false}function xr(t){let e=te(Sr(t).substring(2)).toUpperCase();while(e.length<30){e="0"+e}return"XE"+Br("XE00"+e)+e}function Pr(t){let e=null;try{e=Sr(t.from)}catch(e){wr.throwArgumentError("missing from address","transaction",t)}const r=Ct(Bt(Vt.from(t.nonce).toHexString()));return Sr(Dt(ar(dr([e,r])),12))}function Ir(t,e,r){if(Ot(e)!==32){wr.throwArgumentError("salt must be 32 bytes","salt",e)}if(Ot(r)!==32){wr.throwArgumentError("initCodeHash must be 32 bytes","initCodeHash",r)}return Sr(Dt(ar(St(["0xff",Sr(t),e,r])),12))}const Tr=Object.freeze({__proto__:null,getAddress:Sr,isAddress:Cr,getIcapAddress:xr,getContractAddress:Pr,getCreate2Address:Ir});class Or extends rr{constructor(t){super("address","address",t,false)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(t,e){try{e=Sr(e)}catch(t){this._throwError(t.message,e)}return t.writeValue(e)}decode(t){return Sr(Rt(t.readValue().toHexString(),20))}}class Dr extends rr{constructor(t){super(t.name,t.type,undefined,t.dynamic);this.coder=t}defaultValue(){return this.coder.defaultValue()}encode(t,e){return this.coder.encode(t,e)}decode(t){return this.coder.decode(t)}}const Nr=new pt(xe);function Ur(t,e,r){let n=null;if(Array.isArray(r)){n=r}else if(r&&typeof r==="object"){let t={};n=e.map((e=>{const n=e.localName;if(!n){Nr.throwError("cannot encode object for signature with missing names",pt.errors.INVALID_ARGUMENT,{argument:"values",coder:e,value:r})}if(t[n]){Nr.throwError("cannot encode object for signature with duplicate names",pt.errors.INVALID_ARGUMENT,{argument:"values",coder:e,value:r})}t[n]=true;return r[n]}))}else{Nr.throwArgumentError("invalid tuple value","tuple",r)}if(e.length!==n.length){Nr.throwArgumentError("types/value length mismatch","tuple",r)}let i=new nr(t.wordSize);let s=new nr(t.wordSize);let a=[];e.forEach(((t,e)=>{let r=n[e];if(t.dynamic){let e=s.length;t.encode(s,r);let n=i.writeUpdatableValue();a.push((t=>{n(t+e)}))}else{t.encode(i,r)}}));a.forEach((t=>{t(i.length)}));let o=t.appendWriter(i);o+=t.appendWriter(s);return o}function jr(t,e){let r=[];let n=t.subReader(0);e.forEach((e=>{let i=null;if(e.dynamic){let r=t.readValue();let s=n.subReader(r.toNumber());try{i=e.decode(s)}catch(t){if(t.code===pt.errors.BUFFER_OVERRUN){throw t}i=t;i.baseType=e.name;i.name=e.localName;i.type=e.type}}else{try{i=e.decode(t)}catch(t){if(t.code===pt.errors.BUFFER_OVERRUN){throw t}i=t;i.baseType=e.name;i.name=e.localName;i.type=e.type}}if(i!=undefined){r.push(i)}}));const i=e.reduce(((t,e)=>{const r=e.localName;if(r){if(!t[r]){t[r]=0}t[r]++}return t}),{});e.forEach(((t,e)=>{let n=t.localName;if(!n||i[n]!==1){return}if(n==="length"){n="_length"}if(r[n]!=null){return}const s=r[e];if(s instanceof Error){Object.defineProperty(r,n,{enumerable:true,get:()=>{throw s}})}else{r[n]=s}}));for(let t=0;t<r.length;t++){const e=r[t];if(e instanceof Error){Object.defineProperty(r,t,{enumerable:true,get:()=>{throw e}})}}return Object.freeze(r)}class Rr extends rr{constructor(t,e,r){const n=t.type+"["+(e>=0?e:"")+"]";const i=e===-1||t.dynamic;super("array",n,r,i);this.coder=t;this.length=e}defaultValue(){const t=this.coder.defaultValue();const e=[];for(let r=0;r<this.length;r++){e.push(t)}return e}encode(t,e){if(!Array.isArray(e)){this._throwError("expected array value",e)}let r=this.length;if(r===-1){r=e.length;t.writeValue(e.length)}Nr.checkArgumentCount(e.length,r,"coder array"+(this.localName?" "+this.localName:""));let n=[];for(let t=0;t<e.length;t++){n.push(this.coder)}return Ur(t,n,e)}decode(t){let e=this.length;if(e===-1){e=t.readValue().toNumber();if(e*32>t._data.length){Nr.throwError("insufficient data length",pt.errors.BUFFER_OVERRUN,{length:t._data.length,count:e})}}let r=[];for(let t=0;t<e;t++){r.push(new Dr(this.coder))}return t.coerce(this.name,jr(t,r))}}class Fr extends rr{constructor(t){super("bool","bool",t,false)}defaultValue(){return false}encode(t,e){return t.writeValue(e?1:0)}decode(t){return t.coerce(this.type,!t.readValue().isZero())}}class Lr extends rr{constructor(t,e){super(t,t,e,true)}defaultValue(){return"0x"}encode(t,e){e=Bt(e);let r=t.writeValue(e.length);r+=t.writeBytes(e);return r}decode(t){return t.readBytes(t.readValue().toNumber(),true)}}class Qr extends Lr{constructor(t){super("bytes",t)}decode(t){return t.coerce(this.name,Tt(super.decode(t)))}}class Hr extends rr{constructor(t,e){let r="bytes"+String(t);super(r,r,e,false);this.size=t}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(t,e){let r=Bt(e);if(r.length!==this.size){this._throwError("incorrect data length",e)}return t.writeBytes(r)}decode(t){return t.coerce(this.name,Tt(t.readBytes(this.size)))}}class Gr extends rr{constructor(t){super("null","",t,false)}defaultValue(){return null}encode(t,e){if(e!=null){this._throwError("not null",e)}return t.writeBytes([])}decode(t){t.readBytes(0);return t.coerce(this.name,null)}}const Kr="0x0000000000000000000000000000000000000000";const Jr=Vt.from(-1);const zr=Vt.from(0);const Wr=Vt.from(1);const qr=Vt.from(2);const Vr=Vt.from("1000000000000000000");const Yr=Vt.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");const _r=Vt.from("-0x8000000000000000000000000000000000000000000000000000000000000000");const Zr=Vt.from("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");const Xr="0x0000000000000000000000000000000000000000000000000000000000000000";const $r="Ξ";const tn=Object.freeze({__proto__:null,AddressZero:Kr,NegativeOne:Jr,Zero:zr,One:Wr,Two:qr,WeiPerEther:Vr,MaxUint256:Yr,MinInt256:_r,MaxInt256:Zr,HashZero:Xr,EtherSymbol:$r});class en extends rr{constructor(t,e,r){const n=(e?"int":"uint")+t*8;super(n,n,r,false);this.size=t;this.signed=e}defaultValue(){return 0}encode(t,e){let r=Vt.from(e);let n=Yr.mask(t.wordSize*8);if(this.signed){let t=n.mask(this.size*8-1);if(r.gt(t)||r.lt(t.add(Wr).mul(Jr))){this._throwError("value out-of-bounds",e)}}else if(r.lt(zr)||r.gt(n.mask(this.size*8))){this._throwError("value out-of-bounds",e)}r=r.toTwos(this.size*8).mask(this.size*8);if(this.signed){r=r.fromTwos(this.size*8).toTwos(8*t.wordSize)}return t.writeValue(r)}decode(t){let e=t.readValue().mask(this.size*8);if(this.signed){e=e.fromTwos(this.size*8)}return t.coerce(this.name,e)}}const rn="strings/5.7.0";const nn=new pt(rn);var sn;(function(t){t["current"]="";t["NFC"]="NFC";t["NFD"]="NFD";t["NFKC"]="NFKC";t["NFKD"]="NFKD"})(sn||(sn={}));var an;(function(t){t["UNEXPECTED_CONTINUE"]="unexpected continuation byte";t["BAD_PREFIX"]="bad codepoint prefix";t["OVERRUN"]="string overrun";t["MISSING_CONTINUE"]="missing continuation byte";t["OUT_OF_RANGE"]="out of UTF-8 range";t["UTF16_SURROGATE"]="UTF-16 surrogate";t["OVERLONG"]="overlong representation"})(an||(an={}));function on(t,e,r,n,i){return nn.throwArgumentError(`invalid codepoint at offset ${e}; ${t}`,"bytes",r)}function fn(t,e,r,n,i){if(t===an.BAD_PREFIX||t===an.UNEXPECTED_CONTINUE){let t=0;for(let n=e+1;n<r.length;n++){if(r[n]>>6!==2){break}t++}return t}if(t===an.OVERRUN){return r.length-e-1}return 0}function cn(t,e,r,n,i){if(t===an.OVERLONG){n.push(i);return 0}n.push(65533);return fn(t,e,r)}const un=Object.freeze({error:on,ignore:fn,replace:cn});function hn(t,e){if(e==null){e=un.error}t=Bt(t);const r=[];let n=0;while(n<t.length){const i=t[n++];if(i>>7===0){r.push(i);continue}let s=null;let a=null;if((i&224)===192){s=1;a=127}else if((i&240)===224){s=2;a=2047}else if((i&248)===240){s=3;a=65535}else{if((i&192)===128){n+=e(an.UNEXPECTED_CONTINUE,n-1,t,r)}else{n+=e(an.BAD_PREFIX,n-1,t,r)}continue}if(n-1+s>=t.length){n+=e(an.OVERRUN,n-1,t,r);continue}let o=i&(1<<8-s-1)-1;for(let i=0;i<s;i++){let i=t[n];if((i&192)!=128){n+=e(an.MISSING_CONTINUE,n,t,r);o=null;break}o=o<<6|i&63;n++}if(o===null){continue}if(o>1114111){n+=e(an.OUT_OF_RANGE,n-1-s,t,r,o);continue}if(o>=55296&&o<=57343){n+=e(an.UTF16_SURROGATE,n-1-s,t,r,o);continue}if(o<=a){n+=e(an.OVERLONG,n-1-s,t,r,o);continue}r.push(o)}return r}function ln(t,e=sn.current){if(e!=sn.current){nn.checkNormalize();t=t.normalize(e)}let r=[];for(let e=0;e<t.length;e++){const n=t.charCodeAt(e);if(n<128){r.push(n)}else if(n<2048){r.push(n>>6|192);r.push(n&63|128)}else if((n&64512)==55296){e++;const i=t.charCodeAt(e);if(e>=t.length||(i&64512)!==56320){throw new Error("invalid utf-8 string")}const s=65536+((n&1023)<<10)+(i&1023);r.push(s>>18|240);r.push(s>>12&63|128);r.push(s>>6&63|128);r.push(s&63|128)}else{r.push(n>>12|224);r.push(n>>6&63|128);r.push(n&63|128)}}return Bt(r)}function dn(t){const e="0000"+t.toString(16);return"\\u"+e.substring(e.length-4)}function vn(t,e){return'"'+hn(t,e).map((t=>{if(t<256){switch(t){case 8:return"\\b";case 9:return"\\t";case 10:return"\\n";case 13:return"\\r";case 34:return'\\"';case 92:return"\\\\"}if(t>=32&&t<127){return String.fromCharCode(t)}}if(t<=65535){return dn(t)}t-=65536;return dn((t>>10&1023)+55296)+dn((t&1023)+56320)})).join("")+'"'}function bn(t){return t.map((t=>{if(t<=65535){return String.fromCharCode(t)}t-=65536;return String.fromCharCode((t>>10&1023)+55296,(t&1023)+56320)})).join("")}function pn(t,e){return bn(hn(t,e))}function gn(t,e=sn.current){return hn(ln(t,e))}function yn(t){const e=ln(t);if(e.length>31){throw new Error("bytes32 string must be less than 32 bytes")}return Tt(St([e,Xr]).slice(0,32))}function wn(t){const e=Bt(t);if(e.length!==32){throw new Error("invalid bytes32 - not 32 bytes long")}if(e[31]!==0){throw new Error("invalid bytes32 string - no null terminator")}let r=31;while(e[r-1]===0){r--}return pn(e.slice(0,r))}function mn(t){if(t.length%4!==0){throw new Error("bad data")}let e=[];for(let r=0;r<t.length;r+=4){e.push(parseInt(t.substring(r,r+4),16))}return e}function An(t,e){if(!e){e=function(t){return[parseInt(t,16)]}}let r=0;let n={};t.split(",").forEach((t=>{let i=t.split(":");r+=parseInt(i[0],16);n[r]=e(i[1])}));return n}function En(t){let e=0;return t.split(",").map((t=>{let r=t.split("-");if(r.length===1){r[1]="0"}else if(r[1]===""){r[1]="1"}let n=e+parseInt(r[0],16);e=parseInt(r[1],16);return{l:n,h:e}}))}function kn(t,e){let r=0;for(let n=0;n<e.length;n++){let i=e[n];r+=i.l;if(t>=r&&t<=r+i.h&&(t-r)%(i.d||1)===0){if(i.e&&i.e.indexOf(t-r)!==-1){continue}return i}}return null}const Mn=En("221,13-1b,5f-,40-10,51-f,11-3,3-3,2-2,2-4,8,2,15,2d,28-8,88,48,27-,3-5,11-20,27-,8,28,3-5,12,18,b-a,1c-4,6-16,2-d,2-2,2,1b-4,17-9,8f-,10,f,1f-2,1c-34,33-14e,4,36-,13-,6-2,1a-f,4,9-,3-,17,8,2-2,5-,2,8-,3-,4-8,2-3,3,6-,16-6,2-,7-3,3-,17,8,3,3,3-,2,6-3,3-,4-a,5,2-6,10-b,4,8,2,4,17,8,3,6-,b,4,4-,2-e,2-4,b-10,4,9-,3-,17,8,3-,5-,9-2,3-,4-7,3-3,3,4-3,c-10,3,7-2,4,5-2,3,2,3-2,3-2,4-2,9,4-3,6-2,4,5-8,2-e,d-d,4,9,4,18,b,6-3,8,4,5-6,3-8,3-3,b-11,3,9,4,18,b,6-3,8,4,5-6,3-6,2,3-3,b-11,3,9,4,18,11-3,7-,4,5-8,2-7,3-3,b-11,3,13-2,19,a,2-,8-2,2-3,7,2,9-11,4-b,3b-3,1e-24,3,2-,3,2-,2-5,5,8,4,2,2-,3,e,4-,6,2,7-,b-,3-21,49,23-5,1c-3,9,25,10-,2-2f,23,6,3,8-2,5-5,1b-45,27-9,2a-,2-3,5b-4,45-4,53-5,8,40,2,5-,8,2,5-,28,2,5-,20,2,5-,8,2,5-,8,8,18,20,2,5-,8,28,14-5,1d-22,56-b,277-8,1e-2,52-e,e,8-a,18-8,15-b,e,4,3-b,5e-2,b-15,10,b-5,59-7,2b-555,9d-3,5b-5,17-,7-,27-,7-,9,2,2,2,20-,36,10,f-,7,14-,4,a,54-3,2-6,6-5,9-,1c-10,13-1d,1c-14,3c-,10-6,32-b,240-30,28-18,c-14,a0,115-,3,66-,b-76,5,5-,1d,24,2,5-2,2,8-,35-2,19,f-10,1d-3,311-37f,1b,5a-b,d7-19,d-3,41,57-,68-4,29-3,5f,29-37,2e-2,25-c,2c-2,4e-3,30,78-3,64-,20,19b7-49,51a7-59,48e-2,38-738,2ba5-5b,222f-,3c-94,8-b,6-4,1b,6,2,3,3,6d-20,16e-f,41-,37-7,2e-2,11-f,5-b,18-,b,14,5-3,6,88-,2,bf-2,7-,7-,7-,4-2,8,8-9,8-2ff,20,5-b,1c-b4,27-,27-cbb1,f7-9,28-2,b5-221,56,48,3-,2-,3-,5,d,2,5,3,42,5-,9,8,1d,5,6,2-2,8,153-3,123-3,33-27fd,a6da-5128,21f-5df,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3,2-1d,61-ff7d");const Bn="ad,34f,1806,180b,180c,180d,200b,200c,200d,2060,feff".split(",").map((t=>parseInt(t,16)));const Sn=[{h:25,s:32,l:65},{h:30,s:32,e:[23],l:127},{h:54,s:1,e:[48],l:64,d:2},{h:14,s:1,l:57,d:2},{h:44,s:1,l:17,d:2},{h:10,s:1,e:[2,6,8],l:61,d:2},{h:16,s:1,l:68,d:2},{h:84,s:1,e:[18,24,66],l:19,d:2},{h:26,s:32,e:[17],l:435},{h:22,s:1,l:71,d:2},{h:15,s:80,l:40},{h:31,s:32,l:16},{h:32,s:1,l:80,d:2},{h:52,s:1,l:42,d:2},{h:12,s:1,l:55,d:2},{h:40,s:1,e:[38],l:15,d:2},{h:14,s:1,l:48,d:2},{h:37,s:48,l:49},{h:148,s:1,l:6351,d:2},{h:88,s:1,l:160,d:2},{h:15,s:16,l:704},{h:25,s:26,l:854},{h:25,s:32,l:55915},{h:37,s:40,l:1247},{h:25,s:-119711,l:53248},{h:25,s:-119763,l:52},{h:25,s:-119815,l:52},{h:25,s:-119867,e:[1,4,5,7,8,11,12,17],l:52},{h:25,s:-119919,l:52},{h:24,s:-119971,e:[2,7,8,17],l:52},{h:24,s:-120023,e:[2,7,13,15,16,17],l:52},{h:25,s:-120075,l:52},{h:25,s:-120127,l:52},{h:25,s:-120179,l:52},{h:25,s:-120231,l:52},{h:25,s:-120283,l:52},{h:25,s:-120335,l:52},{h:24,s:-119543,e:[17],l:56},{h:24,s:-119601,e:[17],l:58},{h:24,s:-119659,e:[17],l:58},{h:24,s:-119717,e:[17],l:58},{h:24,s:-119775,e:[17],l:58}];const Cn=An("b5:3bc,c3:ff,7:73,2:253,5:254,3:256,1:257,5:259,1:25b,3:260,1:263,2:269,1:268,5:26f,1:272,2:275,7:280,3:283,5:288,3:28a,1:28b,5:292,3f:195,1:1bf,29:19e,125:3b9,8b:3b2,1:3b8,1:3c5,3:3c6,1:3c0,1a:3ba,1:3c1,1:3c3,2:3b8,1:3b5,1bc9:3b9,1c:1f76,1:1f77,f:1f7a,1:1f7b,d:1f78,1:1f79,1:1f7c,1:1f7d,107:63,5:25b,4:68,1:68,1:68,3:69,1:69,1:6c,3:6e,4:70,1:71,1:72,1:72,1:72,7:7a,2:3c9,2:7a,2:6b,1:e5,1:62,1:63,3:65,1:66,2:6d,b:3b3,1:3c0,6:64,1b574:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3");const xn=An("179:1,2:1,2:1,5:1,2:1,a:4f,a:1,8:1,2:1,2:1,3:1,5:1,3:1,4:1,2:1,3:1,4:1,8:2,1:1,2:2,1:1,2:2,27:2,195:26,2:25,1:25,1:25,2:40,2:3f,1:3f,33:1,11:-6,1:-9,1ac7:-3a,6d:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,b:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,c:-8,2:-8,2:-8,2:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,49:-8,1:-8,1:-4a,1:-4a,d:-56,1:-56,1:-56,1:-56,d:-8,1:-8,f:-8,1:-8,3:-7");const Pn=An("df:00730073,51:00690307,19:02BC006E,a7:006A030C,18a:002003B9,16:03B903080301,20:03C503080301,1d7:05650582,190f:00680331,1:00740308,1:0077030A,1:0079030A,1:006102BE,b6:03C50313,2:03C503130300,2:03C503130301,2:03C503130342,2a:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,3:1F7003B9,1:03B103B9,1:03AC03B9,2:03B10342,1:03B1034203B9,5:03B103B9,6:1F7403B9,1:03B703B9,1:03AE03B9,2:03B70342,1:03B7034203B9,5:03B703B9,6:03B903080300,1:03B903080301,3:03B90342,1:03B903080342,b:03C503080300,1:03C503080301,1:03C10313,2:03C50342,1:03C503080342,b:1F7C03B9,1:03C903B9,1:03CE03B9,2:03C90342,1:03C9034203B9,5:03C903B9,ac:00720073,5b:00B00063,6:00B00066,d:006E006F,a:0073006D,1:00740065006C,1:0074006D,124f:006800700061,2:00610075,2:006F0076,b:00700061,1:006E0061,1:03BC0061,1:006D0061,1:006B0061,1:006B0062,1:006D0062,1:00670062,3:00700066,1:006E0066,1:03BC0066,4:0068007A,1:006B0068007A,1:006D0068007A,1:00670068007A,1:00740068007A,15:00700061,1:006B00700061,1:006D00700061,1:006700700061,8:00700076,1:006E0076,1:03BC0076,1:006D0076,1:006B0076,1:006D0076,1:00700077,1:006E0077,1:03BC0077,1:006D0077,1:006B0077,1:006D0077,1:006B03C9,1:006D03C9,2:00620071,3:00632215006B0067,1:0063006F002E,1:00640062,1:00670079,2:00680070,2:006B006B,1:006B006D,9:00700068,2:00700070006D,1:00700072,2:00730076,1:00770062,c723:00660066,1:00660069,1:0066006C,1:006600660069,1:00660066006C,1:00730074,1:00730074,d:05740576,1:05740565,1:0574056B,1:057E0576,1:0574056D",mn);const In=En("80-20,2a0-,39c,32,f71,18e,7f2-f,19-7,30-4,7-5,f81-b,5,a800-20ff,4d1-1f,110,fa-6,d174-7,2e84-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,2,1f-5f,ff7f-20001");function Tn(t){return t.reduce(((t,e)=>{e.forEach((e=>{t.push(e)}));return t}),[])}function On(t){return!!kn(t,Mn)}function Dn(t){let e=kn(t,Sn);if(e){return[t+e.s]}let r=Cn[t];if(r){return r}let n=xn[t];if(n){return[t+n[0]]}let i=Pn[t];if(i){return i}return null}function Nn(t){return!!kn(t,In)}function Un(t){if(t.match(/^[a-z0-9-]*$/i)&&t.length<=59){return t.toLowerCase()}let e=gn(t);e=Tn(e.map((t=>{if(Bn.indexOf(t)>=0){return[]}if(t>=65024&&t<=65039){return[]}let e=Dn(t);if(e){return e}return[t]})));e=gn(bn(e),sn.NFKC);e.forEach((t=>{if(Nn(t)){throw new Error("STRINGPREP_CONTAINS_PROHIBITED")}}));e.forEach((t=>{if(On(t)){throw new Error("STRINGPREP_CONTAINS_UNASSIGNED")}}));let r=bn(e);if(r.substring(0,1)==="-"||r.substring(2,4)==="--"||r.substring(r.length-1)==="-"){throw new Error("invalid hyphen")}return r}const jn=Object.freeze({__proto__:null,_toEscapedUtf8String:vn,toUtf8Bytes:ln,toUtf8CodePoints:gn,toUtf8String:pn,Utf8ErrorFuncs:un,get Utf8ErrorReason(){return an},get UnicodeNormalizationForm(){return sn},formatBytes32String:yn,parseBytes32String:wn,nameprep:Un});class Rn extends Lr{constructor(t){super("string",t)}defaultValue(){return""}encode(t,e){return super.encode(t,ln(e))}decode(t){return pn(super.decode(t))}}class Fn extends rr{constructor(t,e){let r=false;const n=[];t.forEach((t=>{if(t.dynamic){r=true}n.push(t.type)}));const i="tuple("+n.join(",")+")";super("tuple",i,e,r);this.coders=t}defaultValue(){const t=[];this.coders.forEach((e=>{t.push(e.defaultValue())}));const e=this.coders.reduce(((t,e)=>{const r=e.localName;if(r){if(!t[r]){t[r]=0}t[r]++}return t}),{});this.coders.forEach(((r,n)=>{let i=r.localName;if(!i||e[i]!==1){return}if(i==="length"){i="_length"}if(t[i]!=null){return}t[i]=t[n]}));return Object.freeze(t)}encode(t,e){return Ur(t,this.coders,e)}decode(t){return t.coerce(this.name,jr(t,this.coders))}}const Ln=new pt(xe);const Qn=new RegExp(/^bytes([0-9]*)$/);const Hn=new RegExp(/^(u?int)([0-9]*)$/);class Gn{constructor(t){ge(this,"coerceFunc",t||null)}_getCoder(t){switch(t.baseType){case"address":return new Or(t.name);case"bool":return new Fr(t.name);case"string":return new Rn(t.name);case"bytes":return new Qr(t.name);case"array":return new Rr(this._getCoder(t.arrayChildren),t.arrayLength,t.name);case"tuple":return new Fn((t.components||[]).map((t=>this._getCoder(t))),t.name);case"":return new Gr(t.name)}let e=t.type.match(Hn);if(e){let r=parseInt(e[2]||"256");if(r===0||r>256||r%8!==0){Ln.throwArgumentError("invalid "+e[1]+" bit length","param",t)}return new en(r/8,e[1]==="int",t.name)}e=t.type.match(Qn);if(e){let r=parseInt(e[1]);if(r===0||r>32){Ln.throwArgumentError("invalid bytes length","param",t)}return new Hr(r,t.name)}return Ln.throwArgumentError("invalid type","type",t.type)}_getWordSize(){return 32}_getReader(t,e){return new ir(t,this._getWordSize(),this.coerceFunc,e)}_getWriter(){return new nr(this._getWordSize())}getDefaultValue(t){const e=t.map((t=>this._getCoder(Fe.from(t))));const r=new Fn(e,"_");return r.defaultValue()}encode(t,e){if(t.length!==e.length){Ln.throwError("types/values length mismatch",pt.errors.INVALID_ARGUMENT,{count:{types:t.length,values:e.length},value:{types:t,values:e}})}const r=t.map((t=>this._getCoder(Fe.from(t))));const n=new Fn(r,"_");const i=this._getWriter();n.encode(i,e);return i.data}decode(t,e,r){const n=t.map((t=>this._getCoder(Fe.from(t))));const i=new Fn(n,"_");return i.decode(this._getReader(Bt(e),r))}}const Kn=new Gn;function Jn(t){return ar(ln(t))}const zn="hash/5.7.0";function Wn(t){t=atob(t);const e=[];for(let r=0;r<t.length;r++){e.push(t.charCodeAt(r))}return Bt(e)}function qn(t){t=Bt(t);let e="";for(let r=0;r<t.length;r++){e+=String.fromCharCode(t[r])}return btoa(e)}const Vn=Object.freeze({__proto__:null,decode:Wn,encode:qn});function Yn(t,e){if(e==null){e=1}const r=[];const n=r.forEach;const i=function(t,e){n.call(t,(function(t){if(e>0&&Array.isArray(t)){i(t,e-1)}else{r.push(t)}}))};i(t,e);return r}function _n(t){const e={};for(let r=0;r<t.length;r++){const n=t[r];e[n[0]]=n[1]}return e}function Zn(t){let e=0;function r(){return t[e++]<<8|t[e++]}let n=r();let i=1;let s=[0,1];for(let t=1;t<n;t++){s.push(i+=r())}let a=r();let o=e;e+=a;let f=0;let c=0;function u(){if(f==0){c=c<<8|t[e++];f=8}return c>>--f&1}const h=31;const l=Math.pow(2,h);const d=l>>>1;const v=d>>1;const b=l-1;let p=0;for(let t=0;t<h;t++)p=p<<1|u();let g=[];let y=0;let w=l;while(true){let t=Math.floor(((p-y+1)*i-1)/w);let e=0;let r=n;while(r-e>1){let n=e+r>>>1;if(t<s[n]){r=n}else{e=n}}if(e==0)break;g.push(e);let a=y+Math.floor(w*s[e]/i);let o=y+Math.floor(w*s[e+1]/i)-1;while(((a^o)&d)==0){p=p<<1&b|u();a=a<<1&b;o=o<<1&b|1}while(a&~o&v){p=p&d|p<<1&b>>>1|u();a=a<<1^d;o=(o^d)<<1|d|1}y=a;w=1+o-a}let m=n-4;return g.map((e=>{switch(e-m){case 3:return m+65792+(t[o++]<<16|t[o++]<<8|t[o++]);case 2:return m+256+(t[o++]<<8|t[o++]);case 1:return m+t[o++];default:return e-1}}))}function Xn(t){let e=0;return()=>t[e++]}function $n(t){return Xn(Zn(t))}function ti(t){return t&1?~t>>1:t>>1}function ei(t,e){let r=Array(t);for(let n=0;n<t;n++)r[n]=1+e();return r}function ri(t,e){let r=Array(t);for(let n=0,i=-1;n<t;n++)r[n]=i+=1+e();return r}function ni(t,e){let r=Array(t);for(let n=0,i=0;n<t;n++)r[n]=i+=ti(e());return r}function ii(t,e){let r=ri(t(),t);let n=t();let i=ri(n,t);let s=ei(n,t);for(let t=0;t<n;t++){for(let e=0;e<s[t];e++){r.push(i[t]+e)}}return e?r.map((t=>e[t])):r}function si(t){let e=[];while(true){let r=t();if(r==0)break;e.push(fi(r,t))}while(true){let r=t()-1;if(r<0)break;e.push(ci(r,t))}return _n(Yn(e))}function ai(t){let e=[];while(true){let r=t();if(r==0)break;e.push(r)}return e}function oi(t,e,r){let n=Array(t).fill(undefined).map((()=>[]));for(let i=0;i<e;i++){ni(t,r).forEach(((t,e)=>n[e].push(t)))}return n}function fi(t,e){let r=1+e();let n=e();let i=ai(e);let s=oi(i.length,1+t,e);return Yn(s.map(((t,e)=>{const s=t[0],a=t.slice(1);return Array(i[e]).fill(undefined).map(((t,e)=>{let i=e*n;return[s+e*r,a.map((t=>t+i))]}))})))}function ci(t,e){let r=1+e();let n=oi(r,1+t,e);return n.map((t=>[t[0],t.slice(1)]))}function ui(t){let e=ii(t).sort(((t,e)=>t-e));return r();function r(){let n=[];while(true){let i=ii(t,e);if(i.length==0)break;n.push({set:new Set(i),node:r()})}n.sort(((t,e)=>e.set.size-t.set.size));let i=t();let s=i%3;i=i/3|0;let a=!!(i&1);i>>=1;let o=i==1;let f=i==2;return{branches:n,valid:s,fe0f:a,save:o,check:f}}}function hi(){return $n(Wn("AEQF2AO2DEsA2wIrAGsBRABxAN8AZwCcAEwAqgA0AGwAUgByADcATAAVAFYAIQAyACEAKAAYAFgAGwAjABQAMAAmADIAFAAfABQAKwATACoADgAbAA8AHQAYABoAGQAxADgALAAoADwAEwA9ABMAGgARAA4ADwAWABMAFgAIAA8AHgQXBYMA5BHJAS8JtAYoAe4AExozi0UAH21tAaMnBT8CrnIyhrMDhRgDygIBUAEHcoFHUPe8AXBjAewCjgDQR8IICIcEcQLwATXCDgzvHwBmBoHNAqsBdBcUAykgDhAMShskMgo8AY8jqAQfAUAfHw8BDw87MioGlCIPBwZCa4ELatMAAMspJVgsDl8AIhckSg8XAHdvTwBcIQEiDT4OPhUqbyECAEoAS34Aej8Ybx83JgT/Xw8gHxZ/7w8RICxPHA9vBw+Pfw8PHwAPFv+fAsAvCc8vEr8ivwD/EQ8Bol8OEBa/A78hrwAPCU8vESNvvwWfHwNfAVoDHr+ZAAED34YaAdJPAK7PLwSEgDLHAGo1Pz8Pvx9fUwMrpb8O/58VTzAPIBoXIyQJNF8hpwIVAT8YGAUADDNBaX3RAMomJCg9EhUeA29MABsZBTMNJipjOhc19gcIDR8bBwQHEggCWi6DIgLuAQYA+BAFCha3A5XiAEsqM7UFFgFLhAMjFTMYE1Klnw74nRVBG/ASCm0BYRN/BrsU3VoWy+S0vV8LQx+vN8gF2AC2AK5EAWwApgYDKmAAroQ0NDQ0AT+OCg7wAAIHRAbpNgVcBV0APTA5BfbPFgMLzcYL/QqqA82eBALKCjQCjqYCht0/k2+OAsXQAoP3ASTKDgDw6ACKAUYCMpIKJpRaAE4A5womABzZvs0REEKiACIQAd5QdAECAj4Ywg/wGqY2AVgAYADYvAoCGAEubA0gvAY2ALAAbpbvqpyEAGAEpgQAJgAG7gAgAEACmghUFwCqAMpAINQIwC4DthRAAPcycKgApoIdABwBfCisABoATwBqASIAvhnSBP8aH/ECeAKXAq40NjgDBTwFYQU6AXs3oABgAD4XNgmcCY1eCl5tIFZeUqGgyoNHABgAEQAaABNwWQAmABMATPMa3T34ADldyprmM1M2XociUQgLzvwAXT3xABgAEQAaABNwIGFAnADD8AAgAD4BBJWzaCcIAIEBFMAWwKoAAdq9BWAF5wLQpALEtQAKUSGkahR4GnJM+gsAwCgeFAiUAECQ0BQuL8AAIAAAADKeIheclvFqQAAETr4iAMxIARMgAMIoHhQIAn0E0pDQFC4HhznoAAAAIAI2C0/4lvFqQAAETgBJJwYCAy4ABgYAFAA8MBKYEH4eRhTkAjYeFcgACAYAeABsOqyQ5gRwDayqugEgaIIAtgoACgDmEABmBAWGme5OBJJA2m4cDeoAmITWAXwrMgOgAGwBCh6CBXYF1Tzg1wKAAFdiuABRAFwAXQBsAG8AdgBrAHYAbwCEAHEwfxQBVE5TEQADVFhTBwBDANILAqcCzgLTApQCrQL6vAAMAL8APLhNBKkE6glGKTAU4Dr4N2EYEwBCkABKk8rHAbYBmwIoAiU4Ajf/Aq4CowCAANIChzgaNBsCsTgeODcFXrgClQKdAqQBiQGYAqsCsjTsNHsfNPA0ixsAWTWiOAMFPDQSNCk2BDZHNow2TTZUNhk28Jk9VzI3QkEoAoICoQKwAqcAQAAxBV4FXbS9BW47YkIXP1ciUqs05DS/FwABUwJW11e6nHuYZmSh/RAYA8oMKvZ8KASoUAJYWAJ6ILAsAZSoqjpgA0ocBIhmDgDWAAawRDQoAAcuAj5iAHABZiR2AIgiHgCaAU68ACxuHAG0ygM8MiZIAlgBdF4GagJqAPZOHAMuBgoATkYAsABiAHgAMLoGDPj0HpKEBAAOJgAuALggTAHWAeAMEDbd20Uege0ADwAWADkAQgA9OHd+2MUQZBBhBgNNDkxxPxUQArEPqwvqERoM1irQ090ANK4H8ANYB/ADWANYB/AH8ANYB/ADWANYA1gDWBwP8B/YxRBkD00EcgWTBZAE2wiIJk4RhgctCNdUEnQjHEwDSgEBIypJITuYMxAlR0wRTQgIATZHbKx9PQNMMbBU+pCnA9AyVDlxBgMedhKlAC8PeCE1uk6DekxxpQpQT7NX9wBFBgASqwAS5gBJDSgAUCwGPQBI4zTYABNGAE2bAE3KAExdGABKaAbgAFBXAFCOAFBJABI2SWdObALDOq0//QomCZhvwHdTBkIQHCemEPgMNAG2ATwN7kvZBPIGPATKH34ZGg/OlZ0Ipi3eDO4m5C6igFsj9iqEBe5L9TzeC05RaQ9aC2YJ5DpkgU8DIgEOIowK3g06CG4Q9ArKbA3mEUYHOgPWSZsApgcCCxIdNhW2JhFirQsKOXgG/Br3C5AmsBMqev0F1BoiBk4BKhsAANAu6IWxWjJcHU9gBgQLJiPIFKlQIQ0mQLh4SRocBxYlqgKSQ3FKiFE3HpQh9zw+DWcuFFF9B/Y8BhlQC4I8n0asRQ8R0z6OPUkiSkwtBDaALDAnjAnQD4YMunxzAVoJIgmyDHITMhEYN8YIOgcaLpclJxYIIkaWYJsE+KAD9BPSAwwFQAlCBxQDthwuEy8VKgUOgSXYAvQ21i60ApBWgQEYBcwPJh/gEFFH4Q7qCJwCZgOEJewALhUiABginAhEZABgj9lTBi7MCMhqbSN1A2gU6GIRdAeSDlgHqBw0FcAc4nDJXgyGCSiksAlcAXYJmgFgBOQICjVcjKEgQmdUi1kYnCBiQUBd/QIyDGYVoES+h3kCjA9sEhwBNgF0BzoNAgJ4Ee4RbBCWCOyGBTW2M/k6JgRQIYQgEgooA1BszwsoJvoM+WoBpBJjAw00PnfvZ6xgtyUX/gcaMsZBYSHyC5NPzgydGsIYQ1QvGeUHwAP0GvQn60FYBgADpAQUOk4z7wS+C2oIjAlAAEoOpBgH2BhrCnKM0QEyjAG4mgNYkoQCcJAGOAcMAGgMiAV65gAeAqgIpAAGANADWAA6Aq4HngAaAIZCAT4DKDABIuYCkAOUCDLMAZYwAfQqBBzEDBYA+DhuSwLDsgKAa2ajBd5ZAo8CSjYBTiYEBk9IUgOwcuIA3ABMBhTgSAEWrEvMG+REAeBwLADIAPwABjYHBkIBzgH0bgC4AWALMgmjtLYBTuoqAIQAFmwB2AKKAN4ANgCA8gFUAE4FWvoF1AJQSgESMhksWGIBvAMgATQBDgB6BsyOpsoIIARuB9QCEBwV4gLvLwe2AgMi4BPOQsYCvd9WADIXUu5eZwqoCqdeaAC0YTQHMnM9UQAPH6k+yAdy/BZIiQImSwBQ5gBQQzSaNTFWSTYBpwGqKQK38AFtqwBI/wK37gK3rQK3sAK6280C0gK33AK3zxAAUEIAUD9SklKDArekArw5AEQAzAHCO147WTteO1k7XjtZO147WTteO1kDmChYI03AVU0oJqkKbV9GYewMpw3VRMk6ShPcYFJgMxPJLbgUwhXPJVcZPhq9JwYl5VUKDwUt1GYxCC00dhe9AEApaYNCY4ceMQpMHOhTklT5LRwAskujM7ANrRsWREEFSHXuYisWDwojAmSCAmJDXE6wXDchAqH4AmiZAmYKAp+FOBwMAmY8AmYnBG8EgAN/FAN+kzkHOXgYOYM6JCQCbB4CMjc4CwJtyAJtr/CLADRoRiwBaADfAOIASwYHmQyOAP8MwwAOtgJ3MAJ2o0ACeUxEAni7Hl3cRa9G9AJ8QAJ6yQJ9CgJ88UgBSH5kJQAsFklZSlwWGErNAtECAtDNSygDiFADh+dExpEzAvKiXQQDA69Lz0wuJgTQTU1NsAKLQAKK2cIcCB5EaAa4Ao44Ao5dQZiCAo7aAo5deVG1UzYLUtVUhgKT/AKTDQDqAB1VH1WwVdEHLBwplocy4nhnRTw6ApegAu+zWCKpAFomApaQApZ9nQCqWa1aCoJOADwClrYClk9cRVzSApnMApllXMtdCBoCnJw5wzqeApwXAp+cAp65iwAeEDIrEAKd8gKekwC2PmE1YfACntQCoG8BqgKeoCACnk+mY8lkKCYsAiewAiZ/AqD8AqBN2AKmMAKlzwKoAAB+AqfzaH1osgAESmodatICrOQCrK8CrWgCrQMCVx4CVd0CseLYAx9PbJgCsr4OArLpGGzhbWRtSWADJc4Ctl08QG6RAylGArhfArlIFgK5K3hwN3DiAr0aAy2zAzISAr6JcgMDM3ICvhtzI3NQAsPMAsMFc4N0TDZGdOEDPKgDPJsDPcACxX0CxkgCxhGKAshqUgLIRQLJUALJLwJkngLd03h6YniveSZL0QMYpGcDAmH1GfSVJXsMXpNevBICz2wCz20wTFTT9BSgAMeuAs90ASrrA04TfkwGAtwoAtuLAtJQA1JdA1NgAQIDVY2AikABzBfuYUZ2AILPg44C2sgC2d+EEYRKpz0DhqYAMANkD4ZyWvoAVgLfZgLeuXR4AuIw7RUB8zEoAfScAfLTiALr9ALpcXoAAur6AurlAPpIAboC7ooC652Wq5cEAu5AA4XhmHpw4XGiAvMEAGoDjheZlAL3FAORbwOSiAL3mQL52gL4Z5odmqy8OJsfA52EAv77ARwAOp8dn7QDBY4DpmsDptoA0sYDBmuhiaIGCgMMSgFgASACtgNGAJwEgLpoBgC8BGzAEowcggCEDC6kdjoAJAM0C5IKRoABZCgiAIzw3AYBLACkfng9ogigkgNmWAN6AEQCvrkEVqTGAwCsBRbAA+4iQkMCHR072jI2PTbUNsk2RjY5NvA23TZKNiU3EDcZN5I+RTxDRTBCJkK5VBYKFhZfwQCWygU3AJBRHpu+OytgNxa61A40GMsYjsn7BVwFXQVcBV0FaAVdBVwFXQVcBV0FXAVdBVwFXUsaCNyKAK4AAQUHBwKU7oICoW1e7jAEzgPxA+YDwgCkBFDAwADABKzAAOxFLhitA1UFTDeyPkM+bj51QkRCuwTQWWQ8X+0AWBYzsACNA8xwzAGm7EZ/QisoCTAbLDs6fnLfb8H2GccsbgFw13M1HAVkBW/Jxsm9CNRO8E8FDD0FBQw9FkcClOYCoMFegpDfADgcMiA2AJQACB8AsigKAIzIEAJKeBIApY5yPZQIAKQiHb4fvj5BKSRPQrZCOz0oXyxgOywfKAnGbgMClQaCAkILXgdeCD9IIGUgQj5fPoY+dT52Ao5CM0dAX9BTVG9SDzFwWTQAbxBzJF/lOEIQQglCCkKJIAls5AcClQICoKPMODEFxhi6KSAbiyfIRrMjtCgdWCAkPlFBIitCsEJRzAbMAV/OEyQzDg0OAQQEJ36i328/Mk9AybDJsQlq3tDRApUKAkFzXf1d/j9uALYP6hCoFgCTGD8kPsFKQiobrm0+zj0KSD8kPnVCRBwMDyJRTHFgMTJa5rwXQiQ2YfI/JD7BMEJEHGINTw4TOFlIRzwJO0icMQpyPyQ+wzJCRBv6DVgnKB01NgUKj2bwYzMqCoBkznBgEF+zYDIocwRIX+NgHj4HICNfh2C4CwdwFWpTG/lgUhYGAwRfv2Ts8mAaXzVgml/XYIJfuWC4HI1gUF9pYJZgMR6ilQHMAOwLAlDRefC0in4AXAEJA6PjCwc0IamOANMMCAECRQDFNRTZBgd+CwQlRA+r6+gLBDEFBnwUBXgKATIArwAGRAAHA3cDdAN2A3kDdwN9A3oDdQN7A30DfAN4A3oDfQAYEAAlAtYASwMAUAFsAHcKAHcAmgB3AHUAdQB2AHVu8UgAygDAAHcAdQB1AHYAdQALCgB3AAsAmgB3AAsCOwB3AAtu8UgAygDAAHgKAJoAdwB3AHUAdQB2AHUAeAB1AHUAdgB1bvFIAMoAwAALCgCaAHcACwB3AAsCOwB3AAtu8UgAygDAAH4ACwGgALcBpwC6AahdAu0COwLtbvFIAMoAwAALCgCaAu0ACwLtAAsCOwLtAAtu8UgAygDAA24ACwNvAAu0VsQAAzsAABCkjUIpAAsAUIusOggWcgMeBxVsGwL67U/2HlzmWOEeOgALASvuAAseAfpKUpnpGgYJDCIZM6YyARUE9ThqAD5iXQgnAJYJPnOzw0ZAEZxEKsIAkA4DhAHnTAIDxxUDK0lxCQlPYgIvIQVYJQBVqE1GakUAKGYiDToSBA1EtAYAXQJYAIF8GgMHRyAAIAjOe9YncekRAA0KACUrjwE7Ayc6AAYWAqaiKG4McEcqANoN3+Mg9TwCBhIkuCny+JwUQ29L008JluRxu3K+oAdqiHOqFH0AG5SUIfUJ5SxCGfxdipRzqTmT4V5Zb+r1Uo4Vm+NqSSEl2mNvR2JhIa8SpYO6ntdwFXHCWTCK8f2+Hxo7uiG3drDycAuKIMP5bhi06ACnqArH1rz4Rqg//lm6SgJGEVbF9xJHISaR6HxqxSnkw6shDnelHKNEfGUXSJRJ1GcsmtJw25xrZMDK9gXSm1/YMkdX4/6NKYOdtk/NQ3/NnDASjTc3fPjIjW/5sVfVObX2oTDWkr1dF9f3kxBsD3/3aQO8hPfRz+e0uEiJqt1161griu7gz8hDDwtpy+F+BWtefnKHZPAxcZoWbnznhJpy0e842j36bcNzGnIEusgGX0a8ZxsnjcSsPDZ09yZ36fCQbriHeQ72JRMILNl6ePPf2HWoVwgWAm1fb3V2sAY0+B6rAXqSwPBgseVmoqsBTSrm91+XasMYYySI8eeRxH3ZvHkMz3BQ5aJ3iUVbYPNM3/7emRtjlsMgv/9VyTsyt/mK+8fgWeT6SoFaclXqn42dAIsvAarF5vNNWHzKSkKQ/8Hfk5ZWK7r9yliOsooyBjRhfkHP4Q2DkWXQi6FG/9r/IwbmkV5T7JSopHKn1pJwm9tb5Ot0oyN1Z2mPpKXHTxx2nlK08fKk1hEYA8WgVVWL5lgx0iTv+KdojJeU23ZDjmiubXOxVXJKKi2Wjuh2HLZOFLiSC7Tls5SMh4f+Pj6xUSrNjFqLGehRNB8lC0QSLNmkJJx/wSG3MnjE9T1CkPwJI0wH2lfzwETIiVqUxg0dfu5q39Gt+hwdcxkhhNvQ4TyrBceof3Mhs/IxFci1HmHr4FMZgXEEczPiGCx0HRwzAqDq2j9AVm1kwN0mRVLWLylgtoPNapF5cY4Y1wJh/e0BBwZj44YgZrDNqvD/9Hv7GFYdUQeDJuQ3EWI4HaKqavU1XjC/n41kT4L79kqGq0kLhdTZvgP3TA3fS0ozVz+5piZsoOtIvBUFoMKbNcmBL6YxxaUAusHB38XrS8dQMnQwJfUUkpRoGr5AUeWicvBTzyK9g77+yCkf5PAysL7r/JjcZgrbvRpMW9iyaxZvKO6ceZN2EwIxKwVFPuvFuiEPGCoagbMo+SpydLrXqBzNCDGFCrO/rkcwa2xhokQZ5CdZ0AsU3JfSqJ6n5I14YA+P/uAgfhPU84Tlw7cEFfp7AEE8ey4sP12PTt4Cods1GRgDOB5xvyiR5m+Bx8O5nBCNctU8BevfV5A08x6RHd5jcwPTMDSZJOedIZ1cGQ704lxbAzqZOP05ZxaOghzSdvFBHYqomATARyAADK4elP8Ly3IrUZKfWh23Xy20uBUmLS4Pfagu9+oyVa2iPgqRP3F2CTUsvJ7+RYnN8fFZbU/HVvxvcFFDKkiTqV5UBZ3Gz54JAKByi9hkKMZJvuGgcSYXFmw08UyoQyVdfTD1/dMkCHXcTGAKeROgArsvmRrQTLUOXioOHGK2QkjHuoYFgXciZoTJd6Fs5q1QX1G+p/e26hYsEf7QZD1nnIyl/SFkNtYYmmBhpBrxl9WbY0YpHWRuw2Ll/tj9mD8P4snVzJl4F9J+1arVeTb9E5r2ILH04qStjxQNwn3m4YNqxmaNbLAqW2TN6LidwuJRqS+NXbtqxoeDXpxeGWmxzSkWxjkyCkX4NQRme6q5SAcC+M7+9ETfA/EwrzQajKakCwYyeunP6ZFlxU2oMEn1Pz31zeStW74G406ZJFCl1wAXIoUKkWotYEpOuXB1uVNxJ63dpJEqfxBeptwIHNrPz8BllZoIcBoXwgfJ+8VAUnVPvRvexnw0Ma/WiGYuJO5y8QTvEYBigFmhUxY5RqzE8OcywN/8m4UYrlaniJO75XQ6KSo9+tWHlu+hMi0UVdiKQp7NelnoZUzNaIyBPVeOwK6GNp+FfHuPOoyhaWuNvTYFkvxscMQWDh+zeFCFkgwbXftiV23ywJ4+uwRqmg9k3KzwIQpzppt8DBBOMbrqwQM5Gb05sEwdKzMiAqOloaA/lr0KA+1pr0/+HiWoiIjHA/wir2nIuS3PeU/ji3O6ZwoxcR1SZ9FhtLC5S0FIzFhbBWcGVP/KpxOPSiUoAdWUpqKH++6Scz507iCcxYI6rdMBICPJZea7OcmeFw5mObJSiqpjg2UoWNIs+cFhyDSt6geV5qgi3FunmwwDoGSMgerFOZGX1m0dMCYo5XOruxO063dwENK9DbnVM9wYFREzh4vyU1WYYJ/LRRp6oxgjqP/X5a8/4Af6p6NWkQferzBmXme0zY/4nwMJm/wd1tIqSwGz+E3xPEAOoZlJit3XddD7/BT1pllzOx+8bmQtANQ/S6fZexc6qi3W+Q2xcmXTUhuS5mpHQRvcxZUN0S5+PL9lXWUAaRZhEH8hTdAcuNMMCuVNKTEGtSUKNi3O6KhSaTzck8csZ2vWRZ+d7mW8c4IKwXIYd25S/zIftPkwPzufjEvOHWVD1m+FjpDVUTV0DGDuHj6QnaEwLu/dEgdLQOg9E1Sro9XHJ8ykLAwtPu+pxqKDuFexqON1sKQm7rwbE1E68UCfA/erovrTCG+DBSNg0l4goDQvZN6uNlbyLpcZAwj2UclycvLpIZMgv4yRlpb3YuMftozorbcGVHt/VeDV3+Fdf1TP0iuaCsPi2G4XeGhsyF1ubVDxkoJhmniQ0/jSg/eYML9KLfnCFgISWkp91eauR3IQvED0nAPXK+6hPCYs+n3+hCZbiskmVMG2da+0EsZPonUeIY8EbfusQXjsK/eFDaosbPjEfQS0RKG7yj5GG69M7MeO1HmiUYocgygJHL6M1qzUDDwUSmr99V7Sdr2F3JjQAJY+F0yH33Iv3+C9M38eML7gTgmNu/r2bUMiPvpYbZ6v1/IaESirBHNa7mPKn4dEmYg7v/+HQgPN1G79jBQ1+soydfDC2r+h2Bl/KIc5KjMK7OH6nb1jLsNf0EHVe2KBiE51ox636uyG6Lho0t3J34L5QY/ilE3mikaF4HKXG1mG1rCevT1Vv6GavltxoQe/bMrpZvRggnBxSEPEeEzkEdOxTnPXHVjUYdw8JYvjB/o7Eegc3Ma+NUxLLnsK0kJlinPmUHzHGtrk5+CAbVzFOBqpyy3QVUnzTDfC/0XD94/okH+OB+i7g9lolhWIjSnfIb+Eq43ZXOWmwvjyV/qqD+t0e+7mTEM74qP/Ozt8nmC7mRpyu63OB4KnUzFc074SqoyPUAgM+/TJGFo6T44EHnQU4X4z6qannVqgw/U7zCpwcmXV1AubIrvOmkKHazJAR55ePjp5tLBsN8vAqs3NAHdcEHOR2xQ0lsNAFzSUuxFQCFYvXLZJdOj9p4fNq6p0HBGUik2YzaI4xySy91KzhQ0+q1hjxvImRwPRf76tChlRkhRCi74NXZ9qUNeIwP+s5p+3m5nwPdNOHgSLD79n7O9m1n1uDHiMntq4nkYwV5OZ1ENbXxFd4PgrlvavZsyUO4MqYlqqn1O8W/I1dEZq5dXhrbETLaZIbC2Kj/Aa/QM+fqUOHdf0tXAQ1huZ3cmWECWSXy/43j35+Mvq9xws7JKseriZ1pEWKc8qlzNrGPUGcVgOa9cPJYIJsGnJTAUsEcDOEVULO5x0rXBijc1lgXEzQQKhROf8zIV82w8eswc78YX11KYLWQRcgHNJElBxfXr72lS2RBSl07qTKorO2uUDZr3sFhYsvnhLZn0A94KRzJ/7DEGIAhW5ZWFpL8gEwu1aLA9MuWZzNwl8Oze9Y+bX+v9gywRVnoB5I/8kXTXU3141yRLYrIOOz6SOnyHNy4SieqzkBXharjfjqq1q6tklaEbA8Qfm2DaIPs7OTq/nvJBjKfO2H9bH2cCMh1+5gspfycu8f/cuuRmtDjyqZ7uCIMyjdV3a+p3fqmXsRx4C8lujezIFHnQiVTXLXuI1XrwN3+siYYj2HHTvESUx8DlOTXpak9qFRK+L3mgJ1WsD7F4cu1aJoFoYQnu+wGDMOjJM3kiBQWHCcvhJ/HRdxodOQp45YZaOTA22Nb4XKCVxqkbwMYFhzYQYIAnCW8FW14uf98jhUG2zrKhQQ0q0CEq0t5nXyvUyvR8DvD69LU+g3i+HFWQMQ8PqZuHD+sNKAV0+M6EJC0szq7rEr7B5bQ8BcNHzvDMc9eqB5ZCQdTf80Obn4uzjwpYU7SISdtV0QGa9D3Wrh2BDQtpBKxaNFV+/Cy2P/Sv+8s7Ud0Fd74X4+o/TNztWgETUapy+majNQ68Lq3ee0ZO48VEbTZYiH1Co4OlfWef82RWeyUXo7woM03PyapGfikTnQinoNq5z5veLpeMV3HCAMTaZmA1oGLAn7XS3XYsz+XK7VMQsc4XKrmDXOLU/pSXVNUq8dIqTba///3x6LiLS6xs1xuCAYSfcQ3+rQgmu7uvf3THKt5Ooo97TqcbRqxx7EASizaQCBQllG/rYxVapMLgtLbZS64w1MDBMXX+PQpBKNwqUKOf2DDRDUXQf9EhOS0Qj4nTmlA8dzSLz/G1d+Ud8MTy/6ghhdiLpeerGY/UlDOfiuqFsMUU5/UYlP+BAmgRLuNpvrUaLlVkrqDievNVEAwF+4CoM1MZTmjxjJMsKJq+u8Zd7tNCUFy6LiyYXRJQ4VyvEQFFaCGKsxIwQkk7EzZ6LTJq2hUuPhvAW+gQnSG6J+MszC+7QCRHcnqDdyNRJ6T9xyS87A6MDutbzKGvGktpbXqtzWtXb9HsfK2cBMomjN9a4y+TaJLnXxAeX/HWzmf4cR4vALt/P4w4qgKY04ml4ZdLOinFYS6cup3G/1ie4+t1eOnpBNlqGqs75ilzkT4+DsZQxNvaSKJ//6zIbbk/M7LOhFmRc/1R+kBtz7JFGdZm/COotIdvQoXpTqP/1uqEUmCb/QWoGLMwO5ANcHzxdY48IGP5+J+zKOTBFZ4Pid+GTM+Wq12MV/H86xEJptBa6T+p3kgpwLedManBHC2GgNrFpoN2xnrMz9WFWX/8/ygSBkavq2Uv7FdCsLEYLu9LLIvAU0bNRDtzYl+/vXmjpIvuJFYjmI0im6QEYqnIeMsNjXG4vIutIGHijeAG/9EDBozKV5cldkHbLxHh25vT+ZEzbhXlqvpzKJwcEgfNwLAKFeo0/pvEE10XDB+EXRTXtSzJozQKFFAJhMxYkVaCW+E9AL7tMeU8acxidHqzb6lX4691UsDpy/LLRmT+epgW56+5Cw8tB4kMUv6s9lh3eRKbyGs+H/4mQMaYzPTf2OOdokEn+zzgvoD3FqNKk8QqGAXVsqcGdXrT62fSPkR2vROFi68A6se86UxRUk4cajfPyCC4G5wDhD+zNq4jodQ4u4n/m37Lr36n4LIAAsVr02dFi9AiwA81MYs2rm4eDlDNmdMRvEKRHfBwW5DdMNp0jPFZMeARqF/wL4XBfd+EMLBfMzpH5GH6NaW+1vrvMdg+VxDzatk3MXgO3ro3P/DpcC6+Mo4MySJhKJhSR01SGGGp5hPWmrrUgrv3lDnP+HhcI3nt3YqBoVAVTBAQT5iuhTg8nvPtd8ZeYj6w1x6RqGUBrSku7+N1+BaasZvjTk64RoIDlL8brpEcJx3OmY7jLoZsswdtmhfC/G21llXhITOwmvRDDeTTPbyASOa16cF5/A1fZAidJpqju3wYAy9avPR1ya6eNp9K8XYrrtuxlqi+bDKwlfrYdR0RRiKRVTLOH85+ZY7XSmzRpfZBJjaTa81VDcJHpZnZnSQLASGYW9l51ZV/h7eVzTi3Hv6hUsgc/51AqJRTkpbFVLXXszoBL8nBX0u/0jBLT8nH+fJePbrwURT58OY+UieRjd1vs04w0VG5VN2U6MoGZkQzKN/ptz0Q366dxoTGmj7i1NQGHi9GgnquXFYdrCfZBmeb7s0T6yrdlZH5cZuwHFyIJ/kAtGsTg0xH5taAAq44BAk1CPk9KVVbqQzrCUiFdF/6gtlPQ8bHHc1G1W92MXGZ5HEHftyLYs8mbD/9xYRUWkHmlM0zC2ilJlnNgV4bfALpQghxOUoZL7VTqtCHIaQSXm+YUMnpkXybnV+A6xlm2CVy8fn0Xlm2XRa0+zzOa21JWWmixfiPMSCZ7qA4rS93VN3pkpF1s5TonQjisHf7iU9ZGvUPOAKZcR1pbeVf/Ul7OhepGCaId9wOtqo7pJ7yLcBZ0pFkOF28y4zEI/kcUNmutBHaQpBdNM8vjCS6HZRokkeo88TBAjGyG7SR+6vUgTcyK9Imalj0kuxz0wmK+byQU11AiJFk/ya5dNduRClcnU64yGu/ieWSeOos1t3ep+RPIWQ2pyTYVbZltTbsb7NiwSi3AV+8KLWk7LxCnfZUetEM8ThnsSoGH38/nyAwFguJp8FjvlHtcWZuU4hPva0rHfr0UhOOJ/F6vS62FW7KzkmRll2HEc7oUq4fyi5T70Vl7YVIfsPHUCdHesf9Lk7WNVWO75JDkYbMI8TOW8JKVtLY9d6UJRITO8oKo0xS+o99Yy04iniGHAaGj88kEWgwv0OrHdY/nr76DOGNS59hXCGXzTKUvDl9iKpLSWYN1lxIeyywdNpTkhay74w2jFT6NS8qkjo5CxA1yfSYwp6AJIZNKIeEK5PJAW7ORgWgwp0VgzYpqovMrWxbu+DGZ6Lhie1RAqpzm8VUzKJOH3mCzWuTOLsN3VT/dv2eeYe9UjbR8YTBsLz7q60VN1sU51k+um1f8JxD5pPhbhSC8rRaB454tmh6YUWrJI3+GWY0qeWioj/tbkYITOkJaeuGt4JrJvHA+l0Gu7kY7XOaa05alMnRWVCXqFgLIwSY4uF59Ue5SU4QKuc/HamDxbr0x6csCetXGoP7Qn1Bk/J9DsynO/UD6iZ1Hyrz+jit0hDCwi/E9OjgKTbB3ZQKQ/0ZOvevfNHG0NK4Aj3Cp7NpRk07RT1i/S0EL93Ag8GRgKI9CfpajKyK6+Jj/PI1KO5/85VAwz2AwzP8FTBb075IxCXv6T9RVvWT2tUaqxDS92zrGUbWzUYk9mSs82pECH+fkqsDt93VW++4YsR/dHCYcQSYTO/KaBMDj9LSD/J/+z20Kq8XvZUAIHtm9hRPP3ItbuAu2Hm5lkPs92pd7kCxgRs0xOVBnZ13ccdA0aunrwv9SdqElJRC3g+oCu+nXyCgmXUs9yMjTMAIHfxZV+aPKcZeUBWt057Xo85Ks1Ir5gzEHCWqZEhrLZMuF11ziGtFQUds/EESajhagzcKsxamcSZxGth4UII+adPhQkUnx2WyN+4YWR+r3f8MnkyGFuR4zjzxJS8WsQYR5PTyRaD9ixa6Mh741nBHbzfjXHskGDq179xaRNrCIB1z1xRfWfjqw2pHc1zk9xlPpL8sQWAIuETZZhbnmL54rceXVNRvUiKrrqIkeogsl0XXb17ylNb0f4GA9Wd44vffEG8FSZGHEL2fbaTGRcSiCeA8PmA/f6Hz8HCS76fXUHwgwkzSwlI71ekZ7Fapmlk/KC+Hs8hUcw3N2LN5LhkVYyizYFl/uPeVP5lsoJHhhfWvvSWruCUW1ZcJOeuTbrDgywJ/qG07gZJplnTvLcYdNaH0KMYOYMGX+rB4NGPFmQsNaIwlWrfCezxre8zXBrsMT+edVLbLqN1BqB76JH4BvZTqUIMfGwPGEn+EnmTV86fPBaYbFL3DFEhjB45CewkXEAtJxk4/Ms2pPXnaRqdky0HOYdcUcE2zcXq4vaIvW2/v0nHFJH2XXe22ueDmq/18XGtELSq85j9X8q0tcNSSKJIX8FTuJF/Pf8j5PhqG2u+osvsLxYrvvfeVJL+4tkcXcr9JV7v0ERmj/X6fM3NC4j6dS1+9Umr2oPavqiAydTZPLMNRGY23LO9zAVDly7jD+70G5TPPLdhRIl4WxcYjLnM+SNcJ26FOrkrISUtPObIz5Zb3AG612krnpy15RMW+1cQjlnWFI6538qky9axd2oJmHIHP08KyP0ubGO+TQNOYuv2uh17yCIvR8VcStw7o1g0NM60sk+8Tq7YfIBJrtp53GkvzXH7OA0p8/n/u1satf/VJhtR1l8Wa6Gmaug7haSpaCaYQax6ta0mkutlb+eAOSG1aobM81D9A4iS1RRlzBBoVX6tU1S6WE2N9ORY6DfeLRC4l9Rvr5h95XDWB2mR1d4WFudpsgVYwiTwT31ljskD8ZyDOlm5DkGh9N/UB/0AI5Xvb8ZBmai2hQ4BWMqFwYnzxwB26YHSOv9WgY3JXnvoN+2R4rqGVh/LLDMtpFP+SpMGJNWvbIl5SOodbCczW2RKleksPoUeGEzrjtKHVdtZA+kfqO+rVx/iclCqwoopepvJpSTDjT+b9GWylGRF8EDbGlw6eUzmJM95Ovoz+kwLX3c2fTjFeYEsE7vUZm3mqdGJuKh2w9/QGSaqRHs99aScGOdDqkFcACoqdbBoQqqjamhH6Q9ng39JCg3lrGJwd50Qk9ovnqBTr8MME7Ps2wiVfygUmPoUBJJfJWX5Nda0nuncbFkA=="))}const li=hi();const di=new Set(ii(li));const vi=new Set(ii(li));const bi=si(li);const pi=ui(li);const gi=45;const yi=95;function wi(t){return gn(t)}function mi(t){return t.filter((t=>t!=65039))}function Ai(t){for(let e of t.split(".")){let t=wi(e);try{for(let e=t.lastIndexOf(yi)-1;e>=0;e--){if(t[e]!==yi){throw new Error(`underscore only allowed at start`)}}if(t.length>=4&&t.every((t=>t<128))&&t[2]===gi&&t[3]===gi){throw new Error(`invalid label extension`)}}catch(t){throw new Error(`Invalid label "${e}": ${t.message}`)}}return t}function Ei(t){return Ai(ki(t,mi))}function ki(t,e){let r=wi(t).reverse();let n=[];while(r.length){let t=Bi(r);if(t){n.push(...e(t));continue}let i=r.pop();if(di.has(i)){n.push(i);continue}if(vi.has(i)){continue}let s=bi[i];if(s){n.push(...s);continue}throw new Error(`Disallowed codepoint: 0x${i.toString(16).toUpperCase()}`)}return Ai(Mi(String.fromCodePoint(...n)))}function Mi(t){return t.normalize("NFC")}function Bi(t,e){var r;let n=pi;let i;let s;let a=[];let o=t.length;if(e)e.length=0;while(o){let f=t[--o];n=(r=n.branches.find((t=>t.set.has(f))))===null||r===void 0?void 0:r.node;if(!n)break;if(n.save){s=f}else if(n.check){if(f===s)break}a.push(f);if(n.fe0f){a.push(65039);if(o>0&&t[o-1]==65039)o--}if(n.valid){i=a.slice();if(n.valid==2)i.splice(1,1);if(e)e.push(...t.slice(o).reverse());t.length=o}}return i}const Si=new pt(zn);const Ci=new Uint8Array(32);Ci.fill(0);function xi(t){if(t.length===0){throw new Error("invalid ENS name; empty component")}return t}function Pi(t){const e=ln(Ei(t));const r=[];if(t.length===0){return r}let n=0;for(let t=0;t<e.length;t++){const i=e[t];if(i===46){r.push(xi(e.slice(n,t)));n=t+1}}if(n>=e.length){throw new Error("invalid ENS name; empty component")}r.push(xi(e.slice(n)));return r}function Ii(t){return Pi(t).map((t=>pn(t))).join(".")}function Ti(t){try{return Pi(t).length!==0}catch(t){}return false}function Oi(t){if(typeof t!=="string"){Si.throwArgumentError("invalid ENS name; not a string","name",t)}let e=Ci;const r=Pi(t);while(r.length){e=ar(St([e,ar(r.pop())]))}return Tt(e)}function Di(t){return Tt(St(Pi(t).map((t=>{if(t.length>63){throw new Error("invalid DNS encoded entry; length exceeds 63 bytes")}const e=new Uint8Array(t.length+1);e.set(t,1);e[0]=e.length-1;return e}))))+"00"}const Ni="Ethereum Signed Message:\n";function Ui(t){if(typeof t==="string"){t=ln(t)}return ar(St([ln(Ni),ln(String(t.length)),t]))}var ji=undefined&&undefined.__awaiter||function(t,e,r,n){function i(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,s){function a(t){try{f(n.next(t))}catch(t){s(t)}}function o(t){try{f(n["throw"](t))}catch(t){s(t)}}function f(t){t.done?r(t.value):i(t.value).then(a,o)}f((n=n.apply(t,e||[])).next())}))};const Ri=new pt(zn);const Fi=new Uint8Array(32);Fi.fill(0);const Li=Vt.from(-1);const Qi=Vt.from(0);const Hi=Vt.from(1);const Gi=Vt.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function Ki(t){const e=Bt(t);const r=e.length%32;if(r){return Nt([e,Fi.slice(r)])}return Tt(e)}const Ji=Rt(Hi.toHexString(),32);const zi=Rt(Qi.toHexString(),32);const Wi={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"};const qi=["name","version","chainId","verifyingContract","salt"];function Vi(t){return function(e){if(typeof e!=="string"){Ri.throwArgumentError(`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e)}return e}}const Yi={name:Vi("name"),version:Vi("version"),chainId:function(t){try{return Vt.from(t).toString()}catch(t){}return Ri.throwArgumentError(`invalid domain value for "chainId"`,"domain.chainId",t)},verifyingContract:function(t){try{return Sr(t).toLowerCase()}catch(t){}return Ri.throwArgumentError(`invalid domain value "verifyingContract"`,"domain.verifyingContract",t)},salt:function(t){try{const e=Bt(t);if(e.length!==32){throw new Error("bad length")}return Tt(e)}catch(t){}return Ri.throwArgumentError(`invalid domain value "salt"`,"domain.salt",t)}};function _i(t){{const e=t.match(/^(u?)int(\d*)$/);if(e){const r=e[1]==="";const n=parseInt(e[2]||"256");if(n%8!==0||n>256||e[2]&&e[2]!==String(n)){Ri.throwArgumentError("invalid numeric width","type",t)}const i=Gi.mask(r?n-1:n);const s=r?i.add(Hi).mul(Li):Qi;return function(e){const r=Vt.from(e);if(r.lt(s)||r.gt(i)){Ri.throwArgumentError(`value out-of-bounds for ${t}`,"value",e)}return Rt(r.toTwos(256).toHexString(),32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const r=parseInt(e[1]);if(r===0||r>32||e[1]!==String(r)){Ri.throwArgumentError("invalid bytes width","type",t)}return function(e){const n=Bt(e);if(n.length!==r){Ri.throwArgumentError(`invalid length for ${t}`,"value",e)}return Ki(e)}}}switch(t){case"address":return function(t){return Rt(Sr(t),32)};case"bool":return function(t){return!t?zi:Ji};case"bytes":return function(t){return ar(t)};case"string":return function(t){return Jn(t)}}return null}function Zi(t,e){return`${t}(${e.map((({name:t,type:e})=>e+" "+t)).join(",")})`}class Xi{constructor(t){ge(this,"types",Object.freeze(Be(t)));ge(this,"_encoderCache",{});ge(this,"_types",{});const e={};const r={};const n={};Object.keys(t).forEach((t=>{e[t]={};r[t]=[];n[t]={}}));for(const n in t){const i={};t[n].forEach((s=>{if(i[s.name]){Ri.throwArgumentError(`duplicate variable name ${JSON.stringify(s.name)} in ${JSON.stringify(n)}`,"types",t)}i[s.name]=true;const a=s.type.match(/^([^\x5b]*)(\x5b|$)/)[1];if(a===n){Ri.throwArgumentError(`circular type reference to ${JSON.stringify(a)}`,"types",t)}const o=_i(a);if(o){return}if(!r[a]){Ri.throwArgumentError(`unknown type ${JSON.stringify(a)}`,"types",t)}r[a].push(n);e[n][a]=true}))}const i=Object.keys(r).filter((t=>r[t].length===0));if(i.length===0){Ri.throwArgumentError("missing primary type","types",t)}else if(i.length>1){Ri.throwArgumentError(`ambiguous primary types or unused types: ${i.map((t=>JSON.stringify(t))).join(", ")}`,"types",t)}ge(this,"primaryType",i[0]);function s(i,a){if(a[i]){Ri.throwArgumentError(`circular type reference to ${JSON.stringify(i)}`,"types",t)}a[i]=true;Object.keys(e[i]).forEach((t=>{if(!r[t]){return}s(t,a);Object.keys(a).forEach((e=>{n[e][t]=true}))}));delete a[i]}s(this.primaryType,{});for(const e in n){const r=Object.keys(n[e]);r.sort();this._types[e]=Zi(e,t[e])+r.map((e=>Zi(e,t[e]))).join("")}}getEncoder(t){let e=this._encoderCache[t];if(!e){e=this._encoderCache[t]=this._getEncoder(t)}return e}_getEncoder(t){{const e=_i(t);if(e){return e}}const e=t.match(/^(.*)(\x5b(\d*)\x5d)$/);if(e){const t=e[1];const r=this.getEncoder(t);const n=parseInt(e[3]);return e=>{if(n>=0&&e.length!==n){Ri.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",e)}let i=e.map(r);if(this._types[t]){i=i.map(ar)}return ar(Nt(i))}}const r=this.types[t];if(r){const e=Jn(this._types[t]);return t=>{const n=r.map((({name:e,type:r})=>{const n=this.getEncoder(r)(t[e]);if(this._types[r]){return ar(n)}return n}));n.unshift(e);return Nt(n)}}return Ri.throwArgumentError(`unknown type: ${t}`,"type",t)}encodeType(t){const e=this._types[t];if(!e){Ri.throwArgumentError(`unknown type: ${JSON.stringify(t)}`,"name",t)}return e}encodeData(t,e){return this.getEncoder(t)(e)}hashStruct(t,e){return ar(this.encodeData(t,e))}encode(t){return this.encodeData(this.primaryType,t)}hash(t){return this.hashStruct(this.primaryType,t)}_visit(t,e,r){{const n=_i(t);if(n){return r(t,e)}}const n=t.match(/^(.*)(\x5b(\d*)\x5d)$/);if(n){const t=n[1];const i=parseInt(n[3]);if(i>=0&&e.length!==i){Ri.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",e)}return e.map((e=>this._visit(t,e,r)))}const i=this.types[t];if(i){return i.reduce(((t,{name:n,type:i})=>{t[n]=this._visit(i,e[n],r);return t}),{})}return Ri.throwArgumentError(`unknown type: ${t}`,"type",t)}visit(t,e){return this._visit(this.primaryType,t,e)}static from(t){return new Xi(t)}static getPrimaryType(t){return Xi.from(t).primaryType}static hashStruct(t,e,r){return Xi.from(e).hashStruct(t,r)}static hashDomain(t){const e=[];for(const r in t){const n=Wi[r];if(!n){Ri.throwArgumentError(`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",t)}e.push({name:r,type:n})}e.sort(((t,e)=>qi.indexOf(t.name)-qi.indexOf(e.name)));return Xi.hashStruct("EIP712Domain",{EIP712Domain:e},t)}static encode(t,e,r){return Nt(["0x1901",Xi.hashDomain(t),Xi.from(e).hash(r)])}static hash(t,e,r){return ar(Xi.encode(t,e,r))}static resolveNames(t,e,r,n){return ji(this,void 0,void 0,(function*(){t=Ae(t);const i={};if(t.verifyingContract&&!Pt(t.verifyingContract,20)){i[t.verifyingContract]="0x"}const s=Xi.from(e);s.visit(r,((t,e)=>{if(t==="address"&&!Pt(e,20)){i[e]="0x"}return e}));for(const t in i){i[t]=yield n(t)}if(t.verifyingContract&&i[t.verifyingContract]){t.verifyingContract=i[t.verifyingContract]}r=s.visit(r,((t,e)=>{if(t==="address"&&i[e]){return i[e]}return e}));return{domain:t,value:r}}))}static getPayload(t,e,r){Xi.hashDomain(t);const n={};const i=[];qi.forEach((e=>{const r=t[e];if(r==null){return}n[e]=Yi[e](r);i.push({name:e,type:Wi[e]})}));const s=Xi.from(e);const a=Ae(e);if(a.EIP712Domain){Ri.throwArgumentError("types must not contain EIP712Domain type","types.EIP712Domain",e)}else{a.EIP712Domain=i}s.encode(r);return{types:a,domain:n,primaryType:s.primaryType,message:s.visit(r,((t,e)=>{if(t.match(/^bytes(\d*)/)){return Tt(Bt(e))}if(t.match(/^u?int/)){return Vt.from(e).toString()}switch(t){case"address":return e.toLowerCase();case"bool":return!!e;case"string":if(typeof e!=="string"){Ri.throwArgumentError(`invalid string`,"value",e)}return e}return Ri.throwArgumentError("unsupported type","type",t)}))}}}const $i=Object.freeze({__proto__:null,id:Jn,dnsEncode:Di,namehash:Oi,isValidName:Ti,ensNormalize:Ii,messagePrefix:Ni,hashMessage:Ui,_TypedDataEncoder:Xi});const ts=new pt(xe);class es extends Se{}class rs extends Se{}class ns extends Se{}class is extends Se{static isIndexed(t){return!!(t&&t._isIndexed)}}const ss={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:true},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"]}};function as(t,e){const r=new Error(`deferred error during ABI decoding triggered accessing ${t}`);r.error=e;return r}class os{constructor(t){let e=[];if(typeof t==="string"){e=JSON.parse(t)}else{e=t}ge(this,"fragments",e.map((t=>Qe.from(t))).filter((t=>t!=null)));ge(this,"_abiCoder",ye(new.target,"getAbiCoder")());ge(this,"functions",{});ge(this,"errors",{});ge(this,"events",{});ge(this,"structs",{});this.fragments.forEach((t=>{let e=null;switch(t.type){case"constructor":if(this.deploy){ts.warn("duplicate definition - constructor");return}ge(this,"deploy",t);return;case"function":e=this.functions;break;case"event":e=this.events;break;case"error":e=this.errors;break;default:return}let r=t.format();if(e[r]){ts.warn("duplicate definition - "+r);return}e[r]=t}));if(!this.deploy){ge(this,"deploy",ze.from({payable:false,type:"constructor"}))}ge(this,"_isInterface",true)}format(t){if(!t){t=je.full}if(t===je.sighash){ts.throwArgumentError("interface does not support formatting sighash","format",t)}const e=this.fragments.map((e=>e.format(t)));if(t===je.json){return JSON.stringify(e.map((t=>JSON.parse(t))))}return e}static getAbiCoder(){return Kn}static getAddress(t){return Sr(t)}static getSighash(t){return Dt(Jn(t.format()),0,4)}static getEventTopic(t){return Jn(t.format())}getFunction(t){if(Pt(t)){for(const e in this.functions){if(t===this.getSighash(e)){return this.functions[e]}}ts.throwArgumentError("no matching function","sighash",t)}if(t.indexOf("(")===-1){const e=t.trim();const r=Object.keys(this.functions).filter((t=>t.split("(")[0]===e));if(r.length===0){ts.throwArgumentError("no matching function","name",e)}else if(r.length>1){ts.throwArgumentError("multiple matching functions","name",e)}return this.functions[r[0]]}const e=this.functions[We.fromString(t).format()];if(!e){ts.throwArgumentError("no matching function","signature",t)}return e}getEvent(t){if(Pt(t)){const e=t.toLowerCase();for(const t in this.events){if(e===this.getEventTopic(t)){return this.events[t]}}ts.throwArgumentError("no matching event","topichash",e)}if(t.indexOf("(")===-1){const e=t.trim();const r=Object.keys(this.events).filter((t=>t.split("(")[0]===e));if(r.length===0){ts.throwArgumentError("no matching event","name",e)}else if(r.length>1){ts.throwArgumentError("multiple matching events","name",e)}return this.events[r[0]]}const e=this.events[He.fromString(t).format()];if(!e){ts.throwArgumentError("no matching event","signature",t)}return e}getError(t){if(Pt(t)){const e=ye(this.constructor,"getSighash");for(const r in this.errors){const n=this.errors[r];if(t===e(n)){return this.errors[r]}}ts.throwArgumentError("no matching error","sighash",t)}if(t.indexOf("(")===-1){const e=t.trim();const r=Object.keys(this.errors).filter((t=>t.split("(")[0]===e));if(r.length===0){ts.throwArgumentError("no matching error","name",e)}else if(r.length>1){ts.throwArgumentError("multiple matching errors","name",e)}return this.errors[r[0]]}const e=this.errors[We.fromString(t).format()];if(!e){ts.throwArgumentError("no matching error","signature",t)}return e}getSighash(t){if(typeof t==="string"){try{t=this.getFunction(t)}catch(e){try{t=this.getError(t)}catch(t){throw e}}}return ye(this.constructor,"getSighash")(t)}getEventTopic(t){if(typeof t==="string"){t=this.getEvent(t)}return ye(this.constructor,"getEventTopic")(t)}_decodeParams(t,e){return this._abiCoder.decode(t,e)}_encodeParams(t,e){return this._abiCoder.encode(t,e)}encodeDeploy(t){return this._encodeParams(this.deploy.inputs,t||[])}decodeErrorResult(t,e){if(typeof t==="string"){t=this.getError(t)}const r=Bt(e);if(Tt(r.slice(0,4))!==this.getSighash(t)){ts.throwArgumentError(`data signature does not match error ${t.name}.`,"data",Tt(r))}return this._decodeParams(t.inputs,r.slice(4))}encodeErrorResult(t,e){if(typeof t==="string"){t=this.getError(t)}return Tt(St([this.getSighash(t),this._encodeParams(t.inputs,e||[])]))}decodeFunctionData(t,e){if(typeof t==="string"){t=this.getFunction(t)}const r=Bt(e);if(Tt(r.slice(0,4))!==this.getSighash(t)){ts.throwArgumentError(`data signature does not match function ${t.name}.`,"data",Tt(r))}return this._decodeParams(t.inputs,r.slice(4))}encodeFunctionData(t,e){if(typeof t==="string"){t=this.getFunction(t)}return Tt(St([this.getSighash(t),this._encodeParams(t.inputs,e||[])]))}decodeFunctionResult(t,e){if(typeof t==="string"){t=this.getFunction(t)}let r=Bt(e);let n=null;let i="";let s=null;let a=null;let o=null;switch(r.length%this._abiCoder._getWordSize()){case 0:try{return this._abiCoder.decode(t.outputs,r)}catch(t){}break;case 4:{const t=Tt(r.slice(0,4));const e=ss[t];if(e){s=this._abiCoder.decode(e.inputs,r.slice(4));a=e.name;o=e.signature;if(e.reason){n=s[0]}if(a==="Error"){i=`; VM Exception while processing transaction: reverted with reason string ${JSON.stringify(s[0])}`}else if(a==="Panic"){i=`; VM Exception while processing transaction: reverted with panic code ${s[0]}`}}else{try{const e=this.getError(t);s=this._abiCoder.decode(e.inputs,r.slice(4));a=e.name;o=e.format()}catch(t){}}break}}return ts.throwError("call revert exception"+i,pt.errors.CALL_EXCEPTION,{method:t.format(),data:Tt(e),errorArgs:s,errorName:a,errorSignature:o,reason:n})}encodeFunctionResult(t,e){if(typeof t==="string"){t=this.getFunction(t)}return Tt(this._abiCoder.encode(t.outputs,e||[]))}encodeFilterTopics(t,e){if(typeof t==="string"){t=this.getEvent(t)}if(e.length>t.inputs.length){ts.throwError("too many arguments for "+t.format(),pt.errors.UNEXPECTED_ARGUMENT,{argument:"values",value:e})}let r=[];if(!t.anonymous){r.push(this.getEventTopic(t))}const n=(t,e)=>{if(t.type==="string"){return Jn(e)}else if(t.type==="bytes"){return ar(Tt(e))}if(t.type==="bool"&&typeof e==="boolean"){e=e?"0x01":"0x00"}if(t.type.match(/^u?int/)){e=Vt.from(e).toHexString()}if(t.type==="address"){this._abiCoder.encode(["address"],[e])}return Rt(Tt(e),32)};e.forEach(((e,i)=>{let s=t.inputs[i];if(!s.indexed){if(e!=null){ts.throwArgumentError("cannot filter non-indexed parameters; must be null","contract."+s.name,e)}return}if(e==null){r.push(null)}else if(s.baseType==="array"||s.baseType==="tuple"){ts.throwArgumentError("filtering with tuples or arrays not supported","contract."+s.name,e)}else if(Array.isArray(e)){r.push(e.map((t=>n(s,t))))}else{r.push(n(s,e))}}));while(r.length&&r[r.length-1]===null){r.pop()}return r}encodeEventLog(t,e){if(typeof t==="string"){t=this.getEvent(t)}const r=[];const n=[];const i=[];if(!t.anonymous){r.push(this.getEventTopic(t))}if(e.length!==t.inputs.length){ts.throwArgumentError("event arguments/values mismatch","values",e)}t.inputs.forEach(((t,s)=>{const a=e[s];if(t.indexed){if(t.type==="string"){r.push(Jn(a))}else if(t.type==="bytes"){r.push(ar(a))}else if(t.baseType==="tuple"||t.baseType==="array"){throw new Error("not implemented")}else{r.push(this._abiCoder.encode([t.type],[a]))}}else{n.push(t);i.push(a)}}));return{data:this._abiCoder.encode(n,i),topics:r}}decodeEventLog(t,e,r){if(typeof t==="string"){t=this.getEvent(t)}if(r!=null&&!t.anonymous){let e=this.getEventTopic(t);if(!Pt(r[0],32)||r[0].toLowerCase()!==e){ts.throwError("fragment/topic mismatch",pt.errors.INVALID_ARGUMENT,{argument:"topics[0]",expected:e,value:r[0]})}r=r.slice(1)}let n=[];let i=[];let s=[];t.inputs.forEach(((t,e)=>{if(t.indexed){if(t.type==="string"||t.type==="bytes"||t.baseType==="tuple"||t.baseType==="array"){n.push(Fe.fromObject({type:"bytes32",name:t.name}));s.push(true)}else{n.push(t);s.push(false)}}else{i.push(t);s.push(false)}}));let a=r!=null?this._abiCoder.decode(n,St(r)):null;let o=this._abiCoder.decode(i,e,true);let f=[];let c=0,u=0;t.inputs.forEach(((t,e)=>{if(t.indexed){if(a==null){f[e]=new is({_isIndexed:true,hash:null})}else if(s[e]){f[e]=new is({_isIndexed:true,hash:a[u++]})}else{try{f[e]=a[u++]}catch(t){f[e]=t}}}else{try{f[e]=o[c++]}catch(t){f[e]=t}}if(t.name&&f[t.name]==null){const r=f[e];if(r instanceof Error){Object.defineProperty(f,t.name,{enumerable:true,get:()=>{throw as(`property ${JSON.stringify(t.name)}`,r)}})}else{f[t.name]=r}}}));for(let t=0;t<f.length;t++){const e=f[t];if(e instanceof Error){Object.defineProperty(f,t,{enumerable:true,get:()=>{throw as(`index ${t}`,e)}})}}return Object.freeze(f)}parseTransaction(t){let e=this.getFunction(t.data.substring(0,10).toLowerCase());if(!e){return null}return new rs({args:this._abiCoder.decode(e.inputs,"0x"+t.data.substring(10)),functionFragment:e,name:e.name,signature:e.format(),sighash:this.getSighash(e),value:Vt.from(t.value||"0")})}parseLog(t){let e=this.getEvent(t.topics[0]);if(!e||e.anonymous){return null}return new es({eventFragment:e,name:e.name,signature:e.format(),topic:this.getEventTopic(e),args:this.decodeEventLog(e,t.data,t.topics)})}parseError(t){const e=Tt(t);let r=this.getError(e.substring(0,10).toLowerCase());if(!r){return null}return new ns({args:this._abiCoder.decode(r.inputs,"0x"+e.substring(10)),errorFragment:r,name:r.name,signature:r.format(),sighash:this.getSighash(r)})}static isInterface(t){return!!(t&&t._isInterface)}}const fs=Object.freeze({__proto__:null,ConstructorFragment:ze,ErrorFragment:Ve,EventFragment:He,Fragment:Qe,FunctionFragment:We,ParamType:Fe,FormatTypes:je,AbiCoder:Gn,defaultAbiCoder:Kn,Interface:os,Indexed:is,checkResultErrors:er,LogDescription:es,TransactionDescription:rs});const cs="abstract-provider/5.7.0";var us=undefined&&undefined.__awaiter||function(t,e,r,n){function i(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,s){function a(t){try{f(n.next(t))}catch(t){s(t)}}function o(t){try{f(n["throw"](t))}catch(t){s(t)}}function f(t){t.done?r(t.value):i(t.value).then(a,o)}f((n=n.apply(t,e||[])).next())}))};const hs=new pt(cs);class ls extends Se{static isForkEvent(t){return!!(t&&t._isForkEvent)}}class ds{constructor(){hs.checkAbstract(new.target,ds);ge(this,"_isProvider",true)}getFeeData(){return us(this,void 0,void 0,(function*(){const{block:t,gasPrice:e}=yield we({block:this.getBlock("latest"),gasPrice:this.getGasPrice().catch((t=>null))});let r=null,n=null,i=null;if(t&&t.baseFeePerGas){r=t.baseFeePerGas;i=Vt.from("1500000000");n=t.baseFeePerGas.mul(2).add(i)}return{lastBaseFeePerGas:r,maxFeePerGas:n,maxPriorityFeePerGas:i,gasPrice:e}}))}addListener(t,e){return this.on(t,e)}removeListener(t,e){return this.off(t,e)}static isProvider(t){return!!(t&&t._isProvider)}}const vs="abstract-signer/5.7.0";var bs=undefined&&undefined.__awaiter||function(t,e,r,n){function i(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,s){function a(t){try{f(n.next(t))}catch(t){s(t)}}function o(t){try{f(n["throw"](t))}catch(t){s(t)}}function f(t){t.done?r(t.value):i(t.value).then(a,o)}f((n=n.apply(t,e||[])).next())}))};const ps=new pt(vs);const gs=["accessList","ccipReadEnabled","chainId","customData","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"];const ys=[pt.errors.INSUFFICIENT_FUNDS,pt.errors.NONCE_EXPIRED,pt.errors.REPLACEMENT_UNDERPRICED];class ws{constructor(){ps.checkAbstract(new.target,ws);ge(this,"_isSigner",true)}getBalance(t){return bs(this,void 0,void 0,(function*(){this._checkProvider("getBalance");return yield this.provider.getBalance(this.getAddress(),t)}))}getTransactionCount(t){return bs(this,void 0,void 0,(function*(){this._checkProvider("getTransactionCount");return yield this.provider.getTransactionCount(this.getAddress(),t)}))}estimateGas(t){return bs(this,void 0,void 0,(function*(){this._checkProvider("estimateGas");const e=yield we(this.checkTransaction(t));return yield this.provider.estimateGas(e)}))}call(t,e){return bs(this,void 0,void 0,(function*(){this._checkProvider("call");const r=yield we(this.checkTransaction(t));return yield this.provider.call(r,e)}))}sendTransaction(t){return bs(this,void 0,void 0,(function*(){this._checkProvider("sendTransaction");const e=yield this.populateTransaction(t);const r=yield this.signTransaction(e);return yield this.provider.sendTransaction(r)}))}getChainId(){return bs(this,void 0,void 0,(function*(){this._checkProvider("getChainId");const t=yield this.provider.getNetwork();return t.chainId}))}getGasPrice(){return bs(this,void 0,void 0,(function*(){this._checkProvider("getGasPrice");return yield this.provider.getGasPrice()}))}getFeeData(){return bs(this,void 0,void 0,(function*(){this._checkProvider("getFeeData");return yield this.provider.getFeeData()}))}resolveName(t){return bs(this,void 0,void 0,(function*(){this._checkProvider("resolveName");return yield this.provider.resolveName(t)}))}checkTransaction(t){for(const e in t){if(gs.indexOf(e)===-1){ps.throwArgumentError("invalid transaction key: "+e,"transaction",t)}}const e=Ae(t);if(e.from==null){e.from=this.getAddress()}else{e.from=Promise.all([Promise.resolve(e.from),this.getAddress()]).then((e=>{if(e[0].toLowerCase()!==e[1].toLowerCase()){ps.throwArgumentError("from address mismatch","transaction",t)}return e[0]}))}return e}populateTransaction(t){return bs(this,void 0,void 0,(function*(){const e=yield we(this.checkTransaction(t));if(e.to!=null){e.to=Promise.resolve(e.to).then((t=>bs(this,void 0,void 0,(function*(){if(t==null){return null}const e=yield this.resolveName(t);if(e==null){ps.throwArgumentError("provided ENS name resolves to null","tx.to",t)}return e}))));e.to.catch((t=>{}))}const r=e.maxFeePerGas!=null||e.maxPriorityFeePerGas!=null;if(e.gasPrice!=null&&(e.type===2||r)){ps.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",t)}else if((e.type===0||e.type===1)&&r){ps.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",t)}if((e.type===2||e.type==null)&&(e.maxFeePerGas!=null&&e.maxPriorityFeePerGas!=null)){e.type=2}else if(e.type===0||e.type===1){if(e.gasPrice==null){e.gasPrice=this.getGasPrice()}}else{const t=yield this.getFeeData();if(e.type==null){if(t.maxFeePerGas!=null&&t.maxPriorityFeePerGas!=null){e.type=2;if(e.gasPrice!=null){const t=e.gasPrice;delete e.gasPrice;e.maxFeePerGas=t;e.maxPriorityFeePerGas=t}else{if(e.maxFeePerGas==null){e.maxFeePerGas=t.maxFeePerGas}if(e.maxPriorityFeePerGas==null){e.maxPriorityFeePerGas=t.maxPriorityFeePerGas}}}else if(t.gasPrice!=null){if(r){ps.throwError("network does not support EIP-1559",pt.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"})}if(e.gasPrice==null){e.gasPrice=t.gasPrice}e.type=0}else{ps.throwError("failed to get consistent fee data",pt.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"})}}else if(e.type===2){if(e.maxFeePerGas==null){e.maxFeePerGas=t.maxFeePerGas}if(e.maxPriorityFeePerGas==null){e.maxPriorityFeePerGas=t.maxPriorityFeePerGas}}}if(e.nonce==null){e.nonce=this.getTransactionCount("pending")}if(e.gasLimit==null){e.gasLimit=this.estimateGas(e).catch((t=>{if(ys.indexOf(t.code)>=0){throw t}return ps.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",pt.errors.UNPREDICTABLE_GAS_LIMIT,{error:t,tx:e})}))}if(e.chainId==null){e.chainId=this.getChainId()}else{e.chainId=Promise.all([Promise.resolve(e.chainId),this.getChainId()]).then((e=>{if(e[1]!==0&&e[0]!==e[1]){ps.throwArgumentError("chainId address mismatch","transaction",t)}return e[0]}))}return yield we(e)}))}_checkProvider(t){if(!this.provider){ps.throwError("missing provider",pt.errors.UNSUPPORTED_OPERATION,{operation:t||"_checkProvider"})}}static isSigner(t){return!!(t&&t._isSigner)}}class ms extends ws{constructor(t,e){super();ge(this,"address",t);ge(this,"provider",e||null)}getAddress(){return Promise.resolve(this.address)}_fail(t,e){return Promise.resolve().then((()=>{ps.throwError(t,pt.errors.UNSUPPORTED_OPERATION,{operation:e})}))}signMessage(t){return this._fail("VoidSigner cannot sign messages","signMessage")}signTransaction(t){return this._fail("VoidSigner cannot sign transactions","signTransaction")}_signTypedData(t,e,r){return this._fail("VoidSigner cannot sign typed data","signTypedData")}connect(t){return new ms(this.address,t)}}var As=Es;function Es(t,e){if(!t)throw new Error(e||"Assertion failed")}Es.equal=function t(e,r,n){if(e!=r)throw new Error(n||"Assertion failed: "+e+" != "+r)};var ks=t((function(t){if(typeof Object.create==="function"){t.exports=function t(e,r){if(r){e.super_=r;e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}})}}}else{t.exports=function t(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype;e.prototype=new n;e.prototype.constructor=e}}}}));var Ms=ks;function Bs(t,e){if((t.charCodeAt(e)&64512)!==55296){return false}if(e<0||e+1>=t.length){return false}return(t.charCodeAt(e+1)&64512)===56320}function Ss(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if(typeof t==="string"){if(!e){var n=0;for(var i=0;i<t.length;i++){var s=t.charCodeAt(i);if(s<128){r[n++]=s}else if(s<2048){r[n++]=s>>6|192;r[n++]=s&63|128}else if(Bs(t,i)){s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023);r[n++]=s>>18|240;r[n++]=s>>12&63|128;r[n++]=s>>6&63|128;r[n++]=s&63|128}else{r[n++]=s>>12|224;r[n++]=s>>6&63|128;r[n++]=s&63|128}}}else if(e==="hex"){t=t.replace(/[^a-z0-9]+/gi,"");if(t.length%2!==0)t="0"+t;for(i=0;i<t.length;i+=2)r.push(parseInt(t[i]+t[i+1],16))}}else{for(i=0;i<t.length;i++)r[i]=t[i]|0}return r}var Cs=Ss;function xs(t){var e="";for(var r=0;r<t.length;r++)e+=Ns(t[r].toString(16));return e}var Ps=xs;function Is(t){var e=t>>>24|t>>>8&65280|t<<8&16711680|(t&255)<<24;return e>>>0}var Ts=Is;function Os(t,e){var r="";for(var n=0;n<t.length;n++){var i=t[n];if(e==="little")i=Is(i);r+=js(i.toString(16))}return r}var Ds=Os;function Ns(t){if(t.length===1)return"0"+t;else return t}var Us=Ns;function js(t){if(t.length===7)return"0"+t;else if(t.length===6)return"00"+t;else if(t.length===5)return"000"+t;else if(t.length===4)return"0000"+t;else if(t.length===3)return"00000"+t;else if(t.length===2)return"000000"+t;else if(t.length===1)return"0000000"+t;else return t}var Rs=js;function Fs(t,e,r,n){var i=r-e;As(i%4===0);var s=new Array(i/4);for(var a=0,o=e;a<s.length;a++,o+=4){var f;if(n==="big")f=t[o]<<24|t[o+1]<<16|t[o+2]<<8|t[o+3];else f=t[o+3]<<24|t[o+2]<<16|t[o+1]<<8|t[o];s[a]=f>>>0}return s}var Ls=Fs;function Qs(t,e){var r=new Array(t.length*4);for(var n=0,i=0;n<t.length;n++,i+=4){var s=t[n];if(e==="big"){r[i]=s>>>24;r[i+1]=s>>>16&255;r[i+2]=s>>>8&255;r[i+3]=s&255}else{r[i+3]=s>>>24;r[i+2]=s>>>16&255;r[i+1]=s>>>8&255;r[i]=s&255}}return r}var Hs=Qs;function Gs(t,e){return t>>>e|t<<32-e}var Ks=Gs;function Js(t,e){return t<<e|t>>>32-e}var zs=Js;function Ws(t,e){return t+e>>>0}var qs=Ws;function Vs(t,e,r){return t+e+r>>>0}var Ys=Vs;function _s(t,e,r,n){return t+e+r+n>>>0}var Zs=_s;function Xs(t,e,r,n,i){return t+e+r+n+i>>>0}var $s=Xs;function ta(t,e,r,n){var i=t[e];var s=t[e+1];var a=n+s>>>0;var o=(a<n?1:0)+r+i;t[e]=o>>>0;t[e+1]=a}var ea=ta;function ra(t,e,r,n){var i=e+n>>>0;var s=(i<e?1:0)+t+r;return s>>>0}var na=ra;function ia(t,e,r,n){var i=e+n;return i>>>0}var sa=ia;function aa(t,e,r,n,i,s,a,o){var f=0;var c=e;c=c+n>>>0;f+=c<e?1:0;c=c+s>>>0;f+=c<s?1:0;c=c+o>>>0;f+=c<o?1:0;var u=t+r+i+a+f;return u>>>0}var oa=aa;function fa(t,e,r,n,i,s,a,o){var f=e+n+s+o;return f>>>0}var ca=fa;function ua(t,e,r,n,i,s,a,o,f,c){var u=0;var h=e;h=h+n>>>0;u+=h<e?1:0;h=h+s>>>0;u+=h<s?1:0;h=h+o>>>0;u+=h<o?1:0;h=h+c>>>0;u+=h<c?1:0;var l=t+r+i+a+f+u;return l>>>0}var ha=ua;function la(t,e,r,n,i,s,a,o,f,c){var u=e+n+s+o+c;return u>>>0}var da=la;function va(t,e,r){var n=e<<32-r|t>>>r;return n>>>0}var ba=va;function pa(t,e,r){var n=t<<32-r|e>>>r;return n>>>0}var ga=pa;function ya(t,e,r){return t>>>r}var wa=ya;function ma(t,e,r){var n=t<<32-r|e>>>r;return n>>>0}var Aa=ma;var Ea={inherits:Ms,toArray:Cs,toHex:Ps,htonl:Ts,toHex32:Ds,zero2:Us,zero8:Rs,join32:Ls,split32:Hs,rotr32:Ks,rotl32:zs,sum32:qs,sum32_3:Ys,sum32_4:Zs,sum32_5:$s,sum64:ea,sum64_hi:na,sum64_lo:sa,sum64_4_hi:oa,sum64_4_lo:ca,sum64_5_hi:ha,sum64_5_lo:da,rotr64_hi:ba,rotr64_lo:ga,shr64_hi:wa,shr64_lo:Aa};function ka(){this.pending=null;this.pendingTotal=0;this.blockSize=this.constructor.blockSize;this.outSize=this.constructor.outSize;this.hmacStrength=this.constructor.hmacStrength;this.padLength=this.constructor.padLength/8;this.endian="big";this._delta8=this.blockSize/8;this._delta32=this.blockSize/32}var Ma=ka;ka.prototype.update=function t(e,r){e=Ea.toArray(e,r);if(!this.pending)this.pending=e;else this.pending=this.pending.concat(e);this.pendingTotal+=e.length;if(this.pending.length>=this._delta8){e=this.pending;var n=e.length%this._delta8;this.pending=e.slice(e.length-n,e.length);if(this.pending.length===0)this.pending=null;e=Ea.join32(e,0,e.length-n,this.endian);for(var i=0;i<e.length;i+=this._delta32)this._update(e,i,i+this._delta32)}return this};ka.prototype.digest=function t(e){this.update(this._pad());As(this.pending===null);return this._digest(e)};ka.prototype._pad=function t(){var e=this.pendingTotal;var r=this._delta8;var n=r-(e+this.padLength)%r;var i=new Array(n+this.padLength);i[0]=128;for(var s=1;s<n;s++)i[s]=0;e<<=3;if(this.endian==="big"){for(var a=8;a<this.padLength;a++)i[s++]=0;i[s++]=0;i[s++]=0;i[s++]=0;i[s++]=0;i[s++]=e>>>24&255;i[s++]=e>>>16&255;i[s++]=e>>>8&255;i[s++]=e&255}else{i[s++]=e&255;i[s++]=e>>>8&255;i[s++]=e>>>16&255;i[s++]=e>>>24&255;i[s++]=0;i[s++]=0;i[s++]=0;i[s++]=0;for(a=8;a<this.padLength;a++)i[s++]=0}return i};var Ba={BlockHash:Ma};var Sa=Ea.rotr32;function Ca(t,e,r,n){if(t===0)return Pa(e,r,n);if(t===1||t===3)return Da(e,r,n);if(t===2)return Ta(e,r,n)}var xa=Ca;function Pa(t,e,r){return t&e^~t&r}var Ia=Pa;function Ta(t,e,r){return t&e^t&r^e&r}var Oa=Ta;function Da(t,e,r){return t^e^r}var Na=Da;function Ua(t){return Sa(t,2)^Sa(t,13)^Sa(t,22)}var ja=Ua;function Ra(t){return Sa(t,6)^Sa(t,11)^Sa(t,25)}var Fa=Ra;function La(t){return Sa(t,7)^Sa(t,18)^t>>>3}var Qa=La;function Ha(t){return Sa(t,17)^Sa(t,19)^t>>>10}var Ga=Ha;var Ka={ft_1:xa,ch32:Ia,maj32:Oa,p32:Na,s0_256:ja,s1_256:Fa,g0_256:Qa,g1_256:Ga};var Ja=Ea.rotl32;var za=Ea.sum32;var Wa=Ea.sum32_5;var qa=Ka.ft_1;var Va=Ba.BlockHash;var Ya=[1518500249,1859775393,2400959708,3395469782];function _a(){if(!(this instanceof _a))return new _a;Va.call(this);this.h=[1732584193,4023233417,2562383102,271733878,3285377520];this.W=new Array(80)}Ea.inherits(_a,Va);var Za=_a;_a.blockSize=512;_a.outSize=160;_a.hmacStrength=80;_a.padLength=64;_a.prototype._update=function t(e,r){var n=this.W;for(var i=0;i<16;i++)n[i]=e[r+i];for(;i<n.length;i++)n[i]=Ja(n[i-3]^n[i-8]^n[i-14]^n[i-16],1);var s=this.h[0];var a=this.h[1];var o=this.h[2];var f=this.h[3];var c=this.h[4];for(i=0;i<n.length;i++){var u=~~(i/20);var h=Wa(Ja(s,5),qa(u,a,o,f),c,n[i],Ya[u]);c=f;f=o;o=Ja(a,30);a=s;s=h}this.h[0]=za(this.h[0],s);this.h[1]=za(this.h[1],a);this.h[2]=za(this.h[2],o);this.h[3]=za(this.h[3],f);this.h[4]=za(this.h[4],c)};_a.prototype._digest=function t(e){if(e==="hex")return Ea.toHex32(this.h,"big");else return Ea.split32(this.h,"big")};var Xa=Ea.sum32;var $a=Ea.sum32_4;var to=Ea.sum32_5;var eo=Ka.ch32;var ro=Ka.maj32;var no=Ka.s0_256;var io=Ka.s1_256;var so=Ka.g0_256;var ao=Ka.g1_256;var oo=Ba.BlockHash;var fo=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function co(){if(!(this instanceof co))return new co;oo.call(this);this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];this.k=fo;this.W=new Array(64)}Ea.inherits(co,oo);var uo=co;co.blockSize=512;co.outSize=256;co.hmacStrength=192;co.padLength=64;co.prototype._update=function t(e,r){var n=this.W;for(var i=0;i<16;i++)n[i]=e[r+i];for(;i<n.length;i++)n[i]=$a(ao(n[i-2]),n[i-7],so(n[i-15]),n[i-16]);var s=this.h[0];var a=this.h[1];var o=this.h[2];var f=this.h[3];var c=this.h[4];var u=this.h[5];var h=this.h[6];var l=this.h[7];As(this.k.length===n.length);for(i=0;i<n.length;i++){var d=to(l,io(c),eo(c,u,h),this.k[i],n[i]);var v=Xa(no(s),ro(s,a,o));l=h;h=u;u=c;c=Xa(f,d);f=o;o=a;a=s;s=Xa(d,v)}this.h[0]=Xa(this.h[0],s);this.h[1]=Xa(this.h[1],a);this.h[2]=Xa(this.h[2],o);this.h[3]=Xa(this.h[3],f);this.h[4]=Xa(this.h[4],c);this.h[5]=Xa(this.h[5],u);this.h[6]=Xa(this.h[6],h);this.h[7]=Xa(this.h[7],l)};co.prototype._digest=function t(e){if(e==="hex")return Ea.toHex32(this.h,"big");else return Ea.split32(this.h,"big")};function ho(){if(!(this instanceof ho))return new ho;uo.call(this);this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}Ea.inherits(ho,uo);var lo=ho;ho.blockSize=512;ho.outSize=224;ho.hmacStrength=192;ho.padLength=64;ho.prototype._digest=function t(e){if(e==="hex")return Ea.toHex32(this.h.slice(0,7),"big");else return Ea.split32(this.h.slice(0,7),"big")};var vo=Ea.rotr64_hi;var bo=Ea.rotr64_lo;var po=Ea.shr64_hi;var go=Ea.shr64_lo;var yo=Ea.sum64;var wo=Ea.sum64_hi;var mo=Ea.sum64_lo;var Ao=Ea.sum64_4_hi;var Eo=Ea.sum64_4_lo;var ko=Ea.sum64_5_hi;var Mo=Ea.sum64_5_lo;var Bo=Ba.BlockHash;var So=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Co(){if(!(this instanceof Co))return new Co;Bo.call(this);this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209];this.k=So;this.W=new Array(160)}Ea.inherits(Co,Bo);var xo=Co;Co.blockSize=1024;Co.outSize=512;Co.hmacStrength=192;Co.padLength=128;Co.prototype._prepareBlock=function t(e,r){var n=this.W;for(var i=0;i<32;i++)n[i]=e[r+i];for(;i<n.length;i+=2){var s=Lo(n[i-4],n[i-3]);var a=Qo(n[i-4],n[i-3]);var o=n[i-14];var f=n[i-13];var c=Ro(n[i-30],n[i-29]);var u=Fo(n[i-30],n[i-29]);var h=n[i-32];var l=n[i-31];n[i]=Ao(s,a,o,f,c,u,h,l);n[i+1]=Eo(s,a,o,f,c,u,h,l)}};Co.prototype._update=function t(e,r){this._prepareBlock(e,r);var n=this.W;var i=this.h[0];var s=this.h[1];var a=this.h[2];var o=this.h[3];var f=this.h[4];var c=this.h[5];var u=this.h[6];var h=this.h[7];var l=this.h[8];var d=this.h[9];var v=this.h[10];var b=this.h[11];var p=this.h[12];var g=this.h[13];var y=this.h[14];var w=this.h[15];As(this.k.length===n.length);for(var m=0;m<n.length;m+=2){var A=y;var E=w;var k=Uo(l,d);var M=jo(l,d);var B=Po(l,d,v,b,p);var S=Io(l,d,v,b,p,g);var C=this.k[m];var x=this.k[m+1];var P=n[m];var I=n[m+1];var T=ko(A,E,k,M,B,S,C,x,P,I);var O=Mo(A,E,k,M,B,S,C,x,P,I);A=Do(i,s);E=No(i,s);k=To(i,s,a,o,f);M=Oo(i,s,a,o,f,c);var D=wo(A,E,k,M);var N=mo(A,E,k,M);y=p;w=g;p=v;g=b;v=l;b=d;l=wo(u,h,T,O);d=mo(h,h,T,O);u=f;h=c;f=a;c=o;a=i;o=s;i=wo(T,O,D,N);s=mo(T,O,D,N)}yo(this.h,0,i,s);yo(this.h,2,a,o);yo(this.h,4,f,c);yo(this.h,6,u,h);yo(this.h,8,l,d);yo(this.h,10,v,b);yo(this.h,12,p,g);yo(this.h,14,y,w)};Co.prototype._digest=function t(e){if(e==="hex")return Ea.toHex32(this.h,"big");else return Ea.split32(this.h,"big")};function Po(t,e,r,n,i){var s=t&r^~t&i;if(s<0)s+=4294967296;return s}function Io(t,e,r,n,i,s){var a=e&n^~e&s;if(a<0)a+=4294967296;return a}function To(t,e,r,n,i){var s=t&r^t&i^r&i;if(s<0)s+=4294967296;return s}function Oo(t,e,r,n,i,s){var a=e&n^e&s^n&s;if(a<0)a+=4294967296;return a}function Do(t,e){var r=vo(t,e,28);var n=vo(e,t,2);var i=vo(e,t,7);var s=r^n^i;if(s<0)s+=4294967296;return s}function No(t,e){var r=bo(t,e,28);var n=bo(e,t,2);var i=bo(e,t,7);var s=r^n^i;if(s<0)s+=4294967296;return s}function Uo(t,e){var r=vo(t,e,14);var n=vo(t,e,18);var i=vo(e,t,9);var s=r^n^i;if(s<0)s+=4294967296;return s}function jo(t,e){var r=bo(t,e,14);var n=bo(t,e,18);var i=bo(e,t,9);var s=r^n^i;if(s<0)s+=4294967296;return s}function Ro(t,e){var r=vo(t,e,1);var n=vo(t,e,8);var i=po(t,e,7);var s=r^n^i;if(s<0)s+=4294967296;return s}function Fo(t,e){var r=bo(t,e,1);var n=bo(t,e,8);var i=go(t,e,7);var s=r^n^i;if(s<0)s+=4294967296;return s}function Lo(t,e){var r=vo(t,e,19);var n=vo(e,t,29);var i=po(t,e,6);var s=r^n^i;if(s<0)s+=4294967296;return s}function Qo(t,e){var r=bo(t,e,19);var n=bo(e,t,29);var i=go(t,e,6);var s=r^n^i;if(s<0)s+=4294967296;return s}function Ho(){if(!(this instanceof Ho))return new Ho;xo.call(this);this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}Ea.inherits(Ho,xo);var Go=Ho;Ho.blockSize=1024;Ho.outSize=384;Ho.hmacStrength=192;Ho.padLength=128;Ho.prototype._digest=function t(e){if(e==="hex")return Ea.toHex32(this.h.slice(0,12),"big");else return Ea.split32(this.h.slice(0,12),"big")};var Ko=Za;var Jo=lo;var zo=uo;var Wo=Go;var qo=xo;var Vo={sha1:Ko,sha224:Jo,sha256:zo,sha384:Wo,sha512:qo};var Yo=Ea.rotl32;var _o=Ea.sum32;var Zo=Ea.sum32_3;var Xo=Ea.sum32_4;var $o=Ba.BlockHash;function tf(){if(!(this instanceof tf))return new tf;$o.call(this);this.h=[1732584193,4023233417,2562383102,271733878,3285377520];this.endian="little"}Ea.inherits(tf,$o);var ef=tf;tf.blockSize=512;tf.outSize=160;tf.hmacStrength=192;tf.padLength=64;tf.prototype._update=function t(e,r){var n=this.h[0];var i=this.h[1];var s=this.h[2];var a=this.h[3];var o=this.h[4];var f=n;var c=i;var u=s;var h=a;var l=o;for(var d=0;d<80;d++){var v=_o(Yo(Xo(n,rf(d,i,s,a),e[af[d]+r],nf(d)),ff[d]),o);n=o;o=a;a=Yo(s,10);s=i;i=v;v=_o(Yo(Xo(f,rf(79-d,c,u,h),e[of[d]+r],sf(d)),cf[d]),l);f=l;l=h;h=Yo(u,10);u=c;c=v}v=Zo(this.h[1],s,h);this.h[1]=Zo(this.h[2],a,l);this.h[2]=Zo(this.h[3],o,f);this.h[3]=Zo(this.h[4],n,c);this.h[4]=Zo(this.h[0],i,u);this.h[0]=v};tf.prototype._digest=function t(e){if(e==="hex")return Ea.toHex32(this.h,"little");else return Ea.split32(this.h,"little")};function rf(t,e,r,n){if(t<=15)return e^r^n;else if(t<=31)return e&r|~e&n;else if(t<=47)return(e|~r)^n;else if(t<=63)return e&n|r&~n;else return e^(r|~n)}function nf(t){if(t<=15)return 0;else if(t<=31)return 1518500249;else if(t<=47)return 1859775393;else if(t<=63)return 2400959708;else return 2840853838}function sf(t){if(t<=15)return 1352829926;else if(t<=31)return 1548603684;else if(t<=47)return 1836072691;else if(t<=63)return 2053994217;else return 0}var af=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13];var of=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11];var ff=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6];var cf=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];var uf={ripemd160:ef};function hf(t,e,r){if(!(this instanceof hf))return new hf(t,e,r);this.Hash=t;this.blockSize=t.blockSize/8;this.outSize=t.outSize/8;this.inner=null;this.outer=null;this._init(Ea.toArray(e,r))}var lf=hf;hf.prototype._init=function t(e){if(e.length>this.blockSize)e=(new this.Hash).update(e).digest();As(e.length<=this.blockSize);for(var r=e.length;r<this.blockSize;r++)e.push(0);for(r=0;r<e.length;r++)e[r]^=54;this.inner=(new this.Hash).update(e);for(r=0;r<e.length;r++)e[r]^=106;this.outer=(new this.Hash).update(e)};hf.prototype.update=function t(e,r){this.inner.update(e,r);return this};hf.prototype.digest=function t(e){this.outer.update(this.inner.digest());return this.outer.digest(e)};var df=t((function(t,e){var r=e;r.utils=Ea;r.common=Ba;r.sha=Vo;r.ripemd=uf;r.hmac=lf;r.sha1=r.sha.sha1;r.sha256=r.sha.sha256;r.sha224=r.sha.sha224;r.sha384=r.sha.sha384;r.sha512=r.sha.sha512;r.ripemd160=r.ripemd.ripemd160}));function vf(t,e,r){return r={path:e,exports:{},require:function(t,e){return bf()}},t(r,r.exports),r.exports}function bf(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var pf=gf;function gf(t,e){if(!t)throw new Error(e||"Assertion failed")}gf.equal=function t(e,r,n){if(e!=r)throw new Error(n||"Assertion failed: "+e+" != "+r)};var yf=vf((function(t,e){var r=e;function n(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if(typeof t!=="string"){for(var n=0;n<t.length;n++)r[n]=t[n]|0;return r}if(e==="hex"){t=t.replace(/[^a-z0-9]+/gi,"");if(t.length%2!==0)t="0"+t;for(var n=0;n<t.length;n+=2)r.push(parseInt(t[n]+t[n+1],16))}else{for(var n=0;n<t.length;n++){var i=t.charCodeAt(n);var s=i>>8;var a=i&255;if(s)r.push(s,a);else r.push(a)}}return r}r.toArray=n;function i(t){if(t.length===1)return"0"+t;else return t}r.zero2=i;function s(t){var e="";for(var r=0;r<t.length;r++)e+=i(t[r].toString(16));return e}r.toHex=s;r.encode=function t(e,r){if(r==="hex")return s(e);else return e}}));var wf=vf((function(t,e){var r=e;r.assert=pf;r.toArray=yf.toArray;r.zero2=yf.zero2;r.toHex=yf.toHex;r.encode=yf.encode;function n(t,e,r){var n=new Array(Math.max(t.bitLength(),r)+1);n.fill(0);var i=1<<e+1;var s=t.clone();for(var a=0;a<n.length;a++){var o;var f=s.andln(i-1);if(s.isOdd()){if(f>(i>>1)-1)o=(i>>1)-f;else o=f;s.isubn(o)}else{o=0}n[a]=o;s.iushrn(1)}return n}r.getNAF=n;function i(t,e){var r=[[],[]];t=t.clone();e=e.clone();var n=0;var i=0;var s;while(t.cmpn(-n)>0||e.cmpn(-i)>0){var a=t.andln(3)+n&3;var o=e.andln(3)+i&3;if(a===3)a=-1;if(o===3)o=-1;var f;if((a&1)===0){f=0}else{s=t.andln(7)+n&7;if((s===3||s===5)&&o===2)f=-a;else f=a}r[0].push(f);var c;if((o&1)===0){c=0}else{s=e.andln(7)+i&7;if((s===3||s===5)&&a===2)c=-o;else c=o}r[1].push(c);if(2*n===f+1)n=1-n;if(2*i===c+1)i=1-i;t.iushrn(1);e.iushrn(1)}return r}r.getJSF=i;function s(t,e,r){var n="_"+e;t.prototype[e]=function t(){return this[n]!==undefined?this[n]:this[n]=r.call(this)}}r.cachedProperty=s;function a(t){return typeof t==="string"?r.toArray(t,"hex"):t}r.parseBytes=a;function o(t){return new it(t,"hex","le")}r.intFromLE=o}));var mf=wf.getNAF;var Af=wf.getJSF;var Ef=wf.assert;function kf(t,e){this.type=t;this.p=new it(e.p,16);this.red=e.prime?it.red(e.prime):it.mont(this.p);this.zero=new it(0).toRed(this.red);this.one=new it(1).toRed(this.red);this.two=new it(2).toRed(this.red);this.n=e.n&&new it(e.n,16);this.g=e.g&&this.pointFromJSON(e.g,e.gRed);this._wnafT1=new Array(4);this._wnafT2=new Array(4);this._wnafT3=new Array(4);this._wnafT4=new Array(4);this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);if(!r||r.cmpn(100)>0){this.redN=null}else{this._maxwellTrick=true;this.redN=this.n.toRed(this.red)}}var Mf=kf;kf.prototype.point=function t(){throw new Error("Not implemented")};kf.prototype.validate=function t(){throw new Error("Not implemented")};kf.prototype._fixedNafMul=function t(e,r){Ef(e.precomputed);var n=e._getDoubles();var i=mf(r,1,this._bitLength);var s=(1<<n.step+1)-(n.step%2===0?2:1);s/=3;var a=[];var o;var f;for(o=0;o<i.length;o+=n.step){f=0;for(var c=o+n.step-1;c>=o;c--)f=(f<<1)+i[c];a.push(f)}var u=this.jpoint(null,null,null);var h=this.jpoint(null,null,null);for(var l=s;l>0;l--){for(o=0;o<a.length;o++){f=a[o];if(f===l)h=h.mixedAdd(n.points[o]);else if(f===-l)h=h.mixedAdd(n.points[o].neg())}u=u.add(h)}return u.toP()};kf.prototype._wnafMul=function t(e,r){var n=4;var i=e._getNAFPoints(n);n=i.wnd;var s=i.points;var a=mf(r,n,this._bitLength);var o=this.jpoint(null,null,null);for(var f=a.length-1;f>=0;f--){for(var c=0;f>=0&&a[f]===0;f--)c++;if(f>=0)c++;o=o.dblp(c);if(f<0)break;var u=a[f];Ef(u!==0);if(e.type==="affine"){if(u>0)o=o.mixedAdd(s[u-1>>1]);else o=o.mixedAdd(s[-u-1>>1].neg())}else{if(u>0)o=o.add(s[u-1>>1]);else o=o.add(s[-u-1>>1].neg())}}return e.type==="affine"?o.toP():o};kf.prototype._wnafMulAdd=function t(e,r,n,i,s){var a=this._wnafT1;var o=this._wnafT2;var f=this._wnafT3;var c=0;var u;var h;var l;for(u=0;u<i;u++){l=r[u];var d=l._getNAFPoints(e);a[u]=d.wnd;o[u]=d.points}for(u=i-1;u>=1;u-=2){var v=u-1;var b=u;if(a[v]!==1||a[b]!==1){f[v]=mf(n[v],a[v],this._bitLength);f[b]=mf(n[b],a[b],this._bitLength);c=Math.max(f[v].length,c);c=Math.max(f[b].length,c);continue}var p=[r[v],null,null,r[b]];if(r[v].y.cmp(r[b].y)===0){p[1]=r[v].add(r[b]);p[2]=r[v].toJ().mixedAdd(r[b].neg())}else if(r[v].y.cmp(r[b].y.redNeg())===0){p[1]=r[v].toJ().mixedAdd(r[b]);p[2]=r[v].add(r[b].neg())}else{p[1]=r[v].toJ().mixedAdd(r[b]);p[2]=r[v].toJ().mixedAdd(r[b].neg())}var g=[-3,-1,-5,-7,0,7,5,1,3];var y=Af(n[v],n[b]);c=Math.max(y[0].length,c);f[v]=new Array(c);f[b]=new Array(c);for(h=0;h<c;h++){var w=y[0][h]|0;var m=y[1][h]|0;f[v][h]=g[(w+1)*3+(m+1)];f[b][h]=0;o[v]=p}}var A=this.jpoint(null,null,null);var E=this._wnafT4;for(u=c;u>=0;u--){var k=0;while(u>=0){var M=true;for(h=0;h<i;h++){E[h]=f[h][u]|0;if(E[h]!==0)M=false}if(!M)break;k++;u--}if(u>=0)k++;A=A.dblp(k);if(u<0)break;for(h=0;h<i;h++){var B=E[h];if(B===0)continue;else if(B>0)l=o[h][B-1>>1];else if(B<0)l=o[h][-B-1>>1].neg();if(l.type==="affine")A=A.mixedAdd(l);else A=A.add(l)}}for(u=0;u<i;u++)o[u]=null;if(s)return A;else return A.toP()};function Bf(t,e){this.curve=t;this.type=e;this.precomputed=null}kf.BasePoint=Bf;Bf.prototype.eq=function t(){throw new Error("Not implemented")};Bf.prototype.validate=function t(){return this.curve.validate(this)};kf.prototype.decodePoint=function t(e,r){e=wf.toArray(e,r);var n=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*n){if(e[0]===6)Ef(e[e.length-1]%2===0);else if(e[0]===7)Ef(e[e.length-1]%2===1);var i=this.point(e.slice(1,1+n),e.slice(1+n,1+2*n));return i}else if((e[0]===2||e[0]===3)&&e.length-1===n){return this.pointFromX(e.slice(1,1+n),e[0]===3)}throw new Error("Unknown point format")};Bf.prototype.encodeCompressed=function t(e){return this.encode(e,true)};Bf.prototype._encode=function t(e){var r=this.curve.p.byteLength();var n=this.getX().toArray("be",r);if(e)return[this.getY().isEven()?2:3].concat(n);return[4].concat(n,this.getY().toArray("be",r))};Bf.prototype.encode=function t(e,r){return wf.encode(this._encode(r),e)};Bf.prototype.precompute=function t(e){if(this.precomputed)return this;var r={doubles:null,naf:null,beta:null};r.naf=this._getNAFPoints(8);r.doubles=this._getDoubles(4,e);r.beta=this._getBeta();this.precomputed=r;return this};Bf.prototype._hasDoubles=function t(e){if(!this.precomputed)return false;var r=this.precomputed.doubles;if(!r)return false;return r.points.length>=Math.ceil((e.bitLength()+1)/r.step)};Bf.prototype._getDoubles=function t(e,r){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;var n=[this];var i=this;for(var s=0;s<r;s+=e){for(var a=0;a<e;a++)i=i.dbl();n.push(i)}return{step:e,points:n}};Bf.prototype._getNAFPoints=function t(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;var r=[this];var n=(1<<e)-1;var i=n===1?null:this.dbl();for(var s=1;s<n;s++)r[s]=r[s-1].add(i);return{wnd:e,points:r}};Bf.prototype._getBeta=function t(){return null};Bf.prototype.dblp=function t(e){var r=this;for(var n=0;n<e;n++)r=r.dbl();return r};var Sf=vf((function(t){if(typeof Object.create==="function"){t.exports=function t(e,r){if(r){e.super_=r;e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}})}}}else{t.exports=function t(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype;e.prototype=new n;e.prototype.constructor=e}}}}));var Cf=wf.assert;function xf(t){Mf.call(this,"short",t);this.a=new it(t.a,16).toRed(this.red);this.b=new it(t.b,16).toRed(this.red);this.tinv=this.two.redInvm();this.zeroA=this.a.fromRed().cmpn(0)===0;this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0;this.endo=this._getEndomorphism(t);this._endoWnafT1=new Array(4);this._endoWnafT2=new Array(4)}Sf(xf,Mf);var Pf=xf;xf.prototype._getEndomorphism=function t(e){if(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)return;var r;var n;if(e.beta){r=new it(e.beta,16).toRed(this.red)}else{var i=this._getEndoRoots(this.p);r=i[0].cmp(i[1])<0?i[0]:i[1];r=r.toRed(this.red)}if(e.lambda){n=new it(e.lambda,16)}else{var s=this._getEndoRoots(this.n);if(this.g.mul(s[0]).x.cmp(this.g.x.redMul(r))===0){n=s[0]}else{n=s[1];Cf(this.g.mul(n).x.cmp(this.g.x.redMul(r))===0)}}var a;if(e.basis){a=e.basis.map((function(t){return{a:new it(t.a,16),b:new it(t.b,16)}}))}else{a=this._getEndoBasis(n)}return{beta:r,lambda:n,basis:a}};xf.prototype._getEndoRoots=function t(e){var r=e===this.p?this.red:it.mont(e);var n=new it(2).toRed(r).redInvm();var i=n.redNeg();var s=new it(3).toRed(r).redNeg().redSqrt().redMul(n);var a=i.redAdd(s).fromRed();var o=i.redSub(s).fromRed();return[a,o]};xf.prototype._getEndoBasis=function t(e){var r=this.n.ushrn(Math.floor(this.n.bitLength()/2));var n=e;var i=this.n.clone();var s=new it(1);var a=new it(0);var o=new it(0);var f=new it(1);var c;var u;var h;var l;var d;var v;var b;var p=0;var g;var y;while(n.cmpn(0)!==0){var w=i.div(n);g=i.sub(w.mul(n));y=o.sub(w.mul(s));var m=f.sub(w.mul(a));if(!h&&g.cmp(r)<0){c=b.neg();u=s;h=g.neg();l=y}else if(h&&++p===2){break}b=g;i=n;n=g;o=s;s=y;f=a;a=m}d=g.neg();v=y;var A=h.sqr().add(l.sqr());var E=d.sqr().add(v.sqr());if(E.cmp(A)>=0){d=c;v=u}if(h.negative){h=h.neg();l=l.neg()}if(d.negative){d=d.neg();v=v.neg()}return[{a:h,b:l},{a:d,b:v}]};xf.prototype._endoSplit=function t(e){var r=this.endo.basis;var n=r[0];var i=r[1];var s=i.b.mul(e).divRound(this.n);var a=n.b.neg().mul(e).divRound(this.n);var o=s.mul(n.a);var f=a.mul(i.a);var c=s.mul(n.b);var u=a.mul(i.b);var h=e.sub(o).sub(f);var l=c.add(u).neg();return{k1:h,k2:l}};xf.prototype.pointFromX=function t(e,r){e=new it(e,16);if(!e.red)e=e.toRed(this.red);var n=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b);var i=n.redSqrt();if(i.redSqr().redSub(n).cmp(this.zero)!==0)throw new Error("invalid point");var s=i.fromRed().isOdd();if(r&&!s||!r&&s)i=i.redNeg();return this.point(e,i)};xf.prototype.validate=function t(e){if(e.inf)return true;var r=e.x;var n=e.y;var i=this.a.redMul(r);var s=r.redSqr().redMul(r).redIAdd(i).redIAdd(this.b);return n.redSqr().redISub(s).cmpn(0)===0};xf.prototype._endoWnafMulAdd=function t(e,r,n){var i=this._endoWnafT1;var s=this._endoWnafT2;for(var a=0;a<e.length;a++){var o=this._endoSplit(r[a]);var f=e[a];var c=f._getBeta();if(o.k1.negative){o.k1.ineg();f=f.neg(true)}if(o.k2.negative){o.k2.ineg();c=c.neg(true)}i[a*2]=f;i[a*2+1]=c;s[a*2]=o.k1;s[a*2+1]=o.k2}var u=this._wnafMulAdd(1,i,s,a*2,n);for(var h=0;h<a*2;h++){i[h]=null;s[h]=null}return u};function If(t,e,r,n){Mf.BasePoint.call(this,t,"affine");if(e===null&&r===null){this.x=null;this.y=null;this.inf=true}else{this.x=new it(e,16);this.y=new it(r,16);if(n){this.x.forceRed(this.curve.red);this.y.forceRed(this.curve.red)}if(!this.x.red)this.x=this.x.toRed(this.curve.red);if(!this.y.red)this.y=this.y.toRed(this.curve.red);this.inf=false}}Sf(If,Mf.BasePoint);xf.prototype.point=function t(e,r,n){return new If(this,e,r,n)};xf.prototype.pointFromJSON=function t(e,r){return If.fromJSON(this,e,r)};If.prototype._getBeta=function t(){if(!this.curve.endo)return;var e=this.precomputed;if(e&&e.beta)return e.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var n=this.curve;var i=function(t){return n.point(t.x.redMul(n.endo.beta),t.y)};e.beta=r;r.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return r};If.prototype.toJSON=function t(){if(!this.precomputed)return[this.x,this.y];return[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]};If.fromJSON=function t(e,r,n){if(typeof r==="string")r=JSON.parse(r);var i=e.point(r[0],r[1],n);if(!r[2])return i;function s(t){return e.point(t[0],t[1],n)}var a=r[2];i.precomputed={beta:null,doubles:a.doubles&&{step:a.doubles.step,points:[i].concat(a.doubles.points.map(s))},naf:a.naf&&{wnd:a.naf.wnd,points:[i].concat(a.naf.points.map(s))}};return i};If.prototype.inspect=function t(){if(this.isInfinity())return"<EC Point Infinity>";return"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};If.prototype.isInfinity=function t(){return this.inf};If.prototype.add=function t(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var r=this.y.redSub(e.y);if(r.cmpn(0)!==0)r=r.redMul(this.x.redSub(e.x).redInvm());var n=r.redSqr().redISub(this.x).redISub(e.x);var i=r.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,i)};If.prototype.dbl=function t(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var r=this.curve.a;var n=this.x.redSqr();var i=e.redInvm();var s=n.redAdd(n).redIAdd(n).redIAdd(r).redMul(i);var a=s.redSqr().redISub(this.x.redAdd(this.x));var o=s.redMul(this.x.redSub(a)).redISub(this.y);return this.curve.point(a,o)};If.prototype.getX=function t(){return this.x.fromRed()};If.prototype.getY=function t(){return this.y.fromRed()};If.prototype.mul=function t(e){e=new it(e,16);if(this.isInfinity())return this;else if(this._hasDoubles(e))return this.curve._fixedNafMul(this,e);else if(this.curve.endo)return this.curve._endoWnafMulAdd([this],[e]);else return this.curve._wnafMul(this,e)};If.prototype.mulAdd=function t(e,r,n){var i=[this,r];var s=[e,n];if(this.curve.endo)return this.curve._endoWnafMulAdd(i,s);else return this.curve._wnafMulAdd(1,i,s,2)};If.prototype.jmulAdd=function t(e,r,n){var i=[this,r];var s=[e,n];if(this.curve.endo)return this.curve._endoWnafMulAdd(i,s,true);else return this.curve._wnafMulAdd(1,i,s,2,true)};If.prototype.eq=function t(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};If.prototype.neg=function t(e){if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var n=this.precomputed;var i=function(t){return t.neg()};r.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(i)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(i)}}}return r};If.prototype.toJ=function t(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function Tf(t,e,r,n){Mf.BasePoint.call(this,t,"jacobian");if(e===null&&r===null&&n===null){this.x=this.curve.one;this.y=this.curve.one;this.z=new it(0)}else{this.x=new it(e,16);this.y=new it(r,16);this.z=new it(n,16)}if(!this.x.red)this.x=this.x.toRed(this.curve.red);if(!this.y.red)this.y=this.y.toRed(this.curve.red);if(!this.z.red)this.z=this.z.toRed(this.curve.red);this.zOne=this.z===this.curve.one}Sf(Tf,Mf.BasePoint);xf.prototype.jpoint=function t(e,r,n){return new Tf(this,e,r,n)};Tf.prototype.toP=function t(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm();var r=e.redSqr();var n=this.x.redMul(r);var i=this.y.redMul(r).redMul(e);return this.curve.point(n,i)};Tf.prototype.neg=function t(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};Tf.prototype.add=function t(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var r=e.z.redSqr();var n=this.z.redSqr();var i=this.x.redMul(r);var s=e.x.redMul(n);var a=this.y.redMul(r.redMul(e.z));var o=e.y.redMul(n.redMul(this.z));var f=i.redSub(s);var c=a.redSub(o);if(f.cmpn(0)===0){if(c.cmpn(0)!==0)return this.curve.jpoint(null,null,null);else return this.dbl()}var u=f.redSqr();var h=u.redMul(f);var l=i.redMul(u);var d=c.redSqr().redIAdd(h).redISub(l).redISub(l);var v=c.redMul(l.redISub(d)).redISub(a.redMul(h));var b=this.z.redMul(e.z).redMul(f);return this.curve.jpoint(d,v,b)};Tf.prototype.mixedAdd=function t(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var r=this.z.redSqr();var n=this.x;var i=e.x.redMul(r);var s=this.y;var a=e.y.redMul(r).redMul(this.z);var o=n.redSub(i);var f=s.redSub(a);if(o.cmpn(0)===0){if(f.cmpn(0)!==0)return this.curve.jpoint(null,null,null);else return this.dbl()}var c=o.redSqr();var u=c.redMul(o);var h=n.redMul(c);var l=f.redSqr().redIAdd(u).redISub(h).redISub(h);var d=f.redMul(h.redISub(l)).redISub(s.redMul(u));var v=this.z.redMul(o);return this.curve.jpoint(l,d,v)};Tf.prototype.dblp=function t(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var r;if(this.curve.zeroA||this.curve.threeA){var n=this;for(r=0;r<e;r++)n=n.dbl();return n}var i=this.curve.a;var s=this.curve.tinv;var a=this.x;var o=this.y;var f=this.z;var c=f.redSqr().redSqr();var u=o.redAdd(o);for(r=0;r<e;r++){var h=a.redSqr();var l=u.redSqr();var d=l.redSqr();var v=h.redAdd(h).redIAdd(h).redIAdd(i.redMul(c));var b=a.redMul(l);var p=v.redSqr().redISub(b.redAdd(b));var g=b.redISub(p);var y=v.redMul(g);y=y.redIAdd(y).redISub(d);var w=u.redMul(f);if(r+1<e)c=c.redMul(d);a=p;f=w;u=y}return this.curve.jpoint(a,u.redMul(s),f)};Tf.prototype.dbl=function t(){if(this.isInfinity())return this;if(this.curve.zeroA)return this._zeroDbl();else if(this.curve.threeA)return this._threeDbl();else return this._dbl()};Tf.prototype._zeroDbl=function t(){var e;var r;var n;if(this.zOne){var i=this.x.redSqr();var s=this.y.redSqr();var a=s.redSqr();var o=this.x.redAdd(s).redSqr().redISub(i).redISub(a);o=o.redIAdd(o);var f=i.redAdd(i).redIAdd(i);var c=f.redSqr().redISub(o).redISub(o);var u=a.redIAdd(a);u=u.redIAdd(u);u=u.redIAdd(u);e=c;r=f.redMul(o.redISub(c)).redISub(u);n=this.y.redAdd(this.y)}else{var h=this.x.redSqr();var l=this.y.redSqr();var d=l.redSqr();var v=this.x.redAdd(l).redSqr().redISub(h).redISub(d);v=v.redIAdd(v);var b=h.redAdd(h).redIAdd(h);var p=b.redSqr();var g=d.redIAdd(d);g=g.redIAdd(g);g=g.redIAdd(g);e=p.redISub(v).redISub(v);r=b.redMul(v.redISub(e)).redISub(g);n=this.y.redMul(this.z);n=n.redIAdd(n)}return this.curve.jpoint(e,r,n)};Tf.prototype._threeDbl=function t(){var e;var r;var n;if(this.zOne){var i=this.x.redSqr();var s=this.y.redSqr();var a=s.redSqr();var o=this.x.redAdd(s).redSqr().redISub(i).redISub(a);o=o.redIAdd(o);var f=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a);var c=f.redSqr().redISub(o).redISub(o);e=c;var u=a.redIAdd(a);u=u.redIAdd(u);u=u.redIAdd(u);r=f.redMul(o.redISub(c)).redISub(u);n=this.y.redAdd(this.y)}else{var h=this.z.redSqr();var l=this.y.redSqr();var d=this.x.redMul(l);var v=this.x.redSub(h).redMul(this.x.redAdd(h));v=v.redAdd(v).redIAdd(v);var b=d.redIAdd(d);b=b.redIAdd(b);var p=b.redAdd(b);e=v.redSqr().redISub(p);n=this.y.redAdd(this.z).redSqr().redISub(l).redISub(h);var g=l.redSqr();g=g.redIAdd(g);g=g.redIAdd(g);g=g.redIAdd(g);r=v.redMul(b.redISub(e)).redISub(g)}return this.curve.jpoint(e,r,n)};Tf.prototype._dbl=function t(){var e=this.curve.a;var r=this.x;var n=this.y;var i=this.z;var s=i.redSqr().redSqr();var a=r.redSqr();var o=n.redSqr();var f=a.redAdd(a).redIAdd(a).redIAdd(e.redMul(s));var c=r.redAdd(r);c=c.redIAdd(c);var u=c.redMul(o);var h=f.redSqr().redISub(u.redAdd(u));var l=u.redISub(h);var d=o.redSqr();d=d.redIAdd(d);d=d.redIAdd(d);d=d.redIAdd(d);var v=f.redMul(l).redISub(d);var b=n.redAdd(n).redMul(i);return this.curve.jpoint(h,v,b)};Tf.prototype.trpl=function t(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr();var r=this.y.redSqr();var n=this.z.redSqr();var i=r.redSqr();var s=e.redAdd(e).redIAdd(e);var a=s.redSqr();var o=this.x.redAdd(r).redSqr().redISub(e).redISub(i);o=o.redIAdd(o);o=o.redAdd(o).redIAdd(o);o=o.redISub(a);var f=o.redSqr();var c=i.redIAdd(i);c=c.redIAdd(c);c=c.redIAdd(c);c=c.redIAdd(c);var u=s.redIAdd(o).redSqr().redISub(a).redISub(f).redISub(c);var h=r.redMul(u);h=h.redIAdd(h);h=h.redIAdd(h);var l=this.x.redMul(f).redISub(h);l=l.redIAdd(l);l=l.redIAdd(l);var d=this.y.redMul(u.redMul(c.redISub(u)).redISub(o.redMul(f)));d=d.redIAdd(d);d=d.redIAdd(d);d=d.redIAdd(d);var v=this.z.redAdd(o).redSqr().redISub(n).redISub(f);return this.curve.jpoint(l,d,v)};Tf.prototype.mul=function t(e,r){e=new it(e,r);return this.curve._wnafMul(this,e)};Tf.prototype.eq=function t(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return true;var r=this.z.redSqr();var n=e.z.redSqr();if(this.x.redMul(n).redISub(e.x.redMul(r)).cmpn(0)!==0)return false;var i=r.redMul(this.z);var s=n.redMul(e.z);return this.y.redMul(s).redISub(e.y.redMul(i)).cmpn(0)===0};Tf.prototype.eqXToP=function t(e){var r=this.z.redSqr();var n=e.toRed(this.curve.red).redMul(r);if(this.x.cmp(n)===0)return true;var i=e.clone();var s=this.curve.redN.redMul(r);for(;;){i.iadd(this.curve.n);if(i.cmp(this.curve.p)>=0)return false;n.redIAdd(s);if(this.x.cmp(n)===0)return true}};Tf.prototype.inspect=function t(){if(this.isInfinity())return"<EC JPoint Infinity>";return"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};Tf.prototype.isInfinity=function t(){return this.z.cmpn(0)===0};var Of=vf((function(t,e){var r=e;r.base=Mf;r.short=Pf;r.mont=null;r.edwards=null}));var Df=vf((function(t,e){var r=e;var n=wf.assert;function i(t){if(t.type==="short")this.curve=new Of.short(t);else if(t.type==="edwards")this.curve=new Of.edwards(t);else this.curve=new Of.mont(t);this.g=this.curve.g;this.n=this.curve.n;this.hash=t.hash;n(this.g.validate(),"Invalid curve");n(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}r.PresetCurve=i;function s(t,e){Object.defineProperty(r,t,{configurable:true,enumerable:true,get:function(){var n=new i(e);Object.defineProperty(r,t,{configurable:true,enumerable:true,value:n});return n}})}s("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:df.sha256,gRed:false,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]});s("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:df.sha256,gRed:false,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]});s("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:df.sha256,gRed:false,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]});s("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff "+"fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff "+"fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f "+"5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 "+"f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:df.sha384,gRed:false,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 "+"5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 "+"0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]});s("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff "+"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff "+"ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff "+"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff "+"ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b "+"99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd "+"3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff "+"ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 "+"f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:df.sha512,gRed:false,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 "+"053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 "+"a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 "+"579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 "+"3fad0761 353c7086 a272c240 88be9476 9fd16650"]});s("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:df.sha256,gRed:false,g:["9"]});s("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:df.sha256,gRed:false,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var a;try{a=null.crash()}catch(t){a=undefined}s("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:df.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:false,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",a]})}));function Nf(t){if(!(this instanceof Nf))return new Nf(t);this.hash=t.hash;this.predResist=!!t.predResist;this.outLen=this.hash.outSize;this.minEntropy=t.minEntropy||this.hash.hmacStrength;this._reseed=null;this.reseedInterval=null;this.K=null;this.V=null;var e=yf.toArray(t.entropy,t.entropyEnc||"hex");var r=yf.toArray(t.nonce,t.nonceEnc||"hex");var n=yf.toArray(t.pers,t.persEnc||"hex");pf(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits");this._init(e,r,n)}var Uf=Nf;Nf.prototype._init=function t(e,r,n){var i=e.concat(r).concat(n);this.K=new Array(this.outLen/8);this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++){this.K[s]=0;this.V[s]=1}this._update(i);this._reseed=1;this.reseedInterval=281474976710656};Nf.prototype._hmac=function t(){return new df.hmac(this.hash,this.K)};Nf.prototype._update=function t(e){var r=this._hmac().update(this.V).update([0]);if(e)r=r.update(e);this.K=r.digest();this.V=this._hmac().update(this.V).digest();if(!e)return;this.K=this._hmac().update(this.V).update([1]).update(e).digest();this.V=this._hmac().update(this.V).digest()};Nf.prototype.reseed=function t(e,r,n,i){if(typeof r!=="string"){i=n;n=r;r=null}e=yf.toArray(e,r);n=yf.toArray(n,i);pf(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits");this._update(e.concat(n||[]));this._reseed=1};Nf.prototype.generate=function t(e,r,n,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");if(typeof r!=="string"){i=n;n=r;r=null}if(n){n=yf.toArray(n,i||"hex");this._update(n)}var s=[];while(s.length<e){this.V=this._hmac().update(this.V).digest();s=s.concat(this.V)}var a=s.slice(0,e);this._update(n);this._reseed++;return yf.encode(a,r)};var jf=wf.assert;function Rf(t,e){this.ec=t;this.priv=null;this.pub=null;if(e.priv)this._importPrivate(e.priv,e.privEnc);if(e.pub)this._importPublic(e.pub,e.pubEnc)}var Ff=Rf;Rf.fromPublic=function t(e,r,n){if(r instanceof Rf)return r;return new Rf(e,{pub:r,pubEnc:n})};Rf.fromPrivate=function t(e,r,n){if(r instanceof Rf)return r;return new Rf(e,{priv:r,privEnc:n})};Rf.prototype.validate=function t(){var e=this.getPublic();if(e.isInfinity())return{result:false,reason:"Invalid public key"};if(!e.validate())return{result:false,reason:"Public key is not a point"};if(!e.mul(this.ec.curve.n).isInfinity())return{result:false,reason:"Public key * N != O"};return{result:true,reason:null}};Rf.prototype.getPublic=function t(e,r){if(typeof e==="string"){r=e;e=null}if(!this.pub)this.pub=this.ec.g.mul(this.priv);if(!r)return this.pub;return this.pub.encode(r,e)};Rf.prototype.getPrivate=function t(e){if(e==="hex")return this.priv.toString(16,2);else return this.priv};Rf.prototype._importPrivate=function t(e,r){this.priv=new it(e,r||16);this.priv=this.priv.umod(this.ec.curve.n)};Rf.prototype._importPublic=function t(e,r){if(e.x||e.y){if(this.ec.curve.type==="mont"){jf(e.x,"Need x coordinate")}else if(this.ec.curve.type==="short"||this.ec.curve.type==="edwards"){jf(e.x&&e.y,"Need both x and y coordinate")}this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,r)};Rf.prototype.derive=function t(e){if(!e.validate()){jf(e.validate(),"public point not validated")}return e.mul(this.priv).getX()};Rf.prototype.sign=function t(e,r,n){return this.ec.sign(e,this,r,n)};Rf.prototype.verify=function t(e,r){return this.ec.verify(e,r,this)};Rf.prototype.inspect=function t(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var Lf=wf.assert;function Qf(t,e){if(t instanceof Qf)return t;if(this._importDER(t,e))return;Lf(t.r&&t.s,"Signature without r or s");this.r=new it(t.r,16);this.s=new it(t.s,16);if(t.recoveryParam===undefined)this.recoveryParam=null;else this.recoveryParam=t.recoveryParam}var Hf=Qf;function Gf(){this.place=0}function Kf(t,e){var r=t[e.place++];if(!(r&128)){return r}var n=r&15;if(n===0||n>4){return false}var i=0;for(var s=0,a=e.place;s<n;s++,a++){i<<=8;i|=t[a];i>>>=0}if(i<=127){return false}e.place=a;return i}function Jf(t){var e=0;var r=t.length-1;while(!t[e]&&!(t[e+1]&128)&&e<r){e++}if(e===0){return t}return t.slice(e)}Qf.prototype._importDER=function t(e,r){e=wf.toArray(e,r);var n=new Gf;if(e[n.place++]!==48){return false}var i=Kf(e,n);if(i===false){return false}if(i+n.place!==e.length){return false}if(e[n.place++]!==2){return false}var s=Kf(e,n);if(s===false){return false}var a=e.slice(n.place,s+n.place);n.place+=s;if(e[n.place++]!==2){return false}var o=Kf(e,n);if(o===false){return false}if(e.length!==o+n.place){return false}var f=e.slice(n.place,o+n.place);if(a[0]===0){if(a[1]&128){a=a.slice(1)}else{return false}}if(f[0]===0){if(f[1]&128){f=f.slice(1)}else{return false}}this.r=new it(a);this.s=new it(f);this.recoveryParam=null;return true};function zf(t,e){if(e<128){t.push(e);return}var r=1+(Math.log(e)/Math.LN2>>>3);t.push(r|128);while(--r){t.push(e>>>(r<<3)&255)}t.push(e)}Qf.prototype.toDER=function t(e){var r=this.r.toArray();var n=this.s.toArray();if(r[0]&128)r=[0].concat(r);if(n[0]&128)n=[0].concat(n);r=Jf(r);n=Jf(n);while(!n[0]&&!(n[1]&128)){n=n.slice(1)}var i=[2];zf(i,r.length);i=i.concat(r);i.push(2);zf(i,n.length);var s=i.concat(n);var a=[48];zf(a,s.length);a=a.concat(s);return wf.encode(a,e)};var Wf=function(){throw new Error("unsupported")};var qf=wf.assert;function Vf(t){if(!(this instanceof Vf))return new Vf(t);if(typeof t==="string"){qf(Object.prototype.hasOwnProperty.call(Df,t),"Unknown curve "+t);t=Df[t]}if(t instanceof Df.PresetCurve)t={curve:t};this.curve=t.curve.curve;this.n=this.curve.n;this.nh=this.n.ushrn(1);this.g=this.curve.g;this.g=t.curve.g;this.g.precompute(t.curve.n.bitLength()+1);this.hash=t.hash||t.curve.hash}var Yf=Vf;Vf.prototype.keyPair=function t(e){return new Ff(this,e)};Vf.prototype.keyFromPrivate=function t(e,r){return Ff.fromPrivate(this,e,r)};Vf.prototype.keyFromPublic=function t(e,r){return Ff.fromPublic(this,e,r)};Vf.prototype.genKeyPair=function t(e){if(!e)e={};var r=new Uf({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||Wf(),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()});var n=this.n.byteLength();var i=this.n.sub(new it(2));for(;;){var s=new it(r.generate(n));if(s.cmp(i)>0)continue;s.iaddn(1);return this.keyFromPrivate(s)}};Vf.prototype._truncateToN=function t(e,r){var n=e.byteLength()*8-this.n.bitLength();if(n>0)e=e.ushrn(n);if(!r&&e.cmp(this.n)>=0)return e.sub(this.n);else return e};Vf.prototype.sign=function t(e,r,n,i){if(typeof n==="object"){i=n;n=null}if(!i)i={};r=this.keyFromPrivate(r,n);e=this._truncateToN(new it(e,16));var s=this.n.byteLength();var a=r.getPrivate().toArray("be",s);var o=e.toArray("be",s);var f=new Uf({hash:this.hash,entropy:a,nonce:o,pers:i.pers,persEnc:i.persEnc||"utf8"});var c=this.n.sub(new it(1));for(var u=0;;u++){var h=i.k?i.k(u):new it(f.generate(this.n.byteLength()));h=this._truncateToN(h,true);if(h.cmpn(1)<=0||h.cmp(c)>=0)continue;var l=this.g.mul(h);if(l.isInfinity())continue;var d=l.getX();var v=d.umod(this.n);if(v.cmpn(0)===0)continue;var b=h.invm(this.n).mul(v.mul(r.getPrivate()).iadd(e));b=b.umod(this.n);if(b.cmpn(0)===0)continue;var p=(l.getY().isOdd()?1:0)|(d.cmp(v)!==0?2:0);if(i.canonical&&b.cmp(this.nh)>0){b=this.n.sub(b);p^=1}return new Hf({r:v,s:b,recoveryParam:p})}};Vf.prototype.verify=function t(e,r,n,i){e=this._truncateToN(new it(e,16));n=this.keyFromPublic(n,i);r=new Hf(r,"hex");var s=r.r;var a=r.s;if(s.cmpn(1)<0||s.cmp(this.n)>=0)return false;if(a.cmpn(1)<0||a.cmp(this.n)>=0)return false;var o=a.invm(this.n);var f=o.mul(e).umod(this.n);var c=o.mul(s).umod(this.n);var u;if(!this.curve._maxwellTrick){u=this.g.mulAdd(f,n.getPublic(),c);if(u.isInfinity())return false;return u.getX().umod(this.n).cmp(s)===0}u=this.g.jmulAdd(f,n.getPublic(),c);if(u.isInfinity())return false;return u.eqXToP(s)};Vf.prototype.recoverPubKey=function(t,e,r,n){qf((3&r)===r,"The recovery param is more than two bits");e=new Hf(e,n);var i=this.n;var s=new it(t);var a=e.r;var o=e.s;var f=r&1;var c=r>>1;if(a.cmp(this.curve.p.umod(this.curve.n))>=0&&c)throw new Error("Unable to find sencond key candinate");if(c)a=this.curve.pointFromX(a.add(this.curve.n),f);else a=this.curve.pointFromX(a,f);var u=e.r.invm(i);var h=i.sub(s).mul(u).umod(i);var l=o.mul(u).umod(i);return this.g.mulAdd(h,a,l)};Vf.prototype.getKeyRecoveryParam=function(t,e,r,n){e=new Hf(e,n);if(e.recoveryParam!==null)return e.recoveryParam;for(var i=0;i<4;i++){var s;try{s=this.recoverPubKey(t,e,i)}catch(t){continue}if(s.eq(r))return i}throw new Error("Unable to find valid recovery factor")};var _f=vf((function(t,e){var r=e;r.version={version:"6.5.4"}.version;r.utils=wf;r.rand=function(){throw new Error("unsupported")};r.curve=Of;r.curves=Df;r.ec=Yf;r.eddsa=null}));var Zf=_f.ec;const Xf="signing-key/5.7.0";const $f=new pt(Xf);let tc=null;function ec(){if(!tc){tc=new Zf("secp256k1")}return tc}class rc{constructor(t){ge(this,"curve","secp256k1");ge(this,"privateKey",Tt(t));if(Ot(this.privateKey)!==32){$f.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]")}const e=ec().keyFromPrivate(Bt(this.privateKey));ge(this,"publicKey","0x"+e.getPublic(false,"hex"));ge(this,"compressedPublicKey","0x"+e.getPublic(true,"hex"));ge(this,"_isSigningKey",true)}_addPoint(t){const e=ec().keyFromPublic(Bt(this.publicKey));const r=ec().keyFromPublic(Bt(t));return"0x"+e.pub.add(r.pub).encodeCompressed("hex")}signDigest(t){const e=ec().keyFromPrivate(Bt(this.privateKey));const r=Bt(t);if(r.length!==32){$f.throwArgumentError("bad digest length","digest",t)}const n=e.sign(r,{canonical:true});return Ft({recoveryParam:n.recoveryParam,r:Rt("0x"+n.r.toString(16),32),s:Rt("0x"+n.s.toString(16),32)})}computeSharedSecret(t){const e=ec().keyFromPrivate(Bt(this.privateKey));const r=ec().keyFromPublic(Bt(ic(t)));return Rt("0x"+e.derive(r.getPublic()).toString(16),32)}static isSigningKey(t){return!!(t&&t._isSigningKey)}}function nc(t,e){const r=Ft(e);const n={r:Bt(r.r),s:Bt(r.s)};return"0x"+ec().recoverPubKey(Bt(t),n,r.recoveryParam).encode("hex",false)}function ic(t,e){const r=Bt(t);if(r.length===32){const t=new rc(r);if(e){return"0x"+ec().keyFromPrivate(r).getPublic(true,"hex")}return t.publicKey}else if(r.length===33){if(e){return Tt(r)}return"0x"+ec().keyFromPublic(r).getPublic(false,"hex")}else if(r.length===65){if(!e){return Tt(r)}return"0x"+ec().keyFromPublic(r).getPublic(true,"hex")}return $f.throwArgumentError("invalid public or private key","key","[REDACTED]")}const sc=Object.freeze({__proto__:null,SigningKey:rc,recoverPublicKey:nc,computePublicKey:ic});const ac="transactions/5.7.0";const oc=new pt(ac);var fc;(function(t){t[t["legacy"]=0]="legacy";t[t["eip2930"]=1]="eip2930";t[t["eip1559"]=2]="eip1559"})(fc||(fc={}));function cc(t){if(t==="0x"){return null}return Sr(t)}function uc(t){if(t==="0x"){return zr}return Vt.from(t)}const hc=[{name:"nonce",maxLength:32,numeric:true},{name:"gasPrice",maxLength:32,numeric:true},{name:"gasLimit",maxLength:32,numeric:true},{name:"to",length:20},{name:"value",maxLength:32,numeric:true},{name:"data"}];const lc={chainId:true,data:true,gasLimit:true,gasPrice:true,nonce:true,to:true,type:true,value:true};function dc(t){const e=ic(t);return Sr(Dt(ar(Dt(e,1)),12))}function vc(t,e){return dc(nc(Bt(t),e))}function bc(t,e){const r=Ct(Vt.from(t).toHexString());if(r.length>32){oc.throwArgumentError("invalid length for "+e,"transaction:"+e,t)}return r}function pc(t,e){return{address:Sr(t),storageKeys:(e||[]).map(((e,r)=>{if(Ot(e)!==32){oc.throwArgumentError("invalid access list storageKey",`accessList[${t}:${r}]`,e)}return e.toLowerCase()}))}}function gc(t){if(Array.isArray(t)){return t.map(((t,e)=>{if(Array.isArray(t)){if(t.length>2){oc.throwArgumentError("access list expected to be [ address, storageKeys[] ]",`value[${e}]`,t)}return pc(t[0],t[1])}return pc(t.address,t.storageKeys)}))}const e=Object.keys(t).map((e=>{const r=t[e].reduce(((t,e)=>{t[e]=true;return t}),{});return pc(e,Object.keys(r).sort())}));e.sort(((t,e)=>t.address.localeCompare(e.address)));return e}function yc(t){return gc(t).map((t=>[t.address,t.storageKeys]))}function wc(t,e){if(t.gasPrice!=null){const e=Vt.from(t.gasPrice);const r=Vt.from(t.maxFeePerGas||0);if(!e.eq(r)){oc.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice:e,maxFeePerGas:r})}}const r=[bc(t.chainId||0,"chainId"),bc(t.nonce||0,"nonce"),bc(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),bc(t.maxFeePerGas||0,"maxFeePerGas"),bc(t.gasLimit||0,"gasLimit"),t.to!=null?Sr(t.to):"0x",bc(t.value||0,"value"),t.data||"0x",yc(t.accessList||[])];if(e){const t=Ft(e);r.push(bc(t.recoveryParam,"recoveryParam"));r.push(Ct(t.r));r.push(Ct(t.s))}return Nt(["0x02",dr(r)])}function mc(t,e){const r=[bc(t.chainId||0,"chainId"),bc(t.nonce||0,"nonce"),bc(t.gasPrice||0,"gasPrice"),bc(t.gasLimit||0,"gasLimit"),t.to!=null?Sr(t.to):"0x",bc(t.value||0,"value"),t.data||"0x",yc(t.accessList||[])];if(e){const t=Ft(e);r.push(bc(t.recoveryParam,"recoveryParam"));r.push(Ct(t.r));r.push(Ct(t.s))}return Nt(["0x01",dr(r)])}function Ac(t,e){me(t,lc);const r=[];hc.forEach((function(e){let n=t[e.name]||[];const i={};if(e.numeric){i.hexPad="left"}n=Bt(Tt(n,i));if(e.length&&n.length!==e.length&&n.length>0){oc.throwArgumentError("invalid length for "+e.name,"transaction:"+e.name,n)}if(e.maxLength){n=Ct(n);if(n.length>e.maxLength){oc.throwArgumentError("invalid length for "+e.name,"transaction:"+e.name,n)}}r.push(Tt(n))}));let n=0;if(t.chainId!=null){n=t.chainId;if(typeof n!=="number"){oc.throwArgumentError("invalid transaction.chainId","transaction",t)}}else if(e&&!Et(e)&&e.v>28){n=Math.floor((e.v-35)/2)}if(n!==0){r.push(Tt(n));r.push("0x");r.push("0x")}if(!e){return dr(r)}const i=Ft(e);let s=27+i.recoveryParam;if(n!==0){r.pop();r.pop();r.pop();s+=n*2+8;if(i.v>28&&i.v!==s){oc.throwArgumentError("transaction.chainId/signature.v mismatch","signature",e)}}else if(i.v!==s){oc.throwArgumentError("transaction.chainId/signature.v mismatch","signature",e)}r.push(Tt(s));r.push(Ct(Bt(i.r)));r.push(Ct(Bt(i.s)));return dr(r)}function Ec(t,e){if(t.type==null||t.type===0){if(t.accessList!=null){oc.throwArgumentError("untyped transactions do not support accessList; include type: 1","transaction",t)}return Ac(t,e)}switch(t.type){case 1:return mc(t,e);case 2:return wc(t,e)}return oc.throwError(`unsupported transaction type: ${t.type}`,pt.errors.UNSUPPORTED_OPERATION,{operation:"serializeTransaction",transactionType:t.type})}function kc(t,e,r){try{const r=uc(e[0]).toNumber();if(r!==0&&r!==1){throw new Error("bad recid")}t.v=r}catch(t){oc.throwArgumentError("invalid v for transaction type: 1","v",e[0])}t.r=Rt(e[1],32);t.s=Rt(e[2],32);try{const e=ar(r(t));t.from=vc(e,{r:t.r,s:t.s,recoveryParam:t.v})}catch(t){}}function Mc(t){const e=pr(t.slice(1));if(e.length!==9&&e.length!==12){oc.throwArgumentError("invalid component count for transaction type: 2","payload",Tt(t))}const r=uc(e[2]);const n=uc(e[3]);const i={type:2,chainId:uc(e[0]).toNumber(),nonce:uc(e[1]).toNumber(),maxPriorityFeePerGas:r,maxFeePerGas:n,gasPrice:null,gasLimit:uc(e[4]),to:cc(e[5]),value:uc(e[6]),data:e[7],accessList:gc(e[8])};if(e.length===9){return i}i.hash=ar(t);kc(i,e.slice(9),wc);return i}function Bc(t){const e=pr(t.slice(1));if(e.length!==8&&e.length!==11){oc.throwArgumentError("invalid component count for transaction type: 1","payload",Tt(t))}const r={type:1,chainId:uc(e[0]).toNumber(),nonce:uc(e[1]).toNumber(),gasPrice:uc(e[2]),gasLimit:uc(e[3]),to:cc(e[4]),value:uc(e[5]),data:e[6],accessList:gc(e[7])};if(e.length===8){return r}r.hash=ar(t);kc(r,e.slice(8),mc);return r}function Sc(t){const e=pr(t);if(e.length!==9&&e.length!==6){oc.throwArgumentError("invalid raw transaction","rawTransaction",t)}const r={nonce:uc(e[0]).toNumber(),gasPrice:uc(e[1]),gasLimit:uc(e[2]),to:cc(e[3]),value:uc(e[4]),data:e[5],chainId:0};if(e.length===6){return r}try{r.v=Vt.from(e[6]).toNumber()}catch(t){return r}r.r=Rt(e[7],32);r.s=Rt(e[8],32);if(Vt.from(r.r).isZero()&&Vt.from(r.s).isZero()){r.chainId=r.v;r.v=0}else{r.chainId=Math.floor((r.v-35)/2);if(r.chainId<0){r.chainId=0}let n=r.v-27;const i=e.slice(0,6);if(r.chainId!==0){i.push(Tt(r.chainId));i.push("0x");i.push("0x");n-=r.chainId*2+8}const s=ar(dr(i));try{r.from=vc(s,{r:Tt(r.r),s:Tt(r.s),recoveryParam:n})}catch(t){}r.hash=ar(t)}r.type=null;return r}function Cc(t){const e=Bt(t);if(e[0]>127){return Sc(e)}switch(e[0]){case 1:return Bc(e);case 2:return Mc(e)}return oc.throwError(`unsupported transaction type: ${e[0]}`,pt.errors.UNSUPPORTED_OPERATION,{operation:"parseTransaction",transactionType:e[0]})}const xc=Object.freeze({__proto__:null,get TransactionTypes(){return fc},computeAddress:dc,recoverAddress:vc,accessListify:gc,serialize:Ec,parse:Cc});const Pc="contracts/5.7.0";var Ic=undefined&&undefined.__awaiter||function(t,e,r,n){function i(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,s){function a(t){try{f(n.next(t))}catch(t){s(t)}}function o(t){try{f(n["throw"](t))}catch(t){s(t)}}function f(t){t.done?r(t.value):i(t.value).then(a,o)}f((n=n.apply(t,e||[])).next())}))};const Tc=new pt(Pc);const Oc={chainId:true,data:true,from:true,gasLimit:true,gasPrice:true,nonce:true,to:true,value:true,type:true,accessList:true,maxFeePerGas:true,maxPriorityFeePerGas:true,customData:true,ccipReadEnabled:true};function Dc(t,e){return Ic(this,void 0,void 0,(function*(){const r=yield e;if(typeof r!=="string"){Tc.throwArgumentError("invalid address or ENS name","name",r)}try{return Sr(r)}catch(t){}if(!t){Tc.throwError("a provider or signer is needed to resolve ENS names",pt.errors.UNSUPPORTED_OPERATION,{operation:"resolveName"})}const n=yield t.resolveName(r);if(n==null){Tc.throwArgumentError("resolver or addr is not configured for ENS name","name",r)}return n}))}function Nc(t,e,r){return Ic(this,void 0,void 0,(function*(){if(Array.isArray(r)){return yield Promise.all(r.map(((r,n)=>Nc(t,Array.isArray(e)?e[n]:e[r.name],r))))}if(r.type==="address"){return yield Dc(t,e)}if(r.type==="tuple"){return yield Nc(t,e,r.components)}if(r.baseType==="array"){if(!Array.isArray(e)){return Promise.reject(Tc.makeError("invalid value for array",pt.errors.INVALID_ARGUMENT,{argument:"value",value:e}))}return yield Promise.all(e.map((e=>Nc(t,e,r.arrayChildren))))}return e}))}function Uc(t,e,r){return Ic(this,void 0,void 0,(function*(){let n={};if(r.length===e.inputs.length+1&&typeof r[r.length-1]==="object"){n=Ae(r.pop())}Tc.checkArgumentCount(r.length,e.inputs.length,"passed to contract");if(t.signer){if(n.from){n.from=we({override:Dc(t.signer,n.from),signer:t.signer.getAddress()}).then((t=>Ic(this,void 0,void 0,(function*(){if(Sr(t.signer)!==t.override){Tc.throwError("Contract with a Signer cannot override from",pt.errors.UNSUPPORTED_OPERATION,{operation:"overrides.from"})}return t.override}))))}else{n.from=t.signer.getAddress()}}else if(n.from){n.from=Dc(t.provider,n.from)}const i=yield we({args:Nc(t.signer||t.provider,r,e.inputs),address:t.resolvedAddress,overrides:we(n)||{}});const s=t.interface.encodeFunctionData(e,i.args);const a={data:s,to:i.address};const o=i.overrides;if(o.nonce!=null){a.nonce=Vt.from(o.nonce).toNumber()}if(o.gasLimit!=null){a.gasLimit=Vt.from(o.gasLimit)}if(o.gasPrice!=null){a.gasPrice=Vt.from(o.gasPrice)}if(o.maxFeePerGas!=null){a.maxFeePerGas=Vt.from(o.maxFeePerGas)}if(o.maxPriorityFeePerGas!=null){a.maxPriorityFeePerGas=Vt.from(o.maxPriorityFeePerGas)}if(o.from!=null){a.from=o.from}if(o.type!=null){a.type=o.type}if(o.accessList!=null){a.accessList=gc(o.accessList)}if(a.gasLimit==null&&e.gas!=null){let t=21e3;const r=Bt(s);for(let e=0;e<r.length;e++){t+=4;if(r[e]){t+=64}}a.gasLimit=Vt.from(e.gas).add(t)}if(o.value){const t=Vt.from(o.value);if(!t.isZero()&&!e.payable){Tc.throwError("non-payable method cannot override value",pt.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:n.value})}a.value=t}if(o.customData){a.customData=Ae(o.customData)}if(o.ccipReadEnabled){a.ccipReadEnabled=!!o.ccipReadEnabled}delete n.nonce;delete n.gasLimit;delete n.gasPrice;delete n.from;delete n.value;delete n.type;delete n.accessList;delete n.maxFeePerGas;delete n.maxPriorityFeePerGas;delete n.customData;delete n.ccipReadEnabled;const f=Object.keys(n).filter((t=>n[t]!=null));if(f.length){Tc.throwError(`cannot override ${f.map((t=>JSON.stringify(t))).join(",")}`,pt.errors.UNSUPPORTED_OPERATION,{operation:"overrides",overrides:f})}return a}))}function jc(t,e){return function(...r){return Uc(t,e,r)}}function Rc(t,e){const r=t.signer||t.provider;return function(...n){return Ic(this,void 0,void 0,(function*(){if(!r){Tc.throwError("estimate require a provider or signer",pt.errors.UNSUPPORTED_OPERATION,{operation:"estimateGas"})}const i=yield Uc(t,e,n);return yield r.estimateGas(i)}))}}function Fc(t,e){const r=e.wait.bind(e);e.wait=e=>r(e).then((e=>{e.events=e.logs.map((r=>{let n=Be(r);let i=null;try{i=t.interface.parseLog(r)}catch(t){}if(i){n.args=i.args;n.decode=(e,r)=>t.interface.decodeEventLog(i.eventFragment,e,r);n.event=i.name;n.eventSignature=i.signature}n.removeListener=()=>t.provider;n.getBlock=()=>t.provider.getBlock(e.blockHash);n.getTransaction=()=>t.provider.getTransaction(e.transactionHash);n.getTransactionReceipt=()=>Promise.resolve(e);return n}));return e}))}function Lc(t,e,r){const n=t.signer||t.provider;return function(...i){return Ic(this,void 0,void 0,(function*(){let s=undefined;if(i.length===e.inputs.length+1&&typeof i[i.length-1]==="object"){const t=Ae(i.pop());if(t.blockTag!=null){s=yield t.blockTag}delete t.blockTag;i.push(t)}if(t.deployTransaction!=null){yield t._deployed(s)}const a=yield Uc(t,e,i);const o=yield n.call(a,s);try{let n=t.interface.decodeFunctionResult(e,o);if(r&&e.outputs.length===1){n=n[0]}return n}catch(e){if(e.code===pt.errors.CALL_EXCEPTION){e.address=t.address;e.args=i;e.transaction=a}throw e}}))}}function Qc(t,e){return function(...r){return Ic(this,void 0,void 0,(function*(){if(!t.signer){Tc.throwError("sending a transaction requires a signer",pt.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction"})}if(t.deployTransaction!=null){yield t._deployed()}const n=yield Uc(t,e,r);const i=yield t.signer.sendTransaction(n);Fc(t,i);return i}))}}function Hc(t,e,r){if(e.constant){return Lc(t,e,r)}return Qc(t,e)}function Gc(t){if(t.address&&(t.topics==null||t.topics.length===0)){return"*"}return(t.address||"*")+"@"+(t.topics?t.topics.map((t=>{if(Array.isArray(t)){return t.join("|")}return t})).join(":"):"")}class Kc{constructor(t,e){ge(this,"tag",t);ge(this,"filter",e);this._listeners=[]}addListener(t,e){this._listeners.push({listener:t,once:e})}removeListener(t){let e=false;this._listeners=this._listeners.filter((r=>{if(e||r.listener!==t){return true}e=true;return false}))}removeAllListeners(){this._listeners=[]}listeners(){return this._listeners.map((t=>t.listener))}listenerCount(){return this._listeners.length}run(t){const e=this.listenerCount();this._listeners=this._listeners.filter((e=>{const r=t.slice();setTimeout((()=>{e.listener.apply(this,r)}),0);return!e.once}));return e}prepareEvent(t){}getEmit(t){return[t]}}class Jc extends Kc{constructor(){super("error",null)}}class zc extends Kc{constructor(t,e,r,n){const i={address:t};let s=e.getEventTopic(r);if(n){if(s!==n[0]){Tc.throwArgumentError("topic mismatch","topics",n)}i.topics=n.slice()}else{i.topics=[s]}super(Gc(i),i);ge(this,"address",t);ge(this,"interface",e);ge(this,"fragment",r)}prepareEvent(t){super.prepareEvent(t);t.event=this.fragment.name;t.eventSignature=this.fragment.format();t.decode=(t,e)=>this.interface.decodeEventLog(this.fragment,t,e);try{t.args=this.interface.decodeEventLog(this.fragment,t.data,t.topics)}catch(e){t.args=null;t.decodeError=e}}getEmit(t){const e=er(t.args);if(e.length){throw e[0].error}const r=(t.args||[]).slice();r.push(t);return r}}class Wc extends Kc{constructor(t,e){super("*",{address:t});ge(this,"address",t);ge(this,"interface",e)}prepareEvent(t){super.prepareEvent(t);try{const e=this.interface.parseLog(t);t.event=e.name;t.eventSignature=e.signature;t.decode=(t,r)=>this.interface.decodeEventLog(e.eventFragment,t,r);t.args=e.args}catch(t){}}}class qc{constructor(t,e,r){ge(this,"interface",ye(new.target,"getInterface")(e));if(r==null){ge(this,"provider",null);ge(this,"signer",null)}else if(ws.isSigner(r)){ge(this,"provider",r.provider||null);ge(this,"signer",r)}else if(ds.isProvider(r)){ge(this,"provider",r);ge(this,"signer",null)}else{Tc.throwArgumentError("invalid signer or provider","signerOrProvider",r)}ge(this,"callStatic",{});ge(this,"estimateGas",{});ge(this,"functions",{});ge(this,"populateTransaction",{});ge(this,"filters",{});{const t={};Object.keys(this.interface.events).forEach((e=>{const r=this.interface.events[e];ge(this.filters,e,((...t)=>({address:this.address,topics:this.interface.encodeFilterTopics(r,t)})));if(!t[r.name]){t[r.name]=[]}t[r.name].push(e)}));Object.keys(t).forEach((e=>{const r=t[e];if(r.length===1){ge(this.filters,e,this.filters[r[0]])}else{Tc.warn(`Duplicate definition of ${e} (${r.join(", ")})`)}}))}ge(this,"_runningEvents",{});ge(this,"_wrappedEmits",{});if(t==null){Tc.throwArgumentError("invalid contract address or ENS name","addressOrName",t)}ge(this,"address",t);if(this.provider){ge(this,"resolvedAddress",Dc(this.provider,t))}else{try{ge(this,"resolvedAddress",Promise.resolve(Sr(t)))}catch(t){Tc.throwError("provider is required to use ENS name as contract address",pt.errors.UNSUPPORTED_OPERATION,{operation:"new Contract"})}}this.resolvedAddress.catch((t=>{}));const n={};const i={};Object.keys(this.interface.functions).forEach((t=>{const e=this.interface.functions[t];if(i[t]){Tc.warn(`Duplicate ABI entry for ${JSON.stringify(t)}`);return}i[t]=true;{const r=e.name;if(!n[`%${r}`]){n[`%${r}`]=[]}n[`%${r}`].push(t)}if(this[t]==null){ge(this,t,Hc(this,e,true))}if(this.functions[t]==null){ge(this.functions,t,Hc(this,e,false))}if(this.callStatic[t]==null){ge(this.callStatic,t,Lc(this,e,true))}if(this.populateTransaction[t]==null){ge(this.populateTransaction,t,jc(this,e))}if(this.estimateGas[t]==null){ge(this.estimateGas,t,Rc(this,e))}}));Object.keys(n).forEach((t=>{const e=n[t];if(e.length>1){return}t=t.substring(1);const r=e[0];try{if(this[t]==null){ge(this,t,this[r])}}catch(t){}if(this.functions[t]==null){ge(this.functions,t,this.functions[r])}if(this.callStatic[t]==null){ge(this.callStatic,t,this.callStatic[r])}if(this.populateTransaction[t]==null){ge(this.populateTransaction,t,this.populateTransaction[r])}if(this.estimateGas[t]==null){ge(this.estimateGas,t,this.estimateGas[r])}}))}static getContractAddress(t){return Pr(t)}static getInterface(t){if(os.isInterface(t)){return t}return new os(t)}deployed(){return this._deployed()}_deployed(t){if(!this._deployedPromise){if(this.deployTransaction){this._deployedPromise=this.deployTransaction.wait().then((()=>this))}else{this._deployedPromise=this.provider.getCode(this.address,t).then((t=>{if(t==="0x"){Tc.throwError("contract not deployed",pt.errors.UNSUPPORTED_OPERATION,{contractAddress:this.address,operation:"getDeployed"})}return this}))}}return this._deployedPromise}fallback(t){if(!this.signer){Tc.throwError("sending a transactions require a signer",pt.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction(fallback)"})}const e=Ae(t||{});["from","to"].forEach((function(t){if(e[t]==null){return}Tc.throwError("cannot override "+t,pt.errors.UNSUPPORTED_OPERATION,{operation:t})}));e.to=this.resolvedAddress;return this.deployed().then((()=>this.signer.sendTransaction(e)))}connect(t){if(typeof t==="string"){t=new ms(t,this.provider)}const e=new this.constructor(this.address,this.interface,t);if(this.deployTransaction){ge(e,"deployTransaction",this.deployTransaction)}return e}attach(t){return new this.constructor(t,this.interface,this.signer||this.provider)}static isIndexed(t){return is.isIndexed(t)}_normalizeRunningEvent(t){if(this._runningEvents[t.tag]){return this._runningEvents[t.tag]}return t}_getRunningEvent(t){if(typeof t==="string"){if(t==="error"){return this._normalizeRunningEvent(new Jc)}if(t==="event"){return this._normalizeRunningEvent(new Kc("event",null))}if(t==="*"){return this._normalizeRunningEvent(new Wc(this.address,this.interface))}const e=this.interface.getEvent(t);return this._normalizeRunningEvent(new zc(this.address,this.interface,e))}if(t.topics&&t.topics.length>0){try{const e=t.topics[0];if(typeof e!=="string"){throw new Error("invalid topic")}const r=this.interface.getEvent(e);return this._normalizeRunningEvent(new zc(this.address,this.interface,r,t.topics))}catch(t){}const e={address:this.address,topics:t.topics};return this._normalizeRunningEvent(new Kc(Gc(e),e))}return this._normalizeRunningEvent(new Wc(this.address,this.interface))}_checkRunningEvents(t){if(t.listenerCount()===0){delete this._runningEvents[t.tag];const e=this._wrappedEmits[t.tag];if(e&&t.filter){this.provider.off(t.filter,e);delete this._wrappedEmits[t.tag]}}}_wrapEvent(t,e,r){const n=Be(e);n.removeListener=()=>{if(!r){return}t.removeListener(r);this._checkRunningEvents(t)};n.getBlock=()=>this.provider.getBlock(e.blockHash);n.getTransaction=()=>this.provider.getTransaction(e.transactionHash);n.getTransactionReceipt=()=>this.provider.getTransactionReceipt(e.transactionHash);t.prepareEvent(n);return n}_addEventListener(t,e,r){if(!this.provider){Tc.throwError("events require a provider or a signer with a provider",pt.errors.UNSUPPORTED_OPERATION,{operation:"once"})}t.addListener(e,r);this._runningEvents[t.tag]=t;if(!this._wrappedEmits[t.tag]){const r=r=>{let n=this._wrapEvent(t,r,e);if(n.decodeError==null){try{const e=t.getEmit(n);this.emit(t.filter,...e)}catch(t){n.decodeError=t.error}}if(t.filter!=null){this.emit("event",n)}if(n.decodeError!=null){this.emit("error",n.decodeError,n)}};this._wrappedEmits[t.tag]=r;if(t.filter!=null){this.provider.on(t.filter,r)}}}queryFilter(t,e,r){const n=this._getRunningEvent(t);const i=Ae(n.filter);if(typeof e==="string"&&Pt(e,32)){if(r!=null){Tc.throwArgumentError("cannot specify toBlock with blockhash","toBlock",r)}i.blockHash=e}else{i.fromBlock=e!=null?e:0;i.toBlock=r!=null?r:"latest"}return this.provider.getLogs(i).then((t=>t.map((t=>this._wrapEvent(n,t,null)))))}on(t,e){this._addEventListener(this._getRunningEvent(t),e,false);return this}once(t,e){this._addEventListener(this._getRunningEvent(t),e,true);return this}emit(t,...e){if(!this.provider){return false}const r=this._getRunningEvent(t);const n=r.run(e)>0;this._checkRunningEvents(r);return n}listenerCount(t){if(!this.provider){return 0}if(t==null){return Object.keys(this._runningEvents).reduce(((t,e)=>t+this._runningEvents[e].listenerCount()),0)}return this._getRunningEvent(t).listenerCount()}listeners(t){if(!this.provider){return[]}if(t==null){const t=[];for(let e in this._runningEvents){this._runningEvents[e].listeners().forEach((e=>{t.push(e)}))}return t}return this._getRunningEvent(t).listeners()}removeAllListeners(t){if(!this.provider){return this}if(t==null){for(const t in this._runningEvents){const e=this._runningEvents[t];e.removeAllListeners();this._checkRunningEvents(e)}return this}const e=this._getRunningEvent(t);e.removeAllListeners();this._checkRunningEvents(e);return this}off(t,e){if(!this.provider){return this}const r=this._getRunningEvent(t);r.removeListener(e);this._checkRunningEvents(r);return this}removeListener(t,e){return this.off(t,e)}}class Vc extends qc{}class Yc{constructor(t,e,r){let n=null;if(typeof e==="string"){n=e}else if(Mt(e)){n=Tt(e)}else if(e&&typeof e.object==="string"){n=e.object}else{n="!"}if(n.substring(0,2)!=="0x"){n="0x"+n}if(!Pt(n)||n.length%2){Tc.throwArgumentError("invalid bytecode","bytecode",e)}if(r&&!ws.isSigner(r)){Tc.throwArgumentError("invalid signer","signer",r)}ge(this,"bytecode",n);ge(this,"interface",ye(new.target,"getInterface")(t));ge(this,"signer",r||null)}getDeployTransaction(...t){let e={};if(t.length===this.interface.deploy.inputs.length+1&&typeof t[t.length-1]==="object"){e=Ae(t.pop());for(const t in e){if(!Oc[t]){throw new Error("unknown transaction override "+t)}}}["data","from","to"].forEach((t=>{if(e[t]==null){return}Tc.throwError("cannot override "+t,pt.errors.UNSUPPORTED_OPERATION,{operation:t})}));if(e.value){const t=Vt.from(e.value);if(!t.isZero()&&!this.interface.deploy.payable){Tc.throwError("non-payable constructor cannot override value",pt.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:e.value})}}Tc.checkArgumentCount(t.length,this.interface.deploy.inputs.length," in Contract constructor");e.data=Tt(St([this.bytecode,this.interface.encodeDeploy(t)]));return e}deploy(...t){return Ic(this,void 0,void 0,(function*(){let e={};if(t.length===this.interface.deploy.inputs.length+1){e=t.pop()}Tc.checkArgumentCount(t.length,this.interface.deploy.inputs.length," in Contract constructor");const r=yield Nc(this.signer,t,this.interface.deploy.inputs);r.push(e);const n=this.getDeployTransaction(...r);const i=yield this.signer.sendTransaction(n);const s=ye(this.constructor,"getContractAddress")(i);const a=ye(this.constructor,"getContract")(s,this.interface,this.signer);Fc(a,i);ge(a,"deployTransaction",i);return a}))}attach(t){return this.constructor.getContract(t,this.interface,this.signer)}connect(t){return new this.constructor(this.interface,this.bytecode,t)}static fromSolidity(t,e){if(t==null){Tc.throwError("missing compiler output",pt.errors.MISSING_ARGUMENT,{argument:"compilerOutput"})}if(typeof t==="string"){t=JSON.parse(t)}const r=t.abi;let n=null;if(t.bytecode){n=t.bytecode}else if(t.evm&&t.evm.bytecode){n=t.evm.bytecode}return new this(r,n,e)}static getInterface(t){return Vc.getInterface(t)}static getContractAddress(t){return Pr(t)}static getContract(t,e,r){return new Vc(t,e,r)}}class _c{constructor(t){ge(this,"alphabet",t);ge(this,"base",t.length);ge(this,"_alphabetMap",{});ge(this,"_leader",t.charAt(0));for(let e=0;e<t.length;e++){this._alphabetMap[t.charAt(e)]=e}}encode(t){let e=Bt(t);if(e.length===0){return""}let r=[0];for(let t=0;t<e.length;++t){let n=e[t];for(let t=0;t<r.length;++t){n+=r[t]<<8;r[t]=n%this.base;n=n/this.base|0}while(n>0){r.push(n%this.base);n=n/this.base|0}}let n="";for(let t=0;e[t]===0&&t<e.length-1;++t){n+=this._leader}for(let t=r.length-1;t>=0;--t){n+=this.alphabet[r[t]]}return n}decode(t){if(typeof t!=="string"){throw new TypeError("Expected String")}let e=[];if(t.length===0){return new Uint8Array(e)}e.push(0);for(let r=0;r<t.length;r++){let n=this._alphabetMap[t[r]];if(n===undefined){throw new Error("Non-base"+this.base+" character")}let i=n;for(let t=0;t<e.length;++t){i+=e[t]*this.base;e[t]=i&255;i>>=8}while(i>0){e.push(i&255);i>>=8}}for(let r=0;t[r]===this._leader&&r<t.length-1;++r){e.push(0)}return Bt(new Uint8Array(e.reverse()))}}const Zc=new _c("abcdefghijklmnopqrstuvwxyz234567");const Xc=new _c("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");const $c=Object.freeze({__proto__:null,BaseX:_c,Base32:Zc,Base58:Xc});var tu;(function(t){t["sha256"]="sha256";t["sha512"]="sha512"})(tu||(tu={}));const eu="sha2/5.7.0";const ru=new pt(eu);function nu(t){return"0x"+df.ripemd160().update(Bt(t)).digest("hex")}function iu(t){return"0x"+df.sha256().update(Bt(t)).digest("hex")}function su(t){return"0x"+df.sha512().update(Bt(t)).digest("hex")}function au(t,e,r){if(!tu[t]){ru.throwError("unsupported algorithm "+t,pt.errors.UNSUPPORTED_OPERATION,{operation:"hmac",algorithm:t})}return"0x"+df.hmac(df[t],Bt(e)).update(Bt(r)).digest("hex")}const ou=Object.freeze({__proto__:null,computeHmac:au,ripemd160:nu,sha256:iu,sha512:su,get SupportedAlgorithm(){return tu}});function fu(t,e,r,n,i){t=Bt(t);e=Bt(e);let s;let a=1;const o=new Uint8Array(n);const f=new Uint8Array(e.length+4);f.set(e);let c;let u;for(let h=1;h<=a;h++){f[e.length]=h>>24&255;f[e.length+1]=h>>16&255;f[e.length+2]=h>>8&255;f[e.length+3]=h&255;let l=Bt(au(i,t,f));if(!s){s=l.length;u=new Uint8Array(s);a=Math.ceil(n/s);c=n-(a-1)*s}u.set(l);for(let e=1;e<r;e++){l=Bt(au(i,t,l));for(let t=0;t<s;t++)u[t]^=l[t]}const d=(h-1)*s;const v=h===a?c:s;o.set(Bt(u).slice(0,v),d)}return Tt(o)}const cu="wordlists/5.7.0";const uu=new pt(cu);class hu{constructor(t){uu.checkAbstract(new.target,hu);ge(this,"locale",t)}split(t){return t.toLowerCase().split(/ +/g)}join(t){return t.join(" ")}static check(t){const e=[];for(let r=0;r<2048;r++){const n=t.getWord(r);if(r!==t.getWordIndex(n)){return"0x"}e.push(n)}return Jn(e.join("\n")+"\n")}static register(t,e){}}const lu="AbandonAbilityAbleAboutAboveAbsentAbsorbAbstractAbsurdAbuseAccessAccidentAccountAccuseAchieveAcidAcousticAcquireAcrossActActionActorActressActualAdaptAddAddictAddressAdjustAdmitAdultAdvanceAdviceAerobicAffairAffordAfraidAgainAgeAgentAgreeAheadAimAirAirportAisleAlarmAlbumAlcoholAlertAlienAllAlleyAllowAlmostAloneAlphaAlreadyAlsoAlterAlwaysAmateurAmazingAmongAmountAmusedAnalystAnchorAncientAngerAngleAngryAnimalAnkleAnnounceAnnualAnotherAnswerAntennaAntiqueAnxietyAnyApartApologyAppearAppleApproveAprilArchArcticAreaArenaArgueArmArmedArmorArmyAroundArrangeArrestArriveArrowArtArtefactArtistArtworkAskAspectAssaultAssetAssistAssumeAsthmaAthleteAtomAttackAttendAttitudeAttractAuctionAuditAugustAuntAuthorAutoAutumnAverageAvocadoAvoidAwakeAwareAwayAwesomeAwfulAwkwardAxisBabyBachelorBaconBadgeBagBalanceBalconyBallBambooBananaBannerBarBarelyBargainBarrelBaseBasicBasketBattleBeachBeanBeautyBecauseBecomeBeefBeforeBeginBehaveBehindBelieveBelowBeltBenchBenefitBestBetrayBetterBetweenBeyondBicycleBidBikeBindBiologyBirdBirthBitterBlackBladeBlameBlanketBlastBleakBlessBlindBloodBlossomBlouseBlueBlurBlushBoardBoatBodyBoilBombBoneBonusBookBoostBorderBoringBorrowBossBottomBounceBoxBoyBracketBrainBrandBrassBraveBreadBreezeBrickBridgeBriefBrightBringBriskBroccoliBrokenBronzeBroomBrotherBrownBrushBubbleBuddyBudgetBuffaloBuildBulbBulkBulletBundleBunkerBurdenBurgerBurstBusBusinessBusyButterBuyerBuzzCabbageCabinCableCactusCageCakeCallCalmCameraCampCanCanalCancelCandyCannonCanoeCanvasCanyonCapableCapitalCaptainCarCarbonCardCargoCarpetCarryCartCaseCashCasinoCastleCasualCatCatalogCatchCategoryCattleCaughtCauseCautionCaveCeilingCeleryCementCensusCenturyCerealCertainChairChalkChampionChangeChaosChapterChargeChaseChatCheapCheckCheeseChefCherryChestChickenChiefChildChimneyChoiceChooseChronicChuckleChunkChurnCigarCinnamonCircleCitizenCityCivilClaimClapClarifyClawClayCleanClerkCleverClickClientCliffClimbClinicClipClockClogCloseClothCloudClownClubClumpClusterClutchCoachCoastCoconutCodeCoffeeCoilCoinCollectColorColumnCombineComeComfortComicCommonCompanyConcertConductConfirmCongressConnectConsiderControlConvinceCookCoolCopperCopyCoralCoreCornCorrectCostCottonCouchCountryCoupleCourseCousinCoverCoyoteCrackCradleCraftCramCraneCrashCraterCrawlCrazyCreamCreditCreekCrewCricketCrimeCrispCriticCropCrossCrouchCrowdCrucialCruelCruiseCrumbleCrunchCrushCryCrystalCubeCultureCupCupboardCuriousCurrentCurtainCurveCushionCustomCuteCycleDadDamageDampDanceDangerDaringDashDaughterDawnDayDealDebateDebrisDecadeDecemberDecideDeclineDecorateDecreaseDeerDefenseDefineDefyDegreeDelayDeliverDemandDemiseDenialDentistDenyDepartDependDepositDepthDeputyDeriveDescribeDesertDesignDeskDespairDestroyDetailDetectDevelopDeviceDevoteDiagramDialDiamondDiaryDiceDieselDietDifferDigitalDignityDilemmaDinnerDinosaurDirectDirtDisagreeDiscoverDiseaseDishDismissDisorderDisplayDistanceDivertDivideDivorceDizzyDoctorDocumentDogDollDolphinDomainDonateDonkeyDonorDoorDoseDoubleDoveDraftDragonDramaDrasticDrawDreamDressDriftDrillDrinkDripDriveDropDrumDryDuckDumbDuneDuringDustDutchDutyDwarfDynamicEagerEagleEarlyEarnEarthEasilyEastEasyEchoEcologyEconomyEdgeEditEducateEffortEggEightEitherElbowElderElectricElegantElementElephantElevatorEliteElseEmbarkEmbodyEmbraceEmergeEmotionEmployEmpowerEmptyEnableEnactEndEndlessEndorseEnemyEnergyEnforceEngageEngineEnhanceEnjoyEnlistEnoughEnrichEnrollEnsureEnterEntireEntryEnvelopeEpisodeEqualEquipEraEraseErodeErosionErrorEruptEscapeEssayEssenceEstateEternalEthicsEvidenceEvilEvokeEvolveExactExampleExcessExchangeExciteExcludeExcuseExecuteExerciseExhaustExhibitExileExistExitExoticExpandExpectExpireExplainExposeExpressExtendExtraEyeEyebrowFabricFaceFacultyFadeFaintFaithFallFalseFameFamilyFamousFanFancyFantasyFarmFashionFatFatalFatherFatigueFaultFavoriteFeatureFebruaryFederalFeeFeedFeelFemaleFenceFestivalFetchFeverFewFiberFictionFieldFigureFileFilmFilterFinalFindFineFingerFinishFireFirmFirstFiscalFishFitFitnessFixFlagFlameFlashFlatFlavorFleeFlightFlipFloatFlockFloorFlowerFluidFlushFlyFoamFocusFogFoilFoldFollowFoodFootForceForestForgetForkFortuneForumForwardFossilFosterFoundFoxFragileFrameFrequentFreshFriendFringeFrogFrontFrostFrownFrozenFruitFuelFunFunnyFurnaceFuryFutureGadgetGainGalaxyGalleryGameGapGarageGarbageGardenGarlicGarmentGasGaspGateGatherGaugeGazeGeneralGeniusGenreGentleGenuineGestureGhostGiantGiftGiggleGingerGiraffeGirlGiveGladGlanceGlareGlassGlideGlimpseGlobeGloomGloryGloveGlowGlueGoatGoddessGoldGoodGooseGorillaGospelGossipGovernGownGrabGraceGrainGrantGrapeGrassGravityGreatGreenGridGriefGritGroceryGroupGrowGruntGuardGuessGuideGuiltGuitarGunGymHabitHairHalfHammerHamsterHandHappyHarborHardHarshHarvestHatHaveHawkHazardHeadHealthHeartHeavyHedgehogHeightHelloHelmetHelpHenHeroHiddenHighHillHintHipHireHistoryHobbyHockeyHoldHoleHolidayHollowHomeHoneyHoodHopeHornHorrorHorseHospitalHostHotelHourHoverHubHugeHumanHumbleHumorHundredHungryHuntHurdleHurryHurtHusbandHybridIceIconIdeaIdentifyIdleIgnoreIllIllegalIllnessImageImitateImmenseImmuneImpactImposeImproveImpulseInchIncludeIncomeIncreaseIndexIndicateIndoorIndustryInfantInflictInformInhaleInheritInitialInjectInjuryInmateInnerInnocentInputInquiryInsaneInsectInsideInspireInstallIntactInterestIntoInvestInviteInvolveIronIslandIsolateIssueItemIvoryJacketJaguarJarJazzJealousJeansJellyJewelJobJoinJokeJourneyJoyJudgeJuiceJumpJungleJuniorJunkJustKangarooKeenKeepKetchupKeyKickKidKidneyKindKingdomKissKitKitchenKiteKittenKiwiKneeKnifeKnockKnowLabLabelLaborLadderLadyLakeLampLanguageLaptopLargeLaterLatinLaughLaundryLavaLawLawnLawsuitLayerLazyLeaderLeafLearnLeaveLectureLeftLegLegalLegendLeisureLemonLendLengthLensLeopardLessonLetterLevelLiarLibertyLibraryLicenseLifeLiftLightLikeLimbLimitLinkLionLiquidListLittleLiveLizardLoadLoanLobsterLocalLockLogicLonelyLongLoopLotteryLoudLoungeLoveLoyalLuckyLuggageLumberLunarLunchLuxuryLyricsMachineMadMagicMagnetMaidMailMainMajorMakeMammalManManageMandateMangoMansionManualMapleMarbleMarchMarginMarineMarketMarriageMaskMassMasterMatchMaterialMathMatrixMatterMaximumMazeMeadowMeanMeasureMeatMechanicMedalMediaMelodyMeltMemberMemoryMentionMenuMercyMergeMeritMerryMeshMessageMetalMethodMiddleMidnightMilkMillionMimicMindMinimumMinorMinuteMiracleMirrorMiseryMissMistakeMixMixedMixtureMobileModelModifyMomMomentMonitorMonkeyMonsterMonthMoonMoralMoreMorningMosquitoMotherMotionMotorMountainMouseMoveMovieMuchMuffinMuleMultiplyMuscleMuseumMushroomMusicMustMutualMyselfMysteryMythNaiveNameNapkinNarrowNastyNationNatureNearNeckNeedNegativeNeglectNeitherNephewNerveNestNetNetworkNeutralNeverNewsNextNiceNightNobleNoiseNomineeNoodleNormalNorthNoseNotableNoteNothingNoticeNovelNowNuclearNumberNurseNutOakObeyObjectObligeObscureObserveObtainObviousOccurOceanOctoberOdorOffOfferOfficeOftenOilOkayOldOliveOlympicOmitOnceOneOnionOnlineOnlyOpenOperaOpinionOpposeOptionOrangeOrbitOrchardOrderOrdinaryOrganOrientOriginalOrphanOstrichOtherOutdoorOuterOutputOutsideOvalOvenOverOwnOwnerOxygenOysterOzonePactPaddlePagePairPalacePalmPandaPanelPanicPantherPaperParadeParentParkParrotPartyPassPatchPathPatientPatrolPatternPausePavePaymentPeacePeanutPearPeasantPelicanPenPenaltyPencilPeoplePepperPerfectPermitPersonPetPhonePhotoPhrasePhysicalPianoPicnicPicturePiecePigPigeonPillPilotPinkPioneerPipePistolPitchPizzaPlacePlanetPlasticPlatePlayPleasePledgePluckPlugPlungePoemPoetPointPolarPolePolicePondPonyPoolPopularPortionPositionPossiblePostPotatoPotteryPovertyPowderPowerPracticePraisePredictPreferPreparePresentPrettyPreventPricePridePrimaryPrintPriorityPrisonPrivatePrizeProblemProcessProduceProfitProgramProjectPromoteProofPropertyProsperProtectProudProvidePublicPuddingPullPulpPulsePumpkinPunchPupilPuppyPurchasePurityPurposePursePushPutPuzzlePyramidQualityQuantumQuarterQuestionQuickQuitQuizQuoteRabbitRaccoonRaceRackRadarRadioRailRainRaiseRallyRampRanchRandomRangeRapidRareRateRatherRavenRawRazorReadyRealReasonRebelRebuildRecallReceiveRecipeRecordRecycleReduceReflectReformRefuseRegionRegretRegularRejectRelaxReleaseReliefRelyRemainRememberRemindRemoveRenderRenewRentReopenRepairRepeatReplaceReportRequireRescueResembleResistResourceResponseResultRetireRetreatReturnReunionRevealReviewRewardRhythmRibRibbonRiceRichRideRidgeRifleRightRigidRingRiotRippleRiskRitualRivalRiverRoadRoastRobotRobustRocketRomanceRoofRookieRoomRoseRotateRoughRoundRouteRoyalRubberRudeRugRuleRunRunwayRuralSadSaddleSadnessSafeSailSaladSalmonSalonSaltSaluteSameSampleSandSatisfySatoshiSauceSausageSaveSayScaleScanScareScatterSceneSchemeSchoolScienceScissorsScorpionScoutScrapScreenScriptScrubSeaSearchSeasonSeatSecondSecretSectionSecuritySeedSeekSegmentSelectSellSeminarSeniorSenseSentenceSeriesServiceSessionSettleSetupSevenShadowShaftShallowShareShedShellSheriffShieldShiftShineShipShiverShockShoeShootShopShortShoulderShoveShrimpShrugShuffleShySiblingSickSideSiegeSightSignSilentSilkSillySilverSimilarSimpleSinceSingSirenSisterSituateSixSizeSkateSketchSkiSkillSkinSkirtSkullSlabSlamSleepSlenderSliceSlideSlightSlimSloganSlotSlowSlushSmallSmartSmileSmokeSmoothSnackSnakeSnapSniffSnowSoapSoccerSocialSockSodaSoftSolarSoldierSolidSolutionSolveSomeoneSongSoonSorrySortSoulSoundSoupSourceSouthSpaceSpareSpatialSpawnSpeakSpecialSpeedSpellSpendSphereSpiceSpiderSpikeSpinSpiritSplitSpoilSponsorSpoonSportSpotSpraySpreadSpringSpySquareSqueezeSquirrelStableStadiumStaffStageStairsStampStandStartStateStaySteakSteelStemStepStereoStickStillStingStockStomachStoneStoolStoryStoveStrategyStreetStrikeStrongStruggleStudentStuffStumbleStyleSubjectSubmitSubwaySuccessSuchSuddenSufferSugarSuggestSuitSummerSunSunnySunsetSuperSupplySupremeSureSurfaceSurgeSurpriseSurroundSurveySuspectSustainSwallowSwampSwapSwarmSwearSweetSwiftSwimSwingSwitchSwordSymbolSymptomSyrupSystemTableTackleTagTailTalentTalkTankTapeTargetTaskTasteTattooTaxiTeachTeamTellTenTenantTennisTentTermTestTextThankThatThemeThenTheoryThereTheyThingThisThoughtThreeThriveThrowThumbThunderTicketTideTigerTiltTimberTimeTinyTipTiredTissueTitleToastTobaccoTodayToddlerToeTogetherToiletTokenTomatoTomorrowToneTongueTonightToolToothTopTopicToppleTorchTornadoTortoiseTossTotalTouristTowardTowerTownToyTrackTradeTrafficTragicTrainTransferTrapTrashTravelTrayTreatTreeTrendTrialTribeTrickTriggerTrimTripTrophyTroubleTruckTrueTrulyTrumpetTrustTruthTryTubeTuitionTumbleTunaTunnelTurkeyTurnTurtleTwelveTwentyTwiceTwinTwistTwoTypeTypicalUglyUmbrellaUnableUnawareUncleUncoverUnderUndoUnfairUnfoldUnhappyUniformUniqueUnitUniverseUnknownUnlockUntilUnusualUnveilUpdateUpgradeUpholdUponUpperUpsetUrbanUrgeUsageUseUsedUsefulUselessUsualUtilityVacantVacuumVagueValidValleyValveVanVanishVaporVariousVastVaultVehicleVelvetVendorVentureVenueVerbVerifyVersionVeryVesselVeteranViableVibrantViciousVictoryVideoViewVillageVintageViolinVirtualVirusVisaVisitVisualVitalVividVocalVoiceVoidVolcanoVolumeVoteVoyageWageWagonWaitWalkWallWalnutWantWarfareWarmWarriorWashWaspWasteWaterWaveWayWealthWeaponWearWeaselWeatherWebWeddingWeekendWeirdWelcomeWestWetWhaleWhatWheatWheelWhenWhereWhipWhisperWideWidthWifeWildWillWinWindowWineWingWinkWinnerWinterWireWisdomWiseWishWitnessWolfWomanWonderWoodWoolWordWorkWorldWorryWorthWrapWreckWrestleWristWriteWrongYardYearYellowYouYoungYouthZebraZeroZoneZoo";let du=null;function vu(t){if(du!=null){return}du=lu.replace(/([A-Z])/g," $1").toLowerCase().substring(1).split(" ");if(hu.check(t)!=="0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60"){du=null;throw new Error("BIP39 Wordlist for en (English) FAILED")}}class bu extends hu{constructor(){super("en")}getWord(t){vu(this);return du[t]}getWordIndex(t){vu(this);return du.indexOf(t)}}const pu=new bu;hu.register(pu);const gu={en:pu};const yu="hdnode/5.7.0";const wu=new pt(yu);const mu=Vt.from("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141");const Au=ln("Bitcoin seed");const Eu=2147483648;function ku(t){return(1<<t)-1<<8-t}function Mu(t){return(1<<t)-1}function Bu(t){return Rt(Tt(t),32)}function Su(t){return Xc.encode(St([t,Dt(iu(iu(t)),0,4)]))}function Cu(t){if(t==null){return gu["en"]}if(typeof t==="string"){const e=gu[t];if(e==null){wu.throwArgumentError("unknown locale","wordlist",t)}return e}return t}const xu={};const Pu="m/44'/60'/0'/0/0";class Iu{constructor(t,e,r,n,i,s,a,o){if(t!==xu){throw new Error("HDNode constructor cannot be called directly")}if(e){const t=new rc(e);ge(this,"privateKey",t.privateKey);ge(this,"publicKey",t.compressedPublicKey)}else{ge(this,"privateKey",null);ge(this,"publicKey",Tt(r))}ge(this,"parentFingerprint",n);ge(this,"fingerprint",Dt(nu(iu(this.publicKey)),0,4));ge(this,"address",dc(this.publicKey));ge(this,"chainCode",i);ge(this,"index",s);ge(this,"depth",a);if(o==null){ge(this,"mnemonic",null);ge(this,"path",null)}else if(typeof o==="string"){ge(this,"mnemonic",null);ge(this,"path",o)}else{ge(this,"mnemonic",o);ge(this,"path",o.path)}}get extendedKey(){if(this.depth>=256){throw new Error("Depth too large!")}return Su(St([this.privateKey!=null?"0x0488ADE4":"0x0488B21E",Tt(this.depth),this.parentFingerprint,Rt(Tt(this.index),4),this.chainCode,this.privateKey!=null?St(["0x00",this.privateKey]):this.publicKey]))}neuter(){return new Iu(xu,null,this.publicKey,this.parentFingerprint,this.chainCode,this.index,this.depth,this.path)}_derive(t){if(t>4294967295){throw new Error("invalid index - "+String(t))}let e=this.path;if(e){e+="/"+(t&~Eu)}const r=new Uint8Array(37);if(t&Eu){if(!this.privateKey){throw new Error("cannot derive child of neutered node")}r.set(Bt(this.privateKey),1);if(e){e+="'"}}else{r.set(Bt(this.publicKey))}for(let e=24;e>=0;e-=8){r[33+(e>>3)]=t>>24-e&255}const n=Bt(au(tu.sha512,this.chainCode,r));const i=n.slice(0,32);const s=n.slice(32);let a=null;let o=null;if(this.privateKey){a=Bu(Vt.from(i).add(this.privateKey).mod(mu))}else{const t=new rc(Tt(i));o=t._addPoint(this.publicKey)}let f=e;const c=this.mnemonic;if(c){f=Object.freeze({phrase:c.phrase,path:e,locale:c.locale||"en"})}return new Iu(xu,a,o,this.fingerprint,Bu(s),t,this.depth+1,f)}derivePath(t){const e=t.split("/");if(e.length===0||e[0]==="m"&&this.depth!==0){throw new Error("invalid path - "+t)}if(e[0]==="m"){e.shift()}let r=this;for(let t=0;t<e.length;t++){const n=e[t];if(n.match(/^[0-9]+'$/)){const t=parseInt(n.substring(0,n.length-1));if(t>=Eu){throw new Error("invalid path index - "+n)}r=r._derive(Eu+t)}else if(n.match(/^[0-9]+$/)){const t=parseInt(n);if(t>=Eu){throw new Error("invalid path index - "+n)}r=r._derive(t)}else{throw new Error("invalid path component - "+n)}}return r}static _fromSeed(t,e){const r=Bt(t);if(r.length<16||r.length>64){throw new Error("invalid seed")}const n=Bt(au(tu.sha512,Au,r));return new Iu(xu,Bu(n.slice(0,32)),null,"0x00000000",Bu(n.slice(32)),0,0,e)}static fromMnemonic(t,e,r){r=Cu(r);t=Du(Ou(t,r),r);return Iu._fromSeed(Tu(t,e),{phrase:t,path:"m",locale:r.locale})}static fromSeed(t){return Iu._fromSeed(t,null)}static fromExtendedKey(t){const e=Xc.decode(t);if(e.length!==82||Su(e.slice(0,78))!==t){wu.throwArgumentError("invalid extended key","extendedKey","[REDACTED]")}const r=e[4];const n=Tt(e.slice(5,9));const i=parseInt(Tt(e.slice(9,13)).substring(2),16);const s=Tt(e.slice(13,45));const a=e.slice(45,78);switch(Tt(e.slice(0,4))){case"0x0488b21e":case"0x043587cf":return new Iu(xu,null,Tt(a),n,s,i,r,null);case"0x0488ade4":case"0x04358394 ":if(a[0]!==0){break}return new Iu(xu,Tt(a.slice(1)),null,n,s,i,r,null)}return wu.throwArgumentError("invalid extended key","extendedKey","[REDACTED]")}}function Tu(t,e){if(!e){e=""}const r=ln("mnemonic"+e,sn.NFKD);return fu(ln(t,sn.NFKD),r,2048,64,"sha512")}function Ou(t,e){e=Cu(e);wu.checkNormalize();const r=e.split(t);if(r.length%3!==0){throw new Error("invalid mnemonic")}const n=Bt(new Uint8Array(Math.ceil(11*r.length/8)));let i=0;for(let t=0;t<r.length;t++){let s=e.getWordIndex(r[t].normalize("NFKD"));if(s===-1){throw new Error("invalid mnemonic")}for(let t=0;t<11;t++){if(s&1<<10-t){n[i>>3]|=1<<7-i%8}i++}}const s=32*r.length/3;const a=r.length/3;const o=ku(a);const f=Bt(iu(n.slice(0,s/8)))[0]&o;if(f!==(n[n.length-1]&o)){throw new Error("invalid checksum")}return Tt(n.slice(0,s/8))}function Du(t,e){e=Cu(e);t=Bt(t);if(t.length%4!==0||t.length<16||t.length>32){throw new Error("invalid entropy")}const r=[0];let n=11;for(let e=0;e<t.length;e++){if(n>8){r[r.length-1]<<=8;r[r.length-1]|=t[e];n-=8}else{r[r.length-1]<<=n;r[r.length-1]|=t[e]>>8-n;r.push(t[e]&Mu(8-n));n+=3}}const i=t.length/4;const s=Bt(iu(t))[0]&ku(i);r[r.length-1]<<=i;r[r.length-1]|=s>>8-i;return e.join(r.map((t=>e.getWord(t))))}function Nu(t,e){try{Ou(t,e);return true}catch(t){}return false}function Uu(t){if(typeof t!=="number"||t<0||t>=Eu||t%1){wu.throwArgumentError("invalid account index","index",t)}return`m/44'/60'/${t}'/0/0`}const ju=Object.freeze({__proto__:null,defaultPath:Pu,HDNode:Iu,mnemonicToSeed:Tu,mnemonicToEntropy:Ou,entropyToMnemonic:Du,isValidMnemonic:Nu,getAccountPath:Uu});const Ru="random/5.7.0";const Fu=new pt(Ru);function Lu(){if(typeof self!=="undefined"){return self}if(typeof window!=="undefined"){return window}if(typeof global!=="undefined"){return global}throw new Error("unable to locate global object")}const Qu=Lu();let Hu=Qu.crypto||Qu.msCrypto;if(!Hu||!Hu.getRandomValues){Fu.warn("WARNING: Missing strong random number source");Hu={getRandomValues:function(t){return Fu.throwError("no secure random source avaialble",pt.errors.UNSUPPORTED_OPERATION,{operation:"crypto.getRandomValues"})}}}function Gu(t){if(t<=0||t>1024||t%1||t!=t){Fu.throwArgumentError("invalid length","length",t)}const e=new Uint8Array(t);Hu.getRandomValues(e);return Bt(e)}function Ku(t){t=t.slice();for(let e=t.length-1;e>0;e--){const r=Math.floor(Math.random()*(e+1));const n=t[e];t[e]=t[r];t[r]=n}return t}const Ju=Object.freeze({__proto__:null,randomBytes:Gu,shuffled:Ku});var zu=t((function(t,e){(function(e){function r(t){return parseInt(t)===t}function n(t){if(!r(t.length)){return false}for(var e=0;e<t.length;e++){if(!r(t[e])||t[e]<0||t[e]>255){return false}}return true}function i(t,e){if(t.buffer&&ArrayBuffer.isView(t)&&t.name==="Uint8Array"){if(e){if(t.slice){t=t.slice()}else{t=Array.prototype.slice.call(t)}}return t}if(Array.isArray(t)){if(!n(t)){throw new Error("Array contains invalid value: "+t)}return new Uint8Array(t)}if(r(t.length)&&n(t)){return new Uint8Array(t)}throw new Error("unsupported array-like object")}function s(t){return new Uint8Array(t)}function a(t,e,r,n,i){if(n!=null||i!=null){if(t.slice){t=t.slice(n,i)}else{t=Array.prototype.slice.call(t,n,i)}}e.set(t,r)}var o=function(){function t(t){var e=[],r=0;t=encodeURI(t);while(r<t.length){var n=t.charCodeAt(r++);if(n===37){e.push(parseInt(t.substr(r,2),16));r+=2}else{e.push(n)}}return i(e)}function e(t){var e=[],r=0;while(r<t.length){var n=t[r];if(n<128){e.push(String.fromCharCode(n));r++}else if(n>191&&n<224){e.push(String.fromCharCode((n&31)<<6|t[r+1]&63));r+=2}else{e.push(String.fromCharCode((n&15)<<12|(t[r+1]&63)<<6|t[r+2]&63));r+=3}}return e.join("")}return{toBytes:t,fromBytes:e}}();var f=function(){function t(t){var e=[];for(var r=0;r<t.length;r+=2){e.push(parseInt(t.substr(r,2),16))}return e}var e="0123456789abcdef";function r(t){var r=[];for(var n=0;n<t.length;n++){var i=t[n];r.push(e[(i&240)>>4]+e[i&15])}return r.join("")}return{toBytes:t,fromBytes:r}}();var c={16:10,24:12,32:14};var u=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145];var h=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22];var l=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125];var d=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986];var v=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766];var b=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126];var p=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436];var g=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890];var y=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935];var w=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600];var m=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480];var A=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795];var E=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855];var k=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150];var M=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function B(t){var e=[];for(var r=0;r<t.length;r+=4){e.push(t[r]<<24|t[r+1]<<16|t[r+2]<<8|t[r+3])}return e}var S=function(t){if(!(this instanceof S)){throw Error("AES must be instanitated with `new`")}Object.defineProperty(this,"key",{value:i(t,true)});this._prepare()};S.prototype._prepare=function(){var t=c[this.key.length];if(t==null){throw new Error("invalid key size (must be 16, 24 or 32 bytes)")}this._Ke=[];this._Kd=[];for(var e=0;e<=t;e++){this._Ke.push([0,0,0,0]);this._Kd.push([0,0,0,0])}var r=(t+1)*4;var n=this.key.length/4;var i=B(this.key);var s;for(var e=0;e<n;e++){s=e>>2;this._Ke[s][e%4]=i[e];this._Kd[t-s][e%4]=i[e]}var a=0;var o=n,f;while(o<r){f=i[n-1];i[0]^=h[f>>16&255]<<24^h[f>>8&255]<<16^h[f&255]<<8^h[f>>24&255]^u[a]<<24;a+=1;if(n!=8){for(var e=1;e<n;e++){i[e]^=i[e-1]}}else{for(var e=1;e<n/2;e++){i[e]^=i[e-1]}f=i[n/2-1];i[n/2]^=h[f&255]^h[f>>8&255]<<8^h[f>>16&255]<<16^h[f>>24&255]<<24;for(var e=n/2+1;e<n;e++){i[e]^=i[e-1]}}var e=0,l,d;while(e<n&&o<r){l=o>>2;d=o%4;this._Ke[l][d]=i[e];this._Kd[t-l][d]=i[e++];o++}}for(var l=1;l<t;l++){for(var d=0;d<4;d++){f=this._Kd[l][d];this._Kd[l][d]=A[f>>24&255]^E[f>>16&255]^k[f>>8&255]^M[f&255]}}};S.prototype.encrypt=function(t){if(t.length!=16){throw new Error("invalid plaintext size (must be 16 bytes)")}var e=this._Ke.length-1;var r=[0,0,0,0];var n=B(t);for(var i=0;i<4;i++){n[i]^=this._Ke[0][i]}for(var a=1;a<e;a++){for(var i=0;i<4;i++){r[i]=d[n[i]>>24&255]^v[n[(i+1)%4]>>16&255]^b[n[(i+2)%4]>>8&255]^p[n[(i+3)%4]&255]^this._Ke[a][i]}n=r.slice()}var o=s(16),f;for(var i=0;i<4;i++){f=this._Ke[e][i];o[4*i]=(h[n[i]>>24&255]^f>>24)&255;o[4*i+1]=(h[n[(i+1)%4]>>16&255]^f>>16)&255;o[4*i+2]=(h[n[(i+2)%4]>>8&255]^f>>8)&255;o[4*i+3]=(h[n[(i+3)%4]&255]^f)&255}return o};S.prototype.decrypt=function(t){if(t.length!=16){throw new Error("invalid ciphertext size (must be 16 bytes)")}var e=this._Kd.length-1;var r=[0,0,0,0];var n=B(t);for(var i=0;i<4;i++){n[i]^=this._Kd[0][i]}for(var a=1;a<e;a++){for(var i=0;i<4;i++){r[i]=g[n[i]>>24&255]^y[n[(i+3)%4]>>16&255]^w[n[(i+2)%4]>>8&255]^m[n[(i+1)%4]&255]^this._Kd[a][i]}n=r.slice()}var o=s(16),f;for(var i=0;i<4;i++){f=this._Kd[e][i];o[4*i]=(l[n[i]>>24&255]^f>>24)&255;o[4*i+1]=(l[n[(i+3)%4]>>16&255]^f>>16)&255;o[4*i+2]=(l[n[(i+2)%4]>>8&255]^f>>8)&255;o[4*i+3]=(l[n[(i+1)%4]&255]^f)&255}return o};var C=function(t){if(!(this instanceof C)){throw Error("AES must be instanitated with `new`")}this.description="Electronic Code Block";this.name="ecb";this._aes=new S(t)};C.prototype.encrypt=function(t){t=i(t);if(t.length%16!==0){throw new Error("invalid plaintext size (must be multiple of 16 bytes)")}var e=s(t.length);var r=s(16);for(var n=0;n<t.length;n+=16){a(t,r,0,n,n+16);r=this._aes.encrypt(r);a(r,e,n)}return e};C.prototype.decrypt=function(t){t=i(t);if(t.length%16!==0){throw new Error("invalid ciphertext size (must be multiple of 16 bytes)")}var e=s(t.length);var r=s(16);for(var n=0;n<t.length;n+=16){a(t,r,0,n,n+16);r=this._aes.decrypt(r);a(r,e,n)}return e};var x=function(t,e){if(!(this instanceof x)){throw Error("AES must be instanitated with `new`")}this.description="Cipher Block Chaining";this.name="cbc";if(!e){e=s(16)}else if(e.length!=16){throw new Error("invalid initialation vector size (must be 16 bytes)")}this._lastCipherblock=i(e,true);this._aes=new S(t)};x.prototype.encrypt=function(t){t=i(t);if(t.length%16!==0){throw new Error("invalid plaintext size (must be multiple of 16 bytes)")}var e=s(t.length);var r=s(16);for(var n=0;n<t.length;n+=16){a(t,r,0,n,n+16);for(var o=0;o<16;o++){r[o]^=this._lastCipherblock[o]}this._lastCipherblock=this._aes.encrypt(r);a(this._lastCipherblock,e,n)}return e};x.prototype.decrypt=function(t){t=i(t);if(t.length%16!==0){throw new Error("invalid ciphertext size (must be multiple of 16 bytes)")}var e=s(t.length);var r=s(16);for(var n=0;n<t.length;n+=16){a(t,r,0,n,n+16);r=this._aes.decrypt(r);for(var o=0;o<16;o++){e[n+o]=r[o]^this._lastCipherblock[o]}a(t,this._lastCipherblock,0,n,n+16)}return e};var P=function(t,e,r){if(!(this instanceof P)){throw Error("AES must be instanitated with `new`")}this.description="Cipher Feedback";this.name="cfb";if(!e){e=s(16)}else if(e.length!=16){throw new Error("invalid initialation vector size (must be 16 size)")}if(!r){r=1}this.segmentSize=r;this._shiftRegister=i(e,true);this._aes=new S(t)};P.prototype.encrypt=function(t){if(t.length%this.segmentSize!=0){throw new Error("invalid plaintext size (must be segmentSize bytes)")}var e=i(t,true);var r;for(var n=0;n<e.length;n+=this.segmentSize){r=this._aes.encrypt(this._shiftRegister);for(var s=0;s<this.segmentSize;s++){e[n+s]^=r[s]}a(this._shiftRegister,this._shiftRegister,0,this.segmentSize);a(e,this._shiftRegister,16-this.segmentSize,n,n+this.segmentSize)}return e};P.prototype.decrypt=function(t){if(t.length%this.segmentSize!=0){throw new Error("invalid ciphertext size (must be segmentSize bytes)")}var e=i(t,true);var r;for(var n=0;n<e.length;n+=this.segmentSize){r=this._aes.encrypt(this._shiftRegister);for(var s=0;s<this.segmentSize;s++){e[n+s]^=r[s]}a(this._shiftRegister,this._shiftRegister,0,this.segmentSize);a(t,this._shiftRegister,16-this.segmentSize,n,n+this.segmentSize)}return e};var I=function(t,e){if(!(this instanceof I)){throw Error("AES must be instanitated with `new`")}this.description="Output Feedback";this.name="ofb";if(!e){e=s(16)}else if(e.length!=16){throw new Error("invalid initialation vector size (must be 16 bytes)")}this._lastPrecipher=i(e,true);this._lastPrecipherIndex=16;this._aes=new S(t)};I.prototype.encrypt=function(t){var e=i(t,true);for(var r=0;r<e.length;r++){if(this._lastPrecipherIndex===16){this._lastPrecipher=this._aes.encrypt(this._lastPrecipher);this._lastPrecipherIndex=0}e[r]^=this._lastPrecipher[this._lastPrecipherIndex++]}return e};I.prototype.decrypt=I.prototype.encrypt;var T=function(t){if(!(this instanceof T)){throw Error("Counter must be instanitated with `new`")}if(t!==0&&!t){t=1}if(typeof t==="number"){this._counter=s(16);this.setValue(t)}else{this.setBytes(t)}};T.prototype.setValue=function(t){if(typeof t!=="number"||parseInt(t)!=t){throw new Error("invalid counter value (must be an integer)")}for(var e=15;e>=0;--e){this._counter[e]=t%256;t=t>>8}};T.prototype.setBytes=function(t){t=i(t,true);if(t.length!=16){throw new Error("invalid counter bytes size (must be 16 bytes)")}this._counter=t};T.prototype.increment=function(){for(var t=15;t>=0;t--){if(this._counter[t]===255){this._counter[t]=0}else{this._counter[t]++;break}}};var O=function(t,e){if(!(this instanceof O)){throw Error("AES must be instanitated with `new`")}this.description="Counter";this.name="ctr";if(!(e instanceof T)){e=new T(e)}this._counter=e;this._remainingCounter=null;this._remainingCounterIndex=16;this._aes=new S(t)};O.prototype.encrypt=function(t){var e=i(t,true);for(var r=0;r<e.length;r++){if(this._remainingCounterIndex===16){this._remainingCounter=this._aes.encrypt(this._counter._counter);this._remainingCounterIndex=0;this._counter.increment()}e[r]^=this._remainingCounter[this._remainingCounterIndex++]}return e};O.prototype.decrypt=O.prototype.encrypt;function D(t){t=i(t,true);var e=16-t.length%16;var r=s(t.length+e);a(t,r);for(var n=t.length;n<r.length;n++){r[n]=e}return r}function N(t){t=i(t,true);if(t.length<16){throw new Error("PKCS#7 invalid length")}var e=t[t.length-1];if(e>16){throw new Error("PKCS#7 padding byte out of range")}var r=t.length-e;for(var n=0;n<e;n++){if(t[r+n]!==e){throw new Error("PKCS#7 invalid padding byte")}}var o=s(r);a(t,o,0,0,r);return o}var U={AES:S,Counter:T,ModeOfOperation:{ecb:C,cbc:x,cfb:P,ofb:I,ctr:O},utils:{hex:f,utf8:o},padding:{pkcs7:{pad:D,strip:N}},_arrayTest:{coerceArray:i,createArray:s,copyArray:a}};{t.exports=U}})()}));const Wu="json-wallets/5.7.0";function qu(t){if(typeof t==="string"&&t.substring(0,2)!=="0x"){t="0x"+t}return Bt(t)}function Vu(t,e){t=String(t);while(t.length<e){t="0"+t}return t}function Yu(t){if(typeof t==="string"){return ln(t,sn.NFKC)}return Bt(t)}function _u(t,e){let r=t;const n=e.toLowerCase().split("/");for(let t=0;t<n.length;t++){let e=null;for(const i in r){if(i.toLowerCase()===n[t]){e=r[i];break}}if(e===null){return null}r=e}return r}function Zu(t){const e=Bt(t);e[6]=e[6]&15|64;e[8]=e[8]&63|128;const r=Tt(e);return[r.substring(2,10),r.substring(10,14),r.substring(14,18),r.substring(18,22),r.substring(22,34)].join("-")}const Xu=new pt(Wu);class $u extends Se{isCrowdsaleAccount(t){return!!(t&&t._isCrowdsaleAccount)}}function th(t,e){const r=JSON.parse(t);e=Yu(e);const n=Sr(_u(r,"ethaddr"));const i=qu(_u(r,"encseed"));if(!i||i.length%16!==0){Xu.throwArgumentError("invalid encseed","json",t)}const s=Bt(fu(e,e,2e3,32,"sha256")).slice(0,16);const a=i.slice(0,16);const o=i.slice(16);const f=new zu.ModeOfOperation.cbc(s,a);const c=zu.padding.pkcs7.strip(Bt(f.decrypt(o)));let u="";for(let t=0;t<c.length;t++){u+=String.fromCharCode(c[t])}const h=ln(u);const l=ar(h);return new $u({_isCrowdsaleAccount:true,address:n,privateKey:l})}function eh(t){let e=null;try{e=JSON.parse(t)}catch(t){return false}return e.encseed&&e.ethaddr}function rh(t){let e=null;try{e=JSON.parse(t)}catch(t){return false}if(!e.version||parseInt(e.version)!==e.version||parseInt(e.version)!==3){return false}return true}function nh(t){if(eh(t)){try{return Sr(JSON.parse(t).ethaddr)}catch(t){return null}}if(rh(t)){try{return Sr(JSON.parse(t).address)}catch(t){return null}}return null}var ih=t((function(t,e){(function(e){const r=2147483647;function n(t){const e=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);let r=1779033703,n=3144134277,i=1013904242,s=2773480762;let a=1359893119,o=2600822924,f=528734635,c=1541459225;const u=new Uint32Array(64);function h(t){let h=0,l=t.length;while(l>=64){let d=r,v=n,b=i,p=s,g=a,y=o,w=f,m=c,A,E,k,M,B;for(E=0;E<16;E++){k=h+E*4;u[E]=(t[k]&255)<<24|(t[k+1]&255)<<16|(t[k+2]&255)<<8|t[k+3]&255}for(E=16;E<64;E++){A=u[E-2];M=(A>>>17|A<<32-17)^(A>>>19|A<<32-19)^A>>>10;A=u[E-15];B=(A>>>7|A<<32-7)^(A>>>18|A<<32-18)^A>>>3;u[E]=(M+u[E-7]|0)+(B+u[E-16]|0)|0}for(E=0;E<64;E++){M=(((g>>>6|g<<32-6)^(g>>>11|g<<32-11)^(g>>>25|g<<32-25))+(g&y^~g&w)|0)+(m+(e[E]+u[E]|0)|0)|0;B=((d>>>2|d<<32-2)^(d>>>13|d<<32-13)^(d>>>22|d<<32-22))+(d&v^d&b^v&b)|0;m=w;w=y;y=g;g=p+M|0;p=b;b=v;v=d;d=M+B|0}r=r+d|0;n=n+v|0;i=i+b|0;s=s+p|0;a=a+g|0;o=o+y|0;f=f+w|0;c=c+m|0;h+=64;l-=64}}h(t);let l,d=t.length%64,v=t.length/536870912|0,b=t.length<<3,p=d<56?56:120,g=t.slice(t.length-d,t.length);g.push(128);for(l=d+1;l<p;l++){g.push(0)}g.push(v>>>24&255);g.push(v>>>16&255);g.push(v>>>8&255);g.push(v>>>0&255);g.push(b>>>24&255);g.push(b>>>16&255);g.push(b>>>8&255);g.push(b>>>0&255);h(g);return[r>>>24&255,r>>>16&255,r>>>8&255,r>>>0&255,n>>>24&255,n>>>16&255,n>>>8&255,n>>>0&255,i>>>24&255,i>>>16&255,i>>>8&255,i>>>0&255,s>>>24&255,s>>>16&255,s>>>8&255,s>>>0&255,a>>>24&255,a>>>16&255,a>>>8&255,a>>>0&255,o>>>24&255,o>>>16&255,o>>>8&255,o>>>0&255,f>>>24&255,f>>>16&255,f>>>8&255,f>>>0&255,c>>>24&255,c>>>16&255,c>>>8&255,c>>>0&255]}function i(t,e,r){t=t.length<=64?t:n(t);const i=64+e.length+4;const s=new Array(i);const a=new Array(64);let o;let f=[];for(o=0;o<64;o++){s[o]=54}for(o=0;o<t.length;o++){s[o]^=t[o]}for(o=0;o<e.length;o++){s[64+o]=e[o]}for(o=i-4;o<i;o++){s[o]=0}for(o=0;o<64;o++)a[o]=92;for(o=0;o<t.length;o++)a[o]^=t[o];function c(){for(let t=i-1;t>=i-4;t--){s[t]++;if(s[t]<=255)return;s[t]=0}}while(r>=32){c();f=f.concat(n(a.concat(n(s))));r-=32}if(r>0){c();f=f.concat(n(a.concat(n(s))).slice(0,r))}return f}function s(t,e,r,n,i){let s;c(t,(2*r-1)*16,i,0,16);for(s=0;s<2*r;s++){f(t,s*16,i,16);o(i,n);c(i,0,t,e+s*16,16)}for(s=0;s<r;s++){c(t,e+s*2*16,t,s*16,16)}for(s=0;s<r;s++){c(t,e+(s*2+1)*16,t,(s+r)*16,16)}}function a(t,e){return t<<e|t>>>32-e}function o(t,e){c(t,0,e,0,16);for(let t=8;t>0;t-=2){e[4]^=a(e[0]+e[12],7);e[8]^=a(e[4]+e[0],9);e[12]^=a(e[8]+e[4],13);e[0]^=a(e[12]+e[8],18);e[9]^=a(e[5]+e[1],7);e[13]^=a(e[9]+e[5],9);e[1]^=a(e[13]+e[9],13);e[5]^=a(e[1]+e[13],18);e[14]^=a(e[10]+e[6],7);e[2]^=a(e[14]+e[10],9);e[6]^=a(e[2]+e[14],13);e[10]^=a(e[6]+e[2],18);e[3]^=a(e[15]+e[11],7);e[7]^=a(e[3]+e[15],9);e[11]^=a(e[7]+e[3],13);e[15]^=a(e[11]+e[7],18);e[1]^=a(e[0]+e[3],7);e[2]^=a(e[1]+e[0],9);e[3]^=a(e[2]+e[1],13);e[0]^=a(e[3]+e[2],18);e[6]^=a(e[5]+e[4],7);e[7]^=a(e[6]+e[5],9);e[4]^=a(e[7]+e[6],13);e[5]^=a(e[4]+e[7],18);e[11]^=a(e[10]+e[9],7);e[8]^=a(e[11]+e[10],9);e[9]^=a(e[8]+e[11],13);e[10]^=a(e[9]+e[8],18);e[12]^=a(e[15]+e[14],7);e[13]^=a(e[12]+e[15],9);e[14]^=a(e[13]+e[12],13);e[15]^=a(e[14]+e[13],18)}for(let r=0;r<16;++r){t[r]+=e[r]}}function f(t,e,r,n){for(let i=0;i<n;i++){r[i]^=t[e+i]}}function c(t,e,r,n,i){while(i--){r[n++]=t[e++]}}function u(t){if(!t||typeof t.length!=="number"){return false}for(let e=0;e<t.length;e++){const r=t[e];if(typeof r!=="number"||r%1||r<0||r>=256){return false}}return true}function h(t,e){if(typeof t!=="number"||t%1){throw new Error("invalid "+e)}return t}function l(t,e,n,a,o,l,d){n=h(n,"N");a=h(a,"r");o=h(o,"p");l=h(l,"dkLen");if(n===0||(n&n-1)!==0){throw new Error("N must be power of 2")}if(n>r/128/a){throw new Error("N too large")}if(a>r/128/o){throw new Error("r too large")}if(!u(t)){throw new Error("password must be an array or buffer")}t=Array.prototype.slice.call(t);if(!u(e)){throw new Error("salt must be an array or buffer")}e=Array.prototype.slice.call(e);let v=i(t,e,o*128*a);const b=new Uint32Array(o*32*a);for(let t=0;t<b.length;t++){const e=t*4;b[t]=(v[e+3]&255)<<24|(v[e+2]&255)<<16|(v[e+1]&255)<<8|(v[e+0]&255)<<0}const p=new Uint32Array(64*a);const g=new Uint32Array(32*a*n);const y=32*a;const w=new Uint32Array(16);const m=new Uint32Array(16);const A=o*n*2;let E=0;let k=null;let M=false;let B=0;let S=0,C;let x;const P=d?parseInt(1e3/a):4294967295;const I=typeof setImmediate!=="undefined"?setImmediate:setTimeout;const T=function(){if(M){return d(new Error("cancelled"),E/A)}let e;switch(B){case 0:x=S*32*a;c(b,x,p,0,y);B=1;C=0;case 1:e=n-C;if(e>P){e=P}for(let t=0;t<e;t++){c(p,0,g,(C+t)*y,y);s(p,y,a,w,m)}C+=e;E+=e;if(d){const t=parseInt(1e3*E/A);if(t!==k){M=d(null,E/A);if(M){break}k=t}}if(C<n){break}C=0;B=2;case 2:e=n-C;if(e>P){e=P}for(let t=0;t<e;t++){const t=(2*a-1)*16;const e=p[t]&n-1;f(g,e*y,p,y);s(p,y,a,w,m)}C+=e;E+=e;if(d){const t=parseInt(1e3*E/A);if(t!==k){M=d(null,E/A);if(M){break}k=t}}if(C<n){break}c(p,0,b,x,y);S++;if(S<o){B=0;break}v=[];for(let t=0;t<b.length;t++){v.push(b[t]>>0&255);v.push(b[t]>>8&255);v.push(b[t]>>16&255);v.push(b[t]>>24&255)}const r=i(t,v,l);if(d){d(null,1,r)}return r}if(d){I(T)}};if(!d){while(true){const t=T();if(t!=undefined){return t}}}T()}const d={scrypt:function(t,e,r,n,i,s,a){return new Promise((function(o,f){let c=0;if(a){a(0)}l(t,e,r,n,i,s,(function(t,e,r){if(t){f(t)}else if(r){if(a&&c!==1){a(1)}o(new Uint8Array(r))}else if(a&&e!==c){c=e;return a(e)}}))}))},syncScrypt:function(t,e,r,n,i,s){return new Uint8Array(l(t,e,r,n,i,s))}};{t.exports=d}})()}));var sh=undefined&&undefined.__awaiter||function(t,e,r,n){function i(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,s){function a(t){try{f(n.next(t))}catch(t){s(t)}}function o(t){try{f(n["throw"](t))}catch(t){s(t)}}function f(t){t.done?r(t.value):i(t.value).then(a,o)}f((n=n.apply(t,e||[])).next())}))};const ah=new pt(Wu);function oh(t){return t!=null&&t.mnemonic&&t.mnemonic.phrase}class fh extends Se{isKeystoreAccount(t){return!!(t&&t._isKeystoreAccount)}}function ch(t,e,r){const n=_u(t,"crypto/cipher");if(n==="aes-128-ctr"){const n=qu(_u(t,"crypto/cipherparams/iv"));const i=new zu.Counter(n);const s=new zu.ModeOfOperation.ctr(e,i);return Bt(s.decrypt(r))}return null}function uh(t,e){const r=qu(_u(t,"crypto/ciphertext"));const n=Tt(ar(St([e.slice(16,32),r]))).substring(2);if(n!==_u(t,"crypto/mac").toLowerCase()){throw new Error("invalid password")}const i=ch(t,e.slice(0,16),r);if(!i){ah.throwError("unsupported cipher",pt.errors.UNSUPPORTED_OPERATION,{operation:"decrypt"})}const s=e.slice(32,64);const a=dc(i);if(t.address){let e=t.address.toLowerCase();if(e.substring(0,2)!=="0x"){e="0x"+e}if(Sr(e)!==a){throw new Error("address mismatch")}}const o={_isKeystoreAccount:true,address:a,privateKey:Tt(i)};if(_u(t,"x-ethers/version")==="0.1"){const e=qu(_u(t,"x-ethers/mnemonicCiphertext"));const r=qu(_u(t,"x-ethers/mnemonicCounter"));const n=new zu.Counter(r);const i=new zu.ModeOfOperation.ctr(s,n);const a=_u(t,"x-ethers/path")||Pu;const f=_u(t,"x-ethers/locale")||"en";const c=Bt(i.decrypt(e));try{const t=Du(c,f);const e=Iu.fromMnemonic(t,null,f).derivePath(a);if(e.privateKey!=o.privateKey){throw new Error("mnemonic mismatch")}o.mnemonic=e.mnemonic}catch(t){if(t.code!==pt.errors.INVALID_ARGUMENT||t.argument!=="wordlist"){throw t}}}return new fh(o)}function hh(t,e,r,n,i){return Bt(fu(t,e,r,n,i))}function lh(t,e,r,n,i){return Promise.resolve(hh(t,e,r,n,i))}function dh(t,e,r,n,i){const s=Yu(e);const a=_u(t,"crypto/kdf");if(a&&typeof a==="string"){const e=function(t,e){return ah.throwArgumentError("invalid key-derivation function parameters",t,e)};if(a.toLowerCase()==="scrypt"){const r=qu(_u(t,"crypto/kdfparams/salt"));const o=parseInt(_u(t,"crypto/kdfparams/n"));const f=parseInt(_u(t,"crypto/kdfparams/r"));const c=parseInt(_u(t,"crypto/kdfparams/p"));if(!o||!f||!c){e("kdf",a)}if((o&o-1)!==0){e("N",o)}const u=parseInt(_u(t,"crypto/kdfparams/dklen"));if(u!==32){e("dklen",u)}return n(s,r,o,f,c,64,i)}else if(a.toLowerCase()==="pbkdf2"){const n=qu(_u(t,"crypto/kdfparams/salt"));let i=null;const a=_u(t,"crypto/kdfparams/prf");if(a==="hmac-sha256"){i="sha256"}else if(a==="hmac-sha512"){i="sha512"}else{e("prf",a)}const o=parseInt(_u(t,"crypto/kdfparams/c"));const f=parseInt(_u(t,"crypto/kdfparams/dklen"));if(f!==32){e("dklen",f)}return r(s,n,o,f,i)}}return ah.throwArgumentError("unsupported key-derivation function","kdf",a)}function vh(t,e){const r=JSON.parse(t);const n=dh(r,e,hh,ih.syncScrypt);return uh(r,n)}function bh(t,e,r){return sh(this,void 0,void 0,(function*(){const n=JSON.parse(t);const i=yield dh(n,e,lh,ih.scrypt,r);return uh(n,i)}))}function ph(t,e,r,n){try{if(Sr(t.address)!==dc(t.privateKey)){throw new Error("address/privateKey mismatch")}if(oh(t)){const e=t.mnemonic;const r=Iu.fromMnemonic(e.phrase,null,e.locale).derivePath(e.path||Pu);if(r.privateKey!=t.privateKey){throw new Error("mnemonic mismatch")}}}catch(t){return Promise.reject(t)}if(typeof r==="function"&&!n){n=r;r={}}if(!r){r={}}const i=Bt(t.privateKey);const s=Yu(e);let a=null;let o=null;let f=null;if(oh(t)){const e=t.mnemonic;a=Bt(Ou(e.phrase,e.locale||"en"));o=e.path||Pu;f=e.locale||"en"}let c=r.client;if(!c){c="ethers.js"}let u=null;if(r.salt){u=Bt(r.salt)}else{u=Gu(32)}let h=null;if(r.iv){h=Bt(r.iv);if(h.length!==16){throw new Error("invalid iv")}}else{h=Gu(16)}let l=null;if(r.uuid){l=Bt(r.uuid);if(l.length!==16){throw new Error("invalid uuid")}}else{l=Gu(16)}let d=1<<17,v=8,b=1;if(r.scrypt){if(r.scrypt.N){d=r.scrypt.N}if(r.scrypt.r){v=r.scrypt.r}if(r.scrypt.p){b=r.scrypt.p}}return ih.scrypt(s,u,d,v,b,64,n).then((e=>{e=Bt(e);const r=e.slice(0,16);const n=e.slice(16,32);const s=e.slice(32,64);const p=new zu.Counter(h);const g=new zu.ModeOfOperation.ctr(r,p);const y=Bt(g.encrypt(i));const w=ar(St([n,y]));const m={address:t.address.substring(2).toLowerCase(),id:Zu(l),version:3,crypto:{cipher:"aes-128-ctr",cipherparams:{iv:Tt(h).substring(2)},ciphertext:Tt(y).substring(2),kdf:"scrypt",kdfparams:{salt:Tt(u).substring(2),n:d,dklen:32,p:b,r:v},mac:w.substring(2)}};if(a){const t=Gu(16);const e=new zu.Counter(t);const r=new zu.ModeOfOperation.ctr(s,e);const n=Bt(r.encrypt(a));const i=new Date;const u=i.getUTCFullYear()+"-"+Vu(i.getUTCMonth()+1,2)+"-"+Vu(i.getUTCDate(),2)+"T"+Vu(i.getUTCHours(),2)+"-"+Vu(i.getUTCMinutes(),2)+"-"+Vu(i.getUTCSeconds(),2)+".0Z";m["x-ethers"]={client:c,gethFilename:"UTC--"+u+"--"+m.address,mnemonicCounter:Tt(t).substring(2),mnemonicCiphertext:Tt(n).substring(2),path:o,locale:f,version:"0.1"}}return JSON.stringify(m)}))}function gh(t,e,r){if(eh(t)){if(r){r(0)}const n=th(t,e);if(r){r(1)}return Promise.resolve(n)}if(rh(t)){return bh(t,e,r)}return Promise.reject(new Error("invalid JSON wallet"))}function yh(t,e){if(eh(t)){return th(t,e)}if(rh(t)){return vh(t,e)}throw new Error("invalid JSON wallet")}const wh=Object.freeze({__proto__:null,decryptCrowdsale:th,decryptKeystore:bh,decryptKeystoreSync:vh,encryptKeystore:ph,isCrowdsaleWallet:eh,isKeystoreWallet:rh,getJsonWalletAddress:nh,decryptJsonWallet:gh,decryptJsonWalletSync:yh});const mh="wallet/5.7.0";var Ah=undefined&&undefined.__awaiter||function(t,e,r,n){function i(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,s){function a(t){try{f(n.next(t))}catch(t){s(t)}}function o(t){try{f(n["throw"](t))}catch(t){s(t)}}function f(t){t.done?r(t.value):i(t.value).then(a,o)}f((n=n.apply(t,e||[])).next())}))};const Eh=new pt(mh);function kh(t){return t!=null&&Pt(t.privateKey,32)&&t.address!=null}function Mh(t){const e=t.mnemonic;return e&&e.phrase}class Bh extends ws{constructor(t,e){super();if(kh(t)){const e=new rc(t.privateKey);ge(this,"_signingKey",(()=>e));ge(this,"address",dc(this.publicKey));if(this.address!==Sr(t.address)){Eh.throwArgumentError("privateKey/address mismatch","privateKey","[REDACTED]")}if(Mh(t)){const e=t.mnemonic;ge(this,"_mnemonic",(()=>({phrase:e.phrase,path:e.path||Pu,locale:e.locale||"en"})));const r=this.mnemonic;const n=Iu.fromMnemonic(r.phrase,null,r.locale).derivePath(r.path);if(dc(n.privateKey)!==this.address){Eh.throwArgumentError("mnemonic/address mismatch","privateKey","[REDACTED]")}}else{ge(this,"_mnemonic",(()=>null))}}else{if(rc.isSigningKey(t)){if(t.curve!=="secp256k1"){Eh.throwArgumentError("unsupported curve; must be secp256k1","privateKey","[REDACTED]")}ge(this,"_signingKey",(()=>t))}else{if(typeof t==="string"){if(t.match(/^[0-9a-f]*$/i)&&t.length===64){t="0x"+t}}const e=new rc(t);ge(this,"_signingKey",(()=>e))}ge(this,"_mnemonic",(()=>null));ge(this,"address",dc(this.publicKey))}if(e&&!ds.isProvider(e)){Eh.throwArgumentError("invalid provider","provider",e)}ge(this,"provider",e||null)}get mnemonic(){return this._mnemonic()}get privateKey(){return this._signingKey().privateKey}get publicKey(){return this._signingKey().publicKey}getAddress(){return Promise.resolve(this.address)}connect(t){return new Bh(this,t)}signTransaction(t){return we(t).then((e=>{if(e.from!=null){if(Sr(e.from)!==this.address){Eh.throwArgumentError("transaction from address mismatch","transaction.from",t.from)}delete e.from}const r=this._signingKey().signDigest(ar(Ec(e)));return Ec(e,r)}))}signMessage(t){return Ah(this,void 0,void 0,(function*(){return Lt(this._signingKey().signDigest(Ui(t)))}))}_signTypedData(t,e,r){return Ah(this,void 0,void 0,(function*(){const n=yield Xi.resolveNames(t,e,r,(t=>{if(this.provider==null){Eh.throwError("cannot resolve ENS names without a provider",pt.errors.UNSUPPORTED_OPERATION,{operation:"resolveName",value:t})}return this.provider.resolveName(t)}));return Lt(this._signingKey().signDigest(Xi.hash(n.domain,e,n.value)))}))}encrypt(t,e,r){if(typeof e==="function"&&!r){r=e;e={}}if(r&&typeof r!=="function"){throw new Error("invalid callback")}if(!e){e={}}return ph(this,t,e,r)}static createRandom(t){let e=Gu(16);if(!t){t={}}if(t.extraEntropy){e=Bt(Dt(ar(St([e,t.extraEntropy])),0,16))}const r=Du(e,t.locale);return Bh.fromMnemonic(r,t.path,t.locale)}static fromEncryptedJson(t,e,r){return gh(t,e,r).then((t=>new Bh(t)))}static fromEncryptedJsonSync(t,e){return new Bh(yh(t,e))}static fromMnemonic(t,e,r){if(!e){e=Pu}return new Bh(Iu.fromMnemonic(t,null,r).derivePath(e))}}function Sh(t,e){return vc(Ui(t),e)}function Ch(t,e,r,n){return vc(Xi.hash(t,e,r),n)}const xh=Object.freeze({__proto__:null,Wallet:Bh,verifyMessage:Sh,verifyTypedData:Ch});const Ph="networks/5.7.1";const Ih=new pt(Ph);function Th(t){return t&&typeof t.renetwork==="function"}function Oh(t){const e=function(e,r){if(r==null){r={}}const n=[];if(e.InfuraProvider&&r.infura!=="-"){try{n.push(new e.InfuraProvider(t,r.infura))}catch(t){}}if(e.EtherscanProvider&&r.etherscan!=="-"){try{n.push(new e.EtherscanProvider(t,r.etherscan))}catch(t){}}if(e.AlchemyProvider&&r.alchemy!=="-"){try{n.push(new e.AlchemyProvider(t,r.alchemy))}catch(t){}}if(e.PocketProvider&&r.pocket!=="-"){const i=["goerli","ropsten","rinkeby","sepolia"];try{const s=new e.PocketProvider(t,r.pocket);if(s.network&&i.indexOf(s.network.name)===-1){n.push(s)}}catch(t){}}if(e.CloudflareProvider&&r.cloudflare!=="-"){try{n.push(new e.CloudflareProvider(t))}catch(t){}}if(e.AnkrProvider&&r.ankr!=="-"){try{const i=["ropsten"];const s=new e.AnkrProvider(t,r.ankr);if(s.network&&i.indexOf(s.network.name)===-1){n.push(s)}}catch(t){}}if(n.length===0){return null}if(e.FallbackProvider){let i=1;if(r.quorum!=null){i=r.quorum}else if(t==="homestead"){i=2}return new e.FallbackProvider(n,i)}return n[0]};e.renetwork=function(t){return Oh(t)};return e}function Dh(t,e){const r=function(r,n){if(r.JsonRpcProvider){return new r.JsonRpcProvider(t,e)}return null};r.renetwork=function(e){return Dh(t,e)};return r}const Nh={chainId:1,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"homestead",_defaultProvider:Oh("homestead")};const Uh={chainId:3,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"ropsten",_defaultProvider:Oh("ropsten")};const jh={chainId:63,name:"classicMordor",_defaultProvider:Dh("https://www.ethercluster.com/mordor","classicMordor")};const Rh={unspecified:{chainId:0,name:"unspecified"},homestead:Nh,mainnet:Nh,morden:{chainId:2,name:"morden"},ropsten:Uh,testnet:Uh,rinkeby:{chainId:4,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"rinkeby",_defaultProvider:Oh("rinkeby")},kovan:{chainId:42,name:"kovan",_defaultProvider:Oh("kovan")},goerli:{chainId:5,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"goerli",_defaultProvider:Oh("goerli")},kintsugi:{chainId:1337702,name:"kintsugi"},sepolia:{chainId:11155111,name:"sepolia",_defaultProvider:Oh("sepolia")},classic:{chainId:61,name:"classic",_defaultProvider:Dh("https://www.ethercluster.com/etc","classic")},classicMorden:{chainId:62,name:"classicMorden"},classicMordor:jh,classicTestnet:jh,classicKotti:{chainId:6,name:"classicKotti",_defaultProvider:Dh("https://www.ethercluster.com/kotti","classicKotti")},xdai:{chainId:100,name:"xdai"},matic:{chainId:137,name:"matic",_defaultProvider:Oh("matic")},maticmum:{chainId:80001,name:"maticmum"},optimism:{chainId:10,name:"optimism",_defaultProvider:Oh("optimism")},"optimism-kovan":{chainId:69,name:"optimism-kovan"},"optimism-goerli":{chainId:420,name:"optimism-goerli"},arbitrum:{chainId:42161,name:"arbitrum"},"arbitrum-rinkeby":{chainId:421611,name:"arbitrum-rinkeby"},"arbitrum-goerli":{chainId:421613,name:"arbitrum-goerli"},bnb:{chainId:56,name:"bnb"},bnbt:{chainId:97,name:"bnbt"}};function Fh(t){if(t==null){return null}if(typeof t==="number"){for(const e in Rh){const r=Rh[e];if(r.chainId===t){return{name:r.name,chainId:r.chainId,ensAddress:r.ensAddress||null,_defaultProvider:r._defaultProvider||null}}}return{chainId:t,name:"unknown"}}if(typeof t==="string"){const e=Rh[t];if(e==null){return null}return{name:e.name,chainId:e.chainId,ensAddress:e.ensAddress,_defaultProvider:e._defaultProvider||null}}const e=Rh[t.name];if(!e){if(typeof t.chainId!=="number"){Ih.throwArgumentError("invalid network chainId","network",t)}return t}if(t.chainId!==0&&t.chainId!==e.chainId){Ih.throwArgumentError("network chainId mismatch","network",t)}let r=t._defaultProvider||null;if(r==null&&e._defaultProvider){if(Th(e._defaultProvider)){r=e._defaultProvider.renetwork(t)}else{r=e._defaultProvider}}return{name:t.name,chainId:e.chainId,ensAddress:t.ensAddress||e.ensAddress||null,_defaultProvider:r}}const Lh="web/5.7.1";var Qh=undefined&&undefined.__awaiter||function(t,e,r,n){function i(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,s){function a(t){try{f(n.next(t))}catch(t){s(t)}}function o(t){try{f(n["throw"](t))}catch(t){s(t)}}function f(t){t.done?r(t.value):i(t.value).then(a,o)}f((n=n.apply(t,e||[])).next())}))};function Hh(t,e){return Qh(this,void 0,void 0,(function*(){if(e==null){e={}}const r={method:e.method||"GET",headers:e.headers||{},body:e.body||undefined};if(e.skipFetchSetup!==true){r.mode="cors";r.cache="no-cache";r.credentials="same-origin";r.redirect="follow";r.referrer="client"}if(e.fetchOptions!=null){const t=e.fetchOptions;if(t.mode){r.mode=t.mode}if(t.cache){r.cache=t.cache}if(t.credentials){r.credentials=t.credentials}if(t.redirect){r.redirect=t.redirect}if(t.referrer){r.referrer=t.referrer}}const n=yield fetch(t,r);const i=yield n.arrayBuffer();const s={};if(n.headers.forEach){n.headers.forEach(((t,e)=>{s[e.toLowerCase()]=t}))}else{n.headers.keys().forEach((t=>{s[t.toLowerCase()]=n.headers.get(t)}))}return{headers:s,statusCode:n.status,statusMessage:n.statusText,body:Bt(new Uint8Array(i))}}))}var Gh=undefined&&undefined.__awaiter||function(t,e,r,n){function i(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,s){function a(t){try{f(n.next(t))}catch(t){s(t)}}function o(t){try{f(n["throw"](t))}catch(t){s(t)}}function f(t){t.done?r(t.value):i(t.value).then(a,o)}f((n=n.apply(t,e||[])).next())}))};const Kh=new pt(Lh);function Jh(t){return new Promise((e=>{setTimeout(e,t)}))}function zh(t,e){if(t==null){return null}if(typeof t==="string"){return t}if(Et(t)){if(e&&(e.split("/")[0]==="text"||e.split(";")[0].trim()==="application/json")){try{return pn(t)}catch(t){}}return Tt(t)}return t}function Wh(t){return ln(t.replace(/%([0-9a-f][0-9a-f])/gi,((t,e)=>String.fromCharCode(parseInt(e,16)))))}function qh(t,e,r){const n=typeof t==="object"&&t.throttleLimit!=null?t.throttleLimit:12;Kh.assertArgument(n>0&&n%1===0,"invalid connection throttle limit","connection.throttleLimit",n);const i=typeof t==="object"?t.throttleCallback:null;const s=typeof t==="object"&&typeof t.throttleSlotInterval==="number"?t.throttleSlotInterval:100;Kh.assertArgument(s>0&&s%1===0,"invalid connection throttle slot interval","connection.throttleSlotInterval",s);const a=typeof t==="object"?!!t.errorPassThrough:false;const o={};let f=null;const c={method:"GET"};let u=false;let h=2*60*1e3;if(typeof t==="string"){f=t}else if(typeof t==="object"){if(t==null||t.url==null){Kh.throwArgumentError("missing URL","connection.url",t)}f=t.url;if(typeof t.timeout==="number"&&t.timeout>0){h=t.timeout}if(t.headers){for(const e in t.headers){o[e.toLowerCase()]={key:e,value:String(t.headers[e])};if(["if-none-match","if-modified-since"].indexOf(e.toLowerCase())>=0){u=true}}}c.allowGzip=!!t.allowGzip;if(t.user!=null&&t.password!=null){if(f.substring(0,6)!=="https:"&&t.allowInsecureAuthentication!==true){Kh.throwError("basic authentication requires a secure https url",pt.errors.INVALID_ARGUMENT,{argument:"url",url:f,user:t.user,password:"[REDACTED]"})}const e=t.user+":"+t.password;o["authorization"]={key:"Authorization",value:"Basic "+qn(ln(e))}}if(t.skipFetchSetup!=null){c.skipFetchSetup=!!t.skipFetchSetup}if(t.fetchOptions!=null){c.fetchOptions=Ae(t.fetchOptions)}}const l=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i");const d=f?f.match(l):null;if(d){try{const t={statusCode:200,statusMessage:"OK",headers:{"content-type":d[1]||"text/plain"},body:d[2]?Wn(d[3]):Wh(d[3])};let e=t.body;if(r){e=r(t.body,t)}return Promise.resolve(e)}catch(t){Kh.throwError("processing response error",pt.errors.SERVER_ERROR,{body:zh(d[1],d[2]),error:t,requestBody:null,requestMethod:"GET",url:f})}}if(e){c.method="POST";c.body=e;if(o["content-type"]==null){o["content-type"]={key:"Content-Type",value:"application/octet-stream"}}if(o["content-length"]==null){o["content-length"]={key:"Content-Length",value:String(e.length)}}}const v={};Object.keys(o).forEach((t=>{const e=o[t];v[e.key]=e.value}));c.headers=v;const b=function(){let t=null;const e=new Promise((function(e,r){if(h){t=setTimeout((()=>{if(t==null){return}t=null;r(Kh.makeError("timeout",pt.errors.TIMEOUT,{requestBody:zh(c.body,v["content-type"]),requestMethod:c.method,timeout:h,url:f}))}),h)}}));const r=function(){if(t==null){return}clearTimeout(t);t=null};return{promise:e,cancel:r}}();const p=function(){return Gh(this,void 0,void 0,(function*(){for(let t=0;t<n;t++){let e=null;try{e=yield Hh(f,c);if(t<n){if(e.statusCode===301||e.statusCode===302){const t=e.headers.location||"";if(c.method==="GET"&&t.match(/^https:/)){f=e.headers.location;continue}}else if(e.statusCode===429){let r=true;if(i){r=yield i(t,f)}if(r){let r=0;const n=e.headers["retry-after"];if(typeof n==="string"&&n.match(/^[1-9][0-9]*$/)){r=parseInt(n)*1e3}else{r=s*parseInt(String(Math.random()*Math.pow(2,t)))}yield Jh(r);continue}}}}catch(t){e=t.response;if(e==null){b.cancel();Kh.throwError("missing response",pt.errors.SERVER_ERROR,{requestBody:zh(c.body,v["content-type"]),requestMethod:c.method,serverError:t,url:f})}}let o=e.body;if(u&&e.statusCode===304){o=null}else if(!a&&(e.statusCode<200||e.statusCode>=300)){b.cancel();Kh.throwError("bad response",pt.errors.SERVER_ERROR,{status:e.statusCode,headers:e.headers,body:zh(o,e.headers?e.headers["content-type"]:null),requestBody:zh(c.body,v["content-type"]),requestMethod:c.method,url:f})}if(r){try{const t=yield r(o,e);b.cancel();return t}catch(r){if(r.throttleRetry&&t<n){let e=true;if(i){e=yield i(t,f)}if(e){const e=s*parseInt(String(Math.random()*Math.pow(2,t)));yield Jh(e);continue}}b.cancel();Kh.throwError("processing response error",pt.errors.SERVER_ERROR,{body:zh(o,e.headers?e.headers["content-type"]:null),error:r,requestBody:zh(c.body,v["content-type"]),requestMethod:c.method,url:f})}}b.cancel();return o}return Kh.throwError("failed response",pt.errors.SERVER_ERROR,{requestBody:zh(c.body,v["content-type"]),requestMethod:c.method,url:f})}))}();return Promise.race([b.promise,p])}function Vh(t,e,r){let n=(t,e)=>{let n=null;if(t!=null){try{n=JSON.parse(pn(t))}catch(e){Kh.throwError("invalid JSON",pt.errors.SERVER_ERROR,{body:t,error:e})}}if(r){n=r(n,e)}return n};let i=null;if(e!=null){i=ln(e);const r=typeof t==="string"?{url:t}:Ae(t);if(r.headers){const t=Object.keys(r.headers).filter((t=>t.toLowerCase()==="content-type")).length!==0;if(!t){r.headers=Ae(r.headers);r.headers["content-type"]="application/json"}}else{r.headers={"content-type":"application/json"}}t=r}return qh(t,i,n)}function Yh(t,e){if(!e){e={}}e=Ae(e);if(e.floor==null){e.floor=0}if(e.ceiling==null){e.ceiling=1e4}if(e.interval==null){e.interval=250}return new Promise((function(r,n){let i=null;let s=false;const a=()=>{if(s){return false}s=true;if(i){clearTimeout(i)}return true};if(e.timeout){i=setTimeout((()=>{if(a()){n(new Error("timeout"))}}),e.timeout)}const o=e.retryLimit;let f=0;function c(){return t().then((function(t){if(t!==undefined){if(a()){r(t)}}else if(e.oncePoll){e.oncePoll.once("poll",c)}else if(e.onceBlock){e.onceBlock.once("block",c)}else if(!s){f++;if(f>o){if(a()){n(new Error("retry limit reached"))}return}let t=e.interval*parseInt(String(Math.random()*Math.pow(2,f)));if(t<e.floor){t=e.floor}if(t>e.ceiling){t=e.ceiling}setTimeout(c,t)}return null}),(function(t){if(a()){n(t)}}))}c()}))}const _h=Object.freeze({__proto__:null,_fetchData:qh,fetchJson:Vh,poll:Yh});var Zh="qpzry9x8gf2tvdw0s3jn54khce6mua7l";var Xh={};for(var $h=0;$h<Zh.length;$h++){var tl=Zh.charAt($h);if(Xh[tl]!==undefined)throw new TypeError(tl+" is ambiguous");Xh[tl]=$h}function el(t){var e=t>>25;return(t&33554431)<<5^-(e>>0&1)&996825010^-(e>>1&1)&642813549^-(e>>2&1)&513874426^-(e>>3&1)&1027748829^-(e>>4&1)&705979059}function rl(t){var e=1;for(var r=0;r<t.length;++r){var n=t.charCodeAt(r);if(n<33||n>126)return"Invalid prefix ("+t+")";e=el(e)^n>>5}e=el(e);for(r=0;r<t.length;++r){var i=t.charCodeAt(r);e=el(e)^i&31}return e}function nl(t,e,r){r=r||90;if(t.length+7+e.length>r)throw new TypeError("Exceeds length limit");t=t.toLowerCase();var n=rl(t);if(typeof n==="string")throw new Error(n);var i=t+"1";for(var s=0;s<e.length;++s){var a=e[s];if(a>>5!==0)throw new Error("Non 5-bit word");n=el(n)^a;i+=Zh.charAt(a)}for(s=0;s<6;++s){n=el(n)}n^=1;for(s=0;s<6;++s){var o=n>>(5-s)*5&31;i+=Zh.charAt(o)}return i}function il(t,e){e=e||90;if(t.length<8)return t+" too short";if(t.length>e)return"Exceeds length limit";var r=t.toLowerCase();var n=t.toUpperCase();if(t!==r&&t!==n)return"Mixed-case string "+t;t=r;var i=t.lastIndexOf("1");if(i===-1)return"No separator character for "+t;if(i===0)return"Missing prefix for "+t;var s=t.slice(0,i);var a=t.slice(i+1);if(a.length<6)return"Data too short";var o=rl(s);if(typeof o==="string")return o;var f=[];for(var c=0;c<a.length;++c){var u=a.charAt(c);var h=Xh[u];if(h===undefined)return"Unknown character "+u;o=el(o)^h;if(c+6>=a.length)continue;f.push(h)}if(o!==1)return"Invalid checksum for "+t;return{prefix:s,words:f}}function sl(){var t=il.apply(null,arguments);if(typeof t==="object")return t}function al(t){var e=il.apply(null,arguments);if(typeof e==="object")return e;throw new Error(e)}function ol(t,e,r,n){var i=0;var s=0;var a=(1<<r)-1;var o=[];for(var f=0;f<t.length;++f){i=i<<e|t[f];s+=e;while(s>=r){s-=r;o.push(i>>s&a)}}if(n){if(s>0){o.push(i<<r-s&a)}}else{if(s>=e)return"Excess padding";if(i<<r-s&a)return"Non-zero padding"}return o}function fl(t){var e=ol(t,8,5,true);if(Array.isArray(e))return e}function cl(t){var e=ol(t,8,5,true);if(Array.isArray(e))return e;throw new Error(e)}function ul(t){var e=ol(t,5,8,false);if(Array.isArray(e))return e}function hl(t){var e=ol(t,5,8,false);if(Array.isArray(e))return e;throw new Error(e)}var ll={decodeUnsafe:sl,decode:al,encode:nl,toWordsUnsafe:fl,toWords:cl,fromWordsUnsafe:ul,fromWords:hl};const dl="providers/5.7.2";const vl=new pt(dl);class bl{constructor(){this.formats=this.getDefaultFormats()}getDefaultFormats(){const t={};const e=this.address.bind(this);const r=this.bigNumber.bind(this);const n=this.blockTag.bind(this);const i=this.data.bind(this);const s=this.hash.bind(this);const a=this.hex.bind(this);const o=this.number.bind(this);const f=this.type.bind(this);const c=t=>this.data(t,true);t.transaction={hash:s,type:f,accessList:bl.allowNull(this.accessList.bind(this),null),blockHash:bl.allowNull(s,null),blockNumber:bl.allowNull(o,null),transactionIndex:bl.allowNull(o,null),confirmations:bl.allowNull(o,null),from:e,gasPrice:bl.allowNull(r),maxPriorityFeePerGas:bl.allowNull(r),maxFeePerGas:bl.allowNull(r),gasLimit:r,to:bl.allowNull(e,null),value:r,nonce:o,data:i,r:bl.allowNull(this.uint256),s:bl.allowNull(this.uint256),v:bl.allowNull(o),creates:bl.allowNull(e,null),raw:bl.allowNull(i)};t.transactionRequest={from:bl.allowNull(e),nonce:bl.allowNull(o),gasLimit:bl.allowNull(r),gasPrice:bl.allowNull(r),maxPriorityFeePerGas:bl.allowNull(r),maxFeePerGas:bl.allowNull(r),to:bl.allowNull(e),value:bl.allowNull(r),data:bl.allowNull(c),type:bl.allowNull(o),accessList:bl.allowNull(this.accessList.bind(this),null)};t.receiptLog={transactionIndex:o,blockNumber:o,transactionHash:s,address:e,topics:bl.arrayOf(s),data:i,logIndex:o,blockHash:s};t.receipt={to:bl.allowNull(this.address,null),from:bl.allowNull(this.address,null),contractAddress:bl.allowNull(e,null),transactionIndex:o,root:bl.allowNull(a),gasUsed:r,logsBloom:bl.allowNull(i),blockHash:s,transactionHash:s,logs:bl.arrayOf(this.receiptLog.bind(this)),blockNumber:o,confirmations:bl.allowNull(o,null),cumulativeGasUsed:r,effectiveGasPrice:bl.allowNull(r),status:bl.allowNull(o),type:f};t.block={hash:bl.allowNull(s),parentHash:s,number:o,timestamp:o,nonce:bl.allowNull(a),difficulty:this.difficulty.bind(this),gasLimit:r,gasUsed:r,miner:bl.allowNull(e),extraData:i,transactions:bl.allowNull(bl.arrayOf(s)),baseFeePerGas:bl.allowNull(r)};t.blockWithTransactions=Ae(t.block);t.blockWithTransactions.transactions=bl.allowNull(bl.arrayOf(this.transactionResponse.bind(this)));t.filter={fromBlock:bl.allowNull(n,undefined),toBlock:bl.allowNull(n,undefined),blockHash:bl.allowNull(s,undefined),address:bl.allowNull(e,undefined),topics:bl.allowNull(this.topics.bind(this),undefined)};t.filterLog={blockNumber:bl.allowNull(o),blockHash:bl.allowNull(s),transactionIndex:o,removed:bl.allowNull(this.boolean.bind(this)),address:e,data:bl.allowFalsish(i,"0x"),topics:bl.arrayOf(s),transactionHash:s,logIndex:o};return t}accessList(t){return gc(t||[])}number(t){if(t==="0x"){return 0}return Vt.from(t).toNumber()}type(t){if(t==="0x"||t==null){return 0}return Vt.from(t).toNumber()}bigNumber(t){return Vt.from(t)}boolean(t){if(typeof t==="boolean"){return t}if(typeof t==="string"){t=t.toLowerCase();if(t==="true"){return true}if(t==="false"){return false}}throw new Error("invalid boolean - "+t)}hex(t,e){if(typeof t==="string"){if(!e&&t.substring(0,2)!=="0x"){t="0x"+t}if(Pt(t)){return t.toLowerCase()}}return vl.throwArgumentError("invalid hash","value",t)}data(t,e){const r=this.hex(t,e);if(r.length%2!==0){throw new Error("invalid data; odd-length - "+t)}return r}address(t){return Sr(t)}callAddress(t){if(!Pt(t,32)){return null}const e=Sr(Dt(t,12));return e===Kr?null:e}contractAddress(t){return Pr(t)}blockTag(t){if(t==null){return"latest"}if(t==="earliest"){return"0x0"}switch(t){case"earliest":return"0x0";case"latest":case"pending":case"safe":case"finalized":return t}if(typeof t==="number"||Pt(t)){return Ut(t)}throw new Error("invalid blockTag")}hash(t,e){const r=this.hex(t,e);if(Ot(r)!==32){return vl.throwArgumentError("invalid hash","value",t)}return r}difficulty(t){if(t==null){return null}const e=Vt.from(t);try{return e.toNumber()}catch(t){}return null}uint256(t){if(!Pt(t)){throw new Error("invalid uint256")}return Rt(t,32)}_block(t,e){if(t.author!=null&&t.miner==null){t.miner=t.author}const r=t._difficulty!=null?t._difficulty:t.difficulty;const n=bl.check(e,t);n._difficulty=r==null?null:Vt.from(r);return n}block(t){return this._block(t,this.formats.block)}blockWithTransactions(t){return this._block(t,this.formats.blockWithTransactions)}transactionRequest(t){return bl.check(this.formats.transactionRequest,t)}transactionResponse(t){if(t.gas!=null&&t.gasLimit==null){t.gasLimit=t.gas}if(t.to&&Vt.from(t.to).isZero()){t.to="0x0000000000000000000000000000000000000000"}if(t.input!=null&&t.data==null){t.data=t.input}if(t.to==null&&t.creates==null){t.creates=this.contractAddress(t)}if((t.type===1||t.type===2)&&t.accessList==null){t.accessList=[]}const e=bl.check(this.formats.transaction,t);if(t.chainId!=null){let r=t.chainId;if(Pt(r)){r=Vt.from(r).toNumber()}e.chainId=r}else{let r=t.networkId;if(r==null&&e.v==null){r=t.chainId}if(Pt(r)){r=Vt.from(r).toNumber()}if(typeof r!=="number"&&e.v!=null){r=(e.v-35)/2;if(r<0){r=0}r=parseInt(r)}if(typeof r!=="number"){r=0}e.chainId=r}if(e.blockHash&&e.blockHash.replace(/0/g,"")==="x"){e.blockHash=null}return e}transaction(t){return Cc(t)}receiptLog(t){return bl.check(this.formats.receiptLog,t)}receipt(t){const e=bl.check(this.formats.receipt,t);if(e.root!=null){if(e.root.length<=4){const t=Vt.from(e.root).toNumber();if(t===0||t===1){if(e.status!=null&&e.status!==t){vl.throwArgumentError("alt-root-status/status mismatch","value",{root:e.root,status:e.status})}e.status=t;delete e.root}else{vl.throwArgumentError("invalid alt-root-status","value.root",e.root)}}else if(e.root.length!==66){vl.throwArgumentError("invalid root hash","value.root",e.root)}}if(e.status!=null){e.byzantium=true}return e}topics(t){if(Array.isArray(t)){return t.map((t=>this.topics(t)))}else if(t!=null){return this.hash(t,true)}return null}filter(t){return bl.check(this.formats.filter,t)}filterLog(t){return bl.check(this.formats.filterLog,t)}static check(t,e){const r={};for(const n in t){try{const i=t[n](e[n]);if(i!==undefined){r[n]=i}}catch(t){t.checkKey=n;t.checkValue=e[n];throw t}}return r}static allowNull(t,e){return function(r){if(r==null){return e}return t(r)}}static allowFalsish(t,e){return function(r){if(!r){return e}return t(r)}}static arrayOf(t){return function(e){if(!Array.isArray(e)){throw new Error("not an array")}const r=[];e.forEach((function(e){r.push(t(e))}));return r}}}function pl(t){return t&&typeof t.isCommunityResource==="function"}function gl(t){return pl(t)&&t.isCommunityResource()}let yl=false;function wl(){if(yl){return}yl=true;console.log("========= NOTICE =========");console.log("Request-Rate Exceeded  (this message will not be repeated)");console.log("");console.log("The default API keys for each service are provided as a highly-throttled,");console.log("community resource for low-traffic projects and early prototyping.");console.log("");console.log("While your application will continue to function, we highly recommended");console.log("signing up for your own API keys to improve performance, increase your");console.log("request rate/limit and enable other perks, such as metrics and advanced APIs.");console.log("");console.log("For more details: https://docs.ethers.io/api-keys/");console.log("==========================")}var ml=undefined&&undefined.__awaiter||function(t,e,r,n){function i(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,s){function a(t){try{f(n.next(t))}catch(t){s(t)}}function o(t){try{f(n["throw"](t))}catch(t){s(t)}}function f(t){t.done?r(t.value):i(t.value).then(a,o)}f((n=n.apply(t,e||[])).next())}))};const Al=new pt(dl);const El=10;function kl(t){if(t==null){return"null"}if(Ot(t)!==32){Al.throwArgumentError("invalid topic","topic",t)}return t.toLowerCase()}function Ml(t){t=t.slice();while(t.length>0&&t[t.length-1]==null){t.pop()}return t.map((t=>{if(Array.isArray(t)){const e={};t.forEach((t=>{e[kl(t)]=true}));const r=Object.keys(e);r.sort();return r.join("|")}else{return kl(t)}})).join("&")}function Bl(t){if(t===""){return[]}return t.split(/&/g).map((t=>{if(t===""){return[]}const e=t.split("|").map((t=>t==="null"?null:t));return e.length===1?e[0]:e}))}function Sl(t){if(typeof t==="string"){t=t.toLowerCase();if(Ot(t)===32){return"tx:"+t}if(t.indexOf(":")===-1){return t}}else if(Array.isArray(t)){return"filter:*:"+Ml(t)}else if(ls.isForkEvent(t)){Al.warn("not implemented");throw new Error("not implemented")}else if(t&&typeof t==="object"){return"filter:"+(t.address||"*")+":"+Ml(t.topics||[])}throw new Error("invalid event - "+t)}function Cl(){return(new Date).getTime()}function xl(t){return new Promise((e=>{setTimeout(e,t)}))}const Pl=["block","network","pending","poll"];class Il{constructor(t,e,r){ge(this,"tag",t);ge(this,"listener",e);ge(this,"once",r);this._lastBlockNumber=-2;this._inflight=false}get event(){switch(this.type){case"tx":return this.hash;case"filter":return this.filter}return this.tag}get type(){return this.tag.split(":")[0]}get hash(){const t=this.tag.split(":");if(t[0]!=="tx"){return null}return t[1]}get filter(){const t=this.tag.split(":");if(t[0]!=="filter"){return null}const e=t[1];const r=Bl(t[2]);const n={};if(r.length>0){n.topics=r}if(e&&e!=="*"){n.address=e}return n}pollable(){return this.tag.indexOf(":")>=0||Pl.indexOf(this.tag)>=0}}const Tl={0:{symbol:"btc",p2pkh:0,p2sh:5,prefix:"bc"},2:{symbol:"ltc",p2pkh:48,p2sh:50,prefix:"ltc"},3:{symbol:"doge",p2pkh:30,p2sh:22},60:{symbol:"eth",ilk:"eth"},61:{symbol:"etc",ilk:"eth"},700:{symbol:"xdai",ilk:"eth"}};function Ol(t){return Rt(Vt.from(t).toHexString(),32)}function Dl(t){return Xc.encode(St([t,Dt(iu(iu(t)),0,4)]))}const Nl=new RegExp("^(ipfs)://(.*)$","i");const Ul=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),Nl,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];function jl(t,e){try{return pn(Rl(t,e))}catch(t){}return null}function Rl(t,e){if(t==="0x"){return null}const r=Vt.from(Dt(t,e,e+32)).toNumber();const n=Vt.from(Dt(t,r,r+32)).toNumber();return Dt(t,r+32,r+32+n)}function Fl(t){if(t.match(/^ipfs:\/\/ipfs\//i)){t=t.substring(12)}else if(t.match(/^ipfs:\/\//i)){t=t.substring(7)}else{Al.throwArgumentError("unsupported IPFS format","link",t)}return`https://gateway.ipfs.io/ipfs/${t}`}function Ll(t){const e=Bt(t);if(e.length>32){throw new Error("internal; should not happen")}const r=new Uint8Array(32);r.set(e,32-e.length);return r}function Ql(t){if(t.length%32===0){return t}const e=new Uint8Array(Math.ceil(t.length/32)*32);e.set(t);return e}function Hl(t){const e=[];let r=0;for(let n=0;n<t.length;n++){e.push(null);r+=32}for(let n=0;n<t.length;n++){const i=Bt(t[n]);e[n]=Ll(r);e.push(Ll(i.length));e.push(Ql(i));r+=32+Math.ceil(i.length/32)*32}return Nt(e)}class Gl{constructor(t,e,r,n){ge(this,"provider",t);ge(this,"name",r);ge(this,"address",t.formatter.address(e));ge(this,"_resolvedAddress",n)}supportsWildcard(){if(!this._supportsEip2544){this._supportsEip2544=this.provider.call({to:this.address,data:"0x01ffc9a79061b92300000000000000000000000000000000000000000000000000000000"}).then((t=>Vt.from(t).eq(1))).catch((t=>{if(t.code===pt.errors.CALL_EXCEPTION){return false}this._supportsEip2544=null;throw t}))}return this._supportsEip2544}_fetch(t,e){return ml(this,void 0,void 0,(function*(){const r={to:this.address,ccipReadEnabled:true,data:Nt([t,Oi(this.name),e||"0x"])};let n=false;if(yield this.supportsWildcard()){n=true;r.data=Nt(["0x9061b923",Hl([Di(this.name),r.data])])}try{let t=yield this.provider.call(r);if(Bt(t).length%32===4){Al.throwError("resolver threw error",pt.errors.CALL_EXCEPTION,{transaction:r,data:t})}if(n){t=Rl(t,0)}return t}catch(t){if(t.code===pt.errors.CALL_EXCEPTION){return null}throw t}}))}_fetchBytes(t,e){return ml(this,void 0,void 0,(function*(){const r=yield this._fetch(t,e);if(r!=null){return Rl(r,0)}return null}))}_getAddress(t,e){const r=Tl[String(t)];if(r==null){Al.throwError(`unsupported coin type: ${t}`,pt.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${t})`})}if(r.ilk==="eth"){return this.provider.formatter.address(e)}const n=Bt(e);if(r.p2pkh!=null){const t=e.match(/^0x76a9([0-9a-f][0-9a-f])([0-9a-f]*)88ac$/);if(t){const e=parseInt(t[1],16);if(t[2].length===e*2&&e>=1&&e<=75){return Dl(St([[r.p2pkh],"0x"+t[2]]))}}}if(r.p2sh!=null){const t=e.match(/^0xa9([0-9a-f][0-9a-f])([0-9a-f]*)87$/);if(t){const e=parseInt(t[1],16);if(t[2].length===e*2&&e>=1&&e<=75){return Dl(St([[r.p2sh],"0x"+t[2]]))}}}if(r.prefix!=null){const t=n[1];let e=n[0];if(e===0){if(t!==20&&t!==32){e=-1}}else{e=-1}if(e>=0&&n.length===2+t&&t>=1&&t<=75){const t=ll.toWords(n.slice(2));t.unshift(e);return ll.encode(r.prefix,t)}}return null}getAddress(t){return ml(this,void 0,void 0,(function*(){if(t==null){t=60}if(t===60){try{const t=yield this._fetch("0x3b3b57de");if(t==="0x"||t===Xr){return null}return this.provider.formatter.callAddress(t)}catch(t){if(t.code===pt.errors.CALL_EXCEPTION){return null}throw t}}const e=yield this._fetchBytes("0xf1cb7e06",Ol(t));if(e==null||e==="0x"){return null}const r=this._getAddress(t,e);if(r==null){Al.throwError(`invalid or unsupported coin data`,pt.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${t})`,coinType:t,data:e})}return r}))}getAvatar(){return ml(this,void 0,void 0,(function*(){const t=[{type:"name",content:this.name}];try{const e=yield this.getText("avatar");if(e==null){return null}for(let r=0;r<Ul.length;r++){const n=e.match(Ul[r]);if(n==null){continue}const i=n[1].toLowerCase();switch(i){case"https":t.push({type:"url",content:e});return{linkage:t,url:e};case"data":t.push({type:"data",content:e});return{linkage:t,url:e};case"ipfs":t.push({type:"ipfs",content:e});return{linkage:t,url:Fl(e)};case"erc721":case"erc1155":{const r=i==="erc721"?"0xc87b56dd":"0x0e89341c";t.push({type:i,content:e});const s=this._resolvedAddress||(yield this.getAddress());const a=(n[2]||"").split("/");if(a.length!==2){return null}const o=yield this.provider.formatter.address(a[0]);const f=Rt(Vt.from(a[1]).toHexString(),32);if(i==="erc721"){const e=this.provider.formatter.callAddress(yield this.provider.call({to:o,data:Nt(["0x6352211e",f])}));if(s!==e){return null}t.push({type:"owner",content:e})}else if(i==="erc1155"){const e=Vt.from(yield this.provider.call({to:o,data:Nt(["0x00fdd58e",Rt(s,32),f])}));if(e.isZero()){return null}t.push({type:"balance",content:e.toString()})}const c={to:this.provider.formatter.address(a[0]),data:Nt([r,f])};let u=jl(yield this.provider.call(c),0);if(u==null){return null}t.push({type:"metadata-url-base",content:u});if(i==="erc1155"){u=u.replace("{id}",f.substring(2));t.push({type:"metadata-url-expanded",content:u})}if(u.match(/^ipfs:/i)){u=Fl(u)}t.push({type:"metadata-url",content:u});const h=yield Vh(u);if(!h){return null}t.push({type:"metadata",content:JSON.stringify(h)});let l=h.image;if(typeof l!=="string"){return null}if(l.match(/^(https:\/\/|data:)/i));else{const e=l.match(Nl);if(e==null){return null}t.push({type:"url-ipfs",content:l});l=Fl(l)}t.push({type:"url",content:l});return{linkage:t,url:l}}}}}catch(t){}return null}))}getContentHash(){return ml(this,void 0,void 0,(function*(){const t=yield this._fetchBytes("0xbc1c58d1");if(t==null||t==="0x"){return null}const e=t.match(/^0xe3010170(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(e){const t=parseInt(e[3],16);if(e[4].length===t*2){return"ipfs://"+Xc.encode("0x"+e[1])}}const r=t.match(/^0xe5010172(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(r){const t=parseInt(r[3],16);if(r[4].length===t*2){return"ipns://"+Xc.encode("0x"+r[1])}}const n=t.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(n){if(n[1].length===32*2){return"bzz://"+n[1]}}const i=t.match(/^0x90b2c605([0-9a-f]*)$/);if(i){if(i[1].length===34*2){const t={"=":"","+":"-","/":"_"};const e=qn("0x"+i[1]).replace(/[=+\/]/g,(e=>t[e]));return"sia://"+e}}return Al.throwError(`invalid or unsupported content hash data`,pt.errors.UNSUPPORTED_OPERATION,{operation:"getContentHash()",data:t})}))}getText(t){return ml(this,void 0,void 0,(function*(){let e=ln(t);e=St([Ol(64),Ol(e.length),e]);if(e.length%32!==0){e=St([e,Rt("0x",32-t.length%32)])}const r=yield this._fetchBytes("0x59d1d43c",Tt(e));if(r==null||r==="0x"){return null}return pn(r)}))}}let Kl=null;let Jl=1;class zl extends ds{constructor(t){super();this._events=[];this._emitted={block:-2};this.disableCcipRead=false;this.formatter=new.target.getFormatter();ge(this,"anyNetwork",t==="any");if(this.anyNetwork){t=this.detectNetwork()}if(t instanceof Promise){this._networkPromise=t;t.catch((t=>{}));this._ready().catch((t=>{}))}else{const e=ye(new.target,"getNetwork")(t);if(e){ge(this,"_network",e);this.emit("network",e,null)}else{Al.throwArgumentError("invalid network","network",t)}}this._maxInternalBlockNumber=-1024;this._lastBlockNumber=-2;this._maxFilterBlockRange=10;this._pollingInterval=4e3;this._fastQueryDate=0}_ready(){return ml(this,void 0,void 0,(function*(){if(this._network==null){let t=null;if(this._networkPromise){try{t=yield this._networkPromise}catch(t){}}if(t==null){t=yield this.detectNetwork()}if(!t){Al.throwError("no network detected",pt.errors.UNKNOWN_ERROR,{})}if(this._network==null){if(this.anyNetwork){this._network=t}else{ge(this,"_network",t)}this.emit("network",t,null)}}return this._network}))}get ready(){return Yh((()=>this._ready().then((t=>t),(t=>{if(t.code===pt.errors.NETWORK_ERROR&&t.event==="noNetwork"){return undefined}throw t}))))}static getFormatter(){if(Kl==null){Kl=new bl}return Kl}static getNetwork(t){return Fh(t==null?"homestead":t)}ccipReadFetch(t,e,r){return ml(this,void 0,void 0,(function*(){if(this.disableCcipRead||r.length===0){return null}const n=t.to.toLowerCase();const i=e.toLowerCase();const s=[];for(let t=0;t<r.length;t++){const e=r[t];const a=e.replace("{sender}",n).replace("{data}",i);const o=e.indexOf("{data}")>=0?null:JSON.stringify({data:i,sender:n});const f=yield Vh({url:a,errorPassThrough:true},o,((t,e)=>{t.status=e.statusCode;return t}));if(f.data){return f.data}const c=f.message||"unknown error";if(f.status>=400&&f.status<500){return Al.throwError(`response not found during CCIP fetch: ${c}`,pt.errors.SERVER_ERROR,{url:e,errorMessage:c})}s.push(c)}return Al.throwError(`error encountered during CCIP fetch: ${s.map((t=>JSON.stringify(t))).join(", ")}`,pt.errors.SERVER_ERROR,{urls:r,errorMessages:s})}))}_getInternalBlockNumber(t){return ml(this,void 0,void 0,(function*(){yield this._ready();if(t>0){while(this._internalBlockNumber){const e=this._internalBlockNumber;try{const r=yield e;if(Cl()-r.respTime<=t){return r.blockNumber}break}catch(t){if(this._internalBlockNumber===e){break}}}}const e=Cl();const r=we({blockNumber:this.perform("getBlockNumber",{}),networkError:this.getNetwork().then((t=>null),(t=>t))}).then((({blockNumber:t,networkError:n})=>{if(n){if(this._internalBlockNumber===r){this._internalBlockNumber=null}throw n}const i=Cl();t=Vt.from(t).toNumber();if(t<this._maxInternalBlockNumber){t=this._maxInternalBlockNumber}this._maxInternalBlockNumber=t;this._setFastBlockNumber(t);return{blockNumber:t,reqTime:e,respTime:i}}));this._internalBlockNumber=r;r.catch((t=>{if(this._internalBlockNumber===r){this._internalBlockNumber=null}}));return(yield r).blockNumber}))}poll(){return ml(this,void 0,void 0,(function*(){const t=Jl++;const e=[];let r=null;try{r=yield this._getInternalBlockNumber(100+this.pollingInterval/2)}catch(t){this.emit("error",t);return}this._setFastBlockNumber(r);this.emit("poll",t,r);if(r===this._lastBlockNumber){this.emit("didPoll",t);return}if(this._emitted.block===-2){this._emitted.block=r-1}if(Math.abs(this._emitted.block-r)>1e3){Al.warn(`network block skew detected; skipping block events (emitted=${this._emitted.block} blockNumber${r})`);this.emit("error",Al.makeError("network block skew detected",pt.errors.NETWORK_ERROR,{blockNumber:r,event:"blockSkew",previousBlockNumber:this._emitted.block}));this.emit("block",r)}else{for(let t=this._emitted.block+1;t<=r;t++){this.emit("block",t)}}if(this._emitted.block!==r){this._emitted.block=r;Object.keys(this._emitted).forEach((t=>{if(t==="block"){return}const e=this._emitted[t];if(e==="pending"){return}if(r-e>12){delete this._emitted[t]}}))}if(this._lastBlockNumber===-2){this._lastBlockNumber=r-1}this._events.forEach((t=>{switch(t.type){case"tx":{const r=t.hash;let n=this.getTransactionReceipt(r).then((t=>{if(!t||t.blockNumber==null){return null}this._emitted["t:"+r]=t.blockNumber;this.emit(r,t);return null})).catch((t=>{this.emit("error",t)}));e.push(n);break}case"filter":{if(!t._inflight){t._inflight=true;if(t._lastBlockNumber===-2){t._lastBlockNumber=r-1}const n=t.filter;n.fromBlock=t._lastBlockNumber+1;n.toBlock=r;const i=n.toBlock-this._maxFilterBlockRange;if(i>n.fromBlock){n.fromBlock=i}if(n.fromBlock<0){n.fromBlock=0}const s=this.getLogs(n).then((e=>{t._inflight=false;if(e.length===0){return}e.forEach((e=>{if(e.blockNumber>t._lastBlockNumber){t._lastBlockNumber=e.blockNumber}this._emitted["b:"+e.blockHash]=e.blockNumber;this._emitted["t:"+e.transactionHash]=e.blockNumber;this.emit(n,e)}))})).catch((e=>{this.emit("error",e);t._inflight=false}));e.push(s)}break}}}));this._lastBlockNumber=r;Promise.all(e).then((()=>{this.emit("didPoll",t)})).catch((t=>{this.emit("error",t)}));return}))}resetEventsBlock(t){this._lastBlockNumber=t-1;if(this.polling){this.poll()}}get network(){return this._network}detectNetwork(){return ml(this,void 0,void 0,(function*(){return Al.throwError("provider does not support network detection",pt.errors.UNSUPPORTED_OPERATION,{operation:"provider.detectNetwork"})}))}getNetwork(){return ml(this,void 0,void 0,(function*(){const t=yield this._ready();const e=yield this.detectNetwork();if(t.chainId!==e.chainId){if(this.anyNetwork){this._network=e;this._lastBlockNumber=-2;this._fastBlockNumber=null;this._fastBlockNumberPromise=null;this._fastQueryDate=0;this._emitted.block=-2;this._maxInternalBlockNumber=-1024;this._internalBlockNumber=null;this.emit("network",e,t);yield xl(0);return this._network}const r=Al.makeError("underlying network changed",pt.errors.NETWORK_ERROR,{event:"changed",network:t,detectedNetwork:e});this.emit("error",r);throw r}return t}))}get blockNumber(){this._getInternalBlockNumber(100+this.pollingInterval/2).then((t=>{this._setFastBlockNumber(t)}),(t=>{}));return this._fastBlockNumber!=null?this._fastBlockNumber:-1}get polling(){return this._poller!=null}set polling(t){if(t&&!this._poller){this._poller=setInterval((()=>{this.poll()}),this.pollingInterval);if(!this._bootstrapPoll){this._bootstrapPoll=setTimeout((()=>{this.poll();this._bootstrapPoll=setTimeout((()=>{if(!this._poller){this.poll()}this._bootstrapPoll=null}),this.pollingInterval)}),0)}}else if(!t&&this._poller){clearInterval(this._poller);this._poller=null}}get pollingInterval(){return this._pollingInterval}set pollingInterval(t){if(typeof t!=="number"||t<=0||parseInt(String(t))!=t){throw new Error("invalid polling interval")}this._pollingInterval=t;if(this._poller){clearInterval(this._poller);this._poller=setInterval((()=>{this.poll()}),this._pollingInterval)}}_getFastBlockNumber(){const t=Cl();if(t-this._fastQueryDate>2*this._pollingInterval){this._fastQueryDate=t;this._fastBlockNumberPromise=this.getBlockNumber().then((t=>{if(this._fastBlockNumber==null||t>this._fastBlockNumber){this._fastBlockNumber=t}return this._fastBlockNumber}))}return this._fastBlockNumberPromise}_setFastBlockNumber(t){if(this._fastBlockNumber!=null&&t<this._fastBlockNumber){return}this._fastQueryDate=Cl();if(this._fastBlockNumber==null||t>this._fastBlockNumber){this._fastBlockNumber=t;this._fastBlockNumberPromise=Promise.resolve(t)}}waitForTransaction(t,e,r){return ml(this,void 0,void 0,(function*(){return this._waitForTransaction(t,e==null?1:e,r||0,null)}))}_waitForTransaction(t,e,r,n){return ml(this,void 0,void 0,(function*(){const i=yield this.getTransactionReceipt(t);if((i?i.confirmations:0)>=e){return i}return new Promise(((i,s)=>{const a=[];let o=false;const f=function(){if(o){return true}o=true;a.forEach((t=>{t()}));return false};const c=t=>{if(t.confirmations<e){return}if(f()){return}i(t)};this.on(t,c);a.push((()=>{this.removeListener(t,c)}));if(n){let r=n.startBlock;let i=null;const c=a=>ml(this,void 0,void 0,(function*(){if(o){return}yield xl(1e3);this.getTransactionCount(n.from).then((u=>ml(this,void 0,void 0,(function*(){if(o){return}if(u<=n.nonce){r=a}else{{const e=yield this.getTransaction(t);if(e&&e.blockNumber!=null){return}}if(i==null){i=r-3;if(i<n.startBlock){i=n.startBlock}}while(i<=a){if(o){return}const r=yield this.getBlockWithTransactions(i);for(let i=0;i<r.transactions.length;i++){const a=r.transactions[i];if(a.hash===t){return}if(a.from===n.from&&a.nonce===n.nonce){if(o){return}const r=yield this.waitForTransaction(a.hash,e);if(f()){return}let i="replaced";if(a.data===n.data&&a.to===n.to&&a.value.eq(n.value)){i="repriced"}else if(a.data==="0x"&&a.from===a.to&&a.value.isZero()){i="cancelled"}s(Al.makeError("transaction was replaced",pt.errors.TRANSACTION_REPLACED,{cancelled:i==="replaced"||i==="cancelled",reason:i,replacement:this._wrapTransaction(a),hash:t,receipt:r}));return}}i++}}if(o){return}this.once("block",c)}))),(t=>{if(o){return}this.once("block",c)}))}));if(o){return}this.once("block",c);a.push((()=>{this.removeListener("block",c)}))}if(typeof r==="number"&&r>0){const t=setTimeout((()=>{if(f()){return}s(Al.makeError("timeout exceeded",pt.errors.TIMEOUT,{timeout:r}))}),r);if(t.unref){t.unref()}a.push((()=>{clearTimeout(t)}))}}))}))}getBlockNumber(){return ml(this,void 0,void 0,(function*(){return this._getInternalBlockNumber(0)}))}getGasPrice(){return ml(this,void 0,void 0,(function*(){yield this.getNetwork();const t=yield this.perform("getGasPrice",{});try{return Vt.from(t)}catch(e){return Al.throwError("bad result from backend",pt.errors.SERVER_ERROR,{method:"getGasPrice",result:t,error:e})}}))}getBalance(t,e){return ml(this,void 0,void 0,(function*(){yield this.getNetwork();const r=yield we({address:this._getAddress(t),blockTag:this._getBlockTag(e)});const n=yield this.perform("getBalance",r);try{return Vt.from(n)}catch(t){return Al.throwError("bad result from backend",pt.errors.SERVER_ERROR,{method:"getBalance",params:r,result:n,error:t})}}))}getTransactionCount(t,e){return ml(this,void 0,void 0,(function*(){yield this.getNetwork();const r=yield we({address:this._getAddress(t),blockTag:this._getBlockTag(e)});const n=yield this.perform("getTransactionCount",r);try{return Vt.from(n).toNumber()}catch(t){return Al.throwError("bad result from backend",pt.errors.SERVER_ERROR,{method:"getTransactionCount",params:r,result:n,error:t})}}))}getCode(t,e){return ml(this,void 0,void 0,(function*(){yield this.getNetwork();const r=yield we({address:this._getAddress(t),blockTag:this._getBlockTag(e)});const n=yield this.perform("getCode",r);try{return Tt(n)}catch(t){return Al.throwError("bad result from backend",pt.errors.SERVER_ERROR,{method:"getCode",params:r,result:n,error:t})}}))}getStorageAt(t,e,r){return ml(this,void 0,void 0,(function*(){yield this.getNetwork();const n=yield we({address:this._getAddress(t),blockTag:this._getBlockTag(r),position:Promise.resolve(e).then((t=>Ut(t)))});const i=yield this.perform("getStorageAt",n);try{return Tt(i)}catch(t){return Al.throwError("bad result from backend",pt.errors.SERVER_ERROR,{method:"getStorageAt",params:n,result:i,error:t})}}))}_wrapTransaction(t,e,r){if(e!=null&&Ot(e)!==32){throw new Error("invalid response - sendTransaction")}const n=t;if(e!=null&&t.hash!==e){Al.throwError("Transaction hash mismatch from Provider.sendTransaction.",pt.errors.UNKNOWN_ERROR,{expectedHash:t.hash,returnedHash:e})}n.wait=(e,n)=>ml(this,void 0,void 0,(function*(){if(e==null){e=1}if(n==null){n=0}let i=undefined;if(e!==0&&r!=null){i={data:t.data,from:t.from,nonce:t.nonce,to:t.to,value:t.value,startBlock:r}}const s=yield this._waitForTransaction(t.hash,e,n,i);if(s==null&&e===0){return null}this._emitted["t:"+t.hash]=s.blockNumber;if(s.status===0){Al.throwError("transaction failed",pt.errors.CALL_EXCEPTION,{transactionHash:t.hash,transaction:t,receipt:s})}return s}));return n}sendTransaction(t){return ml(this,void 0,void 0,(function*(){yield this.getNetwork();const e=yield Promise.resolve(t).then((t=>Tt(t)));const r=this.formatter.transaction(t);if(r.confirmations==null){r.confirmations=0}const n=yield this._getInternalBlockNumber(100+2*this.pollingInterval);try{const t=yield this.perform("sendTransaction",{signedTransaction:e});return this._wrapTransaction(r,t,n)}catch(t){t.transaction=r;t.transactionHash=r.hash;throw t}}))}_getTransactionRequest(t){return ml(this,void 0,void 0,(function*(){const e=yield t;const r={};["from","to"].forEach((t=>{if(e[t]==null){return}r[t]=Promise.resolve(e[t]).then((t=>t?this._getAddress(t):null))}));["gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","value"].forEach((t=>{if(e[t]==null){return}r[t]=Promise.resolve(e[t]).then((t=>t?Vt.from(t):null))}));["type"].forEach((t=>{if(e[t]==null){return}r[t]=Promise.resolve(e[t]).then((t=>t!=null?t:null))}));if(e.accessList){r.accessList=this.formatter.accessList(e.accessList)}["data"].forEach((t=>{if(e[t]==null){return}r[t]=Promise.resolve(e[t]).then((t=>t?Tt(t):null))}));return this.formatter.transactionRequest(yield we(r))}))}_getFilter(t){return ml(this,void 0,void 0,(function*(){t=yield t;const e={};if(t.address!=null){e.address=this._getAddress(t.address)}["blockHash","topics"].forEach((r=>{if(t[r]==null){return}e[r]=t[r]}));["fromBlock","toBlock"].forEach((r=>{if(t[r]==null){return}e[r]=this._getBlockTag(t[r])}));return this.formatter.filter(yield we(e))}))}_call(t,e,r){return ml(this,void 0,void 0,(function*(){if(r>=El){Al.throwError("CCIP read exceeded maximum redirections",pt.errors.SERVER_ERROR,{redirects:r,transaction:t})}const n=t.to;const i=yield this.perform("call",{transaction:t,blockTag:e});if(r>=0&&e==="latest"&&n!=null&&i.substring(0,10)==="0x556f1830"&&Ot(i)%32===4){try{const s=Dt(i,4);const a=Dt(s,0,32);if(!Vt.from(a).eq(n)){Al.throwError("CCIP Read sender did not match",pt.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:t,data:i})}const o=[];const f=Vt.from(Dt(s,32,64)).toNumber();const c=Vt.from(Dt(s,f,f+32)).toNumber();const u=Dt(s,f+32);for(let e=0;e<c;e++){const r=jl(u,e*32);if(r==null){Al.throwError("CCIP Read contained corrupt URL string",pt.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:t,data:i})}o.push(r)}const h=Rl(s,64);if(!Vt.from(Dt(s,100,128)).isZero()){Al.throwError("CCIP Read callback selector included junk",pt.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:t,data:i})}const l=Dt(s,96,100);const d=Rl(s,128);const v=yield this.ccipReadFetch(t,h,o);if(v==null){Al.throwError("CCIP Read disabled or provided no URLs",pt.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:t,data:i})}const b={to:n,data:Nt([l,Hl([v,d])])};return this._call(b,e,r+1)}catch(t){if(t.code===pt.errors.SERVER_ERROR){throw t}}}try{return Tt(i)}catch(r){return Al.throwError("bad result from backend",pt.errors.SERVER_ERROR,{method:"call",params:{transaction:t,blockTag:e},result:i,error:r})}}))}call(t,e){return ml(this,void 0,void 0,(function*(){yield this.getNetwork();const r=yield we({transaction:this._getTransactionRequest(t),blockTag:this._getBlockTag(e),ccipReadEnabled:Promise.resolve(t.ccipReadEnabled)});return this._call(r.transaction,r.blockTag,r.ccipReadEnabled?0:-1)}))}estimateGas(t){return ml(this,void 0,void 0,(function*(){yield this.getNetwork();const e=yield we({transaction:this._getTransactionRequest(t)});const r=yield this.perform("estimateGas",e);try{return Vt.from(r)}catch(t){return Al.throwError("bad result from backend",pt.errors.SERVER_ERROR,{method:"estimateGas",params:e,result:r,error:t})}}))}_getAddress(t){return ml(this,void 0,void 0,(function*(){t=yield t;if(typeof t!=="string"){Al.throwArgumentError("invalid address or ENS name","name",t)}const e=yield this.resolveName(t);if(e==null){Al.throwError("ENS name not configured",pt.errors.UNSUPPORTED_OPERATION,{operation:`resolveName(${JSON.stringify(t)})`})}return e}))}_getBlock(t,e){return ml(this,void 0,void 0,(function*(){yield this.getNetwork();t=yield t;let r=-128;const n={includeTransactions:!!e};if(Pt(t,32)){n.blockHash=t}else{try{n.blockTag=yield this._getBlockTag(t);if(Pt(n.blockTag)){r=parseInt(n.blockTag.substring(2),16)}}catch(e){Al.throwArgumentError("invalid block hash or block tag","blockHashOrBlockTag",t)}}return Yh((()=>ml(this,void 0,void 0,(function*(){const t=yield this.perform("getBlock",n);if(t==null){if(n.blockHash!=null){if(this._emitted["b:"+n.blockHash]==null){return null}}if(n.blockTag!=null){if(r>this._emitted.block){return null}}return undefined}if(e){let e=null;for(let r=0;r<t.transactions.length;r++){const n=t.transactions[r];if(n.blockNumber==null){n.confirmations=0}else if(n.confirmations==null){if(e==null){e=yield this._getInternalBlockNumber(100+2*this.pollingInterval)}let t=e-n.blockNumber+1;if(t<=0){t=1}n.confirmations=t}}const r=this.formatter.blockWithTransactions(t);r.transactions=r.transactions.map((t=>this._wrapTransaction(t)));return r}return this.formatter.block(t)}))),{oncePoll:this})}))}getBlock(t){return this._getBlock(t,false)}getBlockWithTransactions(t){return this._getBlock(t,true)}getTransaction(t){return ml(this,void 0,void 0,(function*(){yield this.getNetwork();t=yield t;const e={transactionHash:this.formatter.hash(t,true)};return Yh((()=>ml(this,void 0,void 0,(function*(){const r=yield this.perform("getTransaction",e);if(r==null){if(this._emitted["t:"+t]==null){return null}return undefined}const n=this.formatter.transactionResponse(r);if(n.blockNumber==null){n.confirmations=0}else if(n.confirmations==null){const t=yield this._getInternalBlockNumber(100+2*this.pollingInterval);let e=t-n.blockNumber+1;if(e<=0){e=1}n.confirmations=e}return this._wrapTransaction(n)}))),{oncePoll:this})}))}getTransactionReceipt(t){return ml(this,void 0,void 0,(function*(){yield this.getNetwork();t=yield t;const e={transactionHash:this.formatter.hash(t,true)};return Yh((()=>ml(this,void 0,void 0,(function*(){const r=yield this.perform("getTransactionReceipt",e);if(r==null){if(this._emitted["t:"+t]==null){return null}return undefined}if(r.blockHash==null){return undefined}const n=this.formatter.receipt(r);if(n.blockNumber==null){n.confirmations=0}else if(n.confirmations==null){const t=yield this._getInternalBlockNumber(100+2*this.pollingInterval);let e=t-n.blockNumber+1;if(e<=0){e=1}n.confirmations=e}return n}))),{oncePoll:this})}))}getLogs(t){return ml(this,void 0,void 0,(function*(){yield this.getNetwork();const e=yield we({filter:this._getFilter(t)});const r=yield this.perform("getLogs",e);r.forEach((t=>{if(t.removed==null){t.removed=false}}));return bl.arrayOf(this.formatter.filterLog.bind(this.formatter))(r)}))}getEtherPrice(){return ml(this,void 0,void 0,(function*(){yield this.getNetwork();return this.perform("getEtherPrice",{})}))}_getBlockTag(t){return ml(this,void 0,void 0,(function*(){t=yield t;if(typeof t==="number"&&t<0){if(t%1){Al.throwArgumentError("invalid BlockTag","blockTag",t)}let e=yield this._getInternalBlockNumber(100+2*this.pollingInterval);e+=t;if(e<0){e=0}return this.formatter.blockTag(e)}return this.formatter.blockTag(t)}))}getResolver(t){return ml(this,void 0,void 0,(function*(){let e=t;while(true){if(e===""||e==="."){return null}if(t!=="eth"&&e==="eth"){return null}const r=yield this._getResolver(e,"getResolver");if(r!=null){const n=new Gl(this,r,t);if(e!==t&&!(yield n.supportsWildcard())){return null}return n}e=e.split(".").slice(1).join(".")}}))}_getResolver(t,e){return ml(this,void 0,void 0,(function*(){if(e==null){e="ENS"}const r=yield this.getNetwork();if(!r.ensAddress){Al.throwError("network does not support ENS",pt.errors.UNSUPPORTED_OPERATION,{operation:e,network:r.name})}try{const e=yield this.call({to:r.ensAddress,data:"0x0178b8bf"+Oi(t).substring(2)});return this.formatter.callAddress(e)}catch(t){}return null}))}resolveName(t){return ml(this,void 0,void 0,(function*(){t=yield t;try{return Promise.resolve(this.formatter.address(t))}catch(e){if(Pt(t)){throw e}}if(typeof t!=="string"){Al.throwArgumentError("invalid ENS name","name",t)}const e=yield this.getResolver(t);if(!e){return null}return yield e.getAddress()}))}lookupAddress(t){return ml(this,void 0,void 0,(function*(){t=yield t;t=this.formatter.address(t);const e=t.substring(2).toLowerCase()+".addr.reverse";const r=yield this._getResolver(e,"lookupAddress");if(r==null){return null}const n=jl(yield this.call({to:r,data:"0x691f3431"+Oi(e).substring(2)}),0);const i=yield this.resolveName(n);if(i!=t){return null}return n}))}getAvatar(t){return ml(this,void 0,void 0,(function*(){let e=null;if(Pt(t)){const r=this.formatter.address(t);const n=r.substring(2).toLowerCase()+".addr.reverse";const i=yield this._getResolver(n,"getAvatar");if(!i){return null}e=new Gl(this,i,n);try{const t=yield e.getAvatar();if(t){return t.url}}catch(t){if(t.code!==pt.errors.CALL_EXCEPTION){throw t}}try{const t=jl(yield this.call({to:i,data:"0x691f3431"+Oi(n).substring(2)}),0);e=yield this.getResolver(t)}catch(t){if(t.code!==pt.errors.CALL_EXCEPTION){throw t}return null}}else{e=yield this.getResolver(t);if(!e){return null}}const r=yield e.getAvatar();if(r==null){return null}return r.url}))}perform(t,e){return Al.throwError(t+" not implemented",pt.errors.NOT_IMPLEMENTED,{operation:t})}_startEvent(t){this.polling=this._events.filter((t=>t.pollable())).length>0}_stopEvent(t){this.polling=this._events.filter((t=>t.pollable())).length>0}_addEventListener(t,e,r){const n=new Il(Sl(t),e,r);this._events.push(n);this._startEvent(n);return this}on(t,e){return this._addEventListener(t,e,false)}once(t,e){return this._addEventListener(t,e,true)}emit(t,...e){let r=false;let n=[];let i=Sl(t);this._events=this._events.filter((t=>{if(t.tag!==i){return true}setTimeout((()=>{t.listener.apply(this,e)}),0);r=true;if(t.once){n.push(t);return false}return true}));n.forEach((t=>{this._stopEvent(t)}));return r}listenerCount(t){if(!t){return this._events.length}let e=Sl(t);return this._events.filter((t=>t.tag===e)).length}listeners(t){if(t==null){return this._events.map((t=>t.listener))}let e=Sl(t);return this._events.filter((t=>t.tag===e)).map((t=>t.listener))}off(t,e){if(e==null){return this.removeAllListeners(t)}const r=[];let n=false;let i=Sl(t);this._events=this._events.filter((t=>{if(t.tag!==i||t.listener!=e){return true}if(n){return true}n=true;r.push(t);return false}));r.forEach((t=>{this._stopEvent(t)}));return this}removeAllListeners(t){let e=[];if(t==null){e=this._events;this._events=[]}else{const r=Sl(t);this._events=this._events.filter((t=>{if(t.tag!==r){return true}e.push(t);return false}))}e.forEach((t=>{this._stopEvent(t)}));return this}}var Wl=undefined&&undefined.__awaiter||function(t,e,r,n){function i(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,s){function a(t){try{f(n.next(t))}catch(t){s(t)}}function o(t){try{f(n["throw"](t))}catch(t){s(t)}}function f(t){t.done?r(t.value):i(t.value).then(a,o)}f((n=n.apply(t,e||[])).next())}))};const ql=new pt(dl);const Vl=["call","estimateGas"];function Yl(t,e){if(t==null){return null}if(typeof t.message==="string"&&t.message.match("reverted")){const r=Pt(t.data)?t.data:null;if(!e||r){return{message:t.message,data:r}}}if(typeof t==="object"){for(const r in t){const n=Yl(t[r],e);if(n){return n}}return null}if(typeof t==="string"){try{return Yl(JSON.parse(t),e)}catch(t){}}return null}function _l(t,e,r){const n=r.transaction||r.signedTransaction;if(t==="call"){const t=Yl(e,true);if(t){return t.data}ql.throwError("missing revert data in call exception; Transaction reverted without a reason string",pt.errors.CALL_EXCEPTION,{data:"0x",transaction:n,error:e})}if(t==="estimateGas"){let r=Yl(e.body,false);if(r==null){r=Yl(e,false)}if(r){ql.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",pt.errors.UNPREDICTABLE_GAS_LIMIT,{reason:r.message,method:t,transaction:n,error:e})}}let i=e.message;if(e.code===pt.errors.SERVER_ERROR&&e.error&&typeof e.error.message==="string"){i=e.error.message}else if(typeof e.body==="string"){i=e.body}else if(typeof e.responseText==="string"){i=e.responseText}i=(i||"").toLowerCase();if(i.match(/insufficient funds|base fee exceeds gas limit|InsufficientFunds/i)){ql.throwError("insufficient funds for intrinsic transaction cost",pt.errors.INSUFFICIENT_FUNDS,{error:e,method:t,transaction:n})}if(i.match(/nonce (is )?too low/i)){ql.throwError("nonce has already been used",pt.errors.NONCE_EXPIRED,{error:e,method:t,transaction:n})}if(i.match(/replacement transaction underpriced|transaction gas price.*too low/i)){ql.throwError("replacement fee too low",pt.errors.REPLACEMENT_UNDERPRICED,{error:e,method:t,transaction:n})}if(i.match(/only replay-protected/i)){ql.throwError("legacy pre-eip-155 transactions not supported",pt.errors.UNSUPPORTED_OPERATION,{error:e,method:t,transaction:n})}if(Vl.indexOf(t)>=0&&i.match(/gas required exceeds allowance|always failing transaction|execution reverted|revert/)){ql.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",pt.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,method:t,transaction:n})}throw e}function Zl(t){return new Promise((function(e){setTimeout(e,t)}))}function Xl(t){if(t.error){const e=new Error(t.error.message);e.code=t.error.code;e.data=t.error.data;throw e}return t.result}function $l(t){if(t){return t.toLowerCase()}return t}const td={};class ed extends ws{constructor(t,e,r){super();if(t!==td){throw new Error("do not call the JsonRpcSigner constructor directly; use provider.getSigner")}ge(this,"provider",e);if(r==null){r=0}if(typeof r==="string"){ge(this,"_address",this.provider.formatter.address(r));ge(this,"_index",null)}else if(typeof r==="number"){ge(this,"_index",r);ge(this,"_address",null)}else{ql.throwArgumentError("invalid address or index","addressOrIndex",r)}}connect(t){return ql.throwError("cannot alter JSON-RPC Signer connection",pt.errors.UNSUPPORTED_OPERATION,{operation:"connect"})}connectUnchecked(){return new rd(td,this.provider,this._address||this._index)}getAddress(){if(this._address){return Promise.resolve(this._address)}return this.provider.send("eth_accounts",[]).then((t=>{if(t.length<=this._index){ql.throwError("unknown account #"+this._index,pt.errors.UNSUPPORTED_OPERATION,{operation:"getAddress"})}return this.provider.formatter.address(t[this._index])}))}sendUncheckedTransaction(t){t=Ae(t);const e=this.getAddress().then((t=>{if(t){t=t.toLowerCase()}return t}));if(t.gasLimit==null){const r=Ae(t);r.from=e;t.gasLimit=this.provider.estimateGas(r)}if(t.to!=null){t.to=Promise.resolve(t.to).then((t=>Wl(this,void 0,void 0,(function*(){if(t==null){return null}const e=yield this.provider.resolveName(t);if(e==null){ql.throwArgumentError("provided ENS name resolves to null","tx.to",t)}return e}))))}return we({tx:we(t),sender:e}).then((({tx:e,sender:r})=>{if(e.from!=null){if(e.from.toLowerCase()!==r){ql.throwArgumentError("from address mismatch","transaction",t)}}else{e.from=r}const n=this.provider.constructor.hexlifyTransaction(e,{from:true});return this.provider.send("eth_sendTransaction",[n]).then((t=>t),(t=>{if(typeof t.message==="string"&&t.message.match(/user denied/i)){ql.throwError("user rejected transaction",pt.errors.ACTION_REJECTED,{action:"sendTransaction",transaction:e})}return _l("sendTransaction",t,n)}))}))}signTransaction(t){return ql.throwError("signing transactions is unsupported",pt.errors.UNSUPPORTED_OPERATION,{operation:"signTransaction"})}sendTransaction(t){return Wl(this,void 0,void 0,(function*(){const e=yield this.provider._getInternalBlockNumber(100+2*this.provider.pollingInterval);const r=yield this.sendUncheckedTransaction(t);try{return yield Yh((()=>Wl(this,void 0,void 0,(function*(){const t=yield this.provider.getTransaction(r);if(t===null){return undefined}return this.provider._wrapTransaction(t,r,e)}))),{oncePoll:this.provider})}catch(t){t.transactionHash=r;throw t}}))}signMessage(t){return Wl(this,void 0,void 0,(function*(){const e=typeof t==="string"?ln(t):t;const r=yield this.getAddress();try{return yield this.provider.send("personal_sign",[Tt(e),r.toLowerCase()])}catch(e){if(typeof e.message==="string"&&e.message.match(/user denied/i)){ql.throwError("user rejected signing",pt.errors.ACTION_REJECTED,{action:"signMessage",from:r,messageData:t})}throw e}}))}_legacySignMessage(t){return Wl(this,void 0,void 0,(function*(){const e=typeof t==="string"?ln(t):t;const r=yield this.getAddress();try{return yield this.provider.send("eth_sign",[r.toLowerCase(),Tt(e)])}catch(e){if(typeof e.message==="string"&&e.message.match(/user denied/i)){ql.throwError("user rejected signing",pt.errors.ACTION_REJECTED,{action:"_legacySignMessage",from:r,messageData:t})}throw e}}))}_signTypedData(t,e,r){return Wl(this,void 0,void 0,(function*(){const n=yield Xi.resolveNames(t,e,r,(t=>this.provider.resolveName(t)));const i=yield this.getAddress();try{return yield this.provider.send("eth_signTypedData_v4",[i.toLowerCase(),JSON.stringify(Xi.getPayload(n.domain,e,n.value))])}catch(t){if(typeof t.message==="string"&&t.message.match(/user denied/i)){ql.throwError("user rejected signing",pt.errors.ACTION_REJECTED,{action:"_signTypedData",from:i,messageData:{domain:n.domain,types:e,value:n.value}})}throw t}}))}unlock(t){return Wl(this,void 0,void 0,(function*(){const e=this.provider;const r=yield this.getAddress();return e.send("personal_unlockAccount",[r.toLowerCase(),t,null])}))}}class rd extends ed{sendTransaction(t){return this.sendUncheckedTransaction(t).then((t=>({hash:t,nonce:null,gasLimit:null,gasPrice:null,data:null,value:null,chainId:null,confirmations:0,from:null,wait:e=>this.provider.waitForTransaction(t,e)})))}}const nd={chainId:true,data:true,gasLimit:true,gasPrice:true,nonce:true,to:true,value:true,type:true,accessList:true,maxFeePerGas:true,maxPriorityFeePerGas:true};class id extends zl{constructor(t,e){let r=e;if(r==null){r=new Promise(((t,e)=>{setTimeout((()=>{this.detectNetwork().then((e=>{t(e)}),(t=>{e(t)}))}),0)}))}super(r);if(!t){t=ye(this.constructor,"defaultUrl")()}if(typeof t==="string"){ge(this,"connection",Object.freeze({url:t}))}else{ge(this,"connection",Object.freeze(Ae(t)))}this._nextId=42}get _cache(){if(this._eventLoopCache==null){this._eventLoopCache={}}return this._eventLoopCache}static defaultUrl(){return"http://localhost:8545"}detectNetwork(){if(!this._cache["detectNetwork"]){this._cache["detectNetwork"]=this._uncachedDetectNetwork();setTimeout((()=>{this._cache["detectNetwork"]=null}),0)}return this._cache["detectNetwork"]}_uncachedDetectNetwork(){return Wl(this,void 0,void 0,(function*(){yield Zl(0);let t=null;try{t=yield this.send("eth_chainId",[])}catch(e){try{t=yield this.send("net_version",[])}catch(t){}}if(t!=null){const e=ye(this.constructor,"getNetwork");try{return e(Vt.from(t).toNumber())}catch(e){return ql.throwError("could not detect network",pt.errors.NETWORK_ERROR,{chainId:t,event:"invalidNetwork",serverError:e})}}return ql.throwError("could not detect network",pt.errors.NETWORK_ERROR,{event:"noNetwork"})}))}getSigner(t){return new ed(td,this,t)}getUncheckedSigner(t){return this.getSigner(t).connectUnchecked()}listAccounts(){return this.send("eth_accounts",[]).then((t=>t.map((t=>this.formatter.address(t)))))}send(t,e){const r={method:t,params:e,id:this._nextId++,jsonrpc:"2.0"};this.emit("debug",{action:"request",request:Be(r),provider:this});const n=["eth_chainId","eth_blockNumber"].indexOf(t)>=0;if(n&&this._cache[t]){return this._cache[t]}const i=Vh(this.connection,JSON.stringify(r),Xl).then((t=>{this.emit("debug",{action:"response",request:r,response:t,provider:this});return t}),(t=>{this.emit("debug",{action:"response",error:t,request:r,provider:this});throw t}));if(n){this._cache[t]=i;setTimeout((()=>{this._cache[t]=null}),0)}return i}prepareRequest(t,e){switch(t){case"getBlockNumber":return["eth_blockNumber",[]];case"getGasPrice":return["eth_gasPrice",[]];case"getBalance":return["eth_getBalance",[$l(e.address),e.blockTag]];case"getTransactionCount":return["eth_getTransactionCount",[$l(e.address),e.blockTag]];case"getCode":return["eth_getCode",[$l(e.address),e.blockTag]];case"getStorageAt":return["eth_getStorageAt",[$l(e.address),Rt(e.position,32),e.blockTag]];case"sendTransaction":return["eth_sendRawTransaction",[e.signedTransaction]];case"getBlock":if(e.blockTag){return["eth_getBlockByNumber",[e.blockTag,!!e.includeTransactions]]}else if(e.blockHash){return["eth_getBlockByHash",[e.blockHash,!!e.includeTransactions]]}return null;case"getTransaction":return["eth_getTransactionByHash",[e.transactionHash]];case"getTransactionReceipt":return["eth_getTransactionReceipt",[e.transactionHash]];case"call":{const t=ye(this.constructor,"hexlifyTransaction");return["eth_call",[t(e.transaction,{from:true}),e.blockTag]]}case"estimateGas":{const t=ye(this.constructor,"hexlifyTransaction");return["eth_estimateGas",[t(e.transaction,{from:true})]]}case"getLogs":if(e.filter&&e.filter.address!=null){e.filter.address=$l(e.filter.address)}return["eth_getLogs",[e.filter]]}return null}perform(t,e){return Wl(this,void 0,void 0,(function*(){if(t==="call"||t==="estimateGas"){const t=e.transaction;if(t&&t.type!=null&&Vt.from(t.type).isZero()){if(t.maxFeePerGas==null&&t.maxPriorityFeePerGas==null){const r=yield this.getFeeData();if(r.maxFeePerGas==null&&r.maxPriorityFeePerGas==null){e=Ae(e);e.transaction=Ae(t);delete e.transaction.type}}}}const r=this.prepareRequest(t,e);if(r==null){ql.throwError(t+" not implemented",pt.errors.NOT_IMPLEMENTED,{operation:t})}try{return yield this.send(r[0],r[1])}catch(r){return _l(t,r,e)}}))}_startEvent(t){if(t.tag==="pending"){this._startPending()}super._startEvent(t)}_startPending(){if(this._pendingFilter!=null){return}const t=this;const e=this.send("eth_newPendingTransactionFilter",[]);this._pendingFilter=e;e.then((function(r){function n(){t.send("eth_getFilterChanges",[r]).then((function(r){if(t._pendingFilter!=e){return null}let n=Promise.resolve();r.forEach((function(e){t._emitted["t:"+e.toLowerCase()]="pending";n=n.then((function(){return t.getTransaction(e).then((function(e){t.emit("pending",e);return null}))}))}));return n.then((function(){return Zl(1e3)}))})).then((function(){if(t._pendingFilter!=e){t.send("eth_uninstallFilter",[r]);return}setTimeout((function(){n()}),0);return null})).catch((t=>{}))}n();return r})).catch((t=>{}))}_stopEvent(t){if(t.tag==="pending"&&this.listenerCount("pending")===0){this._pendingFilter=null}super._stopEvent(t)}static hexlifyTransaction(t,e){const r=Ae(nd);if(e){for(const t in e){if(e[t]){r[t]=true}}}me(t,r);const n={};["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach((function(e){if(t[e]==null){return}const r=Ut(Vt.from(t[e]));if(e==="gasLimit"){e="gas"}n[e]=r}));["from","to","data"].forEach((function(e){if(t[e]==null){return}n[e]=Tt(t[e])}));if(t.accessList){n["accessList"]=gc(t.accessList)}return n}}let sd=null;try{sd=WebSocket;if(sd==null){throw new Error("inject please")}}catch(t){const e=new pt(dl);sd=function(){e.throwError("WebSockets not supported in this environment",pt.errors.UNSUPPORTED_OPERATION,{operation:"new WebSocket()"})}}var ad=undefined&&undefined.__awaiter||function(t,e,r,n){function i(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,s){function a(t){try{f(n.next(t))}catch(t){s(t)}}function o(t){try{f(n["throw"](t))}catch(t){s(t)}}function f(t){t.done?r(t.value):i(t.value).then(a,o)}f((n=n.apply(t,e||[])).next())}))};const od=new pt(dl);let fd=1;class cd extends id{constructor(t,e){if(e==="any"){od.throwError("WebSocketProvider does not support 'any' network yet",pt.errors.UNSUPPORTED_OPERATION,{operation:"network:any"})}if(typeof t==="string"){super(t,e)}else{super("_websocket",e)}this._pollingInterval=-1;this._wsReady=false;if(typeof t==="string"){ge(this,"_websocket",new sd(this.connection.url))}else{ge(this,"_websocket",t)}ge(this,"_requests",{});ge(this,"_subs",{});ge(this,"_subIds",{});ge(this,"_detectNetwork",super.detectNetwork());this.websocket.onopen=()=>{this._wsReady=true;Object.keys(this._requests).forEach((t=>{this.websocket.send(this._requests[t].payload)}))};this.websocket.onmessage=t=>{const e=t.data;const r=JSON.parse(e);if(r.id!=null){const t=String(r.id);const n=this._requests[t];delete this._requests[t];if(r.result!==undefined){n.callback(null,r.result);this.emit("debug",{action:"response",request:JSON.parse(n.payload),response:r.result,provider:this})}else{let t=null;if(r.error){t=new Error(r.error.message||"unknown error");ge(t,"code",r.error.code||null);ge(t,"response",e)}else{t=new Error("unknown error")}n.callback(t,undefined);this.emit("debug",{action:"response",error:t,request:JSON.parse(n.payload),provider:this})}}else if(r.method==="eth_subscription"){const t=this._subs[r.params.subscription];if(t){t.processFunc(r.params.result)}}else{console.warn("this should not happen")}};const r=setInterval((()=>{this.emit("poll")}),1e3);if(r.unref){r.unref()}}get websocket(){return this._websocket}detectNetwork(){return this._detectNetwork}get pollingInterval(){return 0}resetEventsBlock(t){od.throwError("cannot reset events block on WebSocketProvider",pt.errors.UNSUPPORTED_OPERATION,{operation:"resetEventBlock"})}set pollingInterval(t){od.throwError("cannot set polling interval on WebSocketProvider",pt.errors.UNSUPPORTED_OPERATION,{operation:"setPollingInterval"})}poll(){return ad(this,void 0,void 0,(function*(){return null}))}set polling(t){if(!t){return}od.throwError("cannot set polling on WebSocketProvider",pt.errors.UNSUPPORTED_OPERATION,{operation:"setPolling"})}send(t,e){const r=fd++;return new Promise(((n,i)=>{function s(t,e){if(t){return i(t)}return n(e)}const a=JSON.stringify({method:t,params:e,id:r,jsonrpc:"2.0"});this.emit("debug",{action:"request",request:JSON.parse(a),provider:this});this._requests[String(r)]={callback:s,payload:a};if(this._wsReady){this.websocket.send(a)}}))}static defaultUrl(){return"ws://localhost:8546"}_subscribe(t,e,r){return ad(this,void 0,void 0,(function*(){let n=this._subIds[t];if(n==null){n=Promise.all(e).then((t=>this.send("eth_subscribe",t)));this._subIds[t]=n}const i=yield n;this._subs[i]={tag:t,processFunc:r}}))}_startEvent(t){switch(t.type){case"block":this._subscribe("block",["newHeads"],(t=>{const e=Vt.from(t.number).toNumber();this._emitted.block=e;this.emit("block",e)}));break;case"pending":this._subscribe("pending",["newPendingTransactions"],(t=>{this.emit("pending",t)}));break;case"filter":this._subscribe(t.tag,["logs",this._getFilter(t.filter)],(e=>{if(e.removed==null){e.removed=false}this.emit(t.filter,this.formatter.filterLog(e))}));break;case"tx":{const e=t=>{const e=t.hash;this.getTransactionReceipt(e).then((t=>{if(!t){return}this.emit(e,t)}))};e(t);this._subscribe("tx",["newHeads"],(t=>{this._events.filter((t=>t.type==="tx")).forEach(e)}));break}case"debug":case"poll":case"willPoll":case"didPoll":case"error":break;default:console.log("unhandled:",t);break}}_stopEvent(t){let e=t.tag;if(t.type==="tx"){if(this._events.filter((t=>t.type==="tx")).length){return}e="tx"}else if(this.listenerCount(t.event)){return}const r=this._subIds[e];if(!r){return}delete this._subIds[e];r.then((t=>{if(!this._subs[t]){return}delete this._subs[t];this.send("eth_unsubscribe",[t])}))}destroy(){return ad(this,void 0,void 0,(function*(){if(this.websocket.readyState===sd.CONNECTING){yield new Promise((t=>{this.websocket.onopen=function(){t(true)};this.websocket.onerror=function(){t(false)}}))}this.websocket.close(1e3)}))}}var ud=undefined&&undefined.__awaiter||function(t,e,r,n){function i(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,s){function a(t){try{f(n.next(t))}catch(t){s(t)}}function o(t){try{f(n["throw"](t))}catch(t){s(t)}}function f(t){t.done?r(t.value):i(t.value).then(a,o)}f((n=n.apply(t,e||[])).next())}))};const hd=new pt(dl);class ld extends id{detectNetwork(){const t=Object.create(null,{detectNetwork:{get:()=>super.detectNetwork}});return ud(this,void 0,void 0,(function*(){let e=this.network;if(e==null){e=yield t.detectNetwork.call(this);if(!e){hd.throwError("no network detected",pt.errors.UNKNOWN_ERROR,{})}if(this._network==null){ge(this,"_network",e);this.emit("network",e,null)}}return e}))}}class dd extends ld{constructor(t,e){hd.checkAbstract(new.target,dd);t=ye(new.target,"getNetwork")(t);e=ye(new.target,"getApiKey")(e);const r=ye(new.target,"getUrl")(t,e);super(r,t);if(typeof e==="string"){ge(this,"apiKey",e)}else if(e!=null){Object.keys(e).forEach((t=>{ge(this,t,e[t])}))}}_startPending(){hd.warn("WARNING: API provider does not support pending filters")}isCommunityResource(){return false}getSigner(t){return hd.throwError("API provider does not support signing",pt.errors.UNSUPPORTED_OPERATION,{operation:"getSigner"})}listAccounts(){return Promise.resolve([])}static getApiKey(t){return t}static getUrl(t,e){return hd.throwError("not implemented; sub-classes must override getUrl",pt.errors.NOT_IMPLEMENTED,{operation:"getUrl"})}}const vd=new pt(dl);const bd="_gg7wSSi0KMBsdKnGVfHDueq6xMB9EkC";class pd extends cd{constructor(t,e){const r=new gd(t,e);const n=r.connection.url.replace(/^http/i,"ws").replace(".alchemyapi.",".ws.alchemyapi.");super(n,r.network);ge(this,"apiKey",r.apiKey)}isCommunityResource(){return this.apiKey===bd}}class gd extends dd{static getWebSocketProvider(t,e){return new pd(t,e)}static getApiKey(t){if(t==null){return bd}if(t&&typeof t!=="string"){vd.throwArgumentError("invalid apiKey","apiKey",t)}return t}static getUrl(t,e){let r=null;switch(t.name){case"homestead":r="eth-mainnet.alchemyapi.io/v2/";break;case"goerli":r="eth-goerli.g.alchemy.com/v2/";break;case"matic":r="polygon-mainnet.g.alchemy.com/v2/";break;case"maticmum":r="polygon-mumbai.g.alchemy.com/v2/";break;case"arbitrum":r="arb-mainnet.g.alchemy.com/v2/";break;case"arbitrum-goerli":r="arb-goerli.g.alchemy.com/v2/";break;case"optimism":r="opt-mainnet.g.alchemy.com/v2/";break;case"optimism-goerli":r="opt-goerli.g.alchemy.com/v2/";break;default:vd.throwArgumentError("unsupported network","network",arguments[0])}return{allowGzip:true,url:"https:/"+"/"+r+e,throttleCallback:(t,r)=>{if(e===bd){wl()}return Promise.resolve(true)}}}isCommunityResource(){return this.apiKey===bd}}const yd=new pt(dl);const wd="9f7d929b018cdffb338517efa06f58359e86ff1ffd350bc889738523659e7972";function md(t){switch(t){case"homestead":return"rpc.ankr.com/eth/";case"ropsten":return"rpc.ankr.com/eth_ropsten/";case"rinkeby":return"rpc.ankr.com/eth_rinkeby/";case"goerli":return"rpc.ankr.com/eth_goerli/";case"matic":return"rpc.ankr.com/polygon/";case"arbitrum":return"rpc.ankr.com/arbitrum/"}return yd.throwArgumentError("unsupported network","name",t)}class Ad extends dd{isCommunityResource(){return this.apiKey===wd}static getApiKey(t){if(t==null){return wd}return t}static getUrl(t,e){if(e==null){e=wd}const r={allowGzip:true,url:"https://"+md(t.name)+e,throttleCallback:(t,r)=>{if(e.apiKey===wd){wl()}return Promise.resolve(true)}};if(e.projectSecret!=null){r.user="";r.password=e.projectSecret}return r}}var Ed=undefined&&undefined.__awaiter||function(t,e,r,n){function i(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,s){function a(t){try{f(n.next(t))}catch(t){s(t)}}function o(t){try{f(n["throw"](t))}catch(t){s(t)}}function f(t){t.done?r(t.value):i(t.value).then(a,o)}f((n=n.apply(t,e||[])).next())}))};const kd=new pt(dl);class Md extends dd{static getApiKey(t){if(t!=null){kd.throwArgumentError("apiKey not supported for cloudflare","apiKey",t)}return null}static getUrl(t,e){let r=null;switch(t.name){case"homestead":r="https://cloudflare-eth.com/";break;default:kd.throwArgumentError("unsupported network","network",arguments[0])}return r}perform(t,e){const r=Object.create(null,{perform:{get:()=>super.perform}});return Ed(this,void 0,void 0,(function*(){if(t==="getBlockNumber"){const t=yield r.perform.call(this,"getBlock",{blockTag:"latest"});return t.number}return r.perform.call(this,t,e)}))}}var Bd=undefined&&undefined.__awaiter||function(t,e,r,n){function i(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,s){function a(t){try{f(n.next(t))}catch(t){s(t)}}function o(t){try{f(n["throw"](t))}catch(t){s(t)}}function f(t){t.done?r(t.value):i(t.value).then(a,o)}f((n=n.apply(t,e||[])).next())}))};const Sd=new pt(dl);function Cd(t){const e={};for(let r in t){if(t[r]==null){continue}let n=t[r];if(r==="type"&&n===0){continue}if({type:true,gasLimit:true,gasPrice:true,maxFeePerGs:true,maxPriorityFeePerGas:true,nonce:true,value:true}[r]){n=Ut(Tt(n))}else if(r==="accessList"){n="["+gc(n).map((t=>`{address:"${t.address}",storageKeys:["${t.storageKeys.join('","')}"]}`)).join(",")+"]"}else{n=Tt(n)}e[r]=n}return e}function xd(t){if(t.status==0&&(t.message==="No records found"||t.message==="No transactions found")){return t.result}if(t.status!=1||typeof t.message!=="string"||!t.message.match(/^OK/)){const e=new Error("invalid response");e.result=JSON.stringify(t);if((t.result||"").toLowerCase().indexOf("rate limit")>=0){e.throttleRetry=true}throw e}return t.result}function Pd(t){if(t&&t.status==0&&t.message=="NOTOK"&&(t.result||"").toLowerCase().indexOf("rate limit")>=0){const e=new Error("throttled response");e.result=JSON.stringify(t);e.throttleRetry=true;throw e}if(t.jsonrpc!="2.0"){const e=new Error("invalid response");e.result=JSON.stringify(t);throw e}if(t.error){const e=new Error(t.error.message||"unknown error");if(t.error.code){e.code=t.error.code}if(t.error.data){e.data=t.error.data}throw e}return t.result}function Id(t){if(t==="pending"){throw new Error("pending not supported")}if(t==="latest"){return t}return parseInt(t.substring(2),16)}function Td(t,e,r){if(t==="call"&&e.code===pt.errors.SERVER_ERROR){const t=e.error;if(t&&(t.message.match(/reverted/i)||t.message.match(/VM execution error/i))){let r=t.data;if(r){r="0x"+r.replace(/^.*0x/i,"")}if(Pt(r)){return r}Sd.throwError("missing revert data in call exception",pt.errors.CALL_EXCEPTION,{error:e,data:"0x"})}}let n=e.message;if(e.code===pt.errors.SERVER_ERROR){if(e.error&&typeof e.error.message==="string"){n=e.error.message}else if(typeof e.body==="string"){n=e.body}else if(typeof e.responseText==="string"){n=e.responseText}}n=(n||"").toLowerCase();if(n.match(/insufficient funds/)){Sd.throwError("insufficient funds for intrinsic transaction cost",pt.errors.INSUFFICIENT_FUNDS,{error:e,method:t,transaction:r})}if(n.match(/same hash was already imported|transaction nonce is too low|nonce too low/)){Sd.throwError("nonce has already been used",pt.errors.NONCE_EXPIRED,{error:e,method:t,transaction:r})}if(n.match(/another transaction with same nonce/)){Sd.throwError("replacement fee too low",pt.errors.REPLACEMENT_UNDERPRICED,{error:e,method:t,transaction:r})}if(n.match(/execution failed due to an exception|execution reverted/)){Sd.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",pt.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,method:t,transaction:r})}throw e}class Od extends zl{constructor(t,e){super(t);ge(this,"baseUrl",this.getBaseUrl());ge(this,"apiKey",e||null)}getBaseUrl(){switch(this.network?this.network.name:"invalid"){case"homestead":return"https://api.etherscan.io";case"goerli":return"https://api-goerli.etherscan.io";case"sepolia":return"https://api-sepolia.etherscan.io";case"matic":return"https://api.polygonscan.com";case"maticmum":return"https://api-testnet.polygonscan.com";case"arbitrum":return"https://api.arbiscan.io";case"arbitrum-goerli":return"https://api-goerli.arbiscan.io";case"optimism":return"https://api-optimistic.etherscan.io";case"optimism-goerli":return"https://api-goerli-optimistic.etherscan.io"}return Sd.throwArgumentError("unsupported network","network",this.network.name)}getUrl(t,e){const r=Object.keys(e).reduce(((t,r)=>{const n=e[r];if(n!=null){t+=`&${r}=${n}`}return t}),"");const n=this.apiKey?`&apikey=${this.apiKey}`:"";return`${this.baseUrl}/api?module=${t}${r}${n}`}getPostUrl(){return`${this.baseUrl}/api`}getPostData(t,e){e.module=t;e.apikey=this.apiKey;return e}fetch(t,e,r){return Bd(this,void 0,void 0,(function*(){const n=r?this.getPostUrl():this.getUrl(t,e);const i=r?this.getPostData(t,e):null;const s=t==="proxy"?Pd:xd;this.emit("debug",{action:"request",request:n,provider:this});const a={url:n,throttleSlotInterval:1e3,throttleCallback:(t,e)=>{if(this.isCommunityResource()){wl()}return Promise.resolve(true)}};let o=null;if(i){a.headers={"content-type":"application/x-www-form-urlencoded; charset=UTF-8"};o=Object.keys(i).map((t=>`${t}=${i[t]}`)).join("&")}const f=yield Vh(a,o,s||Pd);this.emit("debug",{action:"response",request:n,response:Be(f),provider:this});return f}))}detectNetwork(){return Bd(this,void 0,void 0,(function*(){return this.network}))}perform(t,e){const r=Object.create(null,{perform:{get:()=>super.perform}});return Bd(this,void 0,void 0,(function*(){switch(t){case"getBlockNumber":return this.fetch("proxy",{action:"eth_blockNumber"});case"getGasPrice":return this.fetch("proxy",{action:"eth_gasPrice"});case"getBalance":return this.fetch("account",{action:"balance",address:e.address,tag:e.blockTag});case"getTransactionCount":return this.fetch("proxy",{action:"eth_getTransactionCount",address:e.address,tag:e.blockTag});case"getCode":return this.fetch("proxy",{action:"eth_getCode",address:e.address,tag:e.blockTag});case"getStorageAt":return this.fetch("proxy",{action:"eth_getStorageAt",address:e.address,position:e.position,tag:e.blockTag});case"sendTransaction":return this.fetch("proxy",{action:"eth_sendRawTransaction",hex:e.signedTransaction},true).catch((t=>Td("sendTransaction",t,e.signedTransaction)));case"getBlock":if(e.blockTag){return this.fetch("proxy",{action:"eth_getBlockByNumber",tag:e.blockTag,boolean:e.includeTransactions?"true":"false"})}throw new Error("getBlock by blockHash not implemented");case"getTransaction":return this.fetch("proxy",{action:"eth_getTransactionByHash",txhash:e.transactionHash});case"getTransactionReceipt":return this.fetch("proxy",{action:"eth_getTransactionReceipt",txhash:e.transactionHash});case"call":{if(e.blockTag!=="latest"){throw new Error("EtherscanProvider does not support blockTag for call")}const t=Cd(e.transaction);t.module="proxy";t.action="eth_call";try{return yield this.fetch("proxy",t,true)}catch(t){return Td("call",t,e.transaction)}}case"estimateGas":{const t=Cd(e.transaction);t.module="proxy";t.action="eth_estimateGas";try{return yield this.fetch("proxy",t,true)}catch(t){return Td("estimateGas",t,e.transaction)}}case"getLogs":{const t={action:"getLogs"};if(e.filter.fromBlock){t.fromBlock=Id(e.filter.fromBlock)}if(e.filter.toBlock){t.toBlock=Id(e.filter.toBlock)}if(e.filter.address){t.address=e.filter.address}if(e.filter.topics&&e.filter.topics.length>0){if(e.filter.topics.length>1){Sd.throwError("unsupported topic count",pt.errors.UNSUPPORTED_OPERATION,{topics:e.filter.topics})}if(e.filter.topics.length===1){const r=e.filter.topics[0];if(typeof r!=="string"||r.length!==66){Sd.throwError("unsupported topic format",pt.errors.UNSUPPORTED_OPERATION,{topic0:r})}t.topic0=r}}const r=yield this.fetch("logs",t);let n={};for(let t=0;t<r.length;t++){const e=r[t];if(e.blockHash!=null){continue}if(n[e.blockNumber]==null){const t=yield this.getBlock(e.blockNumber);if(t){n[e.blockNumber]=t.hash}}e.blockHash=n[e.blockNumber]}return r}case"getEtherPrice":if(this.network.name!=="homestead"){return 0}return parseFloat((yield this.fetch("stats",{action:"ethprice"})).ethusd)}return r.perform.call(this,t,e)}))}getHistory(t,e,r){return Bd(this,void 0,void 0,(function*(){const n={action:"txlist",address:yield this.resolveName(t),startblock:e==null?0:e,endblock:r==null?99999999:r,sort:"asc"};const i=yield this.fetch("account",n);return i.map((t=>{["contractAddress","to"].forEach((function(e){if(t[e]==""){delete t[e]}}));if(t.creates==null&&t.contractAddress!=null){t.creates=t.contractAddress}const e=this.formatter.transactionResponse(t);if(t.timeStamp){e.timestamp=parseInt(t.timeStamp)}return e}))}))}isCommunityResource(){return this.apiKey==null}}var Dd=undefined&&undefined.__awaiter||function(t,e,r,n){function i(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,s){function a(t){try{f(n.next(t))}catch(t){s(t)}}function o(t){try{f(n["throw"](t))}catch(t){s(t)}}function f(t){t.done?r(t.value):i(t.value).then(a,o)}f((n=n.apply(t,e||[])).next())}))};const Nd=new pt(dl);function Ud(){return(new Date).getTime()}function jd(t){let e=null;for(let r=0;r<t.length;r++){const n=t[r];if(n==null){return null}if(e){if(!(e.name===n.name&&e.chainId===n.chainId&&(e.ensAddress===n.ensAddress||e.ensAddress==null&&n.ensAddress==null))){Nd.throwArgumentError("provider mismatch","networks",t)}}else{e=n}}return e}function Rd(t,e){t=t.slice().sort();const r=Math.floor(t.length/2);if(t.length%2){return t[r]}const n=t[r-1],i=t[r];if(e!=null&&Math.abs(n-i)>e){return null}return(n+i)/2}function Fd(t){if(t===null){return"null"}else if(typeof t==="number"||typeof t==="boolean"){return JSON.stringify(t)}else if(typeof t==="string"){return t}else if(Vt.isBigNumber(t)){return t.toString()}else if(Array.isArray(t)){return JSON.stringify(t.map((t=>Fd(t))))}else if(typeof t==="object"){const e=Object.keys(t);e.sort();return"{"+e.map((e=>{let r=t[e];if(typeof r==="function"){r="[function]"}else{r=Fd(r)}return JSON.stringify(e)+":"+r})).join(",")+"}"}throw new Error("unknown value type: "+typeof t)}let Ld=1;function Qd(t){let e=null;let r=null;let n=new Promise((n=>{e=function(){if(r){clearTimeout(r);r=null}n()};r=setTimeout(e,t)}));const i=t=>{n=n.then(t);return n};function s(){return n}return{cancel:e,getPromise:s,wait:i}}const Hd=[pt.errors.CALL_EXCEPTION,pt.errors.INSUFFICIENT_FUNDS,pt.errors.NONCE_EXPIRED,pt.errors.REPLACEMENT_UNDERPRICED,pt.errors.UNPREDICTABLE_GAS_LIMIT];const Gd=["address","args","errorArgs","errorSignature","method","transaction"];function Kd(t,e){const r={weight:t.weight};Object.defineProperty(r,"provider",{get:()=>t.provider});if(t.start){r.start=t.start}if(e){r.duration=e-t.start}if(t.done){if(t.error){r.error=t.error}else{r.result=t.result||null}}return r}function Jd(t,e){return function(r){const n={};r.forEach((e=>{const r=t(e.result);if(!n[r]){n[r]={count:0,result:e.result}}n[r].count++}));const i=Object.keys(n);for(let t=0;t<i.length;t++){const r=n[i[t]];if(r.count>=e){return r.result}}return undefined}}function zd(t,e,r){let n=Fd;switch(e){case"getBlockNumber":return function(e){const r=e.map((t=>t.result));let n=Rd(e.map((t=>t.result)),2);if(n==null){return undefined}n=Math.ceil(n);if(r.indexOf(n+1)>=0){n++}if(n>=t._highestBlockNumber){t._highestBlockNumber=n}return t._highestBlockNumber};case"getGasPrice":return function(t){const e=t.map((t=>t.result));e.sort();return e[Math.floor(e.length/2)]};case"getEtherPrice":return function(t){return Rd(t.map((t=>t.result)))};case"getBalance":case"getTransactionCount":case"getCode":case"getStorageAt":case"call":case"estimateGas":case"getLogs":break;case"getTransaction":case"getTransactionReceipt":n=function(t){if(t==null){return null}t=Ae(t);t.confirmations=-1;return Fd(t)};break;case"getBlock":if(r.includeTransactions){n=function(t){if(t==null){return null}t=Ae(t);t.transactions=t.transactions.map((t=>{t=Ae(t);t.confirmations=-1;return t}));return Fd(t)}}else{n=function(t){if(t==null){return null}return Fd(t)}}break;default:throw new Error("unknown method: "+e)}return Jd(n,t.quorum)}function Wd(t,e){return Dd(this,void 0,void 0,(function*(){const r=t.provider;if(r.blockNumber!=null&&r.blockNumber>=e||e===-1){return r}return Yh((()=>new Promise(((n,i)=>{setTimeout((function(){if(r.blockNumber>=e){return n(r)}if(t.cancelled){return n(null)}return n(undefined)}),0)}))),{oncePoll:r})}))}function qd(t,e,r,n){return Dd(this,void 0,void 0,(function*(){let i=t.provider;switch(r){case"getBlockNumber":case"getGasPrice":return i[r]();case"getEtherPrice":if(i.getEtherPrice){return i.getEtherPrice()}break;case"getBalance":case"getTransactionCount":case"getCode":if(n.blockTag&&Pt(n.blockTag)){i=yield Wd(t,e)}return i[r](n.address,n.blockTag||"latest");case"getStorageAt":if(n.blockTag&&Pt(n.blockTag)){i=yield Wd(t,e)}return i.getStorageAt(n.address,n.position,n.blockTag||"latest");case"getBlock":if(n.blockTag&&Pt(n.blockTag)){i=yield Wd(t,e)}return i[n.includeTransactions?"getBlockWithTransactions":"getBlock"](n.blockTag||n.blockHash);case"call":case"estimateGas":if(n.blockTag&&Pt(n.blockTag)){i=yield Wd(t,e)}if(r==="call"&&n.blockTag){return i[r](n.transaction,n.blockTag)}return i[r](n.transaction);case"getTransaction":case"getTransactionReceipt":return i[r](n.transactionHash);case"getLogs":{let r=n.filter;if(r.fromBlock&&Pt(r.fromBlock)||r.toBlock&&Pt(r.toBlock)){i=yield Wd(t,e)}return i.getLogs(r)}}return Nd.throwError("unknown method error",pt.errors.UNKNOWN_ERROR,{method:r,params:n})}))}class Vd extends zl{constructor(t,e){if(t.length===0){Nd.throwArgumentError("missing providers","providers",t)}const r=t.map(((t,e)=>{if(ds.isProvider(t)){const e=gl(t)?2e3:750;const r=1;return Object.freeze({provider:t,weight:1,stallTimeout:e,priority:r})}const r=Ae(t);if(r.priority==null){r.priority=1}if(r.stallTimeout==null){r.stallTimeout=gl(t)?2e3:750}if(r.weight==null){r.weight=1}const n=r.weight;if(n%1||n>512||n<1){Nd.throwArgumentError("invalid weight; must be integer in [1, 512]",`providers[${e}].weight`,n)}return Object.freeze(r)}));const n=r.reduce(((t,e)=>t+e.weight),0);if(e==null){e=n/2}else if(e>n){Nd.throwArgumentError("quorum will always fail; larger than total weight","quorum",e)}let i=jd(r.map((t=>t.provider.network)));if(i==null){i=new Promise(((t,e)=>{setTimeout((()=>{this.detectNetwork().then(t,e)}),0)}))}super(i);ge(this,"providerConfigs",Object.freeze(r));ge(this,"quorum",e);this._highestBlockNumber=-1}detectNetwork(){return Dd(this,void 0,void 0,(function*(){const t=yield Promise.all(this.providerConfigs.map((t=>t.provider.getNetwork())));return jd(t)}))}perform(t,e){return Dd(this,void 0,void 0,(function*(){if(t==="sendTransaction"){const t=yield Promise.all(this.providerConfigs.map((t=>t.provider.sendTransaction(e.signedTransaction).then((t=>t.hash),(t=>t)))));for(let e=0;e<t.length;e++){const r=t[e];if(typeof r==="string"){return r}}throw t[0]}if(this._highestBlockNumber===-1&&t!=="getBlockNumber"){yield this.getBlockNumber()}const r=zd(this,t,e);const n=Ku(this.providerConfigs.map(Ae));n.sort(((t,e)=>t.priority-e.priority));const i=this._highestBlockNumber;let s=0;let a=true;while(true){const o=Ud();let f=n.filter((t=>t.runner&&o-t.start<t.stallTimeout)).reduce(((t,e)=>t+e.weight),0);while(f<this.quorum&&s<n.length){const r=n[s++];const a=Ld++;r.start=Ud();r.staller=Qd(r.stallTimeout);r.staller.wait((()=>{r.staller=null}));r.runner=qd(r,i,t,e).then((n=>{r.done=true;r.result=n;if(this.listenerCount("debug")){this.emit("debug",{action:"request",rid:a,backend:Kd(r,Ud()),request:{method:t,params:Be(e)},provider:this})}}),(n=>{r.done=true;r.error=n;if(this.listenerCount("debug")){this.emit("debug",{action:"request",rid:a,backend:Kd(r,Ud()),request:{method:t,params:Be(e)},provider:this})}}));if(this.listenerCount("debug")){this.emit("debug",{action:"request",rid:a,backend:Kd(r,null),request:{method:t,params:Be(e)},provider:this})}f+=r.weight}const c=[];n.forEach((t=>{if(t.done||!t.runner){return}c.push(t.runner);if(t.staller){c.push(t.staller.getPromise())}}));if(c.length){yield Promise.race(c)}const u=n.filter((t=>t.done&&t.error==null));if(u.length>=this.quorum){const t=r(u);if(t!==undefined){n.forEach((t=>{if(t.staller){t.staller.cancel()}t.cancelled=true}));return t}if(!a){yield Qd(100).getPromise()}a=false}const h=n.reduce(((t,e)=>{if(!e.done||e.error==null){return t}const r=e.error.code;if(Hd.indexOf(r)>=0){if(!t[r]){t[r]={error:e.error,weight:0}}t[r].weight+=e.weight}return t}),{});Object.keys(h).forEach((t=>{const e=h[t];if(e.weight<this.quorum){return}n.forEach((t=>{if(t.staller){t.staller.cancel()}t.cancelled=true}));const r=e.error;const i={};Gd.forEach((t=>{if(r[t]==null){return}i[t]=r[t]}));Nd.throwError(r.reason||r.message,t,i)}));if(n.filter((t=>!t.done)).length===0){break}}n.forEach((t=>{if(t.staller){t.staller.cancel()}t.cancelled=true}));return Nd.throwError("failed to meet quorum",pt.errors.SERVER_ERROR,{method:t,params:e,results:n.map((t=>Kd(t))),provider:this})}))}}const Yd=null;const _d=new pt(dl);const Zd="84842078b09946638c03157f83405213";class Xd extends cd{constructor(t,e){const r=new $d(t,e);const n=r.connection;if(n.password){_d.throwError("INFURA WebSocket project secrets unsupported",pt.errors.UNSUPPORTED_OPERATION,{operation:"InfuraProvider.getWebSocketProvider()"})}const i=n.url.replace(/^http/i,"ws").replace("/v3/","/ws/v3/");super(i,t);ge(this,"apiKey",r.projectId);ge(this,"projectId",r.projectId);ge(this,"projectSecret",r.projectSecret)}isCommunityResource(){return this.projectId===Zd}}class $d extends dd{static getWebSocketProvider(t,e){return new Xd(t,e)}static getApiKey(t){const e={apiKey:Zd,projectId:Zd,projectSecret:null};if(t==null){return e}if(typeof t==="string"){e.projectId=t}else if(t.projectSecret!=null){_d.assertArgument(typeof t.projectId==="string","projectSecret requires a projectId","projectId",t.projectId);_d.assertArgument(typeof t.projectSecret==="string","invalid projectSecret","projectSecret","[REDACTED]");e.projectId=t.projectId;e.projectSecret=t.projectSecret}else if(t.projectId){e.projectId=t.projectId}e.apiKey=e.projectId;return e}static getUrl(t,e){let r=null;switch(t?t.name:"unknown"){case"homestead":r="mainnet.infura.io";break;case"goerli":r="goerli.infura.io";break;case"sepolia":r="sepolia.infura.io";break;case"matic":r="polygon-mainnet.infura.io";break;case"maticmum":r="polygon-mumbai.infura.io";break;case"optimism":r="optimism-mainnet.infura.io";break;case"optimism-goerli":r="optimism-goerli.infura.io";break;case"arbitrum":r="arbitrum-mainnet.infura.io";break;case"arbitrum-goerli":r="arbitrum-goerli.infura.io";break;default:_d.throwError("unsupported network",pt.errors.INVALID_ARGUMENT,{argument:"network",value:t})}const n={allowGzip:true,url:"https:/"+"/"+r+"/v3/"+e.projectId,throttleCallback:(t,r)=>{if(e.projectId===Zd){wl()}return Promise.resolve(true)}};if(e.projectSecret!=null){n.user="";n.password=e.projectSecret}return n}isCommunityResource(){return this.projectId===Zd}}class tv extends id{send(t,e){const r={method:t,params:e,id:this._nextId++,jsonrpc:"2.0"};if(this._pendingBatch==null){this._pendingBatch=[]}const n={request:r,resolve:null,reject:null};const i=new Promise(((t,e)=>{n.resolve=t;n.reject=e}));this._pendingBatch.push(n);if(!this._pendingBatchAggregator){this._pendingBatchAggregator=setTimeout((()=>{const t=this._pendingBatch;this._pendingBatch=null;this._pendingBatchAggregator=null;const e=t.map((t=>t.request));this.emit("debug",{action:"requestBatch",request:Be(e),provider:this});return Vh(this.connection,JSON.stringify(e)).then((r=>{this.emit("debug",{action:"response",request:e,response:r,provider:this});t.forEach(((t,e)=>{const n=r[e];if(n.error){const e=new Error(n.error.message);e.code=n.error.code;e.data=n.error.data;t.reject(e)}else{t.resolve(n.result)}}))}),(r=>{this.emit("debug",{action:"response",error:r,request:e,provider:this});t.forEach((t=>{t.reject(r)}))}))}),10)}return i}}const ev=new pt(dl);const rv="ETHERS_JS_SHARED";class nv extends dd{static getApiKey(t){if(t&&typeof t!=="string"){ev.throwArgumentError("invalid apiKey","apiKey",t)}return t||rv}static getUrl(t,e){ev.warn("NodeSmith will be discontinued on 2019-12-20; please migrate to another platform.");let r=null;switch(t.name){case"homestead":r="https://ethereum.api.nodesmith.io/v1/mainnet/jsonrpc";break;case"ropsten":r="https://ethereum.api.nodesmith.io/v1/ropsten/jsonrpc";break;case"rinkeby":r="https://ethereum.api.nodesmith.io/v1/rinkeby/jsonrpc";break;case"goerli":r="https://ethereum.api.nodesmith.io/v1/goerli/jsonrpc";break;case"kovan":r="https://ethereum.api.nodesmith.io/v1/kovan/jsonrpc";break;default:ev.throwArgumentError("unsupported network","network",arguments[0])}return r+"?apiKey="+e}}const iv=new pt(dl);const sv="62e1ad51b37b8e00394bda3b";class av extends dd{static getApiKey(t){const e={applicationId:null,loadBalancer:true,applicationSecretKey:null};if(t==null){e.applicationId=sv}else if(typeof t==="string"){e.applicationId=t}else if(t.applicationSecretKey!=null){e.applicationId=t.applicationId;e.applicationSecretKey=t.applicationSecretKey}else if(t.applicationId){e.applicationId=t.applicationId}else{iv.throwArgumentError("unsupported PocketProvider apiKey","apiKey",t)}return e}static getUrl(t,e){let r=null;switch(t?t.name:"unknown"){case"goerli":r="eth-goerli.gateway.pokt.network";break;case"homestead":r="eth-mainnet.gateway.pokt.network";break;case"kovan":r="poa-kovan.gateway.pokt.network";break;case"matic":r="poly-mainnet.gateway.pokt.network";break;case"maticmum":r="polygon-mumbai-rpc.gateway.pokt.network";break;case"rinkeby":r="eth-rinkeby.gateway.pokt.network";break;case"ropsten":r="eth-ropsten.gateway.pokt.network";break;default:iv.throwError("unsupported network",pt.errors.INVALID_ARGUMENT,{argument:"network",value:t})}const n=`https://${r}/v1/lb/${e.applicationId}`;const i={headers:{},url:n};if(e.applicationSecretKey!=null){i.user="";i.password=e.applicationSecretKey}return i}isCommunityResource(){return this.applicationId===sv}}const ov=new pt(dl);let fv=1;function cv(t,e){const r="Web3LegacyFetcher";return function(t,n){const i={method:t,params:n,id:fv++,jsonrpc:"2.0"};return new Promise(((t,n)=>{this.emit("debug",{action:"request",fetcher:r,request:Be(i),provider:this});e(i,((e,s)=>{if(e){this.emit("debug",{action:"response",fetcher:r,error:e,request:i,provider:this});return n(e)}this.emit("debug",{action:"response",fetcher:r,request:i,response:s,provider:this});if(s.error){const t=new Error(s.error.message);t.code=s.error.code;t.data=s.error.data;return n(t)}t(s.result)}))}))}}function uv(t){return function(e,r){if(r==null){r=[]}const n={method:e,params:r};this.emit("debug",{action:"request",fetcher:"Eip1193Fetcher",request:Be(n),provider:this});return t.request(n).then((t=>{this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:n,response:t,provider:this});return t}),(t=>{this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:n,error:t,provider:this});throw t}))}}class hv extends id{constructor(t,e){if(t==null){ov.throwArgumentError("missing provider","provider",t)}let r=null;let n=null;let i=null;if(typeof t==="function"){r="unknown:";n=t}else{r=t.host||t.path||"";if(!r&&t.isMetaMask){r="metamask"}i=t;if(t.request){if(r===""){r="eip-1193:"}n=uv(t)}else if(t.sendAsync){n=cv(t,t.sendAsync.bind(t))}else if(t.send){n=cv(t,t.send.bind(t))}else{ov.throwArgumentError("unsupported provider","provider",t)}if(!r){r="unknown:"}}super(r,e);ge(this,"jsonRpcFetchFunc",n);ge(this,"provider",i)}send(t,e){return this.jsonRpcFetchFunc(t,e)}}const lv=new pt(dl);function dv(t,e){if(t==null){t="homestead"}if(typeof t==="string"){const e=t.match(/^(ws|http)s?:/i);if(e){switch(e[1].toLowerCase()){case"http":case"https":return new id(t);case"ws":case"wss":return new cd(t);default:lv.throwArgumentError("unsupported URL scheme","network",t)}}}const r=Fh(t);if(!r||!r._defaultProvider){lv.throwError("unsupported getDefaultProvider network",pt.errors.NETWORK_ERROR,{operation:"getDefaultProvider",network:t})}return r._defaultProvider({FallbackProvider:Vd,AlchemyProvider:gd,AnkrProvider:Ad,CloudflareProvider:Md,EtherscanProvider:Od,InfuraProvider:$d,JsonRpcProvider:id,NodesmithProvider:nv,PocketProvider:av,Web3Provider:hv,IpcProvider:Yd},e)}const vv=Object.freeze({__proto__:null,Provider:ds,BaseProvider:zl,Resolver:Gl,UrlJsonRpcProvider:dd,FallbackProvider:Vd,AlchemyProvider:gd,AlchemyWebSocketProvider:pd,AnkrProvider:Ad,CloudflareProvider:Md,EtherscanProvider:Od,InfuraProvider:$d,InfuraWebSocketProvider:Xd,JsonRpcProvider:id,JsonRpcBatchProvider:tv,NodesmithProvider:nv,PocketProvider:av,StaticJsonRpcProvider:ld,Web3Provider:hv,WebSocketProvider:cd,IpcProvider:Yd,JsonRpcSigner:ed,getDefaultProvider:dv,getNetwork:Fh,isCommunityResource:gl,isCommunityResourcable:pl,showThrottleMessage:wl,Formatter:bl});const bv="solidity/5.7.0";const pv=new RegExp("^bytes([0-9]+)$");const gv=new RegExp("^(u?int)([0-9]*)$");const yv=new RegExp("^(.*)\\[([0-9]*)\\]$");const wv="0000000000000000000000000000000000000000000000000000000000000000";const mv=new pt(bv);function Av(t,e,r){switch(t){case"address":if(r){return xt(e,32)}return Bt(e);case"string":return ln(e);case"bytes":return Bt(e);case"bool":e=e?"0x01":"0x00";if(r){return xt(e,32)}return Bt(e)}let n=t.match(gv);if(n){let i=parseInt(n[2]||"256");if(n[2]&&String(i)!==n[2]||i%8!==0||i===0||i>256){mv.throwArgumentError("invalid number type","type",t)}if(r){i=256}e=Vt.from(e).toTwos(i);return xt(e,i/8)}n=t.match(pv);if(n){const i=parseInt(n[1]);if(String(i)!==n[1]||i===0||i>32){mv.throwArgumentError("invalid bytes type","type",t)}if(Bt(e).byteLength!==i){mv.throwArgumentError(`invalid value for ${t}`,"value",e)}if(r){return Bt((e+wv).substring(0,66))}return e}n=t.match(yv);if(n&&Array.isArray(e)){const r=n[1];const i=parseInt(n[2]||String(e.length));if(i!=e.length){mv.throwArgumentError(`invalid array length for ${t}`,"value",e)}const s=[];e.forEach((function(t){s.push(Av(r,t,true))}));return St(s)}return mv.throwArgumentError("invalid type","type",t)}function Ev(t,e){if(t.length!=e.length){mv.throwArgumentError("wrong number of values; expected ${ types.length }","values",e)}const r=[];t.forEach((function(t,n){r.push(Av(t,e[n]))}));return Tt(St(r))}function kv(t,e){return ar(Ev(t,e))}function Mv(t,e){return iu(Ev(t,e))}const Bv=Object.freeze({__proto__:null,pack:Ev,keccak256:kv,sha256:Mv});const Sv="units/5.7.0";const Cv=new pt(Sv);const xv=["wei","kwei","mwei","gwei","szabo","finney","ether"];function Pv(t){const e=String(t).split(".");if(e.length>2||!e[0].match(/^-?[0-9]*$/)||e[1]&&!e[1].match(/^[0-9]*$/)||t==="."||t==="-."){Cv.throwArgumentError("invalid value","value",t)}let r=e[0];let n="";if(r.substring(0,1)==="-"){n="-";r=r.substring(1)}while(r.substring(0,1)==="0"){r=r.substring(1)}if(r===""){r="0"}let i="";if(e.length===2){i="."+(e[1]||"0")}while(i.length>2&&i[i.length-1]==="0"){i=i.substring(0,i.length-1)}const s=[];while(r.length){if(r.length<=3){s.unshift(r);break}else{const t=r.length-3;s.unshift(r.substring(t));r=r.substring(0,t)}}return n+s.join(",")+i}function Iv(t,e){if(typeof e==="string"){const t=xv.indexOf(e);if(t!==-1){e=3*t}}return fe(t,e!=null?e:18)}function Tv(t,e){if(typeof t!=="string"){Cv.throwArgumentError("value must be a string","value",t)}if(typeof e==="string"){const t=xv.indexOf(e);if(t!==-1){e=3*t}}return ce(t,e!=null?e:18)}function Ov(t){return Iv(t,18)}function Dv(t){return Tv(t,18)}const Nv=Object.freeze({__proto__:null,commify:Pv,formatUnits:Iv,parseUnits:Tv,formatEther:Ov,parseEther:Dv});const Uv=Object.freeze({__proto__:null,AbiCoder:Gn,defaultAbiCoder:Kn,Fragment:Qe,ConstructorFragment:ze,ErrorFragment:Ve,EventFragment:He,FunctionFragment:We,ParamType:Fe,FormatTypes:je,checkResultErrors:er,Logger:pt,RLP:gr,_fetchData:qh,fetchJson:Vh,poll:Yh,checkProperties:me,deepCopy:Be,defineReadOnly:ge,getStatic:ye,resolveProperties:we,shallowCopy:Ae,arrayify:Bt,concat:St,stripZeros:Ct,zeroPad:xt,isBytes:Mt,isBytesLike:Et,defaultPath:Pu,HDNode:Iu,SigningKey:rc,Interface:os,LogDescription:es,TransactionDescription:rs,base58:Xc,base64:Vn,hexlify:Tt,isHexString:Pt,hexConcat:Nt,hexStripZeros:jt,hexValue:Ut,hexZeroPad:Rt,hexDataLength:Ot,hexDataSlice:Dt,nameprep:Un,_toEscapedUtf8String:vn,toUtf8Bytes:ln,toUtf8CodePoints:gn,toUtf8String:pn,Utf8ErrorFuncs:un,formatBytes32String:yn,parseBytes32String:wn,dnsEncode:Di,hashMessage:Ui,namehash:Oi,isValidName:Ti,id:Jn,_TypedDataEncoder:Xi,getAddress:Sr,getIcapAddress:xr,getContractAddress:Pr,getCreate2Address:Ir,isAddress:Cr,formatEther:Ov,parseEther:Dv,formatUnits:Iv,parseUnits:Tv,commify:Pv,computeHmac:au,keccak256:ar,ripemd160:nu,sha256:iu,sha512:su,randomBytes:Gu,shuffled:Ku,solidityPack:Ev,solidityKeccak256:kv,soliditySha256:Mv,splitSignature:Ft,joinSignature:Lt,accessListify:gc,parseTransaction:Cc,serializeTransaction:Ec,get TransactionTypes(){return fc},getJsonWalletAddress:nh,computeAddress:dc,recoverAddress:vc,computePublicKey:ic,recoverPublicKey:nc,verifyMessage:Sh,verifyTypedData:Ch,getAccountPath:Uu,mnemonicToEntropy:Ou,entropyToMnemonic:Du,isValidMnemonic:Nu,mnemonicToSeed:Tu,get SupportedAlgorithm(){return tu},get UnicodeNormalizationForm(){return sn},get Utf8ErrorReason(){return an},Indexed:is});const jv="ethers/5.7.2";const Rv=new pt(jv);const Fv=Object.freeze({__proto__:null,Signer:ws,Wallet:Bh,VoidSigner:ms,getDefaultProvider:dv,providers:vv,BaseContract:qc,Contract:Vc,ContractFactory:Yc,BigNumber:Vt,FixedNumber:he,constants:tn,get errors(){return vt},logger:Rv,utils:Uv,wordlists:gu,version:jv,Wordlist:hu});try{const t=window;if(t._ethers==null){t._ethers=Fv}}catch(t){}const Lv=Object.freeze({__proto__:null,ethers:Fv,Signer:ws,Wallet:Bh,VoidSigner:ms,getDefaultProvider:dv,providers:vv,BaseContract:qc,Contract:Vc,ContractFactory:Yc,BigNumber:Vt,FixedNumber:he,constants:tn,get errors(){return vt},logger:Rv,utils:Uv,wordlists:gu,version:jv,Wordlist:hu});class Qv extends ${constructor(){super(...arguments);this.loadedCount=0;this.numberToLoad=25;this.autoLoadMore=true}init(){this.viewContainer.addEventListener("click",(t=>{if(t.target.classList.contains("mobileToggle-tn")){this.tokenToggleSelection()}else if(t.target.classList.contains("load-more-btn-tn")){this.loadMoreTokens()}}))}render(){this.loadedCount=0;this.viewContainer.innerHTML=this.getTokenListItems();this.renderIcons();if(this.autoLoadMore){let t=this.viewContainer.querySelector(".load-more-tn");if(t){if(!this.interceptObs)this.interceptObs=new IntersectionObserver((t=>{if(t[0].isIntersecting){this.loadMoreTokens()}}),{root:this.viewContainer.querySelector(".view-content-tn")});this.interceptObs.observe(t)}}}getTokenListItems(){let t="";let e=Math.min(this.loadedCount+this.numberToLoad,this.params.data.tokens.length);for(let r=this.loadedCount;r<e;r++){t+=this.createTokenMarkup(this.params.data.tokens[r])}this.loadedCount=e;if(this.loadedCount<this.params.data.tokens.length)t+=this.createLoadMoreMarkup();return t}loadMoreTokens(){let t=this.viewContainer.getElementsByClassName("load-more-tn")[0];if(this.interceptObs)this.interceptObs.unobserve(t);t.insertAdjacentHTML("afterend",this.getTokenListItems());t.remove();this.renderIcons();if(this.interceptObs){t=this.viewContainer.querySelector(".load-more-tn");if(t)this.interceptObs.observe(t)}}renderIcons(){for(let t of this.viewContainer.getElementsByClassName("img-container-tn")){if(t.querySelector("img"))continue;let e={src:t.getAttribute("data-image-src"),title:t.getAttribute("data-token-title")};new nt(t,e).render()}}tokenToggleSelection(){let t=this.client.getTokenStore().getSelectedTokens();this.viewContainer.querySelectorAll(".mobileToggle-tn").forEach(((e,r)=>{if(r===0){t[e.dataset.key]={};t[e.dataset.key]["tokens"]=[]}if(e.checked===true){let r=JSON.parse(e.dataset.token);t[e.dataset.key].tokens.push(r)}}));S(2,"Tokens selected:");S(2,t);this.client.updateSelectedTokens(t)}createLoadMoreMarkup(){return`\n            <li class='load-more-tn'>\n                <button class="load-more-btn-tn btn-tn">Load More</button>\n            </li>\n        `}createTokenMarkup(t){const{tokenIssuerKey:e,title:r,data:n,index:i,image:s,toggleState:a,hideToggle:o,balance:f,fungible:c,decimals:u,symbol:h}=t;let l,d;if(!c){l=i;d="#"+(i.length>15?i.substring(0,5)+"..."+i.substring(i.length-5,i.length):i)}else{const t=Iv(f,u);l=t+" "+h;d=(t.length>15?t.substring(0,12)+"... ":t)+" "+h}const v=a?"checked":"";return`\n            <li class='token-tn'>\n              <div class="img-container-tn image-tn shimmer-tn" data-image-src="${s!==null&&s!==void 0?s:""}" data-token-title="${r}"></div>\n              <div class='data-tn'>\n                  <p class='token-title-tn'>${r}</p>\n                  <p class='detail-tn' title="${l}">\n                  \t${d}\n\t\t\t\t  </p>\n                </div>`+(o?"":`<div class='toggle-tn'>\n                <input ${v} data-key='${e}' data-token='${JSON.stringify(n)}'\n\t\t\t\tdata-index='${i}' type='checkbox' name='toggle${i}' class='mobileToggle-tn toggle-tn' id='toggle${i}'>\n                <label for='toggle${i}'></label>\n              </div>`)+`</li>\n        `}}var Hv=undefined&&undefined.__awaiter||function(t,e,r,n){function i(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,s){function a(t){try{f(n.next(t))}catch(t){s(t)}}function o(t){try{f(n["throw"](t))}catch(t){s(t)}}function f(t){t.done?r(t.value):i(t.value).then(a,o)}f((n=n.apply(t,e||[])).next())}))};class Gv extends ${init(){this.client.registerUiUpdateCallback(0,(()=>{this.issuersLoading()}));this.client.registerUiUpdateCallback(1,(()=>{this.ui.dismissLoader();this.client.cancelTokenAutoload();this.render()}));this.client.registerUiUpdateCallback(2,(()=>{if(this.client.getTokenStore().hasOnChainTokens()){this.ui.updateUI("wallet",{viewName:"wallet"},{viewTransition:"slide-in-left"})}else{this.ui.updateUI("start",{viewName:"start"},{viewTransition:"slide-in-left"})}}))}render(){this.renderContent();this.afterRender()}renderContent(){this.viewContainer.innerHTML=`\n            <div class="inner-content-tn issuer-slider-tn">\n              <div class="issuer-view-tn scroll-tn">\n                <div class="brand-tn"></div>\n                <div class="headline-container-tn">\n                  <div>\n                  \t<p class="headline-tn">${this.params.options.issuerHeading}</p>\n\t\t\t\t\t\t<div class="toolbar-tn">\n\t\t\t\t  \t\t\t<button class="btn-tn refresh-tn" aria-label="Refresh Tokens">\n                  \t\t\t\t<svg class="refresh-icon-tn" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 383.748 383.748" style="enable-background:new 0 0 383.748 383.748;" xml:space="preserve"><g><path d="M62.772,95.042C90.904,54.899,137.496,30,187.343,30c83.743,0,151.874,68.13,151.874,151.874h30 C369.217,81.588,287.629,0,187.343,0c-35.038,0-69.061,9.989-98.391,28.888C70.368,40.862,54.245,56.032,41.221,73.593 L2.081,34.641v113.365h113.91L62.772,95.042z"/><path d="M381.667,235.742h-113.91l53.219,52.965c-28.132,40.142-74.724,65.042-124.571,65.042 c-83.744,0-151.874-68.13-151.874-151.874h-30c0,100.286,81.588,181.874,181.874,181.874c35.038,0,69.062-9.989,98.391-28.888 c18.584-11.975,34.707-27.145,47.731-44.706l39.139,38.952V235.742z"/></g></svg>\n\t\t\t\t  \t\t\t</button>\n\t\t\t\t\t\t\t<button class="btn-tn dis-wallet-tn" style="display: none;" aria-label="Disconnect Wallet">\n\t\t\t\t\t\t\t\t<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\t\t\t\t\t\t\t\t<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n\t\t\t\t\t\t\t\t<svg width="12px" height="100%" viewBox="0 0 384 384" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">\n\t\t\t\t\t\t\t\t\t<g id="Layer1">\n\t\t\t\t\t\t\t\t\t\t<path d="M194.449,-0.378L194.449,29.622L29.577,29.622C29.577,95.909 30.577,354.191 30.577,354.191L194.449,354.191L194.449,384.191L16.077,384.191C7.517,384.191 0.577,377.251 0.577,368.691L0.577,15.122C0.577,6.562 7.517,-0.378 16.077,-0.378L194.449,-0.378Z"/>\n\t\t\t\t\t\t\t\t\t\t\t<g transform="matrix(1.39537,0,0,2.43013,-54.9803,-262.053)">\n\t\t\t\t\t\t\t\t\t\t\t\t<path d="M99.772,200.171L99.772,165.725L228.493,165.725L228.493,133.741L314.191,182.948L228.493,232.156L228.493,200.171L99.772,200.171Z"/>\n\t\t\t\t\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t\t\t\t</svg>\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>  \t\n\t\t\t\t  </div>\n\t\t\t\t  ${this.getCustomContent()}\n                </div>\n\t\t\t\t<nav class="token-issuer-nav-tn">\n\t\t\t\t\t<ul class="token-issuer-list-container-tn" role="menubar"></ul>\n\t\t\t\t</nav>\n              </div>\n              <div class="token-view-tn scroll-tn" style="display: none;">\n                <div class="brand-tn"></div>\n                <div style="display: flex; align-items: center;">\n                  <button aria-label="back to token issuer menu" class="back-to-menu-tn">\n                    <svg style="position: relative; top: 1px;" width="32" height="32" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">\n                        <g fill="none" fill-rule="evenodd">\n                            <path d="m10.2 15.8 7.173 7.56c.55.587 1.453.587 2.01 0a1.554 1.554 0 0 0 0-2.12l-5.158-5.44 5.157-5.44a1.554 1.554 0 0 0 0-2.12 1.367 1.367 0 0 0-2.009 0L10.2 15.8z" fill="#000" fill-rule="nonzero"/>\n                        </g>\n                    </svg>\n                  </button>\n                  <p class="headline-tn token-name">Token Name Here</p>\n                </div>\n                <ul class="token-list-container-tn" role="menubar"></ul>\n              </div>\n            </div>\n        `;this.viewContainer.querySelector(".back-to-menu-tn").addEventListener("click",this.backToIssuers.bind(this));this.setupWalletButton();const t=this.viewContainer.querySelector(".refresh-tn");t.addEventListener("click",(()=>{this.client.eventSender("tokens-refreshed",null);this.autoLoadTokens(true)}));this.issuerListContainer=this.viewContainer.querySelector(".token-issuer-list-container-tn");this.tokensContainer=this.viewContainer.getElementsByClassName("token-view-tn")[0];if(!this.issuerListContainer){S(2,"Element .token-issuer-list-container-tn not found");return}this.populateIssuers();let e=this.tokensContainer.getElementsByClassName("token-list-container-tn")[0];this.tokenListView=new Qv(this.client,this.ui,e,Object.assign({},this.params))}afterRender(){if(this.client.issuersLoaded){if(this.client.getTokenStore().hasUnloadedTokens())this.autoLoadTokens()}else{this.issuersLoading()}}getCustomContent(){return""}setupWalletButton(){return Hv(this,void 0,void 0,(function*(){const t=this.viewContainer.querySelector(".dis-wallet-tn");t.style.display="block";t.addEventListener("click",(()=>{this.client.disconnectWallet()}))}))}issuersLoading(){this.ui.showLoader("<h4>Loading contract data...</h4>")}populateIssuers(){var t;let e="";let r=this.client.getTokenStore().getCurrentIssuers();for(let n in r){let i=r[n];let s=(t=this.client.getTokenStore().getIssuerTokens(n))!==null&&t!==void 0?t:[];let a=i.title?i.title:i.collectionID.replace(/[-,_]+/g," ");e+=this.issuerConnectMarkup(a,i.image,n,s,i)}this.issuerListContainer.innerHTML=e;for(let t of this.issuerListContainer.getElementsByClassName("img-container-tn")){let e={src:t.getAttribute("data-image-src"),title:t.getAttribute("data-token-title")};new nt(t,e).render()}this.issuerListContainer.addEventListener("click",(t=>{if(t.target.classList.contains("connect-btn-tn")){this.connectTokenIssuer(t)}else if(t.target.classList.contains("tokens-btn-tn")){const e=t.target.parentNode.dataset.issuer;this.navigateToTokensView(e)}}))}issuerConnectMarkup(t,e,r,n,i){let s="";if(n===null||n===void 0?void 0:n.length)s=(i===null||i===void 0?void 0:i.fungible)?"Balance found":`${n.length} token${n.length>1?"s":""} available`;return`\n            <li class="issuer-connect-banner-tn" data-issuer="${r}" role="menuitem">\n              <div tabindex="0" style="display: flex; align-items: center;">\n                <div class="img-container-tn issuer-icon-tn shimmer-tn" data-image-src="${e!==null&&e!==void 0?e:""}" data-token-title="${t}"></div>\n                <p class="issuer-connect-title">${t}</p>\n              </div>\n              <button aria-label="connect with the token issuer ${r}" aria-haspopup="true" aria-expanded="false" aria-controls="token-list-container-tn" \n\t\t\t\t\tclass="connect-btn-tn"\n\t\t\t\t\tstyle="${(n===null||n===void 0?void 0:n.length)?"display: none;":""}"\n\t\t\t\t\tdata-issuer="${r}"\n\t\t\t\t\t${this.client.issuersLoaded===true?"":"disabled"}\n\t\t\t\t>\n\t\t\t\t${this.client.issuersLoaded===true?"Load":'<div class="lds-ellipsis lds-ellipsis-sm" style=""><div></div><div></div><div></div><div></div></div>'}\n\t\t\t  </button>\n              <button aria-label="tokens available from token issuer ${r}" \n\t\t\t\t\t\t\t\t\t\t  aria-haspopup="true"\n\t\t\t\t\t\t\t\t\t\t\taria-expanded="false" aria-controls="token-list-container-tn" \n              \t\t\t\tclass="tokens-btn-tn" style="${(n===null||n===void 0?void 0:n.length)?"display: block;":""}" \n\t\t\t\t\t\t\t\t\t\t\tdata-issuer="${r}">\n\t\t\t\t\t${s}\n\t\t\t  </button>\n            </li>\n        `}backToIssuers(){this.tokensContainer.style.display="none";this.viewContainer.querySelector(".issuer-slider-tn").classList.toggle("open")}autoLoadTokens(t=false){return Hv(this,void 0,void 0,(function*(){yield this.client.tokenAutoLoad(this.issuerLoading.bind(this),((t,e)=>{if(!(e===null||e===void 0?void 0:e.length)){const e=this.issuerListContainer.querySelector(`[data-issuer*="${t}"] .connect-btn-tn`);if(e)e.innerText="Load";return}this.issuerConnected(t,e,false)}),t)}))}connectTokenIssuer(t){return Hv(this,void 0,void 0,(function*(){const e=t.target.dataset;const r=e.issuer;let n=[];this.ui.showLoader("<h4>Loading tokens...</h4>");try{n=yield this.client.connectTokenIssuer(r);if(!n)return}catch(t){S(2,t);this.ui.showError(t);this.client.eventSender("error",{issuer:r,error:t});return}this.ui.dismissLoader();if(!(n===null||n===void 0?void 0:n.length)){this.ui.showError(`No tokens found! ${this.client.getNoTokenMsg(r)}`);return}this.issuerConnected(r,n)}))}issuerLoading(t){const e=this.issuerListContainer.querySelector(`[data-issuer*="${t}"] .tokens-btn-tn`);if(e)e.style.display="none";const r=this.issuerListContainer.querySelector(`[data-issuer*="${t}"] .connect-btn-tn`);if(r){r.innerHTML='<div class="lds-ellipsis lds-ellipsis-sm" style=""><div></div><div></div><div></div><div></div></div>';r.style.display="block"}}issuerConnected(t,e,r=true){const n=this.issuerListContainer.querySelector(`[data-issuer*="${t}"] .connect-btn-tn`);const i=this.issuerListContainer.querySelector(`[data-issuer*="${t}"] .tokens-btn-tn`);if(!n||!i){S(2,"Could not find button handler")}n.style.display="none";n.setAttribute("tabIndex",-1);i.style.display="block";let s=this.client.getTokenStore().getCurrentIssuers();i.innerHTML=e.length&&s[t].fungible?"Balance found":`${e.length} token${e.length>1?"s":""} available`;i.setAttribute("aria-label",`Navigate to select from ${e.length} of your ${t} tokens`);i.setAttribute("tabIndex",1);if(r)setTimeout((()=>{this.navigateToTokensView(t)}),250)}navigateToTokensView(t){this.updateTokensView(t);this.showTokenView(t)}updateTokensView(t){var e,r;this.tokensContainer.style.display="block";this.tokensContainer.scrollTo(0,0);const n=this.client.getTokenStore();const i=n.getCurrentIssuers()[t];const s=(e=n.getIssuerTokens(t))!==null&&e!==void 0?e:[];if(i.title)this.viewContainer.getElementsByClassName("headline-tn token-name")[0].innerHTML=i.title;let a=[];s===null||s===void 0?void 0:s.map(((e,r)=>{var s,o,f,c,u;let h=false;(s=n.getSelectedTokens()[t])===null||s===void 0?void 0:s.tokens.map((t=>{if(JSON.stringify(e)===JSON.stringify(t))h=true}));if(i.onChain===false){const{title:n,image:s}=i;a.push({data:e,tokenIssuerKey:t,index:(f=(o=e.tiketIdNumber)!==null&&o!==void 0?o:e.ticketIdNumber)!==null&&f!==void 0?f:r,title:n,image:s,toggleState:h,hideToggle:i===null||i===void 0?void 0:i.hideToggle})}else{const n=(c=e.tokenId)!==null&&c!==void 0?c:r.toString();a.push({data:e,tokenIssuerKey:t,index:n,title:e.title,image:(u=e.image)!==null&&u!==void 0?u:i.image,fungible:i.fungible,decimals:i.decimals,symbol:i.symbol,balance:e.balance,toggleState:h,hideToggle:i===null||i===void 0?void 0:i.hideToggle})}}));(r=this.tokenListView)===null||r===void 0?void 0:r.update({data:{issuer:t,tokens:a}})}showTokenView(t){this.viewContainer.querySelector(".issuer-slider-tn").classList.toggle("open")}}var Kv=undefined&&undefined.__awaiter||function(t,e,r,n){function i(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,s){function a(t){try{f(n.next(t))}catch(t){s(t)}}function o(t){try{f(n["throw"](t))}catch(t){s(t)}}function f(t){t.done?r(t.value):i(t.value).then(a,o)}f((n=n.apply(t,e||[])).next())}))};const Jv='<svg width="62px" height="62px" viewBox="-30 -20 180 180" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"><title>Phantom logo</title><path d="M57.137,22.8c23.339,0.075 42.264,18.847 42.563,42.1l10.1,0c3.8,0 6.8,3 6.8,6.8c0,19.661 -32.669,36.532 -54.77,36.6l-0.13,0c-23.6,0 -47.4,-19.1 -47.4,-42.7c0,-1.6 0.1,-3.1 0.2,-4.6c2.3,-21.6 20.5,-38.2 42.5,-38.2l0.137,0Z" style="fill:url(#_Linear1);fill-rule:nonzero;"/><path d="M64,0c35.323,0 64,28.677 64,64c0,35.323 -28.677,64 -64,64c-35.323,0 -64,-28.677 -64,-64c0,-35.323 28.677,-64 64,-64Zm-7,22.8l1.366,0.021l1.23,0.057l0.528,0.035c14.242,1.029 26.545,9.033 33.507,20.608l0.521,0.891l0.499,0.902l0.478,0.915l0.455,0.928l0.434,0.939l0.411,0.952l0.388,0.963l0.365,0.974l0.342,0.985l0.394,1.246l0.332,1.166l0.282,1.114l0.265,1.179l0.224,1.148l0.198,1.19l0.147,1.053l0.12,1.062l0.095,1.068l0.067,1.077l0.042,1.083l0.01,0.544c0,0 10.1,0 10.1,0c3.8,0 6.8,3 6.8,6.8l-0.018,0.788l-0.054,0.818l-0.089,0.79l-0.125,0.802l-0.184,0.903l-0.226,0.897l-0.27,0.891l-0.31,0.885l-0.351,0.879l-0.391,0.872l-0.429,0.865l-0.51,0.933l-0.504,0.844l-0.538,0.836l-0.572,0.828l-0.605,0.818l-0.636,0.809l-0.667,0.799l-0.697,0.79l-0.726,0.779l-0.754,0.769l-0.78,0.758l-0.806,0.747l-0.831,0.736c-2.552,2.209 -5.436,4.262 -8.532,6.119l-0.553,0.328l-0.517,0.301l-0.521,0.298l-0.525,0.294l-0.527,0.29l-0.532,0.287c-6.807,3.636 -14.382,6.343 -21.59,7.752l-1.154,0.215l-0.862,0.146c-1.959,0.32 -3.883,0.539 -5.747,0.65l-1.464,0.065l-1.173,0.019l-0.13,-0c-23.6,-0 -47.4,-19.1 -47.4,-42.7c0,-1.6 0.1,-3.1 0.2,-4.6c2.3,-21.6 20.5,-38.2 42.5,-38.2Zm-17.3,34.1l0,9.1c0,3.1 -2.5,5.6 -5.6,5.6c-3.1,-0 -5.6,-2.5 -5.6,-5.6l0,-9.1c0,-3.1 2.5,-5.6 5.6,-5.6c3.1,-0 5.6,2.5 5.6,5.6Zm19.7,-0l0,9.1c0,3.1 -2.5,5.6 -5.6,5.6c-3.1,-0 -5.6,-2.5 -5.6,-5.6l0,-9.1c0,-3.1 2.5,-5.6 5.6,-5.6c3.1,-0 5.6,2.5 5.6,5.6Z" style="fill:url(#_Linear2);"/><defs><linearGradient id="_Linear1" x1="0" y1="0" x2="1" y2="0" gradientUnits="userSpaceOnUse" gradientTransform="matrix(5.23303e-15,85.4619,-85.4619,5.23303e-15,65.46,22.76)"><stop offset="0" style="stop-color:#fefeff;stop-opacity:1"/><stop offset="1" style="stop-color:#dfd8fc;stop-opacity:1"/></linearGradient><linearGradient id="_Linear2" x1="0" y1="0" x2="1" y2="0" gradientUnits="userSpaceOnUse" gradientTransform="matrix(7.83774e-15,128,-128,7.83774e-15,64,0)"><stop offset="0" style="stop-color:#534ab1;stop-opacity:1"/><stop offset="1" style="stop-color:#551bf8;stop-opacity:1"/></linearGradient></defs></svg>';const zv={imgBig:`\n\t\t<svg width="62px" version="1.1" id="Layer_1" xmlns:ev="http://www.w3.org/2001/xml-events"xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 318.6 318.6"style="enable-background:new 0 0 318.6 318.6;" xml:space="preserve"><title>Metamask logo</title><style type="text/css">.st0{fill:#E2761B;stroke:#E2761B;stroke-linecap:round;stroke-linejoin:round;}.st1{fill:#E4761B;stroke:#E4761B;stroke-linecap:round;stroke-linejoin:round;}.st2{fill:#D7C1B3;stroke:#D7C1B3;stroke-linecap:round;stroke-linejoin:round;}.st3{fill:#233447;stroke:#233447;stroke-linecap:round;stroke-linejoin:round;}.st4{fill:#CD6116;stroke:#CD6116;stroke-linecap:round;stroke-linejoin:round;}.st5{fill:#E4751F;stroke:#E4751F;stroke-linecap:round;stroke-linejoin:round;}.st6{fill:#F6851B;stroke:#F6851B;stroke-linecap:round;stroke-linejoin:round;}.st7{fill:#C0AD9E;stroke:#C0AD9E;stroke-linecap:round;stroke-linejoin:round;}.st8{fill:#161616;stroke:#161616;stroke-linecap:round;stroke-linejoin:round;}.st9{fill:#763D16;stroke:#763D16;stroke-linecap:round;stroke-linejoin:round;}</style><polygon class="st0" points="274.1,35.5 174.6,109.4 193,65.8 "/><g><polygon class="st1" points="44.4,35.5 143.1,110.1 125.6,65.8 \t"/><polygon class="st1" points="238.3,206.8 211.8,247.4 268.5,263 284.8,207.7 \t"/><polygon class="st1" points="33.9,207.7 50.1,263 106.8,247.4 80.3,206.8 \t"/><polygon class="st1" points="103.6,138.2 87.8,162.1 144.1,164.6 142.1,104.1 \t"/><polygon class="st1" points="214.9,138.2 175.9,103.4 174.6,164.6 230.8,162.1 \t"/><polygon class="st1" points="106.8,247.4 140.6,230.9 111.4,208.1 \t"/><polygon class="st1" points="177.9,230.9 211.8,247.4 207.1,208.1 \t"/></g><g><polygon class="st2" points="211.8,247.4 177.9,230.9 180.6,253 180.3,262.3 \t"/><polygon class="st2" points="106.8,247.4 138.3,262.3 138.1,253 140.6,230.9 \t"/></g><polygon class="st3" points="138.8,193.5 110.6,185.2 130.5,176.1 "/><polygon class="st3" points="179.7,193.5 188,176.1 208,185.2 "/><g><polygon class="st4" points="106.8,247.4 111.6,206.8 80.3,207.7 \t"/><polygon class="st4" points="207,206.8 211.8,247.4 238.3,207.7 \t"/><polygon class="st4" points="230.8,162.1 174.6,164.6 179.8,193.5 188.1,176.1 208.1,185.2 \t"/><polygon class="st4" points="110.6,185.2 130.6,176.1 138.8,193.5 144.1,164.6 87.8,162.1 \t"/></g><g><polygon class="st5" points="87.8,162.1 111.4,208.1 110.6,185.2 \t"/><polygon class="st5" points="208.1,185.2 207.1,208.1 230.8,162.1 \t"/><polygon class="st5" points="144.1,164.6 138.8,193.5 145.4,227.6 146.9,182.7 \t"/><polygon class="st5" points="174.6,164.6 171.9,182.6 173.1,227.6 179.8,193.5 \t"/></g><polygon class="st6" points="179.8,193.5 173.1,227.6 177.9,230.9 207.1,208.1 208.1,185.2 "/><polygon class="st6" points="110.6,185.2 111.4,208.1 140.6,230.9 145.4,227.6 138.8,193.5 "/><polygon class="st7" points="180.3,262.3 180.6,253 178.1,250.8 140.4,250.8 138.1,253 138.3,262.3 106.8,247.4 117.8,256.4 140.1,271.9 178.4,271.9 200.8,256.4 211.8,247.4 "/><polygon class="st8" points="177.9,230.9 173.1,227.6 145.4,227.6 140.6,230.9 138.1,253 140.4,250.8 178.1,250.8 180.6,253 "/><g><polygon class="st9" points="278.3,114.2 286.8,73.4 274.1,35.5 177.9,106.9 214.9,138.2 267.2,153.5 278.8,140 273.8,136.4 281.8,129.1 275.6,124.3 283.6,118.2 \t"/><polygon class="st9" points="31.8,73.4 40.3,114.2 34.9,118.2 42.9,124.3 36.8,129.1 44.8,136.4 39.8,140 51.3,153.5 103.6,138.2 140.6,106.9 44.4,35.5 \t"/></g><polygon class="st6" points="267.2,153.5 214.9,138.2 230.8,162.1 207.1,208.1 238.3,207.7 284.8,207.7 "/><polygon class="st6" points="103.6,138.2 51.3,153.5 33.9,207.7 80.3,207.7 111.4,208.1 87.8,162.1 "/><polygon class="st6" points="174.6,164.6 177.9,106.9 193.1,65.8 125.6,65.8 140.6,106.9 144.1,164.6 145.3,182.8 145.4,227.6 173.1,227.6 173.3,182.8 "/></svg>\n\t`,label:"MetaMask"};const Wv='<svg width="62px" height="62px" viewBox="0 0 319 319" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"><title>Wallet connect logo</title><g transform="matrix(1.7268,0,0,1.7268,159.3,155.744)"><g transform="matrix(1,0,0,1,-107.5,-107.5)"><path d="M55.953,84.792L72.263,100.335C72.263,100.335 84.86,78.281 106.774,78.436C106.774,78.436 126.648,75.152 143.824,101.06L160.354,85.616C160.354,85.616 143.436,59.639 107.409,59.615C107.409,59.615 79.188,56.141 55.953,84.792Z" style="fill:rgb(59,153,252);"/><path d="M42.568,93.225L25.838,109.259L74.827,157.509L107.434,125.302L141.274,157.461L188.677,109.672L172.91,93.916L141.771,126.195L107.369,93.403L74.398,126.501L42.568,93.225Z" style="fill:rgb(59,153,252);"/></g></g></svg>';const qv='<svg fill="none" width="62px" height="62px" viewBox="0 0 400 400" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><clipPath id="a"><path d="m0 0h400v400h-400z"/></clipPath><g clip-path="url(#a)"><circle cx="200" cy="200" fill="#141414" r="199.5" stroke="#3b4040"/><path d="m122.519 148.965c42.791-41.729 112.171-41.729 154.962 0l5.15 5.022c2.14 2.086 2.14 5.469 0 7.555l-17.617 17.18c-1.07 1.043-2.804 1.043-3.874 0l-7.087-6.911c-29.853-29.111-78.253-29.111-108.106 0l-7.59 7.401c-1.07 1.043-2.804 1.043-3.874 0l-17.617-17.18c-2.14-2.086-2.14-5.469 0-7.555zm191.397 35.529 15.679 15.29c2.14 2.086 2.14 5.469 0 7.555l-70.7 68.944c-2.139 2.087-5.608 2.087-7.748 0l-50.178-48.931c-.535-.522-1.402-.522-1.937 0l-50.178 48.931c-2.139 2.087-5.608 2.087-7.748 0l-70.7015-68.945c-2.1396-2.086-2.1396-5.469 0-7.555l15.6795-15.29c2.1396-2.087 5.6085-2.087 7.7481 0l50.1789 48.932c.535.522 1.402.522 1.937 0l50.177-48.932c2.139-2.087 5.608-2.087 7.748 0l50.179 48.932c.535.522 1.402.522 1.937 0l50.179-48.931c2.139-2.087 5.608-2.087 7.748 0z" fill="#fff"/></g></svg>';const Vv='<svg width="62px" height="62px" viewBox="0 0 319 319" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"><title>Torus logo</title><g transform="matrix(1.9124,0,0,1.9124,159.3,159.3)"><g transform="matrix(1,0,0,1,-107.5,-107.5)"><path d="M57.267,51.007L56.757,84.626L85.505,85.297L85.565,164.593L119.635,164.873L119.472,51.399L57.267,51.007Z" style="fill:rgb(57,150,254);"/><g transform="matrix(1.06773,0,0,1.04155,-3.94432,-8.22515)"><circle cx="139.434" cy="73.102" r="16.365" style="fill:rgb(57,150,254);"/></g></g></g></svg>';const Yv=`\n\t<svg style="pointer-events: none" xmlns="http://www.w3.org/2000/svg" width="55" height="55" viewBox="0 0 55 55"><title>Safe connect button</title><path fill="rgb(5, 26, 245)" d="M25.5 26h-5c0-2.9-0.6-5.6-1.7-8.1c-1-2.3-2.4-4.3-4.2-6.1c-1.9-1.9-4.3-3.4-6.8-4.4c-2.3-0.9-4.8-1.4-7.3-1.4v-5h7h18v6.2v5.6v6.2Z" transform="translate(13,28.5) translate(0,0) translate(-13,-13.5)"/><path fill="rgb(5, 26, 245)" d="M53 1v11.9v6.1v7h-12.8h-6.1h-6.1v-13.4v-5.2v-6.4h12.6h5.3Z" transform="translate(41.5,28.7) translate(0,0) translate(-40.5,-13.5)"/></svg>\n`;const _v=`\n\t<svg xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="svg32" x="0px" y="0px" viewBox="0 0 256 256" width="62px" height="62px" style="enable-background:new 0 0 256 256;" xml:space="preserve">\n\t\t<style type="text/css">\n\t\t\t.flow-st0{fill:#00EF8B;}\n\t\t\t.flow-st1{fill:#FFFFFF;}\n\t\t\t.flow-st2{fill:#16FF99;}\n\t\t</style>\n\t\t<sodipodi:namedview bordercolor="#666666" borderopacity="1" fit-margin-bottom="0" fit-margin-left="0" fit-margin-right="0" fit-margin-top="0" gridtolerance="10" guidetolerance="10" id="namedview34" inkscape:current-layer="Layer_1-2" inkscape:cx="-165.09584" inkscape:cy="294.4716" inkscape:pageopacity="0" inkscape:pageshadow="2" inkscape:window-height="878" inkscape:window-maximized="1" inkscape:window-width="1440" inkscape:window-x="0" inkscape:window-y="0" inkscape:zoom="0.40971549" objecttolerance="10" pagecolor="#ffffff" showgrid="false">\n\t\t</sodipodi:namedview>\n\t\t<g id="Layer_2_1_">\n\t\t\t<g id="Layer_1-2">\n\t\t\t\t<g id="g43" transform="scale(2.56)">\n\t\t\t\t\t<circle id="circle20" class="flow-st0" cx="50" cy="50" r="50"/>\n\t\t\t\t\t<rect id="rect22" x="57.8" y="42.2" class="flow-st1" width="14.1" height="14.1"/>\n\t\t\t\t\t<path id="path24" class="flow-st1" d="M43.7,61.6c0,2.9-2.4,5.3-5.3,5.3s-5.3-2.4-5.3-5.3c0-2.9,2.4-5.3,5.3-5.3c0,0,0,0,0,0h5.3V42.2 h-5.3C27.7,42.2,19,50.9,19,61.6S27.7,81,38.4,81s19.4-8.7,19.4-19.4l0,0v-5.3H43.7V61.6z"/>\n\t\t\t\t\t<path id="path26" class="flow-st1" d="M63.1,35.1H79V21H63.1c-10.7,0-19.4,8.7-19.4,19.4v1.8h14.1v-1.8C57.8,37.5,60.2,35.1,63.1,35.1 z"/>\n\t\t\t\t\t<polygon id="polygon28" class="flow-st2" points="57.8,42.2 57.8,42.2 43.7,42.2 43.7,56.3 57.8,56.3"/>\n\t\t\t\t</g>\n\t\t\t</g>\n\t\t</g>\n\t</svg>\n`;const Zv={imgSmall:`\n\t\t<img src='data:image/webp;base64,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'/>\n\t`,imgBig:`\n\t\t<img src="data:image/png;base64,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\n\t"></img>\n\t`,label:"ImToken"};const Xv={imgBig:`\n\t\t<svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024"><defs><style>.cls-1{fill:#3268ff;}.cls-2{fill:#0019ff;}</style></defs><path d="M701.4,492.41c0,31.75-25.64,57.55-57.18,57.55s-57-25.8-57-57.55,25.64-57.55,57-57.55A57.32,57.32,0,0,1,701.4,492.41Z"/><path class="cls-1" d="M770.47,246.59l-20.67,0c-.18,0-.33,0-.49,0h-3.63l-1.93,3.06c-.45.61-.87,1.27-1.3,2-2.33,3.74-5.7,9.11-9.73,15.54L731,270h0C707.75,307,665.52,374.23,662.11,379.64a114.27,114.27,0,0,1,92.36,82.85c1.22-1.91,2.5-3.82,3.68-5.74,2.17-3.62,4.61-7.25,6.92-11,9.46-14.67,99.06-156.55,120.76-191.07h0l5.06-8.06Z"/><path class="cls-2" d="M916.74,737.7c-23,27.54-49,47-82,54.79-45.37,10.72-88.45,5.8-127.2-22.32-28.08-20.44-45.22-49.14-57.75-81-.43-1-.87-2-1.3-3.34-.15-.29-.15-.59-.29-.87-3.15-8.5-8.71-23.87-14.15-40.42l-13.49,13.32v0c-36.13,36-74.8,68.88-118.85,94.53-39.47,23-82.25,38-127.63,43.63-54.59,6.81-108.45,4.63-159.16-20.3-65.11-31.89-101.69-84.21-107-157.28-4.19-56.68,10.8-109.31,36.86-158.74C185.45,382.39,243.49,320.92,317.38,275c46.39-28.85,97.24-44.79,151.82-49.43,42.78-3.62,82.68,4.2,118.4,28.41,30.25,20.58,51.14,49,66.55,81.9,4.16,9,7.9,18.17,12.1,28l2.36,5.45-6.49,10.34c.74.11,1.46.23,2.2.36v0a114.93,114.93,0,0,0-20-1.78,113.77,113.77,0,0,0-77.78,30.62c-7.31-26-15.92-51.35-29.61-74.91-9.64-16.67-21.89-31.31-39.31-40.29-22.76-11.74-46.1-9.57-69.29-2.18-32.85,10.58-58.05,32.47-79.94,58-48.4,56.4-84.84,119.89-105.58,191.66-11.24,38.7-15.28,78.42-7.21,118.57,9.22,45.24,40,72.34,83,72.2a116.8,116.8,0,0,0,43.94-8.41C399.34,709,430,685.08,458.84,658.25c33.88-31.5,62.63-67,89.26-104.38a114.13,114.13,0,0,0,181.32,14.58c7.52,19,15.32,48.14,22.69,70.81v.14c2,6.38,4,12.18,6,17.11,8.36,20.87,17.15,41.47,33.86,57l3.45,3c21.74,18.12,47.82,22.91,75.06,23.78C885.2,741,899.88,739,916.74,737.7Z"/></svg>\n\t`,label:"AlphaWallet"};const $v={imgBig:`\n\t\t<?xml version="1.0" encoding="UTF-8"?><svg id="a" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 150 150"><defs><style>.b{fill:none;}.c{fill:#4360df;fill-rule:evenodd;}</style></defs><path class="b" d="M0,0H150V150H0V0Z"/><path class="c" d="M75.01,11.35C39.32,11.35,10.42,40.28,10.42,76s28.91,64.65,64.59,64.65,64.56-28.93,64.56-64.65S110.67,11.35,75.01,11.35Zm-8.73,92.32c-8.25,.46-16.49-4.31-16.92-12.04-.46-7.61,5.75-12.7,15.98-13.25,9.05-.46,16.41,2.15,25.4,.06-1.09,13.07-11,24.51-24.45,25.23Zm10.89-30.51c-4.86-.57-11.06-.92-16.35,.37,1.18-14.25,11.61-26.72,25.83-27.53,8.71-.46,17.41,4.74,17.87,13.16,.86,13.45-15.72,15.92-27.35,13.99Z"/></svg>\n\t`,label:"Status Wallet"};const tb={imgBig:`\n\t<svg width="65" height="64" viewBox="0 0 65 64" fill="none" xmlns="http://www.w3.org/2000/svg">\n\t<g clip-path="url(#clip0)">\n\t<path d="M32.3999 64C50.073 64 64.3999 49.6731 64.3999 32C64.3999 14.3269 50.073 0 32.3999 0C14.7268 0 0.399902 14.3269 0.399902 32C0.399902 49.6731 14.7268 64 32.3999 64Z" fill="#3375BB"/>\n\t<path d="M32.6267 14C38.9508 19.2816 46.2029 18.9559 48.275 18.9559C47.8217 48.9937 44.3683 43.0373 32.6267 51.46C20.8851 43.0373 17.4533 48.9937 17 18.9559C19.0505 18.9559 26.3026 19.2816 32.6267 14Z" stroke="white" stroke-width="4" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>\n\t</g>\n\t<defs>\n\t<clipPath id="clip0">\n\t<rect width="64" height="64" fill="white" transform="translate(0.399902)"/>\n\t</clipPath>\n\t</defs>\n\t</svg>\n\t`,label:"Trust Wallet"};const eb={imgBig:`\n\t<svg class="svg-icon" style="width: 64px; height: 64px; vertical-align: middle;fill: currentColor;overflow: hidden;" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M511.996 81.86C274.448 81.86 81.86 274.444 81.86 512s192.588 430.144 430.136 430.144c237.566 0 430.15-192.588 430.15-430.144S749.562 81.86 511.996 81.86z" fill="#EDF3FC" /><path d="M511.996 2C230.782 2 2 230.786 2 512s228.782 510 509.996 510C793.214 1022 1022 793.214 1022 512S793.214 2 511.996 2z m0 1003.662C239.792 1005.662 18.338 784.204 18.338 512S239.792 18.338 511.996 18.338c272.208 0 493.666 221.458 493.666 493.662S784.204 1005.662 511.996 1005.662z" fill="#EDF3FC" /><path d="M354.6 290.83a57.74 57.74 0 0 1-41.964-41.96l-0.884-3.526-0.88 3.526a57.754 57.754 0 0 1-41.964 41.96l-3.53 0.888 3.53 0.884a57.748 57.748 0 0 1 41.964 41.96l0.88 3.526 0.884-3.526a57.736 57.736 0 0 1 41.964-41.96l3.53-0.884-3.53-0.888zM736.15 311.786a43.428 43.428 0 0 1-31.586-31.58l-0.662-2.654-0.672 2.654a43.42 43.42 0 0 1-31.582 31.58l-2.646 0.666 2.646 0.662a43.416 43.416 0 0 1 31.582 31.586l0.672 2.646 0.662-2.646a43.428 43.428 0 0 1 31.586-31.586l2.646-0.662-2.646-0.666zM606.77 186.066a68.648 68.648 0 0 1-49.896-49.892l-1.042-4.19-1.062 4.19a68.614 68.614 0 0 1-49.882 49.892l-4.184 1.052 4.184 1.05a68.586 68.586 0 0 1 49.882 49.89l1.062 4.188 1.042-4.188a68.62 68.62 0 0 1 49.896-49.89l4.194-1.05-4.194-1.052z" fill="#5D8EF9" /><path d="M343.612 415.036c0-11.48 1.216-22.676 3.494-33.48h-36.042c-27.372 0-49.622 21.858-50.282 49.058 0.3 2.17 3.184 18.5 23.052 28.882 13.252 6.93 34.736 6.85 44.884 6.85h23.262a161.25 161.25 0 0 1-8.368-51.31zM691.51 381.558h-28.202a162.244 162.244 0 0 1 3.492 33.48 161.3 161.3 0 0 1-8.368 51.314h54.508a50.072 50.072 0 0 1 28.868 9.114v-43.61c0-27.776-22.516-50.298-50.298-50.298z" fill="#6857E5" /><path d="M505.208 253.438c-89.248 0-161.596 72.35-161.596 161.598a161.3 161.3 0 0 0 8.368 51.314h306.454a161.348 161.348 0 0 0 8.368-51.314c-0.002-89.248-72.348-161.598-161.594-161.598z" fill="#5D8EF9" /><path d="M505.208 293.74c-66.992 0-121.302 54.304-121.302 121.296a120.8 120.8 0 0 0 11.386 51.314H615.12a120.794 120.794 0 0 0 11.384-51.314c0-66.992-54.304-121.296-121.296-121.296z" fill="#8AC9F9" /><path d="M505.208 333.488l-49.746 75.89 49.746 36.672 49.742-36.664z" fill="#FFFFFF" /><path d="M505.208 458.548l-49.746-39.182 30.272 46.984h38.944l30.272-46.984z" fill="#FFFFFF" /><path d="M712.942 466.35H328.716c-10.15 0-31.632 0.08-44.884-6.85-21.316-11.14-23.084-29.13-23.084-29.13V762.02c0 27.782 22.526 50.304 50.312 50.304h401.88c27.788 0 50.3-22.522 50.3-50.304V516.642c0.002-27.782-22.512-50.292-50.298-50.292z" fill="#8C7BFD" /><path d="M627.34 585.212c-12.446 0-22.542 10.092-22.542 22.542v62.03c0 12.454 10.098 22.544 22.542 22.544h135.902v-107.116H627.34z" fill="#8AC9F9" /><path d="M648.506 616.402c-12.354 0-22.37 10.012-22.37 22.37 0 12.354 10.016 22.374 22.37 22.374 12.354 0 22.366-10.02 22.366-22.374-0.002-12.358-10.012-22.37-22.366-22.37z" fill="#FFE37B" /></svg>\n\t`,label:"Embedded Wallet"};const rb={imgBig:`\t\n\t\t<?xml version="1.0" encoding="UTF-8"?>\n\t\t<svg width="218px" height="256px" viewBox="0 0 218 256" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n\t\t\t\x3c!-- Generator: Sketch 51.2 (57519) - http://www.bohemiancoding.com/sketch --\x3e\n\t\t\t<title>build-icons/Stable Copy 3</title>\n\t\t\t<desc>Created with Sketch.</desc>\n\t\t\t<defs>\n\t\t\t\t<linearGradient x1="0%" y1="50.7055163%" x2="100%" y2="50.7055163%" id="linearGradient-1">\n\t\t\t\t\t<stop stop-color="#FF5500" offset="0%"></stop>\n\t\t\t\t\t<stop stop-color="#FF5500" offset="40.9877232%"></stop>\n\t\t\t\t\t<stop stop-color="#FF2000" offset="58.1981215%"></stop>\n\t\t\t\t\t<stop stop-color="#FF2000" offset="100%"></stop>\n\t\t\t\t</linearGradient>\n\t\t\t\t<linearGradient x1="2.1484375%" y1="50.7055163%" x2="100%" y2="50.7055163%" id="linearGradient-2">\n\t\t\t\t\t<stop stop-color="#FF452A" offset="0%"></stop>\n\t\t\t\t\t<stop stop-color="#FF2000" offset="100%"></stop>\n\t\t\t\t</linearGradient>\n\t\t\t\t<path d="M170.272109,25.3359387 L147.968109,0.00010893617 L108.800109,0.00010893617 L69.6321088,0.00010893617 L47.3281088,25.3359387 C47.3281088,25.3359387 27.7441088,19.8891302 18.4961088,29.1487047 C18.4961088,29.1487047 44.6081088,26.7886026 53.5841088,41.4040238 C53.5841088,41.4040238 77.7921088,46.0338111 81.0561088,46.0338111 C84.3201088,46.0338111 91.3921088,43.3104068 97.9201088,41.1316834 C104.448109,38.95296 108.800109,38.9371643 108.800109,38.9371643 C108.800109,38.9371643 113.152109,38.95296 119.680109,41.1316834 C126.208109,43.3104068 133.280109,46.0338111 136.544109,46.0338111 C139.808109,46.0338111 164.016109,41.4040238 164.016109,41.4040238 C172.992109,26.7886026 199.104109,29.1487047 199.104109,29.1487047 C189.856109,19.8891302 170.272109,25.3359387 170.272109,25.3359387" id="path-3"></path>\n\t\t\t</defs>\n\t\t\t<g id="starting-collection" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n\t\t\t\t<g id="Build-Icons" transform="translate(-70.000000, -350.000000)">\n\t\t\t\t\t<g id="build-icons/Stable" transform="translate(50.000000, 350.000000)">\n\t\t\t\t\t\t<g id="Logo" transform="translate(20.114286, 0.000000)">\n\t\t\t\t\t\t\t<path d="M209.984109,61.2848749 L215.968109,46.5784919 C215.968109,46.5784919 208.352109,38.4082791 199.104109,29.1487047 C189.856109,19.8891302 170.272109,25.3359387 170.272109,25.3359387 L147.968109,0.00010893617 L108.800109,0.00010893617 L69.6321088,0.00010893617 L47.3281088,25.3359387 C47.3281088,25.3359387 27.7441088,19.8891302 18.4961088,29.1487047 C9.2481088,38.4082791 1.6321088,46.5784919 1.6321088,46.5784919 L7.6161088,61.2848749 L0.0001088,83.0721089 C0.0001088,83.0721089 22.3993088,168.017811 25.0241088,178.391258 C30.1921088,198.81679 33.7281088,206.714662 48.4161088,217.063598 C63.1041088,227.412534 89.7601088,245.387003 94.1121088,248.110407 C98.4641088,250.833811 103.904109,255.472858 108.800109,255.472858 C113.696109,255.472858 119.136109,250.833811 123.488109,248.110407 C127.840109,245.387003 154.496109,227.412534 169.184109,217.063598 C183.872109,206.714662 187.408109,198.81679 192.576109,178.391258 C195.200365,168.017811 217.600109,83.0721089 217.600109,83.0721089 L209.984109,61.2848749 Z" id="Head" fill="url(#linearGradient-1)"></path>\n\t\t\t\t\t\t\t<path d="M164.016109,41.4040238 C164.016109,41.4040238 192.704493,76.1274281 192.704493,83.5487047 C192.704493,90.9699813 189.095597,92.9286536 185.467117,96.7866281 C181.838637,100.644603 165.991373,117.49376 163.956269,119.657232 C161.921165,121.821249 157.684493,125.101862 160.176557,131.006747 C162.668621,136.911632 166.344973,144.425505 162.256813,152.046679 C158.168109,159.667854 151.164109,164.754628 146.676109,163.913641 C142.188109,163.072109 131.648109,157.557215 127.772109,155.038066 C123.896109,152.518917 111.611501,142.374781 111.611501,138.493386 C111.611501,134.612534 124.310093,127.643888 126.655821,126.0605 C129.002637,124.477658 139.703117,118.349454 139.922349,115.944143 C140.141037,113.538288 140.057805,112.832926 136.899885,106.889369 C133.741965,100.945266 128.054989,93.0136238 129.001549,87.7362111 C129.948109,82.459343 139.119949,79.7152409 145.665357,77.2402111 C152.209677,74.765726 164.811437,70.0918196 166.385229,69.3652153 C167.960109,68.6380664 167.553197,67.945777 162.783949,67.4931472 C158.015789,67.0405174 144.483245,65.2419813 138.382285,66.9446536 C132.281325,68.647326 121.858285,71.2378281 121.013997,72.6115132 C120.169709,73.9851983 119.424973,74.0314962 120.292109,78.7702196 C121.158701,83.508943 125.622765,106.24719 126.055789,110.285998 C126.489357,114.324807 127.336909,116.994832 122.987629,117.990509 C118.637805,118.986186 111.316109,120.715003 108.800109,120.715003 C106.284109,120.715003 98.9618688,118.986186 94.6125888,117.990509 C90.2627648,116.994832 91.1103168,114.324807 91.5438848,110.285998 C91.9774528,106.24719 96.4409728,83.508943 97.3081088,78.7702196 C98.1747008,74.0314962 97.4299648,73.9851983 96.5862208,72.6115132 C95.7419328,71.2378281 85.3183488,68.647326 79.2173888,66.9446536 C73.1164288,65.2419813 59.5844288,67.0405174 54.8157248,67.4931472 C50.0470208,67.945777 49.6401088,68.6380664 51.2144448,69.3652153 C52.7887808,70.0918196 65.3905408,74.765726 71.9348608,77.2402111 C78.4797248,79.7152409 87.6521088,82.459343 88.5986688,87.7362111 C89.5452288,93.0136238 83.8577088,100.945266 80.7003328,106.889369 C77.5424128,112.832926 77.4586368,113.538288 77.6778688,115.944143 C77.8965568,118.349454 88.5975808,124.477658 90.9438528,126.0605 C93.2901248,127.643888 105.988173,134.612534 105.988173,138.493386 C105.988173,142.374781 93.7041088,152.518917 89.8281088,155.038066 C85.9521088,157.557215 75.4121088,163.072109 70.9241088,163.913641 C66.4361088,164.754628 59.4321088,159.667854 55.3434048,152.046679 C51.2552448,144.425505 54.9315968,136.911632 57.4231168,131.006747 C59.9151808,125.101862 55.6790528,121.821249 53.6434048,119.657232 C51.6088448,117.49376 35.7610368,100.644603 32.1325568,96.7866281 C28.5040768,92.9286536 24.8957248,90.9699813 24.8957248,83.5487047 C24.8957248,76.1274281 53.5841088,41.4040238 53.5841088,41.4040238 C53.5841088,41.4040238 77.7921088,46.0338111 81.0561088,46.0338111 C84.3201088,46.0338111 91.3921088,43.3104068 97.9201088,41.1316834 C104.448109,38.95296 108.800109,38.9371643 108.800109,38.9371643 C108.800109,38.9371643 113.152109,38.95296 119.680109,41.1316834 C126.208109,43.3104068 133.280109,46.0338111 136.544109,46.0338111 C139.808109,46.0338111 164.016109,41.4040238 164.016109,41.4040238 Z M142.509504,174.227935 C144.28512,175.341263 143.202016,177.439918 141.584704,178.584837 C139.966848,179.729757 118.228064,196.584361 116.118432,198.447169 C114.008256,200.310523 110.908,203.387425 108.8,203.387425 C106.692,203.387425 103.5912,200.310523 101.481568,198.447169 C99.371392,196.584361 77.633152,179.729757 76.015296,178.584837 C74.39744,177.439918 73.31488,175.341263 75.090496,174.227935 C76.866656,173.115152 82.422528,170.306233 90.08912,166.333876 C97.754624,162.362063 107.308896,158.985042 108.8,158.985042 C110.291104,158.985042 119.844832,162.362063 127.511424,166.333876 C135.177472,170.306233 140.733344,173.115152 142.509504,174.227935 Z" id="Face" fill="#FFFFFF"></path>\n\t\t\t\t\t\t\t<mask id="mask-4" fill="white">\n\t\t\t\t\t\t\t\t<use xlink:href="#path-3"></use>\n\t\t\t\t\t\t\t</mask>\n\t\t\t\t\t\t\t<use id="Top-Head" fill="url(#linearGradient-2)" xlink:href="#path-3"></use>\n\t\t\t\t\t\t</g>\n\t\t\t\t\t</g>\n\t\t\t\t</g>\n\t\t\t</g>\n\t\t</svg>\n\t`,label:"Brave"};const nb={imgBig:`\n\t\t<img src='data:image/webp;base64,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'/>\n\t`,label:"MEW"};class ib extends ${init(){this.client.registerUiUpdateCallback(2,undefined)}render(){const t=this.client.hasIssuerForBlockchain("evm");const e=this.client.safeConnectAvailable()?`<button class="wallet-button-tn" data-wallet="SafeConnect" aria-label="Safe connect wallet button">\n\t\t\t  ${Yv}\n\t\t\t  <p>Safe Connect</p>\n\t\t\t</button>`:"";const r=F();let n=eb;if(r.brave)n=rb;if(r.anyMetamask)n=zv;if(r.mew)n=nb;if(r.trust)n=tb;if(r.status)n=$v;if(r.alphaWallet)n=Xv;if(r.imToken)n=Zv;const i=typeof window.ethereum!=="undefined"&&t?`<button class="wallet-button-tn" data-walletlabel="${n.label}" data-wallet="MetaMask" aria-label="${n.label} wallet button">\n                ${n.imgBig}\n                <p>${n.label}</p>\n            </button>`:"";const s=t?`<button class="wallet-button-tn" data-wallet="WalletConnect" aria-label="Wallet Connect button">\n\t\t\t\t${Wv}\n\t\t\t\t<p>Wallet Connect</p>\n\t\t\t</button>`:"";const a=t?`<button class="wallet-button-tn" data-wallet="WalletConnectV2" aria-label="Wallet Connect V2 button">\n\t\t\t\t${qv}\n\t\t\t\t<p>Wallet Connect V2</p>\n\t\t\t</button>`:"";const o=t?`<button class="wallet-button-tn" data-wallet="Torus" aria-label="Torus wallet button">\n\t\t\t\t${Vv}\n\t\t\t\t<p>Torus</p>\n\t\t\t</button>`:"";const f=this.client.hasIssuerForBlockchain("solana")?`<button class="wallet-button-tn" data-wallet="Phantom">\n                ${Jv}\n                <p>Phantom</p>\n            </button>`:"";const c=this.client.hasIssuerForBlockchain("flow")?`\n\t\t\t<button class="wallet-button-tn" data-wallet="Flow" aria-label="Safe connect wallet button">\n\t\t\t\t${_v}\n\t\t\t\t<p>Flow</p>\n\t\t\t</button>\n\t\t`:"";this.viewContainer.innerHTML=`\n            <div class="inner-content-tn scroll-tn">\n              <div class="wallet-selection-view-tn">\n                <div class="issuer-view-tn">\n                  <div class="brand-tn"></div>\n                  <div class="headline-container-tn">\n                    <p style="text-align: center;">Select Wallet</p>\n                  </div>\n                  <div class="wallet-button-container-tn">\n                  \t${e}\n                    ${i}\n                    ${s}\n                    ${a}\n                    ${o}\n                    ${f}\n\t\t\t\t    ${c}\n                  </div>\n                </div>\n              </div>\n            </div>\n        `;this.viewContainer.querySelectorAll(".wallet-button-tn").forEach((t=>{t.addEventListener("click",this.connectWallet.bind(this))}))}connectWallet(t){var e,r,n,i;return Kv(this,void 0,void 0,(function*(){let s=t.currentTarget.dataset.wallet;let a=t.currentTarget.dataset.walletlabel;a=a!==null&&a!==void 0?a:s;S(2,"Connect wallet: "+s);this.ui.showLoaderDelayed(["<h4>Connecting to "+a+"...</h4>","<small>You may need to unlock your wallet to continue.</small>"],500);try{yield this.client.negotiatorConnectToWallet(s);this.ui.dismissLoader();if((r=(e=this.params)===null||e===void 0?void 0:e.data)===null||r===void 0?void 0:r.connectCallback){(i=(n=this.params)===null||n===void 0?void 0:n.data)===null||i===void 0?void 0:i.connectCallback()}else{this.client.enrichTokenLookupDataOnChainTokens();this.ui.updateUI("main",{viewName:"main"},{viewTransition:"slide-in-right"})}}catch(t){this.ui.showError(t);return}}))}}var sb=undefined&&undefined.__awaiter||function(t,e,r,n){function i(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,s){function a(t){try{f(n.next(t))}catch(t){s(t)}}function o(t){try{f(n["throw"](t))}catch(t){s(t)}}function f(t){t.done?r(t.value):i(t.value).then(a,o)}f((n=n.apply(t,e||[])).next())}))};class ab{constructor(t,e){this.isStartView=true;this.loadTimer=null;this.options=t;this.client=e}initialize(){var t,e;return sb(this,void 0,void 0,(function*(){this.popupContainer=document.querySelector(this.options.containerElement);if(!this.popupContainer){this.popupContainer=document.createElement("div");this.popupContainer.className="overlay-tn";document.body.appendChild(this.popupContainer)}this.initializeUIType();this.setTheme((e=(t=this.options)===null||t===void 0?void 0:t.theme)!==null&&e!==void 0?e:"light");this.transitionContainer=this.popupContainer.querySelector(".transition-wrapper-tn");this.viewContainer=this.popupContainer.querySelector(".view-content-tn");this.loadContainer=this.popupContainer.querySelector(".load-container-tn");this.retryButton=this.loadContainer.querySelector(".dismiss-error-tn");this.retryButton.addEventListener("click",(()=>{this.dismissLoader();if(this.retryCallback){this.retryCallback();this.retryCallback=undefined;this.retryButton.innerText="Dismiss"}}));this.updateUI(yield this.getStartScreen(),{viewName:"start"})}))}getViewFactory(t){var e,r,n,i,s;let a={};if((e=this.options.viewOverrides)===null||e===void 0?void 0:e[t]){if((r=this.options.viewOverrides)===null||r===void 0?void 0:r[t].options)a=(n=this.options.viewOverrides)===null||n===void 0?void 0:n[t].options;if((i=this.options.viewOverrides)===null||i===void 0?void 0:i[t].component)return[(s=this.options.viewOverrides)===null||s===void 0?void 0:s[t].component,a]}return[this.getDefaultView(t),a]}getDefaultView(t){switch(t){case"start":return et;case"main":return Gv;case"wallet":return ib}}getStartScreen(){return sb(this,void 0,void 0,(function*(){if(this.options.alwaysShowStartScreen||!localStorage.getItem(rt.LOCAL_STORAGE_KEY)||!this.client.getTokenStore().getTotalTokenCount())return"start";if(yield this.canSkipWalletSelection()){this.client.enrichTokenLookupDataOnChainTokens();return"main"}else{return"wallet"}}))}canSkipWalletSelection(){return sb(this,void 0,void 0,(function*(){if(this.client.getTokenStore().hasOnChainTokens()){let t=yield this.client.getWalletProvider();yield t.loadConnections();return t.getConnectedWalletData().length>0}else{return true}}))}getUIContainer(){return ab.UI_CONTAINER_HTML}getFabButton(){return ab.FAB_BUTTON_HTML}initializeUIType(){this.popupContainer.classList.add(this.options.uiType+"-tn");switch(this.options.uiType){case"popup":this.options.position?this.popupContainer.classList.add(this.options.position):this.popupContainer.classList.add("bottom-right");this.popupContainer.innerHTML=this.getUIContainer()+this.getFabButton();this.popupContainer.querySelector(".overlay-fab-button-tn").addEventListener("click",this.togglePopup.bind(this));this.popupContainer.addEventListener("click",(t=>{t.stopPropagation()}));document.addEventListener("click",(()=>{this.closeOverlay()}));break;case"inline":this.popupContainer.innerHTML=this.getUIContainer();break}}closeOverlay(){if(this.options.uiType==="inline")return;this.popupContainer.classList.add("close");this.popupContainer.classList.remove("open");this.client.eventSender("closed-overlay",null)}openOverlay(){if(this.options.uiType==="inline")return;setTimeout((()=>{this.client.eventSender("opened-overlay",null);this.popupContainer.classList.add("open");this.popupContainer.classList.remove("close")}),10)}togglePopup(){C(this.popupContainer,"No overlay element found.");let t=!this.popupContainer.classList.contains("open");if(t){this.openOverlay()}else{this.closeOverlay()}}updateUI(t,e,r){let n={};if(typeof t==="string"){this.isStartView=t==="start";const[e,r]=this.getViewFactory(t);t=e;n=r}else{this.isStartView=false}if(r)n=Object.assign(Object.assign({},n),r);if(!this.viewContainer){S(3,"Element .view-content-tn not found: popup not initialized");return}let i;let s;const a=["slide-in-left","slide-in-right","slide-in-top","slide-in-bottom"];if((n===null||n===void 0?void 0:n.viewTransition)&&a.indexOf(n===null||n===void 0?void 0:n.viewTransition)>-1){i=(n===null||n===void 0?void 0:n.viewTransition)+"-tn";s=this.viewContainer;const t=document.createElement("div");this.transitionContainer.classList.add(i);t.classList.add("view-content-tn");if(i==="slide-in-left-tn"||i==="slide-in-top-tn"){this.transitionContainer.prepend(t)}else{this.transitionContainer.appendChild(t)}this.viewContainer=t}this.currentView=new t(this.client,this,this.viewContainer,{options:this.options,viewOptions:n,data:e});let o=typeof t==="string"?t:"";if(!o&&(e===null||e===void 0?void 0:e.viewName))o=e.viewName;this.client.eventSender("view-changed",{viewName:o,data:e});this.currentView.render();if(i){setTimeout((()=>{s.remove();this.transitionContainer.classList.remove("slide-in",i)}),300);this.transitionContainer.classList.add("slide-in")}}viewIsNotStart(){return!this.isStartView}showError(t,e=true){this.cancelDelayedLoader();if(typeof t!=="string"){if(t.name===fP.USER_ABORT){return this.dismissLoader()}t=t.message?t.message:t.toString()}else{if(t===fP.USER_ABORT)return this.dismissLoader()}const r=this.loadContainer.querySelector(".loader-tn");r.style.display="none";this.retryButton.style.display="block";this.loadContainer.querySelector(".loader-msg-tn").innerHTML=t;this.loadContainer.style.display="flex";if(!e){const t=this.loadContainer.querySelector(".dismiss-error-tn");t.style.display="none"}}setErrorRetryCallback(t){this.retryCallback=t;this.retryButton.innerText="Retry"}showLoaderDelayed(t,e,r=false){if(this.loadTimer)clearTimeout(this.loadTimer);this.loadTimer=setTimeout((()=>{this.showLoader(...t);if(r)this.openOverlay()}),e)}cancelDelayedLoader(){if(this.loadTimer){clearTimeout(this.loadTimer);this.loadTimer=null}}showLoader(...t){this.cancelDelayedLoader();const e=this.loadContainer.querySelector(".loader-tn");e.style.display="block";const r=this.loadContainer.querySelector(".dismiss-error-tn");r.style.display="none";this.loadContainer.querySelector(".loader-msg-tn").innerHTML=t.join("\n");this.loadContainer.style.display="flex"}dismissLoader(){this.cancelDelayedLoader();this.loadContainer.style.display="none"}setTheme(t){if(this.popupContainer){this.popupContainer.classList.remove(this.options.theme+"-tn");t=this.validateTheme(t);this.popupContainer.classList.add(t+"-tn");this.options.theme=t}}validateTheme(t){if(t&&t==="dark"){return t}return"light"}switchTheme(t){this.setTheme(t)}}ab.UI_CONTAINER_HTML=`\n\t\t<div class="overlay-content-tn" aria-label="Token negotiator overlay">\n\t\t\t<div class="load-container-tn" style="display: none;">\n\t\t\t\t<div class="lds-ellipsis loader-tn"><div></div><div></div><div></div><div></div></div>\n\t\t\t\t<div class="loader-msg-tn"></div>\n\t\t\t\t<button class="dismiss-error-tn btn-tn">Dismiss</button>\n\t\t\t</div>\n\t\t\t<div class="transition-wrapper-tn">\n\t\t\t\t<div class="view-content-tn"></div>\n\t\t\t</div>\n\t\t</div>\n\t`;ab.FAB_BUTTON_HTML=`\n\t\t<button aria-label="token negotiator toggle" class="overlay-fab-button-tn">\n\t\t  <div class="overlay-fab-button-tn-img-container"></div>\n\t\t</button>\n\t`;const ob=["evm","polygon","optimism","bsc","avalanche","fantom","goerli","mumbai","arbitrum"];const fb=t=>{if(!t)return true;const e=F();S(2,"unSupportedUserAgents: ",t);S(2,"browserData: ",e);const r=Object.keys(t);return!r.some((r=>t[r]&&e[r]))};const cb=t=>{if(t===""){const t=`You did not specify 'blockchain', the default value is evm. Check our github to see supported values.`;N(t,"warning",null,null);return"evm"}if(t==="solana"){return"solana"}if(t==="evm"){return"evm"}if(t==="flow"){return"flow"}if(ob.includes(t.toLowerCase())){N("We recommend you to set `blockchain` as 'evm'.","warning",null,null);return"evm"}const e="You set unsupported `blockchain` in the constructor. Check our github to see supported values.";N(e,"error",null,null);return t};var ub=undefined&&undefined.__awaiter||function(t,e,r,n){function i(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,s){function a(t){try{f(n.next(t))}catch(t){s(t)}}function o(t){try{f(n["throw"](t))}catch(t){s(t)}}function f(t){t.done?r(t.value):i(t.value).then(a,o)}f((n=n.apply(t,e||[])).next())}))};const hb="https://api.token-discovery.tokenscript.org";const lb=(t,e)=>ub(void 0,void 0,void 0,(function*(){let r;if("blockchain"in t&&t.blockchain==="solana"){r=vb(t,e)}else if("blockchain"in t&&t.blockchain==="flow"){r=bb(t)}else{r=db(t,e)}return j(r,true)}));const db=(t,e)=>{const{contract:r,chain:n,openSeaSlug:i}=t;let s=`${hb}/get-token-collection?smartContract=${r}&chain=${n}&blockchain=evm`;if(i)s+=`&openSeaSlug=${i}`;if(e)s+=`&ipfsBaseUrl=${e}`;return s};const vb=(t,e)=>{const{collectionAddress:r,chain:n}=t;let i=`${hb}/get-token-collection?collectionAddress=${r}&chain=${n}&blockchain=solana`;if(e)i+=`&ipfsBaseUrl=${e}`;return i};const bb=t=>{const{contract:e,chain:r}=t;let n=`${hb}/get-token-collection?smartContract=${e}&chain=${r}&blockchain=flow`;return n};const pb=(t,e,r)=>{let n;if("blockchain"in t&&t.blockchain==="solana"){n=yb(t,e,r)}else if("blockchain"in t&&t.blockchain==="flow"){n=wb(t,e)}else{n=gb(t,e,r)}return j(n,true)};const gb=(t,e,r)=>{var n;const{contract:i,chain:s,openSeaSlug:a}=t;const o=cb((n=t===null||t===void 0?void 0:t.blockchain)!==null&&n!==void 0?n:"");if(!i||!s)return undefined;let f=`${hb}/get-owner-tokens?smartContract=${i}&chain=${s}&owner=${e}&blockchain=${o}`;if(a)f+=`&openSeaSlug=${a}`;if(r)f+=`&ipfsBaseUrl=${r}`;return f};const yb=(t,e,r)=>{var n;const{chain:i,tokenProgram:s,collectionAddress:a,updateAuthority:o,symbol:f}=t;const c=cb((n=t===null||t===void 0?void 0:t.blockchain)!==null&&n!==void 0?n:"");if(!i&&(!s||!a||!o||!f))return undefined;let u=`${hb}/get-owner-tokens?chain=${i}&blockchain=${c}`;if(e)u+=`&owner=${e}`;if(f)u+=`&symbol=${f}`;if(r)u+=`&ipfsBaseUrl=${r}`;if(s)u+=`&tokenProgram=${s}`;if(a)u+=`&collectionAddress=${a}`;if(o)u+=`&updateAuthority=${o}`;return u};const wb=(t,e)=>{var r;const{contract:n,chain:i}=t;const s=cb((r=t===null||t===void 0?void 0:t.blockchain)!==null&&r!==void 0?r:"");if(!n||!i)return undefined;let a=`${hb}/get-owner-tokens?smartContract=${n}&chain=${i}&owner=${e}&blockchain=${s}`;return a};var mb=t((function(t,e){Object.defineProperty(e,"__esModule",{value:true});e.ATTESTATION_TYPE=void 0;e.ATTESTATION_TYPE={phone:0,mail:1,InetPersona:2}}));var Ab=t((function(t,e){Object.defineProperty(e,"__esModule",{value:true});e.DEBUGLEVEL=void 0;e.DEBUGLEVEL={LOW:1,MEDIUM:2,HIGH:3,VERBOSE:4}}));var Eb=t((function(t,e){Object.defineProperty(e,"__esModule",{value:true});e.ecSignatureToSRVhex=e.testsLogger=e.logger=e.isDomainValid=e.formatGeneralizedDateTime=e.ethAddressToUint8=e.hashUint8To32bytesUint8=e.hashStringTo32bytesUint8=e.getInt64Bytes=e.uint8tohex=e.BnPowMod=e.stringToArray=e.base64ToUint8array=e.pemOrBase64Orbase64urlToString=e.base64toBase64Url=e.uint8arrayToBase64=e.uint8toString=e.uint8merge=e.bnToBuf=e.bnToUint8=e.bufToBn=e.uint8ToBn=e.egcd=e.invert=e.mod=e.hexStringToBase64Url=e.hexStringToBase64=e.hexStringToUint8=e.hexStringToArray=e.stringToHex=void 0;function r(t){var e="";for(var r=0;r<t.length;r++){e+=""+t.charCodeAt(r).toString(16)}return e}e.stringToHex=r;function n(t=""){if(t.substr(0,2).toLowerCase()==="0x"){t=t.substr(2)}let e=[];let r=[...t];if(r.length%2)r.unshift("0");let n="";if(!r||typeof r=="undefined"||!r.length)return[];let i;while(r.length){n="";n+=r.shift()+r.shift();i=parseInt(n,16);if(isNaN(i)){throw new Error("hexStringToArray input is not a hex string.")}e.push(i)}return e}e.hexStringToArray=n;function i(t=""){return Uint8Array.from(n(t))}e.hexStringToUint8=i;function s(t=""){return p(i(t))}e.hexStringToBase64=s;function a(t=""){return g(p(i(t)))}e.hexStringToBase64Url=a;function o(t,e=kb.CURVE_BN256.P){const r=t%e;return r>=0n?r:e+r}e.mod=o;function f(t,e=kb.CURVE_BN256.P){if(t===0n||e<=0n){throw new Error("invert: expected positive integers")}let[r,n]=c(o(t,e),e);if(r!==1n){throw new Error("invert: does not exist")}return o(n,e)}e.invert=f;function c(t,e){let[r,n,i,s]=[0n,1n,1n,0n];while(t!==0n){let[a,o]=[e/t,e%t];let[f,c]=[r-i*a,n-s*a];[e,t]=[t,o];[r,n]=[i,s];[i,s]=[f,c]}return[e,r,n]}e.egcd=c;function u(t){return h(t)}e.uint8ToBn=u;function h(t){let e=[];let r=Uint8Array.from(t);r.forEach((function(t){var r=t.toString(16);if(r.length%2){r="0"+r}e.push(r)}));return BigInt("0x"+e.join(""))}e.bufToBn=h;function l(t){return d(t)}e.bnToUint8=l;function d(t,e=0){var r=BigInt(t).toString(16).padStart(e*2,"0");if(r.length%2){r="0"+r}var n=r.length/2;var i=new Uint8Array(n);var s=0;var a=0;while(s<n){i[s]=parseInt(r.slice(a,a+2),16);s+=1;a+=2}return i}e.bnToBuf=d;function v(t){if(t.length===1)return t[0];let e=Uint8Array.from([]);if(t.length===0)return e;for(let r=0;r<t.length;r++){if(typeof t[r]!=="object"||typeof t[r].length!=="number"){throw new Error("wrong input values")}let n=Uint8Array.from(t[r]);if(!n||!n.length){continue}let i=new Uint8Array(e.length+n.length);i.set(e);i.set(n,e.length);e=i}return e}e.uint8merge=v;function b(t){if(!t)return"";let e="";let r=t.byteLength;for(let n=0;n<r;n++){e+=String.fromCharCode(t[n])}return e}e.uint8toString=b;function p(t){let e=b(t);if(typeof window==="undefined"||!window.btoa){let e=new Buffer(t);return e.toString("base64")}else{return window.btoa(e)}}e.uint8arrayToBase64=p;function g(t){return t.split("/").join("_").split("+").join("-")}e.base64toBase64Url=g;function y(t){let e=t.split(/\r?\n/);while(e[e.length-1].trim()===""){e.pop()}if(t.slice(0,3)==="---"){e.shift();e.pop()}t=e.join("");t=t.split("_").join("/").split("-").join("+").split(".").join("=");return t}e.pemOrBase64Orbase64urlToString=y;function w(t){t=y(t);let e;if(typeof window==="undefined"||!window.atob){e=Uint8Array.from(Buffer.from(t,"base64"))}else{e=Uint8Array.from(atob(t),(t=>t.charCodeAt(0)))}return e}e.base64ToUint8array=w;function m(t){var e=[];for(var r=0;r<t.length;r++){e.push(t.charCodeAt(r))}return e}e.stringToArray=m;function A(t,e,r){let n=1n,i=t;while(e>0n){if(e&1n)n=n*i%r;i=i*i%r;e>>=1n}return n}e.BnPowMod=A;function E(t){if(!t||!t.length)return"";return Array.from(t).map((t=>("0"+t.toString(16)).slice(-2))).join("")}e.uint8tohex=E;function k(t){let e=Math.floor(t/2**32);return new Uint8Array([e,e<<8,e<<16,e<<24,t,t<<8,t<<16,t<<24].map((t=>t>>>24)))}e.getInt64Bytes=k;function M(t){return B(Uint8Array.from(m(t)))}e.hashStringTo32bytesUint8=M;function B(t){let e=Array.from(t);return v([new Uint8Array(32),new Uint8Array(n(sr.keccak256(e)))]).slice(-32)}e.hashUint8To32bytesUint8=B;function S(t){if(t.toLowerCase().match(/^0x[a-f0-9]{40}$/i)===null){throw new Error("Wrong Ethereum Address")}let e=Uint8Array.from(n(t.substr(2)));if(e.length!=20)throw new Error("wrong address length");return e}e.ethAddressToUint8=S;function C(t){var e=new Date(t),r=""+(e.getUTCMonth()+1),n=""+e.getUTCDate(),i=e.getUTCFullYear();let s=""+e.getUTCHours(),a=""+e.getUTCMinutes(),o=""+e.getUTCSeconds();if(r.length<2)r="0"+r;if(n.length<2)n="0"+n;if(s.length<2)s="0"+s;if(a.length<2)a="0"+a;if(o.length<2)o="0"+o;return[i,r,n,s,a,o].join("")+"Z"}e.formatGeneralizedDateTime=C;function x(t){try{new URL(t)}catch(t){return false}return true}e.isDomainValid=x;function P(t,...e){return}e.logger=P;function I(t,...e){return}e.testsLogger=I;function T(t,e){try{let r=t.r.toString(16).padStart(64,"0");let n=t.s;let i=t.recoveryParam;let s=e.ec.curve.n.shrn(1);if(n.cmp(s)>0){n=e.ec.curve.n.sub(n);i=1-i}let a=n.toString(16).padStart(64,"0");return r+a+(i==1?"1c":"1b")}catch(t){throw new Error("Signature format doesn't fit.")}}e.ecSignatureToSRVhex=T}));var kb=t((function(t,e){Object.defineProperty(e,"__esModule",{value:true});e.Point=e.CURVE_BN256=e.CURVES=e.CURVE_SECP256k1=void 0;e.CURVE_SECP256k1={P:2n**256n-2n**32n-977n,n:2n**256n-432420386565659656852420866394968145599n,magicExp:(2n**256n-2n**32n-977n+1n)/4n,A:0n,B:7n};e.CURVES={p256:{P:BigInt("0xFFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF"),A:BigInt("0xFFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC"),B:BigInt("0x5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B"),n:BigInt("0xFFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551"),GX:BigInt("0x6B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C296"),GY:BigInt("0x4FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5"),h:1n},secp256k1:{P:2n**256n-2n**32n-977n,A:0n,B:7n,n:2n**256n-432420386565659656852420866394968145599n,GX:55066263022277343669578718895168534326250603453777594175500187360389116729240n,GY:32670510020758816978083085130507043184471273380659243275938904335757337482424n},BN256:{P:115792089237314936872688561244471742058375878355761205198700409522629664518163n,n:115792089237314936872688561244471742058035595988840268584488757999429535617037n,magicExp:115792089237314936872688561244471742058375878355761205198700409522629664518164n>>2n,A:0n,B:3n,h:1n}};e.CURVE_BN256={P:21888242871839275222246405745257275088696311157297823662689037894645226208583n,n:21888242871839275222246405745257275088548364400416034343698204186575808495617n,A:0n,B:3n,h:1n};class r{constructor(t,r,n=e.CURVE_BN256){this.x=t;this.y=r;this.useCurve=n;this.x=(0,Eb.mod)(t,this.useCurve.P);this.y=(0,Eb.mod)(r,this.useCurve.P);this.useCurve=n}double(){const t=this.x;const e=this.y;const n=(0,Eb.mod)(3n*t**2n*(0,Eb.invert)(2n*e,this.useCurve.P),this.useCurve.P);const i=(0,Eb.mod)(n*n-2n*t,this.useCurve.P);const s=(0,Eb.mod)(n*(t-i)-e,this.useCurve.P);return new r(i,s,this.useCurve)}newZero(){return new r(0n,0n,this.useCurve)}add(t){const[e,n]=[this,t];const[i,s,a,o]=[e.x,e.y,n.x,n.y];if(i===0n||s===0n)return n;if(a===0n||o===0n)return e;if(i===a&&s===o)return this.double();if(i===a&&s===(0,Eb.mod)(-o,this.useCurve.P))return this.newZero();const f=(0,Eb.mod)((o-s)*(0,Eb.invert)(a-i,this.useCurve.P),this.useCurve.P);const c=(0,Eb.mod)(f*f-i-a,this.useCurve.P);const u=(0,Eb.mod)(f*(i-c)-s,this.useCurve.P);return new r(c,u,this.useCurve)}multiplyDA(t){let e=this.newZero();let r=this;while(t>0n){if(t&1n)e=e.add(r);r=r.double();t>>=1n}return e}isInfinity(){return this.x==null||this.y==null||this.x==0n&&this.y==0n}getEncoded(t=false){if(this.isInfinity()){return new Uint8Array(0)}let e=(0,Eb.bnToBuf)(this.x,32);if(t){return(0,Eb.uint8merge)([Uint8Array.from([2]),e])}return(0,Eb.uint8merge)([Uint8Array.from([4]),e,(0,Eb.bnToBuf)(this.y,32)])}equals(t){if(null==t){return false}let e=this.isInfinity();let r=t.isInfinity();if(e||r){return e&&r}let n=this;let i=t;return n.x===i.x&&n.y===i.y}static decodeFromHex(t,n=e.CURVE_BN256){if(t.length!=130){throw new Error("only decompressed points allowed. 65 bytes.")}return r.decodeFromUint8((0,Eb.hexStringToUint8)(t),n)}static decodeFromUint8(t,n=e.CURVE_BN256){if(t.length!=65){throw new Error("only decompressed points allowed. 65 bytes.")}let i;let s=t[0];switch(s){case 4:let e=(0,Eb.uint8ToBn)(t.slice(1,33));let s=(0,Eb.uint8ToBn)(t.slice(33));i=new r(e,s,n);break;default:throw new Error("only decompressed points allowed")}if(!i.validate()){let t=`Point is not valid (`+i.x.toString(16)+","+i.y.toString(16)+`)`;(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,t);throw new Error(t)}return i}validate(t=false){if(typeof t==="boolean"){t=this.useCurve}let e=(0,Eb.mod)((0,Eb.mod)(this.y*this.y,t.P)-(0,Eb.mod)((0,Eb.BnPowMod)(this.x,3n,t.P)+(0,Eb.mod)(this.x*t.A,t.P)+t.B,t.P),t.P);return e==0n}negate(){return new r(this.x,this.useCurve.P-this.y,this.useCurve)}subtract(t){return this.add(t.negate())}}e.Point=r}));var Mb=t((function(t,e){Object.defineProperty(e,"__esModule",{value:true});const r="[object ArrayBuffer]";class n{static isArrayBuffer(t){return Object.prototype.toString.call(t)===r}static toArrayBuffer(t){if(this.isArrayBuffer(t)){return t}if(t.byteLength===t.buffer.byteLength){return t.buffer}return this.toUint8Array(t).slice().buffer}static toUint8Array(t){return this.toView(t,Uint8Array)}static toView(t,e){if(t.constructor===e){return t}if(this.isArrayBuffer(t)){return new e(t)}if(this.isArrayBufferView(t)){return new e(t.buffer,t.byteOffset,t.byteLength)}throw new TypeError("The provided value is not of type '(ArrayBuffer or ArrayBufferView)'")}static isBufferSource(t){return this.isArrayBufferView(t)||this.isArrayBuffer(t)}static isArrayBufferView(t){return ArrayBuffer.isView(t)||t&&this.isArrayBuffer(t.buffer)}static isEqual(t,e){const r=n.toUint8Array(t);const i=n.toUint8Array(e);if(r.length!==i.byteLength){return false}for(let t=0;t<r.length;t++){if(r[t]!==i[t]){return false}}return true}static concat(...t){if(Array.isArray(t[0])){const e=t[0];let r=0;for(const t of e){r+=t.byteLength}const n=new Uint8Array(r);let i=0;for(const t of e){const e=this.toUint8Array(t);n.set(e,i);i+=e.length}if(t[1]){return this.toView(n,t[1])}return n.buffer}else{return this.concat(t)}}}class i{static fromString(t){const e=unescape(encodeURIComponent(t));const r=new Uint8Array(e.length);for(let t=0;t<e.length;t++){r[t]=e.charCodeAt(t)}return r.buffer}static toString(t){const e=n.toUint8Array(t);let r="";for(let t=0;t<e.length;t++){r+=String.fromCharCode(e[t])}const i=decodeURIComponent(escape(r));return i}}class s{static toString(t,e=false){const r=n.toArrayBuffer(t);const i=new DataView(r);let s="";for(let t=0;t<r.byteLength;t+=2){const r=i.getUint16(t,e);s+=String.fromCharCode(r)}return s}static fromString(t,e=false){const r=new ArrayBuffer(t.length*2);const n=new DataView(r);for(let r=0;r<t.length;r++){n.setUint16(r*2,t.charCodeAt(r),e)}return r}}class a{static isHex(t){return typeof t==="string"&&/^[a-z0-9]+$/i.test(t)}static isBase64(t){return typeof t==="string"&&/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t)}static isBase64Url(t){return typeof t==="string"&&/^[a-zA-Z0-9-_]+$/i.test(t)}static ToString(t,e="utf8"){const r=n.toUint8Array(t);switch(e.toLowerCase()){case"utf8":return this.ToUtf8String(r);case"binary":return this.ToBinary(r);case"hex":return this.ToHex(r);case"base64":return this.ToBase64(r);case"base64url":return this.ToBase64Url(r);case"utf16le":return s.toString(r,true);case"utf16":case"utf16be":return s.toString(r);default:throw new Error(`Unknown type of encoding '${e}'`)}}static FromString(t,e="utf8"){if(!t){return new ArrayBuffer(0)}switch(e.toLowerCase()){case"utf8":return this.FromUtf8String(t);case"binary":return this.FromBinary(t);case"hex":return this.FromHex(t);case"base64":return this.FromBase64(t);case"base64url":return this.FromBase64Url(t);case"utf16le":return s.fromString(t,true);case"utf16":case"utf16be":return s.fromString(t);default:throw new Error(`Unknown type of encoding '${e}'`)}}static ToBase64(t){const e=n.toUint8Array(t);if(typeof btoa!=="undefined"){const t=this.ToString(e,"binary");return btoa(t)}else{return Buffer.from(e).toString("base64")}}static FromBase64(t){const e=this.formatString(t);if(!e){return new ArrayBuffer(0)}if(!a.isBase64(e)){throw new TypeError("Argument 'base64Text' is not Base64 encoded")}if(typeof atob!=="undefined"){return this.FromBinary(atob(e))}else{return new Uint8Array(Buffer.from(e,"base64")).buffer}}static FromBase64Url(t){const e=this.formatString(t);if(!e){return new ArrayBuffer(0)}if(!a.isBase64Url(e)){throw new TypeError("Argument 'base64url' is not Base64Url encoded")}return this.FromBase64(this.Base64Padding(e.replace(/\-/g,"+").replace(/\_/g,"/")))}static ToBase64Url(t){return this.ToBase64(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}static FromUtf8String(t,e=a.DEFAULT_UTF8_ENCODING){switch(e){case"ascii":return this.FromBinary(t);case"utf8":return i.fromString(t);case"utf16":case"utf16be":return s.fromString(t);case"utf16le":case"usc2":return s.fromString(t,true);default:throw new Error(`Unknown type of encoding '${e}'`)}}static ToUtf8String(t,e=a.DEFAULT_UTF8_ENCODING){switch(e){case"ascii":return this.ToBinary(t);case"utf8":return i.toString(t);case"utf16":case"utf16be":return s.toString(t);case"utf16le":case"usc2":return s.toString(t,true);default:throw new Error(`Unknown type of encoding '${e}'`)}}static FromBinary(t){const e=t.length;const r=new Uint8Array(e);for(let n=0;n<e;n++){r[n]=t.charCodeAt(n)}return r.buffer}static ToBinary(t){const e=n.toUint8Array(t);let r="";for(let t=0;t<e.length;t++){r+=String.fromCharCode(e[t])}return r}static ToHex(t){const e=n.toUint8Array(t);const r="";const i=[];const s=e.length;for(let t=0;t<s;t++){const r=e[t].toString(16).padStart(2,"0");i.push(r)}return i.join(r)}static FromHex(t){let e=this.formatString(t);if(!e){return new ArrayBuffer(0)}if(!a.isHex(e)){throw new TypeError("Argument 'hexString' is not HEX encoded")}if(e.length%2){e=`0${e}`}const r=new Uint8Array(e.length/2);for(let t=0;t<e.length;t=t+2){const n=e.slice(t,t+2);r[t/2]=parseInt(n,16)}return r.buffer}static ToUtf16String(t,e=false){return s.toString(t,e)}static FromUtf16String(t,e=false){return s.fromString(t,e)}static Base64Padding(t){const e=4-t.length%4;if(e<4){for(let r=0;r<e;r++){t+="="}}return t}static formatString(t){return(t===null||t===void 0?void 0:t.replace(/[\n\r\t ]/g,""))||""}}a.DEFAULT_UTF8_ENCODING="utf8";function o(t,...e){const r=arguments[0];for(let t=1;t<arguments.length;t++){const e=arguments[t];for(const t in e){r[t]=e[t]}}return r}function f(...t){const e=t.map((t=>t.byteLength)).reduce(((t,e)=>t+e));const r=new Uint8Array(e);let n=0;t.map((t=>new Uint8Array(t))).forEach((t=>{for(const e of t){r[n++]=e}}));return r.buffer}function c(t,e){if(!(t&&e)){return false}if(t.byteLength!==e.byteLength){return false}const r=new Uint8Array(t);const n=new Uint8Array(e);for(let e=0;e<t.byteLength;e++){if(r[e]!==n[e]){return false}}return true}e.BufferSourceConverter=n;e.Convert=a;e.assign=o;e.combine=f;e.isEqual=c}));
/*!
 Copyright (c) Peculiar Ventures, LLC
*/function Bb(t,e){let r=0;if(t.length===1){return t[0]}for(let n=t.length-1;n>=0;n--){r+=t[t.length-1-n]*Math.pow(2,e*n)}return r}function Sb(t,e,r=-1){const n=r;let i=t;let s=0;let a=Math.pow(2,e);for(let r=1;r<8;r++){if(t<a){let t;if(n<0){t=new ArrayBuffer(r);s=r}else{if(n<r){return new ArrayBuffer(0)}t=new ArrayBuffer(n);s=n}const a=new Uint8Array(t);for(let t=r-1;t>=0;t--){const r=Math.pow(2,t*e);a[s-t-1]=Math.floor(i/r);i-=a[s-t-1]*r}return t}a*=Math.pow(2,e)}return new ArrayBuffer(0)}function Cb(...t){let e=0;let r=0;for(const r of t){e+=r.length}const n=new ArrayBuffer(e);const i=new Uint8Array(n);for(const e of t){i.set(e,r);r+=e.length}return i}function xb(){const t=new Uint8Array(this.valueHex);if(this.valueHex.byteLength>=2){const e=t[0]===255&&t[1]&128;const r=t[0]===0&&(t[1]&128)===0;if(e||r){this.warnings.push("Needlessly long format")}}const e=new ArrayBuffer(this.valueHex.byteLength);const r=new Uint8Array(e);for(let t=0;t<this.valueHex.byteLength;t++){r[t]=0}r[0]=t[0]&128;const n=Bb(r,8);const i=new ArrayBuffer(this.valueHex.byteLength);const s=new Uint8Array(i);for(let e=0;e<this.valueHex.byteLength;e++){s[e]=t[e]}s[0]&=127;const a=Bb(s,8);return a-n}function Pb(t){const e=t<0?t*-1:t;let r=128;for(let n=1;n<8;n++){if(e<=r){if(t<0){const t=r-e;const i=Sb(t,8,n);const s=new Uint8Array(i);s[0]|=128;return i}let i=Sb(e,8,n);let s=new Uint8Array(i);if(s[0]&128){const t=i.slice(0);const e=new Uint8Array(t);i=new ArrayBuffer(i.byteLength+1);s=new Uint8Array(i);for(let r=0;r<t.byteLength;r++){s[r+1]=e[r]}s[0]=0}return i}r*=Math.pow(2,8)}return new ArrayBuffer(0)}function Ib(t,e){if(t.byteLength!==e.byteLength){return false}const r=new Uint8Array(t);const n=new Uint8Array(e);for(let t=0;t<r.length;t++){if(r[t]!==n[t]){return false}}return true}function Tb(t,e){const r=t.toString(10);if(e<r.length){return""}const n=e-r.length;const i=new Array(n);for(let t=0;t<n;t++){i[t]="0"}const s=i.join("");return s.concat(r)}
/*!
 * Copyright (c) 2014, GMO GlobalSign
 * Copyright (c) 2015-2022, Peculiar Ventures
 * All rights reserved.
 * 
 * Author 2014-2019, Yury Strozhevsky
 * 
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 * 
 * * Redistributions of source code must retain the above copyright notice, this
 *   list of conditions and the following disclaimer.
 * 
 * * Redistributions in binary form must reproduce the above copyright notice, this
 *   list of conditions and the following disclaimer in the documentation and/or
 *   other materials provided with the distribution.
 * 
 * * Neither the name of the copyright holder nor the names of its
 *   contributors may be used to endorse or promote products derived from
 *   this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR
 * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
 * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 * 
 */function Ob(){if(typeof BigInt==="undefined"){throw new Error("BigInt is not defined. Your environment doesn't implement BigInt.")}}function Db(t){let e=0;let r=0;for(let r=0;r<t.length;r++){const n=t[r];e+=n.byteLength}const n=new Uint8Array(e);for(let e=0;e<t.length;e++){const i=t[e];n.set(new Uint8Array(i),r);r+=i.byteLength}return n.buffer}function Nb(t,e,r,n){if(!(e instanceof Uint8Array)){t.error="Wrong parameter: inputBuffer must be 'Uint8Array'";return false}if(!e.byteLength){t.error="Wrong parameter: inputBuffer has zero length";return false}if(r<0){t.error="Wrong parameter: inputOffset less than zero";return false}if(n<0){t.error="Wrong parameter: inputLength less than zero";return false}if(e.byteLength-r-n<0){t.error="End of input reached before message was fully decoded (inconsistent offset and length values)";return false}return true}class Ub{constructor(){this.items=[]}write(t){this.items.push(t)}final(){return Db(this.items)}}const jb=[new Uint8Array([1])];const Rb="0123456789";const Fb="name";const Lb="valueHexView";const Qb="isHexOnly";const Hb="idBlock";const Gb="tagClass";const Kb="tagNumber";const Jb="isConstructed";const zb="fromBER";const Wb="toBER";const qb="local";const Vb="";const Yb=new ArrayBuffer(0);const _b=new Uint8Array(0);const Zb="EndOfContent";const Xb="OCTET STRING";const $b="BIT STRING";function tp(t){var e;return e=class e extends t{constructor(...t){var e;super(...t);const r=t[0]||{};this.isHexOnly=(e=r.isHexOnly)!==null&&e!==void 0?e:false;this.valueHexView=r.valueHex?Mb.BufferSourceConverter.toUint8Array(r.valueHex):_b}get valueHex(){return this.valueHexView.slice().buffer}set valueHex(t){this.valueHexView=new Uint8Array(t)}fromBER(t,e,r){const n=t instanceof ArrayBuffer?new Uint8Array(t):t;if(!Nb(this,n,e,r)){return-1}const i=e+r;this.valueHexView=n.subarray(e,i);if(!this.valueHexView.length){this.warnings.push("Zero buffer length");return e}this.blockLength=r;return i}toBER(t=false){if(!this.isHexOnly){this.error="Flag 'isHexOnly' is not set, abort";return Yb}if(t){return new ArrayBuffer(this.valueHexView.byteLength)}return this.valueHexView.byteLength===this.valueHexView.buffer.byteLength?this.valueHexView.buffer:this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),isHexOnly:this.isHexOnly,valueHex:Mb.Convert.ToHex(this.valueHexView)}}},e.NAME="hexBlock",e}class ep{constructor({blockLength:t=0,error:e=Vb,warnings:r=[],valueBeforeDecode:n=_b}={}){this.blockLength=t;this.error=e;this.warnings=r;this.valueBeforeDecodeView=Mb.BufferSourceConverter.toUint8Array(n)}static blockName(){return this.NAME}get valueBeforeDecode(){return this.valueBeforeDecodeView.slice().buffer}set valueBeforeDecode(t){this.valueBeforeDecodeView=new Uint8Array(t)}toJSON(){return{blockName:this.constructor.NAME,blockLength:this.blockLength,error:this.error,warnings:this.warnings,valueBeforeDecode:Mb.Convert.ToHex(this.valueBeforeDecodeView)}}}ep.NAME="baseBlock";class rp extends ep{fromBER(t,e,r){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}toBER(t,e){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}}rp.NAME="valueBlock";class np extends(tp(ep)){constructor({idBlock:t={}}={}){var e,r,n,i;super();if(t){this.isHexOnly=(e=t.isHexOnly)!==null&&e!==void 0?e:false;this.valueHexView=t.valueHex?Mb.BufferSourceConverter.toUint8Array(t.valueHex):_b;this.tagClass=(r=t.tagClass)!==null&&r!==void 0?r:-1;this.tagNumber=(n=t.tagNumber)!==null&&n!==void 0?n:-1;this.isConstructed=(i=t.isConstructed)!==null&&i!==void 0?i:false}else{this.tagClass=-1;this.tagNumber=-1;this.isConstructed=false}}toBER(t=false){let e=0;switch(this.tagClass){case 1:e|=0;break;case 2:e|=64;break;case 3:e|=128;break;case 4:e|=192;break;default:this.error="Unknown tag class";return Yb}if(this.isConstructed)e|=32;if(this.tagNumber<31&&!this.isHexOnly){const r=new Uint8Array(1);if(!t){let t=this.tagNumber;t&=31;e|=t;r[0]=e}return r.buffer}if(!this.isHexOnly){const r=Sb(this.tagNumber,7);const n=new Uint8Array(r);const i=r.byteLength;const s=new Uint8Array(i+1);s[0]=e|31;if(!t){for(let t=0;t<i-1;t++)s[t+1]=n[t]|128;s[i]=n[i-1]}return s.buffer}const r=new Uint8Array(this.valueHexView.byteLength+1);r[0]=e|31;if(!t){const t=this.valueHexView;for(let e=0;e<t.length-1;e++)r[e+1]=t[e]|128;r[this.valueHexView.byteLength]=t[t.length-1]}return r.buffer}fromBER(t,e,r){const n=Mb.BufferSourceConverter.toUint8Array(t);if(!Nb(this,n,e,r)){return-1}const i=n.subarray(e,e+r);if(i.length===0){this.error="Zero buffer length";return-1}const s=i[0]&192;switch(s){case 0:this.tagClass=1;break;case 64:this.tagClass=2;break;case 128:this.tagClass=3;break;case 192:this.tagClass=4;break;default:this.error="Unknown tag class";return-1}this.isConstructed=(i[0]&32)===32;this.isHexOnly=false;const a=i[0]&31;if(a!==31){this.tagNumber=a;this.blockLength=1}else{let t=1;let e=this.valueHexView=new Uint8Array(255);let r=255;while(i[t]&128){e[t-1]=i[t]&127;t++;if(t>=i.length){this.error="End of input reached before message was fully decoded";return-1}if(t===r){r+=255;const t=new Uint8Array(r);for(let r=0;r<e.length;r++)t[r]=e[r];e=this.valueHexView=new Uint8Array(r)}}this.blockLength=t+1;e[t-1]=i[t]&127;const n=new Uint8Array(t);for(let r=0;r<t;r++)n[r]=e[r];e=this.valueHexView=new Uint8Array(t);e.set(n);if(this.blockLength<=9)this.tagNumber=Bb(e,7);else{this.isHexOnly=true;this.warnings.push("Tag too long, represented as hex-coded")}}if(this.tagClass===1&&this.isConstructed){switch(this.tagNumber){case 1:case 2:case 5:case 6:case 9:case 13:case 14:case 23:case 24:case 31:case 32:case 33:case 34:this.error="Constructed encoding used for primitive type";return-1}}return e+this.blockLength}toJSON(){return{...super.toJSON(),tagClass:this.tagClass,tagNumber:this.tagNumber,isConstructed:this.isConstructed}}}np.NAME="identificationBlock";class ip extends ep{constructor({lenBlock:t={}}={}){var e,r,n;super();this.isIndefiniteForm=(e=t.isIndefiniteForm)!==null&&e!==void 0?e:false;this.longFormUsed=(r=t.longFormUsed)!==null&&r!==void 0?r:false;this.length=(n=t.length)!==null&&n!==void 0?n:0}fromBER(t,e,r){const n=Mb.BufferSourceConverter.toUint8Array(t);if(!Nb(this,n,e,r)){return-1}const i=n.subarray(e,e+r);if(i.length===0){this.error="Zero buffer length";return-1}if(i[0]===255){this.error="Length block 0xFF is reserved by standard";return-1}this.isIndefiniteForm=i[0]===128;if(this.isIndefiniteForm){this.blockLength=1;return e+this.blockLength}this.longFormUsed=!!(i[0]&128);if(this.longFormUsed===false){this.length=i[0];this.blockLength=1;return e+this.blockLength}const s=i[0]&127;if(s>8){this.error="Too big integer";return-1}if(s+1>i.length){this.error="End of input reached before message was fully decoded";return-1}const a=e+1;const o=n.subarray(a,a+s);if(o[s-1]===0)this.warnings.push("Needlessly long encoded length");this.length=Bb(o,8);if(this.longFormUsed&&this.length<=127)this.warnings.push("Unnecessary usage of long length form");this.blockLength=s+1;return e+this.blockLength}toBER(t=false){let e;let r;if(this.length>127)this.longFormUsed=true;if(this.isIndefiniteForm){e=new ArrayBuffer(1);if(t===false){r=new Uint8Array(e);r[0]=128}return e}if(this.longFormUsed){const n=Sb(this.length,8);if(n.byteLength>127){this.error="Too big length";return Yb}e=new ArrayBuffer(n.byteLength+1);if(t)return e;const i=new Uint8Array(n);r=new Uint8Array(e);r[0]=n.byteLength|128;for(let t=0;t<n.byteLength;t++)r[t+1]=i[t];return e}e=new ArrayBuffer(1);if(t===false){r=new Uint8Array(e);r[0]=this.length}return e}toJSON(){return{...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,longFormUsed:this.longFormUsed,length:this.length}}}ip.NAME="lengthBlock";const sp={};class ap extends ep{constructor({name:t=Vb,optional:e=false,primitiveSchema:r,...n}={},i){super(n);this.name=t;this.optional=e;if(r){this.primitiveSchema=r}this.idBlock=new np(n);this.lenBlock=new ip(n);this.valueBlock=i?new i(n):new rp(n)}fromBER(t,e,r){const n=this.valueBlock.fromBER(t,e,this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);if(n===-1){this.error=this.valueBlock.error;return n}if(!this.idBlock.error.length)this.blockLength+=this.idBlock.blockLength;if(!this.lenBlock.error.length)this.blockLength+=this.lenBlock.blockLength;if(!this.valueBlock.error.length)this.blockLength+=this.valueBlock.blockLength;return n}toBER(t,e){const r=e||new Ub;if(!e){op(this)}const n=this.idBlock.toBER(t);r.write(n);if(this.lenBlock.isIndefiniteForm){r.write(new Uint8Array([128]).buffer);this.valueBlock.toBER(t,r);r.write(new ArrayBuffer(2))}else{const e=this.valueBlock.toBER(t);this.lenBlock.length=e.byteLength;const n=this.lenBlock.toBER(t);r.write(n);r.write(e)}if(!e){return r.final()}return Yb}toJSON(){const t={...super.toJSON(),idBlock:this.idBlock.toJSON(),lenBlock:this.lenBlock.toJSON(),valueBlock:this.valueBlock.toJSON(),name:this.name,optional:this.optional};if(this.primitiveSchema)t.primitiveSchema=this.primitiveSchema.toJSON();return t}toString(t="ascii"){if(t==="ascii"){return this.onAsciiEncoding()}return Mb.Convert.ToHex(this.toBER())}onAsciiEncoding(){return`${this.constructor.NAME} : ${Mb.Convert.ToHex(this.valueBlock.valueBeforeDecodeView)}`}isEqual(t){if(this===t){return true}if(!(t instanceof this.constructor)){return false}const e=this.toBER();const r=t.toBER();return Ib(e,r)}}ap.NAME="BaseBlock";function op(t){if(t instanceof sp.Constructed){for(const e of t.valueBlock.value){if(op(e)){t.lenBlock.isIndefiniteForm=true}}}return!!t.lenBlock.isIndefiniteForm}class fp extends ap{constructor({value:t=Vb,...e}={},r){super(e,r);if(t){this.fromString(t)}}getValue(){return this.valueBlock.value}setValue(t){this.valueBlock.value=t}fromBER(t,e,r){const n=this.valueBlock.fromBER(t,e,this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);if(n===-1){this.error=this.valueBlock.error;return n}this.fromBuffer(this.valueBlock.valueHexView);if(!this.idBlock.error.length)this.blockLength+=this.idBlock.blockLength;if(!this.lenBlock.error.length)this.blockLength+=this.lenBlock.blockLength;if(!this.valueBlock.error.length)this.blockLength+=this.valueBlock.blockLength;return n}onAsciiEncoding(){return`${this.constructor.NAME} : '${this.valueBlock.value}'`}}fp.NAME="BaseStringBlock";class cp extends(tp(rp)){constructor({isHexOnly:t=true,...e}={}){super(e);this.isHexOnly=t}}cp.NAME="PrimitiveValueBlock";var up;class hp extends ap{constructor(t={}){super(t,cp);this.idBlock.isConstructed=false}}up=hp;(()=>{sp.Primitive=up})();hp.NAME="PRIMITIVE";function lp(t,e){if(t instanceof e){return t}const r=new e;r.idBlock=t.idBlock;r.lenBlock=t.lenBlock;r.warnings=t.warnings;r.valueBeforeDecodeView=t.valueBeforeDecodeView;return r}function dp(t,e=0,r=t.length){const n=e;let i=new ap({},rp);const s=new ep;if(!Nb(s,t,e,r)){i.error=s.error;return{offset:-1,result:i}}const a=t.subarray(e,e+r);if(!a.length){i.error="Zero buffer length";return{offset:-1,result:i}}let o=i.idBlock.fromBER(t,e,r);if(i.idBlock.warnings.length){i.warnings.concat(i.idBlock.warnings)}if(o===-1){i.error=i.idBlock.error;return{offset:-1,result:i}}e=o;r-=i.idBlock.blockLength;o=i.lenBlock.fromBER(t,e,r);if(i.lenBlock.warnings.length){i.warnings.concat(i.lenBlock.warnings)}if(o===-1){i.error=i.lenBlock.error;return{offset:-1,result:i}}e=o;r-=i.lenBlock.blockLength;if(!i.idBlock.isConstructed&&i.lenBlock.isIndefiniteForm){i.error="Indefinite length form used for primitive encoding form";return{offset:-1,result:i}}let f=ap;switch(i.idBlock.tagClass){case 1:if(i.idBlock.tagNumber>=37&&i.idBlock.isHexOnly===false){i.error="UNIVERSAL 37 and upper tags are reserved by ASN.1 standard";return{offset:-1,result:i}}switch(i.idBlock.tagNumber){case 0:if(i.idBlock.isConstructed&&i.lenBlock.length>0){i.error="Type [UNIVERSAL 0] is reserved";return{offset:-1,result:i}}f=sp.EndOfContent;break;case 1:f=sp.Boolean;break;case 2:f=sp.Integer;break;case 3:f=sp.BitString;break;case 4:f=sp.OctetString;break;case 5:f=sp.Null;break;case 6:f=sp.ObjectIdentifier;break;case 10:f=sp.Enumerated;break;case 12:f=sp.Utf8String;break;case 13:f=sp.RelativeObjectIdentifier;break;case 14:f=sp.TIME;break;case 15:i.error="[UNIVERSAL 15] is reserved by ASN.1 standard";return{offset:-1,result:i};case 16:f=sp.Sequence;break;case 17:f=sp.Set;break;case 18:f=sp.NumericString;break;case 19:f=sp.PrintableString;break;case 20:f=sp.TeletexString;break;case 21:f=sp.VideotexString;break;case 22:f=sp.IA5String;break;case 23:f=sp.UTCTime;break;case 24:f=sp.GeneralizedTime;break;case 25:f=sp.GraphicString;break;case 26:f=sp.VisibleString;break;case 27:f=sp.GeneralString;break;case 28:f=sp.UniversalString;break;case 29:f=sp.CharacterString;break;case 30:f=sp.BmpString;break;case 31:f=sp.DATE;break;case 32:f=sp.TimeOfDay;break;case 33:f=sp.DateTime;break;case 34:f=sp.Duration;break;default:{const t=i.idBlock.isConstructed?new sp.Constructed:new sp.Primitive;t.idBlock=i.idBlock;t.lenBlock=i.lenBlock;t.warnings=i.warnings;i=t}}break;case 2:case 3:case 4:default:{f=i.idBlock.isConstructed?sp.Constructed:sp.Primitive}}i=lp(i,f);o=i.fromBER(t,e,i.lenBlock.isIndefiniteForm?r:i.lenBlock.length);i.valueBeforeDecodeView=t.subarray(n,n+i.blockLength);return{offset:o,result:i}}function vp(t){if(!t.byteLength){const t=new ap({},rp);t.error="Input buffer has zero length";return{offset:-1,result:t}}return dp(Mb.BufferSourceConverter.toUint8Array(t).slice(),0,t.byteLength)}function bp(t,e){if(t){return 1}return e}class pp extends rp{constructor({value:t=[],isIndefiniteForm:e=false,...r}={}){super(r);this.value=t;this.isIndefiniteForm=e}fromBER(t,e,r){const n=Mb.BufferSourceConverter.toUint8Array(t);if(!Nb(this,n,e,r)){return-1}this.valueBeforeDecodeView=n.subarray(e,e+r);if(this.valueBeforeDecodeView.length===0){this.warnings.push("Zero buffer length");return e}let i=e;while(bp(this.isIndefiniteForm,r)>0){const t=dp(n,i,r);if(t.offset===-1){this.error=t.result.error;this.warnings.concat(t.result.warnings);return-1}i=t.offset;this.blockLength+=t.result.blockLength;r-=t.result.blockLength;this.value.push(t.result);if(this.isIndefiniteForm&&t.result.constructor.NAME===Zb){break}}if(this.isIndefiniteForm){if(this.value[this.value.length-1].constructor.NAME===Zb){this.value.pop()}else{this.warnings.push("No EndOfContent block encoded")}}return i}toBER(t,e){const r=e||new Ub;for(let e=0;e<this.value.length;e++){this.value[e].toBER(t,r)}if(!e){return r.final()}return Yb}toJSON(){const t={...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,value:[]};for(const e of this.value){t.value.push(e.toJSON())}return t}}pp.NAME="ConstructedValueBlock";var gp;class yp extends ap{constructor(t={}){super(t,pp);this.idBlock.isConstructed=true}fromBER(t,e,r){this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm;const n=this.valueBlock.fromBER(t,e,this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);if(n===-1){this.error=this.valueBlock.error;return n}if(!this.idBlock.error.length)this.blockLength+=this.idBlock.blockLength;if(!this.lenBlock.error.length)this.blockLength+=this.lenBlock.blockLength;if(!this.valueBlock.error.length)this.blockLength+=this.valueBlock.blockLength;return n}onAsciiEncoding(){const t=[];for(const e of this.valueBlock.value){t.push(e.toString("ascii").split("\n").map((t=>`  ${t}`)).join("\n"))}const e=this.idBlock.tagClass===3?`[${this.idBlock.tagNumber}]`:this.constructor.NAME;return t.length?`${e} :\n${t.join("\n")}`:`${e} :`}}gp=yp;(()=>{sp.Constructed=gp})();yp.NAME="CONSTRUCTED";class wp extends rp{fromBER(t,e,r){return e}toBER(t){return Yb}}wp.override="EndOfContentValueBlock";var mp;class Ap extends ap{constructor(t={}){super(t,wp);this.idBlock.tagClass=1;this.idBlock.tagNumber=0}}mp=Ap;(()=>{sp.EndOfContent=mp})();Ap.NAME=Zb;var Ep;class kp extends ap{constructor(t={}){super(t,rp);this.idBlock.tagClass=1;this.idBlock.tagNumber=5}fromBER(t,e,r){if(this.lenBlock.length>0)this.warnings.push("Non-zero length of value block for Null type");if(!this.idBlock.error.length)this.blockLength+=this.idBlock.blockLength;if(!this.lenBlock.error.length)this.blockLength+=this.lenBlock.blockLength;this.blockLength+=r;if(e+r>t.byteLength){this.error="End of input reached before message was fully decoded (inconsistent offset and length values)";return-1}return e+r}toBER(t,e){const r=new ArrayBuffer(2);if(!t){const t=new Uint8Array(r);t[0]=5;t[1]=0}if(e){e.write(r)}return r}onAsciiEncoding(){return`${this.constructor.NAME}`}}Ep=kp;(()=>{sp.Null=Ep})();kp.NAME="NULL";class Mp extends(tp(rp)){constructor({value:t,...e}={}){super(e);if(e.valueHex){this.valueHexView=Mb.BufferSourceConverter.toUint8Array(e.valueHex)}else{this.valueHexView=new Uint8Array(1)}if(t){this.value=t}}get value(){for(const t of this.valueHexView){if(t>0){return true}}return false}set value(t){this.valueHexView[0]=t?255:0}fromBER(t,e,r){const n=Mb.BufferSourceConverter.toUint8Array(t);if(!Nb(this,n,e,r)){return-1}this.valueHexView=n.subarray(e,e+r);if(r>1)this.warnings.push("Boolean value encoded in more then 1 octet");this.isHexOnly=true;xb.call(this);this.blockLength=r;return e+r}toBER(){return this.valueHexView.slice()}toJSON(){return{...super.toJSON(),value:this.value}}}Mp.NAME="BooleanValueBlock";var Bp;class Sp extends ap{constructor(t={}){super(t,Mp);this.idBlock.tagClass=1;this.idBlock.tagNumber=1}getValue(){return this.valueBlock.value}setValue(t){this.valueBlock.value=t}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.getValue}`}}Bp=Sp;(()=>{sp.Boolean=Bp})();Sp.NAME="BOOLEAN";class Cp extends(tp(pp)){constructor({isConstructed:t=false,...e}={}){super(e);this.isConstructed=t}fromBER(t,e,r){let n=0;if(this.isConstructed){this.isHexOnly=false;n=pp.prototype.fromBER.call(this,t,e,r);if(n===-1)return n;for(let t=0;t<this.value.length;t++){const e=this.value[t].constructor.NAME;if(e===Zb){if(this.isIndefiniteForm)break;else{this.error="EndOfContent is unexpected, OCTET STRING may consists of OCTET STRINGs only";return-1}}if(e!==Xb){this.error="OCTET STRING may consists of OCTET STRINGs only";return-1}}}else{this.isHexOnly=true;n=super.fromBER(t,e,r);this.blockLength=r}return n}toBER(t,e){if(this.isConstructed)return pp.prototype.toBER.call(this,t,e);return t?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),isConstructed:this.isConstructed}}}Cp.NAME="OctetStringValueBlock";var xp;class Pp extends ap{constructor({idBlock:t={},lenBlock:e={},...r}={}){var n,i;(n=r.isConstructed)!==null&&n!==void 0?n:r.isConstructed=!!((i=r.value)===null||i===void 0?void 0:i.length);super({idBlock:{isConstructed:r.isConstructed,...t},lenBlock:{...e,isIndefiniteForm:!!r.isIndefiniteForm},...r},Cp);this.idBlock.tagClass=1;this.idBlock.tagNumber=4}fromBER(t,e,r){this.valueBlock.isConstructed=this.idBlock.isConstructed;this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm;if(r===0){if(this.idBlock.error.length===0)this.blockLength+=this.idBlock.blockLength;if(this.lenBlock.error.length===0)this.blockLength+=this.lenBlock.blockLength;return e}if(!this.valueBlock.isConstructed){const n=t instanceof ArrayBuffer?new Uint8Array(t):t;const i=n.subarray(e,e+r);try{if(i.byteLength){const t=dp(i,0,i.byteLength);if(t.offset!==-1&&t.offset===r){this.valueBlock.value=[t.result]}}}catch(t){}}return super.fromBER(t,e,r)}onAsciiEncoding(){if(this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length){return yp.prototype.onAsciiEncoding.call(this)}return`${this.constructor.NAME} : ${Mb.Convert.ToHex(this.valueBlock.valueHexView)}`}getValue(){if(!this.idBlock.isConstructed){return this.valueBlock.valueHexView.slice().buffer}const t=[];for(const e of this.valueBlock.value){if(e instanceof Pp){t.push(e.valueBlock.valueHexView)}}return Mb.BufferSourceConverter.concat(t)}}xp=Pp;(()=>{sp.OctetString=xp})();Pp.NAME=Xb;class Ip extends(tp(pp)){constructor({unusedBits:t=0,isConstructed:e=false,...r}={}){super(r);this.unusedBits=t;this.isConstructed=e;this.blockLength=this.valueHexView.byteLength}fromBER(t,e,r){if(!r){return e}let n=-1;if(this.isConstructed){n=pp.prototype.fromBER.call(this,t,e,r);if(n===-1)return n;for(const t of this.value){const e=t.constructor.NAME;if(e===Zb){if(this.isIndefiniteForm)break;else{this.error="EndOfContent is unexpected, BIT STRING may consists of BIT STRINGs only";return-1}}if(e!==$b){this.error="BIT STRING may consists of BIT STRINGs only";return-1}const r=t.valueBlock;if(this.unusedBits>0&&r.unusedBits>0){this.error='Using of "unused bits" inside constructive BIT STRING allowed for least one only';return-1}this.unusedBits=r.unusedBits}return n}const i=Mb.BufferSourceConverter.toUint8Array(t);if(!Nb(this,i,e,r)){return-1}const s=i.subarray(e,e+r);this.unusedBits=s[0];if(this.unusedBits>7){this.error="Unused bits for BitString must be in range 0-7";return-1}if(!this.unusedBits){const t=s.subarray(1);try{if(t.byteLength){const e=dp(t,0,t.byteLength);if(e.offset!==-1&&e.offset===r-1){this.value=[e.result]}}}catch(t){}}this.valueHexView=s.subarray(1);this.blockLength=s.length;return e+r}toBER(t,e){if(this.isConstructed){return pp.prototype.toBER.call(this,t,e)}if(t){return new ArrayBuffer(this.valueHexView.byteLength+1)}if(!this.valueHexView.byteLength){return Yb}const r=new Uint8Array(this.valueHexView.length+1);r[0]=this.unusedBits;r.set(this.valueHexView,1);return r.buffer}toJSON(){return{...super.toJSON(),unusedBits:this.unusedBits,isConstructed:this.isConstructed}}}Ip.NAME="BitStringValueBlock";var Tp;class Op extends ap{constructor({idBlock:t={},lenBlock:e={},...r}={}){var n,i;(n=r.isConstructed)!==null&&n!==void 0?n:r.isConstructed=!!((i=r.value)===null||i===void 0?void 0:i.length);super({idBlock:{isConstructed:r.isConstructed,...t},lenBlock:{...e,isIndefiniteForm:!!r.isIndefiniteForm},...r},Ip);this.idBlock.tagClass=1;this.idBlock.tagNumber=3}fromBER(t,e,r){this.valueBlock.isConstructed=this.idBlock.isConstructed;this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm;return super.fromBER(t,e,r)}onAsciiEncoding(){if(this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length){return yp.prototype.onAsciiEncoding.call(this)}else{const t=[];const e=this.valueBlock.valueHexView;for(const r of e){t.push(r.toString(2).padStart(8,"0"))}const r=t.join("");return`${this.constructor.NAME} : ${r.substring(0,r.length-this.valueBlock.unusedBits)}`}}}Tp=Op;(()=>{sp.BitString=Tp})();Op.NAME=$b;var Dp;function Np(t,e){const r=new Uint8Array([0]);const n=new Uint8Array(t);const i=new Uint8Array(e);let s=n.slice(0);const a=s.length-1;const o=i.slice(0);const f=o.length-1;let c=0;const u=f<a?a:f;let h=0;for(let t=u;t>=0;t--,h++){switch(true){case h<o.length:c=s[a-h]+o[f-h]+r[0];break;default:c=s[a-h]+r[0]}r[0]=c/10;switch(true){case h>=s.length:s=Cb(new Uint8Array([c%10]),s);break;default:s[a-h]=c%10}}if(r[0]>0)s=Cb(r,s);return s}function Up(t){if(t>=jb.length){for(let e=jb.length;e<=t;e++){const t=new Uint8Array([0]);let r=jb[e-1].slice(0);for(let e=r.length-1;e>=0;e--){const n=new Uint8Array([(r[e]<<1)+t[0]]);t[0]=n[0]/10;r[e]=n[0]%10}if(t[0]>0)r=Cb(t,r);jb.push(r)}}return jb[t]}function jp(t,e){let r=0;const n=new Uint8Array(t);const i=new Uint8Array(e);const s=n.slice(0);const a=s.length-1;const o=i.slice(0);const f=o.length-1;let c;let u=0;for(let t=f;t>=0;t--,u++){c=s[a-u]-o[f-u]-r;switch(true){case c<0:r=1;s[a-u]=c+10;break;default:r=0;s[a-u]=c}}if(r>0){for(let t=a-f+1;t>=0;t--,u++){c=s[a-u]-r;if(c<0){r=1;s[a-u]=c+10}else{r=0;s[a-u]=c;break}}}return s.slice()}class Rp extends(tp(rp)){constructor({value:t,...e}={}){super(e);this._valueDec=0;if(e.valueHex){this.setValueHex()}if(t!==undefined){this.valueDec=t}}setValueHex(){if(this.valueHexView.length>=4){this.warnings.push("Too big Integer for decoding, hex only");this.isHexOnly=true;this._valueDec=0}else{this.isHexOnly=false;if(this.valueHexView.length>0){this._valueDec=xb.call(this)}}}set valueDec(t){this._valueDec=t;this.isHexOnly=false;this.valueHexView=new Uint8Array(Pb(t))}get valueDec(){return this._valueDec}fromDER(t,e,r,n=0){const i=this.fromBER(t,e,r);if(i===-1)return i;const s=this.valueHexView;if(s[0]===0&&(s[1]&128)!==0){this.valueHexView=s.subarray(1)}else{if(n!==0){if(s.length<n){if(n-s.length>1)n=s.length+1;this.valueHexView=s.subarray(n-s.length)}}}return i}toDER(t=false){const e=this.valueHexView;switch(true){case(e[0]&128)!==0:{const t=new Uint8Array(this.valueHexView.length+1);t[0]=0;t.set(e,1);this.valueHexView=t}break;case e[0]===0&&(e[1]&128)===0:{this.valueHexView=this.valueHexView.subarray(1)}break}return this.toBER(t)}fromBER(t,e,r){const n=super.fromBER(t,e,r);if(n===-1){return n}this.setValueHex();return n}toBER(t){return t?new ArrayBuffer(this.valueHexView.length):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}toString(){const t=this.valueHexView.length*8-1;let e=new Uint8Array(this.valueHexView.length*8/3);let r=0;let n;const i=this.valueHexView;let s="";let a=false;for(let a=i.byteLength-1;a>=0;a--){n=i[a];for(let i=0;i<8;i++){if((n&1)===1){switch(r){case t:e=jp(Up(r),e);s="-";break;default:e=Np(e,Up(r))}}r++;n>>=1}}for(let t=0;t<e.length;t++){if(e[t])a=true;if(a)s+=Rb.charAt(e[t])}if(a===false)s+=Rb.charAt(0);return s}}Dp=Rp;Rp.NAME="IntegerValueBlock";(()=>{Object.defineProperty(Dp.prototype,"valueHex",{set:function(t){this.valueHexView=new Uint8Array(t);this.setValueHex()},get:function(){return this.valueHexView.slice().buffer}})})();var Fp;class Lp extends ap{constructor(t={}){super(t,Rp);this.idBlock.tagClass=1;this.idBlock.tagNumber=2}toBigInt(){Ob();return BigInt(this.valueBlock.toString())}static fromBigInt(t){Ob();const e=BigInt(t);const r=new Ub;const n=e.toString(16).replace(/^-/,"");const i=new Uint8Array(Mb.Convert.FromHex(n));if(e<0){const t=new Uint8Array(i.length+(i[0]&128?1:0));t[0]|=128;const n=BigInt(`0x${Mb.Convert.ToHex(t)}`);const s=n+e;const a=Mb.BufferSourceConverter.toUint8Array(Mb.Convert.FromHex(s.toString(16)));a[0]|=128;r.write(a)}else{if(i[0]&128){r.write(new Uint8Array([0]))}r.write(i)}const s=new Lp({valueHex:r.final()});return s}convertToDER(){const t=new Lp({valueHex:this.valueBlock.valueHexView});t.valueBlock.toDER();return t}convertFromDER(){return new Lp({valueHex:this.valueBlock.valueHexView[0]===0?this.valueBlock.valueHexView.subarray(1):this.valueBlock.valueHexView})}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()}`}}Fp=Lp;(()=>{sp.Integer=Fp})();Lp.NAME="INTEGER";var Qp;class Hp extends Lp{constructor(t={}){super(t);this.idBlock.tagClass=1;this.idBlock.tagNumber=10}}Qp=Hp;(()=>{sp.Enumerated=Qp})();Hp.NAME="ENUMERATED";class Gp extends(tp(rp)){constructor({valueDec:t=-1,isFirstSid:e=false,...r}={}){super(r);this.valueDec=t;this.isFirstSid=e}fromBER(t,e,r){if(!r){return e}const n=Mb.BufferSourceConverter.toUint8Array(t);if(!Nb(this,n,e,r)){return-1}const i=n.subarray(e,e+r);this.valueHexView=new Uint8Array(r);for(let t=0;t<r;t++){this.valueHexView[t]=i[t]&127;this.blockLength++;if((i[t]&128)===0)break}const s=new Uint8Array(this.blockLength);for(let t=0;t<this.blockLength;t++){s[t]=this.valueHexView[t]}this.valueHexView=s;if((i[this.blockLength-1]&128)!==0){this.error="End of input reached before message was fully decoded";return-1}if(this.valueHexView[0]===0)this.warnings.push("Needlessly long format of SID encoding");if(this.blockLength<=8)this.valueDec=Bb(this.valueHexView,7);else{this.isHexOnly=true;this.warnings.push("Too big SID for decoding, hex only")}return e+this.blockLength}set valueBigInt(t){Ob();let e=BigInt(t).toString(2);while(e.length%7){e="0"+e}const r=new Uint8Array(e.length/7);for(let t=0;t<r.length;t++){r[t]=parseInt(e.slice(t*7,t*7+7),2)+(t+1<r.length?128:0)}this.fromBER(r.buffer,0,r.length)}toBER(t){if(this.isHexOnly){if(t)return new ArrayBuffer(this.valueHexView.byteLength);const e=this.valueHexView;const r=new Uint8Array(this.blockLength);for(let t=0;t<this.blockLength-1;t++)r[t]=e[t]|128;r[this.blockLength-1]=e[this.blockLength-1];return r.buffer}const e=Sb(this.valueDec,7);if(e.byteLength===0){this.error="Error during encoding SID value";return Yb}const r=new Uint8Array(e.byteLength);if(!t){const t=new Uint8Array(e);const n=e.byteLength-1;for(let e=0;e<n;e++)r[e]=t[e]|128;r[n]=t[n]}return r}toString(){let t="";if(this.isHexOnly)t=Mb.Convert.ToHex(this.valueHexView);else{if(this.isFirstSid){let e=this.valueDec;if(this.valueDec<=39)t="0.";else{if(this.valueDec<=79){t="1.";e-=40}else{t="2.";e-=80}}t+=e.toString()}else t=this.valueDec.toString()}return t}toJSON(){return{...super.toJSON(),valueDec:this.valueDec,isFirstSid:this.isFirstSid}}}Gp.NAME="sidBlock";class Kp extends rp{constructor({value:t=Vb,...e}={}){super(e);this.value=[];if(t){this.fromString(t)}}fromBER(t,e,r){let n=e;while(r>0){const e=new Gp;n=e.fromBER(t,n,r);if(n===-1){this.blockLength=0;this.error=e.error;return n}if(this.value.length===0)e.isFirstSid=true;this.blockLength+=e.blockLength;r-=e.blockLength;this.value.push(e)}return n}toBER(t){const e=[];for(let r=0;r<this.value.length;r++){const n=this.value[r].toBER(t);if(n.byteLength===0){this.error=this.value[r].error;return Yb}e.push(n)}return Db(e)}fromString(t){this.value=[];let e=0;let r=0;let n="";let i=false;do{r=t.indexOf(".",e);if(r===-1)n=t.substring(e);else n=t.substring(e,r);e=r+1;if(i){const t=this.value[0];let e=0;switch(t.valueDec){case 0:break;case 1:e=40;break;case 2:e=80;break;default:this.value=[];return}const r=parseInt(n,10);if(isNaN(r))return;t.valueDec=r+e;i=false}else{const t=new Gp;if(n>Number.MAX_SAFE_INTEGER){Ob();const e=BigInt(n);t.valueBigInt=e}else{t.valueDec=parseInt(n,10);if(isNaN(t.valueDec))return}if(!this.value.length){t.isFirstSid=true;i=true}this.value.push(t)}}while(r!==-1)}toString(){let t="";let e=false;for(let r=0;r<this.value.length;r++){e=this.value[r].isHexOnly;let n=this.value[r].toString();if(r!==0)t=`${t}.`;if(e){n=`{${n}}`;if(this.value[r].isFirstSid)t=`2.{${n} - 80}`;else t+=n}else t+=n}return t}toJSON(){const t={...super.toJSON(),value:this.toString(),sidArray:[]};for(let e=0;e<this.value.length;e++){t.sidArray.push(this.value[e].toJSON())}return t}}Kp.NAME="ObjectIdentifierValueBlock";var Jp;class zp extends ap{constructor(t={}){super(t,Kp);this.idBlock.tagClass=1;this.idBlock.tagNumber=6}getValue(){return this.valueBlock.toString()}setValue(t){this.valueBlock.fromString(t)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}}Jp=zp;(()=>{sp.ObjectIdentifier=Jp})();zp.NAME="OBJECT IDENTIFIER";class Wp extends(tp(ep)){constructor({valueDec:t=0,...e}={}){super(e);this.valueDec=t}fromBER(t,e,r){if(r===0)return e;const n=Mb.BufferSourceConverter.toUint8Array(t);if(!Nb(this,n,e,r))return-1;const i=n.subarray(e,e+r);this.valueHexView=new Uint8Array(r);for(let t=0;t<r;t++){this.valueHexView[t]=i[t]&127;this.blockLength++;if((i[t]&128)===0)break}const s=new Uint8Array(this.blockLength);for(let t=0;t<this.blockLength;t++)s[t]=this.valueHexView[t];this.valueHexView=s;if((i[this.blockLength-1]&128)!==0){this.error="End of input reached before message was fully decoded";return-1}if(this.valueHexView[0]===0)this.warnings.push("Needlessly long format of SID encoding");if(this.blockLength<=8)this.valueDec=Bb(this.valueHexView,7);else{this.isHexOnly=true;this.warnings.push("Too big SID for decoding, hex only")}return e+this.blockLength}toBER(t){if(this.isHexOnly){if(t)return new ArrayBuffer(this.valueHexView.byteLength);const e=this.valueHexView;const r=new Uint8Array(this.blockLength);for(let t=0;t<this.blockLength-1;t++)r[t]=e[t]|128;r[this.blockLength-1]=e[this.blockLength-1];return r.buffer}const e=Sb(this.valueDec,7);if(e.byteLength===0){this.error="Error during encoding SID value";return Yb}const r=new Uint8Array(e.byteLength);if(!t){const t=new Uint8Array(e);const n=e.byteLength-1;for(let e=0;e<n;e++)r[e]=t[e]|128;r[n]=t[n]}return r.buffer}toString(){let t="";if(this.isHexOnly)t=Mb.Convert.ToHex(this.valueHexView);else{t=this.valueDec.toString()}return t}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}}Wp.NAME="relativeSidBlock";class qp extends rp{constructor({value:t=Vb,...e}={}){super(e);this.value=[];if(t){this.fromString(t)}}fromBER(t,e,r){let n=e;while(r>0){const e=new Wp;n=e.fromBER(t,n,r);if(n===-1){this.blockLength=0;this.error=e.error;return n}this.blockLength+=e.blockLength;r-=e.blockLength;this.value.push(e)}return n}toBER(t,e){const r=[];for(let e=0;e<this.value.length;e++){const n=this.value[e].toBER(t);if(n.byteLength===0){this.error=this.value[e].error;return Yb}r.push(n)}return Db(r)}fromString(t){this.value=[];let e=0;let r=0;let n="";do{r=t.indexOf(".",e);if(r===-1)n=t.substring(e);else n=t.substring(e,r);e=r+1;const i=new Wp;i.valueDec=parseInt(n,10);if(isNaN(i.valueDec))return true;this.value.push(i)}while(r!==-1);return true}toString(){let t="";let e=false;for(let r=0;r<this.value.length;r++){e=this.value[r].isHexOnly;let n=this.value[r].toString();if(r!==0)t=`${t}.`;if(e){n=`{${n}}`;t+=n}else t+=n}return t}toJSON(){const t={...super.toJSON(),value:this.toString(),sidArray:[]};for(let e=0;e<this.value.length;e++)t.sidArray.push(this.value[e].toJSON());return t}}qp.NAME="RelativeObjectIdentifierValueBlock";var Vp;class Yp extends ap{constructor(t={}){super(t,qp);this.idBlock.tagClass=1;this.idBlock.tagNumber=13}getValue(){return this.valueBlock.toString()}setValue(t){this.valueBlock.fromString(t)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}}Vp=Yp;(()=>{sp.RelativeObjectIdentifier=Vp})();Yp.NAME="RelativeObjectIdentifier";var _p;class Zp extends yp{constructor(t={}){super(t);this.idBlock.tagClass=1;this.idBlock.tagNumber=16}}_p=Zp;(()=>{sp.Sequence=_p})();Zp.NAME="SEQUENCE";var Xp;class $p extends yp{constructor(t={}){super(t);this.idBlock.tagClass=1;this.idBlock.tagNumber=17}}Xp=$p;(()=>{sp.Set=Xp})();$p.NAME="SET";class tg extends(tp(rp)){constructor({...t}={}){super(t);this.isHexOnly=true;this.value=Vb}toJSON(){return{...super.toJSON(),value:this.value}}}tg.NAME="StringValueBlock";class eg extends tg{}eg.NAME="SimpleStringValueBlock";class rg extends fp{constructor({...t}={}){super(t,eg)}fromBuffer(t){this.valueBlock.value=String.fromCharCode.apply(null,Mb.BufferSourceConverter.toUint8Array(t))}fromString(t){const e=t.length;const r=this.valueBlock.valueHexView=new Uint8Array(e);for(let n=0;n<e;n++)r[n]=t.charCodeAt(n);this.valueBlock.value=t}}rg.NAME="SIMPLE STRING";class ng extends rg{fromBuffer(t){this.valueBlock.valueHexView=Mb.BufferSourceConverter.toUint8Array(t);try{this.valueBlock.value=Mb.Convert.ToUtf8String(t)}catch(e){this.warnings.push(`Error during "decodeURIComponent": ${e}, using raw string`);this.valueBlock.value=Mb.Convert.ToBinary(t)}}fromString(t){this.valueBlock.valueHexView=new Uint8Array(Mb.Convert.FromUtf8String(t));this.valueBlock.value=t}}ng.NAME="Utf8StringValueBlock";var ig;class sg extends ng{constructor(t={}){super(t);this.idBlock.tagClass=1;this.idBlock.tagNumber=12}}ig=sg;(()=>{sp.Utf8String=ig})();sg.NAME="UTF8String";class ag extends rg{fromBuffer(t){this.valueBlock.value=Mb.Convert.ToUtf16String(t);this.valueBlock.valueHexView=Mb.BufferSourceConverter.toUint8Array(t)}fromString(t){this.valueBlock.value=t;this.valueBlock.valueHexView=new Uint8Array(Mb.Convert.FromUtf16String(t))}}ag.NAME="BmpStringValueBlock";var og;class fg extends ag{constructor({...t}={}){super(t);this.idBlock.tagClass=1;this.idBlock.tagNumber=30}}og=fg;(()=>{sp.BmpString=og})();fg.NAME="BMPString";class cg extends rg{fromBuffer(t){const e=ArrayBuffer.isView(t)?t.slice().buffer:t.slice(0);const r=new Uint8Array(e);for(let t=0;t<r.length;t+=4){r[t]=r[t+3];r[t+1]=r[t+2];r[t+2]=0;r[t+3]=0}this.valueBlock.value=String.fromCharCode.apply(null,new Uint32Array(e))}fromString(t){const e=t.length;const r=this.valueBlock.valueHexView=new Uint8Array(e*4);for(let n=0;n<e;n++){const e=Sb(t.charCodeAt(n),8);const i=new Uint8Array(e);if(i.length>4)continue;const s=4-i.length;for(let t=i.length-1;t>=0;t--)r[n*4+t+s]=i[t]}this.valueBlock.value=t}}cg.NAME="UniversalStringValueBlock";var ug;class hg extends cg{constructor({...t}={}){super(t);this.idBlock.tagClass=1;this.idBlock.tagNumber=28}}ug=hg;(()=>{sp.UniversalString=ug})();hg.NAME="UniversalString";var lg;class dg extends rg{constructor(t={}){super(t);this.idBlock.tagClass=1;this.idBlock.tagNumber=18}}lg=dg;(()=>{sp.NumericString=lg})();dg.NAME="NumericString";var vg;class bg extends rg{constructor(t={}){super(t);this.idBlock.tagClass=1;this.idBlock.tagNumber=19}}vg=bg;(()=>{sp.PrintableString=vg})();bg.NAME="PrintableString";var pg;class gg extends rg{constructor(t={}){super(t);this.idBlock.tagClass=1;this.idBlock.tagNumber=20}}pg=gg;(()=>{sp.TeletexString=pg})();gg.NAME="TeletexString";var yg;class wg extends rg{constructor(t={}){super(t);this.idBlock.tagClass=1;this.idBlock.tagNumber=21}}yg=wg;(()=>{sp.VideotexString=yg})();wg.NAME="VideotexString";var mg;class Ag extends rg{constructor(t={}){super(t);this.idBlock.tagClass=1;this.idBlock.tagNumber=22}}mg=Ag;(()=>{sp.IA5String=mg})();Ag.NAME="IA5String";var Eg;class kg extends rg{constructor(t={}){super(t);this.idBlock.tagClass=1;this.idBlock.tagNumber=25}}Eg=kg;(()=>{sp.GraphicString=Eg})();kg.NAME="GraphicString";var Mg;class Bg extends rg{constructor(t={}){super(t);this.idBlock.tagClass=1;this.idBlock.tagNumber=26}}Mg=Bg;(()=>{sp.VisibleString=Mg})();Bg.NAME="VisibleString";var Sg;class Cg extends rg{constructor(t={}){super(t);this.idBlock.tagClass=1;this.idBlock.tagNumber=27}}Sg=Cg;(()=>{sp.GeneralString=Sg})();Cg.NAME="GeneralString";var xg;class Pg extends rg{constructor(t={}){super(t);this.idBlock.tagClass=1;this.idBlock.tagNumber=29}}xg=Pg;(()=>{sp.CharacterString=xg})();Pg.NAME="CharacterString";var Ig;class Tg extends Bg{constructor({value:t,valueDate:e,...r}={}){super(r);this.year=0;this.month=0;this.day=0;this.hour=0;this.minute=0;this.second=0;if(t){this.fromString(t);this.valueBlock.valueHexView=new Uint8Array(t.length);for(let e=0;e<t.length;e++)this.valueBlock.valueHexView[e]=t.charCodeAt(e)}if(e){this.fromDate(e);this.valueBlock.valueHexView=new Uint8Array(this.toBuffer())}this.idBlock.tagClass=1;this.idBlock.tagNumber=23}fromBuffer(t){this.fromString(String.fromCharCode.apply(null,Mb.BufferSourceConverter.toUint8Array(t)))}toBuffer(){const t=this.toString();const e=new ArrayBuffer(t.length);const r=new Uint8Array(e);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return e}fromDate(t){this.year=t.getUTCFullYear();this.month=t.getUTCMonth()+1;this.day=t.getUTCDate();this.hour=t.getUTCHours();this.minute=t.getUTCMinutes();this.second=t.getUTCSeconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second))}fromString(t){const e=/(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})Z/gi;const r=e.exec(t);if(r===null){this.error="Wrong input string for conversion";return}const n=parseInt(r[1],10);if(n>=50)this.year=1900+n;else this.year=2e3+n;this.month=parseInt(r[2],10);this.day=parseInt(r[3],10);this.hour=parseInt(r[4],10);this.minute=parseInt(r[5],10);this.second=parseInt(r[6],10)}toString(t="iso"){if(t==="iso"){const t=new Array(7);t[0]=Tb(this.year<2e3?this.year-1900:this.year-2e3,2);t[1]=Tb(this.month,2);t[2]=Tb(this.day,2);t[3]=Tb(this.hour,2);t[4]=Tb(this.minute,2);t[5]=Tb(this.second,2);t[6]="Z";return t.join("")}return super.toString(t)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.toDate().toISOString()}`}toJSON(){return{...super.toJSON(),year:this.year,month:this.month,day:this.day,hour:this.hour,minute:this.minute,second:this.second}}}Ig=Tg;(()=>{sp.UTCTime=Ig})();Tg.NAME="UTCTime";var Og;class Dg extends Tg{constructor(t={}){var e;super(t);(e=this.millisecond)!==null&&e!==void 0?e:this.millisecond=0;this.idBlock.tagClass=1;this.idBlock.tagNumber=24}fromDate(t){super.fromDate(t);this.millisecond=t.getUTCMilliseconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond))}fromString(t){let e=false;let r="";let n="";let i=0;let s;let a=0;let o=0;if(t[t.length-1]==="Z"){r=t.substring(0,t.length-1);e=true}else{const e=new Number(t[t.length-1]);if(isNaN(e.valueOf()))throw new Error("Wrong input string for conversion");r=t}if(e){if(r.indexOf("+")!==-1)throw new Error("Wrong input string for conversion");if(r.indexOf("-")!==-1)throw new Error("Wrong input string for conversion")}else{let t=1;let e=r.indexOf("+");let n="";if(e===-1){e=r.indexOf("-");t=-1}if(e!==-1){n=r.substring(e+1);r=r.substring(0,e);if(n.length!==2&&n.length!==4)throw new Error("Wrong input string for conversion");let i=parseInt(n.substring(0,2),10);if(isNaN(i.valueOf()))throw new Error("Wrong input string for conversion");a=t*i;if(n.length===4){i=parseInt(n.substring(2,4),10);if(isNaN(i.valueOf()))throw new Error("Wrong input string for conversion");o=t*i}}}let f=r.indexOf(".");if(f===-1)f=r.indexOf(",");if(f!==-1){const t=new Number(`0${r.substring(f)}`);if(isNaN(t.valueOf()))throw new Error("Wrong input string for conversion");i=t.valueOf();n=r.substring(0,f)}else n=r;switch(true){case n.length===8:s=/(\d{4})(\d{2})(\d{2})/gi;if(f!==-1)throw new Error("Wrong input string for conversion");break;case n.length===10:s=/(\d{4})(\d{2})(\d{2})(\d{2})/gi;if(f!==-1){let t=60*i;this.minute=Math.floor(t);t=60*(t-this.minute);this.second=Math.floor(t);t=1e3*(t-this.second);this.millisecond=Math.floor(t)}break;case n.length===12:s=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})/gi;if(f!==-1){let t=60*i;this.second=Math.floor(t);t=1e3*(t-this.second);this.millisecond=Math.floor(t)}break;case n.length===14:s=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})/gi;if(f!==-1){const t=1e3*i;this.millisecond=Math.floor(t)}break;default:throw new Error("Wrong input string for conversion")}const c=s.exec(n);if(c===null)throw new Error("Wrong input string for conversion");for(let t=1;t<c.length;t++){switch(t){case 1:this.year=parseInt(c[t],10);break;case 2:this.month=parseInt(c[t],10);break;case 3:this.day=parseInt(c[t],10);break;case 4:this.hour=parseInt(c[t],10)+a;break;case 5:this.minute=parseInt(c[t],10)+o;break;case 6:this.second=parseInt(c[t],10);break;default:throw new Error("Wrong input string for conversion")}}if(e===false){const t=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond);this.year=t.getUTCFullYear();this.month=t.getUTCMonth();this.day=t.getUTCDay();this.hour=t.getUTCHours();this.minute=t.getUTCMinutes();this.second=t.getUTCSeconds();this.millisecond=t.getUTCMilliseconds()}}toString(t="iso"){if(t==="iso"){const t=[];t.push(Tb(this.year,4));t.push(Tb(this.month,2));t.push(Tb(this.day,2));t.push(Tb(this.hour,2));t.push(Tb(this.minute,2));t.push(Tb(this.second,2));if(this.millisecond!==0){t.push(".");t.push(Tb(this.millisecond,3))}t.push("Z");return t.join("")}return super.toString(t)}toJSON(){return{...super.toJSON(),millisecond:this.millisecond}}}Og=Dg;(()=>{sp.GeneralizedTime=Og})();Dg.NAME="GeneralizedTime";var Ng;class Ug extends sg{constructor(t={}){super(t);this.idBlock.tagClass=1;this.idBlock.tagNumber=31}}Ng=Ug;(()=>{sp.DATE=Ng})();Ug.NAME="DATE";var jg;class Rg extends sg{constructor(t={}){super(t);this.idBlock.tagClass=1;this.idBlock.tagNumber=32}}jg=Rg;(()=>{sp.TimeOfDay=jg})();Rg.NAME="TimeOfDay";var Fg;class Lg extends sg{constructor(t={}){super(t);this.idBlock.tagClass=1;this.idBlock.tagNumber=33}}Fg=Lg;(()=>{sp.DateTime=Fg})();Lg.NAME="DateTime";var Qg;class Hg extends sg{constructor(t={}){super(t);this.idBlock.tagClass=1;this.idBlock.tagNumber=34}}Qg=Hg;(()=>{sp.Duration=Qg})();Hg.NAME="Duration";var Gg;class Kg extends sg{constructor(t={}){super(t);this.idBlock.tagClass=1;this.idBlock.tagNumber=14}}Gg=Kg;(()=>{sp.TIME=Gg})();Kg.NAME="TIME";class Jg{constructor({name:t=Vb,optional:e=false}={}){this.name=t;this.optional=e}}class zg extends Jg{constructor({value:t=[],...e}={}){super(e);this.value=t}}class Wg extends Jg{constructor({value:t=new Jg,local:e=false,...r}={}){super(r);this.value=t;this.local=e}}class qg{constructor({data:t=_b}={}){this.dataView=Mb.BufferSourceConverter.toUint8Array(t)}get data(){return this.dataView.slice().buffer}set data(t){this.dataView=Mb.BufferSourceConverter.toUint8Array(t)}fromBER(t,e,r){const n=e+r;this.dataView=Mb.BufferSourceConverter.toUint8Array(t).subarray(e,n);return n}toBER(t){return this.dataView.slice().buffer}}function Vg(t,e,r){if(r instanceof zg){for(let n=0;n<r.value.length;n++){const i=Vg(t,e,r.value[n]);if(i.verified){return{verified:true,result:t}}}{const t={verified:false,result:{error:"Wrong values for Choice type"}};if(r.hasOwnProperty(Fb))t.name=r.name;return t}}if(r instanceof Jg){if(r.hasOwnProperty(Fb))t[r.name]=e;return{verified:true,result:t}}if(t instanceof Object===false){return{verified:false,result:{error:"Wrong root object"}}}if(e instanceof Object===false){return{verified:false,result:{error:"Wrong ASN.1 data"}}}if(r instanceof Object===false){return{verified:false,result:{error:"Wrong ASN.1 schema"}}}if(Hb in r===false){return{verified:false,result:{error:"Wrong ASN.1 schema"}}}if(zb in r.idBlock===false){return{verified:false,result:{error:"Wrong ASN.1 schema"}}}if(Wb in r.idBlock===false){return{verified:false,result:{error:"Wrong ASN.1 schema"}}}const n=r.idBlock.toBER(false);if(n.byteLength===0){return{verified:false,result:{error:"Error encoding idBlock for ASN.1 schema"}}}const i=r.idBlock.fromBER(n,0,n.byteLength);if(i===-1){return{verified:false,result:{error:"Error decoding idBlock for ASN.1 schema"}}}if(r.idBlock.hasOwnProperty(Gb)===false){return{verified:false,result:{error:"Wrong ASN.1 schema"}}}if(r.idBlock.tagClass!==e.idBlock.tagClass){return{verified:false,result:t}}if(r.idBlock.hasOwnProperty(Kb)===false){return{verified:false,result:{error:"Wrong ASN.1 schema"}}}if(r.idBlock.tagNumber!==e.idBlock.tagNumber){return{verified:false,result:t}}if(r.idBlock.hasOwnProperty(Jb)===false){return{verified:false,result:{error:"Wrong ASN.1 schema"}}}if(r.idBlock.isConstructed!==e.idBlock.isConstructed){return{verified:false,result:t}}if(!(Qb in r.idBlock)){return{verified:false,result:{error:"Wrong ASN.1 schema"}}}if(r.idBlock.isHexOnly!==e.idBlock.isHexOnly){return{verified:false,result:t}}if(r.idBlock.isHexOnly){if(Lb in r.idBlock===false){return{verified:false,result:{error:"Wrong ASN.1 schema"}}}const n=r.idBlock.valueHexView;const i=e.idBlock.valueHexView;if(n.length!==i.length){return{verified:false,result:t}}for(let e=0;e<n.length;e++){if(n[e]!==i[1]){return{verified:false,result:t}}}}if(r.name){r.name=r.name.replace(/^\s+|\s+$/g,Vb);if(r.name)t[r.name]=e}if(r instanceof sp.Constructed){let n=0;let i={verified:false,result:{error:"Unknown error"}};let s=r.valueBlock.value.length;if(s>0){if(r.valueBlock.value[0]instanceof Wg){s=e.valueBlock.value.length}}if(s===0){return{verified:true,result:t}}if(e.valueBlock.value.length===0&&r.valueBlock.value.length!==0){let e=true;for(let t=0;t<r.valueBlock.value.length;t++)e=e&&(r.valueBlock.value[t].optional||false);if(e){return{verified:true,result:t}}if(r.name){r.name=r.name.replace(/^\s+|\s+$/g,Vb);if(r.name)delete t[r.name]}t.error="Inconsistent object length";return{verified:false,result:t}}for(let a=0;a<s;a++){if(a-n>=e.valueBlock.value.length){if(r.valueBlock.value[a].optional===false){const e={verified:false,result:t};t.error="Inconsistent length between ASN.1 data and schema";if(r.name){r.name=r.name.replace(/^\s+|\s+$/g,Vb);if(r.name){delete t[r.name];e.name=r.name}}return e}}else{if(r.valueBlock.value[0]instanceof Wg){i=Vg(t,e.valueBlock.value[a],r.valueBlock.value[0].value);if(i.verified===false){if(r.valueBlock.value[0].optional)n++;else{if(r.name){r.name=r.name.replace(/^\s+|\s+$/g,Vb);if(r.name)delete t[r.name]}return i}}if(Fb in r.valueBlock.value[0]&&r.valueBlock.value[0].name.length>0){let n={};if(qb in r.valueBlock.value[0]&&r.valueBlock.value[0].local)n=e;else n=t;if(typeof n[r.valueBlock.value[0].name]==="undefined")n[r.valueBlock.value[0].name]=[];n[r.valueBlock.value[0].name].push(e.valueBlock.value[a])}}else{i=Vg(t,e.valueBlock.value[a-n],r.valueBlock.value[a]);if(i.verified===false){if(r.valueBlock.value[a].optional)n++;else{if(r.name){r.name=r.name.replace(/^\s+|\s+$/g,Vb);if(r.name)delete t[r.name]}return i}}}}}if(i.verified===false){const e={verified:false,result:t};if(r.name){r.name=r.name.replace(/^\s+|\s+$/g,Vb);if(r.name){delete t[r.name];e.name=r.name}}return e}return{verified:true,result:t}}if(r.primitiveSchema&&Lb in e.valueBlock){const n=dp(e.valueBlock.valueHexView);if(n.offset===-1){const e={verified:false,result:n.result};if(r.name){r.name=r.name.replace(/^\s+|\s+$/g,Vb);if(r.name){delete t[r.name];e.name=r.name}}return e}return Vg(t,n.result,r.primitiveSchema)}return{verified:true,result:t}}function Yg(t,e){if(e instanceof Object===false){return{verified:false,result:{error:"Wrong ASN.1 schema type"}}}const r=dp(Mb.BufferSourceConverter.toUint8Array(t));if(r.offset===-1){return{verified:false,result:r.result}}return Vg(r.result,r.result,e)}const _g=Object.freeze({__proto__:null,Any:Jg,BaseBlock:ap,BaseStringBlock:fp,BitString:Op,BmpString:fg,Boolean:Sp,CharacterString:Pg,Choice:zg,Constructed:yp,DATE:Ug,DateTime:Lg,Duration:Hg,EndOfContent:Ap,Enumerated:Hp,GeneralString:Cg,GeneralizedTime:Dg,GraphicString:kg,HexBlock:tp,IA5String:Ag,Integer:Lp,Null:kp,NumericString:dg,ObjectIdentifier:zp,OctetString:Pp,Primitive:hp,PrintableString:bg,RawData:qg,RelativeObjectIdentifier:Yp,Repeated:Wg,Sequence:Zp,Set:$p,TIME:Kg,TeletexString:gg,TimeOfDay:Rg,UTCTime:Tg,UniversalString:hg,Utf8String:sg,ValueBlock:rp,VideotexString:wg,ViewWriter:Ub,VisibleString:Bg,compareSchema:Vg,fromBER:vp,verifySchema:Yg});var Zg;(function(t){t[t["Sequence"]=0]="Sequence";t[t["Set"]=1]="Set";t[t["Choice"]=2]="Choice"})(Zg||(Zg={}));var Xg;(function(t){t[t["Any"]=1]="Any";t[t["Boolean"]=2]="Boolean";t[t["OctetString"]=3]="OctetString";t[t["BitString"]=4]="BitString";t[t["Integer"]=5]="Integer";t[t["Enumerated"]=6]="Enumerated";t[t["ObjectIdentifier"]=7]="ObjectIdentifier";t[t["Utf8String"]=8]="Utf8String";t[t["BmpString"]=9]="BmpString";t[t["UniversalString"]=10]="UniversalString";t[t["NumericString"]=11]="NumericString";t[t["PrintableString"]=12]="PrintableString";t[t["TeletexString"]=13]="TeletexString";t[t["VideotexString"]=14]="VideotexString";t[t["IA5String"]=15]="IA5String";t[t["GraphicString"]=16]="GraphicString";t[t["VisibleString"]=17]="VisibleString";t[t["GeneralString"]=18]="GeneralString";t[t["CharacterString"]=19]="CharacterString";t[t["UTCTime"]=20]="UTCTime";t[t["GeneralizedTime"]=21]="GeneralizedTime";t[t["DATE"]=22]="DATE";t[t["TimeOfDay"]=23]="TimeOfDay";t[t["DateTime"]=24]="DateTime";t[t["Duration"]=25]="Duration";t[t["TIME"]=26]="TIME";t[t["Null"]=27]="Null"})(Xg||(Xg={}));class $g{constructor(t,e=0){this.unusedBits=0;this.value=new ArrayBuffer(0);if(t){if(typeof t==="number"){this.fromNumber(t)}else if(Mb.BufferSourceConverter.isBufferSource(t)){this.unusedBits=e;this.value=Mb.BufferSourceConverter.toArrayBuffer(t)}else{throw TypeError("Unsupported type of 'params' argument for BitString")}}}fromASN(t){if(!(t instanceof Op)){throw new TypeError("Argument 'asn' is not instance of ASN.1 BitString")}this.unusedBits=t.valueBlock.unusedBits;this.value=t.valueBlock.valueHex;return this}toASN(){return new Op({unusedBits:this.unusedBits,valueHex:this.value})}toSchema(t){return new Op({name:t})}toNumber(){let t="";const e=new Uint8Array(this.value);for(const r of e){t+=r.toString(2).padStart(8,"0")}t=t.split("").reverse().join("");if(this.unusedBits){t=t.slice(this.unusedBits).padStart(this.unusedBits,"0")}return parseInt(t,2)}fromNumber(t){let e=t.toString(2);const r=e.length+7>>3;this.unusedBits=(r<<3)-e.length;const n=new Uint8Array(r);e=e.padStart(r<<3,"0").split("").reverse().join("");let i=0;while(i<r){n[i]=parseInt(e.slice(i<<3,(i<<3)+8),2);i++}this.value=n.buffer}}class ty{constructor(t){if(typeof t==="number"){this.buffer=new ArrayBuffer(t)}else{if(Mb.BufferSourceConverter.isBufferSource(t)){this.buffer=Mb.BufferSourceConverter.toArrayBuffer(t)}else if(Array.isArray(t)){this.buffer=new Uint8Array(t)}else{this.buffer=new ArrayBuffer(0)}}}get byteLength(){return this.buffer.byteLength}get byteOffset(){return 0}fromASN(t){if(!(t instanceof Pp)){throw new TypeError("Argument 'asn' is not instance of ASN.1 OctetString")}this.buffer=t.valueBlock.valueHex;return this}toASN(){return new Pp({valueHex:this.buffer})}toSchema(t){return new Pp({name:t})}}const ey={fromASN:t=>t instanceof kp?null:t.valueBeforeDecodeView,toASN:t=>{if(t===null){return new kp}const e=vp(t);if(e.result.error){throw new Error(e.result.error)}return e.result}};const ry={fromASN:t=>t.valueBlock.valueHexView.byteLength>=4?t.valueBlock.toString():t.valueBlock.valueDec,toASN:t=>new Lp({value:+t})};const ny={fromASN:t=>t.valueBlock.valueDec,toASN:t=>new Hp({value:t})};const iy={fromASN:t=>t.valueBlock.valueHexView,toASN:t=>new Lp({valueHex:t})};const sy={fromASN:t=>t.toBigInt(),toASN:t=>Lp.fromBigInt(t)};const ay={fromASN:t=>t.valueBlock.valueHexView,toASN:t=>new Op({valueHex:t})};const oy={fromASN:t=>t.valueBlock.toString(),toASN:t=>new zp({value:t})};const fy={fromASN:t=>t.valueBlock.value,toASN:t=>new Sp({value:t})};const cy={fromASN:t=>t.valueBlock.valueHexView,toASN:t=>new Pp({valueHex:t})};const uy={fromASN:t=>new ty(t.getValue()),toASN:t=>t.toASN()};function hy(t){return{fromASN:t=>t.valueBlock.value,toASN:e=>new t({value:e})}}const ly=hy(sg);const dy=hy(fg);const vy=hy(hg);const by=hy(dg);const py=hy(bg);const gy=hy(gg);const yy=hy(wg);const wy=hy(Ag);const my=hy(kg);const Ay=hy(Bg);const Ey=hy(Cg);const ky=hy(Pg);const My={fromASN:t=>t.toDate(),toASN:t=>new Tg({valueDate:t})};const By={fromASN:t=>t.toDate(),toASN:t=>new Dg({valueDate:t})};const Sy={fromASN:()=>null,toASN:()=>new kp};function Cy(t){switch(t){case Xg.Any:return ey;case Xg.BitString:return ay;case Xg.BmpString:return dy;case Xg.Boolean:return fy;case Xg.CharacterString:return ky;case Xg.Enumerated:return ny;case Xg.GeneralString:return Ey;case Xg.GeneralizedTime:return By;case Xg.GraphicString:return my;case Xg.IA5String:return wy;case Xg.Integer:return ry;case Xg.Null:return Sy;case Xg.NumericString:return by;case Xg.ObjectIdentifier:return oy;case Xg.OctetString:return cy;case Xg.PrintableString:return py;case Xg.TeletexString:return gy;case Xg.UTCTime:return My;case Xg.UniversalString:return vy;case Xg.Utf8String:return ly;case Xg.VideotexString:return yy;case Xg.VisibleString:return Ay;default:return null}}function xy(t){if(typeof t==="function"&&t.prototype){if(t.prototype.toASN&&t.prototype.fromASN){return true}else{return xy(t.prototype)}}else{return!!(t&&typeof t==="object"&&"toASN"in t&&"fromASN"in t)}}function Py(t){var e;if(t){const r=Object.getPrototypeOf(t);if(((e=r===null||r===void 0?void 0:r.prototype)===null||e===void 0?void 0:e.constructor)===Array){return true}return Py(r)}return false}function Iy(t,e){if(!(t&&e)){return false}if(t.byteLength!==e.byteLength){return false}const r=new Uint8Array(t);const n=new Uint8Array(e);for(let e=0;e<t.byteLength;e++){if(r[e]!==n[e]){return false}}return true}class Ty{constructor(){this.items=new WeakMap}has(t){return this.items.has(t)}get(t,e=false){const r=this.items.get(t);if(!r){throw new Error(`Cannot get schema for '${t.prototype.constructor.name}' target`)}if(e&&!r.schema){throw new Error(`Schema '${t.prototype.constructor.name}' doesn't contain ASN.1 schema. Call 'AsnSchemaStorage.cache'.`)}return r}cache(t){const e=this.get(t);if(!e.schema){e.schema=this.create(t,true)}}createDefault(t){const e={type:Zg.Sequence,items:{}};const r=this.findParentSchema(t);if(r){Object.assign(e,r);e.items=Object.assign({},e.items,r.items)}return e}create(t,e){const r=this.items.get(t)||this.createDefault(t);const n=[];for(const t in r.items){const i=r.items[t];const s=e?t:"";let a;if(typeof i.type==="number"){const t=Xg[i.type];const e=_g[t];if(!e){throw new Error(`Cannot get ASN1 class by name '${t}'`)}a=new e({name:s})}else if(xy(i.type)){const t=new i.type;a=t.toSchema(s)}else if(i.optional){const t=this.get(i.type);if(t.type===Zg.Choice){a=new Jg({name:s})}else{a=this.create(i.type,false);a.name=s}}else{a=new Jg({name:s})}const o=!!i.optional||i.defaultValue!==undefined;if(i.repeated){a.name="";const t=i.repeated==="set"?$p:Zp;a=new t({name:"",value:[new Wg({name:s,value:a})]})}if(i.context!==null&&i.context!==undefined){if(i.implicit){if(typeof i.type==="number"||xy(i.type)){const t=i.repeated?yp:hp;n.push(new t({name:s,optional:o,idBlock:{tagClass:3,tagNumber:i.context}}))}else{this.cache(i.type);const t=!!i.repeated;let e=!t?this.get(i.type,true).schema:a;e="valueBlock"in e?e.valueBlock.value:e.value;n.push(new yp({name:!t?s:"",optional:o,idBlock:{tagClass:3,tagNumber:i.context},value:e}))}}else{n.push(new yp({optional:o,idBlock:{tagClass:3,tagNumber:i.context},value:[a]}))}}else{a.optional=o;n.push(a)}}switch(r.type){case Zg.Sequence:return new Zp({value:n,name:""});case Zg.Set:return new $p({value:n,name:""});case Zg.Choice:return new zg({value:n,name:""});default:throw new Error(`Unsupported ASN1 type in use`)}}set(t,e){this.items.set(t,e);return this}findParentSchema(t){const e=Object.getPrototypeOf(t);if(e){const t=this.items.get(e);return t||this.findParentSchema(e)}return null}}const Oy=new Ty;const Dy=t=>e=>{let r;if(!Oy.has(e)){r=Oy.createDefault(e);Oy.set(e,r)}else{r=Oy.get(e)}Object.assign(r,t)};const Ny=()=>Dy({type:Zg.Choice});const Uy=t=>Dy({type:Zg.Set,...t});const jy=t=>Dy({type:Zg.Sequence,...t});const Ry=t=>(e,r)=>{let n;if(!Oy.has(e.constructor)){n=Oy.createDefault(e.constructor);Oy.set(e.constructor,n)}else{n=Oy.get(e.constructor)}const i=Object.assign({},t);if(typeof i.type==="number"&&!i.converter){const n=Cy(t.type);if(!n){throw new Error(`Cannot get default converter for property '${r}' of ${e.constructor.name}`)}i.converter=n}n.items[r]=i};class Fy extends Error{constructor(){super(...arguments);this.schemas=[]}}class Ly{static parse(t,e){const r=vp(t);if(r.result.error){throw new Error(r.result.error)}const n=this.fromASN(r.result,e);return n}static fromASN(t,e){var r;try{if(xy(e)){const r=new e;return r.fromASN(t)}const n=Oy.get(e);Oy.cache(e);let i=n.schema;if(t.constructor===yp&&n.type!==Zg.Choice){i=new yp({idBlock:{tagClass:3,tagNumber:t.idBlock.tagNumber},value:n.schema.valueBlock.value});for(const e in n.items){delete t[e]}}const s=Vg({},t,i);if(!s.verified){throw new Fy(`Data does not match to ${e.name} ASN1 schema. ${s.result.error}`)}const a=new e;if(Py(e)){if(!("value"in t.valueBlock&&Array.isArray(t.valueBlock.value))){throw new Error(`Cannot get items from the ASN.1 parsed value. ASN.1 object is not constructed.`)}const r=n.itemType;if(typeof r==="number"){const n=Cy(r);if(!n){throw new Error(`Cannot get default converter for array item of ${e.name} ASN1 schema`)}return e.from(t.valueBlock.value,(t=>n.fromASN(t)))}else{return e.from(t.valueBlock.value,(t=>this.fromASN(t,r)))}}for(const t in n.items){const e=s.result[t];if(!e){continue}const i=n.items[t];const o=i.type;if(typeof o==="number"||xy(o)){const n=(r=i.converter)!==null&&r!==void 0?r:xy(o)?new o:null;if(!n){throw new Error("Converter is empty")}if(i.repeated){if(i.implicit){const r=i.repeated==="sequence"?Zp:$p;const s=new r;s.valueBlock=e.valueBlock;const o=vp(s.toBER(false));if(o.offset===-1){throw new Error(`Cannot parse the child item. ${o.result.error}`)}if(!("value"in o.result.valueBlock&&Array.isArray(o.result.valueBlock.value))){throw new Error("Cannot get items from the ASN.1 parsed value. ASN.1 object is not constructed.")}const f=o.result.valueBlock.value;a[t]=Array.from(f,(t=>n.fromASN(t)))}else{a[t]=Array.from(e,(t=>n.fromASN(t)))}}else{let r=e;if(i.implicit){let t;if(xy(o)){t=(new o).toSchema("")}else{const e=Xg[o];const r=_g[e];if(!r){throw new Error(`Cannot get '${e}' class from asn1js module`)}t=new r}t.valueBlock=r.valueBlock;r=vp(t.toBER(false)).result}a[t]=n.fromASN(r)}}else{if(i.repeated){if(!Array.isArray(e)){throw new Error("Cannot get list of items from the ASN.1 parsed value. ASN.1 value should be iterable.")}a[t]=Array.from(e,(t=>this.fromASN(t,o)))}else{a[t]=this.fromASN(e,o)}}}return a}catch(t){if(t instanceof Fy){t.schemas.push(e.name)}throw t}}}class Qy{static serialize(t){if(t instanceof ap){return t.toBER(false)}return this.toASN(t).toBER(false)}static toASN(t){if(t&&typeof t==="object"&&xy(t)){return t.toASN()}if(!(t&&typeof t==="object")){throw new TypeError("Parameter 1 should be type of Object.")}const e=t.constructor;const r=Oy.get(e);Oy.cache(e);let n=[];if(r.itemType){if(!Array.isArray(t)){throw new TypeError("Parameter 1 should be type of Array.")}if(typeof r.itemType==="number"){const i=Cy(r.itemType);if(!i){throw new Error(`Cannot get default converter for array item of ${e.name} ASN1 schema`)}n=t.map((t=>i.toASN(t)))}else{n=t.map((t=>this.toAsnItem({type:r.itemType},"[]",e,t)))}}else{for(const i in r.items){const s=r.items[i];const a=t[i];if(a===undefined||s.defaultValue===a||typeof s.defaultValue==="object"&&typeof a==="object"&&Iy(this.serialize(s.defaultValue),this.serialize(a))){continue}const o=Qy.toAsnItem(s,i,e,a);if(typeof s.context==="number"){if(s.implicit){if(!s.repeated&&(typeof s.type==="number"||xy(s.type))){const t={};t.valueHex=o instanceof kp?o.valueBeforeDecodeView:o.valueBlock.toBER();n.push(new hp({optional:s.optional,idBlock:{tagClass:3,tagNumber:s.context},...t}))}else{n.push(new yp({optional:s.optional,idBlock:{tagClass:3,tagNumber:s.context},value:o.valueBlock.value}))}}else{n.push(new yp({optional:s.optional,idBlock:{tagClass:3,tagNumber:s.context},value:[o]}))}}else if(s.repeated){n=n.concat(o)}else{n.push(o)}}}let i;switch(r.type){case Zg.Sequence:i=new Zp({value:n});break;case Zg.Set:i=new $p({value:n});break;case Zg.Choice:if(!n[0]){throw new Error(`Schema '${e.name}' has wrong data. Choice cannot be empty.`)}i=n[0];break}return i}static toAsnItem(t,e,r,n){let i;if(typeof t.type==="number"){const s=t.converter;if(!s){throw new Error(`Property '${e}' doesn't have converter for type ${Xg[t.type]} in schema '${r.name}'`)}if(t.repeated){if(!Array.isArray(n)){throw new TypeError("Parameter 'objProp' should be type of Array.")}const e=Array.from(n,(t=>s.toASN(t)));const r=t.repeated==="sequence"?Zp:$p;i=new r({value:e})}else{i=s.toASN(n)}}else{if(t.repeated){if(!Array.isArray(n)){throw new TypeError("Parameter 'objProp' should be type of Array.")}const e=Array.from(n,(t=>this.toASN(t)));const r=t.repeated==="sequence"?Zp:$p;i=new r({value:e})}else{i=this.toASN(n)}}return i}}class Hy extends Array{constructor(t=[]){if(typeof t==="number"){super(t)}else{super();for(const e of t){this.push(e)}}}}class Gy{static serialize(t){return Qy.serialize(t)}static parse(t,e){return Ly.parse(t,e)}static toString(t){const e=Mb.BufferSourceConverter.isBufferSource(t)?Mb.BufferSourceConverter.toArrayBuffer(t):Gy.serialize(t);const r=vp(e);if(r.offset===-1){throw new Error(`Cannot decode ASN.1 data. ${r.result.error}`)}return r.result.toString()}}const Ky=Object.freeze({__proto__:null,AsnProp:Ry,AsnType:Dy,AsnChoiceType:Ny,AsnSequenceType:jy,AsnSetType:Uy,get AsnTypeTypes(){return Zg},get AsnPropTypes(){return Xg},AsnParser:Ly,AsnSerializer:Qy,AsnAnyConverter:ey,AsnIntegerConverter:ry,AsnEnumeratedConverter:ny,AsnIntegerArrayBufferConverter:iy,AsnIntegerBigIntConverter:sy,AsnBitStringConverter:ay,AsnObjectIdentifierConverter:oy,AsnBooleanConverter:fy,AsnOctetStringConverter:cy,AsnConstructedOctetStringConverter:uy,AsnUtf8StringConverter:ly,AsnBmpStringConverter:dy,AsnUniversalStringConverter:vy,AsnNumericStringConverter:by,AsnPrintableStringConverter:py,AsnTeletexStringConverter:gy,AsnVideotexStringConverter:yy,AsnIA5StringConverter:wy,AsnGraphicStringConverter:my,AsnVisibleStringConverter:Ay,AsnGeneralStringConverter:Ey,AsnCharacterStringConverter:ky,AsnUTCTimeConverter:My,AsnGeneralizedTimeConverter:By,AsnNullConverter:Sy,defaultConverter:Cy,BitString:$g,OctetString:ty,AsnSchemaValidationError:Fy,AsnArray:Hy,AsnConvert:Gy});const Jy=n(Ky);var zy=t((function(t,r){var n=e&&e.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")s=Reflect.decorate(t,e,r,n);else for(var o=t.length-1;o>=0;o--)if(a=t[o])s=(i<3?a(s):i>3?a(e,r,s):a(e,r))||s;return i>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(r,"__esModule",{value:true});r.UsageProof=r.Proof=void 0;class i{}n([(0,Jy.AsnProp)({type:Jy.AsnPropTypes.OctetString})],i.prototype,"riddle",void 0);n([(0,Jy.AsnProp)({type:Jy.AsnPropTypes.OctetString})],i.prototype,"challengePoint",void 0);n([(0,Jy.AsnProp)({type:Jy.AsnPropTypes.OctetString})],i.prototype,"responseValue",void 0);n([(0,Jy.AsnProp)({type:Jy.AsnPropTypes.OctetString})],i.prototype,"nonce",void 0);r.Proof=i;class s{}n([(0,Jy.AsnProp)({type:Jy.AsnPropTypes.OctetString})],s.prototype,"challengePoint",void 0);n([(0,Jy.AsnProp)({type:Jy.AsnPropTypes.OctetString})],s.prototype,"responseValue",void 0);n([(0,Jy.AsnProp)({type:Jy.AsnPropTypes.OctetString})],s.prototype,"nonce",void 0);r.UsageProof=s}));var Wy="Function.prototype.bind called on incompatible ";var qy=Array.prototype.slice;var Vy=Object.prototype.toString;var Yy="[object Function]";var _y=function t(e){var r=this;if(typeof r!=="function"||Vy.call(r)!==Yy){throw new TypeError(Wy+r)}var n=qy.call(arguments,1);var i;var s=function(){if(this instanceof i){var t=r.apply(this,n.concat(qy.call(arguments)));if(Object(t)===t){return t}return this}else{return r.apply(e,n.concat(qy.call(arguments)))}};var a=Math.max(0,r.length-n.length);var o=[];for(var f=0;f<a;f++){o.push("$"+f)}i=Function("binder","return function ("+o.join(",")+"){ return binder.apply(this,arguments); }")(s);if(r.prototype){var c=function t(){};c.prototype=r.prototype;i.prototype=new c;c.prototype=null}return i};var Zy=Function.prototype.bind||_y;var Xy=function t(){if(typeof Symbol!=="function"||typeof Object.getOwnPropertySymbols!=="function"){return false}if(typeof Symbol.iterator==="symbol"){return true}var e={};var r=Symbol("test");var n=Object(r);if(typeof r==="string"){return false}if(Object.prototype.toString.call(r)!=="[object Symbol]"){return false}if(Object.prototype.toString.call(n)!=="[object Symbol]"){return false}var i=42;e[r]=i;for(r in e){return false}if(typeof Object.keys==="function"&&Object.keys(e).length!==0){return false}if(typeof Object.getOwnPropertyNames==="function"&&Object.getOwnPropertyNames(e).length!==0){return false}var s=Object.getOwnPropertySymbols(e);if(s.length!==1||s[0]!==r){return false}if(!Object.prototype.propertyIsEnumerable.call(e,r)){return false}if(typeof Object.getOwnPropertyDescriptor==="function"){var a=Object.getOwnPropertyDescriptor(e,r);if(a.value!==i||a.enumerable!==true){return false}}return true};var $y=typeof Symbol!=="undefined"&&Symbol;var tw=function t(){if(typeof $y!=="function"){return false}if(typeof Symbol!=="function"){return false}if(typeof $y("foo")!=="symbol"){return false}if(typeof Symbol("bar")!=="symbol"){return false}return Xy()};var ew=Zy.call(Function.call,Object.prototype.hasOwnProperty);var rw;var nw=SyntaxError;var iw=Function;var sw=TypeError;var aw=function(t){try{return iw('"use strict"; return ('+t+").constructor;")()}catch(t){}};var ow=Object.getOwnPropertyDescriptor;var fw=function(){throw new sw};var cw=ow?function(){try{return fw}catch(t){try{return ow(arguments,"callee").get}catch(t){return fw}}}():fw;var uw=tw();var hw=Object.getPrototypeOf||function(t){return t.__proto__};var lw={};var dw=typeof Uint8Array==="undefined"?rw:hw(Uint8Array);var vw={"%AggregateError%":typeof AggregateError==="undefined"?rw:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer==="undefined"?rw:ArrayBuffer,"%ArrayIteratorPrototype%":uw?hw([][Symbol.iterator]()):rw,"%AsyncFromSyncIteratorPrototype%":rw,"%AsyncFunction%":lw,"%AsyncGenerator%":lw,"%AsyncGeneratorFunction%":lw,"%AsyncIteratorPrototype%":lw,"%Atomics%":typeof Atomics==="undefined"?rw:Atomics,"%BigInt%":typeof BigInt==="undefined"?rw:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView==="undefined"?rw:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array==="undefined"?rw:Float32Array,"%Float64Array%":typeof Float64Array==="undefined"?rw:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry==="undefined"?rw:FinalizationRegistry,"%Function%":iw,"%GeneratorFunction%":lw,"%Int8Array%":typeof Int8Array==="undefined"?rw:Int8Array,"%Int16Array%":typeof Int16Array==="undefined"?rw:Int16Array,"%Int32Array%":typeof Int32Array==="undefined"?rw:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":uw?hw(hw([][Symbol.iterator]())):rw,"%JSON%":typeof JSON==="object"?JSON:rw,"%Map%":typeof Map==="undefined"?rw:Map,"%MapIteratorPrototype%":typeof Map==="undefined"||!uw?rw:hw((new Map)[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise==="undefined"?rw:Promise,"%Proxy%":typeof Proxy==="undefined"?rw:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect==="undefined"?rw:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set==="undefined"?rw:Set,"%SetIteratorPrototype%":typeof Set==="undefined"||!uw?rw:hw((new Set)[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer==="undefined"?rw:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":uw?hw(""[Symbol.iterator]()):rw,"%Symbol%":uw?Symbol:rw,"%SyntaxError%":nw,"%ThrowTypeError%":cw,"%TypedArray%":dw,"%TypeError%":sw,"%Uint8Array%":typeof Uint8Array==="undefined"?rw:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray==="undefined"?rw:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array==="undefined"?rw:Uint16Array,"%Uint32Array%":typeof Uint32Array==="undefined"?rw:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap==="undefined"?rw:WeakMap,"%WeakRef%":typeof WeakRef==="undefined"?rw:WeakRef,"%WeakSet%":typeof WeakSet==="undefined"?rw:WeakSet};var bw=function t(e){var r;if(e==="%AsyncFunction%"){r=aw("async function () {}")}else if(e==="%GeneratorFunction%"){r=aw("function* () {}")}else if(e==="%AsyncGeneratorFunction%"){r=aw("async function* () {}")}else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");if(n){r=n.prototype}}else if(e==="%AsyncIteratorPrototype%"){var i=t("%AsyncGenerator%");if(i){r=hw(i.prototype)}}vw[e]=r;return r};var pw={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]};var gw=Zy.call(Function.call,Array.prototype.concat);var yw=Zy.call(Function.apply,Array.prototype.splice);var ww=Zy.call(Function.call,String.prototype.replace);var mw=Zy.call(Function.call,String.prototype.slice);var Aw=Zy.call(Function.call,RegExp.prototype.exec);var Ew=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g;var kw=/\\(\\)?/g;var Mw=function t(e){var r=mw(e,0,1);var n=mw(e,-1);if(r==="%"&&n!=="%"){throw new nw("invalid intrinsic syntax, expected closing `%`")}else if(n==="%"&&r!=="%"){throw new nw("invalid intrinsic syntax, expected opening `%`")}var i=[];ww(e,Ew,(function(t,e,r,n){i[i.length]=r?ww(n,kw,"$1"):e||t}));return i};var Bw=function t(e,r){var n=e;var i;if(ew(pw,n)){i=pw[n];n="%"+i[0]+"%"}if(ew(vw,n)){var s=vw[n];if(s===lw){s=bw(n)}if(typeof s==="undefined"&&!r){throw new sw("intrinsic "+e+" exists, but is not available. Please file an issue!")}return{alias:i,name:n,value:s}}throw new nw("intrinsic "+e+" does not exist!")};var Sw=function t(e,r){if(typeof e!=="string"||e.length===0){throw new sw("intrinsic name must be a non-empty string")}if(arguments.length>1&&typeof r!=="boolean"){throw new sw('"allowMissing" argument must be a boolean')}if(Aw(/^%?[^%]*%?$/,e)===null){throw new nw("`%` may not be present anywhere but at the beginning and end of the intrinsic name")}var n=Mw(e);var i=n.length>0?n[0]:"";var s=Bw("%"+i+"%",r);var a=s.name;var o=s.value;var f=false;var c=s.alias;if(c){i=c[0];yw(n,gw([0,1],c))}for(var u=1,h=true;u<n.length;u+=1){var l=n[u];var d=mw(l,0,1);var v=mw(l,-1);if((d==='"'||d==="'"||d==="`"||(v==='"'||v==="'"||v==="`"))&&d!==v){throw new nw("property names with quotes must have matching quotes")}if(l==="constructor"||!h){f=true}i+="."+l;a="%"+i+"%";if(ew(vw,a)){o=vw[a]}else if(o!=null){if(!(l in o)){if(!r){throw new sw("base intrinsic for "+e+" exists, but the property is not available.")}return void rw}if(ow&&u+1>=n.length){var b=ow(o,l);h=!!b;if(h&&"get"in b&&!("originalValue"in b.get)){o=b.get}else{o=o[l]}}else{h=ew(o,l);o=o[l]}if(h&&!f){vw[a]=o}}}return o};var Cw=t((function(t){var e=Sw("%Function.prototype.apply%");var r=Sw("%Function.prototype.call%");var n=Sw("%Reflect.apply%",true)||Zy.call(r,e);var i=Sw("%Object.getOwnPropertyDescriptor%",true);var s=Sw("%Object.defineProperty%",true);var a=Sw("%Math.max%");if(s){try{s({},"a",{value:1})}catch(t){s=null}}t.exports=function t(e){var o=n(Zy,r,arguments);if(i&&s){var f=i(o,"length");if(f.configurable){s(o,"length",{value:1+a(0,e.length-(arguments.length-1))})}}return o};var o=function t(){return n(Zy,e,arguments)};if(s){s(t.exports,"apply",{value:o})}else{t.exports.apply=o}}));var xw=Object.prototype.toString;var Pw=function t(e){var r=xw.call(e);var n=r==="[object Arguments]";if(!n){n=r!=="[object Array]"&&e!==null&&typeof e==="object"&&typeof e.length==="number"&&e.length>=0&&xw.call(e.callee)==="[object Function]"}return n};var Iw;if(!Object.keys){var Tw=Object.prototype.hasOwnProperty;var Ow=Object.prototype.toString;var Dw=Pw;var Nw=Object.prototype.propertyIsEnumerable;var Uw=!Nw.call({toString:null},"toString");var jw=Nw.call((function(){}),"prototype");var Rw=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];var Fw=function(t){var e=t.constructor;return e&&e.prototype===t};var Lw={$applicationCache:true,$console:true,$external:true,$frame:true,$frameElement:true,$frames:true,$innerHeight:true,$innerWidth:true,$onmozfullscreenchange:true,$onmozfullscreenerror:true,$outerHeight:true,$outerWidth:true,$pageXOffset:true,$pageYOffset:true,$parent:true,$scrollLeft:true,$scrollTop:true,$scrollX:true,$scrollY:true,$self:true,$webkitIndexedDB:true,$webkitStorageInfo:true,$window:true};var Qw=function(){if(typeof window==="undefined"){return false}for(var t in window){try{if(!Lw["$"+t]&&Tw.call(window,t)&&window[t]!==null&&typeof window[t]==="object"){try{Fw(window[t])}catch(t){return true}}}catch(t){return true}}return false}();var Hw=function(t){if(typeof window==="undefined"||!Qw){return Fw(t)}try{return Fw(t)}catch(t){return false}};Iw=function t(e){var r=e!==null&&typeof e==="object";var n=Ow.call(e)==="[object Function]";var i=Dw(e);var s=r&&Ow.call(e)==="[object String]";var a=[];if(!r&&!n&&!i){throw new TypeError("Object.keys called on a non-object")}var o=jw&&n;if(s&&e.length>0&&!Tw.call(e,0)){for(var f=0;f<e.length;++f){a.push(String(f))}}if(i&&e.length>0){for(var c=0;c<e.length;++c){a.push(String(c))}}else{for(var u in e){if(!(o&&u==="prototype")&&Tw.call(e,u)){a.push(String(u))}}}if(Uw){var h=Hw(e);for(var l=0;l<Rw.length;++l){if(!(h&&Rw[l]==="constructor")&&Tw.call(e,Rw[l])){a.push(Rw[l])}}}return a}}var Gw=Iw;var Kw=Array.prototype.slice;var Jw=Object.keys;var zw=Jw?function t(e){return Jw(e)}:Gw;var Ww=Object.keys;zw.shim=function t(){if(Object.keys){var e=function(){var t=Object.keys(arguments);return t&&t.length===arguments.length}(1,2);if(!e){Object.keys=function t(e){if(Pw(e)){return Ww(Kw.call(e))}return Ww(e)}}}else{Object.keys=zw}return Object.keys||zw};var qw=zw;var Vw=Sw("%Object.defineProperty%",true);var Yw=function t(){if(Vw){try{Vw({},"a",{value:1});return true}catch(t){return false}}return false};Yw.hasArrayLengthDefineBug=function t(){if(!Yw()){return null}try{return Vw([],"length",{value:1}).length!==1}catch(t){return true}};var _w=Yw;var Zw=typeof Symbol==="function"&&typeof Symbol("foo")==="symbol";var Xw=Object.prototype.toString;var $w=Array.prototype.concat;var tm=Object.defineProperty;var em=function(t){return typeof t==="function"&&Xw.call(t)==="[object Function]"};var rm=_w();var nm=tm&&rm;var im=function(t,e,r,n){if(e in t&&(!em(n)||!n())){return}if(nm){tm(t,e,{configurable:true,enumerable:false,value:r,writable:true})}else{t[e]=r}};var sm=function(t,e){var r=arguments.length>2?arguments[2]:{};var n=qw(e);if(Zw){n=$w.call(n,Object.getOwnPropertySymbols(e))}for(var i=0;i<n.length;i+=1){im(t,n[i],e[n[i]],r[n[i]])}};sm.supportsDescriptors=!!nm;var am=sm;var om=Cw(Sw("String.prototype.indexOf"));var fm=function t(e,r){var n=Sw(e,!!r);if(typeof n==="function"&&om(e,".prototype.")>-1){return Cw(n)}return n};var cm=Sw("%Array%");var um=!cm.isArray&&fm("Object.prototype.toString");var hm=cm.isArray||function t(e){return um(e)==="[object Array]"};var lm=hm;var dm=Sw("%TypeError%");var vm=Sw("%Reflect.apply%",true)||fm("%Function.prototype.apply%");var bm=function t(e,r){var n=arguments.length>2?arguments[2]:[];if(!lm(n)){throw new dm("Assertion failed: optional `argumentsList`, if provided, must be a List")}return vm(e,r,n)};var pm=typeof Map==="function"&&Map.prototype;var gm=Object.getOwnPropertyDescriptor&&pm?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null;var ym=pm&&gm&&typeof gm.get==="function"?gm.get:null;var wm=pm&&Map.prototype.forEach;var mm=typeof Set==="function"&&Set.prototype;var Am=Object.getOwnPropertyDescriptor&&mm?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null;var Em=mm&&Am&&typeof Am.get==="function"?Am.get:null;var km=mm&&Set.prototype.forEach;var Mm=typeof WeakMap==="function"&&WeakMap.prototype;var Bm=Mm?WeakMap.prototype.has:null;var Sm=typeof WeakSet==="function"&&WeakSet.prototype;var Cm=Sm?WeakSet.prototype.has:null;var xm=typeof WeakRef==="function"&&WeakRef.prototype;var Pm=xm?WeakRef.prototype.deref:null;var Im=Boolean.prototype.valueOf;var Tm=Object.prototype.toString;var Om=Function.prototype.toString;var Dm=String.prototype.match;var Nm=String.prototype.slice;var Um=String.prototype.replace;var jm=String.prototype.toUpperCase;var Rm=String.prototype.toLowerCase;var Fm=RegExp.prototype.test;var Lm=Array.prototype.concat;var Qm=Array.prototype.join;var Hm=Array.prototype.slice;var Gm=Math.floor;var Km=typeof BigInt==="function"?BigInt.prototype.valueOf:null;var Jm=Object.getOwnPropertySymbols;var zm=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?Symbol.prototype.toString:null;var Wm=typeof Symbol==="function"&&typeof Symbol.iterator==="object";var qm=typeof Symbol==="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Wm?"object":"symbol")?Symbol.toStringTag:null;var Vm=Object.prototype.propertyIsEnumerable;var Ym=(typeof Reflect==="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function _m(t,e){if(t===Infinity||t===-Infinity||t!==t||t&&t>-1e3&&t<1e3||Fm.call(/e/,e)){return e}var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t==="number"){var n=t<0?-Gm(-t):Gm(t);if(n!==t){var i=String(n);var s=Nm.call(e,i.length+1);return Um.call(i,r,"$&_")+"."+Um.call(Um.call(s,/([0-9]{3})/g,"$&_"),/_$/,"")}}return Um.call(e,r,"$&_")}var Zm=r.custom;var Xm=cA(Zm)?Zm:null;var $m=function t(e,n,i,s){var a=n||{};if(lA(a,"quoteStyle")&&(a.quoteStyle!=="single"&&a.quoteStyle!=="double")){throw new TypeError('option "quoteStyle" must be "single" or "double"')}if(lA(a,"maxStringLength")&&(typeof a.maxStringLength==="number"?a.maxStringLength<0&&a.maxStringLength!==Infinity:a.maxStringLength!==null)){throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`')}var o=lA(a,"customInspect")?a.customInspect:true;if(typeof o!=="boolean"&&o!=="symbol"){throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`")}if(lA(a,"indent")&&a.indent!==null&&a.indent!=="\t"&&!(parseInt(a.indent,10)===a.indent&&a.indent>0)){throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`')}if(lA(a,"numericSeparator")&&typeof a.numericSeparator!=="boolean"){throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`')}var f=a.numericSeparator;if(typeof e==="undefined"){return"undefined"}if(e===null){return"null"}if(typeof e==="boolean"){return e?"true":"false"}if(typeof e==="string"){return EA(e,a)}if(typeof e==="number"){if(e===0){return Infinity/e>0?"0":"-0"}var c=String(e);return f?_m(e,c):c}if(typeof e==="bigint"){var u=String(e)+"n";return f?_m(e,u):u}var h=typeof a.depth==="undefined"?5:a.depth;if(typeof i==="undefined"){i=0}if(i>=h&&h>0&&typeof e==="object"){return rA(e)?"[Array]":"[Object]"}var l=xA(a,i);if(typeof s==="undefined"){s=[]}else if(bA(s,e)>=0){return"[Circular]"}function d(e,r,n){if(r){s=Hm.call(s);s.push(r)}if(n){var o={depth:a.depth};if(lA(a,"quoteStyle")){o.quoteStyle=a.quoteStyle}return t(e,o,i+1,s)}return t(e,a,i+1,s)}if(typeof e==="function"&&!iA(e)){var v=vA(e);var b=IA(e,d);return"[Function"+(v?": "+v:" (anonymous)")+"]"+(b.length>0?" { "+Qm.call(b,", ")+" }":"")}if(cA(e)){var p=Wm?Um.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):zm.call(e);return typeof e==="object"&&!Wm?MA(p):p}if(AA(e)){var g="<"+Rm.call(String(e.nodeName));var y=e.attributes||[];for(var w=0;w<y.length;w++){g+=" "+y[w].name+"="+tA(eA(y[w].value),"double",a)}g+=">";if(e.childNodes&&e.childNodes.length){g+="..."}g+="</"+Rm.call(String(e.nodeName))+">";return g}if(rA(e)){if(e.length===0){return"[]"}var m=IA(e,d);if(l&&!CA(m)){return"["+PA(m,l)+"]"}return"[ "+Qm.call(m,", ")+" ]"}if(sA(e)){var A=IA(e,d);if(!("cause"in Error.prototype)&&"cause"in e&&!Vm.call(e,"cause")){return"{ ["+String(e)+"] "+Qm.call(Lm.call("[cause]: "+d(e.cause),A),", ")+" }"}if(A.length===0){return"["+String(e)+"]"}return"{ ["+String(e)+"] "+Qm.call(A,", ")+" }"}if(typeof e==="object"&&o){if(Xm&&typeof e[Xm]==="function"&&r){return r(e,{depth:h-i})}else if(o!=="symbol"&&typeof e.inspect==="function"){return e.inspect()}}if(pA(e)){var E=[];wm.call(e,(function(t,r){E.push(d(r,e,true)+" => "+d(t,e))}));return SA("Map",ym.call(e),E,l)}if(wA(e)){var k=[];km.call(e,(function(t){k.push(d(t,e))}));return SA("Set",Em.call(e),k,l)}if(gA(e)){return BA("WeakMap")}if(mA(e)){return BA("WeakSet")}if(yA(e)){return BA("WeakRef")}if(oA(e)){return MA(d(Number(e)))}if(uA(e)){return MA(d(Km.call(e)))}if(fA(e)){return MA(Im.call(e))}if(aA(e)){return MA(d(String(e)))}if(!nA(e)&&!iA(e)){var M=IA(e,d);var B=Ym?Ym(e)===Object.prototype:e instanceof Object||e.constructor===Object;var S=e instanceof Object?"":"null prototype";var C=!B&&qm&&Object(e)===e&&qm in e?Nm.call(dA(e),8,-1):S?"Object":"";var x=B||typeof e.constructor!=="function"?"":e.constructor.name?e.constructor.name+" ":"";var P=x+(C||S?"["+Qm.call(Lm.call([],C||[],S||[]),": ")+"] ":"");if(M.length===0){return P+"{}"}if(l){return P+"{"+PA(M,l)+"}"}return P+"{ "+Qm.call(M,", ")+" }"}return String(e)};function tA(t,e,r){var n=(r.quoteStyle||e)==="double"?'"':"'";return n+t+n}function eA(t){return Um.call(String(t),/"/g,"&quot;")}function rA(t){return dA(t)==="[object Array]"&&(!qm||!(typeof t==="object"&&qm in t))}function nA(t){return dA(t)==="[object Date]"&&(!qm||!(typeof t==="object"&&qm in t))}function iA(t){return dA(t)==="[object RegExp]"&&(!qm||!(typeof t==="object"&&qm in t))}function sA(t){return dA(t)==="[object Error]"&&(!qm||!(typeof t==="object"&&qm in t))}function aA(t){return dA(t)==="[object String]"&&(!qm||!(typeof t==="object"&&qm in t))}function oA(t){return dA(t)==="[object Number]"&&(!qm||!(typeof t==="object"&&qm in t))}function fA(t){return dA(t)==="[object Boolean]"&&(!qm||!(typeof t==="object"&&qm in t))}function cA(t){if(Wm){return t&&typeof t==="object"&&t instanceof Symbol}if(typeof t==="symbol"){return true}if(!t||typeof t!=="object"||!zm){return false}try{zm.call(t);return true}catch(t){}return false}function uA(t){if(!t||typeof t!=="object"||!Km){return false}try{Km.call(t);return true}catch(t){}return false}var hA=Object.prototype.hasOwnProperty||function(t){return t in this};function lA(t,e){return hA.call(t,e)}function dA(t){return Tm.call(t)}function vA(t){if(t.name){return t.name}var e=Dm.call(Om.call(t),/^function\s*([\w$]+)/);if(e){return e[1]}return null}function bA(t,e){if(t.indexOf){return t.indexOf(e)}for(var r=0,n=t.length;r<n;r++){if(t[r]===e){return r}}return-1}function pA(t){if(!ym||!t||typeof t!=="object"){return false}try{ym.call(t);try{Em.call(t)}catch(t){return true}return t instanceof Map}catch(t){}return false}function gA(t){if(!Bm||!t||typeof t!=="object"){return false}try{Bm.call(t,Bm);try{Cm.call(t,Cm)}catch(t){return true}return t instanceof WeakMap}catch(t){}return false}function yA(t){if(!Pm||!t||typeof t!=="object"){return false}try{Pm.call(t);return true}catch(t){}return false}function wA(t){if(!Em||!t||typeof t!=="object"){return false}try{Em.call(t);try{ym.call(t)}catch(t){return true}return t instanceof Set}catch(t){}return false}function mA(t){if(!Cm||!t||typeof t!=="object"){return false}try{Cm.call(t,Cm);try{Bm.call(t,Bm)}catch(t){return true}return t instanceof WeakSet}catch(t){}return false}function AA(t){if(!t||typeof t!=="object"){return false}if(typeof HTMLElement!=="undefined"&&t instanceof HTMLElement){return true}return typeof t.nodeName==="string"&&typeof t.getAttribute==="function"}function EA(t,e){if(t.length>e.maxStringLength){var r=t.length-e.maxStringLength;var n="... "+r+" more character"+(r>1?"s":"");return EA(Nm.call(t,0,e.maxStringLength),e)+n}var i=Um.call(Um.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,kA);return tA(i,"single",e)}function kA(t){var e=t.charCodeAt(0);var r={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];if(r){return"\\"+r}return"\\x"+(e<16?"0":"")+jm.call(e.toString(16))}function MA(t){return"Object("+t+")"}function BA(t){return t+" { ? }"}function SA(t,e,r,n){var i=n?PA(r,n):Qm.call(r,", ");return t+" ("+e+") {"+i+"}"}function CA(t){for(var e=0;e<t.length;e++){if(bA(t[e],"\n")>=0){return false}}return true}function xA(t,e){var r;if(t.indent==="\t"){r="\t"}else if(typeof t.indent==="number"&&t.indent>0){r=Qm.call(Array(t.indent+1)," ")}else{return null}return{base:r,prev:Qm.call(Array(e+1),r)}}function PA(t,e){if(t.length===0){return""}var r="\n"+e.prev+e.base;return r+Qm.call(t,","+r)+"\n"+e.prev}function IA(t,e){var r=rA(t);var n=[];if(r){n.length=t.length;for(var i=0;i<t.length;i++){n[i]=lA(t,i)?e(t[i],t):""}}var s=typeof Jm==="function"?Jm(t):[];var a;if(Wm){a={};for(var o=0;o<s.length;o++){a["$"+s[o]]=s[o]}}for(var f in t){if(!lA(t,f)){continue}if(r&&String(Number(f))===f&&f<t.length){continue}if(Wm&&a["$"+f]instanceof Symbol){continue}else if(Fm.call(/[^\w$]/,f)){n.push(e(f,t)+": "+e(t[f],t))}else{n.push(f+": "+e(t[f],t))}}if(typeof Jm==="function"){for(var c=0;c<s.length;c++){if(Vm.call(t,s[c])){n.push("["+e(s[c])+"]: "+e(t[s[c]],t))}}}return n}var TA=function t(e){return typeof e==="string"||typeof e==="symbol"};var OA=function t(e){if(e===null){return"Null"}if(typeof e==="undefined"){return"Undefined"}if(typeof e==="function"||typeof e==="object"){return"Object"}if(typeof e==="number"){return"Number"}if(typeof e==="boolean"){return"Boolean"}if(typeof e==="string"){return"String"}};var DA=function t(e){if(typeof e==="symbol"){return"Symbol"}if(typeof e==="bigint"){return"BigInt"}return OA(e)};var NA=Sw("%TypeError%");var UA=function t(e,r){if(DA(e)!=="Object"){throw new NA("Assertion failed: Type(O) is not Object")}if(!TA(r)){throw new NA("Assertion failed: IsPropertyKey(P) is not true, got "+$m(r))}return e[r]};var jA=Sw("%TypeError%");var RA=function t(e,r){if(e==null){throw new jA(r||"Cannot call method on "+e)}return e};var FA=RA;var LA=Sw("%Object%");var QA=function t(e){FA(e);return LA(e)};var HA=Sw("%TypeError%");var GA=function t(e,r){if(!TA(r)){throw new HA("Assertion failed: IsPropertyKey(P) is not true")}var n=QA(e);return n[r]};var KA=Function.prototype.toString;var JA=typeof Reflect==="object"&&Reflect!==null&&Reflect.apply;var zA;var WA;if(typeof JA==="function"&&typeof Object.defineProperty==="function"){try{zA=Object.defineProperty({},"length",{get:function(){throw WA}});WA={};JA((function(){throw 42}),null,zA)}catch(t){if(t!==WA){JA=null}}}else{JA=null}var qA=/^\s*class\b/;var VA=function t(e){try{var r=KA.call(e);return qA.test(r)}catch(t){return false}};var YA=function t(e){try{if(VA(e)){return false}KA.call(e);return true}catch(t){return false}};var _A=Object.prototype.toString;var ZA="[object Object]";var XA="[object Function]";var $A="[object GeneratorFunction]";var tE="[object HTMLAllCollection]";var eE="[object HTML document.all class]";var rE="[object HTMLCollection]";var nE=typeof Symbol==="function"&&!!Symbol.toStringTag;var iE=!(0 in[,]);var sE=function t(){return false};if(typeof document==="object"){var aE=document.all;if(_A.call(aE)===_A.call(document.all)){sE=function t(e){if((iE||!e)&&(typeof e==="undefined"||typeof e==="object")){try{var r=_A.call(e);return(r===tE||r===eE||r===rE||r===ZA)&&e("")==null}catch(t){}}return false}}}var oE=JA?function t(e){if(sE(e)){return true}if(!e){return false}if(typeof e!=="function"&&typeof e!=="object"){return false}try{JA(e,null,zA)}catch(t){if(t!==WA){return false}}return!VA(e)&&YA(e)}:function t(e){if(sE(e)){return true}if(!e){return false}if(typeof e!=="function"&&typeof e!=="object"){return false}if(nE){return YA(e)}if(VA(e)){return false}var r=_A.call(e);if(r!==XA&&r!==$A&&!/^\[object HTML/.test(r)){return false}return YA(e)};var fE=oE;var cE=Sw("%TypeError%");var uE=function t(e,r){if(!TA(r)){throw new cE("Assertion failed: IsPropertyKey(P) is not true")}var n=GA(e,r);if(n==null){return void 0}if(!fE(n)){throw new cE(r+" is not a function: "+$m(n))}return n};var hE=function t(){return Xy()&&!!Symbol.toStringTag};var lE=hE();var dE;var vE;var bE;var pE;if(lE){dE=fm("Object.prototype.hasOwnProperty");vE=fm("RegExp.prototype.exec");bE={};var gE=function(){throw bE};pE={toString:gE,valueOf:gE};if(typeof Symbol.toPrimitive==="symbol"){pE[Symbol.toPrimitive]=gE}}var yE=fm("Object.prototype.toString");var wE=Object.getOwnPropertyDescriptor;var mE="[object RegExp]";var AE=lE?function t(e){if(!e||typeof e!=="object"){return false}var r=wE(e,"lastIndex");var n=r&&dE(r,"value");if(!n){return false}try{vE(e,pE)}catch(t){return t===bE}}:function t(e){if(!e||typeof e!=="object"&&typeof e!=="function"){return false}return yE(e)===mE};var EE=function t(e){return!!e};var kE=Sw("%Symbol.match%",true);var ME=function t(e){if(!e||typeof e!=="object"){return false}if(kE){var r=e[kE];if(typeof r!=="undefined"){return EE(r)}}return AE(e)};var BE=Sw("%String%");var SE=Sw("%TypeError%");var CE=function t(e){if(typeof e==="symbol"){throw new SE("Cannot convert a Symbol value to a string")}return BE(e)};var xE=function t(){return typeof function t(){}.name==="string"};var PE=Object.getOwnPropertyDescriptor;xE.functionsHaveConfigurableNames=function t(){if(!xE()||!PE){return false}var e=PE((function(){}),"name");return!!e&&!!e.configurable};var IE=Function.prototype.bind;xE.boundFunctionsHaveNames=function t(){return xE()&&typeof IE==="function"&&function t(){}.bind().name!==""};var TE=xE;var OE=t((function(t){var e=TE.functionsHaveConfigurableNames();var r=Object;var n=TypeError;t.exports=function t(){if(this!=null&&this!==r(this)){throw new n("RegExp.prototype.flags getter called on non-object")}var e="";if(this.hasIndices){e+="d"}if(this.global){e+="g"}if(this.ignoreCase){e+="i"}if(this.multiline){e+="m"}if(this.dotAll){e+="s"}if(this.unicode){e+="u"}if(this.sticky){e+="y"}return e};if(e&&Object.defineProperty){Object.defineProperty(t.exports,"name",{value:"get flags"})}}));var DE=am.supportsDescriptors;var NE=Object.getOwnPropertyDescriptor;var UE=function t(){if(DE&&/a/gim.flags==="gim"){var e=NE(RegExp.prototype,"flags");if(e&&typeof e.get==="function"&&typeof RegExp.prototype.dotAll==="boolean"&&typeof RegExp.prototype.hasIndices==="boolean"){var r="";var n={};Object.defineProperty(n,"hasIndices",{get:function(){r+="d"}});Object.defineProperty(n,"sticky",{get:function(){r+="y"}});if(r==="dy"){return e.get}}}return OE};var jE=am.supportsDescriptors;var RE=Object.getOwnPropertyDescriptor;var FE=Object.defineProperty;var LE=TypeError;var QE=Object.getPrototypeOf;var HE=/a/;var GE=function t(){if(!jE||!QE){throw new LE("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors")}var e=UE();var r=QE(HE);var n=RE(r,"flags");if(!n||n.get!==e){FE(r,"flags",{configurable:true,enumerable:false,get:e})}return e};var KE=Cw(UE());am(KE,{getPolyfill:UE,implementation:OE,shim:GE});var JE=KE;var zE=function t(e){return typeof e==="number"&&e>=55296&&e<=56319};var WE=function t(e){return typeof e==="number"&&e>=56320&&e<=57343};var qE=Sw("%TypeError%");var VE=Sw("%String.fromCharCode%");var YE=function t(e,r){if(!zE(e)||!WE(r)){throw new qE("Assertion failed: `lead` must be a leading surrogate char code, and `trail` must be a trailing surrogate char code")}return VE(e)+VE(r)};var _E=Sw("%TypeError%");var ZE=fm("String.prototype.charAt");var XE=fm("String.prototype.charCodeAt");var $E=function t(e,r){if(DA(e)!=="String"){throw new _E("Assertion failed: `string` must be a String")}var n=e.length;if(r<0||r>=n){throw new _E("Assertion failed: `position` must be >= 0, and < the length of `string`")}var i=XE(e,r);var s=ZE(e,r);var a=zE(i);var o=WE(i);if(!a&&!o){return{"[[CodePoint]]":s,"[[CodeUnitCount]]":1,"[[IsUnpairedSurrogate]]":false}}if(o||r+1===n){return{"[[CodePoint]]":s,"[[CodeUnitCount]]":1,"[[IsUnpairedSurrogate]]":true}}var f=XE(e,r+1);if(!WE(f)){return{"[[CodePoint]]":s,"[[CodeUnitCount]]":1,"[[IsUnpairedSurrogate]]":true}}return{"[[CodePoint]]":YE(i,f),"[[CodeUnitCount]]":2,"[[IsUnpairedSurrogate]]":false}};var tk=Sw("%Math.abs%");var ek=function t(e){return tk(e)};var rk=Math.floor;var nk=function t(e){if(DA(e)==="BigInt"){return e}return rk(e)};var ik=Number.isNaN||function t(e){return e!==e};var sk=Number.isNaN||function(t){return t!==t};var ak=Number.isFinite||function(t){return typeof t==="number"&&!sk(t)&&t!==Infinity&&t!==-Infinity};var ok=function t(e){if(DA(e)!=="Number"||ik(e)||!ak(e)){return false}var r=ek(e);return nk(r)===r};var fk=Sw("%Math%");var ck=Sw("%Number%");var uk=ck.MAX_SAFE_INTEGER||fk.pow(2,53)-1;var hk=Sw("%TypeError%");var lk=function t(e,r,n){if(DA(e)!=="String"){throw new hk("Assertion failed: `S` must be a String")}if(!ok(r)||r<0||r>uk){throw new hk("Assertion failed: `length` must be an integer >= 0 and <= 2**53")}if(DA(n)!=="Boolean"){throw new hk("Assertion failed: `unicode` must be a Boolean")}if(!n){return r+1}var i=e.length;if(r+1>=i){return r+1}var s=$E(e,r);return r+s["[[CodeUnitCount]]"]};var dk=Sw("%TypeError%");var vk=function t(e,r){if(DA(r)!=="Boolean"){throw new dk("Assertion failed: Type(done) is not Boolean")}return{value:e,done:r}};var bk=_w()&&Sw("%Object.defineProperty%",true);var pk=_w.hasArrayLengthDefineBug();var gk=pk&&hm;var yk=fm("Object.prototype.propertyIsEnumerable");var wk=function t(e,r,n,i,s,a){if(!bk){if(!e(a)){return false}if(!a["[[Configurable]]"]||!a["[[Writable]]"]){return false}if(s in i&&yk(i,s)!==!!a["[[Enumerable]]"]){return false}var o=a["[[Value]]"];i[s]=o;return r(i[s],o)}if(pk&&s==="length"&&"[[Value]]"in a&&gk(i)&&i.length!==a["[[Value]]"]){i.length=a["[[Value]]"];return i.length===a["[[Value]]"]}bk(i,s,n(a));return true};var mk=function t(e){return ew(e,"[[StartIndex]]")&&ew(e,"[[EndIndex]]")&&e["[[StartIndex]]"]>=0&&e["[[EndIndex]]"]>=e["[[StartIndex]]"]&&String(parseInt(e["[[StartIndex]]"],10))===String(e["[[StartIndex]]"])&&String(parseInt(e["[[EndIndex]]"],10))===String(e["[[EndIndex]]"])};var Ak=Sw("%TypeError%");var Ek=Sw("%SyntaxError%");var kk={"Property Descriptor":function t(e){var r={"[[Configurable]]":true,"[[Enumerable]]":true,"[[Get]]":true,"[[Set]]":true,"[[Value]]":true,"[[Writable]]":true};for(var n in e){if(ew(e,n)&&!r[n]){return false}}var i=ew(e,"[[Value]]");var s=ew(e,"[[Get]]")||ew(e,"[[Set]]");if(i&&s){throw new Ak("Property Descriptors may not be both accessor and data descriptors")}return true},"Match Record":mk,"Iterator Record":function t(e){return ew(e,"[[Iterator]]")&&ew(e,"[[NextMethod]]")&&ew(e,"[[Done]]")},"PromiseCapability Record":function t(e){return e&&ew(e,"[[Resolve]]")&&typeof e["[[Resolve]]"]==="function"&&ew(e,"[[Reject]]")&&typeof e["[[Reject]]"]==="function"&&ew(e,"[[Promise]]")&&e["[[Promise]]"]&&typeof e["[[Promise]]"].then==="function"},"AsyncGeneratorRequest Record":function t(e){return e&&ew(e,"[[Completion]]")&&ew(e,"[[Capability]]")&&kk["PromiseCapability Record"](e["[[Capability]]"])}};var Mk=function t(e,r,n,i){var s=kk[r];if(typeof s!=="function"){throw new Ek("unknown record type: "+r)}if(e(i)!=="Object"||!s(i)){throw new Ak(n+" must be a "+r)}};var Bk=function t(e){if(typeof e==="undefined"){return e}var r={};if("[[Value]]"in e){r.value=e["[[Value]]"]}if("[[Writable]]"in e){r.writable=!!e["[[Writable]]"]}if("[[Get]]"in e){r.get=e["[[Get]]"]}if("[[Set]]"in e){r.set=e["[[Set]]"]}if("[[Enumerable]]"in e){r.enumerable=!!e["[[Enumerable]]"]}if("[[Configurable]]"in e){r.configurable=!!e["[[Configurable]]"]}return r};var Sk=function t(e){if(typeof e!=="undefined"){Mk(DA,"Property Descriptor","Desc",e)}return Bk(e)};var Ck=function t(e){if(typeof e==="undefined"){return false}Mk(DA,"Property Descriptor","Desc",e);if(!ew(e,"[[Value]]")&&!ew(e,"[[Writable]]")){return false}return true};var xk=function t(e,r){if(e===r){if(e===0){return 1/e===1/r}return true}return ik(e)&&ik(r)};var Pk=Sw("%TypeError%");var Ik=function t(e,r,n){if(DA(e)!=="Object"){throw new Pk("Assertion failed: Type(O) is not Object")}if(!TA(r)){throw new Pk("Assertion failed: IsPropertyKey(P) is not true")}var i={"[[Configurable]]":true,"[[Enumerable]]":false,"[[Value]]":n,"[[Writable]]":true};return wk(Ck,xk,Sk,e,r,i)};var Tk=function t(e,r){for(var n=0;n<e.length;n+=1){r(e[n],n,e)}};var Ok=Sw("%TypeError%");var Dk=Sw("%WeakMap%",true);var Nk=Sw("%Map%",true);var Uk=fm("WeakMap.prototype.get",true);var jk=fm("WeakMap.prototype.set",true);var Rk=fm("WeakMap.prototype.has",true);var Fk=fm("Map.prototype.get",true);var Lk=fm("Map.prototype.set",true);var Qk=fm("Map.prototype.has",true);var Hk=function(t,e){for(var r=t,n;(n=r.next)!==null;r=n){if(n.key===e){r.next=n.next;n.next=t.next;t.next=n;return n}}};var Gk=function(t,e){var r=Hk(t,e);return r&&r.value};var Kk=function(t,e,r){var n=Hk(t,e);if(n){n.value=r}else{t.next={key:e,next:t.next,value:r}}};var Jk=function(t,e){return!!Hk(t,e)};var zk=function t(){var e;var r;var n;var i={assert:function(t){if(!i.has(t)){throw new Ok("Side channel does not contain "+$m(t))}},get:function(t){if(Dk&&t&&(typeof t==="object"||typeof t==="function")){if(e){return Uk(e,t)}}else if(Nk){if(r){return Fk(r,t)}}else{if(n){return Gk(n,t)}}},has:function(t){if(Dk&&t&&(typeof t==="object"||typeof t==="function")){if(e){return Rk(e,t)}}else if(Nk){if(r){return Qk(r,t)}}else{if(n){return Jk(n,t)}}return false},set:function(t,i){if(Dk&&t&&(typeof t==="object"||typeof t==="function")){if(!e){e=new Dk}jk(e,t,i)}else if(Nk){if(!r){r=new Nk}Lk(r,t,i)}else{if(!n){n={key:{},next:null}}Kk(n,t,i)}}};return i};var Wk=zk();var qk=Sw("%TypeError%");var Vk={assert:function(t,e){if(!t||typeof t!=="object"&&typeof t!=="function"){throw new qk("`O` is not an object")}if(typeof e!=="string"){throw new qk("`slot` must be a string")}Wk.assert(t);if(!Vk.has(t,e)){throw new qk("`slot` is not present on `O`")}},get:function(t,e){if(!t||typeof t!=="object"&&typeof t!=="function"){throw new qk("`O` is not an object")}if(typeof e!=="string"){throw new qk("`slot` must be a string")}var r=Wk.get(t);return r&&r["$"+e]},has:function(t,e){if(!t||typeof t!=="object"&&typeof t!=="function"){throw new qk("`O` is not an object")}if(typeof e!=="string"){throw new qk("`slot` must be a string")}var r=Wk.get(t);return!!r&&ew(r,"$"+e)},set:function(t,e,r){if(!t||typeof t!=="object"&&typeof t!=="function"){throw new qk("`O` is not an object")}if(typeof e!=="string"){throw new qk("`slot` must be a string")}var n=Wk.get(t);if(!n){n={};Wk.set(t,n)}n["$"+e]=r}};if(Object.freeze){Object.freeze(Vk)}var Yk=Vk;var _k={foo:{}};var Zk=Object;var Xk=function t(){return{__proto__:_k}.foo===_k.foo&&!({__proto__:null}instanceof Zk)};var $k=Sw("%Object.create%",true);var tM=Sw("%TypeError%");var eM=Sw("%SyntaxError%");var rM=Xk();var nM=function t(e){if(e!==null&&DA(e)!=="Object"){throw new tM("Assertion failed: `proto` must be null or an object")}var r=arguments.length<2?[]:arguments[1];if(!lm(r)){throw new tM("Assertion failed: `additionalInternalSlotsList` must be an Array")}var n;if($k){n=$k(e)}else if(rM){n={__proto__:e}}else{if(e===null){throw new eM("native Object.create support is required to create null objects")}var i=function t(){};i.prototype=e;n=new i}if(r.length>0){Tk(r,(function(t){Yk.set(n,t,void undefined)}))}return n};var iM=Sw("%TypeError%");var sM=fm("RegExp.prototype.exec");var aM=function t(e,r){if(DA(e)!=="Object"){throw new iM("Assertion failed: `R` must be an Object")}if(DA(r)!=="String"){throw new iM("Assertion failed: `S` must be a String")}var n=UA(e,"exec");if(fE(n)){var i=bm(n,e,[r]);if(i===null||DA(i)==="Object"){return i}throw new iM('"exec" method must return `null` or an Object')}return sM(e,r)};var oM=Sw("%TypeError%");var fM=function(){try{delete[].length;return true}catch(t){return false}}();var cM=function t(e,r,n,i){if(DA(e)!=="Object"){throw new oM("Assertion failed: `O` must be an Object")}if(!TA(r)){throw new oM("Assertion failed: `P` must be a Property Key")}if(DA(i)!=="Boolean"){throw new oM("Assertion failed: `Throw` must be a Boolean")}if(i){e[r]=n;if(fM&&!xk(e[r],n)){throw new oM("Attempted to assign to readonly property.")}return true}try{e[r]=n;return fM?xk(e[r],n):true}catch(t){return false}};var uM=function t(e){return e===null||typeof e!=="function"&&typeof e!=="object"};var hM=function t(e){return e===null||typeof e!=="function"&&typeof e!=="object"};var lM=Date.prototype.getDay;var dM=function t(e){try{lM.call(e);return true}catch(t){return false}};var vM=Object.prototype.toString;var bM="[object Date]";var pM=hE();var gM=function t(e){if(typeof e!=="object"||e===null){return false}return pM?dM(e):vM.call(e)===bM};var yM=t((function(t){var e=Object.prototype.toString;var r=tw();if(r){var n=Symbol.prototype.toString;var i=/^Symbol\(.*\)$/;var s=function t(e){if(typeof e.valueOf()!=="symbol"){return false}return i.test(n.call(e))};t.exports=function t(r){if(typeof r==="symbol"){return true}if(e.call(r)!=="[object Symbol]"){return false}try{return s(r)}catch(t){return false}}}else{t.exports=function t(e){return false}}}));var wM=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol";var mM=function t(e,r){if(typeof e==="undefined"||e===null){throw new TypeError("Cannot call method on "+e)}if(typeof r!=="string"||r!=="number"&&r!=="string"){throw new TypeError('hint must be "string" or "number"')}var n=r==="string"?["toString","valueOf"]:["valueOf","toString"];var i,s,a;for(a=0;a<n.length;++a){i=e[n[a]];if(oE(i)){s=i.call(e);if(hM(s)){return s}}}throw new TypeError("No default value")};var AM=function t(e,r){var n=e[r];if(n!==null&&typeof n!=="undefined"){if(!oE(n)){throw new TypeError(n+" returned for property "+r+" of object "+e+" is not a function")}return n}return void 0};var EM=function t(e){if(hM(e)){return e}var r="default";if(arguments.length>1){if(arguments[1]===String){r="string"}else if(arguments[1]===Number){r="number"}}var n;if(wM){if(Symbol.toPrimitive){n=AM(e,Symbol.toPrimitive)}else if(yM(e)){n=Symbol.prototype.valueOf}}if(typeof n!=="undefined"){var i=n.call(e,r);if(hM(i)){return i}throw new TypeError("unable to convert exotic object to primitive")}if(r==="default"&&(gM(e)||yM(e))){r="string"}return mM(e,r==="default"?"number":r)};var kM=function t(e){if(arguments.length>1){return EM(e,arguments[1])}return EM(e)};var MM=fm("RegExp.prototype.exec");var BM=Sw("%TypeError%");var SM=function t(e){if(!AE(e)){throw new BM("`regex` must be a RegExp")}return function t(r){return MM(e,r)!==null}};var CM=Sw("%Number%");var xM=Sw("%RegExp%");var PM=Sw("%TypeError%");var IM=Sw("%parseInt%");var TM=fm("String.prototype.slice");var OM=SM(/^0b[01]+$/i);var DM=SM(/^0o[0-7]+$/i);var NM=SM(/^[-+]0x[0-9a-f]+$/i);var UM=["","​","￾"].join("");var jM=new xM("["+UM+"]","g");var RM=SM(jM);var FM=["\t\n\v\f\r   ᠎    ","         　\u2028","\u2029\ufeff"].join("");var LM=new RegExp("(^["+FM+"]+)|(["+FM+"]+$)","g");var QM=fm("String.prototype.replace");var HM=function(t){return QM(t,LM,"")};var GM=function t(e){if(DA(e)!=="String"){throw new PM("Conversion from 'BigInt' to 'number' is not allowed.")}if(OM(e)){return CM(IM(TM(e,2),2))}if(DM(e)){return CM(IM(TM(e,2),8))}if(RM(e)||NM(e)){return NaN}var r=HM(e);if(r!==e){return t(r)}return CM(e)};var KM=Sw("%TypeError%");var JM=Sw("%Number%");var zM=function t(e){var r=uM(e)?e:kM(e,JM);if(typeof r==="symbol"){throw new KM("Cannot convert a Symbol value to a number")}if(typeof r==="bigint"){throw new KM("Conversion from 'BigInt' to 'number' is not allowed.")}if(typeof r==="string"){return GM(r)}return JM(r)};var WM=function t(e){return e>=0?1:-1};var qM=function t(e){var r=zM(e);if(ik(r)||r===0){return 0}if(!ak(r)){return r}var n=nk(ek(r));if(n===0){return 0}return WM(r)*n};var VM=function t(e){var r=qM(e);if(r<=0){return 0}if(r>uk){return uk}return r};var YM=Sw("%Object.defineProperty%",true);var _M=hE();var ZM=_M?Symbol.toStringTag:null;var XM=function t(e,r){var n=arguments.length>2&&arguments[2]&&arguments[2].force;if(ZM&&(n||!ew(e,ZM))){if(YM){YM(e,ZM,{configurable:true,enumerable:false,value:r,writable:false})}else{e[ZM]=r}}};var $M=tw();var tB=Sw("%TypeError%");var eB=Sw("%IteratorPrototype%",true);var rB=function t(e,r,n,i){if(DA(r)!=="String"){throw new tB("`S` must be a string")}if(DA(n)!=="Boolean"){throw new tB("`global` must be a boolean")}if(DA(i)!=="Boolean"){throw new tB("`fullUnicode` must be a boolean")}Yk.set(this,"[[IteratingRegExp]]",e);Yk.set(this,"[[IteratedString]]",r);Yk.set(this,"[[Global]]",n);Yk.set(this,"[[Unicode]]",i);Yk.set(this,"[[Done]]",false)};if(eB){rB.prototype=nM(eB)}var nB=function t(){var e=this;if(DA(e)!=="Object"){throw new tB("receiver must be an object")}if(!(e instanceof rB)||!Yk.has(e,"[[IteratingRegExp]]")||!Yk.has(e,"[[IteratedString]]")||!Yk.has(e,"[[Global]]")||!Yk.has(e,"[[Unicode]]")||!Yk.has(e,"[[Done]]")){throw new tB('"this" value must be a RegExpStringIterator instance')}if(Yk.get(e,"[[Done]]")){return vk(undefined,true)}var r=Yk.get(e,"[[IteratingRegExp]]");var n=Yk.get(e,"[[IteratedString]]");var i=Yk.get(e,"[[Global]]");var s=Yk.get(e,"[[Unicode]]");var a=aM(r,n);if(a===null){Yk.set(e,"[[Done]]",true);return vk(undefined,true)}if(i){var o=CE(UA(a,"0"));if(o===""){var f=VM(UA(r,"lastIndex"));var c=lk(n,f,s);cM(r,"lastIndex",c,true)}return vk(a,false)}Yk.set(e,"[[Done]]",true);return vk(a,false)};Ik(rB.prototype,"next",nB);if($M){XM(rB.prototype,"RegExp String Iterator");if(Symbol.iterator&&typeof rB.prototype[Symbol.iterator]!=="function"){var iB=function t(){return this};Ik(rB.prototype,Symbol.iterator,iB)}}var sB=function t(e,r,n,i){return new rB(e,r,n,i)};var aB=Sw;var oB=Sw("%TypeError%");var fB=function t(e,r){if(e.Type(r)!=="Object"){return false}var n={"[[Configurable]]":true,"[[Enumerable]]":true,"[[Get]]":true,"[[Set]]":true,"[[Value]]":true,"[[Writable]]":true};for(var i in r){if(ew(r,i)&&!n[i]){return false}}if(e.IsDataDescriptor(r)&&e.IsAccessorDescriptor(r)){throw new oB("Property Descriptors may not be both accessor and data descriptors")}return true};var cB=function t(e){if(typeof e==="undefined"){return false}Mk(DA,"Property Descriptor","Desc",e);if(!ew(e,"[[Get]]")&&!ew(e,"[[Set]]")){return false}return true};var uB=Sw("%TypeError%");var hB=function t(e){if(DA(e)!=="Object"){throw new uB("ToPropertyDescriptor requires an object")}var r={};if(ew(e,"enumerable")){r["[[Enumerable]]"]=EE(e.enumerable)}if(ew(e,"configurable")){r["[[Configurable]]"]=EE(e.configurable)}if(ew(e,"value")){r["[[Value]]"]=e.value}if(ew(e,"writable")){r["[[Writable]]"]=EE(e.writable)}if(ew(e,"get")){var n=e.get;if(typeof n!=="undefined"&&!fE(n)){throw new uB("getter must be a function")}r["[[Get]]"]=n}if(ew(e,"set")){var i=e.set;if(typeof i!=="undefined"&&!fE(i)){throw new uB("setter must be a function")}r["[[Set]]"]=i}if((ew(r,"[[Get]]")||ew(r,"[[Set]]"))&&(ew(r,"[[Value]]")||ew(r,"[[Writable]]"))){throw new uB("Invalid property descriptor. Cannot both specify accessors and a value or writable attribute")}return r};var lB=Sw("%TypeError%");var dB=function t(e,r,n){if(DA(e)!=="Object"){throw new lB("Assertion failed: Type(O) is not Object")}if(!TA(r)){throw new lB("Assertion failed: IsPropertyKey(P) is not true")}var i=fB({Type:DA,IsDataDescriptor:Ck,IsAccessorDescriptor:cB},n)?n:hB(n);if(!fB({Type:DA,IsDataDescriptor:Ck,IsAccessorDescriptor:cB},i)){throw new lB("Assertion failed: Desc is not a valid Property Descriptor")}return wk(Ck,xk,Sk,e,r,i)};var vB=t((function(t){var e=aB("%Reflect.construct%",true);var r=dB;try{r({},"",{"[[Get]]":function(){}})}catch(t){r=null}if(r&&e){var n={};var i={};r(i,"length",{"[[Get]]":function(){throw n},"[[Enumerable]]":true});t.exports=function t(r){try{e(r,i)}catch(t){return t===n}}}else{t.exports=function t(e){return typeof e==="function"&&!!e.prototype}}}));var bB=Sw("%Symbol.species%",true);var pB=Sw("%TypeError%");var gB=function t(e,r){if(DA(e)!=="Object"){throw new pB("Assertion failed: Type(O) is not Object")}var n=e.constructor;if(typeof n==="undefined"){return r}if(DA(n)!=="Object"){throw new pB("O.constructor is not an Object")}var i=bB?n[bB]:void 0;if(i==null){return r}if(vB(i)){return i}throw new pB("no constructor found")};var yB=fm("String.prototype.indexOf");var wB=RegExp;var mB="flags"in RegExp.prototype;var AB=function t(e,r){var n;var i="flags"in r?UA(r,"flags"):CE(JE(r));if(mB&&typeof i==="string"){n=new e(r,i)}else if(e===wB){n=new e(r.source,i)}else{n=new e(r,i)}return{flags:i,matcher:n}};var EB=function t(e){var r=this;if(DA(r)!=="Object"){throw new TypeError('"this" value must be an Object')}var n=CE(e);var i=gB(r,wB);var s=AB(i,r);var a=s.flags;var o=s.matcher;var f=VM(UA(r,"lastIndex"));cM(o,"lastIndex",f,true);var c=yB(a,"g")>-1;var u=yB(a,"u")>-1;return sB(o,n,c,u)};var kB=Object.defineProperty;var MB=Object.getOwnPropertyDescriptor;if(kB&&MB){var BB=MB(EB,"name");if(BB&&BB.configurable){kB(EB,"name",{value:"[Symbol.matchAll]"})}}var SB=EB;var CB=tw();var xB=function t(){if(!CB||typeof Symbol.matchAll!=="symbol"||typeof RegExp.prototype[Symbol.matchAll]!=="function"){return SB}return RegExp.prototype[Symbol.matchAll]};var PB=tw();var IB=fm("String.prototype.indexOf");var TB=function t(e){var r=xB();if(PB&&typeof Symbol.matchAll==="symbol"){var n=uE(e,Symbol.matchAll);if(n===RegExp.prototype[Symbol.matchAll]&&n!==r){return r}return n}if(ME(e)){return r}};var OB=function t(e){var r=FA(this);if(typeof e!=="undefined"&&e!==null){var n=ME(e);if(n){var i="flags"in e?UA(e,"flags"):JE(e);FA(i);if(IB(CE(i),"g")<0){throw new TypeError("matchAll requires a global regular expression")}}var s=TB(e);if(typeof s!=="undefined"){return bm(s,e,[r])}}var a=CE(r);var o=new RegExp(e,"g");return bm(TB(o),o,[a])};var DB=function t(){if(String.prototype.matchAll){try{"".matchAll(RegExp.prototype)}catch(t){return String.prototype.matchAll}}return OB};var NB=tw();var UB=Object.defineProperty;var jB=Object.getOwnPropertyDescriptor;var RB=function t(){var e=DB();am(String.prototype,{matchAll:e},{matchAll:function(){return String.prototype.matchAll!==e}});if(NB){var r=Symbol.matchAll||(Symbol["for"]?Symbol["for"]("Symbol.matchAll"):Symbol("Symbol.matchAll"));am(Symbol,{matchAll:r},{matchAll:function(){return Symbol.matchAll!==r}});if(UB&&jB){var n=jB(Symbol,r);if(!n||n.configurable){UB(Symbol,r,{configurable:false,enumerable:false,value:r,writable:false})}}var i=xB();var s={};s[r]=i;var a={};a[r]=function(){return RegExp.prototype[r]!==i};am(RegExp.prototype,s,a)}return e};var FB=Cw(OB);am(FB,{getPolyfill:DB,implementation:OB,shim:RB});var LB=t((function(t,e){Object.defineProperty(e,"__esModule",{value:true});e.Asn1Der=e.X500NamesLabels=void 0;const r={END_OF_CONTENT:0,BOOLEAN:1,INTEGER:2,BIT_STRING:3,OCTET_STRING:4,NULL_VALUE:5,OBJECT_ID:6,OBJECT_DESCRIPTOR:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED_PDV:11,UTF8STRING:12,RELATIVE_OID:13,SEQUENCE_10:16,SET_OF:17,NUMERABLE_STRING:18,PRINTABLE_STRING:19,T61STRING:20,VIDEO_TEX_STRING:21,IA5STRING:22,UTC_TIME:23,GENERALIZED_TIME:24,GRAPHIC_STRING:25,VISIBLE_STRING:26,GENERAL_STRING:27,UNIVERSAL_STRING:28,CHARACTER_STRING:29,BMP_STRING:30,SEQUENCE_30:48,SET:49};const n={0:"END_OF_CONTENT",1:"BOOLEAN",2:"INTEGER",3:"BIT_STRING",4:"OCTET_STRING",5:"NULL_VALUE",6:"OBJECT_ID",7:"OBJECT_DESCRIPTOR",8:"EXTERNAL",9:"REAL",10:"ENUMERATED",11:"EMBEDDED_PDV",12:"UTF8STRING",13:"RELATIVE_OID",16:"SEQUENCE_10",19:"PRINTABLE_STRING",22:"IA5STRING",24:"GENERALIZED_TIME",26:"VISIBLE_STRING",48:"SEQUENCE_30",49:"SET"};e.X500NamesLabels={CN:"2.5.4.3",C:"2.5.4.6",O:"2.5.4.10",OU:"2.5.4.11",L:"2.5.4.7",labeledURI:"1.3.6.1.4.1.250.1.57"};class i{static encodeAsInteger(t){return this.encode("INTEGER",t)}static encodeObjectId(t){return i.encode("SEQUENCE_30",i.encode("OBJECT_ID",t))}static parseX500Names(t){let r=t.matchAll(/(\w+)=("[^"]+"|[\w\.]+)/g);let n="";if(!r){throw new Error("wrong Name format")}let i=[];for(const t of r){let r=t[1];let s=t[2];if(s.substr(0,1)=='"'&&s.substr(-1)=='"'){s=s.slice(1,s.length-1)}n=e.X500NamesLabels[r];if(!n)throw new Error('Type "'+r+'" not implemented yet');i.push({type:r,value:s})}return i}static encodeName(t){let r="";let n=i.parseX500Names(t);n.forEach((t=>{let n=e.X500NamesLabels[t.type];if(!n){throw new Error(`X500 Name Object ID not implemented.(${t.value})`)}let s=i.encode("OBJECT_ID",n)+i.encode("UTF8STRING",t.value);r+=i.encode("SEQUENCE_30",s)}));return i.encode("SEQUENCE_30",i.encode("SET",r))}static encode(t,e,n=0){if(typeof e==="undefined"){throw new Error("Missing value for Der encoding")}let i=r[t];let s="";switch(t){case"OBJECT_ID":if(typeof e!=="string"){throw new Error("OBJECT_ID value must be a string")}let r=e.split(".");let a=r.shift();let o=r.shift();r.unshift((parseInt(a)*40+parseInt(o)).toString());r.forEach((t=>{let e=parseInt(t);let r="";let n=true;do{let t=e&127;e=e>>7;t+=n?0:128;r=t.toString(16).padStart(2,"0")+r;n=false}while(e);s+=r}));break;case"NULL_VALUE":s="";break;case"GENERALIZED_TIME":s=(0,Eb.stringToHex)((0,Eb.formatGeneralizedDateTime)(e));break;case"VISIBLE_STRING":case"UTF8STRING":s=(0,Eb.stringToHex)(e);break;case"INTEGER":s=BigInt(e).toString(16);s=(s.length%2?"0":"")+s;if(parseInt("0x"+s.slice(0,1),16)>7){s="00"+s}break;case"TAG":if(n>15){throw new Error("DER TAG more than 15 is not implemented")}i=parseInt("0xA"+n);case"SEQUENCE_30":case"SET":case"OCTET_STRING":if(typeof e=="string"){s=e}else if(e.constructor===Uint8Array){s=(0,Eb.uint8tohex)(e)}else{throw new Error("Wrong data type for OCTET_STRING")}break;case"BIT_STRING":s="00"+e;break;case"BOOLEAN":s=parseInt(e).toString().padStart(2,"0");break;default:throw new Error("Sorry, "+t+" not implemented.")}let a="";let o=Math.ceil(s.length/2);let f=o.toString(16);if(!o)f="00";f=(f.length%2?"0":"")+f;if(o<128){a=f}else{a=(128+Math.round(f.length/2)).toString(16)+f}s=(s.length%2?"0":"")+s;return i.toString(16).padStart(2,"0")+a+s}decode(t){let e=Array.from(t);return this.read(e)}lenEncoded(t){let e=t.shift();if(e<128){return e}else if(e>128){let r=0;for(let n=0;n<e-128;n++){r=(r<<8)+t.shift()}return r}else if(e==128){throw new Error("have to code variable length")}}readFromHexString(t){return this.read((0,Eb.hexStringToArray)(t))}readFromUint8Array(t){return this.read(Array.from(t))}readFromBase64String(t){return this.readFromUint8Array((0,Eb.base64ToUint8array)(t))}readFromUrlBase64String(t){let e=t.split("_").join("/").split("-").join("+").split(".").join("=");return this.readFromBase64String(e)}read(t){let e=t.shift();let r=this.lenEncoded(t);let i=n[e];(0,Eb.logger)(Ab.DEBUGLEVEL.VERBOSE,"Der utility typeTagName:"+i);let s=[];for(let e=0;e<r;e++){s.push(t.shift())}(0,Eb.logger)(Ab.DEBUGLEVEL.VERBOSE,"Der Utility content");(0,Eb.logger)(Ab.DEBUGLEVEL.VERBOSE,s);let a="";switch(i){case"SEQUENCE_30":return this.BodySequence(s);case"INTEGER":case"BIT_STRING":let t=0n;while(s.length){t=t<<8n;t+=BigInt(s.shift())}return t;case"OCTET_STRING":while(s.length){a+=s.shift().toString(16).padStart(2,"0")}return a;case"GENERALIZED_TIME":case"VISIBLE_STRING":while(s.length){a+=String.fromCharCode(s.shift())}return a}}BodySequence(t){let e=[];while(t.length){e.push(this.read(t))}return e}}e.Asn1Der=i}));var QB=t((function(t,e){Object.defineProperty(e,"__esModule",{value:true});e.UsageProofOfExponent=void 0;class r{constructor(){}static fromData(t,e,r=new Uint8Array([])){let n=new this;n.tPoint=t;n.challengeResponse=e;n.nonce=r;n.encoding=n.makeEncoding();return n}fromBase64(t){this.encoding=t;this.fromBytes((0,Eb.base64ToUint8array)(t))}fromBytes(t){this.encodingBytes=t;let e=Jy.AsnParser.parse(t,zy.UsageProof);this.challengeResponse=(0,Eb.uint8ToBn)(new Uint8Array(e.challengePoint));let r=new Uint8Array(e.responseValue);this.nonce=new Uint8Array(e.nonce);this.tPoint=kb.Point.decodeFromHex((0,Eb.uint8tohex)(r),kb.CURVE_BN256)}makeEncoding(){let t=LB.Asn1Der.encode("OCTET_STRING",(0,Eb.uint8tohex)((0,Eb.bnToUint8)(this.challengeResponse)))+LB.Asn1Der.encode("OCTET_STRING",(0,Eb.uint8tohex)(this.tPoint.getEncoded(false)))+LB.Asn1Der.encode("OCTET_STRING",(0,Eb.uint8tohex)(this.nonce));return LB.Asn1Der.encode("SEQUENCE_30",t)}getPoint(){return this.tPoint}getChallengeResponse(){return this.challengeResponse}getDerEncoding(){return this.encoding}getNonce(){return this.nonce}validateParameters(){try{if(!GB.AttestationCrypto.validatePointToCurve(this.tPoint,GB.AttestationCrypto.curve)){throw new Error("Point not in the curve")}if(this.challengeResponse<=0n||this.challengeResponse>=GB.AttestationCrypto.curveOrder){return false}if(this.tPoint.equals(GB.AttestationCrypto.G)||this.tPoint.equals(GB.AttestationCrypto.H)){return false}return true}catch(t){return false}}}e.UsageProofOfExponent=r}));var HB=t((function(t,e){Object.defineProperty(e,"__esModule",{value:true});e.FullProofOfExponent=void 0;class r{constructor(){}static fromData(t,e,r,n=new Uint8Array([])){let i=new this;i.riddle=t;i.tPoint=e;i.challengeResponse=r;i.nonce=n;i.encoding=i.makeEncoding(t,e,r,n);return i}static fromBytes(t){let e=Jy.AsnParser.parse(t,zy.Proof);return this.fromASNType(e)}static fromASNType(t){let e=new Uint8Array(t.riddle);let r=kb.Point.decodeFromUint8(e,kb.CURVE_BN256);let n=new Uint8Array(t.challengePoint);let i=(0,Eb.uint8ToBn)(n);let s=new Uint8Array(t.responseValue);let a=kb.Point.decodeFromUint8(s,kb.CURVE_BN256);let o=new Uint8Array(t.nonce);return this.fromData(r,a,i,o)}static fromBase64(t){return r.fromBytes((0,Eb.base64ToUint8array)(t))}makeEncoding(t,e,r,n=new Uint8Array([])){let i=LB.Asn1Der.encode("OCTET_STRING",(0,Eb.uint8tohex)(t.getEncoded()))+LB.Asn1Der.encode("OCTET_STRING",r.toString(16))+LB.Asn1Der.encode("OCTET_STRING",(0,Eb.uint8tohex)(e.getEncoded()))+LB.Asn1Der.encode("OCTET_STRING",(0,Eb.uint8tohex)(n));return LB.Asn1Der.encode("SEQUENCE_30",i)}getRiddle(){return this.riddle}getPoint(){return this.tPoint}getChallengeResponse(){return this.challengeResponse}getNonce(){return this.nonce}getUsageProofOfExponent(){return QB.UsageProofOfExponent.fromData(this.tPoint,this.challengeResponse,this.nonce)}getDerEncoding(){return this.encoding}getAsnType(){const t=new zy.Proof;t.nonce=this.getNonce();let e=(0,Eb.bnToUint8)(this.getChallengeResponse());if(e.length<32){let t=e;e=new Uint8Array(32);e.set(t,32-t.length)}t.challengePoint=e;t.riddle=this.getRiddle().getEncoded();t.responseValue=this.getPoint().getEncoded();return t}validateParameters(){try{if(!GB.AttestationCrypto.validatePointToCurve(this.riddle,GB.AttestationCrypto.curve)||!GB.AttestationCrypto.validatePointToCurve(this.tPoint,GB.AttestationCrypto.curve)){throw new Error("Point not in the curve")}if(this.challengeResponse<=0n||this.challengeResponse>=GB.AttestationCrypto.curveOrder){return false}if(this.riddle.equals(GB.AttestationCrypto.G)||this.riddle.equals(GB.AttestationCrypto.H)){return false}if(this.tPoint.equals(GB.AttestationCrypto.G)||this.tPoint.equals(GB.AttestationCrypto.H)){return false}return true}catch(t){return false}}}e.FullProofOfExponent=r}));var GB=t((function(t,e){Object.defineProperty(e,"__esModule",{value:true});e.AttestationCrypto=e.Pedestren_H=e.Pedestren_G=void 0;e.Pedestren_G=new kb.Point(21282764439311451829394129092047993080259557426320933158672611067687630484067n,3813889942691430704369624600187664845713336792511424430006907067499686345744n,kb.CURVE_BN256);e.Pedestren_H=new kb.Point(10844896013696871595893151490650636250667003995871483372134187278207473369077n,9393217696329481319187854592386054938412168121447413803797200472841959383227n,kb.CURVE_BN256);class n{constructor(){this.curveOrderBitLength=254n;this.rand=this.makeSecret();if(!this.verifyCurveOrder()){throw new Error("Static values do not work with current implementation")}}verifyCurveOrder(){n.validatePointToCurve(n.G,n.curve);n.validatePointToCurve(n.H,n.curve);let t=BigInt(n.curveOrder.toString(2).length);if(n.curveOrder<1n<<t-1n||n.curveOrder>>t>0n){(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,"Curve order is not 254 bits which is required by the current implementation");return false}return true}getType(t){switch(t.toLowerCase()){case"mail":return mb.ATTESTATION_TYPE.mail;case"phone":return mb.ATTESTATION_TYPE.phone;case"inetpersona":return mb.ATTESTATION_TYPE.InetPersona;default:throw new Error("Wrong type of identifier")}}makeCommitment(t,r,n){let i=this.mapToCurveMultiplier(r,t);let s=e.Pedestren_G.multiplyDA(i).add(e.Pedestren_H.multiplyDA(n));return s.getEncoded(false)}makeCommitmentFromHiding(t,r,i){if(!n.validatePointToCurve(i,n.curve)){throw new Error("Point invalid")}let s=this.mapToCurveMultiplier(r,t);let a=e.Pedestren_G.multiplyDA(s).add(i);return a.getEncoded(false)}injectIdentifierType(t,e){return(0,Eb.uint8merge)([Uint8Array.from([0,0,0,t]),e])}mapToInteger(t){return BigInt("0x"+sr.keccak256(t))>>256n-this.curveOrderBitLength}mapToCurveMultiplier(t,e){let r=Uint8Array.from((0,Eb.stringToArray)(e.trim().toLowerCase()));let n=this.injectIdentifierType(t,r);let i=(0,Eb.uint8ToBn)(n);do{i=this.mapToInteger((0,Eb.bnToUint8)(i))}while(i>=kb.CURVE_BN256.n);return i}computePoint_bn256(t){let e=kb.CURVE_BN256.P;t=(0,Eb.mod)(t,e);let r=0n,n=0n;let i,s;let a;let o=e+1n>>2n;let f=e-1n>>1n;do{do{t=(0,Eb.mod)(t+1n);n=(0,Eb.mod)((0,Eb.BnPowMod)(t,3n,e)+kb.CURVE_BN256.A*t+kb.CURVE_BN256.B);a=(0,Eb.BnPowMod)(n,f,e)}while(a!==1n);r=(0,Eb.BnPowMod)(n,o,e);i=new kb.Point(t,r,kb.CURVE_BN256);if(i.x>e>>1n){i=new kb.Point(t,e-r,kb.CURVE_BN256)}s=i.multiplyDA(kb.CURVE_BN256.n-1n);if(s.y>e>>1n){s=new kb.Point(s.x,e-s.y,kb.CURVE_BN256)}}while(!i.equals(s)||i.isInfinity());return i}makeSecret(t=48){return(0,Eb.mod)(BigInt(n.generateRandomHexString(t)),kb.CURVE_BN256.n)}static generateRandomHexString(t){var e=new Uint8Array(t);if(window&&window.crypto){window.crypto.getRandomValues(e)}else{e=new Uint8Array(r.randomBytes(t))}let n="0x";for(var i=0;i<e.length;i++){n+=e[i].toString(16).padStart(2,"0")}return n}computeAttestationProof(t,r=new Uint8Array([])){let n=e.Pedestren_H.multiplyDA(t);let i=[e.Pedestren_H,n];return this.constructSchnorrPOK(n,t,i,r)}computeEqualityProof(t,r,i,s,a=new Uint8Array([])){let o=kb.Point.decodeFromHex(t);n.validatePointToCurve(o,kb.CURVE_BN256);let f=kb.Point.decodeFromHex(r);n.validatePointToCurve(f,kb.CURVE_BN256);let c=o.subtract(f);let u=(0,Eb.mod)(i-s,kb.CURVE_BN256.n);let h=[e.Pedestren_H,o,f];return this.constructSchnorrPOK(c,u,h,a).getUsageProofOfExponent()}constructSchnorrPOK(t,r,n,i){let s;let a,o,f;do{a=this.makeSecret();s=e.Pedestren_H.multiplyDA(a);o=this.computeChallenge(s,n,i)}while(o>=kb.CURVE_BN256.n);f=(0,Eb.mod)(a+o*r,kb.CURVE_BN256.n);return HB.FullProofOfExponent.fromData(t,s,f,i)}computeChallenge(t,e,r){let n=e.concat(t);let i=this.makeArray(n);let s=(0,Eb.uint8merge)([i,r]);return this.mapToInteger(s)}verifyFullProof(t){if(!t.validateParameters()){(0,Eb.logger)(2,"The parameters in the ZK proof are not correct");return false}let r=this.computeChallenge(t.getPoint(),[e.Pedestren_H,t.getRiddle()],t.getNonce());return this.verifyPok(t,r)}verifyEqualityProof(t,r,i){if(!i.validateParameters()){(0,Eb.logger)(2,"The parameters in the ZK proof are not correct");return false}let s=kb.Point.decodeFromUint8(t,kb.CURVE_BN256);n.validatePointToCurve(s,kb.CURVE_BN256);let a=kb.Point.decodeFromUint8(r,kb.CURVE_BN256);n.validatePointToCurve(a,kb.CURVE_BN256);let o=s.subtract(a);let f=this.computeChallenge(i.getPoint(),[e.Pedestren_H,s,a],i.getNonce());return this.verifyPok(HB.FullProofOfExponent.fromData(o,i.getPoint(),i.getChallengeResponse(),i.getNonce()),f)}verifyPok(t,r){if(r>=kb.CURVE_BN256.n||r<=0n){(0,Eb.logger)(2,"Challenge is not of the correct size");return false}let n=e.Pedestren_H.multiplyDA(t.getChallengeResponse());let i=t.getRiddle().multiplyDA(r).add(t.getPoint());return n.equals(i)}makeArray(t){let e=new Uint8Array(0);t.forEach((t=>{e=new Uint8Array([...e,...t.getEncoded(false)])}));return e}static hashWithKeccak(t){return sr.keccak256(t)}static validatePointToCurve(t,e){try{if(t.isInfinity()){throw new Error("Point is at infinity")}if(!t.multiplyDA(kb.CURVE_BN256.n).isInfinity()){console.log("Point does not have correct order");throw new Error("Point does not have correct order")}}catch(t){return false}return true}}e.AttestationCrypto=n;n.OID_SIGNATURE_ALG="1.2.840.10045.2.1";n.BYTES_IN_DIGEST=256/8;n.fieldSize=kb.CURVE_BN256.P;n.curveOrder=kb.CURVE_BN256.n;n.cofactor=1n;n.curve=kb.CURVE_BN256;n.G=e.Pedestren_G;n.H=e.Pedestren_H}));var KB=t((function(t,r){var n=e&&e.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")s=Reflect.decorate(t,e,r,n);else for(var o=t.length-1;o>=0;o--)if(a=t[o])s=(i<3?a(s):i>3?a(e,r,s):a(e,r))||s;return i>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(r,"__esModule",{value:true});r.Extensions=r.Extension=r.ValidityValue=r.Version=r.AlgorithmIdentifierASN=void 0;class i{}n([(0,Jy.AsnProp)({type:Jy.AsnPropTypes.ObjectIdentifier})],i.prototype,"algorithm",void 0);n([(0,Jy.AsnProp)({type:Jy.AsnPropTypes.Any,optional:true})],i.prototype,"parameters",void 0);r.AlgorithmIdentifierASN=i;class s{constructor(){this.version=0}}n([(0,Jy.AsnProp)({type:Jy.AsnPropTypes.Integer})],s.prototype,"version",void 0);r.Version=s;let a=class t{};n([(0,Jy.AsnProp)({type:Jy.AsnPropTypes.UTCTime})],a.prototype,"utcTime",void 0);n([(0,Jy.AsnProp)({type:Jy.AsnPropTypes.GeneralizedTime})],a.prototype,"generalizedTime",void 0);a=n([(0,Jy.AsnType)({type:Jy.AsnTypeTypes.Choice})],a);class o{}n([(0,Jy.AsnProp)({type:a})],o.prototype,"notBefore",void 0);n([(0,Jy.AsnProp)({type:Jy.AsnPropTypes.Integer,optional:true})],o.prototype,"notBeforeInt",void 0);n([(0,Jy.AsnProp)({type:a})],o.prototype,"notAfter",void 0);n([(0,Jy.AsnProp)({type:Jy.AsnPropTypes.Integer,optional:true})],o.prototype,"notAfterInt",void 0);r.ValidityValue=o;let f=class t{};n([(0,Jy.AsnProp)({type:o,context:0})],f.prototype,"value",void 0);n([(0,Jy.AsnProp)({type:Jy.AsnPropTypes.Integer,context:1})],f.prototype,"null",void 0);f=n([(0,Jy.AsnType)({type:Jy.AsnTypeTypes.Choice})],f);class c{}n([(0,Jy.AsnProp)({type:Jy.AsnPropTypes.ObjectIdentifier})],c.prototype,"extnId",void 0);n([(0,Jy.AsnProp)({type:Jy.AsnPropTypes.Boolean})],c.prototype,"critical",void 0);n([(0,Jy.AsnProp)({type:Jy.AsnPropTypes.OctetString})],c.prototype,"extnValue",void 0);r.Extension=c;class u{}n([(0,Jy.AsnProp)({type:c})],u.prototype,"extension",void 0);r.Extensions=u}));var JB=t((function(t,r){var n=e&&e.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")s=Reflect.decorate(t,e,r,n);else for(var o=t.length-1;o>=0;o--)if(a=t[o])s=(i<3?a(s):i>3?a(e,r,s):a(e,r))||s;return i>3&&s&&Object.defineProperty(e,r,s),s};var i,s;Object.defineProperty(r,"__esModule",{value:true});r.Name=r.AttributeTypeAndValue=void 0;class a{}n([(0,Jy.AsnProp)({type:Jy.AsnPropTypes.ObjectIdentifier})],a.prototype,"type",void 0);n([(0,Jy.AsnProp)({type:Jy.AsnPropTypes.Utf8String})],a.prototype,"value",void 0);r.AttributeTypeAndValue=a;let o=i=class t extends Jy.AsnArray{constructor(t){super(t);Object.setPrototypeOf(this,i.prototype)}};o=i=n([(0,Jy.AsnType)({type:Jy.AsnTypeTypes.Set,itemType:a})],o);let f=s=class t extends Jy.AsnArray{constructor(t){super(t);Object.setPrototypeOf(this,s.prototype)}};f=s=n([(0,Jy.AsnType)({type:Jy.AsnTypeTypes.Sequence,itemType:o})],f);let c=class t{};n([(0,Jy.AsnProp)({type:f})],c.prototype,"rdnSequence",void 0);n([(0,Jy.AsnProp)({type:Jy.AsnPropTypes.Null})],c.prototype,"null",void 0);c=n([(0,Jy.AsnType)({type:Jy.AsnTypeTypes.Choice})],c);r.Name=c}));var zB=t((function(t,r){var n=e&&e.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")s=Reflect.decorate(t,e,r,n);else for(var o=t.length-1;o>=0;o--)if(a=t[o])s=(i<3?a(s):i>3?a(e,r,s):a(e,r))||s;return i>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(r,"__esModule",{value:true});r.MyAttestationDecoded=r.MyAttestation=r.SignedInfo=r.SmartContract=r.Payload=r.PrivateKeyInfo=r.PrivateKeyData=r.SubjectPublicKeyInfo=r.PublicKeyInfoValue=void 0;class i{}n([(0,Jy.AsnProp)({type:Jy.AsnPropTypes.Any})],i.prototype,"algorithm",void 0);n([(0,Jy.AsnProp)({type:Jy.AsnPropTypes.BitString})],i.prototype,"publicKey",void 0);r.PublicKeyInfoValue=i;let s=class t{constructor(){this.null=false}};n([(0,Jy.AsnProp)({type:i})],s.prototype,"value",void 0);n([(0,Jy.AsnProp)({type:Jy.AsnPropTypes.Any})],s.prototype,"null",void 0);s=n([(0,Jy.AsnType)({type:Jy.AsnTypeTypes.Choice})],s);r.SubjectPublicKeyInfo=s;class a{}n([(0,Jy.AsnProp)({type:Jy.AsnPropTypes.Integer})],a.prototype,"one",void 0);n([(0,Jy.AsnProp)({type:Jy.AsnPropTypes.OctetString})],a.prototype,"privateKey",void 0);n([(0,Jy.AsnProp)({type:Jy.AsnPropTypes.Any,context:0})],a.prototype,"algDescr",void 0);n([(0,Jy.AsnProp)({type:Jy.AsnPropTypes.BitString,context:1})],a.prototype,"publicKey",void 0);r.PrivateKeyData=a;class o{}n([(0,Jy.AsnProp)({type:Jy.AsnPropTypes.Integer})],o.prototype,"one",void 0);n([(0,Jy.AsnProp)({type:Jy.AsnPropTypes.Any})],o.prototype,"algIdent",void 0);n([(0,Jy.AsnProp)({type:Jy.AsnPropTypes.OctetString})],o.prototype,"keysData",void 0);r.PrivateKeyInfo=o;let f=class t{};n([(0,Jy.AsnProp)({type:KB.Extensions,context:3})],f.prototype,"extensions",void 0);n([(0,Jy.AsnProp)({type:Jy.AsnPropTypes.Any,context:4})],f.prototype,"dataObject",void 0);f=n([(0,Jy.AsnType)({type:Jy.AsnTypeTypes.Choice})],f);r.Payload=f;class c{}n([(0,Jy.AsnProp)({type:Jy.AsnPropTypes.Integer})],c.prototype,"value",void 0);r.SmartContract=c;class u{}n([(0,Jy.AsnProp)({type:KB.Version})],u.prototype,"version",void 0);n([(0,Jy.AsnProp)({type:Jy.AsnPropTypes.Integer})],u.prototype,"serialNumber",void 0);n([(0,Jy.AsnProp)({type:KB.AlgorithmIdentifierASN})],u.prototype,"signature",void 0);n([(0,Jy.AsnProp)({type:JB.Name})],u.prototype,"issuer",void 0);n([(0,Jy.AsnProp)({type:KB.ValidityValue,optional:true})],u.prototype,"validity",void 0);n([(0,Jy.AsnProp)({type:JB.Name})],u.prototype,"subject",void 0);n([(0,Jy.AsnProp)({type:s})],u.prototype,"subjectPublicKeyInfo",void 0);n([(0,Jy.AsnProp)({type:c,optional:true})],u.prototype,"contract",void 0);n([(0,Jy.AsnProp)({type:f,optional:true})],u.prototype,"attestsTo",void 0);r.SignedInfo=u;class h{constructor(){this.signedInfo=new Uint8Array}}n([(0,Jy.AsnProp)({type:Jy.AsnPropTypes.Any})],h.prototype,"signedInfo",void 0);n([(0,Jy.AsnProp)({type:KB.AlgorithmIdentifierASN})],h.prototype,"signatureAlgorithm",void 0);n([(0,Jy.AsnProp)({type:Jy.AsnPropTypes.BitString})],h.prototype,"signatureValue",void 0);r.MyAttestation=h;class l{}n([(0,Jy.AsnProp)({type:u})],l.prototype,"signedInfo",void 0);n([(0,Jy.AsnProp)({type:KB.AlgorithmIdentifierASN})],l.prototype,"signatureAlgorithm",void 0);n([(0,Jy.AsnProp)({type:Jy.AsnPropTypes.BitString})],l.prototype,"signatureValue",void 0);r.MyAttestationDecoded=l}));var WB=t((function(t,r){var n=e&&e.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")s=Reflect.decorate(t,e,r,n);else for(var o=t.length-1;o>=0;o--)if(a=t[o])s=(i<3?a(s):i>3?a(e,r,s):a(e,r))||s;return i>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(r,"__esModule",{value:true});r.Signature=void 0;class i{}n([(0,Jy.AsnProp)({type:Jy.AsnPropTypes.Integer})],i.prototype,"r",void 0);n([(0,Jy.AsnProp)({type:Jy.AsnPropTypes.Integer})],i.prototype,"s",void 0);r.Signature=i}));const qB="elliptic";const VB="6.5.4";const YB="EC cryptography";const _B="lib/elliptic.js";const ZB=["lib"];const XB={lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"};const $B={type:"git",url:"git@github.com:indutny/elliptic"};const tS=["EC","Elliptic","curve","Cryptography"];const eS="Fedor Indutny <fedor@indutny.com>";const rS="MIT";const nS={url:"https://github.com/indutny/elliptic/issues"};const iS="https://github.com/indutny/elliptic";const sS={brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"};const aS={"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"};const oS={name:qB,version:VB,description:YB,main:_B,files:ZB,scripts:XB,repository:$B,keywords:tS,author:eS,license:rS,bugs:nS,homepage:iS,devDependencies:sS,dependencies:aS};var fS=t((function(t){(function(t,e){function n(t,e){if(!t)throw new Error(e||"Assertion failed")}function i(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype;t.prototype=new r;t.prototype.constructor=t}function s(t,e,r){if(s.isBN(t)){return t}this.negative=0;this.words=null;this.length=0;this.red=null;if(t!==null){if(e==="le"||e==="be"){r=e;e=10}this._init(t||0,e||10,r||"be")}}if(typeof t==="object"){t.exports=s}else{e.BN=s}s.BN=s;s.wordSize=26;var a;try{if(typeof window!=="undefined"&&typeof window.Buffer!=="undefined"){a=window.Buffer}else{a=r.Buffer}}catch(t){}s.isBN=function t(e){if(e instanceof s){return true}return e!==null&&typeof e==="object"&&e.constructor.wordSize===s.wordSize&&Array.isArray(e.words)};s.max=function t(e,r){if(e.cmp(r)>0)return e;return r};s.min=function t(e,r){if(e.cmp(r)<0)return e;return r};s.prototype._init=function t(e,r,i){if(typeof e==="number"){return this._initNumber(e,r,i)}if(typeof e==="object"){return this._initArray(e,r,i)}if(r==="hex"){r=16}n(r===(r|0)&&r>=2&&r<=36);e=e.toString().replace(/\s+/g,"");var s=0;if(e[0]==="-"){s++;this.negative=1}if(s<e.length){if(r===16){this._parseHex(e,s,i)}else{this._parseBase(e,r,s);if(i==="le"){this._initArray(this.toArray(),r,i)}}}};s.prototype._initNumber=function t(e,r,i){if(e<0){this.negative=1;e=-e}if(e<67108864){this.words=[e&67108863];this.length=1}else if(e<4503599627370496){this.words=[e&67108863,e/67108864&67108863];this.length=2}else{n(e<9007199254740992);this.words=[e&67108863,e/67108864&67108863,1];this.length=3}if(i!=="le")return;this._initArray(this.toArray(),r,i)};s.prototype._initArray=function t(e,r,i){n(typeof e.length==="number");if(e.length<=0){this.words=[0];this.length=1;return this}this.length=Math.ceil(e.length/3);this.words=new Array(this.length);for(var s=0;s<this.length;s++){this.words[s]=0}var a,o;var f=0;if(i==="be"){for(s=e.length-1,a=0;s>=0;s-=3){o=e[s]|e[s-1]<<8|e[s-2]<<16;this.words[a]|=o<<f&67108863;this.words[a+1]=o>>>26-f&67108863;f+=24;if(f>=26){f-=26;a++}}}else if(i==="le"){for(s=0,a=0;s<e.length;s+=3){o=e[s]|e[s+1]<<8|e[s+2]<<16;this.words[a]|=o<<f&67108863;this.words[a+1]=o>>>26-f&67108863;f+=24;if(f>=26){f-=26;a++}}}return this.strip()};function o(t,e){var r=t.charCodeAt(e);if(r>=65&&r<=70){return r-55}else if(r>=97&&r<=102){return r-87}else{return r-48&15}}function f(t,e,r){var n=o(t,r);if(r-1>=e){n|=o(t,r-1)<<4}return n}s.prototype._parseHex=function t(e,r,n){this.length=Math.ceil((e.length-r)/6);this.words=new Array(this.length);for(var i=0;i<this.length;i++){this.words[i]=0}var s=0;var a=0;var o;if(n==="be"){for(i=e.length-1;i>=r;i-=2){o=f(e,r,i)<<s;this.words[a]|=o&67108863;if(s>=18){s-=18;a+=1;this.words[a]|=o>>>26}else{s+=8}}}else{var c=e.length-r;for(i=c%2===0?r+1:r;i<e.length;i+=2){o=f(e,r,i)<<s;this.words[a]|=o&67108863;if(s>=18){s-=18;a+=1;this.words[a]|=o>>>26}else{s+=8}}}this.strip()};function c(t,e,r,n){var i=0;var s=Math.min(t.length,r);for(var a=e;a<s;a++){var o=t.charCodeAt(a)-48;i*=n;if(o>=49){i+=o-49+10}else if(o>=17){i+=o-17+10}else{i+=o}}return i}s.prototype._parseBase=function t(e,r,n){this.words=[0];this.length=1;for(var i=0,s=1;s<=67108863;s*=r){i++}i--;s=s/r|0;var a=e.length-n;var o=a%i;var f=Math.min(a,a-o)+n;var u=0;for(var h=n;h<f;h+=i){u=c(e,h,h+i,r);this.imuln(s);if(this.words[0]+u<67108864){this.words[0]+=u}else{this._iaddn(u)}}if(o!==0){var l=1;u=c(e,h,e.length,r);for(h=0;h<o;h++){l*=r}this.imuln(l);if(this.words[0]+u<67108864){this.words[0]+=u}else{this._iaddn(u)}}this.strip()};s.prototype.copy=function t(e){e.words=new Array(this.length);for(var r=0;r<this.length;r++){e.words[r]=this.words[r]}e.length=this.length;e.negative=this.negative;e.red=this.red};s.prototype.clone=function t(){var e=new s(null);this.copy(e);return e};s.prototype._expand=function t(e){while(this.length<e){this.words[this.length++]=0}return this};s.prototype.strip=function t(){while(this.length>1&&this.words[this.length-1]===0){this.length--}return this._normSign()};s.prototype._normSign=function t(){if(this.length===1&&this.words[0]===0){this.negative=0}return this};s.prototype.inspect=function t(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"];var h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5];var l=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function t(e,r){e=e||10;r=r|0||1;var i;if(e===16||e==="hex"){i="";var s=0;var a=0;for(var o=0;o<this.length;o++){var f=this.words[o];var c=((f<<s|a)&16777215).toString(16);a=f>>>24-s&16777215;if(a!==0||o!==this.length-1){i=u[6-c.length]+c+i}else{i=c+i}s+=2;if(s>=26){s-=26;o--}}if(a!==0){i=a.toString(16)+i}while(i.length%r!==0){i="0"+i}if(this.negative!==0){i="-"+i}return i}if(e===(e|0)&&e>=2&&e<=36){var d=h[e];var v=l[e];i="";var b=this.clone();b.negative=0;while(!b.isZero()){var p=b.modn(v).toString(e);b=b.idivn(v);if(!b.isZero()){i=u[d-p.length]+p+i}else{i=p+i}}if(this.isZero()){i="0"+i}while(i.length%r!==0){i="0"+i}if(this.negative!==0){i="-"+i}return i}n(false,"Base should be between 2 and 36")};s.prototype.toNumber=function t(){var e=this.words[0];if(this.length===2){e+=this.words[1]*67108864}else if(this.length===3&&this.words[2]===1){e+=4503599627370496+this.words[1]*67108864}else if(this.length>2){n(false,"Number can only safely store up to 53 bits")}return this.negative!==0?-e:e};s.prototype.toJSON=function t(){return this.toString(16)};s.prototype.toBuffer=function t(e,r){n(typeof a!=="undefined");return this.toArrayLike(a,e,r)};s.prototype.toArray=function t(e,r){return this.toArrayLike(Array,e,r)};s.prototype.toArrayLike=function t(e,r,i){var s=this.byteLength();var a=i||Math.max(1,s);n(s<=a,"byte array longer than desired length");n(a>0,"Requested array length <= 0");this.strip();var o=r==="le";var f=new e(a);var c,u;var h=this.clone();if(!o){for(u=0;u<a-s;u++){f[u]=0}for(u=0;!h.isZero();u++){c=h.andln(255);h.iushrn(8);f[a-u-1]=c}}else{for(u=0;!h.isZero();u++){c=h.andln(255);h.iushrn(8);f[u]=c}for(;u<a;u++){f[u]=0}}return f};if(Math.clz32){s.prototype._countBits=function t(e){return 32-Math.clz32(e)}}else{s.prototype._countBits=function t(e){var r=e;var n=0;if(r>=4096){n+=13;r>>>=13}if(r>=64){n+=7;r>>>=7}if(r>=8){n+=4;r>>>=4}if(r>=2){n+=2;r>>>=2}return n+r}}s.prototype._zeroBits=function t(e){if(e===0)return 26;var r=e;var n=0;if((r&8191)===0){n+=13;r>>>=13}if((r&127)===0){n+=7;r>>>=7}if((r&15)===0){n+=4;r>>>=4}if((r&3)===0){n+=2;r>>>=2}if((r&1)===0){n++}return n};s.prototype.bitLength=function t(){var e=this.words[this.length-1];var r=this._countBits(e);return(this.length-1)*26+r};function d(t){var e=new Array(t.bitLength());for(var r=0;r<e.length;r++){var n=r/26|0;var i=r%26;e[r]=(t.words[n]&1<<i)>>>i}return e}s.prototype.zeroBits=function t(){if(this.isZero())return 0;var e=0;for(var r=0;r<this.length;r++){var n=this._zeroBits(this.words[r]);e+=n;if(n!==26)break}return e};s.prototype.byteLength=function t(){return Math.ceil(this.bitLength()/8)};s.prototype.toTwos=function t(e){if(this.negative!==0){return this.abs().inotn(e).iaddn(1)}return this.clone()};s.prototype.fromTwos=function t(e){if(this.testn(e-1)){return this.notn(e).iaddn(1).ineg()}return this.clone()};s.prototype.isNeg=function t(){return this.negative!==0};s.prototype.neg=function t(){return this.clone().ineg()};s.prototype.ineg=function t(){if(!this.isZero()){this.negative^=1}return this};s.prototype.iuor=function t(e){while(this.length<e.length){this.words[this.length++]=0}for(var r=0;r<e.length;r++){this.words[r]=this.words[r]|e.words[r]}return this.strip()};s.prototype.ior=function t(e){n((this.negative|e.negative)===0);return this.iuor(e)};s.prototype.or=function t(e){if(this.length>e.length)return this.clone().ior(e);return e.clone().ior(this)};s.prototype.uor=function t(e){if(this.length>e.length)return this.clone().iuor(e);return e.clone().iuor(this)};s.prototype.iuand=function t(e){var r;if(this.length>e.length){r=e}else{r=this}for(var n=0;n<r.length;n++){this.words[n]=this.words[n]&e.words[n]}this.length=r.length;return this.strip()};s.prototype.iand=function t(e){n((this.negative|e.negative)===0);return this.iuand(e)};s.prototype.and=function t(e){if(this.length>e.length)return this.clone().iand(e);return e.clone().iand(this)};s.prototype.uand=function t(e){if(this.length>e.length)return this.clone().iuand(e);return e.clone().iuand(this)};s.prototype.iuxor=function t(e){var r;var n;if(this.length>e.length){r=this;n=e}else{r=e;n=this}for(var i=0;i<n.length;i++){this.words[i]=r.words[i]^n.words[i]}if(this!==r){for(;i<r.length;i++){this.words[i]=r.words[i]}}this.length=r.length;return this.strip()};s.prototype.ixor=function t(e){n((this.negative|e.negative)===0);return this.iuxor(e)};s.prototype.xor=function t(e){if(this.length>e.length)return this.clone().ixor(e);return e.clone().ixor(this)};s.prototype.uxor=function t(e){if(this.length>e.length)return this.clone().iuxor(e);return e.clone().iuxor(this)};s.prototype.inotn=function t(e){n(typeof e==="number"&&e>=0);var r=Math.ceil(e/26)|0;var i=e%26;this._expand(r);if(i>0){r--}for(var s=0;s<r;s++){this.words[s]=~this.words[s]&67108863}if(i>0){this.words[s]=~this.words[s]&67108863>>26-i}return this.strip()};s.prototype.notn=function t(e){return this.clone().inotn(e)};s.prototype.setn=function t(e,r){n(typeof e==="number"&&e>=0);var i=e/26|0;var s=e%26;this._expand(i+1);if(r){this.words[i]=this.words[i]|1<<s}else{this.words[i]=this.words[i]&~(1<<s)}return this.strip()};s.prototype.iadd=function t(e){var r;if(this.negative!==0&&e.negative===0){this.negative=0;r=this.isub(e);this.negative^=1;return this._normSign()}else if(this.negative===0&&e.negative!==0){e.negative=0;r=this.isub(e);e.negative=1;return r._normSign()}var n,i;if(this.length>e.length){n=this;i=e}else{n=e;i=this}var s=0;for(var a=0;a<i.length;a++){r=(n.words[a]|0)+(i.words[a]|0)+s;this.words[a]=r&67108863;s=r>>>26}for(;s!==0&&a<n.length;a++){r=(n.words[a]|0)+s;this.words[a]=r&67108863;s=r>>>26}this.length=n.length;if(s!==0){this.words[this.length]=s;this.length++}else if(n!==this){for(;a<n.length;a++){this.words[a]=n.words[a]}}return this};s.prototype.add=function t(e){var r;if(e.negative!==0&&this.negative===0){e.negative=0;r=this.sub(e);e.negative^=1;return r}else if(e.negative===0&&this.negative!==0){this.negative=0;r=e.sub(this);this.negative=1;return r}if(this.length>e.length)return this.clone().iadd(e);return e.clone().iadd(this)};s.prototype.isub=function t(e){if(e.negative!==0){e.negative=0;var r=this.iadd(e);e.negative=1;return r._normSign()}else if(this.negative!==0){this.negative=0;this.iadd(e);this.negative=1;return this._normSign()}var n=this.cmp(e);if(n===0){this.negative=0;this.length=1;this.words[0]=0;return this}var i,s;if(n>0){i=this;s=e}else{i=e;s=this}var a=0;for(var o=0;o<s.length;o++){r=(i.words[o]|0)-(s.words[o]|0)+a;a=r>>26;this.words[o]=r&67108863}for(;a!==0&&o<i.length;o++){r=(i.words[o]|0)+a;a=r>>26;this.words[o]=r&67108863}if(a===0&&o<i.length&&i!==this){for(;o<i.length;o++){this.words[o]=i.words[o]}}this.length=Math.max(this.length,o);if(i!==this){this.negative=1}return this.strip()};s.prototype.sub=function t(e){return this.clone().isub(e)};function v(t,e,r){r.negative=e.negative^t.negative;var n=t.length+e.length|0;r.length=n;n=n-1|0;var i=t.words[0]|0;var s=e.words[0]|0;var a=i*s;var o=a&67108863;var f=a/67108864|0;r.words[0]=o;for(var c=1;c<n;c++){var u=f>>>26;var h=f&67108863;var l=Math.min(c,e.length-1);for(var d=Math.max(0,c-t.length+1);d<=l;d++){var v=c-d|0;i=t.words[v]|0;s=e.words[d]|0;a=i*s+h;u+=a/67108864|0;h=a&67108863}r.words[c]=h|0;f=u|0}if(f!==0){r.words[c]=f|0}else{r.length--}return r.strip()}var b=function t(e,r,n){var i=e.words;var s=r.words;var a=n.words;var o=0;var f;var c;var u;var h=i[0]|0;var l=h&8191;var d=h>>>13;var v=i[1]|0;var b=v&8191;var p=v>>>13;var g=i[2]|0;var y=g&8191;var w=g>>>13;var m=i[3]|0;var A=m&8191;var E=m>>>13;var k=i[4]|0;var M=k&8191;var B=k>>>13;var S=i[5]|0;var C=S&8191;var x=S>>>13;var P=i[6]|0;var I=P&8191;var T=P>>>13;var O=i[7]|0;var D=O&8191;var N=O>>>13;var U=i[8]|0;var j=U&8191;var R=U>>>13;var F=i[9]|0;var L=F&8191;var Q=F>>>13;var H=s[0]|0;var G=H&8191;var K=H>>>13;var J=s[1]|0;var z=J&8191;var W=J>>>13;var q=s[2]|0;var V=q&8191;var Y=q>>>13;var _=s[3]|0;var Z=_&8191;var X=_>>>13;var $=s[4]|0;var tt=$&8191;var et=$>>>13;var rt=s[5]|0;var nt=rt&8191;var it=rt>>>13;var st=s[6]|0;var at=st&8191;var ot=st>>>13;var ft=s[7]|0;var ct=ft&8191;var ut=ft>>>13;var ht=s[8]|0;var lt=ht&8191;var dt=ht>>>13;var vt=s[9]|0;var bt=vt&8191;var pt=vt>>>13;n.negative=e.negative^r.negative;n.length=19;f=Math.imul(l,G);c=Math.imul(l,K);c=c+Math.imul(d,G)|0;u=Math.imul(d,K);var gt=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(gt>>>26)|0;gt&=67108863;f=Math.imul(b,G);c=Math.imul(b,K);c=c+Math.imul(p,G)|0;u=Math.imul(p,K);f=f+Math.imul(l,z)|0;c=c+Math.imul(l,W)|0;c=c+Math.imul(d,z)|0;u=u+Math.imul(d,W)|0;var yt=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(yt>>>26)|0;yt&=67108863;f=Math.imul(y,G);c=Math.imul(y,K);c=c+Math.imul(w,G)|0;u=Math.imul(w,K);f=f+Math.imul(b,z)|0;c=c+Math.imul(b,W)|0;c=c+Math.imul(p,z)|0;u=u+Math.imul(p,W)|0;f=f+Math.imul(l,V)|0;c=c+Math.imul(l,Y)|0;c=c+Math.imul(d,V)|0;u=u+Math.imul(d,Y)|0;var wt=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(wt>>>26)|0;wt&=67108863;f=Math.imul(A,G);c=Math.imul(A,K);c=c+Math.imul(E,G)|0;u=Math.imul(E,K);f=f+Math.imul(y,z)|0;c=c+Math.imul(y,W)|0;c=c+Math.imul(w,z)|0;u=u+Math.imul(w,W)|0;f=f+Math.imul(b,V)|0;c=c+Math.imul(b,Y)|0;c=c+Math.imul(p,V)|0;u=u+Math.imul(p,Y)|0;f=f+Math.imul(l,Z)|0;c=c+Math.imul(l,X)|0;c=c+Math.imul(d,Z)|0;u=u+Math.imul(d,X)|0;var mt=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(mt>>>26)|0;mt&=67108863;f=Math.imul(M,G);c=Math.imul(M,K);c=c+Math.imul(B,G)|0;u=Math.imul(B,K);f=f+Math.imul(A,z)|0;c=c+Math.imul(A,W)|0;c=c+Math.imul(E,z)|0;u=u+Math.imul(E,W)|0;f=f+Math.imul(y,V)|0;c=c+Math.imul(y,Y)|0;c=c+Math.imul(w,V)|0;u=u+Math.imul(w,Y)|0;f=f+Math.imul(b,Z)|0;c=c+Math.imul(b,X)|0;c=c+Math.imul(p,Z)|0;u=u+Math.imul(p,X)|0;f=f+Math.imul(l,tt)|0;c=c+Math.imul(l,et)|0;c=c+Math.imul(d,tt)|0;u=u+Math.imul(d,et)|0;var At=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(At>>>26)|0;At&=67108863;f=Math.imul(C,G);c=Math.imul(C,K);c=c+Math.imul(x,G)|0;u=Math.imul(x,K);f=f+Math.imul(M,z)|0;c=c+Math.imul(M,W)|0;c=c+Math.imul(B,z)|0;u=u+Math.imul(B,W)|0;f=f+Math.imul(A,V)|0;c=c+Math.imul(A,Y)|0;c=c+Math.imul(E,V)|0;u=u+Math.imul(E,Y)|0;f=f+Math.imul(y,Z)|0;c=c+Math.imul(y,X)|0;c=c+Math.imul(w,Z)|0;u=u+Math.imul(w,X)|0;f=f+Math.imul(b,tt)|0;c=c+Math.imul(b,et)|0;c=c+Math.imul(p,tt)|0;u=u+Math.imul(p,et)|0;f=f+Math.imul(l,nt)|0;c=c+Math.imul(l,it)|0;c=c+Math.imul(d,nt)|0;u=u+Math.imul(d,it)|0;var Et=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Et>>>26)|0;Et&=67108863;f=Math.imul(I,G);c=Math.imul(I,K);c=c+Math.imul(T,G)|0;u=Math.imul(T,K);f=f+Math.imul(C,z)|0;c=c+Math.imul(C,W)|0;c=c+Math.imul(x,z)|0;u=u+Math.imul(x,W)|0;f=f+Math.imul(M,V)|0;c=c+Math.imul(M,Y)|0;c=c+Math.imul(B,V)|0;u=u+Math.imul(B,Y)|0;f=f+Math.imul(A,Z)|0;c=c+Math.imul(A,X)|0;c=c+Math.imul(E,Z)|0;u=u+Math.imul(E,X)|0;f=f+Math.imul(y,tt)|0;c=c+Math.imul(y,et)|0;c=c+Math.imul(w,tt)|0;u=u+Math.imul(w,et)|0;f=f+Math.imul(b,nt)|0;c=c+Math.imul(b,it)|0;c=c+Math.imul(p,nt)|0;u=u+Math.imul(p,it)|0;f=f+Math.imul(l,at)|0;c=c+Math.imul(l,ot)|0;c=c+Math.imul(d,at)|0;u=u+Math.imul(d,ot)|0;var kt=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(kt>>>26)|0;kt&=67108863;f=Math.imul(D,G);c=Math.imul(D,K);c=c+Math.imul(N,G)|0;u=Math.imul(N,K);f=f+Math.imul(I,z)|0;c=c+Math.imul(I,W)|0;c=c+Math.imul(T,z)|0;u=u+Math.imul(T,W)|0;f=f+Math.imul(C,V)|0;c=c+Math.imul(C,Y)|0;c=c+Math.imul(x,V)|0;u=u+Math.imul(x,Y)|0;f=f+Math.imul(M,Z)|0;c=c+Math.imul(M,X)|0;c=c+Math.imul(B,Z)|0;u=u+Math.imul(B,X)|0;f=f+Math.imul(A,tt)|0;c=c+Math.imul(A,et)|0;c=c+Math.imul(E,tt)|0;u=u+Math.imul(E,et)|0;f=f+Math.imul(y,nt)|0;c=c+Math.imul(y,it)|0;c=c+Math.imul(w,nt)|0;u=u+Math.imul(w,it)|0;f=f+Math.imul(b,at)|0;c=c+Math.imul(b,ot)|0;c=c+Math.imul(p,at)|0;u=u+Math.imul(p,ot)|0;f=f+Math.imul(l,ct)|0;c=c+Math.imul(l,ut)|0;c=c+Math.imul(d,ct)|0;u=u+Math.imul(d,ut)|0;var Mt=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Mt>>>26)|0;Mt&=67108863;f=Math.imul(j,G);c=Math.imul(j,K);c=c+Math.imul(R,G)|0;u=Math.imul(R,K);f=f+Math.imul(D,z)|0;c=c+Math.imul(D,W)|0;c=c+Math.imul(N,z)|0;u=u+Math.imul(N,W)|0;f=f+Math.imul(I,V)|0;c=c+Math.imul(I,Y)|0;c=c+Math.imul(T,V)|0;u=u+Math.imul(T,Y)|0;f=f+Math.imul(C,Z)|0;c=c+Math.imul(C,X)|0;c=c+Math.imul(x,Z)|0;u=u+Math.imul(x,X)|0;f=f+Math.imul(M,tt)|0;c=c+Math.imul(M,et)|0;c=c+Math.imul(B,tt)|0;u=u+Math.imul(B,et)|0;f=f+Math.imul(A,nt)|0;c=c+Math.imul(A,it)|0;c=c+Math.imul(E,nt)|0;u=u+Math.imul(E,it)|0;f=f+Math.imul(y,at)|0;c=c+Math.imul(y,ot)|0;c=c+Math.imul(w,at)|0;u=u+Math.imul(w,ot)|0;f=f+Math.imul(b,ct)|0;c=c+Math.imul(b,ut)|0;c=c+Math.imul(p,ct)|0;u=u+Math.imul(p,ut)|0;f=f+Math.imul(l,lt)|0;c=c+Math.imul(l,dt)|0;c=c+Math.imul(d,lt)|0;u=u+Math.imul(d,dt)|0;var Bt=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Bt>>>26)|0;Bt&=67108863;f=Math.imul(L,G);c=Math.imul(L,K);c=c+Math.imul(Q,G)|0;u=Math.imul(Q,K);f=f+Math.imul(j,z)|0;c=c+Math.imul(j,W)|0;c=c+Math.imul(R,z)|0;u=u+Math.imul(R,W)|0;f=f+Math.imul(D,V)|0;c=c+Math.imul(D,Y)|0;c=c+Math.imul(N,V)|0;u=u+Math.imul(N,Y)|0;f=f+Math.imul(I,Z)|0;c=c+Math.imul(I,X)|0;c=c+Math.imul(T,Z)|0;u=u+Math.imul(T,X)|0;f=f+Math.imul(C,tt)|0;c=c+Math.imul(C,et)|0;c=c+Math.imul(x,tt)|0;u=u+Math.imul(x,et)|0;f=f+Math.imul(M,nt)|0;c=c+Math.imul(M,it)|0;c=c+Math.imul(B,nt)|0;u=u+Math.imul(B,it)|0;f=f+Math.imul(A,at)|0;c=c+Math.imul(A,ot)|0;c=c+Math.imul(E,at)|0;u=u+Math.imul(E,ot)|0;f=f+Math.imul(y,ct)|0;c=c+Math.imul(y,ut)|0;c=c+Math.imul(w,ct)|0;u=u+Math.imul(w,ut)|0;f=f+Math.imul(b,lt)|0;c=c+Math.imul(b,dt)|0;c=c+Math.imul(p,lt)|0;u=u+Math.imul(p,dt)|0;f=f+Math.imul(l,bt)|0;c=c+Math.imul(l,pt)|0;c=c+Math.imul(d,bt)|0;u=u+Math.imul(d,pt)|0;var St=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(St>>>26)|0;St&=67108863;f=Math.imul(L,z);c=Math.imul(L,W);c=c+Math.imul(Q,z)|0;u=Math.imul(Q,W);f=f+Math.imul(j,V)|0;c=c+Math.imul(j,Y)|0;c=c+Math.imul(R,V)|0;u=u+Math.imul(R,Y)|0;f=f+Math.imul(D,Z)|0;c=c+Math.imul(D,X)|0;c=c+Math.imul(N,Z)|0;u=u+Math.imul(N,X)|0;f=f+Math.imul(I,tt)|0;c=c+Math.imul(I,et)|0;c=c+Math.imul(T,tt)|0;u=u+Math.imul(T,et)|0;f=f+Math.imul(C,nt)|0;c=c+Math.imul(C,it)|0;c=c+Math.imul(x,nt)|0;u=u+Math.imul(x,it)|0;f=f+Math.imul(M,at)|0;c=c+Math.imul(M,ot)|0;c=c+Math.imul(B,at)|0;u=u+Math.imul(B,ot)|0;f=f+Math.imul(A,ct)|0;c=c+Math.imul(A,ut)|0;c=c+Math.imul(E,ct)|0;u=u+Math.imul(E,ut)|0;f=f+Math.imul(y,lt)|0;c=c+Math.imul(y,dt)|0;c=c+Math.imul(w,lt)|0;u=u+Math.imul(w,dt)|0;f=f+Math.imul(b,bt)|0;c=c+Math.imul(b,pt)|0;c=c+Math.imul(p,bt)|0;u=u+Math.imul(p,pt)|0;var Ct=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Ct>>>26)|0;Ct&=67108863;f=Math.imul(L,V);c=Math.imul(L,Y);c=c+Math.imul(Q,V)|0;u=Math.imul(Q,Y);f=f+Math.imul(j,Z)|0;c=c+Math.imul(j,X)|0;c=c+Math.imul(R,Z)|0;u=u+Math.imul(R,X)|0;f=f+Math.imul(D,tt)|0;c=c+Math.imul(D,et)|0;c=c+Math.imul(N,tt)|0;u=u+Math.imul(N,et)|0;f=f+Math.imul(I,nt)|0;c=c+Math.imul(I,it)|0;c=c+Math.imul(T,nt)|0;u=u+Math.imul(T,it)|0;f=f+Math.imul(C,at)|0;c=c+Math.imul(C,ot)|0;c=c+Math.imul(x,at)|0;u=u+Math.imul(x,ot)|0;f=f+Math.imul(M,ct)|0;c=c+Math.imul(M,ut)|0;c=c+Math.imul(B,ct)|0;u=u+Math.imul(B,ut)|0;f=f+Math.imul(A,lt)|0;c=c+Math.imul(A,dt)|0;c=c+Math.imul(E,lt)|0;u=u+Math.imul(E,dt)|0;f=f+Math.imul(y,bt)|0;c=c+Math.imul(y,pt)|0;c=c+Math.imul(w,bt)|0;u=u+Math.imul(w,pt)|0;var xt=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(xt>>>26)|0;xt&=67108863;f=Math.imul(L,Z);c=Math.imul(L,X);c=c+Math.imul(Q,Z)|0;u=Math.imul(Q,X);f=f+Math.imul(j,tt)|0;c=c+Math.imul(j,et)|0;c=c+Math.imul(R,tt)|0;u=u+Math.imul(R,et)|0;f=f+Math.imul(D,nt)|0;c=c+Math.imul(D,it)|0;c=c+Math.imul(N,nt)|0;u=u+Math.imul(N,it)|0;f=f+Math.imul(I,at)|0;c=c+Math.imul(I,ot)|0;c=c+Math.imul(T,at)|0;u=u+Math.imul(T,ot)|0;f=f+Math.imul(C,ct)|0;c=c+Math.imul(C,ut)|0;c=c+Math.imul(x,ct)|0;u=u+Math.imul(x,ut)|0;f=f+Math.imul(M,lt)|0;c=c+Math.imul(M,dt)|0;c=c+Math.imul(B,lt)|0;u=u+Math.imul(B,dt)|0;f=f+Math.imul(A,bt)|0;c=c+Math.imul(A,pt)|0;c=c+Math.imul(E,bt)|0;u=u+Math.imul(E,pt)|0;var Pt=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Pt>>>26)|0;Pt&=67108863;f=Math.imul(L,tt);c=Math.imul(L,et);c=c+Math.imul(Q,tt)|0;u=Math.imul(Q,et);f=f+Math.imul(j,nt)|0;c=c+Math.imul(j,it)|0;c=c+Math.imul(R,nt)|0;u=u+Math.imul(R,it)|0;f=f+Math.imul(D,at)|0;c=c+Math.imul(D,ot)|0;c=c+Math.imul(N,at)|0;u=u+Math.imul(N,ot)|0;f=f+Math.imul(I,ct)|0;c=c+Math.imul(I,ut)|0;c=c+Math.imul(T,ct)|0;u=u+Math.imul(T,ut)|0;f=f+Math.imul(C,lt)|0;c=c+Math.imul(C,dt)|0;c=c+Math.imul(x,lt)|0;u=u+Math.imul(x,dt)|0;f=f+Math.imul(M,bt)|0;c=c+Math.imul(M,pt)|0;c=c+Math.imul(B,bt)|0;u=u+Math.imul(B,pt)|0;var It=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(It>>>26)|0;It&=67108863;f=Math.imul(L,nt);c=Math.imul(L,it);c=c+Math.imul(Q,nt)|0;u=Math.imul(Q,it);f=f+Math.imul(j,at)|0;c=c+Math.imul(j,ot)|0;c=c+Math.imul(R,at)|0;u=u+Math.imul(R,ot)|0;f=f+Math.imul(D,ct)|0;c=c+Math.imul(D,ut)|0;c=c+Math.imul(N,ct)|0;u=u+Math.imul(N,ut)|0;f=f+Math.imul(I,lt)|0;c=c+Math.imul(I,dt)|0;c=c+Math.imul(T,lt)|0;u=u+Math.imul(T,dt)|0;f=f+Math.imul(C,bt)|0;c=c+Math.imul(C,pt)|0;c=c+Math.imul(x,bt)|0;u=u+Math.imul(x,pt)|0;var Tt=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Tt>>>26)|0;Tt&=67108863;f=Math.imul(L,at);c=Math.imul(L,ot);c=c+Math.imul(Q,at)|0;u=Math.imul(Q,ot);f=f+Math.imul(j,ct)|0;c=c+Math.imul(j,ut)|0;c=c+Math.imul(R,ct)|0;u=u+Math.imul(R,ut)|0;f=f+Math.imul(D,lt)|0;c=c+Math.imul(D,dt)|0;c=c+Math.imul(N,lt)|0;u=u+Math.imul(N,dt)|0;f=f+Math.imul(I,bt)|0;c=c+Math.imul(I,pt)|0;c=c+Math.imul(T,bt)|0;u=u+Math.imul(T,pt)|0;var Ot=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Ot>>>26)|0;Ot&=67108863;f=Math.imul(L,ct);c=Math.imul(L,ut);c=c+Math.imul(Q,ct)|0;u=Math.imul(Q,ut);f=f+Math.imul(j,lt)|0;c=c+Math.imul(j,dt)|0;c=c+Math.imul(R,lt)|0;u=u+Math.imul(R,dt)|0;f=f+Math.imul(D,bt)|0;c=c+Math.imul(D,pt)|0;c=c+Math.imul(N,bt)|0;u=u+Math.imul(N,pt)|0;var Dt=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Dt>>>26)|0;Dt&=67108863;f=Math.imul(L,lt);c=Math.imul(L,dt);c=c+Math.imul(Q,lt)|0;u=Math.imul(Q,dt);f=f+Math.imul(j,bt)|0;c=c+Math.imul(j,pt)|0;c=c+Math.imul(R,bt)|0;u=u+Math.imul(R,pt)|0;var Nt=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Nt>>>26)|0;Nt&=67108863;f=Math.imul(L,bt);c=Math.imul(L,pt);c=c+Math.imul(Q,bt)|0;u=Math.imul(Q,pt);var Ut=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Ut>>>26)|0;Ut&=67108863;a[0]=gt;a[1]=yt;a[2]=wt;a[3]=mt;a[4]=At;a[5]=Et;a[6]=kt;a[7]=Mt;a[8]=Bt;a[9]=St;a[10]=Ct;a[11]=xt;a[12]=Pt;a[13]=It;a[14]=Tt;a[15]=Ot;a[16]=Dt;a[17]=Nt;a[18]=Ut;if(o!==0){a[19]=o;n.length++}return n};if(!Math.imul){b=v}function p(t,e,r){r.negative=e.negative^t.negative;r.length=t.length+e.length;var n=0;var i=0;for(var s=0;s<r.length-1;s++){var a=i;i=0;var o=n&67108863;var f=Math.min(s,e.length-1);for(var c=Math.max(0,s-t.length+1);c<=f;c++){var u=s-c;var h=t.words[u]|0;var l=e.words[c]|0;var d=h*l;var v=d&67108863;a=a+(d/67108864|0)|0;v=v+o|0;o=v&67108863;a=a+(v>>>26)|0;i+=a>>>26;a&=67108863}r.words[s]=o;n=a;a=i}if(n!==0){r.words[s]=n}else{r.length--}return r.strip()}function g(t,e,r){var n=new y;return n.mulp(t,e,r)}s.prototype.mulTo=function t(e,r){var n;var i=this.length+e.length;if(this.length===10&&e.length===10){n=b(this,e,r)}else if(i<63){n=v(this,e,r)}else if(i<1024){n=p(this,e,r)}else{n=g(this,e,r)}return n};function y(t,e){this.x=t;this.y=e}y.prototype.makeRBT=function t(e){var r=new Array(e);var n=s.prototype._countBits(e)-1;for(var i=0;i<e;i++){r[i]=this.revBin(i,n,e)}return r};y.prototype.revBin=function t(e,r,n){if(e===0||e===n-1)return e;var i=0;for(var s=0;s<r;s++){i|=(e&1)<<r-s-1;e>>=1}return i};y.prototype.permute=function t(e,r,n,i,s,a){for(var o=0;o<a;o++){i[o]=r[e[o]];s[o]=n[e[o]]}};y.prototype.transform=function t(e,r,n,i,s,a){this.permute(a,e,r,n,i,s);for(var o=1;o<s;o<<=1){var f=o<<1;var c=Math.cos(2*Math.PI/f);var u=Math.sin(2*Math.PI/f);for(var h=0;h<s;h+=f){var l=c;var d=u;for(var v=0;v<o;v++){var b=n[h+v];var p=i[h+v];var g=n[h+v+o];var y=i[h+v+o];var w=l*g-d*y;y=l*y+d*g;g=w;n[h+v]=b+g;i[h+v]=p+y;n[h+v+o]=b-g;i[h+v+o]=p-y;if(v!==f){w=c*l-u*d;d=c*d+u*l;l=w}}}}};y.prototype.guessLen13b=function t(e,r){var n=Math.max(r,e)|1;var i=n&1;var s=0;for(n=n/2|0;n;n=n>>>1){s++}return 1<<s+1+i};y.prototype.conjugate=function t(e,r,n){if(n<=1)return;for(var i=0;i<n/2;i++){var s=e[i];e[i]=e[n-i-1];e[n-i-1]=s;s=r[i];r[i]=-r[n-i-1];r[n-i-1]=-s}};y.prototype.normalize13b=function t(e,r){var n=0;for(var i=0;i<r/2;i++){var s=Math.round(e[2*i+1]/r)*8192+Math.round(e[2*i]/r)+n;e[i]=s&67108863;if(s<67108864){n=0}else{n=s/67108864|0}}return e};y.prototype.convert13b=function t(e,r,i,s){var a=0;for(var o=0;o<r;o++){a=a+(e[o]|0);i[2*o]=a&8191;a=a>>>13;i[2*o+1]=a&8191;a=a>>>13}for(o=2*r;o<s;++o){i[o]=0}n(a===0);n((a&~8191)===0)};y.prototype.stub=function t(e){var r=new Array(e);for(var n=0;n<e;n++){r[n]=0}return r};y.prototype.mulp=function t(e,r,n){var i=2*this.guessLen13b(e.length,r.length);var s=this.makeRBT(i);var a=this.stub(i);var o=new Array(i);var f=new Array(i);var c=new Array(i);var u=new Array(i);var h=new Array(i);var l=new Array(i);var d=n.words;d.length=i;this.convert13b(e.words,e.length,o,i);this.convert13b(r.words,r.length,u,i);this.transform(o,a,f,c,i,s);this.transform(u,a,h,l,i,s);for(var v=0;v<i;v++){var b=f[v]*h[v]-c[v]*l[v];c[v]=f[v]*l[v]+c[v]*h[v];f[v]=b}this.conjugate(f,c,i);this.transform(f,c,d,a,i,s);this.conjugate(d,a,i);this.normalize13b(d,i);n.negative=e.negative^r.negative;n.length=e.length+r.length;return n.strip()};s.prototype.mul=function t(e){var r=new s(null);r.words=new Array(this.length+e.length);return this.mulTo(e,r)};s.prototype.mulf=function t(e){var r=new s(null);r.words=new Array(this.length+e.length);return g(this,e,r)};s.prototype.imul=function t(e){return this.clone().mulTo(e,this)};s.prototype.imuln=function t(e){n(typeof e==="number");n(e<67108864);var r=0;for(var i=0;i<this.length;i++){var s=(this.words[i]|0)*e;var a=(s&67108863)+(r&67108863);r>>=26;r+=s/67108864|0;r+=a>>>26;this.words[i]=a&67108863}if(r!==0){this.words[i]=r;this.length++}return this};s.prototype.muln=function t(e){return this.clone().imuln(e)};s.prototype.sqr=function t(){return this.mul(this)};s.prototype.isqr=function t(){return this.imul(this.clone())};s.prototype.pow=function t(e){var r=d(e);if(r.length===0)return new s(1);var n=this;for(var i=0;i<r.length;i++,n=n.sqr()){if(r[i]!==0)break}if(++i<r.length){for(var a=n.sqr();i<r.length;i++,a=a.sqr()){if(r[i]===0)continue;n=n.mul(a)}}return n};s.prototype.iushln=function t(e){n(typeof e==="number"&&e>=0);var r=e%26;var i=(e-r)/26;var s=67108863>>>26-r<<26-r;var a;if(r!==0){var o=0;for(a=0;a<this.length;a++){var f=this.words[a]&s;var c=(this.words[a]|0)-f<<r;this.words[a]=c|o;o=f>>>26-r}if(o){this.words[a]=o;this.length++}}if(i!==0){for(a=this.length-1;a>=0;a--){this.words[a+i]=this.words[a]}for(a=0;a<i;a++){this.words[a]=0}this.length+=i}return this.strip()};s.prototype.ishln=function t(e){n(this.negative===0);return this.iushln(e)};s.prototype.iushrn=function t(e,r,i){n(typeof e==="number"&&e>=0);var s;if(r){s=(r-r%26)/26}else{s=0}var a=e%26;var o=Math.min((e-a)/26,this.length);var f=67108863^67108863>>>a<<a;var c=i;s-=o;s=Math.max(0,s);if(c){for(var u=0;u<o;u++){c.words[u]=this.words[u]}c.length=o}if(o===0);else if(this.length>o){this.length-=o;for(u=0;u<this.length;u++){this.words[u]=this.words[u+o]}}else{this.words[0]=0;this.length=1}var h=0;for(u=this.length-1;u>=0&&(h!==0||u>=s);u--){var l=this.words[u]|0;this.words[u]=h<<26-a|l>>>a;h=l&f}if(c&&h!==0){c.words[c.length++]=h}if(this.length===0){this.words[0]=0;this.length=1}return this.strip()};s.prototype.ishrn=function t(e,r,i){n(this.negative===0);return this.iushrn(e,r,i)};s.prototype.shln=function t(e){return this.clone().ishln(e)};s.prototype.ushln=function t(e){return this.clone().iushln(e)};s.prototype.shrn=function t(e){return this.clone().ishrn(e)};s.prototype.ushrn=function t(e){return this.clone().iushrn(e)};s.prototype.testn=function t(e){n(typeof e==="number"&&e>=0);var r=e%26;var i=(e-r)/26;var s=1<<r;if(this.length<=i)return false;var a=this.words[i];return!!(a&s)};s.prototype.imaskn=function t(e){n(typeof e==="number"&&e>=0);var r=e%26;var i=(e-r)/26;n(this.negative===0,"imaskn works only with positive numbers");if(this.length<=i){return this}if(r!==0){i++}this.length=Math.min(i,this.length);if(r!==0){var s=67108863^67108863>>>r<<r;this.words[this.length-1]&=s}return this.strip()};s.prototype.maskn=function t(e){return this.clone().imaskn(e)};s.prototype.iaddn=function t(e){n(typeof e==="number");n(e<67108864);if(e<0)return this.isubn(-e);if(this.negative!==0){if(this.length===1&&(this.words[0]|0)<e){this.words[0]=e-(this.words[0]|0);this.negative=0;return this}this.negative=0;this.isubn(e);this.negative=1;return this}return this._iaddn(e)};s.prototype._iaddn=function t(e){this.words[0]+=e;for(var r=0;r<this.length&&this.words[r]>=67108864;r++){this.words[r]-=67108864;if(r===this.length-1){this.words[r+1]=1}else{this.words[r+1]++}}this.length=Math.max(this.length,r+1);return this};s.prototype.isubn=function t(e){n(typeof e==="number");n(e<67108864);if(e<0)return this.iaddn(-e);if(this.negative!==0){this.negative=0;this.iaddn(e);this.negative=1;return this}this.words[0]-=e;if(this.length===1&&this.words[0]<0){this.words[0]=-this.words[0];this.negative=1}else{for(var r=0;r<this.length&&this.words[r]<0;r++){this.words[r]+=67108864;this.words[r+1]-=1}}return this.strip()};s.prototype.addn=function t(e){return this.clone().iaddn(e)};s.prototype.subn=function t(e){return this.clone().isubn(e)};s.prototype.iabs=function t(){this.negative=0;return this};s.prototype.abs=function t(){return this.clone().iabs()};s.prototype._ishlnsubmul=function t(e,r,i){var s=e.length+i;var a;this._expand(s);var o;var f=0;for(a=0;a<e.length;a++){o=(this.words[a+i]|0)+f;var c=(e.words[a]|0)*r;o-=c&67108863;f=(o>>26)-(c/67108864|0);this.words[a+i]=o&67108863}for(;a<this.length-i;a++){o=(this.words[a+i]|0)+f;f=o>>26;this.words[a+i]=o&67108863}if(f===0)return this.strip();n(f===-1);f=0;for(a=0;a<this.length;a++){o=-(this.words[a]|0)+f;f=o>>26;this.words[a]=o&67108863}this.negative=1;return this.strip()};s.prototype._wordDiv=function t(e,r){var n=this.length-e.length;var i=this.clone();var a=e;var o=a.words[a.length-1]|0;var f=this._countBits(o);n=26-f;if(n!==0){a=a.ushln(n);i.iushln(n);o=a.words[a.length-1]|0}var c=i.length-a.length;var u;if(r!=="mod"){u=new s(null);u.length=c+1;u.words=new Array(u.length);for(var h=0;h<u.length;h++){u.words[h]=0}}var l=i.clone()._ishlnsubmul(a,1,c);if(l.negative===0){i=l;if(u){u.words[c]=1}}for(var d=c-1;d>=0;d--){var v=(i.words[a.length+d]|0)*67108864+(i.words[a.length+d-1]|0);v=Math.min(v/o|0,67108863);i._ishlnsubmul(a,v,d);while(i.negative!==0){v--;i.negative=0;i._ishlnsubmul(a,1,d);if(!i.isZero()){i.negative^=1}}if(u){u.words[d]=v}}if(u){u.strip()}i.strip();if(r!=="div"&&n!==0){i.iushrn(n)}return{div:u||null,mod:i}};s.prototype.divmod=function t(e,r,i){n(!e.isZero());if(this.isZero()){return{div:new s(0),mod:new s(0)}}var a,o,f;if(this.negative!==0&&e.negative===0){f=this.neg().divmod(e,r);if(r!=="mod"){a=f.div.neg()}if(r!=="div"){o=f.mod.neg();if(i&&o.negative!==0){o.iadd(e)}}return{div:a,mod:o}}if(this.negative===0&&e.negative!==0){f=this.divmod(e.neg(),r);if(r!=="mod"){a=f.div.neg()}return{div:a,mod:f.mod}}if((this.negative&e.negative)!==0){f=this.neg().divmod(e.neg(),r);if(r!=="div"){o=f.mod.neg();if(i&&o.negative!==0){o.isub(e)}}return{div:f.div,mod:o}}if(e.length>this.length||this.cmp(e)<0){return{div:new s(0),mod:this}}if(e.length===1){if(r==="div"){return{div:this.divn(e.words[0]),mod:null}}if(r==="mod"){return{div:null,mod:new s(this.modn(e.words[0]))}}return{div:this.divn(e.words[0]),mod:new s(this.modn(e.words[0]))}}return this._wordDiv(e,r)};s.prototype.div=function t(e){return this.divmod(e,"div",false).div};s.prototype.mod=function t(e){return this.divmod(e,"mod",false).mod};s.prototype.umod=function t(e){return this.divmod(e,"mod",true).mod};s.prototype.divRound=function t(e){var r=this.divmod(e);if(r.mod.isZero())return r.div;var n=r.div.negative!==0?r.mod.isub(e):r.mod;var i=e.ushrn(1);var s=e.andln(1);var a=n.cmp(i);if(a<0||s===1&&a===0)return r.div;return r.div.negative!==0?r.div.isubn(1):r.div.iaddn(1)};s.prototype.modn=function t(e){n(e<=67108863);var r=(1<<26)%e;var i=0;for(var s=this.length-1;s>=0;s--){i=(r*i+(this.words[s]|0))%e}return i};s.prototype.idivn=function t(e){n(e<=67108863);var r=0;for(var i=this.length-1;i>=0;i--){var s=(this.words[i]|0)+r*67108864;this.words[i]=s/e|0;r=s%e}return this.strip()};s.prototype.divn=function t(e){return this.clone().idivn(e)};s.prototype.egcd=function t(e){n(e.negative===0);n(!e.isZero());var r=this;var i=e.clone();if(r.negative!==0){r=r.umod(e)}else{r=r.clone()}var a=new s(1);var o=new s(0);var f=new s(0);var c=new s(1);var u=0;while(r.isEven()&&i.isEven()){r.iushrn(1);i.iushrn(1);++u}var h=i.clone();var l=r.clone();while(!r.isZero()){for(var d=0,v=1;(r.words[0]&v)===0&&d<26;++d,v<<=1);if(d>0){r.iushrn(d);while(d-- >0){if(a.isOdd()||o.isOdd()){a.iadd(h);o.isub(l)}a.iushrn(1);o.iushrn(1)}}for(var b=0,p=1;(i.words[0]&p)===0&&b<26;++b,p<<=1);if(b>0){i.iushrn(b);while(b-- >0){if(f.isOdd()||c.isOdd()){f.iadd(h);c.isub(l)}f.iushrn(1);c.iushrn(1)}}if(r.cmp(i)>=0){r.isub(i);a.isub(f);o.isub(c)}else{i.isub(r);f.isub(a);c.isub(o)}}return{a:f,b:c,gcd:i.iushln(u)}};s.prototype._invmp=function t(e){n(e.negative===0);n(!e.isZero());var r=this;var i=e.clone();if(r.negative!==0){r=r.umod(e)}else{r=r.clone()}var a=new s(1);var o=new s(0);var f=i.clone();while(r.cmpn(1)>0&&i.cmpn(1)>0){for(var c=0,u=1;(r.words[0]&u)===0&&c<26;++c,u<<=1);if(c>0){r.iushrn(c);while(c-- >0){if(a.isOdd()){a.iadd(f)}a.iushrn(1)}}for(var h=0,l=1;(i.words[0]&l)===0&&h<26;++h,l<<=1);if(h>0){i.iushrn(h);while(h-- >0){if(o.isOdd()){o.iadd(f)}o.iushrn(1)}}if(r.cmp(i)>=0){r.isub(i);a.isub(o)}else{i.isub(r);o.isub(a)}}var d;if(r.cmpn(1)===0){d=a}else{d=o}if(d.cmpn(0)<0){d.iadd(e)}return d};s.prototype.gcd=function t(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var r=this.clone();var n=e.clone();r.negative=0;n.negative=0;for(var i=0;r.isEven()&&n.isEven();i++){r.iushrn(1);n.iushrn(1)}do{while(r.isEven()){r.iushrn(1)}while(n.isEven()){n.iushrn(1)}var s=r.cmp(n);if(s<0){var a=r;r=n;n=a}else if(s===0||n.cmpn(1)===0){break}r.isub(n)}while(true);return n.iushln(i)};s.prototype.invm=function t(e){return this.egcd(e).a.umod(e)};s.prototype.isEven=function t(){return(this.words[0]&1)===0};s.prototype.isOdd=function t(){return(this.words[0]&1)===1};s.prototype.andln=function t(e){return this.words[0]&e};s.prototype.bincn=function t(e){n(typeof e==="number");var r=e%26;var i=(e-r)/26;var s=1<<r;if(this.length<=i){this._expand(i+1);this.words[i]|=s;return this}var a=s;for(var o=i;a!==0&&o<this.length;o++){var f=this.words[o]|0;f+=a;a=f>>>26;f&=67108863;this.words[o]=f}if(a!==0){this.words[o]=a;this.length++}return this};s.prototype.isZero=function t(){return this.length===1&&this.words[0]===0};s.prototype.cmpn=function t(e){var r=e<0;if(this.negative!==0&&!r)return-1;if(this.negative===0&&r)return 1;this.strip();var i;if(this.length>1){i=1}else{if(r){e=-e}n(e<=67108863,"Number is too big");var s=this.words[0]|0;i=s===e?0:s<e?-1:1}if(this.negative!==0)return-i|0;return i};s.prototype.cmp=function t(e){if(this.negative!==0&&e.negative===0)return-1;if(this.negative===0&&e.negative!==0)return 1;var r=this.ucmp(e);if(this.negative!==0)return-r|0;return r};s.prototype.ucmp=function t(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;var r=0;for(var n=this.length-1;n>=0;n--){var i=this.words[n]|0;var s=e.words[n]|0;if(i===s)continue;if(i<s){r=-1}else if(i>s){r=1}break}return r};s.prototype.gtn=function t(e){return this.cmpn(e)===1};s.prototype.gt=function t(e){return this.cmp(e)===1};s.prototype.gten=function t(e){return this.cmpn(e)>=0};s.prototype.gte=function t(e){return this.cmp(e)>=0};s.prototype.ltn=function t(e){return this.cmpn(e)===-1};s.prototype.lt=function t(e){return this.cmp(e)===-1};s.prototype.lten=function t(e){return this.cmpn(e)<=0};s.prototype.lte=function t(e){return this.cmp(e)<=0};s.prototype.eqn=function t(e){return this.cmpn(e)===0};s.prototype.eq=function t(e){return this.cmp(e)===0};s.red=function t(e){return new B(e)};s.prototype.toRed=function t(e){n(!this.red,"Already a number in reduction context");n(this.negative===0,"red works only with positives");return e.convertTo(this)._forceRed(e)};s.prototype.fromRed=function t(){n(this.red,"fromRed works only with numbers in reduction context");return this.red.convertFrom(this)};s.prototype._forceRed=function t(e){this.red=e;return this};s.prototype.forceRed=function t(e){n(!this.red,"Already a number in reduction context");return this._forceRed(e)};s.prototype.redAdd=function t(e){n(this.red,"redAdd works only with red numbers");return this.red.add(this,e)};s.prototype.redIAdd=function t(e){n(this.red,"redIAdd works only with red numbers");return this.red.iadd(this,e)};s.prototype.redSub=function t(e){n(this.red,"redSub works only with red numbers");return this.red.sub(this,e)};s.prototype.redISub=function t(e){n(this.red,"redISub works only with red numbers");return this.red.isub(this,e)};s.prototype.redShl=function t(e){n(this.red,"redShl works only with red numbers");return this.red.shl(this,e)};s.prototype.redMul=function t(e){n(this.red,"redMul works only with red numbers");this.red._verify2(this,e);return this.red.mul(this,e)};s.prototype.redIMul=function t(e){n(this.red,"redMul works only with red numbers");this.red._verify2(this,e);return this.red.imul(this,e)};s.prototype.redSqr=function t(){n(this.red,"redSqr works only with red numbers");this.red._verify1(this);return this.red.sqr(this)};s.prototype.redISqr=function t(){n(this.red,"redISqr works only with red numbers");this.red._verify1(this);return this.red.isqr(this)};s.prototype.redSqrt=function t(){n(this.red,"redSqrt works only with red numbers");this.red._verify1(this);return this.red.sqrt(this)};s.prototype.redInvm=function t(){n(this.red,"redInvm works only with red numbers");this.red._verify1(this);return this.red.invm(this)};s.prototype.redNeg=function t(){n(this.red,"redNeg works only with red numbers");this.red._verify1(this);return this.red.neg(this)};s.prototype.redPow=function t(e){n(this.red&&!e.red,"redPow(normalNum)");this.red._verify1(this);return this.red.pow(this,e)};var w={k256:null,p224:null,p192:null,p25519:null};function m(t,e){this.name=t;this.p=new s(e,16);this.n=this.p.bitLength();this.k=new s(1).iushln(this.n).isub(this.p);this.tmp=this._tmp()}m.prototype._tmp=function t(){var e=new s(null);e.words=new Array(Math.ceil(this.n/13));return e};m.prototype.ireduce=function t(e){var r=e;var n;do{this.split(r,this.tmp);r=this.imulK(r);r=r.iadd(this.tmp);n=r.bitLength()}while(n>this.n);var i=n<this.n?-1:r.ucmp(this.p);if(i===0){r.words[0]=0;r.length=1}else if(i>0){r.isub(this.p)}else{if(r.strip!==undefined){r.strip()}else{r._strip()}}return r};m.prototype.split=function t(e,r){e.iushrn(this.n,0,r)};m.prototype.imulK=function t(e){return e.imul(this.k)};function A(){m.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(A,m);A.prototype.split=function t(e,r){var n=4194303;var i=Math.min(e.length,9);for(var s=0;s<i;s++){r.words[s]=e.words[s]}r.length=i;if(e.length<=9){e.words[0]=0;e.length=1;return}var a=e.words[9];r.words[r.length++]=a&n;for(s=10;s<e.length;s++){var o=e.words[s]|0;e.words[s-10]=(o&n)<<4|a>>>22;a=o}a>>>=22;e.words[s-10]=a;if(a===0&&e.length>10){e.length-=10}else{e.length-=9}};A.prototype.imulK=function t(e){e.words[e.length]=0;e.words[e.length+1]=0;e.length+=2;var r=0;for(var n=0;n<e.length;n++){var i=e.words[n]|0;r+=i*977;e.words[n]=r&67108863;r=i*64+(r/67108864|0)}if(e.words[e.length-1]===0){e.length--;if(e.words[e.length-1]===0){e.length--}}return e};function E(){m.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(E,m);function k(){m.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(k,m);function M(){m.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(M,m);M.prototype.imulK=function t(e){var r=0;for(var n=0;n<e.length;n++){var i=(e.words[n]|0)*19+r;var s=i&67108863;i>>>=26;e.words[n]=s;r=i}if(r!==0){e.words[e.length++]=r}return e};s._prime=function t(e){if(w[e])return w[e];var t;if(e==="k256"){t=new A}else if(e==="p224"){t=new E}else if(e==="p192"){t=new k}else if(e==="p25519"){t=new M}else{throw new Error("Unknown prime "+e)}w[e]=t;return t};function B(t){if(typeof t==="string"){var e=s._prime(t);this.m=e.p;this.prime=e}else{n(t.gtn(1),"modulus must be greater than 1");this.m=t;this.prime=null}}B.prototype._verify1=function t(e){n(e.negative===0,"red works only with positives");n(e.red,"red works only with red numbers")};B.prototype._verify2=function t(e,r){n((e.negative|r.negative)===0,"red works only with positives");n(e.red&&e.red===r.red,"red works only with red numbers")};B.prototype.imod=function t(e){if(this.prime)return this.prime.ireduce(e)._forceRed(this);return e.umod(this.m)._forceRed(this)};B.prototype.neg=function t(e){if(e.isZero()){return e.clone()}return this.m.sub(e)._forceRed(this)};B.prototype.add=function t(e,r){this._verify2(e,r);var n=e.add(r);if(n.cmp(this.m)>=0){n.isub(this.m)}return n._forceRed(this)};B.prototype.iadd=function t(e,r){this._verify2(e,r);var n=e.iadd(r);if(n.cmp(this.m)>=0){n.isub(this.m)}return n};B.prototype.sub=function t(e,r){this._verify2(e,r);var n=e.sub(r);if(n.cmpn(0)<0){n.iadd(this.m)}return n._forceRed(this)};B.prototype.isub=function t(e,r){this._verify2(e,r);var n=e.isub(r);if(n.cmpn(0)<0){n.iadd(this.m)}return n};B.prototype.shl=function t(e,r){this._verify1(e);return this.imod(e.ushln(r))};B.prototype.imul=function t(e,r){this._verify2(e,r);return this.imod(e.imul(r))};B.prototype.mul=function t(e,r){this._verify2(e,r);return this.imod(e.mul(r))};B.prototype.isqr=function t(e){return this.imul(e,e.clone())};B.prototype.sqr=function t(e){return this.mul(e,e)};B.prototype.sqrt=function t(e){if(e.isZero())return e.clone();var r=this.m.andln(3);n(r%2===1);if(r===3){var i=this.m.add(new s(1)).iushrn(2);return this.pow(e,i)}var a=this.m.subn(1);var o=0;while(!a.isZero()&&a.andln(1)===0){o++;a.iushrn(1)}n(!a.isZero());var f=new s(1).toRed(this);var c=f.redNeg();var u=this.m.subn(1).iushrn(1);var h=this.m.bitLength();h=new s(2*h*h).toRed(this);while(this.pow(h,u).cmp(c)!==0){h.redIAdd(c)}var l=this.pow(h,a);var d=this.pow(e,a.addn(1).iushrn(1));var v=this.pow(e,a);var b=o;while(v.cmp(f)!==0){var p=v;for(var g=0;p.cmp(f)!==0;g++){p=p.redSqr()}n(g<b);var y=this.pow(l,new s(1).iushln(b-g-1));d=d.redMul(y);l=y.redSqr();v=v.redMul(l);b=g}return d};B.prototype.invm=function t(e){var r=e._invmp(this.m);if(r.negative!==0){r.negative=0;return this.imod(r).redNeg()}else{return this.imod(r)}};B.prototype.pow=function t(e,r){if(r.isZero())return new s(1).toRed(this);if(r.cmpn(1)===0)return e.clone();var n=4;var i=new Array(1<<n);i[0]=new s(1).toRed(this);i[1]=e;for(var a=2;a<i.length;a++){i[a]=this.mul(i[a-1],e)}var o=i[0];var f=0;var c=0;var u=r.bitLength()%26;if(u===0){u=26}for(a=r.length-1;a>=0;a--){var h=r.words[a];for(var l=u-1;l>=0;l--){var d=h>>l&1;if(o!==i[0]){o=this.sqr(o)}if(d===0&&f===0){c=0;continue}f<<=1;f|=d;c++;if(c!==n&&(a!==0||l!==0))continue;o=this.mul(o,i[f]);c=0;f=0}u=26}return o};B.prototype.convertTo=function t(e){var r=e.umod(this.m);return r===e?r.clone():r};B.prototype.convertFrom=function t(e){var r=e.clone();r.red=null;return r};s.mont=function t(e){return new S(e)};function S(t){B.call(this,t);this.shift=this.m.bitLength();if(this.shift%26!==0){this.shift+=26-this.shift%26}this.r=new s(1).iushln(this.shift);this.r2=this.imod(this.r.sqr());this.rinv=this.r._invmp(this.m);this.minv=this.rinv.mul(this.r).isubn(1).div(this.m);this.minv=this.minv.umod(this.r);this.minv=this.r.sub(this.minv)}i(S,B);S.prototype.convertTo=function t(e){return this.imod(e.ushln(this.shift))};S.prototype.convertFrom=function t(e){var r=this.imod(e.mul(this.rinv));r.red=null;return r};S.prototype.imul=function t(e,r){if(e.isZero()||r.isZero()){e.words[0]=0;e.length=1;return e}var n=e.imul(r);var i=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);var s=n.isub(i).iushrn(this.shift);var a=s;if(s.cmp(this.m)>=0){a=s.isub(this.m)}else if(s.cmpn(0)<0){a=s.iadd(this.m)}return a._forceRed(this)};S.prototype.mul=function t(e,r){if(e.isZero()||r.isZero())return new s(0)._forceRed(this);var n=e.mul(r);var i=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);var a=n.isub(i).iushrn(this.shift);var o=a;if(a.cmp(this.m)>=0){o=a.isub(this.m)}else if(a.cmpn(0)<0){o=a.iadd(this.m)}return o._forceRed(this)};S.prototype.invm=function t(e){var r=this.imod(e._invmp(this.m).mul(this.r2));return r._forceRed(this)}})(t,e)}));var cS=t((function(t,e){var r=e;function n(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if(typeof t!=="string"){for(var n=0;n<t.length;n++)r[n]=t[n]|0;return r}if(e==="hex"){t=t.replace(/[^a-z0-9]+/gi,"");if(t.length%2!==0)t="0"+t;for(var n=0;n<t.length;n+=2)r.push(parseInt(t[n]+t[n+1],16))}else{for(var n=0;n<t.length;n++){var i=t.charCodeAt(n);var s=i>>8;var a=i&255;if(s)r.push(s,a);else r.push(a)}}return r}r.toArray=n;function i(t){if(t.length===1)return"0"+t;else return t}r.zero2=i;function s(t){var e="";for(var r=0;r<t.length;r++)e+=i(t[r].toString(16));return e}r.toHex=s;r.encode=function t(e,r){if(r==="hex")return s(e);else return e}}));var uS=t((function(t,e){var r=e;r.assert=As;r.toArray=cS.toArray;r.zero2=cS.zero2;r.toHex=cS.toHex;r.encode=cS.encode;function n(t,e,r){var n=new Array(Math.max(t.bitLength(),r)+1);n.fill(0);var i=1<<e+1;var s=t.clone();for(var a=0;a<n.length;a++){var o;var f=s.andln(i-1);if(s.isOdd()){if(f>(i>>1)-1)o=(i>>1)-f;else o=f;s.isubn(o)}else{o=0}n[a]=o;s.iushrn(1)}return n}r.getNAF=n;function i(t,e){var r=[[],[]];t=t.clone();e=e.clone();var n=0;var i=0;var s;while(t.cmpn(-n)>0||e.cmpn(-i)>0){var a=t.andln(3)+n&3;var o=e.andln(3)+i&3;if(a===3)a=-1;if(o===3)o=-1;var f;if((a&1)===0){f=0}else{s=t.andln(7)+n&7;if((s===3||s===5)&&o===2)f=-a;else f=a}r[0].push(f);var c;if((o&1)===0){c=0}else{s=e.andln(7)+i&7;if((s===3||s===5)&&a===2)c=-o;else c=o}r[1].push(c);if(2*n===f+1)n=1-n;if(2*i===c+1)i=1-i;t.iushrn(1);e.iushrn(1)}return r}r.getJSF=i;function s(t,e,r){var n="_"+e;t.prototype[e]=function t(){return this[n]!==undefined?this[n]:this[n]=r.call(this)}}r.cachedProperty=s;function a(t){return typeof t==="string"?r.toArray(t,"hex"):t}r.parseBytes=a;function o(t){return new fS(t,"hex","le")}r.intFromLE=o}));var hS;var lS=function t(e){if(!hS)hS=new dS(null);return hS.generate(e)};function dS(t){this.rand=t}var vS=dS;dS.prototype.generate=function t(e){return this._rand(e)};dS.prototype._rand=function t(e){if(this.rand.getBytes)return this.rand.getBytes(e);var r=new Uint8Array(e);for(var n=0;n<r.length;n++)r[n]=this.rand.getByte();return r};if(typeof self==="object"){if(self.crypto&&self.crypto.getRandomValues){dS.prototype._rand=function t(e){var r=new Uint8Array(e);self.crypto.getRandomValues(r);return r}}else if(self.msCrypto&&self.msCrypto.getRandomValues){dS.prototype._rand=function t(e){var r=new Uint8Array(e);self.msCrypto.getRandomValues(r);return r}}else if(typeof window==="object"){dS.prototype._rand=function(){throw new Error("Not implemented yet")}}}else{try{var bS=r;if(typeof bS.randomBytes!=="function")throw new Error("Not supported");dS.prototype._rand=function t(e){return bS.randomBytes(e)}}catch(t){}}lS.Rand=vS;var pS=uS.getNAF;var gS=uS.getJSF;var yS=uS.assert;function wS(t,e){this.type=t;this.p=new fS(e.p,16);this.red=e.prime?fS.red(e.prime):fS.mont(this.p);this.zero=new fS(0).toRed(this.red);this.one=new fS(1).toRed(this.red);this.two=new fS(2).toRed(this.red);this.n=e.n&&new fS(e.n,16);this.g=e.g&&this.pointFromJSON(e.g,e.gRed);this._wnafT1=new Array(4);this._wnafT2=new Array(4);this._wnafT3=new Array(4);this._wnafT4=new Array(4);this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);if(!r||r.cmpn(100)>0){this.redN=null}else{this._maxwellTrick=true;this.redN=this.n.toRed(this.red)}}var mS=wS;wS.prototype.point=function t(){throw new Error("Not implemented")};wS.prototype.validate=function t(){throw new Error("Not implemented")};wS.prototype._fixedNafMul=function t(e,r){yS(e.precomputed);var n=e._getDoubles();var i=pS(r,1,this._bitLength);var s=(1<<n.step+1)-(n.step%2===0?2:1);s/=3;var a=[];var o;var f;for(o=0;o<i.length;o+=n.step){f=0;for(var c=o+n.step-1;c>=o;c--)f=(f<<1)+i[c];a.push(f)}var u=this.jpoint(null,null,null);var h=this.jpoint(null,null,null);for(var l=s;l>0;l--){for(o=0;o<a.length;o++){f=a[o];if(f===l)h=h.mixedAdd(n.points[o]);else if(f===-l)h=h.mixedAdd(n.points[o].neg())}u=u.add(h)}return u.toP()};wS.prototype._wnafMul=function t(e,r){var n=4;var i=e._getNAFPoints(n);n=i.wnd;var s=i.points;var a=pS(r,n,this._bitLength);var o=this.jpoint(null,null,null);for(var f=a.length-1;f>=0;f--){for(var c=0;f>=0&&a[f]===0;f--)c++;if(f>=0)c++;o=o.dblp(c);if(f<0)break;var u=a[f];yS(u!==0);if(e.type==="affine"){if(u>0)o=o.mixedAdd(s[u-1>>1]);else o=o.mixedAdd(s[-u-1>>1].neg())}else{if(u>0)o=o.add(s[u-1>>1]);else o=o.add(s[-u-1>>1].neg())}}return e.type==="affine"?o.toP():o};wS.prototype._wnafMulAdd=function t(e,r,n,i,s){var a=this._wnafT1;var o=this._wnafT2;var f=this._wnafT3;var c=0;var u;var h;var l;for(u=0;u<i;u++){l=r[u];var d=l._getNAFPoints(e);a[u]=d.wnd;o[u]=d.points}for(u=i-1;u>=1;u-=2){var v=u-1;var b=u;if(a[v]!==1||a[b]!==1){f[v]=pS(n[v],a[v],this._bitLength);f[b]=pS(n[b],a[b],this._bitLength);c=Math.max(f[v].length,c);c=Math.max(f[b].length,c);continue}var p=[r[v],null,null,r[b]];if(r[v].y.cmp(r[b].y)===0){p[1]=r[v].add(r[b]);p[2]=r[v].toJ().mixedAdd(r[b].neg())}else if(r[v].y.cmp(r[b].y.redNeg())===0){p[1]=r[v].toJ().mixedAdd(r[b]);p[2]=r[v].add(r[b].neg())}else{p[1]=r[v].toJ().mixedAdd(r[b]);p[2]=r[v].toJ().mixedAdd(r[b].neg())}var g=[-3,-1,-5,-7,0,7,5,1,3];var y=gS(n[v],n[b]);c=Math.max(y[0].length,c);f[v]=new Array(c);f[b]=new Array(c);for(h=0;h<c;h++){var w=y[0][h]|0;var m=y[1][h]|0;f[v][h]=g[(w+1)*3+(m+1)];f[b][h]=0;o[v]=p}}var A=this.jpoint(null,null,null);var E=this._wnafT4;for(u=c;u>=0;u--){var k=0;while(u>=0){var M=true;for(h=0;h<i;h++){E[h]=f[h][u]|0;if(E[h]!==0)M=false}if(!M)break;k++;u--}if(u>=0)k++;A=A.dblp(k);if(u<0)break;for(h=0;h<i;h++){var B=E[h];if(B===0)continue;else if(B>0)l=o[h][B-1>>1];else if(B<0)l=o[h][-B-1>>1].neg();if(l.type==="affine")A=A.mixedAdd(l);else A=A.add(l)}}for(u=0;u<i;u++)o[u]=null;if(s)return A;else return A.toP()};function AS(t,e){this.curve=t;this.type=e;this.precomputed=null}wS.BasePoint=AS;AS.prototype.eq=function t(){throw new Error("Not implemented")};AS.prototype.validate=function t(){return this.curve.validate(this)};wS.prototype.decodePoint=function t(e,r){e=uS.toArray(e,r);var n=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*n){if(e[0]===6)yS(e[e.length-1]%2===0);else if(e[0]===7)yS(e[e.length-1]%2===1);var i=this.point(e.slice(1,1+n),e.slice(1+n,1+2*n));return i}else if((e[0]===2||e[0]===3)&&e.length-1===n){return this.pointFromX(e.slice(1,1+n),e[0]===3)}throw new Error("Unknown point format")};AS.prototype.encodeCompressed=function t(e){return this.encode(e,true)};AS.prototype._encode=function t(e){var r=this.curve.p.byteLength();var n=this.getX().toArray("be",r);if(e)return[this.getY().isEven()?2:3].concat(n);return[4].concat(n,this.getY().toArray("be",r))};AS.prototype.encode=function t(e,r){return uS.encode(this._encode(r),e)};AS.prototype.precompute=function t(e){if(this.precomputed)return this;var r={doubles:null,naf:null,beta:null};r.naf=this._getNAFPoints(8);r.doubles=this._getDoubles(4,e);r.beta=this._getBeta();this.precomputed=r;return this};AS.prototype._hasDoubles=function t(e){if(!this.precomputed)return false;var r=this.precomputed.doubles;if(!r)return false;return r.points.length>=Math.ceil((e.bitLength()+1)/r.step)};AS.prototype._getDoubles=function t(e,r){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;var n=[this];var i=this;for(var s=0;s<r;s+=e){for(var a=0;a<e;a++)i=i.dbl();n.push(i)}return{step:e,points:n}};AS.prototype._getNAFPoints=function t(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;var r=[this];var n=(1<<e)-1;var i=n===1?null:this.dbl();for(var s=1;s<n;s++)r[s]=r[s-1].add(i);return{wnd:e,points:r}};AS.prototype._getBeta=function t(){return null};AS.prototype.dblp=function t(e){var r=this;for(var n=0;n<e;n++)r=r.dbl();return r};var ES=uS.assert;function kS(t){mS.call(this,"short",t);this.a=new fS(t.a,16).toRed(this.red);this.b=new fS(t.b,16).toRed(this.red);this.tinv=this.two.redInvm();this.zeroA=this.a.fromRed().cmpn(0)===0;this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0;this.endo=this._getEndomorphism(t);this._endoWnafT1=new Array(4);this._endoWnafT2=new Array(4)}ks(kS,mS);var MS=kS;kS.prototype._getEndomorphism=function t(e){if(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)return;var r;var n;if(e.beta){r=new fS(e.beta,16).toRed(this.red)}else{var i=this._getEndoRoots(this.p);r=i[0].cmp(i[1])<0?i[0]:i[1];r=r.toRed(this.red)}if(e.lambda){n=new fS(e.lambda,16)}else{var s=this._getEndoRoots(this.n);if(this.g.mul(s[0]).x.cmp(this.g.x.redMul(r))===0){n=s[0]}else{n=s[1];ES(this.g.mul(n).x.cmp(this.g.x.redMul(r))===0)}}var a;if(e.basis){a=e.basis.map((function(t){return{a:new fS(t.a,16),b:new fS(t.b,16)}}))}else{a=this._getEndoBasis(n)}return{beta:r,lambda:n,basis:a}};kS.prototype._getEndoRoots=function t(e){var r=e===this.p?this.red:fS.mont(e);var n=new fS(2).toRed(r).redInvm();var i=n.redNeg();var s=new fS(3).toRed(r).redNeg().redSqrt().redMul(n);var a=i.redAdd(s).fromRed();var o=i.redSub(s).fromRed();return[a,o]};kS.prototype._getEndoBasis=function t(e){var r=this.n.ushrn(Math.floor(this.n.bitLength()/2));var n=e;var i=this.n.clone();var s=new fS(1);var a=new fS(0);var o=new fS(0);var f=new fS(1);var c;var u;var h;var l;var d;var v;var b;var p=0;var g;var y;while(n.cmpn(0)!==0){var w=i.div(n);g=i.sub(w.mul(n));y=o.sub(w.mul(s));var m=f.sub(w.mul(a));if(!h&&g.cmp(r)<0){c=b.neg();u=s;h=g.neg();l=y}else if(h&&++p===2){break}b=g;i=n;n=g;o=s;s=y;f=a;a=m}d=g.neg();v=y;var A=h.sqr().add(l.sqr());var E=d.sqr().add(v.sqr());if(E.cmp(A)>=0){d=c;v=u}if(h.negative){h=h.neg();l=l.neg()}if(d.negative){d=d.neg();v=v.neg()}return[{a:h,b:l},{a:d,b:v}]};kS.prototype._endoSplit=function t(e){var r=this.endo.basis;var n=r[0];var i=r[1];var s=i.b.mul(e).divRound(this.n);var a=n.b.neg().mul(e).divRound(this.n);var o=s.mul(n.a);var f=a.mul(i.a);var c=s.mul(n.b);var u=a.mul(i.b);var h=e.sub(o).sub(f);var l=c.add(u).neg();return{k1:h,k2:l}};kS.prototype.pointFromX=function t(e,r){e=new fS(e,16);if(!e.red)e=e.toRed(this.red);var n=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b);var i=n.redSqrt();if(i.redSqr().redSub(n).cmp(this.zero)!==0)throw new Error("invalid point");var s=i.fromRed().isOdd();if(r&&!s||!r&&s)i=i.redNeg();return this.point(e,i)};kS.prototype.validate=function t(e){if(e.inf)return true;var r=e.x;var n=e.y;var i=this.a.redMul(r);var s=r.redSqr().redMul(r).redIAdd(i).redIAdd(this.b);return n.redSqr().redISub(s).cmpn(0)===0};kS.prototype._endoWnafMulAdd=function t(e,r,n){var i=this._endoWnafT1;var s=this._endoWnafT2;for(var a=0;a<e.length;a++){var o=this._endoSplit(r[a]);var f=e[a];var c=f._getBeta();if(o.k1.negative){o.k1.ineg();f=f.neg(true)}if(o.k2.negative){o.k2.ineg();c=c.neg(true)}i[a*2]=f;i[a*2+1]=c;s[a*2]=o.k1;s[a*2+1]=o.k2}var u=this._wnafMulAdd(1,i,s,a*2,n);for(var h=0;h<a*2;h++){i[h]=null;s[h]=null}return u};function BS(t,e,r,n){mS.BasePoint.call(this,t,"affine");if(e===null&&r===null){this.x=null;this.y=null;this.inf=true}else{this.x=new fS(e,16);this.y=new fS(r,16);if(n){this.x.forceRed(this.curve.red);this.y.forceRed(this.curve.red)}if(!this.x.red)this.x=this.x.toRed(this.curve.red);if(!this.y.red)this.y=this.y.toRed(this.curve.red);this.inf=false}}ks(BS,mS.BasePoint);kS.prototype.point=function t(e,r,n){return new BS(this,e,r,n)};kS.prototype.pointFromJSON=function t(e,r){return BS.fromJSON(this,e,r)};BS.prototype._getBeta=function t(){if(!this.curve.endo)return;var e=this.precomputed;if(e&&e.beta)return e.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var n=this.curve;var i=function(t){return n.point(t.x.redMul(n.endo.beta),t.y)};e.beta=r;r.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return r};BS.prototype.toJSON=function t(){if(!this.precomputed)return[this.x,this.y];return[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]};BS.fromJSON=function t(e,r,n){if(typeof r==="string")r=JSON.parse(r);var i=e.point(r[0],r[1],n);if(!r[2])return i;function s(t){return e.point(t[0],t[1],n)}var a=r[2];i.precomputed={beta:null,doubles:a.doubles&&{step:a.doubles.step,points:[i].concat(a.doubles.points.map(s))},naf:a.naf&&{wnd:a.naf.wnd,points:[i].concat(a.naf.points.map(s))}};return i};BS.prototype.inspect=function t(){if(this.isInfinity())return"<EC Point Infinity>";return"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};BS.prototype.isInfinity=function t(){return this.inf};BS.prototype.add=function t(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var r=this.y.redSub(e.y);if(r.cmpn(0)!==0)r=r.redMul(this.x.redSub(e.x).redInvm());var n=r.redSqr().redISub(this.x).redISub(e.x);var i=r.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,i)};BS.prototype.dbl=function t(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var r=this.curve.a;var n=this.x.redSqr();var i=e.redInvm();var s=n.redAdd(n).redIAdd(n).redIAdd(r).redMul(i);var a=s.redSqr().redISub(this.x.redAdd(this.x));var o=s.redMul(this.x.redSub(a)).redISub(this.y);return this.curve.point(a,o)};BS.prototype.getX=function t(){return this.x.fromRed()};BS.prototype.getY=function t(){return this.y.fromRed()};BS.prototype.mul=function t(e){e=new fS(e,16);if(this.isInfinity())return this;else if(this._hasDoubles(e))return this.curve._fixedNafMul(this,e);else if(this.curve.endo)return this.curve._endoWnafMulAdd([this],[e]);else return this.curve._wnafMul(this,e)};BS.prototype.mulAdd=function t(e,r,n){var i=[this,r];var s=[e,n];if(this.curve.endo)return this.curve._endoWnafMulAdd(i,s);else return this.curve._wnafMulAdd(1,i,s,2)};BS.prototype.jmulAdd=function t(e,r,n){var i=[this,r];var s=[e,n];if(this.curve.endo)return this.curve._endoWnafMulAdd(i,s,true);else return this.curve._wnafMulAdd(1,i,s,2,true)};BS.prototype.eq=function t(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};BS.prototype.neg=function t(e){if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var n=this.precomputed;var i=function(t){return t.neg()};r.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(i)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(i)}}}return r};BS.prototype.toJ=function t(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function SS(t,e,r,n){mS.BasePoint.call(this,t,"jacobian");if(e===null&&r===null&&n===null){this.x=this.curve.one;this.y=this.curve.one;this.z=new fS(0)}else{this.x=new fS(e,16);this.y=new fS(r,16);this.z=new fS(n,16)}if(!this.x.red)this.x=this.x.toRed(this.curve.red);if(!this.y.red)this.y=this.y.toRed(this.curve.red);if(!this.z.red)this.z=this.z.toRed(this.curve.red);this.zOne=this.z===this.curve.one}ks(SS,mS.BasePoint);kS.prototype.jpoint=function t(e,r,n){return new SS(this,e,r,n)};SS.prototype.toP=function t(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm();var r=e.redSqr();var n=this.x.redMul(r);var i=this.y.redMul(r).redMul(e);return this.curve.point(n,i)};SS.prototype.neg=function t(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};SS.prototype.add=function t(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var r=e.z.redSqr();var n=this.z.redSqr();var i=this.x.redMul(r);var s=e.x.redMul(n);var a=this.y.redMul(r.redMul(e.z));var o=e.y.redMul(n.redMul(this.z));var f=i.redSub(s);var c=a.redSub(o);if(f.cmpn(0)===0){if(c.cmpn(0)!==0)return this.curve.jpoint(null,null,null);else return this.dbl()}var u=f.redSqr();var h=u.redMul(f);var l=i.redMul(u);var d=c.redSqr().redIAdd(h).redISub(l).redISub(l);var v=c.redMul(l.redISub(d)).redISub(a.redMul(h));var b=this.z.redMul(e.z).redMul(f);return this.curve.jpoint(d,v,b)};SS.prototype.mixedAdd=function t(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var r=this.z.redSqr();var n=this.x;var i=e.x.redMul(r);var s=this.y;var a=e.y.redMul(r).redMul(this.z);var o=n.redSub(i);var f=s.redSub(a);if(o.cmpn(0)===0){if(f.cmpn(0)!==0)return this.curve.jpoint(null,null,null);else return this.dbl()}var c=o.redSqr();var u=c.redMul(o);var h=n.redMul(c);var l=f.redSqr().redIAdd(u).redISub(h).redISub(h);var d=f.redMul(h.redISub(l)).redISub(s.redMul(u));var v=this.z.redMul(o);return this.curve.jpoint(l,d,v)};SS.prototype.dblp=function t(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var r;if(this.curve.zeroA||this.curve.threeA){var n=this;for(r=0;r<e;r++)n=n.dbl();return n}var i=this.curve.a;var s=this.curve.tinv;var a=this.x;var o=this.y;var f=this.z;var c=f.redSqr().redSqr();var u=o.redAdd(o);for(r=0;r<e;r++){var h=a.redSqr();var l=u.redSqr();var d=l.redSqr();var v=h.redAdd(h).redIAdd(h).redIAdd(i.redMul(c));var b=a.redMul(l);var p=v.redSqr().redISub(b.redAdd(b));var g=b.redISub(p);var y=v.redMul(g);y=y.redIAdd(y).redISub(d);var w=u.redMul(f);if(r+1<e)c=c.redMul(d);a=p;f=w;u=y}return this.curve.jpoint(a,u.redMul(s),f)};SS.prototype.dbl=function t(){if(this.isInfinity())return this;if(this.curve.zeroA)return this._zeroDbl();else if(this.curve.threeA)return this._threeDbl();else return this._dbl()};SS.prototype._zeroDbl=function t(){var e;var r;var n;if(this.zOne){var i=this.x.redSqr();var s=this.y.redSqr();var a=s.redSqr();var o=this.x.redAdd(s).redSqr().redISub(i).redISub(a);o=o.redIAdd(o);var f=i.redAdd(i).redIAdd(i);var c=f.redSqr().redISub(o).redISub(o);var u=a.redIAdd(a);u=u.redIAdd(u);u=u.redIAdd(u);e=c;r=f.redMul(o.redISub(c)).redISub(u);n=this.y.redAdd(this.y)}else{var h=this.x.redSqr();var l=this.y.redSqr();var d=l.redSqr();var v=this.x.redAdd(l).redSqr().redISub(h).redISub(d);v=v.redIAdd(v);var b=h.redAdd(h).redIAdd(h);var p=b.redSqr();var g=d.redIAdd(d);g=g.redIAdd(g);g=g.redIAdd(g);e=p.redISub(v).redISub(v);r=b.redMul(v.redISub(e)).redISub(g);n=this.y.redMul(this.z);n=n.redIAdd(n)}return this.curve.jpoint(e,r,n)};SS.prototype._threeDbl=function t(){var e;var r;var n;if(this.zOne){var i=this.x.redSqr();var s=this.y.redSqr();var a=s.redSqr();var o=this.x.redAdd(s).redSqr().redISub(i).redISub(a);o=o.redIAdd(o);var f=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a);var c=f.redSqr().redISub(o).redISub(o);e=c;var u=a.redIAdd(a);u=u.redIAdd(u);u=u.redIAdd(u);r=f.redMul(o.redISub(c)).redISub(u);n=this.y.redAdd(this.y)}else{var h=this.z.redSqr();var l=this.y.redSqr();var d=this.x.redMul(l);var v=this.x.redSub(h).redMul(this.x.redAdd(h));v=v.redAdd(v).redIAdd(v);var b=d.redIAdd(d);b=b.redIAdd(b);var p=b.redAdd(b);e=v.redSqr().redISub(p);n=this.y.redAdd(this.z).redSqr().redISub(l).redISub(h);var g=l.redSqr();g=g.redIAdd(g);g=g.redIAdd(g);g=g.redIAdd(g);r=v.redMul(b.redISub(e)).redISub(g)}return this.curve.jpoint(e,r,n)};SS.prototype._dbl=function t(){var e=this.curve.a;var r=this.x;var n=this.y;var i=this.z;var s=i.redSqr().redSqr();var a=r.redSqr();var o=n.redSqr();var f=a.redAdd(a).redIAdd(a).redIAdd(e.redMul(s));var c=r.redAdd(r);c=c.redIAdd(c);var u=c.redMul(o);var h=f.redSqr().redISub(u.redAdd(u));var l=u.redISub(h);var d=o.redSqr();d=d.redIAdd(d);d=d.redIAdd(d);d=d.redIAdd(d);var v=f.redMul(l).redISub(d);var b=n.redAdd(n).redMul(i);return this.curve.jpoint(h,v,b)};SS.prototype.trpl=function t(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr();var r=this.y.redSqr();var n=this.z.redSqr();var i=r.redSqr();var s=e.redAdd(e).redIAdd(e);var a=s.redSqr();var o=this.x.redAdd(r).redSqr().redISub(e).redISub(i);o=o.redIAdd(o);o=o.redAdd(o).redIAdd(o);o=o.redISub(a);var f=o.redSqr();var c=i.redIAdd(i);c=c.redIAdd(c);c=c.redIAdd(c);c=c.redIAdd(c);var u=s.redIAdd(o).redSqr().redISub(a).redISub(f).redISub(c);var h=r.redMul(u);h=h.redIAdd(h);h=h.redIAdd(h);var l=this.x.redMul(f).redISub(h);l=l.redIAdd(l);l=l.redIAdd(l);var d=this.y.redMul(u.redMul(c.redISub(u)).redISub(o.redMul(f)));d=d.redIAdd(d);d=d.redIAdd(d);d=d.redIAdd(d);var v=this.z.redAdd(o).redSqr().redISub(n).redISub(f);return this.curve.jpoint(l,d,v)};SS.prototype.mul=function t(e,r){e=new fS(e,r);return this.curve._wnafMul(this,e)};SS.prototype.eq=function t(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return true;var r=this.z.redSqr();var n=e.z.redSqr();if(this.x.redMul(n).redISub(e.x.redMul(r)).cmpn(0)!==0)return false;var i=r.redMul(this.z);var s=n.redMul(e.z);return this.y.redMul(s).redISub(e.y.redMul(i)).cmpn(0)===0};SS.prototype.eqXToP=function t(e){var r=this.z.redSqr();var n=e.toRed(this.curve.red).redMul(r);if(this.x.cmp(n)===0)return true;var i=e.clone();var s=this.curve.redN.redMul(r);for(;;){i.iadd(this.curve.n);if(i.cmp(this.curve.p)>=0)return false;n.redIAdd(s);if(this.x.cmp(n)===0)return true}};SS.prototype.inspect=function t(){if(this.isInfinity())return"<EC JPoint Infinity>";return"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};SS.prototype.isInfinity=function t(){return this.z.cmpn(0)===0};function CS(t){mS.call(this,"mont",t);this.a=new fS(t.a,16).toRed(this.red);this.b=new fS(t.b,16).toRed(this.red);this.i4=new fS(4).toRed(this.red).redInvm();this.two=new fS(2).toRed(this.red);this.a24=this.i4.redMul(this.a.redAdd(this.two))}ks(CS,mS);var xS=CS;CS.prototype.validate=function t(e){var r=e.normalize().x;var n=r.redSqr();var i=n.redMul(r).redAdd(n.redMul(this.a)).redAdd(r);var s=i.redSqrt();return s.redSqr().cmp(i)===0};function PS(t,e,r){mS.BasePoint.call(this,t,"projective");if(e===null&&r===null){this.x=this.curve.one;this.z=this.curve.zero}else{this.x=new fS(e,16);this.z=new fS(r,16);if(!this.x.red)this.x=this.x.toRed(this.curve.red);if(!this.z.red)this.z=this.z.toRed(this.curve.red)}}ks(PS,mS.BasePoint);CS.prototype.decodePoint=function t(e,r){return this.point(uS.toArray(e,r),1)};CS.prototype.point=function t(e,r){return new PS(this,e,r)};CS.prototype.pointFromJSON=function t(e){return PS.fromJSON(this,e)};PS.prototype.precompute=function t(){};PS.prototype._encode=function t(){return this.getX().toArray("be",this.curve.p.byteLength())};PS.fromJSON=function t(e,r){return new PS(e,r[0],r[1]||e.one)};PS.prototype.inspect=function t(){if(this.isInfinity())return"<EC Point Infinity>";return"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};PS.prototype.isInfinity=function t(){return this.z.cmpn(0)===0};PS.prototype.dbl=function t(){var e=this.x.redAdd(this.z);var r=e.redSqr();var n=this.x.redSub(this.z);var i=n.redSqr();var s=r.redSub(i);var a=r.redMul(i);var o=s.redMul(i.redAdd(this.curve.a24.redMul(s)));return this.curve.point(a,o)};PS.prototype.add=function t(){throw new Error("Not supported on Montgomery curve")};PS.prototype.diffAdd=function t(e,r){var n=this.x.redAdd(this.z);var i=this.x.redSub(this.z);var s=e.x.redAdd(e.z);var a=e.x.redSub(e.z);var o=a.redMul(n);var f=s.redMul(i);var c=r.z.redMul(o.redAdd(f).redSqr());var u=r.x.redMul(o.redISub(f).redSqr());return this.curve.point(c,u)};PS.prototype.mul=function t(e){var r=e.clone();var n=this;var i=this.curve.point(null,null);var s=this;for(var a=[];r.cmpn(0)!==0;r.iushrn(1))a.push(r.andln(1));for(var o=a.length-1;o>=0;o--){if(a[o]===0){n=n.diffAdd(i,s);i=i.dbl()}else{i=n.diffAdd(i,s);n=n.dbl()}}return i};PS.prototype.mulAdd=function t(){throw new Error("Not supported on Montgomery curve")};PS.prototype.jumlAdd=function t(){throw new Error("Not supported on Montgomery curve")};PS.prototype.eq=function t(e){return this.getX().cmp(e.getX())===0};PS.prototype.normalize=function t(){this.x=this.x.redMul(this.z.redInvm());this.z=this.curve.one;return this};PS.prototype.getX=function t(){this.normalize();return this.x.fromRed()};var IS=uS.assert;function TS(t){this.twisted=(t.a|0)!==1;this.mOneA=this.twisted&&(t.a|0)===-1;this.extended=this.mOneA;mS.call(this,"edwards",t);this.a=new fS(t.a,16).umod(this.red.m);this.a=this.a.toRed(this.red);this.c=new fS(t.c,16).toRed(this.red);this.c2=this.c.redSqr();this.d=new fS(t.d,16).toRed(this.red);this.dd=this.d.redAdd(this.d);IS(!this.twisted||this.c.fromRed().cmpn(1)===0);this.oneC=(t.c|0)===1}ks(TS,mS);var OS=TS;TS.prototype._mulA=function t(e){if(this.mOneA)return e.redNeg();else return this.a.redMul(e)};TS.prototype._mulC=function t(e){if(this.oneC)return e;else return this.c.redMul(e)};TS.prototype.jpoint=function t(e,r,n,i){return this.point(e,r,n,i)};TS.prototype.pointFromX=function t(e,r){e=new fS(e,16);if(!e.red)e=e.toRed(this.red);var n=e.redSqr();var i=this.c2.redSub(this.a.redMul(n));var s=this.one.redSub(this.c2.redMul(this.d).redMul(n));var a=i.redMul(s.redInvm());var o=a.redSqrt();if(o.redSqr().redSub(a).cmp(this.zero)!==0)throw new Error("invalid point");var f=o.fromRed().isOdd();if(r&&!f||!r&&f)o=o.redNeg();return this.point(e,o)};TS.prototype.pointFromY=function t(e,r){e=new fS(e,16);if(!e.red)e=e.toRed(this.red);var n=e.redSqr();var i=n.redSub(this.c2);var s=n.redMul(this.d).redMul(this.c2).redSub(this.a);var a=i.redMul(s.redInvm());if(a.cmp(this.zero)===0){if(r)throw new Error("invalid point");else return this.point(this.zero,e)}var o=a.redSqrt();if(o.redSqr().redSub(a).cmp(this.zero)!==0)throw new Error("invalid point");if(o.fromRed().isOdd()!==r)o=o.redNeg();return this.point(o,e)};TS.prototype.validate=function t(e){if(e.isInfinity())return true;e.normalize();var r=e.x.redSqr();var n=e.y.redSqr();var i=r.redMul(this.a).redAdd(n);var s=this.c2.redMul(this.one.redAdd(this.d.redMul(r).redMul(n)));return i.cmp(s)===0};function DS(t,e,r,n,i){mS.BasePoint.call(this,t,"projective");if(e===null&&r===null&&n===null){this.x=this.curve.zero;this.y=this.curve.one;this.z=this.curve.one;this.t=this.curve.zero;this.zOne=true}else{this.x=new fS(e,16);this.y=new fS(r,16);this.z=n?new fS(n,16):this.curve.one;this.t=i&&new fS(i,16);if(!this.x.red)this.x=this.x.toRed(this.curve.red);if(!this.y.red)this.y=this.y.toRed(this.curve.red);if(!this.z.red)this.z=this.z.toRed(this.curve.red);if(this.t&&!this.t.red)this.t=this.t.toRed(this.curve.red);this.zOne=this.z===this.curve.one;if(this.curve.extended&&!this.t){this.t=this.x.redMul(this.y);if(!this.zOne)this.t=this.t.redMul(this.z.redInvm())}}}ks(DS,mS.BasePoint);TS.prototype.pointFromJSON=function t(e){return DS.fromJSON(this,e)};TS.prototype.point=function t(e,r,n,i){return new DS(this,e,r,n,i)};DS.fromJSON=function t(e,r){return new DS(e,r[0],r[1],r[2])};DS.prototype.inspect=function t(){if(this.isInfinity())return"<EC Point Infinity>";return"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};DS.prototype.isInfinity=function t(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)};DS.prototype._extDbl=function t(){var e=this.x.redSqr();var r=this.y.redSqr();var n=this.z.redSqr();n=n.redIAdd(n);var i=this.curve._mulA(e);var s=this.x.redAdd(this.y).redSqr().redISub(e).redISub(r);var a=i.redAdd(r);var o=a.redSub(n);var f=i.redSub(r);var c=s.redMul(o);var u=a.redMul(f);var h=s.redMul(f);var l=o.redMul(a);return this.curve.point(c,u,l,h)};DS.prototype._projDbl=function t(){var e=this.x.redAdd(this.y).redSqr();var r=this.x.redSqr();var n=this.y.redSqr();var i;var s;var a;var o;var f;var c;if(this.curve.twisted){o=this.curve._mulA(r);var u=o.redAdd(n);if(this.zOne){i=e.redSub(r).redSub(n).redMul(u.redSub(this.curve.two));s=u.redMul(o.redSub(n));a=u.redSqr().redSub(u).redSub(u)}else{f=this.z.redSqr();c=u.redSub(f).redISub(f);i=e.redSub(r).redISub(n).redMul(c);s=u.redMul(o.redSub(n));a=u.redMul(c)}}else{o=r.redAdd(n);f=this.curve._mulC(this.z).redSqr();c=o.redSub(f).redSub(f);i=this.curve._mulC(e.redISub(o)).redMul(c);s=this.curve._mulC(o).redMul(r.redISub(n));a=o.redMul(c)}return this.curve.point(i,s,a)};DS.prototype.dbl=function t(){if(this.isInfinity())return this;if(this.curve.extended)return this._extDbl();else return this._projDbl()};DS.prototype._extAdd=function t(e){var r=this.y.redSub(this.x).redMul(e.y.redSub(e.x));var n=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x));var i=this.t.redMul(this.curve.dd).redMul(e.t);var s=this.z.redMul(e.z.redAdd(e.z));var a=n.redSub(r);var o=s.redSub(i);var f=s.redAdd(i);var c=n.redAdd(r);var u=a.redMul(o);var h=f.redMul(c);var l=a.redMul(c);var d=o.redMul(f);return this.curve.point(u,h,d,l)};DS.prototype._projAdd=function t(e){var r=this.z.redMul(e.z);var n=r.redSqr();var i=this.x.redMul(e.x);var s=this.y.redMul(e.y);var a=this.curve.d.redMul(i).redMul(s);var o=n.redSub(a);var f=n.redAdd(a);var c=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(i).redISub(s);var u=r.redMul(o).redMul(c);var h;var l;if(this.curve.twisted){h=r.redMul(f).redMul(s.redSub(this.curve._mulA(i)));l=o.redMul(f)}else{h=r.redMul(f).redMul(s.redSub(i));l=this.curve._mulC(o).redMul(f)}return this.curve.point(u,h,l)};DS.prototype.add=function t(e){if(this.isInfinity())return e;if(e.isInfinity())return this;if(this.curve.extended)return this._extAdd(e);else return this._projAdd(e)};DS.prototype.mul=function t(e){if(this._hasDoubles(e))return this.curve._fixedNafMul(this,e);else return this.curve._wnafMul(this,e)};DS.prototype.mulAdd=function t(e,r,n){return this.curve._wnafMulAdd(1,[this,r],[e,n],2,false)};DS.prototype.jmulAdd=function t(e,r,n){return this.curve._wnafMulAdd(1,[this,r],[e,n],2,true)};DS.prototype.normalize=function t(){if(this.zOne)return this;var e=this.z.redInvm();this.x=this.x.redMul(e);this.y=this.y.redMul(e);if(this.t)this.t=this.t.redMul(e);this.z=this.curve.one;this.zOne=true;return this};DS.prototype.neg=function t(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())};DS.prototype.getX=function t(){this.normalize();return this.x.fromRed()};DS.prototype.getY=function t(){this.normalize();return this.y.fromRed()};DS.prototype.eq=function t(e){return this===e||this.getX().cmp(e.getX())===0&&this.getY().cmp(e.getY())===0};DS.prototype.eqXToP=function t(e){var r=e.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(r)===0)return true;var n=e.clone();var i=this.curve.redN.redMul(this.z);for(;;){n.iadd(this.curve.n);if(n.cmp(this.curve.p)>=0)return false;r.redIAdd(i);if(this.x.cmp(r)===0)return true}};DS.prototype.toP=DS.prototype.normalize;DS.prototype.mixedAdd=DS.prototype.add;var NS=t((function(t,e){var r=e;r.base=mS;r.short=MS;r.mont=xS;r.edwards=OS}));var US={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}};var jS=t((function(t,e){var r=e;var n=uS.assert;function i(t){if(t.type==="short")this.curve=new NS.short(t);else if(t.type==="edwards")this.curve=new NS.edwards(t);else this.curve=new NS.mont(t);this.g=this.curve.g;this.n=this.curve.n;this.hash=t.hash;n(this.g.validate(),"Invalid curve");n(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}r.PresetCurve=i;function s(t,e){Object.defineProperty(r,t,{configurable:true,enumerable:true,get:function(){var n=new i(e);Object.defineProperty(r,t,{configurable:true,enumerable:true,value:n});return n}})}s("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:df.sha256,gRed:false,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]});s("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:df.sha256,gRed:false,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]});s("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:df.sha256,gRed:false,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]});s("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff "+"fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff "+"fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f "+"5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 "+"f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:df.sha384,gRed:false,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 "+"5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 "+"0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]});s("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff "+"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff "+"ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff "+"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff "+"ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b "+"99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd "+"3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff "+"ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 "+"f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:df.sha512,gRed:false,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 "+"053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 "+"a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 "+"579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 "+"3fad0761 353c7086 a272c240 88be9476 9fd16650"]});s("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:df.sha256,gRed:false,g:["9"]});s("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:df.sha256,gRed:false,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var a;try{a=US}catch(t){a=undefined}s("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:df.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:false,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",a]})}));function RS(t){if(!(this instanceof RS))return new RS(t);this.hash=t.hash;this.predResist=!!t.predResist;this.outLen=this.hash.outSize;this.minEntropy=t.minEntropy||this.hash.hmacStrength;this._reseed=null;this.reseedInterval=null;this.K=null;this.V=null;var e=cS.toArray(t.entropy,t.entropyEnc||"hex");var r=cS.toArray(t.nonce,t.nonceEnc||"hex");var n=cS.toArray(t.pers,t.persEnc||"hex");As(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits");this._init(e,r,n)}var FS=RS;RS.prototype._init=function t(e,r,n){var i=e.concat(r).concat(n);this.K=new Array(this.outLen/8);this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++){this.K[s]=0;this.V[s]=1}this._update(i);this._reseed=1;this.reseedInterval=281474976710656};RS.prototype._hmac=function t(){return new df.hmac(this.hash,this.K)};RS.prototype._update=function t(e){var r=this._hmac().update(this.V).update([0]);if(e)r=r.update(e);this.K=r.digest();this.V=this._hmac().update(this.V).digest();if(!e)return;this.K=this._hmac().update(this.V).update([1]).update(e).digest();this.V=this._hmac().update(this.V).digest()};RS.prototype.reseed=function t(e,r,n,i){if(typeof r!=="string"){i=n;n=r;r=null}e=cS.toArray(e,r);n=cS.toArray(n,i);As(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits");this._update(e.concat(n||[]));this._reseed=1};RS.prototype.generate=function t(e,r,n,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");if(typeof r!=="string"){i=n;n=r;r=null}if(n){n=cS.toArray(n,i||"hex");this._update(n)}var s=[];while(s.length<e){this.V=this._hmac().update(this.V).digest();s=s.concat(this.V)}var a=s.slice(0,e);this._update(n);this._reseed++;return cS.encode(a,r)};var LS=uS.assert;function QS(t,e){this.ec=t;this.priv=null;this.pub=null;if(e.priv)this._importPrivate(e.priv,e.privEnc);if(e.pub)this._importPublic(e.pub,e.pubEnc)}var HS=QS;QS.fromPublic=function t(e,r,n){if(r instanceof QS)return r;return new QS(e,{pub:r,pubEnc:n})};QS.fromPrivate=function t(e,r,n){if(r instanceof QS)return r;return new QS(e,{priv:r,privEnc:n})};QS.prototype.validate=function t(){var e=this.getPublic();if(e.isInfinity())return{result:false,reason:"Invalid public key"};if(!e.validate())return{result:false,reason:"Public key is not a point"};if(!e.mul(this.ec.curve.n).isInfinity())return{result:false,reason:"Public key * N != O"};return{result:true,reason:null}};QS.prototype.getPublic=function t(e,r){if(typeof e==="string"){r=e;e=null}if(!this.pub)this.pub=this.ec.g.mul(this.priv);if(!r)return this.pub;return this.pub.encode(r,e)};QS.prototype.getPrivate=function t(e){if(e==="hex")return this.priv.toString(16,2);else return this.priv};QS.prototype._importPrivate=function t(e,r){this.priv=new fS(e,r||16);this.priv=this.priv.umod(this.ec.curve.n)};QS.prototype._importPublic=function t(e,r){if(e.x||e.y){if(this.ec.curve.type==="mont"){LS(e.x,"Need x coordinate")}else if(this.ec.curve.type==="short"||this.ec.curve.type==="edwards"){LS(e.x&&e.y,"Need both x and y coordinate")}this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,r)};QS.prototype.derive=function t(e){if(!e.validate()){LS(e.validate(),"public point not validated")}return e.mul(this.priv).getX()};QS.prototype.sign=function t(e,r,n){return this.ec.sign(e,this,r,n)};QS.prototype.verify=function t(e,r){return this.ec.verify(e,r,this)};QS.prototype.inspect=function t(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var GS=uS.assert;function KS(t,e){if(t instanceof KS)return t;if(this._importDER(t,e))return;GS(t.r&&t.s,"Signature without r or s");this.r=new fS(t.r,16);this.s=new fS(t.s,16);if(t.recoveryParam===undefined)this.recoveryParam=null;else this.recoveryParam=t.recoveryParam}var JS=KS;function zS(){this.place=0}function WS(t,e){var r=t[e.place++];if(!(r&128)){return r}var n=r&15;if(n===0||n>4){return false}var i=0;for(var s=0,a=e.place;s<n;s++,a++){i<<=8;i|=t[a];i>>>=0}if(i<=127){return false}e.place=a;return i}function qS(t){var e=0;var r=t.length-1;while(!t[e]&&!(t[e+1]&128)&&e<r){e++}if(e===0){return t}return t.slice(e)}KS.prototype._importDER=function t(e,r){e=uS.toArray(e,r);var n=new zS;if(e[n.place++]!==48){return false}var i=WS(e,n);if(i===false){return false}if(i+n.place!==e.length){return false}if(e[n.place++]!==2){return false}var s=WS(e,n);if(s===false){return false}var a=e.slice(n.place,s+n.place);n.place+=s;if(e[n.place++]!==2){return false}var o=WS(e,n);if(o===false){return false}if(e.length!==o+n.place){return false}var f=e.slice(n.place,o+n.place);if(a[0]===0){if(a[1]&128){a=a.slice(1)}else{return false}}if(f[0]===0){if(f[1]&128){f=f.slice(1)}else{return false}}this.r=new fS(a);this.s=new fS(f);this.recoveryParam=null;return true};function VS(t,e){if(e<128){t.push(e);return}var r=1+(Math.log(e)/Math.LN2>>>3);t.push(r|128);while(--r){t.push(e>>>(r<<3)&255)}t.push(e)}KS.prototype.toDER=function t(e){var r=this.r.toArray();var n=this.s.toArray();if(r[0]&128)r=[0].concat(r);if(n[0]&128)n=[0].concat(n);r=qS(r);n=qS(n);while(!n[0]&&!(n[1]&128)){n=n.slice(1)}var i=[2];VS(i,r.length);i=i.concat(r);i.push(2);VS(i,n.length);var s=i.concat(n);var a=[48];VS(a,s.length);a=a.concat(s);return uS.encode(a,e)};var YS=uS.assert;function _S(t){if(!(this instanceof _S))return new _S(t);if(typeof t==="string"){YS(Object.prototype.hasOwnProperty.call(jS,t),"Unknown curve "+t);t=jS[t]}if(t instanceof jS.PresetCurve)t={curve:t};this.curve=t.curve.curve;this.n=this.curve.n;this.nh=this.n.ushrn(1);this.g=this.curve.g;this.g=t.curve.g;this.g.precompute(t.curve.n.bitLength()+1);this.hash=t.hash||t.curve.hash}var ZS=_S;_S.prototype.keyPair=function t(e){return new HS(this,e)};_S.prototype.keyFromPrivate=function t(e,r){return HS.fromPrivate(this,e,r)};_S.prototype.keyFromPublic=function t(e,r){return HS.fromPublic(this,e,r)};_S.prototype.genKeyPair=function t(e){if(!e)e={};var r=new FS({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||lS(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()});var n=this.n.byteLength();var i=this.n.sub(new fS(2));for(;;){var s=new fS(r.generate(n));if(s.cmp(i)>0)continue;s.iaddn(1);return this.keyFromPrivate(s)}};_S.prototype._truncateToN=function t(e,r){var n=e.byteLength()*8-this.n.bitLength();if(n>0)e=e.ushrn(n);if(!r&&e.cmp(this.n)>=0)return e.sub(this.n);else return e};_S.prototype.sign=function t(e,r,n,i){if(typeof n==="object"){i=n;n=null}if(!i)i={};r=this.keyFromPrivate(r,n);e=this._truncateToN(new fS(e,16));var s=this.n.byteLength();var a=r.getPrivate().toArray("be",s);var o=e.toArray("be",s);var f=new FS({hash:this.hash,entropy:a,nonce:o,pers:i.pers,persEnc:i.persEnc||"utf8"});var c=this.n.sub(new fS(1));for(var u=0;;u++){var h=i.k?i.k(u):new fS(f.generate(this.n.byteLength()));h=this._truncateToN(h,true);if(h.cmpn(1)<=0||h.cmp(c)>=0)continue;var l=this.g.mul(h);if(l.isInfinity())continue;var d=l.getX();var v=d.umod(this.n);if(v.cmpn(0)===0)continue;var b=h.invm(this.n).mul(v.mul(r.getPrivate()).iadd(e));b=b.umod(this.n);if(b.cmpn(0)===0)continue;var p=(l.getY().isOdd()?1:0)|(d.cmp(v)!==0?2:0);if(i.canonical&&b.cmp(this.nh)>0){b=this.n.sub(b);p^=1}return new JS({r:v,s:b,recoveryParam:p})}};_S.prototype.verify=function t(e,r,n,i){e=this._truncateToN(new fS(e,16));n=this.keyFromPublic(n,i);r=new JS(r,"hex");var s=r.r;var a=r.s;if(s.cmpn(1)<0||s.cmp(this.n)>=0)return false;if(a.cmpn(1)<0||a.cmp(this.n)>=0)return false;var o=a.invm(this.n);var f=o.mul(e).umod(this.n);var c=o.mul(s).umod(this.n);var u;if(!this.curve._maxwellTrick){u=this.g.mulAdd(f,n.getPublic(),c);if(u.isInfinity())return false;return u.getX().umod(this.n).cmp(s)===0}u=this.g.jmulAdd(f,n.getPublic(),c);if(u.isInfinity())return false;return u.eqXToP(s)};_S.prototype.recoverPubKey=function(t,e,r,n){YS((3&r)===r,"The recovery param is more than two bits");e=new JS(e,n);var i=this.n;var s=new fS(t);var a=e.r;var o=e.s;var f=r&1;var c=r>>1;if(a.cmp(this.curve.p.umod(this.curve.n))>=0&&c)throw new Error("Unable to find sencond key candinate");if(c)a=this.curve.pointFromX(a.add(this.curve.n),f);else a=this.curve.pointFromX(a,f);var u=e.r.invm(i);var h=i.sub(s).mul(u).umod(i);var l=o.mul(u).umod(i);return this.g.mulAdd(h,a,l)};_S.prototype.getKeyRecoveryParam=function(t,e,r,n){e=new JS(e,n);if(e.recoveryParam!==null)return e.recoveryParam;for(var i=0;i<4;i++){var s;try{s=this.recoverPubKey(t,e,i)}catch(t){continue}if(s.eq(r))return i}throw new Error("Unable to find valid recovery factor")};var XS=uS.assert;var $S=uS.parseBytes;var tC=uS.cachedProperty;function eC(t,e){this.eddsa=t;this._secret=$S(e.secret);if(t.isPoint(e.pub))this._pub=e.pub;else this._pubBytes=$S(e.pub)}eC.fromPublic=function t(e,r){if(r instanceof eC)return r;return new eC(e,{pub:r})};eC.fromSecret=function t(e,r){if(r instanceof eC)return r;return new eC(e,{secret:r})};eC.prototype.secret=function t(){return this._secret};tC(eC,"pubBytes",(function t(){return this.eddsa.encodePoint(this.pub())}));tC(eC,"pub",(function t(){if(this._pubBytes)return this.eddsa.decodePoint(this._pubBytes);return this.eddsa.g.mul(this.priv())}));tC(eC,"privBytes",(function t(){var e=this.eddsa;var r=this.hash();var n=e.encodingLength-1;var i=r.slice(0,e.encodingLength);i[0]&=248;i[n]&=127;i[n]|=64;return i}));tC(eC,"priv",(function t(){return this.eddsa.decodeInt(this.privBytes())}));tC(eC,"hash",(function t(){return this.eddsa.hash().update(this.secret()).digest()}));tC(eC,"messagePrefix",(function t(){return this.hash().slice(this.eddsa.encodingLength)}));eC.prototype.sign=function t(e){XS(this._secret,"KeyPair can only verify");return this.eddsa.sign(e,this)};eC.prototype.verify=function t(e,r){return this.eddsa.verify(e,r,this)};eC.prototype.getSecret=function t(e){XS(this._secret,"KeyPair is public only");return uS.encode(this.secret(),e)};eC.prototype.getPublic=function t(e){return uS.encode(this.pubBytes(),e)};var rC=eC;var nC=uS.assert;var iC=uS.cachedProperty;var sC=uS.parseBytes;function aC(t,e){this.eddsa=t;if(typeof e!=="object")e=sC(e);if(Array.isArray(e)){e={R:e.slice(0,t.encodingLength),S:e.slice(t.encodingLength)}}nC(e.R&&e.S,"Signature without R or S");if(t.isPoint(e.R))this._R=e.R;if(e.S instanceof fS)this._S=e.S;this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded;this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}iC(aC,"S",(function t(){return this.eddsa.decodeInt(this.Sencoded())}));iC(aC,"R",(function t(){return this.eddsa.decodePoint(this.Rencoded())}));iC(aC,"Rencoded",(function t(){return this.eddsa.encodePoint(this.R())}));iC(aC,"Sencoded",(function t(){return this.eddsa.encodeInt(this.S())}));aC.prototype.toBytes=function t(){return this.Rencoded().concat(this.Sencoded())};aC.prototype.toHex=function t(){return uS.encode(this.toBytes(),"hex").toUpperCase()};var oC=aC;var fC=uS.assert;var cC=uS.parseBytes;function uC(t){fC(t==="ed25519","only tested with ed25519 so far");if(!(this instanceof uC))return new uC(t);t=jS[t].curve;this.curve=t;this.g=t.g;this.g.precompute(t.n.bitLength()+1);this.pointClass=t.point().constructor;this.encodingLength=Math.ceil(t.n.bitLength()/8);this.hash=df.sha512}var hC=uC;uC.prototype.sign=function t(e,r){e=cC(e);var n=this.keyFromSecret(r);var i=this.hashInt(n.messagePrefix(),e);var s=this.g.mul(i);var a=this.encodePoint(s);var o=this.hashInt(a,n.pubBytes(),e).mul(n.priv());var f=i.add(o).umod(this.curve.n);return this.makeSignature({R:s,S:f,Rencoded:a})};uC.prototype.verify=function t(e,r,n){e=cC(e);r=this.makeSignature(r);var i=this.keyFromPublic(n);var s=this.hashInt(r.Rencoded(),i.pubBytes(),e);var a=this.g.mul(r.S());var o=r.R().add(i.pub().mul(s));return o.eq(a)};uC.prototype.hashInt=function t(){var e=this.hash();for(var r=0;r<arguments.length;r++)e.update(arguments[r]);return uS.intFromLE(e.digest()).umod(this.curve.n)};uC.prototype.keyFromPublic=function t(e){return rC.fromPublic(this,e)};uC.prototype.keyFromSecret=function t(e){return rC.fromSecret(this,e)};uC.prototype.makeSignature=function t(e){if(e instanceof oC)return e;return new oC(this,e)};uC.prototype.encodePoint=function t(e){var r=e.getY().toArray("le",this.encodingLength);r[this.encodingLength-1]|=e.getX().isOdd()?128:0;return r};uC.prototype.decodePoint=function t(e){e=uS.parseBytes(e);var r=e.length-1;var n=e.slice(0,r).concat(e[r]&~128);var i=(e[r]&128)!==0;var s=uS.intFromLE(n);return this.curve.pointFromY(s,i)};uC.prototype.encodeInt=function t(e){return e.toArray("le",this.encodingLength)};uC.prototype.decodeInt=function t(e){return uS.intFromLE(e)};uC.prototype.isPoint=function t(e){return e instanceof this.pointClass};var lC=t((function(t,e){var r=e;r.version=oS.version;r.utils=uS;r.rand=lS;r.curve=NS;r.curves=jS;r.ec=ZS;r.eddsa=hC}));const dC=n(Lv);var vC=t((function(t,e){Object.defineProperty(e,"__esModule",{value:true});e.KeyPair=e.subtle=void 0;if(typeof crypto==="object"&&crypto.subtle){e.subtle=crypto.subtle}else{let t=r.webcrypto;if(t){e.subtle=t.subtle}else{(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,"Webcrypto not accessible");throw new Error("webcrypto.subtle missing")}}let n=new lC.ec("secp256k1");const i={p192:null,p224:null,p256:"P-256",p384:"P-384",p521:"P-521",curve25519:null,ed25519:null,secp256k1:null};new kb.Point(55066263022277343669578718895168534326250603453777594175500187360389116729240n,32670510020758816978083085130507043184471273380659243275938904335757337482424n);const s="secp256k1";class a{constructor(){this.ethereumPrefix="Ethereum Signed Message:\n";this.algorithmASNList={secp256k1:["3081ec06072a8648ce3d02013081e0020101302c06072a8648ce3d0101022100fffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f3044042000000000000000000000000000000000000000000000000000000000000000000420000000000000000000000000000000000000000000000000000000000000000704410479be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8022100fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141020101","06052b8104000a"],sect283k1:["3081f806072a8648ce3d02013081ec020101302506072a8648ce3d0102301a0202011b06092a8648ce3d01020303300902010502010702010c304c042400000000000000000000000000000000000000000000000000000000000000000000000004240000000000000000000000000000000000000000000000000000000000000000000000010449040503213f78ca44883f1a3b8162f188e553cd265f23c1567a16876913b0c2ac245849283601ccda380f1c9e318d90f95d07e5426fe87e45c0e8184698e45962364e34116177dd2259022401ffffffffffffffffffffffffffffffffffe9ae2ed07577265dff7f94451e061e163c61020104"],p256:["3081ec06072a8648ce3d02013081e0020101302c06072a8648ce3d0101022100ffffffff00000001000000000000000000000000ffffffffffffffffffffffff30440420ffffffff00000001000000000000000000000000fffffffffffffffffffffffc04205ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b0441046b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c2964fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5022100ffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551020101"]}}getPrivateAsUint8(){return this.privKey}getPrivateAsHexString(){return(0,Eb.uint8tohex)(this.privKey)}getPrivateAsBigInt(){return(0,Eb.uint8ToBn)(this.privKey)}static privateFromBigInt(t){let e=new this;e.privKey=new Uint8Array((0,Eb.hexStringToArray)(t.toString(16).padStart(64,"0")));return e}static fromPublicHex(t){if(t.toLowerCase().match(/^[a-f0-9]+$/i)===null){throw new Error("Wrong Hex string input")}if(t.length<129||t.length>130){throw new Error("Wrong public hex length")}let e=new this;e.pubKey=new Uint8Array((0,Eb.hexStringToArray)(t));return e}static fromPrivateUint8(t,e=""){if(!t||t.length!=32){throw new Error("Wrong private key. Should be 32 bytes Uint8")}let r=new this;r.privKey=t;if(e&&kb.CURVES.hasOwnProperty(e)){r.algorithm=e}else{throw new Error(`Algorithm ${e} not implemented.`)}return r}static publicFromBase64orPEM(t){return a.publicFromPEM((0,Eb.pemOrBase64Orbase64urlToString)(t))}static publicFromPEM(t){const e=(0,Eb.base64ToUint8array)(t);let r=Jy.AsnParser.parse(e,zB.PublicKeyInfoValue);return a.publicFromUint(new Uint8Array(r.publicKey))}static publicFromUint(t){let e=new this;if(t.byteLength!=65){(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,"Wrong public key length");throw new Error("Wrong public key length")}e.pubKey=new Uint8Array(t);return e}static publicFromSubjectPublicKeyInfo(t){let e=new this;e.pubKey=new Uint8Array(t.value.publicKey);return e}static publicFromSubjectPublicKeyValue(t){let e=new this;e.pubKey=new Uint8Array(t.publicKey);e.algorithm=e.getAlgorithNameFromASN1((0,Eb.uint8tohex)(new Uint8Array(t.algorithm)));return e}static privateFromKeyInfo(t){let e=new this;let r=Jy.AsnParser.parse(t.keysData,zB.PrivateKeyData);e.algorithm=e.getAlgorithNameFromASN1((0,Eb.uint8tohex)(new Uint8Array(t.algIdent)));e.privKey=new Uint8Array(r.privateKey);return e}static privateFromKeyDataPEM(t){const e=(0,Eb.base64ToUint8array)(t);let r=Jy.AsnParser.parse(e,zB.PrivateKeyData);let n=new this;n.algorithm=n.getAlgorithNameFromASN1((0,Eb.uint8tohex)(new Uint8Array(r.algDescr)));n.privKey=new Uint8Array(r.privateKey);return n}getAlgorithNameFromASN1(t){let e={};for(const t in this.algorithmASNList){this.algorithmASNList[t].forEach((r=>{e[r]=t}))}if(e.hasOwnProperty(t)){return e[t]}else{let t="Unknown algorithm.";(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,t);throw new Error(t)}}static privateFromPEM(t){const e=(0,Eb.base64ToUint8array)(t);let r=Jy.AsnParser.parse(e,zB.PrivateKeyInfo);return a.privateFromKeyInfo(r)}static async generateKeyAsync(){const t=await crypto.subtle.generateKey({name:"AES-GCM",length:256},true,["encrypt"]);let e=["0x"];const r=await crypto.subtle.exportKey("raw",t);new Uint8Array(r).forEach((t=>{var r=t.toString(16);if(r.length%2){r="0"+r}e.push(r)}));return this.privateFromBigInt(BigInt(e.join(""))%kb.CURVE_SECP256k1.n)}static createKeys(){return this.privateFromBigInt(BigInt("0x"+(0,Eb.uint8tohex)(crypto.getRandomValues(new Uint8Array(32))))%kb.CURVE_SECP256k1.n)}getPublicKeyAsHexStr(){if(this.pubKey){return(0,Eb.uint8tohex)(this.pubKey)}else{if(kb.CURVES.hasOwnProperty(this.algorithm)&&i.hasOwnProperty(this.algorithm)){let t=new lC.ec(this.algorithm);if(!this.getPrivateAsHexString()){(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,this);throw new Error("Cant sign. This is only public key.")}let e=t.keyFromPrivate(this.getPrivateAsHexString(),"hex");return e.getPublic("hex").toString()}else{let t='Private -> Public key not implemented for that aglorighm - "'+this.algorithm+'"';(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,t);throw new Error(t)}}}getAsnDerPublic(){var t=this.getPublicKeyAsHexStr();let e="";if(!this.algorithm){let t="algorithm undefined, lets use default.";(0,Eb.logger)(Ab.DEBUGLEVEL.VERBOSE,t);e=this.algorithmASNList[s][0]}else if(!this.algorithmASNList.hasOwnProperty(this.algorithm)){let t="Fatal Error. Algorithm not implemented yet - "+this.algorithm;(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,t);throw new Error(t)}else{e=this.algorithmASNList[this.algorithm][0]}return LB.Asn1Der.encode("SEQUENCE_30",e+LB.Asn1Der.encode("BIT_STRING",t))}getAddress(){var t=this.getPublicKeyAsHexStr();t=t.substr(2);let e=sr.keccak256((0,Eb.hexStringToArray)(t));return"0x"+e.substr(-40).toUpperCase()}signBytes(t){if(!this.getPrivateAsHexString()){throw new Error("Cant sign. This is only public key.")}let e=n.keyFromPrivate(this.getPrivateAsHexString(),"hex");let r=sr.keccak256(t);let i=e.sign(r);return i.toDER("hex")}signStringWithEthereum(t){if(!this.getPrivateAsHexString()){throw new Error("Cant sign. This is only public key.")}let e=n.keyFromPrivate(this.getPrivateAsHexString(),"hex");let r=this.ethereumPrefix+t.length+t;let i=sr.keccak256((0,Eb.stringToArray)(r));let s=e.sign(i);return s.toDER("hex")}signHexStringWithEthereum(t){return this.signStringWithEthereum("0x"+t)}signBytesWithEthereum(t){let e="0x"+(0,Eb.uint8tohex)(new Uint8Array(t));(0,Eb.logger)(Ab.DEBUGLEVEL.HIGH,"message: "+e);return this.signStringWithEthereum(e)}signDeterministicSHA256(t){let e=Array.from(dC.ethers.utils.arrayify(dC.ethers.utils.sha256(t)));return this.signBytes(e)}verifyDeterministicSHA256(t,e){let r=dC.ethers.utils.sha256(t).substr(2);let n,s;if(kb.CURVES.hasOwnProperty(this.algorithm)&&i.hasOwnProperty(this.algorithm)){let t=new lC.ec(this.algorithm);n=t.keyFromPublic(this.getPublicKeyAsHexStr(),"hex")}else{let t='Elliptic.js curve not implemented for that aglorighm - "'+this.algorithm+'"';(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,t);throw new Error(t)}if(e.length==128||e.length==130){var a=e.match(/([a-f\d]{64})/gi);s={r:a[0],s:a[1]}}else{let t=Jy.AsnParser.parse((0,Eb.hexStringToUint8)(e),WB.Signature);s={r:BigInt(t.r).toString(16).padStart(64,"0"),s:BigInt(t.s).toString(16).padStart(64,"0")}}return n.verify(r,s)}verifyHexStringWithEthereum(t,e){let r="0x"+t;let i=sr.keccak256((0,Eb.stringToArray)(this.ethereumPrefix+r.length+r));let s=n.keyFromPublic(this.getPublicKeyAsHexStr(),"hex");var a=e.match(/([a-f\d]{64})/gi);let o={r:a[0],s:a[1]};return s.verify(i,o)}signRawBytesWithEthereum(t){let e=dC.ethers.utils.keccak256(t).substring(2);(0,Eb.logger)(Ab.DEBUGLEVEL.HIGH,`signRawBytesWithEthereum: key: ${this.getAddress()}, hash: ${e}`);if(!this.getPrivateAsHexString()){throw new Error("Cant sign. This is only public key.")}let r=n.keyFromPrivate(this.getPrivateAsHexString(),"hex");let i=r.sign((0,Eb.hexStringToUint8)(e));return(0,Eb.ecSignatureToSRVhex)(i,r)}verifyBytesWithEthereum(t,e){if(!t||!t.length){throw new Error("Missing data to verify")}if(!e){throw new Error("Missing signature to verify")}let r=(0,Eb.hexStringToArray)(dC.ethers.utils.keccak256(t));let i=n.keyFromPublic(this.getPublicKeyAsHexStr(),"hex");(0,Eb.logger)(Ab.DEBUGLEVEL.HIGH,`verifyBytesWithEthereum: key: ${this.getAddress()}, hash: ${(0,Eb.uint8tohex)(new Uint8Array(r))}`);e=(0,Eb.uint8tohex)(a.anySignatureToRawUint8(e));var s=e.match(/([a-f\d]{64})/gi);let o={r:s[0],s:s[1]};console.log(dC.ethers.utils.recoverPublicKey(r,dC.ethers.utils.splitSignature((0,Eb.hexStringToUint8)(e))));return i.verify(r,o)}getJWTParams(){let t=i[this.algorithm];if(!t){let t=`Cant create subtleCrypto key for curve '${this.algorithm}'`;(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,t);throw new Error(t)}let e=this.getPublicKeyAsHexStr();return{crv:t,d:(0,Eb.uint8arrayToBase64)(this.getPrivateAsUint8()),key_ops:["sign"],kty:"EC",x:(0,Eb.uint8arrayToBase64)((0,Eb.hexStringToUint8)(e.substr(2,64))),y:(0,Eb.uint8arrayToBase64)((0,Eb.hexStringToUint8)(e.substr(66,64)))}}getSubtlePrivateKey(){let t=i[this.algorithm];return e.subtle.importKey("jwk",this.getJWTParams(),{name:"ECDSA",namedCurve:t},true,["sign"])}getSubtlePublicKey(){let t=i[this.algorithm];let r=this.getJWTParams();delete r.d;r.key_ops=["verify"];return e.subtle.importKey("jwk",r,{name:"ECDSA",namedCurve:t},true,["verify"])}async signStringWithSubtle(t){return await e.subtle.sign({name:"ECDSA",hash:{name:"SHA-256"}},await this.getSubtlePrivateKey(),Uint8Array.from((0,Eb.stringToArray)(t)))}async verifyStringWithSubtle(t,r){(0,Eb.logger)(Ab.DEBUGLEVEL.VERBOSE,"pubkey: "+this.getPublicKeyAsHexStr()+" msg:"+r+" signature:"+(0,Eb.uint8tohex)(t));(0,Eb.logger)(Ab.DEBUGLEVEL.VERBOSE,await this.getSubtlePublicKey());return await e.subtle.verify({name:"ECDSA",hash:{name:"SHA-256"}},await this.getSubtlePublicKey(),t,Uint8Array.from((0,Eb.stringToArray)(r)))}async verifyStringWithSubtleDerSignature(t,e){let r=Jy.AsnParser.parse(t,WB.Signature);const n=BigInt(r.r).toString(16).padStart(64,"0")+BigInt(r.s).toString(16).padStart(64,"0");return this.verifyStringWithSubtle((0,Eb.hexStringToUint8)(n),e)}static anySignatureToRawUint8(t){let e;if(typeof t=="string"){e=(0,Eb.hexStringToUint8)(t)}else{e=t}if(!e||!e.length){throw new Error("Empty signature received")}let r;switch(e.length){case 64:(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,`anySignatureToRawUint8 received 64 bytes signature (without v value) = ${(0,Eb.uint8tohex)(e)}`);case 65:r=e;break;case 66:if(e[0]!=4){throw new Error(`Cant recognize signature: ${(0,Eb.uint8tohex)(e)}`)}r=e.slice(1,65);break;case 70:case 71:case 72:let t=Jy.AsnParser.parse(e,WB.Signature);r=(0,Eb.hexStringToUint8)(BigInt(t.r).toString(16).padStart(64,"0")+BigInt(t.s).toString(16).padStart(64,"0"));break;default:let n="wrong Signature: "+(0,Eb.uint8tohex)(e);throw new Error(n)}(0,Eb.logger)(Ab.DEBUGLEVEL.VERBOSE,"ready signature:"+(0,Eb.uint8tohex)(r));return r}static parseKeyArrayStrings(t){const e={};for(let r in t){if(typeof t[r]==="string"){const n=t[r].split("|");const i=[];for(const t of n){i.push(a.publicFromBase64orPEM(t))}e[r]=i}else{if(Array.isArray(e)){e[r]=t[r]}else{e[r]=t[r]}}}return e}}e.KeyPair=a}));var bC=t((function(t,e){Object.defineProperty(e,"__esModule",{value:true});e.AttestableObject=void 0;class r{constructor(){}getDerEncoding(){return this.encoded}getCommitment(){return this.commitment}}e.AttestableObject=r}));var pC=t((function(t,r){var n=e&&e.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")s=Reflect.decorate(t,e,r,n);else for(var o=t.length-1;o>=0;o--)if(a=t[o])s=(i<3?a(s):i>3?a(e,r,s):a(e,r))||s;return i>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(r,"__esModule",{value:true});r.SignedDevconTicket=r.DevconTicket=void 0;class i{}n([(0,Jy.AsnProp)({type:Jy.AsnPropTypes.Utf8String})],i.prototype,"devconId",void 0);n([(0,Jy.AsnProp)({type:Jy.AsnPropTypes.Integer,optional:true})],i.prototype,"ticketIdNumber",void 0);n([(0,Jy.AsnProp)({type:Jy.AsnPropTypes.Utf8String,optional:true})],i.prototype,"ticketIdString",void 0);n([(0,Jy.AsnProp)({type:Jy.AsnPropTypes.Integer})],i.prototype,"ticketClass",void 0);n([(0,Jy.AsnProp)({type:Jy.AsnPropTypes.OctetString,optional:true})],i.prototype,"commitment",void 0);r.DevconTicket=i;class s{}n([(0,Jy.AsnProp)({type:i})],s.prototype,"ticket",void 0);n([(0,Jy.AsnProp)({type:Jy.AsnPropTypes.OctetString,optional:true})],s.prototype,"commitment",void 0);n([(0,Jy.AsnProp)({type:Jy.AsnPropTypes.BitString})],s.prototype,"signatureValue",void 0);r.SignedDevconTicket=s}));var gC=t((function(t,e){Object.defineProperty(e,"__esModule",{value:true});e.Ticket=void 0;class r extends bC.AttestableObject{constructor(){super();this.magicLinkURLPrefix="https://ticket.devcon.org/";this.isLegasy=false}fromData(t,e,r,n){this.ticketId=e;this.ticketClass=r;this.devconId=t;this.keys=n;const i=n[t];this.setKeys(i)}setKeys(t){if(Array.isArray(t)){this.issuerKeys=t;this.key=t[0]}else{this.issuerKeys=[t];this.key=t}}createWithCommitment(t,e,r,n,i,s){this.fromData(t,e,r,s);this.commitment=n;this.signature=i;this.encoded=this.encodeSignedTicket(this.makeTicket());if(!this.verify()){throw new Error("Ticket Signature is invalid")}}static createWithMail(t,e,r,n,i,s){let a=new this;a.fromData(e,r,n,i);let o=new GB.AttestationCrypto;let f;try{a.commitment=o.makeCommitment(t,o.getType("mail"),s);let e=a.makeTicket();f=a.key.signRawBytesWithEthereum((0,Eb.hexStringToArray)(e))}catch(t){throw new Error(t)}a.createWithCommitment(e,r,n,a.commitment,f,i);return a}makeTicket(){let t;try{const e=BigInt(this.ticketId);t=LB.Asn1Der.encode("INTEGER",e)}catch(e){t=LB.Asn1Der.encode("UTF8STRING",this.ticketId)}let e=LB.Asn1Der.encode("UTF8STRING",this.devconId)+t+LB.Asn1Der.encode("INTEGER",this.ticketClass);if(!this.isLegasy){e+=LB.Asn1Der.encode("OCTET_STRING",(0,Eb.uint8tohex)(this.commitment))}return LB.Asn1Der.encode("SEQUENCE_30",e)}encodeSignedTicket(t){if(this.isLegasy){t+=LB.Asn1Der.encode("OCTET_STRING",(0,Eb.uint8tohex)(this.commitment))}t+=LB.Asn1Der.encode("BIT_STRING",this.signature);return LB.Asn1Der.encode("SEQUENCE_30",t)}getDerEncodingWithPK(){let t=this.makeTicket();let e=t+LB.Asn1Der.encode("OCTET_STRING",(0,Eb.uint8tohex)(this.commitment))+this.key.getAsnDerPublic()+LB.Asn1Der.encode("BIT_STRING",this.signature);return LB.Asn1Der.encode("SEQUENCE_30",e)}getDerEncoding(){return this.encoded}verify(){const t=(0,Eb.hexStringToArray)(this.makeTicket());const e=(0,Eb.hexStringToArray)(dC.ethers.utils.keccak256(t));const r=(0,Eb.uint8tohex)(vC.KeyPair.anySignatureToRawUint8(this.signature));for(const t of this.issuerKeys){const n=dC.ethers.utils.recoverPublicKey(e,dC.ethers.utils.splitSignature((0,Eb.hexStringToUint8)(r)));if(n.substring(2)===t.getPublicKeyAsHexStr())return true}throw new Error("Ticket signature is invalid")}checkValidity(){return true}getTicketId(){return this.ticketId}getTicketClass(){return this.ticketClass}getDevconId(){return this.devconId}getSignature(){return this.signature}static fromBase64(t,e){let r=new this;r.fromBytes((0,Eb.base64ToUint8array)(t),e);return r}fromBytes(t,e){const r=Jy.AsnParser.parse(t,pC.SignedDevconTicket);let n=r.ticket.devconId;if(!e||!e[n]){throw new Error("Issuer key "+n+" not defined.")}const i=e[n];this.setKeys(i);let s=r.ticket.ticketIdNumber;let a=s?s.toString():r.ticket.ticketIdString;let o=r.ticket.ticketClass;let f;if(r.ticket.commitment){f=r.ticket.commitment}else{f=r.commitment;this.isLegasy=true}let c=r.signatureValue;this.createWithCommitment(n,a,o,new Uint8Array(f),(0,Eb.uint8tohex)(new Uint8Array(c)),e)}getCommitment(){return this.commitment}getKey(){return this.key}getUrlEncoding(){}}e.Ticket=r}));var yC=t((function(t,e){Object.defineProperty(e,"__esModule",{value:true});e.Timestamp=void 0;class r{constructor(t=null){this.ALLOWED_ROUNDING=1e4;this.validity=0;if(!t)this.time=Date.now();if(typeof t==="number"){this.time=t}if(typeof t==="string"){this.time=r.stringTimestampToLong(t)}this.time=this.time-this.time%1e3}fromString(t){this.time=r.stringTimestampToLong(t)}getValidity(){return this.validity}setValidity(t){this.validity=t}getTime(){return this.time}getTimeAsString(){let t=new Date(this.time).toString();return t.substr(0,t.indexOf("(")-1)}validateTimestamp(){let t=this.getCurrentTime();if(this.time>t+this.ALLOWED_ROUNDING){return false}if(this.time+this.ALLOWED_ROUNDING+this.validity<t){return false}return true}validateAgainstExpiration(t){let e=this.getCurrentTime();if(this.time>e+this.ALLOWED_ROUNDING){(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,"Object still not valid. Details: not valid before = "+this.time+", currentTime = "+e);return false}if(t<e-this.ALLOWED_ROUNDING){(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,"Object is not longer valid. Details: attNotAfter = "+t+", currentTime = "+e);return false}if(t-this.time>this.validity+this.ALLOWED_ROUNDING){(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,t+"\n"+this.time+"\n"+this.validity+"\n"+this.ALLOWED_ROUNDING+"\n"+(t-this.time)+"\n"+(this.validity+this.ALLOWED_ROUNDING)+"\n");return false}return true}static stringTimestampToLong(t){return Date.parse(t)}getCurrentTime(){return Date.now()}}e.Timestamp=r;r.TIMESTAMP_FORMAT="EEE MMM d yyyy HH:mm:ss 'GMT'Z";r.ALLOWED_ROUNDING=1e4;r.UNLIMITED=0xe677d1e8e998;r.DEFAULT_TOKEN_TIME_LIMIT=1e3*60*60*24*365;r.DEFAULT_TIME_LIMIT_MS=1e3*60*20}));var wC=t((function(t,e){Object.defineProperty(e,"__esModule",{value:true});e.Attestation=void 0;class r{constructor(){this.version=18;this.blockchainFriendly=true}parseNames(t){let e={};Object.keys(LB.X500NamesLabels).forEach((t=>{e[LB.X500NamesLabels[t].toLowerCase()]=t}));let r=[];t.forEach((t=>{let n=e[t.type.toString().toLowerCase()];if(!n)throw new Error(`X500 with name ${t.type.toString()} not implemented yet.`);r.push(`${n}="${t.value}"`)}));return r.join(",")}fromBytes(t){const e=this;let r=Jy.AsnParser.parse(t,zB.SignedInfo);e.signedInfo=t;e.version=r.version.version;e.serialNumber=r.serialNumber;e.signingAlgorithm=r.signature.algorithm.toString();if(r.validity){e.notValidBefore=r.validity.notBefore.generalizedTime.getTime();e.notValidAfter=r.validity.notAfter.generalizedTime.getTime();if(r.validity.notAfterInt&&Number(r.validity.notAfterInt)!=Math.floor(e.notValidAfter/1e3)||r.validity.notBeforeInt&&Number(r.validity.notBeforeInt)!=Math.floor(e.notValidBefore/1e3)){throw new Error("Date doesnt fit")}if(typeof r.validity.notBeforeInt==="undefined"||typeof r.validity.notAfterInt==="undefined"){this.blockchainFriendly=false}else{this.blockchainFriendly=true}}let n=r.subject.rdnSequence;e.subject="";if(n&&n[0]&&n[0].length){e.subject=this.parseNames(n[0])}e.subjectKey=vC.KeyPair.publicFromSubjectPublicKeyInfo(r.subjectPublicKeyInfo);let i=r.issuer.rdnSequence;e.issuer="";if(i.length){e.issuer=this.parseNames(i[0])}if(r.contract){e.smartcontracts=r.contract}if(r.attestsTo&&r.attestsTo.extensions){e.extensions=r.attestsTo.extensions;e.commitment=new Uint8Array(e.extensions.extension.extnValue)}else if(r.attestsTo&&r.attestsTo.dataObject){throw new Error("Implement parse dataObject")}}isValidX509(){if(this.version!=0&&this.version!=1&&this.version!=2){(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,"Incorrect version number");return false}if(!this.issuer){(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,"Issuer info not set");return false}if(this.notValidBefore==null||this.notValidAfter==null){(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,"Validity period not set");return false}if(this.subject==null){(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,"Subject info not set");return false}if(!this.subjectKey){(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,"No subject public key info set");return false}if(this.smartcontracts!=null){(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,"Smart contract info set");return false}if(this.dataObject!=null){(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,"Data object set");return false}if(this.version==null||this.serialNumber==null||this.signingAlgorithm==null){(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,"Version, serial number, subject or algorithm missing");return false}return true}getDerEncoding(){if(!this.signedInfo){this.signedInfo=this.getPrehash()}if(!this.signedInfo){throw new Error("Empty Attestaion Der Encoding")}return(0,Eb.uint8tohex)(new Uint8Array(this.signedInfo))}getCommitment(){return this.commitment}getNotValidBefore(){return this.notValidBefore}setNotValidBefore(t){this.notValidBefore=t}getNotValidAfter(){return this.notValidAfter}setNotValidAfter(t){this.notValidAfter=t}getSubjectPublicKeyInfo(){return this.subjectKey}checkValidity(){if(this.version==null){(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,"Attest version missed");return false}if(this.serialNumber==null){(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,"Attest serial number missed");return false}if(this.subject==null){(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,"Attest subject missed");return false}if(this.signingAlgorithm==null){(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,"Attest signing algorithm missed");return false}let t=this.getNotValidBefore();let e=this.getNotValidAfter();let r=new yC.Timestamp(t);r.setValidity(e-t);if(!r.validateAgainstExpiration(e)){return false}if(this.extensions!=null&&this.dataObject!=null){(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,"Both Extensions and dataObject not allowed");return false}return true}getExtensions(){return this.extensions}setVersion(t){this.version=t}getVersion(){return this.version}setSubject(t){this.subject=t}getSubject(){return this.subject}setSigningAlgorithm(t){this.signingAlgorithm=t}getPrehash(){if(!this.checkValidity()){return null}let t=LB.Asn1Der.encode("TAG",LB.Asn1Der.encode("INTEGER",this.version),0)+LB.Asn1Der.encode("INTEGER",this.serialNumber)+LB.Asn1Der.encodeObjectId(this.signingAlgorithm);t+=this.issuer?LB.Asn1Der.encodeName(this.issuer):LB.Asn1Der.encode("NULL_VALUE","");if(this.notValidAfter!=null&&this.notValidBefore!=null){let e=LB.Asn1Der.encode("GENERALIZED_TIME",this.notValidBefore)+(this.blockchainFriendly?LB.Asn1Der.encode("INTEGER",Math.floor(this.notValidBefore/1e3)):"")+LB.Asn1Der.encode("GENERALIZED_TIME",this.notValidAfter)+(this.blockchainFriendly?LB.Asn1Der.encode("INTEGER",Math.floor(this.notValidAfter/1e3)):"");t+=LB.Asn1Der.encode("SEQUENCE_30",e)}else{t+=LB.Asn1Der.encode("NULL_VALUE","")}t+=this.subject?LB.Asn1Der.encodeName(this.subject):LB.Asn1Der.encode("NULL_VALUE","");t+=this.subjectKey?this.subjectKey.getAsnDerPublic():LB.Asn1Der.encode("NULL_VALUE","");if(this.smartcontracts!=null){t+=this.smartcontracts}if(this.extensions!=null){t+=LB.Asn1Der.encode("TAG",LB.Asn1Der.encode("SEQUENCE_30",LB.Asn1Der.encode("SEQUENCE_30",this.extensions)),3)}if(this.dataObject!=null){t+=LB.Asn1Der.encode("TAG",LB.Asn1Der.encode("SEQUENCE_30",LB.Asn1Der.encode("SEQUENCE_30",this.dataObject)),4)}return(0,Eb.hexStringToUint8)(LB.Asn1Der.encode("SEQUENCE_30",t))}getSigningAlgorithm(){return this.signingAlgorithm}}e.Attestation=r;r.OID_OCTETSTRING="1.3.6.1.4.1.1466.115.121.1.40"}));var mC=t((function(t,e){Object.defineProperty(e,"__esModule",{value:true});e.IdentifierAttestation=void 0;class r extends wC.Attestation{constructor(){super()}fromCommitment(t,e){this.subjectKey=e;this.setVersion(r.HIDDEN_IDENTIFIER_VERSION);this.setSubject("CN=");this.setSigningAlgorithm(r.DEFAULT_SIGNING_ALGORITHM);this.setSubjectPublicKeyInfo(e);this.setCommitment(t);this.type=r.HIDDEN_TYPE;this.identifier=r.HIDDEN_IDENTIFIER;this.setUnlimitedValidity()}setUnlimitedValidity(){super.setNotValidBefore(Date.now());super.setNotValidAfter(Date.parse("31 Dec 9999 23:59:59"))}static fromData(t,e,r,n){let i=new GB.AttestationCrypto;let s=i.makeCommitment(t,e,n);let a=new this;a.fromCommitment(s,r);a.type=e.toString();a.identifier=t;return a}static fromLabelAndUrl(t,e,n){let i=new this;i.subjectKey=n;i.setVersion(r.NFT_VERSION);i.setSubject(i.makeLabeledURI(t,e));i.setSigningAlgorithm(r.DEFAULT_SIGNING_ALGORITHM);i.setIssuer("CN=attestation.id");i.setSerialNumber(1);i.setSubjectPublicKeyInfo(n);i.setUnlimitedValidity();i.type=t;i.identifier=e;return i}makeLabeledURI(t,e){return`${r.LABELED_URI_LABEL}="${e} ${t}"`}static fromBytes(t){let e=new this;e.fromBytes(t);if(!e.checkValidity()){throw new Error("Could not validate object")}if(e.getVersion()==r.NFT_VERSION){let t=LB.Asn1Der.parseX500Names(e.getSubject());let n=false;t.forEach((t=>{if(n)return;if(t.type==r.LABELED_URI_LABEL){n=true;let r=t.value.split(" ");if(r.length!=2){throw new Error("LabeledURI values should be separated with space and 2 items only: "+t.value)}e.type=r[0];e.identifier=r[1]}}));if(!n){throw new Error("Cant find LABELED_URI")}}else{e.type=r.HIDDEN_TYPE;e.identifier=r.HIDDEN_IDENTIFIER}return e}setSubjectPublicKeyInfo(t){this.subjectKey=t}setCommitment(t){this.commitment=t}checkValidity(){if(!super.checkValidity()){(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,"IdentifierAttestation super.checkValidity() filed;");return false}if(this.getVersion()!=r.HIDDEN_IDENTIFIER_VERSION&&this.getVersion()!=r.NFT_VERSION){(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,"The version number is "+this.getVersion()+", it must be either "+r.HIDDEN_IDENTIFIER_VERSION+" or "+r.NFT_VERSION);return false}if(this.getSigningAlgorithm()!==r.DEFAULT_SIGNING_ALGORITHM){(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,"The subject is supposed to only be an Ethereum address as the Common Name");return false}if(this.getVersion()==r.NFT_VERSION){if(!this.subject.includes(r.LABELED_URI_LABEL+"=")){(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,"A NFT Identifier attestation must have a labeled uri as subject. subject = "+this.getSubject());return false}}if(this.getVersion()==r.HIDDEN_IDENTIFIER_VERSION){if(this.getCommitment().length<GB.AttestationCrypto.BYTES_IN_DIGEST){(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,"The attestation does not contain a valid commitment");return false}}return true}setIssuer(t){this.issuer=t}getSerialNumber(){return this.serialNumber}setSerialNumber(t){this.serialNumber=t}getAddress(){return this.subjectKey.getAddress()}}e.IdentifierAttestation=r;r.OID_OCTETSTRING="1.3.6.1.4.1.1466.115.121.1.40";r.DEFAULT_SIGNING_ALGORITHM="1.2.840.10045.4.2";r.HIDDEN_IDENTIFIER_VERSION=18;r.NFT_VERSION=19;r.HIDDEN_TYPE="HiddenType";r.HIDDEN_IDENTIFIER="HiddenIdentifier";r.LABELED_URI="1.3.6.1.4.1.250.1.57";r.LABELED_URI_LABEL="labeledURI"}));var AC=t((function(t,e){Object.defineProperty(e,"__esModule",{value:true});e.SignedIdentifierAttestation=void 0;class r{constructor(){}static fromBytes(t,e){const r=Jy.AsnParser.parse(t,zB.MyAttestation);return this.fromASNType(r,e,t)}static fromASNType(t,e,r=new Uint8Array(0)){let n=new this;n.uint8data=r;n.attestorKeys=e;let i=t.signatureAlgorithm.algorithm;n.att=mC.IdentifierAttestation.fromBytes(t.signedInfo);n.signature=(0,Eb.uint8tohex)(new Uint8Array(t.signatureValue));if(i!==n.att.getSigningAlgorithm()){throw new Error("Algorithm specified is not consistent")}n.constructorCheck();return n}static fromData(t,e){let r=new this;r.attestorKeys=e;r.att=t;r.signature=r.attestorKeys.signRawBytesWithEthereum(Array.from(r.att.getPrehash()));r.constructorCheck();return r}verify(){try{let t=this.attestorKeys.verifyBytesWithEthereum((0,Eb.hexStringToArray)(this.att.getDerEncoding()),this.signature);return t}catch(t){(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,t);return false}}checkValidity(){return this.getUnsignedAttestation().checkValidity()}getUnsignedAttestation(){return this.att}getDerEncoding(){if(this.uint8data&&this.uint8data.length){return(0,Eb.uint8tohex)(new Uint8Array(this.uint8data))}else{return this.constructSignedAttestation(this.getUnsignedAttestation(),this.signature)}}constructSignedAttestation(t,e){let r=t.getPrehash();let n=LB.Asn1Der.encode("OBJECT_ID",t.getSigningAlgorithm());let i=(0,Eb.uint8tohex)(r)+LB.Asn1Der.encode("SEQUENCE_30",n)+LB.Asn1Der.encode("BIT_STRING",(0,Eb.uint8tohex)(vC.KeyPair.anySignatureToRawUint8(e)));return LB.Asn1Der.encode("SEQUENCE_30",i)}constructorCheck(){if(!this.verify()){throw new Error("The signature is not valid")}}}e.SignedIdentifierAttestation=r;r.ECDSA_WITH_SHA256="1.2.840.10045.4.3.2"}));var EC=t((function(t,e){Object.defineProperty(e,"__esModule",{value:true});e.AttestedObject=void 0;class r{constructor(){}create(t,e,r,n){this.attestableObject=t;this.att=e;this.attestationSecret=r;this.objectSecret=n;this.crypto=new GB.AttestationCrypto;this.pok=this.makeProof(r,n,this.crypto);this.derEncodedProof=this.pok.getDerEncoding();this.fillPresignData()}setWebDomain(t){this.webDomain=t}fillPresignData(){this.preSignEncoded=this.attestableObject.getDerEncoding()+this.att.getDerEncoding()+this.pok.getDerEncoding();this.encoding=LB.Asn1Der.encode("SEQUENCE_30",this.preSignEncoded)}fromDecodedData(t,e,r){this.attestableObject=t;this.att=e;this.pok=r;this.fillPresignData();this.userKeyPair=this.att.getUnsignedAttestation().getSubjectPublicKeyInfo();this.constructorCheck()}verify(){if(!this.attestableObject.verify()){(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,"Could not verify attestable object");return false}if(!this.att.verify()){(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,"Could not verify attestation");return false}if(!this.crypto.verifyEqualityProof(this.att.getUnsignedAttestation().getCommitment(),this.attestableObject.getCommitment(),this.pok)){(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,"Could not verify the consistency between the commitment in the attestation and the attested object");return false}return true}static fromBytes(t,e,r,n,i){let s=Jy.AsnParser.parse(t,e);let a=new this;a.attestableObject=new n;a.attestableObject.fromBytes(s.signedToken,i);a.att=AC.SignedIdentifierAttestation.fromBytes(new Uint8Array(s.attestation),r);let o=new QB.UsageProofOfExponent;o.fromBytes(new Uint8Array(s.proof));a.pok=o;a.userKeyPair=a.att.getUnsignedAttestation().getSubjectPublicKeyInfo();a.crypto=new GB.AttestationCrypto;a.constructorCheck();return a}makeProof(t,e,r){let n=this.att.getUnsignedAttestation().getCommitment();let i=this.attestableObject.getCommitment();let s=r.computeEqualityProof((0,Eb.uint8tohex)(n),(0,Eb.uint8tohex)(i),t,e);if(!r.verifyEqualityProof(n,i,s)){throw new Error("The redeem proof did not verify")}return s}getAttestableObject(){return this.attestableObject}getAtt(){return this.att}getDerEncodeProof(){return this.derEncodedProof}getDerEncoding(){return this.encoding}constructorCheck(){if(!this.verify()){throw new Error("The redeem request is not valid")}}checkValidity(t=null){try{let t=this.att.getUnsignedAttestation().getDerEncoding();let e=mC.IdentifierAttestation.fromBytes(new Uint8Array((0,Eb.hexStringToArray)(t)));if(!e.checkValidity()){(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,"The attestation is not a valid standard attestation");return false}}catch(t){(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,"The attestation is invalid");return false}try{if(!this.getAttestableObject().checkValidity()){(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,"Cheque is not valid");return false}}catch(t){(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,"Cheque validation failed");return false}if(t===null)return true;try{let e=this.getAtt().getUnsignedAttestation().getAddress();(0,Eb.logger)(Ab.DEBUGLEVEL.HIGH,"attestationEthereumAddress: "+e);(0,Eb.logger)(Ab.DEBUGLEVEL.HIGH,"providedEthereumAddress: "+t);if(e.toLowerCase()!==t.toLowerCase()){(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,"The attestation is not to the same Ethereum user who is sending this request");return false}}catch(t){(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,"Address validation failed");(0,Eb.logger)(Ab.DEBUGLEVEL.MEDIUM,t);return false}return true}}e.AttestedObject=r;r.Eip712UserData={payload:"",description:"",timestamp:0};r.Eip712UserDataTypes=[{name:"payload",type:"string"},{name:"description",type:"string"},{name:"timestamp",type:"uint256"}];r.Eip712UserDataPrimaryName="Authentication";r.Eip712UserDataDescription="Single-use authentication"}));var kC=t((function(t,r){var n=e&&e.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")s=Reflect.decorate(t,e,r,n);else for(var o=t.length-1;o>=0;o--)if(a=t[o])s=(i<3?a(s):i>3?a(e,r,s):a(e,r))||s;return i>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(r,"__esModule",{value:true});r.Identifier=void 0;class i{}n([(0,Jy.AsnProp)({type:Jy.AsnPropTypes.Integer})],i.prototype,"type",void 0);n([(0,Jy.AsnProp)({type:zy.Proof})],i.prototype,"proof",void 0);r.Identifier=i}));var MC=t((function(t,e){Object.defineProperty(e,"__esModule",{value:true});e.AttestationRequest=void 0;class r{constructor(){}static fromData(t,e){let r=new this;r.type=t;r.pok=e;if(!r.verify()){throw new Error("The proof is not valid")}return r}getDerEncoding(){let t=LB.Asn1Der.encode("INTEGER",this.type)+this.pok.getDerEncoding();return LB.Asn1Der.encode("SEQUENCE_30",t)}static fromBytes(t){let e=new this;let r;try{r=Jy.AsnParser.parse(t,kC.Identifier);e.type=r.type}catch(t){throw new Error("Cant parse AttestationRequest Identifier")}try{let t=new Uint8Array(r.proof.riddle);let n=new Uint8Array(r.proof.challengePoint);let i=new Uint8Array(r.proof.responseValue);let s=new Uint8Array(r.proof.nonce);let a=kb.Point.decodeFromHex((0,Eb.uint8tohex)(t),kb.CURVE_BN256);let o=(0,Eb.uint8ToBn)(n);let f=kb.Point.decodeFromHex((0,Eb.uint8tohex)(i),kb.CURVE_BN256);e.pok=HB.FullProofOfExponent.fromData(a,f,o,s)}catch(t){throw new Error("Cant create FullProofOfExponent")}if(!e.verify()){throw new Error("Could not verify the proof")}(0,Eb.logger)(Ab.DEBUGLEVEL.HIGH,"proof OK");return e}verify(){let t=new GB.AttestationCrypto;if(!t.verifyFullProof(this.pok)){return false}(0,Eb.logger)(Ab.DEBUGLEVEL.HIGH,"VerifyAttestationRequestProof OK");return true}getPok(){return this.pok}getType(){return this.type}getAsn(){const t=this.getPok().getAsnType();const e=new kC.Identifier;e.type=this.getType();e.proof=t;return e}getAsnEncoded(){return Jy.AsnSerializer.serialize(this.getAsn())}}e.AttestationRequest=r}));const BC=n(fs);const SC=n(Tr);const CC=n(Vn);const xC=n($c);const PC=n(Qt);const IC=n($i);const TC=n(ju);const OC=n(wh);const DC=n(or);const NC=n(gt);const UC=n(ou);const jC=n(Bv);const RC=n(Ju);const FC=n(Ce);const LC=n(gr);const QC=n(sc);const HC=n(jn);const GC=n(xc);const KC=n(Nv);const JC=n(xh);const zC=n(_h);var WC=t((function(t,r){var n=e&&e.__createBinding||(Object.create?function(t,e,r,n){if(n===undefined)n=r;Object.defineProperty(t,n,{enumerable:true,get:function(){return e[r]}})}:function(t,e,r,n){if(n===undefined)n=r;t[n]=e[r]});var i=e&&e.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:true,value:e})}:function(t,e){t["default"]=e});var s=e&&e.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)if(r!=="default"&&Object.prototype.hasOwnProperty.call(t,r))n(e,t,r);i(e,t);return e};Object.defineProperty(r,"__esModule",{value:true});r.formatBytes32String=r.Utf8ErrorFuncs=r.toUtf8String=r.toUtf8CodePoints=r.toUtf8Bytes=r._toEscapedUtf8String=r.nameprep=r.hexDataSlice=r.hexDataLength=r.hexZeroPad=r.hexValue=r.hexStripZeros=r.hexConcat=r.isHexString=r.hexlify=r.base64=r.base58=r.TransactionDescription=r.LogDescription=r.Interface=r.SigningKey=r.HDNode=r.defaultPath=r.isBytesLike=r.isBytes=r.zeroPad=r.stripZeros=r.concat=r.arrayify=r.shallowCopy=r.resolveProperties=r.getStatic=r.defineReadOnly=r.deepCopy=r.checkProperties=r.poll=r.fetchJson=r._fetchData=r.RLP=r.Logger=r.checkResultErrors=r.FormatTypes=r.ParamType=r.FunctionFragment=r.EventFragment=r.ErrorFragment=r.ConstructorFragment=r.Fragment=r.defaultAbiCoder=r.AbiCoder=void 0;r.Indexed=r.Utf8ErrorReason=r.UnicodeNormalizationForm=r.SupportedAlgorithm=r.mnemonicToSeed=r.isValidMnemonic=r.entropyToMnemonic=r.mnemonicToEntropy=r.getAccountPath=r.verifyTypedData=r.verifyMessage=r.recoverPublicKey=r.computePublicKey=r.recoverAddress=r.computeAddress=r.getJsonWalletAddress=r.TransactionTypes=r.serializeTransaction=r.parseTransaction=r.accessListify=r.joinSignature=r.splitSignature=r.soliditySha256=r.solidityKeccak256=r.solidityPack=r.shuffled=r.randomBytes=r.sha512=r.sha256=r.ripemd160=r.keccak256=r.computeHmac=r.commify=r.parseUnits=r.formatUnits=r.parseEther=r.formatEther=r.isAddress=r.getCreate2Address=r.getContractAddress=r.getIcapAddress=r.getAddress=r._TypedDataEncoder=r.id=r.isValidName=r.namehash=r.hashMessage=r.dnsEncode=r.parseBytes32String=void 0;Object.defineProperty(r,"AbiCoder",{enumerable:true,get:function(){return BC.AbiCoder}});Object.defineProperty(r,"checkResultErrors",{enumerable:true,get:function(){return BC.checkResultErrors}});Object.defineProperty(r,"ConstructorFragment",{enumerable:true,get:function(){return BC.ConstructorFragment}});Object.defineProperty(r,"defaultAbiCoder",{enumerable:true,get:function(){return BC.defaultAbiCoder}});Object.defineProperty(r,"ErrorFragment",{enumerable:true,get:function(){return BC.ErrorFragment}});Object.defineProperty(r,"EventFragment",{enumerable:true,get:function(){return BC.EventFragment}});Object.defineProperty(r,"FormatTypes",{enumerable:true,get:function(){return BC.FormatTypes}});Object.defineProperty(r,"Fragment",{enumerable:true,get:function(){return BC.Fragment}});Object.defineProperty(r,"FunctionFragment",{enumerable:true,get:function(){return BC.FunctionFragment}});Object.defineProperty(r,"Indexed",{enumerable:true,get:function(){return BC.Indexed}});Object.defineProperty(r,"Interface",{enumerable:true,get:function(){return BC.Interface}});Object.defineProperty(r,"LogDescription",{enumerable:true,get:function(){return BC.LogDescription}});Object.defineProperty(r,"ParamType",{enumerable:true,get:function(){return BC.ParamType}});Object.defineProperty(r,"TransactionDescription",{enumerable:true,get:function(){return BC.TransactionDescription}});Object.defineProperty(r,"getAddress",{enumerable:true,get:function(){return SC.getAddress}});Object.defineProperty(r,"getCreate2Address",{enumerable:true,get:function(){return SC.getCreate2Address}});Object.defineProperty(r,"getContractAddress",{enumerable:true,get:function(){return SC.getContractAddress}});Object.defineProperty(r,"getIcapAddress",{enumerable:true,get:function(){return SC.getIcapAddress}});Object.defineProperty(r,"isAddress",{enumerable:true,get:function(){return SC.isAddress}});var a=s(CC);r.base64=a;Object.defineProperty(r,"base58",{enumerable:true,get:function(){return xC.Base58}});Object.defineProperty(r,"arrayify",{enumerable:true,get:function(){return PC.arrayify}});Object.defineProperty(r,"concat",{enumerable:true,get:function(){return PC.concat}});Object.defineProperty(r,"hexConcat",{enumerable:true,get:function(){return PC.hexConcat}});Object.defineProperty(r,"hexDataSlice",{enumerable:true,get:function(){return PC.hexDataSlice}});Object.defineProperty(r,"hexDataLength",{enumerable:true,get:function(){return PC.hexDataLength}});Object.defineProperty(r,"hexlify",{enumerable:true,get:function(){return PC.hexlify}});Object.defineProperty(r,"hexStripZeros",{enumerable:true,get:function(){return PC.hexStripZeros}});Object.defineProperty(r,"hexValue",{enumerable:true,get:function(){return PC.hexValue}});Object.defineProperty(r,"hexZeroPad",{enumerable:true,get:function(){return PC.hexZeroPad}});Object.defineProperty(r,"isBytes",{enumerable:true,get:function(){return PC.isBytes}});Object.defineProperty(r,"isBytesLike",{enumerable:true,get:function(){return PC.isBytesLike}});Object.defineProperty(r,"isHexString",{enumerable:true,get:function(){return PC.isHexString}});Object.defineProperty(r,"joinSignature",{enumerable:true,get:function(){return PC.joinSignature}});Object.defineProperty(r,"zeroPad",{enumerable:true,get:function(){return PC.zeroPad}});Object.defineProperty(r,"splitSignature",{enumerable:true,get:function(){return PC.splitSignature}});Object.defineProperty(r,"stripZeros",{enumerable:true,get:function(){return PC.stripZeros}});Object.defineProperty(r,"_TypedDataEncoder",{enumerable:true,get:function(){return IC._TypedDataEncoder}});Object.defineProperty(r,"dnsEncode",{enumerable:true,get:function(){return IC.dnsEncode}});Object.defineProperty(r,"hashMessage",{enumerable:true,get:function(){return IC.hashMessage}});Object.defineProperty(r,"id",{enumerable:true,get:function(){return IC.id}});Object.defineProperty(r,"isValidName",{enumerable:true,get:function(){return IC.isValidName}});Object.defineProperty(r,"namehash",{enumerable:true,get:function(){return IC.namehash}});Object.defineProperty(r,"defaultPath",{enumerable:true,get:function(){return TC.defaultPath}});Object.defineProperty(r,"entropyToMnemonic",{enumerable:true,get:function(){return TC.entropyToMnemonic}});Object.defineProperty(r,"getAccountPath",{enumerable:true,get:function(){return TC.getAccountPath}});Object.defineProperty(r,"HDNode",{enumerable:true,get:function(){return TC.HDNode}});Object.defineProperty(r,"isValidMnemonic",{enumerable:true,get:function(){return TC.isValidMnemonic}});Object.defineProperty(r,"mnemonicToEntropy",{enumerable:true,get:function(){return TC.mnemonicToEntropy}});Object.defineProperty(r,"mnemonicToSeed",{enumerable:true,get:function(){return TC.mnemonicToSeed}});Object.defineProperty(r,"getJsonWalletAddress",{enumerable:true,get:function(){return OC.getJsonWalletAddress}});Object.defineProperty(r,"keccak256",{enumerable:true,get:function(){return DC.keccak256}});Object.defineProperty(r,"Logger",{enumerable:true,get:function(){return NC.Logger}});Object.defineProperty(r,"computeHmac",{enumerable:true,get:function(){return UC.computeHmac}});Object.defineProperty(r,"ripemd160",{enumerable:true,get:function(){return UC.ripemd160}});Object.defineProperty(r,"sha256",{enumerable:true,get:function(){return UC.sha256}});Object.defineProperty(r,"sha512",{enumerable:true,get:function(){return UC.sha512}});Object.defineProperty(r,"solidityKeccak256",{enumerable:true,get:function(){return jC.keccak256}});Object.defineProperty(r,"solidityPack",{enumerable:true,get:function(){return jC.pack}});Object.defineProperty(r,"soliditySha256",{enumerable:true,get:function(){return jC.sha256}});Object.defineProperty(r,"randomBytes",{enumerable:true,get:function(){return RC.randomBytes}});Object.defineProperty(r,"shuffled",{enumerable:true,get:function(){return RC.shuffled}});Object.defineProperty(r,"checkProperties",{enumerable:true,get:function(){return FC.checkProperties}});Object.defineProperty(r,"deepCopy",{enumerable:true,get:function(){return FC.deepCopy}});Object.defineProperty(r,"defineReadOnly",{enumerable:true,get:function(){return FC.defineReadOnly}});Object.defineProperty(r,"getStatic",{enumerable:true,get:function(){return FC.getStatic}});Object.defineProperty(r,"resolveProperties",{enumerable:true,get:function(){return FC.resolveProperties}});Object.defineProperty(r,"shallowCopy",{enumerable:true,get:function(){return FC.shallowCopy}});var o=s(LC);r.RLP=o;Object.defineProperty(r,"computePublicKey",{enumerable:true,get:function(){return QC.computePublicKey}});Object.defineProperty(r,"recoverPublicKey",{enumerable:true,get:function(){return QC.recoverPublicKey}});Object.defineProperty(r,"SigningKey",{enumerable:true,get:function(){return QC.SigningKey}});Object.defineProperty(r,"formatBytes32String",{enumerable:true,get:function(){return HC.formatBytes32String}});Object.defineProperty(r,"nameprep",{enumerable:true,get:function(){return HC.nameprep}});Object.defineProperty(r,"parseBytes32String",{enumerable:true,get:function(){return HC.parseBytes32String}});Object.defineProperty(r,"_toEscapedUtf8String",{enumerable:true,get:function(){return HC._toEscapedUtf8String}});Object.defineProperty(r,"toUtf8Bytes",{enumerable:true,get:function(){return HC.toUtf8Bytes}});Object.defineProperty(r,"toUtf8CodePoints",{enumerable:true,get:function(){return HC.toUtf8CodePoints}});Object.defineProperty(r,"toUtf8String",{enumerable:true,get:function(){return HC.toUtf8String}});Object.defineProperty(r,"Utf8ErrorFuncs",{enumerable:true,get:function(){return HC.Utf8ErrorFuncs}});Object.defineProperty(r,"accessListify",{enumerable:true,get:function(){return GC.accessListify}});Object.defineProperty(r,"computeAddress",{enumerable:true,get:function(){return GC.computeAddress}});Object.defineProperty(r,"parseTransaction",{enumerable:true,get:function(){return GC.parse}});Object.defineProperty(r,"recoverAddress",{enumerable:true,get:function(){return GC.recoverAddress}});Object.defineProperty(r,"serializeTransaction",{enumerable:true,get:function(){return GC.serialize}});Object.defineProperty(r,"TransactionTypes",{enumerable:true,get:function(){return GC.TransactionTypes}});Object.defineProperty(r,"commify",{enumerable:true,get:function(){return KC.commify}});Object.defineProperty(r,"formatEther",{enumerable:true,get:function(){return KC.formatEther}});Object.defineProperty(r,"parseEther",{enumerable:true,get:function(){return KC.parseEther}});Object.defineProperty(r,"formatUnits",{enumerable:true,get:function(){return KC.formatUnits}});Object.defineProperty(r,"parseUnits",{enumerable:true,get:function(){return KC.parseUnits}});Object.defineProperty(r,"verifyMessage",{enumerable:true,get:function(){return JC.verifyMessage}});Object.defineProperty(r,"verifyTypedData",{enumerable:true,get:function(){return JC.verifyTypedData}});Object.defineProperty(r,"_fetchData",{enumerable:true,get:function(){return zC._fetchData}});Object.defineProperty(r,"fetchJson",{enumerable:true,get:function(){return zC.fetchJson}});Object.defineProperty(r,"poll",{enumerable:true,get:function(){return zC.poll}});var f=UC;Object.defineProperty(r,"SupportedAlgorithm",{enumerable:true,get:function(){return f.SupportedAlgorithm}});var c=HC;Object.defineProperty(r,"UnicodeNormalizationForm",{enumerable:true,get:function(){return c.UnicodeNormalizationForm}});Object.defineProperty(r,"Utf8ErrorReason",{enumerable:true,get:function(){return c.Utf8ErrorReason}})}));var qC=t((function(t,e){Object.defineProperty(e,"__esModule",{value:true});e.SignatureUtility=void 0;let r=new lC.ec("secp256k1");class n{static sign(t,e){let n=r.keyFromPrivate(e.getPrivateAsHexString(),"hex");let i=sr.keccak256((0,Eb.hexStringToArray)(t));let s=n.sign(i);return s.toDER("hex")}static verify(t,e,r){return n.verifyArrayBuf((0,Eb.hexStringToArray)(t),e,r)}static verifyArrayBuf(t,e,n){let i=r.keyFromPublic(n.getPublicKeyAsHexStr(),"hex");let s=sr.keccak256(t);return i.verify(s,e)}static async signMessageWithBrowserWallet(t){await n.connectMetamaskAndGetAddress();let e=new dC.ethers.providers.Web3Provider(window.ethereum);let r=e.getSigner();return await r.signMessage(t)}static async recoverPublicKeyFromMessageSignature(t,e){const r=dC.ethers.utils.hashMessage(t);const n=dC.ethers.utils.arrayify(r);return await dC.ethers.utils.recoverPublicKey(n,e)}static recoverPublicKeyFromTypedMessageSignature(t,e){let r,n;try{let e=t.message.payload;t.message.payload=dC.ethers.utils.id(e).substr(2);let n=t.types;delete n.EIP712Domain;r=WC._TypedDataEncoder.hash(t.domain,n,t.message);t.message.payload=e}catch(t){const e="Cant sign data, possibly wrong format. "+t;throw new Error(e)}try{n=(0,WC.recoverPublicKey)((0,Eb.hexStringToUint8)(r.substr(2)),e)}catch(t){const e="Cant recoverPublicKey. "+t;throw new Error(e)}return n}static async signEIP712WithBrowserWallet(t,e,r,i,s=null){try{let a;if(s){a=new dC.ethers.Wallet("0x"+s.getPrivateAsHexString())}else{let t=new dC.ethers.providers.Web3Provider(window.ethereum);a=t.getSigner()}if(!a)throw new Error("Active Wallet required");let o=n.Eip712Data;const f={name:t,version:o["PROTOCOL_VERSION"]};const c={};c[i]=r;let u=Object.assign({},e);u.payload=sr.keccak256(u.payload);let h=await a._signTypedData(f,c,u);let l={types:{EIP712Domain:n.Eip712domainTypes},primaryType:i,message:e,domain:f};l.types[i]=c[i];let d=JSON.stringify(l);let v={signatureInHex:h,jsonSigned:d};return JSON.stringify(v)}catch(t){(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,"Cant sign eip712 data. Error: "+t);return""}}static async connectMetamaskAndGetAddress(){if(!window.ethereum){throw new Error("Please install metamask before.")}const t=await window.ethereum.request({method:"eth_requestAccounts"});if(!t||!t.length){throw new Error("Active Wallet required")}return t[0]}static getChainIdFromSignature(t){let e=Number("0x"+t.substr(-2));if(e==27||e==28){return 0}return e-35>>1}static convertToPersonalEthMessage(t){return(0,Eb.stringToArray)(this.ethereumPrefix+t.length+t)}}e.SignatureUtility=n;n.ethereumPrefix="Ethereum Signed Message:\n";n.OID_ECDSA_PUBLICKEY="1.2.840.10045.2.1";n.Eip712Data={PROTOCOL_VERSION:"0.1"};n.Eip712domainTypes=[{name:"name",type:"string"},{name:"version",type:"string"}]}));var VC=t((function(t,e){Object.defineProperty(e,"__esModule",{value:true});e.ValidationTools=void 0;class r{static validateTimestamp(t,e,r){if(t>e+r){return false}if(t<e-r){return false}return true}static isAddress(t){if(t.toLowerCase().match(/^0x[a-f0-9]{40}$/i)===null){(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,"Wrong Ethereum Address");return false}return true}static isNullOrAddress(t){if(t==null){return true}return this.isAddress(t)}}e.ValidationTools=r;r.ADDRESS_LENGTH_IN_BYTES=42}));var YC=t((function(t,e){Object.defineProperty(e,"__esModule",{value:true});e.Nonce=void 0;class r{constructor(){this.DEFAULT_NONCE_TIME_LIMIT_MS=1e3*60*20}static async makeNonce(t="",e,r=new Uint8Array(0),n=0){if(!t){t=await qC.SignatureUtility.connectMetamaskAndGetAddress()}if(!VC.ValidationTools.isAddress(t)){throw new Error("Address is not valid")}t=t.toUpperCase();if(!n){n=Date.now()}return(0,Eb.uint8merge)([Uint8Array.from((0,Eb.stringToArray)(t)),(0,Eb.hashStringTo32bytesUint8)(e),(0,Eb.getInt64Bytes)(n),r])}validateNonce(t,e,n,i,s,a=new Uint8Array(0)){if(!r.validateAddress(t,e)){(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,"validateAddress check failed for "+e);return false}if(!this.validateReceiverIdentifier(t,n)){(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,"validateReceiverIdentifier check failed");return false}if(!this.validateTimestamp(t,i,s)){(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,"timestamp check failed");return false}if(!this.validateOtherData(t,a)){(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,"otherData check failed");return false}return this.validateOtherData(t,a)}validateTimestamp(t,e,n){let i=r.getTimestamp(t);let s=new yC.Timestamp(i);s.setValidity(n-e);return s.validateAgainstExpiration(n)}static validateAddress(t,e){let n=(0,Eb.uint8toString)(t.slice(r.senderAddressIndexStart,r.senderAddressIndexStop));if(e.toUpperCase()===n.toUpperCase())return true;(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,"nonceAddress = "+n);return false}validateReceiverIdentifier(t,e){if((0,Eb.uint8tohex)((0,Eb.hashStringTo32bytesUint8)(e)).toLowerCase()===(0,Eb.uint8tohex)(t.slice(r.receiverIdentifierIndexStart,r.receiverIdentifierIndexStop)).toLowerCase())return true;return false}validateOtherData(t,e){if((0,Eb.uint8tohex)(e).toLowerCase()===(0,Eb.uint8tohex)(t.slice(r.otherDataIndexStart,r.otherDataIndexStart+e.length)).toLowerCase())return true;return false}static getTimestamp(t){let e=t.slice(r.timestampIndexStart,r.timestampIndexStop);let n=(0,Eb.uint8ToBn)(e);if(n>BigInt(Number.MAX_SAFE_INTEGER))throw new Error("timestamp value bigger than MAX_SAFE_INTEGER");return Number(n)}}e.Nonce=r;r.LONG_BYTES=8;r.senderAddressIndexStart=0;r.senderAddressIndexStop=VC.ValidationTools.ADDRESS_LENGTH_IN_BYTES;r.receiverIdentifierIndexStart=r.senderAddressIndexStop;r.receiverIdentifierIndexStop=r.receiverIdentifierIndexStart+256/8;r.timestampIndexStart=r.receiverIdentifierIndexStop;r.timestampIndexStop=r.timestampIndexStart+r.LONG_BYTES;r.otherDataIndexStart=r.timestampIndexStop}));var _C=t((function(t,r){var n=e&&e.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")s=Reflect.decorate(t,e,r,n);else for(var o=t.length-1;o>=0;o--)if(a=t[o])s=(i<3?a(s):i>3?a(e,r,s):a(e,r))||s;return i>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(r,"__esModule",{value:true});r.UseToken=void 0;class i{}n([(0,Jy.AsnProp)({type:Jy.AsnPropTypes.Any})],i.prototype,"signedToken",void 0);n([(0,Jy.AsnProp)({type:Jy.AsnPropTypes.Any})],i.prototype,"attestation",void 0);n([(0,Jy.AsnProp)({type:Jy.AsnPropTypes.Any})],i.prototype,"proof",void 0);r.UseToken=i}));var ZC=t((function(t,e){Object.defineProperty(e,"__esModule",{value:true});e.XMLconfigData=void 0;e.XMLconfigData={attestationOrigin:"http://stage.attestation.id",tokensOrigin:"https://devcontickets.herokuapp.com/outlet/",tokenUrlName:"ticket",tokenSecretName:"secret",unsignedTokenDataName:"ticket",tokenParser:pC.SignedDevconTicket,localStorageItemName:"dcTokens",base64senderPublicKeys:{6:vC.KeyPair.publicFromBase64orPEM("-----BEGIN PUBLIC KEY-----\n"+"MIIBMzCB7AYHKoZIzj0CATCB4AIBATAsBgcqhkjOPQEBAiEA////////////////\n"+"/////////////////////v///C8wRAQgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\n"+"AAAAAAAAAAAEIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHBEEEeb5m\n"+"fvncu6xVoGKVzocLBwKb/NstzijZWfKBWxb4F5hIOtp3JqPEZV2k+/wOEQio/Re0\n"+"SKaFVBmcR9CP+xDUuAIhAP////////////////////66rtzmr0igO7/SXozQNkFB\n"+"AgEBA0IABJUMfAvtI8PKxcwxu7mq2btVMjh4gmcKwrHN8HmasOvHZMJn9wTo/doH\n"+"lquDl6TSEBAk0kxO//aVs6QX8u0OSM0=\n"+"-----END PUBLIC KEY-----"),26:vC.KeyPair.publicFromBase64orPEM("-----BEGIN PUBLIC KEY-----\n"+"MFYwEAYHKoZIzj0CAQYFK4EEAAoDQgAEQKYTwFMIzSq1QVxoRKoOZXLQ9mUhce8M\n"+"dIzvJx3unbpR3m3TiuWKZKTP4/XCPnS56d1tAhjM43hHjHbZ0k3RKQ==\n"+"-----END PUBLIC KEY-----")},base64attestorPubKey:"MIIBMzCB7AYHKoZIzj0CATCB4AIBATAsBgcqhkjOPQEBAiEA/////////////////////////////////////v///C8wRAQgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHBEEEeb5mfvncu6xVoGKVzocLBwKb/NstzijZWfKBWxb4F5hIOtp3JqPEZV2k+/wOEQio/Re0SKaFVBmcR9CP+xDUuAIhAP////////////////////66rtzmr0igO7/SXozQNkFBAgEBA0IABL+y43T1OJFScEep69/yTqpqnV/jzONz9Sp4TEHyAJ7IPN9+GHweCX1hT4OFxt152sBN3jJc1s0Ymzd8pNGZNoQ=",webDomain:"devcon.org"}}));var XC=t((function(t,e){Object.defineProperty(e,"__esModule",{value:true});e.Eip712Validator=void 0;class r{constructor(){this.XMLConfig=ZC.XMLconfigData}static stringIsAValidUrl(t){let e;try{e=new URL(t)}catch(t){(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,"cant construct url. Error:",t);return false}return e.protocol==="http:"||e.protocol==="https:"}setDomainAndTimout(t){if(!r.stringIsAValidUrl(t))throw new Error("wrong domain");this.domain=t}setDomain(t){if(!r.stringIsAValidUrl(t))throw new Error("wrong domain");this.domain=t}getDomain(){return this.domain}setSalt(t){this.salt=t}getSalt(){return this.salt}setPrimaryName(t){this.primaryName=t}getPrimaryName(){return this.primaryName}setChainId(t){if(t<1)throw new Error("ChainId should be a positive number");this.chainId=t}getChainId(){return this.chainId}validateDomain(t){if(!t){(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,"Input param domainToCheck required");return false}if(!t.name||t.name.toLowerCase()!==this.domain.toLowerCase()){(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,"Domain name is not valid");return false}if(!t.version||t.version!==qC.SignatureUtility.Eip712Data["PROTOCOL_VERSION"]){(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,"Protocol version is wrong");return false}if(this.chainId&&t.chainId!==this.chainId){(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,"Chain ID is wrong");return false}if(this.verifyingContract&&t.verifyingContract!==this.verifyingContract){(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,"Verifying contract is wrong");return false}if(this.salt&&t.salt!==this.salt){(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,"Salt is wrong");return false}return true}retrieveAttestedObject(t){let e=t.payload;let r=vC.KeyPair.publicFromBase64orPEM(ZC.XMLconfigData.base64attestorPubKey);let n=ZC.XMLconfigData.base64senderPublicKeys;let i=EC.AttestedObject.fromBytes((0,Eb.hexStringToUint8)(e),_C.UseToken,r,gC.Ticket,n);return i}verifySignature(t,e){let r=JSON.parse(t);let n=r.signatureInHex;let i=JSON.parse(r.jsonSigned);let s=qC.SignatureUtility.recoverPublicKeyFromTypedMessageSignature(i,n);let a=vC.KeyPair.fromPublicHex(s.substr(2));if(e.toLowerCase()!==i.message.address.toLowerCase()){(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,"message.address is not equal pkAddress");return false}if(e.toLowerCase()!==a.getAddress().toLowerCase()){(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,"Recovered address is not equal pkAddress");return false}return true}}e.Eip712Validator=r}));var $C=t((function(t,e){Object.defineProperty(e,"__esModule",{value:true});e.Eip712Token=void 0;class r extends XC.Eip712Validator{}e.Eip712Token=r}));var tx=t((function(t,e){Object.defineProperty(e,"__esModule",{value:true});e.Eip712AttestationRequest=void 0;class r extends $C.Eip712Token{constructor(t=null,e=yC.Timestamp.DEFAULT_TIME_LIMIT_MS){super();this.Eip712UserDataTypes=[{name:"payload",type:"string"},{name:"description",type:"string"},{name:"timestamp",type:"string"},{name:"identifier",type:"string"}];this.Eip712UserDataPrimaryName="AttestationRequest";this.Eip712UserDataDescription="Linking Ethereum address to phone or email";this.userKey=t;this.acceptableTimeLimit=e;this.usageValue=this.Eip712UserDataDescription}setUsageValue(t){this.usageValue=t}async addData(t,e=yC.Timestamp.DEFAULT_TIME_LIMIT_MS,r,n){this.setDomain(t);this.attestationRequest=n;this.acceptableTimeLimit=e;this.jsonEncoding=await this.makeToken(r);try{this.fillJsonData(this.jsonEncoding)}catch(t){(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,t);return false}}fillJsonData(t){if(!t)throw new Error("Empty json");this.jsonEncoding=t;let e=JSON.parse(t);let r=e.signatureInHex;let n=JSON.parse(e.jsonSigned);this.eip712DomainData=n.domain;this.data=n.message;try{let t=qC.SignatureUtility.recoverPublicKeyFromTypedMessageSignature(n,r);this.requestorKeys=vC.KeyPair.fromPublicHex(t.substr(2));(0,Eb.logger)(Ab.DEBUGLEVEL.HIGH,"restored address: "+this.requestorKeys.getAddress())}catch(t){let e="Recover Address failed with error:"+t;(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,e,t);throw new Error(e)}if(!this.attestationRequest){this.attestationRequest=MC.AttestationRequest.fromBytes((0,Eb.base64ToUint8array)(this.data.payload))}this.constructorCheck()}constructorCheck(){if(!this.verify()){throw new Error("Could not verify Eip712 AttestationRequest")}(0,Eb.logger)(Ab.DEBUGLEVEL.HIGH,"Eip712 Attestaion Request verify OK")}async makeToken(t){if(this.userKey){this.userKey.getAddress()}else{await qC.SignatureUtility.connectMetamaskAndGetAddress()}let e=YC.Nonce.getTimestamp(this.attestationRequest.getPok().getNonce());let r=new yC.Timestamp(e).getTimeAsString();let n={payload:(0,Eb.hexStringToBase64Url)(this.attestationRequest.getDerEncoding()),description:this.usageValue,timestamp:r,identifier:t};return await qC.SignatureUtility.signEIP712WithBrowserWallet(this.domain,n,this.Eip712UserDataTypes,this.Eip712UserDataPrimaryName,this.userKey)}setAcceptableTimeLimit(t){this.acceptableTimeLimit=t}getJsonEncoding(){return this.jsonEncoding}verify(){if(!this.attestationRequest.verify()){(0,Eb.logger)(Ab.DEBUGLEVEL.MEDIUM,"Could not verify proof");return false}return true}checkValidity(){if(!this.validateDomain(this.eip712DomainData)){(0,Eb.logger)(Ab.DEBUGLEVEL.MEDIUM,"Domain invalid");return false}if(this.data.description!==this.usageValue){(0,Eb.logger)(Ab.DEBUGLEVEL.MEDIUM,"Description is not correct. :"+this.data.description+" !== "+this.usageValue);return false}let t=new yC.Timestamp(this.data.timestamp);t.setValidity(this.acceptableTimeLimit);if(!t.validateTimestamp()){(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,`timestamp is not correct. timestamp = ${this.data.timestamp}, acceptableTimeLimit = ${this.acceptableTimeLimit}`);return false}if(!(new YC.Nonce).validateNonce(this.getPok().getNonce(),this.requestorKeys.getAddress(),this.domain,yC.Timestamp.stringTimestampToLong(this.data.timestamp)-this.acceptableTimeLimit,yC.Timestamp.stringTimestampToLong(this.data.timestamp)+this.acceptableTimeLimit)){(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,"nonce is not correct");return false}return true}getIdentifier(){return this.data.identifier}getType(){return this.attestationRequest.getType()}getPok(){return this.attestationRequest.getPok()}getUserPublicKey(){return this.requestorKeys}}e.Eip712AttestationRequest=r}));var ex=t((function(t,r){var n=e&&e.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")s=Reflect.decorate(t,e,r,n);else for(var o=t.length-1;o>=0;o--)if(a=t[o])s=(i<3?a(s):i>3?a(e,r,s):a(e,r))||s;return i>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(r,"__esModule",{value:true});r.UseAttestation=void 0;class i{}n([(0,Jy.AsnProp)({type:zB.MyAttestation})],i.prototype,"attestation",void 0);n([(0,Jy.AsnProp)({type:Jy.AsnPropTypes.Integer})],i.prototype,"type",void 0);n([(0,Jy.AsnProp)({type:zy.Proof})],i.prototype,"proof",void 0);n([(0,Jy.AsnProp)({type:zB.PublicKeyInfoValue})],i.prototype,"sessionKey",void 0);r.UseAttestation=i}));var rx=t((function(t,e){Object.defineProperty(e,"__esModule",{value:true});e.UseAttestation=void 0;class r{static fromData(t,e,r,n){let i=new this;i.attestation=t;i.type=e;i.pok=r;i.sessionPublicKey=n;i.encoding=i.makeEncoding(t,e,r,n);i.constructorCheck();return i}static fromBytes(t,e){let r=new this;let n;try{n=Jy.AsnParser.parse(t,ex.UseAttestation)}catch(t){throw new Error("Cant parse UseAttestationASN. "+t)}try{r.attestation=AC.SignedIdentifierAttestation.fromASNType(n.attestation,e);r.type=n.type;r.pok=HB.FullProofOfExponent.fromASNType(n.proof);r.sessionPublicKey=vC.KeyPair.publicFromSubjectPublicKeyValue(n.sessionKey)}catch(t){throw new Error("Cant decode internal data. "+t)}r.constructorCheck();return r}constructorCheck(){if(!this.verify()){throw new Error("The use attestation object is not valid")}}makeEncoding(t,e,r,n){let i=t.getDerEncoding()+LB.Asn1Der.encode("INTEGER",e)+r.getDerEncoding()+n.getAsnDerPublic();return LB.Asn1Der.encode("SEQUENCE_30",i)}getAttestation(){return this.attestation}getType(){return this.type}getPok(){return this.pok}getSessionPublicKey(){return this.sessionPublicKey}getDerEncoding(){return this.encoding}verify(){return this.attestation.verify()&&(new GB.AttestationCrypto).verifyFullProof(this.pok)}checkValidity(){return this.attestation.checkValidity()}}e.UseAttestation=r}));var nx=t((function(t,e){Object.defineProperty(e,"__esModule",{value:true});e.Eip712AttestationUsage=void 0;class r extends $C.Eip712Token{constructor(t=null,e=yC.Timestamp.DEFAULT_TOKEN_TIME_LIMIT){super();this.PLACEHOLDER_CHAIN_ID=0;this.Eip712PrimaryName="AttestationUsage";this.Eip712Description='Prove that the "identifier" is the identifier hidden in attestation contained in"payload".';this.Eip712UserTypes=[{name:"description",type:"string"},{name:"identifier",type:"string"},{name:"payload",type:"string"},{name:"timestamp",type:"string"},{name:"expirationTime",type:"string"}];this.maxTokenValidityInMs=e;this.userKey=t}async addData(t,e,r){this.setDomain(t);this.useAttestation=r;try{this.jsonEncoding=await this.makeToken(e,r)}catch(t){(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,t);throw new Error("Could not encode object. "+t)}try{this.fillJsonData(this.jsonEncoding)}catch(t){(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,t);return false}this.constructorCheck()}fillJsonData(t,e=null){if(!t){throw new Error("Empty json")}if(e!==null){this.attestorKey=e}this.jsonEncoding=t;let r=JSON.parse(t);let n=r.signatureInHex;let i=JSON.parse(r.jsonSigned);this.eip712DomainData=i.domain;this.data=i.message;try{let t=qC.SignatureUtility.recoverPublicKeyFromTypedMessageSignature(i,n);this.requestorKeys=vC.KeyPair.fromPublicHex(t.substr(2));(0,Eb.logger)(Ab.DEBUGLEVEL.HIGH,"restored address: "+this.requestorKeys.getAddress())}catch(t){let e="Recover Address failed with error:"+t;(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,e,t);throw new Error(e)}if(!this.useAttestation){try{(0,Eb.logger)(Ab.DEBUGLEVEL.VERBOSE,(0,Eb.uint8tohex)((0,Eb.base64ToUint8array)(this.data.payload)));this.useAttestation=rx.UseAttestation.fromBytes((0,Eb.base64ToUint8array)(this.data.payload),this.attestorKey)}catch(t){let e="Failed to read UseAttestation. "+t;(0,Eb.logger)(Ab.DEBUGLEVEL.MEDIUM,e,t);throw new Error(e)}}this.constructorCheck()}constructorCheck(){if(!this.verify()){throw new Error("Could not verify Eip712 use attestation")}}async makeToken(t,e){if(!this.userKey){await qC.SignatureUtility.connectMetamaskAndGetAddress()}let r={payload:(0,Eb.hexStringToBase64Url)(e.getDerEncoding()),description:this.Eip712Description,timestamp:(new yC.Timestamp).getTimeAsString(),identifier:t,expirationTime:new yC.Timestamp(Date.now()+this.maxTokenValidityInMs).getTimeAsString()};return await qC.SignatureUtility.signEIP712WithBrowserWallet(this.domain,r,this.Eip712UserTypes,this.Eip712PrimaryName,this.userKey)}proofLinking(){let t=new GB.AttestationCrypto;let e=t.mapToCurveMultiplier(this.getType(),this.getIdentifier());let r=kb.Point.decodeFromUint8(this.getAttestation().getUnsignedAttestation().getCommitment(),kb.CURVE_BN256);let n=r.subtract(GB.Pedestren_G.multiplyDA(e));if(!n.equals(this.getPok().getRiddle())){(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,"candidateRiddle.equals(this.getPok().getRiddle()) error");return false}return true}getPok(){return this.useAttestation.getPok()}getType(){return this.useAttestation.type}getIdentifier(){return this.data.identifier}getAttestation(){return this.useAttestation.getAttestation()}getJsonEncoding(){return this.jsonEncoding}checkTokenValidity(){let t=yC.Timestamp.stringTimestampToLong(this.data.expirationTime)-this.maxTokenValidityInMs-2*yC.Timestamp.ALLOWED_ROUNDING;let e=yC.Timestamp.stringTimestampToLong(this.data.expirationTime);if(!this.useAttestation.checkValidity()){(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,"useAttestation.checkValidity failed");return false}if(!this.validateDomain(this.eip712DomainData)){(0,Eb.logger)(Ab.DEBUGLEVEL.MEDIUM,"Domain invalid");return false}if(this.data.description!=this.Eip712Description){(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,`wrong description: "${this.data.description}", must be "${this.Eip712Description}"`);return false}let r=new yC.Timestamp(this.data.timestamp);r.setValidity(this.maxTokenValidityInMs);if(!r.validateAgainstExpiration(yC.Timestamp.stringTimestampToLong(this.data.expirationTime))){(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,"verify timestamp failed.\n"+this.data.timestamp+"\n"+this.maxTokenValidityInMs+"\n"+this.data.expirationTime+"\n"+yC.Timestamp.stringTimestampToLong(this.data.expirationTime)+"\n");return false}if(this.requestorKeys.getAddress().toLowerCase()!==this.useAttestation.getAttestation().getUnsignedAttestation().getAddress().toLowerCase()){(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,"wrong address");return false}if(!(new YC.Nonce).validateNonce(this.useAttestation.getPok().getNonce(),this.useAttestation.getAttestation().getUnsignedAttestation().getAddress(),this.domain,t,e)){(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,"wrong Nonce");return false}if(!this.proofLinking()){(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,"wrong proofLinking");return false}return true}verify(){if(!this.useAttestation.verify()){return false}return true}getSessionPublicKey(){return this.useAttestation.getSessionPublicKey()}}e.Eip712AttestationUsage=r}));var ix=t((function(t,r){var n=e&&e.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")s=Reflect.decorate(t,e,r,n);else for(var o=t.length-1;o>=0;o--)if(a=t[o])s=(i<3?a(s):i>3?a(e,r,s):a(e,r))||s;return i>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(r,"__esModule",{value:true});r.Identifier=void 0;class i{}n([(0,Jy.AsnProp)({type:Jy.AsnPropTypes.Integer})],i.prototype,"type",void 0);n([(0,Jy.AsnProp)({type:zy.Proof})],i.prototype,"proof",void 0);n([(0,Jy.AsnProp)({type:zB.PublicKeyInfoValue})],i.prototype,"sessionKey",void 0);r.Identifier=i}));var sx=t((function(t,e){Object.defineProperty(e,"__esModule",{value:true});e.AttestationRequestWithUsage=void 0;class r{constructor(){}static fromData(t,e,r){let n=new this;n.type=t;n.pok=e;n.sessionPublicKey=r;if(!n.verify()){throw new Error("Could not verify the proof")}return n}static fromBytes(t){let e=new this;let r;try{r=Jy.AsnParser.parse(t,ix.Identifier);e.type=r.type;e.sessionPublicKey=vC.KeyPair.publicFromSubjectPublicKeyValue(r.sessionKey)}catch(t){throw new Error("Cant parse AttestationRequest Identifier")}try{let t=new Uint8Array(r.proof.riddle);let n=new Uint8Array(r.proof.challengePoint);let i=new Uint8Array(r.proof.responseValue);let s=new Uint8Array(r.proof.nonce);let a=kb.Point.decodeFromHex((0,Eb.uint8tohex)(t),kb.CURVE_BN256);let o=(0,Eb.uint8ToBn)(n);let f=kb.Point.decodeFromHex((0,Eb.uint8tohex)(i),kb.CURVE_BN256);e.pok=HB.FullProofOfExponent.fromData(a,f,o,s)}catch(t){throw new Error("Cant create FullProofOfExponent")}if(!e.verify()){throw new Error("Could not verify the proof")}(0,Eb.logger)(Ab.DEBUGLEVEL.HIGH,"proof OK");return e}verify(){let t=new GB.AttestationCrypto;if(!t.verifyFullProof(this.pok)){return false}return true}getDerEncoding(){let t=LB.Asn1Der.encode("INTEGER",this.type)+this.pok.getDerEncoding()+this.sessionPublicKey.getAsnDerPublic();return LB.Asn1Der.encode("SEQUENCE_30",t)}getPok(){return this.pok}getType(){return this.type}getSessionPublicKey(){return this.sessionPublicKey}}e.AttestationRequestWithUsage=r}));var ax=t((function(t,e){Object.defineProperty(e,"__esModule",{value:true});e.Eip712AttestationRequestWithUsage=void 0;class r extends $C.Eip712Token{constructor(t=null,e=yC.Timestamp.DEFAULT_TIME_LIMIT_MS,r=yC.Timestamp.DEFAULT_TOKEN_TIME_LIMIT){super();this.Eip712UserDataTypes=[{name:"payload",type:"string"},{name:"description",type:"string"},{name:"identifier",type:"string"},{name:"timestamp",type:"string"},{name:"expirationTime",type:"string"}];this.Eip712UserDataPrimaryName="AttestationRequestWUsage";this.Eip712UserDataDescription='Prove that the "identifier" is the identifier hidden in attestation contained in"payload"'+" and use this to authorize usage of local, temporary keys.";this.userKey=t;this.acceptableTimeLimit=e;this.maxTokenValidityInMs=r}async fromData(t,e=yC.Timestamp.DEFAULT_TIME_LIMIT_MS,r=yC.Timestamp.DEFAULT_TOKEN_TIME_LIMIT,n,i,s=null){this.setDomain(t);if(s){this.userKey=s}try{this.acceptableTimeLimit=e;this.maxTokenValidityInMs=r;this.attestationRequestWithUsage=i;this.jsonEncoding=await this.makeToken(n,i)}catch(t){(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,t);throw new Error("Could not encode object")}try{this.fillJsonData(this.jsonEncoding)}catch(t){throw new Error("Could not decode object")}}Eip712AttestationRequestWithUsage(t,e,r,n){try{this.acceptableTimeLimit=e;this.maxTokenValidityInMs=r;this.jsonEncoding=n;this.fillJsonData(this.jsonEncoding)}catch(t){(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,t);throw new Error("Could not decode object")}}fillJsonData(t){if(!t)throw new Error("Empty json");this.jsonEncoding=t;let e=JSON.parse(t);let r=e.signatureInHex;let n=JSON.parse(e.jsonSigned);this.eip712DomainData=n.domain;this.data=n.message;try{let t=qC.SignatureUtility.recoverPublicKeyFromTypedMessageSignature(n,r);this.userPublicKey=vC.KeyPair.fromPublicHex(t.substr(2));(0,Eb.logger)(Ab.DEBUGLEVEL.HIGH,"Eip712 withUsage restored address: "+this.userPublicKey.getAddress())}catch(t){let e="Recover Address failed with error:"+t;(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,e,t);throw new Error(e)}if(!this.attestationRequestWithUsage){this.attestationRequestWithUsage=sx.AttestationRequestWithUsage.fromBytes((0,Eb.base64ToUint8array)(this.data.payload))}this.constructorCheck()}constructorCheck(){if(!this.verify()){throw new Error("Could not verify Eip712 use attestation")}}async makeToken(t,e){if(!this.userKey){await qC.SignatureUtility.connectMetamaskAndGetAddress()}let r=(new yC.Timestamp).getTimeAsString();let n=new yC.Timestamp(Date.now()+this.maxTokenValidityInMs).getTimeAsString();let i={payload:(0,Eb.hexStringToBase64Url)(e.getDerEncoding()),description:this.Eip712UserDataDescription,timestamp:r,identifier:t,expirationTime:n};return await qC.SignatureUtility.signEIP712WithBrowserWallet(this.domain,i,this.Eip712UserDataTypes,this.Eip712UserDataPrimaryName,this.userKey)}getIdentifier(){return this.data.identifier}getUserPublicKey(){return this.userPublicKey}getPok(){return this.attestationRequestWithUsage.getPok()}getType(){return this.attestationRequestWithUsage.getType()}getSessionPublicKey(){return this.attestationRequestWithUsage.getSessionPublicKey()}getJsonEncoding(){return this.jsonEncoding}checkValidity(){if(!this.testNonceAndDescription(this.acceptableTimeLimit)){return false}return true}checkTokenValidity(){let t=new yC.Timestamp(this.data.timestamp);t.setValidity(this.maxTokenValidityInMs);if(!t.validateAgainstExpiration(yC.Timestamp.stringTimestampToLong(this.data.expirationTime))){(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,"time.validateAgainstExpiration filed");return false}if(!this.testNonceAndDescription(this.maxTokenValidityInMs)){return false}return true}testNonceAndDescription(t){if(!t){throw new Error("timeLimit required")}let e=yC.Timestamp.stringTimestampToLong(this.data.timestamp)-t;let r=yC.Timestamp.stringTimestampToLong(this.data.timestamp)+t;if(!(new YC.Nonce).validateNonce(this.attestationRequestWithUsage.getPok().getNonce(),this.userPublicKey.getAddress(),this.domain,e,r)){return false}if(!this.validateDomain(this.eip712DomainData)){(0,Eb.logger)(Ab.DEBUGLEVEL.MEDIUM,"Domain invalid");return false}if(this.data.description!==this.Eip712UserDataDescription){return false}return true}verify(){if(!this.attestationRequestWithUsage.verify()){return false}return true}}e.Eip712AttestationRequestWithUsage=r}));var ox=t((function(t,e){Object.defineProperty(e,"__esModule",{value:true});e.Authenticator=void 0;class r{static decodePublicKey(t){return vC.KeyPair.publicFromBase64orPEM(t)}static async getUseTicket(t,e,r,n,i,s){let a;let o;try{s=vC.KeyPair.parseKeyArrayStrings(s)}catch(t){(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,t);throw new Error("Issuer key error")}if(!r){throw new Error("Ticket is empty")}a=gC.Ticket.fromBase64(r,s);if(!a.checkValidity()){(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,"Could not validate ticket");throw new Error("Ticket Validation failed")}if(!a.verify()){(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,"Could not verify ticket");throw new Error("Ticket Verification failed")}(0,Eb.logger)(Ab.DEBUGLEVEL.MEDIUM,"ticked valid (signature OK)");if(!i){throw new Error("Attesator key not defined")}let f;try{f=vC.KeyPair.publicFromBase64orPEM(i)}catch(t){throw new Error("Attesator key read error")}try{o=AC.SignedIdentifierAttestation.fromBytes((0,Eb.base64ToUint8array)(n),f)}catch(t){throw new Error("IDAttestation decode error")}if(!o.checkValidity()){throw new Error("IDAttestation Validation failed")}if(!o.verify()){throw new Error("IDAttestation Verification failed")}(0,Eb.logger)(Ab.DEBUGLEVEL.HIGH,"attestation valid");try{let r=new EC.AttestedObject;r.create(a,o,BigInt(e),BigInt(t));let n=r.getDerEncoding();(0,Eb.logger)(Ab.DEBUGLEVEL.HIGH,n);return(0,Eb.hexStringToBase64)(n)}catch(t){(0,Eb.logger)(Ab.DEBUGLEVEL.MEDIUM,"getUseTicket: redeem failed",t);throw new Error("Attestation doesnt fit Ticket: "+t.message)}}static validateUseTicket(t,e,r,n){let i=vC.KeyPair.publicFromBase64orPEM(e);let s=vC.KeyPair.parseKeyArrayStrings(r);try{let e=EC.AttestedObject.fromBytes((0,Eb.base64ToUint8array)(t),_C.UseToken,i,gC.Ticket,s);(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,"Verified attested object");if(!e.checkValidity(n)){throw new Error("Ticket validity check failed!")}return e}catch(t){let e="Ticket proof validation failed! "+t.message;(0,Eb.logger)(Ab.DEBUGLEVEL.MEDIUM,e);throw new Error(e)}}static async requestAttest(t,e,n,i,s=null){let a=new GB.AttestationCrypto;let o;if(s){o=s.getAddress()}else{try{o=await qC.SignatureUtility.connectMetamaskAndGetAddress()}catch(t){(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,"Cant find user Ethereum Address. Please check Metamask. "+t);(0,Eb.logger)(Ab.DEBUGLEVEL.MEDIUM,t);return}}let f=await YC.Nonce.makeNonce(o,n);(0,Eb.logger)(Ab.DEBUGLEVEL.HIGH,"nonce = "+(0,Eb.uint8tohex)(f));let c=a.computeAttestationProof(i,f);let u=MC.AttestationRequest.fromData(a.getType(e),c);let h=new tx.Eip712AttestationRequest(s);await h.addData(n,undefined,t,u);r.checkAttestRequestVerifiability(h);r.checkAttestRequestValidity(h);let l=h.getJsonEncoding();return l}static constructAttest(t,e,n,i,s,a=""){let o;let f=new GB.AttestationCrypto;let c;let u;try{c=new tx.Eip712AttestationRequest;c.setDomain(s);if(a){c.setUsageValue(a)}c.fillJsonData(i);r.checkAttestRequestVerifiability(c);r.checkAttestRequestValidity(c)}catch(t){let e="Failed to fill attestation data from json. "+t+"\nRestores as an Eip712AttestationRequestWithUsage object instead";(0,Eb.logger)(Ab.DEBUGLEVEL.MEDIUM,e);try{c=new ax.Eip712AttestationRequestWithUsage;c.setDomain(s);c.fillJsonData(i);r.checkAttestRequestVerifiability(c);r.checkAttestRequestValidity(c)}catch(t){let e="Failed to parse Eip712AttestationRequestWithUsage. "+t;(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,e);(0,Eb.logger)(Ab.DEBUGLEVEL.MEDIUM,t);throw new Error(e)}}u=f.makeCommitmentFromHiding(c.getIdentifier(),c.getType(),c.getPok().getRiddle());o=new mC.IdentifierAttestation;o.fromCommitment(u,c.getUserPublicKey());o.setIssuer("CN="+e);o.setSerialNumber(Math.round(Math.random()*Number.MAX_SAFE_INTEGER));let h=Date.now();o.setNotValidBefore(h);o.setNotValidAfter(h+n);let l=AC.SignedIdentifierAttestation.fromData(o,t);return l.getDerEncoding()}static async useAttest(t,e,r,n,i,s,a=null,o=null){const f=(0,Eb.base64ToUint8array)(t);let c=AC.SignedIdentifierAttestation.fromBytes(f,r);let u=(0,Eb.base64ToUint8array)(e);let h=(0,Eb.uint8ToBn)(u.slice(4));let l=new GB.AttestationCrypto;let d;if(o){d=o.getAddress()}else{d=await qC.SignatureUtility.connectMetamaskAndGetAddress()}let v=await YC.Nonce.makeNonce(d,s);let b=l.computeAttestationProof(h,v);try{let t=rx.UseAttestation.fromData(c,l.getType(i),b,a);let e=new nx.Eip712AttestationUsage(o);let r=await e.addData(s,n,t);(0,Eb.logger)(Ab.DEBUGLEVEL.HIGH,"usageRequest ready state = "+r);(0,Eb.logger)(Ab.DEBUGLEVEL.HIGH,"usageRequest.getJsonEncoding() = "+e.getJsonEncoding());return e.getJsonEncoding()}catch(t){(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,t)}}static checkAttestRequestVerifiability(t){if(!t.verify()){(0,Eb.logger)(Ab.DEBUGLEVEL.MEDIUM,"Could not verify attestation signing request");throw new Error("Verification failed")}}static checkAttestRequestValidity(t){if(!t.checkValidity()){(0,Eb.logger)(Ab.DEBUGLEVEL.HIGH,"Could not validate attestation signing request");throw new Error("Validation failed")}}static checkUsageVerifiability(t){if(!t.verify()){(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,"Could not verify usage request");throw new Error("Verification failed")}}static checkUsageValidity(t){if(!t.checkTokenValidity()){(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,"Could not validate usage request");throw new Error("Validation failed")}}static async verifyUsage(t,e,n,i,s){let a;try{let n=new nx.Eip712AttestationUsage;n.setDomain(i);n.fillJsonData(t,e);r.checkUsageVerifiability(n);r.checkUsageValidity(n);a=n.getSessionPublicKey()}catch(e){(0,Eb.logger)(Ab.DEBUGLEVEL.MEDIUM,"Eip712AttestationUsage failed. "+e+". Lets try to verify Eip712AttestationRequestWithUsage");let n=new ax.Eip712AttestationRequestWithUsage;n.setDomain(i);n.fillJsonData(t);r.checkUsageVerifiability(n);r.checkUsageValidity(n);a=n.getSessionPublicKey();(0,Eb.logger)(Ab.DEBUGLEVEL.HIGH,"sessionPublicKey from Eip712AttestationRequestWithUsage = "+a.getAddress())}try{let t=await a.verifyStringWithSubtle(vC.KeyPair.anySignatureToRawUint8(s),n);if(!t){(0,Eb.logger)(Ab.DEBUGLEVEL.MEDIUM,"Could not verify message signature");throw new Error("Signature verification failed")}return"SUCCESSFULLY validated usage request!"}catch(t){let e="Cant verify session with subtle. "+t;(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,e);(0,Eb.logger)(Ab.DEBUGLEVEL.MEDIUM,t)}}static async requestAttestAndUsage(t,e,r,n,i,s){try{let a=(0,Eb.uint8ToBn)((0,Eb.base64ToUint8array)(i));let o;if(t){o=t.getAddress()}else{o=await qC.SignatureUtility.connectMetamaskAndGetAddress()}let f=await YC.Nonce.makeNonce(o,n,new Uint8Array(0),Date.now());let c=new GB.AttestationCrypto;let u=c.computeAttestationProof(a,f);let h=sx.AttestationRequestWithUsage.fromData(c.getType(r),u,s);let l=new ax.Eip712AttestationRequestWithUsage(t);await l.fromData(n,undefined,undefined,e,h);(0,Eb.logger)(Ab.DEBUGLEVEL.HIGH,"request.getJsonEncoding() = "+l.getJsonEncoding());return l.getJsonEncoding()}catch(t){let e="requestAttestAndUsage error. "+t;(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,e);(0,Eb.logger)(Ab.DEBUGLEVEL.MEDIUM,t)}}static validateTicket(t,e,r){let n={};try{n[e]=vC.KeyPair.parseKeyArrayStrings({[e]:r})[e]}catch(t){return{valid:false,massage:"Broken Public Key"}}let i;try{i=gC.Ticket.fromBase64(t,n)}catch(t){(0,Eb.logger)(Ab.DEBUGLEVEL.LOW,t);return{valid:false,massage:"Wrong Ticket"}}return{valid:true,ticketId:i.getTicketId(),ticketClass:i.getTicketClass()}}}e.Authenticator=r}));var fx=t((function(t,e){Object.defineProperty(e,"__esModule",{value:true});e.AttestationCrypto=e.Eip712AttestationRequest=e.Authenticator=void 0;Object.defineProperty(e,"Authenticator",{enumerable:true,get:function(){return ox.Authenticator}});Object.defineProperty(e,"Eip712AttestationRequest",{enumerable:true,get:function(){return tx.Eip712AttestationRequest}});Object.defineProperty(e,"AttestationCrypto",{enumerable:true,get:function(){return GB.AttestationCrypto}})}));class cx{constructor(t){this.client=t}saveProof(t,e){const r=this.getProofs();r[this.getFullKey(t)]=e;localStorage.setItem(cx.STORAGE_KEY,JSON.stringify(r))}getSavedProof(t){const e=this.getProofs();const r=this.getFullKey(t);if(e[r]){return e[r]}return null}deleteProof(t){const e=this.getProofs();const r=this.getFullKey(t);if(e[r])delete e[r];localStorage.setItem(cx.STORAGE_KEY,JSON.stringify(e))}getFullKey(t){return this.TYPE+"-"+t.toLowerCase()}getProofs(){const t=localStorage.getItem(cx.STORAGE_KEY);return t&&t.length?JSON.parse(t):{}}}cx.STORAGE_KEY="tn-proof";var ux=t((function(t,e){Object.defineProperty(e,"__esModule",{value:true});let n;if(typeof crypto==="object"&&crypto.subtle){n=crypto.subtle}else{let t=r.webcrypto;if(t){n=t.subtle}else{throw new Error("webcrypto.subtle missing")}}e.default=n}));var hx=t((function(t,e){Object.defineProperty(e,"__esModule",{value:true});e.KeyStore=void 0;class r{async getOrCreateKey(t,e){let r,n;let i=t+(e?"-"+e:"");try{r=await this.getKey(i);if(r){n=(0,Eb.hexStringToUint8)(r.spki)}else{r=await ux.default.generateKey({name:t,modulusLength:1024,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},false,["sign","verify"]);n=new Uint8Array(await ux.default.exportKey("spki",r.publicKey));await this.saveKey(i,r.privateKey,r.publicKey,(0,Eb.uint8tohex)(n))}return{attestHoldingKey:r,holdingPubKey:n}}catch(t){console.log("Failed to create attestor keypair: "+t.message);throw t}}async getKey(t){return new Promise((async(e,n)=>{try{this.getDb().then((i=>{let s=i.transaction(r.TABLE_NAME,"readwrite");let a=s.objectStore(r.TABLE_NAME);let o=a.get(t);o.onsuccess=()=>{e(o.result);i.close()};o.onerror=t=>{n(t)}}))}catch(t){console.log(t);n(t.message)}}))}async saveKey(t,e,n,i){try{let s=await this.getDb();let a=s.transaction(r.TABLE_NAME,"readwrite");let o=a.objectStore(r.TABLE_NAME);let f={id:t,privateKey:e,publicKey:n,spki:i};let c=o.put(f);c.onsuccess=()=>{s.close()}}catch(t){console.log("Failed to store key"+t.message)}}async getDb(){return new Promise((function(t,e){let n=indexedDB.open(r.DB_NAME,1);n.onupgradeneeded=function(t){let e=t.target.result;if(!e.objectStoreNames.contains(r.TABLE_NAME))e.createObjectStore(r.TABLE_NAME,{keyPath:"id"})};n.onsuccess=function(e){let r=e.target.result;t(r)};n.onerror=function(t){e("Error opening database "+t.target.errorCode)}}))}}e.KeyStore=r;r.DB_NAME="AttestationKeyStore";r.TABLE_NAME="Keys"}));var lx=t((function(t,r){var n=e&&e.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")s=Reflect.decorate(t,e,r,n);else for(var o=t.length-1;o>=0;o--)if(a=t[o])s=(i<3?a(s):i>3?a(e,r,s):a(e,r))||s;return i>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(r,"__esModule",{value:true});r.EpochTimeValidity=void 0;class i{}n([(0,Jy.AsnProp)({type:Jy.AsnPropTypes.Integer})],i.prototype,"notBefore",void 0);n([(0,Jy.AsnProp)({type:Jy.AsnPropTypes.Integer})],i.prototype,"notAfter",void 0);r.EpochTimeValidity=i}));var dx=t((function(t,r){var n=e&&e.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")s=Reflect.decorate(t,e,r,n);else for(var o=t.length-1;o>=0;o--)if(a=t[o])s=(i<3?a(s):i>3?a(e,r,s):a(e,r))||s;return i>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(r,"__esModule",{value:true});r.NFTOwnershipAttestation=r.ERC721=void 0;class i{}n([(0,Jy.AsnProp)({type:Jy.AsnPropTypes.OctetString})],i.prototype,"address",void 0);n([(0,Jy.AsnProp)({type:Jy.AsnPropTypes.Integer})],i.prototype,"chainId",void 0);n([(0,Jy.AsnProp)({type:Jy.AsnPropTypes.OctetString,optional:true,repeated:"sequence"})],i.prototype,"tokenIds",void 0);r.ERC721=i;class s{constructor(){this.tokens=[]}}n([(0,Jy.AsnProp)({type:Jy.AsnPropTypes.Any})],s.prototype,"subjectPublicKey",void 0);n([(0,Jy.AsnProp)({type:i,repeated:"sequence"})],s.prototype,"tokens",void 0);n([(0,Jy.AsnProp)({type:lx.EpochTimeValidity})],s.prototype,"validity",void 0);n([(0,Jy.AsnProp)({type:Jy.AsnPropTypes.OctetString,optional:true})],s.prototype,"context",void 0);r.NFTOwnershipAttestation=s}));var vx=t((function(t,r){var n=e&&e.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")s=Reflect.decorate(t,e,r,n);else for(var o=t.length-1;o>=0;o--)if(a=t[o])s=(i<3?a(s):i>3?a(e,r,s):a(e,r))||s;return i>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(r,"__esModule",{value:true});r.EthereumAddressAttestation=void 0;class i{}n([(0,Jy.AsnProp)({type:Jy.AsnPropTypes.Any})],i.prototype,"subjectPublicKey",void 0);n([(0,Jy.AsnProp)({type:Jy.AsnPropTypes.OctetString})],i.prototype,"ethereumAddress",void 0);n([(0,Jy.AsnProp)({type:lx.EpochTimeValidity})],i.prototype,"validity",void 0);n([(0,Jy.AsnProp)({type:Jy.AsnPropTypes.OctetString,optional:true})],i.prototype,"context",void 0);r.EthereumAddressAttestation=i}));var bx=t((function(t,r){var n=e&&e.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")s=Reflect.decorate(t,e,r,n);else for(var o=t.length-1;o>=0;o--)if(a=t[o])s=(i<3?a(s):i>3?a(e,r,s):a(e,r))||s;return i>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(r,"__esModule",{value:true});r.SignedLinkedAttestation=r.LinkedAttestation=void 0;let i=class t{};n([(0,Jy.AsnProp)({type:dx.NFTOwnershipAttestation,context:0})],i.prototype,"nftOwnership",void 0);n([(0,Jy.AsnProp)({type:vx.EthereumAddressAttestation,context:1})],i.prototype,"ethereumAddress",void 0);i=n([(0,Jy.AsnType)({type:Jy.AsnTypeTypes.Choice})],i);r.LinkedAttestation=i;class s{}n([(0,Jy.AsnProp)({type:i})],s.prototype,"attestation",void 0);n([(0,Jy.AsnProp)({type:KB.AlgorithmIdentifierASN})],s.prototype,"signingAlgorithm",void 0);n([(0,Jy.AsnProp)({type:Jy.AsnPropTypes.BitString})],s.prototype,"signatureValue",void 0);r.SignedLinkedAttestation=s}));var px=t((function(t,r){var n=e&&e.__decorate||function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")s=Reflect.decorate(t,e,r,n);else for(var o=t.length-1;o>=0;o--)if(a=t[o])s=(i<3?a(s):i>3?a(e,r,s):a(e,r))||s;return i>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(r,"__esModule",{value:true});r.SignedEthereumKeyLinkingAttestation=r.EthereumKeyLinkingAttestation=void 0;class i{}n([(0,Jy.AsnProp)({type:Jy.AsnPropTypes.OctetString})],i.prototype,"subjectEthereumAddress",void 0);n([(0,Jy.AsnProp)({type:bx.SignedLinkedAttestation})],i.prototype,"linkedAttestation",void 0);n([(0,Jy.AsnProp)({type:lx.EpochTimeValidity})],i.prototype,"validity",void 0);n([(0,Jy.AsnProp)({type:Jy.AsnPropTypes.OctetString,optional:true})],i.prototype,"context",void 0);r.EthereumKeyLinkingAttestation=i;class s{}n([(0,Jy.AsnProp)({type:i})],s.prototype,"ethereumKeyLinkingAttestation",void 0);n([(0,Jy.AsnProp)({type:KB.AlgorithmIdentifierASN})],s.prototype,"signingAlgorithm",void 0);n([(0,Jy.AsnProp)({type:Jy.AsnPropTypes.BitString})],s.prototype,"signatureValue",void 0);r.SignedEthereumKeyLinkingAttestation=s}));var gx=t((function(t,e){Object.defineProperty(e,"__esModule",{value:true});e.AbstractLinkedAttestation=void 0;class r{fromObject(t){this.linkedAttestation=t}fromBytes(t){this.linkedAttestation=Jy.AsnParser.parse(t,bx.SignedLinkedAttestation)}fromBase64(t){this.fromBytes((0,Eb.base64ToUint8array)(t))}getAttestationData(){return this.linkedAttestation.attestation[this.TYPE]}getSubjectPublicKey(){return this.getAttestationData().subjectPublicKey}getEncoded(){return new Uint8Array(Jy.AsnSerializer.serialize(this.linkedAttestation))}getBase64(){return(0,Eb.uint8arrayToBase64)(this.getEncoded())}sign(t){const e=Jy.AsnSerializer.serialize(this.linkedAttestation.attestation[this.TYPE]);this.linkedAttestation.signingAlgorithm=new KB.AlgorithmIdentifierASN;this.linkedAttestation.signingAlgorithm.algorithm="1.2.840.10045.4.2";this.linkedAttestation.signatureValue=(0,Eb.hexStringToUint8)(t.signRawBytesWithEthereum(Array.from(new Uint8Array(e))))}verify(t){const e=Jy.AsnSerializer.serialize(this.getAttestationData());let r=(0,Eb.hexStringToUint8)(dC.ethers.utils.keccak256(new Uint8Array(e)));let n=dC.ethers.utils.recoverPublicKey(r,dC.ethers.utils.splitSignature(new Uint8Array(this.linkedAttestation.signatureValue)));if(n.substring(2)!==t.getPublicKeyAsHexStr())throw new Error("Attestor public key does not match, expected "+t.getPublicKeyAsHexStr()+" got "+n.substring(2));let i=Math.round(Date.now()/1e3);let s=this.getAttestationData();if(s.validity.notBefore>i)throw new Error("Linked attestation is not yet valid");if(s.validity.notAfter<i)throw new Error("Linked attestation has expired")}}e.AbstractLinkedAttestation=r}));var yx=t((function(t,e){Object.defineProperty(e,"__esModule",{value:true});e.EthereumAddressAttestation=void 0;class r extends gx.AbstractLinkedAttestation{constructor(){super(...arguments);this.TYPE="ethereumAddress"}create(t,e,r,n,i,s){this.linkedAttestation=new bx.SignedLinkedAttestation;this.linkedAttestation.attestation=new bx.LinkedAttestation;this.linkedAttestation.attestation.ethereumAddress=new vx.EthereumAddressAttestation;this.linkedAttestation.attestation.ethereumAddress.subjectPublicKey=t;if(!s)s=Math.round(Date.now()/1e3);const a=s+n;this.linkedAttestation.attestation.ethereumAddress.validity=new lx.EpochTimeValidity;this.linkedAttestation.attestation.ethereumAddress.validity.notBefore=s;this.linkedAttestation.attestation.ethereumAddress.validity.notAfter=a;this.linkedAttestation.attestation.ethereumAddress.ethereumAddress=(0,Eb.hexStringToUint8)(e);if(i)this.linkedAttestation.attestation.ethereumAddress.context=i;this.sign(r)}}e.EthereumAddressAttestation=r}));var wx=t((function(t,e){Object.defineProperty(e,"__esModule",{value:true});e.NFTOwnershipAttestation=void 0;class r extends gx.AbstractLinkedAttestation{constructor(){super(...arguments);this.TYPE="nftOwnership"}create(t,e,r,n,i,s){this.linkedAttestation=new bx.SignedLinkedAttestation;this.linkedAttestation.attestation=new bx.LinkedAttestation;this.linkedAttestation.attestation.nftOwnership=new dx.NFTOwnershipAttestation;this.linkedAttestation.attestation.nftOwnership.subjectPublicKey=t;if(!s)s=Math.round(Date.now()/1e3);const a=s+n;this.linkedAttestation.attestation.nftOwnership.validity=new lx.EpochTimeValidity;this.linkedAttestation.attestation.nftOwnership.validity.notBefore=s;this.linkedAttestation.attestation.nftOwnership.validity.notAfter=a;for(let t of e){let e=new dx.ERC721;e.address=(0,Eb.hexStringToUint8)(t.address);e.chainId=t.chainId;if(t.tokenIds){e.tokenIds=[];for(let r of t.tokenIds){e.tokenIds.push((0,Eb.bnToUint8)(r))}}this.linkedAttestation.attestation.nftOwnership.tokens.push(e)}if(i)this.linkedAttestation.attestation.nftOwnership.context=i;this.sign(r)}}e.NFTOwnershipAttestation=r}));var mx=t((function(t,e){Object.defineProperty(e,"__esModule",{value:true});e.EthereumKeyLinkingAttestation=void 0;const r=px;const n="RSASSA-PKCS1-v1_5";class i{create(t,e,n,i,s){let a=Jy.AsnParser.parse((0,Eb.base64ToUint8array)(t),bx.SignedLinkedAttestation);this.linkAttest=new px.SignedEthereumKeyLinkingAttestation;this.linkAttest.ethereumKeyLinkingAttestation=new r.EthereumKeyLinkingAttestation;this.linkAttest.ethereumKeyLinkingAttestation.subjectEthereumAddress=(0,Eb.hexStringToUint8)(e);this.linkAttest.ethereumKeyLinkingAttestation.linkedAttestation=a;if(!s)s=Math.round(Date.now()/1e3);const o=s+n;this.linkAttest.ethereumKeyLinkingAttestation.validity=new lx.EpochTimeValidity;this.linkAttest.ethereumKeyLinkingAttestation.validity.notBefore=s;this.linkAttest.ethereumKeyLinkingAttestation.validity.notAfter=o;if(!i)this.linkAttest.ethereumKeyLinkingAttestation.context=i}async sign(t){const e=Jy.AsnSerializer.serialize(this.linkAttest.ethereumKeyLinkingAttestation);const r=await ux.default.sign({name:n,saltLength:128},t,e);this.linkAttest.signingAlgorithm=new KB.AlgorithmIdentifierASN;this.linkAttest.signingAlgorithm.algorithm="1.2.840.113549.1.1.11";this.linkAttest.signatureValue=new Uint8Array(r)}fromBytes(t){this.linkAttest=Jy.AsnParser.parse(t,px.SignedEthereumKeyLinkingAttestation)}fromBase64(t){this.fromBytes((0,Eb.base64ToUint8array)(t))}getEncoded(){return new Uint8Array(Jy.AsnSerializer.serialize(this.linkAttest))}getBase64(){return(0,Eb.uint8arrayToBase64)(this.getEncoded())}getAttestation(){return this.linkAttest}getSignedLinkedAttestation(){return this.linkAttest.ethereumKeyLinkingAttestation.linkedAttestation}getLinkedAttestationData(){const t=this.getSignedLinkedAttestation();return t.attestation.ethereumAddress??t.attestation.nftOwnership}getLinkedAttestationObject(){const t=this.getSignedLinkedAttestation();let e;if(t.attestation.ethereumAddress){e=new yx.EthereumAddressAttestation;e.fromObject(t)}else{e=new wx.NFTOwnershipAttestation;e.fromObject(t)}return e}async verify(t){let e=this.getLinkedAttestationObject();e.verify(t);let r=e.getSubjectPublicKey();const i=Jy.AsnSerializer.serialize(this.linkAttest.ethereumKeyLinkingAttestation);const s=await ux.default.importKey("spki",new Uint8Array(r),{name:n,hash:{name:"SHA-256"}},true,["verify"]);const a=await ux.default.verify({name:n,saltLength:128},s,this.linkAttest.signatureValue,i);if(!a)throw new Error("Signature verification failed");let o=Math.round(Date.now()/1e3);let f=this.linkAttest.ethereumKeyLinkingAttestation;if(f.validity.notBefore>o)throw new Error("Linked attestation is not yet valid");if(f.validity.notAfter<o)throw new Error("Linked attestation has expired")}}e.EthereumKeyLinkingAttestation=i}));var Ax=undefined&&undefined.__awaiter||function(t,e,r,n){function i(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,s){function a(t){try{f(n.next(t))}catch(t){s(t)}}function o(t){try{f(n["throw"](t))}catch(t){s(t)}}function f(t){t.done?r(t.value):i(t.value).then(a,o)}f((n=n.apply(t,e||[])).next())}))};class Ex{static getLinkPrivateKey(){return Ax(this,void 0,void 0,(function*(){let t=yield Ex.keyStore.getOrCreateKey(Ex.HOLDING_KEY_ALGORITHM);return t.attestHoldingKey.privateKey}))}static getLinkPublicKey(){return Ax(this,void 0,void 0,(function*(){let t=yield Ex.keyStore.getOrCreateKey(Ex.HOLDING_KEY_ALGORITHM);return Eb.uint8tohex(t.holdingPubKey)}))}static getChallenge(t,e){return Ax(this,void 0,void 0,(function*(){try{return yield this.apiRequest(t,"POST","get-challenge",{address:e})}catch(t){throw new Error("Failed to get address challenge: "+t.message)}}))}static getAttestation(t,e){return Ax(this,void 0,void 0,(function*(){try{return yield this.apiRequest(t,"POST","issue-attestation",e)}catch(t){throw new Error("Failed to get address attestation: "+t.message)}}))}static apiRequest(t,e,r,n){return Ax(this,void 0,void 0,(function*(){let i=yield fetch(t+"api/"+r,{method:e,body:JSON.stringify(n),credentials:"include",headers:{"Content-Type":"application/json"}});if(i.status>299||i.status<200){let t;try{t=(yield i.json()).error}catch(e){t="HTTP Request error: "+i.statusText}throw new Error(t)}return yield i.json()}))}static createAndSignLinkAttestation(t,e,r){return Ax(this,void 0,void 0,(function*(){const n=new mx.EthereumKeyLinkingAttestation;n.create(t,e,3600+600,undefined,Math.round(Date.now()/1e3)-600);yield n.sign(r);return n.getBase64()}))}}Ex.HOLDING_KEY_ALGORITHM="RSASSA-PKCS1-v1_5";Ex.keyStore=new hx.KeyStore;var kx=undefined&&undefined.__awaiter||function(t,e,r,n){function i(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,s){function a(t){try{f(n.next(t))}catch(t){s(t)}}function o(t){try{f(n["throw"](t))}catch(t){s(t)}}function f(t){t.done?r(t.value):i(t.value).then(a,o)}f((n=n.apply(t,e||[])).next())}))};class Mx extends cx{constructor(){super(...arguments);this.TYPE="attestedAddress"}getTokenProof(t,e,r){var n,i;return kx(this,void 0,void 0,(function*(){let e=yield this.client.getWalletProvider();if(!e.safeConnectAvailable())throw new Error("Safe connect is not available");if(!t.onChain)throw new Error(this.TYPE+" is not available for off-chain tokens.");if(!((n=r.options)===null||n===void 0?void 0:n.address))throw new Error("Address attestation requires a secondary address.");let s=e.getConnectedWalletData()[0];let a=this.getSavedProof(s.address);if(((i=a===null||a===void 0?void 0:a.data)===null||i===void 0?void 0:i.expiry)<Date.now()){this.deleteProof(s.address);a=null}if(!a){if(s.provider instanceof Px){yield s.provider.initSafeConnect();a=this.getSavedProof(s.address)}else{let t=yield Ex.getChallenge(e.safeConnectOptions.url,s.address);let r=yield e.signMessage(s.address,t.messageToSign);let n={type:"address_attest",subject:yield Ex.getLinkPublicKey(),address:s.address,signature:r};let i=yield Ex.getAttestation(e.safeConnectOptions.url,n);a={type:this.TYPE,data:Object.assign({expiry:i.expiry},i.data),target:{address:i.data.address}};this.saveProof(i.data.address,a)}if(!a)throw new Error("Could not get address attestation from safe connect")}let o=a.data.attestation;a.data.attestation=yield Ex.createAndSignLinkAttestation(o,r.options.address,yield Ex.getLinkPrivateKey());return a}))}}var Bx=undefined&&undefined.__awaiter||function(t,e,r,n){function i(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,s){function a(t){try{f(n.next(t))}catch(t){s(t)}}function o(t){try{f(n["throw"](t))}catch(t){s(t)}}function f(t){t.done?r(t.value):i(t.value).then(a,o)}f((n=n.apply(t,e||[])).next())}))};class Sx extends cx{constructor(){super(...arguments);this.TYPE="scChallenge"}getTokenProof(t,e,r){return Bx(this,void 0,void 0,(function*(){let e=yield this.client.getWalletProvider();if(!e.safeConnectAvailable())throw new Error("Safe connect is not available");if(!t.onChain)throw new Error(this.TYPE+" is not available for off-chain tokens.");let r=e.getConnectedWalletData()[0].address;let n=this.getSavedProof(r);if(n.data.expiry<Date.now()){this.deleteProof(r);n=null}let i=yield e.getSafeConnectProvider();if(!n){let t=e.getConnectedWalletData()[0].provider;if(t instanceof Px){yield i.initSafeConnect();n=this.getSavedProof(r);if(!n)throw new Error("Could not get proof from safe connect")}else{throw new Error("Only safe connect supports this authentication type at this time")}}return n}))}}var Cx=undefined&&undefined.__awaiter||function(t,e,r,n){function i(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,s){function a(t){try{f(n.next(t))}catch(t){s(t)}}function o(t){try{f(n["throw"](t))}catch(t){s(t)}}function f(t){t.done?r(t.value):i(t.value).then(a,o)}f((n=n.apply(t,e||[])).next())}))};var xx;(function(t){t["CONNECT"]="connect";t["NEW_CHALLENGE"]="new_challenge"})(xx||(xx={}));class Px{constructor(t,e){this.keyStore=new hx.KeyStore;this.messaging=new X;this.ui=t;this.options=e}initSafeConnect(){var t;return Cx(this,void 0,void 0,(function*(){let e=yield this.messaging.sendMessage({action:xx.CONNECT,origin:this.options.url,timeout:0,data:yield this.getInitialProofRequest()},true,this.ui);if(!e)return;if(!this.options.initialProof)return e.data.address;let r=e.data;this.processProofResult(r);return(t=r.data)===null||t===void 0?void 0:t.address}))}processProofResult(t){let e;let r;switch(this.options.initialProof){case"address_attest":e=new Mx;r={type:e.TYPE,data:Object.assign({expiry:t.expiry},t.data),target:{address:t.data.address}};e.saveProof(t.data.address,r);break;case"simple_challenge":e=new Sx;r={type:e.TYPE,data:t.data,target:{address:t.data.address}};break}e.saveProof(t.data.address,r)}getInitialProofRequest(){return Cx(this,void 0,void 0,(function*(){let t={};if(!this.options.initialProof)return;t.type=this.options.initialProof;if(this.options.initialProof!=="simple_challenge"){t.subject=yield Ex.getLinkPublicKey()}return t}))}signUNChallenge(t){return Cx(this,void 0,void 0,(function*(){let e=yield this.messaging.sendMessage({action:xx.CONNECT,origin:this.options.url,timeout:0,data:{type:"signed_un",un:encodeURIComponent(JSON.stringify(t))}},true,this.ui);if(!e)return;return e.data.data.signature}))}}const Ix=Object.freeze({__proto__:null,get SafeConnectAction(){return xx},SafeConnectProvider:Px});var Tx=undefined&&undefined.__awaiter||function(t,e,r,n){function i(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,s){function a(t){try{f(n.next(t))}catch(t){s(t)}}function o(t){try{f(n["throw"](t))}catch(t){s(t)}}function f(t){t.done?r(t.value):i(t.value).then(a,o)}f((n=n.apply(t,e||[])).next())}))};class Ox{static getNewUN(t){return Tx(this,void 0,void 0,(function*(){try{const e=yield fetch(t);return yield e.json()}catch(t){throw new Error("Failed to fetch UN challenge: "+t.message)}}))}static recoverAddress(t){if(!t.signature)throw new Error("Null signature");const e=Ui(t.messageToSign);const r=Bt(e);return vc(r,t.signature).toLowerCase()}static validateChallenge(t,e){return Tx(this,void 0,void 0,(function*(){const r=yield fetch(t,{method:"POST",cache:"no-cache",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(e)});const n=yield r.json();return n.address}))}}var Dx=undefined&&undefined.__awaiter||function(t,e,r,n){function i(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,s){function a(t){try{f(n.next(t))}catch(t){s(t)}}function o(t){try{f(n["throw"](t))}catch(t){s(t)}}function f(t){t.done?r(t.value):i(t.value).then(a,o)}f((n=n.apply(t,e||[])).next())}))};class Nx extends cx{constructor(){super(...arguments);this.TYPE="signedUN"}getTokenProof(t,e,r){var n,i;return Dx(this,void 0,void 0,(function*(){let t=yield this.client.getWalletProvider();if(t.getConnectedWalletData().length===0){throw new Error("WALLET_REQUIRED")}let e=t.getConnectedWalletData()[0].address;let s=this.getSavedProof(e);if(s){let t=s===null||s===void 0?void 0:s.data;if(t.expiration<Date.now()||Ox.recoverAddress(t)!==e.toLowerCase()){this.deleteProof(e);s=null}}if(!s){let a=t.getWalletProvider(e);s={type:this.TYPE,data:{},target:{address:e}};let o=(i=(n=r.options)===null||n===void 0?void 0:n.unEndPoint)!==null&&i!==void 0?i:Nx.DEFAULT_ENDPOINT;const f=yield Ox.getNewUN(o);let c;if(a instanceof Px){c=yield a.signUNChallenge(f)}else{c=yield t.signMessage(e,f.messageToSign)}f.signature=c;let u=Ox.recoverAddress(f);if(u!==e.toLowerCase()){throw new Error("Address signature is invalid")}f.address=u;s.data=f;this.saveProof(e,s)}return s}))}}Nx.DEFAULT_ENDPOINT="https://attestation-verify.tokenscript.org/un";var Ux=undefined&&undefined.__awaiter||function(t,e,r,n){function i(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,s){function a(t){try{f(n.next(t))}catch(t){s(t)}}function o(t){try{f(n["throw"](t))}catch(t){s(t)}}function f(t){t.done?r(t.value):i(t.value).then(a,o)}f((n=n.apply(t,e||[])).next())}))};const jx=(t,e={})=>{let r=[];if(t.length&&typeof e==="object"&&Object.keys(e).length){let n=Object.keys(e);t.forEach((t=>{let i=1;n.forEach((r=>{if(t[r]&&t[r].toString()!==e[r].toString())i=0}));if(i)r.push(t)}));return r}else{return t}};const Rx=t=>{const e=localStorage.getItem(t);let r=[];let n={tokens:[],noTokens:true,success:true};try{if(e&&e.length){r=JSON.parse(e);if(r.length!==0){r.forEach((t=>{if(t.token&&t.secret)n.tokens.push(t)}))}if(n.tokens.length){n.noTokens=false}}}catch(t){n.success=false}return n};const Fx=(t,e,r,n=false)=>{const i=JSON.parse(t);if(i.length){return i.map((t=>{if(t.token){return Lx(t,e,r,n)}}))}else{return[]}};const Lx=(t,e,r,n=false)=>{if(t.token){let i=new e(I(t.token).buffer);if(i&&i[r]){let e=i[r];e=Qx(e);return n?Object.assign({signedToken:t.token},e):e}}};function Qx(t){Object.keys(t).forEach((e=>{if(t[e]instanceof ArrayBuffer){t[e]=Array.from(new Uint8Array(t[e]))}}));return t}const Hx=(t,e)=>{if(t){localStorage.setItem(e,JSON.stringify(t))}};const Gx=(t,e,r,n=null)=>{if(n===null)n=new URLSearchParams(window.location.search);const i=n.get(t);const s=n.get(e);let a=n.get(r);const o=a?a:"";if(!(i&&s))throw new Error("Incomplete token params in URL.");return{token:i,secret:s,id:decodeURIComponent(o),magic_link:window.location.href}};const Kx=(t,e)=>Ux(void 0,void 0,void 0,(function*(){let r=Jx(t,e);if(!r)return null;let n=r.token;let i=r.secret;let s={ticketBlob:n,ticketSecret:i,attestationOrigin:e.attestationOrigin};if(r&&r.id)s.email=r.id;if(r&&r.magic_link){s.magicLink=r.magic_link}if(e.attestationInTab)s.attestationInTab=true;return s}));const Jx=(t,e)=>{if(!t||!Object.keys(t).length)return;let r=Rx(e.itemStorageKey);if(r.success&&!r.noTokens){let n=r.tokens;let i={};if(n.length){n.forEach((r=>{if(r.token){const n=e.tokenParser;let s=new n(I(r.token).buffer);if(s&&s[e.unsignedTokenDataName]){let n=s[e.unsignedTokenDataName];n=Qx(n);if(P(n,t)){i=r}}}}))}return i}return null};var zx=undefined&&undefined.__awaiter||function(t,e,r,n){function i(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,s){function a(t){try{f(n.next(t))}catch(t){s(t)}}function o(t){try{f(n["throw"](t))}catch(t){s(t)}}function f(t){t.done?r(t.value):i(t.value).then(a,o)}f((n=n.apply(t,e||[])).next())}))};class Wx{constructor(t,e,r,n,i,s,a,o){this.tokenDef=r;this.tokenObj=n;this.address=i;this.wallet=s;this.redirectUrl=a;this.unsignedToken=o;this.buttonOverlay=null;this.tryingToGetAttestationInBackground=false;this.iframe=null;this.iframeWrap=null;this.attestationBlob=null;this.attestationSecret=null;this.wrapperBase="tn_attestation_open";this.interval=null;this.outlet=t;this.evtid=e;this.base64senderPublicKeys=r.base64senderPublicKeys;this.base64attestorPubKey=r.base64attestorPubKey;this.signedTokenBlob=n.ticketBlob;this.magicLink=n.magicLink;this.email=n.email;this.signedTokenSecret=n.ticketSecret;this.attestationOrigin=n.attestationOrigin;this.attestationInTab=n.attestationInTab}openAttestationApp(){if(this.attestationInTab&&!this.tryingToGetAttestationInBackground){S(2,"display new TAB to attest, ask parent to show current iframe");if(this.outlet)this.outlet.sendMessageResponse({evtid:this.evtid,evt:W.SHOW_FRAME,max_width:"500px",min_height:"300px"});let t;t=document.createElement("div");t.classList.add(this.wrapperBase+"_btn");t.innerHTML="Click to get Email Attestation";t.addEventListener("click",(()=>{this.attestationTabHandler=window.open(this.attestationOrigin,"Attestation");t.remove();let e=this.buttonOverlay.querySelector("."+this.wrapperBase+"_title");let r=this.buttonOverlay.querySelector("."+this.wrapperBase+"_subtitle");if(e){e.innerHTML="Email Attestation verification in progress"}if(r){r.innerHTML="Please complete the verification process to continue"}this.interval=setInterval((()=>{if(this.attestationTabHandler.closed){console.log("child tab closed... ");clearInterval(this.interval);this.rejectHandler(new Error("User closed TAB"))}}),2e3)}));let e=this.wrapperBase+"_wrap_"+Date.now();const r=document.createElement("style");r.innerHTML=`\n\t\t\t\t#${e} {\n\t\t\t\t\twidth:100%;\n\t\t\t\t\theight: 100vh; \n\t\t\t\t\tposition: fixed; \n\t\t\t\t\talign-items: center; \n\t\t\t\t\tjustify-content: center;\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\ttop: 0; \n\t\t\t\t\tleft: 0; \n\t\t\t\t\tbackground: #000f;\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tflex-direction: column;\n\t\t\t\t\tpadding: 30px;\n\t\t\t\t}\n\t\t\t\t#${e} div:hover {\n\t\t\t\t\tbox-shadow: 0 0px 14px #ffff !important;\n\t\t\t\t}\n\t\t\t\t#${e} .${this.wrapperBase}_content {\n\t\t\t\t\tcolor: #fff; \n\t\t\t\t\ttext-align: center;\n\t\t\t\t}\n\t\t\t\t#${e} .${this.wrapperBase}_title {\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t#${e} .${this.wrapperBase}_subtitle {\n\t\t\t\t\tfont-size:18px;\n\t\t\t\t\tcolor: #ccc;\n\t\t\t\t}\n\t\t\t\t#${e} .${this.wrapperBase}_btn {\n\t\t\t\t\tmargin: 20px auto 0;\n\t\t\t\t\tpadding: 5px 15px;\n\t\t\t\t\tbackground: #0219fa;\n\t\t\t\t\tfont-weight: 700;\n\t\t\t\t\tfont-size: 20px;\n\t\t\t\t\tline-height: 1.3;\n\t\t\t\t\tborder-radius: 100px;\n\t\t\t\t\tcolor: #fff;\n\t\t\t\t\tcursor: pointer;\n\t\t\t\t\tdisplay: block;\n\t\t\t\t\ttext-align: center;\n\t\t\t\t}\n\n\t\t\t\t@media (max-width: 768px){\n\t\t\t\t\t#${e} {\n\t\t\t\t\t\tpadding: 20px 10px;\n\t\t\t\t\t}\n\t\t\t\t\t#${e} .${this.wrapperBase}_title {\n\t\t\t\t\t\tfont-size: 24px;\n\t\t\t\t\t}\n\t\t\t\t\t#${e} .${this.wrapperBase}_btn {\n\t\t\t\t\t\tpadding: 10px 15px;\n\t\t\t\t\t\tfont-size: 18px;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t`;this.buttonOverlay=document.createElement("div");this.buttonOverlay.id=e;this.buttonOverlay.innerHTML=`<h1 class="${this.wrapperBase}_content ${this.wrapperBase}_title">Needs email attestation to complete verification.</h1><p class="${this.wrapperBase}_content ${this.wrapperBase}_subtitle"></p>`;this.buttonOverlay.appendChild(t);this.buttonOverlay.appendChild(r);document.body.appendChild(this.buttonOverlay)}else{S(2,"open attestation in iframe");this.createIframe()}}authenticate(){return new Promise(((t,e)=>{this.rejectHandler=e;if(this.redirectUrl){const t=new URLSearchParams(document.location.hash.substring(1));const e=new URLSearchParams;e.set("email",this.email);e.set("address",this.address);e.set("wallet",this.wallet);const r=new URL(this.redirectUrl);const n=R(new URLSearchParams(r.hash.substring(1)));n.set(q+"action",_.EMAIL_ATTEST_CALLBACK);n.set(q+"issuer",this.tokenDef.collectionID);n.set(q+"token",JSON.stringify(this.unsignedToken));const i=t.get(q+"requestor");if(i){n.set(q+"requestor",i)}r.hash=n.toString();e.set("email-attestation-callback",r.href);const s=`${this.attestationOrigin}#${e.toString()}`;S(2,"authenticate. go to: ",s);document.location.href=s;return}if(this.attestationInTab&&!L()){this.tryingToGetAttestationInBackground=true}if(!this.attestationOrigin)return e(new Error("Attestation origin is null"));window.addEventListener("message",(r=>{if(!this.attestationOrigin)return;let n=new URL(this.attestationOrigin);if(r.origin!==n.origin){return}if(this.iframe&&this.iframeWrap&&this.iframe.contentWindow||this.attestationTabHandler){this.postMessageAttestationListener(r,t,e)}}));this.openAttestationApp(e)}))}createIframe(){var t;const e=document.createElement("iframe");e.setAttribute("allow","clipboard-read");this.iframe=e;e.src=(t=this.attestationOrigin)!==null&&t!==void 0?t:"";e.style.width="800px";e.style.height="800px";e.style.maxWidth="100%";e.style.background="#fff";let r=document.createElement("div");this.iframeWrap=r;r.setAttribute("style","width:101%;min-height: 100vh; position: fixed; align-items: center; justify-content: center;display: none;top: 0; left: 0; background: #fffa");r.appendChild(e);document.body.appendChild(r)}getUseToken(t,e){return zx(this,void 0,void 0,(function*(){try{if(!this.signedTokenSecret){throw new Error("signedTokenSecret required")}if(!e){throw new Error("attestationSecret required")}if(!this.signedTokenBlob){throw new Error("signedTokenBlob required")}if(!t){throw new Error("attestationBlob required")}if(!this.base64attestorPubKey){throw new Error("base64attestorPubKey required")}if(!this.base64senderPublicKeys){throw new Error("base64senderPublicKeys required")}let r=yield fx.Authenticator.getUseTicket(this.signedTokenSecret,e,this.signedTokenBlob,t,this.base64attestorPubKey,this.base64senderPublicKeys);if(r){S(2,"this.authResultCallback( useToken ): ");if(this.buttonOverlay)this.buttonOverlay.remove();return r}else{S(2,"this.authResultCallback( empty ): ");throw new Error("Empty useToken")}}catch(t){S(2,`UseDevconTicket failed.`,t.message);S(3,t);if(this.buttonOverlay)this.buttonOverlay.remove();throw new Error("Failed to create UseTicket. "+t.message)}}))}postMessageAttestationListener(t,e,r){var n,i,s,a;return zx(this,void 0,void 0,(function*(){S(2,"postMessageAttestationListener event (auth-handler)",t.data);let o=this.attestationTabHandler?this.attestationTabHandler:this.iframe.contentWindow;if(typeof t.data.ready!=="undefined"&&t.data.ready===true){let t={force:false};if(this.email)t.email=this.email;if(this.wallet)t.wallet=this.wallet;if(this.address)t.address=this.address;o.postMessage(t,this.attestationOrigin);return}if(typeof t.data.display!=="undefined"){if(t.data.display===true){if(this.iframeWrap){if(this.tryingToGetAttestationInBackground){this.tryingToGetAttestationInBackground=false;this.iframe.remove();this.iframeWrap.remove();this.openAttestationApp();return}this.iframeWrap.style.display="flex";if(this.outlet)this.outlet.sendMessageResponse({evtid:this.evtid,evt:W.SHOW_FRAME})}}else{if(t.data.error){S(2,"Error received from the iframe: "+t.data.error);r(new Error(t.data.error));if(this.buttonOverlay)this.buttonOverlay.remove()}if(this.iframeWrap){this.iframeWrap.style.display="none"}}}if(!((n=t.data)===null||n===void 0?void 0:n.attestation)||!((i=t.data)===null||i===void 0?void 0:i.requestSecret)){return}if(this.attestationTabHandler){this.attestationTabHandler.close()}if(this.iframeWrap){this.iframeWrap.remove()}this.attestationBlob=(s=t.data)===null||s===void 0?void 0:s.attestation;this.attestationSecret=(a=t.data)===null||a===void 0?void 0:a.requestSecret;try{const t=this.getUseToken(this.attestationBlob,this.attestationSecret);e(t)}catch(t){r(t)}}))}}var qx=undefined&&undefined.__awaiter||function(t,e,r,n){function i(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,s){function a(t){try{f(n.next(t))}catch(t){s(t)}}function o(t){try{f(n["throw"](t))}catch(t){s(t)}}function f(t){t.done?r(t.value):i(t.value).then(a,o)}f((n=n.apply(t,e||[])).next())}))};const Vx={tokenUrlName:"ticket",tokenSecretName:"secret",tokenIdName:"id",unsignedTokenDataName:"ticket",itemStorageKey:"dcTokens",signedTokenWhitelist:[],whitelistDialogWidth:"450px",whitelistDialogHeight:"350px"};class Yx{constructor(t){const e=Ly.parse(x(t),pC.SignedDevconTicket);this.ticket=e.ticket;S(3,this.ticket)}}class _x{constructor(t,e=false,r=null){this.singleUse=false;this.tokenConfig=Object.assign(Vx,t);this.singleUse=e;if(!this.tokenConfig.tokenParser){this.tokenConfig.tokenParser=Yx}this.tokenConfig.signedTokenWhitelist=this.tokenConfig.signedTokenWhitelist.map((t=>{try{return new URL(t).origin}catch(t){S(2,"Failed to validate whitelist origin: "+t.message)}}));if(r){this.urlParams=r}else{let t=window.location.hash.length>1?"?"+window.location.hash.substring(1):window.location.search;this.urlParams=new URLSearchParams(t)}if(!this.singleUse){this.pageOnLoadEventHandler()}}getDataFromQuery(t,e=true){t=(e?q:"")+t;return this.urlParams?this.urlParams.get(t):""}getFilter(){const t=this.getDataFromQuery("filter");return t?JSON.parse(t):{}}pageOnLoadEventHandler(){var t;return qx(this,void 0,void 0,(function*(){const e=this.getDataFromQuery("evtid");const r=this.getDataFromQuery("action");const n=this.getDataFromQuery("access");const i=this.getDataFromQuery("requestor");if(i)this.redirectCallbackUrl=new URL(i);S(2,"Outlet received event ID "+e+" action "+r+" at "+document.location.href);try{switch(r){case _.GET_ISSUER_TOKENS:{yield this.whitelistCheck(e,n==="write"?"write":"read");this.sendTokens(e);break}case _.EMAIL_ATTEST_CALLBACK:{const t=this.redirectCallbackUrl;const r=this.getDataFromQuery("issuer");try{const n=this.getDataFromQuery("token");let i=JSON.parse(n);const s=this.getDataFromQuery("attestation",false);const a="0x"+this.getDataFromQuery("requestSecret",false);let o=new Wx(this,e,this.tokenConfig,yield Kx(i,this.tokenConfig),null,null,false);const f=yield o.getUseToken(s,a);if(t){const e=new URLSearchParams(t.hash.substring(1));e.set(q+"action","proof-callback");e.set(q+"issuer",r);e.set(q+"attestation",f);e.delete("email");e.delete("#email");let n=new _x(this.tokenConfig,true);let i=n.prepareTokenOutput({});S(2,"issuerTokens: ",i);e.set(q+"tokens",JSON.stringify(i));t.hash=e.toString();console.log("urlToRedirect from OutletAction.EMAIL_ATTEST_CALLBACK: ",t.href);document.location.href=t.href;return}this.dispatchAuthCallbackEvent(r,f,null)}catch(e){if(t)return this.proofRedirectError(r,e.message);this.dispatchAuthCallbackEvent(r,null,e.message)}document.location.hash=R(this.urlParams,["attestation","requestSecret","address","wallet"]).toString();break}case _.GET_PROOF:{const t=this.getDataFromQuery("token");const r=this.getDataFromQuery("wallet");const n=this.getDataFromQuery("address");C(t,"unsigned token is missing");this.sendTokenProof(e,t,n,r);break}default:{if(!this.singleUse){yield this.whitelistCheck(e,"write");yield this.readMagicLink();this.sendTokens(e)}break}}}catch(r){console.error(r);this.sendErrorResponse(e,(t=r===null||r===void 0?void 0:r.message)!==null&&t!==void 0?t:r,this.getDataFromQuery("issuer"))}}))}readMagicLink(){return qx(this,void 0,void 0,(function*(){const{tokenUrlName:t,tokenSecretName:e,tokenIdName:r,itemStorageKey:n}=this.tokenConfig;try{const i=Gx(t,e,r,this.urlParams);let s=Rx(n);const a=this.mergeNewToken(i,s.tokens);if(a!==false){Hx(a,n)}const o=new Event("tokensupdated");document.body.dispatchEvent(o)}catch(t){}}))}mergeNewToken(t,e){const r=Lx(t,this.tokenConfig.tokenParser,this.tokenConfig.unsignedTokenDataName,false);const n=this.getUniqueTokenId(r);for(const[r,i]of e.entries()){if(i.token===t.token){return false}const s=Lx(i,this.tokenConfig.tokenParser,this.tokenConfig.unsignedTokenDataName,false);const a=this.getUniqueTokenId(s);if(n===a){e[r]=t;return e}}e.push(t);return e}getUniqueTokenId(t){var e;return`${t.devconId}-${(e=t.ticketIdNumber)!==null&&e!==void 0?e:t.ticketIdString}`}dispatchAuthCallbackEvent(t,e,r){const n=new CustomEvent("auth-callback",{detail:{proof:e,issuer:t,error:r}});window.dispatchEvent(n)}whitelistCheck(t,e){var r;return qx(this,void 0,void 0,(function*(){if(!window.parent&&!window.opener||!document.referrer)return;const n=new URL(document.referrer).origin;if(n===document.location.origin)return;let i=(r=JSON.parse(localStorage.getItem("tn-whitelist")))!==null&&r!==void 0?r:{};const s=this.tokenConfig.signedTokenWhitelist.indexOf(n)===-1&&(!i[n]||i[n].type==="read"&&e==="write");if(s){return new Promise(((r,s)=>{const a=e==="read"?"read":"read & write";const o=`${n} is requesting ${a} access to your ${this.tokenConfig.title} tickets`;const f='<button id="tn-access-accept">Accept</button>';const c='<button id="tn-access-deny">Deny</button>';const u=this.tokenConfig.whitelistDialogRenderer?this.tokenConfig.whitelistDialogRenderer(o,f,c):`\n\t\t\t\t\t\t<div style="font-family: sans-serif; text-align: center; position: absolute; width: 100vw; min-height: 100vh;top: 0;\n\t\t\t\t\t\tleft: 0;\n\t\t\t\t\t\tbackground: #0C0A50;\n\t\t\t\t\t\tz-index: 99999;\n\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\tflex-direction: column;\n\t\t\t\t\t\tjustify-content: center;\n\t\t\t\t\t\talign-items: center;\n\t\t\t\t\t\tcolor: #fff;\n\t\t\t\t\t\tpadding: 30px;\n\t\t\t\t\t\tfont-size: 24px;\n\t\t\t\t\t\tline-height: 1.2;">\n\t\t\t\t\t\t\t<p>${o}</p>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t${f}\n\t\t\t\t\t\t\t${c}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t`;document.body.insertAdjacentHTML("beforeend",u);document.getElementById("tn-access-accept").addEventListener("click",(()=>qx(this,void 0,void 0,(function*(){if(!i[n]||e!==i[n].type){i[n]={type:e};localStorage.setItem("tn-whitelist",JSON.stringify(i))}r()}))));document.getElementById("tn-access-deny").addEventListener("click",(()=>{s("USER_ABORT")}));this.sendMessageResponse({evtid:t,evt:W.SHOW_FRAME,max_width:this.tokenConfig.whitelistDialogWidth,min_height:this.tokenConfig.whitelistDialogHeight})}))}}))}prepareTokenOutput(t){var e;const r=localStorage.getItem(this.tokenConfig.itemStorageKey);if(!r)return[];let n=false;if(((e=this.tokenConfig.signedTokenWhitelist)===null||e===void 0?void 0:e.length)&&this.tokenConfig.signedTokenWhitelist.indexOf(this.getRequestOrigin())>-1){n=true}const i=Fx(r,this.tokenConfig.tokenParser,this.tokenConfig.unsignedTokenDataName,n);return jx(i,t)}sendTokenProof(t,e,r,n){return qx(this,void 0,void 0,(function*(){if(!e)return"error";const i=JSON.parse(e);const s=this.getDataFromQuery("redirect")==="true"?document.location.href:false;try{let e=yield Kx(i,this.tokenConfig);let a=new Wx(this,t,this.tokenConfig,e,r,n,s,i);let o=yield a.authenticate();this.sendMessageResponse({evtid:t,evt:Z.PROOF,data:{issuer:this.tokenConfig.collectionID,proof:o}})}catch(e){S(2,e);if(s)return this.proofRedirectError(this.getDataFromQuery("issuer"),e.message);this.sendErrorResponse(t,e.message)}}))}getRequestOrigin(){const t=document.referrer;if(!t)return null;try{return new URL(t).origin}catch(t){return null}}sendTokens(t){let e=this.prepareTokenOutput(this.getFilter());S(2,"issuerTokens: (Outlet.sendTokens)",e);if(this.redirectCallbackUrl){try{let t=this.redirectCallbackUrl;const r=new URLSearchParams(t.hash.substring(1));r.set(q+"action",_.GET_ISSUER_TOKENS+"-response");r.set(q+"issuer",this.tokenConfig.collectionID);r.set(q+"tokens",JSON.stringify(e));t.hash="#"+r.toString();let n=t.href;S(2,"tokens ready. go to: ",n);document.location.href=n;return}catch(t){console.log("Requestor redirect Error. ",t)}}this.sendMessageResponse({evtid:t,evt:Z.ISSUER_TOKENS,data:{issuer:this.tokenConfig.collectionID,tokens:e}})}sendErrorResponse(t,e,r){if(this.redirectCallbackUrl){let t=this.redirectCallbackUrl;const n=new URLSearchParams(t.hash.substring(1));n.set(q+"action",W.ERROR);n.set(q+"issuer",r);n.set(q+"error",e);console.log("Redirecting error: ",e);t.hash="#"+n.toString();document.location.href=t.href;return}this.sendMessageResponse({evtid:t,evt:W.ERROR,errors:[e]})}proofRedirectError(t,e){const r=this.redirectCallbackUrl.href;const n=new URLSearchParams;n.set(q+"action","proof-callback");n.set(q+"issuer",t);n.set(q+"error",e);document.location.href=r+"#"+n.toString()}isSameOrigin(){try{let t=new URL(this.tokenConfig.tokenOrigin);if(t.origin===document.location.origin){return true}else{return false}}catch(t){return false}}sendMessageResponse(t){if(!document.referrer){return}let e;if(window.opener&&window.opener!==window){e=window.opener}else if(window.parent!==window){e=window.parent}if(e){e.postMessage(t,"*")}if(!this.isSameOrigin()){let t=`\n\t\t\t\tbackground: #eee;\n\t\t\t\tpadding: 10px;\n\t\t\t\tcolor: #000;\n\t\t\t\tdisplay: inline-block;\n\t\t\t\tborder-radius: 4px;\n\t\t\t\tfont-size: 1.2em;\n\t\t\t\tbox-shadow: rgb(0 0 0 / 35%) 0px 5px 15px;\n\t\t\t`;let e=document.createElement("div");e.innerHTML="Data sent. Please close the tab and back to main app.";e.setAttribute("style",t);document.body.appendChild(e)}}}var Zx=undefined&&undefined.__awaiter||function(t,e,r,n){function i(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,s){function a(t){try{f(n.next(t))}catch(t){s(t)}}function o(t){try{f(n["throw"](t))}catch(t){s(t)}}function f(t){t.done?r(t.value):i(t.value).then(a,o)}f((n=n.apply(t,e||[])).next())}))};class Xx{constructor(t){this.tokenConfig=Object.assign(Vx,t);if(!this.tokenConfig.tokenParser){this.tokenConfig.tokenParser=Yx}}getTokens(){const t=localStorage.getItem(this.tokenConfig.itemStorageKey);if(!t)return[];const e=Fx(t,this.tokenConfig.tokenParser,this.tokenConfig.unsignedTokenDataName,true);return jx(e,this.tokenConfig.filter)}authenticate(t,e,r,n=false){return Zx(this,void 0,void 0,(function*(){let i=yield Kx(t,this.tokenConfig);let s=new Wx(null,null,this.tokenConfig,i,e,r,n,t);return yield s.authenticate()}))}}var $x=undefined&&undefined.__awaiter||function(t,e,r,n){function i(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,s){function a(t){try{f(n.next(t))}catch(t){s(t)}}function o(t){try{f(n["throw"](t))}catch(t){s(t)}}function f(t){t.done?r(t.value):i(t.value).then(a,o)}f((n=n.apply(t,e||[])).next())}))};class tP extends cx{constructor(){super(...arguments);this.TYPE="ticketZKProof";this.messaging=new X}getTokenProof(t,e,r){var n,i,s;return $x(this,void 0,void 0,(function*(){S(2,"getTokenProof request:",r);if(t.onChain===true)throw new Error(this.TYPE+" is not available for off-chain tokens.");let a=((n=r===null||r===void 0?void 0:r.options)===null||n===void 0?void 0:n.useRedirect)||J(this.client.config.offChainRedirectMode)||false;if(a)a=((i=r===null||r===void 0?void 0:r.options)===null||i===void 0?void 0:i.redirectUrl)||document.location.href;let o=null;if(t.unEndPoint){let n=new Nx(this.client);r.options=Object.assign(Object.assign({},r.options),{unEndPoint:t.unEndPoint});let i=yield n.getTokenProof(t,e,r);o=i.data}const f=o?o.address:"";const c=r.address?r.address:f;const u=r.wallet?r.wallet:"";let h;if(new URL(t.tokenOrigin).origin===document.location.origin){const r=new Xx(t);h={};h.proof=yield r.authenticate(e[0],c,u,a)}else{S(2,"run OutletAction.GET_PROOF at ",window.location.href);let n=yield this.messaging.sendMessage({action:_.GET_PROOF,origin:t.tokenOrigin,timeout:0,data:{issuer:t.collectionID,token:e[0],address:c,wallet:u}},r.options.messagingForceTab,this.client.getUi(),a);if(!n){return new Promise(((t,e)=>{setTimeout((()=>{e(new Error("The outlet failed to load."))}),3e4)}))}h=n.data}if(!h.proof)throw new Error("Failed to get proof from the outlet.");let l={type:this.TYPE,data:h,target:{tokens:[]}};if(o){fx.Authenticator.validateUseTicket(h.proof,t.base64attestorPubKey,t.base64senderPublicKeys,(s=o.address)!==null&&s!==void 0?s:"");l.data.useEthKey=o}return l}))}}const eP="2.4.0";var rP=undefined&&undefined.__awaiter||function(t,e,r,n){function i(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,s){function a(t){try{f(n.next(t))}catch(t){s(t)}}function o(t){try{f(n["throw"](t))}catch(t){s(t)}}function f(t){t.done?r(t.value):i(t.value).then(a,o)}f((n=n.apply(t,e||[])).next())}))};const nP=(t,e,r)=>rP(void 0,void 0,void 0,(function*(){var n;const{contract:i,chain:s}=t;let a=`${hb}/get-owner-fungible-tokens?collectionAddress=${i}&owner=${e}&chain=${s}&blockchain=${(n=t.blockchain)!==null&&n!==void 0?n:"evm"}`;if(t.symbol)a+=`&symbol=${t.symbol}`;if(r)a+=`&ipfsBaseUrl=${r}`;return j(a,true)}));const iP=(t,e)=>rP(void 0,void 0,void 0,(function*(){var r;const{contract:n,chain:i}=t;let s=`${hb}/get-fungible-token?collectionAddress=${n}&chain=${i}&blockchain=${(r=t.blockchain)!==null&&r!==void 0?r:"evm"}`;if(t.symbol)s+=`&symbol=${t.symbol}`;if(e)s+=`&ipfsBaseUrl=${e}`;return j(s,true)}));var sP=undefined&&undefined.__awaiter||function(t,e,r,n){function i(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,s){function a(t){try{f(n.next(t))}catch(t){s(t)}}function o(t){try{f(n["throw"](t))}catch(t){s(t)}}function f(t){t.done?r(t.value):i(t.value).then(a,o)}f((n=n.apply(t,e||[])).next())}))};if(typeof window!=="undefined")window.tn={VERSION:eP};const aP="This browser is not supported. Please try using Chrome, Edge, FireFox or Safari.";const oP={type:"active",issuers:[],uiOptions:{uiType:"popup",containerElement:".overlay-tn",openingHeading:"Validate your token ownership for access",issuerHeading:"Detected tokens",autoPopup:true,position:"bottom-right",alwaysShowStartScreen:false},autoLoadTokens:true,autoEnableTokens:true,messagingForceTab:false,tokenPersistenceTTL:600,unSupportedUserAgent:{authentication:{config:{},errorMessage:aP},full:{config:{iE:true,iE9:true},errorMessage:aP}}};var fP;(function(t){t["POPUP_BLOCKED"]="POPUP_BLOCKED";t["USER_ABORT"]="USER_ABORT"})(fP||(fP={}));var cP;(function(t){t["POPUP_BLOCKED"]="Please add an exception to your popup blocker before continuing.";t["USER_ABORT"]="The user aborted the process."})(cP||(cP={}));class uP{static getKey(t){return fx.Authenticator.decodePublicKey(t)}constructor(t){var e;this.clientCallBackEvents={};this.uiUpdateCallbacks={[0]:undefined,[1]:undefined,[2]:undefined};this.cancelAutoload=true;if(window.location.hash){this.urlParams=new URLSearchParams(window.location.hash.substring(1));let t=this.getDataFromQuery("action");S(2,`Client() fired. Action = "${t}"`);this.removeCallbackParamsFromUrl()}else{this.urlParams=new URLSearchParams}this.config=this.mergeConfig(oP,t);this.negotiateAlreadyFired=false;this.tokenStore=new rt(this.config.autoEnableTokens,this.config.tokenPersistenceTTL);if(((e=this.config.issuers)===null||e===void 0?void 0:e.length)>0)this.tokenStore.updateIssuers(this.config.issuers);this.messaging=new X;this.registerOutletProofEventListener()}getDataFromQuery(t){return this.urlParams?this.urlParams.get(q+t):""}readProofCallback(){if(!this.getDataFromQuery)return false;let t=this.getDataFromQuery("action");if(t!=="proof-callback")return false;const e=this.getDataFromQuery("issuer");const r=this.getDataFromQuery("attestation");const n=this.getDataFromQuery("error");this.emitRedirectProofEvent(e,r,n)}removeCallbackParamsFromUrl(){let t=new URLSearchParams(document.location.hash.substring(1));t=R(t);document.location.hash="#"+t.toString()}registerOutletProofEventListener(){window.addEventListener("auth-callback",(t=>{this.emitRedirectProofEvent(t.detail.issuer,t.detail.proof,t.detail.error)}))}emitRedirectProofEvent(t,e,r){setTimeout((()=>{if(r){this.handleProofError(new Error(r),t)}else{this.eventSender("token-proof",{issuer:t,error:null,data:{proof:e}})}}),500)}mergeConfig(t,e){var r,n;for(let n in e){if(e[n]&&e[n].constructor===Object){t[n]=this.mergeConfig((r=t[n])!==null&&r!==void 0?r:{},e[n])}else{t[n]=e[n]}}if(t.issuers&&t.issuers.length){for(const e of t.issuers){if(e.onChain===true){cb((n=e.blockchain)!==null&&n!==void 0?n:"")}}}return t}getTokenStore(){return this.tokenStore}getUi(){return this.ui}createUiInstance(){this.ui=new ab(this.config.uiOptions,this)}triggerUiUpdateCallback(t,e){if(this.uiUpdateCallbacks[t])this.uiUpdateCallbacks[t](e)}registerUiUpdateCallback(t,e){this.uiUpdateCallbacks[t]=e}safeConnectAvailable(){return this.config.safeConnectOptions!==undefined}hasIssuerForBlockchain(t){return this.config.issuers.filter((e=>{if(t==="evm"&&!e.onChain)return true;if(t==="solana"&&typeof window.solana==="undefined")return false;return(e.blockchain?e.blockchain.toLowerCase():"evm")===t})).length>0}experimentalFeaturesEnabled(t){return this.config.experimentalFeatures&&this.config.experimentalFeatures.indexOf(t)>-1}getWalletProvider(){return sP(this,void 0,void 0,(function*(){if(!this.web3WalletProvider){const{Web3WalletProvider:t}=yield import("./p-11124fed.js");this.web3WalletProvider=new t(this,this.config.walletOptions,this.config.safeConnectOptions)}return this.web3WalletProvider}))}disconnectWallet(){return sP(this,void 0,void 0,(function*(){let t=yield this.getWalletProvider();t.deleteConnections();this.tokenStore.clearCachedTokens();this.eventSender("connected-wallet",null);this.eventSender("disconnected-wallet",null);this.triggerUiUpdateCallback(2)}))}negotiatorConnectToWallet(t){return sP(this,void 0,void 0,(function*(){let e=yield this.getWalletProvider();let r=yield e.connectWith(t);S(2,"wallet address found: "+r);return r}))}enrichTokenLookupDataOnChainTokens(){return sP(this,void 0,void 0,(function*(){if(!this.getTokenStore().hasOnChainTokens()){this.issuersLoaded=true;return}this.issuersLoaded=false;this.triggerUiUpdateCallback(0);let t=this.tokenStore.getCurrentIssuers(true);for(let e in t){let r=t[e];if(r.title)continue;try{let t;if(r.fungible){t=yield iP(r)}else{t=yield lb(r)}if(t){t.onChain=true;if(!t.title)t.title=r.collectionID;this.tokenStore.updateTokenLookupStore(e,t)}}catch(t){console.log("enrichTokenLookupDataOnChainTokens error =>",t);S(2,"Failed to load contract data for "+e+": "+t.message)}}this.issuersLoaded=true;this.triggerUiUpdateCallback(1)}))}checkUserAgentSupport(t){var e,r;return sP(this,void 0,void 0,(function*(){if(!fb((r=(e=this.config.unSupportedUserAgent)===null||e===void 0?void 0:e[t])===null||r===void 0?void 0:r.config)){let e=this.config.unSupportedUserAgent[t].errorMessage;if(this.activeNegotiateRequired()){this.createUiInstance();yield this.ui.initialize();this.ui.openOverlay();this.ui.showError(e,false);this.ui.viewContainer.style.display="none"}N(e,"error",null,null,true,true)}}))}activeNegotiateRequired(){return this.config.type==="active"}createCurrentUrlWithoutHash(){var t;return(t=window.location.origin+window.location.pathname+window.location.search)!==null&&t!==void 0?t:"?"+window.location.search}getNoTokenMsg(t){var e;const r=this.getTokenStore().getCurrentIssuers();const n=(e=r[t])===null||e===void 0?void 0:e.noTokenMsg;return n?n:""}negotiate(t,e=false,r=false){return sP(this,void 0,void 0,(function*(){let n=this.getOutletConfigForCurrentOrigin();if(n){S(2,"Sync Outlet fired in Client to read MagicLink before negotiate().");let t=new _x(n,true);yield t.readMagicLink();t=null}yield this.checkUserAgentSupport("full");if(t){this.tokenStore.updateIssuers(t)}C(Object.keys(this.tokenStore.getCurrentIssuers()).length,"issuers are missing.");if(this.activeNegotiateRequired()){this.issuersLoaded=!this.tokenStore.hasUnloadedIssuers();yield this.activeNegotiationStrategy(e)}else{yield this.enrichTokenLookupDataOnChainTokens();if(r)this.getTokenStore().clearCachedTokens();yield this.passiveNegotiationStrategy()}this.eventSender("loaded",null)}))}activeNegotiationStrategy(t){return sP(this,void 0,void 0,(function*(){let e;if(this.ui){e=this.tokenStore.hasUnloadedTokens();if(this.ui.viewIsNotStart()&&this.tokenStore.hasUnloadedIssuers()){this.enrichTokenLookupDataOnChainTokens()}else{this.triggerUiUpdateCallback(1)}}else{this.createUiInstance();yield this.ui.initialize();e=true}if(this.config.autoEnableTokens&&Object.keys(this.tokenStore.getSelectedTokens()).length)this.eventSender("tokens-selected",{selectedTokens:this.tokenStore.getSelectedTokens()});if(t||this.config.uiOptions.autoPopup===true&&e)this.ui.openOverlay()}))}tokenAutoLoad(t,e,r){return sP(this,void 0,void 0,(function*(){if(this.config.autoLoadTokens===false)return;this.cancelAutoload=false;let n=1;for(let i in this.tokenStore.getCurrentIssuers()){let s=this.tokenStore.getIssuerTokens(i);if(!r&&s!=null)continue;t(i);try{let t=yield this.connectTokenIssuer(i);if(!t)return;e(i,t)}catch(t){t.message="Failed to load "+i+": "+t.message;S(2,t.message);N("autoload tokens error","error",(()=>this.eventSender("error",{issuer:i,error:t})),null,true,false);e(i,null)}n++;if(r)continue;if(this.cancelAutoload||this.config.autoLoadTokens!==true&&n>this.config.autoLoadTokens)break}}))}cancelTokenAutoload(){this.cancelAutoload=true}setPassiveNegotiationWebTokens(){return sP(this,void 0,void 0,(function*(){let t=this.tokenStore.getCurrentIssuers(false);let e=this.getDataFromQuery("action");for(let r in t){let t;const n=this.tokenStore.getCurrentIssuers()[r];try{if(new URL(n.tokenOrigin).origin===document.location.origin){t=this.loadLocalOutletTokens(n)}else{let i=this.getDataFromQuery("issuer");if((e===_.GET_ISSUER_TOKENS+"-response"||e==="proof-callback")&&r===i){let e=this.getDataFromQuery("tokens");try{t=JSON.parse(e)}catch(t){S(2,"Error parse tokens from Response. ",t)}}else{t=this.tokenStore.getIssuerTokens(r);if(t!==null)continue;t=yield this.loadRemoteOutletTokens(n);if(!t)return}}}catch(t){N("popup error","error",(()=>this.eventSender("error",{issuer:r,error:t})),null,true,false);continue}S(2,"tokens:");S(2,t);this.tokenStore.setTokens(r,t)}}))}readTokensFromUrl(){let t=this.tokenStore.getCurrentIssuers(false);let e=this.getDataFromQuery("action");if(e==="error"){this.handleRedirectTokensError();return}if(e!==_.GET_ISSUER_TOKENS+"-response")return;let r=this.getDataFromQuery("issuer");if(!r){S(3,"No issuer in URL.");return}const n=t[r];if(!n){S(3,`No issuer config for "${r}" in URL.`);return}let i;try{if(new URL(n.tokenOrigin).origin!==document.location.origin){let t=this.getDataFromQuery("tokens");try{i=JSON.parse(t)}catch(t){S(2,"Error parse tokens from Response. ",t)}}}catch(t){S(1,"Error read tokens from URL");return}if(!i){S(2,`No tokens for "${r}" in URL.`);return}S(2,"readTokensFromUrl tokens:");S(2,i);this.tokenStore.setTokens(r,i)}handleRedirectTokensError(){return sP(this,void 0,void 0,(function*(){const t=this.getDataFromQuery("error");if(this.config.type==="active"){this.createUiInstance();yield this.ui.initialize();this.ui.showError(t)}this.eventSender("error",{issuer:this.getDataFromQuery("issuer"),error:new Error(t)});console.log("Error loading tokens from outlet: ",t)}))}setPassiveNegotiationOnChainTokens(){return sP(this,void 0,void 0,(function*(){let t=this.tokenStore.getCurrentIssuers(true);let e=yield this.getWalletProvider();for(let r in t){let n=this.tokenStore.getIssuerTokens(r);if(n!==null)continue;let i=t[r];try{const t=yield pb(i,e.getConnectedWalletData()[0].address);this.tokenStore.setTokens(r,t)}catch(t){S(2,t);N("passive loading of tokens error","error",(()=>this.eventSender("error",{issuer:r,error:t})),null,true,false)}}}))}passiveNegotiationStrategy(){return sP(this,void 0,void 0,(function*(){yield this.setPassiveNegotiationWebTokens();yield this.setPassiveNegotiationOnChainTokens();let t=this.tokenStore.getCurrentTokens();S(2,"Emit tokens");S(2,t);for(let e in t){t[e]={tokens:t[e]}}this.eventSender("tokens",t);if(this.messaging.core.iframeStorageSupport===false&&Object.keys(this.tokenStore.getCurrentTokens(false)).length===0)S(2,"iFrame storage support not detected: Enable popups via your browser to access off-chain tokens with this negotiation type.")}))}connectTokenIssuer(t){var e;return sP(this,void 0,void 0,(function*(){const r=this.tokenStore.getCurrentIssuers()[t];if(!r)N("Undefined token issuer","error",null,null,true,true);let n;if(r.onChain===true){let i=yield this.getWalletProvider();const s=(e=i.getConnectedWalletData()[0])===null||e===void 0?void 0:e.address;C(t,"issuer is required.");C(s,"wallet address is missing.");if(r.fungible){n=yield nP(r,s)}else{n=yield pb(r,s)}}else{if(new URL(r.tokenOrigin).origin===document.location.origin){n=this.loadLocalOutletTokens(r)}else{n=yield this.loadRemoteOutletTokens(r);if(!n)return}}this.tokenStore.setTokens(t,n);if(this.config.autoEnableTokens){this.eventSender("tokens-selected",{selectedTokens:this.tokenStore.getSelectedTokens()})}return n}))}loadRemoteOutletTokens(t){var e,r;return sP(this,void 0,void 0,(function*(){const n={issuer:t,filter:t.filters};if(t.accessRequestType)n.access=t.accessRequestType;const i=J(this.config.offChainRedirectMode);if(i)this.tokenStore.setTokens(t.collectionID,[]);const s=yield this.messaging.sendMessage({action:_.GET_ISSUER_TOKENS,origin:t.tokenOrigin,data:n},this.config.messagingForceTab,this.config.type==="active"?this.ui:null,i?document.location.href:false);if(!s)return;return(r=(e=s.data)===null||e===void 0?void 0:e.tokens)!==null&&r!==void 0?r:[]}))}loadLocalOutletTokens(t){const e=new Xx(t);return e.getTokens()}updateSelectedTokens(t){this.tokenStore.setSelectedTokens(t);this.eventSender("tokens-selected",{selectedTokens:t})}authenticate(t){return sP(this,void 0,void 0,(function*(){yield this.checkUserAgentSupport("authentication");const{issuer:e,unsignedToken:r}=t;C(e&&r,"Issuer and unsigned token required.");if(r.signedToken){delete r.signedToken}const n=this.tokenStore.getCurrentIssuers()[e];if(!n)N("Provided issuer was not found.","error",null,null,true,true);if(this.ui){this.ui.showLoaderDelayed(["<h4>Authenticating...</h4>","<small>You may need to sign a new challenge in your wallet</small>","<button class='cancel-auth-btn btn-tn' aria-label='Cancel authentication'>Cancel</button>"],600,true);this.enableAuthCancel(e)}let i;if(t.type){i=t.type}else{i=n.onChain?Nx:tP}let s=new i(this);let a;try{if(!t.options)t.options={};t.options.messagingForceTab=this.config.messagingForceTab;S(2,"authRequest",t);S(2,"get proof at ",window.location.href);a=yield s.getTokenProof(n,[t.unsignedToken],t);if(!a)return;S(2,"proof received at ",window.location.href);S(2,"Ticket proof successfully validated.");this.eventSender("token-proof",{data:a.data,error:null,issuer:e})}catch(r){S(2,r);if(r.message==="WALLET_REQUIRED"){return this.handleWalletRequired(t)}N(r,"error",(()=>this.handleProofError(r,e)),null,false,true)}if(this.ui){this.ui.dismissLoader();this.ui.closeOverlay()}return a.data}))}enableAuthCancel(t){D(".cancel-auth-btn").then((e=>{e.onclick=()=>{const e="User cancelled authentication";this.ui.showError(e);this.eventSender("token-proof",{issuer:t,error:e,data:null})}}))}handleWalletRequired(t){return sP(this,void 0,void 0,(function*(){if(this.ui){this.ui.dismissLoader();this.ui.openOverlay()}else{let e=yield this.getWalletProvider();yield e.connectWith("MetaMask");return this.authenticate(t)}return new Promise(((e,r)=>{const n={viewTransition:"slide-in-right"};this.ui.updateUI("wallet",{viewName:"wallet",connectCallback:()=>sP(this,void 0,void 0,(function*(){this.ui.updateUI("main",{viewName:"main"},n);try{let r=yield this.authenticate(t);e(r)}catch(t){r(t)}}))},n)}))}))}handleProofError(t,e){if(this.ui)this.ui.showError(t);this.eventSender("token-proof",{issuer:e,error:t,data:null})}eventSender(t,e){return sP(this,void 0,void 0,(function*(){Promise.resolve(this.on(t,null,e))}))}getOutletConfigForCurrentOrigin(t=document.location.origin){let e=this.tokenStore.getCurrentIssuers(false);let r=[];Object.keys(e).forEach((n=>{let i=e[n];try{if(new URL(i.tokenOrigin).origin===t){r.push(i)}}catch(t){S(2,t);console.log("issuer config error "+t.message)}}));if(r.length){return r[0]}return false}onlySameOrigin(){let t=this.tokenStore.getCurrentIssuers(false);let e=true;Object.keys(t).forEach((r=>{let n=t[r];let i=false;try{if(new URL(n.tokenOrigin).origin===document.location.origin){i=true}}catch(t){S(2,t);console.log("issuer config error")}if(!i){e=false}}));return e}addTokenViaMagicLink(t){return sP(this,void 0,void 0,(function*(){let e=new URL(t);let r=e.hash.length>1?e.hash.substring(1):e.search.substring(1);const n=J(this.config.offChainRedirectMode);try{let t=yield this.messaging.sendMessage({action:_.MAGIC_URL,origin:e.origin+e.pathname,data:{urlParams:r}},this.config.messagingForceTab,undefined,n?document.location.href:false);if(!t)return new Promise((t=>{}));if(t.evt===Z.ISSUER_TOKENS){const r=this.getOutletConfigForCurrentOrigin(e.origin);if(r)this.tokenStore.setTokens(r.collectionID,t.data.tokens);return t.data.tokens}}catch(t){N(t.message,"error",null,false,true)}}))}on(t,e,r){C(t,"Event type is not defined");if((t==="tokens"||t==="tokens-selected")&&e){this.readTokensFromUrl()}if(t==="token-proof"&&e){S(2,"token-proof listener atteched. check URL HASH for proof callbacks.");const t=this.getDataFromQuery("action");if(t==="proof-callback"){this.readProofCallback()}else if(t==="email-callback"){let t=this.getOutletConfigForCurrentOrigin();if(t){S(2,"Outlet fired to parse URL hash params.");let e=new _x(t,true,this.urlParams);e.pageOnLoadEventHandler().then((()=>{e=null}))}}}if(e){this.clientCallBackEvents[t]=e}else{if(this.clientCallBackEvents[t]){return this.clientCallBackEvents[t].call(t,r)}}}switchTheme(t){this.ui.switchTheme(t)}}var hP;(function(t){t[t["ETHEREUM"]=1]="ETHEREUM";t[t["POLYGON"]=137]="POLYGON";t[t["ARBITRUM"]=42161]="ARBITRUM";t[t["OPTIMISM"]=10]="OPTIMISM";t[t["BSC"]=56]="BSC";t[t["BSC_TESTNET"]=97]="BSC_TESTNET";t[t["GOERLI"]=5]="GOERLI";t[t["SEPOLIA"]=11155111]="SEPOLIA";t[t["KOVAN"]=42]="KOVAN";t[t["MUMBAI"]=80001]="MUMBAI";t[t["AVALANCH"]=43114]="AVALANCH";t[t["FANTOM"]=250]="FANTOM";t[t["KLAYTN"]=8217]="KLAYTN";t[t["BAOBAB"]=1001]="BAOBAB"})(hP||(hP={}));const lP={[hP.ETHEREUM]:"eth",[hP.POLYGON]:"polygon",[hP.ARBITRUM]:"arbitrum",[hP.OPTIMISM]:"optimism",[hP.GOERLI]:"goerli",[hP.KOVAN]:"kovan",[hP.BSC]:"bsc",[hP.MUMBAI]:"mumbai",[hP.AVALANCH]:"avalanche",[hP.FANTOM]:"fantom",[hP.KLAYTN]:"cypress",[hP.BAOBAB]:"baobab"};const dP={[hP.ETHEREUM]:{rpc:"https://eth-mainnet.g.alchemy.com/v2/2bJxn0VGXp9U5EOfA6CoMGU-rrd-BIIT",explorer:"https://etherscan.com/tx/"},[hP.GOERLI]:{rpc:"https://eth-goerli.g.alchemy.com/v2/yVhq9zPJorAWsw-F87fEabSUl7cCU6z4",explorer:"https://goerli.etherscan.io/tx/"},[hP.SEPOLIA]:{rpc:"https://sepolia.infura.io/v3/9f79b2f9274344af90b8d4e244b580ef",explorer:"https://sepolia.etherscan.io/tx/"},[hP.POLYGON]:{rpc:"https://polygon-rpc.com/",explorer:"https://polygonscan.com/tx/"},[hP.MUMBAI]:{rpc:"https://polygon-mumbai.g.alchemy.com/v2/rVI6pOV4irVsrw20cJxc1fxK_1cSeiY0",explorer:"https://mumbai.polygonscan.com/tx/"},[hP.BSC]:{rpc:"https://bsc-dataseed.binance.org/",explorer:"https://bscscan.com/tx/"},[hP.BSC_TESTNET]:{rpc:"https://data-seed-prebsc-1-s1.binance.org:8545",explorer:"https://testnet.bscscan.com/tx/"},[hP.AVALANCH]:{rpc:"https://api.avax.network/ext/bc/C/rpc",explorer:"https://cchain.explorer.avax.network/tx/"},[hP.FANTOM]:{rpc:"https://rpc.fantom.network/",explorer:"https://ftmscan.com/tx/"},[hP.ARBITRUM]:{rpc:"https://arb1.arbitrum.io/rpc",explorer:"https://arbiscan.io/tx/"},[hP.OPTIMISM]:{rpc:"https://mainnet.optimism.io",explorer:"https://optimistic.etherscan.io/tx/"},[hP.KLAYTN]:{rpc:"https://public-node-api.klaytnapi.com/v1/cypress",explorer:"https://scope.klaytn.com/tx/"}};export{uP as C,Ix as S,hv as W,dP as a,lP as b,m as c,Fv as e,k as i,S as l};
//# sourceMappingURL=p-3cb9a07a.js.map