import{e as t,E as n}from"./p-404a2ccb.js";import{p as r}from"./p-c8fc26cb.js";import{g as e,d as i,a as s,c as o,e as a}from"./p-4454aa4b.js";import"./p-6ad9f672.js";var u={};var c={};var h={};var f={};(function(t){Object.defineProperty(t,"__esModule",{value:true});function n(t,n){var r=t>>>16&65535,e=t&65535;var i=n>>>16&65535,s=n&65535;return e*s+(r*s+e*i<<16>>>0)|0}t.mul=Math.imul||n;function r(t,n){return t+n|0}t.add=r;function e(t,n){return t-n|0}t.sub=e;function i(t,n){return t<<n|t>>>32-n}t.rotl=i;function s(t,n){return t<<32-n|t>>>n}t.rotr=s;function o(t){return typeof t==="number"&&isFinite(t)&&Math.floor(t)===t}t.isInteger=Number.isInteger||o;t.MAX_SAFE_INTEGER=9007199254740991;t.isSafeInteger=function(n){return t.isInteger(n)&&(n>=-t.MAX_SAFE_INTEGER&&n<=t.MAX_SAFE_INTEGER)}})(f);Object.defineProperty(h,"__esModule",{value:true});var l=f;function d(t,n){if(n===void 0){n=0}return(t[n+0]<<8|t[n+1])<<16>>16}h.readInt16BE=d;function v(t,n){if(n===void 0){n=0}return(t[n+0]<<8|t[n+1])>>>0}h.readUint16BE=v;function p(t,n){if(n===void 0){n=0}return(t[n+1]<<8|t[n])<<16>>16}h.readInt16LE=p;function w(t,n){if(n===void 0){n=0}return(t[n+1]<<8|t[n])>>>0}h.readUint16LE=w;function y(t,n,r){if(n===void 0){n=new Uint8Array(2)}if(r===void 0){r=0}n[r+0]=t>>>8;n[r+1]=t>>>0;return n}h.writeUint16BE=y;h.writeInt16BE=y;function b(t,n,r){if(n===void 0){n=new Uint8Array(2)}if(r===void 0){r=0}n[r+0]=t>>>0;n[r+1]=t>>>8;return n}h.writeUint16LE=b;h.writeInt16LE=b;function m(t,n){if(n===void 0){n=0}return t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3]}h.readInt32BE=m;function g(t,n){if(n===void 0){n=0}return(t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3])>>>0}h.readUint32BE=g;function _(t,n){if(n===void 0){n=0}return t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]}h.readInt32LE=_;function E(t,n){if(n===void 0){n=0}return(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n])>>>0}h.readUint32LE=E;function O(t,n,r){if(n===void 0){n=new Uint8Array(4)}if(r===void 0){r=0}n[r+0]=t>>>24;n[r+1]=t>>>16;n[r+2]=t>>>8;n[r+3]=t>>>0;return n}h.writeUint32BE=O;h.writeInt32BE=O;function S(t,n,r){if(n===void 0){n=new Uint8Array(4)}if(r===void 0){r=0}n[r+0]=t>>>0;n[r+1]=t>>>8;n[r+2]=t>>>16;n[r+3]=t>>>24;return n}h.writeUint32LE=S;h.writeInt32LE=S;function I(t,n){if(n===void 0){n=0}var r=m(t,n);var e=m(t,n+4);return r*4294967296+e-(e>>31)*4294967296}h.readInt64BE=I;function j(t,n){if(n===void 0){n=0}var r=g(t,n);var e=g(t,n+4);return r*4294967296+e}h.readUint64BE=j;function A(t,n){if(n===void 0){n=0}var r=_(t,n);var e=_(t,n+4);return e*4294967296+r-(r>>31)*4294967296}h.readInt64LE=A;function N(t,n){if(n===void 0){n=0}var r=E(t,n);var e=E(t,n+4);return e*4294967296+r}h.readUint64LE=N;function P(t,n,r){if(n===void 0){n=new Uint8Array(8)}if(r===void 0){r=0}O(t/4294967296>>>0,n,r);O(t>>>0,n,r+4);return n}h.writeUint64BE=P;h.writeInt64BE=P;function x(t,n,r){if(n===void 0){n=new Uint8Array(8)}if(r===void 0){r=0}S(t>>>0,n,r);S(t/4294967296>>>0,n,r+4);return n}h.writeUint64LE=x;h.writeInt64LE=x;function $(t,n,r){if(r===void 0){r=0}if(t%8!==0){throw new Error("readUintBE supports only bitLengths divisible by 8")}if(t/8>n.length-r){throw new Error("readUintBE: array is too short for the given bitLength")}var e=0;var i=1;for(var s=t/8+r-1;s>=r;s--){e+=n[s]*i;i*=256}return e}h.readUintBE=$;function T(t,n,r){if(r===void 0){r=0}if(t%8!==0){throw new Error("readUintLE supports only bitLengths divisible by 8")}if(t/8>n.length-r){throw new Error("readUintLE: array is too short for the given bitLength")}var e=0;var i=1;for(var s=r;s<r+t/8;s++){e+=n[s]*i;i*=256}return e}h.readUintLE=T;function M(t,n,r,e){if(r===void 0){r=new Uint8Array(t/8)}if(e===void 0){e=0}if(t%8!==0){throw new Error("writeUintBE supports only bitLengths divisible by 8")}if(!l.isSafeInteger(n)){throw new Error("writeUintBE value must be an integer")}var i=1;for(var s=t/8+e-1;s>=e;s--){r[s]=n/i&255;i*=256}return r}h.writeUintBE=M;function C(t,n,r,e){if(r===void 0){r=new Uint8Array(t/8)}if(e===void 0){e=0}if(t%8!==0){throw new Error("writeUintLE supports only bitLengths divisible by 8")}if(!l.isSafeInteger(n)){throw new Error("writeUintLE value must be an integer")}var i=1;for(var s=e;s<e+t/8;s++){r[s]=n/i&255;i*=256}return r}h.writeUintLE=C;function R(t,n){if(n===void 0){n=0}var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(n)}h.readFloat32BE=R;function U(t,n){if(n===void 0){n=0}var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(n,true)}h.readFloat32LE=U;function D(t,n){if(n===void 0){n=0}var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(n)}h.readFloat64BE=D;function k(t,n){if(n===void 0){n=0}var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(n,true)}h.readFloat64LE=k;function L(t,n,r){if(n===void 0){n=new Uint8Array(4)}if(r===void 0){r=0}var e=new DataView(n.buffer,n.byteOffset,n.byteLength);e.setFloat32(r,t);return n}h.writeFloat32BE=L;function q(t,n,r){if(n===void 0){n=new Uint8Array(4)}if(r===void 0){r=0}var e=new DataView(n.buffer,n.byteOffset,n.byteLength);e.setFloat32(r,t,true);return n}h.writeFloat32LE=q;function V(t,n,r){if(n===void 0){n=new Uint8Array(8)}if(r===void 0){r=0}var e=new DataView(n.buffer,n.byteOffset,n.byteLength);e.setFloat64(r,t);return n}h.writeFloat64BE=V;function F(t,n,r){if(n===void 0){n=new Uint8Array(8)}if(r===void 0){r=0}var e=new DataView(n.buffer,n.byteOffset,n.byteLength);e.setFloat64(r,t,true);return n}h.writeFloat64LE=F;var G={};Object.defineProperty(G,"__esModule",{value:true});function H(t){for(var n=0;n<t.length;n++){t[n]=0}return t}G.wipe=H;Object.defineProperty(c,"__esModule",{value:true});var z=h;var W=G;var B=20;function K(t,n,r){var e=1634760805;var i=857760878;var s=2036477234;var o=1797285236;var a=r[3]<<24|r[2]<<16|r[1]<<8|r[0];var u=r[7]<<24|r[6]<<16|r[5]<<8|r[4];var c=r[11]<<24|r[10]<<16|r[9]<<8|r[8];var h=r[15]<<24|r[14]<<16|r[13]<<8|r[12];var f=r[19]<<24|r[18]<<16|r[17]<<8|r[16];var l=r[23]<<24|r[22]<<16|r[21]<<8|r[20];var d=r[27]<<24|r[26]<<16|r[25]<<8|r[24];var v=r[31]<<24|r[30]<<16|r[29]<<8|r[28];var p=n[3]<<24|n[2]<<16|n[1]<<8|n[0];var w=n[7]<<24|n[6]<<16|n[5]<<8|n[4];var y=n[11]<<24|n[10]<<16|n[9]<<8|n[8];var b=n[15]<<24|n[14]<<16|n[13]<<8|n[12];var m=e;var g=i;var _=s;var E=o;var O=a;var S=u;var I=c;var j=h;var A=f;var N=l;var P=d;var x=v;var $=p;var T=w;var M=y;var C=b;for(var R=0;R<B;R+=2){m=m+O|0;$^=m;$=$>>>32-16|$<<16;A=A+$|0;O^=A;O=O>>>32-12|O<<12;g=g+S|0;T^=g;T=T>>>32-16|T<<16;N=N+T|0;S^=N;S=S>>>32-12|S<<12;_=_+I|0;M^=_;M=M>>>32-16|M<<16;P=P+M|0;I^=P;I=I>>>32-12|I<<12;E=E+j|0;C^=E;C=C>>>32-16|C<<16;x=x+C|0;j^=x;j=j>>>32-12|j<<12;_=_+I|0;M^=_;M=M>>>32-8|M<<8;P=P+M|0;I^=P;I=I>>>32-7|I<<7;E=E+j|0;C^=E;C=C>>>32-8|C<<8;x=x+C|0;j^=x;j=j>>>32-7|j<<7;g=g+S|0;T^=g;T=T>>>32-8|T<<8;N=N+T|0;S^=N;S=S>>>32-7|S<<7;m=m+O|0;$^=m;$=$>>>32-8|$<<8;A=A+$|0;O^=A;O=O>>>32-7|O<<7;m=m+S|0;C^=m;C=C>>>32-16|C<<16;P=P+C|0;S^=P;S=S>>>32-12|S<<12;g=g+I|0;$^=g;$=$>>>32-16|$<<16;x=x+$|0;I^=x;I=I>>>32-12|I<<12;_=_+j|0;T^=_;T=T>>>32-16|T<<16;A=A+T|0;j^=A;j=j>>>32-12|j<<12;E=E+O|0;M^=E;M=M>>>32-16|M<<16;N=N+M|0;O^=N;O=O>>>32-12|O<<12;_=_+j|0;T^=_;T=T>>>32-8|T<<8;A=A+T|0;j^=A;j=j>>>32-7|j<<7;E=E+O|0;M^=E;M=M>>>32-8|M<<8;N=N+M|0;O^=N;O=O>>>32-7|O<<7;g=g+I|0;$^=g;$=$>>>32-8|$<<8;x=x+$|0;I^=x;I=I>>>32-7|I<<7;m=m+S|0;C^=m;C=C>>>32-8|C<<8;P=P+C|0;S^=P;S=S>>>32-7|S<<7}z.writeUint32LE(m+e|0,t,0);z.writeUint32LE(g+i|0,t,4);z.writeUint32LE(_+s|0,t,8);z.writeUint32LE(E+o|0,t,12);z.writeUint32LE(O+a|0,t,16);z.writeUint32LE(S+u|0,t,20);z.writeUint32LE(I+c|0,t,24);z.writeUint32LE(j+h|0,t,28);z.writeUint32LE(A+f|0,t,32);z.writeUint32LE(N+l|0,t,36);z.writeUint32LE(P+d|0,t,40);z.writeUint32LE(x+v|0,t,44);z.writeUint32LE($+p|0,t,48);z.writeUint32LE(T+w|0,t,52);z.writeUint32LE(M+y|0,t,56);z.writeUint32LE(C+b|0,t,60)}function J(t,n,r,e,i){if(i===void 0){i=0}if(t.length!==32){throw new Error("ChaCha: key size must be 32 bytes")}if(e.length<r.length){throw new Error("ChaCha: destination is shorter than source")}var s;var o;if(i===0){if(n.length!==8&&n.length!==12){throw new Error("ChaCha nonce must be 8 or 12 bytes")}s=new Uint8Array(16);o=s.length-n.length;s.set(n,o)}else{if(n.length!==16){throw new Error("ChaCha nonce with counter must be 16 bytes")}s=n;o=i}var a=new Uint8Array(64);for(var u=0;u<r.length;u+=64){K(a,s,t);for(var c=u;c<u+64&&c<r.length;c++){e[c]=r[c]^a[c-u]}Q(s,0,o)}W.wipe(a);if(i===0){W.wipe(s)}return e}c.streamXOR=J;function Z(t,n,r,e){if(e===void 0){e=0}W.wipe(r);return J(t,n,r,r,e)}c.stream=Z;function Q(t,n,r){var e=1;while(r--){e=e+(t[n]&255)|0;t[n]=e&255;e>>>=8;n++}if(e>0){throw new Error("ChaCha: counter overflow")}}var Y={};var X={};Object.defineProperty(X,"__esModule",{value:true});function tt(t,n,r){return~(t-1)&n|t-1&r}X.select=tt;function nt(t,n){return(t|0)-(n|0)-1>>>31&1}X.lessOrEqual=nt;function rt(t,n){if(t.length!==n.length){return 0}var r=0;for(var e=0;e<t.length;e++){r|=t[e]^n[e]}return 1&r-1>>>8}X.compare=rt;function et(t,n){if(t.length===0||n.length===0){return false}return rt(t,n)!==0}X.equal=et;(function(t){Object.defineProperty(t,"__esModule",{value:true});var n=X;var r=G;t.DIGEST_LENGTH=16;var e=function(){function n(n){this.digestLength=t.DIGEST_LENGTH;this._buffer=new Uint8Array(16);this._r=new Uint16Array(10);this._h=new Uint16Array(10);this._pad=new Uint16Array(8);this._leftover=0;this._fin=0;this._finished=false;var r=n[0]|n[1]<<8;this._r[0]=r&8191;var e=n[2]|n[3]<<8;this._r[1]=(r>>>13|e<<3)&8191;var i=n[4]|n[5]<<8;this._r[2]=(e>>>10|i<<6)&7939;var s=n[6]|n[7]<<8;this._r[3]=(i>>>7|s<<9)&8191;var o=n[8]|n[9]<<8;this._r[4]=(s>>>4|o<<12)&255;this._r[5]=o>>>1&8190;var a=n[10]|n[11]<<8;this._r[6]=(o>>>14|a<<2)&8191;var u=n[12]|n[13]<<8;this._r[7]=(a>>>11|u<<5)&8065;var c=n[14]|n[15]<<8;this._r[8]=(u>>>8|c<<8)&8191;this._r[9]=c>>>5&127;this._pad[0]=n[16]|n[17]<<8;this._pad[1]=n[18]|n[19]<<8;this._pad[2]=n[20]|n[21]<<8;this._pad[3]=n[22]|n[23]<<8;this._pad[4]=n[24]|n[25]<<8;this._pad[5]=n[26]|n[27]<<8;this._pad[6]=n[28]|n[29]<<8;this._pad[7]=n[30]|n[31]<<8}n.prototype._blocks=function(t,n,r){var e=this._fin?0:1<<11;var i=this._h[0],s=this._h[1],o=this._h[2],a=this._h[3],u=this._h[4],c=this._h[5],h=this._h[6],f=this._h[7],l=this._h[8],d=this._h[9];var v=this._r[0],p=this._r[1],w=this._r[2],y=this._r[3],b=this._r[4],m=this._r[5],g=this._r[6],_=this._r[7],E=this._r[8],O=this._r[9];while(r>=16){var S=t[n+0]|t[n+1]<<8;i+=S&8191;var I=t[n+2]|t[n+3]<<8;s+=(S>>>13|I<<3)&8191;var j=t[n+4]|t[n+5]<<8;o+=(I>>>10|j<<6)&8191;var A=t[n+6]|t[n+7]<<8;a+=(j>>>7|A<<9)&8191;var N=t[n+8]|t[n+9]<<8;u+=(A>>>4|N<<12)&8191;c+=N>>>1&8191;var P=t[n+10]|t[n+11]<<8;h+=(N>>>14|P<<2)&8191;var x=t[n+12]|t[n+13]<<8;f+=(P>>>11|x<<5)&8191;var $=t[n+14]|t[n+15]<<8;l+=(x>>>8|$<<8)&8191;d+=$>>>5|e;var T=0;var M=T;M+=i*v;M+=s*(5*O);M+=o*(5*E);M+=a*(5*_);M+=u*(5*g);T=M>>>13;M&=8191;M+=c*(5*m);M+=h*(5*b);M+=f*(5*y);M+=l*(5*w);M+=d*(5*p);T+=M>>>13;M&=8191;var C=T;C+=i*p;C+=s*v;C+=o*(5*O);C+=a*(5*E);C+=u*(5*_);T=C>>>13;C&=8191;C+=c*(5*g);C+=h*(5*m);C+=f*(5*b);C+=l*(5*y);C+=d*(5*w);T+=C>>>13;C&=8191;var R=T;R+=i*w;R+=s*p;R+=o*v;R+=a*(5*O);R+=u*(5*E);T=R>>>13;R&=8191;R+=c*(5*_);R+=h*(5*g);R+=f*(5*m);R+=l*(5*b);R+=d*(5*y);T+=R>>>13;R&=8191;var U=T;U+=i*y;U+=s*w;U+=o*p;U+=a*v;U+=u*(5*O);T=U>>>13;U&=8191;U+=c*(5*E);U+=h*(5*_);U+=f*(5*g);U+=l*(5*m);U+=d*(5*b);T+=U>>>13;U&=8191;var D=T;D+=i*b;D+=s*y;D+=o*w;D+=a*p;D+=u*v;T=D>>>13;D&=8191;D+=c*(5*O);D+=h*(5*E);D+=f*(5*_);D+=l*(5*g);D+=d*(5*m);T+=D>>>13;D&=8191;var k=T;k+=i*m;k+=s*b;k+=o*y;k+=a*w;k+=u*p;T=k>>>13;k&=8191;k+=c*v;k+=h*(5*O);k+=f*(5*E);k+=l*(5*_);k+=d*(5*g);T+=k>>>13;k&=8191;var L=T;L+=i*g;L+=s*m;L+=o*b;L+=a*y;L+=u*w;T=L>>>13;L&=8191;L+=c*p;L+=h*v;L+=f*(5*O);L+=l*(5*E);L+=d*(5*_);T+=L>>>13;L&=8191;var q=T;q+=i*_;q+=s*g;q+=o*m;q+=a*b;q+=u*y;T=q>>>13;q&=8191;q+=c*w;q+=h*p;q+=f*v;q+=l*(5*O);q+=d*(5*E);T+=q>>>13;q&=8191;var V=T;V+=i*E;V+=s*_;V+=o*g;V+=a*m;V+=u*b;T=V>>>13;V&=8191;V+=c*y;V+=h*w;V+=f*p;V+=l*v;V+=d*(5*O);T+=V>>>13;V&=8191;var F=T;F+=i*O;F+=s*E;F+=o*_;F+=a*g;F+=u*m;T=F>>>13;F&=8191;F+=c*b;F+=h*y;F+=f*w;F+=l*p;F+=d*v;T+=F>>>13;F&=8191;T=(T<<2)+T|0;T=T+M|0;M=T&8191;T=T>>>13;C+=T;i=M;s=C;o=R;a=U;u=D;c=k;h=L;f=q;l=V;d=F;n+=16;r-=16}this._h[0]=i;this._h[1]=s;this._h[2]=o;this._h[3]=a;this._h[4]=u;this._h[5]=c;this._h[6]=h;this._h[7]=f;this._h[8]=l;this._h[9]=d};n.prototype.finish=function(t,n){if(n===void 0){n=0}var r=new Uint16Array(10);var e;var i;var s;var o;if(this._leftover){o=this._leftover;this._buffer[o++]=1;for(;o<16;o++){this._buffer[o]=0}this._fin=1;this._blocks(this._buffer,0,16)}e=this._h[1]>>>13;this._h[1]&=8191;for(o=2;o<10;o++){this._h[o]+=e;e=this._h[o]>>>13;this._h[o]&=8191}this._h[0]+=e*5;e=this._h[0]>>>13;this._h[0]&=8191;this._h[1]+=e;e=this._h[1]>>>13;this._h[1]&=8191;this._h[2]+=e;r[0]=this._h[0]+5;e=r[0]>>>13;r[0]&=8191;for(o=1;o<10;o++){r[o]=this._h[o]+e;e=r[o]>>>13;r[o]&=8191}r[9]-=1<<13;i=(e^1)-1;for(o=0;o<10;o++){r[o]&=i}i=~i;for(o=0;o<10;o++){this._h[o]=this._h[o]&i|r[o]}this._h[0]=(this._h[0]|this._h[1]<<13)&65535;this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535;this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535;this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535;this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535;this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535;this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535;this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535;s=this._h[0]+this._pad[0];this._h[0]=s&65535;for(o=1;o<8;o++){s=(this._h[o]+this._pad[o]|0)+(s>>>16)|0;this._h[o]=s&65535}t[n+0]=this._h[0]>>>0;t[n+1]=this._h[0]>>>8;t[n+2]=this._h[1]>>>0;t[n+3]=this._h[1]>>>8;t[n+4]=this._h[2]>>>0;t[n+5]=this._h[2]>>>8;t[n+6]=this._h[3]>>>0;t[n+7]=this._h[3]>>>8;t[n+8]=this._h[4]>>>0;t[n+9]=this._h[4]>>>8;t[n+10]=this._h[5]>>>0;t[n+11]=this._h[5]>>>8;t[n+12]=this._h[6]>>>0;t[n+13]=this._h[6]>>>8;t[n+14]=this._h[7]>>>0;t[n+15]=this._h[7]>>>8;this._finished=true;return this};n.prototype.update=function(t){var n=0;var r=t.length;var e;if(this._leftover){e=16-this._leftover;if(e>r){e=r}for(var i=0;i<e;i++){this._buffer[this._leftover+i]=t[n+i]}r-=e;n+=e;this._leftover+=e;if(this._leftover<16){return this}this._blocks(this._buffer,0,16);this._leftover=0}if(r>=16){e=r-r%16;this._blocks(t,n,e);n+=e;r-=e}if(r){for(var i=0;i<r;i++){this._buffer[this._leftover+i]=t[n+i]}this._leftover+=r}return this};n.prototype.digest=function(){if(this._finished){throw new Error("Poly1305 was finished")}var t=new Uint8Array(16);this.finish(t);return t};n.prototype.clean=function(){r.wipe(this._buffer);r.wipe(this._r);r.wipe(this._h);r.wipe(this._pad);this._leftover=0;this._fin=0;this._finished=true;return this};return n}();t.Poly1305=e;function i(t,n){var r=new e(t);r.update(n);var i=r.digest();r.clean();return i}t.oneTimeAuth=i;function s(r,e){if(r.length!==t.DIGEST_LENGTH||e.length!==t.DIGEST_LENGTH){return false}return n.equal(r,e)}t.equal=s})(Y);(function(t){Object.defineProperty(t,"__esModule",{value:true});var n=c;var r=Y;var e=G;var i=h;var s=X;t.KEY_LENGTH=32;t.NONCE_LENGTH=12;t.TAG_LENGTH=16;var o=new Uint8Array(16);var a=function(){function a(n){this.nonceLength=t.NONCE_LENGTH;this.tagLength=t.TAG_LENGTH;if(n.length!==t.KEY_LENGTH){throw new Error("ChaCha20Poly1305 needs 32-byte key")}this._key=new Uint8Array(n)}a.prototype.seal=function(t,r,i,s){if(t.length>16){throw new Error("ChaCha20Poly1305: incorrect nonce length")}var o=new Uint8Array(16);o.set(t,o.length-t.length);var a=new Uint8Array(32);n.stream(this._key,o,a,4);var u=r.length+this.tagLength;var c;if(s){if(s.length!==u){throw new Error("ChaCha20Poly1305: incorrect destination length")}c=s}else{c=new Uint8Array(u)}n.streamXOR(this._key,o,r,c,4);this._authenticate(c.subarray(c.length-this.tagLength,c.length),a,c.subarray(0,c.length-this.tagLength),i);e.wipe(o);return c};a.prototype.open=function(t,r,i,o){if(t.length>16){throw new Error("ChaCha20Poly1305: incorrect nonce length")}if(r.length<this.tagLength){return null}var a=new Uint8Array(16);a.set(t,a.length-t.length);var u=new Uint8Array(32);n.stream(this._key,a,u,4);var c=new Uint8Array(this.tagLength);this._authenticate(c,u,r.subarray(0,r.length-this.tagLength),i);if(!s.equal(c,r.subarray(r.length-this.tagLength,r.length))){return null}var h=r.length-this.tagLength;var f;if(o){if(o.length!==h){throw new Error("ChaCha20Poly1305: incorrect destination length")}f=o}else{f=new Uint8Array(h)}n.streamXOR(this._key,a,r.subarray(0,r.length-this.tagLength),f,4);e.wipe(a);return f};a.prototype.clean=function(){e.wipe(this._key);return this};a.prototype._authenticate=function(t,n,s,a){var u=new r.Poly1305(n);if(a){u.update(a);if(a.length%16>0){u.update(o.subarray(a.length%16))}}u.update(s);if(s.length%16>0){u.update(o.subarray(s.length%16))}var c=new Uint8Array(8);if(a){i.writeUint64LE(a.length,c)}u.update(c);i.writeUint64LE(s.length,c);u.update(c);var h=u.digest();for(var f=0;f<h.length;f++){t[f]=h[f]}u.clean();e.wipe(h);e.wipe(c)};return a}();t.ChaCha20Poly1305=a})(u);var it={};var st={};var ot={};Object.defineProperty(ot,"__esModule",{value:true});function at(t){return typeof t.saveState!=="undefined"&&typeof t.restoreState!=="undefined"&&typeof t.cleanSavedState!=="undefined"}ot.isSerializableHash=at;Object.defineProperty(st,"__esModule",{value:true});var ut=ot;var ct=X;var ht=G;var ft=function(){function t(t,n){this._finished=false;this._inner=new t;this._outer=new t;this.blockSize=this._outer.blockSize;this.digestLength=this._outer.digestLength;var r=new Uint8Array(this.blockSize);if(n.length>this.blockSize){this._inner.update(n).finish(r).clean()}else{r.set(n)}for(var e=0;e<r.length;e++){r[e]^=54}this._inner.update(r);for(var e=0;e<r.length;e++){r[e]^=54^92}this._outer.update(r);if(ut.isSerializableHash(this._inner)&&ut.isSerializableHash(this._outer)){this._innerKeyedState=this._inner.saveState();this._outerKeyedState=this._outer.saveState()}ht.wipe(r)}t.prototype.reset=function(){if(!ut.isSerializableHash(this._inner)||!ut.isSerializableHash(this._outer)){throw new Error("hmac: can't reset() because hash doesn't implement restoreState()")}this._inner.restoreState(this._innerKeyedState);this._outer.restoreState(this._outerKeyedState);this._finished=false;return this};t.prototype.clean=function(){if(ut.isSerializableHash(this._inner)){this._inner.cleanSavedState(this._innerKeyedState)}if(ut.isSerializableHash(this._outer)){this._outer.cleanSavedState(this._outerKeyedState)}this._inner.clean();this._outer.clean()};t.prototype.update=function(t){this._inner.update(t);return this};t.prototype.finish=function(t){if(this._finished){this._outer.finish(t);return this}this._inner.finish(t);this._outer.update(t.subarray(0,this.digestLength)).finish(t);this._finished=true;return this};t.prototype.digest=function(){var t=new Uint8Array(this.digestLength);this.finish(t);return t};t.prototype.saveState=function(){if(!ut.isSerializableHash(this._inner)){throw new Error("hmac: can't saveState() because hash doesn't implement it")}return this._inner.saveState()};t.prototype.restoreState=function(t){if(!ut.isSerializableHash(this._inner)||!ut.isSerializableHash(this._outer)){throw new Error("hmac: can't restoreState() because hash doesn't implement it")}this._inner.restoreState(t);this._outer.restoreState(this._outerKeyedState);this._finished=false;return this};t.prototype.cleanSavedState=function(t){if(!ut.isSerializableHash(this._inner)){throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it")}this._inner.cleanSavedState(t)};return t}();st.HMAC=ft;function lt(t,n,r){var e=new ft(t,n);e.update(r);var i=e.digest();e.clean();return i}st.hmac=lt;st.equal=ct.equal;Object.defineProperty(it,"__esModule",{value:true});var dt=st;var vt=G;var pt=function(){function t(t,n,r,e){if(r===void 0){r=new Uint8Array(0)}this._counter=new Uint8Array(1);this._hash=t;this._info=e;var i=dt.hmac(this._hash,r,n);this._hmac=new dt.HMAC(t,i);this._buffer=new Uint8Array(this._hmac.digestLength);this._bufpos=this._buffer.length}t.prototype._fillBuffer=function(){this._counter[0]++;var t=this._counter[0];if(t===0){throw new Error("hkdf: cannot expand more")}this._hmac.reset();if(t>1){this._hmac.update(this._buffer)}if(this._info){this._hmac.update(this._info)}this._hmac.update(this._counter);this._hmac.finish(this._buffer);this._bufpos=0};t.prototype.expand=function(t){var n=new Uint8Array(t);for(var r=0;r<n.length;r++){if(this._bufpos===this._buffer.length){this._fillBuffer()}n[r]=this._buffer[this._bufpos++]}return n};t.prototype.clean=function(){this._hmac.clean();vt.wipe(this._buffer);vt.wipe(this._counter);this._bufpos=0};return t}();var wt=it.HKDF=pt;var yt={};var bt={};var mt={};Object.defineProperty(mt,"__esModule",{value:true});mt.BrowserRandomSource=void 0;const gt=65536;class _t{constructor(){this.isAvailable=false;this.isInstantiated=false;const t=typeof self!=="undefined"?self.crypto||self.msCrypto:null;if(t&&t.getRandomValues!==undefined){this._crypto=t;this.isAvailable=true;this.isInstantiated=true}}randomBytes(t){if(!this.isAvailable||!this._crypto){throw new Error("Browser random byte generator is not available.")}const n=new Uint8Array(t);for(let t=0;t<n.length;t+=gt){this._crypto.getRandomValues(n.subarray(t,t+Math.min(n.length-t,gt)))}return n}}mt.BrowserRandomSource=_t;var Et={};const Ot={};const St=Object.freeze({__proto__:null,default:Ot});const It=e(St);Object.defineProperty(Et,"__esModule",{value:true});Et.NodeRandomSource=void 0;const jt=G;class At{constructor(){this.isAvailable=false;this.isInstantiated=false;if(typeof i!=="undefined"){const t=It;if(t&&t.randomBytes){this._crypto=t;this.isAvailable=true;this.isInstantiated=true}}}randomBytes(t){if(!this.isAvailable||!this._crypto){throw new Error("Node.js random byte generator is not available.")}let n=this._crypto.randomBytes(t);if(n.length!==t){throw new Error("NodeRandomSource: got fewer bytes than requested")}const r=new Uint8Array(t);for(let t=0;t<r.length;t++){r[t]=n[t]}(0,jt.wipe)(n);return r}}Et.NodeRandomSource=At;Object.defineProperty(bt,"__esModule",{value:true});bt.SystemRandomSource=void 0;const Nt=mt;const Pt=Et;class xt{constructor(){this.isAvailable=false;this.name="";this._source=new Nt.BrowserRandomSource;if(this._source.isAvailable){this.isAvailable=true;this.name="Browser";return}this._source=new Pt.NodeRandomSource;if(this._source.isAvailable){this.isAvailable=true;this.name="Node";return}}randomBytes(t){if(!this.isAvailable){throw new Error("System random byte generator is not available.")}return this._source.randomBytes(t)}}bt.SystemRandomSource=xt;(function(t){Object.defineProperty(t,"__esModule",{value:true});t.randomStringForEntropy=t.randomString=t.randomUint32=t.randomBytes=t.defaultRandomSource=void 0;const n=bt;const r=h;const e=G;t.defaultRandomSource=new n.SystemRandomSource;function i(n,r=t.defaultRandomSource){return r.randomBytes(n)}t.randomBytes=i;function s(n=t.defaultRandomSource){const s=i(4,n);const o=(0,r.readUint32LE)(s);(0,e.wipe)(s);return o}t.randomUint32=s;const o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function a(n,r=o,s=t.defaultRandomSource){if(r.length<2){throw new Error("randomString charset is too short")}if(r.length>256){throw new Error("randomString charset is too long")}let a="";const u=r.length;const c=256-256%u;while(n>0){const t=i(Math.ceil(n*256/c),s);for(let e=0;e<t.length&&n>0;e++){const i=t[e];if(i<c){a+=r.charAt(i%u);n--}}(0,e.wipe)(t)}return a}t.randomString=a;function u(n,r=o,e=t.defaultRandomSource){const i=Math.ceil(n/(Math.log(r.length)/Math.LN2));return a(i,r,e)}t.randomStringForEntropy=u})(yt);var $t={};(function(t){Object.defineProperty(t,"__esModule",{value:true});var n=h;var r=G;t.DIGEST_LENGTH=32;t.BLOCK_SIZE=64;var e=function(){function e(){this.digestLength=t.DIGEST_LENGTH;this.blockSize=t.BLOCK_SIZE;this._state=new Int32Array(8);this._temp=new Int32Array(64);this._buffer=new Uint8Array(128);this._bufferLength=0;this._bytesHashed=0;this._finished=false;this.reset()}e.prototype._initState=function(){this._state[0]=1779033703;this._state[1]=3144134277;this._state[2]=1013904242;this._state[3]=2773480762;this._state[4]=1359893119;this._state[5]=2600822924;this._state[6]=528734635;this._state[7]=1541459225};e.prototype.reset=function(){this._initState();this._bufferLength=0;this._bytesHashed=0;this._finished=false;return this};e.prototype.clean=function(){r.wipe(this._buffer);r.wipe(this._temp);this.reset()};e.prototype.update=function(t,n){if(n===void 0){n=t.length}if(this._finished){throw new Error("SHA256: can't update because hash was finished.")}var r=0;this._bytesHashed+=n;if(this._bufferLength>0){while(this._bufferLength<this.blockSize&&n>0){this._buffer[this._bufferLength++]=t[r++];n--}if(this._bufferLength===this.blockSize){s(this._temp,this._state,this._buffer,0,this.blockSize);this._bufferLength=0}}if(n>=this.blockSize){r=s(this._temp,this._state,t,r,n);n%=this.blockSize}while(n>0){this._buffer[this._bufferLength++]=t[r++];n--}return this};e.prototype.finish=function(t){if(!this._finished){var r=this._bytesHashed;var e=this._bufferLength;var i=r/536870912|0;var o=r<<3;var a=r%64<56?64:128;this._buffer[e]=128;for(var u=e+1;u<a-8;u++){this._buffer[u]=0}n.writeUint32BE(i,this._buffer,a-8);n.writeUint32BE(o,this._buffer,a-4);s(this._temp,this._state,this._buffer,0,a);this._finished=true}for(var u=0;u<this.digestLength/4;u++){n.writeUint32BE(this._state[u],t,u*4)}return this};e.prototype.digest=function(){var t=new Uint8Array(this.digestLength);this.finish(t);return t};e.prototype.saveState=function(){if(this._finished){throw new Error("SHA256: cannot save finished state")}return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):undefined,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}};e.prototype.restoreState=function(t){this._state.set(t.state);this._bufferLength=t.bufferLength;if(t.buffer){this._buffer.set(t.buffer)}this._bytesHashed=t.bytesHashed;this._finished=false;return this};e.prototype.cleanSavedState=function(t){r.wipe(t.state);if(t.buffer){r.wipe(t.buffer)}t.bufferLength=0;t.bytesHashed=0};return e}();t.SHA256=e;var i=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function s(t,r,e,s,o){while(o>=64){var a=r[0];var u=r[1];var c=r[2];var h=r[3];var f=r[4];var l=r[5];var d=r[6];var v=r[7];for(var p=0;p<16;p++){var w=s+p*4;t[p]=n.readUint32BE(e,w)}for(var p=16;p<64;p++){var y=t[p-2];var b=(y>>>17|y<<32-17)^(y>>>19|y<<32-19)^y>>>10;y=t[p-15];var m=(y>>>7|y<<32-7)^(y>>>18|y<<32-18)^y>>>3;t[p]=(b+t[p-7]|0)+(m+t[p-16]|0)}for(var p=0;p<64;p++){var b=(((f>>>6|f<<32-6)^(f>>>11|f<<32-11)^(f>>>25|f<<32-25))+(f&l^~f&d)|0)+(v+(i[p]+t[p]|0)|0)|0;var m=((a>>>2|a<<32-2)^(a>>>13|a<<32-13)^(a>>>22|a<<32-22))+(a&u^a&c^u&c)|0;v=d;d=l;l=f;f=h+b|0;h=c;c=u;u=a;a=b+m|0}r[0]+=a;r[1]+=u;r[2]+=c;r[3]+=h;r[4]+=f;r[5]+=l;r[6]+=d;r[7]+=v;s+=64;o-=64}return s}function o(t){var n=new e;n.update(t);var r=n.digest();n.clean();return r}t.hash=o})($t);var Tt={};(function(t){Object.defineProperty(t,"__esModule",{value:true});t.sharedKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.scalarMultBase=t.scalarMult=t.SHARED_KEY_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=void 0;const n=yt;const r=G;t.PUBLIC_KEY_LENGTH=32;t.SECRET_KEY_LENGTH=32;t.SHARED_KEY_LENGTH=32;function e(t){const n=new Float64Array(16);if(t){for(let r=0;r<t.length;r++){n[r]=t[r]}}return n}const i=new Uint8Array(32);i[0]=9;const s=e([56129,1]);function o(t){let n=1;for(let r=0;r<16;r++){let e=t[r]+n+65535;n=Math.floor(e/65536);t[r]=e-n*65536}t[0]+=n-1+37*(n-1)}function a(t,n,r){const e=~(r-1);for(let r=0;r<16;r++){const i=e&(t[r]^n[r]);t[r]^=i;n[r]^=i}}function u(t,n){const r=e();const i=e();for(let t=0;t<16;t++){i[t]=n[t]}o(i);o(i);o(i);for(let t=0;t<2;t++){r[0]=i[0]-65517;for(let t=1;t<15;t++){r[t]=i[t]-65535-(r[t-1]>>16&1);r[t-1]&=65535}r[15]=i[15]-32767-(r[14]>>16&1);const t=r[15]>>16&1;r[14]&=65535;a(i,r,1-t)}for(let n=0;n<16;n++){t[2*n]=i[n]&255;t[2*n+1]=i[n]>>8}}function c(t,n){for(let r=0;r<16;r++){t[r]=n[2*r]+(n[2*r+1]<<8)}t[15]&=32767}function h(t,n,r){for(let e=0;e<16;e++){t[e]=n[e]+r[e]}}function f(t,n,r){for(let e=0;e<16;e++){t[e]=n[e]-r[e]}}function l(t,n,r){let e,i,s=0,o=0,a=0,u=0,c=0,h=0,f=0,l=0,d=0,v=0,p=0,w=0,y=0,b=0,m=0,g=0,_=0,E=0,O=0,S=0,I=0,j=0,A=0,N=0,P=0,x=0,$=0,T=0,M=0,C=0,R=0,U=r[0],D=r[1],k=r[2],L=r[3],q=r[4],V=r[5],F=r[6],G=r[7],H=r[8],z=r[9],W=r[10],B=r[11],K=r[12],J=r[13],Z=r[14],Q=r[15];e=n[0];s+=e*U;o+=e*D;a+=e*k;u+=e*L;c+=e*q;h+=e*V;f+=e*F;l+=e*G;d+=e*H;v+=e*z;p+=e*W;w+=e*B;y+=e*K;b+=e*J;m+=e*Z;g+=e*Q;e=n[1];o+=e*U;a+=e*D;u+=e*k;c+=e*L;h+=e*q;f+=e*V;l+=e*F;d+=e*G;v+=e*H;p+=e*z;w+=e*W;y+=e*B;b+=e*K;m+=e*J;g+=e*Z;_+=e*Q;e=n[2];a+=e*U;u+=e*D;c+=e*k;h+=e*L;f+=e*q;l+=e*V;d+=e*F;v+=e*G;p+=e*H;w+=e*z;y+=e*W;b+=e*B;m+=e*K;g+=e*J;_+=e*Z;E+=e*Q;e=n[3];u+=e*U;c+=e*D;h+=e*k;f+=e*L;l+=e*q;d+=e*V;v+=e*F;p+=e*G;w+=e*H;y+=e*z;b+=e*W;m+=e*B;g+=e*K;_+=e*J;E+=e*Z;O+=e*Q;e=n[4];c+=e*U;h+=e*D;f+=e*k;l+=e*L;d+=e*q;v+=e*V;p+=e*F;w+=e*G;y+=e*H;b+=e*z;m+=e*W;g+=e*B;_+=e*K;E+=e*J;O+=e*Z;S+=e*Q;e=n[5];h+=e*U;f+=e*D;l+=e*k;d+=e*L;v+=e*q;p+=e*V;w+=e*F;y+=e*G;b+=e*H;m+=e*z;g+=e*W;_+=e*B;E+=e*K;O+=e*J;S+=e*Z;I+=e*Q;e=n[6];f+=e*U;l+=e*D;d+=e*k;v+=e*L;p+=e*q;w+=e*V;y+=e*F;b+=e*G;m+=e*H;g+=e*z;_+=e*W;E+=e*B;O+=e*K;S+=e*J;I+=e*Z;j+=e*Q;e=n[7];l+=e*U;d+=e*D;v+=e*k;p+=e*L;w+=e*q;y+=e*V;b+=e*F;m+=e*G;g+=e*H;_+=e*z;E+=e*W;O+=e*B;S+=e*K;I+=e*J;j+=e*Z;A+=e*Q;e=n[8];d+=e*U;v+=e*D;p+=e*k;w+=e*L;y+=e*q;b+=e*V;m+=e*F;g+=e*G;_+=e*H;E+=e*z;O+=e*W;S+=e*B;I+=e*K;j+=e*J;A+=e*Z;N+=e*Q;e=n[9];v+=e*U;p+=e*D;w+=e*k;y+=e*L;b+=e*q;m+=e*V;g+=e*F;_+=e*G;E+=e*H;O+=e*z;S+=e*W;I+=e*B;j+=e*K;A+=e*J;N+=e*Z;P+=e*Q;e=n[10];p+=e*U;w+=e*D;y+=e*k;b+=e*L;m+=e*q;g+=e*V;_+=e*F;E+=e*G;O+=e*H;S+=e*z;I+=e*W;j+=e*B;A+=e*K;N+=e*J;P+=e*Z;x+=e*Q;e=n[11];w+=e*U;y+=e*D;b+=e*k;m+=e*L;g+=e*q;_+=e*V;E+=e*F;O+=e*G;S+=e*H;I+=e*z;j+=e*W;A+=e*B;N+=e*K;P+=e*J;x+=e*Z;$+=e*Q;e=n[12];y+=e*U;b+=e*D;m+=e*k;g+=e*L;_+=e*q;E+=e*V;O+=e*F;S+=e*G;I+=e*H;j+=e*z;A+=e*W;N+=e*B;P+=e*K;x+=e*J;$+=e*Z;T+=e*Q;e=n[13];b+=e*U;m+=e*D;g+=e*k;_+=e*L;E+=e*q;O+=e*V;S+=e*F;I+=e*G;j+=e*H;A+=e*z;N+=e*W;P+=e*B;x+=e*K;$+=e*J;T+=e*Z;M+=e*Q;e=n[14];m+=e*U;g+=e*D;_+=e*k;E+=e*L;O+=e*q;S+=e*V;I+=e*F;j+=e*G;A+=e*H;N+=e*z;P+=e*W;x+=e*B;$+=e*K;T+=e*J;M+=e*Z;C+=e*Q;e=n[15];g+=e*U;_+=e*D;E+=e*k;O+=e*L;S+=e*q;I+=e*V;j+=e*F;A+=e*G;N+=e*H;P+=e*z;x+=e*W;$+=e*B;T+=e*K;M+=e*J;C+=e*Z;R+=e*Q;s+=38*_;o+=38*E;a+=38*O;u+=38*S;c+=38*I;h+=38*j;f+=38*A;l+=38*N;d+=38*P;v+=38*x;p+=38*$;w+=38*T;y+=38*M;b+=38*C;m+=38*R;i=1;e=s+i+65535;i=Math.floor(e/65536);s=e-i*65536;e=o+i+65535;i=Math.floor(e/65536);o=e-i*65536;e=a+i+65535;i=Math.floor(e/65536);a=e-i*65536;e=u+i+65535;i=Math.floor(e/65536);u=e-i*65536;e=c+i+65535;i=Math.floor(e/65536);c=e-i*65536;e=h+i+65535;i=Math.floor(e/65536);h=e-i*65536;e=f+i+65535;i=Math.floor(e/65536);f=e-i*65536;e=l+i+65535;i=Math.floor(e/65536);l=e-i*65536;e=d+i+65535;i=Math.floor(e/65536);d=e-i*65536;e=v+i+65535;i=Math.floor(e/65536);v=e-i*65536;e=p+i+65535;i=Math.floor(e/65536);p=e-i*65536;e=w+i+65535;i=Math.floor(e/65536);w=e-i*65536;e=y+i+65535;i=Math.floor(e/65536);y=e-i*65536;e=b+i+65535;i=Math.floor(e/65536);b=e-i*65536;e=m+i+65535;i=Math.floor(e/65536);m=e-i*65536;e=g+i+65535;i=Math.floor(e/65536);g=e-i*65536;s+=i-1+37*(i-1);i=1;e=s+i+65535;i=Math.floor(e/65536);s=e-i*65536;e=o+i+65535;i=Math.floor(e/65536);o=e-i*65536;e=a+i+65535;i=Math.floor(e/65536);a=e-i*65536;e=u+i+65535;i=Math.floor(e/65536);u=e-i*65536;e=c+i+65535;i=Math.floor(e/65536);c=e-i*65536;e=h+i+65535;i=Math.floor(e/65536);h=e-i*65536;e=f+i+65535;i=Math.floor(e/65536);f=e-i*65536;e=l+i+65535;i=Math.floor(e/65536);l=e-i*65536;e=d+i+65535;i=Math.floor(e/65536);d=e-i*65536;e=v+i+65535;i=Math.floor(e/65536);v=e-i*65536;e=p+i+65535;i=Math.floor(e/65536);p=e-i*65536;e=w+i+65535;i=Math.floor(e/65536);w=e-i*65536;e=y+i+65535;i=Math.floor(e/65536);y=e-i*65536;e=b+i+65535;i=Math.floor(e/65536);b=e-i*65536;e=m+i+65535;i=Math.floor(e/65536);m=e-i*65536;e=g+i+65535;i=Math.floor(e/65536);g=e-i*65536;s+=i-1+37*(i-1);t[0]=s;t[1]=o;t[2]=a;t[3]=u;t[4]=c;t[5]=h;t[6]=f;t[7]=l;t[8]=d;t[9]=v;t[10]=p;t[11]=w;t[12]=y;t[13]=b;t[14]=m;t[15]=g}function d(t,n){l(t,n,n)}function v(t,n){const r=e();for(let t=0;t<16;t++){r[t]=n[t]}for(let t=253;t>=0;t--){d(r,r);if(t!==2&&t!==4){l(r,r,n)}}for(let n=0;n<16;n++){t[n]=r[n]}}function p(t,n){const r=new Uint8Array(32);const i=new Float64Array(80);const o=e(),p=e(),w=e(),y=e(),b=e(),m=e();for(let n=0;n<31;n++){r[n]=t[n]}r[31]=t[31]&127|64;r[0]&=248;c(i,n);for(let t=0;t<16;t++){p[t]=i[t]}o[0]=y[0]=1;for(let t=254;t>=0;--t){const n=r[t>>>3]>>>(t&7)&1;a(o,p,n);a(w,y,n);h(b,o,w);f(o,o,w);h(w,p,y);f(p,p,y);d(y,b);d(m,o);l(o,w,o);l(w,p,b);h(b,o,w);f(o,o,w);d(p,o);f(w,y,m);l(o,w,s);h(o,o,y);l(w,w,o);l(o,y,m);l(y,p,i);d(p,b);a(o,p,n);a(w,y,n)}for(let t=0;t<16;t++){i[t+16]=o[t];i[t+32]=w[t];i[t+48]=p[t];i[t+64]=y[t]}const g=i.subarray(32);const _=i.subarray(16);v(g,g);l(_,_,g);const E=new Uint8Array(32);u(E,_);return E}t.scalarMult=p;function w(t){return p(t,i)}t.scalarMultBase=w;function y(n){if(n.length!==t.SECRET_KEY_LENGTH){throw new Error(`x25519: seed must be ${t.SECRET_KEY_LENGTH} bytes`)}const r=new Uint8Array(n);const e=w(r);return{publicKey:e,secretKey:r}}t.generateKeyPairFromSeed=y;function b(t){const e=(0,n.randomBytes)(32,t);const i=y(e);(0,r.wipe)(e);return i}t.generateKeyPair=b;function m(n,r,e=false){if(n.length!==t.PUBLIC_KEY_LENGTH){throw new Error("X25519: incorrect secret key length")}if(r.length!==t.PUBLIC_KEY_LENGTH){throw new Error("X25519: incorrect public key length")}const i=p(n,r);if(e){let t=0;for(let n=0;n<i.length;n++){t|=i[n]}if(t===0){throw new Error("X25519: invalid shared key")}}return i}t.sharedKey=m})(Tt);var Mt={};var Ct={};Object.defineProperty(Ct,"__esModule",{value:true});function Rt(t,n){for(let r=0;r<t.byteLength;r++){if(t[r]<n[r]){return-1}if(t[r]>n[r]){return 1}}if(t.byteLength>n.byteLength){return 1}if(t.byteLength<n.byteLength){return-1}return 0}Ct.compare=Rt;var Ut={};var Dt={};var kt={};Object.defineProperty(kt,"__esModule",{value:true});function Lt(t){if(globalThis.Buffer!=null){return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}return t}kt.asUint8Array=Lt;Object.defineProperty(Dt,"__esModule",{value:true});var qt=kt;function Vt(t=0){if(globalThis.Buffer!=null&&globalThis.Buffer.alloc!=null){return qt.asUint8Array(globalThis.Buffer.alloc(t))}return new Uint8Array(t)}function Ft(t=0){if(globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null){return qt.asUint8Array(globalThis.Buffer.allocUnsafe(t))}return new Uint8Array(t)}Dt.alloc=Vt;Dt.allocUnsafe=Ft;Object.defineProperty(Ut,"__esModule",{value:true});var Gt=Dt;var Ht=kt;function zt(t,n){if(!n){n=t.reduce(((t,n)=>t+n.length),0)}const r=Gt.allocUnsafe(n);let e=0;for(const n of t){r.set(n,e);e+=n.length}return Ht.asUint8Array(r)}Ut.concat=zt;var Wt={};Object.defineProperty(Wt,"__esModule",{value:true});function Bt(t,n){if(t===n){return true}if(t.byteLength!==n.byteLength){return false}for(let r=0;r<t.byteLength;r++){if(t[r]!==n[r]){return false}}return true}Wt.equals=Bt;var Kt={};var Jt={};var Zt={};var Qt={};function Yt(t,n){if(t.length>=255){throw new TypeError("Alphabet too long")}var r=new Uint8Array(256);for(var e=0;e<r.length;e++){r[e]=255}for(var i=0;i<t.length;i++){var s=t.charAt(i);var o=s.charCodeAt(0);if(r[o]!==255){throw new TypeError(s+" is ambiguous")}r[o]=i}var a=t.length;var u=t.charAt(0);var c=Math.log(a)/Math.log(256);var h=Math.log(256)/Math.log(a);function f(n){if(n instanceof Uint8Array);else if(ArrayBuffer.isView(n)){n=new Uint8Array(n.buffer,n.byteOffset,n.byteLength)}else if(Array.isArray(n)){n=Uint8Array.from(n)}if(!(n instanceof Uint8Array)){throw new TypeError("Expected Uint8Array")}if(n.length===0){return""}var r=0;var e=0;var i=0;var s=n.length;while(i!==s&&n[i]===0){i++;r++}var o=(s-i)*h+1>>>0;var c=new Uint8Array(o);while(i!==s){var f=n[i];var l=0;for(var d=o-1;(f!==0||l<e)&&d!==-1;d--,l++){f+=256*c[d]>>>0;c[d]=f%a>>>0;f=f/a>>>0}if(f!==0){throw new Error("Non-zero carry")}e=l;i++}var v=o-e;while(v!==o&&c[v]===0){v++}var p=u.repeat(r);for(;v<o;++v){p+=t.charAt(c[v])}return p}function l(t){if(typeof t!=="string"){throw new TypeError("Expected String")}if(t.length===0){return new Uint8Array}var n=0;if(t[n]===" "){return}var e=0;var i=0;while(t[n]===u){e++;n++}var s=(t.length-n)*c+1>>>0;var o=new Uint8Array(s);while(t[n]){var h=r[t.charCodeAt(n)];if(h===255){return}var f=0;for(var l=s-1;(h!==0||f<i)&&l!==-1;l--,f++){h+=a*o[l]>>>0;o[l]=h%256>>>0;h=h/256>>>0}if(h!==0){throw new Error("Non-zero carry")}i=f;n++}if(t[n]===" "){return}var d=s-i;while(d!==s&&o[d]===0){d++}var v=new Uint8Array(e+(s-d));var p=e;while(d!==s){v[p++]=o[d++]}return v}function d(t){var r=l(t);if(r){return r}throw new Error(`Non-${n} character`)}return{encode:f,decodeUnsafe:l,decode:d}}var Xt=Yt;var tn=Xt;var nn=tn;var rn={};Object.defineProperty(rn,"__esModule",{value:true});const en=new Uint8Array(0);const sn=t=>t.reduce(((t,n)=>t+n.toString(16).padStart(2,"0")),"");const on=t=>{const n=t.match(/../g);return n?new Uint8Array(n.map((t=>parseInt(t,16)))):en};const an=(t,n)=>{if(t===n)return true;if(t.byteLength!==n.byteLength){return false}for(let r=0;r<t.byteLength;r++){if(t[r]!==n[r]){return false}}return true};const un=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t)){return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}throw new Error("Unknown type, must be binary type")};const cn=t=>t instanceof ArrayBuffer||ArrayBuffer.isView(t);const hn=t=>(new TextEncoder).encode(t);const fn=t=>(new TextDecoder).decode(t);rn.coerce=un;rn.empty=en;rn.equals=an;rn.fromHex=on;rn.fromString=hn;rn.isBinary=cn;rn.toHex=sn;rn.toString=fn;Object.defineProperty(Qt,"__esModule",{value:true});var ln=nn;var dn=rn;class vn{constructor(t,n,r){this.name=t;this.prefix=n;this.baseEncode=r}encode(t){if(t instanceof Uint8Array){return`${this.prefix}${this.baseEncode(t)}`}else{throw Error("Unknown type, must be binary type")}}}class pn{constructor(t,n,r){this.name=t;this.prefix=n;if(n.codePointAt(0)===undefined){throw new Error("Invalid prefix character")}this.prefixCodePoint=n.codePointAt(0);this.baseDecode=r}decode(t){if(typeof t==="string"){if(t.codePointAt(0)!==this.prefixCodePoint){throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`)}return this.baseDecode(t.slice(this.prefix.length))}else{throw Error("Can only multibase decode strings")}}or(t){return yn(this,t)}}class wn{constructor(t){this.decoders=t}or(t){return yn(this,t)}decode(t){const n=t[0];const r=this.decoders[n];if(r){return r.decode(t)}else{throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}}const yn=(t,n)=>new wn({...t.decoders||{[t.prefix]:t},...n.decoders||{[n.prefix]:n}});class bn{constructor(t,n,r,e){this.name=t;this.prefix=n;this.baseEncode=r;this.baseDecode=e;this.encoder=new vn(t,n,r);this.decoder=new pn(t,n,e)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const mn=({name:t,prefix:n,encode:r,decode:e})=>new bn(t,n,r,e);const gn=({prefix:t,name:n,alphabet:r})=>{const{encode:e,decode:i}=ln(r,n);return mn({prefix:t,name:n,encode:e,decode:t=>dn.coerce(i(t))})};const _n=(t,n,r,e)=>{const i={};for(let t=0;t<n.length;++t){i[n[t]]=t}let s=t.length;while(t[s-1]==="="){--s}const o=new Uint8Array(s*r/8|0);let a=0;let u=0;let c=0;for(let n=0;n<s;++n){const s=i[t[n]];if(s===undefined){throw new SyntaxError(`Non-${e} character`)}u=u<<r|s;a+=r;if(a>=8){a-=8;o[c++]=255&u>>a}}if(a>=r||255&u<<8-a){throw new SyntaxError("Unexpected end of data")}return o};const En=(t,n,r)=>{const e=n[n.length-1]==="=";const i=(1<<r)-1;let s="";let o=0;let a=0;for(let e=0;e<t.length;++e){a=a<<8|t[e];o+=8;while(o>r){o-=r;s+=n[i&a>>o]}}if(o){s+=n[i&a<<r-o]}if(e){while(s.length*r&7){s+="="}}return s};const On=({name:t,prefix:n,bitsPerChar:r,alphabet:e})=>mn({prefix:n,name:t,encode(t){return En(t,e,r)},decode(n){return _n(n,e,r,t)}});Qt.Codec=bn;Qt.baseX=gn;Qt.from=mn;Qt.or=yn;Qt.rfc4648=On;Object.defineProperty(Zt,"__esModule",{value:true});var Sn=Qt;var In=rn;const jn=Sn.from({prefix:"\0",name:"identity",encode:t=>In.toString(t),decode:t=>In.fromString(t)});Zt.identity=jn;var An={};Object.defineProperty(An,"__esModule",{value:true});var Nn=Qt;const Pn=Nn.rfc4648({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});An.base2=Pn;var xn={};Object.defineProperty(xn,"__esModule",{value:true});var $n=Qt;const Tn=$n.rfc4648({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});xn.base8=Tn;var Mn={};Object.defineProperty(Mn,"__esModule",{value:true});var Cn=Qt;const Rn=Cn.baseX({prefix:"9",name:"base10",alphabet:"0123456789"});Mn.base10=Rn;var Un={};Object.defineProperty(Un,"__esModule",{value:true});var Dn=Qt;const kn=Dn.rfc4648({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4});const Ln=Dn.rfc4648({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});Un.base16=kn;Un.base16upper=Ln;var qn={};Object.defineProperty(qn,"__esModule",{value:true});var Vn=Qt;const Fn=Vn.rfc4648({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});const Gn=Vn.rfc4648({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});const Hn=Vn.rfc4648({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});const zn=Vn.rfc4648({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});const Wn=Vn.rfc4648({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});const Bn=Vn.rfc4648({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});const Kn=Vn.rfc4648({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});const Jn=Vn.rfc4648({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});const Zn=Vn.rfc4648({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});qn.base32=Fn;qn.base32hex=Wn;qn.base32hexpad=Kn;qn.base32hexpadupper=Jn;qn.base32hexupper=Bn;qn.base32pad=Hn;qn.base32padupper=zn;qn.base32upper=Gn;qn.base32z=Zn;var Qn={};Object.defineProperty(Qn,"__esModule",{value:true});var Yn=Qt;const Xn=Yn.baseX({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"});const tr=Yn.baseX({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});Qn.base36=Xn;Qn.base36upper=tr;var nr={};Object.defineProperty(nr,"__esModule",{value:true});var rr=Qt;const er=rr.baseX({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});const ir=rr.baseX({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});nr.base58btc=er;nr.base58flickr=ir;var sr={};Object.defineProperty(sr,"__esModule",{value:true});var or=Qt;const ar=or.rfc4648({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});const ur=or.rfc4648({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6});const cr=or.rfc4648({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6});const hr=or.rfc4648({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});sr.base64=ar;sr.base64pad=ur;sr.base64url=cr;sr.base64urlpad=hr;var fr={};Object.defineProperty(fr,"__esModule",{value:true});var lr=Qt;const dr=Array.from("ðŸš€ðŸªâ˜„ðŸ›°ðŸŒŒðŸŒ‘ðŸŒ’ðŸŒ“ðŸŒ”ðŸŒ•ðŸŒ–ðŸŒ—ðŸŒ˜ðŸŒðŸŒðŸŒŽðŸ‰â˜€ðŸ’»ðŸ–¥ðŸ’¾ðŸ’¿ðŸ˜‚â¤ðŸ˜ðŸ¤£ðŸ˜ŠðŸ™ðŸ’•ðŸ˜­ðŸ˜˜ðŸ‘ðŸ˜…ðŸ‘ðŸ˜ðŸ”¥ðŸ¥°ðŸ’”ðŸ’–ðŸ’™ðŸ˜¢ðŸ¤”ðŸ˜†ðŸ™„ðŸ’ªðŸ˜‰â˜ºðŸ‘ŒðŸ¤—ðŸ’œðŸ˜”ðŸ˜ŽðŸ˜‡ðŸŒ¹ðŸ¤¦ðŸŽ‰ðŸ’žâœŒâœ¨ðŸ¤·ðŸ˜±ðŸ˜ŒðŸŒ¸ðŸ™ŒðŸ˜‹ðŸ’—ðŸ’šðŸ˜ðŸ’›ðŸ™‚ðŸ’“ðŸ¤©ðŸ˜„ðŸ˜€ðŸ–¤ðŸ˜ƒðŸ’¯ðŸ™ˆðŸ‘‡ðŸŽ¶ðŸ˜’ðŸ¤­â£ðŸ˜œðŸ’‹ðŸ‘€ðŸ˜ªðŸ˜‘ðŸ’¥ðŸ™‹ðŸ˜žðŸ˜©ðŸ˜¡ðŸ¤ªðŸ‘ŠðŸ¥³ðŸ˜¥ðŸ¤¤ðŸ‘‰ðŸ’ƒðŸ˜³âœ‹ðŸ˜šðŸ˜ðŸ˜´ðŸŒŸðŸ˜¬ðŸ™ƒðŸ€ðŸŒ·ðŸ˜»ðŸ˜“â­âœ…ðŸ¥ºðŸŒˆðŸ˜ˆðŸ¤˜ðŸ’¦âœ”ðŸ˜£ðŸƒðŸ’â˜¹ðŸŽŠðŸ’˜ðŸ˜ â˜ðŸ˜•ðŸŒºðŸŽ‚ðŸŒ»ðŸ˜ðŸ–•ðŸ’ðŸ™ŠðŸ˜¹ðŸ—£ðŸ’«ðŸ’€ðŸ‘‘ðŸŽµðŸ¤žðŸ˜›ðŸ”´ðŸ˜¤ðŸŒ¼ðŸ˜«âš½ðŸ¤™â˜•ðŸ†ðŸ¤«ðŸ‘ˆðŸ˜®ðŸ™†ðŸ»ðŸƒðŸ¶ðŸ’ðŸ˜²ðŸŒ¿ðŸ§¡ðŸŽâš¡ðŸŒžðŸŽˆâŒâœŠðŸ‘‹ðŸ˜°ðŸ¤¨ðŸ˜¶ðŸ¤ðŸš¶ðŸ’°ðŸ“ðŸ’¢ðŸ¤ŸðŸ™ðŸš¨ðŸ’¨ðŸ¤¬âœˆðŸŽ€ðŸºðŸ¤“ðŸ˜™ðŸ’ŸðŸŒ±ðŸ˜–ðŸ‘¶ðŸ¥´â–¶âž¡â“ðŸ’ŽðŸ’¸â¬‡ðŸ˜¨ðŸŒšðŸ¦‹ðŸ˜·ðŸ•ºâš ðŸ™…ðŸ˜ŸðŸ˜µðŸ‘ŽðŸ¤²ðŸ¤ ðŸ¤§ðŸ“ŒðŸ”µðŸ’…ðŸ§ðŸ¾ðŸ’ðŸ˜—ðŸ¤‘ðŸŒŠðŸ¤¯ðŸ·â˜ŽðŸ’§ðŸ˜¯ðŸ’†ðŸ‘†ðŸŽ¤ðŸ™‡ðŸ‘â„ðŸŒ´ðŸ’£ðŸ¸ðŸ’ŒðŸ“ðŸ¥€ðŸ¤¢ðŸ‘…ðŸ’¡ðŸ’©ðŸ‘ðŸ“¸ðŸ‘»ðŸ¤ðŸ¤®ðŸŽ¼ðŸ¥µðŸš©ðŸŽðŸŠðŸ‘¼ðŸ’ðŸ“£ðŸ¥‚");const vr=dr.reduce(((t,n,r)=>{t[r]=n;return t}),[]);const pr=dr.reduce(((t,n,r)=>{t[n.codePointAt(0)]=r;return t}),[]);function wr(t){return t.reduce(((t,n)=>{t+=vr[n];return t}),"")}function yr(t){const n=[];for(const r of t){const t=pr[r.codePointAt(0)];if(t===undefined){throw new Error(`Non-base256emoji character: ${r}`)}n.push(t)}return new Uint8Array(n)}const br=lr.from({prefix:"ðŸš€",name:"base256emoji",encode:wr,decode:yr});fr.base256emoji=br;var mr={};var gr={};var _r={};var Er={};var Or=Nr;var Sr=128,Ir=127,jr=~Ir,Ar=Math.pow(2,31);function Nr(t,n,r){n=n||[];r=r||0;var e=r;while(t>=Ar){n[r++]=t&255|Sr;t/=128}while(t&jr){n[r++]=t&255|Sr;t>>>=7}n[r]=t|0;Nr.bytes=r-e+1;return n}var Pr=Tr;var xr=128,$r=127;function Tr(t,n){var r=0,n=n||0,e=0,i=n,s,o=t.length;do{if(i>=o){Tr.bytes=0;throw new RangeError("Could not decode varint")}s=t[i++];r+=e<28?(s&$r)<<e:(s&$r)*Math.pow(2,e);e+=7}while(s>=xr);Tr.bytes=i-n;return r}var Mr=Math.pow(2,7);var Cr=Math.pow(2,14);var Rr=Math.pow(2,21);var Ur=Math.pow(2,28);var Dr=Math.pow(2,35);var kr=Math.pow(2,42);var Lr=Math.pow(2,49);var qr=Math.pow(2,56);var Vr=Math.pow(2,63);var Fr=function(t){return t<Mr?1:t<Cr?2:t<Rr?3:t<Ur?4:t<Dr?5:t<kr?6:t<Lr?7:t<qr?8:t<Vr?9:10};var Gr={encode:Or,decode:Pr,encodingLength:Fr};var Hr=Gr;var zr=Hr;var Wr=zr;Object.defineProperty(Er,"__esModule",{value:true});var Br=Wr;const Kr=(t,n=0)=>{const r=Br.decode(t,n);return[r,Br.decode.bytes]};const Jr=(t,n,r=0)=>{Br.encode(t,n,r);return n};const Zr=t=>Br.encodingLength(t);Er.decode=Kr;Er.encodeTo=Jr;Er.encodingLength=Zr;Object.defineProperty(_r,"__esModule",{value:true});var Qr=rn;var Yr=Er;const Xr=(t,n)=>{const r=n.byteLength;const e=Yr.encodingLength(t);const i=e+Yr.encodingLength(r);const s=new Uint8Array(i+r);Yr.encodeTo(t,s,0);Yr.encodeTo(r,s,e);s.set(n,i);return new re(t,r,n,s)};const te=t=>{const n=Qr.coerce(t);const[r,e]=Yr.decode(n);const[i,s]=Yr.decode(n.subarray(e));const o=n.subarray(e+s);if(o.byteLength!==i){throw new Error("Incorrect length")}return new re(r,i,o,n)};const ne=(t,n)=>{if(t===n){return true}else{return t.code===n.code&&t.size===n.size&&Qr.equals(t.bytes,n.bytes)}};class re{constructor(t,n,r,e){this.code=t;this.size=n;this.digest=r;this.bytes=e}}_r.Digest=re;_r.create=Xr;_r.decode=te;_r.equals=ne;Object.defineProperty(gr,"__esModule",{value:true});var ee=_r;const ie=({name:t,code:n,encode:r})=>new se(t,n,r);class se{constructor(t,n,r){this.name=t;this.code=n;this.encode=r}digest(t){if(t instanceof Uint8Array){const n=this.encode(t);return n instanceof Uint8Array?ee.create(this.code,n):n.then((t=>ee.create(this.code,t)))}else{throw Error("Unknown type, must be binary type")}}}gr.Hasher=se;gr.from=ie;Object.defineProperty(mr,"__esModule",{value:true});var oe=gr;const ae=t=>async n=>new Uint8Array(await crypto.subtle.digest(t,n));const ue=oe.from({name:"sha2-256",code:18,encode:ae("SHA-256")});const ce=oe.from({name:"sha2-512",code:19,encode:ae("SHA-512")});mr.sha256=ue;mr.sha512=ce;var he={};Object.defineProperty(he,"__esModule",{value:true});var fe=rn;var le=_r;const de=0;const ve="identity";const pe=fe.coerce;const we=t=>le.create(de,pe(t));const ye={code:de,name:ve,encode:pe,digest:we};he.identity=ye;var be={};Object.defineProperty(be,"__esModule",{value:true});var me=rn;const ge="raw";const _e=85;const Ee=t=>me.coerce(t);const Oe=t=>me.coerce(t);be.code=_e;be.decode=Oe;be.encode=Ee;be.name=ge;var Se={};Object.defineProperty(Se,"__esModule",{value:true});const Ie=new TextEncoder;const je=new TextDecoder;const Ae="json";const Ne=512;const Pe=t=>Ie.encode(JSON.stringify(t));const xe=t=>JSON.parse(je.decode(t));Se.code=Ne;Se.decode=xe;Se.encode=Pe;Se.name=Ae;var $e={};var Te={};Object.defineProperty(Te,"__esModule",{value:true});var Me=Er;var Ce=_r;var Re=nr;var Ue=qn;var De=rn;class ke{constructor(t,n,r,e){this.code=n;this.version=t;this.multihash=r;this.bytes=e;this.byteOffset=e.byteOffset;this.byteLength=e.byteLength;this.asCID=this;this._baseCache=new Map;Object.defineProperties(this,{byteOffset:Be,byteLength:Be,code:We,version:We,multihash:We,bytes:We,_baseCache:Be,asCID:Be})}toV0(){switch(this.version){case 0:{return this}default:{const{code:t,multihash:n}=this;if(t!==Fe){throw new Error("Cannot convert a non dag-pb CID to CIDv0")}if(n.code!==Ge){throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0")}return ke.createV0(n)}}}toV1(){switch(this.version){case 0:{const{code:t,digest:n}=this.multihash;const r=Ce.create(t,n);return ke.createV1(this.code,r)}case 1:{return this}default:{throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}}equals(t){return t&&this.code===t.code&&this.version===t.version&&Ce.equals(this.multihash,t.multihash)}toString(t){const{bytes:n,version:r,_baseCache:e}=this;switch(r){case 0:return qe(n,e,t||Re.base58btc.encoder);default:return Ve(n,e,t||Ue.base32.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(t){Je(/^0\.0/,Ze);return!!(t&&(t[ze]||t.asCID===t))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(t){if(t instanceof ke){return t}else if(t!=null&&t.asCID===t){const{version:n,code:r,multihash:e,bytes:i}=t;return new ke(n,r,e,i||He(n,r,e.bytes))}else if(t!=null&&t[ze]===true){const{version:n,multihash:r,code:e}=t;const i=Ce.decode(r);return ke.create(n,e,i)}else{return null}}static create(t,n,r){if(typeof n!=="number"){throw new Error("String codecs are no longer supported")}switch(t){case 0:{if(n!==Fe){throw new Error(`Version 0 CID must use dag-pb (code: ${Fe}) block encoding`)}else{return new ke(t,n,r,r.bytes)}}case 1:{const e=He(t,n,r.bytes);return new ke(t,n,r,e)}default:{throw new Error("Invalid version")}}}static createV0(t){return ke.create(0,Fe,t)}static createV1(t,n){return ke.create(1,t,n)}static decode(t){const[n,r]=ke.decodeFirst(t);if(r.length){throw new Error("Incorrect length")}return n}static decodeFirst(t){const n=ke.inspectBytes(t);const r=n.size-n.multihashSize;const e=De.coerce(t.subarray(r,r+n.multihashSize));if(e.byteLength!==n.multihashSize){throw new Error("Incorrect length")}const i=e.subarray(n.multihashSize-n.digestSize);const s=new Ce.Digest(n.multihashCode,n.digestSize,i,e);const o=n.version===0?ke.createV0(s):ke.createV1(n.codec,s);return[o,t.subarray(n.size)]}static inspectBytes(t){let n=0;const r=()=>{const[r,e]=Me.decode(t.subarray(n));n+=e;return r};let e=r();let i=Fe;if(e===18){e=0;n=0}else if(e===1){i=r()}if(e!==0&&e!==1){throw new RangeError(`Invalid CID version ${e}`)}const s=n;const o=r();const a=r();const u=n+a;const c=u-s;return{version:e,codec:i,multihashCode:o,digestSize:a,multihashSize:c,size:u}}static parse(t,n){const[r,e]=Le(t,n);const i=ke.decode(e);i._baseCache.set(r,t);return i}}const Le=(t,n)=>{switch(t[0]){case"Q":{const r=n||Re.base58btc;return[Re.base58btc.prefix,r.decode(`${Re.base58btc.prefix}${t}`)]}case Re.base58btc.prefix:{const r=n||Re.base58btc;return[Re.base58btc.prefix,r.decode(t)]}case Ue.base32.prefix:{const r=n||Ue.base32;return[Ue.base32.prefix,r.decode(t)]}default:{if(n==null){throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided")}return[t[0],n.decode(t)]}}};const qe=(t,n,r)=>{const{prefix:e}=r;if(e!==Re.base58btc.prefix){throw Error(`Cannot string encode V0 in ${r.name} encoding`)}const i=n.get(e);if(i==null){const i=r.encode(t).slice(1);n.set(e,i);return i}else{return i}};const Ve=(t,n,r)=>{const{prefix:e}=r;const i=n.get(e);if(i==null){const i=r.encode(t);n.set(e,i);return i}else{return i}};const Fe=112;const Ge=18;const He=(t,n,r)=>{const e=Me.encodingLength(t);const i=e+Me.encodingLength(n);const s=new Uint8Array(i+r.byteLength);Me.encodeTo(t,s,0);Me.encodeTo(n,s,e);s.set(r,i);return s};const ze=Symbol.for("@ipld/js-cid/CID");const We={writable:false,configurable:false,enumerable:true};const Be={writable:false,enumerable:false,configurable:false};const Ke="0.0.0-dev";const Je=(t,n)=>{if(t.test(Ke)){console.warn(n)}else{throw new Error(n)}};const Ze=`CID.isCID(v) is deprecated and will be removed in the next major release.\nFollowing code pattern:\n\nif (CID.isCID(value)) {\n  doSomethingWithCID(value)\n}\n\nIs replaced with:\n\nconst cid = CID.asCID(value)\nif (cid) {\n  // Make sure to use cid instead of value\n  doSomethingWithCID(cid)\n}\n`;Te.CID=ke;Object.defineProperty($e,"__esModule",{value:true});var Qe=Te;var Ye=Er;var Xe=rn;var ti=gr;var ni=_r;$e.CID=Qe.CID;$e.varint=Ye;$e.bytes=Xe;$e.hasher=ti;$e.digest=ni;Object.defineProperty(Jt,"__esModule",{value:true});var ri=Zt;var ei=An;var ii=xn;var si=Mn;var oi=Un;var ai=qn;var ui=Qn;var ci=nr;var hi=sr;var fi=fr;var li=mr;var di=he;var vi=be;var pi=Se;var wi=Te;var yi=gr;var bi=_r;var mi=Er;var gi=rn;const _i={...ri,...ei,...ii,...si,...oi,...ai,...ui,...ci,...hi,...fi};const Ei={...li,...di};const Oi={raw:vi,json:pi};Jt.CID=wi.CID;Jt.hasher=yi;Jt.digest=bi;Jt.varint=mi;Jt.bytes=gi;Jt.bases=_i;Jt.codecs=Oi;Jt.hashes=Ei;var Si=Jt;var Ii=Dt;function ji(t,n,r,e){return{name:t,prefix:n,encoder:{name:t,prefix:n,encode:r},decoder:{decode:e}}}const Ai=ji("utf8","u",(t=>{const n=new TextDecoder("utf8");return"u"+n.decode(t)}),(t=>{const n=new TextEncoder;return n.encode(t.substring(1))}));const Ni=ji("ascii","a",(t=>{let n="a";for(let r=0;r<t.length;r++){n+=String.fromCharCode(t[r])}return n}),(t=>{t=t.substring(1);const n=Ii.allocUnsafe(t.length);for(let r=0;r<t.length;r++){n[r]=t.charCodeAt(r)}return n}));const Pi={utf8:Ai,"utf-8":Ai,hex:Si.bases.base16,latin1:Ni,ascii:Ni,binary:Ni,...Si.bases};var xi=Pi;Object.defineProperty(Kt,"__esModule",{value:true});var $i=xi;var Ti=kt;function Mi(t,n="utf8"){const r=$i[n];if(!r){throw new Error(`Unsupported encoding "${n}"`)}if((n==="utf8"||n==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null){return Ti.asUint8Array(globalThis.Buffer.from(t,"utf-8"))}return r.decoder.decode(`${r.prefix}${t}`)}Kt.fromString=Mi;var Ci={};Object.defineProperty(Ci,"__esModule",{value:true});var Ri=xi;function Ui(t,n="utf8"){const r=Ri[n];if(!r){throw new Error(`Unsupported encoding "${n}"`)}if((n==="utf8"||n==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null){return globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8")}return r.encoder.encode(t).substring(1)}Ci.toString=Ui;var Di={};Object.defineProperty(Di,"__esModule",{value:true});var ki=Dt;var Li=kt;function qi(t,n){if(t.length!==n.length){throw new Error("Inputs should have the same length")}const r=ki.allocUnsafe(t.length);for(let e=0;e<t.length;e++){r[e]=t[e]^n[e]}return Li.asUint8Array(r)}Di.xor=qi;Object.defineProperty(Mt,"__esModule",{value:true});var Vi=Ct;var Fi=Ut;var Gi=Wt;var Hi=Kt;var zi=Ci;var Wi=Di;Mt.compare=Vi.compare;var Bi=Mt.concat=Fi.concat;Mt.equals=Gi.equals;var Ki=Mt.fromString=Hi.fromString;var Ji=Mt.toString=zi.toString;Mt.xor=Wi.xor;var Zi=undefined&&undefined.__spreadArray||function(t,n,r){if(r||arguments.length===2)for(var e=0,i=n.length,s;e<i;e++){if(s||!(e in n)){if(!s)s=Array.prototype.slice.call(n,0,e);s[e]=n[e]}}return t.concat(s||Array.prototype.slice.call(n))};var Qi=function(){function t(t,n,r){this.name=t;this.version=n;this.os=r;this.type="browser"}return t}();var Yi=function(){function t(t){this.version=t;this.type="node";this.name="node";this.os=r.platform}return t}();var Xi=function(){function t(t,n,r,e){this.name=t;this.version=n;this.os=r;this.bot=e;this.type="bot-device"}return t}();var ts=function(){function t(){this.type="bot";this.bot=true;this.name="bot";this.version=null;this.os=null}return t}();var ns=function(){function t(){this.type="react-native";this.name="react-native";this.version=null;this.os=null}return t}();var rs=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/;var es=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/;var is=3;var ss=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",rs]];var os=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function as(t){if(!!t){return cs(t)}if(typeof document==="undefined"&&typeof navigator!=="undefined"&&navigator.product==="ReactNative"){return new ns}if(typeof navigator!=="undefined"){return cs(navigator.userAgent)}return fs()}function us(t){return t!==""&&ss.reduce((function(n,r){var e=r[0],i=r[1];if(n){return n}var s=i.exec(t);return!!s&&[e,s]}),false)}function cs(t){var n=us(t);if(!n){return null}var r=n[0],e=n[1];if(r==="searchbot"){return new ts}var i=e[1]&&e[1].split(".").join("_").split("_").slice(0,3);if(i){if(i.length<is){i=Zi(Zi([],i,true),ls(is-i.length),true)}}else{i=[]}var s=i.join(".");var o=hs(t);var a=es.exec(t);if(a&&a[1]){return new Xi(r,s,o,a[1])}return new Qi(r,s,o)}function hs(t){for(var n=0,r=os.length;n<r;n++){var e=os[n],i=e[0],s=e[1];var o=s.exec(t);if(o){return i}}return null}function fs(){var t=typeof r!=="undefined"&&r.version;return t?new Yi(r.version.slice(1)):null}function ls(t){var n=[];for(var r=0;r<t;r++){n.push("0")}return n}var ds={};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var vs=function(t,n){vs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)if(n.hasOwnProperty(r))t[r]=n[r]};return vs(t,n)};function ps(t,n){vs(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}var ws=function(){ws=Object.assign||function t(n){for(var r,e=1,i=arguments.length;e<i;e++){r=arguments[e];for(var s in r)if(Object.prototype.hasOwnProperty.call(r,s))n[s]=r[s]}return n};return ws.apply(this,arguments)};function ys(t,n){var r={};for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e)&&n.indexOf(e)<0)r[e]=t[e];if(t!=null&&typeof Object.getOwnPropertySymbols==="function")for(var i=0,e=Object.getOwnPropertySymbols(t);i<e.length;i++){if(n.indexOf(e[i])<0&&Object.prototype.propertyIsEnumerable.call(t,e[i]))r[e[i]]=t[e[i]]}return r}function bs(t,n,r,e){var i=arguments.length,s=i<3?n:e===null?e=Object.getOwnPropertyDescriptor(n,r):e,o;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")s=Reflect.decorate(t,n,r,e);else for(var a=t.length-1;a>=0;a--)if(o=t[a])s=(i<3?o(s):i>3?o(n,r,s):o(n,r))||s;return i>3&&s&&Object.defineProperty(n,r,s),s}function ms(t,n){return function(r,e){n(r,e,t)}}function gs(t,n){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(t,n)}function _s(t,n,r,e){function i(t){return t instanceof r?t:new r((function(n){n(t)}))}return new(r||(r=Promise))((function(r,s){function o(t){try{u(e.next(t))}catch(t){s(t)}}function a(t){try{u(e["throw"](t))}catch(t){s(t)}}function u(t){t.done?r(t.value):i(t.value).then(o,a)}u((e=e.apply(t,n||[])).next())}))}function Es(t,n){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},e,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol==="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(t){return function(n){return u([t,n])}}function u(o){if(e)throw new TypeError("Generator is already executing.");while(r)try{if(e=1,i&&(s=o[0]&2?i["return"]:o[0]?i["throw"]||((s=i["return"])&&s.call(i),0):i.next)&&!(s=s.call(i,o[1])).done)return s;if(i=0,s)o=[o[0]&2,s.value];switch(o[0]){case 0:case 1:s=o;break;case 4:r.label++;return{value:o[1],done:false};case 5:r.label++;i=o[1];o=[0];continue;case 7:o=r.ops.pop();r.trys.pop();continue;default:if(!(s=r.trys,s=s.length>0&&s[s.length-1])&&(o[0]===6||o[0]===2)){r=0;continue}if(o[0]===3&&(!s||o[1]>s[0]&&o[1]<s[3])){r.label=o[1];break}if(o[0]===6&&r.label<s[1]){r.label=s[1];s=o;break}if(s&&r.label<s[2]){r.label=s[2];r.ops.push(o);break}if(s[2])r.ops.pop();r.trys.pop();continue}o=n.call(t,r)}catch(t){o=[6,t];i=0}finally{e=s=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:true}}}function Os(t,n,r,e){if(e===undefined)e=r;t[e]=n[r]}function Ss(t,n){for(var r in t)if(r!=="default"&&!n.hasOwnProperty(r))n[r]=t[r]}function Is(t){var n=typeof Symbol==="function"&&Symbol.iterator,r=n&&t[n],e=0;if(r)return r.call(t);if(t&&typeof t.length==="number")return{next:function(){if(t&&e>=t.length)t=void 0;return{value:t&&t[e++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function js(t,n){var r=typeof Symbol==="function"&&t[Symbol.iterator];if(!r)return t;var e=r.call(t),i,s=[],o;try{while((n===void 0||n-- >0)&&!(i=e.next()).done)s.push(i.value)}catch(t){o={error:t}}finally{try{if(i&&!i.done&&(r=e["return"]))r.call(e)}finally{if(o)throw o.error}}return s}function As(){for(var t=[],n=0;n<arguments.length;n++)t=t.concat(js(arguments[n]));return t}function Ns(){for(var t=0,n=0,r=arguments.length;n<r;n++)t+=arguments[n].length;for(var e=Array(t),i=0,n=0;n<r;n++)for(var s=arguments[n],o=0,a=s.length;o<a;o++,i++)e[i]=s[o];return e}function Ps(t){return this instanceof Ps?(this.v=t,this):new Ps(t)}function xs(t,n,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r.apply(t,n||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(t){if(e[t])i[t]=function(n){return new Promise((function(r,e){s.push([t,n,r,e])>1||a(t,n)}))}}function a(t,n){try{u(e[t](n))}catch(t){f(s[0][3],t)}}function u(t){t.value instanceof Ps?Promise.resolve(t.value.v).then(c,h):f(s[0][2],t)}function c(t){a("next",t)}function h(t){a("throw",t)}function f(t,n){if(t(n),s.shift(),s.length)a(s[0][0],s[0][1])}}function $s(t){var n,r;return n={},e("next"),e("throw",(function(t){throw t})),e("return"),n[Symbol.iterator]=function(){return this},n;function e(e,i){n[e]=t[e]?function(n){return(r=!r)?{value:Ps(t[e](n)),done:e==="return"}:i?i(n):n}:i}}function Ts(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t[Symbol.asyncIterator],r;return n?n.call(t):(t=typeof Is==="function"?Is(t):t[Symbol.iterator](),r={},e("next"),e("throw"),e("return"),r[Symbol.asyncIterator]=function(){return this},r);function e(n){r[n]=t[n]&&function(r){return new Promise((function(e,s){r=t[n](r),i(e,s,r.done,r.value)}))}}function i(t,n,r,e){Promise.resolve(e).then((function(n){t({value:n,done:r})}),n)}}function Ms(t,n){if(Object.defineProperty){Object.defineProperty(t,"raw",{value:n})}else{t.raw=n}return t}function Cs(t){if(t&&t.__esModule)return t;var n={};if(t!=null)for(var r in t)if(Object.hasOwnProperty.call(t,r))n[r]=t[r];n.default=t;return n}function Rs(t){return t&&t.__esModule?t:{default:t}}function Us(t,n){if(!n.has(t)){throw new TypeError("attempted to get private field on non-instance")}return n.get(t)}function Ds(t,n,r){if(!n.has(t)){throw new TypeError("attempted to set private field on non-instance")}n.set(t,r);return r}const ks=Object.freeze({__proto__:null,__extends:ps,get __assign(){return ws},__rest:ys,__decorate:bs,__param:ms,__metadata:gs,__awaiter:_s,__generator:Es,__createBinding:Os,__exportStar:Ss,__values:Is,__read:js,__spread:As,__spreadArrays:Ns,__await:Ps,__asyncGenerator:xs,__asyncDelegator:$s,__asyncValues:Ts,__makeTemplateObject:Ms,__importStar:Cs,__importDefault:Rs,__classPrivateFieldGet:Us,__classPrivateFieldSet:Ds});const Ls=e(ks);var qs={};var Vs={};Object.defineProperty(Vs,"__esModule",{value:true});Vs.delay=void 0;function Fs(t){return new Promise((n=>{setTimeout((()=>{n(true)}),t)}))}Vs.delay=Fs;var Gs={};var Hs={};var zs={};Object.defineProperty(zs,"__esModule",{value:true});zs.ONE_THOUSAND=zs.ONE_HUNDRED=void 0;zs.ONE_HUNDRED=100;zs.ONE_THOUSAND=1e3;var Ws={};(function(t){Object.defineProperty(t,"__esModule",{value:true});t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0;t.ONE_SECOND=1;t.FIVE_SECONDS=5;t.TEN_SECONDS=10;t.THIRTY_SECONDS=30;t.SIXTY_SECONDS=60;t.ONE_MINUTE=t.SIXTY_SECONDS;t.FIVE_MINUTES=t.ONE_MINUTE*5;t.TEN_MINUTES=t.ONE_MINUTE*10;t.THIRTY_MINUTES=t.ONE_MINUTE*30;t.SIXTY_MINUTES=t.ONE_MINUTE*60;t.ONE_HOUR=t.SIXTY_MINUTES;t.THREE_HOURS=t.ONE_HOUR*3;t.SIX_HOURS=t.ONE_HOUR*6;t.TWELVE_HOURS=t.ONE_HOUR*12;t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24;t.ONE_DAY=t.TWENTY_FOUR_HOURS;t.THREE_DAYS=t.ONE_DAY*3;t.FIVE_DAYS=t.ONE_DAY*5;t.SEVEN_DAYS=t.ONE_DAY*7;t.THIRTY_DAYS=t.ONE_DAY*30;t.ONE_WEEK=t.SEVEN_DAYS;t.TWO_WEEKS=t.ONE_WEEK*2;t.THREE_WEEKS=t.ONE_WEEK*3;t.FOUR_WEEKS=t.ONE_WEEK*4;t.ONE_YEAR=t.ONE_DAY*365})(Ws);(function(t){Object.defineProperty(t,"__esModule",{value:true});const n=Ls;n.__exportStar(zs,t);n.__exportStar(Ws,t)})(Hs);Object.defineProperty(Gs,"__esModule",{value:true});Gs.fromMiliseconds=Gs.toMiliseconds=void 0;const Bs=Hs;function Ks(t){return t*Bs.ONE_THOUSAND}Gs.toMiliseconds=Ks;function Js(t){return Math.floor(t/Bs.ONE_THOUSAND)}Gs.fromMiliseconds=Js;(function(t){Object.defineProperty(t,"__esModule",{value:true});const n=Ls;n.__exportStar(Vs,t);n.__exportStar(Gs,t)})(qs);var Zs={};Object.defineProperty(Zs,"__esModule",{value:true});Zs.Watch=void 0;class Qs{constructor(){this.timestamps=new Map}start(t){if(this.timestamps.has(t)){throw new Error(`Watch already started for label: ${t}`)}this.timestamps.set(t,{started:Date.now()})}stop(t){const n=this.get(t);if(typeof n.elapsed!=="undefined"){throw new Error(`Watch already stopped for label: ${t}`)}const r=Date.now()-n.started;this.timestamps.set(t,{started:n.started,elapsed:r})}get(t){const n=this.timestamps.get(t);if(typeof n==="undefined"){throw new Error(`No timestamp found for label: ${t}`)}return n}elapsed(t){const n=this.get(t);const r=n.elapsed||Date.now()-n.started;return r}}Zs.Watch=Qs;Zs.default=Qs;var Ys={};var Xs={};Object.defineProperty(Xs,"__esModule",{value:true});Xs.IWatch=void 0;class to{}Xs.IWatch=to;(function(t){Object.defineProperty(t,"__esModule",{value:true});const n=Ls;n.__exportStar(Xs,t)})(Ys);(function(t){Object.defineProperty(t,"__esModule",{value:true});const n=Ls;n.__exportStar(qs,t);n.__exportStar(Zs,t);n.__exportStar(Ys,t);n.__exportStar(Hs,t)})(ds);var no={};Object.defineProperty(no,"__esModule",{value:true});no.getLocalStorage=no.getLocalStorageOrThrow=no.getCrypto=no.getCryptoOrThrow=lo=no.getLocation=no.getLocationOrThrow=co=no.getNavigator=no.getNavigatorOrThrow=oo=no.getDocument=no.getDocumentOrThrow=no.getFromWindowOrThrow=no.getFromWindow=void 0;function ro(t){let n=undefined;if(typeof window!=="undefined"&&typeof window[t]!=="undefined"){n=window[t]}return n}no.getFromWindow=ro;function eo(t){const n=ro(t);if(!n){throw new Error(`${t} is not defined in Window`)}return n}no.getFromWindowOrThrow=eo;function io(){return eo("document")}no.getDocumentOrThrow=io;function so(){return ro("document")}var oo=no.getDocument=so;function ao(){return eo("navigator")}no.getNavigatorOrThrow=ao;function uo(){return ro("navigator")}var co=no.getNavigator=uo;function ho(){return eo("location")}no.getLocationOrThrow=ho;function fo(){return ro("location")}var lo=no.getLocation=fo;function vo(){return eo("crypto")}no.getCryptoOrThrow=vo;function po(){return ro("crypto")}no.getCrypto=po;function wo(){return eo("localStorage")}no.getLocalStorageOrThrow=wo;function yo(){return ro("localStorage")}no.getLocalStorage=yo;var bo={};Object.defineProperty(bo,"__esModule",{value:true});var mo=bo.getWindowMetadata=void 0;const go=no;function _o(){let t;let n;try{t=go.getDocumentOrThrow();n=go.getLocationOrThrow()}catch(t){return null}function r(){const r=t.getElementsByTagName("link");const e=[];for(let t=0;t<r.length;t++){const i=r[t];const s=i.getAttribute("rel");if(s){if(s.toLowerCase().indexOf("icon")>-1){const t=i.getAttribute("href");if(t){if(t.toLowerCase().indexOf("https:")===-1&&t.toLowerCase().indexOf("http:")===-1&&t.indexOf("//")!==0){let r=n.protocol+"//"+n.host;if(t.indexOf("/")===0){r+=t}else{const e=n.pathname.split("/");e.pop();const i=e.join("/");r+=i+"/"+t}e.push(r)}else if(t.indexOf("//")===0){const r=n.protocol+t;e.push(r)}else{e.push(t)}}}}}return e}function e(...n){const r=t.getElementsByTagName("meta");for(let t=0;t<r.length;t++){const e=r[t];const i=["itemprop","property","name"].map((t=>e.getAttribute(t))).filter((t=>{if(t){return n.includes(t)}return false}));if(i.length&&i){const t=e.getAttribute("content");if(t){return t}}}return""}function i(){let n=e("name","og:site_name","og:title","twitter:title");if(!n){n=t.title}return n}function s(){const t=e("description","og:description","twitter:description","keywords");return t}const o=i();const a=s();const u=n.origin;const c=r();const h={description:a,url:u,icons:c,name:o};return h}mo=bo.getWindowMetadata=_o;var Eo={};var Oo=t=>encodeURIComponent(t).replace(/[!'()*]/g,(t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`));var So="%[a-f0-9]{2}";var Io=new RegExp("("+So+")|([^%]+?)","gi");var jo=new RegExp("("+So+")+","gi");function Ao(t,n){try{return[decodeURIComponent(t.join(""))]}catch(t){}if(t.length===1){return t}n=n||1;var r=t.slice(0,n);var e=t.slice(n);return Array.prototype.concat.call([],Ao(r),Ao(e))}function No(t){try{return decodeURIComponent(t)}catch(e){var n=t.match(Io)||[];for(var r=1;r<n.length;r++){t=Ao(n,r).join("");n=t.match(Io)||[]}return t}}function Po(t){var n={"%FE%FF":"ï¿½ï¿½","%FF%FE":"ï¿½ï¿½"};var r=jo.exec(t);while(r){try{n[r[0]]=decodeURIComponent(r[0])}catch(t){var e=No(r[0]);if(e!==r[0]){n[r[0]]=e}}r=jo.exec(t)}n["%C2"]="ï¿½";var i=Object.keys(n);for(var s=0;s<i.length;s++){var o=i[s];t=t.replace(new RegExp(o,"g"),n[o])}return t}var xo=function(t){if(typeof t!=="string"){throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`")}try{t=t.replace(/\+/g," ");return decodeURIComponent(t)}catch(n){return Po(t)}};var $o=(t,n)=>{if(!(typeof t==="string"&&typeof n==="string")){throw new TypeError("Expected the arguments to be of type `string`")}if(n===""){return[t]}const r=t.indexOf(n);if(r===-1){return[t]}return[t.slice(0,r),t.slice(r+n.length)]};var To=function(t,n){var r={};var e=Object.keys(t);var i=Array.isArray(n);for(var s=0;s<e.length;s++){var o=e[s];var a=t[o];if(i?n.indexOf(o)!==-1:n(o,a,t)){r[o]=a}}return r};(function(t){const n=Oo;const r=xo;const e=$o;const i=To;const s=t=>t===null||t===undefined;const o=Symbol("encodeFragmentIdentifier");function a(t){switch(t.arrayFormat){case"index":return n=>(r,e)=>{const i=r.length;if(e===undefined||t.skipNull&&e===null||t.skipEmptyString&&e===""){return r}if(e===null){return[...r,[h(n,t),"[",i,"]"].join("")]}return[...r,[h(n,t),"[",h(i,t),"]=",h(e,t)].join("")]};case"bracket":return n=>(r,e)=>{if(e===undefined||t.skipNull&&e===null||t.skipEmptyString&&e===""){return r}if(e===null){return[...r,[h(n,t),"[]"].join("")]}return[...r,[h(n,t),"[]=",h(e,t)].join("")]};case"colon-list-separator":return n=>(r,e)=>{if(e===undefined||t.skipNull&&e===null||t.skipEmptyString&&e===""){return r}if(e===null){return[...r,[h(n,t),":list="].join("")]}return[...r,[h(n,t),":list=",h(e,t)].join("")]};case"comma":case"separator":case"bracket-separator":{const n=t.arrayFormat==="bracket-separator"?"[]=":"=";return r=>(e,i)=>{if(i===undefined||t.skipNull&&i===null||t.skipEmptyString&&i===""){return e}i=i===null?"":i;if(e.length===0){return[[h(r,t),n,h(i,t)].join("")]}return[[e,h(i,t)].join(t.arrayFormatSeparator)]}}default:return n=>(r,e)=>{if(e===undefined||t.skipNull&&e===null||t.skipEmptyString&&e===""){return r}if(e===null){return[...r,h(n,t)]}return[...r,[h(n,t),"=",h(e,t)].join("")]}}}function u(t){let n;switch(t.arrayFormat){case"index":return(t,r,e)=>{n=/\[(\d*)\]$/.exec(t);t=t.replace(/\[\d*\]$/,"");if(!n){e[t]=r;return}if(e[t]===undefined){e[t]={}}e[t][n[1]]=r};case"bracket":return(t,r,e)=>{n=/(\[\])$/.exec(t);t=t.replace(/\[\]$/,"");if(!n){e[t]=r;return}if(e[t]===undefined){e[t]=[r];return}e[t]=[].concat(e[t],r)};case"colon-list-separator":return(t,r,e)=>{n=/(:list)$/.exec(t);t=t.replace(/:list$/,"");if(!n){e[t]=r;return}if(e[t]===undefined){e[t]=[r];return}e[t]=[].concat(e[t],r)};case"comma":case"separator":return(n,r,e)=>{const i=typeof r==="string"&&r.includes(t.arrayFormatSeparator);const s=typeof r==="string"&&!i&&f(r,t).includes(t.arrayFormatSeparator);r=s?f(r,t):r;const o=i||s?r.split(t.arrayFormatSeparator).map((n=>f(n,t))):r===null?r:f(r,t);e[n]=o};case"bracket-separator":return(n,r,e)=>{const i=/(\[\])$/.test(n);n=n.replace(/\[\]$/,"");if(!i){e[n]=r?f(r,t):r;return}const s=r===null?[]:r.split(t.arrayFormatSeparator).map((n=>f(n,t)));if(e[n]===undefined){e[n]=s;return}e[n]=[].concat(e[n],s)};default:return(t,n,r)=>{if(r[t]===undefined){r[t]=n;return}r[t]=[].concat(r[t],n)}}}function c(t){if(typeof t!=="string"||t.length!==1){throw new TypeError("arrayFormatSeparator must be single character string")}}function h(t,r){if(r.encode){return r.strict?n(t):encodeURIComponent(t)}return t}function f(t,n){if(n.decode){return r(t)}return t}function l(t){if(Array.isArray(t)){return t.sort()}if(typeof t==="object"){return l(Object.keys(t)).sort(((t,n)=>Number(t)-Number(n))).map((n=>t[n]))}return t}function d(t){const n=t.indexOf("#");if(n!==-1){t=t.slice(0,n)}return t}function v(t){let n="";const r=t.indexOf("#");if(r!==-1){n=t.slice(r)}return n}function p(t){t=d(t);const n=t.indexOf("?");if(n===-1){return""}return t.slice(n+1)}function w(t,n){if(n.parseNumbers&&!Number.isNaN(Number(t))&&(typeof t==="string"&&t.trim()!=="")){t=Number(t)}else if(n.parseBooleans&&t!==null&&(t.toLowerCase()==="true"||t.toLowerCase()==="false")){t=t.toLowerCase()==="true"}return t}function y(t,n){n=Object.assign({decode:true,sort:true,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:false,parseBooleans:false},n);c(n.arrayFormatSeparator);const r=u(n);const i=Object.create(null);if(typeof t!=="string"){return i}t=t.trim().replace(/^[?#&]/,"");if(!t){return i}for(const s of t.split("&")){if(s===""){continue}let[t,o]=e(n.decode?s.replace(/\+/g," "):s,"=");o=o===undefined?null:["comma","separator","bracket-separator"].includes(n.arrayFormat)?o:f(o,n);r(f(t,n),o,i)}for(const t of Object.keys(i)){const r=i[t];if(typeof r==="object"&&r!==null){for(const t of Object.keys(r)){r[t]=w(r[t],n)}}else{i[t]=w(r,n)}}if(n.sort===false){return i}return(n.sort===true?Object.keys(i).sort():Object.keys(i).sort(n.sort)).reduce(((t,n)=>{const r=i[n];if(Boolean(r)&&typeof r==="object"&&!Array.isArray(r)){t[n]=l(r)}else{t[n]=r}return t}),Object.create(null))}t.extract=p;t.parse=y;t.stringify=(t,n)=>{if(!t){return""}n=Object.assign({encode:true,strict:true,arrayFormat:"none",arrayFormatSeparator:","},n);c(n.arrayFormatSeparator);const r=r=>n.skipNull&&s(t[r])||n.skipEmptyString&&t[r]==="";const e=a(n);const i={};for(const n of Object.keys(t)){if(!r(n)){i[n]=t[n]}}const o=Object.keys(i);if(n.sort!==false){o.sort(n.sort)}return o.map((r=>{const i=t[r];if(i===undefined){return""}if(i===null){return h(r,n)}if(Array.isArray(i)){if(i.length===0&&n.arrayFormat==="bracket-separator"){return h(r,n)+"[]"}return i.reduce(e(r),[]).join("&")}return h(r,n)+"="+h(i,n)})).filter((t=>t.length>0)).join("&")};t.parseUrl=(t,n)=>{n=Object.assign({decode:true},n);const[r,i]=e(t,"#");return Object.assign({url:r.split("?")[0]||"",query:y(p(t),n)},n&&n.parseFragmentIdentifier&&i?{fragmentIdentifier:f(i,n)}:{})};t.stringifyUrl=(n,r)=>{r=Object.assign({encode:true,strict:true,[o]:true},r);const e=d(n.url).split("?")[0]||"";const i=t.extract(n.url);const s=t.parse(i,{sort:false});const a=Object.assign(s,n.query);let u=t.stringify(a,r);if(u){u=`?${u}`}let c=v(n.url);if(n.fragmentIdentifier){c=`#${r[o]?h(n.fragmentIdentifier,r):n.fragmentIdentifier}`}return`${e}${u}${c}`};t.pick=(n,r,e)=>{e=Object.assign({parseFragmentIdentifier:true,[o]:false},e);const{url:s,query:a,fragmentIdentifier:u}=t.parseUrl(n,e);return t.stringifyUrl({url:s,query:i(a,r),fragmentIdentifier:u},e)};t.exclude=(n,r,e)=>{const i=Array.isArray(r)?t=>!r.includes(t):(t,n)=>!r(t,n);return t.pick(n,i,e)}})(Eo);const Mo={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}};const Co=":";function Ro(t){const[n,r]=t.split(Co);return{namespace:n,reference:r}}function Uo(t,n=[]){const r=[];return Object.keys(t).forEach((e=>{if(n.length&&!n.includes(e))return;const i=t[e];r.push(...i.accounts)})),r}function Do(t,n){return t.includes(":")?[t]:n.chains||[]}const ko="base10",Lo="base16",qo="base64pad",Vo="utf8",Fo=0,Go=1,Ho=0,zo=1,Wo=12,Bo=32;function Ko(){const t=Tt.generateKeyPair();return{privateKey:Ji(t.secretKey,Lo),publicKey:Ji(t.publicKey,Lo)}}function Jo(){const t=yt.randomBytes(Bo);return Ji(t,Lo)}function Zo(t,n){const r=Tt.sharedKey(Ki(t,Lo),Ki(n,Lo),!0),e=new wt($t.SHA256,r).expand(Bo);return Ji(e,Lo)}function Qo(t){const n=$t.hash(Ki(t,Lo));return Ji(n,Lo)}function Yo(t){const n=$t.hash(Ki(t,Vo));return Ji(n,Lo)}function Xo(t){return Ki(`${t}`,ko)}function ta(t){return Number(Ji(t,ko))}function na(t){const n=Xo(typeof t.type<"u"?t.type:Fo);if(ta(n)===Go&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof t.senderPublicKey<"u"?Ki(t.senderPublicKey,Lo):void 0,e=typeof t.iv<"u"?Ki(t.iv,Lo):yt.randomBytes(Wo),i=new u.ChaCha20Poly1305(Ki(t.symKey,Lo)).seal(e,Ki(t.message,Vo));return ea({type:n,sealed:i,iv:e,senderPublicKey:r})}function ra(t){const n=new u.ChaCha20Poly1305(Ki(t.symKey,Lo)),{sealed:r,iv:e}=ia(t.encoded),i=n.open(e,r);if(i===null)throw new Error("Failed to decrypt");return Ji(i,Vo)}function ea(t){if(ta(t.type)===Go){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return Ji(Bi([t.type,t.senderPublicKey,t.iv,t.sealed]),qo)}return Ji(Bi([t.type,t.iv,t.sealed]),qo)}function ia(t){const n=Ki(t,qo),r=n.slice(Ho,zo),e=zo;if(ta(r)===Go){const t=e+Bo,i=t+Wo,s=n.slice(e,t),o=n.slice(t,i),a=n.slice(i);return{type:r,sealed:a,iv:o,senderPublicKey:s}}const i=e+Wo,s=n.slice(e,i),o=n.slice(i);return{type:r,sealed:o,iv:s}}function sa(t,n){const r=ia(t);return oa({type:ta(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?Ji(r.senderPublicKey,Lo):void 0,receiverPublicKey:n?.receiverPublicKey})}function oa(t){const n=t?.type||Fo;if(n===Go){if(typeof t?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof t?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:n,senderPublicKey:t?.senderPublicKey,receiverPublicKey:t?.receiverPublicKey}}function aa(t){return t.type===Go&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}var ua=Object.defineProperty,ca=Object.getOwnPropertySymbols,ha=Object.prototype.hasOwnProperty,fa=Object.prototype.propertyIsEnumerable,la=(t,n,r)=>n in t?ua(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,da=(t,n)=>{for(var r in n||(n={}))ha.call(n,r)&&la(t,r,n[r]);if(ca)for(var r of ca(n))fa.call(n,r)&&la(t,r,n[r]);return t};const va="ReactNative",pa={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},wa="js";function ya(){return typeof r<"u"&&typeof r.versions<"u"&&typeof r.versions.node<"u"}function ba(){return!oo()&&!!co()&&navigator.product===va}function ma(){return!ya()&&!!co()}function ga(){return ba()?pa.reactNative:ya()?pa.node:ma()?pa.browser:pa.unknown}function _a(t,n){let r=Eo.parse(t);return r=da(da({},r),n),t=Eo.stringify(r),t}function Ea(){return mo()||{name:"",description:"",url:"",icons:[""]}}function Oa(){if(ga()===pa.reactNative&&typeof s<"u"&&typeof(s==null?void 0:s.Platform)<"u"){const{OS:t,Version:n}=s.Platform;return[t,n].join("-")}const t=as();if(t===null)return"unknown";const n=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[n,t.name,t.version].join("-"):[n,t.version].join("-")}function Sa(){var t;const n=ga();return n===pa.browser?[n,((t=lo())==null?void 0:t.host)||"unknown"].join(":"):n}function Ia(t,n,r){const e=Oa(),i=Sa();return[[t,n].join("-"),[wa,r].join("-"),e,i].join("/")}function ja({protocol:t,version:n,relayUrl:r,sdkVersion:e,auth:i,projectId:s,useOnCloseEvent:o}){const a=r.split("?"),u=Ia(t,n,e),c={auth:i,ua:u,projectId:s,useOnCloseEvent:o||void 0},h=_a(a[1]||"",c);return a[0]+"?"+h}function Aa(t,n){return t.filter((t=>n.includes(t))).length===t.length}function Na(t){return Object.fromEntries(t.entries())}function Pa(t){return new Map(Object.entries(t))}function xa(t=ds.FIVE_MINUTES,n){const r=ds.toMiliseconds(t||ds.FIVE_MINUTES);let e,i,s;return{resolve:t=>{s&&e&&(clearTimeout(s),e(t))},reject:t=>{s&&i&&(clearTimeout(s),i(t))},done:()=>new Promise(((t,o)=>{s=setTimeout((()=>{o(new Error(n))}),r),e=t,i=o}))}}function $a(t,n,r){return new Promise((async(e,i)=>{const s=setTimeout((()=>i(new Error(r))),n);try{const n=await t;e(n)}catch(t){i(t)}clearTimeout(s)}))}function Ta(t,n){if(typeof n=="string"&&n.startsWith(`${t}:`))return n;if(t.toLowerCase()==="topic"){if(typeof n!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${n}`}else if(t.toLowerCase()==="id"){if(typeof n!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${n}`}throw new Error(`Unknown expirer target type: ${t}`)}function Ma(t){return Ta("topic",t)}function Ca(t){return Ta("id",t)}function Ra(t){const[n,r]=t.split(":"),e={id:void 0,topic:void 0};if(n==="topic"&&typeof r=="string")e.topic=r;else if(n==="id"&&Number.isInteger(Number(r)))e.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${n}:${r}`);return e}function Ua(t,n){return ds.fromMiliseconds((n||Date.now())+ds.toMiliseconds(t))}function Da(t){return Date.now()>=ds.toMiliseconds(t)}function ka(t,n){return`${t}${n?`:${n}`:""}`}function La(t=[],n=[]){return[...new Set([...t,...n])]}async function qa({id:t,topic:n,wcDeepLink:r}){try{if(!r)return;const e=typeof r=="string"?JSON.parse(r):r;let i=e?.href;if(typeof i!="string")return;i.endsWith("/")&&(i=i.slice(0,-1));const o=`${i}/wc?requestId=${t}&sessionTopic=${n}`,a=ga();a===pa.browser?o.startsWith("https://")?window.open(o,"_blank","noreferrer noopener"):window.open(o,"_self","noreferrer noopener"):a===pa.reactNative&&typeof(s==null?void 0:s.Linking)<"u"&&await s.Linking.openURL(o)}catch(t){console.error(t)}}const Va="irn";function Fa(t){return t?.relay||{protocol:Va}}function Ga(t){const n=Mo[t];if(typeof n>"u")throw new Error(`Relay Protocol not supported: ${t}`);return n}var Ha=Object.defineProperty,za=Object.getOwnPropertySymbols,Wa=Object.prototype.hasOwnProperty,Ba=Object.prototype.propertyIsEnumerable,Ka=(t,n,r)=>n in t?Ha(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,Ja=(t,n)=>{for(var r in n||(n={}))Wa.call(n,r)&&Ka(t,r,n[r]);if(za)for(var r of za(n))Ba.call(n,r)&&Ka(t,r,n[r]);return t};function Za(t,n="-"){const r={},e="relay"+n;return Object.keys(t).forEach((n=>{if(n.startsWith(e)){const i=n.replace(e,""),s=t[n];r[i]=s}})),r}function Qa(t){const n=t.indexOf(":"),r=t.indexOf("?")!==-1?t.indexOf("?"):void 0,e=t.substring(0,n),i=t.substring(n+1,r).split("@"),s=typeof r<"u"?t.substring(r):"",o=Eo.parse(s);return{protocol:e,topic:Ya(i[0]),version:parseInt(i[1],10),symKey:o.symKey,relay:Za(o)}}function Ya(t){return t.startsWith("//")?t.substring(2):t}function Xa(t,n="-"){const r="relay",e={};return Object.keys(t).forEach((i=>{const s=r+n+i;t[i]&&(e[s]=t[i])})),e}function tu(t){return`${t.protocol}:${t.topic}@${t.version}?`+Eo.stringify(Ja({symKey:t.symKey},Xa(t.relay)))}function nu(t){const n=[];return t.forEach((t=>{const[r,e]=t.split(":");n.push(`${r}:${e}`)})),n}function ru(t){const n=[];return Object.values(t).forEach((t=>{n.push(...nu(t.accounts))})),n}function eu(t,n){const r=[];return Object.values(t).forEach((t=>{nu(t.accounts).includes(n)&&r.push(...t.methods)})),r}function iu(t,n){const r=[];return Object.values(t).forEach((t=>{nu(t.accounts).includes(n)&&r.push(...t.events)})),r}function su(t,n){const r=Tu(t,n);if(r)throw new Error(r.message);const e={};for(const[n,r]of Object.entries(t))e[n]={methods:r.methods,events:r.events,chains:r.accounts.map((t=>`${t.split(":")[0]}:${t.split(":")[1]}`))};return e}function ou(t){return t.includes(":")}function au(t){return ou(t)?t.split(":")[0]:t}const uu={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},cu={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function hu(t,n){const{message:r,code:e}=cu[t];return{message:n?`${r} ${n}`:r,code:e}}function fu(t,n){const{message:r,code:e}=uu[t];return{message:n?`${r} ${n}`:r,code:e}}function lu(t,n){return Array.isArray(t)?typeof n<"u"&&t.length?t.every(n):!0:!1}function du(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function vu(t){return typeof t>"u"}function pu(t,n){return n&&vu(t)?!0:typeof t=="string"&&!!t.trim().length}function wu(t,n){return n&&vu(t)?!0:typeof t=="number"&&!isNaN(t)}function yu(t,n){const{requiredNamespaces:r}=n,e=Object.keys(t.namespaces),i=Object.keys(r);let s=!0;return Aa(i,e)?(e.forEach((n=>{const{accounts:e,methods:i,events:o}=t.namespaces[n],a=nu(e),u=r[n];(!Aa(Do(n,u),a)||!Aa(u.methods,i)||!Aa(u.events,o))&&(s=!1)})),s):!1}function bu(t){return pu(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function mu(t){if(pu(t,!1)&&t.includes(":")){const n=t.split(":");if(n.length===3){const t=n[0]+":"+n[1];return!!n[2]&&bu(t)}}return!1}function gu(t){if(pu(t,!1))try{return typeof new URL(t)<"u"}catch{return!1}return!1}function _u(t){var n;return(n=t?.proposer)==null?void 0:n.publicKey}function Eu(t){return t?.topic}function Ou(t,n){let r=null;return pu(t?.publicKey,!1)||(r=hu("MISSING_OR_INVALID",`${n} controller public key should be a string`)),r}function Su(t){let n=!0;return lu(t)?t.length&&(n=t.every((t=>pu(t,!1)))):n=!1,n}function Iu(t,n,r){let e=null;return lu(n)&&n.length?n.forEach((t=>{e||bu(t)||(e=fu("UNSUPPORTED_CHAINS",`${r}, chain ${t} should be a string and conform to "namespace:chainId" format`))})):bu(t)||(e=fu("UNSUPPORTED_CHAINS",`${r}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),e}function ju(t,n,r){let e=null;return Object.entries(t).forEach((([t,i])=>{if(e)return;const s=Iu(t,Do(t,i),`${n} ${r}`);s&&(e=s)})),e}function Au(t,n){let r=null;return lu(t)?t.forEach((t=>{r||mu(t)||(r=fu("UNSUPPORTED_ACCOUNTS",`${n}, account ${t} should be a string and conform to "namespace:chainId:address" format`))})):r=fu("UNSUPPORTED_ACCOUNTS",`${n}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function Nu(t,n){let r=null;return Object.values(t).forEach((t=>{if(r)return;const e=Au(t?.accounts,`${n} namespace`);e&&(r=e)})),r}function Pu(t,n){let r=null;return Su(t?.methods)?Su(t?.events)||(r=fu("UNSUPPORTED_EVENTS",`${n}, events should be an array of strings or empty array for no events`)):r=fu("UNSUPPORTED_METHODS",`${n}, methods should be an array of strings or empty array for no methods`),r}function xu(t,n){let r=null;return Object.values(t).forEach((t=>{if(r)return;const e=Pu(t,`${n}, namespace`);e&&(r=e)})),r}function $u(t,n,r){let e=null;if(t&&du(t)){const i=xu(t,n);i&&(e=i);const s=ju(t,n,r);s&&(e=s)}else e=hu("MISSING_OR_INVALID",`${n}, ${r} should be an object with data`);return e}function Tu(t,n){let r=null;if(t&&du(t)){const e=xu(t,n);e&&(r=e);const i=Nu(t,n);i&&(r=i)}else r=hu("MISSING_OR_INVALID",`${n}, namespaces should be an object with data`);return r}function Mu(t){return pu(t.protocol,!0)}function Cu(t,n){let r=!1;return n&&!t?r=!0:t&&lu(t)&&t.length&&t.forEach((t=>{r=Mu(t)})),r}function Ru(t){return typeof t=="number"}function Uu(t){return typeof t<"u"&&typeof t!==null}function Du(t){return!(!t||typeof t!="object"||!t.code||!wu(t.code,!1)||!t.message||!pu(t.message,!1))}function ku(t){return!(vu(t)||!pu(t.method,!1))}function Lu(t){return!(vu(t)||vu(t.result)&&vu(t.error)||!wu(t.id,!1)||!pu(t.jsonrpc,!1))}function qu(t){return!(vu(t)||!pu(t.name,!1))}function Vu(t,n){return!(!bu(n)||!ru(t).includes(n))}function Fu(t,n,r){return pu(r,!1)?eu(t,n).includes(r):!1}function Gu(t,n,r){return pu(r,!1)?iu(t,n).includes(r):!1}function Hu(t,n,r){let e=null;const i=zu(t),s=Bu(n),o=Object.keys(i),a=Object.keys(s),u=Wu(Object.keys(t)),c=Wu(Object.keys(n)),h=u.filter((t=>!c.includes(t)));return h.length&&(e=hu("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.\n      Required: ${h.toString()}\n      Received: ${Object.keys(n).toString()}`)),Aa(o,a)||(e=hu("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.\n      Required: ${o.toString()}\n      Approved: ${a.toString()}`)),Object.keys(n).forEach((t=>{if(!t.includes(":")||e)return;const i=nu(n[t].accounts);i.includes(t)||(e=hu("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${t}\n        Required: ${t}\n        Approved: ${i.toString()}`))})),o.forEach((t=>{e||(Aa(i[t].methods,s[t].methods)?Aa(i[t].events,s[t].events)||(e=hu("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${t}`)):e=hu("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${t}`))})),e}function zu(t){const n={};return Object.keys(t).forEach((r=>{var e;r.includes(":")?n[r]=t[r]:(e=t[r].chains)==null||e.forEach((e=>{n[e]={methods:t[r].methods,events:t[r].events}}))})),n}function Wu(t){return[...new Set(t.map((t=>t.includes(":")?t.split(":")[0]:t)))]}function Bu(t){const n={};return Object.keys(t).forEach((r=>{if(r.includes(":"))n[r]=t[r];else{const e=nu(t[r].accounts);e?.forEach((e=>{n[e]={accounts:t[r].accounts.filter((t=>t.includes(`${e}:`))),methods:t[r].methods,events:t[r].events}}))}})),n}function Ku(t,n){return wu(t,!1)&&t<=n.max&&t>=n.min}function Ju(){const t=ga();return new Promise((n=>{switch(t){case pa.browser:n(Zu());break;case pa.reactNative:n(Qu());break;case pa.node:n(Yu());break;default:n(!0)}}))}function Zu(){return ma()&&navigator?.onLine}async function Qu(){if(ba()&&typeof s<"u"&&s!=null&&s.NetInfo){const t=await(s==null?void 0:s.NetInfo.fetch());return t?.isConnected}return!0}function Yu(){return!0}function Xu(t){switch(ga()){case pa.browser:tc(t);break;case pa.reactNative:nc(t);break}}function tc(t){!ba()&&ma()&&(window.addEventListener("online",(()=>t(!0))),window.addEventListener("offline",(()=>t(!1))))}function nc(t){ba()&&typeof s<"u"&&s!=null&&s.NetInfo&&s?.NetInfo.addEventListener((n=>t(n?.isConnected)))}const rc={};class ec{static get(t){return rc[t]}static set(t,n){rc[t]=n}static delete(t){delete rc[t]}}var ic={};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var sc=function(t,n){sc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)if(n.hasOwnProperty(r))t[r]=n[r]};return sc(t,n)};function oc(t,n){sc(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}var ac=function(){ac=Object.assign||function t(n){for(var r,e=1,i=arguments.length;e<i;e++){r=arguments[e];for(var s in r)if(Object.prototype.hasOwnProperty.call(r,s))n[s]=r[s]}return n};return ac.apply(this,arguments)};function uc(t,n){var r={};for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e)&&n.indexOf(e)<0)r[e]=t[e];if(t!=null&&typeof Object.getOwnPropertySymbols==="function")for(var i=0,e=Object.getOwnPropertySymbols(t);i<e.length;i++){if(n.indexOf(e[i])<0&&Object.prototype.propertyIsEnumerable.call(t,e[i]))r[e[i]]=t[e[i]]}return r}function cc(t,n,r,e){var i=arguments.length,s=i<3?n:e===null?e=Object.getOwnPropertyDescriptor(n,r):e,o;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")s=Reflect.decorate(t,n,r,e);else for(var a=t.length-1;a>=0;a--)if(o=t[a])s=(i<3?o(s):i>3?o(n,r,s):o(n,r))||s;return i>3&&s&&Object.defineProperty(n,r,s),s}function hc(t,n){return function(r,e){n(r,e,t)}}function fc(t,n){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(t,n)}function lc(t,n,r,e){function i(t){return t instanceof r?t:new r((function(n){n(t)}))}return new(r||(r=Promise))((function(r,s){function o(t){try{u(e.next(t))}catch(t){s(t)}}function a(t){try{u(e["throw"](t))}catch(t){s(t)}}function u(t){t.done?r(t.value):i(t.value).then(o,a)}u((e=e.apply(t,n||[])).next())}))}function dc(t,n){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},e,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol==="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(t){return function(n){return u([t,n])}}function u(o){if(e)throw new TypeError("Generator is already executing.");while(r)try{if(e=1,i&&(s=o[0]&2?i["return"]:o[0]?i["throw"]||((s=i["return"])&&s.call(i),0):i.next)&&!(s=s.call(i,o[1])).done)return s;if(i=0,s)o=[o[0]&2,s.value];switch(o[0]){case 0:case 1:s=o;break;case 4:r.label++;return{value:o[1],done:false};case 5:r.label++;i=o[1];o=[0];continue;case 7:o=r.ops.pop();r.trys.pop();continue;default:if(!(s=r.trys,s=s.length>0&&s[s.length-1])&&(o[0]===6||o[0]===2)){r=0;continue}if(o[0]===3&&(!s||o[1]>s[0]&&o[1]<s[3])){r.label=o[1];break}if(o[0]===6&&r.label<s[1]){r.label=s[1];s=o;break}if(s&&r.label<s[2]){r.label=s[2];r.ops.push(o);break}if(s[2])r.ops.pop();r.trys.pop();continue}o=n.call(t,r)}catch(t){o=[6,t];i=0}finally{e=s=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:true}}}function vc(t,n,r,e){if(e===undefined)e=r;t[e]=n[r]}function pc(t,n){for(var r in t)if(r!=="default"&&!n.hasOwnProperty(r))n[r]=t[r]}function wc(t){var n=typeof Symbol==="function"&&Symbol.iterator,r=n&&t[n],e=0;if(r)return r.call(t);if(t&&typeof t.length==="number")return{next:function(){if(t&&e>=t.length)t=void 0;return{value:t&&t[e++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function yc(t,n){var r=typeof Symbol==="function"&&t[Symbol.iterator];if(!r)return t;var e=r.call(t),i,s=[],o;try{while((n===void 0||n-- >0)&&!(i=e.next()).done)s.push(i.value)}catch(t){o={error:t}}finally{try{if(i&&!i.done&&(r=e["return"]))r.call(e)}finally{if(o)throw o.error}}return s}function bc(){for(var t=[],n=0;n<arguments.length;n++)t=t.concat(yc(arguments[n]));return t}function mc(){for(var t=0,n=0,r=arguments.length;n<r;n++)t+=arguments[n].length;for(var e=Array(t),i=0,n=0;n<r;n++)for(var s=arguments[n],o=0,a=s.length;o<a;o++,i++)e[i]=s[o];return e}function gc(t){return this instanceof gc?(this.v=t,this):new gc(t)}function _c(t,n,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r.apply(t,n||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(t){if(e[t])i[t]=function(n){return new Promise((function(r,e){s.push([t,n,r,e])>1||a(t,n)}))}}function a(t,n){try{u(e[t](n))}catch(t){f(s[0][3],t)}}function u(t){t.value instanceof gc?Promise.resolve(t.value.v).then(c,h):f(s[0][2],t)}function c(t){a("next",t)}function h(t){a("throw",t)}function f(t,n){if(t(n),s.shift(),s.length)a(s[0][0],s[0][1])}}function Ec(t){var n,r;return n={},e("next"),e("throw",(function(t){throw t})),e("return"),n[Symbol.iterator]=function(){return this},n;function e(e,i){n[e]=t[e]?function(n){return(r=!r)?{value:gc(t[e](n)),done:e==="return"}:i?i(n):n}:i}}function Oc(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t[Symbol.asyncIterator],r;return n?n.call(t):(t=typeof wc==="function"?wc(t):t[Symbol.iterator](),r={},e("next"),e("throw"),e("return"),r[Symbol.asyncIterator]=function(){return this},r);function e(n){r[n]=t[n]&&function(r){return new Promise((function(e,s){r=t[n](r),i(e,s,r.done,r.value)}))}}function i(t,n,r,e){Promise.resolve(e).then((function(n){t({value:n,done:r})}),n)}}function Sc(t,n){if(Object.defineProperty){Object.defineProperty(t,"raw",{value:n})}else{t.raw=n}return t}function Ic(t){if(t&&t.__esModule)return t;var n={};if(t!=null)for(var r in t)if(Object.hasOwnProperty.call(t,r))n[r]=t[r];n.default=t;return n}function jc(t){return t&&t.__esModule?t:{default:t}}function Ac(t,n){if(!n.has(t)){throw new TypeError("attempted to get private field on non-instance")}return n.get(t)}function Nc(t,n,r){if(!n.has(t)){throw new TypeError("attempted to set private field on non-instance")}n.set(t,r);return r}const Pc=Object.freeze({__proto__:null,__extends:oc,get __assign(){return ac},__rest:uc,__decorate:cc,__param:hc,__metadata:fc,__awaiter:lc,__generator:dc,__createBinding:vc,__exportStar:pc,__values:wc,__read:yc,__spread:bc,__spreadArrays:mc,__await:gc,__asyncGenerator:_c,__asyncDelegator:Ec,__asyncValues:Oc,__makeTemplateObject:Sc,__importStar:Ic,__importDefault:jc,__classPrivateFieldGet:Ac,__classPrivateFieldSet:Nc});const xc=e(Pc);var $c={};Object.defineProperty($c,"__esModule",{value:true});function Tc(t){if(typeof t!=="string"){throw new Error(`Cannot safe json parse value of type ${typeof t}`)}try{return JSON.parse(t)}catch(n){return t}}$c.safeJsonParse=Tc;function Mc(t){return typeof t==="string"?t:JSON.stringify(t,((t,n)=>typeof n==="undefined"?null:n))}$c.safeJsonStringify=Mc;var Cc={exports:{}};(function(){let t;function n(){}t=n;t.prototype.getItem=function(t){if(this.hasOwnProperty(t)){return String(this[t])}return null};t.prototype.setItem=function(t,n){this[t]=String(n)};t.prototype.removeItem=function(t){delete this[t]};t.prototype.clear=function(){const t=this;Object.keys(t).forEach((function(n){t[n]=undefined;delete t[n]}))};t.prototype.key=function(t){t=t||0;return Object.keys(this)[t]};t.prototype.__defineGetter__("length",(function(){return Object.keys(this).length}));if(typeof o!=="undefined"&&o.localStorage){Cc.exports=o.localStorage}else if(typeof window!=="undefined"&&window.localStorage){Cc.exports=window.localStorage}else{Cc.exports=new n}})();var Rc={};var Uc={};Object.defineProperty(Uc,"__esModule",{value:true});Uc.IKeyValueStorage=void 0;class Dc{}Uc.IKeyValueStorage=Dc;var kc={};Object.defineProperty(kc,"__esModule",{value:true});kc.parseEntry=void 0;const Lc=$c;function qc(t){var n;return[t[0],Lc.safeJsonParse((n=t[1])!==null&&n!==void 0?n:"")]}kc.parseEntry=qc;(function(t){Object.defineProperty(t,"__esModule",{value:true});const n=xc;n.__exportStar(Uc,t);n.__exportStar(kc,t)})(Rc);Object.defineProperty(ic,"__esModule",{value:true});ic.KeyValueStorage=void 0;const Vc=xc;const Fc=$c;const Gc=Vc.__importDefault(Cc.exports);const Hc=Rc;class zc{constructor(){this.localStorage=Gc.default}getKeys(){return Vc.__awaiter(this,void 0,void 0,(function*(){return Object.keys(this.localStorage)}))}getEntries(){return Vc.__awaiter(this,void 0,void 0,(function*(){return Object.entries(this.localStorage).map(Hc.parseEntry)}))}getItem(t){return Vc.__awaiter(this,void 0,void 0,(function*(){const n=this.localStorage.getItem(t);if(n===null){return undefined}return Fc.safeJsonParse(n)}))}setItem(t,n){return Vc.__awaiter(this,void 0,void 0,(function*(){this.localStorage.setItem(t,Fc.safeJsonStringify(n))}))}removeItem(t){return Vc.__awaiter(this,void 0,void 0,(function*(){this.localStorage.removeItem(t)}))}}ic.KeyValueStorage=zc;var Wc=ic.default=zc;var Bc={};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Kc=function(t,n){Kc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)if(n.hasOwnProperty(r))t[r]=n[r]};return Kc(t,n)};function Jc(t,n){Kc(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}var Zc=function(){Zc=Object.assign||function t(n){for(var r,e=1,i=arguments.length;e<i;e++){r=arguments[e];for(var s in r)if(Object.prototype.hasOwnProperty.call(r,s))n[s]=r[s]}return n};return Zc.apply(this,arguments)};function Qc(t,n){var r={};for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e)&&n.indexOf(e)<0)r[e]=t[e];if(t!=null&&typeof Object.getOwnPropertySymbols==="function")for(var i=0,e=Object.getOwnPropertySymbols(t);i<e.length;i++){if(n.indexOf(e[i])<0&&Object.prototype.propertyIsEnumerable.call(t,e[i]))r[e[i]]=t[e[i]]}return r}function Yc(t,n,r,e){var i=arguments.length,s=i<3?n:e===null?e=Object.getOwnPropertyDescriptor(n,r):e,o;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")s=Reflect.decorate(t,n,r,e);else for(var a=t.length-1;a>=0;a--)if(o=t[a])s=(i<3?o(s):i>3?o(n,r,s):o(n,r))||s;return i>3&&s&&Object.defineProperty(n,r,s),s}function Xc(t,n){return function(r,e){n(r,e,t)}}function th(t,n){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(t,n)}function nh(t,n,r,e){function i(t){return t instanceof r?t:new r((function(n){n(t)}))}return new(r||(r=Promise))((function(r,s){function o(t){try{u(e.next(t))}catch(t){s(t)}}function a(t){try{u(e["throw"](t))}catch(t){s(t)}}function u(t){t.done?r(t.value):i(t.value).then(o,a)}u((e=e.apply(t,n||[])).next())}))}function rh(t,n){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},e,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol==="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(t){return function(n){return u([t,n])}}function u(o){if(e)throw new TypeError("Generator is already executing.");while(r)try{if(e=1,i&&(s=o[0]&2?i["return"]:o[0]?i["throw"]||((s=i["return"])&&s.call(i),0):i.next)&&!(s=s.call(i,o[1])).done)return s;if(i=0,s)o=[o[0]&2,s.value];switch(o[0]){case 0:case 1:s=o;break;case 4:r.label++;return{value:o[1],done:false};case 5:r.label++;i=o[1];o=[0];continue;case 7:o=r.ops.pop();r.trys.pop();continue;default:if(!(s=r.trys,s=s.length>0&&s[s.length-1])&&(o[0]===6||o[0]===2)){r=0;continue}if(o[0]===3&&(!s||o[1]>s[0]&&o[1]<s[3])){r.label=o[1];break}if(o[0]===6&&r.label<s[1]){r.label=s[1];s=o;break}if(s&&r.label<s[2]){r.label=s[2];r.ops.push(o);break}if(s[2])r.ops.pop();r.trys.pop();continue}o=n.call(t,r)}catch(t){o=[6,t];i=0}finally{e=s=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:true}}}function eh(t,n,r,e){if(e===undefined)e=r;t[e]=n[r]}function ih(t,n){for(var r in t)if(r!=="default"&&!n.hasOwnProperty(r))n[r]=t[r]}function sh(t){var n=typeof Symbol==="function"&&Symbol.iterator,r=n&&t[n],e=0;if(r)return r.call(t);if(t&&typeof t.length==="number")return{next:function(){if(t&&e>=t.length)t=void 0;return{value:t&&t[e++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function oh(t,n){var r=typeof Symbol==="function"&&t[Symbol.iterator];if(!r)return t;var e=r.call(t),i,s=[],o;try{while((n===void 0||n-- >0)&&!(i=e.next()).done)s.push(i.value)}catch(t){o={error:t}}finally{try{if(i&&!i.done&&(r=e["return"]))r.call(e)}finally{if(o)throw o.error}}return s}function ah(){for(var t=[],n=0;n<arguments.length;n++)t=t.concat(oh(arguments[n]));return t}function uh(){for(var t=0,n=0,r=arguments.length;n<r;n++)t+=arguments[n].length;for(var e=Array(t),i=0,n=0;n<r;n++)for(var s=arguments[n],o=0,a=s.length;o<a;o++,i++)e[i]=s[o];return e}function ch(t){return this instanceof ch?(this.v=t,this):new ch(t)}function hh(t,n,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r.apply(t,n||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(t){if(e[t])i[t]=function(n){return new Promise((function(r,e){s.push([t,n,r,e])>1||a(t,n)}))}}function a(t,n){try{u(e[t](n))}catch(t){f(s[0][3],t)}}function u(t){t.value instanceof ch?Promise.resolve(t.value.v).then(c,h):f(s[0][2],t)}function c(t){a("next",t)}function h(t){a("throw",t)}function f(t,n){if(t(n),s.shift(),s.length)a(s[0][0],s[0][1])}}function fh(t){var n,r;return n={},e("next"),e("throw",(function(t){throw t})),e("return"),n[Symbol.iterator]=function(){return this},n;function e(e,i){n[e]=t[e]?function(n){return(r=!r)?{value:ch(t[e](n)),done:e==="return"}:i?i(n):n}:i}}function lh(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t[Symbol.asyncIterator],r;return n?n.call(t):(t=typeof sh==="function"?sh(t):t[Symbol.iterator](),r={},e("next"),e("throw"),e("return"),r[Symbol.asyncIterator]=function(){return this},r);function e(n){r[n]=t[n]&&function(r){return new Promise((function(e,s){r=t[n](r),i(e,s,r.done,r.value)}))}}function i(t,n,r,e){Promise.resolve(e).then((function(n){t({value:n,done:r})}),n)}}function dh(t,n){if(Object.defineProperty){Object.defineProperty(t,"raw",{value:n})}else{t.raw=n}return t}function vh(t){if(t&&t.__esModule)return t;var n={};if(t!=null)for(var r in t)if(Object.hasOwnProperty.call(t,r))n[r]=t[r];n.default=t;return n}function ph(t){return t&&t.__esModule?t:{default:t}}function wh(t,n){if(!n.has(t)){throw new TypeError("attempted to get private field on non-instance")}return n.get(t)}function yh(t,n,r){if(!n.has(t)){throw new TypeError("attempted to set private field on non-instance")}n.set(t,r);return r}const bh=Object.freeze({__proto__:null,__extends:Jc,get __assign(){return Zc},__rest:Qc,__decorate:Yc,__param:Xc,__metadata:th,__awaiter:nh,__generator:rh,__createBinding:eh,__exportStar:ih,__values:sh,__read:oh,__spread:ah,__spreadArrays:uh,__await:ch,__asyncGenerator:hh,__asyncDelegator:fh,__asyncValues:lh,__makeTemplateObject:dh,__importStar:vh,__importDefault:ph,__classPrivateFieldGet:wh,__classPrivateFieldSet:yh});const mh=e(bh);var gh={};var _h={};var Eh={};class Oh{}const Sh=Object.freeze({__proto__:null,IEvents:Oh});const Ih=e(Sh);Object.defineProperty(Eh,"__esModule",{value:true});Eh.IHeartBeat=void 0;const jh=Ih;class Ah extends jh.IEvents{constructor(t){super()}}Eh.IHeartBeat=Ah;(function(t){Object.defineProperty(t,"__esModule",{value:true});const n=mh;n.__exportStar(Eh,t)})(_h);var Nh={};var Ph={};Object.defineProperty(Ph,"__esModule",{value:true});Ph.HEARTBEAT_EVENTS=Ph.HEARTBEAT_INTERVAL=void 0;const xh=ds;Ph.HEARTBEAT_INTERVAL=xh.FIVE_SECONDS;Ph.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"};(function(t){Object.defineProperty(t,"__esModule",{value:true});const n=mh;n.__exportStar(Ph,t)})(Nh);Object.defineProperty(gh,"__esModule",{value:true});gh.HeartBeat=void 0;const $h=mh;const Th=t.exports;const Mh=ds;const Ch=_h;const Rh=Nh;class Uh extends Ch.IHeartBeat{constructor(t){super(t);this.events=new Th.EventEmitter;this.interval=Rh.HEARTBEAT_INTERVAL;this.interval=(t===null||t===void 0?void 0:t.interval)||Rh.HEARTBEAT_INTERVAL}static init(t){return $h.__awaiter(this,void 0,void 0,(function*(){const n=new Uh(t);yield n.init();return n}))}init(){return $h.__awaiter(this,void 0,void 0,(function*(){yield this.initialize()}))}stop(){clearInterval(this.intervalRef)}on(t,n){this.events.on(t,n)}once(t,n){this.events.once(t,n)}off(t,n){this.events.off(t,n)}removeListener(t,n){this.events.removeListener(t,n)}initialize(){return $h.__awaiter(this,void 0,void 0,(function*(){this.intervalRef=setInterval((()=>this.pulse()),Mh.toMiliseconds(this.interval))}))}pulse(){this.events.emit(Rh.HEARTBEAT_EVENTS.pulse)}}gh.HeartBeat=Uh;(function(t){Object.defineProperty(t,"__esModule",{value:true});const n=mh;n.__exportStar(gh,t);n.__exportStar(_h,t);n.__exportStar(Nh,t)})(Bc);var Dh={};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var kh=function(t,n){kh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)if(n.hasOwnProperty(r))t[r]=n[r]};return kh(t,n)};function Lh(t,n){kh(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}var qh=function(){qh=Object.assign||function t(n){for(var r,e=1,i=arguments.length;e<i;e++){r=arguments[e];for(var s in r)if(Object.prototype.hasOwnProperty.call(r,s))n[s]=r[s]}return n};return qh.apply(this,arguments)};function Vh(t,n){var r={};for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e)&&n.indexOf(e)<0)r[e]=t[e];if(t!=null&&typeof Object.getOwnPropertySymbols==="function")for(var i=0,e=Object.getOwnPropertySymbols(t);i<e.length;i++){if(n.indexOf(e[i])<0&&Object.prototype.propertyIsEnumerable.call(t,e[i]))r[e[i]]=t[e[i]]}return r}function Fh(t,n,r,e){var i=arguments.length,s=i<3?n:e===null?e=Object.getOwnPropertyDescriptor(n,r):e,o;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")s=Reflect.decorate(t,n,r,e);else for(var a=t.length-1;a>=0;a--)if(o=t[a])s=(i<3?o(s):i>3?o(n,r,s):o(n,r))||s;return i>3&&s&&Object.defineProperty(n,r,s),s}function Gh(t,n){return function(r,e){n(r,e,t)}}function Hh(t,n){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(t,n)}function zh(t,n,r,e){function i(t){return t instanceof r?t:new r((function(n){n(t)}))}return new(r||(r=Promise))((function(r,s){function o(t){try{u(e.next(t))}catch(t){s(t)}}function a(t){try{u(e["throw"](t))}catch(t){s(t)}}function u(t){t.done?r(t.value):i(t.value).then(o,a)}u((e=e.apply(t,n||[])).next())}))}function Wh(t,n){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},e,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol==="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(t){return function(n){return u([t,n])}}function u(o){if(e)throw new TypeError("Generator is already executing.");while(r)try{if(e=1,i&&(s=o[0]&2?i["return"]:o[0]?i["throw"]||((s=i["return"])&&s.call(i),0):i.next)&&!(s=s.call(i,o[1])).done)return s;if(i=0,s)o=[o[0]&2,s.value];switch(o[0]){case 0:case 1:s=o;break;case 4:r.label++;return{value:o[1],done:false};case 5:r.label++;i=o[1];o=[0];continue;case 7:o=r.ops.pop();r.trys.pop();continue;default:if(!(s=r.trys,s=s.length>0&&s[s.length-1])&&(o[0]===6||o[0]===2)){r=0;continue}if(o[0]===3&&(!s||o[1]>s[0]&&o[1]<s[3])){r.label=o[1];break}if(o[0]===6&&r.label<s[1]){r.label=s[1];s=o;break}if(s&&r.label<s[2]){r.label=s[2];r.ops.push(o);break}if(s[2])r.ops.pop();r.trys.pop();continue}o=n.call(t,r)}catch(t){o=[6,t];i=0}finally{e=s=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:true}}}function Bh(t,n,r,e){if(e===undefined)e=r;t[e]=n[r]}function Kh(t,n){for(var r in t)if(r!=="default"&&!n.hasOwnProperty(r))n[r]=t[r]}function Jh(t){var n=typeof Symbol==="function"&&Symbol.iterator,r=n&&t[n],e=0;if(r)return r.call(t);if(t&&typeof t.length==="number")return{next:function(){if(t&&e>=t.length)t=void 0;return{value:t&&t[e++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function Zh(t,n){var r=typeof Symbol==="function"&&t[Symbol.iterator];if(!r)return t;var e=r.call(t),i,s=[],o;try{while((n===void 0||n-- >0)&&!(i=e.next()).done)s.push(i.value)}catch(t){o={error:t}}finally{try{if(i&&!i.done&&(r=e["return"]))r.call(e)}finally{if(o)throw o.error}}return s}function Qh(){for(var t=[],n=0;n<arguments.length;n++)t=t.concat(Zh(arguments[n]));return t}function Yh(){for(var t=0,n=0,r=arguments.length;n<r;n++)t+=arguments[n].length;for(var e=Array(t),i=0,n=0;n<r;n++)for(var s=arguments[n],o=0,a=s.length;o<a;o++,i++)e[i]=s[o];return e}function Xh(t){return this instanceof Xh?(this.v=t,this):new Xh(t)}function tf(t,n,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r.apply(t,n||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(t){if(e[t])i[t]=function(n){return new Promise((function(r,e){s.push([t,n,r,e])>1||a(t,n)}))}}function a(t,n){try{u(e[t](n))}catch(t){f(s[0][3],t)}}function u(t){t.value instanceof Xh?Promise.resolve(t.value.v).then(c,h):f(s[0][2],t)}function c(t){a("next",t)}function h(t){a("throw",t)}function f(t,n){if(t(n),s.shift(),s.length)a(s[0][0],s[0][1])}}function nf(t){var n,r;return n={},e("next"),e("throw",(function(t){throw t})),e("return"),n[Symbol.iterator]=function(){return this},n;function e(e,i){n[e]=t[e]?function(n){return(r=!r)?{value:Xh(t[e](n)),done:e==="return"}:i?i(n):n}:i}}function rf(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t[Symbol.asyncIterator],r;return n?n.call(t):(t=typeof Jh==="function"?Jh(t):t[Symbol.iterator](),r={},e("next"),e("throw"),e("return"),r[Symbol.asyncIterator]=function(){return this},r);function e(n){r[n]=t[n]&&function(r){return new Promise((function(e,s){r=t[n](r),i(e,s,r.done,r.value)}))}}function i(t,n,r,e){Promise.resolve(e).then((function(n){t({value:n,done:r})}),n)}}function ef(t,n){if(Object.defineProperty){Object.defineProperty(t,"raw",{value:n})}else{t.raw=n}return t}function sf(t){if(t&&t.__esModule)return t;var n={};if(t!=null)for(var r in t)if(Object.hasOwnProperty.call(t,r))n[r]=t[r];n.default=t;return n}function of(t){return t&&t.__esModule?t:{default:t}}function af(t,n){if(!n.has(t)){throw new TypeError("attempted to get private field on non-instance")}return n.get(t)}function uf(t,n,r){if(!n.has(t)){throw new TypeError("attempted to set private field on non-instance")}n.set(t,r);return r}const cf=Object.freeze({__proto__:null,__extends:Lh,get __assign(){return qh},__rest:Vh,__decorate:Fh,__param:Gh,__metadata:Hh,__awaiter:zh,__generator:Wh,__createBinding:Bh,__exportStar:Kh,__values:Jh,__read:Zh,__spread:Qh,__spreadArrays:Yh,__await:Xh,__asyncGenerator:tf,__asyncDelegator:nf,__asyncValues:rf,__makeTemplateObject:ef,__importStar:sf,__importDefault:of,__classPrivateFieldGet:af,__classPrivateFieldSet:uf});const hf=e(cf);function ff(t){try{return JSON.stringify(t)}catch(t){return'"[Circular]"'}}var lf=df;function df(t,n,r){var e=r&&r.stringify||ff;var i=1;if(typeof t==="object"&&t!==null){var s=n.length+i;if(s===1)return t;var o=new Array(s);o[0]=e(t);for(var a=1;a<s;a++){o[a]=e(n[a])}return o.join(" ")}if(typeof t!=="string"){return t}var u=n.length;if(u===0)return t;var c="";var h=1-i;var f=-1;var l=t&&t.length||0;for(var d=0;d<l;){if(t.charCodeAt(d)===37&&d+1<l){f=f>-1?f:0;switch(t.charCodeAt(d+1)){case 100:case 102:if(h>=u)break;if(n[h]==null)break;if(f<d)c+=t.slice(f,d);c+=Number(n[h]);f=d+2;d++;break;case 105:if(h>=u)break;if(n[h]==null)break;if(f<d)c+=t.slice(f,d);c+=Math.floor(Number(n[h]));f=d+2;d++;break;case 79:case 111:case 106:if(h>=u)break;if(n[h]===undefined)break;if(f<d)c+=t.slice(f,d);var v=typeof n[h];if(v==="string"){c+="'"+n[h]+"'";f=d+2;d++;break}if(v==="function"){c+=n[h].name||"<anonymous>";f=d+2;d++;break}c+=e(n[h]);f=d+2;d++;break;case 115:if(h>=u)break;if(f<d)c+=t.slice(f,d);c+=String(n[h]);f=d+2;d++;break;case 37:if(f<d)c+=t.slice(f,d);c+="%";f=d+2;d++;h--;break}++h}++d}if(f===-1)return t;else if(f<l){c+=t.slice(f)}return c}const vf=lf;var pf=mf;const wf=Uf().console||{};const yf={mapHttpRequest:Pf,mapHttpResponse:Pf,wrapRequestSerializer:xf,wrapResponseSerializer:xf,wrapErrorSerializer:xf,req:Pf,res:Pf,err:Af};function bf(t,n){if(Array.isArray(t)){const n=t.filter((function(t){return t!=="!stdSerializers.err"}));return n}else if(t===true){return Object.keys(n)}return false}function mf(t){t=t||{};t.browser=t.browser||{};const n=t.browser.transmit;if(n&&typeof n.send!=="function"){throw Error("pino: transmit option must have a send function")}const r=t.browser.write||wf;if(t.browser.write)t.browser.asObject=true;const e=t.serializers||{};const i=bf(t.browser.serialize,e);let s=t.browser.serialize;if(Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1)s=false;const o=["error","fatal","warn","info","debug","trace"];if(typeof r==="function"){r.error=r.fatal=r.warn=r.info=r.debug=r.trace=r}if(t.enabled===false)t.level="silent";const a=t.level||"info";const u=Object.create(r);if(!u.log)u.log=$f;Object.defineProperty(u,"levelVal",{get:h});Object.defineProperty(u,"level",{get:f,set:l});const c={transmit:n,serialize:i,asObject:t.browser.asObject,levels:o,timestamp:Nf(t)};u.levels=mf.levels;u.level=a;u.setMaxListeners=u.getMaxListeners=u.emit=u.addListener=u.on=u.prependListener=u.once=u.prependOnceListener=u.removeListener=u.removeAllListeners=u.listeners=u.listenerCount=u.eventNames=u.write=u.flush=$f;u.serializers=e;u._serialize=i;u._stdErrSerialize=s;u.child=d;if(n)u._logEvent=jf();function h(){return this.level==="silent"?Infinity:this.levels.values[this.level]}function f(){return this._level}function l(t){if(t!=="silent"&&!this.levels.values[t]){throw Error("unknown level "+t)}this._level=t;gf(c,u,"error","log");gf(c,u,"fatal","error");gf(c,u,"warn","error");gf(c,u,"info","log");gf(c,u,"debug","log");gf(c,u,"trace","log")}function d(r,s){if(!r){throw new Error("missing bindings for child Pino")}s=s||{};if(i&&r.serializers){s.serializers=r.serializers}const o=s.serializers;if(i&&o){var a=Object.assign({},e,o);var u=t.browser.serialize===true?Object.keys(a):i;delete r.serializers;Of([r],u,a,this._stdErrSerialize)}function c(t){this._childLevel=(t._childLevel|0)+1;this.error=Sf(t,r,"error");this.fatal=Sf(t,r,"fatal");this.warn=Sf(t,r,"warn");this.info=Sf(t,r,"info");this.debug=Sf(t,r,"debug");this.trace=Sf(t,r,"trace");if(a){this.serializers=a;this._serialize=u}if(n){this._logEvent=jf([].concat(t._logEvent.bindings,r))}}c.prototype=this;return new c(this)}return u}mf.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};mf.stdSerializers=yf;mf.stdTimeFunctions=Object.assign({},{nullTime:Tf,epochTime:Mf,unixTime:Cf,isoTime:Rf});function gf(t,n,r,e){const i=Object.getPrototypeOf(n);n[r]=n.levelVal>n.levels.values[r]?$f:i[r]?i[r]:wf[r]||wf[e]||$f;_f(t,n,r)}function _f(t,n,r){if(!t.transmit&&n[r]===$f)return;n[r]=function(e){return function i(){const s=t.timestamp();const o=new Array(arguments.length);const a=Object.getPrototypeOf&&Object.getPrototypeOf(this)===wf?wf:this;for(var u=0;u<o.length;u++)o[u]=arguments[u];if(t.serialize&&!t.asObject){Of(o,this._serialize,this.serializers,this._stdErrSerialize)}if(t.asObject)e.call(a,Ef(this,r,o,s));else e.apply(a,o);if(t.transmit){const e=t.transmit.level||n.level;const i=mf.levels.values[e];const a=mf.levels.values[r];if(a<i)return;If(this,{ts:s,methodLevel:r,methodValue:a,transmitLevel:e,transmitValue:mf.levels.values[t.transmit.level||n.level],send:t.transmit.send,val:n.levelVal},o)}}}(n[r])}function Ef(t,n,r,e){if(t._serialize)Of(r,t._serialize,t.serializers,t._stdErrSerialize);const i=r.slice();let s=i[0];const o={};if(e){o.time=e}o.level=mf.levels.values[n];let a=(t._childLevel|0)+1;if(a<1)a=1;if(s!==null&&typeof s==="object"){while(a--&&typeof i[0]==="object"){Object.assign(o,i.shift())}s=i.length?vf(i.shift(),i):undefined}else if(typeof s==="string")s=vf(i.shift(),i);if(s!==undefined)o.msg=s;return o}function Of(t,n,r,e){for(const i in t){if(e&&t[i]instanceof Error){t[i]=mf.stdSerializers.err(t[i])}else if(typeof t[i]==="object"&&!Array.isArray(t[i])){for(const e in t[i]){if(n&&n.indexOf(e)>-1&&e in r){t[i][e]=r[e](t[i][e])}}}}}function Sf(t,n,r){return function(){const e=new Array(1+arguments.length);e[0]=n;for(var i=1;i<e.length;i++){e[i]=arguments[i-1]}return t[r].apply(this,e)}}function If(t,n,r){const e=n.send;const i=n.ts;const s=n.methodLevel;const o=n.methodValue;const a=n.val;const u=t._logEvent.bindings;Of(r,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===undefined?true:t._stdErrSerialize);t._logEvent.ts=i;t._logEvent.messages=r.filter((function(t){return u.indexOf(t)===-1}));t._logEvent.level.label=s;t._logEvent.level.value=o;e(s,t._logEvent,a);t._logEvent=jf(u)}function jf(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function Af(t){const n={type:t.constructor.name,msg:t.message,stack:t.stack};for(const r in t){if(n[r]===undefined){n[r]=t[r]}}return n}function Nf(t){if(typeof t.timestamp==="function"){return t.timestamp}if(t.timestamp===false){return Tf}return Mf}function Pf(){return{}}function xf(t){return t}function $f(){}function Tf(){return false}function Mf(){return Date.now()}function Cf(){return Math.round(Date.now()/1e3)}function Rf(){return new Date(Date.now()).toISOString()}function Uf(){function t(t){return typeof t!=="undefined"&&t}try{if(typeof globalThis!=="undefined")return globalThis;Object.defineProperty(Object.prototype,"globalThis",{get:function(){delete Object.prototype.globalThis;return this.globalThis=this},configurable:true});return globalThis}catch(n){return t(self)||t(window)||t(this)||{}}}var Df={};Object.defineProperty(Df,"__esModule",{value:true});Df.PINO_CUSTOM_CONTEXT_KEY=Df.PINO_LOGGER_DEFAULTS=void 0;Df.PINO_LOGGER_DEFAULTS={level:"info"};Df.PINO_CUSTOM_CONTEXT_KEY="custom_context";var kf={};Object.defineProperty(kf,"__esModule",{value:true});kf.generateChildLogger=kf.formatChildLoggerContext=kf.getLoggerContext=kf.setBrowserLoggerContext=kf.getBrowserLoggerContext=kf.getDefaultLoggerOptions=void 0;const Lf=Df;function qf(t){return Object.assign(Object.assign({},t),{level:(t===null||t===void 0?void 0:t.level)||Lf.PINO_LOGGER_DEFAULTS.level})}kf.getDefaultLoggerOptions=qf;function Vf(t,n=Lf.PINO_CUSTOM_CONTEXT_KEY){return t[n]||""}kf.getBrowserLoggerContext=Vf;function Ff(t,n,r=Lf.PINO_CUSTOM_CONTEXT_KEY){t[r]=n;return t}kf.setBrowserLoggerContext=Ff;function Gf(t,n=Lf.PINO_CUSTOM_CONTEXT_KEY){let r="";if(typeof t.bindings==="undefined"){r=Vf(t,n)}else{r=t.bindings().context||""}return r}kf.getLoggerContext=Gf;function Hf(t,n,r=Lf.PINO_CUSTOM_CONTEXT_KEY){const e=Gf(t,r);const i=e.trim()?`${e}/${n}`:n;return i}kf.formatChildLoggerContext=Hf;function zf(t,n,r=Lf.PINO_CUSTOM_CONTEXT_KEY){const e=Hf(t,n,r);const i=t.child({context:e});return Ff(i,e,r)}kf.generateChildLogger=zf;(function(t){Object.defineProperty(t,"__esModule",{value:true});t.pino=void 0;const n=hf;const r=n.__importDefault(pf);Object.defineProperty(t,"pino",{enumerable:true,get:function(){return r.default}});n.__exportStar(Df,t);n.__exportStar(kf,t)})(Dh);class Wf extends Oh{constructor(t){super(),this.opts=t,this.protocol="wc",this.version=2}}class Bf extends Oh{constructor(t,n){super(),this.core=t,this.logger=n,this.records=new Map}}class Kf{constructor(t,n){this.logger=t,this.core=n}}class Jf extends Oh{constructor(t,n){super(),this.relayer=t,this.logger=n}}class Zf extends Oh{constructor(t){super()}}class Qf{constructor(t,n,r,e){this.core=t,this.logger=n,this.name=r}}class Yf extends Oh{constructor(t,n){super(),this.relayer=t,this.logger=n}}class Xf extends Oh{constructor(t,n){super(),this.core=t,this.logger=n}}class tl{constructor(t,n){this.projectId=t,this.logger=n}}const nl=t=>JSON.stringify(t,((t,n)=>typeof n==="bigint"?n.toString()+"n":n));const rl=t=>{const n=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g;const r=t.replace(n,'$1"$2n"$3');return JSON.parse(r,((t,n)=>{const r=typeof n==="string"&&n.match(/^\d+n$/);if(r)return BigInt(n.substring(0,n.length-1));return n}))};function el(t){if(typeof t!=="string"){throw new Error(`Cannot safe json parse value of type ${typeof t}`)}try{return rl(t)}catch(n){return t}}function il(t){return typeof t==="string"?t:nl(t)||""}var sl={};var ol={};(function(t){Object.defineProperty(t,"__esModule",{value:true});var n=h;var r=G;t.DIGEST_LENGTH=64;t.BLOCK_SIZE=128;var e=function(){function e(){this.digestLength=t.DIGEST_LENGTH;this.blockSize=t.BLOCK_SIZE;this._stateHi=new Int32Array(8);this._stateLo=new Int32Array(8);this._tempHi=new Int32Array(16);this._tempLo=new Int32Array(16);this._buffer=new Uint8Array(256);this._bufferLength=0;this._bytesHashed=0;this._finished=false;this.reset()}e.prototype._initState=function(){this._stateHi[0]=1779033703;this._stateHi[1]=3144134277;this._stateHi[2]=1013904242;this._stateHi[3]=2773480762;this._stateHi[4]=1359893119;this._stateHi[5]=2600822924;this._stateHi[6]=528734635;this._stateHi[7]=1541459225;this._stateLo[0]=4089235720;this._stateLo[1]=2227873595;this._stateLo[2]=4271175723;this._stateLo[3]=1595750129;this._stateLo[4]=2917565137;this._stateLo[5]=725511199;this._stateLo[6]=4215389547;this._stateLo[7]=327033209};e.prototype.reset=function(){this._initState();this._bufferLength=0;this._bytesHashed=0;this._finished=false;return this};e.prototype.clean=function(){r.wipe(this._buffer);r.wipe(this._tempHi);r.wipe(this._tempLo);this.reset()};e.prototype.update=function(n,r){if(r===void 0){r=n.length}if(this._finished){throw new Error("SHA512: can't update because hash was finished.")}var e=0;this._bytesHashed+=r;if(this._bufferLength>0){while(this._bufferLength<t.BLOCK_SIZE&&r>0){this._buffer[this._bufferLength++]=n[e++];r--}if(this._bufferLength===this.blockSize){s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize);this._bufferLength=0}}if(r>=this.blockSize){e=s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,n,e,r);r%=this.blockSize}while(r>0){this._buffer[this._bufferLength++]=n[e++];r--}return this};e.prototype.finish=function(t){if(!this._finished){var r=this._bytesHashed;var e=this._bufferLength;var i=r/536870912|0;var o=r<<3;var a=r%128<112?128:256;this._buffer[e]=128;for(var u=e+1;u<a-8;u++){this._buffer[u]=0}n.writeUint32BE(i,this._buffer,a-8);n.writeUint32BE(o,this._buffer,a-4);s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,a);this._finished=true}for(var u=0;u<this.digestLength/8;u++){n.writeUint32BE(this._stateHi[u],t,u*8);n.writeUint32BE(this._stateLo[u],t,u*8+4)}return this};e.prototype.digest=function(){var t=new Uint8Array(this.digestLength);this.finish(t);return t};e.prototype.saveState=function(){if(this._finished){throw new Error("SHA256: cannot save finished state")}return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):undefined,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}};e.prototype.restoreState=function(t){this._stateHi.set(t.stateHi);this._stateLo.set(t.stateLo);this._bufferLength=t.bufferLength;if(t.buffer){this._buffer.set(t.buffer)}this._bytesHashed=t.bytesHashed;this._finished=false;return this};e.prototype.cleanSavedState=function(t){r.wipe(t.stateHi);r.wipe(t.stateLo);if(t.buffer){r.wipe(t.buffer)}t.bufferLength=0;t.bytesHashed=0};return e}();t.SHA512=e;var i=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function s(t,r,e,s,o,a,u){var c=e[0],h=e[1],f=e[2],l=e[3],d=e[4],v=e[5],p=e[6],w=e[7],y=s[0],b=s[1],m=s[2],g=s[3],_=s[4],E=s[5],O=s[6],S=s[7];var I,j;var A,N;var P,x,$,T;while(u>=128){for(var M=0;M<16;M++){var C=8*M+a;t[M]=n.readUint32BE(o,C);r[M]=n.readUint32BE(o,C+4)}for(var M=0;M<80;M++){var R=c;var U=h;var D=f;var k=l;var L=d;var q=v;var V=p;var F=w;var G=y;var H=b;var z=m;var W=g;var B=_;var K=E;var J=O;var Z=S;I=w;j=S;P=j&65535;x=j>>>16;$=I&65535;T=I>>>16;I=(d>>>14|_<<32-14)^(d>>>18|_<<32-18)^(_>>>41-32|d<<32-(41-32));j=(_>>>14|d<<32-14)^(_>>>18|d<<32-18)^(d>>>41-32|_<<32-(41-32));P+=j&65535;x+=j>>>16;$+=I&65535;T+=I>>>16;I=d&v^~d&p;j=_&E^~_&O;P+=j&65535;x+=j>>>16;$+=I&65535;T+=I>>>16;I=i[M*2];j=i[M*2+1];P+=j&65535;x+=j>>>16;$+=I&65535;T+=I>>>16;I=t[M%16];j=r[M%16];P+=j&65535;x+=j>>>16;$+=I&65535;T+=I>>>16;x+=P>>>16;$+=x>>>16;T+=$>>>16;A=$&65535|T<<16;N=P&65535|x<<16;I=A;j=N;P=j&65535;x=j>>>16;$=I&65535;T=I>>>16;I=(c>>>28|y<<32-28)^(y>>>34-32|c<<32-(34-32))^(y>>>39-32|c<<32-(39-32));j=(y>>>28|c<<32-28)^(c>>>34-32|y<<32-(34-32))^(c>>>39-32|y<<32-(39-32));P+=j&65535;x+=j>>>16;$+=I&65535;T+=I>>>16;I=c&h^c&f^h&f;j=y&b^y&m^b&m;P+=j&65535;x+=j>>>16;$+=I&65535;T+=I>>>16;x+=P>>>16;$+=x>>>16;T+=$>>>16;F=$&65535|T<<16;Z=P&65535|x<<16;I=k;j=W;P=j&65535;x=j>>>16;$=I&65535;T=I>>>16;I=A;j=N;P+=j&65535;x+=j>>>16;$+=I&65535;T+=I>>>16;x+=P>>>16;$+=x>>>16;T+=$>>>16;k=$&65535|T<<16;W=P&65535|x<<16;h=R;f=U;l=D;d=k;v=L;p=q;w=V;c=F;b=G;m=H;g=z;_=W;E=B;O=K;S=J;y=Z;if(M%16===15){for(var C=0;C<16;C++){I=t[C];j=r[C];P=j&65535;x=j>>>16;$=I&65535;T=I>>>16;I=t[(C+9)%16];j=r[(C+9)%16];P+=j&65535;x+=j>>>16;$+=I&65535;T+=I>>>16;A=t[(C+1)%16];N=r[(C+1)%16];I=(A>>>1|N<<32-1)^(A>>>8|N<<32-8)^A>>>7;j=(N>>>1|A<<32-1)^(N>>>8|A<<32-8)^(N>>>7|A<<32-7);P+=j&65535;x+=j>>>16;$+=I&65535;T+=I>>>16;A=t[(C+14)%16];N=r[(C+14)%16];I=(A>>>19|N<<32-19)^(N>>>61-32|A<<32-(61-32))^A>>>6;j=(N>>>19|A<<32-19)^(A>>>61-32|N<<32-(61-32))^(N>>>6|A<<32-6);P+=j&65535;x+=j>>>16;$+=I&65535;T+=I>>>16;x+=P>>>16;$+=x>>>16;T+=$>>>16;t[C]=$&65535|T<<16;r[C]=P&65535|x<<16}}}I=c;j=y;P=j&65535;x=j>>>16;$=I&65535;T=I>>>16;I=e[0];j=s[0];P+=j&65535;x+=j>>>16;$+=I&65535;T+=I>>>16;x+=P>>>16;$+=x>>>16;T+=$>>>16;e[0]=c=$&65535|T<<16;s[0]=y=P&65535|x<<16;I=h;j=b;P=j&65535;x=j>>>16;$=I&65535;T=I>>>16;I=e[1];j=s[1];P+=j&65535;x+=j>>>16;$+=I&65535;T+=I>>>16;x+=P>>>16;$+=x>>>16;T+=$>>>16;e[1]=h=$&65535|T<<16;s[1]=b=P&65535|x<<16;I=f;j=m;P=j&65535;x=j>>>16;$=I&65535;T=I>>>16;I=e[2];j=s[2];P+=j&65535;x+=j>>>16;$+=I&65535;T+=I>>>16;x+=P>>>16;$+=x>>>16;T+=$>>>16;e[2]=f=$&65535|T<<16;s[2]=m=P&65535|x<<16;I=l;j=g;P=j&65535;x=j>>>16;$=I&65535;T=I>>>16;I=e[3];j=s[3];P+=j&65535;x+=j>>>16;$+=I&65535;T+=I>>>16;x+=P>>>16;$+=x>>>16;T+=$>>>16;e[3]=l=$&65535|T<<16;s[3]=g=P&65535|x<<16;I=d;j=_;P=j&65535;x=j>>>16;$=I&65535;T=I>>>16;I=e[4];j=s[4];P+=j&65535;x+=j>>>16;$+=I&65535;T+=I>>>16;x+=P>>>16;$+=x>>>16;T+=$>>>16;e[4]=d=$&65535|T<<16;s[4]=_=P&65535|x<<16;I=v;j=E;P=j&65535;x=j>>>16;$=I&65535;T=I>>>16;I=e[5];j=s[5];P+=j&65535;x+=j>>>16;$+=I&65535;T+=I>>>16;x+=P>>>16;$+=x>>>16;T+=$>>>16;e[5]=v=$&65535|T<<16;s[5]=E=P&65535|x<<16;I=p;j=O;P=j&65535;x=j>>>16;$=I&65535;T=I>>>16;I=e[6];j=s[6];P+=j&65535;x+=j>>>16;$+=I&65535;T+=I>>>16;x+=P>>>16;$+=x>>>16;T+=$>>>16;e[6]=p=$&65535|T<<16;s[6]=O=P&65535|x<<16;I=w;j=S;P=j&65535;x=j>>>16;$=I&65535;T=I>>>16;I=e[7];j=s[7];P+=j&65535;x+=j>>>16;$+=I&65535;T+=I>>>16;x+=P>>>16;$+=x>>>16;T+=$>>>16;e[7]=w=$&65535|T<<16;s[7]=S=P&65535|x<<16;a+=128;u-=128}return a}function o(t){var n=new e;n.update(t);var r=n.digest();n.clean();return r}t.hash=o})(ol);(function(t){Object.defineProperty(t,"__esModule",{value:true});t.convertSecretKeyToX25519=t.convertPublicKeyToX25519=t.verify=t.sign=t.extractPublicKeyFromSecretKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.SEED_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=t.SIGNATURE_LENGTH=void 0;const n=yt;const r=ol;const e=G;t.SIGNATURE_LENGTH=64;t.PUBLIC_KEY_LENGTH=32;t.SECRET_KEY_LENGTH=64;t.SEED_LENGTH=32;function i(t){const n=new Float64Array(16);if(t){for(let r=0;r<t.length;r++){n[r]=t[r]}}return n}const s=new Uint8Array(32);s[0]=9;const o=i();const a=i([1]);const u=i([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]);const c=i([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]);const h=i([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]);const f=i([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]);const l=i([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function d(t,n){for(let r=0;r<16;r++){t[r]=n[r]|0}}function v(t){let n=1;for(let r=0;r<16;r++){let e=t[r]+n+65535;n=Math.floor(e/65536);t[r]=e-n*65536}t[0]+=n-1+37*(n-1)}function p(t,n,r){const e=~(r-1);for(let r=0;r<16;r++){const i=e&(t[r]^n[r]);t[r]^=i;n[r]^=i}}function w(t,n){const r=i();const e=i();for(let t=0;t<16;t++){e[t]=n[t]}v(e);v(e);v(e);for(let t=0;t<2;t++){r[0]=e[0]-65517;for(let t=1;t<15;t++){r[t]=e[t]-65535-(r[t-1]>>16&1);r[t-1]&=65535}r[15]=e[15]-32767-(r[14]>>16&1);const t=r[15]>>16&1;r[14]&=65535;p(e,r,1-t)}for(let n=0;n<16;n++){t[2*n]=e[n]&255;t[2*n+1]=e[n]>>8}}function y(t,n){let r=0;for(let e=0;e<32;e++){r|=t[e]^n[e]}return(1&r-1>>>8)-1}function b(t,n){const r=new Uint8Array(32);const e=new Uint8Array(32);w(r,t);w(e,n);return y(r,e)}function m(t){const n=new Uint8Array(32);w(n,t);return n[0]&1}function g(t,n){for(let r=0;r<16;r++){t[r]=n[2*r]+(n[2*r+1]<<8)}t[15]&=32767}function _(t,n,r){for(let e=0;e<16;e++){t[e]=n[e]+r[e]}}function E(t,n,r){for(let e=0;e<16;e++){t[e]=n[e]-r[e]}}function O(t,n,r){let e,i,s=0,o=0,a=0,u=0,c=0,h=0,f=0,l=0,d=0,v=0,p=0,w=0,y=0,b=0,m=0,g=0,_=0,E=0,O=0,S=0,I=0,j=0,A=0,N=0,P=0,x=0,$=0,T=0,M=0,C=0,R=0,U=r[0],D=r[1],k=r[2],L=r[3],q=r[4],V=r[5],F=r[6],G=r[7],H=r[8],z=r[9],W=r[10],B=r[11],K=r[12],J=r[13],Z=r[14],Q=r[15];e=n[0];s+=e*U;o+=e*D;a+=e*k;u+=e*L;c+=e*q;h+=e*V;f+=e*F;l+=e*G;d+=e*H;v+=e*z;p+=e*W;w+=e*B;y+=e*K;b+=e*J;m+=e*Z;g+=e*Q;e=n[1];o+=e*U;a+=e*D;u+=e*k;c+=e*L;h+=e*q;f+=e*V;l+=e*F;d+=e*G;v+=e*H;p+=e*z;w+=e*W;y+=e*B;b+=e*K;m+=e*J;g+=e*Z;_+=e*Q;e=n[2];a+=e*U;u+=e*D;c+=e*k;h+=e*L;f+=e*q;l+=e*V;d+=e*F;v+=e*G;p+=e*H;w+=e*z;y+=e*W;b+=e*B;m+=e*K;g+=e*J;_+=e*Z;E+=e*Q;e=n[3];u+=e*U;c+=e*D;h+=e*k;f+=e*L;l+=e*q;d+=e*V;v+=e*F;p+=e*G;w+=e*H;y+=e*z;b+=e*W;m+=e*B;g+=e*K;_+=e*J;E+=e*Z;O+=e*Q;e=n[4];c+=e*U;h+=e*D;f+=e*k;l+=e*L;d+=e*q;v+=e*V;p+=e*F;w+=e*G;y+=e*H;b+=e*z;m+=e*W;g+=e*B;_+=e*K;E+=e*J;O+=e*Z;S+=e*Q;e=n[5];h+=e*U;f+=e*D;l+=e*k;d+=e*L;v+=e*q;p+=e*V;w+=e*F;y+=e*G;b+=e*H;m+=e*z;g+=e*W;_+=e*B;E+=e*K;O+=e*J;S+=e*Z;I+=e*Q;e=n[6];f+=e*U;l+=e*D;d+=e*k;v+=e*L;p+=e*q;w+=e*V;y+=e*F;b+=e*G;m+=e*H;g+=e*z;_+=e*W;E+=e*B;O+=e*K;S+=e*J;I+=e*Z;j+=e*Q;e=n[7];l+=e*U;d+=e*D;v+=e*k;p+=e*L;w+=e*q;y+=e*V;b+=e*F;m+=e*G;g+=e*H;_+=e*z;E+=e*W;O+=e*B;S+=e*K;I+=e*J;j+=e*Z;A+=e*Q;e=n[8];d+=e*U;v+=e*D;p+=e*k;w+=e*L;y+=e*q;b+=e*V;m+=e*F;g+=e*G;_+=e*H;E+=e*z;O+=e*W;S+=e*B;I+=e*K;j+=e*J;A+=e*Z;N+=e*Q;e=n[9];v+=e*U;p+=e*D;w+=e*k;y+=e*L;b+=e*q;m+=e*V;g+=e*F;_+=e*G;E+=e*H;O+=e*z;S+=e*W;I+=e*B;j+=e*K;A+=e*J;N+=e*Z;P+=e*Q;e=n[10];p+=e*U;w+=e*D;y+=e*k;b+=e*L;m+=e*q;g+=e*V;_+=e*F;E+=e*G;O+=e*H;S+=e*z;I+=e*W;j+=e*B;A+=e*K;N+=e*J;P+=e*Z;x+=e*Q;e=n[11];w+=e*U;y+=e*D;b+=e*k;m+=e*L;g+=e*q;_+=e*V;E+=e*F;O+=e*G;S+=e*H;I+=e*z;j+=e*W;A+=e*B;N+=e*K;P+=e*J;x+=e*Z;$+=e*Q;e=n[12];y+=e*U;b+=e*D;m+=e*k;g+=e*L;_+=e*q;E+=e*V;O+=e*F;S+=e*G;I+=e*H;j+=e*z;A+=e*W;N+=e*B;P+=e*K;x+=e*J;$+=e*Z;T+=e*Q;e=n[13];b+=e*U;m+=e*D;g+=e*k;_+=e*L;E+=e*q;O+=e*V;S+=e*F;I+=e*G;j+=e*H;A+=e*z;N+=e*W;P+=e*B;x+=e*K;$+=e*J;T+=e*Z;M+=e*Q;e=n[14];m+=e*U;g+=e*D;_+=e*k;E+=e*L;O+=e*q;S+=e*V;I+=e*F;j+=e*G;A+=e*H;N+=e*z;P+=e*W;x+=e*B;$+=e*K;T+=e*J;M+=e*Z;C+=e*Q;e=n[15];g+=e*U;_+=e*D;E+=e*k;O+=e*L;S+=e*q;I+=e*V;j+=e*F;A+=e*G;N+=e*H;P+=e*z;x+=e*W;$+=e*B;T+=e*K;M+=e*J;C+=e*Z;R+=e*Q;s+=38*_;o+=38*E;a+=38*O;u+=38*S;c+=38*I;h+=38*j;f+=38*A;l+=38*N;d+=38*P;v+=38*x;p+=38*$;w+=38*T;y+=38*M;b+=38*C;m+=38*R;i=1;e=s+i+65535;i=Math.floor(e/65536);s=e-i*65536;e=o+i+65535;i=Math.floor(e/65536);o=e-i*65536;e=a+i+65535;i=Math.floor(e/65536);a=e-i*65536;e=u+i+65535;i=Math.floor(e/65536);u=e-i*65536;e=c+i+65535;i=Math.floor(e/65536);c=e-i*65536;e=h+i+65535;i=Math.floor(e/65536);h=e-i*65536;e=f+i+65535;i=Math.floor(e/65536);f=e-i*65536;e=l+i+65535;i=Math.floor(e/65536);l=e-i*65536;e=d+i+65535;i=Math.floor(e/65536);d=e-i*65536;e=v+i+65535;i=Math.floor(e/65536);v=e-i*65536;e=p+i+65535;i=Math.floor(e/65536);p=e-i*65536;e=w+i+65535;i=Math.floor(e/65536);w=e-i*65536;e=y+i+65535;i=Math.floor(e/65536);y=e-i*65536;e=b+i+65535;i=Math.floor(e/65536);b=e-i*65536;e=m+i+65535;i=Math.floor(e/65536);m=e-i*65536;e=g+i+65535;i=Math.floor(e/65536);g=e-i*65536;s+=i-1+37*(i-1);i=1;e=s+i+65535;i=Math.floor(e/65536);s=e-i*65536;e=o+i+65535;i=Math.floor(e/65536);o=e-i*65536;e=a+i+65535;i=Math.floor(e/65536);a=e-i*65536;e=u+i+65535;i=Math.floor(e/65536);u=e-i*65536;e=c+i+65535;i=Math.floor(e/65536);c=e-i*65536;e=h+i+65535;i=Math.floor(e/65536);h=e-i*65536;e=f+i+65535;i=Math.floor(e/65536);f=e-i*65536;e=l+i+65535;i=Math.floor(e/65536);l=e-i*65536;e=d+i+65535;i=Math.floor(e/65536);d=e-i*65536;e=v+i+65535;i=Math.floor(e/65536);v=e-i*65536;e=p+i+65535;i=Math.floor(e/65536);p=e-i*65536;e=w+i+65535;i=Math.floor(e/65536);w=e-i*65536;e=y+i+65535;i=Math.floor(e/65536);y=e-i*65536;e=b+i+65535;i=Math.floor(e/65536);b=e-i*65536;e=m+i+65535;i=Math.floor(e/65536);m=e-i*65536;e=g+i+65535;i=Math.floor(e/65536);g=e-i*65536;s+=i-1+37*(i-1);t[0]=s;t[1]=o;t[2]=a;t[3]=u;t[4]=c;t[5]=h;t[6]=f;t[7]=l;t[8]=d;t[9]=v;t[10]=p;t[11]=w;t[12]=y;t[13]=b;t[14]=m;t[15]=g}function S(t,n){O(t,n,n)}function I(t,n){const r=i();let e;for(e=0;e<16;e++){r[e]=n[e]}for(e=253;e>=0;e--){S(r,r);if(e!==2&&e!==4){O(r,r,n)}}for(e=0;e<16;e++){t[e]=r[e]}}function j(t,n){const r=i();let e;for(e=0;e<16;e++){r[e]=n[e]}for(e=250;e>=0;e--){S(r,r);if(e!==1){O(r,r,n)}}for(e=0;e<16;e++){t[e]=r[e]}}function A(t,n){const r=i(),e=i(),s=i(),o=i(),a=i(),u=i(),h=i(),f=i(),l=i();E(r,t[1],t[0]);E(l,n[1],n[0]);O(r,r,l);_(e,t[0],t[1]);_(l,n[0],n[1]);O(e,e,l);O(s,t[3],n[3]);O(s,s,c);O(o,t[2],n[2]);_(o,o,o);E(a,e,r);E(u,o,s);_(h,o,s);_(f,e,r);O(t[0],a,u);O(t[1],f,h);O(t[2],h,u);O(t[3],a,f)}function N(t,n,r){for(let e=0;e<4;e++){p(t[e],n[e],r)}}function P(t,n){const r=i(),e=i(),s=i();I(s,n[2]);O(r,n[0],s);O(e,n[1],s);w(t,e);t[31]^=m(r)<<7}function x(t,n,r){d(t[0],o);d(t[1],a);d(t[2],a);d(t[3],o);for(let e=255;e>=0;--e){const i=r[e/8|0]>>(e&7)&1;N(t,n,i);A(n,t);A(t,t);N(t,n,i)}}function $(t,n){const r=[i(),i(),i(),i()];d(r[0],h);d(r[1],f);d(r[2],a);O(r[3],h,f);x(t,r,n)}function T(n){if(n.length!==t.SEED_LENGTH){throw new Error(`ed25519: seed must be ${t.SEED_LENGTH} bytes`)}const e=(0,r.hash)(n);e[0]&=248;e[31]&=127;e[31]|=64;const s=new Uint8Array(32);const o=[i(),i(),i(),i()];$(o,e);P(s,o);const a=new Uint8Array(64);a.set(n);a.set(s,32);return{publicKey:s,secretKey:a}}t.generateKeyPairFromSeed=T;function M(t){const r=(0,n.randomBytes)(32,t);const i=T(r);(0,e.wipe)(r);return i}t.generateKeyPair=M;function C(n){if(n.length!==t.SECRET_KEY_LENGTH){throw new Error(`ed25519: secret key must be ${t.SECRET_KEY_LENGTH} bytes`)}return new Uint8Array(n.subarray(32))}t.extractPublicKeyFromSecretKey=C;const R=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function U(t,n){let r;let e;let i;let s;for(e=63;e>=32;--e){r=0;for(i=e-32,s=e-12;i<s;++i){n[i]+=r-16*n[e]*R[i-(e-32)];r=Math.floor((n[i]+128)/256);n[i]-=r*256}n[i]+=r;n[e]=0}r=0;for(i=0;i<32;i++){n[i]+=r-(n[31]>>4)*R[i];r=n[i]>>8;n[i]&=255}for(i=0;i<32;i++){n[i]-=r*R[i]}for(e=0;e<32;e++){n[e+1]+=n[e]>>8;t[e]=n[e]&255}}function D(t){const n=new Float64Array(64);for(let r=0;r<64;r++){n[r]=t[r]}for(let n=0;n<64;n++){t[n]=0}U(t,n)}function k(t,n){const e=new Float64Array(64);const s=[i(),i(),i(),i()];const o=(0,r.hash)(t.subarray(0,32));o[0]&=248;o[31]&=127;o[31]|=64;const a=new Uint8Array(64);a.set(o.subarray(32),32);const u=new r.SHA512;u.update(a.subarray(32));u.update(n);const c=u.digest();u.clean();D(c);$(s,c);P(a,s);u.reset();u.update(a.subarray(0,32));u.update(t.subarray(32));u.update(n);const h=u.digest();D(h);for(let t=0;t<32;t++){e[t]=c[t]}for(let t=0;t<32;t++){for(let n=0;n<32;n++){e[t+n]+=h[t]*o[n]}}U(a.subarray(32),e);return a}t.sign=k;function L(t,n){const r=i(),e=i(),s=i(),c=i(),h=i(),f=i(),v=i();d(t[2],a);g(t[1],n);S(s,t[1]);O(c,s,u);E(s,s,t[2]);_(c,t[2],c);S(h,c);S(f,h);O(v,f,h);O(r,v,s);O(r,r,c);j(r,r);O(r,r,s);O(r,r,c);O(r,r,c);O(t[0],r,c);S(e,t[0]);O(e,e,c);if(b(e,s)){O(t[0],t[0],l)}S(e,t[0]);O(e,e,c);if(b(e,s)){return-1}if(m(t[0])===n[31]>>7){E(t[0],o,t[0])}O(t[3],t[0],t[1]);return 0}function q(n,e,s){const o=new Uint8Array(32);const a=[i(),i(),i(),i()];const u=[i(),i(),i(),i()];if(s.length!==t.SIGNATURE_LENGTH){throw new Error(`ed25519: signature must be ${t.SIGNATURE_LENGTH} bytes`)}if(L(u,n)){return false}const c=new r.SHA512;c.update(s.subarray(0,32));c.update(n);c.update(e);const h=c.digest();D(h);x(a,u,h);$(u,s.subarray(32));A(a,u);P(o,a);if(y(s,o)){return false}return true}t.verify=q;function V(t){let n=[i(),i(),i(),i()];if(L(n,t)){throw new Error("Ed25519: invalid public key")}let r=i();let e=i();let s=n[1];_(r,a,s);E(e,a,s);I(e,e);O(r,r,e);let o=new Uint8Array(32);w(o,r);return o}t.convertPublicKeyToX25519=V;function F(t){const n=(0,r.hash)(t.subarray(0,32));n[0]&=248;n[31]&=127;n[31]|=64;const i=new Uint8Array(n.subarray(0,32));(0,e.wipe)(n);return i}t.convertSecretKeyToX25519=F})(sl);const al="EdDSA";const ul="JWT";const cl=".";const hl="base64url";const fl="utf8";const ll="utf8";const dl=":";const vl="did";const pl="key";const wl="base58btc";const yl="z";const bl="K36";const ml=32;var gl={};var _l={};var El={};Object.defineProperty(El,"__esModule",{value:true});function Ol(t){if(globalThis.Buffer!=null){return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}return t}El.asUint8Array=Ol;Object.defineProperty(_l,"__esModule",{value:true});var Sl=El;function Il(t=0){if(globalThis.Buffer!=null&&globalThis.Buffer.alloc!=null){return Sl.asUint8Array(globalThis.Buffer.alloc(t))}return new Uint8Array(t)}function jl(t=0){if(globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null){return Sl.asUint8Array(globalThis.Buffer.allocUnsafe(t))}return new Uint8Array(t)}_l.alloc=Il;_l.allocUnsafe=jl;Object.defineProperty(gl,"__esModule",{value:true});var Al=_l;var Nl=El;function Pl(t,n){if(!n){n=t.reduce(((t,n)=>t+n.length),0)}const r=Al.allocUnsafe(n);let e=0;for(const n of t){r.set(n,e);e+=n.length}return Nl.asUint8Array(r)}var xl=gl.concat=Pl;var $l={};var Tl=Jt;var Ml=_l;function Cl(t,n,r,e){return{name:t,prefix:n,encoder:{name:t,prefix:n,encode:r},decoder:{decode:e}}}const Rl=Cl("utf8","u",(t=>{const n=new TextDecoder("utf8");return"u"+n.decode(t)}),(t=>{const n=new TextEncoder;return n.encode(t.substring(1))}));const Ul=Cl("ascii","a",(t=>{let n="a";for(let r=0;r<t.length;r++){n+=String.fromCharCode(t[r])}return n}),(t=>{t=t.substring(1);const n=Ml.allocUnsafe(t.length);for(let r=0;r<t.length;r++){n[r]=t.charCodeAt(r)}return n}));const Dl={utf8:Rl,"utf-8":Rl,hex:Tl.bases.base16,latin1:Ul,ascii:Ul,binary:Ul,...Tl.bases};var kl=Dl;Object.defineProperty($l,"__esModule",{value:true});var Ll=kl;function ql(t,n="utf8"){const r=Ll[n];if(!r){throw new Error(`Unsupported encoding "${n}"`)}if((n==="utf8"||n==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null){return globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8")}return r.encoder.encode(t).substring(1)}var Vl=$l.toString=ql;var Fl={};Object.defineProperty(Fl,"__esModule",{value:true});var Gl=kl;var Hl=El;function zl(t,n="utf8"){const r=Gl[n];if(!r){throw new Error(`Unsupported encoding "${n}"`)}if((n==="utf8"||n==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null){return Hl.asUint8Array(globalThis.Buffer.from(t,"utf-8"))}return r.decoder.decode(`${r.prefix}${t}`)}var Wl=Fl.fromString=zl;const Bl=t=>JSON.stringify(t,((t,n)=>typeof n==="bigint"?n.toString()+"n":n));function Kl(t){return typeof t==="string"?t:Bl(t)||""}function Jl(t){return Vl(Wl(Kl(t),fl),hl)}function Zl(t){const n=Wl(bl,wl);const r=yl+Vl(xl([n,t]),wl);return[vl,pl,r].join(dl)}function Ql(t){return Vl(t,hl)}function Yl(t){return Wl([Jl(t.header),Jl(t.payload)].join(cl),ll)}function Xl(t){return[Jl(t.header),Jl(t.payload),Ql(t.signature)].join(cl)}function td(t=yt.randomBytes(ml)){return sl.generateKeyPairFromSeed(t)}async function nd(t,n,r,e,i=ds.fromMiliseconds(Date.now())){const s={alg:al,typ:ul};const o=Zl(e.publicKey);const a=i+r;const u={iss:o,sub:t,aud:n,iat:i,exp:a};const c=Yl({header:s,payload:u});const h=sl.sign(e.secretKey,c);return Xl({header:s,payload:u,signature:h})}var rd={};var ed={};Object.defineProperty(ed,"__esModule",{value:true});function id(t,n){for(let r=0;r<t.byteLength;r++){if(t[r]<n[r]){return-1}if(t[r]>n[r]){return 1}}if(t.byteLength>n.byteLength){return 1}if(t.byteLength<n.byteLength){return-1}return 0}ed.compare=id;var sd={};var od={};var ad={};Object.defineProperty(ad,"__esModule",{value:true});function ud(t){if(globalThis.Buffer!=null){return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}return t}ad.asUint8Array=ud;Object.defineProperty(od,"__esModule",{value:true});var cd=ad;function hd(t=0){if(globalThis.Buffer!=null&&globalThis.Buffer.alloc!=null){return cd.asUint8Array(globalThis.Buffer.alloc(t))}return new Uint8Array(t)}function fd(t=0){if(globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null){return cd.asUint8Array(globalThis.Buffer.allocUnsafe(t))}return new Uint8Array(t)}od.alloc=hd;od.allocUnsafe=fd;Object.defineProperty(sd,"__esModule",{value:true});var ld=od;var dd=ad;function vd(t,n){if(!n){n=t.reduce(((t,n)=>t+n.length),0)}const r=ld.allocUnsafe(n);let e=0;for(const n of t){r.set(n,e);e+=n.length}return dd.asUint8Array(r)}sd.concat=vd;var pd={};Object.defineProperty(pd,"__esModule",{value:true});function wd(t,n){if(t===n){return true}if(t.byteLength!==n.byteLength){return false}for(let r=0;r<t.byteLength;r++){if(t[r]!==n[r]){return false}}return true}pd.equals=wd;var yd={};var bd=Jt;var md=od;function gd(t,n,r,e){return{name:t,prefix:n,encoder:{name:t,prefix:n,encode:r},decoder:{decode:e}}}const _d=gd("utf8","u",(t=>{const n=new TextDecoder("utf8");return"u"+n.decode(t)}),(t=>{const n=new TextEncoder;return n.encode(t.substring(1))}));const Ed=gd("ascii","a",(t=>{let n="a";for(let r=0;r<t.length;r++){n+=String.fromCharCode(t[r])}return n}),(t=>{t=t.substring(1);const n=md.allocUnsafe(t.length);for(let r=0;r<t.length;r++){n[r]=t.charCodeAt(r)}return n}));const Od={utf8:_d,"utf-8":_d,hex:bd.bases.base16,latin1:Ed,ascii:Ed,binary:Ed,...bd.bases};var Sd=Od;Object.defineProperty(yd,"__esModule",{value:true});var Id=Sd;var jd=ad;function Ad(t,n="utf8"){const r=Id[n];if(!r){throw new Error(`Unsupported encoding "${n}"`)}if((n==="utf8"||n==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null){return jd.asUint8Array(globalThis.Buffer.from(t,"utf-8"))}return r.decoder.decode(`${r.prefix}${t}`)}yd.fromString=Ad;var Nd={};Object.defineProperty(Nd,"__esModule",{value:true});var Pd=Sd;function xd(t,n="utf8"){const r=Pd[n];if(!r){throw new Error(`Unsupported encoding "${n}"`)}if((n==="utf8"||n==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null){return globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8")}return r.encoder.encode(t).substring(1)}Nd.toString=xd;var $d={};Object.defineProperty($d,"__esModule",{value:true});var Td=od;var Md=ad;function Cd(t,n){if(t.length!==n.length){throw new Error("Inputs should have the same length")}const r=Td.allocUnsafe(t.length);for(let e=0;e<t.length;e++){r[e]=t[e]^n[e]}return Md.asUint8Array(r)}$d.xor=Cd;Object.defineProperty(rd,"__esModule",{value:true});var Rd=ed;var Ud=sd;var Dd=pd;var kd=yd;var Ld=Nd;var qd=$d;rd.compare=Rd.compare;rd.concat=Ud.concat;rd.equals=Dd.equals;rd.fromString=kd.fromString;var Vd=rd.toString=Ld.toString;rd.xor=qd.xor;const Fd="PARSE_ERROR";const Gd="INVALID_REQUEST";const Hd="METHOD_NOT_FOUND";const zd="INVALID_PARAMS";const Wd="INTERNAL_ERROR";const Bd="SERVER_ERROR";const Kd=[-32700,-32600,-32601,-32602,-32603];const Jd={[Fd]:{code:-32700,message:"Parse error"},[Gd]:{code:-32600,message:"Invalid Request"},[Hd]:{code:-32601,message:"Method not found"},[zd]:{code:-32602,message:"Invalid params"},[Wd]:{code:-32603,message:"Internal error"},[Bd]:{code:-32e3,message:"Server error"}};const Zd=Bd;function Qd(t){return Kd.includes(t)}function Yd(t){if(!Object.keys(Jd).includes(t)){return Jd[Zd]}return Jd[t]}function Xd(t){const n=Object.values(Jd).find((n=>n.code===t));if(!n){return Jd[Zd]}return n}function tv(t,n,r){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${n}`):t}var nv={};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var rv=function(t,n){rv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)if(n.hasOwnProperty(r))t[r]=n[r]};return rv(t,n)};function ev(t,n){rv(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}var iv=function(){iv=Object.assign||function t(n){for(var r,e=1,i=arguments.length;e<i;e++){r=arguments[e];for(var s in r)if(Object.prototype.hasOwnProperty.call(r,s))n[s]=r[s]}return n};return iv.apply(this,arguments)};function sv(t,n){var r={};for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e)&&n.indexOf(e)<0)r[e]=t[e];if(t!=null&&typeof Object.getOwnPropertySymbols==="function")for(var i=0,e=Object.getOwnPropertySymbols(t);i<e.length;i++){if(n.indexOf(e[i])<0&&Object.prototype.propertyIsEnumerable.call(t,e[i]))r[e[i]]=t[e[i]]}return r}function ov(t,n,r,e){var i=arguments.length,s=i<3?n:e===null?e=Object.getOwnPropertyDescriptor(n,r):e,o;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")s=Reflect.decorate(t,n,r,e);else for(var a=t.length-1;a>=0;a--)if(o=t[a])s=(i<3?o(s):i>3?o(n,r,s):o(n,r))||s;return i>3&&s&&Object.defineProperty(n,r,s),s}function av(t,n){return function(r,e){n(r,e,t)}}function uv(t,n){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(t,n)}function cv(t,n,r,e){function i(t){return t instanceof r?t:new r((function(n){n(t)}))}return new(r||(r=Promise))((function(r,s){function o(t){try{u(e.next(t))}catch(t){s(t)}}function a(t){try{u(e["throw"](t))}catch(t){s(t)}}function u(t){t.done?r(t.value):i(t.value).then(o,a)}u((e=e.apply(t,n||[])).next())}))}function hv(t,n){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},e,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol==="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(t){return function(n){return u([t,n])}}function u(o){if(e)throw new TypeError("Generator is already executing.");while(r)try{if(e=1,i&&(s=o[0]&2?i["return"]:o[0]?i["throw"]||((s=i["return"])&&s.call(i),0):i.next)&&!(s=s.call(i,o[1])).done)return s;if(i=0,s)o=[o[0]&2,s.value];switch(o[0]){case 0:case 1:s=o;break;case 4:r.label++;return{value:o[1],done:false};case 5:r.label++;i=o[1];o=[0];continue;case 7:o=r.ops.pop();r.trys.pop();continue;default:if(!(s=r.trys,s=s.length>0&&s[s.length-1])&&(o[0]===6||o[0]===2)){r=0;continue}if(o[0]===3&&(!s||o[1]>s[0]&&o[1]<s[3])){r.label=o[1];break}if(o[0]===6&&r.label<s[1]){r.label=s[1];s=o;break}if(s&&r.label<s[2]){r.label=s[2];r.ops.push(o);break}if(s[2])r.ops.pop();r.trys.pop();continue}o=n.call(t,r)}catch(t){o=[6,t];i=0}finally{e=s=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:true}}}function fv(t,n,r,e){if(e===undefined)e=r;t[e]=n[r]}function lv(t,n){for(var r in t)if(r!=="default"&&!n.hasOwnProperty(r))n[r]=t[r]}function dv(t){var n=typeof Symbol==="function"&&Symbol.iterator,r=n&&t[n],e=0;if(r)return r.call(t);if(t&&typeof t.length==="number")return{next:function(){if(t&&e>=t.length)t=void 0;return{value:t&&t[e++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function vv(t,n){var r=typeof Symbol==="function"&&t[Symbol.iterator];if(!r)return t;var e=r.call(t),i,s=[],o;try{while((n===void 0||n-- >0)&&!(i=e.next()).done)s.push(i.value)}catch(t){o={error:t}}finally{try{if(i&&!i.done&&(r=e["return"]))r.call(e)}finally{if(o)throw o.error}}return s}function pv(){for(var t=[],n=0;n<arguments.length;n++)t=t.concat(vv(arguments[n]));return t}function wv(){for(var t=0,n=0,r=arguments.length;n<r;n++)t+=arguments[n].length;for(var e=Array(t),i=0,n=0;n<r;n++)for(var s=arguments[n],o=0,a=s.length;o<a;o++,i++)e[i]=s[o];return e}function yv(t){return this instanceof yv?(this.v=t,this):new yv(t)}function bv(t,n,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r.apply(t,n||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(t){if(e[t])i[t]=function(n){return new Promise((function(r,e){s.push([t,n,r,e])>1||a(t,n)}))}}function a(t,n){try{u(e[t](n))}catch(t){f(s[0][3],t)}}function u(t){t.value instanceof yv?Promise.resolve(t.value.v).then(c,h):f(s[0][2],t)}function c(t){a("next",t)}function h(t){a("throw",t)}function f(t,n){if(t(n),s.shift(),s.length)a(s[0][0],s[0][1])}}function mv(t){var n,r;return n={},e("next"),e("throw",(function(t){throw t})),e("return"),n[Symbol.iterator]=function(){return this},n;function e(e,i){n[e]=t[e]?function(n){return(r=!r)?{value:yv(t[e](n)),done:e==="return"}:i?i(n):n}:i}}function gv(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t[Symbol.asyncIterator],r;return n?n.call(t):(t=typeof dv==="function"?dv(t):t[Symbol.iterator](),r={},e("next"),e("throw"),e("return"),r[Symbol.asyncIterator]=function(){return this},r);function e(n){r[n]=t[n]&&function(r){return new Promise((function(e,s){r=t[n](r),i(e,s,r.done,r.value)}))}}function i(t,n,r,e){Promise.resolve(e).then((function(n){t({value:n,done:r})}),n)}}function _v(t,n){if(Object.defineProperty){Object.defineProperty(t,"raw",{value:n})}else{t.raw=n}return t}function Ev(t){if(t&&t.__esModule)return t;var n={};if(t!=null)for(var r in t)if(Object.hasOwnProperty.call(t,r))n[r]=t[r];n.default=t;return n}function Ov(t){return t&&t.__esModule?t:{default:t}}function Sv(t,n){if(!n.has(t)){throw new TypeError("attempted to get private field on non-instance")}return n.get(t)}function Iv(t,n,r){if(!n.has(t)){throw new TypeError("attempted to set private field on non-instance")}n.set(t,r);return r}const jv=Object.freeze({__proto__:null,__extends:ev,get __assign(){return iv},__rest:sv,__decorate:ov,__param:av,__metadata:uv,__awaiter:cv,__generator:hv,__createBinding:fv,__exportStar:lv,__values:dv,__read:vv,__spread:pv,__spreadArrays:wv,__await:yv,__asyncGenerator:bv,__asyncDelegator:mv,__asyncValues:gv,__makeTemplateObject:_v,__importStar:Ev,__importDefault:Ov,__classPrivateFieldGet:Sv,__classPrivateFieldSet:Iv});const Av=e(jv);var Nv={};Object.defineProperty(Nv,"__esModule",{value:true});Nv.isBrowserCryptoAvailable=Nv.getSubtleCrypto=Nv.getBrowerCrypto=void 0;function Pv(){return(o===null||o===void 0?void 0:o.crypto)||(o===null||o===void 0?void 0:o.msCrypto)||{}}Nv.getBrowerCrypto=Pv;function xv(){const t=Pv();return t.subtle||t.webkitSubtle}Nv.getSubtleCrypto=xv;function $v(){return!!Pv()&&!!xv()}Nv.isBrowserCryptoAvailable=$v;var Tv={};Object.defineProperty(Tv,"__esModule",{value:true});Tv.isBrowser=Tv.isNode=Tv.isReactNative=void 0;function Mv(){return typeof document==="undefined"&&typeof navigator!=="undefined"&&navigator.product==="ReactNative"}Tv.isReactNative=Mv;function Cv(){return typeof r!=="undefined"&&typeof r.versions!=="undefined"&&typeof r.versions.node!=="undefined"}Tv.isNode=Cv;function Rv(){return!Mv()&&!Cv()}Tv.isBrowser=Rv;(function(t){Object.defineProperty(t,"__esModule",{value:true});const n=Av;n.__exportStar(Nv,t);n.__exportStar(Tv,t)})(nv);function Uv(t=3){const n=Date.now()*Math.pow(10,t);const r=Math.floor(Math.random()*Math.pow(10,t));return n+r}function Dv(t=6){return BigInt(Uv(t))}function kv(t,n,r){return{id:r||Uv(),jsonrpc:"2.0",method:t,params:n}}function Lv(t,n){return{id:t,jsonrpc:"2.0",result:n}}function qv(t,n,r){return{id:t,jsonrpc:"2.0",error:Vv(n,r)}}function Vv(t,n){if(typeof t==="undefined"){return Yd(Wd)}if(typeof t==="string"){t=Object.assign(Object.assign({},Yd(Bd)),{message:t})}if(typeof n!=="undefined"){t.data=n}if(Qd(t.code)){t=Xd(t.code)}return t}class Fv{}class Gv extends Fv{constructor(){super()}}class Hv extends Gv{constructor(t){super()}}const zv="^https?:";const Wv="^wss?:";function Bv(t){const n=t.match(new RegExp(/^\w+:/,"gi"));if(!n||!n.length)return;return n[0]}function Kv(t,n){const r=Bv(t);if(typeof r==="undefined")return false;return new RegExp(n).test(r)}function Jv(t){return Kv(t,zv)}function Zv(t){return Kv(t,Wv)}function Qv(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function Yv(t){return typeof t==="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function Xv(t){return Yv(t)&&"method"in t}function tp(t){return Yv(t)&&(np(t)||rp(t))}function np(t){return"result"in t}function rp(t){return"error"in t}class ep extends Hv{constructor(n){super(n);this.events=new t.exports.EventEmitter;this.hasRegisteredEventListeners=false;this.connection=this.setConnection(n);if(this.connection.connected){this.registerEventListeners()}}async connect(t=this.connection){await this.open(t)}async disconnect(){await this.close()}on(t,n){this.events.on(t,n)}once(t,n){this.events.once(t,n)}off(t,n){this.events.off(t,n)}removeListener(t,n){this.events.removeListener(t,n)}async request(t,n){return this.requestStrict(kv(t.method,t.params||[],t.id||Dv().toString()),n)}async requestStrict(t,n){return new Promise((async(r,e)=>{if(!this.connection.connected){try{await this.open()}catch(t){e(t)}}this.events.on(`${t.id}`,(t=>{if(rp(t)){e(t.error)}else{r(t.result)}}));try{await this.connection.send(t,n)}catch(t){e(t)}}))}setConnection(t=this.connection){return t}onPayload(t){this.events.emit("payload",t);if(tp(t)){this.events.emit(`${t.id}`,t)}else{this.events.emit("message",{type:t.method,data:t.params})}}onClose(t){if(t&&t.code===3e3){this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${t.code} ${t.reason?`(${t.reason})`:""}`))}this.events.emit("disconnect")}async open(t=this.connection){if(this.connection===t&&this.connection.connected)return;if(this.connection.connected)this.close();if(typeof t==="string"){await this.connection.open(t);t=this.connection}this.connection=this.setConnection(t);await this.connection.open();this.registerEventListeners();this.events.emit("connect")}async close(){await this.connection.close()}registerEventListeners(){if(this.hasRegisteredEventListeners)return;this.connection.on("payload",(t=>this.onPayload(t)));this.connection.on("close",(t=>this.onClose(t)));this.connection.on("error",(t=>this.events.emit("error",t)));this.connection.on("register_error",(t=>this.onClose()));this.hasRegisteredEventListeners=true}}const ip=t=>JSON.stringify(t,((t,n)=>typeof n==="bigint"?n.toString()+"n":n));const sp=t=>{const n=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g;const r=t.replace(n,'$1"$2n"$3');return JSON.parse(r,((t,n)=>{const r=typeof n==="string"&&n.match(/^\d+n$/);if(r)return BigInt(n.substring(0,n.length-1));return n}))};function op(t){if(typeof t!=="string"){throw new Error(`Cannot safe json parse value of type ${typeof t}`)}try{return sp(t)}catch(n){return t}}function ap(t){return typeof t==="string"?t:ip(t)||""}const up=()=>{if(typeof WebSocket!=="undefined"){return WebSocket}else if(typeof s!=="undefined"&&typeof s.WebSocket!=="undefined"){return s.WebSocket}else if(typeof window!=="undefined"&&typeof window.WebSocket!=="undefined"){return window.WebSocket}else if(typeof self!=="undefined"&&typeof self.WebSocket!=="undefined"){return self.WebSocket}return require("ws")};const cp=()=>typeof WebSocket!=="undefined"||typeof s!=="undefined"&&typeof s.WebSocket!=="undefined"||typeof window!=="undefined"&&typeof window.WebSocket!=="undefined"||typeof self!=="undefined"&&typeof self.WebSocket!=="undefined";const hp=t=>t.split("?")[0];const fp=10;const lp=up();class dp{constructor(n){this.url=n;this.events=new t.exports.EventEmitter;this.registering=false;if(!Zv(n)){throw new Error(`Provided URL is not compatible with WebSocket connection: ${n}`)}this.url=n}get connected(){return typeof this.socket!=="undefined"}get connecting(){return this.registering}on(t,n){this.events.on(t,n)}once(t,n){this.events.once(t,n)}off(t,n){this.events.off(t,n)}removeListener(t,n){this.events.removeListener(t,n)}async open(t=this.url){await this.register(t)}async close(){return new Promise(((t,n)=>{if(typeof this.socket==="undefined"){n(new Error("Connection already closed"));return}this.socket.onclose=n=>{this.onClose(n);t()};this.socket.close()}))}async send(t,n){if(typeof this.socket==="undefined"){this.socket=await this.register()}try{this.socket.send(ap(t))}catch(n){this.onError(t.id,n)}}register(t=this.url){if(!Zv(t)){throw new Error(`Provided URL is not compatible with WebSocket connection: ${t}`)}if(this.registering){const t=this.events.getMaxListeners();if(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t){this.events.setMaxListeners(t+1)}return new Promise(((t,n)=>{this.events.once("register_error",(t=>{this.resetMaxListeners();n(t)}));this.events.once("open",(()=>{this.resetMaxListeners();if(typeof this.socket==="undefined"){return n(new Error("WebSocket connection is missing or invalid"))}t(this.socket)}))}))}this.url=t;this.registering=true;return new Promise(((n,r)=>{const e=!nv.isReactNative()?{rejectUnauthorized:!Qv(t)}:undefined;const i=new lp(t,[],e);if(cp()){i.onerror=t=>{const n=t;r(this.emitError(n.error))}}else{i.on("error",(t=>{r(this.emitError(t))}))}i.onopen=()=>{this.onOpen(i);n(i)}}))}onOpen(t){t.onmessage=t=>this.onPayload(t);t.onclose=t=>this.onClose(t);this.socket=t;this.registering=false;this.events.emit("open")}onClose(t){this.socket=undefined;this.registering=false;this.events.emit("close",t)}onPayload(t){if(typeof t.data==="undefined")return;const n=typeof t.data==="string"?op(t.data):t.data;this.events.emit("payload",n)}onError(t,n){const r=this.parseError(n);const e=r.message||r.toString();const i=qv(t,e);this.events.emit("payload",i)}parseError(t,n=this.url){return tv(t,hp(n),"WS")}resetMaxListeners(){if(this.events.getMaxListeners()>fp){this.events.setMaxListeners(fp)}}emitError(t){const n=this.parseError(new Error((t===null||t===void 0?void 0:t.message)||`WebSocket connection failed for host: ${hp(this.url)}`));this.events.emit("register_error",n);return n}}var vp={exports:{}};(function(t,n){var r=200;var e="__lodash_hash_undefined__";var i=1,s=2;var a=9007199254740991;var u="[object Arguments]",c="[object Array]",h="[object AsyncFunction]",f="[object Boolean]",l="[object Date]",d="[object Error]",v="[object Function]",p="[object GeneratorFunction]",w="[object Map]",y="[object Number]",b="[object Null]",m="[object Object]",g="[object Promise]",_="[object Proxy]",E="[object RegExp]",O="[object Set]",S="[object String]",I="[object Symbol]",j="[object Undefined]",A="[object WeakMap]";var N="[object ArrayBuffer]",P="[object DataView]",x="[object Float32Array]",$="[object Float64Array]",T="[object Int8Array]",M="[object Int16Array]",C="[object Int32Array]",R="[object Uint8Array]",U="[object Uint8ClampedArray]",D="[object Uint16Array]",k="[object Uint32Array]";var L=/[\\^$.*+?()[\]{}|]/g;var q=/^\[object .+?Constructor\]$/;var V=/^(?:0|[1-9]\d*)$/;var F={};F[x]=F[$]=F[T]=F[M]=F[C]=F[R]=F[U]=F[D]=F[k]=true;F[u]=F[c]=F[N]=F[f]=F[P]=F[l]=F[d]=F[v]=F[w]=F[y]=F[m]=F[E]=F[O]=F[S]=F[A]=false;var G=typeof o=="object"&&o&&o.Object===Object&&o;var H=typeof self=="object"&&self&&self.Object===Object&&self;var z=G||H||Function("return this")();var W=n&&!n.nodeType&&n;var B=W&&"object"=="object"&&t&&!t.nodeType&&t;var K=B&&B.exports===W;var J=K&&G.process;var Z=function(){try{return J&&J.binding&&J.binding("util")}catch(t){}}();var Q=Z&&Z.isTypedArray;function Y(t,n){var r=-1,e=t==null?0:t.length,i=0,s=[];while(++r<e){var o=t[r];if(n(o,r,t)){s[i++]=o}}return s}function X(t,n){var r=-1,e=n.length,i=t.length;while(++r<e){t[i+r]=n[r]}return t}function tt(t,n){var r=-1,e=t==null?0:t.length;while(++r<e){if(n(t[r],r,t)){return true}}return false}function nt(t,n){var r=-1,e=Array(t);while(++r<t){e[r]=n(r)}return e}function rt(t){return function(n){return t(n)}}function et(t,n){return t.has(n)}function it(t,n){return t==null?undefined:t[n]}function st(t){var n=-1,r=Array(t.size);t.forEach((function(t,e){r[++n]=[e,t]}));return r}function ot(t,n){return function(r){return t(n(r))}}function at(t){var n=-1,r=Array(t.size);t.forEach((function(t){r[++n]=t}));return r}var ut=Array.prototype,ct=Function.prototype,ht=Object.prototype;var ft=z["__core-js_shared__"];var lt=ct.toString;var dt=ht.hasOwnProperty;var vt=function(){var t=/[^.]+$/.exec(ft&&ft.keys&&ft.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();var pt=ht.toString;var wt=RegExp("^"+lt.call(dt).replace(L,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var yt=K?z.Buffer:undefined,bt=z.Symbol,mt=z.Uint8Array,gt=ht.propertyIsEnumerable,_t=ut.splice,Et=bt?bt.toStringTag:undefined;var Ot=Object.getOwnPropertySymbols,St=yt?yt.isBuffer:undefined,It=ot(Object.keys,Object);var jt=Nn(z,"DataView"),At=Nn(z,"Map"),Nt=Nn(z,"Promise"),Pt=Nn(z,"Set"),xt=Nn(z,"WeakMap"),$t=Nn(Object,"create");var Tt=Dn(jt),Mt=Dn(At),Ct=Dn(Nt),Rt=Dn(Pt),Ut=Dn(xt);var Dt=bt?bt.prototype:undefined,kt=Dt?Dt.valueOf:undefined;function Lt(t){var n=-1,r=t==null?0:t.length;this.clear();while(++n<r){var e=t[n];this.set(e[0],e[1])}}function qt(){this.__data__=$t?$t(null):{};this.size=0}function Vt(t){var n=this.has(t)&&delete this.__data__[t];this.size-=n?1:0;return n}function Ft(t){var n=this.__data__;if($t){var r=n[t];return r===e?undefined:r}return dt.call(n,t)?n[t]:undefined}function Gt(t){var n=this.__data__;return $t?n[t]!==undefined:dt.call(n,t)}function Ht(t,n){var r=this.__data__;this.size+=this.has(t)?0:1;r[t]=$t&&n===undefined?e:n;return this}Lt.prototype.clear=qt;Lt.prototype["delete"]=Vt;Lt.prototype.get=Ft;Lt.prototype.has=Gt;Lt.prototype.set=Ht;function zt(t){var n=-1,r=t==null?0:t.length;this.clear();while(++n<r){var e=t[n];this.set(e[0],e[1])}}function Wt(){this.__data__=[];this.size=0}function Bt(t){var n=this.__data__,r=vn(n,t);if(r<0){return false}var e=n.length-1;if(r==e){n.pop()}else{_t.call(n,r,1)}--this.size;return true}function Kt(t){var n=this.__data__,r=vn(n,t);return r<0?undefined:n[r][1]}function Jt(t){return vn(this.__data__,t)>-1}function Zt(t,n){var r=this.__data__,e=vn(r,t);if(e<0){++this.size;r.push([t,n])}else{r[e][1]=n}return this}zt.prototype.clear=Wt;zt.prototype["delete"]=Bt;zt.prototype.get=Kt;zt.prototype.has=Jt;zt.prototype.set=Zt;function Qt(t){var n=-1,r=t==null?0:t.length;this.clear();while(++n<r){var e=t[n];this.set(e[0],e[1])}}function Yt(){this.size=0;this.__data__={hash:new Lt,map:new(At||zt),string:new Lt}}function Xt(t){var n=An(this,t)["delete"](t);this.size-=n?1:0;return n}function tn(t){return An(this,t).get(t)}function nn(t){return An(this,t).has(t)}function rn(t,n){var r=An(this,t),e=r.size;r.set(t,n);this.size+=r.size==e?0:1;return this}Qt.prototype.clear=Yt;Qt.prototype["delete"]=Xt;Qt.prototype.get=tn;Qt.prototype.has=nn;Qt.prototype.set=rn;function en(t){var n=-1,r=t==null?0:t.length;this.__data__=new Qt;while(++n<r){this.add(t[n])}}function sn(t){this.__data__.set(t,e);return this}function on(t){return this.__data__.has(t)}en.prototype.add=en.prototype.push=sn;en.prototype.has=on;function an(t){var n=this.__data__=new zt(t);this.size=n.size}function un(){this.__data__=new zt;this.size=0}function cn(t){var n=this.__data__,r=n["delete"](t);this.size=n.size;return r}function hn(t){return this.__data__.get(t)}function fn(t){return this.__data__.has(t)}function ln(t,n){var e=this.__data__;if(e instanceof zt){var i=e.__data__;if(!At||i.length<r-1){i.push([t,n]);this.size=++e.size;return this}e=this.__data__=new Qt(i)}e.set(t,n);this.size=e.size;return this}an.prototype.clear=un;an.prototype["delete"]=cn;an.prototype.get=hn;an.prototype.has=fn;an.prototype.set=ln;function dn(t,n){var r=qn(t),e=!r&&Ln(t),i=!r&&!e&&Fn(t),s=!r&&!e&&!i&&Kn(t),o=r||e||i||s,a=o?nt(t.length,String):[],u=a.length;for(var c in t){if((n||dt.call(t,c))&&!(o&&(c=="length"||i&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||Tn(c,u)))){a.push(c)}}return a}function vn(t,n){var r=t.length;while(r--){if(kn(t[r][0],n)){return r}}return-1}function pn(t,n,r){var e=n(t);return qn(t)?e:X(e,r(t))}function wn(t){if(t==null){return t===undefined?j:b}return Et&&Et in Object(t)?Pn(t):Un(t)}function yn(t){return Bn(t)&&wn(t)==u}function bn(t,n,r,e,i){if(t===n){return true}if(t==null||n==null||!Bn(t)&&!Bn(n)){return t!==t&&n!==n}return mn(t,n,r,e,bn,i)}function mn(t,n,r,e,s,o){var a=qn(t),h=qn(n),f=a?c:$n(t),l=h?c:$n(n);f=f==u?m:f;l=l==u?m:l;var d=f==m,v=l==m,p=f==l;if(p&&Fn(t)){if(!Fn(n)){return false}a=true;d=false}if(p&&!d){o||(o=new an);return a||Kn(t)?On(t,n,r,e,s,o):Sn(t,n,f,r,e,s,o)}if(!(r&i)){var w=d&&dt.call(t,"__wrapped__"),y=v&&dt.call(n,"__wrapped__");if(w||y){var b=w?t.value():t,g=y?n.value():n;o||(o=new an);return s(b,g,r,e,o)}}if(!p){return false}o||(o=new an);return In(t,n,r,e,s,o)}function gn(t){if(!Wn(t)||Cn(t)){return false}var n=Hn(t)?wt:q;return n.test(Dn(t))}function _n(t){return Bn(t)&&zn(t.length)&&!!F[wn(t)]}function En(t){if(!Rn(t)){return It(t)}var n=[];for(var r in Object(t)){if(dt.call(t,r)&&r!="constructor"){n.push(r)}}return n}function On(t,n,r,e,o,a){var u=r&i,c=t.length,h=n.length;if(c!=h&&!(u&&h>c)){return false}var f=a.get(t);if(f&&a.get(n)){return f==n}var l=-1,d=true,v=r&s?new en:undefined;a.set(t,n);a.set(n,t);while(++l<c){var p=t[l],w=n[l];if(e){var y=u?e(w,p,l,n,t,a):e(p,w,l,t,n,a)}if(y!==undefined){if(y){continue}d=false;break}if(v){if(!tt(n,(function(t,n){if(!et(v,n)&&(p===t||o(p,t,r,e,a))){return v.push(n)}}))){d=false;break}}else if(!(p===w||o(p,w,r,e,a))){d=false;break}}a["delete"](t);a["delete"](n);return d}function Sn(t,n,r,e,o,a,u){switch(r){case P:if(t.byteLength!=n.byteLength||t.byteOffset!=n.byteOffset){return false}t=t.buffer;n=n.buffer;case N:if(t.byteLength!=n.byteLength||!a(new mt(t),new mt(n))){return false}return true;case f:case l:case y:return kn(+t,+n);case d:return t.name==n.name&&t.message==n.message;case E:case S:return t==n+"";case w:var c=st;case O:var h=e&i;c||(c=at);if(t.size!=n.size&&!h){return false}var v=u.get(t);if(v){return v==n}e|=s;u.set(t,n);var p=On(c(t),c(n),e,o,a,u);u["delete"](t);return p;case I:if(kt){return kt.call(t)==kt.call(n)}}return false}function In(t,n,r,e,s,o){var a=r&i,u=jn(t),c=u.length,h=jn(n),f=h.length;if(c!=f&&!a){return false}var l=c;while(l--){var d=u[l];if(!(a?d in n:dt.call(n,d))){return false}}var v=o.get(t);if(v&&o.get(n)){return v==n}var p=true;o.set(t,n);o.set(n,t);var w=a;while(++l<c){d=u[l];var y=t[d],b=n[d];if(e){var m=a?e(b,y,d,n,t,o):e(y,b,d,t,n,o)}if(!(m===undefined?y===b||s(y,b,r,e,o):m)){p=false;break}w||(w=d=="constructor")}if(p&&!w){var g=t.constructor,_=n.constructor;if(g!=_&&("constructor"in t&&"constructor"in n)&&!(typeof g=="function"&&g instanceof g&&typeof _=="function"&&_ instanceof _)){p=false}}o["delete"](t);o["delete"](n);return p}function jn(t){return pn(t,Jn,xn)}function An(t,n){var r=t.__data__;return Mn(n)?r[typeof n=="string"?"string":"hash"]:r.map}function Nn(t,n){var r=it(t,n);return gn(r)?r:undefined}function Pn(t){var n=dt.call(t,Et),r=t[Et];try{t[Et]=undefined;var e=true}catch(t){}var i=pt.call(t);if(e){if(n){t[Et]=r}else{delete t[Et]}}return i}var xn=!Ot?Zn:function(t){if(t==null){return[]}t=Object(t);return Y(Ot(t),(function(n){return gt.call(t,n)}))};var $n=wn;if(jt&&$n(new jt(new ArrayBuffer(1)))!=P||At&&$n(new At)!=w||Nt&&$n(Nt.resolve())!=g||Pt&&$n(new Pt)!=O||xt&&$n(new xt)!=A){$n=function(t){var n=wn(t),r=n==m?t.constructor:undefined,e=r?Dn(r):"";if(e){switch(e){case Tt:return P;case Mt:return w;case Ct:return g;case Rt:return O;case Ut:return A}}return n}}function Tn(t,n){n=n==null?a:n;return!!n&&(typeof t=="number"||V.test(t))&&(t>-1&&t%1==0&&t<n)}function Mn(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}function Cn(t){return!!vt&&vt in t}function Rn(t){var n=t&&t.constructor,r=typeof n=="function"&&n.prototype||ht;return t===r}function Un(t){return pt.call(t)}function Dn(t){if(t!=null){try{return lt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function kn(t,n){return t===n||t!==t&&n!==n}var Ln=yn(function(){return arguments}())?yn:function(t){return Bn(t)&&dt.call(t,"callee")&&!gt.call(t,"callee")};var qn=Array.isArray;function Vn(t){return t!=null&&zn(t.length)&&!Hn(t)}var Fn=St||Qn;function Gn(t,n){return bn(t,n)}function Hn(t){if(!Wn(t)){return false}var n=wn(t);return n==v||n==p||n==h||n==_}function zn(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=a}function Wn(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}function Bn(t){return t!=null&&typeof t=="object"}var Kn=Q?rt(Q):_n;function Jn(t){return Vn(t)?dn(t):En(t)}function Zn(){return[]}function Qn(){return false}t.exports=Gn})(vp,vp.exports);const pp=vp.exports;function wp(t,n){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),e=0;e<r.length;e++)r[e]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var a=t.length,u=t.charAt(0),c=Math.log(a)/Math.log(256),h=Math.log(256)/Math.log(a);function f(n){if(n instanceof Uint8Array||(ArrayBuffer.isView(n)?n=new Uint8Array(n.buffer,n.byteOffset,n.byteLength):Array.isArray(n)&&(n=Uint8Array.from(n))),!(n instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(n.length===0)return"";for(var r=0,e=0,i=0,s=n.length;i!==s&&n[i]===0;)i++,r++;for(var o=(s-i)*h+1>>>0,c=new Uint8Array(o);i!==s;){for(var f=n[i],l=0,d=o-1;(f!==0||l<e)&&d!==-1;d--,l++)f+=256*c[d]>>>0,c[d]=f%a>>>0,f=f/a>>>0;if(f!==0)throw new Error("Non-zero carry");e=l,i++}for(var v=o-e;v!==o&&c[v]===0;)v++;for(var p=u.repeat(r);v<o;++v)p+=t.charAt(c[v]);return p}function l(t){if(typeof t!="string")throw new TypeError("Expected String");if(t.length===0)return new Uint8Array;var n=0;if(t[n]!==" "){for(var e=0,i=0;t[n]===u;)e++,n++;for(var s=(t.length-n)*c+1>>>0,o=new Uint8Array(s);t[n];){var h=r[t.charCodeAt(n)];if(h===255)return;for(var f=0,l=s-1;(h!==0||f<i)&&l!==-1;l--,f++)h+=a*o[l]>>>0,o[l]=h%256>>>0,h=h/256>>>0;if(h!==0)throw new Error("Non-zero carry");i=f,n++}if(t[n]!==" "){for(var d=s-i;d!==s&&o[d]===0;)d++;for(var v=new Uint8Array(e+(s-d)),p=e;d!==s;)v[p++]=o[d++];return v}}}function d(t){var r=l(t);if(r)return r;throw new Error(`Non-${n} character`)}return{encode:f,decodeUnsafe:l,decode:d}}var yp=wp,bp=yp;const mp=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},gp=t=>(new TextEncoder).encode(t),_p=t=>(new TextDecoder).decode(t);class Ep{constructor(t,n,r){this.name=t,this.prefix=n,this.baseEncode=r}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class Op{constructor(t,n,r){if(this.name=t,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return Ip(this,t)}}class Sp{constructor(t){this.decoders=t}or(t){return Ip(this,t)}decode(t){const n=t[0],r=this.decoders[n];if(r)return r.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Ip=(t,n)=>new Sp({...t.decoders||{[t.prefix]:t},...n.decoders||{[n.prefix]:n}});class jp{constructor(t,n,r,e){this.name=t,this.prefix=n,this.baseEncode=r,this.baseDecode=e,this.encoder=new Ep(t,n,r),this.decoder=new Op(t,n,e)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const Ap=({name:t,prefix:n,encode:r,decode:e})=>new jp(t,n,r,e),Np=({prefix:t,name:n,alphabet:r})=>{const{encode:e,decode:i}=bp(r,n);return Ap({prefix:t,name:n,encode:e,decode:t=>mp(i(t))})},Pp=(t,n,r,e)=>{const i={};for(let t=0;t<n.length;++t)i[n[t]]=t;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let a=0,u=0,c=0;for(let n=0;n<s;++n){const s=i[t[n]];if(s===void 0)throw new SyntaxError(`Non-${e} character`);u=u<<r|s,a+=r,a>=8&&(a-=8,o[c++]=255&u>>a)}if(a>=r||255&u<<8-a)throw new SyntaxError("Unexpected end of data");return o},xp=(t,n,r)=>{const e=n[n.length-1]==="=",i=(1<<r)-1;let s="",o=0,a=0;for(let e=0;e<t.length;++e)for(a=a<<8|t[e],o+=8;o>r;)o-=r,s+=n[i&a>>o];if(o&&(s+=n[i&a<<r-o]),e)for(;s.length*r&7;)s+="=";return s},$p=({name:t,prefix:n,bitsPerChar:r,alphabet:e})=>Ap({prefix:n,name:t,encode(t){return xp(t,e,r)},decode(n){return Pp(n,e,r,t)}}),Tp=Ap({prefix:"\0",name:"identity",encode:t=>_p(t),decode:t=>gp(t)});var Mp=Object.freeze({__proto__:null,identity:Tp});const Cp=$p({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Rp=Object.freeze({__proto__:null,base2:Cp});const Up=$p({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Dp=Object.freeze({__proto__:null,base8:Up});const kp=Np({prefix:"9",name:"base10",alphabet:"0123456789"});var Lp=Object.freeze({__proto__:null,base10:kp});const qp=$p({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Vp=$p({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Fp=Object.freeze({__proto__:null,base16:qp,base16upper:Vp});const Gp=$p({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Hp=$p({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),zp=$p({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Wp=$p({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Bp=$p({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Kp=$p({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Jp=$p({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Zp=$p({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Qp=$p({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Yp=Object.freeze({__proto__:null,base32:Gp,base32upper:Hp,base32pad:zp,base32padupper:Wp,base32hex:Bp,base32hexupper:Kp,base32hexpad:Jp,base32hexpadupper:Zp,base32z:Qp});const Xp=Np({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),tw=Np({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var nw=Object.freeze({__proto__:null,base36:Xp,base36upper:tw});const rw=Np({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),ew=Np({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var iw=Object.freeze({__proto__:null,base58btc:rw,base58flickr:ew});const sw=$p({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),ow=$p({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),aw=$p({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),uw=$p({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var cw=Object.freeze({__proto__:null,base64:sw,base64pad:ow,base64url:aw,base64urlpad:uw});const hw=Array.from("ðŸš€ðŸªâ˜„ðŸ›°ðŸŒŒðŸŒ‘ðŸŒ’ðŸŒ“ðŸŒ”ðŸŒ•ðŸŒ–ðŸŒ—ðŸŒ˜ðŸŒðŸŒðŸŒŽðŸ‰â˜€ðŸ’»ðŸ–¥ðŸ’¾ðŸ’¿ðŸ˜‚â¤ðŸ˜ðŸ¤£ðŸ˜ŠðŸ™ðŸ’•ðŸ˜­ðŸ˜˜ðŸ‘ðŸ˜…ðŸ‘ðŸ˜ðŸ”¥ðŸ¥°ðŸ’”ðŸ’–ðŸ’™ðŸ˜¢ðŸ¤”ðŸ˜†ðŸ™„ðŸ’ªðŸ˜‰â˜ºðŸ‘ŒðŸ¤—ðŸ’œðŸ˜”ðŸ˜ŽðŸ˜‡ðŸŒ¹ðŸ¤¦ðŸŽ‰ðŸ’žâœŒâœ¨ðŸ¤·ðŸ˜±ðŸ˜ŒðŸŒ¸ðŸ™ŒðŸ˜‹ðŸ’—ðŸ’šðŸ˜ðŸ’›ðŸ™‚ðŸ’“ðŸ¤©ðŸ˜„ðŸ˜€ðŸ–¤ðŸ˜ƒðŸ’¯ðŸ™ˆðŸ‘‡ðŸŽ¶ðŸ˜’ðŸ¤­â£ðŸ˜œðŸ’‹ðŸ‘€ðŸ˜ªðŸ˜‘ðŸ’¥ðŸ™‹ðŸ˜žðŸ˜©ðŸ˜¡ðŸ¤ªðŸ‘ŠðŸ¥³ðŸ˜¥ðŸ¤¤ðŸ‘‰ðŸ’ƒðŸ˜³âœ‹ðŸ˜šðŸ˜ðŸ˜´ðŸŒŸðŸ˜¬ðŸ™ƒðŸ€ðŸŒ·ðŸ˜»ðŸ˜“â­âœ…ðŸ¥ºðŸŒˆðŸ˜ˆðŸ¤˜ðŸ’¦âœ”ðŸ˜£ðŸƒðŸ’â˜¹ðŸŽŠðŸ’˜ðŸ˜ â˜ðŸ˜•ðŸŒºðŸŽ‚ðŸŒ»ðŸ˜ðŸ–•ðŸ’ðŸ™ŠðŸ˜¹ðŸ—£ðŸ’«ðŸ’€ðŸ‘‘ðŸŽµðŸ¤žðŸ˜›ðŸ”´ðŸ˜¤ðŸŒ¼ðŸ˜«âš½ðŸ¤™â˜•ðŸ†ðŸ¤«ðŸ‘ˆðŸ˜®ðŸ™†ðŸ»ðŸƒðŸ¶ðŸ’ðŸ˜²ðŸŒ¿ðŸ§¡ðŸŽâš¡ðŸŒžðŸŽˆâŒâœŠðŸ‘‹ðŸ˜°ðŸ¤¨ðŸ˜¶ðŸ¤ðŸš¶ðŸ’°ðŸ“ðŸ’¢ðŸ¤ŸðŸ™ðŸš¨ðŸ’¨ðŸ¤¬âœˆðŸŽ€ðŸºðŸ¤“ðŸ˜™ðŸ’ŸðŸŒ±ðŸ˜–ðŸ‘¶ðŸ¥´â–¶âž¡â“ðŸ’ŽðŸ’¸â¬‡ðŸ˜¨ðŸŒšðŸ¦‹ðŸ˜·ðŸ•ºâš ðŸ™…ðŸ˜ŸðŸ˜µðŸ‘ŽðŸ¤²ðŸ¤ ðŸ¤§ðŸ“ŒðŸ”µðŸ’…ðŸ§ðŸ¾ðŸ’ðŸ˜—ðŸ¤‘ðŸŒŠðŸ¤¯ðŸ·â˜ŽðŸ’§ðŸ˜¯ðŸ’†ðŸ‘†ðŸŽ¤ðŸ™‡ðŸ‘â„ðŸŒ´ðŸ’£ðŸ¸ðŸ’ŒðŸ“ðŸ¥€ðŸ¤¢ðŸ‘…ðŸ’¡ðŸ’©ðŸ‘ðŸ“¸ðŸ‘»ðŸ¤ðŸ¤®ðŸŽ¼ðŸ¥µðŸš©ðŸŽðŸŠðŸ‘¼ðŸ’ðŸ“£ðŸ¥‚"),fw=hw.reduce(((t,n,r)=>(t[r]=n,t)),[]),lw=hw.reduce(((t,n,r)=>(t[n.codePointAt(0)]=r,t)),[]);function dw(t){return t.reduce(((t,n)=>(t+=fw[n],t)),"")}function vw(t){const n=[];for(const r of t){const t=lw[r.codePointAt(0)];if(t===void 0)throw new Error(`Non-base256emoji character: ${r}`);n.push(t)}return new Uint8Array(n)}const pw=Ap({prefix:"ðŸš€",name:"base256emoji",encode:dw,decode:vw});var ww=Object.freeze({__proto__:null,base256emoji:pw}),yw=Ew,bw=128,mw=127,gw=~mw,_w=Math.pow(2,31);function Ew(t,n,r){n=n||[],r=r||0;for(var e=r;t>=_w;)n[r++]=t&255|bw,t/=128;for(;t&gw;)n[r++]=t&255|bw,t>>>=7;return n[r]=t|0,Ew.bytes=r-e+1,n}var Ow=jw,Sw=128,Iw=127;function jw(t,n){var r=0,n=n||0,e=0,i=n,s,o=t.length;do{if(i>=o)throw jw.bytes=0,new RangeError("Could not decode varint");s=t[i++],r+=e<28?(s&Iw)<<e:(s&Iw)*Math.pow(2,e),e+=7}while(s>=Sw);return jw.bytes=i-n,r}var Aw=Math.pow(2,7),Nw=Math.pow(2,14),Pw=Math.pow(2,21),xw=Math.pow(2,28),$w=Math.pow(2,35),Tw=Math.pow(2,42),Mw=Math.pow(2,49),Cw=Math.pow(2,56),Rw=Math.pow(2,63),Uw=function(t){return t<Aw?1:t<Nw?2:t<Pw?3:t<xw?4:t<$w?5:t<Tw?6:t<Mw?7:t<Cw?8:t<Rw?9:10},Dw={encode:yw,decode:Ow,encodingLength:Uw},kw=Dw;const Lw=(t,n,r=0)=>(kw.encode(t,n,r),n),qw=t=>kw.encodingLength(t),Vw=(t,n)=>{const r=n.byteLength,e=qw(t),i=e+qw(r),s=new Uint8Array(i+r);return Lw(t,s,0),Lw(r,s,e),s.set(n,i),new Fw(t,r,n,s)};class Fw{constructor(t,n,r,e){this.code=t,this.size=n,this.digest=r,this.bytes=e}}const Gw=({name:t,code:n,encode:r})=>new Hw(t,n,r);class Hw{constructor(t,n,r){this.name=t,this.code=n,this.encode=r}digest(t){if(t instanceof Uint8Array){const n=this.encode(t);return n instanceof Uint8Array?Vw(this.code,n):n.then((t=>Vw(this.code,t)))}else throw Error("Unknown type, must be binary type")}}const zw=t=>async n=>new Uint8Array(await crypto.subtle.digest(t,n)),Ww=Gw({name:"sha2-256",code:18,encode:zw("SHA-256")}),Bw=Gw({name:"sha2-512",code:19,encode:zw("SHA-512")});Object.freeze({__proto__:null,sha256:Ww,sha512:Bw});const Kw=0,Jw="identity",Zw=mp,Qw=t=>Vw(Kw,Zw(t)),Yw={code:Kw,name:Jw,encode:Zw,digest:Qw};Object.freeze({__proto__:null,identity:Yw});new TextEncoder,new TextDecoder;const Xw={...Mp,...Rp,...Dp,...Lp,...Fp,...Yp,...nw,...iw,...cw,...ww};function ty(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function ny(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?ty(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function ry(t,n,r,e){return{name:t,prefix:n,encoder:{name:t,prefix:n,encode:r},decoder:{decode:e}}}const ey=ry("utf8","u",(t=>"u"+new TextDecoder("utf8").decode(t)),(t=>(new TextEncoder).encode(t.substring(1)))),iy=ry("ascii","a",(t=>{let n="a";for(let r=0;r<t.length;r++)n+=String.fromCharCode(t[r]);return n}),(t=>{t=t.substring(1);const n=ny(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n})),sy={utf8:ey,"utf-8":ey,hex:Xw.base16,latin1:iy,ascii:iy,binary:iy,...Xw};function oy(t,n="utf8"){const r=sy[n];if(!r)throw new Error(`Unsupported encoding "${n}"`);return(n==="utf8"||n==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?ty(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}const ay="wc",uy=2,cy="core",hy=`${ay}@2:${cy}:`,fy={name:cy,logger:"error"},ly={database:":memory:"},dy="crypto",vy="client_ed25519_seed",py=ds.ONE_DAY,wy="keychain",yy="0.3",by="messages",my="0.3",gy=ds.SIX_HOURS,_y="publisher",Ey="irn",Oy="error",Sy="wss://relay.walletconnect.com",Iy="wss://relay.walletconnect.org",jy="relayer",Ay={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},Ny="_subscription",Py={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},xy=ds.ONE_SECOND,$y="2.10.2",Ty=1e4,My="0.3",Cy="WALLETCONNECT_CLIENT_ID",Ry={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},Uy="subscription",Dy="0.3",ky=ds.FIVE_SECONDS*1e3,Ly="pairing",qy="0.3",Vy={wc_pairingDelete:{req:{ttl:ds.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:ds.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:ds.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:ds.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:ds.ONE_DAY,prompt:!1,tag:0},res:{ttl:ds.ONE_DAY,prompt:!1,tag:0}}},Fy={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},Gy={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},Hy="history",zy="0.3",Wy="expirer",By={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},Ky="0.3",Jy="verify-api",Zy="https://verify.walletconnect.com",Qy="https://verify.walletconnect.org";class Yy{constructor(t,n){this.core=t,this.logger=n,this.keychain=new Map,this.name=wy,this.version=yy,this.initialized=!1,this.storagePrefix=hy,this.init=async()=>{if(!this.initialized){const t=await this.getKeyChain();typeof t<"u"&&(this.keychain=t),this.initialized=!0}},this.has=t=>(this.isInitialized(),this.keychain.has(t)),this.set=async(t,n)=>{this.isInitialized(),this.keychain.set(t,n),await this.persist()},this.get=t=>{this.isInitialized();const n=this.keychain.get(t);if(typeof n>"u"){const{message:n}=hu("NO_MATCHING_KEY",`${this.name}: ${t}`);throw new Error(n)}return n},this.del=async t=>{this.isInitialized(),this.keychain.delete(t),await this.persist()},this.core=t,this.logger=Dh.generateChildLogger(n,this.name)}get context(){return Dh.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(t){await this.core.storage.setItem(this.storageKey,Na(t))}async getKeyChain(){const t=await this.core.storage.getItem(this.storageKey);return typeof t<"u"?Pa(t):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:t}=hu("NOT_INITIALIZED",this.name);throw new Error(t)}}}class Xy{constructor(t,n,r){this.core=t,this.logger=n,this.name=dy,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=t=>(this.isInitialized(),this.keychain.has(t)),this.getClientId=async()=>{this.isInitialized();const t=await this.getClientSeed(),n=td(t);return Zl(n.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const t=Ko();return this.setPrivateKey(t.publicKey,t.privateKey)},this.signJWT=async t=>{this.isInitialized();const n=await this.getClientSeed(),r=td(n),e=Jo(),i=py;return await nd(e,t,i,r)},this.generateSharedKey=(t,n,r)=>{this.isInitialized();const e=this.getPrivateKey(t),i=Zo(e,n);return this.setSymKey(i,r)},this.setSymKey=async(t,n)=>{this.isInitialized();const r=n||Qo(t);return await this.keychain.set(r,t),r},this.deleteKeyPair=async t=>{this.isInitialized(),await this.keychain.del(t)},this.deleteSymKey=async t=>{this.isInitialized(),await this.keychain.del(t)},this.encode=async(t,n,r)=>{this.isInitialized();const e=oa(r),i=il(n);if(aa(e)){const n=e.senderPublicKey,r=e.receiverPublicKey;t=await this.generateSharedKey(n,r)}const s=this.getSymKey(t),{type:o,senderPublicKey:a}=e;return na({type:o,symKey:s,message:i,senderPublicKey:a})},this.decode=async(t,n,r)=>{this.isInitialized();const e=sa(n,r);if(aa(e)){const n=e.receiverPublicKey,r=e.senderPublicKey;t=await this.generateSharedKey(n,r)}try{const r=this.getSymKey(t),e=ra({symKey:r,encoded:n});return el(e)}catch(n){this.logger.error(`Failed to decode message from topic: '${t}', clientId: '${await this.getClientId()}'`),this.logger.error(n)}},this.getPayloadType=t=>{const n=ia(t);return ta(n.type)},this.getPayloadSenderPublicKey=t=>{const n=ia(t);return n.senderPublicKey?Vd(n.senderPublicKey,Lo):void 0},this.core=t,this.logger=Dh.generateChildLogger(n,this.name),this.keychain=r||new Yy(this.core,this.logger)}get context(){return Dh.getLoggerContext(this.logger)}async setPrivateKey(t,n){return await this.keychain.set(t,n),t}getPrivateKey(t){return this.keychain.get(t)}async getClientSeed(){let t="";try{t=this.keychain.get(vy)}catch{t=Jo(),await this.keychain.set(vy,t)}return oy(t,"base16")}getSymKey(t){return this.keychain.get(t)}isInitialized(){if(!this.initialized){const{message:t}=hu("NOT_INITIALIZED",this.name);throw new Error(t)}}}class tb extends Kf{constructor(t,n){super(t,n),this.logger=t,this.core=n,this.messages=new Map,this.name=by,this.version=my,this.initialized=!1,this.storagePrefix=hy,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const t=await this.getRelayerMessages();typeof t<"u"&&(this.messages=t),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(t){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(t)}finally{this.initialized=!0}}},this.set=async(t,n)=>{this.isInitialized();const r=Yo(n);let e=this.messages.get(t);return typeof e>"u"&&(e={}),typeof e[r]<"u"||(e[r]=n,this.messages.set(t,e),await this.persist()),r},this.get=t=>{this.isInitialized();let n=this.messages.get(t);return typeof n>"u"&&(n={}),n},this.has=(t,n)=>{this.isInitialized();const r=this.get(t),e=Yo(n);return typeof r[e]<"u"},this.del=async t=>{this.isInitialized(),this.messages.delete(t),await this.persist()},this.logger=Dh.generateChildLogger(t,this.name),this.core=n}get context(){return Dh.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setRelayerMessages(t){await this.core.storage.setItem(this.storageKey,Na(t))}async getRelayerMessages(){const t=await this.core.storage.getItem(this.storageKey);return typeof t<"u"?Pa(t):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:t}=hu("NOT_INITIALIZED",this.name);throw new Error(t)}}}class nb extends Jf{constructor(n,r){super(n,r),this.relayer=n,this.logger=r,this.events=new t.exports.EventEmitter,this.name=_y,this.queue=new Map,this.publishTimeout=ds.toMiliseconds(ds.TEN_SECONDS),this.needsTransportRestart=!1,this.publish=async(t,n,r)=>{var e;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:t,message:n,opts:r}});try{const i=r?.ttl||gy,s=Fa(r),o=r?.prompt||!1,a=r?.tag||0,u=r?.id||Dv().toString(),c={topic:t,message:n,opts:{ttl:i,relay:s,prompt:o,tag:a,id:u}},h=setTimeout((()=>this.queue.set(u,c)),this.publishTimeout);try{await await $a(this.rpcPublish(t,n,i,s,o,a,u),this.publishTimeout,"Failed to publish payload, please try again."),this.removeRequestFromQueue(u),this.relayer.events.emit(Ay.publish,c)}catch(t){if(this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0,(e=r?.internal)!=null&&e.throwOnFailedPublish)throw this.removeRequestFromQueue(u),t;return}finally{clearTimeout(h)}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:t,message:n,opts:r}})}catch(t){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(t),t}},this.on=(t,n)=>{this.events.on(t,n)},this.once=(t,n)=>{this.events.once(t,n)},this.off=(t,n)=>{this.events.off(t,n)},this.removeListener=(t,n)=>{this.events.removeListener(t,n)},this.relayer=n,this.logger=Dh.generateChildLogger(r,this.name),this.registerEventListeners()}get context(){return Dh.getLoggerContext(this.logger)}rpcPublish(t,n,r,e,i,s,o){var a,u,c,h;const f={method:Ga(e.protocol).publish,params:{topic:t,message:n,ttl:r,prompt:i,tag:s},id:o};return vu((a=f.params)==null?void 0:a.prompt)&&((u=f.params)==null||delete u.prompt),vu((c=f.params)==null?void 0:c.tag)&&((h=f.params)==null||delete h.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:f}),this.relayer.request(f)}removeRequestFromQueue(t){this.queue.delete(t)}checkQueue(){this.queue.forEach((async t=>{const{topic:n,message:r,opts:e}=t;await this.publish(n,r,e)}))}registerEventListeners(){this.relayer.core.heartbeat.on(Bc.HEARTBEAT_EVENTS.pulse,(()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Ay.connection_stalled);return}this.checkQueue()})),this.relayer.on(Ay.message_ack,(t=>{this.removeRequestFromQueue(t.id.toString())}))}}class rb{constructor(){this.map=new Map,this.set=(t,n)=>{const r=this.get(t);this.exists(t,n)||this.map.set(t,[...r,n])},this.get=t=>this.map.get(t)||[],this.exists=(t,n)=>this.get(t).includes(n),this.delete=(t,n)=>{if(typeof n>"u"){this.map.delete(t);return}if(!this.map.has(t))return;const r=this.get(t);if(!this.exists(t,n))return;const e=r.filter((t=>t!==n));if(!e.length){this.map.delete(t);return}this.map.set(t,e)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var eb=Object.defineProperty,ib=Object.defineProperties,sb=Object.getOwnPropertyDescriptors,ob=Object.getOwnPropertySymbols,ab=Object.prototype.hasOwnProperty,ub=Object.prototype.propertyIsEnumerable,cb=(t,n,r)=>n in t?eb(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,hb=(t,n)=>{for(var r in n||(n={}))ab.call(n,r)&&cb(t,r,n[r]);if(ob)for(var r of ob(n))ub.call(n,r)&&cb(t,r,n[r]);return t},fb=(t,n)=>ib(t,sb(n));class lb extends Yf{constructor(n,r){super(n,r),this.relayer=n,this.logger=r,this.subscriptions=new Map,this.topicMap=new rb,this.events=new t.exports.EventEmitter,this.name=Uy,this.version=Dy,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=hy,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(t,n)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:t,opts:n}});try{const r=Fa(n),e={topic:t,relay:r};this.pending.set(t,e);const i=await this.rpcSubscribe(t,r);return this.onSubscribe(i,e),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:t,opts:n}}),i}catch(t){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(t),t}},this.unsubscribe=async(t,n)=>{await this.restartToComplete(),this.isInitialized(),typeof n?.id<"u"?await this.unsubscribeById(t,n.id,n):await this.unsubscribeByTopic(t,n)},this.isSubscribed=async t=>this.topics.includes(t)?!0:await new Promise(((n,r)=>{const e=new ds.Watch;e.start(this.pendingSubscriptionWatchLabel);const i=setInterval((()=>{!this.pending.has(t)&&this.topics.includes(t)&&(clearInterval(i),e.stop(this.pendingSubscriptionWatchLabel),n(!0)),e.elapsed(this.pendingSubscriptionWatchLabel)>=ky&&(clearInterval(i),e.stop(this.pendingSubscriptionWatchLabel),r(new Error("Subscription resolution timeout")))}),this.pollingInterval)})).catch((()=>!1)),this.on=(t,n)=>{this.events.on(t,n)},this.once=(t,n)=>{this.events.once(t,n)},this.off=(t,n)=>{this.events.off(t,n)},this.removeListener=(t,n)=>{this.events.removeListener(t,n)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=n,this.logger=Dh.generateChildLogger(r,this.name),this.clientId=""}get context(){return Dh.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(t,n){let r=!1;try{r=this.getSubscription(t).topic===n}catch{}return r}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(t,n){const r=this.topicMap.get(t);await Promise.all(r.map((async r=>await this.unsubscribeById(t,r,n))))}async unsubscribeById(t,n,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:t,id:n,opts:r}});try{const e=Fa(r);await this.rpcUnsubscribe(t,n,e);const i=fu("USER_DISCONNECTED",`${this.name}, ${t}`);await this.onUnsubscribe(t,n,i),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:t,id:n,opts:r}})}catch(t){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(t),t}}async rpcSubscribe(t,n){const r={method:Ga(n.protocol).subscribe,params:{topic:t}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{await await $a(this.relayer.request(r),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Ay.connection_stalled)}return Yo(t+this.clientId)}async rpcBatchSubscribe(t){if(!t.length)return;const n=t[0].relay,r={method:Ga(n.protocol).batchSubscribe,params:{topics:t.map((t=>t.topic))}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{return await await $a(this.relayer.request(r),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(Ay.connection_stalled)}}rpcUnsubscribe(t,n,r){const e={method:Ga(r.protocol).unsubscribe,params:{topic:t,id:n}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:e}),this.relayer.request(e)}onSubscribe(t,n){this.setSubscription(t,fb(hb({},n),{id:t})),this.pending.delete(n.topic)}onBatchSubscribe(t){t.length&&t.forEach((t=>{this.setSubscription(t.id,hb({},t)),this.pending.delete(t.topic)}))}async onUnsubscribe(t,n,r){this.events.removeAllListeners(n),this.hasSubscription(n,t)&&this.deleteSubscription(n,r),await this.relayer.messages.del(t)}async setRelayerSubscriptions(t){await this.relayer.core.storage.setItem(this.storageKey,t)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(t,n){this.subscriptions.has(t)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:t,subscription:n}),this.addSubscription(t,n))}addSubscription(t,n){this.subscriptions.set(t,hb({},n)),this.topicMap.set(n.topic,t),this.events.emit(Ry.created,n)}getSubscription(t){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:t});const n=this.subscriptions.get(t);if(!n){const{message:n}=hu("NO_MATCHING_KEY",`${this.name}: ${t}`);throw new Error(n)}return n}deleteSubscription(t,n){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:t,reason:n});const r=this.getSubscription(t);this.subscriptions.delete(t),this.topicMap.delete(r.topic,t),this.events.emit(Ry.deleted,fb(hb({},r),{reason:n}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Ry.sync)}async reset(){if(this.cached.length){const t=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let n=0;n<t;n++){const t=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(t)}}this.events.emit(Ry.resubscribed)}async restore(){try{const t=await this.getRelayerSubscriptions();if(typeof t>"u"||!t.length)return;if(this.subscriptions.size){const{message:t}=hu("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(t)}this.cached=t,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(t){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(t)}}async batchSubscribe(t){if(!t.length)return;const n=await this.rpcBatchSubscribe(t);lu(n)&&this.onBatchSubscribe(n.map(((n,r)=>fb(hb({},t[r]),{id:n}))))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(!this.initialized||this.relayer.transportExplicitlyClosed)return;const t=[];this.pending.forEach((n=>{t.push(n)})),await this.batchSubscribe(t)}registerEventListeners(){this.relayer.core.heartbeat.on(Bc.HEARTBEAT_EVENTS.pulse,(async()=>{await this.checkPending()})),this.relayer.on(Ay.connect,(async()=>{await this.onConnect()})),this.relayer.on(Ay.disconnect,(()=>{this.onDisconnect()})),this.events.on(Ry.created,(async t=>{const n=Ry.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:t}),await this.persist()})),this.events.on(Ry.deleted,(async t=>{const n=Ry.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:t}),await this.persist()}))}isInitialized(){if(!this.initialized){const{message:t}=hu("NOT_INITIALIZED",this.name);throw new Error(t)}}async restartToComplete(){this.restartInProgress&&await new Promise((t=>{const n=setInterval((()=>{this.restartInProgress||(clearInterval(n),t())}),this.pollingInterval)}))}}var db=Object.defineProperty,vb=Object.getOwnPropertySymbols,pb=Object.prototype.hasOwnProperty,wb=Object.prototype.propertyIsEnumerable,yb=(t,n,r)=>n in t?db(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,bb=(t,n)=>{for(var r in n||(n={}))pb.call(n,r)&&yb(t,r,n[r]);if(vb)for(var r of vb(n))wb.call(n,r)&&yb(t,r,n[r]);return t};class mb extends Zf{constructor(n){super(n),this.protocol="wc",this.version=2,this.events=new t.exports.EventEmitter,this.name=jy,this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.hasExperiencedNetworkDisruption=!1,this.request=async t=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(t)}catch(t){throw this.logger.debug("Failed to Publish Request"),this.logger.error(t),t}},this.onPayloadHandler=t=>{this.onProviderPayload(t)},this.onConnectHandler=()=>{this.events.emit(Ay.connect)},this.onDisconnectHandler=()=>{this.onProviderDisconnect()},this.onProviderErrorHandler=t=>{this.logger.error(t),this.events.emit(Ay.error,t),this.logger.info("Fatal socket error received, closing transport"),this.transportClose()},this.registerProviderListeners=()=>{this.provider.on(Py.payload,this.onPayloadHandler),this.provider.on(Py.connect,this.onConnectHandler),this.provider.on(Py.disconnect,this.onDisconnectHandler),this.provider.on(Py.error,this.onProviderErrorHandler)},this.core=n.core,this.logger=typeof n.logger<"u"&&typeof n.logger!="string"?Dh.generateChildLogger(n.logger,this.name):Dh.pino(Dh.getDefaultLoggerOptions({level:n.logger||Oy})),this.messages=new tb(this.logger,n.core),this.subscriber=new lb(this,this.logger),this.publisher=new nb(this,this.logger),this.relayUrl=n?.relayUrl||Sy,this.projectId=n.projectId,this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${Iy}...`),await this.restartTransport(Iy)}this.initialized=!0,setTimeout((async()=>{this.subscriber.topics.length===0&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)}),Ty)}get context(){return Dh.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(t,n,r){this.isInitialized(),await this.publisher.publish(t,n,r),await this.recordMessageEvent({topic:t,message:n,publishedAt:Date.now()})}async subscribe(t,n){var r;this.isInitialized();let e=((r=this.subscriber.topicMap.get(t))==null?void 0:r[0])||"";if(e)return e;let i;const s=n=>{n.topic===t&&(this.subscriber.off(Ry.created,s),i())};return await Promise.all([new Promise((t=>{i=t,this.subscriber.on(Ry.created,s)})),new Promise((async r=>{e=await this.subscriber.subscribe(t,n),r()}))]),e}async unsubscribe(t,n){this.isInitialized(),await this.subscriber.unsubscribe(t,n)}on(t,n){this.events.on(t,n)}once(t,n){this.events.once(t,n)}off(t,n){this.events.off(t,n)}removeListener(t,n){this.events.removeListener(t,n)}async transportClose(){this.transportExplicitlyClosed=!0,this.hasExperiencedNetworkDisruption&&this.connected?await $a(this.provider.disconnect(),1e3,"provider.disconnect()").catch((()=>this.onProviderDisconnect())):this.connected&&await this.provider.disconnect()}async transportOpen(t){if(this.transportExplicitlyClosed=!1,await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress){t&&t!==this.relayUrl&&(this.relayUrl=t,await this.transportClose(),await this.createProvider()),this.connectionAttemptInProgress=!0;try{await Promise.all([new Promise((t=>{if(!this.initialized)return t();this.subscriber.once(Ry.resubscribed,(()=>{t()}))})),new Promise((async(t,n)=>{try{await $a(this.provider.connect(),1e4,`Socket stalled when trying to connect to ${this.relayUrl}`)}catch(t){n(t);return}t()}))])}catch(t){this.logger.error(t);const n=t;if(!this.isConnectionStalled(n.message))throw t;this.provider.events.emit(Py.disconnect)}finally{this.connectionAttemptInProgress=!1,this.hasExperiencedNetworkDisruption=!1}}}async restartTransport(t){await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress&&(this.relayUrl=t||this.relayUrl,await this.transportClose(),await this.createProvider(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await Ju())throw new Error("No internet connection detected. Please restart your network and try again.")}isConnectionStalled(t){return this.staleConnectionErrors.some((n=>t.includes(n)))}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const t=await this.core.crypto.signJWT(this.relayUrl);this.provider=new ep(new dp(ja({sdkVersion:$y,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:t,useOnCloseEvent:!0}))),this.registerProviderListeners()}async recordMessageEvent(t){const{topic:n,message:r}=t;await this.messages.set(n,r)}async shouldIgnoreMessageEvent(t){const{topic:n,message:r}=t;if(!r||r.length===0)return this.logger.debug(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isSubscribed(n))return this.logger.debug(`Ignoring message for non-subscribed topic ${n}`),!0;const e=this.messages.has(n,r);return e&&this.logger.debug(`Ignoring duplicate message: ${r}`),e}async onProviderPayload(t){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:t}),Xv(t)){if(!t.method.endsWith(Ny))return;const n=t.params,{topic:r,message:e,publishedAt:i}=n.data,s={topic:r,message:e,publishedAt:i};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(bb({type:"event",event:n.id},s)),this.events.emit(n.id,s),await this.acknowledgePayload(t),await this.onMessageEvent(s)}else tp(t)&&this.events.emit(Ay.message_ack,t)}async onMessageEvent(t){await this.shouldIgnoreMessageEvent(t)||(this.events.emit(Ay.message,t),await this.recordMessageEvent(t))}async acknowledgePayload(t){const n=Lv(t.id,!0);await this.provider.connection.send(n)}unregisterProviderListeners(){this.provider.off(Py.payload,this.onPayloadHandler),this.provider.off(Py.connect,this.onConnectHandler),this.provider.off(Py.disconnect,this.onDisconnectHandler),this.provider.off(Py.error,this.onProviderErrorHandler)}async registerEventListeners(){this.events.on(Ay.connection_stalled,(()=>{this.restartTransport().catch((t=>this.logger.error(t)))}));let t=await Ju();Xu((async n=>{this.initialized&&t!==n&&(t=n,n?await this.restartTransport().catch((t=>this.logger.error(t))):(this.hasExperiencedNetworkDisruption=!0,await this.transportClose().catch((t=>this.logger.error(t)))))}))}onProviderDisconnect(){this.events.emit(Ay.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||(this.logger.info("attemptToReconnect called. Connecting..."),setTimeout((async()=>{await this.restartTransport().catch((t=>this.logger.error(t)))}),ds.toMiliseconds(xy)))}isInitialized(){if(!this.initialized){const{message:t}=hu("NOT_INITIALIZED",this.name);throw new Error(t)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectionAttemptInProgress)return await new Promise((t=>{const n=setInterval((()=>{this.connected&&(clearInterval(n),t())}),this.connectionStatusPollingInterval)}));await this.restartTransport()}}}var gb=Object.defineProperty,_b=Object.getOwnPropertySymbols,Eb=Object.prototype.hasOwnProperty,Ob=Object.prototype.propertyIsEnumerable,Sb=(t,n,r)=>n in t?gb(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,Ib=(t,n)=>{for(var r in n||(n={}))Eb.call(n,r)&&Sb(t,r,n[r]);if(_b)for(var r of _b(n))Ob.call(n,r)&&Sb(t,r,n[r]);return t};class jb extends Qf{constructor(t,n,r,e=hy,i=void 0){super(t,n,r,e),this.core=t,this.logger=n,this.name=r,this.map=new Map,this.version=My,this.cached=[],this.initialized=!1,this.storagePrefix=hy,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach((t=>{this.getKey&&t!==null&&!vu(t)?this.map.set(this.getKey(t),t):_u(t)?this.map.set(t.id,t):Eu(t)&&this.map.set(t.topic,t)})),this.cached=[],this.initialized=!0)},this.set=async(t,n)=>{this.isInitialized(),this.map.has(t)?await this.update(t,n):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:t,value:n}),this.map.set(t,n),await this.persist())},this.get=t=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:t}),this.getData(t)),this.getAll=t=>(this.isInitialized(),t?this.values.filter((n=>Object.keys(t).every((r=>pp(n[r],t[r]))))):this.values),this.update=async(t,n)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:t,update:n});const r=Ib(Ib({},this.getData(t)),n);this.map.set(t,r),await this.persist()},this.delete=async(t,n)=>{this.isInitialized(),this.map.has(t)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:t,reason:n}),this.map.delete(t),await this.persist())},this.logger=Dh.generateChildLogger(n,this.name),this.storagePrefix=e,this.getKey=i}get context(){return Dh.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(t){await this.core.storage.setItem(this.storageKey,t)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(t){const n=this.map.get(t);if(!n){const{message:n}=hu("NO_MATCHING_KEY",`${this.name}: ${t}`);throw this.logger.error(n),new Error(n)}return n}async persist(){await this.setDataStore(this.values)}async restore(){try{const t=await this.getDataStore();if(typeof t>"u"||!t.length)return;if(this.map.size){const{message:t}=hu("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=t,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(t){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(t)}}isInitialized(){if(!this.initialized){const{message:t}=hu("NOT_INITIALIZED",this.name);throw new Error(t)}}}class Ab{constructor(t,r){this.core=t,this.logger=r,this.name=Ly,this.version=qy,this.events=new n,this.initialized=!1,this.storagePrefix=hy,this.ignoredPayloadTypes=[Go],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:t})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...t])]},this.create=async()=>{this.isInitialized();const t=Jo(),n=await this.core.crypto.setSymKey(t),r=Ua(ds.FIVE_MINUTES),e={protocol:Ey},i={topic:n,expiry:r,relay:e,active:!1},s=tu({protocol:this.core.protocol,version:this.core.version,topic:n,symKey:t,relay:e});return await this.pairings.set(n,i),await this.core.relayer.subscribe(n),this.core.expirer.set(n,r),{topic:n,uri:s}},this.pair=async t=>{this.isInitialized(),this.isValidPair(t);const{topic:n,symKey:r,relay:e}=Qa(t.uri);let i;if(this.pairings.keys.includes(n)&&(i=this.pairings.get(n),i.active))throw new Error(`Pairing already exists: ${n}. Please try again with a new connection URI.`);this.core.crypto.keychain.has(n)||(await this.core.crypto.setSymKey(r,n),await this.core.relayer.subscribe(n,{relay:e}));const s=Ua(ds.FIVE_MINUTES),o={topic:n,relay:e,expiry:s,active:!1};return await this.pairings.set(n,o),this.core.expirer.set(n,s),t.activatePairing&&await this.activate({topic:n}),this.events.emit(Fy.create,o),o},this.activate=async({topic:t})=>{this.isInitialized();const n=Ua(ds.THIRTY_DAYS);await this.pairings.update(t,{active:!0,expiry:n}),this.core.expirer.set(t,n)},this.ping=async t=>{this.isInitialized(),await this.isValidPing(t);const{topic:n}=t;if(this.pairings.keys.includes(n)){const t=await this.sendRequest(n,"wc_pairingPing",{}),{done:r,resolve:e,reject:i}=xa();this.events.once(ka("pairing_ping",t),(({error:t})=>{t?i(t):e()})),await r()}},this.updateExpiry=async({topic:t,expiry:n})=>{this.isInitialized(),await this.pairings.update(t,{expiry:n})},this.updateMetadata=async({topic:t,metadata:n})=>{this.isInitialized(),await this.pairings.update(t,{peerMetadata:n})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async t=>{this.isInitialized(),await this.isValidDisconnect(t);const{topic:n}=t;this.pairings.keys.includes(n)&&(await this.sendRequest(n,"wc_pairingDelete",fu("USER_DISCONNECTED")),await this.deletePairing(n))},this.sendRequest=async(t,n,r)=>{const e=kv(n,r),i=await this.core.crypto.encode(t,e),s=Vy[n].req;return this.core.history.set(t,e),this.core.relayer.publish(t,i,s),e.id},this.sendResult=async(t,n,r)=>{const e=Lv(t,r),i=await this.core.crypto.encode(n,e),s=await this.core.history.get(n,t),o=Vy[s.request.method].res;await this.core.relayer.publish(n,i,o),await this.core.history.resolve(e)},this.sendError=async(t,n,r)=>{const e=qv(t,r),i=await this.core.crypto.encode(n,e),s=await this.core.history.get(n,t),o=Vy[s.request.method]?Vy[s.request.method].res:Vy.unregistered_method.res;await this.core.relayer.publish(n,i,o),await this.core.history.resolve(e)},this.deletePairing=async(t,n)=>{await this.core.relayer.unsubscribe(t),await Promise.all([this.pairings.delete(t,fu("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(t),n?Promise.resolve():this.core.expirer.del(t)])},this.cleanup=async()=>{const t=this.pairings.getAll().filter((t=>Da(t.expiry)));await Promise.all(t.map((t=>this.deletePairing(t.topic))))},this.onRelayEventRequest=t=>{const{topic:n,payload:r}=t;switch(r.method){case"wc_pairingPing":return this.onPairingPingRequest(n,r);case"wc_pairingDelete":return this.onPairingDeleteRequest(n,r);default:return this.onUnknownRpcMethodRequest(n,r)}},this.onRelayEventResponse=async t=>{const{topic:n,payload:r}=t,e=(await this.core.history.get(n,r.id)).request.method;switch(e){case"wc_pairingPing":return this.onPairingPingResponse(n,r);default:return this.onUnknownRpcMethodResponse(e)}},this.onPairingPingRequest=async(t,n)=>{const{id:r}=n;try{this.isValidPing({topic:t}),await this.sendResult(r,t,!0),this.events.emit(Fy.ping,{id:r,topic:t})}catch(n){await this.sendError(r,t,n),this.logger.error(n)}},this.onPairingPingResponse=(t,n)=>{const{id:r}=n;setTimeout((()=>{np(n)?this.events.emit(ka("pairing_ping",r),{}):rp(n)&&this.events.emit(ka("pairing_ping",r),{error:n.error})}),500)},this.onPairingDeleteRequest=async(t,n)=>{const{id:r}=n;try{this.isValidDisconnect({topic:t}),await this.deletePairing(t),this.events.emit(Fy.delete,{id:r,topic:t})}catch(n){await this.sendError(r,t,n),this.logger.error(n)}},this.onUnknownRpcMethodRequest=async(t,n)=>{const{id:r,method:e}=n;try{if(this.registeredMethods.includes(e))return;const n=fu("WC_METHOD_UNSUPPORTED",e);await this.sendError(r,t,n),this.logger.error(n)}catch(n){await this.sendError(r,t,n),this.logger.error(n)}},this.onUnknownRpcMethodResponse=t=>{this.registeredMethods.includes(t)||this.logger.error(fu("WC_METHOD_UNSUPPORTED",t))},this.isValidPair=t=>{if(!Uu(t)){const{message:n}=hu("MISSING_OR_INVALID",`pair() params: ${t}`);throw new Error(n)}if(!gu(t.uri)){const{message:n}=hu("MISSING_OR_INVALID",`pair() uri: ${t.uri}`);throw new Error(n)}},this.isValidPing=async t=>{if(!Uu(t)){const{message:n}=hu("MISSING_OR_INVALID",`ping() params: ${t}`);throw new Error(n)}const{topic:n}=t;await this.isValidPairingTopic(n)},this.isValidDisconnect=async t=>{if(!Uu(t)){const{message:n}=hu("MISSING_OR_INVALID",`disconnect() params: ${t}`);throw new Error(n)}const{topic:n}=t;await this.isValidPairingTopic(n)},this.isValidPairingTopic=async t=>{if(!pu(t,!1)){const{message:n}=hu("MISSING_OR_INVALID",`pairing topic should be a string: ${t}`);throw new Error(n)}if(!this.pairings.keys.includes(t)){const{message:n}=hu("NO_MATCHING_KEY",`pairing topic doesn't exist: ${t}`);throw new Error(n)}if(Da(this.pairings.get(t).expiry)){await this.deletePairing(t);const{message:n}=hu("EXPIRED",`pairing topic: ${t}`);throw new Error(n)}},this.core=t,this.logger=Dh.generateChildLogger(r,this.name),this.pairings=new jb(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Dh.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){const{message:t}=hu("NOT_INITIALIZED",this.name);throw new Error(t)}}registerRelayerEvents(){this.core.relayer.on(Ay.message,(async t=>{const{topic:n,message:r}=t;if(!this.pairings.keys.includes(n)||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))return;const e=await this.core.crypto.decode(n,r);try{Xv(e)?(this.core.history.set(n,e),this.onRelayEventRequest({topic:n,payload:e})):tp(e)&&(await this.core.history.resolve(e),await this.onRelayEventResponse({topic:n,payload:e}),this.core.history.delete(n,e.id))}catch(t){this.logger.error(t)}}))}registerExpirerEvents(){this.core.expirer.on(By.expired,(async t=>{const{topic:n}=Ra(t.target);n&&this.pairings.keys.includes(n)&&(await this.deletePairing(n,!0),this.events.emit(Fy.expire,{topic:n}))}))}}class Nb extends Bf{constructor(n,r){super(n,r),this.core=n,this.logger=r,this.records=new Map,this.events=new t.exports.EventEmitter,this.name=Hy,this.version=zy,this.cached=[],this.initialized=!1,this.storagePrefix=hy,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach((t=>this.records.set(t.id,t))),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(t,n,r)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:t,request:n,chainId:r}),this.records.has(n.id))return;const e={id:n.id,topic:t,request:{method:n.method,params:n.params||null},chainId:r,expiry:Ua(ds.THIRTY_DAYS)};this.records.set(e.id,e),this.events.emit(Gy.created,e)},this.resolve=async t=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:t}),!this.records.has(t.id))return;const n=await this.getRecord(t.id);typeof n.response>"u"&&(n.response=rp(t)?{error:t.error}:{result:t.result},this.records.set(n.id,n),this.events.emit(Gy.updated,n))},this.get=async(t,n)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:t,id:n}),await this.getRecord(n)),this.delete=(t,n)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:n}),this.values.forEach((r=>{if(r.topic===t){if(typeof n<"u"&&r.id!==n)return;this.records.delete(r.id),this.events.emit(Gy.deleted,r)}}))},this.exists=async(t,n)=>(this.isInitialized(),this.records.has(n)?(await this.getRecord(n)).topic===t:!1),this.on=(t,n)=>{this.events.on(t,n)},this.once=(t,n)=>{this.events.once(t,n)},this.off=(t,n)=>{this.events.off(t,n)},this.removeListener=(t,n)=>{this.events.removeListener(t,n)},this.logger=Dh.generateChildLogger(r,this.name)}get context(){return Dh.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const t=[];return this.values.forEach((n=>{if(typeof n.response<"u")return;const r={topic:n.topic,request:kv(n.request.method,n.request.params,n.id),chainId:n.chainId};return t.push(r)})),t}async setJsonRpcRecords(t){await this.core.storage.setItem(this.storageKey,t)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(t){this.isInitialized();const n=this.records.get(t);if(!n){const{message:n}=hu("NO_MATCHING_KEY",`${this.name}: ${t}`);throw new Error(n)}return n}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Gy.sync)}async restore(){try{const t=await this.getJsonRpcRecords();if(typeof t>"u"||!t.length)return;if(this.records.size){const{message:t}=hu("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=t,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(t){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(t)}}registerEventListeners(){this.events.on(Gy.created,(t=>{const n=Gy.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:t}),this.persist()})),this.events.on(Gy.updated,(t=>{const n=Gy.updated;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:t}),this.persist()})),this.events.on(Gy.deleted,(t=>{const n=Gy.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:t}),this.persist()})),this.core.heartbeat.on(Bc.HEARTBEAT_EVENTS.pulse,(()=>{this.cleanup()}))}cleanup(){try{this.records.forEach((t=>{ds.toMiliseconds(t.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${t.id}`),this.delete(t.topic,t.id))}))}catch(t){this.logger.warn(t)}}isInitialized(){if(!this.initialized){const{message:t}=hu("NOT_INITIALIZED",this.name);throw new Error(t)}}}class Pb extends Xf{constructor(n,r){super(n,r),this.core=n,this.logger=r,this.expirations=new Map,this.events=new t.exports.EventEmitter,this.name=Wy,this.version=Ky,this.cached=[],this.initialized=!1,this.storagePrefix=hy,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach((t=>this.expirations.set(t.target,t))),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=t=>{try{const n=this.formatTarget(t);return typeof this.getExpiration(n)<"u"}catch{return!1}},this.set=(t,n)=>{this.isInitialized();const r=this.formatTarget(t),e={target:r,expiry:n};this.expirations.set(r,e),this.checkExpiry(r,e),this.events.emit(By.created,{target:r,expiration:e})},this.get=t=>{this.isInitialized();const n=this.formatTarget(t);return this.getExpiration(n)},this.del=t=>{if(this.isInitialized(),this.has(t)){const n=this.formatTarget(t),r=this.getExpiration(n);this.expirations.delete(n),this.events.emit(By.deleted,{target:n,expiration:r})}},this.on=(t,n)=>{this.events.on(t,n)},this.once=(t,n)=>{this.events.once(t,n)},this.off=(t,n)=>{this.events.off(t,n)},this.removeListener=(t,n)=>{this.events.removeListener(t,n)},this.logger=Dh.generateChildLogger(r,this.name)}get context(){return Dh.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(t){if(typeof t=="string")return Ma(t);if(typeof t=="number")return Ca(t);const{message:n}=hu("UNKNOWN_TYPE",`Target type: ${typeof t}`);throw new Error(n)}async setExpirations(t){await this.core.storage.setItem(this.storageKey,t)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(By.sync)}async restore(){try{const t=await this.getExpirations();if(typeof t>"u"||!t.length)return;if(this.expirations.size){const{message:t}=hu("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=t,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(t){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(t)}}getExpiration(t){const n=this.expirations.get(t);if(!n){const{message:n}=hu("NO_MATCHING_KEY",`${this.name}: ${t}`);throw this.logger.error(n),new Error(n)}return n}checkExpiry(t,n){const{expiry:r}=n;ds.toMiliseconds(r)-Date.now()<=0&&this.expire(t,n)}expire(t,n){this.expirations.delete(t),this.events.emit(By.expired,{target:t,expiration:n})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach(((t,n)=>this.checkExpiry(n,t)))}registerEventListeners(){this.core.heartbeat.on(Bc.HEARTBEAT_EVENTS.pulse,(()=>this.checkExpirations())),this.events.on(By.created,(t=>{const n=By.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:t}),this.persist()})),this.events.on(By.expired,(t=>{const n=By.expired;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:t}),this.persist()})),this.events.on(By.deleted,(t=>{const n=By.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:t}),this.persist()}))}isInitialized(){if(!this.initialized){const{message:t}=hu("NOT_INITIALIZED",this.name);throw new Error(t)}}}class xb extends tl{constructor(t,n){super(t,n),this.projectId=t,this.logger=n,this.name=Jy,this.initialized=!1,this.queue=[],this.verifyDisabled=!1,this.init=async()=>{if(this.verifyDisabled||ba()||!ma())return;const t=Zy;this.verifyUrl!==t&&this.removeIframe(),this.verifyUrl=t;try{await this.createIframe()}catch(t){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(t)}if(!this.initialized){this.removeIframe(),this.verifyUrl=Qy;try{await this.createIframe()}catch(t){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(t),this.verifyDisabled=!0}}},this.register=async t=>{this.initialized?this.sendPost(t.attestationId):(this.addToQueue(t.attestationId),await this.init())},this.resolve=async t=>{if(this.isDevEnv)return"";const n=t?.verifyUrl||Zy;let r;try{r=await this.fetchAttestation(t.attestationId,n)}catch(e){this.logger.info(`failed to resolve attestation: ${t.attestationId} from url: ${n}`),this.logger.info(e),r=await this.fetchAttestation(t.attestationId,Qy)}return r},this.fetchAttestation=async(t,n)=>{this.logger.info(`resolving attestation: ${t} from url: ${n}`);const r=this.startAbortTimer(ds.ONE_SECOND*2),e=await fetch(`${n}/attestation/${t}`,{signal:this.abortController.signal});return clearTimeout(r),e.status===200?await e.json():void 0},this.addToQueue=t=>{this.queue.push(t)},this.processQueue=()=>{this.queue.length!==0&&(this.queue.forEach((t=>this.sendPost(t))),this.queue=[])},this.sendPost=t=>{var n;try{if(!this.iframe)return;(n=this.iframe.contentWindow)==null||n.postMessage(t,"*"),this.logger.info(`postMessage sent: ${t} ${this.verifyUrl}`)}catch{}},this.createIframe=async()=>{let t;const n=r=>{r.data==="verify_ready"&&(this.initialized=!0,this.processQueue(),window.removeEventListener("message",n),t())};await Promise.race([new Promise((r=>{if(document.getElementById(Jy))return r();window.addEventListener("message",n);const e=document.createElement("iframe");e.id=Jy,e.src=`${this.verifyUrl}/${this.projectId}`,e.style.display="none",document.body.append(e),this.iframe=e,t=r})),new Promise(((t,r)=>setTimeout((()=>{window.removeEventListener("message",n),r("verify iframe load timeout")}),ds.toMiliseconds(ds.FIVE_SECONDS))))])},this.removeIframe=()=>{this.iframe&&(this.iframe.remove(),this.iframe=void 0,this.initialized=!1)},this.logger=Dh.generateChildLogger(n,this.name),this.verifyUrl=Zy,this.abortController=new AbortController,this.isDevEnv=ya()&&r.env.IS_VITEST}get context(){return Dh.getLoggerContext(this.logger)}startAbortTimer(t){return this.abortController=new AbortController,setTimeout((()=>this.abortController.abort()),ds.toMiliseconds(t))}}var $b=Object.defineProperty,Tb=Object.getOwnPropertySymbols,Mb=Object.prototype.hasOwnProperty,Cb=Object.prototype.propertyIsEnumerable,Rb=(t,n,r)=>n in t?$b(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,Ub=(t,n)=>{for(var r in n||(n={}))Mb.call(n,r)&&Rb(t,r,n[r]);if(Tb)for(var r of Tb(n))Cb.call(n,r)&&Rb(t,r,n[r]);return t};class Db extends Wf{constructor(n){super(n),this.protocol=ay,this.version=uy,this.name=cy,this.events=new t.exports.EventEmitter,this.initialized=!1,this.on=(t,n)=>this.events.on(t,n),this.once=(t,n)=>this.events.once(t,n),this.off=(t,n)=>this.events.off(t,n),this.removeListener=(t,n)=>this.events.removeListener(t,n),this.projectId=n?.projectId,this.relayUrl=n?.relayUrl||Sy,this.customStoragePrefix=n!=null&&n.customStoragePrefix?`:${n.customStoragePrefix}`:"";const r=typeof n?.logger<"u"&&typeof n?.logger!="string"?n.logger:Dh.pino(Dh.getDefaultLoggerOptions({level:n?.logger||fy.logger}));this.logger=Dh.generateChildLogger(r,this.name),this.heartbeat=new Bc.HeartBeat,this.crypto=new Xy(this,this.logger,n?.keychain),this.history=new Nb(this,this.logger),this.expirer=new Pb(this,this.logger),this.storage=n!=null&&n.storage?n.storage:new Wc(Ub(Ub({},ly),n?.storageOptions)),this.relayer=new mb({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new Ab(this,this.logger),this.verify=new xb(this.projectId||"",this.logger)}static async init(t){const n=new Db(t);await n.initialize();const r=await n.crypto.getClientId();return await n.storage.setItem(Cy,r),n}get context(){return Dh.getLoggerContext(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(t){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,t),this.logger.error(t.message),t}}}const kb=Db;class Lb{constructor(t){this.opts=t,this.protocol="wc",this.version=2}}class qb{constructor(t){this.client=t}}const Vb="wc",Fb=2,Gb="client",Hb=`${Vb}@${Fb}:${Gb}:`,zb={name:Gb,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},Wb="WALLETCONNECT_DEEPLINK_CHOICE",Bb="proposal",Kb="Proposal expired",Jb="session",Zb=ds.SEVEN_DAYS,Qb="engine",Yb={wc_sessionPropose:{req:{ttl:ds.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:ds.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:ds.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:ds.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:ds.ONE_DAY,prompt:!1,tag:1104},res:{ttl:ds.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:ds.ONE_DAY,prompt:!1,tag:1106},res:{ttl:ds.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:ds.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:ds.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:ds.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:ds.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:ds.ONE_DAY,prompt:!1,tag:1112},res:{ttl:ds.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:ds.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:ds.THIRTY_SECONDS,prompt:!1,tag:1115}}},Xb={min:ds.FIVE_MINUTES,max:ds.SEVEN_DAYS},tm={idle:"IDLE",active:"ACTIVE"},nm="request",rm=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var em=Object.defineProperty,im=Object.defineProperties,sm=Object.getOwnPropertyDescriptors,om=Object.getOwnPropertySymbols,am=Object.prototype.hasOwnProperty,um=Object.prototype.propertyIsEnumerable,cm=(t,n,r)=>n in t?em(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,hm=(t,n)=>{for(var r in n||(n={}))am.call(n,r)&&cm(t,r,n[r]);if(om)for(var r of om(n))um.call(n,r)&&cm(t,r,n[r]);return t},fm=(t,n)=>im(t,sm(n));class lm extends qb{constructor(t){super(t),this.name=Qb,this.events=new n,this.initialized=!1,this.ignoredPayloadTypes=[Go],this.requestQueue={state:tm.idle,queue:[]},this.sessionRequestQueue={state:tm.idle,queue:[]},this.requestQueueDelay=ds.ONE_SECOND,this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),this.client.core.pairing.register({methods:Object.keys(Yb)}),this.initialized=!0,setTimeout((()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()}),ds.toMiliseconds(this.requestQueueDelay)))},this.connect=async t=>{await this.isInitialized();const n=fm(hm({},t),{requiredNamespaces:t.requiredNamespaces||{},optionalNamespaces:t.optionalNamespaces||{}});await this.isValidConnect(n);const{pairingTopic:r,requiredNamespaces:e,optionalNamespaces:i,sessionProperties:s,relays:o}=n;let a=r,u,c=!1;if(a&&(c=this.client.core.pairing.pairings.get(a).active),!a||!c){const{topic:t,uri:n}=await this.client.core.pairing.create();a=t,u=n}const h=await this.client.core.crypto.generateKeyPair(),f=hm({requiredNamespaces:e,optionalNamespaces:i,relays:o??[{protocol:Ey}],proposer:{publicKey:h,metadata:this.client.metadata}},s&&{sessionProperties:s}),{reject:l,resolve:d,done:v}=xa(ds.FIVE_MINUTES,Kb);if(this.events.once(ka("session_connect"),(async({error:t,session:n})=>{if(t)l(t);else if(n){n.self.publicKey=h;const t=fm(hm({},n),{requiredNamespaces:n.requiredNamespaces,optionalNamespaces:n.optionalNamespaces});await this.client.session.set(n.topic,t),await this.setExpiry(n.topic,n.expiry),a&&await this.client.core.pairing.updateMetadata({topic:a,metadata:n.peer.metadata}),d(t)}})),!a){const{message:t}=hu("NO_MATCHING_KEY",`connect() pairing topic: ${a}`);throw new Error(t)}const p=await this.sendRequest({topic:a,method:"wc_sessionPropose",params:f}),w=Ua(ds.FIVE_MINUTES);return await this.setProposal(p,hm({id:p,expiry:w},f)),{uri:u,approval:v}},this.pair=async t=>(await this.isInitialized(),await this.client.core.pairing.pair(t)),this.approve=async t=>{await this.isInitialized(),await this.isValidApprove(t);const{id:n,relayProtocol:r,namespaces:e,sessionProperties:i}=t,s=this.client.proposal.get(n);let{pairingTopic:o,proposer:a,requiredNamespaces:u,optionalNamespaces:c}=s;o=o||"",du(u)||(u=su(e,"approve()"));const h=await this.client.core.crypto.generateKeyPair(),f=a.publicKey,l=await this.client.core.crypto.generateSharedKey(h,f);o&&n&&(await this.client.core.pairing.updateMetadata({topic:o,metadata:a.metadata}),await this.sendResult({id:n,topic:o,result:{relay:{protocol:r??"irn"},responderPublicKey:h}}),await this.client.proposal.delete(n,fu("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:o}));const d=hm({relay:{protocol:r??"irn"},namespaces:e,requiredNamespaces:u,optionalNamespaces:c,pairingTopic:o,controller:{publicKey:h,metadata:this.client.metadata},expiry:Ua(Zb)},i&&{sessionProperties:i});await this.client.core.relayer.subscribe(l),await this.sendRequest({topic:l,method:"wc_sessionSettle",params:d,throwOnFailedPublish:!0});const v=fm(hm({},d),{topic:l,pairingTopic:o,acknowledged:!1,self:d.controller,peer:{publicKey:a.publicKey,metadata:a.metadata},controller:h});return await this.client.session.set(l,v),await this.setExpiry(l,Ua(Zb)),{topic:l,acknowledged:()=>new Promise((t=>setTimeout((()=>t(this.client.session.get(l))),500)))}},this.reject=async t=>{await this.isInitialized(),await this.isValidReject(t);const{id:n,reason:r}=t,{pairingTopic:e}=this.client.proposal.get(n);e&&(await this.sendError(n,e,r),await this.client.proposal.delete(n,fu("USER_DISCONNECTED")))},this.update=async t=>{await this.isInitialized(),await this.isValidUpdate(t);const{topic:n,namespaces:r}=t,e=await this.sendRequest({topic:n,method:"wc_sessionUpdate",params:{namespaces:r}}),{done:i,resolve:s,reject:o}=xa();return this.events.once(ka("session_update",e),(({error:t})=>{t?o(t):s()})),await this.client.session.update(n,{namespaces:r}),{acknowledged:i}},this.extend=async t=>{await this.isInitialized(),await this.isValidExtend(t);const{topic:n}=t,r=await this.sendRequest({topic:n,method:"wc_sessionExtend",params:{}}),{done:e,resolve:i,reject:s}=xa();return this.events.once(ka("session_extend",r),(({error:t})=>{t?s(t):i()})),await this.setExpiry(n,Ua(Zb)),{acknowledged:e}},this.request=async t=>{await this.isInitialized(),await this.isValidRequest(t);const{chainId:n,request:r,topic:e,expiry:i}=t,s=Uv(),{done:o,resolve:a,reject:u}=xa(i,"Request expired. Please try again.");return this.events.once(ka("session_request",s),(({error:t,result:n})=>{t?u(t):a(n)})),await Promise.all([new Promise((async t=>{await this.sendRequest({clientRpcId:s,topic:e,method:"wc_sessionRequest",params:{request:r,chainId:n},expiry:i,throwOnFailedPublish:!0}).catch((t=>u(t))),this.client.events.emit("session_request_sent",{topic:e,request:r,chainId:n,id:s}),t()})),new Promise((async t=>{const n=await this.client.core.storage.getItem(Wb);qa({id:s,topic:e,wcDeepLink:n}),t()})),o()]).then((t=>t[2]))},this.respond=async t=>{await this.isInitialized(),await this.isValidRespond(t);const{topic:n,response:r}=t,{id:e}=r;np(r)?await this.sendResult({id:e,topic:n,result:r.result,throwOnFailedPublish:!0}):rp(r)&&await this.sendError(e,n,r.error),this.cleanupAfterResponse(t)},this.ping=async t=>{await this.isInitialized(),await this.isValidPing(t);const{topic:n}=t;if(this.client.session.keys.includes(n)){const t=await this.sendRequest({topic:n,method:"wc_sessionPing",params:{}}),{done:r,resolve:e,reject:i}=xa();this.events.once(ka("session_ping",t),(({error:t})=>{t?i(t):e()})),await r()}else this.client.core.pairing.pairings.keys.includes(n)&&await this.client.core.pairing.ping({topic:n})},this.emit=async t=>{await this.isInitialized(),await this.isValidEmit(t);const{topic:n,event:r,chainId:e}=t;await this.sendRequest({topic:n,method:"wc_sessionEvent",params:{event:r,chainId:e}})},this.disconnect=async t=>{await this.isInitialized(),await this.isValidDisconnect(t);const{topic:n}=t;this.client.session.keys.includes(n)?(await this.sendRequest({topic:n,method:"wc_sessionDelete",params:fu("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession(n)):await this.client.core.pairing.disconnect({topic:n})},this.find=t=>(this.isInitialized(),this.client.session.getAll().filter((n=>yu(n,t)))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=async t=>{if(t.pairingTopic)try{const n=this.client.core.pairing.pairings.get(t.pairingTopic),r=this.client.core.pairing.pairings.getAll().filter((r=>{var e,i;return((e=r.peerMetadata)==null?void 0:e.url)&&((i=r.peerMetadata)==null?void 0:i.url)===t.peer.metadata.url&&r.topic&&r.topic!==n.topic}));if(r.length===0)return;this.client.logger.info(`Cleaning up ${r.length} duplicate pairing(s)`),await Promise.all(r.map((t=>this.client.core.pairing.disconnect({topic:t.topic})))),this.client.logger.info("Duplicate pairings clean up finished")}catch(t){this.client.logger.error(t)}},this.deleteSession=async(t,n)=>{const{self:r}=this.client.session.get(t);await this.client.core.relayer.unsubscribe(t),this.client.session.delete(t,fu("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(r.publicKey)&&await this.client.core.crypto.deleteKeyPair(r.publicKey),this.client.core.crypto.keychain.has(t)&&await this.client.core.crypto.deleteSymKey(t),n||this.client.core.expirer.del(t),this.client.core.storage.removeItem(Wb).catch((t=>this.client.logger.warn(t)))},this.deleteProposal=async(t,n)=>{await Promise.all([this.client.proposal.delete(t,fu("USER_DISCONNECTED")),n?Promise.resolve():this.client.core.expirer.del(t)])},this.deletePendingSessionRequest=async(t,n,r=!1)=>{await Promise.all([this.client.pendingRequest.delete(t,n),r?Promise.resolve():this.client.core.expirer.del(t)]),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter((n=>n.id!==t)),r&&(this.sessionRequestQueue.state=tm.idle)},this.setExpiry=async(t,n)=>{this.client.session.keys.includes(t)&&await this.client.session.update(t,{expiry:n}),this.client.core.expirer.set(t,n)},this.setProposal=async(t,n)=>{await this.client.proposal.set(t,n),this.client.core.expirer.set(t,n.expiry)},this.setPendingSessionRequest=async t=>{const n=Yb.wc_sessionRequest.req.ttl,{id:r,topic:e,params:i,verifyContext:s}=t;await this.client.pendingRequest.set(r,{id:r,topic:e,params:i,verifyContext:s}),n&&this.client.core.expirer.set(r,Ua(n))},this.sendRequest=async t=>{const{topic:n,method:r,params:e,expiry:i,relayRpcId:s,clientRpcId:o,throwOnFailedPublish:a}=t,u=kv(r,e,o);if(ma()&&rm.includes(r)){const t=Yo(JSON.stringify(u));this.client.core.verify.register({attestationId:t})}const c=await this.client.core.crypto.encode(n,u),h=Yb[r].req;return i&&(h.ttl=i),s&&(h.id=s),this.client.core.history.set(n,u),a?(h.internal=fm(hm({},h.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(n,c,h)):this.client.core.relayer.publish(n,c,h).catch((t=>this.client.logger.error(t))),u.id},this.sendResult=async t=>{const{id:n,topic:r,result:e,throwOnFailedPublish:i}=t,s=Lv(n,e),o=await this.client.core.crypto.encode(r,s),a=await this.client.core.history.get(r,n),u=Yb[a.request.method].res;i?(u.internal=fm(hm({},u.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,o,u)):this.client.core.relayer.publish(r,o,u).catch((t=>this.client.logger.error(t))),await this.client.core.history.resolve(s)},this.sendError=async(t,n,r)=>{const e=qv(t,r),i=await this.client.core.crypto.encode(n,e),s=await this.client.core.history.get(n,t),o=Yb[s.request.method].res;this.client.core.relayer.publish(n,i,o),await this.client.core.history.resolve(e)},this.cleanup=async()=>{const t=[],n=[];this.client.session.getAll().forEach((n=>{Da(n.expiry)&&t.push(n.topic)})),this.client.proposal.getAll().forEach((t=>{Da(t.expiry)&&n.push(t.id)})),await Promise.all([...t.map((t=>this.deleteSession(t))),...n.map((t=>this.deleteProposal(t)))])},this.onRelayEventRequest=async t=>{this.requestQueue.queue.push(t),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state===tm.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=tm.active;const t=this.requestQueue.queue.shift();if(t)try{this.processRequest(t),await new Promise((t=>setTimeout(t,300)))}catch(t){this.client.logger.warn(t)}}this.requestQueue.state=tm.idle},this.processRequest=t=>{const{topic:n,payload:r}=t,e=r.method;switch(e){case"wc_sessionPropose":return this.onSessionProposeRequest(n,r);case"wc_sessionSettle":return this.onSessionSettleRequest(n,r);case"wc_sessionUpdate":return this.onSessionUpdateRequest(n,r);case"wc_sessionExtend":return this.onSessionExtendRequest(n,r);case"wc_sessionPing":return this.onSessionPingRequest(n,r);case"wc_sessionDelete":return this.onSessionDeleteRequest(n,r);case"wc_sessionRequest":return this.onSessionRequest(n,r);case"wc_sessionEvent":return this.onSessionEventRequest(n,r);default:return this.client.logger.info(`Unsupported request method ${e}`)}},this.onRelayEventResponse=async t=>{const{topic:n,payload:r}=t,e=(await this.client.core.history.get(n,r.id)).request.method;switch(e){case"wc_sessionPropose":return this.onSessionProposeResponse(n,r);case"wc_sessionSettle":return this.onSessionSettleResponse(n,r);case"wc_sessionUpdate":return this.onSessionUpdateResponse(n,r);case"wc_sessionExtend":return this.onSessionExtendResponse(n,r);case"wc_sessionPing":return this.onSessionPingResponse(n,r);case"wc_sessionRequest":return this.onSessionRequestResponse(n,r);default:return this.client.logger.info(`Unsupported response method ${e}`)}},this.onRelayEventUnknownPayload=t=>{const{topic:n}=t,{message:r}=hu("MISSING_OR_INVALID",`Decoded payload on topic ${n} is not identifiable as a JSON-RPC request or a response.`);throw new Error(r)},this.onSessionProposeRequest=async(t,n)=>{const{params:r,id:e}=n;try{this.isValidConnect(hm({},n.params));const i=Ua(ds.FIVE_MINUTES),s=hm({id:e,pairingTopic:t,expiry:i},r);await this.setProposal(e,s);const o=Yo(JSON.stringify(n)),a=await this.getVerifyContext(o,s.proposer.metadata);this.client.events.emit("session_proposal",{id:e,params:s,verifyContext:a})}catch(n){await this.sendError(e,t,n),this.client.logger.error(n)}},this.onSessionProposeResponse=async(t,n)=>{const{id:r}=n;if(np(n)){const{result:e}=n;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:e});const i=this.client.proposal.get(r);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:i});const s=i.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:s});const o=e.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:o});const a=await this.client.core.crypto.generateSharedKey(s,o);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:a});const u=await this.client.core.relayer.subscribe(a);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:u}),await this.client.core.pairing.activate({topic:t})}else rp(n)&&(await this.client.proposal.delete(r,fu("USER_DISCONNECTED")),this.events.emit(ka("session_connect"),{error:n.error}))},this.onSessionSettleRequest=async(t,n)=>{const{id:r,params:e}=n;try{this.isValidSessionSettleRequest(e);const{relay:r,controller:i,expiry:s,namespaces:o,requiredNamespaces:a,optionalNamespaces:u,sessionProperties:c,pairingTopic:h}=n.params,f=hm({topic:t,relay:r,expiry:s,namespaces:o,acknowledged:!0,pairingTopic:h,requiredNamespaces:a,optionalNamespaces:u,controller:i.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:i.publicKey,metadata:i.metadata}},c&&{sessionProperties:c});await this.sendResult({id:n.id,topic:t,result:!0}),this.events.emit(ka("session_connect"),{session:f}),this.cleanupDuplicatePairings(f)}catch(n){await this.sendError(r,t,n),this.client.logger.error(n)}},this.onSessionSettleResponse=async(t,n)=>{const{id:r}=n;np(n)?(await this.client.session.update(t,{acknowledged:!0}),this.events.emit(ka("session_approve",r),{})):rp(n)&&(await this.client.session.delete(t,fu("USER_DISCONNECTED")),this.events.emit(ka("session_approve",r),{error:n.error}))},this.onSessionUpdateRequest=async(t,n)=>{const{params:r,id:e}=n;try{const n=`${t}_session_update`,i=ec.get(n);if(i&&this.isRequestOutOfSync(i,e)){this.client.logger.info(`Discarding out of sync request - ${e}`);return}this.isValidUpdate(hm({topic:t},r)),await this.client.session.update(t,{namespaces:r.namespaces}),await this.sendResult({id:e,topic:t,result:!0}),this.client.events.emit("session_update",{id:e,topic:t,params:r}),ec.set(n,e)}catch(n){await this.sendError(e,t,n),this.client.logger.error(n)}},this.isRequestOutOfSync=(t,n)=>parseInt(n.toString().slice(0,-3))<=parseInt(t.toString().slice(0,-3)),this.onSessionUpdateResponse=(t,n)=>{const{id:r}=n;np(n)?this.events.emit(ka("session_update",r),{}):rp(n)&&this.events.emit(ka("session_update",r),{error:n.error})},this.onSessionExtendRequest=async(t,n)=>{const{id:r}=n;try{this.isValidExtend({topic:t}),await this.setExpiry(t,Ua(Zb)),await this.sendResult({id:r,topic:t,result:!0}),this.client.events.emit("session_extend",{id:r,topic:t})}catch(n){await this.sendError(r,t,n),this.client.logger.error(n)}},this.onSessionExtendResponse=(t,n)=>{const{id:r}=n;np(n)?this.events.emit(ka("session_extend",r),{}):rp(n)&&this.events.emit(ka("session_extend",r),{error:n.error})},this.onSessionPingRequest=async(t,n)=>{const{id:r}=n;try{this.isValidPing({topic:t}),await this.sendResult({id:r,topic:t,result:!0}),this.client.events.emit("session_ping",{id:r,topic:t})}catch(n){await this.sendError(r,t,n),this.client.logger.error(n)}},this.onSessionPingResponse=(t,n)=>{const{id:r}=n;setTimeout((()=>{np(n)?this.events.emit(ka("session_ping",r),{}):rp(n)&&this.events.emit(ka("session_ping",r),{error:n.error})}),500)},this.onSessionDeleteRequest=async(t,n)=>{const{id:r}=n;try{this.isValidDisconnect({topic:t,reason:n.params}),await Promise.all([new Promise((n=>{this.client.core.relayer.once(Ay.publish,(async()=>{n(await this.deleteSession(t))}))})),this.sendResult({id:r,topic:t,result:!0})]),this.client.events.emit("session_delete",{id:r,topic:t})}catch(t){this.client.logger.error(t)}},this.onSessionRequest=async(t,n)=>{const{id:r,params:e}=n;try{this.isValidRequest(hm({topic:t},e));const n=Yo(JSON.stringify(kv("wc_sessionRequest",e,r))),i=this.client.session.get(t),s=await this.getVerifyContext(n,i.peer.metadata),o={id:r,topic:t,params:e,verifyContext:s};await this.setPendingSessionRequest(o),this.addSessionRequestToSessionRequestQueue(o),this.processSessionRequestQueue()}catch(n){await this.sendError(r,t,n),this.client.logger.error(n)}},this.onSessionRequestResponse=(t,n)=>{const{id:r}=n;np(n)?this.events.emit(ka("session_request",r),{result:n.result}):rp(n)&&this.events.emit(ka("session_request",r),{error:n.error})},this.onSessionEventRequest=async(t,n)=>{const{id:r,params:e}=n;try{const n=`${t}_session_event_${e.event.name}`,i=ec.get(n);if(i&&this.isRequestOutOfSync(i,r)){this.client.logger.info(`Discarding out of sync request - ${r}`);return}this.isValidEmit(hm({topic:t},e)),this.client.events.emit("session_event",{id:r,topic:t,params:e}),ec.set(n,r)}catch(n){await this.sendError(r,t,n),this.client.logger.error(n)}},this.addSessionRequestToSessionRequestQueue=t=>{this.sessionRequestQueue.queue.push(t)},this.cleanupAfterResponse=t=>{this.deletePendingSessionRequest(t.response.id,{message:"fulfilled",code:0}),setTimeout((()=>{this.sessionRequestQueue.state=tm.idle,this.processSessionRequestQueue()}),ds.toMiliseconds(this.requestQueueDelay))},this.processSessionRequestQueue=()=>{if(this.sessionRequestQueue.state===tm.active){this.client.logger.info("session request queue is already active.");return}const t=this.sessionRequestQueue.queue[0];if(!t){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=tm.active,this.client.events.emit("session_request",t)}catch(t){this.client.logger.error(t)}},this.onPairingCreated=t=>{if(t.active)return;const n=this.client.proposal.getAll().find((n=>n.pairingTopic===t.topic));n&&this.onSessionProposeRequest(t.topic,kv("wc_sessionPropose",{requiredNamespaces:n.requiredNamespaces,optionalNamespaces:n.optionalNamespaces,relays:n.relays,proposer:n.proposer},n.id))},this.isValidConnect=async t=>{if(!Uu(t)){const{message:n}=hu("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(t)}`);throw new Error(n)}const{pairingTopic:n,requiredNamespaces:r,optionalNamespaces:e,sessionProperties:i,relays:s}=t;if(vu(n)||await this.isValidPairingTopic(n),!Cu(s,!0)){const{message:t}=hu("MISSING_OR_INVALID",`connect() relays: ${s}`);throw new Error(t)}!vu(r)&&du(r)!==0&&this.validateNamespaces(r,"requiredNamespaces"),!vu(e)&&du(e)!==0&&this.validateNamespaces(e,"optionalNamespaces"),vu(i)||this.validateSessionProps(i,"sessionProperties")},this.validateNamespaces=(t,n)=>{const r=$u(t,"connect()",n);if(r)throw new Error(r.message)},this.isValidApprove=async t=>{if(!Uu(t))throw new Error(hu("MISSING_OR_INVALID",`approve() params: ${t}`).message);const{id:n,namespaces:r,relayProtocol:e,sessionProperties:i}=t;await this.isValidProposalId(n);const s=this.client.proposal.get(n),o=Tu(r,"approve()");if(o)throw new Error(o.message);const a=Hu(s.requiredNamespaces,r,"approve()");if(a)throw new Error(a.message);if(!pu(e,!0)){const{message:t}=hu("MISSING_OR_INVALID",`approve() relayProtocol: ${e}`);throw new Error(t)}vu(i)||this.validateSessionProps(i,"sessionProperties")},this.isValidReject=async t=>{if(!Uu(t)){const{message:n}=hu("MISSING_OR_INVALID",`reject() params: ${t}`);throw new Error(n)}const{id:n,reason:r}=t;if(await this.isValidProposalId(n),!Du(r)){const{message:t}=hu("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(r)}`);throw new Error(t)}},this.isValidSessionSettleRequest=t=>{if(!Uu(t)){const{message:n}=hu("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${t}`);throw new Error(n)}const{relay:n,controller:r,namespaces:e,expiry:i}=t;if(!Mu(n)){const{message:t}=hu("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(t)}const s=Ou(r,"onSessionSettleRequest()");if(s)throw new Error(s.message);const o=Tu(e,"onSessionSettleRequest()");if(o)throw new Error(o.message);if(Da(i)){const{message:t}=hu("EXPIRED","onSessionSettleRequest()");throw new Error(t)}},this.isValidUpdate=async t=>{if(!Uu(t)){const{message:n}=hu("MISSING_OR_INVALID",`update() params: ${t}`);throw new Error(n)}const{topic:n,namespaces:r}=t;await this.isValidSessionTopic(n);const e=this.client.session.get(n),i=Tu(r,"update()");if(i)throw new Error(i.message);const s=Hu(e.requiredNamespaces,r,"update()");if(s)throw new Error(s.message)},this.isValidExtend=async t=>{if(!Uu(t)){const{message:n}=hu("MISSING_OR_INVALID",`extend() params: ${t}`);throw new Error(n)}const{topic:n}=t;await this.isValidSessionTopic(n)},this.isValidRequest=async t=>{if(!Uu(t)){const{message:n}=hu("MISSING_OR_INVALID",`request() params: ${t}`);throw new Error(n)}const{topic:n,request:r,chainId:e,expiry:i}=t;await this.isValidSessionTopic(n);const{namespaces:s}=this.client.session.get(n);if(!Vu(s,e)){const{message:t}=hu("MISSING_OR_INVALID",`request() chainId: ${e}`);throw new Error(t)}if(!ku(r)){const{message:t}=hu("MISSING_OR_INVALID",`request() ${JSON.stringify(r)}`);throw new Error(t)}if(!Fu(s,e,r.method)){const{message:t}=hu("MISSING_OR_INVALID",`request() method: ${r.method}`);throw new Error(t)}if(i&&!Ku(i,Xb)){const{message:t}=hu("MISSING_OR_INVALID",`request() expiry: ${i}. Expiry must be a number (in seconds) between ${Xb.min} and ${Xb.max}`);throw new Error(t)}},this.isValidRespond=async t=>{if(!Uu(t)){const{message:n}=hu("MISSING_OR_INVALID",`respond() params: ${t}`);throw new Error(n)}const{topic:n,response:r}=t;if(await this.isValidSessionTopic(n),!Lu(r)){const{message:t}=hu("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(r)}`);throw new Error(t)}},this.isValidPing=async t=>{if(!Uu(t)){const{message:n}=hu("MISSING_OR_INVALID",`ping() params: ${t}`);throw new Error(n)}const{topic:n}=t;await this.isValidSessionOrPairingTopic(n)},this.isValidEmit=async t=>{if(!Uu(t)){const{message:n}=hu("MISSING_OR_INVALID",`emit() params: ${t}`);throw new Error(n)}const{topic:n,event:r,chainId:e}=t;await this.isValidSessionTopic(n);const{namespaces:i}=this.client.session.get(n);if(!Vu(i,e)){const{message:t}=hu("MISSING_OR_INVALID",`emit() chainId: ${e}`);throw new Error(t)}if(!qu(r)){const{message:t}=hu("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(r)}`);throw new Error(t)}if(!Gu(i,e,r.name)){const{message:t}=hu("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(r)}`);throw new Error(t)}},this.isValidDisconnect=async t=>{if(!Uu(t)){const{message:n}=hu("MISSING_OR_INVALID",`disconnect() params: ${t}`);throw new Error(n)}const{topic:n}=t;await this.isValidSessionOrPairingTopic(n)},this.getVerifyContext=async(t,n)=>{const r={verified:{verifyUrl:n.verifyUrl||Zy,validation:"UNKNOWN",origin:n.url||""}};try{const e=await this.client.core.verify.resolve({attestationId:t,verifyUrl:n.verifyUrl});e&&(r.verified.origin=e.origin,r.verified.isScam=e.isScam,r.verified.validation=e.origin===new URL(n.url).origin?"VALID":"INVALID")}catch(t){this.client.logger.info(t)}return this.client.logger.info(`Verify context: ${JSON.stringify(r)}`),r},this.validateSessionProps=(t,n)=>{Object.values(t).forEach((t=>{if(!pu(t,!1)){const{message:r}=hu("MISSING_OR_INVALID",`${n} must be in Record<string, string> format. Received: ${JSON.stringify(t)}`);throw new Error(r)}}))}}async isInitialized(){if(!this.initialized){const{message:t}=hu("NOT_INITIALIZED",this.name);throw new Error(t)}await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(Ay.message,(async t=>{const{topic:n,message:r}=t;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(r)))return;const e=await this.client.core.crypto.decode(n,r);try{Xv(e)?(this.client.core.history.set(n,e),this.onRelayEventRequest({topic:n,payload:e})):tp(e)?(await this.client.core.history.resolve(e),await this.onRelayEventResponse({topic:n,payload:e}),this.client.core.history.delete(n,e.id)):this.onRelayEventUnknownPayload({topic:n,payload:e})}catch(t){this.client.logger.error(t)}}))}registerExpirerEvents(){this.client.core.expirer.on(By.expired,(async t=>{const{topic:n,id:r}=Ra(t.target);if(r&&this.client.pendingRequest.keys.includes(r))return await this.deletePendingSessionRequest(r,hu("EXPIRED"),!0);n?this.client.session.keys.includes(n)&&(await this.deleteSession(n,!0),this.client.events.emit("session_expire",{topic:n})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r}))}))}registerPairingEvents(){this.client.core.pairing.events.on(Fy.create,(t=>this.onPairingCreated(t)))}isValidPairingTopic(t){if(!pu(t,!1)){const{message:n}=hu("MISSING_OR_INVALID",`pairing topic should be a string: ${t}`);throw new Error(n)}if(!this.client.core.pairing.pairings.keys.includes(t)){const{message:n}=hu("NO_MATCHING_KEY",`pairing topic doesn't exist: ${t}`);throw new Error(n)}if(Da(this.client.core.pairing.pairings.get(t).expiry)){const{message:n}=hu("EXPIRED",`pairing topic: ${t}`);throw new Error(n)}}async isValidSessionTopic(t){if(!pu(t,!1)){const{message:n}=hu("MISSING_OR_INVALID",`session topic should be a string: ${t}`);throw new Error(n)}if(!this.client.session.keys.includes(t)){const{message:n}=hu("NO_MATCHING_KEY",`session topic doesn't exist: ${t}`);throw new Error(n)}if(Da(this.client.session.get(t).expiry)){await this.deleteSession(t);const{message:n}=hu("EXPIRED",`session topic: ${t}`);throw new Error(n)}}async isValidSessionOrPairingTopic(t){if(this.client.session.keys.includes(t))await this.isValidSessionTopic(t);else if(this.client.core.pairing.pairings.keys.includes(t))this.isValidPairingTopic(t);else if(pu(t,!1)){const{message:n}=hu("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${t}`);throw new Error(n)}else{const{message:n}=hu("MISSING_OR_INVALID",`session or pairing topic should be a string: ${t}`);throw new Error(n)}}async isValidProposalId(t){if(!Ru(t)){const{message:n}=hu("MISSING_OR_INVALID",`proposal id should be a number: ${t}`);throw new Error(n)}if(!this.client.proposal.keys.includes(t)){const{message:n}=hu("NO_MATCHING_KEY",`proposal id doesn't exist: ${t}`);throw new Error(n)}if(Da(this.client.proposal.get(t).expiry)){await this.deleteProposal(t);const{message:n}=hu("EXPIRED",`proposal id: ${t}`);throw new Error(n)}}}class dm extends jb{constructor(t,n){super(t,n,Bb,Hb),this.core=t,this.logger=n}}class vm extends jb{constructor(t,n){super(t,n,Jb,Hb),this.core=t,this.logger=n}}class pm extends jb{constructor(t,n){super(t,n,nm,Hb,(t=>t.id)),this.core=t,this.logger=n}}class wm extends Lb{constructor(n){super(n),this.protocol=Vb,this.version=Fb,this.name=zb.name,this.events=new t.exports.EventEmitter,this.on=(t,n)=>this.events.on(t,n),this.once=(t,n)=>this.events.once(t,n),this.off=(t,n)=>this.events.off(t,n),this.removeListener=(t,n)=>this.events.removeListener(t,n),this.removeAllListeners=t=>this.events.removeAllListeners(t),this.connect=async t=>{try{return await this.engine.connect(t)}catch(t){throw this.logger.error(t.message),t}},this.pair=async t=>{try{return await this.engine.pair(t)}catch(t){throw this.logger.error(t.message),t}},this.approve=async t=>{try{return await this.engine.approve(t)}catch(t){throw this.logger.error(t.message),t}},this.reject=async t=>{try{return await this.engine.reject(t)}catch(t){throw this.logger.error(t.message),t}},this.update=async t=>{try{return await this.engine.update(t)}catch(t){throw this.logger.error(t.message),t}},this.extend=async t=>{try{return await this.engine.extend(t)}catch(t){throw this.logger.error(t.message),t}},this.request=async t=>{try{return await this.engine.request(t)}catch(t){throw this.logger.error(t.message),t}},this.respond=async t=>{try{return await this.engine.respond(t)}catch(t){throw this.logger.error(t.message),t}},this.ping=async t=>{try{return await this.engine.ping(t)}catch(t){throw this.logger.error(t.message),t}},this.emit=async t=>{try{return await this.engine.emit(t)}catch(t){throw this.logger.error(t.message),t}},this.disconnect=async t=>{try{return await this.engine.disconnect(t)}catch(t){throw this.logger.error(t.message),t}},this.find=t=>{try{return this.engine.find(t)}catch(t){throw this.logger.error(t.message),t}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(t){throw this.logger.error(t.message),t}},this.name=n?.name||zb.name,this.metadata=n?.metadata||Ea();const r=typeof n?.logger<"u"&&typeof n?.logger!="string"?n.logger:Dh.pino(Dh.getDefaultLoggerOptions({level:n?.logger||zb.logger}));this.core=n?.core||new kb(n),this.logger=Dh.generateChildLogger(r,this.name),this.session=new vm(this.core,this.logger),this.proposal=new dm(this.core,this.logger),this.pendingRequest=new pm(this.core,this.logger),this.engine=new lm(this)}static async init(t){const n=new wm(t);return await n.initialize(),n}get context(){return Dh.getLoggerContext(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(t){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(t.message),t}}}var ym={exports:{}};(function(t,n){var r=typeof self!=="undefined"?self:o;var e=function(){function t(){this.fetch=false;this.DOMException=r.DOMException}t.prototype=r;return new t}();(function(t){(function(n){var r={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{new Blob;return true}catch(t){return false}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};function e(t){return t&&DataView.prototype.isPrototypeOf(t)}if(r.arrayBuffer){var i=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"];var s=ArrayBuffer.isView||function(t){return t&&i.indexOf(Object.prototype.toString.call(t))>-1}}function o(t){if(typeof t!=="string"){t=String(t)}if(/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t)){throw new TypeError("Invalid character in header field name")}return t.toLowerCase()}function a(t){if(typeof t!=="string"){t=String(t)}return t}function u(t){var n={next:function(){var n=t.shift();return{done:n===undefined,value:n}}};if(r.iterable){n[Symbol.iterator]=function(){return n}}return n}function c(t){this.map={};if(t instanceof c){t.forEach((function(t,n){this.append(n,t)}),this)}else if(Array.isArray(t)){t.forEach((function(t){this.append(t[0],t[1])}),this)}else if(t){Object.getOwnPropertyNames(t).forEach((function(n){this.append(n,t[n])}),this)}}c.prototype.append=function(t,n){t=o(t);n=a(n);var r=this.map[t];this.map[t]=r?r+", "+n:n};c.prototype["delete"]=function(t){delete this.map[o(t)]};c.prototype.get=function(t){t=o(t);return this.has(t)?this.map[t]:null};c.prototype.has=function(t){return this.map.hasOwnProperty(o(t))};c.prototype.set=function(t,n){this.map[o(t)]=a(n)};c.prototype.forEach=function(t,n){for(var r in this.map){if(this.map.hasOwnProperty(r)){t.call(n,this.map[r],r,this)}}};c.prototype.keys=function(){var t=[];this.forEach((function(n,r){t.push(r)}));return u(t)};c.prototype.values=function(){var t=[];this.forEach((function(n){t.push(n)}));return u(t)};c.prototype.entries=function(){var t=[];this.forEach((function(n,r){t.push([r,n])}));return u(t)};if(r.iterable){c.prototype[Symbol.iterator]=c.prototype.entries}function h(t){if(t.bodyUsed){return Promise.reject(new TypeError("Already read"))}t.bodyUsed=true}function f(t){return new Promise((function(n,r){t.onload=function(){n(t.result)};t.onerror=function(){r(t.error)}}))}function l(t){var n=new FileReader;var r=f(n);n.readAsArrayBuffer(t);return r}function d(t){var n=new FileReader;var r=f(n);n.readAsText(t);return r}function v(t){var n=new Uint8Array(t);var r=new Array(n.length);for(var e=0;e<n.length;e++){r[e]=String.fromCharCode(n[e])}return r.join("")}function p(t){if(t.slice){return t.slice(0)}else{var n=new Uint8Array(t.byteLength);n.set(new Uint8Array(t));return n.buffer}}function w(){this.bodyUsed=false;this._initBody=function(t){this._bodyInit=t;if(!t){this._bodyText=""}else if(typeof t==="string"){this._bodyText=t}else if(r.blob&&Blob.prototype.isPrototypeOf(t)){this._bodyBlob=t}else if(r.formData&&FormData.prototype.isPrototypeOf(t)){this._bodyFormData=t}else if(r.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)){this._bodyText=t.toString()}else if(r.arrayBuffer&&r.blob&&e(t)){this._bodyArrayBuffer=p(t.buffer);this._bodyInit=new Blob([this._bodyArrayBuffer])}else if(r.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(t)||s(t))){this._bodyArrayBuffer=p(t)}else{this._bodyText=t=Object.prototype.toString.call(t)}if(!this.headers.get("content-type")){if(typeof t==="string"){this.headers.set("content-type","text/plain;charset=UTF-8")}else if(this._bodyBlob&&this._bodyBlob.type){this.headers.set("content-type",this._bodyBlob.type)}else if(r.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)){this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8")}}};if(r.blob){this.blob=function(){var t=h(this);if(t){return t}if(this._bodyBlob){return Promise.resolve(this._bodyBlob)}else if(this._bodyArrayBuffer){return Promise.resolve(new Blob([this._bodyArrayBuffer]))}else if(this._bodyFormData){throw new Error("could not read FormData body as blob")}else{return Promise.resolve(new Blob([this._bodyText]))}};this.arrayBuffer=function(){if(this._bodyArrayBuffer){return h(this)||Promise.resolve(this._bodyArrayBuffer)}else{return this.blob().then(l)}}}this.text=function(){var t=h(this);if(t){return t}if(this._bodyBlob){return d(this._bodyBlob)}else if(this._bodyArrayBuffer){return Promise.resolve(v(this._bodyArrayBuffer))}else if(this._bodyFormData){throw new Error("could not read FormData body as text")}else{return Promise.resolve(this._bodyText)}};if(r.formData){this.formData=function(){return this.text().then(g)}}this.json=function(){return this.text().then(JSON.parse)};return this}var y=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function b(t){var n=t.toUpperCase();return y.indexOf(n)>-1?n:t}function m(t,n){n=n||{};var r=n.body;if(t instanceof m){if(t.bodyUsed){throw new TypeError("Already read")}this.url=t.url;this.credentials=t.credentials;if(!n.headers){this.headers=new c(t.headers)}this.method=t.method;this.mode=t.mode;this.signal=t.signal;if(!r&&t._bodyInit!=null){r=t._bodyInit;t.bodyUsed=true}}else{this.url=String(t)}this.credentials=n.credentials||this.credentials||"same-origin";if(n.headers||!this.headers){this.headers=new c(n.headers)}this.method=b(n.method||this.method||"GET");this.mode=n.mode||this.mode||null;this.signal=n.signal||this.signal;this.referrer=null;if((this.method==="GET"||this.method==="HEAD")&&r){throw new TypeError("Body not allowed for GET or HEAD requests")}this._initBody(r)}m.prototype.clone=function(){return new m(this,{body:this._bodyInit})};function g(t){var n=new FormData;t.trim().split("&").forEach((function(t){if(t){var r=t.split("=");var e=r.shift().replace(/\+/g," ");var i=r.join("=").replace(/\+/g," ");n.append(decodeURIComponent(e),decodeURIComponent(i))}}));return n}function _(t){var n=new c;var r=t.replace(/\r?\n[\t ]+/g," ");r.split(/\r?\n/).forEach((function(t){var r=t.split(":");var e=r.shift().trim();if(e){var i=r.join(":").trim();n.append(e,i)}}));return n}w.call(m.prototype);function E(t,n){if(!n){n={}}this.type="default";this.status=n.status===undefined?200:n.status;this.ok=this.status>=200&&this.status<300;this.statusText="statusText"in n?n.statusText:"OK";this.headers=new c(n.headers);this.url=n.url||"";this._initBody(t)}w.call(E.prototype);E.prototype.clone=function(){return new E(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new c(this.headers),url:this.url})};E.error=function(){var t=new E(null,{status:0,statusText:""});t.type="error";return t};var O=[301,302,303,307,308];E.redirect=function(t,n){if(O.indexOf(n)===-1){throw new RangeError("Invalid status code")}return new E(null,{status:n,headers:{location:t}})};n.DOMException=t.DOMException;try{new n.DOMException}catch(t){n.DOMException=function(t,n){this.message=t;this.name=n;var r=Error(t);this.stack=r.stack};n.DOMException.prototype=Object.create(Error.prototype);n.DOMException.prototype.constructor=n.DOMException}function S(t,e){return new Promise((function(i,s){var o=new m(t,e);if(o.signal&&o.signal.aborted){return s(new n.DOMException("Aborted","AbortError"))}var a=new XMLHttpRequest;function u(){a.abort()}a.onload=function(){var t={status:a.status,statusText:a.statusText,headers:_(a.getAllResponseHeaders()||"")};t.url="responseURL"in a?a.responseURL:t.headers.get("X-Request-URL");var n="response"in a?a.response:a.responseText;i(new E(n,t))};a.onerror=function(){s(new TypeError("Network request failed"))};a.ontimeout=function(){s(new TypeError("Network request failed"))};a.onabort=function(){s(new n.DOMException("Aborted","AbortError"))};a.open(o.method,o.url,true);if(o.credentials==="include"){a.withCredentials=true}else if(o.credentials==="omit"){a.withCredentials=false}if("responseType"in a&&r.blob){a.responseType="blob"}o.headers.forEach((function(t,n){a.setRequestHeader(n,t)}));if(o.signal){o.signal.addEventListener("abort",u);a.onreadystatechange=function(){if(a.readyState===4){o.signal.removeEventListener("abort",u)}}}a.send(typeof o._bodyInit==="undefined"?null:o._bodyInit)}))}S.polyfill=true;if(!t.fetch){t.fetch=S;t.Headers=c;t.Request=m;t.Response=E}n.Headers=c;n.Request=m;n.Response=E;n.fetch=S;Object.defineProperty(n,"__esModule",{value:true});return n})({})})(e);e.fetch.ponyfill=true;delete e.fetch.polyfill;var i=e;n=i.fetch;n.default=i.fetch;n.fetch=i.fetch;n.Headers=i.Headers;n.Request=i.Request;n.Response=i.Response;t.exports=n})(ym,ym.exports);const bm=a(ym.exports);const mm=t=>JSON.stringify(t,((t,n)=>typeof n==="bigint"?n.toString()+"n":n));const gm=t=>{const n=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g;const r=t.replace(n,'$1"$2n"$3');return JSON.parse(r,((t,n)=>{const r=typeof n==="string"&&n.match(/^\d+n$/);if(r)return BigInt(n.substring(0,n.length-1));return n}))};function _m(t){if(typeof t!=="string"){throw new Error(`Cannot safe json parse value of type ${typeof t}`)}try{return gm(t)}catch(n){return t}}function Em(t){return typeof t==="string"?t:mm(t)||""}const Om={Accept:"application/json","Content-Type":"application/json"};const Sm="POST";const Im={headers:Om,method:Sm};const jm=10;class Am{constructor(n,r=false){this.url=n;this.disableProviderPing=r;this.events=new t.exports.EventEmitter;this.isAvailable=false;this.registering=false;if(!Jv(n)){throw new Error(`Provided URL is not compatible with HTTP connection: ${n}`)}this.url=n;this.disableProviderPing=r}get connected(){return this.isAvailable}get connecting(){return this.registering}on(t,n){this.events.on(t,n)}once(t,n){this.events.once(t,n)}off(t,n){this.events.off(t,n)}removeListener(t,n){this.events.removeListener(t,n)}async open(t=this.url){await this.register(t)}async close(){if(!this.isAvailable){throw new Error("Connection already closed")}this.onClose()}async send(t,n){if(!this.isAvailable){await this.register()}try{const n=Em(t);const r=await bm(this.url,Object.assign(Object.assign({},Im),{body:n}));const e=await r.json();this.onPayload({data:e})}catch(n){this.onError(t.id,n)}}async register(t=this.url){if(!Jv(t)){throw new Error(`Provided URL is not compatible with HTTP connection: ${t}`)}if(this.registering){const t=this.events.getMaxListeners();if(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t){this.events.setMaxListeners(t+1)}return new Promise(((t,n)=>{this.events.once("register_error",(t=>{this.resetMaxListeners();n(t)}));this.events.once("open",(()=>{this.resetMaxListeners();if(typeof this.isAvailable==="undefined"){return n(new Error("HTTP connection is missing or invalid"))}t()}))}))}this.url=t;this.registering=true;try{if(!this.disableProviderPing){const n=Em({id:1,jsonrpc:"2.0",method:"test",params:[]});await bm(t,Object.assign(Object.assign({},Im),{body:n}))}this.onOpen()}catch(t){const n=this.parseError(t);this.events.emit("register_error",n);this.onClose();throw n}}onOpen(){this.isAvailable=true;this.registering=false;this.events.emit("open")}onClose(){this.isAvailable=false;this.registering=false;this.events.emit("close")}onPayload(t){if(typeof t.data==="undefined")return;const n=typeof t.data==="string"?_m(t.data):t.data;this.events.emit("payload",n)}onError(t,n){const r=this.parseError(n);const e=r.message||r.toString();const i=qv(t,e);this.events.emit("payload",i)}parseError(t,n=this.url){return tv(t,n,"HTTP")}resetMaxListeners(){if(this.events.getMaxListeners()>jm){this.events.setMaxListeners(jm)}}}const Nm="error",Pm="wss://relay.walletconnect.com",xm="wc",$m="universal_provider",Tm=`${xm}@2:${$m}:`,Mm="https://rpc.walletconnect.com/v1/",Cm={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var Rm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof s<"u"?s:typeof self<"u"?self:{},Um={exports:{}};
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(t,n){(function(){var r,e="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="Invalid `variable` option passed into `_.template`",u="__lodash_hash_undefined__",c=500,h="__lodash_placeholder__",f=1,l=2,d=4,v=1,p=2,w=1,y=2,b=4,m=8,g=16,_=32,E=64,O=128,S=256,I=512,j=30,A="...",N=800,P=16,x=1,$=2,T=3,M=1/0,C=9007199254740991,R=17976931348623157e292,U=0/0,D=4294967295,k=D-1,L=D>>>1,q=[["ary",O],["bind",w],["bindKey",y],["curry",m],["curryRight",g],["flip",I],["partial",_],["partialRight",E],["rearg",S]],V="[object Arguments]",F="[object Array]",G="[object AsyncFunction]",H="[object Boolean]",z="[object Date]",W="[object DOMException]",B="[object Error]",K="[object Function]",J="[object GeneratorFunction]",Z="[object Map]",Q="[object Number]",Y="[object Null]",X="[object Object]",tt="[object Promise]",nt="[object Proxy]",rt="[object RegExp]",et="[object Set]",it="[object String]",st="[object Symbol]",ot="[object Undefined]",at="[object WeakMap]",ut="[object WeakSet]",ct="[object ArrayBuffer]",ht="[object DataView]",ft="[object Float32Array]",lt="[object Float64Array]",dt="[object Int8Array]",vt="[object Int16Array]",pt="[object Int32Array]",wt="[object Uint8Array]",yt="[object Uint8ClampedArray]",bt="[object Uint16Array]",mt="[object Uint32Array]",gt=/\b__p \+= '';/g,_t=/\b(__p \+=) '' \+/g,Et=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ot=/&(?:amp|lt|gt|quot|#39);/g,St=/[&<>"']/g,It=RegExp(Ot.source),jt=RegExp(St.source),At=/<%-([\s\S]+?)%>/g,Nt=/<%([\s\S]+?)%>/g,Pt=/<%=([\s\S]+?)%>/g,xt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,$t=/^\w*$/,Tt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Mt=/[\\^$.*+?()[\]{}|]/g,Ct=RegExp(Mt.source),Rt=/^\s+/,Ut=/\s/,Dt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,kt=/\{\n\/\* \[wrapped with (.+)\] \*/,Lt=/,? & /,qt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Vt=/[()=,{}\[\]\/\s]/,Ft=/\\(\\)?/g,Gt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ht=/\w*$/,zt=/^[-+]0x[0-9a-f]+$/i,Wt=/^0b[01]+$/i,Bt=/^\[object .+?Constructor\]$/,Kt=/^0o[0-7]+$/i,Jt=/^(?:0|[1-9]\d*)$/,Zt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Qt=/($^)/,Yt=/['\n\r\u2028\u2029\\]/g,Xt="\\ud800-\\udfff",tn="\\u0300-\\u036f",nn="\\ufe20-\\ufe2f",rn="\\u20d0-\\u20ff",en=tn+nn+rn,sn="\\u2700-\\u27bf",on="a-z\\xdf-\\xf6\\xf8-\\xff",an="\\xac\\xb1\\xd7\\xf7",un="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",cn="\\u2000-\\u206f",hn=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",fn="A-Z\\xc0-\\xd6\\xd8-\\xde",ln="\\ufe0e\\ufe0f",dn=an+un+cn+hn,vn="['â€™]",pn="["+Xt+"]",wn="["+dn+"]",yn="["+en+"]",bn="\\d+",mn="["+sn+"]",gn="["+on+"]",_n="[^"+Xt+dn+bn+sn+on+fn+"]",En="\\ud83c[\\udffb-\\udfff]",On="(?:"+yn+"|"+En+")",Sn="[^"+Xt+"]",In="(?:\\ud83c[\\udde6-\\uddff]){2}",jn="[\\ud800-\\udbff][\\udc00-\\udfff]",An="["+fn+"]",Nn="\\u200d",Pn="(?:"+gn+"|"+_n+")",xn="(?:"+An+"|"+_n+")",$n="(?:"+vn+"(?:d|ll|m|re|s|t|ve))?",Tn="(?:"+vn+"(?:D|LL|M|RE|S|T|VE))?",Mn=On+"?",Cn="["+ln+"]?",Rn="(?:"+Nn+"(?:"+[Sn,In,jn].join("|")+")"+Cn+Mn+")*",Un="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Dn="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",kn=Cn+Mn+Rn,Ln="(?:"+[mn,In,jn].join("|")+")"+kn,qn="(?:"+[Sn+yn+"?",yn,In,jn,pn].join("|")+")",Vn=RegExp(vn,"g"),Fn=RegExp(yn,"g"),Gn=RegExp(En+"(?="+En+")|"+qn+kn,"g"),Hn=RegExp([An+"?"+gn+"+"+$n+"(?="+[wn,An,"$"].join("|")+")",xn+"+"+Tn+"(?="+[wn,An+Pn,"$"].join("|")+")",An+"?"+Pn+"+"+$n,An+"+"+Tn,Dn,Un,bn,Ln].join("|"),"g"),zn=RegExp("["+Nn+Xt+en+ln+"]"),Wn=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Bn=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Kn=-1,Jn={};Jn[ft]=Jn[lt]=Jn[dt]=Jn[vt]=Jn[pt]=Jn[wt]=Jn[yt]=Jn[bt]=Jn[mt]=!0,Jn[V]=Jn[F]=Jn[ct]=Jn[H]=Jn[ht]=Jn[z]=Jn[B]=Jn[K]=Jn[Z]=Jn[Q]=Jn[X]=Jn[rt]=Jn[et]=Jn[it]=Jn[at]=!1;var Zn={};Zn[V]=Zn[F]=Zn[ct]=Zn[ht]=Zn[H]=Zn[z]=Zn[ft]=Zn[lt]=Zn[dt]=Zn[vt]=Zn[pt]=Zn[Z]=Zn[Q]=Zn[X]=Zn[rt]=Zn[et]=Zn[it]=Zn[st]=Zn[wt]=Zn[yt]=Zn[bt]=Zn[mt]=!0,Zn[B]=Zn[K]=Zn[at]=!1;var Qn={Ã€:"A",Ã:"A",Ã‚:"A",Ãƒ:"A",Ã„:"A",Ã…:"A",Ã :"a",Ã¡:"a",Ã¢:"a",Ã£:"a",Ã¤:"a",Ã¥:"a",Ã‡:"C",Ã§:"c",Ã:"D",Ã°:"d",Ãˆ:"E",Ã‰:"E",ÃŠ:"E",Ã‹:"E",Ã¨:"e",Ã©:"e",Ãª:"e",Ã«:"e",ÃŒ:"I",Ã:"I",ÃŽ:"I",Ã:"I",Ã¬:"i",Ã­:"i",Ã®:"i",Ã¯:"i",Ã‘:"N",Ã±:"n",Ã’:"O",Ã“:"O",Ã”:"O",Ã•:"O",Ã–:"O",Ã˜:"O",Ã²:"o",Ã³:"o",Ã´:"o",Ãµ:"o",Ã¶:"o",Ã¸:"o",Ã™:"U",Ãš:"U",Ã›:"U",Ãœ:"U",Ã¹:"u",Ãº:"u",Ã»:"u",Ã¼:"u",Ã:"Y",Ã½:"y",Ã¿:"y",Ã†:"Ae",Ã¦:"ae",Ãž:"Th",Ã¾:"th",ÃŸ:"ss",Ä€:"A",Ä‚:"A",Ä„:"A",Ä:"a",Äƒ:"a",Ä…:"a",Ä†:"C",Äˆ:"C",ÄŠ:"C",ÄŒ:"C",Ä‡:"c",Ä‰:"c",Ä‹:"c",Ä:"c",ÄŽ:"D",Ä:"D",Ä:"d",Ä‘:"d",Ä’:"E",Ä”:"E",Ä–:"E",Ä˜:"E",Äš:"E",Ä“:"e",Ä•:"e",Ä—:"e",Ä™:"e",Ä›:"e",Äœ:"G",Äž:"G",Ä :"G",Ä¢:"G",Ä:"g",ÄŸ:"g",Ä¡:"g",Ä£:"g",Ä¤:"H",Ä¦:"H",Ä¥:"h",Ä§:"h",Ä¨:"I",Äª:"I",Ä¬:"I",Ä®:"I",Ä°:"I",Ä©:"i",Ä«:"i",Ä­:"i",Ä¯:"i",Ä±:"i",Ä´:"J",Äµ:"j",Ä¶:"K",Ä·:"k",Ä¸:"k",Ä¹:"L",Ä»:"L",Ä½:"L",Ä¿:"L",Å:"L",Äº:"l",Ä¼:"l",Ä¾:"l",Å€:"l",Å‚:"l",Åƒ:"N",Å…:"N",Å‡:"N",ÅŠ:"N",Å„:"n",Å†:"n",Åˆ:"n",Å‹:"n",ÅŒ:"O",ÅŽ:"O",Å:"O",Å:"o",Å:"o",Å‘:"o",Å”:"R",Å–:"R",Å˜:"R",Å•:"r",Å—:"r",Å™:"r",Åš:"S",Åœ:"S",Åž:"S",Å :"S",Å›:"s",Å:"s",ÅŸ:"s",Å¡:"s",Å¢:"T",Å¤:"T",Å¦:"T",Å£:"t",Å¥:"t",Å§:"t",Å¨:"U",Åª:"U",Å¬:"U",Å®:"U",Å°:"U",Å²:"U",Å©:"u",Å«:"u",Å­:"u",Å¯:"u",Å±:"u",Å³:"u",Å´:"W",Åµ:"w",Å¶:"Y",Å·:"y",Å¸:"Y",Å¹:"Z",Å»:"Z",Å½:"Z",Åº:"z",Å¼:"z",Å¾:"z",Ä²:"IJ",Ä³:"ij",Å’:"Oe",Å“:"oe",Å‰:"'n",Å¿:"s"},Yn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Xn={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},tr={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},nr=parseFloat,rr=parseInt,er=typeof Rm=="object"&&Rm&&Rm.Object===Object&&Rm,ir=typeof self=="object"&&self&&self.Object===Object&&self,sr=er||ir||Function("return this")(),or=n&&!n.nodeType&&n,ar=or&&!0&&t&&!t.nodeType&&t,ur=ar&&ar.exports===or,cr=ur&&er.process,hr=function(){try{var t=ar&&ar.require&&ar.require("util").types;return t||cr&&cr.binding&&cr.binding("util")}catch{}}(),fr=hr&&hr.isArrayBuffer,lr=hr&&hr.isDate,dr=hr&&hr.isMap,vr=hr&&hr.isRegExp,pr=hr&&hr.isSet,wr=hr&&hr.isTypedArray;function yr(t,n,r){switch(r.length){case 0:return t.call(n);case 1:return t.call(n,r[0]);case 2:return t.call(n,r[0],r[1]);case 3:return t.call(n,r[0],r[1],r[2])}return t.apply(n,r)}function br(t,n,r,e){for(var i=-1,s=t==null?0:t.length;++i<s;){var o=t[i];n(e,o,r(o),t)}return e}function mr(t,n){for(var r=-1,e=t==null?0:t.length;++r<e&&n(t[r],r,t)!==!1;);return t}function gr(t,n){for(var r=t==null?0:t.length;r--&&n(t[r],r,t)!==!1;);return t}function _r(t,n){for(var r=-1,e=t==null?0:t.length;++r<e;)if(!n(t[r],r,t))return!1;return!0}function Er(t,n){for(var r=-1,e=t==null?0:t.length,i=0,s=[];++r<e;){var o=t[r];n(o,r,t)&&(s[i++]=o)}return s}function Or(t,n){var r=t==null?0:t.length;return!!r&&Rr(t,n,0)>-1}function Sr(t,n,r){for(var e=-1,i=t==null?0:t.length;++e<i;)if(r(n,t[e]))return!0;return!1}function Ir(t,n){for(var r=-1,e=t==null?0:t.length,i=Array(e);++r<e;)i[r]=n(t[r],r,t);return i}function jr(t,n){for(var r=-1,e=n.length,i=t.length;++r<e;)t[i+r]=n[r];return t}function Ar(t,n,r,e){var i=-1,s=t==null?0:t.length;for(e&&s&&(r=t[++i]);++i<s;)r=n(r,t[i],i,t);return r}function Nr(t,n,r,e){var i=t==null?0:t.length;for(e&&i&&(r=t[--i]);i--;)r=n(r,t[i],i,t);return r}function Pr(t,n){for(var r=-1,e=t==null?0:t.length;++r<e;)if(n(t[r],r,t))return!0;return!1}var xr=Lr("length");function $r(t){return t.split("")}function Tr(t){return t.match(qt)||[]}function Mr(t,n,r){var e;return r(t,(function(t,r,i){if(n(t,r,i))return e=r,!1})),e}function Cr(t,n,r,e){for(var i=t.length,s=r+(e?1:-1);e?s--:++s<i;)if(n(t[s],s,t))return s;return-1}function Rr(t,n,r){return n===n?fe(t,n,r):Cr(t,Dr,r)}function Ur(t,n,r,e){for(var i=r-1,s=t.length;++i<s;)if(e(t[i],n))return i;return-1}function Dr(t){return t!==t}function kr(t,n){var r=t==null?0:t.length;return r?Gr(t,n)/r:U}function Lr(t){return function(n){return n==null?r:n[t]}}function qr(t){return function(n){return t==null?r:t[n]}}function Vr(t,n,r,e,i){return i(t,(function(t,i,s){r=e?(e=!1,t):n(r,t,i,s)})),r}function Fr(t,n){var r=t.length;for(t.sort(n);r--;)t[r]=t[r].value;return t}function Gr(t,n){for(var e,i=-1,s=t.length;++i<s;){var o=n(t[i]);o!==r&&(e=e===r?o:e+o)}return e}function Hr(t,n){for(var r=-1,e=Array(t);++r<t;)e[r]=n(r);return e}function zr(t,n){return Ir(n,(function(n){return[n,t[n]]}))}function Wr(t){return t&&t.slice(0,pe(t)+1).replace(Rt,"")}function Br(t){return function(n){return t(n)}}function Kr(t,n){return Ir(n,(function(n){return t[n]}))}function Jr(t,n){return t.has(n)}function Zr(t,n){for(var r=-1,e=t.length;++r<e&&Rr(n,t[r],0)>-1;);return r}function Qr(t,n){for(var r=t.length;r--&&Rr(n,t[r],0)>-1;);return r}function Yr(t,n){for(var r=t.length,e=0;r--;)t[r]===n&&++e;return e}var Xr=qr(Qn),te=qr(Yn);function ne(t){return"\\"+tr[t]}function re(t,n){return t==null?r:t[n]}function ee(t){return zn.test(t)}function ie(t){return Wn.test(t)}function se(t){for(var n,r=[];!(n=t.next()).done;)r.push(n.value);return r}function oe(t){var n=-1,r=Array(t.size);return t.forEach((function(t,e){r[++n]=[e,t]})),r}function ae(t,n){return function(r){return t(n(r))}}function ue(t,n){for(var r=-1,e=t.length,i=0,s=[];++r<e;){var o=t[r];(o===n||o===h)&&(t[r]=h,s[i++]=r)}return s}function ce(t){var n=-1,r=Array(t.size);return t.forEach((function(t){r[++n]=t})),r}function he(t){var n=-1,r=Array(t.size);return t.forEach((function(t){r[++n]=[t,t]})),r}function fe(t,n,r){for(var e=r-1,i=t.length;++e<i;)if(t[e]===n)return e;return-1}function le(t,n,r){for(var e=r+1;e--;)if(t[e]===n)return e;return e}function de(t){return ee(t)?ye(t):xr(t)}function ve(t){return ee(t)?be(t):$r(t)}function pe(t){for(var n=t.length;n--&&Ut.test(t.charAt(n)););return n}var we=qr(Xn);function ye(t){for(var n=Gn.lastIndex=0;Gn.test(t);)++n;return n}function be(t){return t.match(Gn)||[]}function me(t){return t.match(Hn)||[]}var ge=function t(n){n=n==null?sr:_e.defaults(sr.Object(),n,_e.pick(sr,Bn));var Ut=n.Array,qt=n.Date,Xt=n.Error,tn=n.Function,nn=n.Math,rn=n.Object,en=n.RegExp,sn=n.String,on=n.TypeError,an=Ut.prototype,un=tn.prototype,cn=rn.prototype,hn=n["__core-js_shared__"],fn=un.toString,ln=cn.hasOwnProperty,dn=0,vn=function(){var t=/[^.]+$/.exec(hn&&hn.keys&&hn.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),pn=cn.toString,wn=fn.call(rn),yn=sr._,bn=en("^"+fn.call(ln).replace(Mt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),mn=ur?n.Buffer:r,gn=n.Symbol,_n=n.Uint8Array,En=mn?mn.allocUnsafe:r,On=ae(rn.getPrototypeOf,rn),Sn=rn.create,In=cn.propertyIsEnumerable,jn=an.splice,An=gn?gn.isConcatSpreadable:r,Nn=gn?gn.iterator:r,Pn=gn?gn.toStringTag:r,xn=function(){try{var t=Bo(rn,"defineProperty");return t({},"",{}),t}catch{}}(),$n=n.clearTimeout!==sr.clearTimeout&&n.clearTimeout,Tn=qt&&qt.now!==sr.Date.now&&qt.now,Mn=n.setTimeout!==sr.setTimeout&&n.setTimeout,Cn=nn.ceil,Rn=nn.floor,Un=rn.getOwnPropertySymbols,Dn=mn?mn.isBuffer:r,kn=n.isFinite,Ln=an.join,qn=ae(rn.keys,rn),Gn=nn.max,Hn=nn.min,zn=qt.now,Wn=n.parseInt,Qn=nn.random,Yn=an.reverse,Xn=Bo(n,"DataView"),tr=Bo(n,"Map"),er=Bo(n,"Promise"),ir=Bo(n,"Set"),or=Bo(n,"WeakMap"),ar=Bo(rn,"create"),cr=or&&new or,hr={},xr=Ta(Xn),$r=Ta(tr),qr=Ta(er),fe=Ta(ir),ye=Ta(or),be=gn?gn.prototype:r,ge=be?be.valueOf:r,Ee=be?be.toString:r;function Oe(t){if(Ih(t)&&!uh(t)&&!(t instanceof Ae)){if(t instanceof je)return t;if(ln.call(t,"__wrapped__"))return Ca(t)}return new je(t)}var Se=function(){function t(){}return function(n){if(!Sh(n))return{};if(Sn)return Sn(n);t.prototype=n;var e=new t;return t.prototype=r,e}}();function Ie(){}function je(t,n){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!n,this.__index__=0,this.__values__=r}Oe.templateSettings={escape:At,evaluate:Nt,interpolate:Pt,variable:"",imports:{_:Oe}},Oe.prototype=Ie.prototype,Oe.prototype.constructor=Oe,je.prototype=Se(Ie.prototype),je.prototype.constructor=je;function Ae(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=D,this.__views__=[]}function Ne(){var t=new Ae(this.__wrapped__);return t.__actions__=eo(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=eo(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=eo(this.__views__),t}function Pe(){if(this.__filtered__){var t=new Ae(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function xe(){var t=this.__wrapped__.value(),n=this.__dir__,r=uh(t),e=n<0,i=r?t.length:0,s=Yo(0,i,this.__views__),o=s.start,a=s.end,u=a-o,c=e?a:o-1,h=this.__iteratees__,f=h.length,l=0,d=Hn(u,this.__takeCount__);if(!r||!e&&i==u&&d==u)return ks(t,this.__actions__);var v=[];t:for(;u--&&l<d;){c+=n;for(var p=-1,w=t[c];++p<f;){var y=h[p],b=y.iteratee,m=y.type,g=b(w);if(m==$)w=g;else if(!g){if(m==x)continue t;break t}}v[l++]=w}return v}Ae.prototype=Se(Ie.prototype),Ae.prototype.constructor=Ae;function $e(t){var n=-1,r=t==null?0:t.length;for(this.clear();++n<r;){var e=t[n];this.set(e[0],e[1])}}function Te(){this.__data__=ar?ar(null):{},this.size=0}function Me(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}function Ce(t){var n=this.__data__;if(ar){var e=n[t];return e===u?r:e}return ln.call(n,t)?n[t]:r}function Re(t){var n=this.__data__;return ar?n[t]!==r:ln.call(n,t)}function Ue(t,n){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=ar&&n===r?u:n,this}$e.prototype.clear=Te,$e.prototype.delete=Me,$e.prototype.get=Ce,$e.prototype.has=Re,$e.prototype.set=Ue;function De(t){var n=-1,r=t==null?0:t.length;for(this.clear();++n<r;){var e=t[n];this.set(e[0],e[1])}}function ke(){this.__data__=[],this.size=0}function Le(t){var n=this.__data__,r=hi(n,t);if(r<0)return!1;var e=n.length-1;return r==e?n.pop():jn.call(n,r,1),--this.size,!0}function qe(t){var n=this.__data__,e=hi(n,t);return e<0?r:n[e][1]}function Ve(t){return hi(this.__data__,t)>-1}function Fe(t,n){var r=this.__data__,e=hi(r,t);return e<0?(++this.size,r.push([t,n])):r[e][1]=n,this}De.prototype.clear=ke,De.prototype.delete=Le,De.prototype.get=qe,De.prototype.has=Ve,De.prototype.set=Fe;function Ge(t){var n=-1,r=t==null?0:t.length;for(this.clear();++n<r;){var e=t[n];this.set(e[0],e[1])}}function He(){this.size=0,this.__data__={hash:new $e,map:new(tr||De),string:new $e}}function ze(t){var n=zo(this,t).delete(t);return this.size-=n?1:0,n}function We(t){return zo(this,t).get(t)}function Be(t){return zo(this,t).has(t)}function Ke(t,n){var r=zo(this,t),e=r.size;return r.set(t,n),this.size+=r.size==e?0:1,this}Ge.prototype.clear=He,Ge.prototype.delete=ze,Ge.prototype.get=We,Ge.prototype.has=Be,Ge.prototype.set=Ke;function Je(t){var n=-1,r=t==null?0:t.length;for(this.__data__=new Ge;++n<r;)this.add(t[n])}function Ze(t){return this.__data__.set(t,u),this}function Qe(t){return this.__data__.has(t)}Je.prototype.add=Je.prototype.push=Ze,Je.prototype.has=Qe;function Ye(t){var n=this.__data__=new De(t);this.size=n.size}function Xe(){this.__data__=new De,this.size=0}function ti(t){var n=this.__data__,r=n.delete(t);return this.size=n.size,r}function ni(t){return this.__data__.get(t)}function ri(t){return this.__data__.has(t)}function ei(t,n){var r=this.__data__;if(r instanceof De){var e=r.__data__;if(!tr||e.length<i-1)return e.push([t,n]),this.size=++r.size,this;r=this.__data__=new Ge(e)}return r.set(t,n),this.size=r.size,this}Ye.prototype.clear=Xe,Ye.prototype.delete=ti,Ye.prototype.get=ni,Ye.prototype.has=ri,Ye.prototype.set=ei;function ii(t,n){var r=uh(t),e=!r&&ah(t),i=!r&&!e&&dh(t),s=!r&&!e&&!i&&qh(t),o=r||e||i||s,a=o?Hr(t.length,sn):[],u=a.length;for(var c in t)(n||ln.call(t,c))&&!(o&&(c=="length"||i&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||oa(c,u)))&&a.push(c);return a}function si(t){var n=t.length;return n?t[ys(0,n-1)]:r}function oi(t,n){return Pa(eo(t),wi(n,0,t.length))}function ai(t){return Pa(eo(t))}function ui(t,n,e){(e!==r&&!ih(t[n],e)||e===r&&!(n in t))&&vi(t,n,e)}function ci(t,n,e){var i=t[n];(!(ln.call(t,n)&&ih(i,e))||e===r&&!(n in t))&&vi(t,n,e)}function hi(t,n){for(var r=t.length;r--;)if(ih(t[r][0],n))return r;return-1}function fi(t,n,r,e){return Ei(t,(function(t,i,s){n(e,t,r(t),s)})),e}function li(t,n){return t&&io(n,Of(n),t)}function di(t,n){return t&&io(n,Sf(n),t)}function vi(t,n,r){n=="__proto__"&&xn?xn(t,n,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[n]=r}function pi(t,n){for(var e=-1,i=n.length,s=Ut(i),o=t==null;++e<i;)s[e]=o?r:yf(t,n[e]);return s}function wi(t,n,e){return t===t&&(e!==r&&(t=t<=e?t:e),n!==r&&(t=t>=n?t:n)),t}function yi(t,n,e,i,s,o){var a,u=n&f,c=n&l,h=n&d;if(e&&(a=s?e(t,i,s,o):e(t)),a!==r)return a;if(!Sh(t))return t;var v=uh(t);if(v){if(a=na(t),!u)return eo(t,a)}else{var p=Qo(t),w=p==K||p==J;if(dh(t))return Bs(t,u);if(p==X||p==V||w&&!s){if(a=c||w?{}:ra(t),!u)return c?oo(t,di(a,t)):so(t,li(a,t))}else{if(!Zn[p])return s?t:{};a=ea(t,p,u)}}o||(o=new Ye);var y=o.get(t);if(y)return y;o.set(t,a),Dh(t)?t.forEach((function(r){a.add(yi(r,n,e,r,t,o))})):jh(t)&&t.forEach((function(r,i){a.set(i,yi(r,n,e,i,t,o))}));var b=h?c?qo:Lo:c?Sf:Of,m=v?r:b(t);return mr(m||t,(function(r,i){m&&(i=r,r=t[i]),ci(a,i,yi(r,n,e,i,t,o))})),a}function bi(t){var n=Of(t);return function(r){return mi(r,t,n)}}function mi(t,n,e){var i=e.length;if(t==null)return!i;for(t=rn(t);i--;){var s=e[i],o=n[s],a=t[s];if(a===r&&!(s in t)||!o(a))return!1}return!0}function gi(t,n,e){if(typeof t!="function")throw new on(o);return Ia((function(){t.apply(r,e)}),n)}function _i(t,n,r,e){var s=-1,o=Or,a=!0,u=t.length,c=[],h=n.length;if(!u)return c;r&&(n=Ir(n,Br(r))),e?(o=Sr,a=!1):n.length>=i&&(o=Jr,a=!1,n=new Je(n));t:for(;++s<u;){var f=t[s],l=r==null?f:r(f);if(f=e||f!==0?f:0,a&&l===l){for(var d=h;d--;)if(n[d]===l)continue t;c.push(f)}else o(n,l,e)||c.push(f)}return c}var Ei=co($i),Oi=co(Ti,!0);function Si(t,n){var r=!0;return Ei(t,(function(t,e,i){return r=!!n(t,e,i),r})),r}function Ii(t,n,e){for(var i=-1,s=t.length;++i<s;){var o=t[i],a=n(o);if(a!=null&&(u===r?a===a&&!Lh(a):e(a,u)))var u=a,c=o}return c}function ji(t,n,e,i){var s=t.length;for(e=Kh(e),e<0&&(e=-e>s?0:s+e),i=i===r||i>s?s:Kh(i),i<0&&(i+=s),i=e>i?0:Jh(i);e<i;)t[e++]=n;return t}function Ai(t,n){var r=[];return Ei(t,(function(t,e,i){n(t,e,i)&&r.push(t)})),r}function Ni(t,n,r,e,i){var s=-1,o=t.length;for(r||(r=sa),i||(i=[]);++s<o;){var a=t[s];n>0&&r(a)?n>1?Ni(a,n-1,r,e,i):jr(i,a):e||(i[i.length]=a)}return i}var Pi=ho(),xi=ho(!0);function $i(t,n){return t&&Pi(t,n,Of)}function Ti(t,n){return t&&xi(t,n,Of)}function Mi(t,n){return Er(n,(function(n){return _h(t[n])}))}function Ci(t,n){n=Gs(n,t);for(var e=0,i=n.length;t!=null&&e<i;)t=t[$a(n[e++])];return e&&e==i?t:r}function Ri(t,n,r){var e=n(t);return uh(t)?e:jr(e,r(t))}function Ui(t){return t==null?t===r?ot:Y:Pn&&Pn in rn(t)?Ko(t):ma(t)}function Di(t,n){return t>n}function ki(t,n){return t!=null&&ln.call(t,n)}function Li(t,n){return t!=null&&n in rn(t)}function qi(t,n,r){return t>=Hn(n,r)&&t<Gn(n,r)}function Vi(t,n,e){for(var i=e?Sr:Or,s=t[0].length,o=t.length,a=o,u=Ut(o),c=1/0,h=[];a--;){var f=t[a];a&&n&&(f=Ir(f,Br(n))),c=Hn(f.length,c),u[a]=!e&&(n||s>=120&&f.length>=120)?new Je(a&&f):r}f=t[0];var l=-1,d=u[0];t:for(;++l<s&&h.length<c;){var v=f[l],p=n?n(v):v;if(v=e||v!==0?v:0,!(d?Jr(d,p):i(h,p,e))){for(a=o;--a;){var w=u[a];if(!(w?Jr(w,p):i(t[a],p,e)))continue t}d&&d.push(p),h.push(v)}}return h}function Fi(t,n,r,e){return $i(t,(function(t,i,s){n(e,r(t),i,s)})),e}function Gi(t,n,e){n=Gs(n,t),t=_a(t,n);var i=t==null?t:t[$a(su(n))];return i==null?r:yr(i,t,e)}function Hi(t){return Ih(t)&&Ui(t)==V}function zi(t){return Ih(t)&&Ui(t)==ct}function Wi(t){return Ih(t)&&Ui(t)==z}function Bi(t,n,r,e,i){return t===n?!0:t==null||n==null||!Ih(t)&&!Ih(n)?t!==t&&n!==n:Ki(t,n,r,e,Bi,i)}function Ki(t,n,r,e,i,s){var o=uh(t),a=uh(n),u=o?F:Qo(t),c=a?F:Qo(n);u=u==V?X:u,c=c==V?X:c;var h=u==X,f=c==X,l=u==c;if(l&&dh(t)){if(!dh(n))return!1;o=!0,h=!1}if(l&&!h)return s||(s=new Ye),o||qh(t)?Ro(t,n,r,e,i,s):Uo(t,n,u,r,e,i,s);if(!(r&v)){var d=h&&ln.call(t,"__wrapped__"),p=f&&ln.call(n,"__wrapped__");if(d||p){var w=d?t.value():t,y=p?n.value():n;return s||(s=new Ye),i(w,y,r,e,s)}}return l?(s||(s=new Ye),Do(t,n,r,e,i,s)):!1}function Ji(t){return Ih(t)&&Qo(t)==Z}function Zi(t,n,e,i){var s=e.length,o=s,a=!i;if(t==null)return!o;for(t=rn(t);s--;){var u=e[s];if(a&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++s<o;){u=e[s];var c=u[0],h=t[c],f=u[1];if(a&&u[2]){if(h===r&&!(c in t))return!1}else{var l=new Ye;if(i)var d=i(h,f,c,t,n,l);if(!(d===r?Bi(f,h,v|p,i,l):d))return!1}}return!0}function Qi(t){if(!Sh(t)||fa(t))return!1;var n=_h(t)?bn:Bt;return n.test(Ta(t))}function Yi(t){return Ih(t)&&Ui(t)==rt}function Xi(t){return Ih(t)&&Qo(t)==et}function ts(t){return Ih(t)&&Oh(t.length)&&!!Jn[Ui(t)]}function ns(t){return typeof t=="function"?t:t==null?$l:typeof t=="object"?uh(t)?as(t[0],t[1]):os(t):Hl(t)}function rs(t){if(!da(t))return qn(t);var n=[];for(var r in rn(t))ln.call(t,r)&&r!="constructor"&&n.push(r);return n}function es(t){if(!Sh(t))return ba(t);var n=da(t),r=[];for(var e in t)e=="constructor"&&(n||!ln.call(t,e))||r.push(e);return r}function is(t,n){return t<n}function ss(t,n){var r=-1,e=hh(t)?Ut(t.length):[];return Ei(t,(function(t,i,s){e[++r]=n(t,i,s)})),e}function os(t){var n=Wo(t);return n.length==1&&n[0][2]?pa(n[0][0],n[0][1]):function(r){return r===t||Zi(r,t,n)}}function as(t,n){return ua(t)&&va(n)?pa($a(t),n):function(e){var i=yf(e,t);return i===r&&i===n?mf(e,t):Bi(n,i,v|p)}}function us(t,n,e,i,s){t!==n&&Pi(n,(function(o,a){if(s||(s=new Ye),Sh(o))cs(t,n,a,e,us,i,s);else{var u=i?i(Oa(t,a),o,a+"",t,n,s):r;u===r&&(u=o),ui(t,a,u)}}),Sf)}function cs(t,n,e,i,s,o,a){var u=Oa(t,e),c=Oa(n,e),h=a.get(c);if(h){ui(t,e,h);return}var f=o?o(u,c,e+"",t,n,a):r,l=f===r;if(l){var d=uh(c),v=!d&&dh(c),p=!d&&!v&&qh(c);f=c,d||v||p?uh(u)?f=u:fh(u)?f=eo(u):v?(l=!1,f=Bs(c,!0)):p?(l=!1,f=Ys(c,!0)):f=[]:Ch(c)||ah(c)?(f=u,ah(u)?f=Qh(u):(!Sh(u)||_h(u))&&(f=ra(c))):l=!1}l&&(a.set(c,f),s(f,c,i,o,a),a.delete(c)),ui(t,e,f)}function hs(t,n){var e=t.length;if(e)return n+=n<0?e:0,oa(n,e)?t[n]:r}function fs(t,n,r){n.length?n=Ir(n,(function(t){return uh(t)?function(n){return Ci(n,t.length===1?t[0]:t)}:t})):n=[$l];var e=-1;n=Ir(n,Br(Ho()));var i=ss(t,(function(t,r,i){var s=Ir(n,(function(n){return n(t)}));return{criteria:s,index:++e,value:t}}));return Fr(i,(function(t,n){return to(t,n,r)}))}function ls(t,n){return ds(t,n,(function(n,r){return mf(t,r)}))}function ds(t,n,r){for(var e=-1,i=n.length,s={};++e<i;){var o=n[e],a=Ci(t,o);r(a,o)&&Os(s,Gs(o,t),a)}return s}function vs(t){return function(n){return Ci(n,t)}}function ps(t,n,r,e){var i=e?Ur:Rr,s=-1,o=n.length,a=t;for(t===n&&(n=eo(n)),r&&(a=Ir(t,Br(r)));++s<o;)for(var u=0,c=n[s],h=r?r(c):c;(u=i(a,h,u,e))>-1;)a!==t&&jn.call(a,u,1),jn.call(t,u,1);return t}function ws(t,n){for(var r=t?n.length:0,e=r-1;r--;){var i=n[r];if(r==e||i!==s){var s=i;oa(i)?jn.call(t,i,1):Rs(t,i)}}return t}function ys(t,n){return t+Rn(Qn()*(n-t+1))}function bs(t,n,r,e){for(var i=-1,s=Gn(Cn((n-t)/(r||1)),0),o=Ut(s);s--;)o[e?s:++i]=t,t+=r;return o}function ms(t,n){var r="";if(!t||n<1||n>C)return r;do{n%2&&(r+=t),n=Rn(n/2),n&&(t+=t)}while(n);return r}function gs(t,n){return ja(ga(t,n,$l),t+"")}function _s(t){return si(Ff(t))}function Es(t,n){var r=Ff(t);return Pa(r,wi(n,0,r.length))}function Os(t,n,e,i){if(!Sh(t))return t;n=Gs(n,t);for(var s=-1,o=n.length,a=o-1,u=t;u!=null&&++s<o;){var c=$a(n[s]),h=e;if(c==="__proto__"||c==="constructor"||c==="prototype")return t;if(s!=a){var f=u[c];h=i?i(f,c,u):r,h===r&&(h=Sh(f)?f:oa(n[s+1])?[]:{})}ci(u,c,h),u=u[c]}return t}var Ss=cr?function(t,n){return cr.set(t,n),t}:$l,Is=xn?function(t,n){return xn(t,"toString",{configurable:!0,enumerable:!1,value:Al(n),writable:!0})}:$l;function js(t){return Pa(Ff(t))}function As(t,n,r){var e=-1,i=t.length;n<0&&(n=-n>i?0:i+n),r=r>i?i:r,r<0&&(r+=i),i=n>r?0:r-n>>>0,n>>>=0;for(var s=Ut(i);++e<i;)s[e]=t[e+n];return s}function Ns(t,n){var r;return Ei(t,(function(t,e,i){return r=n(t,e,i),!r})),!!r}function Ps(t,n,r){var e=0,i=t==null?e:t.length;if(typeof n=="number"&&n===n&&i<=L){for(;e<i;){var s=e+i>>>1,o=t[s];o!==null&&!Lh(o)&&(r?o<=n:o<n)?e=s+1:i=s}return i}return xs(t,n,$l,r)}function xs(t,n,e,i){var s=0,o=t==null?0:t.length;if(o===0)return 0;n=e(n);for(var a=n!==n,u=n===null,c=Lh(n),h=n===r;s<o;){var f=Rn((s+o)/2),l=e(t[f]),d=l!==r,v=l===null,p=l===l,w=Lh(l);if(a)var y=i||p;else h?y=p&&(i||d):u?y=p&&d&&(i||!v):c?y=p&&d&&!v&&(i||!w):v||w?y=!1:y=i?l<=n:l<n;y?s=f+1:o=f}return Hn(o,k)}function $s(t,n){for(var r=-1,e=t.length,i=0,s=[];++r<e;){var o=t[r],a=n?n(o):o;if(!r||!ih(a,u)){var u=a;s[i++]=o===0?0:o}}return s}function Ts(t){return typeof t=="number"?t:Lh(t)?U:+t}function Ms(t){if(typeof t=="string")return t;if(uh(t))return Ir(t,Ms)+"";if(Lh(t))return Ee?Ee.call(t):"";var n=t+"";return n=="0"&&1/t==-M?"-0":n}function Cs(t,n,r){var e=-1,s=Or,o=t.length,a=!0,u=[],c=u;if(r)a=!1,s=Sr;else if(o>=i){var h=n?null:Po(t);if(h)return ce(h);a=!1,s=Jr,c=new Je}else c=n?[]:u;t:for(;++e<o;){var f=t[e],l=n?n(f):f;if(f=r||f!==0?f:0,a&&l===l){for(var d=c.length;d--;)if(c[d]===l)continue t;n&&c.push(l),u.push(f)}else s(c,l,r)||(c!==u&&c.push(l),u.push(f))}return u}function Rs(t,n){return n=Gs(n,t),t=_a(t,n),t==null||delete t[$a(su(n))]}function Us(t,n,r,e){return Os(t,n,r(Ci(t,n)),e)}function Ds(t,n,r,e){for(var i=t.length,s=e?i:-1;(e?s--:++s<i)&&n(t[s],s,t););return r?As(t,e?0:s,e?s+1:i):As(t,e?s+1:0,e?i:s)}function ks(t,n){var r=t;return r instanceof Ae&&(r=r.value()),Ar(n,(function(t,n){return n.func.apply(n.thisArg,jr([t],n.args))}),r)}function Ls(t,n,r){var e=t.length;if(e<2)return e?Cs(t[0]):[];for(var i=-1,s=Ut(e);++i<e;)for(var o=t[i],a=-1;++a<e;)a!=i&&(s[i]=_i(s[i]||o,t[a],n,r));return Cs(Ni(s,1),n,r)}function qs(t,n,e){for(var i=-1,s=t.length,o=n.length,a={};++i<s;){var u=i<o?n[i]:r;e(a,t[i],u)}return a}function Vs(t){return fh(t)?t:[]}function Fs(t){return typeof t=="function"?t:$l}function Gs(t,n){return uh(t)?t:ua(t,n)?[t]:xa(Xh(t))}var Hs=gs;function zs(t,n,e){var i=t.length;return e=e===r?i:e,!n&&e>=i?t:As(t,n,e)}var Ws=$n||function(t){return sr.clearTimeout(t)};function Bs(t,n){if(n)return t.slice();var r=t.length,e=En?En(r):new t.constructor(r);return t.copy(e),e}function Ks(t){var n=new t.constructor(t.byteLength);return new _n(n).set(new _n(t)),n}function Js(t,n){var r=n?Ks(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}function Zs(t){var n=new t.constructor(t.source,Ht.exec(t));return n.lastIndex=t.lastIndex,n}function Qs(t){return ge?rn(ge.call(t)):{}}function Ys(t,n){var r=n?Ks(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}function Xs(t,n){if(t!==n){var e=t!==r,i=t===null,s=t===t,o=Lh(t),a=n!==r,u=n===null,c=n===n,h=Lh(n);if(!u&&!h&&!o&&t>n||o&&a&&c&&!u&&!h||i&&a&&c||!e&&c||!s)return 1;if(!i&&!o&&!h&&t<n||h&&e&&s&&!i&&!o||u&&e&&s||!a&&s||!c)return-1}return 0}function to(t,n,r){for(var e=-1,i=t.criteria,s=n.criteria,o=i.length,a=r.length;++e<o;){var u=Xs(i[e],s[e]);if(u){if(e>=a)return u;var c=r[e];return u*(c=="desc"?-1:1)}}return t.index-n.index}function no(t,n,r,e){for(var i=-1,s=t.length,o=r.length,a=-1,u=n.length,c=Gn(s-o,0),h=Ut(u+c),f=!e;++a<u;)h[a]=n[a];for(;++i<o;)(f||i<s)&&(h[r[i]]=t[i]);for(;c--;)h[a++]=t[i++];return h}function ro(t,n,r,e){for(var i=-1,s=t.length,o=-1,a=r.length,u=-1,c=n.length,h=Gn(s-a,0),f=Ut(h+c),l=!e;++i<h;)f[i]=t[i];for(var d=i;++u<c;)f[d+u]=n[u];for(;++o<a;)(l||i<s)&&(f[d+r[o]]=t[i++]);return f}function eo(t,n){var r=-1,e=t.length;for(n||(n=Ut(e));++r<e;)n[r]=t[r];return n}function io(t,n,e,i){var s=!e;e||(e={});for(var o=-1,a=n.length;++o<a;){var u=n[o],c=i?i(e[u],t[u],u,e,t):r;c===r&&(c=t[u]),s?vi(e,u,c):ci(e,u,c)}return e}function so(t,n){return io(t,Jo(t),n)}function oo(t,n){return io(t,Zo(t),n)}function ao(t,n){return function(r,e){var i=uh(r)?br:fi,s=n?n():{};return i(r,t,Ho(e,2),s)}}function uo(t){return gs((function(n,e){var i=-1,s=e.length,o=s>1?e[s-1]:r,a=s>2?e[2]:r;for(o=t.length>3&&typeof o=="function"?(s--,o):r,a&&aa(e[0],e[1],a)&&(o=s<3?r:o,s=1),n=rn(n);++i<s;){var u=e[i];u&&t(n,u,i,o)}return n}))}function co(t,n){return function(r,e){if(r==null)return r;if(!hh(r))return t(r,e);for(var i=r.length,s=n?i:-1,o=rn(r);(n?s--:++s<i)&&e(o[s],s,o)!==!1;);return r}}function ho(t){return function(n,r,e){for(var i=-1,s=rn(n),o=e(n),a=o.length;a--;){var u=o[t?a:++i];if(r(s[u],u,s)===!1)break}return n}}function fo(t,n,r){var e=n&w,i=po(t);function s(){var n=this&&this!==sr&&this instanceof s?i:t;return n.apply(e?r:this,arguments)}return s}function lo(t){return function(n){n=Xh(n);var e=ee(n)?ve(n):r,i=e?e[0]:n.charAt(0),s=e?zs(e,1).join(""):n.slice(1);return i[t]()+s}}function vo(t){return function(n){return Ar(El(Jf(n).replace(Vn,"")),t,"")}}function po(t){return function(){var n=arguments;switch(n.length){case 0:return new t;case 1:return new t(n[0]);case 2:return new t(n[0],n[1]);case 3:return new t(n[0],n[1],n[2]);case 4:return new t(n[0],n[1],n[2],n[3]);case 5:return new t(n[0],n[1],n[2],n[3],n[4]);case 6:return new t(n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return new t(n[0],n[1],n[2],n[3],n[4],n[5],n[6])}var r=Se(t.prototype),e=t.apply(r,n);return Sh(e)?e:r}}function wo(t,n,e){var i=po(t);function s(){for(var o=arguments.length,a=Ut(o),u=o,c=Go(s);u--;)a[u]=arguments[u];var h=o<3&&a[0]!==c&&a[o-1]!==c?[]:ue(a,c);if(o-=h.length,o<e)return Ao(t,n,mo,s.placeholder,r,a,h,r,r,e-o);var f=this&&this!==sr&&this instanceof s?i:t;return yr(f,this,a)}return s}function yo(t){return function(n,e,i){var s=rn(n);if(!hh(n)){var o=Ho(e,3);n=Of(n),e=function(t){return o(s[t],t,s)}}var a=t(n,e,i);return a>-1?s[o?n[a]:a]:r}}function bo(t){return ko((function(n){var e=n.length,i=e,s=je.prototype.thru;for(t&&n.reverse();i--;){var a=n[i];if(typeof a!="function")throw new on(o);if(s&&!u&&Fo(a)=="wrapper")var u=new je([],!0)}for(i=u?i:e;++i<e;){a=n[i];var c=Fo(a),h=c=="wrapper"?Vo(a):r;h&&ha(h[0])&&h[1]==(O|m|_|S)&&!h[4].length&&h[9]==1?u=u[Fo(h[0])].apply(u,h[3]):u=a.length==1&&ha(a)?u[c]():u.thru(a)}return function(){var t=arguments,r=t[0];if(u&&t.length==1&&uh(r))return u.plant(r).value();for(var i=0,s=e?n[i].apply(this,t):r;++i<e;)s=n[i].call(this,s);return s}}))}function mo(t,n,e,i,s,o,a,u,c,h){var f=n&O,l=n&w,d=n&y,v=n&(m|g),p=n&I,b=d?r:po(t);function _(){for(var r=arguments.length,w=Ut(r),y=r;y--;)w[y]=arguments[y];if(v)var m=Go(_),g=Yr(w,m);if(i&&(w=no(w,i,s,v)),o&&(w=ro(w,o,a,v)),r-=g,v&&r<h){var E=ue(w,m);return Ao(t,n,mo,_.placeholder,e,w,E,u,c,h-r)}var O=l?e:this,S=d?O[t]:t;return r=w.length,u?w=Ea(w,u):p&&r>1&&w.reverse(),f&&c<r&&(w.length=c),this&&this!==sr&&this instanceof _&&(S=b||po(S)),S.apply(O,w)}return _}function go(t,n){return function(r,e){return Fi(r,t,n(e),{})}}function _o(t,n){return function(e,i){var s;if(e===r&&i===r)return n;if(e!==r&&(s=e),i!==r){if(s===r)return i;typeof e=="string"||typeof i=="string"?(e=Ms(e),i=Ms(i)):(e=Ts(e),i=Ts(i)),s=t(e,i)}return s}}function Eo(t){return ko((function(n){return n=Ir(n,Br(Ho())),gs((function(r){var e=this;return t(n,(function(t){return yr(t,e,r)}))}))}))}function Oo(t,n){n=n===r?" ":Ms(n);var e=n.length;if(e<2)return e?ms(n,t):n;var i=ms(n,Cn(t/de(n)));return ee(n)?zs(ve(i),0,t).join(""):i.slice(0,t)}function So(t,n,r,e){var i=n&w,s=po(t);function o(){for(var n=-1,a=arguments.length,u=-1,c=e.length,h=Ut(c+a),f=this&&this!==sr&&this instanceof o?s:t;++u<c;)h[u]=e[u];for(;a--;)h[u++]=arguments[++n];return yr(f,i?r:this,h)}return o}function Io(t){return function(n,e,i){return i&&typeof i!="number"&&aa(n,e,i)&&(e=i=r),n=Bh(n),e===r?(e=n,n=0):e=Bh(e),i=i===r?n<e?1:-1:Bh(i),bs(n,e,i,t)}}function jo(t){return function(n,r){return typeof n=="string"&&typeof r=="string"||(n=Zh(n),r=Zh(r)),t(n,r)}}function Ao(t,n,e,i,s,o,a,u,c,h){var f=n&m,l=f?a:r,d=f?r:a,v=f?o:r,p=f?r:o;n|=f?_:E,n&=~(f?E:_),n&b||(n&=~(w|y));var g=[t,n,s,v,l,p,d,u,c,h],O=e.apply(r,g);return ha(t)&&Sa(O,g),O.placeholder=i,Aa(O,t,n)}function No(t){var n=nn[t];return function(t,r){if(t=Zh(t),r=r==null?0:Hn(Kh(r),292),r&&kn(t)){var e=(Xh(t)+"e").split("e"),i=n(e[0]+"e"+(+e[1]+r));return e=(Xh(i)+"e").split("e"),+(e[0]+"e"+(+e[1]-r))}return n(t)}}var Po=ir&&1/ce(new ir([,-0]))[1]==M?function(t){return new ir(t)}:Ll;function xo(t){return function(n){var r=Qo(n);return r==Z?oe(n):r==et?he(n):zr(n,t(n))}}function $o(t,n,e,i,s,a,u,c){var h=n&y;if(!h&&typeof t!="function")throw new on(o);var f=i?i.length:0;if(f||(n&=~(_|E),i=s=r),u=u===r?u:Gn(Kh(u),0),c=c===r?c:Kh(c),f-=s?s.length:0,n&E){var l=i,d=s;i=s=r}var v=h?r:Vo(t),p=[t,n,e,i,s,l,d,a,u,c];if(v&&ya(p,v),t=p[0],n=p[1],e=p[2],i=p[3],s=p[4],c=p[9]=p[9]===r?h?0:t.length:Gn(p[9]-f,0),!c&&n&(m|g)&&(n&=~(m|g)),!n||n==w)var b=fo(t,n,e);else n==m||n==g?b=wo(t,n,c):(n==_||n==(w|_))&&!s.length?b=So(t,n,e,i):b=mo.apply(r,p);var O=v?Ss:Sa;return Aa(O(b,p),t,n)}function To(t,n,e,i){return t===r||ih(t,cn[e])&&!ln.call(i,e)?n:t}function Mo(t,n,e,i,s,o){return Sh(t)&&Sh(n)&&(o.set(n,t),us(t,n,r,Mo,o),o.delete(n)),t}function Co(t){return Ch(t)?r:t}function Ro(t,n,e,i,s,o){var a=e&v,u=t.length,c=n.length;if(u!=c&&!(a&&c>u))return!1;var h=o.get(t),f=o.get(n);if(h&&f)return h==n&&f==t;var l=-1,d=!0,w=e&p?new Je:r;for(o.set(t,n),o.set(n,t);++l<u;){var y=t[l],b=n[l];if(i)var m=a?i(b,y,l,n,t,o):i(y,b,l,t,n,o);if(m!==r){if(m)continue;d=!1;break}if(w){if(!Pr(n,(function(t,n){if(!Jr(w,n)&&(y===t||s(y,t,e,i,o)))return w.push(n)}))){d=!1;break}}else if(!(y===b||s(y,b,e,i,o))){d=!1;break}}return o.delete(t),o.delete(n),d}function Uo(t,n,r,e,i,s,o){switch(r){case ht:if(t.byteLength!=n.byteLength||t.byteOffset!=n.byteOffset)return!1;t=t.buffer,n=n.buffer;case ct:return!(t.byteLength!=n.byteLength||!s(new _n(t),new _n(n)));case H:case z:case Q:return ih(+t,+n);case B:return t.name==n.name&&t.message==n.message;case rt:case it:return t==n+"";case Z:var a=oe;case et:var u=e&v;if(a||(a=ce),t.size!=n.size&&!u)return!1;var c=o.get(t);if(c)return c==n;e|=p,o.set(t,n);var h=Ro(a(t),a(n),e,i,s,o);return o.delete(t),h;case st:if(ge)return ge.call(t)==ge.call(n)}return!1}function Do(t,n,e,i,s,o){var a=e&v,u=Lo(t),c=u.length,h=Lo(n),f=h.length;if(c!=f&&!a)return!1;for(var l=c;l--;){var d=u[l];if(!(a?d in n:ln.call(n,d)))return!1}var p=o.get(t),w=o.get(n);if(p&&w)return p==n&&w==t;var y=!0;o.set(t,n),o.set(n,t);for(var b=a;++l<c;){d=u[l];var m=t[d],g=n[d];if(i)var _=a?i(g,m,d,n,t,o):i(m,g,d,t,n,o);if(!(_===r?m===g||s(m,g,e,i,o):_)){y=!1;break}b||(b=d=="constructor")}if(y&&!b){var E=t.constructor,O=n.constructor;E!=O&&"constructor"in t&&"constructor"in n&&!(typeof E=="function"&&E instanceof E&&typeof O=="function"&&O instanceof O)&&(y=!1)}return o.delete(t),o.delete(n),y}function ko(t){return ja(ga(t,r,Ka),t+"")}function Lo(t){return Ri(t,Of,Jo)}function qo(t){return Ri(t,Sf,Zo)}var Vo=cr?function(t){return cr.get(t)}:Ll;function Fo(t){for(var n=t.name+"",r=hr[n],e=ln.call(hr,n)?r.length:0;e--;){var i=r[e],s=i.func;if(s==null||s==t)return i.name}return n}function Go(t){var n=ln.call(Oe,"placeholder")?Oe:t;return n.placeholder}function Ho(){var t=Oe.iteratee||Tl;return t=t===Tl?ns:t,arguments.length?t(arguments[0],arguments[1]):t}function zo(t,n){var r=t.__data__;return ca(n)?r[typeof n=="string"?"string":"hash"]:r.map}function Wo(t){for(var n=Of(t),r=n.length;r--;){var e=n[r],i=t[e];n[r]=[e,i,va(i)]}return n}function Bo(t,n){var e=re(t,n);return Qi(e)?e:r}function Ko(t){var n=ln.call(t,Pn),e=t[Pn];try{t[Pn]=r;var i=!0}catch{}var s=pn.call(t);return i&&(n?t[Pn]=e:delete t[Pn]),s}var Jo=Un?function(t){return t==null?[]:(t=rn(t),Er(Un(t),(function(n){return In.call(t,n)})))}:Kl,Zo=Un?function(t){for(var n=[];t;)jr(n,Jo(t)),t=On(t);return n}:Kl,Qo=Ui;(Xn&&Qo(new Xn(new ArrayBuffer(1)))!=ht||tr&&Qo(new tr)!=Z||er&&Qo(er.resolve())!=tt||ir&&Qo(new ir)!=et||or&&Qo(new or)!=at)&&(Qo=function(t){var n=Ui(t),e=n==X?t.constructor:r,i=e?Ta(e):"";if(i)switch(i){case xr:return ht;case $r:return Z;case qr:return tt;case fe:return et;case ye:return at}return n});function Yo(t,n,r){for(var e=-1,i=r.length;++e<i;){var s=r[e],o=s.size;switch(s.type){case"drop":t+=o;break;case"dropRight":n-=o;break;case"take":n=Hn(n,t+o);break;case"takeRight":t=Gn(t,n-o);break}}return{start:t,end:n}}function Xo(t){var n=t.match(kt);return n?n[1].split(Lt):[]}function ta(t,n,r){n=Gs(n,t);for(var e=-1,i=n.length,s=!1;++e<i;){var o=$a(n[e]);if(!(s=t!=null&&r(t,o)))break;t=t[o]}return s||++e!=i?s:(i=t==null?0:t.length,!!i&&Oh(i)&&oa(o,i)&&(uh(t)||ah(t)))}function na(t){var n=t.length,r=new t.constructor(n);return n&&typeof t[0]=="string"&&ln.call(t,"index")&&(r.index=t.index,r.input=t.input),r}function ra(t){return typeof t.constructor=="function"&&!da(t)?Se(On(t)):{}}function ea(t,n,r){var e=t.constructor;switch(n){case ct:return Ks(t);case H:case z:return new e(+t);case ht:return Js(t,r);case ft:case lt:case dt:case vt:case pt:case wt:case yt:case bt:case mt:return Ys(t,r);case Z:return new e;case Q:case it:return new e(t);case rt:return Zs(t);case et:return new e;case st:return Qs(t)}}function ia(t,n){var r=n.length;if(!r)return t;var e=r-1;return n[e]=(r>1?"& ":"")+n[e],n=n.join(r>2?", ":" "),t.replace(Dt,`{\n/* [wrapped with `+n+`] */\n`)}function sa(t){return uh(t)||ah(t)||!!(An&&t&&t[An])}function oa(t,n){var r=typeof t;return n=n??C,!!n&&(r=="number"||r!="symbol"&&Jt.test(t))&&t>-1&&t%1==0&&t<n}function aa(t,n,r){if(!Sh(r))return!1;var e=typeof n;return(e=="number"?hh(r)&&oa(n,r.length):e=="string"&&n in r)?ih(r[n],t):!1}function ua(t,n){if(uh(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||Lh(t)?!0:$t.test(t)||!xt.test(t)||n!=null&&t in rn(n)}function ca(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}function ha(t){var n=Fo(t),r=Oe[n];if(typeof r!="function"||!(n in Ae.prototype))return!1;if(t===r)return!0;var e=Vo(r);return!!e&&t===e[0]}function fa(t){return!!vn&&vn in t}var la=hn?_h:Jl;function da(t){var n=t&&t.constructor,r=typeof n=="function"&&n.prototype||cn;return t===r}function va(t){return t===t&&!Sh(t)}function pa(t,n){return function(e){return e==null?!1:e[t]===n&&(n!==r||t in rn(e))}}function wa(t){var n=qc(t,(function(t){return r.size===c&&r.clear(),t})),r=n.cache;return n}function ya(t,n){var r=t[1],e=n[1],i=r|e,s=i<(w|y|O),o=e==O&&r==m||e==O&&r==S&&t[7].length<=n[8]||e==(O|S)&&n[7].length<=n[8]&&r==m;if(!(s||o))return t;e&w&&(t[2]=n[2],i|=r&w?0:b);var a=n[3];if(a){var u=t[3];t[3]=u?no(u,a,n[4]):a,t[4]=u?ue(t[3],h):n[4]}return a=n[5],a&&(u=t[5],t[5]=u?ro(u,a,n[6]):a,t[6]=u?ue(t[5],h):n[6]),a=n[7],a&&(t[7]=a),e&O&&(t[8]=t[8]==null?n[8]:Hn(t[8],n[8])),t[9]==null&&(t[9]=n[9]),t[0]=n[0],t[1]=i,t}function ba(t){var n=[];if(t!=null)for(var r in rn(t))n.push(r);return n}function ma(t){return pn.call(t)}function ga(t,n,e){return n=Gn(n===r?t.length-1:n,0),function(){for(var r=arguments,i=-1,s=Gn(r.length-n,0),o=Ut(s);++i<s;)o[i]=r[n+i];i=-1;for(var a=Ut(n+1);++i<n;)a[i]=r[i];return a[n]=e(o),yr(t,this,a)}}function _a(t,n){return n.length<2?t:Ci(t,As(n,0,-1))}function Ea(t,n){for(var e=t.length,i=Hn(n.length,e),s=eo(t);i--;){var o=n[i];t[i]=oa(o,e)?s[o]:r}return t}function Oa(t,n){if(!(n==="constructor"&&typeof t[n]=="function")&&n!="__proto__")return t[n]}var Sa=Na(Ss),Ia=Mn||function(t,n){return sr.setTimeout(t,n)},ja=Na(Is);function Aa(t,n,r){var e=n+"";return ja(t,ia(e,Ma(Xo(e),r)))}function Na(t){var n=0,e=0;return function(){var i=zn(),s=P-(i-e);if(e=i,s>0){if(++n>=N)return arguments[0]}else n=0;return t.apply(r,arguments)}}function Pa(t,n){var e=-1,i=t.length,s=i-1;for(n=n===r?i:n;++e<n;){var o=ys(e,s),a=t[o];t[o]=t[e],t[e]=a}return t.length=n,t}var xa=wa((function(t){var n=[];return t.charCodeAt(0)===46&&n.push(""),t.replace(Tt,(function(t,r,e,i){n.push(e?i.replace(Ft,"$1"):r||t)})),n}));function $a(t){if(typeof t=="string"||Lh(t))return t;var n=t+"";return n=="0"&&1/t==-M?"-0":n}function Ta(t){if(t!=null){try{return fn.call(t)}catch{}try{return t+""}catch{}}return""}function Ma(t,n){return mr(q,(function(r){var e="_."+r[0];n&r[1]&&!Or(t,e)&&t.push(e)})),t.sort()}function Ca(t){if(t instanceof Ae)return t.clone();var n=new je(t.__wrapped__,t.__chain__);return n.__actions__=eo(t.__actions__),n.__index__=t.__index__,n.__values__=t.__values__,n}function Ra(t,n,e){(e?aa(t,n,e):n===r)?n=1:n=Gn(Kh(n),0);var i=t==null?0:t.length;if(!i||n<1)return[];for(var s=0,o=0,a=Ut(Cn(i/n));s<i;)a[o++]=As(t,s,s+=n);return a}function Ua(t){for(var n=-1,r=t==null?0:t.length,e=0,i=[];++n<r;){var s=t[n];s&&(i[e++]=s)}return i}function Da(){var t=arguments.length;if(!t)return[];for(var n=Ut(t-1),r=arguments[0],e=t;e--;)n[e-1]=arguments[e];return jr(uh(r)?eo(r):[r],Ni(n,1))}var ka=gs((function(t,n){return fh(t)?_i(t,Ni(n,1,fh,!0)):[]})),La=gs((function(t,n){var e=su(n);return fh(e)&&(e=r),fh(t)?_i(t,Ni(n,1,fh,!0),Ho(e,2)):[]})),qa=gs((function(t,n){var e=su(n);return fh(e)&&(e=r),fh(t)?_i(t,Ni(n,1,fh,!0),r,e):[]}));function Va(t,n,e){var i=t==null?0:t.length;return i?(n=e||n===r?1:Kh(n),As(t,n<0?0:n,i)):[]}function Fa(t,n,e){var i=t==null?0:t.length;return i?(n=e||n===r?1:Kh(n),n=i-n,As(t,0,n<0?0:n)):[]}function Ga(t,n){return t&&t.length?Ds(t,Ho(n,3),!0,!0):[]}function Ha(t,n){return t&&t.length?Ds(t,Ho(n,3),!0):[]}function za(t,n,r,e){var i=t==null?0:t.length;return i?(r&&typeof r!="number"&&aa(t,n,r)&&(r=0,e=i),ji(t,n,r,e)):[]}function Wa(t,n,r){var e=t==null?0:t.length;if(!e)return-1;var i=r==null?0:Kh(r);return i<0&&(i=Gn(e+i,0)),Cr(t,Ho(n,3),i)}function Ba(t,n,e){var i=t==null?0:t.length;if(!i)return-1;var s=i-1;return e!==r&&(s=Kh(e),s=e<0?Gn(i+s,0):Hn(s,i-1)),Cr(t,Ho(n,3),s,!0)}function Ka(t){var n=t==null?0:t.length;return n?Ni(t,1):[]}function Ja(t){var n=t==null?0:t.length;return n?Ni(t,M):[]}function Za(t,n){var e=t==null?0:t.length;return e?(n=n===r?1:Kh(n),Ni(t,n)):[]}function Qa(t){for(var n=-1,r=t==null?0:t.length,e={};++n<r;){var i=t[n];e[i[0]]=i[1]}return e}function Ya(t){return t&&t.length?t[0]:r}function Xa(t,n,r){var e=t==null?0:t.length;if(!e)return-1;var i=r==null?0:Kh(r);return i<0&&(i=Gn(e+i,0)),Rr(t,n,i)}function tu(t){var n=t==null?0:t.length;return n?As(t,0,-1):[]}var nu=gs((function(t){var n=Ir(t,Vs);return n.length&&n[0]===t[0]?Vi(n):[]})),ru=gs((function(t){var n=su(t),e=Ir(t,Vs);return n===su(e)?n=r:e.pop(),e.length&&e[0]===t[0]?Vi(e,Ho(n,2)):[]})),eu=gs((function(t){var n=su(t),e=Ir(t,Vs);return n=typeof n=="function"?n:r,n&&e.pop(),e.length&&e[0]===t[0]?Vi(e,r,n):[]}));function iu(t,n){return t==null?"":Ln.call(t,n)}function su(t){var n=t==null?0:t.length;return n?t[n-1]:r}function ou(t,n,e){var i=t==null?0:t.length;if(!i)return-1;var s=i;return e!==r&&(s=Kh(e),s=s<0?Gn(i+s,0):Hn(s,i-1)),n===n?le(t,n,s):Cr(t,Dr,s,!0)}function au(t,n){return t&&t.length?hs(t,Kh(n)):r}var uu=gs(cu);function cu(t,n){return t&&t.length&&n&&n.length?ps(t,n):t}function hu(t,n,r){return t&&t.length&&n&&n.length?ps(t,n,Ho(r,2)):t}function fu(t,n,e){return t&&t.length&&n&&n.length?ps(t,n,r,e):t}var lu=ko((function(t,n){var r=t==null?0:t.length,e=pi(t,n);return ws(t,Ir(n,(function(t){return oa(t,r)?+t:t})).sort(Xs)),e}));function du(t,n){var r=[];if(!(t&&t.length))return r;var e=-1,i=[],s=t.length;for(n=Ho(n,3);++e<s;){var o=t[e];n(o,e,t)&&(r.push(o),i.push(e))}return ws(t,i),r}function vu(t){return t==null?t:Yn.call(t)}function pu(t,n,e){var i=t==null?0:t.length;return i?(e&&typeof e!="number"&&aa(t,n,e)?(n=0,e=i):(n=n==null?0:Kh(n),e=e===r?i:Kh(e)),As(t,n,e)):[]}function wu(t,n){return Ps(t,n)}function yu(t,n,r){return xs(t,n,Ho(r,2))}function bu(t,n){var r=t==null?0:t.length;if(r){var e=Ps(t,n);if(e<r&&ih(t[e],n))return e}return-1}function mu(t,n){return Ps(t,n,!0)}function gu(t,n,r){return xs(t,n,Ho(r,2),!0)}function _u(t,n){var r=t==null?0:t.length;if(r){var e=Ps(t,n,!0)-1;if(ih(t[e],n))return e}return-1}function Eu(t){return t&&t.length?$s(t):[]}function Ou(t,n){return t&&t.length?$s(t,Ho(n,2)):[]}function Su(t){var n=t==null?0:t.length;return n?As(t,1,n):[]}function Iu(t,n,e){return t&&t.length?(n=e||n===r?1:Kh(n),As(t,0,n<0?0:n)):[]}function ju(t,n,e){var i=t==null?0:t.length;return i?(n=e||n===r?1:Kh(n),n=i-n,As(t,n<0?0:n,i)):[]}function Au(t,n){return t&&t.length?Ds(t,Ho(n,3),!1,!0):[]}function Nu(t,n){return t&&t.length?Ds(t,Ho(n,3)):[]}var Pu=gs((function(t){return Cs(Ni(t,1,fh,!0))})),xu=gs((function(t){var n=su(t);return fh(n)&&(n=r),Cs(Ni(t,1,fh,!0),Ho(n,2))})),$u=gs((function(t){var n=su(t);return n=typeof n=="function"?n:r,Cs(Ni(t,1,fh,!0),r,n)}));function Tu(t){return t&&t.length?Cs(t):[]}function Mu(t,n){return t&&t.length?Cs(t,Ho(n,2)):[]}function Cu(t,n){return n=typeof n=="function"?n:r,t&&t.length?Cs(t,r,n):[]}function Ru(t){if(!(t&&t.length))return[];var n=0;return t=Er(t,(function(t){if(fh(t))return n=Gn(t.length,n),!0})),Hr(n,(function(n){return Ir(t,Lr(n))}))}function Uu(t,n){if(!(t&&t.length))return[];var e=Ru(t);return n==null?e:Ir(e,(function(t){return yr(n,r,t)}))}var Du=gs((function(t,n){return fh(t)?_i(t,n):[]})),ku=gs((function(t){return Ls(Er(t,fh))})),Lu=gs((function(t){var n=su(t);return fh(n)&&(n=r),Ls(Er(t,fh),Ho(n,2))})),qu=gs((function(t){var n=su(t);return n=typeof n=="function"?n:r,Ls(Er(t,fh),r,n)})),Vu=gs(Ru);function Fu(t,n){return qs(t||[],n||[],ci)}function Gu(t,n){return qs(t||[],n||[],Os)}var Hu=gs((function(t){var n=t.length,e=n>1?t[n-1]:r;return e=typeof e=="function"?(t.pop(),e):r,Uu(t,e)}));function zu(t){var n=Oe(t);return n.__chain__=!0,n}function Wu(t,n){return n(t),t}function Bu(t,n){return n(t)}var Ku=ko((function(t){var n=t.length,e=n?t[0]:0,i=this.__wrapped__,s=function(n){return pi(n,t)};return n>1||this.__actions__.length||!(i instanceof Ae)||!oa(e)?this.thru(s):(i=i.slice(e,+e+(n?1:0)),i.__actions__.push({func:Bu,args:[s],thisArg:r}),new je(i,this.__chain__).thru((function(t){return n&&!t.length&&t.push(r),t})))}));function Ju(){return zu(this)}function Zu(){return new je(this.value(),this.__chain__)}function Qu(){this.__values__===r&&(this.__values__=Wh(this.value()));var t=this.__index__>=this.__values__.length,n=t?r:this.__values__[this.__index__++];return{done:t,value:n}}function Yu(){return this}function Xu(t){for(var n,e=this;e instanceof Ie;){var i=Ca(e);i.__index__=0,i.__values__=r,n?s.__wrapped__=i:n=i;var s=i;e=e.__wrapped__}return s.__wrapped__=t,n}function tc(){var t=this.__wrapped__;if(t instanceof Ae){var n=t;return this.__actions__.length&&(n=new Ae(this)),n=n.reverse(),n.__actions__.push({func:Bu,args:[vu],thisArg:r}),new je(n,this.__chain__)}return this.thru(vu)}function nc(){return ks(this.__wrapped__,this.__actions__)}var rc=ao((function(t,n,r){ln.call(t,r)?++t[r]:vi(t,r,1)}));function ec(t,n,e){var i=uh(t)?_r:Si;return e&&aa(t,n,e)&&(n=r),i(t,Ho(n,3))}function ic(t,n){var r=uh(t)?Er:Ai;return r(t,Ho(n,3))}var sc=yo(Wa),oc=yo(Ba);function ac(t,n){return Ni(wc(t,n),1)}function uc(t,n){return Ni(wc(t,n),M)}function cc(t,n,e){return e=e===r?1:Kh(e),Ni(wc(t,n),e)}function hc(t,n){var r=uh(t)?mr:Ei;return r(t,Ho(n,3))}function fc(t,n){var r=uh(t)?gr:Oi;return r(t,Ho(n,3))}var lc=ao((function(t,n,r){ln.call(t,r)?t[r].push(n):vi(t,r,[n])}));function dc(t,n,r,e){t=hh(t)?t:Ff(t),r=r&&!e?Kh(r):0;var i=t.length;return r<0&&(r=Gn(i+r,0)),kh(t)?r<=i&&t.indexOf(n,r)>-1:!!i&&Rr(t,n,r)>-1}var vc=gs((function(t,n,r){var e=-1,i=typeof n=="function",s=hh(t)?Ut(t.length):[];return Ei(t,(function(t){s[++e]=i?yr(n,t,r):Gi(t,n,r)})),s})),pc=ao((function(t,n,r){vi(t,r,n)}));function wc(t,n){var r=uh(t)?Ir:ss;return r(t,Ho(n,3))}function yc(t,n,e,i){return t==null?[]:(uh(n)||(n=n==null?[]:[n]),e=i?r:e,uh(e)||(e=e==null?[]:[e]),fs(t,n,e))}var bc=ao((function(t,n,r){t[r?0:1].push(n)}),(function(){return[[],[]]}));function mc(t,n,r){var e=uh(t)?Ar:Vr,i=arguments.length<3;return e(t,Ho(n,4),r,i,Ei)}function gc(t,n,r){var e=uh(t)?Nr:Vr,i=arguments.length<3;return e(t,Ho(n,4),r,i,Oi)}function _c(t,n){var r=uh(t)?Er:Ai;return r(t,Vc(Ho(n,3)))}function Ec(t){var n=uh(t)?si:_s;return n(t)}function Oc(t,n,e){(e?aa(t,n,e):n===r)?n=1:n=Kh(n);var i=uh(t)?oi:Es;return i(t,n)}function Sc(t){var n=uh(t)?ai:js;return n(t)}function Ic(t){if(t==null)return 0;if(hh(t))return kh(t)?de(t):t.length;var n=Qo(t);return n==Z||n==et?t.size:rs(t).length}function jc(t,n,e){var i=uh(t)?Pr:Ns;return e&&aa(t,n,e)&&(n=r),i(t,Ho(n,3))}var Ac=gs((function(t,n){if(t==null)return[];var r=n.length;return r>1&&aa(t,n[0],n[1])?n=[]:r>2&&aa(n[0],n[1],n[2])&&(n=[n[0]]),fs(t,Ni(n,1),[])})),Nc=Tn||function(){return sr.Date.now()};function Pc(t,n){if(typeof n!="function")throw new on(o);return t=Kh(t),function(){if(--t<1)return n.apply(this,arguments)}}function xc(t,n,e){return n=e?r:n,n=t&&n==null?t.length:n,$o(t,O,r,r,r,r,n)}function $c(t,n){var e;if(typeof n!="function")throw new on(o);return t=Kh(t),function(){return--t>0&&(e=n.apply(this,arguments)),t<=1&&(n=r),e}}var Tc=gs((function(t,n,r){var e=w;if(r.length){var i=ue(r,Go(Tc));e|=_}return $o(t,e,n,r,i)})),Mc=gs((function(t,n,r){var e=w|y;if(r.length){var i=ue(r,Go(Mc));e|=_}return $o(n,e,t,r,i)}));function Cc(t,n,e){n=e?r:n;var i=$o(t,m,r,r,r,r,r,n);return i.placeholder=Cc.placeholder,i}function Rc(t,n,e){n=e?r:n;var i=$o(t,g,r,r,r,r,r,n);return i.placeholder=Rc.placeholder,i}function Uc(t,n,e){var i,s,a,u,c,h,f=0,l=!1,d=!1,v=!0;if(typeof t!="function")throw new on(o);n=Zh(n)||0,Sh(e)&&(l=!!e.leading,d="maxWait"in e,a=d?Gn(Zh(e.maxWait)||0,n):a,v="trailing"in e?!!e.trailing:v);function p(n){var e=i,o=s;return i=s=r,f=n,u=t.apply(o,e),u}function w(t){return f=t,c=Ia(m,n),l?p(t):u}function y(t){var r=t-h,e=t-f,i=n-r;return d?Hn(i,a-e):i}function b(t){var e=t-h,i=t-f;return h===r||e>=n||e<0||d&&i>=a}function m(){var t=Nc();if(b(t))return g(t);c=Ia(m,y(t))}function g(t){return c=r,v&&i?p(t):(i=s=r,u)}function _(){c!==r&&Ws(c),f=0,i=h=s=c=r}function E(){return c===r?u:g(Nc())}function O(){var t=Nc(),e=b(t);if(i=arguments,s=this,h=t,e){if(c===r)return w(h);if(d)return Ws(c),c=Ia(m,n),p(h)}return c===r&&(c=Ia(m,n)),u}return O.cancel=_,O.flush=E,O}var Dc=gs((function(t,n){return gi(t,1,n)})),kc=gs((function(t,n,r){return gi(t,Zh(n)||0,r)}));function Lc(t){return $o(t,I)}function qc(t,n){if(typeof t!="function"||n!=null&&typeof n!="function")throw new on(o);var r=function(){var e=arguments,i=n?n.apply(this,e):e[0],s=r.cache;if(s.has(i))return s.get(i);var o=t.apply(this,e);return r.cache=s.set(i,o)||s,o};return r.cache=new(qc.Cache||Ge),r}qc.Cache=Ge;function Vc(t){if(typeof t!="function")throw new on(o);return function(){var n=arguments;switch(n.length){case 0:return!t.call(this);case 1:return!t.call(this,n[0]);case 2:return!t.call(this,n[0],n[1]);case 3:return!t.call(this,n[0],n[1],n[2])}return!t.apply(this,n)}}function Fc(t){return $c(2,t)}var Gc=Hs((function(t,n){n=n.length==1&&uh(n[0])?Ir(n[0],Br(Ho())):Ir(Ni(n,1),Br(Ho()));var r=n.length;return gs((function(e){for(var i=-1,s=Hn(e.length,r);++i<s;)e[i]=n[i].call(this,e[i]);return yr(t,this,e)}))})),Hc=gs((function(t,n){var e=ue(n,Go(Hc));return $o(t,_,r,n,e)})),zc=gs((function(t,n){var e=ue(n,Go(zc));return $o(t,E,r,n,e)})),Wc=ko((function(t,n){return $o(t,S,r,r,r,n)}));function Bc(t,n){if(typeof t!="function")throw new on(o);return n=n===r?n:Kh(n),gs(t,n)}function Kc(t,n){if(typeof t!="function")throw new on(o);return n=n==null?0:Gn(Kh(n),0),gs((function(r){var e=r[n],i=zs(r,0,n);return e&&jr(i,e),yr(t,this,i)}))}function Jc(t,n,r){var e=!0,i=!0;if(typeof t!="function")throw new on(o);return Sh(r)&&(e="leading"in r?!!r.leading:e,i="trailing"in r?!!r.trailing:i),Uc(t,n,{leading:e,maxWait:n,trailing:i})}function Zc(t){return xc(t,1)}function Qc(t,n){return Hc(Fs(n),t)}function Yc(){if(!arguments.length)return[];var t=arguments[0];return uh(t)?t:[t]}function Xc(t){return yi(t,d)}function th(t,n){return n=typeof n=="function"?n:r,yi(t,d,n)}function nh(t){return yi(t,f|d)}function rh(t,n){return n=typeof n=="function"?n:r,yi(t,f|d,n)}function eh(t,n){return n==null||mi(t,n,Of(n))}function ih(t,n){return t===n||t!==t&&n!==n}var sh=jo(Di),oh=jo((function(t,n){return t>=n})),ah=Hi(function(){return arguments}())?Hi:function(t){return Ih(t)&&ln.call(t,"callee")&&!In.call(t,"callee")},uh=Ut.isArray,ch=fr?Br(fr):zi;function hh(t){return t!=null&&Oh(t.length)&&!_h(t)}function fh(t){return Ih(t)&&hh(t)}function lh(t){return t===!0||t===!1||Ih(t)&&Ui(t)==H}var dh=Dn||Jl,vh=lr?Br(lr):Wi;function ph(t){return Ih(t)&&t.nodeType===1&&!Ch(t)}function wh(t){if(t==null)return!0;if(hh(t)&&(uh(t)||typeof t=="string"||typeof t.splice=="function"||dh(t)||qh(t)||ah(t)))return!t.length;var n=Qo(t);if(n==Z||n==et)return!t.size;if(da(t))return!rs(t).length;for(var r in t)if(ln.call(t,r))return!1;return!0}function yh(t,n){return Bi(t,n)}function bh(t,n,e){e=typeof e=="function"?e:r;var i=e?e(t,n):r;return i===r?Bi(t,n,r,e):!!i}function mh(t){if(!Ih(t))return!1;var n=Ui(t);return n==B||n==W||typeof t.message=="string"&&typeof t.name=="string"&&!Ch(t)}function gh(t){return typeof t=="number"&&kn(t)}function _h(t){if(!Sh(t))return!1;var n=Ui(t);return n==K||n==J||n==G||n==nt}function Eh(t){return typeof t=="number"&&t==Kh(t)}function Oh(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=C}function Sh(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}function Ih(t){return t!=null&&typeof t=="object"}var jh=dr?Br(dr):Ji;function Ah(t,n){return t===n||Zi(t,n,Wo(n))}function Nh(t,n,e){return e=typeof e=="function"?e:r,Zi(t,n,Wo(n),e)}function Ph(t){return Mh(t)&&t!=+t}function xh(t){if(la(t))throw new Xt(s);return Qi(t)}function $h(t){return t===null}function Th(t){return t==null}function Mh(t){return typeof t=="number"||Ih(t)&&Ui(t)==Q}function Ch(t){if(!Ih(t)||Ui(t)!=X)return!1;var n=On(t);if(n===null)return!0;var r=ln.call(n,"constructor")&&n.constructor;return typeof r=="function"&&r instanceof r&&fn.call(r)==wn}var Rh=vr?Br(vr):Yi;function Uh(t){return Eh(t)&&t>=-C&&t<=C}var Dh=pr?Br(pr):Xi;function kh(t){return typeof t=="string"||!uh(t)&&Ih(t)&&Ui(t)==it}function Lh(t){return typeof t=="symbol"||Ih(t)&&Ui(t)==st}var qh=wr?Br(wr):ts;function Vh(t){return t===r}function Fh(t){return Ih(t)&&Qo(t)==at}function Gh(t){return Ih(t)&&Ui(t)==ut}var Hh=jo(is),zh=jo((function(t,n){return t<=n}));function Wh(t){if(!t)return[];if(hh(t))return kh(t)?ve(t):eo(t);if(Nn&&t[Nn])return se(t[Nn]());var n=Qo(t),r=n==Z?oe:n==et?ce:Ff;return r(t)}function Bh(t){if(!t)return t===0?t:0;if(t=Zh(t),t===M||t===-M){var n=t<0?-1:1;return n*R}return t===t?t:0}function Kh(t){var n=Bh(t),r=n%1;return n===n?r?n-r:n:0}function Jh(t){return t?wi(Kh(t),0,D):0}function Zh(t){if(typeof t=="number")return t;if(Lh(t))return U;if(Sh(t)){var n=typeof t.valueOf=="function"?t.valueOf():t;t=Sh(n)?n+"":n}if(typeof t!="string")return t===0?t:+t;t=Wr(t);var r=Wt.test(t);return r||Kt.test(t)?rr(t.slice(2),r?2:8):zt.test(t)?U:+t}function Qh(t){return io(t,Sf(t))}function Yh(t){return t?wi(Kh(t),-C,C):t===0?t:0}function Xh(t){return t==null?"":Ms(t)}var tf=uo((function(t,n){if(da(n)||hh(n)){io(n,Of(n),t);return}for(var r in n)ln.call(n,r)&&ci(t,r,n[r])})),nf=uo((function(t,n){io(n,Sf(n),t)})),rf=uo((function(t,n,r,e){io(n,Sf(n),t,e)})),ef=uo((function(t,n,r,e){io(n,Of(n),t,e)})),sf=ko(pi);function of(t,n){var r=Se(t);return n==null?r:li(r,n)}var af=gs((function(t,n){t=rn(t);var e=-1,i=n.length,s=i>2?n[2]:r;for(s&&aa(n[0],n[1],s)&&(i=1);++e<i;)for(var o=n[e],a=Sf(o),u=-1,c=a.length;++u<c;){var h=a[u],f=t[h];(f===r||ih(f,cn[h])&&!ln.call(t,h))&&(t[h]=o[h])}return t})),uf=gs((function(t){return t.push(r,Mo),yr(Nf,r,t)}));function cf(t,n){return Mr(t,Ho(n,3),$i)}function hf(t,n){return Mr(t,Ho(n,3),Ti)}function ff(t,n){return t==null?t:Pi(t,Ho(n,3),Sf)}function lf(t,n){return t==null?t:xi(t,Ho(n,3),Sf)}function df(t,n){return t&&$i(t,Ho(n,3))}function vf(t,n){return t&&Ti(t,Ho(n,3))}function pf(t){return t==null?[]:Mi(t,Of(t))}function wf(t){return t==null?[]:Mi(t,Sf(t))}function yf(t,n,e){var i=t==null?r:Ci(t,n);return i===r?e:i}function bf(t,n){return t!=null&&ta(t,n,ki)}function mf(t,n){return t!=null&&ta(t,n,Li)}var gf=go((function(t,n,r){n!=null&&typeof n.toString!="function"&&(n=pn.call(n)),t[n]=r}),Al($l)),_f=go((function(t,n,r){n!=null&&typeof n.toString!="function"&&(n=pn.call(n)),ln.call(t,n)?t[n].push(r):t[n]=[r]}),Ho),Ef=gs(Gi);function Of(t){return hh(t)?ii(t):rs(t)}function Sf(t){return hh(t)?ii(t,!0):es(t)}function If(t,n){var r={};return n=Ho(n,3),$i(t,(function(t,e,i){vi(r,n(t,e,i),t)})),r}function jf(t,n){var r={};return n=Ho(n,3),$i(t,(function(t,e,i){vi(r,e,n(t,e,i))})),r}var Af=uo((function(t,n,r){us(t,n,r)})),Nf=uo((function(t,n,r,e){us(t,n,r,e)})),Pf=ko((function(t,n){var r={};if(t==null)return r;var e=!1;n=Ir(n,(function(n){return n=Gs(n,t),e||(e=n.length>1),n})),io(t,qo(t),r),e&&(r=yi(r,f|l|d,Co));for(var i=n.length;i--;)Rs(r,n[i]);return r}));function xf(t,n){return Tf(t,Vc(Ho(n)))}var $f=ko((function(t,n){return t==null?{}:ls(t,n)}));function Tf(t,n){if(t==null)return{};var r=Ir(qo(t),(function(t){return[t]}));return n=Ho(n),ds(t,r,(function(t,r){return n(t,r[0])}))}function Mf(t,n,e){n=Gs(n,t);var i=-1,s=n.length;for(s||(s=1,t=r);++i<s;){var o=t==null?r:t[$a(n[i])];o===r&&(i=s,o=e),t=_h(o)?o.call(t):o}return t}function Cf(t,n,r){return t==null?t:Os(t,n,r)}function Rf(t,n,e,i){return i=typeof i=="function"?i:r,t==null?t:Os(t,n,e,i)}var Uf=xo(Of),Df=xo(Sf);function kf(t,n,r){var e=uh(t),i=e||dh(t)||qh(t);if(n=Ho(n,4),r==null){var s=t&&t.constructor;i?r=e?new s:[]:Sh(t)?r=_h(s)?Se(On(t)):{}:r={}}return(i?mr:$i)(t,(function(t,e,i){return n(r,t,e,i)})),r}function Lf(t,n){return t==null?!0:Rs(t,n)}function qf(t,n,r){return t==null?t:Us(t,n,Fs(r))}function Vf(t,n,e,i){return i=typeof i=="function"?i:r,t==null?t:Us(t,n,Fs(e),i)}function Ff(t){return t==null?[]:Kr(t,Of(t))}function Gf(t){return t==null?[]:Kr(t,Sf(t))}function Hf(t,n,e){return e===r&&(e=n,n=r),e!==r&&(e=Zh(e),e=e===e?e:0),n!==r&&(n=Zh(n),n=n===n?n:0),wi(Zh(t),n,e)}function zf(t,n,e){return n=Bh(n),e===r?(e=n,n=0):e=Bh(e),t=Zh(t),qi(t,n,e)}function Wf(t,n,e){if(e&&typeof e!="boolean"&&aa(t,n,e)&&(n=e=r),e===r&&(typeof n=="boolean"?(e=n,n=r):typeof t=="boolean"&&(e=t,t=r)),t===r&&n===r?(t=0,n=1):(t=Bh(t),n===r?(n=t,t=0):n=Bh(n)),t>n){var i=t;t=n,n=i}if(e||t%1||n%1){var s=Qn();return Hn(t+s*(n-t+nr("1e-"+((s+"").length-1))),n)}return ys(t,n)}var Bf=vo((function(t,n,r){return n=n.toLowerCase(),t+(r?Kf(n):n)}));function Kf(t){return _l(Xh(t).toLowerCase())}function Jf(t){return t=Xh(t),t&&t.replace(Zt,Xr).replace(Fn,"")}function Zf(t,n,e){t=Xh(t),n=Ms(n);var i=t.length;e=e===r?i:wi(Kh(e),0,i);var s=e;return e-=n.length,e>=0&&t.slice(e,s)==n}function Qf(t){return t=Xh(t),t&&jt.test(t)?t.replace(St,te):t}function Yf(t){return t=Xh(t),t&&Ct.test(t)?t.replace(Mt,"\\$&"):t}var Xf=vo((function(t,n,r){return t+(r?"-":"")+n.toLowerCase()})),tl=vo((function(t,n,r){return t+(r?" ":"")+n.toLowerCase()})),nl=lo("toLowerCase");function rl(t,n,r){t=Xh(t),n=Kh(n);var e=n?de(t):0;if(!n||e>=n)return t;var i=(n-e)/2;return Oo(Rn(i),r)+t+Oo(Cn(i),r)}function el(t,n,r){t=Xh(t),n=Kh(n);var e=n?de(t):0;return n&&e<n?t+Oo(n-e,r):t}function il(t,n,r){t=Xh(t),n=Kh(n);var e=n?de(t):0;return n&&e<n?Oo(n-e,r)+t:t}function sl(t,n,r){return r||n==null?n=0:n&&(n=+n),Wn(Xh(t).replace(Rt,""),n||0)}function ol(t,n,e){return(e?aa(t,n,e):n===r)?n=1:n=Kh(n),ms(Xh(t),n)}function al(){var t=arguments,n=Xh(t[0]);return t.length<3?n:n.replace(t[1],t[2])}var ul=vo((function(t,n,r){return t+(r?"_":"")+n.toLowerCase()}));function cl(t,n,e){return e&&typeof e!="number"&&aa(t,n,e)&&(n=e=r),e=e===r?D:e>>>0,e?(t=Xh(t),t&&(typeof n=="string"||n!=null&&!Rh(n))&&(n=Ms(n),!n&&ee(t))?zs(ve(t),0,e):t.split(n,e)):[]}var hl=vo((function(t,n,r){return t+(r?" ":"")+_l(n)}));function fl(t,n,r){return t=Xh(t),r=r==null?0:wi(Kh(r),0,t.length),n=Ms(n),t.slice(r,r+n.length)==n}function ll(t,n,e){var i=Oe.templateSettings;e&&aa(t,n,e)&&(n=r),t=Xh(t),n=rf({},n,i,To);var s=rf({},n.imports,i.imports,To),o=Of(s),u=Kr(s,o),c,h,f=0,l=n.interpolate||Qt,d="__p += '",v=en((n.escape||Qt).source+"|"+l.source+"|"+(l===Pt?Gt:Qt).source+"|"+(n.evaluate||Qt).source+"|$","g"),p="//# sourceURL="+(ln.call(n,"sourceURL")?(n.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Kn+"]")+`\n`;t.replace(v,(function(n,r,e,i,s,o){return e||(e=i),d+=t.slice(f,o).replace(Yt,ne),r&&(c=!0,d+=`' +\n__e(`+r+`) +\n'`),s&&(h=!0,d+=`';\n`+s+`;\n__p += '`),e&&(d+=`' +\n((__t = (`+e+`)) == null ? '' : __t) +\n'`),f=o+n.length,n})),d+=`';\n`;var w=ln.call(n,"variable")&&n.variable;if(!w)d=`with (obj) {\n`+d+`\n}\n`;else if(Vt.test(w))throw new Xt(a);d=(h?d.replace(gt,""):d).replace(_t,"$1").replace(Et,"$1;"),d="function("+(w||"obj")+`) {\n`+(w?"":`obj || (obj = {});\n`)+"var __t, __p = ''"+(c?", __e = _.escape":"")+(h?`, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n`:`;\n`)+d+`return __p\n}`;var y=Ol((function(){return tn(o,p+"return "+d).apply(r,u)}));if(y.source=d,mh(y))throw y;return y}function dl(t){return Xh(t).toLowerCase()}function vl(t){return Xh(t).toUpperCase()}function pl(t,n,e){if(t=Xh(t),t&&(e||n===r))return Wr(t);if(!t||!(n=Ms(n)))return t;var i=ve(t),s=ve(n),o=Zr(i,s),a=Qr(i,s)+1;return zs(i,o,a).join("")}function wl(t,n,e){if(t=Xh(t),t&&(e||n===r))return t.slice(0,pe(t)+1);if(!t||!(n=Ms(n)))return t;var i=ve(t),s=Qr(i,ve(n))+1;return zs(i,0,s).join("")}function yl(t,n,e){if(t=Xh(t),t&&(e||n===r))return t.replace(Rt,"");if(!t||!(n=Ms(n)))return t;var i=ve(t),s=Zr(i,ve(n));return zs(i,s).join("")}function bl(t,n){var e=j,i=A;if(Sh(n)){var s="separator"in n?n.separator:s;e="length"in n?Kh(n.length):e,i="omission"in n?Ms(n.omission):i}t=Xh(t);var o=t.length;if(ee(t)){var a=ve(t);o=a.length}if(e>=o)return t;var u=e-de(i);if(u<1)return i;var c=a?zs(a,0,u).join(""):t.slice(0,u);if(s===r)return c+i;if(a&&(u+=c.length-u),Rh(s)){if(t.slice(u).search(s)){var h,f=c;for(s.global||(s=en(s.source,Xh(Ht.exec(s))+"g")),s.lastIndex=0;h=s.exec(f);)var l=h.index;c=c.slice(0,l===r?u:l)}}else if(t.indexOf(Ms(s),u)!=u){var d=c.lastIndexOf(s);d>-1&&(c=c.slice(0,d))}return c+i}function ml(t){return t=Xh(t),t&&It.test(t)?t.replace(Ot,we):t}var gl=vo((function(t,n,r){return t+(r?" ":"")+n.toUpperCase()})),_l=lo("toUpperCase");function El(t,n,e){return t=Xh(t),n=e?r:n,n===r?ie(t)?me(t):Tr(t):t.match(n)||[]}var Ol=gs((function(t,n){try{return yr(t,r,n)}catch(t){return mh(t)?t:new Xt(t)}})),Sl=ko((function(t,n){return mr(n,(function(n){n=$a(n),vi(t,n,Tc(t[n],t))})),t}));function Il(t){var n=t==null?0:t.length,r=Ho();return t=n?Ir(t,(function(t){if(typeof t[1]!="function")throw new on(o);return[r(t[0]),t[1]]})):[],gs((function(r){for(var e=-1;++e<n;){var i=t[e];if(yr(i[0],this,r))return yr(i[1],this,r)}}))}function jl(t){return bi(yi(t,f))}function Al(t){return function(){return t}}function Nl(t,n){return t==null||t!==t?n:t}var Pl=bo(),xl=bo(!0);function $l(t){return t}function Tl(t){return ns(typeof t=="function"?t:yi(t,f))}function Ml(t){return os(yi(t,f))}function Cl(t,n){return as(t,yi(n,f))}var Rl=gs((function(t,n){return function(r){return Gi(r,t,n)}})),Ul=gs((function(t,n){return function(r){return Gi(t,r,n)}}));function Dl(t,n,r){var e=Of(n),i=Mi(n,e);r==null&&!(Sh(n)&&(i.length||!e.length))&&(r=n,n=t,t=this,i=Mi(n,Of(n)));var s=!(Sh(r)&&"chain"in r)||!!r.chain,o=_h(t);return mr(i,(function(r){var e=n[r];t[r]=e,o&&(t.prototype[r]=function(){var n=this.__chain__;if(s||n){var r=t(this.__wrapped__),i=r.__actions__=eo(this.__actions__);return i.push({func:e,args:arguments,thisArg:t}),r.__chain__=n,r}return e.apply(t,jr([this.value()],arguments))})})),t}function kl(){return sr._===this&&(sr._=yn),this}function Ll(){}function ql(t){return t=Kh(t),gs((function(n){return hs(n,t)}))}var Vl=Eo(Ir),Fl=Eo(_r),Gl=Eo(Pr);function Hl(t){return ua(t)?Lr($a(t)):vs(t)}function zl(t){return function(n){return t==null?r:Ci(t,n)}}var Wl=Io(),Bl=Io(!0);function Kl(){return[]}function Jl(){return!1}function Zl(){return{}}function Ql(){return""}function Yl(){return!0}function Xl(t,n){if(t=Kh(t),t<1||t>C)return[];var r=D,e=Hn(t,D);n=Ho(n),t-=D;for(var i=Hr(e,n);++r<t;)n(r);return i}function td(t){return uh(t)?Ir(t,$a):Lh(t)?[t]:eo(xa(Xh(t)))}function nd(t){var n=++dn;return Xh(t)+n}var rd=_o((function(t,n){return t+n}),0),ed=No("ceil"),id=_o((function(t,n){return t/n}),1),sd=No("floor");function od(t){return t&&t.length?Ii(t,$l,Di):r}function ad(t,n){return t&&t.length?Ii(t,Ho(n,2),Di):r}function ud(t){return kr(t,$l)}function cd(t,n){return kr(t,Ho(n,2))}function hd(t){return t&&t.length?Ii(t,$l,is):r}function fd(t,n){return t&&t.length?Ii(t,Ho(n,2),is):r}var ld=_o((function(t,n){return t*n}),1),dd=No("round"),vd=_o((function(t,n){return t-n}),0);function pd(t){return t&&t.length?Gr(t,$l):0}function wd(t,n){return t&&t.length?Gr(t,Ho(n,2)):0}return Oe.after=Pc,Oe.ary=xc,Oe.assign=tf,Oe.assignIn=nf,Oe.assignInWith=rf,Oe.assignWith=ef,Oe.at=sf,Oe.before=$c,Oe.bind=Tc,Oe.bindAll=Sl,Oe.bindKey=Mc,Oe.castArray=Yc,Oe.chain=zu,Oe.chunk=Ra,Oe.compact=Ua,Oe.concat=Da,Oe.cond=Il,Oe.conforms=jl,Oe.constant=Al,Oe.countBy=rc,Oe.create=of,Oe.curry=Cc,Oe.curryRight=Rc,Oe.debounce=Uc,Oe.defaults=af,Oe.defaultsDeep=uf,Oe.defer=Dc,Oe.delay=kc,Oe.difference=ka,Oe.differenceBy=La,Oe.differenceWith=qa,Oe.drop=Va,Oe.dropRight=Fa,Oe.dropRightWhile=Ga,Oe.dropWhile=Ha,Oe.fill=za,Oe.filter=ic,Oe.flatMap=ac,Oe.flatMapDeep=uc,Oe.flatMapDepth=cc,Oe.flatten=Ka,Oe.flattenDeep=Ja,Oe.flattenDepth=Za,Oe.flip=Lc,Oe.flow=Pl,Oe.flowRight=xl,Oe.fromPairs=Qa,Oe.functions=pf,Oe.functionsIn=wf,Oe.groupBy=lc,Oe.initial=tu,Oe.intersection=nu,Oe.intersectionBy=ru,Oe.intersectionWith=eu,Oe.invert=gf,Oe.invertBy=_f,Oe.invokeMap=vc,Oe.iteratee=Tl,Oe.keyBy=pc,Oe.keys=Of,Oe.keysIn=Sf,Oe.map=wc,Oe.mapKeys=If,Oe.mapValues=jf,Oe.matches=Ml,Oe.matchesProperty=Cl,Oe.memoize=qc,Oe.merge=Af,Oe.mergeWith=Nf,Oe.method=Rl,Oe.methodOf=Ul,Oe.mixin=Dl,Oe.negate=Vc,Oe.nthArg=ql,Oe.omit=Pf,Oe.omitBy=xf,Oe.once=Fc,Oe.orderBy=yc,Oe.over=Vl,Oe.overArgs=Gc,Oe.overEvery=Fl,Oe.overSome=Gl,Oe.partial=Hc,Oe.partialRight=zc,Oe.partition=bc,Oe.pick=$f,Oe.pickBy=Tf,Oe.property=Hl,Oe.propertyOf=zl,Oe.pull=uu,Oe.pullAll=cu,Oe.pullAllBy=hu,Oe.pullAllWith=fu,Oe.pullAt=lu,Oe.range=Wl,Oe.rangeRight=Bl,Oe.rearg=Wc,Oe.reject=_c,Oe.remove=du,Oe.rest=Bc,Oe.reverse=vu,Oe.sampleSize=Oc,Oe.set=Cf,Oe.setWith=Rf,Oe.shuffle=Sc,Oe.slice=pu,Oe.sortBy=Ac,Oe.sortedUniq=Eu,Oe.sortedUniqBy=Ou,Oe.split=cl,Oe.spread=Kc,Oe.tail=Su,Oe.take=Iu,Oe.takeRight=ju,Oe.takeRightWhile=Au,Oe.takeWhile=Nu,Oe.tap=Wu,Oe.throttle=Jc,Oe.thru=Bu,Oe.toArray=Wh,Oe.toPairs=Uf,Oe.toPairsIn=Df,Oe.toPath=td,Oe.toPlainObject=Qh,Oe.transform=kf,Oe.unary=Zc,Oe.union=Pu,Oe.unionBy=xu,Oe.unionWith=$u,Oe.uniq=Tu,Oe.uniqBy=Mu,Oe.uniqWith=Cu,Oe.unset=Lf,Oe.unzip=Ru,Oe.unzipWith=Uu,Oe.update=qf,Oe.updateWith=Vf,Oe.values=Ff,Oe.valuesIn=Gf,Oe.without=Du,Oe.words=El,Oe.wrap=Qc,Oe.xor=ku,Oe.xorBy=Lu,Oe.xorWith=qu,Oe.zip=Vu,Oe.zipObject=Fu,Oe.zipObjectDeep=Gu,Oe.zipWith=Hu,Oe.entries=Uf,Oe.entriesIn=Df,Oe.extend=nf,Oe.extendWith=rf,Dl(Oe,Oe),Oe.add=rd,Oe.attempt=Ol,Oe.camelCase=Bf,Oe.capitalize=Kf,Oe.ceil=ed,Oe.clamp=Hf,Oe.clone=Xc,Oe.cloneDeep=nh,Oe.cloneDeepWith=rh,Oe.cloneWith=th,Oe.conformsTo=eh,Oe.deburr=Jf,Oe.defaultTo=Nl,Oe.divide=id,Oe.endsWith=Zf,Oe.eq=ih,Oe.escape=Qf,Oe.escapeRegExp=Yf,Oe.every=ec,Oe.find=sc,Oe.findIndex=Wa,Oe.findKey=cf,Oe.findLast=oc,Oe.findLastIndex=Ba,Oe.findLastKey=hf,Oe.floor=sd,Oe.forEach=hc,Oe.forEachRight=fc,Oe.forIn=ff,Oe.forInRight=lf,Oe.forOwn=df,Oe.forOwnRight=vf,Oe.get=yf,Oe.gt=sh,Oe.gte=oh,Oe.has=bf,Oe.hasIn=mf,Oe.head=Ya,Oe.identity=$l,Oe.includes=dc,Oe.indexOf=Xa,Oe.inRange=zf,Oe.invoke=Ef,Oe.isArguments=ah,Oe.isArray=uh,Oe.isArrayBuffer=ch,Oe.isArrayLike=hh,Oe.isArrayLikeObject=fh,Oe.isBoolean=lh,Oe.isBuffer=dh,Oe.isDate=vh,Oe.isElement=ph,Oe.isEmpty=wh,Oe.isEqual=yh,Oe.isEqualWith=bh,Oe.isError=mh,Oe.isFinite=gh,Oe.isFunction=_h,Oe.isInteger=Eh,Oe.isLength=Oh,Oe.isMap=jh,Oe.isMatch=Ah,Oe.isMatchWith=Nh,Oe.isNaN=Ph,Oe.isNative=xh,Oe.isNil=Th,Oe.isNull=$h,Oe.isNumber=Mh,Oe.isObject=Sh,Oe.isObjectLike=Ih,Oe.isPlainObject=Ch,Oe.isRegExp=Rh,Oe.isSafeInteger=Uh,Oe.isSet=Dh,Oe.isString=kh,Oe.isSymbol=Lh,Oe.isTypedArray=qh,Oe.isUndefined=Vh,Oe.isWeakMap=Fh,Oe.isWeakSet=Gh,Oe.join=iu,Oe.kebabCase=Xf,Oe.last=su,Oe.lastIndexOf=ou,Oe.lowerCase=tl,Oe.lowerFirst=nl,Oe.lt=Hh,Oe.lte=zh,Oe.max=od,Oe.maxBy=ad,Oe.mean=ud,Oe.meanBy=cd,Oe.min=hd,Oe.minBy=fd,Oe.stubArray=Kl,Oe.stubFalse=Jl,Oe.stubObject=Zl,Oe.stubString=Ql,Oe.stubTrue=Yl,Oe.multiply=ld,Oe.nth=au,Oe.noConflict=kl,Oe.noop=Ll,Oe.now=Nc,Oe.pad=rl,Oe.padEnd=el,Oe.padStart=il,Oe.parseInt=sl,Oe.random=Wf,Oe.reduce=mc,Oe.reduceRight=gc,Oe.repeat=ol,Oe.replace=al,Oe.result=Mf,Oe.round=dd,Oe.runInContext=t,Oe.sample=Ec,Oe.size=Ic,Oe.snakeCase=ul,Oe.some=jc,Oe.sortedIndex=wu,Oe.sortedIndexBy=yu,Oe.sortedIndexOf=bu,Oe.sortedLastIndex=mu,Oe.sortedLastIndexBy=gu,Oe.sortedLastIndexOf=_u,Oe.startCase=hl,Oe.startsWith=fl,Oe.subtract=vd,Oe.sum=pd,Oe.sumBy=wd,Oe.template=ll,Oe.times=Xl,Oe.toFinite=Bh,Oe.toInteger=Kh,Oe.toLength=Jh,Oe.toLower=dl,Oe.toNumber=Zh,Oe.toSafeInteger=Yh,Oe.toString=Xh,Oe.toUpper=vl,Oe.trim=pl,Oe.trimEnd=wl,Oe.trimStart=yl,Oe.truncate=bl,Oe.unescape=ml,Oe.uniqueId=nd,Oe.upperCase=gl,Oe.upperFirst=_l,Oe.each=hc,Oe.eachRight=fc,Oe.first=Ya,Dl(Oe,function(){var t={};return $i(Oe,(function(n,r){ln.call(Oe.prototype,r)||(t[r]=n)})),t}(),{chain:!1}),Oe.VERSION=e,mr(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){Oe[t].placeholder=Oe})),mr(["drop","take"],(function(t,n){Ae.prototype[t]=function(e){e=e===r?1:Gn(Kh(e),0);var i=this.__filtered__&&!n?new Ae(this):this.clone();return i.__filtered__?i.__takeCount__=Hn(e,i.__takeCount__):i.__views__.push({size:Hn(e,D),type:t+(i.__dir__<0?"Right":"")}),i},Ae.prototype[t+"Right"]=function(n){return this.reverse()[t](n).reverse()}})),mr(["filter","map","takeWhile"],(function(t,n){var r=n+1,e=r==x||r==T;Ae.prototype[t]=function(t){var n=this.clone();return n.__iteratees__.push({iteratee:Ho(t,3),type:r}),n.__filtered__=n.__filtered__||e,n}})),mr(["head","last"],(function(t,n){var r="take"+(n?"Right":"");Ae.prototype[t]=function(){return this[r](1).value()[0]}})),mr(["initial","tail"],(function(t,n){var r="drop"+(n?"":"Right");Ae.prototype[t]=function(){return this.__filtered__?new Ae(this):this[r](1)}})),Ae.prototype.compact=function(){return this.filter($l)},Ae.prototype.find=function(t){return this.filter(t).head()},Ae.prototype.findLast=function(t){return this.reverse().find(t)},Ae.prototype.invokeMap=gs((function(t,n){return typeof t=="function"?new Ae(this):this.map((function(r){return Gi(r,t,n)}))})),Ae.prototype.reject=function(t){return this.filter(Vc(Ho(t)))},Ae.prototype.slice=function(t,n){t=Kh(t);var e=this;return e.__filtered__&&(t>0||n<0)?new Ae(e):(t<0?e=e.takeRight(-t):t&&(e=e.drop(t)),n!==r&&(n=Kh(n),e=n<0?e.dropRight(-n):e.take(n-t)),e)},Ae.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Ae.prototype.toArray=function(){return this.take(D)},$i(Ae.prototype,(function(t,n){var e=/^(?:filter|find|map|reject)|While$/.test(n),i=/^(?:head|last)$/.test(n),s=Oe[i?"take"+(n=="last"?"Right":""):n],o=i||/^find/.test(n);s&&(Oe.prototype[n]=function(){var n=this.__wrapped__,a=i?[1]:arguments,u=n instanceof Ae,c=a[0],h=u||uh(n),f=function(t){var n=s.apply(Oe,jr([t],a));return i&&l?n[0]:n};h&&e&&typeof c=="function"&&c.length!=1&&(u=h=!1);var l=this.__chain__,d=!!this.__actions__.length,v=o&&!l,p=u&&!d;if(!o&&h){n=p?n:new Ae(this);var w=t.apply(n,a);return w.__actions__.push({func:Bu,args:[f],thisArg:r}),new je(w,l)}return v&&p?t.apply(this,a):(w=this.thru(f),v?i?w.value()[0]:w.value():w)})})),mr(["pop","push","shift","sort","splice","unshift"],(function(t){var n=an[t],r=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",e=/^(?:pop|shift)$/.test(t);Oe.prototype[t]=function(){var t=arguments;if(e&&!this.__chain__){var i=this.value();return n.apply(uh(i)?i:[],t)}return this[r]((function(r){return n.apply(uh(r)?r:[],t)}))}})),$i(Ae.prototype,(function(t,n){var r=Oe[n];if(r){var e=r.name+"";ln.call(hr,e)||(hr[e]=[]),hr[e].push({name:n,func:r})}})),hr[mo(r,y).name]=[{name:"wrapper",func:r}],Ae.prototype.clone=Ne,Ae.prototype.reverse=Pe,Ae.prototype.value=xe,Oe.prototype.at=Ku,Oe.prototype.chain=Ju,Oe.prototype.commit=Zu,Oe.prototype.next=Qu,Oe.prototype.plant=Xu,Oe.prototype.reverse=tc,Oe.prototype.toJSON=Oe.prototype.valueOf=Oe.prototype.value=nc,Oe.prototype.first=Oe.prototype.head,Nn&&(Oe.prototype[Nn]=Yu),Oe},_e=ge();ar?((ar.exports=_e)._=_e,or._=_e):sr._=_e}).call(Rm)})(Um,Um.exports);var Dm=Object.defineProperty,km=Object.defineProperties,Lm=Object.getOwnPropertyDescriptors,qm=Object.getOwnPropertySymbols,Vm=Object.prototype.hasOwnProperty,Fm=Object.prototype.propertyIsEnumerable,Gm=(t,n,r)=>n in t?Dm(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,Hm=(t,n)=>{for(var r in n||(n={}))Vm.call(n,r)&&Gm(t,r,n[r]);if(qm)for(var r of qm(n))Fm.call(n,r)&&Gm(t,r,n[r]);return t},zm=(t,n)=>km(t,Lm(n));function Wm(t,n,r){var e;const i=Ro(t);return((e=n.rpcMap)==null?void 0:e[i.reference])||`${Mm}?chainId=${i.namespace}:${i.reference}&projectId=${r}`}function Bm(t){return t.includes(":")?t.split(":")[1]:t}function Km(t){return t.map((t=>`${t.split(":")[0]}:${t.split(":")[1]}`))}function Jm(t,n){const r=Object.keys(n.namespaces).filter((n=>n.includes(t)));if(!r.length)return[];const e=[];return r.forEach((t=>{const r=n.namespaces[t].accounts;e.push(...r)})),e}function Zm(t={},n={}){const r=Qm(t),e=Qm(n);return Um.exports.merge(r,e)}function Qm(t){var n,r,e,i;const s={};if(!du(t))return s;for(const[o,a]of Object.entries(t)){const t=ou(o)?[o]:a.chains,u=a.methods||[],c=a.events||[],h=a.rpcMap||{},f=au(o);s[f]=zm(Hm(Hm({},s[f]),a),{chains:La(t,(n=s[f])==null?void 0:n.chains),methods:La(u,(r=s[f])==null?void 0:r.methods),events:La(c,(e=s[f])==null?void 0:e.events),rpcMap:Hm(Hm({},h),(i=s[f])==null?void 0:i.rpcMap)})}return s}function Ym(t){return t.includes(":")?t.split(":")[2]:t}function Xm(t){const n={};for(const[r,e]of Object.entries(t)){const t=e.methods||[],i=e.events||[],s=e.accounts||[],o=ou(r)?[r]:e.chains?e.chains:Km(e.accounts);n[r]={chains:o,methods:t,events:i,accounts:s}}return n}function tg(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):t.includes(":")?Number(t.split(":")[1]):Number(t)}const ng={},rg=t=>ng[t],eg=(t,n)=>{ng[t]=n};class ig{constructor(t){this.name="polkadot",this.namespace=t.namespace,this.events=rg("events"),this.client=rg("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,n){this.httpProviders[t]||this.setHttpProvider(t,n),this.chainId=t,this.events.emit(Cm.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}getAccounts(){const t=this.namespace.accounts;return t?t.filter((t=>t.split(":")[1]===this.chainId.toString())).map((t=>t.split(":")[2]))||[]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach((n=>{var r;const e=Bm(n);t[e]=this.createHttpProvider(e,(r=this.namespace.rpcMap)==null?void 0:r[n])})),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,n=this.httpProviders[t];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return n}setHttpProvider(t,n){const r=this.createHttpProvider(t,n);r&&(this.httpProviders[t]=r)}createHttpProvider(t,n){const r=n||Wm(t,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${t}`);return new ep(new Am(r,rg("disableProviderPing")))}}class sg{constructor(t){this.name="eip155",this.namespace=t.namespace,this.events=rg("events"),this.client=rg("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(t){switch(t.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(t);case"eth_chainId":return parseInt(this.getDefaultChain())}return this.namespace.methods.includes(t.request.method)?await this.client.request(t):this.getHttpProvider().request(t.request)}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}setDefaultChain(t,n){this.httpProviders[t]||this.setHttpProvider(parseInt(t),n),this.chainId=parseInt(t),this.events.emit(Cm.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}createHttpProvider(t,n){const r=n||Wm(`${this.name}:${t}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${t}`);return new ep(new Am(r,rg("disableProviderPing")))}setHttpProvider(t,n){const r=this.createHttpProvider(t,n);r&&(this.httpProviders[t]=r)}createHttpProviders(){const t={};return this.namespace.chains.forEach((n=>{var r;const e=parseInt(Bm(n));t[e]=this.createHttpProvider(e,(r=this.namespace.rpcMap)==null?void 0:r[n])})),t}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter((t=>t.split(":")[1]===this.chainId.toString())).map((t=>t.split(":")[2])))]:[]}getHttpProvider(){const t=this.chainId,n=this.httpProviders[t];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return n}async handleSwitchChain(t){var n,r;let e=t.request.params?(n=t.request.params[0])==null?void 0:n.chainId:"0x0";e=e.startsWith("0x")?e:`0x${e}`;const i=parseInt(e,16);if(this.isChainApproved(i))this.setDefaultChain(`${i}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:t.topic,request:{method:t.request.method,params:[{chainId:e}]},chainId:(r=this.namespace.chains)==null?void 0:r[0]}),this.setDefaultChain(`${i}`);else throw new Error(`Failed to switch to chain 'eip155:${i}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(t){return this.namespace.chains.includes(`${this.name}:${t}`)}}class og{constructor(t){this.name="solana",this.namespace=t.namespace,this.events=rg("events"),this.client=rg("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,n){this.httpProviders[t]||this.setHttpProvider(t,n),this.chainId=t,this.events.emit(Cm.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter((t=>t.split(":")[1]===this.chainId.toString())).map((t=>t.split(":")[2])))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach((n=>{var r;const e=Bm(n);t[e]=this.createHttpProvider(e,(r=this.namespace.rpcMap)==null?void 0:r[n])})),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,n=this.httpProviders[t];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return n}setHttpProvider(t,n){const r=this.createHttpProvider(t,n);r&&(this.httpProviders[t]=r)}createHttpProvider(t,n){const r=n||Wm(t,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${t}`);return new ep(new Am(r,rg("disableProviderPing")))}}class ag{constructor(t){this.name="cosmos",this.namespace=t.namespace,this.events=rg("events"),this.client=rg("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,n){this.httpProviders[t]||this.setHttpProvider(t,n),this.chainId=t,this.events.emit(Cm.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter((t=>t.split(":")[1]===this.chainId.toString())).map((t=>t.split(":")[2])))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach((n=>{var r;const e=Bm(n);t[e]=this.createHttpProvider(e,(r=this.namespace.rpcMap)==null?void 0:r[n])})),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,n=this.httpProviders[t];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return n}setHttpProvider(t,n){const r=this.createHttpProvider(t,n);r&&(this.httpProviders[t]=r)}createHttpProvider(t,n){const r=n||Wm(t,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${t}`);return new ep(new Am(r,rg("disableProviderPing")))}}class ug{constructor(t){this.name="cip34",this.namespace=t.namespace,this.events=rg("events"),this.client=rg("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,n){this.httpProviders[t]||this.setHttpProvider(t,n),this.chainId=t,this.events.emit(Cm.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter((t=>t.split(":")[1]===this.chainId.toString())).map((t=>t.split(":")[2])))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach((n=>{const r=this.getCardanoRPCUrl(n),e=Bm(n);t[e]=this.createHttpProvider(e,r)})),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,n=this.httpProviders[t];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return n}getCardanoRPCUrl(t){const n=this.namespace.rpcMap;if(n)return n[t]}setHttpProvider(t,n){const r=this.createHttpProvider(t,n);r&&(this.httpProviders[t]=r)}createHttpProvider(t,n){const r=n||this.getCardanoRPCUrl(t);if(!r)throw new Error(`No RPC url provided for chainId: ${t}`);return new ep(new Am(r,rg("disableProviderPing")))}}class cg{constructor(t){this.name="elrond",this.namespace=t.namespace,this.events=rg("events"),this.client=rg("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,n){this.httpProviders[t]||this.setHttpProvider(t,n),this.chainId=t,this.events.emit(Cm.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter((t=>t.split(":")[1]===this.chainId.toString())).map((t=>t.split(":")[2])))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach((n=>{var r;const e=Bm(n);t[e]=this.createHttpProvider(e,(r=this.namespace.rpcMap)==null?void 0:r[n])})),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,n=this.httpProviders[t];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return n}setHttpProvider(t,n){const r=this.createHttpProvider(t,n);r&&(this.httpProviders[t]=r)}createHttpProvider(t,n){const r=n||Wm(t,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${t}`);return new ep(new Am(r,rg("disableProviderPing")))}}class hg{constructor(t){this.name="multiversx",this.namespace=t.namespace,this.events=rg("events"),this.client=rg("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,n){this.httpProviders[t]||this.setHttpProvider(t,n),this.chainId=t,this.events.emit(Cm.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter((t=>t.split(":")[1]===this.chainId.toString())).map((t=>t.split(":")[2])))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach((n=>{var r;const e=Bm(n);t[e]=this.createHttpProvider(e,(r=this.namespace.rpcMap)==null?void 0:r[n])})),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,n=this.httpProviders[t];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return n}setHttpProvider(t,n){const r=this.createHttpProvider(t,n);r&&(this.httpProviders[t]=r)}createHttpProvider(t,n){const r=n||Wm(t,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${t}`);return new ep(new Am(r,rg("disableProviderPing")))}}class fg{constructor(t){this.name="near",this.namespace=t.namespace,this.events=rg("events"),this.client=rg("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,n){if(this.chainId=t,!this.httpProviders[t]){const r=n||Wm(`${this.name}:${t}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,r)}this.events.emit(Cm.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const t=this.namespace.accounts;return t?t.filter((t=>t.split(":")[1]===this.chainId.toString())).map((t=>t.split(":")[2]))||[]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach((n=>{var r;t[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])})),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,n=this.httpProviders[t];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return n}setHttpProvider(t,n){const r=this.createHttpProvider(t,n);r&&(this.httpProviders[t]=r)}createHttpProvider(t,n){const r=n||Wm(t,this.namespace);return typeof r>"u"?void 0:new ep(new Am(r,rg("disableProviderPing")))}}var lg=Object.defineProperty,dg=Object.defineProperties,vg=Object.getOwnPropertyDescriptors,pg=Object.getOwnPropertySymbols,wg=Object.prototype.hasOwnProperty,yg=Object.prototype.propertyIsEnumerable,bg=(t,n,r)=>n in t?lg(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,mg=(t,n)=>{for(var r in n||(n={}))wg.call(n,r)&&bg(t,r,n[r]);if(pg)for(var r of pg(n))yg.call(n,r)&&bg(t,r,n[r]);return t},gg=(t,n)=>dg(t,vg(n));class _g{constructor(t){this.events=new n,this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=t,this.logger=typeof t?.logger<"u"&&typeof t?.logger!="string"?t.logger:Dh.pino(Dh.getDefaultLoggerOptions({level:t?.logger||Nm})),this.disableProviderPing=t?.disableProviderPing||!1}static async init(t){const n=new _g(t);return await n.initialize(),n}async request(t,n){const[r,e]=this.validateChain(n);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(r).request({request:mg({},t),chainId:`${r}:${e}`,topic:this.session.topic})}sendAsync(t,n,r){this.request(t,r).then((t=>n(null,t))).catch((t=>n(t,void 0)))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var t;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(t=this.session)==null?void 0:t.topic,reason:fu("USER_DISCONNECTED")}),await this.cleanup()}async connect(t){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(t),await this.cleanupPendingPairings(),!t.skipPairing)return await this.pair(t.pairingTopic)}on(t,n){this.events.on(t,n)}once(t,n){this.events.once(t,n)}removeListener(t,n){this.events.removeListener(t,n)}off(t,n){this.events.off(t,n)}get isWalletConnect(){return!0}async pair(t){this.shouldAbortPairingAttempt=!1;let n=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(n>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:r,approval:e}=await this.client.connect({pairingTopic:t,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});r&&(this.uri=r,this.events.emit("display_uri",r)),await e().then((t=>{this.session=t,this.namespaces||(this.namespaces=Xm(t.namespaces),this.persist("namespaces",this.namespaces))})).catch((t=>{if(t.message!==Kb)throw t;n++}))}while(!this.session);return this.onConnect(),this.session}setDefaultChain(t,n){try{if(!this.session)return;const[r,e]=this.validateChain(t);this.getProvider(r).setDefaultChain(e,n)}catch(t){if(!/Please call connect/.test(t.message))throw t}}async cleanupPendingPairings(t={}){this.logger.info("Cleaning up inactive pairings...");const n=this.client.pairing.getAll();if(lu(n)){for(const r of n)t.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${n.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces"),this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const t=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[t]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await wm.init({logger:this.providerOpts.logger||Nm,relayUrl:this.providerOpts.relayUrl||Pm,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const t=[...new Set(Object.keys(this.session.namespaces).map((t=>au(t))))];eg("client",this.client),eg("events",this.events),eg("disableProviderPing",this.disableProviderPing),t.forEach((t=>{if(!this.session)return;const n=Jm(t,this.session),r=Km(n),e=Zm(this.namespaces,this.optionalNamespaces),i=gg(mg({},e[t]),{accounts:n,chains:r});switch(t){case"eip155":this.rpcProviders[t]=new sg({namespace:i});break;case"solana":this.rpcProviders[t]=new og({namespace:i});break;case"cosmos":this.rpcProviders[t]=new ag({namespace:i});break;case"polkadot":this.rpcProviders[t]=new ig({namespace:i});break;case"cip34":this.rpcProviders[t]=new ug({namespace:i});break;case"elrond":this.rpcProviders[t]=new cg({namespace:i});break;case"multiversx":this.rpcProviders[t]=new hg({namespace:i});break;case"near":this.rpcProviders[t]=new fg({namespace:i});break}}))}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",(t=>{this.events.emit("session_ping",t)})),this.client.on("session_event",(t=>{const{params:n}=t,{event:r}=n;if(r.name==="accountsChanged"){const t=r.data;t&&lu(t)&&this.events.emit("accountsChanged",t.map(Ym))}else if(r.name==="chainChanged"){const t=n.chainId,r=n.event.data,e=au(t),i=tg(t)!==tg(r)?`${e}:${tg(r)}`:t;this.onChainChanged(i)}else this.events.emit(r.name,r.data);this.events.emit("session_event",t)})),this.client.on("session_update",(({topic:t,params:n})=>{var r;const{namespaces:e}=n,i=(r=this.client)==null?void 0:r.session.get(t);this.session=gg(mg({},i),{namespaces:e}),this.onSessionUpdate(),this.events.emit("session_update",{topic:t,params:n})})),this.client.on("session_delete",(async t=>{await this.cleanup(),this.events.emit("session_delete",t),this.events.emit("disconnect",gg(mg({},fu("USER_DISCONNECTED")),{data:t.topic}))})),this.on(Cm.DEFAULT_CHAIN_CHANGED,(t=>{this.onChainChanged(t,!0)}))}getProvider(t){if(!this.rpcProviders[t])throw new Error(`Provider not found: ${t}`);return this.rpcProviders[t]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach((t=>{var n;this.getProvider(t).updateNamespace((n=this.session)==null?void 0:n.namespaces[t])}))}setNamespaces(t){const{namespaces:n,optionalNamespaces:r,sessionProperties:e}=t;n&&Object.keys(n).length&&(this.namespaces=n),r&&Object.keys(r).length&&(this.optionalNamespaces=r),this.sessionProperties=e,this.persist("namespaces",n),this.persist("optionalNamespaces",r)}validateChain(t){const[n,r]=t?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[n,r];if(n&&!Object.keys(this.namespaces||{}).map((t=>au(t))).includes(n))throw new Error(`Namespace '${n}' is not configured. Please call connect() first with namespace config.`);if(n&&r)return[n,r];const e=au(Object.keys(this.namespaces)[0]),i=this.rpcProviders[e].getDefaultChain();return[e,i]}async requestAccounts(){const[t]=this.validateChain();return await this.getProvider(t).requestAccounts()}onChainChanged(t,n=!1){var r;if(!this.namespaces)return;const[e,i]=this.validateChain(t);n||this.getProvider(e).setDefaultChain(i),((r=this.namespaces[e])!=null?r:this.namespaces[`${e}:${i}`]).defaultChain=i,this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",i)}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,this.persist("namespaces",void 0),this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),await this.cleanupPendingPairings({deletePairings:!0})}persist(t,n){this.client.core.storage.setItem(`${Tm}/${t}`,n)}async getFromStore(t){return await this.client.core.storage.getItem(`${Tm}/${t}`)}}const Eg=_g;const Og="wc",Sg="ethereum_provider",Ig=`${Og}@2:${Sg}:`,jg="https://rpc.walletconnect.com/v1/",Ag=["eth_sendTransaction","personal_sign"],Ng=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],Pg=["chainChanged","accountsChanged"],xg=["chainChanged","accountsChanged","message","disconnect","connect"];var $g=Object.defineProperty,Tg=Object.defineProperties,Mg=Object.getOwnPropertyDescriptors,Cg=Object.getOwnPropertySymbols,Rg=Object.prototype.hasOwnProperty,Ug=Object.prototype.propertyIsEnumerable,Dg=(t,n,r)=>n in t?$g(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,kg=(t,n)=>{for(var r in n||(n={}))Rg.call(n,r)&&Dg(t,r,n[r]);if(Cg)for(var r of Cg(n))Ug.call(n,r)&&Dg(t,r,n[r]);return t},Lg=(t,n)=>Tg(t,Mg(n));function qg(t){return Number(t[0].split(":")[1])}function Vg(t){return`0x${t.toString(16)}`}function Fg(t){const{chains:n,optionalChains:r,methods:e,optionalMethods:i,events:s,optionalEvents:o,rpcMap:a}=t;if(!lu(n))throw new Error("Invalid chains");const u={chains:n,methods:e||Ag,events:s||Pg,rpcMap:kg({},n.length?{[qg(n)]:a[qg(n)]}:{})},c=s?.filter((t=>!Pg.includes(t))),h=e?.filter((t=>!Ag.includes(t)));if(!r&&!o&&!i&&!(c!=null&&c.length)&&!(h!=null&&h.length))return{required:n.length?u:void 0};const f=c?.length&&h?.length||!r,l={chains:[...new Set(f?u.chains.concat(r||[]):r)],methods:[...new Set(u.methods.concat(i!=null&&i.length?i:Ng))],events:[...new Set(u.events.concat(o!=null&&o.length?o:xg))],rpcMap:a};return{required:n.length?u:void 0,optional:r.length?l:void 0}}class Gg{constructor(){this.events=new t.exports.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY=Ig,this.on=(t,n)=>(this.events.on(t,n),this),this.once=(t,n)=>(this.events.once(t,n),this),this.removeListener=(t,n)=>(this.events.removeListener(t,n),this),this.off=(t,n)=>(this.events.off(t,n),this),this.parseAccount=t=>this.isCompatibleChainId(t)?this.parseAccountId(t).address:t,this.signer={},this.rpc={}}static async init(t){const n=new Gg;return await n.initialize(t),n}async request(t){return await this.signer.request(t,this.formatChainId(this.chainId))}sendAsync(t,n){this.signer.sendAsync(t,n,this.formatChainId(this.chainId))}get connected(){return this.signer.client?this.signer.client.core.relayer.connected:!1}get connecting(){return this.signer.client?this.signer.client.core.relayer.connecting:!1}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(t){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(t);const{required:n,optional:r}=Fg(this.rpc);try{const e=await new Promise((async(e,i)=>{var s;this.rpc.showQrModal&&((s=this.modal)==null||s.subscribeModal((t=>{!t.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),i(new Error("Connection request reset. Please try again.")))}))),await this.signer.connect(Lg(kg({namespaces:kg({},n&&{[this.namespace]:n})},r&&{optionalNamespaces:{[this.namespace]:r}}),{pairingTopic:t?.pairingTopic})).then((t=>{e(t)})).catch((t=>{i(new Error(t.message))}))}));if(!e)return;const i=Uo(e.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:i),this.setAccounts(i),this.events.emit("connect",{chainId:Vg(this.chainId)})}catch(t){throw this.signer.logger.error(t),t}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",(t=>{const{params:n}=t,{event:r}=n;r.name==="accountsChanged"?(this.accounts=this.parseAccounts(r.data),this.events.emit("accountsChanged",this.accounts)):r.name==="chainChanged"?this.setChainId(this.formatChainId(r.data)):this.events.emit(r.name,r.data),this.events.emit("session_event",t)})),this.signer.on("chainChanged",(t=>{const n=parseInt(t);this.chainId=n,this.events.emit("chainChanged",Vg(this.chainId)),this.persist()})),this.signer.on("session_update",(t=>{this.events.emit("session_update",t)})),this.signer.on("session_delete",(t=>{this.reset(),this.events.emit("session_delete",t),this.events.emit("disconnect",Lg(kg({},fu("USER_DISCONNECTED")),{data:t.topic,name:"USER_DISCONNECTED"}))})),this.signer.on("display_uri",(t=>{var n,r;this.rpc.showQrModal&&((n=this.modal)==null||n.closeModal(),(r=this.modal)==null||r.openModal({uri:t})),this.events.emit("display_uri",t)}))}switchEthereumChain(t){this.request({method:"wallet_switchEthereumChain",params:[{chainId:t.toString(16)}]})}isCompatibleChainId(t){return typeof t=="string"?t.startsWith(`${this.namespace}:`):!1}formatChainId(t){return`${this.namespace}:${t}`}parseChainId(t){return Number(t.split(":")[1])}setChainIds(t){const n=t.filter((t=>this.isCompatibleChainId(t))).map((t=>this.parseChainId(t)));n.length&&(this.chainId=n[0],this.events.emit("chainChanged",Vg(this.chainId)),this.persist())}setChainId(t){if(this.isCompatibleChainId(t)){const n=this.parseChainId(t);this.chainId=n,this.switchEthereumChain(n)}}parseAccountId(t){const[n,r,e]=t.split(":");return{chainId:`${n}:${r}`,address:e}}setAccounts(t){this.accounts=t.filter((t=>this.parseChainId(this.parseAccountId(t).chainId)===this.chainId)).map((t=>this.parseAccountId(t).address)),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(t){var n,r;const e=(n=t?.chains)!=null?n:[],i=(r=t?.optionalChains)!=null?r:[],s=e.concat(i);if(!s.length)throw new Error("No chains specified in either `chains` or `optionalChains`");const o=e.length?t?.methods||Ag:[],a=e.length?t?.events||Pg:[],u=t?.optionalMethods||[],c=t?.optionalEvents||[],h=t?.rpcMap||this.buildRpcMap(s,t.projectId),f=t?.qrModalOptions||void 0;return{chains:e?.map((t=>this.formatChainId(t))),optionalChains:i.map((t=>this.formatChainId(t))),methods:o,events:a,optionalMethods:u,optionalEvents:c,rpcMap:h,showQrModal:!!(t!=null&&t.showQrModal),qrModalOptions:f,projectId:t.projectId,metadata:t.metadata}}buildRpcMap(t,n){const r={};return t.forEach((t=>{r[t]=this.getRpcUrl(t,n)})),r}async initialize(t){if(this.rpc=this.getRpcConfig(t),this.chainId=this.rpc.chains.length?qg(this.rpc.chains):qg(this.rpc.optionalChains),this.signer=await Eg.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:t.disableProviderPing,relayUrl:t.relayUrl,storageOptions:t.storageOptions}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let t;try{const{WalletConnectModal:n}=await import("@walletconnect/modal");t=n}catch{throw new Error("To use QR modal, please install @walletconnect/modal package")}if(t)try{this.modal=new t(kg({walletConnectVersion:2,projectId:this.rpc.projectId,standaloneChains:this.rpc.chains},this.rpc.qrModalOptions))}catch(t){throw this.signer.logger.error(t),new Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(t){if(!t)return;const{chains:n,optionalChains:r,rpcMap:e}=t;n&&lu(n)&&(this.rpc.chains=n.map((t=>this.formatChainId(t))),n.forEach((t=>{this.rpc.rpcMap[t]=e?.[t]||this.getRpcUrl(t)}))),r&&lu(r)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=r?.map((t=>this.formatChainId(t))),r.forEach((t=>{this.rpc.rpcMap[t]=e?.[t]||this.getRpcUrl(t)})))}getRpcUrl(t,n){var r;return((r=this.rpc.rpcMap)==null?void 0:r[t])||`${jg}?chainId=eip155:${t}&projectId=${n||this.rpc.projectId}`}async loadPersistedSession(){if(!this.session)return;const t=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),n=this.session.namespaces[`${this.namespace}:${t}`]?this.session.namespaces[`${this.namespace}:${t}`]:this.session.namespaces[this.namespace];this.setChainIds(t?[this.formatChainId(t)]:n?.accounts),this.setAccounts(n?.accounts)}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(t){return typeof t=="string"||t instanceof String?[this.parseAccount(t)]:t.map((t=>this.parseAccount(t)))}}const Hg={1:"https://ethereum.publicnode.com",5:"https://eth-goerli.g.alchemy.com/v2/yVhq9zPJorAWsw-F87fEabSUl7cCU6z4",11155111:"https://sepolia.infura.io/v3/9f79b2f9274344af90b8d4e244b580ef",137:"https://polygon-rpc.com/",80001:"https://polygon-mumbai.g.alchemy.com/v2/rVI6pOV4irVsrw20cJxc1fxK_1cSeiY0",56:"https://bsc-dataseed.binance.org/",97:"https://data-seed-prebsc-1-s1.binance.org:8545",43114:"https://api.avax.network/ext/bc/C/rpc",43113:"https://api.avax-test.network/ext/bc/C/rpc",250:"https://rpc.fantom.network/",25:"https://evm-cronos.crypto.org",338:"https://evm-t3.cronos.org",42161:"https://arb1.arbitrum.io/rpc",421613:"https://arb-goerli.g.alchemy.com/v2/nFrflomLgsQQL5NWjGileAVqIGGxZWce",10:"https://mainnet.optimism.io"};const zg=[1,5,11155111,137,80001,56,97,42161,10];const Wg=async()=>await Gg.init({projectId:"2ec7ead81da1226703ad789c0b2f7b30",methods:["eth_sendTransaction","eth_signTransaction","eth_sign","personal_sign","eth_signTypedData"],events:["chainChanged","accountsChanged"],showQrModal:false,optionalChains:zg});export{Hg as WC_DEFAULT_RPC_MAP,zg as WC_V2_DEFAULT_CHAINS,Wg as getWalletConnectV2ProviderInstance};
//# sourceMappingURL=p-2c750567.js.map