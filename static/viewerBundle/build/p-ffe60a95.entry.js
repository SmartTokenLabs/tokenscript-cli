import{r as t,h as e,g as n}from"./p-f0f1815c.js";import{L as i,B as r,d as s,h as o,c as a,a as l,b as u,g as c,e as f,M as h,O as d,N as g,Z as p,k as A,f as m,s as y,i as v,D as w,j as b,l as k,r as x,m as C,n as B,o as E,p as T,q as I,t as P,u as S,v as N,T as D}from"./p-25fcdbf8.js";import{C as F,a as O}from"./p-ea01a02d.js";import"./p-0a353f40.js";import"./p-4a1bebfd.js";const M="abi/5.7.0";const Q=new i(M);const U={};let L={calldata:true,memory:true,storage:true};let G={calldata:true,memory:true};function R(t,e){if(t==="bytes"||t==="string"){if(L[e]){return true}}else if(t==="address"){if(e==="payable"){return true}}else if(t.indexOf("[")>=0||t==="tuple"){if(G[e]){return true}}if(L[e]||e==="payable"){Q.throwArgumentError("invalid modifier","name",e)}return false}function J(t,e){let n=t;function i(e){Q.throwArgumentError(`unexpected character at position ${e}`,"param",t)}t=t.replace(/\s/g," ");function r(t){let n={type:"",name:"",parent:t,state:{allowType:true}};if(e){n.indexed=false}return n}let s={type:"",name:"",state:{allowType:true}};let o=s;for(let n=0;n<t.length;n++){let s=t[n];switch(s){case"(":if(o.state.allowType&&o.type===""){o.type="tuple"}else if(!o.state.allowParams){i(n)}o.state.allowType=false;o.type=nt(o.type);o.components=[r(o)];o=o.components[0];break;case")":delete o.state;if(o.name==="indexed"){if(!e){i(n)}o.indexed=true;o.name=""}if(R(o.type,o.name)){o.name=""}o.type=nt(o.type);let t=o;o=o.parent;if(!o){i(n)}delete t.parent;o.state.allowParams=false;o.state.allowName=true;o.state.allowArray=true;break;case",":delete o.state;if(o.name==="indexed"){if(!e){i(n)}o.indexed=true;o.name=""}if(R(o.type,o.name)){o.name=""}o.type=nt(o.type);let a=r(o.parent);o.parent.components.push(a);delete o.parent;o=a;break;case" ":if(o.state.allowType){if(o.type!==""){o.type=nt(o.type);delete o.state.allowType;o.state.allowName=true;o.state.allowParams=true}}if(o.state.allowName){if(o.name!==""){if(o.name==="indexed"){if(!e){i(n)}if(o.indexed){i(n)}o.indexed=true;o.name=""}else if(R(o.type,o.name)){o.name=""}else{o.state.allowName=false}}}break;case"[":if(!o.state.allowArray){i(n)}o.type+=s;o.state.allowArray=false;o.state.allowName=false;o.state.readArray=true;break;case"]":if(!o.state.readArray){i(n)}o.type+=s;o.state.readArray=false;o.state.allowArray=true;o.state.allowName=true;break;default:if(o.state.allowType){o.type+=s;o.state.allowParams=true;o.state.allowArray=true}else if(o.state.allowName){o.name+=s;delete o.state.allowArray}else if(o.state.readArray){o.type+=s}else{i(n)}}}if(o.parent){Q.throwArgumentError("unexpected eof","param",t)}delete s.state;if(o.name==="indexed"){if(!e){i(n.length-7)}if(o.indexed){i(n.length-7)}o.indexed=true;o.name=""}else if(R(o.type,o.name)){o.name=""}s.type=nt(s.type);return s}function H(t,e){for(let n in e){s(t,n,e[n])}}const Y=Object.freeze({sighash:"sighash",minimal:"minimal",full:"full",json:"json"});const q=new RegExp(/^(.*)\[([0-9]*)\]$/);class K{constructor(t,e){if(t!==U){Q.throwError("use fromString",i.errors.UNSUPPORTED_OPERATION,{operation:"new ParamType()"})}H(this,e);let n=this.type.match(q);if(n){H(this,{arrayLength:parseInt(n[2]||"-1"),arrayChildren:K.fromObject({type:n[1],components:this.components}),baseType:"array"})}else{H(this,{arrayLength:null,arrayChildren:null,baseType:this.components!=null?"tuple":this.type})}this._isParamType=true;Object.freeze(this)}format(t){if(!t){t=Y.sighash}if(!Y[t]){Q.throwArgumentError("invalid format type","format",t)}if(t===Y.json){let e={type:this.baseType==="tuple"?"tuple":this.type,name:this.name||undefined};if(typeof this.indexed==="boolean"){e.indexed=this.indexed}if(this.components){e.components=this.components.map((e=>JSON.parse(e.format(t))))}return JSON.stringify(e)}let e="";if(this.baseType==="array"){e+=this.arrayChildren.format(t);e+="["+(this.arrayLength<0?"":String(this.arrayLength))+"]"}else{if(this.baseType==="tuple"){if(t!==Y.sighash){e+=this.type}e+="("+this.components.map((e=>e.format(t))).join(t===Y.full?", ":",")+")"}else{e+=this.type}}if(t!==Y.sighash){if(this.indexed===true){e+=" indexed"}if(t===Y.full&&this.name){e+=" "+this.name}}return e}static from(t,e){if(typeof t==="string"){return K.fromString(t,e)}return K.fromObject(t)}static fromObject(t){if(K.isParamType(t)){return t}return new K(U,{name:t.name||null,type:nt(t.type),indexed:t.indexed==null?null:!!t.indexed,components:t.components?t.components.map(K.fromObject):null})}static fromString(t,e){function n(t){return K.fromObject({name:t.name,type:t.type,indexed:t.indexed,components:t.components})}return n(J(t,!!e))}static isParamType(t){return!!(t!=null&&t._isParamType)}}function j(t,e){return ot(t).map((t=>K.fromString(t,e)))}class z{constructor(t,e){if(t!==U){Q.throwError("use a static from method",i.errors.UNSUPPORTED_OPERATION,{operation:"new Fragment()"})}H(this,e);this._isFragment=true;Object.freeze(this)}static from(t){if(z.isFragment(t)){return t}if(typeof t==="string"){return z.fromString(t)}return z.fromObject(t)}static fromObject(t){if(z.isFragment(t)){return t}switch(t.type){case"function":return $.fromObject(t);case"event":return W.fromObject(t);case"constructor":return _.fromObject(t);case"error":return et.fromObject(t);case"fallback":case"receive":return null}return Q.throwArgumentError("invalid fragment object","value",t)}static fromString(t){t=t.replace(/\s/g," ");t=t.replace(/\(/g," (").replace(/\)/g,") ").replace(/\s+/g," ");t=t.trim();if(t.split(" ")[0]==="event"){return W.fromString(t.substring(5).trim())}else if(t.split(" ")[0]==="function"){return $.fromString(t.substring(8).trim())}else if(t.split("(")[0].trim()==="constructor"){return _.fromString(t.trim())}else if(t.split(" ")[0]==="error"){return et.fromString(t.substring(5).trim())}return Q.throwArgumentError("unsupported fragment","value",t)}static isFragment(t){return!!(t&&t._isFragment)}}class W extends z{format(t){if(!t){t=Y.sighash}if(!Y[t]){Q.throwArgumentError("invalid format type","format",t)}if(t===Y.json){return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map((e=>JSON.parse(e.format(t))))})}let e="";if(t!==Y.sighash){e+="event "}e+=this.name+"("+this.inputs.map((e=>e.format(t))).join(t===Y.full?", ":",")+") ";if(t!==Y.sighash){if(this.anonymous){e+="anonymous "}}return e.trim()}static from(t){if(typeof t==="string"){return W.fromString(t)}return W.fromObject(t)}static fromObject(t){if(W.isEventFragment(t)){return t}if(t.type!=="event"){Q.throwArgumentError("invalid event object","value",t)}const e={name:rt(t.name),anonymous:t.anonymous,inputs:t.inputs?t.inputs.map(K.fromObject):[],type:"event"};return new W(U,e)}static fromString(t){let e=t.match(st);if(!e){Q.throwArgumentError("invalid event string","value",t)}let n=false;e[3].split(" ").forEach((t=>{switch(t.trim()){case"anonymous":n=true;break;case"":break;default:Q.warn("unknown modifier: "+t)}}));return W.fromObject({name:e[1].trim(),anonymous:n,inputs:j(e[2],true),type:"event"})}static isEventFragment(t){return t&&t._isFragment&&t.type==="event"}}function X(t,e){e.gas=null;let n=t.split("@");if(n.length!==1){if(n.length>2){Q.throwArgumentError("invalid human-readable ABI signature","value",t)}if(!n[1].match(/^[0-9]+$/)){Q.throwArgumentError("invalid human-readable ABI signature gas","value",t)}e.gas=r.from(n[1]);return n[0]}return t}function V(t,e){e.constant=false;e.payable=false;e.stateMutability="nonpayable";t.split(" ").forEach((t=>{switch(t.trim()){case"constant":e.constant=true;break;case"payable":e.payable=true;e.stateMutability="payable";break;case"nonpayable":e.payable=false;e.stateMutability="nonpayable";break;case"pure":e.constant=true;e.stateMutability="pure";break;case"view":e.constant=true;e.stateMutability="view";break;case"external":case"public":case"":break;default:console.log("unknown modifier: "+t)}}))}function Z(t){let e={constant:false,payable:true,stateMutability:"payable"};if(t.stateMutability!=null){e.stateMutability=t.stateMutability;e.constant=e.stateMutability==="view"||e.stateMutability==="pure";if(t.constant!=null){if(!!t.constant!==e.constant){Q.throwArgumentError("cannot have constant function with mutability "+e.stateMutability,"value",t)}}e.payable=e.stateMutability==="payable";if(t.payable!=null){if(!!t.payable!==e.payable){Q.throwArgumentError("cannot have payable function with mutability "+e.stateMutability,"value",t)}}}else if(t.payable!=null){e.payable=!!t.payable;if(t.constant==null&&!e.payable&&t.type!=="constructor"){Q.throwArgumentError("unable to determine stateMutability","value",t)}e.constant=!!t.constant;if(e.constant){e.stateMutability="view"}else{e.stateMutability=e.payable?"payable":"nonpayable"}if(e.payable&&e.constant){Q.throwArgumentError("cannot have constant payable function","value",t)}}else if(t.constant!=null){e.constant=!!t.constant;e.payable=!e.constant;e.stateMutability=e.constant?"view":"payable"}else if(t.type!=="constructor"){Q.throwArgumentError("unable to determine stateMutability","value",t)}return e}class _ extends z{format(t){if(!t){t=Y.sighash}if(!Y[t]){Q.throwArgumentError("invalid format type","format",t)}if(t===Y.json){return JSON.stringify({type:"constructor",stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:undefined,payable:this.payable,gas:this.gas?this.gas.toNumber():undefined,inputs:this.inputs.map((e=>JSON.parse(e.format(t))))})}if(t===Y.sighash){Q.throwError("cannot format a constructor for sighash",i.errors.UNSUPPORTED_OPERATION,{operation:"format(sighash)"})}let e="constructor("+this.inputs.map((e=>e.format(t))).join(t===Y.full?", ":",")+") ";if(this.stateMutability&&this.stateMutability!=="nonpayable"){e+=this.stateMutability+" "}return e.trim()}static from(t){if(typeof t==="string"){return _.fromString(t)}return _.fromObject(t)}static fromObject(t){if(_.isConstructorFragment(t)){return t}if(t.type!=="constructor"){Q.throwArgumentError("invalid constructor object","value",t)}let e=Z(t);if(e.constant){Q.throwArgumentError("constructor cannot be constant","value",t)}const n={name:null,type:t.type,inputs:t.inputs?t.inputs.map(K.fromObject):[],payable:e.payable,stateMutability:e.stateMutability,gas:t.gas?r.from(t.gas):null};return new _(U,n)}static fromString(t){let e={type:"constructor"};t=X(t,e);let n=t.match(st);if(!n||n[1].trim()!=="constructor"){Q.throwArgumentError("invalid constructor string","value",t)}e.inputs=j(n[2].trim(),false);V(n[3].trim(),e);return _.fromObject(e)}static isConstructorFragment(t){return t&&t._isFragment&&t.type==="constructor"}}class $ extends _{format(t){if(!t){t=Y.sighash}if(!Y[t]){Q.throwArgumentError("invalid format type","format",t)}if(t===Y.json){return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:undefined,payable:this.payable,gas:this.gas?this.gas.toNumber():undefined,inputs:this.inputs.map((e=>JSON.parse(e.format(t)))),outputs:this.outputs.map((e=>JSON.parse(e.format(t))))})}let e="";if(t!==Y.sighash){e+="function "}e+=this.name+"("+this.inputs.map((e=>e.format(t))).join(t===Y.full?", ":",")+") ";if(t!==Y.sighash){if(this.stateMutability){if(this.stateMutability!=="nonpayable"){e+=this.stateMutability+" "}}else if(this.constant){e+="view "}if(this.outputs&&this.outputs.length){e+="returns ("+this.outputs.map((e=>e.format(t))).join(", ")+") "}if(this.gas!=null){e+="@"+this.gas.toString()+" "}}return e.trim()}static from(t){if(typeof t==="string"){return $.fromString(t)}return $.fromObject(t)}static fromObject(t){if($.isFunctionFragment(t)){return t}if(t.type!=="function"){Q.throwArgumentError("invalid function object","value",t)}let e=Z(t);const n={type:t.type,name:rt(t.name),constant:e.constant,inputs:t.inputs?t.inputs.map(K.fromObject):[],outputs:t.outputs?t.outputs.map(K.fromObject):[],payable:e.payable,stateMutability:e.stateMutability,gas:t.gas?r.from(t.gas):null};return new $(U,n)}static fromString(t){let e={type:"function"};t=X(t,e);let n=t.split(" returns ");if(n.length>2){Q.throwArgumentError("invalid function string","value",t)}let i=n[0].match(st);if(!i){Q.throwArgumentError("invalid function signature","value",t)}e.name=i[1].trim();if(e.name){rt(e.name)}e.inputs=j(i[2],false);V(i[3].trim(),e);if(n.length>1){let i=n[1].match(st);if(i[1].trim()!=""||i[3].trim()!=""){Q.throwArgumentError("unexpected tokens","value",t)}e.outputs=j(i[2],false)}else{e.outputs=[]}return $.fromObject(e)}static isFunctionFragment(t){return t&&t._isFragment&&t.type==="function"}}function tt(t){const e=t.format();if(e==="Error(string)"||e==="Panic(uint256)"){Q.throwArgumentError(`cannot specify user defined ${e} error`,"fragment",t)}return t}class et extends z{format(t){if(!t){t=Y.sighash}if(!Y[t]){Q.throwArgumentError("invalid format type","format",t)}if(t===Y.json){return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map((e=>JSON.parse(e.format(t))))})}let e="";if(t!==Y.sighash){e+="error "}e+=this.name+"("+this.inputs.map((e=>e.format(t))).join(t===Y.full?", ":",")+") ";return e.trim()}static from(t){if(typeof t==="string"){return et.fromString(t)}return et.fromObject(t)}static fromObject(t){if(et.isErrorFragment(t)){return t}if(t.type!=="error"){Q.throwArgumentError("invalid error object","value",t)}const e={type:t.type,name:rt(t.name),inputs:t.inputs?t.inputs.map(K.fromObject):[]};return tt(new et(U,e))}static fromString(t){let e={type:"error"};let n=t.match(st);if(!n){Q.throwArgumentError("invalid error signature","value",t)}e.name=n[1].trim();if(e.name){rt(e.name)}e.inputs=j(n[2],false);return tt(et.fromObject(e))}static isErrorFragment(t){return t&&t._isFragment&&t.type==="error"}}function nt(t){if(t.match(/^uint($|[^1-9])/)){t="uint256"+t.substring(4)}else if(t.match(/^int($|[^1-9])/)){t="int256"+t.substring(3)}return t}const it=new RegExp("^[a-zA-Z$_][a-zA-Z0-9$_]*$");function rt(t){if(!t||!t.match(it)){Q.throwArgumentError(`invalid identifier "${t}"`,"value",t)}return t}const st=new RegExp("^([^)(]*)\\((.*)\\)([^)(]*)$");function ot(t){t=t.trim();let e=[];let n="";let i=0;for(let r=0;r<t.length;r++){let s=t[r];if(s===","&&i===0){e.push(n);n=""}else{n+=s;if(s==="("){i++}else if(s===")"){i--;if(i===-1){Q.throwArgumentError("unbalanced parenthesis","value",t)}}}}if(n){e.push(n)}return e}const at=new i(M);function lt(t){const e=[];const n=function(t,i){if(!Array.isArray(i)){return}for(let r in i){const s=t.slice();s.push(r);try{n(s,i[r])}catch(t){e.push({path:s,error:t})}}};n([],t);return e}class ut{constructor(t,e,n,i){this.name=t;this.type=e;this.localName=n;this.dynamic=i}_throwError(t,e){at.throwArgumentError(t,this.localName,e)}}class ct{constructor(t){s(this,"wordSize",t||32);this._data=[];this._dataLength=0;this._padding=new Uint8Array(t)}get data(){return o(this._data)}get length(){return this._dataLength}_writeData(t){this._data.push(t);this._dataLength+=t.length;return t.length}appendWriter(t){return this._writeData(a(t._data))}writeBytes(t){let e=l(t);const n=e.length%this.wordSize;if(n){e=a([e,this._padding.slice(n)])}return this._writeData(e)}_getValue(t){let e=l(r.from(t));if(e.length>this.wordSize){at.throwError("value out-of-bounds",i.errors.BUFFER_OVERRUN,{length:this.wordSize,offset:e.length})}if(e.length%this.wordSize){e=a([this._padding.slice(e.length%this.wordSize),e])}return e}writeValue(t){return this._writeData(this._getValue(t))}writeUpdatableValue(){const t=this._data.length;this._data.push(this._padding);this._dataLength+=this.wordSize;return e=>{this._data[t]=this._getValue(e)}}}class ft{constructor(t,e,n,i){s(this,"_data",l(t));s(this,"wordSize",e||32);s(this,"_coerceFunc",n);s(this,"allowLoose",i);this._offset=0}get data(){return u(this._data)}get consumed(){return this._offset}static coerce(t,e){let n=t.match("^u?int([0-9]+)$");if(n&&parseInt(n[1])<=48){e=e.toNumber()}return e}coerce(t,e){if(this._coerceFunc){return this._coerceFunc(t,e)}return ft.coerce(t,e)}_peekBytes(t,e,n){let r=Math.ceil(e/this.wordSize)*this.wordSize;if(this._offset+r>this._data.length){if(this.allowLoose&&n&&this._offset+e<=this._data.length){r=e}else{at.throwError("data out-of-bounds",i.errors.BUFFER_OVERRUN,{length:this._data.length,offset:this._offset+r})}}return this._data.slice(this._offset,this._offset+r)}subReader(t){return new ft(this._data.slice(this._offset+t),this.wordSize,this._coerceFunc,this.allowLoose)}readBytes(t,e){let n=this._peekBytes(0,t,!!e);this._offset+=n.length;return n.slice(0,t)}readValue(){return r.from(this.readBytes(this.wordSize))}}class ht extends ut{constructor(t){super("address","address",t,false)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(t,e){try{e=c(e)}catch(t){this._throwError(t.message,e)}return t.writeValue(e)}decode(t){return c(f(t.readValue().toHexString(),20))}}class dt extends ut{constructor(t){super(t.name,t.type,undefined,t.dynamic);this.coder=t}defaultValue(){return this.coder.defaultValue()}encode(t,e){return this.coder.encode(t,e)}decode(t){return this.coder.decode(t)}}const gt=new i(M);function pt(t,e,n){let r=null;if(Array.isArray(n)){r=n}else if(n&&typeof n==="object"){let t={};r=e.map((e=>{const r=e.localName;if(!r){gt.throwError("cannot encode object for signature with missing names",i.errors.INVALID_ARGUMENT,{argument:"values",coder:e,value:n})}if(t[r]){gt.throwError("cannot encode object for signature with duplicate names",i.errors.INVALID_ARGUMENT,{argument:"values",coder:e,value:n})}t[r]=true;return n[r]}))}else{gt.throwArgumentError("invalid tuple value","tuple",n)}if(e.length!==r.length){gt.throwArgumentError("types/value length mismatch","tuple",n)}let s=new ct(t.wordSize);let o=new ct(t.wordSize);let a=[];e.forEach(((t,e)=>{let n=r[e];if(t.dynamic){let e=o.length;t.encode(o,n);let i=s.writeUpdatableValue();a.push((t=>{i(t+e)}))}else{t.encode(s,n)}}));a.forEach((t=>{t(s.length)}));let l=t.appendWriter(s);l+=t.appendWriter(o);return l}function At(t,e){let n=[];let r=t.subReader(0);e.forEach((e=>{let s=null;if(e.dynamic){let n=t.readValue();let o=r.subReader(n.toNumber());try{s=e.decode(o)}catch(t){if(t.code===i.errors.BUFFER_OVERRUN){throw t}s=t;s.baseType=e.name;s.name=e.localName;s.type=e.type}}else{try{s=e.decode(t)}catch(t){if(t.code===i.errors.BUFFER_OVERRUN){throw t}s=t;s.baseType=e.name;s.name=e.localName;s.type=e.type}}if(s!=undefined){n.push(s)}}));const s=e.reduce(((t,e)=>{const n=e.localName;if(n){if(!t[n]){t[n]=0}t[n]++}return t}),{});e.forEach(((t,e)=>{let i=t.localName;if(!i||s[i]!==1){return}if(i==="length"){i="_length"}if(n[i]!=null){return}const r=n[e];if(r instanceof Error){Object.defineProperty(n,i,{enumerable:true,get:()=>{throw r}})}else{n[i]=r}}));for(let t=0;t<n.length;t++){const e=n[t];if(e instanceof Error){Object.defineProperty(n,t,{enumerable:true,get:()=>{throw e}})}}return Object.freeze(n)}class mt extends ut{constructor(t,e,n){const i=t.type+"["+(e>=0?e:"")+"]";const r=e===-1||t.dynamic;super("array",i,n,r);this.coder=t;this.length=e}defaultValue(){const t=this.coder.defaultValue();const e=[];for(let n=0;n<this.length;n++){e.push(t)}return e}encode(t,e){if(!Array.isArray(e)){this._throwError("expected array value",e)}let n=this.length;if(n===-1){n=e.length;t.writeValue(e.length)}gt.checkArgumentCount(e.length,n,"coder array"+(this.localName?" "+this.localName:""));let i=[];for(let t=0;t<e.length;t++){i.push(this.coder)}return pt(t,i,e)}decode(t){let e=this.length;if(e===-1){e=t.readValue().toNumber();if(e*32>t._data.length){gt.throwError("insufficient data length",i.errors.BUFFER_OVERRUN,{length:t._data.length,count:e})}}let n=[];for(let t=0;t<e;t++){n.push(new dt(this.coder))}return t.coerce(this.name,At(t,n))}}class yt extends ut{constructor(t){super("bool","bool",t,false)}defaultValue(){return false}encode(t,e){return t.writeValue(e?1:0)}decode(t){return t.coerce(this.type,!t.readValue().isZero())}}class vt extends ut{constructor(t,e){super(t,t,e,true)}defaultValue(){return"0x"}encode(t,e){e=l(e);let n=t.writeValue(e.length);n+=t.writeBytes(e);return n}decode(t){return t.readBytes(t.readValue().toNumber(),true)}}class wt extends vt{constructor(t){super("bytes",t)}decode(t){return t.coerce(this.name,u(super.decode(t)))}}class bt extends ut{constructor(t,e){let n="bytes"+String(t);super(n,n,e,false);this.size=t}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(t,e){let n=l(e);if(n.length!==this.size){this._throwError("incorrect data length",e)}return t.writeBytes(n)}decode(t){return t.coerce(this.name,u(t.readBytes(this.size)))}}class kt extends ut{constructor(t){super("null","",t,false)}defaultValue(){return null}encode(t,e){if(e!=null){this._throwError("not null",e)}return t.writeBytes([])}decode(t){t.readBytes(0);return t.coerce(this.name,null)}}const xt="0x0000000000000000000000000000000000000000";const Ct="0x0000000000000000000000000000000000000000000000000000000000000000";class Bt extends ut{constructor(t,e,n){const i=(e?"int":"uint")+t*8;super(i,i,n,false);this.size=t;this.signed=e}defaultValue(){return 0}encode(t,e){let n=r.from(e);let i=h.mask(t.wordSize*8);if(this.signed){let t=i.mask(this.size*8-1);if(n.gt(t)||n.lt(t.add(d).mul(g))){this._throwError("value out-of-bounds",e)}}else if(n.lt(p)||n.gt(i.mask(this.size*8))){this._throwError("value out-of-bounds",e)}n=n.toTwos(this.size*8).mask(this.size*8);if(this.signed){n=n.fromTwos(this.size*8).toTwos(8*t.wordSize)}return t.writeValue(n)}decode(t){let e=t.readValue().mask(this.size*8);if(this.signed){e=e.fromTwos(this.size*8)}return t.coerce(this.name,e)}}const Et="strings/5.7.0";const Tt=new i(Et);var It;(function(t){t["current"]="";t["NFC"]="NFC";t["NFD"]="NFD";t["NFKC"]="NFKC";t["NFKD"]="NFKD"})(It||(It={}));var Pt;(function(t){t["UNEXPECTED_CONTINUE"]="unexpected continuation byte";t["BAD_PREFIX"]="bad codepoint prefix";t["OVERRUN"]="string overrun";t["MISSING_CONTINUE"]="missing continuation byte";t["OUT_OF_RANGE"]="out of UTF-8 range";t["UTF16_SURROGATE"]="UTF-16 surrogate";t["OVERLONG"]="overlong representation"})(Pt||(Pt={}));function St(t,e,n,i,r){return Tt.throwArgumentError(`invalid codepoint at offset ${e}; ${t}`,"bytes",n)}function Nt(t,e,n,i,r){if(t===Pt.BAD_PREFIX||t===Pt.UNEXPECTED_CONTINUE){let t=0;for(let i=e+1;i<n.length;i++){if(n[i]>>6!==2){break}t++}return t}if(t===Pt.OVERRUN){return n.length-e-1}return 0}function Dt(t,e,n,i,r){if(t===Pt.OVERLONG){i.push(r);return 0}i.push(65533);return Nt(t,e,n)}const Ft=Object.freeze({error:St,ignore:Nt,replace:Dt});function Ot(t,e){if(e==null){e=Ft.error}t=l(t);const n=[];let i=0;while(i<t.length){const r=t[i++];if(r>>7===0){n.push(r);continue}let s=null;let o=null;if((r&224)===192){s=1;o=127}else if((r&240)===224){s=2;o=2047}else if((r&248)===240){s=3;o=65535}else{if((r&192)===128){i+=e(Pt.UNEXPECTED_CONTINUE,i-1,t,n)}else{i+=e(Pt.BAD_PREFIX,i-1,t,n)}continue}if(i-1+s>=t.length){i+=e(Pt.OVERRUN,i-1,t,n);continue}let a=r&(1<<8-s-1)-1;for(let r=0;r<s;r++){let r=t[i];if((r&192)!=128){i+=e(Pt.MISSING_CONTINUE,i,t,n);a=null;break}a=a<<6|r&63;i++}if(a===null){continue}if(a>1114111){i+=e(Pt.OUT_OF_RANGE,i-1-s,t,n,a);continue}if(a>=55296&&a<=57343){i+=e(Pt.UTF16_SURROGATE,i-1-s,t,n,a);continue}if(a<=o){i+=e(Pt.OVERLONG,i-1-s,t,n,a);continue}n.push(a)}return n}function Mt(t,e=It.current){if(e!=It.current){Tt.checkNormalize();t=t.normalize(e)}let n=[];for(let e=0;e<t.length;e++){const i=t.charCodeAt(e);if(i<128){n.push(i)}else if(i<2048){n.push(i>>6|192);n.push(i&63|128)}else if((i&64512)==55296){e++;const r=t.charCodeAt(e);if(e>=t.length||(r&64512)!==56320){throw new Error("invalid utf-8 string")}const s=65536+((i&1023)<<10)+(r&1023);n.push(s>>18|240);n.push(s>>12&63|128);n.push(s>>6&63|128);n.push(s&63|128)}else{n.push(i>>12|224);n.push(i>>6&63|128);n.push(i&63|128)}}return l(n)}function Qt(t){return t.map((t=>{if(t<=65535){return String.fromCharCode(t)}t-=65536;return String.fromCharCode((t>>10&1023)+55296,(t&1023)+56320)})).join("")}function Ut(t,e){return Qt(Ot(t,e))}function Lt(t,e=It.current){return Ot(Mt(t,e))}class Gt extends vt{constructor(t){super("string",t)}defaultValue(){return""}encode(t,e){return super.encode(t,Mt(e))}decode(t){return Ut(super.decode(t))}}class Rt extends ut{constructor(t,e){let n=false;const i=[];t.forEach((t=>{if(t.dynamic){n=true}i.push(t.type)}));const r="tuple("+i.join(",")+")";super("tuple",r,e,n);this.coders=t}defaultValue(){const t=[];this.coders.forEach((e=>{t.push(e.defaultValue())}));const e=this.coders.reduce(((t,e)=>{const n=e.localName;if(n){if(!t[n]){t[n]=0}t[n]++}return t}),{});this.coders.forEach(((n,i)=>{let r=n.localName;if(!r||e[r]!==1){return}if(r==="length"){r="_length"}if(t[r]!=null){return}t[r]=t[i]}));return Object.freeze(t)}encode(t,e){return pt(t,this.coders,e)}decode(t){return t.coerce(this.name,At(t,this.coders))}}const Jt=new i(M);const Ht=new RegExp(/^bytes([0-9]*)$/);const Yt=new RegExp(/^(u?int)([0-9]*)$/);class qt{constructor(t){s(this,"coerceFunc",t||null)}_getCoder(t){switch(t.baseType){case"address":return new ht(t.name);case"bool":return new yt(t.name);case"string":return new Gt(t.name);case"bytes":return new wt(t.name);case"array":return new mt(this._getCoder(t.arrayChildren),t.arrayLength,t.name);case"tuple":return new Rt((t.components||[]).map((t=>this._getCoder(t))),t.name);case"":return new kt(t.name)}let e=t.type.match(Yt);if(e){let n=parseInt(e[2]||"256");if(n===0||n>256||n%8!==0){Jt.throwArgumentError("invalid "+e[1]+" bit length","param",t)}return new Bt(n/8,e[1]==="int",t.name)}e=t.type.match(Ht);if(e){let n=parseInt(e[1]);if(n===0||n>32){Jt.throwArgumentError("invalid bytes length","param",t)}return new bt(n,t.name)}return Jt.throwArgumentError("invalid type","type",t.type)}_getWordSize(){return 32}_getReader(t,e){return new ft(t,this._getWordSize(),this.coerceFunc,e)}_getWriter(){return new ct(this._getWordSize())}getDefaultValue(t){const e=t.map((t=>this._getCoder(K.from(t))));const n=new Rt(e,"_");return n.defaultValue()}encode(t,e){if(t.length!==e.length){Jt.throwError("types/values length mismatch",i.errors.INVALID_ARGUMENT,{count:{types:t.length,values:e.length},value:{types:t,values:e}})}const n=t.map((t=>this._getCoder(K.from(t))));const r=new Rt(n,"_");const s=this._getWriter();r.encode(s,e);return s.data}decode(t,e,n){const i=t.map((t=>this._getCoder(K.from(t))));const r=new Rt(i,"_");return r.decode(this._getReader(l(e),n))}}const Kt=new qt;function jt(t){return A(Mt(t))}const zt="hash/5.7.0";function Wt(t){t=atob(t);const e=[];for(let n=0;n<t.length;n++){e.push(t.charCodeAt(n))}return l(e)}function Xt(t){t=l(t);let e="";for(let n=0;n<t.length;n++){e+=String.fromCharCode(t[n])}return btoa(e)}function Vt(t,e){if(e==null){e=1}const n=[];const i=n.forEach;const r=function(t,e){i.call(t,(function(t){if(e>0&&Array.isArray(t)){r(t,e-1)}else{n.push(t)}}))};r(t,e);return n}function Zt(t){const e={};for(let n=0;n<t.length;n++){const i=t[n];e[i[0]]=i[1]}return e}function _t(t){let e=0;function n(){return t[e++]<<8|t[e++]}let i=n();let r=1;let s=[0,1];for(let t=1;t<i;t++){s.push(r+=n())}let o=n();let a=e;e+=o;let l=0;let u=0;function c(){if(l==0){u=u<<8|t[e++];l=8}return u>>--l&1}const f=31;const h=Math.pow(2,f);const d=h>>>1;const g=d>>1;const p=h-1;let A=0;for(let t=0;t<f;t++)A=A<<1|c();let m=[];let y=0;let v=h;while(true){let t=Math.floor(((A-y+1)*r-1)/v);let e=0;let n=i;while(n-e>1){let i=e+n>>>1;if(t<s[i]){n=i}else{e=i}}if(e==0)break;m.push(e);let o=y+Math.floor(v*s[e]/r);let a=y+Math.floor(v*s[e+1]/r)-1;while(((o^a)&d)==0){A=A<<1&p|c();o=o<<1&p;a=a<<1&p|1}while(o&~a&g){A=A&d|A<<1&p>>>1|c();o=o<<1^d;a=(a^d)<<1|d|1}y=o;v=1+a-o}let w=i-4;return m.map((e=>{switch(e-w){case 3:return w+65792+(t[a++]<<16|t[a++]<<8|t[a++]);case 2:return w+256+(t[a++]<<8|t[a++]);case 1:return w+t[a++];default:return e-1}}))}function $t(t){let e=0;return()=>t[e++]}function te(t){return $t(_t(t))}function ee(t){return t&1?~t>>1:t>>1}function ne(t,e){let n=Array(t);for(let i=0;i<t;i++)n[i]=1+e();return n}function ie(t,e){let n=Array(t);for(let i=0,r=-1;i<t;i++)n[i]=r+=1+e();return n}function re(t,e){let n=Array(t);for(let i=0,r=0;i<t;i++)n[i]=r+=ee(e());return n}function se(t,e){let n=ie(t(),t);let i=t();let r=ie(i,t);let s=ne(i,t);for(let t=0;t<i;t++){for(let e=0;e<s[t];e++){n.push(r[t]+e)}}return e?n.map((t=>e[t])):n}function oe(t){let e=[];while(true){let n=t();if(n==0)break;e.push(ue(n,t))}while(true){let n=t()-1;if(n<0)break;e.push(ce(n,t))}return Zt(Vt(e))}function ae(t){let e=[];while(true){let n=t();if(n==0)break;e.push(n)}return e}function le(t,e,n){let i=Array(t).fill(undefined).map((()=>[]));for(let r=0;r<e;r++){re(t,n).forEach(((t,e)=>i[e].push(t)))}return i}function ue(t,e){let n=1+e();let i=e();let r=ae(e);let s=le(r.length,1+t,e);return Vt(s.map(((t,e)=>{const s=t[0],o=t.slice(1);return Array(r[e]).fill(undefined).map(((t,e)=>{let r=e*i;return[s+e*n,o.map((t=>t+r))]}))})))}function ce(t,e){let n=1+e();let i=le(n,1+t,e);return i.map((t=>[t[0],t.slice(1)]))}function fe(t){let e=se(t).sort(((t,e)=>t-e));return n();function n(){let i=[];while(true){let r=se(t,e);if(r.length==0)break;i.push({set:new Set(r),node:n()})}i.sort(((t,e)=>e.set.size-t.set.size));let r=t();let s=r%3;r=r/3|0;let o=!!(r&1);r>>=1;let a=r==1;let l=r==2;return{branches:i,valid:s,fe0f:o,save:a,check:l}}}function he(){return te(Wt("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"))}const de=he();const ge=new Set(se(de));const pe=new Set(se(de));const Ae=oe(de);const me=fe(de);const ye=45;const ve=95;function we(t){return Lt(t)}function be(t){return t.filter((t=>t!=65039))}function ke(t){for(let e of t.split(".")){let t=we(e);try{for(let e=t.lastIndexOf(ve)-1;e>=0;e--){if(t[e]!==ve){throw new Error(`underscore only allowed at start`)}}if(t.length>=4&&t.every((t=>t<128))&&t[2]===ye&&t[3]===ye){throw new Error(`invalid label extension`)}}catch(t){throw new Error(`Invalid label "${e}": ${t.message}`)}}return t}function xe(t){return ke(Ce(t,be))}function Ce(t,e){let n=we(t).reverse();let i=[];while(n.length){let t=Ee(n);if(t){i.push(...e(t));continue}let r=n.pop();if(ge.has(r)){i.push(r);continue}if(pe.has(r)){continue}let s=Ae[r];if(s){i.push(...s);continue}throw new Error(`Disallowed codepoint: 0x${r.toString(16).toUpperCase()}`)}return ke(Be(String.fromCodePoint(...i)))}function Be(t){return t.normalize("NFC")}function Ee(t,e){var n;let i=me;let r;let s;let o=[];let a=t.length;if(e)e.length=0;while(a){let l=t[--a];i=(n=i.branches.find((t=>t.set.has(l))))===null||n===void 0?void 0:n.node;if(!i)break;if(i.save){s=l}else if(i.check){if(l===s)break}o.push(l);if(i.fe0f){o.push(65039);if(a>0&&t[a-1]==65039)a--}if(i.valid){r=o.slice();if(i.valid==2)r.splice(1,1);if(e)e.push(...t.slice(a).reverse());t.length=a}}return r}const Te=new i(zt);const Ie=new Uint8Array(32);Ie.fill(0);function Pe(t){if(t.length===0){throw new Error("invalid ENS name; empty component")}return t}function Se(t){const e=Mt(xe(t));const n=[];if(t.length===0){return n}let i=0;for(let t=0;t<e.length;t++){const r=e[t];if(r===46){n.push(Pe(e.slice(i,t)));i=t+1}}if(i>=e.length){throw new Error("invalid ENS name; empty component")}n.push(Pe(e.slice(i)));return n}function Ne(t){if(typeof t!=="string"){Te.throwArgumentError("invalid ENS name; not a string","name",t)}let e=Ie;const n=Se(t);while(n.length){e=A(a([e,A(n.pop())]))}return u(e)}function De(t){return u(a(Se(t).map((t=>{if(t.length>63){throw new Error("invalid DNS encoded entry; length exceeds 63 bytes")}const e=new Uint8Array(t.length+1);e.set(t,1);e[0]=e.length-1;return e}))))+"00"}var Fe=undefined&&undefined.__awaiter||function(t,e,n,i){function r(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,s){function o(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i["throw"](t))}catch(t){s(t)}}function l(t){t.done?n(t.value):r(t.value).then(o,a)}l((i=i.apply(t,e||[])).next())}))};const Oe=new i(zt);const Me=new Uint8Array(32);Me.fill(0);const Qe=r.from(-1);const Ue=r.from(0);const Le=r.from(1);const Ge=r.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function Re(t){const e=l(t);const n=e.length%32;if(n){return o([e,Me.slice(n)])}return u(e)}const Je=f(Le.toHexString(),32);const He=f(Ue.toHexString(),32);const Ye={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"};const qe=["name","version","chainId","verifyingContract","salt"];function Ke(t){return function(e){if(typeof e!=="string"){Oe.throwArgumentError(`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e)}return e}}const je={name:Ke("name"),version:Ke("version"),chainId:function(t){try{return r.from(t).toString()}catch(t){}return Oe.throwArgumentError(`invalid domain value for "chainId"`,"domain.chainId",t)},verifyingContract:function(t){try{return c(t).toLowerCase()}catch(t){}return Oe.throwArgumentError(`invalid domain value "verifyingContract"`,"domain.verifyingContract",t)},salt:function(t){try{const e=l(t);if(e.length!==32){throw new Error("bad length")}return u(e)}catch(t){}return Oe.throwArgumentError(`invalid domain value "salt"`,"domain.salt",t)}};function ze(t){{const e=t.match(/^(u?)int(\d*)$/);if(e){const n=e[1]==="";const i=parseInt(e[2]||"256");if(i%8!==0||i>256||e[2]&&e[2]!==String(i)){Oe.throwArgumentError("invalid numeric width","type",t)}const s=Ge.mask(n?i-1:i);const o=n?s.add(Le).mul(Qe):Ue;return function(e){const n=r.from(e);if(n.lt(o)||n.gt(s)){Oe.throwArgumentError(`value out-of-bounds for ${t}`,"value",e)}return f(n.toTwos(256).toHexString(),32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const n=parseInt(e[1]);if(n===0||n>32||e[1]!==String(n)){Oe.throwArgumentError("invalid bytes width","type",t)}return function(e){const i=l(e);if(i.length!==n){Oe.throwArgumentError(`invalid length for ${t}`,"value",e)}return Re(e)}}}switch(t){case"address":return function(t){return f(c(t),32)};case"bool":return function(t){return!t?He:Je};case"bytes":return function(t){return A(t)};case"string":return function(t){return jt(t)}}return null}function We(t,e){return`${t}(${e.map((({name:t,type:e})=>e+" "+t)).join(",")})`}class Xe{constructor(t){s(this,"types",Object.freeze(m(t)));s(this,"_encoderCache",{});s(this,"_types",{});const e={};const n={};const i={};Object.keys(t).forEach((t=>{e[t]={};n[t]=[];i[t]={}}));for(const i in t){const r={};t[i].forEach((s=>{if(r[s.name]){Oe.throwArgumentError(`duplicate variable name ${JSON.stringify(s.name)} in ${JSON.stringify(i)}`,"types",t)}r[s.name]=true;const o=s.type.match(/^([^\x5b]*)(\x5b|$)/)[1];if(o===i){Oe.throwArgumentError(`circular type reference to ${JSON.stringify(o)}`,"types",t)}const a=ze(o);if(a){return}if(!n[o]){Oe.throwArgumentError(`unknown type ${JSON.stringify(o)}`,"types",t)}n[o].push(i);e[i][o]=true}))}const r=Object.keys(n).filter((t=>n[t].length===0));if(r.length===0){Oe.throwArgumentError("missing primary type","types",t)}else if(r.length>1){Oe.throwArgumentError(`ambiguous primary types or unused types: ${r.map((t=>JSON.stringify(t))).join(", ")}`,"types",t)}s(this,"primaryType",r[0]);function o(r,s){if(s[r]){Oe.throwArgumentError(`circular type reference to ${JSON.stringify(r)}`,"types",t)}s[r]=true;Object.keys(e[r]).forEach((t=>{if(!n[t]){return}o(t,s);Object.keys(s).forEach((e=>{i[e][t]=true}))}));delete s[r]}o(this.primaryType,{});for(const e in i){const n=Object.keys(i[e]);n.sort();this._types[e]=We(e,t[e])+n.map((e=>We(e,t[e]))).join("")}}getEncoder(t){let e=this._encoderCache[t];if(!e){e=this._encoderCache[t]=this._getEncoder(t)}return e}_getEncoder(t){{const e=ze(t);if(e){return e}}const e=t.match(/^(.*)(\x5b(\d*)\x5d)$/);if(e){const t=e[1];const n=this.getEncoder(t);const i=parseInt(e[3]);return e=>{if(i>=0&&e.length!==i){Oe.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",e)}let r=e.map(n);if(this._types[t]){r=r.map(A)}return A(o(r))}}const n=this.types[t];if(n){const e=jt(this._types[t]);return t=>{const i=n.map((({name:e,type:n})=>{const i=this.getEncoder(n)(t[e]);if(this._types[n]){return A(i)}return i}));i.unshift(e);return o(i)}}return Oe.throwArgumentError(`unknown type: ${t}`,"type",t)}encodeType(t){const e=this._types[t];if(!e){Oe.throwArgumentError(`unknown type: ${JSON.stringify(t)}`,"name",t)}return e}encodeData(t,e){return this.getEncoder(t)(e)}hashStruct(t,e){return A(this.encodeData(t,e))}encode(t){return this.encodeData(this.primaryType,t)}hash(t){return this.hashStruct(this.primaryType,t)}_visit(t,e,n){{const i=ze(t);if(i){return n(t,e)}}const i=t.match(/^(.*)(\x5b(\d*)\x5d)$/);if(i){const t=i[1];const r=parseInt(i[3]);if(r>=0&&e.length!==r){Oe.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",e)}return e.map((e=>this._visit(t,e,n)))}const r=this.types[t];if(r){return r.reduce(((t,{name:i,type:r})=>{t[i]=this._visit(r,e[i],n);return t}),{})}return Oe.throwArgumentError(`unknown type: ${t}`,"type",t)}visit(t,e){return this._visit(this.primaryType,t,e)}static from(t){return new Xe(t)}static getPrimaryType(t){return Xe.from(t).primaryType}static hashStruct(t,e,n){return Xe.from(e).hashStruct(t,n)}static hashDomain(t){const e=[];for(const n in t){const i=Ye[n];if(!i){Oe.throwArgumentError(`invalid typed-data domain key: ${JSON.stringify(n)}`,"domain",t)}e.push({name:n,type:i})}e.sort(((t,e)=>qe.indexOf(t.name)-qe.indexOf(e.name)));return Xe.hashStruct("EIP712Domain",{EIP712Domain:e},t)}static encode(t,e,n){return o(["0x1901",Xe.hashDomain(t),Xe.from(e).hash(n)])}static hash(t,e,n){return A(Xe.encode(t,e,n))}static resolveNames(t,e,n,i){return Fe(this,void 0,void 0,(function*(){t=y(t);const r={};if(t.verifyingContract&&!v(t.verifyingContract,20)){r[t.verifyingContract]="0x"}const s=Xe.from(e);s.visit(n,((t,e)=>{if(t==="address"&&!v(e,20)){r[e]="0x"}return e}));for(const t in r){r[t]=yield i(t)}if(t.verifyingContract&&r[t.verifyingContract]){t.verifyingContract=r[t.verifyingContract]}n=s.visit(n,((t,e)=>{if(t==="address"&&r[e]){return r[e]}return e}));return{domain:t,value:n}}))}static getPayload(t,e,n){Xe.hashDomain(t);const i={};const s=[];qe.forEach((e=>{const n=t[e];if(n==null){return}i[e]=je[e](n);s.push({name:e,type:Ye[e]})}));const o=Xe.from(e);const a=y(e);if(a.EIP712Domain){Oe.throwArgumentError("types must not contain EIP712Domain type","types.EIP712Domain",e)}else{a.EIP712Domain=s}o.encode(n);return{types:a,domain:i,primaryType:o.primaryType,message:o.visit(n,((t,e)=>{if(t.match(/^bytes(\d*)/)){return u(l(e))}if(t.match(/^u?int/)){return r.from(e).toString()}switch(t){case"address":return e.toLowerCase();case"bool":return!!e;case"string":if(typeof e!=="string"){Oe.throwArgumentError(`invalid string`,"value",e)}return e}return Oe.throwArgumentError("unsupported type","type",t)}))}}}const Ve=new i(M);class Ze extends w{}class _e extends w{}class $e extends w{}class tn extends w{static isIndexed(t){return!!(t&&t._isIndexed)}}const en={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:true},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"]}};function nn(t,e){const n=new Error(`deferred error during ABI decoding triggered accessing ${t}`);n.error=e;return n}class rn{constructor(t){let e=[];if(typeof t==="string"){e=JSON.parse(t)}else{e=t}s(this,"fragments",e.map((t=>z.from(t))).filter((t=>t!=null)));s(this,"_abiCoder",b(new.target,"getAbiCoder")());s(this,"functions",{});s(this,"errors",{});s(this,"events",{});s(this,"structs",{});this.fragments.forEach((t=>{let e=null;switch(t.type){case"constructor":if(this.deploy){Ve.warn("duplicate definition - constructor");return}s(this,"deploy",t);return;case"function":e=this.functions;break;case"event":e=this.events;break;case"error":e=this.errors;break;default:return}let n=t.format();if(e[n]){Ve.warn("duplicate definition - "+n);return}e[n]=t}));if(!this.deploy){s(this,"deploy",_.from({payable:false,type:"constructor"}))}s(this,"_isInterface",true)}format(t){if(!t){t=Y.full}if(t===Y.sighash){Ve.throwArgumentError("interface does not support formatting sighash","format",t)}const e=this.fragments.map((e=>e.format(t)));if(t===Y.json){return JSON.stringify(e.map((t=>JSON.parse(t))))}return e}static getAbiCoder(){return Kt}static getAddress(t){return c(t)}static getSighash(t){return k(jt(t.format()),0,4)}static getEventTopic(t){return jt(t.format())}getFunction(t){if(v(t)){for(const e in this.functions){if(t===this.getSighash(e)){return this.functions[e]}}Ve.throwArgumentError("no matching function","sighash",t)}if(t.indexOf("(")===-1){const e=t.trim();const n=Object.keys(this.functions).filter((t=>t.split("(")[0]===e));if(n.length===0){Ve.throwArgumentError("no matching function","name",e)}else if(n.length>1){Ve.throwArgumentError("multiple matching functions","name",e)}return this.functions[n[0]]}const e=this.functions[$.fromString(t).format()];if(!e){Ve.throwArgumentError("no matching function","signature",t)}return e}getEvent(t){if(v(t)){const e=t.toLowerCase();for(const t in this.events){if(e===this.getEventTopic(t)){return this.events[t]}}Ve.throwArgumentError("no matching event","topichash",e)}if(t.indexOf("(")===-1){const e=t.trim();const n=Object.keys(this.events).filter((t=>t.split("(")[0]===e));if(n.length===0){Ve.throwArgumentError("no matching event","name",e)}else if(n.length>1){Ve.throwArgumentError("multiple matching events","name",e)}return this.events[n[0]]}const e=this.events[W.fromString(t).format()];if(!e){Ve.throwArgumentError("no matching event","signature",t)}return e}getError(t){if(v(t)){const e=b(this.constructor,"getSighash");for(const n in this.errors){const i=this.errors[n];if(t===e(i)){return this.errors[n]}}Ve.throwArgumentError("no matching error","sighash",t)}if(t.indexOf("(")===-1){const e=t.trim();const n=Object.keys(this.errors).filter((t=>t.split("(")[0]===e));if(n.length===0){Ve.throwArgumentError("no matching error","name",e)}else if(n.length>1){Ve.throwArgumentError("multiple matching errors","name",e)}return this.errors[n[0]]}const e=this.errors[$.fromString(t).format()];if(!e){Ve.throwArgumentError("no matching error","signature",t)}return e}getSighash(t){if(typeof t==="string"){try{t=this.getFunction(t)}catch(e){try{t=this.getError(t)}catch(t){throw e}}}return b(this.constructor,"getSighash")(t)}getEventTopic(t){if(typeof t==="string"){t=this.getEvent(t)}return b(this.constructor,"getEventTopic")(t)}_decodeParams(t,e){return this._abiCoder.decode(t,e)}_encodeParams(t,e){return this._abiCoder.encode(t,e)}encodeDeploy(t){return this._encodeParams(this.deploy.inputs,t||[])}decodeErrorResult(t,e){if(typeof t==="string"){t=this.getError(t)}const n=l(e);if(u(n.slice(0,4))!==this.getSighash(t)){Ve.throwArgumentError(`data signature does not match error ${t.name}.`,"data",u(n))}return this._decodeParams(t.inputs,n.slice(4))}encodeErrorResult(t,e){if(typeof t==="string"){t=this.getError(t)}return u(a([this.getSighash(t),this._encodeParams(t.inputs,e||[])]))}decodeFunctionData(t,e){if(typeof t==="string"){t=this.getFunction(t)}const n=l(e);if(u(n.slice(0,4))!==this.getSighash(t)){Ve.throwArgumentError(`data signature does not match function ${t.name}.`,"data",u(n))}return this._decodeParams(t.inputs,n.slice(4))}encodeFunctionData(t,e){if(typeof t==="string"){t=this.getFunction(t)}return u(a([this.getSighash(t),this._encodeParams(t.inputs,e||[])]))}decodeFunctionResult(t,e){if(typeof t==="string"){t=this.getFunction(t)}let n=l(e);let r=null;let s="";let o=null;let a=null;let c=null;switch(n.length%this._abiCoder._getWordSize()){case 0:try{return this._abiCoder.decode(t.outputs,n)}catch(t){}break;case 4:{const t=u(n.slice(0,4));const e=en[t];if(e){o=this._abiCoder.decode(e.inputs,n.slice(4));a=e.name;c=e.signature;if(e.reason){r=o[0]}if(a==="Error"){s=`; VM Exception while processing transaction: reverted with reason string ${JSON.stringify(o[0])}`}else if(a==="Panic"){s=`; VM Exception while processing transaction: reverted with panic code ${o[0]}`}}else{try{const e=this.getError(t);o=this._abiCoder.decode(e.inputs,n.slice(4));a=e.name;c=e.format()}catch(t){}}break}}return Ve.throwError("call revert exception"+s,i.errors.CALL_EXCEPTION,{method:t.format(),data:u(e),errorArgs:o,errorName:a,errorSignature:c,reason:r})}encodeFunctionResult(t,e){if(typeof t==="string"){t=this.getFunction(t)}return u(this._abiCoder.encode(t.outputs,e||[]))}encodeFilterTopics(t,e){if(typeof t==="string"){t=this.getEvent(t)}if(e.length>t.inputs.length){Ve.throwError("too many arguments for "+t.format(),i.errors.UNEXPECTED_ARGUMENT,{argument:"values",value:e})}let n=[];if(!t.anonymous){n.push(this.getEventTopic(t))}const s=(t,e)=>{if(t.type==="string"){return jt(e)}else if(t.type==="bytes"){return A(u(e))}if(t.type==="bool"&&typeof e==="boolean"){e=e?"0x01":"0x00"}if(t.type.match(/^u?int/)){e=r.from(e).toHexString()}if(t.type==="address"){this._abiCoder.encode(["address"],[e])}return f(u(e),32)};e.forEach(((e,i)=>{let r=t.inputs[i];if(!r.indexed){if(e!=null){Ve.throwArgumentError("cannot filter non-indexed parameters; must be null","contract."+r.name,e)}return}if(e==null){n.push(null)}else if(r.baseType==="array"||r.baseType==="tuple"){Ve.throwArgumentError("filtering with tuples or arrays not supported","contract."+r.name,e)}else if(Array.isArray(e)){n.push(e.map((t=>s(r,t))))}else{n.push(s(r,e))}}));while(n.length&&n[n.length-1]===null){n.pop()}return n}encodeEventLog(t,e){if(typeof t==="string"){t=this.getEvent(t)}const n=[];const i=[];const r=[];if(!t.anonymous){n.push(this.getEventTopic(t))}if(e.length!==t.inputs.length){Ve.throwArgumentError("event arguments/values mismatch","values",e)}t.inputs.forEach(((t,s)=>{const o=e[s];if(t.indexed){if(t.type==="string"){n.push(jt(o))}else if(t.type==="bytes"){n.push(A(o))}else if(t.baseType==="tuple"||t.baseType==="array"){throw new Error("not implemented")}else{n.push(this._abiCoder.encode([t.type],[o]))}}else{i.push(t);r.push(o)}}));return{data:this._abiCoder.encode(i,r),topics:n}}decodeEventLog(t,e,n){if(typeof t==="string"){t=this.getEvent(t)}if(n!=null&&!t.anonymous){let e=this.getEventTopic(t);if(!v(n[0],32)||n[0].toLowerCase()!==e){Ve.throwError("fragment/topic mismatch",i.errors.INVALID_ARGUMENT,{argument:"topics[0]",expected:e,value:n[0]})}n=n.slice(1)}let r=[];let s=[];let o=[];t.inputs.forEach(((t,e)=>{if(t.indexed){if(t.type==="string"||t.type==="bytes"||t.baseType==="tuple"||t.baseType==="array"){r.push(K.fromObject({type:"bytes32",name:t.name}));o.push(true)}else{r.push(t);o.push(false)}}else{s.push(t);o.push(false)}}));let l=n!=null?this._abiCoder.decode(r,a(n)):null;let u=this._abiCoder.decode(s,e,true);let c=[];let f=0,h=0;t.inputs.forEach(((t,e)=>{if(t.indexed){if(l==null){c[e]=new tn({_isIndexed:true,hash:null})}else if(o[e]){c[e]=new tn({_isIndexed:true,hash:l[h++]})}else{try{c[e]=l[h++]}catch(t){c[e]=t}}}else{try{c[e]=u[f++]}catch(t){c[e]=t}}if(t.name&&c[t.name]==null){const n=c[e];if(n instanceof Error){Object.defineProperty(c,t.name,{enumerable:true,get:()=>{throw nn(`property ${JSON.stringify(t.name)}`,n)}})}else{c[t.name]=n}}}));for(let t=0;t<c.length;t++){const e=c[t];if(e instanceof Error){Object.defineProperty(c,t,{enumerable:true,get:()=>{throw nn(`index ${t}`,e)}})}}return Object.freeze(c)}parseTransaction(t){let e=this.getFunction(t.data.substring(0,10).toLowerCase());if(!e){return null}return new _e({args:this._abiCoder.decode(e.inputs,"0x"+t.data.substring(10)),functionFragment:e,name:e.name,signature:e.format(),sighash:this.getSighash(e),value:r.from(t.value||"0")})}parseLog(t){let e=this.getEvent(t.topics[0]);if(!e||e.anonymous){return null}return new Ze({eventFragment:e,name:e.name,signature:e.format(),topic:this.getEventTopic(e),args:this.decodeEventLog(e,t.data,t.topics)})}parseError(t){const e=u(t);let n=this.getError(e.substring(0,10).toLowerCase());if(!n){return null}return new $e({args:this._abiCoder.decode(n.inputs,"0x"+e.substring(10)),errorFragment:n,name:n.name,signature:n.format(),sighash:this.getSighash(n)})}static isInterface(t){return!!(t&&t._isInterface)}}const sn="abstract-provider/5.7.0";var on=undefined&&undefined.__awaiter||function(t,e,n,i){function r(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,s){function o(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i["throw"](t))}catch(t){s(t)}}function l(t){t.done?n(t.value):r(t.value).then(o,a)}l((i=i.apply(t,e||[])).next())}))};const an=new i(sn);class ln extends w{static isForkEvent(t){return!!(t&&t._isForkEvent)}}class un{constructor(){an.checkAbstract(new.target,un);s(this,"_isProvider",true)}getFeeData(){return on(this,void 0,void 0,(function*(){const{block:t,gasPrice:e}=yield x({block:this.getBlock("latest"),gasPrice:this.getGasPrice().catch((t=>null))});let n=null,i=null,s=null;if(t&&t.baseFeePerGas){n=t.baseFeePerGas;s=r.from("1500000000");i=t.baseFeePerGas.mul(2).add(s)}return{lastBaseFeePerGas:n,maxFeePerGas:i,maxPriorityFeePerGas:s,gasPrice:e}}))}addListener(t,e){return this.on(t,e)}removeListener(t,e){return this.off(t,e)}static isProvider(t){return!!(t&&t._isProvider)}}const cn="abstract-signer/5.7.0";var fn=undefined&&undefined.__awaiter||function(t,e,n,i){function r(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,s){function o(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i["throw"](t))}catch(t){s(t)}}function l(t){t.done?n(t.value):r(t.value).then(o,a)}l((i=i.apply(t,e||[])).next())}))};const hn=new i(cn);const dn=["accessList","ccipReadEnabled","chainId","customData","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"];const gn=[i.errors.INSUFFICIENT_FUNDS,i.errors.NONCE_EXPIRED,i.errors.REPLACEMENT_UNDERPRICED];class pn{constructor(){hn.checkAbstract(new.target,pn);s(this,"_isSigner",true)}getBalance(t){return fn(this,void 0,void 0,(function*(){this._checkProvider("getBalance");return yield this.provider.getBalance(this.getAddress(),t)}))}getTransactionCount(t){return fn(this,void 0,void 0,(function*(){this._checkProvider("getTransactionCount");return yield this.provider.getTransactionCount(this.getAddress(),t)}))}estimateGas(t){return fn(this,void 0,void 0,(function*(){this._checkProvider("estimateGas");const e=yield x(this.checkTransaction(t));return yield this.provider.estimateGas(e)}))}call(t,e){return fn(this,void 0,void 0,(function*(){this._checkProvider("call");const n=yield x(this.checkTransaction(t));return yield this.provider.call(n,e)}))}sendTransaction(t){return fn(this,void 0,void 0,(function*(){this._checkProvider("sendTransaction");const e=yield this.populateTransaction(t);const n=yield this.signTransaction(e);return yield this.provider.sendTransaction(n)}))}getChainId(){return fn(this,void 0,void 0,(function*(){this._checkProvider("getChainId");const t=yield this.provider.getNetwork();return t.chainId}))}getGasPrice(){return fn(this,void 0,void 0,(function*(){this._checkProvider("getGasPrice");return yield this.provider.getGasPrice()}))}getFeeData(){return fn(this,void 0,void 0,(function*(){this._checkProvider("getFeeData");return yield this.provider.getFeeData()}))}resolveName(t){return fn(this,void 0,void 0,(function*(){this._checkProvider("resolveName");return yield this.provider.resolveName(t)}))}checkTransaction(t){for(const e in t){if(dn.indexOf(e)===-1){hn.throwArgumentError("invalid transaction key: "+e,"transaction",t)}}const e=y(t);if(e.from==null){e.from=this.getAddress()}else{e.from=Promise.all([Promise.resolve(e.from),this.getAddress()]).then((e=>{if(e[0].toLowerCase()!==e[1].toLowerCase()){hn.throwArgumentError("from address mismatch","transaction",t)}return e[0]}))}return e}populateTransaction(t){return fn(this,void 0,void 0,(function*(){const e=yield x(this.checkTransaction(t));if(e.to!=null){e.to=Promise.resolve(e.to).then((t=>fn(this,void 0,void 0,(function*(){if(t==null){return null}const e=yield this.resolveName(t);if(e==null){hn.throwArgumentError("provided ENS name resolves to null","tx.to",t)}return e}))));e.to.catch((t=>{}))}const n=e.maxFeePerGas!=null||e.maxPriorityFeePerGas!=null;if(e.gasPrice!=null&&(e.type===2||n)){hn.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",t)}else if((e.type===0||e.type===1)&&n){hn.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",t)}if((e.type===2||e.type==null)&&(e.maxFeePerGas!=null&&e.maxPriorityFeePerGas!=null)){e.type=2}else if(e.type===0||e.type===1){if(e.gasPrice==null){e.gasPrice=this.getGasPrice()}}else{const t=yield this.getFeeData();if(e.type==null){if(t.maxFeePerGas!=null&&t.maxPriorityFeePerGas!=null){e.type=2;if(e.gasPrice!=null){const t=e.gasPrice;delete e.gasPrice;e.maxFeePerGas=t;e.maxPriorityFeePerGas=t}else{if(e.maxFeePerGas==null){e.maxFeePerGas=t.maxFeePerGas}if(e.maxPriorityFeePerGas==null){e.maxPriorityFeePerGas=t.maxPriorityFeePerGas}}}else if(t.gasPrice!=null){if(n){hn.throwError("network does not support EIP-1559",i.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"})}if(e.gasPrice==null){e.gasPrice=t.gasPrice}e.type=0}else{hn.throwError("failed to get consistent fee data",i.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"})}}else if(e.type===2){if(e.maxFeePerGas==null){e.maxFeePerGas=t.maxFeePerGas}if(e.maxPriorityFeePerGas==null){e.maxPriorityFeePerGas=t.maxPriorityFeePerGas}}}if(e.nonce==null){e.nonce=this.getTransactionCount("pending")}if(e.gasLimit==null){e.gasLimit=this.estimateGas(e).catch((t=>{if(gn.indexOf(t.code)>=0){throw t}return hn.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",i.errors.UNPREDICTABLE_GAS_LIMIT,{error:t,tx:e})}))}if(e.chainId==null){e.chainId=this.getChainId()}else{e.chainId=Promise.all([Promise.resolve(e.chainId),this.getChainId()]).then((e=>{if(e[1]!==0&&e[0]!==e[1]){hn.throwArgumentError("chainId address mismatch","transaction",t)}return e[0]}))}return yield x(e)}))}_checkProvider(t){if(!this.provider){hn.throwError("missing provider",i.errors.UNSUPPORTED_OPERATION,{operation:t||"_checkProvider"})}}static isSigner(t){return!!(t&&t._isSigner)}}class An extends pn{constructor(t,e){super();s(this,"address",t);s(this,"provider",e||null)}getAddress(){return Promise.resolve(this.address)}_fail(t,e){return Promise.resolve().then((()=>{hn.throwError(t,i.errors.UNSUPPORTED_OPERATION,{operation:e})}))}signMessage(t){return this._fail("VoidSigner cannot sign messages","signMessage")}signTransaction(t){return this._fail("VoidSigner cannot sign transactions","signTransaction")}_signTypedData(t,e,n){return this._fail("VoidSigner cannot sign typed data","signTypedData")}connect(t){return new An(this.address,t)}}const mn="contracts/5.7.0";var yn=undefined&&undefined.__awaiter||function(t,e,n,i){function r(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,s){function o(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i["throw"](t))}catch(t){s(t)}}function l(t){t.done?n(t.value):r(t.value).then(o,a)}l((i=i.apply(t,e||[])).next())}))};const vn=new i(mn);function wn(t,e){return yn(this,void 0,void 0,(function*(){const n=yield e;if(typeof n!=="string"){vn.throwArgumentError("invalid address or ENS name","name",n)}try{return c(n)}catch(t){}if(!t){vn.throwError("a provider or signer is needed to resolve ENS names",i.errors.UNSUPPORTED_OPERATION,{operation:"resolveName"})}const r=yield t.resolveName(n);if(r==null){vn.throwArgumentError("resolver or addr is not configured for ENS name","name",n)}return r}))}function bn(t,e,n){return yn(this,void 0,void 0,(function*(){if(Array.isArray(n)){return yield Promise.all(n.map(((n,i)=>bn(t,Array.isArray(e)?e[i]:e[n.name],n))))}if(n.type==="address"){return yield wn(t,e)}if(n.type==="tuple"){return yield bn(t,e,n.components)}if(n.baseType==="array"){if(!Array.isArray(e)){return Promise.reject(vn.makeError("invalid value for array",i.errors.INVALID_ARGUMENT,{argument:"value",value:e}))}return yield Promise.all(e.map((e=>bn(t,e,n.arrayChildren))))}return e}))}function kn(t,e,n){return yn(this,void 0,void 0,(function*(){let s={};if(n.length===e.inputs.length+1&&typeof n[n.length-1]==="object"){s=y(n.pop())}vn.checkArgumentCount(n.length,e.inputs.length,"passed to contract");if(t.signer){if(s.from){s.from=x({override:wn(t.signer,s.from),signer:t.signer.getAddress()}).then((t=>yn(this,void 0,void 0,(function*(){if(c(t.signer)!==t.override){vn.throwError("Contract with a Signer cannot override from",i.errors.UNSUPPORTED_OPERATION,{operation:"overrides.from"})}return t.override}))))}else{s.from=t.signer.getAddress()}}else if(s.from){s.from=wn(t.provider,s.from)}const o=yield x({args:bn(t.signer||t.provider,n,e.inputs),address:t.resolvedAddress,overrides:x(s)||{}});const a=t.interface.encodeFunctionData(e,o.args);const u={data:a,to:o.address};const f=o.overrides;if(f.nonce!=null){u.nonce=r.from(f.nonce).toNumber()}if(f.gasLimit!=null){u.gasLimit=r.from(f.gasLimit)}if(f.gasPrice!=null){u.gasPrice=r.from(f.gasPrice)}if(f.maxFeePerGas!=null){u.maxFeePerGas=r.from(f.maxFeePerGas)}if(f.maxPriorityFeePerGas!=null){u.maxPriorityFeePerGas=r.from(f.maxPriorityFeePerGas)}if(f.from!=null){u.from=f.from}if(f.type!=null){u.type=f.type}if(f.accessList!=null){u.accessList=C(f.accessList)}if(u.gasLimit==null&&e.gas!=null){let t=21e3;const n=l(a);for(let e=0;e<n.length;e++){t+=4;if(n[e]){t+=64}}u.gasLimit=r.from(e.gas).add(t)}if(f.value){const t=r.from(f.value);if(!t.isZero()&&!e.payable){vn.throwError("non-payable method cannot override value",i.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:s.value})}u.value=t}if(f.customData){u.customData=y(f.customData)}if(f.ccipReadEnabled){u.ccipReadEnabled=!!f.ccipReadEnabled}delete s.nonce;delete s.gasLimit;delete s.gasPrice;delete s.from;delete s.value;delete s.type;delete s.accessList;delete s.maxFeePerGas;delete s.maxPriorityFeePerGas;delete s.customData;delete s.ccipReadEnabled;const h=Object.keys(s).filter((t=>s[t]!=null));if(h.length){vn.throwError(`cannot override ${h.map((t=>JSON.stringify(t))).join(",")}`,i.errors.UNSUPPORTED_OPERATION,{operation:"overrides",overrides:h})}return u}))}function xn(t,e){return function(...n){return kn(t,e,n)}}function Cn(t,e){const n=t.signer||t.provider;return function(...r){return yn(this,void 0,void 0,(function*(){if(!n){vn.throwError("estimate require a provider or signer",i.errors.UNSUPPORTED_OPERATION,{operation:"estimateGas"})}const s=yield kn(t,e,r);return yield n.estimateGas(s)}))}}function Bn(t,e){const n=e.wait.bind(e);e.wait=e=>n(e).then((e=>{e.events=e.logs.map((n=>{let i=m(n);let r=null;try{r=t.interface.parseLog(n)}catch(t){}if(r){i.args=r.args;i.decode=(e,n)=>t.interface.decodeEventLog(r.eventFragment,e,n);i.event=r.name;i.eventSignature=r.signature}i.removeListener=()=>t.provider;i.getBlock=()=>t.provider.getBlock(e.blockHash);i.getTransaction=()=>t.provider.getTransaction(e.transactionHash);i.getTransactionReceipt=()=>Promise.resolve(e);return i}));return e}))}function En(t,e,n){const r=t.signer||t.provider;return function(...s){return yn(this,void 0,void 0,(function*(){let o=undefined;if(s.length===e.inputs.length+1&&typeof s[s.length-1]==="object"){const t=y(s.pop());if(t.blockTag!=null){o=yield t.blockTag}delete t.blockTag;s.push(t)}if(t.deployTransaction!=null){yield t._deployed(o)}const a=yield kn(t,e,s);const l=yield r.call(a,o);try{let i=t.interface.decodeFunctionResult(e,l);if(n&&e.outputs.length===1){i=i[0]}return i}catch(e){if(e.code===i.errors.CALL_EXCEPTION){e.address=t.address;e.args=s;e.transaction=a}throw e}}))}}function Tn(t,e){return function(...n){return yn(this,void 0,void 0,(function*(){if(!t.signer){vn.throwError("sending a transaction requires a signer",i.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction"})}if(t.deployTransaction!=null){yield t._deployed()}const r=yield kn(t,e,n);const s=yield t.signer.sendTransaction(r);Bn(t,s);return s}))}}function In(t,e,n){if(e.constant){return En(t,e,n)}return Tn(t,e)}function Pn(t){if(t.address&&(t.topics==null||t.topics.length===0)){return"*"}return(t.address||"*")+"@"+(t.topics?t.topics.map((t=>{if(Array.isArray(t)){return t.join("|")}return t})).join(":"):"")}class Sn{constructor(t,e){s(this,"tag",t);s(this,"filter",e);this._listeners=[]}addListener(t,e){this._listeners.push({listener:t,once:e})}removeListener(t){let e=false;this._listeners=this._listeners.filter((n=>{if(e||n.listener!==t){return true}e=true;return false}))}removeAllListeners(){this._listeners=[]}listeners(){return this._listeners.map((t=>t.listener))}listenerCount(){return this._listeners.length}run(t){const e=this.listenerCount();this._listeners=this._listeners.filter((e=>{const n=t.slice();setTimeout((()=>{e.listener.apply(this,n)}),0);return!e.once}));return e}prepareEvent(t){}getEmit(t){return[t]}}class Nn extends Sn{constructor(){super("error",null)}}class Dn extends Sn{constructor(t,e,n,i){const r={address:t};let o=e.getEventTopic(n);if(i){if(o!==i[0]){vn.throwArgumentError("topic mismatch","topics",i)}r.topics=i.slice()}else{r.topics=[o]}super(Pn(r),r);s(this,"address",t);s(this,"interface",e);s(this,"fragment",n)}prepareEvent(t){super.prepareEvent(t);t.event=this.fragment.name;t.eventSignature=this.fragment.format();t.decode=(t,e)=>this.interface.decodeEventLog(this.fragment,t,e);try{t.args=this.interface.decodeEventLog(this.fragment,t.data,t.topics)}catch(e){t.args=null;t.decodeError=e}}getEmit(t){const e=lt(t.args);if(e.length){throw e[0].error}const n=(t.args||[]).slice();n.push(t);return n}}class Fn extends Sn{constructor(t,e){super("*",{address:t});s(this,"address",t);s(this,"interface",e)}prepareEvent(t){super.prepareEvent(t);try{const e=this.interface.parseLog(t);t.event=e.name;t.eventSignature=e.signature;t.decode=(t,n)=>this.interface.decodeEventLog(e.eventFragment,t,n);t.args=e.args}catch(t){}}}class On{constructor(t,e,n){s(this,"interface",b(new.target,"getInterface")(e));if(n==null){s(this,"provider",null);s(this,"signer",null)}else if(pn.isSigner(n)){s(this,"provider",n.provider||null);s(this,"signer",n)}else if(un.isProvider(n)){s(this,"provider",n);s(this,"signer",null)}else{vn.throwArgumentError("invalid signer or provider","signerOrProvider",n)}s(this,"callStatic",{});s(this,"estimateGas",{});s(this,"functions",{});s(this,"populateTransaction",{});s(this,"filters",{});{const t={};Object.keys(this.interface.events).forEach((e=>{const n=this.interface.events[e];s(this.filters,e,((...t)=>({address:this.address,topics:this.interface.encodeFilterTopics(n,t)})));if(!t[n.name]){t[n.name]=[]}t[n.name].push(e)}));Object.keys(t).forEach((e=>{const n=t[e];if(n.length===1){s(this.filters,e,this.filters[n[0]])}else{vn.warn(`Duplicate definition of ${e} (${n.join(", ")})`)}}))}s(this,"_runningEvents",{});s(this,"_wrappedEmits",{});if(t==null){vn.throwArgumentError("invalid contract address or ENS name","addressOrName",t)}s(this,"address",t);if(this.provider){s(this,"resolvedAddress",wn(this.provider,t))}else{try{s(this,"resolvedAddress",Promise.resolve(c(t)))}catch(t){vn.throwError("provider is required to use ENS name as contract address",i.errors.UNSUPPORTED_OPERATION,{operation:"new Contract"})}}this.resolvedAddress.catch((t=>{}));const r={};const o={};Object.keys(this.interface.functions).forEach((t=>{const e=this.interface.functions[t];if(o[t]){vn.warn(`Duplicate ABI entry for ${JSON.stringify(t)}`);return}o[t]=true;{const n=e.name;if(!r[`%${n}`]){r[`%${n}`]=[]}r[`%${n}`].push(t)}if(this[t]==null){s(this,t,In(this,e,true))}if(this.functions[t]==null){s(this.functions,t,In(this,e,false))}if(this.callStatic[t]==null){s(this.callStatic,t,En(this,e,true))}if(this.populateTransaction[t]==null){s(this.populateTransaction,t,xn(this,e))}if(this.estimateGas[t]==null){s(this.estimateGas,t,Cn(this,e))}}));Object.keys(r).forEach((t=>{const e=r[t];if(e.length>1){return}t=t.substring(1);const n=e[0];try{if(this[t]==null){s(this,t,this[n])}}catch(t){}if(this.functions[t]==null){s(this.functions,t,this.functions[n])}if(this.callStatic[t]==null){s(this.callStatic,t,this.callStatic[n])}if(this.populateTransaction[t]==null){s(this.populateTransaction,t,this.populateTransaction[n])}if(this.estimateGas[t]==null){s(this.estimateGas,t,this.estimateGas[n])}}))}static getContractAddress(t){return B(t)}static getInterface(t){if(rn.isInterface(t)){return t}return new rn(t)}deployed(){return this._deployed()}_deployed(t){if(!this._deployedPromise){if(this.deployTransaction){this._deployedPromise=this.deployTransaction.wait().then((()=>this))}else{this._deployedPromise=this.provider.getCode(this.address,t).then((t=>{if(t==="0x"){vn.throwError("contract not deployed",i.errors.UNSUPPORTED_OPERATION,{contractAddress:this.address,operation:"getDeployed"})}return this}))}}return this._deployedPromise}fallback(t){if(!this.signer){vn.throwError("sending a transactions require a signer",i.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction(fallback)"})}const e=y(t||{});["from","to"].forEach((function(t){if(e[t]==null){return}vn.throwError("cannot override "+t,i.errors.UNSUPPORTED_OPERATION,{operation:t})}));e.to=this.resolvedAddress;return this.deployed().then((()=>this.signer.sendTransaction(e)))}connect(t){if(typeof t==="string"){t=new An(t,this.provider)}const e=new this.constructor(this.address,this.interface,t);if(this.deployTransaction){s(e,"deployTransaction",this.deployTransaction)}return e}attach(t){return new this.constructor(t,this.interface,this.signer||this.provider)}static isIndexed(t){return tn.isIndexed(t)}_normalizeRunningEvent(t){if(this._runningEvents[t.tag]){return this._runningEvents[t.tag]}return t}_getRunningEvent(t){if(typeof t==="string"){if(t==="error"){return this._normalizeRunningEvent(new Nn)}if(t==="event"){return this._normalizeRunningEvent(new Sn("event",null))}if(t==="*"){return this._normalizeRunningEvent(new Fn(this.address,this.interface))}const e=this.interface.getEvent(t);return this._normalizeRunningEvent(new Dn(this.address,this.interface,e))}if(t.topics&&t.topics.length>0){try{const e=t.topics[0];if(typeof e!=="string"){throw new Error("invalid topic")}const n=this.interface.getEvent(e);return this._normalizeRunningEvent(new Dn(this.address,this.interface,n,t.topics))}catch(t){}const e={address:this.address,topics:t.topics};return this._normalizeRunningEvent(new Sn(Pn(e),e))}return this._normalizeRunningEvent(new Fn(this.address,this.interface))}_checkRunningEvents(t){if(t.listenerCount()===0){delete this._runningEvents[t.tag];const e=this._wrappedEmits[t.tag];if(e&&t.filter){this.provider.off(t.filter,e);delete this._wrappedEmits[t.tag]}}}_wrapEvent(t,e,n){const i=m(e);i.removeListener=()=>{if(!n){return}t.removeListener(n);this._checkRunningEvents(t)};i.getBlock=()=>this.provider.getBlock(e.blockHash);i.getTransaction=()=>this.provider.getTransaction(e.transactionHash);i.getTransactionReceipt=()=>this.provider.getTransactionReceipt(e.transactionHash);t.prepareEvent(i);return i}_addEventListener(t,e,n){if(!this.provider){vn.throwError("events require a provider or a signer with a provider",i.errors.UNSUPPORTED_OPERATION,{operation:"once"})}t.addListener(e,n);this._runningEvents[t.tag]=t;if(!this._wrappedEmits[t.tag]){const n=n=>{let i=this._wrapEvent(t,n,e);if(i.decodeError==null){try{const e=t.getEmit(i);this.emit(t.filter,...e)}catch(t){i.decodeError=t.error}}if(t.filter!=null){this.emit("event",i)}if(i.decodeError!=null){this.emit("error",i.decodeError,i)}};this._wrappedEmits[t.tag]=n;if(t.filter!=null){this.provider.on(t.filter,n)}}}queryFilter(t,e,n){const i=this._getRunningEvent(t);const r=y(i.filter);if(typeof e==="string"&&v(e,32)){if(n!=null){vn.throwArgumentError("cannot specify toBlock with blockhash","toBlock",n)}r.blockHash=e}else{r.fromBlock=e!=null?e:0;r.toBlock=n!=null?n:"latest"}return this.provider.getLogs(r).then((t=>t.map((t=>this._wrapEvent(i,t,null)))))}on(t,e){this._addEventListener(this._getRunningEvent(t),e,false);return this}once(t,e){this._addEventListener(this._getRunningEvent(t),e,true);return this}emit(t,...e){if(!this.provider){return false}const n=this._getRunningEvent(t);const i=n.run(e)>0;this._checkRunningEvents(n);return i}listenerCount(t){if(!this.provider){return 0}if(t==null){return Object.keys(this._runningEvents).reduce(((t,e)=>t+this._runningEvents[e].listenerCount()),0)}return this._getRunningEvent(t).listenerCount()}listeners(t){if(!this.provider){return[]}if(t==null){const t=[];for(let e in this._runningEvents){this._runningEvents[e].listeners().forEach((e=>{t.push(e)}))}return t}return this._getRunningEvent(t).listeners()}removeAllListeners(t){if(!this.provider){return this}if(t==null){for(const t in this._runningEvents){const e=this._runningEvents[t];e.removeAllListeners();this._checkRunningEvents(e)}return this}const e=this._getRunningEvent(t);e.removeAllListeners();this._checkRunningEvents(e);return this}off(t,e){if(!this.provider){return this}const n=this._getRunningEvent(t);n.removeListener(e);this._checkRunningEvents(n);return this}removeListener(t,e){return this.off(t,e)}}class Mn extends On{}class Qn{constructor(t){s(this,"alphabet",t);s(this,"base",t.length);s(this,"_alphabetMap",{});s(this,"_leader",t.charAt(0));for(let e=0;e<t.length;e++){this._alphabetMap[t.charAt(e)]=e}}encode(t){let e=l(t);if(e.length===0){return""}let n=[0];for(let t=0;t<e.length;++t){let i=e[t];for(let t=0;t<n.length;++t){i+=n[t]<<8;n[t]=i%this.base;i=i/this.base|0}while(i>0){n.push(i%this.base);i=i/this.base|0}}let i="";for(let t=0;e[t]===0&&t<e.length-1;++t){i+=this._leader}for(let t=n.length-1;t>=0;--t){i+=this.alphabet[n[t]]}return i}decode(t){if(typeof t!=="string"){throw new TypeError("Expected String")}let e=[];if(t.length===0){return new Uint8Array(e)}e.push(0);for(let n=0;n<t.length;n++){let i=this._alphabetMap[t[n]];if(i===undefined){throw new Error("Non-base"+this.base+" character")}let r=i;for(let t=0;t<e.length;++t){r+=e[t]*this.base;e[t]=r&255;r>>=8}while(r>0){e.push(r&255);r>>=8}}for(let n=0;t[n]===this._leader&&n<t.length-1;++n){e.push(0)}return l(new Uint8Array(e.reverse()))}}new Qn("abcdefghijklmnopqrstuvwxyz234567");const Un=new Qn("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");const Ln="sha2/5.7.0";new i(Ln);function Gn(t){return"0x"+E.sha256().update(l(t)).digest("hex")}const Rn="networks/5.7.1";const Jn=new i(Rn);function Hn(t){return t&&typeof t.renetwork==="function"}function Yn(t){const e=function(e,n){if(n==null){n={}}const i=[];if(e.InfuraProvider&&n.infura!=="-"){try{i.push(new e.InfuraProvider(t,n.infura))}catch(t){}}if(e.EtherscanProvider&&n.etherscan!=="-"){try{i.push(new e.EtherscanProvider(t,n.etherscan))}catch(t){}}if(e.AlchemyProvider&&n.alchemy!=="-"){try{i.push(new e.AlchemyProvider(t,n.alchemy))}catch(t){}}if(e.PocketProvider&&n.pocket!=="-"){const r=["goerli","ropsten","rinkeby","sepolia"];try{const s=new e.PocketProvider(t,n.pocket);if(s.network&&r.indexOf(s.network.name)===-1){i.push(s)}}catch(t){}}if(e.CloudflareProvider&&n.cloudflare!=="-"){try{i.push(new e.CloudflareProvider(t))}catch(t){}}if(e.AnkrProvider&&n.ankr!=="-"){try{const r=["ropsten"];const s=new e.AnkrProvider(t,n.ankr);if(s.network&&r.indexOf(s.network.name)===-1){i.push(s)}}catch(t){}}if(i.length===0){return null}if(e.FallbackProvider){let r=1;if(n.quorum!=null){r=n.quorum}else if(t==="homestead"){r=2}return new e.FallbackProvider(i,r)}return i[0]};e.renetwork=function(t){return Yn(t)};return e}function qn(t,e){const n=function(n,i){if(n.JsonRpcProvider){return new n.JsonRpcProvider(t,e)}return null};n.renetwork=function(e){return qn(t,e)};return n}const Kn={chainId:1,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"homestead",_defaultProvider:Yn("homestead")};const jn={chainId:3,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"ropsten",_defaultProvider:Yn("ropsten")};const zn={chainId:63,name:"classicMordor",_defaultProvider:qn("https://www.ethercluster.com/mordor","classicMordor")};const Wn={unspecified:{chainId:0,name:"unspecified"},homestead:Kn,mainnet:Kn,morden:{chainId:2,name:"morden"},ropsten:jn,testnet:jn,rinkeby:{chainId:4,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"rinkeby",_defaultProvider:Yn("rinkeby")},kovan:{chainId:42,name:"kovan",_defaultProvider:Yn("kovan")},goerli:{chainId:5,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"goerli",_defaultProvider:Yn("goerli")},kintsugi:{chainId:1337702,name:"kintsugi"},sepolia:{chainId:11155111,name:"sepolia",_defaultProvider:Yn("sepolia")},classic:{chainId:61,name:"classic",_defaultProvider:qn("https://www.ethercluster.com/etc","classic")},classicMorden:{chainId:62,name:"classicMorden"},classicMordor:zn,classicTestnet:zn,classicKotti:{chainId:6,name:"classicKotti",_defaultProvider:qn("https://www.ethercluster.com/kotti","classicKotti")},xdai:{chainId:100,name:"xdai"},matic:{chainId:137,name:"matic",_defaultProvider:Yn("matic")},maticmum:{chainId:80001,name:"maticmum"},optimism:{chainId:10,name:"optimism",_defaultProvider:Yn("optimism")},"optimism-kovan":{chainId:69,name:"optimism-kovan"},"optimism-goerli":{chainId:420,name:"optimism-goerli"},arbitrum:{chainId:42161,name:"arbitrum"},"arbitrum-rinkeby":{chainId:421611,name:"arbitrum-rinkeby"},"arbitrum-goerli":{chainId:421613,name:"arbitrum-goerli"},bnb:{chainId:56,name:"bnb"},bnbt:{chainId:97,name:"bnbt"}};function Xn(t){if(t==null){return null}if(typeof t==="number"){for(const e in Wn){const n=Wn[e];if(n.chainId===t){return{name:n.name,chainId:n.chainId,ensAddress:n.ensAddress||null,_defaultProvider:n._defaultProvider||null}}}return{chainId:t,name:"unknown"}}if(typeof t==="string"){const e=Wn[t];if(e==null){return null}return{name:e.name,chainId:e.chainId,ensAddress:e.ensAddress,_defaultProvider:e._defaultProvider||null}}const e=Wn[t.name];if(!e){if(typeof t.chainId!=="number"){Jn.throwArgumentError("invalid network chainId","network",t)}return t}if(t.chainId!==0&&t.chainId!==e.chainId){Jn.throwArgumentError("network chainId mismatch","network",t)}let n=t._defaultProvider||null;if(n==null&&e._defaultProvider){if(Hn(e._defaultProvider)){n=e._defaultProvider.renetwork(t)}else{n=e._defaultProvider}}return{name:t.name,chainId:e.chainId,ensAddress:t.ensAddress||e.ensAddress||null,_defaultProvider:n}}const Vn="web/5.7.1";var Zn=undefined&&undefined.__awaiter||function(t,e,n,i){function r(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,s){function o(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i["throw"](t))}catch(t){s(t)}}function l(t){t.done?n(t.value):r(t.value).then(o,a)}l((i=i.apply(t,e||[])).next())}))};function _n(t,e){return Zn(this,void 0,void 0,(function*(){if(e==null){e={}}const n={method:e.method||"GET",headers:e.headers||{},body:e.body||undefined};if(e.skipFetchSetup!==true){n.mode="cors";n.cache="no-cache";n.credentials="same-origin";n.redirect="follow";n.referrer="client"}if(e.fetchOptions!=null){const t=e.fetchOptions;if(t.mode){n.mode=t.mode}if(t.cache){n.cache=t.cache}if(t.credentials){n.credentials=t.credentials}if(t.redirect){n.redirect=t.redirect}if(t.referrer){n.referrer=t.referrer}}const i=yield fetch(t,n);const r=yield i.arrayBuffer();const s={};if(i.headers.forEach){i.headers.forEach(((t,e)=>{s[e.toLowerCase()]=t}))}else{i.headers.keys().forEach((t=>{s[t.toLowerCase()]=i.headers.get(t)}))}return{headers:s,statusCode:i.status,statusMessage:i.statusText,body:l(new Uint8Array(r))}}))}var $n=undefined&&undefined.__awaiter||function(t,e,n,i){function r(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,s){function o(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i["throw"](t))}catch(t){s(t)}}function l(t){t.done?n(t.value):r(t.value).then(o,a)}l((i=i.apply(t,e||[])).next())}))};const ti=new i(Vn);function ei(t){return new Promise((e=>{setTimeout(e,t)}))}function ni(t,e){if(t==null){return null}if(typeof t==="string"){return t}if(T(t)){if(e&&(e.split("/")[0]==="text"||e.split(";")[0].trim()==="application/json")){try{return Ut(t)}catch(t){}}return u(t)}return t}function ii(t){return Mt(t.replace(/%([0-9a-f][0-9a-f])/gi,((t,e)=>String.fromCharCode(parseInt(e,16)))))}function ri(t,e,n){const r=typeof t==="object"&&t.throttleLimit!=null?t.throttleLimit:12;ti.assertArgument(r>0&&r%1===0,"invalid connection throttle limit","connection.throttleLimit",r);const s=typeof t==="object"?t.throttleCallback:null;const o=typeof t==="object"&&typeof t.throttleSlotInterval==="number"?t.throttleSlotInterval:100;ti.assertArgument(o>0&&o%1===0,"invalid connection throttle slot interval","connection.throttleSlotInterval",o);const a=typeof t==="object"?!!t.errorPassThrough:false;const l={};let u=null;const c={method:"GET"};let f=false;let h=2*60*1e3;if(typeof t==="string"){u=t}else if(typeof t==="object"){if(t==null||t.url==null){ti.throwArgumentError("missing URL","connection.url",t)}u=t.url;if(typeof t.timeout==="number"&&t.timeout>0){h=t.timeout}if(t.headers){for(const e in t.headers){l[e.toLowerCase()]={key:e,value:String(t.headers[e])};if(["if-none-match","if-modified-since"].indexOf(e.toLowerCase())>=0){f=true}}}c.allowGzip=!!t.allowGzip;if(t.user!=null&&t.password!=null){if(u.substring(0,6)!=="https:"&&t.allowInsecureAuthentication!==true){ti.throwError("basic authentication requires a secure https url",i.errors.INVALID_ARGUMENT,{argument:"url",url:u,user:t.user,password:"[REDACTED]"})}const e=t.user+":"+t.password;l["authorization"]={key:"Authorization",value:"Basic "+Xt(Mt(e))}}if(t.skipFetchSetup!=null){c.skipFetchSetup=!!t.skipFetchSetup}if(t.fetchOptions!=null){c.fetchOptions=y(t.fetchOptions)}}const d=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i");const g=u?u.match(d):null;if(g){try{const t={statusCode:200,statusMessage:"OK",headers:{"content-type":g[1]||"text/plain"},body:g[2]?Wt(g[3]):ii(g[3])};let e=t.body;if(n){e=n(t.body,t)}return Promise.resolve(e)}catch(t){ti.throwError("processing response error",i.errors.SERVER_ERROR,{body:ni(g[1],g[2]),error:t,requestBody:null,requestMethod:"GET",url:u})}}if(e){c.method="POST";c.body=e;if(l["content-type"]==null){l["content-type"]={key:"Content-Type",value:"application/octet-stream"}}if(l["content-length"]==null){l["content-length"]={key:"Content-Length",value:String(e.length)}}}const p={};Object.keys(l).forEach((t=>{const e=l[t];p[e.key]=e.value}));c.headers=p;const A=function(){let t=null;const e=new Promise((function(e,n){if(h){t=setTimeout((()=>{if(t==null){return}t=null;n(ti.makeError("timeout",i.errors.TIMEOUT,{requestBody:ni(c.body,p["content-type"]),requestMethod:c.method,timeout:h,url:u}))}),h)}}));const n=function(){if(t==null){return}clearTimeout(t);t=null};return{promise:e,cancel:n}}();const m=function(){return $n(this,void 0,void 0,(function*(){for(let t=0;t<r;t++){let e=null;try{e=yield _n(u,c);if(t<r){if(e.statusCode===301||e.statusCode===302){const t=e.headers.location||"";if(c.method==="GET"&&t.match(/^https:/)){u=e.headers.location;continue}}else if(e.statusCode===429){let n=true;if(s){n=yield s(t,u)}if(n){let n=0;const i=e.headers["retry-after"];if(typeof i==="string"&&i.match(/^[1-9][0-9]*$/)){n=parseInt(i)*1e3}else{n=o*parseInt(String(Math.random()*Math.pow(2,t)))}yield ei(n);continue}}}}catch(t){e=t.response;if(e==null){A.cancel();ti.throwError("missing response",i.errors.SERVER_ERROR,{requestBody:ni(c.body,p["content-type"]),requestMethod:c.method,serverError:t,url:u})}}let l=e.body;if(f&&e.statusCode===304){l=null}else if(!a&&(e.statusCode<200||e.statusCode>=300)){A.cancel();ti.throwError("bad response",i.errors.SERVER_ERROR,{status:e.statusCode,headers:e.headers,body:ni(l,e.headers?e.headers["content-type"]:null),requestBody:ni(c.body,p["content-type"]),requestMethod:c.method,url:u})}if(n){try{const t=yield n(l,e);A.cancel();return t}catch(n){if(n.throttleRetry&&t<r){let e=true;if(s){e=yield s(t,u)}if(e){const e=o*parseInt(String(Math.random()*Math.pow(2,t)));yield ei(e);continue}}A.cancel();ti.throwError("processing response error",i.errors.SERVER_ERROR,{body:ni(l,e.headers?e.headers["content-type"]:null),error:n,requestBody:ni(c.body,p["content-type"]),requestMethod:c.method,url:u})}}A.cancel();return l}return ti.throwError("failed response",i.errors.SERVER_ERROR,{requestBody:ni(c.body,p["content-type"]),requestMethod:c.method,url:u})}))}();return Promise.race([A.promise,m])}function si(t,e,n){let r=(t,e)=>{let r=null;if(t!=null){try{r=JSON.parse(Ut(t))}catch(e){ti.throwError("invalid JSON",i.errors.SERVER_ERROR,{body:t,error:e})}}if(n){r=n(r,e)}return r};let s=null;if(e!=null){s=Mt(e);const n=typeof t==="string"?{url:t}:y(t);if(n.headers){const t=Object.keys(n.headers).filter((t=>t.toLowerCase()==="content-type")).length!==0;if(!t){n.headers=y(n.headers);n.headers["content-type"]="application/json"}}else{n.headers={"content-type":"application/json"}}t=n}return ri(t,s,r)}function oi(t,e){if(!e){e={}}e=y(e);if(e.floor==null){e.floor=0}if(e.ceiling==null){e.ceiling=1e4}if(e.interval==null){e.interval=250}return new Promise((function(n,i){let r=null;let s=false;const o=()=>{if(s){return false}s=true;if(r){clearTimeout(r)}return true};if(e.timeout){r=setTimeout((()=>{if(o()){i(new Error("timeout"))}}),e.timeout)}const a=e.retryLimit;let l=0;function u(){return t().then((function(t){if(t!==undefined){if(o()){n(t)}}else if(e.oncePoll){e.oncePoll.once("poll",u)}else if(e.onceBlock){e.onceBlock.once("block",u)}else if(!s){l++;if(l>a){if(o()){i(new Error("retry limit reached"))}return}let t=e.interval*parseInt(String(Math.random()*Math.pow(2,l)));if(t<e.floor){t=e.floor}if(t>e.ceiling){t=e.ceiling}setTimeout(u,t)}return null}),(function(t){if(o()){i(t)}}))}u()}))}var ai="qpzry9x8gf2tvdw0s3jn54khce6mua7l";var li={};for(var ui=0;ui<ai.length;ui++){var ci=ai.charAt(ui);if(li[ci]!==undefined)throw new TypeError(ci+" is ambiguous");li[ci]=ui}function fi(t){var e=t>>25;return(t&33554431)<<5^-(e>>0&1)&996825010^-(e>>1&1)&642813549^-(e>>2&1)&513874426^-(e>>3&1)&1027748829^-(e>>4&1)&705979059}function hi(t){var e=1;for(var n=0;n<t.length;++n){var i=t.charCodeAt(n);if(i<33||i>126)return"Invalid prefix ("+t+")";e=fi(e)^i>>5}e=fi(e);for(n=0;n<t.length;++n){var r=t.charCodeAt(n);e=fi(e)^r&31}return e}function di(t,e,n){n=n||90;if(t.length+7+e.length>n)throw new TypeError("Exceeds length limit");t=t.toLowerCase();var i=hi(t);if(typeof i==="string")throw new Error(i);var r=t+"1";for(var s=0;s<e.length;++s){var o=e[s];if(o>>5!==0)throw new Error("Non 5-bit word");i=fi(i)^o;r+=ai.charAt(o)}for(s=0;s<6;++s){i=fi(i)}i^=1;for(s=0;s<6;++s){var a=i>>(5-s)*5&31;r+=ai.charAt(a)}return r}function gi(t,e){e=e||90;if(t.length<8)return t+" too short";if(t.length>e)return"Exceeds length limit";var n=t.toLowerCase();var i=t.toUpperCase();if(t!==n&&t!==i)return"Mixed-case string "+t;t=n;var r=t.lastIndexOf("1");if(r===-1)return"No separator character for "+t;if(r===0)return"Missing prefix for "+t;var s=t.slice(0,r);var o=t.slice(r+1);if(o.length<6)return"Data too short";var a=hi(s);if(typeof a==="string")return a;var l=[];for(var u=0;u<o.length;++u){var c=o.charAt(u);var f=li[c];if(f===undefined)return"Unknown character "+c;a=fi(a)^f;if(u+6>=o.length)continue;l.push(f)}if(a!==1)return"Invalid checksum for "+t;return{prefix:s,words:l}}function pi(){var t=gi.apply(null,arguments);if(typeof t==="object")return t}function Ai(t){var e=gi.apply(null,arguments);if(typeof e==="object")return e;throw new Error(e)}function mi(t,e,n,i){var r=0;var s=0;var o=(1<<n)-1;var a=[];for(var l=0;l<t.length;++l){r=r<<e|t[l];s+=e;while(s>=n){s-=n;a.push(r>>s&o)}}if(i){if(s>0){a.push(r<<n-s&o)}}else{if(s>=e)return"Excess padding";if(r<<n-s&o)return"Non-zero padding"}return a}function yi(t){var e=mi(t,8,5,true);if(Array.isArray(e))return e}function vi(t){var e=mi(t,8,5,true);if(Array.isArray(e))return e;throw new Error(e)}function wi(t){var e=mi(t,5,8,false);if(Array.isArray(e))return e}function bi(t){var e=mi(t,5,8,false);if(Array.isArray(e))return e;throw new Error(e)}var ki={decodeUnsafe:pi,decode:Ai,encode:di,toWordsUnsafe:yi,toWords:vi,fromWordsUnsafe:wi,fromWords:bi};const xi="providers/5.7.2";const Ci=new i(xi);class Bi{constructor(){this.formats=this.getDefaultFormats()}getDefaultFormats(){const t={};const e=this.address.bind(this);const n=this.bigNumber.bind(this);const i=this.blockTag.bind(this);const r=this.data.bind(this);const s=this.hash.bind(this);const o=this.hex.bind(this);const a=this.number.bind(this);const l=this.type.bind(this);const u=t=>this.data(t,true);t.transaction={hash:s,type:l,accessList:Bi.allowNull(this.accessList.bind(this),null),blockHash:Bi.allowNull(s,null),blockNumber:Bi.allowNull(a,null),transactionIndex:Bi.allowNull(a,null),confirmations:Bi.allowNull(a,null),from:e,gasPrice:Bi.allowNull(n),maxPriorityFeePerGas:Bi.allowNull(n),maxFeePerGas:Bi.allowNull(n),gasLimit:n,to:Bi.allowNull(e,null),value:n,nonce:a,data:r,r:Bi.allowNull(this.uint256),s:Bi.allowNull(this.uint256),v:Bi.allowNull(a),creates:Bi.allowNull(e,null),raw:Bi.allowNull(r)};t.transactionRequest={from:Bi.allowNull(e),nonce:Bi.allowNull(a),gasLimit:Bi.allowNull(n),gasPrice:Bi.allowNull(n),maxPriorityFeePerGas:Bi.allowNull(n),maxFeePerGas:Bi.allowNull(n),to:Bi.allowNull(e),value:Bi.allowNull(n),data:Bi.allowNull(u),type:Bi.allowNull(a),accessList:Bi.allowNull(this.accessList.bind(this),null)};t.receiptLog={transactionIndex:a,blockNumber:a,transactionHash:s,address:e,topics:Bi.arrayOf(s),data:r,logIndex:a,blockHash:s};t.receipt={to:Bi.allowNull(this.address,null),from:Bi.allowNull(this.address,null),contractAddress:Bi.allowNull(e,null),transactionIndex:a,root:Bi.allowNull(o),gasUsed:n,logsBloom:Bi.allowNull(r),blockHash:s,transactionHash:s,logs:Bi.arrayOf(this.receiptLog.bind(this)),blockNumber:a,confirmations:Bi.allowNull(a,null),cumulativeGasUsed:n,effectiveGasPrice:Bi.allowNull(n),status:Bi.allowNull(a),type:l};t.block={hash:Bi.allowNull(s),parentHash:s,number:a,timestamp:a,nonce:Bi.allowNull(o),difficulty:this.difficulty.bind(this),gasLimit:n,gasUsed:n,miner:Bi.allowNull(e),extraData:r,transactions:Bi.allowNull(Bi.arrayOf(s)),baseFeePerGas:Bi.allowNull(n)};t.blockWithTransactions=y(t.block);t.blockWithTransactions.transactions=Bi.allowNull(Bi.arrayOf(this.transactionResponse.bind(this)));t.filter={fromBlock:Bi.allowNull(i,undefined),toBlock:Bi.allowNull(i,undefined),blockHash:Bi.allowNull(s,undefined),address:Bi.allowNull(e,undefined),topics:Bi.allowNull(this.topics.bind(this),undefined)};t.filterLog={blockNumber:Bi.allowNull(a),blockHash:Bi.allowNull(s),transactionIndex:a,removed:Bi.allowNull(this.boolean.bind(this)),address:e,data:Bi.allowFalsish(r,"0x"),topics:Bi.arrayOf(s),transactionHash:s,logIndex:a};return t}accessList(t){return C(t||[])}number(t){if(t==="0x"){return 0}return r.from(t).toNumber()}type(t){if(t==="0x"||t==null){return 0}return r.from(t).toNumber()}bigNumber(t){return r.from(t)}boolean(t){if(typeof t==="boolean"){return t}if(typeof t==="string"){t=t.toLowerCase();if(t==="true"){return true}if(t==="false"){return false}}throw new Error("invalid boolean - "+t)}hex(t,e){if(typeof t==="string"){if(!e&&t.substring(0,2)!=="0x"){t="0x"+t}if(v(t)){return t.toLowerCase()}}return Ci.throwArgumentError("invalid hash","value",t)}data(t,e){const n=this.hex(t,e);if(n.length%2!==0){throw new Error("invalid data; odd-length - "+t)}return n}address(t){return c(t)}callAddress(t){if(!v(t,32)){return null}const e=c(k(t,12));return e===xt?null:e}contractAddress(t){return B(t)}blockTag(t){if(t==null){return"latest"}if(t==="earliest"){return"0x0"}switch(t){case"earliest":return"0x0";case"latest":case"pending":case"safe":case"finalized":return t}if(typeof t==="number"||v(t)){return I(t)}throw new Error("invalid blockTag")}hash(t,e){const n=this.hex(t,e);if(P(n)!==32){return Ci.throwArgumentError("invalid hash","value",t)}return n}difficulty(t){if(t==null){return null}const e=r.from(t);try{return e.toNumber()}catch(t){}return null}uint256(t){if(!v(t)){throw new Error("invalid uint256")}return f(t,32)}_block(t,e){if(t.author!=null&&t.miner==null){t.miner=t.author}const n=t._difficulty!=null?t._difficulty:t.difficulty;const i=Bi.check(e,t);i._difficulty=n==null?null:r.from(n);return i}block(t){return this._block(t,this.formats.block)}blockWithTransactions(t){return this._block(t,this.formats.blockWithTransactions)}transactionRequest(t){return Bi.check(this.formats.transactionRequest,t)}transactionResponse(t){if(t.gas!=null&&t.gasLimit==null){t.gasLimit=t.gas}if(t.to&&r.from(t.to).isZero()){t.to="0x0000000000000000000000000000000000000000"}if(t.input!=null&&t.data==null){t.data=t.input}if(t.to==null&&t.creates==null){t.creates=this.contractAddress(t)}if((t.type===1||t.type===2)&&t.accessList==null){t.accessList=[]}const e=Bi.check(this.formats.transaction,t);if(t.chainId!=null){let n=t.chainId;if(v(n)){n=r.from(n).toNumber()}e.chainId=n}else{let n=t.networkId;if(n==null&&e.v==null){n=t.chainId}if(v(n)){n=r.from(n).toNumber()}if(typeof n!=="number"&&e.v!=null){n=(e.v-35)/2;if(n<0){n=0}n=parseInt(n)}if(typeof n!=="number"){n=0}e.chainId=n}if(e.blockHash&&e.blockHash.replace(/0/g,"")==="x"){e.blockHash=null}return e}transaction(t){return S(t)}receiptLog(t){return Bi.check(this.formats.receiptLog,t)}receipt(t){const e=Bi.check(this.formats.receipt,t);if(e.root!=null){if(e.root.length<=4){const t=r.from(e.root).toNumber();if(t===0||t===1){if(e.status!=null&&e.status!==t){Ci.throwArgumentError("alt-root-status/status mismatch","value",{root:e.root,status:e.status})}e.status=t;delete e.root}else{Ci.throwArgumentError("invalid alt-root-status","value.root",e.root)}}else if(e.root.length!==66){Ci.throwArgumentError("invalid root hash","value.root",e.root)}}if(e.status!=null){e.byzantium=true}return e}topics(t){if(Array.isArray(t)){return t.map((t=>this.topics(t)))}else if(t!=null){return this.hash(t,true)}return null}filter(t){return Bi.check(this.formats.filter,t)}filterLog(t){return Bi.check(this.formats.filterLog,t)}static check(t,e){const n={};for(const i in t){try{const r=t[i](e[i]);if(r!==undefined){n[i]=r}}catch(t){t.checkKey=i;t.checkValue=e[i];throw t}}return n}static allowNull(t,e){return function(n){if(n==null){return e}return t(n)}}static allowFalsish(t,e){return function(n){if(!n){return e}return t(n)}}static arrayOf(t){return function(e){if(!Array.isArray(e)){throw new Error("not an array")}const n=[];e.forEach((function(e){n.push(t(e))}));return n}}}var Ei=undefined&&undefined.__awaiter||function(t,e,n,i){function r(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,s){function o(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i["throw"](t))}catch(t){s(t)}}function l(t){t.done?n(t.value):r(t.value).then(o,a)}l((i=i.apply(t,e||[])).next())}))};const Ti=new i(xi);const Ii=10;function Pi(t){if(t==null){return"null"}if(P(t)!==32){Ti.throwArgumentError("invalid topic","topic",t)}return t.toLowerCase()}function Si(t){t=t.slice();while(t.length>0&&t[t.length-1]==null){t.pop()}return t.map((t=>{if(Array.isArray(t)){const e={};t.forEach((t=>{e[Pi(t)]=true}));const n=Object.keys(e);n.sort();return n.join("|")}else{return Pi(t)}})).join("&")}function Ni(t){if(t===""){return[]}return t.split(/&/g).map((t=>{if(t===""){return[]}const e=t.split("|").map((t=>t==="null"?null:t));return e.length===1?e[0]:e}))}function Di(t){if(typeof t==="string"){t=t.toLowerCase();if(P(t)===32){return"tx:"+t}if(t.indexOf(":")===-1){return t}}else if(Array.isArray(t)){return"filter:*:"+Si(t)}else if(ln.isForkEvent(t)){Ti.warn("not implemented");throw new Error("not implemented")}else if(t&&typeof t==="object"){return"filter:"+(t.address||"*")+":"+Si(t.topics||[])}throw new Error("invalid event - "+t)}function Fi(){return(new Date).getTime()}function Oi(t){return new Promise((e=>{setTimeout(e,t)}))}const Mi=["block","network","pending","poll"];class Qi{constructor(t,e,n){s(this,"tag",t);s(this,"listener",e);s(this,"once",n);this._lastBlockNumber=-2;this._inflight=false}get event(){switch(this.type){case"tx":return this.hash;case"filter":return this.filter}return this.tag}get type(){return this.tag.split(":")[0]}get hash(){const t=this.tag.split(":");if(t[0]!=="tx"){return null}return t[1]}get filter(){const t=this.tag.split(":");if(t[0]!=="filter"){return null}const e=t[1];const n=Ni(t[2]);const i={};if(n.length>0){i.topics=n}if(e&&e!=="*"){i.address=e}return i}pollable(){return this.tag.indexOf(":")>=0||Mi.indexOf(this.tag)>=0}}const Ui={0:{symbol:"btc",p2pkh:0,p2sh:5,prefix:"bc"},2:{symbol:"ltc",p2pkh:48,p2sh:50,prefix:"ltc"},3:{symbol:"doge",p2pkh:30,p2sh:22},60:{symbol:"eth",ilk:"eth"},61:{symbol:"etc",ilk:"eth"},700:{symbol:"xdai",ilk:"eth"}};function Li(t){return f(r.from(t).toHexString(),32)}function Gi(t){return Un.encode(a([t,k(Gn(Gn(t)),0,4)]))}const Ri=new RegExp("^(ipfs)://(.*)$","i");const Ji=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),Ri,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];function Hi(t,e){try{return Ut(Yi(t,e))}catch(t){}return null}function Yi(t,e){if(t==="0x"){return null}const n=r.from(k(t,e,e+32)).toNumber();const i=r.from(k(t,n,n+32)).toNumber();return k(t,n+32,n+32+i)}function qi(t){if(t.match(/^ipfs:\/\/ipfs\//i)){t=t.substring(12)}else if(t.match(/^ipfs:\/\//i)){t=t.substring(7)}else{Ti.throwArgumentError("unsupported IPFS format","link",t)}return`https://gateway.ipfs.io/ipfs/${t}`}function Ki(t){const e=l(t);if(e.length>32){throw new Error("internal; should not happen")}const n=new Uint8Array(32);n.set(e,32-e.length);return n}function ji(t){if(t.length%32===0){return t}const e=new Uint8Array(Math.ceil(t.length/32)*32);e.set(t);return e}function zi(t){const e=[];let n=0;for(let i=0;i<t.length;i++){e.push(null);n+=32}for(let i=0;i<t.length;i++){const r=l(t[i]);e[i]=Ki(n);e.push(Ki(r.length));e.push(ji(r));n+=32+Math.ceil(r.length/32)*32}return o(e)}class Wi{constructor(t,e,n,i){s(this,"provider",t);s(this,"name",n);s(this,"address",t.formatter.address(e));s(this,"_resolvedAddress",i)}supportsWildcard(){if(!this._supportsEip2544){this._supportsEip2544=this.provider.call({to:this.address,data:"0x01ffc9a79061b92300000000000000000000000000000000000000000000000000000000"}).then((t=>r.from(t).eq(1))).catch((t=>{if(t.code===i.errors.CALL_EXCEPTION){return false}this._supportsEip2544=null;throw t}))}return this._supportsEip2544}_fetch(t,e){return Ei(this,void 0,void 0,(function*(){const n={to:this.address,ccipReadEnabled:true,data:o([t,Ne(this.name),e||"0x"])};let r=false;if(yield this.supportsWildcard()){r=true;n.data=o(["0x9061b923",zi([De(this.name),n.data])])}try{let t=yield this.provider.call(n);if(l(t).length%32===4){Ti.throwError("resolver threw error",i.errors.CALL_EXCEPTION,{transaction:n,data:t})}if(r){t=Yi(t,0)}return t}catch(t){if(t.code===i.errors.CALL_EXCEPTION){return null}throw t}}))}_fetchBytes(t,e){return Ei(this,void 0,void 0,(function*(){const n=yield this._fetch(t,e);if(n!=null){return Yi(n,0)}return null}))}_getAddress(t,e){const n=Ui[String(t)];if(n==null){Ti.throwError(`unsupported coin type: ${t}`,i.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${t})`})}if(n.ilk==="eth"){return this.provider.formatter.address(e)}const r=l(e);if(n.p2pkh!=null){const t=e.match(/^0x76a9([0-9a-f][0-9a-f])([0-9a-f]*)88ac$/);if(t){const e=parseInt(t[1],16);if(t[2].length===e*2&&e>=1&&e<=75){return Gi(a([[n.p2pkh],"0x"+t[2]]))}}}if(n.p2sh!=null){const t=e.match(/^0xa9([0-9a-f][0-9a-f])([0-9a-f]*)87$/);if(t){const e=parseInt(t[1],16);if(t[2].length===e*2&&e>=1&&e<=75){return Gi(a([[n.p2sh],"0x"+t[2]]))}}}if(n.prefix!=null){const t=r[1];let e=r[0];if(e===0){if(t!==20&&t!==32){e=-1}}else{e=-1}if(e>=0&&r.length===2+t&&t>=1&&t<=75){const t=ki.toWords(r.slice(2));t.unshift(e);return ki.encode(n.prefix,t)}}return null}getAddress(t){return Ei(this,void 0,void 0,(function*(){if(t==null){t=60}if(t===60){try{const t=yield this._fetch("0x3b3b57de");if(t==="0x"||t===Ct){return null}return this.provider.formatter.callAddress(t)}catch(t){if(t.code===i.errors.CALL_EXCEPTION){return null}throw t}}const e=yield this._fetchBytes("0xf1cb7e06",Li(t));if(e==null||e==="0x"){return null}const n=this._getAddress(t,e);if(n==null){Ti.throwError(`invalid or unsupported coin data`,i.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${t})`,coinType:t,data:e})}return n}))}getAvatar(){return Ei(this,void 0,void 0,(function*(){const t=[{type:"name",content:this.name}];try{const e=yield this.getText("avatar");if(e==null){return null}for(let n=0;n<Ji.length;n++){const i=e.match(Ji[n]);if(i==null){continue}const s=i[1].toLowerCase();switch(s){case"https":t.push({type:"url",content:e});return{linkage:t,url:e};case"data":t.push({type:"data",content:e});return{linkage:t,url:e};case"ipfs":t.push({type:"ipfs",content:e});return{linkage:t,url:qi(e)};case"erc721":case"erc1155":{const n=s==="erc721"?"0xc87b56dd":"0x0e89341c";t.push({type:s,content:e});const a=this._resolvedAddress||(yield this.getAddress());const l=(i[2]||"").split("/");if(l.length!==2){return null}const u=yield this.provider.formatter.address(l[0]);const c=f(r.from(l[1]).toHexString(),32);if(s==="erc721"){const e=this.provider.formatter.callAddress(yield this.provider.call({to:u,data:o(["0x6352211e",c])}));if(a!==e){return null}t.push({type:"owner",content:e})}else if(s==="erc1155"){const e=r.from(yield this.provider.call({to:u,data:o(["0x00fdd58e",f(a,32),c])}));if(e.isZero()){return null}t.push({type:"balance",content:e.toString()})}const h={to:this.provider.formatter.address(l[0]),data:o([n,c])};let d=Hi(yield this.provider.call(h),0);if(d==null){return null}t.push({type:"metadata-url-base",content:d});if(s==="erc1155"){d=d.replace("{id}",c.substring(2));t.push({type:"metadata-url-expanded",content:d})}if(d.match(/^ipfs:/i)){d=qi(d)}t.push({type:"metadata-url",content:d});const g=yield si(d);if(!g){return null}t.push({type:"metadata",content:JSON.stringify(g)});let p=g.image;if(typeof p!=="string"){return null}if(p.match(/^(https:\/\/|data:)/i));else{const e=p.match(Ri);if(e==null){return null}t.push({type:"url-ipfs",content:p});p=qi(p)}t.push({type:"url",content:p});return{linkage:t,url:p}}}}}catch(t){}return null}))}getContentHash(){return Ei(this,void 0,void 0,(function*(){const t=yield this._fetchBytes("0xbc1c58d1");if(t==null||t==="0x"){return null}const e=t.match(/^0xe3010170(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(e){const t=parseInt(e[3],16);if(e[4].length===t*2){return"ipfs://"+Un.encode("0x"+e[1])}}const n=t.match(/^0xe5010172(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(n){const t=parseInt(n[3],16);if(n[4].length===t*2){return"ipns://"+Un.encode("0x"+n[1])}}const r=t.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(r){if(r[1].length===32*2){return"bzz://"+r[1]}}const s=t.match(/^0x90b2c605([0-9a-f]*)$/);if(s){if(s[1].length===34*2){const t={"=":"","+":"-","/":"_"};const e=Xt("0x"+s[1]).replace(/[=+\/]/g,(e=>t[e]));return"sia://"+e}}return Ti.throwError(`invalid or unsupported content hash data`,i.errors.UNSUPPORTED_OPERATION,{operation:"getContentHash()",data:t})}))}getText(t){return Ei(this,void 0,void 0,(function*(){let e=Mt(t);e=a([Li(64),Li(e.length),e]);if(e.length%32!==0){e=a([e,f("0x",32-t.length%32)])}const n=yield this._fetchBytes("0x59d1d43c",u(e));if(n==null||n==="0x"){return null}return Ut(n)}))}}let Xi=null;let Vi=1;class Zi extends un{constructor(t){super();this._events=[];this._emitted={block:-2};this.disableCcipRead=false;this.formatter=new.target.getFormatter();s(this,"anyNetwork",t==="any");if(this.anyNetwork){t=this.detectNetwork()}if(t instanceof Promise){this._networkPromise=t;t.catch((t=>{}));this._ready().catch((t=>{}))}else{const e=b(new.target,"getNetwork")(t);if(e){s(this,"_network",e);this.emit("network",e,null)}else{Ti.throwArgumentError("invalid network","network",t)}}this._maxInternalBlockNumber=-1024;this._lastBlockNumber=-2;this._maxFilterBlockRange=10;this._pollingInterval=4e3;this._fastQueryDate=0}_ready(){return Ei(this,void 0,void 0,(function*(){if(this._network==null){let t=null;if(this._networkPromise){try{t=yield this._networkPromise}catch(t){}}if(t==null){t=yield this.detectNetwork()}if(!t){Ti.throwError("no network detected",i.errors.UNKNOWN_ERROR,{})}if(this._network==null){if(this.anyNetwork){this._network=t}else{s(this,"_network",t)}this.emit("network",t,null)}}return this._network}))}get ready(){return oi((()=>this._ready().then((t=>t),(t=>{if(t.code===i.errors.NETWORK_ERROR&&t.event==="noNetwork"){return undefined}throw t}))))}static getFormatter(){if(Xi==null){Xi=new Bi}return Xi}static getNetwork(t){return Xn(t==null?"homestead":t)}ccipReadFetch(t,e,n){return Ei(this,void 0,void 0,(function*(){if(this.disableCcipRead||n.length===0){return null}const r=t.to.toLowerCase();const s=e.toLowerCase();const o=[];for(let t=0;t<n.length;t++){const e=n[t];const a=e.replace("{sender}",r).replace("{data}",s);const l=e.indexOf("{data}")>=0?null:JSON.stringify({data:s,sender:r});const u=yield si({url:a,errorPassThrough:true},l,((t,e)=>{t.status=e.statusCode;return t}));if(u.data){return u.data}const c=u.message||"unknown error";if(u.status>=400&&u.status<500){return Ti.throwError(`response not found during CCIP fetch: ${c}`,i.errors.SERVER_ERROR,{url:e,errorMessage:c})}o.push(c)}return Ti.throwError(`error encountered during CCIP fetch: ${o.map((t=>JSON.stringify(t))).join(", ")}`,i.errors.SERVER_ERROR,{urls:n,errorMessages:o})}))}_getInternalBlockNumber(t){return Ei(this,void 0,void 0,(function*(){yield this._ready();if(t>0){while(this._internalBlockNumber){const e=this._internalBlockNumber;try{const n=yield e;if(Fi()-n.respTime<=t){return n.blockNumber}break}catch(t){if(this._internalBlockNumber===e){break}}}}const e=Fi();const n=x({blockNumber:this.perform("getBlockNumber",{}),networkError:this.getNetwork().then((t=>null),(t=>t))}).then((({blockNumber:t,networkError:i})=>{if(i){if(this._internalBlockNumber===n){this._internalBlockNumber=null}throw i}const s=Fi();t=r.from(t).toNumber();if(t<this._maxInternalBlockNumber){t=this._maxInternalBlockNumber}this._maxInternalBlockNumber=t;this._setFastBlockNumber(t);return{blockNumber:t,reqTime:e,respTime:s}}));this._internalBlockNumber=n;n.catch((t=>{if(this._internalBlockNumber===n){this._internalBlockNumber=null}}));return(yield n).blockNumber}))}poll(){return Ei(this,void 0,void 0,(function*(){const t=Vi++;const e=[];let n=null;try{n=yield this._getInternalBlockNumber(100+this.pollingInterval/2)}catch(t){this.emit("error",t);return}this._setFastBlockNumber(n);this.emit("poll",t,n);if(n===this._lastBlockNumber){this.emit("didPoll",t);return}if(this._emitted.block===-2){this._emitted.block=n-1}if(Math.abs(this._emitted.block-n)>1e3){Ti.warn(`network block skew detected; skipping block events (emitted=${this._emitted.block} blockNumber${n})`);this.emit("error",Ti.makeError("network block skew detected",i.errors.NETWORK_ERROR,{blockNumber:n,event:"blockSkew",previousBlockNumber:this._emitted.block}));this.emit("block",n)}else{for(let t=this._emitted.block+1;t<=n;t++){this.emit("block",t)}}if(this._emitted.block!==n){this._emitted.block=n;Object.keys(this._emitted).forEach((t=>{if(t==="block"){return}const e=this._emitted[t];if(e==="pending"){return}if(n-e>12){delete this._emitted[t]}}))}if(this._lastBlockNumber===-2){this._lastBlockNumber=n-1}this._events.forEach((t=>{switch(t.type){case"tx":{const n=t.hash;let i=this.getTransactionReceipt(n).then((t=>{if(!t||t.blockNumber==null){return null}this._emitted["t:"+n]=t.blockNumber;this.emit(n,t);return null})).catch((t=>{this.emit("error",t)}));e.push(i);break}case"filter":{if(!t._inflight){t._inflight=true;if(t._lastBlockNumber===-2){t._lastBlockNumber=n-1}const i=t.filter;i.fromBlock=t._lastBlockNumber+1;i.toBlock=n;const r=i.toBlock-this._maxFilterBlockRange;if(r>i.fromBlock){i.fromBlock=r}if(i.fromBlock<0){i.fromBlock=0}const s=this.getLogs(i).then((e=>{t._inflight=false;if(e.length===0){return}e.forEach((e=>{if(e.blockNumber>t._lastBlockNumber){t._lastBlockNumber=e.blockNumber}this._emitted["b:"+e.blockHash]=e.blockNumber;this._emitted["t:"+e.transactionHash]=e.blockNumber;this.emit(i,e)}))})).catch((e=>{this.emit("error",e);t._inflight=false}));e.push(s)}break}}}));this._lastBlockNumber=n;Promise.all(e).then((()=>{this.emit("didPoll",t)})).catch((t=>{this.emit("error",t)}));return}))}resetEventsBlock(t){this._lastBlockNumber=t-1;if(this.polling){this.poll()}}get network(){return this._network}detectNetwork(){return Ei(this,void 0,void 0,(function*(){return Ti.throwError("provider does not support network detection",i.errors.UNSUPPORTED_OPERATION,{operation:"provider.detectNetwork"})}))}getNetwork(){return Ei(this,void 0,void 0,(function*(){const t=yield this._ready();const e=yield this.detectNetwork();if(t.chainId!==e.chainId){if(this.anyNetwork){this._network=e;this._lastBlockNumber=-2;this._fastBlockNumber=null;this._fastBlockNumberPromise=null;this._fastQueryDate=0;this._emitted.block=-2;this._maxInternalBlockNumber=-1024;this._internalBlockNumber=null;this.emit("network",e,t);yield Oi(0);return this._network}const n=Ti.makeError("underlying network changed",i.errors.NETWORK_ERROR,{event:"changed",network:t,detectedNetwork:e});this.emit("error",n);throw n}return t}))}get blockNumber(){this._getInternalBlockNumber(100+this.pollingInterval/2).then((t=>{this._setFastBlockNumber(t)}),(t=>{}));return this._fastBlockNumber!=null?this._fastBlockNumber:-1}get polling(){return this._poller!=null}set polling(t){if(t&&!this._poller){this._poller=setInterval((()=>{this.poll()}),this.pollingInterval);if(!this._bootstrapPoll){this._bootstrapPoll=setTimeout((()=>{this.poll();this._bootstrapPoll=setTimeout((()=>{if(!this._poller){this.poll()}this._bootstrapPoll=null}),this.pollingInterval)}),0)}}else if(!t&&this._poller){clearInterval(this._poller);this._poller=null}}get pollingInterval(){return this._pollingInterval}set pollingInterval(t){if(typeof t!=="number"||t<=0||parseInt(String(t))!=t){throw new Error("invalid polling interval")}this._pollingInterval=t;if(this._poller){clearInterval(this._poller);this._poller=setInterval((()=>{this.poll()}),this._pollingInterval)}}_getFastBlockNumber(){const t=Fi();if(t-this._fastQueryDate>2*this._pollingInterval){this._fastQueryDate=t;this._fastBlockNumberPromise=this.getBlockNumber().then((t=>{if(this._fastBlockNumber==null||t>this._fastBlockNumber){this._fastBlockNumber=t}return this._fastBlockNumber}))}return this._fastBlockNumberPromise}_setFastBlockNumber(t){if(this._fastBlockNumber!=null&&t<this._fastBlockNumber){return}this._fastQueryDate=Fi();if(this._fastBlockNumber==null||t>this._fastBlockNumber){this._fastBlockNumber=t;this._fastBlockNumberPromise=Promise.resolve(t)}}waitForTransaction(t,e,n){return Ei(this,void 0,void 0,(function*(){return this._waitForTransaction(t,e==null?1:e,n||0,null)}))}_waitForTransaction(t,e,n,r){return Ei(this,void 0,void 0,(function*(){const s=yield this.getTransactionReceipt(t);if((s?s.confirmations:0)>=e){return s}return new Promise(((s,o)=>{const a=[];let l=false;const u=function(){if(l){return true}l=true;a.forEach((t=>{t()}));return false};const c=t=>{if(t.confirmations<e){return}if(u()){return}s(t)};this.on(t,c);a.push((()=>{this.removeListener(t,c)}));if(r){let n=r.startBlock;let s=null;const c=a=>Ei(this,void 0,void 0,(function*(){if(l){return}yield Oi(1e3);this.getTransactionCount(r.from).then((f=>Ei(this,void 0,void 0,(function*(){if(l){return}if(f<=r.nonce){n=a}else{{const e=yield this.getTransaction(t);if(e&&e.blockNumber!=null){return}}if(s==null){s=n-3;if(s<r.startBlock){s=r.startBlock}}while(s<=a){if(l){return}const n=yield this.getBlockWithTransactions(s);for(let s=0;s<n.transactions.length;s++){const a=n.transactions[s];if(a.hash===t){return}if(a.from===r.from&&a.nonce===r.nonce){if(l){return}const n=yield this.waitForTransaction(a.hash,e);if(u()){return}let s="replaced";if(a.data===r.data&&a.to===r.to&&a.value.eq(r.value)){s="repriced"}else if(a.data==="0x"&&a.from===a.to&&a.value.isZero()){s="cancelled"}o(Ti.makeError("transaction was replaced",i.errors.TRANSACTION_REPLACED,{cancelled:s==="replaced"||s==="cancelled",reason:s,replacement:this._wrapTransaction(a),hash:t,receipt:n}));return}}s++}}if(l){return}this.once("block",c)}))),(t=>{if(l){return}this.once("block",c)}))}));if(l){return}this.once("block",c);a.push((()=>{this.removeListener("block",c)}))}if(typeof n==="number"&&n>0){const t=setTimeout((()=>{if(u()){return}o(Ti.makeError("timeout exceeded",i.errors.TIMEOUT,{timeout:n}))}),n);if(t.unref){t.unref()}a.push((()=>{clearTimeout(t)}))}}))}))}getBlockNumber(){return Ei(this,void 0,void 0,(function*(){return this._getInternalBlockNumber(0)}))}getGasPrice(){return Ei(this,void 0,void 0,(function*(){yield this.getNetwork();const t=yield this.perform("getGasPrice",{});try{return r.from(t)}catch(e){return Ti.throwError("bad result from backend",i.errors.SERVER_ERROR,{method:"getGasPrice",result:t,error:e})}}))}getBalance(t,e){return Ei(this,void 0,void 0,(function*(){yield this.getNetwork();const n=yield x({address:this._getAddress(t),blockTag:this._getBlockTag(e)});const s=yield this.perform("getBalance",n);try{return r.from(s)}catch(t){return Ti.throwError("bad result from backend",i.errors.SERVER_ERROR,{method:"getBalance",params:n,result:s,error:t})}}))}getTransactionCount(t,e){return Ei(this,void 0,void 0,(function*(){yield this.getNetwork();const n=yield x({address:this._getAddress(t),blockTag:this._getBlockTag(e)});const s=yield this.perform("getTransactionCount",n);try{return r.from(s).toNumber()}catch(t){return Ti.throwError("bad result from backend",i.errors.SERVER_ERROR,{method:"getTransactionCount",params:n,result:s,error:t})}}))}getCode(t,e){return Ei(this,void 0,void 0,(function*(){yield this.getNetwork();const n=yield x({address:this._getAddress(t),blockTag:this._getBlockTag(e)});const r=yield this.perform("getCode",n);try{return u(r)}catch(t){return Ti.throwError("bad result from backend",i.errors.SERVER_ERROR,{method:"getCode",params:n,result:r,error:t})}}))}getStorageAt(t,e,n){return Ei(this,void 0,void 0,(function*(){yield this.getNetwork();const r=yield x({address:this._getAddress(t),blockTag:this._getBlockTag(n),position:Promise.resolve(e).then((t=>I(t)))});const s=yield this.perform("getStorageAt",r);try{return u(s)}catch(t){return Ti.throwError("bad result from backend",i.errors.SERVER_ERROR,{method:"getStorageAt",params:r,result:s,error:t})}}))}_wrapTransaction(t,e,n){if(e!=null&&P(e)!==32){throw new Error("invalid response - sendTransaction")}const r=t;if(e!=null&&t.hash!==e){Ti.throwError("Transaction hash mismatch from Provider.sendTransaction.",i.errors.UNKNOWN_ERROR,{expectedHash:t.hash,returnedHash:e})}r.wait=(e,r)=>Ei(this,void 0,void 0,(function*(){if(e==null){e=1}if(r==null){r=0}let s=undefined;if(e!==0&&n!=null){s={data:t.data,from:t.from,nonce:t.nonce,to:t.to,value:t.value,startBlock:n}}const o=yield this._waitForTransaction(t.hash,e,r,s);if(o==null&&e===0){return null}this._emitted["t:"+t.hash]=o.blockNumber;if(o.status===0){Ti.throwError("transaction failed",i.errors.CALL_EXCEPTION,{transactionHash:t.hash,transaction:t,receipt:o})}return o}));return r}sendTransaction(t){return Ei(this,void 0,void 0,(function*(){yield this.getNetwork();const e=yield Promise.resolve(t).then((t=>u(t)));const n=this.formatter.transaction(t);if(n.confirmations==null){n.confirmations=0}const i=yield this._getInternalBlockNumber(100+2*this.pollingInterval);try{const t=yield this.perform("sendTransaction",{signedTransaction:e});return this._wrapTransaction(n,t,i)}catch(t){t.transaction=n;t.transactionHash=n.hash;throw t}}))}_getTransactionRequest(t){return Ei(this,void 0,void 0,(function*(){const e=yield t;const n={};["from","to"].forEach((t=>{if(e[t]==null){return}n[t]=Promise.resolve(e[t]).then((t=>t?this._getAddress(t):null))}));["gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","value"].forEach((t=>{if(e[t]==null){return}n[t]=Promise.resolve(e[t]).then((t=>t?r.from(t):null))}));["type"].forEach((t=>{if(e[t]==null){return}n[t]=Promise.resolve(e[t]).then((t=>t!=null?t:null))}));if(e.accessList){n.accessList=this.formatter.accessList(e.accessList)}["data"].forEach((t=>{if(e[t]==null){return}n[t]=Promise.resolve(e[t]).then((t=>t?u(t):null))}));return this.formatter.transactionRequest(yield x(n))}))}_getFilter(t){return Ei(this,void 0,void 0,(function*(){t=yield t;const e={};if(t.address!=null){e.address=this._getAddress(t.address)}["blockHash","topics"].forEach((n=>{if(t[n]==null){return}e[n]=t[n]}));["fromBlock","toBlock"].forEach((n=>{if(t[n]==null){return}e[n]=this._getBlockTag(t[n])}));return this.formatter.filter(yield x(e))}))}_call(t,e,n){return Ei(this,void 0,void 0,(function*(){if(n>=Ii){Ti.throwError("CCIP read exceeded maximum redirections",i.errors.SERVER_ERROR,{redirects:n,transaction:t})}const s=t.to;const a=yield this.perform("call",{transaction:t,blockTag:e});if(n>=0&&e==="latest"&&s!=null&&a.substring(0,10)==="0x556f1830"&&P(a)%32===4){try{const l=k(a,4);const u=k(l,0,32);if(!r.from(u).eq(s)){Ti.throwError("CCIP Read sender did not match",i.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:t,data:a})}const c=[];const f=r.from(k(l,32,64)).toNumber();const h=r.from(k(l,f,f+32)).toNumber();const d=k(l,f+32);for(let e=0;e<h;e++){const n=Hi(d,e*32);if(n==null){Ti.throwError("CCIP Read contained corrupt URL string",i.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:t,data:a})}c.push(n)}const g=Yi(l,64);if(!r.from(k(l,100,128)).isZero()){Ti.throwError("CCIP Read callback selector included junk",i.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:t,data:a})}const p=k(l,96,100);const A=Yi(l,128);const m=yield this.ccipReadFetch(t,g,c);if(m==null){Ti.throwError("CCIP Read disabled or provided no URLs",i.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:t,data:a})}const y={to:s,data:o([p,zi([m,A])])};return this._call(y,e,n+1)}catch(t){if(t.code===i.errors.SERVER_ERROR){throw t}}}try{return u(a)}catch(n){return Ti.throwError("bad result from backend",i.errors.SERVER_ERROR,{method:"call",params:{transaction:t,blockTag:e},result:a,error:n})}}))}call(t,e){return Ei(this,void 0,void 0,(function*(){yield this.getNetwork();const n=yield x({transaction:this._getTransactionRequest(t),blockTag:this._getBlockTag(e),ccipReadEnabled:Promise.resolve(t.ccipReadEnabled)});return this._call(n.transaction,n.blockTag,n.ccipReadEnabled?0:-1)}))}estimateGas(t){return Ei(this,void 0,void 0,(function*(){yield this.getNetwork();const e=yield x({transaction:this._getTransactionRequest(t)});const n=yield this.perform("estimateGas",e);try{return r.from(n)}catch(t){return Ti.throwError("bad result from backend",i.errors.SERVER_ERROR,{method:"estimateGas",params:e,result:n,error:t})}}))}_getAddress(t){return Ei(this,void 0,void 0,(function*(){t=yield t;if(typeof t!=="string"){Ti.throwArgumentError("invalid address or ENS name","name",t)}const e=yield this.resolveName(t);if(e==null){Ti.throwError("ENS name not configured",i.errors.UNSUPPORTED_OPERATION,{operation:`resolveName(${JSON.stringify(t)})`})}return e}))}_getBlock(t,e){return Ei(this,void 0,void 0,(function*(){yield this.getNetwork();t=yield t;let n=-128;const i={includeTransactions:!!e};if(v(t,32)){i.blockHash=t}else{try{i.blockTag=yield this._getBlockTag(t);if(v(i.blockTag)){n=parseInt(i.blockTag.substring(2),16)}}catch(e){Ti.throwArgumentError("invalid block hash or block tag","blockHashOrBlockTag",t)}}return oi((()=>Ei(this,void 0,void 0,(function*(){const t=yield this.perform("getBlock",i);if(t==null){if(i.blockHash!=null){if(this._emitted["b:"+i.blockHash]==null){return null}}if(i.blockTag!=null){if(n>this._emitted.block){return null}}return undefined}if(e){let e=null;for(let n=0;n<t.transactions.length;n++){const i=t.transactions[n];if(i.blockNumber==null){i.confirmations=0}else if(i.confirmations==null){if(e==null){e=yield this._getInternalBlockNumber(100+2*this.pollingInterval)}let t=e-i.blockNumber+1;if(t<=0){t=1}i.confirmations=t}}const n=this.formatter.blockWithTransactions(t);n.transactions=n.transactions.map((t=>this._wrapTransaction(t)));return n}return this.formatter.block(t)}))),{oncePoll:this})}))}getBlock(t){return this._getBlock(t,false)}getBlockWithTransactions(t){return this._getBlock(t,true)}getTransaction(t){return Ei(this,void 0,void 0,(function*(){yield this.getNetwork();t=yield t;const e={transactionHash:this.formatter.hash(t,true)};return oi((()=>Ei(this,void 0,void 0,(function*(){const n=yield this.perform("getTransaction",e);if(n==null){if(this._emitted["t:"+t]==null){return null}return undefined}const i=this.formatter.transactionResponse(n);if(i.blockNumber==null){i.confirmations=0}else if(i.confirmations==null){const t=yield this._getInternalBlockNumber(100+2*this.pollingInterval);let e=t-i.blockNumber+1;if(e<=0){e=1}i.confirmations=e}return this._wrapTransaction(i)}))),{oncePoll:this})}))}getTransactionReceipt(t){return Ei(this,void 0,void 0,(function*(){yield this.getNetwork();t=yield t;const e={transactionHash:this.formatter.hash(t,true)};return oi((()=>Ei(this,void 0,void 0,(function*(){const n=yield this.perform("getTransactionReceipt",e);if(n==null){if(this._emitted["t:"+t]==null){return null}return undefined}if(n.blockHash==null){return undefined}const i=this.formatter.receipt(n);if(i.blockNumber==null){i.confirmations=0}else if(i.confirmations==null){const t=yield this._getInternalBlockNumber(100+2*this.pollingInterval);let e=t-i.blockNumber+1;if(e<=0){e=1}i.confirmations=e}return i}))),{oncePoll:this})}))}getLogs(t){return Ei(this,void 0,void 0,(function*(){yield this.getNetwork();const e=yield x({filter:this._getFilter(t)});const n=yield this.perform("getLogs",e);n.forEach((t=>{if(t.removed==null){t.removed=false}}));return Bi.arrayOf(this.formatter.filterLog.bind(this.formatter))(n)}))}getEtherPrice(){return Ei(this,void 0,void 0,(function*(){yield this.getNetwork();return this.perform("getEtherPrice",{})}))}_getBlockTag(t){return Ei(this,void 0,void 0,(function*(){t=yield t;if(typeof t==="number"&&t<0){if(t%1){Ti.throwArgumentError("invalid BlockTag","blockTag",t)}let e=yield this._getInternalBlockNumber(100+2*this.pollingInterval);e+=t;if(e<0){e=0}return this.formatter.blockTag(e)}return this.formatter.blockTag(t)}))}getResolver(t){return Ei(this,void 0,void 0,(function*(){let e=t;while(true){if(e===""||e==="."){return null}if(t!=="eth"&&e==="eth"){return null}const n=yield this._getResolver(e,"getResolver");if(n!=null){const i=new Wi(this,n,t);if(e!==t&&!(yield i.supportsWildcard())){return null}return i}e=e.split(".").slice(1).join(".")}}))}_getResolver(t,e){return Ei(this,void 0,void 0,(function*(){if(e==null){e="ENS"}const n=yield this.getNetwork();if(!n.ensAddress){Ti.throwError("network does not support ENS",i.errors.UNSUPPORTED_OPERATION,{operation:e,network:n.name})}try{const e=yield this.call({to:n.ensAddress,data:"0x0178b8bf"+Ne(t).substring(2)});return this.formatter.callAddress(e)}catch(t){}return null}))}resolveName(t){return Ei(this,void 0,void 0,(function*(){t=yield t;try{return Promise.resolve(this.formatter.address(t))}catch(e){if(v(t)){throw e}}if(typeof t!=="string"){Ti.throwArgumentError("invalid ENS name","name",t)}const e=yield this.getResolver(t);if(!e){return null}return yield e.getAddress()}))}lookupAddress(t){return Ei(this,void 0,void 0,(function*(){t=yield t;t=this.formatter.address(t);const e=t.substring(2).toLowerCase()+".addr.reverse";const n=yield this._getResolver(e,"lookupAddress");if(n==null){return null}const i=Hi(yield this.call({to:n,data:"0x691f3431"+Ne(e).substring(2)}),0);const r=yield this.resolveName(i);if(r!=t){return null}return i}))}getAvatar(t){return Ei(this,void 0,void 0,(function*(){let e=null;if(v(t)){const n=this.formatter.address(t);const r=n.substring(2).toLowerCase()+".addr.reverse";const s=yield this._getResolver(r,"getAvatar");if(!s){return null}e=new Wi(this,s,r);try{const t=yield e.getAvatar();if(t){return t.url}}catch(t){if(t.code!==i.errors.CALL_EXCEPTION){throw t}}try{const t=Hi(yield this.call({to:s,data:"0x691f3431"+Ne(r).substring(2)}),0);e=yield this.getResolver(t)}catch(t){if(t.code!==i.errors.CALL_EXCEPTION){throw t}return null}}else{e=yield this.getResolver(t);if(!e){return null}}const n=yield e.getAvatar();if(n==null){return null}return n.url}))}perform(t,e){return Ti.throwError(t+" not implemented",i.errors.NOT_IMPLEMENTED,{operation:t})}_startEvent(t){this.polling=this._events.filter((t=>t.pollable())).length>0}_stopEvent(t){this.polling=this._events.filter((t=>t.pollable())).length>0}_addEventListener(t,e,n){const i=new Qi(Di(t),e,n);this._events.push(i);this._startEvent(i);return this}on(t,e){return this._addEventListener(t,e,false)}once(t,e){return this._addEventListener(t,e,true)}emit(t,...e){let n=false;let i=[];let r=Di(t);this._events=this._events.filter((t=>{if(t.tag!==r){return true}setTimeout((()=>{t.listener.apply(this,e)}),0);n=true;if(t.once){i.push(t);return false}return true}));i.forEach((t=>{this._stopEvent(t)}));return n}listenerCount(t){if(!t){return this._events.length}let e=Di(t);return this._events.filter((t=>t.tag===e)).length}listeners(t){if(t==null){return this._events.map((t=>t.listener))}let e=Di(t);return this._events.filter((t=>t.tag===e)).map((t=>t.listener))}off(t,e){if(e==null){return this.removeAllListeners(t)}const n=[];let i=false;let r=Di(t);this._events=this._events.filter((t=>{if(t.tag!==r||t.listener!=e){return true}if(i){return true}i=true;n.push(t);return false}));n.forEach((t=>{this._stopEvent(t)}));return this}removeAllListeners(t){let e=[];if(t==null){e=this._events;this._events=[]}else{const n=Di(t);this._events=this._events.filter((t=>{if(t.tag!==n){return true}e.push(t);return false}))}e.forEach((t=>{this._stopEvent(t)}));return this}}var _i=undefined&&undefined.__awaiter||function(t,e,n,i){function r(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,s){function o(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i["throw"](t))}catch(t){s(t)}}function l(t){t.done?n(t.value):r(t.value).then(o,a)}l((i=i.apply(t,e||[])).next())}))};const $i=new i(xi);const tr=["call","estimateGas"];function er(t,e){if(t==null){return null}if(typeof t.message==="string"&&t.message.match("reverted")){const n=v(t.data)?t.data:null;if(!e||n){return{message:t.message,data:n}}}if(typeof t==="object"){for(const n in t){const i=er(t[n],e);if(i){return i}}return null}if(typeof t==="string"){try{return er(JSON.parse(t),e)}catch(t){}}return null}function nr(t,e,n){const r=n.transaction||n.signedTransaction;if(t==="call"){const t=er(e,true);if(t){return t.data}$i.throwError("missing revert data in call exception; Transaction reverted without a reason string",i.errors.CALL_EXCEPTION,{data:"0x",transaction:r,error:e})}if(t==="estimateGas"){let n=er(e.body,false);if(n==null){n=er(e,false)}if(n){$i.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",i.errors.UNPREDICTABLE_GAS_LIMIT,{reason:n.message,method:t,transaction:r,error:e})}}let s=e.message;if(e.code===i.errors.SERVER_ERROR&&e.error&&typeof e.error.message==="string"){s=e.error.message}else if(typeof e.body==="string"){s=e.body}else if(typeof e.responseText==="string"){s=e.responseText}s=(s||"").toLowerCase();if(s.match(/insufficient funds|base fee exceeds gas limit|InsufficientFunds/i)){$i.throwError("insufficient funds for intrinsic transaction cost",i.errors.INSUFFICIENT_FUNDS,{error:e,method:t,transaction:r})}if(s.match(/nonce (is )?too low/i)){$i.throwError("nonce has already been used",i.errors.NONCE_EXPIRED,{error:e,method:t,transaction:r})}if(s.match(/replacement transaction underpriced|transaction gas price.*too low/i)){$i.throwError("replacement fee too low",i.errors.REPLACEMENT_UNDERPRICED,{error:e,method:t,transaction:r})}if(s.match(/only replay-protected/i)){$i.throwError("legacy pre-eip-155 transactions not supported",i.errors.UNSUPPORTED_OPERATION,{error:e,method:t,transaction:r})}if(tr.indexOf(t)>=0&&s.match(/gas required exceeds allowance|always failing transaction|execution reverted|revert/)){$i.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",i.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,method:t,transaction:r})}throw e}function ir(t){return new Promise((function(e){setTimeout(e,t)}))}function rr(t){if(t.error){const e=new Error(t.error.message);e.code=t.error.code;e.data=t.error.data;throw e}return t.result}function sr(t){if(t){return t.toLowerCase()}return t}const or={};class ar extends pn{constructor(t,e,n){super();if(t!==or){throw new Error("do not call the JsonRpcSigner constructor directly; use provider.getSigner")}s(this,"provider",e);if(n==null){n=0}if(typeof n==="string"){s(this,"_address",this.provider.formatter.address(n));s(this,"_index",null)}else if(typeof n==="number"){s(this,"_index",n);s(this,"_address",null)}else{$i.throwArgumentError("invalid address or index","addressOrIndex",n)}}connect(t){return $i.throwError("cannot alter JSON-RPC Signer connection",i.errors.UNSUPPORTED_OPERATION,{operation:"connect"})}connectUnchecked(){return new lr(or,this.provider,this._address||this._index)}getAddress(){if(this._address){return Promise.resolve(this._address)}return this.provider.send("eth_accounts",[]).then((t=>{if(t.length<=this._index){$i.throwError("unknown account #"+this._index,i.errors.UNSUPPORTED_OPERATION,{operation:"getAddress"})}return this.provider.formatter.address(t[this._index])}))}sendUncheckedTransaction(t){t=y(t);const e=this.getAddress().then((t=>{if(t){t=t.toLowerCase()}return t}));if(t.gasLimit==null){const n=y(t);n.from=e;t.gasLimit=this.provider.estimateGas(n)}if(t.to!=null){t.to=Promise.resolve(t.to).then((t=>_i(this,void 0,void 0,(function*(){if(t==null){return null}const e=yield this.provider.resolveName(t);if(e==null){$i.throwArgumentError("provided ENS name resolves to null","tx.to",t)}return e}))))}return x({tx:x(t),sender:e}).then((({tx:e,sender:n})=>{if(e.from!=null){if(e.from.toLowerCase()!==n){$i.throwArgumentError("from address mismatch","transaction",t)}}else{e.from=n}const r=this.provider.constructor.hexlifyTransaction(e,{from:true});return this.provider.send("eth_sendTransaction",[r]).then((t=>t),(t=>{if(typeof t.message==="string"&&t.message.match(/user denied/i)){$i.throwError("user rejected transaction",i.errors.ACTION_REJECTED,{action:"sendTransaction",transaction:e})}return nr("sendTransaction",t,r)}))}))}signTransaction(t){return $i.throwError("signing transactions is unsupported",i.errors.UNSUPPORTED_OPERATION,{operation:"signTransaction"})}sendTransaction(t){return _i(this,void 0,void 0,(function*(){const e=yield this.provider._getInternalBlockNumber(100+2*this.provider.pollingInterval);const n=yield this.sendUncheckedTransaction(t);try{return yield oi((()=>_i(this,void 0,void 0,(function*(){const t=yield this.provider.getTransaction(n);if(t===null){return undefined}return this.provider._wrapTransaction(t,n,e)}))),{oncePoll:this.provider})}catch(t){t.transactionHash=n;throw t}}))}signMessage(t){return _i(this,void 0,void 0,(function*(){const e=typeof t==="string"?Mt(t):t;const n=yield this.getAddress();try{return yield this.provider.send("personal_sign",[u(e),n.toLowerCase()])}catch(e){if(typeof e.message==="string"&&e.message.match(/user denied/i)){$i.throwError("user rejected signing",i.errors.ACTION_REJECTED,{action:"signMessage",from:n,messageData:t})}throw e}}))}_legacySignMessage(t){return _i(this,void 0,void 0,(function*(){const e=typeof t==="string"?Mt(t):t;const n=yield this.getAddress();try{return yield this.provider.send("eth_sign",[n.toLowerCase(),u(e)])}catch(e){if(typeof e.message==="string"&&e.message.match(/user denied/i)){$i.throwError("user rejected signing",i.errors.ACTION_REJECTED,{action:"_legacySignMessage",from:n,messageData:t})}throw e}}))}_signTypedData(t,e,n){return _i(this,void 0,void 0,(function*(){const r=yield Xe.resolveNames(t,e,n,(t=>this.provider.resolveName(t)));const s=yield this.getAddress();try{return yield this.provider.send("eth_signTypedData_v4",[s.toLowerCase(),JSON.stringify(Xe.getPayload(r.domain,e,r.value))])}catch(t){if(typeof t.message==="string"&&t.message.match(/user denied/i)){$i.throwError("user rejected signing",i.errors.ACTION_REJECTED,{action:"_signTypedData",from:s,messageData:{domain:r.domain,types:e,value:r.value}})}throw t}}))}unlock(t){return _i(this,void 0,void 0,(function*(){const e=this.provider;const n=yield this.getAddress();return e.send("personal_unlockAccount",[n.toLowerCase(),t,null])}))}}class lr extends ar{sendTransaction(t){return this.sendUncheckedTransaction(t).then((t=>({hash:t,nonce:null,gasLimit:null,gasPrice:null,data:null,value:null,chainId:null,confirmations:0,from:null,wait:e=>this.provider.waitForTransaction(t,e)})))}}const ur={chainId:true,data:true,gasLimit:true,gasPrice:true,nonce:true,to:true,value:true,type:true,accessList:true,maxFeePerGas:true,maxPriorityFeePerGas:true};class cr extends Zi{constructor(t,e){let n=e;if(n==null){n=new Promise(((t,e)=>{setTimeout((()=>{this.detectNetwork().then((e=>{t(e)}),(t=>{e(t)}))}),0)}))}super(n);if(!t){t=b(this.constructor,"defaultUrl")()}if(typeof t==="string"){s(this,"connection",Object.freeze({url:t}))}else{s(this,"connection",Object.freeze(y(t)))}this._nextId=42}get _cache(){if(this._eventLoopCache==null){this._eventLoopCache={}}return this._eventLoopCache}static defaultUrl(){return"http://localhost:8545"}detectNetwork(){if(!this._cache["detectNetwork"]){this._cache["detectNetwork"]=this._uncachedDetectNetwork();setTimeout((()=>{this._cache["detectNetwork"]=null}),0)}return this._cache["detectNetwork"]}_uncachedDetectNetwork(){return _i(this,void 0,void 0,(function*(){yield ir(0);let t=null;try{t=yield this.send("eth_chainId",[])}catch(e){try{t=yield this.send("net_version",[])}catch(t){}}if(t!=null){const e=b(this.constructor,"getNetwork");try{return e(r.from(t).toNumber())}catch(e){return $i.throwError("could not detect network",i.errors.NETWORK_ERROR,{chainId:t,event:"invalidNetwork",serverError:e})}}return $i.throwError("could not detect network",i.errors.NETWORK_ERROR,{event:"noNetwork"})}))}getSigner(t){return new ar(or,this,t)}getUncheckedSigner(t){return this.getSigner(t).connectUnchecked()}listAccounts(){return this.send("eth_accounts",[]).then((t=>t.map((t=>this.formatter.address(t)))))}send(t,e){const n={method:t,params:e,id:this._nextId++,jsonrpc:"2.0"};this.emit("debug",{action:"request",request:m(n),provider:this});const i=["eth_chainId","eth_blockNumber"].indexOf(t)>=0;if(i&&this._cache[t]){return this._cache[t]}const r=si(this.connection,JSON.stringify(n),rr).then((t=>{this.emit("debug",{action:"response",request:n,response:t,provider:this});return t}),(t=>{this.emit("debug",{action:"response",error:t,request:n,provider:this});throw t}));if(i){this._cache[t]=r;setTimeout((()=>{this._cache[t]=null}),0)}return r}prepareRequest(t,e){switch(t){case"getBlockNumber":return["eth_blockNumber",[]];case"getGasPrice":return["eth_gasPrice",[]];case"getBalance":return["eth_getBalance",[sr(e.address),e.blockTag]];case"getTransactionCount":return["eth_getTransactionCount",[sr(e.address),e.blockTag]];case"getCode":return["eth_getCode",[sr(e.address),e.blockTag]];case"getStorageAt":return["eth_getStorageAt",[sr(e.address),f(e.position,32),e.blockTag]];case"sendTransaction":return["eth_sendRawTransaction",[e.signedTransaction]];case"getBlock":if(e.blockTag){return["eth_getBlockByNumber",[e.blockTag,!!e.includeTransactions]]}else if(e.blockHash){return["eth_getBlockByHash",[e.blockHash,!!e.includeTransactions]]}return null;case"getTransaction":return["eth_getTransactionByHash",[e.transactionHash]];case"getTransactionReceipt":return["eth_getTransactionReceipt",[e.transactionHash]];case"call":{const t=b(this.constructor,"hexlifyTransaction");return["eth_call",[t(e.transaction,{from:true}),e.blockTag]]}case"estimateGas":{const t=b(this.constructor,"hexlifyTransaction");return["eth_estimateGas",[t(e.transaction,{from:true})]]}case"getLogs":if(e.filter&&e.filter.address!=null){e.filter.address=sr(e.filter.address)}return["eth_getLogs",[e.filter]]}return null}perform(t,e){return _i(this,void 0,void 0,(function*(){if(t==="call"||t==="estimateGas"){const t=e.transaction;if(t&&t.type!=null&&r.from(t.type).isZero()){if(t.maxFeePerGas==null&&t.maxPriorityFeePerGas==null){const n=yield this.getFeeData();if(n.maxFeePerGas==null&&n.maxPriorityFeePerGas==null){e=y(e);e.transaction=y(t);delete e.transaction.type}}}}const n=this.prepareRequest(t,e);if(n==null){$i.throwError(t+" not implemented",i.errors.NOT_IMPLEMENTED,{operation:t})}try{return yield this.send(n[0],n[1])}catch(n){return nr(t,n,e)}}))}_startEvent(t){if(t.tag==="pending"){this._startPending()}super._startEvent(t)}_startPending(){if(this._pendingFilter!=null){return}const t=this;const e=this.send("eth_newPendingTransactionFilter",[]);this._pendingFilter=e;e.then((function(n){function i(){t.send("eth_getFilterChanges",[n]).then((function(n){if(t._pendingFilter!=e){return null}let i=Promise.resolve();n.forEach((function(e){t._emitted["t:"+e.toLowerCase()]="pending";i=i.then((function(){return t.getTransaction(e).then((function(e){t.emit("pending",e);return null}))}))}));return i.then((function(){return ir(1e3)}))})).then((function(){if(t._pendingFilter!=e){t.send("eth_uninstallFilter",[n]);return}setTimeout((function(){i()}),0);return null})).catch((t=>{}))}i();return n})).catch((t=>{}))}_stopEvent(t){if(t.tag==="pending"&&this.listenerCount("pending")===0){this._pendingFilter=null}super._stopEvent(t)}static hexlifyTransaction(t,e){const n=y(ur);if(e){for(const t in e){if(e[t]){n[t]=true}}}N(t,n);const i={};["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach((function(e){if(t[e]==null){return}const n=I(r.from(t[e]));if(e==="gasLimit"){e="gas"}i[e]=n}));["from","to","data"].forEach((function(e){if(t[e]==null){return}i[e]=u(t[e])}));if(t.accessList){i["accessList"]=C(t.accessList)}return i}}const fr="ethers/5.7.2";new i(fr);class hr{constructor(t,e){this.getWalletEthersProvider=t;this.chainConfig=e}async getEthersProvider(){this.ethersProvider=await this.getWalletEthersProvider();return this.ethersProvider}async signPersonalMessage(t){const e=await this.getEthersProvider();return await e.getSigner().signMessage(t)}async call(t,e,n,i,r){console.log("Call ethereum method. chain "+t+"; contract "+e+"; method "+n+";");const s=await this.getEthersContractInstance(t,e,n,i,r,"view");return await s[n](...i.map((t=>t.value)))}async sendTransaction(t,e,n,i,r,s,o=true,a){console.log("Send ethereum transaction. chain "+t+"; contract "+e+"; method "+n+"; value "+s);console.log(i);await this.switchChain(t);const l=await this.getEthersContractInstance(t,e,n,i,r,s?"payable":"nonpayable");const u={};if(s)u.value=s;const c=await l[n](...i.map((t=>t.value)),u);console.log("Transaction submitted: "+c.hash);a({status:"submitted",txNumber:c.hash});if(o)await c.wait().then((e=>{if(e.status!==1){console.error(e);throw new Error("Transaction failed: "+e.status)}console.log("Transaction completed!");a({status:"confirmed",txNumber:c.hash,txLink:this.chainConfig[t].explorer?this.chainConfig[t].explorer+c.hash:null});return e}));return c}async getEthersContractInstance(t,e,n,i,r,s){const o={name:n,inputs:i,outputs:r.map(((t,e)=>{const n=t==="uint"?"uint256":t;return{name:e.toString(),type:n,internalType:n}})),stateMutability:s,type:"function"};console.log(o);const a=s==="view"?new cr(this.getRpcUrl(t),t):(await this.getEthersProvider()).getSigner();return new Mn(e,[o],a)}getRpcUrl(t){if(!this.chainConfig[t])throw new Error("RPC URL is not configured for ethereum chain: "+t);return this.chainConfig[t].rpc}async getChain(){if(!this.ethersProvider)return 1;const t=await this.getEthersProvider();const e=await t.getNetwork();return e.chainId}async switchChain(t){const e=await this.getEthersProvider();if(t!=await this.getChain()){console.log("Switch chain: ",t);try{await e.send("wallet_switchEthereumChain",[{chainId:"0x"+t.toString(16)}])}catch(e){console.error(e);throw new Error("Connected to wrong chain, please switch the chain to chainId: "+t+", error: "+e.message)}}}async getCurrentWalletAddress(){const t=await this.getEthersProvider();const e=await t.listAccounts();if(!(e===null||e===void 0?void 0:e.length)){throw new Error("Wallet could not connect or there is no accounts created")}return e[0]}async getEvents(t,e,n,i){console.log("Get ethereum events. chain "+t+"; contract "+e+"; event "+n+";");console.log(i);const r=new cr(this.getRpcUrl(t));const s=new Mn(e,[{name:n,type:"event",inputs:i}],r);const o=i.map((t=>t.value));return await s.queryFilter(s.filters[n](...o))}}const dr=":host{height:100vh}.app-container{min-height:100vh;display:flex;flex-direction:column}header{background:#5851ff;color:white;height:56px;display:flex;align-items:center;box-shadow:0 2px 5px 0 rgba(0, 0, 0, 0.26)}.header-icon{width:38px;height:auto;padding-left:10px}header h1{margin:5px 0 0}h1{font-size:1.4rem;font-weight:500;color:#fff;padding:0 12px}main{display:flex;flex-direction:column;flex-grow:1}#tab-header{display:flex;border-bottom:1px solid teal}#tab-content{position:relative;flex-grow:1}#tab-content>*{display:none}#tab-content>.active{display:block !important}#ts-loader{display:none;position:absolute;top:0;width:100%;height:100%;align-items:center;justify-content:center;background-color:rgba(131,131,131,0.67)}";const gr=class{constructor(e){t(this,e);this.tsEngine=new D(this.getWalletAdapter,null,{ipfsGateway:"https://smart-token-labs-demo-server.mypinata.cloud/ipfs/"});this.tabs={}}async getWalletAdapter(){return new hr((async()=>{var t=new F({type:"active",issuers:[],uiOptions:{containerElement:"#tn-main",openingHeading:"Connect your wallet to load this TokenScripts tokens."}});const e=await t.getWalletProvider();await e.loadConnections();if(e.getConnectedWalletData().length===0){return new Promise(((n,i)=>{t.createUiInstance();t.getUi().initialize();t.getUi().updateUI("wallet",{connectCallback:()=>{n(e.getConnectedWalletData()[0].provider)}})}))}return e.getConnectedWalletData()[0].provider}),O)}async showTab(t){if(t!=="start-tab"&&!this.tabs[t])return;let e=this.host.querySelector("#tab-header").children;for(let t=0;t<e.length;t++)e[t].classList.remove("active");e=this.host.querySelector("#tab-content").children;for(let t=0;t<e.length;t++)e[t].classList.remove("active");if(t==="start-tab"){this.host.querySelector("#start-tab-header").classList.add("active");this.host.querySelector("#start-tab").classList.add("active")}else{this.tabs[t].tabHeader.classList.add("active");this.tabs[t].content.classList.add("active")}}addTab(t,e){const n=Date.now().toString();const i=new URLSearchParams(document.location.search);const r=i.has("debugTab")?"debug-viewer-tab":"viewer-tab";const s=this.tabs[n]={tabHeader:document.createElement("tab-header-item",{is:"tab-header-item"}),content:document.createElement(r,{is:r})};s.tabHeader.app=this;s.tabHeader.tabId=n;s.tabHeader.tabTitle=t.getLabel();s.content.app=this;s.content.tabId=n;s.content.tokenScript=t;this.host.querySelector("#tab-header").appendChild(s.tabHeader);this.host.querySelector("#tab-content").appendChild(s.content);this.showTab(n);if(e)this.connectEmulatorSocket(n,e)}async closeTab(t){if(!this.tabs[t])return;const e=this.tabs[t];e.tabHeader.remove();e.content.remove();delete this.tabs[t];const n=Object.keys(this.tabs);await this.showTab(n.length===0?"start-tab":n[n.length-1])}showTsLoader(){document.getElementById("ts-loader").style.display="flex"}hideTsLoader(){document.getElementById("ts-loader").style.display="none"}async loadTokenscript(t,e){switch(t){case"resolve":return await this.tsEngine.getTokenScript(e);case"file":return this.loadTokenScriptFromFile();case"url":return await this.tsEngine.getTokenScriptFromUrl(e)}}async loadTokenScriptFromFile(){return new Promise(((t,e)=>{const n=document.getElementById("ts-file").files[0];if(n){this.showTsLoader();const i=new FileReader;i.onload=async function(n){if(typeof n.target.result==="string"){try{t(await this.tsEngine.loadTokenScript(n.target.result))}catch(t){e("Failed to load TokenScript: "+t.message)}}}.bind(this);i.onerror=function(t){e("Failed to load file: "+t.message)}.bind(this);i.readAsText(n,"UTF-8");return}t(null)}))}async openTokenScriptTab(t,e,n){this.showTsLoader();try{const i=await this.loadTokenscript(t,e);this.addTab(i,n)}catch(t){console.error(t);alert("Failed to load TokenScript: "+t.message)}this.hideTsLoader()}async connectEmulatorSocket(t,e){try{const n=new WebSocket("ws://"+new URL(e).host+"/ws");n.onopen=t=>{console.log("connected: ",t.type);n.send("Websocket client connected!")};n.onmessage=async n=>{if(n.data!="BUILD_UPDATED")return;try{this.tabs[t].content.tokenScript=await this.loadTokenscript("url",e+"/tokenscript.tsml")}catch(t){console.error(t);alert("Failed to reload TokenScript changes")}}}catch(t){console.error(t)}}render(){return e("div",{class:"app-container"},e("header",null,e("img",{class:"header-icon",alt:"TokenScript icon",src:"assets/icon/icon.png"}),e("h1",null,"TokenScript Viewer")),e("main",null,e("div",{id:"tab-header"},e("tab-header-item",{id:"start-tab-header",class:"active",tabId:"start-tab",app:this,tabTitle:"Start",closable:false})),e("div",{id:"tab-content"},e("start-tab",{id:"start-tab",tabId:"start-tab",class:"active",app:this}))),e("div",{id:"ts-loader"},e("loading-spinner",null)),e("div",{id:"tn-main",class:"overlay-tn"}))}get host(){return n(this)}};gr.style=dr;const pr=".lds-ring{display:inline-block;position:relative;width:80px;height:80px}.lds-ring div{box-sizing:border-box;display:block;position:absolute;width:64px;height:64px;margin:8px;border:8px solid;border-radius:50%;animation:lds-ring 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite}.small{height:50px;margin-top:-10px;transform:scale(0.5)}.lds-ring div:nth-child(1){animation-delay:-0.45s}.lds-ring div:nth-child(2){animation-delay:-0.3s}.lds-ring div:nth-child(3){animation-delay:-0.15s}@keyframes lds-ring{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}";const Ar=class{constructor(e){t(this,e);this.color="#fff";this.size="large"}render(){const t=this.color+" transparent transparent transparent";return e("div",{class:"lds-ring "+(this.size==="small"?"small":"")},e("div",{style:{borderColor:t}}),e("div",{style:{borderColor:t}}),e("div",{style:{borderColor:t}}),e("div",{style:{borderColor:t}}))}};Ar.style=pr;const mr="#start-tab{padding:20px}.start-section{padding:15px 0}";const yr=class{constructor(e){t(this,e);this.app=undefined;this.tabId=undefined}processUrlLoad(){console.log("loading from URL: "+document.location.hash);const t=document.location.search.substring(1);if(!t)return false;const e=new URLSearchParams(t);if(e.has("emulator")){console.log("Emulator mode enabled!");let t=e.get("emulator");if(t){t=new URL(t).origin;console.log("Using remote host for tokenscript dev server: "+t)}else{t=document.location.origin}this.app.openTokenScriptTab("url",t+"/tokenscript.tsml",t);return true}else if(e.has("tokenscriptUrl")){this.app.openTokenScriptTab("url",e.get("tokenscriptUrl"));return true}else if(e.has("chain")&&e.has("contract")){const t=e.get("chain")+"-"+e.get("contract");this.app.openTokenScriptTab("resolve",t);return true}return false}componentDidLoad(){const t=document.getElementById("ts-file");if(this.processUrlLoad()){t.value=""}else{if(t.value)this.app.openTokenScriptTab("file")}}render(){return e("div",null,e("div",{class:"start-section"},e("h3",null,"Load with contract ID"),e("label",{htmlFor:"ts-id"},"Tokenscript ID: "),e("input",{style:{marginRight:"15px"},id:"ts-id",type:"text",value:"0xd915c8ad3241f459a45adcbbf8af42caa561a154"}),e("label",{htmlFor:"ts-chain"},"Chain: "),e("select",{id:"ts-chain",style:{marginRight:"15px"}},e("option",{value:"1"},"Ethereum Mainnet"),e("option",{value:"5"},"Goerli Testnet"),e("option",{value:"8217",selected:true},"Klaytn Mainnet")),e("button",{id:"ts-resolve-btn",type:"button",onClick:()=>{const t=document.getElementById("ts-chain").value+"-"+document.getElementById("ts-id").value;this.app.openTokenScriptTab("resolve",t)}},"Resolve")),e("div",{class:"start-section"},e("h3",null,"Load from URL"),e("label",{htmlFor:"ts-url"},"URL: "),e("input",{id:"ts-url",type:"text",style:{marginRight:"15px"}}),e("button",{id:"ts-load-url-btn",type:"button",onClick:()=>{const t=document.getElementById("ts-url").value;this.app.openTokenScriptTab("url",t)}},"Load")),e("div",{class:"start-section"},e("h3",null,"Load from file"),e("label",{htmlFor:"ts-file"},"Load XML: "),e("input",{id:"ts-file",type:"file",accept:".xml,.tsml,text/xml",onChange:()=>{this.app.openTokenScriptTab("file")}})),e("div",{class:"start-section"},e("h3",null,"Load Predefined TokenScripts "),e("label",{htmlFor:"ts-predefined"}),e("select",{id:"ts-predefined",style:{marginRight:"15px"}},e("option",{value:"DAI"},"DAI"),e("option",{value:"ENS"},"ENS")),e("button",{id:"ts-load-predefined-btn",type:"button",onClick:()=>{const t=document.getElementById("ts-predefined").value;this.app.openTokenScriptTab("resolve",t)}},"Load")))}};yr.style=mr;const vr=":host{background:none;border:none;border-bottom:2px solid white;border-radius:0;margin:0;color:#ccc;max-width:200px;flex-grow:1;align-content:center;justify-content:center;padding:5px 10px;box-sizing:border-box;cursor:pointer !important}:host>.tab-button{height:40px;display:flex;flex-direction:row;align-items:center}.tab-button span{flex-grow:1;display:inline-block;color:inherit;font-weight:bold;margin-top:4px;text-overflow:ellipsis ellipsis;overflow:hidden;white-space:nowrap}.tab-button button{background:#fff;border:#414141 1px solid;border-radius:5px;padding:4px 6px;font-weight:bold;cursor:pointer !important}.tab-button button:hover{background:#a6a6a6 !important;border-color:#a6a6a6 !important}:host(.active){border-bottom:2px solid teal;color:#333 !important}";const wr=class{constructor(e){t(this,e);this.app=undefined;this.tabId=undefined;this.tabTitle=undefined;this.closable=true}render(){return e("div",{class:"tab-button",onClick:()=>this.app.showTab(this.tabId),title:this.tabTitle},e("span",null,this.tabTitle),this.closable===true?e("button",{onClick:()=>this.app.closeTab(this.tabId)},"X"):"")}};wr.style=vr;export{gr as app_root,Ar as loading_spinner,yr as start_tab,wr as tab_header_item};
//# sourceMappingURL=p-ffe60a95.entry.js.map