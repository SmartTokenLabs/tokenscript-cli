import{E as e}from"./p-1d75f834.js";import{W as t}from"./p-2eb1ef77.js";import{q as r}from"./p-bda0c6c7.js";import"./p-404a2ccb.js";import"./p-ea15b96e.js";function n(e,{strict:t=true}={}){if(!e)return false;if(typeof e!=="string")return false;return t?/^0x[0-9a-fA-F]*$/.test(e):e.startsWith("0x")}function o(e){if(n(e,{strict:false}))return Math.ceil((e.length-2)/2);return e.length}const s="2.18.0";const i=e=>e;const u=()=>`viem@${s}`;class c extends Error{constructor(e,t={}){super();Object.defineProperty(this,"details",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"docsPath",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"metaMessages",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"shortMessage",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"name",{enumerable:true,configurable:true,writable:true,value:"ViemError"});Object.defineProperty(this,"version",{enumerable:true,configurable:true,writable:true,value:u()});const r=t.cause instanceof c?t.cause.details:t.cause?.message?t.cause.message:t.details;const n=t.cause instanceof c?t.cause.docsPath||t.docsPath:t.docsPath;this.message=[e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...n?[`Docs: ${t.docsBaseUrl??"https://viem.sh"}${n}${t.docsSlug?`#${t.docsSlug}`:""}`]:[],...r?[`Details: ${r}`]:[],`Version: ${this.version}`].join("\n");if(t.cause)this.cause=t.cause;this.details=r;this.docsPath=n;this.metaMessages=t.metaMessages;this.shortMessage=e}walk(e){return a(this,e)}}function a(e,t){if(t?.(e))return e;if(e&&typeof e==="object"&&"cause"in e)return a(e.cause,t);return t?null:e}class l extends c{constructor({size:e,targetSize:t,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${t}).`);Object.defineProperty(this,"name",{enumerable:true,configurable:true,writable:true,value:"SizeExceedsPaddingSizeError"})}}function d(e,{dir:t,size:r=32}={}){if(typeof e==="string")return f(e,{dir:t,size:r});return h(e,{dir:t,size:r})}function f(e,{dir:t,size:r=32}={}){if(r===null)return e;const n=e.replace("0x","");if(n.length>r*2)throw new l({size:Math.ceil(n.length/2),targetSize:r,type:"hex"});return`0x${n[t==="right"?"padEnd":"padStart"](r*2,"0")}`}function h(e,{dir:t,size:r=32}={}){if(r===null)return e;if(e.length>r)throw new l({size:e.length,targetSize:r,type:"bytes"});const n=new Uint8Array(r);for(let o=0;o<r;o++){const s=t==="right";n[s?o:r-o-1]=e[s?o:e.length-o-1]}return n}class b extends c{constructor({max:e,min:t,signed:r,size:n,value:o}){super(`Number "${o}" is not in safe ${n?`${n*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${t} to ${e})`:`(above ${t})`}`);Object.defineProperty(this,"name",{enumerable:true,configurable:true,writable:true,value:"IntegerOutOfRangeError"})}}class p extends c{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed ${t} bytes. Given size: ${e} bytes.`);Object.defineProperty(this,"name",{enumerable:true,configurable:true,writable:true,value:"SizeOverflowError"})}}function w(e,{dir:t="left"}={}){let r=typeof e==="string"?e.replace("0x",""):e;let n=0;for(let e=0;e<r.length-1;e++){if(r[t==="left"?e:r.length-e-1].toString()==="0")n++;else break}r=t==="left"?r.slice(n):r.slice(0,r.length-n);if(typeof e==="string"){if(r.length===1&&t==="right")r=`${r}0`;return`0x${r.length%2===1?`0${r}`:r}`}return r}function g(e,{size:t}){if(o(e)>t)throw new p({givenSize:o(e),maxSize:t})}const m=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function y(e,t={}){if(typeof e==="number"||typeof e==="bigint")return x(e,t);if(typeof e==="string"){return $(e,t)}if(typeof e==="boolean")return v(e,t);return j(e,t)}function v(e,t={}){const r=`0x${Number(e)}`;if(typeof t.size==="number"){g(r,{size:t.size});return d(r,{size:t.size})}return r}function j(e,t={}){let r="";for(let t=0;t<e.length;t++){r+=m[e[t]]}const n=`0x${r}`;if(typeof t.size==="number"){g(n,{size:t.size});return d(n,{dir:"right",size:t.size})}return n}function x(e,t={}){const{signed:r,size:n}=t;const o=BigInt(e);let s;if(n){if(r)s=(1n<<BigInt(n)*8n-1n)-1n;else s=2n**(BigInt(n)*8n)-1n}else if(typeof e==="number"){s=BigInt(Number.MAX_SAFE_INTEGER)}const i=typeof s==="bigint"&&r?-s-1n:0;if(s&&o>s||o<i){const t=typeof e==="bigint"?"n":"";throw new b({max:s?`${s}${t}`:undefined,min:`${i}${t}`,signed:r,size:n,value:`${e}${t}`})}const u=`0x${(r&&o<0?(1n<<BigInt(n*8))+BigInt(o):o).toString(16)}`;if(n)return d(u,{size:n});return u}const O=new TextEncoder;function $(e,t={}){const r=O.encode(e);return j(r,t)}const E=new TextEncoder;function R(e,t={}){if(typeof e==="number"||typeof e==="bigint")return k(e,t);if(typeof e==="boolean")return U(e,t);if(n(e))return M(e,t);return I(e,t)}function U(e,t={}){const r=new Uint8Array(1);r[0]=Number(e);if(typeof t.size==="number"){g(r,{size:t.size});return d(r,{size:t.size})}return r}const S={zero:48,nine:57,A:65,F:70,a:97,f:102};function A(e){if(e>=S.zero&&e<=S.nine)return e-S.zero;if(e>=S.A&&e<=S.F)return e-(S.A-10);if(e>=S.a&&e<=S.f)return e-(S.a-10);return undefined}function M(e,t={}){let r=e;if(t.size){g(r,{size:t.size});r=d(r,{dir:"right",size:t.size})}let n=r.slice(2);if(n.length%2)n=`0${n}`;const o=n.length/2;const s=new Uint8Array(o);for(let e=0,t=0;e<o;e++){const r=A(n.charCodeAt(t++));const o=A(n.charCodeAt(t++));if(r===undefined||o===undefined){throw new c(`Invalid byte sequence ("${n[t-2]}${n[t-1]}" in "${n}").`)}s[e]=r*16+o}return s}function k(e,t){const r=x(e,t);return M(r)}function I(e,t={}){const r=E.encode(e);if(typeof t.size==="number"){g(r,{size:t.size});return d(r,{dir:"right",size:t.size})}return r}var z={};var T={};Object.defineProperty(T,"__esModule",{value:true});T.output=T.exists=T.hash=T.bytes=T.bool=T.number=T.isBytes=void 0;function q(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}T.number=q;function P(e){if(typeof e!=="boolean")throw new Error(`boolean expected, not ${e}`)}T.bool=P;function C(e){return e instanceof Uint8Array||e!=null&&typeof e==="object"&&e.constructor.name==="Uint8Array"}T.isBytes=C;function N(e,...t){if(!C(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}T.bytes=N;function L(e){if(typeof e!=="function"||typeof e.create!=="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");q(e.outputLen);q(e.blockLen)}T.hash=L;function _(e,t=true){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}T.exists=_;function B(e,t){N(e);const r=t.outputLen;if(e.length<r){throw new Error(`digestInto() expects output buffer of length at least ${r}`)}}T.output=B;const D={number:q,bool:P,bytes:N,hash:L,exists:_,output:B};T.default=D;var H={};Object.defineProperty(H,"__esModule",{value:true});H.add5L=H.add5H=H.add4H=H.add4L=H.add3H=H.add3L=H.add=H.rotlBL=H.rotlBH=H.rotlSL=H.rotlSH=H.rotr32L=H.rotr32H=H.rotrBL=H.rotrBH=H.rotrSL=H.rotrSH=H.shrSL=H.shrSH=H.toBig=H.split=H.fromBig=void 0;const F=BigInt(2**32-1);const J=BigInt(32);function V(e,t=false){if(t)return{h:Number(e&F),l:Number(e>>J&F)};return{h:Number(e>>J&F)|0,l:Number(e&F)|0}}H.fromBig=V;function W(e,t=false){let r=new Uint32Array(e.length);let n=new Uint32Array(e.length);for(let o=0;o<e.length;o++){const{h:s,l:i}=V(e[o],t);[r[o],n[o]]=[s,i]}return[r,n]}H.split=W;const X=(e,t)=>BigInt(e>>>0)<<J|BigInt(t>>>0);H.toBig=X;const G=(e,t,r)=>e>>>r;H.shrSH=G;const K=(e,t,r)=>e<<32-r|t>>>r;H.shrSL=K;const Q=(e,t,r)=>e>>>r|t<<32-r;H.rotrSH=Q;const Y=(e,t,r)=>e<<32-r|t>>>r;H.rotrSL=Y;const Z=(e,t,r)=>e<<64-r|t>>>r-32;H.rotrBH=Z;const ee=(e,t,r)=>e>>>r-32|t<<64-r;H.rotrBL=ee;const te=(e,t)=>t;H.rotr32H=te;const re=(e,t)=>e;H.rotr32L=re;const ne=(e,t,r)=>e<<r|t>>>32-r;H.rotlSH=ne;const oe=(e,t,r)=>t<<r|e>>>32-r;H.rotlSL=oe;const se=(e,t,r)=>t<<r-32|e>>>64-r;H.rotlBH=se;const ie=(e,t,r)=>e<<r-32|t>>>64-r;H.rotlBL=ie;function ue(e,t,r,n){const o=(t>>>0)+(n>>>0);return{h:e+r+(o/2**32|0)|0,l:o|0}}H.add=ue;const ce=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0);H.add3L=ce;const ae=(e,t,r,n)=>t+r+n+(e/2**32|0)|0;H.add3H=ae;const le=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0);H.add4L=le;const de=(e,t,r,n,o)=>t+r+n+o+(e/2**32|0)|0;H.add4H=de;const fe=(e,t,r,n,o)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(o>>>0);H.add5L=fe;const he=(e,t,r,n,o,s)=>t+r+n+o+s+(e/2**32|0)|0;H.add5H=he;const be={fromBig:V,split:W,toBig:X,shrSH:G,shrSL:K,rotrSH:Q,rotrSL:Y,rotrBH:Z,rotrBL:ee,rotr32H:te,rotr32L:re,rotlSH:ne,rotlSL:oe,rotlBH:se,rotlBL:ie,add:ue,add3L:ce,add3H:ae,add4L:le,add4H:de,add5H:he,add5L:fe};H.default=be;var pe={};var we={};Object.defineProperty(we,"__esModule",{value:true});we.crypto=void 0;we.crypto=typeof globalThis==="object"&&"crypto"in globalThis?globalThis.crypto:undefined;(function(e){
/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */
Object.defineProperty(e,"__esModule",{value:true});e.randomBytes=e.wrapXOFConstructorWithOpts=e.wrapConstructorWithOpts=e.wrapConstructor=e.checkOpts=e.Hash=e.concatBytes=e.toBytes=e.utf8ToBytes=e.asyncLoop=e.nextTick=e.hexToBytes=e.bytesToHex=e.byteSwap32=e.byteSwapIfBE=e.byteSwap=e.isLE=e.rotl=e.rotr=e.createView=e.u32=e.u8=e.isBytes=void 0;const t=we;const r=T;function n(e){return e instanceof Uint8Array||e!=null&&typeof e==="object"&&e.constructor.name==="Uint8Array"}e.isBytes=n;const o=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength);e.u8=o;const s=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));e.u32=s;const i=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);e.createView=i;const u=(e,t)=>e<<32-t|e>>>t;e.rotr=u;const c=(e,t)=>e<<t|e>>>32-t>>>0;e.rotl=c;e.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;const a=e=>e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255;e.byteSwap=a;e.byteSwapIfBE=e.isLE?e=>e:t=>(0,e.byteSwap)(t);function l(t){for(let r=0;r<t.length;r++){t[r]=(0,e.byteSwap)(t[r])}}e.byteSwap32=l;const d=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function f(e){(0,r.bytes)(e);let t="";for(let r=0;r<e.length;r++){t+=d[e[r]]}return t}e.bytesToHex=f;const h={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function b(e){if(e>=h._0&&e<=h._9)return e-h._0;if(e>=h._A&&e<=h._F)return e-(h._A-10);if(e>=h._a&&e<=h._f)return e-(h._a-10);return}function p(e){if(typeof e!=="string")throw new Error("hex string expected, got "+typeof e);const t=e.length;const r=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(r);for(let t=0,o=0;t<r;t++,o+=2){const r=b(e.charCodeAt(o));const s=b(e.charCodeAt(o+1));if(r===undefined||s===undefined){const t=e[o]+e[o+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+o)}n[t]=r*16+s}return n}e.hexToBytes=p;const w=async()=>{};e.nextTick=w;async function g(t,r,n){let o=Date.now();for(let s=0;s<t;s++){n(s);const t=Date.now()-o;if(t>=0&&t<r)continue;await(0,e.nextTick)();o+=t}}e.asyncLoop=g;function m(e){if(typeof e!=="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array((new TextEncoder).encode(e))}e.utf8ToBytes=m;function y(e){if(typeof e==="string")e=m(e);(0,r.bytes)(e);return e}e.toBytes=y;function v(...e){let t=0;for(let n=0;n<e.length;n++){const o=e[n];(0,r.bytes)(o);t+=o.length}const n=new Uint8Array(t);for(let t=0,r=0;t<e.length;t++){const o=e[t];n.set(o,r);r+=o.length}return n}e.concatBytes=v;class j{clone(){return this._cloneInto()}}e.Hash=j;const x={}.toString;function O(e,t){if(t!==undefined&&x.call(t)!=="[object Object]")throw new Error("Options should be object or undefined");const r=Object.assign(e,t);return r}e.checkOpts=O;function $(e){const t=t=>e().update(y(t)).digest();const r=e();t.outputLen=r.outputLen;t.blockLen=r.blockLen;t.create=()=>e();return t}e.wrapConstructor=$;function E(e){const t=(t,r)=>e(r).update(y(t)).digest();const r=e({});t.outputLen=r.outputLen;t.blockLen=r.blockLen;t.create=t=>e(t);return t}e.wrapConstructorWithOpts=E;function R(e){const t=(t,r)=>e(r).update(y(t)).digest();const r=e({});t.outputLen=r.outputLen;t.blockLen=r.blockLen;t.create=t=>e(t);return t}e.wrapXOFConstructorWithOpts=R;function U(e=32){if(t.crypto&&typeof t.crypto.getRandomValues==="function"){return t.crypto.getRandomValues(new Uint8Array(e))}throw new Error("crypto.getRandomValues must be defined")}e.randomBytes=U})(pe);Object.defineProperty(z,"__esModule",{value:true});z.shake256=z.shake128=z.keccak_512=z.keccak_384=Pe=z.keccak_256=z.keccak_224=z.sha3_512=z.sha3_384=z.sha3_256=z.sha3_224=z.Keccak=z.keccakP=void 0;const ge=T;const me=H;const ye=pe;const ve=[];const je=[];const xe=[];const Oe=BigInt(0);const $e=BigInt(1);const Ee=BigInt(2);const Re=BigInt(7);const Ue=BigInt(256);const Se=BigInt(113);for(let e=0,t=$e,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5];ve.push(2*(5*n+r));je.push((e+1)*(e+2)/2%64);let o=Oe;for(let e=0;e<7;e++){t=(t<<$e^(t>>Re)*Se)%Ue;if(t&Ee)o^=$e<<($e<<BigInt(e))-$e}xe.push(o)}const[Ae,Me]=(0,me.split)(xe,true);const ke=(e,t,r)=>r>32?(0,me.rotlBH)(e,t,r):(0,me.rotlSH)(e,t,r);const Ie=(e,t,r)=>r>32?(0,me.rotlBL)(e,t,r):(0,me.rotlSL)(e,t,r);function ze(e,t=24){const r=new Uint32Array(5*2);for(let n=24-t;n<24;n++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){const n=(t+8)%10;const o=(t+2)%10;const s=r[o];const i=r[o+1];const u=ke(s,i,1)^r[n];const c=Ie(s,i,1)^r[n+1];for(let r=0;r<50;r+=10){e[t+r]^=u;e[t+r+1]^=c}}let t=e[2];let o=e[3];for(let r=0;r<24;r++){const n=je[r];const s=ke(t,o,n);const i=Ie(t,o,n);const u=ve[r];t=e[u];o=e[u+1];e[u]=s;e[u+1]=i}for(let t=0;t<50;t+=10){for(let n=0;n<10;n++)r[n]=e[t+n];for(let n=0;n<10;n++)e[t+n]^=~r[(n+2)%10]&r[(n+4)%10]}e[0]^=Ae[n];e[1]^=Me[n]}r.fill(0)}z.keccakP=ze;class Te extends ye.Hash{constructor(e,t,r,n=false,o=24){super();this.blockLen=e;this.suffix=t;this.outputLen=r;this.enableXOF=n;this.rounds=o;this.pos=0;this.posOut=0;this.finished=false;this.destroyed=false;(0,ge.number)(r);if(0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200);this.state32=(0,ye.u32)(this.state)}keccak(){if(!ye.isLE)(0,ye.byteSwap32)(this.state32);ze(this.state32,this.rounds);if(!ye.isLE)(0,ye.byteSwap32)(this.state32);this.posOut=0;this.pos=0}update(e){(0,ge.exists)(this);const{blockLen:t,state:r}=this;e=(0,ye.toBytes)(e);const n=e.length;for(let o=0;o<n;){const s=Math.min(t-this.pos,n-o);for(let t=0;t<s;t++)r[this.pos++]^=e[o++];if(this.pos===t)this.keccak()}return this}finish(){if(this.finished)return;this.finished=true;const{state:e,suffix:t,pos:r,blockLen:n}=this;e[r]^=t;if((t&128)!==0&&r===n-1)this.keccak();e[n-1]^=128;this.keccak()}writeInto(e){(0,ge.exists)(this,false);(0,ge.bytes)(e);this.finish();const t=this.state;const{blockLen:r}=this;for(let n=0,o=e.length;n<o;){if(this.posOut>=r)this.keccak();const s=Math.min(r-this.posOut,o-n);e.set(t.subarray(this.posOut,this.posOut+s),n);this.posOut+=s;n+=s}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){(0,ge.number)(e);return this.xofInto(new Uint8Array(e))}digestInto(e){(0,ge.output)(e,this);if(this.finished)throw new Error("digest() was already called");this.writeInto(e);this.destroy();return e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=true;this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:n,rounds:o,enableXOF:s}=this;e||(e=new Te(t,r,n,s,o));e.state32.set(this.state32);e.pos=this.pos;e.posOut=this.posOut;e.finished=this.finished;e.rounds=o;e.suffix=r;e.outputLen=n;e.enableXOF=s;e.destroyed=this.destroyed;return e}}z.Keccak=Te;const qe=(e,t,r)=>(0,ye.wrapConstructor)((()=>new Te(t,e,r)));z.sha3_224=qe(6,144,224/8);z.sha3_256=qe(6,136,256/8);z.sha3_384=qe(6,104,384/8);z.sha3_512=qe(6,72,512/8);z.keccak_224=qe(1,144,224/8);var Pe=z.keccak_256=qe(1,136,256/8);z.keccak_384=qe(1,104,384/8);z.keccak_512=qe(1,72,512/8);const Ce=(e,t,r)=>(0,ye.wrapXOFConstructorWithOpts)(((n={})=>new Te(t,e,n.dkLen===undefined?r:n.dkLen,true)));z.shake128=Ce(31,168,128/8);z.shake256=Ce(31,136,256/8);function Ne(e,t){const r=t||"hex";const o=Pe(n(e,{strict:false})?R(e):e);if(r==="bytes")return o;return y(o)}class Le extends Map{constructor(e){super();Object.defineProperty(this,"maxSize",{enumerable:true,configurable:true,writable:true,value:void 0});this.maxSize=e}set(e,t){super.set(e,t);if(this.maxSize&&this.size>this.maxSize)this.delete(this.keys().next().value);return this}}function _e(e,t={}){let r=e;if(typeof t.size!=="undefined"){g(r,{size:t.size});r=w(r,{dir:"right"})}return(new TextDecoder).decode(r)}const Be=(e,t,r)=>JSON.stringify(e,((e,r)=>{const n=typeof r==="bigint"?r.toString():r;return typeof t==="function"?t(e,n):n}),r);class De extends c{constructor({body:e,cause:t,details:r,headers:n,status:o,url:s}){super("HTTP request failed.",{cause:t,details:r,metaMessages:[o&&`Status: ${o}`,`URL: ${i(s)}`,e&&`Request body: ${Be(e)}`].filter(Boolean)});Object.defineProperty(this,"name",{enumerable:true,configurable:true,writable:true,value:"HttpRequestError"});Object.defineProperty(this,"body",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"headers",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"status",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"url",{enumerable:true,configurable:true,writable:true,value:void 0});this.body=e;this.headers=n;this.status=o;this.url=s}}class He extends c{constructor({body:e,error:t,url:r}){super("RPC Request failed.",{cause:t,details:t.message,metaMessages:[`URL: ${i(r)}`,`Request body: ${Be(e)}`]});Object.defineProperty(this,"name",{enumerable:true,configurable:true,writable:true,value:"RpcRequestError"});Object.defineProperty(this,"code",{enumerable:true,configurable:true,writable:true,value:void 0});this.code=t.code}}class Fe extends c{constructor({body:e,url:t}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${i(t)}`,`Request body: ${Be(e)}`]});Object.defineProperty(this,"name",{enumerable:true,configurable:true,writable:true,value:"TimeoutError"})}}const Je=-1;class Ve extends c{constructor(e,{code:t,docsPath:r,metaMessages:n,shortMessage:o}){super(o,{cause:e,docsPath:r,metaMessages:n||e?.metaMessages});Object.defineProperty(this,"name",{enumerable:true,configurable:true,writable:true,value:"RpcError"});Object.defineProperty(this,"code",{enumerable:true,configurable:true,writable:true,value:void 0});this.name=e.name;this.code=e instanceof He?e.code:t??Je}}class We extends Ve{constructor(e,t){super(e,t);Object.defineProperty(this,"name",{enumerable:true,configurable:true,writable:true,value:"ProviderRpcError"});Object.defineProperty(this,"data",{enumerable:true,configurable:true,writable:true,value:void 0});this.data=t.data}}class Xe extends Ve{constructor(e){super(e,{code:Xe.code,shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."});Object.defineProperty(this,"name",{enumerable:true,configurable:true,writable:true,value:"ParseRpcError"})}}Object.defineProperty(Xe,"code",{enumerable:true,configurable:true,writable:true,value:-32700});class Ge extends Ve{constructor(e){super(e,{code:Ge.code,shortMessage:"JSON is not a valid request object."});Object.defineProperty(this,"name",{enumerable:true,configurable:true,writable:true,value:"InvalidRequestRpcError"})}}Object.defineProperty(Ge,"code",{enumerable:true,configurable:true,writable:true,value:-32600});class Ke extends Ve{constructor(e,{method:t}={}){super(e,{code:Ke.code,shortMessage:`The method${t?` "${t}"`:""} does not exist / is not available.`});Object.defineProperty(this,"name",{enumerable:true,configurable:true,writable:true,value:"MethodNotFoundRpcError"})}}Object.defineProperty(Ke,"code",{enumerable:true,configurable:true,writable:true,value:-32601});class Qe extends Ve{constructor(e){super(e,{code:Qe.code,shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join("\n")});Object.defineProperty(this,"name",{enumerable:true,configurable:true,writable:true,value:"InvalidParamsRpcError"})}}Object.defineProperty(Qe,"code",{enumerable:true,configurable:true,writable:true,value:-32602});class Ye extends Ve{constructor(e){super(e,{code:Ye.code,shortMessage:"An internal error was received."});Object.defineProperty(this,"name",{enumerable:true,configurable:true,writable:true,value:"InternalRpcError"})}}Object.defineProperty(Ye,"code",{enumerable:true,configurable:true,writable:true,value:-32603});class Ze extends Ve{constructor(e){super(e,{code:Ze.code,shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join("\n")});Object.defineProperty(this,"name",{enumerable:true,configurable:true,writable:true,value:"InvalidInputRpcError"})}}Object.defineProperty(Ze,"code",{enumerable:true,configurable:true,writable:true,value:-32e3});class et extends Ve{constructor(e){super(e,{code:et.code,shortMessage:"Requested resource not found."});Object.defineProperty(this,"name",{enumerable:true,configurable:true,writable:true,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(et,"code",{enumerable:true,configurable:true,writable:true,value:-32001});class tt extends Ve{constructor(e){super(e,{code:tt.code,shortMessage:"Requested resource not available."});Object.defineProperty(this,"name",{enumerable:true,configurable:true,writable:true,value:"ResourceUnavailableRpcError"})}}Object.defineProperty(tt,"code",{enumerable:true,configurable:true,writable:true,value:-32002});class rt extends Ve{constructor(e){super(e,{code:rt.code,shortMessage:"Transaction creation failed."});Object.defineProperty(this,"name",{enumerable:true,configurable:true,writable:true,value:"TransactionRejectedRpcError"})}}Object.defineProperty(rt,"code",{enumerable:true,configurable:true,writable:true,value:-32003});class nt extends Ve{constructor(e,{method:t}={}){super(e,{code:nt.code,shortMessage:`Method${t?` "${t}"`:""} is not implemented.`});Object.defineProperty(this,"name",{enumerable:true,configurable:true,writable:true,value:"MethodNotSupportedRpcError"})}}Object.defineProperty(nt,"code",{enumerable:true,configurable:true,writable:true,value:-32004});class ot extends Ve{constructor(e){super(e,{code:ot.code,shortMessage:"Request exceeds defined limit."});Object.defineProperty(this,"name",{enumerable:true,configurable:true,writable:true,value:"LimitExceededRpcError"})}}Object.defineProperty(ot,"code",{enumerable:true,configurable:true,writable:true,value:-32005});class st extends Ve{constructor(e){super(e,{code:st.code,shortMessage:"Version of JSON-RPC protocol is not supported."});Object.defineProperty(this,"name",{enumerable:true,configurable:true,writable:true,value:"JsonRpcVersionUnsupportedError"})}}Object.defineProperty(st,"code",{enumerable:true,configurable:true,writable:true,value:-32006});class it extends We{constructor(e){super(e,{code:it.code,shortMessage:"User rejected the request."});Object.defineProperty(this,"name",{enumerable:true,configurable:true,writable:true,value:"UserRejectedRequestError"})}}Object.defineProperty(it,"code",{enumerable:true,configurable:true,writable:true,value:4001});class ut extends We{constructor(e){super(e,{code:ut.code,shortMessage:"The requested method and/or account has not been authorized by the user."});Object.defineProperty(this,"name",{enumerable:true,configurable:true,writable:true,value:"UnauthorizedProviderError"})}}Object.defineProperty(ut,"code",{enumerable:true,configurable:true,writable:true,value:4100});class ct extends We{constructor(e,{method:t}={}){super(e,{code:ct.code,shortMessage:`The Provider does not support the requested method${t?` " ${t}"`:""}.`});Object.defineProperty(this,"name",{enumerable:true,configurable:true,writable:true,value:"UnsupportedProviderMethodError"})}}Object.defineProperty(ct,"code",{enumerable:true,configurable:true,writable:true,value:4200});class at extends We{constructor(e){super(e,{code:at.code,shortMessage:"The Provider is disconnected from all chains."});Object.defineProperty(this,"name",{enumerable:true,configurable:true,writable:true,value:"ProviderDisconnectedError"})}}Object.defineProperty(at,"code",{enumerable:true,configurable:true,writable:true,value:4900});class lt extends We{constructor(e){super(e,{code:lt.code,shortMessage:"The Provider is not connected to the requested chain."});Object.defineProperty(this,"name",{enumerable:true,configurable:true,writable:true,value:"ChainDisconnectedError"})}}Object.defineProperty(lt,"code",{enumerable:true,configurable:true,writable:true,value:4901});class dt extends We{constructor(e){super(e,{code:dt.code,shortMessage:"An error occurred when attempting to switch chain."});Object.defineProperty(this,"name",{enumerable:true,configurable:true,writable:true,value:"SwitchChainError"})}}Object.defineProperty(dt,"code",{enumerable:true,configurable:true,writable:true,value:4902});class ft extends Ve{constructor(e){super(e,{shortMessage:"An unknown RPC error occurred."});Object.defineProperty(this,"name",{enumerable:true,configurable:true,writable:true,value:"UnknownRpcError"})}}const ht=new Map;function bt({fn:e,id:t,shouldSplitBatch:r,wait:n=0,sort:o}){const s=async()=>{const t=c();i();const r=t.map((({args:e})=>e));if(r.length===0)return;e(r).then((e=>{if(o&&Array.isArray(e))e.sort(o);for(let r=0;r<t.length;r++){const{pendingPromise:n}=t[r];n.resolve?.([e[r],e])}})).catch((e=>{for(let r=0;r<t.length;r++){const{pendingPromise:n}=t[r];n.reject?.(e)}}))};const i=()=>ht.delete(t);const u=()=>c().map((({args:e})=>e));const c=()=>ht.get(t)||[];const a=e=>ht.set(t,[...c(),e]);return{flush:i,async schedule(e){const t={};const o=new Promise(((e,r)=>{t.resolve=e;t.reject=r}));const i=r?.([...u(),e]);if(i)s();const l=c().length>0;if(l){a({args:e,pendingPromise:t});return o}a({args:e,pendingPromise:t});setTimeout(s,n);return o}}}async function pt(e){return new Promise((t=>setTimeout(t,e)))}const wt=256;let gt=wt;let mt;function yt(e=11){if(!mt||gt+e>wt*2){mt="";gt=0;for(let e=0;e<wt;e++){mt+=(256+Math.random()*256|0).toString(16).substring(1)}}return mt.substring(gt,gt+++e)}const vt=new Le(8192);function jt(e,{enabled:t=true,id:r}){if(!t||!r)return e();if(vt.get(r))return vt.get(r);const n=e().finally((()=>vt.delete(r)));vt.set(r,n);return n}function xt(e,{delay:t=100,retryCount:r=2,shouldRetry:n=(()=>true)}={}){return new Promise(((o,s)=>{const i=async({count:u=0}={})=>{const c=async({error:e})=>{const r=typeof t==="function"?t({count:u,error:e}):t;if(r)await pt(r);i({count:u+1})};try{const t=await e();o(t)}catch(e){if(u<r&&await n({count:u,error:e}))return c({error:e});s(e)}};i()}))}function Ot(e,t={}){return async(r,n={})=>{const{dedupe:o=false,retryDelay:s=150,retryCount:i=3,uid:u}={...t,...n};const a=o?Ne($(`${u}.${Be(r)}`)):undefined;return jt((()=>xt((async()=>{try{return await e(r)}catch(e){const t=e;switch(t.code){case Xe.code:throw new Xe(t);case Ge.code:throw new Ge(t);case Ke.code:throw new Ke(t,{method:r.method});case Qe.code:throw new Qe(t);case Ye.code:throw new Ye(t);case Ze.code:throw new Ze(t);case et.code:throw new et(t);case tt.code:throw new tt(t);case rt.code:throw new rt(t);case nt.code:throw new nt(t,{method:r.method});case ot.code:throw new ot(t);case st.code:throw new st(t);case it.code:throw new it(t);case ut.code:throw new ut(t);case ct.code:throw new ct(t);case at.code:throw new at(t);case lt.code:throw new lt(t);case dt.code:throw new dt(t);case 5e3:throw new it(t);default:if(e instanceof c)throw e;throw new ft(t)}}}),{delay:({count:e,error:t})=>{if(t&&t instanceof De){const e=t?.headers?.get("Retry-After");if(e?.match(/\d/))return Number.parseInt(e)*1e3}return~~(1<<e)*s},retryCount:i,shouldRetry:({error:e})=>$t(e)})),{enabled:o,id:a})}}function $t(e){if("code"in e&&typeof e.code==="number"){if(e.code===-1)return true;if(e.code===ot.code)return true;if(e.code===Ye.code)return true;return false}if(e instanceof De&&e.status){if(e.status===403)return true;if(e.status===408)return true;if(e.status===413)return true;if(e.status===429)return true;if(e.status===500)return true;if(e.status===502)return true;if(e.status===503)return true;if(e.status===504)return true;return false}return true}function Et({key:e,name:t,request:r,retryCount:n=3,retryDelay:o=150,timeout:s,type:i},u){const c=yt();return{config:{key:e,name:t,request:r,retryCount:n,retryDelay:o,timeout:s,type:i},request:Ot(r,{retryCount:n,retryDelay:o,uid:c}),value:u}}class Rt extends c{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro"})}}function Ut(e,{errorInstance:t=new Error("timed out"),timeout:r,signal:n}){return new Promise(((o,s)=>{(async()=>{let i;try{const u=new AbortController;if(r>0){i=setTimeout((()=>{if(n){u.abort()}else{s(t)}}),r)}o(await e({signal:u?.signal||null}))}catch(e){if(e?.name==="AbortError")s(t);s(e)}finally{clearTimeout(i)}})()}))}function St(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const At=St();function Mt(e,t={}){return{async request(r){const{body:n,onRequest:o=t.onRequest,onResponse:s=t.onResponse,timeout:i=t.timeout??1e4}=r;const u={...t.fetchOptions??{},...r.fetchOptions??{}};const{headers:c,method:a,signal:l}=u;try{const t=await Ut((async({signal:t})=>{const r={...u,body:Array.isArray(n)?Be(n.map((e=>({jsonrpc:"2.0",id:e.id??At.take(),...e})))):Be({jsonrpc:"2.0",id:n.id??At.take(),...n}),headers:{"Content-Type":"application/json",...c},method:a||"POST",signal:l||(i>0?t:null)};const s=new Request(e,r);if(o)await o(s);const d=await fetch(e,r);return d}),{errorInstance:new Fe({body:n,url:e}),timeout:i,signal:true});if(s)await s(t);let r;if(t.headers.get("Content-Type")?.startsWith("application/json"))r=await t.json();else{r=await t.text();r=JSON.parse(r||"{}")}if(!t.ok){throw new De({body:n,details:Be(r.error)||t.statusText,headers:t.headers,status:t.status,url:e})}return r}catch(t){if(t instanceof De)throw t;if(t instanceof Fe)throw t;throw new De({body:n,cause:t,url:e})}}}}function kt(e,t={}){const{batch:r,fetchOptions:n,key:o="http",name:s="HTTP JSON-RPC",onFetchRequest:i,onFetchResponse:u,retryDelay:c}=t;return({chain:a,retryCount:l,timeout:d})=>{const{batchSize:f=1e3,wait:h=0}=typeof r==="object"?r:{};const b=t.retryCount??l;const p=d??t.timeout??1e4;const w=e||a?.rpcUrls.default.http[0];if(!w)throw new Rt;const g=Mt(w,{fetchOptions:n,onRequest:i,onResponse:u,timeout:p});return Et({key:o,name:s,async request({method:e,params:t}){const n={method:e,params:t};const{schedule:o}=bt({id:w,wait:h,shouldSplitBatch(e){return e.length>f},fn:e=>g.request({body:e}),sort:(e,t)=>e.id-t.id});const s=async e=>r?o(e):[await g.request({body:e})];const[{error:i,result:u}]=await s(n);if(i)throw new He({body:n,error:i,url:w});return u},retryCount:b,retryDelay:c,timeout:p,type:"http"},{fetchOptions:n,url:w})}}function It(e,t){let r;let n;let o;let s="";for(r in e){if((o=e[r])!==void 0){if(Array.isArray(o)){for(n=0;n<o.length;n++){s&&(s+="&");s+=`${encodeURIComponent(r)}=${encodeURIComponent(o[n])}`}}else{s&&(s+="&");s+=`${encodeURIComponent(r)}=${encodeURIComponent(o)}`}}}return(t||"")+s}function zt(e,t){function r(r){if(typeof r==="object"&&r!==null){try{return e(r)}catch(e){}}else if(typeof r==="string"&&typeof t==="function"){try{t(r);return e(r)}catch(e){}}return r}return e=>{e={...e};if(e){Object.keys(e).forEach((t=>{const n=e[t];if(typeof n==="undefined"||n===void 0){delete e[t]}else{e[t]=r(n)}}))}const t=It(e).toString();return t?`?${t}`:""}}var Tt=zt(JSON.stringify,JSON.parse);var qt=e=>{try{return e()}catch(e){return null}};function Pt(e){return[...new Uint8Array(e)].map((e=>e.toString(16).padStart(2,"0"))).join("")}function Ct(){return window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone}var Nt=(e=>{e["Auth"]="Auth";e["SignMessage"]="SignMessage";e["SignEvm"]="SignEvm";e["SignPsbt"]="SignPsbt";e["BatchSignPsbt"]="BatchSignPsbt";e["SignCkbTx"]="SignCkbTx";e["SignCotaNFT"]="SignCotaNFT";e["SignCkbRawTx"]="SignCkbRawTx";e["SignNostrEvent"]="SignNostrEvent";e["EncryptNostrMessage"]="EncryptNostrMessage";e["EvmWeb2Login"]="EvmWeb2Login";e["DecryptNostrMessage"]="DecryptNostrMessage";e["AuthMiniApp"]="AuthMiniApp";e["SignMiniAppMessage"]="SignMiniAppMessage";e["SignMiniAppEvm"]="SignMiniAppEvm";return e})(Nt||{});var Lt={joyidAppURL:"https://testnet.joyid.dev"};var _t=()=>Lt;var Bt=class e extends Error{constructor(t,r){super(r);this.error=t;this.error_description=r;Object.setPrototypeOf(this,e.prototype)}};var Dt=class e extends Bt{constructor(){super("timeout","Timeout");Object.setPrototypeOf(this,e.prototype)}};var Ht=class e extends Dt{constructor(t){super();this.popup=t;Object.setPrototypeOf(this,e.prototype)}};var Ft=class e extends Bt{constructor(t){super("cancelled","Popup closed");this.popup=t;Object.setPrototypeOf(this,e.prototype)}};var Jt=class extends Bt{constructor(e){super("NotSupported","Popup window is blocked by browser. see: https://docs.joy.id/guide/best-practice#popup-window-blocked");this.popup=e;Object.setPrototypeOf(this,Ft.prototype)}};var Vt="joyid-redirect";var Wt=(e,t,r)=>{const n=e.joyidAppURL??_t().joyidAppURL;const o=new URL(`${n}`);o.pathname=r;let s=e.redirectURL;if(t==="redirect"){const e=new URL(s);e.searchParams.set(Vt,"true");s=e.href}o.searchParams.set("type",t);const i=Tt({...e,redirectURL:s});o.searchParams.set("_data_",i);return o.href};var Xt=3e3;var Gt=(e="")=>{const t=400;const r=600;const n=window.screenX+(window.innerWidth-t)/2;const o=window.screenY+(window.innerHeight-r)/2;return window.open(e,"joyid:authorize:popup",`left=${n},top=${o},width=${t},height=${r},resizable,scrollbars=yes,status=1`)};var Kt=async e=>new Promise(((t,r)=>{if(Ct()){r(new Jt(e.popup))}let n;let o;const s=setInterval((()=>{if(e.popup?.closed){clearInterval(s);clearTimeout(o);window.removeEventListener("message",n,false);r(new Ft(e.popup))}}),1e3);o=setTimeout((()=>{clearInterval(s);r(new Ht(e.popup));window.removeEventListener("message",n,false)}),(e.timeoutInSeconds??Xt)*1e3);n=i=>{const u=e.joyidAppURL??_t().joyidAppURL;if(u==null){throw new Error("joyidAppURL is not set in the config")}const c=new URL(u);if(i.origin!==c.origin){return}if(!i.data||i.data?.type!==e.type){return}clearTimeout(o);clearInterval(s);window.removeEventListener("message",n,false);e.popup.close();if(i.data.error){r(new Error(i.data.error))}t(i.data.data)};window.addEventListener("message",n)}));var Qt="joyid-block-dialog-style";var Yt="joyid-block-dialog-approve";var Zt="joyid-block-dialog-reject";var er=`\n.joyid-block-dialog {\n  position: fixed;\n  top: 32px;\n  left: 50%;\n  width: 340px;\n  margin-left: -170px;\n  background: white;\n  color: #333;\n  display: flex;\n  flex-flow: row nowrap;\n  justify-content: space-between;\n  align-items: center;\n  height: 110px;\n  z-index: 100002;\n  box-sizing: border-box;\n  border: 1px solid #ffffff;\n  border-radius: 8px;\n  padding: 16px 20px;\n}\n.joyid-block-dialog-bg {\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0,0,0,0.5);\n  position: fixed;\n  top: 0;\n  left: 0;\n  display: none;\n  z-index: 100001;\n  display: block;\n}\n.joyid-block-dialog-title {\n  font-weight: bold;\n  font-size: 14px;\n  margin-bottom: 8px;\n}\n.joyid-block-dialog-tip {\n  font-size: 12px;\n  color: #777;\n}\n.joyid-block-dialog-btn {\n  width: 90px;\n  height: 35px;\n  font-size: 12px;\n  text-align: center;\n  border-radius: 6px;\n  cursor: pointer;\n}\n.joyid-block-dialog-action {\n  text-align: right;\n}\n#${Yt} {\n  border: 1px solid #333;\n  color: #333;\n  background: #D2FF00;\n  margin-bottom: 8px;\n}\n\n#${Zt} {\n  background: transparent;\n}\n`;var tr=`\n<div class="joyid-block-dialog">\n  <div class="joyid-block-dialog-content">\n    <div class="joyid-block-dialog-title">\n      Request Pop-up\n    </div>\n    <div class="joyid-block-dialog-tip">\n      Click Approve to complete creating or using wallet\n    </div>\n  </div>\n  <div class="joyid-block-dialog-action">\n    <button class="joyid-block-dialog-btn" id="${Yt}">Approve</button>\n    <button class="joyid-block-dialog-btn" id="${Zt}">Reject</button>\n  </div>\n</div>\n`;var rr=()=>{const e=document.getElementById(Qt);if(e!=null){return}const t=document.createElement("style");t.appendChild(document.createTextNode(er));const r=document.head??document.getElementsByTagName("head")[0];r.appendChild(t)};var nr=async e=>{rr();const t=document.createElement("div");t.innerHTML=tr;document.body.appendChild(t);const r=document.createElement("div");r.className="joyid-block-dialog-bg";document.body.appendChild(r);const n=document.getElementById(Yt);const o=document.getElementById(Zt);const s=()=>{document.body.removeChild(t);document.body.removeChild(r)};return new Promise(((t,r)=>{n?.addEventListener("click",(async()=>{try{const r=await e();s();t(r)}catch(e){s();r(e)}}));o?.addEventListener("click",(()=>{s();r(new Error("User Rejected"))}))}))};var or=(e,t)=>Wt(e,t,"/auth");var sr=async(e,t)=>{t=t??{};if(t.popup==null){t.popup=Gt("");if(t.popup==null){return nr((async()=>sr(e,t)))}}t.popup.location.href=or(e,"popup");return Kt({...t,type:"Auth"})};var ir=(e,t)=>Wt(e,t,"/sign-message");var ur=async(e,t)=>{t=t??{};if(t.popup==null){t.popup=Gt("");if(t.popup==null){return nr((async()=>ur(e,t)))}}t.popup.location.href=ir(e,"popup");return Kt({...t,type:"SignMessage"})};var cr="joyid:ethereum::address";var ar=(e,t="popup")=>Wt({...Lt,...e},t,"/sign-evm");var lr=(e,t="popup")=>Wt({...Lt,...e},t,"/sign-typed-data");var dr=e=>{Object.assign(Lt,e);return Lt};var fr=async e=>{e={...Lt,...e};const t=await sr({redirectURL:location.href,requestNetwork:"ethereum",...e});qt((()=>{localStorage.setItem(cr,t.ethAddress)}));return t.ethAddress};var hr=()=>{qt((()=>{localStorage.removeItem(cr)}))};var br=()=>qt((()=>localStorage.getItem(cr)))??null;var pr=e=>{let t=e;if(t==null){const e=br();if(e!=null){t=e}}if(t==null){throw new Error("signerAddress is required")}return t};var wr=async(e,t,r)=>{const n=typeof e!=="string";r={...Lt,...r};t=pr(t);const o=await ur({requestNetwork:"ethereum",challenge:typeof e==="string"?e:Pt(e),isData:n,address:t,redirectURL:location.href,...r});return o.signature};var gr=async(e,t,r)=>{r={...Lt,...r};t=pr(t);if(r.popup==null){r.popup=Gt("");if(r.popup==null){return nr((async()=>gr(e,t,r)))}}const{popup:n,timeoutInSeconds:o,...s}=r;r.popup.location.href=lr({...s,typedData:e,signerAddress:t,redirectURL:location.href});const i=await Kt({timeoutInSeconds:o??5e3,popup:n,type:Nt.SignMessage});return i.signature};var mr=async(e,t,r,n)=>{const o=t??e.from??br();if(o==null){throw new Error("signerAddress or tx.from is required")}r={...Lt,...r};if(r.popup==null){r.popup=Gt("");if(r.popup==null){return nr((async()=>mr(e,o,r,n)))}}const{popup:s,timeoutInSeconds:i,...u}=r;r.popup.location.href=ar({...u,tx:e,signerAddress:o,redirectURL:location.href,isSend:n});const c=await Kt({timeoutInSeconds:i??5e3,popup:s,type:Nt.SignEvm});return c.tx};var yr=async(e,t,r)=>mr(e,t,r,true);function vr(e){if(n(e)){return _e(R(e))}return e}var jr="joyid:ethereum:chainId";var xr=class extends e{constructor(e,t){super();this.account=null;this.request=async e=>{switch(e.method){case"eth_requestAccounts":{const e=await this.connect();this.account=e;return[e]}case"eth_accounts":{return[this.account]}case"eth_chainId":{return this.chainId}case"eth_sign":{throw new Error("eth_sign is not supported, use personal_sign instead")}case"wallet_switchEthereumChain":{const t=e.params?.[0]?.chainId;this.switchChain(parseInt(t));this.emit("chainChanged",t);return void 0}case"personal_sign":{const[t,r]=e.params;const o=vr(t);try{const e=await wr(n(o)?R(o):o,r);return e}catch(e){throw new We(e,{code:4001,shortMessage:"User rejected the request"})}}case"eth_sendTransaction":{const[t]=e.params;try{const e=await yr(t);return e}catch(e){throw new We(e,{code:4001,shortMessage:"User rejected the request"})}}case"eth_signTypedData_v4":{const[t,r]=e.params;const n=vr(r);try{const e=await gr(JSON.parse(n),t);return e}catch(e){throw new We(e,{code:4001,shortMessage:"User rejected the request"})}}default:{const t=this.chains.find((e=>e.id===this.chainId));if(t==null){throw new Error(`Unsupported chain id: ${this.chainId}, chainId must be one of ${this.chains.map((e=>e.id)).join(",")}`)}const r=kt(t.rpcUrls.default.http[0]);return r({chain:t}).request(e)}}};let r=t.network?.chainId??e?.[0]?.id;const o=qt((()=>localStorage.getItem(jr)));if(o!=null){r=Number(o)}if(r==null){throw new Error("No chain provided")}this.chainId=r;this.account=br();this.chains=e;this.initConfig(r,t)}getAccount(){return this.account??br()}initConfig(e,t){const r=this.chains.find((t=>t.id===e));if(r==null){throw new Error(`Unsupported chain id: ${e}, chainId must be one of ${this.chains.map((e=>e.id)).join(",")}`)}const n=r.rpcUrls.default.http[0];if(!n){throw new Error("No rpc url provided in chains config")}dr({...t,network:{chainId:r.id,name:r.name,nativeCurrency:r.nativeCurrency,rpcUrls:r.rpcUrls.default.http,blockExplorerUrls:r.blockExplorers?.default.url?[r.blockExplorers.default.url]:void 0}});this.chainId=e;return r}switchChain(e){const t=this.initConfig(e);qt((()=>{localStorage.setItem(jr,e.toString())}));return t}getChainId(){return this.chainId}async connect(){const e=await fr();this.emit("connect",{chainId:this.chainId.toString()});this.emit("accountsChanged",[e]);this.emit("chainChanged",this.chainId.toString());this.account=e;return e}disconnect(){qt((()=>{this.emit("disconnect");this.account=null;hr();localStorage.removeItem(jr)}))}};const Or=async()=>{const e=t.map((e=>{const t=r[e];return{id:e,name:"ChainID "+e,nativeCurrency:{name:"Ethereum",symbol:"ETH",decimals:18},rpcUrls:{default:{http:typeof t.rpc==="string"?[t.rpc]:t.rpc}},blockExplorers:t.explorer?{default:{name:"Default explorer",url:t.explorer,apiUrl:""}}:null}}));return new xr(e,{name:"Smart Token Viewer",logo:`${location.origin}/assets/icon/icon.png`,joyidAppURL:"https://app.joy.id"})};export{Or as getJoyIDProviderInstance};
//# sourceMappingURL=p-4dbb4ed0.js.map