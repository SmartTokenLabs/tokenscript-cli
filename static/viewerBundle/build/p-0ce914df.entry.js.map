{"version":3,"names":["tokenIconCss","TokenIcon","componentWillLoad","src","this","image","h","alt","imageTitle","onLoad","loaded","onError","e","createAvatar","generateAvatar","text","canvas","document","createElement","context","getContext","width","height","fillStyle","getRandomBackgroundColor","fillRect","font","textAlign","textBaseline","words","split","initials","i","length","chars","toUpperCase","fillText","toDataURL","render","class","title","tokensGridItemCss","TokensGridItem","async","cardButtons","cards","tokenScript","getCards","index","card","entries","label","type","chainId","token","collectionDetails","selectedNftId","tokenId","undefined","enabled","isEnabledOrReason","push","onClick","showCard","disabled","name","toString","color","size","style"],"sources":["./src/components/atoms/token-icon.css?tag=token-icon&encapsulation=shadow","./src/components/atoms/token-icon.tsx","./src/components/viewer/tokens-grid-item.css?tag=tokens-grid-item&encapsulation=shadow","./src/components/viewer/tokens-grid-item.tsx"],"sourcesContent":["\n:host {\n\tposition: relative;\n\twidth: 100%;\n\tmin-height: 250px;\n}\n\nimg {\n\twidth: 100%;\n}\n\ndiv {\n\twidth: 100%;\n\tmin-height: 250px;\n\tposition: relative;\n\toverflow: hidden;\n}\n\n.shimmer {\n\tdisplay: inline-block;\n\theight: 1em;\n\tbackground-color: #dddbdd;\n}\n\n.shimmer:after {\n\tposition: absolute;\n\ttop: 0;\n\tright: 0;\n\tbottom: 0;\n\tleft: 0;\n\ttransform: translateX(-100%);\n\tbackground-image: linear-gradient(\n\t\t90deg,\n\t\trgba(255, 255, 255, 0) 0,\n\t\trgba(255, 255, 255, 0.2) 20%,\n\t\trgba(255, 255, 255, 0.5) 60%,\n\t\trgba(255, 255, 255, 0)\n\t);\n\tanimation: shimmer 2s infinite;\n\tcontent: \"\";\n}\n\n@keyframes shimmer {\n\t100% {\n\t\ttransform: translateX(100%);\n\t}\n}\n","import {Component, h, JSX, Prop, State} from \"@stencil/core\";\n\n\n@Component({\n\ttag: 'token-icon',\n\tstyleUrl: 'token-icon.css',\n\tshadow: true,\n})\nexport class TokenIcon {\n\n\t@Prop()\n\tsrc: string;\n\n\t@Prop()\n\timageTitle: string;\n\n\t@State()\n\timage: JSX.Element\n\n\t@State()\n\tloaded = false;\n\n\tcomponentWillLoad(){\n\n\t\tlet src = this.src\n\t\tlet image;\n\n\t\tif (src && src !== 'undefined') {\n\t\t\t// Create image elements and add onload/onerror events\n\t\t\t/*image = document.createElement('img')\n\t\t\timage.loading = 'lazy'\n\t\t\timage.addEventListener('load', (e: Event) => {\n\t\t\t\tthis.loaded = true;\n\t\t\t})\n\t\t\timage.addEventListener('error', (e: Event) => {\n\t\t\t\tthis.image = this.createAvatar();\n\t\t\t\tthis.loaded = true;\n\t\t\t})\n\t\t\timage.src = src;*/\n\n\t\t\timage = (<img alt={this.imageTitle} src={src}\n\t\t\t\t\t\tonLoad={() => {\n\t\t\t\t\t\t\tthis.loaded = true;\n\t\t\t\t\t\t}}\n\t\t\t\t\t  \tonError={(e: Event) => {\n\t\t\t\t\t\t\tthis.image = this.createAvatar();\n\t\t\t\t\t\t\tthis.loaded = true;\n\t\t\t\t\t\t}} />);\n\t\t} else {\n\t\t\timage = this.createAvatar()\n\t\t\tthis.loaded = true;\n\t\t}\n\n\t\tthis.image = image;\n\t}\n\n\tprivate createAvatar() {\n\t\treturn (\n\t\t\t<img alt={this.imageTitle} src={this.generateAvatar(this.imageTitle)}/>\n\t\t)\n\t}\n\n\tprivate generateAvatar(text: string) {\n\t\tconst canvas = document.createElement('canvas')\n\t\tconst context = canvas.getContext('2d')\n\n\t\tcanvas.width = 200\n\t\tcanvas.height = 200\n\n\t\tif (!context) return ''\n\n\t\tcontext.fillStyle = this.getRandomBackgroundColor()\n\t\tcontext.fillRect(0, 0, canvas.width, canvas.height)\n\t\tcontext.font = \"bold 100px 'Arial', sans-serif\"\n\t\tcontext.fillStyle = '#fff'\n\t\tcontext.textAlign = 'center'\n\t\tcontext.textBaseline = 'middle'\n\n\t\tlet words = text.split(' ')\n\t\tlet initials = ''\n\n\t\tfor (let i = 0; initials.length < 2 && i < words.length; i++) {\n\t\t\tlet chars = words[i].split('')\n\t\t\tif (chars.length) initials += chars[0].toUpperCase()\n\t\t}\n\n\t\tcontext.fillText(initials, canvas.width / 2, canvas.height / 2)\n\n\t\treturn canvas.toDataURL('image/png')\n\t}\n\n\t// TODO: Generate random colors default icons\n\tprivate getRandomBackgroundColor() {\n\t\treturn '#0029a7'\n\t}\n\n\trender () {\n\t\treturn (\n\t\t\t<div class={this.loaded ? \"\" : \"shimmer\"} title={this.imageTitle}>\n\t\t\t\t{this.image}\n\t\t\t</div>\n\t\t)\n\t}\n\n}\n","\n.tokens-grid-item {\n\tpadding: 10px;\n\tmargin: 10px;\n\tborder: 1px solid #939393;\n\tborder-radius: 5px;\n\twidth: 250px;\n}\n\n.tokens-grid-item img {\n\tmax-width: 250px;\n}\n\n.tokens-grid-item h5 {\n\tmargin: 10px 0;\n}\n\n.tokens-grid-item span {\n\toverflow: hidden;\n\tmax-width: 100%;\n\tdisplay: inline-block;\n\ttext-overflow: ellipsis ellipsis;\n}\n\n.actions {\n\ttext-align: center;\n}\n\n.actions > button {\n\tdisplay: block;\n\twidth: 100%;\n\tmargin: 8px 0;\n}\n","import {Component, h, JSX, Prop, State} from \"@stencil/core\";\nimport {ITokenContext, TokenScript} from \"@tokenscript/engine-js/src/TokenScript\";\nimport {IToken} from \"@tokenscript/engine-js/src/tokens/IToken\";\nimport {INFTTokenDetail} from \"@tokenscript/engine-js/src/tokens/INFTTokenDetail\";\nimport {Card} from \"@tokenscript/engine-js/src/tokenScript/Card\";\nimport {TokenGridContext} from \"./tokens-grid\";\n\n@Component({\n\ttag: 'tokens-grid-item',\n\tstyleUrl: 'tokens-grid-item.css',\n\tshadow: true,\n})\nexport class TokensGridItem {\n\n\t@Prop() tokenScript: TokenScript;\n\n\t@Prop() token: TokenGridContext;\n\n\t@Prop() showCard: (card: Card, token: TokenGridContext, index: number) => void;\n\n\t@State() cardButtons: JSX.Element[];\n\n\tasync componentDidLoad() {\n\n\t\tconst cardButtons: JSX.Element[] = [];\n\t\tconst cards = this.tokenScript.getCards();\n\n\t\tfor (let [index, card] of cards.entries()){\n\n\t\t\tlet label = card.label;\n\n\t\t\tif (label === \"Unnamed Card\")\n\t\t\t\tlabel = card.type === \"token\" ? \"Token Info\" : card.type + \" Card\";\n\n\t\t\t// TODO: Rework NFT/fungible interfaces so they are cross compatible\n\t\t\tconst context = {\n\t\t\t\tchainId: (\"chainId\" in this.token) ? this.token.chainId : this.token.collectionDetails.chainId,\n\t\t\t\tselectedNftId: (\"tokenId\" in this.token) ? this.token.tokenId : undefined\n\t\t\t}\n\n\t\t\tconst enabled = await card.isEnabledOrReason(context);\n\n\t\t\tcardButtons.push((\n\t\t\t\t<button onClick={() => this.showCard(card, this.token, index)}\n\t\t\t\t\t\tdisabled={enabled !== true}\n\t\t\t\t\t\ttitle={enabled !== true ? enabled : label}>\n\t\t\t\t\t{label}\n\t\t\t\t</button>\n\t\t\t));\n\t\t}\n\n\t\tthis.cardButtons = cardButtons;\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div class=\"tokens-grid-item\">\n\t\t\t\t<token-icon src={this.token.image} imageTitle={this.token.name}/>\n\t\t\t\t<h5>{this.token.name}</h5>\n\t\t\t\t{\n\t\t\t\t\t\"tokenId\" in this.token ?\n\t\t\t\t\t\t<span title={this.token.tokenId.toString()}>#{this.token.tokenId}</span>\n\t\t\t\t\t\t: ''\n\t\t\t\t}\n\t\t\t\t<div class=\"actions\">\n\t\t\t\t\t{ this.cardButtons ?\n\t\t\t\t\t\tthis.cardButtons :\n\t\t\t\t\t\t<loading-spinner color={\"#595959\"} size={\"small\"} style={{textAlign: \"center\"}} />\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n}\n"],"mappings":"2CAAA,MAAMA,EAAe,sjB,MCQRC,EAAS,M,uGAYZ,K,CAETC,oBAEC,IAAIC,EAAMC,KAAKD,IACf,IAAIE,EAEJ,GAAIF,GAAOA,IAAQ,YAAa,CAa/BE,EAASC,EAAA,OAAKC,IAAKH,KAAKI,WAAYL,IAAKA,EACtCM,OAAQ,KACPL,KAAKM,OAAS,IAAI,EAEjBC,QAAUC,IACXR,KAAKC,MAAQD,KAAKS,eAClBT,KAAKM,OAAS,IAAI,G,KAEhB,CACNL,EAAQD,KAAKS,eACbT,KAAKM,OAAS,I,CAGfN,KAAKC,MAAQA,C,CAGNQ,eACP,OACCP,EAAA,OAAKC,IAAKH,KAAKI,WAAYL,IAAKC,KAAKU,eAAeV,KAAKI,a,CAInDM,eAAeC,GACtB,MAAMC,EAASC,SAASC,cAAc,UACtC,MAAMC,EAAUH,EAAOI,WAAW,MAElCJ,EAAOK,MAAQ,IACfL,EAAOM,OAAS,IAEhB,IAAKH,EAAS,MAAO,GAErBA,EAAQI,UAAYnB,KAAKoB,2BACzBL,EAAQM,SAAS,EAAG,EAAGT,EAAOK,MAAOL,EAAOM,QAC5CH,EAAQO,KAAO,iCACfP,EAAQI,UAAY,OACpBJ,EAAQQ,UAAY,SACpBR,EAAQS,aAAe,SAEvB,IAAIC,EAAQd,EAAKe,MAAM,KACvB,IAAIC,EAAW,GAEf,IAAK,IAAIC,EAAI,EAAGD,EAASE,OAAS,GAAKD,EAAIH,EAAMI,OAAQD,IAAK,CAC7D,IAAIE,EAAQL,EAAMG,GAAGF,MAAM,IAC3B,GAAII,EAAMD,OAAQF,GAAYG,EAAM,GAAGC,a,CAGxChB,EAAQiB,SAASL,EAAUf,EAAOK,MAAQ,EAAGL,EAAOM,OAAS,GAE7D,OAAON,EAAOqB,UAAU,Y,CAIjBb,2BACP,MAAO,S,CAGRc,SACC,OACChC,EAAA,OAAKiC,MAAOnC,KAAKM,OAAS,GAAK,UAAW8B,MAAOpC,KAAKI,YACpDJ,KAAKC,M,aCnGV,MAAMoC,EAAoB,0W,MCYbC,EAAc,M,4HAU1BC,yBAEC,MAAMC,EAA6B,GACnC,MAAMC,EAAQzC,KAAK0C,YAAYC,WAE/B,IAAK,IAAKC,EAAOC,KAASJ,EAAMK,UAAU,CAEzC,IAAIC,EAAQF,EAAKE,MAEjB,GAAIA,IAAU,eACbA,EAAQF,EAAKG,OAAS,QAAU,aAAeH,EAAKG,KAAO,QAG5D,MAAMjC,EAAU,CACfkC,QAAU,YAAajD,KAAKkD,MAASlD,KAAKkD,MAAMD,QAAUjD,KAAKkD,MAAMC,kBAAkBF,QACvFG,cAAgB,YAAapD,KAAKkD,MAASlD,KAAKkD,MAAMG,QAAUC,WAGjE,MAAMC,QAAgBV,EAAKW,kBAAkBzC,GAE7CyB,EAAYiB,KACXvD,EAAA,UAAQwD,QAAS,IAAM1D,KAAK2D,SAASd,EAAM7C,KAAKkD,MAAON,GACrDgB,SAAUL,IAAY,KACtBnB,MAAOmB,IAAY,KAAOA,EAAUR,GACpCA,G,CAKJ/C,KAAKwC,YAAcA,C,CAGpBN,SACC,OACChC,EAAA,OAAKiC,MAAM,oBACVjC,EAAA,cAAYH,IAAKC,KAAKkD,MAAMjD,MAAOG,WAAYJ,KAAKkD,MAAMW,OAC1D3D,EAAA,UAAKF,KAAKkD,MAAMW,MAEf,YAAa7D,KAAKkD,MACjBhD,EAAA,QAAMkC,MAAOpC,KAAKkD,MAAMG,QAAQS,YAAU,IAAI9D,KAAKkD,MAAMG,SACvD,GAEJnD,EAAA,OAAKiC,MAAM,WACRnC,KAAKwC,YACNxC,KAAKwC,YACLtC,EAAA,mBAAiB6D,MAAO,UAAWC,KAAM,QAASC,MAAO,CAAC1C,UAAW,a"}