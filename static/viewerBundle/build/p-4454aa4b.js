import{r as registerInstance,h as h$1,H as Host,c as createEvent,g as getElement}from"./p-6ad9f672.js";const AttributeTable$1=class{constructor(e){registerInstance(this,e)}render(){return h$1(Host,{key:"eea275ca5d139574c890d242ce4fe84b5b20bf27"},h$1("h2",{key:"375cbe5541f9cc4c5a27d72986a0006127a160ee"},"Welcome to TokenScript Viewer"),h$1("p",{key:"bc08e6b723b5a9dbc7bb234501febbc5f80db007"},"TokenScript Viewer is an easy way to run TokenScripts in your browser if you don't have a TokenScript compatible wallet.",h$1("br",{key:"8f444462055e63c4ecf97a19a3b32c5746b793fd"}),"If you want to try TokenScripts in your wallet, you can download ",h$1("a",{key:"7bb20f13b166d4804bc162a5dbf1aae2d4a27566",href:"https://alphawallet.com/",target:"_blank"},"AlphaWallet")," for Android and iOS."),h$1("h3",{key:"472dd11a8f566440ab3fabc1b138c348b48a927b"},"What is TokenScript?"),h$1("p",{key:"ac666becaefb1620bcef6498e965370465ba4e65"},"TokenScript is a framework for providing rich, embedded & secure token utility for blockchain & attestation tokens.",h$1("br",{key:"85beaee03e2689cf9c531c129db225727ee74bd3"}),"Simply put, it's a new way of writing DApps which provides UX & security benefits for users by cryptographically tying the frontend to the smart contract or attestation issuer.",h$1("br",{key:"895c00d611775b7361104edc6aaeaaf88d4ce4a9"})),h$1("p",{key:"c73308f5240bd17b4532f165fce7fd87c99ca2a3"},"For more information please visit ",h$1("a",{key:"a4b2cc0a55d700a1ad7b96bfdfa3601cd69aa58b",href:"https://www.tokenscript.org/",target:"_blank"},"https://www.tokenscript.org/")))}};const showTransactionNotification=async(e,t)=>{switch(e.status){case"submitted":await t.emit({type:"info",title:"Transaction submitted",description:h$1("span",null,"Processing TX, please wait.. ",h$1("br",null),"TX Number: "+e.txNumber)});break;case"confirmed":await t.emit({type:"success",title:"Transaction confirmed",description:h$1("span",null,"TX "+e.txNumber+" confirmed!",h$1("br",null),e.txLink?h$1("a",{href:e.txLink,target:"_blank"},"View On Block Scanner"):"")});break}};const handleTransactionError=(e,t)=>{let r=e.message;const n=r.match(/reverted with reason string '(.*)'/);if(n){r=n[1]}else{const e=r.match(/Details: (.*)\\n/);if(e){r=e[1]}else{const e=/"message": "(.*)"/g;let t;const n=[];while(t=e.exec(r)){if(n.indexOf(t[1])===-1)n.push(t[1])}if(n.length)r=n.join("\n")}}t.emit({type:"error",title:"Transaction Error",description:r})};const actionBarCss=".jid-action-bar{display:flex;padding:20px 20px 20px 22px;gap:8px;max-width:650px;margin:0 auto;position:relative}.jid-overflow-btn{flex-grow:0;color:#FFF;border:#333;background:#333}.jid-transfer-btn{flex-grow:1;border:1px solid #333;background:#D2FF00}.overflow-heading{font-size:18px;font-weight:700;text-align:center;margin-bottom:32px}.overflow-buttons{display:flex;flex-direction:column;gap:16px}loading-spinner{text-align:center}";const ActionBarStyle0=actionBarCss;const ActionBar=class{constructor(e){registerInstance(this,e);this.showToast=createEvent(this,"showToast",7);this.showLoader=createEvent(this,"showLoader",7);this.hideLoader=createEvent(this,"hideLoader",7);this.engine=undefined;this.tokenDetails=undefined;this.tokenScript=undefined;this.actionsEnabled=undefined;this.cardButtons=undefined}async initTokenScript(){this.loadCardButtons();this.tokenScript.on("TOKENS_UPDATED",(()=>{this.cardButtons=undefined;this.loadCardButtons()}))}componentDidLoad(){if(this.tokenScript)this.initTokenScript()}async loadCardButtons(){const e=[];const t=this.tokenScript.getCards();for(let[r,n]of t.entries()){let t=n.label;if(t==="Unnamed Card")t=n.type==="token"?"Token Info":n.type+" Card";try{const i=await n.isEnabledOrReason();if(i===false)continue;e.push(h$1("button",{class:"jid-btn "+this.getCardButtonClass(n,r),onClick:()=>this.showCard(n),disabled:i!==true,title:i!==true?i:t},t))}catch(e){console.error("Failed to check if card is available",e)}}this.cardButtons=e}getCardButtonClass(e,t){switch(e.buttonClass){case"featured":return"btn-featured";case"primary":return"btn-primary";case"secondary":return"jid-btn-secondary";default:return e.type==="token"||t===0?"btn-primary":"jid-btn-secondary"}}async showCard(e){window.scrollTo(0,0);try{await this.tokenScript.showOrExecuteTokenCard(e,(async e=>{if(e.status==="started")this.showLoader.emit();if(e.status==="confirmed")this.hideLoader.emit();await showTransactionNotification(e,this.showToast)}))}catch(e){console.error(e);this.hideLoader.emit();handleTransactionError(e,this.showToast);return}}actionsAvailable(){if(!this.actionsEnabled){this.showToast.emit({type:"error",title:"Action is not available now",description:"Please try again later"});return false}return true}render(){return h$1("div",{key:"10fe0f82f26a2770fd0e4ff397f755fdb22d88f7",class:"jid-action-bar"},this.tokenScript?[h$1("button",{class:"jid-btn jid-overflow-btn",onClick:()=>{if(!this.actionsAvailable())return;this.overflowDialog.openDialog()}},h$1("img",{alt:"more actions",src:"/assets/icon/joyid/arrow-square-down.png"})," More"),h$1("action-overflow-modal",{ref:e=>this.overflowDialog=e},h$1("h2",{class:"overflow-heading"},"More actions"),h$1("div",{class:"overflow-buttons"},this.cardButtons?this.cardButtons:h$1("loading-spinner",{color:"#595959"})))]:"",h$1("button",{key:"e5d82cc445b631634f2278865fd9dde409ba2bb3",class:"jid-btn jid-transfer-btn",onClick:()=>{if(!this.actionsAvailable())return;this.transferDialog.openDialog()}},"Transfer"),h$1("transfer-dialog",{key:"07a4c6643cc13be8fd0181755472a2e8833269b6",engine:this.engine,tokenDetails:this.tokenDetails,ref:e=>this.transferDialog=e}))}static get watchers(){return{tokenScript:["initTokenScript"]}}};ActionBar.style=ActionBarStyle0;const actionOverflowModalCss="";const ActionOverflowModalStyle0=actionOverflowModalCss;const ActionOverflowModal=class{constructor(e){registerInstance(this,e)}async openDialog(){await this.dialog.openDialog()}async closeDialog(){await this.dialog.closeDialog()}render(){return h$1("popover-dialog",{key:"def74abe334f623aedc10b1a23b4f48fd72379ba",ref:e=>this.dialog=e,dialogStyles:{maxWidth:"380px"}},h$1("slot",{key:"7a463aad5c48c98da042b0dfef572e47fa44701c"}))}};ActionOverflowModal.style=ActionOverflowModalStyle0;var ChainID;(function(e){e[e["ETHEREUM"]=1]="ETHEREUM";e[e["POLYGON"]=137]="POLYGON";e[e["ARBITRUM"]=42161]="ARBITRUM";e[e["OPTIMISM"]=10]="OPTIMISM";e[e["BSC"]=56]="BSC";e[e["BSC_TESTNET"]=97]="BSC_TESTNET";e[e["GOERLI"]=5]="GOERLI";e[e["SEPOLIA"]=11155111]="SEPOLIA";e[e["KOVAN"]=42]="KOVAN";e[e["MUMBAI"]=80001]="MUMBAI";e[e["AVALANCH"]=43114]="AVALANCH";e[e["FANTOM"]=250]="FANTOM";e[e["KLAYTN"]=8217]="KLAYTN";e[e["BAOBAB"]=1001]="BAOBAB";e[e["HARDHAT_LOCALHOST"]=31337]="HARDHAT_LOCALHOST"})(ChainID||(ChainID={}));const CHAIN_MAP={[ChainID.ETHEREUM]:"eth",[ChainID.POLYGON]:"polygon",[ChainID.ARBITRUM]:"arbitrum",[ChainID.OPTIMISM]:"optimism",[ChainID.GOERLI]:"goerli",[ChainID.SEPOLIA]:"sepolia",[ChainID.KOVAN]:"kovan",[ChainID.BSC]:"bsc",[ChainID.MUMBAI]:"mumbai",[ChainID.AVALANCH]:"avalanche",[ChainID.FANTOM]:"fantom",[ChainID.KLAYTN]:"cypress",[ChainID.BAOBAB]:"baobab",[ChainID.HARDHAT_LOCALHOST]:"hardhat-localhost"};const CHAIN_NAME_MAP={[ChainID.ETHEREUM]:"Ethereum Mainnet",[ChainID.GOERLI]:"Goerli (Ethereum Testnet)",[ChainID.SEPOLIA]:"Sepolia (Ethereum Testnet)",[ChainID.POLYGON]:"Polygon",[ChainID.MUMBAI]:"Mumbai (Polygon Testnet)",[ChainID.ARBITRUM]:"Arbitrum",[ChainID.OPTIMISM]:"Optimism",[ChainID.BSC]:"Binance Smart Chain",[ChainID.AVALANCH]:"Avalanche",[ChainID.FANTOM]:"Fantom",[ChainID.KLAYTN]:"Cypress (Klaytn Mainnet)",[ChainID.BAOBAB]:"Baobab (Klaytn Testnet)",[ChainID.HARDHAT_LOCALHOST]:"Hardhat Localhost (EVM Test Network)"};const CHAIN_CONFIG={[ChainID.ETHEREUM]:{rpc:"https://mainnet.infura.io/v3/3ca8f1ba91f84e1f97c99f6218fe3743",explorer:"https://etherscan.com/tx/"},[ChainID.GOERLI]:{rpc:"https://eth-goerli.g.alchemy.com/v2/yVhq9zPJorAWsw-F87fEabSUl7cCU6z4",explorer:"https://goerli.etherscan.io/tx/"},[ChainID.SEPOLIA]:{rpc:"https://sepolia.infura.io/v3/9f79b2f9274344af90b8d4e244b580ef",explorer:"https://sepolia.etherscan.io/tx/"},[ChainID.POLYGON]:{rpc:"https://polygon-mainnet.infura.io/v3/3ca8f1ba91f84e1f97c99f6218fe3743",explorer:"https://polygonscan.com/tx/"},[ChainID.MUMBAI]:{rpc:"https://polygon-mumbai.g.alchemy.com/v2/rVI6pOV4irVsrw20cJxc1fxK_1cSeiY0",explorer:"https://mumbai.polygonscan.com/tx/"},[ChainID.BSC]:{rpc:"https://bsc-dataseed.binance.org/",explorer:"https://bscscan.com/tx/"},[ChainID.BSC_TESTNET]:{rpc:"https://data-seed-prebsc-1-s1.binance.org:8545",explorer:"https://testnet.bscscan.com/tx/"},[ChainID.AVALANCH]:{rpc:"https://api.avax.network/ext/bc/C/rpc",explorer:"https://cchain.explorer.avax.network/tx/"},[ChainID.FANTOM]:{rpc:"https://rpc.fantom.network/",explorer:"https://ftmscan.com/tx/"},[ChainID.ARBITRUM]:{rpc:"https://arb1.arbitrum.io/rpc",explorer:"https://arbiscan.io/tx/"},[ChainID.OPTIMISM]:{rpc:"https://mainnet.optimism.io",explorer:"https://optimistic.etherscan.io/tx/"},[ChainID.KLAYTN]:{rpc:"https://public-node-api.klaytnapi.com/v1/cypress",explorer:"https://scope.klaytn.com/tx/"},[ChainID.BAOBAB]:{rpc:"https://public-node-api.klaytnapi.com/v1/baobab",explorer:"https://baobab.scope.klaytn.com/tx/"},[ChainID.HARDHAT_LOCALHOST]:{rpc:"http://127.0.0.1:8545/",explorer:""}};const ERC721_ABI_JSON=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:false,inputs:[{indexed:true,internalType:"address",name:"owner",type:"address"},{indexed:true,internalType:"address",name:"approved",type:"address"},{indexed:true,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:false,inputs:[{indexed:true,internalType:"address",name:"owner",type:"address"},{indexed:true,internalType:"address",name:"operator",type:"address"},{indexed:false,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:false,inputs:[{indexed:false,internalType:"uint256",name:"_fromTokenId",type:"uint256"},{indexed:false,internalType:"uint256",name:"_toTokenId",type:"uint256"}],name:"BatchMetadataUpdate",type:"event"},{anonymous:false,inputs:[{indexed:false,internalType:"uint256",name:"_tokenId",type:"uint256"}],name:"MetadataUpdate",type:"event"},{anonymous:false,inputs:[{indexed:true,internalType:"address",name:"previousOwner",type:"address"},{indexed:true,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:false,inputs:[{indexed:true,internalType:"address",name:"from",type:"address"},{indexed:true,internalType:"address",name:"to",type:"address"},{indexed:true,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"string",name:"uri",type:"string"}],name:"safeMint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenOfOwnerByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"contractURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"}];const ERC20_ABI_JSON=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"ECDSAInvalidSignature",type:"error"},{inputs:[{internalType:"uint256",name:"length",type:"uint256"}],name:"ECDSAInvalidSignatureLength",type:"error"},{inputs:[{internalType:"bytes32",name:"s",type:"bytes32"}],name:"ECDSAInvalidSignatureS",type:"error"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"allowance",type:"uint256"},{internalType:"uint256",name:"needed",type:"uint256"}],name:"ERC20InsufficientAllowance",type:"error"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"uint256",name:"balance",type:"uint256"},{internalType:"uint256",name:"needed",type:"uint256"}],name:"ERC20InsufficientBalance",type:"error"},{inputs:[{internalType:"address",name:"approver",type:"address"}],name:"ERC20InvalidApprover",type:"error"},{inputs:[{internalType:"address",name:"receiver",type:"address"}],name:"ERC20InvalidReceiver",type:"error"},{inputs:[{internalType:"address",name:"sender",type:"address"}],name:"ERC20InvalidSender",type:"error"},{inputs:[{internalType:"address",name:"spender",type:"address"}],name:"ERC20InvalidSpender",type:"error"},{inputs:[{internalType:"uint256",name:"deadline",type:"uint256"}],name:"ERC2612ExpiredSignature",type:"error"},{inputs:[{internalType:"address",name:"signer",type:"address"},{internalType:"address",name:"owner",type:"address"}],name:"ERC2612InvalidSigner",type:"error"},{inputs:[],name:"EnforcedPause",type:"error"},{inputs:[],name:"ExpectedPause",type:"error"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"currentNonce",type:"uint256"}],name:"InvalidAccountNonce",type:"error"},{inputs:[],name:"InvalidInitialization",type:"error"},{inputs:[],name:"NotInitializing",type:"error"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"OwnableInvalidOwner",type:"error"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"OwnableUnauthorizedAccount",type:"error"},{anonymous:false,inputs:[{indexed:true,internalType:"address",name:"owner",type:"address"},{indexed:true,internalType:"address",name:"spender",type:"address"},{indexed:false,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:false,inputs:[],name:"EIP712DomainChanged",type:"event"},{anonymous:false,inputs:[{indexed:false,internalType:"uint64",name:"version",type:"uint64"}],name:"Initialized",type:"event"},{anonymous:false,inputs:[{indexed:true,internalType:"address",name:"previousOwner",type:"address"},{indexed:true,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:false,inputs:[{indexed:false,internalType:"address",name:"account",type:"address"}],name:"Paused",type:"event"},{anonymous:false,inputs:[{indexed:true,internalType:"address",name:"from",type:"address"},{indexed:true,internalType:"address",name:"to",type:"address"},{indexed:false,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:false,inputs:[{indexed:false,internalType:"address",name:"account",type:"address"}],name:"Unpaused",type:"event"},{inputs:[],name:"DOMAIN_SEPARATOR",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"value",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"burnFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"burnFromSmartCat",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"eip712Domain",outputs:[{internalType:"bytes1",name:"fields",type:"bytes1"},{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"version",type:"string"},{internalType:"uint256",name:"chainId",type:"uint256"},{internalType:"address",name:"verifyingContract",type:"address"},{internalType:"bytes32",name:"salt",type:"bytes32"},{internalType:"uint256[]",name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_smartCatContract",type:"address"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"mintFromSmartCat",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"nonces",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"pause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"paused",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"permit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_smartCatContract",type:"address"}],name:"setSmartCatContract",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"unpause",outputs:[],stateMutability:"nonpayable",type:"function"}];const addSelectorCss=".source-container>button{display:block;margin:8px 0;width:100%;height:56px;border-radius:10px;border:1px solid rgba(157, 157, 157, 1);font-size:16px;background:#FFFEFE}.header{display:flex;align-items:center}.header>button{min-width:30px;height:40px;font-size:18px;font-weight:bold;background:none;padding-bottom:5px}.header>h4{margin:0}.form-container{display:flex;flex-direction:column;justify-content:space-between;height:240px}.form-container>button{height:55px}";const AddSelectorStyle0=addSelectorCss;const AddSelector=class{constructor(e){registerInstance(this,e);this.onFormSubmit=undefined;this.type=undefined}async openDialog(){this.type=null;await this.dialog.openDialog()}async closeDialog(){await this.dialog.closeDialog()}async submitForm(){const e=document.getElementById("add-form");if(!e.checkValidity())return;switch(this.type){case"resolve":const e=document.getElementById("contract-field").value;const t=parseInt(document.getElementById("chain-field").value);this.onFormSubmit("resolve",{tsId:t+"-"+e});break;case"url":const r=document.getElementById("url-field").value;this.onFormSubmit("url",{tsId:r});break;case"file":const n=await document.getElementById("file-field").getFile();this.onFormSubmit("file",{xml:n});break}}getTypeLabel(){return this.type.substring(0,1).toUpperCase()+this.type.substring(1)}render(){return h$1("popover-dialog",{key:"c5430729f4b477901ce9038f58ab503b5af57662",ref:e=>this.dialog=e},h$1("div",{key:"ea2b78b32432b534c7d643807cb78b089ba7aaaa"},!this.type?h$1("div",null,h$1("h3",null,"Add Token From"),h$1("div",{class:"source-container"},h$1("button",{class:"btn",onClick:()=>this.type="resolve"},"Contract Script"),h$1("button",{class:"btn",onClick:()=>this.type="url"},"URL"),h$1("button",{class:"btn",onClick:()=>this.type="file"},"XML File"))):""),h$1("div",{key:"114fe486e512dd696b6f8906c2ff7e7512b94cb7"},this.type?h$1("div",{class:"form-view"},h$1("div",{class:"header"},h$1("button",{class:"btn",onClick:()=>{this.type=null}},"<"),h$1("h4",null,this.getTypeLabel())),h$1("form",{id:"add-form",class:"form-container",onSubmit:e=>{e.preventDefault();this.submitForm()}},this.type==="resolve"?h$1("div",null,h$1("input-field",{id:"contract-field",name:"contract",label:"Contract Address",type:"text",required:true,pattern:"^0x[a-fA-F0-9]{40}$"}),h$1("select-field",{id:"chain-field",name:"chain",label:"Chain",options:Object.entries(CHAIN_NAME_MAP).map((e=>({value:e[0],label:e[1]})))})):"",this.type==="url"?h$1("div",null,h$1("input-field",{id:"url-field",name:"url",label:"TokenScript URL",type:"url",required:true})):"",this.type==="file"?h$1("div",null,h$1("input-field",{id:"file-field",name:"file",label:"TokenScript XML",type:"file",required:true})):"",h$1("button",{class:"btn btn-primary"},"Load"))):""))}};AddSelector.style=AddSelectorStyle0;const version$4="6.10.0";function checkType$2(e,t,r){const n=t.split("|").map((e=>e.trim()));for(let r=0;r<n.length;r++){switch(t){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof e===t){return}}}const i=new Error(`invalid value for type ${t}`);i.code="INVALID_ARGUMENT";i.argument=`value.${r}`;i.value=e;throw i}async function resolveProperties$1(e){const t=Object.keys(e);const r=await Promise.all(t.map((t=>Promise.resolve(e[t]))));return r.reduce(((e,r,n)=>{e[t[n]]=r;return e}),{})}function defineProperties$1(e,t,r){for(let n in t){let i=t[n];const s=r?r[n]:null;if(s){checkType$2(i,s,n)}Object.defineProperty(e,n,{enumerable:true,value:i,writable:false})}}function stringify$3(e){if(e==null){return"null"}if(Array.isArray(e)){return"[ "+e.map(stringify$3).join(", ")+" ]"}if(e instanceof Uint8Array){const t="0123456789abcdef";let r="0x";for(let n=0;n<e.length;n++){r+=t[e[n]>>4];r+=t[e[n]&15]}return r}if(typeof e==="object"&&typeof e.toJSON==="function"){return stringify$3(e.toJSON())}switch(typeof e){case"boolean":case"symbol":return e.toString();case"bigint":return BigInt(e).toString();case"number":return e.toString();case"string":return JSON.stringify(e);case"object":{const t=Object.keys(e);t.sort();return"{ "+t.map((t=>`${stringify$3(t)}: ${stringify$3(e[t])}`)).join(", ")+" }"}}return`[ COULD NOT SERIALIZE ]`}function isError$1(e,t){return e&&e.code===t}function isCallException$1(e){return isError$1(e,"CALL_EXCEPTION")}function makeError$1(e,t,r){let n=e;{const n=[];if(r){if("message"in r||"code"in r||"name"in r){throw new Error(`value will overwrite populated values: ${stringify$3(r)}`)}for(const e in r){if(e==="shortMessage"){continue}const t=r[e];n.push(e+"="+stringify$3(t))}}n.push(`code=${t}`);n.push(`version=${version$4}`);if(n.length){e+=" ("+n.join(", ")+")"}}let i;switch(t){case"INVALID_ARGUMENT":i=new TypeError(e);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":i=new RangeError(e);break;default:i=new Error(e)}defineProperties$1(i,{code:t});if(r){Object.assign(i,r)}if(i.shortMessage==null){defineProperties$1(i,{shortMessage:n})}return i}function assert$q(e,t,r,n){if(!e){throw makeError$1(t,r,n)}}function assertArgument$1(e,t,r,n){assert$q(e,t,"INVALID_ARGUMENT",{argument:r,value:n})}function assertArgumentCount$1(e,t,r){if(r==null){r=""}if(r){r=": "+r}assert$q(e>=t,"missing arguemnt"+r,"MISSING_ARGUMENT",{count:e,expectedCount:t});assert$q(e<=t,"too many arguemnts"+r,"UNEXPECTED_ARGUMENT",{count:e,expectedCount:t})}const _normalizeForms$1=["NFD","NFC","NFKD","NFKC"].reduce(((e,t)=>{try{if("test".normalize(t)!=="test"){throw new Error("bad")}if(t==="NFD"){const e=String.fromCharCode(233).normalize("NFD");const t=String.fromCharCode(101,769);if(e!==t){throw new Error("broken")}}e.push(t)}catch(e){}return e}),[]);function assertNormalize$1(e){assert$q(_normalizeForms$1.indexOf(e)>=0,"platform missing String.prototype.normalize","UNSUPPORTED_OPERATION",{operation:"String.prototype.normalize",info:{form:e}})}function assertPrivate$1(e,t,r){if(r==null){r=""}if(e!==t){let e=r,t="new";if(r){e+=".";t+=" "+r}assert$q(false,`private constructor; use ${e}from* methods`,"UNSUPPORTED_OPERATION",{operation:t})}}function _getBytes$1(e,t,r){if(e instanceof Uint8Array){if(r){return new Uint8Array(e)}return e}if(typeof e==="string"&&e.match(/^0x([0-9a-f][0-9a-f])*$/i)){const t=new Uint8Array((e.length-2)/2);let r=2;for(let n=0;n<t.length;n++){t[n]=parseInt(e.substring(r,r+2),16);r+=2}return t}assertArgument$1(false,"invalid BytesLike value",t||"value",e)}function getBytes$1(e,t){return _getBytes$1(e,t,false)}function getBytesCopy$1(e,t){return _getBytes$1(e,t,true)}function isHexString$1(e,t){if(typeof e!=="string"||!e.match(/^0x[0-9A-Fa-f]*$/)){return false}if(typeof t==="number"&&e.length!==2+2*t){return false}if(t===true&&e.length%2!==0){return false}return true}function isBytesLike$1(e){return isHexString$1(e,true)||e instanceof Uint8Array}const HexCharacters$1="0123456789abcdef";function hexlify$1(e){const t=getBytes$1(e);let r="0x";for(let e=0;e<t.length;e++){const n=t[e];r+=HexCharacters$1[(n&240)>>4]+HexCharacters$1[n&15]}return r}function concat$c(e){return"0x"+e.map((e=>hexlify$1(e).substring(2))).join("")}function dataLength$1(e){if(isHexString$1(e,true)){return(e.length-2)/2}return getBytes$1(e).length}function dataSlice$1(e,t,r){const n=getBytes$1(e);if(r!=null&&r>n.length){assert$q(false,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:n,length:n.length,offset:r})}return hexlify$1(n.slice(t==null?0:t,r==null?n.length:r))}function stripZerosLeft$1(e){let t=hexlify$1(e).substring(2);while(t.startsWith("00")){t=t.substring(2)}return"0x"+t}function zeroPad$1(e,t,r){const n=getBytes$1(e);assert$q(t>=n.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(n),length:t,offset:t+1});const i=new Uint8Array(t);i.fill(0);if(r){i.set(n,t-n.length)}else{i.set(n,0)}return hexlify$1(i)}function zeroPadValue$1(e,t){return zeroPad$1(e,t,true)}function zeroPadBytes$1(e,t){return zeroPad$1(e,t,false)}const BN_0$l=BigInt(0);const BN_1$b=BigInt(1);const maxValue$1=9007199254740991;function fromTwos$1(e,t){const r=getUint$1(e,"value");const n=BigInt(getNumber$2(t,"width"));assert$q(r>>n===BN_0$l,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:e});if(r>>n-BN_1$b){const e=(BN_1$b<<n)-BN_1$b;return-((~r&e)+BN_1$b)}return r}function toTwos$1(e,t){let r=getBigInt$1(e,"value");const n=BigInt(getNumber$2(t,"width"));const i=BN_1$b<<n-BN_1$b;if(r<BN_0$l){r=-r;assert$q(r<=i,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:e});const t=(BN_1$b<<n)-BN_1$b;return(~r&t)+BN_1$b}else{assert$q(r<i,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:e})}return r}function mask$1(e,t){const r=getUint$1(e,"value");const n=BigInt(getNumber$2(t,"bits"));return r&(BN_1$b<<n)-BN_1$b}function getBigInt$1(e,t){switch(typeof e){case"bigint":return e;case"number":assertArgument$1(Number.isInteger(e),"underflow",t||"value",e);assertArgument$1(e>=-maxValue$1&&e<=maxValue$1,"overflow",t||"value",e);return BigInt(e);case"string":try{if(e===""){throw new Error("empty string")}if(e[0]==="-"&&e[1]!=="-"){return-BigInt(e.substring(1))}return BigInt(e)}catch(r){assertArgument$1(false,`invalid BigNumberish string: ${r.message}`,t||"value",e)}}assertArgument$1(false,"invalid BigNumberish value",t||"value",e)}function getUint$1(e,t){const r=getBigInt$1(e,t);assert$q(r>=BN_0$l,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:e});return r}const Nibbles$3="0123456789abcdef";function toBigInt$1(e){if(e instanceof Uint8Array){let t="0x0";for(const r of e){t+=Nibbles$3[r>>4];t+=Nibbles$3[r&15]}return BigInt(t)}return getBigInt$1(e)}function getNumber$2(e,t){switch(typeof e){case"bigint":assertArgument$1(e>=-maxValue$1&&e<=maxValue$1,"overflow",t||"value",e);return Number(e);case"number":assertArgument$1(Number.isInteger(e),"underflow",t||"value",e);assertArgument$1(e>=-maxValue$1&&e<=maxValue$1,"overflow",t||"value",e);return e;case"string":try{if(e===""){throw new Error("empty string")}return getNumber$2(BigInt(e),t)}catch(r){assertArgument$1(false,`invalid numeric string: ${r.message}`,t||"value",e)}}assertArgument$1(false,"invalid numeric value",t||"value",e)}function toNumber$1(e){return getNumber$2(toBigInt$1(e))}function toBeHex$1(e,t){const r=getUint$1(e,"value");let n=r.toString(16);if(t==null){if(n.length%2){n="0"+n}}else{const r=getNumber$2(t,"width");assert$q(r*2>=n.length,`value exceeds width (${r} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:e});while(n.length<r*2){n="0"+n}}return"0x"+n}function toBeArray$1(e){const t=getUint$1(e,"value");if(t===BN_0$l){return new Uint8Array([])}let r=t.toString(16);if(r.length%2){r="0"+r}const n=new Uint8Array(r.length/2);for(let e=0;e<n.length;e++){const t=e*2;n[e]=parseInt(r.substring(t,t+2),16)}return n}function toQuantity$1(e){let t=hexlify$1(isBytesLike$1(e)?e:toBeArray$1(e)).substring(2);while(t.startsWith("0")){t=t.substring(1)}if(t===""){t="0"}return"0x"+t}const Alphabet$1="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";let Lookup$1=null;function getAlpha$1(e){if(Lookup$1==null){Lookup$1={};for(let e=0;e<Alphabet$1.length;e++){Lookup$1[Alphabet$1[e]]=BigInt(e)}}const t=Lookup$1[e];assertArgument$1(t!=null,`invalid base58 value`,"letter",e);return t}const BN_0$k=BigInt(0);const BN_58$1=BigInt(58);function encodeBase58$1(e){const t=getBytes$1(e);let r=toBigInt$1(t);let n="";while(r){n=Alphabet$1[Number(r%BN_58$1)]+n;r/=BN_58$1}for(let e=0;e<t.length;e++){if(t[e]){break}n=Alphabet$1[0]+n}return n}function decodeBase58$1(e){let t=BN_0$k;for(let r=0;r<e.length;r++){t*=BN_58$1;t+=getAlpha$1(e[r])}return t}function decodeBase64$1(e){e=atob(e);const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++){t[r]=e.charCodeAt(r)}return getBytes$1(t)}function encodeBase64$1(e){const t=getBytes$1(e);let r="";for(let e=0;e<t.length;e++){r+=String.fromCharCode(t[e])}return btoa(r)}class EventPayload$1{filter;emitter;#e;constructor(e,t,r){this.#e=t;defineProperties$1(this,{emitter:e,filter:r})}async removeListener(){if(this.#e==null){return}await this.emitter.off(this.filter,this.#e)}}function errorFunc$1(e,t,r,n,i){assertArgument$1(false,`invalid codepoint at offset ${t}; ${e}`,"bytes",r)}function ignoreFunc$1(e,t,r,n,i){if(e==="BAD_PREFIX"||e==="UNEXPECTED_CONTINUE"){let e=0;for(let n=t+1;n<r.length;n++){if(r[n]>>6!==2){break}e++}return e}if(e==="OVERRUN"){return r.length-t-1}return 0}function replaceFunc$1(e,t,r,n,i){if(e==="OVERLONG"){assertArgument$1(typeof i==="number","invalid bad code point for replacement","badCodepoint",i);n.push(i);return 0}n.push(65533);return ignoreFunc$1(e,t,r)}const Utf8ErrorFuncs$1=Object.freeze({error:errorFunc$1,ignore:ignoreFunc$1,replace:replaceFunc$1});function getUtf8CodePoints$1(e,t){if(t==null){t=Utf8ErrorFuncs$1.error}const r=getBytes$1(e,"bytes");const n=[];let i=0;while(i<r.length){const e=r[i++];if(e>>7===0){n.push(e);continue}let s=null;let a=null;if((e&224)===192){s=1;a=127}else if((e&240)===224){s=2;a=2047}else if((e&248)===240){s=3;a=65535}else{if((e&192)===128){i+=t("UNEXPECTED_CONTINUE",i-1,r,n)}else{i+=t("BAD_PREFIX",i-1,r,n)}continue}if(i-1+s>=r.length){i+=t("OVERRUN",i-1,r,n);continue}let o=e&(1<<8-s-1)-1;for(let e=0;e<s;e++){let e=r[i];if((e&192)!=128){i+=t("MISSING_CONTINUE",i,r,n);o=null;break}o=o<<6|e&63;i++}if(o===null){continue}if(o>1114111){i+=t("OUT_OF_RANGE",i-1-s,r,n,o);continue}if(o>=55296&&o<=57343){i+=t("UTF16_SURROGATE",i-1-s,r,n,o);continue}if(o<=a){i+=t("OVERLONG",i-1-s,r,n,o);continue}n.push(o)}return n}function toUtf8Bytes$1(e,t){if(t!=null){assertNormalize$1(t);e=e.normalize(t)}let r=[];for(let t=0;t<e.length;t++){const n=e.charCodeAt(t);if(n<128){r.push(n)}else if(n<2048){r.push(n>>6|192);r.push(n&63|128)}else if((n&64512)==55296){t++;const i=e.charCodeAt(t);assertArgument$1(t<e.length&&(i&64512)===56320,"invalid surrogate pair","str",e);const s=65536+((n&1023)<<10)+(i&1023);r.push(s>>18|240);r.push(s>>12&63|128);r.push(s>>6&63|128);r.push(s&63|128)}else{r.push(n>>12|224);r.push(n>>6&63|128);r.push(n&63|128)}}return new Uint8Array(r)}function _toUtf8String$1(e){return e.map((e=>{if(e<=65535){return String.fromCharCode(e)}e-=65536;return String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320)})).join("")}function toUtf8String$1(e,t){return _toUtf8String$1(getUtf8CodePoints$1(e,t))}function toUtf8CodePoints$1(e,t){return getUtf8CodePoints$1(toUtf8Bytes$1(e,t))}function createGetUrl$1(e){async function t(e,t){const r=e.url.split(":")[0].toLowerCase();assert$q(r==="http"||r==="https",`unsupported protocol ${r}`,"UNSUPPORTED_OPERATION",{info:{protocol:r},operation:"request"});assert$q(r==="https"||!e.credentials||e.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let n=undefined;if(t){const e=new AbortController;n=e.signal;t.addListener((()=>{e.abort()}))}const i={method:e.method,headers:new Headers(Array.from(e)),body:e.body||undefined,signal:n};const s=await fetch(e.url,i);const a={};s.headers.forEach(((e,t)=>{a[t.toLowerCase()]=e}));const o=await s.arrayBuffer();const f=o==null?null:new Uint8Array(o);return{statusCode:s.status,statusMessage:s.statusText,headers:a,body:f}}return t}const MAX_ATTEMPTS$1=12;const SLOT_INTERVAL$1=250;let defaultGetUrlFunc$1=createGetUrl$1();const reData$1=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i");const reIpfs$1=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let locked$b=false;async function dataGatewayFunc$1(e,t){try{const t=e.match(reData$1);if(!t){throw new Error("invalid data")}return new FetchResponse$1(200,"OK",{"content-type":t[1]||"text/plain"},t[2]?decodeBase64$1(t[3]):unpercent$1(t[3]))}catch(t){return new FetchResponse$1(599,"BAD REQUEST (invalid data: URI)",{},null,new FetchRequest$1(e))}}function getIpfsGatewayFunc$1(e){async function t(t,r){try{const r=t.match(reIpfs$1);if(!r){throw new Error("invalid link")}return new FetchRequest$1(`${e}${r[2]}`)}catch(e){return new FetchResponse$1(599,"BAD REQUEST (invalid IPFS URI)",{},null,new FetchRequest$1(t))}}return t}const Gateways$1={data:dataGatewayFunc$1,ipfs:getIpfsGatewayFunc$1("https://gateway.ipfs.io/ipfs/")};const fetchSignals$1=new WeakMap;class FetchCancelSignal$1{#t;#r;constructor(e){this.#t=[];this.#r=false;fetchSignals$1.set(e,(()=>{if(this.#r){return}this.#r=true;for(const e of this.#t){setTimeout((()=>{e()}),0)}this.#t=[]}))}addListener(e){assert$q(!this.#r,"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"});this.#t.push(e)}get cancelled(){return this.#r}checkSignal(){assert$q(!this.cancelled,"cancelled","CANCELLED",{})}}function checkSignal$1(e){if(e==null){throw new Error("missing signal; should not happen")}e.checkSignal();return e}class FetchRequest$1{#n;#i;#s;#a;#o;#f;#c;#u;#l;#h;#d;#p;#y;#m;#g;get url(){return this.#f}set url(e){this.#f=String(e)}get body(){if(this.#c==null){return null}return new Uint8Array(this.#c)}set body(e){if(e==null){this.#c=undefined;this.#u=undefined}else if(typeof e==="string"){this.#c=toUtf8Bytes$1(e);this.#u="text/plain"}else if(e instanceof Uint8Array){this.#c=e;this.#u="application/octet-stream"}else if(typeof e==="object"){this.#c=toUtf8Bytes$1(JSON.stringify(e));this.#u="application/json"}else{throw new Error("invalid body")}}hasBody(){return this.#c!=null}get method(){if(this.#a){return this.#a}if(this.hasBody()){return"POST"}return"GET"}set method(e){if(e==null){e=""}this.#a=String(e).toUpperCase()}get headers(){const e=Object.assign({},this.#s);if(this.#l){e["authorization"]=`Basic ${encodeBase64$1(toUtf8Bytes$1(this.#l))}`}if(this.allowGzip){e["accept-encoding"]="gzip"}if(e["content-type"]==null&&this.#u){e["content-type"]=this.#u}if(this.body){e["content-length"]=String(this.body.length)}return e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,t){this.#s[String(e).toLowerCase()]=String(t)}clearHeaders(){this.#s={}}[Symbol.iterator](){const e=this.headers;const t=Object.keys(e);let r=0;return{next:()=>{if(r<t.length){const n=t[r++];return{value:[n,e[n]],done:false}}return{value:undefined,done:true}}}}get credentials(){return this.#l||null}setCredentials(e,t){assertArgument$1(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]");this.#l=`${e}:${t}`}get allowGzip(){return this.#i}set allowGzip(e){this.#i=!!e}get allowInsecureAuthentication(){return!!this.#n}set allowInsecureAuthentication(e){this.#n=!!e}get timeout(){return this.#o}set timeout(e){assertArgument$1(e>=0,"timeout must be non-zero","timeout",e);this.#o=e}get preflightFunc(){return this.#h||null}set preflightFunc(e){this.#h=e}get processFunc(){return this.#d||null}set processFunc(e){this.#d=e}get retryFunc(){return this.#p||null}set retryFunc(e){this.#p=e}get getUrlFunc(){return this.#g||defaultGetUrlFunc$1}set getUrlFunc(e){this.#g=e}constructor(e){this.#f=String(e);this.#n=false;this.#i=true;this.#s={};this.#a="";this.#o=3e5;this.#m={slotInterval:SLOT_INTERVAL$1,maxAttempts:MAX_ATTEMPTS$1};this.#g=null}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${this.#c?hexlify$1(this.#c):"null"}>`}setThrottleParams(e){if(e.slotInterval!=null){this.#m.slotInterval=e.slotInterval}if(e.maxAttempts!=null){this.#m.maxAttempts=e.maxAttempts}}async#b(e,t,r,n,i){if(e>=this.#m.maxAttempts){return i.makeServerError("exceeded maximum retry limit")}assert$q(getTime$5()<=t,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:n});if(r>0){await wait$1(r)}let s=this.clone();const a=(s.url.split(":")[0]||"").toLowerCase();if(a in Gateways$1){const e=await Gateways$1[a](s.url,checkSignal$1(n.#y));if(e instanceof FetchResponse$1){let t=e;if(this.processFunc){checkSignal$1(n.#y);try{t=await this.processFunc(s,t)}catch(e){if(e.throttle==null||typeof e.stall!=="number"){t.makeServerError("error in post-processing function",e).assertOk()}}}return t}s=e}if(this.preflightFunc){s=await this.preflightFunc(s)}const o=await this.getUrlFunc(s,checkSignal$1(n.#y));let f=new FetchResponse$1(o.statusCode,o.statusMessage,o.headers,o.body,n);if(f.statusCode===301||f.statusCode===302){try{const r=f.headers.location||"";return s.redirect(r).#b(e+1,t,0,n,f)}catch(e){}return f}else if(f.statusCode===429){if(this.retryFunc==null||await this.retryFunc(s,f,e)){const r=f.headers["retry-after"];let i=this.#m.slotInterval*Math.trunc(Math.random()*Math.pow(2,e));if(typeof r==="string"&&r.match(/^[1-9][0-9]*$/)){i=parseInt(r)}return s.clone().#b(e+1,t,i,n,f)}}if(this.processFunc){checkSignal$1(n.#y);try{f=await this.processFunc(s,f)}catch(r){if(r.throttle==null||typeof r.stall!=="number"){f.makeServerError("error in post-processing function",r).assertOk()}let i=this.#m.slotInterval*Math.trunc(Math.random()*Math.pow(2,e));if(r.stall>=0){i=r.stall}return s.clone().#b(e+1,t,i,n,f)}}return f}send(){assert$q(this.#y==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"});this.#y=new FetchCancelSignal$1(this);return this.#b(0,getTime$5()+this.timeout,0,this,new FetchResponse$1(0,"",{},null,this))}cancel(){assert$q(this.#y!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const e=fetchSignals$1.get(this);if(!e){throw new Error("missing signal; should not happen")}e()}redirect(e){const t=this.url.split(":")[0].toLowerCase();const r=e.split(":")[0].toLowerCase();assert$q(this.method==="GET"&&(t!=="https"||r!=="http")&&e.match(/^https?:/),`unsupported redirect`,"UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(e)})`});const n=new FetchRequest$1(e);n.method="GET";n.allowGzip=this.allowGzip;n.timeout=this.timeout;n.#s=Object.assign({},this.#s);if(this.#c){n.#c=new Uint8Array(this.#c)}n.#u=this.#u;return n}clone(){const e=new FetchRequest$1(this.url);e.#a=this.#a;if(this.#c){e.#c=this.#c}e.#u=this.#u;e.#s=Object.assign({},this.#s);e.#l=this.#l;if(this.allowGzip){e.allowGzip=true}e.timeout=this.timeout;if(this.allowInsecureAuthentication){e.allowInsecureAuthentication=true}e.#h=this.#h;e.#d=this.#d;e.#p=this.#p;e.#g=this.#g;return e}static lockConfig(){locked$b=true}static getGateway(e){return Gateways$1[e.toLowerCase()]||null}static registerGateway(e,t){e=e.toLowerCase();if(e==="http"||e==="https"){throw new Error(`cannot intercept ${e}; use registerGetUrl`)}if(locked$b){throw new Error("gateways locked")}Gateways$1[e]=t}static registerGetUrl(e){if(locked$b){throw new Error("gateways locked")}defaultGetUrlFunc$1=e}static createGetUrlFunc(e){return createGetUrl$1()}static createDataGateway(){return dataGatewayFunc$1}static createIpfsGatewayFunc(e){return getIpfsGatewayFunc$1(e)}}class FetchResponse$1{#A;#w;#s;#c;#E;#v;toString(){return`<FetchResponse status=${this.statusCode} body=${this.#c?hexlify$1(this.#c):"null"}>`}get statusCode(){return this.#A}get statusMessage(){return this.#w}get headers(){return Object.assign({},this.#s)}get body(){return this.#c==null?null:new Uint8Array(this.#c)}get bodyText(){try{return this.#c==null?"":toUtf8String$1(this.#c)}catch(e){assert$q(false,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch(e){assert$q(false,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const e=this.headers;const t=Object.keys(e);let r=0;return{next:()=>{if(r<t.length){const n=t[r++];return{value:[n,e[n]],done:false}}return{value:undefined,done:true}}}}constructor(e,t,r,n,i){this.#A=e;this.#w=t;this.#s=Object.keys(r).reduce(((e,t)=>{e[t.toLowerCase()]=String(r[t]);return e}),{});this.#c=n==null?null:new Uint8Array(n);this.#E=i||null;this.#v={message:""}}makeServerError(e,t){let r;if(!e){e=`${this.statusCode} ${this.statusMessage}`;r=`CLIENT ESCALATED SERVER ERROR (${e})`}else{r=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${e})`}const n=new FetchResponse$1(599,r,this.headers,this.body,this.#E||undefined);n.#v={message:e,error:t};return n}throwThrottleError(e,t){if(t==null){t=-1}else{assertArgument$1(Number.isInteger(t)&&t>=0,"invalid stall timeout","stall",t)}const r=new Error(e||"throttling requests");defineProperties$1(r,{stall:t,throttle:true});throw r}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return this.#c!=null}get request(){return this.#E}ok(){return this.#v.message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok()){return}let{message:e,error:t}=this.#v;if(e===""){e=`server response ${this.statusCode} ${this.statusMessage}`}assert$q(false,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:t})}}function getTime$5(){return(new Date).getTime()}function unpercent$1(e){return toUtf8Bytes$1(e.replace(/%([0-9a-f][0-9a-f])/gi,((e,t)=>String.fromCharCode(parseInt(t,16)))))}function wait$1(e){return new Promise((t=>setTimeout(t,e)))}const BN_N1$1=BigInt(-1);const BN_0$j=BigInt(0);const BN_1$a=BigInt(1);const BN_5$1=BigInt(5);const _guard$b={};let Zeros$3="0000";while(Zeros$3.length<80){Zeros$3+=Zeros$3}function getTens$1(e){let t=Zeros$3;while(t.length<e){t+=t}return BigInt("1"+t.substring(0,e))}function checkValue$1(e,t,r){const n=BigInt(t.width);if(t.signed){const t=BN_1$a<<n-BN_1$a;assert$q(r==null||e>=-t&&e<t,"overflow","NUMERIC_FAULT",{operation:r,fault:"overflow",value:e});if(e>BN_0$j){e=fromTwos$1(mask$1(e,n),n)}else{e=-fromTwos$1(mask$1(-e,n),n)}}else{const t=BN_1$a<<n;assert$q(r==null||e>=0&&e<t,"overflow","NUMERIC_FAULT",{operation:r,fault:"overflow",value:e});e=(e%t+t)%t&t-BN_1$a}return e}function getFormat$1(e){if(typeof e==="number"){e=`fixed128x${e}`}let t=true;let r=128;let n=18;if(typeof e==="string"){if(e==="fixed");else if(e==="ufixed"){t=false}else{const i=e.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);assertArgument$1(i,"invalid fixed format","format",e);t=i[1]!=="u";r=parseInt(i[2]);n=parseInt(i[3])}}else if(e){const i=e;const s=(e,t,r)=>{if(i[e]==null){return r}assertArgument$1(typeof i[e]===t,"invalid fixed format ("+e+" not "+t+")","format."+e,i[e]);return i[e]};t=s("signed","boolean",t);r=s("width","number",r);n=s("decimals","number",n)}assertArgument$1(r%8===0,"invalid FixedNumber width (not byte aligned)","format.width",r);assertArgument$1(n<=80,"invalid FixedNumber decimals (too large)","format.decimals",n);const i=(t?"":"u")+"fixed"+String(r)+"x"+String(n);return{signed:t,width:r,decimals:n,name:i}}function toString$e(e,t){let r="";if(e<BN_0$j){r="-";e*=BN_N1$1}let n=e.toString();if(t===0){return r+n}while(n.length<=t){n=Zeros$3+n}const i=n.length-t;n=n.substring(0,i)+"."+n.substring(i);while(n[0]==="0"&&n[1]!=="."){n=n.substring(1)}while(n[n.length-1]==="0"&&n[n.length-2]!=="."){n=n.substring(0,n.length-1)}return r+n}class FixedNumber$1{format;#_;#S;#$;_value;constructor(e,t,r){assertPrivate$1(e,_guard$b,"FixedNumber");this.#S=t;this.#_=r;const n=toString$e(t,r.decimals);defineProperties$1(this,{format:r.name,_value:n});this.#$=getTens$1(r.decimals)}get signed(){return this.#_.signed}get width(){return this.#_.width}get decimals(){return this.#_.decimals}get value(){return this.#S}#T(e){assertArgument$1(this.format===e.format,"incompatible format; use fixedNumber.toFormat","other",e)}#I(e,t){e=checkValue$1(e,this.#_,t);return new FixedNumber$1(_guard$b,e,this.#_)}#C(e,t){this.#T(e);return this.#I(this.#S+e.#S,t)}addUnsafe(e){return this.#C(e)}add(e){return this.#C(e,"add")}#P(e,t){this.#T(e);return this.#I(this.#S-e.#S,t)}subUnsafe(e){return this.#P(e)}sub(e){return this.#P(e,"sub")}#R(e,t){this.#T(e);return this.#I(this.#S*e.#S/this.#$,t)}mulUnsafe(e){return this.#R(e)}mul(e){return this.#R(e,"mul")}mulSignal(e){this.#T(e);const t=this.#S*e.#S;assert$q(t%this.#$===BN_0$j,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this});return this.#I(t/this.#$,"mulSignal")}#N(e,t){assert$q(e.#S!==BN_0$j,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this});this.#T(e);return this.#I(this.#S*this.#$/e.#S,t)}divUnsafe(e){return this.#N(e)}div(e){return this.#N(e,"div")}divSignal(e){assert$q(e.#S!==BN_0$j,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this});this.#T(e);const t=this.#S*this.#$;assert$q(t%e.#S===BN_0$j,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this});return this.#I(t/e.#S,"divSignal")}cmp(e){let t=this.value,r=e.value;const n=this.decimals-e.decimals;if(n>0){r*=getTens$1(n)}else if(n<0){t*=getTens$1(-n)}if(t<r){return-1}if(t>r){return 1}return 0}eq(e){return this.cmp(e)===0}lt(e){return this.cmp(e)<0}lte(e){return this.cmp(e)<=0}gt(e){return this.cmp(e)>0}gte(e){return this.cmp(e)>=0}floor(){let e=this.#S;if(this.#S<BN_0$j){e-=this.#$-BN_1$a}e=this.#S/this.#$*this.#$;return this.#I(e,"floor")}ceiling(){let e=this.#S;if(this.#S>BN_0$j){e+=this.#$-BN_1$a}e=this.#S/this.#$*this.#$;return this.#I(e,"ceiling")}round(e){if(e==null){e=0}if(e>=this.decimals){return this}const t=this.decimals-e;const r=BN_5$1*getTens$1(t-1);let n=this.value+r;const i=getTens$1(t);n=n/i*i;checkValue$1(n,this.#_,"round");return new FixedNumber$1(_guard$b,n,this.#_)}isZero(){return this.#S===BN_0$j}isNegative(){return this.#S<BN_0$j}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return FixedNumber$1.fromString(this.toString(),e)}static fromValue(e,t,r){const n=t==null?0:getNumber$2(t);const i=getFormat$1(r);let s=getBigInt$1(e,"value");const a=n-i.decimals;if(a>0){const t=getTens$1(a);assert$q(s%t===BN_0$j,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:e});s/=t}else if(a<0){s*=getTens$1(-a)}checkValue$1(s,i,"fromValue");return new FixedNumber$1(_guard$b,s,i)}static fromString(e,t){const r=e.match(/^(-?)([0-9]*)\.?([0-9]*)$/);assertArgument$1(r&&r[2].length+r[3].length>0,"invalid FixedNumber string value","value",e);const n=getFormat$1(t);let i=r[2]||"0",s=r[3]||"";while(s.length<n.decimals){s+=Zeros$3}assert$q(s.substring(n.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:e});s=s.substring(0,n.decimals);const a=BigInt(r[1]+i+s);checkValue$1(a,n,"fromString");return new FixedNumber$1(_guard$b,a,n)}static fromBytes(e,t){let r=toBigInt$1(getBytes$1(e,"value"));const n=getFormat$1(t);if(n.signed){r=fromTwos$1(r,n.width)}checkValue$1(r,n,"fromBytes");return new FixedNumber$1(_guard$b,r,n)}}function hexlifyByte$1(e){let t=e.toString(16);while(t.length<2){t="0"+t}return"0x"+t}function unarrayifyInteger$1(e,t,r){let n=0;for(let i=0;i<r;i++){n=n*256+e[t+i]}return n}function _decodeChildren$1(e,t,r,n){const i=[];while(r<t+1+n){const s=_decode$2(e,r);i.push(s.result);r+=s.consumed;assert$q(r<=t+1+n,"child data too short","BUFFER_OVERRUN",{buffer:e,length:n,offset:t})}return{consumed:1+n,result:i}}function _decode$2(e,t){assert$q(e.length!==0,"data too short","BUFFER_OVERRUN",{buffer:e,length:0,offset:1});const r=t=>{assert$q(t<=e.length,"data short segment too short","BUFFER_OVERRUN",{buffer:e,length:e.length,offset:t})};if(e[t]>=248){const n=e[t]-247;r(t+1+n);const i=unarrayifyInteger$1(e,t+1,n);r(t+1+n+i);return _decodeChildren$1(e,t,t+1+n,n+i)}else if(e[t]>=192){const n=e[t]-192;r(t+1+n);return _decodeChildren$1(e,t,t+1,n)}else if(e[t]>=184){const n=e[t]-183;r(t+1+n);const i=unarrayifyInteger$1(e,t+1,n);r(t+1+n+i);const s=hexlify$1(e.slice(t+1+n,t+1+n+i));return{consumed:1+n+i,result:s}}else if(e[t]>=128){const n=e[t]-128;r(t+1+n);const i=hexlify$1(e.slice(t+1,t+1+n));return{consumed:1+n,result:i}}return{consumed:1,result:hexlifyByte$1(e[t])}}function decodeRlp$1(e){const t=getBytes$1(e,"data");const r=_decode$2(t,0);assertArgument$1(r.consumed===t.length,"unexpected junk after rlp payload","data",e);return r.result}function arrayifyInteger$1(e){const t=[];while(e){t.unshift(e&255);e>>=8}return t}function _encode$2(e){if(Array.isArray(e)){let t=[];e.forEach((function(e){t=t.concat(_encode$2(e))}));if(t.length<=55){t.unshift(192+t.length);return t}const r=arrayifyInteger$1(t.length);r.unshift(247+r.length);return r.concat(t)}const t=Array.prototype.slice.call(getBytes$1(e,"object"));if(t.length===1&&t[0]<=127){return t}else if(t.length<=55){t.unshift(128+t.length);return t}const r=arrayifyInteger$1(t.length);r.unshift(183+r.length);return r.concat(t)}const nibbles$1="0123456789abcdef";function encodeRlp$1(e){let t="0x";for(const r of _encode$2(e)){t+=nibbles$1[r>>4];t+=nibbles$1[r&15]}return t}const names$5=["wei","kwei","mwei","gwei","szabo","finney","ether"];function formatUnits$1(e,t){let r=18;if(typeof t==="string"){const e=names$5.indexOf(t);assertArgument$1(e>=0,"invalid unit","unit",t);r=3*e}else if(t!=null){r=getNumber$2(t,"unit")}return FixedNumber$1.fromValue(e,r,{decimals:r,width:512}).toString()}function parseUnits$3(e,t){assertArgument$1(typeof e==="string","value must be a string","value",e);let r=18;if(typeof t==="string"){const e=names$5.indexOf(t);assertArgument$1(e>=0,"invalid unit","unit",t);r=3*e}else if(t!=null){r=getNumber$2(t,"unit")}return FixedNumber$1.fromString(e,{decimals:r,width:512}).value}function formatEther$1(e){return formatUnits$1(e,18)}function parseEther$1(e){return parseUnits$3(e,18)}function uuidV4$1(e){const t=getBytes$1(e,"randomBytes");t[6]=t[6]&15|64;t[8]=t[8]&63|128;const r=hexlify$1(t);return[r.substring(2,10),r.substring(10,14),r.substring(14,18),r.substring(18,22),r.substring(22,34)].join("-")}const WordSize$1=32;const Padding$1=new Uint8Array(WordSize$1);const passProperties$3=["then"];const _guard$a={};function throwError$1(e,t){const r=new Error(`deferred error during ABI decoding triggered accessing ${e}`);r.error=t;throw r}class Result$1 extends Array{#k;constructor(...e){const t=e[0];let r=e[1];let n=(e[2]||[]).slice();let i=true;if(t!==_guard$a){r=e;n=[];i=false}super(r.length);r.forEach(((e,t)=>{this[t]=e}));const s=n.reduce(((e,t)=>{if(typeof t==="string"){e.set(t,(e.get(t)||0)+1)}return e}),new Map);this.#k=Object.freeze(r.map(((e,t)=>{const r=n[t];if(r!=null&&s.get(r)===1){return r}return null})));if(!i){return}Object.freeze(this);return new Proxy(this,{get:(e,t,r)=>{if(typeof t==="string"){if(t.match(/^[0-9]+$/)){const r=getNumber$2(t,"%index");if(r<0||r>=this.length){throw new RangeError("out of result range")}const n=e[r];if(n instanceof Error){throwError$1(`index ${r}`,n)}return n}if(passProperties$3.indexOf(t)>=0){return Reflect.get(e,t,r)}const n=e[t];if(n instanceof Function){return function(...t){return n.apply(this===r?e:this,t)}}else if(!(t in e)){return e.getValue.apply(this===r?e:this,[t])}}return Reflect.get(e,t,r)}})}toArray(){const e=[];this.forEach(((t,r)=>{if(t instanceof Error){throwError$1(`index ${r}`,t)}e.push(t)}));return e}toObject(){return this.#k.reduce(((e,t,r)=>{assert$q(t!=null,"value at index ${ index } unnamed","UNSUPPORTED_OPERATION",{operation:"toObject()"});if(!(t in e)){e[t]=this.getValue(t)}return e}),{})}slice(e,t){if(e==null){e=0}if(e<0){e+=this.length;if(e<0){e=0}}if(t==null){t=this.length}if(t<0){t+=this.length;if(t<0){t=0}}if(t>this.length){t=this.length}const r=[],n=[];for(let i=e;i<t;i++){r.push(this[i]);n.push(this.#k[i])}return new Result$1(_guard$a,r,n)}filter(e,t){const r=[],n=[];for(let i=0;i<this.length;i++){const s=this[i];if(s instanceof Error){throwError$1(`index ${i}`,s)}if(e.call(t,s,i,this)){r.push(s);n.push(this.#k[i])}}return new Result$1(_guard$a,r,n)}map(e,t){const r=[];for(let n=0;n<this.length;n++){const i=this[n];if(i instanceof Error){throwError$1(`index ${n}`,i)}r.push(e.call(t,i,n,this))}return r}getValue(e){const t=this.#k.indexOf(e);if(t===-1){return undefined}const r=this[t];if(r instanceof Error){throwError$1(`property ${JSON.stringify(e)}`,r.error)}return r}static fromItems(e,t){return new Result$1(_guard$a,e,t)}}function checkResultErrors$1(e){const t=[];const r=function(e,n){if(!Array.isArray(n)){return}for(let i in n){const s=e.slice();s.push(i);try{r(s,n[i])}catch(e){t.push({path:s,error:e})}}};r([],e);return t}function getValue$5(e){let t=toBeArray$1(e);assert$q(t.length<=WordSize$1,"value out-of-bounds","BUFFER_OVERRUN",{buffer:t,length:WordSize$1,offset:t.length});if(t.length!==WordSize$1){t=getBytesCopy$1(concat$c([Padding$1.slice(t.length%WordSize$1),t]))}return t}class Coder$1{name;type;localName;dynamic;constructor(e,t,r,n){defineProperties$1(this,{name:e,type:t,localName:r,dynamic:n},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,t){assertArgument$1(false,e,this.localName,t)}}class Writer$3{#O;#x;constructor(){this.#O=[];this.#x=0}get data(){return concat$c(this.#O)}get length(){return this.#x}#B(e){this.#O.push(e);this.#x+=e.length;return e.length}appendWriter(e){return this.#B(getBytesCopy$1(e.data))}writeBytes(e){let t=getBytesCopy$1(e);const r=t.length%WordSize$1;if(r){t=getBytesCopy$1(concat$c([t,Padding$1.slice(r)]))}return this.#B(t)}writeValue(e){return this.#B(getValue$5(e))}writeUpdatableValue(){const e=this.#O.length;this.#O.push(Padding$1);this.#x+=WordSize$1;return t=>{this.#O[e]=getValue$5(t)}}}class Reader$3{allowLoose;#O;#D;#M;#U;#L;constructor(e,t,r){defineProperties$1(this,{allowLoose:!!t});this.#O=getBytesCopy$1(e);this.#M=0;this.#U=null;this.#L=r!=null?r:1024;this.#D=0}get data(){return hexlify$1(this.#O)}get dataLength(){return this.#O.length}get consumed(){return this.#D}get bytes(){return new Uint8Array(this.#O)}#F(e){if(this.#U){return this.#U.#F(e)}this.#M+=e;assert$q(this.#L<1||this.#M<=this.#L*this.dataLength,`compressed ABI data exceeds inflation ratio of ${this.#L} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:getBytesCopy$1(this.#O),offset:this.#D,length:e,info:{bytesRead:this.#M,dataLength:this.dataLength}})}#H(e,t,r){let n=Math.ceil(t/WordSize$1)*WordSize$1;if(this.#D+n>this.#O.length){if(this.allowLoose&&r&&this.#D+t<=this.#O.length){n=t}else{assert$q(false,"data out-of-bounds","BUFFER_OVERRUN",{buffer:getBytesCopy$1(this.#O),length:this.#O.length,offset:this.#D+n})}}return this.#O.slice(this.#D,this.#D+n)}subReader(e){const t=new Reader$3(this.#O.slice(this.#D+e),this.allowLoose,this.#L);t.#U=this;return t}readBytes(e,t){let r=this.#H(0,e,!!t);this.#F(e);this.#D+=r.length;return r.slice(0,e)}readValue(){return toBigInt$1(this.readBytes(WordSize$1))}readIndex(){return toNumber$1(this.readBytes(WordSize$1))}}const global$1=typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{};var commonjsGlobal=typeof globalThis!=="undefined"?globalThis:typeof window!=="undefined"?window:typeof global!=="undefined"?global:typeof self!=="undefined"?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e["default"]:e}function getAugmentedNamespace(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:true});Object.keys(e).forEach((function(r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:true,get:function(){return e[r]}})}));return t}function commonjsRequire(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var hmac$4={};var _assert$3={};Object.defineProperty(_assert$3,"__esModule",{value:true});_assert$3.output=_assert$3.exists=_assert$3.hash=_assert$3.bytes=_assert$3.bool=_assert$3.number=void 0;function number$3(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}_assert$3.number=number$3;function bool$3(e){if(typeof e!=="boolean")throw new Error(`Expected boolean, not ${e}`)}_assert$3.bool=bool$3;function bytes$c(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}_assert$3.bytes=bytes$c;function hash$8(e){if(typeof e!=="function"||typeof e.create!=="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");number$3(e.outputLen);number$3(e.blockLen)}_assert$3.hash=hash$8;function exists$4(e,t=true){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}_assert$3.exists=exists$4;function output$3(e,t){bytes$c(e);const r=t.outputLen;if(e.length<r){throw new Error(`digestInto() expects output buffer of length at least ${r}`)}}_assert$3.output=output$3;const assert$p={number:number$3,bool:bool$3,bytes:bytes$c,hash:hash$8,exists:exists$4,output:output$3};_assert$3.default=assert$p;var utils$x={};var crypto$b={};Object.defineProperty(crypto$b,"__esModule",{value:true});crypto$b.crypto=void 0;crypto$b.crypto=typeof globalThis==="object"&&"crypto"in globalThis?globalThis.crypto:undefined;(function(e){
/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */
Object.defineProperty(e,"__esModule",{value:true});e.randomBytes=e.wrapXOFConstructorWithOpts=e.wrapConstructorWithOpts=e.wrapConstructor=e.checkOpts=e.Hash=e.concatBytes=e.toBytes=e.utf8ToBytes=e.asyncLoop=e.nextTick=e.hexToBytes=e.bytesToHex=e.isLE=e.rotr=e.createView=e.u32=e.u8=void 0;const t=crypto$b;const r=e=>e instanceof Uint8Array;const n=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength);e.u8=n;const i=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));e.u32=i;const s=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);e.createView=s;const a=(e,t)=>e<<32-t|e>>>t;e.rotr=a;e.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!e.isLE)throw new Error("Non little-endian hardware is not supported");const o=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function f(e){if(!r(e))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++){t+=o[e[r]]}return t}e.bytesToHex=f;function c(e){if(typeof e!=="string")throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(t/2);for(let t=0;t<r.length;t++){const n=t*2;const i=e.slice(n,n+2);const s=Number.parseInt(i,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");r[t]=s}return r}e.hexToBytes=c;const u=async()=>{};e.nextTick=u;async function l(t,r,n){let i=Date.now();for(let s=0;s<t;s++){n(s);const t=Date.now()-i;if(t>=0&&t<r)continue;await(0,e.nextTick)();i+=t}}e.asyncLoop=l;function h(e){if(typeof e!=="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array((new TextEncoder).encode(e))}e.utf8ToBytes=h;function d(e){if(typeof e==="string")e=h(e);if(!r(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}e.toBytes=d;function p(...e){const t=new Uint8Array(e.reduce(((e,t)=>e+t.length),0));let n=0;e.forEach((e=>{if(!r(e))throw new Error("Uint8Array expected");t.set(e,n);n+=e.length}));return t}e.concatBytes=p;class y{clone(){return this._cloneInto()}}e.Hash=y;const m={}.toString;function g(e,t){if(t!==undefined&&m.call(t)!=="[object Object]")throw new Error("Options should be object or undefined");const r=Object.assign(e,t);return r}e.checkOpts=g;function b(e){const t=t=>e().update(d(t)).digest();const r=e();t.outputLen=r.outputLen;t.blockLen=r.blockLen;t.create=()=>e();return t}e.wrapConstructor=b;function A(e){const t=(t,r)=>e(r).update(d(t)).digest();const r=e({});t.outputLen=r.outputLen;t.blockLen=r.blockLen;t.create=t=>e(t);return t}e.wrapConstructorWithOpts=A;function w(e){const t=(t,r)=>e(r).update(d(t)).digest();const r=e({});t.outputLen=r.outputLen;t.blockLen=r.blockLen;t.create=t=>e(t);return t}e.wrapXOFConstructorWithOpts=w;function E(e=32){if(t.crypto&&typeof t.crypto.getRandomValues==="function"){return t.crypto.getRandomValues(new Uint8Array(e))}throw new Error("crypto.getRandomValues must be defined")}e.randomBytes=E})(utils$x);(function(e){Object.defineProperty(e,"__esModule",{value:true});e.hmac=e.HMAC=void 0;const t=_assert$3;const r=utils$x;class n extends r.Hash{constructor(e,n){super();this.finished=false;this.destroyed=false;(0,t.hash)(e);const i=(0,r.toBytes)(n);this.iHash=e.create();if(typeof this.iHash.update!=="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen;this.outputLen=this.iHash.outputLen;const s=this.blockLen;const a=new Uint8Array(s);a.set(i.length>s?e.create().update(i).digest():i);for(let e=0;e<a.length;e++)a[e]^=54;this.iHash.update(a);this.oHash=e.create();for(let e=0;e<a.length;e++)a[e]^=54^92;this.oHash.update(a);a.fill(0)}update(e){(0,t.exists)(this);this.iHash.update(e);return this}digestInto(e){(0,t.exists)(this);(0,t.bytes)(e,this.outputLen);this.finished=true;this.iHash.digestInto(e);this.oHash.update(e);this.oHash.digestInto(e);this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);this.digestInto(e);return e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:n,destroyed:i,blockLen:s,outputLen:a}=this;e=e;e.finished=n;e.destroyed=i;e.blockLen=s;e.outputLen=a;e.oHash=t._cloneInto(e.oHash);e.iHash=r._cloneInto(e.iHash);return e}destroy(){this.destroyed=true;this.oHash.destroy();this.iHash.destroy()}}e.HMAC=n;const i=(e,t,r)=>new n(e,t).update(r).digest();e.hmac=i;e.hmac.create=(e,t)=>new n(e,t)})(hmac$4);var pbkdf2$5={};Object.defineProperty(pbkdf2$5,"__esModule",{value:true});pbkdf2$5.pbkdf2Async=pbkdf2_2$1=pbkdf2$5.pbkdf2=void 0;const _assert_js_1$9=_assert$3;const hmac_js_1$1=hmac$4;const utils_js_1$n=utils$x;function pbkdf2Init$1(e,t,r,n){(0,_assert_js_1$9.hash)(e);const i=(0,utils_js_1$n.checkOpts)({dkLen:32,asyncTick:10},n);const{c:s,dkLen:a,asyncTick:o}=i;(0,_assert_js_1$9.number)(s);(0,_assert_js_1$9.number)(a);(0,_assert_js_1$9.number)(o);if(s<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const f=(0,utils_js_1$n.toBytes)(t);const c=(0,utils_js_1$n.toBytes)(r);const u=new Uint8Array(a);const l=hmac_js_1$1.hmac.create(e,f);const h=l._cloneInto().update(c);return{c:s,dkLen:a,asyncTick:o,DK:u,PRF:l,PRFSalt:h}}function pbkdf2Output$1(e,t,r,n,i){e.destroy();t.destroy();if(n)n.destroy();i.fill(0);return r}function pbkdf2$4(e,t,r,n){const{c:i,dkLen:s,DK:a,PRF:o,PRFSalt:f}=pbkdf2Init$1(e,t,r,n);let c;const u=new Uint8Array(4);const l=(0,utils_js_1$n.createView)(u);const h=new Uint8Array(o.outputLen);for(let e=1,t=0;t<s;e++,t+=o.outputLen){const r=a.subarray(t,t+o.outputLen);l.setInt32(0,e,false);(c=f._cloneInto(c)).update(u).digestInto(h);r.set(h.subarray(0,r.length));for(let e=1;e<i;e++){o._cloneInto(c).update(h).digestInto(h);for(let e=0;e<r.length;e++)r[e]^=h[e]}}return pbkdf2Output$1(o,f,a,c,h)}var pbkdf2_2$1=pbkdf2$5.pbkdf2=pbkdf2$4;async function pbkdf2Async$1(e,t,r,n){const{c:i,dkLen:s,asyncTick:a,DK:o,PRF:f,PRFSalt:c}=pbkdf2Init$1(e,t,r,n);let u;const l=new Uint8Array(4);const h=(0,utils_js_1$n.createView)(l);const d=new Uint8Array(f.outputLen);for(let e=1,t=0;t<s;e++,t+=f.outputLen){const r=o.subarray(t,t+f.outputLen);h.setInt32(0,e,false);(u=c._cloneInto(u)).update(l).digestInto(d);r.set(d.subarray(0,r.length));await(0,utils_js_1$n.asyncLoop)(i-1,a,(()=>{f._cloneInto(u).update(d).digestInto(d);for(let e=0;e<r.length;e++)r[e]^=d[e]}))}return pbkdf2Output$1(f,c,o,u,d)}pbkdf2$5.pbkdf2Async=pbkdf2Async$1;var sha256$6={};var _sha2$3={};Object.defineProperty(_sha2$3,"__esModule",{value:true});_sha2$3.SHA2=void 0;const _assert_js_1$8=_assert$3;const utils_js_1$m=utils$x;function setBigUint64$3(e,t,r,n){if(typeof e.setBigUint64==="function")return e.setBigUint64(t,r,n);const i=BigInt(32);const s=BigInt(4294967295);const a=Number(r>>i&s);const o=Number(r&s);const f=n?4:0;const c=n?0:4;e.setUint32(t+f,a,n);e.setUint32(t+c,o,n)}class SHA2$3 extends utils_js_1$m.Hash{constructor(e,t,r,n){super();this.blockLen=e;this.outputLen=t;this.padOffset=r;this.isLE=n;this.finished=false;this.length=0;this.pos=0;this.destroyed=false;this.buffer=new Uint8Array(e);this.view=(0,utils_js_1$m.createView)(this.buffer)}update(e){(0,_assert_js_1$8.exists)(this);const{view:t,buffer:r,blockLen:n}=this;e=(0,utils_js_1$m.toBytes)(e);const i=e.length;for(let s=0;s<i;){const a=Math.min(n-this.pos,i-s);if(a===n){const t=(0,utils_js_1$m.createView)(e);for(;n<=i-s;s+=n)this.process(t,s);continue}r.set(e.subarray(s,s+a),this.pos);this.pos+=a;s+=a;if(this.pos===n){this.process(t,0);this.pos=0}}this.length+=e.length;this.roundClean();return this}digestInto(e){(0,_assert_js_1$8.exists)(this);(0,_assert_js_1$8.output)(e,this);this.finished=true;const{buffer:t,view:r,blockLen:n,isLE:i}=this;let{pos:s}=this;t[s++]=128;this.buffer.subarray(s).fill(0);if(this.padOffset>n-s){this.process(r,0);s=0}for(let e=s;e<n;e++)t[e]=0;setBigUint64$3(r,n-8,BigInt(this.length*8),i);this.process(r,0);const a=(0,utils_js_1$m.createView)(e);const o=this.outputLen;if(o%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const f=o/4;const c=this.get();if(f>c.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<f;e++)a.setUint32(4*e,c[e],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);this.destroy();return r}_cloneInto(e){e||(e=new this.constructor);e.set(...this.get());const{blockLen:t,buffer:r,length:n,finished:i,destroyed:s,pos:a}=this;e.length=n;e.pos=a;e.finished=i;e.destroyed=s;if(n%t)e.buffer.set(r);return e}}_sha2$3.SHA2=SHA2$3;Object.defineProperty(sha256$6,"__esModule",{value:true});sha256$6.sha224=sha256_1$1=sha256$6.sha256=void 0;const _sha2_js_1$7=_sha2$3;const utils_js_1$l=utils$x;const Chi$3=(e,t,r)=>e&t^~e&r;const Maj$3=(e,t,r)=>e&t^e&r^t&r;const SHA256_K$3=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);const IV$3=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]);const SHA256_W$3=new Uint32Array(64);class SHA256$7 extends _sha2_js_1$7.SHA2{constructor(){super(64,32,8,false);this.A=IV$3[0]|0;this.B=IV$3[1]|0;this.C=IV$3[2]|0;this.D=IV$3[3]|0;this.E=IV$3[4]|0;this.F=IV$3[5]|0;this.G=IV$3[6]|0;this.H=IV$3[7]|0}get(){const{A:e,B:t,C:r,D:n,E:i,F:s,G:a,H:o}=this;return[e,t,r,n,i,s,a,o]}set(e,t,r,n,i,s,a,o){this.A=e|0;this.B=t|0;this.C=r|0;this.D=n|0;this.E=i|0;this.F=s|0;this.G=a|0;this.H=o|0}process(e,t){for(let r=0;r<16;r++,t+=4)SHA256_W$3[r]=e.getUint32(t,false);for(let e=16;e<64;e++){const t=SHA256_W$3[e-15];const r=SHA256_W$3[e-2];const n=(0,utils_js_1$l.rotr)(t,7)^(0,utils_js_1$l.rotr)(t,18)^t>>>3;const i=(0,utils_js_1$l.rotr)(r,17)^(0,utils_js_1$l.rotr)(r,19)^r>>>10;SHA256_W$3[e]=i+SHA256_W$3[e-7]+n+SHA256_W$3[e-16]|0}let{A:r,B:n,C:i,D:s,E:a,F:o,G:f,H:c}=this;for(let e=0;e<64;e++){const t=(0,utils_js_1$l.rotr)(a,6)^(0,utils_js_1$l.rotr)(a,11)^(0,utils_js_1$l.rotr)(a,25);const u=c+t+Chi$3(a,o,f)+SHA256_K$3[e]+SHA256_W$3[e]|0;const l=(0,utils_js_1$l.rotr)(r,2)^(0,utils_js_1$l.rotr)(r,13)^(0,utils_js_1$l.rotr)(r,22);const h=l+Maj$3(r,n,i)|0;c=f;f=o;o=a;a=s+u|0;s=i;i=n;n=r;r=u+h|0}r=r+this.A|0;n=n+this.B|0;i=i+this.C|0;s=s+this.D|0;a=a+this.E|0;o=o+this.F|0;f=f+this.G|0;c=c+this.H|0;this.set(r,n,i,s,a,o,f,c)}roundClean(){SHA256_W$3.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0);this.buffer.fill(0)}}class SHA224$5 extends SHA256$7{constructor(){super();this.A=3238371032|0;this.B=914150663|0;this.C=812702999|0;this.D=4144912697|0;this.E=4290775857|0;this.F=1750603025|0;this.G=1694076839|0;this.H=3204075428|0;this.outputLen=28}}var sha256_1$1=sha256$6.sha256=(0,utils_js_1$l.wrapConstructor)((()=>new SHA256$7));sha256$6.sha224=(0,utils_js_1$l.wrapConstructor)((()=>new SHA224$5));var sha512$4={};var _u64$1={};Object.defineProperty(_u64$1,"__esModule",{value:true});_u64$1.add5L=_u64$1.add5H=_u64$1.add4H=_u64$1.add4L=_u64$1.add3H=_u64$1.add3L=_u64$1.add=_u64$1.rotlBL=_u64$1.rotlBH=_u64$1.rotlSL=_u64$1.rotlSH=_u64$1.rotr32L=_u64$1.rotr32H=_u64$1.rotrBL=_u64$1.rotrBH=_u64$1.rotrSL=_u64$1.rotrSH=_u64$1.shrSL=_u64$1.shrSH=_u64$1.toBig=_u64$1.split=_u64$1.fromBig=void 0;const U32_MASK64$1=BigInt(2**32-1);const _32n$1=BigInt(32);function fromBig$1(e,t=false){if(t)return{h:Number(e&U32_MASK64$1),l:Number(e>>_32n$1&U32_MASK64$1)};return{h:Number(e>>_32n$1&U32_MASK64$1)|0,l:Number(e&U32_MASK64$1)|0}}_u64$1.fromBig=fromBig$1;function split$3(e,t=false){let r=new Uint32Array(e.length);let n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:s,l:a}=fromBig$1(e[i],t);[r[i],n[i]]=[s,a]}return[r,n]}_u64$1.split=split$3;const toBig$1=(e,t)=>BigInt(e>>>0)<<_32n$1|BigInt(t>>>0);_u64$1.toBig=toBig$1;const shrSH$1=(e,t,r)=>e>>>r;_u64$1.shrSH=shrSH$1;const shrSL$1=(e,t,r)=>e<<32-r|t>>>r;_u64$1.shrSL=shrSL$1;const rotrSH$1=(e,t,r)=>e>>>r|t<<32-r;_u64$1.rotrSH=rotrSH$1;const rotrSL$1=(e,t,r)=>e<<32-r|t>>>r;_u64$1.rotrSL=rotrSL$1;const rotrBH$1=(e,t,r)=>e<<64-r|t>>>r-32;_u64$1.rotrBH=rotrBH$1;const rotrBL$1=(e,t,r)=>e>>>r-32|t<<64-r;_u64$1.rotrBL=rotrBL$1;const rotr32H$1=(e,t)=>t;_u64$1.rotr32H=rotr32H$1;const rotr32L$1=(e,t)=>e;_u64$1.rotr32L=rotr32L$1;const rotlSH$1=(e,t,r)=>e<<r|t>>>32-r;_u64$1.rotlSH=rotlSH$1;const rotlSL$1=(e,t,r)=>t<<r|e>>>32-r;_u64$1.rotlSL=rotlSL$1;const rotlBH$1=(e,t,r)=>t<<r-32|e>>>64-r;_u64$1.rotlBH=rotlBH$1;const rotlBL$1=(e,t,r)=>e<<r-32|t>>>64-r;_u64$1.rotlBL=rotlBL$1;function add$1(e,t,r,n){const i=(t>>>0)+(n>>>0);return{h:e+r+(i/2**32|0)|0,l:i|0}}_u64$1.add=add$1;const add3L$1=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0);_u64$1.add3L=add3L$1;const add3H$1=(e,t,r,n)=>t+r+n+(e/2**32|0)|0;_u64$1.add3H=add3H$1;const add4L$1=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0);_u64$1.add4L=add4L$1;const add4H$1=(e,t,r,n,i)=>t+r+n+i+(e/2**32|0)|0;_u64$1.add4H=add4H$1;const add5L$1=(e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0);_u64$1.add5L=add5L$1;const add5H$1=(e,t,r,n,i,s)=>t+r+n+i+s+(e/2**32|0)|0;_u64$1.add5H=add5H$1;const u64$1={fromBig:fromBig$1,split:split$3,toBig:toBig$1,shrSH:shrSH$1,shrSL:shrSL$1,rotrSH:rotrSH$1,rotrSL:rotrSL$1,rotrBH:rotrBH$1,rotrBL:rotrBL$1,rotr32H:rotr32H$1,rotr32L:rotr32L$1,rotlSH:rotlSH$1,rotlSL:rotlSL$1,rotlBH:rotlBH$1,rotlBL:rotlBL$1,add:add$1,add3L:add3L$1,add3H:add3H$1,add4L:add4L$1,add4H:add4H$1,add5H:add5H$1,add5L:add5L$1};_u64$1.default=u64$1;Object.defineProperty(sha512$4,"__esModule",{value:true});sha512$4.sha384=sha512$4.sha512_256=sha512$4.sha512_224=sha512_1$1=sha512$4.sha512=sha512$4.SHA512=void 0;const _sha2_js_1$6=_sha2$3;const _u64_js_1$3=_u64$1;const utils_js_1$k=utils$x;const[SHA512_Kh$1,SHA512_Kl$1]=(()=>_u64_js_1$3.default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((e=>BigInt(e)))))();const SHA512_W_H$1=new Uint32Array(80);const SHA512_W_L$1=new Uint32Array(80);class SHA512$5 extends _sha2_js_1$6.SHA2{constructor(){super(128,64,16,false);this.Ah=1779033703|0;this.Al=4089235720|0;this.Bh=3144134277|0;this.Bl=2227873595|0;this.Ch=1013904242|0;this.Cl=4271175723|0;this.Dh=2773480762|0;this.Dl=1595750129|0;this.Eh=1359893119|0;this.El=2917565137|0;this.Fh=2600822924|0;this.Fl=725511199|0;this.Gh=528734635|0;this.Gl=4215389547|0;this.Hh=1541459225|0;this.Hl=327033209|0}get(){const{Ah:e,Al:t,Bh:r,Bl:n,Ch:i,Cl:s,Dh:a,Dl:o,Eh:f,El:c,Fh:u,Fl:l,Gh:h,Gl:d,Hh:p,Hl:y}=this;return[e,t,r,n,i,s,a,o,f,c,u,l,h,d,p,y]}set(e,t,r,n,i,s,a,o,f,c,u,l,h,d,p,y){this.Ah=e|0;this.Al=t|0;this.Bh=r|0;this.Bl=n|0;this.Ch=i|0;this.Cl=s|0;this.Dh=a|0;this.Dl=o|0;this.Eh=f|0;this.El=c|0;this.Fh=u|0;this.Fl=l|0;this.Gh=h|0;this.Gl=d|0;this.Hh=p|0;this.Hl=y|0}process(e,t){for(let r=0;r<16;r++,t+=4){SHA512_W_H$1[r]=e.getUint32(t);SHA512_W_L$1[r]=e.getUint32(t+=4)}for(let e=16;e<80;e++){const t=SHA512_W_H$1[e-15]|0;const r=SHA512_W_L$1[e-15]|0;const n=_u64_js_1$3.default.rotrSH(t,r,1)^_u64_js_1$3.default.rotrSH(t,r,8)^_u64_js_1$3.default.shrSH(t,r,7);const i=_u64_js_1$3.default.rotrSL(t,r,1)^_u64_js_1$3.default.rotrSL(t,r,8)^_u64_js_1$3.default.shrSL(t,r,7);const s=SHA512_W_H$1[e-2]|0;const a=SHA512_W_L$1[e-2]|0;const o=_u64_js_1$3.default.rotrSH(s,a,19)^_u64_js_1$3.default.rotrBH(s,a,61)^_u64_js_1$3.default.shrSH(s,a,6);const f=_u64_js_1$3.default.rotrSL(s,a,19)^_u64_js_1$3.default.rotrBL(s,a,61)^_u64_js_1$3.default.shrSL(s,a,6);const c=_u64_js_1$3.default.add4L(i,f,SHA512_W_L$1[e-7],SHA512_W_L$1[e-16]);const u=_u64_js_1$3.default.add4H(c,n,o,SHA512_W_H$1[e-7],SHA512_W_H$1[e-16]);SHA512_W_H$1[e]=u|0;SHA512_W_L$1[e]=c|0}let{Ah:r,Al:n,Bh:i,Bl:s,Ch:a,Cl:o,Dh:f,Dl:c,Eh:u,El:l,Fh:h,Fl:d,Gh:p,Gl:y,Hh:m,Hl:g}=this;for(let e=0;e<80;e++){const t=_u64_js_1$3.default.rotrSH(u,l,14)^_u64_js_1$3.default.rotrSH(u,l,18)^_u64_js_1$3.default.rotrBH(u,l,41);const b=_u64_js_1$3.default.rotrSL(u,l,14)^_u64_js_1$3.default.rotrSL(u,l,18)^_u64_js_1$3.default.rotrBL(u,l,41);const A=u&h^~u&p;const w=l&d^~l&y;const E=_u64_js_1$3.default.add5L(g,b,w,SHA512_Kl$1[e],SHA512_W_L$1[e]);const v=_u64_js_1$3.default.add5H(E,m,t,A,SHA512_Kh$1[e],SHA512_W_H$1[e]);const _=E|0;const S=_u64_js_1$3.default.rotrSH(r,n,28)^_u64_js_1$3.default.rotrBH(r,n,34)^_u64_js_1$3.default.rotrBH(r,n,39);const $=_u64_js_1$3.default.rotrSL(r,n,28)^_u64_js_1$3.default.rotrBL(r,n,34)^_u64_js_1$3.default.rotrBL(r,n,39);const T=r&i^r&a^i&a;const I=n&s^n&o^s&o;m=p|0;g=y|0;p=h|0;y=d|0;h=u|0;d=l|0;({h:u,l}=_u64_js_1$3.default.add(f|0,c|0,v|0,_|0));f=a|0;c=o|0;a=i|0;o=s|0;i=r|0;s=n|0;const C=_u64_js_1$3.default.add3L(_,$,I);r=_u64_js_1$3.default.add3H(C,v,S,T);n=C|0}({h:r,l:n}=_u64_js_1$3.default.add(this.Ah|0,this.Al|0,r|0,n|0));({h:i,l:s}=_u64_js_1$3.default.add(this.Bh|0,this.Bl|0,i|0,s|0));({h:a,l:o}=_u64_js_1$3.default.add(this.Ch|0,this.Cl|0,a|0,o|0));({h:f,l:c}=_u64_js_1$3.default.add(this.Dh|0,this.Dl|0,f|0,c|0));({h:u,l}=_u64_js_1$3.default.add(this.Eh|0,this.El|0,u|0,l|0));({h,l:d}=_u64_js_1$3.default.add(this.Fh|0,this.Fl|0,h|0,d|0));({h:p,l:y}=_u64_js_1$3.default.add(this.Gh|0,this.Gl|0,p|0,y|0));({h:m,l:g}=_u64_js_1$3.default.add(this.Hh|0,this.Hl|0,m|0,g|0));this.set(r,n,i,s,a,o,f,c,u,l,h,d,p,y,m,g)}roundClean(){SHA512_W_H$1.fill(0);SHA512_W_L$1.fill(0)}destroy(){this.buffer.fill(0);this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}sha512$4.SHA512=SHA512$5;class SHA512_224$1 extends SHA512$5{constructor(){super();this.Ah=2352822216|0;this.Al=424955298|0;this.Bh=1944164710|0;this.Bl=2312950998|0;this.Ch=502970286|0;this.Cl=855612546|0;this.Dh=1738396948|0;this.Dl=1479516111|0;this.Eh=258812777|0;this.El=2077511080|0;this.Fh=2011393907|0;this.Fl=79989058|0;this.Gh=1067287976|0;this.Gl=1780299464|0;this.Hh=286451373|0;this.Hl=2446758561|0;this.outputLen=28}}class SHA512_256$1 extends SHA512$5{constructor(){super();this.Ah=573645204|0;this.Al=4230739756|0;this.Bh=2673172387|0;this.Bl=3360449730|0;this.Ch=596883563|0;this.Cl=1867755857|0;this.Dh=2520282905|0;this.Dl=1497426621|0;this.Eh=2519219938|0;this.El=2827943907|0;this.Fh=3193839141|0;this.Fl=1401305490|0;this.Gh=721525244|0;this.Gl=746961066|0;this.Hh=246885852|0;this.Hl=2177182882|0;this.outputLen=32}}class SHA384$4 extends SHA512$5{constructor(){super();this.Ah=3418070365|0;this.Al=3238371032|0;this.Bh=1654270250|0;this.Bl=914150663|0;this.Ch=2438529370|0;this.Cl=812702999|0;this.Dh=355462360|0;this.Dl=4144912697|0;this.Eh=1731405415|0;this.El=4290775857|0;this.Fh=2394180231|0;this.Fl=1750603025|0;this.Gh=3675008525|0;this.Gl=1694076839|0;this.Hh=1203062813|0;this.Hl=3204075428|0;this.outputLen=48}}var sha512_1$1=sha512$4.sha512=(0,utils_js_1$k.wrapConstructor)((()=>new SHA512$5));sha512$4.sha512_224=(0,utils_js_1$k.wrapConstructor)((()=>new SHA512_224$1));sha512$4.sha512_256=(0,utils_js_1$k.wrapConstructor)((()=>new SHA512_256$1));sha512$4.sha384=(0,utils_js_1$k.wrapConstructor)((()=>new SHA384$4));function getGlobal$3(){if(typeof self!=="undefined"){return self}if(typeof window!=="undefined"){return window}if(typeof global$1!=="undefined"){return global$1}throw new Error("unable to locate global object")}const anyGlobal$1=getGlobal$3();const crypto$a=anyGlobal$1.crypto||anyGlobal$1.msCrypto;function createHash$1(e){switch(e){case"sha256":return sha256_1$1.create();case"sha512":return sha512_1$1.create()}assertArgument$1(false,"invalid hashing algorithm name","algorithm",e)}function createHmac$1(e,t){const r={sha256:sha256_1$1,sha512:sha512_1$1}[e];assertArgument$1(r!=null,"invalid hmac algorithm","algorithm",e);return hmac$4.hmac.create(r,t)}function pbkdf2Sync$1(e,t,r,n,i){const s={sha256:sha256_1$1,sha512:sha512_1$1}[i];assertArgument$1(s!=null,"invalid pbkdf2 algorithm","algorithm",i);return pbkdf2_2$1(s,e,t,{c:r,dkLen:n})}function randomBytes$3(e){assert$q(crypto$a!=null,"platform does not support secure random numbers","UNSUPPORTED_OPERATION",{operation:"randomBytes"});assertArgument$1(Number.isInteger(e)&&e>0&&e<=1024,"invalid length","length",e);const t=new Uint8Array(e);crypto$a.getRandomValues(t);return t}let locked$a=false;const _computeHmac$1=function(e,t,r){return createHmac$1(e,t).update(r).digest()};let __computeHmac$1=_computeHmac$1;function computeHmac$1(e,t,r){const n=getBytes$1(t,"key");const i=getBytes$1(r,"data");return hexlify$1(__computeHmac$1(e,n,i))}computeHmac$1._=_computeHmac$1;computeHmac$1.lock=function(){locked$a=true};computeHmac$1.register=function(e){if(locked$a){throw new Error("computeHmac is locked")}__computeHmac$1=e};Object.freeze(computeHmac$1);var sha3$4={};Object.defineProperty(sha3$4,"__esModule",{value:true});sha3$4.shake256=sha3$4.shake128=sha3$4.keccak_512=sha3$4.keccak_384=keccak_256$1=sha3$4.keccak_256=sha3$4.keccak_224=sha3$4.sha3_512=sha3$4.sha3_384=sha3$4.sha3_256=sha3$4.sha3_224=sha3$4.Keccak=sha3$4.keccakP=void 0;const _assert_js_1$7=_assert$3;const _u64_js_1$2=_u64$1;const utils_js_1$j=utils$x;const[SHA3_PI$1,SHA3_ROTL$1,_SHA3_IOTA$1]=[[],[],[]];const _0n$7=BigInt(0);const _1n$7=BigInt(1);const _2n$5=BigInt(2);const _7n$1=BigInt(7);const _256n$1=BigInt(256);const _0x71n$1=BigInt(113);for(let e=0,t=_1n$7,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5];SHA3_PI$1.push(2*(5*n+r));SHA3_ROTL$1.push((e+1)*(e+2)/2%64);let i=_0n$7;for(let e=0;e<7;e++){t=(t<<_1n$7^(t>>_7n$1)*_0x71n$1)%_256n$1;if(t&_2n$5)i^=_1n$7<<(_1n$7<<BigInt(e))-_1n$7}_SHA3_IOTA$1.push(i)}const[SHA3_IOTA_H$1,SHA3_IOTA_L$1]=(0,_u64_js_1$2.split)(_SHA3_IOTA$1,true);const rotlH$1=(e,t,r)=>r>32?(0,_u64_js_1$2.rotlBH)(e,t,r):(0,_u64_js_1$2.rotlSH)(e,t,r);const rotlL$1=(e,t,r)=>r>32?(0,_u64_js_1$2.rotlBL)(e,t,r):(0,_u64_js_1$2.rotlSL)(e,t,r);function keccakP$1(e,t=24){const r=new Uint32Array(5*2);for(let n=24-t;n<24;n++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){const n=(t+8)%10;const i=(t+2)%10;const s=r[i];const a=r[i+1];const o=rotlH$1(s,a,1)^r[n];const f=rotlL$1(s,a,1)^r[n+1];for(let r=0;r<50;r+=10){e[t+r]^=o;e[t+r+1]^=f}}let t=e[2];let i=e[3];for(let r=0;r<24;r++){const n=SHA3_ROTL$1[r];const s=rotlH$1(t,i,n);const a=rotlL$1(t,i,n);const o=SHA3_PI$1[r];t=e[o];i=e[o+1];e[o]=s;e[o+1]=a}for(let t=0;t<50;t+=10){for(let n=0;n<10;n++)r[n]=e[t+n];for(let n=0;n<10;n++)e[t+n]^=~r[(n+2)%10]&r[(n+4)%10]}e[0]^=SHA3_IOTA_H$1[n];e[1]^=SHA3_IOTA_L$1[n]}r.fill(0)}sha3$4.keccakP=keccakP$1;class Keccak$2 extends utils_js_1$j.Hash{constructor(e,t,r,n=false,i=24){super();this.blockLen=e;this.suffix=t;this.outputLen=r;this.enableXOF=n;this.rounds=i;this.pos=0;this.posOut=0;this.finished=false;this.destroyed=false;(0,_assert_js_1$7.number)(r);if(0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200);this.state32=(0,utils_js_1$j.u32)(this.state)}keccak(){keccakP$1(this.state32,this.rounds);this.posOut=0;this.pos=0}update(e){(0,_assert_js_1$7.exists)(this);const{blockLen:t,state:r}=this;e=(0,utils_js_1$j.toBytes)(e);const n=e.length;for(let i=0;i<n;){const s=Math.min(t-this.pos,n-i);for(let t=0;t<s;t++)r[this.pos++]^=e[i++];if(this.pos===t)this.keccak()}return this}finish(){if(this.finished)return;this.finished=true;const{state:e,suffix:t,pos:r,blockLen:n}=this;e[r]^=t;if((t&128)!==0&&r===n-1)this.keccak();e[n-1]^=128;this.keccak()}writeInto(e){(0,_assert_js_1$7.exists)(this,false);(0,_assert_js_1$7.bytes)(e);this.finish();const t=this.state;const{blockLen:r}=this;for(let n=0,i=e.length;n<i;){if(this.posOut>=r)this.keccak();const s=Math.min(r-this.posOut,i-n);e.set(t.subarray(this.posOut,this.posOut+s),n);this.posOut+=s;n+=s}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){(0,_assert_js_1$7.number)(e);return this.xofInto(new Uint8Array(e))}digestInto(e){(0,_assert_js_1$7.output)(e,this);if(this.finished)throw new Error("digest() was already called");this.writeInto(e);this.destroy();return e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=true;this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:n,rounds:i,enableXOF:s}=this;e||(e=new Keccak$2(t,r,n,s,i));e.state32.set(this.state32);e.pos=this.pos;e.posOut=this.posOut;e.finished=this.finished;e.rounds=i;e.suffix=r;e.outputLen=n;e.enableXOF=s;e.destroyed=this.destroyed;return e}}sha3$4.Keccak=Keccak$2;const gen$1=(e,t,r)=>(0,utils_js_1$j.wrapConstructor)((()=>new Keccak$2(t,e,r)));sha3$4.sha3_224=gen$1(6,144,224/8);sha3$4.sha3_256=gen$1(6,136,256/8);sha3$4.sha3_384=gen$1(6,104,384/8);sha3$4.sha3_512=gen$1(6,72,512/8);sha3$4.keccak_224=gen$1(1,144,224/8);var keccak_256$1=sha3$4.keccak_256=gen$1(1,136,256/8);sha3$4.keccak_384=gen$1(1,104,384/8);sha3$4.keccak_512=gen$1(1,72,512/8);const genShake$1=(e,t,r)=>(0,utils_js_1$j.wrapXOFConstructorWithOpts)(((n={})=>new Keccak$2(t,e,n.dkLen===undefined?r:n.dkLen,true)));sha3$4.shake128=genShake$1(31,168,128/8);sha3$4.shake256=genShake$1(31,136,256/8);let locked$9=false;const _keccak256$1=function(e){return keccak_256$1(e)};let __keccak256$1=_keccak256$1;function keccak256$1(e){const t=getBytes$1(e,"data");return hexlify$1(__keccak256$1(t))}keccak256$1._=_keccak256$1;keccak256$1.lock=function(){locked$9=true};keccak256$1.register=function(e){if(locked$9){throw new TypeError("keccak256 is locked")}__keccak256$1=e};Object.freeze(keccak256$1);var ripemd160$3={};Object.defineProperty(ripemd160$3,"__esModule",{value:true});var ripemd160_1$1=ripemd160$3.ripemd160=ripemd160$3.RIPEMD160=void 0;const _sha2_js_1$5=_sha2$3;const utils_js_1$i=utils$x;const Rho$1=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]);const Id$1=Uint8Array.from({length:16},((e,t)=>t));const Pi$1=Id$1.map((e=>(9*e+5)%16));let idxL$1=[Id$1];let idxR$1=[Pi$1];for(let e=0;e<4;e++)for(let t of[idxL$1,idxR$1])t.push(t[e].map((e=>Rho$1[e])));const shifts$1=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map((e=>new Uint8Array(e)));const shiftsL$1=idxL$1.map(((e,t)=>e.map((e=>shifts$1[t][e]))));const shiftsR$1=idxR$1.map(((e,t)=>e.map((e=>shifts$1[t][e]))));const Kl$1=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]);const Kr$1=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]);const rotl$3=(e,t)=>e<<t|e>>>32-t;function f$3(e,t,r,n){if(e===0)return t^r^n;else if(e===1)return t&r|~t&n;else if(e===2)return(t|~r)^n;else if(e===3)return t&n|r&~n;else return t^(r|~n)}const BUF$1=new Uint32Array(16);class RIPEMD160$2 extends _sha2_js_1$5.SHA2{constructor(){super(64,20,8,true);this.h0=1732584193|0;this.h1=4023233417|0;this.h2=2562383102|0;this.h3=271733878|0;this.h4=3285377520|0}get(){const{h0:e,h1:t,h2:r,h3:n,h4:i}=this;return[e,t,r,n,i]}set(e,t,r,n,i){this.h0=e|0;this.h1=t|0;this.h2=r|0;this.h3=n|0;this.h4=i|0}process(e,t){for(let r=0;r<16;r++,t+=4)BUF$1[r]=e.getUint32(t,true);let r=this.h0|0,n=r,i=this.h1|0,s=i,a=this.h2|0,o=a,f=this.h3|0,c=f,u=this.h4|0,l=u;for(let e=0;e<5;e++){const t=4-e;const h=Kl$1[e],d=Kr$1[e];const p=idxL$1[e],y=idxR$1[e];const m=shiftsL$1[e],g=shiftsR$1[e];for(let t=0;t<16;t++){const n=rotl$3(r+f$3(e,i,a,f)+BUF$1[p[t]]+h,m[t])+u|0;r=u,u=f,f=rotl$3(a,10)|0,a=i,i=n}for(let e=0;e<16;e++){const r=rotl$3(n+f$3(t,s,o,c)+BUF$1[y[e]]+d,g[e])+l|0;n=l,l=c,c=rotl$3(o,10)|0,o=s,s=r}}this.set(this.h1+a+c|0,this.h2+f+l|0,this.h3+u+n|0,this.h4+r+s|0,this.h0+i+o|0)}roundClean(){BUF$1.fill(0)}destroy(){this.destroyed=true;this.buffer.fill(0);this.set(0,0,0,0,0)}}ripemd160$3.RIPEMD160=RIPEMD160$2;ripemd160_1$1=ripemd160$3.ripemd160=(0,utils_js_1$i.wrapConstructor)((()=>new RIPEMD160$2));let locked$8=false;const _ripemd160$1=function(e){return ripemd160_1$1(e)};let __ripemd160$1=_ripemd160$1;function ripemd160$2(e){const t=getBytes$1(e,"data");return hexlify$1(__ripemd160$1(t))}ripemd160$2._=_ripemd160$1;ripemd160$2.lock=function(){locked$8=true};ripemd160$2.register=function(e){if(locked$8){throw new TypeError("ripemd160 is locked")}__ripemd160$1=e};Object.freeze(ripemd160$2);let locked$7=false;const _pbkdf2$1=function(e,t,r,n,i){return pbkdf2Sync$1(e,t,r,n,i)};let __pbkdf2$1=_pbkdf2$1;function pbkdf2$3(e,t,r,n,i){const s=getBytes$1(e,"password");const a=getBytes$1(t,"salt");return hexlify$1(__pbkdf2$1(s,a,r,n,i))}pbkdf2$3._=_pbkdf2$1;pbkdf2$3.lock=function(){locked$7=true};pbkdf2$3.register=function(e){if(locked$7){throw new Error("pbkdf2 is locked")}__pbkdf2$1=e};Object.freeze(pbkdf2$3);let locked$6=false;const _randomBytes$1=function(e){return new Uint8Array(randomBytes$3(e))};let __randomBytes$1=_randomBytes$1;function randomBytes$2(e){return __randomBytes$1(e)}randomBytes$2._=_randomBytes$1;randomBytes$2.lock=function(){locked$6=true};randomBytes$2.register=function(e){if(locked$6){throw new Error("randomBytes is locked")}__randomBytes$1=e};Object.freeze(randomBytes$2);var scrypt$5={};Object.defineProperty(scrypt$5,"__esModule",{value:true});var scryptAsync_1$1=scrypt$5.scryptAsync=scrypt_2$1=scrypt$5.scrypt=void 0;const _assert_js_1$6=_assert$3;const sha256_js_1$1=sha256$6;const pbkdf2_js_1$1=pbkdf2$5;const utils_js_1$h=utils$x;const rotl$2=(e,t)=>e<<t|e>>>32-t;function XorAndSalsa$1(e,t,r,n,i,s){let a=e[t++]^r[n++],o=e[t++]^r[n++];let f=e[t++]^r[n++],c=e[t++]^r[n++];let u=e[t++]^r[n++],l=e[t++]^r[n++];let h=e[t++]^r[n++],d=e[t++]^r[n++];let p=e[t++]^r[n++],y=e[t++]^r[n++];let m=e[t++]^r[n++],g=e[t++]^r[n++];let b=e[t++]^r[n++],A=e[t++]^r[n++];let w=e[t++]^r[n++],E=e[t++]^r[n++];let v=a,_=o,S=f,$=c,T=u,I=l,C=h,P=d,R=p,N=y,k=m,O=g,x=b,B=A,D=w,M=E;for(let e=0;e<8;e+=2){T^=rotl$2(v+x|0,7);R^=rotl$2(T+v|0,9);x^=rotl$2(R+T|0,13);v^=rotl$2(x+R|0,18);N^=rotl$2(I+_|0,7);B^=rotl$2(N+I|0,9);_^=rotl$2(B+N|0,13);I^=rotl$2(_+B|0,18);D^=rotl$2(k+C|0,7);S^=rotl$2(D+k|0,9);C^=rotl$2(S+D|0,13);k^=rotl$2(C+S|0,18);$^=rotl$2(M+O|0,7);P^=rotl$2($+M|0,9);O^=rotl$2(P+$|0,13);M^=rotl$2(O+P|0,18);_^=rotl$2(v+$|0,7);S^=rotl$2(_+v|0,9);$^=rotl$2(S+_|0,13);v^=rotl$2($+S|0,18);C^=rotl$2(I+T|0,7);P^=rotl$2(C+I|0,9);T^=rotl$2(P+C|0,13);I^=rotl$2(T+P|0,18);O^=rotl$2(k+N|0,7);R^=rotl$2(O+k|0,9);N^=rotl$2(R+O|0,13);k^=rotl$2(N+R|0,18);x^=rotl$2(M+D|0,7);B^=rotl$2(x+M|0,9);D^=rotl$2(B+x|0,13);M^=rotl$2(D+B|0,18)}i[s++]=a+v|0;i[s++]=o+_|0;i[s++]=f+S|0;i[s++]=c+$|0;i[s++]=u+T|0;i[s++]=l+I|0;i[s++]=h+C|0;i[s++]=d+P|0;i[s++]=p+R|0;i[s++]=y+N|0;i[s++]=m+k|0;i[s++]=g+O|0;i[s++]=b+x|0;i[s++]=A+B|0;i[s++]=w+D|0;i[s++]=E+M|0}function BlockMix$1(e,t,r,n,i){let s=n+0;let a=n+16*i;for(let n=0;n<16;n++)r[a+n]=e[t+(2*i-1)*16+n];for(let n=0;n<i;n++,s+=16,t+=16){XorAndSalsa$1(r,a,e,t,r,s);if(n>0)a+=16;XorAndSalsa$1(r,s,e,t+=16,r,a)}}function scryptInit$1(e,t,r){const n=(0,utils_js_1$h.checkOpts)({dkLen:32,asyncTick:10,maxmem:1024**3+1024},r);const{N:i,r:s,p:a,dkLen:o,asyncTick:f,maxmem:c,onProgress:u}=n;(0,_assert_js_1$6.number)(i);(0,_assert_js_1$6.number)(s);(0,_assert_js_1$6.number)(a);(0,_assert_js_1$6.number)(o);(0,_assert_js_1$6.number)(f);(0,_assert_js_1$6.number)(c);if(u!==undefined&&typeof u!=="function")throw new Error("progressCb should be function");const l=128*s;const h=l/4;if(i<=1||(i&i-1)!==0||i>=2**(l/8)||i>2**32){throw new Error("Scrypt: N must be larger than 1, a power of 2, less than 2^(128 * r / 8) and less than 2^32")}if(a<0||a>(2**32-1)*32/l){throw new Error("Scrypt: p must be a positive integer less than or equal to ((2^32 - 1) * 32) / (128 * r)")}if(o<0||o>(2**32-1)*32){throw new Error("Scrypt: dkLen should be positive integer less than or equal to (2^32 - 1) * 32")}const d=l*(i+a);if(d>c){throw new Error(`Scrypt: parameters too large, ${d} (128 * r * (N + p)) > ${c} (maxmem)`)}const p=(0,pbkdf2_js_1$1.pbkdf2)(sha256_js_1$1.sha256,e,t,{c:1,dkLen:l*a});const y=(0,utils_js_1$h.u32)(p);const m=(0,utils_js_1$h.u32)(new Uint8Array(l*i));const g=(0,utils_js_1$h.u32)(new Uint8Array(l));let b=()=>{};if(u){const e=2*i*a;const t=Math.max(Math.floor(e/1e4),1);let r=0;b=()=>{r++;if(u&&(!(r%t)||r===e))u(r/e)}}return{N:i,r:s,p:a,dkLen:o,blockSize32:h,V:m,B32:y,B:p,tmp:g,blockMixCb:b,asyncTick:f}}function scryptOutput$1(e,t,r,n,i){const s=(0,pbkdf2_js_1$1.pbkdf2)(sha256_js_1$1.sha256,e,r,{c:1,dkLen:t});r.fill(0);n.fill(0);i.fill(0);return s}function scrypt$4(e,t,r){const{N:n,r:i,p:s,dkLen:a,blockSize32:o,V:f,B32:c,B:u,tmp:l,blockMixCb:h}=scryptInit$1(e,t,r);for(let e=0;e<s;e++){const t=o*e;for(let e=0;e<o;e++)f[e]=c[t+e];for(let e=0,t=0;e<n-1;e++){BlockMix$1(f,t,f,t+=o,i);h()}BlockMix$1(f,(n-1)*o,c,t,i);h();for(let e=0;e<n;e++){const e=c[t+o-16]%n;for(let r=0;r<o;r++)l[r]=c[t+r]^f[e*o+r];BlockMix$1(l,0,c,t,i);h()}}return scryptOutput$1(e,a,u,f,l)}var scrypt_2$1=scrypt$5.scrypt=scrypt$4;async function scryptAsync$1(e,t,r){const{N:n,r:i,p:s,dkLen:a,blockSize32:o,V:f,B32:c,B:u,tmp:l,blockMixCb:h,asyncTick:d}=scryptInit$1(e,t,r);for(let e=0;e<s;e++){const t=o*e;for(let e=0;e<o;e++)f[e]=c[t+e];let r=0;await(0,utils_js_1$h.asyncLoop)(n-1,d,(()=>{BlockMix$1(f,r,f,r+=o,i);h()}));BlockMix$1(f,(n-1)*o,c,t,i);h();await(0,utils_js_1$h.asyncLoop)(n,d,(()=>{const e=c[t+o-16]%n;for(let r=0;r<o;r++)l[r]=c[t+r]^f[e*o+r];BlockMix$1(l,0,c,t,i);h()}))}return scryptOutput$1(e,a,u,f,l)}scryptAsync_1$1=scrypt$5.scryptAsync=scryptAsync$1;let lockedSync$1=false,lockedAsync$1=false;const _scryptAsync$1=async function(e,t,r,n,i,s,a){return await scryptAsync_1$1(e,t,{N:r,r:n,p:i,dkLen:s,onProgress:a})};const _scryptSync$1=function(e,t,r,n,i,s){return scrypt_2$1(e,t,{N:r,r:n,p:i,dkLen:s})};let __scryptAsync$1=_scryptAsync$1;let __scryptSync$1=_scryptSync$1;async function scrypt$3(e,t,r,n,i,s,a){const o=getBytes$1(e,"passwd");const f=getBytes$1(t,"salt");return hexlify$1(await __scryptAsync$1(o,f,r,n,i,s,a))}scrypt$3._=_scryptAsync$1;scrypt$3.lock=function(){lockedAsync$1=true};scrypt$3.register=function(e){if(lockedAsync$1){throw new Error("scrypt is locked")}__scryptAsync$1=e};Object.freeze(scrypt$3);function scryptSync$1(e,t,r,n,i,s){const a=getBytes$1(e,"passwd");const o=getBytes$1(t,"salt");return hexlify$1(__scryptSync$1(a,o,r,n,i,s))}scryptSync$1._=_scryptSync$1;scryptSync$1.lock=function(){lockedSync$1=true};scryptSync$1.register=function(e){if(lockedSync$1){throw new Error("scryptSync is locked")}__scryptSync$1=e};Object.freeze(scryptSync$1);const _sha256$1=function(e){return createHash$1("sha256").update(e).digest()};const _sha512$1=function(e){return createHash$1("sha512").update(e).digest()};let __sha256$1=_sha256$1;let __sha512$1=_sha512$1;let locked256$1=false,locked512$1=false;function sha256$5(e){const t=getBytes$1(e,"data");return hexlify$1(__sha256$1(t))}sha256$5._=_sha256$1;sha256$5.lock=function(){locked256$1=true};sha256$5.register=function(e){if(locked256$1){throw new Error("sha256 is locked")}__sha256$1=e};Object.freeze(sha256$5);function sha512$3(e){const t=getBytes$1(e,"data");return hexlify$1(__sha512$1(t))}sha512$3._=_sha512$1;sha512$3.lock=function(){locked512$1=true};sha512$3.register=function(e){if(locked512$1){throw new Error("sha512 is locked")}__sha512$1=e};Object.freeze(sha256$5);var secp256k1$1={};var sha256$4={};var _sha2$2={};var _assert$2={};Object.defineProperty(_assert$2,"__esModule",{value:true});_assert$2.output=_assert$2.exists=_assert$2.hash=_assert$2.bytes=_assert$2.bool=_assert$2.number=void 0;function number$2(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}_assert$2.number=number$2;function bool$2(e){if(typeof e!=="boolean")throw new Error(`Expected boolean, not ${e}`)}_assert$2.bool=bool$2;function bytes$b(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}_assert$2.bytes=bytes$b;function hash$7(e){if(typeof e!=="function"||typeof e.create!=="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");number$2(e.outputLen);number$2(e.blockLen)}_assert$2.hash=hash$7;function exists$3(e,t=true){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}_assert$2.exists=exists$3;function output$2(e,t){bytes$b(e);const r=t.outputLen;if(e.length<r){throw new Error(`digestInto() expects output buffer of length at least ${r}`)}}_assert$2.output=output$2;const assert$o={number:number$2,bool:bool$2,bytes:bytes$b,hash:hash$7,exists:exists$3,output:output$2};_assert$2.default=assert$o;var utils$w={};var crypto$9={};Object.defineProperty(crypto$9,"__esModule",{value:true});crypto$9.crypto=void 0;crypto$9.crypto=typeof globalThis==="object"&&"crypto"in globalThis?globalThis.crypto:undefined;(function(e){
/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */
Object.defineProperty(e,"__esModule",{value:true});e.randomBytes=e.wrapXOFConstructorWithOpts=e.wrapConstructorWithOpts=e.wrapConstructor=e.checkOpts=e.Hash=e.concatBytes=e.toBytes=e.utf8ToBytes=e.asyncLoop=e.nextTick=e.hexToBytes=e.bytesToHex=e.isLE=e.rotr=e.createView=e.u32=e.u8=void 0;const t=crypto$9;const r=e=>e instanceof Uint8Array;const n=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength);e.u8=n;const i=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));e.u32=i;const s=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);e.createView=s;const a=(e,t)=>e<<32-t|e>>>t;e.rotr=a;e.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!e.isLE)throw new Error("Non little-endian hardware is not supported");const o=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function f(e){if(!r(e))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++){t+=o[e[r]]}return t}e.bytesToHex=f;function c(e){if(typeof e!=="string")throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(t/2);for(let t=0;t<r.length;t++){const n=t*2;const i=e.slice(n,n+2);const s=Number.parseInt(i,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");r[t]=s}return r}e.hexToBytes=c;const u=async()=>{};e.nextTick=u;async function l(t,r,n){let i=Date.now();for(let s=0;s<t;s++){n(s);const t=Date.now()-i;if(t>=0&&t<r)continue;await(0,e.nextTick)();i+=t}}e.asyncLoop=l;function h(e){if(typeof e!=="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array((new TextEncoder).encode(e))}e.utf8ToBytes=h;function d(e){if(typeof e==="string")e=h(e);if(!r(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}e.toBytes=d;function p(...e){const t=new Uint8Array(e.reduce(((e,t)=>e+t.length),0));let n=0;e.forEach((e=>{if(!r(e))throw new Error("Uint8Array expected");t.set(e,n);n+=e.length}));return t}e.concatBytes=p;class y{clone(){return this._cloneInto()}}e.Hash=y;const m={}.toString;function g(e,t){if(t!==undefined&&m.call(t)!=="[object Object]")throw new Error("Options should be object or undefined");const r=Object.assign(e,t);return r}e.checkOpts=g;function b(e){const t=t=>e().update(d(t)).digest();const r=e();t.outputLen=r.outputLen;t.blockLen=r.blockLen;t.create=()=>e();return t}e.wrapConstructor=b;function A(e){const t=(t,r)=>e(r).update(d(t)).digest();const r=e({});t.outputLen=r.outputLen;t.blockLen=r.blockLen;t.create=t=>e(t);return t}e.wrapConstructorWithOpts=A;function w(e){const t=(t,r)=>e(r).update(d(t)).digest();const r=e({});t.outputLen=r.outputLen;t.blockLen=r.blockLen;t.create=t=>e(t);return t}e.wrapXOFConstructorWithOpts=w;function E(e=32){if(t.crypto&&typeof t.crypto.getRandomValues==="function"){return t.crypto.getRandomValues(new Uint8Array(e))}throw new Error("crypto.getRandomValues must be defined")}e.randomBytes=E})(utils$w);Object.defineProperty(_sha2$2,"__esModule",{value:true});_sha2$2.SHA2=void 0;const _assert_js_1$5=_assert$2;const utils_js_1$g=utils$w;function setBigUint64$2(e,t,r,n){if(typeof e.setBigUint64==="function")return e.setBigUint64(t,r,n);const i=BigInt(32);const s=BigInt(4294967295);const a=Number(r>>i&s);const o=Number(r&s);const f=n?4:0;const c=n?0:4;e.setUint32(t+f,a,n);e.setUint32(t+c,o,n)}class SHA2$2 extends utils_js_1$g.Hash{constructor(e,t,r,n){super();this.blockLen=e;this.outputLen=t;this.padOffset=r;this.isLE=n;this.finished=false;this.length=0;this.pos=0;this.destroyed=false;this.buffer=new Uint8Array(e);this.view=(0,utils_js_1$g.createView)(this.buffer)}update(e){(0,_assert_js_1$5.exists)(this);const{view:t,buffer:r,blockLen:n}=this;e=(0,utils_js_1$g.toBytes)(e);const i=e.length;for(let s=0;s<i;){const a=Math.min(n-this.pos,i-s);if(a===n){const t=(0,utils_js_1$g.createView)(e);for(;n<=i-s;s+=n)this.process(t,s);continue}r.set(e.subarray(s,s+a),this.pos);this.pos+=a;s+=a;if(this.pos===n){this.process(t,0);this.pos=0}}this.length+=e.length;this.roundClean();return this}digestInto(e){(0,_assert_js_1$5.exists)(this);(0,_assert_js_1$5.output)(e,this);this.finished=true;const{buffer:t,view:r,blockLen:n,isLE:i}=this;let{pos:s}=this;t[s++]=128;this.buffer.subarray(s).fill(0);if(this.padOffset>n-s){this.process(r,0);s=0}for(let e=s;e<n;e++)t[e]=0;setBigUint64$2(r,n-8,BigInt(this.length*8),i);this.process(r,0);const a=(0,utils_js_1$g.createView)(e);const o=this.outputLen;if(o%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const f=o/4;const c=this.get();if(f>c.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<f;e++)a.setUint32(4*e,c[e],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);this.destroy();return r}_cloneInto(e){e||(e=new this.constructor);e.set(...this.get());const{blockLen:t,buffer:r,length:n,finished:i,destroyed:s,pos:a}=this;e.length=n;e.pos=a;e.finished=i;e.destroyed=s;if(n%t)e.buffer.set(r);return e}}_sha2$2.SHA2=SHA2$2;Object.defineProperty(sha256$4,"__esModule",{value:true});sha256$4.sha224=sha256$4.sha256=void 0;const _sha2_js_1$4=_sha2$2;const utils_js_1$f=utils$w;const Chi$2=(e,t,r)=>e&t^~e&r;const Maj$2=(e,t,r)=>e&t^e&r^t&r;const SHA256_K$2=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);const IV$2=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]);const SHA256_W$2=new Uint32Array(64);class SHA256$6 extends _sha2_js_1$4.SHA2{constructor(){super(64,32,8,false);this.A=IV$2[0]|0;this.B=IV$2[1]|0;this.C=IV$2[2]|0;this.D=IV$2[3]|0;this.E=IV$2[4]|0;this.F=IV$2[5]|0;this.G=IV$2[6]|0;this.H=IV$2[7]|0}get(){const{A:e,B:t,C:r,D:n,E:i,F:s,G:a,H:o}=this;return[e,t,r,n,i,s,a,o]}set(e,t,r,n,i,s,a,o){this.A=e|0;this.B=t|0;this.C=r|0;this.D=n|0;this.E=i|0;this.F=s|0;this.G=a|0;this.H=o|0}process(e,t){for(let r=0;r<16;r++,t+=4)SHA256_W$2[r]=e.getUint32(t,false);for(let e=16;e<64;e++){const t=SHA256_W$2[e-15];const r=SHA256_W$2[e-2];const n=(0,utils_js_1$f.rotr)(t,7)^(0,utils_js_1$f.rotr)(t,18)^t>>>3;const i=(0,utils_js_1$f.rotr)(r,17)^(0,utils_js_1$f.rotr)(r,19)^r>>>10;SHA256_W$2[e]=i+SHA256_W$2[e-7]+n+SHA256_W$2[e-16]|0}let{A:r,B:n,C:i,D:s,E:a,F:o,G:f,H:c}=this;for(let e=0;e<64;e++){const t=(0,utils_js_1$f.rotr)(a,6)^(0,utils_js_1$f.rotr)(a,11)^(0,utils_js_1$f.rotr)(a,25);const u=c+t+Chi$2(a,o,f)+SHA256_K$2[e]+SHA256_W$2[e]|0;const l=(0,utils_js_1$f.rotr)(r,2)^(0,utils_js_1$f.rotr)(r,13)^(0,utils_js_1$f.rotr)(r,22);const h=l+Maj$2(r,n,i)|0;c=f;f=o;o=a;a=s+u|0;s=i;i=n;n=r;r=u+h|0}r=r+this.A|0;n=n+this.B|0;i=i+this.C|0;s=s+this.D|0;a=a+this.E|0;o=o+this.F|0;f=f+this.G|0;c=c+this.H|0;this.set(r,n,i,s,a,o,f,c)}roundClean(){SHA256_W$2.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0);this.buffer.fill(0)}}class SHA224$4 extends SHA256$6{constructor(){super();this.A=3238371032|0;this.B=914150663|0;this.C=812702999|0;this.D=4144912697|0;this.E=4290775857|0;this.F=1750603025|0;this.G=1694076839|0;this.H=3204075428|0;this.outputLen=28}}sha256$4.sha256=(0,utils_js_1$f.wrapConstructor)((()=>new SHA256$6));sha256$4.sha224=(0,utils_js_1$f.wrapConstructor)((()=>new SHA224$4));var modular$1={};var utils$v={};Object.defineProperty(utils$v,"__esModule",{value:true});utils$v.validateObject=utils$v.createHmacDrbg=utils$v.bitMask=utils$v.bitSet=utils$v.bitGet=utils$v.bitLen=utils$v.utf8ToBytes=utils$v.equalBytes=utils$v.concatBytes=utils$v.ensureBytes=utils$v.numberToVarBytesBE=utils$v.numberToBytesLE=utils$v.numberToBytesBE=utils$v.bytesToNumberLE=utils$v.bytesToNumberBE=utils$v.hexToBytes=utils$v.hexToNumber=utils$v.numberToHexUnpadded=utils$v.bytesToHex=void 0;
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$6=BigInt(0);const _1n$6=BigInt(1);const _2n$4=BigInt(2);const u8a$1=e=>e instanceof Uint8Array;const hexes$1=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function bytesToHex$1(e){if(!u8a$1(e))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++){t+=hexes$1[e[r]]}return t}utils$v.bytesToHex=bytesToHex$1;function numberToHexUnpadded$1(e){const t=e.toString(16);return t.length&1?`0${t}`:t}utils$v.numberToHexUnpadded=numberToHexUnpadded$1;function hexToNumber$1(e){if(typeof e!=="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}utils$v.hexToNumber=hexToNumber$1;function hexToBytes$1(e){if(typeof e!=="string")throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(t/2);for(let t=0;t<r.length;t++){const n=t*2;const i=e.slice(n,n+2);const s=Number.parseInt(i,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");r[t]=s}return r}utils$v.hexToBytes=hexToBytes$1;function bytesToNumberBE$1(e){return hexToNumber$1(bytesToHex$1(e))}utils$v.bytesToNumberBE=bytesToNumberBE$1;function bytesToNumberLE$1(e){if(!u8a$1(e))throw new Error("Uint8Array expected");return hexToNumber$1(bytesToHex$1(Uint8Array.from(e).reverse()))}utils$v.bytesToNumberLE=bytesToNumberLE$1;function numberToBytesBE$1(e,t){return hexToBytes$1(e.toString(16).padStart(t*2,"0"))}utils$v.numberToBytesBE=numberToBytesBE$1;function numberToBytesLE$1(e,t){return numberToBytesBE$1(e,t).reverse()}utils$v.numberToBytesLE=numberToBytesLE$1;function numberToVarBytesBE$1(e){return hexToBytes$1(numberToHexUnpadded$1(e))}utils$v.numberToVarBytesBE=numberToVarBytesBE$1;function ensureBytes$1(e,t,r){let n;if(typeof t==="string"){try{n=hexToBytes$1(t)}catch(r){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${r}`)}}else if(u8a$1(t)){n=Uint8Array.from(t)}else{throw new Error(`${e} must be hex string or Uint8Array`)}const i=n.length;if(typeof r==="number"&&i!==r)throw new Error(`${e} expected ${r} bytes, got ${i}`);return n}utils$v.ensureBytes=ensureBytes$1;function concatBytes$1(...e){const t=new Uint8Array(e.reduce(((e,t)=>e+t.length),0));let r=0;e.forEach((e=>{if(!u8a$1(e))throw new Error("Uint8Array expected");t.set(e,r);r+=e.length}));return t}utils$v.concatBytes=concatBytes$1;function equalBytes$1(e,t){if(e.length!==t.length)return false;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return false;return true}utils$v.equalBytes=equalBytes$1;function utf8ToBytes$1(e){if(typeof e!=="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array((new TextEncoder).encode(e))}utils$v.utf8ToBytes=utf8ToBytes$1;function bitLen$1(e){let t;for(t=0;e>_0n$6;e>>=_1n$6,t+=1);return t}utils$v.bitLen=bitLen$1;function bitGet$1(e,t){return e>>BigInt(t)&_1n$6}utils$v.bitGet=bitGet$1;const bitSet$1=(e,t,r)=>e|(r?_1n$6:_0n$6)<<BigInt(t);utils$v.bitSet=bitSet$1;const bitMask$1=e=>(_2n$4<<BigInt(e-1))-_1n$6;utils$v.bitMask=bitMask$1;const u8n$1=e=>new Uint8Array(e);const u8fr$1=e=>Uint8Array.from(e);function createHmacDrbg$1(e,t,r){if(typeof e!=="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!=="number"||t<2)throw new Error("qByteLen must be a number");if(typeof r!=="function")throw new Error("hmacFn must be a function");let n=u8n$1(e);let i=u8n$1(e);let s=0;const a=()=>{n.fill(1);i.fill(0);s=0};const o=(...e)=>r(i,n,...e);const f=(e=u8n$1())=>{i=o(u8fr$1([0]),e);n=o();if(e.length===0)return;i=o(u8fr$1([1]),e);n=o()};const c=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const r=[];while(e<t){n=o();const t=n.slice();r.push(t);e+=n.length}return concatBytes$1(...r)};const u=(e,t)=>{a();f(e);let r=undefined;while(!(r=t(c())))f();a();return r};return u}utils$v.createHmacDrbg=createHmacDrbg$1;const validatorFns$1={bigint:e=>typeof e==="bigint",function:e=>typeof e==="function",boolean:e=>typeof e==="boolean",string:e=>typeof e==="string",stringOrUint8Array:e=>typeof e==="string"||e instanceof Uint8Array,isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e==="function"&&Number.isSafeInteger(e.outputLen)};function validateObject$1(e,t,r={}){const n=(t,r,n)=>{const i=validatorFns$1[r];if(typeof i!=="function")throw new Error(`Invalid validator "${r}", expected function`);const s=e[t];if(n&&s===undefined)return;if(!i(s,e)){throw new Error(`Invalid param ${String(t)}=${s} (${typeof s}), expected ${r}`)}};for(const[e,r]of Object.entries(t))n(e,r,false);for(const[e,t]of Object.entries(r))n(e,t,true);return e}utils$v.validateObject=validateObject$1;Object.defineProperty(modular$1,"__esModule",{value:true});modular$1.mapHashToField=modular$1.getMinHashLength=modular$1.getFieldBytesLength=modular$1.hashToPrivateScalar=modular$1.FpSqrtEven=modular$1.FpSqrtOdd=modular$1.Field=modular$1.nLength=modular$1.FpIsSquare=modular$1.FpDiv=modular$1.FpInvertBatch=modular$1.FpPow=modular$1.validateField=modular$1.isNegativeLE=modular$1.FpSqrt=modular$1.tonelliShanks=modular$1.invert=modular$1.pow2=modular$1.pow=modular$1.mod=void 0;
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const utils_js_1$e=utils$v;const _0n$5=BigInt(0),_1n$5=BigInt(1),_2n$3=BigInt(2),_3n$1=BigInt(3);const _4n$1=BigInt(4),_5n$1=BigInt(5),_8n$1=BigInt(8);BigInt(9);BigInt(16);function mod$1(e,t){const r=e%t;return r>=_0n$5?r:t+r}modular$1.mod=mod$1;function pow$1(e,t,r){if(r<=_0n$5||t<_0n$5)throw new Error("Expected power/modulo > 0");if(r===_1n$5)return _0n$5;let n=_1n$5;while(t>_0n$5){if(t&_1n$5)n=n*e%r;e=e*e%r;t>>=_1n$5}return n}modular$1.pow=pow$1;function pow2$1(e,t,r){let n=e;while(t-- >_0n$5){n*=n;n%=r}return n}modular$1.pow2=pow2$1;function invert$1(e,t){if(e===_0n$5||t<=_0n$5){throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`)}let r=mod$1(e,t);let n=t;let i=_0n$5,s=_1n$5;while(r!==_0n$5){const e=n/r;const t=n%r;const a=i-s*e;n=r,r=t,i=s,s=a}const a=n;if(a!==_1n$5)throw new Error("invert: does not exist");return mod$1(i,t)}modular$1.invert=invert$1;function tonelliShanks$1(e){const t=(e-_1n$5)/_2n$3;let r,n,i;for(r=e-_1n$5,n=0;r%_2n$3===_0n$5;r/=_2n$3,n++);for(i=_2n$3;i<e&&pow$1(i,t,e)!==e-_1n$5;i++);if(n===1){const t=(e+_1n$5)/_4n$1;return function e(r,n){const i=r.pow(n,t);if(!r.eql(r.sqr(i),n))throw new Error("Cannot find square root");return i}}const s=(r+_1n$5)/_2n$3;return function e(a,o){if(a.pow(o,t)===a.neg(a.ONE))throw new Error("Cannot find square root");let f=n;let c=a.pow(a.mul(a.ONE,i),r);let u=a.pow(o,s);let l=a.pow(o,r);while(!a.eql(l,a.ONE)){if(a.eql(l,a.ZERO))return a.ZERO;let e=1;for(let t=a.sqr(l);e<f;e++){if(a.eql(t,a.ONE))break;t=a.sqr(t)}const t=a.pow(c,_1n$5<<BigInt(f-e-1));c=a.sqr(t);u=a.mul(u,t);l=a.mul(l,c);f=e}return u}}modular$1.tonelliShanks=tonelliShanks$1;function FpSqrt$1(e){if(e%_4n$1===_3n$1){const t=(e+_1n$5)/_4n$1;return function e(r,n){const i=r.pow(n,t);if(!r.eql(r.sqr(i),n))throw new Error("Cannot find square root");return i}}if(e%_8n$1===_5n$1){const t=(e-_5n$1)/_8n$1;return function e(r,n){const i=r.mul(n,_2n$3);const s=r.pow(i,t);const a=r.mul(n,s);const o=r.mul(r.mul(a,_2n$3),s);const f=r.mul(a,r.sub(o,r.ONE));if(!r.eql(r.sqr(f),n))throw new Error("Cannot find square root");return f}}return tonelliShanks$1(e)}modular$1.FpSqrt=FpSqrt$1;const isNegativeLE$1=(e,t)=>(mod$1(e,t)&_1n$5)===_1n$5;modular$1.isNegativeLE=isNegativeLE$1;const FIELD_FIELDS$1=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function validateField$1(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"};const r=FIELD_FIELDS$1.reduce(((e,t)=>{e[t]="function";return e}),t);return(0,utils_js_1$e.validateObject)(e,r)}modular$1.validateField=validateField$1;function FpPow$1(e,t,r){if(r<_0n$5)throw new Error("Expected power > 0");if(r===_0n$5)return e.ONE;if(r===_1n$5)return t;let n=e.ONE;let i=t;while(r>_0n$5){if(r&_1n$5)n=e.mul(n,i);i=e.sqr(i);r>>=_1n$5}return n}modular$1.FpPow=FpPow$1;function FpInvertBatch$1(e,t){const r=new Array(t.length);const n=t.reduce(((t,n,i)=>{if(e.is0(n))return t;r[i]=t;return e.mul(t,n)}),e.ONE);const i=e.inv(n);t.reduceRight(((t,n,i)=>{if(e.is0(n))return t;r[i]=e.mul(t,r[i]);return e.mul(t,n)}),i);return r}modular$1.FpInvertBatch=FpInvertBatch$1;function FpDiv$1(e,t,r){return e.mul(t,typeof r==="bigint"?invert$1(r,e.ORDER):e.inv(r))}modular$1.FpDiv=FpDiv$1;function FpIsSquare$1(e){const t=(e.ORDER-_1n$5)/_2n$3;return r=>{const n=e.pow(r,t);return e.eql(n,e.ZERO)||e.eql(n,e.ONE)}}modular$1.FpIsSquare=FpIsSquare$1;function nLength$1(e,t){const r=t!==undefined?t:e.toString(2).length;const n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}modular$1.nLength=nLength$1;function Field$1(e,t,r=false,n={}){if(e<=_0n$5)throw new Error(`Expected Field ORDER > 0, got ${e}`);const{nBitLength:i,nByteLength:s}=nLength$1(e,t);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const a=FpSqrt$1(e);const o=Object.freeze({ORDER:e,BITS:i,BYTES:s,MASK:(0,utils_js_1$e.bitMask)(i),ZERO:_0n$5,ONE:_1n$5,create:t=>mod$1(t,e),isValid:t=>{if(typeof t!=="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof t}`);return _0n$5<=t&&t<e},is0:e=>e===_0n$5,isOdd:e=>(e&_1n$5)===_1n$5,neg:t=>mod$1(-t,e),eql:(e,t)=>e===t,sqr:t=>mod$1(t*t,e),add:(t,r)=>mod$1(t+r,e),sub:(t,r)=>mod$1(t-r,e),mul:(t,r)=>mod$1(t*r,e),pow:(e,t)=>FpPow$1(o,e,t),div:(t,r)=>mod$1(t*invert$1(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>invert$1(t,e),sqrt:n.sqrt||(e=>a(o,e)),invertBatch:e=>FpInvertBatch$1(o,e),cmov:(e,t,r)=>r?t:e,toBytes:e=>r?(0,utils_js_1$e.numberToBytesLE)(e,s):(0,utils_js_1$e.numberToBytesBE)(e,s),fromBytes:e=>{if(e.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${e.length}`);return r?(0,utils_js_1$e.bytesToNumberLE)(e):(0,utils_js_1$e.bytesToNumberBE)(e)}});return Object.freeze(o)}modular$1.Field=Field$1;function FpSqrtOdd$1(e,t){if(!e.isOdd)throw new Error(`Field doesn't have isOdd`);const r=e.sqrt(t);return e.isOdd(r)?r:e.neg(r)}modular$1.FpSqrtOdd=FpSqrtOdd$1;function FpSqrtEven$1(e,t){if(!e.isOdd)throw new Error(`Field doesn't have isOdd`);const r=e.sqrt(t);return e.isOdd(r)?e.neg(r):r}modular$1.FpSqrtEven=FpSqrtEven$1;function hashToPrivateScalar$1(e,t,r=false){e=(0,utils_js_1$e.ensureBytes)("privateHash",e);const n=e.length;const i=nLength$1(t).nByteLength+8;if(i<24||n<i||n>1024)throw new Error(`hashToPrivateScalar: expected ${i}-1024 bytes of input, got ${n}`);const s=r?(0,utils_js_1$e.bytesToNumberLE)(e):(0,utils_js_1$e.bytesToNumberBE)(e);return mod$1(s,t-_1n$5)+_1n$5}modular$1.hashToPrivateScalar=hashToPrivateScalar$1;function getFieldBytesLength$1(e){if(typeof e!=="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}modular$1.getFieldBytesLength=getFieldBytesLength$1;function getMinHashLength$1(e){const t=getFieldBytesLength$1(e);return t+Math.ceil(t/2)}modular$1.getMinHashLength=getMinHashLength$1;function mapHashToField$1(e,t,r=false){const n=e.length;const i=getFieldBytesLength$1(t);const s=getMinHashLength$1(t);if(n<16||n<s||n>1024)throw new Error(`expected ${s}-1024 bytes of input, got ${n}`);const a=r?(0,utils_js_1$e.bytesToNumberBE)(e):(0,utils_js_1$e.bytesToNumberLE)(e);const o=mod$1(a,t-_1n$5)+_1n$5;return r?(0,utils_js_1$e.numberToBytesLE)(o,i):(0,utils_js_1$e.numberToBytesBE)(o,i)}modular$1.mapHashToField=mapHashToField$1;var weierstrass$1={};var curve$2={};Object.defineProperty(curve$2,"__esModule",{value:true});curve$2.validateBasic=curve$2.wNAF=void 0;
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const modular_js_1$3=modular$1;const utils_js_1$d=utils$v;const _0n$4=BigInt(0);const _1n$4=BigInt(1);function wNAF$1(e,t){const r=(e,t)=>{const r=t.negate();return e?r:t};const n=e=>{const r=Math.ceil(t/e)+1;const n=2**(e-1);return{windows:r,windowSize:n}};return{constTimeNegate:r,unsafeLadder(t,r){let n=e.ZERO;let i=t;while(r>_0n$4){if(r&_1n$4)n=n.add(i);i=i.double();r>>=_1n$4}return n},precomputeWindow(e,t){const{windows:r,windowSize:i}=n(t);const s=[];let a=e;let o=a;for(let e=0;e<r;e++){o=a;s.push(o);for(let e=1;e<i;e++){o=o.add(a);s.push(o)}a=o.double()}return s},wNAF(t,i,s){const{windows:a,windowSize:o}=n(t);let f=e.ZERO;let c=e.BASE;const u=BigInt(2**t-1);const l=2**t;const h=BigInt(t);for(let e=0;e<a;e++){const t=e*o;let n=Number(s&u);s>>=h;if(n>o){n-=l;s+=_1n$4}const a=t;const d=t+Math.abs(n)-1;const p=e%2!==0;const y=n<0;if(n===0){c=c.add(r(p,i[a]))}else{f=f.add(r(y,i[d]))}}return{p:f,f:c}},wNAFCached(e,t,r,n){const i=e._WINDOW_SIZE||1;let s=t.get(e);if(!s){s=this.precomputeWindow(e,i);if(i!==1){t.set(e,n(s))}}return this.wNAF(i,s,r)}}}curve$2.wNAF=wNAF$1;function validateBasic$1(e){(0,modular_js_1$3.validateField)(e.Fp);(0,utils_js_1$d.validateObject)(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"});return Object.freeze({...(0,modular_js_1$3.nLength)(e.n,e.nBitLength),...e,...{p:e.Fp.ORDER}})}curve$2.validateBasic=validateBasic$1;(function(e){Object.defineProperty(e,"__esModule",{value:true});e.mapToCurveSimpleSWU=e.SWUFpSqrtRatio=e.weierstrass=e.weierstrassPoints=e.DER=void 0;
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const t=modular$1;const r=utils$v;const n=utils$v;const i=curve$2;function s(e){const t=(0,i.validateBasic)(e);r.validateObject(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:s,a}=t;if(n){if(!s.eql(a,s.ZERO)){throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0")}if(typeof n!=="object"||typeof n.beta!=="bigint"||typeof n.splitScalar!=="function"){throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}}return Object.freeze({...t})}const{bytesToNumberBE:a,hexToBytes:o}=r;e.DER={Err:class e extends Error{constructor(e=""){super(e)}},_parseInt(t){const{Err:r}=e.DER;if(t.length<2||t[0]!==2)throw new r("Invalid signature integer tag");const n=t[1];const i=t.subarray(2,n+2);if(!n||i.length!==n)throw new r("Invalid signature integer: wrong length");if(i[0]&128)throw new r("Invalid signature integer: negative");if(i[0]===0&&!(i[1]&128))throw new r("Invalid signature integer: unnecessary leading zero");return{d:a(i),l:t.subarray(n+2)}},toSig(t){const{Err:r}=e.DER;const n=typeof t==="string"?o(t):t;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let i=n.length;if(i<2||n[0]!=48)throw new r("Invalid signature tag");if(n[1]!==i-2)throw new r("Invalid signature: incorrect length");const{d:s,l:a}=e.DER._parseInt(n.subarray(2));const{d:f,l:c}=e.DER._parseInt(a);if(c.length)throw new r("Invalid signature: left bytes after parsing");return{r:s,s:f}},hexFromSig(e){const t=e=>Number.parseInt(e[0],16)&8?"00"+e:e;const r=e=>{const t=e.toString(16);return t.length&1?`0${t}`:t};const n=t(r(e.s));const i=t(r(e.r));const s=n.length/2;const a=i.length/2;const o=r(s);const f=r(a);return`30${r(a+s+4)}02${f}${i}02${o}${n}`}};const f=BigInt(0),c=BigInt(1),u=BigInt(2),l=BigInt(3),h=BigInt(4);function d(e){const a=s(e);const{Fp:o}=a;const u=a.toBytes||((e,t,n)=>{const i=t.toAffine();return r.concatBytes(Uint8Array.from([4]),o.toBytes(i.x),o.toBytes(i.y))});const h=a.fromBytes||(e=>{const t=e.subarray(1);const r=o.fromBytes(t.subarray(0,o.BYTES));const n=o.fromBytes(t.subarray(o.BYTES,2*o.BYTES));return{x:r,y:n}});function d(e){const{a:t,b:r}=a;const n=o.sqr(e);const i=o.mul(n,e);return o.add(o.add(i,o.mul(e,t)),r)}if(!o.eql(o.sqr(a.Gy),d(a.Gx)))throw new Error("bad generator point: equation left != right");function p(e){return typeof e==="bigint"&&f<e&&e<a.n}function y(e){if(!p(e))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function m(e){const{allowedPrivateKeyLengths:i,nByteLength:s,wrapPrivateKey:o,n:f}=a;if(i&&typeof e!=="bigint"){if(e instanceof Uint8Array)e=r.bytesToHex(e);if(typeof e!=="string"||!i.includes(e.length))throw new Error("Invalid key");e=e.padStart(s*2,"0")}let c;try{c=typeof e==="bigint"?e:r.bytesToNumberBE((0,n.ensureBytes)("private key",e,s))}catch(t){throw new Error(`private key must be ${s} bytes, hex or bigint, not ${typeof e}`)}if(o)c=t.mod(c,f);y(c);return c}const g=new Map;function b(e){if(!(e instanceof A))throw new Error("ProjectivePoint expected")}class A{constructor(e,t,r){this.px=e;this.py=t;this.pz=r;if(e==null||!o.isValid(e))throw new Error("x required");if(t==null||!o.isValid(t))throw new Error("y required");if(r==null||!o.isValid(r))throw new Error("z required")}static fromAffine(e){const{x:t,y:r}=e||{};if(!e||!o.isValid(t)||!o.isValid(r))throw new Error("invalid affine point");if(e instanceof A)throw new Error("projective point not allowed");const n=e=>o.eql(e,o.ZERO);if(n(t)&&n(r))return A.ZERO;return new A(t,r,o.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){const t=o.invertBatch(e.map((e=>e.pz)));return e.map(((e,r)=>e.toAffine(t[r]))).map(A.fromAffine)}static fromHex(e){const t=A.fromAffine(h((0,n.ensureBytes)("pointHex",e)));t.assertValidity();return t}static fromPrivateKey(e){return A.BASE.multiply(m(e))}_setWindowSize(e){this._WINDOW_SIZE=e;g.delete(this)}assertValidity(){if(this.is0()){if(a.allowInfinityPoint&&!o.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:e,y:t}=this.toAffine();if(!o.isValid(e)||!o.isValid(t))throw new Error("bad point: x or y not FE");const r=o.sqr(t);const n=d(e);if(!o.eql(r,n))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:e}=this.toAffine();if(o.isOdd)return!o.isOdd(e);throw new Error("Field doesn't support isOdd")}equals(e){b(e);const{px:t,py:r,pz:n}=this;const{px:i,py:s,pz:a}=e;const f=o.eql(o.mul(t,a),o.mul(i,n));const c=o.eql(o.mul(r,a),o.mul(s,n));return f&&c}negate(){return new A(this.px,o.neg(this.py),this.pz)}double(){const{a:e,b:t}=a;const r=o.mul(t,l);const{px:n,py:i,pz:s}=this;let f=o.ZERO,c=o.ZERO,u=o.ZERO;let h=o.mul(n,n);let d=o.mul(i,i);let p=o.mul(s,s);let y=o.mul(n,i);y=o.add(y,y);u=o.mul(n,s);u=o.add(u,u);f=o.mul(e,u);c=o.mul(r,p);c=o.add(f,c);f=o.sub(d,c);c=o.add(d,c);c=o.mul(f,c);f=o.mul(y,f);u=o.mul(r,u);p=o.mul(e,p);y=o.sub(h,p);y=o.mul(e,y);y=o.add(y,u);u=o.add(h,h);h=o.add(u,h);h=o.add(h,p);h=o.mul(h,y);c=o.add(c,h);p=o.mul(i,s);p=o.add(p,p);h=o.mul(p,y);f=o.sub(f,h);u=o.mul(p,d);u=o.add(u,u);u=o.add(u,u);return new A(f,c,u)}add(e){b(e);const{px:t,py:r,pz:n}=this;const{px:i,py:s,pz:f}=e;let c=o.ZERO,u=o.ZERO,h=o.ZERO;const d=a.a;const p=o.mul(a.b,l);let y=o.mul(t,i);let m=o.mul(r,s);let g=o.mul(n,f);let w=o.add(t,r);let E=o.add(i,s);w=o.mul(w,E);E=o.add(y,m);w=o.sub(w,E);E=o.add(t,n);let v=o.add(i,f);E=o.mul(E,v);v=o.add(y,g);E=o.sub(E,v);v=o.add(r,n);c=o.add(s,f);v=o.mul(v,c);c=o.add(m,g);v=o.sub(v,c);h=o.mul(d,E);c=o.mul(p,g);h=o.add(c,h);c=o.sub(m,h);h=o.add(m,h);u=o.mul(c,h);m=o.add(y,y);m=o.add(m,y);g=o.mul(d,g);E=o.mul(p,E);m=o.add(m,g);g=o.sub(y,g);g=o.mul(d,g);E=o.add(E,g);y=o.mul(m,E);u=o.add(u,y);y=o.mul(v,E);c=o.mul(w,c);c=o.sub(c,y);y=o.mul(w,m);h=o.mul(v,h);h=o.add(h,y);return new A(c,u,h)}subtract(e){return this.add(e.negate())}is0(){return this.equals(A.ZERO)}wNAF(e){return E.wNAFCached(this,g,e,(e=>{const t=o.invertBatch(e.map((e=>e.pz)));return e.map(((e,r)=>e.toAffine(t[r]))).map(A.fromAffine)}))}multiplyUnsafe(e){const t=A.ZERO;if(e===f)return t;y(e);if(e===c)return this;const{endo:r}=a;if(!r)return E.unsafeLadder(this,e);let{k1neg:n,k1:i,k2neg:s,k2:u}=r.splitScalar(e);let l=t;let h=t;let d=this;while(i>f||u>f){if(i&c)l=l.add(d);if(u&c)h=h.add(d);d=d.double();i>>=c;u>>=c}if(n)l=l.negate();if(s)h=h.negate();h=new A(o.mul(h.px,r.beta),h.py,h.pz);return l.add(h)}multiply(e){y(e);let t=e;let r,n;const{endo:i}=a;if(i){const{k1neg:e,k1:s,k2neg:a,k2:f}=i.splitScalar(t);let{p:c,f:u}=this.wNAF(s);let{p:l,f:h}=this.wNAF(f);c=E.constTimeNegate(e,c);l=E.constTimeNegate(a,l);l=new A(o.mul(l.px,i.beta),l.py,l.pz);r=c.add(l);n=u.add(h)}else{const{p:e,f:i}=this.wNAF(t);r=e;n=i}return A.normalizeZ([r,n])[0]}multiplyAndAddUnsafe(e,t,r){const n=A.BASE;const i=(e,t)=>t===f||t===c||!e.equals(n)?e.multiplyUnsafe(t):e.multiply(t);const s=i(this,t).add(i(e,r));return s.is0()?undefined:s}toAffine(e){const{px:t,py:r,pz:n}=this;const i=this.is0();if(e==null)e=i?o.ONE:o.inv(n);const s=o.mul(t,e);const a=o.mul(r,e);const f=o.mul(n,e);if(i)return{x:o.ZERO,y:o.ZERO};if(!o.eql(f,o.ONE))throw new Error("invZ was invalid");return{x:s,y:a}}isTorsionFree(){const{h:e,isTorsionFree:t}=a;if(e===c)return true;if(t)return t(A,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:e,clearCofactor:t}=a;if(e===c)return this;if(t)return t(A,this);return this.multiplyUnsafe(a.h)}toRawBytes(e=true){this.assertValidity();return u(A,this,e)}toHex(e=true){return r.bytesToHex(this.toRawBytes(e))}}A.BASE=new A(a.Gx,a.Gy,o.ONE);A.ZERO=new A(o.ZERO,o.ONE,o.ZERO);const w=a.nBitLength;const E=(0,i.wNAF)(A,a.endo?Math.ceil(w/2):w);return{CURVE:a,ProjectivePoint:A,normPrivateKeyToScalar:m,weierstrassEquation:d,isWithinCurveOrder:p}}e.weierstrassPoints=d;function p(e){const t=(0,i.validateBasic)(e);r.validateObject(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"});return Object.freeze({lowS:true,...t})}function y(i){const s=p(i);const{Fp:a,n:o}=s;const u=a.BYTES+1;const l=2*a.BYTES+1;function h(e){return f<e&&e<a.ORDER}function y(e){return t.mod(e,o)}function m(e){return t.invert(e,o)}const{ProjectivePoint:g,normPrivateKeyToScalar:b,weierstrassEquation:A,isWithinCurveOrder:w}=d({...s,toBytes(e,t,n){const i=t.toAffine();const s=a.toBytes(i.x);const o=r.concatBytes;if(n){return o(Uint8Array.from([t.hasEvenY()?2:3]),s)}else{return o(Uint8Array.from([4]),s,a.toBytes(i.y))}},fromBytes(e){const t=e.length;const n=e[0];const i=e.subarray(1);if(t===u&&(n===2||n===3)){const e=r.bytesToNumberBE(i);if(!h(e))throw new Error("Point is not on curve");const t=A(e);let s=a.sqrt(t);const o=(s&c)===c;const f=(n&1)===1;if(f!==o)s=a.neg(s);return{x:e,y:s}}else if(t===l&&n===4){const e=a.fromBytes(i.subarray(0,a.BYTES));const t=a.fromBytes(i.subarray(a.BYTES,2*a.BYTES));return{x:e,y:t}}else{throw new Error(`Point of length ${t} was invalid. Expected ${u} compressed bytes or ${l} uncompressed bytes`)}}});const E=e=>r.bytesToHex(r.numberToBytesBE(e,s.nByteLength));function v(e){const t=o>>c;return e>t}function _(e){return v(e)?y(-e):e}const S=(e,t,n)=>r.bytesToNumberBE(e.slice(t,n));class ${constructor(e,t,r){this.r=e;this.s=t;this.recovery=r;this.assertValidity()}static fromCompact(e){const t=s.nByteLength;e=(0,n.ensureBytes)("compactSignature",e,t*2);return new $(S(e,0,t),S(e,t,2*t))}static fromDER(t){const{r,s:i}=e.DER.toSig((0,n.ensureBytes)("DER",t));return new $(r,i)}assertValidity(){if(!w(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!w(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(e){return new $(this.r,this.s,e)}recoverPublicKey(e){const{r:t,s:r,recovery:i}=this;const o=N((0,n.ensureBytes)("msgHash",e));if(i==null||![0,1,2,3].includes(i))throw new Error("recovery id invalid");const f=i===2||i===3?t+s.n:t;if(f>=a.ORDER)throw new Error("recovery id 2 or 3 invalid");const c=(i&1)===0?"02":"03";const u=g.fromHex(c+E(f));const l=m(f);const h=y(-o*l);const d=y(r*l);const p=g.BASE.multiplyAndAddUnsafe(u,h,d);if(!p)throw new Error("point at infinify");p.assertValidity();return p}hasHighS(){return v(this.s)}normalizeS(){return this.hasHighS()?new $(this.r,y(-this.s),this.recovery):this}toDERRawBytes(){return r.hexToBytes(this.toDERHex())}toDERHex(){return e.DER.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return r.hexToBytes(this.toCompactHex())}toCompactHex(){return E(this.r)+E(this.s)}}const T={isValidPrivateKey(e){try{b(e);return true}catch(e){return false}},normPrivateKeyToScalar:b,randomPrivateKey:()=>{const e=t.getMinHashLength(s.n);return t.mapHashToField(s.randomBytes(e),s.n)},precompute(e=8,t=g.BASE){t._setWindowSize(e);t.multiply(BigInt(3));return t}};function I(e,t=true){return g.fromPrivateKey(e).toRawBytes(t)}function C(e){const t=e instanceof Uint8Array;const r=typeof e==="string";const n=(t||r)&&e.length;if(t)return n===u||n===l;if(r)return n===2*u||n===2*l;if(e instanceof g)return true;return false}function P(e,t,r=true){if(C(e))throw new Error("first arg must be private key");if(!C(t))throw new Error("second arg must be public key");const n=g.fromHex(t);return n.multiply(b(e)).toRawBytes(r)}const R=s.bits2int||function(e){const t=r.bytesToNumberBE(e);const n=e.length*8-s.nBitLength;return n>0?t>>BigInt(n):t};const N=s.bits2int_modN||function(e){return y(R(e))};const k=r.bitMask(s.nBitLength);function O(e){if(typeof e!=="bigint")throw new Error("bigint expected");if(!(f<=e&&e<k))throw new Error(`bigint expected < 2^${s.nBitLength}`);return r.numberToBytesBE(e,s.nByteLength)}function x(e,t,i=B){if(["recovered","canonical"].some((e=>e in i)))throw new Error("sign() legacy options not supported");const{hash:o,randomBytes:u}=s;let{lowS:l,prehash:h,extraEntropy:d}=i;if(l==null)l=true;e=(0,n.ensureBytes)("msgHash",e);if(h)e=(0,n.ensureBytes)("prehashed msgHash",o(e));const p=N(e);const A=b(t);const E=[O(A),O(p)];if(d!=null){const e=d===true?u(a.BYTES):d;E.push((0,n.ensureBytes)("extraEntropy",e))}const S=r.concatBytes(...E);const T=p;function I(e){const t=R(e);if(!w(t))return;const r=m(t);const n=g.BASE.multiply(t).toAffine();const i=y(n.x);if(i===f)return;const s=y(r*y(T+i*A));if(s===f)return;let a=(n.x===i?0:2)|Number(n.y&c);let o=s;if(l&&v(s)){o=_(s);a^=1}return new $(i,o,a)}return{seed:S,k2sig:I}}const B={lowS:s.lowS,prehash:false};const D={lowS:s.lowS,prehash:false};function M(e,t,n=B){const{seed:i,k2sig:a}=x(e,t,n);const o=s;const f=r.createHmacDrbg(o.hash.outputLen,o.nByteLength,o.hmac);return f(i,a)}g.BASE._setWindowSize(8);function U(t,r,i,a=D){const o=t;r=(0,n.ensureBytes)("msgHash",r);i=(0,n.ensureBytes)("publicKey",i);if("strict"in a)throw new Error("options.strict was renamed to lowS");const{lowS:f,prehash:c}=a;let u=undefined;let l;try{if(typeof o==="string"||o instanceof Uint8Array){try{u=$.fromDER(o)}catch(t){if(!(t instanceof e.DER.Err))throw t;u=$.fromCompact(o)}}else if(typeof o==="object"&&typeof o.r==="bigint"&&typeof o.s==="bigint"){const{r:e,s:t}=o;u=new $(e,t)}else{throw new Error("PARSE")}l=g.fromHex(i)}catch(e){if(e.message==="PARSE")throw new Error(`signature must be Signature instance, Uint8Array or hex string`);return false}if(f&&u.hasHighS())return false;if(c)r=s.hash(r);const{r:h,s:d}=u;const p=N(r);const b=m(d);const A=y(p*b);const w=y(h*b);const E=g.BASE.multiplyAndAddUnsafe(l,A,w)?.toAffine();if(!E)return false;const v=y(E.x);return v===h}return{CURVE:s,getPublicKey:I,getSharedSecret:P,sign:M,verify:U,ProjectivePoint:g,Signature:$,utils:T}}e.weierstrass=y;function m(e,t){const r=e.ORDER;let n=f;for(let e=r-c;e%u===f;e/=u)n+=c;const i=n;const s=u<<i-c-c;const a=s*u;const o=(r-c)/a;const d=(o-c)/u;const p=a-c;const y=s;const m=e.pow(t,o);const g=e.pow(t,(o+c)/u);let b=(t,r)=>{let n=m;let s=e.pow(r,p);let a=e.sqr(s);a=e.mul(a,r);let o=e.mul(t,a);o=e.pow(o,d);o=e.mul(o,s);s=e.mul(o,r);a=e.mul(o,t);let f=e.mul(a,s);o=e.pow(f,y);let l=e.eql(o,e.ONE);s=e.mul(a,g);o=e.mul(f,n);a=e.cmov(s,a,l);f=e.cmov(o,f,l);for(let t=i;t>c;t--){let r=t-u;r=u<<r-c;let i=e.pow(f,r);const o=e.eql(i,e.ONE);s=e.mul(a,n);n=e.mul(n,n);i=e.mul(f,n);a=e.cmov(s,a,o);f=e.cmov(i,f,o)}return{isValid:l,value:a}};if(e.ORDER%h===l){const r=(e.ORDER-l)/h;const n=e.sqrt(e.neg(t));b=(t,i)=>{let s=e.sqr(i);const a=e.mul(t,i);s=e.mul(s,a);let o=e.pow(s,r);o=e.mul(o,a);const f=e.mul(o,n);const c=e.mul(e.sqr(o),i);const u=e.eql(c,t);let l=e.cmov(f,o,u);return{isValid:u,value:l}}}return b}e.SWUFpSqrtRatio=m;function g(e,r){t.validateField(e);if(!e.isValid(r.A)||!e.isValid(r.B)||!e.isValid(r.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const n=m(e,r.Z);if(!e.isOdd)throw new Error("Fp.isOdd is not implemented!");return t=>{let i,s,a,o,f,c,u,l;i=e.sqr(t);i=e.mul(i,r.Z);s=e.sqr(i);s=e.add(s,i);a=e.add(s,e.ONE);a=e.mul(a,r.B);o=e.cmov(r.Z,e.neg(s),!e.eql(s,e.ZERO));o=e.mul(o,r.A);s=e.sqr(a);c=e.sqr(o);f=e.mul(c,r.A);s=e.add(s,f);s=e.mul(s,a);c=e.mul(c,o);f=e.mul(c,r.B);s=e.add(s,f);u=e.mul(i,a);const{isValid:h,value:d}=n(s,c);l=e.mul(i,t);l=e.mul(l,d);u=e.cmov(u,a,h);l=e.cmov(l,d,h);const p=e.isOdd(t)===e.isOdd(l);l=e.cmov(e.neg(l),l,p);u=e.div(u,o);return{x:u,y:l}}}e.mapToCurveSimpleSWU=g})(weierstrass$1);var hashToCurve$1={};Object.defineProperty(hashToCurve$1,"__esModule",{value:true});hashToCurve$1.createHasher=hashToCurve$1.isogenyMap=hashToCurve$1.hash_to_field=hashToCurve$1.expand_message_xof=hashToCurve$1.expand_message_xmd=void 0;const modular_js_1$2=modular$1;const utils_js_1$c=utils$v;function validateDST$1(e){if(e instanceof Uint8Array)return e;if(typeof e==="string")return(0,utils_js_1$c.utf8ToBytes)(e);throw new Error("DST must be Uint8Array or string")}const os2ip$1=utils_js_1$c.bytesToNumberBE;function i2osp$1(e,t){if(e<0||e>=1<<8*t){throw new Error(`bad I2OSP call: value=${e} length=${t}`)}const r=Array.from({length:t}).fill(0);for(let n=t-1;n>=0;n--){r[n]=e&255;e>>>=8}return new Uint8Array(r)}function strxor$1(e,t){const r=new Uint8Array(e.length);for(let n=0;n<e.length;n++){r[n]=e[n]^t[n]}return r}function isBytes$1(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected")}function isNum$1(e){if(!Number.isSafeInteger(e))throw new Error("number expected")}function expand_message_xmd$1(e,t,r,n){isBytes$1(e);isBytes$1(t);isNum$1(r);if(t.length>255)t=n((0,utils_js_1$c.concatBytes)((0,utils_js_1$c.utf8ToBytes)("H2C-OVERSIZE-DST-"),t));const{outputLen:i,blockLen:s}=n;const a=Math.ceil(r/i);if(a>255)throw new Error("Invalid xmd length");const o=(0,utils_js_1$c.concatBytes)(t,i2osp$1(t.length,1));const f=i2osp$1(0,s);const c=i2osp$1(r,2);const u=new Array(a);const l=n((0,utils_js_1$c.concatBytes)(f,e,c,i2osp$1(0,1),o));u[0]=n((0,utils_js_1$c.concatBytes)(l,i2osp$1(1,1),o));for(let e=1;e<=a;e++){const t=[strxor$1(l,u[e-1]),i2osp$1(e+1,1),o];u[e]=n((0,utils_js_1$c.concatBytes)(...t))}const h=(0,utils_js_1$c.concatBytes)(...u);return h.slice(0,r)}hashToCurve$1.expand_message_xmd=expand_message_xmd$1;function expand_message_xof$1(e,t,r,n,i){isBytes$1(e);isBytes$1(t);isNum$1(r);if(t.length>255){const e=Math.ceil(2*n/8);t=i.create({dkLen:e}).update((0,utils_js_1$c.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(t).digest()}if(r>65535||t.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return i.create({dkLen:r}).update(e).update(i2osp$1(r,2)).update(t).update(i2osp$1(t.length,1)).digest()}hashToCurve$1.expand_message_xof=expand_message_xof$1;function hash_to_field$1(e,t,r){(0,utils_js_1$c.validateObject)(r,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});const{p:n,k:i,m:s,hash:a,expand:o,DST:f}=r;isBytes$1(e);isNum$1(t);const c=validateDST$1(f);const u=n.toString(2).length;const l=Math.ceil((u+i)/8);const h=t*s*l;let d;if(o==="xmd"){d=expand_message_xmd$1(e,c,h,a)}else if(o==="xof"){d=expand_message_xof$1(e,c,h,i,a)}else if(o==="_internal_pass"){d=e}else{throw new Error('expand must be "xmd" or "xof"')}const p=new Array(t);for(let e=0;e<t;e++){const t=new Array(s);for(let r=0;r<s;r++){const i=l*(r+e*s);const a=d.subarray(i,i+l);t[r]=(0,modular_js_1$2.mod)(os2ip$1(a),n)}p[e]=t}return p}hashToCurve$1.hash_to_field=hash_to_field$1;function isogenyMap$1(e,t){const r=t.map((e=>Array.from(e).reverse()));return(t,n)=>{const[i,s,a,o]=r.map((r=>r.reduce(((r,n)=>e.add(e.mul(r,t),n)))));t=e.div(i,s);n=e.mul(n,e.div(a,o));return{x:t,y:n}}}hashToCurve$1.isogenyMap=isogenyMap$1;function createHasher$1(e,t,r){if(typeof t!=="function")throw new Error("mapToCurve() must be defined");return{hashToCurve(n,i){const s=hash_to_field$1(n,2,{...r,DST:r.DST,...i});const a=e.fromAffine(t(s[0]));const o=e.fromAffine(t(s[1]));const f=a.add(o).clearCofactor();f.assertValidity();return f},encodeToCurve(n,i){const s=hash_to_field$1(n,1,{...r,DST:r.encodeDST,...i});const a=e.fromAffine(t(s[0])).clearCofactor();a.assertValidity();return a}}}hashToCurve$1.createHasher=createHasher$1;var _shortw_utils$1={};var hmac$3={};(function(e){Object.defineProperty(e,"__esModule",{value:true});e.hmac=e.HMAC=void 0;const t=_assert$2;const r=utils$w;class n extends r.Hash{constructor(e,n){super();this.finished=false;this.destroyed=false;(0,t.hash)(e);const i=(0,r.toBytes)(n);this.iHash=e.create();if(typeof this.iHash.update!=="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen;this.outputLen=this.iHash.outputLen;const s=this.blockLen;const a=new Uint8Array(s);a.set(i.length>s?e.create().update(i).digest():i);for(let e=0;e<a.length;e++)a[e]^=54;this.iHash.update(a);this.oHash=e.create();for(let e=0;e<a.length;e++)a[e]^=54^92;this.oHash.update(a);a.fill(0)}update(e){(0,t.exists)(this);this.iHash.update(e);return this}digestInto(e){(0,t.exists)(this);(0,t.bytes)(e,this.outputLen);this.finished=true;this.iHash.digestInto(e);this.oHash.update(e);this.oHash.digestInto(e);this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);this.digestInto(e);return e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:n,destroyed:i,blockLen:s,outputLen:a}=this;e=e;e.finished=n;e.destroyed=i;e.blockLen=s;e.outputLen=a;e.oHash=t._cloneInto(e.oHash);e.iHash=r._cloneInto(e.iHash);return e}destroy(){this.destroyed=true;this.oHash.destroy();this.iHash.destroy()}}e.HMAC=n;const i=(e,t,r)=>new n(e,t).update(r).digest();e.hmac=i;e.hmac.create=(e,t)=>new n(e,t)})(hmac$3);Object.defineProperty(_shortw_utils$1,"__esModule",{value:true});_shortw_utils$1.createCurve=_shortw_utils$1.getHash=void 0;
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const hmac_1$1=hmac$3;const utils_1$3=utils$w;const weierstrass_js_1$1=weierstrass$1;function getHash$1(e){return{hash:e,hmac:(t,...r)=>(0,hmac_1$1.hmac)(e,t,(0,utils_1$3.concatBytes)(...r)),randomBytes:utils_1$3.randomBytes}}_shortw_utils$1.getHash=getHash$1;function createCurve$1(e,t){const r=t=>(0,weierstrass_js_1$1.weierstrass)({...e,...getHash$1(t)});return Object.freeze({...r(t),create:r})}_shortw_utils$1.createCurve=createCurve$1;(function(e){Object.defineProperty(e,"__esModule",{value:true});e.encodeToCurve=e.hashToCurve=e.schnorr=e.secp256k1=void 0;
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const t=sha256$4;const r=utils$w;const n=modular$1;const i=weierstrass$1;const s=utils$v;const a=hashToCurve$1;const o=_shortw_utils$1;const f=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f");const c=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141");const u=BigInt(1);const l=BigInt(2);const h=(e,t)=>(e+t/l)/t;function d(e){const t=f;const r=BigInt(3),i=BigInt(6),s=BigInt(11),a=BigInt(22);const o=BigInt(23),c=BigInt(44),u=BigInt(88);const h=e*e*e%t;const d=h*h*e%t;const y=(0,n.pow2)(d,r,t)*d%t;const m=(0,n.pow2)(y,r,t)*d%t;const g=(0,n.pow2)(m,l,t)*h%t;const b=(0,n.pow2)(g,s,t)*g%t;const A=(0,n.pow2)(b,a,t)*b%t;const w=(0,n.pow2)(A,c,t)*A%t;const E=(0,n.pow2)(w,u,t)*w%t;const v=(0,n.pow2)(E,c,t)*A%t;const _=(0,n.pow2)(v,r,t)*d%t;const S=(0,n.pow2)(_,o,t)*b%t;const $=(0,n.pow2)(S,i,t)*h%t;const T=(0,n.pow2)($,l,t);if(!p.eql(p.sqr(T),e))throw new Error("Cannot find square root");return T}const p=(0,n.Field)(f,undefined,undefined,{sqrt:d});e.secp256k1=(0,o.createCurve)({a:BigInt(0),b:BigInt(7),Fp:p,n:c,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:true,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=c;const r=BigInt("0x3086d221a7d46bcde86c90e49284eb15");const i=-u*BigInt("0xe4437ed6010e88286f547fa90abfe4c3");const s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8");const a=r;const o=BigInt("0x100000000000000000000000000000000");const f=h(a*e,t);const l=h(-i*e,t);let d=(0,n.mod)(e-f*r-l*s,t);let p=(0,n.mod)(-f*i-l*a,t);const y=d>o;const m=p>o;if(y)d=t-d;if(m)p=t-p;if(d>o||p>o){throw new Error("splitScalar: Endomorphism failed, k="+e)}return{k1neg:y,k1:d,k2neg:m,k2:p}}}},t.sha256);const y=BigInt(0);const m=e=>typeof e==="bigint"&&y<e&&e<f;const g=e=>typeof e==="bigint"&&y<e&&e<c;const b={};function A(e,...r){let n=b[e];if(n===undefined){const r=(0,t.sha256)(Uint8Array.from(e,(e=>e.charCodeAt(0))));n=(0,s.concatBytes)(r,r);b[e]=n}return(0,t.sha256)((0,s.concatBytes)(n,...r))}const w=e=>e.toRawBytes(true).slice(1);const E=e=>(0,s.numberToBytesBE)(e,32);const v=e=>(0,n.mod)(e,f);const _=e=>(0,n.mod)(e,c);const S=e.secp256k1.ProjectivePoint;const $=(e,t,r)=>S.BASE.multiplyAndAddUnsafe(e,t,r);function T(t){let r=e.secp256k1.utils.normPrivateKeyToScalar(t);let n=S.fromPrivateKey(r);const i=n.hasEvenY()?r:_(-r);return{scalar:i,bytes:w(n)}}function I(e){if(!m(e))throw new Error("bad x: need 0 < x < p");const t=v(e*e);const r=v(t*e+BigInt(7));let n=d(r);if(n%l!==y)n=v(-n);const i=new S(e,n,u);i.assertValidity();return i}function C(...e){return _((0,s.bytesToNumberBE)(A("BIP0340/challenge",...e)))}function P(e){return T(e).bytes}function R(e,t,n=(0,r.randomBytes)(32)){const i=(0,s.ensureBytes)("message",e);const{bytes:a,scalar:o}=T(t);const f=(0,s.ensureBytes)("auxRand",n,32);const c=E(o^(0,s.bytesToNumberBE)(A("BIP0340/aux",f)));const u=A("BIP0340/nonce",c,a,i);const l=_((0,s.bytesToNumberBE)(u));if(l===y)throw new Error("sign failed: k is zero");const{bytes:h,scalar:d}=T(l);const p=C(h,a,i);const m=new Uint8Array(64);m.set(h,0);m.set(E(_(d+p*o)),32);if(!N(m,i,a))throw new Error("sign: Invalid signature produced");return m}function N(e,t,r){const n=(0,s.ensureBytes)("signature",e,64);const i=(0,s.ensureBytes)("message",t);const a=(0,s.ensureBytes)("publicKey",r,32);try{const e=I((0,s.bytesToNumberBE)(a));const t=(0,s.bytesToNumberBE)(n.subarray(0,32));if(!m(t))return false;const r=(0,s.bytesToNumberBE)(n.subarray(32,64));if(!g(r))return false;const o=C(E(t),w(e),i);const f=$(e,r,_(-o));if(!f||!f.hasEvenY()||f.toAffine().x!==t)return false;return true}catch(e){return false}}e.schnorr=(()=>({getPublicKey:P,sign:R,verify:N,utils:{randomPrivateKey:e.secp256k1.utils.randomPrivateKey,lift_x:I,pointToBytes:w,numberToBytesBE:s.numberToBytesBE,bytesToNumberBE:s.bytesToNumberBE,taggedHash:A,mod:n.mod}}))();const k=(()=>(0,a.isogenyMap)(p,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map((e=>e.map((e=>BigInt(e)))))))();const O=(()=>(0,i.mapToCurveSimpleSWU)(p,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:p.create(BigInt("-11"))}))();const x=(()=>(0,a.createHasher)(e.secp256k1.ProjectivePoint,(e=>{const{x:t,y:r}=O(p.create(e[0]));return k(t,r)}),{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:p.ORDER,m:1,k:128,expand:"xmd",hash:t.sha256}))();e.hashToCurve=(()=>x.hashToCurve)();e.encodeToCurve=(()=>x.encodeToCurve)()})(secp256k1$1);const ZeroAddress$1="0x0000000000000000000000000000000000000000";const ZeroHash$1="0x0000000000000000000000000000000000000000000000000000000000000000";const N$3=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141");const WeiPerEther$1=BigInt("1000000000000000000");const MaxUint256$1=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");const MinInt256$1=BigInt("0x8000000000000000000000000000000000000000000000000000000000000000")*BigInt(-1);const MaxInt256$1=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");const EtherSymbol$1="";const MessagePrefix$1="Ethereum Signed Message:\n";const BN_0$i=BigInt(0);const BN_1$9=BigInt(1);const BN_2$7=BigInt(2);const BN_27$3=BigInt(27);const BN_28$3=BigInt(28);const BN_35$3=BigInt(35);const _guard$9={};function toUint256$1(e){return zeroPadValue$1(toBeArray$1(e),32)}class Signature$7{#V;#G;#j;#K;get r(){return this.#V}set r(e){assertArgument$1(dataLength$1(e)===32,"invalid r","value",e);this.#V=hexlify$1(e)}get s(){return this.#G}set s(e){assertArgument$1(dataLength$1(e)===32,"invalid s","value",e);const t=hexlify$1(e);assertArgument$1(parseInt(t.substring(0,3))<8,"non-canonical s","value",t);this.#G=t}get v(){return this.#j}set v(e){const t=getNumber$2(e,"value");assertArgument$1(t===27||t===28,"invalid v","v",e);this.#j=t}get networkV(){return this.#K}get legacyChainId(){const e=this.networkV;if(e==null){return null}return Signature$7.getChainId(e)}get yParity(){return this.v===27?0:1}get yParityAndS(){const e=getBytes$1(this.s);if(this.yParity){e[0]|=128}return hexlify$1(e)}get compactSerialized(){return concat$c([this.r,this.yParityAndS])}get serialized(){return concat$c([this.r,this.s,this.yParity?"0x1c":"0x1b"])}constructor(e,t,r,n){assertPrivate$1(e,_guard$9,"Signature");this.#V=t;this.#G=r;this.#j=n;this.#K=null}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this.s}", yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const e=new Signature$7(_guard$9,this.r,this.s,this.v);if(this.networkV){e.#K=this.networkV}return e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:e!=null?e.toString():null,r:this.r,s:this.s,v:this.v}}static getChainId(e){const t=getBigInt$1(e,"v");if(t==BN_27$3||t==BN_28$3){return BN_0$i}assertArgument$1(t>=BN_35$3,"invalid EIP-155 v","v",e);return(t-BN_35$3)/BN_2$7}static getChainIdV(e,t){return getBigInt$1(e)*BN_2$7+BigInt(35+t-27)}static getNormalizedV(e){const t=getBigInt$1(e);if(t===BN_0$i||t===BN_27$3){return 27}if(t===BN_1$9||t===BN_28$3){return 28}assertArgument$1(t>=BN_35$3,"invalid v","v",e);return t&BN_1$9?27:28}static from(e){function t(t,r){assertArgument$1(t,r,"signature",e)}if(e==null){return new Signature$7(_guard$9,ZeroHash$1,ZeroHash$1,27)}if(typeof e==="string"){const r=getBytes$1(e,"signature");if(r.length===64){const e=hexlify$1(r.slice(0,32));const t=r.slice(32,64);const n=t[0]&128?28:27;t[0]&=127;return new Signature$7(_guard$9,e,hexlify$1(t),n)}if(r.length===65){const e=hexlify$1(r.slice(0,32));const n=r.slice(32,64);t((n[0]&128)===0,"non-canonical s");const i=Signature$7.getNormalizedV(r[64]);return new Signature$7(_guard$9,e,hexlify$1(n),i)}t(false,"invalid raw signature length")}if(e instanceof Signature$7){return e.clone()}const r=e.r;t(r!=null,"missing r");const n=toUint256$1(r);const i=function(e,r){if(e!=null){return toUint256$1(e)}if(r!=null){t(isHexString$1(r,32),"invalid yParityAndS");const e=getBytes$1(r);e[0]&=127;return hexlify$1(e)}t(false,"missing s")}(e.s,e.yParityAndS);t((getBytes$1(i)[0]&128)==0,"non-canonical s");const{networkV:s,v:a}=function(e,r,n){if(e!=null){const t=getBigInt$1(e);return{networkV:t>=BN_35$3?t:undefined,v:Signature$7.getNormalizedV(t)}}if(r!=null){t(isHexString$1(r,32),"invalid yParityAndS");return{v:getBytes$1(r)[0]&128?28:27}}if(n!=null){switch(getNumber$2(n,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}t(false,"invalid yParity")}t(false,"missing v")}(e.v,e.yParityAndS,e.yParity);const o=new Signature$7(_guard$9,n,i,a);if(s){o.#K=s}t(e.yParity==null||getNumber$2(e.yParity,"sig.yParity")===o.yParity,"yParity mismatch");t(e.yParityAndS==null||e.yParityAndS===o.yParityAndS,"yParityAndS mismatch");return o}}class SigningKey$1{#Y;constructor(e){assertArgument$1(dataLength$1(e)===32,"invalid private key","privateKey","[REDACTED]");this.#Y=hexlify$1(e)}get privateKey(){return this.#Y}get publicKey(){return SigningKey$1.computePublicKey(this.#Y)}get compressedPublicKey(){return SigningKey$1.computePublicKey(this.#Y,true)}sign(e){assertArgument$1(dataLength$1(e)===32,"invalid digest length","digest",e);const t=secp256k1$1.secp256k1.sign(getBytesCopy$1(e),getBytesCopy$1(this.#Y),{lowS:true});return Signature$7.from({r:toBeHex$1(t.r,32),s:toBeHex$1(t.s,32),v:t.recovery?28:27})}computeSharedSecret(e){const t=SigningKey$1.computePublicKey(e);return hexlify$1(secp256k1$1.secp256k1.getSharedSecret(getBytesCopy$1(this.#Y),getBytes$1(t),false))}static computePublicKey(e,t){let r=getBytes$1(e,"key");if(r.length===32){const e=secp256k1$1.secp256k1.getPublicKey(r,!!t);return hexlify$1(e)}if(r.length===64){const e=new Uint8Array(65);e[0]=4;e.set(r,1);r=e}const n=secp256k1$1.secp256k1.ProjectivePoint.fromHex(r);return hexlify$1(n.toRawBytes(t))}static recoverPublicKey(e,t){assertArgument$1(dataLength$1(e)===32,"invalid digest length","digest",e);const r=Signature$7.from(t);let n=secp256k1$1.secp256k1.Signature.fromCompact(getBytesCopy$1(concat$c([r.r,r.s])));n=n.addRecoveryBit(r.yParity);const i=n.recoverPublicKey(getBytesCopy$1(e));assertArgument$1(i!=null,"invalid signautre for digest","signature",t);return"0x"+i.toHex(false)}static addPoints(e,t,r){const n=secp256k1$1.secp256k1.ProjectivePoint.fromHex(SigningKey$1.computePublicKey(e).substring(2));const i=secp256k1$1.secp256k1.ProjectivePoint.fromHex(SigningKey$1.computePublicKey(t).substring(2));return"0x"+n.add(i).toHex(!!r)}}function lock$1(){computeHmac$1.lock();keccak256$1.lock();pbkdf2$3.lock();randomBytes$2.lock();ripemd160$2.lock();scrypt$3.lock();scryptSync$1.lock();sha256$5.lock();sha512$3.lock();randomBytes$2.lock()}const BN_0$h=BigInt(0);const BN_36$1=BigInt(36);function getChecksumAddress$1(e){e=e.toLowerCase();const t=e.substring(2).split("");const r=new Uint8Array(40);for(let e=0;e<40;e++){r[e]=t[e].charCodeAt(0)}const n=getBytes$1(keccak256$1(r));for(let e=0;e<40;e+=2){if(n[e>>1]>>4>=8){t[e]=t[e].toUpperCase()}if((n[e>>1]&15)>=8){t[e+1]=t[e+1].toUpperCase()}}return"0x"+t.join("")}const ibanLookup$1={};for(let e=0;e<10;e++){ibanLookup$1[String(e)]=String(e)}for(let e=0;e<26;e++){ibanLookup$1[String.fromCharCode(65+e)]=String(10+e)}const safeDigits$1=15;function ibanChecksum$1(e){e=e.toUpperCase();e=e.substring(4)+e.substring(0,2)+"00";let t=e.split("").map((e=>ibanLookup$1[e])).join("");while(t.length>=safeDigits$1){let e=t.substring(0,safeDigits$1);t=parseInt(e,10)%97+t.substring(e.length)}let r=String(98-parseInt(t,10)%97);while(r.length<2){r="0"+r}return r}const Base36$1=function(){const e={};for(let t=0;t<36;t++){const r="0123456789abcdefghijklmnopqrstuvwxyz"[t];e[r]=BigInt(t)}return e}();function fromBase36$1(e){e=e.toLowerCase();let t=BN_0$h;for(let r=0;r<e.length;r++){t=t*BN_36$1+Base36$1[e[r]]}return t}function getAddress$1(e){assertArgument$1(typeof e==="string","invalid address","address",e);if(e.match(/^(0x)?[0-9a-fA-F]{40}$/)){if(!e.startsWith("0x")){e="0x"+e}const t=getChecksumAddress$1(e);assertArgument$1(!e.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||t===e,"bad address checksum","address",e);return t}if(e.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){assertArgument$1(e.substring(2,4)===ibanChecksum$1(e),"bad icap checksum","address",e);let t=fromBase36$1(e.substring(4)).toString(16);while(t.length<40){t="0"+t}return getChecksumAddress$1("0x"+t)}assertArgument$1(false,"invalid address","address",e)}function getIcapAddress$1(e){let t=BigInt(getAddress$1(e)).toString(36).toUpperCase();while(t.length<30){t="0"+t}return"XE"+ibanChecksum$1("XE00"+t)+t}function getCreateAddress$1(e){const t=getAddress$1(e.from);const r=getBigInt$1(e.nonce,"tx.nonce");let n=r.toString(16);if(n==="0"){n="0x"}else if(n.length%2){n="0x0"+n}else{n="0x"+n}return getAddress$1(dataSlice$1(keccak256$1(encodeRlp$1([t,n])),12))}function getCreate2Address$1(e,t,r){const n=getAddress$1(e);const i=getBytes$1(t,"salt");const s=getBytes$1(r,"initCodeHash");assertArgument$1(i.length===32,"salt must be 32 bytes","salt",t);assertArgument$1(s.length===32,"initCodeHash must be 32 bytes","initCodeHash",r);return getAddress$1(dataSlice$1(keccak256$1(concat$c(["0xff",n,i,s])),12))}function isAddressable$1(e){return e&&typeof e.getAddress==="function"}function isAddress$1(e){try{getAddress$1(e);return true}catch(e){}return false}async function checkAddress$1(e,t){const r=await t;if(r==null||r==="0x0000000000000000000000000000000000000000"){assert$q(typeof e!=="string","unconfigured name","UNCONFIGURED_NAME",{value:e});assertArgument$1(false,"invalid AddressLike value; did not resolve to a value address","target",e)}return getAddress$1(r)}function resolveAddress$1(e,t){if(typeof e==="string"){if(e.match(/^0x[0-9a-f]{40}$/i)){return getAddress$1(e)}assert$q(t!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"});return checkAddress$1(e,t.resolveName(e))}else if(isAddressable$1(e)){return checkAddress$1(e,e.getAddress())}else if(e&&typeof e.then==="function"){return checkAddress$1(e,e)}assertArgument$1(false,"unsupported addressable value","target",e)}const _gaurd$1={};function n$1(e,t){let r=false;if(t<0){r=true;t*=-1}return new Typed$1(_gaurd$1,`${r?"":"u"}int${t}`,e,{signed:r,width:t})}function b$1(e,t){return new Typed$1(_gaurd$1,`bytes${t?t:""}`,e,{size:t})}const _typedSymbol$1=Symbol.for("_ethers_typed");class Typed$1{type;value;#q;_typedSymbol;constructor(e,t,r,n){if(n==null){n=null}assertPrivate$1(_gaurd$1,e,"Typed");defineProperties$1(this,{_typedSymbol:_typedSymbol$1,type:t,value:r});this.#q=n;this.format()}format(){if(this.type==="array"){throw new Error("")}else if(this.type==="dynamicArray"){throw new Error("")}else if(this.type==="tuple"){return`tuple(${this.value.map((e=>e.format())).join(",")})`}return this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple"){throw TypeError("not a tuple")}return this.#q}get arrayLength(){if(this.type!=="array"){throw TypeError("not an array")}if(this.#q===true){return-1}if(this.#q===false){return this.value.length}return null}static from(e,t){return new Typed$1(_gaurd$1,e,t)}static uint8(e){return n$1(e,8)}static uint16(e){return n$1(e,16)}static uint24(e){return n$1(e,24)}static uint32(e){return n$1(e,32)}static uint40(e){return n$1(e,40)}static uint48(e){return n$1(e,48)}static uint56(e){return n$1(e,56)}static uint64(e){return n$1(e,64)}static uint72(e){return n$1(e,72)}static uint80(e){return n$1(e,80)}static uint88(e){return n$1(e,88)}static uint96(e){return n$1(e,96)}static uint104(e){return n$1(e,104)}static uint112(e){return n$1(e,112)}static uint120(e){return n$1(e,120)}static uint128(e){return n$1(e,128)}static uint136(e){return n$1(e,136)}static uint144(e){return n$1(e,144)}static uint152(e){return n$1(e,152)}static uint160(e){return n$1(e,160)}static uint168(e){return n$1(e,168)}static uint176(e){return n$1(e,176)}static uint184(e){return n$1(e,184)}static uint192(e){return n$1(e,192)}static uint200(e){return n$1(e,200)}static uint208(e){return n$1(e,208)}static uint216(e){return n$1(e,216)}static uint224(e){return n$1(e,224)}static uint232(e){return n$1(e,232)}static uint240(e){return n$1(e,240)}static uint248(e){return n$1(e,248)}static uint256(e){return n$1(e,256)}static uint(e){return n$1(e,256)}static int8(e){return n$1(e,-8)}static int16(e){return n$1(e,-16)}static int24(e){return n$1(e,-24)}static int32(e){return n$1(e,-32)}static int40(e){return n$1(e,-40)}static int48(e){return n$1(e,-48)}static int56(e){return n$1(e,-56)}static int64(e){return n$1(e,-64)}static int72(e){return n$1(e,-72)}static int80(e){return n$1(e,-80)}static int88(e){return n$1(e,-88)}static int96(e){return n$1(e,-96)}static int104(e){return n$1(e,-104)}static int112(e){return n$1(e,-112)}static int120(e){return n$1(e,-120)}static int128(e){return n$1(e,-128)}static int136(e){return n$1(e,-136)}static int144(e){return n$1(e,-144)}static int152(e){return n$1(e,-152)}static int160(e){return n$1(e,-160)}static int168(e){return n$1(e,-168)}static int176(e){return n$1(e,-176)}static int184(e){return n$1(e,-184)}static int192(e){return n$1(e,-192)}static int200(e){return n$1(e,-200)}static int208(e){return n$1(e,-208)}static int216(e){return n$1(e,-216)}static int224(e){return n$1(e,-224)}static int232(e){return n$1(e,-232)}static int240(e){return n$1(e,-240)}static int248(e){return n$1(e,-248)}static int256(e){return n$1(e,-256)}static int(e){return n$1(e,-256)}static bytes1(e){return b$1(e,1)}static bytes2(e){return b$1(e,2)}static bytes3(e){return b$1(e,3)}static bytes4(e){return b$1(e,4)}static bytes5(e){return b$1(e,5)}static bytes6(e){return b$1(e,6)}static bytes7(e){return b$1(e,7)}static bytes8(e){return b$1(e,8)}static bytes9(e){return b$1(e,9)}static bytes10(e){return b$1(e,10)}static bytes11(e){return b$1(e,11)}static bytes12(e){return b$1(e,12)}static bytes13(e){return b$1(e,13)}static bytes14(e){return b$1(e,14)}static bytes15(e){return b$1(e,15)}static bytes16(e){return b$1(e,16)}static bytes17(e){return b$1(e,17)}static bytes18(e){return b$1(e,18)}static bytes19(e){return b$1(e,19)}static bytes20(e){return b$1(e,20)}static bytes21(e){return b$1(e,21)}static bytes22(e){return b$1(e,22)}static bytes23(e){return b$1(e,23)}static bytes24(e){return b$1(e,24)}static bytes25(e){return b$1(e,25)}static bytes26(e){return b$1(e,26)}static bytes27(e){return b$1(e,27)}static bytes28(e){return b$1(e,28)}static bytes29(e){return b$1(e,29)}static bytes30(e){return b$1(e,30)}static bytes31(e){return b$1(e,31)}static bytes32(e){return b$1(e,32)}static address(e){return new Typed$1(_gaurd$1,"address",e)}static bool(e){return new Typed$1(_gaurd$1,"bool",!!e)}static bytes(e){return new Typed$1(_gaurd$1,"bytes",e)}static string(e){return new Typed$1(_gaurd$1,"string",e)}static array(e,t){throw new Error("not implemented yet")}static tuple(e,t){throw new Error("not implemented yet")}static overrides(e){return new Typed$1(_gaurd$1,"overrides",Object.assign({},e))}static isTyped(e){return e&&typeof e==="object"&&"_typedSymbol"in e&&e._typedSymbol===_typedSymbol$1}static dereference(e,t){if(Typed$1.isTyped(e)){if(e.type!==t){throw new Error(`invalid type: expecetd ${t}, got ${e.type}`)}return e.value}return e}}class AddressCoder$1 extends Coder$1{constructor(e){super("address","address",e,false)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,t){let r=Typed$1.dereference(t,"string");try{r=getAddress$1(r)}catch(e){return this._throwError(e.message,t)}return e.writeValue(r)}decode(e){return getAddress$1(toBeHex$1(e.readValue(),20))}}class AnonymousCoder$1 extends Coder$1{coder;constructor(e){super(e.name,e.type,"_",e.dynamic);this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,t){return this.coder.encode(e,t)}decode(e){return this.coder.decode(e)}}function pack$1(e,t,r){let n=[];if(Array.isArray(r)){n=r}else if(r&&typeof r==="object"){let e={};n=t.map((t=>{const n=t.localName;assert$q(n,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:t},value:r});assert$q(!e[n],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:t},value:r});e[n]=true;return r[n]}))}else{assertArgument$1(false,"invalid tuple value","tuple",r)}assertArgument$1(t.length===n.length,"types/value length mismatch","tuple",r);let i=new Writer$3;let s=new Writer$3;let a=[];t.forEach(((e,t)=>{let r=n[t];if(e.dynamic){let t=s.length;e.encode(s,r);let n=i.writeUpdatableValue();a.push((e=>{n(e+t)}))}else{e.encode(i,r)}}));a.forEach((e=>{e(i.length)}));let o=e.appendWriter(i);o+=e.appendWriter(s);return o}function unpack$1(e,t){let r=[];let n=[];let i=e.subReader(0);t.forEach((t=>{let s=null;if(t.dynamic){let r=e.readIndex();let n=i.subReader(r);try{s=t.decode(n)}catch(e){if(isError$1(e,"BUFFER_OVERRUN")){throw e}s=e;s.baseType=t.name;s.name=t.localName;s.type=t.type}}else{try{s=t.decode(e)}catch(e){if(isError$1(e,"BUFFER_OVERRUN")){throw e}s=e;s.baseType=t.name;s.name=t.localName;s.type=t.type}}if(s==undefined){throw new Error("investigate")}r.push(s);n.push(t.localName||null)}));return Result$1.fromItems(r,n)}class ArrayCoder$1 extends Coder$1{coder;length;constructor(e,t,r){const n=e.type+"["+(t>=0?t:"")+"]";const i=t===-1||e.dynamic;super("array",n,r,i);defineProperties$1(this,{coder:e,length:t})}defaultValue(){const e=this.coder.defaultValue();const t=[];for(let r=0;r<this.length;r++){t.push(e)}return t}encode(e,t){const r=Typed$1.dereference(t,"array");if(!Array.isArray(r)){this._throwError("expected array value",r)}let n=this.length;if(n===-1){n=r.length;e.writeValue(r.length)}assertArgumentCount$1(r.length,n,"coder array"+(this.localName?" "+this.localName:""));let i=[];for(let e=0;e<r.length;e++){i.push(this.coder)}return pack$1(e,i,r)}decode(e){let t=this.length;if(t===-1){t=e.readIndex();assert$q(t*WordSize$1<=e.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:e.bytes,offset:t*WordSize$1,length:e.dataLength})}let r=[];for(let e=0;e<t;e++){r.push(new AnonymousCoder$1(this.coder))}return unpack$1(e,r)}}class BooleanCoder$1 extends Coder$1{constructor(e){super("bool","bool",e,false)}defaultValue(){return false}encode(e,t){const r=Typed$1.dereference(t,"bool");return e.writeValue(r?1:0)}decode(e){return!!e.readValue()}}class DynamicBytesCoder$1 extends Coder$1{constructor(e,t){super(e,e,t,true)}defaultValue(){return"0x"}encode(e,t){t=getBytesCopy$1(t);let r=e.writeValue(t.length);r+=e.writeBytes(t);return r}decode(e){return e.readBytes(e.readIndex(),true)}}class BytesCoder$1 extends DynamicBytesCoder$1{constructor(e){super("bytes",e)}decode(e){return hexlify$1(super.decode(e))}}class FixedBytesCoder$1 extends Coder$1{size;constructor(e,t){let r="bytes"+String(e);super(r,r,t,false);defineProperties$1(this,{size:e},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(e,t){let r=getBytesCopy$1(Typed$1.dereference(t,this.type));if(r.length!==this.size){this._throwError("incorrect data length",t)}return e.writeBytes(r)}decode(e){return hexlify$1(e.readBytes(this.size))}}const Empty$1=new Uint8Array([]);class NullCoder$1 extends Coder$1{constructor(e){super("null","",e,false)}defaultValue(){return null}encode(e,t){if(t!=null){this._throwError("not null",t)}return e.writeBytes(Empty$1)}decode(e){e.readBytes(0);return null}}const BN_0$g=BigInt(0);const BN_1$8=BigInt(1);const BN_MAX_UINT256$3=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class NumberCoder$1 extends Coder$1{size;signed;constructor(e,t,r){const n=(t?"int":"uint")+e*8;super(n,n,r,false);defineProperties$1(this,{size:e,signed:t},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(e,t){let r=getBigInt$1(Typed$1.dereference(t,this.type));let n=mask$1(BN_MAX_UINT256$3,WordSize$1*8);if(this.signed){let e=mask$1(n,this.size*8-1);if(r>e||r<-(e+BN_1$8)){this._throwError("value out-of-bounds",t)}r=toTwos$1(r,8*WordSize$1)}else if(r<BN_0$g||r>mask$1(n,this.size*8)){this._throwError("value out-of-bounds",t)}return e.writeValue(r)}decode(e){let t=mask$1(e.readValue(),this.size*8);if(this.signed){t=fromTwos$1(t,this.size*8)}return t}}class StringCoder$1 extends DynamicBytesCoder$1{constructor(e){super("string",e)}defaultValue(){return""}encode(e,t){return super.encode(e,toUtf8Bytes$1(Typed$1.dereference(t,"string")))}decode(e){return toUtf8String$1(super.decode(e))}}class TupleCoder$1 extends Coder$1{coders;constructor(e,t){let r=false;const n=[];e.forEach((e=>{if(e.dynamic){r=true}n.push(e.type)}));const i="tuple("+n.join(",")+")";super("tuple",i,t,r);defineProperties$1(this,{coders:Object.freeze(e.slice())})}defaultValue(){const e=[];this.coders.forEach((t=>{e.push(t.defaultValue())}));const t=this.coders.reduce(((e,t)=>{const r=t.localName;if(r){if(!e[r]){e[r]=0}e[r]++}return e}),{});this.coders.forEach(((r,n)=>{let i=r.localName;if(!i||t[i]!==1){return}if(i==="length"){i="_length"}if(e[i]!=null){return}e[i]=e[n]}));return Object.freeze(e)}encode(e,t){const r=Typed$1.dereference(t,"tuple");return pack$1(e,this.coders,r)}decode(e){return unpack$1(e,this.coders)}}function id$1(e){return keccak256$1(toUtf8Bytes$1(e))}var COMPRESSED$1$1="AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI";const FENCED$1=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]);const NSM_MAX$1=4;function decode_arithmetic$1(e){let t=0;function r(){return e[t++]<<8|e[t++]}let n=r();let i=1;let s=[0,1];for(let e=1;e<n;e++){s.push(i+=r())}let a=r();let o=t;t+=a;let f=0;let c=0;function u(){if(f==0){c=c<<8|e[t++];f=8}return c>>--f&1}const l=31;const h=2**l;const d=h>>>1;const p=d>>1;const y=h-1;let m=0;for(let e=0;e<l;e++)m=m<<1|u();let g=[];let b=0;let A=h;while(true){let e=Math.floor(((m-b+1)*i-1)/A);let t=0;let r=n;while(r-t>1){let n=t+r>>>1;if(e<s[n]){r=n}else{t=n}}if(t==0)break;g.push(t);let a=b+Math.floor(A*s[t]/i);let o=b+Math.floor(A*s[t+1]/i)-1;while(((a^o)&d)==0){m=m<<1&y|u();a=a<<1&y;o=o<<1&y|1}while(a&~o&p){m=m&d|m<<1&y>>>1|u();a=a<<1^d;o=(o^d)<<1|d|1}b=a;A=1+o-a}let w=n-4;return g.map((t=>{switch(t-w){case 3:return w+65792+(e[o++]<<16|e[o++]<<8|e[o++]);case 2:return w+256+(e[o++]<<8|e[o++]);case 1:return w+e[o++];default:return t-1}}))}function read_payload$1(e){let t=0;return()=>e[t++]}function read_compressed_payload$1(e){return read_payload$1(decode_arithmetic$1(unsafe_atob$1(e)))}function unsafe_atob$1(e){let t=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach(((e,r)=>t[e.charCodeAt(0)]=r));let r=e.length;let n=new Uint8Array(6*r>>3);for(let i=0,s=0,a=0,o=0;i<r;i++){o=o<<6|t[e.charCodeAt(i)];a+=6;if(a>=8){n[s++]=o>>(a-=8)}}return n}function signed$1(e){return e&1?~e>>1:e>>1}function read_deltas$1(e,t){let r=Array(e);for(let n=0,i=0;n<e;n++)r[n]=i+=signed$1(t());return r}function read_sorted$1(e,t=0){let r=[];while(true){let n=e();let i=e();if(!i)break;t+=n;for(let e=0;e<i;e++){r.push(t+e)}t+=i+1}return r}function read_sorted_arrays$1(e){return read_array_while$1((()=>{let t=read_sorted$1(e);if(t.length)return t}))}function read_mapped$1(e){let t=[];while(true){let r=e();if(r==0)break;t.push(read_linear_table$1(r,e))}while(true){let r=e()-1;if(r<0)break;t.push(read_replacement_table$1(r,e))}return t.flat()}function read_array_while$1(e){let t=[];while(true){let r=e(t.length);if(!r)break;t.push(r)}return t}function read_transposed$1(e,t,r){let n=Array(e).fill().map((()=>[]));for(let i=0;i<t;i++){read_deltas$1(e,r).forEach(((e,t)=>n[t].push(e)))}return n}function read_linear_table$1(e,t){let r=1+t();let n=t();let i=read_array_while$1(t);let s=read_transposed$1(i.length,1+e,t);return s.flatMap(((e,t)=>{let[s,...a]=e;return Array(i[t]).fill().map(((e,t)=>{let i=t*n;return[s+t*r,a.map((e=>e+i))]}))}))}function read_replacement_table$1(e,t){let r=1+t();let n=read_transposed$1(r,1+e,t);return n.map((e=>[e[0],e.slice(1)]))}function read_trie$1(e){let t=[];let r=read_sorted$1(e);i(n([]),[]);return t;function n(t){let i=e();let s=read_array_while$1((()=>{let t=read_sorted$1(e).map((e=>r[e]));if(t.length)return n(t)}));return{S:i,B:s,Q:t}}function i({S:e,B:r},n,s){if(e&4&&s===n[n.length-1])return;if(e&2)s=n[n.length-1];if(e&1)t.push(n);for(let e of r){for(let t of e.Q){i(e,[...n,t],s)}}}}function hex_cp$1(e){return e.toString(16).toUpperCase().padStart(2,"0")}function quote_cp$1(e){return`{${hex_cp$1(e)}}`}function explode_cp$1(e){let t=[];for(let r=0,n=e.length;r<n;){let n=e.codePointAt(r);r+=n<65536?1:2;t.push(n)}return t}function str_from_cps$1(e){const t=4096;let r=e.length;if(r<t)return String.fromCodePoint(...e);let n=[];for(let i=0;i<r;){n.push(String.fromCodePoint(...e.slice(i,i+=t)))}return n.join("")}function compare_arrays$1(e,t){let r=e.length;let n=r-t.length;for(let i=0;n==0&&i<r;i++)n=e[i]-t[i];return n}var COMPRESSED$2="AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g";const S0$1=44032;const L0$1=4352;const V0$1=4449;const T0$1=4519;const L_COUNT$1=19;const V_COUNT$1=21;const T_COUNT$1=28;const N_COUNT$1=V_COUNT$1*T_COUNT$1;const S_COUNT$1=L_COUNT$1*N_COUNT$1;const S1$1=S0$1+S_COUNT$1;const L1$1=L0$1+L_COUNT$1;const V1$1=V0$1+V_COUNT$1;const T1$3=T0$1+T_COUNT$1;function unpack_cc$1(e){return e>>24&255}function unpack_cp$1(e){return e&16777215}let SHIFTED_RANK$1,EXCLUSIONS$1,DECOMP$1,RECOMP$1;function init$1$1(){let e=read_compressed_payload$1(COMPRESSED$2);SHIFTED_RANK$1=new Map(read_sorted_arrays$1(e).flatMap(((e,t)=>e.map((e=>[e,t+1<<24])))));EXCLUSIONS$1=new Set(read_sorted$1(e));DECOMP$1=new Map;RECOMP$1=new Map;for(let[t,r]of read_mapped$1(e)){if(!EXCLUSIONS$1.has(t)&&r.length==2){let[e,n]=r;let i=RECOMP$1.get(e);if(!i){i=new Map;RECOMP$1.set(e,i)}i.set(n,t)}DECOMP$1.set(t,r.reverse())}}function is_hangul$1(e){return e>=S0$1&&e<S1$1}function compose_pair$1(e,t){if(e>=L0$1&&e<L1$1&&t>=V0$1&&t<V1$1){return S0$1+(e-L0$1)*N_COUNT$1+(t-V0$1)*T_COUNT$1}else if(is_hangul$1(e)&&t>T0$1&&t<T1$3&&(e-S0$1)%T_COUNT$1==0){return e+(t-T0$1)}else{let r=RECOMP$1.get(e);if(r){r=r.get(t);if(r){return r}}return-1}}function decomposed$1(e){if(!SHIFTED_RANK$1)init$1$1();let t=[];let r=[];let n=false;function i(e){let r=SHIFTED_RANK$1.get(e);if(r){n=true;e|=r}t.push(e)}for(let n of e){while(true){if(n<128){t.push(n)}else if(is_hangul$1(n)){let e=n-S0$1;let t=e/N_COUNT$1|0;let r=e%N_COUNT$1/T_COUNT$1|0;let s=e%T_COUNT$1;i(L0$1+t);i(V0$1+r);if(s>0)i(T0$1+s)}else{let e=DECOMP$1.get(n);if(e){r.push(...e)}else{i(n)}}if(!r.length)break;n=r.pop()}}if(n&&t.length>1){let e=unpack_cc$1(t[0]);for(let r=1;r<t.length;r++){let n=unpack_cc$1(t[r]);if(n==0||e<=n){e=n;continue}let i=r-1;while(true){let r=t[i+1];t[i+1]=t[i];t[i]=r;if(!i)break;e=unpack_cc$1(t[--i]);if(e<=n)break}e=unpack_cc$1(t[r])}}return t}function composed_from_decomposed$1(e){let t=[];let r=[];let n=-1;let i=0;for(let s of e){let e=unpack_cc$1(s);let a=unpack_cp$1(s);if(n==-1){if(e==0){n=a}else{t.push(a)}}else if(i>0&&i>=e){if(e==0){t.push(n,...r);r.length=0;n=a}else{r.push(a)}i=e}else{let s=compose_pair$1(n,a);if(s>=0){n=s}else if(i==0&&e==0){t.push(n);n=a}else{r.push(a);i=e}}}if(n>=0){t.push(n,...r)}return t}function nfd$1(e){return decomposed$1(e).map(unpack_cp$1)}function nfc$1(e){return composed_from_decomposed$1(decomposed$1(e))}const HYPHEN$1=45;const STOP_CH$1=".";const FE0F$1=65039;const UNIQUE_PH$1=1;const Array_from$1=e=>Array.from(e);function group_has_cp$1(e,t){return e.P.has(t)||e.Q.has(t)}class Emoji$1 extends Array{get is_emoji(){return true}}let MAPPED$1,IGNORED$1,CM$1,NSM$1,ESCAPE$1,GROUPS$1,WHOLE_VALID$1,WHOLE_MAP$1,VALID$1,EMOJI_LIST$1,EMOJI_ROOT$1;function init$3(){if(MAPPED$1)return;let e=read_compressed_payload$1(COMPRESSED$1$1);const t=()=>read_sorted$1(e);const r=()=>new Set(t());MAPPED$1=new Map(read_mapped$1(e));IGNORED$1=r();CM$1=t();NSM$1=new Set(t().map((e=>CM$1[e])));CM$1=new Set(CM$1);ESCAPE$1=r();r();let n=read_sorted_arrays$1(e);let i=e();const s=()=>new Set(t().flatMap((e=>n[e])).concat(t()));GROUPS$1=read_array_while$1((t=>{let r=read_array_while$1(e).map((e=>e+96));if(r.length){let n=t>=i;r[0]-=32;r=str_from_cps$1(r);if(n)r=`Restricted[${r}]`;let a=s();let o=s();let f=!e();return{N:r,P:a,Q:o,M:f,R:n}}}));WHOLE_VALID$1=r();WHOLE_MAP$1=new Map;let a=t().concat(Array_from$1(WHOLE_VALID$1)).sort(((e,t)=>e-t));a.forEach(((t,r)=>{let n=e();let i=a[r]=n?a[r-n]:{V:[],M:new Map};i.V.push(t);if(!WHOLE_VALID$1.has(t)){WHOLE_MAP$1.set(t,i)}}));for(let{V:e,M:t}of new Set(WHOLE_MAP$1.values())){let r=[];for(let t of e){let e=GROUPS$1.filter((e=>group_has_cp$1(e,t)));let n=r.find((({G:t})=>e.some((e=>t.has(e)))));if(!n){n={G:new Set,V:[]};r.push(n)}n.V.push(t);e.forEach((e=>n.G.add(e)))}let n=r.flatMap((e=>Array_from$1(e.G)));for(let{G:e,V:i}of r){let r=new Set(n.filter((t=>!e.has(t))));for(let e of i){t.set(e,r)}}}let o=new Set;let f=new Set;const c=e=>o.has(e)?f.add(e):o.add(e);for(let e of GROUPS$1){for(let t of e.P)c(t);for(let t of e.Q)c(t)}for(let e of o){if(!WHOLE_MAP$1.has(e)&&!f.has(e)){WHOLE_MAP$1.set(e,UNIQUE_PH$1)}}VALID$1=new Set(Array_from$1(o).concat(Array_from$1(nfd$1(o))));EMOJI_LIST$1=read_trie$1(e).map((e=>Emoji$1.from(e))).sort(compare_arrays$1);EMOJI_ROOT$1=new Map;for(let e of EMOJI_LIST$1){let t=[EMOJI_ROOT$1];for(let r of e){let e=t.map((e=>{let t=e.get(r);if(!t){t=new Map;e.set(r,t)}return t}));if(r===FE0F$1){t.push(...e)}else{t=e}}for(let r of t){r.V=e}}}function quoted_cp$1(e){return(should_escape$1(e)?"":`${bidi_qq$1(safe_str_from_cps$1([e]))} `)+quote_cp$1(e)}function bidi_qq$1(e){return`"${e}"`}function check_label_extension$1(e){if(e.length>=4&&e[2]==HYPHEN$1&&e[3]==HYPHEN$1){throw new Error(`invalid label extension: "${str_from_cps$1(e.slice(0,4))}"`)}}function check_leading_underscore$1(e){const t=95;for(let r=e.lastIndexOf(t);r>0;){if(e[--r]!==t){throw new Error("underscore allowed only at start")}}}function check_fenced$1(e){let t=e[0];let r=FENCED$1.get(t);if(r)throw error_placement$1(`leading ${r}`);let n=e.length;let i=-1;for(let s=1;s<n;s++){t=e[s];let n=FENCED$1.get(t);if(n){if(i==s)throw error_placement$1(`${r} + ${n}`);i=s+1;r=n}}if(i==n)throw error_placement$1(`trailing ${r}`)}function safe_str_from_cps$1(e,t=quote_cp$1){let r=[];if(is_combining_mark$1(e[0]))r.push("");let n=0;let i=e.length;for(let s=0;s<i;s++){let i=e[s];if(should_escape$1(i)){r.push(str_from_cps$1(e.slice(n,s)));r.push(t(i));n=s+1}}r.push(str_from_cps$1(e.slice(n,i)));return r.join("")}function is_combining_mark$1(e){init$3();return CM$1.has(e)}function should_escape$1(e){init$3();return ESCAPE$1.has(e)}function ens_normalize$1(e){return flatten$4(split$2(e,nfc$1,filter_fe0f$1))}function split$2(e,t,r){if(!e)return[];init$3();let n=0;return e.split(STOP_CH$1).map((e=>{let i=explode_cp$1(e);let s={input:i,offset:n};n+=i.length+1;try{let e=s.tokens=tokens_from_str$1(i,t,r);let n=e.length;let a;if(!n){throw new Error(`empty label`)}let o=s.output=e.flat();check_leading_underscore$1(o);let f=s.emoji=n>1||e[0].is_emoji;if(!f&&o.every((e=>e<128))){check_label_extension$1(o);a="ASCII"}else{let t=e.flatMap((e=>e.is_emoji?[]:e));if(!t.length){a="Emoji"}else{if(CM$1.has(o[0]))throw error_placement$1("leading combining mark");for(let t=1;t<n;t++){let r=e[t];if(!r.is_emoji&&CM$1.has(r[0])){throw error_placement$1(`emoji + combining mark: "${str_from_cps$1(e[t-1])} + ${safe_str_from_cps$1([r[0]])}"`)}}check_fenced$1(o);let r=Array_from$1(new Set(t));let[i]=determine_group$1(r);check_group$1(i,t);check_whole$1(i,r);a=i.N}}s.type=a}catch(e){s.error=e}return s}))}function check_whole$1(e,t){let r;let n=[];for(let e of t){let t=WHOLE_MAP$1.get(e);if(t===UNIQUE_PH$1)return;if(t){let n=t.M.get(e);r=r?r.filter((e=>n.has(e))):Array_from$1(n);if(!r.length)return}else{n.push(e)}}if(r){for(let t of r){if(n.every((e=>group_has_cp$1(t,e)))){throw new Error(`whole-script confusable: ${e.N}/${t.N}`)}}}}function determine_group$1(e){let t=GROUPS$1;for(let r of e){let e=t.filter((e=>group_has_cp$1(e,r)));if(!e.length){if(!GROUPS$1.some((e=>group_has_cp$1(e,r)))){throw error_disallowed$1(r)}else{throw error_group_member$1(t[0],r)}}t=e;if(e.length==1)break}return t}function flatten$4(e){return e.map((({input:t,error:r,output:n})=>{if(r){let n=r.message;throw new Error(e.length==1?n:`Invalid label ${bidi_qq$1(safe_str_from_cps$1(t))}: ${n}`)}return str_from_cps$1(n)})).join(STOP_CH$1)}function error_disallowed$1(e){return new Error(`disallowed character: ${quoted_cp$1(e)}`)}function error_group_member$1(e,t){let r=quoted_cp$1(t);let n=GROUPS$1.find((e=>e.P.has(t)));if(n){r=`${n.N} ${r}`}return new Error(`illegal mixture: ${e.N} + ${r}`)}function error_placement$1(e){return new Error(`illegal placement: ${e}`)}function check_group$1(e,t){for(let r of t){if(!group_has_cp$1(e,r)){throw error_group_member$1(e,r)}}if(e.M){let e=nfd$1(t);for(let t=1,r=e.length;t<r;t++){if(NSM$1.has(e[t])){let n=t+1;for(let i;n<r&&NSM$1.has(i=e[n]);n++){for(let r=t;r<n;r++){if(e[r]==i){throw new Error(`duplicate non-spacing marks: ${quoted_cp$1(i)}`)}}}if(n-t>NSM_MAX$1){throw new Error(`excessive non-spacing marks: ${bidi_qq$1(safe_str_from_cps$1(e.slice(t-1,n)))} (${n-t}/${NSM_MAX$1})`)}t=n}}}}function tokens_from_str$1(e,t,r){let n=[];let i=[];e=e.slice().reverse();while(e.length){let s=consume_emoji_reversed$1(e);if(s){if(i.length){n.push(t(i));i=[]}n.push(r(s))}else{let t=e.pop();if(VALID$1.has(t)){i.push(t)}else{let e=MAPPED$1.get(t);if(e){i.push(...e)}else if(!IGNORED$1.has(t)){throw error_disallowed$1(t)}}}}if(i.length){n.push(t(i))}return n}function filter_fe0f$1(e){return e.filter((e=>e!=FE0F$1))}function consume_emoji_reversed$1(e,t){let r=EMOJI_ROOT$1;let n;let i=e.length;while(i){r=r.get(e[--i]);if(!r)break;let{V:s}=r;if(s){n=s;if(t)t.push(...e.slice(i).reverse());e.length=i}}return n}const Zeros$2=new Uint8Array(32);Zeros$2.fill(0);function checkComponent$1(e){assertArgument$1(e.length!==0,"invalid ENS name; empty component","comp",e);return e}function ensNameSplit$1(e){const t=toUtf8Bytes$1(ensNormalize$1(e));const r=[];if(e.length===0){return r}let n=0;for(let e=0;e<t.length;e++){const i=t[e];if(i===46){r.push(checkComponent$1(t.slice(n,e)));n=e+1}}assertArgument$1(n<t.length,"invalid ENS name; empty component","name",e);r.push(checkComponent$1(t.slice(n)));return r}function ensNormalize$1(e){try{if(e.length===0){throw new Error("empty label")}return ens_normalize$1(e)}catch(t){assertArgument$1(false,`invalid ENS name (${t.message})`,"name",e)}}function isValidName$1(e){try{return ensNameSplit$1(e).length!==0}catch(e){}return false}function namehash$1(e){assertArgument$1(typeof e==="string","invalid ENS name; not a string","name",e);assertArgument$1(e.length,`invalid ENS name (empty label)`,"name",e);let t=Zeros$2;const r=ensNameSplit$1(e);while(r.length){t=keccak256$1(concat$c([t,keccak256$1(r.pop())]))}return hexlify$1(t)}function dnsEncode$1(e){return hexlify$1(concat$c(ensNameSplit$1(e).map((e=>{if(e.length>63){throw new Error("invalid DNS encoded entry; length exceeds 63 bytes")}const t=new Uint8Array(e.length+1);t.set(e,1);t[0]=t.length-1;return t}))))+"00"}function accessSetify$1(e,t){return{address:getAddress$1(e),storageKeys:t.map(((e,t)=>{assertArgument$1(isHexString$1(e,32),"invalid slot",`storageKeys[${t}]`,e);return e.toLowerCase()}))}}function accessListify$1(e){if(Array.isArray(e)){return e.map(((t,r)=>{if(Array.isArray(t)){assertArgument$1(t.length===2,"invalid slot set",`value[${r}]`,t);return accessSetify$1(t[0],t[1])}assertArgument$1(t!=null&&typeof t==="object","invalid address-slot set","value",e);return accessSetify$1(t.address,t.storageKeys)}))}assertArgument$1(e!=null&&typeof e==="object","invalid access list","value",e);const t=Object.keys(e).map((t=>{const r=e[t].reduce(((e,t)=>{e[t]=true;return e}),{});return accessSetify$1(t,Object.keys(r).sort())}));t.sort(((e,t)=>e.address.localeCompare(t.address)));return t}function computeAddress$1(e){let t;if(typeof e==="string"){t=SigningKey$1.computePublicKey(e,false)}else{t=e.publicKey}return getAddress$1(keccak256$1("0x"+t.substring(4)).substring(26))}function recoverAddress$1(e,t){return computeAddress$1(SigningKey$1.recoverPublicKey(e,t))}const BN_0$f=BigInt(0);const BN_2$6=BigInt(2);const BN_27$2=BigInt(27);const BN_28$2=BigInt(28);const BN_35$2=BigInt(35);const BN_MAX_UINT$1=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function handleAddress$1(e){if(e==="0x"){return null}return getAddress$1(e)}function handleAccessList$1(e,t){try{return accessListify$1(e)}catch(r){assertArgument$1(false,r.message,t,e)}}function handleNumber$1(e,t){if(e==="0x"){return 0}return getNumber$2(e,t)}function handleUint$1(e,t){if(e==="0x"){return BN_0$f}const r=getBigInt$1(e,t);assertArgument$1(r<=BN_MAX_UINT$1,"value exceeds uint size",t,r);return r}function formatNumber$1(e,t){const r=getBigInt$1(e,"value");const n=toBeArray$1(r);assertArgument$1(n.length<=32,`value too large`,`tx.${t}`,r);return n}function formatAccessList$1(e){return accessListify$1(e).map((e=>[e.address,e.storageKeys]))}function _parseLegacy$1(e){const t=decodeRlp$1(e);assertArgument$1(Array.isArray(t)&&(t.length===9||t.length===6),"invalid field count for legacy transaction","data",e);const r={type:0,nonce:handleNumber$1(t[0],"nonce"),gasPrice:handleUint$1(t[1],"gasPrice"),gasLimit:handleUint$1(t[2],"gasLimit"),to:handleAddress$1(t[3]),value:handleUint$1(t[4],"value"),data:hexlify$1(t[5]),chainId:BN_0$f};if(t.length===6){return r}const n=handleUint$1(t[6],"v");const i=handleUint$1(t[7],"r");const s=handleUint$1(t[8],"s");if(i===BN_0$f&&s===BN_0$f){r.chainId=n}else{let i=(n-BN_35$2)/BN_2$6;if(i<BN_0$f){i=BN_0$f}r.chainId=i;assertArgument$1(i!==BN_0$f||(n===BN_27$2||n===BN_28$2),"non-canonical legacy v","v",t[6]);r.signature=Signature$7.from({r:zeroPadValue$1(t[7],32),s:zeroPadValue$1(t[8],32),v:n});r.hash=keccak256$1(e)}return r}function _serializeLegacy$1(e,t){const r=[formatNumber$1(e.nonce||0,"nonce"),formatNumber$1(e.gasPrice||0,"gasPrice"),formatNumber$1(e.gasLimit||0,"gasLimit"),e.to!=null?getAddress$1(e.to):"0x",formatNumber$1(e.value||0,"value"),e.data||"0x"];let n=BN_0$f;if(e.chainId!=BN_0$f){n=getBigInt$1(e.chainId,"tx.chainId");assertArgument$1(!t||t.networkV==null||t.legacyChainId===n,"tx.chainId/sig.v mismatch","sig",t)}else if(e.signature){const t=e.signature.legacyChainId;if(t!=null){n=t}}if(!t){if(n!==BN_0$f){r.push(toBeArray$1(n));r.push("0x");r.push("0x")}return encodeRlp$1(r)}let i=BigInt(27+t.yParity);if(n!==BN_0$f){i=Signature$7.getChainIdV(n,t.v)}else if(BigInt(t.v)!==i){assertArgument$1(false,"tx.chainId/sig.v mismatch","sig",t)}r.push(toBeArray$1(i));r.push(toBeArray$1(t.r));r.push(toBeArray$1(t.s));return encodeRlp$1(r)}function _parseEipSignature$1(e,t){let r;try{r=handleNumber$1(t[0],"yParity");if(r!==0&&r!==1){throw new Error("bad yParity")}}catch(e){assertArgument$1(false,"invalid yParity","yParity",t[0])}const n=zeroPadValue$1(t[1],32);const i=zeroPadValue$1(t[2],32);const s=Signature$7.from({r:n,s:i,yParity:r});e.signature=s}function _parseEip1559$1(e){const t=decodeRlp$1(getBytes$1(e).slice(1));assertArgument$1(Array.isArray(t)&&(t.length===9||t.length===12),"invalid field count for transaction type: 2","data",hexlify$1(e));const r=handleUint$1(t[2],"maxPriorityFeePerGas");const n=handleUint$1(t[3],"maxFeePerGas");const i={type:2,chainId:handleUint$1(t[0],"chainId"),nonce:handleNumber$1(t[1],"nonce"),maxPriorityFeePerGas:r,maxFeePerGas:n,gasPrice:null,gasLimit:handleUint$1(t[4],"gasLimit"),to:handleAddress$1(t[5]),value:handleUint$1(t[6],"value"),data:hexlify$1(t[7]),accessList:handleAccessList$1(t[8],"accessList")};if(t.length===9){return i}i.hash=keccak256$1(e);_parseEipSignature$1(i,t.slice(9));return i}function _serializeEip1559$1(e,t){const r=[formatNumber$1(e.chainId||0,"chainId"),formatNumber$1(e.nonce||0,"nonce"),formatNumber$1(e.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),formatNumber$1(e.maxFeePerGas||0,"maxFeePerGas"),formatNumber$1(e.gasLimit||0,"gasLimit"),e.to!=null?getAddress$1(e.to):"0x",formatNumber$1(e.value||0,"value"),e.data||"0x",formatAccessList$1(e.accessList||[])];if(t){r.push(formatNumber$1(t.yParity,"yParity"));r.push(toBeArray$1(t.r));r.push(toBeArray$1(t.s))}return concat$c(["0x02",encodeRlp$1(r)])}function _parseEip2930$1(e){const t=decodeRlp$1(getBytes$1(e).slice(1));assertArgument$1(Array.isArray(t)&&(t.length===8||t.length===11),"invalid field count for transaction type: 1","data",hexlify$1(e));const r={type:1,chainId:handleUint$1(t[0],"chainId"),nonce:handleNumber$1(t[1],"nonce"),gasPrice:handleUint$1(t[2],"gasPrice"),gasLimit:handleUint$1(t[3],"gasLimit"),to:handleAddress$1(t[4]),value:handleUint$1(t[5],"value"),data:hexlify$1(t[6]),accessList:handleAccessList$1(t[7],"accessList")};if(t.length===8){return r}r.hash=keccak256$1(e);_parseEipSignature$1(r,t.slice(8));return r}function _serializeEip2930$1(e,t){const r=[formatNumber$1(e.chainId||0,"chainId"),formatNumber$1(e.nonce||0,"nonce"),formatNumber$1(e.gasPrice||0,"gasPrice"),formatNumber$1(e.gasLimit||0,"gasLimit"),e.to!=null?getAddress$1(e.to):"0x",formatNumber$1(e.value||0,"value"),e.data||"0x",formatAccessList$1(e.accessList||[])];if(t){r.push(formatNumber$1(t.yParity,"recoveryParam"));r.push(toBeArray$1(t.r));r.push(toBeArray$1(t.s))}return concat$c(["0x01",encodeRlp$1(r)])}class Transaction$4{#z;#X;#O;#Q;#W;#J;#Z;#ee;#te;#re;#ne;#ie;get type(){return this.#z}set type(e){switch(e){case null:this.#z=null;break;case 0:case"legacy":this.#z=0;break;case 1:case"berlin":case"eip-2930":this.#z=1;break;case 2:case"london":case"eip-1559":this.#z=2;break;default:assertArgument$1(false,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559"}return null}get to(){return this.#X}set to(e){this.#X=e==null?null:getAddress$1(e)}get nonce(){return this.#Q}set nonce(e){this.#Q=getNumber$2(e,"value")}get gasLimit(){return this.#W}set gasLimit(e){this.#W=getBigInt$1(e)}get gasPrice(){const e=this.#J;if(e==null&&(this.type===0||this.type===1)){return BN_0$f}return e}set gasPrice(e){this.#J=e==null?null:getBigInt$1(e,"gasPrice")}get maxPriorityFeePerGas(){const e=this.#Z;if(e==null){if(this.type===2){return BN_0$f}return null}return e}set maxPriorityFeePerGas(e){this.#Z=e==null?null:getBigInt$1(e,"maxPriorityFeePerGas")}get maxFeePerGas(){const e=this.#ee;if(e==null){if(this.type===2){return BN_0$f}return null}return e}set maxFeePerGas(e){this.#ee=e==null?null:getBigInt$1(e,"maxFeePerGas")}get data(){return this.#O}set data(e){this.#O=hexlify$1(e)}get value(){return this.#te}set value(e){this.#te=getBigInt$1(e,"value")}get chainId(){return this.#re}set chainId(e){this.#re=getBigInt$1(e)}get signature(){return this.#ne||null}set signature(e){this.#ne=e==null?null:Signature$7.from(e)}get accessList(){const e=this.#ie||null;if(e==null){if(this.type===1||this.type===2){return[]}return null}return e}set accessList(e){this.#ie=e==null?null:accessListify$1(e)}constructor(){this.#z=null;this.#X=null;this.#Q=0;this.#W=BigInt(0);this.#J=null;this.#Z=null;this.#ee=null;this.#O="0x";this.#te=BigInt(0);this.#re=BigInt(0);this.#ne=null;this.#ie=null}get hash(){if(this.signature==null){return null}return keccak256$1(this.serialized)}get unsignedHash(){return keccak256$1(this.unsignedSerialized)}get from(){if(this.signature==null){return null}return recoverAddress$1(this.unsignedHash,this.signature)}get fromPublicKey(){if(this.signature==null){return null}return SigningKey$1.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return this.signature!=null}get serialized(){assert$q(this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});switch(this.inferType()){case 0:return _serializeLegacy$1(this,this.signature);case 1:return _serializeEip2930$1(this,this.signature);case 2:return _serializeEip1559$1(this,this.signature)}assert$q(false,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})}get unsignedSerialized(){switch(this.inferType()){case 0:return _serializeLegacy$1(this);case 1:return _serializeEip2930$1(this);case 2:return _serializeEip1559$1(this)}assert$q(false,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".unsignedSerialized"})}inferType(){return this.inferTypes().pop()}inferTypes(){const e=this.gasPrice!=null;const t=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null;const r=this.accessList!=null;if(this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null){assert$q(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this})}assert$q(!t||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this});assert$q(this.type!==0||!r,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const n=[];if(this.type!=null){n.push(this.type)}else{if(t){n.push(2)}else if(e){n.push(1);if(!r){n.push(0)}}else if(r){n.push(1);n.push(2)}else{n.push(0);n.push(1);n.push(2)}}n.sort();return n}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}clone(){return Transaction$4.from(this)}toJSON(){const e=e=>{if(e==null){return null}return e.toString()};return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(e){if(e==null){return new Transaction$4}if(typeof e==="string"){const t=getBytes$1(e);if(t[0]>=127){return Transaction$4.from(_parseLegacy$1(t))}switch(t[0]){case 1:return Transaction$4.from(_parseEip2930$1(t));case 2:return Transaction$4.from(_parseEip1559$1(t))}assert$q(false,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const t=new Transaction$4;if(e.type!=null){t.type=e.type}if(e.to!=null){t.to=e.to}if(e.nonce!=null){t.nonce=e.nonce}if(e.gasLimit!=null){t.gasLimit=e.gasLimit}if(e.gasPrice!=null){t.gasPrice=e.gasPrice}if(e.maxPriorityFeePerGas!=null){t.maxPriorityFeePerGas=e.maxPriorityFeePerGas}if(e.maxFeePerGas!=null){t.maxFeePerGas=e.maxFeePerGas}if(e.data!=null){t.data=e.data}if(e.value!=null){t.value=e.value}if(e.chainId!=null){t.chainId=e.chainId}if(e.signature!=null){t.signature=Signature$7.from(e.signature)}if(e.accessList!=null){t.accessList=e.accessList}if(e.hash!=null){assertArgument$1(t.isSigned(),"unsigned transaction cannot define hash","tx",e);assertArgument$1(t.hash===e.hash,"hash mismatch","tx",e)}if(e.from!=null){assertArgument$1(t.isSigned(),"unsigned transaction cannot define from","tx",e);assertArgument$1(t.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)}return t}}function hashMessage$1(e){if(typeof e==="string"){e=toUtf8Bytes$1(e)}return keccak256$1(concat$c([toUtf8Bytes$1(MessagePrefix$1),toUtf8Bytes$1(String(e.length)),e]))}function verifyMessage$1(e,t){const r=hashMessage$1(e);return recoverAddress$1(r,t)}const regexBytes$1=new RegExp("^bytes([0-9]+)$");const regexNumber$1=new RegExp("^(u?int)([0-9]*)$");const regexArray$1=new RegExp("^(.*)\\[([0-9]*)\\]$");function _pack$1(e,t,r){switch(e){case"address":if(r){return getBytes$1(zeroPadValue$1(t,32))}return getBytes$1(getAddress$1(t));case"string":return toUtf8Bytes$1(t);case"bytes":return getBytes$1(t);case"bool":t=!!t?"0x01":"0x00";if(r){return getBytes$1(zeroPadValue$1(t,32))}return getBytes$1(t)}let n=e.match(regexNumber$1);if(n){let i=n[1]==="int";let s=parseInt(n[2]||"256");assertArgument$1((!n[2]||n[2]===String(s))&&s%8===0&&s!==0&&s<=256,"invalid number type","type",e);if(r){s=256}if(i){t=toTwos$1(t,s)}return getBytes$1(zeroPadValue$1(toBeArray$1(t),s/8))}n=e.match(regexBytes$1);if(n){const i=parseInt(n[1]);assertArgument$1(String(i)===n[1]&&i!==0&&i<=32,"invalid bytes type","type",e);assertArgument$1(dataLength$1(t)===i,`invalid value for ${e}`,"value",t);if(r){return getBytes$1(zeroPadBytes$1(t,32))}return t}n=e.match(regexArray$1);if(n&&Array.isArray(t)){const r=n[1];const i=parseInt(n[2]||String(t.length));assertArgument$1(i===t.length,`invalid array length for ${e}`,"value",t);const s=[];t.forEach((function(e){s.push(_pack$1(r,e,true))}));return getBytes$1(concat$c(s))}assertArgument$1(false,"invalid type","type",e)}function solidityPacked$1(e,t){assertArgument$1(e.length===t.length,"wrong number of values; expected ${ types.length }","values",t);const r=[];e.forEach((function(e,n){r.push(_pack$1(e,t[n]))}));return hexlify$1(concat$c(r))}function solidityPackedKeccak256$1(e,t){return keccak256$1(solidityPacked$1(e,t))}function solidityPackedSha256$1(e,t){return sha256$5(solidityPacked$1(e,t))}const padding$1=new Uint8Array(32);padding$1.fill(0);const BN__1$1=BigInt(-1);const BN_0$e=BigInt(0);const BN_1$7=BigInt(1);const BN_MAX_UINT256$2=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function hexPadRight$1(e){const t=getBytes$1(e);const r=t.length%32;if(r){return concat$c([t,padding$1.slice(r)])}return hexlify$1(t)}const hexTrue$1=toBeHex$1(BN_1$7,32);const hexFalse$1=toBeHex$1(BN_0$e,32);const domainFieldTypes$1={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"};const domainFieldNames$1=["name","version","chainId","verifyingContract","salt"];function checkString$1(e){return function(t){assertArgument$1(typeof t==="string",`invalid domain value for ${JSON.stringify(e)}`,`domain.${e}`,t);return t}}const domainChecks$1={name:checkString$1("name"),version:checkString$1("version"),chainId:function(e){const t=getBigInt$1(e,"domain.chainId");assertArgument$1(t>=0,"invalid chain ID","domain.chainId",e);if(Number.isSafeInteger(t)){return Number(t)}return toQuantity$1(t)},verifyingContract:function(e){try{return getAddress$1(e).toLowerCase()}catch(e){}assertArgument$1(false,`invalid domain value "verifyingContract"`,"domain.verifyingContract",e)},salt:function(e){const t=getBytes$1(e,"domain.salt");assertArgument$1(t.length===32,`invalid domain value "salt"`,"domain.salt",e);return hexlify$1(t)}};function getBaseEncoder$1(e){{const t=e.match(/^(u?)int(\d*)$/);if(t){const r=t[1]==="";const n=parseInt(t[2]||"256");assertArgument$1(n%8===0&&n!==0&&n<=256&&(t[2]==null||t[2]===String(n)),"invalid numeric width","type",e);const i=mask$1(BN_MAX_UINT256$2,r?n-1:n);const s=r?(i+BN_1$7)*BN__1$1:BN_0$e;return function(t){const n=getBigInt$1(t,"value");assertArgument$1(n>=s&&n<=i,`value out-of-bounds for ${e}`,"value",n);return toBeHex$1(r?toTwos$1(n,256):n,32)}}}{const t=e.match(/^bytes(\d+)$/);if(t){const r=parseInt(t[1]);assertArgument$1(r!==0&&r<=32&&t[1]===String(r),"invalid bytes width","type",e);return function(t){const n=getBytes$1(t);assertArgument$1(n.length===r,`invalid length for ${e}`,"value",t);return hexPadRight$1(t)}}}switch(e){case"address":return function(e){return zeroPadValue$1(getAddress$1(e),32)};case"bool":return function(e){return!e?hexFalse$1:hexTrue$1};case"bytes":return function(e){return keccak256$1(e)};case"string":return function(e){return id$1(e)}}return null}function encodeType$1(e,t){return`${e}(${t.map((({name:e,type:t})=>t+" "+e)).join(",")})`}class TypedDataEncoder$1{primaryType;#se;get types(){return JSON.parse(this.#se)}#ae;#oe;constructor(e){this.#se=JSON.stringify(e);this.#ae=new Map;this.#oe=new Map;const t=new Map;const r=new Map;const n=new Map;Object.keys(e).forEach((e=>{t.set(e,new Set);r.set(e,[]);n.set(e,new Set)}));for(const n in e){const i=new Set;for(const s of e[n]){assertArgument$1(!i.has(s.name),`duplicate variable name ${JSON.stringify(s.name)} in ${JSON.stringify(n)}`,"types",e);i.add(s.name);const a=s.type.match(/^([^\x5b]*)(\x5b|$)/)[1]||null;assertArgument$1(a!==n,`circular type reference to ${JSON.stringify(a)}`,"types",e);const o=getBaseEncoder$1(a);if(o){continue}assertArgument$1(r.has(a),`unknown type ${JSON.stringify(a)}`,"types",e);r.get(a).push(n);t.get(n).add(a)}}const i=Array.from(r.keys()).filter((e=>r.get(e).length===0));assertArgument$1(i.length!==0,"missing primary type","types",e);assertArgument$1(i.length===1,`ambiguous primary types or unused types: ${i.map((e=>JSON.stringify(e))).join(", ")}`,"types",e);defineProperties$1(this,{primaryType:i[0]});function s(i,a){assertArgument$1(!a.has(i),`circular type reference to ${JSON.stringify(i)}`,"types",e);a.add(i);for(const e of t.get(i)){if(!r.has(e)){continue}s(e,a);for(const t of a){n.get(t).add(e)}}a.delete(i)}s(this.primaryType,new Set);for(const[t,r]of n){const n=Array.from(r);n.sort();this.#ae.set(t,encodeType$1(t,e[t])+n.map((t=>encodeType$1(t,e[t]))).join(""))}}getEncoder(e){let t=this.#oe.get(e);if(!t){t=this.#fe(e);this.#oe.set(e,t)}return t}#fe(e){{const t=getBaseEncoder$1(e);if(t){return t}}const t=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(t){const e=t[1];const r=this.getEncoder(e);return n=>{assertArgument$1(!t[3]||parseInt(t[3])===n.length,`array length mismatch; expected length ${parseInt(t[3])}`,"value",n);let i=n.map(r);if(this.#ae.has(e)){i=i.map(keccak256$1)}return keccak256$1(concat$c(i))}}const r=this.types[e];if(r){const t=id$1(this.#ae.get(e));return e=>{const n=r.map((({name:t,type:r})=>{const n=this.getEncoder(r)(e[t]);if(this.#ae.has(r)){return keccak256$1(n)}return n}));n.unshift(t);return concat$c(n)}}assertArgument$1(false,`unknown type: ${e}`,"type",e)}encodeType(e){const t=this.#ae.get(e);assertArgument$1(t,`unknown type: ${JSON.stringify(e)}`,"name",e);return t}encodeData(e,t){return this.getEncoder(e)(t)}hashStruct(e,t){return keccak256$1(this.encodeData(e,t))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,t,r){{const n=getBaseEncoder$1(e);if(n){return r(e,t)}}const n=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(n){assertArgument$1(!n[3]||parseInt(n[3])===t.length,`array length mismatch; expected length ${parseInt(n[3])}`,"value",t);return t.map((e=>this._visit(n[1],e,r)))}const i=this.types[e];if(i){return i.reduce(((e,{name:n,type:i})=>{e[n]=this._visit(i,t[n],r);return e}),{})}assertArgument$1(false,`unknown type: ${e}`,"type",e)}visit(e,t){return this._visit(this.primaryType,e,t)}static from(e){return new TypedDataEncoder$1(e)}static getPrimaryType(e){return TypedDataEncoder$1.from(e).primaryType}static hashStruct(e,t,r){return TypedDataEncoder$1.from(t).hashStruct(e,r)}static hashDomain(e){const t=[];for(const r in e){if(e[r]==null){continue}const n=domainFieldTypes$1[r];assertArgument$1(n,`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",e);t.push({name:r,type:n})}t.sort(((e,t)=>domainFieldNames$1.indexOf(e.name)-domainFieldNames$1.indexOf(t.name)));return TypedDataEncoder$1.hashStruct("EIP712Domain",{EIP712Domain:t},e)}static encode(e,t,r){return concat$c(["0x1901",TypedDataEncoder$1.hashDomain(e),TypedDataEncoder$1.from(t).hash(r)])}static hash(e,t,r){return keccak256$1(TypedDataEncoder$1.encode(e,t,r))}static async resolveNames(e,t,r,n){e=Object.assign({},e);for(const t in e){if(e[t]==null){delete e[t]}}const i={};if(e.verifyingContract&&!isHexString$1(e.verifyingContract,20)){i[e.verifyingContract]="0x"}const s=TypedDataEncoder$1.from(t);s.visit(r,((e,t)=>{if(e==="address"&&!isHexString$1(t,20)){i[t]="0x"}return t}));for(const e in i){i[e]=await n(e)}if(e.verifyingContract&&i[e.verifyingContract]){e.verifyingContract=i[e.verifyingContract]}r=s.visit(r,((e,t)=>{if(e==="address"&&i[t]){return i[t]}return t}));return{domain:e,value:r}}static getPayload(e,t,r){TypedDataEncoder$1.hashDomain(e);const n={};const i=[];domainFieldNames$1.forEach((t=>{const r=e[t];if(r==null){return}n[t]=domainChecks$1[t](r);i.push({name:t,type:domainFieldTypes$1[t]})}));const s=TypedDataEncoder$1.from(t);const a=Object.assign({},t);assertArgument$1(a.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",t);a.EIP712Domain=i;s.encode(r);return{types:a,domain:n,primaryType:s.primaryType,message:s.visit(r,((e,t)=>{if(e.match(/^bytes(\d*)/)){return hexlify$1(getBytes$1(t))}if(e.match(/^u?int/)){return getBigInt$1(t).toString()}switch(e){case"address":return t.toLowerCase();case"bool":return!!t;case"string":assertArgument$1(typeof t==="string","invalid string","value",t);return t}assertArgument$1(false,"unsupported type","type",e)}))}}}function verifyTypedData$1(e,t,r,n){return recoverAddress$1(TypedDataEncoder$1.hash(e,t,r),n)}function setify$1(e){const t=new Set;e.forEach((e=>t.add(e)));return Object.freeze(t)}const _kwVisibDeploy$1="external public payable";const KwVisibDeploy$1=setify$1(_kwVisibDeploy$1.split(" "));const _kwVisib$1="constant external internal payable private public pure view";const KwVisib$1=setify$1(_kwVisib$1.split(" "));const _kwTypes$1="constructor error event fallback function receive struct";const KwTypes$1=setify$1(_kwTypes$1.split(" "));const _kwModifiers$1="calldata memory storage payable indexed";const KwModifiers$1=setify$1(_kwModifiers$1.split(" "));const _kwOther$1="tuple returns";const _keywords$1=[_kwTypes$1,_kwModifiers$1,_kwOther$1,_kwVisib$1].join(" ");const Keywords$1=setify$1(_keywords$1.split(" "));const SimpleTokens$1={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"};const regexWhitespacePrefix$1=new RegExp("^(\\s*)");const regexNumberPrefix$1=new RegExp("^([0-9]+)");const regexIdPrefix$1=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)");const regexId$1=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$");const regexType$1=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");class TokenString$1{#D;#ce;get offset(){return this.#D}get length(){return this.#ce.length-this.#D}constructor(e){this.#D=0;this.#ce=e.slice()}clone(){return new TokenString$1(this.#ce)}reset(){this.#D=0}#ue(e=0,t=0){return new TokenString$1(this.#ce.slice(e,t).map((t=>Object.freeze(Object.assign({},t,{match:t.match-e,linkBack:t.linkBack-e,linkNext:t.linkNext-e})))))}popKeyword(e){const t=this.peek();if(t.type!=="KEYWORD"||!e.has(t.text)){throw new Error(`expected keyword ${t.text}`)}return this.pop().text}popType(e){if(this.peek().type!==e){throw new Error(`expected ${e}; got ${JSON.stringify(this.peek())}`)}return this.pop().text}popParen(){const e=this.peek();if(e.type!=="OPEN_PAREN"){throw new Error("bad start")}const t=this.#ue(this.#D+1,e.match+1);this.#D=e.match+1;return t}popParams(){const e=this.peek();if(e.type!=="OPEN_PAREN"){throw new Error("bad start")}const t=[];while(this.#D<e.match-1){const e=this.peek().linkNext;t.push(this.#ue(this.#D+1,e));this.#D=e}this.#D=e.match+1;return t}peek(){if(this.#D>=this.#ce.length){throw new Error("out-of-bounds")}return this.#ce[this.#D]}peekKeyword(e){const t=this.peekType("KEYWORD");return t!=null&&e.has(t)?t:null}peekType(e){if(this.length===0){return null}const t=this.peek();return t.type===e?t.text:null}pop(){const e=this.peek();this.#D++;return e}toString(){const e=[];for(let t=this.#D;t<this.#ce.length;t++){const r=this.#ce[t];e.push(`${r.type}:${r.text}`)}return`<TokenString ${e.join(" ")}>`}}function lex$1(e){const t=[];const r=t=>{const r=s<e.length?JSON.stringify(e[s]):"$EOI";throw new Error(`invalid token ${r} at ${s}: ${t}`)};let n=[];let i=[];let s=0;while(s<e.length){let a=e.substring(s);let o=a.match(regexWhitespacePrefix$1);if(o){s+=o[1].length;a=e.substring(s)}const f={depth:n.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:s,value:-1};t.push(f);let c=SimpleTokens$1[a[0]]||"";if(c){f.type=c;f.text=a[0];s++;if(c==="OPEN_PAREN"){n.push(t.length-1);i.push(t.length-1)}else if(c=="CLOSE_PAREN"){if(n.length===0){r("no matching open bracket")}f.match=n.pop();t[f.match].match=t.length-1;f.depth--;f.linkBack=i.pop();t[f.linkBack].linkNext=t.length-1}else if(c==="COMMA"){f.linkBack=i.pop();t[f.linkBack].linkNext=t.length-1;i.push(t.length-1)}else if(c==="OPEN_BRACKET"){f.type="BRACKET"}else if(c==="CLOSE_BRACKET"){let e=t.pop().text;if(t.length>0&&t[t.length-1].type==="NUMBER"){const r=t.pop().text;e=r+e;t[t.length-1].value=getNumber$2(r)}if(t.length===0||t[t.length-1].type!=="BRACKET"){throw new Error("missing opening bracket")}t[t.length-1].text+=e}continue}o=a.match(regexIdPrefix$1);if(o){f.text=o[1];s+=f.text.length;if(Keywords$1.has(f.text)){f.type="KEYWORD";continue}if(f.text.match(regexType$1)){f.type="TYPE";continue}f.type="ID";continue}o=a.match(regexNumberPrefix$1);if(o){f.text=o[1];f.type="NUMBER";s+=f.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(a[0])} at position ${s}`)}return new TokenString$1(t.map((e=>Object.freeze(e))))}function allowSingle$1(e,t){let r=[];for(const n in t.keys()){if(e.has(n)){r.push(n)}}if(r.length>1){throw new Error(`conflicting types: ${r.join(", ")}`)}}function consumeName$1(e,t){if(t.peekKeyword(KwTypes$1)){const r=t.pop().text;if(r!==e){throw new Error(`expected ${e}, got ${r}`)}}return t.popType("ID")}function consumeKeywords$1(e,t){const r=new Set;while(true){const n=e.peekType("KEYWORD");if(n==null||t&&!t.has(n)){break}e.pop();if(r.has(n)){throw new Error(`duplicate keywords: ${JSON.stringify(n)}`)}r.add(n)}return Object.freeze(r)}function consumeMutability$1(e){let t=consumeKeywords$1(e,KwVisib$1);allowSingle$1(t,setify$1("constant payable nonpayable".split(" ")));allowSingle$1(t,setify$1("pure view payable nonpayable".split(" ")));if(t.has("view")){return"view"}if(t.has("pure")){return"pure"}if(t.has("payable")){return"payable"}if(t.has("nonpayable")){return"nonpayable"}if(t.has("constant")){return"view"}return"nonpayable"}function consumeParams$1(e,t){return e.popParams().map((e=>ParamType$1.from(e,t)))}function consumeGas$1(e){if(e.peekType("AT")){e.pop();if(e.peekType("NUMBER")){return getBigInt$1(e.pop().text)}throw new Error("invalid gas")}return null}function consumeEoi$1(e){if(e.length){throw new Error(`unexpected tokens: ${e.toString()}`)}}const regexArrayType$1=new RegExp(/^(.*)\[([0-9]*)\]$/);function verifyBasicType$1(e){const t=e.match(regexType$1);assertArgument$1(t,"invalid type","type",e);if(e==="uint"){return"uint256"}if(e==="int"){return"int256"}if(t[2]){const r=parseInt(t[2]);assertArgument$1(r!==0&&r<=32,"invalid bytes length","type",e)}else if(t[3]){const r=parseInt(t[3]);assertArgument$1(r!==0&&r<=256&&r%8===0,"invalid numeric width","type",e)}return e}const _guard$8={};const internal$3=Symbol.for("_ethers_internal");const ParamTypeInternal$1="_ParamTypeInternal";const ErrorFragmentInternal$1="_ErrorInternal";const EventFragmentInternal$1="_EventInternal";const ConstructorFragmentInternal$1="_ConstructorInternal";const FallbackFragmentInternal$1="_FallbackInternal";const FunctionFragmentInternal$1="_FunctionInternal";const StructFragmentInternal$1="_StructInternal";class ParamType$1{name;type;baseType;indexed;components;arrayLength;arrayChildren;constructor(e,t,r,n,i,s,a,o){assertPrivate$1(e,_guard$8,"ParamType");Object.defineProperty(this,internal$3,{value:ParamTypeInternal$1});if(s){s=Object.freeze(s.slice())}if(n==="array"){if(a==null||o==null){throw new Error("")}}else if(a!=null||o!=null){throw new Error("")}if(n==="tuple"){if(s==null){throw new Error("")}}else if(s!=null){throw new Error("")}defineProperties$1(this,{name:t,type:r,baseType:n,indexed:i,components:s,arrayLength:a,arrayChildren:o})}format(e){if(e==null){e="sighash"}if(e==="json"){const t=this.name||"";if(this.isArray()){const e=JSON.parse(this.arrayChildren.format("json"));e.name=t;e.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`;return JSON.stringify(e)}const r={type:this.baseType==="tuple"?"tuple":this.type,name:t};if(typeof this.indexed==="boolean"){r.indexed=this.indexed}if(this.isTuple()){r.components=this.components.map((t=>JSON.parse(t.format(e))))}return JSON.stringify(r)}let t="";if(this.isArray()){t+=this.arrayChildren.format(e);t+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`}else{if(this.isTuple()){t+="("+this.components.map((t=>t.format(e))).join(e==="full"?", ":",")+")"}else{t+=this.type}}if(e!=="sighash"){if(this.indexed===true){t+=" indexed"}if(e==="full"&&this.name){t+=" "+this.name}}return t}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(e,t){if(this.isArray()){if(!Array.isArray(e)){throw new Error("invalid array value")}if(this.arrayLength!==-1&&e.length!==this.arrayLength){throw new Error("array is wrong length")}const r=this;return e.map((e=>r.arrayChildren.walk(e,t)))}if(this.isTuple()){if(!Array.isArray(e)){throw new Error("invalid tuple value")}if(e.length!==this.components.length){throw new Error("array is wrong length")}const r=this;return e.map(((e,n)=>r.components[n].walk(e,t)))}return t(this.type,e)}#le(e,t,r,n){if(this.isArray()){if(!Array.isArray(t)){throw new Error("invalid array value")}if(this.arrayLength!==-1&&t.length!==this.arrayLength){throw new Error("array is wrong length")}const i=this.arrayChildren;const s=t.slice();s.forEach(((t,n)=>{i.#le(e,t,r,(e=>{s[n]=e}))}));n(s);return}if(this.isTuple()){const i=this.components;let s;if(Array.isArray(t)){s=t.slice()}else{if(t==null||typeof t!=="object"){throw new Error("invalid tuple value")}s=i.map((e=>{if(!e.name){throw new Error("cannot use object value with unnamed components")}if(!(e.name in t)){throw new Error(`missing value for component ${e.name}`)}return t[e.name]}))}if(s.length!==this.components.length){throw new Error("array is wrong length")}s.forEach(((t,n)=>{i[n].#le(e,t,r,(e=>{s[n]=e}))}));n(s);return}const i=r(this.type,t);if(i.then){e.push(async function(){n(await i)}())}else{n(i)}}async walkAsync(e,t){const r=[];const n=[e];this.#le(r,e,t,(e=>{n[0]=e}));if(r.length){await Promise.all(r)}return n[0]}static from(e,t){if(ParamType$1.isParamType(e)){return e}if(typeof e==="string"){try{return ParamType$1.from(lex$1(e),t)}catch(t){assertArgument$1(false,"invalid param type","obj",e)}}else if(e instanceof TokenString$1){let r="",n="";let i=null;if(consumeKeywords$1(e,setify$1(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")){n="tuple";i=e.popParams().map((e=>ParamType$1.from(e)));r=`tuple(${i.map((e=>e.format())).join(",")})`}else{r=verifyBasicType$1(e.popType("TYPE"));n=r}let s=null;let a=null;while(e.length&&e.peekType("BRACKET")){const t=e.pop();s=new ParamType$1(_guard$8,"",r,n,null,i,a,s);a=t.value;r+=t.text;n="array";i=null}let o=null;const f=consumeKeywords$1(e,KwModifiers$1);if(f.has("indexed")){if(!t){throw new Error("")}o=true}const c=e.peekType("ID")?e.pop().text:"";if(e.length){throw new Error("leftover tokens")}return new ParamType$1(_guard$8,c,r,n,o,i,a,s)}const r=e.name;assertArgument$1(!r||typeof r==="string"&&r.match(regexId$1),"invalid name","obj.name",r);let n=e.indexed;if(n!=null){assertArgument$1(t,"parameter cannot be indexed","obj.indexed",e.indexed);n=!!n}let i=e.type;let s=i.match(regexArrayType$1);if(s){const t=parseInt(s[2]||"-1");const a=ParamType$1.from({type:s[1],components:e.components});return new ParamType$1(_guard$8,r||"",i,"array",n,null,t,a)}if(i==="tuple"||i.startsWith("tuple(")||i.startsWith("(")){const t=e.components!=null?e.components.map((e=>ParamType$1.from(e))):null;const s=new ParamType$1(_guard$8,r||"",i,"tuple",n,t,null,null);return s}i=verifyBasicType$1(e.type);return new ParamType$1(_guard$8,r||"",i,i,n,null,null,null)}static isParamType(e){return e&&e[internal$3]===ParamTypeInternal$1}}class Fragment$1{type;inputs;constructor(e,t,r){assertPrivate$1(e,_guard$8,"Fragment");r=Object.freeze(r.slice());defineProperties$1(this,{type:t,inputs:r})}static from(e){if(typeof e==="string"){try{Fragment$1.from(JSON.parse(e))}catch(e){}return Fragment$1.from(lex$1(e))}if(e instanceof TokenString$1){const t=e.peekKeyword(KwTypes$1);switch(t){case"constructor":return ConstructorFragment$1.from(e);case"error":return ErrorFragment$1.from(e);case"event":return EventFragment$1.from(e);case"fallback":case"receive":return FallbackFragment$1.from(e);case"function":return FunctionFragment$1.from(e);case"struct":return StructFragment$1.from(e)}}else if(typeof e==="object"){switch(e.type){case"constructor":return ConstructorFragment$1.from(e);case"error":return ErrorFragment$1.from(e);case"event":return EventFragment$1.from(e);case"fallback":case"receive":return FallbackFragment$1.from(e);case"function":return FunctionFragment$1.from(e);case"struct":return StructFragment$1.from(e)}assert$q(false,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}assertArgument$1(false,"unsupported frgament object","obj",e)}static isConstructor(e){return ConstructorFragment$1.isFragment(e)}static isError(e){return ErrorFragment$1.isFragment(e)}static isEvent(e){return EventFragment$1.isFragment(e)}static isFunction(e){return FunctionFragment$1.isFragment(e)}static isStruct(e){return StructFragment$1.isFragment(e)}}class NamedFragment$1 extends Fragment$1{name;constructor(e,t,r,n){super(e,t,n);assertArgument$1(typeof r==="string"&&r.match(regexId$1),"invalid identifier","name",r);n=Object.freeze(n.slice());defineProperties$1(this,{name:r})}}function joinParams$1(e,t){return"("+t.map((t=>t.format(e))).join(e==="full"?", ":",")+")"}class ErrorFragment$1 extends NamedFragment$1{constructor(e,t,r){super(e,"error",t,r);Object.defineProperty(this,internal$3,{value:ErrorFragmentInternal$1})}get selector(){return id$1(this.format("sighash")).substring(0,10)}format(e){if(e==null){e="sighash"}if(e==="json"){return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map((t=>JSON.parse(t.format(e))))})}const t=[];if(e!=="sighash"){t.push("error")}t.push(this.name+joinParams$1(e,this.inputs));return t.join(" ")}static from(e){if(ErrorFragment$1.isFragment(e)){return e}if(typeof e==="string"){return ErrorFragment$1.from(lex$1(e))}else if(e instanceof TokenString$1){const t=consumeName$1("error",e);const r=consumeParams$1(e);consumeEoi$1(e);return new ErrorFragment$1(_guard$8,t,r)}return new ErrorFragment$1(_guard$8,e.name,e.inputs?e.inputs.map(ParamType$1.from):[])}static isFragment(e){return e&&e[internal$3]===ErrorFragmentInternal$1}}class EventFragment$1 extends NamedFragment$1{anonymous;constructor(e,t,r,n){super(e,"event",t,r);Object.defineProperty(this,internal$3,{value:EventFragmentInternal$1});defineProperties$1(this,{anonymous:n})}get topicHash(){return id$1(this.format("sighash"))}format(e){if(e==null){e="sighash"}if(e==="json"){return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map((t=>JSON.parse(t.format(e))))})}const t=[];if(e!=="sighash"){t.push("event")}t.push(this.name+joinParams$1(e,this.inputs));if(e!=="sighash"&&this.anonymous){t.push("anonymous")}return t.join(" ")}static getTopicHash(e,t){t=(t||[]).map((e=>ParamType$1.from(e)));const r=new EventFragment$1(_guard$8,e,t,false);return r.topicHash}static from(e){if(EventFragment$1.isFragment(e)){return e}if(typeof e==="string"){try{return EventFragment$1.from(lex$1(e))}catch(t){assertArgument$1(false,"invalid event fragment","obj",e)}}else if(e instanceof TokenString$1){const t=consumeName$1("event",e);const r=consumeParams$1(e,true);const n=!!consumeKeywords$1(e,setify$1(["anonymous"])).has("anonymous");consumeEoi$1(e);return new EventFragment$1(_guard$8,t,r,n)}return new EventFragment$1(_guard$8,e.name,e.inputs?e.inputs.map((e=>ParamType$1.from(e,true))):[],!!e.anonymous)}static isFragment(e){return e&&e[internal$3]===EventFragmentInternal$1}}class ConstructorFragment$1 extends Fragment$1{payable;gas;constructor(e,t,r,n,i){super(e,t,r);Object.defineProperty(this,internal$3,{value:ConstructorFragmentInternal$1});defineProperties$1(this,{payable:n,gas:i})}format(e){assert$q(e!=null&&e!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"});if(e==="json"){return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:undefined,inputs:this.inputs.map((t=>JSON.parse(t.format(e))))})}const t=[`constructor${joinParams$1(e,this.inputs)}`];if(this.payable){t.push("payable")}if(this.gas!=null){t.push(`@${this.gas.toString()}`)}return t.join(" ")}static from(e){if(ConstructorFragment$1.isFragment(e)){return e}if(typeof e==="string"){try{return ConstructorFragment$1.from(lex$1(e))}catch(t){assertArgument$1(false,"invalid constuctor fragment","obj",e)}}else if(e instanceof TokenString$1){consumeKeywords$1(e,setify$1(["constructor"]));const t=consumeParams$1(e);const r=!!consumeKeywords$1(e,KwVisibDeploy$1).has("payable");const n=consumeGas$1(e);consumeEoi$1(e);return new ConstructorFragment$1(_guard$8,"constructor",t,r,n)}return new ConstructorFragment$1(_guard$8,"constructor",e.inputs?e.inputs.map(ParamType$1.from):[],!!e.payable,e.gas!=null?e.gas:null)}static isFragment(e){return e&&e[internal$3]===ConstructorFragmentInternal$1}}class FallbackFragment$1 extends Fragment$1{payable;constructor(e,t,r){super(e,"fallback",t);Object.defineProperty(this,internal$3,{value:FallbackFragmentInternal$1});defineProperties$1(this,{payable:r})}format(e){const t=this.inputs.length===0?"receive":"fallback";if(e==="json"){const e=this.payable?"payable":"nonpayable";return JSON.stringify({type:t,stateMutability:e})}return`${t}()${this.payable?" payable":""}`}static from(e){if(FallbackFragment$1.isFragment(e)){return e}if(typeof e==="string"){try{return FallbackFragment$1.from(lex$1(e))}catch(t){assertArgument$1(false,"invalid fallback fragment","obj",e)}}else if(e instanceof TokenString$1){const t=e.toString();const r=e.peekKeyword(setify$1(["fallback","receive"]));assertArgument$1(r,"type must be fallback or receive","obj",t);const n=e.popKeyword(setify$1(["fallback","receive"]));if(n==="receive"){const t=consumeParams$1(e);assertArgument$1(t.length===0,`receive cannot have arguments`,"obj.inputs",t);consumeKeywords$1(e,setify$1(["payable"]));consumeEoi$1(e);return new FallbackFragment$1(_guard$8,[],true)}let i=consumeParams$1(e);if(i.length){assertArgument$1(i.length===1&&i[0].type==="bytes","invalid fallback inputs","obj.inputs",i.map((e=>e.format("minimal"))).join(", "))}else{i=[ParamType$1.from("bytes")]}const s=consumeMutability$1(e);assertArgument$1(s==="nonpayable"||s==="payable","fallback cannot be constants","obj.stateMutability",s);if(consumeKeywords$1(e,setify$1(["returns"])).has("returns")){const t=consumeParams$1(e);assertArgument$1(t.length===1&&t[0].type==="bytes","invalid fallback outputs","obj.outputs",t.map((e=>e.format("minimal"))).join(", "))}consumeEoi$1(e);return new FallbackFragment$1(_guard$8,i,s==="payable")}if(e.type==="receive"){return new FallbackFragment$1(_guard$8,[],true)}if(e.type==="fallback"){const t=[ParamType$1.from("bytes")];const r=e.stateMutability==="payable";return new FallbackFragment$1(_guard$8,t,r)}assertArgument$1(false,"invalid fallback description","obj",e)}static isFragment(e){return e&&e[internal$3]===FallbackFragmentInternal$1}}class FunctionFragment$1 extends NamedFragment$1{constant;outputs;stateMutability;payable;gas;constructor(e,t,r,n,i,s){super(e,"function",t,n);Object.defineProperty(this,internal$3,{value:FunctionFragmentInternal$1});i=Object.freeze(i.slice());const a=r==="view"||r==="pure";const o=r==="payable";defineProperties$1(this,{constant:a,gas:s,outputs:i,payable:o,stateMutability:r})}get selector(){return id$1(this.format("sighash")).substring(0,10)}format(e){if(e==null){e="sighash"}if(e==="json"){return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:undefined,payable:this.payable,gas:this.gas!=null?this.gas:undefined,inputs:this.inputs.map((t=>JSON.parse(t.format(e)))),outputs:this.outputs.map((t=>JSON.parse(t.format(e))))})}const t=[];if(e!=="sighash"){t.push("function")}t.push(this.name+joinParams$1(e,this.inputs));if(e!=="sighash"){if(this.stateMutability!=="nonpayable"){t.push(this.stateMutability)}if(this.outputs&&this.outputs.length){t.push("returns");t.push(joinParams$1(e,this.outputs))}if(this.gas!=null){t.push(`@${this.gas.toString()}`)}}return t.join(" ")}static getSelector(e,t){t=(t||[]).map((e=>ParamType$1.from(e)));const r=new FunctionFragment$1(_guard$8,e,"view",t,[],null);return r.selector}static from(e){if(FunctionFragment$1.isFragment(e)){return e}if(typeof e==="string"){try{return FunctionFragment$1.from(lex$1(e))}catch(t){assertArgument$1(false,"invalid function fragment","obj",e)}}else if(e instanceof TokenString$1){const t=consumeName$1("function",e);const r=consumeParams$1(e);const n=consumeMutability$1(e);let i=[];if(consumeKeywords$1(e,setify$1(["returns"])).has("returns")){i=consumeParams$1(e)}const s=consumeGas$1(e);consumeEoi$1(e);return new FunctionFragment$1(_guard$8,t,n,r,i,s)}let t=e.stateMutability;if(t==null){t="payable";if(typeof e.constant==="boolean"){t="view";if(!e.constant){t="payable";if(typeof e.payable==="boolean"&&!e.payable){t="nonpayable"}}}else if(typeof e.payable==="boolean"&&!e.payable){t="nonpayable"}}return new FunctionFragment$1(_guard$8,e.name,t,e.inputs?e.inputs.map(ParamType$1.from):[],e.outputs?e.outputs.map(ParamType$1.from):[],e.gas!=null?e.gas:null)}static isFragment(e){return e&&e[internal$3]===FunctionFragmentInternal$1}}class StructFragment$1 extends NamedFragment$1{constructor(e,t,r){super(e,"struct",t,r);Object.defineProperty(this,internal$3,{value:StructFragmentInternal$1})}format(){throw new Error("@TODO")}static from(e){if(typeof e==="string"){try{return StructFragment$1.from(lex$1(e))}catch(t){assertArgument$1(false,"invalid struct fragment","obj",e)}}else if(e instanceof TokenString$1){const t=consumeName$1("struct",e);const r=consumeParams$1(e);consumeEoi$1(e);return new StructFragment$1(_guard$8,t,r)}return new StructFragment$1(_guard$8,e.name,e.inputs?e.inputs.map(ParamType$1.from):[])}static isFragment(e){return e&&e[internal$3]===StructFragmentInternal$1}}const PanicReasons$3=new Map;PanicReasons$3.set(0,"GENERIC_PANIC");PanicReasons$3.set(1,"ASSERT_FALSE");PanicReasons$3.set(17,"OVERFLOW");PanicReasons$3.set(18,"DIVIDE_BY_ZERO");PanicReasons$3.set(33,"ENUM_RANGE_ERROR");PanicReasons$3.set(34,"BAD_STORAGE_DATA");PanicReasons$3.set(49,"STACK_UNDERFLOW");PanicReasons$3.set(50,"ARRAY_RANGE_ERROR");PanicReasons$3.set(65,"OUT_OF_MEMORY");PanicReasons$3.set(81,"UNINITIALIZED_FUNCTION_CALL");const paramTypeBytes$1=new RegExp(/^bytes([0-9]*)$/);const paramTypeNumber$1=new RegExp(/^(u?int)([0-9]*)$/);let defaultCoder$1=null;let defaultMaxInflation$1=1024;function getBuiltinCallException$1(e,t,r,n){let i="missing revert data";let s=null;const a=null;let o=null;if(r){i="execution reverted";const e=getBytes$1(r);r=hexlify$1(r);if(e.length===0){i+=" (no data present; likely require(false) occurred";s="require(false)"}else if(e.length%32!==4){i+=" (could not decode reason; invalid data length)"}else if(hexlify$1(e.slice(0,4))==="0x08c379a0"){try{s=n.decode(["string"],e.slice(4))[0];o={signature:"Error(string)",name:"Error",args:[s]};i+=`: ${JSON.stringify(s)}`}catch(e){i+=" (could not decode reason; invalid string data)"}}else if(hexlify$1(e.slice(0,4))==="0x4e487b71"){try{const t=Number(n.decode(["uint256"],e.slice(4))[0]);o={signature:"Panic(uint256)",name:"Panic",args:[t]};s=`Panic due to ${PanicReasons$3.get(t)||"UNKNOWN"}(${t})`;i+=`: ${s}`}catch(e){i+=" (could not decode panic code)"}}else{i+=" (unknown custom error)"}}const f={to:t.to?getAddress$1(t.to):null,data:t.data||"0x"};if(t.from){f.from=getAddress$1(t.from)}return makeError$1(i,"CALL_EXCEPTION",{action:e,data:r,reason:s,transaction:f,invocation:a,revert:o})}class AbiCoder$1{#he(e){if(e.isArray()){return new ArrayCoder$1(this.#he(e.arrayChildren),e.arrayLength,e.name)}if(e.isTuple()){return new TupleCoder$1(e.components.map((e=>this.#he(e))),e.name)}switch(e.baseType){case"address":return new AddressCoder$1(e.name);case"bool":return new BooleanCoder$1(e.name);case"string":return new StringCoder$1(e.name);case"bytes":return new BytesCoder$1(e.name);case"":return new NullCoder$1(e.name)}let t=e.type.match(paramTypeNumber$1);if(t){let r=parseInt(t[2]||"256");assertArgument$1(r!==0&&r<=256&&r%8===0,"invalid "+t[1]+" bit length","param",e);return new NumberCoder$1(r/8,t[1]==="int",e.name)}t=e.type.match(paramTypeBytes$1);if(t){let r=parseInt(t[1]);assertArgument$1(r!==0&&r<=32,"invalid bytes length","param",e);return new FixedBytesCoder$1(r,e.name)}assertArgument$1(false,"invalid type","type",e.type)}getDefaultValue(e){const t=e.map((e=>this.#he(ParamType$1.from(e))));const r=new TupleCoder$1(t,"_");return r.defaultValue()}encode(e,t){assertArgumentCount$1(t.length,e.length,"types/values length mismatch");const r=e.map((e=>this.#he(ParamType$1.from(e))));const n=new TupleCoder$1(r,"_");const i=new Writer$3;n.encode(i,t);return i.data}decode(e,t,r){const n=e.map((e=>this.#he(ParamType$1.from(e))));const i=new TupleCoder$1(n,"_");return i.decode(new Reader$3(t,r,defaultMaxInflation$1))}static _setDefaultMaxInflation(e){assertArgument$1(typeof e==="number"&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e);defaultMaxInflation$1=e}static defaultAbiCoder(){if(defaultCoder$1==null){defaultCoder$1=new AbiCoder$1}return defaultCoder$1}static getBuiltinCallException(e,t,r){return getBuiltinCallException$1(e,t,r,AbiCoder$1.defaultAbiCoder())}}function encodeBytes32String$1(e){const t=toUtf8Bytes$1(e);if(t.length>31){throw new Error("bytes32 string must be less than 32 bytes")}return zeroPadBytes$1(t,32)}function decodeBytes32String$1(e){const t=getBytes$1(e,"bytes");if(t.length!==32){throw new Error("invalid bytes32 - not 32 bytes long")}if(t[31]!==0){throw new Error("invalid bytes32 string - no null terminator")}let r=31;while(t[r-1]===0){r--}return toUtf8String$1(t.slice(0,r))}class LogDescription$1{fragment;name;signature;topic;args;constructor(e,t,r){const n=e.name,i=e.format();defineProperties$1(this,{fragment:e,name:n,signature:i,topic:t,args:r})}}class TransactionDescription$1{fragment;name;args;signature;selector;value;constructor(e,t,r,n){const i=e.name,s=e.format();defineProperties$1(this,{fragment:e,name:i,args:r,signature:s,selector:t,value:n})}}class ErrorDescription$1{fragment;name;args;signature;selector;constructor(e,t,r){const n=e.name,i=e.format();defineProperties$1(this,{fragment:e,name:n,args:r,signature:i,selector:t})}}class Indexed$1{hash;_isIndexed;static isIndexed(e){return!!(e&&e._isIndexed)}constructor(e){defineProperties$1(this,{hash:e,_isIndexed:true})}}const PanicReasons$2={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"};const BuiltinErrors$1={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:e=>`reverted with reason string ${JSON.stringify(e)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:e=>{let t="unknown panic code";if(e>=0&&e<=255&&PanicReasons$2[e.toString()]){t=PanicReasons$2[e.toString()]}return`reverted with panic code 0x${e.toString(16)} (${t})`}}};class Interface$1{fragments;deploy;fallback;receive;#de;#pe;#ye;#me;constructor(e){let t=[];if(typeof e==="string"){t=JSON.parse(e)}else{t=e}this.#ye=new Map;this.#de=new Map;this.#pe=new Map;const r=[];for(const e of t){try{r.push(Fragment$1.from(e))}catch(e){console.log("EE",e)}}defineProperties$1(this,{fragments:Object.freeze(r)});let n=null;let i=false;this.#me=this.getAbiCoder();this.fragments.forEach(((e,t)=>{let r;switch(e.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}defineProperties$1(this,{deploy:e});return;case"fallback":if(e.inputs.length===0){i=true}else{assertArgument$1(!n||e.payable!==n.payable,"conflicting fallback fragments",`fragments[${t}]`,e);n=e;i=n.payable}return;case"function":r=this.#ye;break;case"event":r=this.#pe;break;case"error":r=this.#de;break;default:return}const s=e.format();if(r.has(s)){return}r.set(s,e)}));if(!this.deploy){defineProperties$1(this,{deploy:ConstructorFragment$1.from("constructor()")})}defineProperties$1(this,{fallback:n,receive:i})}format(e){const t=e?"minimal":"full";const r=this.fragments.map((e=>e.format(t)));return r}formatJson(){const e=this.fragments.map((e=>e.format("json")));return JSON.stringify(e.map((e=>JSON.parse(e))))}getAbiCoder(){return AbiCoder$1.defaultAbiCoder()}#ge(e,t,r){if(isHexString$1(e)){const t=e.toLowerCase();for(const e of this.#ye.values()){if(t===e.selector){return e}}return null}if(e.indexOf("(")===-1){const n=[];for(const[t,r]of this.#ye){if(t.split("(")[0]===e){n.push(r)}}if(t){const e=t.length>0?t[t.length-1]:null;let r=t.length;let i=true;if(Typed$1.isTyped(e)&&e.type==="overrides"){i=false;r--}for(let e=n.length-1;e>=0;e--){const t=n[e].inputs.length;if(t!==r&&(!i||t!==r-1)){n.splice(e,1)}}for(let e=n.length-1;e>=0;e--){const r=n[e].inputs;for(let i=0;i<t.length;i++){if(!Typed$1.isTyped(t[i])){continue}if(i>=r.length){if(t[i].type==="overrides"){continue}n.splice(e,1);break}if(t[i].type!==r[i].baseType){n.splice(e,1);break}}}}if(n.length===1&&t&&t.length!==n[0].inputs.length){const e=t[t.length-1];if(e==null||Array.isArray(e)||typeof e!=="object"){n.splice(0,1)}}if(n.length===0){return null}if(n.length>1&&r){const t=n.map((e=>JSON.stringify(e.format()))).join(", ");assertArgument$1(false,`ambiguous function description (i.e. matches ${t})`,"key",e)}return n[0]}const n=this.#ye.get(FunctionFragment$1.from(e).format());if(n){return n}return null}getFunctionName(e){const t=this.#ge(e,null,false);assertArgument$1(t,"no matching function","key",e);return t.name}hasFunction(e){return!!this.#ge(e,null,false)}getFunction(e,t){return this.#ge(e,t||null,true)}forEachFunction(e){const t=Array.from(this.#ye.keys());t.sort(((e,t)=>e.localeCompare(t)));for(let r=0;r<t.length;r++){const n=t[r];e(this.#ye.get(n),r)}}#be(e,t,r){if(isHexString$1(e)){const t=e.toLowerCase();for(const e of this.#pe.values()){if(t===e.topicHash){return e}}return null}if(e.indexOf("(")===-1){const n=[];for(const[t,r]of this.#pe){if(t.split("(")[0]===e){n.push(r)}}if(t){for(let e=n.length-1;e>=0;e--){if(n[e].inputs.length<t.length){n.splice(e,1)}}for(let e=n.length-1;e>=0;e--){const r=n[e].inputs;for(let i=0;i<t.length;i++){if(!Typed$1.isTyped(t[i])){continue}if(t[i].type!==r[i].baseType){n.splice(e,1);break}}}}if(n.length===0){return null}if(n.length>1&&r){const t=n.map((e=>JSON.stringify(e.format()))).join(", ");assertArgument$1(false,`ambiguous event description (i.e. matches ${t})`,"key",e)}return n[0]}const n=this.#pe.get(EventFragment$1.from(e).format());if(n){return n}return null}getEventName(e){const t=this.#be(e,null,false);assertArgument$1(t,"no matching event","key",e);return t.name}hasEvent(e){return!!this.#be(e,null,false)}getEvent(e,t){return this.#be(e,t||null,true)}forEachEvent(e){const t=Array.from(this.#pe.keys());t.sort(((e,t)=>e.localeCompare(t)));for(let r=0;r<t.length;r++){const n=t[r];e(this.#pe.get(n),r)}}getError(e,t){if(isHexString$1(e)){const t=e.toLowerCase();if(BuiltinErrors$1[t]){return ErrorFragment$1.from(BuiltinErrors$1[t].signature)}for(const e of this.#de.values()){if(t===e.selector){return e}}return null}if(e.indexOf("(")===-1){const t=[];for(const[r,n]of this.#de){if(r.split("(")[0]===e){t.push(n)}}if(t.length===0){if(e==="Error"){return ErrorFragment$1.from("error Error(string)")}if(e==="Panic"){return ErrorFragment$1.from("error Panic(uint256)")}return null}else if(t.length>1){const r=t.map((e=>JSON.stringify(e.format()))).join(", ");assertArgument$1(false,`ambiguous error description (i.e. ${r})`,"name",e)}return t[0]}e=ErrorFragment$1.from(e).format();if(e==="Error(string)"){return ErrorFragment$1.from("error Error(string)")}if(e==="Panic(uint256)"){return ErrorFragment$1.from("error Panic(uint256)")}const r=this.#de.get(e);if(r){return r}return null}forEachError(e){const t=Array.from(this.#de.keys());t.sort(((e,t)=>e.localeCompare(t)));for(let r=0;r<t.length;r++){const n=t[r];e(this.#de.get(n),r)}}_decodeParams(e,t){return this.#me.decode(e,t)}_encodeParams(e,t){return this.#me.encode(e,t)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,t){if(typeof e==="string"){const t=this.getError(e);assertArgument$1(t,"unknown error","fragment",e);e=t}assertArgument$1(dataSlice$1(t,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",t);return this._decodeParams(e.inputs,dataSlice$1(t,4))}encodeErrorResult(e,t){if(typeof e==="string"){const t=this.getError(e);assertArgument$1(t,"unknown error","fragment",e);e=t}return concat$c([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionData(e,t){if(typeof e==="string"){const t=this.getFunction(e);assertArgument$1(t,"unknown function","fragment",e);e=t}assertArgument$1(dataSlice$1(t,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",t);return this._decodeParams(e.inputs,dataSlice$1(t,4))}encodeFunctionData(e,t){if(typeof e==="string"){const t=this.getFunction(e);assertArgument$1(t,"unknown function","fragment",e);e=t}return concat$c([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionResult(e,t){if(typeof e==="string"){const t=this.getFunction(e);assertArgument$1(t,"unknown function","fragment",e);e=t}let r="invalid length for result data";const n=getBytesCopy$1(t);if(n.length%32===0){try{return this.#me.decode(e.outputs,n)}catch(e){r="could not decode result data"}}assert$q(false,r,"BAD_DATA",{value:hexlify$1(n),info:{method:e.name,signature:e.format()}})}makeError(e,t){const r=getBytes$1(e,"data");const n=AbiCoder$1.getBuiltinCallException("call",t,r);const i="execution reverted (unknown custom error)";if(n.message.startsWith(i)){const e=hexlify$1(r.slice(0,4));const t=this.getError(e);if(t){try{const e=this.#me.decode(t.inputs,r.slice(4));n.revert={name:t.name,signature:t.format(),args:e};n.reason=n.revert.signature;n.message=`execution reverted: ${n.reason}`}catch(e){n.message=`execution reverted (coult not decode custom error)`}}}const s=this.parseTransaction(t);if(s){n.invocation={method:s.name,signature:s.signature,args:s.args}}return n}encodeFunctionResult(e,t){if(typeof e==="string"){const t=this.getFunction(e);assertArgument$1(t,"unknown function","fragment",e);e=t}return hexlify$1(this.#me.encode(e.outputs,t||[]))}encodeFilterTopics(e,t){if(typeof e==="string"){const t=this.getEvent(e);assertArgument$1(t,"unknown event","eventFragment",e);e=t}assert$q(t.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:t.length,expectedCount:e.inputs.length});const r=[];if(!e.anonymous){r.push(e.topicHash)}const n=(e,t)=>{if(e.type==="string"){return id$1(t)}else if(e.type==="bytes"){return keccak256$1(hexlify$1(t))}if(e.type==="bool"&&typeof t==="boolean"){t=t?"0x01":"0x00"}else if(e.type.match(/^u?int/)){t=toBeHex$1(t)}else if(e.type.match(/^bytes/)){t=zeroPadBytes$1(t,32)}else if(e.type==="address"){this.#me.encode(["address"],[t])}return zeroPadValue$1(hexlify$1(t),32)};t.forEach(((t,i)=>{const s=e.inputs[i];if(!s.indexed){assertArgument$1(t==null,"cannot filter non-indexed parameters; must be null","contract."+s.name,t);return}if(t==null){r.push(null)}else if(s.baseType==="array"||s.baseType==="tuple"){assertArgument$1(false,"filtering with tuples or arrays not supported","contract."+s.name,t)}else if(Array.isArray(t)){r.push(t.map((e=>n(s,e))))}else{r.push(n(s,t))}}));while(r.length&&r[r.length-1]===null){r.pop()}return r}encodeEventLog(e,t){if(typeof e==="string"){const t=this.getEvent(e);assertArgument$1(t,"unknown event","eventFragment",e);e=t}const r=[];const n=[];const i=[];if(!e.anonymous){r.push(e.topicHash)}assertArgument$1(t.length===e.inputs.length,"event arguments/values mismatch","values",t);e.inputs.forEach(((e,s)=>{const a=t[s];if(e.indexed){if(e.type==="string"){r.push(id$1(a))}else if(e.type==="bytes"){r.push(keccak256$1(a))}else if(e.baseType==="tuple"||e.baseType==="array"){throw new Error("not implemented")}else{r.push(this.#me.encode([e.type],[a]))}}else{n.push(e);i.push(a)}}));return{data:this.#me.encode(n,i),topics:r}}decodeEventLog(e,t,r){if(typeof e==="string"){const t=this.getEvent(e);assertArgument$1(t,"unknown event","eventFragment",e);e=t}if(r!=null&&!e.anonymous){const t=e.topicHash;assertArgument$1(isHexString$1(r[0],32)&&r[0].toLowerCase()===t,"fragment/topic mismatch","topics[0]",r[0]);r=r.slice(1)}const n=[];const i=[];const s=[];e.inputs.forEach(((e,t)=>{if(e.indexed){if(e.type==="string"||e.type==="bytes"||e.baseType==="tuple"||e.baseType==="array"){n.push(ParamType$1.from({type:"bytes32",name:e.name}));s.push(true)}else{n.push(e);s.push(false)}}else{i.push(e);s.push(false)}}));const a=r!=null?this.#me.decode(n,concat$c(r)):null;const o=this.#me.decode(i,t,true);const f=[];const c=[];let u=0,l=0;e.inputs.forEach(((e,t)=>{let r=null;if(e.indexed){if(a==null){r=new Indexed$1(null)}else if(s[t]){r=new Indexed$1(a[l++])}else{try{r=a[l++]}catch(e){r=e}}}else{try{r=o[u++]}catch(e){r=e}}f.push(r);c.push(e.name||null)}));return Result$1.fromItems(f,c)}parseTransaction(e){const t=getBytes$1(e.data,"tx.data");const r=getBigInt$1(e.value!=null?e.value:0,"tx.value");const n=this.getFunction(hexlify$1(t.slice(0,4)));if(!n){return null}const i=this.#me.decode(n.inputs,t.slice(4));return new TransactionDescription$1(n,n.selector,i,r)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){const t=this.getEvent(e.topics[0]);if(!t||t.anonymous){return null}return new LogDescription$1(t,t.topicHash,this.decodeEventLog(t,e.data,e.topics))}parseError(e){const t=hexlify$1(e);const r=this.getError(dataSlice$1(t,0,4));if(!r){return null}const n=this.#me.decode(r.inputs,dataSlice$1(t,4));return new ErrorDescription$1(r,r.selector,n)}static from(e){if(e instanceof Interface$1){return e}if(typeof e==="string"){return new Interface$1(JSON.parse(e))}if(typeof e.format==="function"){return new Interface$1(e.format("json"))}return new Interface$1(e)}}const BN_0$d=BigInt(0);function getValue$4(e){if(e==null){return null}return e}function toJson$1(e){if(e==null){return null}return e.toString()}class FeeData$1{gasPrice;maxFeePerGas;maxPriorityFeePerGas;constructor(e,t,r){defineProperties$1(this,{gasPrice:getValue$4(e),maxFeePerGas:getValue$4(t),maxPriorityFeePerGas:getValue$4(r)})}toJSON(){const{gasPrice:e,maxFeePerGas:t,maxPriorityFeePerGas:r}=this;return{_type:"FeeData",gasPrice:toJson$1(e),maxFeePerGas:toJson$1(t),maxPriorityFeePerGas:toJson$1(r)}}}function copyRequest$1(e){const t={};if(e.to){t.to=e.to}if(e.from){t.from=e.from}if(e.data){t.data=hexlify$1(e.data)}const r="chainId,gasLimit,gasPrice,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const n of r){if(!(n in e)||e[n]==null){continue}t[n]=getBigInt$1(e[n],`request.${n}`)}const n="type,nonce".split(/,/);for(const r of n){if(!(r in e)||e[r]==null){continue}t[r]=getNumber$2(e[r],`request.${r}`)}if(e.accessList){t.accessList=accessListify$1(e.accessList)}if("blockTag"in e){t.blockTag=e.blockTag}if("enableCcipRead"in e){t.enableCcipRead=!!e.enableCcipRead}if("customData"in e){t.customData=e.customData}return t}class Block$1{provider;number;hash;timestamp;parentHash;nonce;difficulty;gasLimit;gasUsed;miner;extraData;baseFeePerGas;#Ae;constructor(e,t){this.#Ae=e.transactions.map((e=>{if(typeof e!=="string"){return new TransactionResponse$1(e,t)}return e}));defineProperties$1(this,{provider:t,hash:getValue$4(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,miner:e.miner,extraData:e.extraData,baseFeePerGas:getValue$4(e.baseFeePerGas)})}get transactions(){return this.#Ae.map((e=>{if(typeof e==="string"){return e}return e.hash}))}get prefetchedTransactions(){const e=this.#Ae.slice();if(e.length===0){return[]}assert$q(typeof e[0]==="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"});return e}toJSON(){const{baseFeePerGas:e,difficulty:t,extraData:r,gasLimit:n,gasUsed:i,hash:s,miner:a,nonce:o,number:f,parentHash:c,timestamp:u,transactions:l}=this;return{_type:"Block",baseFeePerGas:toJson$1(e),difficulty:toJson$1(t),extraData:r,gasLimit:toJson$1(n),gasUsed:toJson$1(i),hash:s,miner:a,nonce:o,number:f,parentHash:c,timestamp:u,transactions:l}}[Symbol.iterator](){let e=0;const t=this.transactions;return{next:()=>{if(e<this.length){return{value:t[e++],done:false}}return{value:undefined,done:true}}}}get length(){return this.#Ae.length}get date(){if(this.timestamp==null){return null}return new Date(this.timestamp*1e3)}async getTransaction(e){let t=undefined;if(typeof e==="number"){t=this.#Ae[e]}else{const r=e.toLowerCase();for(const e of this.#Ae){if(typeof e==="string"){if(e!==r){continue}t=e;break}else{if(e.hash===r){continue}t=e;break}}}if(t==null){throw new Error("no such tx")}if(typeof t==="string"){return await this.provider.getTransaction(t)}else{return t}}getPrefetchedTransaction(e){const t=this.prefetchedTransactions;if(typeof e==="number"){return t[e]}e=e.toLowerCase();for(const r of t){if(r.hash===e){return r}}assertArgument$1(false,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined()){throw new Error("")}return createOrphanedBlockFilter$1(this)}}class Log$1{provider;transactionHash;blockHash;blockNumber;removed;address;data;topics;index;transactionIndex;constructor(e,t){this.provider=t;const r=Object.freeze(e.topics.slice());defineProperties$1(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:r,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){const{address:e,blockHash:t,blockNumber:r,data:n,index:i,removed:s,topics:a,transactionHash:o,transactionIndex:f}=this;return{_type:"log",address:e,blockHash:t,blockNumber:r,data:n,index:i,removed:s,topics:a,transactionHash:o,transactionIndex:f}}async getBlock(){const e=await this.provider.getBlock(this.blockHash);assert$q(!!e,"failed to find transaction","UNKNOWN_ERROR",{});return e}async getTransaction(){const e=await this.provider.getTransaction(this.transactionHash);assert$q(!!e,"failed to find transaction","UNKNOWN_ERROR",{});return e}async getTransactionReceipt(){const e=await this.provider.getTransactionReceipt(this.transactionHash);assert$q(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{});return e}removedEvent(){return createRemovedLogFilter$1(this)}}class TransactionReceipt$1{provider;to;from;contractAddress;hash;index;blockHash;blockNumber;logsBloom;gasUsed;cumulativeGasUsed;gasPrice;type;status;root;#we;constructor(e,t){this.#we=Object.freeze(e.logs.map((e=>new Log$1(e,t))));let r=BN_0$d;if(e.effectiveGasPrice!=null){r=e.effectiveGasPrice}else if(e.gasPrice!=null){r=e.gasPrice}defineProperties$1(this,{provider:t,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,gasPrice:r,type:e.type,status:e.status,root:e.root})}get logs(){return this.#we}toJSON(){const{to:e,from:t,contractAddress:r,hash:n,index:i,blockHash:s,blockNumber:a,logsBloom:o,logs:f,status:c,root:u}=this;return{_type:"TransactionReceipt",blockHash:s,blockNumber:a,contractAddress:r,cumulativeGasUsed:toJson$1(this.cumulativeGasUsed),from:t,gasPrice:toJson$1(this.gasPrice),gasUsed:toJson$1(this.gasUsed),hash:n,index:i,logs:f,logsBloom:o,root:u,status:c,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>{if(e<this.length){return{value:this.logs[e++],done:false}}return{value:undefined,done:true}}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const e=await this.provider.getBlock(this.blockHash);if(e==null){throw new Error("TODO")}return e}async getTransaction(){const e=await this.provider.getTransaction(this.hash);if(e==null){throw new Error("TODO")}return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return createRemovedTransactionFilter$1(this)}reorderedEvent(e){assert$q(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"});return createReorderedTransactionFilter$1(this,e)}}class TransactionResponse$1{provider;blockNumber;blockHash;index;hash;type;to;from;nonce;gasLimit;gasPrice;maxPriorityFeePerGas;maxFeePerGas;data;value;chainId;signature;accessList;#Ee;constructor(e,t){this.provider=t;this.blockNumber=e.blockNumber!=null?e.blockNumber:null;this.blockHash=e.blockHash!=null?e.blockHash:null;this.hash=e.hash;this.index=e.index;this.type=e.type;this.from=e.from;this.to=e.to||null;this.gasLimit=e.gasLimit;this.nonce=e.nonce;this.data=e.data;this.value=e.value;this.gasPrice=e.gasPrice;this.maxPriorityFeePerGas=e.maxPriorityFeePerGas!=null?e.maxPriorityFeePerGas:null;this.maxFeePerGas=e.maxFeePerGas!=null?e.maxFeePerGas:null;this.chainId=e.chainId;this.signature=e.signature;this.accessList=e.accessList!=null?e.accessList:null;this.#Ee=-1}toJSON(){const{blockNumber:e,blockHash:t,index:r,hash:n,type:i,to:s,from:a,nonce:o,data:f,signature:c,accessList:u}=this;return{_type:"TransactionReceipt",accessList:u,blockNumber:e,blockHash:t,chainId:toJson$1(this.chainId),data:f,from:a,gasLimit:toJson$1(this.gasLimit),gasPrice:toJson$1(this.gasPrice),hash:n,maxFeePerGas:toJson$1(this.maxFeePerGas),maxPriorityFeePerGas:toJson$1(this.maxPriorityFeePerGas),nonce:o,signature:c,to:s,index:r,type:i,value:toJson$1(this.value)}}async getBlock(){let e=this.blockNumber;if(e==null){const t=await this.getTransaction();if(t){e=t.blockNumber}}if(e==null){return null}const t=this.provider.getBlock(e);if(t==null){throw new Error("TODO")}return t}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:e,blockNumber:t}=await resolveProperties$1({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});if(e==null||e.blockNumber==null){return 0}return t-e.blockNumber+1}const e=await this.provider.getBlockNumber();return e-this.blockNumber+1}async wait(e,t){const r=e==null?1:e;const n=t==null?0:t;let i=this.#Ee;let s=-1;let a=i===-1?true:false;const o=async()=>{if(a){return null}const{blockNumber:e,nonce:t}=await resolveProperties$1({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(t<this.nonce){i=e;return}if(a){return null}const n=await this.getTransaction();if(n&&n.blockNumber!=null){return}if(s===-1){s=i-3;if(s<this.#Ee){s=this.#Ee}}while(s<=e){if(a){return null}const t=await this.provider.getBlock(s,true);if(t==null){return}for(const e of t){if(e===this.hash){return}}for(let n=0;n<t.length;n++){const s=await t.getTransaction(n);if(s.from===this.from&&s.nonce===this.nonce){if(a){return null}const t=await this.provider.getTransactionReceipt(s.hash);if(t==null){return}if(e-t.blockNumber+1<r){return}let n="replaced";if(s.data===this.data&&s.to===this.to&&s.value===this.value){n="repriced"}else if(s.data==="0x"&&s.from===s.to&&s.value===BN_0$d){n="cancelled"}assert$q(false,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:n==="replaced"||n==="cancelled",reason:n,replacement:s.replaceableTransaction(i),hash:s.hash,receipt:t})}}s++}return};const f=e=>{if(e==null||e.status!==0){return e}assert$q(false,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:e.to,from:e.from,data:""},receipt:e})};const c=await this.provider.getTransactionReceipt(this.hash);if(r===0){return f(c)}if(c){if(await c.confirmations()>=r){return f(c)}}else{await o();if(r===0){return null}}const u=new Promise(((e,t)=>{const s=[];const c=()=>{s.forEach((e=>e()))};s.push((()=>{a=true}));if(n>0){const e=setTimeout((()=>{c();t(makeError$1("wait for transaction timeout","TIMEOUT"))}),n);s.push((()=>{clearTimeout(e)}))}const u=async n=>{if(await n.confirmations()>=r){c();try{e(f(n))}catch(e){t(e)}}};s.push((()=>{this.provider.off(this.hash,u)}));this.provider.on(this.hash,u);if(i>=0){const e=async()=>{try{await o()}catch(e){if(isError$1(e,"TRANSACTION_REPLACED")){c();t(e);return}}if(!a){this.provider.once("block",e)}};s.push((()=>{this.provider.off("block",e)}));this.provider.once("block",e)}}));return await u}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}removedEvent(){assert$q(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"});return createRemovedTransactionFilter$1(this)}reorderedEvent(e){assert$q(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"});assert$q(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"});return createReorderedTransactionFilter$1(this,e)}replaceableTransaction(e){assertArgument$1(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);const t=new TransactionResponse$1(this,this.provider);t.#Ee=e;return t}}function createOrphanedBlockFilter$1(e){return{orphan:"drop-block",hash:e.hash,number:e.number}}function createReorderedTransactionFilter$1(e,t){return{orphan:"reorder-transaction",tx:e,other:t}}function createRemovedTransactionFilter$1(e){return{orphan:"drop-transaction",tx:e}}function createRemovedLogFilter$1(e){return{orphan:"drop-log",log:{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,address:e.address,data:e.data,topics:Object.freeze(e.topics.slice()),index:e.index}}}class EventLog$1 extends Log$1{interface;fragment;args;constructor(e,t,r){super(e,e.provider);const n=t.decodeEventLog(r,e.data,e.topics);defineProperties$1(this,{args:n,fragment:r,interface:t})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class UndecodedEventLog$1 extends Log$1{error;constructor(e,t){super(e,e.provider);defineProperties$1(this,{error:t})}}class ContractTransactionReceipt$1 extends TransactionReceipt$1{#ve;constructor(e,t,r){super(r,t);this.#ve=e}get logs(){return super.logs.map((e=>{const t=e.topics.length?this.#ve.getEvent(e.topics[0]):null;if(t){try{return new EventLog$1(e,this.#ve,t)}catch(t){return new UndecodedEventLog$1(e,t)}}return e}))}}class ContractTransactionResponse$1 extends TransactionResponse$1{#ve;constructor(e,t,r){super(r,t);this.#ve=e}async wait(e){const t=await super.wait(e);if(t==null){return null}return new ContractTransactionReceipt$1(this.#ve,this.provider,t)}}class ContractUnknownEventPayload$1 extends EventPayload$1{log;constructor(e,t,r,n){super(e,t,r);defineProperties$1(this,{log:n})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class ContractEventPayload$1 extends ContractUnknownEventPayload$1{constructor(e,t,r,n,i){super(e,t,r,new EventLog$1(i,e.interface,n));const s=e.interface.decodeEventLog(n,this.log.data,this.log.topics);defineProperties$1(this,{args:s,fragment:n})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const BN_0$c=BigInt(0);function canCall$1(e){return e&&typeof e.call==="function"}function canEstimate$1(e){return e&&typeof e.estimateGas==="function"}function canResolve$1(e){return e&&typeof e.resolveName==="function"}function canSend$1(e){return e&&typeof e.sendTransaction==="function"}function getResolver$1(e){if(e!=null){if(canResolve$1(e)){return e}if(e.provider){return e.provider}}return undefined}class PreparedTopicFilter$1{#_e;fragment;constructor(e,t,r){defineProperties$1(this,{fragment:t});if(t.inputs.length<r.length){throw new Error("too many arguments")}const n=getRunner$1(e.runner,"resolveName");const i=canResolve$1(n)?n:null;this.#_e=async function(){const n=await Promise.all(t.inputs.map(((e,t)=>{const n=r[t];if(n==null){return null}return e.walkAsync(r[t],((e,t)=>{if(e==="address"){if(Array.isArray(t)){return Promise.all(t.map((e=>resolveAddress$1(e,i))))}return resolveAddress$1(t,i)}return t}))})));return e.interface.encodeFilterTopics(t,n)}()}getTopicFilter(){return this.#_e}}function getRunner$1(e,t){if(e==null){return null}if(typeof e[t]==="function"){return e}if(e.provider&&typeof e.provider[t]==="function"){return e.provider}return null}function getProvider$1(e){if(e==null){return null}return e.provider||null}async function copyOverrides$1(e,t){const r=Typed$1.dereference(e,"overrides");assertArgument$1(typeof r==="object","invalid overrides parameter","overrides",e);const n=copyRequest$1(r);assertArgument$1(n.to==null||(t||[]).indexOf("to")>=0,"cannot override to","overrides.to",n.to);assertArgument$1(n.data==null||(t||[]).indexOf("data")>=0,"cannot override data","overrides.data",n.data);if(n.from){n.from=n.from}return n}async function resolveArgs$1(e,t,r){const n=getRunner$1(e,"resolveName");const i=canResolve$1(n)?n:null;return await Promise.all(t.map(((e,t)=>e.walkAsync(r[t],((e,t)=>{t=Typed$1.dereference(t,e);if(e==="address"){return resolveAddress$1(t,i)}return t})))))}function buildWrappedFallback$1(e){const t=async function(t){const r=await copyOverrides$1(t,["data"]);r.to=await e.getAddress();if(r.from){r.from=await resolveAddress$1(r.from,getResolver$1(e.runner))}const n=e.interface;const i=getBigInt$1(r.value||BN_0$c,"overrides.value")===BN_0$c;const s=(r.data||"0x")==="0x";if(n.fallback&&!n.fallback.payable&&n.receive&&!s&&!i){assertArgument$1(false,"cannot send data to receive or send value to non-payable fallback","overrides",t)}assertArgument$1(n.fallback||s,"cannot send data to receive-only contract","overrides.data",r.data);const a=n.receive||n.fallback&&n.fallback.payable;assertArgument$1(a||i,"cannot send value to non-payable fallback","overrides.value",r.value);assertArgument$1(n.fallback||s,"cannot send data to receive-only contract","overrides.data",r.data);return r};const r=async function(r){const n=getRunner$1(e.runner,"call");assert$q(canCall$1(n),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const i=await t(r);try{return await n.call(i)}catch(t){if(isCallException$1(t)&&t.data){throw e.interface.makeError(t.data,i)}throw t}};const n=async function(r){const n=e.runner;assert$q(canSend$1(n),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const i=await n.sendTransaction(await t(r));const s=getProvider$1(e.runner);return new ContractTransactionResponse$1(e.interface,s,i)};const i=async function(r){const n=getRunner$1(e.runner,"estimateGas");assert$q(canEstimate$1(n),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"});return await n.estimateGas(await t(r))};const s=async e=>await n(e);defineProperties$1(s,{_contract:e,estimateGas:i,populateTransaction:t,send:n,staticCall:r});return s}function buildWrappedMethod$1(e,t){const r=function(...r){const n=e.interface.getFunction(t,r);assert$q(n,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t,args:r}});return n};const n=async function(...t){const n=r(...t);let i={};if(n.inputs.length+1===t.length){i=await copyOverrides$1(t.pop());if(i.from){i.from=await resolveAddress$1(i.from,getResolver$1(e.runner))}}if(n.inputs.length!==t.length){throw new Error("internal error: fragment inputs doesn't match arguments; should not happen")}const s=await resolveArgs$1(e.runner,n.inputs,t);return Object.assign({},i,await resolveProperties$1({to:e.getAddress(),data:e.interface.encodeFunctionData(n,s)}))};const i=async function(...e){const t=await o(...e);if(t.length===1){return t[0]}return t};const s=async function(...t){const r=e.runner;assert$q(canSend$1(r),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const i=await r.sendTransaction(await n(...t));const s=getProvider$1(e.runner);return new ContractTransactionResponse$1(e.interface,s,i)};const a=async function(...t){const r=getRunner$1(e.runner,"estimateGas");assert$q(canEstimate$1(r),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"});return await r.estimateGas(await n(...t))};const o=async function(...t){const i=getRunner$1(e.runner,"call");assert$q(canCall$1(i),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const s=await n(...t);let a="0x";try{a=await i.call(s)}catch(t){if(isCallException$1(t)&&t.data){throw e.interface.makeError(t.data,s)}throw t}const o=r(...t);return e.interface.decodeFunctionResult(o,a)};const f=async(...e)=>{const t=r(...e);if(t.constant){return await i(...e)}return await s(...e)};defineProperties$1(f,{name:e.interface.getFunctionName(t),_contract:e,_key:t,getFragment:r,estimateGas:a,populateTransaction:n,send:s,staticCall:i,staticCallResult:o});Object.defineProperty(f,"fragment",{configurable:false,enumerable:true,get:()=>{const r=e.interface.getFunction(t);assert$q(r,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t}});return r}});return f}function buildWrappedEvent$1(e,t){const r=function(...r){const n=e.interface.getEvent(t,r);assert$q(n,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t,args:r}});return n};const n=function(...t){return new PreparedTopicFilter$1(e,r(...t),t)};defineProperties$1(n,{name:e.interface.getEventName(t),_contract:e,_key:t,getFragment:r});Object.defineProperty(n,"fragment",{configurable:false,enumerable:true,get:()=>{const r=e.interface.getEvent(t);assert$q(r,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t}});return r}});return n}const internal$2=Symbol.for("_ethersInternal_contract");const internalValues$1=new WeakMap;function setInternal$1(e,t){internalValues$1.set(e[internal$2],t)}function getInternal$1(e){return internalValues$1.get(e[internal$2])}function isDeferred$1(e){return e&&typeof e==="object"&&"getTopicFilter"in e&&typeof e.getTopicFilter==="function"&&e.fragment}async function getSubInfo$1(e,t){let r;let n=null;if(Array.isArray(t)){const n=function(t){if(isHexString$1(t,32)){return t}const r=e.interface.getEvent(t);assertArgument$1(r,"unknown fragment","name",t);return r.topicHash};r=t.map((e=>{if(e==null){return null}if(Array.isArray(e)){return e.map(n)}return n(e)}))}else if(t==="*"){r=[null]}else if(typeof t==="string"){if(isHexString$1(t,32)){r=[t]}else{n=e.interface.getEvent(t);assertArgument$1(n,"unknown fragment","event",t);r=[n.topicHash]}}else if(isDeferred$1(t)){r=await t.getTopicFilter()}else if("fragment"in t){n=t.fragment;r=[n.topicHash]}else{assertArgument$1(false,"unknown event name","event",t)}r=r.map((e=>{if(e==null){return null}if(Array.isArray(e)){const t=Array.from(new Set(e.map((e=>e.toLowerCase()))).values());if(t.length===1){return t[0]}t.sort();return t}return e.toLowerCase()}));const i=r.map((e=>{if(e==null){return"null"}if(Array.isArray(e)){return e.join("|")}return e})).join("&");return{fragment:n,tag:i,topics:r}}async function hasSub$1(e,t){const{subs:r}=getInternal$1(e);return r.get((await getSubInfo$1(e,t)).tag)||null}async function getSub$1(e,t,r){const n=getProvider$1(e.runner);assert$q(n,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:t});const{fragment:i,tag:s,topics:a}=await getSubInfo$1(e,r);const{addr:o,subs:f}=getInternal$1(e);let c=f.get(s);if(!c){const t=o?o:e;const u={address:t,topics:a};const l=t=>{let n=i;if(n==null){try{n=e.interface.getEvent(t.topics[0])}catch(e){}}if(n){const s=n;const a=i?e.interface.decodeEventLog(i,t.data,t.topics):[];emit$1(e,r,a,(n=>new ContractEventPayload$1(e,n,r,s,t)))}else{emit$1(e,r,[],(n=>new ContractUnknownEventPayload$1(e,n,r,t)))}};let h=[];const d=()=>{if(h.length){return}h.push(n.on(u,l))};const p=async()=>{if(h.length==0){return}let e=h;h=[];await Promise.all(e);n.off(u,l)};c={tag:s,listeners:[],start:d,stop:p};f.set(s,c)}return c}let lastEmit$1=Promise.resolve();async function _emit$1(e,t,r,n){await lastEmit$1;const i=await hasSub$1(e,t);if(!i){return false}const s=i.listeners.length;i.listeners=i.listeners.filter((({listener:t,once:i})=>{const s=Array.from(r);if(n){s.push(n(i?null:t))}try{t.call(e,...s)}catch(e){}return!i}));if(i.listeners.length===0){i.stop();getInternal$1(e).subs.delete(i.tag)}return s>0}async function emit$1(e,t,r,n){try{await lastEmit$1}catch(e){}const i=_emit$1(e,t,r,n);lastEmit$1=i;return await i}const passProperties$2=["then"];class BaseContract$1{target;interface;runner;filters;[internal$2];fallback;constructor(e,t,r,n){assertArgument$1(typeof e==="string"||isAddressable$1(e),"invalid value for Contract target","target",e);if(r==null){r=null}const i=Interface$1.from(t);defineProperties$1(this,{target:e,runner:r,interface:i});Object.defineProperty(this,internal$2,{value:{}});let s;let a=null;let o=null;if(n){const e=getProvider$1(r);o=new ContractTransactionResponse$1(this.interface,e,n)}let f=new Map;if(typeof e==="string"){if(isHexString$1(e)){a=e;s=Promise.resolve(e)}else{const t=getRunner$1(r,"resolveName");if(!canResolve$1(t)){throw makeError$1("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"})}s=t.resolveName(e).then((t=>{if(t==null){throw makeError$1("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e})}getInternal$1(this).addr=t;return t}))}}else{s=e.getAddress().then((e=>{if(e==null){throw new Error("TODO")}getInternal$1(this).addr=e;return e}))}setInternal$1(this,{addrPromise:s,addr:a,deployTx:o,subs:f});const c=new Proxy({},{get:(e,t,r)=>{if(typeof t==="symbol"||passProperties$2.indexOf(t)>=0){return Reflect.get(e,t,r)}try{return this.getEvent(t)}catch(e){if(!isError$1(e,"INVALID_ARGUMENT")||e.argument!=="key"){throw e}}return undefined},has:(e,t)=>{if(passProperties$2.indexOf(t)>=0){return Reflect.has(e,t)}return Reflect.has(e,t)||this.interface.hasEvent(String(t))}});defineProperties$1(this,{filters:c});defineProperties$1(this,{fallback:i.receive||i.fallback?buildWrappedFallback$1(this):null});return new Proxy(this,{get:(e,t,r)=>{if(typeof t==="symbol"||t in e||passProperties$2.indexOf(t)>=0){return Reflect.get(e,t,r)}try{return e.getFunction(t)}catch(e){if(!isError$1(e,"INVALID_ARGUMENT")||e.argument!=="key"){throw e}}return undefined},has:(e,t)=>{if(typeof t==="symbol"||t in e||passProperties$2.indexOf(t)>=0){return Reflect.has(e,t)}return e.interface.hasFunction(t)}})}connect(e){return new BaseContract$1(this.target,this.interface,e)}attach(e){return new BaseContract$1(e,this.interface,this.runner)}async getAddress(){return await getInternal$1(this).addrPromise}async getDeployedCode(){const e=getProvider$1(this.runner);assert$q(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const t=await e.getCode(await this.getAddress());if(t==="0x"){return null}return t}async waitForDeployment(){const e=this.deploymentTransaction();if(e){await e.wait();return this}const t=await this.getDeployedCode();if(t!=null){return this}const r=getProvider$1(this.runner);assert$q(r!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"});return new Promise(((e,t)=>{const n=async()=>{try{const t=await this.getDeployedCode();if(t!=null){return e(this)}r.once("block",n)}catch(e){t(e)}};n()}))}deploymentTransaction(){return getInternal$1(this).deployTx}getFunction(e){if(typeof e!=="string"){e=e.format()}const t=buildWrappedMethod$1(this,e);return t}getEvent(e){if(typeof e!=="string"){e=e.format()}return buildWrappedEvent$1(this,e)}async queryTransaction(e){throw new Error("@TODO")}async queryFilter(e,t,r){if(t==null){t=0}if(r==null){r="latest"}const{addr:n,addrPromise:i}=getInternal$1(this);const s=n?n:await i;const{fragment:a,topics:o}=await getSubInfo$1(this,e);const f={address:s,topics:o,fromBlock:t,toBlock:r};const c=getProvider$1(this.runner);assert$q(c,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"});return(await c.getLogs(f)).map((e=>{let t=a;if(t==null){try{t=this.interface.getEvent(e.topics[0])}catch(e){}}if(t){try{return new EventLog$1(e,this.interface,t)}catch(t){return new UndecodedEventLog$1(e,t)}}return new Log$1(e,c)}))}async on(e,t){const r=await getSub$1(this,"on",e);r.listeners.push({listener:t,once:false});r.start();return this}async once(e,t){const r=await getSub$1(this,"once",e);r.listeners.push({listener:t,once:true});r.start();return this}async emit(e,...t){return await emit$1(this,e,t,null)}async listenerCount(e){if(e){const t=await hasSub$1(this,e);if(!t){return 0}return t.listeners.length}const{subs:t}=getInternal$1(this);let r=0;for(const{listeners:e}of t.values()){r+=e.length}return r}async listeners(e){if(e){const t=await hasSub$1(this,e);if(!t){return[]}return t.listeners.map((({listener:e})=>e))}const{subs:t}=getInternal$1(this);let r=[];for(const{listeners:e}of t.values()){r=r.concat(e.map((({listener:e})=>e)))}return r}async off(e,t){const r=await hasSub$1(this,e);if(!r){return this}if(t){const e=r.listeners.map((({listener:e})=>e)).indexOf(t);if(e>=0){r.listeners.splice(e,1)}}if(t==null||r.listeners.length===0){r.stop();getInternal$1(this).subs.delete(r.tag)}return this}async removeAllListeners(e){if(e){const t=await hasSub$1(this,e);if(!t){return this}t.stop();getInternal$1(this).subs.delete(t.tag)}else{const{subs:e}=getInternal$1(this);for(const{tag:t,stop:r}of e.values()){r();e.delete(t)}}return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return await this.off(e,t)}static buildClass(e){class t extends BaseContract$1{constructor(t,r=null){super(t,e,r)}}return t}static from(e,t,r){if(r==null){r=null}const n=new this(e,t,r);return n}}function _ContractBase$1(){return BaseContract$1}class Contract$2 extends(_ContractBase$1()){}class ContractFactory$1{interface;bytecode;runner;constructor(e,t,r){const n=Interface$1.from(e);if(t instanceof Uint8Array){t=hexlify$1(getBytes$1(t))}else{if(typeof t==="object"){t=t.object}if(!t.startsWith("0x")){t="0x"+t}t=hexlify$1(getBytes$1(t))}defineProperties$1(this,{bytecode:t,interface:n,runner:r||null})}attach(e){return new BaseContract$1(e,this.interface,this.runner)}async getDeployTransaction(...e){let t={};const r=this.interface.deploy;if(r.inputs.length+1===e.length){t=await copyOverrides$1(e.pop())}if(r.inputs.length!==e.length){throw new Error("incorrect number of arguments to constructor")}const n=await resolveArgs$1(this.runner,r.inputs,e);const i=concat$c([this.bytecode,this.interface.encodeDeploy(n)]);return Object.assign({},t,{data:i})}async deploy(...e){const t=await this.getDeployTransaction(...e);assert$q(this.runner&&typeof this.runner.sendTransaction==="function","factory runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const r=await this.runner.sendTransaction(t);const n=getCreateAddress$1(r);return new BaseContract$1(n,this.interface,this.runner,r)}connect(e){return new ContractFactory$1(this.interface,this.bytecode,e)}static fromSolidity(e,t){assertArgument$1(e!=null,"bad compiler output","output",e);if(typeof e==="string"){e=JSON.parse(e)}const r=e.abi;let n="";if(e.bytecode){n=e.bytecode}else if(e.evm&&e.evm.bytecode){n=e.evm.bytecode}return new this(r,n,t)}}function getIpfsLink$1(e){if(e.match(/^ipfs:\/\/ipfs\//i)){e=e.substring(12)}else if(e.match(/^ipfs:\/\//i)){e=e.substring(7)}else{assertArgument$1(false,"unsupported IPFS format","link",e)}return`https://gateway.ipfs.io/ipfs/${e}`}class MulticoinProviderPlugin$1{name;constructor(e){defineProperties$1(this,{name:e})}connect(e){return this}supportsCoinType(e){return false}async encodeAddress(e,t){throw new Error("unsupported coin")}async decodeAddress(e,t){throw new Error("unsupported coin")}}const matcherIpfs$1=new RegExp("^(ipfs)://(.*)$","i");const matchers$1=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),matcherIpfs$1,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];class EnsResolver$1{provider;address;name;#Se;#$e;constructor(e,t,r){defineProperties$1(this,{provider:e,address:t,name:r});this.#Se=null;this.#$e=new Contract$2(t,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e)}async supportsWildcard(){if(this.#Se==null){this.#Se=(async()=>{try{return await this.#$e.supportsInterface("0x9061b923")}catch(e){if(isError$1(e,"CALL_EXCEPTION")){return false}this.#Se=null;throw e}})()}return await this.#Se}async#Te(e,t){t=(t||[]).slice();const r=this.#$e.interface;t.unshift(namehash$1(this.name));let n=null;if(await this.supportsWildcard()){n=r.getFunction(e);assert$q(n,"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}});t=[dnsEncode$1(this.name),r.encodeFunctionData(n,t)];e="resolve(bytes,bytes)"}t.push({enableCcipRead:true});try{const i=await this.#$e[e](...t);if(n){return r.decodeFunctionResult(n,i)[0]}return i}catch(e){if(!isError$1(e,"CALL_EXCEPTION")){throw e}}return null}async getAddress(e){if(e==null){e=60}if(e===60){try{const e=await this.#Te("addr(bytes32)");if(e==null||e===ZeroAddress$1){return null}return e}catch(e){if(isError$1(e,"CALL_EXCEPTION")){return null}throw e}}if(e>=0&&e<2147483648){let t=e+2147483648;const r=await this.#Te("addr(bytes32,uint)",[t]);if(isHexString$1(r,20)){return getAddress$1(r)}}let t=null;for(const r of this.provider.plugins){if(!(r instanceof MulticoinProviderPlugin$1)){continue}if(r.supportsCoinType(e)){t=r;break}}if(t==null){return null}const r=await this.#Te("addr(bytes32,uint)",[e]);if(r==null||r==="0x"){return null}const n=await t.decodeAddress(e,r);if(n!=null){return n}assert$q(false,`invalid coin data`,"UNSUPPORTED_OPERATION",{operation:`getAddress(${e})`,info:{coinType:e,data:r}})}async getText(e){const t=await this.#Te("text(bytes32,string)",[e]);if(t==null||t==="0x"){return null}return t}async getContentHash(){const e=await this.#Te("contenthash(bytes32)");if(e==null||e==="0x"){return null}const t=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(t){const e=t[1]==="e3010170"?"ipfs":"ipns";const r=parseInt(t[4],16);if(t[5].length===r*2){return`${e}://${encodeBase58$1("0x"+t[2])}`}}const r=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(r&&r[1].length===64){return`bzz://${r[1]}`}assert$q(false,`invalid or unsupported content hash data`,"UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})}async getAvatar(){const e=await this._getAvatar();return e.url}async _getAvatar(){const e=[{type:"name",value:this.name}];try{const t=await this.getText("avatar");if(t==null){e.push({type:"!avatar",value:""});return{url:null,linkage:e}}e.push({type:"avatar",value:t});for(let r=0;r<matchers$1.length;r++){const n=t.match(matchers$1[r]);if(n==null){continue}const i=n[1].toLowerCase();switch(i){case"https":case"data":e.push({type:"url",value:t});return{linkage:e,url:t};case"ipfs":{const r=getIpfsLink$1(t);e.push({type:"ipfs",value:t});e.push({type:"url",value:r});return{linkage:e,url:r}}case"erc721":case"erc1155":{const r=i==="erc721"?"tokenURI(uint256)":"uri(uint256)";e.push({type:i,value:t});const s=await this.getAddress();if(s==null){e.push({type:"!owner",value:""});return{url:null,linkage:e}}const a=(n[2]||"").split("/");if(a.length!==2){e.push({type:`!${i}caip`,value:n[2]||""});return{url:null,linkage:e}}const o=a[1];const f=new Contract$2(a[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(i==="erc721"){const t=await f.ownerOf(o);if(s!==t){e.push({type:"!owner",value:t});return{url:null,linkage:e}}e.push({type:"owner",value:t})}else if(i==="erc1155"){const t=await f.balanceOf(s,o);if(!t){e.push({type:"!balance",value:"0"});return{url:null,linkage:e}}e.push({type:"balance",value:t.toString()})}let c=await f[r](o);if(c==null||c==="0x"){e.push({type:"!metadata-url",value:""});return{url:null,linkage:e}}e.push({type:"metadata-url-base",value:c});if(i==="erc1155"){c=c.replace("{id}",toBeHex$1(o,32).substring(2));e.push({type:"metadata-url-expanded",value:c})}if(c.match(/^ipfs:/i)){c=getIpfsLink$1(c)}e.push({type:"metadata-url",value:c});let u={};const l=await new FetchRequest$1(c).send();l.assertOk();try{u=l.bodyJson}catch(t){try{e.push({type:"!metadata",value:l.bodyText})}catch(t){const r=l.body;if(r){e.push({type:"!metadata",value:hexlify$1(r)})}return{url:null,linkage:e}}return{url:null,linkage:e}}if(!u){e.push({type:"!metadata",value:""});return{url:null,linkage:e}}e.push({type:"metadata",value:JSON.stringify(u)});let h=u.image;if(typeof h!=="string"){e.push({type:"!imageUrl",value:""});return{url:null,linkage:e}}if(h.match(/^(https:\/\/|data:)/i));else{const t=h.match(matcherIpfs$1);if(t==null){e.push({type:"!imageUrl-ipfs",value:h});return{url:null,linkage:e}}e.push({type:"imageUrl-ipfs",value:h});h=getIpfsLink$1(h)}e.push({type:"url",value:h});return{linkage:e,url:h}}}}}catch(e){}return{linkage:e,url:null}}static async getEnsAddress(e){const t=await e.getNetwork();const r=t.getPlugin("org.ethers.plugins.network.Ens");assert$q(r,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:t}});return r.address}static async#Ie(e,t){const r=await EnsResolver$1.getEnsAddress(e);try{const n=new Contract$2(r,["function resolver(bytes32) view returns (address)"],e);const i=await n.resolver(namehash$1(t),{enableCcipRead:true});if(i===ZeroAddress$1){return null}return i}catch(e){throw e}return null}static async fromName(e,t){let r=t;while(true){if(r===""||r==="."){return null}if(t!=="eth"&&r==="eth"){return null}const n=await EnsResolver$1.#Ie(e,r);if(n!=null){const i=new EnsResolver$1(e,n,t);if(r!==t&&!await i.supportsWildcard()){return null}return i}r=r.split(".").slice(1).join(".")}}}const BN_0$b=BigInt(0);function allowNull$1(e,t){return function(r){if(r==null){return t}return e(r)}}function arrayOf$1(e){return t=>{if(!Array.isArray(t)){throw new Error("not an array")}return t.map((t=>e(t)))}}function object$1(e,t){return r=>{const n={};for(const i in e){let s=i;if(t&&i in t&&!(s in r)){for(const e of t[i]){if(e in r){s=e;break}}}try{const t=e[i](r[s]);if(t!==undefined){n[i]=t}}catch(e){const t=e instanceof Error?e.message:"not-an-error";assert$q(false,`invalid value for value.${i} (${t})`,"BAD_DATA",{value:r})}}return n}}function formatBoolean$1(e){switch(e){case true:case"true":return true;case false:case"false":return false}assertArgument$1(false,`invalid boolean; ${JSON.stringify(e)}`,"value",e)}function formatData$1(e){assertArgument$1(isHexString$1(e,true),"invalid data","value",e);return e}function formatHash$1(e){assertArgument$1(isHexString$1(e,32),"invalid hash","value",e);return e}const _formatLog$1=object$1({address:getAddress$1,blockHash:formatHash$1,blockNumber:getNumber$2,data:formatData$1,index:getNumber$2,removed:allowNull$1(formatBoolean$1,false),topics:arrayOf$1(formatHash$1),transactionHash:formatHash$1,transactionIndex:getNumber$2},{index:["logIndex"]});function formatLog$1(e){return _formatLog$1(e)}const _formatBlock$1=object$1({hash:allowNull$1(formatHash$1),parentHash:formatHash$1,number:getNumber$2,timestamp:getNumber$2,nonce:allowNull$1(formatData$1),difficulty:getBigInt$1,gasLimit:getBigInt$1,gasUsed:getBigInt$1,miner:allowNull$1(getAddress$1),extraData:formatData$1,baseFeePerGas:allowNull$1(getBigInt$1)});function formatBlock$1(e){const t=_formatBlock$1(e);t.transactions=e.transactions.map((e=>{if(typeof e==="string"){return e}return formatTransactionResponse$1(e)}));return t}const _formatReceiptLog$1=object$1({transactionIndex:getNumber$2,blockNumber:getNumber$2,transactionHash:formatHash$1,address:getAddress$1,topics:arrayOf$1(formatHash$1),data:formatData$1,index:getNumber$2,blockHash:formatHash$1},{index:["logIndex"]});function formatReceiptLog$1(e){return _formatReceiptLog$1(e)}const _formatTransactionReceipt$1=object$1({to:allowNull$1(getAddress$1,null),from:allowNull$1(getAddress$1,null),contractAddress:allowNull$1(getAddress$1,null),index:getNumber$2,root:allowNull$1(hexlify$1),gasUsed:getBigInt$1,logsBloom:allowNull$1(formatData$1),blockHash:formatHash$1,hash:formatHash$1,logs:arrayOf$1(formatReceiptLog$1),blockNumber:getNumber$2,cumulativeGasUsed:getBigInt$1,effectiveGasPrice:allowNull$1(getBigInt$1),status:allowNull$1(getNumber$2),type:allowNull$1(getNumber$2,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function formatTransactionReceipt$1(e){return _formatTransactionReceipt$1(e)}function formatTransactionResponse$1(e){if(e.to&&getBigInt$1(e.to)===BN_0$b){e.to="0x0000000000000000000000000000000000000000"}const t=object$1({hash:formatHash$1,type:e=>{if(e==="0x"||e==null){return 0}return getNumber$2(e)},accessList:allowNull$1(accessListify$1,null),blockHash:allowNull$1(formatHash$1,null),blockNumber:allowNull$1(getNumber$2,null),transactionIndex:allowNull$1(getNumber$2,null),from:getAddress$1,gasPrice:allowNull$1(getBigInt$1),maxPriorityFeePerGas:allowNull$1(getBigInt$1),maxFeePerGas:allowNull$1(getBigInt$1),gasLimit:getBigInt$1,to:allowNull$1(getAddress$1,null),value:getBigInt$1,nonce:getNumber$2,data:formatData$1,creates:allowNull$1(getAddress$1,null),chainId:allowNull$1(getBigInt$1,null)},{data:["input"],gasLimit:["gas"]})(e);if(t.to==null&&t.creates==null){t.creates=getCreateAddress$1(t)}if((e.type===1||e.type===2)&&e.accessList==null){t.accessList=[]}if(e.signature){t.signature=Signature$7.from(e.signature)}else{t.signature=Signature$7.from(e)}if(t.chainId==null){const e=t.signature.legacyChainId;if(e!=null){t.chainId=e}}if(t.blockHash&&getBigInt$1(t.blockHash)===BN_0$b){t.blockHash=null}return t}const EnsAddress$1="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class NetworkPlugin$1{name;constructor(e){defineProperties$1(this,{name:e})}clone(){return new NetworkPlugin$1(this.name)}}class GasCostPlugin$1 extends NetworkPlugin$1{effectiveBlock;txBase;txCreate;txDataZero;txDataNonzero;txAccessListStorageKey;txAccessListAddress;constructor(e,t){if(e==null){e=0}super(`org.ethers.network.plugins.GasCost#${e||0}`);const r={effectiveBlock:e};function n(e,n){let i=(t||{})[e];if(i==null){i=n}assertArgument$1(typeof i==="number",`invalud value for ${e}`,"costs",t);r[e]=i}n("txBase",21e3);n("txCreate",32e3);n("txDataZero",4);n("txDataNonzero",16);n("txAccessListStorageKey",1900);n("txAccessListAddress",2400);defineProperties$1(this,r)}clone(){return new GasCostPlugin$1(this.effectiveBlock,this)}}class EnsPlugin$1 extends NetworkPlugin$1{address;targetNetwork;constructor(e,t){super("org.ethers.plugins.network.Ens");defineProperties$1(this,{address:e||EnsAddress$1,targetNetwork:t==null?1:t})}clone(){return new EnsPlugin$1(this.address,this.targetNetwork)}}class FeeDataNetworkPlugin$1 extends NetworkPlugin$1{#Ce;get feeDataFunc(){return this.#Ce}constructor(e){super("org.ethers.plugins.network.FeeData");this.#Ce=e}async getFeeData(e){return await this.#Ce(e)}clone(){return new FeeDataNetworkPlugin$1(this.#Ce)}}class FetchUrlFeeDataNetworkPlugin$1 extends NetworkPlugin$1{#f;#Pe;get url(){return this.#f}get processFunc(){return this.#Pe}constructor(e,t){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin");this.#f=e;this.#Pe=t}clone(){return this}}const Networks$1=new Map;class Network$1{#Re;#re;#Ne;constructor(e,t){this.#Re=e;this.#re=getBigInt$1(t);this.#Ne=new Map}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return this.#Re}set name(e){this.#Re=e}get chainId(){return this.#re}set chainId(e){this.#re=getBigInt$1(e,"chainId")}matches(e){if(e==null){return false}if(typeof e==="string"){try{return this.chainId===getBigInt$1(e)}catch(e){}return this.name===e}if(typeof e==="number"||typeof e==="bigint"){try{return this.chainId===getBigInt$1(e)}catch(e){}return false}if(typeof e==="object"){if(e.chainId!=null){try{return this.chainId===getBigInt$1(e.chainId)}catch(e){}return false}if(e.name!=null){return this.name===e.name}return false}return false}get plugins(){return Array.from(this.#Ne.values())}attachPlugin(e){if(this.#Ne.get(e.name)){throw new Error(`cannot replace existing plugin: ${e.name} `)}this.#Ne.set(e.name,e.clone());return this}getPlugin(e){return this.#Ne.get(e)||null}getPlugins(e){return this.plugins.filter((t=>t.name.split("#")[0]===e))}clone(){const e=new Network$1(this.name,this.chainId);this.plugins.forEach((t=>{e.attachPlugin(t.clone())}));return e}computeIntrinsicGas(e){const t=this.getPlugin("org.ethers.plugins.network.GasCost")||new GasCostPlugin$1;let r=t.txBase;if(e.to==null){r+=t.txCreate}if(e.data){for(let n=2;n<e.data.length;n+=2){if(e.data.substring(n,n+2)==="00"){r+=t.txDataZero}else{r+=t.txDataNonzero}}}if(e.accessList){const n=accessListify$1(e.accessList);for(const e in n){r+=t.txAccessListAddress+t.txAccessListStorageKey*n[e].storageKeys.length}}return r}static from(e){injectCommonNetworks$1();if(e==null){return Network$1.from("mainnet")}if(typeof e==="number"){e=BigInt(e)}if(typeof e==="string"||typeof e==="bigint"){const t=Networks$1.get(e);if(t){return t()}if(typeof e==="bigint"){return new Network$1("unknown",e)}assertArgument$1(false,"unknown network","network",e)}if(typeof e.clone==="function"){const t=e.clone();return t}if(typeof e==="object"){assertArgument$1(typeof e.name==="string"&&typeof e.chainId==="number","invalid network object name or chainId","network",e);const t=new Network$1(e.name,e.chainId);if(e.ensAddress||e.ensNetwork!=null){t.attachPlugin(new EnsPlugin$1(e.ensAddress,e.ensNetwork))}return t}assertArgument$1(false,"invalid network","network",e)}static register(e,t){if(typeof e==="number"){e=BigInt(e)}const r=Networks$1.get(e);if(r){assertArgument$1(false,`conflicting network for ${JSON.stringify(r.name)}`,"nameOrChainId",e)}Networks$1.set(e,t)}}function parseUnits$2(e,t){const r=String(e);if(!r.match(/^[0-9.]+$/)){throw new Error(`invalid gwei value: ${e}`)}const n=r.split(".");if(n.length===1){n.push("")}if(n.length!==2){throw new Error(`invalid gwei value: ${e}`)}while(n[1].length<t){n[1]+="0"}if(n[1].length>9){let e=BigInt(n[1].substring(0,9));if(!n[1].substring(9).match(/^0+$/)){e++}n[1]=e.toString()}return BigInt(n[0]+n[1])}function getGasStationPlugin$1(e){return new FetchUrlFeeDataNetworkPlugin$1(e,(async(e,t,r)=>{r.setHeader("User-Agent","ethers");let n;try{const[t,i]=await Promise.all([r.send(),e()]);n=t;const s=n.bodyJson.standard;const a={gasPrice:i.gasPrice,maxFeePerGas:parseUnits$2(s.maxFee,9),maxPriorityFeePerGas:parseUnits$2(s.maxPriorityFee,9)};return a}catch(e){assert$q(false,`error encountered with polygon gas station (${JSON.stringify(r.url)})`,"SERVER_ERROR",{request:r,response:n,error:e})}}))}let injected$1=false;function injectCommonNetworks$1(){if(injected$1){return}injected$1=true;function e(e,t,r){const n=function(){const n=new Network$1(e,t);if(r.ensNetwork!=null){n.attachPlugin(new EnsPlugin$1(null,r.ensNetwork))}n.attachPlugin(new GasCostPlugin$1);(r.plugins||[]).forEach((e=>{n.attachPlugin(e)}));return n};Network$1.register(e,n);Network$1.register(t,n);if(r.altNames){r.altNames.forEach((e=>{Network$1.register(e,n)}))}}e("mainnet",1,{ensNetwork:1,altNames:["homestead"]});e("ropsten",3,{ensNetwork:3});e("rinkeby",4,{ensNetwork:4});e("goerli",5,{ensNetwork:5});e("kovan",42,{ensNetwork:42});e("sepolia",11155111,{ensNetwork:11155111});e("classic",61,{});e("classicKotti",6,{});e("arbitrum",42161,{ensNetwork:1});e("arbitrum-goerli",421613,{});e("base",8453,{ensNetwork:1});e("base-goerli",84531,{});e("base-sepolia",84532,{});e("bnb",56,{ensNetwork:1});e("bnbt",97,{});e("linea",59144,{ensNetwork:1});e("linea-goerli",59140,{});e("matic",137,{ensNetwork:1,plugins:[getGasStationPlugin$1("https://gasstation.polygon.technology/v2")]});e("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[getGasStationPlugin$1("https://gasstation-testnet.polygon.technology/v2")]});e("optimism",10,{ensNetwork:1,plugins:[]});e("optimism-goerli",420,{});e("xdai",100,{ensNetwork:1})}function copy$5(e){return JSON.parse(JSON.stringify(e))}class PollingBlockSubscriber$1{#ke;#Oe;#xe;#Be;constructor(e){this.#ke=e;this.#Oe=null;this.#xe=4e3;this.#Be=-2}get pollingInterval(){return this.#xe}set pollingInterval(e){this.#xe=e}async#De(){try{const e=await this.#ke.getBlockNumber();if(this.#Be===-2){this.#Be=e;return}if(e!==this.#Be){for(let t=this.#Be+1;t<=e;t++){if(this.#Oe==null){return}await this.#ke.emit("block",t)}this.#Be=e}}catch(e){}if(this.#Oe==null){return}this.#Oe=this.#ke._setTimeout(this.#De.bind(this),this.#xe)}start(){if(this.#Oe){return}this.#Oe=this.#ke._setTimeout(this.#De.bind(this),this.#xe);this.#De()}stop(){if(!this.#Oe){return}this.#ke._clearTimeout(this.#Oe);this.#Oe=null}pause(e){this.stop();if(e){this.#Be=-2}}resume(){this.start()}}class OnBlockSubscriber$1{#ke;#De;#Me;constructor(e){this.#ke=e;this.#Me=false;this.#De=e=>{this._poll(e,this.#ke)}}async _poll(e,t){throw new Error("sub-classes must override this")}start(){if(this.#Me){return}this.#Me=true;this.#De(-2);this.#ke.on("block",this.#De)}stop(){if(!this.#Me){return}this.#Me=false;this.#ke.off("block",this.#De)}pause(e){this.stop()}resume(){this.start()}}class PollingBlockTagSubscriber$1 extends OnBlockSubscriber$1{#Ue;#Le;constructor(e,t){super(e);this.#Ue=t;this.#Le=-2}pause(e){if(e){this.#Le=-2}super.pause(e)}async _poll(e,t){const r=await t.getBlock(this.#Ue);if(r==null){return}if(this.#Le===-2){this.#Le=r.number}else if(r.number>this.#Le){t.emit(this.#Ue,r.number);this.#Le=r.number}}}class PollingOrphanSubscriber$1 extends OnBlockSubscriber$1{#_e;constructor(e,t){super(e);this.#_e=copy$5(t)}async _poll(e,t){throw new Error("@TODO")}}class PollingTransactionSubscriber$1 extends OnBlockSubscriber$1{#Fe;constructor(e,t){super(e);this.#Fe=t}async _poll(e,t){const r=await t.getTransactionReceipt(this.#Fe);if(r){t.emit(this.#Fe,r)}}}class PollingEventSubscriber$1{#ke;#_e;#Oe;#Me;#Be;constructor(e,t){this.#ke=e;this.#_e=copy$5(t);this.#Oe=this.#De.bind(this);this.#Me=false;this.#Be=-2}async#De(e){if(this.#Be===-2){return}const t=copy$5(this.#_e);t.fromBlock=this.#Be+1;t.toBlock=e;const r=await this.#ke.getLogs(t);if(r.length===0){if(this.#Be<e-60){this.#Be=e-60}return}for(const e of r){this.#ke.emit(this.#_e,e);this.#Be=e.blockNumber}}start(){if(this.#Me){return}this.#Me=true;if(this.#Be===-2){this.#ke.getBlockNumber().then((e=>{this.#Be=e}))}this.#ke.on("block",this.#Oe)}stop(){if(!this.#Me){return}this.#Me=false;this.#ke.off("block",this.#Oe)}pause(e){this.stop();if(e){this.#Be=-2}}resume(){this.start()}}const BN_2$5=BigInt(2);const MAX_CCIP_REDIRECTS$1=10;function isPromise$3(e){return e&&typeof e.then==="function"}function getTag$6(e,t){return e+":"+JSON.stringify(t,((e,t)=>{if(t==null){return"null"}if(typeof t==="bigint"){return`bigint:${t.toString()}`}if(typeof t==="string"){return t.toLowerCase()}if(typeof t==="object"&&!Array.isArray(t)){const e=Object.keys(t);e.sort();return e.reduce(((e,r)=>{e[r]=t[r];return e}),{})}return t}))}class UnmanagedSubscriber$1{name;constructor(e){defineProperties$1(this,{name:e})}start(){}stop(){}pause(e){}resume(){}}function copy$4(e){return JSON.parse(JSON.stringify(e))}function concisify$1(e){e=Array.from(new Set(e).values());e.sort();return e}async function getSubscription$1(e,t){if(e==null){throw new Error("invalid event")}if(Array.isArray(e)){e={topics:e}}if(typeof e==="string"){switch(e){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":{return{type:e,tag:e}}}}if(isHexString$1(e,32)){const t=e.toLowerCase();return{type:"transaction",tag:getTag$6("tx",{hash:t}),hash:t}}if(e.orphan){const t=e;return{type:"orphan",tag:getTag$6("orphan",t),filter:copy$4(t)}}if(e.address||e.topics){const r=e;const n={topics:(r.topics||[]).map((e=>{if(e==null){return null}if(Array.isArray(e)){return concisify$1(e.map((e=>e.toLowerCase())))}return e.toLowerCase()}))};if(r.address){const e=[];const i=[];const s=r=>{if(isHexString$1(r)){e.push(r)}else{i.push((async()=>{e.push(await resolveAddress$1(r,t))})())}};if(Array.isArray(r.address)){r.address.forEach(s)}else{s(r.address)}if(i.length){await Promise.all(i)}n.address=concisify$1(e.map((e=>e.toLowerCase())))}return{filter:n,tag:getTag$6("event",n),type:"event"}}assertArgument$1(false,"unknown ProviderEvent","event",e)}function getTime$4(){return(new Date).getTime()}const defaultOptions$5={cacheTimeout:250,pollingInterval:4e3};class AbstractProvider$1{#He;#Ne;#Ve;#Ge;#je;#Ke;#Ye;#qe;#ze;#Xe;#Qe;#q;constructor(e,t){this.#q=Object.assign({},defaultOptions$5,t||{});if(e==="any"){this.#Ke=true;this.#je=null}else if(e){const t=Network$1.from(e);this.#Ke=false;this.#je=Promise.resolve(t);setTimeout((()=>{this.emit("network",t,null)}),0)}else{this.#Ke=false;this.#je=null}this.#qe=-1;this.#Ye=new Map;this.#He=new Map;this.#Ne=new Map;this.#Ve=null;this.#Ge=false;this.#ze=1;this.#Xe=new Map;this.#Qe=false}get pollingInterval(){return this.#q.pollingInterval}get provider(){return this}get plugins(){return Array.from(this.#Ne.values())}attachPlugin(e){if(this.#Ne.get(e.name)){throw new Error(`cannot replace existing plugin: ${e.name} `)}this.#Ne.set(e.name,e.connect(this));return this}getPlugin(e){return this.#Ne.get(e)||null}get disableCcipRead(){return this.#Qe}set disableCcipRead(e){this.#Qe=!!e}async#We(e){const t=this.#q.cacheTimeout;if(t<0){return await this._perform(e)}const r=getTag$6(e.method,e);let n=this.#Ye.get(r);if(!n){n=this._perform(e);this.#Ye.set(r,n);setTimeout((()=>{if(this.#Ye.get(r)===n){this.#Ye.delete(r)}}),t)}return await n}async ccipReadFetch(e,t,r){if(this.disableCcipRead||r.length===0||e.to==null){return null}const n=e.to.toLowerCase();const i=t.toLowerCase();const s=[];for(let t=0;t<r.length;t++){const a=r[t];const o=a.replace("{sender}",n).replace("{data}",i);const f=new FetchRequest$1(o);if(a.indexOf("{data}")===-1){f.body={data:i,sender:n}}this.emit("debug",{action:"sendCcipReadFetchRequest",request:f,index:t,urls:r});let c="unknown error";const u=await f.send();try{const e=u.bodyJson;if(e.data){this.emit("debug",{action:"receiveCcipReadFetchResult",request:f,result:e});return e.data}if(e.message){c=e.message}this.emit("debug",{action:"receiveCcipReadFetchError",request:f,result:e})}catch(e){}assert$q(u.statusCode<400||u.statusCode>=500,`response not found during CCIP fetch: ${c}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:a,errorMessage:c}});s.push(c)}assert$q(false,`error encountered during CCIP fetch: ${s.map((e=>JSON.stringify(e))).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:r,errorMessages:s}})}_wrapBlock(e,t){return new Block$1(formatBlock$1(e),this)}_wrapLog(e,t){return new Log$1(formatLog$1(e),this)}_wrapTransactionReceipt(e,t){return new TransactionReceipt$1(formatTransactionReceipt$1(e),this)}_wrapTransactionResponse(e,t){return new TransactionResponse$1(formatTransactionResponse$1(e),this)}_detectNetwork(){assert$q(false,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(e){assert$q(false,`unsupported method: ${e.method}`,"UNSUPPORTED_OPERATION",{operation:e.method,info:e})}async getBlockNumber(){const e=getNumber$2(await this.#We({method:"getBlockNumber"}),"%response");if(this.#qe>=0){this.#qe=e}return e}_getAddress(e){return resolveAddress$1(e,this)}_getBlockTag(e){if(e==null){return"latest"}switch(e){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return e}if(isHexString$1(e)){if(isHexString$1(e,32)){return e}return toQuantity$1(e)}if(typeof e==="bigint"){e=getNumber$2(e,"blockTag")}if(typeof e==="number"){if(e>=0){return toQuantity$1(e)}if(this.#qe>=0){return toQuantity$1(this.#qe+e)}return this.getBlockNumber().then((t=>toQuantity$1(t+e)))}assertArgument$1(false,"invalid blockTag","blockTag",e)}_getFilter(e){const t=(e.topics||[]).map((e=>{if(e==null){return null}if(Array.isArray(e)){return concisify$1(e.map((e=>e.toLowerCase())))}return e.toLowerCase()}));const r="blockHash"in e?e.blockHash:undefined;const n=(e,n,i)=>{let s=undefined;switch(e.length){case 0:break;case 1:s=e[0];break;default:e.sort();s=e}if(r){if(n!=null||i!=null){throw new Error("invalid filter")}}const a={};if(s){a.address=s}if(t.length){a.topics=t}if(n){a.fromBlock=n}if(i){a.toBlock=i}if(r){a.blockHash=r}return a};let i=[];if(e.address){if(Array.isArray(e.address)){for(const t of e.address){i.push(this._getAddress(t))}}else{i.push(this._getAddress(e.address))}}let s=undefined;if("fromBlock"in e){s=this._getBlockTag(e.fromBlock)}let a=undefined;if("toBlock"in e){a=this._getBlockTag(e.toBlock)}if(i.filter((e=>typeof e!=="string")).length||s!=null&&typeof s!=="string"||a!=null&&typeof a!=="string"){return Promise.all([Promise.all(i),s,a]).then((e=>n(e[0],e[1],e[2])))}return n(i,s,a)}_getTransactionRequest(e){const t=copyRequest$1(e);const r=[];["to","from"].forEach((e=>{if(t[e]==null){return}const n=resolveAddress$1(t[e],this);if(isPromise$3(n)){r.push(async function(){t[e]=await n}())}else{t[e]=n}}));if(t.blockTag!=null){const e=this._getBlockTag(t.blockTag);if(isPromise$3(e)){r.push(async function(){t.blockTag=await e}())}else{t.blockTag=e}}if(r.length){return async function(){await Promise.all(r);return t}()}return t}async getNetwork(){if(this.#je==null){const e=(async()=>{try{const e=await this._detectNetwork();this.emit("network",e,null);return e}catch(t){if(this.#je===e){this.#je=null}throw t}})();this.#je=e;return(await e).clone()}const e=this.#je;const[t,r]=await Promise.all([e,this._detectNetwork()]);if(t.chainId!==r.chainId){if(this.#Ke){this.emit("network",r,t);if(this.#je===e){this.#je=Promise.resolve(r)}}else{assert$q(false,`network changed: ${t.chainId} => ${r.chainId} `,"NETWORK_ERROR",{event:"changed"})}}return t.clone()}async getFeeData(){const e=await this.getNetwork();const t=async()=>{const{_block:t,gasPrice:r,priorityFee:n}=await resolveProperties$1({_block:this.#Je("latest",false),gasPrice:(async()=>{try{const e=await this.#We({method:"getGasPrice"});return getBigInt$1(e,"%response")}catch(e){}return null})(),priorityFee:(async()=>{try{const e=await this.#We({method:"getPriorityFee"});return getBigInt$1(e,"%response")}catch(e){}return null})()});let i=null;let s=null;const a=this._wrapBlock(t,e);if(a&&a.baseFeePerGas){s=n!=null?n:BigInt("1000000000");i=a.baseFeePerGas*BN_2$5+s}return new FeeData$1(r,i,s)};const r=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(r){const e=new FetchRequest$1(r.url);const n=await r.processFunc(t,this,e);return new FeeData$1(n.gasPrice,n.maxFeePerGas,n.maxPriorityFeePerGas)}return await t()}async estimateGas(e){let t=this._getTransactionRequest(e);if(isPromise$3(t)){t=await t}return getBigInt$1(await this.#We({method:"estimateGas",transaction:t}),"%response")}async#Ze(e,t,r){assert$q(r<MAX_CCIP_REDIRECTS$1,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:t,enableCcipRead:true})});const n=copyRequest$1(e);try{return hexlify$1(await this._perform({method:"call",transaction:n,blockTag:t}))}catch(e){if(!this.disableCcipRead&&isCallException$1(e)&&e.data&&r>=0&&t==="latest"&&n.to!=null&&dataSlice$1(e.data,0,4)==="0x556f1830"){const i=e.data;const s=await resolveAddress$1(n.to,this);let a;try{a=parseOffchainLookup$1(dataSlice$1(e.data,4))}catch(e){assert$q(false,e.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:n,info:{data:i}})}assert$q(a.sender.toLowerCase()===s.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:i,reason:"OffchainLookup",transaction:n,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:a.errorArgs}});const o=await this.ccipReadFetch(n,a.calldata,a.urls);assert$q(o!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:n,info:{data:e.data,errorArgs:a.errorArgs}});const f={to:s,data:concat$c([a.selector,encodeBytes$1([o,a.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:f});try{const e=await this.#Ze(f,t,r+1);this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},f),result:e});return e}catch(e){this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},f),error:e});throw e}}throw e}}async#et(e){const{value:t}=await resolveProperties$1({network:this.getNetwork(),value:e});return t}async call(e){const{tx:t,blockTag:r}=await resolveProperties$1({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return await this.#et(this.#Ze(t,r,e.enableCcipRead?0:-1))}async#tt(e,t,r){let n=this._getAddress(t);let i=this._getBlockTag(r);if(typeof n!=="string"||typeof i!=="string"){[n,i]=await Promise.all([n,i])}return await this.#et(this.#We(Object.assign(e,{address:n,blockTag:i})))}async getBalance(e,t){return getBigInt$1(await this.#tt({method:"getBalance"},e,t),"%response")}async getTransactionCount(e,t){return getNumber$2(await this.#tt({method:"getTransactionCount"},e,t),"%response")}async getCode(e,t){return hexlify$1(await this.#tt({method:"getCode"},e,t))}async getStorage(e,t,r){const n=getBigInt$1(t,"position");return hexlify$1(await this.#tt({method:"getStorage",position:n},e,r))}async broadcastTransaction(e){const{blockNumber:t,hash:r,network:n}=await resolveProperties$1({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()});const i=Transaction$4.from(e);if(i.hash!==r){throw new Error("@TODO: the returned hash did not match")}return this._wrapTransactionResponse(i,n).replaceableTransaction(t)}async#Je(e,t){if(isHexString$1(e,32)){return await this.#We({method:"getBlock",blockHash:e,includeTransactions:t})}let r=this._getBlockTag(e);if(typeof r!=="string"){r=await r}return await this.#We({method:"getBlock",blockTag:r,includeTransactions:t})}async getBlock(e,t){const{network:r,params:n}=await resolveProperties$1({network:this.getNetwork(),params:this.#Je(e,!!t)});if(n==null){return null}return this._wrapBlock(n,r)}async getTransaction(e){const{network:t,params:r}=await resolveProperties$1({network:this.getNetwork(),params:this.#We({method:"getTransaction",hash:e})});if(r==null){return null}return this._wrapTransactionResponse(r,t)}async getTransactionReceipt(e){const{network:t,params:r}=await resolveProperties$1({network:this.getNetwork(),params:this.#We({method:"getTransactionReceipt",hash:e})});if(r==null){return null}if(r.gasPrice==null&&r.effectiveGasPrice==null){const t=await this.#We({method:"getTransaction",hash:e});if(t==null){throw new Error("report this; could not find tx or effectiveGasPrice")}r.effectiveGasPrice=t.gasPrice}return this._wrapTransactionReceipt(r,t)}async getTransactionResult(e){const{result:t}=await resolveProperties$1({network:this.getNetwork(),result:this.#We({method:"getTransactionResult",hash:e})});if(t==null){return null}return hexlify$1(t)}async getLogs(e){let t=this._getFilter(e);if(isPromise$3(t)){t=await t}const{network:r,params:n}=await resolveProperties$1({network:this.getNetwork(),params:this.#We({method:"getLogs",filter:t})});return n.map((e=>this._wrapLog(e,r)))}_getProvider(e){assert$q(false,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(e){return await EnsResolver$1.fromName(this,e)}async getAvatar(e){const t=await this.getResolver(e);if(t){return await t.getAvatar()}return null}async resolveName(e){const t=await this.getResolver(e);if(t){return await t.getAddress()}return null}async lookupAddress(e){e=getAddress$1(e);const t=namehash$1(e.substring(2).toLowerCase()+".addr.reverse");try{const r=await EnsResolver$1.getEnsAddress(this);const n=new Contract$2(r,["function resolver(bytes32) view returns (address)"],this);const i=await n.resolver(t);if(i==null||i===ZeroAddress$1){return null}const s=new Contract$2(i,["function name(bytes32) view returns (string)"],this);const a=await s.name(t);const o=await this.resolveName(a);if(o!==e){return null}return a}catch(e){if(isError$1(e,"BAD_DATA")&&e.value==="0x"){return null}if(isError$1(e,"CALL_EXCEPTION")){return null}throw e}return null}async waitForTransaction(e,t,r){const n=t!=null?t:1;if(n===0){return this.getTransactionReceipt(e)}return new Promise((async(t,i)=>{let s=null;const a=async r=>{try{const i=await this.getTransactionReceipt(e);if(i!=null){if(r-i.blockNumber+1>=n){t(i);if(s){clearTimeout(s);s=null}return}}}catch(e){console.log("EEE",e)}this.once("block",a)};if(r!=null){s=setTimeout((()=>{if(s==null){return}s=null;this.off("block",a);i(makeError$1("timeout","TIMEOUT",{reason:"timeout"}))}),r)}a(await this.getBlockNumber())}))}async waitForBlock(e){assert$q(false,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(e){const t=this.#Xe.get(e);if(!t){return}if(t.timer){clearTimeout(t.timer)}this.#Xe.delete(e)}_setTimeout(e,t){if(t==null){t=0}const r=this.#ze++;const n=()=>{this.#Xe.delete(r);e()};if(this.paused){this.#Xe.set(r,{timer:null,func:n,time:t})}else{const e=setTimeout(n,t);this.#Xe.set(r,{timer:e,func:n,time:getTime$4()})}return r}_forEachSubscriber(e){for(const t of this.#He.values()){e(t.subscriber)}}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new UnmanagedSubscriber$1(e.type);case"block":{const e=new PollingBlockSubscriber$1(this);e.pollingInterval=this.pollingInterval;return e}case"safe":case"finalized":return new PollingBlockTagSubscriber$1(this,e.type);case"event":return new PollingEventSubscriber$1(this,e.filter);case"transaction":return new PollingTransactionSubscriber$1(this,e.hash);case"orphan":return new PollingOrphanSubscriber$1(this,e.filter)}throw new Error(`unsupported event: ${e.type}`)}_recoverSubscriber(e,t){for(const r of this.#He.values()){if(r.subscriber===e){if(r.started){r.subscriber.stop()}r.subscriber=t;if(r.started){t.start()}if(this.#Ve!=null){t.pause(this.#Ve)}break}}}async#rt(e,t){let r=await getSubscription$1(e,this);if(r.type==="event"&&t&&t.length>0&&t[0].removed===true){r=await getSubscription$1({orphan:"drop-log",log:t[0]},this)}return this.#He.get(r.tag)||null}async#nt(e){const t=await getSubscription$1(e,this);const r=t.tag;let n=this.#He.get(r);if(!n){const e=this._getSubscriber(t);const i=new WeakMap;const s=new Map;n={subscriber:e,tag:r,addressableMap:i,nameMap:s,started:false,listeners:[]};this.#He.set(r,n)}return n}async on(e,t){const r=await this.#nt(e);r.listeners.push({listener:t,once:false});if(!r.started){r.subscriber.start();r.started=true;if(this.#Ve!=null){r.subscriber.pause(this.#Ve)}}return this}async once(e,t){const r=await this.#nt(e);r.listeners.push({listener:t,once:true});if(!r.started){r.subscriber.start();r.started=true;if(this.#Ve!=null){r.subscriber.pause(this.#Ve)}}return this}async emit(e,...t){const r=await this.#rt(e,t);if(!r||r.listeners.length===0){return false}const n=r.listeners.length;r.listeners=r.listeners.filter((({listener:r,once:n})=>{const i=new EventPayload$1(this,n?null:r,e);try{r.call(this,...t,i)}catch(e){}return!n}));if(r.listeners.length===0){if(r.started){r.subscriber.stop()}this.#He.delete(r.tag)}return n>0}async listenerCount(e){if(e){const t=await this.#rt(e);if(!t){return 0}return t.listeners.length}let t=0;for(const{listeners:e}of this.#He.values()){t+=e.length}return t}async listeners(e){if(e){const t=await this.#rt(e);if(!t){return[]}return t.listeners.map((({listener:e})=>e))}let t=[];for(const{listeners:e}of this.#He.values()){t=t.concat(e.map((({listener:e})=>e)))}return t}async off(e,t){const r=await this.#rt(e);if(!r){return this}if(t){const e=r.listeners.map((({listener:e})=>e)).indexOf(t);if(e>=0){r.listeners.splice(e,1)}}if(!t||r.listeners.length===0){if(r.started){r.subscriber.stop()}this.#He.delete(r.tag)}return this}async removeAllListeners(e){if(e){const{tag:t,started:r,subscriber:n}=await this.#nt(e);if(r){n.stop()}this.#He.delete(t)}else{for(const[e,{started:t,subscriber:r}]of this.#He){if(t){r.stop()}this.#He.delete(e)}}return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return this.off(e,t)}get destroyed(){return this.#Ge}destroy(){this.removeAllListeners();for(const e of this.#Xe.keys()){this._clearTimeout(e)}this.#Ge=true}get paused(){return this.#Ve!=null}set paused(e){if(!!e===this.paused){return}if(this.paused){this.resume()}else{this.pause(false)}}pause(e){this.#qe=-1;if(this.#Ve!=null){if(this.#Ve==!!e){return}assert$q(false,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber((t=>t.pause(e)));this.#Ve=!!e;for(const e of this.#Xe.values()){if(e.timer){clearTimeout(e.timer)}e.time=getTime$4()-e.time}}resume(){if(this.#Ve==null){return}this._forEachSubscriber((e=>e.resume()));this.#Ve=null;for(const e of this.#Xe.values()){let t=e.time;if(t<0){t=0}e.time=getTime$4();setTimeout(e.func,t)}}}function _parseString$1(e,t){try{const r=_parseBytes$1(e,t);if(r){return toUtf8String$1(r)}}catch(e){}return null}function _parseBytes$1(e,t){if(e==="0x"){return null}try{const r=getNumber$2(dataSlice$1(e,t,t+32));const n=getNumber$2(dataSlice$1(e,r,r+32));return dataSlice$1(e,r+32,r+32+n)}catch(e){}return null}function numPad$1(e){const t=toBeArray$1(e);if(t.length>32){throw new Error("internal; should not happen")}const r=new Uint8Array(32);r.set(t,32-t.length);return r}function bytesPad$1(e){if(e.length%32===0){return e}const t=new Uint8Array(Math.ceil(e.length/32)*32);t.set(e);return t}const empty$2=new Uint8Array([]);function encodeBytes$1(e){const t=[];let r=0;for(let n=0;n<e.length;n++){t.push(empty$2);r+=32}for(let n=0;n<e.length;n++){const i=getBytes$1(e[n]);t[n]=numPad$1(r);t.push(numPad$1(i.length));t.push(bytesPad$1(i));r+=32+Math.ceil(i.length/32)*32}return concat$c(t)}const zeros$1="0x0000000000000000000000000000000000000000000000000000000000000000";function parseOffchainLookup$1(e){const t={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};assert$q(dataLength$1(e)>=5*32,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const r=dataSlice$1(e,0,32);assert$q(dataSlice$1(r,0,12)===dataSlice$1(zeros$1,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"});t.sender=dataSlice$1(r,12);try{const r=[];const n=getNumber$2(dataSlice$1(e,32,64));const i=getNumber$2(dataSlice$1(e,n,n+32));const s=dataSlice$1(e,n+32);for(let e=0;e<i;e++){const t=_parseString$1(s,e*32);if(t==null){throw new Error("abort")}r.push(t)}t.urls=r}catch(e){assert$q(false,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const r=_parseBytes$1(e,64);if(r==null){throw new Error("abort")}t.calldata=r}catch(e){assert$q(false,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}assert$q(dataSlice$1(e,100,128)===dataSlice$1(zeros$1,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"});t.selector=dataSlice$1(e,96,100);try{const r=_parseBytes$1(e,128);if(r==null){throw new Error("abort")}t.extraData=r}catch(e){assert$q(false,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}t.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map((e=>t[e]));return t}function checkProvider$1(e,t){if(e.provider){return e.provider}assert$q(false,"missing provider","UNSUPPORTED_OPERATION",{operation:t})}async function populate$1(e,t){let r=copyRequest$1(t);if(r.to!=null){r.to=resolveAddress$1(r.to,e)}if(r.from!=null){const t=r.from;r.from=Promise.all([e.getAddress(),resolveAddress$1(t,e)]).then((([e,t])=>{assertArgument$1(e.toLowerCase()===t.toLowerCase(),"transaction from mismatch","tx.from",t);return e}))}else{r.from=e.getAddress()}return await resolveProperties$1(r)}class AbstractSigner$1{provider;constructor(e){defineProperties$1(this,{provider:e||null})}async getNonce(e){return checkProvider$1(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){const t=await populate$1(this,e);return t}async populateTransaction(e){const t=checkProvider$1(this,"populateTransaction");const r=await populate$1(this,e);if(r.nonce==null){r.nonce=await this.getNonce("pending")}if(r.gasLimit==null){r.gasLimit=await this.estimateGas(r)}const n=await this.provider.getNetwork();if(r.chainId!=null){const t=getBigInt$1(r.chainId);assertArgument$1(t===n.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else{r.chainId=n.chainId}const i=r.maxFeePerGas!=null||r.maxPriorityFeePerGas!=null;if(r.gasPrice!=null&&(r.type===2||i)){assertArgument$1(false,"eip-1559 transaction do not support gasPrice","tx",e)}else if((r.type===0||r.type===1)&&i){assertArgument$1(false,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e)}if((r.type===2||r.type==null)&&(r.maxFeePerGas!=null&&r.maxPriorityFeePerGas!=null)){r.type=2}else if(r.type===0||r.type===1){const e=await t.getFeeData();assert$q(e.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"});if(r.gasPrice==null){r.gasPrice=e.gasPrice}}else{const e=await t.getFeeData();if(r.type==null){if(e.maxFeePerGas!=null&&e.maxPriorityFeePerGas!=null){r.type=2;if(r.gasPrice!=null){const e=r.gasPrice;delete r.gasPrice;r.maxFeePerGas=e;r.maxPriorityFeePerGas=e}else{if(r.maxFeePerGas==null){r.maxFeePerGas=e.maxFeePerGas}if(r.maxPriorityFeePerGas==null){r.maxPriorityFeePerGas=e.maxPriorityFeePerGas}}}else if(e.gasPrice!=null){assert$q(!i,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"});if(r.gasPrice==null){r.gasPrice=e.gasPrice}r.type=0}else{assert$q(false,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"})}}else if(r.type===2){if(r.maxFeePerGas==null){r.maxFeePerGas=e.maxFeePerGas}if(r.maxPriorityFeePerGas==null){r.maxPriorityFeePerGas=e.maxPriorityFeePerGas}}}return await resolveProperties$1(r)}async estimateGas(e){return checkProvider$1(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return checkProvider$1(this,"call").call(await this.populateCall(e))}async resolveName(e){const t=checkProvider$1(this,"resolveName");return await t.resolveName(e)}async sendTransaction(e){const t=checkProvider$1(this,"sendTransaction");const r=await this.populateTransaction(e);delete r.from;const n=Transaction$4.from(r);return await t.broadcastTransaction(await this.signTransaction(n))}}class VoidSigner$1 extends AbstractSigner$1{address;constructor(e,t){super(t);defineProperties$1(this,{address:e})}async getAddress(){return this.address}connect(e){return new VoidSigner$1(this.address,e)}#it(e,t){assert$q(false,`VoidSigner cannot sign ${e}`,"UNSUPPORTED_OPERATION",{operation:t})}async signTransaction(e){this.#it("transactions","signTransaction")}async signMessage(e){this.#it("messages","signMessage")}async signTypedData(e,t,r){this.#it("typed-data","signTypedData")}}const shown$1=new Set;function showThrottleMessage$1(e){if(shown$1.has(e)){return}shown$1.add(e);console.log("========= NOTICE =========");console.log(`Request-Rate Exceeded for ${e} (this message will not be repeated)`);console.log("");console.log("The default API keys for each service are provided as a highly-throttled,");console.log("community resource for low-traffic projects and early prototyping.");console.log("");console.log("While your application will continue to function, we highly recommended");console.log("signing up for your own API keys to improve performance, increase your");console.log("request rate/limit and enable other perks, such as metrics and advanced APIs.");console.log("");console.log("For more details: https://docs.ethers.org/api-keys/");console.log("==========================")}function copy$3(e){return JSON.parse(JSON.stringify(e))}class FilterIdSubscriber$1{#ke;#st;#Oe;#Me;#at;#ot;constructor(e){this.#ke=e;this.#st=null;this.#Oe=this.#De.bind(this);this.#Me=false;this.#at=null;this.#ot=false}_subscribe(e){throw new Error("subclasses must override this")}_emitResults(e,t){throw new Error("subclasses must override this")}_recover(e){throw new Error("subclasses must override this")}async#De(e){try{if(this.#st==null){this.#st=this._subscribe(this.#ke)}let e=null;try{e=await this.#st}catch(e){if(!isError$1(e,"UNSUPPORTED_OPERATION")||e.operation!=="eth_newFilter"){throw e}}if(e==null){this.#st=null;this.#ke._recoverSubscriber(this,this._recover(this.#ke));return}const t=await this.#ke.getNetwork();if(!this.#at){this.#at=t}if(this.#at.chainId!==t.chainId){throw new Error("chaid changed")}if(this.#ot){return}const r=await this.#ke.send("eth_getFilterChanges",[e]);await this._emitResults(this.#ke,r)}catch(e){console.log("@TODO",e)}this.#ke.once("block",this.#Oe)}#ft(){const e=this.#st;if(e){this.#st=null;e.then((e=>{this.#ke.send("eth_uninstallFilter",[e])}))}}start(){if(this.#Me){return}this.#Me=true;this.#De(-2)}stop(){if(!this.#Me){return}this.#Me=false;this.#ot=true;this.#ft();this.#ke.off("block",this.#Oe)}pause(e){if(e){this.#ft()}this.#ke.off("block",this.#Oe)}resume(){this.start()}}class FilterIdEventSubscriber$1 extends FilterIdSubscriber$1{#ct;constructor(e,t){super(e);this.#ct=copy$3(t)}_recover(e){return new PollingEventSubscriber$1(e,this.#ct)}async _subscribe(e){const t=await e.send("eth_newFilter",[this.#ct]);return t}async _emitResults(e,t){for(const r of t){e.emit(this.#ct,e._wrapLog(r,e._network))}}}class FilterIdPendingSubscriber$1 extends FilterIdSubscriber$1{async _subscribe(e){return await e.send("eth_newPendingTransactionFilter",[])}async _emitResults(e,t){for(const r of t){e.emit("pending",r)}}}const Primitive$2="bigint,boolean,function,number,string,symbol".split(/,/g);function deepCopy$1(e){if(e==null||Primitive$2.indexOf(typeof e)>=0){return e}if(typeof e.getAddress==="function"){return e}if(Array.isArray(e)){return e.map(deepCopy$1)}if(typeof e==="object"){return Object.keys(e).reduce(((t,r)=>{t[r]=e[r];return t}),{})}throw new Error(`should not happen: ${e} (${typeof e})`)}function stall$7(e){return new Promise((t=>{setTimeout(t,e)}))}function getLowerCase$1(e){if(e){return e.toLowerCase()}return e}function isPollable$1(e){return e&&typeof e.pollingInterval==="number"}const defaultOptions$4={polling:false,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class JsonRpcSigner$1 extends AbstractSigner$1{address;constructor(e,t){super(e);t=getAddress$1(t);defineProperties$1(this,{address:t})}connect(e){assert$q(false,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(e){return await this.populateCall(e)}async sendUncheckedTransaction(e){const t=deepCopy$1(e);const r=[];if(t.from){const n=t.from;r.push((async()=>{const r=await resolveAddress$1(n,this.provider);assertArgument$1(r!=null&&r.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e);t.from=r})())}else{t.from=this.address}if(t.gasLimit==null){r.push((async()=>{t.gasLimit=await this.provider.estimateGas({...t,from:this.address})})())}if(t.to!=null){const e=t.to;r.push((async()=>{t.to=await resolveAddress$1(e,this.provider)})())}if(r.length){await Promise.all(r)}const n=this.provider.getRpcTransaction(t);return this.provider.send("eth_sendTransaction",[n])}async sendTransaction(e){const t=await this.provider.getBlockNumber();const r=await this.sendUncheckedTransaction(e);return await new Promise(((e,n)=>{const i=[1e3,100];let s=0;const a=async()=>{try{const n=await this.provider.getTransaction(r);if(n!=null){e(n.replaceableTransaction(t));return}}catch(e){if(isError$1(e,"CANCELLED")||isError$1(e,"BAD_DATA")||isError$1(e,"NETWORK_ERROR")){if(e.info==null){e.info={}}e.info.sendTransactionHash=r;n(e);return}if(isError$1(e,"INVALID_ARGUMENT")){s++;if(e.info==null){e.info={}}e.info.sendTransactionHash=r;if(s>10){n(e);return}}this.provider.emit("error",makeError$1("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:e}))}this.provider._setTimeout((()=>{a()}),i.pop()||4e3)};a()}))}async signTransaction(e){const t=deepCopy$1(e);if(t.from){const r=await resolveAddress$1(t.from,this.provider);assertArgument$1(r!=null&&r.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e);t.from=r}else{t.from=this.address}const r=this.provider.getRpcTransaction(t);return await this.provider.send("eth_signTransaction",[r])}async signMessage(e){const t=typeof e==="string"?toUtf8Bytes$1(e):e;return await this.provider.send("personal_sign",[hexlify$1(t),this.address.toLowerCase()])}async signTypedData(e,t,r){const n=deepCopy$1(r);const i=await TypedDataEncoder$1.resolveNames(e,t,n,(async e=>{const t=await resolveAddress$1(e);assertArgument$1(t!=null,"TypedData does not support null address","value",e);return t}));return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(TypedDataEncoder$1.getPayload(i.domain,t,i.value))])}async unlock(e){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),e,null])}async _legacySignMessage(e){const t=typeof e==="string"?toUtf8Bytes$1(e):e;return await this.provider.send("eth_sign",[this.address.toLowerCase(),hexlify$1(t)])}}class JsonRpcApiProvider$1 extends AbstractProvider$1{#q;#ut;#lt;#ht;#dt;#at;#pt;#yt(){if(this.#ht){return}const e=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");this.#ht=setTimeout((()=>{this.#ht=null;const e=this.#lt;this.#lt=[];while(e.length){const t=[e.shift()];while(e.length){if(t.length===this.#q.batchMaxCount){break}t.push(e.shift());const r=JSON.stringify(t.map((e=>e.payload)));if(r.length>this.#q.batchMaxSize){e.unshift(t.pop());break}}(async()=>{const e=t.length===1?t[0].payload:t.map((e=>e.payload));this.emit("debug",{action:"sendRpcPayload",payload:e});try{const r=await this._send(e);this.emit("debug",{action:"receiveRpcResult",result:r});for(const{resolve:e,reject:n,payload:i}of t){if(this.destroyed){n(makeError$1("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:i.method}));continue}const t=r.filter((e=>e.id===i.id))[0];if(t==null){const e=makeError$1("missing response for request","BAD_DATA",{value:r,info:{payload:i}});this.emit("error",e);n(e);continue}if("error"in t){n(this.getRpcError(i,t));continue}e(t.result)}}catch(e){this.emit("debug",{action:"receiveRpcError",error:e});for(const{reject:r}of t){r(e)}}})()}}),e)}constructor(e,t){super(e,t);this.#ut=1;this.#q=Object.assign({},defaultOptions$4,t||{});this.#lt=[];this.#ht=null;this.#at=null;this.#pt=null;{let e=null;const t=new Promise((t=>{e=t}));this.#dt={promise:t,resolve:e}}const r=this._getOption("staticNetwork");if(typeof r==="boolean"){assertArgument$1(!r||e!=="any","staticNetwork cannot be used on special network 'any'","options",t);if(r&&e!=null){this.#at=Network$1.from(e)}}else if(r){assertArgument$1(e==null||r.matches(e),"staticNetwork MUST match network object","options",t);this.#at=r}}_getOption(e){return this.#q[e]}get _network(){assert$q(this.#at,"network is not available yet","NETWORK_ERROR");return this.#at}async _perform(e){if(e.method==="call"||e.method==="estimateGas"){let t=e.transaction;if(t&&t.type!=null&&getBigInt$1(t.type)){if(t.maxFeePerGas==null&&t.maxPriorityFeePerGas==null){const r=await this.getFeeData();if(r.maxFeePerGas==null&&r.maxPriorityFeePerGas==null){e=Object.assign({},e,{transaction:Object.assign({},t,{type:undefined})})}}}}const t=this.getRpcRequest(e);if(t!=null){return await this.send(t.method,t.args)}return super._perform(e)}async _detectNetwork(){const e=this._getOption("staticNetwork");if(e){if(e===true){if(this.#at){return this.#at}}else{return e}}if(this.#pt){return await this.#pt}if(this.ready){this.#pt=(async()=>{try{const e=Network$1.from(getBigInt$1(await this.send("eth_chainId",[])));this.#pt=null;return e}catch(e){this.#pt=null;throw e}})();return await this.#pt}this.#pt=(async()=>{const e={id:this.#ut++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:e});let t;try{t=(await this._send(e))[0];this.#pt=null}catch(e){this.#pt=null;this.emit("debug",{action:"receiveRpcError",error:e});throw e}this.emit("debug",{action:"receiveRpcResult",result:t});if("result"in t){return Network$1.from(getBigInt$1(t.result))}throw this.getRpcError(e,t)})();return await this.#pt}_start(){if(this.#dt==null||this.#dt.resolve==null){return}this.#dt.resolve();this.#dt=null;(async()=>{while(this.#at==null&&!this.destroyed){try{this.#at=await this._detectNetwork()}catch(e){if(this.destroyed){break}console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)");this.emit("error",makeError$1("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:e}}));await stall$7(1e3)}}this.#yt()})()}async _waitUntilReady(){if(this.#dt==null){return}return await this.#dt.promise}_getSubscriber(e){if(e.type==="pending"){return new FilterIdPendingSubscriber$1(this)}if(e.type==="event"){if(this._getOption("polling")){return new PollingEventSubscriber$1(this,e.filter)}return new FilterIdEventSubscriber$1(this,e.filter)}if(e.type==="orphan"&&e.filter.orphan==="drop-log"){return new UnmanagedSubscriber$1("orphan")}return super._getSubscriber(e)}get ready(){return this.#dt==null}getRpcTransaction(e){const t={};["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach((r=>{if(e[r]==null){return}let n=r;if(r==="gasLimit"){n="gas"}t[n]=toQuantity$1(getBigInt$1(e[r],`tx.${r}`))}));["from","to","data"].forEach((r=>{if(e[r]==null){return}t[r]=hexlify$1(e[r])}));if(e.accessList){t["accessList"]=accessListify$1(e.accessList)}return t}getRpcRequest(e){switch(e.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[getLowerCase$1(e.address),e.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[getLowerCase$1(e.address),e.blockTag]};case"getCode":return{method:"eth_getCode",args:[getLowerCase$1(e.address),e.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[getLowerCase$1(e.address),"0x"+e.position.toString(16),e.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[e.signedTransaction]};case"getBlock":if("blockTag"in e){return{method:"eth_getBlockByNumber",args:[e.blockTag,!!e.includeTransactions]}}else if("blockHash"in e){return{method:"eth_getBlockByHash",args:[e.blockHash,!!e.includeTransactions]}}break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[e.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[e.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(e.transaction),e.blockTag]};case"estimateGas":{return{method:"eth_estimateGas",args:[this.getRpcTransaction(e.transaction)]}}case"getLogs":if(e.filter&&e.filter.address!=null){if(Array.isArray(e.filter.address)){e.filter.address=e.filter.address.map(getLowerCase$1)}else{e.filter.address=getLowerCase$1(e.filter.address)}}return{method:"eth_getLogs",args:[e.filter]}}return null}getRpcError(e,t){const{method:r}=e;const{error:n}=t;if(r==="eth_estimateGas"&&n.message){const t=n.message;if(!t.match(/revert/i)&&t.match(/insufficient funds/i)){return makeError$1("insufficient funds","INSUFFICIENT_FUNDS",{transaction:e.params[0],info:{payload:e,error:n}})}}if(r==="eth_call"||r==="eth_estimateGas"){const t=spelunkData$1(n);const i=AbiCoder$1.getBuiltinCallException(r==="eth_call"?"call":"estimateGas",e.params[0],t?t.data:null);i.info={error:n,payload:e};return i}const i=JSON.stringify(spelunkMessage$1(n));if(typeof n.message==="string"&&n.message.match(/user denied|ethers-user-denied/i)){const t={eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"};return makeError$1(`user rejected action`,"ACTION_REJECTED",{action:t[r]||"unknown",reason:"rejected",info:{payload:e,error:n}})}if(r==="eth_sendRawTransaction"||r==="eth_sendTransaction"){const t=e.params[0];if(i.match(/insufficient funds|base fee exceeds gas limit/i)){return makeError$1("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:t,info:{error:n}})}if(i.match(/nonce/i)&&i.match(/too low/i)){return makeError$1("nonce has already been used","NONCE_EXPIRED",{transaction:t,info:{error:n}})}if(i.match(/replacement transaction/i)&&i.match(/underpriced/i)){return makeError$1("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:t,info:{error:n}})}if(i.match(/only replay-protected/i)){return makeError$1("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:r,info:{transaction:t,info:{error:n}}})}}let s=!!i.match(/the method .* does not exist/i);if(!s){if(n&&n.details&&n.details.startsWith("Unauthorized method:")){s=true}}if(s){return makeError$1("unsupported operation","UNSUPPORTED_OPERATION",{operation:e.method,info:{error:n,payload:e}})}return makeError$1("could not coalesce error","UNKNOWN_ERROR",{error:n,payload:e})}send(e,t){if(this.destroyed){return Promise.reject(makeError$1("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e}))}const r=this.#ut++;const n=new Promise(((n,i)=>{this.#lt.push({resolve:n,reject:i,payload:{method:e,params:t,id:r,jsonrpc:"2.0"}})}));this.#yt();return n}async getSigner(e){if(e==null){e=0}const t=this.send("eth_accounts",[]);if(typeof e==="number"){const r=await t;if(e>=r.length){throw new Error("no such account")}return new JsonRpcSigner$1(this,r[e])}const{accounts:r}=await resolveProperties$1({network:this.getNetwork(),accounts:t});e=getAddress$1(e);for(const t of r){if(getAddress$1(t)===e){return new JsonRpcSigner$1(this,e)}}throw new Error("invalid account")}async listAccounts(){const e=await this.send("eth_accounts",[]);return e.map((e=>new JsonRpcSigner$1(this,e)))}destroy(){if(this.#ht){clearTimeout(this.#ht);this.#ht=null}for(const{payload:e,reject:t}of this.#lt){t(makeError$1("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e.method}))}this.#lt=[];super.destroy()}}class JsonRpcApiPollingProvider$1 extends JsonRpcApiProvider$1{#mt;constructor(e,t){super(e,t);this.#mt=4e3}_getSubscriber(e){const t=super._getSubscriber(e);if(isPollable$1(t)){t.pollingInterval=this.#mt}return t}get pollingInterval(){return this.#mt}set pollingInterval(e){if(!Number.isInteger(e)||e<0){throw new Error("invalid interval")}this.#mt=e;this._forEachSubscriber((e=>{if(isPollable$1(e)){e.pollingInterval=this.#mt}}))}}class JsonRpcProvider$1 extends JsonRpcApiPollingProvider$1{#gt;constructor(e,t,r){if(e==null){e="http://localhost:8545"}super(t,r);if(typeof e==="string"){this.#gt=new FetchRequest$1(e)}else{this.#gt=e.clone()}}_getConnection(){return this.#gt.clone()}async send(e,t){await this._start();return await super.send(e,t)}async _send(e){const t=this._getConnection();t.body=JSON.stringify(e);t.setHeader("content-type","application/json");const r=await t.send();r.assertOk();let n=r.bodyJson;if(!Array.isArray(n)){n=[n]}return n}}function spelunkData$1(e){if(e==null){return null}if(typeof e.message==="string"&&e.message.match(/revert/i)&&isHexString$1(e.data)){return{message:e.message,data:e.data}}if(typeof e==="object"){for(const t in e){const r=spelunkData$1(e[t]);if(r){return r}}return null}if(typeof e==="string"){try{return spelunkData$1(JSON.parse(e))}catch(e){}}return null}function _spelunkMessage$1(e,t){if(e==null){return}if(typeof e.message==="string"){t.push(e.message)}if(typeof e==="object"){for(const r in e){_spelunkMessage$1(e[r],t)}}if(typeof e==="string"){try{return _spelunkMessage$1(JSON.parse(e),t)}catch(e){}}}function spelunkMessage$1(e){const t=[];_spelunkMessage$1(e,t);return t}const defaultApiKey$3="9f7d929b018cdffb338517efa06f58359e86ff1ffd350bc889738523659e7972";function getHost$9(e){switch(e){case"mainnet":return"rpc.ankr.com/eth";case"goerli":return"rpc.ankr.com/eth_goerli";case"matic":return"rpc.ankr.com/polygon";case"arbitrum":return"rpc.ankr.com/arbitrum"}assertArgument$1(false,"unsupported network","network",e)}class AnkrProvider$1 extends JsonRpcProvider$1{apiKey;constructor(e,t){if(e==null){e="mainnet"}const r=Network$1.from(e);if(t==null){t=defaultApiKey$3}const n={polling:true,staticNetwork:r};const i=AnkrProvider$1.getRequest(r,t);super(i,r,n);defineProperties$1(this,{apiKey:t})}_getProvider(e){try{return new AnkrProvider$1(e,this.apiKey)}catch(e){}return super._getProvider(e)}static getRequest(e,t){if(t==null){t=defaultApiKey$3}const r=new FetchRequest$1(`https://${getHost$9(e.name)}/${t}`);r.allowGzip=true;if(t===defaultApiKey$3){r.retryFunc=async(e,t,r)=>{showThrottleMessage$1("AnkrProvider");return true}}return r}getRpcError(e,t){if(e.method==="eth_sendRawTransaction"){if(t&&t.error&&t.error.message==="INTERNAL_ERROR: could not replace existing tx"){t.error.message="replacement transaction underpriced"}}return super.getRpcError(e,t)}isCommunityResource(){return this.apiKey===defaultApiKey$3}}const defaultApiKey$2="_gg7wSSi0KMBsdKnGVfHDueq6xMB9EkC";function getHost$8(e){switch(e){case"mainnet":return"eth-mainnet.alchemyapi.io";case"goerli":return"eth-goerli.g.alchemy.com";case"sepolia":return"eth-sepolia.g.alchemy.com";case"arbitrum":return"arb-mainnet.g.alchemy.com";case"arbitrum-goerli":return"arb-goerli.g.alchemy.com";case"base":return"base-mainnet.g.alchemy.com";case"base-goerli":return"base-goerli.g.alchemy.com";case"matic":return"polygon-mainnet.g.alchemy.com";case"matic-mumbai":return"polygon-mumbai.g.alchemy.com";case"optimism":return"opt-mainnet.g.alchemy.com";case"optimism-goerli":return"opt-goerli.g.alchemy.com"}assertArgument$1(false,"unsupported network","network",e)}class AlchemyProvider$1 extends JsonRpcProvider$1{apiKey;constructor(e,t){if(e==null){e="mainnet"}const r=Network$1.from(e);if(t==null){t=defaultApiKey$2}const n=AlchemyProvider$1.getRequest(r,t);super(n,r,{staticNetwork:r});defineProperties$1(this,{apiKey:t})}_getProvider(e){try{return new AlchemyProvider$1(e,this.apiKey)}catch(e){}return super._getProvider(e)}async _perform(e){if(e.method==="getTransactionResult"){const{trace:t,tx:r}=await resolveProperties$1({trace:this.send("trace_transaction",[e.hash]),tx:this.getTransaction(e.hash)});if(t==null||r==null){return null}let n;let i=false;try{n=t[0].result.output;i=t[0].error==="Reverted"}catch(e){}if(n){assert$q(!i,"an error occurred during transaction executions","CALL_EXCEPTION",{action:"getTransactionResult",data:n,reason:null,transaction:r,invocation:null,revert:null});return n}assert$q(false,"could not parse trace result","BAD_DATA",{value:t})}return await super._perform(e)}isCommunityResource(){return this.apiKey===defaultApiKey$2}static getRequest(e,t){if(t==null){t=defaultApiKey$2}const r=new FetchRequest$1(`https://${getHost$8(e.name)}/v2/${t}`);r.allowGzip=true;if(t===defaultApiKey$2){r.retryFunc=async(e,t,r)=>{showThrottleMessage$1("alchemy");return true}}return r}}class CloudflareProvider$1 extends JsonRpcProvider$1{constructor(e){if(e==null){e="mainnet"}const t=Network$1.from(e);assertArgument$1(t.name==="mainnet","unsupported network","network",e);super("https://cloudflare-eth.com/",t,{staticNetwork:t})}}const THROTTLE$1=2e3;function isPromise$2(e){return e&&typeof e.then==="function"}const EtherscanPluginId$1="org.ethers.plugins.provider.Etherscan";class EtherscanPlugin$1 extends NetworkPlugin$1{baseUrl;constructor(e){super(EtherscanPluginId$1);defineProperties$1(this,{baseUrl:e})}clone(){return new EtherscanPlugin$1(this.baseUrl)}}const skipKeys$1=["enableCcipRead"];let nextId$1=1;class EtherscanProvider$1 extends AbstractProvider$1{network;apiKey;#bt;constructor(e,t){const r=t!=null?t:null;super();const n=Network$1.from(e);this.#bt=n.getPlugin(EtherscanPluginId$1);defineProperties$1(this,{apiKey:r,network:n});this.getBaseUrl()}getBaseUrl(){if(this.#bt){return this.#bt.baseUrl}switch(this.network.name){case"mainnet":return"https://api.etherscan.io";case"goerli":return"https://api-goerli.etherscan.io";case"sepolia":return"https://api-sepolia.etherscan.io";case"arbitrum":return"https://api.arbiscan.io";case"arbitrum-goerli":return"https://api-goerli.arbiscan.io";case"matic":return"https://api.polygonscan.com";case"matic-mumbai":return"https://api-testnet.polygonscan.com";case"optimism":return"https://api-optimistic.etherscan.io";case"optimism-goerli":return"https://api-goerli-optimistic.etherscan.io";case"bnb":return"http://api.bscscan.com";case"bnbt":return"http://api-testnet.bscscan.com"}assertArgument$1(false,"unsupported network","network",this.network)}getUrl(e,t){const r=Object.keys(t).reduce(((e,r)=>{const n=t[r];if(n!=null){e+=`&${r}=${n}`}return e}),"");const n=this.apiKey?`&apikey=${this.apiKey}`:"";return`${this.getBaseUrl()}/api?module=${e}${r}${n}`}getPostUrl(){return`${this.getBaseUrl()}/api`}getPostData(e,t){t.module=e;t.apikey=this.apiKey;return t}async detectNetwork(){return this.network}async fetch(e,t,r){const n=nextId$1++;const i=r?this.getPostUrl():this.getUrl(e,t);const s=r?this.getPostData(e,t):null;this.emit("debug",{action:"sendRequest",id:n,url:i,payload:s});const a=new FetchRequest$1(i);a.setThrottleParams({slotInterval:1e3});a.retryFunc=(e,t,r)=>{if(this.isCommunityResource()){showThrottleMessage$1("Etherscan")}return Promise.resolve(true)};a.processFunc=async(t,r)=>{const i=r.hasBody()?JSON.parse(toUtf8String$1(r.body)):{};const s=(typeof i.result==="string"?i.result:"").toLowerCase().indexOf("rate limit")>=0;if(e==="proxy"){if(i&&i.status==0&&i.message=="NOTOK"&&s){this.emit("debug",{action:"receiveError",id:n,reason:"proxy-NOTOK",error:i});r.throwThrottleError(i.result,THROTTLE$1)}}else{if(s){this.emit("debug",{action:"receiveError",id:n,reason:"null result",error:i.result});r.throwThrottleError(i.result,THROTTLE$1)}}return r};if(s){a.setHeader("content-type","application/x-www-form-urlencoded; charset=UTF-8");a.body=Object.keys(s).map((e=>`${e}=${s[e]}`)).join("&")}const o=await a.send();try{o.assertOk()}catch(e){this.emit("debug",{action:"receiveError",id:n,error:e,reason:"assertOk"});assert$q(false,"response error","SERVER_ERROR",{request:a,response:o})}if(!o.hasBody()){this.emit("debug",{action:"receiveError",id:n,error:"missing body",reason:"null body"});assert$q(false,"missing response","SERVER_ERROR",{request:a,response:o})}const f=JSON.parse(toUtf8String$1(o.body));if(e==="proxy"){if(f.jsonrpc!="2.0"){this.emit("debug",{action:"receiveError",id:n,result:f,reason:"invalid JSON-RPC"});assert$q(false,"invalid JSON-RPC response (missing jsonrpc='2.0')","SERVER_ERROR",{request:a,response:o,info:{result:f}})}if(f.error){this.emit("debug",{action:"receiveError",id:n,result:f,reason:"JSON-RPC error"});assert$q(false,"error response","SERVER_ERROR",{request:a,response:o,info:{result:f}})}this.emit("debug",{action:"receiveRequest",id:n,result:f});return f.result}else{if(f.status==0&&(f.message==="No records found"||f.message==="No transactions found")){this.emit("debug",{action:"receiveRequest",id:n,result:f});return f.result}if(f.status!=1||typeof f.message==="string"&&!f.message.match(/^OK/)){this.emit("debug",{action:"receiveError",id:n,result:f});assert$q(false,"error response","SERVER_ERROR",{request:a,response:o,info:{result:f}})}this.emit("debug",{action:"receiveRequest",id:n,result:f});return f.result}}_getTransactionPostData(e){const t={};for(let r in e){if(skipKeys$1.indexOf(r)>=0){continue}if(e[r]==null){continue}let n=e[r];if(r==="type"&&n===0){continue}if(r==="blockTag"&&n==="latest"){continue}if({type:true,gasLimit:true,gasPrice:true,maxFeePerGs:true,maxPriorityFeePerGas:true,nonce:true,value:true}[r]){n=toQuantity$1(n)}else if(r==="accessList"){n="["+accessListify$1(n).map((e=>`{address:"${e.address}",storageKeys:["${e.storageKeys.join('","')}"]}`)).join(",")+"]"}else{n=hexlify$1(n)}t[r]=n}return t}_checkError(e,t,r){let n="";if(isError$1(t,"SERVER_ERROR")){try{n=t.info.result.error.message}catch(e){}if(!n){try{n=t.info.message}catch(e){}}}if(e.method==="estimateGas"){if(!n.match(/revert/i)&&n.match(/insufficient funds/i)){assert$q(false,"insufficient funds","INSUFFICIENT_FUNDS",{transaction:e.transaction})}}if(e.method==="call"||e.method==="estimateGas"){if(n.match(/execution reverted/i)){let r="";try{r=t.info.result.error.data}catch(t){}const n=AbiCoder$1.getBuiltinCallException(e.method,e.transaction,r);n.info={request:e,error:t};throw n}}if(n){if(e.method==="broadcastTransaction"){const t=Transaction$4.from(e.signedTransaction);if(n.match(/replacement/i)&&n.match(/underpriced/i)){assert$q(false,"replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:t})}if(n.match(/insufficient funds/)){assert$q(false,"insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:t})}if(n.match(/same hash was already imported|transaction nonce is too low|nonce too low/)){assert$q(false,"nonce has already been used","NONCE_EXPIRED",{transaction:t})}}}throw t}async _detectNetwork(){return this.network}async _perform(e){switch(e.method){case"chainId":return this.network.chainId;case"getBlockNumber":return this.fetch("proxy",{action:"eth_blockNumber"});case"getGasPrice":return this.fetch("proxy",{action:"eth_gasPrice"});case"getPriorityFee":if(this.network.name==="mainnet"){return"1000000000"}else if(this.network.name==="optimism"){return"1000000"}else{throw new Error("fallback onto the AbstractProvider default")}case"getBalance":return this.fetch("account",{action:"balance",address:e.address,tag:e.blockTag});case"getTransactionCount":return this.fetch("proxy",{action:"eth_getTransactionCount",address:e.address,tag:e.blockTag});case"getCode":return this.fetch("proxy",{action:"eth_getCode",address:e.address,tag:e.blockTag});case"getStorage":return this.fetch("proxy",{action:"eth_getStorageAt",address:e.address,position:e.position,tag:e.blockTag});case"broadcastTransaction":return this.fetch("proxy",{action:"eth_sendRawTransaction",hex:e.signedTransaction},true).catch((t=>this._checkError(e,t,e.signedTransaction)));case"getBlock":if("blockTag"in e){return this.fetch("proxy",{action:"eth_getBlockByNumber",tag:e.blockTag,boolean:e.includeTransactions?"true":"false"})}assert$q(false,"getBlock by blockHash not supported by Etherscan","UNSUPPORTED_OPERATION",{operation:"getBlock(blockHash)"});case"getTransaction":return this.fetch("proxy",{action:"eth_getTransactionByHash",txhash:e.hash});case"getTransactionReceipt":return this.fetch("proxy",{action:"eth_getTransactionReceipt",txhash:e.hash});case"call":{if(e.blockTag!=="latest"){throw new Error("EtherscanProvider does not support blockTag for call")}const t=this._getTransactionPostData(e.transaction);t.module="proxy";t.action="eth_call";try{return await this.fetch("proxy",t,true)}catch(t){return this._checkError(e,t,e.transaction)}}case"estimateGas":{const t=this._getTransactionPostData(e.transaction);t.module="proxy";t.action="eth_estimateGas";try{return await this.fetch("proxy",t,true)}catch(t){return this._checkError(e,t,e.transaction)}}}return super._perform(e)}async getNetwork(){return this.network}async getEtherPrice(){if(this.network.name!=="mainnet"){return 0}return parseFloat((await this.fetch("stats",{action:"ethprice"})).ethusd)}async getContract(e){let t=this._getAddress(e);if(isPromise$2(t)){t=await t}try{const e=await this.fetch("contract",{action:"getabi",address:t});const r=JSON.parse(e);return new Contract$2(t,r,this)}catch(e){return null}}isCommunityResource(){return this.apiKey==null}}function getGlobal$2(){if(typeof self!=="undefined"){return self}if(typeof window!=="undefined"){return window}if(typeof global$1!=="undefined"){return global$1}throw new Error("unable to locate global object")}const _WebSocket$1=getGlobal$2().WebSocket;class SocketSubscriber$1{#ke;#_e;get filter(){return JSON.parse(this.#_e)}#At;#wt;#Et;constructor(e,t){this.#ke=e;this.#_e=JSON.stringify(t);this.#At=null;this.#wt=null;this.#Et=null}start(){this.#At=this.#ke.send("eth_subscribe",this.filter).then((e=>{this.#ke._register(e,this);return e}))}stop(){this.#At.then((e=>{this.#ke.send("eth_unsubscribe",[e])}));this.#At=null}pause(e){assert$q(e,"preserve logs while paused not supported by SocketSubscriber yet","UNSUPPORTED_OPERATION",{operation:"pause(false)"});this.#wt=!!e}resume(){this.#wt=null}_handleMessage(e){if(this.#At==null){return}if(this.#wt===null){let t=this.#Et;if(t==null){t=this._emit(this.#ke,e)}else{t=t.then((async()=>{await this._emit(this.#ke,e)}))}this.#Et=t.then((()=>{if(this.#Et===t){this.#Et=null}}))}}async _emit(e,t){throw new Error("sub-classes must implemente this; _emit")}}class SocketBlockSubscriber$1 extends SocketSubscriber$1{constructor(e){super(e,["newHeads"])}async _emit(e,t){e.emit("block",parseInt(t.number))}}class SocketPendingSubscriber$1 extends SocketSubscriber$1{constructor(e){super(e,["newPendingTransactions"])}async _emit(e,t){e.emit("pending",t)}}class SocketEventSubscriber$1 extends SocketSubscriber$1{#vt;get logFilter(){return JSON.parse(this.#vt)}constructor(e,t){super(e,["logs",t]);this.#vt=JSON.stringify(t)}async _emit(e,t){e.emit(this.logFilter,e._wrapLog(t,e._network))}}class SocketProvider$1 extends JsonRpcApiProvider$1{#_t;#He;#St;constructor(e,t){const r=Object.assign({},t!=null?t:{});assertArgument$1(r.batchMaxCount==null||r.batchMaxCount===1,"sockets-based providers do not support batches","options.batchMaxCount",t);r.batchMaxCount=1;if(r.staticNetwork==null){r.staticNetwork=true}super(e,r);this.#_t=new Map;this.#He=new Map;this.#St=new Map}_getSubscriber(e){switch(e.type){case"close":return new UnmanagedSubscriber$1("close");case"block":return new SocketBlockSubscriber$1(this);case"pending":return new SocketPendingSubscriber$1(this);case"event":return new SocketEventSubscriber$1(this,e.filter);case"orphan":if(e.filter.orphan==="drop-log"){return new UnmanagedSubscriber$1("drop-log")}}return super._getSubscriber(e)}_register(e,t){this.#He.set(e,t);const r=this.#St.get(e);if(r){for(const e of r){t._handleMessage(e)}this.#St.delete(e)}}async _send(e){assertArgument$1(!Array.isArray(e),"WebSocket does not support batch send","payload",e);const t=new Promise(((t,r)=>{this.#_t.set(e.id,{payload:e,resolve:t,reject:r})}));await this._waitUntilReady();await this._write(JSON.stringify(e));return[await t]}async _processMessage(e){const t=JSON.parse(e);if(t&&typeof t==="object"&&"id"in t){const e=this.#_t.get(t.id);if(e==null){this.emit("error",makeError$1("received result for unknown id","UNKNOWN_ERROR",{reasonCode:"UNKNOWN_ID",result:t}));return}this.#_t.delete(t.id);e.resolve(t)}else if(t&&t.method==="eth_subscription"){const e=t.params.subscription;const r=this.#He.get(e);if(r){r._handleMessage(t.params.result)}else{let r=this.#St.get(e);if(r==null){r=[];this.#St.set(e,r)}r.push(t.params.result)}}else{this.emit("error",makeError$1("received unexpected message","UNKNOWN_ERROR",{reasonCode:"UNEXPECTED_MESSAGE",result:t}));return}}async _write(e){throw new Error("sub-classes must override this")}}class WebSocketProvider$1 extends SocketProvider$1{#gt;#$t;get websocket(){if(this.#$t==null){throw new Error("websocket closed")}return this.#$t}constructor(e,t,r){super(t,r);if(typeof e==="string"){this.#gt=()=>new _WebSocket$1(e);this.#$t=this.#gt()}else if(typeof e==="function"){this.#gt=e;this.#$t=e()}else{this.#gt=null;this.#$t=e}this.websocket.onopen=async()=>{try{await this._start();this.resume()}catch(e){console.log("failed to start WebsocketProvider",e)}};this.websocket.onmessage=e=>{this._processMessage(e.data)}}async _write(e){this.websocket.send(e)}async destroy(){if(this.#$t!=null){this.#$t.close();this.#$t=null}super.destroy()}}const defaultProjectId$1="84842078b09946638c03157f83405213";function getHost$7(e){switch(e){case"mainnet":return"mainnet.infura.io";case"goerli":return"goerli.infura.io";case"sepolia":return"sepolia.infura.io";case"arbitrum":return"arbitrum-mainnet.infura.io";case"arbitrum-goerli":return"arbitrum-goerli.infura.io";case"linea":return"linea-mainnet.infura.io";case"linea-goerli":return"linea-goerli.infura.io";case"matic":return"polygon-mainnet.infura.io";case"matic-mumbai":return"polygon-mumbai.infura.io";case"optimism":return"optimism-mainnet.infura.io";case"optimism-goerli":return"optimism-goerli.infura.io"}assertArgument$1(false,"unsupported network","network",e)}class InfuraWebSocketProvider$1 extends WebSocketProvider$1{projectId;projectSecret;constructor(e,t){const r=new InfuraProvider$1(e,t);const n=r._getConnection();assert$q(!n.credentials,"INFURA WebSocket project secrets unsupported","UNSUPPORTED_OPERATION",{operation:"InfuraProvider.getWebSocketProvider()"});const i=n.url.replace(/^http/i,"ws").replace("/v3/","/ws/v3/");super(i,e);defineProperties$1(this,{projectId:r.projectId,projectSecret:r.projectSecret})}isCommunityResource(){return this.projectId===defaultProjectId$1}}class InfuraProvider$1 extends JsonRpcProvider$1{projectId;projectSecret;constructor(e,t,r){if(e==null){e="mainnet"}const n=Network$1.from(e);if(t==null){t=defaultProjectId$1}if(r==null){r=null}const i=InfuraProvider$1.getRequest(n,t,r);super(i,n,{staticNetwork:n});defineProperties$1(this,{projectId:t,projectSecret:r})}_getProvider(e){try{return new InfuraProvider$1(e,this.projectId,this.projectSecret)}catch(e){}return super._getProvider(e)}isCommunityResource(){return this.projectId===defaultProjectId$1}static getWebSocketProvider(e,t){return new InfuraWebSocketProvider$1(e,t)}static getRequest(e,t,r){if(t==null){t=defaultProjectId$1}if(r==null){r=null}const n=new FetchRequest$1(`https://${getHost$7(e.name)}/v3/${t}`);n.allowGzip=true;if(r){n.setCredentials("",r)}if(t===defaultProjectId$1){n.retryFunc=async(e,t,r)=>{showThrottleMessage$1("InfuraProvider");return true}}return n}}const defaultToken$1="919b412a057b5e9c9b6dce193c5a60242d6efadb";function getHost$6(e){switch(e){case"mainnet":return"ethers.quiknode.pro";case"goerli":return"ethers.ethereum-goerli.quiknode.pro";case"arbitrum":return"ethers.arbitrum-mainnet.quiknode.pro";case"arbitrum-goerli":return"ethers.arbitrum-goerli.quiknode.pro";case"matic":return"ethers.matic.quiknode.pro";case"matic-mumbai":return"ethers.matic-testnet.quiknode.pro";case"optimism":return"ethers.optimism.quiknode.pro";case"optimism-goerli":return"ethers.optimism-goerli.quiknode.pro"}assertArgument$1(false,"unsupported network","network",e)}class QuickNodeProvider$1 extends JsonRpcProvider$1{token;constructor(e,t){if(e==null){e="mainnet"}const r=Network$1.from(e);if(t==null){t=defaultToken$1}const n=QuickNodeProvider$1.getRequest(r,t);super(n,r,{staticNetwork:r});defineProperties$1(this,{token:t})}_getProvider(e){try{return new QuickNodeProvider$1(e,this.token)}catch(e){}return super._getProvider(e)}isCommunityResource(){return this.token===defaultToken$1}static getRequest(e,t){if(t==null){t=defaultToken$1}const r=new FetchRequest$1(`https://${getHost$6(e.name)}/${t}`);r.allowGzip=true;if(t===defaultToken$1){r.retryFunc=async(e,t,r)=>{showThrottleMessage$1("QuickNodeProvider");return true}}return r}}const BN_1$6=BigInt("1");const BN_2$4=BigInt("2");function shuffle$1(e){for(let t=e.length-1;t>0;t--){const r=Math.floor(Math.random()*(t+1));const n=e[t];e[t]=e[r];e[r]=n}}function stall$6(e){return new Promise((t=>{setTimeout(t,e)}))}function getTime$3(){return(new Date).getTime()}function stringify$2(e){return JSON.stringify(e,((e,t)=>{if(typeof t==="bigint"){return{type:"bigint",value:t.toString()}}return t}))}const defaultConfig$1={stallTimeout:400,priority:1,weight:1};const defaultState$1={blockNumber:-2,requests:0,lateResponses:0,errorResponses:0,outOfSync:-1,unsupportedEvents:0,rollingDuration:0,score:0,_network:null,_updateNumber:null,_totalTime:0,_lastFatalError:null,_lastFatalErrorTimestamp:0};async function waitForSync$1(e,t){while(e.blockNumber<0||e.blockNumber<t){if(!e._updateNumber){e._updateNumber=(async()=>{try{const t=await e.provider.getBlockNumber();if(t>e.blockNumber){e.blockNumber=t}}catch(t){e.blockNumber=-2;e._lastFatalError=t;e._lastFatalErrorTimestamp=getTime$3()}e._updateNumber=null})()}await e._updateNumber;e.outOfSync++;if(e._lastFatalError){break}}}function _normalize$1(e){if(e==null){return"null"}if(Array.isArray(e)){return"["+e.map(_normalize$1).join(",")+"]"}if(typeof e==="object"&&typeof e.toJSON==="function"){return _normalize$1(e.toJSON())}switch(typeof e){case"boolean":case"symbol":return e.toString();case"bigint":case"number":return BigInt(e).toString();case"string":return JSON.stringify(e);case"object":{const t=Object.keys(e);t.sort();return"{"+t.map((t=>`${JSON.stringify(t)}:${_normalize$1(e[t])}`)).join(",")+"}"}}console.log("Could not serialize",e);throw new Error("Hmm...")}function normalizeResult$1(e){if("error"in e){const t=e.error;return{tag:_normalize$1(t),value:t}}const t=e.result;return{tag:_normalize$1(t),value:t}}function checkQuorum$1(e,t){const r=new Map;for(const{value:e,tag:n,weight:i}of t){const t=r.get(n)||{value:e,weight:0};t.weight+=i;r.set(n,t)}let n=null;for(const t of r.values()){if(t.weight>=e&&(!n||t.weight>n.weight)){n=t}}if(n){return n.value}return undefined}function getMedian$1(e,t){let r=0;const n=new Map;let i=null;const s=[];for(const{value:e,tag:a,weight:o}of t){if(e instanceof Error){const t=n.get(a)||{value:e,weight:0};t.weight+=o;n.set(a,t);if(i==null||t.weight>i.weight){i=t}}else{s.push(BigInt(e));r+=o}}if(r<e){if(i&&i.weight>=e){return i.value}return undefined}s.sort(((e,t)=>e<t?-1:t>e?1:0));const a=Math.floor(s.length/2);if(s.length%2){return s[a]}return(s[a-1]+s[a]+BN_1$6)/BN_2$4}function getAnyResult$1(e,t){const r=checkQuorum$1(e,t);if(r!==undefined){return r}for(const e of t){if(e.value){return e.value}}return undefined}function getFuzzyMode$1(e,t){if(e===1){return getNumber$2(getMedian$1(e,t),"%internal")}const r=new Map;const n=(e,t)=>{const n=r.get(e)||{result:e,weight:0};n.weight+=t;r.set(e,n)};for(const{weight:e,value:r}of t){const t=getNumber$2(r);n(t-1,e);n(t,e);n(t+1,e)}let i=0;let s=undefined;for(const{weight:t,result:n}of r.values()){if(t>=e&&(t>i||s!=null&&t===i&&n>s)){i=t;s=n}}return s}class FallbackProvider$1 extends AbstractProvider$1{quorum;eventQuorum;eventWorkers;#Tt;#It;#Ct;constructor(e,t,r){super(t,r);this.#Tt=e.map((e=>{if(e instanceof AbstractProvider$1){return Object.assign({provider:e},defaultConfig$1,defaultState$1)}else{return Object.assign({},defaultConfig$1,e,defaultState$1)}}));this.#It=-2;this.#Ct=null;if(r&&r.quorum!=null){this.quorum=r.quorum}else{this.quorum=Math.ceil(this.#Tt.reduce(((e,t)=>{e+=t.weight;return e}),0)/2)}this.eventQuorum=1;this.eventWorkers=1;assertArgument$1(this.quorum<=this.#Tt.reduce(((e,t)=>e+t.weight),0),"quorum exceed provider wieght","quorum",this.quorum)}get providerConfigs(){return this.#Tt.map((e=>{const t=Object.assign({},e);for(const e in t){if(e[0]==="_"){delete t[e]}}return t}))}async _detectNetwork(){return Network$1.from(getBigInt$1(await this._perform({method:"chainId"})))}async _translatePerform(e,t){switch(t.method){case"broadcastTransaction":return await e.broadcastTransaction(t.signedTransaction);case"call":return await e.call(Object.assign({},t.transaction,{blockTag:t.blockTag}));case"chainId":return(await e.getNetwork()).chainId;case"estimateGas":return await e.estimateGas(t.transaction);case"getBalance":return await e.getBalance(t.address,t.blockTag);case"getBlock":{const r="blockHash"in t?t.blockHash:t.blockTag;return await e.getBlock(r,t.includeTransactions)}case"getBlockNumber":return await e.getBlockNumber();case"getCode":return await e.getCode(t.address,t.blockTag);case"getGasPrice":return(await e.getFeeData()).gasPrice;case"getPriorityFee":return(await e.getFeeData()).maxPriorityFeePerGas;case"getLogs":return await e.getLogs(t.filter);case"getStorage":return await e.getStorage(t.address,t.position,t.blockTag);case"getTransaction":return await e.getTransaction(t.hash);case"getTransactionCount":return await e.getTransactionCount(t.address,t.blockTag);case"getTransactionReceipt":return await e.getTransactionReceipt(t.hash);case"getTransactionResult":return await e.getTransactionResult(t.hash)}}#Pt(e){const t=Array.from(e).map((e=>e.config));const r=this.#Tt.slice();shuffle$1(r);r.sort(((e,t)=>e.priority-t.priority));for(const e of r){if(e._lastFatalError){continue}if(t.indexOf(e)===-1){return e}}return null}#Rt(e,t){const r=this.#Pt(e);if(r==null){return null}const n={config:r,result:null,didBump:false,perform:null,staller:null};const i=getTime$3();n.perform=(async()=>{try{r.requests++;const e=await this._translatePerform(r.provider,t);n.result={result:e}}catch(e){r.errorResponses++;n.result={error:e}}const e=getTime$3()-i;r._totalTime+=e;r.rollingDuration=.95*r.rollingDuration+.05*e;n.perform=null})();n.staller=(async()=>{await stall$6(r.stallTimeout);n.staller=null})();e.add(n);return n}async#Nt(){let e=this.#Ct;if(!e){const t=[];this.#Tt.forEach((e=>{t.push((async()=>{await waitForSync$1(e,0);if(!e._lastFatalError){e._network=await e.provider.getNetwork()}})())}));this.#Ct=e=(async()=>{await Promise.all(t);let e=null;for(const t of this.#Tt){if(t._lastFatalError){continue}const r=t._network;if(e==null){e=r.chainId}else if(r.chainId!==e){assert$q(false,"cannot mix providers on different networks","UNSUPPORTED_OPERATION",{operation:"new FallbackProvider"})}}})()}await e}async#kt(e,t){const r=[];for(const t of e){if(t.result!=null){const{tag:e,value:n}=normalizeResult$1(t.result);r.push({tag:e,value:n,weight:t.config.weight})}}if(r.reduce(((e,t)=>e+t.weight),0)<this.quorum){return undefined}switch(t.method){case"getBlockNumber":{if(this.#It===-2){this.#It=Math.ceil(getNumber$2(getMedian$1(this.quorum,this.#Tt.filter((e=>!e._lastFatalError)).map((e=>({value:e.blockNumber,tag:getNumber$2(e.blockNumber).toString(),weight:e.weight}))))))}const e=getFuzzyMode$1(this.quorum,r);if(e===undefined){return undefined}if(e>this.#It){this.#It=e}return this.#It}case"getGasPrice":case"getPriorityFee":case"estimateGas":return getMedian$1(this.quorum,r);case"getBlock":if("blockTag"in t&&t.blockTag==="pending"){return getAnyResult$1(this.quorum,r)}return checkQuorum$1(this.quorum,r);case"call":case"chainId":case"getBalance":case"getTransactionCount":case"getCode":case"getStorage":case"getTransaction":case"getTransactionReceipt":case"getLogs":return checkQuorum$1(this.quorum,r);case"broadcastTransaction":return getAnyResult$1(this.quorum,r)}assert$q(false,"unsupported method","UNSUPPORTED_OPERATION",{operation:`_perform(${stringify$2(t.method)})`})}async#Ot(e,t){if(e.size===0){throw new Error("no runners?!")}const r=[];let n=0;for(const t of e){if(t.perform){r.push(t.perform)}if(t.staller){r.push(t.staller);continue}if(t.didBump){continue}t.didBump=true;n++}const i=await this.#kt(e,t);if(i!==undefined){if(i instanceof Error){throw i}return i}for(let r=0;r<n;r++){this.#Rt(e,t)}assert$q(r.length>0,"quorum not met","SERVER_ERROR",{request:"%sub-requests",info:{request:t,results:Array.from(e).map((e=>stringify$2(e.result)))}});await Promise.race(r);return await this.#Ot(e,t)}async _perform(e){if(e.method==="broadcastTransaction"){const t=this.#Tt.map((e=>null));const r=this.#Tt.map((async({provider:r,weight:n},i)=>{try{const s=await r._perform(e);t[i]=Object.assign(normalizeResult$1({result:s}),{weight:n})}catch(e){t[i]=Object.assign(normalizeResult$1({error:e}),{weight:n})}}));while(true){const e=t.filter((e=>e!=null));for(const{value:t}of e){if(!(t instanceof Error)){return t}}const n=checkQuorum$1(this.quorum,t.filter((e=>e!=null)));if(isError$1(n,"INSUFFICIENT_FUNDS")){throw n}const i=r.filter(((e,r)=>t[r]==null));if(i.length===0){break}await Promise.race(i)}const n=getAnyResult$1(this.quorum,t);assert$q(n!==undefined,"problem multi-broadcasting","SERVER_ERROR",{request:"%sub-requests",info:{request:e,results:t.map(stringify$2)}});if(n instanceof Error){throw n}return n}await this.#Nt();const t=new Set;let r=0;while(true){const n=this.#Rt(t,e);if(n==null){break}r+=n.config.weight;if(r>=this.quorum){break}}const n=await this.#Ot(t,e);for(const e of t){if(e.perform&&e.result==null){e.config.lateResponses++}}return n}async destroy(){for(const{provider:e}of this.#Tt){e.destroy()}super.destroy()}}function isWebSocketLike$1(e){return e&&typeof e.send==="function"&&typeof e.close==="function"}const Testnets$1="goerli kovan sepolia classicKotti optimism-goerli arbitrum-goerli matic-mumbai bnbt".split(" ");function getDefaultProvider$1(e,t){if(t==null){t={}}const r=e=>{if(t[e]==="-"){return false}if(typeof t.exclusive==="string"){return e===t.exclusive}if(Array.isArray(t.exclusive)){return t.exclusive.indexOf(e)!==-1}return true};if(typeof e==="string"&&e.match(/^https?:/)){return new JsonRpcProvider$1(e)}if(typeof e==="string"&&e.match(/^wss?:/)||isWebSocketLike$1(e)){return new WebSocketProvider$1(e)}let n=null;try{n=Network$1.from(e)}catch(e){}const i=[];if(r("publicPolygon")&&n){if(n.name==="matic"){i.push(new JsonRpcProvider$1("https://polygon-rpc.com/",n,{staticNetwork:n}))}}if(r("alchemy")){try{i.push(new AlchemyProvider$1(e,t.alchemy))}catch(e){}}if(r("ankr")&&t.ankr!=null){try{i.push(new AnkrProvider$1(e,t.ankr))}catch(e){}}if(r("cloudflare")){try{i.push(new CloudflareProvider$1(e))}catch(e){}}if(r("etherscan")){try{i.push(new EtherscanProvider$1(e,t.etherscan))}catch(e){}}if(r("infura")){try{let r=t.infura;let n=undefined;if(typeof r==="object"){n=r.projectSecret;r=r.projectId}i.push(new InfuraProvider$1(e,r,n))}catch(e){}}if(r("quicknode")){try{let r=t.quicknode;i.push(new QuickNodeProvider$1(e,r))}catch(e){}}assert$q(i.length,"unsupported default network","UNSUPPORTED_OPERATION",{operation:"getDefaultProvider"});if(i.length===1){return i[0]}let s=Math.floor(i.length/2);if(s>2){s=2}if(n&&Testnets$1.indexOf(n.name)!==-1){s=1}if(t&&t.quorum){s=t.quorum}return new FallbackProvider$1(i,undefined,{quorum:s})}class NonceManager$1 extends AbstractSigner$1{signer;#xt;#Bt;constructor(e){super(e.provider);defineProperties$1(this,{signer:e});this.#xt=null;this.#Bt=0}async getAddress(){return this.signer.getAddress()}connect(e){return new NonceManager$1(this.signer.connect(e))}async getNonce(e){if(e==="pending"){if(this.#xt==null){this.#xt=super.getNonce("pending")}const e=this.#Bt;return await this.#xt+e}return super.getNonce(e)}increment(){this.#Bt++}reset(){this.#Bt=0;this.#xt=null}async sendTransaction(e){const t=this.getNonce("pending");this.increment();e=await this.signer.populateTransaction(e);e.nonce=await t;return await this.signer.sendTransaction(e)}signTransaction(e){return this.signer.signTransaction(e)}signMessage(e){return this.signer.signMessage(e)}signTypedData(e,t,r){return this.signer.signTypedData(e,t,r)}}class BrowserProvider$1 extends JsonRpcApiPollingProvider$1{#E;constructor(e,t){super(t,{batchMaxCount:1});this.#E=async(t,r)=>{const n={method:t,params:r};this.emit("debug",{action:"sendEip1193Request",payload:n});try{const t=await e.request(n);this.emit("debug",{action:"receiveEip1193Result",result:t});return t}catch(e){const t=new Error(e.message);t.code=e.code;t.data=e.data;t.payload=n;this.emit("debug",{action:"receiveEip1193Error",error:t});throw t}}}async send(e,t){await this._start();return await super.send(e,t)}async _send(e){assertArgument$1(!Array.isArray(e),"EIP-1193 does not support batch request","payload",e);try{const t=await this.#E(e.method,e.params||[]);return[{id:e.id,result:t}]}catch(t){return[{id:e.id,error:{code:t.code,data:t.data,message:t.message}}]}}getRpcError(e,t){t=JSON.parse(JSON.stringify(t));switch(t.error.code||-1){case 4001:t.error.message=`ethers-user-denied: ${t.error.message}`;break;case 4200:t.error.message=`ethers-unsupported: ${t.error.message}`;break}return super.getRpcError(e,t)}async hasSigner(e){if(e==null){e=0}const t=await this.send("eth_accounts",[]);if(typeof e==="number"){return t.length>e}e=e.toLowerCase();return t.filter((t=>t.toLowerCase()===e)).length!==0}async getSigner(e){if(e==null){e=0}if(!await this.hasSigner(e)){try{await this.#E("eth_requestAccounts",[])}catch(e){const t=e.payload;throw this.getRpcError(t,{id:t.id,error:e})}}return await super.getSigner(e)}}const defaultApplicationId$1="62e1ad51b37b8e00394bda3b";function getHost$5(e){switch(e){case"mainnet":return"eth-mainnet.gateway.pokt.network";case"goerli":return"eth-goerli.gateway.pokt.network";case"matic":return"poly-mainnet.gateway.pokt.network";case"matic-mumbai":return"polygon-mumbai-rpc.gateway.pokt.network"}assertArgument$1(false,"unsupported network","network",e)}class PocketProvider$1 extends JsonRpcProvider$1{applicationId;applicationSecret;constructor(e,t,r){if(e==null){e="mainnet"}const n=Network$1.from(e);if(t==null){t=defaultApplicationId$1}if(r==null){r=null}const i={staticNetwork:n};const s=PocketProvider$1.getRequest(n,t,r);super(s,n,i);defineProperties$1(this,{applicationId:t,applicationSecret:r})}_getProvider(e){try{return new PocketProvider$1(e,this.applicationId,this.applicationSecret)}catch(e){}return super._getProvider(e)}static getRequest(e,t,r){if(t==null){t=defaultApplicationId$1}const n=new FetchRequest$1(`https://${getHost$5(e.name)}/v1/lb/${t}`);n.allowGzip=true;if(r){n.setCredentials("",r)}if(t===defaultApplicationId$1){n.retryFunc=async(e,t,r)=>{showThrottleMessage$1("PocketProvider");return true}}return n}isCommunityResource(){return this.applicationId===defaultApplicationId$1}}const IpcSocketProvider$1=undefined;class BaseWallet$1 extends AbstractSigner$1{address;#Dt;constructor(e,t){super(t);assertArgument$1(e&&typeof e.sign==="function","invalid private key","privateKey","[ REDACTED ]");this.#Dt=e;const r=computeAddress$1(this.signingKey.publicKey);defineProperties$1(this,{address:r})}get signingKey(){return this.#Dt}get privateKey(){return this.signingKey.privateKey}async getAddress(){return this.address}connect(e){return new BaseWallet$1(this.#Dt,e)}async signTransaction(e){const{to:t,from:r}=await resolveProperties$1({to:e.to?resolveAddress$1(e.to,this.provider):undefined,from:e.from?resolveAddress$1(e.from,this.provider):undefined});if(t!=null){e.to=t}if(r!=null){e.from=r}if(e.from!=null){assertArgument$1(getAddress$1(e.from)===this.address,"transaction from address mismatch","tx.from",e.from);delete e.from}const n=Transaction$4.from(e);n.signature=this.signingKey.sign(n.unsignedHash);return n.serialized}async signMessage(e){return this.signMessageSync(e)}signMessageSync(e){return this.signingKey.sign(hashMessage$1(e)).serialized}async signTypedData(e,t,r){const n=await TypedDataEncoder$1.resolveNames(e,t,r,(async e=>{assert$q(this.provider!=null,"cannot resolve ENS names without a provider","UNSUPPORTED_OPERATION",{operation:"resolveName",info:{name:e}});const t=await this.provider.resolveName(e);assert$q(t!=null,"unconfigured ENS name","UNCONFIGURED_NAME",{value:e});return t}));return this.signingKey.sign(TypedDataEncoder$1.hash(n.domain,t,n.value)).serialized}}const subsChrs$1=" !#$%&'()*+,-./<=>?@[]^_`{|}~";const Word$1=/^[a-z]*$/i;function unfold$1(e,t){let r=97;return e.reduce(((e,n)=>{if(n===t){r++}else if(n.match(Word$1)){e.push(String.fromCharCode(r)+n)}else{r=97;e.push(n)}return e}),[])}function decode$d(e,t){for(let r=subsChrs$1.length-1;r>=0;r--){e=e.split(subsChrs$1[r]).join(t.substring(2*r,2*r+2))}const r=[];const n=e.replace(/(:|([0-9])|([A-Z][a-z]*))/g,((e,t,n,i)=>{if(n){for(let e=parseInt(n);e>=0;e--){r.push(";")}}else{r.push(t.toLowerCase())}return""}));if(n){throw new Error(`leftovers: ${JSON.stringify(n)}`)}return unfold$1(unfold$1(r,";"),":")}function decodeOwl$1(e){assertArgument$1(e[0]==="0","unsupported auwl data","data",e);return decode$d(e.substring(1+2*subsChrs$1.length),e.substring(1,1+2*subsChrs$1.length))}class Wordlist$1{locale;constructor(e){defineProperties$1(this,{locale:e})}split(e){return e.toLowerCase().split(/\s+/g)}join(e){return e.join(" ")}}class WordlistOwl$1 extends Wordlist$1{#O;#Mt;constructor(e,t,r){super(e);this.#O=t;this.#Mt=r;this.#Ut=null}get _data(){return this.#O}_decodeWords(){return decodeOwl$1(this.#O)}#Ut;#Lt(){if(this.#Ut==null){const e=this._decodeWords();const t=id$1(e.join("\n")+"\n");if(t!==this.#Mt){throw new Error(`BIP39 Wordlist for ${this.locale} FAILED`)}this.#Ut=e}return this.#Ut}getWord(e){const t=this.#Lt();assertArgument$1(e>=0&&e<t.length,`invalid word index: ${e}`,"index",e);return t[e]}getWordIndex(e){return this.#Lt().indexOf(e)}}const words$1="0erleonalorenseinceregesticitStanvetearctssi#ch2Athck&tneLl0And#Il.yLeOutO=S|S%b/ra@SurdU'0Ce[Cid|CountCu'Hie=IdOu,-Qui*Ro[TT]T%T*[Tu$0AptDD-tD*[Ju,M.UltV<)Vi)0Rob-0FairF%dRaid0A(EEntRee0Ead0MRRp%tS!_rmBumCoholErtI&LLeyLowMo,O}PhaReadySoT Ways0A>urAz(gOngOuntU'd0Aly,Ch%Ci|G G!GryIm$K!Noun)Nu$O` Sw T&naTiqueXietyY1ArtOlogyPe?P!Pro=Ril1ChCt-EaEnaGueMMedM%MyOundR<+Re,Ri=RowTTefa@Ti,Tw%k0KPe@SaultSetSi,SumeThma0H!>OmTa{T&dT.udeTra@0Ct]D.Gu,NtTh%ToTumn0Era+OcadoOid0AkeA*AyEsomeFulKw?d0Is:ByChel%C#D+GL<)Lc#y~MbooN<aNn RRelyRga(R*lSeS-SketTt!3A^AnAutyCau'ComeEfF%eG(Ha=H(dLie=LowLtN^Nef./TrayTt Twe&Y#d3Cyc!DKeNdOlogyRdR`Tt _{AdeAmeAnketA,EakE[IndOodO[omOu'UeUrUsh_rdAtDyIlMbNeNusOkO,Rd R(gRrowSsTtomUn)XY_{etA(AndA[A=EadEezeI{Id+IefIghtIngIskOccoliOk&OnzeOomO` OwnUsh2Bb!DdyD+tFf$oIldLbLkL!tNd!Nk Rd&Rg R,SS(e[SyTt Y Zz:Bba+B(B!CtusGeKe~LmM aMpNN$N)lNdyNn#NoeNvasNy#Pab!P.$Pta(RRb#RdRgoRpetRryRtSeShS(o/!Su$TT$ogT^Teg%yTt!UghtU'Ut]Ve3Il(gL yM|NsusNturyRe$Rta(_irAlkAmp]An+AosApt Ar+A'AtEapE{Ee'EfErryE,I{&IefIldIm}yOi)Oo'R#-U{!UnkUrn0G?Nnam#Rc!Tiz&TyVil_imApArifyAwAyE<ErkEv I{I|IffImbIn-IpO{OgO'O`OudOwnUbUmpU, Ut^_^A,C#utDeFfeeIlInL!@L%LumnMb(eMeMf%tM-Mm#Mp<yNc tNdu@NfirmNg*[N}@Nsid NtrolNv()OkOlPp PyR$ReRnR*@/Tt#U^UntryUp!Ur'Us(V Yo>_{Ad!AftAmA}AshAt AwlAzyEamEd.EekEwI{etImeIspIt-OpO[Ou^OwdUci$UelUi'Umb!Un^UshYY,$2BeLtu*PPbo?dRiousRr|Rta(R=Sh]/omTe3C!:DMa+MpN)Ng R(gShUght WnY3AlBa>BrisCadeCemb CideCl(eC%a>C*a'ErF&'F(eFyG*eLayLiv M<dMi'Ni$Nti,NyP?tP&dPos.P`PutyRi=ScribeS tSignSkSpair/royTailTe@VelopVi)Vo>3AgramAlAm#dAryCeE'lEtFf G.$Gn.yLemmaNn NosaurRe@RtSag*eScov Sea'ShSmi[S%d Splay/<)V tVideV%)Zzy5Ct%Cum|G~Lph(Ma(Na>NkeyN%OrSeUb!Ve_ftAg#AmaA,-AwEamE[IftIllInkIpI=OpUmY2CkMbNeR(g/T^Ty1Arf1Nam-:G G!RlyRnR`Sily/Sy1HoOlogyOnomy0GeItUca>1F%t0G1GhtTh 2BowD E@r-Eg<tEm|Eph<tEvat%I>Se0B?kBodyBra)Er+Ot]PloyPow Pty0Ab!A@DD![D%'EmyErgyF%)Ga+G(eH<)JoyLi,OughR-hRollSu*T Ti*TryVelope1Isode0U$Uip0AA'OdeOs]R%Upt0CapeSayS&)Ta>0Ern$H-s1Id&)IlOkeOl=1A@Amp!Ce[Ch<+C.eCludeCu'Ecu>Erci'Hau,Hib.I!I,ItOt-P<dPe@Pi*Pla(Po'P*[T&dTra0EEbrow:Br-CeCultyDeIntI`~L'MeMilyMousNNcyNtasyRmSh]TT$Th TigueUltV%.e3Atu*Bru?yD $EEdElMa!N)/iv$T^V W3B Ct]EldGu*LeLmLt N$NdNeNg NishReRmR,Sc$ShTT}[X_gAmeAshAtAv%EeIghtIpOatO{O%Ow UidUshY_mCusGIlLd~owOdOtR)Re,R+tRkRtu}RumRw?dSsil/ UndX_gi!AmeEqu|EshI&dIn+OgOntO,OwnOz&U.2ElNNnyRna)RyTu*:D+tInLaxy~ yMePRa+Rba+Rd&Rl-Rm|SSpTeTh U+Ze3N $NiusN*Nt!Nu(e/u*2O,0AntFtGg!Ng RaffeRlVe_dAn)A*A[IdeImp'ObeOomOryO=OwUe_tDde[LdOdO'RillaSpelSsipV nWn_bA)A(AntApeA[Av.yEatE&IdIefItOc yOupOwUnt_rdE[IdeIltIt?N3M:B.IrLfMm M, NdPpyRb%RdRshR=,TVeWkZ?d3AdAl`ArtAvyD+hogIght~oLmetLpNRo3Dd&Gh~NtPRe/%y5BbyCkeyLdLeLiday~owMeNeyOdPeRnRr%R'Sp.$/TelUrV 5BGeM<Mb!M%Nd*dNgryNtRd!RryRtSb<d3Brid:1EOn0EaEntifyLe2N%e4LLeg$L}[0A+Ita>M&'Mu}Pa@Po'Pro=Pul'0ChCludeComeC*a'DexD-a>Do%Du,ryF<tFl-tF%mHa!H .Iti$Je@JuryMa>N Noc|PutQuiryS<eSe@SideSpi*/$lTa@T e,ToVe,V.eVol=3On0L<dOla>Sue0Em1Ory:CketGu?RZz3AlousAns~yWel9BInKeUr}yY5D+I)MpNg!Ni%Nk/:Ng?oo3EnEpT^upY3CkDD}yNdNgdomSsTT^&TeTt&Wi4EeIfeO{Ow:BBelB%Dd DyKeMpNgua+PtopR+T T(UghUndryVaWWnWsu.Y Zy3Ad AfArnA=Ctu*FtGG$G&dIsu*M#NdNg`NsOp?dSs#Tt Vel3ArB tyBr?yC&'FeFtGhtKeMbM.NkOnQuid/Tt!VeZ?d5AdAnB, C$CkG-NelyNgOpTt yUdUn+VeY$5CkyGga+Mb N?N^Xury3R-s:Ch(eDG-G}tIdIlInJ%KeMm$NNa+Nda>NgoNs]Nu$P!Rb!R^Rg(R(eRketRria+SkSs/ T^T i$ThTrixTt XimumZe3AdowAnAsu*AtCh<-D$DiaLodyLtMb M%yNt]NuRcyR+R.RryShSsa+T$Thod3Dd!DnightLk~]M-NdNimumN%Nu>Rac!Rr%S ySs/akeXXedXtu*5Bi!DelDifyMM|N.%NkeyN, N`OnR$ReRn(gSqu.oTh T]T%Unta(U'VeVie5ChFf(LeLtiplySc!SeumShroomS-/Tu$3Self/ yTh:I=MePk(Rrow/yT]Tu*3ArCkEdGati=G!@I` PhewR=/TTw%kUtr$V WsXt3CeGht5B!I'M(eeOd!Rm$R`SeTab!TeTh(gTi)VelW5C!?Mb R'T:K0EyJe@Li+Scu*S =Ta(Vious0CurE<Tob 0Or1FF Fi)T&2L1Ay0DI=Ymp-0It0CeEI#L(eLy1EnEraIn]Po'T]1An+B.Ch?dD D(?yG<I|Ig($Ph<0Tr-h0H 0Tdo%T TputTside0AlEnEr0NN 0Yg&0/ 0O}:CtDd!GeIrLa)LmNdaNelN-N` P RadeR|RkRrotRtySsT^ThTi|TrolTt nU'VeYm|3A)AnutArAs<tL-<NN$tyNcilOp!Pp Rfe@Rm.Rs#T2O}OtoRa'Ys-$0AnoCn-Ctu*E)GGe#~LotNkO} Pe/olT^Zza_)A}tA,-A>AyEa'Ed+U{UgUn+2EmEtIntL?LeLi)NdNyOlPul?Rt]S.]Ssib!/TatoTt yV tyWd W _@i)Ai'Ed-tEf Epa*Es|EttyEv|I)IdeIm?yIntI%.yIs#Iva>IzeOb!mO)[Odu)Of.OgramOje@Omo>OofOp tyOsp O>@OudOvide2Bl-Dd(g~LpL'Mpk(N^PilPpyR^a'R.yRpo'R'ShTZz!3Ramid:99Al.yAntumArt E,]I{ItIzO>:Bb.Cco#CeCkD?DioIlInI'~yMpN^NdomN+PidReTeTh V&WZ%3AdyAlAs#BelBuildC$lCei=CipeC%dCyc!Du)F!@F%mFu'G]G*tGul?Je@LaxLea'LiefLyMa(Memb M(dMo=Nd NewNtOp&PairPeatPla)P%tQui*ScueSemb!Si,Sour)Sp#'SultTi*T*atTurnUn]Ve$ViewW?d2Y`m0BBb#CeChDeD+F!GhtGidNgOtPp!SkTu$V$V 5AdA,BotBu,CketM<)OfOkieOmSeTa>UghUndU>Y$5Bb DeGLeNNwayR$:DDd!D}[FeIlLadLm#L#LtLu>MeMp!NdTisfyToshiU)Usa+VeY1A!AnA*Att E}HemeHoolI&)I[%sOrp]OutRapRe&RiptRub1AAr^As#AtC#dC*tCt]Cur.yEdEkGm|Le@~M(?Ni%N'Nt&)RiesRvi)Ss]Tt!TupV&_dowAftAllowA*EdEllEriffIeldIftI}IpIv O{OeOotOpOrtOuld O=RimpRugUff!Y0Bl(gCkDeE+GhtGnL|Lk~yLv Mil?Mp!N)NgR&/ Tua>XZe1A>Et^IIllInIrtUll0AbAmEepEnd I)IdeIghtImOg<OtOwUsh0AllArtI!OkeOo`0A{AkeApIffOw0ApCc Ci$CkDaFtL?Ldi LidLut]L=Me#eNgOnRryRtUlUndUpUr)U`0A)A*Ati$AwnEakEci$EedEllEndH eI)Id IkeInIr.L.OilOns%O#OrtOtRayReadR(gY0Ua*UeezeUir*l_b!AdiumAffA+AirsAmpAndArtA>AyEakEelEmEpE*oI{IllIngO{Oma^O}OolOryO=Ra>gyReetRikeR#gRugg!Ud|UffUmb!Y!0Bje@Bm.BwayC)[ChDd&Ff G?G+,ItMm NNnyN'tP PplyP*meReRfa)R+Rpri'RroundR=ySpe@/a(1AllowAmpApArmE?EetIftImIngIt^Ord1MbolMptomRup/em:B!Ck!GIlL|LkNkPeR+tSk/eTtooXi3A^Am~NN<tNnisNtRm/Xt_nkAtEmeEnE%yE*EyIngIsOughtReeRi=RowUmbUnd 0CketDeG LtMb MeNyPRedSsueT!5A,BaccoDayDdl EGe` I!tK&MatoM%rowNeNgueNightOlO`PP-Pp!R^RnadoRtoi'SsT$Uri,W?dW WnY_{AdeAff-Ag-A(Ansf ApAshA=lAyEatEeEndI$IbeI{Igg ImIpOphyOub!U{UeUlyUmpetU,U`Y2BeIt]Mb!NaN}lRkeyRnRt!1El=EntyI)InI,O1PeP-$:5Ly5B*lla0Ab!Awa*C!Cov D DoFairFoldHappyIf%mIqueItIv 'KnownLo{TilUsu$Veil1Da>GradeHoldOnP Set1B<Ge0A+EEdEfulE![U$0Il.y:C<tCuumGueLidL!yL=NNishP%Rious/Ult3H-!L=tNd%Ntu*NueRbRifyRs]RyS'lT <3Ab!Br<tCiousCt%yDeoEw~a+Nta+Ol(Rtu$RusSaS.Su$T$Vid5C$I)IdLc<oLumeTeYa+:GeG#ItLk~LnutNtRfa*RmRri%ShSp/eT VeY3Al`Ap#ArA'lA` BDd(gEk&dIrdLcome/T_!AtEatEelEnE*IpIsp 0DeD`FeLd~NNdowNeNgNkNn Nt ReSdomSeShT}[5LfM<Nd OdOlRdRkRldRryR`_pE{E,!I,I>Ong::Rd3Ar~ow9UUngU`:3BraRo9NeO";const checksum$1="0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60";let wordlist$1=null;class LangEn$1 extends WordlistOwl$1{constructor(){super("en",words$1,checksum$1)}static wordlist(){if(wordlist$1==null){wordlist$1=new LangEn$1}return wordlist$1}}function getUpperMask$1(e){return(1<<e)-1<<8-e&255}function getLowerMask$1(e){return(1<<e)-1&255}function mnemonicToEntropy$1(e,t){assertNormalize$1("NFKD");if(t==null){t=LangEn$1.wordlist()}const r=t.split(e);assertArgument$1(r.length%3===0&&r.length>=12&&r.length<=24,"invalid mnemonic length","mnemonic","[ REDACTED ]");const n=new Uint8Array(Math.ceil(11*r.length/8));let i=0;for(let e=0;e<r.length;e++){let s=t.getWordIndex(r[e].normalize("NFKD"));assertArgument$1(s>=0,`invalid mnemonic word at index ${e}`,"mnemonic","[ REDACTED ]");for(let e=0;e<11;e++){if(s&1<<10-e){n[i>>3]|=1<<7-i%8}i++}}const s=32*r.length/3;const a=r.length/3;const o=getUpperMask$1(a);const f=getBytes$1(sha256$5(n.slice(0,s/8)))[0]&o;assertArgument$1(f===(n[n.length-1]&o),"invalid mnemonic checksum","mnemonic","[ REDACTED ]");return hexlify$1(n.slice(0,s/8))}function entropyToMnemonic$1(e,t){assertArgument$1(e.length%4===0&&e.length>=16&&e.length<=32,"invalid entropy size","entropy","[ REDACTED ]");if(t==null){t=LangEn$1.wordlist()}const r=[0];let n=11;for(let t=0;t<e.length;t++){if(n>8){r[r.length-1]<<=8;r[r.length-1]|=e[t];n-=8}else{r[r.length-1]<<=n;r[r.length-1]|=e[t]>>8-n;r.push(e[t]&getLowerMask$1(8-n));n+=3}}const i=e.length/4;const s=parseInt(sha256$5(e).substring(2,4),16)&getUpperMask$1(i);r[r.length-1]<<=i;r[r.length-1]|=s>>8-i;return t.join(r.map((e=>t.getWord(e))))}const _guard$7={};class Mnemonic$1{phrase;password;wordlist;entropy;constructor(e,t,r,n,i){if(n==null){n=""}if(i==null){i=LangEn$1.wordlist()}assertPrivate$1(e,_guard$7,"Mnemonic");defineProperties$1(this,{phrase:r,password:n,wordlist:i,entropy:t})}computeSeed(){const e=toUtf8Bytes$1("mnemonic"+this.password,"NFKD");return pbkdf2$3(toUtf8Bytes$1(this.phrase,"NFKD"),e,2048,64,"sha512")}static fromPhrase(e,t,r){const n=mnemonicToEntropy$1(e,r);e=entropyToMnemonic$1(getBytes$1(n),r);return new Mnemonic$1(_guard$7,n,e,t,r)}static fromEntropy(e,t,r){const n=getBytes$1(e,"entropy");const i=entropyToMnemonic$1(n,r);return new Mnemonic$1(_guard$7,hexlify$1(n),i,t,r)}static entropyToPhrase(e,t){const r=getBytes$1(e,"entropy");return entropyToMnemonic$1(r,t)}static phraseToEntropy(e,t){return mnemonicToEntropy$1(e,t)}static isValidMnemonic(e,t){try{mnemonicToEntropy$1(e,t);return true}catch(e){}return false}}
/*! MIT License. Copyright 2015-2022 Richard Moore <me@ricmoo.com>. See LICENSE.txt. */var __classPrivateFieldGet$6=undefined&&undefined.__classPrivateFieldGet||function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t==="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)};var __classPrivateFieldSet$6=undefined&&undefined.__classPrivateFieldSet||function(e,t,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t==="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(e,r):i?i.value=r:t.set(e,r),r};var _AES_key$1,_AES_Kd$1,_AES_Ke$1;const numberOfRounds$1={16:10,24:12,32:14};const rcon$1=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145];const S$1=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22];const Si$1=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125];const T1$2=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986];const T2$1=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766];const T3$1=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126];const T4$1=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436];const T5$1=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890];const T6$1=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935];const T7$1=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600];const T8$1=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480];const U1$1=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795];const U2$1=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855];const U3$1=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150];const U4$1=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function convertToInt32$1(e){const t=[];for(let r=0;r<e.length;r+=4){t.push(e[r]<<24|e[r+1]<<16|e[r+2]<<8|e[r+3])}return t}class AES$2{get key(){return __classPrivateFieldGet$6(this,_AES_key$1,"f").slice()}constructor(e){_AES_key$1.set(this,void 0);_AES_Kd$1.set(this,void 0);_AES_Ke$1.set(this,void 0);if(!(this instanceof AES$2)){throw Error("AES must be instanitated with `new`")}__classPrivateFieldSet$6(this,_AES_key$1,new Uint8Array(e),"f");const t=numberOfRounds$1[this.key.length];if(t==null){throw new TypeError("invalid key size (must be 16, 24 or 32 bytes)")}__classPrivateFieldSet$6(this,_AES_Ke$1,[],"f");__classPrivateFieldSet$6(this,_AES_Kd$1,[],"f");for(let e=0;e<=t;e++){__classPrivateFieldGet$6(this,_AES_Ke$1,"f").push([0,0,0,0]);__classPrivateFieldGet$6(this,_AES_Kd$1,"f").push([0,0,0,0])}const r=(t+1)*4;const n=this.key.length/4;const i=convertToInt32$1(this.key);let s;for(let e=0;e<n;e++){s=e>>2;__classPrivateFieldGet$6(this,_AES_Ke$1,"f")[s][e%4]=i[e];__classPrivateFieldGet$6(this,_AES_Kd$1,"f")[t-s][e%4]=i[e]}let a=0;let o=n,f;while(o<r){f=i[n-1];i[0]^=S$1[f>>16&255]<<24^S$1[f>>8&255]<<16^S$1[f&255]<<8^S$1[f>>24&255]^rcon$1[a]<<24;a+=1;if(n!=8){for(let e=1;e<n;e++){i[e]^=i[e-1]}}else{for(let e=1;e<n/2;e++){i[e]^=i[e-1]}f=i[n/2-1];i[n/2]^=S$1[f&255]^S$1[f>>8&255]<<8^S$1[f>>16&255]<<16^S$1[f>>24&255]<<24;for(let e=n/2+1;e<n;e++){i[e]^=i[e-1]}}let e=0,s,c;while(e<n&&o<r){s=o>>2;c=o%4;__classPrivateFieldGet$6(this,_AES_Ke$1,"f")[s][c]=i[e];__classPrivateFieldGet$6(this,_AES_Kd$1,"f")[t-s][c]=i[e++];o++}}for(let e=1;e<t;e++){for(let t=0;t<4;t++){f=__classPrivateFieldGet$6(this,_AES_Kd$1,"f")[e][t];__classPrivateFieldGet$6(this,_AES_Kd$1,"f")[e][t]=U1$1[f>>24&255]^U2$1[f>>16&255]^U3$1[f>>8&255]^U4$1[f&255]}}}encrypt(e){if(e.length!=16){throw new TypeError("invalid plaintext size (must be 16 bytes)")}const t=__classPrivateFieldGet$6(this,_AES_Ke$1,"f").length-1;const r=[0,0,0,0];let n=convertToInt32$1(e);for(let e=0;e<4;e++){n[e]^=__classPrivateFieldGet$6(this,_AES_Ke$1,"f")[0][e]}for(let e=1;e<t;e++){for(let t=0;t<4;t++){r[t]=T1$2[n[t]>>24&255]^T2$1[n[(t+1)%4]>>16&255]^T3$1[n[(t+2)%4]>>8&255]^T4$1[n[(t+3)%4]&255]^__classPrivateFieldGet$6(this,_AES_Ke$1,"f")[e][t]}n=r.slice()}const i=new Uint8Array(16);let s=0;for(let e=0;e<4;e++){s=__classPrivateFieldGet$6(this,_AES_Ke$1,"f")[t][e];i[4*e]=(S$1[n[e]>>24&255]^s>>24)&255;i[4*e+1]=(S$1[n[(e+1)%4]>>16&255]^s>>16)&255;i[4*e+2]=(S$1[n[(e+2)%4]>>8&255]^s>>8)&255;i[4*e+3]=(S$1[n[(e+3)%4]&255]^s)&255}return i}decrypt(e){if(e.length!=16){throw new TypeError("invalid ciphertext size (must be 16 bytes)")}const t=__classPrivateFieldGet$6(this,_AES_Kd$1,"f").length-1;const r=[0,0,0,0];let n=convertToInt32$1(e);for(let e=0;e<4;e++){n[e]^=__classPrivateFieldGet$6(this,_AES_Kd$1,"f")[0][e]}for(let e=1;e<t;e++){for(let t=0;t<4;t++){r[t]=T5$1[n[t]>>24&255]^T6$1[n[(t+3)%4]>>16&255]^T7$1[n[(t+2)%4]>>8&255]^T8$1[n[(t+1)%4]&255]^__classPrivateFieldGet$6(this,_AES_Kd$1,"f")[e][t]}n=r.slice()}const i=new Uint8Array(16);let s=0;for(let e=0;e<4;e++){s=__classPrivateFieldGet$6(this,_AES_Kd$1,"f")[t][e];i[4*e]=(Si$1[n[e]>>24&255]^s>>24)&255;i[4*e+1]=(Si$1[n[(e+3)%4]>>16&255]^s>>16)&255;i[4*e+2]=(Si$1[n[(e+2)%4]>>8&255]^s>>8)&255;i[4*e+3]=(Si$1[n[(e+1)%4]&255]^s)&255}return i}}_AES_key$1=new WeakMap,_AES_Kd$1=new WeakMap,_AES_Ke$1=new WeakMap;class ModeOfOperation$1{constructor(e,t,r){if(r&&!(this instanceof r)){throw new Error(`${e} must be instantiated with "new"`)}Object.defineProperties(this,{aes:{enumerable:true,value:new AES$2(t)},name:{enumerable:true,value:e}})}}var __classPrivateFieldSet$5=undefined&&undefined.__classPrivateFieldSet||function(e,t,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t==="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet$5=undefined&&undefined.__classPrivateFieldGet||function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t==="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)};var _CBC_iv$1,_CBC_lastBlock$1;class CBC$1 extends ModeOfOperation$1{constructor(e,t){super("ECC",e,CBC$1);_CBC_iv$1.set(this,void 0);_CBC_lastBlock$1.set(this,void 0);if(t){if(t.length%16){throw new TypeError("invalid iv size (must be 16 bytes)")}__classPrivateFieldSet$5(this,_CBC_iv$1,new Uint8Array(t),"f")}else{__classPrivateFieldSet$5(this,_CBC_iv$1,new Uint8Array(16),"f")}__classPrivateFieldSet$5(this,_CBC_lastBlock$1,this.iv,"f")}get iv(){return new Uint8Array(__classPrivateFieldGet$5(this,_CBC_iv$1,"f"))}encrypt(e){if(e.length%16){throw new TypeError("invalid plaintext size (must be multiple of 16 bytes)")}const t=new Uint8Array(e.length);for(let r=0;r<e.length;r+=16){for(let t=0;t<16;t++){__classPrivateFieldGet$5(this,_CBC_lastBlock$1,"f")[t]^=e[r+t]}__classPrivateFieldSet$5(this,_CBC_lastBlock$1,this.aes.encrypt(__classPrivateFieldGet$5(this,_CBC_lastBlock$1,"f")),"f");t.set(__classPrivateFieldGet$5(this,_CBC_lastBlock$1,"f"),r)}return t}decrypt(e){if(e.length%16){throw new TypeError("invalid ciphertext size (must be multiple of 16 bytes)")}const t=new Uint8Array(e.length);for(let r=0;r<e.length;r+=16){const n=this.aes.decrypt(e.subarray(r,r+16));for(let i=0;i<16;i++){t[r+i]=n[i]^__classPrivateFieldGet$5(this,_CBC_lastBlock$1,"f")[i];__classPrivateFieldGet$5(this,_CBC_lastBlock$1,"f")[i]=e[r+i]}}return t}}_CBC_iv$1=new WeakMap,_CBC_lastBlock$1=new WeakMap;var __classPrivateFieldSet$4=undefined&&undefined.__classPrivateFieldSet||function(e,t,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t==="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet$4=undefined&&undefined.__classPrivateFieldGet||function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t==="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)};var _CTR_remaining$1,_CTR_remainingIndex$1,_CTR_counter$1;class CTR$1 extends ModeOfOperation$1{constructor(e,t){super("CTR",e,CTR$1);_CTR_remaining$1.set(this,void 0);_CTR_remainingIndex$1.set(this,void 0);_CTR_counter$1.set(this,void 0);__classPrivateFieldSet$4(this,_CTR_counter$1,new Uint8Array(16),"f");__classPrivateFieldGet$4(this,_CTR_counter$1,"f").fill(0);__classPrivateFieldSet$4(this,_CTR_remaining$1,__classPrivateFieldGet$4(this,_CTR_counter$1,"f"),"f");__classPrivateFieldSet$4(this,_CTR_remainingIndex$1,16,"f");if(t==null){t=1}if(typeof t==="number"){this.setCounterValue(t)}else{this.setCounterBytes(t)}}get counter(){return new Uint8Array(__classPrivateFieldGet$4(this,_CTR_counter$1,"f"))}setCounterValue(e){if(!Number.isInteger(e)||e<0||e>Number.MAX_SAFE_INTEGER){throw new TypeError("invalid counter initial integer value")}for(let t=15;t>=0;--t){__classPrivateFieldGet$4(this,_CTR_counter$1,"f")[t]=e%256;e=Math.floor(e/256)}}setCounterBytes(e){if(e.length!==16){throw new TypeError("invalid counter initial Uint8Array value length")}__classPrivateFieldGet$4(this,_CTR_counter$1,"f").set(e)}increment(){for(let e=15;e>=0;e--){if(__classPrivateFieldGet$4(this,_CTR_counter$1,"f")[e]===255){__classPrivateFieldGet$4(this,_CTR_counter$1,"f")[e]=0}else{__classPrivateFieldGet$4(this,_CTR_counter$1,"f")[e]++;break}}}encrypt(e){var t,r;const n=new Uint8Array(e);for(let e=0;e<n.length;e++){if(__classPrivateFieldGet$4(this,_CTR_remainingIndex$1,"f")===16){__classPrivateFieldSet$4(this,_CTR_remaining$1,this.aes.encrypt(__classPrivateFieldGet$4(this,_CTR_counter$1,"f")),"f");__classPrivateFieldSet$4(this,_CTR_remainingIndex$1,0,"f");this.increment()}n[e]^=__classPrivateFieldGet$4(this,_CTR_remaining$1,"f")[(__classPrivateFieldSet$4(this,_CTR_remainingIndex$1,(r=__classPrivateFieldGet$4(this,_CTR_remainingIndex$1,"f"),t=r++,r),"f"),t)]}return n}decrypt(e){return this.encrypt(e)}}_CTR_remaining$1=new WeakMap,_CTR_remainingIndex$1=new WeakMap,_CTR_counter$1=new WeakMap;function pkcs7Strip$1(e){if(e.length<16){throw new TypeError("PKCS#7 invalid length")}const t=e[e.length-1];if(t>16){throw new TypeError("PKCS#7 padding byte out of range")}const r=e.length-t;for(let n=0;n<t;n++){if(e[r+n]!==t){throw new TypeError("PKCS#7 invalid padding byte")}}return new Uint8Array(e.subarray(0,r))}function looseArrayify$1(e){if(typeof e==="string"&&!e.startsWith("0x")){e="0x"+e}return getBytesCopy$1(e)}function zpad$3(e,t){e=String(e);while(e.length<t){e="0"+e}return e}function getPassword$1(e){if(typeof e==="string"){return toUtf8Bytes$1(e,"NFKC")}return getBytesCopy$1(e)}function spelunk$1(e,t){const r=t.match(/^([a-z0-9$_.-]*)(:([a-z]+))?(!)?$/i);assertArgument$1(r!=null,"invalid path","path",t);const n=r[1];const i=r[3];const s=r[4]==="!";let a=e;for(const e of n.toLowerCase().split(".")){if(Array.isArray(a)){if(!e.match(/^[0-9]+$/)){break}a=a[parseInt(e)]}else if(typeof a==="object"){let t=null;for(const r in a){if(r.toLowerCase()===e){t=a[r];break}}a=t}else{a=null}if(a==null){break}}assertArgument$1(!s||a!=null,"missing required value","path",n);if(i&&a!=null){if(i==="int"){if(typeof a==="string"&&a.match(/^-?[0-9]+$/)){return parseInt(a)}else if(Number.isSafeInteger(a)){return a}}if(i==="number"){if(typeof a==="string"&&a.match(/^-?[0-9.]*$/)){return parseFloat(a)}}if(i==="data"){if(typeof a==="string"){return looseArrayify$1(a)}}if(i==="array"&&Array.isArray(a)){return a}if(i===typeof a){return a}assertArgument$1(false,`wrong type found for ${i} `,"path",n)}return a}const defaultPath$3="m/44'/60'/0'/0/0";function isKeystoreJson$1(e){try{const t=JSON.parse(e);const r=t.version!=null?parseInt(t.version):0;if(r===3){return true}}catch(e){}return false}function decrypt$1(e,t,r){const n=spelunk$1(e,"crypto.cipher:string");if(n==="aes-128-ctr"){const n=spelunk$1(e,"crypto.cipherparams.iv:data!");const i=new CTR$1(t,n);return hexlify$1(i.decrypt(r))}assert$q(false,"unsupported cipher","UNSUPPORTED_OPERATION",{operation:"decrypt"})}function getAccount$1(e,t){const r=getBytes$1(t);const n=spelunk$1(e,"crypto.ciphertext:data!");const i=hexlify$1(keccak256$1(concat$c([r.slice(16,32),n]))).substring(2);assertArgument$1(i===spelunk$1(e,"crypto.mac:string!").toLowerCase(),"incorrect password","password","[ REDACTED ]");const s=decrypt$1(e,r.slice(0,16),n);const a=computeAddress$1(s);if(e.address){let t=e.address.toLowerCase();if(!t.startsWith("0x")){t="0x"+t}assertArgument$1(getAddress$1(t)===a,"keystore address/privateKey mismatch","address",e.address)}const o={address:a,privateKey:s};const f=spelunk$1(e,"x-ethers.version:string");if(f==="0.1"){const t=r.slice(32,64);const n=spelunk$1(e,"x-ethers.mnemonicCiphertext:data!");const i=spelunk$1(e,"x-ethers.mnemonicCounter:data!");const s=new CTR$1(t,i);o.mnemonic={path:spelunk$1(e,"x-ethers.path:string")||defaultPath$3,locale:spelunk$1(e,"x-ethers.locale:string")||"en",entropy:hexlify$1(getBytes$1(s.decrypt(n)))}}return o}function getDecryptKdfParams$1(e){const t=spelunk$1(e,"crypto.kdf:string");if(t&&typeof t==="string"){if(t.toLowerCase()==="scrypt"){const r=spelunk$1(e,"crypto.kdfparams.salt:data!");const n=spelunk$1(e,"crypto.kdfparams.n:int!");const i=spelunk$1(e,"crypto.kdfparams.r:int!");const s=spelunk$1(e,"crypto.kdfparams.p:int!");assertArgument$1(n>0&&(n&n-1)===0,"invalid kdf.N","kdf.N",n);assertArgument$1(i>0&&s>0,"invalid kdf","kdf",t);const a=spelunk$1(e,"crypto.kdfparams.dklen:int!");assertArgument$1(a===32,"invalid kdf.dklen","kdf.dflen",a);return{name:"scrypt",salt:r,N:n,r:i,p:s,dkLen:64}}else if(t.toLowerCase()==="pbkdf2"){const t=spelunk$1(e,"crypto.kdfparams.salt:data!");const r=spelunk$1(e,"crypto.kdfparams.prf:string!");const n=r.split("-").pop();assertArgument$1(n==="sha256"||n==="sha512","invalid kdf.pdf","kdf.pdf",r);const i=spelunk$1(e,"crypto.kdfparams.c:int!");const s=spelunk$1(e,"crypto.kdfparams.dklen:int!");assertArgument$1(s===32,"invalid kdf.dklen","kdf.dklen",s);return{name:"pbkdf2",salt:t,count:i,dkLen:s,algorithm:n}}}assertArgument$1(false,"unsupported key-derivation function","kdf",t)}function decryptKeystoreJsonSync$1(e,t){const r=JSON.parse(e);const n=getPassword$1(t);const i=getDecryptKdfParams$1(r);if(i.name==="pbkdf2"){const{salt:e,count:t,dkLen:s,algorithm:a}=i;const o=pbkdf2$3(n,e,t,s,a);return getAccount$1(r,o)}assert$q(i.name==="scrypt","cannot be reached","UNKNOWN_ERROR",{params:i});const{salt:s,N:a,r:o,p:f,dkLen:c}=i;const u=scryptSync$1(n,s,a,o,f,c);return getAccount$1(r,u)}function stall$5(e){return new Promise((t=>{setTimeout((()=>{t()}),e)}))}async function decryptKeystoreJson$1(e,t,r){const n=JSON.parse(e);const i=getPassword$1(t);const s=getDecryptKdfParams$1(n);if(s.name==="pbkdf2"){if(r){r(0);await stall$5(0)}const{salt:e,count:t,dkLen:a,algorithm:o}=s;const f=pbkdf2$3(i,e,t,a,o);if(r){r(1);await stall$5(0)}return getAccount$1(n,f)}assert$q(s.name==="scrypt","cannot be reached","UNKNOWN_ERROR",{params:s});const{salt:a,N:o,r:f,p:c,dkLen:u}=s;const l=await scrypt$3(i,a,o,f,c,u,r);return getAccount$1(n,l)}function getEncryptKdfParams$1(e){const t=e.salt!=null?getBytes$1(e.salt,"options.salt"):randomBytes$2(32);let r=1<<17,n=8,i=1;if(e.scrypt){if(e.scrypt.N){r=e.scrypt.N}if(e.scrypt.r){n=e.scrypt.r}if(e.scrypt.p){i=e.scrypt.p}}assertArgument$1(typeof r==="number"&&r>0&&Number.isSafeInteger(r)&&(BigInt(r)&BigInt(r-1))===BigInt(0),"invalid scrypt N parameter","options.N",r);assertArgument$1(typeof n==="number"&&n>0&&Number.isSafeInteger(n),"invalid scrypt r parameter","options.r",n);assertArgument$1(typeof i==="number"&&i>0&&Number.isSafeInteger(i),"invalid scrypt p parameter","options.p",i);return{name:"scrypt",dkLen:32,salt:t,N:r,r:n,p:i}}function _encryptKeystore$1(e,t,r,n){const i=getBytes$1(r.privateKey,"privateKey");const s=n.iv!=null?getBytes$1(n.iv,"options.iv"):randomBytes$2(16);assertArgument$1(s.length===16,"invalid options.iv length","options.iv",n.iv);const a=n.uuid!=null?getBytes$1(n.uuid,"options.uuid"):randomBytes$2(16);assertArgument$1(a.length===16,"invalid options.uuid length","options.uuid",n.iv);const o=e.slice(0,16);const f=e.slice(16,32);const c=new CTR$1(o,s);const u=getBytes$1(c.encrypt(i));const l=keccak256$1(concat$c([f,u]));const h={address:r.address.substring(2).toLowerCase(),id:uuidV4$1(a),version:3,Crypto:{cipher:"aes-128-ctr",cipherparams:{iv:hexlify$1(s).substring(2)},ciphertext:hexlify$1(u).substring(2),kdf:"scrypt",kdfparams:{salt:hexlify$1(t.salt).substring(2),n:t.N,dklen:32,p:t.p,r:t.r},mac:l.substring(2)}};if(r.mnemonic){const t=n.client!=null?n.client:`ethers/${version$4}`;const i=r.mnemonic.path||defaultPath$3;const s=r.mnemonic.locale||"en";const a=e.slice(32,64);const o=getBytes$1(r.mnemonic.entropy,"account.mnemonic.entropy");const f=randomBytes$2(16);const c=new CTR$1(a,f);const u=getBytes$1(c.encrypt(o));const l=new Date;const d=l.getUTCFullYear()+"-"+zpad$3(l.getUTCMonth()+1,2)+"-"+zpad$3(l.getUTCDate(),2)+"T"+zpad$3(l.getUTCHours(),2)+"-"+zpad$3(l.getUTCMinutes(),2)+"-"+zpad$3(l.getUTCSeconds(),2)+".0Z";const p="UTC--"+d+"--"+h.address;h["x-ethers"]={client:t,gethFilename:p,path:i,locale:s,mnemonicCounter:hexlify$1(f).substring(2),mnemonicCiphertext:hexlify$1(u).substring(2),version:"0.1"}}return JSON.stringify(h)}function encryptKeystoreJsonSync$1(e,t,r){if(r==null){r={}}const n=getPassword$1(t);const i=getEncryptKdfParams$1(r);const s=scryptSync$1(n,i.salt,i.N,i.r,i.p,64);return _encryptKeystore$1(getBytes$1(s),i,e,r)}async function encryptKeystoreJson$1(e,t,r){if(r==null){r={}}const n=getPassword$1(t);const i=getEncryptKdfParams$1(r);const s=await scrypt$3(n,i.salt,i.N,i.r,i.p,64,r.progressCallback);return _encryptKeystore$1(getBytes$1(s),i,e,r)}const defaultPath$2="m/44'/60'/0'/0/0";const MasterSecret$1=new Uint8Array([66,105,116,99,111,105,110,32,115,101,101,100]);const HardenedBit$1=2147483648;const N$2=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141");const Nibbles$2="0123456789abcdef";function zpad$2(e,t){let r="";while(e){r=Nibbles$2[e%16]+r;e=Math.trunc(e/16)}while(r.length<t*2){r="0"+r}return"0x"+r}function encodeBase58Check$1(e){const t=getBytes$1(e);const r=dataSlice$1(sha256$5(sha256$5(t)),0,4);const n=concat$c([t,r]);return encodeBase58$1(n)}const _guard$6={};function ser_I$1(e,t,r,n){const i=new Uint8Array(37);if(e&HardenedBit$1){assert$q(n!=null,"cannot derive child of neutered node","UNSUPPORTED_OPERATION",{operation:"deriveChild"});i.set(getBytes$1(n),1)}else{i.set(getBytes$1(r))}for(let t=24;t>=0;t-=8){i[33+(t>>3)]=e>>24-t&255}const s=getBytes$1(computeHmac$1("sha512",t,i));return{IL:s.slice(0,32),IR:s.slice(32)}}function derivePath$1(e,t){const r=t.split("/");assertArgument$1(r.length>0&&(r[0]==="m"||e.depth>0),"invalid path","path",t);if(r[0]==="m"){r.shift()}let n=e;for(let e=0;e<r.length;e++){const t=r[e];if(t.match(/^[0-9]+'$/)){const r=parseInt(t.substring(0,t.length-1));assertArgument$1(r<HardenedBit$1,"invalid path index",`path[${e}]`,t);n=n.deriveChild(HardenedBit$1+r)}else if(t.match(/^[0-9]+$/)){const r=parseInt(t);assertArgument$1(r<HardenedBit$1,"invalid path index",`path[${e}]`,t);n=n.deriveChild(r)}else{assertArgument$1(false,"invalid path component",`path[${e}]`,t)}}return n}class HDNodeWallet$1 extends BaseWallet$1{publicKey;fingerprint;parentFingerprint;mnemonic;chainCode;path;index;depth;constructor(e,t,r,n,i,s,a,o,f){super(t,f);assertPrivate$1(e,_guard$6,"HDNodeWallet");defineProperties$1(this,{publicKey:t.compressedPublicKey});const c=dataSlice$1(ripemd160$2(sha256$5(this.publicKey)),0,4);defineProperties$1(this,{parentFingerprint:r,fingerprint:c,chainCode:n,path:i,index:s,depth:a});defineProperties$1(this,{mnemonic:o})}connect(e){return new HDNodeWallet$1(_guard$6,this.signingKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,this.mnemonic,e)}#Ft(){const e={address:this.address,privateKey:this.privateKey};const t=this.mnemonic;if(this.path&&t&&t.wordlist.locale==="en"&&t.password===""){e.mnemonic={path:this.path,locale:"en",entropy:t.entropy}}return e}async encrypt(e,t){return await encryptKeystoreJson$1(this.#Ft(),e,{progressCallback:t})}encryptSync(e){return encryptKeystoreJsonSync$1(this.#Ft(),e)}get extendedKey(){assert$q(this.depth<256,"Depth too deep","UNSUPPORTED_OPERATION",{operation:"extendedKey"});return encodeBase58Check$1(concat$c(["0x0488ADE4",zpad$2(this.depth,1),this.parentFingerprint,zpad$2(this.index,4),this.chainCode,concat$c(["0x00",this.privateKey])]))}hasPath(){return this.path!=null}neuter(){return new HDNodeVoidWallet$1(_guard$6,this.address,this.publicKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,this.provider)}deriveChild(e){const t=getNumber$2(e,"index");assertArgument$1(t<=4294967295,"invalid index","index",t);let r=this.path;if(r){r+="/"+(t&~HardenedBit$1);if(t&HardenedBit$1){r+="'"}}const{IR:n,IL:i}=ser_I$1(t,this.chainCode,this.publicKey,this.privateKey);const s=new SigningKey$1(toBeHex$1((toBigInt$1(i)+BigInt(this.privateKey))%N$2,32));return new HDNodeWallet$1(_guard$6,s,this.fingerprint,hexlify$1(n),r,t,this.depth+1,this.mnemonic,this.provider)}derivePath(e){return derivePath$1(this,e)}static#Ht(e,t){assertArgument$1(isBytesLike$1(e),"invalid seed","seed","[REDACTED]");const r=getBytes$1(e,"seed");assertArgument$1(r.length>=16&&r.length<=64,"invalid seed","seed","[REDACTED]");const n=getBytes$1(computeHmac$1("sha512",MasterSecret$1,r));const i=new SigningKey$1(hexlify$1(n.slice(0,32)));return new HDNodeWallet$1(_guard$6,i,"0x00000000",hexlify$1(n.slice(32)),"m",0,0,t,null)}static fromExtendedKey(e){const t=toBeArray$1(decodeBase58$1(e));assertArgument$1(t.length===82||encodeBase58Check$1(t.slice(0,78))===e,"invalid extended key","extendedKey","[ REDACTED ]");const r=t[4];const n=hexlify$1(t.slice(5,9));const i=parseInt(hexlify$1(t.slice(9,13)).substring(2),16);const s=hexlify$1(t.slice(13,45));const a=t.slice(45,78);switch(hexlify$1(t.slice(0,4))){case"0x0488b21e":case"0x043587cf":{const e=hexlify$1(a);return new HDNodeVoidWallet$1(_guard$6,computeAddress$1(e),e,n,s,null,i,r,null)}case"0x0488ade4":case"0x04358394 ":if(a[0]!==0){break}return new HDNodeWallet$1(_guard$6,new SigningKey$1(a.slice(1)),n,s,null,i,r,null,null)}assertArgument$1(false,"invalid extended key prefix","extendedKey","[ REDACTED ]")}static createRandom(e,t,r){if(e==null){e=""}if(t==null){t=defaultPath$2}if(r==null){r=LangEn$1.wordlist()}const n=Mnemonic$1.fromEntropy(randomBytes$2(16),e,r);return HDNodeWallet$1.#Ht(n.computeSeed(),n).derivePath(t)}static fromMnemonic(e,t){if(!t){t=defaultPath$2}return HDNodeWallet$1.#Ht(e.computeSeed(),e).derivePath(t)}static fromPhrase(e,t,r,n){if(t==null){t=""}if(r==null){r=defaultPath$2}if(n==null){n=LangEn$1.wordlist()}const i=Mnemonic$1.fromPhrase(e,t,n);return HDNodeWallet$1.#Ht(i.computeSeed(),i).derivePath(r)}static fromSeed(e){return HDNodeWallet$1.#Ht(e,null)}}class HDNodeVoidWallet$1 extends VoidSigner$1{publicKey;fingerprint;parentFingerprint;chainCode;path;index;depth;constructor(e,t,r,n,i,s,a,o,f){super(t,f);assertPrivate$1(e,_guard$6,"HDNodeVoidWallet");defineProperties$1(this,{publicKey:r});const c=dataSlice$1(ripemd160$2(sha256$5(r)),0,4);defineProperties$1(this,{publicKey:r,fingerprint:c,parentFingerprint:n,chainCode:i,path:s,index:a,depth:o})}connect(e){return new HDNodeVoidWallet$1(_guard$6,this.address,this.publicKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,e)}get extendedKey(){assert$q(this.depth<256,"Depth too deep","UNSUPPORTED_OPERATION",{operation:"extendedKey"});return encodeBase58Check$1(concat$c(["0x0488B21E",zpad$2(this.depth,1),this.parentFingerprint,zpad$2(this.index,4),this.chainCode,this.publicKey]))}hasPath(){return this.path!=null}deriveChild(e){const t=getNumber$2(e,"index");assertArgument$1(t<=4294967295,"invalid index","index",t);let r=this.path;if(r){r+="/"+(t&~HardenedBit$1);if(t&HardenedBit$1){r+="'"}}const{IR:n,IL:i}=ser_I$1(t,this.chainCode,this.publicKey,null);const s=SigningKey$1.addPoints(i,this.publicKey,true);const a=computeAddress$1(s);return new HDNodeVoidWallet$1(_guard$6,a,s,this.fingerprint,hexlify$1(n),r,t,this.depth+1,this.provider)}derivePath(e){return derivePath$1(this,e)}}function getAccountPath$1(e){const t=getNumber$2(e,"index");assertArgument$1(t>=0&&t<HardenedBit$1,"invalid account index","index",t);return`m/44'/60'/${t}'/0/0`}function getIndexedAccountPath$1(e){const t=getNumber$2(e,"index");assertArgument$1(t>=0&&t<HardenedBit$1,"invalid account index","index",t);return`m/44'/60'/0'/0/${t}`}function isCrowdsaleJson$1(e){try{const t=JSON.parse(e);if(t.encseed){return true}}catch(e){}return false}function decryptCrowdsaleJson$1(e,t){const r=JSON.parse(e);const n=getPassword$1(t);const i=getAddress$1(spelunk$1(r,"ethaddr:string!"));const s=looseArrayify$1(spelunk$1(r,"encseed:string!"));assertArgument$1(s&&s.length%16===0,"invalid encseed","json",e);const a=getBytes$1(pbkdf2$3(n,n,2e3,32,"sha256")).slice(0,16);const o=s.slice(0,16);const f=s.slice(16);const c=new CBC$1(a,o);const u=pkcs7Strip$1(getBytes$1(c.decrypt(f)));let l="";for(let e=0;e<u.length;e++){l+=String.fromCharCode(u[e])}return{address:i,privateKey:id$1(l)}}function stall$4(e){return new Promise((t=>{setTimeout((()=>{t()}),e)}))}class Wallet$1 extends BaseWallet$1{constructor(e,t){if(typeof e==="string"&&!e.startsWith("0x")){e="0x"+e}let r=typeof e==="string"?new SigningKey$1(e):e;super(r,t)}connect(e){return new Wallet$1(this.signingKey,e)}async encrypt(e,t){const r={address:this.address,privateKey:this.privateKey};return await encryptKeystoreJson$1(r,e,{progressCallback:t})}encryptSync(e){const t={address:this.address,privateKey:this.privateKey};return encryptKeystoreJsonSync$1(t,e)}static#Vt(e){assertArgument$1(e,"invalid JSON wallet","json","[ REDACTED ]");if("mnemonic"in e&&e.mnemonic&&e.mnemonic.locale==="en"){const t=Mnemonic$1.fromEntropy(e.mnemonic.entropy);const r=HDNodeWallet$1.fromMnemonic(t,e.mnemonic.path);if(r.address===e.address&&r.privateKey===e.privateKey){return r}console.log("WARNING: JSON mismatch address/privateKey != mnemonic; fallback onto private key")}const t=new Wallet$1(e.privateKey);assertArgument$1(t.address===e.address,"address/privateKey mismatch","json","[ REDACTED ]");return t}static async fromEncryptedJson(e,t,r){let n=null;if(isKeystoreJson$1(e)){n=await decryptKeystoreJson$1(e,t,r)}else if(isCrowdsaleJson$1(e)){if(r){r(0);await stall$4(0)}n=decryptCrowdsaleJson$1(e,t);if(r){r(1);await stall$4(0)}}return Wallet$1.#Vt(n)}static fromEncryptedJsonSync(e,t){let r=null;if(isKeystoreJson$1(e)){r=decryptKeystoreJsonSync$1(e,t)}else if(isCrowdsaleJson$1(e)){r=decryptCrowdsaleJson$1(e,t)}else{assertArgument$1(false,"invalid JSON wallet","json","[ REDACTED ]")}return Wallet$1.#Vt(r)}static createRandom(e){const t=HDNodeWallet$1.createRandom();if(e){return t.connect(e)}return t}static fromPhrase(e,t){const r=HDNodeWallet$1.fromPhrase(e);if(t){return r.connect(t)}return r}}const Base64$1=")!@#$%^&*(ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_";function decodeBits$1(e,t){const r=(1<<e)-1;const n=[];let i=0,s=0,a=0;for(let o=0;o<t.length;o++){i=i<<6|Base64$1.indexOf(t[o]);s+=6;while(s>=e){const t=i>>s-e;i&=(1<<s-e)-1;s-=e;if(t===0){a+=r}else{n.push(t+a);a=0}}}return n}function decodeOwlA$1(e,t){let r=decodeOwl$1(e).join(",");t.split(/,/g).forEach((e=>{const n=e.match(/^([a-z]*)([0-9]+)([0-9])(.*)$/);assertArgument$1(n!==null,"internal error parsing accents","accents",t);let i=0;const s=decodeBits$1(parseInt(n[3]),n[4]);const a=parseInt(n[2]);const o=new RegExp(`([${n[1]}])`,"g");r=r.replace(o,((e,t)=>{const r=--s[i];if(r===0){t=String.fromCharCode(t.charCodeAt(0),a);i++}return t}))}));return r.split(",")}class WordlistOwlA$1 extends WordlistOwl$1{#Gt;constructor(e,t,r,n){super(e,t,n);this.#Gt=r}get _accent(){return this.#Gt}_decodeWords(){return decodeOwlA$1(this._data,this._accent)}}const wordlists$1={en:LangEn$1.wordlist()};const ethers$1=Object.freeze({__proto__:null,version:version$4,decodeBytes32String:decodeBytes32String$1,encodeBytes32String:encodeBytes32String$1,AbiCoder:AbiCoder$1,ConstructorFragment:ConstructorFragment$1,ErrorFragment:ErrorFragment$1,EventFragment:EventFragment$1,Fragment:Fragment$1,FallbackFragment:FallbackFragment$1,FunctionFragment:FunctionFragment$1,NamedFragment:NamedFragment$1,ParamType:ParamType$1,StructFragment:StructFragment$1,checkResultErrors:checkResultErrors$1,ErrorDescription:ErrorDescription$1,Indexed:Indexed$1,Interface:Interface$1,LogDescription:LogDescription$1,Result:Result$1,TransactionDescription:TransactionDescription$1,Typed:Typed$1,getAddress:getAddress$1,getIcapAddress:getIcapAddress$1,getCreateAddress:getCreateAddress$1,getCreate2Address:getCreate2Address$1,isAddressable:isAddressable$1,isAddress:isAddress$1,resolveAddress:resolveAddress$1,ZeroAddress:ZeroAddress$1,WeiPerEther:WeiPerEther$1,MaxUint256:MaxUint256$1,MinInt256:MinInt256$1,MaxInt256:MaxInt256$1,N:N$3,ZeroHash:ZeroHash$1,EtherSymbol:EtherSymbol$1,MessagePrefix:MessagePrefix$1,BaseContract:BaseContract$1,Contract:Contract$2,ContractFactory:ContractFactory$1,ContractEventPayload:ContractEventPayload$1,ContractTransactionReceipt:ContractTransactionReceipt$1,ContractTransactionResponse:ContractTransactionResponse$1,ContractUnknownEventPayload:ContractUnknownEventPayload$1,EventLog:EventLog$1,UndecodedEventLog:UndecodedEventLog$1,computeHmac:computeHmac$1,randomBytes:randomBytes$2,keccak256:keccak256$1,ripemd160:ripemd160$2,sha256:sha256$5,sha512:sha512$3,pbkdf2:pbkdf2$3,scrypt:scrypt$3,scryptSync:scryptSync$1,lock:lock$1,Signature:Signature$7,SigningKey:SigningKey$1,id:id$1,ensNormalize:ensNormalize$1,isValidName:isValidName$1,namehash:namehash$1,dnsEncode:dnsEncode$1,hashMessage:hashMessage$1,verifyMessage:verifyMessage$1,solidityPacked:solidityPacked$1,solidityPackedKeccak256:solidityPackedKeccak256$1,solidityPackedSha256:solidityPackedSha256$1,TypedDataEncoder:TypedDataEncoder$1,verifyTypedData:verifyTypedData$1,getDefaultProvider:getDefaultProvider$1,Block:Block$1,FeeData:FeeData$1,Log:Log$1,TransactionReceipt:TransactionReceipt$1,TransactionResponse:TransactionResponse$1,AbstractSigner:AbstractSigner$1,NonceManager:NonceManager$1,VoidSigner:VoidSigner$1,AbstractProvider:AbstractProvider$1,FallbackProvider:FallbackProvider$1,JsonRpcApiProvider:JsonRpcApiProvider$1,JsonRpcProvider:JsonRpcProvider$1,JsonRpcSigner:JsonRpcSigner$1,BrowserProvider:BrowserProvider$1,AlchemyProvider:AlchemyProvider$1,AnkrProvider:AnkrProvider$1,CloudflareProvider:CloudflareProvider$1,EtherscanProvider:EtherscanProvider$1,InfuraProvider:InfuraProvider$1,InfuraWebSocketProvider:InfuraWebSocketProvider$1,PocketProvider:PocketProvider$1,QuickNodeProvider:QuickNodeProvider$1,IpcSocketProvider:IpcSocketProvider$1,SocketProvider:SocketProvider$1,WebSocketProvider:WebSocketProvider$1,EnsResolver:EnsResolver$1,Network:Network$1,EnsPlugin:EnsPlugin$1,EtherscanPlugin:EtherscanPlugin$1,FeeDataNetworkPlugin:FeeDataNetworkPlugin$1,FetchUrlFeeDataNetworkPlugin:FetchUrlFeeDataNetworkPlugin$1,GasCostPlugin:GasCostPlugin$1,NetworkPlugin:NetworkPlugin$1,MulticoinProviderPlugin:MulticoinProviderPlugin$1,SocketBlockSubscriber:SocketBlockSubscriber$1,SocketEventSubscriber:SocketEventSubscriber$1,SocketPendingSubscriber:SocketPendingSubscriber$1,SocketSubscriber:SocketSubscriber$1,UnmanagedSubscriber:UnmanagedSubscriber$1,copyRequest:copyRequest$1,showThrottleMessage:showThrottleMessage$1,accessListify:accessListify$1,computeAddress:computeAddress$1,recoverAddress:recoverAddress$1,Transaction:Transaction$4,decodeBase58:decodeBase58$1,encodeBase58:encodeBase58$1,decodeBase64:decodeBase64$1,encodeBase64:encodeBase64$1,concat:concat$c,dataLength:dataLength$1,dataSlice:dataSlice$1,getBytes:getBytes$1,getBytesCopy:getBytesCopy$1,hexlify:hexlify$1,isHexString:isHexString$1,isBytesLike:isBytesLike$1,stripZerosLeft:stripZerosLeft$1,zeroPadBytes:zeroPadBytes$1,zeroPadValue:zeroPadValue$1,defineProperties:defineProperties$1,resolveProperties:resolveProperties$1,assert:assert$q,assertArgument:assertArgument$1,assertArgumentCount:assertArgumentCount$1,assertNormalize:assertNormalize$1,assertPrivate:assertPrivate$1,makeError:makeError$1,isCallException:isCallException$1,isError:isError$1,EventPayload:EventPayload$1,FetchRequest:FetchRequest$1,FetchResponse:FetchResponse$1,FetchCancelSignal:FetchCancelSignal$1,FixedNumber:FixedNumber$1,getBigInt:getBigInt$1,getNumber:getNumber$2,getUint:getUint$1,toBeArray:toBeArray$1,toBigInt:toBigInt$1,toBeHex:toBeHex$1,toNumber:toNumber$1,toQuantity:toQuantity$1,fromTwos:fromTwos$1,toTwos:toTwos$1,mask:mask$1,formatEther:formatEther$1,parseEther:parseEther$1,formatUnits:formatUnits$1,parseUnits:parseUnits$3,toUtf8Bytes:toUtf8Bytes$1,toUtf8CodePoints:toUtf8CodePoints$1,toUtf8String:toUtf8String$1,Utf8ErrorFuncs:Utf8ErrorFuncs$1,decodeRlp:decodeRlp$1,encodeRlp:encodeRlp$1,uuidV4:uuidV4$1,Mnemonic:Mnemonic$1,BaseWallet:BaseWallet$1,HDNodeWallet:HDNodeWallet$1,HDNodeVoidWallet:HDNodeVoidWallet$1,Wallet:Wallet$1,defaultPath:defaultPath$2,getAccountPath:getAccountPath$1,getIndexedAccountPath:getIndexedAccountPath$1,isCrowdsaleJson:isCrowdsaleJson$1,isKeystoreJson:isKeystoreJson$1,decryptCrowdsaleJson:decryptCrowdsaleJson$1,decryptKeystoreJsonSync:decryptKeystoreJsonSync$1,decryptKeystoreJson:decryptKeystoreJson$1,encryptKeystoreJson:encryptKeystoreJson$1,encryptKeystoreJsonSync:encryptKeystoreJsonSync$1,Wordlist:Wordlist$1,LangEn:LangEn$1,WordlistOwl:WordlistOwl$1,WordlistOwlA:WordlistOwlA$1,wordlists:wordlists$1});var SupportedWalletProviders;(function(e){e["MetaMask"]="MetaMask";e["WalletConnect"]="WalletConnect";e["WalletConnectV2"]="WalletConnectV2";e["Torus"]="Torus"})(SupportedWalletProviders||(SupportedWalletProviders={}));class Web3WalletProviderObj{constructor(e){this.walletOptions=e;this.connections={};this.walletChangeListeners=[]}setWalletSelectorCallback(e){this.selectorCallback=e}registerWalletChangeListener(e){this.walletChangeListeners.push(e)}removeWalletChangeListener(e){for(const[t,r]of this.walletChangeListeners.entries()){if(r===e){this.walletChangeListeners.slice(t,1);break}}}emitWalletChangeEvent(e){console.log("Wallet change event emitted!",e);for(const t of this.walletChangeListeners){t(e)}}isWalletConnected(){return this.getConnectedWalletData("evm").length>0}async getWallet(e=false){if(this.getConnectedWalletData("evm").length===0){if(!e)return null;return new Promise((async(e,t)=>{try{const t=await this.selectorCallback();await this.connectWith(t);e(this.getConnectedWalletData("evm")[0])}catch(e){t(e)}}))}return this.getConnectedWalletData("evm")[0]}async disconnectWallet(){await this.deleteConnections();this.emitWalletChangeEvent()}async switchWallet(){return new Promise((async(e,t)=>{try{const t=await this.selectorCallback();await this.connectWith(t);e(this.getConnectedWalletData("evm")[0])}catch(e){t(e)}}))}saveConnections(){let e={};for(let t in this.connections){let r=this.connections[t.toLowerCase()];e[t]={address:r.address,chainId:r.chainId,providerType:r.providerType,blockchain:r.blockchain}}localStorage.setItem(Web3WalletProviderObj.LOCAL_STORAGE_KEY,JSON.stringify(e))}emitSavedConnection(e){this.emitWalletChangeEvent(this.connections[e])}async deleteConnections(){this.connections={};let e=localStorage.getItem(Web3WalletProviderObj.LOCAL_STORAGE_KEY);if(e){let t=JSON.parse(e);if(t){for(let e in t){let r=t[e].providerType;switch(r){case"WalletConnectV2":{let e=await import("./p-2c750567.js");let t=await e.getWalletConnectV2ProviderInstance();if(t.session){t.disconnect().then((()=>{})).catch((e=>{localStorage.removeItem("wc@2:client:0.3//session")}))}}break}}}}localStorage.removeItem(Web3WalletProviderObj.LOCAL_STORAGE_KEY);sessionStorage.removeItem("CURRENT_USER")}async loadConnections(){let e=localStorage.getItem(Web3WalletProviderObj.LOCAL_STORAGE_KEY);if(!e)return;let t=JSON.parse(e);if(!t)return;for(let e in t){let r=t[e];try{await this.connectWith(r.providerType,true)}catch(r){delete t[e];this.saveConnections()}}}async connectWith(e,t=false){if(!e)throw new Error("Please provide a Wallet type to connect with.");if(!this[e])throw new Error("Wallet type not found");let r=await this[e](t);if(!r)throw new Error("Wallet didn't connect");this.saveConnections();this.emitWalletChangeEvent(Object.values(this.connections)[0]);return r}async signMessage(e,t){let r=this.getWalletProvider(e);let n=r.getSigner(e);return await n.signMessage(t)}getConnectionByAddress(e){return this.connections[e.toLowerCase()]}getWalletProvider(e){e=e.toLowerCase();let t=this.getConnectionByAddress(e);if(!t)throw new Error("Connection not found for address");if(!t.provider)throw new Error("Wallet provider not found for address");return t.provider}getConnectedWalletData(e){return Object.values(this.connections).filter((t=>t.blockchain===e))}registerNewWalletAddress(e,t,r,n,i,s){this.connections={};this.connections[e.toLowerCase()]={address:e,chainId:t,providerType:r,provider:n,blockchain:i,ethers:ethers$1};s.on("accountsChanged",(t=>{if(Object.keys(this.connections).length===0)return;if(!t||t.length===0){this.disconnectWallet();return}if(e===t[0])return;this.connections[t[0].toLowerCase()]=this.connections[e.toLowerCase()];e=t[0].toLowerCase();this.connections[e].address=e;this.saveConnections();this.emitWalletChangeEvent(Object.values(this.connections)[0])}));s.on("chainChanged",(t=>{this.registerNewWalletAddress(e,t,r,n,"evm",s);this.saveConnections()}));s.on("disconnect",(e=>{if((e===null||e===void 0?void 0:e.message)&&e.message.indexOf("MetaMask: Disconnected from chain")>-1)return;this.disconnectWallet()}))}async registerEvmProvider(e,t,r){const n=await e.listAccounts();const i=(await e.getNetwork()).chainId;if(n.length===0){throw new Error("No accounts found via wallet-connect.")}let s=n[0];this.registerNewWalletAddress(s.address,parseInt(i.toString(10)),t,e,"evm",r);return s}async MetaMask(e){if(typeof window.ethereum!=="undefined"){await window.ethereum.enable();const e=new BrowserProvider$1(window.ethereum,"any");return this.registerEvmProvider(e,SupportedWalletProviders.MetaMask,window.ethereum)}else{throw new Error("MetaMask is not available. Please check the extension is supported and active.")}}async WalletConnectV2(e){const t=await import("./p-2c750567.js");const r=await t.getWalletConnectV2ProviderInstance();let n;r.on("display_uri",(async e=>{n=(await import("./p-333ff71a.js").then((function(e){return e.i}))).default;n.open(e,(()=>{}))}));r.on("session_delete",(({id:e,topic:t})=>{}));let i=this.walletOptions;return new Promise(((s,a)=>{var o,f,c,u;if(e&&!r.session){a("Not connected")}else{let e;if(r.session){e=r.enable()}else{e=r.connect({chains:[1],optionalChains:(f=(o=i===null||i===void 0?void 0:i.walletConnectV2)===null||o===void 0?void 0:o.chains)!==null&&f!==void 0?f:t.WC_V2_DEFAULT_CHAINS,rpcMap:(u=(c=i===null||i===void 0?void 0:i.walletConnectV2)===null||c===void 0?void 0:c.rpcMap)!==null&&u!==void 0?u:t.WC_DEFAULT_RPC_MAP})}e.then((()=>{n===null||n===void 0?void 0:n.close();const e=new BrowserProvider$1(r,"any");s(this.registerEvmProvider(e,SupportedWalletProviders.WalletConnectV2,r))})).catch((e=>{n===null||n===void 0?void 0:n.close();a(e)}))}}))}async Torus(e){const t=await import("./p-ad65babf.js");const r=await t.getTorusProviderInstance();await r.init();await r.login();const n=new BrowserProvider$1(r.provider,"any");return this.registerEvmProvider(n,SupportedWalletProviders.Torus,r.provider)}}Web3WalletProviderObj.LOCAL_STORAGE_KEY="ts-wallet-connections";const Web3WalletProvider=new Web3WalletProviderObj;const Web3WalletProvider$1=Object.freeze({__proto__:null,get SupportedWalletProviders(){return SupportedWalletProviders},Web3WalletProvider});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.
Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.
THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var __assign$1=function(){__assign$1=Object.assign||function e(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)if(Object.prototype.hasOwnProperty.call(r,s))t[s]=r[s]}return t};return __assign$1.apply(this,arguments)};function __spreadArray$2(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,s;n<i;n++){if(s||!(n in t)){if(!s)s=Array.prototype.slice.call(t,0,n);s[n]=t[n]}}return e.concat(s||Array.prototype.slice.call(t))}var _global=typeof globalThis!=="undefined"?globalThis:typeof self!=="undefined"?self:typeof window!=="undefined"?window:global;var keys$4=Object.keys;var isArray$9=Array.isArray;if(typeof Promise!=="undefined"&&!_global.Promise){_global.Promise=Promise}function extend(e,t){if(typeof t!=="object")return e;keys$4(t).forEach((function(r){e[r]=t[r]}));return e}var getProto=Object.getPrototypeOf;var _hasOwn={}.hasOwnProperty;function hasOwn(e,t){return _hasOwn.call(e,t)}function props(e,t){if(typeof t==="function")t=t(getProto(e));(typeof Reflect==="undefined"?keys$4:Reflect.ownKeys)(t).forEach((function(r){setProp(e,r,t[r])}))}var defineProperty$5=Object.defineProperty;function setProp(e,t,r,n){defineProperty$5(e,t,extend(r&&hasOwn(r,"get")&&typeof r.get==="function"?{get:r.get,set:r.set,configurable:true}:{value:r,configurable:true,writable:true},n))}function derive(e){return{from:function(t){e.prototype=Object.create(t.prototype);setProp(e.prototype,"constructor",e);return{extend:props.bind(null,e.prototype)}}}}var getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor;function getPropertyDescriptor(e,t){var r=getOwnPropertyDescriptor(e,t);var n;return r||(n=getProto(e))&&getPropertyDescriptor(n,t)}var _slice=[].slice;function slice(e,t,r){return _slice.call(e,t,r)}function override(e,t){return t(e)}function assert$n(e){if(!e)throw new Error("Assertion Failed")}function asap$1(e){if(_global.setImmediate)setImmediate(e);else setTimeout(e,0)}function arrayToObject(e,t){return e.reduce((function(e,r,n){var i=t(r,n);if(i)e[i[0]]=i[1];return e}),{})}function tryCatch(e,t,r){try{e.apply(null,r)}catch(e){t&&t(e)}}function getByKeyPath(e,t){if(hasOwn(e,t))return e[t];if(!t)return e;if(typeof t!=="string"){var r=[];for(var n=0,i=t.length;n<i;++n){var s=getByKeyPath(e,t[n]);r.push(s)}return r}var a=t.indexOf(".");if(a!==-1){var o=e[t.substr(0,a)];return o===undefined?undefined:getByKeyPath(o,t.substr(a+1))}return undefined}function setByKeyPath(e,t,r){if(!e||t===undefined)return;if("isFrozen"in Object&&Object.isFrozen(e))return;if(typeof t!=="string"&&"length"in t){assert$n(typeof r!=="string"&&"length"in r);for(var n=0,i=t.length;n<i;++n){setByKeyPath(e,t[n],r[n])}}else{var s=t.indexOf(".");if(s!==-1){var a=t.substr(0,s);var o=t.substr(s+1);if(o==="")if(r===undefined){if(isArray$9(e)&&!isNaN(parseInt(a)))e.splice(a,1);else delete e[a]}else e[a]=r;else{var f=e[a];if(!f||!hasOwn(e,a))f=e[a]={};setByKeyPath(f,o,r)}}else{if(r===undefined){if(isArray$9(e)&&!isNaN(parseInt(t)))e.splice(t,1);else delete e[t]}else e[t]=r}}}function delByKeyPath(e,t){if(typeof t==="string")setByKeyPath(e,t,undefined);else if("length"in t)[].map.call(t,(function(t){setByKeyPath(e,t,undefined)}))}function shallowClone$1(e){var t={};for(var r in e){if(hasOwn(e,r))t[r]=e[r]}return t}var concat$b=[].concat;function flatten$3(e){return concat$b.apply([],e)}var intrinsicTypeNames="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(flatten$3([8,16,32,64].map((function(e){return["Int","Uint","Float"].map((function(t){return t+e+"Array"}))})))).filter((function(e){return _global[e]}));var intrinsicTypes=intrinsicTypeNames.map((function(e){return _global[e]}));arrayToObject(intrinsicTypeNames,(function(e){return[e,true]}));var circularRefs=null;function deepClone$1(e){circularRefs=typeof WeakMap!=="undefined"&&new WeakMap;var t=innerDeepClone(e);circularRefs=null;return t}function innerDeepClone(e){if(!e||typeof e!=="object")return e;var t=circularRefs&&circularRefs.get(e);if(t)return t;if(isArray$9(e)){t=[];circularRefs&&circularRefs.set(e,t);for(var r=0,n=e.length;r<n;++r){t.push(innerDeepClone(e[r]))}}else if(intrinsicTypes.indexOf(e.constructor)>=0){t=e}else{var i=getProto(e);t=i===Object.prototype?{}:Object.create(i);circularRefs&&circularRefs.set(e,t);for(var s in e){if(hasOwn(e,s)){t[s]=innerDeepClone(e[s])}}}return t}var toString$d={}.toString;function toStringTag(e){return toString$d.call(e).slice(8,-1)}var iteratorSymbol=typeof Symbol!=="undefined"?Symbol.iterator:"@@iterator";var getIteratorOf=typeof iteratorSymbol==="symbol"?function(e){var t;return e!=null&&(t=e[iteratorSymbol])&&t.apply(e)}:function(){return null};var NO_CHAR_ARRAY={};function getArrayOf(e){var t,r,n,i;if(arguments.length===1){if(isArray$9(e))return e.slice();if(this===NO_CHAR_ARRAY&&typeof e==="string")return[e];if(i=getIteratorOf(e)){r=[];while(n=i.next(),!n.done)r.push(n.value);return r}if(e==null)return[e];t=e.length;if(typeof t==="number"){r=new Array(t);while(t--)r[t]=e[t];return r}return[e]}t=arguments.length;r=new Array(t);while(t--)r[t]=arguments[t];return r}var isAsyncFunction=typeof Symbol!=="undefined"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return false};var debug$4=typeof location!=="undefined"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function setDebug(e,t){debug$4=e;libraryFilter=t}var libraryFilter=function(){return true};var NEEDS_THROW_FOR_STACK=!new Error("").stack;function getErrorWithStack(){if(NEEDS_THROW_FOR_STACK)try{throw new Error}catch(e){return e}return new Error}function prettyStack(e,t){var r=e.stack;if(!r)return"";t=t||0;if(r.indexOf(e.name)===0)t+=(e.name+e.message).split("\n").length;return r.split("\n").slice(t).filter(libraryFilter).map((function(e){return"\n"+e})).join("")}var dexieErrorNames=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"];var idbDomErrorNames=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"];var errorList=dexieErrorNames.concat(idbDomErrorNames);var defaultTexts={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function DexieError(e,t){this._e=getErrorWithStack();this.name=e;this.message=t}derive(DexieError).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+prettyStack(this._e,2))}},toString:function(){return this.name+": "+this.message}});function getMultiErrorMessage(e,t){return e+". Errors: "+Object.keys(t).map((function(e){return t[e].toString()})).filter((function(e,t,r){return r.indexOf(e)===t})).join("\n")}function ModifyError(e,t,r,n){this._e=getErrorWithStack();this.failures=t;this.failedKeys=n;this.successCount=r;this.message=getMultiErrorMessage(e,t)}derive(ModifyError).from(DexieError);function BulkError(e,t){this._e=getErrorWithStack();this.name="BulkError";this.failures=Object.keys(t).map((function(e){return t[e]}));this.failuresByPos=t;this.message=getMultiErrorMessage(e,t)}derive(BulkError).from(DexieError);var errnames=errorList.reduce((function(e,t){return e[t]=t+"Error",e}),{});var BaseException=DexieError;var exceptions=errorList.reduce((function(e,t){var r=t+"Error";function n(e,n){this._e=getErrorWithStack();this.name=r;if(!e){this.message=defaultTexts[t]||r;this.inner=null}else if(typeof e==="string"){this.message=""+e+(!n?"":"\n "+n);this.inner=n||null}else if(typeof e==="object"){this.message=e.name+" "+e.message;this.inner=e}}derive(n).from(BaseException);e[t]=n;return e}),{});exceptions.Syntax=SyntaxError;exceptions.Type=TypeError;exceptions.Range=RangeError;var exceptionMap=idbDomErrorNames.reduce((function(e,t){e[t+"Error"]=exceptions[t];return e}),{});function mapError(e,t){if(!e||e instanceof DexieError||e instanceof TypeError||e instanceof SyntaxError||!e.name||!exceptionMap[e.name])return e;var r=new exceptionMap[e.name](t||e.message,e);if("stack"in e){setProp(r,"stack",{get:function(){return this.inner.stack}})}return r}var fullNameExceptions=errorList.reduce((function(e,t){if(["Syntax","Type","Range"].indexOf(t)===-1)e[t+"Error"]=exceptions[t];return e}),{});fullNameExceptions.ModifyError=ModifyError;fullNameExceptions.DexieError=DexieError;fullNameExceptions.BulkError=BulkError;function nop(){}function mirror(e){return e}function pureFunctionChain(e,t){if(e==null||e===mirror)return t;return function(r){return t(e(r))}}function callBoth(e,t){return function(){e.apply(this,arguments);t.apply(this,arguments)}}function hookCreatingChain(e,t){if(e===nop)return t;return function(){var r=e.apply(this,arguments);if(r!==undefined)arguments[0]=r;var n=this.onsuccess,i=this.onerror;this.onsuccess=null;this.onerror=null;var s=t.apply(this,arguments);if(n)this.onsuccess=this.onsuccess?callBoth(n,this.onsuccess):n;if(i)this.onerror=this.onerror?callBoth(i,this.onerror):i;return s!==undefined?s:r}}function hookDeletingChain(e,t){if(e===nop)return t;return function(){e.apply(this,arguments);var r=this.onsuccess,n=this.onerror;this.onsuccess=this.onerror=null;t.apply(this,arguments);if(r)this.onsuccess=this.onsuccess?callBoth(r,this.onsuccess):r;if(n)this.onerror=this.onerror?callBoth(n,this.onerror):n}}function hookUpdatingChain(e,t){if(e===nop)return t;return function(r){var n=e.apply(this,arguments);extend(r,n);var i=this.onsuccess,s=this.onerror;this.onsuccess=null;this.onerror=null;var a=t.apply(this,arguments);if(i)this.onsuccess=this.onsuccess?callBoth(i,this.onsuccess):i;if(s)this.onerror=this.onerror?callBoth(s,this.onerror):s;return n===undefined?a===undefined?undefined:a:extend(n,a)}}function reverseStoppableEventChain(e,t){if(e===nop)return t;return function(){if(t.apply(this,arguments)===false)return false;return e.apply(this,arguments)}}function promisableChain(e,t){if(e===nop)return t;return function(){var r=e.apply(this,arguments);if(r&&typeof r.then==="function"){var n=this,i=arguments.length,s=new Array(i);while(i--)s[i]=arguments[i];return r.then((function(){return t.apply(n,s)}))}return t.apply(this,arguments)}}var INTERNAL={};var LONG_STACKS_CLIP_LIMIT=100,MAX_LONG_STACKS=20,ZONE_ECHO_LIMIT=100,_a$1$2=typeof Promise==="undefined"?[]:function(){var e=Promise.resolve();if(typeof crypto==="undefined"||!crypto.subtle)return[e,getProto(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,getProto(t),e]}(),resolvedNativePromise=_a$1$2[0],nativePromiseProto=_a$1$2[1],resolvedGlobalPromise=_a$1$2[2],nativePromiseThen=nativePromiseProto&&nativePromiseProto.then;var NativePromise=resolvedNativePromise&&resolvedNativePromise.constructor;var patchGlobalPromise=!!resolvedGlobalPromise;var stack_being_generated=false;var schedulePhysicalTick=resolvedGlobalPromise?function(){resolvedGlobalPromise.then(physicalTick)}:_global.setImmediate?setImmediate.bind(null,physicalTick):_global.MutationObserver?function(){var e=document.createElement("div");new MutationObserver((function(){physicalTick();e=null})).observe(e,{attributes:true});e.setAttribute("i","1")}:function(){setTimeout(physicalTick,0)};var asap=function(e,t){microtickQueue.push([e,t]);if(needsNewPhysicalTick){schedulePhysicalTick();needsNewPhysicalTick=false}};var isOutsideMicroTick=true,needsNewPhysicalTick=true,unhandledErrors=[],rejectingErrors=[],currentFulfiller=null,rejectionMapper=mirror;var globalPSD={id:"global",global:true,ref:0,unhandleds:[],onunhandled:globalError,pgp:false,env:{},finalize:function(){this.unhandleds.forEach((function(e){try{globalError(e[0],e[1])}catch(e){}}))}};var PSD=globalPSD;var microtickQueue=[];var numScheduledCalls=0;var tickFinalizers=[];function DexiePromise(e){if(typeof this!=="object")throw new TypeError("Promises must be constructed via new");this._listeners=[];this.onuncatched=nop;this._lib=false;var t=this._PSD=PSD;if(debug$4){this._stackHolder=getErrorWithStack();this._prev=null;this._numPrev=0}if(typeof e!=="function"){if(e!==INTERNAL)throw new TypeError("Not a function");this._state=arguments[1];this._value=arguments[2];if(this._state===false)handleRejection(this,this._value);return}this._state=null;this._value=null;++t.ref;executePromiseTask(this,e)}var thenProp={get:function(){var e=PSD,t=totalEchoes;function r(r,n){var i=this;var s=!e.global&&(e!==PSD||t!==totalEchoes);var a=s&&!decrementExpectedAwaits();var o=new DexiePromise((function(t,o){propagateToListener(i,new Listener(nativeAwaitCompatibleWrap(r,e,s,a),nativeAwaitCompatibleWrap(n,e,s,a),t,o,e))}));debug$4&&linkToPreviousPromise(o,this);return o}r.prototype=INTERNAL;return r},set:function(e){setProp(this,"then",e&&e.prototype===INTERNAL?thenProp:{get:function(){return e},set:thenProp.set})}};props(DexiePromise.prototype,{then:thenProp,_then:function(e,t){propagateToListener(this,new Listener(null,null,e,t,PSD))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=arguments[0],r=arguments[1];return typeof t==="function"?this.then(null,(function(e){return e instanceof t?r(e):PromiseReject(e)})):this.then(null,(function(e){return e&&e.name===t?r(e):PromiseReject(e)}))},finally:function(e){return this.then((function(t){e();return t}),(function(t){e();return PromiseReject(t)}))},stack:{get:function(){if(this._stack)return this._stack;try{stack_being_generated=true;var e=getStack(this,[],MAX_LONG_STACKS);var t=e.join("\nFrom previous: ");if(this._state!==null)this._stack=t;return t}finally{stack_being_generated=false}}},timeout:function(e,t){var r=this;return e<Infinity?new DexiePromise((function(n,i){var s=setTimeout((function(){return i(new exceptions.Timeout(t))}),e);r.then(n,i).finally(clearTimeout.bind(null,s))})):this}});if(typeof Symbol!=="undefined"&&Symbol.toStringTag)setProp(DexiePromise.prototype,Symbol.toStringTag,"Dexie.Promise");globalPSD.env=snapShot();function Listener(e,t,r,n,i){this.onFulfilled=typeof e==="function"?e:null;this.onRejected=typeof t==="function"?t:null;this.resolve=r;this.reject=n;this.psd=i}props(DexiePromise,{all:function(){var e=getArrayOf.apply(null,arguments).map(onPossibleParallellAsync);return new DexiePromise((function(t,r){if(e.length===0)t([]);var n=e.length;e.forEach((function(i,s){return DexiePromise.resolve(i).then((function(r){e[s]=r;if(! --n)t(e)}),r)}))}))},resolve:function(e){if(e instanceof DexiePromise)return e;if(e&&typeof e.then==="function")return new DexiePromise((function(t,r){e.then(t,r)}));var t=new DexiePromise(INTERNAL,true,e);linkToPreviousPromise(t,currentFulfiller);return t},reject:PromiseReject,race:function(){var e=getArrayOf.apply(null,arguments).map(onPossibleParallellAsync);return new DexiePromise((function(t,r){e.map((function(e){return DexiePromise.resolve(e).then(t,r)}))}))},PSD:{get:function(){return PSD},set:function(e){return PSD=e}},totalEchoes:{get:function(){return totalEchoes}},newPSD:newScope,usePSD,scheduler:{get:function(){return asap},set:function(e){asap=e}},rejectionMapper:{get:function(){return rejectionMapper},set:function(e){rejectionMapper=e}},follow:function(e,t){return new DexiePromise((function(r,n){return newScope((function(t,r){var n=PSD;n.unhandleds=[];n.onunhandled=r;n.finalize=callBoth((function(){var e=this;run_at_end_of_this_or_next_physical_tick((function(){e.unhandleds.length===0?t():r(e.unhandleds[0])}))}),n.finalize);e()}),t,r,n)}))}});if(NativePromise){if(NativePromise.allSettled)setProp(DexiePromise,"allSettled",(function(){var e=getArrayOf.apply(null,arguments).map(onPossibleParallellAsync);return new DexiePromise((function(t){if(e.length===0)t([]);var r=e.length;var n=new Array(r);e.forEach((function(e,i){return DexiePromise.resolve(e).then((function(e){return n[i]={status:"fulfilled",value:e}}),(function(e){return n[i]={status:"rejected",reason:e}})).then((function(){return--r||t(n)}))}))}))}));if(NativePromise.any&&typeof AggregateError!=="undefined")setProp(DexiePromise,"any",(function(){var e=getArrayOf.apply(null,arguments).map(onPossibleParallellAsync);return new DexiePromise((function(t,r){if(e.length===0)r(new AggregateError([]));var n=e.length;var i=new Array(n);e.forEach((function(e,s){return DexiePromise.resolve(e).then((function(e){return t(e)}),(function(e){i[s]=e;if(! --n)r(new AggregateError(i))}))}))}))}))}function executePromiseTask(e,t){try{t((function(t){if(e._state!==null)return;if(t===e)throw new TypeError("A promise cannot be resolved with itself.");var r=e._lib&&beginMicroTickScope();if(t&&typeof t.then==="function"){executePromiseTask(e,(function(e,r){t instanceof DexiePromise?t._then(e,r):t.then(e,r)}))}else{e._state=true;e._value=t;propagateAllListeners(e)}if(r)endMicroTickScope()}),handleRejection.bind(null,e))}catch(t){handleRejection(e,t)}}function handleRejection(e,t){rejectingErrors.push(t);if(e._state!==null)return;var r=e._lib&&beginMicroTickScope();t=rejectionMapper(t);e._state=false;e._value=t;debug$4&&t!==null&&typeof t==="object"&&!t._promise&&tryCatch((function(){var r=getPropertyDescriptor(t,"stack");t._promise=e;setProp(t,"stack",{get:function(){return stack_being_generated?r&&(r.get?r.get.apply(t):r.value):e.stack}})}));addPossiblyUnhandledError(e);propagateAllListeners(e);if(r)endMicroTickScope()}function propagateAllListeners(e){var t=e._listeners;e._listeners=[];for(var r=0,n=t.length;r<n;++r){propagateToListener(e,t[r])}var i=e._PSD;--i.ref||i.finalize();if(numScheduledCalls===0){++numScheduledCalls;asap((function(){if(--numScheduledCalls===0)finalizePhysicalTick()}),[])}}function propagateToListener(e,t){if(e._state===null){e._listeners.push(t);return}var r=e._state?t.onFulfilled:t.onRejected;if(r===null){return(e._state?t.resolve:t.reject)(e._value)}++t.psd.ref;++numScheduledCalls;asap(callListener,[r,e,t])}function callListener(e,t,r){try{currentFulfiller=t;var n,i=t._value;if(t._state){n=e(i)}else{if(rejectingErrors.length)rejectingErrors=[];n=e(i);if(rejectingErrors.indexOf(i)===-1)markErrorAsHandled(t)}r.resolve(n)}catch(e){r.reject(e)}finally{currentFulfiller=null;if(--numScheduledCalls===0)finalizePhysicalTick();--r.psd.ref||r.psd.finalize()}}function getStack(e,t,r){if(t.length===r)return t;var n="";if(e._state===false){var i=e._value,s,a;if(i!=null){s=i.name||"Error";a=i.message||i;n=prettyStack(i,0)}else{s=i;a=""}t.push(s+(a?": "+a:"")+n)}if(debug$4){n=prettyStack(e._stackHolder,2);if(n&&t.indexOf(n)===-1)t.push(n);if(e._prev)getStack(e._prev,t,r)}return t}function linkToPreviousPromise(e,t){var r=t?t._numPrev+1:0;if(r<LONG_STACKS_CLIP_LIMIT){e._prev=t;e._numPrev=r}}function physicalTick(){beginMicroTickScope()&&endMicroTickScope()}function beginMicroTickScope(){var e=isOutsideMicroTick;isOutsideMicroTick=false;needsNewPhysicalTick=false;return e}function endMicroTickScope(){var e,t,r;do{while(microtickQueue.length>0){e=microtickQueue;microtickQueue=[];r=e.length;for(t=0;t<r;++t){var n=e[t];n[0].apply(null,n[1])}}}while(microtickQueue.length>0);isOutsideMicroTick=true;needsNewPhysicalTick=true}function finalizePhysicalTick(){var e=unhandledErrors;unhandledErrors=[];e.forEach((function(e){e._PSD.onunhandled.call(null,e._value,e)}));var t=tickFinalizers.slice(0);var r=t.length;while(r)t[--r]()}function run_at_end_of_this_or_next_physical_tick(e){function t(){e();tickFinalizers.splice(tickFinalizers.indexOf(t),1)}tickFinalizers.push(t);++numScheduledCalls;asap((function(){if(--numScheduledCalls===0)finalizePhysicalTick()}),[])}function addPossiblyUnhandledError(e){if(!unhandledErrors.some((function(t){return t._value===e._value})))unhandledErrors.push(e)}function markErrorAsHandled(e){var t=unhandledErrors.length;while(t)if(unhandledErrors[--t]._value===e._value){unhandledErrors.splice(t,1);return}}function PromiseReject(e){return new DexiePromise(INTERNAL,false,e)}function wrap(e,t){var r=PSD;return function(){var n=beginMicroTickScope(),i=PSD;try{switchToZone(r,true);return e.apply(this,arguments)}catch(e){t&&t(e)}finally{switchToZone(i,false);if(n)endMicroTickScope()}}}var task={awaits:0,echoes:0,id:0};var taskCounter=0;var zoneStack=[];var zoneEchoes=0;var totalEchoes=0;var zone_id_counter=0;function newScope(e,t,r,n){var i=PSD,s=Object.create(i);s.parent=i;s.ref=0;s.global=false;s.id=++zone_id_counter;var a=globalPSD.env;s.env=patchGlobalPromise?{Promise:DexiePromise,PromiseProp:{value:DexiePromise,configurable:true,writable:true},all:DexiePromise.all,race:DexiePromise.race,allSettled:DexiePromise.allSettled,any:DexiePromise.any,resolve:DexiePromise.resolve,reject:DexiePromise.reject,nthen:getPatchedPromiseThen(a.nthen,s),gthen:getPatchedPromiseThen(a.gthen,s)}:{};if(t)extend(s,t);++i.ref;s.finalize=function(){--this.parent.ref||this.parent.finalize()};var o=usePSD(s,e,r,n);if(s.ref===0)s.finalize();return o}function incrementExpectedAwaits(){if(!task.id)task.id=++taskCounter;++task.awaits;task.echoes+=ZONE_ECHO_LIMIT;return task.id}function decrementExpectedAwaits(){if(!task.awaits)return false;if(--task.awaits===0)task.id=0;task.echoes=task.awaits*ZONE_ECHO_LIMIT;return true}if((""+nativePromiseThen).indexOf("[native code]")===-1){incrementExpectedAwaits=decrementExpectedAwaits=nop}function onPossibleParallellAsync(e){if(task.echoes&&e&&e.constructor===NativePromise){incrementExpectedAwaits();return e.then((function(e){decrementExpectedAwaits();return e}),(function(e){decrementExpectedAwaits();return rejection(e)}))}return e}function zoneEnterEcho(e){++totalEchoes;if(!task.echoes||--task.echoes===0){task.echoes=task.id=0}zoneStack.push(PSD);switchToZone(e,true)}function zoneLeaveEcho(){var e=zoneStack[zoneStack.length-1];zoneStack.pop();switchToZone(e,false)}function switchToZone(e,t){var r=PSD;if(t?task.echoes&&(!zoneEchoes++||e!==PSD):zoneEchoes&&(! --zoneEchoes||e!==PSD)){enqueueNativeMicroTask(t?zoneEnterEcho.bind(null,e):zoneLeaveEcho)}if(e===PSD)return;PSD=e;if(r===globalPSD)globalPSD.env=snapShot();if(patchGlobalPromise){var n=globalPSD.env.Promise;var i=e.env;nativePromiseProto.then=i.nthen;n.prototype.then=i.gthen;if(r.global||e.global){Object.defineProperty(_global,"Promise",i.PromiseProp);n.all=i.all;n.race=i.race;n.resolve=i.resolve;n.reject=i.reject;if(i.allSettled)n.allSettled=i.allSettled;if(i.any)n.any=i.any}}}function snapShot(){var e=_global.Promise;return patchGlobalPromise?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(_global,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:nativePromiseProto.then,gthen:e.prototype.then}:{}}function usePSD(e,t,r,n,i){var s=PSD;try{switchToZone(e,true);return t(r,n,i)}finally{switchToZone(s,false)}}function enqueueNativeMicroTask(e){nativePromiseThen.call(resolvedNativePromise,e)}function nativeAwaitCompatibleWrap(e,t,r,n){return typeof e!=="function"?e:function(){var i=PSD;if(r)incrementExpectedAwaits();switchToZone(t,true);try{return e.apply(this,arguments)}finally{switchToZone(i,false);if(n)enqueueNativeMicroTask(decrementExpectedAwaits)}}}function getPatchedPromiseThen(e,t){return function(r,n){return e.call(this,nativeAwaitCompatibleWrap(r,t),nativeAwaitCompatibleWrap(n,t))}}var UNHANDLEDREJECTION="unhandledrejection";function globalError(e,t){var r;try{r=t.onuncatched(e)}catch(e){}if(r!==false)try{var n,i={promise:t,reason:e};if(_global.document&&document.createEvent){n=document.createEvent("Event");n.initEvent(UNHANDLEDREJECTION,true,true);extend(n,i)}else if(_global.CustomEvent){n=new CustomEvent(UNHANDLEDREJECTION,{detail:i});extend(n,i)}if(n&&_global.dispatchEvent){dispatchEvent(n);if(!_global.PromiseRejectionEvent&&_global.onunhandledrejection)try{_global.onunhandledrejection(n)}catch(e){}}if(debug$4&&n&&!n.defaultPrevented){console.warn("Unhandled rejection: "+(e.stack||e))}}catch(e){}}var rejection=DexiePromise.reject;function tempTransaction(e,t,r,n){if(!e.idbdb||!e._state.openComplete&&(!PSD.letThrough&&!e._vip)){if(e._state.openComplete){return rejection(new exceptions.DatabaseClosed(e._state.dbOpenError))}if(!e._state.isBeingOpened){if(!e._options.autoOpen)return rejection(new exceptions.DatabaseClosed);e.open().catch(nop)}return e._state.dbReadyPromise.then((function(){return tempTransaction(e,t,r,n)}))}else{var i=e._createTransaction(t,r,e._dbSchema);try{i.create();e._state.PR1398_maxLoop=3}catch(i){if(i.name===errnames.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0){console.warn("Dexie: Need to reopen db");e._close();return e.open().then((function(){return tempTransaction(e,t,r,n)}))}return rejection(i)}return i._promise(t,(function(e,t){return newScope((function(){PSD.trans=i;return n(e,t,i)}))})).then((function(e){return i._completion.then((function(){return e}))}))}}var DEXIE_VERSION="3.2.3";var maxString=String.fromCharCode(65535);var minKey=-Infinity;var INVALID_KEY_ARGUMENT="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.";var STRING_EXPECTED="String expected.";var connections=[];var isIEOrEdge=typeof navigator!=="undefined"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent);var hasIEDeleteObjectStoreBug=isIEOrEdge;var hangsOnDeleteLargeKeyRange=isIEOrEdge;var dexieStackFrameFilter=function(e){return!/(dexie\.js|dexie\.min\.js)/.test(e)};var DBNAMES_DB="__dbnames";var READONLY="readonly";var READWRITE="readwrite";function combine$2(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var AnyRange={type:3,lower:-Infinity,lowerOpen:false,upper:[[]],upperOpen:false};function workaroundForUndefinedPrimKey(e){return typeof e==="string"&&!/\./.test(e)?function(t){if(t[e]===undefined&&e in t){t=deepClone$1(t);delete t[e]}return t}:function(e){return e}}var Table=function(){function e(){}e.prototype._trans=function(e,t,r){var n=this._tx||PSD.trans;var i=this.name;function s(e,r,n){if(!n.schema[i])throw new exceptions.NotFound("Table "+i+" not part of transaction");return t(n.idbtrans,n)}var a=beginMicroTickScope();try{return n&&n.db===this.db?n===PSD.trans?n._promise(e,s,r):newScope((function(){return n._promise(e,s,r)}),{trans:n,transless:PSD.transless||PSD}):tempTransaction(this.db,e,[this.name],s)}finally{if(a)endMicroTickScope()}};e.prototype.get=function(e,t){var r=this;if(e&&e.constructor===Object)return this.where(e).first(t);return this._trans("readonly",(function(t){return r.core.get({trans:t,key:e}).then((function(e){return r.hook.reading.fire(e)}))})).then(t)};e.prototype.where=function(e){if(typeof e==="string")return new this.db.WhereClause(this,e);if(isArray$9(e))return new this.db.WhereClause(this,"["+e.join("+")+"]");var t=keys$4(e);if(t.length===1)return this.where(t[0]).equals(e[t[0]]);var r=this.schema.indexes.concat(this.schema.primKey).filter((function(e){return e.compound&&t.every((function(t){return e.keyPath.indexOf(t)>=0}))&&e.keyPath.every((function(e){return t.indexOf(e)>=0}))}))[0];if(r&&this.db._maxKey!==maxString)return this.where(r.name).equals(r.keyPath.map((function(t){return e[t]})));if(!r&&debug$4)console.warn("The query "+JSON.stringify(e)+" on "+this.name+" would benefit of a "+("compound index ["+t.join("+")+"]"));var n=this.schema.idxByName;var i=this.db._deps.indexedDB;function s(e,t){try{return i.cmp(e,t)===0}catch(e){return false}}var a=t.reduce((function(t,r){var i=t[0],a=t[1];var o=n[r];var f=e[r];return[i||o,i||!o?combine$2(a,o&&o.multi?function(e){var t=getByKeyPath(e,r);return isArray$9(t)&&t.some((function(e){return s(f,e)}))}:function(e){return s(f,getByKeyPath(e,r))}):a]}),[null,null]),o=a[0],f=a[1];return o?this.where(o.name).equals(e[o.keyPath]).filter(f):r?this.filter(f):this.where(t).equals("")};e.prototype.filter=function(e){return this.toCollection().and(e)};e.prototype.count=function(e){return this.toCollection().count(e)};e.prototype.offset=function(e){return this.toCollection().offset(e)};e.prototype.limit=function(e){return this.toCollection().limit(e)};e.prototype.each=function(e){return this.toCollection().each(e)};e.prototype.toArray=function(e){return this.toCollection().toArray(e)};e.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))};e.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,isArray$9(e)?"["+e.join("+")+"]":e))};e.prototype.reverse=function(){return this.toCollection().reverse()};e.prototype.mapToClass=function(e){this.schema.mappedClass=e;var t=function(t){if(!t)return t;var r=Object.create(e.prototype);for(var n in t)if(hasOwn(t,n))try{r[n]=t[n]}catch(e){}return r};if(this.schema.readHook){this.hook.reading.unsubscribe(this.schema.readHook)}this.schema.readHook=t;this.hook("reading",t);return e};e.prototype.defineClass=function(){function e(e){extend(this,e)}return this.mapToClass(e)};e.prototype.add=function(e,t){var r=this;var n=this.schema.primKey,i=n.auto,s=n.keyPath;var a=e;if(s&&i){a=workaroundForUndefinedPrimKey(s)(e)}return this._trans("readwrite",(function(e){return r.core.mutate({trans:e,type:"add",keys:t!=null?[t]:null,values:[a]})})).then((function(e){return e.numFailures?DexiePromise.reject(e.failures[0]):e.lastResult})).then((function(t){if(s){try{setByKeyPath(e,s,t)}catch(e){}}return t}))};e.prototype.update=function(e,t){if(typeof e==="object"&&!isArray$9(e)){var r=getByKeyPath(e,this.schema.primKey.keyPath);if(r===undefined)return rejection(new exceptions.InvalidArgument("Given object does not contain its primary key"));try{if(typeof t!=="function"){keys$4(t).forEach((function(r){setByKeyPath(e,r,t[r])}))}else{t(e,{value:e,primKey:r})}}catch(e){}return this.where(":id").equals(r).modify(t)}else{return this.where(":id").equals(e).modify(t)}};e.prototype.put=function(e,t){var r=this;var n=this.schema.primKey,i=n.auto,s=n.keyPath;var a=e;if(s&&i){a=workaroundForUndefinedPrimKey(s)(e)}return this._trans("readwrite",(function(e){return r.core.mutate({trans:e,type:"put",values:[a],keys:t!=null?[t]:null})})).then((function(e){return e.numFailures?DexiePromise.reject(e.failures[0]):e.lastResult})).then((function(t){if(s){try{setByKeyPath(e,s,t)}catch(e){}}return t}))};e.prototype.delete=function(e){var t=this;return this._trans("readwrite",(function(r){return t.core.mutate({trans:r,type:"delete",keys:[e]})})).then((function(e){return e.numFailures?DexiePromise.reject(e.failures[0]):undefined}))};e.prototype.clear=function(){var e=this;return this._trans("readwrite",(function(t){return e.core.mutate({trans:t,type:"deleteRange",range:AnyRange})})).then((function(e){return e.numFailures?DexiePromise.reject(e.failures[0]):undefined}))};e.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",(function(r){return t.core.getMany({keys:e,trans:r}).then((function(e){return e.map((function(e){return t.hook.reading.fire(e)}))}))}))};e.prototype.bulkAdd=function(e,t,r){var n=this;var i=Array.isArray(t)?t:undefined;r=r||(i?undefined:t);var s=r?r.allKeys:undefined;return this._trans("readwrite",(function(t){var r=n.schema.primKey,a=r.auto,o=r.keyPath;if(o&&i)throw new exceptions.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new exceptions.InvalidArgument("Arguments objects and keys must have the same length");var f=e.length;var c=o&&a?e.map(workaroundForUndefinedPrimKey(o)):e;return n.core.mutate({trans:t,type:"add",keys:i,values:c,wantResults:s}).then((function(e){var t=e.numFailures,r=e.results,i=e.lastResult,a=e.failures;var o=s?r:i;if(t===0)return o;throw new BulkError(n.name+".bulkAdd(): "+t+" of "+f+" operations failed",a)}))}))};e.prototype.bulkPut=function(e,t,r){var n=this;var i=Array.isArray(t)?t:undefined;r=r||(i?undefined:t);var s=r?r.allKeys:undefined;return this._trans("readwrite",(function(t){var r=n.schema.primKey,a=r.auto,o=r.keyPath;if(o&&i)throw new exceptions.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new exceptions.InvalidArgument("Arguments objects and keys must have the same length");var f=e.length;var c=o&&a?e.map(workaroundForUndefinedPrimKey(o)):e;return n.core.mutate({trans:t,type:"put",keys:i,values:c,wantResults:s}).then((function(e){var t=e.numFailures,r=e.results,i=e.lastResult,a=e.failures;var o=s?r:i;if(t===0)return o;throw new BulkError(n.name+".bulkPut(): "+t+" of "+f+" operations failed",a)}))}))};e.prototype.bulkDelete=function(e){var t=this;var r=e.length;return this._trans("readwrite",(function(r){return t.core.mutate({trans:r,type:"delete",keys:e})})).then((function(e){var n=e.numFailures,i=e.lastResult,s=e.failures;if(n===0)return i;throw new BulkError(t.name+".bulkDelete(): "+n+" of "+r+" operations failed",s)}))};return e}();function Events(e){var t={};var r=function(r,n){if(n){var i=arguments.length,s=new Array(i-1);while(--i)s[i-1]=arguments[i];t[r].subscribe.apply(null,s);return e}else if(typeof r==="string"){return t[r]}};r.addEventType=s;for(var n=1,i=arguments.length;n<i;++n){s(arguments[n])}return r;function s(e,n,i){if(typeof e==="object")return a(e);if(!n)n=reverseStoppableEventChain;if(!i)i=nop;var s={subscribers:[],fire:i,subscribe:function(e){if(s.subscribers.indexOf(e)===-1){s.subscribers.push(e);s.fire=n(s.fire,e)}},unsubscribe:function(e){s.subscribers=s.subscribers.filter((function(t){return t!==e}));s.fire=s.subscribers.reduce(n,i)}};t[e]=r[e]=s;return s}function a(e){keys$4(e).forEach((function(t){var r=e[t];if(isArray$9(r)){s(t,e[t][0],e[t][1])}else if(r==="asap"){var n=s(t,mirror,(function e(){var t=arguments.length,r=new Array(t);while(t--)r[t]=arguments[t];n.subscribers.forEach((function(e){asap$1((function t(){e.apply(null,r)}))}))}))}else throw new exceptions.InvalidArgument("Invalid event config")}))}}function makeClassConstructor(e,t){derive(t).from({prototype:e});return t}function createTableConstructor(e){return makeClassConstructor(Table.prototype,(function t(r,n,i){this.db=e;this._tx=i;this.name=r;this.schema=n;this.hook=e._allTables[r]?e._allTables[r].hook:Events(null,{creating:[hookCreatingChain,nop],reading:[pureFunctionChain,mirror],updating:[hookUpdatingChain,nop],deleting:[hookDeletingChain,nop]})}))}function isPlainKeyRange(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function addFilter(e,t){e.filter=combine$2(e.filter,t)}function addReplayFilter(e,t,r){var n=e.replayFilter;e.replayFilter=n?function(){return combine$2(n(),t())}:t;e.justLimit=r&&!n}function addMatchFilter(e,t){e.isMatch=combine$2(e.isMatch,t)}function getIndexOrStore(e,t){if(e.isPrimKey)return t.primaryKey;var r=t.getIndexByKeyPath(e.index);if(!r)throw new exceptions.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return r}function openCursor(e,t,r){var n=getIndexOrStore(e,t.schema);return t.openCursor({trans:r,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:n,range:e.range}})}function iter(e,t,r,n){var i=e.replayFilter?combine$2(e.filter,e.replayFilter()):e.filter;if(!e.or){return iterate(openCursor(e,n,r),combine$2(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}else{var s={};var a=function(e,r,n){if(!i||i(r,n,(function(e){return r.stop(e)}),(function(e){return r.fail(e)}))){var a=r.primaryKey;var o=""+a;if(o==="[object ArrayBuffer]")o=""+new Uint8Array(a);if(!hasOwn(s,o)){s[o]=true;t(e,r,n)}}};return Promise.all([e.or._iterate(a,r),iterate(openCursor(e,n,r),e.algorithm,a,!e.keysOnly&&e.valueMapper)])}}function iterate(e,t,r,n){var i=n?function(e,t,i){return r(n(e),t,i)}:r;var s=wrap(i);return e.then((function(e){if(e){return e.start((function(){var r=function(){return e.continue()};if(!t||t(e,(function(e){return r=e}),(function(t){e.stop(t);r=nop}),(function(t){e.fail(t);r=nop})))s(e.value,e,(function(e){return r=e}));r()}))}}))}function cmp$3(e,t){try{var r=type(e);var n=type(t);if(r!==n){if(r==="Array")return 1;if(n==="Array")return-1;if(r==="binary")return 1;if(n==="binary")return-1;if(r==="string")return 1;if(n==="string")return-1;if(r==="Date")return 1;if(n!=="Date")return NaN;return-1}switch(r){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":{return compareUint8Arrays(getUint8Array(e),getUint8Array(t))}case"Array":return compareArrays(e,t)}}catch(e){}return NaN}function compareArrays(e,t){var r=e.length;var n=t.length;var i=r<n?r:n;for(var s=0;s<i;++s){var a=cmp$3(e[s],t[s]);if(a!==0)return a}return r===n?0:r<n?-1:1}function compareUint8Arrays(e,t){var r=e.length;var n=t.length;var i=r<n?r:n;for(var s=0;s<i;++s){if(e[s]!==t[s])return e[s]<t[s]?-1:1}return r===n?0:r<n?-1:1}function type(e){var t=typeof e;if(t!=="object")return t;if(ArrayBuffer.isView(e))return"binary";var r=toStringTag(e);return r==="ArrayBuffer"?"binary":r}function getUint8Array(e){if(e instanceof Uint8Array)return e;if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);return new Uint8Array(e)}var Collection$1=function(){function e(){}e.prototype._read=function(e,t){var r=this._ctx;return r.error?r.table._trans(null,rejection.bind(null,r.error)):r.table._trans("readonly",e).then(t)};e.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,rejection.bind(null,t.error)):t.table._trans("readwrite",e,"locked")};e.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=combine$2(t.algorithm,e)};e.prototype._iterate=function(e,t){return iter(this._ctx,e,t,this._ctx.table.core)};e.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),r=Object.create(this._ctx);if(e)extend(r,e);t._ctx=r;return t};e.prototype.raw=function(){this._ctx.valueMapper=null;return this};e.prototype.each=function(e){var t=this._ctx;return this._read((function(r){return iter(t,e,r,t.table.core)}))};e.prototype.count=function(e){var t=this;return this._read((function(e){var r=t._ctx;var n=r.table.core;if(isPlainKeyRange(r,true)){return n.count({trans:e,query:{index:getIndexOrStore(r,n.schema),range:r.range}}).then((function(e){return Math.min(e,r.limit)}))}else{var i=0;return iter(r,(function(){++i;return false}),e,n).then((function(){return i}))}})).then(e)};e.prototype.sortBy=function(e,t){var r=e.split(".").reverse(),n=r[0],i=r.length-1;function s(e,t){if(t)return s(e[r[t]],t-1);return e[n]}var a=this._ctx.dir==="next"?1:-1;function o(e,t){var r=s(e,i),n=s(t,i);return r<n?-a:r>n?a:0}return this.toArray((function(e){return e.sort(o)})).then(t)};e.prototype.toArray=function(e){var t=this;return this._read((function(e){var r=t._ctx;if(r.dir==="next"&&isPlainKeyRange(r,true)&&r.limit>0){var n=r.valueMapper;var i=getIndexOrStore(r,r.table.core.schema);return r.table.core.query({trans:e,limit:r.limit,values:true,query:{index:i,range:r.range}}).then((function(e){var t=e.result;return n?t.map(n):t}))}else{var s=[];return iter(r,(function(e){return s.push(e)}),e,r.table.core).then((function(){return s}))}}),e)};e.prototype.offset=function(e){var t=this._ctx;if(e<=0)return this;t.offset+=e;if(isPlainKeyRange(t)){addReplayFilter(t,(function(){var t=e;return function(e,r){if(t===0)return true;if(t===1){--t;return false}r((function(){e.advance(t);t=0}));return false}}))}else{addReplayFilter(t,(function(){var t=e;return function(){return--t<0}}))}return this};e.prototype.limit=function(e){this._ctx.limit=Math.min(this._ctx.limit,e);addReplayFilter(this._ctx,(function(){var t=e;return function(e,r,n){if(--t<=0)r(n);return t>=0}}),true);return this};e.prototype.until=function(e,t){addFilter(this._ctx,(function(r,n,i){if(e(r.value)){n(i);return t}else{return true}}));return this};e.prototype.first=function(e){return this.limit(1).toArray((function(e){return e[0]})).then(e)};e.prototype.last=function(e){return this.reverse().first(e)};e.prototype.filter=function(e){addFilter(this._ctx,(function(t){return e(t.value)}));addMatchFilter(this._ctx,e);return this};e.prototype.and=function(e){return this.filter(e)};e.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)};e.prototype.reverse=function(){this._ctx.dir=this._ctx.dir==="prev"?"next":"prev";if(this._ondirectionchange)this._ondirectionchange(this._ctx.dir);return this};e.prototype.desc=function(){return this.reverse()};e.prototype.eachKey=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;return this.each((function(t,r){e(r.key,r)}))};e.prototype.eachUniqueKey=function(e){this._ctx.unique="unique";return this.eachKey(e)};e.prototype.eachPrimaryKey=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;return this.each((function(t,r){e(r.primaryKey,r)}))};e.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var r=[];return this.each((function(e,t){r.push(t.key)})).then((function(){return r})).then(e)};e.prototype.primaryKeys=function(e){var t=this._ctx;if(t.dir==="next"&&isPlainKeyRange(t,true)&&t.limit>0){return this._read((function(e){var r=getIndexOrStore(t,t.table.core.schema);return t.table.core.query({trans:e,values:false,limit:t.limit,query:{index:r,range:t.range}})})).then((function(e){var t=e.result;return t})).then(e)}t.keysOnly=!t.isMatch;var r=[];return this.each((function(e,t){r.push(t.primaryKey)})).then((function(){return r})).then(e)};e.prototype.uniqueKeys=function(e){this._ctx.unique="unique";return this.keys(e)};e.prototype.firstKey=function(e){return this.limit(1).keys((function(e){return e[0]})).then(e)};e.prototype.lastKey=function(e){return this.reverse().firstKey(e)};e.prototype.distinct=function(){var e=this._ctx,t=e.index&&e.table.schema.idxByName[e.index];if(!t||!t.multi)return this;var r={};addFilter(this._ctx,(function(e){var t=e.primaryKey.toString();var n=hasOwn(r,t);r[t]=true;return!n}));return this};e.prototype.modify=function(e){var t=this;var r=this._ctx;return this._write((function(n){var i;if(typeof e==="function"){i=e}else{var s=keys$4(e);var a=s.length;i=function(t){var r=false;for(var n=0;n<a;++n){var i=s[n],o=e[i];if(getByKeyPath(t,i)!==o){setByKeyPath(t,i,o);r=true}}return r}}var o=r.table.core;var f=o.schema.primaryKey,c=f.outbound,u=f.extractKey;var l=t.db._options.modifyChunkSize||200;var h=[];var d=0;var p=[];var y=function(e,t){var r=t.failures,n=t.numFailures;d+=e-n;for(var i=0,s=keys$4(r);i<s.length;i++){var a=s[i];h.push(r[a])}};return t.clone().primaryKeys().then((function(t){var s=function(a){var f=Math.min(l,t.length-a);return o.getMany({trans:n,keys:t.slice(a,a+f),cache:"immutable"}).then((function(h){var d=[];var p=[];var m=c?[]:null;var g=[];for(var b=0;b<f;++b){var A=h[b];var w={value:deepClone$1(A),primKey:t[a+b]};if(i.call(w,w.value,w)!==false){if(w.value==null){g.push(t[a+b])}else if(!c&&cmp$3(u(A),u(w.value))!==0){g.push(t[a+b]);d.push(w.value)}else{p.push(w.value);if(c)m.push(t[a+b])}}}var E=isPlainKeyRange(r)&&r.limit===Infinity&&(typeof e!=="function"||e===deleteCallback)&&{index:r.index,range:r.range};return Promise.resolve(d.length>0&&o.mutate({trans:n,type:"add",values:d}).then((function(e){for(var t in e.failures){g.splice(parseInt(t),1)}y(d.length,e)}))).then((function(){return(p.length>0||E&&typeof e==="object")&&o.mutate({trans:n,type:"put",keys:m,values:p,criteria:E,changeSpec:typeof e!=="function"&&e}).then((function(e){return y(p.length,e)}))})).then((function(){return(g.length>0||E&&e===deleteCallback)&&o.mutate({trans:n,type:"delete",keys:g,criteria:E}).then((function(e){return y(g.length,e)}))})).then((function(){return t.length>a+f&&s(a+l)}))}))};return s(0).then((function(){if(h.length>0)throw new ModifyError("Error modifying one or more objects",h,d,p);return t.length}))}))}))};e.prototype.delete=function(){var e=this._ctx,t=e.range;if(isPlainKeyRange(e)&&(e.isPrimKey&&!hangsOnDeleteLargeKeyRange||t.type===3)){return this._write((function(r){var n=e.table.core.schema.primaryKey;var i=t;return e.table.core.count({trans:r,query:{index:n,range:i}}).then((function(t){return e.table.core.mutate({trans:r,type:"deleteRange",range:i}).then((function(e){var r=e.failures;var n=e.numFailures;if(n)throw new ModifyError("Could not delete some values",Object.keys(r).map((function(e){return r[e]})),t-n);return t-n}))}))}))}return this.modify(deleteCallback)};return e}();var deleteCallback=function(e,t){return t.value=null};function createCollectionConstructor(e){return makeClassConstructor(Collection$1.prototype,(function t(r,n){this.db=e;var i=AnyRange,s=null;if(n)try{i=n()}catch(e){s=e}var a=r._ctx;var o=a.table;var f=o.hook.reading.fire;this._ctx={table:o,index:a.index,isPrimKey:!a.index||o.schema.primKey.keyPath&&a.index===o.schema.primKey.name,range:i,keysOnly:false,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:true,isMatch:null,offset:0,limit:Infinity,error:s,or:a.or,valueMapper:f!==mirror?f:null}}))}function simpleCompare(e,t){return e<t?-1:e===t?0:1}function simpleCompareReverse(e,t){return e>t?-1:e===t?0:1}function fail(e,t,r){var n=e instanceof WhereClause?new e.Collection(e):e;n._ctx.error=r?new r(t):new TypeError(t);return n}function emptyCollection(e){return new e.Collection(e,(function(){return rangeEqual("")})).limit(0)}function upperFactory(e){return e==="next"?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()}}function lowerFactory(e){return e==="next"?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()}}function nextCasing(e,t,r,n,i,s){var a=Math.min(e.length,n.length);var o=-1;for(var f=0;f<a;++f){var c=t[f];if(c!==n[f]){if(i(e[f],r[f])<0)return e.substr(0,f)+r[f]+r.substr(f+1);if(i(e[f],n[f])<0)return e.substr(0,f)+n[f]+r.substr(f+1);if(o>=0)return e.substr(0,o)+t[o]+r.substr(o+1);return null}if(i(e[f],c)<0)o=f}if(a<n.length&&s==="next")return e+r.substr(e.length);if(a<e.length&&s==="prev")return e.substr(0,r.length);return o<0?null:e.substr(0,o)+n[o]+r.substr(o+1)}function addIgnoreCaseAlgorithm(e,t,r,n){var i,s,a,o,f,c,u,l=r.length;if(!r.every((function(e){return typeof e==="string"}))){return fail(e,STRING_EXPECTED)}function h(e){i=upperFactory(e);s=lowerFactory(e);a=e==="next"?simpleCompare:simpleCompareReverse;var t=r.map((function(e){return{lower:s(e),upper:i(e)}})).sort((function(e,t){return a(e.lower,t.lower)}));o=t.map((function(e){return e.upper}));f=t.map((function(e){return e.lower}));c=e;u=e==="next"?"":n}h("next");var d=new e.Collection(e,(function(){return createRange(o[0],f[l-1]+n)}));d._ondirectionchange=function(e){h(e)};var p=0;d._addAlgorithm((function(e,r,n){var i=e.key;if(typeof i!=="string")return false;var h=s(i);if(t(h,f,p)){return true}else{var d=null;for(var y=p;y<l;++y){var m=nextCasing(i,h,o[y],f[y],a,c);if(m===null&&d===null)p=y+1;else if(d===null||a(d,m)>0){d=m}}if(d!==null){r((function(){e.continue(d+u)}))}else{r(n)}return false}}));return d}function createRange(e,t,r,n){return{type:2,lower:e,upper:t,lowerOpen:r,upperOpen:n}}function rangeEqual(e){return{type:1,lower:e,upper:e}}var WhereClause=function(){function e(){}Object.defineProperty(e.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:false,configurable:true});e.prototype.between=function(e,t,r,n){r=r!==false;n=n===true;try{if(this._cmp(e,t)>0||this._cmp(e,t)===0&&(r||n)&&!(r&&n))return emptyCollection(this);return new this.Collection(this,(function(){return createRange(e,t,!r,!n)}))}catch(e){return fail(this,INVALID_KEY_ARGUMENT)}};e.prototype.equals=function(e){if(e==null)return fail(this,INVALID_KEY_ARGUMENT);return new this.Collection(this,(function(){return rangeEqual(e)}))};e.prototype.above=function(e){if(e==null)return fail(this,INVALID_KEY_ARGUMENT);return new this.Collection(this,(function(){return createRange(e,undefined,true)}))};e.prototype.aboveOrEqual=function(e){if(e==null)return fail(this,INVALID_KEY_ARGUMENT);return new this.Collection(this,(function(){return createRange(e,undefined,false)}))};e.prototype.below=function(e){if(e==null)return fail(this,INVALID_KEY_ARGUMENT);return new this.Collection(this,(function(){return createRange(undefined,e,false,true)}))};e.prototype.belowOrEqual=function(e){if(e==null)return fail(this,INVALID_KEY_ARGUMENT);return new this.Collection(this,(function(){return createRange(undefined,e)}))};e.prototype.startsWith=function(e){if(typeof e!=="string")return fail(this,STRING_EXPECTED);return this.between(e,e+maxString,true,true)};e.prototype.startsWithIgnoreCase=function(e){if(e==="")return this.startsWith(e);return addIgnoreCaseAlgorithm(this,(function(e,t){return e.indexOf(t[0])===0}),[e],maxString)};e.prototype.equalsIgnoreCase=function(e){return addIgnoreCaseAlgorithm(this,(function(e,t){return e===t[0]}),[e],"")};e.prototype.anyOfIgnoreCase=function(){var e=getArrayOf.apply(NO_CHAR_ARRAY,arguments);if(e.length===0)return emptyCollection(this);return addIgnoreCaseAlgorithm(this,(function(e,t){return t.indexOf(e)!==-1}),e,"")};e.prototype.startsWithAnyOfIgnoreCase=function(){var e=getArrayOf.apply(NO_CHAR_ARRAY,arguments);if(e.length===0)return emptyCollection(this);return addIgnoreCaseAlgorithm(this,(function(e,t){return t.some((function(t){return e.indexOf(t)===0}))}),e,maxString)};e.prototype.anyOf=function(){var e=this;var t=getArrayOf.apply(NO_CHAR_ARRAY,arguments);var r=this._cmp;try{t.sort(r)}catch(e){return fail(this,INVALID_KEY_ARGUMENT)}if(t.length===0)return emptyCollection(this);var n=new this.Collection(this,(function(){return createRange(t[0],t[t.length-1])}));n._ondirectionchange=function(n){r=n==="next"?e._ascending:e._descending;t.sort(r)};var i=0;n._addAlgorithm((function(e,n,s){var a=e.key;while(r(a,t[i])>0){++i;if(i===t.length){n(s);return false}}if(r(a,t[i])===0){return true}else{n((function(){e.continue(t[i])}));return false}}));return n};e.prototype.notEqual=function(e){return this.inAnyRange([[minKey,e],[e,this.db._maxKey]],{includeLowers:false,includeUppers:false})};e.prototype.noneOf=function(){var e=getArrayOf.apply(NO_CHAR_ARRAY,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch(e){return fail(this,INVALID_KEY_ARGUMENT)}var t=e.reduce((function(e,t){return e?e.concat([[e[e.length-1][1],t]]):[[minKey,t]]}),null);t.push([e[e.length-1],this.db._maxKey]);return this.inAnyRange(t,{includeLowers:false,includeUppers:false})};e.prototype.inAnyRange=function(e,t){var r=this;var n=this._cmp,i=this._ascending,s=this._descending,a=this._min,o=this._max;if(e.length===0)return emptyCollection(this);if(!e.every((function(e){return e[0]!==undefined&&e[1]!==undefined&&i(e[0],e[1])<=0}))){return fail(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",exceptions.InvalidArgument)}var f=!t||t.includeLowers!==false;var c=t&&t.includeUppers===true;function u(e,t){var r=0,i=e.length;for(;r<i;++r){var s=e[r];if(n(t[0],s[1])<0&&n(t[1],s[0])>0){s[0]=a(s[0],t[0]);s[1]=o(s[1],t[1]);break}}if(r===i)e.push(t);return e}var l=i;function h(e,t){return l(e[0],t[0])}var d;try{d=e.reduce(u,[]);d.sort(h)}catch(e){return fail(this,INVALID_KEY_ARGUMENT)}var p=0;var y=c?function(e){return i(e,d[p][1])>0}:function(e){return i(e,d[p][1])>=0};var m=f?function(e){return s(e,d[p][0])>0}:function(e){return s(e,d[p][0])>=0};function g(e){return!y(e)&&!m(e)}var b=y;var A=new this.Collection(this,(function(){return createRange(d[0][0],d[d.length-1][1],!f,!c)}));A._ondirectionchange=function(e){if(e==="next"){b=y;l=i}else{b=m;l=s}d.sort(h)};A._addAlgorithm((function(e,t,n){var s=e.key;while(b(s)){++p;if(p===d.length){t(n);return false}}if(g(s)){return true}else if(r._cmp(s,d[p][1])===0||r._cmp(s,d[p][0])===0){return false}else{t((function(){if(l===i)e.continue(d[p][0]);else e.continue(d[p][1])}));return false}}));return A};e.prototype.startsWithAnyOf=function(){var e=getArrayOf.apply(NO_CHAR_ARRAY,arguments);if(!e.every((function(e){return typeof e==="string"}))){return fail(this,"startsWithAnyOf() only works with strings")}if(e.length===0)return emptyCollection(this);return this.inAnyRange(e.map((function(e){return[e,e+maxString]})))};return e}();function createWhereClauseConstructor(e){return makeClassConstructor(WhereClause.prototype,(function t(r,n,i){this.db=e;this._ctx={table:r,index:n===":id"?null:n,or:i};var s=e._deps.indexedDB;if(!s)throw new exceptions.MissingAPI;this._cmp=this._ascending=s.cmp.bind(s);this._descending=function(e,t){return s.cmp(t,e)};this._max=function(e,t){return s.cmp(e,t)>0?e:t};this._min=function(e,t){return s.cmp(e,t)<0?e:t};this._IDBKeyRange=e._deps.IDBKeyRange}))}function eventRejectHandler(e){return wrap((function(t){preventDefault(t);e(t.target.error);return false}))}function preventDefault(e){if(e.stopPropagation)e.stopPropagation();if(e.preventDefault)e.preventDefault()}var DEXIE_STORAGE_MUTATED_EVENT_NAME="storagemutated";var STORAGE_MUTATED_DOM_EVENT_NAME="x-storagemutated-1";var globalEvents=Events(null,DEXIE_STORAGE_MUTATED_EVENT_NAME);var Transaction$3=function(){function e(){}e.prototype._lock=function(){assert$n(!PSD.global);++this._reculock;if(this._reculock===1&&!PSD.global)PSD.lockOwnerFor=this;return this};e.prototype._unlock=function(){assert$n(!PSD.global);if(--this._reculock===0){if(!PSD.global)PSD.lockOwnerFor=null;while(this._blockedFuncs.length>0&&!this._locked()){var e=this._blockedFuncs.shift();try{usePSD(e[1],e[0])}catch(e){}}}return this};e.prototype._locked=function(){return this._reculock&&PSD.lockOwnerFor!==this};e.prototype.create=function(e){var t=this;if(!this.mode)return this;var r=this.db.idbdb;var n=this.db._state.dbOpenError;assert$n(!this.idbtrans);if(!e&&!r){switch(n&&n.name){case"DatabaseClosedError":throw new exceptions.DatabaseClosed(n);case"MissingAPIError":throw new exceptions.MissingAPI(n.message,n);default:throw new exceptions.OpenFailed(n)}}if(!this.active)throw new exceptions.TransactionInactive;assert$n(this._completion._state===null);e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):r.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}));e.onerror=wrap((function(r){preventDefault(r);t._reject(e.error)}));e.onabort=wrap((function(r){preventDefault(r);t.active&&t._reject(new exceptions.Abort(e.error));t.active=false;t.on("abort").fire(r)}));e.oncomplete=wrap((function(){t.active=false;t._resolve();if("mutatedParts"in e){globalEvents.storagemutated.fire(e["mutatedParts"])}}));return this};e.prototype._promise=function(e,t,r){var n=this;if(e==="readwrite"&&this.mode!=="readwrite")return rejection(new exceptions.ReadOnly("Transaction is readonly"));if(!this.active)return rejection(new exceptions.TransactionInactive);if(this._locked()){return new DexiePromise((function(i,s){n._blockedFuncs.push([function(){n._promise(e,t,r).then(i,s)},PSD])}))}else if(r){return newScope((function(){var e=new DexiePromise((function(e,r){n._lock();var i=t(e,r,n);if(i&&i.then)i.then(e,r)}));e.finally((function(){return n._unlock()}));e._lib=true;return e}))}else{var i=new DexiePromise((function(e,r){var i=t(e,r,n);if(i&&i.then)i.then(e,r)}));i._lib=true;return i}};e.prototype._root=function(){return this.parent?this.parent._root():this};e.prototype.waitFor=function(e){var t=this._root();var r=DexiePromise.resolve(e);if(t._waitingFor){t._waitingFor=t._waitingFor.then((function(){return r}))}else{t._waitingFor=r;t._waitingQueue=[];var n=t.idbtrans.objectStore(t.storeNames[0]);(function e(){++t._spinCount;while(t._waitingQueue.length)t._waitingQueue.shift()();if(t._waitingFor)n.get(-Infinity).onsuccess=e})()}var i=t._waitingFor;return new DexiePromise((function(e,n){r.then((function(r){return t._waitingQueue.push(wrap(e.bind(null,r)))}),(function(e){return t._waitingQueue.push(wrap(n.bind(null,e)))})).finally((function(){if(t._waitingFor===i){t._waitingFor=null}}))}))};e.prototype.abort=function(){if(this.active){this.active=false;if(this.idbtrans)this.idbtrans.abort();this._reject(new exceptions.Abort)}};e.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(hasOwn(t,e))return t[e];var r=this.schema[e];if(!r){throw new exceptions.NotFound("Table "+e+" not part of transaction")}var n=new this.db.Table(e,r,this);n.core=this.db.core.table(e);t[e]=n;return n};return e}();function createTransactionConstructor(e){return makeClassConstructor(Transaction$3.prototype,(function t(r,n,i,s,a){var o=this;this.db=e;this.mode=r;this.storeNames=n;this.schema=i;this.chromeTransactionDurability=s;this.idbtrans=null;this.on=Events(this,"complete","error","abort");this.parent=a||null;this.active=true;this._reculock=0;this._blockedFuncs=[];this._resolve=null;this._reject=null;this._waitingFor=null;this._waitingQueue=null;this._spinCount=0;this._completion=new DexiePromise((function(e,t){o._resolve=e;o._reject=t}));this._completion.then((function(){o.active=false;o.on.complete.fire()}),(function(e){var t=o.active;o.active=false;o.on.error.fire(e);o.parent?o.parent._reject(e):t&&o.idbtrans&&o.idbtrans.abort();return rejection(e)}))}))}function createIndexSpec(e,t,r,n,i,s,a){return{name:e,keyPath:t,unique:r,multi:n,auto:i,compound:s,src:(r&&!a?"&":"")+(n?"*":"")+(i?"++":"")+nameFromKeyPath(t)}}function nameFromKeyPath(e){return typeof e==="string"?e:e?"["+[].join.call(e,"+")+"]":""}function createTableSchema(e,t,r){return{name:e,primKey:t,indexes:r,mappedClass:null,idxByName:arrayToObject(r,(function(e){return[e.name,e]}))}}function safariMultiStoreFix(e){return e.length===1?e[0]:e}var getMaxKey=function(e){try{e.only([[]]);getMaxKey=function(){return[[]]};return[[]]}catch(e){getMaxKey=function(){return maxString};return maxString}};function getKeyExtractor(e){if(e==null){return function(){return undefined}}else if(typeof e==="string"){return getSinglePathKeyExtractor(e)}else{return function(t){return getByKeyPath(t,e)}}}function getSinglePathKeyExtractor(e){var t=e.split(".");if(t.length===1){return function(t){return t[e]}}else{return function(t){return getByKeyPath(t,e)}}}function arrayify(e){return[].slice.call(e)}var _id_counter=0;function getKeyPathAlias(e){return e==null?":id":typeof e==="string"?e:"["+e.join("+")+"]"}function createDBCore(e,t,r){function n(e,t){var r=arrayify(e.objectStoreNames);return{schema:{name:e.name,tables:r.map((function(e){return t.objectStore(e)})).map((function(e){var t=e.keyPath,r=e.autoIncrement;var n=isArray$9(t);var i=t==null;var s={};var a={name:e.name,primaryKey:{name:null,isPrimaryKey:true,outbound:i,compound:n,keyPath:t,autoIncrement:r,unique:true,extractKey:getKeyExtractor(t)},indexes:arrayify(e.indexNames).map((function(t){return e.index(t)})).map((function(e){var t=e.name,r=e.unique,n=e.multiEntry,i=e.keyPath;var a=isArray$9(i);var o={name:t,compound:a,keyPath:i,unique:r,multiEntry:n,extractKey:getKeyExtractor(i)};s[getKeyPathAlias(i)]=o;return o})),getIndexByKeyPath:function(e){return s[getKeyPathAlias(e)]}};s[":id"]=a.primaryKey;if(t!=null){s[getKeyPathAlias(t)]=a.primaryKey}return a}))},hasGetAll:r.length>0&&"getAll"in t.objectStore(r[0])&&!(typeof navigator!=="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function i(e){if(e.type===3)return null;if(e.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var r=e.lower,n=e.upper,i=e.lowerOpen,s=e.upperOpen;var a=r===undefined?n===undefined?null:t.upperBound(n,!!s):n===undefined?t.lowerBound(r,!!i):t.bound(r,n,!!i,!!s);return a}function s(e){var t=e.name;function r(e){var r=e.trans,n=e.type,s=e.keys,a=e.values,o=e.range;return new Promise((function(e,f){e=wrap(e);var c=r.objectStore(t);var u=c.keyPath==null;var l=n==="put"||n==="add";if(!l&&n!=="delete"&&n!=="deleteRange")throw new Error("Invalid operation type: "+n);var h=(s||a||{length:1}).length;if(s&&a&&s.length!==a.length){throw new Error("Given keys array must have same length as given values array.")}if(h===0)return e({numFailures:0,failures:{},results:[],lastResult:undefined});var d;var p=[];var y=[];var m=0;var g=function(e){++m;preventDefault(e)};if(n==="deleteRange"){if(o.type===4)return e({numFailures:m,failures:y,results:[],lastResult:undefined});if(o.type===3)p.push(d=c.clear());else p.push(d=c.delete(i(o)))}else{var b=l?u?[a,s]:[a,null]:[s,null],A=b[0],w=b[1];if(l){for(var E=0;E<h;++E){p.push(d=w&&w[E]!==undefined?c[n](A[E],w[E]):c[n](A[E]));d.onerror=g}}else{for(var E=0;E<h;++E){p.push(d=c[n](A[E]));d.onerror=g}}}var v=function(t){var r=t.target.result;p.forEach((function(e,t){return e.error!=null&&(y[t]=e.error)}));e({numFailures:m,failures:y,results:n==="delete"?s:p.map((function(e){return e.result})),lastResult:r})};d.onerror=function(e){g(e);v(e)};d.onsuccess=v}))}function n(e){var r=e.trans,n=e.values,s=e.query,a=e.reverse,o=e.unique;return new Promise((function(e,f){e=wrap(e);var c=s.index,u=s.range;var l=r.objectStore(t);var h=c.isPrimaryKey?l:l.index(c.name);var d=a?o?"prevunique":"prev":o?"nextunique":"next";var p=n||!("openKeyCursor"in h)?h.openCursor(i(u),d):h.openKeyCursor(i(u),d);p.onerror=eventRejectHandler(f);p.onsuccess=wrap((function(t){var n=p.result;if(!n){e(null);return}n.___id=++_id_counter;n.done=false;var i=n.continue.bind(n);var s=n.continuePrimaryKey;if(s)s=s.bind(n);var a=n.advance.bind(n);var o=function(){throw new Error("Cursor not started")};var c=function(){throw new Error("Cursor not stopped")};n.trans=r;n.stop=n.continue=n.continuePrimaryKey=n.advance=o;n.fail=wrap(f);n.next=function(){var e=this;var t=1;return this.start((function(){return t--?e.continue():e.stop()})).then((function(){return e}))};n.start=function(e){var t=new Promise((function(e,t){e=wrap(e);p.onerror=eventRejectHandler(t);n.fail=t;n.stop=function(t){n.stop=n.continue=n.continuePrimaryKey=n.advance=c;e(t)}}));var r=function(){if(p.result){try{e()}catch(e){n.fail(e)}}else{n.done=true;n.start=function(){throw new Error("Cursor behind last entry")};n.stop()}};p.onsuccess=wrap((function(e){p.onsuccess=r;r()}));n.continue=i;n.continuePrimaryKey=s;n.advance=a;r();return t};e(n)}),f)}))}function s(e){return function(r){return new Promise((function(n,s){n=wrap(n);var a=r.trans,o=r.values,f=r.limit,c=r.query;var u=f===Infinity?undefined:f;var l=c.index,h=c.range;var d=a.objectStore(t);var p=l.isPrimaryKey?d:d.index(l.name);var y=i(h);if(f===0)return n({result:[]});if(e){var m=o?p.getAll(y,u):p.getAllKeys(y,u);m.onsuccess=function(e){return n({result:e.target.result})};m.onerror=eventRejectHandler(s)}else{var g=0;var b=o||!("openKeyCursor"in p)?p.openCursor(y):p.openKeyCursor(y);var A=[];b.onsuccess=function(e){var t=b.result;if(!t)return n({result:A});A.push(o?t.value:t.primaryKey);if(++g===f)return n({result:A});t.continue()};b.onerror=eventRejectHandler(s)}}))}}return{name:t,schema:e,mutate:r,getMany:function(e){var r=e.trans,n=e.keys;return new Promise((function(e,i){e=wrap(e);var s=r.objectStore(t);var a=n.length;var o=new Array(a);var f=0;var c=0;var u;var l=function(t){var r=t.target;if((o[r._pos]=r.result)!=null);if(++c===f)e(o)};var h=eventRejectHandler(i);for(var d=0;d<a;++d){var p=n[d];if(p!=null){u=s.get(n[d]);u._pos=d;u.onsuccess=l;u.onerror=h;++f}}if(f===0)e(o)}))},get:function(e){var r=e.trans,n=e.key;return new Promise((function(e,i){e=wrap(e);var s=r.objectStore(t);var a=s.get(n);a.onsuccess=function(t){return e(t.target.result)};a.onerror=eventRejectHandler(i)}))},query:s(f),openCursor:n,count:function(e){var r=e.query,n=e.trans;var s=r.index,a=r.range;return new Promise((function(e,r){var o=n.objectStore(t);var f=s.isPrimaryKey?o:o.index(s.name);var c=i(a);var u=c?f.count(c):f.count();u.onsuccess=wrap((function(t){return e(t.target.result)}));u.onerror=eventRejectHandler(r)}))}}}var a=n(e,r),o=a.schema,f=a.hasGetAll;var c=o.tables.map((function(e){return s(e)}));var u={};c.forEach((function(e){return u[e.name]=e}));return{stack:"dbcore",transaction:e.transaction.bind(e),table:function(e){var t=u[e];if(!t)throw new Error("Table '"+e+"' not found");return u[e]},MIN_KEY:-Infinity,MAX_KEY:getMaxKey(t),schema:o}}function createMiddlewareStack(e,t){return t.reduce((function(e,t){var r=t.create;return __assign$1(__assign$1({},e),r(e))}),e)}function createMiddlewareStacks(e,t,r,n){var i=r.IDBKeyRange;var s=createMiddlewareStack(createDBCore(t,i,n),e.dbcore);return{dbcore:s}}function generateMiddlewareStacks(e,t){var r=e._novip;var n=t.db;var i=createMiddlewareStacks(r._middlewares,n,r._deps,t);r.core=i.dbcore;r.tables.forEach((function(e){var t=e.name;if(r.core.schema.tables.some((function(e){return e.name===t}))){e.core=r.core.table(t);if(r[t]instanceof r.Table){r[t].core=e.core}}}))}function setApiOnPlace(e,t,r,n){var i=e._novip;r.forEach((function(e){var r=n[e];t.forEach((function(t){var n=getPropertyDescriptor(t,e);if(!n||"value"in n&&n.value===undefined){if(t===i.Transaction.prototype||t instanceof i.Transaction){setProp(t,e,{get:function(){return this.table(e)},set:function(t){defineProperty$5(this,e,{value:t,writable:true,configurable:true,enumerable:true})}})}else{t[e]=new i.Table(e,r)}}}))}))}function removeTablesApi(e,t){var r=e._novip;t.forEach((function(e){for(var t in e){if(e[t]instanceof r.Table)delete e[t]}}))}function lowerVersionFirst(e,t){return e._cfg.version-t._cfg.version}function runUpgraders(e,t,r,n){var i=e._dbSchema;var s=e._createTransaction("readwrite",e._storeNames,i);s.create(r);s._completion.catch(n);var a=s._reject.bind(s);var o=PSD.transless||PSD;newScope((function(){PSD.trans=s;PSD.transless=o;if(t===0){keys$4(i).forEach((function(e){createTable(r,e,i[e].primKey,i[e].indexes)}));generateMiddlewareStacks(e,r);DexiePromise.follow((function(){return e.on.populate.fire(s)})).catch(a)}else updateTablesAndIndexes(e,t,s,r).catch(a)}))}function updateTablesAndIndexes(e,t,r,n){var i=e._novip;var s=[];var a=i._versions;var o=i._dbSchema=buildGlobalSchema(i,i.idbdb,n);var f=false;var c=a.filter((function(e){return e._cfg.version>=t}));c.forEach((function(e){s.push((function(){var s=o;var a=e._cfg.dbschema;adjustToExistingIndexNames(i,s,n);adjustToExistingIndexNames(i,a,n);o=i._dbSchema=a;var c=getSchemaDiff(s,a);c.add.forEach((function(e){createTable(n,e[0],e[1].primKey,e[1].indexes)}));c.change.forEach((function(e){if(e.recreate){throw new exceptions.Upgrade("Not yet support for changing primary key")}else{var t=n.objectStore(e.name);e.add.forEach((function(e){return addIndex(t,e)}));e.change.forEach((function(e){t.deleteIndex(e.name);addIndex(t,e)}));e.del.forEach((function(e){return t.deleteIndex(e)}))}}));var u=e._cfg.contentUpgrade;if(u&&e._cfg.version>t){generateMiddlewareStacks(i,n);r._memoizedTables={};f=true;var l=shallowClone$1(a);c.del.forEach((function(e){l[e]=s[e]}));removeTablesApi(i,[i.Transaction.prototype]);setApiOnPlace(i,[i.Transaction.prototype],keys$4(l),l);r.schema=l;var h=isAsyncFunction(u);if(h){incrementExpectedAwaits()}var d;var p=DexiePromise.follow((function(){d=u(r);if(d){if(h){var e=decrementExpectedAwaits.bind(null,null);d.then(e,e)}}}));return d&&typeof d.then==="function"?DexiePromise.resolve(d):p.then((function(){return d}))}}));s.push((function(t){if(!f||!hasIEDeleteObjectStoreBug){var n=e._cfg.dbschema;deleteRemovedTables(n,t)}removeTablesApi(i,[i.Transaction.prototype]);setApiOnPlace(i,[i.Transaction.prototype],i._storeNames,i._dbSchema);r.schema=i._dbSchema}))}));function u(){return s.length?DexiePromise.resolve(s.shift()(r.idbtrans)).then(u):DexiePromise.resolve()}return u().then((function(){createMissingTables(o,n)}))}function getSchemaDiff(e,t){var r={del:[],add:[],change:[]};var n;for(n in e){if(!t[n])r.del.push(n)}for(n in t){var i=e[n],s=t[n];if(!i){r.add.push([n,s])}else{var a={name:n,def:s,recreate:false,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!==""+(s.primKey.keyPath||"")||i.primKey.auto!==s.primKey.auto&&!isIEOrEdge){a.recreate=true;r.change.push(a)}else{var o=i.idxByName;var f=s.idxByName;var c=void 0;for(c in o){if(!f[c])a.del.push(c)}for(c in f){var u=o[c],l=f[c];if(!u)a.add.push(l);else if(u.src!==l.src)a.change.push(l)}if(a.del.length>0||a.add.length>0||a.change.length>0){r.change.push(a)}}}}return r}function createTable(e,t,r,n){var i=e.db.createObjectStore(t,r.keyPath?{keyPath:r.keyPath,autoIncrement:r.auto}:{autoIncrement:r.auto});n.forEach((function(e){return addIndex(i,e)}));return i}function createMissingTables(e,t){keys$4(e).forEach((function(r){if(!t.db.objectStoreNames.contains(r)){createTable(t,r,e[r].primKey,e[r].indexes)}}))}function deleteRemovedTables(e,t){[].slice.call(t.db.objectStoreNames).forEach((function(r){return e[r]==null&&t.db.deleteObjectStore(r)}))}function addIndex(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function buildGlobalSchema(e,t,r){var n={};var i=slice(t.objectStoreNames,0);i.forEach((function(e){var t=r.objectStore(e);var i=t.keyPath;var s=createIndexSpec(nameFromKeyPath(i),i||"",false,false,!!t.autoIncrement,i&&typeof i!=="string",true);var a=[];for(var o=0;o<t.indexNames.length;++o){var f=t.index(t.indexNames[o]);i=f.keyPath;var c=createIndexSpec(f.name,i,!!f.unique,!!f.multiEntry,false,i&&typeof i!=="string",false);a.push(c)}n[e]=createTableSchema(e,s,a)}));return n}function readGlobalSchema(e,t,r){var n=e._novip;n.verno=t.version/10;var i=n._dbSchema=buildGlobalSchema(n,t,r);n._storeNames=slice(t.objectStoreNames,0);setApiOnPlace(n,[n._allTables],keys$4(i),i)}function verifyInstalledSchema(e,t){var r=buildGlobalSchema(e,e.idbdb,t);var n=getSchemaDiff(r,e._dbSchema);return!(n.add.length||n.change.some((function(e){return e.add.length||e.change.length})))}function adjustToExistingIndexNames(e,t,r){var n=e._novip;var i=r.db.objectStoreNames;for(var s=0;s<i.length;++s){var a=i[s];var o=r.objectStore(a);n._hasGetAll="getAll"in o;for(var f=0;f<o.indexNames.length;++f){var c=o.indexNames[f];var u=o.index(c).keyPath;var l=typeof u==="string"?u:"["+slice(u).join("+")+"]";if(t[a]){var h=t[a].idxByName[l];if(h){h.name=c;delete t[a].idxByName[l];t[a].idxByName[c]=h}}}}if(typeof navigator!=="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&_global.WorkerGlobalScope&&_global instanceof _global.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604){n._hasGetAll=false}}function parseIndexSyntax(e){return e.split(",").map((function(e,t){e=e.trim();var r=e.replace(/([&*]|\+\+)/g,"");var n=/^\[/.test(r)?r.match(/^\[(.*)\]$/)[1].split("+"):r;return createIndexSpec(r,n||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),isArray$9(n),t===0)}))}var Version$2=function(){function e(){}e.prototype._parseStoresSpec=function(e,t){keys$4(e).forEach((function(r){if(e[r]!==null){var n=parseIndexSyntax(e[r]);var i=n.shift();if(i.multi)throw new exceptions.Schema("Primary key cannot be multi-valued");n.forEach((function(e){if(e.auto)throw new exceptions.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new exceptions.Schema("Index must have a name and cannot be an empty string")}));t[r]=createTableSchema(r,i,n)}}))};e.prototype.stores=function(e){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?extend(this._cfg.storesSource,e):e;var r=t._versions;var n={};var i={};r.forEach((function(e){extend(n,e._cfg.storesSource);i=e._cfg.dbschema={};e._parseStoresSpec(n,i)}));t._dbSchema=i;removeTablesApi(t,[t._allTables,t,t.Transaction.prototype]);setApiOnPlace(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],keys$4(i),i);t._storeNames=keys$4(i);return this};e.prototype.upgrade=function(e){this._cfg.contentUpgrade=promisableChain(this._cfg.contentUpgrade||nop,e);return this};return e}();function createVersionConstructor(e){return makeClassConstructor(Version$2.prototype,(function t(r){this.db=e;this._cfg={version:r,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}}))}function getDbNamesTable(e,t){var r=e["_dbNamesDB"];if(!r){r=e["_dbNamesDB"]=new Dexie$1(DBNAMES_DB,{addons:[],indexedDB:e,IDBKeyRange:t});r.version(1).stores({dbnames:"name"})}return r.table("dbnames")}function hasDatabasesNative(e){return e&&typeof e.databases==="function"}function getDatabaseNames(e){var t=e.indexedDB,r=e.IDBKeyRange;return hasDatabasesNative(t)?Promise.resolve(t.databases()).then((function(e){return e.map((function(e){return e.name})).filter((function(e){return e!==DBNAMES_DB}))})):getDbNamesTable(t,r).toCollection().primaryKeys()}function _onDatabaseCreated(e,t){var r=e.indexedDB,n=e.IDBKeyRange;!hasDatabasesNative(r)&&t!==DBNAMES_DB&&getDbNamesTable(r,n).put({name:t}).catch(nop)}function _onDatabaseDeleted(e,t){var r=e.indexedDB,n=e.IDBKeyRange;!hasDatabasesNative(r)&&t!==DBNAMES_DB&&getDbNamesTable(r,n).delete(t).catch(nop)}function vip(e){return newScope((function(){PSD.letThrough=true;return e()}))}function idbReady(){var e=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!e||!indexedDB.databases)return Promise.resolve();var t;return new Promise((function(e){var r=function(){return indexedDB.databases().finally(e)};t=setInterval(r,100);r()})).finally((function(){return clearInterval(t)}))}function dexieOpen(e){var t=e._state;var r=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then((function(){return t.dbOpenError?rejection(t.dbOpenError):e}));debug$4&&(t.openCanceller._stackHolder=getErrorWithStack());t.isBeingOpened=true;t.dbOpenError=null;t.openComplete=false;var n=t.openCanceller;function i(){if(t.openCanceller!==n)throw new exceptions.DatabaseClosed("db.open() was cancelled")}var s=t.dbReadyResolve,a=null,o=false;return DexiePromise.race([n,(typeof navigator==="undefined"?DexiePromise.resolve():idbReady()).then((function(){return new DexiePromise((function(n,s){i();if(!r)throw new exceptions.MissingAPI;var f=e.name;var c=t.autoSchema?r.open(f):r.open(f,Math.round(e.verno*10));if(!c)throw new exceptions.MissingAPI;c.onerror=eventRejectHandler(s);c.onblocked=wrap(e._fireOnBlocked);c.onupgradeneeded=wrap((function(n){a=c.transaction;if(t.autoSchema&&!e._options.allowEmptyDB){c.onerror=preventDefault;a.abort();c.result.close();var i=r.deleteDatabase(f);i.onsuccess=i.onerror=wrap((function(){s(new exceptions.NoSuchDatabase("Database "+f+" doesnt exist"))}))}else{a.onerror=eventRejectHandler(s);var u=n.oldVersion>Math.pow(2,62)?0:n.oldVersion;o=u<1;e._novip.idbdb=c.result;runUpgraders(e,u/10,a,s)}}),s);c.onsuccess=wrap((function(){a=null;var r=e._novip.idbdb=c.result;var i=slice(r.objectStoreNames);if(i.length>0)try{var s=r.transaction(safariMultiStoreFix(i),"readonly");if(t.autoSchema)readGlobalSchema(e,r,s);else{adjustToExistingIndexNames(e,e._dbSchema,s);if(!verifyInstalledSchema(e,s)){console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")}}generateMiddlewareStacks(e,s)}catch(e){}connections.push(e);r.onversionchange=wrap((function(r){t.vcFired=true;e.on("versionchange").fire(r)}));r.onclose=wrap((function(t){e.on("close").fire(t)}));if(o)_onDatabaseCreated(e._deps,f);n()}),s)}))}))]).then((function(){i();t.onReadyBeingFired=[];return DexiePromise.resolve(vip((function(){return e.on.ready.fire(e.vip)}))).then((function r(){if(t.onReadyBeingFired.length>0){var n=t.onReadyBeingFired.reduce(promisableChain,nop);t.onReadyBeingFired=[];return DexiePromise.resolve(vip((function(){return n(e.vip)}))).then(r)}}))})).finally((function(){t.onReadyBeingFired=null;t.isBeingOpened=false})).then((function(){return e})).catch((function(r){t.dbOpenError=r;try{a&&a.abort()}catch(e){}if(n===t.openCanceller){e._close()}return rejection(r)})).finally((function(){t.openComplete=true;s()}))}function awaitIterator(e){var t=function(t){return e.next(t)},r=function(t){return e.throw(t)},n=s(t),i=s(r);function s(e){return function(t){var r=e(t),s=r.value;return r.done?s:!s||typeof s.then!=="function"?isArray$9(s)?Promise.all(s).then(n,i):n(s):s.then(n,i)}}return s(t)()}function extractTransactionArgs(e,t,r){var n=arguments.length;if(n<2)throw new exceptions.InvalidArgument("Too few arguments");var i=new Array(n-1);while(--n)i[n-1]=arguments[n];r=i.pop();var s=flatten$3(i);return[e,s,r]}function enterTransactionScope(e,t,r,n,i){return DexiePromise.resolve().then((function(){var s=PSD.transless||PSD;var a=e._createTransaction(t,r,e._dbSchema,n);var o={trans:a,transless:s};if(n){a.idbtrans=n.idbtrans}else{try{a.create();e._state.PR1398_maxLoop=3}catch(n){if(n.name===errnames.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0){console.warn("Dexie: Need to reopen db");e._close();return e.open().then((function(){return enterTransactionScope(e,t,r,null,i)}))}return rejection(n)}}var f=isAsyncFunction(i);if(f){incrementExpectedAwaits()}var c;var u=DexiePromise.follow((function(){c=i.call(a,a);if(c){if(f){var e=decrementExpectedAwaits.bind(null,null);c.then(e,e)}else if(typeof c.next==="function"&&typeof c.throw==="function"){c=awaitIterator(c)}}}),o);return(c&&typeof c.then==="function"?DexiePromise.resolve(c).then((function(e){return a.active?e:rejection(new exceptions.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))})):u.then((function(){return c}))).then((function(e){if(n)a._resolve();return a._completion.then((function(){return e}))})).catch((function(e){a._reject(e);return rejection(e)}))}))}function pad(e,t,r){var n=isArray$9(e)?e.slice():[e];for(var i=0;i<r;++i)n.push(t);return n}function createVirtualIndexMiddleware(e){return __assign$1(__assign$1({},e),{table:function(t){var r=e.table(t);var n=r.schema;var i={};var s=[];function a(e,t,r){var n=getKeyPathAlias(e);var o=i[n]=i[n]||[];var f=e==null?0:typeof e==="string"?1:e.length;var c=t>0;var u=__assign$1(__assign$1({},r),{isVirtual:c,keyTail:t,keyLength:f,extractKey:getKeyExtractor(e),unique:!c&&r.unique});o.push(u);if(!u.isPrimaryKey){s.push(u)}if(f>1){var l=f===2?e[0]:e.slice(0,f-1);a(l,t+1,r)}o.sort((function(e,t){return e.keyTail-t.keyTail}));return u}var o=a(n.primaryKey.keyPath,0,n.primaryKey);i[":id"]=[o];for(var f=0,c=n.indexes;f<c.length;f++){var u=c[f];a(u.keyPath,0,u)}function l(e){var t=i[getKeyPathAlias(e)];return t&&t[0]}function h(t,r){return{type:t.type===1?2:t.type,lower:pad(t.lower,t.lowerOpen?e.MAX_KEY:e.MIN_KEY,r),lowerOpen:true,upper:pad(t.upper,t.upperOpen?e.MIN_KEY:e.MAX_KEY,r),upperOpen:true}}function d(e){var t=e.query.index;return t.isVirtual?__assign$1(__assign$1({},e),{query:{index:t,range:h(e.query.range,t.keyTail)}}):e}var p=__assign$1(__assign$1({},r),{schema:__assign$1(__assign$1({},n),{primaryKey:o,indexes:s,getIndexByKeyPath:l}),count:function(e){return r.count(d(e))},query:function(e){return r.query(d(e))},openCursor:function(t){var n=t.query.index,i=n.keyTail,s=n.isVirtual,a=n.keyLength;if(!s)return r.openCursor(t);function o(r){function n(n){n!=null?r.continue(pad(n,t.reverse?e.MAX_KEY:e.MIN_KEY,i)):t.unique?r.continue(r.key.slice(0,a).concat(t.reverse?e.MIN_KEY:e.MAX_KEY,i)):r.continue()}var s=Object.create(r,{continue:{value:n},continuePrimaryKey:{value:function(t,n){r.continuePrimaryKey(pad(t,e.MAX_KEY,i),n)}},primaryKey:{get:function(){return r.primaryKey}},key:{get:function(){var e=r.key;return a===1?e[0]:e.slice(0,a)}},value:{get:function(){return r.value}}});return s}return r.openCursor(d(t)).then((function(e){return e&&o(e)}))}});return p}})}var virtualIndexMiddleware={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:createVirtualIndexMiddleware};function getObjectDiff(e,t,r,n){r=r||{};n=n||"";keys$4(e).forEach((function(i){if(!hasOwn(t,i)){r[n+i]=undefined}else{var s=e[i],a=t[i];if(typeof s==="object"&&typeof a==="object"&&s&&a){var o=toStringTag(s);var f=toStringTag(a);if(o!==f){r[n+i]=t[i]}else if(o==="Object"){getObjectDiff(s,a,r,n+i+".")}else if(s!==a){r[n+i]=t[i]}}else if(s!==a)r[n+i]=t[i]}}));keys$4(t).forEach((function(i){if(!hasOwn(e,i)){r[n+i]=t[i]}}));return r}function getEffectiveKeys(e,t){if(t.type==="delete")return t.keys;return t.keys||t.values.map(e.extractKey)}var hooksMiddleware={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return __assign$1(__assign$1({},e),{table:function(t){var r=e.table(t);var n=r.schema.primaryKey;var i=__assign$1(__assign$1({},r),{mutate:function(e){var i=PSD.trans;var s=i.table(t).hook,a=s.deleting,o=s.creating,f=s.updating;switch(e.type){case"add":if(o.fire===nop)break;return i._promise("readwrite",(function(){return c(e)}),true);case"put":if(o.fire===nop&&f.fire===nop)break;return i._promise("readwrite",(function(){return c(e)}),true);case"delete":if(a.fire===nop)break;return i._promise("readwrite",(function(){return c(e)}),true);case"deleteRange":if(a.fire===nop)break;return i._promise("readwrite",(function(){return u(e)}),true)}return r.mutate(e);function c(e){var t=PSD.trans;var i=e.keys||getEffectiveKeys(n,e);if(!i)throw new Error("Keys missing");e=e.type==="add"||e.type==="put"?__assign$1(__assign$1({},e),{keys:i}):__assign$1({},e);if(e.type!=="delete")e.values=__spreadArray$2([],e.values,true);if(e.keys)e.keys=__spreadArray$2([],e.keys,true);return getExistingValues(r,e,i).then((function(s){var c=i.map((function(r,i){var c=s[i];var u={onerror:null,onsuccess:null};if(e.type==="delete"){a.fire.call(u,r,c,t)}else if(e.type==="add"||c===undefined){var l=o.fire.call(u,r,e.values[i],t);if(r==null&&l!=null){r=l;e.keys[i]=r;if(!n.outbound){setByKeyPath(e.values[i],n.keyPath,r)}}}else{var h=getObjectDiff(c,e.values[i]);var d=f.fire.call(u,h,r,c,t);if(d){var p=e.values[i];Object.keys(d).forEach((function(e){if(hasOwn(p,e)){p[e]=d[e]}else{setByKeyPath(p,e,d[e])}}))}}return u}));return r.mutate(e).then((function(t){var r=t.failures,n=t.results,a=t.numFailures,o=t.lastResult;for(var f=0;f<i.length;++f){var u=n?n[f]:i[f];var l=c[f];if(u==null){l.onerror&&l.onerror(r[f])}else{l.onsuccess&&l.onsuccess(e.type==="put"&&s[f]?e.values[f]:u)}}return{failures:r,results:n,numFailures:a,lastResult:o}})).catch((function(e){c.forEach((function(t){return t.onerror&&t.onerror(e)}));return Promise.reject(e)}))}))}function u(e){return l(e.trans,e.range,1e4)}function l(e,t,i){return r.query({trans:e,values:false,query:{index:n,range:t},limit:i}).then((function(r){var n=r.result;return c({type:"delete",keys:n,trans:e}).then((function(r){if(r.numFailures>0)return Promise.reject(r.failures[0]);if(n.length<i){return{failures:[],numFailures:0,lastResult:undefined}}else{return l(e,__assign$1(__assign$1({},t),{lower:n[n.length-1],lowerOpen:true}),i)}}))}))}}});return i}})}};function getExistingValues(e,t,r){return t.type==="add"?Promise.resolve([]):e.getMany({trans:t.trans,keys:r,cache:"immutable"})}function getFromTransactionCache(e,t,r){try{if(!t)return null;if(t.keys.length<e.length)return null;var n=[];for(var i=0,s=0;i<t.keys.length&&s<e.length;++i){if(cmp$3(t.keys[i],e[s])!==0)continue;n.push(r?deepClone$1(t.values[i]):t.values[i]);++s}return n.length===e.length?n:null}catch(e){return null}}var cacheExistingValuesMiddleware={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var r=e.table(t);return __assign$1(__assign$1({},r),{getMany:function(e){if(!e.cache){return r.getMany(e)}var t=getFromTransactionCache(e.keys,e.trans["_cache"],e.cache==="clone");if(t){return DexiePromise.resolve(t)}return r.getMany(e).then((function(t){e.trans["_cache"]={keys:e.keys,values:e.cache==="clone"?deepClone$1(t):t};return t}))},mutate:function(e){if(e.type!=="add")e.trans["_cache"]=null;return r.mutate(e)}})}}}};var _a$A;function isEmptyRange(e){return!("from"in e)}var RangeSet=function(e,t){if(this){extend(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0})}else{var r=new RangeSet;if(e&&"d"in e){extend(r,e)}return r}};props(RangeSet.prototype,(_a$A={add:function(e){mergeRanges(this,e);return this},addKey:function(e){addRange(this,e,e);return this},addKeys:function(e){var t=this;e.forEach((function(e){return addRange(t,e,e)}));return this}},_a$A[iteratorSymbol]=function(){return getRangeSetIterator(this)},_a$A));function addRange(e,t,r){var n=cmp$3(t,r);if(isNaN(n))return;if(n>0)throw RangeError();if(isEmptyRange(e))return extend(e,{from:t,to:r,d:1});var i=e.l;var s=e.r;if(cmp$3(r,e.from)<0){i?addRange(i,t,r):e.l={from:t,to:r,d:1,l:null,r:null};return rebalance(e)}if(cmp$3(t,e.to)>0){s?addRange(s,t,r):e.r={from:t,to:r,d:1,l:null,r:null};return rebalance(e)}if(cmp$3(t,e.from)<0){e.from=t;e.l=null;e.d=s?s.d+1:1}if(cmp$3(r,e.to)>0){e.to=r;e.r=null;e.d=e.l?e.l.d+1:1}var a=!e.r;if(i&&!e.l){mergeRanges(e,i)}if(s&&a){mergeRanges(e,s)}}function mergeRanges(e,t){function r(e,t){var n=t.from,i=t.to,s=t.l,a=t.r;addRange(e,n,i);if(s)r(e,s);if(a)r(e,a)}if(!isEmptyRange(t))r(e,t)}function rangesOverlap(e,t){var r=getRangeSetIterator(t);var n=r.next();if(n.done)return false;var i=n.value;var s=getRangeSetIterator(e);var a=s.next(i.from);var o=a.value;while(!n.done&&!a.done){if(cmp$3(o.from,i.to)<=0&&cmp$3(o.to,i.from)>=0)return true;cmp$3(i.from,o.from)<0?i=(n=r.next(o.from)).value:o=(a=s.next(i.from)).value}return false}function getRangeSetIterator(e){var t=isEmptyRange(e)?null:{s:0,n:e};return{next:function(e){var r=arguments.length>0;while(t){switch(t.s){case 0:t.s=1;if(r){while(t.n.l&&cmp$3(e,t.n.from)<0)t={up:t,n:t.n.l,s:1}}else{while(t.n.l)t={up:t,n:t.n.l,s:1}}case 1:t.s=2;if(!r||cmp$3(e,t.n.to)<=0)return{value:t.n,done:false};case 2:if(t.n.r){t.s=3;t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}}return{done:true}}}}function rebalance(e){var t,r;var n=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((r=e.l)===null||r===void 0?void 0:r.d)||0);var i=n>1?"r":n<-1?"l":"";if(i){var s=i==="r"?"l":"r";var a=__assign$1({},e);var o=e[i];e.from=o.from;e.to=o.to;e[i]=o[i];a[i]=o[s];e[s]=a;a.d=computeDepth(a)}e.d=computeDepth(e)}function computeDepth(e){var t=e.r,r=e.l;return(t?r?Math.max(t.d,r.d):t.d:r?r.d:0)+1}var observabilityMiddleware={stack:"dbcore",level:0,create:function(e){var t=e.schema.name;var r=new RangeSet(e.MIN_KEY,e.MAX_KEY);return __assign$1(__assign$1({},e),{table:function(n){var i=e.table(n);var s=i.schema;var a=s.primaryKey;var o=a.extractKey,f=a.outbound;var c=__assign$1(__assign$1({},i),{mutate:function(e){var a=e.trans;var o=a.mutatedParts||(a.mutatedParts={});var f=function(e){var r="idb://"+t+"/"+n+"/"+e;return o[r]||(o[r]=new RangeSet)};var c=f("");var u=f(":dels");var l=e.type;var h=e.type==="deleteRange"?[e.range]:e.type==="delete"?[e.keys]:e.values.length<50?[[],e.values]:[],d=h[0],p=h[1];var y=e.trans["_cache"];return i.mutate(e).then((function(e){if(isArray$9(d)){if(l!=="delete")d=e.results;c.addKeys(d);var t=getFromTransactionCache(d,y);if(!t&&l!=="add"){u.addKeys(d)}if(t||p){trackAffectedIndexes(f,s,t,p)}}else if(d){var n={from:d.lower,to:d.upper};u.add(n);c.add(n)}else{c.add(r);u.add(r);s.indexes.forEach((function(e){return f(e.name).add(r)}))}return e}))}});var u=function(t){var r,n;var i=t.query,s=i.index,a=i.range;return[s,new RangeSet((r=a.lower)!==null&&r!==void 0?r:e.MIN_KEY,(n=a.upper)!==null&&n!==void 0?n:e.MAX_KEY)]};var l={get:function(e){return[a,new RangeSet(e.key)]},getMany:function(e){return[a,(new RangeSet).addKeys(e.keys)]},count:u,query:u,openCursor:u};keys$4(l).forEach((function(e){c[e]=function(s){var a=PSD.subscr;if(a){var c=function(e){var r="idb://"+t+"/"+n+"/"+e;return a[r]||(a[r]=new RangeSet)};var u=c("");var h=c(":dels");var d=l[e](s),p=d[0],y=d[1];c(p.name||"").add(y);if(!p.isPrimaryKey){if(e==="count"){h.add(r)}else{var m=e==="query"&&f&&s.values&&i.query(__assign$1(__assign$1({},s),{values:false}));return i[e].apply(this,arguments).then((function(t){if(e==="query"){if(f&&s.values){return m.then((function(e){var r=e.result;u.addKeys(r);return t}))}var r=s.values?t.result.map(o):t.result;if(s.values){u.addKeys(r)}else{h.addKeys(r)}}else if(e==="openCursor"){var n=t;var i=s.values;return n&&Object.create(n,{key:{get:function(){h.addKey(n.primaryKey);return n.key}},primaryKey:{get:function(){var e=n.primaryKey;h.addKey(e);return e}},value:{get:function(){i&&u.addKey(n.primaryKey);return n.value}}})}return t}))}}}return i[e].apply(this,arguments)}}));return c}})}};function trackAffectedIndexes(e,t,r,n){function i(t){var i=e(t.name||"");function s(e){return e!=null?t.extractKey(e):null}var a=function(e){return t.multiEntry&&isArray$9(e)?e.forEach((function(e){return i.addKey(e)})):i.addKey(e)};(r||n).forEach((function(e,t){var i=r&&s(r[t]);var o=n&&s(n[t]);if(cmp$3(i,o)!==0){if(i!=null)a(i);if(o!=null)a(o)}}))}t.indexes.forEach(i)}var Dexie$1=function(){function e(t,r){var n=this;this._middlewares={};this.verno=0;var i=e.dependencies;this._options=r=__assign$1({addons:e.addons,autoOpen:true,indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange},r);this._deps={indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange};var s=r.addons;this._dbSchema={};this._versions=[];this._storeNames=[];this._allTables={};this.idbdb=null;this._novip=this;var a={dbOpenError:null,isBeingOpened:false,onReadyBeingFired:null,openComplete:false,dbReadyResolve:nop,dbReadyPromise:null,cancelOpen:nop,openCanceller:null,autoSchema:true,PR1398_maxLoop:3};a.dbReadyPromise=new DexiePromise((function(e){a.dbReadyResolve=e}));a.openCanceller=new DexiePromise((function(e,t){a.cancelOpen=t}));this._state=a;this.name=t;this.on=Events(this,"populate","blocked","versionchange","close",{ready:[promisableChain,nop]});this.on.ready.subscribe=override(this.on.ready.subscribe,(function(t){return function(r,i){e.vip((function(){var e=n._state;if(e.openComplete){if(!e.dbOpenError)DexiePromise.resolve().then(r);if(i)t(r)}else if(e.onReadyBeingFired){e.onReadyBeingFired.push(r);if(i)t(r)}else{t(r);var s=n;if(!i)t((function e(){s.on.ready.unsubscribe(r);s.on.ready.unsubscribe(e)}))}}))}}));this.Collection=createCollectionConstructor(this);this.Table=createTableConstructor(this);this.Transaction=createTransactionConstructor(this);this.Version=createVersionConstructor(this);this.WhereClause=createWhereClauseConstructor(this);this.on("versionchange",(function(e){if(e.newVersion>0)console.warn("Another connection wants to upgrade database '"+n.name+"'. Closing db now to resume the upgrade.");else console.warn("Another connection wants to delete database '"+n.name+"'. Closing db now to resume the delete request.");n.close()}));this.on("blocked",(function(e){if(!e.newVersion||e.newVersion<e.oldVersion)console.warn("Dexie.delete('"+n.name+"') was blocked");else console.warn("Upgrade '"+n.name+"' blocked by other connection holding version "+e.oldVersion/10)}));this._maxKey=getMaxKey(r.IDBKeyRange);this._createTransaction=function(e,t,r,i){return new n.Transaction(e,t,r,n._options.chromeTransactionDurability,i)};this._fireOnBlocked=function(e){n.on("blocked").fire(e);connections.filter((function(e){return e.name===n.name&&e!==n&&!e._state.vcFired})).map((function(t){return t.on("versionchange").fire(e)}))};this.use(virtualIndexMiddleware);this.use(hooksMiddleware);this.use(observabilityMiddleware);this.use(cacheExistingValuesMiddleware);this.vip=Object.create(this,{_vip:{value:true}});s.forEach((function(e){return e(n)}))}e.prototype.version=function(e){if(isNaN(e)||e<.1)throw new exceptions.Type("Given version is not a positive number");e=Math.round(e*10)/10;if(this.idbdb||this._state.isBeingOpened)throw new exceptions.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions;var r=t.filter((function(t){return t._cfg.version===e}))[0];if(r)return r;r=new this.Version(e);t.push(r);t.sort(lowerVersionFirst);r.stores({});this._state.autoSchema=false;return r};e.prototype._whenReady=function(e){var t=this;return this.idbdb&&(this._state.openComplete||PSD.letThrough||this._vip)?e():new DexiePromise((function(e,r){if(t._state.openComplete){return r(new exceptions.DatabaseClosed(t._state.dbOpenError))}if(!t._state.isBeingOpened){if(!t._options.autoOpen){r(new exceptions.DatabaseClosed);return}t.open().catch(nop)}t._state.dbReadyPromise.then(e,r)})).then(e)};e.prototype.use=function(e){var t=e.stack,r=e.create,n=e.level,i=e.name;if(i)this.unuse({stack:t,name:i});var s=this._middlewares[t]||(this._middlewares[t]=[]);s.push({stack:t,create:r,level:n==null?10:n,name:i});s.sort((function(e,t){return e.level-t.level}));return this};e.prototype.unuse=function(e){var t=e.stack,r=e.name,n=e.create;if(t&&this._middlewares[t]){this._middlewares[t]=this._middlewares[t].filter((function(e){return n?e.create!==n:r?e.name!==r:false}))}return this};e.prototype.open=function(){return dexieOpen(this)};e.prototype._close=function(){var e=this._state;var t=connections.indexOf(this);if(t>=0)connections.splice(t,1);if(this.idbdb){try{this.idbdb.close()}catch(e){}this._novip.idbdb=null}e.dbReadyPromise=new DexiePromise((function(t){e.dbReadyResolve=t}));e.openCanceller=new DexiePromise((function(t,r){e.cancelOpen=r}))};e.prototype.close=function(){this._close();var e=this._state;this._options.autoOpen=false;e.dbOpenError=new exceptions.DatabaseClosed;if(e.isBeingOpened)e.cancelOpen(e.dbOpenError)};e.prototype.delete=function(){var e=this;var t=arguments.length>0;var r=this._state;return new DexiePromise((function(n,i){var s=function(){e.close();var t=e._deps.indexedDB.deleteDatabase(e.name);t.onsuccess=wrap((function(){_onDatabaseDeleted(e._deps,e.name);n()}));t.onerror=eventRejectHandler(i);t.onblocked=e._fireOnBlocked};if(t)throw new exceptions.InvalidArgument("Arguments not allowed in db.delete()");if(r.isBeingOpened){r.dbReadyPromise.then(s)}else{s()}}))};e.prototype.backendDB=function(){return this.idbdb};e.prototype.isOpen=function(){return this.idbdb!==null};e.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"};e.prototype.hasFailed=function(){return this._state.dbOpenError!==null};e.prototype.dynamicallyOpened=function(){return this._state.autoSchema};Object.defineProperty(e.prototype,"tables",{get:function(){var e=this;return keys$4(this._allTables).map((function(t){return e._allTables[t]}))},enumerable:false,configurable:true});e.prototype.transaction=function(){var e=extractTransactionArgs.apply(this,arguments);return this._transaction.apply(this,e)};e.prototype._transaction=function(e,t,r){var n=this;var i=PSD.trans;if(!i||i.db!==this||e.indexOf("!")!==-1)i=null;var s=e.indexOf("?")!==-1;e=e.replace("!","").replace("?","");var a,o;try{o=t.map((function(e){var t=e instanceof n.Table?e.name:e;if(typeof t!=="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return t}));if(e=="r"||e===READONLY)a=READONLY;else if(e=="rw"||e==READWRITE)a=READWRITE;else throw new exceptions.InvalidArgument("Invalid transaction mode: "+e);if(i){if(i.mode===READONLY&&a===READWRITE){if(s){i=null}else throw new exceptions.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY")}if(i){o.forEach((function(e){if(i&&i.storeNames.indexOf(e)===-1){if(s){i=null}else throw new exceptions.SubTransaction("Table "+e+" not included in parent transaction.")}}))}if(s&&i&&!i.active){i=null}}}catch(e){return i?i._promise(null,(function(t,r){r(e)})):rejection(e)}var f=enterTransactionScope.bind(null,this,a,o,i,r);return i?i._promise(a,f,"lock"):PSD.trans?usePSD(PSD.transless,(function(){return n._whenReady(f)})):this._whenReady(f)};e.prototype.table=function(e){if(!hasOwn(this._allTables,e)){throw new exceptions.InvalidTable("Table "+e+" does not exist")}return this._allTables[e]};return e}();var symbolObservable=typeof Symbol!=="undefined"&&"observable"in Symbol?Symbol.observable:"@@observable";var Observable$1=function(){function e(e){this._subscribe=e}e.prototype.subscribe=function(e,t,r){return this._subscribe(!e||typeof e==="function"?{next:e,error:t,complete:r}:e)};e.prototype[symbolObservable]=function(){return this};return e}();function extendObservabilitySet(e,t){keys$4(t).forEach((function(r){var n=e[r]||(e[r]=new RangeSet);mergeRanges(n,t[r])}));return e}function liveQuery(e){return new Observable$1((function(t){var r=isAsyncFunction(e);function n(t){if(r){incrementExpectedAwaits()}var n=function(){return newScope(e,{subscr:t,trans:null})};var i=PSD.trans?usePSD(PSD.transless,n):n();if(r){i.then(decrementExpectedAwaits,decrementExpectedAwaits)}return i}var i=false;var s={};var a={};var o={get closed(){return i},unsubscribe:function(){i=true;globalEvents.storagemutated.unsubscribe(l)}};t.start&&t.start(o);var f=false,c=false;function u(){return keys$4(a).some((function(e){return s[e]&&rangesOverlap(s[e],a[e])}))}var l=function(e){extendObservabilitySet(s,e);if(u()){h()}};var h=function(){if(f||i)return;s={};var e={};var r=n(e);if(!c){globalEvents(DEXIE_STORAGE_MUTATED_EVENT_NAME,l);c=true}f=true;Promise.resolve(r).then((function(r){f=false;if(i)return;if(u()){h()}else{s={};a=e;t.next&&t.next(r)}}),(function(e){f=false;t.error&&t.error(e);o.unsubscribe()}))};h();return o}))}var domDeps;try{domDeps={indexedDB:_global.indexedDB||_global.mozIndexedDB||_global.webkitIndexedDB||_global.msIndexedDB,IDBKeyRange:_global.IDBKeyRange||_global.webkitIDBKeyRange}}catch(e){domDeps={indexedDB:null,IDBKeyRange:null}}var Dexie=Dexie$1;props(Dexie,__assign$1(__assign$1({},fullNameExceptions),{delete:function(e){var t=new Dexie(e,{addons:[]});return t.delete()},exists:function(e){return new Dexie(e,{addons:[]}).open().then((function(e){e.close();return true})).catch("NoSuchDatabaseError",(function(){return false}))},getDatabaseNames:function(e){try{return getDatabaseNames(Dexie.dependencies).then(e)}catch(e){return rejection(new exceptions.MissingAPI)}},defineClass:function(){function e(e){extend(this,e)}return e},ignoreTransaction:function(e){return PSD.trans?usePSD(PSD.transless,e):e()},vip,async:function(e){return function(){try{var t=awaitIterator(e.apply(this,arguments));if(!t||typeof t.then!=="function")return DexiePromise.resolve(t);return t}catch(e){return rejection(e)}}},spawn:function(e,t,r){try{var n=awaitIterator(e.apply(r,t||[]));if(!n||typeof n.then!=="function")return DexiePromise.resolve(n);return n}catch(e){return rejection(e)}},currentTransaction:{get:function(){return PSD.trans||null}},waitFor:function(e,t){var r=DexiePromise.resolve(typeof e==="function"?Dexie.ignoreTransaction(e):e).timeout(t||6e4);return PSD.trans?PSD.trans.waitFor(r):r},Promise:DexiePromise,debug:{get:function(){return debug$4},set:function(e){setDebug(e,e==="dexie"?function(){return true}:dexieStackFrameFilter)}},derive,extend,props,override,Events,on:globalEvents,liveQuery,extendObservabilitySet,getByKeyPath,setByKeyPath,delByKeyPath,shallowClone:shallowClone$1,deepClone:deepClone$1,getObjectDiff,cmp:cmp$3,asap:asap$1,minKey,addons:[],connections,errnames,dependencies:domDeps,semVer:DEXIE_VERSION,version:DEXIE_VERSION.split(".").map((function(e){return parseInt(e)})).reduce((function(e,t,r){return e+t/Math.pow(10,r*2)}))}));Dexie.maxKey=getMaxKey(Dexie.dependencies.IDBKeyRange);if(typeof dispatchEvent!=="undefined"&&typeof addEventListener!=="undefined"){globalEvents(DEXIE_STORAGE_MUTATED_EVENT_NAME,(function(e){if(!propagatingLocally){var t;if(isIEOrEdge){t=document.createEvent("CustomEvent");t.initCustomEvent(STORAGE_MUTATED_DOM_EVENT_NAME,true,true,e)}else{t=new CustomEvent(STORAGE_MUTATED_DOM_EVENT_NAME,{detail:e})}propagatingLocally=true;dispatchEvent(t);propagatingLocally=false}}));addEventListener(STORAGE_MUTATED_DOM_EVENT_NAME,(function(e){var t=e.detail;if(!propagatingLocally){propagateLocally(t)}}))}function propagateLocally(e){var t=propagatingLocally;try{propagatingLocally=true;globalEvents.storagemutated.fire(e)}finally{propagatingLocally=t}}var propagatingLocally=false;if(typeof BroadcastChannel!=="undefined"){var bc_1=new BroadcastChannel(STORAGE_MUTATED_DOM_EVENT_NAME);if(typeof bc_1.unref==="function"){bc_1.unref()}globalEvents(DEXIE_STORAGE_MUTATED_EVENT_NAME,(function(e){if(!propagatingLocally){bc_1.postMessage(e)}}));bc_1.onmessage=function(e){if(e.data)propagateLocally(e.data)}}else if(typeof self!=="undefined"&&typeof navigator!=="undefined"){globalEvents(DEXIE_STORAGE_MUTATED_EVENT_NAME,(function(e){try{if(!propagatingLocally){if(typeof localStorage!=="undefined"){localStorage.setItem(STORAGE_MUTATED_DOM_EVENT_NAME,JSON.stringify({trig:Math.random(),changedParts:e}))}if(typeof self["clients"]==="object"){__spreadArray$2([],self["clients"].matchAll({includeUncontrolled:true}),true).forEach((function(t){return t.postMessage({type:STORAGE_MUTATED_DOM_EVENT_NAME,changedParts:e})}))}}}catch(e){}}));if(typeof addEventListener!=="undefined"){addEventListener("storage",(function(e){if(e.key===STORAGE_MUTATED_DOM_EVENT_NAME){var t=JSON.parse(e.newValue);if(t)propagateLocally(t.changedParts)}}))}var swContainer=self.document&&navigator.serviceWorker;if(swContainer){swContainer.addEventListener("message",propagateMessageLocally)}}function propagateMessageLocally(e){var t=e.data;if(t&&t.type===STORAGE_MUTATED_DOM_EVENT_NAME){propagateLocally(t.changedParts)}}DexiePromise.rejectionMapper=mapError;setDebug(debug$4,dexieStackFrameFilter);class TSViewerDb extends Dexie$1{constructor(){super("TSViewer");this.version(5).stores({tokens:`&[chainId+collectionId+ownerAddress], dt`,tokenMeta:`&[chainId+collectionId], dt`,myTokenScripts:`&tokenScriptId`,attestations:`&[collectionId+tokenId]`,tsLocalStorage:`&[tokenScriptId+key], tokenScriptId`})}async checkCompatibility(){try{await this.open()}catch(e){console.warn("Dexie database open error, initializing new DB");await this.cloneDatabase(this.name,`${this.name}-backup-${Date.now()}`);await this.delete()}}async cloneDatabase(e,t){const r=new Dexie$1(e);return r.open().then((()=>{const e=new Dexie$1(t);const n=r.tables.reduce(((e,t)=>{e[t.name]=[t.schema.primKey].concat(t.schema.indexes).map((e=>e.src)).join(",");return e}),{});e.version(this.verno).stores(n);return r.tables.reduce(((t,r)=>t.then((()=>r.toArray())).then((t=>e.table(r.name).bulkAdd(t)))),Promise.resolve(1)).then((()=>{r.close();e.close()}))}))}}const dbProvider=new TSViewerDb;async function showToastNotification(e,t,r){const n=document.querySelector(".toast");await n.Toast({title:t,description:r,timeOut:3e4,position:"top-right",type:e})}window.showToastNotification=showToastNotification;const COLLECTION_CACHE_TTL=86400;const TOKEN_CACHE_TTL=3600;const BASE_TOKEN_DISCOVERY_URL="https://api.token-discovery.tokenscript.org";class DiscoveryAdapter{async getTokens(e,t){const r=[];if(!Web3WalletProvider.isWalletConnected()){return[]}const n=await this.getCurrentWalletAddress();for(const i of e){try{let e=t?false:await this.getCachedTokens(i,n);if(!e){e=await this.fetchTokens(i,n);await this.storeCachedTokens(e,n)}r.push(e)}catch(e){await showToastNotification("error","Token Discovery Error",e.message)}}return r}async getCurrentWalletAddress(){return(await Web3WalletProvider.getWallet(true)).address}async getCachedTokens(e,t){const r=await dbProvider.tokens.where({chainId:e.chainId,collectionId:e.contractAddress.toLowerCase(),ownerAddress:t.toLowerCase()}).first();if(r&&Date.now()<r.dt+TOKEN_CACHE_TTL*1e3)return r.data;return false}async storeCachedTokens(e,t){await dbProvider.tokens.put({chainId:e.chainId,collectionId:e.contractAddress.toLowerCase(),ownerAddress:t.toLowerCase(),data:e,dt:Date.now()})}async fetchTokens(e,t){var r,n,i,s,a,o,f,c;if(!CHAIN_MAP[e.chainId])throw new Error("Chain ID "+e.chainId+" is not supported for token discovery");const u=CHAIN_MAP[e.chainId];let l=await this.getCollectionMeta(e,u);if(e.chainId===ChainID.HARDHAT_LOCALHOST){e=Object.assign(Object.assign({},e),l);e=await this.fetchOwnerTokensRpc(e,t);return e}const h=await this.fetchOwnerTokens(e,u,t);if(e.tokenType!=="erc20"){const t=[];for(let n of h){t.push({collectionDetails:e,tokenId:n.tokenId,collectionId:e.contractAddress,name:n.title,description:n.description,attributes:(r=n.attributes)!==null&&r!==void 0?r:[],image:n.image,data:n})}e.tokenDetails=t;e.balance=t.length;e.symbol=l===null||l===void 0?void 0:l.symbol;e.decimals=0}else if(h.length>0){e.name=h[0].title;e.balance=(i=(n=h[0].data)===null||n===void 0?void 0:n.balance)!==null&&i!==void 0?i:0;e.symbol=h[0].symbol;e.decimals=(s=h[0].data)===null||s===void 0?void 0:s.decimals}else{e.name=l.title;e.balance=0;e.symbol=l.symbol;e.decimals=l.decimals;return e}if(l===null||l===void 0?void 0:l.image)e.image=l.image;e.symbol=((a=h[0])===null||a===void 0?void 0:a.symbol)?(o=h[0])===null||o===void 0?void 0:o.symbol:(c=(f=h[0])===null||f===void 0?void 0:f.data)===null||c===void 0?void 0:c.symbol;return e}async getCollectionMeta(e,t){let r=await this.getCachedMeta(e);if(!r){if(e.chainId===ChainID.HARDHAT_LOCALHOST){r=await this.fetchTokenMetadataRpc(e)}else{r=await this.fetchTokenMetadata(e,t)}await this.storeCachedMeta(e,r)}return r}async getCachedMeta(e){const t=await dbProvider.tokenMeta.where({chainId:e.chainId,collectionId:e.contractAddress.toLowerCase()}).first();if(t&&Date.now()<t.dt+COLLECTION_CACHE_TTL*1e3)return t.data;return false}async storeCachedMeta(e,t){await dbProvider.tokenMeta.put({chainId:e.chainId,collectionId:e.contractAddress.toLowerCase(),data:t,dt:Date.now()})}async fetchTokenMetadata(e,t){const r=e.tokenType==="erc20"?`/get-fungible-token?collectionAddress=${e.contractAddress}&chain=${t}&blockchain=evm`:`/get-token-collection?smartContract=${e.contractAddress}&chain=${t}&blockchain=evm`;return this.fetchRequest(r)}async fetchOwnerTokens(e,t,r){const n=e.tokenType==="erc20"?`/get-owner-fungible-tokens?collectionAddress=${e.contractAddress}&owner=${r}&chain=${t}&blockchain=evm`:`/get-owner-tokens?smartContract=${e.contractAddress}&chain=${t}&owner=${r}&blockchain=evm`;return this.fetchRequest(n)}async fetchTokenMetadataRpc(e){var t;const r=this.getEthersContractInstance(e.contractAddress,e.chainId,e.tokenType);let n,i,s,a,o;try{n=await r.name()}catch(e){console.log(e);n="Unknown Contract"}try{i=await r.symbol()}catch(e){console.log(e)}try{s=await r.contractURI()}catch(e){console.log(e)}if(s){const e=await(await fetch(s,{headers:{Accept:"text/plain"}})).json();if(e.name||e.title)n=(t=e.name)!==null&&t!==void 0?t:e.title;if(e.description)a=e.description;if(e.image)o=e.image}return{name:n!==null&&n!==void 0?n:"Test collection",symbol:i,description:a!==null&&a!==void 0?a:"",image:o!==null&&o!==void 0?o:""}}async fetchOwnerTokensRpc(e,t){var r,n,i;const s=this.getEthersContractInstance(e.contractAddress,e.chainId,e.tokenType);const a=[];try{if(e.tokenType==="erc20"){e.balance=BigInt(await s.balanceOf(t))}else{let o;try{o=await this.getTokenIdsLogs(s,t)}catch(e){o=await this.getTokenIdsEnumerable(s,t)}for(const t of o){let o={};try{const e=await s.tokenURI(t);o=await(await fetch(e,{headers:{Accept:"text/plain"}})).json()}catch(e){console.warn("Failed to load token metadata:",e)}console.log(o);a.push({collectionId:e.originId,tokenId:t.toString(),name:(r=o.name)!==null&&r!==void 0?r:"Test token #"+t,description:(n=o.description)!==null&&n!==void 0?n:"",image:(i=o.image)!==null&&i!==void 0?i:"",collectionDetails:e})}e.tokenDetails=a;e.balance=a.length}}catch(e){console.error(e)}return e}async getTokenIdsEnumerable(e,t){const r=[];const n=BigInt(await e.balanceOf(t));for(let i=0;i<n;i++){r.push(BigInt(await e.tokenOfOwnerByIndex(t,i)))}return r}async getTokenIdsLogs(e,t){const r=await e.queryFilter(e.filters.Transfer(t,null));const n=await e.queryFilter(e.filters.Transfer(null,t));const i=r.concat(n).sort(((e,t)=>e.blockNumber-t.blockNumber||e.transactionIndex-t.transactionIndex));const s=new Set;for(const{args:{from:e,to:r,tokenId:n}}of i){if(this.addressEqual(r,t)){s.add(n.toString())}else if(this.addressEqual(e,t)){s.delete(n.toString())}}return Array.from(s.values())}addressEqual(e,t){return e.toLowerCase()===t.toLowerCase()}getEthersContractInstance(e,t,r){const n=new JsonRpcProvider$1(CHAIN_CONFIG[t].rpc,t,{staticNetwork:new Network$1(t.toString(),t)});return new Contract$2(e,r==="erc20"?ERC20_ABI_JSON:ERC721_ABI_JSON,n)}async fetchRequest(e){const t=await fetch(BASE_TOKEN_DISCOVERY_URL+e);const r=t.status>=200&&t.status<=299;if(!r){throw new Error("Failed to load tokens, please try again shortly: "+t.statusText)}return t.json()}}const getSingleTokenMetadata=async(e,t,r)=>{const n=`/get-token-collection?chain=${CHAIN_MAP[e]}&smartContract=${t}`;const i=`/get-token?chain=${CHAIN_MAP[e]}&collectionAddress=${t}&tokenId=${r}`;const s=await Promise.all([fetch(BASE_TOKEN_DISCOVERY_URL+n),await fetch(BASE_TOKEN_DISCOVERY_URL+i)]);const a=s[0].status>=200&&s[0].status<=299&&(s[1].status>=200&&s[1].status<=299);if(!a){throw new Error("Failed to load token details")}const o=Object.assign({collectionData:await s[0].json()},await s[1].json());return{attributes:o.attributes,collectionDetails:{originId:"",blockChain:"eth",chainId:e,tokenType:o.collectionData.contractType.toLowerCase(),contractAddress:t,name:o.collectionData.title,description:o.collectionData.description,image:o.collectionData.image,balance:o.balance},collectionId:o.collection,description:o.description,image:o.image,name:o.title,tokenId:o.tokenId,balance:o.balance}};const getCardButtonClass=(e,t)=>{switch(e.buttonClass){case"featured":return"btn-featured";case"primary":return"btn-primary";case"secondary":return"btn-secondary";default:return e.type==="token"||t===0?"btn-primary":"btn-secondary"}};class LocalStorageProxy{constructor(e){this.tokenscript=e;this.tsId=e.getSourceInfo().tsId}handleLocalStorageRequest(e){if(!this.tokenscript.getEngine().getLocalStorageAdapter){console.warn("LocalStorage adapter not provided, no persistence available");return}const t=this.tokenscript.getEngine().getLocalStorageAdapter();switch(e.method){case"set":t.setItem(this.tsId,e.key,e.value);break;case"remove":t.removeItem(this.tsId,e.key);break;case"clear":t.clear(this.tsId);break}}async getLocalStorageDictionary(){if(!this.tokenscript.getEngine().getLocalStorageAdapter){console.warn("LocalStorage adapter not provided, no persistence available");return{}}const e=this.tokenscript.getEngine().getLocalStorageAdapter();return await e.getAllItems(this.tsId)}}const v1Txt='/*! For license information please see bundle.js.LICENSE.txt */\n(()=>{"use strict";var t={d:(e,r)=>{for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{dQ:()=>Di,ci:()=>Pi,bytesToNumberBE:()=>Oi,ty:()=>Ci,eV:()=>Ui,n$:()=>Mi,ql:()=>Bi,hexToBytes:()=>Ti,tL:()=>xi,S5:()=>Si,FF:()=>Hi});var r={};t.r(r),t.d(r,{AbiCoder:()=>xr,AbstractProvider:()=>Wl,AbstractSigner:()=>iu,AlchemyProvider:()=>Ru,AnkrProvider:()=>ku,BaseContract:()=>Jn,BaseWallet:()=>Mh,Block:()=>fn,BrowserProvider:()=>ih,CloudflareProvider:()=>Pu,ConstructorFragment:()=>vr,Contract:()=>zn,ContractEventPayload:()=>Nn,ContractFactory:()=>qn,ContractTransactionReceipt:()=>En,ContractTransactionResponse:()=>vn,ContractUnknownEventPayload:()=>kn,EnsPlugin:()=>Dc,EnsResolver:()=>vl,ErrorDescription:()=>Ur,ErrorFragment:()=>Ar,EtherSymbol:()=>rn,EtherscanPlugin:()=>Tu,EtherscanProvider:()=>xu,EventFragment:()=>Er,EventLog:()=>bn,EventPayload:()=>wn,FallbackFragment:()=>kr,FallbackProvider:()=>eh,FeeData:()=>un,FeeDataNetworkPlugin:()=>Fc,FetchCancelSignal:()=>Pc,FetchRequest:()=>Tc,FetchResponse:()=>Oc,FetchUrlFeeDataNetworkPlugin:()=>Lc,FixedNumber:()=>wh,Fragment:()=>yr,FunctionFragment:()=>Nr,GasCostPlugin:()=>Uc,HDNodeVoidWallet:()=>Jf,HDNodeWallet:()=>Kf,Indexed:()=>Dr,InfuraProvider:()=>ju,InfuraWebSocketProvider:()=>Hu,Interface:()=>Mr,IpcSocketProvider:()=>ch,JsonRpcApiProvider:()=>yu,JsonRpcProvider:()=>bu,JsonRpcSigner:()=>mu,LangEn:()=>Sh,Log:()=>dn,LogDescription:()=>Sr,MaxInt256:()=>tn,MaxUint256:()=>Xr,MessagePrefix:()=>nn,MinInt256:()=>$r,Mnemonic:()=>Lh,MulticoinProviderPlugin:()=>bl,N:()=>Yr,NamedFragment:()=>wr,Network:()=>Gc,NetworkPlugin:()=>Bc,NonceManager:()=>sh,ParamType:()=>mr,PocketProvider:()=>ah,QuickNodeProvider:()=>_u,Result:()=>it,Signature:()=>Ei,SigningKey:()=>Eo,SocketBlockSubscriber:()=>Uu,SocketEventSubscriber:()=>Fu,SocketPendingSubscriber:()=>Du,SocketProvider:()=>Lu,SocketSubscriber:()=>Bu,StructFragment:()=>Rr,Transaction:()=>ul,TransactionDescription:()=>Br,TransactionReceipt:()=>pn,TransactionResponse:()=>gn,Typed:()=>me,TypedDataEncoder:()=>dc,UndecodedEventLog:()=>An,UnmanagedSubscriber:()=>Vl,Utf8ErrorFuncs:()=>S,VoidSigner:()=>ou,Wallet:()=>Xf,WebSocketProvider:()=>Mu,WeiPerEther:()=>Zr,Wordlist:()=>Oh,WordlistOwl:()=>Ch,WordlistOwlA:()=>$f,ZeroAddress:()=>Wr,ZeroHash:()=>en,accessListify:()=>on,assert:()=>h,assertArgument:()=>f,assertArgumentCount:()=>d,assertNormalize:()=>g,assertPrivate:()=>m,checkResultErrors:()=>ot,computeAddress:()=>_a,computeHmac:()=>ws,concat:()=>N,copyRequest:()=>hn,dataLength:()=>R,dataSlice:()=>P,decodeBase58:()=>yl,decodeBase64:()=>gc,decodeBytes32String:()=>M,decodeRlp:()=>zc,decryptCrowdsaleJson:()=>Yf,decryptKeystoreJson:()=>xf,decryptKeystoreJsonSync:()=>Of,defaultPath:()=>Ff,defineProperties:()=>o,dnsEncode:()=>Qa,encodeBase58:()=>ml,encodeBase64:()=>mc,encodeBytes32String:()=>L,encodeRlp:()=>Qr,encryptKeystoreJson:()=>Df,encryptKeystoreJsonSync:()=>Uf,ensNormalize:()=>Ga,formatEther:()=>vh,formatUnits:()=>Ah,fromTwos:()=>Q,getAccountPath:()=>zf,getAddress:()=>ue,getBigInt:()=>K,getBytes:()=>w,getBytesCopy:()=>b,getCreate2Address:()=>Vr,getCreateAddress:()=>_r,getDefaultProvider:()=>nh,getIcapAddress:()=>he,getIndexedAccountPath:()=>qf,getNumber:()=>W,getUint:()=>J,hashMessage:()=>Ka,hexlify:()=>k,id:()=>Ue,isAddress:()=>Jr,isAddressable:()=>Kr,isBytesLike:()=>E,isCallException:()=>l,isCrowdsaleJson:()=>Wf,isError:()=>c,isHexString:()=>A,isKeystoreJson:()=>Pf,isValidName:()=>Ha,keccak256:()=>re,lock:()=>fi,makeError:()=>u,mask:()=>V,namehash:()=>ja,parseEther:()=>kh,parseUnits:()=>Eh,pbkdf2:()=>Hs,randomBytes:()=>Vs,recoverAddress:()=>Va,resolveAddress:()=>qr,resolveProperties:()=>i,ripemd160:()=>Fs,scrypt:()=>ri,scryptSync:()=>ni,sha256:()=>ui,sha512:()=>hi,showThrottleMessage:()=>Sc,solidityPacked:()=>Za,solidityPackedKeccak256:()=>Xa,solidityPackedSha256:()=>$a,stripZerosLeft:()=>I,toBeArray:()=>X,toBeHex:()=>Z,toBigInt:()=>q,toNumber:()=>Y,toQuantity:()=>$,toTwos:()=>_,toUtf8Bytes:()=>U,toUtf8CodePoints:()=>F,toUtf8String:()=>D,uuidV4:()=>Nh,verifyMessage:()=>Ja,verifyTypedData:()=>pc,version:()=>n,wordlists:()=>td,zeroPadBytes:()=>C,zeroPadValue:()=>O});const n="6.10.0";function s(t,e,r){const n=e.split("|").map((t=>t.trim()));for(let r=0;r<n.length;r++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof t===e)return}const s=new Error(`invalid value for type ${e}`);throw s.code="INVALID_ARGUMENT",s.argument=`value.${r}`,s.value=t,s}async function i(t){const e=Object.keys(t);return(await Promise.all(e.map((e=>Promise.resolve(t[e]))))).reduce(((t,r,n)=>(t[e[n]]=r,t)),{})}function o(t,e,r){for(let n in e){let i=e[n];const o=r?r[n]:null;o&&s(i,o,n),Object.defineProperty(t,n,{enumerable:!0,value:i,writable:!1})}}function a(t){if(null==t)return"null";if(Array.isArray(t))return"[ "+t.map(a).join(", ")+" ]";if(t instanceof Uint8Array){const e="0123456789abcdef";let r="0x";for(let n=0;n<t.length;n++)r+=e[t[n]>>4],r+=e[15&t[n]];return r}if("object"==typeof t&&"function"==typeof t.toJSON)return a(t.toJSON());switch(typeof t){case"boolean":case"symbol":case"number":return t.toString();case"bigint":return BigInt(t).toString();case"string":return JSON.stringify(t);case"object":{const e=Object.keys(t);return e.sort(),"{ "+e.map((e=>`${a(e)}: ${a(t[e])}`)).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function c(t,e){return t&&t.code===e}function l(t){return c(t,"CALL_EXCEPTION")}function u(t,e,r){let s,i=t;{const s=[];if(r){if("message"in r||"code"in r||"name"in r)throw new Error(`value will overwrite populated values: ${a(r)}`);for(const t in r){if("shortMessage"===t)continue;const e=r[t];s.push(t+"="+a(e))}}s.push(`code=${e}`),s.push(`version=${n}`),s.length&&(t+=" ("+s.join(", ")+")")}switch(e){case"INVALID_ARGUMENT":s=new TypeError(t);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":s=new RangeError(t);break;default:s=new Error(t)}return o(s,{code:e}),r&&Object.assign(s,r),null==s.shortMessage&&o(s,{shortMessage:i}),s}function h(t,e,r,n){if(!t)throw u(e,r,n)}function f(t,e,r,n){h(t,e,"INVALID_ARGUMENT",{argument:r,value:n})}function d(t,e,r){null==r&&(r=""),r&&(r=": "+r),h(t>=e,"missing arguemnt"+r,"MISSING_ARGUMENT",{count:t,expectedCount:e}),h(t<=e,"too many arguemnts"+r,"UNEXPECTED_ARGUMENT",{count:t,expectedCount:e})}const p=["NFD","NFC","NFKD","NFKC"].reduce(((t,e)=>{try{if("test"!=="test".normalize(e))throw new Error("bad");if("NFD"===e){if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken")}t.push(e)}catch(t){}return t}),[]);function g(t){h(p.indexOf(t)>=0,"platform missing String.prototype.normalize","UNSUPPORTED_OPERATION",{operation:"String.prototype.normalize",info:{form:t}})}function m(t,e,r){if(null==r&&(r=""),t!==e){let t=r,e="new";r&&(t+=".",e+=" "+r),h(!1,`private constructor; use ${t}from* methods`,"UNSUPPORTED_OPERATION",{operation:e})}}function y(t,e,r){if(t instanceof Uint8Array)return r?new Uint8Array(t):t;if("string"==typeof t&&t.match(/^0x([0-9a-f][0-9a-f])*$/i)){const e=new Uint8Array((t.length-2)/2);let r=2;for(let n=0;n<e.length;n++)e[n]=parseInt(t.substring(r,r+2),16),r+=2;return e}f(!1,"invalid BytesLike value",e||"value",t)}function w(t,e){return y(t,e,!1)}function b(t,e){return y(t,e,!0)}function A(t,e){return!("string"!=typeof t||!t.match(/^0x[0-9A-Fa-f]*$/)||"number"==typeof e&&t.length!==2+2*e||!0===e&&t.length%2!=0)}function E(t){return A(t,!0)||t instanceof Uint8Array}const v="0123456789abcdef";function k(t){const e=w(t);let r="0x";for(let t=0;t<e.length;t++){const n=e[t];r+=v[(240&n)>>4]+v[15&n]}return r}function N(t){return"0x"+t.map((t=>k(t).substring(2))).join("")}function R(t){return A(t,!0)?(t.length-2)/2:w(t).length}function P(t,e,r){const n=w(t);return null!=r&&r>n.length&&h(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:n,length:n.length,offset:r}),k(n.slice(null==e?0:e,null==r?n.length:r))}function I(t){let e=k(t).substring(2);for(;e.startsWith("00");)e=e.substring(2);return"0x"+e}function T(t,e,r){const n=w(t);h(e>=n.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(n),length:e,offset:e+1});const s=new Uint8Array(e);return s.fill(0),r?s.set(n,e-n.length):s.set(n,0),k(s)}function O(t,e){return T(t,e,!0)}function C(t,e){return T(t,e,!1)}function x(t,e,r,n,s){if("BAD_PREFIX"===t||"UNEXPECTED_CONTINUE"===t){let t=0;for(let n=e+1;n<r.length&&r[n]>>6==2;n++)t++;return t}return"OVERRUN"===t?r.length-e-1:0}const S=Object.freeze({error:function(t,e,r,n,s){f(!1,`invalid codepoint at offset ${e}; ${t}`,"bytes",r)},ignore:x,replace:function(t,e,r,n,s){return"OVERLONG"===t?(f("number"==typeof s,"invalid bad code point for replacement","badCodepoint",s),n.push(s),0):(n.push(65533),x(t,e,r))}});function B(t,e){null==e&&(e=S.error);const r=w(t,"bytes"),n=[];let s=0;for(;s<r.length;){const t=r[s++];if(t>>7==0){n.push(t);continue}let i=null,o=null;if(192==(224&t))i=1,o=127;else if(224==(240&t))i=2,o=2047;else{if(240!=(248&t)){s+=e(128==(192&t)?"UNEXPECTED_CONTINUE":"BAD_PREFIX",s-1,r,n);continue}i=3,o=65535}if(s-1+i>=r.length){s+=e("OVERRUN",s-1,r,n);continue}let a=t&(1<<8-i-1)-1;for(let t=0;t<i;t++){let t=r[s];if(128!=(192&t)){s+=e("MISSING_CONTINUE",s,r,n),a=null;break}a=a<<6|63&t,s++}null!==a&&(a>1114111?s+=e("OUT_OF_RANGE",s-1-i,r,n,a):a>=55296&&a<=57343?s+=e("UTF16_SURROGATE",s-1-i,r,n,a):a<=o?s+=e("OVERLONG",s-1-i,r,n,a):n.push(a))}return n}function U(t,e){null!=e&&(g(e),t=t.normalize(e));let r=[];for(let e=0;e<t.length;e++){const n=t.charCodeAt(e);if(n<128)r.push(n);else if(n<2048)r.push(n>>6|192),r.push(63&n|128);else if(55296==(64512&n)){e++;const s=t.charCodeAt(e);f(e<t.length&&56320==(64512&s),"invalid surrogate pair","str",t);const i=65536+((1023&n)<<10)+(1023&s);r.push(i>>18|240),r.push(i>>12&63|128),r.push(i>>6&63|128),r.push(63&i|128)}else r.push(n>>12|224),r.push(n>>6&63|128),r.push(63&n|128)}return new Uint8Array(r)}function D(t,e){return B(t,e).map((t=>t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10&1023),56320+(1023&t))))).join("")}function F(t,e){return B(U(t,e))}function L(t){const e=U(t);if(e.length>31)throw new Error("bytes32 string must be less than 32 bytes");return C(e,32)}function M(t){const e=w(t,"bytes");if(32!==e.length)throw new Error("invalid bytes32 - not 32 bytes long");if(0!==e[31])throw new Error("invalid bytes32 string - no null terminator");let r=31;for(;0===e[r-1];)r--;return D(e.slice(0,r))}const G=BigInt(0),H=BigInt(1),j=9007199254740991;function Q(t,e){const r=J(t,"value"),n=BigInt(W(e,"width"));return h(r>>n===G,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:t}),r>>n-H?-((~r&(H<<n)-H)+H):r}function _(t,e){let r=K(t,"value");const n=BigInt(W(e,"width")),s=H<<n-H;return r<G?(r=-r,h(r<=s,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t}),(~r&(H<<n)-H)+H):(h(r<s,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t}),r)}function V(t,e){const r=J(t,"value"),n=BigInt(W(e,"bits"));return r&(H<<n)-H}function K(t,e){switch(typeof t){case"bigint":return t;case"number":return f(Number.isInteger(t),"underflow",e||"value",t),f(t>=-j&&t<=j,"overflow",e||"value",t),BigInt(t);case"string":try{if(""===t)throw new Error("empty string");return"-"===t[0]&&"-"!==t[1]?-BigInt(t.substring(1)):BigInt(t)}catch(r){f(!1,`invalid BigNumberish string: ${r.message}`,e||"value",t)}}f(!1,"invalid BigNumberish value",e||"value",t)}function J(t,e){const r=K(t,e);return h(r>=G,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:t}),r}const z="0123456789abcdef";function q(t){if(t instanceof Uint8Array){let e="0x0";for(const r of t)e+=z[r>>4],e+=z[15&r];return BigInt(e)}return K(t)}function W(t,e){switch(typeof t){case"bigint":return f(t>=-j&&t<=j,"overflow",e||"value",t),Number(t);case"number":return f(Number.isInteger(t),"underflow",e||"value",t),f(t>=-j&&t<=j,"overflow",e||"value",t),t;case"string":try{if(""===t)throw new Error("empty string");return W(BigInt(t),e)}catch(r){f(!1,`invalid numeric string: ${r.message}`,e||"value",t)}}f(!1,"invalid numeric value",e||"value",t)}function Y(t){return W(q(t))}function Z(t,e){let r=J(t,"value").toString(16);if(null==e)r.length%2&&(r="0"+r);else{const n=W(e,"width");for(h(2*n>=r.length,`value exceeds width (${n} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:t});r.length<2*n;)r="0"+r}return"0x"+r}function X(t){const e=J(t,"value");if(e===G)return new Uint8Array([]);let r=e.toString(16);r.length%2&&(r="0"+r);const n=new Uint8Array(r.length/2);for(let t=0;t<n.length;t++){const e=2*t;n[t]=parseInt(r.substring(e,e+2),16)}return n}function $(t){let e=k(E(t)?t:X(t)).substring(2);for(;e.startsWith("0");)e=e.substring(1);return""===e&&(e="0"),"0x"+e}const tt=32,et=new Uint8Array(tt),rt=["then"],nt={};function st(t,e){const r=new Error(`deferred error during ABI decoding triggered accessing ${t}`);throw r.error=e,r}class it extends Array{#t;constructor(...t){const e=t[0];let r=t[1],n=(t[2]||[]).slice(),s=!0;e!==nt&&(r=t,n=[],s=!1),super(r.length),r.forEach(((t,e)=>{this[e]=t}));const i=n.reduce(((t,e)=>("string"==typeof e&&t.set(e,(t.get(e)||0)+1),t)),new Map);if(this.#t=Object.freeze(r.map(((t,e)=>{const r=n[e];return null!=r&&1===i.get(r)?r:null}))),s)return Object.freeze(this),new Proxy(this,{get:(t,e,r)=>{if("string"==typeof e){if(e.match(/^[0-9]+$/)){const r=W(e,"%index");if(r<0||r>=this.length)throw new RangeError("out of result range");const n=t[r];return n instanceof Error&&st(`index ${r}`,n),n}if(rt.indexOf(e)>=0)return Reflect.get(t,e,r);const n=t[e];if(n instanceof Function)return function(...e){return n.apply(this===r?t:this,e)};if(!(e in t))return t.getValue.apply(this===r?t:this,[e])}return Reflect.get(t,e,r)}})}toArray(){const t=[];return this.forEach(((e,r)=>{e instanceof Error&&st(`index ${r}`,e),t.push(e)})),t}toObject(){return this.#t.reduce(((t,e,r)=>(h(null!=e,"value at index ${ index } unnamed","UNSUPPORTED_OPERATION",{operation:"toObject()"}),e in t||(t[e]=this.getValue(e)),t)),{})}slice(t,e){null==t&&(t=0),t<0&&(t+=this.length)<0&&(t=0),null==e&&(e=this.length),e<0&&(e+=this.length)<0&&(e=0),e>this.length&&(e=this.length);const r=[],n=[];for(let s=t;s<e;s++)r.push(this[s]),n.push(this.#t[s]);return new it(nt,r,n)}filter(t,e){const r=[],n=[];for(let s=0;s<this.length;s++){const i=this[s];i instanceof Error&&st(`index ${s}`,i),t.call(e,i,s,this)&&(r.push(i),n.push(this.#t[s]))}return new it(nt,r,n)}map(t,e){const r=[];for(let n=0;n<this.length;n++){const s=this[n];s instanceof Error&&st(`index ${n}`,s),r.push(t.call(e,s,n,this))}return r}getValue(t){const e=this.#t.indexOf(t);if(-1===e)return;const r=this[e];return r instanceof Error&&st(`property ${JSON.stringify(t)}`,r.error),r}static fromItems(t,e){return new it(nt,t,e)}}function ot(t){const e=[],r=function(t,n){if(Array.isArray(n))for(let s in n){const i=t.slice();i.push(s);try{r(i,n[s])}catch(t){e.push({path:i,error:t})}}};return r([],t),e}function at(t){let e=X(t);return h(e.length<=tt,"value out-of-bounds","BUFFER_OVERRUN",{buffer:e,length:tt,offset:e.length}),e.length!==tt&&(e=b(N([et.slice(e.length%tt),e]))),e}class ct{name;type;localName;dynamic;constructor(t,e,r,n){o(this,{name:t,type:e,localName:r,dynamic:n},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(t,e){f(!1,t,this.localName,e)}}class lt{#e;#r;constructor(){this.#e=[],this.#r=0}get data(){return N(this.#e)}get length(){return this.#r}#n(t){return this.#e.push(t),this.#r+=t.length,t.length}appendWriter(t){return this.#n(b(t.data))}writeBytes(t){let e=b(t);const r=e.length%tt;return r&&(e=b(N([e,et.slice(r)]))),this.#n(e)}writeValue(t){return this.#n(at(t))}writeUpdatableValue(){const t=this.#e.length;return this.#e.push(et),this.#r+=tt,e=>{this.#e[t]=at(e)}}}class ut{allowLoose;#e;#s;#i;#o;#a;constructor(t,e,r){o(this,{allowLoose:!!e}),this.#e=b(t),this.#i=0,this.#o=null,this.#a=null!=r?r:1024,this.#s=0}get data(){return k(this.#e)}get dataLength(){return this.#e.length}get consumed(){return this.#s}get bytes(){return new Uint8Array(this.#e)}#c(t){if(this.#o)return this.#o.#c(t);this.#i+=t,h(this.#a<1||this.#i<=this.#a*this.dataLength,`compressed ABI data exceeds inflation ratio of ${this.#a} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:b(this.#e),offset:this.#s,length:t,info:{bytesRead:this.#i,dataLength:this.dataLength}})}#l(t,e,r){let n=Math.ceil(e/tt)*tt;return this.#s+n>this.#e.length&&(this.allowLoose&&r&&this.#s+e<=this.#e.length?n=e:h(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:b(this.#e),length:this.#e.length,offset:this.#s+n})),this.#e.slice(this.#s,this.#s+n)}subReader(t){const e=new ut(this.#e.slice(this.#s+t),this.allowLoose,this.#a);return e.#o=this,e}readBytes(t,e){let r=this.#l(0,t,!!e);return this.#c(t),this.#s+=r.length,r.slice(0,t)}readValue(){return q(this.readBytes(tt))}readIndex(){return Y(this.readBytes(tt))}}function ht(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function ft(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function dt(t){if("function"!=typeof t||"function"!=typeof t.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");ht(t.outputLen),ht(t.blockLen)}function pt(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function gt(t,e){ft(t);const r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}const mt=BigInt(2**32-1),yt=BigInt(32);function wt(t,e=!1){return e?{h:Number(t&mt),l:Number(t>>yt&mt)}:{h:0|Number(t>>yt&mt),l:0|Number(t&mt)}}function bt(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=wt(t[s],e);[r[s],n[s]]=[i,o]}return[r,n]}const At=(t,e,r)=>t<<r|e>>>32-r,Et=(t,e,r)=>e<<r|t>>>32-r,vt=(t,e,r)=>e<<r-32|t>>>64-r,kt=(t,e,r)=>t<<r-32|e>>>64-r,Nt={fromBig:wt,split:bt,toBig:(t,e)=>BigInt(t>>>0)<<yt|BigInt(e>>>0),shrSH:(t,e,r)=>t>>>r,shrSL:(t,e,r)=>t<<32-r|e>>>r,rotrSH:(t,e,r)=>t>>>r|e<<32-r,rotrSL:(t,e,r)=>t<<32-r|e>>>r,rotrBH:(t,e,r)=>t<<64-r|e>>>r-32,rotrBL:(t,e,r)=>t>>>r-32|e<<64-r,rotr32H:(t,e)=>e,rotr32L:(t,e)=>t,rotlSH:At,rotlSL:Et,rotlBH:vt,rotlBL:kt,add:function(t,e,r,n){const s=(e>>>0)+(n>>>0);return{h:t+r+(s/2**32|0)|0,l:0|s}},add3L:(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),add3H:(t,e,r,n)=>e+r+n+(t/2**32|0)|0,add4L:(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),add4H:(t,e,r,n,s)=>e+r+n+s+(t/2**32|0)|0,add5H:(t,e,r,n,s,i)=>e+r+n+s+i+(t/2**32|0)|0,add5L:(t,e,r,n,s)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(s>>>0)},Rt="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,Pt=t=>t instanceof Uint8Array,It=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),Tt=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),Ot=(t,e)=>t<<32-e|t>>>e;if(68!==new Uint8Array(new Uint32Array([287454020]).buffer)[0])throw new Error("Non little-endian hardware is not supported");const Ct=async()=>{};async function xt(t,e,r){let n=Date.now();for(let s=0;s<t;s++){r(s);const t=Date.now()-n;t>=0&&t<e||(await Ct(),n+=t)}}function St(t){if("string"==typeof t&&(t=function(t){if("string"!=typeof t)throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array((new TextEncoder).encode(t))}(t)),!Pt(t))throw new Error("expected Uint8Array, got "+typeof t);return t}class Bt{clone(){return this._cloneInto()}}const Ut={}.toString;function Dt(t,e){if(void 0!==e&&"[object Object]"!==Ut.call(e))throw new Error("Options should be object or undefined");return Object.assign(t,e)}function Ft(t){const e=e=>t().update(St(e)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function Lt(t=32){if(Rt&&"function"==typeof Rt.getRandomValues)return Rt.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}const[Mt,Gt,Ht]=[[],[],[]],jt=BigInt(0),Qt=BigInt(1),_t=BigInt(2),Vt=BigInt(7),Kt=BigInt(256),Jt=BigInt(113);for(let t=0,e=Qt,r=1,n=0;t<24;t++){[r,n]=[n,(2*r+3*n)%5],Mt.push(2*(5*n+r)),Gt.push((t+1)*(t+2)/2%64);let s=jt;for(let t=0;t<7;t++)e=(e<<Qt^(e>>Vt)*Jt)%Kt,e&_t&&(s^=Qt<<(Qt<<BigInt(t))-Qt);Ht.push(s)}const[zt,qt]=bt(Ht,!0),Wt=(t,e,r)=>r>32?vt(t,e,r):At(t,e,r),Yt=(t,e,r)=>r>32?kt(t,e,r):Et(t,e,r);class Zt extends Bt{constructor(t,e,r,n=!1,s=24){if(super(),this.blockLen=t,this.suffix=e,this.outputLen=r,this.enableXOF=n,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,ht(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=It(this.state)}keccak(){!function(t,e=24){const r=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let e=0;e<10;e++)r[e]=t[e]^t[e+10]^t[e+20]^t[e+30]^t[e+40];for(let e=0;e<10;e+=2){const n=(e+8)%10,s=(e+2)%10,i=r[s],o=r[s+1],a=Wt(i,o,1)^r[n],c=Yt(i,o,1)^r[n+1];for(let r=0;r<50;r+=10)t[e+r]^=a,t[e+r+1]^=c}let e=t[2],s=t[3];for(let r=0;r<24;r++){const n=Gt[r],i=Wt(e,s,n),o=Yt(e,s,n),a=Mt[r];e=t[a],s=t[a+1],t[a]=i,t[a+1]=o}for(let e=0;e<50;e+=10){for(let n=0;n<10;n++)r[n]=t[e+n];for(let n=0;n<10;n++)t[e+n]^=~r[(n+2)%10]&r[(n+4)%10]}t[0]^=zt[n],t[1]^=qt[n]}r.fill(0)}(this.state32,this.rounds),this.posOut=0,this.pos=0}update(t){pt(this);const{blockLen:e,state:r}=this,n=(t=St(t)).length;for(let s=0;s<n;){const i=Math.min(e-this.pos,n-s);for(let e=0;e<i;e++)r[this.pos++]^=t[s++];this.pos===e&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:e,pos:r,blockLen:n}=this;t[r]^=e,0!=(128&e)&&r===n-1&&this.keccak(),t[n-1]^=128,this.keccak()}writeInto(t){pt(this,!1),ft(t),this.finish();const e=this.state,{blockLen:r}=this;for(let n=0,s=t.length;n<s;){this.posOut>=r&&this.keccak();const i=Math.min(r-this.posOut,s-n);t.set(e.subarray(this.posOut,this.posOut+i),n),this.posOut+=i,n+=i}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return ht(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(gt(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:e,suffix:r,outputLen:n,rounds:s,enableXOF:i}=this;return t||(t=new Zt(e,r,n,i,s)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=s,t.suffix=r,t.outputLen=n,t.enableXOF=i,t.destroyed=this.destroyed,t}}const Xt=((t,e,r)=>Ft((()=>new Zt(e,t,r))))(1,136,32);let $t=!1;const te=function(t){return Xt(t)};let ee=te;function re(t){const e=w(t,"data");return k(ee(e))}re._=te,re.lock=function(){$t=!0},re.register=function(t){if($t)throw new TypeError("keccak256 is locked");ee=t},Object.freeze(re);const ne=BigInt(0),se=BigInt(36);function ie(t){const e=(t=t.toLowerCase()).substring(2).split(""),r=new Uint8Array(40);for(let t=0;t<40;t++)r[t]=e[t].charCodeAt(0);const n=w(re(r));for(let t=0;t<40;t+=2)n[t>>1]>>4>=8&&(e[t]=e[t].toUpperCase()),(15&n[t>>1])>=8&&(e[t+1]=e[t+1].toUpperCase());return"0x"+e.join("")}const oe={};for(let t=0;t<10;t++)oe[String(t)]=String(t);for(let t=0;t<26;t++)oe[String.fromCharCode(65+t)]=String(10+t);const ae=15;function ce(t){let e=(t=(t=t.toUpperCase()).substring(4)+t.substring(0,2)+"00").split("").map((t=>oe[t])).join("");for(;e.length>=ae;){let t=e.substring(0,ae);e=parseInt(t,10)%97+e.substring(t.length)}let r=String(98-parseInt(e,10)%97);for(;r.length<2;)r="0"+r;return r}const le=function(){const t={};for(let e=0;e<36;e++)t["0123456789abcdefghijklmnopqrstuvwxyz"[e]]=BigInt(e);return t}();function ue(t){if(f("string"==typeof t,"invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/)){t.startsWith("0x")||(t="0x"+t);const e=ie(t);return f(!t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===t,"bad address checksum","address",t),e}if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){f(t.substring(2,4)===ce(t),"bad icap checksum","address",t);let e=function(t){t=t.toLowerCase();let e=ne;for(let r=0;r<t.length;r++)e=e*se+le[t[r]];return e}(t.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return ie("0x"+e)}f(!1,"invalid address","address",t)}function he(t){let e=BigInt(ue(t)).toString(36).toUpperCase();for(;e.length<30;)e="0"+e;return"XE"+ce("XE00"+e)+e}const fe={};function de(t,e){let r=!1;return e<0&&(r=!0,e*=-1),new me(fe,`${r?"":"u"}int${e}`,t,{signed:r,width:e})}function pe(t,e){return new me(fe,`bytes${e||""}`,t,{size:e})}const ge=Symbol.for("_ethers_typed");class me{type;value;#u;_typedSymbol;constructor(t,e,r,n){null==n&&(n=null),m(fe,t,"Typed"),o(this,{_typedSymbol:ge,type:e,value:r}),this.#u=n,this.format()}format(){if("array"===this.type)throw new Error("");if("dynamicArray"===this.type)throw new Error("");return"tuple"===this.type?`tuple(${this.value.map((t=>t.format())).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return"string"===this.type}get tupleName(){if("tuple"!==this.type)throw TypeError("not a tuple");return this.#u}get arrayLength(){if("array"!==this.type)throw TypeError("not an array");return!0===this.#u?-1:!1===this.#u?this.value.length:null}static from(t,e){return new me(fe,t,e)}static uint8(t){return de(t,8)}static uint16(t){return de(t,16)}static uint24(t){return de(t,24)}static uint32(t){return de(t,32)}static uint40(t){return de(t,40)}static uint48(t){return de(t,48)}static uint56(t){return de(t,56)}static uint64(t){return de(t,64)}static uint72(t){return de(t,72)}static uint80(t){return de(t,80)}static uint88(t){return de(t,88)}static uint96(t){return de(t,96)}static uint104(t){return de(t,104)}static uint112(t){return de(t,112)}static uint120(t){return de(t,120)}static uint128(t){return de(t,128)}static uint136(t){return de(t,136)}static uint144(t){return de(t,144)}static uint152(t){return de(t,152)}static uint160(t){return de(t,160)}static uint168(t){return de(t,168)}static uint176(t){return de(t,176)}static uint184(t){return de(t,184)}static uint192(t){return de(t,192)}static uint200(t){return de(t,200)}static uint208(t){return de(t,208)}static uint216(t){return de(t,216)}static uint224(t){return de(t,224)}static uint232(t){return de(t,232)}static uint240(t){return de(t,240)}static uint248(t){return de(t,248)}static uint256(t){return de(t,256)}static uint(t){return de(t,256)}static int8(t){return de(t,-8)}static int16(t){return de(t,-16)}static int24(t){return de(t,-24)}static int32(t){return de(t,-32)}static int40(t){return de(t,-40)}static int48(t){return de(t,-48)}static int56(t){return de(t,-56)}static int64(t){return de(t,-64)}static int72(t){return de(t,-72)}static int80(t){return de(t,-80)}static int88(t){return de(t,-88)}static int96(t){return de(t,-96)}static int104(t){return de(t,-104)}static int112(t){return de(t,-112)}static int120(t){return de(t,-120)}static int128(t){return de(t,-128)}static int136(t){return de(t,-136)}static int144(t){return de(t,-144)}static int152(t){return de(t,-152)}static int160(t){return de(t,-160)}static int168(t){return de(t,-168)}static int176(t){return de(t,-176)}static int184(t){return de(t,-184)}static int192(t){return de(t,-192)}static int200(t){return de(t,-200)}static int208(t){return de(t,-208)}static int216(t){return de(t,-216)}static int224(t){return de(t,-224)}static int232(t){return de(t,-232)}static int240(t){return de(t,-240)}static int248(t){return de(t,-248)}static int256(t){return de(t,-256)}static int(t){return de(t,-256)}static bytes1(t){return pe(t,1)}static bytes2(t){return pe(t,2)}static bytes3(t){return pe(t,3)}static bytes4(t){return pe(t,4)}static bytes5(t){return pe(t,5)}static bytes6(t){return pe(t,6)}static bytes7(t){return pe(t,7)}static bytes8(t){return pe(t,8)}static bytes9(t){return pe(t,9)}static bytes10(t){return pe(t,10)}static bytes11(t){return pe(t,11)}static bytes12(t){return pe(t,12)}static bytes13(t){return pe(t,13)}static bytes14(t){return pe(t,14)}static bytes15(t){return pe(t,15)}static bytes16(t){return pe(t,16)}static bytes17(t){return pe(t,17)}static bytes18(t){return pe(t,18)}static bytes19(t){return pe(t,19)}static bytes20(t){return pe(t,20)}static bytes21(t){return pe(t,21)}static bytes22(t){return pe(t,22)}static bytes23(t){return pe(t,23)}static bytes24(t){return pe(t,24)}static bytes25(t){return pe(t,25)}static bytes26(t){return pe(t,26)}static bytes27(t){return pe(t,27)}static bytes28(t){return pe(t,28)}static bytes29(t){return pe(t,29)}static bytes30(t){return pe(t,30)}static bytes31(t){return pe(t,31)}static bytes32(t){return pe(t,32)}static address(t){return new me(fe,"address",t)}static bool(t){return new me(fe,"bool",!!t)}static bytes(t){return new me(fe,"bytes",t)}static string(t){return new me(fe,"string",t)}static array(t,e){throw new Error("not implemented yet")}static tuple(t,e){throw new Error("not implemented yet")}static overrides(t){return new me(fe,"overrides",Object.assign({},t))}static isTyped(t){return t&&"object"==typeof t&&"_typedSymbol"in t&&t._typedSymbol===ge}static dereference(t,e){if(me.isTyped(t)){if(t.type!==e)throw new Error(`invalid type: expecetd ${e}, got ${t.type}`);return t.value}return t}}class ye extends ct{constructor(t){super("address","address",t,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(t,e){let r=me.dereference(e,"string");try{r=ue(r)}catch(t){return this._throwError(t.message,e)}return t.writeValue(r)}decode(t){return ue(Z(t.readValue(),20))}}class we extends ct{coder;constructor(t){super(t.name,t.type,"_",t.dynamic),this.coder=t}defaultValue(){return this.coder.defaultValue()}encode(t,e){return this.coder.encode(t,e)}decode(t){return this.coder.decode(t)}}function be(t,e,r){let n=[];if(Array.isArray(r))n=r;else if(r&&"object"==typeof r){let t={};n=e.map((e=>{const n=e.localName;return h(n,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:e},value:r}),h(!t[n],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:e},value:r}),t[n]=!0,r[n]}))}else f(!1,"invalid tuple value","tuple",r);f(e.length===n.length,"types/value length mismatch","tuple",r);let s=new lt,i=new lt,o=[];e.forEach(((t,e)=>{let r=n[e];if(t.dynamic){let e=i.length;t.encode(i,r);let n=s.writeUpdatableValue();o.push((t=>{n(t+e)}))}else t.encode(s,r)})),o.forEach((t=>{t(s.length)}));let a=t.appendWriter(s);return a+=t.appendWriter(i),a}function Ae(t,e){let r=[],n=[],s=t.subReader(0);return e.forEach((e=>{let i=null;if(e.dynamic){let r=t.readIndex(),n=s.subReader(r);try{i=e.decode(n)}catch(t){if(c(t,"BUFFER_OVERRUN"))throw t;i=t,i.baseType=e.name,i.name=e.localName,i.type=e.type}}else try{i=e.decode(t)}catch(t){if(c(t,"BUFFER_OVERRUN"))throw t;i=t,i.baseType=e.name,i.name=e.localName,i.type=e.type}if(null==i)throw new Error("investigate");r.push(i),n.push(e.localName||null)})),it.fromItems(r,n)}class Ee extends ct{coder;length;constructor(t,e,r){super("array",t.type+"["+(e>=0?e:"")+"]",r,-1===e||t.dynamic),o(this,{coder:t,length:e})}defaultValue(){const t=this.coder.defaultValue(),e=[];for(let r=0;r<this.length;r++)e.push(t);return e}encode(t,e){const r=me.dereference(e,"array");Array.isArray(r)||this._throwError("expected array value",r);let n=this.length;-1===n&&(n=r.length,t.writeValue(r.length)),d(r.length,n,"coder array"+(this.localName?" "+this.localName:""));let s=[];for(let t=0;t<r.length;t++)s.push(this.coder);return be(t,s,r)}decode(t){let e=this.length;-1===e&&(e=t.readIndex(),h(e*tt<=t.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:t.bytes,offset:e*tt,length:t.dataLength}));let r=[];for(let t=0;t<e;t++)r.push(new we(this.coder));return Ae(t,r)}}class ve extends ct{constructor(t){super("bool","bool",t,!1)}defaultValue(){return!1}encode(t,e){const r=me.dereference(e,"bool");return t.writeValue(r?1:0)}decode(t){return!!t.readValue()}}class ke extends ct{constructor(t,e){super(t,t,e,!0)}defaultValue(){return"0x"}encode(t,e){e=b(e);let r=t.writeValue(e.length);return r+=t.writeBytes(e),r}decode(t){return t.readBytes(t.readIndex(),!0)}}class Ne extends ke{constructor(t){super("bytes",t)}decode(t){return k(super.decode(t))}}class Re extends ct{size;constructor(t,e){let r="bytes"+String(t);super(r,r,e,!1),o(this,{size:t},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+2*this.size)}encode(t,e){let r=b(me.dereference(e,this.type));return r.length!==this.size&&this._throwError("incorrect data length",e),t.writeBytes(r)}decode(t){return k(t.readBytes(this.size))}}const Pe=new Uint8Array([]);class Ie extends ct{constructor(t){super("null","",t,!1)}defaultValue(){return null}encode(t,e){return null!=e&&this._throwError("not null",e),t.writeBytes(Pe)}decode(t){return t.readBytes(0),null}}const Te=BigInt(0),Oe=BigInt(1),Ce=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class xe extends ct{size;signed;constructor(t,e,r){const n=(e?"int":"uint")+8*t;super(n,n,r,!1),o(this,{size:t,signed:e},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(t,e){let r=K(me.dereference(e,this.type)),n=V(Ce,256);if(this.signed){let t=V(n,8*this.size-1);(r>t||r<-(t+Oe))&&this._throwError("value out-of-bounds",e),r=_(r,256)}else(r<Te||r>V(n,8*this.size))&&this._throwError("value out-of-bounds",e);return t.writeValue(r)}decode(t){let e=V(t.readValue(),8*this.size);return this.signed&&(e=Q(e,8*this.size)),e}}class Se extends ke{constructor(t){super("string",t)}defaultValue(){return""}encode(t,e){return super.encode(t,U(me.dereference(e,"string")))}decode(t){return D(super.decode(t))}}class Be extends ct{coders;constructor(t,e){let r=!1;const n=[];t.forEach((t=>{t.dynamic&&(r=!0),n.push(t.type)})),super("tuple","tuple("+n.join(",")+")",e,r),o(this,{coders:Object.freeze(t.slice())})}defaultValue(){const t=[];this.coders.forEach((e=>{t.push(e.defaultValue())}));const e=this.coders.reduce(((t,e)=>{const r=e.localName;return r&&(t[r]||(t[r]=0),t[r]++),t}),{});return this.coders.forEach(((r,n)=>{let s=r.localName;s&&1===e[s]&&("length"===s&&(s="_length"),null==t[s]&&(t[s]=t[n]))})),Object.freeze(t)}encode(t,e){const r=me.dereference(e,"tuple");return be(t,this.coders,r)}decode(t){return Ae(t,this.coders)}}function Ue(t){return re(U(t))}function De(t){const e=new Set;return t.forEach((t=>e.add(t))),Object.freeze(e)}const Fe=De("external public payable".split(" ")),Le="constant external internal payable private public pure view",Me=De(Le.split(" ")),Ge="constructor error event fallback function receive struct",He=De(Ge.split(" ")),je="calldata memory storage payable indexed",Qe=De(je.split(" ")),_e=De([Ge,je,"tuple returns",Le].join(" ").split(" ")),Ve={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},Ke=new RegExp("^(\\\\s*)"),Je=new RegExp("^([0-9]+)"),ze=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),qe=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),We=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");class Ye{#s;#h;get offset(){return this.#s}get length(){return this.#h.length-this.#s}constructor(t){this.#s=0,this.#h=t.slice()}clone(){return new Ye(this.#h)}reset(){this.#s=0}#f(t=0,e=0){return new Ye(this.#h.slice(t,e).map((e=>Object.freeze(Object.assign({},e,{match:e.match-t,linkBack:e.linkBack-t,linkNext:e.linkNext-t})))))}popKeyword(t){const e=this.peek();if("KEYWORD"!==e.type||!t.has(e.text))throw new Error(`expected keyword ${e.text}`);return this.pop().text}popType(t){if(this.peek().type!==t)throw new Error(`expected ${t}; got ${JSON.stringify(this.peek())}`);return this.pop().text}popParen(){const t=this.peek();if("OPEN_PAREN"!==t.type)throw new Error("bad start");const e=this.#f(this.#s+1,t.match+1);return this.#s=t.match+1,e}popParams(){const t=this.peek();if("OPEN_PAREN"!==t.type)throw new Error("bad start");const e=[];for(;this.#s<t.match-1;){const t=this.peek().linkNext;e.push(this.#f(this.#s+1,t)),this.#s=t}return this.#s=t.match+1,e}peek(){if(this.#s>=this.#h.length)throw new Error("out-of-bounds");return this.#h[this.#s]}peekKeyword(t){const e=this.peekType("KEYWORD");return null!=e&&t.has(e)?e:null}peekType(t){if(0===this.length)return null;const e=this.peek();return e.type===t?e.text:null}pop(){const t=this.peek();return this.#s++,t}toString(){const t=[];for(let e=this.#s;e<this.#h.length;e++){const r=this.#h[e];t.push(`${r.type}:${r.text}`)}return`<TokenString ${t.join(" ")}>`}}function Ze(t){const e=[],r=e=>{const r=i<t.length?JSON.stringify(t[i]):"$EOI";throw new Error(`invalid token ${r} at ${i}: ${e}`)};let n=[],s=[],i=0;for(;i<t.length;){let o=t.substring(i),a=o.match(Ke);a&&(i+=a[1].length,o=t.substring(i));const c={depth:n.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:i,value:-1};e.push(c);let l=Ve[o[0]]||"";if(l){if(c.type=l,c.text=o[0],i++,"OPEN_PAREN"===l)n.push(e.length-1),s.push(e.length-1);else if("CLOSE_PAREN"==l)0===n.length&&r("no matching open bracket"),c.match=n.pop(),e[c.match].match=e.length-1,c.depth--,c.linkBack=s.pop(),e[c.linkBack].linkNext=e.length-1;else if("COMMA"===l)c.linkBack=s.pop(),e[c.linkBack].linkNext=e.length-1,s.push(e.length-1);else if("OPEN_BRACKET"===l)c.type="BRACKET";else if("CLOSE_BRACKET"===l){let t=e.pop().text;if(e.length>0&&"NUMBER"===e[e.length-1].type){const r=e.pop().text;t=r+t,e[e.length-1].value=W(r)}if(0===e.length||"BRACKET"!==e[e.length-1].type)throw new Error("missing opening bracket");e[e.length-1].text+=t}}else if(a=o.match(ze),a){if(c.text=a[1],i+=c.text.length,_e.has(c.text)){c.type="KEYWORD";continue}if(c.text.match(We)){c.type="TYPE";continue}c.type="ID"}else{if(a=o.match(Je),!a)throw new Error(`unexpected token ${JSON.stringify(o[0])} at position ${i}`);c.text=a[1],c.type="NUMBER",i+=c.text.length}}return new Ye(e.map((t=>Object.freeze(t))))}function Xe(t,e){let r=[];for(const n in e.keys())t.has(n)&&r.push(n);if(r.length>1)throw new Error(`conflicting types: ${r.join(", ")}`)}function $e(t,e){if(e.peekKeyword(He)){const r=e.pop().text;if(r!==t)throw new Error(`expected ${t}, got ${r}`)}return e.popType("ID")}function tr(t,e){const r=new Set;for(;;){const n=t.peekType("KEYWORD");if(null==n||e&&!e.has(n))break;if(t.pop(),r.has(n))throw new Error(`duplicate keywords: ${JSON.stringify(n)}`);r.add(n)}return Object.freeze(r)}function er(t){let e=tr(t,Me);return Xe(e,De("constant payable nonpayable".split(" "))),Xe(e,De("pure view payable nonpayable".split(" "))),e.has("view")?"view":e.has("pure")?"pure":e.has("payable")?"payable":e.has("nonpayable")?"nonpayable":e.has("constant")?"view":"nonpayable"}function rr(t,e){return t.popParams().map((t=>mr.from(t,e)))}function nr(t){if(t.peekType("AT")){if(t.pop(),t.peekType("NUMBER"))return K(t.pop().text);throw new Error("invalid gas")}return null}function sr(t){if(t.length)throw new Error(`unexpected tokens: ${t.toString()}`)}const ir=new RegExp(/^(.*)\\[([0-9]*)\\]$/);function or(t){const e=t.match(We);if(f(e,"invalid type","type",t),"uint"===t)return"uint256";if("int"===t)return"int256";if(e[2]){const r=parseInt(e[2]);f(0!==r&&r<=32,"invalid bytes length","type",t)}else if(e[3]){const r=parseInt(e[3]);f(0!==r&&r<=256&&r%8==0,"invalid numeric width","type",t)}return t}const ar={},cr=Symbol.for("_ethers_internal"),lr="_ParamTypeInternal",ur="_ErrorInternal",hr="_EventInternal",fr="_ConstructorInternal",dr="_FallbackInternal",pr="_FunctionInternal",gr="_StructInternal";class mr{name;type;baseType;indexed;components;arrayLength;arrayChildren;constructor(t,e,r,n,s,i,a,c){if(m(t,ar,"ParamType"),Object.defineProperty(this,cr,{value:lr}),i&&(i=Object.freeze(i.slice())),"array"===n){if(null==a||null==c)throw new Error("")}else if(null!=a||null!=c)throw new Error("");if("tuple"===n){if(null==i)throw new Error("")}else if(null!=i)throw new Error("");o(this,{name:e,type:r,baseType:n,indexed:s,components:i,arrayLength:a,arrayChildren:c})}format(t){if(null==t&&(t="sighash"),"json"===t){const e=this.name||"";if(this.isArray()){const t=JSON.parse(this.arrayChildren.format("json"));return t.name=e,t.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(t)}const r={type:"tuple"===this.baseType?"tuple":this.type,name:e};return"boolean"==typeof this.indexed&&(r.indexed=this.indexed),this.isTuple()&&(r.components=this.components.map((e=>JSON.parse(e.format(t))))),JSON.stringify(r)}let e="";return this.isArray()?(e+=this.arrayChildren.format(t),e+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?e+="("+this.components.map((e=>e.format(t))).join("full"===t?", ":",")+")":e+=this.type,"sighash"!==t&&(!0===this.indexed&&(e+=" indexed"),"full"===t&&this.name&&(e+=" "+this.name)),e}isArray(){return"array"===this.baseType}isTuple(){return"tuple"===this.baseType}isIndexable(){return null!=this.indexed}walk(t,e){if(this.isArray()){if(!Array.isArray(t))throw new Error("invalid array value");if(-1!==this.arrayLength&&t.length!==this.arrayLength)throw new Error("array is wrong length");const r=this;return t.map((t=>r.arrayChildren.walk(t,e)))}if(this.isTuple()){if(!Array.isArray(t))throw new Error("invalid tuple value");if(t.length!==this.components.length)throw new Error("array is wrong length");const r=this;return t.map(((t,n)=>r.components[n].walk(t,e)))}return e(this.type,t)}#d(t,e,r,n){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(-1!==this.arrayLength&&e.length!==this.arrayLength)throw new Error("array is wrong length");const s=this.arrayChildren,i=e.slice();return i.forEach(((e,n)=>{s.#d(t,e,r,(t=>{i[n]=t}))})),void n(i)}if(this.isTuple()){const s=this.components;let i;if(Array.isArray(e))i=e.slice();else{if(null==e||"object"!=typeof e)throw new Error("invalid tuple value");i=s.map((t=>{if(!t.name)throw new Error("cannot use object value with unnamed components");if(!(t.name in e))throw new Error(`missing value for component ${t.name}`);return e[t.name]}))}if(i.length!==this.components.length)throw new Error("array is wrong length");return i.forEach(((e,n)=>{s[n].#d(t,e,r,(t=>{i[n]=t}))})),void n(i)}const s=r(this.type,e);s.then?t.push(async function(){n(await s)}()):n(s)}async walkAsync(t,e){const r=[],n=[t];return this.#d(r,t,e,(t=>{n[0]=t})),r.length&&await Promise.all(r),n[0]}static from(t,e){if(mr.isParamType(t))return t;if("string"==typeof t)try{return mr.from(Ze(t),e)}catch(e){f(!1,"invalid param type","obj",t)}else if(t instanceof Ye){let r="",n="",s=null;tr(t,De(["tuple"])).has("tuple")||t.peekType("OPEN_PAREN")?(n="tuple",s=t.popParams().map((t=>mr.from(t))),r=`tuple(${s.map((t=>t.format())).join(",")})`):(r=or(t.popType("TYPE")),n=r);let i=null,o=null;for(;t.length&&t.peekType("BRACKET");){const e=t.pop();i=new mr(ar,"",r,n,null,s,o,i),o=e.value,r+=e.text,n="array",s=null}let a=null;if(tr(t,Qe).has("indexed")){if(!e)throw new Error("");a=!0}const c=t.peekType("ID")?t.pop().text:"";if(t.length)throw new Error("leftover tokens");return new mr(ar,c,r,n,a,s,o,i)}const r=t.name;f(!r||"string"==typeof r&&r.match(qe),"invalid name","obj.name",r);let n=t.indexed;null!=n&&(f(e,"parameter cannot be indexed","obj.indexed",t.indexed),n=!!n);let s=t.type,i=s.match(ir);if(i){const e=parseInt(i[2]||"-1"),o=mr.from({type:i[1],components:t.components});return new mr(ar,r||"",s,"array",n,null,e,o)}if("tuple"===s||s.startsWith("tuple(")||s.startsWith("(")){const e=null!=t.components?t.components.map((t=>mr.from(t))):null;return new mr(ar,r||"",s,"tuple",n,e,null,null)}return s=or(t.type),new mr(ar,r||"",s,s,n,null,null,null)}static isParamType(t){return t&&t[cr]===lr}}class yr{type;inputs;constructor(t,e,r){m(t,ar,"Fragment"),o(this,{type:e,inputs:r=Object.freeze(r.slice())})}static from(t){if("string"==typeof t){try{yr.from(JSON.parse(t))}catch(t){}return yr.from(Ze(t))}if(t instanceof Ye)switch(t.peekKeyword(He)){case"constructor":return vr.from(t);case"error":return Ar.from(t);case"event":return Er.from(t);case"fallback":case"receive":return kr.from(t);case"function":return Nr.from(t);case"struct":return Rr.from(t)}else if("object"==typeof t){switch(t.type){case"constructor":return vr.from(t);case"error":return Ar.from(t);case"event":return Er.from(t);case"fallback":case"receive":return kr.from(t);case"function":return Nr.from(t);case"struct":return Rr.from(t)}h(!1,`unsupported type: ${t.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}f(!1,"unsupported frgament object","obj",t)}static isConstructor(t){return vr.isFragment(t)}static isError(t){return Ar.isFragment(t)}static isEvent(t){return Er.isFragment(t)}static isFunction(t){return Nr.isFragment(t)}static isStruct(t){return Rr.isFragment(t)}}class wr extends yr{name;constructor(t,e,r,n){super(t,e,n),f("string"==typeof r&&r.match(qe),"invalid identifier","name",r),n=Object.freeze(n.slice()),o(this,{name:r})}}function br(t,e){return"("+e.map((e=>e.format(t))).join("full"===t?", ":",")+")"}class Ar extends wr{constructor(t,e,r){super(t,"error",e,r),Object.defineProperty(this,cr,{value:ur})}get selector(){return Ue(this.format("sighash")).substring(0,10)}format(t){if(null==t&&(t="sighash"),"json"===t)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map((e=>JSON.parse(e.format(t))))});const e=[];return"sighash"!==t&&e.push("error"),e.push(this.name+br(t,this.inputs)),e.join(" ")}static from(t){if(Ar.isFragment(t))return t;if("string"==typeof t)return Ar.from(Ze(t));if(t instanceof Ye){const e=$e("error",t),r=rr(t);return sr(t),new Ar(ar,e,r)}return new Ar(ar,t.name,t.inputs?t.inputs.map(mr.from):[])}static isFragment(t){return t&&t[cr]===ur}}class Er extends wr{anonymous;constructor(t,e,r,n){super(t,"event",e,r),Object.defineProperty(this,cr,{value:hr}),o(this,{anonymous:n})}get topicHash(){return Ue(this.format("sighash"))}format(t){if(null==t&&(t="sighash"),"json"===t)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map((e=>JSON.parse(e.format(t))))});const e=[];return"sighash"!==t&&e.push("event"),e.push(this.name+br(t,this.inputs)),"sighash"!==t&&this.anonymous&&e.push("anonymous"),e.join(" ")}static getTopicHash(t,e){return e=(e||[]).map((t=>mr.from(t))),new Er(ar,t,e,!1).topicHash}static from(t){if(Er.isFragment(t))return t;if("string"==typeof t)try{return Er.from(Ze(t))}catch(e){f(!1,"invalid event fragment","obj",t)}else if(t instanceof Ye){const e=$e("event",t),r=rr(t,!0),n=!!tr(t,De(["anonymous"])).has("anonymous");return sr(t),new Er(ar,e,r,n)}return new Er(ar,t.name,t.inputs?t.inputs.map((t=>mr.from(t,!0))):[],!!t.anonymous)}static isFragment(t){return t&&t[cr]===hr}}class vr extends yr{payable;gas;constructor(t,e,r,n,s){super(t,e,r),Object.defineProperty(this,cr,{value:fr}),o(this,{payable:n,gas:s})}format(t){if(h(null!=t&&"sighash"!==t,"cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),"json"===t)return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:null!=this.gas?this.gas:void 0,inputs:this.inputs.map((e=>JSON.parse(e.format(t))))});const e=[`constructor${br(t,this.inputs)}`];return this.payable&&e.push("payable"),null!=this.gas&&e.push(`@${this.gas.toString()}`),e.join(" ")}static from(t){if(vr.isFragment(t))return t;if("string"==typeof t)try{return vr.from(Ze(t))}catch(e){f(!1,"invalid constuctor fragment","obj",t)}else if(t instanceof Ye){tr(t,De(["constructor"]));const e=rr(t),r=!!tr(t,Fe).has("payable"),n=nr(t);return sr(t),new vr(ar,"constructor",e,r,n)}return new vr(ar,"constructor",t.inputs?t.inputs.map(mr.from):[],!!t.payable,null!=t.gas?t.gas:null)}static isFragment(t){return t&&t[cr]===fr}}class kr extends yr{payable;constructor(t,e,r){super(t,"fallback",e),Object.defineProperty(this,cr,{value:dr}),o(this,{payable:r})}format(t){const e=0===this.inputs.length?"receive":"fallback";if("json"===t){const t=this.payable?"payable":"nonpayable";return JSON.stringify({type:e,stateMutability:t})}return`${e}()${this.payable?" payable":""}`}static from(t){if(kr.isFragment(t))return t;if("string"==typeof t)try{return kr.from(Ze(t))}catch(e){f(!1,"invalid fallback fragment","obj",t)}else if(t instanceof Ye){const e=t.toString();if(f(t.peekKeyword(De(["fallback","receive"])),"type must be fallback or receive","obj",e),"receive"===t.popKeyword(De(["fallback","receive"]))){const e=rr(t);return f(0===e.length,"receive cannot have arguments","obj.inputs",e),tr(t,De(["payable"])),sr(t),new kr(ar,[],!0)}let r=rr(t);r.length?f(1===r.length&&"bytes"===r[0].type,"invalid fallback inputs","obj.inputs",r.map((t=>t.format("minimal"))).join(", ")):r=[mr.from("bytes")];const n=er(t);if(f("nonpayable"===n||"payable"===n,"fallback cannot be constants","obj.stateMutability",n),tr(t,De(["returns"])).has("returns")){const e=rr(t);f(1===e.length&&"bytes"===e[0].type,"invalid fallback outputs","obj.outputs",e.map((t=>t.format("minimal"))).join(", "))}return sr(t),new kr(ar,r,"payable"===n)}if("receive"===t.type)return new kr(ar,[],!0);if("fallback"===t.type){const e=[mr.from("bytes")],r="payable"===t.stateMutability;return new kr(ar,e,r)}f(!1,"invalid fallback description","obj",t)}static isFragment(t){return t&&t[cr]===dr}}class Nr extends wr{constant;outputs;stateMutability;payable;gas;constructor(t,e,r,n,s,i){super(t,"function",e,n),Object.defineProperty(this,cr,{value:pr}),o(this,{constant:"view"===r||"pure"===r,gas:i,outputs:s=Object.freeze(s.slice()),payable:"payable"===r,stateMutability:r})}get selector(){return Ue(this.format("sighash")).substring(0,10)}format(t){if(null==t&&(t="sighash"),"json"===t)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:"nonpayable"!==this.stateMutability?this.stateMutability:void 0,payable:this.payable,gas:null!=this.gas?this.gas:void 0,inputs:this.inputs.map((e=>JSON.parse(e.format(t)))),outputs:this.outputs.map((e=>JSON.parse(e.format(t))))});const e=[];return"sighash"!==t&&e.push("function"),e.push(this.name+br(t,this.inputs)),"sighash"!==t&&("nonpayable"!==this.stateMutability&&e.push(this.stateMutability),this.outputs&&this.outputs.length&&(e.push("returns"),e.push(br(t,this.outputs))),null!=this.gas&&e.push(`@${this.gas.toString()}`)),e.join(" ")}static getSelector(t,e){return e=(e||[]).map((t=>mr.from(t))),new Nr(ar,t,"view",e,[],null).selector}static from(t){if(Nr.isFragment(t))return t;if("string"==typeof t)try{return Nr.from(Ze(t))}catch(e){f(!1,"invalid function fragment","obj",t)}else if(t instanceof Ye){const e=$e("function",t),r=rr(t),n=er(t);let s=[];tr(t,De(["returns"])).has("returns")&&(s=rr(t));const i=nr(t);return sr(t),new Nr(ar,e,n,r,s,i)}let e=t.stateMutability;return null==e&&(e="payable","boolean"==typeof t.constant?(e="view",t.constant||(e="payable","boolean"!=typeof t.payable||t.payable||(e="nonpayable"))):"boolean"!=typeof t.payable||t.payable||(e="nonpayable")),new Nr(ar,t.name,e,t.inputs?t.inputs.map(mr.from):[],t.outputs?t.outputs.map(mr.from):[],null!=t.gas?t.gas:null)}static isFragment(t){return t&&t[cr]===pr}}class Rr extends wr{constructor(t,e,r){super(t,"struct",e,r),Object.defineProperty(this,cr,{value:gr})}format(){throw new Error("@TODO")}static from(t){if("string"==typeof t)try{return Rr.from(Ze(t))}catch(e){f(!1,"invalid struct fragment","obj",t)}else if(t instanceof Ye){const e=$e("struct",t),r=rr(t);return sr(t),new Rr(ar,e,r)}return new Rr(ar,t.name,t.inputs?t.inputs.map(mr.from):[])}static isFragment(t){return t&&t[cr]===gr}}const Pr=new Map;Pr.set(0,"GENERIC_PANIC"),Pr.set(1,"ASSERT_FALSE"),Pr.set(17,"OVERFLOW"),Pr.set(18,"DIVIDE_BY_ZERO"),Pr.set(33,"ENUM_RANGE_ERROR"),Pr.set(34,"BAD_STORAGE_DATA"),Pr.set(49,"STACK_UNDERFLOW"),Pr.set(50,"ARRAY_RANGE_ERROR"),Pr.set(65,"OUT_OF_MEMORY"),Pr.set(81,"UNINITIALIZED_FUNCTION_CALL");const Ir=new RegExp(/^bytes([0-9]*)$/),Tr=new RegExp(/^(u?int)([0-9]*)$/);let Or=null,Cr=1024;class xr{#p(t){if(t.isArray())return new Ee(this.#p(t.arrayChildren),t.arrayLength,t.name);if(t.isTuple())return new Be(t.components.map((t=>this.#p(t))),t.name);switch(t.baseType){case"address":return new ye(t.name);case"bool":return new ve(t.name);case"string":return new Se(t.name);case"bytes":return new Ne(t.name);case"":return new Ie(t.name)}let e=t.type.match(Tr);if(e){let r=parseInt(e[2]||"256");return f(0!==r&&r<=256&&r%8==0,"invalid "+e[1]+" bit length","param",t),new xe(r/8,"int"===e[1],t.name)}if(e=t.type.match(Ir),e){let r=parseInt(e[1]);return f(0!==r&&r<=32,"invalid bytes length","param",t),new Re(r,t.name)}f(!1,"invalid type","type",t.type)}getDefaultValue(t){const e=t.map((t=>this.#p(mr.from(t))));return new Be(e,"_").defaultValue()}encode(t,e){d(e.length,t.length,"types/values length mismatch");const r=t.map((t=>this.#p(mr.from(t)))),n=new Be(r,"_"),s=new lt;return n.encode(s,e),s.data}decode(t,e,r){const n=t.map((t=>this.#p(mr.from(t))));return new Be(n,"_").decode(new ut(e,r,Cr))}static _setDefaultMaxInflation(t){f("number"==typeof t&&Number.isInteger(t),"invalid defaultMaxInflation factor","value",t),Cr=t}static defaultAbiCoder(){return null==Or&&(Or=new xr),Or}static getBuiltinCallException(t,e,r){return function(t,e,r,n){let s="missing revert data",i=null,o=null;if(r){s="execution reverted";const t=w(r);if(r=k(r),0===t.length)s+=" (no data present; likely require(false) occurred",i="require(false)";else if(t.length%32!=4)s+=" (could not decode reason; invalid data length)";else if("0x08c379a0"===k(t.slice(0,4)))try{i=n.decode(["string"],t.slice(4))[0],o={signature:"Error(string)",name:"Error",args:[i]},s+=`: ${JSON.stringify(i)}`}catch(t){s+=" (could not decode reason; invalid string data)"}else if("0x4e487b71"===k(t.slice(0,4)))try{const e=Number(n.decode(["uint256"],t.slice(4))[0]);o={signature:"Panic(uint256)",name:"Panic",args:[e]},i=`Panic due to ${Pr.get(e)||"UNKNOWN"}(${e})`,s+=`: ${i}`}catch(t){s+=" (could not decode panic code)"}else s+=" (unknown custom error)"}const a={to:e.to?ue(e.to):null,data:e.data||"0x"};return e.from&&(a.from=ue(e.from)),u(s,"CALL_EXCEPTION",{action:t,data:r,reason:i,transaction:a,invocation:null,revert:o})}(t,e,r,xr.defaultAbiCoder())}}class Sr{fragment;name;signature;topic;args;constructor(t,e,r){const n=t.name,s=t.format();o(this,{fragment:t,name:n,signature:s,topic:e,args:r})}}class Br{fragment;name;args;signature;selector;value;constructor(t,e,r,n){const s=t.name,i=t.format();o(this,{fragment:t,name:s,args:r,signature:i,selector:e,value:n})}}class Ur{fragment;name;args;signature;selector;constructor(t,e,r){const n=t.name,s=t.format();o(this,{fragment:t,name:n,args:r,signature:s,selector:e})}}class Dr{hash;_isIndexed;static isIndexed(t){return!(!t||!t._isIndexed)}constructor(t){o(this,{hash:t,_isIndexed:!0})}}const Fr={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},Lr={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:t=>`reverted with reason string ${JSON.stringify(t)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:t=>{let e="unknown panic code";return t>=0&&t<=255&&Fr[t.toString()]&&(e=Fr[t.toString()]),`reverted with panic code 0x${t.toString(16)} (${e})`}}};class Mr{fragments;deploy;fallback;receive;#g;#m;#y;#w;constructor(t){let e=[];e="string"==typeof t?JSON.parse(t):t,this.#y=new Map,this.#g=new Map,this.#m=new Map;const r=[];for(const t of e)try{r.push(yr.from(t))}catch(t){console.log("EE",t)}o(this,{fragments:Object.freeze(r)});let n=null,s=!1;this.#w=this.getAbiCoder(),this.fragments.forEach(((t,e)=>{let r;switch(t.type){case"constructor":return this.deploy?void console.log("duplicate definition - constructor"):void o(this,{deploy:t});case"fallback":return void(0===t.inputs.length?s=!0:(f(!n||t.payable!==n.payable,"conflicting fallback fragments",`fragments[${e}]`,t),n=t,s=n.payable));case"function":r=this.#y;break;case"event":r=this.#m;break;case"error":r=this.#g;break;default:return}const i=t.format();r.has(i)||r.set(i,t)})),this.deploy||o(this,{deploy:vr.from("constructor()")}),o(this,{fallback:n,receive:s})}format(t){const e=t?"minimal":"full",r=this.fragments.map((t=>t.format(e)));return r}formatJson(){const t=this.fragments.map((t=>t.format("json")));return JSON.stringify(t.map((t=>JSON.parse(t))))}getAbiCoder(){return xr.defaultAbiCoder()}#b(t,e,r){if(A(t)){const e=t.toLowerCase();for(const t of this.#y.values())if(e===t.selector)return t;return null}if(-1===t.indexOf("(")){const n=[];for(const[e,r]of this.#y)e.split("(")[0]===t&&n.push(r);if(e){const t=e.length>0?e[e.length-1]:null;let r=e.length,s=!0;me.isTyped(t)&&"overrides"===t.type&&(s=!1,r--);for(let t=n.length-1;t>=0;t--){const e=n[t].inputs.length;e===r||s&&e===r-1||n.splice(t,1)}for(let t=n.length-1;t>=0;t--){const r=n[t].inputs;for(let s=0;s<e.length;s++)if(me.isTyped(e[s])){if(s>=r.length){if("overrides"===e[s].type)continue;n.splice(t,1);break}if(e[s].type!==r[s].baseType){n.splice(t,1);break}}}}if(1===n.length&&e&&e.length!==n[0].inputs.length){const t=e[e.length-1];(null==t||Array.isArray(t)||"object"!=typeof t)&&n.splice(0,1)}return 0===n.length?null:(n.length>1&&r&&f(!1,`ambiguous function description (i.e. matches ${n.map((t=>JSON.stringify(t.format()))).join(", ")})`,"key",t),n[0])}return this.#y.get(Nr.from(t).format())||null}getFunctionName(t){const e=this.#b(t,null,!1);return f(e,"no matching function","key",t),e.name}hasFunction(t){return!!this.#b(t,null,!1)}getFunction(t,e){return this.#b(t,e||null,!0)}forEachFunction(t){const e=Array.from(this.#y.keys());e.sort(((t,e)=>t.localeCompare(e)));for(let r=0;r<e.length;r++){const n=e[r];t(this.#y.get(n),r)}}#A(t,e,r){if(A(t)){const e=t.toLowerCase();for(const t of this.#m.values())if(e===t.topicHash)return t;return null}if(-1===t.indexOf("(")){const n=[];for(const[e,r]of this.#m)e.split("(")[0]===t&&n.push(r);if(e){for(let t=n.length-1;t>=0;t--)n[t].inputs.length<e.length&&n.splice(t,1);for(let t=n.length-1;t>=0;t--){const r=n[t].inputs;for(let s=0;s<e.length;s++)if(me.isTyped(e[s])&&e[s].type!==r[s].baseType){n.splice(t,1);break}}}return 0===n.length?null:(n.length>1&&r&&f(!1,`ambiguous event description (i.e. matches ${n.map((t=>JSON.stringify(t.format()))).join(", ")})`,"key",t),n[0])}return this.#m.get(Er.from(t).format())||null}getEventName(t){const e=this.#A(t,null,!1);return f(e,"no matching event","key",t),e.name}hasEvent(t){return!!this.#A(t,null,!1)}getEvent(t,e){return this.#A(t,e||null,!0)}forEachEvent(t){const e=Array.from(this.#m.keys());e.sort(((t,e)=>t.localeCompare(e)));for(let r=0;r<e.length;r++){const n=e[r];t(this.#m.get(n),r)}}getError(t,e){if(A(t)){const e=t.toLowerCase();if(Lr[e])return Ar.from(Lr[e].signature);for(const t of this.#g.values())if(e===t.selector)return t;return null}if(-1===t.indexOf("(")){const e=[];for(const[r,n]of this.#g)r.split("(")[0]===t&&e.push(n);return 0===e.length?"Error"===t?Ar.from("error Error(string)"):"Panic"===t?Ar.from("error Panic(uint256)"):null:(e.length>1&&f(!1,`ambiguous error description (i.e. ${e.map((t=>JSON.stringify(t.format()))).join(", ")})`,"name",t),e[0])}if("Error(string)"===(t=Ar.from(t).format()))return Ar.from("error Error(string)");if("Panic(uint256)"===t)return Ar.from("error Panic(uint256)");return this.#g.get(t)||null}forEachError(t){const e=Array.from(this.#g.keys());e.sort(((t,e)=>t.localeCompare(e)));for(let r=0;r<e.length;r++){const n=e[r];t(this.#g.get(n),r)}}_decodeParams(t,e){return this.#w.decode(t,e)}_encodeParams(t,e){return this.#w.encode(t,e)}encodeDeploy(t){return this._encodeParams(this.deploy.inputs,t||[])}decodeErrorResult(t,e){if("string"==typeof t){const e=this.getError(t);f(e,"unknown error","fragment",t),t=e}return f(P(e,0,4)===t.selector,`data signature does not match error ${t.name}.`,"data",e),this._decodeParams(t.inputs,P(e,4))}encodeErrorResult(t,e){if("string"==typeof t){const e=this.getError(t);f(e,"unknown error","fragment",t),t=e}return N([t.selector,this._encodeParams(t.inputs,e||[])])}decodeFunctionData(t,e){if("string"==typeof t){const e=this.getFunction(t);f(e,"unknown function","fragment",t),t=e}return f(P(e,0,4)===t.selector,`data signature does not match function ${t.name}.`,"data",e),this._decodeParams(t.inputs,P(e,4))}encodeFunctionData(t,e){if("string"==typeof t){const e=this.getFunction(t);f(e,"unknown function","fragment",t),t=e}return N([t.selector,this._encodeParams(t.inputs,e||[])])}decodeFunctionResult(t,e){if("string"==typeof t){const e=this.getFunction(t);f(e,"unknown function","fragment",t),t=e}let r="invalid length for result data";const n=b(e);if(n.length%32==0)try{return this.#w.decode(t.outputs,n)}catch(t){r="could not decode result data"}h(!1,r,"BAD_DATA",{value:k(n),info:{method:t.name,signature:t.format()}})}makeError(t,e){const r=w(t,"data"),n=xr.getBuiltinCallException("call",e,r);if(n.message.startsWith("execution reverted (unknown custom error)")){const t=k(r.slice(0,4)),e=this.getError(t);if(e)try{const t=this.#w.decode(e.inputs,r.slice(4));n.revert={name:e.name,signature:e.format(),args:t},n.reason=n.revert.signature,n.message=`execution reverted: ${n.reason}`}catch(t){n.message="execution reverted (coult not decode custom error)"}}const s=this.parseTransaction(e);return s&&(n.invocation={method:s.name,signature:s.signature,args:s.args}),n}encodeFunctionResult(t,e){if("string"==typeof t){const e=this.getFunction(t);f(e,"unknown function","fragment",t),t=e}return k(this.#w.encode(t.outputs,e||[]))}encodeFilterTopics(t,e){if("string"==typeof t){const e=this.getEvent(t);f(e,"unknown event","eventFragment",t),t=e}h(e.length<=t.inputs.length,`too many arguments for ${t.format()}`,"UNEXPECTED_ARGUMENT",{count:e.length,expectedCount:t.inputs.length});const r=[];t.anonymous||r.push(t.topicHash);const n=(t,e)=>"string"===t.type?Ue(e):"bytes"===t.type?re(k(e)):("bool"===t.type&&"boolean"==typeof e?e=e?"0x01":"0x00":t.type.match(/^u?int/)?e=Z(e):t.type.match(/^bytes/)?e=C(e,32):"address"===t.type&&this.#w.encode(["address"],[e]),O(k(e),32));for(e.forEach(((e,s)=>{const i=t.inputs[s];i.indexed?null==e?r.push(null):"array"===i.baseType||"tuple"===i.baseType?f(!1,"filtering with tuples or arrays not supported","contract."+i.name,e):Array.isArray(e)?r.push(e.map((t=>n(i,t)))):r.push(n(i,e)):f(null==e,"cannot filter non-indexed parameters; must be null","contract."+i.name,e)}));r.length&&null===r[r.length-1];)r.pop();return r}encodeEventLog(t,e){if("string"==typeof t){const e=this.getEvent(t);f(e,"unknown event","eventFragment",t),t=e}const r=[],n=[],s=[];return t.anonymous||r.push(t.topicHash),f(e.length===t.inputs.length,"event arguments/values mismatch","values",e),t.inputs.forEach(((t,i)=>{const o=e[i];if(t.indexed)if("string"===t.type)r.push(Ue(o));else if("bytes"===t.type)r.push(re(o));else{if("tuple"===t.baseType||"array"===t.baseType)throw new Error("not implemented");r.push(this.#w.encode([t.type],[o]))}else n.push(t),s.push(o)})),{data:this.#w.encode(n,s),topics:r}}decodeEventLog(t,e,r){if("string"==typeof t){const e=this.getEvent(t);f(e,"unknown event","eventFragment",t),t=e}if(null!=r&&!t.anonymous){const e=t.topicHash;f(A(r[0],32)&&r[0].toLowerCase()===e,"fragment/topic mismatch","topics[0]",r[0]),r=r.slice(1)}const n=[],s=[],i=[];t.inputs.forEach(((t,e)=>{t.indexed?"string"===t.type||"bytes"===t.type||"tuple"===t.baseType||"array"===t.baseType?(n.push(mr.from({type:"bytes32",name:t.name})),i.push(!0)):(n.push(t),i.push(!1)):(s.push(t),i.push(!1))}));const o=null!=r?this.#w.decode(n,N(r)):null,a=this.#w.decode(s,e,!0),c=[],l=[];let u=0,h=0;return t.inputs.forEach(((t,e)=>{let r=null;if(t.indexed)if(null==o)r=new Dr(null);else if(i[e])r=new Dr(o[h++]);else try{r=o[h++]}catch(t){r=t}else try{r=a[u++]}catch(t){r=t}c.push(r),l.push(t.name||null)})),it.fromItems(c,l)}parseTransaction(t){const e=w(t.data,"tx.data"),r=K(null!=t.value?t.value:0,"tx.value"),n=this.getFunction(k(e.slice(0,4)));if(!n)return null;const s=this.#w.decode(n.inputs,e.slice(4));return new Br(n,n.selector,s,r)}parseCallResult(t){throw new Error("@TODO")}parseLog(t){const e=this.getEvent(t.topics[0]);return!e||e.anonymous?null:new Sr(e,e.topicHash,this.decodeEventLog(e,t.data,t.topics))}parseError(t){const e=k(t),r=this.getError(P(e,0,4));if(!r)return null;const n=this.#w.decode(r.inputs,P(e,4));return new Ur(r,r.selector,n)}static from(t){return t instanceof Mr?t:"string"==typeof t?new Mr(JSON.parse(t)):"function"==typeof t.format?new Mr(t.format("json")):new Mr(t)}}function Gr(t){const e=[];for(;t;)e.unshift(255&t),t>>=8;return e}function Hr(t){if(Array.isArray(t)){let e=[];if(t.forEach((function(t){e=e.concat(Hr(t))})),e.length<=55)return e.unshift(192+e.length),e;const r=Gr(e.length);return r.unshift(247+r.length),r.concat(e)}const e=Array.prototype.slice.call(w(t,"object"));if(1===e.length&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const r=Gr(e.length);return r.unshift(183+r.length),r.concat(e)}const jr="0123456789abcdef";function Qr(t){let e="0x";for(const r of Hr(t))e+=jr[r>>4],e+=jr[15&r];return e}function _r(t){const e=ue(t.from);let r=K(t.nonce,"tx.nonce").toString(16);return r="0"===r?"0x":r.length%2?"0x0"+r:"0x"+r,ue(P(re(Qr([e,r])),12))}function Vr(t,e,r){const n=ue(t),s=w(e,"salt"),i=w(r,"initCodeHash");return f(32===s.length,"salt must be 32 bytes","salt",e),f(32===i.length,"initCodeHash must be 32 bytes","initCodeHash",r),ue(P(re(N(["0xff",n,s,i])),12))}function Kr(t){return t&&"function"==typeof t.getAddress}function Jr(t){try{return ue(t),!0}catch(t){}return!1}async function zr(t,e){const r=await e;return null!=r&&"0x0000000000000000000000000000000000000000"!==r||(h("string"!=typeof t,"unconfigured name","UNCONFIGURED_NAME",{value:t}),f(!1,"invalid AddressLike value; did not resolve to a value address","target",t)),ue(r)}function qr(t,e){return"string"==typeof t?t.match(/^0x[0-9a-f]{40}$/i)?ue(t):(h(null!=e,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),zr(t,e.resolveName(t))):Kr(t)?zr(t,t.getAddress()):t&&"function"==typeof t.then?zr(t,t):void f(!1,"unsupported addressable value","target",t)}const Wr="0x0000000000000000000000000000000000000000",Yr=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Zr=BigInt("1000000000000000000"),Xr=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),$r=BigInt("0x8000000000000000000000000000000000000000000000000000000000000000")*BigInt(-1),tn=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),en="0x0000000000000000000000000000000000000000000000000000000000000000",rn="",nn="Ethereum Signed Message:\\n";function sn(t,e){return{address:ue(t),storageKeys:e.map(((t,e)=>(f(A(t,32),"invalid slot",`storageKeys[${e}]`,t),t.toLowerCase())))}}function on(t){if(Array.isArray(t))return t.map(((e,r)=>Array.isArray(e)?(f(2===e.length,"invalid slot set",`value[${r}]`,e),sn(e[0],e[1])):(f(null!=e&&"object"==typeof e,"invalid address-slot set","value",t),sn(e.address,e.storageKeys))));f(null!=t&&"object"==typeof t,"invalid access list","value",t);const e=Object.keys(t).map((e=>{const r=t[e].reduce(((t,e)=>(t[e]=!0,t)),{});return sn(e,Object.keys(r).sort())}));return e.sort(((t,e)=>t.address.localeCompare(e.address))),e}const an=BigInt(0);function cn(t){return null==t?null:t}function ln(t){return null==t?null:t.toString()}class un{gasPrice;maxFeePerGas;maxPriorityFeePerGas;constructor(t,e,r){o(this,{gasPrice:cn(t),maxFeePerGas:cn(e),maxPriorityFeePerGas:cn(r)})}toJSON(){const{gasPrice:t,maxFeePerGas:e,maxPriorityFeePerGas:r}=this;return{_type:"FeeData",gasPrice:ln(t),maxFeePerGas:ln(e),maxPriorityFeePerGas:ln(r)}}}function hn(t){const e={};t.to&&(e.to=t.to),t.from&&(e.from=t.from),t.data&&(e.data=k(t.data));const r="chainId,gasLimit,gasPrice,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const n of r)n in t&&null!=t[n]&&(e[n]=K(t[n],`request.${n}`));const n="type,nonce".split(/,/);for(const r of n)r in t&&null!=t[r]&&(e[r]=W(t[r],`request.${r}`));return t.accessList&&(e.accessList=on(t.accessList)),"blockTag"in t&&(e.blockTag=t.blockTag),"enableCcipRead"in t&&(e.enableCcipRead=!!t.enableCcipRead),"customData"in t&&(e.customData=t.customData),e}class fn{provider;number;hash;timestamp;parentHash;nonce;difficulty;gasLimit;gasUsed;miner;extraData;baseFeePerGas;#E;constructor(t,e){this.#E=t.transactions.map((t=>"string"!=typeof t?new gn(t,e):t)),o(this,{provider:e,hash:cn(t.hash),number:t.number,timestamp:t.timestamp,parentHash:t.parentHash,nonce:t.nonce,difficulty:t.difficulty,gasLimit:t.gasLimit,gasUsed:t.gasUsed,miner:t.miner,extraData:t.extraData,baseFeePerGas:cn(t.baseFeePerGas)})}get transactions(){return this.#E.map((t=>"string"==typeof t?t:t.hash))}get prefetchedTransactions(){const t=this.#E.slice();return 0===t.length?[]:(h("object"==typeof t[0],"transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),t)}toJSON(){const{baseFeePerGas:t,difficulty:e,extraData:r,gasLimit:n,gasUsed:s,hash:i,miner:o,nonce:a,number:c,parentHash:l,timestamp:u,transactions:h}=this;return{_type:"Block",baseFeePerGas:ln(t),difficulty:ln(e),extraData:r,gasLimit:ln(n),gasUsed:ln(s),hash:i,miner:o,nonce:a,number:c,parentHash:l,timestamp:u,transactions:h}}[Symbol.iterator](){let t=0;const e=this.transactions;return{next:()=>t<this.length?{value:e[t++],done:!1}:{value:void 0,done:!0}}}get length(){return this.#E.length}get date(){return null==this.timestamp?null:new Date(1e3*this.timestamp)}async getTransaction(t){let e;if("number"==typeof t)e=this.#E[t];else{const r=t.toLowerCase();for(const t of this.#E){if("string"==typeof t){if(t!==r)continue;e=t;break}if(t.hash!==r){e=t;break}}}if(null==e)throw new Error("no such tx");return"string"==typeof e?await this.provider.getTransaction(e):e}getPrefetchedTransaction(t){const e=this.prefetchedTransactions;if("number"==typeof t)return e[t];t=t.toLowerCase();for(const r of e)if(r.hash===t)return r;f(!1,"no matching transaction","indexOrHash",t)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return{orphan:"drop-block",hash:this.hash,number:this.number}}}class dn{provider;transactionHash;blockHash;blockNumber;removed;address;data;topics;index;transactionIndex;constructor(t,e){this.provider=e;const r=Object.freeze(t.topics.slice());o(this,{transactionHash:t.transactionHash,blockHash:t.blockHash,blockNumber:t.blockNumber,removed:t.removed,address:t.address,data:t.data,topics:r,index:t.index,transactionIndex:t.transactionIndex})}toJSON(){const{address:t,blockHash:e,blockNumber:r,data:n,index:s,removed:i,topics:o,transactionHash:a,transactionIndex:c}=this;return{_type:"log",address:t,blockHash:e,blockNumber:r,data:n,index:s,removed:i,topics:o,transactionHash:a,transactionIndex:c}}async getBlock(){const t=await this.provider.getBlock(this.blockHash);return h(!!t,"failed to find transaction","UNKNOWN_ERROR",{}),t}async getTransaction(){const t=await this.provider.getTransaction(this.transactionHash);return h(!!t,"failed to find transaction","UNKNOWN_ERROR",{}),t}async getTransactionReceipt(){const t=await this.provider.getTransactionReceipt(this.transactionHash);return h(!!t,"failed to find transaction receipt","UNKNOWN_ERROR",{}),t}removedEvent(){return{orphan:"drop-log",log:{transactionHash:(t=this).transactionHash,blockHash:t.blockHash,blockNumber:t.blockNumber,address:t.address,data:t.data,topics:Object.freeze(t.topics.slice()),index:t.index}};var t}}class pn{provider;to;from;contractAddress;hash;index;blockHash;blockNumber;logsBloom;gasUsed;cumulativeGasUsed;gasPrice;type;status;root;#v;constructor(t,e){this.#v=Object.freeze(t.logs.map((t=>new dn(t,e))));let r=an;null!=t.effectiveGasPrice?r=t.effectiveGasPrice:null!=t.gasPrice&&(r=t.gasPrice),o(this,{provider:e,to:t.to,from:t.from,contractAddress:t.contractAddress,hash:t.hash,index:t.index,blockHash:t.blockHash,blockNumber:t.blockNumber,logsBloom:t.logsBloom,gasUsed:t.gasUsed,cumulativeGasUsed:t.cumulativeGasUsed,gasPrice:r,type:t.type,status:t.status,root:t.root})}get logs(){return this.#v}toJSON(){const{to:t,from:e,contractAddress:r,hash:n,index:s,blockHash:i,blockNumber:o,logsBloom:a,logs:c,status:l,root:u}=this;return{_type:"TransactionReceipt",blockHash:i,blockNumber:o,contractAddress:r,cumulativeGasUsed:ln(this.cumulativeGasUsed),from:e,gasPrice:ln(this.gasPrice),gasUsed:ln(this.gasUsed),hash:n,index:s,logs:c,logsBloom:a,root:u,status:l,to:t}}get length(){return this.logs.length}[Symbol.iterator](){let t=0;return{next:()=>t<this.length?{value:this.logs[t++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const t=await this.provider.getBlock(this.blockHash);if(null==t)throw new Error("TODO");return t}async getTransaction(){const t=await this.provider.getTransaction(this.hash);if(null==t)throw new Error("TODO");return t}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return yn(this)}reorderedEvent(t){return h(!t||t.isMined(),"unmined \'other\' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),mn(this,t)}}class gn{provider;blockNumber;blockHash;index;hash;type;to;from;nonce;gasLimit;gasPrice;maxPriorityFeePerGas;maxFeePerGas;data;value;chainId;signature;accessList;#k;constructor(t,e){this.provider=e,this.blockNumber=null!=t.blockNumber?t.blockNumber:null,this.blockHash=null!=t.blockHash?t.blockHash:null,this.hash=t.hash,this.index=t.index,this.type=t.type,this.from=t.from,this.to=t.to||null,this.gasLimit=t.gasLimit,this.nonce=t.nonce,this.data=t.data,this.value=t.value,this.gasPrice=t.gasPrice,this.maxPriorityFeePerGas=null!=t.maxPriorityFeePerGas?t.maxPriorityFeePerGas:null,this.maxFeePerGas=null!=t.maxFeePerGas?t.maxFeePerGas:null,this.chainId=t.chainId,this.signature=t.signature,this.accessList=null!=t.accessList?t.accessList:null,this.#k=-1}toJSON(){const{blockNumber:t,blockHash:e,index:r,hash:n,type:s,to:i,from:o,nonce:a,data:c,signature:l,accessList:u}=this;return{_type:"TransactionReceipt",accessList:u,blockNumber:t,blockHash:e,chainId:ln(this.chainId),data:c,from:o,gasLimit:ln(this.gasLimit),gasPrice:ln(this.gasPrice),hash:n,maxFeePerGas:ln(this.maxFeePerGas),maxPriorityFeePerGas:ln(this.maxPriorityFeePerGas),nonce:a,signature:l,to:i,index:r,type:s,value:ln(this.value)}}async getBlock(){let t=this.blockNumber;if(null==t){const e=await this.getTransaction();e&&(t=e.blockNumber)}if(null==t)return null;const e=this.provider.getBlock(t);if(null==e)throw new Error("TODO");return e}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(null==this.blockNumber){const{tx:t,blockNumber:e}=await i({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return null==t||null==t.blockNumber?0:e-t.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(t,e){const r=null==t?1:t,n=null==e?0:e;let s=this.#k,o=-1,a=-1===s;const l=async()=>{if(a)return null;const{blockNumber:t,nonce:e}=await i({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(e<this.nonce)return void(s=t);if(a)return null;const n=await this.getTransaction();if(!n||null==n.blockNumber)for(-1===o&&(o=s-3,o<this.#k&&(o=this.#k));o<=t;){if(a)return null;const e=await this.provider.getBlock(o,!0);if(null==e)return;for(const t of e)if(t===this.hash)return;for(let n=0;n<e.length;n++){const i=await e.getTransaction(n);if(i.from===this.from&&i.nonce===this.nonce){if(a)return null;const e=await this.provider.getTransactionReceipt(i.hash);if(null==e)return;if(t-e.blockNumber+1<r)return;let n="replaced";i.data===this.data&&i.to===this.to&&i.value===this.value?n="repriced":"0x"===i.data&&i.from===i.to&&i.value===an&&(n="cancelled"),h(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:"replaced"===n||"cancelled"===n,reason:n,replacement:i.replaceableTransaction(s),hash:i.hash,receipt:e})}}o++}},f=t=>{if(null==t||0!==t.status)return t;h(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:t.to,from:t.from,data:""},receipt:t})},d=await this.provider.getTransactionReceipt(this.hash);if(0===r)return f(d);if(d){if(await d.confirmations()>=r)return f(d)}else if(await l(),0===r)return null;const p=new Promise(((t,e)=>{const i=[],o=()=>{i.forEach((t=>t()))};if(i.push((()=>{a=!0})),n>0){const t=setTimeout((()=>{o(),e(u("wait for transaction timeout","TIMEOUT"))}),n);i.push((()=>{clearTimeout(t)}))}const h=async n=>{if(await n.confirmations()>=r){o();try{t(f(n))}catch(t){e(t)}}};if(i.push((()=>{this.provider.off(this.hash,h)})),this.provider.on(this.hash,h),s>=0){const t=async()=>{try{await l()}catch(t){if(c(t,"TRANSACTION_REPLACED"))return o(),void e(t)}a||this.provider.once("block",t)};i.push((()=>{this.provider.off("block",t)})),this.provider.once("block",t)}}));return await p}isMined(){return null!=this.blockHash}isLegacy(){return 0===this.type}isBerlin(){return 1===this.type}isLondon(){return 2===this.type}removedEvent(){return h(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),yn(this)}reorderedEvent(t){return h(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),h(!t||t.isMined(),"unmined \'other\' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),mn(this,t)}replaceableTransaction(t){f(Number.isInteger(t)&&t>=0,"invalid startBlock","startBlock",t);const e=new gn(this,this.provider);return e.#k=t,e}}function mn(t,e){return{orphan:"reorder-transaction",tx:t,other:e}}function yn(t){return{orphan:"drop-transaction",tx:t}}class wn{filter;emitter;#N;constructor(t,e,r){this.#N=e,o(this,{emitter:t,filter:r})}async removeListener(){null!=this.#N&&await this.emitter.off(this.filter,this.#N)}}class bn extends dn{interface;fragment;args;constructor(t,e,r){super(t,t.provider),o(this,{args:e.decodeEventLog(r,t.data,t.topics),fragment:r,interface:e})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class An extends dn{error;constructor(t,e){super(t,t.provider),o(this,{error:e})}}class En extends pn{#R;constructor(t,e,r){super(r,e),this.#R=t}get logs(){return super.logs.map((t=>{const e=t.topics.length?this.#R.getEvent(t.topics[0]):null;if(e)try{return new bn(t,this.#R,e)}catch(e){return new An(t,e)}return t}))}}class vn extends gn{#R;constructor(t,e,r){super(r,e),this.#R=t}async wait(t){const e=await super.wait(t);return null==e?null:new En(this.#R,this.provider,e)}}class kn extends wn{log;constructor(t,e,r,n){super(t,e,r),o(this,{log:n})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class Nn extends kn{constructor(t,e,r,n,s){super(t,e,r,new bn(s,t.interface,n)),o(this,{args:t.interface.decodeEventLog(n,this.log.data,this.log.topics),fragment:n})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const Rn=BigInt(0);function Pn(t){return t&&"function"==typeof t.call}function In(t){return t&&"function"==typeof t.estimateGas}function Tn(t){return t&&"function"==typeof t.resolveName}function On(t){return t&&"function"==typeof t.sendTransaction}function Cn(t){if(null!=t){if(Tn(t))return t;if(t.provider)return t.provider}}class xn{#P;fragment;constructor(t,e,r){if(o(this,{fragment:e}),e.inputs.length<r.length)throw new Error("too many arguments");const n=Sn(t.runner,"resolveName"),s=Tn(n)?n:null;this.#P=async function(){const n=await Promise.all(e.inputs.map(((t,e)=>null==r[e]?null:t.walkAsync(r[e],((t,e)=>"address"===t?Array.isArray(e)?Promise.all(e.map((t=>qr(t,s)))):qr(e,s):e)))));return t.interface.encodeFilterTopics(e,n)}()}getTopicFilter(){return this.#P}}function Sn(t,e){return null==t?null:"function"==typeof t[e]?t:t.provider&&"function"==typeof t.provider[e]?t.provider:null}function Bn(t){return null==t?null:t.provider||null}async function Un(t,e){const r=me.dereference(t,"overrides");f("object"==typeof r,"invalid overrides parameter","overrides",t);const n=hn(r);return f(null==n.to||(e||[]).indexOf("to")>=0,"cannot override to","overrides.to",n.to),f(null==n.data||(e||[]).indexOf("data")>=0,"cannot override data","overrides.data",n.data),n.from&&(n.from=n.from),n}async function Dn(t,e,r){const n=Sn(t,"resolveName"),s=Tn(n)?n:null;return await Promise.all(e.map(((t,e)=>t.walkAsync(r[e],((t,e)=>(e=me.dereference(e,t),"address"===t?qr(e,s):e))))))}function Fn(t){const e=async function(e){const r=await Un(e,["data"]);r.to=await t.getAddress(),r.from&&(r.from=await qr(r.from,Cn(t.runner)));const n=t.interface,s=K(r.value||Rn,"overrides.value")===Rn,i="0x"===(r.data||"0x");return!n.fallback||n.fallback.payable||!n.receive||i||s||f(!1,"cannot send data to receive or send value to non-payable fallback","overrides",e),f(n.fallback||i,"cannot send data to receive-only contract","overrides.data",r.data),f(n.receive||n.fallback&&n.fallback.payable||s,"cannot send value to non-payable fallback","overrides.value",r.value),f(n.fallback||i,"cannot send data to receive-only contract","overrides.data",r.data),r},r=async function(r){const n=t.runner;h(On(n),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const s=await n.sendTransaction(await e(r)),i=Bn(t.runner);return new vn(t.interface,i,s)},n=async t=>await r(t);return o(n,{_contract:t,estimateGas:async function(r){const n=Sn(t.runner,"estimateGas");return h(In(n),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await n.estimateGas(await e(r))},populateTransaction:e,send:r,staticCall:async function(r){const n=Sn(t.runner,"call");h(Pn(n),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const s=await e(r);try{return await n.call(s)}catch(e){if(l(e)&&e.data)throw t.interface.makeError(e.data,s);throw e}}}),n}const Ln=Symbol.for("_ethersInternal_contract"),Mn=new WeakMap;function Gn(t){return Mn.get(t[Ln])}async function Hn(t,e){let r,n=null;if(Array.isArray(e)){const n=function(e){if(A(e,32))return e;const r=t.interface.getEvent(e);return f(r,"unknown fragment","name",e),r.topicHash};r=e.map((t=>null==t?null:Array.isArray(t)?t.map(n):n(t)))}else"*"===e?r=[null]:"string"==typeof e?A(e,32)?r=[e]:(n=t.interface.getEvent(e),f(n,"unknown fragment","event",e),r=[n.topicHash]):(s=e)&&"object"==typeof s&&"getTopicFilter"in s&&"function"==typeof s.getTopicFilter&&s.fragment?r=await e.getTopicFilter():"fragment"in e?(n=e.fragment,r=[n.topicHash]):f(!1,"unknown event name","event",e);var s;return r=r.map((t=>{if(null==t)return null;if(Array.isArray(t)){const e=Array.from(new Set(t.map((t=>t.toLowerCase()))).values());return 1===e.length?e[0]:(e.sort(),e)}return t.toLowerCase()})),{fragment:n,tag:r.map((t=>null==t?"null":Array.isArray(t)?t.join("|"):t)).join("&"),topics:r}}async function jn(t,e){const{subs:r}=Gn(t);return r.get((await Hn(t,e)).tag)||null}async function Qn(t,e,r){const n=Bn(t.runner);h(n,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:e});const{fragment:s,tag:i,topics:o}=await Hn(t,r),{addr:a,subs:c}=Gn(t);let l=c.get(i);if(!l){const e={address:a||t,topics:o},u=e=>{let n=s;if(null==n)try{n=t.interface.getEvent(e.topics[0])}catch(t){}if(n){const i=n,o=s?t.interface.decodeEventLog(s,e.data,e.topics):[];Vn(t,r,o,(n=>new Nn(t,n,r,i,e)))}else Vn(t,r,[],(n=>new kn(t,n,r,e)))};let h=[];l={tag:i,listeners:[],start:()=>{h.length||h.push(n.on(e,u))},stop:async()=>{if(0==h.length)return;let t=h;h=[],await Promise.all(t),n.off(e,u)}},c.set(i,l)}return l}let _n=Promise.resolve();async function Vn(t,e,r,n){try{await _n}catch(t){}const s=async function(t,e,r,n){await _n;const s=await jn(t,e);if(!s)return!1;const i=s.listeners.length;return s.listeners=s.listeners.filter((({listener:e,once:s})=>{const i=Array.from(r);n&&i.push(n(s?null:e));try{e.call(t,...i)}catch(t){}return!s})),0===s.listeners.length&&(s.stop(),Gn(t).subs.delete(s.tag)),i>0}(t,e,r,n);return _n=s,await s}const Kn=["then"];class Jn{target;interface;runner;filters;[Ln];fallback;constructor(t,e,r,n){f("string"==typeof t||Kr(t),"invalid value for Contract target","target",t),null==r&&(r=null);const s=Mr.from(e);let i;o(this,{target:t,runner:r,interface:s}),Object.defineProperty(this,Ln,{value:{}});let a=null,l=null;if(n){const t=Bn(r);l=new vn(this.interface,t,n)}let h=new Map;if("string"==typeof t)if(A(t))a=t,i=Promise.resolve(t);else{const e=Sn(r,"resolveName");if(!Tn(e))throw u("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});i=e.resolveName(t).then((e=>{if(null==e)throw u("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:t});return Gn(this).addr=e,e}))}else i=t.getAddress().then((t=>{if(null==t)throw new Error("TODO");return Gn(this).addr=t,t}));var d;d={addrPromise:i,addr:a,deployTx:l,subs:h},Mn.set(this[Ln],d);const p=new Proxy({},{get:(t,e,r)=>{if("symbol"==typeof e||Kn.indexOf(e)>=0)return Reflect.get(t,e,r);try{return this.getEvent(e)}catch(t){if(!c(t,"INVALID_ARGUMENT")||"key"!==t.argument)throw t}},has:(t,e)=>Kn.indexOf(e)>=0?Reflect.has(t,e):Reflect.has(t,e)||this.interface.hasEvent(String(e))});return o(this,{filters:p}),o(this,{fallback:s.receive||s.fallback?Fn(this):null}),new Proxy(this,{get:(t,e,r)=>{if("symbol"==typeof e||e in t||Kn.indexOf(e)>=0)return Reflect.get(t,e,r);try{return t.getFunction(e)}catch(t){if(!c(t,"INVALID_ARGUMENT")||"key"!==t.argument)throw t}},has:(t,e)=>"symbol"==typeof e||e in t||Kn.indexOf(e)>=0?Reflect.has(t,e):t.interface.hasFunction(e)})}connect(t){return new Jn(this.target,this.interface,t)}attach(t){return new Jn(t,this.interface,this.runner)}async getAddress(){return await Gn(this).addrPromise}async getDeployedCode(){const t=Bn(this.runner);h(t,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const e=await t.getCode(await this.getAddress());return"0x"===e?null:e}async waitForDeployment(){const t=this.deploymentTransaction();if(t)return await t.wait(),this;if(null!=await this.getDeployedCode())return this;const e=Bn(this.runner);return h(null!=e,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise(((t,r)=>{const n=async()=>{try{if(null!=await this.getDeployedCode())return t(this);e.once("block",n)}catch(t){r(t)}};n()}))}deploymentTransaction(){return Gn(this).deployTx}getFunction(t){"string"!=typeof t&&(t=t.format());const e=function(t,e){const r=function(...r){const n=t.interface.getFunction(e,r);return h(n,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:r}}),n},n=async function(...e){const n=r(...e);let s={};if(n.inputs.length+1===e.length&&(s=await Un(e.pop()),s.from&&(s.from=await qr(s.from,Cn(t.runner)))),n.inputs.length!==e.length)throw new Error("internal error: fragment inputs doesn\'t match arguments; should not happen");const o=await Dn(t.runner,n.inputs,e);return Object.assign({},s,await i({to:t.getAddress(),data:t.interface.encodeFunctionData(n,o)}))},s=async function(...t){const e=await c(...t);return 1===e.length?e[0]:e},a=async function(...e){const r=t.runner;h(On(r),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const s=await r.sendTransaction(await n(...e)),i=Bn(t.runner);return new vn(t.interface,i,s)},c=async function(...e){const s=Sn(t.runner,"call");h(Pn(s),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const i=await n(...e);let o="0x";try{o=await s.call(i)}catch(e){if(l(e)&&e.data)throw t.interface.makeError(e.data,i);throw e}const a=r(...e);return t.interface.decodeFunctionResult(a,o)},u=async(...t)=>r(...t).constant?await s(...t):await a(...t);return o(u,{name:t.interface.getFunctionName(e),_contract:t,_key:e,getFragment:r,estimateGas:async function(...e){const r=Sn(t.runner,"estimateGas");return h(In(r),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await r.estimateGas(await n(...e))},populateTransaction:n,send:a,staticCall:s,staticCallResult:c}),Object.defineProperty(u,"fragment",{configurable:!1,enumerable:!0,get:()=>{const r=t.interface.getFunction(e);return h(r,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),r}}),u}(this,t);return e}getEvent(t){return"string"!=typeof t&&(t=t.format()),function(t,e){const r=function(...r){const n=t.interface.getEvent(e,r);return h(n,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:r}}),n},n=function(...e){return new xn(t,r(...e),e)};return o(n,{name:t.interface.getEventName(e),_contract:t,_key:e,getFragment:r}),Object.defineProperty(n,"fragment",{configurable:!1,enumerable:!0,get:()=>{const r=t.interface.getEvent(e);return h(r,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),r}}),n}(this,t)}async queryTransaction(t){throw new Error("@TODO")}async queryFilter(t,e,r){null==e&&(e=0),null==r&&(r="latest");const{addr:n,addrPromise:s}=Gn(this),i=n||await s,{fragment:o,topics:a}=await Hn(this,t),c={address:i,topics:a,fromBlock:e,toBlock:r},l=Bn(this.runner);return h(l,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await l.getLogs(c)).map((t=>{let e=o;if(null==e)try{e=this.interface.getEvent(t.topics[0])}catch(t){}if(e)try{return new bn(t,this.interface,e)}catch(e){return new An(t,e)}return new dn(t,l)}))}async on(t,e){const r=await Qn(this,"on",t);return r.listeners.push({listener:e,once:!1}),r.start(),this}async once(t,e){const r=await Qn(this,"once",t);return r.listeners.push({listener:e,once:!0}),r.start(),this}async emit(t,...e){return await Vn(this,t,e,null)}async listenerCount(t){if(t){const e=await jn(this,t);return e?e.listeners.length:0}const{subs:e}=Gn(this);let r=0;for(const{listeners:t}of e.values())r+=t.length;return r}async listeners(t){if(t){const e=await jn(this,t);return e?e.listeners.map((({listener:t})=>t)):[]}const{subs:e}=Gn(this);let r=[];for(const{listeners:t}of e.values())r=r.concat(t.map((({listener:t})=>t)));return r}async off(t,e){const r=await jn(this,t);if(!r)return this;if(e){const t=r.listeners.map((({listener:t})=>t)).indexOf(e);t>=0&&r.listeners.splice(t,1)}return null!=e&&0!==r.listeners.length||(r.stop(),Gn(this).subs.delete(r.tag)),this}async removeAllListeners(t){if(t){const e=await jn(this,t);if(!e)return this;e.stop(),Gn(this).subs.delete(e.tag)}else{const{subs:t}=Gn(this);for(const{tag:e,stop:r}of t.values())r(),t.delete(e)}return this}async addListener(t,e){return await this.on(t,e)}async removeListener(t,e){return await this.off(t,e)}static buildClass(t){return class extends Jn{constructor(e,r=null){super(e,t,r)}}}static from(t,e,r){return null==r&&(r=null),new this(t,e,r)}}class zn extends(function(){return Jn}()){}class qn{interface;bytecode;runner;constructor(t,e,r){const n=Mr.from(t);e instanceof Uint8Array||("object"==typeof e&&(e=e.object),e.startsWith("0x")||(e="0x"+e)),o(this,{bytecode:e=k(w(e)),interface:n,runner:r||null})}attach(t){return new Jn(t,this.interface,this.runner)}async getDeployTransaction(...t){let e={};const r=this.interface.deploy;if(r.inputs.length+1===t.length&&(e=await Un(t.pop())),r.inputs.length!==t.length)throw new Error("incorrect number of arguments to constructor");const n=await Dn(this.runner,r.inputs,t),s=N([this.bytecode,this.interface.encodeDeploy(n)]);return Object.assign({},e,{data:s})}async deploy(...t){const e=await this.getDeployTransaction(...t);h(this.runner&&"function"==typeof this.runner.sendTransaction,"factory runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const r=await this.runner.sendTransaction(e),n=_r(r);return new Jn(n,this.interface,this.runner,r)}connect(t){return new qn(this.interface,this.bytecode,t)}static fromSolidity(t,e){f(null!=t,"bad compiler output","output",t),"string"==typeof t&&(t=JSON.parse(t));const r=t.abi;let n="";return t.bytecode?n=t.bytecode:t.evm&&t.evm.bytecode&&(n=t.evm.bytecode),new this(r,n,e)}}class Wn extends Bt{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,dt(t);const r=St(e);if(this.iHash=t.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const n=this.blockLen,s=new Uint8Array(n);s.set(r.length>n?t.create().update(r).digest():r);for(let t=0;t<s.length;t++)s[t]^=54;this.iHash.update(s),this.oHash=t.create();for(let t=0;t<s.length;t++)s[t]^=106;this.oHash.update(s),s.fill(0)}update(t){return pt(this),this.iHash.update(t),this}digestInto(t){pt(this),ft(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:r,finished:n,destroyed:s,blockLen:i,outputLen:o}=this;return t.finished=n,t.destroyed=s,t.blockLen=i,t.outputLen=o,t.oHash=e._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Yn=(t,e,r)=>new Wn(t,e).update(r).digest();function Zn(t,e,r,n){const{c:s,dkLen:i,DK:o,PRF:a,PRFSalt:c}=function(t,e,r,n){dt(t);const s=Dt({dkLen:32,asyncTick:10},n),{c:i,dkLen:o,asyncTick:a}=s;if(ht(i),ht(o),ht(a),i<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const c=St(e),l=St(r),u=new Uint8Array(o),h=Yn.create(t,c),f=h._cloneInto().update(l);return{c:i,dkLen:o,asyncTick:a,DK:u,PRF:h,PRFSalt:f}}(t,e,r,n);let l;const u=new Uint8Array(4),h=Tt(u),f=new Uint8Array(a.outputLen);for(let t=1,e=0;e<i;t++,e+=a.outputLen){const r=o.subarray(e,e+a.outputLen);h.setInt32(0,t,!1),(l=c._cloneInto(l)).update(u).digestInto(f),r.set(f.subarray(0,r.length));for(let t=1;t<s;t++){a._cloneInto(l).update(f).digestInto(f);for(let t=0;t<r.length;t++)r[t]^=f[t]}}return function(t,e,r,n,s){return t.destroy(),e.destroy(),n&&n.destroy(),s.fill(0),r}(a,c,o,l,f)}Yn.create=(t,e)=>new Wn(t,e);class Xn extends Bt{constructor(t,e,r,n){super(),this.blockLen=t,this.outputLen=e,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Tt(this.buffer)}update(t){pt(this);const{view:e,buffer:r,blockLen:n}=this,s=(t=St(t)).length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);if(o!==n)r.set(t.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===n&&(this.process(e,0),this.pos=0);else{const e=Tt(t);for(;n<=s-i;i+=n)this.process(e,i)}}return this.length+=t.length,this.roundClean(),this}digestInto(t){pt(this),gt(t,this),this.finished=!0;const{buffer:e,view:r,blockLen:n,isLE:s}=this;let{pos:i}=this;e[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>n-i&&(this.process(r,0),i=0);for(let t=i;t<n;t++)e[t]=0;!function(t,e,r,n){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,r,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(r>>s&i),a=Number(r&i),c=n?4:0,l=n?0:4;t.setUint32(e+c,o,n),t.setUint32(e+l,a,n)}(r,n-8,BigInt(8*this.length),s),this.process(r,0);const o=Tt(t),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=a/4,l=this.get();if(c>l.length)throw new Error("_sha2: outputLen bigger than state");for(let t=0;t<c;t++)o.setUint32(4*t,l[t],s)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const r=t.slice(0,e);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:r,length:n,finished:s,destroyed:i,pos:o}=this;return t.length=n,t.pos=o,t.finished=s,t.destroyed=i,n%e&&t.buffer.set(r),t}}const $n=(t,e,r)=>t&e^~t&r,ts=(t,e,r)=>t&e^t&r^e&r,es=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),rs=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ns=new Uint32Array(64);class ss extends Xn{constructor(){super(64,32,8,!1),this.A=0|rs[0],this.B=0|rs[1],this.C=0|rs[2],this.D=0|rs[3],this.E=0|rs[4],this.F=0|rs[5],this.G=0|rs[6],this.H=0|rs[7]}get(){const{A:t,B:e,C:r,D:n,E:s,F:i,G:o,H:a}=this;return[t,e,r,n,s,i,o,a]}set(t,e,r,n,s,i,o,a){this.A=0|t,this.B=0|e,this.C=0|r,this.D=0|n,this.E=0|s,this.F=0|i,this.G=0|o,this.H=0|a}process(t,e){for(let r=0;r<16;r++,e+=4)ns[r]=t.getUint32(e,!1);for(let t=16;t<64;t++){const e=ns[t-15],r=ns[t-2],n=Ot(e,7)^Ot(e,18)^e>>>3,s=Ot(r,17)^Ot(r,19)^r>>>10;ns[t]=s+ns[t-7]+n+ns[t-16]|0}let{A:r,B:n,C:s,D:i,E:o,F:a,G:c,H:l}=this;for(let t=0;t<64;t++){const e=l+(Ot(o,6)^Ot(o,11)^Ot(o,25))+$n(o,a,c)+es[t]+ns[t]|0,u=(Ot(r,2)^Ot(r,13)^Ot(r,22))+ts(r,n,s)|0;l=c,c=a,a=o,o=i+e|0,i=s,s=n,n=r,r=e+u|0}r=r+this.A|0,n=n+this.B|0,s=s+this.C|0,i=i+this.D|0,o=o+this.E|0,a=a+this.F|0,c=c+this.G|0,l=l+this.H|0,this.set(r,n,s,i,o,a,c,l)}roundClean(){ns.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const is=Ft((()=>new ss)),[os,as]=(()=>Nt.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((t=>BigInt(t)))))(),cs=new Uint32Array(80),ls=new Uint32Array(80);class us extends Xn{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:e,Bh:r,Bl:n,Ch:s,Cl:i,Dh:o,Dl:a,Eh:c,El:l,Fh:u,Fl:h,Gh:f,Gl:d,Hh:p,Hl:g}=this;return[t,e,r,n,s,i,o,a,c,l,u,h,f,d,p,g]}set(t,e,r,n,s,i,o,a,c,l,u,h,f,d,p,g){this.Ah=0|t,this.Al=0|e,this.Bh=0|r,this.Bl=0|n,this.Ch=0|s,this.Cl=0|i,this.Dh=0|o,this.Dl=0|a,this.Eh=0|c,this.El=0|l,this.Fh=0|u,this.Fl=0|h,this.Gh=0|f,this.Gl=0|d,this.Hh=0|p,this.Hl=0|g}process(t,e){for(let r=0;r<16;r++,e+=4)cs[r]=t.getUint32(e),ls[r]=t.getUint32(e+=4);for(let t=16;t<80;t++){const e=0|cs[t-15],r=0|ls[t-15],n=Nt.rotrSH(e,r,1)^Nt.rotrSH(e,r,8)^Nt.shrSH(e,r,7),s=Nt.rotrSL(e,r,1)^Nt.rotrSL(e,r,8)^Nt.shrSL(e,r,7),i=0|cs[t-2],o=0|ls[t-2],a=Nt.rotrSH(i,o,19)^Nt.rotrBH(i,o,61)^Nt.shrSH(i,o,6),c=Nt.rotrSL(i,o,19)^Nt.rotrBL(i,o,61)^Nt.shrSL(i,o,6),l=Nt.add4L(s,c,ls[t-7],ls[t-16]),u=Nt.add4H(l,n,a,cs[t-7],cs[t-16]);cs[t]=0|u,ls[t]=0|l}let{Ah:r,Al:n,Bh:s,Bl:i,Ch:o,Cl:a,Dh:c,Dl:l,Eh:u,El:h,Fh:f,Fl:d,Gh:p,Gl:g,Hh:m,Hl:y}=this;for(let t=0;t<80;t++){const e=Nt.rotrSH(u,h,14)^Nt.rotrSH(u,h,18)^Nt.rotrBH(u,h,41),w=Nt.rotrSL(u,h,14)^Nt.rotrSL(u,h,18)^Nt.rotrBL(u,h,41),b=u&f^~u&p,A=h&d^~h&g,E=Nt.add5L(y,w,A,as[t],ls[t]),v=Nt.add5H(E,m,e,b,os[t],cs[t]),k=0|E,N=Nt.rotrSH(r,n,28)^Nt.rotrBH(r,n,34)^Nt.rotrBH(r,n,39),R=Nt.rotrSL(r,n,28)^Nt.rotrBL(r,n,34)^Nt.rotrBL(r,n,39),P=r&s^r&o^s&o,I=n&i^n&a^i&a;m=0|p,y=0|g,p=0|f,g=0|d,f=0|u,d=0|h,({h:u,l:h}=Nt.add(0|c,0|l,0|v,0|k)),c=0|o,l=0|a,o=0|s,a=0|i,s=0|r,i=0|n;const T=Nt.add3L(k,R,I);r=Nt.add3H(T,v,N,P),n=0|T}({h:r,l:n}=Nt.add(0|this.Ah,0|this.Al,0|r,0|n)),({h:s,l:i}=Nt.add(0|this.Bh,0|this.Bl,0|s,0|i)),({h:o,l:a}=Nt.add(0|this.Ch,0|this.Cl,0|o,0|a)),({h:c,l}=Nt.add(0|this.Dh,0|this.Dl,0|c,0|l)),({h:u,l:h}=Nt.add(0|this.Eh,0|this.El,0|u,0|h)),({h:f,l:d}=Nt.add(0|this.Fh,0|this.Fl,0|f,0|d)),({h:p,l:g}=Nt.add(0|this.Gh,0|this.Gl,0|p,0|g)),({h:m,l:y}=Nt.add(0|this.Hh,0|this.Hl,0|m,0|y)),this.set(r,n,s,i,o,a,c,l,u,h,f,d,p,g,m,y)}roundClean(){cs.fill(0),ls.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const hs=Ft((()=>new us)),fs=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}(),ds=fs.crypto||fs.msCrypto;function ps(t){switch(t){case"sha256":return is.create();case"sha512":return hs.create()}f(!1,"invalid hashing algorithm name","algorithm",t)}let gs=!1;const ms=function(t,e,r){return function(t,e){const r={sha256:is,sha512:hs}[t];return f(null!=r,"invalid hmac algorithm","algorithm",t),Yn.create(r,e)}(t,e).update(r).digest()};let ys=ms;function ws(t,e,r){const n=w(e,"key"),s=w(r,"data");return k(ys(t,n,s))}ws._=ms,ws.lock=function(){gs=!0},ws.register=function(t){if(gs)throw new Error("computeHmac is locked");ys=t},Object.freeze(ws);const bs=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),As=Uint8Array.from({length:16},((t,e)=>e));let Es=[As],vs=[As.map((t=>(9*t+5)%16))];for(let t=0;t<4;t++)for(let e of[Es,vs])e.push(e[t].map((t=>bs[t])));const ks=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map((t=>new Uint8Array(t))),Ns=Es.map(((t,e)=>t.map((t=>ks[e][t])))),Rs=vs.map(((t,e)=>t.map((t=>ks[e][t])))),Ps=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),Is=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),Ts=(t,e)=>t<<e|t>>>32-e;function Os(t,e,r,n){return 0===t?e^r^n:1===t?e&r|~e&n:2===t?(e|~r)^n:3===t?e&n|r&~n:e^(r|~n)}const Cs=new Uint32Array(16);class xs extends Xn{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:t,h1:e,h2:r,h3:n,h4:s}=this;return[t,e,r,n,s]}set(t,e,r,n,s){this.h0=0|t,this.h1=0|e,this.h2=0|r,this.h3=0|n,this.h4=0|s}process(t,e){for(let r=0;r<16;r++,e+=4)Cs[r]=t.getUint32(e,!0);let r=0|this.h0,n=r,s=0|this.h1,i=s,o=0|this.h2,a=o,c=0|this.h3,l=c,u=0|this.h4,h=u;for(let t=0;t<5;t++){const e=4-t,f=Ps[t],d=Is[t],p=Es[t],g=vs[t],m=Ns[t],y=Rs[t];for(let e=0;e<16;e++){const n=Ts(r+Os(t,s,o,c)+Cs[p[e]]+f,m[e])+u|0;r=u,u=c,c=0|Ts(o,10),o=s,s=n}for(let t=0;t<16;t++){const r=Ts(n+Os(e,i,a,l)+Cs[g[t]]+d,y[t])+h|0;n=h,h=l,l=0|Ts(a,10),a=i,i=r}}this.set(this.h1+o+l|0,this.h2+c+h|0,this.h3+u+n|0,this.h4+r+i|0,this.h0+s+a|0)}roundClean(){Cs.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}const Ss=Ft((()=>new xs));let Bs=!1;const Us=function(t){return Ss(t)};let Ds=Us;function Fs(t){const e=w(t,"data");return k(Ds(e))}Fs._=Us,Fs.lock=function(){Bs=!0},Fs.register=function(t){if(Bs)throw new TypeError("ripemd160 is locked");Ds=t},Object.freeze(Fs);let Ls=!1;const Ms=function(t,e,r,n,s){return function(t,e,r,n,s){const i={sha256:is,sha512:hs}[s];return f(null!=i,"invalid pbkdf2 algorithm","algorithm",s),Zn(i,t,e,{c:r,dkLen:n})}(t,e,r,n,s)};let Gs=Ms;function Hs(t,e,r,n,s){const i=w(t,"password"),o=w(e,"salt");return k(Gs(i,o,r,n,s))}Hs._=Ms,Hs.lock=function(){Ls=!0},Hs.register=function(t){if(Ls)throw new Error("pbkdf2 is locked");Gs=t},Object.freeze(Hs);let js=!1;const Qs=function(t){return new Uint8Array(function(t){h(null!=ds,"platform does not support secure random numbers","UNSUPPORTED_OPERATION",{operation:"randomBytes"}),f(Number.isInteger(t)&&t>0&&t<=1024,"invalid length","length",t);const e=new Uint8Array(t);return ds.getRandomValues(e),e}(t))};let _s=Qs;function Vs(t){return _s(t)}Vs._=Qs,Vs.lock=function(){js=!0},Vs.register=function(t){if(js)throw new Error("randomBytes is locked");_s=t},Object.freeze(Vs);const Ks=(t,e)=>t<<e|t>>>32-e;function Js(t,e,r,n,s,i){let o=t[e++]^r[n++],a=t[e++]^r[n++],c=t[e++]^r[n++],l=t[e++]^r[n++],u=t[e++]^r[n++],h=t[e++]^r[n++],f=t[e++]^r[n++],d=t[e++]^r[n++],p=t[e++]^r[n++],g=t[e++]^r[n++],m=t[e++]^r[n++],y=t[e++]^r[n++],w=t[e++]^r[n++],b=t[e++]^r[n++],A=t[e++]^r[n++],E=t[e++]^r[n++],v=o,k=a,N=c,R=l,P=u,I=h,T=f,O=d,C=p,x=g,S=m,B=y,U=w,D=b,F=A,L=E;for(let t=0;t<8;t+=2)P^=Ks(v+U|0,7),C^=Ks(P+v|0,9),U^=Ks(C+P|0,13),v^=Ks(U+C|0,18),x^=Ks(I+k|0,7),D^=Ks(x+I|0,9),k^=Ks(D+x|0,13),I^=Ks(k+D|0,18),F^=Ks(S+T|0,7),N^=Ks(F+S|0,9),T^=Ks(N+F|0,13),S^=Ks(T+N|0,18),R^=Ks(L+B|0,7),O^=Ks(R+L|0,9),B^=Ks(O+R|0,13),L^=Ks(B+O|0,18),k^=Ks(v+R|0,7),N^=Ks(k+v|0,9),R^=Ks(N+k|0,13),v^=Ks(R+N|0,18),T^=Ks(I+P|0,7),O^=Ks(T+I|0,9),P^=Ks(O+T|0,13),I^=Ks(P+O|0,18),B^=Ks(S+x|0,7),C^=Ks(B+S|0,9),x^=Ks(C+B|0,13),S^=Ks(x+C|0,18),U^=Ks(L+F|0,7),D^=Ks(U+L|0,9),F^=Ks(D+U|0,13),L^=Ks(F+D|0,18);s[i++]=o+v|0,s[i++]=a+k|0,s[i++]=c+N|0,s[i++]=l+R|0,s[i++]=u+P|0,s[i++]=h+I|0,s[i++]=f+T|0,s[i++]=d+O|0,s[i++]=p+C|0,s[i++]=g+x|0,s[i++]=m+S|0,s[i++]=y+B|0,s[i++]=w+U|0,s[i++]=b+D|0,s[i++]=A+F|0,s[i++]=E+L|0}function zs(t,e,r,n,s){let i=n+0,o=n+16*s;for(let n=0;n<16;n++)r[o+n]=t[e+16*(2*s-1)+n];for(let n=0;n<s;n++,i+=16,e+=16)Js(r,o,t,e,r,i),n>0&&(o+=16),Js(r,i,t,e+=16,r,o)}function qs(t,e,r){const n=Dt({dkLen:32,asyncTick:10,maxmem:1073742848},r),{N:s,r:i,p:o,dkLen:a,asyncTick:c,maxmem:l,onProgress:u}=n;if(ht(s),ht(i),ht(o),ht(a),ht(c),ht(l),void 0!==u&&"function"!=typeof u)throw new Error("progressCb should be function");const h=128*i,f=h/4;if(s<=1||0!=(s&s-1)||s>=2**(h/8)||s>2**32)throw new Error("Scrypt: N must be larger than 1, a power of 2, less than 2^(128 * r / 8) and less than 2^32");if(o<0||o>137438953440/h)throw new Error("Scrypt: p must be a positive integer less than or equal to ((2^32 - 1) * 32) / (128 * r)");if(a<0||a>137438953440)throw new Error("Scrypt: dkLen should be positive integer less than or equal to (2^32 - 1) * 32");const d=h*(s+o);if(d>l)throw new Error(`Scrypt: parameters too large, ${d} (128 * r * (N + p)) > ${l} (maxmem)`);const p=Zn(is,t,e,{c:1,dkLen:h*o}),g=It(p),m=It(new Uint8Array(h*s)),y=It(new Uint8Array(h));let w=()=>{};if(u){const t=2*s*o,e=Math.max(Math.floor(t/1e4),1);let r=0;w=()=>{r++,!u||r%e&&r!==t||u(r/t)}}return{N:s,r:i,p:o,dkLen:a,blockSize32:f,V:m,B32:g,B:p,tmp:y,blockMixCb:w,asyncTick:c}}function Ws(t,e,r,n,s){const i=Zn(is,t,r,{c:1,dkLen:e});return r.fill(0),n.fill(0),s.fill(0),i}let Ys=!1,Zs=!1;const Xs=async function(t,e,r,n,s,i,o){return await async function(t,e,r){const{N:n,r:s,p:i,dkLen:o,blockSize32:a,V:c,B32:l,B:u,tmp:h,blockMixCb:f,asyncTick:d}=qs(t,e,r);for(let t=0;t<i;t++){const e=a*t;for(let t=0;t<a;t++)c[t]=l[e+t];let r=0;await xt(n-1,d,(()=>{zs(c,r,c,r+=a,s),f()})),zs(c,(n-1)*a,l,e,s),f(),await xt(n,d,(()=>{const t=l[e+a-16]%n;for(let r=0;r<a;r++)h[r]=l[e+r]^c[t*a+r];zs(h,0,l,e,s),f()}))}return Ws(t,o,u,c,h)}(t,e,{N:r,r:n,p:s,dkLen:i,onProgress:o})},$s=function(t,e,r,n,s,i){return function(t,e,r){const{N:n,r:s,p:i,dkLen:o,blockSize32:a,V:c,B32:l,B:u,tmp:h,blockMixCb:f}=qs(t,e,r);for(let t=0;t<i;t++){const e=a*t;for(let t=0;t<a;t++)c[t]=l[e+t];for(let t=0,e=0;t<n-1;t++)zs(c,e,c,e+=a,s),f();zs(c,(n-1)*a,l,e,s),f();for(let t=0;t<n;t++){const t=l[e+a-16]%n;for(let r=0;r<a;r++)h[r]=l[e+r]^c[t*a+r];zs(h,0,l,e,s),f()}}return Ws(t,o,u,c,h)}(t,e,{N:r,r:n,p:s,dkLen:i})};let ti=Xs,ei=$s;async function ri(t,e,r,n,s,i,o){const a=w(t,"passwd"),c=w(e,"salt");return k(await ti(a,c,r,n,s,i,o))}function ni(t,e,r,n,s,i){const o=w(t,"passwd"),a=w(e,"salt");return k(ei(o,a,r,n,s,i))}ri._=Xs,ri.lock=function(){Zs=!0},ri.register=function(t){if(Zs)throw new Error("scrypt is locked");ti=t},Object.freeze(ri),ni._=$s,ni.lock=function(){Ys=!0},ni.register=function(t){if(Ys)throw new Error("scryptSync is locked");ei=t},Object.freeze(ni);const si=function(t){return ps("sha256").update(t).digest()},ii=function(t){return ps("sha512").update(t).digest()};let oi=si,ai=ii,ci=!1,li=!1;function ui(t){const e=w(t,"data");return k(oi(e))}function hi(t){const e=w(t,"data");return k(ai(e))}function fi(){ws.lock(),re.lock(),Hs.lock(),Vs.lock(),Fs.lock(),ri.lock(),ni.lock(),ui.lock(),hi.lock(),Vs.lock()}ui._=si,ui.lock=function(){ci=!0},ui.register=function(t){if(ci)throw new Error("sha256 is locked");oi=t},Object.freeze(ui),hi._=ii,hi.lock=function(){li=!0},hi.register=function(t){if(li)throw new Error("sha512 is locked");ai=t},Object.freeze(ui);const di=BigInt(0),pi=BigInt(1),gi=BigInt(2),mi=BigInt(27),yi=BigInt(28),wi=BigInt(35),bi={};function Ai(t){return O(X(t),32)}class Ei{#I;#T;#O;#C;get r(){return this.#I}set r(t){f(32===R(t),"invalid r","value",t),this.#I=k(t)}get s(){return this.#T}set s(t){f(32===R(t),"invalid s","value",t);const e=k(t);f(parseInt(e.substring(0,3))<8,"non-canonical s","value",e),this.#T=e}get v(){return this.#O}set v(t){const e=W(t,"value");f(27===e||28===e,"invalid v","v",t),this.#O=e}get networkV(){return this.#C}get legacyChainId(){const t=this.networkV;return null==t?null:Ei.getChainId(t)}get yParity(){return 27===this.v?0:1}get yParityAndS(){const t=w(this.s);return this.yParity&&(t[0]|=128),k(t)}get compactSerialized(){return N([this.r,this.yParityAndS])}get serialized(){return N([this.r,this.s,this.yParity?"0x1c":"0x1b"])}constructor(t,e,r,n){m(t,bi,"Signature"),this.#I=e,this.#T=r,this.#O=n,this.#C=null}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this.s}", yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const t=new Ei(bi,this.r,this.s,this.v);return this.networkV&&(t.#C=this.networkV),t}toJSON(){const t=this.networkV;return{_type:"signature",networkV:null!=t?t.toString():null,r:this.r,s:this.s,v:this.v}}static getChainId(t){const e=K(t,"v");return e==mi||e==yi?di:(f(e>=wi,"invalid EIP-155 v","v",t),(e-wi)/gi)}static getChainIdV(t,e){return K(t)*gi+BigInt(35+e-27)}static getNormalizedV(t){const e=K(t);return e===di||e===mi?27:e===pi||e===yi?28:(f(e>=wi,"invalid v","v",t),e&pi?27:28)}static from(t){function e(e,r){f(e,r,"signature",t)}if(null==t)return new Ei(bi,en,en,27);if("string"==typeof t){const r=w(t,"signature");if(64===r.length){const t=k(r.slice(0,32)),e=r.slice(32,64),n=128&e[0]?28:27;return e[0]&=127,new Ei(bi,t,k(e),n)}if(65===r.length){const t=k(r.slice(0,32)),n=r.slice(32,64);e(0==(128&n[0]),"non-canonical s");const s=Ei.getNormalizedV(r[64]);return new Ei(bi,t,k(n),s)}e(!1,"invalid raw signature length")}if(t instanceof Ei)return t.clone();const r=t.r;e(null!=r,"missing r");const n=Ai(r),s=function(t,r){if(null!=t)return Ai(t);if(null!=r){e(A(r,32),"invalid yParityAndS");const t=w(r);return t[0]&=127,k(t)}e(!1,"missing s")}(t.s,t.yParityAndS);e(0==(128&w(s)[0]),"non-canonical s");const{networkV:i,v:o}=function(t,r,n){if(null!=t){const e=K(t);return{networkV:e>=wi?e:void 0,v:Ei.getNormalizedV(e)}}if(null!=r)return e(A(r,32),"invalid yParityAndS"),{v:128&w(r)[0]?28:27};if(null!=n){switch(W(n,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}e(!1,"invalid yParity")}e(!1,"missing v")}(t.v,t.yParityAndS,t.yParity),a=new Ei(bi,n,s,o);return i&&(a.#C=i),e(null==t.yParity||W(t.yParity,"sig.yParity")===a.yParity,"yParity mismatch"),e(null==t.yParityAndS||t.yParityAndS===a.yParityAndS,"yParityAndS mismatch"),a}}BigInt(0);const vi=BigInt(1),ki=BigInt(2),Ni=t=>t instanceof Uint8Array,Ri=Array.from({length:256},((t,e)=>e.toString(16).padStart(2,"0")));function Pi(t){if(!Ni(t))throw new Error("Uint8Array expected");let e="";for(let r=0;r<t.length;r++)e+=Ri[t[r]];return e}function Ii(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);return BigInt(""===t?"0":`0x${t}`)}function Ti(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);const e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(e/2);for(let e=0;e<r.length;e++){const n=2*e,s=t.slice(n,n+2),i=Number.parseInt(s,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");r[e]=i}return r}function Oi(t){return Ii(Pi(t))}function Ci(t){if(!Ni(t))throw new Error("Uint8Array expected");return Ii(Pi(Uint8Array.from(t).reverse()))}function xi(t,e){return Ti(t.toString(16).padStart(2*e,"0"))}function Si(t,e){return xi(t,e).reverse()}function Bi(t,e,r){let n;if("string"==typeof e)try{n=Ti(e)}catch(r){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${r}`)}else{if(!Ni(e))throw new Error(`${t} must be hex string or Uint8Array`);n=Uint8Array.from(e)}const s=n.length;if("number"==typeof r&&s!==r)throw new Error(`${t} expected ${r} bytes, got ${s}`);return n}function Ui(...t){const e=new Uint8Array(t.reduce(((t,e)=>t+e.length),0));let r=0;return t.forEach((t=>{if(!Ni(t))throw new Error("Uint8Array expected");e.set(t,r),r+=t.length})),e}const Di=t=>(ki<<BigInt(t-1))-vi,Fi=t=>new Uint8Array(t),Li=t=>Uint8Array.from(t);function Mi(t,e,r){if("number"!=typeof t||t<2)throw new Error("hashLen must be a number");if("number"!=typeof e||e<2)throw new Error("qByteLen must be a number");if("function"!=typeof r)throw new Error("hmacFn must be a function");let n=Fi(t),s=Fi(t),i=0;const o=()=>{n.fill(1),s.fill(0),i=0},a=(...t)=>r(s,n,...t),c=(t=Fi())=>{s=a(Li([0]),t),n=a(),0!==t.length&&(s=a(Li([1]),t),n=a())},l=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let t=0;const r=[];for(;t<e;){n=a();const e=n.slice();r.push(e),t+=n.length}return Ui(...r)};return(t,e)=>{let r;for(o(),c(t);!(r=e(l()));)c();return o(),r}}const Gi={bigint:t=>"bigint"==typeof t,function:t=>"function"==typeof t,boolean:t=>"boolean"==typeof t,string:t=>"string"==typeof t,stringOrUint8Array:t=>"string"==typeof t||t instanceof Uint8Array,isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>"function"==typeof t&&Number.isSafeInteger(t.outputLen)};function Hi(t,e,r={}){const n=(e,r,n)=>{const s=Gi[r];if("function"!=typeof s)throw new Error(`Invalid validator "${r}", expected function`);const i=t[e];if(!(n&&void 0===i||s(i,t)))throw new Error(`Invalid param ${String(e)}=${i} (${typeof i}), expected ${r}`)};for(const[t,r]of Object.entries(e))n(t,r,!1);for(const[t,e]of Object.entries(r))n(t,e,!0);return t}const ji=BigInt(0),Qi=BigInt(1),_i=BigInt(2),Vi=BigInt(3),Ki=BigInt(4),Ji=BigInt(5),zi=BigInt(8);function qi(t,e){const r=t%e;return r>=ji?r:e+r}function Wi(t,e,r){if(r<=ji||e<ji)throw new Error("Expected power/modulo > 0");if(r===Qi)return ji;let n=Qi;for(;e>ji;)e&Qi&&(n=n*t%r),t=t*t%r,e>>=Qi;return n}function Yi(t,e,r){let n=t;for(;e-- >ji;)n*=n,n%=r;return n}function Zi(t,e){if(t===ji||e<=ji)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=qi(t,e),n=e,s=ji,i=Qi,o=Qi,a=ji;for(;r!==ji;){const t=n/r,e=n%r,c=s-o*t,l=i-a*t;n=r,r=e,s=o,i=a,o=c,a=l}if(n!==Qi)throw new Error("invert: does not exist");return qi(s,e)}BigInt(9),BigInt(16);const Xi=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function $i(t,e){const r=void 0!==e?e:t.toString(2).length;return{nBitLength:r,nByteLength:Math.ceil(r/8)}}function to(t){if("bigint"!=typeof t)throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function eo(t){const e=to(t);return e+Math.ceil(e/2)}const ro=BigInt(0),no=BigInt(1);function so(t){return Hi(t.Fp,Xi.reduce(((t,e)=>(t[e]="function",t)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"})),Hi(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...$i(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const{bytesToNumberBE:io,hexToBytes:oo}=e,ao={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(t){const{Err:e}=ao;if(t.length<2||2!==t[0])throw new e("Invalid signature integer tag");const r=t[1],n=t.subarray(2,r+2);if(!r||n.length!==r)throw new e("Invalid signature integer: wrong length");if(128&n[0])throw new e("Invalid signature integer: negative");if(0===n[0]&&!(128&n[1]))throw new e("Invalid signature integer: unnecessary leading zero");return{d:io(n),l:t.subarray(r+2)}},toSig(t){const{Err:e}=ao,r="string"==typeof t?oo(t):t;if(!(r instanceof Uint8Array))throw new Error("ui8a expected");let n=r.length;if(n<2||48!=r[0])throw new e("Invalid signature tag");if(r[1]!==n-2)throw new e("Invalid signature: incorrect length");const{d:s,l:i}=ao._parseInt(r.subarray(2)),{d:o,l:a}=ao._parseInt(i);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:s,s:o}},hexFromSig(t){const e=t=>8&Number.parseInt(t[0],16)?"00"+t:t,r=t=>{const e=t.toString(16);return 1&e.length?`0${e}`:e},n=e(r(t.s)),s=e(r(t.r)),i=n.length/2,o=s.length/2,a=r(i),c=r(o);return`30${r(o+i+4)}02${c}${s}02${a}${n}`}},co=BigInt(0),lo=BigInt(1),uo=(BigInt(2),BigInt(3));function ho(t){const e=function(t){const e=so(t);return Hi(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}(t),{Fp:r,n}=e,s=r.BYTES+1,i=2*r.BYTES+1;function o(t){return qi(t,n)}function a(t){return Zi(t,n)}const{ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:u,isWithinCurveOrder:h}=function(t){const e=function(t){const e=so(t);Hi(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:n,a:s}=e;if(r){if(!n.eql(s,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof r||"bigint"!=typeof r.beta||"function"!=typeof r.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}(t),{Fp:r}=e,n=e.toBytes||((t,e,n)=>{const s=e.toAffine();return Ui(Uint8Array.from([4]),r.toBytes(s.x),r.toBytes(s.y))}),s=e.fromBytes||(t=>{const e=t.subarray(1);return{x:r.fromBytes(e.subarray(0,r.BYTES)),y:r.fromBytes(e.subarray(r.BYTES,2*r.BYTES))}});function i(t){const{a:n,b:s}=e,i=r.sqr(t),o=r.mul(i,t);return r.add(r.add(o,r.mul(t,n)),s)}if(!r.eql(r.sqr(e.Gy),i(e.Gx)))throw new Error("bad generator point: equation left != right");function o(t){return"bigint"==typeof t&&co<t&&t<e.n}function a(t){if(!o(t))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(t){const{allowedPrivateKeyLengths:r,nByteLength:n,wrapPrivateKey:s,n:i}=e;if(r&&"bigint"!=typeof t){if(t instanceof Uint8Array&&(t=Pi(t)),"string"!=typeof t||!r.includes(t.length))throw new Error("Invalid key");t=t.padStart(2*n,"0")}let o;try{o="bigint"==typeof t?t:Oi(Bi("private key",t,n))}catch(e){throw new Error(`private key must be ${n} bytes, hex or bigint, not ${typeof t}`)}return s&&(o=qi(o,i)),a(o),o}const l=new Map;function u(t){if(!(t instanceof h))throw new Error("ProjectivePoint expected")}class h{constructor(t,e,n){if(this.px=t,this.py=e,this.pz=n,null==t||!r.isValid(t))throw new Error("x required");if(null==e||!r.isValid(e))throw new Error("y required");if(null==n||!r.isValid(n))throw new Error("z required")}static fromAffine(t){const{x:e,y:n}=t||{};if(!t||!r.isValid(e)||!r.isValid(n))throw new Error("invalid affine point");if(t instanceof h)throw new Error("projective point not allowed");const s=t=>r.eql(t,r.ZERO);return s(e)&&s(n)?h.ZERO:new h(e,n,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(t){const e=r.invertBatch(t.map((t=>t.pz)));return t.map(((t,r)=>t.toAffine(e[r]))).map(h.fromAffine)}static fromHex(t){const e=h.fromAffine(s(Bi("pointHex",t)));return e.assertValidity(),e}static fromPrivateKey(t){return h.BASE.multiply(c(t))}_setWindowSize(t){this._WINDOW_SIZE=t,l.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!r.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:t,y:n}=this.toAffine();if(!r.isValid(t)||!r.isValid(n))throw new Error("bad point: x or y not FE");const s=r.sqr(n),o=i(t);if(!r.eql(s,o))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:t}=this.toAffine();if(r.isOdd)return!r.isOdd(t);throw new Error("Field doesn\'t support isOdd")}equals(t){u(t);const{px:e,py:n,pz:s}=this,{px:i,py:o,pz:a}=t,c=r.eql(r.mul(e,a),r.mul(i,s)),l=r.eql(r.mul(n,a),r.mul(o,s));return c&&l}negate(){return new h(this.px,r.neg(this.py),this.pz)}double(){const{a:t,b:n}=e,s=r.mul(n,uo),{px:i,py:o,pz:a}=this;let c=r.ZERO,l=r.ZERO,u=r.ZERO,f=r.mul(i,i),d=r.mul(o,o),p=r.mul(a,a),g=r.mul(i,o);return g=r.add(g,g),u=r.mul(i,a),u=r.add(u,u),c=r.mul(t,u),l=r.mul(s,p),l=r.add(c,l),c=r.sub(d,l),l=r.add(d,l),l=r.mul(c,l),c=r.mul(g,c),u=r.mul(s,u),p=r.mul(t,p),g=r.sub(f,p),g=r.mul(t,g),g=r.add(g,u),u=r.add(f,f),f=r.add(u,f),f=r.add(f,p),f=r.mul(f,g),l=r.add(l,f),p=r.mul(o,a),p=r.add(p,p),f=r.mul(p,g),c=r.sub(c,f),u=r.mul(p,d),u=r.add(u,u),u=r.add(u,u),new h(c,l,u)}add(t){u(t);const{px:n,py:s,pz:i}=this,{px:o,py:a,pz:c}=t;let l=r.ZERO,f=r.ZERO,d=r.ZERO;const p=e.a,g=r.mul(e.b,uo);let m=r.mul(n,o),y=r.mul(s,a),w=r.mul(i,c),b=r.add(n,s),A=r.add(o,a);b=r.mul(b,A),A=r.add(m,y),b=r.sub(b,A),A=r.add(n,i);let E=r.add(o,c);return A=r.mul(A,E),E=r.add(m,w),A=r.sub(A,E),E=r.add(s,i),l=r.add(a,c),E=r.mul(E,l),l=r.add(y,w),E=r.sub(E,l),d=r.mul(p,A),l=r.mul(g,w),d=r.add(l,d),l=r.sub(y,d),d=r.add(y,d),f=r.mul(l,d),y=r.add(m,m),y=r.add(y,m),w=r.mul(p,w),A=r.mul(g,A),y=r.add(y,w),w=r.sub(m,w),w=r.mul(p,w),A=r.add(A,w),m=r.mul(y,A),f=r.add(f,m),m=r.mul(E,A),l=r.mul(b,l),l=r.sub(l,m),m=r.mul(b,y),d=r.mul(E,d),d=r.add(d,m),new h(l,f,d)}subtract(t){return this.add(t.negate())}is0(){return this.equals(h.ZERO)}wNAF(t){return d.wNAFCached(this,l,t,(t=>{const e=r.invertBatch(t.map((t=>t.pz)));return t.map(((t,r)=>t.toAffine(e[r]))).map(h.fromAffine)}))}multiplyUnsafe(t){const n=h.ZERO;if(t===co)return n;if(a(t),t===lo)return this;const{endo:s}=e;if(!s)return d.unsafeLadder(this,t);let{k1neg:i,k1:o,k2neg:c,k2:l}=s.splitScalar(t),u=n,f=n,p=this;for(;o>co||l>co;)o&lo&&(u=u.add(p)),l&lo&&(f=f.add(p)),p=p.double(),o>>=lo,l>>=lo;return i&&(u=u.negate()),c&&(f=f.negate()),f=new h(r.mul(f.px,s.beta),f.py,f.pz),u.add(f)}multiply(t){a(t);let n,s,i=t;const{endo:o}=e;if(o){const{k1neg:t,k1:e,k2neg:a,k2:c}=o.splitScalar(i);let{p:l,f:u}=this.wNAF(e),{p:f,f:p}=this.wNAF(c);l=d.constTimeNegate(t,l),f=d.constTimeNegate(a,f),f=new h(r.mul(f.px,o.beta),f.py,f.pz),n=l.add(f),s=u.add(p)}else{const{p:t,f:e}=this.wNAF(i);n=t,s=e}return h.normalizeZ([n,s])[0]}multiplyAndAddUnsafe(t,e,r){const n=h.BASE,s=(t,e)=>e!==co&&e!==lo&&t.equals(n)?t.multiply(e):t.multiplyUnsafe(e),i=s(this,e).add(s(t,r));return i.is0()?void 0:i}toAffine(t){const{px:e,py:n,pz:s}=this,i=this.is0();null==t&&(t=i?r.ONE:r.inv(s));const o=r.mul(e,t),a=r.mul(n,t),c=r.mul(s,t);if(i)return{x:r.ZERO,y:r.ZERO};if(!r.eql(c,r.ONE))throw new Error("invZ was invalid");return{x:o,y:a}}isTorsionFree(){const{h:t,isTorsionFree:r}=e;if(t===lo)return!0;if(r)return r(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:t,clearCofactor:r}=e;return t===lo?this:r?r(h,this):this.multiplyUnsafe(e.h)}toRawBytes(t=!0){return this.assertValidity(),n(h,this,t)}toHex(t=!0){return Pi(this.toRawBytes(t))}}h.BASE=new h(e.Gx,e.Gy,r.ONE),h.ZERO=new h(r.ZERO,r.ONE,r.ZERO);const f=e.nBitLength,d=function(t,e){const r=(t,e)=>{const r=e.negate();return t?r:e},n=t=>({windows:Math.ceil(e/t)+1,windowSize:2**(t-1)});return{constTimeNegate:r,unsafeLadder(e,r){let n=t.ZERO,s=e;for(;r>ro;)r&no&&(n=n.add(s)),s=s.double(),r>>=no;return n},precomputeWindow(t,e){const{windows:r,windowSize:s}=n(e),i=[];let o=t,a=o;for(let t=0;t<r;t++){a=o,i.push(a);for(let t=1;t<s;t++)a=a.add(o),i.push(a);o=a.double()}return i},wNAF(e,s,i){const{windows:o,windowSize:a}=n(e);let c=t.ZERO,l=t.BASE;const u=BigInt(2**e-1),h=2**e,f=BigInt(e);for(let t=0;t<o;t++){const e=t*a;let n=Number(i&u);i>>=f,n>a&&(n-=h,i+=no);const o=e,d=e+Math.abs(n)-1,p=t%2!=0,g=n<0;0===n?l=l.add(r(p,s[o])):c=c.add(r(g,s[d]))}return{p:c,f:l}},wNAFCached(t,e,r,n){const s=t._WINDOW_SIZE||1;let i=e.get(t);return i||(i=this.precomputeWindow(t,s),1!==s&&e.set(t,n(i))),this.wNAF(s,i,r)}}}(h,e.endo?Math.ceil(f/2):f);return{CURVE:e,ProjectivePoint:h,normPrivateKeyToScalar:c,weierstrassEquation:i,isWithinCurveOrder:o}}({...e,toBytes(t,e,n){const s=e.toAffine(),i=r.toBytes(s.x),o=Ui;return n?o(Uint8Array.from([e.hasEvenY()?2:3]),i):o(Uint8Array.from([4]),i,r.toBytes(s.y))},fromBytes(t){const e=t.length,n=t[0],o=t.subarray(1);if(e!==s||2!==n&&3!==n){if(e===i&&4===n)return{x:r.fromBytes(o.subarray(0,r.BYTES)),y:r.fromBytes(o.subarray(r.BYTES,2*r.BYTES))};throw new Error(`Point of length ${e} was invalid. Expected ${s} compressed bytes or ${i} uncompressed bytes`)}{const t=Oi(o);if(!(co<(a=t)&&a<r.ORDER))throw new Error("Point is not on curve");const e=u(t);let s=r.sqrt(e);return 1==(1&n)!=((s&lo)===lo)&&(s=r.neg(s)),{x:t,y:s}}var a}}),f=t=>Pi(xi(t,e.nByteLength));function d(t){return t>n>>lo}const p=(t,e,r)=>Oi(t.slice(e,r));class g{constructor(t,e,r){this.r=t,this.s=e,this.recovery=r,this.assertValidity()}static fromCompact(t){const r=e.nByteLength;return t=Bi("compactSignature",t,2*r),new g(p(t,0,r),p(t,r,2*r))}static fromDER(t){const{r:e,s:r}=ao.toSig(Bi("DER",t));return new g(e,r)}assertValidity(){if(!h(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!h(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(t){return new g(this.r,this.s,t)}recoverPublicKey(t){const{r:n,s,recovery:i}=this,l=b(Bi("msgHash",t));if(null==i||![0,1,2,3].includes(i))throw new Error("recovery id invalid");const u=2===i||3===i?n+e.n:n;if(u>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");const h=0==(1&i)?"02":"03",d=c.fromHex(h+f(u)),p=a(u),g=o(-l*p),m=o(s*p),y=c.BASE.multiplyAndAddUnsafe(d,g,m);if(!y)throw new Error("point at infinify");return y.assertValidity(),y}hasHighS(){return d(this.s)}normalizeS(){return this.hasHighS()?new g(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return Ti(this.toDERHex())}toDERHex(){return ao.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Ti(this.toCompactHex())}toCompactHex(){return f(this.r)+f(this.s)}}const m={isValidPrivateKey(t){try{return l(t),!0}catch(t){return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{const t=eo(e.n);return function(t,e,r=!1){const n=t.length,s=to(e),i=eo(e);if(n<16||n<i||n>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${n}`);const o=qi(r?Oi(t):Ci(t),e-Qi)+Qi;return r?Si(o,s):xi(o,s)}(e.randomBytes(t),e.n)},precompute:(t=8,e=c.BASE)=>(e._setWindowSize(t),e.multiply(BigInt(3)),e)};function y(t){const e=t instanceof Uint8Array,r="string"==typeof t,n=(e||r)&&t.length;return e?n===s||n===i:r?n===2*s||n===2*i:t instanceof c}const w=e.bits2int||function(t){const r=Oi(t),n=8*t.length-e.nBitLength;return n>0?r>>BigInt(n):r},b=e.bits2int_modN||function(t){return o(w(t))},A=Di(e.nBitLength);function E(t){if("bigint"!=typeof t)throw new Error("bigint expected");if(!(co<=t&&t<A))throw new Error(`bigint expected < 2^${e.nBitLength}`);return xi(t,e.nByteLength)}const v={lowS:e.lowS,prehash:!1},k={lowS:e.lowS,prehash:!1};return c.BASE._setWindowSize(8),{CURVE:e,getPublicKey:function(t,e=!0){return c.fromPrivateKey(t).toRawBytes(e)},getSharedSecret:function(t,e,r=!0){if(y(t))throw new Error("first arg must be private key");if(!y(e))throw new Error("second arg must be public key");return c.fromHex(e).multiply(l(t)).toRawBytes(r)},sign:function(t,n,s=v){const{seed:i,k2sig:u}=function(t,n,s=v){if(["recovered","canonical"].some((t=>t in s)))throw new Error("sign() legacy options not supported");const{hash:i,randomBytes:u}=e;let{lowS:f,prehash:p,extraEntropy:m}=s;null==f&&(f=!0),t=Bi("msgHash",t),p&&(t=Bi("prehashed msgHash",i(t)));const y=b(t),A=l(n),k=[E(A),E(y)];if(null!=m){const t=!0===m?u(r.BYTES):m;k.push(Bi("extraEntropy",t))}const N=Ui(...k),R=y;return{seed:N,k2sig:function(t){const e=w(t);if(!h(e))return;const r=a(e),n=c.BASE.multiply(e).toAffine(),s=o(n.x);if(s===co)return;const i=o(r*o(R+s*A));if(i===co)return;let l=(n.x===s?0:2)|Number(n.y&lo),u=i;return f&&d(i)&&(u=function(t){return d(t)?o(-t):t}(i),l^=1),new g(s,u,l)}}}(t,n,s),f=e;return Mi(f.hash.outputLen,f.nByteLength,f.hmac)(i,u)},verify:function(t,r,n,s=k){const i=t;if(r=Bi("msgHash",r),n=Bi("publicKey",n),"strict"in s)throw new Error("options.strict was renamed to lowS");const{lowS:l,prehash:u}=s;let h,f;try{if("string"==typeof i||i instanceof Uint8Array)try{h=g.fromDER(i)}catch(t){if(!(t instanceof ao.Err))throw t;h=g.fromCompact(i)}else{if("object"!=typeof i||"bigint"!=typeof i.r||"bigint"!=typeof i.s)throw new Error("PARSE");{const{r:t,s:e}=i;h=new g(t,e)}}f=c.fromHex(n)}catch(t){if("PARSE"===t.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(l&&h.hasHighS())return!1;u&&(r=e.hash(r));const{r:d,s:p}=h,m=b(r),y=a(p),w=o(m*y),A=o(d*y),E=c.BASE.multiplyAndAddUnsafe(f,w,A)?.toAffine();return!!E&&o(E.x)===d},ProjectivePoint:c,Signature:g,utils:m}}function fo(t){return{hash:t,hmac:(e,...r)=>Yn(t,e,function(...t){const e=new Uint8Array(t.reduce(((t,e)=>t+e.length),0));let r=0;return t.forEach((t=>{if(!Pt(t))throw new Error("Uint8Array expected");e.set(t,r),r+=t.length})),e}(...r)),randomBytes:Lt}}BigInt(4);const po=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),go=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),mo=BigInt(1),yo=BigInt(2),wo=(t,e)=>(t+e/yo)/e;const bo=function(t,e,r=!1,n={}){if(t<=ji)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:s,nByteLength:i}=$i(t,e);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=function(t){if(t%Ki===Vi){const e=(t+Qi)/Ki;return function(t,r){const n=t.pow(r,e);if(!t.eql(t.sqr(n),r))throw new Error("Cannot find square root");return n}}if(t%zi===Ji){const e=(t-Ji)/zi;return function(t,r){const n=t.mul(r,_i),s=t.pow(n,e),i=t.mul(r,s),o=t.mul(t.mul(i,_i),s),a=t.mul(i,t.sub(o,t.ONE));if(!t.eql(t.sqr(a),r))throw new Error("Cannot find square root");return a}}return function(t){const e=(t-Qi)/_i;let r,n,s;for(r=t-Qi,n=0;r%_i===ji;r/=_i,n++);for(s=_i;s<t&&Wi(s,e,t)!==t-Qi;s++);if(1===n){const e=(t+Qi)/Ki;return function(t,r){const n=t.pow(r,e);if(!t.eql(t.sqr(n),r))throw new Error("Cannot find square root");return n}}const i=(r+Qi)/_i;return function(t,o){if(t.pow(o,e)===t.neg(t.ONE))throw new Error("Cannot find square root");let a=n,c=t.pow(t.mul(t.ONE,s),r),l=t.pow(o,i),u=t.pow(o,r);for(;!t.eql(u,t.ONE);){if(t.eql(u,t.ZERO))return t.ZERO;let e=1;for(let r=t.sqr(u);e<a&&!t.eql(r,t.ONE);e++)r=t.sqr(r);const r=t.pow(c,Qi<<BigInt(a-e-1));c=t.sqr(r),l=t.mul(l,r),u=t.mul(u,c),a=e}return l}}(t)}(t),a=Object.freeze({ORDER:t,BITS:s,BYTES:i,MASK:Di(s),ZERO:ji,ONE:Qi,create:e=>qi(e,t),isValid:e=>{if("bigint"!=typeof e)throw new Error("Invalid field element: expected bigint, got "+typeof e);return ji<=e&&e<t},is0:t=>t===ji,isOdd:t=>(t&Qi)===Qi,neg:e=>qi(-e,t),eql:(t,e)=>t===e,sqr:e=>qi(e*e,t),add:(e,r)=>qi(e+r,t),sub:(e,r)=>qi(e-r,t),mul:(e,r)=>qi(e*r,t),pow:(t,e)=>function(t,e,r){if(r<ji)throw new Error("Expected power > 0");if(r===ji)return t.ONE;if(r===Qi)return e;let n=t.ONE,s=e;for(;r>ji;)r&Qi&&(n=t.mul(n,s)),s=t.sqr(s),r>>=Qi;return n}(a,t,e),div:(e,r)=>qi(e*Zi(r,t),t),sqrN:t=>t*t,addN:(t,e)=>t+e,subN:(t,e)=>t-e,mulN:(t,e)=>t*e,inv:e=>Zi(e,t),sqrt:n.sqrt||(t=>o(a,t)),invertBatch:t=>function(t,e){const r=new Array(e.length),n=e.reduce(((e,n,s)=>t.is0(n)?e:(r[s]=e,t.mul(e,n))),t.ONE),s=t.inv(n);return e.reduceRight(((e,n,s)=>t.is0(n)?e:(r[s]=t.mul(e,r[s]),t.mul(e,n))),s),r}(a,t),cmov:(t,e,r)=>r?e:t,toBytes:t=>r?Si(t,i):xi(t,i),fromBytes:t=>{if(t.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${t.length}`);return r?Ci(t):Oi(t)}});return Object.freeze(a)}(po,void 0,void 0,{sqrt:function(t){const e=po,r=BigInt(3),n=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,h=Yi(u,r,e)*u%e,f=Yi(h,r,e)*u%e,d=Yi(f,yo,e)*l%e,p=Yi(d,s,e)*d%e,g=Yi(p,i,e)*p%e,m=Yi(g,a,e)*g%e,y=Yi(m,c,e)*m%e,w=Yi(y,a,e)*g%e,b=Yi(w,r,e)*u%e,A=Yi(b,o,e)*p%e,E=Yi(A,n,e)*l%e,v=Yi(E,yo,e);if(!bo.eql(bo.sqr(v),t))throw new Error("Cannot find square root");return v}}),Ao=function(t,e){const r=e=>ho({...t,...fo(e)});return Object.freeze({...r(e),create:r})}({a:BigInt(0),b:BigInt(7),Fp:bo,n:go,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=go,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-mo*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=r,o=BigInt("0x100000000000000000000000000000000"),a=wo(i*t,e),c=wo(-n*t,e);let l=qi(t-a*r-c*s,e),u=qi(-a*n-c*i,e);const h=l>o,f=u>o;if(h&&(l=e-l),f&&(u=e-u),l>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:h,k1:l,k2neg:f,k2:u}}}},is);BigInt(0),Ao.ProjectivePoint;class Eo{#x;constructor(t){f(32===R(t),"invalid private key","privateKey","[REDACTED]"),this.#x=k(t)}get privateKey(){return this.#x}get publicKey(){return Eo.computePublicKey(this.#x)}get compressedPublicKey(){return Eo.computePublicKey(this.#x,!0)}sign(t){f(32===R(t),"invalid digest length","digest",t);const e=Ao.sign(b(t),b(this.#x),{lowS:!0});return Ei.from({r:Z(e.r,32),s:Z(e.s,32),v:e.recovery?28:27})}computeSharedSecret(t){const e=Eo.computePublicKey(t);return k(Ao.getSharedSecret(b(this.#x),w(e),!1))}static computePublicKey(t,e){let r=w(t,"key");if(32===r.length)return k(Ao.getPublicKey(r,!!e));if(64===r.length){const t=new Uint8Array(65);t[0]=4,t.set(r,1),r=t}return k(Ao.ProjectivePoint.fromHex(r).toRawBytes(e))}static recoverPublicKey(t,e){f(32===R(t),"invalid digest length","digest",t);const r=Ei.from(e);let n=Ao.Signature.fromCompact(b(N([r.r,r.s])));n=n.addRecoveryBit(r.yParity);const s=n.recoverPublicKey(b(t));return f(null!=s,"invalid signautre for digest","signature",e),"0x"+s.toHex(!1)}static addPoints(t,e,r){const n=Ao.ProjectivePoint.fromHex(Eo.computePublicKey(t).substring(2)),s=Ao.ProjectivePoint.fromHex(Eo.computePublicKey(e).substring(2));return"0x"+n.add(s).toHex(!!r)}}var vo="AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI";const ko=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),No=4;function Ro(t){return function(t){let e=0;return()=>t[e++]}(function(t){let e=0;function r(){return t[e++]<<8|t[e++]}let n=r(),s=1,i=[0,1];for(let t=1;t<n;t++)i.push(s+=r());let o=r(),a=e;e+=o;let c=0,l=0;function u(){return 0==c&&(l=l<<8|t[e++],c=8),l>>--c&1}const h=2**31,f=h>>>1,d=h-1;let p=0;for(let t=0;t<31;t++)p=p<<1|u();let g=[],m=0,y=h;for(;;){let t=Math.floor(((p-m+1)*s-1)/y),e=0,r=n;for(;r-e>1;){let n=e+r>>>1;t<i[n]?r=n:e=n}if(0==e)break;g.push(e);let o=m+Math.floor(y*i[e]/s),a=m+Math.floor(y*i[e+1]/s)-1;for(;0==((o^a)&f);)p=p<<1&d|u(),o=o<<1&d,a=a<<1&d|1;for(;o&~a&536870912;)p=p&f|p<<1&d>>>1|u(),o=o<<1^f,a=(a^f)<<1|f|1;m=o,y=1+a-o}let w=n-4;return g.map((e=>{switch(e-w){case 3:return w+65792+(t[a++]<<16|t[a++]<<8|t[a++]);case 2:return w+256+(t[a++]<<8|t[a++]);case 1:return w+t[a++];default:return e-1}}))}(function(t){let e=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach(((t,r)=>e[t.charCodeAt(0)]=r));let r=t.length,n=new Uint8Array(6*r>>3);for(let s=0,i=0,o=0,a=0;s<r;s++)a=a<<6|e[t.charCodeAt(s)],o+=6,o>=8&&(n[i++]=a>>(o-=8));return n}(t)))}function Po(t){return 1&t?~t>>1:t>>1}function Io(t,e){let r=Array(t);for(let n=0,s=0;n<t;n++)r[n]=s+=Po(e());return r}function To(t,e=0){let r=[];for(;;){let n=t(),s=t();if(!s)break;e+=n;for(let t=0;t<s;t++)r.push(e+t);e+=s+1}return r}function Oo(t){return xo((()=>{let e=To(t);if(e.length)return e}))}function Co(t){let e=[];for(;;){let r=t();if(0==r)break;e.push(Bo(r,t))}for(;;){let r=t()-1;if(r<0)break;e.push(Uo(r,t))}return e.flat()}function xo(t){let e=[];for(;;){let r=t(e.length);if(!r)break;e.push(r)}return e}function So(t,e,r){let n=Array(t).fill().map((()=>[]));for(let s=0;s<e;s++)Io(t,r).forEach(((t,e)=>n[e].push(t)));return n}function Bo(t,e){let r=1+e(),n=e(),s=xo(e);return So(s.length,1+t,e).flatMap(((t,e)=>{let[i,...o]=t;return Array(s[e]).fill().map(((t,e)=>{let s=e*n;return[i+e*r,o.map((t=>t+s))]}))}))}function Uo(t,e){return So(1+e(),1+t,e).map((t=>[t[0],t.slice(1)]))}function Do(t){return`{${function(t){return t.toString(16).toUpperCase().padStart(2,"0")}(t)}}`}function Fo(t){let e=t.length;if(e<4096)return String.fromCodePoint(...t);let r=[];for(let n=0;n<e;)r.push(String.fromCodePoint(...t.slice(n,n+=4096)));return r.join("")}function Lo(t,e){let r=t.length,n=r-e.length;for(let s=0;0==n&&s<r;s++)n=t[s]-e[s];return n}var Mo="AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g";const Go=44032,Ho=4352,jo=4449,Qo=4519,_o=28,Vo=21*_o,Ko=Go+19*Vo,Jo=Ho+19,zo=jo+21,qo=Qo+_o;function Wo(t){return t>>24&255}function Yo(t){return 16777215&t}let Zo,Xo,$o,ta;function ea(t){return t>=Go&&t<Ko}function ra(t,e){if(t>=Ho&&t<Jo&&e>=jo&&e<zo)return Go+(t-Ho)*Vo+(e-jo)*_o;if(ea(t)&&e>Qo&&e<qo&&(t-Go)%_o==0)return t+(e-Qo);{let r=ta.get(t);return r&&(r=r.get(e),r)?r:-1}}function na(t){Zo||function(){let t=Ro(Mo);Zo=new Map(Oo(t).flatMap(((t,e)=>t.map((t=>[t,e+1<<24]))))),Xo=new Set(To(t)),$o=new Map,ta=new Map;for(let[e,r]of Co(t)){if(!Xo.has(e)&&2==r.length){let[t,n]=r,s=ta.get(t);s||(s=new Map,ta.set(t,s)),s.set(n,e)}$o.set(e,r.reverse())}}();let e=[],r=[],n=!1;function s(t){let r=Zo.get(t);r&&(n=!0,t|=r),e.push(t)}for(let n of t)for(;;){if(n<128)e.push(n);else if(ea(n)){let t=n-Go,e=t%Vo/_o|0,r=t%_o;s(Ho+(t/Vo|0)),s(jo+e),r>0&&s(Qo+r)}else{let t=$o.get(n);t?r.push(...t):s(n)}if(!r.length)break;n=r.pop()}if(n&&e.length>1){let t=Wo(e[0]);for(let r=1;r<e.length;r++){let n=Wo(e[r]);if(0==n||t<=n){t=n;continue}let s=r-1;for(;;){let r=e[s+1];if(e[s+1]=e[s],e[s]=r,!s)break;if(t=Wo(e[--s]),t<=n)break}t=Wo(e[r])}}return e}function sa(t){return na(t).map(Yo)}function ia(t){return function(t){let e=[],r=[],n=-1,s=0;for(let i of t){let t=Wo(i),o=Yo(i);if(-1==n)0==t?n=o:e.push(o);else if(s>0&&s>=t)0==t?(e.push(n,...r),r.length=0,n=o):r.push(o),s=t;else{let i=ra(n,o);i>=0?n=i:0==s&&0==t?(e.push(n),n=o):(r.push(o),s=t)}}return n>=0&&e.push(n,...r),e}(na(t))}const oa=45,aa=".",ca=65039,la=1,ua=t=>Array.from(t);function ha(t,e){return t.P.has(e)||t.Q.has(e)}class fa extends Array{get is_emoji(){return!0}}let da,pa,ga,ma,ya,wa,ba,Aa,Ea,va,ka,Na;function Ra(){if(da)return;let t=Ro(vo);const e=()=>To(t),r=()=>new Set(e());da=new Map(Co(t)),pa=r(),ga=e(),ma=new Set(e().map((t=>ga[t]))),ga=new Set(ga),ya=r(),wa=r();let n=Oo(t),s=t();const i=()=>new Set(e().flatMap((t=>n[t])).concat(e()));ba=xo((e=>{let r=xo(t).map((t=>t+96));if(r.length){let n=e>=s;return r[0]-=32,r=Fo(r),n&&(r=`Restricted[${r}]`),{N:r,P:i(),Q:i(),M:!t(),R:n}}})),Aa=r(),Ea=new Map;let o=e().concat(ua(Aa)).sort(((t,e)=>t-e));o.forEach(((e,r)=>{let n=t(),s=o[r]=n?o[r-n]:{V:[],M:new Map};s.V.push(e),Aa.has(e)||Ea.set(e,s)}));for(let{V:t,M:e}of new Set(Ea.values())){let r=[];for(let e of t){let t=ba.filter((t=>ha(t,e))),n=r.find((({G:e})=>t.some((t=>e.has(t)))));n||(n={G:new Set,V:[]},r.push(n)),n.V.push(e),t.forEach((t=>n.G.add(t)))}let n=r.flatMap((t=>ua(t.G)));for(let{G:t,V:s}of r){let r=new Set(n.filter((e=>!t.has(e))));for(let t of s)e.set(t,r)}}let a=new Set,c=new Set;const l=t=>a.has(t)?c.add(t):a.add(t);for(let t of ba){for(let e of t.P)l(e);for(let e of t.Q)l(e)}for(let t of a)Ea.has(t)||c.has(t)||Ea.set(t,la);va=new Set(ua(a).concat(ua(sa(a)))),ka=function(t){let e=[],r=To(t);return function t({S:r,B:n},s,i){if(!(4&r&&i===s[s.length-1])){2&r&&(i=s[s.length-1]),1&r&&e.push(s);for(let e of n)for(let r of e.Q)t(e,[...s,r],i)}}(function e(n){return{S:t(),B:xo((()=>{let n=To(t).map((t=>r[t]));if(n.length)return e(n)})),Q:n}}([]),[]),e}(t).map((t=>fa.from(t))).sort(Lo),Na=new Map;for(let t of ka){let e=[Na];for(let r of t){let t=e.map((t=>{let e=t.get(r);return e||(e=new Map,t.set(r,e)),e}));r===ca?e.push(...t):e=t}for(let r of e)r.V=t}}function Pa(t){return(Oa(t)?"":`${Ia(Ta([t]))} `)+Do(t)}function Ia(t){return`"${t}"`}function Ta(t,e=Do){let r=[];var n;n=t[0],Ra(),ga.has(n)&&r.push("");let s=0,i=t.length;for(let n=0;n<i;n++){let i=t[n];Oa(i)&&(r.push(Fo(t.slice(s,n))),r.push(e(i)),s=n+1)}return r.push(Fo(t.slice(s,i))),r.join("")}function Oa(t){return Ra(),ya.has(t)}function Ca(t,e,r){if(!t)return[];Ra();let n=0;return t.split(aa).map((t=>{let s=function(t){let e=[];for(let r=0,n=t.length;r<n;){let n=t.codePointAt(r);r+=n<65536?1:2,e.push(n)}return e}(t),i={input:s,offset:n};n+=s.length+1;try{let t,n=i.tokens=function(t,e,r){let n=[],s=[];for(t=t.slice().reverse();t.length;){let i=Da(t);if(i)s.length&&(n.push(e(s)),s=[]),n.push(r(i));else{let e=t.pop();if(va.has(e))s.push(e);else{let t=da.get(e);if(t)s.push(...t);else if(!pa.has(e))throw xa(e)}}}return s.length&&n.push(e(s)),n}(s,e,r),o=n.length;if(!o)throw new Error("empty label");let a=i.output=n.flat();if(function(t){for(let e=t.lastIndexOf(95);e>0;)if(95!==t[--e])throw new Error("underscore allowed only at start")}(a),!(i.emoji=o>1||n[0].is_emoji)&&a.every((t=>t<128)))!function(t){if(t.length>=4&&t[2]==oa&&t[3]==oa)throw new Error(`invalid label extension: "${Fo(t.slice(0,4))}"`)}(a),t="ASCII";else{let e=n.flatMap((t=>t.is_emoji?[]:t));if(e.length){if(ga.has(a[0]))throw Ba("leading combining mark");for(let t=1;t<o;t++){let e=n[t];if(!e.is_emoji&&ga.has(e[0]))throw Ba(`emoji + combining mark: "${Fo(n[t-1])} + ${Ta([e[0]])}"`)}!function(t){let e=t[0],r=ko.get(e);if(r)throw Ba(`leading ${r}`);let n=t.length,s=-1;for(let i=1;i<n;i++){e=t[i];let n=ko.get(e);if(n){if(s==i)throw Ba(`${r} + ${n}`);s=i+1,r=n}}if(s==n)throw Ba(`trailing ${r}`)}(a);let r=ua(new Set(e)),[s]=function(t){let e=ba;for(let r of t){let t=e.filter((t=>ha(t,r)));if(!t.length)throw ba.some((t=>ha(t,r)))?Sa(e[0],r):xa(r);if(e=t,1==t.length)break}return e}(r);!function(t,e){for(let r of e)if(!ha(t,r))throw Sa(t,r);if(t.M){let t=sa(e);for(let e=1,r=t.length;e<r;e++)if(ma.has(t[e])){let n=e+1;for(let s;n<r&&ma.has(s=t[n]);n++)for(let r=e;r<n;r++)if(t[r]==s)throw new Error(`duplicate non-spacing marks: ${Pa(s)}`);if(n-e>No)throw new Error(`excessive non-spacing marks: ${Ia(Ta(t.slice(e-1,n)))} (${n-e}/${No})`);e=n}}}(s,e),function(t,e){let r,n=[];for(let t of e){let e=Ea.get(t);if(e===la)return;if(e){let n=e.M.get(t);if(r=r?r.filter((t=>n.has(t))):ua(n),!r.length)return}else n.push(t)}if(r)for(let e of r)if(n.every((t=>ha(e,t))))throw new Error(`whole-script confusable: ${t.N}/${e.N}`)}(s,r),t=s.N}else t="Emoji"}i.type=t}catch(t){i.error=t}return i}))}function xa(t){return new Error(`disallowed character: ${Pa(t)}`)}function Sa(t,e){let r=Pa(e),n=ba.find((t=>t.P.has(e)));return n&&(r=`${n.N} ${r}`),new Error(`illegal mixture: ${t.N} + ${r}`)}function Ba(t){return new Error(`illegal placement: ${t}`)}function Ua(t){return t.filter((t=>t!=ca))}function Da(t,e){let r,n=Na,s=t.length;for(;s&&(n=n.get(t[--s]),n);){let{V:i}=n;i&&(r=i,e&&e.push(...t.slice(s).reverse()),t.length=s)}return r}const Fa=new Uint8Array(32);function La(t){return f(0!==t.length,"invalid ENS name; empty component","comp",t),t}function Ma(t){const e=U(Ga(t)),r=[];if(0===t.length)return r;let n=0;for(let t=0;t<e.length;t++)46===e[t]&&(r.push(La(e.slice(n,t))),n=t+1);return f(n<e.length,"invalid ENS name; empty component","name",t),r.push(La(e.slice(n))),r}function Ga(t){try{if(0===t.length)throw new Error("empty label");return function(t){return function(t){return t.map((({input:e,error:r,output:n})=>{if(r){let n=r.message;throw new Error(1==t.length?n:`Invalid label ${Ia(Ta(e))}: ${n}`)}return Fo(n)})).join(aa)}(Ca(t,ia,Ua))}(t)}catch(e){f(!1,`invalid ENS name (${e.message})`,"name",t)}}function Ha(t){try{return 0!==Ma(t).length}catch(t){}return!1}function ja(t){f("string"==typeof t,"invalid ENS name; not a string","name",t),f(t.length,"invalid ENS name (empty label)","name",t);let e=Fa;const r=Ma(t);for(;r.length;)e=re(N([e,re(r.pop())]));return k(e)}function Qa(t){return k(N(Ma(t).map((t=>{if(t.length>63)throw new Error("invalid DNS encoded entry; length exceeds 63 bytes");const e=new Uint8Array(t.length+1);return e.set(t,1),e[0]=e.length-1,e}))))+"00"}function _a(t){let e;return e="string"==typeof t?Eo.computePublicKey(t,!1):t.publicKey,ue(re("0x"+e.substring(4)).substring(26))}function Va(t,e){return _a(Eo.recoverPublicKey(t,e))}function Ka(t){return"string"==typeof t&&(t=U(t)),re(N([U(nn),U(String(t.length)),t]))}function Ja(t,e){return Va(Ka(t),e)}Fa.fill(0);const za=new RegExp("^bytes([0-9]+)$"),qa=new RegExp("^(u?int)([0-9]*)$"),Wa=new RegExp("^(.*)\\\\[([0-9]*)\\\\]$");function Ya(t,e,r){switch(t){case"address":return w(r?O(e,32):ue(e));case"string":return U(e);case"bytes":return w(e);case"bool":return e=e?"0x01":"0x00",w(r?O(e,32):e)}let n=t.match(qa);if(n){let s="int"===n[1],i=parseInt(n[2]||"256");return f((!n[2]||n[2]===String(i))&&i%8==0&&0!==i&&i<=256,"invalid number type","type",t),r&&(i=256),s&&(e=_(e,i)),w(O(X(e),i/8))}if(n=t.match(za),n){const s=parseInt(n[1]);return f(String(s)===n[1]&&0!==s&&s<=32,"invalid bytes type","type",t),f(R(e)===s,`invalid value for ${t}`,"value",e),r?w(C(e,32)):e}if(n=t.match(Wa),n&&Array.isArray(e)){const r=n[1];f(parseInt(n[2]||String(e.length))===e.length,`invalid array length for ${t}`,"value",e);const s=[];return e.forEach((function(t){s.push(Ya(r,t,!0))})),w(N(s))}f(!1,"invalid type","type",t)}function Za(t,e){f(t.length===e.length,"wrong number of values; expected ${ types.length }","values",e);const r=[];return t.forEach((function(t,n){r.push(Ya(t,e[n]))})),k(N(r))}function Xa(t,e){return re(Za(t,e))}function $a(t,e){return ui(Za(t,e))}const tc=new Uint8Array(32);tc.fill(0);const ec=BigInt(-1),rc=BigInt(0),nc=BigInt(1),sc=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),ic=Z(nc,32),oc=Z(rc,32),ac={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},cc=["name","version","chainId","verifyingContract","salt"];function lc(t){return function(e){return f("string"==typeof e,`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const uc={name:lc("name"),version:lc("version"),chainId:function(t){const e=K(t,"domain.chainId");return f(e>=0,"invalid chain ID","domain.chainId",t),Number.isSafeInteger(e)?Number(e):$(e)},verifyingContract:function(t){try{return ue(t).toLowerCase()}catch(t){}f(!1,\'invalid domain value "verifyingContract"\',"domain.verifyingContract",t)},salt:function(t){const e=w(t,"domain.salt");return f(32===e.length,\'invalid domain value "salt"\',"domain.salt",t),k(e)}};function hc(t){{const e=t.match(/^(u?)int(\\d*)$/);if(e){const r=""===e[1],n=parseInt(e[2]||"256");f(n%8==0&&0!==n&&n<=256&&(null==e[2]||e[2]===String(n)),"invalid numeric width","type",t);const s=V(sc,r?n-1:n),i=r?(s+nc)*ec:rc;return function(e){const n=K(e,"value");return f(n>=i&&n<=s,`value out-of-bounds for ${t}`,"value",n),Z(r?_(n,256):n,32)}}}{const e=t.match(/^bytes(\\d+)$/);if(e){const r=parseInt(e[1]);return f(0!==r&&r<=32&&e[1]===String(r),"invalid bytes width","type",t),function(e){return f(w(e).length===r,`invalid length for ${t}`,"value",e),function(t){const e=w(t),r=e.length%32;return r?N([e,tc.slice(r)]):k(e)}(e)}}}switch(t){case"address":return function(t){return O(ue(t),32)};case"bool":return function(t){return t?ic:oc};case"bytes":return function(t){return re(t)};case"string":return function(t){return Ue(t)}}return null}function fc(t,e){return`${t}(${e.map((({name:t,type:e})=>e+" "+t)).join(",")})`}class dc{primaryType;#S;get types(){return JSON.parse(this.#S)}#B;#U;constructor(t){this.#S=JSON.stringify(t),this.#B=new Map,this.#U=new Map;const e=new Map,r=new Map,n=new Map;Object.keys(t).forEach((t=>{e.set(t,new Set),r.set(t,[]),n.set(t,new Set)}));for(const n in t){const s=new Set;for(const i of t[n]){f(!s.has(i.name),`duplicate variable name ${JSON.stringify(i.name)} in ${JSON.stringify(n)}`,"types",t),s.add(i.name);const o=i.type.match(/^([^\\x5b]*)(\\x5b|$)/)[1]||null;f(o!==n,`circular type reference to ${JSON.stringify(o)}`,"types",t),hc(o)||(f(r.has(o),`unknown type ${JSON.stringify(o)}`,"types",t),r.get(o).push(n),e.get(n).add(o))}}const s=Array.from(r.keys()).filter((t=>0===r.get(t).length));f(0!==s.length,"missing primary type","types",t),f(1===s.length,`ambiguous primary types or unused types: ${s.map((t=>JSON.stringify(t))).join(", ")}`,"types",t),o(this,{primaryType:s[0]}),function s(i,o){f(!o.has(i),`circular type reference to ${JSON.stringify(i)}`,"types",t),o.add(i);for(const t of e.get(i))if(r.has(t)){s(t,o);for(const e of o)n.get(e).add(t)}o.delete(i)}(this.primaryType,new Set);for(const[e,r]of n){const n=Array.from(r);n.sort(),this.#B.set(e,fc(e,t[e])+n.map((e=>fc(e,t[e]))).join(""))}}getEncoder(t){let e=this.#U.get(t);return e||(e=this.#D(t),this.#U.set(t,e)),e}#D(t){{const e=hc(t);if(e)return e}const e=t.match(/^(.*)(\\x5b(\\d*)\\x5d)$/);if(e){const t=e[1],r=this.getEncoder(t);return n=>{f(!e[3]||parseInt(e[3])===n.length,`array length mismatch; expected length ${parseInt(e[3])}`,"value",n);let s=n.map(r);return this.#B.has(t)&&(s=s.map(re)),re(N(s))}}const r=this.types[t];if(r){const e=Ue(this.#B.get(t));return t=>{const n=r.map((({name:e,type:r})=>{const n=this.getEncoder(r)(t[e]);return this.#B.has(r)?re(n):n}));return n.unshift(e),N(n)}}f(!1,`unknown type: ${t}`,"type",t)}encodeType(t){const e=this.#B.get(t);return f(e,`unknown type: ${JSON.stringify(t)}`,"name",t),e}encodeData(t,e){return this.getEncoder(t)(e)}hashStruct(t,e){return re(this.encodeData(t,e))}encode(t){return this.encodeData(this.primaryType,t)}hash(t){return this.hashStruct(this.primaryType,t)}_visit(t,e,r){if(hc(t))return r(t,e);const n=t.match(/^(.*)(\\x5b(\\d*)\\x5d)$/);if(n)return f(!n[3]||parseInt(n[3])===e.length,`array length mismatch; expected length ${parseInt(n[3])}`,"value",e),e.map((t=>this._visit(n[1],t,r)));const s=this.types[t];if(s)return s.reduce(((t,{name:n,type:s})=>(t[n]=this._visit(s,e[n],r),t)),{});f(!1,`unknown type: ${t}`,"type",t)}visit(t,e){return this._visit(this.primaryType,t,e)}static from(t){return new dc(t)}static getPrimaryType(t){return dc.from(t).primaryType}static hashStruct(t,e,r){return dc.from(e).hashStruct(t,r)}static hashDomain(t){const e=[];for(const r in t){if(null==t[r])continue;const n=ac[r];f(n,`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",t),e.push({name:r,type:n})}return e.sort(((t,e)=>cc.indexOf(t.name)-cc.indexOf(e.name))),dc.hashStruct("EIP712Domain",{EIP712Domain:e},t)}static encode(t,e,r){return N(["0x1901",dc.hashDomain(t),dc.from(e).hash(r)])}static hash(t,e,r){return re(dc.encode(t,e,r))}static async resolveNames(t,e,r,n){t=Object.assign({},t);for(const e in t)null==t[e]&&delete t[e];const s={};t.verifyingContract&&!A(t.verifyingContract,20)&&(s[t.verifyingContract]="0x");const i=dc.from(e);i.visit(r,((t,e)=>("address"!==t||A(e,20)||(s[e]="0x"),e)));for(const t in s)s[t]=await n(t);return t.verifyingContract&&s[t.verifyingContract]&&(t.verifyingContract=s[t.verifyingContract]),{domain:t,value:r=i.visit(r,((t,e)=>"address"===t&&s[e]?s[e]:e))}}static getPayload(t,e,r){dc.hashDomain(t);const n={},s=[];cc.forEach((e=>{const r=t[e];null!=r&&(n[e]=uc[e](r),s.push({name:e,type:ac[e]}))}));const i=dc.from(e),o=Object.assign({},e);return f(null==o.EIP712Domain,"types must not contain EIP712Domain type","types.EIP712Domain",e),o.EIP712Domain=s,i.encode(r),{types:o,domain:n,primaryType:i.primaryType,message:i.visit(r,((t,e)=>{if(t.match(/^bytes(\\d*)/))return k(w(e));if(t.match(/^u?int/))return K(e).toString();switch(t){case"address":return e.toLowerCase();case"bool":return!!e;case"string":return f("string"==typeof e,"invalid string","value",e),e}f(!1,"unsupported type","type",t)}))}}}function pc(t,e,r,n){return Va(dc.hash(t,e,r),n)}function gc(t){t=atob(t);const e=new Uint8Array(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return w(e)}function mc(t){const e=w(t);let r="";for(let t=0;t<e.length;t++)r+=String.fromCharCode(e[t]);return btoa(r)}function yc(t){return async function(t,e){const r=t.url.split(":")[0].toLowerCase();let n;if(h("http"===r||"https"===r,`unsupported protocol ${r}`,"UNSUPPORTED_OPERATION",{info:{protocol:r},operation:"request"}),h("https"===r||!t.credentials||t.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"}),e){const t=new AbortController;n=t.signal,e.addListener((()=>{t.abort()}))}const s={method:t.method,headers:new Headers(Array.from(t)),body:t.body||void 0,signal:n},i=await fetch(t.url,s),o={};i.headers.forEach(((t,e)=>{o[e.toLowerCase()]=t}));const a=await i.arrayBuffer(),c=null==a?null:new Uint8Array(a);return{statusCode:i.status,statusMessage:i.statusText,headers:o,body:c}}}yc();let wc=yc();const bc=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),Ac=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let Ec=!1;async function vc(t,e){try{const e=t.match(bc);if(!e)throw new Error("invalid data");return new Oc(200,"OK",{"content-type":e[1]||"text/plain"},e[2]?gc(e[3]):U(e[3].replace(/%([0-9a-f][0-9a-f])/gi,((t,e)=>String.fromCharCode(parseInt(e,16))))))}catch(e){return new Oc(599,"BAD REQUEST (invalid data: URI)",{},null,new Tc(t))}}function kc(t){return async function(e,r){try{const r=e.match(Ac);if(!r)throw new Error("invalid link");return new Tc(`${t}${r[2]}`)}catch(t){return new Oc(599,"BAD REQUEST (invalid IPFS URI)",{},null,new Tc(e))}}}const Nc={data:vc,ipfs:kc("https://gateway.ipfs.io/ipfs/")},Rc=new WeakMap;class Pc{#F;#L;constructor(t){this.#F=[],this.#L=!1,Rc.set(t,(()=>{if(!this.#L){this.#L=!0;for(const t of this.#F)setTimeout((()=>{t()}),0);this.#F=[]}}))}addListener(t){h(!this.#L,"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),this.#F.push(t)}get cancelled(){return this.#L}checkSignal(){h(!this.cancelled,"cancelled","CANCELLED",{})}}function Ic(t){if(null==t)throw new Error("missing signal; should not happen");return t.checkSignal(),t}class Tc{#M;#G;#H;#j;#Q;#_;#V;#K;#J;#z;#q;#W;#Y;#Z;#X;get url(){return this.#_}set url(t){this.#_=String(t)}get body(){return null==this.#V?null:new Uint8Array(this.#V)}set body(t){if(null==t)this.#V=void 0,this.#K=void 0;else if("string"==typeof t)this.#V=U(t),this.#K="text/plain";else if(t instanceof Uint8Array)this.#V=t,this.#K="application/octet-stream";else{if("object"!=typeof t)throw new Error("invalid body");this.#V=U(JSON.stringify(t)),this.#K="application/json"}}hasBody(){return null!=this.#V}get method(){return this.#j?this.#j:this.hasBody()?"POST":"GET"}set method(t){null==t&&(t=""),this.#j=String(t).toUpperCase()}get headers(){const t=Object.assign({},this.#H);return this.#J&&(t.authorization=`Basic ${mc(U(this.#J))}`),this.allowGzip&&(t["accept-encoding"]="gzip"),null==t["content-type"]&&this.#K&&(t["content-type"]=this.#K),this.body&&(t["content-length"]=String(this.body.length)),t}getHeader(t){return this.headers[t.toLowerCase()]}setHeader(t,e){this.#H[String(t).toLowerCase()]=String(e)}clearHeaders(){this.#H={}}[Symbol.iterator](){const t=this.headers,e=Object.keys(t);let r=0;return{next:()=>{if(r<e.length){const n=e[r++];return{value:[n,t[n]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return this.#J||null}setCredentials(t,e){f(!t.match(/:/),"invalid basic authentication username","username","[REDACTED]"),this.#J=`${t}:${e}`}get allowGzip(){return this.#G}set allowGzip(t){this.#G=!!t}get allowInsecureAuthentication(){return!!this.#M}set allowInsecureAuthentication(t){this.#M=!!t}get timeout(){return this.#Q}set timeout(t){f(t>=0,"timeout must be non-zero","timeout",t),this.#Q=t}get preflightFunc(){return this.#z||null}set preflightFunc(t){this.#z=t}get processFunc(){return this.#q||null}set processFunc(t){this.#q=t}get retryFunc(){return this.#W||null}set retryFunc(t){this.#W=t}get getUrlFunc(){return this.#X||wc}set getUrlFunc(t){this.#X=t}constructor(t){this.#_=String(t),this.#M=!1,this.#G=!0,this.#H={},this.#j="",this.#Q=3e5,this.#Z={slotInterval:250,maxAttempts:12},this.#X=null}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${this.#V?k(this.#V):"null"}>`}setThrottleParams(t){null!=t.slotInterval&&(this.#Z.slotInterval=t.slotInterval),null!=t.maxAttempts&&(this.#Z.maxAttempts=t.maxAttempts)}async#$(t,e,r,n,s){if(t>=this.#Z.maxAttempts)return s.makeServerError("exceeded maximum retry limit");h(Cc()<=e,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:n}),r>0&&await function(t){return new Promise((e=>setTimeout(e,t)))}(r);let i=this.clone();const o=(i.url.split(":")[0]||"").toLowerCase();if(o in Nc){const t=await Nc[o](i.url,Ic(n.#Y));if(t instanceof Oc){let e=t;if(this.processFunc){Ic(n.#Y);try{e=await this.processFunc(i,e)}catch(t){null!=t.throttle&&"number"==typeof t.stall||e.makeServerError("error in post-processing function",t).assertOk()}}return e}i=t}this.preflightFunc&&(i=await this.preflightFunc(i));const a=await this.getUrlFunc(i,Ic(n.#Y));let c=new Oc(a.statusCode,a.statusMessage,a.headers,a.body,n);if(301===c.statusCode||302===c.statusCode){try{const r=c.headers.location||"";return i.redirect(r).#$(t+1,e,0,n,c)}catch(t){}return c}if(429===c.statusCode&&(null==this.retryFunc||await this.retryFunc(i,c,t))){const r=c.headers["retry-after"];let s=this.#Z.slotInterval*Math.trunc(Math.random()*Math.pow(2,t));return"string"==typeof r&&r.match(/^[1-9][0-9]*$/)&&(s=parseInt(r)),i.clone().#$(t+1,e,s,n,c)}if(this.processFunc){Ic(n.#Y);try{c=await this.processFunc(i,c)}catch(r){null!=r.throttle&&"number"==typeof r.stall||c.makeServerError("error in post-processing function",r).assertOk();let s=this.#Z.slotInterval*Math.trunc(Math.random()*Math.pow(2,t));return r.stall>=0&&(s=r.stall),i.clone().#$(t+1,e,s,n,c)}}return c}send(){return h(null==this.#Y,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),this.#Y=new Pc(this),this.#$(0,Cc()+this.timeout,0,this,new Oc(0,"",{},null,this))}cancel(){h(null!=this.#Y,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const t=Rc.get(this);if(!t)throw new Error("missing signal; should not happen");t()}redirect(t){const e=this.url.split(":")[0].toLowerCase(),r=t.split(":")[0].toLowerCase();h("GET"===this.method&&("https"!==e||"http"!==r)&&t.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(t)})`});const n=new Tc(t);return n.method="GET",n.allowGzip=this.allowGzip,n.timeout=this.timeout,n.#H=Object.assign({},this.#H),this.#V&&(n.#V=new Uint8Array(this.#V)),n.#K=this.#K,n}clone(){const t=new Tc(this.url);return t.#j=this.#j,this.#V&&(t.#V=this.#V),t.#K=this.#K,t.#H=Object.assign({},this.#H),t.#J=this.#J,this.allowGzip&&(t.allowGzip=!0),t.timeout=this.timeout,this.allowInsecureAuthentication&&(t.allowInsecureAuthentication=!0),t.#z=this.#z,t.#q=this.#q,t.#W=this.#W,t.#X=this.#X,t}static lockConfig(){Ec=!0}static getGateway(t){return Nc[t.toLowerCase()]||null}static registerGateway(t,e){if("http"===(t=t.toLowerCase())||"https"===t)throw new Error(`cannot intercept ${t}; use registerGetUrl`);if(Ec)throw new Error("gateways locked");Nc[t]=e}static registerGetUrl(t){if(Ec)throw new Error("gateways locked");wc=t}static createGetUrlFunc(t){return yc()}static createDataGateway(){return vc}static createIpfsGatewayFunc(t){return kc(t)}}class Oc{#tt;#et;#H;#V;#rt;#nt;toString(){return`<FetchResponse status=${this.statusCode} body=${this.#V?k(this.#V):"null"}>`}get statusCode(){return this.#tt}get statusMessage(){return this.#et}get headers(){return Object.assign({},this.#H)}get body(){return null==this.#V?null:new Uint8Array(this.#V)}get bodyText(){try{return null==this.#V?"":D(this.#V)}catch(t){h(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch(t){h(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const t=this.headers,e=Object.keys(t);let r=0;return{next:()=>{if(r<e.length){const n=e[r++];return{value:[n,t[n]],done:!1}}return{value:void 0,done:!0}}}}constructor(t,e,r,n,s){this.#tt=t,this.#et=e,this.#H=Object.keys(r).reduce(((t,e)=>(t[e.toLowerCase()]=String(r[e]),t)),{}),this.#V=null==n?null:new Uint8Array(n),this.#rt=s||null,this.#nt={message:""}}makeServerError(t,e){let r;r=t?`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${t})`:`CLIENT ESCALATED SERVER ERROR (${t=`${this.statusCode} ${this.statusMessage}`})`;const n=new Oc(599,r,this.headers,this.body,this.#rt||void 0);return n.#nt={message:t,error:e},n}throwThrottleError(t,e){null==e?e=-1:f(Number.isInteger(e)&&e>=0,"invalid stall timeout","stall",e);const r=new Error(t||"throttling requests");throw o(r,{stall:e,throttle:!0}),r}getHeader(t){return this.headers[t.toLowerCase()]}hasBody(){return null!=this.#V}get request(){return this.#rt}ok(){return""===this.#nt.message&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:t,error:e}=this.#nt;""===t&&(t=`server response ${this.statusCode} ${this.statusMessage}`),h(!1,t,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:e})}}function Cc(){return(new Date).getTime()}const xc=new Set;function Sc(t){xc.has(t)||(xc.add(t),console.log("========= NOTICE ========="),console.log(`Request-Rate Exceeded for ${t} (this message will not be repeated)`),console.log(""),console.log("The default API keys for each service are provided as a highly-throttled,"),console.log("community resource for low-traffic projects and early prototyping."),console.log(""),console.log("While your application will continue to function, we highly recommended"),console.log("signing up for your own API keys to improve performance, increase your"),console.log("request rate/limit and enable other perks, such as metrics and advanced APIs."),console.log(""),console.log("For more details: https://docs.ethers.org/api-keys/"),console.log("=========================="))}class Bc{name;constructor(t){o(this,{name:t})}clone(){return new Bc(this.name)}}class Uc extends Bc{effectiveBlock;txBase;txCreate;txDataZero;txDataNonzero;txAccessListStorageKey;txAccessListAddress;constructor(t,e){null==t&&(t=0),super(`org.ethers.network.plugins.GasCost#${t||0}`);const r={effectiveBlock:t};function n(t,n){let s=(e||{})[t];null==s&&(s=n),f("number"==typeof s,`invalud value for ${t}`,"costs",e),r[t]=s}n("txBase",21e3),n("txCreate",32e3),n("txDataZero",4),n("txDataNonzero",16),n("txAccessListStorageKey",1900),n("txAccessListAddress",2400),o(this,r)}clone(){return new Uc(this.effectiveBlock,this)}}class Dc extends Bc{address;targetNetwork;constructor(t,e){super("org.ethers.plugins.network.Ens"),o(this,{address:t||"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",targetNetwork:null==e?1:e})}clone(){return new Dc(this.address,this.targetNetwork)}}class Fc extends Bc{#st;get feeDataFunc(){return this.#st}constructor(t){super("org.ethers.plugins.network.FeeData"),this.#st=t}async getFeeData(t){return await this.#st(t)}clone(){return new Fc(this.#st)}}class Lc extends Bc{#_;#it;get url(){return this.#_}get processFunc(){return this.#it}constructor(t,e){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin"),this.#_=t,this.#it=e}clone(){return this}}const Mc=new Map;class Gc{#ot;#at;#ct;constructor(t,e){this.#ot=t,this.#at=K(e),this.#ct=new Map}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return this.#ot}set name(t){this.#ot=t}get chainId(){return this.#at}set chainId(t){this.#at=K(t,"chainId")}matches(t){if(null==t)return!1;if("string"==typeof t){try{return this.chainId===K(t)}catch(t){}return this.name===t}if("number"==typeof t||"bigint"==typeof t){try{return this.chainId===K(t)}catch(t){}return!1}if("object"==typeof t){if(null!=t.chainId){try{return this.chainId===K(t.chainId)}catch(t){}return!1}return null!=t.name&&this.name===t.name}return!1}get plugins(){return Array.from(this.#ct.values())}attachPlugin(t){if(this.#ct.get(t.name))throw new Error(`cannot replace existing plugin: ${t.name} `);return this.#ct.set(t.name,t.clone()),this}getPlugin(t){return this.#ct.get(t)||null}getPlugins(t){return this.plugins.filter((e=>e.name.split("#")[0]===t))}clone(){const t=new Gc(this.name,this.chainId);return this.plugins.forEach((e=>{t.attachPlugin(e.clone())})),t}computeIntrinsicGas(t){const e=this.getPlugin("org.ethers.plugins.network.GasCost")||new Uc;let r=e.txBase;if(null==t.to&&(r+=e.txCreate),t.data)for(let n=2;n<t.data.length;n+=2)"00"===t.data.substring(n,n+2)?r+=e.txDataZero:r+=e.txDataNonzero;if(t.accessList){const n=on(t.accessList);for(const t in n)r+=e.txAccessListAddress+e.txAccessListStorageKey*n[t].storageKeys.length}return r}static from(t){if(function(){function t(t,e,r){const n=function(){const n=new Gc(t,e);return null!=r.ensNetwork&&n.attachPlugin(new Dc(null,r.ensNetwork)),n.attachPlugin(new Uc),(r.plugins||[]).forEach((t=>{n.attachPlugin(t)})),n};Gc.register(t,n),Gc.register(e,n),r.altNames&&r.altNames.forEach((t=>{Gc.register(t,n)}))}Qc||(Qc=!0,t("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),t("ropsten",3,{ensNetwork:3}),t("rinkeby",4,{ensNetwork:4}),t("goerli",5,{ensNetwork:5}),t("kovan",42,{ensNetwork:42}),t("sepolia",11155111,{ensNetwork:11155111}),t("classic",61,{}),t("classicKotti",6,{}),t("arbitrum",42161,{ensNetwork:1}),t("arbitrum-goerli",421613,{}),t("base",8453,{ensNetwork:1}),t("base-goerli",84531,{}),t("base-sepolia",84532,{}),t("bnb",56,{ensNetwork:1}),t("bnbt",97,{}),t("linea",59144,{ensNetwork:1}),t("linea-goerli",59140,{}),t("matic",137,{ensNetwork:1,plugins:[jc("https://gasstation.polygon.technology/v2")]}),t("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[jc("https://gasstation-testnet.polygon.technology/v2")]}),t("optimism",10,{ensNetwork:1,plugins:[]}),t("optimism-goerli",420,{}),t("xdai",100,{ensNetwork:1}))}(),null==t)return Gc.from("mainnet");if("number"==typeof t&&(t=BigInt(t)),"string"==typeof t||"bigint"==typeof t){const e=Mc.get(t);if(e)return e();if("bigint"==typeof t)return new Gc("unknown",t);f(!1,"unknown network","network",t)}if("function"==typeof t.clone)return t.clone();if("object"==typeof t){f("string"==typeof t.name&&"number"==typeof t.chainId,"invalid network object name or chainId","network",t);const e=new Gc(t.name,t.chainId);return(t.ensAddress||null!=t.ensNetwork)&&e.attachPlugin(new Dc(t.ensAddress,t.ensNetwork)),e}f(!1,"invalid network","network",t)}static register(t,e){"number"==typeof t&&(t=BigInt(t));const r=Mc.get(t);r&&f(!1,`conflicting network for ${JSON.stringify(r.name)}`,"nameOrChainId",t),Mc.set(t,e)}}function Hc(t,e){const r=String(t);if(!r.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${t}`);const n=r.split(".");if(1===n.length&&n.push(""),2!==n.length)throw new Error(`invalid gwei value: ${t}`);for(;n[1].length<e;)n[1]+="0";if(n[1].length>9){let t=BigInt(n[1].substring(0,9));n[1].substring(9).match(/^0+$/)||t++,n[1]=t.toString()}return BigInt(n[0]+n[1])}function jc(t){return new Lc(t,(async(t,e,r)=>{let n;r.setHeader("User-Agent","ethers");try{const[e,s]=await Promise.all([r.send(),t()]);n=e;const i=n.bodyJson.standard;return{gasPrice:s.gasPrice,maxFeePerGas:Hc(i.maxFee,9),maxPriorityFeePerGas:Hc(i.maxPriorityFee,9)}}catch(t){h(!1,`error encountered with polygon gas station (${JSON.stringify(r.url)})`,"SERVER_ERROR",{request:r,response:n,error:t})}}))}let Qc=!1;function _c(t){let e=t.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function Vc(t,e,r){let n=0;for(let s=0;s<r;s++)n=256*n+t[e+s];return n}function Kc(t,e,r,n){const s=[];for(;r<e+1+n;){const i=Jc(t,r);s.push(i.result),h((r+=i.consumed)<=e+1+n,"child data too short","BUFFER_OVERRUN",{buffer:t,length:n,offset:e})}return{consumed:1+n,result:s}}function Jc(t,e){h(0!==t.length,"data too short","BUFFER_OVERRUN",{buffer:t,length:0,offset:1});const r=e=>{h(e<=t.length,"data short segment too short","BUFFER_OVERRUN",{buffer:t,length:t.length,offset:e})};if(t[e]>=248){const n=t[e]-247;r(e+1+n);const s=Vc(t,e+1,n);return r(e+1+n+s),Kc(t,e,e+1+n,n+s)}if(t[e]>=192){const n=t[e]-192;return r(e+1+n),Kc(t,e,e+1,n)}if(t[e]>=184){const n=t[e]-183;r(e+1+n);const s=Vc(t,e+1,n);return r(e+1+n+s),{consumed:1+n+s,result:k(t.slice(e+1+n,e+1+n+s))}}if(t[e]>=128){const n=t[e]-128;return r(e+1+n),{consumed:1+n,result:k(t.slice(e+1,e+1+n))}}return{consumed:1,result:_c(t[e])}}function zc(t){const e=w(t,"data"),r=Jc(e,0);return f(r.consumed===e.length,"unexpected junk after rlp payload","data",t),r.result}const qc=BigInt(0),Wc=BigInt(2),Yc=BigInt(27),Zc=BigInt(28),Xc=BigInt(35),$c=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function tl(t){return"0x"===t?null:ue(t)}function el(t,e){try{return on(t)}catch(r){f(!1,r.message,e,t)}}function rl(t,e){return"0x"===t?0:W(t,e)}function nl(t,e){if("0x"===t)return qc;const r=K(t,e);return f(r<=$c,"value exceeds uint size",e,r),r}function sl(t,e){const r=K(t,"value"),n=X(r);return f(n.length<=32,"value too large",`tx.${e}`,r),n}function il(t){return on(t).map((t=>[t.address,t.storageKeys]))}function ol(t,e){const r=[sl(t.nonce||0,"nonce"),sl(t.gasPrice||0,"gasPrice"),sl(t.gasLimit||0,"gasLimit"),null!=t.to?ue(t.to):"0x",sl(t.value||0,"value"),t.data||"0x"];let n=qc;if(t.chainId!=qc)n=K(t.chainId,"tx.chainId"),f(!e||null==e.networkV||e.legacyChainId===n,"tx.chainId/sig.v mismatch","sig",e);else if(t.signature){const e=t.signature.legacyChainId;null!=e&&(n=e)}if(!e)return n!==qc&&(r.push(X(n)),r.push("0x"),r.push("0x")),Qr(r);let s=BigInt(27+e.yParity);return n!==qc?s=Ei.getChainIdV(n,e.v):BigInt(e.v)!==s&&f(!1,"tx.chainId/sig.v mismatch","sig",e),r.push(X(s)),r.push(X(e.r)),r.push(X(e.s)),Qr(r)}function al(t,e){let r;try{if(r=rl(e[0],"yParity"),0!==r&&1!==r)throw new Error("bad yParity")}catch(t){f(!1,"invalid yParity","yParity",e[0])}const n=O(e[1],32),s=O(e[2],32),i=Ei.from({r:n,s,yParity:r});t.signature=i}function cl(t,e){const r=[sl(t.chainId||0,"chainId"),sl(t.nonce||0,"nonce"),sl(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),sl(t.maxFeePerGas||0,"maxFeePerGas"),sl(t.gasLimit||0,"gasLimit"),null!=t.to?ue(t.to):"0x",sl(t.value||0,"value"),t.data||"0x",il(t.accessList||[])];return e&&(r.push(sl(e.yParity,"yParity")),r.push(X(e.r)),r.push(X(e.s))),N(["0x02",Qr(r)])}function ll(t,e){const r=[sl(t.chainId||0,"chainId"),sl(t.nonce||0,"nonce"),sl(t.gasPrice||0,"gasPrice"),sl(t.gasLimit||0,"gasLimit"),null!=t.to?ue(t.to):"0x",sl(t.value||0,"value"),t.data||"0x",il(t.accessList||[])];return e&&(r.push(sl(e.yParity,"recoveryParam")),r.push(X(e.r)),r.push(X(e.s))),N(["0x01",Qr(r)])}class ul{#lt;#ut;#e;#ht;#ft;#dt;#pt;#gt;#mt;#at;#yt;#wt;get type(){return this.#lt}set type(t){switch(t){case null:this.#lt=null;break;case 0:case"legacy":this.#lt=0;break;case 1:case"berlin":case"eip-2930":this.#lt=1;break;case 2:case"london":case"eip-1559":this.#lt=2;break;default:f(!1,"unsupported transaction type","type",t)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559"}return null}get to(){return this.#ut}set to(t){this.#ut=null==t?null:ue(t)}get nonce(){return this.#ht}set nonce(t){this.#ht=W(t,"value")}get gasLimit(){return this.#ft}set gasLimit(t){this.#ft=K(t)}get gasPrice(){const t=this.#dt;return null!=t||0!==this.type&&1!==this.type?t:qc}set gasPrice(t){this.#dt=null==t?null:K(t,"gasPrice")}get maxPriorityFeePerGas(){const t=this.#pt;return null==t?2===this.type?qc:null:t}set maxPriorityFeePerGas(t){this.#pt=null==t?null:K(t,"maxPriorityFeePerGas")}get maxFeePerGas(){const t=this.#gt;return null==t?2===this.type?qc:null:t}set maxFeePerGas(t){this.#gt=null==t?null:K(t,"maxFeePerGas")}get data(){return this.#e}set data(t){this.#e=k(t)}get value(){return this.#mt}set value(t){this.#mt=K(t,"value")}get chainId(){return this.#at}set chainId(t){this.#at=K(t)}get signature(){return this.#yt||null}set signature(t){this.#yt=null==t?null:Ei.from(t)}get accessList(){const t=this.#wt||null;return null==t?1===this.type||2===this.type?[]:null:t}set accessList(t){this.#wt=null==t?null:on(t)}constructor(){this.#lt=null,this.#ut=null,this.#ht=0,this.#ft=BigInt(0),this.#dt=null,this.#pt=null,this.#gt=null,this.#e="0x",this.#mt=BigInt(0),this.#at=BigInt(0),this.#yt=null,this.#wt=null}get hash(){return null==this.signature?null:re(this.serialized)}get unsignedHash(){return re(this.unsignedSerialized)}get from(){return null==this.signature?null:Va(this.unsignedHash,this.signature)}get fromPublicKey(){return null==this.signature?null:Eo.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return null!=this.signature}get serialized(){switch(h(null!=this.signature,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"}),this.inferType()){case 0:return ol(this,this.signature);case 1:return ll(this,this.signature);case 2:return cl(this,this.signature)}h(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})}get unsignedSerialized(){switch(this.inferType()){case 0:return ol(this);case 1:return ll(this);case 2:return cl(this)}h(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".unsignedSerialized"})}inferType(){return this.inferTypes().pop()}inferTypes(){const t=null!=this.gasPrice,e=null!=this.maxFeePerGas||null!=this.maxPriorityFeePerGas,r=null!=this.accessList;null!=this.maxFeePerGas&&null!=this.maxPriorityFeePerGas&&h(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),h(!e||0!==this.type&&1!==this.type,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),h(0!==this.type||!r,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const n=[];return null!=this.type?n.push(this.type):e?n.push(2):t?(n.push(1),r||n.push(0)):r?(n.push(1),n.push(2)):(n.push(0),n.push(1),n.push(2)),n.sort(),n}isLegacy(){return 0===this.type}isBerlin(){return 1===this.type}isLondon(){return 2===this.type}clone(){return ul.from(this)}toJSON(){const t=t=>null==t?null:t.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:t(this.gasLimit),gasPrice:t(this.gasPrice),maxPriorityFeePerGas:t(this.maxPriorityFeePerGas),maxFeePerGas:t(this.maxFeePerGas),value:t(this.value),chainId:t(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(t){if(null==t)return new ul;if("string"==typeof t){const e=w(t);if(e[0]>=127)return ul.from(function(t){const e=zc(t);f(Array.isArray(e)&&(9===e.length||6===e.length),"invalid field count for legacy transaction","data",t);const r={type:0,nonce:rl(e[0],"nonce"),gasPrice:nl(e[1],"gasPrice"),gasLimit:nl(e[2],"gasLimit"),to:tl(e[3]),value:nl(e[4],"value"),data:k(e[5]),chainId:qc};if(6===e.length)return r;const n=nl(e[6],"v"),s=nl(e[7],"r"),i=nl(e[8],"s");if(s===qc&&i===qc)r.chainId=n;else{let s=(n-Xc)/Wc;s<qc&&(s=qc),r.chainId=s,f(s!==qc||n===Yc||n===Zc,"non-canonical legacy v","v",e[6]),r.signature=Ei.from({r:O(e[7],32),s:O(e[8],32),v:n}),r.hash=re(t)}return r}(e));switch(e[0]){case 1:return ul.from(function(t){const e=zc(w(t).slice(1));f(Array.isArray(e)&&(8===e.length||11===e.length),"invalid field count for transaction type: 1","data",k(t));const r={type:1,chainId:nl(e[0],"chainId"),nonce:rl(e[1],"nonce"),gasPrice:nl(e[2],"gasPrice"),gasLimit:nl(e[3],"gasLimit"),to:tl(e[4]),value:nl(e[5],"value"),data:k(e[6]),accessList:el(e[7],"accessList")};return 8===e.length||(r.hash=re(t),al(r,e.slice(8))),r}(e));case 2:return ul.from(function(t){const e=zc(w(t).slice(1));f(Array.isArray(e)&&(9===e.length||12===e.length),"invalid field count for transaction type: 2","data",k(t));const r=nl(e[2],"maxPriorityFeePerGas"),n=nl(e[3],"maxFeePerGas"),s={type:2,chainId:nl(e[0],"chainId"),nonce:rl(e[1],"nonce"),maxPriorityFeePerGas:r,maxFeePerGas:n,gasPrice:null,gasLimit:nl(e[4],"gasLimit"),to:tl(e[5]),value:nl(e[6],"value"),data:k(e[7]),accessList:el(e[8],"accessList")};return 9===e.length||(s.hash=re(t),al(s,e.slice(9))),s}(e))}h(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const e=new ul;return null!=t.type&&(e.type=t.type),null!=t.to&&(e.to=t.to),null!=t.nonce&&(e.nonce=t.nonce),null!=t.gasLimit&&(e.gasLimit=t.gasLimit),null!=t.gasPrice&&(e.gasPrice=t.gasPrice),null!=t.maxPriorityFeePerGas&&(e.maxPriorityFeePerGas=t.maxPriorityFeePerGas),null!=t.maxFeePerGas&&(e.maxFeePerGas=t.maxFeePerGas),null!=t.data&&(e.data=t.data),null!=t.value&&(e.value=t.value),null!=t.chainId&&(e.chainId=t.chainId),null!=t.signature&&(e.signature=Ei.from(t.signature)),null!=t.accessList&&(e.accessList=t.accessList),null!=t.hash&&(f(e.isSigned(),"unsigned transaction cannot define hash","tx",t),f(e.hash===t.hash,"hash mismatch","tx",t)),null!=t.from&&(f(e.isSigned(),"unsigned transaction cannot define from","tx",t),f(e.from.toLowerCase()===(t.from||"").toLowerCase(),"from mismatch","tx",t)),e}}const hl="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";let fl=null;function dl(t){if(null==fl){fl={};for(let t=0;t<hl.length;t++)fl[hl[t]]=BigInt(t)}const e=fl[t];return f(null!=e,"invalid base58 value","letter",t),e}const pl=BigInt(0),gl=BigInt(58);function ml(t){const e=w(t);let r=q(e),n="";for(;r;)n=hl[Number(r%gl)]+n,r/=gl;for(let t=0;t<e.length&&!e[t];t++)n=hl[0]+n;return n}function yl(t){let e=pl;for(let r=0;r<t.length;r++)e*=gl,e+=dl(t[r]);return e}function wl(t){return t.match(/^ipfs:\\/\\/ipfs\\//i)?t=t.substring(12):t.match(/^ipfs:\\/\\//i)?t=t.substring(7):f(!1,"unsupported IPFS format","link",t),`https://gateway.ipfs.io/ipfs/${t}`}class bl{name;constructor(t){o(this,{name:t})}connect(t){return this}supportsCoinType(t){return!1}async encodeAddress(t,e){throw new Error("unsupported coin")}async decodeAddress(t,e){throw new Error("unsupported coin")}}const Al=new RegExp("^(ipfs)://(.*)$","i"),El=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),Al,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];class vl{provider;address;name;#bt;#At;constructor(t,e,r){o(this,{provider:t,address:e,name:r}),this.#bt=null,this.#At=new zn(e,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],t)}async supportsWildcard(){return null==this.#bt&&(this.#bt=(async()=>{try{return await this.#At.supportsInterface("0x9061b923")}catch(t){if(c(t,"CALL_EXCEPTION"))return!1;throw this.#bt=null,t}})()),await this.#bt}async#Et(t,e){e=(e||[]).slice();const r=this.#At.interface;e.unshift(ja(this.name));let n=null;await this.supportsWildcard()&&(n=r.getFunction(t),h(n,"missing fragment","UNKNOWN_ERROR",{info:{funcName:t}}),e=[Qa(this.name),r.encodeFunctionData(n,e)],t="resolve(bytes,bytes)"),e.push({enableCcipRead:!0});try{const s=await this.#At[t](...e);return n?r.decodeFunctionResult(n,s)[0]:s}catch(t){if(!c(t,"CALL_EXCEPTION"))throw t}return null}async getAddress(t){if(null==t&&(t=60),60===t)try{const t=await this.#Et("addr(bytes32)");return null==t||t===Wr?null:t}catch(t){if(c(t,"CALL_EXCEPTION"))return null;throw t}if(t>=0&&t<2147483648){let e=t+2147483648;const r=await this.#Et("addr(bytes32,uint)",[e]);if(A(r,20))return ue(r)}let e=null;for(const r of this.provider.plugins)if(r instanceof bl&&r.supportsCoinType(t)){e=r;break}if(null==e)return null;const r=await this.#Et("addr(bytes32,uint)",[t]);if(null==r||"0x"===r)return null;const n=await e.decodeAddress(t,r);if(null!=n)return n;h(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${t})`,info:{coinType:t,data:r}})}async getText(t){const e=await this.#Et("text(bytes32,string)",[t]);return null==e||"0x"===e?null:e}async getContentHash(){const t=await this.#Et("contenthash(bytes32)");if(null==t||"0x"===t)return null;const e=t.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(e){const t="e3010170"===e[1]?"ipfs":"ipns",r=parseInt(e[4],16);if(e[5].length===2*r)return`${t}://${ml("0x"+e[2])}`}const r=t.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(r&&64===r[1].length)return`bzz://${r[1]}`;h(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:t}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const t=[{type:"name",value:this.name}];try{const e=await this.getText("avatar");if(null==e)return t.push({type:"!avatar",value:""}),{url:null,linkage:t};t.push({type:"avatar",value:e});for(let r=0;r<El.length;r++){const n=e.match(El[r]);if(null==n)continue;const s=n[1].toLowerCase();switch(s){case"https":case"data":return t.push({type:"url",value:e}),{linkage:t,url:e};case"ipfs":{const r=wl(e);return t.push({type:"ipfs",value:e}),t.push({type:"url",value:r}),{linkage:t,url:r}}case"erc721":case"erc1155":{const r="erc721"===s?"tokenURI(uint256)":"uri(uint256)";t.push({type:s,value:e});const i=await this.getAddress();if(null==i)return t.push({type:"!owner",value:""}),{url:null,linkage:t};const o=(n[2]||"").split("/");if(2!==o.length)return t.push({type:`!${s}caip`,value:n[2]||""}),{url:null,linkage:t};const a=o[1],c=new zn(o[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if("erc721"===s){const e=await c.ownerOf(a);if(i!==e)return t.push({type:"!owner",value:e}),{url:null,linkage:t};t.push({type:"owner",value:e})}else if("erc1155"===s){const e=await c.balanceOf(i,a);if(!e)return t.push({type:"!balance",value:"0"}),{url:null,linkage:t};t.push({type:"balance",value:e.toString()})}let l=await c[r](a);if(null==l||"0x"===l)return t.push({type:"!metadata-url",value:""}),{url:null,linkage:t};t.push({type:"metadata-url-base",value:l}),"erc1155"===s&&(l=l.replace("{id}",Z(a,32).substring(2)),t.push({type:"metadata-url-expanded",value:l})),l.match(/^ipfs:/i)&&(l=wl(l)),t.push({type:"metadata-url",value:l});let u={};const h=await new Tc(l).send();h.assertOk();try{u=h.bodyJson}catch(e){try{t.push({type:"!metadata",value:h.bodyText})}catch(e){const r=h.body;return r&&t.push({type:"!metadata",value:k(r)}),{url:null,linkage:t}}return{url:null,linkage:t}}if(!u)return t.push({type:"!metadata",value:""}),{url:null,linkage:t};t.push({type:"metadata",value:JSON.stringify(u)});let f=u.image;if("string"!=typeof f)return t.push({type:"!imageUrl",value:""}),{url:null,linkage:t};if(f.match(/^(https:\\/\\/|data:)/i));else{if(null==f.match(Al))return t.push({type:"!imageUrl-ipfs",value:f}),{url:null,linkage:t};t.push({type:"imageUrl-ipfs",value:f}),f=wl(f)}return t.push({type:"url",value:f}),{linkage:t,url:f}}}}}catch(t){}return{linkage:t,url:null}}static async getEnsAddress(t){const e=await t.getNetwork(),r=e.getPlugin("org.ethers.plugins.network.Ens");return h(r,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:e}}),r.address}static async#vt(t,e){const r=await vl.getEnsAddress(t);try{const n=new zn(r,["function resolver(bytes32) view returns (address)"],t),s=await n.resolver(ja(e),{enableCcipRead:!0});return s===Wr?null:s}catch(t){throw t}return null}static async fromName(t,e){let r=e;for(;;){if(""===r||"."===r)return null;if("eth"!==e&&"eth"===r)return null;const n=await vl.#vt(t,r);if(null!=n){const s=new vl(t,n,e);return r===e||await s.supportsWildcard()?s:null}r=r.split(".").slice(1).join(".")}}}const kl=BigInt(0);function Nl(t,e){return function(r){return null==r?e:t(r)}}function Rl(t){return e=>{if(!Array.isArray(e))throw new Error("not an array");return e.map((e=>t(e)))}}function Pl(t,e){return r=>{const n={};for(const s in t){let i=s;if(e&&s in e&&!(i in r))for(const t of e[s])if(t in r){i=t;break}try{const e=t[s](r[i]);void 0!==e&&(n[s]=e)}catch(t){h(!1,`invalid value for value.${s} (${t instanceof Error?t.message:"not-an-error"})`,"BAD_DATA",{value:r})}}return n}}function Il(t){return f(A(t,!0),"invalid data","value",t),t}function Tl(t){return f(A(t,32),"invalid hash","value",t),t}const Ol=Pl({address:ue,blockHash:Tl,blockNumber:W,data:Il,index:W,removed:Nl((function(t){switch(t){case!0:case"true":return!0;case!1:case"false":return!1}f(!1,`invalid boolean; ${JSON.stringify(t)}`,"value",t)}),!1),topics:Rl(Tl),transactionHash:Tl,transactionIndex:W},{index:["logIndex"]}),Cl=Pl({hash:Nl(Tl),parentHash:Tl,number:W,timestamp:W,nonce:Nl(Il),difficulty:K,gasLimit:K,gasUsed:K,miner:Nl(ue),extraData:Il,baseFeePerGas:Nl(K)}),xl=Pl({transactionIndex:W,blockNumber:W,transactionHash:Tl,address:ue,topics:Rl(Tl),data:Il,index:W,blockHash:Tl},{index:["logIndex"]}),Sl=Pl({to:Nl(ue,null),from:Nl(ue,null),contractAddress:Nl(ue,null),index:W,root:Nl(k),gasUsed:K,logsBloom:Nl(Il),blockHash:Tl,hash:Tl,logs:Rl((function(t){return xl(t)})),blockNumber:W,cumulativeGasUsed:K,effectiveGasPrice:Nl(K),status:Nl(W),type:Nl(W,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function Bl(t){t.to&&K(t.to)===kl&&(t.to="0x0000000000000000000000000000000000000000");const e=Pl({hash:Tl,type:t=>"0x"===t||null==t?0:W(t),accessList:Nl(on,null),blockHash:Nl(Tl,null),blockNumber:Nl(W,null),transactionIndex:Nl(W,null),from:ue,gasPrice:Nl(K),maxPriorityFeePerGas:Nl(K),maxFeePerGas:Nl(K),gasLimit:K,to:Nl(ue,null),value:K,nonce:W,data:Il,creates:Nl(ue,null),chainId:Nl(K,null)},{data:["input"],gasLimit:["gas"]})(t);if(null==e.to&&null==e.creates&&(e.creates=_r(e)),1!==t.type&&2!==t.type||null!=t.accessList||(e.accessList=[]),t.signature?e.signature=Ei.from(t.signature):e.signature=Ei.from(t),null==e.chainId){const t=e.signature.legacyChainId;null!=t&&(e.chainId=t)}return e.blockHash&&K(e.blockHash)===kl&&(e.blockHash=null),e}function Ul(t){return JSON.parse(JSON.stringify(t))}class Dl{#kt;#Nt;#Rt;#Pt;constructor(t){this.#kt=t,this.#Nt=null,this.#Rt=4e3,this.#Pt=-2}get pollingInterval(){return this.#Rt}set pollingInterval(t){this.#Rt=t}async#It(){try{const t=await this.#kt.getBlockNumber();if(-2===this.#Pt)return void(this.#Pt=t);if(t!==this.#Pt){for(let e=this.#Pt+1;e<=t;e++){if(null==this.#Nt)return;await this.#kt.emit("block",e)}this.#Pt=t}}catch(t){}null!=this.#Nt&&(this.#Nt=this.#kt._setTimeout(this.#It.bind(this),this.#Rt))}start(){this.#Nt||(this.#Nt=this.#kt._setTimeout(this.#It.bind(this),this.#Rt),this.#It())}stop(){this.#Nt&&(this.#kt._clearTimeout(this.#Nt),this.#Nt=null)}pause(t){this.stop(),t&&(this.#Pt=-2)}resume(){this.start()}}class Fl{#kt;#It;#Tt;constructor(t){this.#kt=t,this.#Tt=!1,this.#It=t=>{this._poll(t,this.#kt)}}async _poll(t,e){throw new Error("sub-classes must override this")}start(){this.#Tt||(this.#Tt=!0,this.#It(-2),this.#kt.on("block",this.#It))}stop(){this.#Tt&&(this.#Tt=!1,this.#kt.off("block",this.#It))}pause(t){this.stop()}resume(){this.start()}}class Ll extends Fl{#Ot;#Ct;constructor(t,e){super(t),this.#Ot=e,this.#Ct=-2}pause(t){t&&(this.#Ct=-2),super.pause(t)}async _poll(t,e){const r=await e.getBlock(this.#Ot);null!=r&&(-2===this.#Ct?this.#Ct=r.number:r.number>this.#Ct&&(e.emit(this.#Ot,r.number),this.#Ct=r.number))}}class Ml extends Fl{#P;constructor(t,e){super(t),this.#P=Ul(e)}async _poll(t,e){throw new Error("@TODO")}}class Gl extends Fl{#xt;constructor(t,e){super(t),this.#xt=e}async _poll(t,e){const r=await e.getTransactionReceipt(this.#xt);r&&e.emit(this.#xt,r)}}class Hl{#kt;#P;#Nt;#Tt;#Pt;constructor(t,e){this.#kt=t,this.#P=Ul(e),this.#Nt=this.#It.bind(this),this.#Tt=!1,this.#Pt=-2}async#It(t){if(-2===this.#Pt)return;const e=Ul(this.#P);e.fromBlock=this.#Pt+1,e.toBlock=t;const r=await this.#kt.getLogs(e);if(0!==r.length)for(const t of r)this.#kt.emit(this.#P,t),this.#Pt=t.blockNumber;else this.#Pt<t-60&&(this.#Pt=t-60)}start(){this.#Tt||(this.#Tt=!0,-2===this.#Pt&&this.#kt.getBlockNumber().then((t=>{this.#Pt=t})),this.#kt.on("block",this.#Nt))}stop(){this.#Tt&&(this.#Tt=!1,this.#kt.off("block",this.#Nt))}pause(t){this.stop(),t&&(this.#Pt=-2)}resume(){this.start()}}const jl=BigInt(2);function Ql(t){return t&&"function"==typeof t.then}function _l(t,e){return t+":"+JSON.stringify(e,((t,e)=>{if(null==e)return"null";if("bigint"==typeof e)return`bigint:${e.toString()}`;if("string"==typeof e)return e.toLowerCase();if("object"==typeof e&&!Array.isArray(e)){const t=Object.keys(e);return t.sort(),t.reduce(((t,r)=>(t[r]=e[r],t)),{})}return e}))}class Vl{name;constructor(t){o(this,{name:t})}start(){}stop(){}pause(t){}resume(){}}function Kl(t){return(t=Array.from(new Set(t).values())).sort(),t}async function Jl(t,e){if(null==t)throw new Error("invalid event");if(Array.isArray(t)&&(t={topics:t}),"string"==typeof t)switch(t){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:t,tag:t}}if(A(t,32)){const e=t.toLowerCase();return{type:"transaction",tag:_l("tx",{hash:e}),hash:e}}if(t.orphan){const e=t;return{type:"orphan",tag:_l("orphan",e),filter:(r=e,JSON.parse(JSON.stringify(r)))}}var r;if(t.address||t.topics){const r=t,n={topics:(r.topics||[]).map((t=>null==t?null:Array.isArray(t)?Kl(t.map((t=>t.toLowerCase()))):t.toLowerCase()))};if(r.address){const t=[],s=[],i=r=>{A(r)?t.push(r):s.push((async()=>{t.push(await qr(r,e))})())};Array.isArray(r.address)?r.address.forEach(i):i(r.address),s.length&&await Promise.all(s),n.address=Kl(t.map((t=>t.toLowerCase())))}return{filter:n,tag:_l("event",n),type:"event"}}f(!1,"unknown ProviderEvent","event",t)}function zl(){return(new Date).getTime()}const ql={cacheTimeout:250,pollingInterval:4e3};class Wl{#St;#ct;#Bt;#Ut;#Dt;#Ft;#Lt;#Mt;#Gt;#Ht;#jt;#u;constructor(t,e){if(this.#u=Object.assign({},ql,e||{}),"any"===t)this.#Ft=!0,this.#Dt=null;else if(t){const e=Gc.from(t);this.#Ft=!1,this.#Dt=Promise.resolve(e),setTimeout((()=>{this.emit("network",e,null)}),0)}else this.#Ft=!1,this.#Dt=null;this.#Mt=-1,this.#Lt=new Map,this.#St=new Map,this.#ct=new Map,this.#Bt=null,this.#Ut=!1,this.#Gt=1,this.#Ht=new Map,this.#jt=!1}get pollingInterval(){return this.#u.pollingInterval}get provider(){return this}get plugins(){return Array.from(this.#ct.values())}attachPlugin(t){if(this.#ct.get(t.name))throw new Error(`cannot replace existing plugin: ${t.name} `);return this.#ct.set(t.name,t.connect(this)),this}getPlugin(t){return this.#ct.get(t)||null}get disableCcipRead(){return this.#jt}set disableCcipRead(t){this.#jt=!!t}async#Qt(t){const e=this.#u.cacheTimeout;if(e<0)return await this._perform(t);const r=_l(t.method,t);let n=this.#Lt.get(r);return n||(n=this._perform(t),this.#Lt.set(r,n),setTimeout((()=>{this.#Lt.get(r)===n&&this.#Lt.delete(r)}),e)),await n}async ccipReadFetch(t,e,r){if(this.disableCcipRead||0===r.length||null==t.to)return null;const n=t.to.toLowerCase(),s=e.toLowerCase(),i=[];for(let e=0;e<r.length;e++){const o=r[e],a=o.replace("{sender}",n).replace("{data}",s),c=new Tc(a);-1===o.indexOf("{data}")&&(c.body={data:s,sender:n}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:c,index:e,urls:r});let l="unknown error";const u=await c.send();try{const t=u.bodyJson;if(t.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:c,result:t}),t.data;t.message&&(l=t.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:c,result:t})}catch(t){}h(u.statusCode<400||u.statusCode>=500,`response not found during CCIP fetch: ${l}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:t,info:{url:o,errorMessage:l}}),i.push(l)}h(!1,`error encountered during CCIP fetch: ${i.map((t=>JSON.stringify(t))).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:t,info:{urls:r,errorMessages:i}})}_wrapBlock(t,e){return new fn(function(t){const e=Cl(t);return e.transactions=t.transactions.map((t=>"string"==typeof t?t:Bl(t))),e}(t),this)}_wrapLog(t,e){return new dn(function(t){return Ol(t)}(t),this)}_wrapTransactionReceipt(t,e){return new pn(function(t){return Sl(t)}(t),this)}_wrapTransactionResponse(t,e){return new gn(Bl(t),this)}_detectNetwork(){h(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(t){h(!1,`unsupported method: ${t.method}`,"UNSUPPORTED_OPERATION",{operation:t.method,info:t})}async getBlockNumber(){const t=W(await this.#Qt({method:"getBlockNumber"}),"%response");return this.#Mt>=0&&(this.#Mt=t),t}_getAddress(t){return qr(t,this)}_getBlockTag(t){if(null==t)return"latest";switch(t){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return t}return A(t)?A(t,32)?t:$(t):("bigint"==typeof t&&(t=W(t,"blockTag")),"number"==typeof t?t>=0?$(t):this.#Mt>=0?$(this.#Mt+t):this.getBlockNumber().then((e=>$(e+t))):void f(!1,"invalid blockTag","blockTag",t))}_getFilter(t){const e=(t.topics||[]).map((t=>null==t?null:Array.isArray(t)?Kl(t.map((t=>t.toLowerCase()))):t.toLowerCase())),r="blockHash"in t?t.blockHash:void 0,n=(t,n,s)=>{let i;switch(t.length){case 0:break;case 1:i=t[0];break;default:t.sort(),i=t}if(r&&(null!=n||null!=s))throw new Error("invalid filter");const o={};return i&&(o.address=i),e.length&&(o.topics=e),n&&(o.fromBlock=n),s&&(o.toBlock=s),r&&(o.blockHash=r),o};let s,i,o=[];if(t.address)if(Array.isArray(t.address))for(const e of t.address)o.push(this._getAddress(e));else o.push(this._getAddress(t.address));return"fromBlock"in t&&(s=this._getBlockTag(t.fromBlock)),"toBlock"in t&&(i=this._getBlockTag(t.toBlock)),o.filter((t=>"string"!=typeof t)).length||null!=s&&"string"!=typeof s||null!=i&&"string"!=typeof i?Promise.all([Promise.all(o),s,i]).then((t=>n(t[0],t[1],t[2]))):n(o,s,i)}_getTransactionRequest(t){const e=hn(t),r=[];if(["to","from"].forEach((t=>{if(null==e[t])return;const n=qr(e[t],this);Ql(n)?r.push(async function(){e[t]=await n}()):e[t]=n})),null!=e.blockTag){const t=this._getBlockTag(e.blockTag);Ql(t)?r.push(async function(){e.blockTag=await t}()):e.blockTag=t}return r.length?async function(){return await Promise.all(r),e}():e}async getNetwork(){if(null==this.#Dt){const t=(async()=>{try{const t=await this._detectNetwork();return this.emit("network",t,null),t}catch(e){throw this.#Dt===t&&(this.#Dt=null),e}})();return this.#Dt=t,(await t).clone()}const t=this.#Dt,[e,r]=await Promise.all([t,this._detectNetwork()]);return e.chainId!==r.chainId&&(this.#Ft?(this.emit("network",r,e),this.#Dt===t&&(this.#Dt=Promise.resolve(r))):h(!1,`network changed: ${e.chainId} => ${r.chainId} `,"NETWORK_ERROR",{event:"changed"})),e.clone()}async getFeeData(){const t=await this.getNetwork(),e=async()=>{const{_block:e,gasPrice:r,priorityFee:n}=await i({_block:this.#_t("latest",!1),gasPrice:(async()=>{try{return K(await this.#Qt({method:"getGasPrice"}),"%response")}catch(t){}return null})(),priorityFee:(async()=>{try{return K(await this.#Qt({method:"getPriorityFee"}),"%response")}catch(t){}return null})()});let s=null,o=null;const a=this._wrapBlock(e,t);return a&&a.baseFeePerGas&&(o=null!=n?n:BigInt("1000000000"),s=a.baseFeePerGas*jl+o),new un(r,s,o)},r=t.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(r){const t=new Tc(r.url),n=await r.processFunc(e,this,t);return new un(n.gasPrice,n.maxFeePerGas,n.maxPriorityFeePerGas)}return await e()}async estimateGas(t){let e=this._getTransactionRequest(t);return Ql(e)&&(e=await e),K(await this.#Qt({method:"estimateGas",transaction:e}),"%response")}async#Vt(t,e,r){h(r<10,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},t,{blockTag:e,enableCcipRead:!0})});const n=hn(t);try{return k(await this._perform({method:"call",transaction:n,blockTag:e}))}catch(t){if(!this.disableCcipRead&&l(t)&&t.data&&r>=0&&"latest"===e&&null!=n.to&&"0x556f1830"===P(t.data,0,4)){const s=t.data,i=await qr(n.to,this);let o;try{o=function(t){const e={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};h(R(t)>=160,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const r=P(t,0,32);h(P(r,0,12)===P(ru,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),e.sender=P(r,12);try{const r=[],n=W(P(t,32,64)),s=W(P(t,n,n+32)),i=P(t,n+32);for(let t=0;t<s;t++){const e=Yl(i,32*t);if(null==e)throw new Error("abort");r.push(e)}e.urls=r}catch(t){h(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const r=Zl(t,64);if(null==r)throw new Error("abort");e.calldata=r}catch(t){h(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}h(P(t,100,128)===P(ru,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),e.selector=P(t,96,100);try{const r=Zl(t,128);if(null==r)throw new Error("abort");e.extraData=r}catch(t){h(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return e.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map((t=>e[t])),e}(P(t.data,4))}catch(t){h(!1,t.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:n,info:{data:s}})}h(o.sender.toLowerCase()===i.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:s,reason:"OffchainLookup",transaction:n,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:o.errorArgs}});const a=await this.ccipReadFetch(n,o.calldata,o.urls);h(null!=a,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:n,info:{data:t.data,errorArgs:o.errorArgs}});const c={to:i,data:N([o.selector,eu([a,o.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:c});try{const t=await this.#Vt(c,e,r+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},c),result:t}),t}catch(t){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},c),error:t}),t}}throw t}}async#Kt(t){const{value:e}=await i({network:this.getNetwork(),value:t});return e}async call(t){const{tx:e,blockTag:r}=await i({tx:this._getTransactionRequest(t),blockTag:this._getBlockTag(t.blockTag)});return await this.#Kt(this.#Vt(e,r,t.enableCcipRead?0:-1))}async#Jt(t,e,r){let n=this._getAddress(e),s=this._getBlockTag(r);return"string"==typeof n&&"string"==typeof s||([n,s]=await Promise.all([n,s])),await this.#Kt(this.#Qt(Object.assign(t,{address:n,blockTag:s})))}async getBalance(t,e){return K(await this.#Jt({method:"getBalance"},t,e),"%response")}async getTransactionCount(t,e){return W(await this.#Jt({method:"getTransactionCount"},t,e),"%response")}async getCode(t,e){return k(await this.#Jt({method:"getCode"},t,e))}async getStorage(t,e,r){const n=K(e,"position");return k(await this.#Jt({method:"getStorage",position:n},t,r))}async broadcastTransaction(t){const{blockNumber:e,hash:r,network:n}=await i({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:t}),network:this.getNetwork()}),s=ul.from(t);if(s.hash!==r)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(s,n).replaceableTransaction(e)}async#_t(t,e){if(A(t,32))return await this.#Qt({method:"getBlock",blockHash:t,includeTransactions:e});let r=this._getBlockTag(t);return"string"!=typeof r&&(r=await r),await this.#Qt({method:"getBlock",blockTag:r,includeTransactions:e})}async getBlock(t,e){const{network:r,params:n}=await i({network:this.getNetwork(),params:this.#_t(t,!!e)});return null==n?null:this._wrapBlock(n,r)}async getTransaction(t){const{network:e,params:r}=await i({network:this.getNetwork(),params:this.#Qt({method:"getTransaction",hash:t})});return null==r?null:this._wrapTransactionResponse(r,e)}async getTransactionReceipt(t){const{network:e,params:r}=await i({network:this.getNetwork(),params:this.#Qt({method:"getTransactionReceipt",hash:t})});if(null==r)return null;if(null==r.gasPrice&&null==r.effectiveGasPrice){const e=await this.#Qt({method:"getTransaction",hash:t});if(null==e)throw new Error("report this; could not find tx or effectiveGasPrice");r.effectiveGasPrice=e.gasPrice}return this._wrapTransactionReceipt(r,e)}async getTransactionResult(t){const{result:e}=await i({network:this.getNetwork(),result:this.#Qt({method:"getTransactionResult",hash:t})});return null==e?null:k(e)}async getLogs(t){let e=this._getFilter(t);Ql(e)&&(e=await e);const{network:r,params:n}=await i({network:this.getNetwork(),params:this.#Qt({method:"getLogs",filter:e})});return n.map((t=>this._wrapLog(t,r)))}_getProvider(t){h(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(t){return await vl.fromName(this,t)}async getAvatar(t){const e=await this.getResolver(t);return e?await e.getAvatar():null}async resolveName(t){const e=await this.getResolver(t);return e?await e.getAddress():null}async lookupAddress(t){const e=ja((t=ue(t)).substring(2).toLowerCase()+".addr.reverse");try{const r=await vl.getEnsAddress(this),n=new zn(r,["function resolver(bytes32) view returns (address)"],this),s=await n.resolver(e);if(null==s||s===Wr)return null;const i=new zn(s,["function name(bytes32) view returns (string)"],this),o=await i.name(e);return await this.resolveName(o)!==t?null:o}catch(t){if(c(t,"BAD_DATA")&&"0x"===t.value)return null;if(c(t,"CALL_EXCEPTION"))return null;throw t}return null}async waitForTransaction(t,e,r){const n=null!=e?e:1;return 0===n?this.getTransactionReceipt(t):new Promise((async(e,s)=>{let i=null;const o=async r=>{try{const s=await this.getTransactionReceipt(t);if(null!=s&&r-s.blockNumber+1>=n)return e(s),void(i&&(clearTimeout(i),i=null))}catch(t){console.log("EEE",t)}this.once("block",o)};null!=r&&(i=setTimeout((()=>{null!=i&&(i=null,this.off("block",o),s(u("timeout","TIMEOUT",{reason:"timeout"})))}),r)),o(await this.getBlockNumber())}))}async waitForBlock(t){h(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(t){const e=this.#Ht.get(t);e&&(e.timer&&clearTimeout(e.timer),this.#Ht.delete(t))}_setTimeout(t,e){null==e&&(e=0);const r=this.#Gt++,n=()=>{this.#Ht.delete(r),t()};if(this.paused)this.#Ht.set(r,{timer:null,func:n,time:e});else{const t=setTimeout(n,e);this.#Ht.set(r,{timer:t,func:n,time:zl()})}return r}_forEachSubscriber(t){for(const e of this.#St.values())t(e.subscriber)}_getSubscriber(t){switch(t.type){case"debug":case"error":case"network":return new Vl(t.type);case"block":{const t=new Dl(this);return t.pollingInterval=this.pollingInterval,t}case"safe":case"finalized":return new Ll(this,t.type);case"event":return new Hl(this,t.filter);case"transaction":return new Gl(this,t.hash);case"orphan":return new Ml(this,t.filter)}throw new Error(`unsupported event: ${t.type}`)}_recoverSubscriber(t,e){for(const r of this.#St.values())if(r.subscriber===t){r.started&&r.subscriber.stop(),r.subscriber=e,r.started&&e.start(),null!=this.#Bt&&e.pause(this.#Bt);break}}async#zt(t,e){let r=await Jl(t,this);return"event"===r.type&&e&&e.length>0&&!0===e[0].removed&&(r=await Jl({orphan:"drop-log",log:e[0]},this)),this.#St.get(r.tag)||null}async#qt(t){const e=await Jl(t,this),r=e.tag;let n=this.#St.get(r);return n||(n={subscriber:this._getSubscriber(e),tag:r,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},this.#St.set(r,n)),n}async on(t,e){const r=await this.#qt(t);return r.listeners.push({listener:e,once:!1}),r.started||(r.subscriber.start(),r.started=!0,null!=this.#Bt&&r.subscriber.pause(this.#Bt)),this}async once(t,e){const r=await this.#qt(t);return r.listeners.push({listener:e,once:!0}),r.started||(r.subscriber.start(),r.started=!0,null!=this.#Bt&&r.subscriber.pause(this.#Bt)),this}async emit(t,...e){const r=await this.#zt(t,e);if(!r||0===r.listeners.length)return!1;const n=r.listeners.length;return r.listeners=r.listeners.filter((({listener:r,once:n})=>{const s=new wn(this,n?null:r,t);try{r.call(this,...e,s)}catch(t){}return!n})),0===r.listeners.length&&(r.started&&r.subscriber.stop(),this.#St.delete(r.tag)),n>0}async listenerCount(t){if(t){const e=await this.#zt(t);return e?e.listeners.length:0}let e=0;for(const{listeners:t}of this.#St.values())e+=t.length;return e}async listeners(t){if(t){const e=await this.#zt(t);return e?e.listeners.map((({listener:t})=>t)):[]}let e=[];for(const{listeners:t}of this.#St.values())e=e.concat(t.map((({listener:t})=>t)));return e}async off(t,e){const r=await this.#zt(t);if(!r)return this;if(e){const t=r.listeners.map((({listener:t})=>t)).indexOf(e);t>=0&&r.listeners.splice(t,1)}return e&&0!==r.listeners.length||(r.started&&r.subscriber.stop(),this.#St.delete(r.tag)),this}async removeAllListeners(t){if(t){const{tag:e,started:r,subscriber:n}=await this.#qt(t);r&&n.stop(),this.#St.delete(e)}else for(const[t,{started:e,subscriber:r}]of this.#St)e&&r.stop(),this.#St.delete(t);return this}async addListener(t,e){return await this.on(t,e)}async removeListener(t,e){return this.off(t,e)}get destroyed(){return this.#Ut}destroy(){this.removeAllListeners();for(const t of this.#Ht.keys())this._clearTimeout(t);this.#Ut=!0}get paused(){return null!=this.#Bt}set paused(t){!!t!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(t){if(this.#Mt=-1,null!=this.#Bt){if(this.#Bt==!!t)return;h(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber((e=>e.pause(t))),this.#Bt=!!t;for(const t of this.#Ht.values())t.timer&&clearTimeout(t.timer),t.time=zl()-t.time}resume(){if(null!=this.#Bt){this._forEachSubscriber((t=>t.resume())),this.#Bt=null;for(const t of this.#Ht.values()){let e=t.time;e<0&&(e=0),t.time=zl(),setTimeout(t.func,e)}}}}function Yl(t,e){try{const r=Zl(t,e);if(r)return D(r)}catch(t){}return null}function Zl(t,e){if("0x"===t)return null;try{const r=W(P(t,e,e+32)),n=W(P(t,r,r+32));return P(t,r+32,r+32+n)}catch(t){}return null}function Xl(t){const e=X(t);if(e.length>32)throw new Error("internal; should not happen");const r=new Uint8Array(32);return r.set(e,32-e.length),r}function $l(t){if(t.length%32==0)return t;const e=new Uint8Array(32*Math.ceil(t.length/32));return e.set(t),e}const tu=new Uint8Array([]);function eu(t){const e=[];let r=0;for(let n=0;n<t.length;n++)e.push(tu),r+=32;for(let n=0;n<t.length;n++){const s=w(t[n]);e[n]=Xl(r),e.push(Xl(s.length)),e.push($l(s)),r+=32+32*Math.ceil(s.length/32)}return N(e)}const ru="0x0000000000000000000000000000000000000000000000000000000000000000";function nu(t,e){if(t.provider)return t.provider;h(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}async function su(t,e){let r=hn(e);if(null!=r.to&&(r.to=qr(r.to,t)),null!=r.from){const e=r.from;r.from=Promise.all([t.getAddress(),qr(e,t)]).then((([t,e])=>(f(t.toLowerCase()===e.toLowerCase(),"transaction from mismatch","tx.from",e),t)))}else r.from=t.getAddress();return await i(r)}class iu{provider;constructor(t){o(this,{provider:t||null})}async getNonce(t){return nu(this,"getTransactionCount").getTransactionCount(await this.getAddress(),t)}async populateCall(t){return await su(this,t)}async populateTransaction(t){const e=nu(this,"populateTransaction"),r=await su(this,t);null==r.nonce&&(r.nonce=await this.getNonce("pending")),null==r.gasLimit&&(r.gasLimit=await this.estimateGas(r));const n=await this.provider.getNetwork();null!=r.chainId?f(K(r.chainId)===n.chainId,"transaction chainId mismatch","tx.chainId",t.chainId):r.chainId=n.chainId;const s=null!=r.maxFeePerGas||null!=r.maxPriorityFeePerGas;if(null==r.gasPrice||2!==r.type&&!s?0!==r.type&&1!==r.type||!s||f(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",t):f(!1,"eip-1559 transaction do not support gasPrice","tx",t),2!==r.type&&null!=r.type||null==r.maxFeePerGas||null==r.maxPriorityFeePerGas)if(0===r.type||1===r.type){const t=await e.getFeeData();h(null!=t.gasPrice,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),null==r.gasPrice&&(r.gasPrice=t.gasPrice)}else{const t=await e.getFeeData();if(null==r.type)if(null!=t.maxFeePerGas&&null!=t.maxPriorityFeePerGas)if(r.type=2,null!=r.gasPrice){const t=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=t,r.maxPriorityFeePerGas=t}else null==r.maxFeePerGas&&(r.maxFeePerGas=t.maxFeePerGas),null==r.maxPriorityFeePerGas&&(r.maxPriorityFeePerGas=t.maxPriorityFeePerGas);else null!=t.gasPrice?(h(!s,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),null==r.gasPrice&&(r.gasPrice=t.gasPrice),r.type=0):h(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else 2===r.type&&(null==r.maxFeePerGas&&(r.maxFeePerGas=t.maxFeePerGas),null==r.maxPriorityFeePerGas&&(r.maxPriorityFeePerGas=t.maxPriorityFeePerGas))}else r.type=2;return await i(r)}async estimateGas(t){return nu(this,"estimateGas").estimateGas(await this.populateCall(t))}async call(t){return nu(this,"call").call(await this.populateCall(t))}async resolveName(t){const e=nu(this,"resolveName");return await e.resolveName(t)}async sendTransaction(t){const e=nu(this,"sendTransaction"),r=await this.populateTransaction(t);delete r.from;const n=ul.from(r);return await e.broadcastTransaction(await this.signTransaction(n))}}class ou extends iu{address;constructor(t,e){super(e),o(this,{address:t})}async getAddress(){return this.address}connect(t){return new ou(this.address,t)}#Wt(t,e){h(!1,`VoidSigner cannot sign ${t}`,"UNSUPPORTED_OPERATION",{operation:e})}async signTransaction(t){this.#Wt("transactions","signTransaction")}async signMessage(t){this.#Wt("messages","signMessage")}async signTypedData(t,e,r){this.#Wt("typed-data","signTypedData")}}class au{#kt;#Yt;#Nt;#Tt;#Zt;#Xt;constructor(t){this.#kt=t,this.#Yt=null,this.#Nt=this.#It.bind(this),this.#Tt=!1,this.#Zt=null,this.#Xt=!1}_subscribe(t){throw new Error("subclasses must override this")}_emitResults(t,e){throw new Error("subclasses must override this")}_recover(t){throw new Error("subclasses must override this")}async#It(t){try{null==this.#Yt&&(this.#Yt=this._subscribe(this.#kt));let t=null;try{t=await this.#Yt}catch(t){if(!c(t,"UNSUPPORTED_OPERATION")||"eth_newFilter"!==t.operation)throw t}if(null==t)return this.#Yt=null,void this.#kt._recoverSubscriber(this,this._recover(this.#kt));const e=await this.#kt.getNetwork();if(this.#Zt||(this.#Zt=e),this.#Zt.chainId!==e.chainId)throw new Error("chaid changed");if(this.#Xt)return;const r=await this.#kt.send("eth_getFilterChanges",[t]);await this._emitResults(this.#kt,r)}catch(t){console.log("@TODO",t)}this.#kt.once("block",this.#Nt)}#$t(){const t=this.#Yt;t&&(this.#Yt=null,t.then((t=>{this.#kt.send("eth_uninstallFilter",[t])})))}start(){this.#Tt||(this.#Tt=!0,this.#It(-2))}stop(){this.#Tt&&(this.#Tt=!1,this.#Xt=!0,this.#$t(),this.#kt.off("block",this.#Nt))}pause(t){t&&this.#$t(),this.#kt.off("block",this.#Nt)}resume(){this.start()}}class cu extends au{#te;constructor(t,e){var r;super(t),this.#te=(r=e,JSON.parse(JSON.stringify(r)))}_recover(t){return new Hl(t,this.#te)}async _subscribe(t){return await t.send("eth_newFilter",[this.#te])}async _emitResults(t,e){for(const r of e)t.emit(this.#te,t._wrapLog(r,t._network))}}class lu extends au{async _subscribe(t){return await t.send("eth_newPendingTransactionFilter",[])}async _emitResults(t,e){for(const r of e)t.emit("pending",r)}}const uu="bigint,boolean,function,number,string,symbol".split(/,/g);function hu(t){if(null==t||uu.indexOf(typeof t)>=0)return t;if("function"==typeof t.getAddress)return t;if(Array.isArray(t))return t.map(hu);if("object"==typeof t)return Object.keys(t).reduce(((e,r)=>(e[r]=t[r],e)),{});throw new Error(`should not happen: ${t} (${typeof t})`)}function fu(t){return new Promise((e=>{setTimeout(e,t)}))}function du(t){return t?t.toLowerCase():t}function pu(t){return t&&"number"==typeof t.pollingInterval}const gu={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class mu extends iu{address;constructor(t,e){super(t),o(this,{address:e=ue(e)})}connect(t){h(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(t){return await this.populateCall(t)}async sendUncheckedTransaction(t){const e=hu(t),r=[];if(e.from){const n=e.from;r.push((async()=>{const r=await qr(n,this.provider);f(null!=r&&r.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",t),e.from=r})())}else e.from=this.address;if(null==e.gasLimit&&r.push((async()=>{e.gasLimit=await this.provider.estimateGas({...e,from:this.address})})()),null!=e.to){const t=e.to;r.push((async()=>{e.to=await qr(t,this.provider)})())}r.length&&await Promise.all(r);const n=this.provider.getRpcTransaction(e);return this.provider.send("eth_sendTransaction",[n])}async sendTransaction(t){const e=await this.provider.getBlockNumber(),r=await this.sendUncheckedTransaction(t);return await new Promise(((t,n)=>{const s=[1e3,100];let i=0;const o=async()=>{try{const n=await this.provider.getTransaction(r);if(null!=n)return void t(n.replaceableTransaction(e))}catch(t){if(c(t,"CANCELLED")||c(t,"BAD_DATA")||c(t,"NETWORK_ERROR"))return null==t.info&&(t.info={}),t.info.sendTransactionHash=r,void n(t);if(c(t,"INVALID_ARGUMENT")&&(i++,null==t.info&&(t.info={}),t.info.sendTransactionHash=r,i>10))return void n(t);this.provider.emit("error",u("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:t}))}this.provider._setTimeout((()=>{o()}),s.pop()||4e3)};o()}))}async signTransaction(t){const e=hu(t);if(e.from){const r=await qr(e.from,this.provider);f(null!=r&&r.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",t),e.from=r}else e.from=this.address;const r=this.provider.getRpcTransaction(e);return await this.provider.send("eth_signTransaction",[r])}async signMessage(t){const e="string"==typeof t?U(t):t;return await this.provider.send("personal_sign",[k(e),this.address.toLowerCase()])}async signTypedData(t,e,r){const n=hu(r),s=await dc.resolveNames(t,e,n,(async t=>{const e=await qr(t);return f(null!=e,"TypedData does not support null address","value",t),e}));return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(dc.getPayload(s.domain,e,s.value))])}async unlock(t){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),t,null])}async _legacySignMessage(t){const e="string"==typeof t?U(t):t;return await this.provider.send("eth_sign",[this.address.toLowerCase(),k(e)])}}class yu extends Wl{#u;#ee;#re;#ne;#se;#Zt;#ie;#oe(){if(this.#ne)return;const t=1===this._getOption("batchMaxCount")?0:this._getOption("batchStallTime");this.#ne=setTimeout((()=>{this.#ne=null;const t=this.#re;for(this.#re=[];t.length;){const e=[t.shift()];for(;t.length&&e.length!==this.#u.batchMaxCount;)if(e.push(t.shift()),JSON.stringify(e.map((t=>t.payload))).length>this.#u.batchMaxSize){t.unshift(e.pop());break}(async()=>{const t=1===e.length?e[0].payload:e.map((t=>t.payload));this.emit("debug",{action:"sendRpcPayload",payload:t});try{const r=await this._send(t);this.emit("debug",{action:"receiveRpcResult",result:r});for(const{resolve:t,reject:n,payload:s}of e){if(this.destroyed){n(u("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:s.method}));continue}const e=r.filter((t=>t.id===s.id))[0];if(null!=e)"error"in e?n(this.getRpcError(s,e)):t(e.result);else{const t=u("missing response for request","BAD_DATA",{value:r,info:{payload:s}});this.emit("error",t),n(t)}}}catch(t){this.emit("debug",{action:"receiveRpcError",error:t});for(const{reject:r}of e)r(t)}})()}}),t)}constructor(t,e){super(t,e),this.#ee=1,this.#u=Object.assign({},gu,e||{}),this.#re=[],this.#ne=null,this.#Zt=null,this.#ie=null;{let t=null;const e=new Promise((e=>{t=e}));this.#se={promise:e,resolve:t}}const r=this._getOption("staticNetwork");"boolean"==typeof r?(f(!r||"any"!==t,"staticNetwork cannot be used on special network \'any\'","options",e),r&&null!=t&&(this.#Zt=Gc.from(t))):r&&(f(null==t||r.matches(t),"staticNetwork MUST match network object","options",e),this.#Zt=r)}_getOption(t){return this.#u[t]}get _network(){return h(this.#Zt,"network is not available yet","NETWORK_ERROR"),this.#Zt}async _perform(t){if("call"===t.method||"estimateGas"===t.method){let e=t.transaction;if(e&&null!=e.type&&K(e.type)&&null==e.maxFeePerGas&&null==e.maxPriorityFeePerGas){const r=await this.getFeeData();null==r.maxFeePerGas&&null==r.maxPriorityFeePerGas&&(t=Object.assign({},t,{transaction:Object.assign({},e,{type:void 0})}))}}const e=this.getRpcRequest(t);return null!=e?await this.send(e.method,e.args):super._perform(t)}async _detectNetwork(){const t=this._getOption("staticNetwork");if(t){if(!0!==t)return t;if(this.#Zt)return this.#Zt}return this.#ie?await this.#ie:this.ready?(this.#ie=(async()=>{try{const t=Gc.from(K(await this.send("eth_chainId",[])));return this.#ie=null,t}catch(t){throw this.#ie=null,t}})(),await this.#ie):(this.#ie=(async()=>{const t={id:this.#ee++,method:"eth_chainId",params:[],jsonrpc:"2.0"};let e;this.emit("debug",{action:"sendRpcPayload",payload:t});try{e=(await this._send(t))[0],this.#ie=null}catch(t){throw this.#ie=null,this.emit("debug",{action:"receiveRpcError",error:t}),t}if(this.emit("debug",{action:"receiveRpcResult",result:e}),"result"in e)return Gc.from(K(e.result));throw this.getRpcError(t,e)})(),await this.#ie)}_start(){null!=this.#se&&null!=this.#se.resolve&&(this.#se.resolve(),this.#se=null,(async()=>{for(;null==this.#Zt&&!this.destroyed;)try{this.#Zt=await this._detectNetwork()}catch(t){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",u("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:t}})),await fu(1e3)}this.#oe()})())}async _waitUntilReady(){if(null!=this.#se)return await this.#se.promise}_getSubscriber(t){return"pending"===t.type?new lu(this):"event"===t.type?this._getOption("polling")?new Hl(this,t.filter):new cu(this,t.filter):"orphan"===t.type&&"drop-log"===t.filter.orphan?new Vl("orphan"):super._getSubscriber(t)}get ready(){return null==this.#se}getRpcTransaction(t){const e={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach((r=>{if(null==t[r])return;let n=r;"gasLimit"===r&&(n="gas"),e[n]=$(K(t[r],`tx.${r}`))})),["from","to","data"].forEach((r=>{null!=t[r]&&(e[r]=k(t[r]))})),t.accessList&&(e.accessList=on(t.accessList)),e}getRpcRequest(t){switch(t.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[du(t.address),t.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[du(t.address),t.blockTag]};case"getCode":return{method:"eth_getCode",args:[du(t.address),t.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[du(t.address),"0x"+t.position.toString(16),t.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[t.signedTransaction]};case"getBlock":if("blockTag"in t)return{method:"eth_getBlockByNumber",args:[t.blockTag,!!t.includeTransactions]};if("blockHash"in t)return{method:"eth_getBlockByHash",args:[t.blockHash,!!t.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[t.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[t.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(t.transaction),t.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(t.transaction)]};case"getLogs":return t.filter&&null!=t.filter.address&&(Array.isArray(t.filter.address)?t.filter.address=t.filter.address.map(du):t.filter.address=du(t.filter.address)),{method:"eth_getLogs",args:[t.filter]}}return null}getRpcError(t,e){const{method:r}=t,{error:n}=e;if("eth_estimateGas"===r&&n.message){const e=n.message;if(!e.match(/revert/i)&&e.match(/insufficient funds/i))return u("insufficient funds","INSUFFICIENT_FUNDS",{transaction:t.params[0],info:{payload:t,error:n}})}if("eth_call"===r||"eth_estimateGas"===r){const e=Au(n),s=xr.getBuiltinCallException("eth_call"===r?"call":"estimateGas",t.params[0],e?e.data:null);return s.info={error:n,payload:t},s}const s=JSON.stringify(function(t){const e=[];return Eu(t,e),e}(n));if("string"==typeof n.message&&n.message.match(/user denied|ethers-user-denied/i))return u("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[r]||"unknown",reason:"rejected",info:{payload:t,error:n}});if("eth_sendRawTransaction"===r||"eth_sendTransaction"===r){const e=t.params[0];if(s.match(/insufficient funds|base fee exceeds gas limit/i))return u("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:e,info:{error:n}});if(s.match(/nonce/i)&&s.match(/too low/i))return u("nonce has already been used","NONCE_EXPIRED",{transaction:e,info:{error:n}});if(s.match(/replacement transaction/i)&&s.match(/underpriced/i))return u("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:e,info:{error:n}});if(s.match(/only replay-protected/i))return u("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:r,info:{transaction:e,info:{error:n}}})}let i=!!s.match(/the method .* does not exist/i);return i||n&&n.details&&n.details.startsWith("Unauthorized method:")&&(i=!0),i?u("unsupported operation","UNSUPPORTED_OPERATION",{operation:t.method,info:{error:n,payload:t}}):u("could not coalesce error","UNKNOWN_ERROR",{error:n,payload:t})}send(t,e){if(this.destroyed)return Promise.reject(u("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:t}));const r=this.#ee++,n=new Promise(((n,s)=>{this.#re.push({resolve:n,reject:s,payload:{method:t,params:e,id:r,jsonrpc:"2.0"}})}));return this.#oe(),n}async getSigner(t){null==t&&(t=0);const e=this.send("eth_accounts",[]);if("number"==typeof t){const r=await e;if(t>=r.length)throw new Error("no such account");return new mu(this,r[t])}const{accounts:r}=await i({network:this.getNetwork(),accounts:e});t=ue(t);for(const e of r)if(ue(e)===t)return new mu(this,t);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map((t=>new mu(this,t)))}destroy(){this.#ne&&(clearTimeout(this.#ne),this.#ne=null);for(const{payload:t,reject:e}of this.#re)e(u("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:t.method}));this.#re=[],super.destroy()}}class wu extends yu{#ae;constructor(t,e){super(t,e),this.#ae=4e3}_getSubscriber(t){const e=super._getSubscriber(t);return pu(e)&&(e.pollingInterval=this.#ae),e}get pollingInterval(){return this.#ae}set pollingInterval(t){if(!Number.isInteger(t)||t<0)throw new Error("invalid interval");this.#ae=t,this._forEachSubscriber((t=>{pu(t)&&(t.pollingInterval=this.#ae)}))}}class bu extends wu{#ce;constructor(t,e,r){null==t&&(t="http://localhost:8545"),super(e,r),this.#ce="string"==typeof t?new Tc(t):t.clone()}_getConnection(){return this.#ce.clone()}async send(t,e){return await this._start(),await super.send(t,e)}async _send(t){const e=this._getConnection();e.body=JSON.stringify(t),e.setHeader("content-type","application/json");const r=await e.send();r.assertOk();let n=r.bodyJson;return Array.isArray(n)||(n=[n]),n}}function Au(t){if(null==t)return null;if("string"==typeof t.message&&t.message.match(/revert/i)&&A(t.data))return{message:t.message,data:t.data};if("object"==typeof t){for(const e in t){const r=Au(t[e]);if(r)return r}return null}if("string"==typeof t)try{return Au(JSON.parse(t))}catch(t){}return null}function Eu(t,e){if(null!=t){if("string"==typeof t.message&&e.push(t.message),"object"==typeof t)for(const r in t)Eu(t[r],e);if("string"==typeof t)try{return Eu(JSON.parse(t),e)}catch(t){}}}const vu="9f7d929b018cdffb338517efa06f58359e86ff1ffd350bc889738523659e7972";class ku extends bu{apiKey;constructor(t,e){null==t&&(t="mainnet");const r=Gc.from(t);null==e&&(e=vu);const n={polling:!0,staticNetwork:r};super(ku.getRequest(r,e),r,n),o(this,{apiKey:e})}_getProvider(t){try{return new ku(t,this.apiKey)}catch(t){}return super._getProvider(t)}static getRequest(t,e){null==e&&(e=vu);const r=new Tc(`https://${function(t){switch(t){case"mainnet":return"rpc.ankr.com/eth";case"goerli":return"rpc.ankr.com/eth_goerli";case"matic":return"rpc.ankr.com/polygon";case"arbitrum":return"rpc.ankr.com/arbitrum"}f(!1,"unsupported network","network",t)}(t.name)}/${e}`);return r.allowGzip=!0,e===vu&&(r.retryFunc=async(t,e,r)=>(Sc("AnkrProvider"),!0)),r}getRpcError(t,e){return"eth_sendRawTransaction"===t.method&&e&&e.error&&"INTERNAL_ERROR: could not replace existing tx"===e.error.message&&(e.error.message="replacement transaction underpriced"),super.getRpcError(t,e)}isCommunityResource(){return this.apiKey===vu}}const Nu="_gg7wSSi0KMBsdKnGVfHDueq6xMB9EkC";class Ru extends bu{apiKey;constructor(t,e){null==t&&(t="mainnet");const r=Gc.from(t);null==e&&(e=Nu),super(Ru.getRequest(r,e),r,{staticNetwork:r}),o(this,{apiKey:e})}_getProvider(t){try{return new Ru(t,this.apiKey)}catch(t){}return super._getProvider(t)}async _perform(t){if("getTransactionResult"===t.method){const{trace:e,tx:r}=await i({trace:this.send("trace_transaction",[t.hash]),tx:this.getTransaction(t.hash)});if(null==e||null==r)return null;let n,s=!1;try{n=e[0].result.output,s="Reverted"===e[0].error}catch(t){}if(n)return h(!s,"an error occurred during transaction executions","CALL_EXCEPTION",{action:"getTransactionResult",data:n,reason:null,transaction:r,invocation:null,revert:null}),n;h(!1,"could not parse trace result","BAD_DATA",{value:e})}return await super._perform(t)}isCommunityResource(){return this.apiKey===Nu}static getRequest(t,e){null==e&&(e=Nu);const r=new Tc(`https://${function(t){switch(t){case"mainnet":return"eth-mainnet.alchemyapi.io";case"goerli":return"eth-goerli.g.alchemy.com";case"sepolia":return"eth-sepolia.g.alchemy.com";case"arbitrum":return"arb-mainnet.g.alchemy.com";case"arbitrum-goerli":return"arb-goerli.g.alchemy.com";case"base":return"base-mainnet.g.alchemy.com";case"base-goerli":return"base-goerli.g.alchemy.com";case"matic":return"polygon-mainnet.g.alchemy.com";case"matic-mumbai":return"polygon-mumbai.g.alchemy.com";case"optimism":return"opt-mainnet.g.alchemy.com";case"optimism-goerli":return"opt-goerli.g.alchemy.com"}f(!1,"unsupported network","network",t)}(t.name)}/v2/${e}`);return r.allowGzip=!0,e===Nu&&(r.retryFunc=async(t,e,r)=>(Sc("alchemy"),!0)),r}}class Pu extends bu{constructor(t){null==t&&(t="mainnet");const e=Gc.from(t);f("mainnet"===e.name,"unsupported network","network",t),super("https://cloudflare-eth.com/",e,{staticNetwork:e})}}const Iu="org.ethers.plugins.provider.Etherscan";class Tu extends Bc{baseUrl;constructor(t){super(Iu),o(this,{baseUrl:t})}clone(){return new Tu(this.baseUrl)}}const Ou=["enableCcipRead"];let Cu=1;class xu extends Wl{network;apiKey;#le;constructor(t,e){const r=null!=e?e:null;super();const n=Gc.from(t);this.#le=n.getPlugin(Iu),o(this,{apiKey:r,network:n}),this.getBaseUrl()}getBaseUrl(){if(this.#le)return this.#le.baseUrl;switch(this.network.name){case"mainnet":return"https://api.etherscan.io";case"goerli":return"https://api-goerli.etherscan.io";case"sepolia":return"https://api-sepolia.etherscan.io";case"arbitrum":return"https://api.arbiscan.io";case"arbitrum-goerli":return"https://api-goerli.arbiscan.io";case"matic":return"https://api.polygonscan.com";case"matic-mumbai":return"https://api-testnet.polygonscan.com";case"optimism":return"https://api-optimistic.etherscan.io";case"optimism-goerli":return"https://api-goerli-optimistic.etherscan.io";case"bnb":return"http://api.bscscan.com";case"bnbt":return"http://api-testnet.bscscan.com"}f(!1,"unsupported network","network",this.network)}getUrl(t,e){const r=Object.keys(e).reduce(((t,r)=>{const n=e[r];return null!=n&&(t+=`&${r}=${n}`),t}),""),n=this.apiKey?`&apikey=${this.apiKey}`:"";return`${this.getBaseUrl()}/api?module=${t}${r}${n}`}getPostUrl(){return`${this.getBaseUrl()}/api`}getPostData(t,e){return e.module=t,e.apikey=this.apiKey,e}async detectNetwork(){return this.network}async fetch(t,e,r){const n=Cu++,s=r?this.getPostUrl():this.getUrl(t,e),i=r?this.getPostData(t,e):null;this.emit("debug",{action:"sendRequest",id:n,url:s,payload:i});const o=new Tc(s);o.setThrottleParams({slotInterval:1e3}),o.retryFunc=(t,e,r)=>(this.isCommunityResource()&&Sc("Etherscan"),Promise.resolve(!0)),o.processFunc=async(e,r)=>{const s=r.hasBody()?JSON.parse(D(r.body)):{},i=("string"==typeof s.result?s.result:"").toLowerCase().indexOf("rate limit")>=0;return"proxy"===t?s&&0==s.status&&"NOTOK"==s.message&&i&&(this.emit("debug",{action:"receiveError",id:n,reason:"proxy-NOTOK",error:s}),r.throwThrottleError(s.result,2e3)):i&&(this.emit("debug",{action:"receiveError",id:n,reason:"null result",error:s.result}),r.throwThrottleError(s.result,2e3)),r},i&&(o.setHeader("content-type","application/x-www-form-urlencoded; charset=UTF-8"),o.body=Object.keys(i).map((t=>`${t}=${i[t]}`)).join("&"));const a=await o.send();try{a.assertOk()}catch(t){this.emit("debug",{action:"receiveError",id:n,error:t,reason:"assertOk"}),h(!1,"response error","SERVER_ERROR",{request:o,response:a})}a.hasBody()||(this.emit("debug",{action:"receiveError",id:n,error:"missing body",reason:"null body"}),h(!1,"missing response","SERVER_ERROR",{request:o,response:a}));const c=JSON.parse(D(a.body));return"proxy"===t?("2.0"!=c.jsonrpc&&(this.emit("debug",{action:"receiveError",id:n,result:c,reason:"invalid JSON-RPC"}),h(!1,"invalid JSON-RPC response (missing jsonrpc=\'2.0\')","SERVER_ERROR",{request:o,response:a,info:{result:c}})),c.error&&(this.emit("debug",{action:"receiveError",id:n,result:c,reason:"JSON-RPC error"}),h(!1,"error response","SERVER_ERROR",{request:o,response:a,info:{result:c}})),this.emit("debug",{action:"receiveRequest",id:n,result:c}),c.result):0!=c.status||"No records found"!==c.message&&"No transactions found"!==c.message?((1!=c.status||"string"==typeof c.message&&!c.message.match(/^OK/))&&(this.emit("debug",{action:"receiveError",id:n,result:c}),h(!1,"error response","SERVER_ERROR",{request:o,response:a,info:{result:c}})),this.emit("debug",{action:"receiveRequest",id:n,result:c}),c.result):(this.emit("debug",{action:"receiveRequest",id:n,result:c}),c.result)}_getTransactionPostData(t){const e={};for(let r in t){if(Ou.indexOf(r)>=0)continue;if(null==t[r])continue;let n=t[r];"type"===r&&0===n||"blockTag"===r&&"latest"===n||(n={type:!0,gasLimit:!0,gasPrice:!0,maxFeePerGs:!0,maxPriorityFeePerGas:!0,nonce:!0,value:!0}[r]?$(n):"accessList"===r?"["+on(n).map((t=>`{address:"${t.address}",storageKeys:["${t.storageKeys.join(\'","\')}"]}`)).join(",")+"]":k(n),e[r]=n)}return e}_checkError(t,e,r){let n="";if(c(e,"SERVER_ERROR")){try{n=e.info.result.error.message}catch(t){}if(!n)try{n=e.info.message}catch(t){}}if("estimateGas"===t.method&&!n.match(/revert/i)&&n.match(/insufficient funds/i)&&h(!1,"insufficient funds","INSUFFICIENT_FUNDS",{transaction:t.transaction}),("call"===t.method||"estimateGas"===t.method)&&n.match(/execution reverted/i)){let r="";try{r=e.info.result.error.data}catch(e){}const n=xr.getBuiltinCallException(t.method,t.transaction,r);throw n.info={request:t,error:e},n}if(n&&"broadcastTransaction"===t.method){const e=ul.from(t.signedTransaction);n.match(/replacement/i)&&n.match(/underpriced/i)&&h(!1,"replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:e}),n.match(/insufficient funds/)&&h(!1,"insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:e}),n.match(/same hash was already imported|transaction nonce is too low|nonce too low/)&&h(!1,"nonce has already been used","NONCE_EXPIRED",{transaction:e})}throw e}async _detectNetwork(){return this.network}async _perform(t){switch(t.method){case"chainId":return this.network.chainId;case"getBlockNumber":return this.fetch("proxy",{action:"eth_blockNumber"});case"getGasPrice":return this.fetch("proxy",{action:"eth_gasPrice"});case"getPriorityFee":if("mainnet"===this.network.name)return"1000000000";if("optimism"===this.network.name)return"1000000";throw new Error("fallback onto the AbstractProvider default");case"getBalance":return this.fetch("account",{action:"balance",address:t.address,tag:t.blockTag});case"getTransactionCount":return this.fetch("proxy",{action:"eth_getTransactionCount",address:t.address,tag:t.blockTag});case"getCode":return this.fetch("proxy",{action:"eth_getCode",address:t.address,tag:t.blockTag});case"getStorage":return this.fetch("proxy",{action:"eth_getStorageAt",address:t.address,position:t.position,tag:t.blockTag});case"broadcastTransaction":return this.fetch("proxy",{action:"eth_sendRawTransaction",hex:t.signedTransaction},!0).catch((e=>this._checkError(t,e,t.signedTransaction)));case"getBlock":if("blockTag"in t)return this.fetch("proxy",{action:"eth_getBlockByNumber",tag:t.blockTag,boolean:t.includeTransactions?"true":"false"});h(!1,"getBlock by blockHash not supported by Etherscan","UNSUPPORTED_OPERATION",{operation:"getBlock(blockHash)"});case"getTransaction":return this.fetch("proxy",{action:"eth_getTransactionByHash",txhash:t.hash});case"getTransactionReceipt":return this.fetch("proxy",{action:"eth_getTransactionReceipt",txhash:t.hash});case"call":{if("latest"!==t.blockTag)throw new Error("EtherscanProvider does not support blockTag for call");const e=this._getTransactionPostData(t.transaction);e.module="proxy",e.action="eth_call";try{return await this.fetch("proxy",e,!0)}catch(e){return this._checkError(t,e,t.transaction)}}case"estimateGas":{const e=this._getTransactionPostData(t.transaction);e.module="proxy",e.action="eth_estimateGas";try{return await this.fetch("proxy",e,!0)}catch(e){return this._checkError(t,e,t.transaction)}}}return super._perform(t)}async getNetwork(){return this.network}async getEtherPrice(){return"mainnet"!==this.network.name?0:parseFloat((await this.fetch("stats",{action:"ethprice"})).ethusd)}async getContract(t){let e=this._getAddress(t);var r;(r=e)&&"function"==typeof r.then&&(e=await e);try{const t=await this.fetch("contract",{action:"getabi",address:e}),r=JSON.parse(t);return new zn(e,r,this)}catch(t){return null}}isCommunityResource(){return null==this.apiKey}}const Su=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}().WebSocket;class Bu{#kt;#P;get filter(){return JSON.parse(this.#P)}#ue;#he;#fe;constructor(t,e){this.#kt=t,this.#P=JSON.stringify(e),this.#ue=null,this.#he=null,this.#fe=null}start(){this.#ue=this.#kt.send("eth_subscribe",this.filter).then((t=>(this.#kt._register(t,this),t)))}stop(){this.#ue.then((t=>{this.#kt.send("eth_unsubscribe",[t])})),this.#ue=null}pause(t){h(t,"preserve logs while paused not supported by SocketSubscriber yet","UNSUPPORTED_OPERATION",{operation:"pause(false)"}),this.#he=!!t}resume(){this.#he=null}_handleMessage(t){if(null!=this.#ue&&null===this.#he){let e=this.#fe;e=null==e?this._emit(this.#kt,t):e.then((async()=>{await this._emit(this.#kt,t)})),this.#fe=e.then((()=>{this.#fe===e&&(this.#fe=null)}))}}async _emit(t,e){throw new Error("sub-classes must implemente this; _emit")}}class Uu extends Bu{constructor(t){super(t,["newHeads"])}async _emit(t,e){t.emit("block",parseInt(e.number))}}class Du extends Bu{constructor(t){super(t,["newPendingTransactions"])}async _emit(t,e){t.emit("pending",e)}}class Fu extends Bu{#de;get logFilter(){return JSON.parse(this.#de)}constructor(t,e){super(t,["logs",e]),this.#de=JSON.stringify(e)}async _emit(t,e){t.emit(this.logFilter,t._wrapLog(e,t._network))}}class Lu extends yu{#pe;#St;#ge;constructor(t,e){const r=Object.assign({},null!=e?e:{});f(null==r.batchMaxCount||1===r.batchMaxCount,"sockets-based providers do not support batches","options.batchMaxCount",e),r.batchMaxCount=1,null==r.staticNetwork&&(r.staticNetwork=!0),super(t,r),this.#pe=new Map,this.#St=new Map,this.#ge=new Map}_getSubscriber(t){switch(t.type){case"close":return new Vl("close");case"block":return new Uu(this);case"pending":return new Du(this);case"event":return new Fu(this,t.filter);case"orphan":if("drop-log"===t.filter.orphan)return new Vl("drop-log")}return super._getSubscriber(t)}_register(t,e){this.#St.set(t,e);const r=this.#ge.get(t);if(r){for(const t of r)e._handleMessage(t);this.#ge.delete(t)}}async _send(t){f(!Array.isArray(t),"WebSocket does not support batch send","payload",t);const e=new Promise(((e,r)=>{this.#pe.set(t.id,{payload:t,resolve:e,reject:r})}));return await this._waitUntilReady(),await this._write(JSON.stringify(t)),[await e]}async _processMessage(t){const e=JSON.parse(t);if(e&&"object"==typeof e&&"id"in e){const t=this.#pe.get(e.id);if(null==t)return void this.emit("error",u("received result for unknown id","UNKNOWN_ERROR",{reasonCode:"UNKNOWN_ID",result:e}));this.#pe.delete(e.id),t.resolve(e)}else{if(!e||"eth_subscription"!==e.method)return void this.emit("error",u("received unexpected message","UNKNOWN_ERROR",{reasonCode:"UNEXPECTED_MESSAGE",result:e}));{const t=e.params.subscription,r=this.#St.get(t);if(r)r._handleMessage(e.params.result);else{let r=this.#ge.get(t);null==r&&(r=[],this.#ge.set(t,r)),r.push(e.params.result)}}}}async _write(t){throw new Error("sub-classes must override this")}}class Mu extends Lu{#ce;#me;get websocket(){if(null==this.#me)throw new Error("websocket closed");return this.#me}constructor(t,e,r){super(e,r),"string"==typeof t?(this.#ce=()=>new Su(t),this.#me=this.#ce()):"function"==typeof t?(this.#ce=t,this.#me=t()):(this.#ce=null,this.#me=t),this.websocket.onopen=async()=>{try{await this._start(),this.resume()}catch(t){console.log("failed to start WebsocketProvider",t)}},this.websocket.onmessage=t=>{this._processMessage(t.data)}}async _write(t){this.websocket.send(t)}async destroy(){null!=this.#me&&(this.#me.close(),this.#me=null),super.destroy()}}const Gu="84842078b09946638c03157f83405213";class Hu extends Mu{projectId;projectSecret;constructor(t,e){const r=new ju(t,e),n=r._getConnection();h(!n.credentials,"INFURA WebSocket project secrets unsupported","UNSUPPORTED_OPERATION",{operation:"InfuraProvider.getWebSocketProvider()"}),super(n.url.replace(/^http/i,"ws").replace("/v3/","/ws/v3/"),t),o(this,{projectId:r.projectId,projectSecret:r.projectSecret})}isCommunityResource(){return this.projectId===Gu}}class ju extends bu{projectId;projectSecret;constructor(t,e,r){null==t&&(t="mainnet");const n=Gc.from(t);null==e&&(e=Gu),null==r&&(r=null),super(ju.getRequest(n,e,r),n,{staticNetwork:n}),o(this,{projectId:e,projectSecret:r})}_getProvider(t){try{return new ju(t,this.projectId,this.projectSecret)}catch(t){}return super._getProvider(t)}isCommunityResource(){return this.projectId===Gu}static getWebSocketProvider(t,e){return new Hu(t,e)}static getRequest(t,e,r){null==e&&(e=Gu),null==r&&(r=null);const n=new Tc(`https://${function(t){switch(t){case"mainnet":return"mainnet.infura.io";case"goerli":return"goerli.infura.io";case"sepolia":return"sepolia.infura.io";case"arbitrum":return"arbitrum-mainnet.infura.io";case"arbitrum-goerli":return"arbitrum-goerli.infura.io";case"linea":return"linea-mainnet.infura.io";case"linea-goerli":return"linea-goerli.infura.io";case"matic":return"polygon-mainnet.infura.io";case"matic-mumbai":return"polygon-mumbai.infura.io";case"optimism":return"optimism-mainnet.infura.io";case"optimism-goerli":return"optimism-goerli.infura.io"}f(!1,"unsupported network","network",t)}(t.name)}/v3/${e}`);return n.allowGzip=!0,r&&n.setCredentials("",r),e===Gu&&(n.retryFunc=async(t,e,r)=>(Sc("InfuraProvider"),!0)),n}}const Qu="919b412a057b5e9c9b6dce193c5a60242d6efadb";class _u extends bu{token;constructor(t,e){null==t&&(t="mainnet");const r=Gc.from(t);null==e&&(e=Qu),super(_u.getRequest(r,e),r,{staticNetwork:r}),o(this,{token:e})}_getProvider(t){try{return new _u(t,this.token)}catch(t){}return super._getProvider(t)}isCommunityResource(){return this.token===Qu}static getRequest(t,e){null==e&&(e=Qu);const r=new Tc(`https://${function(t){switch(t){case"mainnet":return"ethers.quiknode.pro";case"goerli":return"ethers.ethereum-goerli.quiknode.pro";case"arbitrum":return"ethers.arbitrum-mainnet.quiknode.pro";case"arbitrum-goerli":return"ethers.arbitrum-goerli.quiknode.pro";case"matic":return"ethers.matic.quiknode.pro";case"matic-mumbai":return"ethers.matic-testnet.quiknode.pro";case"optimism":return"ethers.optimism.quiknode.pro";case"optimism-goerli":return"ethers.optimism-goerli.quiknode.pro"}f(!1,"unsupported network","network",t)}(t.name)}/${e}`);return r.allowGzip=!0,e===Qu&&(r.retryFunc=async(t,e,r)=>(Sc("QuickNodeProvider"),!0)),r}}const Vu=BigInt("1"),Ku=BigInt("2");function Ju(){return(new Date).getTime()}function zu(t){return JSON.stringify(t,((t,e)=>"bigint"==typeof e?{type:"bigint",value:e.toString()}:e))}const qu={stallTimeout:400,priority:1,weight:1},Wu={blockNumber:-2,requests:0,lateResponses:0,errorResponses:0,outOfSync:-1,unsupportedEvents:0,rollingDuration:0,score:0,_network:null,_updateNumber:null,_totalTime:0,_lastFatalError:null,_lastFatalErrorTimestamp:0};function Yu(t){if(null==t)return"null";if(Array.isArray(t))return"["+t.map(Yu).join(",")+"]";if("object"==typeof t&&"function"==typeof t.toJSON)return Yu(t.toJSON());switch(typeof t){case"boolean":case"symbol":return t.toString();case"bigint":case"number":return BigInt(t).toString();case"string":return JSON.stringify(t);case"object":{const e=Object.keys(t);return e.sort(),"{"+e.map((e=>`${JSON.stringify(e)}:${Yu(t[e])}`)).join(",")+"}"}}throw console.log("Could not serialize",t),new Error("Hmm...")}function Zu(t){if("error"in t){const e=t.error;return{tag:Yu(e),value:e}}const e=t.result;return{tag:Yu(e),value:e}}function Xu(t,e){const r=new Map;for(const{value:t,tag:n,weight:s}of e){const e=r.get(n)||{value:t,weight:0};e.weight+=s,r.set(n,e)}let n=null;for(const e of r.values())e.weight>=t&&(!n||e.weight>n.weight)&&(n=e);if(n)return n.value}function $u(t,e){let r=0;const n=new Map;let s=null;const i=[];for(const{value:t,tag:o,weight:a}of e)if(t instanceof Error){const e=n.get(o)||{value:t,weight:0};e.weight+=a,n.set(o,e),(null==s||e.weight>s.weight)&&(s=e)}else i.push(BigInt(t)),r+=a;if(r<t)return s&&s.weight>=t?s.value:void 0;i.sort(((t,e)=>t<e?-1:e>t?1:0));const o=Math.floor(i.length/2);return i.length%2?i[o]:(i[o-1]+i[o]+Vu)/Ku}function th(t,e){const r=Xu(t,e);if(void 0!==r)return r;for(const t of e)if(t.value)return t.value}class eh extends Wl{quorum;eventQuorum;eventWorkers;#ye;#we;#be;constructor(t,e,r){super(e,r),this.#ye=t.map((t=>t instanceof Wl?Object.assign({provider:t},qu,Wu):Object.assign({},qu,t,Wu))),this.#we=-2,this.#be=null,r&&null!=r.quorum?this.quorum=r.quorum:this.quorum=Math.ceil(this.#ye.reduce(((t,e)=>t+e.weight),0)/2),this.eventQuorum=1,this.eventWorkers=1,f(this.quorum<=this.#ye.reduce(((t,e)=>t+e.weight),0),"quorum exceed provider wieght","quorum",this.quorum)}get providerConfigs(){return this.#ye.map((t=>{const e=Object.assign({},t);for(const t in e)"_"===t[0]&&delete e[t];return e}))}async _detectNetwork(){return Gc.from(K(await this._perform({method:"chainId"})))}async _translatePerform(t,e){switch(e.method){case"broadcastTransaction":return await t.broadcastTransaction(e.signedTransaction);case"call":return await t.call(Object.assign({},e.transaction,{blockTag:e.blockTag}));case"chainId":return(await t.getNetwork()).chainId;case"estimateGas":return await t.estimateGas(e.transaction);case"getBalance":return await t.getBalance(e.address,e.blockTag);case"getBlock":{const r="blockHash"in e?e.blockHash:e.blockTag;return await t.getBlock(r,e.includeTransactions)}case"getBlockNumber":return await t.getBlockNumber();case"getCode":return await t.getCode(e.address,e.blockTag);case"getGasPrice":return(await t.getFeeData()).gasPrice;case"getPriorityFee":return(await t.getFeeData()).maxPriorityFeePerGas;case"getLogs":return await t.getLogs(e.filter);case"getStorage":return await t.getStorage(e.address,e.position,e.blockTag);case"getTransaction":return await t.getTransaction(e.hash);case"getTransactionCount":return await t.getTransactionCount(e.address,e.blockTag);case"getTransactionReceipt":return await t.getTransactionReceipt(e.hash);case"getTransactionResult":return await t.getTransactionResult(e.hash)}}#Ae(t){const e=Array.from(t).map((t=>t.config)),r=this.#ye.slice();!function(t){for(let e=t.length-1;e>0;e--){const r=Math.floor(Math.random()*(e+1)),n=t[e];t[e]=t[r],t[r]=n}}(r),r.sort(((t,e)=>t.priority-e.priority));for(const t of r)if(!t._lastFatalError&&-1===e.indexOf(t))return t;return null}#Ee(t,e){const r=this.#Ae(t);if(null==r)return null;const n={config:r,result:null,didBump:!1,perform:null,staller:null},s=Ju();return n.perform=(async()=>{try{r.requests++;const t=await this._translatePerform(r.provider,e);n.result={result:t}}catch(t){r.errorResponses++,n.result={error:t}}const t=Ju()-s;r._totalTime+=t,r.rollingDuration=.95*r.rollingDuration+.05*t,n.perform=null})(),n.staller=(async()=>{var t;await(t=r.stallTimeout,new Promise((e=>{setTimeout(e,t)}))),n.staller=null})(),t.add(n),n}async#ve(){let t=this.#be;if(!t){const e=[];this.#ye.forEach((t=>{e.push((async()=>{await async function(t,e){for(;(t.blockNumber<0||t.blockNumber<0)&&(t._updateNumber||(t._updateNumber=(async()=>{try{const e=await t.provider.getBlockNumber();e>t.blockNumber&&(t.blockNumber=e)}catch(e){t.blockNumber=-2,t._lastFatalError=e,t._lastFatalErrorTimestamp=Ju()}t._updateNumber=null})()),await t._updateNumber,t.outOfSync++,!t._lastFatalError););}(t),t._lastFatalError||(t._network=await t.provider.getNetwork())})())})),this.#be=t=(async()=>{await Promise.all(e);let t=null;for(const e of this.#ye){if(e._lastFatalError)continue;const r=e._network;null==t?t=r.chainId:r.chainId!==t&&h(!1,"cannot mix providers on different networks","UNSUPPORTED_OPERATION",{operation:"new FallbackProvider"})}})()}await t}async#ke(t,e){const r=[];for(const e of t)if(null!=e.result){const{tag:t,value:n}=Zu(e.result);r.push({tag:t,value:n,weight:e.config.weight})}if(!(r.reduce(((t,e)=>t+e.weight),0)<this.quorum)){switch(e.method){case"getBlockNumber":{-2===this.#we&&(this.#we=Math.ceil(W($u(this.quorum,this.#ye.filter((t=>!t._lastFatalError)).map((t=>({value:t.blockNumber,tag:W(t.blockNumber).toString(),weight:t.weight})))))));const t=function(t,e){if(1===t)return W($u(t,e),"%internal");const r=new Map,n=(t,e)=>{const n=r.get(t)||{result:t,weight:0};n.weight+=e,r.set(t,n)};for(const{weight:t,value:r}of e){const e=W(r);n(e-1,t),n(e,t),n(e+1,t)}let s,i=0;for(const{weight:e,result:n}of r.values())e>=t&&(e>i||null!=s&&e===i&&n>s)&&(i=e,s=n);return s}(this.quorum,r);if(void 0===t)return;return t>this.#we&&(this.#we=t),this.#we}case"getGasPrice":case"getPriorityFee":case"estimateGas":return $u(this.quorum,r);case"getBlock":return"blockTag"in e&&"pending"===e.blockTag?th(this.quorum,r):Xu(this.quorum,r);case"call":case"chainId":case"getBalance":case"getTransactionCount":case"getCode":case"getStorage":case"getTransaction":case"getTransactionReceipt":case"getLogs":return Xu(this.quorum,r);case"broadcastTransaction":return th(this.quorum,r)}h(!1,"unsupported method","UNSUPPORTED_OPERATION",{operation:`_perform(${zu(e.method)})`})}}async#Ne(t,e){if(0===t.size)throw new Error("no runners?!");const r=[];let n=0;for(const e of t)e.perform&&r.push(e.perform),e.staller?r.push(e.staller):e.didBump||(e.didBump=!0,n++);const s=await this.#ke(t,e);if(void 0!==s){if(s instanceof Error)throw s;return s}for(let r=0;r<n;r++)this.#Ee(t,e);return h(r.length>0,"quorum not met","SERVER_ERROR",{request:"%sub-requests",info:{request:e,results:Array.from(t).map((t=>zu(t.result)))}}),await Promise.race(r),await this.#Ne(t,e)}async _perform(t){if("broadcastTransaction"===t.method){const e=this.#ye.map((t=>null)),r=this.#ye.map((async({provider:r,weight:n},s)=>{try{const i=await r._perform(t);e[s]=Object.assign(Zu({result:i}),{weight:n})}catch(t){e[s]=Object.assign(Zu({error:t}),{weight:n})}}));for(;;){const t=e.filter((t=>null!=t));for(const{value:e}of t)if(!(e instanceof Error))return e;const n=Xu(this.quorum,e.filter((t=>null!=t)));if(c(n,"INSUFFICIENT_FUNDS"))throw n;const s=r.filter(((t,r)=>null==e[r]));if(0===s.length)break;await Promise.race(s)}const n=th(this.quorum,e);if(h(void 0!==n,"problem multi-broadcasting","SERVER_ERROR",{request:"%sub-requests",info:{request:t,results:e.map(zu)}}),n instanceof Error)throw n;return n}await this.#ve();const e=new Set;let r=0;for(;;){const n=this.#Ee(e,t);if(null==n)break;if(r+=n.config.weight,r>=this.quorum)break}const n=await this.#Ne(e,t);for(const t of e)t.perform&&null==t.result&&t.config.lateResponses++;return n}async destroy(){for(const{provider:t}of this.#ye)t.destroy();super.destroy()}}const rh="goerli kovan sepolia classicKotti optimism-goerli arbitrum-goerli matic-mumbai bnbt".split(" ");function nh(t,e){null==e&&(e={});const r=t=>"-"!==e[t]&&("string"==typeof e.exclusive?t===e.exclusive:!Array.isArray(e.exclusive)||-1!==e.exclusive.indexOf(t));if("string"==typeof t&&t.match(/^https?:/))return new bu(t);if("string"==typeof t&&t.match(/^wss?:/)||(n=t)&&"function"==typeof n.send&&"function"==typeof n.close)return new Mu(t);var n;let s=null;try{s=Gc.from(t)}catch(t){}const i=[];if(r("publicPolygon")&&s&&"matic"===s.name&&i.push(new bu("https://polygon-rpc.com/",s,{staticNetwork:s})),r("alchemy"))try{i.push(new Ru(t,e.alchemy))}catch(t){}if(r("ankr")&&null!=e.ankr)try{i.push(new ku(t,e.ankr))}catch(t){}if(r("cloudflare"))try{i.push(new Pu(t))}catch(t){}if(r("etherscan"))try{i.push(new xu(t,e.etherscan))}catch(t){}if(r("infura"))try{let r,n=e.infura;"object"==typeof n&&(r=n.projectSecret,n=n.projectId),i.push(new ju(t,n,r))}catch(t){}if(r("quicknode"))try{let r=e.quicknode;i.push(new _u(t,r))}catch(t){}if(h(i.length,"unsupported default network","UNSUPPORTED_OPERATION",{operation:"getDefaultProvider"}),1===i.length)return i[0];let o=Math.floor(i.length/2);return o>2&&(o=2),s&&-1!==rh.indexOf(s.name)&&(o=1),e&&e.quorum&&(o=e.quorum),new eh(i,void 0,{quorum:o})}class sh extends iu{signer;#Re;#Pe;constructor(t){super(t.provider),o(this,{signer:t}),this.#Re=null,this.#Pe=0}async getAddress(){return this.signer.getAddress()}connect(t){return new sh(this.signer.connect(t))}async getNonce(t){if("pending"===t){null==this.#Re&&(this.#Re=super.getNonce("pending"));const t=this.#Pe;return await this.#Re+t}return super.getNonce(t)}increment(){this.#Pe++}reset(){this.#Pe=0,this.#Re=null}async sendTransaction(t){const e=this.getNonce("pending");return this.increment(),(t=await this.signer.populateTransaction(t)).nonce=await e,await this.signer.sendTransaction(t)}signTransaction(t){return this.signer.signTransaction(t)}signMessage(t){return this.signer.signMessage(t)}signTypedData(t,e,r){return this.signer.signTypedData(t,e,r)}}class ih extends wu{#rt;constructor(t,e){super(e,{batchMaxCount:1}),this.#rt=async(e,r)=>{const n={method:e,params:r};this.emit("debug",{action:"sendEip1193Request",payload:n});try{const e=await t.request(n);return this.emit("debug",{action:"receiveEip1193Result",result:e}),e}catch(t){const e=new Error(t.message);throw e.code=t.code,e.data=t.data,e.payload=n,this.emit("debug",{action:"receiveEip1193Error",error:e}),e}}}async send(t,e){return await this._start(),await super.send(t,e)}async _send(t){f(!Array.isArray(t),"EIP-1193 does not support batch request","payload",t);try{const e=await this.#rt(t.method,t.params||[]);return[{id:t.id,result:e}]}catch(e){return[{id:t.id,error:{code:e.code,data:e.data,message:e.message}}]}}getRpcError(t,e){switch((e=JSON.parse(JSON.stringify(e))).error.code||-1){case 4001:e.error.message=`ethers-user-denied: ${e.error.message}`;break;case 4200:e.error.message=`ethers-unsupported: ${e.error.message}`}return super.getRpcError(t,e)}async hasSigner(t){null==t&&(t=0);const e=await this.send("eth_accounts",[]);return"number"==typeof t?e.length>t:(t=t.toLowerCase(),0!==e.filter((e=>e.toLowerCase()===t)).length)}async getSigner(t){if(null==t&&(t=0),!await this.hasSigner(t))try{await this.#rt("eth_requestAccounts",[])}catch(t){const e=t.payload;throw this.getRpcError(e,{id:e.id,error:t})}return await super.getSigner(t)}}const oh="62e1ad51b37b8e00394bda3b";class ah extends bu{applicationId;applicationSecret;constructor(t,e,r){null==t&&(t="mainnet");const n=Gc.from(t);null==e&&(e=oh),null==r&&(r=null);const s={staticNetwork:n};super(ah.getRequest(n,e,r),n,s),o(this,{applicationId:e,applicationSecret:r})}_getProvider(t){try{return new ah(t,this.applicationId,this.applicationSecret)}catch(t){}return super._getProvider(t)}static getRequest(t,e,r){null==e&&(e=oh);const n=new Tc(`https://${function(t){switch(t){case"mainnet":return"eth-mainnet.gateway.pokt.network";case"goerli":return"eth-goerli.gateway.pokt.network";case"matic":return"poly-mainnet.gateway.pokt.network";case"matic-mumbai":return"polygon-mumbai-rpc.gateway.pokt.network"}f(!1,"unsupported network","network",t)}(t.name)}/v1/lb/${e}`);return n.allowGzip=!0,r&&n.setCredentials("",r),e===oh&&(n.retryFunc=async(t,e,r)=>(Sc("PocketProvider"),!0)),n}isCommunityResource(){return this.applicationId===oh}}const ch=void 0,lh=BigInt(-1),uh=BigInt(0),hh=BigInt(1),fh=BigInt(5),dh={};let ph="0000";for(;ph.length<80;)ph+=ph;function gh(t){let e=ph;for(;e.length<t;)e+=e;return BigInt("1"+e.substring(0,t))}function mh(t,e,r){const n=BigInt(e.width);if(e.signed){const e=hh<<n-hh;h(null==r||t>=-e&&t<e,"overflow","NUMERIC_FAULT",{operation:r,fault:"overflow",value:t}),t=t>uh?Q(V(t,n),n):-Q(V(-t,n),n)}else{const e=hh<<n;h(null==r||t>=0&&t<e,"overflow","NUMERIC_FAULT",{operation:r,fault:"overflow",value:t}),t=(t%e+e)%e&e-hh}return t}function yh(t){"number"==typeof t&&(t=`fixed128x${t}`);let e=!0,r=128,n=18;if("string"==typeof t)if("fixed"===t);else if("ufixed"===t)e=!1;else{const s=t.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);f(s,"invalid fixed format","format",t),e="u"!==s[1],r=parseInt(s[2]),n=parseInt(s[3])}else if(t){const s=t,i=(t,e,r)=>null==s[t]?r:(f(typeof s[t]===e,"invalid fixed format ("+t+" not "+e+")","format."+t,s[t]),s[t]);e=i("signed","boolean",e),r=i("width","number",r),n=i("decimals","number",n)}return f(r%8==0,"invalid FixedNumber width (not byte aligned)","format.width",r),f(n<=80,"invalid FixedNumber decimals (too large)","format.decimals",n),{signed:e,width:r,decimals:n,name:(e?"":"u")+"fixed"+String(r)+"x"+String(n)}}class wh{format;#Ie;#Te;#Oe;_value;constructor(t,e,r){m(t,dh,"FixedNumber"),this.#Te=e,this.#Ie=r;const n=function(t,e){let r="";t<uh&&(r="-",t*=lh);let n=t.toString();if(0===e)return r+n;for(;n.length<=e;)n=ph+n;const s=n.length-e;for(n=n.substring(0,s)+"."+n.substring(s);"0"===n[0]&&"."!==n[1];)n=n.substring(1);for(;"0"===n[n.length-1]&&"."!==n[n.length-2];)n=n.substring(0,n.length-1);return r+n}(e,r.decimals);o(this,{format:r.name,_value:n}),this.#Oe=gh(r.decimals)}get signed(){return this.#Ie.signed}get width(){return this.#Ie.width}get decimals(){return this.#Ie.decimals}get value(){return this.#Te}#Ce(t){f(this.format===t.format,"incompatible format; use fixedNumber.toFormat","other",t)}#xe(t,e){return t=mh(t,this.#Ie,e),new wh(dh,t,this.#Ie)}#Se(t,e){return this.#Ce(t),this.#xe(this.#Te+t.#Te,e)}addUnsafe(t){return this.#Se(t)}add(t){return this.#Se(t,"add")}#Be(t,e){return this.#Ce(t),this.#xe(this.#Te-t.#Te,e)}subUnsafe(t){return this.#Be(t)}sub(t){return this.#Be(t,"sub")}#Ue(t,e){return this.#Ce(t),this.#xe(this.#Te*t.#Te/this.#Oe,e)}mulUnsafe(t){return this.#Ue(t)}mul(t){return this.#Ue(t,"mul")}mulSignal(t){this.#Ce(t);const e=this.#Te*t.#Te;return h(e%this.#Oe===uh,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),this.#xe(e/this.#Oe,"mulSignal")}#De(t,e){return h(t.#Te!==uh,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),this.#Ce(t),this.#xe(this.#Te*this.#Oe/t.#Te,e)}divUnsafe(t){return this.#De(t)}div(t){return this.#De(t,"div")}divSignal(t){h(t.#Te!==uh,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),this.#Ce(t);const e=this.#Te*this.#Oe;return h(e%t.#Te===uh,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),this.#xe(e/t.#Te,"divSignal")}cmp(t){let e=this.value,r=t.value;const n=this.decimals-t.decimals;return n>0?r*=gh(n):n<0&&(e*=gh(-n)),e<r?-1:e>r?1:0}eq(t){return 0===this.cmp(t)}lt(t){return this.cmp(t)<0}lte(t){return this.cmp(t)<=0}gt(t){return this.cmp(t)>0}gte(t){return this.cmp(t)>=0}floor(){let t=this.#Te;return this.#Te<uh&&(t-=this.#Oe-hh),t=this.#Te/this.#Oe*this.#Oe,this.#xe(t,"floor")}ceiling(){let t=this.#Te;return this.#Te>uh&&(t+=this.#Oe-hh),t=this.#Te/this.#Oe*this.#Oe,this.#xe(t,"ceiling")}round(t){if(null==t&&(t=0),t>=this.decimals)return this;const e=this.decimals-t,r=fh*gh(e-1);let n=this.value+r;const s=gh(e);return n=n/s*s,mh(n,this.#Ie,"round"),new wh(dh,n,this.#Ie)}isZero(){return this.#Te===uh}isNegative(){return this.#Te<uh}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(t){return wh.fromString(this.toString(),t)}static fromValue(t,e,r){const n=null==e?0:W(e),s=yh(r);let i=K(t,"value");const o=n-s.decimals;if(o>0){const e=gh(o);h(i%e===uh,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:t}),i/=e}else o<0&&(i*=gh(-o));return mh(i,s,"fromValue"),new wh(dh,i,s)}static fromString(t,e){const r=t.match(/^(-?)([0-9]*)\\.?([0-9]*)$/);f(r&&r[2].length+r[3].length>0,"invalid FixedNumber string value","value",t);const n=yh(e);let s=r[2]||"0",i=r[3]||"";for(;i.length<n.decimals;)i+=ph;h(i.substring(n.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:t}),i=i.substring(0,n.decimals);const o=BigInt(r[1]+s+i);return mh(o,n,"fromString"),new wh(dh,o,n)}static fromBytes(t,e){let r=q(w(t,"value"));const n=yh(e);return n.signed&&(r=Q(r,n.width)),mh(r,n,"fromBytes"),new wh(dh,r,n)}}const bh=["wei","kwei","mwei","gwei","szabo","finney","ether"];function Ah(t,e){let r=18;if("string"==typeof e){const t=bh.indexOf(e);f(t>=0,"invalid unit","unit",e),r=3*t}else null!=e&&(r=W(e,"unit"));return wh.fromValue(t,r,{decimals:r,width:512}).toString()}function Eh(t,e){f("string"==typeof t,"value must be a string","value",t);let r=18;if("string"==typeof e){const t=bh.indexOf(e);f(t>=0,"invalid unit","unit",e),r=3*t}else null!=e&&(r=W(e,"unit"));return wh.fromString(t,{decimals:r,width:512}).value}function vh(t){return Ah(t,18)}function kh(t){return Eh(t,18)}function Nh(t){const e=w(t,"randomBytes");e[6]=15&e[6]|64,e[8]=63&e[8]|128;const r=k(e);return[r.substring(2,10),r.substring(10,14),r.substring(14,18),r.substring(18,22),r.substring(22,34)].join("-")}const Rh=" !#$%&\'()*+,-./<=>?@[]^_`{|}~",Ph=/^[a-z]*$/i;function Ih(t,e){let r=97;return t.reduce(((t,n)=>(n===e?r++:n.match(Ph)?t.push(String.fromCharCode(r)+n):(r=97,t.push(n)),t)),[])}function Th(t){return f("0"===t[0],"unsupported auwl data","data",t),function(t,e){for(let r=Rh.length-1;r>=0;r--)t=t.split(Rh[r]).join(e.substring(2*r,2*r+2));const r=[],n=t.replace(/(:|([0-9])|([A-Z][a-z]*))/g,((t,e,n,s)=>{if(n)for(let t=parseInt(n);t>=0;t--)r.push(";");else r.push(e.toLowerCase());return""}));if(n)throw new Error(`leftovers: ${JSON.stringify(n)}`);return Ih(Ih(r,";"),":")}(t.substring(1+2*Rh.length),t.substring(1,1+2*Rh.length))}class Oh{locale;constructor(t){o(this,{locale:t})}split(t){return t.toLowerCase().split(/\\s+/g)}join(t){return t.join(" ")}}class Ch extends Oh{#e;#Fe;constructor(t,e,r){super(t),this.#e=e,this.#Fe=r,this.#Le=null}get _data(){return this.#e}_decodeWords(){return Th(this.#e)}#Le;#Me(){if(null==this.#Le){const t=this._decodeWords();if(Ue(t.join("\\n")+"\\n")!==this.#Fe)throw new Error(`BIP39 Wordlist for ${this.locale} FAILED`);this.#Le=t}return this.#Le}getWord(t){const e=this.#Me();return f(t>=0&&t<e.length,`invalid word index: ${t}`,"index",t),e[t]}getWordIndex(t){return this.#Me().indexOf(t)}}let xh=null;class Sh extends Ch{constructor(){super("en","0erleonalorenseinceregesticitStanvetearctssi#ch2Athck&tneLl0And#Il.yLeOutO=S|S%b/ra@SurdU\'0Ce[Cid|CountCu\'Hie=IdOu,-Qui*Ro[TT]T%T*[Tu$0AptDD-tD*[Ju,M.UltV<)Vi)0Rob-0FairF%dRaid0A(EEntRee0Ead0MRRp%tS!_rmBumCoholErtI&LLeyLowMo,O}PhaReadySoT Ways0A>urAz(gOngOuntU\'d0Aly,Ch%Ci|G G!GryIm$K!Noun)Nu$O` Sw T&naTiqueXietyY1ArtOlogyPe?P!Pro=Ril1ChCt-EaEnaGueMMedM%MyOundR<+Re,Ri=RowTTefa@Ti,Tw%k0KPe@SaultSetSi,SumeThma0H!>OmTa{T&dT.udeTra@0Ct]D.Gu,NtTh%ToTumn0Era+OcadoOid0AkeA*AyEsomeFulKw?d0Is:ByChel%C#D+GL<)Lc#y~MbooN<aNn RRelyRga(R*lSeS-SketTt!3A^AnAutyCau\'ComeEfF%eG(Ha=H(dLie=LowLtN^Nef./TrayTt Twe&Y#d3Cyc!DKeNdOlogyRdR`Tt _{AdeAmeAnketA,EakE[IndOodO[omOu\'UeUrUsh_rdAtDyIlMbNeNusOkO,Rd R(gRrowSsTtomUn)XY_{etA(AndA[A=EadEezeI{Id+IefIghtIngIskOccoliOk&OnzeOomO` OwnUsh2Bb!DdyD+tFf$oIldLbLkL!tNd!Nk Rd&Rg R,SS(e[SyTt Y Zz:Bba+B(B!CtusGeKe~LmM aMpNN$N)lNdyNn#NoeNvasNy#Pab!P.$Pta(RRb#RdRgoRpetRryRtSeShS(o/!Su$TT$ogT^Teg%yTt!UghtU\'Ut]Ve3Il(gL yM|NsusNturyRe$Rta(_irAlkAmp]An+AosApt Ar+A\'AtEapE{Ee\'EfErryE,I{&IefIldIm}yOi)Oo\'R#-U{!UnkUrn0G?Nnam#Rc!Tiz&TyVil_imApArifyAwAyE<ErkEv I{I|IffImbIn-IpO{OgO\'O`OudOwnUbUmpU, Ut^_^A,C#utDeFfeeIlInL!@L%LumnMb(eMeMf%tM-Mm#Mp<yNc tNdu@NfirmNg*[N}@Nsid NtrolNv()OkOlPp PyR$ReRnR*@/Tt#U^UntryUp!Ur\'Us(V Yo>_{Ad!AftAmA}AshAt AwlAzyEamEd.EekEwI{etImeIspIt-OpO[Ou^OwdUci$UelUi\'Umb!Un^UshYY,$2BeLtu*PPbo?dRiousRr|Rta(R=Sh]/omTe3C!:DMa+MpN)Ng R(gShUght WnY3AlBa>BrisCadeCemb CideCl(eC%a>C*a\'ErF&\'F(eFyG*eLayLiv M<dMi\'Ni$Nti,NyP?tP&dPos.P`PutyRi=ScribeS tSignSkSpair/royTailTe@VelopVi)Vo>3AgramAlAm#dAryCeE\'lEtFf G.$Gn.yLemmaNn NosaurRe@RtSag*eScov Sea\'ShSmi[S%d Splay/<)V tVideV%)Zzy5Ct%Cum|G~Lph(Ma(Na>NkeyN%OrSeUb!Ve_ftAg#AmaA,-AwEamE[IftIllInkIpI=OpUmY2CkMbNeR(g/T^Ty1Arf1Nam-:G G!RlyRnR`Sily/Sy1HoOlogyOnomy0GeItUca>1F%t0G1GhtTh 2BowD E@r-Eg<tEm|Eph<tEvat%I>Se0B?kBodyBra)Er+Ot]PloyPow Pty0Ab!A@DD![D%\'EmyErgyF%)Ga+G(eH<)JoyLi,OughR-hRollSu*T Ti*TryVelope1Isode0U$Uip0AA\'OdeOs]R%Upt0CapeSayS&)Ta>0Ern$H-s1Id&)IlOkeOl=1A@Amp!Ce[Ch<+C.eCludeCu\'Ecu>Erci\'Hau,Hib.I!I,ItOt-P<dPe@Pi*Pla(Po\'P*[T&dTra0EEbrow:Br-CeCultyDeIntI`~L\'MeMilyMousNNcyNtasyRmSh]TT$Th TigueUltV%.e3Atu*Bru?yD $EEdElMa!N)/iv$T^V W3B Ct]EldGu*LeLmLt N$NdNeNg NishReRmR,Sc$ShTT}[X_gAmeAshAtAv%EeIghtIpOatO{O%Ow UidUshY_mCusGIlLd~owOdOtR)Re,R+tRkRtu}RumRw?dSsil/ UndX_gi!AmeEqu|EshI&dIn+OgOntO,OwnOz&U.2ElNNnyRna)RyTu*:D+tInLaxy~ yMePRa+Rba+Rd&Rl-Rm|SSpTeTh U+Ze3N $NiusN*Nt!Nu(e/u*2O,0AntFtGg!Ng RaffeRlVe_dAn)A*A[IdeImp\'ObeOomOryO=OwUe_tDde[LdOdO\'RillaSpelSsipV nWn_bA)A(AntApeA[Av.yEatE&IdIefItOc yOupOwUnt_rdE[IdeIltIt?N3M:B.IrLfMm M, NdPpyRb%RdRshR=,TVeWkZ?d3AdAl`ArtAvyD+hogIght~oLmetLpNRo3Dd&Gh~NtPRe/%y5BbyCkeyLdLeLiday~owMeNeyOdPeRnRr%R\'Sp.$/TelUrV 5BGeM<Mb!M%Nd*dNgryNtRd!RryRtSb<d3Brid:1EOn0EaEntifyLe2N%e4LLeg$L}[0A+Ita>M&\'Mu}Pa@Po\'Pro=Pul\'0ChCludeComeC*a\'DexD-a>Do%Du,ryF<tFl-tF%mHa!H .Iti$Je@JuryMa>N Noc|PutQuiryS<eSe@SideSpi*/$lTa@T e,ToVe,V.eVol=3On0L<dOla>Sue0Em1Ory:CketGu?RZz3AlousAns~yWel9BInKeUr}yY5D+I)MpNg!Ni%Nk/:Ng?oo3EnEpT^upY3CkDD}yNdNgdomSsTT^&TeTt&Wi4EeIfeO{Ow:BBelB%Dd DyKeMpNgua+PtopR+T T(UghUndryVaWWnWsu.Y Zy3Ad AfArnA=Ctu*FtGG$G&dIsu*M#NdNg`NsOp?dSs#Tt Vel3ArB tyBr?yC&\'FeFtGhtKeMbM.NkOnQuid/Tt!VeZ?d5AdAnB, C$CkG-NelyNgOpTt yUdUn+VeY$5CkyGga+Mb N?N^Xury3R-s:Ch(eDG-G}tIdIlInJ%KeMm$NNa+Nda>NgoNs]Nu$P!Rb!R^Rg(R(eRketRria+SkSs/ T^T i$ThTrixTt XimumZe3AdowAnAsu*AtCh<-D$DiaLodyLtMb M%yNt]NuRcyR+R.RryShSsa+T$Thod3Dd!DnightLk~]M-NdNimumN%Nu>Rac!Rr%S ySs/akeXXedXtu*5Bi!DelDifyMM|N.%NkeyN, N`OnR$ReRn(gSqu.oTh T]T%Unta(U\'VeVie5ChFf(LeLtiplySc!SeumShroomS-/Tu$3Self/ yTh:I=MePk(Rrow/yT]Tu*3ArCkEdGati=G!@I` PhewR=/TTw%kUtr$V WsXt3CeGht5B!I\'M(eeOd!Rm$R`SeTab!TeTh(gTi)VelW5C!?Mb R\'T:K0EyJe@Li+Scu*S =Ta(Vious0CurE<Tob 0Or1FF Fi)T&2L1Ay0DI=Ymp-0It0CeEI#L(eLy1EnEraIn]Po\'T]1An+B.Ch?dD D(?yG<I|Ig($Ph<0Tr-h0H 0Tdo%T TputTside0AlEnEr0NN 0Yg&0/ 0O}:CtDd!GeIrLa)LmNdaNelN-N` P RadeR|RkRrotRtySsT^ThTi|TrolTt nU\'VeYm|3A)AnutArAs<tL-<NN$tyNcilOp!Pp Rfe@Rm.Rs#T2O}OtoRa\'Ys-$0AnoCn-Ctu*E)GGe#~LotNkO} Pe/olT^Zza_)A}tA,-A>AyEa\'Ed+U{UgUn+2EmEtIntL?LeLi)NdNyOlPul?Rt]S.]Ssib!/TatoTt yV tyWd W _@i)Ai\'Ed-tEf Epa*Es|EttyEv|I)IdeIm?yIntI%.yIs#Iva>IzeOb!mO)[Odu)Of.OgramOje@Omo>OofOp tyOsp O>@OudOvide2Bl-Dd(g~LpL\'Mpk(N^PilPpyR^a\'R.yRpo\'R\'ShTZz!3Ramid:99Al.yAntumArt E,]I{ItIzO>:Bb.Cco#CeCkD?DioIlInI\'~yMpN^NdomN+PidReTeTh V&WZ%3AdyAlAs#BelBuildC$lCei=CipeC%dCyc!Du)F!@F%mFu\'G]G*tGul?Je@LaxLea\'LiefLyMa(Memb M(dMo=Nd NewNtOp&PairPeatPla)P%tQui*ScueSemb!Si,Sour)Sp#\'SultTi*T*atTurnUn]Ve$ViewW?d2Y`m0BBb#CeChDeD+F!GhtGidNgOtPp!SkTu$V$V 5AdA,BotBu,CketM<)OfOkieOmSeTa>UghUndU>Y$5Bb DeGLeNNwayR$:DDd!D}[FeIlLadLm#L#LtLu>MeMp!NdTisfyToshiU)Usa+VeY1A!AnA*Att E}HemeHoolI&)I[%sOrp]OutRapRe&RiptRub1AAr^As#AtC#dC*tCt]Cur.yEdEkGm|Le@~M(?Ni%N\'Nt&)RiesRvi)Ss]Tt!TupV&_dowAftAllowA*EdEllEriffIeldIftI}IpIv O{OeOotOpOrtOuld O=RimpRugUff!Y0Bl(gCkDeE+GhtGnL|Lk~yLv Mil?Mp!N)NgR&/ Tua>XZe1A>Et^IIllInIrtUll0AbAmEepEnd I)IdeIghtImOg<OtOwUsh0AllArtI!OkeOo`0A{AkeApIffOw0ApCc Ci$CkDaFtL?Ldi LidLut]L=Me#eNgOnRryRtUlUndUpUr)U`0A)A*Ati$AwnEakEci$EedEllEndH eI)Id IkeInIr.L.OilOns%O#OrtOtRayReadR(gY0Ua*UeezeUir*l_b!AdiumAffA+AirsAmpAndArtA>AyEakEelEmEpE*oI{IllIngO{Oma^O}OolOryO=Ra>gyReetRikeR#gRugg!Ud|UffUmb!Y!0Bje@Bm.BwayC)[ChDd&Ff G?G+,ItMm NNnyN\'tP PplyP*meReRfa)R+Rpri\'RroundR=ySpe@/a(1AllowAmpApArmE?EetIftImIngIt^Ord1MbolMptomRup/em:B!Ck!GIlL|LkNkPeR+tSk/eTtooXi3A^Am~NN<tNnisNtRm/Xt_nkAtEmeEnE%yE*EyIngIsOughtReeRi=RowUmbUnd 0CketDeG LtMb MeNyPRedSsueT!5A,BaccoDayDdl EGe` I!tK&MatoM%rowNeNgueNightOlO`PP-Pp!R^RnadoRtoi\'SsT$Uri,W?dW WnY_{AdeAff-Ag-A(Ansf ApAshA=lAyEatEeEndI$IbeI{Igg ImIpOphyOub!U{UeUlyUmpetU,U`Y2BeIt]Mb!NaN}lRkeyRnRt!1El=EntyI)InI,O1PeP-$:5Ly5B*lla0Ab!Awa*C!Cov D DoFairFoldHappyIf%mIqueItIv \'KnownLo{TilUsu$Veil1Da>GradeHoldOnP Set1B<Ge0A+EEdEfulE![U$0Il.y:C<tCuumGueLidL!yL=NNishP%Rious/Ult3H-!L=tNd%Ntu*NueRbRifyRs]RyS\'lT <3Ab!Br<tCiousCt%yDeoEw~a+Nta+Ol(Rtu$RusSaS.Su$T$Vid5C$I)IdLc<oLumeTeYa+:GeG#ItLk~LnutNtRfa*RmRri%ShSp/eT VeY3Al`Ap#ArA\'lA` BDd(gEk&dIrdLcome/T_!AtEatEelEnE*IpIsp 0DeD`FeLd~NNdowNeNgNkNn Nt ReSdomSeShT}[5LfM<Nd OdOlRdRkRldRryR`_pE{E,!I,I>Ong::Rd3Ar~ow9UUngU`:3BraRo9NeO","0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60")}static wordlist(){return null==xh&&(xh=new Sh),xh}}function Bh(t){return(1<<t)-1<<8-t&255}function Uh(t,e){g("NFKD"),null==e&&(e=Sh.wordlist());const r=e.split(t);f(r.length%3==0&&r.length>=12&&r.length<=24,"invalid mnemonic length","mnemonic","[ REDACTED ]");const n=new Uint8Array(Math.ceil(11*r.length/8));let s=0;for(let t=0;t<r.length;t++){let i=e.getWordIndex(r[t].normalize("NFKD"));f(i>=0,`invalid mnemonic word at index ${t}`,"mnemonic","[ REDACTED ]");for(let t=0;t<11;t++)i&1<<10-t&&(n[s>>3]|=1<<7-s%8),s++}const i=32*r.length/3,o=Bh(r.length/3);return f((w(ui(n.slice(0,i/8)))[0]&o)==(n[n.length-1]&o),"invalid mnemonic checksum","mnemonic","[ REDACTED ]"),k(n.slice(0,i/8))}function Dh(t,e){f(t.length%4==0&&t.length>=16&&t.length<=32,"invalid entropy size","entropy","[ REDACTED ]"),null==e&&(e=Sh.wordlist());const r=[0];let n=11;for(let e=0;e<t.length;e++)n>8?(r[r.length-1]<<=8,r[r.length-1]|=t[e],n-=8):(r[r.length-1]<<=n,r[r.length-1]|=t[e]>>8-n,r.push(t[e]&(1<<8-n)-1&255),n+=3);const s=t.length/4,i=parseInt(ui(t).substring(2,4),16)&Bh(s);return r[r.length-1]<<=s,r[r.length-1]|=i>>8-s,e.join(r.map((t=>e.getWord(t))))}const Fh={};class Lh{phrase;password;wordlist;entropy;constructor(t,e,r,n,s){null==n&&(n=""),null==s&&(s=Sh.wordlist()),m(t,Fh,"Mnemonic"),o(this,{phrase:r,password:n,wordlist:s,entropy:e})}computeSeed(){const t=U("mnemonic"+this.password,"NFKD");return Hs(U(this.phrase,"NFKD"),t,2048,64,"sha512")}static fromPhrase(t,e,r){const n=Uh(t,r);return t=Dh(w(n),r),new Lh(Fh,n,t,e,r)}static fromEntropy(t,e,r){const n=w(t,"entropy"),s=Dh(n,r);return new Lh(Fh,k(n),s,e,r)}static entropyToPhrase(t,e){return Dh(w(t,"entropy"),e)}static phraseToEntropy(t,e){return Uh(t,e)}static isValidMnemonic(t,e){try{return Uh(t,e),!0}catch(t){}return!1}}class Mh extends iu{address;#Ge;constructor(t,e){super(e),f(t&&"function"==typeof t.sign,"invalid private key","privateKey","[ REDACTED ]"),this.#Ge=t,o(this,{address:_a(this.signingKey.publicKey)})}get signingKey(){return this.#Ge}get privateKey(){return this.signingKey.privateKey}async getAddress(){return this.address}connect(t){return new Mh(this.#Ge,t)}async signTransaction(t){const{to:e,from:r}=await i({to:t.to?qr(t.to,this.provider):void 0,from:t.from?qr(t.from,this.provider):void 0});null!=e&&(t.to=e),null!=r&&(t.from=r),null!=t.from&&(f(ue(t.from)===this.address,"transaction from address mismatch","tx.from",t.from),delete t.from);const n=ul.from(t);return n.signature=this.signingKey.sign(n.unsignedHash),n.serialized}async signMessage(t){return this.signMessageSync(t)}signMessageSync(t){return this.signingKey.sign(Ka(t)).serialized}async signTypedData(t,e,r){const n=await dc.resolveNames(t,e,r,(async t=>{h(null!=this.provider,"cannot resolve ENS names without a provider","UNSUPPORTED_OPERATION",{operation:"resolveName",info:{name:t}});const e=await this.provider.resolveName(t);return h(null!=e,"unconfigured ENS name","UNCONFIGURED_NAME",{value:t}),e}));return this.signingKey.sign(dc.hash(n.domain,e,n.value)).serialized}}var Gh,Hh,jh,Qh=function(t,e,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(t):n?n.value:e.get(t)},_h=function(t,e,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(t,r):s?s.value=r:e.set(t,r),r};const Vh={16:10,24:12,32:14},Kh=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],Jh=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],zh=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],qh=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],Wh=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],Yh=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],Zh=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],Xh=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],$h=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],tf=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],ef=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],rf=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],nf=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],sf=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],of=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function af(t){const e=[];for(let r=0;r<t.length;r+=4)e.push(t[r]<<24|t[r+1]<<16|t[r+2]<<8|t[r+3]);return e}class cf{get key(){return Qh(this,Gh,"f").slice()}constructor(t){if(Gh.set(this,void 0),Hh.set(this,void 0),jh.set(this,void 0),!(this instanceof cf))throw Error("AES must be instanitated with `new`");_h(this,Gh,new Uint8Array(t),"f");const e=Vh[this.key.length];if(null==e)throw new TypeError("invalid key size (must be 16, 24 or 32 bytes)");_h(this,jh,[],"f"),_h(this,Hh,[],"f");for(let t=0;t<=e;t++)Qh(this,jh,"f").push([0,0,0,0]),Qh(this,Hh,"f").push([0,0,0,0]);const r=4*(e+1),n=this.key.length/4,s=af(this.key);let i;for(let t=0;t<n;t++)i=t>>2,Qh(this,jh,"f")[i][t%4]=s[t],Qh(this,Hh,"f")[e-i][t%4]=s[t];let o,a=0,c=n;for(;c<r;){if(o=s[n-1],s[0]^=Jh[o>>16&255]<<24^Jh[o>>8&255]<<16^Jh[255&o]<<8^Jh[o>>24&255]^Kh[a]<<24,a+=1,8!=n)for(let t=1;t<n;t++)s[t]^=s[t-1];else{for(let t=1;t<n/2;t++)s[t]^=s[t-1];o=s[n/2-1],s[n/2]^=Jh[255&o]^Jh[o>>8&255]<<8^Jh[o>>16&255]<<16^Jh[o>>24&255]<<24;for(let t=n/2+1;t<n;t++)s[t]^=s[t-1]}let t,i,l=0;for(;l<n&&c<r;)t=c>>2,i=c%4,Qh(this,jh,"f")[t][i]=s[l],Qh(this,Hh,"f")[e-t][i]=s[l++],c++}for(let t=1;t<e;t++)for(let e=0;e<4;e++)o=Qh(this,Hh,"f")[t][e],Qh(this,Hh,"f")[t][e]=rf[o>>24&255]^nf[o>>16&255]^sf[o>>8&255]^of[255&o]}encrypt(t){if(16!=t.length)throw new TypeError("invalid plaintext size (must be 16 bytes)");const e=Qh(this,jh,"f").length-1,r=[0,0,0,0];let n=af(t);for(let t=0;t<4;t++)n[t]^=Qh(this,jh,"f")[0][t];for(let t=1;t<e;t++){for(let e=0;e<4;e++)r[e]=qh[n[e]>>24&255]^Wh[n[(e+1)%4]>>16&255]^Yh[n[(e+2)%4]>>8&255]^Zh[255&n[(e+3)%4]]^Qh(this,jh,"f")[t][e];n=r.slice()}const s=new Uint8Array(16);let i=0;for(let t=0;t<4;t++)i=Qh(this,jh,"f")[e][t],s[4*t]=255&(Jh[n[t]>>24&255]^i>>24),s[4*t+1]=255&(Jh[n[(t+1)%4]>>16&255]^i>>16),s[4*t+2]=255&(Jh[n[(t+2)%4]>>8&255]^i>>8),s[4*t+3]=255&(Jh[255&n[(t+3)%4]]^i);return s}decrypt(t){if(16!=t.length)throw new TypeError("invalid ciphertext size (must be 16 bytes)");const e=Qh(this,Hh,"f").length-1,r=[0,0,0,0];let n=af(t);for(let t=0;t<4;t++)n[t]^=Qh(this,Hh,"f")[0][t];for(let t=1;t<e;t++){for(let e=0;e<4;e++)r[e]=Xh[n[e]>>24&255]^$h[n[(e+3)%4]>>16&255]^tf[n[(e+2)%4]>>8&255]^ef[255&n[(e+1)%4]]^Qh(this,Hh,"f")[t][e];n=r.slice()}const s=new Uint8Array(16);let i=0;for(let t=0;t<4;t++)i=Qh(this,Hh,"f")[e][t],s[4*t]=255&(zh[n[t]>>24&255]^i>>24),s[4*t+1]=255&(zh[n[(t+3)%4]>>16&255]^i>>16),s[4*t+2]=255&(zh[n[(t+2)%4]>>8&255]^i>>8),s[4*t+3]=255&(zh[255&n[(t+1)%4]]^i);return s}}Gh=new WeakMap,Hh=new WeakMap,jh=new WeakMap;class lf{constructor(t,e,r){if(r&&!(this instanceof r))throw new Error(`${t} must be instantiated with "new"`);Object.defineProperties(this,{aes:{enumerable:!0,value:new cf(e)},name:{enumerable:!0,value:t}})}}var uf,hf,ff=function(t,e,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(t,r):s?s.value=r:e.set(t,r),r},df=function(t,e,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(t):n?n.value:e.get(t)};class pf extends lf{constructor(t,e){if(super("ECC",t,pf),uf.set(this,void 0),hf.set(this,void 0),e){if(e.length%16)throw new TypeError("invalid iv size (must be 16 bytes)");ff(this,uf,new Uint8Array(e),"f")}else ff(this,uf,new Uint8Array(16),"f");ff(this,hf,this.iv,"f")}get iv(){return new Uint8Array(df(this,uf,"f"))}encrypt(t){if(t.length%16)throw new TypeError("invalid plaintext size (must be multiple of 16 bytes)");const e=new Uint8Array(t.length);for(let r=0;r<t.length;r+=16){for(let e=0;e<16;e++)df(this,hf,"f")[e]^=t[r+e];ff(this,hf,this.aes.encrypt(df(this,hf,"f")),"f"),e.set(df(this,hf,"f"),r)}return e}decrypt(t){if(t.length%16)throw new TypeError("invalid ciphertext size (must be multiple of 16 bytes)");const e=new Uint8Array(t.length);for(let r=0;r<t.length;r+=16){const n=this.aes.decrypt(t.subarray(r,r+16));for(let s=0;s<16;s++)e[r+s]=n[s]^df(this,hf,"f")[s],df(this,hf,"f")[s]=t[r+s]}return e}}uf=new WeakMap,hf=new WeakMap;new WeakMap,new WeakMap,new WeakSet;var gf,mf,yf,wf=function(t,e,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(t,r):s?s.value=r:e.set(t,r),r},bf=function(t,e,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(t):n?n.value:e.get(t)};class Af extends lf{constructor(t,e){super("CTR",t,Af),gf.set(this,void 0),mf.set(this,void 0),yf.set(this,void 0),wf(this,yf,new Uint8Array(16),"f"),bf(this,yf,"f").fill(0),wf(this,gf,bf(this,yf,"f"),"f"),wf(this,mf,16,"f"),null==e&&(e=1),"number"==typeof e?this.setCounterValue(e):this.setCounterBytes(e)}get counter(){return new Uint8Array(bf(this,yf,"f"))}setCounterValue(t){if(!Number.isInteger(t)||t<0||t>Number.MAX_SAFE_INTEGER)throw new TypeError("invalid counter initial integer value");for(let e=15;e>=0;--e)bf(this,yf,"f")[e]=t%256,t=Math.floor(t/256)}setCounterBytes(t){if(16!==t.length)throw new TypeError("invalid counter initial Uint8Array value length");bf(this,yf,"f").set(t)}increment(){for(let t=15;t>=0;t--){if(255!==bf(this,yf,"f")[t]){bf(this,yf,"f")[t]++;break}bf(this,yf,"f")[t]=0}}encrypt(t){var e,r;const n=new Uint8Array(t);for(let t=0;t<n.length;t++)16===bf(this,mf,"f")&&(wf(this,gf,this.aes.encrypt(bf(this,yf,"f")),"f"),wf(this,mf,0,"f"),this.increment()),n[t]^=bf(this,gf,"f")[(wf(this,mf,(r=bf(this,mf,"f"),e=r++,r),"f"),e)];return n}decrypt(t){return this.encrypt(t)}}function Ef(t){return"string"!=typeof t||t.startsWith("0x")||(t="0x"+t),b(t)}function vf(t,e){for(t=String(t);t.length<e;)t="0"+t;return t}function kf(t){return"string"==typeof t?U(t,"NFKC"):b(t)}function Nf(t,e){const r=e.match(/^([a-z0-9$_.-]*)(:([a-z]+))?(!)?$/i);f(null!=r,"invalid path","path",e);const n=r[1],s=r[3],i="!"===r[4];let o=t;for(const t of n.toLowerCase().split(".")){if(Array.isArray(o)){if(!t.match(/^[0-9]+$/))break;o=o[parseInt(t)]}else if("object"==typeof o){let e=null;for(const r in o)if(r.toLowerCase()===t){e=o[r];break}o=e}else o=null;if(null==o)break}if(f(!i||null!=o,"missing required value","path",n),s&&null!=o){if("int"===s){if("string"==typeof o&&o.match(/^-?[0-9]+$/))return parseInt(o);if(Number.isSafeInteger(o))return o}if("number"===s&&"string"==typeof o&&o.match(/^-?[0-9.]*$/))return parseFloat(o);if("data"===s&&"string"==typeof o)return Ef(o);if("array"===s&&Array.isArray(o))return o;if(s===typeof o)return o;f(!1,`wrong type found for ${s} `,"path",n)}return o}gf=new WeakMap,mf=new WeakMap,yf=new WeakMap,new WeakMap,new WeakMap,new WeakMap;const Rf="m/44\'/60\'/0\'/0/0";function Pf(t){try{const e=JSON.parse(t);if(3===(null!=e.version?parseInt(e.version):0))return!0}catch(t){}return!1}function If(t,e){const r=w(e),n=Nf(t,"crypto.ciphertext:data!");f(k(re(N([r.slice(16,32),n]))).substring(2)===Nf(t,"crypto.mac:string!").toLowerCase(),"incorrect password","password","[ REDACTED ]");const s=function(t,e,r){if("aes-128-ctr"===Nf(t,"crypto.cipher:string")){const n=Nf(t,"crypto.cipherparams.iv:data!");return k(new Af(e,n).decrypt(r))}h(!1,"unsupported cipher","UNSUPPORTED_OPERATION",{operation:"decrypt"})}(t,r.slice(0,16),n),i=_a(s);if(t.address){let e=t.address.toLowerCase();e.startsWith("0x")||(e="0x"+e),f(ue(e)===i,"keystore address/privateKey mismatch","address",t.address)}const o={address:i,privateKey:s};if("0.1"===Nf(t,"x-ethers.version:string")){const e=r.slice(32,64),n=Nf(t,"x-ethers.mnemonicCiphertext:data!"),s=Nf(t,"x-ethers.mnemonicCounter:data!"),i=new Af(e,s);o.mnemonic={path:Nf(t,"x-ethers.path:string")||Rf,locale:Nf(t,"x-ethers.locale:string")||"en",entropy:k(w(i.decrypt(n)))}}return o}function Tf(t){const e=Nf(t,"crypto.kdf:string");if(e&&"string"==typeof e){if("scrypt"===e.toLowerCase()){const r=Nf(t,"crypto.kdfparams.salt:data!"),n=Nf(t,"crypto.kdfparams.n:int!"),s=Nf(t,"crypto.kdfparams.r:int!"),i=Nf(t,"crypto.kdfparams.p:int!");f(n>0&&0==(n&n-1),"invalid kdf.N","kdf.N",n),f(s>0&&i>0,"invalid kdf","kdf",e);const o=Nf(t,"crypto.kdfparams.dklen:int!");return f(32===o,"invalid kdf.dklen","kdf.dflen",o),{name:"scrypt",salt:r,N:n,r:s,p:i,dkLen:64}}if("pbkdf2"===e.toLowerCase()){const e=Nf(t,"crypto.kdfparams.salt:data!"),r=Nf(t,"crypto.kdfparams.prf:string!"),n=r.split("-").pop();f("sha256"===n||"sha512"===n,"invalid kdf.pdf","kdf.pdf",r);const s=Nf(t,"crypto.kdfparams.c:int!"),i=Nf(t,"crypto.kdfparams.dklen:int!");return f(32===i,"invalid kdf.dklen","kdf.dklen",i),{name:"pbkdf2",salt:e,count:s,dkLen:i,algorithm:n}}}f(!1,"unsupported key-derivation function","kdf",e)}function Of(t,e){const r=JSON.parse(t),n=kf(e),s=Tf(r);if("pbkdf2"===s.name){const{salt:t,count:e,dkLen:i,algorithm:o}=s;return If(r,Hs(n,t,e,i,o))}h("scrypt"===s.name,"cannot be reached","UNKNOWN_ERROR",{params:s});const{salt:i,N:o,r:a,p:c,dkLen:l}=s;return If(r,ni(n,i,o,a,c,l))}function Cf(t){return new Promise((e=>{setTimeout((()=>{e()}),t)}))}async function xf(t,e,r){const n=JSON.parse(t),s=kf(e),i=Tf(n);if("pbkdf2"===i.name){r&&(r(0),await Cf(0));const{salt:t,count:e,dkLen:o,algorithm:a}=i,c=Hs(s,t,e,o,a);return r&&(r(1),await Cf(0)),If(n,c)}h("scrypt"===i.name,"cannot be reached","UNKNOWN_ERROR",{params:i});const{salt:o,N:a,r:c,p:l,dkLen:u}=i;return If(n,await ri(s,o,a,c,l,u,r))}function Sf(t){const e=null!=t.salt?w(t.salt,"options.salt"):Vs(32);let r=1<<17,n=8,s=1;return t.scrypt&&(t.scrypt.N&&(r=t.scrypt.N),t.scrypt.r&&(n=t.scrypt.r),t.scrypt.p&&(s=t.scrypt.p)),f("number"==typeof r&&r>0&&Number.isSafeInteger(r)&&(BigInt(r)&BigInt(r-1))===BigInt(0),"invalid scrypt N parameter","options.N",r),f("number"==typeof n&&n>0&&Number.isSafeInteger(n),"invalid scrypt r parameter","options.r",n),f("number"==typeof s&&s>0&&Number.isSafeInteger(s),"invalid scrypt p parameter","options.p",s),{name:"scrypt",dkLen:32,salt:e,N:r,r:n,p:s}}function Bf(t,e,r,s){const i=w(r.privateKey,"privateKey"),o=null!=s.iv?w(s.iv,"options.iv"):Vs(16);f(16===o.length,"invalid options.iv length","options.iv",s.iv);const a=null!=s.uuid?w(s.uuid,"options.uuid"):Vs(16);f(16===a.length,"invalid options.uuid length","options.uuid",s.iv);const c=t.slice(0,16),l=t.slice(16,32),u=w(new Af(c,o).encrypt(i)),h=re(N([l,u])),d={address:r.address.substring(2).toLowerCase(),id:Nh(a),version:3,Crypto:{cipher:"aes-128-ctr",cipherparams:{iv:k(o).substring(2)},ciphertext:k(u).substring(2),kdf:"scrypt",kdfparams:{salt:k(e.salt).substring(2),n:e.N,dklen:32,p:e.p,r:e.r},mac:h.substring(2)}};if(r.mnemonic){const e=null!=s.client?s.client:`ethers/${n}`,i=r.mnemonic.path||Rf,o=r.mnemonic.locale||"en",a=t.slice(32,64),c=w(r.mnemonic.entropy,"account.mnemonic.entropy"),l=Vs(16),u=w(new Af(a,l).encrypt(c)),h=new Date,f="UTC--"+h.getUTCFullYear()+"-"+vf(h.getUTCMonth()+1,2)+"-"+vf(h.getUTCDate(),2)+"T"+vf(h.getUTCHours(),2)+"-"+vf(h.getUTCMinutes(),2)+"-"+vf(h.getUTCSeconds(),2)+".0Z--"+d.address;d["x-ethers"]={client:e,gethFilename:f,path:i,locale:o,mnemonicCounter:k(l).substring(2),mnemonicCiphertext:k(u).substring(2),version:"0.1"}}return JSON.stringify(d)}function Uf(t,e,r){null==r&&(r={});const n=kf(e),s=Sf(r);return Bf(w(ni(n,s.salt,s.N,s.r,s.p,64)),s,t,r)}async function Df(t,e,r){null==r&&(r={});const n=kf(e),s=Sf(r);return Bf(w(await ri(n,s.salt,s.N,s.r,s.p,64,r.progressCallback)),s,t,r)}const Ff="m/44\'/60\'/0\'/0/0",Lf=new Uint8Array([66,105,116,99,111,105,110,32,115,101,101,100]),Mf=2147483648,Gf=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141");function Hf(t,e){let r="";for(;t;)r="0123456789abcdef"[t%16]+r,t=Math.trunc(t/16);for(;r.length<2*e;)r="0"+r;return"0x"+r}function jf(t){const e=w(t);return ml(N([e,P(ui(ui(e)),0,4)]))}const Qf={};function _f(t,e,r,n){const s=new Uint8Array(37);t&Mf?(h(null!=n,"cannot derive child of neutered node","UNSUPPORTED_OPERATION",{operation:"deriveChild"}),s.set(w(n),1)):s.set(w(r));for(let e=24;e>=0;e-=8)s[33+(e>>3)]=t>>24-e&255;const i=w(ws("sha512",e,s));return{IL:i.slice(0,32),IR:i.slice(32)}}function Vf(t,e){const r=e.split("/");f(r.length>0&&("m"===r[0]||t.depth>0),"invalid path","path",e),"m"===r[0]&&r.shift();let n=t;for(let t=0;t<r.length;t++){const e=r[t];if(e.match(/^[0-9]+\'$/)){const r=parseInt(e.substring(0,e.length-1));f(r<Mf,"invalid path index",`path[${t}]`,e),n=n.deriveChild(Mf+r)}else if(e.match(/^[0-9]+$/)){const r=parseInt(e);f(r<Mf,"invalid path index",`path[${t}]`,e),n=n.deriveChild(r)}else f(!1,"invalid path component",`path[${t}]`,e)}return n}class Kf extends Mh{publicKey;fingerprint;parentFingerprint;mnemonic;chainCode;path;index;depth;constructor(t,e,r,n,s,i,a,c,l){super(e,l),m(t,Qf,"HDNodeWallet"),o(this,{publicKey:e.compressedPublicKey}),o(this,{parentFingerprint:r,fingerprint:P(Fs(ui(this.publicKey)),0,4),chainCode:n,path:s,index:i,depth:a}),o(this,{mnemonic:c})}connect(t){return new Kf(Qf,this.signingKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,this.mnemonic,t)}#He(){const t={address:this.address,privateKey:this.privateKey},e=this.mnemonic;return this.path&&e&&"en"===e.wordlist.locale&&""===e.password&&(t.mnemonic={path:this.path,locale:"en",entropy:e.entropy}),t}async encrypt(t,e){return await Df(this.#He(),t,{progressCallback:e})}encryptSync(t){return Uf(this.#He(),t)}get extendedKey(){return h(this.depth<256,"Depth too deep","UNSUPPORTED_OPERATION",{operation:"extendedKey"}),jf(N(["0x0488ADE4",Hf(this.depth,1),this.parentFingerprint,Hf(this.index,4),this.chainCode,N(["0x00",this.privateKey])]))}hasPath(){return null!=this.path}neuter(){return new Jf(Qf,this.address,this.publicKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,this.provider)}deriveChild(t){const e=W(t,"index");f(e<=4294967295,"invalid index","index",e);let r=this.path;r&&(r+="/"+(e&~Mf),e&Mf&&(r+="\'"));const{IR:n,IL:s}=_f(e,this.chainCode,this.publicKey,this.privateKey),i=new Eo(Z((q(s)+BigInt(this.privateKey))%Gf,32));return new Kf(Qf,i,this.fingerprint,k(n),r,e,this.depth+1,this.mnemonic,this.provider)}derivePath(t){return Vf(this,t)}static#je(t,e){f(E(t),"invalid seed","seed","[REDACTED]");const r=w(t,"seed");f(r.length>=16&&r.length<=64,"invalid seed","seed","[REDACTED]");const n=w(ws("sha512",Lf,r)),s=new Eo(k(n.slice(0,32)));return new Kf(Qf,s,"0x00000000",k(n.slice(32)),"m",0,0,e,null)}static fromExtendedKey(t){const e=X(yl(t));f(82===e.length||jf(e.slice(0,78))===t,"invalid extended key","extendedKey","[ REDACTED ]");const r=e[4],n=k(e.slice(5,9)),s=parseInt(k(e.slice(9,13)).substring(2),16),i=k(e.slice(13,45)),o=e.slice(45,78);switch(k(e.slice(0,4))){case"0x0488b21e":case"0x043587cf":{const t=k(o);return new Jf(Qf,_a(t),t,n,i,null,s,r,null)}case"0x0488ade4":case"0x04358394 ":if(0!==o[0])break;return new Kf(Qf,new Eo(o.slice(1)),n,i,null,s,r,null,null)}f(!1,"invalid extended key prefix","extendedKey","[ REDACTED ]")}static createRandom(t,e,r){null==t&&(t=""),null==e&&(e=Ff),null==r&&(r=Sh.wordlist());const n=Lh.fromEntropy(Vs(16),t,r);return Kf.#je(n.computeSeed(),n).derivePath(e)}static fromMnemonic(t,e){return e||(e=Ff),Kf.#je(t.computeSeed(),t).derivePath(e)}static fromPhrase(t,e,r,n){null==e&&(e=""),null==r&&(r=Ff),null==n&&(n=Sh.wordlist());const s=Lh.fromPhrase(t,e,n);return Kf.#je(s.computeSeed(),s).derivePath(r)}static fromSeed(t){return Kf.#je(t,null)}}class Jf extends ou{publicKey;fingerprint;parentFingerprint;chainCode;path;index;depth;constructor(t,e,r,n,s,i,a,c,l){super(e,l),m(t,Qf,"HDNodeVoidWallet"),o(this,{publicKey:r}),o(this,{publicKey:r,fingerprint:P(Fs(ui(r)),0,4),parentFingerprint:n,chainCode:s,path:i,index:a,depth:c})}connect(t){return new Jf(Qf,this.address,this.publicKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,t)}get extendedKey(){return h(this.depth<256,"Depth too deep","UNSUPPORTED_OPERATION",{operation:"extendedKey"}),jf(N(["0x0488B21E",Hf(this.depth,1),this.parentFingerprint,Hf(this.index,4),this.chainCode,this.publicKey]))}hasPath(){return null!=this.path}deriveChild(t){const e=W(t,"index");f(e<=4294967295,"invalid index","index",e);let r=this.path;r&&(r+="/"+(e&~Mf),e&Mf&&(r+="\'"));const{IR:n,IL:s}=_f(e,this.chainCode,this.publicKey,null),i=Eo.addPoints(s,this.publicKey,!0),o=_a(i);return new Jf(Qf,o,i,this.fingerprint,k(n),r,e,this.depth+1,this.provider)}derivePath(t){return Vf(this,t)}}function zf(t){const e=W(t,"index");return f(e>=0&&e<Mf,"invalid account index","index",e),`m/44\'/60\'/${e}\'/0/0`}function qf(t){const e=W(t,"index");return f(e>=0&&e<Mf,"invalid account index","index",e),`m/44\'/60\'/0\'/0/${e}`}function Wf(t){try{if(JSON.parse(t).encseed)return!0}catch(t){}return!1}function Yf(t,e){const r=JSON.parse(t),n=kf(e),s=ue(Nf(r,"ethaddr:string!")),i=Ef(Nf(r,"encseed:string!"));f(i&&i.length%16==0,"invalid encseed","json",t);const o=w(Hs(n,n,2e3,32,"sha256")).slice(0,16),a=i.slice(0,16),c=i.slice(16),l=function(t){if(t.length<16)throw new TypeError("PKCS#7 invalid length");const e=t[t.length-1];if(e>16)throw new TypeError("PKCS#7 padding byte out of range");const r=t.length-e;for(let n=0;n<e;n++)if(t[r+n]!==e)throw new TypeError("PKCS#7 invalid padding byte");return new Uint8Array(t.subarray(0,r))}(w(new pf(o,a).decrypt(c)));let u="";for(let t=0;t<l.length;t++)u+=String.fromCharCode(l[t]);return{address:s,privateKey:Ue(u)}}function Zf(t){return new Promise((e=>{setTimeout((()=>{e()}),t)}))}class Xf extends Mh{constructor(t,e){"string"!=typeof t||t.startsWith("0x")||(t="0x"+t),super("string"==typeof t?new Eo(t):t,e)}connect(t){return new Xf(this.signingKey,t)}async encrypt(t,e){const r={address:this.address,privateKey:this.privateKey};return await Df(r,t,{progressCallback:e})}encryptSync(t){return Uf({address:this.address,privateKey:this.privateKey},t)}static#Qe(t){if(f(t,"invalid JSON wallet","json","[ REDACTED ]"),"mnemonic"in t&&t.mnemonic&&"en"===t.mnemonic.locale){const e=Lh.fromEntropy(t.mnemonic.entropy),r=Kf.fromMnemonic(e,t.mnemonic.path);if(r.address===t.address&&r.privateKey===t.privateKey)return r;console.log("WARNING: JSON mismatch address/privateKey != mnemonic; fallback onto private key")}const e=new Xf(t.privateKey);return f(e.address===t.address,"address/privateKey mismatch","json","[ REDACTED ]"),e}static async fromEncryptedJson(t,e,r){let n=null;return Pf(t)?n=await xf(t,e,r):Wf(t)&&(r&&(r(0),await Zf(0)),n=Yf(t,e),r&&(r(1),await Zf(0))),Xf.#Qe(n)}static fromEncryptedJsonSync(t,e){let r=null;return Pf(t)?r=Of(t,e):Wf(t)?r=Yf(t,e):f(!1,"invalid JSON wallet","json","[ REDACTED ]"),Xf.#Qe(r)}static createRandom(t){const e=Kf.createRandom();return t?e.connect(t):e}static fromPhrase(t,e){const r=Kf.fromPhrase(t);return e?r.connect(e):r}}class $f extends Ch{#_e;constructor(t,e,r,n){super(t,e,n),this.#_e=r}get _accent(){return this.#_e}_decodeWords(){return function(t,e){let r=Th(t).join(",");return e.split(/,/g).forEach((t=>{const n=t.match(/^([a-z]*)([0-9]+)([0-9])(.*)$/);f(null!==n,"internal error parsing accents","accents",e);let s=0;const i=function(t,e){const r=(1<<t)-1,n=[];let s=0,i=0,o=0;for(let a=0;a<e.length;a++)for(s=s<<6|")!@#$%^&*(ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".indexOf(e[a]),i+=6;i>=t;){const e=s>>i-t;s&=(1<<i-t)-1,i-=t,0===e?o+=r:(n.push(e+o),o=0)}return n}(parseInt(n[3]),n[4]),o=parseInt(n[2]),a=new RegExp(`([${n[1]}])`,"g");r=r.replace(a,((t,e)=>(0==--i[s]&&(e=String.fromCharCode(e.charCodeAt(0),o),s++),e)))})),r.split(",")}(this._data,this._accent)}}const td={en:Sh.wordlist()};class ed extends Error{constructor(t){super(t.message),this.isRpcError=!0,this.code=t.code,this.data=t.data}}var rd,nd;!function(t){t.TOKENS_UPDATED="tokensUpdated",t.GET_USER_INPUT="getUserInput",t.EXECUTE_CALLBACK="executeCallback",t.ON_CONFIRM="onConfirm",t.TRANSACTION_EVENT="transactionEvent"}(rd||(rd={})),function(t){t.SIGN_PERSONAL_MESSAGE="signPersonalMessage",t.PUT_USER_INPUT="putUserInput",t.CLOSE="close",t.ETH_RPC="ethRpc",t.LOCAL_STORAGE="localStorage"}(nd||(nd={}));class sd{constructor(t){this.sdk=t,window.addEventListener("message",this.handleMessageResponse.bind(this));const e=window.close;window.close=function(){this.postMessageToEngine("close",void 0),e()}.bind(this),this.listenForUserValueChanges()}listenForUserValueChanges(){window.addEventListener("change",(t=>{"id"in t.target&&t.target.id&&this.sendUserInputValues()}))}handleMessageResponse(t){var e,r;if(t.origin!==this.sdk.instanceData.engineOrigin)return;const n=null===(e=t.data)||void 0===e?void 0:e.params;switch(null===(r=t.data)||void 0===r?void 0:r.method){case rd.TOKENS_UPDATED:this.sdk.tokens.dataChanged(n.oldTokens,n.updatedTokens,n.cardId);break;case rd.ON_CONFIRM:window.onConfirm();break;case rd.EXECUTE_CALLBACK:this.sdk.executeCallback(n.id,n.error,n.result);break;case rd.GET_USER_INPUT:this.sendUserInputValues()}}sendUserInputValues(){const t=Array.from(document.querySelectorAll("textarea,input")).filter((t=>!!t.id));if(!t.length)return;const e=Object.fromEntries(t.map((t=>[t.id,t.value])));this.postMessageToEngine(nd.PUT_USER_INPUT,e)}postMessageToEngine(t,e){window.parent.postMessage({method:t,params:e},{targetOrigin:this.sdk.instanceData.engineOrigin})}request(t,e){this.postMessageToEngine(t,e)}}class id{constructor(t){this.sdk=t,Object.defineProperty(window,"localStorage",{value:this,writable:!0})}get length(){return Object.keys(this.sdk.instanceData.localStorageData).length}clear(){this.sdk.instanceData.localStorageData={},this.sdk.engineAdapter.request(nd.LOCAL_STORAGE,{method:"clear"})}getItem(t){return this.sdk.instanceData.localStorageData[t]}key(t){const e=Object.keys(this.sdk.instanceData.localStorageData);return t<e.length?e[t]:void 0}removeItem(t){delete this.sdk.instanceData.localStorageData[t],this.sdk.engineAdapter.request(nd.LOCAL_STORAGE,{method:"remove",key:t})}setItem(t,e){this.sdk.instanceData.localStorageData[t]=e,this.sdk.engineAdapter.request(nd.LOCAL_STORAGE,{method:"set",key:t,value:e})}}class od{get instanceData(){return this._instanceData}constructor(){this.web3CallBacks={},this.personal={sign:(t,e)=>{t.id||(t.id=Date.now()),this.web3CallBacks[t.id]=e,this.engineAdapter.request(nd.SIGN_PERSONAL_MESSAGE,t)}},this.tokens={data:{currentInstance:{}},dataChanged:(t,e,r)=>{console.log("web3.tokens.data changed.")}},this.action={setProps:function(t){this.engineAdapter.request(nd.PUT_USER_INPUT,t)}.bind(this)},this.localStorageAdapter=new id(this),this.engineAdapter=new sd(this)}setInstanceData(t){this._instanceData=t,this.tokens.data.currentInstance=this.instanceData.currentTokenInstance}executeCallback(t,e,r){console.debug("Execute callback: "+t+" "+r),this.web3CallBacks[t](e,r),delete this.web3CallBacks[t]}}window.ethers=r,window.tokenscript=new class extends od{},window.web3=window.tokenscript,window.ethereum=new class{get isIFrame(){return!0}get currentProvider(){return this}constructor({targetOrigin:t="*",timeoutMilliseconds:e=12e4,eventSource:r=window,eventTarget:n=window.parent}={}){this._isSigner=!0,this.completers={},this.handleEventSourceMessage=t=>{if("*"!==this.targetOrigin&&0!==t.origin.indexOf(this.targetOrigin))return;const e=t.data;if(!e)return;const r=e;if("2.0"===r.jsonrpc&&(console.log("[IFRAME_RPC] response received: ",e),void 0!==r.id&&null!==r.id)){const t=this.completers[""+r.id];t&&("error"in r||"result"in r?t.resolve(r):t.reject(new Error("Response from provider did not have error or result key")),delete this.completers[r.id])}},this.targetOrigin=t,this.timeoutMilliseconds=e,this.eventSource=r,this.eventTarget=n,this.eventSource.addEventListener("message",this.handleEventSourceMessage)}async execute(t,e){const r=Math.floor(Math.random()*Number.MAX_SAFE_INTEGER),n={method:"ethRpc",params:Object.assign({jsonrpc:"2.0",id:r,method:t},void 0===e?null:{params:e})},s=new Promise(((t,e)=>this.completers[r]={resolve:t,reject:e}));return this.eventTarget.postMessage(n,this.targetOrigin),console.log("[IFRAME_RPC] request: ",n),setTimeout((()=>{this.completers[r]&&(this.completers[r].reject(new Error(`RPC ID "${r}" timed out after ${this.timeoutMilliseconds} milliseconds`)),delete this.completers[r])}),this.timeoutMilliseconds),s}send(t,e){this.execute(t.method,t.params).then((t=>{"error"in t?e(t.error.code+": "+t.error.message,null):e(null,t.result)}))}async sendAsync(t,e){try{e(null,await this.execute(t.method,t.params))}catch(t){e(t.code+": "+t.message,null)}}async request(t){const e=await this.execute(t.method,t.params);if("error"in e)throw new ed(e.error);return e.result}},window.executeCallback=(t,e,r)=>window.web3.executeCallback(t,e,r)})();';class TokenViewData{constructor(e,t){this.tokenScript=e;this.card=t;this.localStorageProxy=new LocalStorageProxy(this.tokenScript)}async renderViewHtml(){let e="";e+='<div id="'+this.getViewDataId()+'" class="token-card"></div>'+'<script type="text/javascript">'+await this.getTokenJavascript()+"<\/script>";const t=this.card.view.children;for(let r=0;r<t.length;r++){const n=t[r];if(n.nodeName=="#text")continue;if(n.nodeName==="ts:viewContent"){const t=n.getAttribute("name");const r=this.tokenScript.getViewContent(t);if(!r){console.error("Could not find viewContent element with "+t);continue}for(let t=0;t<r.length;t++){e=this.processTags(r[t],e)}continue}e=this.processTags(n,e)}return`\n\t\t\t<!DOCTYPE html>\n\t\t\t\t<html lang="en">\n\t\t\t\t<head>\n\t\t\t\t\t<title>TokenScript</title>\n\t\t\t\t\t<meta http-equiv="content-type" content="text/html; charset=utf-8" />\n\t\t\t\t\t<script>\n\t\t\t\t\t\tdocument.location.hash = '${this.card.urlFragment?"#"+this.card.urlFragment:""}';\n\t\t\t\t\t<\/script>\n\t\t\t\t</head>\n\t\t\t\t<body>\n\t\t\t\t\t${e}\n\t\t\t\t</body>\n\t\t\t</html>\n\t\t`}processTags(e,t){if(e.localName=="script"){let r;if(e.innerHTML.indexOf("<![CDATA[")===-1){const t=document.createElement("textarea");t.innerHTML=e.innerHTML;r=t.value}else{r=e.innerHTML}t+="<script "+(e.getAttribute("type")==="module"?'type="module" crossorigin=""':"text/javascript")+">"+r+"<\/script>"}else if(e.localName==="style"){t+="<style>"+e.innerHTML+"</style>"}else{if(e.outerHTML)t+=e.outerHTML}return t}async getCurrentTokenData(e=false){const t={};const r=this.tokenScript.getAttributes();for(let n of r){try{t[n.getName()]=await n.getJsonSafeValue(e)}catch(e){console.warn(e)}}const n=this.card.getAttributes();for(let r of n){try{t[r.getName()]=await r.getJsonSafeValue(e)}catch(e){console.warn(e)}}const i=await this.tokenScript.getTokenContextData();return Object.assign(Object.assign({},t),i)}getViewDataId(){var e;if(!this.viewContainerId){this.viewContainerId="token-card-"+((e=this.tokenScript.getCurrentTokenContext())===null||e===void 0?void 0:e.selectedTokenId)}return this.viewContainerId}async getTokenJavascript(){var e;const t=await this.getCurrentTokenData();console.log("Loading view with data:");console.log(t);const r=await this.tokenScript.getEngine().getWalletAdapter();return`\n\n\t\tconst currentTokenInstance = JSON.parse(String.raw \`${JSON.stringify(t).replace(/`/g,"")}\`);\n\t\tconst localStorageData = JSON.parse(String.raw \`${JSON.stringify(await this.localStorageProxy.getLocalStorageDictionary()).replace(/`/g,"")}\`);\n\t\tconst walletAddress = '${t.ownerAddress}'\n\t\tconst addressHex = "${t.ownerAddress}";\n\t\tconst rpcURL = "${r.getRpcUrl(t.chainId)}";\n\t\tconst chainID = "${t.chainId}";\n\t\tconst engineOrigin = "${document.location.origin}";\n\n\t\t// Injected card SDK\n\t\t${v1Txt}\n\n\t\twindow.tokenscript.setInstanceData({currentTokenInstance, engineOrigin, localStorageData});\n\n\t\t// TODO: Move to SDK\n\t\t// Extra initialisation\n\t\tfunction refresh() {\n\t\t   web3.tokens.dataChanged('test', web3.tokens.data, '${this.getViewDataId()}') //TODO: Cache previous value of token to feed into first arg\n\t\t}\n\n\t\t//window.onload = refresh;\n\n\t\tweb3.eth = {\n\t\twalletBalance: 0\n\t\t}\n\t\tweb3.eth_1 = {\n\t\twalletBalance: 0\n\t\t}\n\t\tweb3.eth_8217 = {\n\t\twalletBalance: 0\n\t\t}\n\n\t\tdocument.addEventListener("DOMContentLoaded", function() {\n\t\t\trefresh();\n\t\t});\n\n\t\t${(e=this.tokenScript.getViewBinding())===null||e===void 0?void 0:e.getViewBindingJavascript()}\n\n\t\t`}}var ViewEvent;(function(e){e["TOKENS_UPDATED"]="tokensUpdated";e["GET_USER_INPUT"]="getUserInput";e["EXECUTE_CALLBACK"]="executeCallback";e["ON_CONFIRM"]="onConfirm";e["TRANSACTION_EVENT"]="transactionEvent"})(ViewEvent||(ViewEvent={}));var RequestFromView;(function(e){e["SIGN_PERSONAL_MESSAGE"]="signPersonalMessage";e["PUT_USER_INPUT"]="putUserInput";e["CLOSE"]="close";e["ETH_RPC"]="ethRpc";e["LOCAL_STORAGE"]="localStorage"})(RequestFromView||(RequestFromView={}));class ViewController{constructor(e,t){this.tokenScript=e;this.viewAdapter=t;this.userEntryValues={};this.localStorageProxy=new LocalStorageProxy(this.tokenScript)}async showOrExecuteCard(e,t){if(!e.view){return e.executeTransaction(t)}this.currentCard=e;this._tokenViewData=new TokenViewData(this.tokenScript,this.currentCard);this.viewAdapter.viewLoading();await this.viewAdapter.showTokenView(this.currentCard)}get tokenViewData(){return this._tokenViewData}async executeTransaction(e,t){const r=this.currentCard.getTransaction();if(r){console.log(r.getTransactionInfo());try{await this.currentCard.executeTransaction((e=>{this.viewAdapter.dispatchViewEvent(ViewEvent.TRANSACTION_EVENT,e,"0");if(t)t(e)}))}catch(e){this.viewAdapter.dispatchViewEvent(ViewEvent.TRANSACTION_EVENT,{status:"error",message:e.message},"0");throw e}}else{this.dispatchViewEvent(ViewEvent.ON_CONFIRM,{},"0")}}async unloadTokenCard(){this.currentCard=null;await this.viewAdapter.unloadTokenView()}getCurrentCard(){return this.currentCard}getUserEntryValue(e,t){var r;if(!((r=this.userEntryValues[t])===null||r===void 0?void 0:r[e]))return undefined;return this.userEntryValues[t][e]}async setUserEntryValues(e){var t;const r=[];let n=false;const i=(t=this.tokenScript.getCurrentTokenContext().selectedTokenId)!==null&&t!==void 0?t:"-1";if(!this.userEntryValues[i])this.userEntryValues[i]={};for(let t in e){if(this.userEntryValues[i][t]&&this.userEntryValues[i][t]===e[t]){continue}if(!this.userEntryValues[i][t]&&e[t]==="")continue;const s=this.findAttribute(t);if(!s&&!n)n=true;console.log("User input '"+t+"' changed ("+this.userEntryValues[i][t]+" -> "+e[t]+")");r.push(t);this.userEntryValues[i][t]=e[t]}if(r.length>0){this.tokenScript.getAttributes().invalidate(r);if(this.currentCard)this.currentCard.getAttributes().invalidate(r);if(n)this.updateCardData()}}findAttribute(e){if(this.tokenScript.getAttributes().hasAttribute(e))return this.tokenScript.getAttributes().getAttribute(e);if(this.currentCard&&this.currentCard.getAttributes().hasAttribute(e))return this.currentCard.getAttributes().getAttribute(e);return null}async handleMessageFromView(e,t){console.log("Request from view: ",e,t);switch(e){case RequestFromView.ETH_RPC:this.rpcProxy(t);break;case RequestFromView.SIGN_PERSONAL_MESSAGE:this.signPersonalMessage(t.id,t.data);break;case RequestFromView.PUT_USER_INPUT:await this.setUserEntryValues(t);break;case RequestFromView.CLOSE:this.unloadTokenCard();break;case RequestFromView.LOCAL_STORAGE:this.localStorageProxy.handleLocalStorageRequest(t);break;default:throw new Error("TokenScript view API method: "+e+" is not implemented.")}}async signPersonalMessage(e,t){try{let r=await this.tokenScript.getEngine().signPersonalMessage(t);this.dispatchViewEvent(ViewEvent.EXECUTE_CALLBACK,{error:null,result:r},e)}catch(t){console.error(t);this.dispatchViewEvent(ViewEvent.EXECUTE_CALLBACK,{error:t.message,result:null},e)}}async rpcProxy(e){try{let t=await(await this.tokenScript.getEngine().getWalletAdapter()).rpcProxy(e);this.dispatchRpcResult({jsonrpc:"2.0",id:e.id,result:t})}catch(t){console.error(t);this.dispatchRpcResult({jsonrpc:"2.0",id:e.id,error:t.valueOf()})}}dispatchViewEvent(e,t,r){return this.viewAdapter.dispatchViewEvent(e,t,r)}dispatchRpcResult(e){return this.viewAdapter.dispatchRpcResult(e)}async updateCardData(){this.viewAdapter.viewLoading();this.viewAdapter.dispatchViewEvent(ViewEvent.TOKENS_UPDATED,await this.tokenViewData.getCurrentTokenData(true),this.tokenViewData.getViewDataId())}}class AbstractViewBinding{constructor(e){this.view=e;this.iframe=e.querySelector(".tokenscript-frame");this.loader=e.querySelector(".view-loader");this.actionBar=e.querySelector(".action-bar");this.actionBtn=e.querySelector(".action-btn");this.actionBtn.addEventListener("click",this.confirmAction.bind(this));window.addEventListener("message",this.handlePostMessageFromView.bind(this));this.iframe.onload=()=>{this.hideLoader()}}setTokenScript(e){this.tokenScript=e}setViewController(e){this.viewController=e;this.tokenScript=e.tokenScript}getViewController(){if(!this.viewController)return this.tokenScript.getViewController();return this.viewController}viewLoading(){this.showLoader()}viewError(e){this.hideLoader()}async showTokenView(e){this.currentCard=e;await AbstractViewBinding.injectContentView(this.iframe,e,this.viewController);this.setupConfirmButton(e)}async unloadTokenView(){this.currentCard=null;this.actionBar.style.display="none";this.iframe.srcdoc="<!DOCTYPE html>";const e=new URL(document.location.href);e.hash="";history.replaceState(undefined,undefined,e)}showLoader(){this.loader.style.display="flex"}hideLoader(){this.loader.style.display="none"}static async injectContentView(e,t,r){if(!t.view){e.src="";return}if(t.isUrlView){e.contentWindow.location.replace(t.url)}else{e.srcdoc=await r.tokenViewData.renderViewHtml()}}setupConfirmButton(e){if(e.type=="action"){this.actionBar.style.display="block";this.actionBtn.innerText=e.label}else{this.actionBar.style.display="none"}}getViewBindingJavascript(){return VIEW_BINDING_JAVASCRIPT}postMessageToView(e,t){this.iframe.contentWindow.postMessage({method:e,params:t},"*")}dispatchRpcResult(e){return this.iframe.contentWindow.postMessage(e,"*")}handlePostMessageFromView(e){var t,r;if(!this.iframe)return;if(e.source!==this.iframe.contentWindow){return}if(!((t=e.data)===null||t===void 0?void 0:t.method))return;this.handleMessageFromView(e.data.method,(r=e.data)===null||r===void 0?void 0:r.params)}async handleMessageFromView(e,t){await this.getViewController().handleMessageFromView(e,t)}async dispatchViewEvent(e,t,r){switch(e){case ViewEvent.TOKENS_UPDATED:const n={currentInstance:t};console.log("ViewEvent.TOKENS_UPDATED");this.postMessageToView(e,{oldTokens:n,updatedTokens:n,cardId:r});this.hideLoader();return;case ViewEvent.EXECUTE_CALLBACK:case ViewEvent.GET_USER_INPUT:case ViewEvent.ON_CONFIRM:this.postMessageToView(e,Object.assign(Object.assign({},t),{id:r}));return}}}const VIEW_BINDING_JAVASCRIPT=`\n\n`;class ViewBinding$1 extends AbstractViewBinding{constructor(e,t){super(e);this.view=e;this.showToast=t}async showTokenView(e){this.view.style.display="block";await super.showTokenView(e);this.renderAttributesTable()}async unloadTokenView(){this.view.style.display="none";await super.unloadTokenView()}async renderAttributesTable(){const e=this.view.querySelector(".attribute-table");if(!e)return;let t="<tr><th>Attribute</th><th>Value</th></tr>";const r=async(e,t=false)=>`<tr><td>${e.getName()} ${t?"(Card)":"(Global)"}</td><td>${await e.getCurrentValue()}</td></tr>`;for(let e of this.tokenScript.getAttributes()){t+=await r(e)}for(let e of this.currentCard.getAttributes()){t+=await r(e,true)}e.innerHTML=t}async confirmAction(){this.showLoader();try{await this.tokenScript.getViewController().executeTransaction(this.currentCard,(e=>{showTransactionNotification(e,this.showToast)}))}catch(e){console.error(e);handleTransactionError(e,this.showToast)}this.hideLoader()}async handleMessageFromView(e,t){await super.handleMessageFromView(e,t);if(e===RequestFromView.PUT_USER_INPUT)this.renderAttributesTable()}async dispatchViewEvent(e,t,r){await super.dispatchViewEvent(e,t,r);if(e===ViewEvent.TOKENS_UPDATED)this.renderAttributesTable()}}const alphawalletViewerCss="header{display:none}*{font-family:'Space Grotesk', sans-serif;color:#333}.aw-viewer{max-width:650px;width:100%;height:100vh;margin:0 auto;display:flex;flex-direction:column}.details-container{flex-grow:1}.popover-container{max-height:calc(100dvh - 50px) !important}card-view,.card-container{display:flex !important;flex-direction:column;flex-grow:1}.card-container{max-width:unset !important;margin:0 auto !important;max-height:unset !important;width:100%}card-popover .card-container{max-height:700px !important}card-view .card-container{height:unset !important}.actions{display:flex;flex-direction:column;gap:10px;padding:10px 15px}";const AlphawalletViewerStyle0=alphawalletViewerCss;const SmartTokenStoreViewer$1=class{constructor(e){registerInstance(this,e);this.showToast=createEvent(this,"showToast",7);this.showLoader=createEvent(this,"showLoader",7);this.hideLoader=createEvent(this,"hideLoader",7);this.app=undefined;this.tokenScript=undefined;this.cardButtons=undefined;this.overflowCardButtons=undefined}async componentDidLoad(){try{const e=new URLSearchParams(document.location.search.substring(1));const t=new URLSearchParams(document.location.hash.substring(1));for(const[r,n]of t.entries()){e.set(r,n)}this.urlRequest=e;await this.processUrlLoad()}catch(e){console.error(e);this.showToast.emit({type:"error",title:"Failed to load token details",description:e.message})}}async processUrlLoad(){const e=document.location.search.substring(1);if(!e)return false;const t=new URLSearchParams(e);if(t.has("chain")&&t.has("contract")&&t.has("tokenId")){this.app.showTsLoader();this.tokenDetails=await getSingleTokenMetadata(parseInt(t.get("chain")),t.get("contract"),t.get("tokenId"));console.log("Token meta loaded!",this.tokenDetails);this.app.hideTsLoader();this.loadTokenScript();return true}throw new Error("Could not locate token details using the values provided in the URL")}async loadTokenScript(){try{const e=parseInt(this.urlRequest.get("chain"));const t=this.urlRequest.get("contract");let r;if(this.urlRequest.has("tokenscriptUrl")){r=await this.app.loadTokenscript("url",this.urlRequest.get("tokenscriptUrl"))}else{const n=e+"-"+t;r=await this.app.loadTokenscript("resolve",n)}const n=r.getTokenOriginData();let i;for(const r of n){if(r.chainId===e&&t.toLowerCase()===t.toLowerCase()){i=r;r.tokenDetails=[this.tokenDetails];break}}if(i){r.setTokenMetadata(n);class e{getTokens(e,t){return Promise.resolve(n)}}this.app.discoveryAdapter=new e;r.setCurrentTokenContext(i.originId,0);this.tokenScript=r;this.tokenScript.on("TOKENS_UPDATED",(e=>{this.cardButtons=null;this.overflowCardButtons=null;this.infoCard=null;this.loadCards()}),"grid");this.loadCards()}}catch(e){console.warn(e.message)}}async loadCards(){const e=[];const t=[];const r=this.tokenScript.getCards();for(let[n,i]of r.entries()){let r=i.label;if(i.type==="token"&&!this.infoCard){this.infoCard=i;const e=new ViewBinding$1(this.infoCardView,this.showToast);const t=this.tokenScript.getViewController(e);e.setViewController(t);t.showOrExecuteCard(this.infoCard,undefined);continue}if(r==="Unnamed Card")r=i.type==="token"?"Token Info":i.type+" Card";try{const s=await i.isEnabledOrReason();if(s===false)continue;const a=h$1("button",{class:"btn "+getCardButtonClass(i,n),onClick:()=>this.showCard(i),disabled:s!==true,title:s!==true?s:r},r);if(s!==true||e.length>2){t.push(a)}else{e.push(a)}}catch(e){console.error("Failed to check if card is available",e)}}this.cardButtons=e;this.overflowCardButtons=t}async showCard(e){window.scrollTo(0,0);try{await this.tokenScript.showOrExecuteTokenCard(e,(async e=>{if(e.status==="started")this.showLoader.emit();if(e.status==="confirmed")this.hideLoader.emit();await showTransactionNotification(e,this.showToast)}))}catch(e){console.error(e);this.hideLoader.emit();handleTransactionError(e,this.showToast);return}}render(){var e;return h$1(Host,{key:"8d4275ea3490ed2ac8e9f727bd9f7935ee309632"},h$1("div",{key:"7d2abba738e6ba3141c3b79713f51543ada9f09f",class:"aw-viewer"},h$1("card-view",{key:"85cc72aadf1a7c5a6d257e878f00f2ced0e07d14",ref:e=>this.infoCardView=e}),h$1("div",{key:"a6c3635edc3b4061cf6f1870cc16154c265b45a1",class:"actions"},this.cardButtons?this.cardButtons:h$1("loading-spinner",{color:"#595959",size:"small",style:{textAlign:"center"}}),((e=this.overflowCardButtons)===null||e===void 0?void 0:e.length)?[h$1("button",{class:"btn more-actions-btn",onClick:()=>this.overflowDialog.openDialog()},"+ More actions"),h$1("action-overflow-modal",{ref:e=>this.overflowDialog=e},h$1("div",{class:"actions"},this.overflowCardButtons))]:"")),h$1("card-popover",{key:"da78468b225b8f714d38058588cc6d5790731146",tokenScript:this.tokenScript}))}};SmartTokenStoreViewer$1.style=AlphawalletViewerStyle0;var ConsoleApiName={log:"log",debug:"debug",info:"info",warn:"warn",error:"error"};var globalConsole=console;var originalConsoleMethods={};Object.keys(ConsoleApiName).forEach((function(e){originalConsoleMethods[e]=globalConsole[e]}));var PREFIX$2="Datadog Browser SDK:";var display={debug:originalConsoleMethods.debug.bind(globalConsole,PREFIX$2),log:originalConsoleMethods.log.bind(globalConsole,PREFIX$2),info:originalConsoleMethods.info.bind(globalConsole,PREFIX$2),warn:originalConsoleMethods.warn.bind(globalConsole,PREFIX$2),error:originalConsoleMethods.error.bind(globalConsole,PREFIX$2)};function catchUserErrors(e,t){return function(){var r=[];for(var n=0;n<arguments.length;n++){r[n]=arguments[n]}try{return e.apply(void 0,r)}catch(e){display.error(t,e)}}}var ExperimentalFeature;(function(e){e["PAGEHIDE"]="pagehide";e["FEATURE_FLAGS"]="feature_flags";e["RESOURCE_PAGE_STATES"]="resource_page_states";e["COLLECT_FLUSH_REASON"]="collect_flush_reason";e["ZERO_LCP_TELEMETRY"]="zero_lcp_telemetry";e["DISABLE_REPLAY_INLINE_CSS"]="disable_replay_inline_css"})(ExperimentalFeature||(ExperimentalFeature={}));var enabledExperimentalFeatures=new Set;function addExperimentalFeatures(e){e.forEach((function(e){enabledExperimentalFeatures.add(e)}))}function isExperimentalFeatureEnabled(e){return enabledExperimentalFeatures.has(e)}function getExperimentalFeatures(){return enabledExperimentalFeatures}function performDraw(e){return e!==0&&Math.random()*100<=e}function round(e,t){return+e.toFixed(t)}function isPercentage(e){return isNumber(e)&&e>=0&&e<=100}function isNumber(e){return typeof e==="number"}var ONE_SECOND=1e3;var ONE_MINUTE=60*ONE_SECOND;var ONE_HOUR=60*ONE_MINUTE;var ONE_DAY=24*ONE_HOUR;var ONE_YEAR=365*ONE_DAY;function relativeToClocks(e){return{relative:e,timeStamp:getCorrectedTimeStamp(e)}}function getCorrectedTimeStamp(e){var t=dateNow()-performance.now();if(t>getNavigationStart()){return Math.round(addDuration(t,e))}return getTimeStamp(e)}function currentDrift(){return Math.round(dateNow()-addDuration(getNavigationStart(),performance.now()))}function toServerDuration(e){if(!isNumber(e)){return e}return round(e*1e6,0)}function dateNow(){return(new Date).getTime()}function timeStampNow(){return dateNow()}function relativeNow(){return performance.now()}function clocksNow(){return{relative:relativeNow(),timeStamp:timeStampNow()}}function clocksOrigin(){return{relative:0,timeStamp:getNavigationStart()}}function elapsed(e,t){return t-e}function addDuration(e,t){return e+t}function getRelativeTime(e){return e-getNavigationStart()}function getTimeStamp(e){return Math.round(addDuration(getNavigationStart(),e))}function looksLikeRelativeTime(e){return e<ONE_YEAR}var navigationStart;function getNavigationStart(){if(navigationStart===undefined){navigationStart=performance.timing.navigationStart}return navigationStart}var ONE_KIBI_BYTE=1024;var ONE_MEBI_BYTE=1024*ONE_KIBI_BYTE;var HAS_MULTI_BYTES_CHARACTERS=/[^\u0000-\u007F]/;function computeBytesCount(e){if(!HAS_MULTI_BYTES_CHARACTERS.test(e)){return e.length}if(window.TextEncoder!==undefined){return(new TextEncoder).encode(e).length}return new Blob([e]).size}function concatBuffers(e){var t=e.reduce((function(e,t){return e+t.length}),0);var r=new Uint8Array(t);var n=0;for(var i=0,s=e;i<s.length;i++){var a=s[i];r.set(a,n);n+=a.length}return r}function includes(e,t){return e.indexOf(t)!==-1}function arrayFrom(e){if(Array.from){return Array.from(e)}var t=[];if(e instanceof Set){e.forEach((function(e){return t.push(e)}))}else{for(var r=0;r<e.length;r++){t.push(e[r])}}return t}function find(e,t){for(var r=0;r<e.length;r+=1){var n=e[r];if(t(n,r)){return n}}return undefined}function findLast(e,t){for(var r=e.length-1;r>=0;r-=1){var n=e[r];if(t(n,r,e)){return n}}return undefined}function forEach(e,t){Array.prototype.forEach.call(e,t)}function objectValues(e){return Object.keys(e).map((function(t){return e[t]}))}function objectEntries(e){return Object.keys(e).map((function(t){return[t,e[t]]}))}function startsWith(e,t){return e.slice(0,t.length)===t}function endsWith(e,t){return e.slice(-t.length)===t}function elementMatches(e,t){if(e.matches){return e.matches(t)}if(e.msMatchesSelector){return e.msMatchesSelector(t)}return false}function cssEscape(e){if(window.CSS&&window.CSS.escape){return window.CSS.escape(e)}return e.replace(/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g,(function(e,t){if(t){if(e==="\0"){return""}return"".concat(e.slice(0,-1),"\\").concat(e.charCodeAt(e.length-1).toString(16)," ")}return"\\".concat(e)}))}function assign$4(e){var t=[];for(var r=1;r<arguments.length;r++){t[r-1]=arguments[r]}t.forEach((function(t){for(var r in t){if(Object.prototype.hasOwnProperty.call(t,r)){e[r]=t[r]}}}));return e}function shallowClone(e){return assign$4({},e)}function objectHasValue(e,t){return Object.keys(e).some((function(r){return e[r]===t}))}function isEmptyObject(e){return Object.keys(e).length===0}function mapValues(e,t){var r={};for(var n=0,i=Object.keys(e);n<i.length;n++){var s=i[n];r[s]=t(e[s])}return r}function getGlobalObject(){if(typeof globalThis==="object"){return globalThis}Object.defineProperty(Object.prototype,"_dd_temp_",{get:function(){return this},configurable:true});var e=_dd_temp_;delete Object.prototype._dd_temp_;if(typeof e!=="object"){if(typeof self==="object"){e=self}else if(typeof window==="object"){e=window}else{e={}}}return e}function getZoneJsOriginalValue(e,t){var r=getGlobalObject();var n;if(r.Zone&&typeof r.Zone.__symbol__==="function"){n=e[r.Zone.__symbol__(t)]}if(!n){n=e[t]}return n}var __spreadArray$1=undefined&&undefined.__spreadArray||function(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,s;n<i;n++){if(s||!(n in t)){if(!s)s=Array.prototype.slice.call(t,0,n);s[n]=t[n]}}return e.concat(s||Array.prototype.slice.call(t))};var onMonitorErrorCollected;var debugMode=false;function startMonitorErrorCollection(e){onMonitorErrorCollected=e}function setDebugMode(e){debugMode=e}function monitor(e){return function(){return callMonitored(e,this,arguments)}}function callMonitored(e,t,r){try{return e.apply(t,r)}catch(e){displayIfDebugEnabled(e);if(onMonitorErrorCollected){try{onMonitorErrorCollected(e)}catch(e){displayIfDebugEnabled(e)}}}}function displayIfDebugEnabled(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}if(debugMode){display.error.apply(display,__spreadArray$1(["[MONITOR]"],e,false))}}function setTimeout$1(e,t){return getZoneJsOriginalValue(getGlobalObject(),"setTimeout")(monitor(e),t)}function clearTimeout$1(e){getZoneJsOriginalValue(getGlobalObject(),"clearTimeout")(e)}function setInterval$1(e,t){return getZoneJsOriginalValue(getGlobalObject(),"setInterval")(monitor(e),t)}function clearInterval$1(e){getZoneJsOriginalValue(getGlobalObject(),"clearInterval")(e)}var Observable=function(){function e(e){this.onFirstSubscribe=e;this.observers=[]}e.prototype.subscribe=function(e){var t=this;if(!this.observers.length&&this.onFirstSubscribe){this.onLastUnsubscribe=this.onFirstSubscribe()||undefined}this.observers.push(e);return{unsubscribe:function(){t.observers=t.observers.filter((function(t){return e!==t}));if(!t.observers.length&&t.onLastUnsubscribe){t.onLastUnsubscribe()}}}};e.prototype.notify=function(e){this.observers.forEach((function(t){return t(e)}))};return e}();function mergeObservables(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}var r=new Observable((function(){var t=e.map((function(e){return e.subscribe((function(e){return r.notify(e)}))}));return function(){return t.forEach((function(e){return e.unsubscribe()}))}}));return r}function throttle(e,t,r){var n=r&&r.leading!==undefined?r.leading:true;var i=r&&r.trailing!==undefined?r.trailing:true;var s=false;var a;var o;return{throttled:function(){var r=[];for(var f=0;f<arguments.length;f++){r[f]=arguments[f]}if(s){a=r;return}if(n){e.apply(void 0,r)}else{a=r}s=true;o=setTimeout$1((function(){if(i&&a){e.apply(void 0,a)}s=false;a=undefined}),t)},cancel:function(){clearTimeout$1(o);s=false;a=undefined}}}function noop$1(){}function generateUUID(e){return e?(parseInt(e,10)^Math.random()*16>>parseInt(e,10)/4).toString(16):"".concat(1e7,"-").concat(1e3,"-").concat(4e3,"-").concat(8e3,"-").concat(1e11).replace(/[018]/g,generateUUID)}var COMMA_SEPARATED_KEY_VALUE=/([\w-]+)\s*=\s*([^;]+)/g;function findCommaSeparatedValue(e,t){COMMA_SEPARATED_KEY_VALUE.lastIndex=0;while(true){var r=COMMA_SEPARATED_KEY_VALUE.exec(e);if(r){if(r[1]===t){return r[2]}}else{break}}}function findCommaSeparatedValues(e){var t=new Map;COMMA_SEPARATED_KEY_VALUE.lastIndex=0;while(true){var r=COMMA_SEPARATED_KEY_VALUE.exec(e);if(r){t.set(r[1],r[2])}else{break}}return t}function safeTruncate(e,t,r){if(r===void 0){r=""}var n=e.charCodeAt(t-1);var i=n>=55296&&n<=56319;var s=i?t+1:t;if(e.length<=s){return e}return"".concat(e.slice(0,s)).concat(r)}var SESSION_TIME_OUT_DELAY=4*ONE_HOUR;var SESSION_EXPIRATION_DELAY=15*ONE_MINUTE;function isIE(){return detectBrowserCached()===0}function isChromium(){return detectBrowserCached()===1}function isSafari(){return detectBrowserCached()===2}var browserCache;function detectBrowserCached(){return browserCache!==null&&browserCache!==void 0?browserCache:browserCache=detectBrowser()}function detectBrowser(e){var t;if(e===void 0){e=window}var r=e.navigator.userAgent;if(e.chrome||/HeadlessChrome/.test(r)){return 1}if(((t=e.navigator.vendor)===null||t===void 0?void 0:t.indexOf("Apple"))===0||/safari/i.test(r)&&!/chrome|android/i.test(r)){return 2}if(e.document.documentMode){return 0}return 3}function setCookie(e,t,r,n){var i=new Date;i.setTime(i.getTime()+r);var s="expires=".concat(i.toUTCString());var a=n&&n.crossSite?"none":"strict";var o=n&&n.domain?";domain=".concat(n.domain):"";var f=n&&n.secure?";secure":"";var c=n&&n.partitioned?";partitioned":"";document.cookie="".concat(e,"=").concat(t,";").concat(s,";path=/;samesite=").concat(a).concat(o).concat(f).concat(c)}function getCookie(e){return findCommaSeparatedValue(document.cookie,e)}var initCookieParsed;function getInitCookie(e){if(!initCookieParsed){initCookieParsed=findCommaSeparatedValues(document.cookie)}return initCookieParsed.get(e)}function deleteCookie(e,t){setCookie(e,"",0,t)}function areCookiesAuthorized(e){if(document.cookie===undefined||document.cookie===null){return false}try{var t="dd_cookie_test_".concat(generateUUID());var r="test";setCookie(t,r,ONE_MINUTE,e);var n=getCookie(t)===r;deleteCookie(t,e);return n}catch(e){display.error(e);return false}}var getCurrentSiteCache;function getCurrentSite(){if(getCurrentSiteCache===undefined){var e="dd_site_test_".concat(generateUUID());var t="test";var r=window.location.hostname.split(".");var n=r.pop();while(r.length&&!getCookie(e)){n="".concat(r.pop(),".").concat(n);setCookie(e,t,ONE_SECOND,{domain:n})}deleteCookie(e,{domain:n});getCurrentSiteCache=n}return getCurrentSiteCache}var SESSION_STORE_KEY="_dd_s";var SESSION_ENTRY_REGEXP=/^([a-z]+)=([a-z0-9-]+)$/;var SESSION_ENTRY_SEPARATOR="&";function isSessionInExpiredState(e){return isEmptyObject(e)}function expandSessionState(e){e.expire=String(dateNow()+SESSION_EXPIRATION_DELAY)}function toSessionString(e){return objectEntries(e).map((function(e){var t=e[0],r=e[1];return"".concat(t,"=").concat(r)})).join(SESSION_ENTRY_SEPARATOR)}function toSessionState(e){var t={};if(isValidSessionString(e)){e.split(SESSION_ENTRY_SEPARATOR).forEach((function(e){var r=SESSION_ENTRY_REGEXP.exec(e);if(r!==null){var n=r[1],i=r[2];t[n]=i}}))}return t}function isValidSessionString(e){return!!e&&(e.indexOf(SESSION_ENTRY_SEPARATOR)!==-1||SESSION_ENTRY_REGEXP.test(e))}var OLD_SESSION_COOKIE_NAME="_dd";var OLD_RUM_COOKIE_NAME="_dd_r";var OLD_LOGS_COOKIE_NAME="_dd_l";var RUM_SESSION_KEY$1="rum";var LOGS_SESSION_KEY="logs";function tryOldCookiesMigration(e){var t=getInitCookie(SESSION_STORE_KEY);if(!t){var r=getInitCookie(OLD_SESSION_COOKIE_NAME);var n=getInitCookie(OLD_RUM_COOKIE_NAME);var i=getInitCookie(OLD_LOGS_COOKIE_NAME);var s={};if(r){s.id=r}if(i&&/^[01]$/.test(i)){s[LOGS_SESSION_KEY]=i}if(n&&/^[012]$/.test(n)){s[RUM_SESSION_KEY$1]=n}if(!isSessionInExpiredState(s)){expandSessionState(s);e.persistSession(s)}}}function selectCookieStrategy(e){var t=buildCookieOptions(e);return areCookiesAuthorized(t)?{type:"Cookie",cookieOptions:t}:undefined}function initCookieStrategy(e){var t={isLockEnabled:isChromium(),persistSession:persistSessionCookie(e),retrieveSession:retrieveSessionCookie,clearSession:deleteSessionCookie(e)};tryOldCookiesMigration(t);return t}function persistSessionCookie(e){return function(t){setCookie(SESSION_STORE_KEY,toSessionString(t),SESSION_EXPIRATION_DELAY,e)}}function retrieveSessionCookie(){var e=getCookie(SESSION_STORE_KEY);return toSessionState(e)}function deleteSessionCookie(e){return function(){deleteCookie(SESSION_STORE_KEY,e)}}function buildCookieOptions(e){var t={};t.secure=!!e.useSecureSessionCookie||!!e.usePartitionedCrossSiteSessionCookie||!!e.useCrossSiteSessionCookie;t.crossSite=!!e.usePartitionedCrossSiteSessionCookie||!!e.useCrossSiteSessionCookie;t.partitioned=!!e.usePartitionedCrossSiteSessionCookie;if(e.trackSessionAcrossSubdomains){t.domain=getCurrentSite()}return t}var LOCAL_STORAGE_TEST_KEY="_dd_test_";function selectLocalStorageStrategy(){try{var e=generateUUID();var t="".concat(LOCAL_STORAGE_TEST_KEY).concat(e);localStorage.setItem(t,e);var r=localStorage.getItem(t);localStorage.removeItem(t);return e===r?{type:"LocalStorage"}:undefined}catch(e){return undefined}}function initLocalStorageStrategy(){return{isLockEnabled:false,persistSession:persistInLocalStorage,retrieveSession:retrieveSessionFromLocalStorage,clearSession:clearSessionFromLocalStorage}}function persistInLocalStorage(e){localStorage.setItem(SESSION_STORE_KEY,toSessionString(e))}function retrieveSessionFromLocalStorage(){var e=localStorage.getItem(SESSION_STORE_KEY);return toSessionState(e)}function clearSessionFromLocalStorage(){localStorage.removeItem(SESSION_STORE_KEY)}var LOCK_RETRY_DELAY=10;var LOCK_MAX_TRIES=100;var bufferedOperations=[];var ongoingOperations;function processSessionStoreOperations(e,t,r){var n;if(r===void 0){r=0}var i=t.isLockEnabled,s=t.retrieveSession,a=t.persistSession,o=t.clearSession;if(!ongoingOperations){ongoingOperations=e}if(e!==ongoingOperations){bufferedOperations.push(e);return}if(i&&r>=LOCK_MAX_TRIES){next(t);return}var f;var c=s();if(i){if(c.lock){retryLater(e,t,r);return}f=generateUUID();c.lock=f;a(c);c=s();if(c.lock!==f){retryLater(e,t,r);return}}var u=e.process(c);if(i){c=s();if(c.lock!==f){retryLater(e,t,r);return}}if(u){if(isSessionInExpiredState(u)){o()}else{expandSessionState(u);a(u)}}if(i){if(!(u&&isSessionInExpiredState(u))){c=s();if(c.lock!==f){retryLater(e,t,r);return}delete c.lock;a(c);u=c}}(n=e.after)===null||n===void 0?void 0:n.call(e,u||c);next(t)}function retryLater(e,t,r){setTimeout$1((function(){processSessionStoreOperations(e,t,r+1)}),LOCK_RETRY_DELAY)}function next(e){ongoingOperations=undefined;var t=bufferedOperations.shift();if(t){processSessionStoreOperations(t,e)}}var STORAGE_POLL_DELAY=ONE_SECOND;function selectSessionStoreStrategyType(e){var t=selectCookieStrategy(e);if(!t&&e.allowFallbackToLocalStorage){t=selectLocalStorageStrategy()}return t}function startSessionStore(e,t,r){var n=new Observable;var i=new Observable;var s=e.type==="Cookie"?initCookieStrategy(e.cookieOptions):initLocalStorageStrategy();var a=s.clearSession,o=s.retrieveSession;var f=setInterval$1(h,STORAGE_POLL_DELAY);var c=A();function u(){var e;processSessionStoreOperations({process:function(t){var r=d(t);e=p(r);return r},after:function(t){if(e&&!y()){b(t)}c=t}},s)}function l(){processSessionStoreOperations({process:function(e){return y()?d(e):undefined}},s)}function h(){processSessionStoreOperations({process:function(e){return!w(e)?{}:undefined},after:d},s)}function d(e){if(!w(e)){e={}}if(y()){if(m(e)){g()}else{c=e}}return e}function p(e){var n=r(e[t]),i=n.trackingType,s=n.isTracked;e[t]=i;if(s&&!e.id){e.id=generateUUID();e.created=String(dateNow())}return s}function y(){return c[t]!==undefined}function m(e){return c.id!==e.id||c[t]!==e[t]}function g(){c={};i.notify()}function b(e){c=e;n.notify()}function A(){var e=o();if(w(e)){return e}return{}}function w(e){return(e.created===undefined||dateNow()-Number(e.created)<SESSION_TIME_OUT_DELAY)&&(e.expire===undefined||dateNow()<Number(e.expire))}return{expandOrRenewSession:throttle(u,STORAGE_POLL_DELAY).throttled,expandSession:l,getSession:function(){return c},renewObservable:n,expireObservable:i,expire:function(){a();d({})},stop:function(){clearInterval$1(f)}}}function jsonStringify(e,t,r){if(typeof e!=="object"||e===null){return JSON.stringify(e)}var n=detachToJsonMethod(Object.prototype);var i=detachToJsonMethod(Array.prototype);var s=detachToJsonMethod(Object.getPrototypeOf(e));var a=detachToJsonMethod(e);try{return JSON.stringify(e,t,r)}catch(e){return"<error: unable to serialize object>"}finally{n();i();s();a()}}function detachToJsonMethod(e){var t=e;var r=t.toJSON;if(r){delete t.toJSON;return function(){t.toJSON=r}}return noop$1}function normalizeUrl(e){return buildUrl(e,getLocationOrigin()).href}function isValidUrl(e){try{return!!buildUrl(e)}catch(e){return false}}function getPathName(e){var t=buildUrl(e).pathname;return t[0]==="/"?t:"/".concat(t)}function buildUrl(e,t){var r=getSupportedUrl();if(r){try{return t!==undefined?new r(e,t):new r(e)}catch(r){throw new Error("Failed to construct URL: ".concat(String(r)," ").concat(jsonStringify({url:e,base:t})))}}if(t===undefined&&!/:/.test(e)){throw new Error("Invalid URL: '".concat(e,"'"))}var n=document;var i=n.createElement("a");if(t!==undefined){n=document.implementation.createHTMLDocument("");var s=n.createElement("base");s.href=t;n.head.appendChild(s);n.body.appendChild(i)}i.href=e;return i}var originalURL=URL;var isURLSupported;function getSupportedUrl(){if(isURLSupported===undefined){try{var e=new originalURL("http://test/path");isURLSupported=e.href==="http://test/path"}catch(e){isURLSupported=false}}return isURLSupported?originalURL:undefined}function getLocationOrigin(){return getLinkElementOrigin(window.location)}function getLinkElementOrigin(e){if(e.origin&&e.origin!=="null"){return e.origin}var t=e.host.replace(/(:80|:443)$/,"");return"".concat(e.protocol,"//").concat(t)}var INTAKE_SITE_STAGING="datad0g.com";var INTAKE_SITE_FED_STAGING="dd0g-gov.com";var INTAKE_SITE_US1="datadoghq.com";var INTAKE_SITE_EU1="datadoghq.eu";var INTAKE_SITE_US1_FED="ddog-gov.com";function createEndpointBuilder(e,t,r){var n=createEndpointUrlWithParametersBuilder(e,t);return{build:function(i,s){var a=buildEndpointParameters(e,t,r,i,s);return n(a)},urlPrefix:n(""),trackType:t}}function createEndpointUrlWithParametersBuilder(e,t){var r="/api/v2/".concat(t);var n=e.proxy;if(typeof n==="string"){var i=normalizeUrl(n);return function(e){return"".concat(i,"?ddforward=").concat(encodeURIComponent("".concat(r,"?").concat(e)))}}if(typeof n==="function"){return function(e){return n({path:r,parameters:e})}}var s=buildEndpointHost(e);return function(e){return"https://".concat(s).concat(r,"?").concat(e)}}function buildEndpointHost(e){var t=e.site,r=t===void 0?INTAKE_SITE_US1:t,n=e.internalAnalyticsSubdomain;if(n&&r===INTAKE_SITE_US1){return"".concat(n,".").concat(INTAKE_SITE_US1)}if(r===INTAKE_SITE_FED_STAGING){return"http-intake.logs.".concat(r)}var i=r.split(".");var s=i.pop();return"browser-intake-".concat(i.join("-"),".").concat(s)}function buildEndpointParameters(e,t,r,n,i){var s=e.clientToken,a=e.internalAnalyticsSubdomain;var o=i.retry,f=i.flushReason,c=i.encoding;var u=["sdk_version:".concat("5.6.0"),"api:".concat(n)].concat(r);if(f&&isExperimentalFeatureEnabled(ExperimentalFeature.COLLECT_FLUSH_REASON)){u.push("flush_reason:".concat(f))}if(o){u.push("retry_count:".concat(o.count),"retry_after:".concat(o.lastFailureStatus))}var l=["ddsource=browser","ddtags=".concat(encodeURIComponent(u.join(","))),"dd-api-key=".concat(s),"dd-evp-origin-version=".concat(encodeURIComponent("5.6.0")),"dd-evp-origin=browser","dd-request-id=".concat(generateUUID())];if(c){l.push("dd-evp-encoding=".concat(c))}if(t==="rum"){l.push("batch_time=".concat(timeStampNow()))}if(a){l.reverse()}return l.join("&")}var TAG_SIZE_LIMIT=200;function buildTags(e){var t=e.env,r=e.service,n=e.version,i=e.datacenter;var s=[];if(t){s.push(buildTag("env",t))}if(r){s.push(buildTag("service",r))}if(n){s.push(buildTag("version",n))}if(i){s.push(buildTag("datacenter",i))}return s}var FORBIDDEN_CHARACTERS=/[^a-z0-9_:./-]/;function buildTag(e,t){var r=TAG_SIZE_LIMIT-e.length-1;if(t.length>r||FORBIDDEN_CHARACTERS.test(t)){display.warn("".concat(e," value doesn't meet tag requirements and will be sanitized"))}var n=t.replace(/,/g,"_");return"".concat(e,":").concat(n)}function computeTransportConfiguration(e){var t=buildTags(e);var r=computeEndpointBuilders(e,t);var n=objectValues(r).map((function(e){return e.urlPrefix}));var i=computeReplicaConfiguration(e,n,t);return assign$4({isIntakeUrl:function(e){return n.some((function(t){return e.indexOf(t)===0}))},replica:i,site:e.site||INTAKE_SITE_US1},r)}function computeEndpointBuilders(e,t){return{logsEndpointBuilder:createEndpointBuilder(e,"logs",t),rumEndpointBuilder:createEndpointBuilder(e,"rum",t),sessionReplayEndpointBuilder:createEndpointBuilder(e,"replay",t)}}function computeReplicaConfiguration(e,t,r){if(!e.replica){return}var n=assign$4({},e,{site:INTAKE_SITE_US1,clientToken:e.replica.clientToken});var i={logsEndpointBuilder:createEndpointBuilder(n,"logs",r),rumEndpointBuilder:createEndpointBuilder(n,"rum",r)};t.push.apply(t,objectValues(i).map((function(e){return e.urlPrefix})));return assign$4({applicationId:e.replica.applicationId},i)}var DefaultPrivacyLevel={ALLOW:"allow",MASK:"mask",MASK_USER_INPUT:"mask-user-input"};function validateAndBuildConfiguration(e){var t,r,n;if(!e||!e.clientToken){display.error("Client Token is not configured, we will not send any data.");return}if(e.sessionSampleRate!==undefined&&!isPercentage(e.sessionSampleRate)){display.error("Session Sample Rate should be a number between 0 and 100");return}if(e.telemetrySampleRate!==undefined&&!isPercentage(e.telemetrySampleRate)){display.error("Telemetry Sample Rate should be a number between 0 and 100");return}if(e.telemetryConfigurationSampleRate!==undefined&&!isPercentage(e.telemetryConfigurationSampleRate)){display.error("Telemetry Configuration Sample Rate should be a number between 0 and 100");return}if(Array.isArray(e.enableExperimentalFeatures)){addExperimentalFeatures(e.enableExperimentalFeatures.filter((function(e){return objectHasValue(ExperimentalFeature,e)})))}return assign$4({beforeSend:e.beforeSend&&catchUserErrors(e.beforeSend,"beforeSend threw an error:"),sessionStoreStrategyType:selectSessionStoreStrategyType(e),sessionSampleRate:(t=e.sessionSampleRate)!==null&&t!==void 0?t:100,telemetrySampleRate:(r=e.telemetrySampleRate)!==null&&r!==void 0?r:20,telemetryConfigurationSampleRate:(n=e.telemetryConfigurationSampleRate)!==null&&n!==void 0?n:5,service:e.service,silentMultipleInit:!!e.silentMultipleInit,allowUntrustedEvents:!!e.allowUntrustedEvents,batchBytesLimit:16*ONE_KIBI_BYTE,eventRateLimiterThreshold:3e3,maxTelemetryEventsPerPage:15,flushTimeout:30*ONE_SECOND,batchMessagesLimit:50,messageBytesLimit:256*ONE_KIBI_BYTE},computeTransportConfiguration(e))}function serializeConfiguration(e){return{session_sample_rate:e.sessionSampleRate,telemetry_sample_rate:e.telemetrySampleRate,telemetry_configuration_sample_rate:e.telemetryConfigurationSampleRate,use_before_send:!!e.beforeSend,use_cross_site_session_cookie:e.useCrossSiteSessionCookie,use_partitioned_cross_site_session_cookie:e.usePartitionedCrossSiteSessionCookie,use_secure_session_cookie:e.useSecureSessionCookie,use_proxy:!!e.proxy,silent_multiple_init:e.silentMultipleInit,track_session_across_subdomains:e.trackSessionAcrossSubdomains,allow_fallback_to_local_storage:!!e.allowFallbackToLocalStorage,store_contexts_across_pages:!!e.storeContextsAcrossPages,allow_untrusted_events:!!e.allowUntrustedEvents}}function instrumentMethod(e,t,r){var n=e[t];var i=r(n);var s=function(){if(typeof i!=="function"){return undefined}return i.apply(this,arguments)};e[t]=s;return{stop:function(){if(e[t]===s){e[t]=n}else{i=n}}}}function instrumentMethodAndCallOriginal(e,t,r){var n=r.before,i=r.after;return instrumentMethod(e,t,(function(e){return function(){var t=arguments;var r;if(n){callMonitored(n,this,t)}if(typeof e==="function"){r=e.apply(this,t)}if(i){callMonitored(i,this,t)}return r}}))}function instrumentSetter(e,t,r){var n=Object.getOwnPropertyDescriptor(e,t);if(!n||!n.set||!n.configurable){return{stop:noop$1}}var i=function(e,t){setTimeout$1((function(){r(e,t)}),0)};var s=function(e){n.set.call(this,e);i(this,e)};Object.defineProperty(e,t,{set:s});return{stop:function(){var r;if(((r=Object.getOwnPropertyDescriptor(e,t))===null||r===void 0?void 0:r.set)===s){Object.defineProperty(e,t,n)}else{i=noop$1}}}}var UNKNOWN_FUNCTION="?";function computeStackTrace(e){var t=[];var r=tryToGetString(e,"stack");var n=String(e);if(r&&startsWith(r,n)){r=r.slice(n.length)}if(r){r.split("\n").forEach((function(e){var r=parseChromeLine(e)||parseChromeAnonymousLine(e)||parseWinLine(e)||parseGeckoLine(e);if(r){if(!r.func&&r.line){r.func=UNKNOWN_FUNCTION}t.push(r)}}))}return{message:tryToGetString(e,"message"),name:tryToGetString(e,"name"),stack:t}}var fileUrl="((?:file|https?|blob|chrome-extension|native|eval|webpack|snippet|<anonymous>|\\w+\\.|\\/).*?)";var filePosition="(?::(\\d+))";var CHROME_LINE_RE=new RegExp("^\\s*at (.*?) ?\\(".concat(fileUrl).concat(filePosition,"?").concat(filePosition,"?\\)?\\s*$"),"i");var CHROME_EVAL_RE=new RegExp("\\((\\S*)".concat(filePosition).concat(filePosition,"\\)"));function parseChromeLine(e){var t=CHROME_LINE_RE.exec(e);if(!t){return}var r=t[2]&&t[2].indexOf("native")===0;var n=t[2]&&t[2].indexOf("eval")===0;var i=CHROME_EVAL_RE.exec(t[2]);if(n&&i){t[2]=i[1];t[3]=i[2];t[4]=i[3]}return{args:r?[t[2]]:[],column:t[4]?+t[4]:undefined,func:t[1]||UNKNOWN_FUNCTION,line:t[3]?+t[3]:undefined,url:!r?t[2]:undefined}}var CHROME_ANONYMOUS_FUNCTION_RE=new RegExp("^\\s*at ?".concat(fileUrl).concat(filePosition,"?").concat(filePosition,"??\\s*$"),"i");function parseChromeAnonymousLine(e){var t=CHROME_ANONYMOUS_FUNCTION_RE.exec(e);if(!t){return}return{args:[],column:t[3]?+t[3]:undefined,func:UNKNOWN_FUNCTION,line:t[2]?+t[2]:undefined,url:t[1]}}var WINJS_LINE_RE=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i;function parseWinLine(e){var t=WINJS_LINE_RE.exec(e);if(!t){return}return{args:[],column:t[4]?+t[4]:undefined,func:t[1]||UNKNOWN_FUNCTION,line:+t[3],url:t[2]}}var GECKO_LINE_RE=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|capacitor|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i;var GECKO_EVAL_RE=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i;function parseGeckoLine(e){var t=GECKO_LINE_RE.exec(e);if(!t){return}var r=t[3]&&t[3].indexOf(" > eval")>-1;var n=GECKO_EVAL_RE.exec(t[3]);if(r&&n){t[3]=n[1];t[4]=n[2];t[5]=undefined}return{args:t[2]?t[2].split(","):[],column:t[5]?+t[5]:undefined,func:t[1]||UNKNOWN_FUNCTION,line:t[4]?+t[4]:undefined,url:t[3]}}function tryToGetString(e,t){if(typeof e!=="object"||!e||!(t in e)){return undefined}var r=e[t];return typeof r==="string"?r:undefined}function computeStackTraceFromOnErrorMessage(e,t,r,n){var i=[{url:t,column:n,line:r}];var s=tryToParseMessage(e),a=s.name,o=s.message;return{name:a,message:o,stack:i}}var ERROR_TYPES_RE=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?([\s\S]*)$/;function tryToParseMessage(e){var t;var r;var n;if({}.toString.call(e)==="[object String]"){t=ERROR_TYPES_RE.exec(e),r=t[1],n=t[2]}return{name:r,message:n}}var SANITIZE_DEFAULT_MAX_CHARACTER_COUNT=220*ONE_KIBI_BYTE;var JSON_PATH_ROOT_ELEMENT="$";var KEY_DECORATION_LENGTH=3;function sanitize(e,t){var r;if(t===void 0){t=SANITIZE_DEFAULT_MAX_CHARACTER_COUNT}var n=detachToJsonMethod(Object.prototype);var i=detachToJsonMethod(Array.prototype);var s=[];var a=new WeakMap;var o=sanitizeProcessor(e,JSON_PATH_ROOT_ELEMENT,undefined,s,a);var f=((r=JSON.stringify(o))===null||r===void 0?void 0:r.length)||0;if(f>t){warnOverCharacterLimit(t,"discarded",e);return undefined}while(s.length>0&&f<t){var c=s.shift();var u=0;if(Array.isArray(c.source)){for(var l=0;l<c.source.length;l++){var h=sanitizeProcessor(c.source[l],c.path,l,s,a);if(h!==undefined){f+=JSON.stringify(h).length}else{f+=4}f+=u;u=1;if(f>t){warnOverCharacterLimit(t,"truncated",e);break}c.target[l]=h}}else{for(var l in c.source){if(Object.prototype.hasOwnProperty.call(c.source,l)){var h=sanitizeProcessor(c.source[l],c.path,l,s,a);if(h!==undefined){f+=JSON.stringify(h).length+u+l.length+KEY_DECORATION_LENGTH;u=1}if(f>t){warnOverCharacterLimit(t,"truncated",e);break}c.target[l]=h}}}}n();i();return o}function sanitizeProcessor(e,t,r,n,i){var s=tryToApplyToJSON(e);if(!s||typeof s!=="object"){return sanitizePrimitivesAndFunctions(s)}var a=sanitizeObjects(s);if(a!=="[Object]"&&a!=="[Array]"&&a!=="[Error]"){return a}var o=e;if(i.has(o)){return"[Reference seen at ".concat(i.get(o),"]")}var f=r!==undefined?"".concat(t,".").concat(r):t;var c=Array.isArray(s)?[]:{};i.set(o,f);n.push({source:s,target:c,path:f});return c}function sanitizePrimitivesAndFunctions(e){if(typeof e==="bigint"){return"[BigInt] ".concat(e.toString())}if(typeof e==="function"){return"[Function] ".concat(e.name||"unknown")}if(typeof e==="symbol"){return"[Symbol] ".concat(e.description||e.toString())}return e}function sanitizeObjects(e){try{if(e instanceof Event){return{isTrusted:e.isTrusted}}var t=Object.prototype.toString.call(e);var r=t.match(/\[object (.*)\]/);if(r&&r[1]){return"[".concat(r[1],"]")}}catch(e){}return"[Unserializable]"}function tryToApplyToJSON(e){var t=e;if(t&&typeof t.toJSON==="function"){try{return t.toJSON()}catch(e){}}return e}function warnOverCharacterLimit(e,t,r){display.warn("The data provided has been ".concat(t," as it is over the limit of ").concat(e," characters:"),r)}var NO_ERROR_STACK_PRESENT_MESSAGE="No stack, consider using an instance of Error";function computeRawError(e){var t=e.stackTrace,r=e.originalError,n=e.handlingStack,i=e.startClocks,s=e.nonErrorPrefix,a=e.source,o=e.handling;var f=r instanceof Error;var c=computeMessage(t,f,s,r);var u=hasUsableStack(f,t)?toStackTraceString(t):NO_ERROR_STACK_PRESENT_MESSAGE;var l=f?flattenErrorCauses(r,a):undefined;var h=t===null||t===void 0?void 0:t.name;var d=tryToGetFingerprint(r);return{startClocks:i,source:a,handling:o,handlingStack:n,originalError:r,type:h,message:c,stack:u,causes:l,fingerprint:d}}function computeMessage(e,t,r,n){return(e===null||e===void 0?void 0:e.message)&&(e===null||e===void 0?void 0:e.name)?e.message:!t?"".concat(r," ").concat(jsonStringify(sanitize(n))):"Empty message"}function hasUsableStack(e,t){if(t===undefined){return false}if(e){return true}return t.stack.length>0&&(t.stack.length>1||t.stack[0].url!==undefined)}function tryToGetFingerprint(e){return e instanceof Error&&"dd_fingerprint"in e?String(e.dd_fingerprint):undefined}function toStackTraceString(e){var t=formatErrorMessage(e);e.stack.forEach((function(e){var r=e.func==="?"?"<anonymous>":e.func;var n=e.args&&e.args.length>0?"(".concat(e.args.join(", "),")"):"";var i=e.line?":".concat(e.line):"";var s=e.line&&e.column?":".concat(e.column):"";t+="\n  at ".concat(r).concat(n," @ ").concat(e.url).concat(i).concat(s)}));return t}function formatErrorMessage(e){return"".concat(e.name||"Error",": ").concat(e.message)}function createHandlingStack(){var e=2;var t=new Error;var r;if(!t.stack){try{throw t}catch(e){}}callMonitored((function(){var n=computeStackTrace(t);n.stack=n.stack.slice(e);r=toStackTraceString(n)}));return r}function flattenErrorCauses(e,t){var r=e;var n=[];while((r===null||r===void 0?void 0:r.cause)instanceof Error&&n.length<10){var i=computeStackTrace(r.cause);n.push({message:r.cause.message,source:t,type:i===null||i===void 0?void 0:i.name,stack:i&&toStackTraceString(i)});r=r.cause}return n.length?n:undefined}var ErrorSource={AGENT:"agent",CONSOLE:"console",CUSTOM:"custom",LOGGER:"logger",NETWORK:"network",SOURCE:"source",REPORT:"report"};function trackRuntimeError(e){var t=function(t,r){var n=computeRawError({stackTrace:t,originalError:r,startClocks:clocksNow(),nonErrorPrefix:"Uncaught",source:ErrorSource.SOURCE,handling:"unhandled"});e.notify(n)};var r=instrumentOnError(t).stop;var n=instrumentUnhandledRejection(t).stop;return{stop:function(){r();n()}}}function instrumentOnError(e){return instrumentMethodAndCallOriginal(window,"onerror",{before:function(t,r,n,i,s){var a;if(s instanceof Error){a=computeStackTrace(s)}else{a=computeStackTraceFromOnErrorMessage(t,r,n,i)}e(a,s!==null&&s!==void 0?s:t)}})}function instrumentUnhandledRejection(e){return instrumentMethodAndCallOriginal(window,"onunhandledrejection",{before:function(t){var r=t.reason||"Empty reason";var n=computeStackTrace(r);e(n,r)}})}function makePublicApi(e){var t=assign$4({version:"5.6.0",onReady:function(e){e()}},e);Object.defineProperty(t,"_setDebug",{get:function(){return setDebugMode},enumerable:false});return t}function defineGlobal(e,t,r){var n=e[t];e[t]=r;if(n&&n.q){n.q.forEach((function(e){return catchUserErrors(e,"onReady callback threw an error:")()}))}}var DOM_EVENT;(function(e){e["BEFORE_UNLOAD"]="beforeunload";e["CLICK"]="click";e["DBL_CLICK"]="dblclick";e["KEY_DOWN"]="keydown";e["LOAD"]="load";e["POP_STATE"]="popstate";e["SCROLL"]="scroll";e["TOUCH_START"]="touchstart";e["TOUCH_END"]="touchend";e["TOUCH_MOVE"]="touchmove";e["VISIBILITY_CHANGE"]="visibilitychange";e["PAGE_SHOW"]="pageshow";e["FREEZE"]="freeze";e["RESUME"]="resume";e["DOM_CONTENT_LOADED"]="DOMContentLoaded";e["POINTER_DOWN"]="pointerdown";e["POINTER_UP"]="pointerup";e["POINTER_CANCEL"]="pointercancel";e["HASH_CHANGE"]="hashchange";e["PAGE_HIDE"]="pagehide";e["MOUSE_DOWN"]="mousedown";e["MOUSE_UP"]="mouseup";e["MOUSE_MOVE"]="mousemove";e["FOCUS"]="focus";e["BLUR"]="blur";e["CONTEXT_MENU"]="contextmenu";e["RESIZE"]="resize";e["CHANGE"]="change";e["INPUT"]="input";e["PLAY"]="play";e["PAUSE"]="pause";e["SECURITY_POLICY_VIOLATION"]="securitypolicyviolation";e["SELECTION_CHANGE"]="selectionchange";e["STORAGE"]="storage"})(DOM_EVENT||(DOM_EVENT={}));function addEventListener$1(e,t,r,n,i){return addEventListeners(e,t,[r],n,i)}function addEventListeners(e,t,r,n,i){var s=i===void 0?{}:i,a=s.once,o=s.capture,f=s.passive;var c=monitor((function(t){if(!t.isTrusted&&!t.__ddIsTrusted&&!e.allowUntrustedEvents){return}if(a){h()}n(t)}));var u=f?{capture:o,passive:f}:o;var l=getZoneJsOriginalValue(t,"addEventListener");r.forEach((function(e){return l.call(t,e,c,u)}));function h(){var e=getZoneJsOriginalValue(t,"removeEventListener");r.forEach((function(r){return e.call(t,r,c,u)}))}return{stop:h}}var RawReportType={intervention:"intervention",deprecation:"deprecation",cspViolation:"csp_violation"};function initReportObservable(e,t){var r=[];if(includes(t,RawReportType.cspViolation)){r.push(createCspViolationReportObservable(e))}var n=t.filter((function(e){return e!==RawReportType.cspViolation}));if(n.length){r.push(createReportObservable(n))}return mergeObservables.apply(void 0,r)}function createReportObservable(e){var t=new Observable((function(){if(!window.ReportingObserver){return}var r=monitor((function(e,r){return e.forEach((function(e){t.notify(buildRawReportFromReport(e))}))}));var n=new window.ReportingObserver(r,{types:e,buffered:true});n.observe();return function(){n.disconnect()}}));return t}function createCspViolationReportObservable(e){var t=new Observable((function(){var r=addEventListener$1(e,document,DOM_EVENT.SECURITY_POLICY_VIOLATION,(function(e){t.notify(buildRawReportFromCspViolation(e))})).stop;return r}));return t}function buildRawReportFromReport(e){var t=e.type,r=e.body;return{type:t,subtype:r.id,message:"".concat(t,": ").concat(r.message),originalReport:e,stack:buildStack(r.id,r.message,r.sourceFile,r.lineNumber,r.columnNumber)}}function buildRawReportFromCspViolation(e){var t=RawReportType.cspViolation;var r="'".concat(e.blockedURI,"' blocked by '").concat(e.effectiveDirective,"' directive");return{type:RawReportType.cspViolation,subtype:e.effectiveDirective,message:"".concat(t,": ").concat(r),stack:buildStack(e.effectiveDirective,e.originalPolicy?"".concat(r,' of the policy "').concat(safeTruncate(e.originalPolicy,100,"..."),'"'):"no policy",e.sourceFile,e.lineNumber,e.columnNumber),originalReport:e}}function buildStack(e,t,r,n,i){return r?toStackTraceString({name:e,message:t,stack:[{func:"?",url:r,line:n!==null&&n!==void 0?n:undefined,column:i!==null&&i!==void 0?i:undefined}]}):undefined}function sendToExtension(e,t){var r=window.__ddBrowserSdkExtensionCallback;if(r){r({type:e,payload:t})}}function getType(e){if(e===null){return"null"}if(Array.isArray(e)){return"array"}return typeof e}function mergeInto(e,t,r){if(r===void 0){r=createCircularReferenceChecker()}if(t===undefined){return e}if(typeof t!=="object"||t===null){return t}else if(t instanceof Date){return new Date(t.getTime())}else if(t instanceof RegExp){var n=t.flags||[t.global?"g":"",t.ignoreCase?"i":"",t.multiline?"m":"",t.sticky?"y":"",t.unicode?"u":""].join("");return new RegExp(t.source,n)}if(r.hasAlreadyBeenSeen(t)){return undefined}else if(Array.isArray(t)){var i=Array.isArray(e)?e:[];for(var s=0;s<t.length;++s){i[s]=mergeInto(i[s],t[s],r)}return i}var a=getType(e)==="object"?e:{};for(var o in t){if(Object.prototype.hasOwnProperty.call(t,o)){a[o]=mergeInto(a[o],t[o],r)}}return a}function deepClone(e){return mergeInto(undefined,e)}function combine$1(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}var r;for(var n=0,i=e;n<i.length;n++){var s=i[n];if(s===undefined||s===null){continue}r=mergeInto(r,s)}return r}function createCircularReferenceChecker(){if(typeof WeakSet!=="undefined"){var e=new WeakSet;return{hasAlreadyBeenSeen:function(t){var r=e.has(t);if(!r){e.add(t)}return r}}}var t=[];return{hasAlreadyBeenSeen:function(e){var r=t.indexOf(e)>=0;if(!r){t.push(e)}return r}}}var TelemetryType={log:"log",configuration:"configuration"};var ALLOWED_FRAME_URLS=["https://www.datadoghq-browser-agent.com","https://www.datad0g-browser-agent.com","https://d3uc069fcn7uxw.cloudfront.net","https://d20xtzwzcl0ceb.cloudfront.net","http://localhost","<anonymous>"];var TELEMETRY_EXCLUDED_SITES=[INTAKE_SITE_US1_FED];var telemetryConfiguration={maxEventsPerPage:0,sentEventCount:0,telemetryEnabled:false,telemetryConfigurationEnabled:false};var onRawTelemetryEventCollected;function startTelemetry(e,t){var r;var n=new Observable;telemetryConfiguration.telemetryEnabled=!includes(TELEMETRY_EXCLUDED_SITES,t.site)&&performDraw(t.telemetrySampleRate);telemetryConfiguration.telemetryConfigurationEnabled=telemetryConfiguration.telemetryEnabled&&performDraw(t.telemetryConfigurationSampleRate);var i=getRuntimeEnvInfo();onRawTelemetryEventCollected=function(t){if(telemetryConfiguration.telemetryEnabled){var r=s(e,t,i);n.notify(r);sendToExtension("telemetry",r)}};startMonitorErrorCollection(addTelemetryError);assign$4(telemetryConfiguration,{maxEventsPerPage:t.maxTelemetryEventsPerPage,sentEventCount:0});function s(e,t,n){return combine$1({type:"telemetry",date:timeStampNow(),service:e,version:"5.6.0",source:"browser",_dd:{format_version:2},telemetry:combine$1(t,{runtime_env:n}),experimental_features:arrayFrom(getExperimentalFeatures())},r!==undefined?r():{})}return{setContextProvider:function(e){r=e},observable:n,enabled:telemetryConfiguration.telemetryEnabled}}function getRuntimeEnvInfo(){return{is_local_file:window.location.protocol==="file:",is_worker:"WorkerGlobalScope"in self}}function isTelemetryReplicationAllowed(e){return e.site===INTAKE_SITE_STAGING}function addTelemetryDebug(e,t){displayIfDebugEnabled(ConsoleApiName.debug,e,t);addTelemetry(assign$4({type:TelemetryType.log,message:e,status:"debug"},t))}function addTelemetryError(e,t){addTelemetry(assign$4({type:TelemetryType.log,status:"error"},formatError(e),t))}function addTelemetryConfiguration(e){if(telemetryConfiguration.telemetryConfigurationEnabled){addTelemetry({type:TelemetryType.configuration,configuration:e})}}function addTelemetry(e){if(onRawTelemetryEventCollected&&telemetryConfiguration.sentEventCount<telemetryConfiguration.maxEventsPerPage){telemetryConfiguration.sentEventCount+=1;onRawTelemetryEventCollected(e)}}function formatError(e){if(e instanceof Error){var t=computeStackTrace(e);return{error:{kind:t.name,stack:toStackTraceString(scrubCustomerFrames(t))},message:t.message}}return{error:{stack:NO_ERROR_STACK_PRESENT_MESSAGE},message:"".concat("Uncaught"," ").concat(jsonStringify(e))}}function scrubCustomerFrames(e){e.stack=e.stack.filter((function(e){return!e.url||ALLOWED_FRAME_URLS.some((function(t){return startsWith(e.url,t)}))}));return e}var END_OF_TIMES=Infinity;var CLEAR_OLD_VALUES_INTERVAL=ONE_MINUTE;var ValueHistory=function(){function e(e,t){var r=this;this.expireDelay=e;this.maxEntries=t;this.entries=[];this.clearOldValuesInterval=setInterval$1((function(){return r.clearOldValues()}),CLEAR_OLD_VALUES_INTERVAL)}e.prototype.add=function(e,t){var r=this;var n={value:e,startTime:t,endTime:END_OF_TIMES,remove:function(){var e=r.entries.indexOf(n);if(e>=0){r.entries.splice(e,1)}},close:function(e){n.endTime=e}};if(this.maxEntries&&this.entries.length>=this.maxEntries){this.entries.pop()}this.entries.unshift(n);return n};e.prototype.find=function(e){if(e===void 0){e=END_OF_TIMES}for(var t=0,r=this.entries;t<r.length;t++){var n=r[t];if(n.startTime<=e){if(e<=n.endTime){return n.value}break}}};e.prototype.closeActive=function(e){var t=this.entries[0];if(t&&t.endTime===END_OF_TIMES){t.close(e)}};e.prototype.findAll=function(e,t){if(e===void 0){e=END_OF_TIMES}if(t===void 0){t=0}var r=addDuration(e,t);return this.entries.filter((function(t){return t.startTime<=r&&e<=t.endTime})).map((function(e){return e.value}))};e.prototype.reset=function(){this.entries=[]};e.prototype.stop=function(){clearInterval$1(this.clearOldValuesInterval)};e.prototype.clearOldValues=function(){var e=relativeNow()-this.expireDelay;while(this.entries.length>0&&this.entries[this.entries.length-1].endTime<e){this.entries.pop()}};return e}();var VISIBILITY_CHECK_DELAY=ONE_MINUTE;var SESSION_CONTEXT_TIMEOUT_DELAY=SESSION_TIME_OUT_DELAY;function startSessionManager(e,t,r){var n=startSessionStore(e.sessionStoreStrategyType,t,r);var i=new ValueHistory(SESSION_CONTEXT_TIMEOUT_DELAY);n.renewObservable.subscribe((function(){i.add(s(),relativeNow())}));n.expireObservable.subscribe((function(){i.closeActive(relativeNow())}));n.expandOrRenewSession();i.add(s(),clocksOrigin().relative);trackActivity(e,(function(){return n.expandOrRenewSession()}));trackVisibility(e,(function(){return n.expandSession()}));function s(){return{id:n.getSession().id,trackingType:n.getSession()[t]}}return{findActiveSession:function(e){return i.find(e)},renewObservable:n.renewObservable,expireObservable:n.expireObservable,expire:n.expire}}function trackActivity(e,t){addEventListeners(e,window,[DOM_EVENT.CLICK,DOM_EVENT.TOUCH_START,DOM_EVENT.KEY_DOWN,DOM_EVENT.SCROLL],t,{capture:true,passive:true}).stop}function trackVisibility(e,t){var r=function(){if(document.visibilityState==="visible"){t()}};addEventListener$1(e,document,DOM_EVENT.VISIBILITY_CHANGE,r).stop;setInterval$1(r,VISIBILITY_CHECK_DELAY)}function isServerError(e){return e>=500}function tryToClone(e){try{return e.clone()}catch(e){return}}var MAX_ONGOING_BYTES_COUNT=80*ONE_KIBI_BYTE;var MAX_ONGOING_REQUESTS=32;var MAX_QUEUE_BYTES_COUNT=3*ONE_MEBI_BYTE;var MAX_BACKOFF_TIME=ONE_MINUTE;var INITIAL_BACKOFF_TIME=ONE_SECOND;function sendWithRetryStrategy(e,t,r,n,i){if(t.transportStatus===0&&t.queuedPayloads.size()===0&&t.bandwidthMonitor.canHandle(e)){send(e,t,r,{onSuccess:function(){return retryQueuedPayloads(0,t,r,n,i)},onFailure:function(){t.queuedPayloads.enqueue(e);scheduleRetry(t,r,n,i)}})}else{t.queuedPayloads.enqueue(e)}}function scheduleRetry(e,t,r,n){if(e.transportStatus!==2){return}setTimeout$1((function(){var i=e.queuedPayloads.first();send(i,e,t,{onSuccess:function(){e.queuedPayloads.dequeue();e.currentBackoffTime=INITIAL_BACKOFF_TIME;retryQueuedPayloads(1,e,t,r,n)},onFailure:function(){e.currentBackoffTime=Math.min(MAX_BACKOFF_TIME,e.currentBackoffTime*2);scheduleRetry(e,t,r,n)}})}),e.currentBackoffTime)}function send(e,t,r,n){var i=n.onSuccess,s=n.onFailure;t.bandwidthMonitor.add(e);r(e,(function(r){t.bandwidthMonitor.remove(e);if(!shouldRetryRequest(r)){t.transportStatus=0;i()}else{t.transportStatus=t.bandwidthMonitor.ongoingRequestCount>0?1:2;e.retry={count:e.retry?e.retry.count+1:1,lastFailureStatus:r.status};s()}}))}function retryQueuedPayloads(e,t,r,n,i){if(e===0&&t.queuedPayloads.isFull()&&!t.queueFullReported){i({message:"Reached max ".concat(n," events size queued for upload: ").concat(MAX_QUEUE_BYTES_COUNT/ONE_MEBI_BYTE,"MiB"),source:ErrorSource.AGENT,startClocks:clocksNow()});t.queueFullReported=true}var s=t.queuedPayloads;t.queuedPayloads=newPayloadQueue();while(s.size()>0){sendWithRetryStrategy(s.dequeue(),t,r,n,i)}}function shouldRetryRequest(e){return e.type!=="opaque"&&(e.status===0&&!navigator.onLine||e.status===408||e.status===429||isServerError(e.status))}function newRetryState(){return{transportStatus:0,currentBackoffTime:INITIAL_BACKOFF_TIME,bandwidthMonitor:newBandwidthMonitor(),queuedPayloads:newPayloadQueue(),queueFullReported:false}}function newPayloadQueue(){var e=[];return{bytesCount:0,enqueue:function(t){if(this.isFull()){return}e.push(t);this.bytesCount+=t.bytesCount},first:function(){return e[0]},dequeue:function(){var t=e.shift();if(t){this.bytesCount-=t.bytesCount}return t},size:function(){return e.length},isFull:function(){return this.bytesCount>=MAX_QUEUE_BYTES_COUNT}}}function newBandwidthMonitor(){return{ongoingRequestCount:0,ongoingByteCount:0,canHandle:function(e){return this.ongoingRequestCount===0||this.ongoingByteCount+e.bytesCount<=MAX_ONGOING_BYTES_COUNT&&this.ongoingRequestCount<MAX_ONGOING_REQUESTS},add:function(e){this.ongoingRequestCount+=1;this.ongoingByteCount+=e.bytesCount},remove:function(e){this.ongoingRequestCount-=1;this.ongoingByteCount-=e.bytesCount}}}function createHttpRequest(e,t,r,n){var i=newRetryState();var s=function(n,i){return fetchKeepAliveStrategy(e,t,r,n,i)};return{send:function(e){sendWithRetryStrategy(e,i,s,t.trackType,n)},sendOnExit:function(n){sendBeaconStrategy(e,t,r,n)}}}function sendBeaconStrategy(e,t,r,n){var i=!!navigator.sendBeacon&&n.bytesCount<r;if(i){try{var s=t.build("beacon",n);var a=navigator.sendBeacon(s,n.data);if(a){return}}catch(e){reportBeaconError(e)}}var o=t.build("xhr",n);sendXHR(e,o,n.data)}var hasReportedBeaconError=false;function reportBeaconError(e){if(!hasReportedBeaconError){hasReportedBeaconError=true;addTelemetryError(e)}}function fetchKeepAliveStrategy(e,t,r,n,i){var s=isKeepAliveSupported()&&n.bytesCount<r;if(s){var a=t.build("fetch",n);fetch(a,{method:"POST",body:n.data,keepalive:true,mode:"cors"}).then(monitor((function(e){return i===null||i===void 0?void 0:i({status:e.status,type:e.type})})),monitor((function(){var r=t.build("xhr",n);sendXHR(e,r,n.data,i)})))}else{var o=t.build("xhr",n);sendXHR(e,o,n.data,i)}}function isKeepAliveSupported(){try{return window.Request&&"keepalive"in new Request("http://a")}catch(e){return false}}function sendXHR(e,t,r,n){var i=new XMLHttpRequest;i.open("POST",t,true);if(r instanceof Blob){i.setRequestHeader("Content-Type",r.type)}addEventListener$1(e,i,"loadend",(function(){n===null||n===void 0?void 0:n({status:i.status})}),{once:true});i.send(r)}function getEventBridge(){var e=getEventBridgeGlobal();if(!e){return}return{getAllowedWebViewHosts:function(){return JSON.parse(e.getAllowedWebViewHosts())},send:function(t,r){e.send(JSON.stringify({eventType:t,event:r}))}}}function canUseEventBridge(e){var t;if(e===void 0){e=(t=getGlobalObject().location)===null||t===void 0?void 0:t.hostname}var r=getEventBridge();return!!r&&r.getAllowedWebViewHosts().some((function(t){return e===t||endsWith(e,".".concat(t))}))}function getEventBridgeGlobal(){return getGlobalObject().DatadogEventBridge}var PageExitReason={HIDDEN:"visibility_hidden",UNLOADING:"before_unload",PAGEHIDE:"page_hide",FROZEN:"page_frozen"};function createPageExitObservable(e){var t=new Observable((function(){var r=isExperimentalFeatureEnabled(ExperimentalFeature.PAGEHIDE);var n=addEventListeners(e,window,[DOM_EVENT.VISIBILITY_CHANGE,DOM_EVENT.FREEZE,DOM_EVENT.PAGE_HIDE],(function(e){if(e.type===DOM_EVENT.PAGE_HIDE&&r){t.notify({reason:PageExitReason.PAGEHIDE})}else if(e.type===DOM_EVENT.VISIBILITY_CHANGE&&document.visibilityState==="hidden"){t.notify({reason:PageExitReason.HIDDEN})}else if(e.type===DOM_EVENT.FREEZE){t.notify({reason:PageExitReason.FROZEN})}}),{capture:true}).stop;var i=noop$1;if(!r){i=addEventListener$1(e,window,DOM_EVENT.BEFORE_UNLOAD,(function(){t.notify({reason:PageExitReason.UNLOADING})})).stop}return function(){n();i()}}));return t}function isPageExitReason(e){return includes(objectValues(PageExitReason),e)}var Batch=function(){function e(e,t,r,n){var i=this;this.encoder=e;this.request=t;this.flushController=r;this.messageBytesLimit=n;this.upsertBuffer={};this.flushSubscription=this.flushController.flushObservable.subscribe((function(e){return i.flush(e)}))}e.prototype.add=function(e){this.addOrUpdate(e)};e.prototype.upsert=function(e,t){this.addOrUpdate(e,t)};e.prototype.stop=function(){this.flushSubscription.unsubscribe()};e.prototype.flush=function(e){var t=objectValues(this.upsertBuffer).join("\n");this.upsertBuffer={};var r=isPageExitReason(e.reason);var n=r?this.request.sendOnExit:this.request.send;if(r&&this.encoder.isAsync){var i=this.encoder.finishSync();if(i.outputBytesCount){n(formatPayloadFromEncoder(i,e))}var s=[i.pendingData,t].filter(Boolean).join("\n");if(s){n({data:s,bytesCount:computeBytesCount(s),flushReason:e.reason})}}else{if(t){this.encoder.write(this.encoder.isEmpty?t:"\n".concat(t))}this.encoder.finish((function(t){n(formatPayloadFromEncoder(t,e))}))}};e.prototype.addOrUpdate=function(e,t){var r=jsonStringify(e);var n=this.encoder.estimateEncodedBytesCount(r);if(n>=this.messageBytesLimit){display.warn("Discarded a message whose size was bigger than the maximum allowed size ".concat(this.messageBytesLimit,"KB."));return}if(this.hasMessageFor(t)){this.remove(t)}this.push(r,n,t)};e.prototype.push=function(e,t,r){var n=this;this.flushController.notifyBeforeAddMessage(t);if(r!==undefined){this.upsertBuffer[r]=e;this.flushController.notifyAfterAddMessage()}else{this.encoder.write(this.encoder.isEmpty?e:"\n".concat(e),(function(e){n.flushController.notifyAfterAddMessage(e-t)}))}};e.prototype.remove=function(e){var t=this.upsertBuffer[e];delete this.upsertBuffer[e];var r=this.encoder.estimateEncodedBytesCount(t);this.flushController.notifyAfterRemoveMessage(r)};e.prototype.hasMessageFor=function(e){return e!==undefined&&this.upsertBuffer[e]!==undefined};return e}();function formatPayloadFromEncoder(e,t){var r;if(typeof e.output==="string"){r=e.output}else{r=new Blob([e.output],{type:"text/plain"})}return{data:r,bytesCount:e.outputBytesCount,encoding:e.encoding,flushReason:t.reason}}function createFlushController(e){var t=e.messagesLimit,r=e.bytesLimit,n=e.durationLimit,i=e.pageExitObservable,s=e.sessionExpireObservable;var a=i.subscribe((function(e){return l(e.reason)}));var o=s.subscribe((function(){return l("session_expire")}));var f=new Observable((function(){return function(){a.unsubscribe();o.unsubscribe()}}));var c=0;var u=0;function l(e){if(u===0){return}var t=u;var r=c;u=0;c=0;p();f.notify({reason:e,messagesCount:t,bytesCount:r})}var h;function d(){if(h===undefined){h=setTimeout$1((function(){l("duration_limit")}),n)}}function p(){clearTimeout$1(h);h=undefined}return{flushObservable:f,get messagesCount(){return u},notifyBeforeAddMessage:function(e){if(c+e>=r){l("bytes_limit")}u+=1;c+=e;d()},notifyAfterAddMessage:function(e){if(e===void 0){e=0}c+=e;if(u>=t){l("messages_limit")}else if(c>=r){l("bytes_limit")}},notifyAfterRemoveMessage:function(e){c-=e;u-=1;if(u===0){p()}}}}function startBatchWithReplica(e,t,r,n,i,s){var a=f(e,t);var o=r&&f(e,r);function f(e,t){var r=t.endpoint,a=t.encoder;return new Batch(a,createHttpRequest(e,r,e.batchBytesLimit,n),createFlushController({messagesLimit:e.batchMessagesLimit,bytesLimit:e.batchBytesLimit,durationLimit:e.flushTimeout,pageExitObservable:i,sessionExpireObservable:s}),e.messageBytesLimit)}return{flushObservable:a.flushController.flushObservable,add:function(e,t){if(t===void 0){t=true}a.add(e);if(o&&t){o.add(r.transformMessage?r.transformMessage(e):e)}},upsert:function(e,t){a.upsert(e,t);if(o){o.upsert(r.transformMessage?r.transformMessage(e):e,t)}},stop:function(){a.stop();o===null||o===void 0?void 0:o.stop()}}}function createIdentityEncoder(){var e="";var t=0;return{isAsync:false,get isEmpty(){return!e},write:function(r,n){var i=computeBytesCount(r);t+=i;e+=r;if(n){n(i)}},finish:function(e){e(this.finishSync())},finishSync:function(){var r={output:e,outputBytesCount:t,rawBytesCount:t,pendingData:""};e="";t=0;return r},estimateEncodedBytesCount:function(e){return e.length}}}var AbstractLifeCycle=function(){function e(){this.callbacks={}}e.prototype.notify=function(e,t){var r=this.callbacks[e];if(r){r.forEach((function(e){return e(t)}))}};e.prototype.subscribe=function(e,t){var r=this;if(!this.callbacks[e]){this.callbacks[e]=[]}this.callbacks[e].push(t);return{unsubscribe:function(){r.callbacks[e]=r.callbacks[e].filter((function(e){return t!==e}))}}};return e}();function createEventRateLimiter(e,t,r){var n=0;var i=false;return{isLimitReached:function(){if(n===0){setTimeout$1((function(){n=0}),ONE_MINUTE)}n+=1;if(n<=t||i){i=false;return false}if(n===t+1){i=true;try{r({message:"Reached max number of ".concat(e,"s by minute: ").concat(t),source:ErrorSource.AGENT,startClocks:clocksNow()})}finally{i=false}}return true}}}function runOnReadyState(e,t,r){if(document.readyState===t||document.readyState==="complete"){r()}else{var n=t==="complete"?DOM_EVENT.LOAD:DOM_EVENT.DOM_CONTENT_LOADED;addEventListener$1(e,window,n,r,{once:true})}}var xhrObservable;var xhrContexts=new WeakMap;function initXhrObservable(e){if(!xhrObservable){xhrObservable=createXhrObservable(e)}return xhrObservable}function createXhrObservable(e){var t=new Observable((function(){var r=instrumentMethodAndCallOriginal(XMLHttpRequest.prototype,"open",{before:openXhr}).stop;var n=instrumentMethodAndCallOriginal(XMLHttpRequest.prototype,"send",{before:function(){sendXhr.call(this,e,t)}}).stop;var i=instrumentMethodAndCallOriginal(XMLHttpRequest.prototype,"abort",{before:abortXhr}).stop;return function(){r();n();i()}}));return t}function openXhr(e,t){xhrContexts.set(this,{state:"open",method:e.toUpperCase(),url:normalizeUrl(String(t))})}function sendXhr(e,t){var r=this;var n=xhrContexts.get(this);if(!n){return}var i=n;i.state="start";i.startClocks=clocksNow();i.isAborted=false;i.xhr=this;var s=false;var a=instrumentMethodAndCallOriginal(this,"onreadystatechange",{before:function(){if(this.readyState===XMLHttpRequest.DONE){o()}}}).stop;var o=function(){f();a();if(s){return}s=true;var e=n;e.state="complete";e.duration=elapsed(i.startClocks.timeStamp,timeStampNow());e.status=r.status;t.notify(shallowClone(e))};var f=addEventListener$1(e,this,"loadend",o).stop;t.notify(i)}function abortXhr(){var e=xhrContexts.get(this);if(e){e.isAborted=true}}var fetchObservable;function initFetchObservable(){if(!fetchObservable){fetchObservable=createFetchObservable()}return fetchObservable}function createFetchObservable(){var e=new Observable((function(){if(!window.fetch){return}var t=instrumentMethod(window,"fetch",(function(t){return function(r,n){var i;var s=callMonitored(beforeSend,null,[e,r,n]);if(s){i=t.call(this,s.input,s.init);callMonitored(afterSend,null,[e,i,s])}else{i=t.call(this,r,n)}return i}})).stop;return t}));return e}function beforeSend(e,t,r){var n=r&&r.method||t instanceof Request&&t.method;var i=n?n.toUpperCase():"GET";var s=t instanceof Request?t.url:normalizeUrl(String(t));var a=clocksNow();var o={state:"start",init:r,input:t,method:i,startClocks:a,url:s};e.notify(o);return o}function afterSend(e,t,r){var n=function(t){var n=r;n.state="resolve";if("stack"in t||t instanceof Error){n.status=0;n.isAborted=t instanceof DOMException&&t.code===DOMException.ABORT_ERR;n.error=t}else if("status"in t){n.response=t;n.responseType=t.type;n.status=t.status;n.isAborted=false}e.notify(n)};t.then(monitor(n),monitor(n))}var consoleObservablesByApi={};function initConsoleObservable(e){var t=e.map((function(e){if(!consoleObservablesByApi[e]){consoleObservablesByApi[e]=createConsoleObservable(e)}return consoleObservablesByApi[e]}));return mergeObservables.apply(void 0,t)}function createConsoleObservable(e){var t=new Observable((function(){var r=globalConsole[e];globalConsole[e]=function(){var n=[];for(var i=0;i<arguments.length;i++){n[i]=arguments[i]}r.apply(console,n);var s=createHandlingStack();callMonitored((function(){t.notify(buildConsoleLog(n,e,s))}))};return function(){globalConsole[e]=r}}));return t}function buildConsoleLog(e,t,r){var n=e.map((function(e){return formatConsoleParameters(e)})).join(" ");var i;var s;if(t===ConsoleApiName.error){var a=find(e,(function(e){return e instanceof Error}));i=a?toStackTraceString(computeStackTrace(a)):undefined;s=tryToGetFingerprint(a)}return{api:t,message:n,stack:i,handlingStack:r,fingerprint:s}}function formatConsoleParameters(e){if(typeof e==="string"){return sanitize(e)}if(e instanceof Error){return formatErrorMessage(computeStackTrace(e))}return jsonStringify(sanitize(e),undefined,2)}var BUFFER_LIMIT=500;var BoundedBuffer=function(){function e(){this.buffer=[]}e.prototype.add=function(e){var t=this.buffer.push(e);if(t>BUFFER_LIMIT){this.buffer.splice(0,1)}};e.prototype.drain=function(){this.buffer.forEach((function(e){return e()}));this.buffer.length=0};return e}();var _a$z;var CUSTOMER_DATA_BYTES_LIMIT=3*ONE_KIBI_BYTE;var CustomerDataLabel=(_a$z={},_a$z[0]="feature flag evaluation",_a$z[1]="user",_a$z[2]="global context",_a$z[3]="logger context",_a$z);function warnIfCustomerDataLimitReached(e,t){if(e>CUSTOMER_DATA_BYTES_LIMIT){display.warn("The ".concat(CustomerDataLabel[t]," data exceeds the recommended ").concat(CUSTOMER_DATA_BYTES_LIMIT/ONE_KIBI_BYTE,"KiB threshold. More details: https://docs.datadoghq.com/real_user_monitoring/browser/troubleshooting/#customer-data-exceeds-the-recommended-3kib-warning"));return true}return false}var BYTES_COMPUTATION_THROTTLING_DELAY$1=200;function createContextManager(e,t){if(t===void 0){t=computeBytesCount}var r={};var n;var i=false;var s=new Observable;var a=throttle((function(r){n=t(jsonStringify(r));if(!i){i=warnIfCustomerDataLimitReached(n,e)}}),BYTES_COMPUTATION_THROTTLING_DELAY$1).throttled;var o={getBytesCount:function(){return n},getContext:function(){return deepClone(r)},setContext:function(e){if(getType(e)==="object"){r=sanitize(e);a(r)}else{o.clearContext()}s.notify()},setContextProperty:function(e,t){r[e]=sanitize(t);a(r);s.notify()},removeContextProperty:function(e){delete r[e];a(r);s.notify()},clearContext:function(){r={};n=0;s.notify()},changeObservable:s};return o}var CONTEXT_STORE_KEY_PREFIX="_dd_c";var storageListeners=[];function createStoredContextManager(e,t,r,n){if(n===void 0){n=computeBytesCount}var i=buildStorageKey(t,r);var s=createContextManager(r,n);a();storageListeners.push(addEventListener$1(e,window,DOM_EVENT.STORAGE,(function(e){var t=e.key;if(i===t){a()}})));s.changeObservable.subscribe(o);return s;function a(){var e=localStorage.getItem(i);var t=e!==null?JSON.parse(e):{};s.setContext(t)}function o(){localStorage.setItem(i,JSON.stringify(s.getContext()))}}function buildStorageKey(e,t){return"".concat(CONTEXT_STORE_KEY_PREFIX,"_").concat(e,"_").concat(t)}function readBytesFromStream(e,t,r){var n=e.getReader();var i=[];var s=0;a();function a(){n.read().then(monitor((function(e){if(e.done){o();return}if(r.collectStreamBody){i.push(e.value)}s+=e.value.length;if(s>r.bytesLimit){o()}else{a()}})),monitor((function(e){return t(e)})))}function o(){n.cancel().catch(noop$1);var e;var a;if(r.collectStreamBody){var o;if(i.length===1){o=i[0]}else{o=new Uint8Array(s);var f=0;i.forEach((function(e){o.set(e,f);f+=e.length}))}e=o.slice(0,r.bytesLimit);a=o.length>r.bytesLimit}t(undefined,e,a)}}var SYNTHETICS_TEST_ID_COOKIE_NAME="datadog-synthetics-public-id";var SYNTHETICS_RESULT_ID_COOKIE_NAME="datadog-synthetics-result-id";var SYNTHETICS_INJECTS_RUM_COOKIE_NAME="datadog-synthetics-injects-rum";function willSyntheticsInjectRum(){return Boolean(window._DATADOG_SYNTHETICS_INJECTS_RUM||getInitCookie(SYNTHETICS_INJECTS_RUM_COOKIE_NAME))}function getSyntheticsTestId(){var e=window._DATADOG_SYNTHETICS_PUBLIC_ID||getInitCookie(SYNTHETICS_TEST_ID_COOKIE_NAME);return typeof e==="string"?e:undefined}function getSyntheticsResultId(){var e=window._DATADOG_SYNTHETICS_RESULT_ID||getInitCookie(SYNTHETICS_RESULT_ID_COOKIE_NAME);return typeof e==="string"?e:undefined}function sanitizeUser(e){var t=assign$4({},e);var r=["id","name","email"];r.forEach((function(e){if(e in t){t[e]=String(t[e])}}));return t}function checkUser(e){var t=getType(e)==="object";if(!t){display.error("Unsupported user:",e)}return t}function isMatchOption(e){var t=getType(e);return t==="string"||t==="function"||e instanceof RegExp}function matchList(e,t,r){if(r===void 0){r=false}return e.some((function(e){try{if(typeof e==="function"){return e(t)}else if(e instanceof RegExp){return e.test(t)}else if(typeof e==="string"){return r?startsWith(t,e):e===t}}catch(e){display.error(e)}return false}))}function isTracingOption(e){var t=e;return getType(t)==="object"&&isMatchOption(t.match)&&Array.isArray(t.propagatorTypes)}function clearTracingIfNeeded(e){if(e.status===0&&!e.isAborted){e.traceId=undefined;e.spanId=undefined;e.traceSampled=undefined}}function startTracer(e,t){return{clearTracingIfNeeded,traceFetch:function(r){return injectHeadersIfTracingAllowed(e,r,t,(function(e){var t;if(r.input instanceof Request&&!((t=r.init)===null||t===void 0?void 0:t.headers)){r.input=new Request(r.input);Object.keys(e).forEach((function(t){r.input.headers.append(t,e[t])}))}else{r.init=shallowClone(r.init);var n=[];if(r.init.headers instanceof Headers){r.init.headers.forEach((function(e,t){n.push([t,e])}))}else if(Array.isArray(r.init.headers)){r.init.headers.forEach((function(e){n.push(e)}))}else if(r.init.headers){Object.keys(r.init.headers).forEach((function(e){n.push([e,r.init.headers[e]])}))}r.init.headers=n.concat(objectEntries(e))}}))},traceXhr:function(r,n){return injectHeadersIfTracingAllowed(e,r,t,(function(e){Object.keys(e).forEach((function(t){n.setRequestHeader(t,e[t])}))}))}}}function injectHeadersIfTracingAllowed(e,t,r,n){if(!isTracingSupported()||!r.findTrackedSession()){return}var i=find(e.allowedTracingUrls,(function(e){return matchList([e.match],t.url,true)}));if(!i){return}t.traceId=new TraceIdentifier;t.spanId=new TraceIdentifier;t.traceSampled=!isNumber(e.traceSampleRate)||performDraw(e.traceSampleRate);n(makeTracingHeaders(t.traceId,t.spanId,t.traceSampled,i.propagatorTypes))}function isTracingSupported(){return getCrypto$1()!==undefined}function getCrypto$1(){return window.crypto||window.msCrypto}function makeTracingHeaders(e,t,r,n){var i={};n.forEach((function(n){switch(n){case"datadog":{assign$4(i,{"x-datadog-origin":"rum","x-datadog-parent-id":t.toDecimalString(),"x-datadog-sampling-priority":r?"1":"0","x-datadog-trace-id":e.toDecimalString()});break}case"tracecontext":{assign$4(i,{traceparent:"00-0000000000000000".concat(e.toPaddedHexadecimalString(),"-").concat(t.toPaddedHexadecimalString(),"-0").concat(r?"1":"0")});break}case"b3":{assign$4(i,{b3:"".concat(e.toPaddedHexadecimalString(),"-").concat(t.toPaddedHexadecimalString(),"-").concat(r?"1":"0")});break}case"b3multi":{assign$4(i,{"X-B3-TraceId":e.toPaddedHexadecimalString(),"X-B3-SpanId":t.toPaddedHexadecimalString(),"X-B3-Sampled":r?"1":"0"});break}}}));return i}var TraceIdentifier=function(){function e(){this.buffer=new Uint8Array(8);getCrypto$1().getRandomValues(this.buffer);this.buffer[0]=this.buffer[0]&127}e.prototype.toString=function(e){var t=this.readInt32(0);var r=this.readInt32(4);var n="";do{var i=t%e*4294967296+r;t=Math.floor(t/e);r=Math.floor(i/e);n=(i%e).toString(e)+n}while(t||r);return n};e.prototype.toDecimalString=function(){return this.toString(10)};e.prototype.toPaddedHexadecimalString=function(){var e=this.toString(16);return Array(17-e.length).join("0")+e};e.prototype.readInt32=function(e){return this.buffer[e]*16777216+(this.buffer[e+1]<<16)+(this.buffer[e+2]<<8)+this.buffer[e+3]};return e}();var DEFAULT_PROPAGATOR_TYPES=["tracecontext","datadog"];function validateAndBuildRumConfiguration(e){var t,r;if(!e.applicationId){display.error("Application ID is not configured, no RUM data will be collected.");return}if(e.sessionReplaySampleRate!==undefined&&!isPercentage(e.sessionReplaySampleRate)){display.error("Session Replay Sample Rate should be a number between 0 and 100");return}if(e.traceSampleRate!==undefined&&!isPercentage(e.traceSampleRate)){display.error("Trace Sample Rate should be a number between 0 and 100");return}if(e.excludedActivityUrls!==undefined&&!Array.isArray(e.excludedActivityUrls)){display.error("Excluded Activity Urls should be an array");return}var n=validateAndBuildTracingOptions(e);if(!n){return}var i=validateAndBuildConfiguration(e);if(!i){return}return assign$4({applicationId:e.applicationId,version:e.version,actionNameAttribute:e.actionNameAttribute,sessionReplaySampleRate:(t=e.sessionReplaySampleRate)!==null&&t!==void 0?t:0,startSessionReplayRecordingManually:!!e.startSessionReplayRecordingManually,traceSampleRate:e.traceSampleRate,allowedTracingUrls:n,excludedActivityUrls:(r=e.excludedActivityUrls)!==null&&r!==void 0?r:[],workerUrl:e.workerUrl,compressIntakeRequests:!!e.compressIntakeRequests,trackUserInteractions:!!e.trackUserInteractions,trackViewsManually:!!e.trackViewsManually,trackResources:!!e.trackResources,trackLongTasks:!!e.trackLongTasks,subdomain:e.subdomain,defaultPrivacyLevel:objectHasValue(DefaultPrivacyLevel,e.defaultPrivacyLevel)?e.defaultPrivacyLevel:DefaultPrivacyLevel.MASK,customerDataTelemetrySampleRate:1},i)}function validateAndBuildTracingOptions(e){if(e.allowedTracingUrls!==undefined){if(!Array.isArray(e.allowedTracingUrls)){display.error("Allowed Tracing URLs should be an array");return}if(e.allowedTracingUrls.length!==0&&e.service===undefined){display.error("Service needs to be configured when tracing is enabled");return}var t=[];e.allowedTracingUrls.forEach((function(e){if(isMatchOption(e)){t.push({match:e,propagatorTypes:DEFAULT_PROPAGATOR_TYPES})}else if(isTracingOption(e)){t.push(e)}else{display.warn("Allowed Tracing Urls parameters should be a string, RegExp, function, or an object. Ignoring parameter",e)}}));return t}return[]}function getSelectedTracingPropagators(e){var t=new Set;if(Array.isArray(e.allowedTracingUrls)&&e.allowedTracingUrls.length>0){e.allowedTracingUrls.forEach((function(e){if(isMatchOption(e)){DEFAULT_PROPAGATOR_TYPES.forEach((function(e){return t.add(e)}))}else if(getType(e)==="object"&&Array.isArray(e.propagatorTypes)){e.propagatorTypes.forEach((function(e){return t.add(e)}))}}))}return arrayFrom(t)}function serializeRumConfiguration(e){var t=serializeConfiguration(e);return assign$4({session_replay_sample_rate:e.sessionReplaySampleRate,start_session_replay_recording_manually:e.startSessionReplayRecordingManually,trace_sample_rate:e.traceSampleRate,action_name_attribute:e.actionNameAttribute,use_allowed_tracing_urls:Array.isArray(e.allowedTracingUrls)&&e.allowedTracingUrls.length>0,selected_tracing_propagators:getSelectedTracingPropagators(e),default_privacy_level:e.defaultPrivacyLevel,use_excluded_activity_urls:Array.isArray(e.excludedActivityUrls)&&e.excludedActivityUrls.length>0,use_worker_url:!!e.workerUrl,compress_intake_requests:e.compressIntakeRequests,track_views_manually:e.trackViewsManually,track_user_interactions:e.trackUserInteractions,track_resources:e.trackResources,track_long_task:e.trackLongTasks},t)}function buildCommonContext(e,t,r){return{context:e.getContext(),user:t.getContext(),hasReplay:r.isRecording()?true:undefined}}var RUM_STORAGE_KEY="rum";function makeRumPublicApi(e,t,r){var n=r===void 0?{}:r,i=n.ignoreInitIfSyntheticsWillInjectRum,s=i===void 0?true:i,a=n.startDeflateWorker,o=n.createDeflateEncoder;var f=false;var c=createContextManager(2);var u=createContextManager(1);var l=function(){return undefined};var h=function(){return undefined};var d=noop$1;var p=function(){return undefined};var y=new BoundedBuffer;var m=function(e,t){if(t===void 0){t=timeStampNow()}y.add((function(){return m(e,t)}))};var g=function(e,t){if(t===void 0){t=clocksNow()}y.add((function(){return g(e,t)}))};var b=function(e,r){if(r===void 0){r=buildCommonContext(c,u,t)}y.add((function(){return b(e,r)}))};var A=function(e,r){if(r===void 0){r=buildCommonContext(c,u,t)}y.add((function(){return A(e,r)}))};var w=function(){y.add((function(){return w()}))};var E=function(){y.add((function(){return E()}))};var v=function(e,t){y.add((function(){return v(e,t)}))};var _;function S(e){if(!e){display.error("Missing configuration");return}h=function(){return deepClone(e)};if(s&&willSyntheticsInjectRum()){return}var t=canUseEventBridge();if(t){e=P(e)}if(!C(e)){return}var r=validateAndBuildRumConfiguration(e);if(!r){return}if(!t&&!r.sessionStoreStrategyType){display.warn("No storage available for session. We will not send any data.");return}if(r.compressIntakeRequests&&!t&&a){_=a(r,"Datadog RUM",noop$1);if(!_){return}}if(!r.trackViewsManually){$(e,r)}else{var n=y;y=new BoundedBuffer;g=function(t){$(e,r,t)};n.drain()}f=true}function $(r,n,i){if(r.storeContextsAcrossPages){var s=c.getContext();c=createStoredContextManager(n,RUM_STORAGE_KEY,2);c.setContext(combine$1(c.getContext(),s));var a=u.getContext();u=createStoredContextManager(n,RUM_STORAGE_KEY,1);u.setContext(combine$1(u.getContext(),a))}var f=e(r,n,t,c,u,i,_&&o?function(e){return o(n,_,e)}:createIdentityEncoder);p=function(){return t.getSessionReplayLink(n,f.session,f.viewContexts)};w=t.start;E=t.stop;g=f.startView,b=f.addAction,A=f.addError,m=f.addTiming,v=f.addFeatureFlagEvaluation,l=f.getInternalContext,d=f.stopSession;t.onRumStart(f.lifeCycle,n,f.session,f.viewContexts,_);y.drain()}var T=monitor((function(e){var t=typeof e==="object"?e:{name:e};g(t)}));var I=makePublicApi({init:monitor(S),setGlobalContextProperty:monitor((function(e,t){return c.setContextProperty(e,t)})),removeGlobalContextProperty:monitor((function(e){return c.removeContextProperty(e)})),getGlobalContext:monitor((function(){return c.getContext()})),setGlobalContext:monitor((function(e){return c.setContext(e)})),clearGlobalContext:monitor((function(){return c.clearContext()})),getInternalContext:monitor((function(e){return l(e)})),getInitConfiguration:monitor((function(){return h()})),addAction:monitor((function(e,t){b({name:sanitize(e),context:sanitize(t),startClocks:clocksNow(),type:"custom"})})),addError:function(e,t){var r=createHandlingStack();callMonitored((function(){A({error:e,handlingStack:r,context:sanitize(t),startClocks:clocksNow()})}))},addTiming:monitor((function(e,t){m(sanitize(e),t)})),setUser:monitor((function(e){if(checkUser(e)){u.setContext(sanitizeUser(e))}})),getUser:monitor((function(){return u.getContext()})),setUserProperty:monitor((function(e,t){var r;var n=sanitizeUser((r={},r[e]=t,r))[e];u.setContextProperty(e,n)})),removeUserProperty:monitor((function(e){return u.removeContextProperty(e)})),clearUser:monitor((function(){return u.clearContext()})),startView:T,stopSession:monitor((function(){d()})),startSessionReplayRecording:monitor((function(){return w()})),stopSessionReplayRecording:monitor((function(){return E()})),addFeatureFlagEvaluation:monitor((function(e,t){v(sanitize(e),sanitize(t))})),getSessionReplayLink:monitor((function(){return p()}))});return I;function C(e){if(f){if(!e.silentMultipleInit){display.error("DD_RUM is already initialized.")}return false}return true}function P(e){return assign$4({},e,{applicationId:"00000000-aaaa-0000-aaaa-000000000000",clientToken:"empty",sessionSampleRate:100})}}function createDOMMutationObservable(){var e=getMutationObserverConstructor();var t=new Observable((function(){if(!e){return}var r=new e(monitor((function(){return t.notify()})));r.observe(document,{attributes:true,characterData:true,childList:true,subtree:true});return function(){return r.disconnect()}}));return t}function getMutationObserverConstructor(){var e;var t=window;if(t.Zone){e=getZoneJsOriginalValue(t,"MutationObserver");if(t.MutationObserver&&e===t.MutationObserver){var r=new t.MutationObserver(noop$1);var n=getZoneJsOriginalValue(r,"originalInstance");e=n&&n.constructor}}if(!e){e=t.MutationObserver}return e}var FAKE_INITIAL_DOCUMENT="initial_document";var RESOURCE_TYPES=[["document",function(e){return FAKE_INITIAL_DOCUMENT===e}],["xhr",function(e){return"xmlhttprequest"===e}],["fetch",function(e){return"fetch"===e}],["beacon",function(e){return"beacon"===e}],["css",function(e,t){return/\.css$/i.test(t)}],["js",function(e,t){return/\.js$/i.test(t)}],["image",function(e,t){return includes(["image","img","icon"],e)||/\.(gif|jpg|jpeg|tiff|png|svg|ico)$/i.exec(t)!==null}],["font",function(e,t){return/\.(woff|eot|woff2|ttf)$/i.exec(t)!==null}],["media",function(e,t){return includes(["audio","video"],e)||/\.(mp3|mp4)$/i.exec(t)!==null}]];function computeResourceKind(e){var t=e.name;if(!isValidUrl(t)){addTelemetryDebug('Failed to construct URL for "'.concat(e.name,'"'));return"other"}var r=getPathName(t);for(var n=0,i=RESOURCE_TYPES;n<i.length;n++){var s=i[n],a=s[0],o=s[1];if(o(e.initiatorType,r)){return a}}return"other"}function areInOrder(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}for(var r=1;r<e.length;r+=1){if(e[r-1]>e[r]){return false}}return true}function isRequestKind(e){return e.initiatorType==="xmlhttprequest"||e.initiatorType==="fetch"}function computePerformanceResourceDuration(e){var t=e.duration,r=e.startTime,n=e.responseEnd;if(t===0&&r<n){return toServerDuration(elapsed(r,n))}return toServerDuration(t)}function computePerformanceResourceDetails(e){var t=toValidEntry(e);if(!t){return undefined}var r=t.startTime,n=t.fetchStart,i=t.redirectStart,s=t.redirectEnd,a=t.domainLookupStart,o=t.domainLookupEnd,f=t.connectStart,c=t.secureConnectionStart,u=t.connectEnd,l=t.requestStart,h=t.responseStart,d=t.responseEnd;var p={download:formatTiming(r,h,d),first_byte:formatTiming(r,l,h)};if(u!==n){p.connect=formatTiming(r,f,u);if(areInOrder(f,c,u)){p.ssl=formatTiming(r,c,u)}}if(o!==n){p.dns=formatTiming(r,a,o)}if(hasRedirection(e)){p.redirect=formatTiming(r,i,s)}return p}function toValidEntry(e){if(!areInOrder(e.startTime,e.fetchStart,e.domainLookupStart,e.domainLookupEnd,e.connectStart,e.connectEnd,e.requestStart,e.responseStart,e.responseEnd)){return undefined}if(!hasRedirection(e)){return e}var t=e.redirectStart,r=e.redirectEnd;if(t<e.startTime){t=e.startTime}if(r<e.startTime){r=e.fetchStart}if(!areInOrder(e.startTime,t,r,e.fetchStart)){return undefined}return assign$4({},e,{redirectEnd:r,redirectStart:t})}function hasRedirection(e){return e.fetchStart!==e.startTime}function formatTiming(e,t,r){return{duration:toServerDuration(elapsed(t,r)),start:toServerDuration(elapsed(e,t))}}function computeSize(e){if(e.startTime<e.responseStart){return e.decodedBodySize}return undefined}function isAllowedRequestUrl(e,t){return t&&!e.isIntakeUrl(t)}function isTextNode(e){return e.nodeType===Node.TEXT_NODE}function isCommentNode(e){return e.nodeType===Node.COMMENT_NODE}function isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}function isNodeShadowHost(e){return isElementNode(e)&&Boolean(e.shadowRoot)}function isNodeShadowRoot(e){var t=e;return!!t.host&&t.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&isElementNode(t.host)}function hasChildNodes(e){return e.childNodes.length>0||isNodeShadowHost(e)}function forEachChildNodes(e,t){e.childNodes.forEach(t);if(isNodeShadowHost(e)){t(e.shadowRoot)}}function getParentNode(e){return isNodeShadowRoot(e)?e.host:e.parentNode}var INITIAL_DOCUMENT_OUTDATED_TRACE_ID_THRESHOLD=2*ONE_MINUTE;function getDocumentTraceId(e){var t=getDocumentTraceDataFromMeta(e)||getDocumentTraceDataFromComment(e);if(!t||t.traceTime<=dateNow()-INITIAL_DOCUMENT_OUTDATED_TRACE_ID_THRESHOLD){return undefined}return t.traceId}function getDocumentTraceDataFromMeta(e){var t=e.querySelector("meta[name=dd-trace-id]");var r=e.querySelector("meta[name=dd-trace-time]");return createDocumentTraceData(t&&t.content,r&&r.content)}function getDocumentTraceDataFromComment(e){var t=findTraceComment(e);if(!t){return undefined}return createDocumentTraceData(findCommaSeparatedValue(t,"trace-id"),findCommaSeparatedValue(t,"trace-time"))}function createDocumentTraceData(e,t){var r=t&&Number(t);if(!e||!r){return undefined}return{traceId:e,traceTime:r}}function findTraceComment(e){for(var t=0;t<e.childNodes.length;t+=1){var r=getTraceCommentFromNode(e.childNodes[t]);if(r){return r}}if(e.body){for(var t=e.body.childNodes.length-1;t>=0;t-=1){var n=e.body.childNodes[t];var r=getTraceCommentFromNode(n);if(r){return r}if(!isTextNode(n)){break}}}}function getTraceCommentFromNode(e){if(e&&isCommentNode(e)){var t=/^\s*DATADOG;(.*?)\s*$/.exec(e.data);if(t){return t[1]}}}var RumPerformanceEntryType;(function(e){e["EVENT"]="event";e["FIRST_INPUT"]="first-input";e["LARGEST_CONTENTFUL_PAINT"]="largest-contentful-paint";e["LAYOUT_SHIFT"]="layout-shift";e["LONG_TASK"]="longtask";e["NAVIGATION"]="navigation";e["PAINT"]="paint";e["RESOURCE"]="resource"})(RumPerformanceEntryType||(RumPerformanceEntryType={}));function supportPerformanceObject(){return window.performance!==undefined&&"getEntries"in performance}function supportPerformanceTimingEvent(e){return window.PerformanceObserver&&PerformanceObserver.supportedEntryTypes!==undefined&&PerformanceObserver.supportedEntryTypes.includes(e)}function startPerformanceCollection(e,t){retrieveInitialDocumentResourceTiming(t,(function(r){handleRumPerformanceEntries(e,t,[r])}));if(supportPerformanceObject()){var r=performance.getEntries();setTimeout$1((function(){return handleRumPerformanceEntries(e,t,r)}))}if(window.PerformanceObserver){var n=monitor((function(r){return handleRumPerformanceEntries(e,t,r.getEntries())}));var i=[RumPerformanceEntryType.RESOURCE,RumPerformanceEntryType.NAVIGATION,RumPerformanceEntryType.LONG_TASK,RumPerformanceEntryType.PAINT];var s=[RumPerformanceEntryType.LARGEST_CONTENTFUL_PAINT,RumPerformanceEntryType.FIRST_INPUT,RumPerformanceEntryType.LAYOUT_SHIFT,RumPerformanceEntryType.EVENT];try{s.forEach((function(e){var t=new window.PerformanceObserver(n);t.observe({type:e,buffered:true,durationThreshold:40})}))}catch(e){i.push.apply(i,s)}var a=new PerformanceObserver(n);a.observe({entryTypes:i});if(supportPerformanceObject()&&"addEventListener"in performance){addEventListener$1(t,performance,"resourcetimingbufferfull",(function(){performance.clearResourceTimings()}))}}if(!supportPerformanceTimingEvent(RumPerformanceEntryType.NAVIGATION)){retrieveNavigationTiming(t,(function(r){handleRumPerformanceEntries(e,t,[r])}))}if(!supportPerformanceTimingEvent(RumPerformanceEntryType.FIRST_INPUT)){retrieveFirstInputTiming(t,(function(r){handleRumPerformanceEntries(e,t,[r])}))}}function retrieveInitialDocumentResourceTiming(e,t){runOnReadyState(e,"interactive",(function(){var e;var r={entryType:RumPerformanceEntryType.RESOURCE,initiatorType:FAKE_INITIAL_DOCUMENT,traceId:getDocumentTraceId(document),toJSON:function(){return assign$4({},e,{toJSON:undefined})}};if(supportPerformanceTimingEvent(RumPerformanceEntryType.NAVIGATION)&&performance.getEntriesByType(RumPerformanceEntryType.NAVIGATION).length>0){var n=performance.getEntriesByType(RumPerformanceEntryType.NAVIGATION)[0];e=assign$4(n.toJSON(),r)}else{var i=computeRelativePerformanceTiming();e=assign$4(i,{decodedBodySize:0,duration:i.responseEnd,name:window.location.href,startTime:0},r)}t(e)}))}function retrieveNavigationTiming(e,t){function r(){t(assign$4(computeRelativePerformanceTiming(),{entryType:RumPerformanceEntryType.NAVIGATION}))}runOnReadyState(e,"complete",(function(){setTimeout$1(r)}))}function retrieveFirstInputTiming(e,t){var r=dateNow();var n=false;var i=addEventListeners(e,window,[DOM_EVENT.CLICK,DOM_EVENT.MOUSE_DOWN,DOM_EVENT.KEY_DOWN,DOM_EVENT.TOUCH_START,DOM_EVENT.POINTER_DOWN],(function(t){if(!t.cancelable){return}var r={entryType:RumPerformanceEntryType.FIRST_INPUT,processingStart:relativeNow(),processingEnd:relativeNow(),startTime:t.timeStamp,duration:0,name:""};if(t.type===DOM_EVENT.POINTER_DOWN){s(e,r)}else{a(r)}}),{passive:true,capture:true}).stop;function s(e,t){addEventListeners(e,window,[DOM_EVENT.POINTER_UP,DOM_EVENT.POINTER_CANCEL],(function(e){if(e.type===DOM_EVENT.POINTER_UP){a(t)}}),{once:true})}function a(e){if(!n){n=true;i();var s=e.processingStart-e.startTime;if(s>=0&&s<dateNow()-r){t(e)}}}}function computeRelativePerformanceTiming(){var e={};var t=performance.timing;for(var r in t){if(isNumber(t[r])){var n=r;var i=t[n];e[n]=i===0?0:getRelativeTime(i)}}return e}function handleRumPerformanceEntries(e,t,r){var n=r.filter((function(e){return objectHasValue(RumPerformanceEntryType,e.entryType)}));var i=n.filter((function(e){return!isIncompleteNavigation(e)&&!isForbiddenResource(t,e)}));if(i.length){e.notify(0,i)}}function isIncompleteNavigation(e){return e.entryType===RumPerformanceEntryType.NAVIGATION&&e.loadEventEnd<=0}function isForbiddenResource(e,t){return t.entryType===RumPerformanceEntryType.RESOURCE&&!isAllowedRequestUrl(e,t.name)}function getSyntheticsContext(){var e=getSyntheticsTestId();var t=getSyntheticsResultId();if(e&&t){return{test_id:e,result_id:t,injected:willSyntheticsInjectRum()}}}function getCiTestContext(){var e;var t=(e=window.Cypress)===null||e===void 0?void 0:e.env("traceId");if(typeof t==="string"){return{test_execution_id:t}}}function limitModification(e,t,r){var n=deepClone(e);var i=r(n);objectEntries(t).forEach((function(t){var r=t[0],i=t[1];var s=get$2(n,r);var a=getType(s);if(a===i){set(e,r,sanitize(s))}else if(i==="object"&&(a==="undefined"||a==="null")){set(e,r,{})}}));return i}function get$2(e,t){var r=e;for(var n=0,i=t.split(".");n<i.length;n++){var s=i[n];if(!isValidObjectContaining(r,s)){return}r=r[s]}return r}function set(e,t,r){var n=e;var i=t.split(".");for(var s=0;s<i.length;s+=1){var a=i[s];if(!isValidObject(n)){return}if(s!==i.length-1){n=n[a]}else{n[a]=r}}}function isValidObject(e){return getType(e)==="object"}function isValidObjectContaining(e,t){return isValidObject(e)&&Object.prototype.hasOwnProperty.call(e,t)}var VIEW_MODIFIABLE_FIELD_PATHS={"view.name":"string","view.url":"string","view.referrer":"string"};var USER_CUSTOMIZABLE_FIELD_PATHS={context:"object"};var modifiableFieldPathsByEvent;function startRumAssembly(e,t,r,n,i,s,a,o,f){var c,u;modifiableFieldPathsByEvent=(c={},c["view"]=VIEW_MODIFIABLE_FIELD_PATHS,c["error"]=assign$4({"error.message":"string","error.stack":"string","error.resource.url":"string","error.fingerprint":"string"},USER_CUSTOMIZABLE_FIELD_PATHS,VIEW_MODIFIABLE_FIELD_PATHS),c["resource"]=assign$4({"resource.url":"string"},USER_CUSTOMIZABLE_FIELD_PATHS,VIEW_MODIFIABLE_FIELD_PATHS),c["action"]=assign$4({"action.target.name":"string"},USER_CUSTOMIZABLE_FIELD_PATHS,VIEW_MODIFIABLE_FIELD_PATHS),c["long_task"]=assign$4({},USER_CUSTOMIZABLE_FIELD_PATHS,VIEW_MODIFIABLE_FIELD_PATHS),c);var l=(u={},u["error"]=createEventRateLimiter("error",e.eventRateLimiterThreshold,f),u["action"]=createEventRateLimiter("action",e.eventRateLimiterThreshold,f),u);var h=getSyntheticsContext();var d=getCiTestContext();t.subscribe(10,(function(f){var c=f.startTime,u=f.rawRumEvent,p=f.domainContext,y=f.savedCommonContext,m=f.customerContext;var g=n.findView(c);var b=i.findUrl(c);var A=r.findTrackedSession(c);if(A&&g&&b){var w=y||o();var E=s.findActionId(c);var v={_dd:{format_version:2,drift:currentDrift(),configuration:{session_sample_rate:round(e.sessionSampleRate,3),session_replay_sample_rate:round(e.sessionReplaySampleRate,3)},browser_sdk_version:canUseEventBridge()?"5.6.0":undefined},application:{id:e.applicationId},date:timeStampNow(),service:g.service||e.service,version:g.version||e.version,source:"browser",session:{id:A.id,type:h?"synthetics":d?"ci_test":"user"},view:{id:g.id,name:g.name,url:b.url,referrer:b.referrer},action:needToAssembleWithAction(u)&&E?{id:E}:undefined,synthetics:h,ci_test:d,display:a.get()};var _=combine$1(v,u);_.context=combine$1(w.context,m);if(!("has_replay"in _.session)){_.session.has_replay=w.hasReplay}if(_.type==="view"){_.session.sampled_for_replay=A.sessionReplayAllowed}if(!isEmptyObject(w.user)){_.usr=w.user}if(shouldSend(_,e.beforeSend,p,l)){if(isEmptyObject(_.context)){delete _.context}t.notify(11,_)}}}))}function shouldSend(e,t,r,n){var i;if(t){var s=limitModification(e,modifiableFieldPathsByEvent[e.type],(function(e){return t(e,r)}));if(s===false&&e.type!=="view"){return false}if(s===false){display.warn("Can't dismiss view events using beforeSend!")}}var a=(i=n[e.type])===null||i===void 0?void 0:i.isLimitReached();return!a}function needToAssembleWithAction(e){return["error","resource","long_task"].indexOf(e.type)!==-1}function startInternalContext(e,t,r,n,i){return{get:function(s){var a=r.findView(s);var o=i.findUrl(s);var f=t.findTrackedSession(s);if(f&&a&&o){var c=n.findActionId(s);return{application_id:e,session_id:f.id,user_action:c?{id:c}:undefined,view:{id:a.id,name:a.name,referrer:o.referrer,url:o.url}}}}}}var LifeCycle=AbstractLifeCycle;var VIEW_CONTEXT_TIME_OUT_DELAY=SESSION_TIME_OUT_DELAY;function startViewContexts(e){var t=new ValueHistory(VIEW_CONTEXT_TIME_OUT_DELAY);e.subscribe(2,(function(e){t.add(r(e),e.startClocks.relative)}));e.subscribe(4,(function(e){var r=e.endClocks;t.closeActive(r.relative)}));e.subscribe(8,(function(){t.reset()}));function r(e){return{service:e.service,version:e.version,id:e.id,name:e.name,startClocks:e.startClocks}}return{findView:function(e){return t.find(e)},stop:function(){t.stop()}}}var nextRequestIndex=1;function startRequestCollection(e,t,r){var n=startTracer(t,r);trackXhr(e,t,n);trackFetch(e,t,n)}function trackXhr(e,t,r){var n=initXhrObservable(t).subscribe((function(n){var i=n;if(!isAllowedRequestUrl(t,i.url)){return}switch(i.state){case"start":r.traceXhr(i,i.xhr);i.requestIndex=getNextRequestIndex();e.notify(5,{requestIndex:i.requestIndex,url:i.url});break;case"complete":r.clearTracingIfNeeded(i);e.notify(6,{duration:i.duration,method:i.method,requestIndex:i.requestIndex,spanId:i.spanId,startClocks:i.startClocks,status:i.status,traceId:i.traceId,traceSampled:i.traceSampled,type:"xhr",url:i.url,xhr:i.xhr});break}}));return{stop:function(){return n.unsubscribe()}}}function trackFetch(e,t,r){var n=initFetchObservable().subscribe((function(n){var i=n;if(!isAllowedRequestUrl(t,i.url)){return}switch(i.state){case"start":r.traceFetch(i);i.requestIndex=getNextRequestIndex();e.notify(5,{requestIndex:i.requestIndex,url:i.url});break;case"resolve":waitForResponseToComplete(i,(function(t){r.clearTracingIfNeeded(i);e.notify(6,{duration:t,method:i.method,requestIndex:i.requestIndex,responseType:i.responseType,spanId:i.spanId,startClocks:i.startClocks,status:i.status,traceId:i.traceId,traceSampled:i.traceSampled,type:"fetch",url:i.url,response:i.response,init:i.init,input:i.input})}));break}}));return{stop:function(){return n.unsubscribe()}}}function getNextRequestIndex(){var e=nextRequestIndex;nextRequestIndex+=1;return e}function waitForResponseToComplete(e,t){var r=e.response&&tryToClone(e.response);if(!r||!r.body){t(elapsed(e.startClocks.timeStamp,timeStampNow()))}else{readBytesFromStream(r.body,(function(){t(elapsed(e.startClocks.timeStamp,timeStampNow()))}),{bytesLimit:Number.POSITIVE_INFINITY,collectStreamBody:false})}}function trackEventCounts(e){var t=e.lifeCycle,r=e.isChildEvent,n=e.onChange,i=n===void 0?noop$1:n;var s={errorCount:0,longTaskCount:0,resourceCount:0,actionCount:0,frustrationCount:0};var a=t.subscribe(11,(function(e){var t;if(e.type==="view"||!r(e)){return}switch(e.type){case"error":s.errorCount+=1;i();break;case"action":s.actionCount+=1;if(e.action.frustration){s.frustrationCount+=e.action.frustration.type.length}i();break;case"long_task":s.longTaskCount+=1;i();break;case"resource":if(!((t=e._dd)===null||t===void 0?void 0:t.discarded)){s.resourceCount+=1;i()}break}}));return{stop:function(){a.unsubscribe()},eventCounts:s}}var PAGE_ACTIVITY_VALIDATION_DELAY=100;var PAGE_ACTIVITY_END_DELAY=100;function waitPageActivityEnd(e,t,r,n,i){var s=createPageActivityObservable(e,t,r);return doWaitPageActivityEnd(s,n,i)}function doWaitPageActivityEnd(e,t,r){var n;var i=false;var s=setTimeout$1(monitor((function(){return c({hadActivity:false})})),PAGE_ACTIVITY_VALIDATION_DELAY);var a=r!==undefined?setTimeout$1(monitor((function(){return c({hadActivity:true,end:timeStampNow()})})),r):undefined;var o=e.subscribe((function(e){var t=e.isBusy;clearTimeout$1(s);clearTimeout$1(n);var r=timeStampNow();if(!t){n=setTimeout$1(monitor((function(){return c({hadActivity:true,end:r})})),PAGE_ACTIVITY_END_DELAY)}}));var f=function(){i=true;clearTimeout$1(s);clearTimeout$1(n);clearTimeout$1(a);o.unsubscribe()};function c(e){if(i){return}f();t(e)}return{stop:f}}function createPageActivityObservable(e,t,r){var n=new Observable((function(){var i=[];var s;var a=0;i.push(t.subscribe(f),e.subscribe(0,(function(e){if(e.some((function(e){return e.entryType===RumPerformanceEntryType.RESOURCE&&!isExcludedUrl(r,e.name)}))){f()}})),e.subscribe(5,(function(e){if(isExcludedUrl(r,e.url)){return}if(s===undefined){s=e.requestIndex}a+=1;f()})),e.subscribe(6,(function(e){if(isExcludedUrl(r,e.url)||s===undefined||e.requestIndex<s){return}a-=1;f()})));var o=trackWindowOpen(f).stop;return function(){o();i.forEach((function(e){return e.unsubscribe()}))};function f(){n.notify({isBusy:a>0})}}));return n}function isExcludedUrl(e,t){return matchList(e.excludedActivityUrls,t)}function trackWindowOpen(e){return instrumentMethodAndCallOriginal(window,"open",{before:e})}var DEFAULT_PROGRAMMATIC_ACTION_NAME_ATTRIBUTE="data-dd-action-name";function getActionNameFromElement(e,t){return getActionNameFromElementProgrammatically(e,DEFAULT_PROGRAMMATIC_ACTION_NAME_ATTRIBUTE)||t&&getActionNameFromElementProgrammatically(e,t)||getActionNameFromElementForStrategies(e,t,priorityStrategies)||getActionNameFromElementForStrategies(e,t,fallbackStrategies)||""}function getActionNameFromElementProgrammatically(e,t){var r;if(supportsElementClosest()){r=e.closest("[".concat(t,"]"))}else{var n=e;while(n){if(n.hasAttribute(t)){r=n;break}n=n.parentElement}}if(!r){return}var i=r.getAttribute(t);return truncate(normalizeWhitespace(i.trim()))}var priorityStrategies=[function(e,t){if(supportsLabelProperty()){if("labels"in e&&e.labels&&e.labels.length>0){return getTextualContent(e.labels[0],t)}}else if(e.id){var r=e.ownerDocument&&find(e.ownerDocument.querySelectorAll("label"),(function(t){return t.htmlFor===e.id}));return r&&getTextualContent(r,t)}},function(e){if(e.nodeName==="INPUT"){var t=e;var r=t.getAttribute("type");if(r==="button"||r==="submit"||r==="reset"){return t.value}}},function(e,t){if(e.nodeName==="BUTTON"||e.nodeName==="LABEL"||e.getAttribute("role")==="button"){return getTextualContent(e,t)}},function(e){return e.getAttribute("aria-label")},function(e,t){var r=e.getAttribute("aria-labelledby");if(r){return r.split(/\s+/).map((function(t){return getElementById(e,t)})).filter((function(e){return Boolean(e)})).map((function(e){return getTextualContent(e,t)})).join(" ")}},function(e){return e.getAttribute("alt")},function(e){return e.getAttribute("name")},function(e){return e.getAttribute("title")},function(e){return e.getAttribute("placeholder")},function(e,t){if("options"in e&&e.options.length>0){return getTextualContent(e.options[0],t)}}];var fallbackStrategies=[function(e,t){return getTextualContent(e,t)}];var MAX_PARENTS_TO_CONSIDER=10;function getActionNameFromElementForStrategies(e,t,r){var n=e;var i=0;while(i<=MAX_PARENTS_TO_CONSIDER&&n&&n.nodeName!=="BODY"&&n.nodeName!=="HTML"&&n.nodeName!=="HEAD"){for(var s=0,a=r;s<a.length;s++){var o=a[s];var f=o(n,t);if(typeof f==="string"){var c=f.trim();if(c){return truncate(normalizeWhitespace(c))}}}if(n.nodeName==="FORM"){break}n=n.parentElement;i+=1}}function normalizeWhitespace(e){return e.replace(/\s+/g," ")}function truncate(e){return e.length>100?"".concat(safeTruncate(e,100)," [...]"):e}function getElementById(e,t){return e.ownerDocument?e.ownerDocument.getElementById(t):null}function getTextualContent(e,t){if(e.isContentEditable){return}if("innerText"in e){var r=e.innerText;var n=function(t){var n=e.querySelectorAll(t);for(var i=0;i<n.length;i+=1){var s=n[i];if("innerText"in s){var a=s.innerText;if(a&&a.trim().length>0){r=r.replace(a,"")}}}};if(!supportsInnerTextScriptAndStyleRemoval()){n("script, style")}n("[".concat(DEFAULT_PROGRAMMATIC_ACTION_NAME_ATTRIBUTE,"]"));if(t){n("[".concat(t,"]"))}return r}return e.textContent}function supportsInnerTextScriptAndStyleRemoval(){return!isIE()}var supportsLabelPropertyResult;function supportsLabelProperty(){if(supportsLabelPropertyResult===undefined){supportsLabelPropertyResult="labels"in HTMLInputElement.prototype}return supportsLabelPropertyResult}var supportsElementClosestResult;function supportsElementClosest(){if(supportsElementClosestResult===undefined){supportsElementClosestResult="closest"in HTMLElement.prototype}return supportsElementClosestResult}var STABLE_ATTRIBUTES=[DEFAULT_PROGRAMMATIC_ACTION_NAME_ATTRIBUTE,"data-testid","data-test","data-qa","data-cy","data-test-id","data-qa-id","data-testing","data-component","data-element","data-source-file"];var GLOBALLY_UNIQUE_SELECTOR_GETTERS=[getStableAttributeSelector,getIDSelector];var UNIQUE_AMONG_CHILDREN_SELECTOR_GETTERS=[getStableAttributeSelector,getClassSelector,getTagNameSelector];function getSelectorFromElement(e,t){var r="";var n=e;while(n&&n.nodeName!=="HTML"){var i=findSelector(n,GLOBALLY_UNIQUE_SELECTOR_GETTERS,isSelectorUniqueGlobally,t,r);if(i){return i}var s=findSelector(n,UNIQUE_AMONG_CHILDREN_SELECTOR_GETTERS,isSelectorUniqueAmongSiblings,t,r);r=s||combineSelector(getPositionSelector(n),r);n=n.parentElement}return r}function isGeneratedValue(e){return/[0-9]/.test(e)}function getIDSelector(e){if(e.id&&!isGeneratedValue(e.id)){return"#".concat(cssEscape(e.id))}}function getClassSelector(e){if(e.tagName==="BODY"){return}if(e.classList.length>0){for(var t=0;t<e.classList.length;t+=1){var r=e.classList[t];if(isGeneratedValue(r)){continue}return"".concat(cssEscape(e.tagName),".").concat(cssEscape(r))}}}function getTagNameSelector(e){return cssEscape(e.tagName)}function getStableAttributeSelector(e,t){if(t){var r=a(t);if(r){return r}}for(var n=0,i=STABLE_ATTRIBUTES;n<i.length;n++){var s=i[n];var r=a(s);if(r){return r}}function a(t){if(e.hasAttribute(t)){return"".concat(cssEscape(e.tagName),"[").concat(t,'="').concat(cssEscape(e.getAttribute(t)),'"]')}}}function getPositionSelector(e){var t=e.parentElement.firstElementChild;var r=1;while(t&&t!==e){if(t.tagName===e.tagName){r+=1}t=t.nextElementSibling}return"".concat(cssEscape(e.tagName),":nth-of-type(").concat(r,")")}function findSelector(e,t,r,n,i){for(var s=0,a=t;s<a.length;s++){var o=a[s];var f=o(e,n);if(!f){continue}var c=combineSelector(f,i);if(r(e,c)){return c}}}function isSelectorUniqueGlobally(e,t){return e.ownerDocument.querySelectorAll(t).length===1}function isSelectorUniqueAmongSiblings(e,t){return e.parentElement.querySelectorAll(supportScopeSelector()?combineSelector(":scope",t):t).length===1}function combineSelector(e,t){return t?"".concat(e,">").concat(t):e}var supportScopeSelectorCache;function supportScopeSelector(){if(supportScopeSelectorCache===undefined){try{document.querySelector(":scope");supportScopeSelectorCache=true}catch(e){supportScopeSelectorCache=false}}return supportScopeSelectorCache}var MAX_DURATION_BETWEEN_CLICKS=ONE_SECOND;var MAX_DISTANCE_BETWEEN_CLICKS=100;function createClickChain(e,t){var r=[];var n=0;var i;s(e);function s(e){e.stopObservable.subscribe(a);r.push(e);clearTimeout$1(i);i=setTimeout$1(o,MAX_DURATION_BETWEEN_CLICKS)}function a(){if(n===1&&r.every((function(e){return e.isStopped()}))){n=2;t(r)}}function o(){clearTimeout$1(i);if(n===0){n=1;a()}}return{tryAppend:function(e){if(n!==0){return false}if(r.length>0&&!areEventsSimilar(r[r.length-1].event,e.event)){o();return false}s(e);return true},stop:function(){o()}}}function areEventsSimilar(e,t){return e.target===t.target&&mouseEventDistance(e,t)<=MAX_DISTANCE_BETWEEN_CLICKS&&e.timeStamp-t.timeStamp<=MAX_DURATION_BETWEEN_CLICKS}function mouseEventDistance(e,t){return Math.sqrt(Math.pow(e.clientX-t.clientX,2)+Math.pow(e.clientY-t.clientY,2))}function listenActionEvents(e,t){var r=t.onPointerDown,n=t.onPointerUp;var i;var s={selection:false,input:false};var a;var o=[addEventListener$1(e,window,DOM_EVENT.POINTER_DOWN,(function(e){if(isValidPointerEvent(e)){i=isSelectionEmpty();s={selection:false,input:false};a=r(e)}}),{capture:true}),addEventListener$1(e,window,DOM_EVENT.SELECTION_CHANGE,(function(){if(!i||!isSelectionEmpty()){s.selection=true}}),{capture:true}),addEventListener$1(e,window,DOM_EVENT.POINTER_UP,(function(e){if(isValidPointerEvent(e)&&a){var t=s;n(a,e,(function(){return t}));a=undefined}}),{capture:true}),addEventListener$1(e,window,DOM_EVENT.INPUT,(function(){s.input=true}),{capture:true})];return{stop:function(){o.forEach((function(e){return e.stop()}))}}}function isSelectionEmpty(){var e=window.getSelection();return!e||e.isCollapsed}function isValidPointerEvent(e){return e.target instanceof Element&&e.isPrimary!==false}var MIN_CLICKS_PER_SECOND_TO_CONSIDER_RAGE=3;function computeFrustration(e,t){if(isRage(e)){t.addFrustration("rage_click");if(e.some(isDead)){t.addFrustration("dead_click")}if(t.hasError){t.addFrustration("error_click")}return{isRage:true}}var r=e.some((function(e){return e.getUserActivity().selection}));e.forEach((function(e){if(e.hasError){e.addFrustration("error_click")}if(isDead(e)&&!r){e.addFrustration("dead_click")}}));return{isRage:false}}function isRage(e){if(e.some((function(e){return e.getUserActivity().selection}))){return false}for(var t=0;t<e.length-(MIN_CLICKS_PER_SECOND_TO_CONSIDER_RAGE-1);t+=1){if(e[t+MIN_CLICKS_PER_SECOND_TO_CONSIDER_RAGE-1].event.timeStamp-e[t].event.timeStamp<=ONE_SECOND){return true}}return false}var DEAD_CLICK_EXCLUDE_SELECTOR='input:not([type="checkbox"]):not([type="radio"]):not([type="button"]):not([type="submit"]):not([type="reset"]):not([type="range"]),'+"textarea,"+"select,"+"[contenteditable],"+"[contenteditable] *,"+"canvas,"+"a[href],"+"a[href] *";function isDead(e){if(e.hasPageActivity||e.getUserActivity().input){return false}return!elementMatches(e.event.target,DEAD_CLICK_EXCLUDE_SELECTOR)}var CLICK_ACTION_MAX_DURATION=10*ONE_SECOND;var ACTION_CONTEXT_TIME_OUT_DELAY=5*ONE_MINUTE;function trackClickActions(e,t,r){var n=new ValueHistory(ACTION_CONTEXT_TIME_OUT_DELAY);var i=new Observable;var s;e.subscribe(8,(function(){n.reset()}));e.subscribe(4,c);var a=listenActionEvents(r,{onPointerDown:function(n){return processPointerDown(r,e,t,n)},onPointerUp:function(s,a,o){var c=s.clickActionBase,u=s.hadActivityOnPointerDown;return startClickAction(r,e,t,n,i,f,c,a,o,u)}}).stop;var o={findActionId:function(e){return n.findAll(e)}};return{stop:function(){c();i.notify();a()},actionContexts:o};function f(e){if(!s||!s.tryAppend(e)){var t=e.clone();s=createClickChain(e,(function(e){finalizeClicks(e,t)}))}}function c(){if(s){s.stop()}}}function processPointerDown(e,t,r,n){var i=computeClickActionBase(n,e.actionNameAttribute);var s=false;waitPageActivityEnd(t,r,e,(function(e){s=e.hadActivity}),PAGE_ACTIVITY_VALIDATION_DELAY);return{clickActionBase:i,hadActivityOnPointerDown:function(){return s}}}function startClickAction(e,t,r,n,i,s,a,o,f,c){var u=newClick(t,n,f,a,o);s(u);var l=waitPageActivityEnd(t,r,e,(function(e){if(e.hadActivity&&e.end<u.startClocks.timeStamp){u.discard()}else{if(e.hadActivity){u.stop(e.end)}else if(c()){u.stop(u.startClocks.timeStamp)}else{u.stop()}}}),CLICK_ACTION_MAX_DURATION).stop;var h=t.subscribe(4,(function(e){var t=e.endClocks;u.stop(t.timeStamp)}));var d=i.subscribe((function(){u.stop()}));u.stopObservable.subscribe((function(){h.unsubscribe();l();d.unsubscribe()}))}function computeClickActionBase(e,t){var r=e.target.getBoundingClientRect();return{type:"click",target:{width:Math.round(r.width),height:Math.round(r.height),selector:getSelectorFromElement(e.target,t)},position:{x:Math.round(e.clientX-r.left),y:Math.round(e.clientY-r.top)},name:getActionNameFromElement(e.target,t)}}function newClick(e,t,r,n,i){var s=generateUUID();var a=clocksNow();var o=t.add(s,a.relative);var f=trackEventCounts({lifeCycle:e,isChildEvent:function(e){return e.action!==undefined&&(Array.isArray(e.action.id)?includes(e.action.id,s):e.action.id===s)}});var c=0;var u;var l=[];var h=new Observable;function d(e){if(c!==0){return}u=e;c=1;if(u){o.close(getRelativeTime(u))}else{o.remove()}f.stop();h.notify()}return{event:i,stop:d,stopObservable:h,get hasError(){return f.eventCounts.errorCount>0},get hasPageActivity(){return u!==undefined},getUserActivity:r,addFrustration:function(e){l.push(e)},startClocks:a,isStopped:function(){return c===1||c===2},clone:function(){return newClick(e,t,r,n,i)},validate:function(t){d();if(c!==1){return}var r=f.eventCounts,o=r.resourceCount,h=r.errorCount,p=r.longTaskCount;var y=assign$4({type:"click",duration:u&&elapsed(a.timeStamp,u),startClocks:a,id:s,frustrationTypes:l,counts:{resourceCount:o,errorCount:h,longTaskCount:p},events:t!==null&&t!==void 0?t:[i],event:i},n);e.notify(1,y);c=2},discard:function(){d();c=2}}}function finalizeClicks(e,t){var r=computeFrustration(e,t).isRage;if(r){e.forEach((function(e){return e.discard()}));t.stop(timeStampNow());t.validate(e.map((function(e){return e.event})))}else{t.discard();e.forEach((function(e){return e.validate()}))}}function startActionCollection(e,t,r,n){e.subscribe(1,(function(t){return e.notify(10,processAction(t,n))}));var i={findActionId:noop$1};if(r.trackUserInteractions){i=trackClickActions(e,t,r).actionContexts}return{addAction:function(t,r){e.notify(10,assign$4({savedCommonContext:r},processAction(t,n)))},actionContexts:i}}function processAction(e,t){var r=isAutoAction(e)?{action:{id:e.id,loading_time:toServerDuration(e.duration),frustration:{type:e.frustrationTypes},error:{count:e.counts.errorCount},long_task:{count:e.counts.longTaskCount},resource:{count:e.counts.resourceCount}},_dd:{action:{target:e.target,position:e.position}}}:undefined;var n=!isAutoAction(e)?e.context:undefined;var i=combine$1({action:{id:generateUUID(),target:{name:e.name},type:e.type},date:e.startClocks.timeStamp,type:"action",view:{in_foreground:t.isInActivePageStateAt(e.startClocks.relative)}},r);return{customerContext:n,rawRumEvent:i,startTime:e.startClocks.relative,domainContext:isAutoAction(e)?{events:e.events}:{}}}function isAutoAction(e){return e.type!=="custom"}function trackConsoleError(e){var t=initConsoleObservable([ConsoleApiName.error]).subscribe((function(t){return e.notify({startClocks:clocksNow(),message:t.message,stack:t.stack,fingerprint:t.fingerprint,source:ErrorSource.CONSOLE,handling:"handled",handlingStack:t.handlingStack})}));return{stop:function(){t.unsubscribe()}}}function trackReportError(e,t){var r=initReportObservable(e,[RawReportType.cspViolation,RawReportType.intervention]).subscribe((function(e){return t.notify({startClocks:clocksNow(),message:e.message,stack:e.stack,type:e.subtype,source:ErrorSource.REPORT,handling:"unhandled",originalError:e.originalReport})}));return{stop:function(){r.unsubscribe()}}}function startErrorCollection(e,t,r,n){var i=new Observable;trackConsoleError(i);trackRuntimeError(i);trackReportError(t,i);i.subscribe((function(t){return e.notify(12,{error:t})}));return doStartErrorCollection(e,r,n)}function doStartErrorCollection(e,t,r){e.subscribe(12,(function(n){var i=n.error,s=n.customerContext,a=n.savedCommonContext;e.notify(10,assign$4({customerContext:s,savedCommonContext:a},processError(i,t,r)))}));return{addError:function(t,r){var n=t.error,i=t.handlingStack,s=t.startClocks,a=t.context;var o=n instanceof Error?computeStackTrace(n):undefined;var f=computeRawError({stackTrace:o,originalError:n,handlingStack:i,startClocks:s,nonErrorPrefix:"Provided",source:ErrorSource.CUSTOM,handling:"handled"});e.notify(12,{customerContext:a,savedCommonContext:r,error:f})}}}function processError(e,t,r){var n={date:e.startClocks.timeStamp,error:{id:generateUUID(),message:e.message,source:e.source,stack:e.stack,handling_stack:e.handlingStack,type:e.type,handling:e.handling,causes:e.causes,source_type:"browser",fingerprint:e.fingerprint},type:"error",view:{in_foreground:t.isInActivePageStateAt(e.startClocks.relative)}};var i=r.findFeatureFlagEvaluations(e.startClocks.relative);if(i&&!isEmptyObject(i)){n.feature_flags=i}return{rawRumEvent:n,startTime:e.startClocks.relative,domainContext:{error:e.originalError}}}function startLongTaskCollection(e,t,r){e.subscribe(0,(function(n){for(var i=0,s=n;i<s.length;i++){var a=s[i];if(a.entryType!==RumPerformanceEntryType.LONG_TASK){break}var o=r.findTrackedSession(a.startTime);if(!o||!t.trackLongTasks){break}var f=relativeToClocks(a.startTime);var c={date:f.timeStamp,long_task:{id:generateUUID(),duration:toServerDuration(a.duration)},type:"long_task",_dd:{discarded:false}};e.notify(10,{rawRumEvent:c,startTime:f.relative,domainContext:{performanceEntry:a}})}}))}function matchRequestTiming(e){if(!performance||!("getEntriesByName"in performance)){return}var t=performance.getEntriesByName(e.url,"resource");if(!t.length||!("toJSON"in t[0])){return}var r=t.map((function(e){return e.toJSON()})).filter(toValidEntry).filter((function(t){return isBetween(t,e.startClocks.relative,endTime({startTime:e.startClocks.relative,duration:e.duration}))}));if(r.length===1){return r[0]}return}function endTime(e){return addDuration(e.startTime,e.duration)}function isBetween(e,t,r){var n=1;return e.startTime>=t-n&&endTime(e)<=addDuration(r,n)}function startResourceCollection(e,t,r,n){e.subscribe(6,(function(i){var s=processRequest(i,t,r,n);if(s){e.notify(10,s)}}));e.subscribe(0,(function(i){for(var s=0,a=i;s<a.length;s++){var o=a[s];if(o.entryType===RumPerformanceEntryType.RESOURCE&&!isRequestKind(o)){var f=processResourceEntry(o,t,r,n);if(f){e.notify(10,f)}}}}))}function processRequest(e,t,r,n){var i;var s=matchRequestTiming(e);var a=s?relativeToClocks(s.startTime):e.startClocks;var o=shouldIndexResource(t,r,a);var f=computeRequestTracingInfo(e,t);if(!o&&!f){return}var c=e.type==="xhr"?"xhr":"fetch";var u=s?computePerformanceEntryMetrics(s):undefined;var l=computeRequestDuration(n,a,e.duration);var h=computePageStateInfo(n,a,(i=s===null||s===void 0?void 0:s.duration)!==null&&i!==void 0?i:e.duration);var d=combine$1({date:a.timeStamp,resource:{id:generateUUID(),type:c,duration:l,method:e.method,status_code:e.status,url:e.url},type:"resource",_dd:{discarded:!o}},f,u,h);return{startTime:a.relative,rawRumEvent:d,domainContext:{performanceEntry:s,xhr:e.xhr,response:e.response,requestInput:e.input,requestInit:e.init,error:e.error}}}function processResourceEntry(e,t,r,n){var i=relativeToClocks(e.startTime);var s=shouldIndexResource(t,r,i);var a=computeEntryTracingInfo(e,t);if(!s&&!a){return}var o=computeResourceKind(e);var f=computePerformanceEntryMetrics(e);var c=computePageStateInfo(n,i,e.duration);var u=combine$1({date:i.timeStamp,resource:{id:generateUUID(),type:o,url:e.name},type:"resource",_dd:{discarded:!s}},a,f,c);return{startTime:i.relative,rawRumEvent:u,domainContext:{performanceEntry:e}}}function shouldIndexResource(e,t,r){return e.trackResources&&t.findTrackedSession(r.relative)}function computePerformanceEntryMetrics(e){return{resource:assign$4({duration:computePerformanceResourceDuration(e),size:computeSize(e)},computePerformanceResourceDetails(e))}}function computeRequestTracingInfo(e,t){var r=e.traceSampled&&e.traceId&&e.spanId;if(!r){return undefined}return{_dd:{span_id:e.spanId.toDecimalString(),trace_id:e.traceId.toDecimalString(),rule_psr:getRulePsr(t)}}}function computeEntryTracingInfo(e,t){var r=e.traceId;if(!r){return undefined}return{_dd:{trace_id:e.traceId,rule_psr:getRulePsr(t)}}}function getRulePsr(e){return isNumber(e.traceSampleRate)?e.traceSampleRate/100:undefined}function computePageStateInfo(e,t,r){if(!isExperimentalFeatureEnabled(ExperimentalFeature.RESOURCE_PAGE_STATES)){return}return{_dd:{page_states:e.findAll(t.relative,r),page_was_discarded:String(document.wasDiscarded)}}}function computeRequestDuration(e,t,r){var n;var i=(n=e.findAll(t.relative,r))===null||n===void 0?void 0:n.some((function(e){return e.state==="frozen"}));return!i?toServerDuration(r):undefined}function trackViewEventCounts(e,t,r){var n=trackEventCounts({lifeCycle:e,isChildEvent:function(e){return e.view.id===t},onChange:r}),i=n.stop,s=n.eventCounts;return{stop:i,eventCounts:s}}var FCP_MAXIMUM_DELAY=10*ONE_MINUTE;function trackFirstContentfulPaint(e,t,r){var n=e.subscribe(0,(function(e){var n=find(e,(function(e){return e.entryType===RumPerformanceEntryType.PAINT&&e.name==="first-contentful-paint"&&e.startTime<t.timeStamp&&e.startTime<FCP_MAXIMUM_DELAY}));if(n){r(n.startTime)}})).unsubscribe;return{stop:n}}function trackFirstInput(e,t,r,n){var i=e.subscribe(0,(function(e){var i=find(e,(function(e){return e.entryType===RumPerformanceEntryType.FIRST_INPUT&&e.startTime<r.timeStamp}));if(i){var s=elapsed(i.startTime,i.processingStart);var a=void 0;if(i.target&&isElementNode(i.target)){a=getSelectorFromElement(i.target,t.actionNameAttribute)}n({delay:s>=0?s:0,time:i.startTime,targetSelector:a})}})).unsubscribe;return{stop:i}}function trackNavigationTimings(e,t){var r=e.subscribe(0,(function(e){for(var r=0,n=e;r<n.length;r++){var i=n[r];if(i.entryType===RumPerformanceEntryType.NAVIGATION){t({domComplete:i.domComplete,domContentLoaded:i.domContentLoadedEventEnd,domInteractive:i.domInteractive,loadEvent:i.loadEventEnd,firstByte:i.responseStart>=0&&i.responseStart<=relativeNow()?i.responseStart:undefined})}}})).unsubscribe;return{stop:r}}var LCP_MAXIMUM_DELAY=10*ONE_MINUTE;var wrongLcpReported=false;var previousLcp;function trackLargestContentfulPaint(e,t,r,n,i){var s=Infinity;var a=addEventListeners(t,n,[DOM_EVENT.POINTER_DOWN,DOM_EVENT.KEY_DOWN],(function(e){s=e.timeStamp}),{capture:true,once:true}).stop;var o=e.subscribe(0,(function(e){var n=findLast(e,(function(e){return e.entryType===RumPerformanceEntryType.LARGEST_CONTENTFUL_PAINT&&e.startTime<s&&e.startTime<r.timeStamp&&e.startTime<LCP_MAXIMUM_DELAY}));if(n){var a=void 0;if(n.element){a=getSelectorFromElement(n.element,t.actionNameAttribute)}if(isExperimentalFeatureEnabled(ExperimentalFeature.ZERO_LCP_TELEMETRY)){monitorLcpEntries(n,e.filter((function(e){return e.entryType===RumPerformanceEntryType.LARGEST_CONTENTFUL_PAINT})))}i({value:n.startTime,targetSelector:a})}})).unsubscribe;return{stop:function(){a();o()}}}function monitorLcpEntries(e,t){if(wrongLcpReported){return}var r=e.startTime===0?"LCP with startTime = 0":previousLcp!==undefined&&e.startTime<previousLcp.startTime?"LCP with startTime < previous LCP":previousLcp!==undefined&&e.size<previousLcp.size?"LCP with size < previous LCP":undefined;if(r){wrongLcpReported=true;addTelemetryDebug(r,{debug:{entry:toSerializableLCP(e),previousLcp,timeOrigin:performance.timeOrigin,now:relativeNow(),lcpEntries:t.map(toSerializableLCP)}})}previousLcp=toSerializableLCP(e)}function toSerializableLCP(e){var t=e.toJSON();delete t.element;return t}function trackFirstHidden(e,t){if(t===void 0){t=window}var r;var n;if(document.visibilityState==="hidden"){r=0}else{r=Infinity;n=addEventListeners(e,t,[DOM_EVENT.PAGE_HIDE,DOM_EVENT.VISIBILITY_CHANGE],(function(e){if(e.type===DOM_EVENT.PAGE_HIDE||document.visibilityState==="hidden"){r=e.timeStamp;n()}}),{capture:true}).stop}return{get timeStamp(){return r},stop:function(){n===null||n===void 0?void 0:n()}}}function trackInitialViewMetrics(e,t,r,n){var i={};var s=trackNavigationTimings(e,(function(e){r(e.loadEvent);i.navigationTimings=e;n()})).stop;var a=trackFirstHidden(t);var o=trackFirstContentfulPaint(e,a,(function(e){i.firstContentfulPaint=e;n()})).stop;var f=trackLargestContentfulPaint(e,t,a,window,(function(e){i.largestContentfulPaint=e;n()})).stop;var c=trackFirstInput(e,t,a,(function(e){i.firstInput=e;n()})).stop;function u(){s();o();f();c();a.stop()}return{stop:u,initialViewMetrics:i}}function trackCumulativeLayoutShift(e,t,r){if(!isLayoutShiftSupported()){return{stop:noop$1}}var n=0;r({value:0});var i=slidingSessionWindow();var s=t.subscribe(0,(function(t){for(var s=0,a=t;s<a.length;s++){var o=a[s];if(o.entryType===RumPerformanceEntryType.LAYOUT_SHIFT&&!o.hadRecentInput){i.update(o);if(i.value()>n){n=i.value();var f=round(n,4);var c=i.largestLayoutShiftTarget();var u=void 0;if(c&&c.isConnected){u=getSelectorFromElement(c,e.actionNameAttribute)}r({value:f,targetSelector:u})}}}})).unsubscribe;return{stop:s}}function slidingSessionWindow(){var e=0;var t;var r;var n=0;var i;var s;return{update:function(a){var o,f;var c=t===undefined||a.startTime-r>=ONE_SECOND||a.startTime-t>=5*ONE_SECOND;if(c){t=r=a.startTime;e=a.value;n=0;i=undefined}else{e+=a.value;r=a.startTime}if(a.value>n){n=a.value;s=a.startTime;if((o=a.sources)===null||o===void 0?void 0:o.length){i=(f=find(a.sources,(function(e){return!!e.node&&isElementNode(e.node)})))===null||f===void 0?void 0:f.node}else{i=undefined}}},value:function(){return e},largestLayoutShiftTarget:function(){return i},largestLayoutShiftTime:function(){return s}}}function isLayoutShiftSupported(){return supportPerformanceTimingEvent(RumPerformanceEntryType.LAYOUT_SHIFT)}var observer;var interactionCountEstimate=0;var minKnownInteractionId=Infinity;var maxKnownInteractionId=0;function initInteractionCountPolyfill(){if("interactionCount"in performance||observer){return}observer=new window.PerformanceObserver(monitor((function(e){e.getEntries().forEach((function(e){var t=e;if(t.interactionId){minKnownInteractionId=Math.min(minKnownInteractionId,t.interactionId);maxKnownInteractionId=Math.max(maxKnownInteractionId,t.interactionId);interactionCountEstimate=(maxKnownInteractionId-minKnownInteractionId)/7+1}}))})));observer.observe({type:"event",buffered:true,durationThreshold:0})}var getInteractionCount=function(){return observer?interactionCountEstimate:window.performance.interactionCount||0};var MAX_INTERACTION_ENTRIES=10;var MAX_INP_VALUE=1*ONE_MINUTE;function trackInteractionToNextPaint(e,t,r,n){if(!isInteractionToNextPaintSupported()){return{getInteractionToNextPaint:function(){return undefined},setViewEnd:noop$1,stop:noop$1}}var i=trackViewInteractionCount(r),s=i.getViewInteractionCount,a=i.stopViewInteractionCount;var o=Infinity;var f=trackLongestInteractions(s);var c=-1;var u;var l=n.subscribe(0,(function(r){for(var n=0,i=r;n<i.length;n++){var s=i[n];if((s.entryType===RumPerformanceEntryType.EVENT||s.entryType===RumPerformanceEntryType.FIRST_INPUT)&&s.interactionId&&s.startTime>=t&&s.startTime<=o){f.process(s)}}var a=f.estimateP98Interaction();if(a){c=a.duration;if(a.target&&isElementNode(a.target)){u=getSelectorFromElement(a.target,e.actionNameAttribute)}else{u=undefined}}})).unsubscribe;return{getInteractionToNextPaint:function(){if(c>=0){return{value:Math.min(c,MAX_INP_VALUE),targetSelector:u}}else if(s()){return{value:0}}},setViewEnd:function(e){o=e;a()},stop:l}}function trackLongestInteractions(e){var t=[];function r(){t.sort((function(e,t){return t.duration-e.duration})).splice(MAX_INTERACTION_ENTRIES)}return{process:function(e){var n=t.findIndex((function(t){return e.interactionId===t.interactionId}));var i=t[t.length-1];if(n!==-1){if(e.duration>t[n].duration){t[n]=e;r()}}else if(t.length<MAX_INTERACTION_ENTRIES||e.duration>i.duration){t.push(e);r()}},estimateP98Interaction:function(){var r=Math.min(t.length-1,Math.floor(e()/50));return t[r]}}}function trackViewInteractionCount(e){initInteractionCountPolyfill();var t=e==="initial_load"?0:getInteractionCount();var r={stopped:false};function n(){return getInteractionCount()-t}return{getViewInteractionCount:function(){if(r.stopped){return r.interactionCount}return n()},stopViewInteractionCount:function(){r={stopped:true,interactionCount:n()}}}}function isInteractionToNextPaintSupported(){return supportPerformanceTimingEvent(RumPerformanceEntryType.EVENT)&&window.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype}function trackLoadingTime(e,t,r,n,i,s){var a=n==="initial_load";var o=true;var f=[];function c(){if(!o&&!a&&f.length>0){s(Math.max.apply(Math,f))}}var u=waitPageActivityEnd(e,t,r,(function(e){if(o){o=false;if(e.hadActivity){f.push(elapsed(i.timeStamp,e.end))}c()}})).stop;return{stop:u,setLoadEvent:function(e){if(a){a=false;f.push(e);c()}}}}function getScrollX(){var e;var t=window.visualViewport;if(t){e=t.pageLeft-t.offsetLeft}else if(window.scrollX!==undefined){e=window.scrollX}else{e=window.pageXOffset||0}return Math.round(e)}function getScrollY(){var e;var t=window.visualViewport;if(t){e=t.pageTop-t.offsetTop}else if(window.scrollY!==undefined){e=window.scrollY}else{e=window.pageYOffset||0}return Math.round(e)}var viewportObservable;function initViewportObservable(e){if(!viewportObservable){viewportObservable=createViewportObservable(e)}return viewportObservable}function createViewportObservable(e){var t=new Observable((function(){var r=throttle((function(){t.notify(getViewportDimension())}),200).throttled;return addEventListener$1(e,window,DOM_EVENT.RESIZE,r,{capture:true,passive:true}).stop}));return t}function getViewportDimension(){var e=window.visualViewport;if(e){return{width:Number(e.width*e.scale),height:Number(e.height*e.scale)}}return{width:Number(window.innerWidth||0),height:Number(window.innerHeight||0)}}var THROTTLE_SCROLL_DURATION=ONE_SECOND;function trackScrollMetrics(e,t,r,n){if(n===void 0){n=createScrollValuesObservable(e)}var i=0;var s=0;var a=0;var o=n.subscribe((function(e){var n=e.scrollDepth,o=e.scrollTop,f=e.scrollHeight;var c=false;if(n>i){i=n;c=true}if(f>s){s=f;var u=relativeNow();a=elapsed(t.relative,u);c=true}if(c){r({maxDepth:Math.min(i,s),maxDepthScrollTop:o,maxScrollHeight:s,maxScrollHeightTime:a})}}));return{stop:function(){return o.unsubscribe()}}}function computeScrollValues(){var e=getScrollY();var t=getViewportDimension().height;var r=Math.round((document.scrollingElement||document.documentElement).scrollHeight);var n=Math.round(t+e);return{scrollHeight:r,scrollDepth:n,scrollTop:e}}function createScrollValuesObservable(e,t){if(t===void 0){t=THROTTLE_SCROLL_DURATION}var r=new Observable((function(){function n(){r.notify(computeScrollValues())}if(window.ResizeObserver){var i=throttle(n,t,{leading:false,trailing:true});var s=document.scrollingElement||document.documentElement;var a=new ResizeObserver(monitor(i.throttled));a.observe(s);var o=addEventListener$1(e,window,DOM_EVENT.SCROLL,i.throttled,{passive:true});return function(){i.cancel();a.unobserve(s);o.stop()}}}));return r}function trackCommonViewMetrics(e,t,r,n,i,s){var a={};var o=trackLoadingTime(e,t,r,i,s,(function(e){a.loadingTime=e;n()})),f=o.stop,c=o.setLoadEvent;var u=trackScrollMetrics(r,s,(function(e){a.scroll=e})).stop;var l=trackCumulativeLayoutShift(r,e,(function(e){a.cumulativeLayoutShift=e;n()})).stop;var h=trackInteractionToNextPaint(r,s.relative,i,e),d=h.stop,p=h.getInteractionToNextPaint,y=h.setViewEnd;return{stop:function(){f();l();u()},stopINPTracking:d,setLoadEvent:c,setViewEnd:y,getCommonViewMetrics:function(){a.interactionToNextPaint=p();return a}}}var THROTTLE_VIEW_UPDATE_PERIOD=3e3;var SESSION_KEEP_ALIVE_INTERVAL=5*ONE_MINUTE;var KEEP_TRACKING_AFTER_VIEW_DELAY=5*ONE_MINUTE;function trackViews(e,t,r,n,i,s,a){var o=new Set;var f=u("initial_load",clocksOrigin(),a);l();var c;if(s){c=h(i)}function u(i,s,a){var f=newView(t,r,n,e,i,s,a);o.add(f);f.stopObservable.subscribe((function(){o.delete(f)}));return f}function l(){t.subscribe(8,(function(){f=u("route_change",undefined,{name:f.name,service:f.service,version:f.version})}));t.subscribe(7,(function(){f.end({sessionIsActive:false})}));t.subscribe(9,(function(e){if(e.reason===PageExitReason.UNLOADING||e.reason===PageExitReason.PAGEHIDE){f.end()}}))}function h(e){return e.subscribe((function(e){var t=e.oldLocation,r=e.newLocation;if(areDifferentLocation(t,r)){f.end();f=u("route_change")}}))}return{addTiming:function(e,t){if(t===void 0){t=timeStampNow()}f.addTiming(e,t)},startView:function(e,t){f.end({endClocks:t});f=u("route_change",t,e)},stop:function(){c===null||c===void 0?void 0:c.unsubscribe();f.end();o.forEach((function(e){return e.stop()}))}}}function newView(e,t,r,n,i,s,a){if(s===void 0){s=clocksNow()}var o=generateUUID();var f=new Observable;var c={};var u=0;var l;var h=shallowClone(n);var d=true;var p;var y;var m;if(a){p=a.name;y=a.service;m=a.version}e.notify(2,{id:o,name:p,startClocks:s,service:y,version:m});var g=throttle(O,THROTTLE_VIEW_UPDATE_PERIOD,{leading:false}),b=g.throttled,A=g.cancel;var w=trackCommonViewMetrics(e,t,r,b,i,s),E=w.setLoadEvent,v=w.setViewEnd,_=w.stop,S=w.stopINPTracking,$=w.getCommonViewMetrics;var T=i==="initial_load"?trackInitialViewMetrics(e,r,E,b):{stop:noop$1,initialViewMetrics:{}},I=T.stop,C=T.initialViewMetrics;var P=trackViewEventCounts(e,o,b),R=P.stop,N=P.eventCounts;var k=setInterval$1(O,SESSION_KEEP_ALIVE_INTERVAL);O();function O(){A();u+=1;var t=l===undefined?timeStampNow():l.timeStamp;e.notify(3,{customTimings:c,documentVersion:u,id:o,name:p,service:y,version:m,loadingType:i,location:h,startClocks:s,commonViewMetrics:$(),initialViewMetrics:C,duration:elapsed(s.timeStamp,t),isActive:l===undefined,sessionIsActive:d,eventCounts:N})}return{name:p,service:y,version:m,stopObservable:f,end:function(t){var r=this;var n,i;if(t===void 0){t={}}if(l){return}l=(n=t.endClocks)!==null&&n!==void 0?n:clocksNow();d=(i=t.sessionIsActive)!==null&&i!==void 0?i:true;e.notify(4,{endClocks:l});clearInterval$1(k);v(l.relative);_();O();setTimeout$1((function(){r.stop()}),KEEP_TRACKING_AFTER_VIEW_DELAY)},stop:function(){I();R();S();f.notify()},addTiming:function(e,t){if(l){return}var r=looksLikeRelativeTime(t)?t:elapsed(s.timeStamp,t);c[sanitizeTiming(e)]=r;b()}}}function sanitizeTiming(e){var t=e.replace(/[^a-zA-Z0-9-_.@$]/g,"_");if(t!==e){display.warn("Invalid timing name: ".concat(e,", sanitized to: ").concat(t))}return t}function areDifferentLocation(e,t){return e.pathname!==t.pathname||!isHashAnAnchor(t.hash)&&getPathFromHash(t.hash)!==getPathFromHash(e.hash)}function isHashAnAnchor(e){var t=e.substring(1);return t!==""&&!!document.getElementById(t)}function getPathFromHash(e){var t=e.indexOf("?");return t<0?e:e.slice(0,t)}function startViewCollection(e,t,r,n,i,s,a,o,f){e.subscribe(3,(function(r){return e.notify(10,processViewUpdate(r,t,s,o,a))}));return trackViews(r,e,n,t,i,!t.trackViewsManually,f)}function processViewUpdate(e,t,r,n,i){var s,a,o,f,c,u,l,h,d,p,y,m,g,b;var A=n.getReplayStats(e.id);var w=r.findFeatureFlagEvaluations(e.startClocks.relative);var E=i.findAll(e.startClocks.relative,e.duration);var v={_dd:{document_version:e.documentVersion,replay_stats:A,page_states:E,configuration:{start_session_replay_recording_manually:t.startSessionReplayRecordingManually}},date:e.startClocks.timeStamp,type:"view",view:{action:{count:e.eventCounts.actionCount},frustration:{count:e.eventCounts.frustrationCount},cumulative_layout_shift:(s=e.commonViewMetrics.cumulativeLayoutShift)===null||s===void 0?void 0:s.value,cumulative_layout_shift_target_selector:(a=e.commonViewMetrics.cumulativeLayoutShift)===null||a===void 0?void 0:a.targetSelector,first_byte:toServerDuration((o=e.initialViewMetrics.navigationTimings)===null||o===void 0?void 0:o.firstByte),dom_complete:toServerDuration((f=e.initialViewMetrics.navigationTimings)===null||f===void 0?void 0:f.domComplete),dom_content_loaded:toServerDuration((c=e.initialViewMetrics.navigationTimings)===null||c===void 0?void 0:c.domContentLoaded),dom_interactive:toServerDuration((u=e.initialViewMetrics.navigationTimings)===null||u===void 0?void 0:u.domInteractive),error:{count:e.eventCounts.errorCount},first_contentful_paint:toServerDuration(e.initialViewMetrics.firstContentfulPaint),first_input_delay:toServerDuration((l=e.initialViewMetrics.firstInput)===null||l===void 0?void 0:l.delay),first_input_time:toServerDuration((h=e.initialViewMetrics.firstInput)===null||h===void 0?void 0:h.time),first_input_target_selector:(d=e.initialViewMetrics.firstInput)===null||d===void 0?void 0:d.targetSelector,interaction_to_next_paint:toServerDuration((p=e.commonViewMetrics.interactionToNextPaint)===null||p===void 0?void 0:p.value),interaction_to_next_paint_target_selector:(y=e.commonViewMetrics.interactionToNextPaint)===null||y===void 0?void 0:y.targetSelector,is_active:e.isActive,name:e.name,largest_contentful_paint:toServerDuration((m=e.initialViewMetrics.largestContentfulPaint)===null||m===void 0?void 0:m.value),largest_contentful_paint_target_selector:(g=e.initialViewMetrics.largestContentfulPaint)===null||g===void 0?void 0:g.targetSelector,load_event:toServerDuration((b=e.initialViewMetrics.navigationTimings)===null||b===void 0?void 0:b.loadEvent),loading_time:discardNegativeDuration(toServerDuration(e.commonViewMetrics.loadingTime)),loading_type:e.loadingType,long_task:{count:e.eventCounts.longTaskCount},resource:{count:e.eventCounts.resourceCount},time_spent:toServerDuration(e.duration)},feature_flags:w&&!isEmptyObject(w)?w:undefined,display:e.commonViewMetrics.scroll?{scroll:{max_depth:e.commonViewMetrics.scroll.maxDepth,max_depth_scroll_top:e.commonViewMetrics.scroll.maxDepthScrollTop,max_scroll_height:e.commonViewMetrics.scroll.maxScrollHeight,max_scroll_height_time:toServerDuration(e.commonViewMetrics.scroll.maxScrollHeightTime)}}:undefined,session:{has_replay:A?true:undefined,is_active:e.sessionIsActive?undefined:false},privacy:{replay_level:t.defaultPrivacyLevel}};if(!isEmptyObject(e.customTimings)){v.view.custom_timings=mapValues(e.customTimings,toServerDuration)}return{rawRumEvent:v,startTime:e.startClocks.relative,domainContext:{location:e.location}}}function discardNegativeDuration(e){return isNumber(e)&&e<0?undefined:e}var RUM_SESSION_KEY="rum";function startRumSessionManager(e,t){var r=startSessionManager(e,RUM_SESSION_KEY,(function(t){return computeSessionState(e,t)}));r.expireObservable.subscribe((function(){t.notify(7)}));r.renewObservable.subscribe((function(){t.notify(8)}));return{findTrackedSession:function(e){var t=r.findActiveSession(e);if(!t||!isTypeTracked(t.trackingType)){return}return{id:t.id,sessionReplayAllowed:t.trackingType==="1"}},expire:r.expire,expireObservable:r.expireObservable}}function startRumSessionManagerStub(){var e={id:"00000000-aaaa-0000-aaaa-000000000000",sessionReplayAllowed:false};return{findTrackedSession:function(){return e},expire:noop$1,expireObservable:new Observable}}function computeSessionState(e,t){var r;if(hasValidRumSession(t)){r=t}else if(!performDraw(e.sessionSampleRate)){r="0"}else if(!performDraw(e.sessionReplaySampleRate)){r="2"}else{r="1"}return{trackingType:r,isTracked:isTypeTracked(r)}}function hasValidRumSession(e){return e==="0"||e==="1"||e==="2"}function isTypeTracked(e){return e==="2"||e==="1"}function startRumBatch(e,t,r,n,i,s,a){var o=e.replica;var f=startBatchWithReplica(e,{endpoint:e.rumEndpointBuilder,encoder:a(2)},o&&{endpoint:o.rumEndpointBuilder,transformMessage:function(e){return combine$1(e,{application:{id:o.applicationId}})},encoder:a(3)},n,i,s);t.subscribe(11,(function(e){if(e.type==="view"){f.upsert(e,e.view.id)}else{f.add(e)}}));r.subscribe((function(t){return f.add(t,isTelemetryReplicationAllowed(e))}));return f}function startRumEventBridge(e){var t=getEventBridge();e.subscribe(11,(function(e){t.send("rum",e)}))}var URL_CONTEXT_TIME_OUT_DELAY=SESSION_TIME_OUT_DELAY;function startUrlContexts(e,t,r){var n=new ValueHistory(URL_CONTEXT_TIME_OUT_DELAY);var i;e.subscribe(4,(function(e){var t=e.endClocks;n.closeActive(t.relative)}));e.subscribe(2,(function(e){var t=e.startClocks;var s=r.href;n.add(a({url:s,referrer:!i?document.referrer:i}),t.relative);i=s}));var s=t.subscribe((function(e){var t=e.newLocation;var r=n.find();if(r){var i=relativeNow();n.closeActive(i);n.add(a({url:t.href,referrer:r.referrer}),i)}}));function a(e){var t=e.url,r=e.referrer;return{url:t,referrer:r}}return{findUrl:function(e){return n.find(e)},stop:function(){s.unsubscribe();n.stop()}}}function createLocationChangeObservable(e,t){var r=shallowClone(t);var n=new Observable((function(){var t=trackHistory(e,i).stop;var r=trackHash(e,i).stop;return function(){t();r()}}));function i(){if(r.href===t.href){return}var e=shallowClone(t);n.notify({newLocation:e,oldLocation:r});r=e}return n}function trackHistory(e,t){var r=instrumentMethodAndCallOriginal(history,"pushState",{after:t}).stop;var n=instrumentMethodAndCallOriginal(history,"replaceState",{after:t}).stop;var i=addEventListener$1(e,window,DOM_EVENT.POP_STATE,t).stop;return{stop:function(){r();n();i()}}}function trackHash(e,t){return addEventListener$1(e,window,DOM_EVENT.HASH_CHANGE,t)}var FEATURE_FLAG_CONTEXT_TIME_OUT_DELAY=SESSION_TIME_OUT_DELAY;var BYTES_COMPUTATION_THROTTLING_DELAY=200;function startFeatureFlagContexts(e,t){if(t===void 0){t=computeBytesCount}if(!isExperimentalFeatureEnabled(ExperimentalFeature.FEATURE_FLAGS)){return{findFeatureFlagEvaluations:function(){return undefined},getFeatureFlagBytesCount:function(){return 0},addFeatureFlagEvaluation:noop$1,stop:noop$1}}var r=new ValueHistory(FEATURE_FLAG_CONTEXT_TIME_OUT_DELAY);var n=0;var i=false;e.subscribe(4,(function(e){var t=e.endClocks;r.closeActive(t.relative)}));e.subscribe(2,(function(e){var t=e.startClocks;r.add({},t.relative);n=0}));var s=throttle((function(e){n=t(jsonStringify(e));if(!i){i=warnIfCustomerDataLimitReached(n,0)}}),BYTES_COMPUTATION_THROTTLING_DELAY),a=s.throttled,o=s.cancel;return{findFeatureFlagEvaluations:function(e){return r.find(e)},getFeatureFlagBytesCount:function(){var e=r.find();if(!e){return 0}return n},addFeatureFlagEvaluation:function(e,t){var n=r.find();if(n){n[e]=t;a(n)}},stop:o}}var MEASURES_PERIOD_DURATION=10*ONE_SECOND;var currentPeriodMeasures;var currentBatchMeasures;var batchHasRumEvent;function startCustomerDataTelemetry(e,t,r,n,i,s,a){var o=t.enabled&&performDraw(e.customerDataTelemetrySampleRate);if(!o){return}initCurrentPeriodMeasures();initCurrentBatchMeasures();r.subscribe(11,(function(e){batchHasRumEvent=true;updateMeasure(currentBatchMeasures.globalContextBytes,!isEmptyObject(n.getContext())?n.getBytesCount():0);updateMeasure(currentBatchMeasures.userContextBytes,!isEmptyObject(i.getContext())?i.getBytesCount():0);var t=s.findFeatureFlagEvaluations();var r=includes(["view","error"],e.type)&&t&&!isEmptyObject(t);updateMeasure(currentBatchMeasures.featureFlagBytes,r?s.getFeatureFlagBytesCount():0)}));a.subscribe((function(e){var t=e.bytesCount,r=e.messagesCount;if(!batchHasRumEvent){return}currentPeriodMeasures.batchCount+=1;updateMeasure(currentPeriodMeasures.batchBytesCount,t);updateMeasure(currentPeriodMeasures.batchMessagesCount,r);mergeMeasure(currentPeriodMeasures.globalContextBytes,currentBatchMeasures.globalContextBytes);mergeMeasure(currentPeriodMeasures.userContextBytes,currentBatchMeasures.userContextBytes);mergeMeasure(currentPeriodMeasures.featureFlagBytes,currentBatchMeasures.featureFlagBytes);initCurrentBatchMeasures()}));setInterval$1(sendCurrentPeriodMeasures,MEASURES_PERIOD_DURATION)}function sendCurrentPeriodMeasures(){if(currentPeriodMeasures.batchCount===0){return}addTelemetryDebug("Customer data measures",currentPeriodMeasures);initCurrentPeriodMeasures()}function createMeasure(){return{min:Infinity,max:0,sum:0}}function updateMeasure(e,t){e.sum+=t;e.min=Math.min(e.min,t);e.max=Math.max(e.max,t)}function mergeMeasure(e,t){e.sum+=t.sum;e.min=Math.min(e.min,t.min);e.max=Math.max(e.max,t.max)}function initCurrentPeriodMeasures(){currentPeriodMeasures={batchCount:0,batchBytesCount:createMeasure(),batchMessagesCount:createMeasure(),globalContextBytes:createMeasure(),userContextBytes:createMeasure(),featureFlagBytes:createMeasure()}}function initCurrentBatchMeasures(){batchHasRumEvent=false;currentBatchMeasures={globalContextBytes:createMeasure(),userContextBytes:createMeasure(),featureFlagBytes:createMeasure()}}var MAX_PAGE_STATE_ENTRIES=4e3;var MAX_PAGE_STATE_ENTRIES_SELECTABLE=500;var PAGE_STATE_CONTEXT_TIME_OUT_DELAY=SESSION_TIME_OUT_DELAY;function startPageStateHistory(e,t){if(t===void 0){t=MAX_PAGE_STATE_ENTRIES_SELECTABLE}var r=new ValueHistory(PAGE_STATE_CONTEXT_TIME_OUT_DELAY,MAX_PAGE_STATE_ENTRIES);var n;s(getPageState(),relativeNow());var i=addEventListeners(e,window,[DOM_EVENT.PAGE_SHOW,DOM_EVENT.FOCUS,DOM_EVENT.BLUR,DOM_EVENT.VISIBILITY_CHANGE,DOM_EVENT.RESUME,DOM_EVENT.FREEZE,DOM_EVENT.PAGE_HIDE],(function(e){s(computePageState(e),e.timeStamp)}),{capture:true}).stop;function s(e,t){if(t===void 0){t=relativeNow()}if(e===n){return}n=e;r.closeActive(t);r.add({state:n,startTime:t},t)}return{findAll:function(e,n){var i=r.findAll(e,n);if(i.length===0){return}var s=[];var a=Math.max(0,i.length-t);for(var o=i.length-1;o>=a;o--){var f=i[o];var c=elapsed(e,f.startTime);s.push({state:f.state,start:toServerDuration(c)})}return s},isInActivePageStateAt:function(e){var t=r.find(e);return t!==undefined&&t.state==="active"},addPageState:s,stop:function(){i();r.stop()}}}function computePageState(e){if(e.type===DOM_EVENT.FREEZE){return"frozen"}else if(e.type===DOM_EVENT.PAGE_HIDE){return e.persisted?"frozen":"terminated"}return getPageState()}function getPageState(){if(document.visibilityState==="hidden"){return"hidden"}if(document.hasFocus()){return"active"}return"passive"}function startDisplayContext(e){var t=getViewportDimension();var r=initViewportObservable(e).subscribe((function(e){t=e})).unsubscribe;return{get:function(){return{viewport:t}},stop:r}}function startRum(e,t,r,n,i,s,a){var o=[];var f=new LifeCycle;f.subscribe(11,(function(e){return sendToExtension("rum",e)}));var c=startRumTelemetry(t);c.setContextProvider((function(){var e,r;return{application:{id:t.applicationId},session:{id:(e=p.findTrackedSession())===null||e===void 0?void 0:e.id},view:{id:(r=A.findView())===null||r===void 0?void 0:r.id},action:{id:v.findActionId()}}}));var u=function(e){f.notify(12,{error:e});addTelemetryDebug("Error reported to customer",{"error.message":e.message})};var l=startFeatureFlagContexts(f);var h=createPageExitObservable(t);var d=h.subscribe((function(e){f.notify(9,e)}));o.push((function(){return d.unsubscribe()}));var p=!canUseEventBridge()?startRumSessionManager(t,f):startRumSessionManagerStub();if(!canUseEventBridge()){var y=startRumBatch(t,f,c.observable,u,h,p.expireObservable,a);o.push((function(){return y.stop()}));startCustomerDataTelemetry(t,c,f,n,i,l,y.flushObservable)}else{startRumEventBridge(f)}var m=createDOMMutationObservable();var g=createLocationChangeObservable(t,location);var b=startRumEventCollection(f,t,location,p,g,m,(function(){return buildCommonContext(n,i,r)}),u),A=b.viewContexts,w=b.pageStateHistory,E=b.urlContexts,v=b.actionContexts,_=b.addAction,S=b.stop;o.push(S);addTelemetryConfiguration(serializeRumConfiguration(e));startLongTaskCollection(f,t,p);startResourceCollection(f,t,p,w);var $=startViewCollection(f,t,location,m,g,l,w,r,s),T=$.addTiming,I=$.startView,C=$.stop;o.push(C);var P=startErrorCollection(f,t,w,l).addError;startRequestCollection(f,t,p);startPerformanceCollection(f,t);var R=startInternalContext(t.applicationId,p,A,v,E);return{addAction:_,addError:P,addTiming:T,addFeatureFlagEvaluation:l.addFeatureFlagEvaluation,startView:I,lifeCycle:f,viewContexts:A,session:p,stopSession:function(){return p.expire()},getInternalContext:R.get,stop:function(){o.forEach((function(e){return e()}))}}}function startRumTelemetry(e){var t=startTelemetry("browser-rum-sdk",e);if(canUseEventBridge()){var r=getEventBridge();t.observable.subscribe((function(e){return r.send("internal_telemetry",e)}))}return t}function startRumEventCollection(e,t,r,n,i,s,a,o){var f=startViewContexts(e);var c=startUrlContexts(e,i,r);var u=startPageStateHistory(t);var l=startActionCollection(e,s,t,u),h=l.addAction,d=l.actionContexts;var p=startDisplayContext(t);startRumAssembly(t,e,n,f,c,d,p,a,o);return{viewContexts:f,pageStateHistory:u,urlContexts:c,addAction:h,actionContexts:d,stop:function(){p.stop();u.stop();c.stop();f.stop();u.stop()}}}function getSessionReplayUrl(e,t){var r=t.session,n=t.viewContext,i=t.errorType;var s=r?r.id:"no-session-id";var a=[];if(i!==undefined){a.push("error-type=".concat(i))}if(n){a.push("seed=".concat(n.id));a.push("from=".concat(n.startClocks.timeStamp))}var o=getDatadogSiteUrl(e);var f="/rum/replay/sessions/".concat(s);return"".concat(o).concat(f,"?").concat(a.join("&"))}function getDatadogSiteUrl(e){var t=e.site;var r=e.subdomain||getSiteDefaultSubdomain(e);return"https://".concat(r?"".concat(r,"."):"").concat(t)}function getSiteDefaultSubdomain(e){switch(e.site){case INTAKE_SITE_US1:case INTAKE_SITE_EU1:return"app";case INTAKE_SITE_STAGING:return"dd";default:return undefined}}var RecordType={FullSnapshot:2,IncrementalSnapshot:3,Meta:4,Focus:6,ViewEnd:7,VisualViewport:8,FrustrationRecord:9};var NodeType={Document:0,DocumentType:1,Element:2,Text:3,CDATA:4,DocumentFragment:11};var IncrementalSource={Mutation:0,MouseMove:1,MouseInteraction:2,Scroll:3,ViewportResize:4,Input:5,TouchMove:6,MediaInteraction:7,StyleSheetRule:8};var MouseInteractionType={MouseUp:0,MouseDown:1,Click:2,ContextMenu:3,DblClick:4,Focus:5,Blur:6,TouchStart:7,TouchEnd:9};var MediaInteractionType={Play:0,Pause:1};function assembleIncrementalSnapshot(e,t){return{data:assign$4({source:e},t),type:RecordType.IncrementalSnapshot,timestamp:timeStampNow()}}var NodePrivacyLevel={IGNORE:"ignore",HIDDEN:"hidden",ALLOW:DefaultPrivacyLevel.ALLOW,MASK:DefaultPrivacyLevel.MASK,MASK_USER_INPUT:DefaultPrivacyLevel.MASK_USER_INPUT};var PRIVACY_ATTR_NAME="data-dd-privacy";var PRIVACY_ATTR_VALUE_ALLOW="allow";var PRIVACY_ATTR_VALUE_MASK="mask";var PRIVACY_ATTR_VALUE_MASK_USER_INPUT="mask-user-input";var PRIVACY_ATTR_VALUE_HIDDEN="hidden";var PRIVACY_CLASS_ALLOW="dd-privacy-allow";var PRIVACY_CLASS_MASK="dd-privacy-mask";var PRIVACY_CLASS_MASK_USER_INPUT="dd-privacy-mask-user-input";var PRIVACY_CLASS_HIDDEN="dd-privacy-hidden";var CENSORED_STRING_MARK="***";var CENSORED_IMG_MARK="data:image/gif;base64,R0lGODlhAQABAIAAAMLCwgAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==";var FORM_PRIVATE_TAG_NAMES={INPUT:true,OUTPUT:true,TEXTAREA:true,SELECT:true,OPTION:true,DATALIST:true,OPTGROUP:true};var MAX_ATTRIBUTE_VALUE_CHAR_LENGTH=1e5;var TEXT_MASKING_CHAR="x";function getNodePrivacyLevel(e,t){var r=getParentNode(e);var n=r?getNodePrivacyLevel(r,t):t;var i=getNodeSelfPrivacyLevel(e);return reducePrivacyLevel(i,n)}function reducePrivacyLevel(e,t){switch(t){case NodePrivacyLevel.HIDDEN:case NodePrivacyLevel.IGNORE:return t}switch(e){case NodePrivacyLevel.ALLOW:case NodePrivacyLevel.MASK:case NodePrivacyLevel.MASK_USER_INPUT:case NodePrivacyLevel.HIDDEN:case NodePrivacyLevel.IGNORE:return e;default:return t}}function getNodeSelfPrivacyLevel(e){if(!isElementNode(e)){return}var t=e.getAttribute(PRIVACY_ATTR_NAME);if(e.tagName==="BASE"){return NodePrivacyLevel.ALLOW}if(e.tagName==="INPUT"){var r=e;if(r.type==="password"||r.type==="email"||r.type==="tel"){return NodePrivacyLevel.MASK}if(r.type==="hidden"){return NodePrivacyLevel.MASK}var n=r.getAttribute("autocomplete");if(n&&n.indexOf("cc-")===0){return NodePrivacyLevel.MASK}}if(t===PRIVACY_ATTR_VALUE_HIDDEN||e.classList.contains(PRIVACY_CLASS_HIDDEN)){return NodePrivacyLevel.HIDDEN}if(t===PRIVACY_ATTR_VALUE_MASK||e.classList.contains(PRIVACY_CLASS_MASK)){return NodePrivacyLevel.MASK}if(t===PRIVACY_ATTR_VALUE_MASK_USER_INPUT||e.classList.contains(PRIVACY_CLASS_MASK_USER_INPUT)){return NodePrivacyLevel.MASK_USER_INPUT}if(t===PRIVACY_ATTR_VALUE_ALLOW||e.classList.contains(PRIVACY_CLASS_ALLOW)){return NodePrivacyLevel.ALLOW}if(shouldIgnoreElement(e)){return NodePrivacyLevel.IGNORE}}function shouldMaskNode(e,t){switch(t){case NodePrivacyLevel.MASK:case NodePrivacyLevel.HIDDEN:case NodePrivacyLevel.IGNORE:return true;case NodePrivacyLevel.MASK_USER_INPUT:return isTextNode(e)?isFormElement(e.parentNode):isFormElement(e);default:return false}}function isFormElement(e){if(!e||e.nodeType!==e.ELEMENT_NODE){return false}var t=e;if(t.tagName==="INPUT"){switch(t.type){case"button":case"color":case"reset":case"submit":return false}}return!!FORM_PRIVATE_TAG_NAMES[t.tagName]}var censorText=function(e){return e.replace(/\S/g,TEXT_MASKING_CHAR)};function getTextContent(e,t,r){var n;var i=(n=e.parentElement)===null||n===void 0?void 0:n.tagName;var s=e.textContent||"";if(t&&!s.trim()){return}var a=r;var o=i==="SCRIPT";if(o){s=CENSORED_STRING_MARK}else if(a===NodePrivacyLevel.HIDDEN){s=CENSORED_STRING_MARK}else if(shouldMaskNode(e,a)){if(i==="DATALIST"||i==="SELECT"||i==="OPTGROUP"){if(!s.trim()){return}}else if(i==="OPTION"){s=CENSORED_STRING_MARK}else{s=censorText(s)}}return s}function shouldIgnoreElement(e){if(e.nodeName==="SCRIPT"){return true}if(e.nodeName==="LINK"){var t=i("rel");return/preload|prefetch/i.test(t)&&i("as")==="script"||t==="shortcut icon"||t==="icon"}if(e.nodeName==="META"){var r=i("name");var t=i("rel");var n=i("property");return/^msapplication-tile(image|color)$/.test(r)||r==="application-name"||t==="icon"||t==="apple-touch-icon"||t==="shortcut icon"||r==="keywords"||r==="description"||/^(og|twitter|fb):/.test(n)||/^(og|twitter):/.test(r)||r==="pinterest"||r==="robots"||r==="googlebot"||r==="bingbot"||e.hasAttribute("http-equiv")||r==="author"||r==="generator"||r==="framework"||r==="publisher"||r==="progid"||/^article:/.test(n)||/^product:/.test(n)||r==="google-site-verification"||r==="yandex-verification"||r==="csrf-token"||r==="p:domain_verify"||r==="verify-v1"||r==="verification"||r==="shopify-checkout-api-token"}function i(t){return(e.getAttribute(t)||"").toLowerCase()}return false}var serializedNodeIds=new WeakMap;function hasSerializedNode(e){return serializedNodeIds.has(e)}function nodeAndAncestorsHaveSerializedNode(e){var t=e;while(t){if(!hasSerializedNode(t)&&!isNodeShadowRoot(t)){return false}t=getParentNode(t)}return true}function getSerializedNodeId(e){return serializedNodeIds.get(e)}function setSerializedNodeId(e,t){serializedNodeIds.set(e,t)}function getElementInputValue(e,t){var r=e.tagName;var n=e.value;if(shouldMaskNode(e,t)){var i=e.type;if(r==="INPUT"&&(i==="button"||i==="submit"||i==="reset")){return n}else if(!n||r==="OPTION"){return}return CENSORED_STRING_MARK}if(r==="OPTION"||r==="SELECT"){return e.value}if(r!=="INPUT"&&r!=="TEXTAREA"){return}return n}var URL_IN_CSS_REF=/url\((?:(')([^']*)'|(")([^"]*)"|([^)]*))\)/gm;var ABSOLUTE_URL=/^[A-Za-z]+:|^\/\//;var DATA_URI=/^data:.*,/i;function switchToAbsoluteUrl(e,t){return e.replace(URL_IN_CSS_REF,(function(e,r,n,i,s,a){var o=n||s||a;if(!t||!o||ABSOLUTE_URL.test(o)||DATA_URI.test(o)){return e}var f=r||i||"";return"url(".concat(f).concat(makeUrlAbsolute(o,t)).concat(f,")")}))}function makeUrlAbsolute(e,t){try{return buildUrl(e,t).href}catch(t){return e}}var TAG_NAME_REGEX=/[^a-z1-6-_]/;function getValidTagName(e){var t=e.toLowerCase().trim();if(TAG_NAME_REGEX.test(t)){return"div"}return t}function serializeStyleSheets(e){if(e===undefined||e.length===0){return undefined}return e.map((function(e){var t=e.cssRules||e.rules;var r=Array.from(t,(function(e){return e.cssText}));var n={cssRules:r,disabled:e.disabled||undefined,media:e.media.length>0?Array.from(e.media):undefined};return n}))}function serializeAttribute(e,t,r,n){if(t===NodePrivacyLevel.HIDDEN){return null}var i=e.getAttribute(r);if(t===NodePrivacyLevel.MASK&&r!==PRIVACY_ATTR_NAME&&!STABLE_ATTRIBUTES.includes(r)&&r!==n.actionNameAttribute){var s=e.tagName;switch(r){case"title":case"alt":case"placeholder":return CENSORED_STRING_MARK}if(s==="IMG"||s==="SOURCE"){if(r==="src"||r==="srcset"){return CENSORED_IMG_MARK}}if(s==="A"&&r==="href"){return CENSORED_STRING_MARK}if(i&&startsWith(r,"data-")){return CENSORED_STRING_MARK}}if(!i||typeof i!=="string"){return i}if(i.length>MAX_ATTRIBUTE_VALUE_CHAR_LENGTH&&i.slice(0,5)==="data:"){return"data:truncated"}return i}function serializeAttributes(e,t,r){var n;if(t===NodePrivacyLevel.HIDDEN){return{}}var i={};var s=getValidTagName(e.tagName);var a=e.ownerDocument;for(var o=0;o<e.attributes.length;o+=1){var f=e.attributes.item(o);var c=f.name;var u=serializeAttribute(e,t,c,r.configuration);if(u!==null){i[c]=u}}if(e.value&&(s==="textarea"||s==="select"||s==="option"||s==="input")){var l=getElementInputValue(e,t);if(l!==undefined){i.value=l}}if(s==="option"&&t===NodePrivacyLevel.ALLOW){var h=e;if(h.selected){i.selected=h.selected}}if(s==="link"){var d=Array.from(a.styleSheets).find((function(t){return t.href===e.href}));var p=getCssRulesString(d);if(p&&d&&!isExperimentalFeatureEnabled(ExperimentalFeature.DISABLE_REPLAY_INLINE_CSS)){i._cssText=p}}if(s==="style"&&e.sheet){var p=getCssRulesString(e.sheet);if(p){i._cssText=p}}var y=e;if(s==="input"&&(y.type==="radio"||y.type==="checkbox")){if(t===NodePrivacyLevel.ALLOW){i.checked=!!y.checked}else if(shouldMaskNode(y,t)){delete i.checked}}if(s==="audio"||s==="video"){var m=e;i.rr_mediaState=m.paused?"paused":"played"}var g;var b;var A=r.serializationContext;switch(A.status){case 0:g=Math.round(e.scrollTop);b=Math.round(e.scrollLeft);if(g||b){A.elementsScrollPositions.set(e,{scrollTop:g,scrollLeft:b})}break;case 1:if(A.elementsScrollPositions.has(e)){n=A.elementsScrollPositions.get(e),g=n.scrollTop,b=n.scrollLeft}break}if(b){i.rr_scrollLeft=b}if(g){i.rr_scrollTop=g}return i}function getCssRulesString(e){if(!e){return null}var t;try{t=e.rules||e.cssRules}catch(e){}if(!t){return null}var r=Array.from(t,isSafari()?getCssRuleStringForSafari:getCssRuleString).join("");return switchToAbsoluteUrl(r,e.href)}function getCssRuleStringForSafari(e){if(isCSSStyleRule(e)&&e.selectorText.includes(":")){var t=/(\[[\w-]+[^\\])(:[^\]]+\])/g;return e.cssText.replace(t,"$1\\$2")}return getCssRuleString(e)}function getCssRuleString(e){return isCSSImportRule(e)&&getCssRulesString(e.styleSheet)||e.cssText}function isCSSImportRule(e){return"styleSheet"in e}function isCSSStyleRule(e){return"selectorText"in e}function serializeNodeWithId(e,t){var r=serializeNode(e,t);if(!r){return null}var n=getSerializedNodeId(e)||generateNextId();var i=r;i.id=n;setSerializedNodeId(e,n);if(t.serializedNodeIds){t.serializedNodeIds.add(n)}return i}var _nextId=1;function generateNextId(){return _nextId++}function serializeChildNodes(e,t){var r=[];forEachChildNodes(e,(function(e){var n=serializeNodeWithId(e,t);if(n){r.push(n)}}));return r}function serializeNode(e,t){switch(e.nodeType){case e.DOCUMENT_NODE:return serializeDocumentNode(e,t);case e.DOCUMENT_FRAGMENT_NODE:return serializeDocumentFragmentNode(e,t);case e.DOCUMENT_TYPE_NODE:return serializeDocumentTypeNode(e);case e.ELEMENT_NODE:return serializeElementNode(e,t);case e.TEXT_NODE:return serializeTextNode(e,t);case e.CDATA_SECTION_NODE:return serializeCDataNode()}}function serializeDocumentNode(e,t){return{type:NodeType.Document,childNodes:serializeChildNodes(e,t),adoptedStyleSheets:serializeStyleSheets(e.adoptedStyleSheets)}}function serializeDocumentFragmentNode(e,t){var r=isNodeShadowRoot(e);if(r){t.serializationContext.shadowRootsController.addShadowRoot(e)}return{type:NodeType.DocumentFragment,childNodes:serializeChildNodes(e,t),isShadowRoot:r,adoptedStyleSheets:r?serializeStyleSheets(e.adoptedStyleSheets):undefined}}function serializeDocumentTypeNode(e){return{type:NodeType.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId}}function serializeElementNode(e,t){var r;var n=getValidTagName(e.tagName);var i=isSVGElement(e)||undefined;var s=reducePrivacyLevel(getNodeSelfPrivacyLevel(e),t.parentNodePrivacyLevel);if(s===NodePrivacyLevel.HIDDEN){var a=e.getBoundingClientRect(),o=a.width,f=a.height;return{type:NodeType.Element,tagName:n,attributes:(r={rr_width:"".concat(o,"px"),rr_height:"".concat(f,"px")},r[PRIVACY_ATTR_NAME]=PRIVACY_ATTR_VALUE_HIDDEN,r),childNodes:[],isSVG:i}}if(s===NodePrivacyLevel.IGNORE){return}var c=serializeAttributes(e,s,t);var u=[];if(hasChildNodes(e)&&n!=="style"){var l=void 0;if(t.parentNodePrivacyLevel===s&&t.ignoreWhiteSpace===(n==="head")){l=t}else{l=assign$4({},t,{parentNodePrivacyLevel:s,ignoreWhiteSpace:n==="head"})}u=serializeChildNodes(e,l)}return{type:NodeType.Element,tagName:n,attributes:c,childNodes:u,isSVG:i}}function isSVGElement(e){return e.tagName==="svg"||e instanceof SVGElement}function serializeTextNode(e,t){var r=getTextContent(e,t.ignoreWhiteSpace||false,t.parentNodePrivacyLevel);if(r===undefined){return}return{type:NodeType.Text,textContent:r}}function serializeCDataNode(){return{type:NodeType.CDATA,textContent:""}}function serializeDocument(e,t,r){return serializeNodeWithId(e,{serializationContext:r,parentNodePrivacyLevel:t.defaultPrivacyLevel,configuration:t})}function isTouchEvent(e){return Boolean(e.changedTouches)}function getEventTarget(e){if(e.composed===true&&isNodeShadowHost(e.target)){return e.composedPath()[0]}return e.target}var TOLERANCE=25;function isVisualViewportFactoredIn(e){return Math.abs(e.pageTop-e.offsetTop-window.scrollY)>TOLERANCE||Math.abs(e.pageLeft-e.offsetLeft-window.scrollX)>TOLERANCE}var convertMouseEventToLayoutCoordinates=function(e,t){var r=window.visualViewport;var n={layoutViewportX:e,layoutViewportY:t,visualViewportX:e,visualViewportY:t};if(!r){return n}else if(isVisualViewportFactoredIn(r)){n.layoutViewportX=Math.round(e+r.offsetLeft);n.layoutViewportY=Math.round(t+r.offsetTop)}else{n.visualViewportX=Math.round(e-r.offsetLeft);n.visualViewportY=Math.round(t-r.offsetTop)}return n};var getVisualViewport=function(e){return{scale:e.scale,offsetLeft:e.offsetLeft,offsetTop:e.offsetTop,pageLeft:e.pageLeft,pageTop:e.pageTop,height:e.height,width:e.width}};var MOUSE_MOVE_OBSERVER_THRESHOLD=50;function initMoveObserver(e,t){var r=throttle((function(e){var r=getEventTarget(e);if(hasSerializedNode(r)){var n=tryToComputeCoordinates(e);if(!n){return}var i={id:getSerializedNodeId(r),timeOffset:0,x:n.x,y:n.y};t([i],isTouchEvent(e)?IncrementalSource.TouchMove:IncrementalSource.MouseMove)}}),MOUSE_MOVE_OBSERVER_THRESHOLD,{trailing:false}).throttled;return addEventListeners(e,document,[DOM_EVENT.MOUSE_MOVE,DOM_EVENT.TOUCH_MOVE],r,{capture:true,passive:true}).stop}function tryToComputeCoordinates(e){var t=isTouchEvent(e)?e.changedTouches[0]:e,r=t.clientX,n=t.clientY;if(window.visualViewport){var i=convertMouseEventToLayoutCoordinates(r,n),s=i.visualViewportX,a=i.visualViewportY;r=s;n=a}if(!Number.isFinite(r)||!Number.isFinite(n)){if(e.isTrusted){addTelemetryDebug("mouse/touch event without x/y")}return undefined}return{x:r,y:n}}var SCROLL_OBSERVER_THRESHOLD=100;function initScrollObserver(e,t,r,n){var i=throttle((function(e){var i=getEventTarget(e);if(!i||getNodePrivacyLevel(i,r)===NodePrivacyLevel.HIDDEN||!hasSerializedNode(i)){return}var s=getSerializedNodeId(i);var a=i===document?{scrollTop:getScrollY(),scrollLeft:getScrollX()}:{scrollTop:Math.round(i.scrollTop),scrollLeft:Math.round(i.scrollLeft)};n.set(i,a);t({id:s,x:a.scrollLeft,y:a.scrollTop})}),SCROLL_OBSERVER_THRESHOLD).throttled;return addEventListener$1(e,document,DOM_EVENT.SCROLL,i,{capture:true,passive:true}).stop}var _a$y;var eventTypeToMouseInteraction=(_a$y={},_a$y[DOM_EVENT.POINTER_UP]=MouseInteractionType.MouseUp,_a$y[DOM_EVENT.MOUSE_DOWN]=MouseInteractionType.MouseDown,_a$y[DOM_EVENT.CLICK]=MouseInteractionType.Click,_a$y[DOM_EVENT.CONTEXT_MENU]=MouseInteractionType.ContextMenu,_a$y[DOM_EVENT.DBL_CLICK]=MouseInteractionType.DblClick,_a$y[DOM_EVENT.FOCUS]=MouseInteractionType.Focus,_a$y[DOM_EVENT.BLUR]=MouseInteractionType.Blur,_a$y[DOM_EVENT.TOUCH_START]=MouseInteractionType.TouchStart,_a$y[DOM_EVENT.TOUCH_END]=MouseInteractionType.TouchEnd,_a$y);function initMouseInteractionObserver(e,t,r){var n=function(n){var i=getEventTarget(n);if(getNodePrivacyLevel(i,e.defaultPrivacyLevel)===NodePrivacyLevel.HIDDEN||!hasSerializedNode(i)){return}var s=getSerializedNodeId(i);var a=eventTypeToMouseInteraction[n.type];var o;if(a!==MouseInteractionType.Blur&&a!==MouseInteractionType.Focus){var f=tryToComputeCoordinates(n);if(!f){return}o={id:s,type:a,x:f.x,y:f.y}}else{o={id:s,type:a}}var c=assign$4({id:r.getIdForEvent(n)},assembleIncrementalSnapshot(IncrementalSource.MouseInteraction,o));t(c)};return addEventListeners(e,document,Object.keys(eventTypeToMouseInteraction),n,{capture:true,passive:true}).stop}function initInputObserver(e,t,r){if(r===void 0){r=document}var n=e.defaultPrivacyLevel;var i=new WeakMap;var s=r!==document;var a=addEventListeners(e,r,s?[DOM_EVENT.CHANGE]:[DOM_EVENT.INPUT,DOM_EVENT.CHANGE],(function(e){var t=getEventTarget(e);if(t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement||t instanceof HTMLSelectElement){c(t)}}),{capture:true,passive:true}).stop;var o;if(!s){var f=[instrumentSetter(HTMLInputElement.prototype,"value",c),instrumentSetter(HTMLInputElement.prototype,"checked",c),instrumentSetter(HTMLSelectElement.prototype,"value",c),instrumentSetter(HTMLTextAreaElement.prototype,"value",c),instrumentSetter(HTMLSelectElement.prototype,"selectedIndex",c)];o=function(){f.forEach((function(e){return e.stop()}))}}else{o=noop$1}return function(){o();a()};function c(e){var t=getNodePrivacyLevel(e,n);if(t===NodePrivacyLevel.HIDDEN){return}var r=e.type;var i;if(r==="radio"||r==="checkbox"){if(shouldMaskNode(e,t)){return}i={isChecked:e.checked}}else{var s=getElementInputValue(e,t);if(s===undefined){return}i={text:s}}u(e,i);var a=e.name;if(r==="radio"&&a&&e.checked){forEach(document.querySelectorAll('input[type="radio"][name="'.concat(cssEscape(a),'"]')),(function(t){if(t!==e){u(t,{isChecked:false})}}))}}function u(e,r){if(!hasSerializedNode(e)){return}var n=i.get(e);if(!n||n.text!==r.text||n.isChecked!==r.isChecked){i.set(e,r);t(assign$4({id:getSerializedNodeId(e)},r))}}}function initStyleSheetObserver(e){function t(e,t){if(e&&hasSerializedNode(e.ownerNode)){t(getSerializedNodeId(e.ownerNode))}}var r=[instrumentMethodAndCallOriginal(CSSStyleSheet.prototype,"insertRule",{before:function(r,n){t(this,(function(t){return e({id:t,adds:[{rule:r,index:n}]})}))}}),instrumentMethodAndCallOriginal(CSSStyleSheet.prototype,"deleteRule",{before:function(r){t(this,(function(t){return e({id:t,removes:[{index:r}]})}))}})];if(typeof CSSGroupingRule!=="undefined"){n(CSSGroupingRule)}else{n(CSSMediaRule);n(CSSSupportsRule)}function n(n){r.push(instrumentMethodAndCallOriginal(n.prototype,"insertRule",{before:function(r,n){var i=this;t(this.parentStyleSheet,(function(t){var s=getPathToNestedCSSRule(i);if(s){s.push(n||0);e({id:t,adds:[{rule:r,index:s}]})}}))}}),instrumentMethodAndCallOriginal(n.prototype,"deleteRule",{before:function(r){var n=this;t(this.parentStyleSheet,(function(t){var i=getPathToNestedCSSRule(n);if(i){i.push(r);e({id:t,removes:[{index:i}]})}}))}}))}return function(){return r.forEach((function(e){return e.stop()}))}}function getPathToNestedCSSRule(e){var t=[];var r=e;while(r.parentRule){var n=Array.from(r.parentRule.cssRules);var i=n.indexOf(r);t.unshift(i);r=r.parentRule}if(!r.parentStyleSheet){return}var s=Array.from(r.parentStyleSheet.cssRules);var a=s.indexOf(r);t.unshift(a);return t}function initMediaInteractionObserver(e,t,r){return addEventListeners(e,document,[DOM_EVENT.PLAY,DOM_EVENT.PAUSE],(function(e){var n=getEventTarget(e);if(!n||getNodePrivacyLevel(n,r)===NodePrivacyLevel.HIDDEN||!hasSerializedNode(n)){return}t({id:getSerializedNodeId(n),type:e.type===DOM_EVENT.PLAY?MediaInteractionType.Play:MediaInteractionType.Pause})}),{capture:true,passive:true}).stop}function initFrustrationObserver(e,t,r){return e.subscribe(10,(function(e){var n,i,s;if(e.rawRumEvent.type==="action"&&e.rawRumEvent.action.type==="click"&&((i=(n=e.rawRumEvent.action.frustration)===null||n===void 0?void 0:n.type)===null||i===void 0?void 0:i.length)&&"events"in e.domainContext&&((s=e.domainContext.events)===null||s===void 0?void 0:s.length)){t({timestamp:e.rawRumEvent.date,type:RecordType.FrustrationRecord,data:{frustrationTypes:e.rawRumEvent.action.frustration.type,recordIds:e.domainContext.events.map((function(e){return r.getIdForEvent(e)}))}})}})).unsubscribe}var VISUAL_VIEWPORT_OBSERVER_THRESHOLD=200;function initViewportResizeObserver(e,t){return initViewportObservable(e).subscribe(t).unsubscribe}function initVisualViewportResizeObserver(e,t){var r=window.visualViewport;if(!r){return noop$1}var n=throttle((function(){t(getVisualViewport(r))}),VISUAL_VIEWPORT_OBSERVER_THRESHOLD,{trailing:false}),i=n.throttled,s=n.cancel;var a=addEventListeners(e,r,[DOM_EVENT.RESIZE,DOM_EVENT.SCROLL],i,{capture:true,passive:true}).stop;return function e(){a();s()}}var MUTATION_PROCESS_MAX_DELAY=100;function createMutationBatch(e){var t=noop$1;var r=[];function n(){t();e(r);r=[]}return{addMutations:function(e){if(r.length===0){t=requestIdleCallback(n,{timeout:MUTATION_PROCESS_MAX_DELAY})}r.push.apply(r,e)},flush:n,stop:function(){t()}}}function requestIdleCallback(e,t){if(window.requestIdleCallback&&window.cancelIdleCallback){var r=window.requestIdleCallback(monitor(e),t);return function(){return window.cancelIdleCallback(r)}}var n=window.requestAnimationFrame(monitor(e));return function(){return window.cancelAnimationFrame(n)}}function initMutationObserver(e,t,r,n){var i=getMutationObserverConstructor();if(!i){return{stop:noop$1,flush:noop$1}}var s=createMutationBatch((function(n){processMutations(n.concat(a.takeRecords()),e,t,r)}));var a=new i(monitor(s.addMutations));a.observe(n,{attributeOldValue:true,attributes:true,characterData:true,characterDataOldValue:true,childList:true,subtree:true});return{stop:function(){a.disconnect();s.stop()},flush:function(){s.flush()}}}function processMutations(e,t,r,n){e.filter((function(e){return e.type==="childList"})).forEach((function(e){e.removedNodes.forEach((function(e){traverseRemovedShadowDom(e,n.removeShadowRoot)}))}));var i=e.filter((function(e){return e.target.isConnected&&nodeAndAncestorsHaveSerializedNode(e.target)&&getNodePrivacyLevel(e.target,r.defaultPrivacyLevel)!==NodePrivacyLevel.HIDDEN}));var s=processChildListMutations(i.filter((function(e){return e.type==="childList"})),r,n),a=s.adds,o=s.removes,f=s.hasBeenSerialized;var c=processCharacterDataMutations(i.filter((function(e){return e.type==="characterData"&&!f(e.target)})),r);var u=processAttributesMutations(i.filter((function(e){return e.type==="attributes"&&!f(e.target)})),r);if(!c.length&&!u.length&&!o.length&&!a.length){return}t({adds:a,removes:o,texts:c,attributes:u})}function processChildListMutations(e,t,r){var n=new Set;var i=new Map;var s=function(e){e.addedNodes.forEach((function(e){n.add(e)}));e.removedNodes.forEach((function(t){if(!n.has(t)){i.set(t,e.target)}n.delete(t)}))};for(var a=0,o=e;a<o.length;a++){var f=o[a];s(f)}var c=Array.from(n);sortAddedAndMovedNodes(c);var u=new Set;var l=[];for(var h=0,d=c;h<d.length;h++){var p=d[h];if(A(p)){continue}var y=getNodePrivacyLevel(p.parentNode,t.defaultPrivacyLevel);if(y===NodePrivacyLevel.HIDDEN||y===NodePrivacyLevel.IGNORE){continue}var m=serializeNodeWithId(p,{serializedNodeIds:u,parentNodePrivacyLevel:y,serializationContext:{status:2,shadowRootsController:r},configuration:t});if(!m){continue}var g=getParentNode(p);l.push({nextId:w(p),parentId:getSerializedNodeId(g),node:m})}var b=[];i.forEach((function(e,t){if(hasSerializedNode(t)){b.push({parentId:getSerializedNodeId(e),id:getSerializedNodeId(t)})}}));return{adds:l,removes:b,hasBeenSerialized:A};function A(e){return hasSerializedNode(e)&&u.has(getSerializedNodeId(e))}function w(e){var t=e.nextSibling;while(t){if(hasSerializedNode(t)){return getSerializedNodeId(t)}t=t.nextSibling}return null}}function processCharacterDataMutations(e,t){var r;var n=[];var i=new Set;var s=e.filter((function(e){if(i.has(e.target)){return false}i.add(e.target);return true}));for(var a=0,o=s;a<o.length;a++){var f=o[a];var c=f.target.textContent;if(c===f.oldValue){continue}var u=getNodePrivacyLevel(getParentNode(f.target),t.defaultPrivacyLevel);if(u===NodePrivacyLevel.HIDDEN||u===NodePrivacyLevel.IGNORE){continue}n.push({id:getSerializedNodeId(f.target),value:(r=getTextContent(f.target,false,u))!==null&&r!==void 0?r:null})}return n}function processAttributesMutations(e,t){var r=[];var n=new Map;var i=e.filter((function(e){var t=n.get(e.target);if(t===null||t===void 0?void 0:t.has(e.attributeName)){return false}if(!t){n.set(e.target,new Set([e.attributeName]))}else{t.add(e.attributeName)}return true}));var s=new Map;for(var a=0,o=i;a<o.length;a++){var f=o[a];var c=f.target.getAttribute(f.attributeName);if(c===f.oldValue){continue}var u=getNodePrivacyLevel(f.target,t.defaultPrivacyLevel);var l=serializeAttribute(f.target,u,f.attributeName,t);var h=void 0;if(f.attributeName==="value"){var d=getElementInputValue(f.target,u);if(d===undefined){continue}h=d}else if(typeof l==="string"){h=l}else{h=null}var p=s.get(f.target);if(!p){p={id:getSerializedNodeId(f.target),attributes:{}};r.push(p);s.set(f.target,p)}p.attributes[f.attributeName]=h}return r}function sortAddedAndMovedNodes(e){e.sort((function(e,t){var r=e.compareDocumentPosition(t);if(r&Node.DOCUMENT_POSITION_CONTAINED_BY){return-1}else if(r&Node.DOCUMENT_POSITION_CONTAINS){return 1}else if(r&Node.DOCUMENT_POSITION_FOLLOWING){return 1}else if(r&Node.DOCUMENT_POSITION_PRECEDING){return-1}return 0}))}function traverseRemovedShadowDom(e,t){if(isNodeShadowHost(e)){t(e.shadowRoot)}forEachChildNodes(e,(function(e){return traverseRemovedShadowDom(e,t)}))}function initFocusObserver(e,t){return addEventListeners(e,window,[DOM_EVENT.FOCUS,DOM_EVENT.BLUR],(function(){t({has_focus:document.hasFocus()})})).stop}function initRecordIds(){var e=new WeakMap;var t=1;return{getIdForEvent:function(r){if(!e.has(r)){e.set(r,t++)}return e.get(r)}}}function initObservers(e,t){var r=initRecordIds();var n=initMutationObserver(t.mutationCb,t.configuration,t.shadowRootsController,document);var i=initMoveObserver(e,t.mousemoveCb);var s=initMouseInteractionObserver(e,t.mouseInteractionCb,r);var a=initScrollObserver(e,t.scrollCb,t.configuration.defaultPrivacyLevel,t.elementsScrollPositions);var o=initViewportResizeObserver(e,t.viewportResizeCb);var f=initInputObserver(e,t.inputCb);var c=initMediaInteractionObserver(e,t.mediaInteractionCb,t.configuration.defaultPrivacyLevel);var u=initStyleSheetObserver(t.styleSheetCb);var l=initFocusObserver(e,t.focusCb);var h=initVisualViewportResizeObserver(e,t.visualViewportResizeCb);var d=initFrustrationObserver(t.lifeCycle,t.frustrationCb,r);return{flush:function(){n.flush()},stop:function(){n.stop();i();s();a();o();f();c();u();l();h();d()}}}function createElementsScrollPositions(){var e=new WeakMap;return{set:function(t,r){if(t===document&&!document.scrollingElement){return}e.set(t===document?document.scrollingElement:t,r)},get:function(t){return e.get(t)},has:function(t){return e.has(t)}}}var initShadowRootsController=function(e,t){var r=t.mutationCb,n=t.inputCb;var i=new Map;var s={addShadowRoot:function(t){if(i.has(t)){return}var a=initMutationObserver(r,e,s,t),o=a.stop,f=a.flush;var c=initInputObserver(e,n,t);i.set(t,{flush:f,stop:function(){o();c()}})},removeShadowRoot:function(e){var t=i.get(e);if(!t){return}t.stop();i.delete(e)},stop:function(){i.forEach((function(e){var t=e.stop;return t()}))},flush:function(){i.forEach((function(e){var t=e.flush;return t()}))}};return s};function record(e){var t=e.emit,r=e.configuration;if(!t){throw new Error("emit function is required")}var n=createElementsScrollPositions();var i=function(e){t(assembleIncrementalSnapshot(IncrementalSource.Mutation,e))};var s=function(e){return t(assembleIncrementalSnapshot(IncrementalSource.Input,e))};var a=initShadowRootsController(r,{mutationCb:i,inputCb:s});var o=function(e,i){if(e===void 0){e=timeStampNow()}if(i===void 0){i={status:0,elementsScrollPositions:n,shadowRootsController:a}}var s=getViewportDimension(),o=s.width,f=s.height;t({data:{height:f,href:window.location.href,width:o},type:RecordType.Meta,timestamp:e});t({data:{has_focus:document.hasFocus()},type:RecordType.Focus,timestamp:e});t({data:{node:serializeDocument(document,r,i),initialOffset:{left:getScrollX(),top:getScrollY()}},type:RecordType.FullSnapshot,timestamp:e});if(window.visualViewport){t({data:getVisualViewport(window.visualViewport),type:RecordType.VisualViewport,timestamp:e})}};o();var f=initObservers(r,{lifeCycle:e.lifeCycle,configuration:r,elementsScrollPositions:n,inputCb:s,mediaInteractionCb:function(e){return t(assembleIncrementalSnapshot(IncrementalSource.MediaInteraction,e))},mouseInteractionCb:function(e){return t(e)},mousemoveCb:function(e,r){return t(assembleIncrementalSnapshot(r,{positions:e}))},mutationCb:i,scrollCb:function(e){return t(assembleIncrementalSnapshot(IncrementalSource.Scroll,e))},styleSheetCb:function(e){return t(assembleIncrementalSnapshot(IncrementalSource.StyleSheetRule,e))},viewportResizeCb:function(e){return t(assembleIncrementalSnapshot(IncrementalSource.ViewportResize,e))},frustrationCb:function(e){return t(e)},focusCb:function(e){return t({data:e,type:RecordType.Focus,timestamp:timeStampNow()})},visualViewportResizeCb:function(e){t({data:e,type:RecordType.VisualViewport,timestamp:timeStampNow()})},shadowRootsController:a}),c=f.stop,u=f.flush;function l(){a.flush();u()}return{stop:function(){a.stop();c()},takeSubsequentFullSnapshot:function(e){l();o(e,{shadowRootsController:a,status:1,elementsScrollPositions:n})},flushMutations:l,shadowRootsController:a}}function buildReplayPayload(e,t,r){var n=new FormData;n.append("segment",new Blob([e],{type:"application/octet-stream"}),"".concat(t.session.id,"-").concat(t.start));var i=assign$4({raw_segment_size:r,compressed_segment_size:e.byteLength},t);var s=JSON.stringify(i);n.append("event",new Blob([s],{type:"application/json"}));return{data:n,bytesCount:e.byteLength}}var MAX_STATS_HISTORY=10;var statsPerView;function getSegmentsCount(e){return getOrCreateReplayStats(e).segments_count}function addSegment(e){getOrCreateReplayStats(e).segments_count+=1}function addRecord(e){getOrCreateReplayStats(e).records_count+=1}function addWroteData(e,t){getOrCreateReplayStats(e).segments_total_raw_size+=t}function getReplayStats(e){return statsPerView===null||statsPerView===void 0?void 0:statsPerView.get(e)}function getOrCreateReplayStats(e){if(!statsPerView){statsPerView=new Map}var t;if(statsPerView.has(e)){t=statsPerView.get(e)}else{t={records_count:0,segments_count:0,segments_total_raw_size:0};statsPerView.set(e,t);if(statsPerView.size>MAX_STATS_HISTORY){deleteOldestStats()}}return t}function deleteOldestStats(){if(!statsPerView){return}if(statsPerView.keys){statsPerView.delete(statsPerView.keys().next().value)}else{var e=true;statsPerView.forEach((function(t,r){if(e){statsPerView.delete(r);e=false}}))}}var Segment=function(){function e(e,t,r){this.encoder=e;this.encodedBytesCount=0;var n=t.view.id;this.metadata=assign$4({start:Infinity,end:-Infinity,creation_reason:r,records_count:0,has_full_snapshot:false,index_in_view:getSegmentsCount(n),source:"browser"},t);addSegment(n)}e.prototype.addRecord=function(e,t){var r=this;var n;this.metadata.start=Math.min(this.metadata.start,e.timestamp);this.metadata.end=Math.max(this.metadata.end,e.timestamp);this.metadata.records_count+=1;(n=this.metadata).has_full_snapshot||(n.has_full_snapshot=e.type===RecordType.FullSnapshot);sendToExtension("record",{record:e,segment:this.metadata});addRecord(this.metadata.view.id);var i=this.encoder.isEmpty?'{"records":[':",";this.encoder.write(i+JSON.stringify(e),(function(e){r.encodedBytesCount+=e;t(r.encodedBytesCount)}))};e.prototype.flush=function(e){var t=this;if(this.encoder.isEmpty){throw new Error("Empty segment flushed")}this.encoder.write("],".concat(JSON.stringify(this.metadata).slice(1),"\n"));this.encoder.finish((function(r){addWroteData(t.metadata.view.id,r.rawBytesCount);e(t.metadata,r)}))};return e}();var SEGMENT_DURATION_LIMIT=30*ONE_SECOND;var SEGMENT_BYTES_LIMIT=6e4;function startSegmentCollection(e,t,r,n,i,s){return doStartSegmentCollection(e,(function(){return computeSegmentContext(t.applicationId,r,n)}),i,s)}function doStartSegmentCollection(e,t,r,n){var i={status:0,nextSegmentCreationReason:"init"};var s=e.subscribe(2,(function(){o("view_change")})).unsubscribe;var a=e.subscribe(9,(function(e){o(e.reason)})).unsubscribe;function o(e){if(i.status===1){i.segment.flush((function(t,n){var i=buildReplayPayload(n.output,t,n.rawBytesCount);if(isPageExitReason(e)){r.sendOnExit(i)}else{r.send(i)}}));clearTimeout$1(i.expirationTimeoutId)}if(e!=="stop"){i={status:0,nextSegmentCreationReason:e}}else{i={status:2}}}return{addRecord:function(e){if(i.status===2){return}if(i.status===0){var r=t();if(!r){return}i={status:1,segment:new Segment(n,r,i.nextSegmentCreationReason),expirationTimeoutId:setTimeout$1((function(){o("segment_duration_limit")}),SEGMENT_DURATION_LIMIT)}}i.segment.addRecord(e,(function(e){if(e>SEGMENT_BYTES_LIMIT){o("segment_bytes_limit")}}))},stop:function(){o("stop");s();a()}}}function computeSegmentContext(e,t,r){var n=t.findTrackedSession();var i=r.findView();if(!n||!i){return undefined}return{application:{id:e},session:{id:n.id},view:{id:i.id}}}function startRecording(e,t,r,n,i,s){var a=function(t){e.notify(12,{error:t});addTelemetryDebug("Error reported to customer",{"error.message":t.message})};var o=s||createHttpRequest(t,t.sessionReplayEndpointBuilder,SEGMENT_BYTES_LIMIT,a);var f=startSegmentCollection(e,t,r,n,o,i),c=f.addRecord,u=f.stop;var l=record({emit:c,configuration:t,lifeCycle:e}),h=l.stop,d=l.takeSubsequentFullSnapshot,p=l.flushMutations;var y=e.subscribe(4,(function(){p();c({timestamp:timeStampNow(),type:RecordType.ViewEnd})})).unsubscribe;var m=e.subscribe(2,(function(e){d(e.startClocks.timeStamp)})).unsubscribe;return{stop:function(){y();m();h();u()}}}function isBrowserSupported(){return typeof Array.from==="function"&&typeof CSSSupportsRule==="function"&&typeof URL.createObjectURL==="function"&&"forEach"in NodeList.prototype}function getSessionReplayLink(e,t,r,n){var i=t.findTrackedSession();var s=getErrorType(i,n);var a=r.findView();return getSessionReplayUrl(e,{viewContext:a,errorType:s,session:i})}function getErrorType(e,t){if(!isBrowserSupported()){return"browser-not-supported"}if(!e){return"rum-not-tracked"}if(!e.sessionReplayAllowed){return"incorrect-session-plan"}if(!t){return"replay-not-started"}}function createDeflateEncoder(e,t,r){var n=0;var i=[];var s;var a=0;var o=[];var f=addEventListener$1(e,t,"message",(function(e){var t=e.data;if(t.type!=="wrote"||t.streamId!==r){return}n+=t.additionalBytesCount;i.push(t.result);s=t.trailer;var a=o.shift();if(a&&a.id===t.id){if(a.writeCallback){a.writeCallback(t.result.byteLength)}else if(a.finishCallback){a.finishCallback()}}else{f();addTelemetryDebug("Worker responses received out of order.")}})).stop;function c(){var e=i.length===0?new Uint8Array(0):concatBuffers(i.concat(s));var t={rawBytesCount:n,output:e,outputBytesCount:e.byteLength,encoding:"deflate"};n=0;i=[];return t}function u(){if(a>0){t.postMessage({action:"reset",streamId:r});a=0}}return{isAsync:true,get isEmpty(){return a===0},write:function(e,n){t.postMessage({action:"write",id:a,data:e,streamId:r});o.push({id:a,writeCallback:n,data:e});a+=1},finish:function(e){u();if(!o.length){e(c())}else{o.forEach((function(e){delete e.writeCallback}));o[o.length-1].finishCallback=function(){return e(c())}}},finishSync:function(){u();var e=o.map((function(e){delete e.writeCallback;delete e.finishCallback;return e.data})).join("");return assign$4(c(),{pendingData:e})},estimateEncodedBytesCount:function(e){return e.length/8},stop:function(){f()}}}var INITIALIZATION_TIME_OUT_DELAY=10*ONE_SECOND;function createDeflateWorker(e){return new Worker(e.workerUrl||URL.createObjectURL(new Blob(['!function(){"use strict";function t(t){for(var e=t.reduce((function(t,e){return t+e.length}),0),a=new Uint8Array(e),n=0,r=0,i=t;r<i.length;r++){var s=i[r];a.set(s,n),n+=s.length}return a}function e(t){for(var e=t.length;--e>=0;)t[e]=0}var a=256,n=286,r=30,i=15,s=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),_=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),h=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),l=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),o=new Array(576);e(o);var d=new Array(60);e(d);var u=new Array(512);e(u);var f=new Array(256);e(f);var c=new Array(29);e(c);var p,g,w,v=new Array(r);function b(t,e,a,n,r){this.static_tree=t,this.extra_bits=e,this.extra_base=a,this.elems=n,this.max_length=r,this.has_stree=t&&t.length}function m(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}e(v);var y=function(t){return t<256?u[t]:u[256+(t>>>7)]},k=function(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255},z=function(t,e,a){t.bi_valid>16-a?(t.bi_buf|=e<<t.bi_valid&65535,k(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=a-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=a)},x=function(t,e,a){z(t,a[2*e],a[2*e+1])},A=function(t,e){var a=0;do{a|=1&t,t>>>=1,a<<=1}while(--e>0);return a>>>1},E=function(t,e,a){var n,r,s=new Array(16),_=0;for(n=1;n<=i;n++)s[n]=_=_+a[n-1]<<1;for(r=0;r<=e;r++){var h=t[2*r+1];0!==h&&(t[2*r]=A(s[h]++,h))}},Z=function(t){var e;for(e=0;e<n;e++)t.dyn_ltree[2*e]=0;for(e=0;e<r;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0},U=function(t){t.bi_valid>8?k(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},S=function(t,e,a,n){var r=2*e,i=2*a;return t[r]<t[i]||t[r]===t[i]&&n[e]<=n[a]},R=function(t,e,a){for(var n=t.heap[a],r=a<<1;r<=t.heap_len&&(r<t.heap_len&&S(e,t.heap[r+1],t.heap[r],t.depth)&&r++,!S(e,n,t.heap[r],t.depth));)t.heap[a]=t.heap[r],a=r,r<<=1;t.heap[a]=n},L=function(t,e,n){var r,i,h,l,o=0;if(0!==t.last_lit)do{r=t.pending_buf[t.d_buf+2*o]<<8|t.pending_buf[t.d_buf+2*o+1],i=t.pending_buf[t.l_buf+o],o++,0===r?x(t,i,e):(h=f[i],x(t,h+a+1,e),0!==(l=s[h])&&(i-=c[h],z(t,i,l)),r--,h=y(r),x(t,h,n),0!==(l=_[h])&&(r-=v[h],z(t,r,l)))}while(o<t.last_lit);x(t,256,e)},F=function(t,e){var a,n,r,s=e.dyn_tree,_=e.stat_desc.static_tree,h=e.stat_desc.has_stree,l=e.stat_desc.elems,o=-1;for(t.heap_len=0,t.heap_max=573,a=0;a<l;a++)0!==s[2*a]?(t.heap[++t.heap_len]=o=a,t.depth[a]=0):s[2*a+1]=0;for(;t.heap_len<2;)s[2*(r=t.heap[++t.heap_len]=o<2?++o:0)]=1,t.depth[r]=0,t.opt_len--,h&&(t.static_len-=_[2*r+1]);for(e.max_code=o,a=t.heap_len>>1;a>=1;a--)R(t,s,a);r=l;do{a=t.heap[1],t.heap[1]=t.heap[t.heap_len--],R(t,s,1),n=t.heap[1],t.heap[--t.heap_max]=a,t.heap[--t.heap_max]=n,s[2*r]=s[2*a]+s[2*n],t.depth[r]=(t.depth[a]>=t.depth[n]?t.depth[a]:t.depth[n])+1,s[2*a+1]=s[2*n+1]=r,t.heap[1]=r++,R(t,s,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var a,n,r,s,_,h,l=e.dyn_tree,o=e.max_code,d=e.stat_desc.static_tree,u=e.stat_desc.has_stree,f=e.stat_desc.extra_bits,c=e.stat_desc.extra_base,p=e.stat_desc.max_length,g=0;for(s=0;s<=i;s++)t.bl_count[s]=0;for(l[2*t.heap[t.heap_max]+1]=0,a=t.heap_max+1;a<573;a++)(s=l[2*l[2*(n=t.heap[a])+1]+1]+1)>p&&(s=p,g++),l[2*n+1]=s,n>o||(t.bl_count[s]++,_=0,n>=c&&(_=f[n-c]),h=l[2*n],t.opt_len+=h*(s+_),u&&(t.static_len+=h*(d[2*n+1]+_)));if(0!==g){do{for(s=p-1;0===t.bl_count[s];)s--;t.bl_count[s]--,t.bl_count[s+1]+=2,t.bl_count[p]--,g-=2}while(g>0);for(s=p;0!==s;s--)for(n=t.bl_count[s];0!==n;)(r=t.heap[--a])>o||(l[2*r+1]!==s&&(t.opt_len+=(s-l[2*r+1])*l[2*r],l[2*r+1]=s),n--)}}(t,e),E(s,o,t.bl_count)},T=function(t,e,a){var n,r,i=-1,s=e[1],_=0,h=7,l=4;for(0===s&&(h=138,l=3),e[2*(a+1)+1]=65535,n=0;n<=a;n++)r=s,s=e[2*(n+1)+1],++_<h&&r===s||(_<l?t.bl_tree[2*r]+=_:0!==r?(r!==i&&t.bl_tree[2*r]++,t.bl_tree[32]++):_<=10?t.bl_tree[34]++:t.bl_tree[36]++,_=0,i=r,0===s?(h=138,l=3):r===s?(h=6,l=3):(h=7,l=4))},I=function(t,e,a){var n,r,i=-1,s=e[1],_=0,h=7,l=4;for(0===s&&(h=138,l=3),n=0;n<=a;n++)if(r=s,s=e[2*(n+1)+1],!(++_<h&&r===s)){if(_<l)do{x(t,r,t.bl_tree)}while(0!=--_);else 0!==r?(r!==i&&(x(t,r,t.bl_tree),_--),x(t,16,t.bl_tree),z(t,_-3,2)):_<=10?(x(t,17,t.bl_tree),z(t,_-3,3)):(x(t,18,t.bl_tree),z(t,_-11,7));_=0,i=r,0===s?(h=138,l=3):r===s?(h=6,l=3):(h=7,l=4)}},N=!1,O=function(t,e,a,n){z(t,0+(n?1:0),3),function(t,e,a,n){U(t),n&&(k(t,a),k(t,~a)),t.pending_buf.set(t.window.subarray(e,e+a),t.pending),t.pending+=a}(t,e,a,!0)},D=function(t,e,n,r){var i,s,_=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<a;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0}(t)),F(t,t.l_desc),F(t,t.d_desc),_=function(t){var e;for(T(t,t.dyn_ltree,t.l_desc.max_code),T(t,t.dyn_dtree,t.d_desc.max_code),F(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*l[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),i=t.opt_len+3+7>>>3,(s=t.static_len+3+7>>>3)<=i&&(i=s)):i=s=n+5,n+4<=i&&-1!==e?O(t,e,n,r):4===t.strategy||s===i?(z(t,2+(r?1:0),3),L(t,o,d)):(z(t,4+(r?1:0),3),function(t,e,a,n){var r;for(z(t,e-257,5),z(t,a-1,5),z(t,n-4,4),r=0;r<n;r++)z(t,t.bl_tree[2*l[r]+1],3);I(t,t.dyn_ltree,e-1),I(t,t.dyn_dtree,a-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,_+1),L(t,t.dyn_ltree,t.dyn_dtree)),Z(t),r&&U(t)},B={_tr_init:function(t){N||(!function(){var t,e,a,l,m,y=new Array(16);for(a=0,l=0;l<28;l++)for(c[l]=a,t=0;t<1<<s[l];t++)f[a++]=l;for(f[a-1]=l,m=0,l=0;l<16;l++)for(v[l]=m,t=0;t<1<<_[l];t++)u[m++]=l;for(m>>=7;l<r;l++)for(v[l]=m<<7,t=0;t<1<<_[l]-7;t++)u[256+m++]=l;for(e=0;e<=i;e++)y[e]=0;for(t=0;t<=143;)o[2*t+1]=8,t++,y[8]++;for(;t<=255;)o[2*t+1]=9,t++,y[9]++;for(;t<=279;)o[2*t+1]=7,t++,y[7]++;for(;t<=287;)o[2*t+1]=8,t++,y[8]++;for(E(o,287,y),t=0;t<r;t++)d[2*t+1]=5,d[2*t]=A(t,5);p=new b(o,s,257,n,i),g=new b(d,_,0,r,i),w=new b(new Array(0),h,0,19,7)}(),N=!0),t.l_desc=new m(t.dyn_ltree,p),t.d_desc=new m(t.dyn_dtree,g),t.bl_desc=new m(t.bl_tree,w),t.bi_buf=0,t.bi_valid=0,Z(t)},_tr_stored_block:O,_tr_flush_block:D,_tr_tally:function(t,e,n){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(f[n]+a+1)]++,t.dyn_dtree[2*y(e)]++),t.last_lit===t.lit_bufsize-1},_tr_align:function(t){z(t,2,3),x(t,256,o),function(t){16===t.bi_valid?(k(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},C=function(t,e,a,n){for(var r=65535&t|0,i=t>>>16&65535|0,s=0;0!==a;){a-=s=a>2e3?2e3:a;do{i=i+(r=r+e[n++]|0)|0}while(--s);r%=65521,i%=65521}return r|i<<16|0},H=new Uint32Array(function(){for(var t,e=[],a=0;a<256;a++){t=a;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[a]=t}return e}()),M=function(t,e,a,n){var r=H,i=n+a;t^=-1;for(var s=n;s<i;s++)t=t>>>8^r[255&(t^e[s])];return-1^t},Y={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},K={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},P=B._tr_init,j=B._tr_stored_block,G=B._tr_flush_block,X=B._tr_tally,W=B._tr_align,q=K.Z_NO_FLUSH,J=K.Z_PARTIAL_FLUSH,Q=K.Z_FULL_FLUSH,V=K.Z_FINISH,$=K.Z_BLOCK,tt=K.Z_OK,et=K.Z_STREAM_END,at=K.Z_STREAM_ERROR,nt=K.Z_DATA_ERROR,rt=K.Z_BUF_ERROR,it=K.Z_DEFAULT_COMPRESSION,st=K.Z_FILTERED,_t=K.Z_HUFFMAN_ONLY,ht=K.Z_RLE,lt=K.Z_FIXED,ot=K.Z_DEFAULT_STRATEGY,dt=K.Z_UNKNOWN,ut=K.Z_DEFLATED,ft=258,ct=262,pt=103,gt=113,wt=666,vt=function(t,e){return t.msg=Y[e],e},bt=function(t){return(t<<1)-(t>4?9:0)},mt=function(t){for(var e=t.length;--e>=0;)t[e]=0},yt=function(t,e,a){return(e<<t.hash_shift^a)&t.hash_mask},kt=function(t){var e=t.state,a=e.pending;a>t.avail_out&&(a=t.avail_out),0!==a&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+a),t.next_out),t.next_out+=a,e.pending_out+=a,t.total_out+=a,t.avail_out-=a,e.pending-=a,0===e.pending&&(e.pending_out=0))},zt=function(t,e){G(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,kt(t.strm)},xt=function(t,e){t.pending_buf[t.pending++]=e},At=function(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e},Et=function(t,e){var a,n,r=t.max_chain_length,i=t.strstart,s=t.prev_length,_=t.nice_match,h=t.strstart>t.w_size-ct?t.strstart-(t.w_size-ct):0,l=t.window,o=t.w_mask,d=t.prev,u=t.strstart+ft,f=l[i+s-1],c=l[i+s];t.prev_length>=t.good_match&&(r>>=2),_>t.lookahead&&(_=t.lookahead);do{if(l[(a=e)+s]===c&&l[a+s-1]===f&&l[a]===l[i]&&l[++a]===l[i+1]){i+=2,a++;do{}while(l[++i]===l[++a]&&l[++i]===l[++a]&&l[++i]===l[++a]&&l[++i]===l[++a]&&l[++i]===l[++a]&&l[++i]===l[++a]&&l[++i]===l[++a]&&l[++i]===l[++a]&&i<u);if(n=ft-(u-i),i=u-ft,n>s){if(t.match_start=e,s=n,n>=_)break;f=l[i+s-1],c=l[i+s]}}}while((e=d[e&o])>h&&0!=--r);return s<=t.lookahead?s:t.lookahead},Zt=function(t){var e,a,n,r,i,s,_,h,l,o,d=t.w_size;do{if(r=t.window_size-t.lookahead-t.strstart,t.strstart>=d+(d-ct)){t.window.set(t.window.subarray(d,d+d),0),t.match_start-=d,t.strstart-=d,t.block_start-=d,e=a=t.hash_size;do{n=t.head[--e],t.head[e]=n>=d?n-d:0}while(--a);e=a=d;do{n=t.prev[--e],t.prev[e]=n>=d?n-d:0}while(--a);r+=d}if(0===t.strm.avail_in)break;if(s=t.strm,_=t.window,h=t.strstart+t.lookahead,l=r,o=void 0,(o=s.avail_in)>l&&(o=l),a=0===o?0:(s.avail_in-=o,_.set(s.input.subarray(s.next_in,s.next_in+o),h),1===s.state.wrap?s.adler=C(s.adler,_,o,h):2===s.state.wrap&&(s.adler=M(s.adler,_,o,h)),s.next_in+=o,s.total_in+=o,o),t.lookahead+=a,t.lookahead+t.insert>=3)for(i=t.strstart-t.insert,t.ins_h=t.window[i],t.ins_h=yt(t,t.ins_h,t.window[i+1]);t.insert&&(t.ins_h=yt(t,t.ins_h,t.window[i+3-1]),t.prev[i&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=i,i++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<ct&&0!==t.strm.avail_in)},Ut=function(t,e){for(var a,n;;){if(t.lookahead<ct){if(Zt(t),t.lookahead<ct&&e===q)return 1;if(0===t.lookahead)break}if(a=0,t.lookahead>=3&&(t.ins_h=yt(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==a&&t.strstart-a<=t.w_size-ct&&(t.match_length=Et(t,a)),t.match_length>=3)if(n=X(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=yt(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=yt(t,t.ins_h,t.window[t.strstart+1]);else n=X(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(zt(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,e===V?(zt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(zt(t,!1),0===t.strm.avail_out)?1:2},St=function(t,e){for(var a,n,r;;){if(t.lookahead<ct){if(Zt(t),t.lookahead<ct&&e===q)return 1;if(0===t.lookahead)break}if(a=0,t.lookahead>=3&&(t.ins_h=yt(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==a&&t.prev_length<t.max_lazy_match&&t.strstart-a<=t.w_size-ct&&(t.match_length=Et(t,a),t.match_length<=5&&(t.strategy===st||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){r=t.strstart+t.lookahead-3,n=X(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=r&&(t.ins_h=yt(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,n&&(zt(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((n=X(t,0,t.window[t.strstart-1]))&&zt(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=X(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,e===V?(zt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(zt(t,!1),0===t.strm.avail_out)?1:2};function Rt(t,e,a,n,r){this.good_length=t,this.max_lazy=e,this.nice_length=a,this.max_chain=n,this.func=r}var Lt=[new Rt(0,0,0,0,(function(t,e){var a=65535;for(a>t.pending_buf_size-5&&(a=t.pending_buf_size-5);;){if(t.lookahead<=1){if(Zt(t),0===t.lookahead&&e===q)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+a;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,zt(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-ct&&(zt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===V?(zt(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(zt(t,!1),t.strm.avail_out),1)})),new Rt(4,4,8,4,Ut),new Rt(4,5,16,8,Ut),new Rt(4,6,32,32,Ut),new Rt(4,4,16,16,St),new Rt(8,16,32,32,St),new Rt(8,16,128,128,St),new Rt(8,32,128,256,St),new Rt(32,128,258,1024,St),new Rt(32,258,258,4096,St)];function Ft(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=ut,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),mt(this.dyn_ltree),mt(this.dyn_dtree),mt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),mt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),mt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var Tt=function(t){if(!t||!t.state)return vt(t,at);t.total_in=t.total_out=0,t.data_type=dt;var e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:gt,t.adler=2===e.wrap?0:1,e.last_flush=q,P(e),tt},It=function(t){var e,a=Tt(t);return a===tt&&((e=t.state).window_size=2*e.w_size,mt(e.head),e.max_lazy_match=Lt[e.level].max_lazy,e.good_match=Lt[e.level].good_length,e.nice_match=Lt[e.level].nice_length,e.max_chain_length=Lt[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0),a},Nt=function(t,e,a,n,r,i){if(!t)return at;var s=1;if(e===it&&(e=6),n<0?(s=0,n=-n):n>15&&(s=2,n-=16),r<1||r>9||a!==ut||n<8||n>15||e<0||e>9||i<0||i>lt)return vt(t,at);8===n&&(n=9);var _=new Ft;return t.state=_,_.strm=t,_.wrap=s,_.gzhead=null,_.w_bits=n,_.w_size=1<<_.w_bits,_.w_mask=_.w_size-1,_.hash_bits=r+7,_.hash_size=1<<_.hash_bits,_.hash_mask=_.hash_size-1,_.hash_shift=~~((_.hash_bits+3-1)/3),_.window=new Uint8Array(2*_.w_size),_.head=new Uint16Array(_.hash_size),_.prev=new Uint16Array(_.w_size),_.lit_bufsize=1<<r+6,_.pending_buf_size=4*_.lit_bufsize,_.pending_buf=new Uint8Array(_.pending_buf_size),_.d_buf=1*_.lit_bufsize,_.l_buf=3*_.lit_bufsize,_.level=e,_.strategy=i,_.method=a,It(t)},Ot={deflateInit:function(t,e){return Nt(t,e,ut,15,8,ot)},deflateInit2:Nt,deflateReset:It,deflateResetKeep:Tt,deflateSetHeader:function(t,e){return t&&t.state?2!==t.state.wrap?at:(t.state.gzhead=e,tt):at},deflate:function(t,e){var a,n;if(!t||!t.state||e>$||e<0)return t?vt(t,at):at;var r=t.state;if(!t.output||!t.input&&0!==t.avail_in||r.status===wt&&e!==V)return vt(t,0===t.avail_out?rt:at);r.strm=t;var i=r.last_flush;if(r.last_flush=e,42===r.status)if(2===r.wrap)t.adler=0,xt(r,31),xt(r,139),xt(r,8),r.gzhead?(xt(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),xt(r,255&r.gzhead.time),xt(r,r.gzhead.time>>8&255),xt(r,r.gzhead.time>>16&255),xt(r,r.gzhead.time>>24&255),xt(r,9===r.level?2:r.strategy>=_t||r.level<2?4:0),xt(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(xt(r,255&r.gzhead.extra.length),xt(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(t.adler=M(t.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69):(xt(r,0),xt(r,0),xt(r,0),xt(r,0),xt(r,0),xt(r,9===r.level?2:r.strategy>=_t||r.level<2?4:0),xt(r,3),r.status=gt);else{var s=ut+(r.w_bits-8<<4)<<8;s|=(r.strategy>=_t||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(s|=32),s+=31-s%31,r.status=gt,At(r,s),0!==r.strstart&&(At(r,t.adler>>>16),At(r,65535&t.adler)),t.adler=1}if(69===r.status)if(r.gzhead.extra){for(a=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>a&&(t.adler=M(t.adler,r.pending_buf,r.pending-a,a)),kt(t),a=r.pending,r.pending!==r.pending_buf_size));)xt(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>a&&(t.adler=M(t.adler,r.pending_buf,r.pending-a,a)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=73)}else r.status=73;if(73===r.status)if(r.gzhead.name){a=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>a&&(t.adler=M(t.adler,r.pending_buf,r.pending-a,a)),kt(t),a=r.pending,r.pending===r.pending_buf_size)){n=1;break}n=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,xt(r,n)}while(0!==n);r.gzhead.hcrc&&r.pending>a&&(t.adler=M(t.adler,r.pending_buf,r.pending-a,a)),0===n&&(r.gzindex=0,r.status=91)}else r.status=91;if(91===r.status)if(r.gzhead.comment){a=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>a&&(t.adler=M(t.adler,r.pending_buf,r.pending-a,a)),kt(t),a=r.pending,r.pending===r.pending_buf_size)){n=1;break}n=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,xt(r,n)}while(0!==n);r.gzhead.hcrc&&r.pending>a&&(t.adler=M(t.adler,r.pending_buf,r.pending-a,a)),0===n&&(r.status=pt)}else r.status=pt;if(r.status===pt&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&kt(t),r.pending+2<=r.pending_buf_size&&(xt(r,255&t.adler),xt(r,t.adler>>8&255),t.adler=0,r.status=gt)):r.status=gt),0!==r.pending){if(kt(t),0===t.avail_out)return r.last_flush=-1,tt}else if(0===t.avail_in&&bt(e)<=bt(i)&&e!==V)return vt(t,rt);if(r.status===wt&&0!==t.avail_in)return vt(t,rt);if(0!==t.avail_in||0!==r.lookahead||e!==q&&r.status!==wt){var _=r.strategy===_t?function(t,e){for(var a;;){if(0===t.lookahead&&(Zt(t),0===t.lookahead)){if(e===q)return 1;break}if(t.match_length=0,a=X(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,a&&(zt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===V?(zt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(zt(t,!1),0===t.strm.avail_out)?1:2}(r,e):r.strategy===ht?function(t,e){for(var a,n,r,i,s=t.window;;){if(t.lookahead<=ft){if(Zt(t),t.lookahead<=ft&&e===q)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(n=s[r=t.strstart-1])===s[++r]&&n===s[++r]&&n===s[++r]){i=t.strstart+ft;do{}while(n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&r<i);t.match_length=ft-(i-r),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(a=X(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(a=X(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),a&&(zt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===V?(zt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(zt(t,!1),0===t.strm.avail_out)?1:2}(r,e):Lt[r.level].func(r,e);if(3!==_&&4!==_||(r.status=wt),1===_||3===_)return 0===t.avail_out&&(r.last_flush=-1),tt;if(2===_&&(e===J?W(r):e!==$&&(j(r,0,0,!1),e===Q&&(mt(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),kt(t),0===t.avail_out))return r.last_flush=-1,tt}return e!==V?tt:r.wrap<=0?et:(2===r.wrap?(xt(r,255&t.adler),xt(r,t.adler>>8&255),xt(r,t.adler>>16&255),xt(r,t.adler>>24&255),xt(r,255&t.total_in),xt(r,t.total_in>>8&255),xt(r,t.total_in>>16&255),xt(r,t.total_in>>24&255)):(At(r,t.adler>>>16),At(r,65535&t.adler)),kt(t),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?tt:et)},deflateEnd:function(t){if(!t||!t.state)return at;var e=t.state.status;return 42!==e&&69!==e&&73!==e&&91!==e&&e!==pt&&e!==gt&&e!==wt?vt(t,at):(t.state=null,e===gt?vt(t,nt):tt)},deflateSetDictionary:function(t,e){var a=e.length;if(!t||!t.state)return at;var n=t.state,r=n.wrap;if(2===r||1===r&&42!==n.status||n.lookahead)return at;if(1===r&&(t.adler=C(t.adler,e,a,0)),n.wrap=0,a>=n.w_size){0===r&&(mt(n.head),n.strstart=0,n.block_start=0,n.insert=0);var i=new Uint8Array(n.w_size);i.set(e.subarray(a-n.w_size,a),0),e=i,a=n.w_size}var s=t.avail_in,_=t.next_in,h=t.input;for(t.avail_in=a,t.next_in=0,t.input=e,Zt(n);n.lookahead>=3;){var l=n.strstart,o=n.lookahead-2;do{n.ins_h=yt(n,n.ins_h,n.window[l+3-1]),n.prev[l&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=l,l++}while(--o);n.strstart=l,n.lookahead=2,Zt(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,t.next_in=_,t.input=h,t.avail_in=s,n.wrap=r,tt},deflateInfo:"pako deflate (from Nodeca project)"};for(var Dt=new Uint8Array(256),Bt=0;Bt<256;Bt++)Dt[Bt]=Bt>=252?6:Bt>=248?5:Bt>=240?4:Bt>=224?3:Bt>=192?2:1;Dt[254]=Dt[254]=1;var Ct=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},Ht=Object.prototype.toString,Mt=K.Z_NO_FLUSH,Yt=K.Z_SYNC_FLUSH,Kt=K.Z_FULL_FLUSH,Pt=K.Z_FINISH,jt=K.Z_OK,Gt=K.Z_STREAM_END,Xt=K.Z_DEFAULT_COMPRESSION,Wt=K.Z_DEFAULT_STRATEGY,qt=K.Z_DEFLATED;function Jt(){this.options={level:Xt,method:qt,chunkSize:16384,windowBits:15,memLevel:8,strategy:Wt};var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ct,this.strm.avail_out=0;var e=Ot.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(e!==jt)throw new Error(Y[e]);if(t.header&&Ot.deflateSetHeader(this.strm,t.header),t.dictionary){var a;if(a="[object ArrayBuffer]"===Ht.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(e=Ot.deflateSetDictionary(this.strm,a))!==jt)throw new Error(Y[e]);this._dict_set=!0}}function Qt(t,e,a){try{t.postMessage({type:"errored",error:e,streamId:a})}catch(n){t.postMessage({type:"errored",error:String(e),streamId:a})}}function Vt(t){var e=t.strm.adler;return new Uint8Array([3,0,e>>>24&255,e>>>16&255,e>>>8&255,255&e])}Jt.prototype.push=function(t,e){var a,n,r=this.strm,i=this.options.chunkSize;if(this.ended)return!1;for(n=e===~~e?e:!0===e?Pt:Mt,"[object ArrayBuffer]"===Ht.call(t)?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;)if(0===r.avail_out&&(r.output=new Uint8Array(i),r.next_out=0,r.avail_out=i),(n===Yt||n===Kt)&&r.avail_out<=6)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else{if((a=Ot.deflate(r,n))===Gt)return r.next_out>0&&this.onData(r.output.subarray(0,r.next_out)),a=Ot.deflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===jt;if(0!==r.avail_out){if(n>0&&r.next_out>0)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else if(0===r.avail_in)break}else this.onData(r.output)}return!0},Jt.prototype.onData=function(t){this.chunks.push(t)},Jt.prototype.onEnd=function(t){t===jt&&(this.result=function(t){for(var e=0,a=0,n=t.length;a<n;a++)e+=t[a].length;for(var r=new Uint8Array(e),i=0,s=0,_=t.length;i<_;i++){var h=t[i];r.set(h,s),s+=h.length}return r}(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},function(e){void 0===e&&(e=self);try{var a=new Map;e.addEventListener("message",(function(n){try{var r=function(e,a){switch(a.action){case"init":return{type:"initialized",version:"5.6.0"};case"write":var n=e.get(a.streamId);n||(n=new Jt,e.set(a.streamId,n));var r=n.chunks.length,i=function(t){if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(t);var e,a,n,r,i,s=t.length,_=0;for(r=0;r<s;r++)55296==(64512&(a=t.charCodeAt(r)))&&r+1<s&&56320==(64512&(n=t.charCodeAt(r+1)))&&(a=65536+(a-55296<<10)+(n-56320),r++),_+=a<128?1:a<2048?2:a<65536?3:4;for(e=new Uint8Array(_),i=0,r=0;i<_;r++)55296==(64512&(a=t.charCodeAt(r)))&&r+1<s&&56320==(64512&(n=t.charCodeAt(r+1)))&&(a=65536+(a-55296<<10)+(n-56320),r++),a<128?e[i++]=a:a<2048?(e[i++]=192|a>>>6,e[i++]=128|63&a):a<65536?(e[i++]=224|a>>>12,e[i++]=128|a>>>6&63,e[i++]=128|63&a):(e[i++]=240|a>>>18,e[i++]=128|a>>>12&63,e[i++]=128|a>>>6&63,e[i++]=128|63&a);return e}(a.data);return n.push(i,K.Z_SYNC_FLUSH),{type:"wrote",id:a.id,streamId:a.streamId,result:t(n.chunks.slice(r)),trailer:Vt(n),additionalBytesCount:i.length};case"reset":e.delete(a.streamId)}}(a,n.data);r&&e.postMessage(r)}catch(t){Qt(e,t,n.data&&"streamId"in n.data?n.data.streamId:void 0)}}))}catch(t){Qt(e,t)}}()}();'])))}var state={status:0};function startDeflateWorker(e,t,r,n){if(n===void 0){n=createDeflateWorker}if(state.status===0){doStartDeflateWorker(e,t,n)}switch(state.status){case 1:state.initializationFailureCallbacks.push(r);return state.worker;case 3:return state.worker}}function getDeflateWorkerStatus(){return state.status}function doStartDeflateWorker(e,t,r){if(r===void 0){r=createDeflateWorker}try{var n=r(e);var i=addEventListener$1(e,n,"error",(function(r){onError(e,t,r)})).stop;var s=addEventListener$1(e,n,"message",(function(r){var n=r.data;if(n.type==="errored"){onError(e,t,n.error,n.streamId)}else if(n.type==="initialized"){onInitialized(n.version)}})).stop;n.postMessage({action:"init"});setTimeout$1((function(){return onTimeout(t)}),INITIALIZATION_TIME_OUT_DELAY);var a=function(){i();s()};state={status:1,worker:n,stop:a,initializationFailureCallbacks:[]}}catch(r){onError(e,t,r)}}function onTimeout(e){if(state.status===1){display.error("".concat(e," failed to start: a timeout occurred while initializing the Worker"));state.initializationFailureCallbacks.forEach((function(e){return e()}));state={status:2}}}function onInitialized(e){if(state.status===1){state={status:3,worker:state.worker,stop:state.stop,version:e}}}function onError(e,t,r,n){if(state.status===1||state.status===0){display.error("".concat(t," failed to start: an error occurred while creating the Worker:"),r);if(r instanceof Event||r instanceof Error&&isMessageCspRelated(r.message)){var i=void 0;if(e.workerUrl){i="Please make sure the Worker URL ".concat(e.workerUrl," is correct and CSP is correctly configured.")}else{i="Please make sure CSP is correctly configured."}display.error("".concat(i," See documentation at https://docs.datadoghq.com/integrations/content_security_policy_logs/#use-csp-with-real-user-monitoring-and-session-replay"))}else{addTelemetryError(r)}if(state.status===1){state.initializationFailureCallbacks.forEach((function(e){return e()}))}state={status:2}}else{addTelemetryError(r,{worker_version:state.status===3&&state.version,stream_id:n})}}function isMessageCspRelated(e){return includes(e,"Content Security Policy")||includes(e,"requires 'TrustedScriptURL'")}function makeRecorderApi(e,t){if(canUseEventBridge()||!isBrowserSupported()){return{start:noop$1,stop:noop$1,getReplayStats:function(){return undefined},onRumStart:noop$1,isRecording:function(){return false},getSessionReplayLink:function(){return undefined}}}var r={status:1};var n=function(){r={status:1}};var i=function(){r={status:0}};return{start:function(){return n()},stop:function(){return i()},getSessionReplayLink:function(e,t,n){return getSessionReplayLink(e,t,n,r.status!==0)},onRumStart:function(s,a,o,f,c){if(a.startSessionReplayRecordingManually){r={status:0}}s.subscribe(7,(function(){if(r.status===2||r.status===3){i();r={status:1}}}));s.subscribe(8,(function(){if(r.status===1){n()}}));n=function(){var n=o.findTrackedSession();if(!n||!n.sessionReplayAllowed){r={status:1};return}if(r.status===2||r.status===3){return}r={status:2};runOnReadyState(a,"interactive",(function(){if(r.status!==2){return}if(!c){c=startDeflateWorker(a,"Datadog Session Replay",(function(){i()}),t);if(!c){r={status:0};return}}var n=e(s,a,o,f,createDeflateEncoder(a,c,1)).stop;r={status:3,stopRecording:n}}))};i=function(){if(r.status===0){return}if(r.status===3){r.stopRecording()}r={status:0}};if(r.status===1){n()}},isRecording:function(){return getDeflateWorkerStatus()===3&&r.status===3},getReplayStats:function(e){return getDeflateWorkerStatus()===3?getReplayStats(e):undefined}}}var recorderApi=makeRecorderApi(startRecording);var datadogRum=makeRumPublicApi(startRum,recorderApi,{startDeflateWorker,createDeflateEncoder});defineGlobal(getGlobalObject(),"DD_RUM",datadogRum);datadogRum.init({applicationId:"75bc6614-e228-47d7-beaa-4f3aabd4cfeb",clientToken:"pubacc9fb48f8ed4c8e23c93f230cf99e36",site:"datadoghq.com",service:"ts_viewer",env:"prod",sessionSampleRate:5,sessionReplaySampleRate:0,trackUserInteractions:true,trackResources:true,trackLongTasks:true,defaultPrivacyLevel:"mask-user-input"});class ScriptURI{constructor(e){this.context=e}async getTokenScriptXml(e){const[t,r]=e.split("-");if(!r||r.indexOf("0x")!==0)throw new Error("Not a ScriptUri ID");let n=await this.context.getScriptUri(t,r);if(!n)throw new Error("ScriptURI is not set on this contract or chain");console.log("Resolved ScriptURI: "+n);if(n==="https://viewer.tokenscript.org/assets/tokenscripts/smart-cat-prod.tsml"){console.log("SmartCat tokenscript detected, using updated version for newer features and better performance");n="/assets/tokenscripts/smart-cat-prod-2024-01.tsml"}else if(n==="https://viewer-staging.tokenscript.org/assets/tokenscripts/smart-cat-mumbai.tsml"){console.log("SmartCat tokenscript detected, using updated version for newer features and better performance");n="/assets/tokenscripts/smart-cat-mumbai-2024-01.tsml"}n=this.context.processIpfsUrl(n);let i=await fetch(n,{cache:"no-store"});if(i.status<200||i.status>299)throw new Error("HTTP Error: "+i.status);return{xml:await i.text(),sourceUrl:n}}}class TokenScriptRepo{async getTokenScriptXml(e){if(!e.match(/^[a-zA-Z0-9]*$/))throw new Error("Not a valid tsId for TokenScript repo");const t=TokenScriptRepo.REPO_URL+e+".tsml";let r=await fetch(t);if(r.status<200||r.status>299)throw new Error("HTTP Error: "+r.status);return{xml:await r.text(),sourceUrl:t}}}TokenScriptRepo.REPO_URL="https://raw.githubusercontent.com/AlphaWallet/TokenScript-Repo/master/aw.app/2020/06/";class Repo{constructor(e){this.context=e}async getTokenScript(e,t=false){let r;if(!this.context.config.noLocalStorage)try{const t=localStorage.getItem("ts-"+e);r=JSON.parse(t)}catch(e){}if(t||!r||!r.xml||Date.now()>r.timestamp+Repo.REPO_TTL*1e3){r=await this.resolveTokenScript(e);r.timestamp=Date.now();this.saveTokenScript(e,r)}return r}async resolveTokenScript(e){for(let t of Repo.REPO_SOURCES){try{return await new t(this.context).getTokenScriptXml(e)}catch(e){console.log("Failed to resolve tokenscript using resolver: "+t.name)}}throw new Error("Could not resolve tokenscript with ID: "+e)}deleteTokenScript(e){if(!this.context.config.noLocalStorage)localStorage.removeItem("ts-"+e)}saveTokenScript(e,t){if(!this.context.config.noLocalStorage)localStorage.setItem("ts-"+e,JSON.stringify(t))}}Repo.REPO_SOURCES=[ScriptURI,TokenScriptRepo];Repo.REPO_TTL=3600;const version$3="6.10.0";function checkType$1(e,t,r){const n=t.split("|").map((e=>e.trim()));for(let r=0;r<n.length;r++){switch(t){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof e===t){return}}}const i=new Error(`invalid value for type ${t}`);i.code="INVALID_ARGUMENT";i.argument=`value.${r}`;i.value=e;throw i}async function resolveProperties(e){const t=Object.keys(e);const r=await Promise.all(t.map((t=>Promise.resolve(e[t]))));return r.reduce(((e,r,n)=>{e[t[n]]=r;return e}),{})}function defineProperties(e,t,r){for(let n in t){let i=t[n];const s=r?r[n]:null;if(s){checkType$1(i,s,n)}Object.defineProperty(e,n,{enumerable:true,value:i,writable:false})}}function stringify$1(e){if(e==null){return"null"}if(Array.isArray(e)){return"[ "+e.map(stringify$1).join(", ")+" ]"}if(e instanceof Uint8Array){const t="0123456789abcdef";let r="0x";for(let n=0;n<e.length;n++){r+=t[e[n]>>4];r+=t[e[n]&15]}return r}if(typeof e==="object"&&typeof e.toJSON==="function"){return stringify$1(e.toJSON())}switch(typeof e){case"boolean":case"symbol":return e.toString();case"bigint":return BigInt(e).toString();case"number":return e.toString();case"string":return JSON.stringify(e);case"object":{const t=Object.keys(e);t.sort();return"{ "+t.map((t=>`${stringify$1(t)}: ${stringify$1(e[t])}`)).join(", ")+" }"}}return`[ COULD NOT SERIALIZE ]`}function isError(e,t){return e&&e.code===t}function isCallException(e){return isError(e,"CALL_EXCEPTION")}function makeError(e,t,r){let n=e;{const n=[];if(r){if("message"in r||"code"in r||"name"in r){throw new Error(`value will overwrite populated values: ${stringify$1(r)}`)}for(const e in r){if(e==="shortMessage"){continue}const t=r[e];n.push(e+"="+stringify$1(t))}}n.push(`code=${t}`);n.push(`version=${version$3}`);if(n.length){e+=" ("+n.join(", ")+")"}}let i;switch(t){case"INVALID_ARGUMENT":i=new TypeError(e);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":i=new RangeError(e);break;default:i=new Error(e)}defineProperties(i,{code:t});if(r){Object.assign(i,r)}if(i.shortMessage==null){defineProperties(i,{shortMessage:n})}return i}function assert$m(e,t,r,n){if(!e){throw makeError(t,r,n)}}function assertArgument(e,t,r,n){assert$m(e,t,"INVALID_ARGUMENT",{argument:r,value:n})}function assertArgumentCount(e,t,r){if(r==null){r=""}if(r){r=": "+r}assert$m(e>=t,"missing arguemnt"+r,"MISSING_ARGUMENT",{count:e,expectedCount:t});assert$m(e<=t,"too many arguemnts"+r,"UNEXPECTED_ARGUMENT",{count:e,expectedCount:t})}const _normalizeForms=["NFD","NFC","NFKD","NFKC"].reduce(((e,t)=>{try{if("test".normalize(t)!=="test"){throw new Error("bad")}if(t==="NFD"){const e=String.fromCharCode(233).normalize("NFD");const t=String.fromCharCode(101,769);if(e!==t){throw new Error("broken")}}e.push(t)}catch(e){}return e}),[]);function assertNormalize(e){assert$m(_normalizeForms.indexOf(e)>=0,"platform missing String.prototype.normalize","UNSUPPORTED_OPERATION",{operation:"String.prototype.normalize",info:{form:e}})}function assertPrivate(e,t,r){if(r==null){r=""}if(e!==t){let e=r,t="new";if(r){e+=".";t+=" "+r}assert$m(false,`private constructor; use ${e}from* methods`,"UNSUPPORTED_OPERATION",{operation:t})}}function _getBytes(e,t,r){if(e instanceof Uint8Array){if(r){return new Uint8Array(e)}return e}if(typeof e==="string"&&e.match(/^0x([0-9a-f][0-9a-f])*$/i)){const t=new Uint8Array((e.length-2)/2);let r=2;for(let n=0;n<t.length;n++){t[n]=parseInt(e.substring(r,r+2),16);r+=2}return t}assertArgument(false,"invalid BytesLike value",t||"value",e)}function getBytes(e,t){return _getBytes(e,t,false)}function getBytesCopy(e,t){return _getBytes(e,t,true)}function isHexString(e,t){if(typeof e!=="string"||!e.match(/^0x[0-9A-Fa-f]*$/)){return false}if(typeof t==="number"&&e.length!==2+2*t){return false}if(t===true&&e.length%2!==0){return false}return true}function isBytesLike(e){return isHexString(e,true)||e instanceof Uint8Array}const HexCharacters="0123456789abcdef";function hexlify(e){const t=getBytes(e);let r="0x";for(let e=0;e<t.length;e++){const n=t[e];r+=HexCharacters[(n&240)>>4]+HexCharacters[n&15]}return r}function concat$a(e){return"0x"+e.map((e=>hexlify(e).substring(2))).join("")}function dataLength(e){if(isHexString(e,true)){return(e.length-2)/2}return getBytes(e).length}function dataSlice(e,t,r){const n=getBytes(e);if(r!=null&&r>n.length){assert$m(false,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:n,length:n.length,offset:r})}return hexlify(n.slice(t==null?0:t,r==null?n.length:r))}function stripZerosLeft(e){let t=hexlify(e).substring(2);while(t.startsWith("00")){t=t.substring(2)}return"0x"+t}function zeroPad(e,t,r){const n=getBytes(e);assert$m(t>=n.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(n),length:t,offset:t+1});const i=new Uint8Array(t);i.fill(0);if(r){i.set(n,t-n.length)}else{i.set(n,0)}return hexlify(i)}function zeroPadValue(e,t){return zeroPad(e,t,true)}function zeroPadBytes(e,t){return zeroPad(e,t,false)}const BN_0$a=BigInt(0);const BN_1$5=BigInt(1);const maxValue=9007199254740991;function fromTwos(e,t){const r=getUint(e,"value");const n=BigInt(getNumber$1(t,"width"));assert$m(r>>n===BN_0$a,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:e});if(r>>n-BN_1$5){const e=(BN_1$5<<n)-BN_1$5;return-((~r&e)+BN_1$5)}return r}function toTwos(e,t){let r=getBigInt(e,"value");const n=BigInt(getNumber$1(t,"width"));const i=BN_1$5<<n-BN_1$5;if(r<BN_0$a){r=-r;assert$m(r<=i,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:e});const t=(BN_1$5<<n)-BN_1$5;return(~r&t)+BN_1$5}else{assert$m(r<i,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:e})}return r}function mask(e,t){const r=getUint(e,"value");const n=BigInt(getNumber$1(t,"bits"));return r&(BN_1$5<<n)-BN_1$5}function getBigInt(e,t){switch(typeof e){case"bigint":return e;case"number":assertArgument(Number.isInteger(e),"underflow",t||"value",e);assertArgument(e>=-maxValue&&e<=maxValue,"overflow",t||"value",e);return BigInt(e);case"string":try{if(e===""){throw new Error("empty string")}if(e[0]==="-"&&e[1]!=="-"){return-BigInt(e.substring(1))}return BigInt(e)}catch(r){assertArgument(false,`invalid BigNumberish string: ${r.message}`,t||"value",e)}}assertArgument(false,"invalid BigNumberish value",t||"value",e)}function getUint(e,t){const r=getBigInt(e,t);assert$m(r>=BN_0$a,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:e});return r}const Nibbles$1="0123456789abcdef";function toBigInt(e){if(e instanceof Uint8Array){let t="0x0";for(const r of e){t+=Nibbles$1[r>>4];t+=Nibbles$1[r&15]}return BigInt(t)}return getBigInt(e)}function getNumber$1(e,t){switch(typeof e){case"bigint":assertArgument(e>=-maxValue&&e<=maxValue,"overflow",t||"value",e);return Number(e);case"number":assertArgument(Number.isInteger(e),"underflow",t||"value",e);assertArgument(e>=-maxValue&&e<=maxValue,"overflow",t||"value",e);return e;case"string":try{if(e===""){throw new Error("empty string")}return getNumber$1(BigInt(e),t)}catch(r){assertArgument(false,`invalid numeric string: ${r.message}`,t||"value",e)}}assertArgument(false,"invalid numeric value",t||"value",e)}function toNumber(e){return getNumber$1(toBigInt(e))}function toBeHex(e,t){const r=getUint(e,"value");let n=r.toString(16);if(t==null){if(n.length%2){n="0"+n}}else{const r=getNumber$1(t,"width");assert$m(r*2>=n.length,`value exceeds width (${r} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:e});while(n.length<r*2){n="0"+n}}return"0x"+n}function toBeArray(e){const t=getUint(e,"value");if(t===BN_0$a){return new Uint8Array([])}let r=t.toString(16);if(r.length%2){r="0"+r}const n=new Uint8Array(r.length/2);for(let e=0;e<n.length;e++){const t=e*2;n[e]=parseInt(r.substring(t,t+2),16)}return n}function toQuantity(e){let t=hexlify(isBytesLike(e)?e:toBeArray(e)).substring(2);while(t.startsWith("0")){t=t.substring(1)}if(t===""){t="0"}return"0x"+t}const Alphabet="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";let Lookup=null;function getAlpha(e){if(Lookup==null){Lookup={};for(let e=0;e<Alphabet.length;e++){Lookup[Alphabet[e]]=BigInt(e)}}const t=Lookup[e];assertArgument(t!=null,`invalid base58 value`,"letter",e);return t}const BN_0$9=BigInt(0);const BN_58=BigInt(58);function encodeBase58(e){const t=getBytes(e);let r=toBigInt(t);let n="";while(r){n=Alphabet[Number(r%BN_58)]+n;r/=BN_58}for(let e=0;e<t.length;e++){if(t[e]){break}n=Alphabet[0]+n}return n}function decodeBase58(e){let t=BN_0$9;for(let r=0;r<e.length;r++){t*=BN_58;t+=getAlpha(e[r])}return t}function decodeBase64(e){e=atob(e);const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++){t[r]=e.charCodeAt(r)}return getBytes(t)}function encodeBase64(e){const t=getBytes(e);let r="";for(let e=0;e<t.length;e++){r+=String.fromCharCode(t[e])}return btoa(r)}class EventPayload{filter;emitter;#e;constructor(e,t,r){this.#e=t;defineProperties(this,{emitter:e,filter:r})}async removeListener(){if(this.#e==null){return}await this.emitter.off(this.filter,this.#e)}}function errorFunc(e,t,r,n,i){assertArgument(false,`invalid codepoint at offset ${t}; ${e}`,"bytes",r)}function ignoreFunc(e,t,r,n,i){if(e==="BAD_PREFIX"||e==="UNEXPECTED_CONTINUE"){let e=0;for(let n=t+1;n<r.length;n++){if(r[n]>>6!==2){break}e++}return e}if(e==="OVERRUN"){return r.length-t-1}return 0}function replaceFunc(e,t,r,n,i){if(e==="OVERLONG"){assertArgument(typeof i==="number","invalid bad code point for replacement","badCodepoint",i);n.push(i);return 0}n.push(65533);return ignoreFunc(e,t,r)}const Utf8ErrorFuncs=Object.freeze({error:errorFunc,ignore:ignoreFunc,replace:replaceFunc});function getUtf8CodePoints(e,t){if(t==null){t=Utf8ErrorFuncs.error}const r=getBytes(e,"bytes");const n=[];let i=0;while(i<r.length){const e=r[i++];if(e>>7===0){n.push(e);continue}let s=null;let a=null;if((e&224)===192){s=1;a=127}else if((e&240)===224){s=2;a=2047}else if((e&248)===240){s=3;a=65535}else{if((e&192)===128){i+=t("UNEXPECTED_CONTINUE",i-1,r,n)}else{i+=t("BAD_PREFIX",i-1,r,n)}continue}if(i-1+s>=r.length){i+=t("OVERRUN",i-1,r,n);continue}let o=e&(1<<8-s-1)-1;for(let e=0;e<s;e++){let e=r[i];if((e&192)!=128){i+=t("MISSING_CONTINUE",i,r,n);o=null;break}o=o<<6|e&63;i++}if(o===null){continue}if(o>1114111){i+=t("OUT_OF_RANGE",i-1-s,r,n,o);continue}if(o>=55296&&o<=57343){i+=t("UTF16_SURROGATE",i-1-s,r,n,o);continue}if(o<=a){i+=t("OVERLONG",i-1-s,r,n,o);continue}n.push(o)}return n}function toUtf8Bytes(e,t){if(t!=null){assertNormalize(t);e=e.normalize(t)}let r=[];for(let t=0;t<e.length;t++){const n=e.charCodeAt(t);if(n<128){r.push(n)}else if(n<2048){r.push(n>>6|192);r.push(n&63|128)}else if((n&64512)==55296){t++;const i=e.charCodeAt(t);assertArgument(t<e.length&&(i&64512)===56320,"invalid surrogate pair","str",e);const s=65536+((n&1023)<<10)+(i&1023);r.push(s>>18|240);r.push(s>>12&63|128);r.push(s>>6&63|128);r.push(s&63|128)}else{r.push(n>>12|224);r.push(n>>6&63|128);r.push(n&63|128)}}return new Uint8Array(r)}function _toUtf8String(e){return e.map((e=>{if(e<=65535){return String.fromCharCode(e)}e-=65536;return String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320)})).join("")}function toUtf8String(e,t){return _toUtf8String(getUtf8CodePoints(e,t))}function toUtf8CodePoints(e,t){return getUtf8CodePoints(toUtf8Bytes(e,t))}function createGetUrl(e){async function t(e,t){const r=e.url.split(":")[0].toLowerCase();assert$m(r==="http"||r==="https",`unsupported protocol ${r}`,"UNSUPPORTED_OPERATION",{info:{protocol:r},operation:"request"});assert$m(r==="https"||!e.credentials||e.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let n=undefined;if(t){const e=new AbortController;n=e.signal;t.addListener((()=>{e.abort()}))}const i={method:e.method,headers:new Headers(Array.from(e)),body:e.body||undefined,signal:n};const s=await fetch(e.url,i);const a={};s.headers.forEach(((e,t)=>{a[t.toLowerCase()]=e}));const o=await s.arrayBuffer();const f=o==null?null:new Uint8Array(o);return{statusCode:s.status,statusMessage:s.statusText,headers:a,body:f}}return t}const MAX_ATTEMPTS=12;const SLOT_INTERVAL=250;let defaultGetUrlFunc=createGetUrl();const reData=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i");const reIpfs=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let locked$5=false;async function dataGatewayFunc(e,t){try{const t=e.match(reData);if(!t){throw new Error("invalid data")}return new FetchResponse(200,"OK",{"content-type":t[1]||"text/plain"},t[2]?decodeBase64(t[3]):unpercent(t[3]))}catch(t){return new FetchResponse(599,"BAD REQUEST (invalid data: URI)",{},null,new FetchRequest(e))}}function getIpfsGatewayFunc(e){async function t(t,r){try{const r=t.match(reIpfs);if(!r){throw new Error("invalid link")}return new FetchRequest(`${e}${r[2]}`)}catch(e){return new FetchResponse(599,"BAD REQUEST (invalid IPFS URI)",{},null,new FetchRequest(t))}}return t}const Gateways={data:dataGatewayFunc,ipfs:getIpfsGatewayFunc("https://gateway.ipfs.io/ipfs/")};const fetchSignals=new WeakMap;class FetchCancelSignal{#t;#r;constructor(e){this.#t=[];this.#r=false;fetchSignals.set(e,(()=>{if(this.#r){return}this.#r=true;for(const e of this.#t){setTimeout((()=>{e()}),0)}this.#t=[]}))}addListener(e){assert$m(!this.#r,"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"});this.#t.push(e)}get cancelled(){return this.#r}checkSignal(){assert$m(!this.cancelled,"cancelled","CANCELLED",{})}}function checkSignal(e){if(e==null){throw new Error("missing signal; should not happen")}e.checkSignal();return e}class FetchRequest{#n;#i;#s;#a;#o;#f;#c;#u;#l;#h;#d;#p;#y;#m;#g;get url(){return this.#f}set url(e){this.#f=String(e)}get body(){if(this.#c==null){return null}return new Uint8Array(this.#c)}set body(e){if(e==null){this.#c=undefined;this.#u=undefined}else if(typeof e==="string"){this.#c=toUtf8Bytes(e);this.#u="text/plain"}else if(e instanceof Uint8Array){this.#c=e;this.#u="application/octet-stream"}else if(typeof e==="object"){this.#c=toUtf8Bytes(JSON.stringify(e));this.#u="application/json"}else{throw new Error("invalid body")}}hasBody(){return this.#c!=null}get method(){if(this.#a){return this.#a}if(this.hasBody()){return"POST"}return"GET"}set method(e){if(e==null){e=""}this.#a=String(e).toUpperCase()}get headers(){const e=Object.assign({},this.#s);if(this.#l){e["authorization"]=`Basic ${encodeBase64(toUtf8Bytes(this.#l))}`}if(this.allowGzip){e["accept-encoding"]="gzip"}if(e["content-type"]==null&&this.#u){e["content-type"]=this.#u}if(this.body){e["content-length"]=String(this.body.length)}return e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,t){this.#s[String(e).toLowerCase()]=String(t)}clearHeaders(){this.#s={}}[Symbol.iterator](){const e=this.headers;const t=Object.keys(e);let r=0;return{next:()=>{if(r<t.length){const n=t[r++];return{value:[n,e[n]],done:false}}return{value:undefined,done:true}}}}get credentials(){return this.#l||null}setCredentials(e,t){assertArgument(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]");this.#l=`${e}:${t}`}get allowGzip(){return this.#i}set allowGzip(e){this.#i=!!e}get allowInsecureAuthentication(){return!!this.#n}set allowInsecureAuthentication(e){this.#n=!!e}get timeout(){return this.#o}set timeout(e){assertArgument(e>=0,"timeout must be non-zero","timeout",e);this.#o=e}get preflightFunc(){return this.#h||null}set preflightFunc(e){this.#h=e}get processFunc(){return this.#d||null}set processFunc(e){this.#d=e}get retryFunc(){return this.#p||null}set retryFunc(e){this.#p=e}get getUrlFunc(){return this.#g||defaultGetUrlFunc}set getUrlFunc(e){this.#g=e}constructor(e){this.#f=String(e);this.#n=false;this.#i=true;this.#s={};this.#a="";this.#o=3e5;this.#m={slotInterval:SLOT_INTERVAL,maxAttempts:MAX_ATTEMPTS};this.#g=null}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${this.#c?hexlify(this.#c):"null"}>`}setThrottleParams(e){if(e.slotInterval!=null){this.#m.slotInterval=e.slotInterval}if(e.maxAttempts!=null){this.#m.maxAttempts=e.maxAttempts}}async#b(e,t,r,n,i){if(e>=this.#m.maxAttempts){return i.makeServerError("exceeded maximum retry limit")}assert$m(getTime$2()<=t,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:n});if(r>0){await wait(r)}let s=this.clone();const a=(s.url.split(":")[0]||"").toLowerCase();if(a in Gateways){const e=await Gateways[a](s.url,checkSignal(n.#y));if(e instanceof FetchResponse){let t=e;if(this.processFunc){checkSignal(n.#y);try{t=await this.processFunc(s,t)}catch(e){if(e.throttle==null||typeof e.stall!=="number"){t.makeServerError("error in post-processing function",e).assertOk()}}}return t}s=e}if(this.preflightFunc){s=await this.preflightFunc(s)}const o=await this.getUrlFunc(s,checkSignal(n.#y));let f=new FetchResponse(o.statusCode,o.statusMessage,o.headers,o.body,n);if(f.statusCode===301||f.statusCode===302){try{const r=f.headers.location||"";return s.redirect(r).#b(e+1,t,0,n,f)}catch(e){}return f}else if(f.statusCode===429){if(this.retryFunc==null||await this.retryFunc(s,f,e)){const r=f.headers["retry-after"];let i=this.#m.slotInterval*Math.trunc(Math.random()*Math.pow(2,e));if(typeof r==="string"&&r.match(/^[1-9][0-9]*$/)){i=parseInt(r)}return s.clone().#b(e+1,t,i,n,f)}}if(this.processFunc){checkSignal(n.#y);try{f=await this.processFunc(s,f)}catch(r){if(r.throttle==null||typeof r.stall!=="number"){f.makeServerError("error in post-processing function",r).assertOk()}let i=this.#m.slotInterval*Math.trunc(Math.random()*Math.pow(2,e));if(r.stall>=0){i=r.stall}return s.clone().#b(e+1,t,i,n,f)}}return f}send(){assert$m(this.#y==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"});this.#y=new FetchCancelSignal(this);return this.#b(0,getTime$2()+this.timeout,0,this,new FetchResponse(0,"",{},null,this))}cancel(){assert$m(this.#y!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const e=fetchSignals.get(this);if(!e){throw new Error("missing signal; should not happen")}e()}redirect(e){const t=this.url.split(":")[0].toLowerCase();const r=e.split(":")[0].toLowerCase();assert$m(this.method==="GET"&&(t!=="https"||r!=="http")&&e.match(/^https?:/),`unsupported redirect`,"UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(e)})`});const n=new FetchRequest(e);n.method="GET";n.allowGzip=this.allowGzip;n.timeout=this.timeout;n.#s=Object.assign({},this.#s);if(this.#c){n.#c=new Uint8Array(this.#c)}n.#u=this.#u;return n}clone(){const e=new FetchRequest(this.url);e.#a=this.#a;if(this.#c){e.#c=this.#c}e.#u=this.#u;e.#s=Object.assign({},this.#s);e.#l=this.#l;if(this.allowGzip){e.allowGzip=true}e.timeout=this.timeout;if(this.allowInsecureAuthentication){e.allowInsecureAuthentication=true}e.#h=this.#h;e.#d=this.#d;e.#p=this.#p;e.#g=this.#g;return e}static lockConfig(){locked$5=true}static getGateway(e){return Gateways[e.toLowerCase()]||null}static registerGateway(e,t){e=e.toLowerCase();if(e==="http"||e==="https"){throw new Error(`cannot intercept ${e}; use registerGetUrl`)}if(locked$5){throw new Error("gateways locked")}Gateways[e]=t}static registerGetUrl(e){if(locked$5){throw new Error("gateways locked")}defaultGetUrlFunc=e}static createGetUrlFunc(e){return createGetUrl()}static createDataGateway(){return dataGatewayFunc}static createIpfsGatewayFunc(e){return getIpfsGatewayFunc(e)}}class FetchResponse{#A;#w;#s;#c;#E;#v;toString(){return`<FetchResponse status=${this.statusCode} body=${this.#c?hexlify(this.#c):"null"}>`}get statusCode(){return this.#A}get statusMessage(){return this.#w}get headers(){return Object.assign({},this.#s)}get body(){return this.#c==null?null:new Uint8Array(this.#c)}get bodyText(){try{return this.#c==null?"":toUtf8String(this.#c)}catch(e){assert$m(false,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch(e){assert$m(false,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const e=this.headers;const t=Object.keys(e);let r=0;return{next:()=>{if(r<t.length){const n=t[r++];return{value:[n,e[n]],done:false}}return{value:undefined,done:true}}}}constructor(e,t,r,n,i){this.#A=e;this.#w=t;this.#s=Object.keys(r).reduce(((e,t)=>{e[t.toLowerCase()]=String(r[t]);return e}),{});this.#c=n==null?null:new Uint8Array(n);this.#E=i||null;this.#v={message:""}}makeServerError(e,t){let r;if(!e){e=`${this.statusCode} ${this.statusMessage}`;r=`CLIENT ESCALATED SERVER ERROR (${e})`}else{r=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${e})`}const n=new FetchResponse(599,r,this.headers,this.body,this.#E||undefined);n.#v={message:e,error:t};return n}throwThrottleError(e,t){if(t==null){t=-1}else{assertArgument(Number.isInteger(t)&&t>=0,"invalid stall timeout","stall",t)}const r=new Error(e||"throttling requests");defineProperties(r,{stall:t,throttle:true});throw r}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return this.#c!=null}get request(){return this.#E}ok(){return this.#v.message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok()){return}let{message:e,error:t}=this.#v;if(e===""){e=`server response ${this.statusCode} ${this.statusMessage}`}assert$m(false,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:t})}}function getTime$2(){return(new Date).getTime()}function unpercent(e){return toUtf8Bytes(e.replace(/%([0-9a-f][0-9a-f])/gi,((e,t)=>String.fromCharCode(parseInt(t,16)))))}function wait(e){return new Promise((t=>setTimeout(t,e)))}const BN_N1=BigInt(-1);const BN_0$8=BigInt(0);const BN_1$4=BigInt(1);const BN_5=BigInt(5);const _guard$5={};let Zeros$1="0000";while(Zeros$1.length<80){Zeros$1+=Zeros$1}function getTens(e){let t=Zeros$1;while(t.length<e){t+=t}return BigInt("1"+t.substring(0,e))}function checkValue(e,t,r){const n=BigInt(t.width);if(t.signed){const t=BN_1$4<<n-BN_1$4;assert$m(r==null||e>=-t&&e<t,"overflow","NUMERIC_FAULT",{operation:r,fault:"overflow",value:e});if(e>BN_0$8){e=fromTwos(mask(e,n),n)}else{e=-fromTwos(mask(-e,n),n)}}else{const t=BN_1$4<<n;assert$m(r==null||e>=0&&e<t,"overflow","NUMERIC_FAULT",{operation:r,fault:"overflow",value:e});e=(e%t+t)%t&t-BN_1$4}return e}function getFormat(e){if(typeof e==="number"){e=`fixed128x${e}`}let t=true;let r=128;let n=18;if(typeof e==="string"){if(e==="fixed");else if(e==="ufixed"){t=false}else{const i=e.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);assertArgument(i,"invalid fixed format","format",e);t=i[1]!=="u";r=parseInt(i[2]);n=parseInt(i[3])}}else if(e){const i=e;const s=(e,t,r)=>{if(i[e]==null){return r}assertArgument(typeof i[e]===t,"invalid fixed format ("+e+" not "+t+")","format."+e,i[e]);return i[e]};t=s("signed","boolean",t);r=s("width","number",r);n=s("decimals","number",n)}assertArgument(r%8===0,"invalid FixedNumber width (not byte aligned)","format.width",r);assertArgument(n<=80,"invalid FixedNumber decimals (too large)","format.decimals",n);const i=(t?"":"u")+"fixed"+String(r)+"x"+String(n);return{signed:t,width:r,decimals:n,name:i}}function toString$c(e,t){let r="";if(e<BN_0$8){r="-";e*=BN_N1}let n=e.toString();if(t===0){return r+n}while(n.length<=t){n=Zeros$1+n}const i=n.length-t;n=n.substring(0,i)+"."+n.substring(i);while(n[0]==="0"&&n[1]!=="."){n=n.substring(1)}while(n[n.length-1]==="0"&&n[n.length-2]!=="."){n=n.substring(0,n.length-1)}return r+n}class FixedNumber{format;#_;#S;#$;_value;constructor(e,t,r){assertPrivate(e,_guard$5,"FixedNumber");this.#S=t;this.#_=r;const n=toString$c(t,r.decimals);defineProperties(this,{format:r.name,_value:n});this.#$=getTens(r.decimals)}get signed(){return this.#_.signed}get width(){return this.#_.width}get decimals(){return this.#_.decimals}get value(){return this.#S}#T(e){assertArgument(this.format===e.format,"incompatible format; use fixedNumber.toFormat","other",e)}#I(e,t){e=checkValue(e,this.#_,t);return new FixedNumber(_guard$5,e,this.#_)}#C(e,t){this.#T(e);return this.#I(this.#S+e.#S,t)}addUnsafe(e){return this.#C(e)}add(e){return this.#C(e,"add")}#P(e,t){this.#T(e);return this.#I(this.#S-e.#S,t)}subUnsafe(e){return this.#P(e)}sub(e){return this.#P(e,"sub")}#R(e,t){this.#T(e);return this.#I(this.#S*e.#S/this.#$,t)}mulUnsafe(e){return this.#R(e)}mul(e){return this.#R(e,"mul")}mulSignal(e){this.#T(e);const t=this.#S*e.#S;assert$m(t%this.#$===BN_0$8,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this});return this.#I(t/this.#$,"mulSignal")}#N(e,t){assert$m(e.#S!==BN_0$8,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this});this.#T(e);return this.#I(this.#S*this.#$/e.#S,t)}divUnsafe(e){return this.#N(e)}div(e){return this.#N(e,"div")}divSignal(e){assert$m(e.#S!==BN_0$8,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this});this.#T(e);const t=this.#S*this.#$;assert$m(t%e.#S===BN_0$8,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this});return this.#I(t/e.#S,"divSignal")}cmp(e){let t=this.value,r=e.value;const n=this.decimals-e.decimals;if(n>0){r*=getTens(n)}else if(n<0){t*=getTens(-n)}if(t<r){return-1}if(t>r){return 1}return 0}eq(e){return this.cmp(e)===0}lt(e){return this.cmp(e)<0}lte(e){return this.cmp(e)<=0}gt(e){return this.cmp(e)>0}gte(e){return this.cmp(e)>=0}floor(){let e=this.#S;if(this.#S<BN_0$8){e-=this.#$-BN_1$4}e=this.#S/this.#$*this.#$;return this.#I(e,"floor")}ceiling(){let e=this.#S;if(this.#S>BN_0$8){e+=this.#$-BN_1$4}e=this.#S/this.#$*this.#$;return this.#I(e,"ceiling")}round(e){if(e==null){e=0}if(e>=this.decimals){return this}const t=this.decimals-e;const r=BN_5*getTens(t-1);let n=this.value+r;const i=getTens(t);n=n/i*i;checkValue(n,this.#_,"round");return new FixedNumber(_guard$5,n,this.#_)}isZero(){return this.#S===BN_0$8}isNegative(){return this.#S<BN_0$8}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return FixedNumber.fromString(this.toString(),e)}static fromValue(e,t,r){const n=t==null?0:getNumber$1(t);const i=getFormat(r);let s=getBigInt(e,"value");const a=n-i.decimals;if(a>0){const t=getTens(a);assert$m(s%t===BN_0$8,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:e});s/=t}else if(a<0){s*=getTens(-a)}checkValue(s,i,"fromValue");return new FixedNumber(_guard$5,s,i)}static fromString(e,t){const r=e.match(/^(-?)([0-9]*)\.?([0-9]*)$/);assertArgument(r&&r[2].length+r[3].length>0,"invalid FixedNumber string value","value",e);const n=getFormat(t);let i=r[2]||"0",s=r[3]||"";while(s.length<n.decimals){s+=Zeros$1}assert$m(s.substring(n.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:e});s=s.substring(0,n.decimals);const a=BigInt(r[1]+i+s);checkValue(a,n,"fromString");return new FixedNumber(_guard$5,a,n)}static fromBytes(e,t){let r=toBigInt(getBytes(e,"value"));const n=getFormat(t);if(n.signed){r=fromTwos(r,n.width)}checkValue(r,n,"fromBytes");return new FixedNumber(_guard$5,r,n)}}function hexlifyByte(e){let t=e.toString(16);while(t.length<2){t="0"+t}return"0x"+t}function unarrayifyInteger(e,t,r){let n=0;for(let i=0;i<r;i++){n=n*256+e[t+i]}return n}function _decodeChildren(e,t,r,n){const i=[];while(r<t+1+n){const s=_decode$1(e,r);i.push(s.result);r+=s.consumed;assert$m(r<=t+1+n,"child data too short","BUFFER_OVERRUN",{buffer:e,length:n,offset:t})}return{consumed:1+n,result:i}}function _decode$1(e,t){assert$m(e.length!==0,"data too short","BUFFER_OVERRUN",{buffer:e,length:0,offset:1});const r=t=>{assert$m(t<=e.length,"data short segment too short","BUFFER_OVERRUN",{buffer:e,length:e.length,offset:t})};if(e[t]>=248){const n=e[t]-247;r(t+1+n);const i=unarrayifyInteger(e,t+1,n);r(t+1+n+i);return _decodeChildren(e,t,t+1+n,n+i)}else if(e[t]>=192){const n=e[t]-192;r(t+1+n);return _decodeChildren(e,t,t+1,n)}else if(e[t]>=184){const n=e[t]-183;r(t+1+n);const i=unarrayifyInteger(e,t+1,n);r(t+1+n+i);const s=hexlify(e.slice(t+1+n,t+1+n+i));return{consumed:1+n+i,result:s}}else if(e[t]>=128){const n=e[t]-128;r(t+1+n);const i=hexlify(e.slice(t+1,t+1+n));return{consumed:1+n,result:i}}return{consumed:1,result:hexlifyByte(e[t])}}function decodeRlp(e){const t=getBytes(e,"data");const r=_decode$1(t,0);assertArgument(r.consumed===t.length,"unexpected junk after rlp payload","data",e);return r.result}function arrayifyInteger(e){const t=[];while(e){t.unshift(e&255);e>>=8}return t}function _encode$1(e){if(Array.isArray(e)){let t=[];e.forEach((function(e){t=t.concat(_encode$1(e))}));if(t.length<=55){t.unshift(192+t.length);return t}const r=arrayifyInteger(t.length);r.unshift(247+r.length);return r.concat(t)}const t=Array.prototype.slice.call(getBytes(e,"object"));if(t.length===1&&t[0]<=127){return t}else if(t.length<=55){t.unshift(128+t.length);return t}const r=arrayifyInteger(t.length);r.unshift(183+r.length);return r.concat(t)}const nibbles="0123456789abcdef";function encodeRlp(e){let t="0x";for(const r of _encode$1(e)){t+=nibbles[r>>4];t+=nibbles[r&15]}return t}const names$4=["wei","kwei","mwei","gwei","szabo","finney","ether"];function formatUnits(e,t){let r=18;if(typeof t==="string"){const e=names$4.indexOf(t);assertArgument(e>=0,"invalid unit","unit",t);r=3*e}else if(t!=null){r=getNumber$1(t,"unit")}return FixedNumber.fromValue(e,r,{decimals:r,width:512}).toString()}function parseUnits$1(e,t){assertArgument(typeof e==="string","value must be a string","value",e);let r=18;if(typeof t==="string"){const e=names$4.indexOf(t);assertArgument(e>=0,"invalid unit","unit",t);r=3*e}else if(t!=null){r=getNumber$1(t,"unit")}return FixedNumber.fromString(e,{decimals:r,width:512}).value}function formatEther(e){return formatUnits(e,18)}function parseEther(e){return parseUnits$1(e,18)}function uuidV4(e){const t=getBytes(e,"randomBytes");t[6]=t[6]&15|64;t[8]=t[8]&63|128;const r=hexlify(t);return[r.substring(2,10),r.substring(10,14),r.substring(14,18),r.substring(18,22),r.substring(22,34)].join("-")}const WordSize=32;const Padding=new Uint8Array(WordSize);const passProperties$1=["then"];const _guard$4={};function throwError(e,t){const r=new Error(`deferred error during ABI decoding triggered accessing ${e}`);r.error=t;throw r}class Result extends Array{#k;constructor(...e){const t=e[0];let r=e[1];let n=(e[2]||[]).slice();let i=true;if(t!==_guard$4){r=e;n=[];i=false}super(r.length);r.forEach(((e,t)=>{this[t]=e}));const s=n.reduce(((e,t)=>{if(typeof t==="string"){e.set(t,(e.get(t)||0)+1)}return e}),new Map);this.#k=Object.freeze(r.map(((e,t)=>{const r=n[t];if(r!=null&&s.get(r)===1){return r}return null})));if(!i){return}Object.freeze(this);return new Proxy(this,{get:(e,t,r)=>{if(typeof t==="string"){if(t.match(/^[0-9]+$/)){const r=getNumber$1(t,"%index");if(r<0||r>=this.length){throw new RangeError("out of result range")}const n=e[r];if(n instanceof Error){throwError(`index ${r}`,n)}return n}if(passProperties$1.indexOf(t)>=0){return Reflect.get(e,t,r)}const n=e[t];if(n instanceof Function){return function(...t){return n.apply(this===r?e:this,t)}}else if(!(t in e)){return e.getValue.apply(this===r?e:this,[t])}}return Reflect.get(e,t,r)}})}toArray(){const e=[];this.forEach(((t,r)=>{if(t instanceof Error){throwError(`index ${r}`,t)}e.push(t)}));return e}toObject(){return this.#k.reduce(((e,t,r)=>{assert$m(t!=null,"value at index ${ index } unnamed","UNSUPPORTED_OPERATION",{operation:"toObject()"});if(!(t in e)){e[t]=this.getValue(t)}return e}),{})}slice(e,t){if(e==null){e=0}if(e<0){e+=this.length;if(e<0){e=0}}if(t==null){t=this.length}if(t<0){t+=this.length;if(t<0){t=0}}if(t>this.length){t=this.length}const r=[],n=[];for(let i=e;i<t;i++){r.push(this[i]);n.push(this.#k[i])}return new Result(_guard$4,r,n)}filter(e,t){const r=[],n=[];for(let i=0;i<this.length;i++){const s=this[i];if(s instanceof Error){throwError(`index ${i}`,s)}if(e.call(t,s,i,this)){r.push(s);n.push(this.#k[i])}}return new Result(_guard$4,r,n)}map(e,t){const r=[];for(let n=0;n<this.length;n++){const i=this[n];if(i instanceof Error){throwError(`index ${n}`,i)}r.push(e.call(t,i,n,this))}return r}getValue(e){const t=this.#k.indexOf(e);if(t===-1){return undefined}const r=this[t];if(r instanceof Error){throwError(`property ${JSON.stringify(e)}`,r.error)}return r}static fromItems(e,t){return new Result(_guard$4,e,t)}}function checkResultErrors(e){const t=[];const r=function(e,n){if(!Array.isArray(n)){return}for(let i in n){const s=e.slice();s.push(i);try{r(s,n[i])}catch(e){t.push({path:s,error:e})}}};r([],e);return t}function getValue$3(e){let t=toBeArray(e);assert$m(t.length<=WordSize,"value out-of-bounds","BUFFER_OVERRUN",{buffer:t,length:WordSize,offset:t.length});if(t.length!==WordSize){t=getBytesCopy(concat$a([Padding.slice(t.length%WordSize),t]))}return t}class Coder{name;type;localName;dynamic;constructor(e,t,r,n){defineProperties(this,{name:e,type:t,localName:r,dynamic:n},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,t){assertArgument(false,e,this.localName,t)}}class Writer$2{#O;#x;constructor(){this.#O=[];this.#x=0}get data(){return concat$a(this.#O)}get length(){return this.#x}#B(e){this.#O.push(e);this.#x+=e.length;return e.length}appendWriter(e){return this.#B(getBytesCopy(e.data))}writeBytes(e){let t=getBytesCopy(e);const r=t.length%WordSize;if(r){t=getBytesCopy(concat$a([t,Padding.slice(r)]))}return this.#B(t)}writeValue(e){return this.#B(getValue$3(e))}writeUpdatableValue(){const e=this.#O.length;this.#O.push(Padding);this.#x+=WordSize;return t=>{this.#O[e]=getValue$3(t)}}}class Reader$2{allowLoose;#O;#D;#M;#U;#L;constructor(e,t,r){defineProperties(this,{allowLoose:!!t});this.#O=getBytesCopy(e);this.#M=0;this.#U=null;this.#L=r!=null?r:1024;this.#D=0}get data(){return hexlify(this.#O)}get dataLength(){return this.#O.length}get consumed(){return this.#D}get bytes(){return new Uint8Array(this.#O)}#F(e){if(this.#U){return this.#U.#F(e)}this.#M+=e;assert$m(this.#L<1||this.#M<=this.#L*this.dataLength,`compressed ABI data exceeds inflation ratio of ${this.#L} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:getBytesCopy(this.#O),offset:this.#D,length:e,info:{bytesRead:this.#M,dataLength:this.dataLength}})}#H(e,t,r){let n=Math.ceil(t/WordSize)*WordSize;if(this.#D+n>this.#O.length){if(this.allowLoose&&r&&this.#D+t<=this.#O.length){n=t}else{assert$m(false,"data out-of-bounds","BUFFER_OVERRUN",{buffer:getBytesCopy(this.#O),length:this.#O.length,offset:this.#D+n})}}return this.#O.slice(this.#D,this.#D+n)}subReader(e){const t=new Reader$2(this.#O.slice(this.#D+e),this.allowLoose,this.#L);t.#U=this;return t}readBytes(e,t){let r=this.#H(0,e,!!t);this.#F(e);this.#D+=r.length;return r.slice(0,e)}readValue(){return toBigInt(this.readBytes(WordSize))}readIndex(){return toNumber(this.readBytes(WordSize))}}var hmac$2={};var _assert$1={};Object.defineProperty(_assert$1,"__esModule",{value:true});_assert$1.output=_assert$1.exists=_assert$1.hash=_assert$1.bytes=_assert$1.bool=_assert$1.number=void 0;function number$1(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}_assert$1.number=number$1;function bool$1(e){if(typeof e!=="boolean")throw new Error(`Expected boolean, not ${e}`)}_assert$1.bool=bool$1;function bytes$a(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}_assert$1.bytes=bytes$a;function hash$6(e){if(typeof e!=="function"||typeof e.create!=="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");number$1(e.outputLen);number$1(e.blockLen)}_assert$1.hash=hash$6;function exists$2(e,t=true){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}_assert$1.exists=exists$2;function output$1(e,t){bytes$a(e);const r=t.outputLen;if(e.length<r){throw new Error(`digestInto() expects output buffer of length at least ${r}`)}}_assert$1.output=output$1;const assert$l={number:number$1,bool:bool$1,bytes:bytes$a,hash:hash$6,exists:exists$2,output:output$1};_assert$1.default=assert$l;var utils$u={};var crypto$8={};Object.defineProperty(crypto$8,"__esModule",{value:true});crypto$8.crypto=void 0;crypto$8.crypto=typeof globalThis==="object"&&"crypto"in globalThis?globalThis.crypto:undefined;(function(e){
/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */
Object.defineProperty(e,"__esModule",{value:true});e.randomBytes=e.wrapXOFConstructorWithOpts=e.wrapConstructorWithOpts=e.wrapConstructor=e.checkOpts=e.Hash=e.concatBytes=e.toBytes=e.utf8ToBytes=e.asyncLoop=e.nextTick=e.hexToBytes=e.bytesToHex=e.isLE=e.rotr=e.createView=e.u32=e.u8=void 0;const t=crypto$8;const r=e=>e instanceof Uint8Array;const n=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength);e.u8=n;const i=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));e.u32=i;const s=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);e.createView=s;const a=(e,t)=>e<<32-t|e>>>t;e.rotr=a;e.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!e.isLE)throw new Error("Non little-endian hardware is not supported");const o=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function f(e){if(!r(e))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++){t+=o[e[r]]}return t}e.bytesToHex=f;function c(e){if(typeof e!=="string")throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(t/2);for(let t=0;t<r.length;t++){const n=t*2;const i=e.slice(n,n+2);const s=Number.parseInt(i,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");r[t]=s}return r}e.hexToBytes=c;const u=async()=>{};e.nextTick=u;async function l(t,r,n){let i=Date.now();for(let s=0;s<t;s++){n(s);const t=Date.now()-i;if(t>=0&&t<r)continue;await(0,e.nextTick)();i+=t}}e.asyncLoop=l;function h(e){if(typeof e!=="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array((new TextEncoder).encode(e))}e.utf8ToBytes=h;function d(e){if(typeof e==="string")e=h(e);if(!r(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}e.toBytes=d;function p(...e){const t=new Uint8Array(e.reduce(((e,t)=>e+t.length),0));let n=0;e.forEach((e=>{if(!r(e))throw new Error("Uint8Array expected");t.set(e,n);n+=e.length}));return t}e.concatBytes=p;class y{clone(){return this._cloneInto()}}e.Hash=y;const m={}.toString;function g(e,t){if(t!==undefined&&m.call(t)!=="[object Object]")throw new Error("Options should be object or undefined");const r=Object.assign(e,t);return r}e.checkOpts=g;function b(e){const t=t=>e().update(d(t)).digest();const r=e();t.outputLen=r.outputLen;t.blockLen=r.blockLen;t.create=()=>e();return t}e.wrapConstructor=b;function A(e){const t=(t,r)=>e(r).update(d(t)).digest();const r=e({});t.outputLen=r.outputLen;t.blockLen=r.blockLen;t.create=t=>e(t);return t}e.wrapConstructorWithOpts=A;function w(e){const t=(t,r)=>e(r).update(d(t)).digest();const r=e({});t.outputLen=r.outputLen;t.blockLen=r.blockLen;t.create=t=>e(t);return t}e.wrapXOFConstructorWithOpts=w;function E(e=32){if(t.crypto&&typeof t.crypto.getRandomValues==="function"){return t.crypto.getRandomValues(new Uint8Array(e))}throw new Error("crypto.getRandomValues must be defined")}e.randomBytes=E})(utils$u);(function(e){Object.defineProperty(e,"__esModule",{value:true});e.hmac=e.HMAC=void 0;const t=_assert$1;const r=utils$u;class n extends r.Hash{constructor(e,n){super();this.finished=false;this.destroyed=false;(0,t.hash)(e);const i=(0,r.toBytes)(n);this.iHash=e.create();if(typeof this.iHash.update!=="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen;this.outputLen=this.iHash.outputLen;const s=this.blockLen;const a=new Uint8Array(s);a.set(i.length>s?e.create().update(i).digest():i);for(let e=0;e<a.length;e++)a[e]^=54;this.iHash.update(a);this.oHash=e.create();for(let e=0;e<a.length;e++)a[e]^=54^92;this.oHash.update(a);a.fill(0)}update(e){(0,t.exists)(this);this.iHash.update(e);return this}digestInto(e){(0,t.exists)(this);(0,t.bytes)(e,this.outputLen);this.finished=true;this.iHash.digestInto(e);this.oHash.update(e);this.oHash.digestInto(e);this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);this.digestInto(e);return e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:n,destroyed:i,blockLen:s,outputLen:a}=this;e=e;e.finished=n;e.destroyed=i;e.blockLen=s;e.outputLen=a;e.oHash=t._cloneInto(e.oHash);e.iHash=r._cloneInto(e.iHash);return e}destroy(){this.destroyed=true;this.oHash.destroy();this.iHash.destroy()}}e.HMAC=n;const i=(e,t,r)=>new n(e,t).update(r).digest();e.hmac=i;e.hmac.create=(e,t)=>new n(e,t)})(hmac$2);var pbkdf2$2={};Object.defineProperty(pbkdf2$2,"__esModule",{value:true});pbkdf2$2.pbkdf2Async=pbkdf2_2=pbkdf2$2.pbkdf2=void 0;const _assert_js_1$4=_assert$1;const hmac_js_1=hmac$2;const utils_js_1$b=utils$u;function pbkdf2Init(e,t,r,n){(0,_assert_js_1$4.hash)(e);const i=(0,utils_js_1$b.checkOpts)({dkLen:32,asyncTick:10},n);const{c:s,dkLen:a,asyncTick:o}=i;(0,_assert_js_1$4.number)(s);(0,_assert_js_1$4.number)(a);(0,_assert_js_1$4.number)(o);if(s<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const f=(0,utils_js_1$b.toBytes)(t);const c=(0,utils_js_1$b.toBytes)(r);const u=new Uint8Array(a);const l=hmac_js_1.hmac.create(e,f);const h=l._cloneInto().update(c);return{c:s,dkLen:a,asyncTick:o,DK:u,PRF:l,PRFSalt:h}}function pbkdf2Output(e,t,r,n,i){e.destroy();t.destroy();if(n)n.destroy();i.fill(0);return r}function pbkdf2$1(e,t,r,n){const{c:i,dkLen:s,DK:a,PRF:o,PRFSalt:f}=pbkdf2Init(e,t,r,n);let c;const u=new Uint8Array(4);const l=(0,utils_js_1$b.createView)(u);const h=new Uint8Array(o.outputLen);for(let e=1,t=0;t<s;e++,t+=o.outputLen){const r=a.subarray(t,t+o.outputLen);l.setInt32(0,e,false);(c=f._cloneInto(c)).update(u).digestInto(h);r.set(h.subarray(0,r.length));for(let e=1;e<i;e++){o._cloneInto(c).update(h).digestInto(h);for(let e=0;e<r.length;e++)r[e]^=h[e]}}return pbkdf2Output(o,f,a,c,h)}var pbkdf2_2=pbkdf2$2.pbkdf2=pbkdf2$1;async function pbkdf2Async(e,t,r,n){const{c:i,dkLen:s,asyncTick:a,DK:o,PRF:f,PRFSalt:c}=pbkdf2Init(e,t,r,n);let u;const l=new Uint8Array(4);const h=(0,utils_js_1$b.createView)(l);const d=new Uint8Array(f.outputLen);for(let e=1,t=0;t<s;e++,t+=f.outputLen){const r=o.subarray(t,t+f.outputLen);h.setInt32(0,e,false);(u=c._cloneInto(u)).update(l).digestInto(d);r.set(d.subarray(0,r.length));await(0,utils_js_1$b.asyncLoop)(i-1,a,(()=>{f._cloneInto(u).update(d).digestInto(d);for(let e=0;e<r.length;e++)r[e]^=d[e]}))}return pbkdf2Output(f,c,o,u,d)}pbkdf2$2.pbkdf2Async=pbkdf2Async;var sha256$3={};var _sha2$1={};Object.defineProperty(_sha2$1,"__esModule",{value:true});_sha2$1.SHA2=void 0;const _assert_js_1$3=_assert$1;const utils_js_1$a=utils$u;function setBigUint64$1(e,t,r,n){if(typeof e.setBigUint64==="function")return e.setBigUint64(t,r,n);const i=BigInt(32);const s=BigInt(4294967295);const a=Number(r>>i&s);const o=Number(r&s);const f=n?4:0;const c=n?0:4;e.setUint32(t+f,a,n);e.setUint32(t+c,o,n)}class SHA2$1 extends utils_js_1$a.Hash{constructor(e,t,r,n){super();this.blockLen=e;this.outputLen=t;this.padOffset=r;this.isLE=n;this.finished=false;this.length=0;this.pos=0;this.destroyed=false;this.buffer=new Uint8Array(e);this.view=(0,utils_js_1$a.createView)(this.buffer)}update(e){(0,_assert_js_1$3.exists)(this);const{view:t,buffer:r,blockLen:n}=this;e=(0,utils_js_1$a.toBytes)(e);const i=e.length;for(let s=0;s<i;){const a=Math.min(n-this.pos,i-s);if(a===n){const t=(0,utils_js_1$a.createView)(e);for(;n<=i-s;s+=n)this.process(t,s);continue}r.set(e.subarray(s,s+a),this.pos);this.pos+=a;s+=a;if(this.pos===n){this.process(t,0);this.pos=0}}this.length+=e.length;this.roundClean();return this}digestInto(e){(0,_assert_js_1$3.exists)(this);(0,_assert_js_1$3.output)(e,this);this.finished=true;const{buffer:t,view:r,blockLen:n,isLE:i}=this;let{pos:s}=this;t[s++]=128;this.buffer.subarray(s).fill(0);if(this.padOffset>n-s){this.process(r,0);s=0}for(let e=s;e<n;e++)t[e]=0;setBigUint64$1(r,n-8,BigInt(this.length*8),i);this.process(r,0);const a=(0,utils_js_1$a.createView)(e);const o=this.outputLen;if(o%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const f=o/4;const c=this.get();if(f>c.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<f;e++)a.setUint32(4*e,c[e],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);this.destroy();return r}_cloneInto(e){e||(e=new this.constructor);e.set(...this.get());const{blockLen:t,buffer:r,length:n,finished:i,destroyed:s,pos:a}=this;e.length=n;e.pos=a;e.finished=i;e.destroyed=s;if(n%t)e.buffer.set(r);return e}}_sha2$1.SHA2=SHA2$1;Object.defineProperty(sha256$3,"__esModule",{value:true});sha256$3.sha224=sha256_1=sha256$3.sha256=void 0;const _sha2_js_1$3=_sha2$1;const utils_js_1$9=utils$u;const Chi$1=(e,t,r)=>e&t^~e&r;const Maj$1=(e,t,r)=>e&t^e&r^t&r;const SHA256_K$1=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);const IV$1=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]);const SHA256_W$1=new Uint32Array(64);class SHA256$5 extends _sha2_js_1$3.SHA2{constructor(){super(64,32,8,false);this.A=IV$1[0]|0;this.B=IV$1[1]|0;this.C=IV$1[2]|0;this.D=IV$1[3]|0;this.E=IV$1[4]|0;this.F=IV$1[5]|0;this.G=IV$1[6]|0;this.H=IV$1[7]|0}get(){const{A:e,B:t,C:r,D:n,E:i,F:s,G:a,H:o}=this;return[e,t,r,n,i,s,a,o]}set(e,t,r,n,i,s,a,o){this.A=e|0;this.B=t|0;this.C=r|0;this.D=n|0;this.E=i|0;this.F=s|0;this.G=a|0;this.H=o|0}process(e,t){for(let r=0;r<16;r++,t+=4)SHA256_W$1[r]=e.getUint32(t,false);for(let e=16;e<64;e++){const t=SHA256_W$1[e-15];const r=SHA256_W$1[e-2];const n=(0,utils_js_1$9.rotr)(t,7)^(0,utils_js_1$9.rotr)(t,18)^t>>>3;const i=(0,utils_js_1$9.rotr)(r,17)^(0,utils_js_1$9.rotr)(r,19)^r>>>10;SHA256_W$1[e]=i+SHA256_W$1[e-7]+n+SHA256_W$1[e-16]|0}let{A:r,B:n,C:i,D:s,E:a,F:o,G:f,H:c}=this;for(let e=0;e<64;e++){const t=(0,utils_js_1$9.rotr)(a,6)^(0,utils_js_1$9.rotr)(a,11)^(0,utils_js_1$9.rotr)(a,25);const u=c+t+Chi$1(a,o,f)+SHA256_K$1[e]+SHA256_W$1[e]|0;const l=(0,utils_js_1$9.rotr)(r,2)^(0,utils_js_1$9.rotr)(r,13)^(0,utils_js_1$9.rotr)(r,22);const h=l+Maj$1(r,n,i)|0;c=f;f=o;o=a;a=s+u|0;s=i;i=n;n=r;r=u+h|0}r=r+this.A|0;n=n+this.B|0;i=i+this.C|0;s=s+this.D|0;a=a+this.E|0;o=o+this.F|0;f=f+this.G|0;c=c+this.H|0;this.set(r,n,i,s,a,o,f,c)}roundClean(){SHA256_W$1.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0);this.buffer.fill(0)}}class SHA224$3 extends SHA256$5{constructor(){super();this.A=3238371032|0;this.B=914150663|0;this.C=812702999|0;this.D=4144912697|0;this.E=4290775857|0;this.F=1750603025|0;this.G=1694076839|0;this.H=3204075428|0;this.outputLen=28}}var sha256_1=sha256$3.sha256=(0,utils_js_1$9.wrapConstructor)((()=>new SHA256$5));sha256$3.sha224=(0,utils_js_1$9.wrapConstructor)((()=>new SHA224$3));var sha512$2={};var _u64={};Object.defineProperty(_u64,"__esModule",{value:true});_u64.add5L=_u64.add5H=_u64.add4H=_u64.add4L=_u64.add3H=_u64.add3L=_u64.add=_u64.rotlBL=_u64.rotlBH=_u64.rotlSL=_u64.rotlSH=_u64.rotr32L=_u64.rotr32H=_u64.rotrBL=_u64.rotrBH=_u64.rotrSL=_u64.rotrSH=_u64.shrSL=_u64.shrSH=_u64.toBig=_u64.split=_u64.fromBig=void 0;const U32_MASK64=BigInt(2**32-1);const _32n=BigInt(32);function fromBig(e,t=false){if(t)return{h:Number(e&U32_MASK64),l:Number(e>>_32n&U32_MASK64)};return{h:Number(e>>_32n&U32_MASK64)|0,l:Number(e&U32_MASK64)|0}}_u64.fromBig=fromBig;function split$1(e,t=false){let r=new Uint32Array(e.length);let n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:s,l:a}=fromBig(e[i],t);[r[i],n[i]]=[s,a]}return[r,n]}_u64.split=split$1;const toBig=(e,t)=>BigInt(e>>>0)<<_32n|BigInt(t>>>0);_u64.toBig=toBig;const shrSH=(e,t,r)=>e>>>r;_u64.shrSH=shrSH;const shrSL=(e,t,r)=>e<<32-r|t>>>r;_u64.shrSL=shrSL;const rotrSH=(e,t,r)=>e>>>r|t<<32-r;_u64.rotrSH=rotrSH;const rotrSL=(e,t,r)=>e<<32-r|t>>>r;_u64.rotrSL=rotrSL;const rotrBH=(e,t,r)=>e<<64-r|t>>>r-32;_u64.rotrBH=rotrBH;const rotrBL=(e,t,r)=>e>>>r-32|t<<64-r;_u64.rotrBL=rotrBL;const rotr32H=(e,t)=>t;_u64.rotr32H=rotr32H;const rotr32L=(e,t)=>e;_u64.rotr32L=rotr32L;const rotlSH=(e,t,r)=>e<<r|t>>>32-r;_u64.rotlSH=rotlSH;const rotlSL=(e,t,r)=>t<<r|e>>>32-r;_u64.rotlSL=rotlSL;const rotlBH=(e,t,r)=>t<<r-32|e>>>64-r;_u64.rotlBH=rotlBH;const rotlBL=(e,t,r)=>e<<r-32|t>>>64-r;_u64.rotlBL=rotlBL;function add(e,t,r,n){const i=(t>>>0)+(n>>>0);return{h:e+r+(i/2**32|0)|0,l:i|0}}_u64.add=add;const add3L=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0);_u64.add3L=add3L;const add3H=(e,t,r,n)=>t+r+n+(e/2**32|0)|0;_u64.add3H=add3H;const add4L=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0);_u64.add4L=add4L;const add4H=(e,t,r,n,i)=>t+r+n+i+(e/2**32|0)|0;_u64.add4H=add4H;const add5L=(e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0);_u64.add5L=add5L;const add5H=(e,t,r,n,i,s)=>t+r+n+i+s+(e/2**32|0)|0;_u64.add5H=add5H;const u64={fromBig,split:split$1,toBig,shrSH,shrSL,rotrSH,rotrSL,rotrBH,rotrBL,rotr32H,rotr32L,rotlSH,rotlSL,rotlBH,rotlBL,add,add3L,add3H,add4L,add4H,add5H,add5L};_u64.default=u64;Object.defineProperty(sha512$2,"__esModule",{value:true});sha512$2.sha384=sha512$2.sha512_256=sha512$2.sha512_224=sha512_1=sha512$2.sha512=sha512$2.SHA512=void 0;const _sha2_js_1$2=_sha2$1;const _u64_js_1$1=_u64;const utils_js_1$8=utils$u;const[SHA512_Kh,SHA512_Kl]=(()=>_u64_js_1$1.default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((e=>BigInt(e)))))();const SHA512_W_H=new Uint32Array(80);const SHA512_W_L=new Uint32Array(80);class SHA512$4 extends _sha2_js_1$2.SHA2{constructor(){super(128,64,16,false);this.Ah=1779033703|0;this.Al=4089235720|0;this.Bh=3144134277|0;this.Bl=2227873595|0;this.Ch=1013904242|0;this.Cl=4271175723|0;this.Dh=2773480762|0;this.Dl=1595750129|0;this.Eh=1359893119|0;this.El=2917565137|0;this.Fh=2600822924|0;this.Fl=725511199|0;this.Gh=528734635|0;this.Gl=4215389547|0;this.Hh=1541459225|0;this.Hl=327033209|0}get(){const{Ah:e,Al:t,Bh:r,Bl:n,Ch:i,Cl:s,Dh:a,Dl:o,Eh:f,El:c,Fh:u,Fl:l,Gh:h,Gl:d,Hh:p,Hl:y}=this;return[e,t,r,n,i,s,a,o,f,c,u,l,h,d,p,y]}set(e,t,r,n,i,s,a,o,f,c,u,l,h,d,p,y){this.Ah=e|0;this.Al=t|0;this.Bh=r|0;this.Bl=n|0;this.Ch=i|0;this.Cl=s|0;this.Dh=a|0;this.Dl=o|0;this.Eh=f|0;this.El=c|0;this.Fh=u|0;this.Fl=l|0;this.Gh=h|0;this.Gl=d|0;this.Hh=p|0;this.Hl=y|0}process(e,t){for(let r=0;r<16;r++,t+=4){SHA512_W_H[r]=e.getUint32(t);SHA512_W_L[r]=e.getUint32(t+=4)}for(let e=16;e<80;e++){const t=SHA512_W_H[e-15]|0;const r=SHA512_W_L[e-15]|0;const n=_u64_js_1$1.default.rotrSH(t,r,1)^_u64_js_1$1.default.rotrSH(t,r,8)^_u64_js_1$1.default.shrSH(t,r,7);const i=_u64_js_1$1.default.rotrSL(t,r,1)^_u64_js_1$1.default.rotrSL(t,r,8)^_u64_js_1$1.default.shrSL(t,r,7);const s=SHA512_W_H[e-2]|0;const a=SHA512_W_L[e-2]|0;const o=_u64_js_1$1.default.rotrSH(s,a,19)^_u64_js_1$1.default.rotrBH(s,a,61)^_u64_js_1$1.default.shrSH(s,a,6);const f=_u64_js_1$1.default.rotrSL(s,a,19)^_u64_js_1$1.default.rotrBL(s,a,61)^_u64_js_1$1.default.shrSL(s,a,6);const c=_u64_js_1$1.default.add4L(i,f,SHA512_W_L[e-7],SHA512_W_L[e-16]);const u=_u64_js_1$1.default.add4H(c,n,o,SHA512_W_H[e-7],SHA512_W_H[e-16]);SHA512_W_H[e]=u|0;SHA512_W_L[e]=c|0}let{Ah:r,Al:n,Bh:i,Bl:s,Ch:a,Cl:o,Dh:f,Dl:c,Eh:u,El:l,Fh:h,Fl:d,Gh:p,Gl:y,Hh:m,Hl:g}=this;for(let e=0;e<80;e++){const t=_u64_js_1$1.default.rotrSH(u,l,14)^_u64_js_1$1.default.rotrSH(u,l,18)^_u64_js_1$1.default.rotrBH(u,l,41);const b=_u64_js_1$1.default.rotrSL(u,l,14)^_u64_js_1$1.default.rotrSL(u,l,18)^_u64_js_1$1.default.rotrBL(u,l,41);const A=u&h^~u&p;const w=l&d^~l&y;const E=_u64_js_1$1.default.add5L(g,b,w,SHA512_Kl[e],SHA512_W_L[e]);const v=_u64_js_1$1.default.add5H(E,m,t,A,SHA512_Kh[e],SHA512_W_H[e]);const _=E|0;const S=_u64_js_1$1.default.rotrSH(r,n,28)^_u64_js_1$1.default.rotrBH(r,n,34)^_u64_js_1$1.default.rotrBH(r,n,39);const $=_u64_js_1$1.default.rotrSL(r,n,28)^_u64_js_1$1.default.rotrBL(r,n,34)^_u64_js_1$1.default.rotrBL(r,n,39);const T=r&i^r&a^i&a;const I=n&s^n&o^s&o;m=p|0;g=y|0;p=h|0;y=d|0;h=u|0;d=l|0;({h:u,l}=_u64_js_1$1.default.add(f|0,c|0,v|0,_|0));f=a|0;c=o|0;a=i|0;o=s|0;i=r|0;s=n|0;const C=_u64_js_1$1.default.add3L(_,$,I);r=_u64_js_1$1.default.add3H(C,v,S,T);n=C|0}({h:r,l:n}=_u64_js_1$1.default.add(this.Ah|0,this.Al|0,r|0,n|0));({h:i,l:s}=_u64_js_1$1.default.add(this.Bh|0,this.Bl|0,i|0,s|0));({h:a,l:o}=_u64_js_1$1.default.add(this.Ch|0,this.Cl|0,a|0,o|0));({h:f,l:c}=_u64_js_1$1.default.add(this.Dh|0,this.Dl|0,f|0,c|0));({h:u,l}=_u64_js_1$1.default.add(this.Eh|0,this.El|0,u|0,l|0));({h,l:d}=_u64_js_1$1.default.add(this.Fh|0,this.Fl|0,h|0,d|0));({h:p,l:y}=_u64_js_1$1.default.add(this.Gh|0,this.Gl|0,p|0,y|0));({h:m,l:g}=_u64_js_1$1.default.add(this.Hh|0,this.Hl|0,m|0,g|0));this.set(r,n,i,s,a,o,f,c,u,l,h,d,p,y,m,g)}roundClean(){SHA512_W_H.fill(0);SHA512_W_L.fill(0)}destroy(){this.buffer.fill(0);this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}sha512$2.SHA512=SHA512$4;class SHA512_224 extends SHA512$4{constructor(){super();this.Ah=2352822216|0;this.Al=424955298|0;this.Bh=1944164710|0;this.Bl=2312950998|0;this.Ch=502970286|0;this.Cl=855612546|0;this.Dh=1738396948|0;this.Dl=1479516111|0;this.Eh=258812777|0;this.El=2077511080|0;this.Fh=2011393907|0;this.Fl=79989058|0;this.Gh=1067287976|0;this.Gl=1780299464|0;this.Hh=286451373|0;this.Hl=2446758561|0;this.outputLen=28}}class SHA512_256 extends SHA512$4{constructor(){super();this.Ah=573645204|0;this.Al=4230739756|0;this.Bh=2673172387|0;this.Bl=3360449730|0;this.Ch=596883563|0;this.Cl=1867755857|0;this.Dh=2520282905|0;this.Dl=1497426621|0;this.Eh=2519219938|0;this.El=2827943907|0;this.Fh=3193839141|0;this.Fl=1401305490|0;this.Gh=721525244|0;this.Gl=746961066|0;this.Hh=246885852|0;this.Hl=2177182882|0;this.outputLen=32}}class SHA384$3 extends SHA512$4{constructor(){super();this.Ah=3418070365|0;this.Al=3238371032|0;this.Bh=1654270250|0;this.Bl=914150663|0;this.Ch=2438529370|0;this.Cl=812702999|0;this.Dh=355462360|0;this.Dl=4144912697|0;this.Eh=1731405415|0;this.El=4290775857|0;this.Fh=2394180231|0;this.Fl=1750603025|0;this.Gh=3675008525|0;this.Gl=1694076839|0;this.Hh=1203062813|0;this.Hl=3204075428|0;this.outputLen=48}}var sha512_1=sha512$2.sha512=(0,utils_js_1$8.wrapConstructor)((()=>new SHA512$4));sha512$2.sha512_224=(0,utils_js_1$8.wrapConstructor)((()=>new SHA512_224));sha512$2.sha512_256=(0,utils_js_1$8.wrapConstructor)((()=>new SHA512_256));sha512$2.sha384=(0,utils_js_1$8.wrapConstructor)((()=>new SHA384$3));function getGlobal$1(){if(typeof self!=="undefined"){return self}if(typeof window!=="undefined"){return window}if(typeof global!=="undefined"){return global}throw new Error("unable to locate global object")}const anyGlobal=getGlobal$1();const crypto$7=anyGlobal.crypto||anyGlobal.msCrypto;function createHash(e){switch(e){case"sha256":return sha256_1.create();case"sha512":return sha512_1.create()}assertArgument(false,"invalid hashing algorithm name","algorithm",e)}function createHmac(e,t){const r={sha256:sha256_1,sha512:sha512_1}[e];assertArgument(r!=null,"invalid hmac algorithm","algorithm",e);return hmac$2.hmac.create(r,t)}function pbkdf2Sync(e,t,r,n,i){const s={sha256:sha256_1,sha512:sha512_1}[i];assertArgument(s!=null,"invalid pbkdf2 algorithm","algorithm",i);return pbkdf2_2(s,e,t,{c:r,dkLen:n})}function randomBytes$1(e){assert$m(crypto$7!=null,"platform does not support secure random numbers","UNSUPPORTED_OPERATION",{operation:"randomBytes"});assertArgument(Number.isInteger(e)&&e>0&&e<=1024,"invalid length","length",e);const t=new Uint8Array(e);crypto$7.getRandomValues(t);return t}let locked$4=false;const _computeHmac=function(e,t,r){return createHmac(e,t).update(r).digest()};let __computeHmac=_computeHmac;function computeHmac(e,t,r){const n=getBytes(t,"key");const i=getBytes(r,"data");return hexlify(__computeHmac(e,n,i))}computeHmac._=_computeHmac;computeHmac.lock=function(){locked$4=true};computeHmac.register=function(e){if(locked$4){throw new Error("computeHmac is locked")}__computeHmac=e};Object.freeze(computeHmac);var sha3$3={};Object.defineProperty(sha3$3,"__esModule",{value:true});sha3$3.shake256=sha3$3.shake128=sha3$3.keccak_512=sha3$3.keccak_384=keccak_256=sha3$3.keccak_256=sha3$3.keccak_224=sha3$3.sha3_512=sha3$3.sha3_384=sha3$3.sha3_256=sha3$3.sha3_224=sha3$3.Keccak=sha3$3.keccakP=void 0;const _assert_js_1$2=_assert$1;const _u64_js_1=_u64;const utils_js_1$7=utils$u;const[SHA3_PI,SHA3_ROTL,_SHA3_IOTA]=[[],[],[]];const _0n$3=BigInt(0);const _1n$3=BigInt(1);const _2n$2=BigInt(2);const _7n=BigInt(7);const _256n=BigInt(256);const _0x71n=BigInt(113);for(let e=0,t=_1n$3,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5];SHA3_PI.push(2*(5*n+r));SHA3_ROTL.push((e+1)*(e+2)/2%64);let i=_0n$3;for(let e=0;e<7;e++){t=(t<<_1n$3^(t>>_7n)*_0x71n)%_256n;if(t&_2n$2)i^=_1n$3<<(_1n$3<<BigInt(e))-_1n$3}_SHA3_IOTA.push(i)}const[SHA3_IOTA_H,SHA3_IOTA_L]=(0,_u64_js_1.split)(_SHA3_IOTA,true);const rotlH=(e,t,r)=>r>32?(0,_u64_js_1.rotlBH)(e,t,r):(0,_u64_js_1.rotlSH)(e,t,r);const rotlL=(e,t,r)=>r>32?(0,_u64_js_1.rotlBL)(e,t,r):(0,_u64_js_1.rotlSL)(e,t,r);function keccakP(e,t=24){const r=new Uint32Array(5*2);for(let n=24-t;n<24;n++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){const n=(t+8)%10;const i=(t+2)%10;const s=r[i];const a=r[i+1];const o=rotlH(s,a,1)^r[n];const f=rotlL(s,a,1)^r[n+1];for(let r=0;r<50;r+=10){e[t+r]^=o;e[t+r+1]^=f}}let t=e[2];let i=e[3];for(let r=0;r<24;r++){const n=SHA3_ROTL[r];const s=rotlH(t,i,n);const a=rotlL(t,i,n);const o=SHA3_PI[r];t=e[o];i=e[o+1];e[o]=s;e[o+1]=a}for(let t=0;t<50;t+=10){for(let n=0;n<10;n++)r[n]=e[t+n];for(let n=0;n<10;n++)e[t+n]^=~r[(n+2)%10]&r[(n+4)%10]}e[0]^=SHA3_IOTA_H[n];e[1]^=SHA3_IOTA_L[n]}r.fill(0)}sha3$3.keccakP=keccakP;class Keccak$1 extends utils_js_1$7.Hash{constructor(e,t,r,n=false,i=24){super();this.blockLen=e;this.suffix=t;this.outputLen=r;this.enableXOF=n;this.rounds=i;this.pos=0;this.posOut=0;this.finished=false;this.destroyed=false;(0,_assert_js_1$2.number)(r);if(0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200);this.state32=(0,utils_js_1$7.u32)(this.state)}keccak(){keccakP(this.state32,this.rounds);this.posOut=0;this.pos=0}update(e){(0,_assert_js_1$2.exists)(this);const{blockLen:t,state:r}=this;e=(0,utils_js_1$7.toBytes)(e);const n=e.length;for(let i=0;i<n;){const s=Math.min(t-this.pos,n-i);for(let t=0;t<s;t++)r[this.pos++]^=e[i++];if(this.pos===t)this.keccak()}return this}finish(){if(this.finished)return;this.finished=true;const{state:e,suffix:t,pos:r,blockLen:n}=this;e[r]^=t;if((t&128)!==0&&r===n-1)this.keccak();e[n-1]^=128;this.keccak()}writeInto(e){(0,_assert_js_1$2.exists)(this,false);(0,_assert_js_1$2.bytes)(e);this.finish();const t=this.state;const{blockLen:r}=this;for(let n=0,i=e.length;n<i;){if(this.posOut>=r)this.keccak();const s=Math.min(r-this.posOut,i-n);e.set(t.subarray(this.posOut,this.posOut+s),n);this.posOut+=s;n+=s}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){(0,_assert_js_1$2.number)(e);return this.xofInto(new Uint8Array(e))}digestInto(e){(0,_assert_js_1$2.output)(e,this);if(this.finished)throw new Error("digest() was already called");this.writeInto(e);this.destroy();return e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=true;this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:n,rounds:i,enableXOF:s}=this;e||(e=new Keccak$1(t,r,n,s,i));e.state32.set(this.state32);e.pos=this.pos;e.posOut=this.posOut;e.finished=this.finished;e.rounds=i;e.suffix=r;e.outputLen=n;e.enableXOF=s;e.destroyed=this.destroyed;return e}}sha3$3.Keccak=Keccak$1;const gen=(e,t,r)=>(0,utils_js_1$7.wrapConstructor)((()=>new Keccak$1(t,e,r)));sha3$3.sha3_224=gen(6,144,224/8);sha3$3.sha3_256=gen(6,136,256/8);sha3$3.sha3_384=gen(6,104,384/8);sha3$3.sha3_512=gen(6,72,512/8);sha3$3.keccak_224=gen(1,144,224/8);var keccak_256=sha3$3.keccak_256=gen(1,136,256/8);sha3$3.keccak_384=gen(1,104,384/8);sha3$3.keccak_512=gen(1,72,512/8);const genShake=(e,t,r)=>(0,utils_js_1$7.wrapXOFConstructorWithOpts)(((n={})=>new Keccak$1(t,e,n.dkLen===undefined?r:n.dkLen,true)));sha3$3.shake128=genShake(31,168,128/8);sha3$3.shake256=genShake(31,136,256/8);let locked$3=false;const _keccak256=function(e){return keccak_256(e)};let __keccak256=_keccak256;function keccak256(e){const t=getBytes(e,"data");return hexlify(__keccak256(t))}keccak256._=_keccak256;keccak256.lock=function(){locked$3=true};keccak256.register=function(e){if(locked$3){throw new TypeError("keccak256 is locked")}__keccak256=e};Object.freeze(keccak256);var ripemd160$1={};Object.defineProperty(ripemd160$1,"__esModule",{value:true});var ripemd160_1=ripemd160$1.ripemd160=ripemd160$1.RIPEMD160=void 0;const _sha2_js_1$1=_sha2$1;const utils_js_1$6=utils$u;const Rho=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]);const Id=Uint8Array.from({length:16},((e,t)=>t));const Pi=Id.map((e=>(9*e+5)%16));let idxL=[Id];let idxR=[Pi];for(let e=0;e<4;e++)for(let t of[idxL,idxR])t.push(t[e].map((e=>Rho[e])));const shifts=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map((e=>new Uint8Array(e)));const shiftsL=idxL.map(((e,t)=>e.map((e=>shifts[t][e]))));const shiftsR=idxR.map(((e,t)=>e.map((e=>shifts[t][e]))));const Kl=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]);const Kr=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]);const rotl$1=(e,t)=>e<<t|e>>>32-t;function f$2(e,t,r,n){if(e===0)return t^r^n;else if(e===1)return t&r|~t&n;else if(e===2)return(t|~r)^n;else if(e===3)return t&n|r&~n;else return t^(r|~n)}const BUF=new Uint32Array(16);class RIPEMD160$1 extends _sha2_js_1$1.SHA2{constructor(){super(64,20,8,true);this.h0=1732584193|0;this.h1=4023233417|0;this.h2=2562383102|0;this.h3=271733878|0;this.h4=3285377520|0}get(){const{h0:e,h1:t,h2:r,h3:n,h4:i}=this;return[e,t,r,n,i]}set(e,t,r,n,i){this.h0=e|0;this.h1=t|0;this.h2=r|0;this.h3=n|0;this.h4=i|0}process(e,t){for(let r=0;r<16;r++,t+=4)BUF[r]=e.getUint32(t,true);let r=this.h0|0,n=r,i=this.h1|0,s=i,a=this.h2|0,o=a,f=this.h3|0,c=f,u=this.h4|0,l=u;for(let e=0;e<5;e++){const t=4-e;const h=Kl[e],d=Kr[e];const p=idxL[e],y=idxR[e];const m=shiftsL[e],g=shiftsR[e];for(let t=0;t<16;t++){const n=rotl$1(r+f$2(e,i,a,f)+BUF[p[t]]+h,m[t])+u|0;r=u,u=f,f=rotl$1(a,10)|0,a=i,i=n}for(let e=0;e<16;e++){const r=rotl$1(n+f$2(t,s,o,c)+BUF[y[e]]+d,g[e])+l|0;n=l,l=c,c=rotl$1(o,10)|0,o=s,s=r}}this.set(this.h1+a+c|0,this.h2+f+l|0,this.h3+u+n|0,this.h4+r+s|0,this.h0+i+o|0)}roundClean(){BUF.fill(0)}destroy(){this.destroyed=true;this.buffer.fill(0);this.set(0,0,0,0,0)}}ripemd160$1.RIPEMD160=RIPEMD160$1;ripemd160_1=ripemd160$1.ripemd160=(0,utils_js_1$6.wrapConstructor)((()=>new RIPEMD160$1));let locked$2=false;const _ripemd160=function(e){return ripemd160_1(e)};let __ripemd160=_ripemd160;function ripemd160(e){const t=getBytes(e,"data");return hexlify(__ripemd160(t))}ripemd160._=_ripemd160;ripemd160.lock=function(){locked$2=true};ripemd160.register=function(e){if(locked$2){throw new TypeError("ripemd160 is locked")}__ripemd160=e};Object.freeze(ripemd160);let locked$1=false;const _pbkdf2=function(e,t,r,n,i){return pbkdf2Sync(e,t,r,n,i)};let __pbkdf2=_pbkdf2;function pbkdf2(e,t,r,n,i){const s=getBytes(e,"password");const a=getBytes(t,"salt");return hexlify(__pbkdf2(s,a,r,n,i))}pbkdf2._=_pbkdf2;pbkdf2.lock=function(){locked$1=true};pbkdf2.register=function(e){if(locked$1){throw new Error("pbkdf2 is locked")}__pbkdf2=e};Object.freeze(pbkdf2);let locked=false;const _randomBytes=function(e){return new Uint8Array(randomBytes$1(e))};let __randomBytes=_randomBytes;function randomBytes(e){return __randomBytes(e)}randomBytes._=_randomBytes;randomBytes.lock=function(){locked=true};randomBytes.register=function(e){if(locked){throw new Error("randomBytes is locked")}__randomBytes=e};Object.freeze(randomBytes);var scrypt$2={};Object.defineProperty(scrypt$2,"__esModule",{value:true});var scryptAsync_1=scrypt$2.scryptAsync=scrypt_2=scrypt$2.scrypt=void 0;const _assert_js_1$1=_assert$1;const sha256_js_1=sha256$3;const pbkdf2_js_1=pbkdf2$2;const utils_js_1$5=utils$u;const rotl=(e,t)=>e<<t|e>>>32-t;function XorAndSalsa(e,t,r,n,i,s){let a=e[t++]^r[n++],o=e[t++]^r[n++];let f=e[t++]^r[n++],c=e[t++]^r[n++];let u=e[t++]^r[n++],l=e[t++]^r[n++];let h=e[t++]^r[n++],d=e[t++]^r[n++];let p=e[t++]^r[n++],y=e[t++]^r[n++];let m=e[t++]^r[n++],g=e[t++]^r[n++];let b=e[t++]^r[n++],A=e[t++]^r[n++];let w=e[t++]^r[n++],E=e[t++]^r[n++];let v=a,_=o,S=f,$=c,T=u,I=l,C=h,P=d,R=p,N=y,k=m,O=g,x=b,B=A,D=w,M=E;for(let e=0;e<8;e+=2){T^=rotl(v+x|0,7);R^=rotl(T+v|0,9);x^=rotl(R+T|0,13);v^=rotl(x+R|0,18);N^=rotl(I+_|0,7);B^=rotl(N+I|0,9);_^=rotl(B+N|0,13);I^=rotl(_+B|0,18);D^=rotl(k+C|0,7);S^=rotl(D+k|0,9);C^=rotl(S+D|0,13);k^=rotl(C+S|0,18);$^=rotl(M+O|0,7);P^=rotl($+M|0,9);O^=rotl(P+$|0,13);M^=rotl(O+P|0,18);_^=rotl(v+$|0,7);S^=rotl(_+v|0,9);$^=rotl(S+_|0,13);v^=rotl($+S|0,18);C^=rotl(I+T|0,7);P^=rotl(C+I|0,9);T^=rotl(P+C|0,13);I^=rotl(T+P|0,18);O^=rotl(k+N|0,7);R^=rotl(O+k|0,9);N^=rotl(R+O|0,13);k^=rotl(N+R|0,18);x^=rotl(M+D|0,7);B^=rotl(x+M|0,9);D^=rotl(B+x|0,13);M^=rotl(D+B|0,18)}i[s++]=a+v|0;i[s++]=o+_|0;i[s++]=f+S|0;i[s++]=c+$|0;i[s++]=u+T|0;i[s++]=l+I|0;i[s++]=h+C|0;i[s++]=d+P|0;i[s++]=p+R|0;i[s++]=y+N|0;i[s++]=m+k|0;i[s++]=g+O|0;i[s++]=b+x|0;i[s++]=A+B|0;i[s++]=w+D|0;i[s++]=E+M|0}function BlockMix(e,t,r,n,i){let s=n+0;let a=n+16*i;for(let n=0;n<16;n++)r[a+n]=e[t+(2*i-1)*16+n];for(let n=0;n<i;n++,s+=16,t+=16){XorAndSalsa(r,a,e,t,r,s);if(n>0)a+=16;XorAndSalsa(r,s,e,t+=16,r,a)}}function scryptInit(e,t,r){const n=(0,utils_js_1$5.checkOpts)({dkLen:32,asyncTick:10,maxmem:1024**3+1024},r);const{N:i,r:s,p:a,dkLen:o,asyncTick:f,maxmem:c,onProgress:u}=n;(0,_assert_js_1$1.number)(i);(0,_assert_js_1$1.number)(s);(0,_assert_js_1$1.number)(a);(0,_assert_js_1$1.number)(o);(0,_assert_js_1$1.number)(f);(0,_assert_js_1$1.number)(c);if(u!==undefined&&typeof u!=="function")throw new Error("progressCb should be function");const l=128*s;const h=l/4;if(i<=1||(i&i-1)!==0||i>=2**(l/8)||i>2**32){throw new Error("Scrypt: N must be larger than 1, a power of 2, less than 2^(128 * r / 8) and less than 2^32")}if(a<0||a>(2**32-1)*32/l){throw new Error("Scrypt: p must be a positive integer less than or equal to ((2^32 - 1) * 32) / (128 * r)")}if(o<0||o>(2**32-1)*32){throw new Error("Scrypt: dkLen should be positive integer less than or equal to (2^32 - 1) * 32")}const d=l*(i+a);if(d>c){throw new Error(`Scrypt: parameters too large, ${d} (128 * r * (N + p)) > ${c} (maxmem)`)}const p=(0,pbkdf2_js_1.pbkdf2)(sha256_js_1.sha256,e,t,{c:1,dkLen:l*a});const y=(0,utils_js_1$5.u32)(p);const m=(0,utils_js_1$5.u32)(new Uint8Array(l*i));const g=(0,utils_js_1$5.u32)(new Uint8Array(l));let b=()=>{};if(u){const e=2*i*a;const t=Math.max(Math.floor(e/1e4),1);let r=0;b=()=>{r++;if(u&&(!(r%t)||r===e))u(r/e)}}return{N:i,r:s,p:a,dkLen:o,blockSize32:h,V:m,B32:y,B:p,tmp:g,blockMixCb:b,asyncTick:f}}function scryptOutput(e,t,r,n,i){const s=(0,pbkdf2_js_1.pbkdf2)(sha256_js_1.sha256,e,r,{c:1,dkLen:t});r.fill(0);n.fill(0);i.fill(0);return s}function scrypt$1(e,t,r){const{N:n,r:i,p:s,dkLen:a,blockSize32:o,V:f,B32:c,B:u,tmp:l,blockMixCb:h}=scryptInit(e,t,r);for(let e=0;e<s;e++){const t=o*e;for(let e=0;e<o;e++)f[e]=c[t+e];for(let e=0,t=0;e<n-1;e++){BlockMix(f,t,f,t+=o,i);h()}BlockMix(f,(n-1)*o,c,t,i);h();for(let e=0;e<n;e++){const e=c[t+o-16]%n;for(let r=0;r<o;r++)l[r]=c[t+r]^f[e*o+r];BlockMix(l,0,c,t,i);h()}}return scryptOutput(e,a,u,f,l)}var scrypt_2=scrypt$2.scrypt=scrypt$1;async function scryptAsync(e,t,r){const{N:n,r:i,p:s,dkLen:a,blockSize32:o,V:f,B32:c,B:u,tmp:l,blockMixCb:h,asyncTick:d}=scryptInit(e,t,r);for(let e=0;e<s;e++){const t=o*e;for(let e=0;e<o;e++)f[e]=c[t+e];let r=0;await(0,utils_js_1$5.asyncLoop)(n-1,d,(()=>{BlockMix(f,r,f,r+=o,i);h()}));BlockMix(f,(n-1)*o,c,t,i);h();await(0,utils_js_1$5.asyncLoop)(n,d,(()=>{const e=c[t+o-16]%n;for(let r=0;r<o;r++)l[r]=c[t+r]^f[e*o+r];BlockMix(l,0,c,t,i);h()}))}return scryptOutput(e,a,u,f,l)}scryptAsync_1=scrypt$2.scryptAsync=scryptAsync;let lockedSync=false,lockedAsync=false;const _scryptAsync=async function(e,t,r,n,i,s,a){return await scryptAsync_1(e,t,{N:r,r:n,p:i,dkLen:s,onProgress:a})};const _scryptSync=function(e,t,r,n,i,s){return scrypt_2(e,t,{N:r,r:n,p:i,dkLen:s})};let __scryptAsync=_scryptAsync;let __scryptSync=_scryptSync;async function scrypt(e,t,r,n,i,s,a){const o=getBytes(e,"passwd");const f=getBytes(t,"salt");return hexlify(await __scryptAsync(o,f,r,n,i,s,a))}scrypt._=_scryptAsync;scrypt.lock=function(){lockedAsync=true};scrypt.register=function(e){if(lockedAsync){throw new Error("scrypt is locked")}__scryptAsync=e};Object.freeze(scrypt);function scryptSync(e,t,r,n,i,s){const a=getBytes(e,"passwd");const o=getBytes(t,"salt");return hexlify(__scryptSync(a,o,r,n,i,s))}scryptSync._=_scryptSync;scryptSync.lock=function(){lockedSync=true};scryptSync.register=function(e){if(lockedSync){throw new Error("scryptSync is locked")}__scryptSync=e};Object.freeze(scryptSync);const _sha256=function(e){return createHash("sha256").update(e).digest()};const _sha512=function(e){return createHash("sha512").update(e).digest()};let __sha256=_sha256;let __sha512=_sha512;let locked256=false,locked512=false;function sha256$2(e){const t=getBytes(e,"data");return hexlify(__sha256(t))}sha256$2._=_sha256;sha256$2.lock=function(){locked256=true};sha256$2.register=function(e){if(locked256){throw new Error("sha256 is locked")}__sha256=e};Object.freeze(sha256$2);function sha512$1(e){const t=getBytes(e,"data");return hexlify(__sha512(t))}sha512$1._=_sha512;sha512$1.lock=function(){locked512=true};sha512$1.register=function(e){if(locked512){throw new Error("sha512 is locked")}__sha512=e};Object.freeze(sha256$2);var secp256k1={};var sha256$1={};var _sha2={};var _assert={};Object.defineProperty(_assert,"__esModule",{value:true});_assert.output=_assert.exists=_assert.hash=_assert.bytes=_assert.bool=_assert.number=void 0;function number(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}_assert.number=number;function bool(e){if(typeof e!=="boolean")throw new Error(`Expected boolean, not ${e}`)}_assert.bool=bool;function bytes$9(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}_assert.bytes=bytes$9;function hash$5(e){if(typeof e!=="function"||typeof e.create!=="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");number(e.outputLen);number(e.blockLen)}_assert.hash=hash$5;function exists$1(e,t=true){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}_assert.exists=exists$1;function output(e,t){bytes$9(e);const r=t.outputLen;if(e.length<r){throw new Error(`digestInto() expects output buffer of length at least ${r}`)}}_assert.output=output;const assert$k={number,bool,bytes:bytes$9,hash:hash$5,exists:exists$1,output};_assert.default=assert$k;var utils$t={};var crypto$6={};Object.defineProperty(crypto$6,"__esModule",{value:true});crypto$6.crypto=void 0;crypto$6.crypto=typeof globalThis==="object"&&"crypto"in globalThis?globalThis.crypto:undefined;(function(e){
/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */
Object.defineProperty(e,"__esModule",{value:true});e.randomBytes=e.wrapXOFConstructorWithOpts=e.wrapConstructorWithOpts=e.wrapConstructor=e.checkOpts=e.Hash=e.concatBytes=e.toBytes=e.utf8ToBytes=e.asyncLoop=e.nextTick=e.hexToBytes=e.bytesToHex=e.isLE=e.rotr=e.createView=e.u32=e.u8=void 0;const t=crypto$6;const r=e=>e instanceof Uint8Array;const n=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength);e.u8=n;const i=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));e.u32=i;const s=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);e.createView=s;const a=(e,t)=>e<<32-t|e>>>t;e.rotr=a;e.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!e.isLE)throw new Error("Non little-endian hardware is not supported");const o=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function f(e){if(!r(e))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++){t+=o[e[r]]}return t}e.bytesToHex=f;function c(e){if(typeof e!=="string")throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(t/2);for(let t=0;t<r.length;t++){const n=t*2;const i=e.slice(n,n+2);const s=Number.parseInt(i,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");r[t]=s}return r}e.hexToBytes=c;const u=async()=>{};e.nextTick=u;async function l(t,r,n){let i=Date.now();for(let s=0;s<t;s++){n(s);const t=Date.now()-i;if(t>=0&&t<r)continue;await(0,e.nextTick)();i+=t}}e.asyncLoop=l;function h(e){if(typeof e!=="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array((new TextEncoder).encode(e))}e.utf8ToBytes=h;function d(e){if(typeof e==="string")e=h(e);if(!r(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}e.toBytes=d;function p(...e){const t=new Uint8Array(e.reduce(((e,t)=>e+t.length),0));let n=0;e.forEach((e=>{if(!r(e))throw new Error("Uint8Array expected");t.set(e,n);n+=e.length}));return t}e.concatBytes=p;class y{clone(){return this._cloneInto()}}e.Hash=y;const m={}.toString;function g(e,t){if(t!==undefined&&m.call(t)!=="[object Object]")throw new Error("Options should be object or undefined");const r=Object.assign(e,t);return r}e.checkOpts=g;function b(e){const t=t=>e().update(d(t)).digest();const r=e();t.outputLen=r.outputLen;t.blockLen=r.blockLen;t.create=()=>e();return t}e.wrapConstructor=b;function A(e){const t=(t,r)=>e(r).update(d(t)).digest();const r=e({});t.outputLen=r.outputLen;t.blockLen=r.blockLen;t.create=t=>e(t);return t}e.wrapConstructorWithOpts=A;function w(e){const t=(t,r)=>e(r).update(d(t)).digest();const r=e({});t.outputLen=r.outputLen;t.blockLen=r.blockLen;t.create=t=>e(t);return t}e.wrapXOFConstructorWithOpts=w;function E(e=32){if(t.crypto&&typeof t.crypto.getRandomValues==="function"){return t.crypto.getRandomValues(new Uint8Array(e))}throw new Error("crypto.getRandomValues must be defined")}e.randomBytes=E})(utils$t);Object.defineProperty(_sha2,"__esModule",{value:true});_sha2.SHA2=void 0;const _assert_js_1=_assert;const utils_js_1$4=utils$t;function setBigUint64(e,t,r,n){if(typeof e.setBigUint64==="function")return e.setBigUint64(t,r,n);const i=BigInt(32);const s=BigInt(4294967295);const a=Number(r>>i&s);const o=Number(r&s);const f=n?4:0;const c=n?0:4;e.setUint32(t+f,a,n);e.setUint32(t+c,o,n)}class SHA2 extends utils_js_1$4.Hash{constructor(e,t,r,n){super();this.blockLen=e;this.outputLen=t;this.padOffset=r;this.isLE=n;this.finished=false;this.length=0;this.pos=0;this.destroyed=false;this.buffer=new Uint8Array(e);this.view=(0,utils_js_1$4.createView)(this.buffer)}update(e){(0,_assert_js_1.exists)(this);const{view:t,buffer:r,blockLen:n}=this;e=(0,utils_js_1$4.toBytes)(e);const i=e.length;for(let s=0;s<i;){const a=Math.min(n-this.pos,i-s);if(a===n){const t=(0,utils_js_1$4.createView)(e);for(;n<=i-s;s+=n)this.process(t,s);continue}r.set(e.subarray(s,s+a),this.pos);this.pos+=a;s+=a;if(this.pos===n){this.process(t,0);this.pos=0}}this.length+=e.length;this.roundClean();return this}digestInto(e){(0,_assert_js_1.exists)(this);(0,_assert_js_1.output)(e,this);this.finished=true;const{buffer:t,view:r,blockLen:n,isLE:i}=this;let{pos:s}=this;t[s++]=128;this.buffer.subarray(s).fill(0);if(this.padOffset>n-s){this.process(r,0);s=0}for(let e=s;e<n;e++)t[e]=0;setBigUint64(r,n-8,BigInt(this.length*8),i);this.process(r,0);const a=(0,utils_js_1$4.createView)(e);const o=this.outputLen;if(o%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const f=o/4;const c=this.get();if(f>c.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<f;e++)a.setUint32(4*e,c[e],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);this.destroy();return r}_cloneInto(e){e||(e=new this.constructor);e.set(...this.get());const{blockLen:t,buffer:r,length:n,finished:i,destroyed:s,pos:a}=this;e.length=n;e.pos=a;e.finished=i;e.destroyed=s;if(n%t)e.buffer.set(r);return e}}_sha2.SHA2=SHA2;Object.defineProperty(sha256$1,"__esModule",{value:true});sha256$1.sha224=sha256$1.sha256=void 0;const _sha2_js_1=_sha2;const utils_js_1$3=utils$t;const Chi=(e,t,r)=>e&t^~e&r;const Maj=(e,t,r)=>e&t^e&r^t&r;const SHA256_K=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);const IV=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]);const SHA256_W=new Uint32Array(64);class SHA256$4 extends _sha2_js_1.SHA2{constructor(){super(64,32,8,false);this.A=IV[0]|0;this.B=IV[1]|0;this.C=IV[2]|0;this.D=IV[3]|0;this.E=IV[4]|0;this.F=IV[5]|0;this.G=IV[6]|0;this.H=IV[7]|0}get(){const{A:e,B:t,C:r,D:n,E:i,F:s,G:a,H:o}=this;return[e,t,r,n,i,s,a,o]}set(e,t,r,n,i,s,a,o){this.A=e|0;this.B=t|0;this.C=r|0;this.D=n|0;this.E=i|0;this.F=s|0;this.G=a|0;this.H=o|0}process(e,t){for(let r=0;r<16;r++,t+=4)SHA256_W[r]=e.getUint32(t,false);for(let e=16;e<64;e++){const t=SHA256_W[e-15];const r=SHA256_W[e-2];const n=(0,utils_js_1$3.rotr)(t,7)^(0,utils_js_1$3.rotr)(t,18)^t>>>3;const i=(0,utils_js_1$3.rotr)(r,17)^(0,utils_js_1$3.rotr)(r,19)^r>>>10;SHA256_W[e]=i+SHA256_W[e-7]+n+SHA256_W[e-16]|0}let{A:r,B:n,C:i,D:s,E:a,F:o,G:f,H:c}=this;for(let e=0;e<64;e++){const t=(0,utils_js_1$3.rotr)(a,6)^(0,utils_js_1$3.rotr)(a,11)^(0,utils_js_1$3.rotr)(a,25);const u=c+t+Chi(a,o,f)+SHA256_K[e]+SHA256_W[e]|0;const l=(0,utils_js_1$3.rotr)(r,2)^(0,utils_js_1$3.rotr)(r,13)^(0,utils_js_1$3.rotr)(r,22);const h=l+Maj(r,n,i)|0;c=f;f=o;o=a;a=s+u|0;s=i;i=n;n=r;r=u+h|0}r=r+this.A|0;n=n+this.B|0;i=i+this.C|0;s=s+this.D|0;a=a+this.E|0;o=o+this.F|0;f=f+this.G|0;c=c+this.H|0;this.set(r,n,i,s,a,o,f,c)}roundClean(){SHA256_W.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0);this.buffer.fill(0)}}class SHA224$2 extends SHA256$4{constructor(){super();this.A=3238371032|0;this.B=914150663|0;this.C=812702999|0;this.D=4144912697|0;this.E=4290775857|0;this.F=1750603025|0;this.G=1694076839|0;this.H=3204075428|0;this.outputLen=28}}sha256$1.sha256=(0,utils_js_1$3.wrapConstructor)((()=>new SHA256$4));sha256$1.sha224=(0,utils_js_1$3.wrapConstructor)((()=>new SHA224$2));var modular={};var utils$s={};Object.defineProperty(utils$s,"__esModule",{value:true});utils$s.validateObject=utils$s.createHmacDrbg=utils$s.bitMask=utils$s.bitSet=utils$s.bitGet=utils$s.bitLen=utils$s.utf8ToBytes=utils$s.equalBytes=utils$s.concatBytes=utils$s.ensureBytes=utils$s.numberToVarBytesBE=utils$s.numberToBytesLE=utils$s.numberToBytesBE=utils$s.bytesToNumberLE=utils$s.bytesToNumberBE=utils$s.hexToBytes=utils$s.hexToNumber=utils$s.numberToHexUnpadded=utils$s.bytesToHex=void 0;
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$2=BigInt(0);const _1n$2=BigInt(1);const _2n$1=BigInt(2);const u8a=e=>e instanceof Uint8Array;const hexes=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function bytesToHex(e){if(!u8a(e))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++){t+=hexes[e[r]]}return t}utils$s.bytesToHex=bytesToHex;function numberToHexUnpadded(e){const t=e.toString(16);return t.length&1?`0${t}`:t}utils$s.numberToHexUnpadded=numberToHexUnpadded;function hexToNumber(e){if(typeof e!=="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}utils$s.hexToNumber=hexToNumber;function hexToBytes(e){if(typeof e!=="string")throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(t/2);for(let t=0;t<r.length;t++){const n=t*2;const i=e.slice(n,n+2);const s=Number.parseInt(i,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");r[t]=s}return r}utils$s.hexToBytes=hexToBytes;function bytesToNumberBE(e){return hexToNumber(bytesToHex(e))}utils$s.bytesToNumberBE=bytesToNumberBE;function bytesToNumberLE(e){if(!u8a(e))throw new Error("Uint8Array expected");return hexToNumber(bytesToHex(Uint8Array.from(e).reverse()))}utils$s.bytesToNumberLE=bytesToNumberLE;function numberToBytesBE(e,t){return hexToBytes(e.toString(16).padStart(t*2,"0"))}utils$s.numberToBytesBE=numberToBytesBE;function numberToBytesLE(e,t){return numberToBytesBE(e,t).reverse()}utils$s.numberToBytesLE=numberToBytesLE;function numberToVarBytesBE(e){return hexToBytes(numberToHexUnpadded(e))}utils$s.numberToVarBytesBE=numberToVarBytesBE;function ensureBytes(e,t,r){let n;if(typeof t==="string"){try{n=hexToBytes(t)}catch(r){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${r}`)}}else if(u8a(t)){n=Uint8Array.from(t)}else{throw new Error(`${e} must be hex string or Uint8Array`)}const i=n.length;if(typeof r==="number"&&i!==r)throw new Error(`${e} expected ${r} bytes, got ${i}`);return n}utils$s.ensureBytes=ensureBytes;function concatBytes(...e){const t=new Uint8Array(e.reduce(((e,t)=>e+t.length),0));let r=0;e.forEach((e=>{if(!u8a(e))throw new Error("Uint8Array expected");t.set(e,r);r+=e.length}));return t}utils$s.concatBytes=concatBytes;function equalBytes(e,t){if(e.length!==t.length)return false;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return false;return true}utils$s.equalBytes=equalBytes;function utf8ToBytes(e){if(typeof e!=="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array((new TextEncoder).encode(e))}utils$s.utf8ToBytes=utf8ToBytes;function bitLen(e){let t;for(t=0;e>_0n$2;e>>=_1n$2,t+=1);return t}utils$s.bitLen=bitLen;function bitGet(e,t){return e>>BigInt(t)&_1n$2}utils$s.bitGet=bitGet;const bitSet=(e,t,r)=>e|(r?_1n$2:_0n$2)<<BigInt(t);utils$s.bitSet=bitSet;const bitMask=e=>(_2n$1<<BigInt(e-1))-_1n$2;utils$s.bitMask=bitMask;const u8n=e=>new Uint8Array(e);const u8fr=e=>Uint8Array.from(e);function createHmacDrbg(e,t,r){if(typeof e!=="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!=="number"||t<2)throw new Error("qByteLen must be a number");if(typeof r!=="function")throw new Error("hmacFn must be a function");let n=u8n(e);let i=u8n(e);let s=0;const a=()=>{n.fill(1);i.fill(0);s=0};const o=(...e)=>r(i,n,...e);const f=(e=u8n())=>{i=o(u8fr([0]),e);n=o();if(e.length===0)return;i=o(u8fr([1]),e);n=o()};const c=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const r=[];while(e<t){n=o();const t=n.slice();r.push(t);e+=n.length}return concatBytes(...r)};const u=(e,t)=>{a();f(e);let r=undefined;while(!(r=t(c())))f();a();return r};return u}utils$s.createHmacDrbg=createHmacDrbg;const validatorFns={bigint:e=>typeof e==="bigint",function:e=>typeof e==="function",boolean:e=>typeof e==="boolean",string:e=>typeof e==="string",stringOrUint8Array:e=>typeof e==="string"||e instanceof Uint8Array,isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e==="function"&&Number.isSafeInteger(e.outputLen)};function validateObject(e,t,r={}){const n=(t,r,n)=>{const i=validatorFns[r];if(typeof i!=="function")throw new Error(`Invalid validator "${r}", expected function`);const s=e[t];if(n&&s===undefined)return;if(!i(s,e)){throw new Error(`Invalid param ${String(t)}=${s} (${typeof s}), expected ${r}`)}};for(const[e,r]of Object.entries(t))n(e,r,false);for(const[e,t]of Object.entries(r))n(e,t,true);return e}utils$s.validateObject=validateObject;Object.defineProperty(modular,"__esModule",{value:true});modular.mapHashToField=modular.getMinHashLength=modular.getFieldBytesLength=modular.hashToPrivateScalar=modular.FpSqrtEven=modular.FpSqrtOdd=modular.Field=modular.nLength=modular.FpIsSquare=modular.FpDiv=modular.FpInvertBatch=modular.FpPow=modular.validateField=modular.isNegativeLE=modular.FpSqrt=modular.tonelliShanks=modular.invert=modular.pow2=modular.pow=modular.mod=void 0;
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const utils_js_1$2=utils$s;const _0n$1=BigInt(0),_1n$1=BigInt(1),_2n=BigInt(2),_3n=BigInt(3);const _4n=BigInt(4),_5n=BigInt(5),_8n=BigInt(8);BigInt(9);BigInt(16);function mod(e,t){const r=e%t;return r>=_0n$1?r:t+r}modular.mod=mod;function pow(e,t,r){if(r<=_0n$1||t<_0n$1)throw new Error("Expected power/modulo > 0");if(r===_1n$1)return _0n$1;let n=_1n$1;while(t>_0n$1){if(t&_1n$1)n=n*e%r;e=e*e%r;t>>=_1n$1}return n}modular.pow=pow;function pow2(e,t,r){let n=e;while(t-- >_0n$1){n*=n;n%=r}return n}modular.pow2=pow2;function invert(e,t){if(e===_0n$1||t<=_0n$1){throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`)}let r=mod(e,t);let n=t;let i=_0n$1,s=_1n$1;while(r!==_0n$1){const e=n/r;const t=n%r;const a=i-s*e;n=r,r=t,i=s,s=a}const a=n;if(a!==_1n$1)throw new Error("invert: does not exist");return mod(i,t)}modular.invert=invert;function tonelliShanks(e){const t=(e-_1n$1)/_2n;let r,n,i;for(r=e-_1n$1,n=0;r%_2n===_0n$1;r/=_2n,n++);for(i=_2n;i<e&&pow(i,t,e)!==e-_1n$1;i++);if(n===1){const t=(e+_1n$1)/_4n;return function e(r,n){const i=r.pow(n,t);if(!r.eql(r.sqr(i),n))throw new Error("Cannot find square root");return i}}const s=(r+_1n$1)/_2n;return function e(a,o){if(a.pow(o,t)===a.neg(a.ONE))throw new Error("Cannot find square root");let f=n;let c=a.pow(a.mul(a.ONE,i),r);let u=a.pow(o,s);let l=a.pow(o,r);while(!a.eql(l,a.ONE)){if(a.eql(l,a.ZERO))return a.ZERO;let e=1;for(let t=a.sqr(l);e<f;e++){if(a.eql(t,a.ONE))break;t=a.sqr(t)}const t=a.pow(c,_1n$1<<BigInt(f-e-1));c=a.sqr(t);u=a.mul(u,t);l=a.mul(l,c);f=e}return u}}modular.tonelliShanks=tonelliShanks;function FpSqrt(e){if(e%_4n===_3n){const t=(e+_1n$1)/_4n;return function e(r,n){const i=r.pow(n,t);if(!r.eql(r.sqr(i),n))throw new Error("Cannot find square root");return i}}if(e%_8n===_5n){const t=(e-_5n)/_8n;return function e(r,n){const i=r.mul(n,_2n);const s=r.pow(i,t);const a=r.mul(n,s);const o=r.mul(r.mul(a,_2n),s);const f=r.mul(a,r.sub(o,r.ONE));if(!r.eql(r.sqr(f),n))throw new Error("Cannot find square root");return f}}return tonelliShanks(e)}modular.FpSqrt=FpSqrt;const isNegativeLE=(e,t)=>(mod(e,t)&_1n$1)===_1n$1;modular.isNegativeLE=isNegativeLE;const FIELD_FIELDS=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function validateField(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"};const r=FIELD_FIELDS.reduce(((e,t)=>{e[t]="function";return e}),t);return(0,utils_js_1$2.validateObject)(e,r)}modular.validateField=validateField;function FpPow(e,t,r){if(r<_0n$1)throw new Error("Expected power > 0");if(r===_0n$1)return e.ONE;if(r===_1n$1)return t;let n=e.ONE;let i=t;while(r>_0n$1){if(r&_1n$1)n=e.mul(n,i);i=e.sqr(i);r>>=_1n$1}return n}modular.FpPow=FpPow;function FpInvertBatch(e,t){const r=new Array(t.length);const n=t.reduce(((t,n,i)=>{if(e.is0(n))return t;r[i]=t;return e.mul(t,n)}),e.ONE);const i=e.inv(n);t.reduceRight(((t,n,i)=>{if(e.is0(n))return t;r[i]=e.mul(t,r[i]);return e.mul(t,n)}),i);return r}modular.FpInvertBatch=FpInvertBatch;function FpDiv(e,t,r){return e.mul(t,typeof r==="bigint"?invert(r,e.ORDER):e.inv(r))}modular.FpDiv=FpDiv;function FpIsSquare(e){const t=(e.ORDER-_1n$1)/_2n;return r=>{const n=e.pow(r,t);return e.eql(n,e.ZERO)||e.eql(n,e.ONE)}}modular.FpIsSquare=FpIsSquare;function nLength(e,t){const r=t!==undefined?t:e.toString(2).length;const n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}modular.nLength=nLength;function Field(e,t,r=false,n={}){if(e<=_0n$1)throw new Error(`Expected Field ORDER > 0, got ${e}`);const{nBitLength:i,nByteLength:s}=nLength(e,t);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const a=FpSqrt(e);const o=Object.freeze({ORDER:e,BITS:i,BYTES:s,MASK:(0,utils_js_1$2.bitMask)(i),ZERO:_0n$1,ONE:_1n$1,create:t=>mod(t,e),isValid:t=>{if(typeof t!=="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof t}`);return _0n$1<=t&&t<e},is0:e=>e===_0n$1,isOdd:e=>(e&_1n$1)===_1n$1,neg:t=>mod(-t,e),eql:(e,t)=>e===t,sqr:t=>mod(t*t,e),add:(t,r)=>mod(t+r,e),sub:(t,r)=>mod(t-r,e),mul:(t,r)=>mod(t*r,e),pow:(e,t)=>FpPow(o,e,t),div:(t,r)=>mod(t*invert(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>invert(t,e),sqrt:n.sqrt||(e=>a(o,e)),invertBatch:e=>FpInvertBatch(o,e),cmov:(e,t,r)=>r?t:e,toBytes:e=>r?(0,utils_js_1$2.numberToBytesLE)(e,s):(0,utils_js_1$2.numberToBytesBE)(e,s),fromBytes:e=>{if(e.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${e.length}`);return r?(0,utils_js_1$2.bytesToNumberLE)(e):(0,utils_js_1$2.bytesToNumberBE)(e)}});return Object.freeze(o)}modular.Field=Field;function FpSqrtOdd(e,t){if(!e.isOdd)throw new Error(`Field doesn't have isOdd`);const r=e.sqrt(t);return e.isOdd(r)?r:e.neg(r)}modular.FpSqrtOdd=FpSqrtOdd;function FpSqrtEven(e,t){if(!e.isOdd)throw new Error(`Field doesn't have isOdd`);const r=e.sqrt(t);return e.isOdd(r)?e.neg(r):r}modular.FpSqrtEven=FpSqrtEven;function hashToPrivateScalar(e,t,r=false){e=(0,utils_js_1$2.ensureBytes)("privateHash",e);const n=e.length;const i=nLength(t).nByteLength+8;if(i<24||n<i||n>1024)throw new Error(`hashToPrivateScalar: expected ${i}-1024 bytes of input, got ${n}`);const s=r?(0,utils_js_1$2.bytesToNumberLE)(e):(0,utils_js_1$2.bytesToNumberBE)(e);return mod(s,t-_1n$1)+_1n$1}modular.hashToPrivateScalar=hashToPrivateScalar;function getFieldBytesLength(e){if(typeof e!=="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}modular.getFieldBytesLength=getFieldBytesLength;function getMinHashLength(e){const t=getFieldBytesLength(e);return t+Math.ceil(t/2)}modular.getMinHashLength=getMinHashLength;function mapHashToField(e,t,r=false){const n=e.length;const i=getFieldBytesLength(t);const s=getMinHashLength(t);if(n<16||n<s||n>1024)throw new Error(`expected ${s}-1024 bytes of input, got ${n}`);const a=r?(0,utils_js_1$2.bytesToNumberBE)(e):(0,utils_js_1$2.bytesToNumberLE)(e);const o=mod(a,t-_1n$1)+_1n$1;return r?(0,utils_js_1$2.numberToBytesLE)(o,i):(0,utils_js_1$2.numberToBytesBE)(o,i)}modular.mapHashToField=mapHashToField;var weierstrass={};var curve$1={};Object.defineProperty(curve$1,"__esModule",{value:true});curve$1.validateBasic=curve$1.wNAF=void 0;
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const modular_js_1$1=modular;const utils_js_1$1=utils$s;const _0n=BigInt(0);const _1n=BigInt(1);function wNAF(e,t){const r=(e,t)=>{const r=t.negate();return e?r:t};const n=e=>{const r=Math.ceil(t/e)+1;const n=2**(e-1);return{windows:r,windowSize:n}};return{constTimeNegate:r,unsafeLadder(t,r){let n=e.ZERO;let i=t;while(r>_0n){if(r&_1n)n=n.add(i);i=i.double();r>>=_1n}return n},precomputeWindow(e,t){const{windows:r,windowSize:i}=n(t);const s=[];let a=e;let o=a;for(let e=0;e<r;e++){o=a;s.push(o);for(let e=1;e<i;e++){o=o.add(a);s.push(o)}a=o.double()}return s},wNAF(t,i,s){const{windows:a,windowSize:o}=n(t);let f=e.ZERO;let c=e.BASE;const u=BigInt(2**t-1);const l=2**t;const h=BigInt(t);for(let e=0;e<a;e++){const t=e*o;let n=Number(s&u);s>>=h;if(n>o){n-=l;s+=_1n}const a=t;const d=t+Math.abs(n)-1;const p=e%2!==0;const y=n<0;if(n===0){c=c.add(r(p,i[a]))}else{f=f.add(r(y,i[d]))}}return{p:f,f:c}},wNAFCached(e,t,r,n){const i=e._WINDOW_SIZE||1;let s=t.get(e);if(!s){s=this.precomputeWindow(e,i);if(i!==1){t.set(e,n(s))}}return this.wNAF(i,s,r)}}}curve$1.wNAF=wNAF;function validateBasic(e){(0,modular_js_1$1.validateField)(e.Fp);(0,utils_js_1$1.validateObject)(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"});return Object.freeze({...(0,modular_js_1$1.nLength)(e.n,e.nBitLength),...e,...{p:e.Fp.ORDER}})}curve$1.validateBasic=validateBasic;(function(e){Object.defineProperty(e,"__esModule",{value:true});e.mapToCurveSimpleSWU=e.SWUFpSqrtRatio=e.weierstrass=e.weierstrassPoints=e.DER=void 0;
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const t=modular;const r=utils$s;const n=utils$s;const i=curve$1;function s(e){const t=(0,i.validateBasic)(e);r.validateObject(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:s,a}=t;if(n){if(!s.eql(a,s.ZERO)){throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0")}if(typeof n!=="object"||typeof n.beta!=="bigint"||typeof n.splitScalar!=="function"){throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}}return Object.freeze({...t})}const{bytesToNumberBE:a,hexToBytes:o}=r;e.DER={Err:class e extends Error{constructor(e=""){super(e)}},_parseInt(t){const{Err:r}=e.DER;if(t.length<2||t[0]!==2)throw new r("Invalid signature integer tag");const n=t[1];const i=t.subarray(2,n+2);if(!n||i.length!==n)throw new r("Invalid signature integer: wrong length");if(i[0]&128)throw new r("Invalid signature integer: negative");if(i[0]===0&&!(i[1]&128))throw new r("Invalid signature integer: unnecessary leading zero");return{d:a(i),l:t.subarray(n+2)}},toSig(t){const{Err:r}=e.DER;const n=typeof t==="string"?o(t):t;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let i=n.length;if(i<2||n[0]!=48)throw new r("Invalid signature tag");if(n[1]!==i-2)throw new r("Invalid signature: incorrect length");const{d:s,l:a}=e.DER._parseInt(n.subarray(2));const{d:f,l:c}=e.DER._parseInt(a);if(c.length)throw new r("Invalid signature: left bytes after parsing");return{r:s,s:f}},hexFromSig(e){const t=e=>Number.parseInt(e[0],16)&8?"00"+e:e;const r=e=>{const t=e.toString(16);return t.length&1?`0${t}`:t};const n=t(r(e.s));const i=t(r(e.r));const s=n.length/2;const a=i.length/2;const o=r(s);const f=r(a);return`30${r(a+s+4)}02${f}${i}02${o}${n}`}};const f=BigInt(0),c=BigInt(1),u=BigInt(2),l=BigInt(3),h=BigInt(4);function d(e){const a=s(e);const{Fp:o}=a;const u=a.toBytes||((e,t,n)=>{const i=t.toAffine();return r.concatBytes(Uint8Array.from([4]),o.toBytes(i.x),o.toBytes(i.y))});const h=a.fromBytes||(e=>{const t=e.subarray(1);const r=o.fromBytes(t.subarray(0,o.BYTES));const n=o.fromBytes(t.subarray(o.BYTES,2*o.BYTES));return{x:r,y:n}});function d(e){const{a:t,b:r}=a;const n=o.sqr(e);const i=o.mul(n,e);return o.add(o.add(i,o.mul(e,t)),r)}if(!o.eql(o.sqr(a.Gy),d(a.Gx)))throw new Error("bad generator point: equation left != right");function p(e){return typeof e==="bigint"&&f<e&&e<a.n}function y(e){if(!p(e))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function m(e){const{allowedPrivateKeyLengths:i,nByteLength:s,wrapPrivateKey:o,n:f}=a;if(i&&typeof e!=="bigint"){if(e instanceof Uint8Array)e=r.bytesToHex(e);if(typeof e!=="string"||!i.includes(e.length))throw new Error("Invalid key");e=e.padStart(s*2,"0")}let c;try{c=typeof e==="bigint"?e:r.bytesToNumberBE((0,n.ensureBytes)("private key",e,s))}catch(t){throw new Error(`private key must be ${s} bytes, hex or bigint, not ${typeof e}`)}if(o)c=t.mod(c,f);y(c);return c}const g=new Map;function b(e){if(!(e instanceof A))throw new Error("ProjectivePoint expected")}class A{constructor(e,t,r){this.px=e;this.py=t;this.pz=r;if(e==null||!o.isValid(e))throw new Error("x required");if(t==null||!o.isValid(t))throw new Error("y required");if(r==null||!o.isValid(r))throw new Error("z required")}static fromAffine(e){const{x:t,y:r}=e||{};if(!e||!o.isValid(t)||!o.isValid(r))throw new Error("invalid affine point");if(e instanceof A)throw new Error("projective point not allowed");const n=e=>o.eql(e,o.ZERO);if(n(t)&&n(r))return A.ZERO;return new A(t,r,o.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){const t=o.invertBatch(e.map((e=>e.pz)));return e.map(((e,r)=>e.toAffine(t[r]))).map(A.fromAffine)}static fromHex(e){const t=A.fromAffine(h((0,n.ensureBytes)("pointHex",e)));t.assertValidity();return t}static fromPrivateKey(e){return A.BASE.multiply(m(e))}_setWindowSize(e){this._WINDOW_SIZE=e;g.delete(this)}assertValidity(){if(this.is0()){if(a.allowInfinityPoint&&!o.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:e,y:t}=this.toAffine();if(!o.isValid(e)||!o.isValid(t))throw new Error("bad point: x or y not FE");const r=o.sqr(t);const n=d(e);if(!o.eql(r,n))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:e}=this.toAffine();if(o.isOdd)return!o.isOdd(e);throw new Error("Field doesn't support isOdd")}equals(e){b(e);const{px:t,py:r,pz:n}=this;const{px:i,py:s,pz:a}=e;const f=o.eql(o.mul(t,a),o.mul(i,n));const c=o.eql(o.mul(r,a),o.mul(s,n));return f&&c}negate(){return new A(this.px,o.neg(this.py),this.pz)}double(){const{a:e,b:t}=a;const r=o.mul(t,l);const{px:n,py:i,pz:s}=this;let f=o.ZERO,c=o.ZERO,u=o.ZERO;let h=o.mul(n,n);let d=o.mul(i,i);let p=o.mul(s,s);let y=o.mul(n,i);y=o.add(y,y);u=o.mul(n,s);u=o.add(u,u);f=o.mul(e,u);c=o.mul(r,p);c=o.add(f,c);f=o.sub(d,c);c=o.add(d,c);c=o.mul(f,c);f=o.mul(y,f);u=o.mul(r,u);p=o.mul(e,p);y=o.sub(h,p);y=o.mul(e,y);y=o.add(y,u);u=o.add(h,h);h=o.add(u,h);h=o.add(h,p);h=o.mul(h,y);c=o.add(c,h);p=o.mul(i,s);p=o.add(p,p);h=o.mul(p,y);f=o.sub(f,h);u=o.mul(p,d);u=o.add(u,u);u=o.add(u,u);return new A(f,c,u)}add(e){b(e);const{px:t,py:r,pz:n}=this;const{px:i,py:s,pz:f}=e;let c=o.ZERO,u=o.ZERO,h=o.ZERO;const d=a.a;const p=o.mul(a.b,l);let y=o.mul(t,i);let m=o.mul(r,s);let g=o.mul(n,f);let w=o.add(t,r);let E=o.add(i,s);w=o.mul(w,E);E=o.add(y,m);w=o.sub(w,E);E=o.add(t,n);let v=o.add(i,f);E=o.mul(E,v);v=o.add(y,g);E=o.sub(E,v);v=o.add(r,n);c=o.add(s,f);v=o.mul(v,c);c=o.add(m,g);v=o.sub(v,c);h=o.mul(d,E);c=o.mul(p,g);h=o.add(c,h);c=o.sub(m,h);h=o.add(m,h);u=o.mul(c,h);m=o.add(y,y);m=o.add(m,y);g=o.mul(d,g);E=o.mul(p,E);m=o.add(m,g);g=o.sub(y,g);g=o.mul(d,g);E=o.add(E,g);y=o.mul(m,E);u=o.add(u,y);y=o.mul(v,E);c=o.mul(w,c);c=o.sub(c,y);y=o.mul(w,m);h=o.mul(v,h);h=o.add(h,y);return new A(c,u,h)}subtract(e){return this.add(e.negate())}is0(){return this.equals(A.ZERO)}wNAF(e){return E.wNAFCached(this,g,e,(e=>{const t=o.invertBatch(e.map((e=>e.pz)));return e.map(((e,r)=>e.toAffine(t[r]))).map(A.fromAffine)}))}multiplyUnsafe(e){const t=A.ZERO;if(e===f)return t;y(e);if(e===c)return this;const{endo:r}=a;if(!r)return E.unsafeLadder(this,e);let{k1neg:n,k1:i,k2neg:s,k2:u}=r.splitScalar(e);let l=t;let h=t;let d=this;while(i>f||u>f){if(i&c)l=l.add(d);if(u&c)h=h.add(d);d=d.double();i>>=c;u>>=c}if(n)l=l.negate();if(s)h=h.negate();h=new A(o.mul(h.px,r.beta),h.py,h.pz);return l.add(h)}multiply(e){y(e);let t=e;let r,n;const{endo:i}=a;if(i){const{k1neg:e,k1:s,k2neg:a,k2:f}=i.splitScalar(t);let{p:c,f:u}=this.wNAF(s);let{p:l,f:h}=this.wNAF(f);c=E.constTimeNegate(e,c);l=E.constTimeNegate(a,l);l=new A(o.mul(l.px,i.beta),l.py,l.pz);r=c.add(l);n=u.add(h)}else{const{p:e,f:i}=this.wNAF(t);r=e;n=i}return A.normalizeZ([r,n])[0]}multiplyAndAddUnsafe(e,t,r){const n=A.BASE;const i=(e,t)=>t===f||t===c||!e.equals(n)?e.multiplyUnsafe(t):e.multiply(t);const s=i(this,t).add(i(e,r));return s.is0()?undefined:s}toAffine(e){const{px:t,py:r,pz:n}=this;const i=this.is0();if(e==null)e=i?o.ONE:o.inv(n);const s=o.mul(t,e);const a=o.mul(r,e);const f=o.mul(n,e);if(i)return{x:o.ZERO,y:o.ZERO};if(!o.eql(f,o.ONE))throw new Error("invZ was invalid");return{x:s,y:a}}isTorsionFree(){const{h:e,isTorsionFree:t}=a;if(e===c)return true;if(t)return t(A,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:e,clearCofactor:t}=a;if(e===c)return this;if(t)return t(A,this);return this.multiplyUnsafe(a.h)}toRawBytes(e=true){this.assertValidity();return u(A,this,e)}toHex(e=true){return r.bytesToHex(this.toRawBytes(e))}}A.BASE=new A(a.Gx,a.Gy,o.ONE);A.ZERO=new A(o.ZERO,o.ONE,o.ZERO);const w=a.nBitLength;const E=(0,i.wNAF)(A,a.endo?Math.ceil(w/2):w);return{CURVE:a,ProjectivePoint:A,normPrivateKeyToScalar:m,weierstrassEquation:d,isWithinCurveOrder:p}}e.weierstrassPoints=d;function p(e){const t=(0,i.validateBasic)(e);r.validateObject(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"});return Object.freeze({lowS:true,...t})}function y(i){const s=p(i);const{Fp:a,n:o}=s;const u=a.BYTES+1;const l=2*a.BYTES+1;function h(e){return f<e&&e<a.ORDER}function y(e){return t.mod(e,o)}function m(e){return t.invert(e,o)}const{ProjectivePoint:g,normPrivateKeyToScalar:b,weierstrassEquation:A,isWithinCurveOrder:w}=d({...s,toBytes(e,t,n){const i=t.toAffine();const s=a.toBytes(i.x);const o=r.concatBytes;if(n){return o(Uint8Array.from([t.hasEvenY()?2:3]),s)}else{return o(Uint8Array.from([4]),s,a.toBytes(i.y))}},fromBytes(e){const t=e.length;const n=e[0];const i=e.subarray(1);if(t===u&&(n===2||n===3)){const e=r.bytesToNumberBE(i);if(!h(e))throw new Error("Point is not on curve");const t=A(e);let s=a.sqrt(t);const o=(s&c)===c;const f=(n&1)===1;if(f!==o)s=a.neg(s);return{x:e,y:s}}else if(t===l&&n===4){const e=a.fromBytes(i.subarray(0,a.BYTES));const t=a.fromBytes(i.subarray(a.BYTES,2*a.BYTES));return{x:e,y:t}}else{throw new Error(`Point of length ${t} was invalid. Expected ${u} compressed bytes or ${l} uncompressed bytes`)}}});const E=e=>r.bytesToHex(r.numberToBytesBE(e,s.nByteLength));function v(e){const t=o>>c;return e>t}function _(e){return v(e)?y(-e):e}const S=(e,t,n)=>r.bytesToNumberBE(e.slice(t,n));class ${constructor(e,t,r){this.r=e;this.s=t;this.recovery=r;this.assertValidity()}static fromCompact(e){const t=s.nByteLength;e=(0,n.ensureBytes)("compactSignature",e,t*2);return new $(S(e,0,t),S(e,t,2*t))}static fromDER(t){const{r,s:i}=e.DER.toSig((0,n.ensureBytes)("DER",t));return new $(r,i)}assertValidity(){if(!w(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!w(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(e){return new $(this.r,this.s,e)}recoverPublicKey(e){const{r:t,s:r,recovery:i}=this;const o=N((0,n.ensureBytes)("msgHash",e));if(i==null||![0,1,2,3].includes(i))throw new Error("recovery id invalid");const f=i===2||i===3?t+s.n:t;if(f>=a.ORDER)throw new Error("recovery id 2 or 3 invalid");const c=(i&1)===0?"02":"03";const u=g.fromHex(c+E(f));const l=m(f);const h=y(-o*l);const d=y(r*l);const p=g.BASE.multiplyAndAddUnsafe(u,h,d);if(!p)throw new Error("point at infinify");p.assertValidity();return p}hasHighS(){return v(this.s)}normalizeS(){return this.hasHighS()?new $(this.r,y(-this.s),this.recovery):this}toDERRawBytes(){return r.hexToBytes(this.toDERHex())}toDERHex(){return e.DER.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return r.hexToBytes(this.toCompactHex())}toCompactHex(){return E(this.r)+E(this.s)}}const T={isValidPrivateKey(e){try{b(e);return true}catch(e){return false}},normPrivateKeyToScalar:b,randomPrivateKey:()=>{const e=t.getMinHashLength(s.n);return t.mapHashToField(s.randomBytes(e),s.n)},precompute(e=8,t=g.BASE){t._setWindowSize(e);t.multiply(BigInt(3));return t}};function I(e,t=true){return g.fromPrivateKey(e).toRawBytes(t)}function C(e){const t=e instanceof Uint8Array;const r=typeof e==="string";const n=(t||r)&&e.length;if(t)return n===u||n===l;if(r)return n===2*u||n===2*l;if(e instanceof g)return true;return false}function P(e,t,r=true){if(C(e))throw new Error("first arg must be private key");if(!C(t))throw new Error("second arg must be public key");const n=g.fromHex(t);return n.multiply(b(e)).toRawBytes(r)}const R=s.bits2int||function(e){const t=r.bytesToNumberBE(e);const n=e.length*8-s.nBitLength;return n>0?t>>BigInt(n):t};const N=s.bits2int_modN||function(e){return y(R(e))};const k=r.bitMask(s.nBitLength);function O(e){if(typeof e!=="bigint")throw new Error("bigint expected");if(!(f<=e&&e<k))throw new Error(`bigint expected < 2^${s.nBitLength}`);return r.numberToBytesBE(e,s.nByteLength)}function x(e,t,i=B){if(["recovered","canonical"].some((e=>e in i)))throw new Error("sign() legacy options not supported");const{hash:o,randomBytes:u}=s;let{lowS:l,prehash:h,extraEntropy:d}=i;if(l==null)l=true;e=(0,n.ensureBytes)("msgHash",e);if(h)e=(0,n.ensureBytes)("prehashed msgHash",o(e));const p=N(e);const A=b(t);const E=[O(A),O(p)];if(d!=null){const e=d===true?u(a.BYTES):d;E.push((0,n.ensureBytes)("extraEntropy",e))}const S=r.concatBytes(...E);const T=p;function I(e){const t=R(e);if(!w(t))return;const r=m(t);const n=g.BASE.multiply(t).toAffine();const i=y(n.x);if(i===f)return;const s=y(r*y(T+i*A));if(s===f)return;let a=(n.x===i?0:2)|Number(n.y&c);let o=s;if(l&&v(s)){o=_(s);a^=1}return new $(i,o,a)}return{seed:S,k2sig:I}}const B={lowS:s.lowS,prehash:false};const D={lowS:s.lowS,prehash:false};function M(e,t,n=B){const{seed:i,k2sig:a}=x(e,t,n);const o=s;const f=r.createHmacDrbg(o.hash.outputLen,o.nByteLength,o.hmac);return f(i,a)}g.BASE._setWindowSize(8);function U(t,r,i,a=D){const o=t;r=(0,n.ensureBytes)("msgHash",r);i=(0,n.ensureBytes)("publicKey",i);if("strict"in a)throw new Error("options.strict was renamed to lowS");const{lowS:f,prehash:c}=a;let u=undefined;let l;try{if(typeof o==="string"||o instanceof Uint8Array){try{u=$.fromDER(o)}catch(t){if(!(t instanceof e.DER.Err))throw t;u=$.fromCompact(o)}}else if(typeof o==="object"&&typeof o.r==="bigint"&&typeof o.s==="bigint"){const{r:e,s:t}=o;u=new $(e,t)}else{throw new Error("PARSE")}l=g.fromHex(i)}catch(e){if(e.message==="PARSE")throw new Error(`signature must be Signature instance, Uint8Array or hex string`);return false}if(f&&u.hasHighS())return false;if(c)r=s.hash(r);const{r:h,s:d}=u;const p=N(r);const b=m(d);const A=y(p*b);const w=y(h*b);const E=g.BASE.multiplyAndAddUnsafe(l,A,w)?.toAffine();if(!E)return false;const v=y(E.x);return v===h}return{CURVE:s,getPublicKey:I,getSharedSecret:P,sign:M,verify:U,ProjectivePoint:g,Signature:$,utils:T}}e.weierstrass=y;function m(e,t){const r=e.ORDER;let n=f;for(let e=r-c;e%u===f;e/=u)n+=c;const i=n;const s=u<<i-c-c;const a=s*u;const o=(r-c)/a;const d=(o-c)/u;const p=a-c;const y=s;const m=e.pow(t,o);const g=e.pow(t,(o+c)/u);let b=(t,r)=>{let n=m;let s=e.pow(r,p);let a=e.sqr(s);a=e.mul(a,r);let o=e.mul(t,a);o=e.pow(o,d);o=e.mul(o,s);s=e.mul(o,r);a=e.mul(o,t);let f=e.mul(a,s);o=e.pow(f,y);let l=e.eql(o,e.ONE);s=e.mul(a,g);o=e.mul(f,n);a=e.cmov(s,a,l);f=e.cmov(o,f,l);for(let t=i;t>c;t--){let r=t-u;r=u<<r-c;let i=e.pow(f,r);const o=e.eql(i,e.ONE);s=e.mul(a,n);n=e.mul(n,n);i=e.mul(f,n);a=e.cmov(s,a,o);f=e.cmov(i,f,o)}return{isValid:l,value:a}};if(e.ORDER%h===l){const r=(e.ORDER-l)/h;const n=e.sqrt(e.neg(t));b=(t,i)=>{let s=e.sqr(i);const a=e.mul(t,i);s=e.mul(s,a);let o=e.pow(s,r);o=e.mul(o,a);const f=e.mul(o,n);const c=e.mul(e.sqr(o),i);const u=e.eql(c,t);let l=e.cmov(f,o,u);return{isValid:u,value:l}}}return b}e.SWUFpSqrtRatio=m;function g(e,r){t.validateField(e);if(!e.isValid(r.A)||!e.isValid(r.B)||!e.isValid(r.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const n=m(e,r.Z);if(!e.isOdd)throw new Error("Fp.isOdd is not implemented!");return t=>{let i,s,a,o,f,c,u,l;i=e.sqr(t);i=e.mul(i,r.Z);s=e.sqr(i);s=e.add(s,i);a=e.add(s,e.ONE);a=e.mul(a,r.B);o=e.cmov(r.Z,e.neg(s),!e.eql(s,e.ZERO));o=e.mul(o,r.A);s=e.sqr(a);c=e.sqr(o);f=e.mul(c,r.A);s=e.add(s,f);s=e.mul(s,a);c=e.mul(c,o);f=e.mul(c,r.B);s=e.add(s,f);u=e.mul(i,a);const{isValid:h,value:d}=n(s,c);l=e.mul(i,t);l=e.mul(l,d);u=e.cmov(u,a,h);l=e.cmov(l,d,h);const p=e.isOdd(t)===e.isOdd(l);l=e.cmov(e.neg(l),l,p);u=e.div(u,o);return{x:u,y:l}}}e.mapToCurveSimpleSWU=g})(weierstrass);var hashToCurve={};Object.defineProperty(hashToCurve,"__esModule",{value:true});hashToCurve.createHasher=hashToCurve.isogenyMap=hashToCurve.hash_to_field=hashToCurve.expand_message_xof=hashToCurve.expand_message_xmd=void 0;const modular_js_1=modular;const utils_js_1=utils$s;function validateDST(e){if(e instanceof Uint8Array)return e;if(typeof e==="string")return(0,utils_js_1.utf8ToBytes)(e);throw new Error("DST must be Uint8Array or string")}const os2ip=utils_js_1.bytesToNumberBE;function i2osp(e,t){if(e<0||e>=1<<8*t){throw new Error(`bad I2OSP call: value=${e} length=${t}`)}const r=Array.from({length:t}).fill(0);for(let n=t-1;n>=0;n--){r[n]=e&255;e>>>=8}return new Uint8Array(r)}function strxor(e,t){const r=new Uint8Array(e.length);for(let n=0;n<e.length;n++){r[n]=e[n]^t[n]}return r}function isBytes(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected")}function isNum(e){if(!Number.isSafeInteger(e))throw new Error("number expected")}function expand_message_xmd(e,t,r,n){isBytes(e);isBytes(t);isNum(r);if(t.length>255)t=n((0,utils_js_1.concatBytes)((0,utils_js_1.utf8ToBytes)("H2C-OVERSIZE-DST-"),t));const{outputLen:i,blockLen:s}=n;const a=Math.ceil(r/i);if(a>255)throw new Error("Invalid xmd length");const o=(0,utils_js_1.concatBytes)(t,i2osp(t.length,1));const f=i2osp(0,s);const c=i2osp(r,2);const u=new Array(a);const l=n((0,utils_js_1.concatBytes)(f,e,c,i2osp(0,1),o));u[0]=n((0,utils_js_1.concatBytes)(l,i2osp(1,1),o));for(let e=1;e<=a;e++){const t=[strxor(l,u[e-1]),i2osp(e+1,1),o];u[e]=n((0,utils_js_1.concatBytes)(...t))}const h=(0,utils_js_1.concatBytes)(...u);return h.slice(0,r)}hashToCurve.expand_message_xmd=expand_message_xmd;function expand_message_xof(e,t,r,n,i){isBytes(e);isBytes(t);isNum(r);if(t.length>255){const e=Math.ceil(2*n/8);t=i.create({dkLen:e}).update((0,utils_js_1.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(t).digest()}if(r>65535||t.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return i.create({dkLen:r}).update(e).update(i2osp(r,2)).update(t).update(i2osp(t.length,1)).digest()}hashToCurve.expand_message_xof=expand_message_xof;function hash_to_field(e,t,r){(0,utils_js_1.validateObject)(r,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});const{p:n,k:i,m:s,hash:a,expand:o,DST:f}=r;isBytes(e);isNum(t);const c=validateDST(f);const u=n.toString(2).length;const l=Math.ceil((u+i)/8);const h=t*s*l;let d;if(o==="xmd"){d=expand_message_xmd(e,c,h,a)}else if(o==="xof"){d=expand_message_xof(e,c,h,i,a)}else if(o==="_internal_pass"){d=e}else{throw new Error('expand must be "xmd" or "xof"')}const p=new Array(t);for(let e=0;e<t;e++){const t=new Array(s);for(let r=0;r<s;r++){const i=l*(r+e*s);const a=d.subarray(i,i+l);t[r]=(0,modular_js_1.mod)(os2ip(a),n)}p[e]=t}return p}hashToCurve.hash_to_field=hash_to_field;function isogenyMap(e,t){const r=t.map((e=>Array.from(e).reverse()));return(t,n)=>{const[i,s,a,o]=r.map((r=>r.reduce(((r,n)=>e.add(e.mul(r,t),n)))));t=e.div(i,s);n=e.mul(n,e.div(a,o));return{x:t,y:n}}}hashToCurve.isogenyMap=isogenyMap;function createHasher(e,t,r){if(typeof t!=="function")throw new Error("mapToCurve() must be defined");return{hashToCurve(n,i){const s=hash_to_field(n,2,{...r,DST:r.DST,...i});const a=e.fromAffine(t(s[0]));const o=e.fromAffine(t(s[1]));const f=a.add(o).clearCofactor();f.assertValidity();return f},encodeToCurve(n,i){const s=hash_to_field(n,1,{...r,DST:r.encodeDST,...i});const a=e.fromAffine(t(s[0])).clearCofactor();a.assertValidity();return a}}}hashToCurve.createHasher=createHasher;var _shortw_utils={};var hmac$1={};(function(e){Object.defineProperty(e,"__esModule",{value:true});e.hmac=e.HMAC=void 0;const t=_assert;const r=utils$t;class n extends r.Hash{constructor(e,n){super();this.finished=false;this.destroyed=false;(0,t.hash)(e);const i=(0,r.toBytes)(n);this.iHash=e.create();if(typeof this.iHash.update!=="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen;this.outputLen=this.iHash.outputLen;const s=this.blockLen;const a=new Uint8Array(s);a.set(i.length>s?e.create().update(i).digest():i);for(let e=0;e<a.length;e++)a[e]^=54;this.iHash.update(a);this.oHash=e.create();for(let e=0;e<a.length;e++)a[e]^=54^92;this.oHash.update(a);a.fill(0)}update(e){(0,t.exists)(this);this.iHash.update(e);return this}digestInto(e){(0,t.exists)(this);(0,t.bytes)(e,this.outputLen);this.finished=true;this.iHash.digestInto(e);this.oHash.update(e);this.oHash.digestInto(e);this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);this.digestInto(e);return e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:n,destroyed:i,blockLen:s,outputLen:a}=this;e=e;e.finished=n;e.destroyed=i;e.blockLen=s;e.outputLen=a;e.oHash=t._cloneInto(e.oHash);e.iHash=r._cloneInto(e.iHash);return e}destroy(){this.destroyed=true;this.oHash.destroy();this.iHash.destroy()}}e.HMAC=n;const i=(e,t,r)=>new n(e,t).update(r).digest();e.hmac=i;e.hmac.create=(e,t)=>new n(e,t)})(hmac$1);Object.defineProperty(_shortw_utils,"__esModule",{value:true});_shortw_utils.createCurve=_shortw_utils.getHash=void 0;
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const hmac_1=hmac$1;const utils_1$2=utils$t;const weierstrass_js_1=weierstrass;function getHash(e){return{hash:e,hmac:(t,...r)=>(0,hmac_1.hmac)(e,t,(0,utils_1$2.concatBytes)(...r)),randomBytes:utils_1$2.randomBytes}}_shortw_utils.getHash=getHash;function createCurve(e,t){const r=t=>(0,weierstrass_js_1.weierstrass)({...e,...getHash(t)});return Object.freeze({...r(t),create:r})}_shortw_utils.createCurve=createCurve;(function(e){Object.defineProperty(e,"__esModule",{value:true});e.encodeToCurve=e.hashToCurve=e.schnorr=e.secp256k1=void 0;
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const t=sha256$1;const r=utils$t;const n=modular;const i=weierstrass;const s=utils$s;const a=hashToCurve;const o=_shortw_utils;const f=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f");const c=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141");const u=BigInt(1);const l=BigInt(2);const h=(e,t)=>(e+t/l)/t;function d(e){const t=f;const r=BigInt(3),i=BigInt(6),s=BigInt(11),a=BigInt(22);const o=BigInt(23),c=BigInt(44),u=BigInt(88);const h=e*e*e%t;const d=h*h*e%t;const y=(0,n.pow2)(d,r,t)*d%t;const m=(0,n.pow2)(y,r,t)*d%t;const g=(0,n.pow2)(m,l,t)*h%t;const b=(0,n.pow2)(g,s,t)*g%t;const A=(0,n.pow2)(b,a,t)*b%t;const w=(0,n.pow2)(A,c,t)*A%t;const E=(0,n.pow2)(w,u,t)*w%t;const v=(0,n.pow2)(E,c,t)*A%t;const _=(0,n.pow2)(v,r,t)*d%t;const S=(0,n.pow2)(_,o,t)*b%t;const $=(0,n.pow2)(S,i,t)*h%t;const T=(0,n.pow2)($,l,t);if(!p.eql(p.sqr(T),e))throw new Error("Cannot find square root");return T}const p=(0,n.Field)(f,undefined,undefined,{sqrt:d});e.secp256k1=(0,o.createCurve)({a:BigInt(0),b:BigInt(7),Fp:p,n:c,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:true,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=c;const r=BigInt("0x3086d221a7d46bcde86c90e49284eb15");const i=-u*BigInt("0xe4437ed6010e88286f547fa90abfe4c3");const s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8");const a=r;const o=BigInt("0x100000000000000000000000000000000");const f=h(a*e,t);const l=h(-i*e,t);let d=(0,n.mod)(e-f*r-l*s,t);let p=(0,n.mod)(-f*i-l*a,t);const y=d>o;const m=p>o;if(y)d=t-d;if(m)p=t-p;if(d>o||p>o){throw new Error("splitScalar: Endomorphism failed, k="+e)}return{k1neg:y,k1:d,k2neg:m,k2:p}}}},t.sha256);const y=BigInt(0);const m=e=>typeof e==="bigint"&&y<e&&e<f;const g=e=>typeof e==="bigint"&&y<e&&e<c;const b={};function A(e,...r){let n=b[e];if(n===undefined){const r=(0,t.sha256)(Uint8Array.from(e,(e=>e.charCodeAt(0))));n=(0,s.concatBytes)(r,r);b[e]=n}return(0,t.sha256)((0,s.concatBytes)(n,...r))}const w=e=>e.toRawBytes(true).slice(1);const E=e=>(0,s.numberToBytesBE)(e,32);const v=e=>(0,n.mod)(e,f);const _=e=>(0,n.mod)(e,c);const S=e.secp256k1.ProjectivePoint;const $=(e,t,r)=>S.BASE.multiplyAndAddUnsafe(e,t,r);function T(t){let r=e.secp256k1.utils.normPrivateKeyToScalar(t);let n=S.fromPrivateKey(r);const i=n.hasEvenY()?r:_(-r);return{scalar:i,bytes:w(n)}}function I(e){if(!m(e))throw new Error("bad x: need 0 < x < p");const t=v(e*e);const r=v(t*e+BigInt(7));let n=d(r);if(n%l!==y)n=v(-n);const i=new S(e,n,u);i.assertValidity();return i}function C(...e){return _((0,s.bytesToNumberBE)(A("BIP0340/challenge",...e)))}function P(e){return T(e).bytes}function R(e,t,n=(0,r.randomBytes)(32)){const i=(0,s.ensureBytes)("message",e);const{bytes:a,scalar:o}=T(t);const f=(0,s.ensureBytes)("auxRand",n,32);const c=E(o^(0,s.bytesToNumberBE)(A("BIP0340/aux",f)));const u=A("BIP0340/nonce",c,a,i);const l=_((0,s.bytesToNumberBE)(u));if(l===y)throw new Error("sign failed: k is zero");const{bytes:h,scalar:d}=T(l);const p=C(h,a,i);const m=new Uint8Array(64);m.set(h,0);m.set(E(_(d+p*o)),32);if(!N(m,i,a))throw new Error("sign: Invalid signature produced");return m}function N(e,t,r){const n=(0,s.ensureBytes)("signature",e,64);const i=(0,s.ensureBytes)("message",t);const a=(0,s.ensureBytes)("publicKey",r,32);try{const e=I((0,s.bytesToNumberBE)(a));const t=(0,s.bytesToNumberBE)(n.subarray(0,32));if(!m(t))return false;const r=(0,s.bytesToNumberBE)(n.subarray(32,64));if(!g(r))return false;const o=C(E(t),w(e),i);const f=$(e,r,_(-o));if(!f||!f.hasEvenY()||f.toAffine().x!==t)return false;return true}catch(e){return false}}e.schnorr=(()=>({getPublicKey:P,sign:R,verify:N,utils:{randomPrivateKey:e.secp256k1.utils.randomPrivateKey,lift_x:I,pointToBytes:w,numberToBytesBE:s.numberToBytesBE,bytesToNumberBE:s.bytesToNumberBE,taggedHash:A,mod:n.mod}}))();const k=(()=>(0,a.isogenyMap)(p,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map((e=>e.map((e=>BigInt(e)))))))();const O=(()=>(0,i.mapToCurveSimpleSWU)(p,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:p.create(BigInt("-11"))}))();const x=(()=>(0,a.createHasher)(e.secp256k1.ProjectivePoint,(e=>{const{x:t,y:r}=O(p.create(e[0]));return k(t,r)}),{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:p.ORDER,m:1,k:128,expand:"xmd",hash:t.sha256}))();e.hashToCurve=(()=>x.hashToCurve)();e.encodeToCurve=(()=>x.encodeToCurve)()})(secp256k1);const ZeroAddress="0x0000000000000000000000000000000000000000";const ZeroHash="0x0000000000000000000000000000000000000000000000000000000000000000";const N$1=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141");const WeiPerEther=BigInt("1000000000000000000");const MaxUint256=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");const MinInt256=BigInt("0x8000000000000000000000000000000000000000000000000000000000000000")*BigInt(-1);const MaxInt256=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");const EtherSymbol="";const MessagePrefix="Ethereum Signed Message:\n";const BN_0$7=BigInt(0);const BN_1$3=BigInt(1);const BN_2$3=BigInt(2);const BN_27$1=BigInt(27);const BN_28$1=BigInt(28);const BN_35$1=BigInt(35);const _guard$3={};function toUint256(e){return zeroPadValue(toBeArray(e),32)}class Signature$6{#V;#G;#j;#K;get r(){return this.#V}set r(e){assertArgument(dataLength(e)===32,"invalid r","value",e);this.#V=hexlify(e)}get s(){return this.#G}set s(e){assertArgument(dataLength(e)===32,"invalid s","value",e);const t=hexlify(e);assertArgument(parseInt(t.substring(0,3))<8,"non-canonical s","value",t);this.#G=t}get v(){return this.#j}set v(e){const t=getNumber$1(e,"value");assertArgument(t===27||t===28,"invalid v","v",e);this.#j=t}get networkV(){return this.#K}get legacyChainId(){const e=this.networkV;if(e==null){return null}return Signature$6.getChainId(e)}get yParity(){return this.v===27?0:1}get yParityAndS(){const e=getBytes(this.s);if(this.yParity){e[0]|=128}return hexlify(e)}get compactSerialized(){return concat$a([this.r,this.yParityAndS])}get serialized(){return concat$a([this.r,this.s,this.yParity?"0x1c":"0x1b"])}constructor(e,t,r,n){assertPrivate(e,_guard$3,"Signature");this.#V=t;this.#G=r;this.#j=n;this.#K=null}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this.s}", yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const e=new Signature$6(_guard$3,this.r,this.s,this.v);if(this.networkV){e.#K=this.networkV}return e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:e!=null?e.toString():null,r:this.r,s:this.s,v:this.v}}static getChainId(e){const t=getBigInt(e,"v");if(t==BN_27$1||t==BN_28$1){return BN_0$7}assertArgument(t>=BN_35$1,"invalid EIP-155 v","v",e);return(t-BN_35$1)/BN_2$3}static getChainIdV(e,t){return getBigInt(e)*BN_2$3+BigInt(35+t-27)}static getNormalizedV(e){const t=getBigInt(e);if(t===BN_0$7||t===BN_27$1){return 27}if(t===BN_1$3||t===BN_28$1){return 28}assertArgument(t>=BN_35$1,"invalid v","v",e);return t&BN_1$3?27:28}static from(e){function t(t,r){assertArgument(t,r,"signature",e)}if(e==null){return new Signature$6(_guard$3,ZeroHash,ZeroHash,27)}if(typeof e==="string"){const r=getBytes(e,"signature");if(r.length===64){const e=hexlify(r.slice(0,32));const t=r.slice(32,64);const n=t[0]&128?28:27;t[0]&=127;return new Signature$6(_guard$3,e,hexlify(t),n)}if(r.length===65){const e=hexlify(r.slice(0,32));const n=r.slice(32,64);t((n[0]&128)===0,"non-canonical s");const i=Signature$6.getNormalizedV(r[64]);return new Signature$6(_guard$3,e,hexlify(n),i)}t(false,"invalid raw signature length")}if(e instanceof Signature$6){return e.clone()}const r=e.r;t(r!=null,"missing r");const n=toUint256(r);const i=function(e,r){if(e!=null){return toUint256(e)}if(r!=null){t(isHexString(r,32),"invalid yParityAndS");const e=getBytes(r);e[0]&=127;return hexlify(e)}t(false,"missing s")}(e.s,e.yParityAndS);t((getBytes(i)[0]&128)==0,"non-canonical s");const{networkV:s,v:a}=function(e,r,n){if(e!=null){const t=getBigInt(e);return{networkV:t>=BN_35$1?t:undefined,v:Signature$6.getNormalizedV(t)}}if(r!=null){t(isHexString(r,32),"invalid yParityAndS");return{v:getBytes(r)[0]&128?28:27}}if(n!=null){switch(getNumber$1(n,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}t(false,"invalid yParity")}t(false,"missing v")}(e.v,e.yParityAndS,e.yParity);const o=new Signature$6(_guard$3,n,i,a);if(s){o.#K=s}t(e.yParity==null||getNumber$1(e.yParity,"sig.yParity")===o.yParity,"yParity mismatch");t(e.yParityAndS==null||e.yParityAndS===o.yParityAndS,"yParityAndS mismatch");return o}}class SigningKey{#Y;constructor(e){assertArgument(dataLength(e)===32,"invalid private key","privateKey","[REDACTED]");this.#Y=hexlify(e)}get privateKey(){return this.#Y}get publicKey(){return SigningKey.computePublicKey(this.#Y)}get compressedPublicKey(){return SigningKey.computePublicKey(this.#Y,true)}sign(e){assertArgument(dataLength(e)===32,"invalid digest length","digest",e);const t=secp256k1.secp256k1.sign(getBytesCopy(e),getBytesCopy(this.#Y),{lowS:true});return Signature$6.from({r:toBeHex(t.r,32),s:toBeHex(t.s,32),v:t.recovery?28:27})}computeSharedSecret(e){const t=SigningKey.computePublicKey(e);return hexlify(secp256k1.secp256k1.getSharedSecret(getBytesCopy(this.#Y),getBytes(t),false))}static computePublicKey(e,t){let r=getBytes(e,"key");if(r.length===32){const e=secp256k1.secp256k1.getPublicKey(r,!!t);return hexlify(e)}if(r.length===64){const e=new Uint8Array(65);e[0]=4;e.set(r,1);r=e}const n=secp256k1.secp256k1.ProjectivePoint.fromHex(r);return hexlify(n.toRawBytes(t))}static recoverPublicKey(e,t){assertArgument(dataLength(e)===32,"invalid digest length","digest",e);const r=Signature$6.from(t);let n=secp256k1.secp256k1.Signature.fromCompact(getBytesCopy(concat$a([r.r,r.s])));n=n.addRecoveryBit(r.yParity);const i=n.recoverPublicKey(getBytesCopy(e));assertArgument(i!=null,"invalid signautre for digest","signature",t);return"0x"+i.toHex(false)}static addPoints(e,t,r){const n=secp256k1.secp256k1.ProjectivePoint.fromHex(SigningKey.computePublicKey(e).substring(2));const i=secp256k1.secp256k1.ProjectivePoint.fromHex(SigningKey.computePublicKey(t).substring(2));return"0x"+n.add(i).toHex(!!r)}}function lock(){computeHmac.lock();keccak256.lock();pbkdf2.lock();randomBytes.lock();ripemd160.lock();scrypt.lock();scryptSync.lock();sha256$2.lock();sha512$1.lock();randomBytes.lock()}const BN_0$6=BigInt(0);const BN_36=BigInt(36);function getChecksumAddress(e){e=e.toLowerCase();const t=e.substring(2).split("");const r=new Uint8Array(40);for(let e=0;e<40;e++){r[e]=t[e].charCodeAt(0)}const n=getBytes(keccak256(r));for(let e=0;e<40;e+=2){if(n[e>>1]>>4>=8){t[e]=t[e].toUpperCase()}if((n[e>>1]&15)>=8){t[e+1]=t[e+1].toUpperCase()}}return"0x"+t.join("")}const ibanLookup={};for(let e=0;e<10;e++){ibanLookup[String(e)]=String(e)}for(let e=0;e<26;e++){ibanLookup[String.fromCharCode(65+e)]=String(10+e)}const safeDigits=15;function ibanChecksum(e){e=e.toUpperCase();e=e.substring(4)+e.substring(0,2)+"00";let t=e.split("").map((e=>ibanLookup[e])).join("");while(t.length>=safeDigits){let e=t.substring(0,safeDigits);t=parseInt(e,10)%97+t.substring(e.length)}let r=String(98-parseInt(t,10)%97);while(r.length<2){r="0"+r}return r}const Base36=function(){const e={};for(let t=0;t<36;t++){const r="0123456789abcdefghijklmnopqrstuvwxyz"[t];e[r]=BigInt(t)}return e}();function fromBase36(e){e=e.toLowerCase();let t=BN_0$6;for(let r=0;r<e.length;r++){t=t*BN_36+Base36[e[r]]}return t}function getAddress(e){assertArgument(typeof e==="string","invalid address","address",e);if(e.match(/^(0x)?[0-9a-fA-F]{40}$/)){if(!e.startsWith("0x")){e="0x"+e}const t=getChecksumAddress(e);assertArgument(!e.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||t===e,"bad address checksum","address",e);return t}if(e.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){assertArgument(e.substring(2,4)===ibanChecksum(e),"bad icap checksum","address",e);let t=fromBase36(e.substring(4)).toString(16);while(t.length<40){t="0"+t}return getChecksumAddress("0x"+t)}assertArgument(false,"invalid address","address",e)}function getIcapAddress(e){let t=BigInt(getAddress(e)).toString(36).toUpperCase();while(t.length<30){t="0"+t}return"XE"+ibanChecksum("XE00"+t)+t}function getCreateAddress(e){const t=getAddress(e.from);const r=getBigInt(e.nonce,"tx.nonce");let n=r.toString(16);if(n==="0"){n="0x"}else if(n.length%2){n="0x0"+n}else{n="0x"+n}return getAddress(dataSlice(keccak256(encodeRlp([t,n])),12))}function getCreate2Address(e,t,r){const n=getAddress(e);const i=getBytes(t,"salt");const s=getBytes(r,"initCodeHash");assertArgument(i.length===32,"salt must be 32 bytes","salt",t);assertArgument(s.length===32,"initCodeHash must be 32 bytes","initCodeHash",r);return getAddress(dataSlice(keccak256(concat$a(["0xff",n,i,s])),12))}function isAddressable(e){return e&&typeof e.getAddress==="function"}function isAddress(e){try{getAddress(e);return true}catch(e){}return false}async function checkAddress(e,t){const r=await t;if(r==null||r==="0x0000000000000000000000000000000000000000"){assert$m(typeof e!=="string","unconfigured name","UNCONFIGURED_NAME",{value:e});assertArgument(false,"invalid AddressLike value; did not resolve to a value address","target",e)}return getAddress(r)}function resolveAddress(e,t){if(typeof e==="string"){if(e.match(/^0x[0-9a-f]{40}$/i)){return getAddress(e)}assert$m(t!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"});return checkAddress(e,t.resolveName(e))}else if(isAddressable(e)){return checkAddress(e,e.getAddress())}else if(e&&typeof e.then==="function"){return checkAddress(e,e)}assertArgument(false,"unsupported addressable value","target",e)}const _gaurd={};function n(e,t){let r=false;if(t<0){r=true;t*=-1}return new Typed(_gaurd,`${r?"":"u"}int${t}`,e,{signed:r,width:t})}function b(e,t){return new Typed(_gaurd,`bytes${t?t:""}`,e,{size:t})}const _typedSymbol=Symbol.for("_ethers_typed");class Typed{type;value;#q;_typedSymbol;constructor(e,t,r,n){if(n==null){n=null}assertPrivate(_gaurd,e,"Typed");defineProperties(this,{_typedSymbol,type:t,value:r});this.#q=n;this.format()}format(){if(this.type==="array"){throw new Error("")}else if(this.type==="dynamicArray"){throw new Error("")}else if(this.type==="tuple"){return`tuple(${this.value.map((e=>e.format())).join(",")})`}return this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple"){throw TypeError("not a tuple")}return this.#q}get arrayLength(){if(this.type!=="array"){throw TypeError("not an array")}if(this.#q===true){return-1}if(this.#q===false){return this.value.length}return null}static from(e,t){return new Typed(_gaurd,e,t)}static uint8(e){return n(e,8)}static uint16(e){return n(e,16)}static uint24(e){return n(e,24)}static uint32(e){return n(e,32)}static uint40(e){return n(e,40)}static uint48(e){return n(e,48)}static uint56(e){return n(e,56)}static uint64(e){return n(e,64)}static uint72(e){return n(e,72)}static uint80(e){return n(e,80)}static uint88(e){return n(e,88)}static uint96(e){return n(e,96)}static uint104(e){return n(e,104)}static uint112(e){return n(e,112)}static uint120(e){return n(e,120)}static uint128(e){return n(e,128)}static uint136(e){return n(e,136)}static uint144(e){return n(e,144)}static uint152(e){return n(e,152)}static uint160(e){return n(e,160)}static uint168(e){return n(e,168)}static uint176(e){return n(e,176)}static uint184(e){return n(e,184)}static uint192(e){return n(e,192)}static uint200(e){return n(e,200)}static uint208(e){return n(e,208)}static uint216(e){return n(e,216)}static uint224(e){return n(e,224)}static uint232(e){return n(e,232)}static uint240(e){return n(e,240)}static uint248(e){return n(e,248)}static uint256(e){return n(e,256)}static uint(e){return n(e,256)}static int8(e){return n(e,-8)}static int16(e){return n(e,-16)}static int24(e){return n(e,-24)}static int32(e){return n(e,-32)}static int40(e){return n(e,-40)}static int48(e){return n(e,-48)}static int56(e){return n(e,-56)}static int64(e){return n(e,-64)}static int72(e){return n(e,-72)}static int80(e){return n(e,-80)}static int88(e){return n(e,-88)}static int96(e){return n(e,-96)}static int104(e){return n(e,-104)}static int112(e){return n(e,-112)}static int120(e){return n(e,-120)}static int128(e){return n(e,-128)}static int136(e){return n(e,-136)}static int144(e){return n(e,-144)}static int152(e){return n(e,-152)}static int160(e){return n(e,-160)}static int168(e){return n(e,-168)}static int176(e){return n(e,-176)}static int184(e){return n(e,-184)}static int192(e){return n(e,-192)}static int200(e){return n(e,-200)}static int208(e){return n(e,-208)}static int216(e){return n(e,-216)}static int224(e){return n(e,-224)}static int232(e){return n(e,-232)}static int240(e){return n(e,-240)}static int248(e){return n(e,-248)}static int256(e){return n(e,-256)}static int(e){return n(e,-256)}static bytes1(e){return b(e,1)}static bytes2(e){return b(e,2)}static bytes3(e){return b(e,3)}static bytes4(e){return b(e,4)}static bytes5(e){return b(e,5)}static bytes6(e){return b(e,6)}static bytes7(e){return b(e,7)}static bytes8(e){return b(e,8)}static bytes9(e){return b(e,9)}static bytes10(e){return b(e,10)}static bytes11(e){return b(e,11)}static bytes12(e){return b(e,12)}static bytes13(e){return b(e,13)}static bytes14(e){return b(e,14)}static bytes15(e){return b(e,15)}static bytes16(e){return b(e,16)}static bytes17(e){return b(e,17)}static bytes18(e){return b(e,18)}static bytes19(e){return b(e,19)}static bytes20(e){return b(e,20)}static bytes21(e){return b(e,21)}static bytes22(e){return b(e,22)}static bytes23(e){return b(e,23)}static bytes24(e){return b(e,24)}static bytes25(e){return b(e,25)}static bytes26(e){return b(e,26)}static bytes27(e){return b(e,27)}static bytes28(e){return b(e,28)}static bytes29(e){return b(e,29)}static bytes30(e){return b(e,30)}static bytes31(e){return b(e,31)}static bytes32(e){return b(e,32)}static address(e){return new Typed(_gaurd,"address",e)}static bool(e){return new Typed(_gaurd,"bool",!!e)}static bytes(e){return new Typed(_gaurd,"bytes",e)}static string(e){return new Typed(_gaurd,"string",e)}static array(e,t){throw new Error("not implemented yet")}static tuple(e,t){throw new Error("not implemented yet")}static overrides(e){return new Typed(_gaurd,"overrides",Object.assign({},e))}static isTyped(e){return e&&typeof e==="object"&&"_typedSymbol"in e&&e._typedSymbol===_typedSymbol}static dereference(e,t){if(Typed.isTyped(e)){if(e.type!==t){throw new Error(`invalid type: expecetd ${t}, got ${e.type}`)}return e.value}return e}}class AddressCoder extends Coder{constructor(e){super("address","address",e,false)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,t){let r=Typed.dereference(t,"string");try{r=getAddress(r)}catch(e){return this._throwError(e.message,t)}return e.writeValue(r)}decode(e){return getAddress(toBeHex(e.readValue(),20))}}class AnonymousCoder extends Coder{coder;constructor(e){super(e.name,e.type,"_",e.dynamic);this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,t){return this.coder.encode(e,t)}decode(e){return this.coder.decode(e)}}function pack(e,t,r){let n=[];if(Array.isArray(r)){n=r}else if(r&&typeof r==="object"){let e={};n=t.map((t=>{const n=t.localName;assert$m(n,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:t},value:r});assert$m(!e[n],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:t},value:r});e[n]=true;return r[n]}))}else{assertArgument(false,"invalid tuple value","tuple",r)}assertArgument(t.length===n.length,"types/value length mismatch","tuple",r);let i=new Writer$2;let s=new Writer$2;let a=[];t.forEach(((e,t)=>{let r=n[t];if(e.dynamic){let t=s.length;e.encode(s,r);let n=i.writeUpdatableValue();a.push((e=>{n(e+t)}))}else{e.encode(i,r)}}));a.forEach((e=>{e(i.length)}));let o=e.appendWriter(i);o+=e.appendWriter(s);return o}function unpack(e,t){let r=[];let n=[];let i=e.subReader(0);t.forEach((t=>{let s=null;if(t.dynamic){let r=e.readIndex();let n=i.subReader(r);try{s=t.decode(n)}catch(e){if(isError(e,"BUFFER_OVERRUN")){throw e}s=e;s.baseType=t.name;s.name=t.localName;s.type=t.type}}else{try{s=t.decode(e)}catch(e){if(isError(e,"BUFFER_OVERRUN")){throw e}s=e;s.baseType=t.name;s.name=t.localName;s.type=t.type}}if(s==undefined){throw new Error("investigate")}r.push(s);n.push(t.localName||null)}));return Result.fromItems(r,n)}class ArrayCoder extends Coder{coder;length;constructor(e,t,r){const n=e.type+"["+(t>=0?t:"")+"]";const i=t===-1||e.dynamic;super("array",n,r,i);defineProperties(this,{coder:e,length:t})}defaultValue(){const e=this.coder.defaultValue();const t=[];for(let r=0;r<this.length;r++){t.push(e)}return t}encode(e,t){const r=Typed.dereference(t,"array");if(!Array.isArray(r)){this._throwError("expected array value",r)}let n=this.length;if(n===-1){n=r.length;e.writeValue(r.length)}assertArgumentCount(r.length,n,"coder array"+(this.localName?" "+this.localName:""));let i=[];for(let e=0;e<r.length;e++){i.push(this.coder)}return pack(e,i,r)}decode(e){let t=this.length;if(t===-1){t=e.readIndex();assert$m(t*WordSize<=e.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:e.bytes,offset:t*WordSize,length:e.dataLength})}let r=[];for(let e=0;e<t;e++){r.push(new AnonymousCoder(this.coder))}return unpack(e,r)}}class BooleanCoder extends Coder{constructor(e){super("bool","bool",e,false)}defaultValue(){return false}encode(e,t){const r=Typed.dereference(t,"bool");return e.writeValue(r?1:0)}decode(e){return!!e.readValue()}}class DynamicBytesCoder extends Coder{constructor(e,t){super(e,e,t,true)}defaultValue(){return"0x"}encode(e,t){t=getBytesCopy(t);let r=e.writeValue(t.length);r+=e.writeBytes(t);return r}decode(e){return e.readBytes(e.readIndex(),true)}}class BytesCoder extends DynamicBytesCoder{constructor(e){super("bytes",e)}decode(e){return hexlify(super.decode(e))}}class FixedBytesCoder extends Coder{size;constructor(e,t){let r="bytes"+String(e);super(r,r,t,false);defineProperties(this,{size:e},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(e,t){let r=getBytesCopy(Typed.dereference(t,this.type));if(r.length!==this.size){this._throwError("incorrect data length",t)}return e.writeBytes(r)}decode(e){return hexlify(e.readBytes(this.size))}}const Empty=new Uint8Array([]);class NullCoder extends Coder{constructor(e){super("null","",e,false)}defaultValue(){return null}encode(e,t){if(t!=null){this._throwError("not null",t)}return e.writeBytes(Empty)}decode(e){e.readBytes(0);return null}}const BN_0$5=BigInt(0);const BN_1$2=BigInt(1);const BN_MAX_UINT256$1=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class NumberCoder extends Coder{size;signed;constructor(e,t,r){const n=(t?"int":"uint")+e*8;super(n,n,r,false);defineProperties(this,{size:e,signed:t},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(e,t){let r=getBigInt(Typed.dereference(t,this.type));let n=mask(BN_MAX_UINT256$1,WordSize*8);if(this.signed){let e=mask(n,this.size*8-1);if(r>e||r<-(e+BN_1$2)){this._throwError("value out-of-bounds",t)}r=toTwos(r,8*WordSize)}else if(r<BN_0$5||r>mask(n,this.size*8)){this._throwError("value out-of-bounds",t)}return e.writeValue(r)}decode(e){let t=mask(e.readValue(),this.size*8);if(this.signed){t=fromTwos(t,this.size*8)}return t}}class StringCoder extends DynamicBytesCoder{constructor(e){super("string",e)}defaultValue(){return""}encode(e,t){return super.encode(e,toUtf8Bytes(Typed.dereference(t,"string")))}decode(e){return toUtf8String(super.decode(e))}}class TupleCoder extends Coder{coders;constructor(e,t){let r=false;const n=[];e.forEach((e=>{if(e.dynamic){r=true}n.push(e.type)}));const i="tuple("+n.join(",")+")";super("tuple",i,t,r);defineProperties(this,{coders:Object.freeze(e.slice())})}defaultValue(){const e=[];this.coders.forEach((t=>{e.push(t.defaultValue())}));const t=this.coders.reduce(((e,t)=>{const r=t.localName;if(r){if(!e[r]){e[r]=0}e[r]++}return e}),{});this.coders.forEach(((r,n)=>{let i=r.localName;if(!i||t[i]!==1){return}if(i==="length"){i="_length"}if(e[i]!=null){return}e[i]=e[n]}));return Object.freeze(e)}encode(e,t){const r=Typed.dereference(t,"tuple");return pack(e,this.coders,r)}decode(e){return unpack(e,this.coders)}}function id(e){return keccak256(toUtf8Bytes(e))}var COMPRESSED$1="AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI";const FENCED=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]);const NSM_MAX=4;function decode_arithmetic(e){let t=0;function r(){return e[t++]<<8|e[t++]}let n=r();let i=1;let s=[0,1];for(let e=1;e<n;e++){s.push(i+=r())}let a=r();let o=t;t+=a;let f=0;let c=0;function u(){if(f==0){c=c<<8|e[t++];f=8}return c>>--f&1}const l=31;const h=2**l;const d=h>>>1;const p=d>>1;const y=h-1;let m=0;for(let e=0;e<l;e++)m=m<<1|u();let g=[];let b=0;let A=h;while(true){let e=Math.floor(((m-b+1)*i-1)/A);let t=0;let r=n;while(r-t>1){let n=t+r>>>1;if(e<s[n]){r=n}else{t=n}}if(t==0)break;g.push(t);let a=b+Math.floor(A*s[t]/i);let o=b+Math.floor(A*s[t+1]/i)-1;while(((a^o)&d)==0){m=m<<1&y|u();a=a<<1&y;o=o<<1&y|1}while(a&~o&p){m=m&d|m<<1&y>>>1|u();a=a<<1^d;o=(o^d)<<1|d|1}b=a;A=1+o-a}let w=n-4;return g.map((t=>{switch(t-w){case 3:return w+65792+(e[o++]<<16|e[o++]<<8|e[o++]);case 2:return w+256+(e[o++]<<8|e[o++]);case 1:return w+e[o++];default:return t-1}}))}function read_payload(e){let t=0;return()=>e[t++]}function read_compressed_payload(e){return read_payload(decode_arithmetic(unsafe_atob(e)))}function unsafe_atob(e){let t=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach(((e,r)=>t[e.charCodeAt(0)]=r));let r=e.length;let n=new Uint8Array(6*r>>3);for(let i=0,s=0,a=0,o=0;i<r;i++){o=o<<6|t[e.charCodeAt(i)];a+=6;if(a>=8){n[s++]=o>>(a-=8)}}return n}function signed(e){return e&1?~e>>1:e>>1}function read_deltas(e,t){let r=Array(e);for(let n=0,i=0;n<e;n++)r[n]=i+=signed(t());return r}function read_sorted(e,t=0){let r=[];while(true){let n=e();let i=e();if(!i)break;t+=n;for(let e=0;e<i;e++){r.push(t+e)}t+=i+1}return r}function read_sorted_arrays(e){return read_array_while((()=>{let t=read_sorted(e);if(t.length)return t}))}function read_mapped(e){let t=[];while(true){let r=e();if(r==0)break;t.push(read_linear_table(r,e))}while(true){let r=e()-1;if(r<0)break;t.push(read_replacement_table(r,e))}return t.flat()}function read_array_while(e){let t=[];while(true){let r=e(t.length);if(!r)break;t.push(r)}return t}function read_transposed(e,t,r){let n=Array(e).fill().map((()=>[]));for(let i=0;i<t;i++){read_deltas(e,r).forEach(((e,t)=>n[t].push(e)))}return n}function read_linear_table(e,t){let r=1+t();let n=t();let i=read_array_while(t);let s=read_transposed(i.length,1+e,t);return s.flatMap(((e,t)=>{let[s,...a]=e;return Array(i[t]).fill().map(((e,t)=>{let i=t*n;return[s+t*r,a.map((e=>e+i))]}))}))}function read_replacement_table(e,t){let r=1+t();let n=read_transposed(r,1+e,t);return n.map((e=>[e[0],e.slice(1)]))}function read_trie(e){let t=[];let r=read_sorted(e);i(n([]),[]);return t;function n(t){let i=e();let s=read_array_while((()=>{let t=read_sorted(e).map((e=>r[e]));if(t.length)return n(t)}));return{S:i,B:s,Q:t}}function i({S:e,B:r},n,s){if(e&4&&s===n[n.length-1])return;if(e&2)s=n[n.length-1];if(e&1)t.push(n);for(let e of r){for(let t of e.Q){i(e,[...n,t],s)}}}}function hex_cp(e){return e.toString(16).toUpperCase().padStart(2,"0")}function quote_cp(e){return`{${hex_cp(e)}}`}function explode_cp(e){let t=[];for(let r=0,n=e.length;r<n;){let n=e.codePointAt(r);r+=n<65536?1:2;t.push(n)}return t}function str_from_cps(e){const t=4096;let r=e.length;if(r<t)return String.fromCodePoint(...e);let n=[];for(let i=0;i<r;){n.push(String.fromCodePoint(...e.slice(i,i+=t)))}return n.join("")}function compare_arrays(e,t){let r=e.length;let n=r-t.length;for(let i=0;n==0&&i<r;i++)n=e[i]-t[i];return n}var COMPRESSED="AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g";const S0=44032;const L0=4352;const V0=4449;const T0=4519;const L_COUNT=19;const V_COUNT=21;const T_COUNT=28;const N_COUNT=V_COUNT*T_COUNT;const S_COUNT=L_COUNT*N_COUNT;const S1=S0+S_COUNT;const L1=L0+L_COUNT;const V1=V0+V_COUNT;const T1$1=T0+T_COUNT;function unpack_cc(e){return e>>24&255}function unpack_cp(e){return e&16777215}let SHIFTED_RANK,EXCLUSIONS,DECOMP,RECOMP;function init$1(){let e=read_compressed_payload(COMPRESSED);SHIFTED_RANK=new Map(read_sorted_arrays(e).flatMap(((e,t)=>e.map((e=>[e,t+1<<24])))));EXCLUSIONS=new Set(read_sorted(e));DECOMP=new Map;RECOMP=new Map;for(let[t,r]of read_mapped(e)){if(!EXCLUSIONS.has(t)&&r.length==2){let[e,n]=r;let i=RECOMP.get(e);if(!i){i=new Map;RECOMP.set(e,i)}i.set(n,t)}DECOMP.set(t,r.reverse())}}function is_hangul(e){return e>=S0&&e<S1}function compose_pair(e,t){if(e>=L0&&e<L1&&t>=V0&&t<V1){return S0+(e-L0)*N_COUNT+(t-V0)*T_COUNT}else if(is_hangul(e)&&t>T0&&t<T1$1&&(e-S0)%T_COUNT==0){return e+(t-T0)}else{let r=RECOMP.get(e);if(r){r=r.get(t);if(r){return r}}return-1}}function decomposed(e){if(!SHIFTED_RANK)init$1();let t=[];let r=[];let n=false;function i(e){let r=SHIFTED_RANK.get(e);if(r){n=true;e|=r}t.push(e)}for(let n of e){while(true){if(n<128){t.push(n)}else if(is_hangul(n)){let e=n-S0;let t=e/N_COUNT|0;let r=e%N_COUNT/T_COUNT|0;let s=e%T_COUNT;i(L0+t);i(V0+r);if(s>0)i(T0+s)}else{let e=DECOMP.get(n);if(e){r.push(...e)}else{i(n)}}if(!r.length)break;n=r.pop()}}if(n&&t.length>1){let e=unpack_cc(t[0]);for(let r=1;r<t.length;r++){let n=unpack_cc(t[r]);if(n==0||e<=n){e=n;continue}let i=r-1;while(true){let r=t[i+1];t[i+1]=t[i];t[i]=r;if(!i)break;e=unpack_cc(t[--i]);if(e<=n)break}e=unpack_cc(t[r])}}return t}function composed_from_decomposed(e){let t=[];let r=[];let n=-1;let i=0;for(let s of e){let e=unpack_cc(s);let a=unpack_cp(s);if(n==-1){if(e==0){n=a}else{t.push(a)}}else if(i>0&&i>=e){if(e==0){t.push(n,...r);r.length=0;n=a}else{r.push(a)}i=e}else{let s=compose_pair(n,a);if(s>=0){n=s}else if(i==0&&e==0){t.push(n);n=a}else{r.push(a);i=e}}}if(n>=0){t.push(n,...r)}return t}function nfd(e){return decomposed(e).map(unpack_cp)}function nfc(e){return composed_from_decomposed(decomposed(e))}const HYPHEN=45;const STOP_CH=".";const FE0F=65039;const UNIQUE_PH=1;const Array_from=e=>Array.from(e);function group_has_cp(e,t){return e.P.has(t)||e.Q.has(t)}class Emoji extends Array{get is_emoji(){return true}}let MAPPED,IGNORED,CM,NSM,ESCAPE,GROUPS,WHOLE_VALID,WHOLE_MAP,VALID,EMOJI_LIST,EMOJI_ROOT;function init$2(){if(MAPPED)return;let e=read_compressed_payload(COMPRESSED$1);const t=()=>read_sorted(e);const r=()=>new Set(t());MAPPED=new Map(read_mapped(e));IGNORED=r();CM=t();NSM=new Set(t().map((e=>CM[e])));CM=new Set(CM);ESCAPE=r();r();let n=read_sorted_arrays(e);let i=e();const s=()=>new Set(t().flatMap((e=>n[e])).concat(t()));GROUPS=read_array_while((t=>{let r=read_array_while(e).map((e=>e+96));if(r.length){let n=t>=i;r[0]-=32;r=str_from_cps(r);if(n)r=`Restricted[${r}]`;let a=s();let o=s();let f=!e();return{N:r,P:a,Q:o,M:f,R:n}}}));WHOLE_VALID=r();WHOLE_MAP=new Map;let a=t().concat(Array_from(WHOLE_VALID)).sort(((e,t)=>e-t));a.forEach(((t,r)=>{let n=e();let i=a[r]=n?a[r-n]:{V:[],M:new Map};i.V.push(t);if(!WHOLE_VALID.has(t)){WHOLE_MAP.set(t,i)}}));for(let{V:e,M:t}of new Set(WHOLE_MAP.values())){let r=[];for(let t of e){let e=GROUPS.filter((e=>group_has_cp(e,t)));let n=r.find((({G:t})=>e.some((e=>t.has(e)))));if(!n){n={G:new Set,V:[]};r.push(n)}n.V.push(t);e.forEach((e=>n.G.add(e)))}let n=r.flatMap((e=>Array_from(e.G)));for(let{G:e,V:i}of r){let r=new Set(n.filter((t=>!e.has(t))));for(let e of i){t.set(e,r)}}}let o=new Set;let f=new Set;const c=e=>o.has(e)?f.add(e):o.add(e);for(let e of GROUPS){for(let t of e.P)c(t);for(let t of e.Q)c(t)}for(let e of o){if(!WHOLE_MAP.has(e)&&!f.has(e)){WHOLE_MAP.set(e,UNIQUE_PH)}}VALID=new Set(Array_from(o).concat(Array_from(nfd(o))));EMOJI_LIST=read_trie(e).map((e=>Emoji.from(e))).sort(compare_arrays);EMOJI_ROOT=new Map;for(let e of EMOJI_LIST){let t=[EMOJI_ROOT];for(let r of e){let e=t.map((e=>{let t=e.get(r);if(!t){t=new Map;e.set(r,t)}return t}));if(r===FE0F){t.push(...e)}else{t=e}}for(let r of t){r.V=e}}}function quoted_cp(e){return(should_escape(e)?"":`${bidi_qq(safe_str_from_cps([e]))} `)+quote_cp(e)}function bidi_qq(e){return`"${e}"`}function check_label_extension(e){if(e.length>=4&&e[2]==HYPHEN&&e[3]==HYPHEN){throw new Error(`invalid label extension: "${str_from_cps(e.slice(0,4))}"`)}}function check_leading_underscore(e){const t=95;for(let r=e.lastIndexOf(t);r>0;){if(e[--r]!==t){throw new Error("underscore allowed only at start")}}}function check_fenced(e){let t=e[0];let r=FENCED.get(t);if(r)throw error_placement(`leading ${r}`);let n=e.length;let i=-1;for(let s=1;s<n;s++){t=e[s];let n=FENCED.get(t);if(n){if(i==s)throw error_placement(`${r} + ${n}`);i=s+1;r=n}}if(i==n)throw error_placement(`trailing ${r}`)}function safe_str_from_cps(e,t=quote_cp){let r=[];if(is_combining_mark(e[0]))r.push("");let n=0;let i=e.length;for(let s=0;s<i;s++){let i=e[s];if(should_escape(i)){r.push(str_from_cps(e.slice(n,s)));r.push(t(i));n=s+1}}r.push(str_from_cps(e.slice(n,i)));return r.join("")}function is_combining_mark(e){init$2();return CM.has(e)}function should_escape(e){init$2();return ESCAPE.has(e)}function ens_normalize(e){return flatten$2(split(e,nfc,filter_fe0f))}function split(e,t,r){if(!e)return[];init$2();let n=0;return e.split(STOP_CH).map((e=>{let i=explode_cp(e);let s={input:i,offset:n};n+=i.length+1;try{let e=s.tokens=tokens_from_str(i,t,r);let n=e.length;let a;if(!n){throw new Error(`empty label`)}let o=s.output=e.flat();check_leading_underscore(o);let f=s.emoji=n>1||e[0].is_emoji;if(!f&&o.every((e=>e<128))){check_label_extension(o);a="ASCII"}else{let t=e.flatMap((e=>e.is_emoji?[]:e));if(!t.length){a="Emoji"}else{if(CM.has(o[0]))throw error_placement("leading combining mark");for(let t=1;t<n;t++){let r=e[t];if(!r.is_emoji&&CM.has(r[0])){throw error_placement(`emoji + combining mark: "${str_from_cps(e[t-1])} + ${safe_str_from_cps([r[0]])}"`)}}check_fenced(o);let r=Array_from(new Set(t));let[i]=determine_group(r);check_group(i,t);check_whole(i,r);a=i.N}}s.type=a}catch(e){s.error=e}return s}))}function check_whole(e,t){let r;let n=[];for(let e of t){let t=WHOLE_MAP.get(e);if(t===UNIQUE_PH)return;if(t){let n=t.M.get(e);r=r?r.filter((e=>n.has(e))):Array_from(n);if(!r.length)return}else{n.push(e)}}if(r){for(let t of r){if(n.every((e=>group_has_cp(t,e)))){throw new Error(`whole-script confusable: ${e.N}/${t.N}`)}}}}function determine_group(e){let t=GROUPS;for(let r of e){let e=t.filter((e=>group_has_cp(e,r)));if(!e.length){if(!GROUPS.some((e=>group_has_cp(e,r)))){throw error_disallowed(r)}else{throw error_group_member(t[0],r)}}t=e;if(e.length==1)break}return t}function flatten$2(e){return e.map((({input:t,error:r,output:n})=>{if(r){let n=r.message;throw new Error(e.length==1?n:`Invalid label ${bidi_qq(safe_str_from_cps(t))}: ${n}`)}return str_from_cps(n)})).join(STOP_CH)}function error_disallowed(e){return new Error(`disallowed character: ${quoted_cp(e)}`)}function error_group_member(e,t){let r=quoted_cp(t);let n=GROUPS.find((e=>e.P.has(t)));if(n){r=`${n.N} ${r}`}return new Error(`illegal mixture: ${e.N} + ${r}`)}function error_placement(e){return new Error(`illegal placement: ${e}`)}function check_group(e,t){for(let r of t){if(!group_has_cp(e,r)){throw error_group_member(e,r)}}if(e.M){let e=nfd(t);for(let t=1,r=e.length;t<r;t++){if(NSM.has(e[t])){let n=t+1;for(let i;n<r&&NSM.has(i=e[n]);n++){for(let r=t;r<n;r++){if(e[r]==i){throw new Error(`duplicate non-spacing marks: ${quoted_cp(i)}`)}}}if(n-t>NSM_MAX){throw new Error(`excessive non-spacing marks: ${bidi_qq(safe_str_from_cps(e.slice(t-1,n)))} (${n-t}/${NSM_MAX})`)}t=n}}}}function tokens_from_str(e,t,r){let n=[];let i=[];e=e.slice().reverse();while(e.length){let s=consume_emoji_reversed(e);if(s){if(i.length){n.push(t(i));i=[]}n.push(r(s))}else{let t=e.pop();if(VALID.has(t)){i.push(t)}else{let e=MAPPED.get(t);if(e){i.push(...e)}else if(!IGNORED.has(t)){throw error_disallowed(t)}}}}if(i.length){n.push(t(i))}return n}function filter_fe0f(e){return e.filter((e=>e!=FE0F))}function consume_emoji_reversed(e,t){let r=EMOJI_ROOT;let n;let i=e.length;while(i){r=r.get(e[--i]);if(!r)break;let{V:s}=r;if(s){n=s;if(t)t.push(...e.slice(i).reverse());e.length=i}}return n}const Zeros=new Uint8Array(32);Zeros.fill(0);function checkComponent(e){assertArgument(e.length!==0,"invalid ENS name; empty component","comp",e);return e}function ensNameSplit(e){const t=toUtf8Bytes(ensNormalize(e));const r=[];if(e.length===0){return r}let n=0;for(let e=0;e<t.length;e++){const i=t[e];if(i===46){r.push(checkComponent(t.slice(n,e)));n=e+1}}assertArgument(n<t.length,"invalid ENS name; empty component","name",e);r.push(checkComponent(t.slice(n)));return r}function ensNormalize(e){try{if(e.length===0){throw new Error("empty label")}return ens_normalize(e)}catch(t){assertArgument(false,`invalid ENS name (${t.message})`,"name",e)}}function isValidName(e){try{return ensNameSplit(e).length!==0}catch(e){}return false}function namehash(e){assertArgument(typeof e==="string","invalid ENS name; not a string","name",e);assertArgument(e.length,`invalid ENS name (empty label)`,"name",e);let t=Zeros;const r=ensNameSplit(e);while(r.length){t=keccak256(concat$a([t,keccak256(r.pop())]))}return hexlify(t)}function dnsEncode(e){return hexlify(concat$a(ensNameSplit(e).map((e=>{if(e.length>63){throw new Error("invalid DNS encoded entry; length exceeds 63 bytes")}const t=new Uint8Array(e.length+1);t.set(e,1);t[0]=t.length-1;return t}))))+"00"}function accessSetify(e,t){return{address:getAddress(e),storageKeys:t.map(((e,t)=>{assertArgument(isHexString(e,32),"invalid slot",`storageKeys[${t}]`,e);return e.toLowerCase()}))}}function accessListify(e){if(Array.isArray(e)){return e.map(((t,r)=>{if(Array.isArray(t)){assertArgument(t.length===2,"invalid slot set",`value[${r}]`,t);return accessSetify(t[0],t[1])}assertArgument(t!=null&&typeof t==="object","invalid address-slot set","value",e);return accessSetify(t.address,t.storageKeys)}))}assertArgument(e!=null&&typeof e==="object","invalid access list","value",e);const t=Object.keys(e).map((t=>{const r=e[t].reduce(((e,t)=>{e[t]=true;return e}),{});return accessSetify(t,Object.keys(r).sort())}));t.sort(((e,t)=>e.address.localeCompare(t.address)));return t}function computeAddress(e){let t;if(typeof e==="string"){t=SigningKey.computePublicKey(e,false)}else{t=e.publicKey}return getAddress(keccak256("0x"+t.substring(4)).substring(26))}function recoverAddress(e,t){return computeAddress(SigningKey.recoverPublicKey(e,t))}const BN_0$4=BigInt(0);const BN_2$2=BigInt(2);const BN_27=BigInt(27);const BN_28=BigInt(28);const BN_35=BigInt(35);const BN_MAX_UINT=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function handleAddress(e){if(e==="0x"){return null}return getAddress(e)}function handleAccessList(e,t){try{return accessListify(e)}catch(r){assertArgument(false,r.message,t,e)}}function handleNumber(e,t){if(e==="0x"){return 0}return getNumber$1(e,t)}function handleUint(e,t){if(e==="0x"){return BN_0$4}const r=getBigInt(e,t);assertArgument(r<=BN_MAX_UINT,"value exceeds uint size",t,r);return r}function formatNumber(e,t){const r=getBigInt(e,"value");const n=toBeArray(r);assertArgument(n.length<=32,`value too large`,`tx.${t}`,r);return n}function formatAccessList(e){return accessListify(e).map((e=>[e.address,e.storageKeys]))}function _parseLegacy(e){const t=decodeRlp(e);assertArgument(Array.isArray(t)&&(t.length===9||t.length===6),"invalid field count for legacy transaction","data",e);const r={type:0,nonce:handleNumber(t[0],"nonce"),gasPrice:handleUint(t[1],"gasPrice"),gasLimit:handleUint(t[2],"gasLimit"),to:handleAddress(t[3]),value:handleUint(t[4],"value"),data:hexlify(t[5]),chainId:BN_0$4};if(t.length===6){return r}const n=handleUint(t[6],"v");const i=handleUint(t[7],"r");const s=handleUint(t[8],"s");if(i===BN_0$4&&s===BN_0$4){r.chainId=n}else{let i=(n-BN_35)/BN_2$2;if(i<BN_0$4){i=BN_0$4}r.chainId=i;assertArgument(i!==BN_0$4||(n===BN_27||n===BN_28),"non-canonical legacy v","v",t[6]);r.signature=Signature$6.from({r:zeroPadValue(t[7],32),s:zeroPadValue(t[8],32),v:n});r.hash=keccak256(e)}return r}function _serializeLegacy(e,t){const r=[formatNumber(e.nonce||0,"nonce"),formatNumber(e.gasPrice||0,"gasPrice"),formatNumber(e.gasLimit||0,"gasLimit"),e.to!=null?getAddress(e.to):"0x",formatNumber(e.value||0,"value"),e.data||"0x"];let n=BN_0$4;if(e.chainId!=BN_0$4){n=getBigInt(e.chainId,"tx.chainId");assertArgument(!t||t.networkV==null||t.legacyChainId===n,"tx.chainId/sig.v mismatch","sig",t)}else if(e.signature){const t=e.signature.legacyChainId;if(t!=null){n=t}}if(!t){if(n!==BN_0$4){r.push(toBeArray(n));r.push("0x");r.push("0x")}return encodeRlp(r)}let i=BigInt(27+t.yParity);if(n!==BN_0$4){i=Signature$6.getChainIdV(n,t.v)}else if(BigInt(t.v)!==i){assertArgument(false,"tx.chainId/sig.v mismatch","sig",t)}r.push(toBeArray(i));r.push(toBeArray(t.r));r.push(toBeArray(t.s));return encodeRlp(r)}function _parseEipSignature(e,t){let r;try{r=handleNumber(t[0],"yParity");if(r!==0&&r!==1){throw new Error("bad yParity")}}catch(e){assertArgument(false,"invalid yParity","yParity",t[0])}const n=zeroPadValue(t[1],32);const i=zeroPadValue(t[2],32);const s=Signature$6.from({r:n,s:i,yParity:r});e.signature=s}function _parseEip1559(e){const t=decodeRlp(getBytes(e).slice(1));assertArgument(Array.isArray(t)&&(t.length===9||t.length===12),"invalid field count for transaction type: 2","data",hexlify(e));const r=handleUint(t[2],"maxPriorityFeePerGas");const n=handleUint(t[3],"maxFeePerGas");const i={type:2,chainId:handleUint(t[0],"chainId"),nonce:handleNumber(t[1],"nonce"),maxPriorityFeePerGas:r,maxFeePerGas:n,gasPrice:null,gasLimit:handleUint(t[4],"gasLimit"),to:handleAddress(t[5]),value:handleUint(t[6],"value"),data:hexlify(t[7]),accessList:handleAccessList(t[8],"accessList")};if(t.length===9){return i}i.hash=keccak256(e);_parseEipSignature(i,t.slice(9));return i}function _serializeEip1559(e,t){const r=[formatNumber(e.chainId||0,"chainId"),formatNumber(e.nonce||0,"nonce"),formatNumber(e.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),formatNumber(e.maxFeePerGas||0,"maxFeePerGas"),formatNumber(e.gasLimit||0,"gasLimit"),e.to!=null?getAddress(e.to):"0x",formatNumber(e.value||0,"value"),e.data||"0x",formatAccessList(e.accessList||[])];if(t){r.push(formatNumber(t.yParity,"yParity"));r.push(toBeArray(t.r));r.push(toBeArray(t.s))}return concat$a(["0x02",encodeRlp(r)])}function _parseEip2930(e){const t=decodeRlp(getBytes(e).slice(1));assertArgument(Array.isArray(t)&&(t.length===8||t.length===11),"invalid field count for transaction type: 1","data",hexlify(e));const r={type:1,chainId:handleUint(t[0],"chainId"),nonce:handleNumber(t[1],"nonce"),gasPrice:handleUint(t[2],"gasPrice"),gasLimit:handleUint(t[3],"gasLimit"),to:handleAddress(t[4]),value:handleUint(t[5],"value"),data:hexlify(t[6]),accessList:handleAccessList(t[7],"accessList")};if(t.length===8){return r}r.hash=keccak256(e);_parseEipSignature(r,t.slice(8));return r}function _serializeEip2930(e,t){const r=[formatNumber(e.chainId||0,"chainId"),formatNumber(e.nonce||0,"nonce"),formatNumber(e.gasPrice||0,"gasPrice"),formatNumber(e.gasLimit||0,"gasLimit"),e.to!=null?getAddress(e.to):"0x",formatNumber(e.value||0,"value"),e.data||"0x",formatAccessList(e.accessList||[])];if(t){r.push(formatNumber(t.yParity,"recoveryParam"));r.push(toBeArray(t.r));r.push(toBeArray(t.s))}return concat$a(["0x01",encodeRlp(r)])}class Transaction$2{#z;#X;#O;#Q;#W;#J;#Z;#ee;#te;#re;#ne;#ie;get type(){return this.#z}set type(e){switch(e){case null:this.#z=null;break;case 0:case"legacy":this.#z=0;break;case 1:case"berlin":case"eip-2930":this.#z=1;break;case 2:case"london":case"eip-1559":this.#z=2;break;default:assertArgument(false,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559"}return null}get to(){return this.#X}set to(e){this.#X=e==null?null:getAddress(e)}get nonce(){return this.#Q}set nonce(e){this.#Q=getNumber$1(e,"value")}get gasLimit(){return this.#W}set gasLimit(e){this.#W=getBigInt(e)}get gasPrice(){const e=this.#J;if(e==null&&(this.type===0||this.type===1)){return BN_0$4}return e}set gasPrice(e){this.#J=e==null?null:getBigInt(e,"gasPrice")}get maxPriorityFeePerGas(){const e=this.#Z;if(e==null){if(this.type===2){return BN_0$4}return null}return e}set maxPriorityFeePerGas(e){this.#Z=e==null?null:getBigInt(e,"maxPriorityFeePerGas")}get maxFeePerGas(){const e=this.#ee;if(e==null){if(this.type===2){return BN_0$4}return null}return e}set maxFeePerGas(e){this.#ee=e==null?null:getBigInt(e,"maxFeePerGas")}get data(){return this.#O}set data(e){this.#O=hexlify(e)}get value(){return this.#te}set value(e){this.#te=getBigInt(e,"value")}get chainId(){return this.#re}set chainId(e){this.#re=getBigInt(e)}get signature(){return this.#ne||null}set signature(e){this.#ne=e==null?null:Signature$6.from(e)}get accessList(){const e=this.#ie||null;if(e==null){if(this.type===1||this.type===2){return[]}return null}return e}set accessList(e){this.#ie=e==null?null:accessListify(e)}constructor(){this.#z=null;this.#X=null;this.#Q=0;this.#W=BigInt(0);this.#J=null;this.#Z=null;this.#ee=null;this.#O="0x";this.#te=BigInt(0);this.#re=BigInt(0);this.#ne=null;this.#ie=null}get hash(){if(this.signature==null){return null}return keccak256(this.serialized)}get unsignedHash(){return keccak256(this.unsignedSerialized)}get from(){if(this.signature==null){return null}return recoverAddress(this.unsignedHash,this.signature)}get fromPublicKey(){if(this.signature==null){return null}return SigningKey.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return this.signature!=null}get serialized(){assert$m(this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});switch(this.inferType()){case 0:return _serializeLegacy(this,this.signature);case 1:return _serializeEip2930(this,this.signature);case 2:return _serializeEip1559(this,this.signature)}assert$m(false,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})}get unsignedSerialized(){switch(this.inferType()){case 0:return _serializeLegacy(this);case 1:return _serializeEip2930(this);case 2:return _serializeEip1559(this)}assert$m(false,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".unsignedSerialized"})}inferType(){return this.inferTypes().pop()}inferTypes(){const e=this.gasPrice!=null;const t=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null;const r=this.accessList!=null;if(this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null){assert$m(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this})}assert$m(!t||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this});assert$m(this.type!==0||!r,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const n=[];if(this.type!=null){n.push(this.type)}else{if(t){n.push(2)}else if(e){n.push(1);if(!r){n.push(0)}}else if(r){n.push(1);n.push(2)}else{n.push(0);n.push(1);n.push(2)}}n.sort();return n}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}clone(){return Transaction$2.from(this)}toJSON(){const e=e=>{if(e==null){return null}return e.toString()};return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(e){if(e==null){return new Transaction$2}if(typeof e==="string"){const t=getBytes(e);if(t[0]>=127){return Transaction$2.from(_parseLegacy(t))}switch(t[0]){case 1:return Transaction$2.from(_parseEip2930(t));case 2:return Transaction$2.from(_parseEip1559(t))}assert$m(false,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const t=new Transaction$2;if(e.type!=null){t.type=e.type}if(e.to!=null){t.to=e.to}if(e.nonce!=null){t.nonce=e.nonce}if(e.gasLimit!=null){t.gasLimit=e.gasLimit}if(e.gasPrice!=null){t.gasPrice=e.gasPrice}if(e.maxPriorityFeePerGas!=null){t.maxPriorityFeePerGas=e.maxPriorityFeePerGas}if(e.maxFeePerGas!=null){t.maxFeePerGas=e.maxFeePerGas}if(e.data!=null){t.data=e.data}if(e.value!=null){t.value=e.value}if(e.chainId!=null){t.chainId=e.chainId}if(e.signature!=null){t.signature=Signature$6.from(e.signature)}if(e.accessList!=null){t.accessList=e.accessList}if(e.hash!=null){assertArgument(t.isSigned(),"unsigned transaction cannot define hash","tx",e);assertArgument(t.hash===e.hash,"hash mismatch","tx",e)}if(e.from!=null){assertArgument(t.isSigned(),"unsigned transaction cannot define from","tx",e);assertArgument(t.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)}return t}}function hashMessage(e){if(typeof e==="string"){e=toUtf8Bytes(e)}return keccak256(concat$a([toUtf8Bytes(MessagePrefix),toUtf8Bytes(String(e.length)),e]))}function verifyMessage(e,t){const r=hashMessage(e);return recoverAddress(r,t)}const regexBytes=new RegExp("^bytes([0-9]+)$");const regexNumber=new RegExp("^(u?int)([0-9]*)$");const regexArray=new RegExp("^(.*)\\[([0-9]*)\\]$");function _pack(e,t,r){switch(e){case"address":if(r){return getBytes(zeroPadValue(t,32))}return getBytes(getAddress(t));case"string":return toUtf8Bytes(t);case"bytes":return getBytes(t);case"bool":t=!!t?"0x01":"0x00";if(r){return getBytes(zeroPadValue(t,32))}return getBytes(t)}let n=e.match(regexNumber);if(n){let i=n[1]==="int";let s=parseInt(n[2]||"256");assertArgument((!n[2]||n[2]===String(s))&&s%8===0&&s!==0&&s<=256,"invalid number type","type",e);if(r){s=256}if(i){t=toTwos(t,s)}return getBytes(zeroPadValue(toBeArray(t),s/8))}n=e.match(regexBytes);if(n){const i=parseInt(n[1]);assertArgument(String(i)===n[1]&&i!==0&&i<=32,"invalid bytes type","type",e);assertArgument(dataLength(t)===i,`invalid value for ${e}`,"value",t);if(r){return getBytes(zeroPadBytes(t,32))}return t}n=e.match(regexArray);if(n&&Array.isArray(t)){const r=n[1];const i=parseInt(n[2]||String(t.length));assertArgument(i===t.length,`invalid array length for ${e}`,"value",t);const s=[];t.forEach((function(e){s.push(_pack(r,e,true))}));return getBytes(concat$a(s))}assertArgument(false,"invalid type","type",e)}function solidityPacked(e,t){assertArgument(e.length===t.length,"wrong number of values; expected ${ types.length }","values",t);const r=[];e.forEach((function(e,n){r.push(_pack(e,t[n]))}));return hexlify(concat$a(r))}function solidityPackedKeccak256(e,t){return keccak256(solidityPacked(e,t))}function solidityPackedSha256(e,t){return sha256$2(solidityPacked(e,t))}const padding=new Uint8Array(32);padding.fill(0);const BN__1=BigInt(-1);const BN_0$3=BigInt(0);const BN_1$1=BigInt(1);const BN_MAX_UINT256=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function hexPadRight(e){const t=getBytes(e);const r=t.length%32;if(r){return concat$a([t,padding.slice(r)])}return hexlify(t)}const hexTrue=toBeHex(BN_1$1,32);const hexFalse=toBeHex(BN_0$3,32);const domainFieldTypes={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"};const domainFieldNames=["name","version","chainId","verifyingContract","salt"];function checkString(e){return function(t){assertArgument(typeof t==="string",`invalid domain value for ${JSON.stringify(e)}`,`domain.${e}`,t);return t}}const domainChecks={name:checkString("name"),version:checkString("version"),chainId:function(e){const t=getBigInt(e,"domain.chainId");assertArgument(t>=0,"invalid chain ID","domain.chainId",e);if(Number.isSafeInteger(t)){return Number(t)}return toQuantity(t)},verifyingContract:function(e){try{return getAddress(e).toLowerCase()}catch(e){}assertArgument(false,`invalid domain value "verifyingContract"`,"domain.verifyingContract",e)},salt:function(e){const t=getBytes(e,"domain.salt");assertArgument(t.length===32,`invalid domain value "salt"`,"domain.salt",e);return hexlify(t)}};function getBaseEncoder(e){{const t=e.match(/^(u?)int(\d*)$/);if(t){const r=t[1]==="";const n=parseInt(t[2]||"256");assertArgument(n%8===0&&n!==0&&n<=256&&(t[2]==null||t[2]===String(n)),"invalid numeric width","type",e);const i=mask(BN_MAX_UINT256,r?n-1:n);const s=r?(i+BN_1$1)*BN__1:BN_0$3;return function(t){const n=getBigInt(t,"value");assertArgument(n>=s&&n<=i,`value out-of-bounds for ${e}`,"value",n);return toBeHex(r?toTwos(n,256):n,32)}}}{const t=e.match(/^bytes(\d+)$/);if(t){const r=parseInt(t[1]);assertArgument(r!==0&&r<=32&&t[1]===String(r),"invalid bytes width","type",e);return function(t){const n=getBytes(t);assertArgument(n.length===r,`invalid length for ${e}`,"value",t);return hexPadRight(t)}}}switch(e){case"address":return function(e){return zeroPadValue(getAddress(e),32)};case"bool":return function(e){return!e?hexFalse:hexTrue};case"bytes":return function(e){return keccak256(e)};case"string":return function(e){return id(e)}}return null}function encodeType(e,t){return`${e}(${t.map((({name:e,type:t})=>t+" "+e)).join(",")})`}class TypedDataEncoder{primaryType;#se;get types(){return JSON.parse(this.#se)}#ae;#oe;constructor(e){this.#se=JSON.stringify(e);this.#ae=new Map;this.#oe=new Map;const t=new Map;const r=new Map;const n=new Map;Object.keys(e).forEach((e=>{t.set(e,new Set);r.set(e,[]);n.set(e,new Set)}));for(const n in e){const i=new Set;for(const s of e[n]){assertArgument(!i.has(s.name),`duplicate variable name ${JSON.stringify(s.name)} in ${JSON.stringify(n)}`,"types",e);i.add(s.name);const a=s.type.match(/^([^\x5b]*)(\x5b|$)/)[1]||null;assertArgument(a!==n,`circular type reference to ${JSON.stringify(a)}`,"types",e);const o=getBaseEncoder(a);if(o){continue}assertArgument(r.has(a),`unknown type ${JSON.stringify(a)}`,"types",e);r.get(a).push(n);t.get(n).add(a)}}const i=Array.from(r.keys()).filter((e=>r.get(e).length===0));assertArgument(i.length!==0,"missing primary type","types",e);assertArgument(i.length===1,`ambiguous primary types or unused types: ${i.map((e=>JSON.stringify(e))).join(", ")}`,"types",e);defineProperties(this,{primaryType:i[0]});function s(i,a){assertArgument(!a.has(i),`circular type reference to ${JSON.stringify(i)}`,"types",e);a.add(i);for(const e of t.get(i)){if(!r.has(e)){continue}s(e,a);for(const t of a){n.get(t).add(e)}}a.delete(i)}s(this.primaryType,new Set);for(const[t,r]of n){const n=Array.from(r);n.sort();this.#ae.set(t,encodeType(t,e[t])+n.map((t=>encodeType(t,e[t]))).join(""))}}getEncoder(e){let t=this.#oe.get(e);if(!t){t=this.#fe(e);this.#oe.set(e,t)}return t}#fe(e){{const t=getBaseEncoder(e);if(t){return t}}const t=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(t){const e=t[1];const r=this.getEncoder(e);return n=>{assertArgument(!t[3]||parseInt(t[3])===n.length,`array length mismatch; expected length ${parseInt(t[3])}`,"value",n);let i=n.map(r);if(this.#ae.has(e)){i=i.map(keccak256)}return keccak256(concat$a(i))}}const r=this.types[e];if(r){const t=id(this.#ae.get(e));return e=>{const n=r.map((({name:t,type:r})=>{const n=this.getEncoder(r)(e[t]);if(this.#ae.has(r)){return keccak256(n)}return n}));n.unshift(t);return concat$a(n)}}assertArgument(false,`unknown type: ${e}`,"type",e)}encodeType(e){const t=this.#ae.get(e);assertArgument(t,`unknown type: ${JSON.stringify(e)}`,"name",e);return t}encodeData(e,t){return this.getEncoder(e)(t)}hashStruct(e,t){return keccak256(this.encodeData(e,t))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,t,r){{const n=getBaseEncoder(e);if(n){return r(e,t)}}const n=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(n){assertArgument(!n[3]||parseInt(n[3])===t.length,`array length mismatch; expected length ${parseInt(n[3])}`,"value",t);return t.map((e=>this._visit(n[1],e,r)))}const i=this.types[e];if(i){return i.reduce(((e,{name:n,type:i})=>{e[n]=this._visit(i,t[n],r);return e}),{})}assertArgument(false,`unknown type: ${e}`,"type",e)}visit(e,t){return this._visit(this.primaryType,e,t)}static from(e){return new TypedDataEncoder(e)}static getPrimaryType(e){return TypedDataEncoder.from(e).primaryType}static hashStruct(e,t,r){return TypedDataEncoder.from(t).hashStruct(e,r)}static hashDomain(e){const t=[];for(const r in e){if(e[r]==null){continue}const n=domainFieldTypes[r];assertArgument(n,`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",e);t.push({name:r,type:n})}t.sort(((e,t)=>domainFieldNames.indexOf(e.name)-domainFieldNames.indexOf(t.name)));return TypedDataEncoder.hashStruct("EIP712Domain",{EIP712Domain:t},e)}static encode(e,t,r){return concat$a(["0x1901",TypedDataEncoder.hashDomain(e),TypedDataEncoder.from(t).hash(r)])}static hash(e,t,r){return keccak256(TypedDataEncoder.encode(e,t,r))}static async resolveNames(e,t,r,n){e=Object.assign({},e);for(const t in e){if(e[t]==null){delete e[t]}}const i={};if(e.verifyingContract&&!isHexString(e.verifyingContract,20)){i[e.verifyingContract]="0x"}const s=TypedDataEncoder.from(t);s.visit(r,((e,t)=>{if(e==="address"&&!isHexString(t,20)){i[t]="0x"}return t}));for(const e in i){i[e]=await n(e)}if(e.verifyingContract&&i[e.verifyingContract]){e.verifyingContract=i[e.verifyingContract]}r=s.visit(r,((e,t)=>{if(e==="address"&&i[t]){return i[t]}return t}));return{domain:e,value:r}}static getPayload(e,t,r){TypedDataEncoder.hashDomain(e);const n={};const i=[];domainFieldNames.forEach((t=>{const r=e[t];if(r==null){return}n[t]=domainChecks[t](r);i.push({name:t,type:domainFieldTypes[t]})}));const s=TypedDataEncoder.from(t);const a=Object.assign({},t);assertArgument(a.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",t);a.EIP712Domain=i;s.encode(r);return{types:a,domain:n,primaryType:s.primaryType,message:s.visit(r,((e,t)=>{if(e.match(/^bytes(\d*)/)){return hexlify(getBytes(t))}if(e.match(/^u?int/)){return getBigInt(t).toString()}switch(e){case"address":return t.toLowerCase();case"bool":return!!t;case"string":assertArgument(typeof t==="string","invalid string","value",t);return t}assertArgument(false,"unsupported type","type",e)}))}}}function verifyTypedData(e,t,r,n){return recoverAddress(TypedDataEncoder.hash(e,t,r),n)}function setify(e){const t=new Set;e.forEach((e=>t.add(e)));return Object.freeze(t)}const _kwVisibDeploy="external public payable";const KwVisibDeploy=setify(_kwVisibDeploy.split(" "));const _kwVisib="constant external internal payable private public pure view";const KwVisib=setify(_kwVisib.split(" "));const _kwTypes="constructor error event fallback function receive struct";const KwTypes=setify(_kwTypes.split(" "));const _kwModifiers="calldata memory storage payable indexed";const KwModifiers=setify(_kwModifiers.split(" "));const _kwOther="tuple returns";const _keywords=[_kwTypes,_kwModifiers,_kwOther,_kwVisib].join(" ");const Keywords=setify(_keywords.split(" "));const SimpleTokens={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"};const regexWhitespacePrefix=new RegExp("^(\\s*)");const regexNumberPrefix=new RegExp("^([0-9]+)");const regexIdPrefix=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)");const regexId=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$");const regexType=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");class TokenString{#D;#ce;get offset(){return this.#D}get length(){return this.#ce.length-this.#D}constructor(e){this.#D=0;this.#ce=e.slice()}clone(){return new TokenString(this.#ce)}reset(){this.#D=0}#ue(e=0,t=0){return new TokenString(this.#ce.slice(e,t).map((t=>Object.freeze(Object.assign({},t,{match:t.match-e,linkBack:t.linkBack-e,linkNext:t.linkNext-e})))))}popKeyword(e){const t=this.peek();if(t.type!=="KEYWORD"||!e.has(t.text)){throw new Error(`expected keyword ${t.text}`)}return this.pop().text}popType(e){if(this.peek().type!==e){throw new Error(`expected ${e}; got ${JSON.stringify(this.peek())}`)}return this.pop().text}popParen(){const e=this.peek();if(e.type!=="OPEN_PAREN"){throw new Error("bad start")}const t=this.#ue(this.#D+1,e.match+1);this.#D=e.match+1;return t}popParams(){const e=this.peek();if(e.type!=="OPEN_PAREN"){throw new Error("bad start")}const t=[];while(this.#D<e.match-1){const e=this.peek().linkNext;t.push(this.#ue(this.#D+1,e));this.#D=e}this.#D=e.match+1;return t}peek(){if(this.#D>=this.#ce.length){throw new Error("out-of-bounds")}return this.#ce[this.#D]}peekKeyword(e){const t=this.peekType("KEYWORD");return t!=null&&e.has(t)?t:null}peekType(e){if(this.length===0){return null}const t=this.peek();return t.type===e?t.text:null}pop(){const e=this.peek();this.#D++;return e}toString(){const e=[];for(let t=this.#D;t<this.#ce.length;t++){const r=this.#ce[t];e.push(`${r.type}:${r.text}`)}return`<TokenString ${e.join(" ")}>`}}function lex(e){const t=[];const r=t=>{const r=s<e.length?JSON.stringify(e[s]):"$EOI";throw new Error(`invalid token ${r} at ${s}: ${t}`)};let n=[];let i=[];let s=0;while(s<e.length){let a=e.substring(s);let o=a.match(regexWhitespacePrefix);if(o){s+=o[1].length;a=e.substring(s)}const f={depth:n.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:s,value:-1};t.push(f);let c=SimpleTokens[a[0]]||"";if(c){f.type=c;f.text=a[0];s++;if(c==="OPEN_PAREN"){n.push(t.length-1);i.push(t.length-1)}else if(c=="CLOSE_PAREN"){if(n.length===0){r("no matching open bracket")}f.match=n.pop();t[f.match].match=t.length-1;f.depth--;f.linkBack=i.pop();t[f.linkBack].linkNext=t.length-1}else if(c==="COMMA"){f.linkBack=i.pop();t[f.linkBack].linkNext=t.length-1;i.push(t.length-1)}else if(c==="OPEN_BRACKET"){f.type="BRACKET"}else if(c==="CLOSE_BRACKET"){let e=t.pop().text;if(t.length>0&&t[t.length-1].type==="NUMBER"){const r=t.pop().text;e=r+e;t[t.length-1].value=getNumber$1(r)}if(t.length===0||t[t.length-1].type!=="BRACKET"){throw new Error("missing opening bracket")}t[t.length-1].text+=e}continue}o=a.match(regexIdPrefix);if(o){f.text=o[1];s+=f.text.length;if(Keywords.has(f.text)){f.type="KEYWORD";continue}if(f.text.match(regexType)){f.type="TYPE";continue}f.type="ID";continue}o=a.match(regexNumberPrefix);if(o){f.text=o[1];f.type="NUMBER";s+=f.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(a[0])} at position ${s}`)}return new TokenString(t.map((e=>Object.freeze(e))))}function allowSingle(e,t){let r=[];for(const n in t.keys()){if(e.has(n)){r.push(n)}}if(r.length>1){throw new Error(`conflicting types: ${r.join(", ")}`)}}function consumeName(e,t){if(t.peekKeyword(KwTypes)){const r=t.pop().text;if(r!==e){throw new Error(`expected ${e}, got ${r}`)}}return t.popType("ID")}function consumeKeywords(e,t){const r=new Set;while(true){const n=e.peekType("KEYWORD");if(n==null||t&&!t.has(n)){break}e.pop();if(r.has(n)){throw new Error(`duplicate keywords: ${JSON.stringify(n)}`)}r.add(n)}return Object.freeze(r)}function consumeMutability(e){let t=consumeKeywords(e,KwVisib);allowSingle(t,setify("constant payable nonpayable".split(" ")));allowSingle(t,setify("pure view payable nonpayable".split(" ")));if(t.has("view")){return"view"}if(t.has("pure")){return"pure"}if(t.has("payable")){return"payable"}if(t.has("nonpayable")){return"nonpayable"}if(t.has("constant")){return"view"}return"nonpayable"}function consumeParams(e,t){return e.popParams().map((e=>ParamType.from(e,t)))}function consumeGas(e){if(e.peekType("AT")){e.pop();if(e.peekType("NUMBER")){return getBigInt(e.pop().text)}throw new Error("invalid gas")}return null}function consumeEoi(e){if(e.length){throw new Error(`unexpected tokens: ${e.toString()}`)}}const regexArrayType=new RegExp(/^(.*)\[([0-9]*)\]$/);function verifyBasicType(e){const t=e.match(regexType);assertArgument(t,"invalid type","type",e);if(e==="uint"){return"uint256"}if(e==="int"){return"int256"}if(t[2]){const r=parseInt(t[2]);assertArgument(r!==0&&r<=32,"invalid bytes length","type",e)}else if(t[3]){const r=parseInt(t[3]);assertArgument(r!==0&&r<=256&&r%8===0,"invalid numeric width","type",e)}return e}const _guard$2={};const internal$1=Symbol.for("_ethers_internal");const ParamTypeInternal="_ParamTypeInternal";const ErrorFragmentInternal="_ErrorInternal";const EventFragmentInternal="_EventInternal";const ConstructorFragmentInternal="_ConstructorInternal";const FallbackFragmentInternal="_FallbackInternal";const FunctionFragmentInternal="_FunctionInternal";const StructFragmentInternal="_StructInternal";class ParamType{name;type;baseType;indexed;components;arrayLength;arrayChildren;constructor(e,t,r,n,i,s,a,o){assertPrivate(e,_guard$2,"ParamType");Object.defineProperty(this,internal$1,{value:ParamTypeInternal});if(s){s=Object.freeze(s.slice())}if(n==="array"){if(a==null||o==null){throw new Error("")}}else if(a!=null||o!=null){throw new Error("")}if(n==="tuple"){if(s==null){throw new Error("")}}else if(s!=null){throw new Error("")}defineProperties(this,{name:t,type:r,baseType:n,indexed:i,components:s,arrayLength:a,arrayChildren:o})}format(e){if(e==null){e="sighash"}if(e==="json"){const t=this.name||"";if(this.isArray()){const e=JSON.parse(this.arrayChildren.format("json"));e.name=t;e.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`;return JSON.stringify(e)}const r={type:this.baseType==="tuple"?"tuple":this.type,name:t};if(typeof this.indexed==="boolean"){r.indexed=this.indexed}if(this.isTuple()){r.components=this.components.map((t=>JSON.parse(t.format(e))))}return JSON.stringify(r)}let t="";if(this.isArray()){t+=this.arrayChildren.format(e);t+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`}else{if(this.isTuple()){t+="("+this.components.map((t=>t.format(e))).join(e==="full"?", ":",")+")"}else{t+=this.type}}if(e!=="sighash"){if(this.indexed===true){t+=" indexed"}if(e==="full"&&this.name){t+=" "+this.name}}return t}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(e,t){if(this.isArray()){if(!Array.isArray(e)){throw new Error("invalid array value")}if(this.arrayLength!==-1&&e.length!==this.arrayLength){throw new Error("array is wrong length")}const r=this;return e.map((e=>r.arrayChildren.walk(e,t)))}if(this.isTuple()){if(!Array.isArray(e)){throw new Error("invalid tuple value")}if(e.length!==this.components.length){throw new Error("array is wrong length")}const r=this;return e.map(((e,n)=>r.components[n].walk(e,t)))}return t(this.type,e)}#le(e,t,r,n){if(this.isArray()){if(!Array.isArray(t)){throw new Error("invalid array value")}if(this.arrayLength!==-1&&t.length!==this.arrayLength){throw new Error("array is wrong length")}const i=this.arrayChildren;const s=t.slice();s.forEach(((t,n)=>{i.#le(e,t,r,(e=>{s[n]=e}))}));n(s);return}if(this.isTuple()){const i=this.components;let s;if(Array.isArray(t)){s=t.slice()}else{if(t==null||typeof t!=="object"){throw new Error("invalid tuple value")}s=i.map((e=>{if(!e.name){throw new Error("cannot use object value with unnamed components")}if(!(e.name in t)){throw new Error(`missing value for component ${e.name}`)}return t[e.name]}))}if(s.length!==this.components.length){throw new Error("array is wrong length")}s.forEach(((t,n)=>{i[n].#le(e,t,r,(e=>{s[n]=e}))}));n(s);return}const i=r(this.type,t);if(i.then){e.push(async function(){n(await i)}())}else{n(i)}}async walkAsync(e,t){const r=[];const n=[e];this.#le(r,e,t,(e=>{n[0]=e}));if(r.length){await Promise.all(r)}return n[0]}static from(e,t){if(ParamType.isParamType(e)){return e}if(typeof e==="string"){try{return ParamType.from(lex(e),t)}catch(t){assertArgument(false,"invalid param type","obj",e)}}else if(e instanceof TokenString){let r="",n="";let i=null;if(consumeKeywords(e,setify(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")){n="tuple";i=e.popParams().map((e=>ParamType.from(e)));r=`tuple(${i.map((e=>e.format())).join(",")})`}else{r=verifyBasicType(e.popType("TYPE"));n=r}let s=null;let a=null;while(e.length&&e.peekType("BRACKET")){const t=e.pop();s=new ParamType(_guard$2,"",r,n,null,i,a,s);a=t.value;r+=t.text;n="array";i=null}let o=null;const f=consumeKeywords(e,KwModifiers);if(f.has("indexed")){if(!t){throw new Error("")}o=true}const c=e.peekType("ID")?e.pop().text:"";if(e.length){throw new Error("leftover tokens")}return new ParamType(_guard$2,c,r,n,o,i,a,s)}const r=e.name;assertArgument(!r||typeof r==="string"&&r.match(regexId),"invalid name","obj.name",r);let n=e.indexed;if(n!=null){assertArgument(t,"parameter cannot be indexed","obj.indexed",e.indexed);n=!!n}let i=e.type;let s=i.match(regexArrayType);if(s){const t=parseInt(s[2]||"-1");const a=ParamType.from({type:s[1],components:e.components});return new ParamType(_guard$2,r||"",i,"array",n,null,t,a)}if(i==="tuple"||i.startsWith("tuple(")||i.startsWith("(")){const t=e.components!=null?e.components.map((e=>ParamType.from(e))):null;const s=new ParamType(_guard$2,r||"",i,"tuple",n,t,null,null);return s}i=verifyBasicType(e.type);return new ParamType(_guard$2,r||"",i,i,n,null,null,null)}static isParamType(e){return e&&e[internal$1]===ParamTypeInternal}}class Fragment{type;inputs;constructor(e,t,r){assertPrivate(e,_guard$2,"Fragment");r=Object.freeze(r.slice());defineProperties(this,{type:t,inputs:r})}static from(e){if(typeof e==="string"){try{Fragment.from(JSON.parse(e))}catch(e){}return Fragment.from(lex(e))}if(e instanceof TokenString){const t=e.peekKeyword(KwTypes);switch(t){case"constructor":return ConstructorFragment.from(e);case"error":return ErrorFragment.from(e);case"event":return EventFragment.from(e);case"fallback":case"receive":return FallbackFragment.from(e);case"function":return FunctionFragment.from(e);case"struct":return StructFragment.from(e)}}else if(typeof e==="object"){switch(e.type){case"constructor":return ConstructorFragment.from(e);case"error":return ErrorFragment.from(e);case"event":return EventFragment.from(e);case"fallback":case"receive":return FallbackFragment.from(e);case"function":return FunctionFragment.from(e);case"struct":return StructFragment.from(e)}assert$m(false,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}assertArgument(false,"unsupported frgament object","obj",e)}static isConstructor(e){return ConstructorFragment.isFragment(e)}static isError(e){return ErrorFragment.isFragment(e)}static isEvent(e){return EventFragment.isFragment(e)}static isFunction(e){return FunctionFragment.isFragment(e)}static isStruct(e){return StructFragment.isFragment(e)}}class NamedFragment extends Fragment{name;constructor(e,t,r,n){super(e,t,n);assertArgument(typeof r==="string"&&r.match(regexId),"invalid identifier","name",r);n=Object.freeze(n.slice());defineProperties(this,{name:r})}}function joinParams(e,t){return"("+t.map((t=>t.format(e))).join(e==="full"?", ":",")+")"}class ErrorFragment extends NamedFragment{constructor(e,t,r){super(e,"error",t,r);Object.defineProperty(this,internal$1,{value:ErrorFragmentInternal})}get selector(){return id(this.format("sighash")).substring(0,10)}format(e){if(e==null){e="sighash"}if(e==="json"){return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map((t=>JSON.parse(t.format(e))))})}const t=[];if(e!=="sighash"){t.push("error")}t.push(this.name+joinParams(e,this.inputs));return t.join(" ")}static from(e){if(ErrorFragment.isFragment(e)){return e}if(typeof e==="string"){return ErrorFragment.from(lex(e))}else if(e instanceof TokenString){const t=consumeName("error",e);const r=consumeParams(e);consumeEoi(e);return new ErrorFragment(_guard$2,t,r)}return new ErrorFragment(_guard$2,e.name,e.inputs?e.inputs.map(ParamType.from):[])}static isFragment(e){return e&&e[internal$1]===ErrorFragmentInternal}}class EventFragment extends NamedFragment{anonymous;constructor(e,t,r,n){super(e,"event",t,r);Object.defineProperty(this,internal$1,{value:EventFragmentInternal});defineProperties(this,{anonymous:n})}get topicHash(){return id(this.format("sighash"))}format(e){if(e==null){e="sighash"}if(e==="json"){return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map((t=>JSON.parse(t.format(e))))})}const t=[];if(e!=="sighash"){t.push("event")}t.push(this.name+joinParams(e,this.inputs));if(e!=="sighash"&&this.anonymous){t.push("anonymous")}return t.join(" ")}static getTopicHash(e,t){t=(t||[]).map((e=>ParamType.from(e)));const r=new EventFragment(_guard$2,e,t,false);return r.topicHash}static from(e){if(EventFragment.isFragment(e)){return e}if(typeof e==="string"){try{return EventFragment.from(lex(e))}catch(t){assertArgument(false,"invalid event fragment","obj",e)}}else if(e instanceof TokenString){const t=consumeName("event",e);const r=consumeParams(e,true);const n=!!consumeKeywords(e,setify(["anonymous"])).has("anonymous");consumeEoi(e);return new EventFragment(_guard$2,t,r,n)}return new EventFragment(_guard$2,e.name,e.inputs?e.inputs.map((e=>ParamType.from(e,true))):[],!!e.anonymous)}static isFragment(e){return e&&e[internal$1]===EventFragmentInternal}}class ConstructorFragment extends Fragment{payable;gas;constructor(e,t,r,n,i){super(e,t,r);Object.defineProperty(this,internal$1,{value:ConstructorFragmentInternal});defineProperties(this,{payable:n,gas:i})}format(e){assert$m(e!=null&&e!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"});if(e==="json"){return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:undefined,inputs:this.inputs.map((t=>JSON.parse(t.format(e))))})}const t=[`constructor${joinParams(e,this.inputs)}`];if(this.payable){t.push("payable")}if(this.gas!=null){t.push(`@${this.gas.toString()}`)}return t.join(" ")}static from(e){if(ConstructorFragment.isFragment(e)){return e}if(typeof e==="string"){try{return ConstructorFragment.from(lex(e))}catch(t){assertArgument(false,"invalid constuctor fragment","obj",e)}}else if(e instanceof TokenString){consumeKeywords(e,setify(["constructor"]));const t=consumeParams(e);const r=!!consumeKeywords(e,KwVisibDeploy).has("payable");const n=consumeGas(e);consumeEoi(e);return new ConstructorFragment(_guard$2,"constructor",t,r,n)}return new ConstructorFragment(_guard$2,"constructor",e.inputs?e.inputs.map(ParamType.from):[],!!e.payable,e.gas!=null?e.gas:null)}static isFragment(e){return e&&e[internal$1]===ConstructorFragmentInternal}}class FallbackFragment extends Fragment{payable;constructor(e,t,r){super(e,"fallback",t);Object.defineProperty(this,internal$1,{value:FallbackFragmentInternal});defineProperties(this,{payable:r})}format(e){const t=this.inputs.length===0?"receive":"fallback";if(e==="json"){const e=this.payable?"payable":"nonpayable";return JSON.stringify({type:t,stateMutability:e})}return`${t}()${this.payable?" payable":""}`}static from(e){if(FallbackFragment.isFragment(e)){return e}if(typeof e==="string"){try{return FallbackFragment.from(lex(e))}catch(t){assertArgument(false,"invalid fallback fragment","obj",e)}}else if(e instanceof TokenString){const t=e.toString();const r=e.peekKeyword(setify(["fallback","receive"]));assertArgument(r,"type must be fallback or receive","obj",t);const n=e.popKeyword(setify(["fallback","receive"]));if(n==="receive"){const t=consumeParams(e);assertArgument(t.length===0,`receive cannot have arguments`,"obj.inputs",t);consumeKeywords(e,setify(["payable"]));consumeEoi(e);return new FallbackFragment(_guard$2,[],true)}let i=consumeParams(e);if(i.length){assertArgument(i.length===1&&i[0].type==="bytes","invalid fallback inputs","obj.inputs",i.map((e=>e.format("minimal"))).join(", "))}else{i=[ParamType.from("bytes")]}const s=consumeMutability(e);assertArgument(s==="nonpayable"||s==="payable","fallback cannot be constants","obj.stateMutability",s);if(consumeKeywords(e,setify(["returns"])).has("returns")){const t=consumeParams(e);assertArgument(t.length===1&&t[0].type==="bytes","invalid fallback outputs","obj.outputs",t.map((e=>e.format("minimal"))).join(", "))}consumeEoi(e);return new FallbackFragment(_guard$2,i,s==="payable")}if(e.type==="receive"){return new FallbackFragment(_guard$2,[],true)}if(e.type==="fallback"){const t=[ParamType.from("bytes")];const r=e.stateMutability==="payable";return new FallbackFragment(_guard$2,t,r)}assertArgument(false,"invalid fallback description","obj",e)}static isFragment(e){return e&&e[internal$1]===FallbackFragmentInternal}}class FunctionFragment extends NamedFragment{constant;outputs;stateMutability;payable;gas;constructor(e,t,r,n,i,s){super(e,"function",t,n);Object.defineProperty(this,internal$1,{value:FunctionFragmentInternal});i=Object.freeze(i.slice());const a=r==="view"||r==="pure";const o=r==="payable";defineProperties(this,{constant:a,gas:s,outputs:i,payable:o,stateMutability:r})}get selector(){return id(this.format("sighash")).substring(0,10)}format(e){if(e==null){e="sighash"}if(e==="json"){return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:undefined,payable:this.payable,gas:this.gas!=null?this.gas:undefined,inputs:this.inputs.map((t=>JSON.parse(t.format(e)))),outputs:this.outputs.map((t=>JSON.parse(t.format(e))))})}const t=[];if(e!=="sighash"){t.push("function")}t.push(this.name+joinParams(e,this.inputs));if(e!=="sighash"){if(this.stateMutability!=="nonpayable"){t.push(this.stateMutability)}if(this.outputs&&this.outputs.length){t.push("returns");t.push(joinParams(e,this.outputs))}if(this.gas!=null){t.push(`@${this.gas.toString()}`)}}return t.join(" ")}static getSelector(e,t){t=(t||[]).map((e=>ParamType.from(e)));const r=new FunctionFragment(_guard$2,e,"view",t,[],null);return r.selector}static from(e){if(FunctionFragment.isFragment(e)){return e}if(typeof e==="string"){try{return FunctionFragment.from(lex(e))}catch(t){assertArgument(false,"invalid function fragment","obj",e)}}else if(e instanceof TokenString){const t=consumeName("function",e);const r=consumeParams(e);const n=consumeMutability(e);let i=[];if(consumeKeywords(e,setify(["returns"])).has("returns")){i=consumeParams(e)}const s=consumeGas(e);consumeEoi(e);return new FunctionFragment(_guard$2,t,n,r,i,s)}let t=e.stateMutability;if(t==null){t="payable";if(typeof e.constant==="boolean"){t="view";if(!e.constant){t="payable";if(typeof e.payable==="boolean"&&!e.payable){t="nonpayable"}}}else if(typeof e.payable==="boolean"&&!e.payable){t="nonpayable"}}return new FunctionFragment(_guard$2,e.name,t,e.inputs?e.inputs.map(ParamType.from):[],e.outputs?e.outputs.map(ParamType.from):[],e.gas!=null?e.gas:null)}static isFragment(e){return e&&e[internal$1]===FunctionFragmentInternal}}class StructFragment extends NamedFragment{constructor(e,t,r){super(e,"struct",t,r);Object.defineProperty(this,internal$1,{value:StructFragmentInternal})}format(){throw new Error("@TODO")}static from(e){if(typeof e==="string"){try{return StructFragment.from(lex(e))}catch(t){assertArgument(false,"invalid struct fragment","obj",e)}}else if(e instanceof TokenString){const t=consumeName("struct",e);const r=consumeParams(e);consumeEoi(e);return new StructFragment(_guard$2,t,r)}return new StructFragment(_guard$2,e.name,e.inputs?e.inputs.map(ParamType.from):[])}static isFragment(e){return e&&e[internal$1]===StructFragmentInternal}}const PanicReasons$1=new Map;PanicReasons$1.set(0,"GENERIC_PANIC");PanicReasons$1.set(1,"ASSERT_FALSE");PanicReasons$1.set(17,"OVERFLOW");PanicReasons$1.set(18,"DIVIDE_BY_ZERO");PanicReasons$1.set(33,"ENUM_RANGE_ERROR");PanicReasons$1.set(34,"BAD_STORAGE_DATA");PanicReasons$1.set(49,"STACK_UNDERFLOW");PanicReasons$1.set(50,"ARRAY_RANGE_ERROR");PanicReasons$1.set(65,"OUT_OF_MEMORY");PanicReasons$1.set(81,"UNINITIALIZED_FUNCTION_CALL");const paramTypeBytes=new RegExp(/^bytes([0-9]*)$/);const paramTypeNumber=new RegExp(/^(u?int)([0-9]*)$/);let defaultCoder=null;let defaultMaxInflation=1024;function getBuiltinCallException(e,t,r,n){let i="missing revert data";let s=null;const a=null;let o=null;if(r){i="execution reverted";const e=getBytes(r);r=hexlify(r);if(e.length===0){i+=" (no data present; likely require(false) occurred";s="require(false)"}else if(e.length%32!==4){i+=" (could not decode reason; invalid data length)"}else if(hexlify(e.slice(0,4))==="0x08c379a0"){try{s=n.decode(["string"],e.slice(4))[0];o={signature:"Error(string)",name:"Error",args:[s]};i+=`: ${JSON.stringify(s)}`}catch(e){i+=" (could not decode reason; invalid string data)"}}else if(hexlify(e.slice(0,4))==="0x4e487b71"){try{const t=Number(n.decode(["uint256"],e.slice(4))[0]);o={signature:"Panic(uint256)",name:"Panic",args:[t]};s=`Panic due to ${PanicReasons$1.get(t)||"UNKNOWN"}(${t})`;i+=`: ${s}`}catch(e){i+=" (could not decode panic code)"}}else{i+=" (unknown custom error)"}}const f={to:t.to?getAddress(t.to):null,data:t.data||"0x"};if(t.from){f.from=getAddress(t.from)}return makeError(i,"CALL_EXCEPTION",{action:e,data:r,reason:s,transaction:f,invocation:a,revert:o})}class AbiCoder{#he(e){if(e.isArray()){return new ArrayCoder(this.#he(e.arrayChildren),e.arrayLength,e.name)}if(e.isTuple()){return new TupleCoder(e.components.map((e=>this.#he(e))),e.name)}switch(e.baseType){case"address":return new AddressCoder(e.name);case"bool":return new BooleanCoder(e.name);case"string":return new StringCoder(e.name);case"bytes":return new BytesCoder(e.name);case"":return new NullCoder(e.name)}let t=e.type.match(paramTypeNumber);if(t){let r=parseInt(t[2]||"256");assertArgument(r!==0&&r<=256&&r%8===0,"invalid "+t[1]+" bit length","param",e);return new NumberCoder(r/8,t[1]==="int",e.name)}t=e.type.match(paramTypeBytes);if(t){let r=parseInt(t[1]);assertArgument(r!==0&&r<=32,"invalid bytes length","param",e);return new FixedBytesCoder(r,e.name)}assertArgument(false,"invalid type","type",e.type)}getDefaultValue(e){const t=e.map((e=>this.#he(ParamType.from(e))));const r=new TupleCoder(t,"_");return r.defaultValue()}encode(e,t){assertArgumentCount(t.length,e.length,"types/values length mismatch");const r=e.map((e=>this.#he(ParamType.from(e))));const n=new TupleCoder(r,"_");const i=new Writer$2;n.encode(i,t);return i.data}decode(e,t,r){const n=e.map((e=>this.#he(ParamType.from(e))));const i=new TupleCoder(n,"_");return i.decode(new Reader$2(t,r,defaultMaxInflation))}static _setDefaultMaxInflation(e){assertArgument(typeof e==="number"&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e);defaultMaxInflation=e}static defaultAbiCoder(){if(defaultCoder==null){defaultCoder=new AbiCoder}return defaultCoder}static getBuiltinCallException(e,t,r){return getBuiltinCallException(e,t,r,AbiCoder.defaultAbiCoder())}}function encodeBytes32String(e){const t=toUtf8Bytes(e);if(t.length>31){throw new Error("bytes32 string must be less than 32 bytes")}return zeroPadBytes(t,32)}function decodeBytes32String(e){const t=getBytes(e,"bytes");if(t.length!==32){throw new Error("invalid bytes32 - not 32 bytes long")}if(t[31]!==0){throw new Error("invalid bytes32 string - no null terminator")}let r=31;while(t[r-1]===0){r--}return toUtf8String(t.slice(0,r))}class LogDescription{fragment;name;signature;topic;args;constructor(e,t,r){const n=e.name,i=e.format();defineProperties(this,{fragment:e,name:n,signature:i,topic:t,args:r})}}class TransactionDescription{fragment;name;args;signature;selector;value;constructor(e,t,r,n){const i=e.name,s=e.format();defineProperties(this,{fragment:e,name:i,args:r,signature:s,selector:t,value:n})}}class ErrorDescription{fragment;name;args;signature;selector;constructor(e,t,r){const n=e.name,i=e.format();defineProperties(this,{fragment:e,name:n,args:r,signature:i,selector:t})}}class Indexed{hash;_isIndexed;static isIndexed(e){return!!(e&&e._isIndexed)}constructor(e){defineProperties(this,{hash:e,_isIndexed:true})}}const PanicReasons={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"};const BuiltinErrors={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:e=>`reverted with reason string ${JSON.stringify(e)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:e=>{let t="unknown panic code";if(e>=0&&e<=255&&PanicReasons[e.toString()]){t=PanicReasons[e.toString()]}return`reverted with panic code 0x${e.toString(16)} (${t})`}}};class Interface{fragments;deploy;fallback;receive;#de;#pe;#ye;#me;constructor(e){let t=[];if(typeof e==="string"){t=JSON.parse(e)}else{t=e}this.#ye=new Map;this.#de=new Map;this.#pe=new Map;const r=[];for(const e of t){try{r.push(Fragment.from(e))}catch(e){console.log("EE",e)}}defineProperties(this,{fragments:Object.freeze(r)});let n=null;let i=false;this.#me=this.getAbiCoder();this.fragments.forEach(((e,t)=>{let r;switch(e.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}defineProperties(this,{deploy:e});return;case"fallback":if(e.inputs.length===0){i=true}else{assertArgument(!n||e.payable!==n.payable,"conflicting fallback fragments",`fragments[${t}]`,e);n=e;i=n.payable}return;case"function":r=this.#ye;break;case"event":r=this.#pe;break;case"error":r=this.#de;break;default:return}const s=e.format();if(r.has(s)){return}r.set(s,e)}));if(!this.deploy){defineProperties(this,{deploy:ConstructorFragment.from("constructor()")})}defineProperties(this,{fallback:n,receive:i})}format(e){const t=e?"minimal":"full";const r=this.fragments.map((e=>e.format(t)));return r}formatJson(){const e=this.fragments.map((e=>e.format("json")));return JSON.stringify(e.map((e=>JSON.parse(e))))}getAbiCoder(){return AbiCoder.defaultAbiCoder()}#ge(e,t,r){if(isHexString(e)){const t=e.toLowerCase();for(const e of this.#ye.values()){if(t===e.selector){return e}}return null}if(e.indexOf("(")===-1){const n=[];for(const[t,r]of this.#ye){if(t.split("(")[0]===e){n.push(r)}}if(t){const e=t.length>0?t[t.length-1]:null;let r=t.length;let i=true;if(Typed.isTyped(e)&&e.type==="overrides"){i=false;r--}for(let e=n.length-1;e>=0;e--){const t=n[e].inputs.length;if(t!==r&&(!i||t!==r-1)){n.splice(e,1)}}for(let e=n.length-1;e>=0;e--){const r=n[e].inputs;for(let i=0;i<t.length;i++){if(!Typed.isTyped(t[i])){continue}if(i>=r.length){if(t[i].type==="overrides"){continue}n.splice(e,1);break}if(t[i].type!==r[i].baseType){n.splice(e,1);break}}}}if(n.length===1&&t&&t.length!==n[0].inputs.length){const e=t[t.length-1];if(e==null||Array.isArray(e)||typeof e!=="object"){n.splice(0,1)}}if(n.length===0){return null}if(n.length>1&&r){const t=n.map((e=>JSON.stringify(e.format()))).join(", ");assertArgument(false,`ambiguous function description (i.e. matches ${t})`,"key",e)}return n[0]}const n=this.#ye.get(FunctionFragment.from(e).format());if(n){return n}return null}getFunctionName(e){const t=this.#ge(e,null,false);assertArgument(t,"no matching function","key",e);return t.name}hasFunction(e){return!!this.#ge(e,null,false)}getFunction(e,t){return this.#ge(e,t||null,true)}forEachFunction(e){const t=Array.from(this.#ye.keys());t.sort(((e,t)=>e.localeCompare(t)));for(let r=0;r<t.length;r++){const n=t[r];e(this.#ye.get(n),r)}}#be(e,t,r){if(isHexString(e)){const t=e.toLowerCase();for(const e of this.#pe.values()){if(t===e.topicHash){return e}}return null}if(e.indexOf("(")===-1){const n=[];for(const[t,r]of this.#pe){if(t.split("(")[0]===e){n.push(r)}}if(t){for(let e=n.length-1;e>=0;e--){if(n[e].inputs.length<t.length){n.splice(e,1)}}for(let e=n.length-1;e>=0;e--){const r=n[e].inputs;for(let i=0;i<t.length;i++){if(!Typed.isTyped(t[i])){continue}if(t[i].type!==r[i].baseType){n.splice(e,1);break}}}}if(n.length===0){return null}if(n.length>1&&r){const t=n.map((e=>JSON.stringify(e.format()))).join(", ");assertArgument(false,`ambiguous event description (i.e. matches ${t})`,"key",e)}return n[0]}const n=this.#pe.get(EventFragment.from(e).format());if(n){return n}return null}getEventName(e){const t=this.#be(e,null,false);assertArgument(t,"no matching event","key",e);return t.name}hasEvent(e){return!!this.#be(e,null,false)}getEvent(e,t){return this.#be(e,t||null,true)}forEachEvent(e){const t=Array.from(this.#pe.keys());t.sort(((e,t)=>e.localeCompare(t)));for(let r=0;r<t.length;r++){const n=t[r];e(this.#pe.get(n),r)}}getError(e,t){if(isHexString(e)){const t=e.toLowerCase();if(BuiltinErrors[t]){return ErrorFragment.from(BuiltinErrors[t].signature)}for(const e of this.#de.values()){if(t===e.selector){return e}}return null}if(e.indexOf("(")===-1){const t=[];for(const[r,n]of this.#de){if(r.split("(")[0]===e){t.push(n)}}if(t.length===0){if(e==="Error"){return ErrorFragment.from("error Error(string)")}if(e==="Panic"){return ErrorFragment.from("error Panic(uint256)")}return null}else if(t.length>1){const r=t.map((e=>JSON.stringify(e.format()))).join(", ");assertArgument(false,`ambiguous error description (i.e. ${r})`,"name",e)}return t[0]}e=ErrorFragment.from(e).format();if(e==="Error(string)"){return ErrorFragment.from("error Error(string)")}if(e==="Panic(uint256)"){return ErrorFragment.from("error Panic(uint256)")}const r=this.#de.get(e);if(r){return r}return null}forEachError(e){const t=Array.from(this.#de.keys());t.sort(((e,t)=>e.localeCompare(t)));for(let r=0;r<t.length;r++){const n=t[r];e(this.#de.get(n),r)}}_decodeParams(e,t){return this.#me.decode(e,t)}_encodeParams(e,t){return this.#me.encode(e,t)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,t){if(typeof e==="string"){const t=this.getError(e);assertArgument(t,"unknown error","fragment",e);e=t}assertArgument(dataSlice(t,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",t);return this._decodeParams(e.inputs,dataSlice(t,4))}encodeErrorResult(e,t){if(typeof e==="string"){const t=this.getError(e);assertArgument(t,"unknown error","fragment",e);e=t}return concat$a([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionData(e,t){if(typeof e==="string"){const t=this.getFunction(e);assertArgument(t,"unknown function","fragment",e);e=t}assertArgument(dataSlice(t,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",t);return this._decodeParams(e.inputs,dataSlice(t,4))}encodeFunctionData(e,t){if(typeof e==="string"){const t=this.getFunction(e);assertArgument(t,"unknown function","fragment",e);e=t}return concat$a([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionResult(e,t){if(typeof e==="string"){const t=this.getFunction(e);assertArgument(t,"unknown function","fragment",e);e=t}let r="invalid length for result data";const n=getBytesCopy(t);if(n.length%32===0){try{return this.#me.decode(e.outputs,n)}catch(e){r="could not decode result data"}}assert$m(false,r,"BAD_DATA",{value:hexlify(n),info:{method:e.name,signature:e.format()}})}makeError(e,t){const r=getBytes(e,"data");const n=AbiCoder.getBuiltinCallException("call",t,r);const i="execution reverted (unknown custom error)";if(n.message.startsWith(i)){const e=hexlify(r.slice(0,4));const t=this.getError(e);if(t){try{const e=this.#me.decode(t.inputs,r.slice(4));n.revert={name:t.name,signature:t.format(),args:e};n.reason=n.revert.signature;n.message=`execution reverted: ${n.reason}`}catch(e){n.message=`execution reverted (coult not decode custom error)`}}}const s=this.parseTransaction(t);if(s){n.invocation={method:s.name,signature:s.signature,args:s.args}}return n}encodeFunctionResult(e,t){if(typeof e==="string"){const t=this.getFunction(e);assertArgument(t,"unknown function","fragment",e);e=t}return hexlify(this.#me.encode(e.outputs,t||[]))}encodeFilterTopics(e,t){if(typeof e==="string"){const t=this.getEvent(e);assertArgument(t,"unknown event","eventFragment",e);e=t}assert$m(t.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:t.length,expectedCount:e.inputs.length});const r=[];if(!e.anonymous){r.push(e.topicHash)}const n=(e,t)=>{if(e.type==="string"){return id(t)}else if(e.type==="bytes"){return keccak256(hexlify(t))}if(e.type==="bool"&&typeof t==="boolean"){t=t?"0x01":"0x00"}else if(e.type.match(/^u?int/)){t=toBeHex(t)}else if(e.type.match(/^bytes/)){t=zeroPadBytes(t,32)}else if(e.type==="address"){this.#me.encode(["address"],[t])}return zeroPadValue(hexlify(t),32)};t.forEach(((t,i)=>{const s=e.inputs[i];if(!s.indexed){assertArgument(t==null,"cannot filter non-indexed parameters; must be null","contract."+s.name,t);return}if(t==null){r.push(null)}else if(s.baseType==="array"||s.baseType==="tuple"){assertArgument(false,"filtering with tuples or arrays not supported","contract."+s.name,t)}else if(Array.isArray(t)){r.push(t.map((e=>n(s,e))))}else{r.push(n(s,t))}}));while(r.length&&r[r.length-1]===null){r.pop()}return r}encodeEventLog(e,t){if(typeof e==="string"){const t=this.getEvent(e);assertArgument(t,"unknown event","eventFragment",e);e=t}const r=[];const n=[];const i=[];if(!e.anonymous){r.push(e.topicHash)}assertArgument(t.length===e.inputs.length,"event arguments/values mismatch","values",t);e.inputs.forEach(((e,s)=>{const a=t[s];if(e.indexed){if(e.type==="string"){r.push(id(a))}else if(e.type==="bytes"){r.push(keccak256(a))}else if(e.baseType==="tuple"||e.baseType==="array"){throw new Error("not implemented")}else{r.push(this.#me.encode([e.type],[a]))}}else{n.push(e);i.push(a)}}));return{data:this.#me.encode(n,i),topics:r}}decodeEventLog(e,t,r){if(typeof e==="string"){const t=this.getEvent(e);assertArgument(t,"unknown event","eventFragment",e);e=t}if(r!=null&&!e.anonymous){const t=e.topicHash;assertArgument(isHexString(r[0],32)&&r[0].toLowerCase()===t,"fragment/topic mismatch","topics[0]",r[0]);r=r.slice(1)}const n=[];const i=[];const s=[];e.inputs.forEach(((e,t)=>{if(e.indexed){if(e.type==="string"||e.type==="bytes"||e.baseType==="tuple"||e.baseType==="array"){n.push(ParamType.from({type:"bytes32",name:e.name}));s.push(true)}else{n.push(e);s.push(false)}}else{i.push(e);s.push(false)}}));const a=r!=null?this.#me.decode(n,concat$a(r)):null;const o=this.#me.decode(i,t,true);const f=[];const c=[];let u=0,l=0;e.inputs.forEach(((e,t)=>{let r=null;if(e.indexed){if(a==null){r=new Indexed(null)}else if(s[t]){r=new Indexed(a[l++])}else{try{r=a[l++]}catch(e){r=e}}}else{try{r=o[u++]}catch(e){r=e}}f.push(r);c.push(e.name||null)}));return Result.fromItems(f,c)}parseTransaction(e){const t=getBytes(e.data,"tx.data");const r=getBigInt(e.value!=null?e.value:0,"tx.value");const n=this.getFunction(hexlify(t.slice(0,4)));if(!n){return null}const i=this.#me.decode(n.inputs,t.slice(4));return new TransactionDescription(n,n.selector,i,r)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){const t=this.getEvent(e.topics[0]);if(!t||t.anonymous){return null}return new LogDescription(t,t.topicHash,this.decodeEventLog(t,e.data,e.topics))}parseError(e){const t=hexlify(e);const r=this.getError(dataSlice(t,0,4));if(!r){return null}const n=this.#me.decode(r.inputs,dataSlice(t,4));return new ErrorDescription(r,r.selector,n)}static from(e){if(e instanceof Interface){return e}if(typeof e==="string"){return new Interface(JSON.parse(e))}if(typeof e.format==="function"){return new Interface(e.format("json"))}return new Interface(e)}}const BN_0$2=BigInt(0);function getValue$2(e){if(e==null){return null}return e}function toJson(e){if(e==null){return null}return e.toString()}class FeeData{gasPrice;maxFeePerGas;maxPriorityFeePerGas;constructor(e,t,r){defineProperties(this,{gasPrice:getValue$2(e),maxFeePerGas:getValue$2(t),maxPriorityFeePerGas:getValue$2(r)})}toJSON(){const{gasPrice:e,maxFeePerGas:t,maxPriorityFeePerGas:r}=this;return{_type:"FeeData",gasPrice:toJson(e),maxFeePerGas:toJson(t),maxPriorityFeePerGas:toJson(r)}}}function copyRequest(e){const t={};if(e.to){t.to=e.to}if(e.from){t.from=e.from}if(e.data){t.data=hexlify(e.data)}const r="chainId,gasLimit,gasPrice,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const n of r){if(!(n in e)||e[n]==null){continue}t[n]=getBigInt(e[n],`request.${n}`)}const n="type,nonce".split(/,/);for(const r of n){if(!(r in e)||e[r]==null){continue}t[r]=getNumber$1(e[r],`request.${r}`)}if(e.accessList){t.accessList=accessListify(e.accessList)}if("blockTag"in e){t.blockTag=e.blockTag}if("enableCcipRead"in e){t.enableCcipRead=!!e.enableCcipRead}if("customData"in e){t.customData=e.customData}return t}class Block{provider;number;hash;timestamp;parentHash;nonce;difficulty;gasLimit;gasUsed;miner;extraData;baseFeePerGas;#Ae;constructor(e,t){this.#Ae=e.transactions.map((e=>{if(typeof e!=="string"){return new TransactionResponse(e,t)}return e}));defineProperties(this,{provider:t,hash:getValue$2(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,miner:e.miner,extraData:e.extraData,baseFeePerGas:getValue$2(e.baseFeePerGas)})}get transactions(){return this.#Ae.map((e=>{if(typeof e==="string"){return e}return e.hash}))}get prefetchedTransactions(){const e=this.#Ae.slice();if(e.length===0){return[]}assert$m(typeof e[0]==="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"});return e}toJSON(){const{baseFeePerGas:e,difficulty:t,extraData:r,gasLimit:n,gasUsed:i,hash:s,miner:a,nonce:o,number:f,parentHash:c,timestamp:u,transactions:l}=this;return{_type:"Block",baseFeePerGas:toJson(e),difficulty:toJson(t),extraData:r,gasLimit:toJson(n),gasUsed:toJson(i),hash:s,miner:a,nonce:o,number:f,parentHash:c,timestamp:u,transactions:l}}[Symbol.iterator](){let e=0;const t=this.transactions;return{next:()=>{if(e<this.length){return{value:t[e++],done:false}}return{value:undefined,done:true}}}}get length(){return this.#Ae.length}get date(){if(this.timestamp==null){return null}return new Date(this.timestamp*1e3)}async getTransaction(e){let t=undefined;if(typeof e==="number"){t=this.#Ae[e]}else{const r=e.toLowerCase();for(const e of this.#Ae){if(typeof e==="string"){if(e!==r){continue}t=e;break}else{if(e.hash===r){continue}t=e;break}}}if(t==null){throw new Error("no such tx")}if(typeof t==="string"){return await this.provider.getTransaction(t)}else{return t}}getPrefetchedTransaction(e){const t=this.prefetchedTransactions;if(typeof e==="number"){return t[e]}e=e.toLowerCase();for(const r of t){if(r.hash===e){return r}}assertArgument(false,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined()){throw new Error("")}return createOrphanedBlockFilter(this)}}class Log{provider;transactionHash;blockHash;blockNumber;removed;address;data;topics;index;transactionIndex;constructor(e,t){this.provider=t;const r=Object.freeze(e.topics.slice());defineProperties(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:r,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){const{address:e,blockHash:t,blockNumber:r,data:n,index:i,removed:s,topics:a,transactionHash:o,transactionIndex:f}=this;return{_type:"log",address:e,blockHash:t,blockNumber:r,data:n,index:i,removed:s,topics:a,transactionHash:o,transactionIndex:f}}async getBlock(){const e=await this.provider.getBlock(this.blockHash);assert$m(!!e,"failed to find transaction","UNKNOWN_ERROR",{});return e}async getTransaction(){const e=await this.provider.getTransaction(this.transactionHash);assert$m(!!e,"failed to find transaction","UNKNOWN_ERROR",{});return e}async getTransactionReceipt(){const e=await this.provider.getTransactionReceipt(this.transactionHash);assert$m(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{});return e}removedEvent(){return createRemovedLogFilter(this)}}class TransactionReceipt{provider;to;from;contractAddress;hash;index;blockHash;blockNumber;logsBloom;gasUsed;cumulativeGasUsed;gasPrice;type;status;root;#we;constructor(e,t){this.#we=Object.freeze(e.logs.map((e=>new Log(e,t))));let r=BN_0$2;if(e.effectiveGasPrice!=null){r=e.effectiveGasPrice}else if(e.gasPrice!=null){r=e.gasPrice}defineProperties(this,{provider:t,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,gasPrice:r,type:e.type,status:e.status,root:e.root})}get logs(){return this.#we}toJSON(){const{to:e,from:t,contractAddress:r,hash:n,index:i,blockHash:s,blockNumber:a,logsBloom:o,logs:f,status:c,root:u}=this;return{_type:"TransactionReceipt",blockHash:s,blockNumber:a,contractAddress:r,cumulativeGasUsed:toJson(this.cumulativeGasUsed),from:t,gasPrice:toJson(this.gasPrice),gasUsed:toJson(this.gasUsed),hash:n,index:i,logs:f,logsBloom:o,root:u,status:c,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>{if(e<this.length){return{value:this.logs[e++],done:false}}return{value:undefined,done:true}}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const e=await this.provider.getBlock(this.blockHash);if(e==null){throw new Error("TODO")}return e}async getTransaction(){const e=await this.provider.getTransaction(this.hash);if(e==null){throw new Error("TODO")}return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return createRemovedTransactionFilter(this)}reorderedEvent(e){assert$m(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"});return createReorderedTransactionFilter(this,e)}}class TransactionResponse{provider;blockNumber;blockHash;index;hash;type;to;from;nonce;gasLimit;gasPrice;maxPriorityFeePerGas;maxFeePerGas;data;value;chainId;signature;accessList;#Ee;constructor(e,t){this.provider=t;this.blockNumber=e.blockNumber!=null?e.blockNumber:null;this.blockHash=e.blockHash!=null?e.blockHash:null;this.hash=e.hash;this.index=e.index;this.type=e.type;this.from=e.from;this.to=e.to||null;this.gasLimit=e.gasLimit;this.nonce=e.nonce;this.data=e.data;this.value=e.value;this.gasPrice=e.gasPrice;this.maxPriorityFeePerGas=e.maxPriorityFeePerGas!=null?e.maxPriorityFeePerGas:null;this.maxFeePerGas=e.maxFeePerGas!=null?e.maxFeePerGas:null;this.chainId=e.chainId;this.signature=e.signature;this.accessList=e.accessList!=null?e.accessList:null;this.#Ee=-1}toJSON(){const{blockNumber:e,blockHash:t,index:r,hash:n,type:i,to:s,from:a,nonce:o,data:f,signature:c,accessList:u}=this;return{_type:"TransactionReceipt",accessList:u,blockNumber:e,blockHash:t,chainId:toJson(this.chainId),data:f,from:a,gasLimit:toJson(this.gasLimit),gasPrice:toJson(this.gasPrice),hash:n,maxFeePerGas:toJson(this.maxFeePerGas),maxPriorityFeePerGas:toJson(this.maxPriorityFeePerGas),nonce:o,signature:c,to:s,index:r,type:i,value:toJson(this.value)}}async getBlock(){let e=this.blockNumber;if(e==null){const t=await this.getTransaction();if(t){e=t.blockNumber}}if(e==null){return null}const t=this.provider.getBlock(e);if(t==null){throw new Error("TODO")}return t}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:e,blockNumber:t}=await resolveProperties({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});if(e==null||e.blockNumber==null){return 0}return t-e.blockNumber+1}const e=await this.provider.getBlockNumber();return e-this.blockNumber+1}async wait(e,t){const r=e==null?1:e;const n=t==null?0:t;let i=this.#Ee;let s=-1;let a=i===-1?true:false;const o=async()=>{if(a){return null}const{blockNumber:e,nonce:t}=await resolveProperties({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(t<this.nonce){i=e;return}if(a){return null}const n=await this.getTransaction();if(n&&n.blockNumber!=null){return}if(s===-1){s=i-3;if(s<this.#Ee){s=this.#Ee}}while(s<=e){if(a){return null}const t=await this.provider.getBlock(s,true);if(t==null){return}for(const e of t){if(e===this.hash){return}}for(let n=0;n<t.length;n++){const s=await t.getTransaction(n);if(s.from===this.from&&s.nonce===this.nonce){if(a){return null}const t=await this.provider.getTransactionReceipt(s.hash);if(t==null){return}if(e-t.blockNumber+1<r){return}let n="replaced";if(s.data===this.data&&s.to===this.to&&s.value===this.value){n="repriced"}else if(s.data==="0x"&&s.from===s.to&&s.value===BN_0$2){n="cancelled"}assert$m(false,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:n==="replaced"||n==="cancelled",reason:n,replacement:s.replaceableTransaction(i),hash:s.hash,receipt:t})}}s++}return};const f=e=>{if(e==null||e.status!==0){return e}assert$m(false,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:e.to,from:e.from,data:""},receipt:e})};const c=await this.provider.getTransactionReceipt(this.hash);if(r===0){return f(c)}if(c){if(await c.confirmations()>=r){return f(c)}}else{await o();if(r===0){return null}}const u=new Promise(((e,t)=>{const s=[];const c=()=>{s.forEach((e=>e()))};s.push((()=>{a=true}));if(n>0){const e=setTimeout((()=>{c();t(makeError("wait for transaction timeout","TIMEOUT"))}),n);s.push((()=>{clearTimeout(e)}))}const u=async n=>{if(await n.confirmations()>=r){c();try{e(f(n))}catch(e){t(e)}}};s.push((()=>{this.provider.off(this.hash,u)}));this.provider.on(this.hash,u);if(i>=0){const e=async()=>{try{await o()}catch(e){if(isError(e,"TRANSACTION_REPLACED")){c();t(e);return}}if(!a){this.provider.once("block",e)}};s.push((()=>{this.provider.off("block",e)}));this.provider.once("block",e)}}));return await u}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}removedEvent(){assert$m(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"});return createRemovedTransactionFilter(this)}reorderedEvent(e){assert$m(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"});assert$m(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"});return createReorderedTransactionFilter(this,e)}replaceableTransaction(e){assertArgument(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);const t=new TransactionResponse(this,this.provider);t.#Ee=e;return t}}function createOrphanedBlockFilter(e){return{orphan:"drop-block",hash:e.hash,number:e.number}}function createReorderedTransactionFilter(e,t){return{orphan:"reorder-transaction",tx:e,other:t}}function createRemovedTransactionFilter(e){return{orphan:"drop-transaction",tx:e}}function createRemovedLogFilter(e){return{orphan:"drop-log",log:{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,address:e.address,data:e.data,topics:Object.freeze(e.topics.slice()),index:e.index}}}class EventLog extends Log{interface;fragment;args;constructor(e,t,r){super(e,e.provider);const n=t.decodeEventLog(r,e.data,e.topics);defineProperties(this,{args:n,fragment:r,interface:t})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class UndecodedEventLog extends Log{error;constructor(e,t){super(e,e.provider);defineProperties(this,{error:t})}}class ContractTransactionReceipt extends TransactionReceipt{#ve;constructor(e,t,r){super(r,t);this.#ve=e}get logs(){return super.logs.map((e=>{const t=e.topics.length?this.#ve.getEvent(e.topics[0]):null;if(t){try{return new EventLog(e,this.#ve,t)}catch(t){return new UndecodedEventLog(e,t)}}return e}))}}class ContractTransactionResponse extends TransactionResponse{#ve;constructor(e,t,r){super(r,t);this.#ve=e}async wait(e){const t=await super.wait(e);if(t==null){return null}return new ContractTransactionReceipt(this.#ve,this.provider,t)}}class ContractUnknownEventPayload extends EventPayload{log;constructor(e,t,r,n){super(e,t,r);defineProperties(this,{log:n})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class ContractEventPayload extends ContractUnknownEventPayload{constructor(e,t,r,n,i){super(e,t,r,new EventLog(i,e.interface,n));const s=e.interface.decodeEventLog(n,this.log.data,this.log.topics);defineProperties(this,{args:s,fragment:n})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const BN_0$1=BigInt(0);function canCall(e){return e&&typeof e.call==="function"}function canEstimate(e){return e&&typeof e.estimateGas==="function"}function canResolve(e){return e&&typeof e.resolveName==="function"}function canSend(e){return e&&typeof e.sendTransaction==="function"}function getResolver(e){if(e!=null){if(canResolve(e)){return e}if(e.provider){return e.provider}}return undefined}class PreparedTopicFilter{#_e;fragment;constructor(e,t,r){defineProperties(this,{fragment:t});if(t.inputs.length<r.length){throw new Error("too many arguments")}const n=getRunner(e.runner,"resolveName");const i=canResolve(n)?n:null;this.#_e=async function(){const n=await Promise.all(t.inputs.map(((e,t)=>{const n=r[t];if(n==null){return null}return e.walkAsync(r[t],((e,t)=>{if(e==="address"){if(Array.isArray(t)){return Promise.all(t.map((e=>resolveAddress(e,i))))}return resolveAddress(t,i)}return t}))})));return e.interface.encodeFilterTopics(t,n)}()}getTopicFilter(){return this.#_e}}function getRunner(e,t){if(e==null){return null}if(typeof e[t]==="function"){return e}if(e.provider&&typeof e.provider[t]==="function"){return e.provider}return null}function getProvider(e){if(e==null){return null}return e.provider||null}async function copyOverrides(e,t){const r=Typed.dereference(e,"overrides");assertArgument(typeof r==="object","invalid overrides parameter","overrides",e);const n=copyRequest(r);assertArgument(n.to==null||(t||[]).indexOf("to")>=0,"cannot override to","overrides.to",n.to);assertArgument(n.data==null||(t||[]).indexOf("data")>=0,"cannot override data","overrides.data",n.data);if(n.from){n.from=n.from}return n}async function resolveArgs(e,t,r){const n=getRunner(e,"resolveName");const i=canResolve(n)?n:null;return await Promise.all(t.map(((e,t)=>e.walkAsync(r[t],((e,t)=>{t=Typed.dereference(t,e);if(e==="address"){return resolveAddress(t,i)}return t})))))}function buildWrappedFallback(e){const t=async function(t){const r=await copyOverrides(t,["data"]);r.to=await e.getAddress();if(r.from){r.from=await resolveAddress(r.from,getResolver(e.runner))}const n=e.interface;const i=getBigInt(r.value||BN_0$1,"overrides.value")===BN_0$1;const s=(r.data||"0x")==="0x";if(n.fallback&&!n.fallback.payable&&n.receive&&!s&&!i){assertArgument(false,"cannot send data to receive or send value to non-payable fallback","overrides",t)}assertArgument(n.fallback||s,"cannot send data to receive-only contract","overrides.data",r.data);const a=n.receive||n.fallback&&n.fallback.payable;assertArgument(a||i,"cannot send value to non-payable fallback","overrides.value",r.value);assertArgument(n.fallback||s,"cannot send data to receive-only contract","overrides.data",r.data);return r};const r=async function(r){const n=getRunner(e.runner,"call");assert$m(canCall(n),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const i=await t(r);try{return await n.call(i)}catch(t){if(isCallException(t)&&t.data){throw e.interface.makeError(t.data,i)}throw t}};const n=async function(r){const n=e.runner;assert$m(canSend(n),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const i=await n.sendTransaction(await t(r));const s=getProvider(e.runner);return new ContractTransactionResponse(e.interface,s,i)};const i=async function(r){const n=getRunner(e.runner,"estimateGas");assert$m(canEstimate(n),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"});return await n.estimateGas(await t(r))};const s=async e=>await n(e);defineProperties(s,{_contract:e,estimateGas:i,populateTransaction:t,send:n,staticCall:r});return s}function buildWrappedMethod(e,t){const r=function(...r){const n=e.interface.getFunction(t,r);assert$m(n,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t,args:r}});return n};const n=async function(...t){const n=r(...t);let i={};if(n.inputs.length+1===t.length){i=await copyOverrides(t.pop());if(i.from){i.from=await resolveAddress(i.from,getResolver(e.runner))}}if(n.inputs.length!==t.length){throw new Error("internal error: fragment inputs doesn't match arguments; should not happen")}const s=await resolveArgs(e.runner,n.inputs,t);return Object.assign({},i,await resolveProperties({to:e.getAddress(),data:e.interface.encodeFunctionData(n,s)}))};const i=async function(...e){const t=await o(...e);if(t.length===1){return t[0]}return t};const s=async function(...t){const r=e.runner;assert$m(canSend(r),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const i=await r.sendTransaction(await n(...t));const s=getProvider(e.runner);return new ContractTransactionResponse(e.interface,s,i)};const a=async function(...t){const r=getRunner(e.runner,"estimateGas");assert$m(canEstimate(r),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"});return await r.estimateGas(await n(...t))};const o=async function(...t){const i=getRunner(e.runner,"call");assert$m(canCall(i),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const s=await n(...t);let a="0x";try{a=await i.call(s)}catch(t){if(isCallException(t)&&t.data){throw e.interface.makeError(t.data,s)}throw t}const o=r(...t);return e.interface.decodeFunctionResult(o,a)};const f=async(...e)=>{const t=r(...e);if(t.constant){return await i(...e)}return await s(...e)};defineProperties(f,{name:e.interface.getFunctionName(t),_contract:e,_key:t,getFragment:r,estimateGas:a,populateTransaction:n,send:s,staticCall:i,staticCallResult:o});Object.defineProperty(f,"fragment",{configurable:false,enumerable:true,get:()=>{const r=e.interface.getFunction(t);assert$m(r,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t}});return r}});return f}function buildWrappedEvent(e,t){const r=function(...r){const n=e.interface.getEvent(t,r);assert$m(n,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t,args:r}});return n};const n=function(...t){return new PreparedTopicFilter(e,r(...t),t)};defineProperties(n,{name:e.interface.getEventName(t),_contract:e,_key:t,getFragment:r});Object.defineProperty(n,"fragment",{configurable:false,enumerable:true,get:()=>{const r=e.interface.getEvent(t);assert$m(r,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t}});return r}});return n}const internal=Symbol.for("_ethersInternal_contract");const internalValues=new WeakMap;function setInternal(e,t){internalValues.set(e[internal],t)}function getInternal(e){return internalValues.get(e[internal])}function isDeferred(e){return e&&typeof e==="object"&&"getTopicFilter"in e&&typeof e.getTopicFilter==="function"&&e.fragment}async function getSubInfo(e,t){let r;let n=null;if(Array.isArray(t)){const n=function(t){if(isHexString(t,32)){return t}const r=e.interface.getEvent(t);assertArgument(r,"unknown fragment","name",t);return r.topicHash};r=t.map((e=>{if(e==null){return null}if(Array.isArray(e)){return e.map(n)}return n(e)}))}else if(t==="*"){r=[null]}else if(typeof t==="string"){if(isHexString(t,32)){r=[t]}else{n=e.interface.getEvent(t);assertArgument(n,"unknown fragment","event",t);r=[n.topicHash]}}else if(isDeferred(t)){r=await t.getTopicFilter()}else if("fragment"in t){n=t.fragment;r=[n.topicHash]}else{assertArgument(false,"unknown event name","event",t)}r=r.map((e=>{if(e==null){return null}if(Array.isArray(e)){const t=Array.from(new Set(e.map((e=>e.toLowerCase()))).values());if(t.length===1){return t[0]}t.sort();return t}return e.toLowerCase()}));const i=r.map((e=>{if(e==null){return"null"}if(Array.isArray(e)){return e.join("|")}return e})).join("&");return{fragment:n,tag:i,topics:r}}async function hasSub(e,t){const{subs:r}=getInternal(e);return r.get((await getSubInfo(e,t)).tag)||null}async function getSub(e,t,r){const n=getProvider(e.runner);assert$m(n,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:t});const{fragment:i,tag:s,topics:a}=await getSubInfo(e,r);const{addr:o,subs:f}=getInternal(e);let c=f.get(s);if(!c){const t=o?o:e;const u={address:t,topics:a};const l=t=>{let n=i;if(n==null){try{n=e.interface.getEvent(t.topics[0])}catch(e){}}if(n){const s=n;const a=i?e.interface.decodeEventLog(i,t.data,t.topics):[];emit(e,r,a,(n=>new ContractEventPayload(e,n,r,s,t)))}else{emit(e,r,[],(n=>new ContractUnknownEventPayload(e,n,r,t)))}};let h=[];const d=()=>{if(h.length){return}h.push(n.on(u,l))};const p=async()=>{if(h.length==0){return}let e=h;h=[];await Promise.all(e);n.off(u,l)};c={tag:s,listeners:[],start:d,stop:p};f.set(s,c)}return c}let lastEmit=Promise.resolve();async function _emit(e,t,r,n){await lastEmit;const i=await hasSub(e,t);if(!i){return false}const s=i.listeners.length;i.listeners=i.listeners.filter((({listener:t,once:i})=>{const s=Array.from(r);if(n){s.push(n(i?null:t))}try{t.call(e,...s)}catch(e){}return!i}));if(i.listeners.length===0){i.stop();getInternal(e).subs.delete(i.tag)}return s>0}async function emit(e,t,r,n){try{await lastEmit}catch(e){}const i=_emit(e,t,r,n);lastEmit=i;return await i}const passProperties=["then"];class BaseContract{target;interface;runner;filters;[internal];fallback;constructor(e,t,r,n){assertArgument(typeof e==="string"||isAddressable(e),"invalid value for Contract target","target",e);if(r==null){r=null}const i=Interface.from(t);defineProperties(this,{target:e,runner:r,interface:i});Object.defineProperty(this,internal,{value:{}});let s;let a=null;let o=null;if(n){const e=getProvider(r);o=new ContractTransactionResponse(this.interface,e,n)}let f=new Map;if(typeof e==="string"){if(isHexString(e)){a=e;s=Promise.resolve(e)}else{const t=getRunner(r,"resolveName");if(!canResolve(t)){throw makeError("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"})}s=t.resolveName(e).then((t=>{if(t==null){throw makeError("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e})}getInternal(this).addr=t;return t}))}}else{s=e.getAddress().then((e=>{if(e==null){throw new Error("TODO")}getInternal(this).addr=e;return e}))}setInternal(this,{addrPromise:s,addr:a,deployTx:o,subs:f});const c=new Proxy({},{get:(e,t,r)=>{if(typeof t==="symbol"||passProperties.indexOf(t)>=0){return Reflect.get(e,t,r)}try{return this.getEvent(t)}catch(e){if(!isError(e,"INVALID_ARGUMENT")||e.argument!=="key"){throw e}}return undefined},has:(e,t)=>{if(passProperties.indexOf(t)>=0){return Reflect.has(e,t)}return Reflect.has(e,t)||this.interface.hasEvent(String(t))}});defineProperties(this,{filters:c});defineProperties(this,{fallback:i.receive||i.fallback?buildWrappedFallback(this):null});return new Proxy(this,{get:(e,t,r)=>{if(typeof t==="symbol"||t in e||passProperties.indexOf(t)>=0){return Reflect.get(e,t,r)}try{return e.getFunction(t)}catch(e){if(!isError(e,"INVALID_ARGUMENT")||e.argument!=="key"){throw e}}return undefined},has:(e,t)=>{if(typeof t==="symbol"||t in e||passProperties.indexOf(t)>=0){return Reflect.has(e,t)}return e.interface.hasFunction(t)}})}connect(e){return new BaseContract(this.target,this.interface,e)}attach(e){return new BaseContract(e,this.interface,this.runner)}async getAddress(){return await getInternal(this).addrPromise}async getDeployedCode(){const e=getProvider(this.runner);assert$m(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const t=await e.getCode(await this.getAddress());if(t==="0x"){return null}return t}async waitForDeployment(){const e=this.deploymentTransaction();if(e){await e.wait();return this}const t=await this.getDeployedCode();if(t!=null){return this}const r=getProvider(this.runner);assert$m(r!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"});return new Promise(((e,t)=>{const n=async()=>{try{const t=await this.getDeployedCode();if(t!=null){return e(this)}r.once("block",n)}catch(e){t(e)}};n()}))}deploymentTransaction(){return getInternal(this).deployTx}getFunction(e){if(typeof e!=="string"){e=e.format()}const t=buildWrappedMethod(this,e);return t}getEvent(e){if(typeof e!=="string"){e=e.format()}return buildWrappedEvent(this,e)}async queryTransaction(e){throw new Error("@TODO")}async queryFilter(e,t,r){if(t==null){t=0}if(r==null){r="latest"}const{addr:n,addrPromise:i}=getInternal(this);const s=n?n:await i;const{fragment:a,topics:o}=await getSubInfo(this,e);const f={address:s,topics:o,fromBlock:t,toBlock:r};const c=getProvider(this.runner);assert$m(c,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"});return(await c.getLogs(f)).map((e=>{let t=a;if(t==null){try{t=this.interface.getEvent(e.topics[0])}catch(e){}}if(t){try{return new EventLog(e,this.interface,t)}catch(t){return new UndecodedEventLog(e,t)}}return new Log(e,c)}))}async on(e,t){const r=await getSub(this,"on",e);r.listeners.push({listener:t,once:false});r.start();return this}async once(e,t){const r=await getSub(this,"once",e);r.listeners.push({listener:t,once:true});r.start();return this}async emit(e,...t){return await emit(this,e,t,null)}async listenerCount(e){if(e){const t=await hasSub(this,e);if(!t){return 0}return t.listeners.length}const{subs:t}=getInternal(this);let r=0;for(const{listeners:e}of t.values()){r+=e.length}return r}async listeners(e){if(e){const t=await hasSub(this,e);if(!t){return[]}return t.listeners.map((({listener:e})=>e))}const{subs:t}=getInternal(this);let r=[];for(const{listeners:e}of t.values()){r=r.concat(e.map((({listener:e})=>e)))}return r}async off(e,t){const r=await hasSub(this,e);if(!r){return this}if(t){const e=r.listeners.map((({listener:e})=>e)).indexOf(t);if(e>=0){r.listeners.splice(e,1)}}if(t==null||r.listeners.length===0){r.stop();getInternal(this).subs.delete(r.tag)}return this}async removeAllListeners(e){if(e){const t=await hasSub(this,e);if(!t){return this}t.stop();getInternal(this).subs.delete(t.tag)}else{const{subs:e}=getInternal(this);for(const{tag:t,stop:r}of e.values()){r();e.delete(t)}}return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return await this.off(e,t)}static buildClass(e){class t extends BaseContract{constructor(t,r=null){super(t,e,r)}}return t}static from(e,t,r){if(r==null){r=null}const n=new this(e,t,r);return n}}function _ContractBase(){return BaseContract}class Contract$1 extends(_ContractBase()){}class ContractFactory{interface;bytecode;runner;constructor(e,t,r){const n=Interface.from(e);if(t instanceof Uint8Array){t=hexlify(getBytes(t))}else{if(typeof t==="object"){t=t.object}if(!t.startsWith("0x")){t="0x"+t}t=hexlify(getBytes(t))}defineProperties(this,{bytecode:t,interface:n,runner:r||null})}attach(e){return new BaseContract(e,this.interface,this.runner)}async getDeployTransaction(...e){let t={};const r=this.interface.deploy;if(r.inputs.length+1===e.length){t=await copyOverrides(e.pop())}if(r.inputs.length!==e.length){throw new Error("incorrect number of arguments to constructor")}const n=await resolveArgs(this.runner,r.inputs,e);const i=concat$a([this.bytecode,this.interface.encodeDeploy(n)]);return Object.assign({},t,{data:i})}async deploy(...e){const t=await this.getDeployTransaction(...e);assert$m(this.runner&&typeof this.runner.sendTransaction==="function","factory runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const r=await this.runner.sendTransaction(t);const n=getCreateAddress(r);return new BaseContract(n,this.interface,this.runner,r)}connect(e){return new ContractFactory(this.interface,this.bytecode,e)}static fromSolidity(e,t){assertArgument(e!=null,"bad compiler output","output",e);if(typeof e==="string"){e=JSON.parse(e)}const r=e.abi;let n="";if(e.bytecode){n=e.bytecode}else if(e.evm&&e.evm.bytecode){n=e.evm.bytecode}return new this(r,n,t)}}function getIpfsLink(e){if(e.match(/^ipfs:\/\/ipfs\//i)){e=e.substring(12)}else if(e.match(/^ipfs:\/\//i)){e=e.substring(7)}else{assertArgument(false,"unsupported IPFS format","link",e)}return`https://gateway.ipfs.io/ipfs/${e}`}class MulticoinProviderPlugin{name;constructor(e){defineProperties(this,{name:e})}connect(e){return this}supportsCoinType(e){return false}async encodeAddress(e,t){throw new Error("unsupported coin")}async decodeAddress(e,t){throw new Error("unsupported coin")}}const matcherIpfs=new RegExp("^(ipfs)://(.*)$","i");const matchers=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),matcherIpfs,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];class EnsResolver{provider;address;name;#Se;#$e;constructor(e,t,r){defineProperties(this,{provider:e,address:t,name:r});this.#Se=null;this.#$e=new Contract$1(t,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e)}async supportsWildcard(){if(this.#Se==null){this.#Se=(async()=>{try{return await this.#$e.supportsInterface("0x9061b923")}catch(e){if(isError(e,"CALL_EXCEPTION")){return false}this.#Se=null;throw e}})()}return await this.#Se}async#Te(e,t){t=(t||[]).slice();const r=this.#$e.interface;t.unshift(namehash(this.name));let n=null;if(await this.supportsWildcard()){n=r.getFunction(e);assert$m(n,"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}});t=[dnsEncode(this.name),r.encodeFunctionData(n,t)];e="resolve(bytes,bytes)"}t.push({enableCcipRead:true});try{const i=await this.#$e[e](...t);if(n){return r.decodeFunctionResult(n,i)[0]}return i}catch(e){if(!isError(e,"CALL_EXCEPTION")){throw e}}return null}async getAddress(e){if(e==null){e=60}if(e===60){try{const e=await this.#Te("addr(bytes32)");if(e==null||e===ZeroAddress){return null}return e}catch(e){if(isError(e,"CALL_EXCEPTION")){return null}throw e}}if(e>=0&&e<2147483648){let t=e+2147483648;const r=await this.#Te("addr(bytes32,uint)",[t]);if(isHexString(r,20)){return getAddress(r)}}let t=null;for(const r of this.provider.plugins){if(!(r instanceof MulticoinProviderPlugin)){continue}if(r.supportsCoinType(e)){t=r;break}}if(t==null){return null}const r=await this.#Te("addr(bytes32,uint)",[e]);if(r==null||r==="0x"){return null}const n=await t.decodeAddress(e,r);if(n!=null){return n}assert$m(false,`invalid coin data`,"UNSUPPORTED_OPERATION",{operation:`getAddress(${e})`,info:{coinType:e,data:r}})}async getText(e){const t=await this.#Te("text(bytes32,string)",[e]);if(t==null||t==="0x"){return null}return t}async getContentHash(){const e=await this.#Te("contenthash(bytes32)");if(e==null||e==="0x"){return null}const t=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(t){const e=t[1]==="e3010170"?"ipfs":"ipns";const r=parseInt(t[4],16);if(t[5].length===r*2){return`${e}://${encodeBase58("0x"+t[2])}`}}const r=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(r&&r[1].length===64){return`bzz://${r[1]}`}assert$m(false,`invalid or unsupported content hash data`,"UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})}async getAvatar(){const e=await this._getAvatar();return e.url}async _getAvatar(){const e=[{type:"name",value:this.name}];try{const t=await this.getText("avatar");if(t==null){e.push({type:"!avatar",value:""});return{url:null,linkage:e}}e.push({type:"avatar",value:t});for(let r=0;r<matchers.length;r++){const n=t.match(matchers[r]);if(n==null){continue}const i=n[1].toLowerCase();switch(i){case"https":case"data":e.push({type:"url",value:t});return{linkage:e,url:t};case"ipfs":{const r=getIpfsLink(t);e.push({type:"ipfs",value:t});e.push({type:"url",value:r});return{linkage:e,url:r}}case"erc721":case"erc1155":{const r=i==="erc721"?"tokenURI(uint256)":"uri(uint256)";e.push({type:i,value:t});const s=await this.getAddress();if(s==null){e.push({type:"!owner",value:""});return{url:null,linkage:e}}const a=(n[2]||"").split("/");if(a.length!==2){e.push({type:`!${i}caip`,value:n[2]||""});return{url:null,linkage:e}}const o=a[1];const f=new Contract$1(a[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(i==="erc721"){const t=await f.ownerOf(o);if(s!==t){e.push({type:"!owner",value:t});return{url:null,linkage:e}}e.push({type:"owner",value:t})}else if(i==="erc1155"){const t=await f.balanceOf(s,o);if(!t){e.push({type:"!balance",value:"0"});return{url:null,linkage:e}}e.push({type:"balance",value:t.toString()})}let c=await f[r](o);if(c==null||c==="0x"){e.push({type:"!metadata-url",value:""});return{url:null,linkage:e}}e.push({type:"metadata-url-base",value:c});if(i==="erc1155"){c=c.replace("{id}",toBeHex(o,32).substring(2));e.push({type:"metadata-url-expanded",value:c})}if(c.match(/^ipfs:/i)){c=getIpfsLink(c)}e.push({type:"metadata-url",value:c});let u={};const l=await new FetchRequest(c).send();l.assertOk();try{u=l.bodyJson}catch(t){try{e.push({type:"!metadata",value:l.bodyText})}catch(t){const r=l.body;if(r){e.push({type:"!metadata",value:hexlify(r)})}return{url:null,linkage:e}}return{url:null,linkage:e}}if(!u){e.push({type:"!metadata",value:""});return{url:null,linkage:e}}e.push({type:"metadata",value:JSON.stringify(u)});let h=u.image;if(typeof h!=="string"){e.push({type:"!imageUrl",value:""});return{url:null,linkage:e}}if(h.match(/^(https:\/\/|data:)/i));else{const t=h.match(matcherIpfs);if(t==null){e.push({type:"!imageUrl-ipfs",value:h});return{url:null,linkage:e}}e.push({type:"imageUrl-ipfs",value:h});h=getIpfsLink(h)}e.push({type:"url",value:h});return{linkage:e,url:h}}}}}catch(e){}return{linkage:e,url:null}}static async getEnsAddress(e){const t=await e.getNetwork();const r=t.getPlugin("org.ethers.plugins.network.Ens");assert$m(r,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:t}});return r.address}static async#Ie(e,t){const r=await EnsResolver.getEnsAddress(e);try{const n=new Contract$1(r,["function resolver(bytes32) view returns (address)"],e);const i=await n.resolver(namehash(t),{enableCcipRead:true});if(i===ZeroAddress){return null}return i}catch(e){throw e}return null}static async fromName(e,t){let r=t;while(true){if(r===""||r==="."){return null}if(t!=="eth"&&r==="eth"){return null}const n=await EnsResolver.#Ie(e,r);if(n!=null){const i=new EnsResolver(e,n,t);if(r!==t&&!await i.supportsWildcard()){return null}return i}r=r.split(".").slice(1).join(".")}}}const BN_0=BigInt(0);function allowNull(e,t){return function(r){if(r==null){return t}return e(r)}}function arrayOf(e){return t=>{if(!Array.isArray(t)){throw new Error("not an array")}return t.map((t=>e(t)))}}function object(e,t){return r=>{const n={};for(const i in e){let s=i;if(t&&i in t&&!(s in r)){for(const e of t[i]){if(e in r){s=e;break}}}try{const t=e[i](r[s]);if(t!==undefined){n[i]=t}}catch(e){const t=e instanceof Error?e.message:"not-an-error";assert$m(false,`invalid value for value.${i} (${t})`,"BAD_DATA",{value:r})}}return n}}function formatBoolean(e){switch(e){case true:case"true":return true;case false:case"false":return false}assertArgument(false,`invalid boolean; ${JSON.stringify(e)}`,"value",e)}function formatData(e){assertArgument(isHexString(e,true),"invalid data","value",e);return e}function formatHash(e){assertArgument(isHexString(e,32),"invalid hash","value",e);return e}const _formatLog=object({address:getAddress,blockHash:formatHash,blockNumber:getNumber$1,data:formatData,index:getNumber$1,removed:allowNull(formatBoolean,false),topics:arrayOf(formatHash),transactionHash:formatHash,transactionIndex:getNumber$1},{index:["logIndex"]});function formatLog(e){return _formatLog(e)}const _formatBlock=object({hash:allowNull(formatHash),parentHash:formatHash,number:getNumber$1,timestamp:getNumber$1,nonce:allowNull(formatData),difficulty:getBigInt,gasLimit:getBigInt,gasUsed:getBigInt,miner:allowNull(getAddress),extraData:formatData,baseFeePerGas:allowNull(getBigInt)});function formatBlock(e){const t=_formatBlock(e);t.transactions=e.transactions.map((e=>{if(typeof e==="string"){return e}return formatTransactionResponse(e)}));return t}const _formatReceiptLog=object({transactionIndex:getNumber$1,blockNumber:getNumber$1,transactionHash:formatHash,address:getAddress,topics:arrayOf(formatHash),data:formatData,index:getNumber$1,blockHash:formatHash},{index:["logIndex"]});function formatReceiptLog(e){return _formatReceiptLog(e)}const _formatTransactionReceipt=object({to:allowNull(getAddress,null),from:allowNull(getAddress,null),contractAddress:allowNull(getAddress,null),index:getNumber$1,root:allowNull(hexlify),gasUsed:getBigInt,logsBloom:allowNull(formatData),blockHash:formatHash,hash:formatHash,logs:arrayOf(formatReceiptLog),blockNumber:getNumber$1,cumulativeGasUsed:getBigInt,effectiveGasPrice:allowNull(getBigInt),status:allowNull(getNumber$1),type:allowNull(getNumber$1,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function formatTransactionReceipt(e){return _formatTransactionReceipt(e)}function formatTransactionResponse(e){if(e.to&&getBigInt(e.to)===BN_0){e.to="0x0000000000000000000000000000000000000000"}const t=object({hash:formatHash,type:e=>{if(e==="0x"||e==null){return 0}return getNumber$1(e)},accessList:allowNull(accessListify,null),blockHash:allowNull(formatHash,null),blockNumber:allowNull(getNumber$1,null),transactionIndex:allowNull(getNumber$1,null),from:getAddress,gasPrice:allowNull(getBigInt),maxPriorityFeePerGas:allowNull(getBigInt),maxFeePerGas:allowNull(getBigInt),gasLimit:getBigInt,to:allowNull(getAddress,null),value:getBigInt,nonce:getNumber$1,data:formatData,creates:allowNull(getAddress,null),chainId:allowNull(getBigInt,null)},{data:["input"],gasLimit:["gas"]})(e);if(t.to==null&&t.creates==null){t.creates=getCreateAddress(t)}if((e.type===1||e.type===2)&&e.accessList==null){t.accessList=[]}if(e.signature){t.signature=Signature$6.from(e.signature)}else{t.signature=Signature$6.from(e)}if(t.chainId==null){const e=t.signature.legacyChainId;if(e!=null){t.chainId=e}}if(t.blockHash&&getBigInt(t.blockHash)===BN_0){t.blockHash=null}return t}const EnsAddress="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class NetworkPlugin{name;constructor(e){defineProperties(this,{name:e})}clone(){return new NetworkPlugin(this.name)}}class GasCostPlugin extends NetworkPlugin{effectiveBlock;txBase;txCreate;txDataZero;txDataNonzero;txAccessListStorageKey;txAccessListAddress;constructor(e,t){if(e==null){e=0}super(`org.ethers.network.plugins.GasCost#${e||0}`);const r={effectiveBlock:e};function n(e,n){let i=(t||{})[e];if(i==null){i=n}assertArgument(typeof i==="number",`invalud value for ${e}`,"costs",t);r[e]=i}n("txBase",21e3);n("txCreate",32e3);n("txDataZero",4);n("txDataNonzero",16);n("txAccessListStorageKey",1900);n("txAccessListAddress",2400);defineProperties(this,r)}clone(){return new GasCostPlugin(this.effectiveBlock,this)}}class EnsPlugin extends NetworkPlugin{address;targetNetwork;constructor(e,t){super("org.ethers.plugins.network.Ens");defineProperties(this,{address:e||EnsAddress,targetNetwork:t==null?1:t})}clone(){return new EnsPlugin(this.address,this.targetNetwork)}}class FeeDataNetworkPlugin extends NetworkPlugin{#Ce;get feeDataFunc(){return this.#Ce}constructor(e){super("org.ethers.plugins.network.FeeData");this.#Ce=e}async getFeeData(e){return await this.#Ce(e)}clone(){return new FeeDataNetworkPlugin(this.#Ce)}}class FetchUrlFeeDataNetworkPlugin extends NetworkPlugin{#f;#Pe;get url(){return this.#f}get processFunc(){return this.#Pe}constructor(e,t){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin");this.#f=e;this.#Pe=t}clone(){return this}}const Networks=new Map;class Network{#Re;#re;#Ne;constructor(e,t){this.#Re=e;this.#re=getBigInt(t);this.#Ne=new Map}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return this.#Re}set name(e){this.#Re=e}get chainId(){return this.#re}set chainId(e){this.#re=getBigInt(e,"chainId")}matches(e){if(e==null){return false}if(typeof e==="string"){try{return this.chainId===getBigInt(e)}catch(e){}return this.name===e}if(typeof e==="number"||typeof e==="bigint"){try{return this.chainId===getBigInt(e)}catch(e){}return false}if(typeof e==="object"){if(e.chainId!=null){try{return this.chainId===getBigInt(e.chainId)}catch(e){}return false}if(e.name!=null){return this.name===e.name}return false}return false}get plugins(){return Array.from(this.#Ne.values())}attachPlugin(e){if(this.#Ne.get(e.name)){throw new Error(`cannot replace existing plugin: ${e.name} `)}this.#Ne.set(e.name,e.clone());return this}getPlugin(e){return this.#Ne.get(e)||null}getPlugins(e){return this.plugins.filter((t=>t.name.split("#")[0]===e))}clone(){const e=new Network(this.name,this.chainId);this.plugins.forEach((t=>{e.attachPlugin(t.clone())}));return e}computeIntrinsicGas(e){const t=this.getPlugin("org.ethers.plugins.network.GasCost")||new GasCostPlugin;let r=t.txBase;if(e.to==null){r+=t.txCreate}if(e.data){for(let n=2;n<e.data.length;n+=2){if(e.data.substring(n,n+2)==="00"){r+=t.txDataZero}else{r+=t.txDataNonzero}}}if(e.accessList){const n=accessListify(e.accessList);for(const e in n){r+=t.txAccessListAddress+t.txAccessListStorageKey*n[e].storageKeys.length}}return r}static from(e){injectCommonNetworks();if(e==null){return Network.from("mainnet")}if(typeof e==="number"){e=BigInt(e)}if(typeof e==="string"||typeof e==="bigint"){const t=Networks.get(e);if(t){return t()}if(typeof e==="bigint"){return new Network("unknown",e)}assertArgument(false,"unknown network","network",e)}if(typeof e.clone==="function"){const t=e.clone();return t}if(typeof e==="object"){assertArgument(typeof e.name==="string"&&typeof e.chainId==="number","invalid network object name or chainId","network",e);const t=new Network(e.name,e.chainId);if(e.ensAddress||e.ensNetwork!=null){t.attachPlugin(new EnsPlugin(e.ensAddress,e.ensNetwork))}return t}assertArgument(false,"invalid network","network",e)}static register(e,t){if(typeof e==="number"){e=BigInt(e)}const r=Networks.get(e);if(r){assertArgument(false,`conflicting network for ${JSON.stringify(r.name)}`,"nameOrChainId",e)}Networks.set(e,t)}}function parseUnits(e,t){const r=String(e);if(!r.match(/^[0-9.]+$/)){throw new Error(`invalid gwei value: ${e}`)}const n=r.split(".");if(n.length===1){n.push("")}if(n.length!==2){throw new Error(`invalid gwei value: ${e}`)}while(n[1].length<t){n[1]+="0"}if(n[1].length>9){let e=BigInt(n[1].substring(0,9));if(!n[1].substring(9).match(/^0+$/)){e++}n[1]=e.toString()}return BigInt(n[0]+n[1])}function getGasStationPlugin(e){return new FetchUrlFeeDataNetworkPlugin(e,(async(e,t,r)=>{r.setHeader("User-Agent","ethers");let n;try{const[t,i]=await Promise.all([r.send(),e()]);n=t;const s=n.bodyJson.standard;const a={gasPrice:i.gasPrice,maxFeePerGas:parseUnits(s.maxFee,9),maxPriorityFeePerGas:parseUnits(s.maxPriorityFee,9)};return a}catch(e){assert$m(false,`error encountered with polygon gas station (${JSON.stringify(r.url)})`,"SERVER_ERROR",{request:r,response:n,error:e})}}))}let injected=false;function injectCommonNetworks(){if(injected){return}injected=true;function e(e,t,r){const n=function(){const n=new Network(e,t);if(r.ensNetwork!=null){n.attachPlugin(new EnsPlugin(null,r.ensNetwork))}n.attachPlugin(new GasCostPlugin);(r.plugins||[]).forEach((e=>{n.attachPlugin(e)}));return n};Network.register(e,n);Network.register(t,n);if(r.altNames){r.altNames.forEach((e=>{Network.register(e,n)}))}}e("mainnet",1,{ensNetwork:1,altNames:["homestead"]});e("ropsten",3,{ensNetwork:3});e("rinkeby",4,{ensNetwork:4});e("goerli",5,{ensNetwork:5});e("kovan",42,{ensNetwork:42});e("sepolia",11155111,{ensNetwork:11155111});e("classic",61,{});e("classicKotti",6,{});e("arbitrum",42161,{ensNetwork:1});e("arbitrum-goerli",421613,{});e("base",8453,{ensNetwork:1});e("base-goerli",84531,{});e("base-sepolia",84532,{});e("bnb",56,{ensNetwork:1});e("bnbt",97,{});e("linea",59144,{ensNetwork:1});e("linea-goerli",59140,{});e("matic",137,{ensNetwork:1,plugins:[getGasStationPlugin("https://gasstation.polygon.technology/v2")]});e("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[getGasStationPlugin("https://gasstation-testnet.polygon.technology/v2")]});e("optimism",10,{ensNetwork:1,plugins:[]});e("optimism-goerli",420,{});e("xdai",100,{ensNetwork:1})}function copy$2(e){return JSON.parse(JSON.stringify(e))}class PollingBlockSubscriber{#ke;#Oe;#xe;#Be;constructor(e){this.#ke=e;this.#Oe=null;this.#xe=4e3;this.#Be=-2}get pollingInterval(){return this.#xe}set pollingInterval(e){this.#xe=e}async#De(){try{const e=await this.#ke.getBlockNumber();if(this.#Be===-2){this.#Be=e;return}if(e!==this.#Be){for(let t=this.#Be+1;t<=e;t++){if(this.#Oe==null){return}await this.#ke.emit("block",t)}this.#Be=e}}catch(e){}if(this.#Oe==null){return}this.#Oe=this.#ke._setTimeout(this.#De.bind(this),this.#xe)}start(){if(this.#Oe){return}this.#Oe=this.#ke._setTimeout(this.#De.bind(this),this.#xe);this.#De()}stop(){if(!this.#Oe){return}this.#ke._clearTimeout(this.#Oe);this.#Oe=null}pause(e){this.stop();if(e){this.#Be=-2}}resume(){this.start()}}class OnBlockSubscriber{#ke;#De;#Me;constructor(e){this.#ke=e;this.#Me=false;this.#De=e=>{this._poll(e,this.#ke)}}async _poll(e,t){throw new Error("sub-classes must override this")}start(){if(this.#Me){return}this.#Me=true;this.#De(-2);this.#ke.on("block",this.#De)}stop(){if(!this.#Me){return}this.#Me=false;this.#ke.off("block",this.#De)}pause(e){this.stop()}resume(){this.start()}}class PollingBlockTagSubscriber extends OnBlockSubscriber{#Ue;#Le;constructor(e,t){super(e);this.#Ue=t;this.#Le=-2}pause(e){if(e){this.#Le=-2}super.pause(e)}async _poll(e,t){const r=await t.getBlock(this.#Ue);if(r==null){return}if(this.#Le===-2){this.#Le=r.number}else if(r.number>this.#Le){t.emit(this.#Ue,r.number);this.#Le=r.number}}}class PollingOrphanSubscriber extends OnBlockSubscriber{#_e;constructor(e,t){super(e);this.#_e=copy$2(t)}async _poll(e,t){throw new Error("@TODO")}}class PollingTransactionSubscriber extends OnBlockSubscriber{#Fe;constructor(e,t){super(e);this.#Fe=t}async _poll(e,t){const r=await t.getTransactionReceipt(this.#Fe);if(r){t.emit(this.#Fe,r)}}}class PollingEventSubscriber{#ke;#_e;#Oe;#Me;#Be;constructor(e,t){this.#ke=e;this.#_e=copy$2(t);this.#Oe=this.#De.bind(this);this.#Me=false;this.#Be=-2}async#De(e){if(this.#Be===-2){return}const t=copy$2(this.#_e);t.fromBlock=this.#Be+1;t.toBlock=e;const r=await this.#ke.getLogs(t);if(r.length===0){if(this.#Be<e-60){this.#Be=e-60}return}for(const e of r){this.#ke.emit(this.#_e,e);this.#Be=e.blockNumber}}start(){if(this.#Me){return}this.#Me=true;if(this.#Be===-2){this.#ke.getBlockNumber().then((e=>{this.#Be=e}))}this.#ke.on("block",this.#Oe)}stop(){if(!this.#Me){return}this.#Me=false;this.#ke.off("block",this.#Oe)}pause(e){this.stop();if(e){this.#Be=-2}}resume(){this.start()}}const BN_2$1=BigInt(2);const MAX_CCIP_REDIRECTS=10;function isPromise$1(e){return e&&typeof e.then==="function"}function getTag$5(e,t){return e+":"+JSON.stringify(t,((e,t)=>{if(t==null){return"null"}if(typeof t==="bigint"){return`bigint:${t.toString()}`}if(typeof t==="string"){return t.toLowerCase()}if(typeof t==="object"&&!Array.isArray(t)){const e=Object.keys(t);e.sort();return e.reduce(((e,r)=>{e[r]=t[r];return e}),{})}return t}))}class UnmanagedSubscriber{name;constructor(e){defineProperties(this,{name:e})}start(){}stop(){}pause(e){}resume(){}}function copy$1(e){return JSON.parse(JSON.stringify(e))}function concisify(e){e=Array.from(new Set(e).values());e.sort();return e}async function getSubscription(e,t){if(e==null){throw new Error("invalid event")}if(Array.isArray(e)){e={topics:e}}if(typeof e==="string"){switch(e){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":{return{type:e,tag:e}}}}if(isHexString(e,32)){const t=e.toLowerCase();return{type:"transaction",tag:getTag$5("tx",{hash:t}),hash:t}}if(e.orphan){const t=e;return{type:"orphan",tag:getTag$5("orphan",t),filter:copy$1(t)}}if(e.address||e.topics){const r=e;const n={topics:(r.topics||[]).map((e=>{if(e==null){return null}if(Array.isArray(e)){return concisify(e.map((e=>e.toLowerCase())))}return e.toLowerCase()}))};if(r.address){const e=[];const i=[];const s=r=>{if(isHexString(r)){e.push(r)}else{i.push((async()=>{e.push(await resolveAddress(r,t))})())}};if(Array.isArray(r.address)){r.address.forEach(s)}else{s(r.address)}if(i.length){await Promise.all(i)}n.address=concisify(e.map((e=>e.toLowerCase())))}return{filter:n,tag:getTag$5("event",n),type:"event"}}assertArgument(false,"unknown ProviderEvent","event",e)}function getTime$1(){return(new Date).getTime()}const defaultOptions$3={cacheTimeout:250,pollingInterval:4e3};class AbstractProvider{#He;#Ne;#Ve;#Ge;#je;#Ke;#Ye;#qe;#ze;#Xe;#Qe;#q;constructor(e,t){this.#q=Object.assign({},defaultOptions$3,t||{});if(e==="any"){this.#Ke=true;this.#je=null}else if(e){const t=Network.from(e);this.#Ke=false;this.#je=Promise.resolve(t);setTimeout((()=>{this.emit("network",t,null)}),0)}else{this.#Ke=false;this.#je=null}this.#qe=-1;this.#Ye=new Map;this.#He=new Map;this.#Ne=new Map;this.#Ve=null;this.#Ge=false;this.#ze=1;this.#Xe=new Map;this.#Qe=false}get pollingInterval(){return this.#q.pollingInterval}get provider(){return this}get plugins(){return Array.from(this.#Ne.values())}attachPlugin(e){if(this.#Ne.get(e.name)){throw new Error(`cannot replace existing plugin: ${e.name} `)}this.#Ne.set(e.name,e.connect(this));return this}getPlugin(e){return this.#Ne.get(e)||null}get disableCcipRead(){return this.#Qe}set disableCcipRead(e){this.#Qe=!!e}async#We(e){const t=this.#q.cacheTimeout;if(t<0){return await this._perform(e)}const r=getTag$5(e.method,e);let n=this.#Ye.get(r);if(!n){n=this._perform(e);this.#Ye.set(r,n);setTimeout((()=>{if(this.#Ye.get(r)===n){this.#Ye.delete(r)}}),t)}return await n}async ccipReadFetch(e,t,r){if(this.disableCcipRead||r.length===0||e.to==null){return null}const n=e.to.toLowerCase();const i=t.toLowerCase();const s=[];for(let t=0;t<r.length;t++){const a=r[t];const o=a.replace("{sender}",n).replace("{data}",i);const f=new FetchRequest(o);if(a.indexOf("{data}")===-1){f.body={data:i,sender:n}}this.emit("debug",{action:"sendCcipReadFetchRequest",request:f,index:t,urls:r});let c="unknown error";const u=await f.send();try{const e=u.bodyJson;if(e.data){this.emit("debug",{action:"receiveCcipReadFetchResult",request:f,result:e});return e.data}if(e.message){c=e.message}this.emit("debug",{action:"receiveCcipReadFetchError",request:f,result:e})}catch(e){}assert$m(u.statusCode<400||u.statusCode>=500,`response not found during CCIP fetch: ${c}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:a,errorMessage:c}});s.push(c)}assert$m(false,`error encountered during CCIP fetch: ${s.map((e=>JSON.stringify(e))).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:r,errorMessages:s}})}_wrapBlock(e,t){return new Block(formatBlock(e),this)}_wrapLog(e,t){return new Log(formatLog(e),this)}_wrapTransactionReceipt(e,t){return new TransactionReceipt(formatTransactionReceipt(e),this)}_wrapTransactionResponse(e,t){return new TransactionResponse(formatTransactionResponse(e),this)}_detectNetwork(){assert$m(false,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(e){assert$m(false,`unsupported method: ${e.method}`,"UNSUPPORTED_OPERATION",{operation:e.method,info:e})}async getBlockNumber(){const e=getNumber$1(await this.#We({method:"getBlockNumber"}),"%response");if(this.#qe>=0){this.#qe=e}return e}_getAddress(e){return resolveAddress(e,this)}_getBlockTag(e){if(e==null){return"latest"}switch(e){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return e}if(isHexString(e)){if(isHexString(e,32)){return e}return toQuantity(e)}if(typeof e==="bigint"){e=getNumber$1(e,"blockTag")}if(typeof e==="number"){if(e>=0){return toQuantity(e)}if(this.#qe>=0){return toQuantity(this.#qe+e)}return this.getBlockNumber().then((t=>toQuantity(t+e)))}assertArgument(false,"invalid blockTag","blockTag",e)}_getFilter(e){const t=(e.topics||[]).map((e=>{if(e==null){return null}if(Array.isArray(e)){return concisify(e.map((e=>e.toLowerCase())))}return e.toLowerCase()}));const r="blockHash"in e?e.blockHash:undefined;const n=(e,n,i)=>{let s=undefined;switch(e.length){case 0:break;case 1:s=e[0];break;default:e.sort();s=e}if(r){if(n!=null||i!=null){throw new Error("invalid filter")}}const a={};if(s){a.address=s}if(t.length){a.topics=t}if(n){a.fromBlock=n}if(i){a.toBlock=i}if(r){a.blockHash=r}return a};let i=[];if(e.address){if(Array.isArray(e.address)){for(const t of e.address){i.push(this._getAddress(t))}}else{i.push(this._getAddress(e.address))}}let s=undefined;if("fromBlock"in e){s=this._getBlockTag(e.fromBlock)}let a=undefined;if("toBlock"in e){a=this._getBlockTag(e.toBlock)}if(i.filter((e=>typeof e!=="string")).length||s!=null&&typeof s!=="string"||a!=null&&typeof a!=="string"){return Promise.all([Promise.all(i),s,a]).then((e=>n(e[0],e[1],e[2])))}return n(i,s,a)}_getTransactionRequest(e){const t=copyRequest(e);const r=[];["to","from"].forEach((e=>{if(t[e]==null){return}const n=resolveAddress(t[e],this);if(isPromise$1(n)){r.push(async function(){t[e]=await n}())}else{t[e]=n}}));if(t.blockTag!=null){const e=this._getBlockTag(t.blockTag);if(isPromise$1(e)){r.push(async function(){t.blockTag=await e}())}else{t.blockTag=e}}if(r.length){return async function(){await Promise.all(r);return t}()}return t}async getNetwork(){if(this.#je==null){const e=(async()=>{try{const e=await this._detectNetwork();this.emit("network",e,null);return e}catch(t){if(this.#je===e){this.#je=null}throw t}})();this.#je=e;return(await e).clone()}const e=this.#je;const[t,r]=await Promise.all([e,this._detectNetwork()]);if(t.chainId!==r.chainId){if(this.#Ke){this.emit("network",r,t);if(this.#je===e){this.#je=Promise.resolve(r)}}else{assert$m(false,`network changed: ${t.chainId} => ${r.chainId} `,"NETWORK_ERROR",{event:"changed"})}}return t.clone()}async getFeeData(){const e=await this.getNetwork();const t=async()=>{const{_block:t,gasPrice:r,priorityFee:n}=await resolveProperties({_block:this.#Je("latest",false),gasPrice:(async()=>{try{const e=await this.#We({method:"getGasPrice"});return getBigInt(e,"%response")}catch(e){}return null})(),priorityFee:(async()=>{try{const e=await this.#We({method:"getPriorityFee"});return getBigInt(e,"%response")}catch(e){}return null})()});let i=null;let s=null;const a=this._wrapBlock(t,e);if(a&&a.baseFeePerGas){s=n!=null?n:BigInt("1000000000");i=a.baseFeePerGas*BN_2$1+s}return new FeeData(r,i,s)};const r=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(r){const e=new FetchRequest(r.url);const n=await r.processFunc(t,this,e);return new FeeData(n.gasPrice,n.maxFeePerGas,n.maxPriorityFeePerGas)}return await t()}async estimateGas(e){let t=this._getTransactionRequest(e);if(isPromise$1(t)){t=await t}return getBigInt(await this.#We({method:"estimateGas",transaction:t}),"%response")}async#Ze(e,t,r){assert$m(r<MAX_CCIP_REDIRECTS,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:t,enableCcipRead:true})});const n=copyRequest(e);try{return hexlify(await this._perform({method:"call",transaction:n,blockTag:t}))}catch(e){if(!this.disableCcipRead&&isCallException(e)&&e.data&&r>=0&&t==="latest"&&n.to!=null&&dataSlice(e.data,0,4)==="0x556f1830"){const i=e.data;const s=await resolveAddress(n.to,this);let a;try{a=parseOffchainLookup(dataSlice(e.data,4))}catch(e){assert$m(false,e.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:n,info:{data:i}})}assert$m(a.sender.toLowerCase()===s.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:i,reason:"OffchainLookup",transaction:n,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:a.errorArgs}});const o=await this.ccipReadFetch(n,a.calldata,a.urls);assert$m(o!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:n,info:{data:e.data,errorArgs:a.errorArgs}});const f={to:s,data:concat$a([a.selector,encodeBytes([o,a.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:f});try{const e=await this.#Ze(f,t,r+1);this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},f),result:e});return e}catch(e){this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},f),error:e});throw e}}throw e}}async#et(e){const{value:t}=await resolveProperties({network:this.getNetwork(),value:e});return t}async call(e){const{tx:t,blockTag:r}=await resolveProperties({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return await this.#et(this.#Ze(t,r,e.enableCcipRead?0:-1))}async#tt(e,t,r){let n=this._getAddress(t);let i=this._getBlockTag(r);if(typeof n!=="string"||typeof i!=="string"){[n,i]=await Promise.all([n,i])}return await this.#et(this.#We(Object.assign(e,{address:n,blockTag:i})))}async getBalance(e,t){return getBigInt(await this.#tt({method:"getBalance"},e,t),"%response")}async getTransactionCount(e,t){return getNumber$1(await this.#tt({method:"getTransactionCount"},e,t),"%response")}async getCode(e,t){return hexlify(await this.#tt({method:"getCode"},e,t))}async getStorage(e,t,r){const n=getBigInt(t,"position");return hexlify(await this.#tt({method:"getStorage",position:n},e,r))}async broadcastTransaction(e){const{blockNumber:t,hash:r,network:n}=await resolveProperties({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()});const i=Transaction$2.from(e);if(i.hash!==r){throw new Error("@TODO: the returned hash did not match")}return this._wrapTransactionResponse(i,n).replaceableTransaction(t)}async#Je(e,t){if(isHexString(e,32)){return await this.#We({method:"getBlock",blockHash:e,includeTransactions:t})}let r=this._getBlockTag(e);if(typeof r!=="string"){r=await r}return await this.#We({method:"getBlock",blockTag:r,includeTransactions:t})}async getBlock(e,t){const{network:r,params:n}=await resolveProperties({network:this.getNetwork(),params:this.#Je(e,!!t)});if(n==null){return null}return this._wrapBlock(n,r)}async getTransaction(e){const{network:t,params:r}=await resolveProperties({network:this.getNetwork(),params:this.#We({method:"getTransaction",hash:e})});if(r==null){return null}return this._wrapTransactionResponse(r,t)}async getTransactionReceipt(e){const{network:t,params:r}=await resolveProperties({network:this.getNetwork(),params:this.#We({method:"getTransactionReceipt",hash:e})});if(r==null){return null}if(r.gasPrice==null&&r.effectiveGasPrice==null){const t=await this.#We({method:"getTransaction",hash:e});if(t==null){throw new Error("report this; could not find tx or effectiveGasPrice")}r.effectiveGasPrice=t.gasPrice}return this._wrapTransactionReceipt(r,t)}async getTransactionResult(e){const{result:t}=await resolveProperties({network:this.getNetwork(),result:this.#We({method:"getTransactionResult",hash:e})});if(t==null){return null}return hexlify(t)}async getLogs(e){let t=this._getFilter(e);if(isPromise$1(t)){t=await t}const{network:r,params:n}=await resolveProperties({network:this.getNetwork(),params:this.#We({method:"getLogs",filter:t})});return n.map((e=>this._wrapLog(e,r)))}_getProvider(e){assert$m(false,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(e){return await EnsResolver.fromName(this,e)}async getAvatar(e){const t=await this.getResolver(e);if(t){return await t.getAvatar()}return null}async resolveName(e){const t=await this.getResolver(e);if(t){return await t.getAddress()}return null}async lookupAddress(e){e=getAddress(e);const t=namehash(e.substring(2).toLowerCase()+".addr.reverse");try{const r=await EnsResolver.getEnsAddress(this);const n=new Contract$1(r,["function resolver(bytes32) view returns (address)"],this);const i=await n.resolver(t);if(i==null||i===ZeroAddress){return null}const s=new Contract$1(i,["function name(bytes32) view returns (string)"],this);const a=await s.name(t);const o=await this.resolveName(a);if(o!==e){return null}return a}catch(e){if(isError(e,"BAD_DATA")&&e.value==="0x"){return null}if(isError(e,"CALL_EXCEPTION")){return null}throw e}return null}async waitForTransaction(e,t,r){const n=t!=null?t:1;if(n===0){return this.getTransactionReceipt(e)}return new Promise((async(t,i)=>{let s=null;const a=async r=>{try{const i=await this.getTransactionReceipt(e);if(i!=null){if(r-i.blockNumber+1>=n){t(i);if(s){clearTimeout(s);s=null}return}}}catch(e){console.log("EEE",e)}this.once("block",a)};if(r!=null){s=setTimeout((()=>{if(s==null){return}s=null;this.off("block",a);i(makeError("timeout","TIMEOUT",{reason:"timeout"}))}),r)}a(await this.getBlockNumber())}))}async waitForBlock(e){assert$m(false,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(e){const t=this.#Xe.get(e);if(!t){return}if(t.timer){clearTimeout(t.timer)}this.#Xe.delete(e)}_setTimeout(e,t){if(t==null){t=0}const r=this.#ze++;const n=()=>{this.#Xe.delete(r);e()};if(this.paused){this.#Xe.set(r,{timer:null,func:n,time:t})}else{const e=setTimeout(n,t);this.#Xe.set(r,{timer:e,func:n,time:getTime$1()})}return r}_forEachSubscriber(e){for(const t of this.#He.values()){e(t.subscriber)}}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new UnmanagedSubscriber(e.type);case"block":{const e=new PollingBlockSubscriber(this);e.pollingInterval=this.pollingInterval;return e}case"safe":case"finalized":return new PollingBlockTagSubscriber(this,e.type);case"event":return new PollingEventSubscriber(this,e.filter);case"transaction":return new PollingTransactionSubscriber(this,e.hash);case"orphan":return new PollingOrphanSubscriber(this,e.filter)}throw new Error(`unsupported event: ${e.type}`)}_recoverSubscriber(e,t){for(const r of this.#He.values()){if(r.subscriber===e){if(r.started){r.subscriber.stop()}r.subscriber=t;if(r.started){t.start()}if(this.#Ve!=null){t.pause(this.#Ve)}break}}}async#rt(e,t){let r=await getSubscription(e,this);if(r.type==="event"&&t&&t.length>0&&t[0].removed===true){r=await getSubscription({orphan:"drop-log",log:t[0]},this)}return this.#He.get(r.tag)||null}async#nt(e){const t=await getSubscription(e,this);const r=t.tag;let n=this.#He.get(r);if(!n){const e=this._getSubscriber(t);const i=new WeakMap;const s=new Map;n={subscriber:e,tag:r,addressableMap:i,nameMap:s,started:false,listeners:[]};this.#He.set(r,n)}return n}async on(e,t){const r=await this.#nt(e);r.listeners.push({listener:t,once:false});if(!r.started){r.subscriber.start();r.started=true;if(this.#Ve!=null){r.subscriber.pause(this.#Ve)}}return this}async once(e,t){const r=await this.#nt(e);r.listeners.push({listener:t,once:true});if(!r.started){r.subscriber.start();r.started=true;if(this.#Ve!=null){r.subscriber.pause(this.#Ve)}}return this}async emit(e,...t){const r=await this.#rt(e,t);if(!r||r.listeners.length===0){return false}const n=r.listeners.length;r.listeners=r.listeners.filter((({listener:r,once:n})=>{const i=new EventPayload(this,n?null:r,e);try{r.call(this,...t,i)}catch(e){}return!n}));if(r.listeners.length===0){if(r.started){r.subscriber.stop()}this.#He.delete(r.tag)}return n>0}async listenerCount(e){if(e){const t=await this.#rt(e);if(!t){return 0}return t.listeners.length}let t=0;for(const{listeners:e}of this.#He.values()){t+=e.length}return t}async listeners(e){if(e){const t=await this.#rt(e);if(!t){return[]}return t.listeners.map((({listener:e})=>e))}let t=[];for(const{listeners:e}of this.#He.values()){t=t.concat(e.map((({listener:e})=>e)))}return t}async off(e,t){const r=await this.#rt(e);if(!r){return this}if(t){const e=r.listeners.map((({listener:e})=>e)).indexOf(t);if(e>=0){r.listeners.splice(e,1)}}if(!t||r.listeners.length===0){if(r.started){r.subscriber.stop()}this.#He.delete(r.tag)}return this}async removeAllListeners(e){if(e){const{tag:t,started:r,subscriber:n}=await this.#nt(e);if(r){n.stop()}this.#He.delete(t)}else{for(const[e,{started:t,subscriber:r}]of this.#He){if(t){r.stop()}this.#He.delete(e)}}return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return this.off(e,t)}get destroyed(){return this.#Ge}destroy(){this.removeAllListeners();for(const e of this.#Xe.keys()){this._clearTimeout(e)}this.#Ge=true}get paused(){return this.#Ve!=null}set paused(e){if(!!e===this.paused){return}if(this.paused){this.resume()}else{this.pause(false)}}pause(e){this.#qe=-1;if(this.#Ve!=null){if(this.#Ve==!!e){return}assert$m(false,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber((t=>t.pause(e)));this.#Ve=!!e;for(const e of this.#Xe.values()){if(e.timer){clearTimeout(e.timer)}e.time=getTime$1()-e.time}}resume(){if(this.#Ve==null){return}this._forEachSubscriber((e=>e.resume()));this.#Ve=null;for(const e of this.#Xe.values()){let t=e.time;if(t<0){t=0}e.time=getTime$1();setTimeout(e.func,t)}}}function _parseString(e,t){try{const r=_parseBytes(e,t);if(r){return toUtf8String(r)}}catch(e){}return null}function _parseBytes(e,t){if(e==="0x"){return null}try{const r=getNumber$1(dataSlice(e,t,t+32));const n=getNumber$1(dataSlice(e,r,r+32));return dataSlice(e,r+32,r+32+n)}catch(e){}return null}function numPad(e){const t=toBeArray(e);if(t.length>32){throw new Error("internal; should not happen")}const r=new Uint8Array(32);r.set(t,32-t.length);return r}function bytesPad(e){if(e.length%32===0){return e}const t=new Uint8Array(Math.ceil(e.length/32)*32);t.set(e);return t}const empty$1=new Uint8Array([]);function encodeBytes(e){const t=[];let r=0;for(let n=0;n<e.length;n++){t.push(empty$1);r+=32}for(let n=0;n<e.length;n++){const i=getBytes(e[n]);t[n]=numPad(r);t.push(numPad(i.length));t.push(bytesPad(i));r+=32+Math.ceil(i.length/32)*32}return concat$a(t)}const zeros="0x0000000000000000000000000000000000000000000000000000000000000000";function parseOffchainLookup(e){const t={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};assert$m(dataLength(e)>=5*32,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const r=dataSlice(e,0,32);assert$m(dataSlice(r,0,12)===dataSlice(zeros,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"});t.sender=dataSlice(r,12);try{const r=[];const n=getNumber$1(dataSlice(e,32,64));const i=getNumber$1(dataSlice(e,n,n+32));const s=dataSlice(e,n+32);for(let e=0;e<i;e++){const t=_parseString(s,e*32);if(t==null){throw new Error("abort")}r.push(t)}t.urls=r}catch(e){assert$m(false,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const r=_parseBytes(e,64);if(r==null){throw new Error("abort")}t.calldata=r}catch(e){assert$m(false,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}assert$m(dataSlice(e,100,128)===dataSlice(zeros,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"});t.selector=dataSlice(e,96,100);try{const r=_parseBytes(e,128);if(r==null){throw new Error("abort")}t.extraData=r}catch(e){assert$m(false,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}t.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map((e=>t[e]));return t}function checkProvider(e,t){if(e.provider){return e.provider}assert$m(false,"missing provider","UNSUPPORTED_OPERATION",{operation:t})}async function populate(e,t){let r=copyRequest(t);if(r.to!=null){r.to=resolveAddress(r.to,e)}if(r.from!=null){const t=r.from;r.from=Promise.all([e.getAddress(),resolveAddress(t,e)]).then((([e,t])=>{assertArgument(e.toLowerCase()===t.toLowerCase(),"transaction from mismatch","tx.from",t);return e}))}else{r.from=e.getAddress()}return await resolveProperties(r)}class AbstractSigner{provider;constructor(e){defineProperties(this,{provider:e||null})}async getNonce(e){return checkProvider(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){const t=await populate(this,e);return t}async populateTransaction(e){const t=checkProvider(this,"populateTransaction");const r=await populate(this,e);if(r.nonce==null){r.nonce=await this.getNonce("pending")}if(r.gasLimit==null){r.gasLimit=await this.estimateGas(r)}const n=await this.provider.getNetwork();if(r.chainId!=null){const t=getBigInt(r.chainId);assertArgument(t===n.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else{r.chainId=n.chainId}const i=r.maxFeePerGas!=null||r.maxPriorityFeePerGas!=null;if(r.gasPrice!=null&&(r.type===2||i)){assertArgument(false,"eip-1559 transaction do not support gasPrice","tx",e)}else if((r.type===0||r.type===1)&&i){assertArgument(false,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e)}if((r.type===2||r.type==null)&&(r.maxFeePerGas!=null&&r.maxPriorityFeePerGas!=null)){r.type=2}else if(r.type===0||r.type===1){const e=await t.getFeeData();assert$m(e.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"});if(r.gasPrice==null){r.gasPrice=e.gasPrice}}else{const e=await t.getFeeData();if(r.type==null){if(e.maxFeePerGas!=null&&e.maxPriorityFeePerGas!=null){r.type=2;if(r.gasPrice!=null){const e=r.gasPrice;delete r.gasPrice;r.maxFeePerGas=e;r.maxPriorityFeePerGas=e}else{if(r.maxFeePerGas==null){r.maxFeePerGas=e.maxFeePerGas}if(r.maxPriorityFeePerGas==null){r.maxPriorityFeePerGas=e.maxPriorityFeePerGas}}}else if(e.gasPrice!=null){assert$m(!i,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"});if(r.gasPrice==null){r.gasPrice=e.gasPrice}r.type=0}else{assert$m(false,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"})}}else if(r.type===2){if(r.maxFeePerGas==null){r.maxFeePerGas=e.maxFeePerGas}if(r.maxPriorityFeePerGas==null){r.maxPriorityFeePerGas=e.maxPriorityFeePerGas}}}return await resolveProperties(r)}async estimateGas(e){return checkProvider(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return checkProvider(this,"call").call(await this.populateCall(e))}async resolveName(e){const t=checkProvider(this,"resolveName");return await t.resolveName(e)}async sendTransaction(e){const t=checkProvider(this,"sendTransaction");const r=await this.populateTransaction(e);delete r.from;const n=Transaction$2.from(r);return await t.broadcastTransaction(await this.signTransaction(n))}}class VoidSigner extends AbstractSigner{address;constructor(e,t){super(t);defineProperties(this,{address:e})}async getAddress(){return this.address}connect(e){return new VoidSigner(this.address,e)}#it(e,t){assert$m(false,`VoidSigner cannot sign ${e}`,"UNSUPPORTED_OPERATION",{operation:t})}async signTransaction(e){this.#it("transactions","signTransaction")}async signMessage(e){this.#it("messages","signMessage")}async signTypedData(e,t,r){this.#it("typed-data","signTypedData")}}const shown=new Set;function showThrottleMessage(e){if(shown.has(e)){return}shown.add(e);console.log("========= NOTICE =========");console.log(`Request-Rate Exceeded for ${e} (this message will not be repeated)`);console.log("");console.log("The default API keys for each service are provided as a highly-throttled,");console.log("community resource for low-traffic projects and early prototyping.");console.log("");console.log("While your application will continue to function, we highly recommended");console.log("signing up for your own API keys to improve performance, increase your");console.log("request rate/limit and enable other perks, such as metrics and advanced APIs.");console.log("");console.log("For more details: https://docs.ethers.org/api-keys/");console.log("==========================")}function copy(e){return JSON.parse(JSON.stringify(e))}class FilterIdSubscriber{#ke;#st;#Oe;#Me;#at;#ot;constructor(e){this.#ke=e;this.#st=null;this.#Oe=this.#De.bind(this);this.#Me=false;this.#at=null;this.#ot=false}_subscribe(e){throw new Error("subclasses must override this")}_emitResults(e,t){throw new Error("subclasses must override this")}_recover(e){throw new Error("subclasses must override this")}async#De(e){try{if(this.#st==null){this.#st=this._subscribe(this.#ke)}let e=null;try{e=await this.#st}catch(e){if(!isError(e,"UNSUPPORTED_OPERATION")||e.operation!=="eth_newFilter"){throw e}}if(e==null){this.#st=null;this.#ke._recoverSubscriber(this,this._recover(this.#ke));return}const t=await this.#ke.getNetwork();if(!this.#at){this.#at=t}if(this.#at.chainId!==t.chainId){throw new Error("chaid changed")}if(this.#ot){return}const r=await this.#ke.send("eth_getFilterChanges",[e]);await this._emitResults(this.#ke,r)}catch(e){console.log("@TODO",e)}this.#ke.once("block",this.#Oe)}#ft(){const e=this.#st;if(e){this.#st=null;e.then((e=>{this.#ke.send("eth_uninstallFilter",[e])}))}}start(){if(this.#Me){return}this.#Me=true;this.#De(-2)}stop(){if(!this.#Me){return}this.#Me=false;this.#ot=true;this.#ft();this.#ke.off("block",this.#Oe)}pause(e){if(e){this.#ft()}this.#ke.off("block",this.#Oe)}resume(){this.start()}}class FilterIdEventSubscriber extends FilterIdSubscriber{#ct;constructor(e,t){super(e);this.#ct=copy(t)}_recover(e){return new PollingEventSubscriber(e,this.#ct)}async _subscribe(e){const t=await e.send("eth_newFilter",[this.#ct]);return t}async _emitResults(e,t){for(const r of t){e.emit(this.#ct,e._wrapLog(r,e._network))}}}class FilterIdPendingSubscriber extends FilterIdSubscriber{async _subscribe(e){return await e.send("eth_newPendingTransactionFilter",[])}async _emitResults(e,t){for(const r of t){e.emit("pending",r)}}}const Primitive$1="bigint,boolean,function,number,string,symbol".split(/,/g);function deepCopy(e){if(e==null||Primitive$1.indexOf(typeof e)>=0){return e}if(typeof e.getAddress==="function"){return e}if(Array.isArray(e)){return e.map(deepCopy)}if(typeof e==="object"){return Object.keys(e).reduce(((t,r)=>{t[r]=e[r];return t}),{})}throw new Error(`should not happen: ${e} (${typeof e})`)}function stall$3(e){return new Promise((t=>{setTimeout(t,e)}))}function getLowerCase(e){if(e){return e.toLowerCase()}return e}function isPollable(e){return e&&typeof e.pollingInterval==="number"}const defaultOptions$2={polling:false,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class JsonRpcSigner extends AbstractSigner{address;constructor(e,t){super(e);t=getAddress(t);defineProperties(this,{address:t})}connect(e){assert$m(false,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(e){return await this.populateCall(e)}async sendUncheckedTransaction(e){const t=deepCopy(e);const r=[];if(t.from){const n=t.from;r.push((async()=>{const r=await resolveAddress(n,this.provider);assertArgument(r!=null&&r.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e);t.from=r})())}else{t.from=this.address}if(t.gasLimit==null){r.push((async()=>{t.gasLimit=await this.provider.estimateGas({...t,from:this.address})})())}if(t.to!=null){const e=t.to;r.push((async()=>{t.to=await resolveAddress(e,this.provider)})())}if(r.length){await Promise.all(r)}const n=this.provider.getRpcTransaction(t);return this.provider.send("eth_sendTransaction",[n])}async sendTransaction(e){const t=await this.provider.getBlockNumber();const r=await this.sendUncheckedTransaction(e);return await new Promise(((e,n)=>{const i=[1e3,100];let s=0;const a=async()=>{try{const n=await this.provider.getTransaction(r);if(n!=null){e(n.replaceableTransaction(t));return}}catch(e){if(isError(e,"CANCELLED")||isError(e,"BAD_DATA")||isError(e,"NETWORK_ERROR")){if(e.info==null){e.info={}}e.info.sendTransactionHash=r;n(e);return}if(isError(e,"INVALID_ARGUMENT")){s++;if(e.info==null){e.info={}}e.info.sendTransactionHash=r;if(s>10){n(e);return}}this.provider.emit("error",makeError("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:e}))}this.provider._setTimeout((()=>{a()}),i.pop()||4e3)};a()}))}async signTransaction(e){const t=deepCopy(e);if(t.from){const r=await resolveAddress(t.from,this.provider);assertArgument(r!=null&&r.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e);t.from=r}else{t.from=this.address}const r=this.provider.getRpcTransaction(t);return await this.provider.send("eth_signTransaction",[r])}async signMessage(e){const t=typeof e==="string"?toUtf8Bytes(e):e;return await this.provider.send("personal_sign",[hexlify(t),this.address.toLowerCase()])}async signTypedData(e,t,r){const n=deepCopy(r);const i=await TypedDataEncoder.resolveNames(e,t,n,(async e=>{const t=await resolveAddress(e);assertArgument(t!=null,"TypedData does not support null address","value",e);return t}));return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(TypedDataEncoder.getPayload(i.domain,t,i.value))])}async unlock(e){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),e,null])}async _legacySignMessage(e){const t=typeof e==="string"?toUtf8Bytes(e):e;return await this.provider.send("eth_sign",[this.address.toLowerCase(),hexlify(t)])}}class JsonRpcApiProvider extends AbstractProvider{#q;#ut;#lt;#ht;#dt;#at;#pt;#yt(){if(this.#ht){return}const e=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");this.#ht=setTimeout((()=>{this.#ht=null;const e=this.#lt;this.#lt=[];while(e.length){const t=[e.shift()];while(e.length){if(t.length===this.#q.batchMaxCount){break}t.push(e.shift());const r=JSON.stringify(t.map((e=>e.payload)));if(r.length>this.#q.batchMaxSize){e.unshift(t.pop());break}}(async()=>{const e=t.length===1?t[0].payload:t.map((e=>e.payload));this.emit("debug",{action:"sendRpcPayload",payload:e});try{const r=await this._send(e);this.emit("debug",{action:"receiveRpcResult",result:r});for(const{resolve:e,reject:n,payload:i}of t){if(this.destroyed){n(makeError("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:i.method}));continue}const t=r.filter((e=>e.id===i.id))[0];if(t==null){const e=makeError("missing response for request","BAD_DATA",{value:r,info:{payload:i}});this.emit("error",e);n(e);continue}if("error"in t){n(this.getRpcError(i,t));continue}e(t.result)}}catch(e){this.emit("debug",{action:"receiveRpcError",error:e});for(const{reject:r}of t){r(e)}}})()}}),e)}constructor(e,t){super(e,t);this.#ut=1;this.#q=Object.assign({},defaultOptions$2,t||{});this.#lt=[];this.#ht=null;this.#at=null;this.#pt=null;{let e=null;const t=new Promise((t=>{e=t}));this.#dt={promise:t,resolve:e}}const r=this._getOption("staticNetwork");if(typeof r==="boolean"){assertArgument(!r||e!=="any","staticNetwork cannot be used on special network 'any'","options",t);if(r&&e!=null){this.#at=Network.from(e)}}else if(r){assertArgument(e==null||r.matches(e),"staticNetwork MUST match network object","options",t);this.#at=r}}_getOption(e){return this.#q[e]}get _network(){assert$m(this.#at,"network is not available yet","NETWORK_ERROR");return this.#at}async _perform(e){if(e.method==="call"||e.method==="estimateGas"){let t=e.transaction;if(t&&t.type!=null&&getBigInt(t.type)){if(t.maxFeePerGas==null&&t.maxPriorityFeePerGas==null){const r=await this.getFeeData();if(r.maxFeePerGas==null&&r.maxPriorityFeePerGas==null){e=Object.assign({},e,{transaction:Object.assign({},t,{type:undefined})})}}}}const t=this.getRpcRequest(e);if(t!=null){return await this.send(t.method,t.args)}return super._perform(e)}async _detectNetwork(){const e=this._getOption("staticNetwork");if(e){if(e===true){if(this.#at){return this.#at}}else{return e}}if(this.#pt){return await this.#pt}if(this.ready){this.#pt=(async()=>{try{const e=Network.from(getBigInt(await this.send("eth_chainId",[])));this.#pt=null;return e}catch(e){this.#pt=null;throw e}})();return await this.#pt}this.#pt=(async()=>{const e={id:this.#ut++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:e});let t;try{t=(await this._send(e))[0];this.#pt=null}catch(e){this.#pt=null;this.emit("debug",{action:"receiveRpcError",error:e});throw e}this.emit("debug",{action:"receiveRpcResult",result:t});if("result"in t){return Network.from(getBigInt(t.result))}throw this.getRpcError(e,t)})();return await this.#pt}_start(){if(this.#dt==null||this.#dt.resolve==null){return}this.#dt.resolve();this.#dt=null;(async()=>{while(this.#at==null&&!this.destroyed){try{this.#at=await this._detectNetwork()}catch(e){if(this.destroyed){break}console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)");this.emit("error",makeError("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:e}}));await stall$3(1e3)}}this.#yt()})()}async _waitUntilReady(){if(this.#dt==null){return}return await this.#dt.promise}_getSubscriber(e){if(e.type==="pending"){return new FilterIdPendingSubscriber(this)}if(e.type==="event"){if(this._getOption("polling")){return new PollingEventSubscriber(this,e.filter)}return new FilterIdEventSubscriber(this,e.filter)}if(e.type==="orphan"&&e.filter.orphan==="drop-log"){return new UnmanagedSubscriber("orphan")}return super._getSubscriber(e)}get ready(){return this.#dt==null}getRpcTransaction(e){const t={};["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach((r=>{if(e[r]==null){return}let n=r;if(r==="gasLimit"){n="gas"}t[n]=toQuantity(getBigInt(e[r],`tx.${r}`))}));["from","to","data"].forEach((r=>{if(e[r]==null){return}t[r]=hexlify(e[r])}));if(e.accessList){t["accessList"]=accessListify(e.accessList)}return t}getRpcRequest(e){switch(e.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[getLowerCase(e.address),e.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[getLowerCase(e.address),e.blockTag]};case"getCode":return{method:"eth_getCode",args:[getLowerCase(e.address),e.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[getLowerCase(e.address),"0x"+e.position.toString(16),e.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[e.signedTransaction]};case"getBlock":if("blockTag"in e){return{method:"eth_getBlockByNumber",args:[e.blockTag,!!e.includeTransactions]}}else if("blockHash"in e){return{method:"eth_getBlockByHash",args:[e.blockHash,!!e.includeTransactions]}}break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[e.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[e.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(e.transaction),e.blockTag]};case"estimateGas":{return{method:"eth_estimateGas",args:[this.getRpcTransaction(e.transaction)]}}case"getLogs":if(e.filter&&e.filter.address!=null){if(Array.isArray(e.filter.address)){e.filter.address=e.filter.address.map(getLowerCase)}else{e.filter.address=getLowerCase(e.filter.address)}}return{method:"eth_getLogs",args:[e.filter]}}return null}getRpcError(e,t){const{method:r}=e;const{error:n}=t;if(r==="eth_estimateGas"&&n.message){const t=n.message;if(!t.match(/revert/i)&&t.match(/insufficient funds/i)){return makeError("insufficient funds","INSUFFICIENT_FUNDS",{transaction:e.params[0],info:{payload:e,error:n}})}}if(r==="eth_call"||r==="eth_estimateGas"){const t=spelunkData(n);const i=AbiCoder.getBuiltinCallException(r==="eth_call"?"call":"estimateGas",e.params[0],t?t.data:null);i.info={error:n,payload:e};return i}const i=JSON.stringify(spelunkMessage(n));if(typeof n.message==="string"&&n.message.match(/user denied|ethers-user-denied/i)){const t={eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"};return makeError(`user rejected action`,"ACTION_REJECTED",{action:t[r]||"unknown",reason:"rejected",info:{payload:e,error:n}})}if(r==="eth_sendRawTransaction"||r==="eth_sendTransaction"){const t=e.params[0];if(i.match(/insufficient funds|base fee exceeds gas limit/i)){return makeError("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:t,info:{error:n}})}if(i.match(/nonce/i)&&i.match(/too low/i)){return makeError("nonce has already been used","NONCE_EXPIRED",{transaction:t,info:{error:n}})}if(i.match(/replacement transaction/i)&&i.match(/underpriced/i)){return makeError("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:t,info:{error:n}})}if(i.match(/only replay-protected/i)){return makeError("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:r,info:{transaction:t,info:{error:n}}})}}let s=!!i.match(/the method .* does not exist/i);if(!s){if(n&&n.details&&n.details.startsWith("Unauthorized method:")){s=true}}if(s){return makeError("unsupported operation","UNSUPPORTED_OPERATION",{operation:e.method,info:{error:n,payload:e}})}return makeError("could not coalesce error","UNKNOWN_ERROR",{error:n,payload:e})}send(e,t){if(this.destroyed){return Promise.reject(makeError("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e}))}const r=this.#ut++;const n=new Promise(((n,i)=>{this.#lt.push({resolve:n,reject:i,payload:{method:e,params:t,id:r,jsonrpc:"2.0"}})}));this.#yt();return n}async getSigner(e){if(e==null){e=0}const t=this.send("eth_accounts",[]);if(typeof e==="number"){const r=await t;if(e>=r.length){throw new Error("no such account")}return new JsonRpcSigner(this,r[e])}const{accounts:r}=await resolveProperties({network:this.getNetwork(),accounts:t});e=getAddress(e);for(const t of r){if(getAddress(t)===e){return new JsonRpcSigner(this,e)}}throw new Error("invalid account")}async listAccounts(){const e=await this.send("eth_accounts",[]);return e.map((e=>new JsonRpcSigner(this,e)))}destroy(){if(this.#ht){clearTimeout(this.#ht);this.#ht=null}for(const{payload:e,reject:t}of this.#lt){t(makeError("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e.method}))}this.#lt=[];super.destroy()}}class JsonRpcApiPollingProvider extends JsonRpcApiProvider{#mt;constructor(e,t){super(e,t);this.#mt=4e3}_getSubscriber(e){const t=super._getSubscriber(e);if(isPollable(t)){t.pollingInterval=this.#mt}return t}get pollingInterval(){return this.#mt}set pollingInterval(e){if(!Number.isInteger(e)||e<0){throw new Error("invalid interval")}this.#mt=e;this._forEachSubscriber((e=>{if(isPollable(e)){e.pollingInterval=this.#mt}}))}}class JsonRpcProvider extends JsonRpcApiPollingProvider{#gt;constructor(e,t,r){if(e==null){e="http://localhost:8545"}super(t,r);if(typeof e==="string"){this.#gt=new FetchRequest(e)}else{this.#gt=e.clone()}}_getConnection(){return this.#gt.clone()}async send(e,t){await this._start();return await super.send(e,t)}async _send(e){const t=this._getConnection();t.body=JSON.stringify(e);t.setHeader("content-type","application/json");const r=await t.send();r.assertOk();let n=r.bodyJson;if(!Array.isArray(n)){n=[n]}return n}}function spelunkData(e){if(e==null){return null}if(typeof e.message==="string"&&e.message.match(/revert/i)&&isHexString(e.data)){return{message:e.message,data:e.data}}if(typeof e==="object"){for(const t in e){const r=spelunkData(e[t]);if(r){return r}}return null}if(typeof e==="string"){try{return spelunkData(JSON.parse(e))}catch(e){}}return null}function _spelunkMessage(e,t){if(e==null){return}if(typeof e.message==="string"){t.push(e.message)}if(typeof e==="object"){for(const r in e){_spelunkMessage(e[r],t)}}if(typeof e==="string"){try{return _spelunkMessage(JSON.parse(e),t)}catch(e){}}}function spelunkMessage(e){const t=[];_spelunkMessage(e,t);return t}const defaultApiKey$1="9f7d929b018cdffb338517efa06f58359e86ff1ffd350bc889738523659e7972";function getHost$4(e){switch(e){case"mainnet":return"rpc.ankr.com/eth";case"goerli":return"rpc.ankr.com/eth_goerli";case"matic":return"rpc.ankr.com/polygon";case"arbitrum":return"rpc.ankr.com/arbitrum"}assertArgument(false,"unsupported network","network",e)}class AnkrProvider extends JsonRpcProvider{apiKey;constructor(e,t){if(e==null){e="mainnet"}const r=Network.from(e);if(t==null){t=defaultApiKey$1}const n={polling:true,staticNetwork:r};const i=AnkrProvider.getRequest(r,t);super(i,r,n);defineProperties(this,{apiKey:t})}_getProvider(e){try{return new AnkrProvider(e,this.apiKey)}catch(e){}return super._getProvider(e)}static getRequest(e,t){if(t==null){t=defaultApiKey$1}const r=new FetchRequest(`https://${getHost$4(e.name)}/${t}`);r.allowGzip=true;if(t===defaultApiKey$1){r.retryFunc=async(e,t,r)=>{showThrottleMessage("AnkrProvider");return true}}return r}getRpcError(e,t){if(e.method==="eth_sendRawTransaction"){if(t&&t.error&&t.error.message==="INTERNAL_ERROR: could not replace existing tx"){t.error.message="replacement transaction underpriced"}}return super.getRpcError(e,t)}isCommunityResource(){return this.apiKey===defaultApiKey$1}}const defaultApiKey="_gg7wSSi0KMBsdKnGVfHDueq6xMB9EkC";function getHost$3(e){switch(e){case"mainnet":return"eth-mainnet.alchemyapi.io";case"goerli":return"eth-goerli.g.alchemy.com";case"sepolia":return"eth-sepolia.g.alchemy.com";case"arbitrum":return"arb-mainnet.g.alchemy.com";case"arbitrum-goerli":return"arb-goerli.g.alchemy.com";case"base":return"base-mainnet.g.alchemy.com";case"base-goerli":return"base-goerli.g.alchemy.com";case"matic":return"polygon-mainnet.g.alchemy.com";case"matic-mumbai":return"polygon-mumbai.g.alchemy.com";case"optimism":return"opt-mainnet.g.alchemy.com";case"optimism-goerli":return"opt-goerli.g.alchemy.com"}assertArgument(false,"unsupported network","network",e)}class AlchemyProvider extends JsonRpcProvider{apiKey;constructor(e,t){if(e==null){e="mainnet"}const r=Network.from(e);if(t==null){t=defaultApiKey}const n=AlchemyProvider.getRequest(r,t);super(n,r,{staticNetwork:r});defineProperties(this,{apiKey:t})}_getProvider(e){try{return new AlchemyProvider(e,this.apiKey)}catch(e){}return super._getProvider(e)}async _perform(e){if(e.method==="getTransactionResult"){const{trace:t,tx:r}=await resolveProperties({trace:this.send("trace_transaction",[e.hash]),tx:this.getTransaction(e.hash)});if(t==null||r==null){return null}let n;let i=false;try{n=t[0].result.output;i=t[0].error==="Reverted"}catch(e){}if(n){assert$m(!i,"an error occurred during transaction executions","CALL_EXCEPTION",{action:"getTransactionResult",data:n,reason:null,transaction:r,invocation:null,revert:null});return n}assert$m(false,"could not parse trace result","BAD_DATA",{value:t})}return await super._perform(e)}isCommunityResource(){return this.apiKey===defaultApiKey}static getRequest(e,t){if(t==null){t=defaultApiKey}const r=new FetchRequest(`https://${getHost$3(e.name)}/v2/${t}`);r.allowGzip=true;if(t===defaultApiKey){r.retryFunc=async(e,t,r)=>{showThrottleMessage("alchemy");return true}}return r}}class CloudflareProvider extends JsonRpcProvider{constructor(e){if(e==null){e="mainnet"}const t=Network.from(e);assertArgument(t.name==="mainnet","unsupported network","network",e);super("https://cloudflare-eth.com/",t,{staticNetwork:t})}}const THROTTLE=2e3;function isPromise(e){return e&&typeof e.then==="function"}const EtherscanPluginId="org.ethers.plugins.provider.Etherscan";class EtherscanPlugin extends NetworkPlugin{baseUrl;constructor(e){super(EtherscanPluginId);defineProperties(this,{baseUrl:e})}clone(){return new EtherscanPlugin(this.baseUrl)}}const skipKeys=["enableCcipRead"];let nextId=1;class EtherscanProvider extends AbstractProvider{network;apiKey;#bt;constructor(e,t){const r=t!=null?t:null;super();const n=Network.from(e);this.#bt=n.getPlugin(EtherscanPluginId);defineProperties(this,{apiKey:r,network:n});this.getBaseUrl()}getBaseUrl(){if(this.#bt){return this.#bt.baseUrl}switch(this.network.name){case"mainnet":return"https://api.etherscan.io";case"goerli":return"https://api-goerli.etherscan.io";case"sepolia":return"https://api-sepolia.etherscan.io";case"arbitrum":return"https://api.arbiscan.io";case"arbitrum-goerli":return"https://api-goerli.arbiscan.io";case"matic":return"https://api.polygonscan.com";case"matic-mumbai":return"https://api-testnet.polygonscan.com";case"optimism":return"https://api-optimistic.etherscan.io";case"optimism-goerli":return"https://api-goerli-optimistic.etherscan.io";case"bnb":return"http://api.bscscan.com";case"bnbt":return"http://api-testnet.bscscan.com"}assertArgument(false,"unsupported network","network",this.network)}getUrl(e,t){const r=Object.keys(t).reduce(((e,r)=>{const n=t[r];if(n!=null){e+=`&${r}=${n}`}return e}),"");const n=this.apiKey?`&apikey=${this.apiKey}`:"";return`${this.getBaseUrl()}/api?module=${e}${r}${n}`}getPostUrl(){return`${this.getBaseUrl()}/api`}getPostData(e,t){t.module=e;t.apikey=this.apiKey;return t}async detectNetwork(){return this.network}async fetch(e,t,r){const n=nextId++;const i=r?this.getPostUrl():this.getUrl(e,t);const s=r?this.getPostData(e,t):null;this.emit("debug",{action:"sendRequest",id:n,url:i,payload:s});const a=new FetchRequest(i);a.setThrottleParams({slotInterval:1e3});a.retryFunc=(e,t,r)=>{if(this.isCommunityResource()){showThrottleMessage("Etherscan")}return Promise.resolve(true)};a.processFunc=async(t,r)=>{const i=r.hasBody()?JSON.parse(toUtf8String(r.body)):{};const s=(typeof i.result==="string"?i.result:"").toLowerCase().indexOf("rate limit")>=0;if(e==="proxy"){if(i&&i.status==0&&i.message=="NOTOK"&&s){this.emit("debug",{action:"receiveError",id:n,reason:"proxy-NOTOK",error:i});r.throwThrottleError(i.result,THROTTLE)}}else{if(s){this.emit("debug",{action:"receiveError",id:n,reason:"null result",error:i.result});r.throwThrottleError(i.result,THROTTLE)}}return r};if(s){a.setHeader("content-type","application/x-www-form-urlencoded; charset=UTF-8");a.body=Object.keys(s).map((e=>`${e}=${s[e]}`)).join("&")}const o=await a.send();try{o.assertOk()}catch(e){this.emit("debug",{action:"receiveError",id:n,error:e,reason:"assertOk"});assert$m(false,"response error","SERVER_ERROR",{request:a,response:o})}if(!o.hasBody()){this.emit("debug",{action:"receiveError",id:n,error:"missing body",reason:"null body"});assert$m(false,"missing response","SERVER_ERROR",{request:a,response:o})}const f=JSON.parse(toUtf8String(o.body));if(e==="proxy"){if(f.jsonrpc!="2.0"){this.emit("debug",{action:"receiveError",id:n,result:f,reason:"invalid JSON-RPC"});assert$m(false,"invalid JSON-RPC response (missing jsonrpc='2.0')","SERVER_ERROR",{request:a,response:o,info:{result:f}})}if(f.error){this.emit("debug",{action:"receiveError",id:n,result:f,reason:"JSON-RPC error"});assert$m(false,"error response","SERVER_ERROR",{request:a,response:o,info:{result:f}})}this.emit("debug",{action:"receiveRequest",id:n,result:f});return f.result}else{if(f.status==0&&(f.message==="No records found"||f.message==="No transactions found")){this.emit("debug",{action:"receiveRequest",id:n,result:f});return f.result}if(f.status!=1||typeof f.message==="string"&&!f.message.match(/^OK/)){this.emit("debug",{action:"receiveError",id:n,result:f});assert$m(false,"error response","SERVER_ERROR",{request:a,response:o,info:{result:f}})}this.emit("debug",{action:"receiveRequest",id:n,result:f});return f.result}}_getTransactionPostData(e){const t={};for(let r in e){if(skipKeys.indexOf(r)>=0){continue}if(e[r]==null){continue}let n=e[r];if(r==="type"&&n===0){continue}if(r==="blockTag"&&n==="latest"){continue}if({type:true,gasLimit:true,gasPrice:true,maxFeePerGs:true,maxPriorityFeePerGas:true,nonce:true,value:true}[r]){n=toQuantity(n)}else if(r==="accessList"){n="["+accessListify(n).map((e=>`{address:"${e.address}",storageKeys:["${e.storageKeys.join('","')}"]}`)).join(",")+"]"}else{n=hexlify(n)}t[r]=n}return t}_checkError(e,t,r){let n="";if(isError(t,"SERVER_ERROR")){try{n=t.info.result.error.message}catch(e){}if(!n){try{n=t.info.message}catch(e){}}}if(e.method==="estimateGas"){if(!n.match(/revert/i)&&n.match(/insufficient funds/i)){assert$m(false,"insufficient funds","INSUFFICIENT_FUNDS",{transaction:e.transaction})}}if(e.method==="call"||e.method==="estimateGas"){if(n.match(/execution reverted/i)){let r="";try{r=t.info.result.error.data}catch(t){}const n=AbiCoder.getBuiltinCallException(e.method,e.transaction,r);n.info={request:e,error:t};throw n}}if(n){if(e.method==="broadcastTransaction"){const t=Transaction$2.from(e.signedTransaction);if(n.match(/replacement/i)&&n.match(/underpriced/i)){assert$m(false,"replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:t})}if(n.match(/insufficient funds/)){assert$m(false,"insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:t})}if(n.match(/same hash was already imported|transaction nonce is too low|nonce too low/)){assert$m(false,"nonce has already been used","NONCE_EXPIRED",{transaction:t})}}}throw t}async _detectNetwork(){return this.network}async _perform(e){switch(e.method){case"chainId":return this.network.chainId;case"getBlockNumber":return this.fetch("proxy",{action:"eth_blockNumber"});case"getGasPrice":return this.fetch("proxy",{action:"eth_gasPrice"});case"getPriorityFee":if(this.network.name==="mainnet"){return"1000000000"}else if(this.network.name==="optimism"){return"1000000"}else{throw new Error("fallback onto the AbstractProvider default")}case"getBalance":return this.fetch("account",{action:"balance",address:e.address,tag:e.blockTag});case"getTransactionCount":return this.fetch("proxy",{action:"eth_getTransactionCount",address:e.address,tag:e.blockTag});case"getCode":return this.fetch("proxy",{action:"eth_getCode",address:e.address,tag:e.blockTag});case"getStorage":return this.fetch("proxy",{action:"eth_getStorageAt",address:e.address,position:e.position,tag:e.blockTag});case"broadcastTransaction":return this.fetch("proxy",{action:"eth_sendRawTransaction",hex:e.signedTransaction},true).catch((t=>this._checkError(e,t,e.signedTransaction)));case"getBlock":if("blockTag"in e){return this.fetch("proxy",{action:"eth_getBlockByNumber",tag:e.blockTag,boolean:e.includeTransactions?"true":"false"})}assert$m(false,"getBlock by blockHash not supported by Etherscan","UNSUPPORTED_OPERATION",{operation:"getBlock(blockHash)"});case"getTransaction":return this.fetch("proxy",{action:"eth_getTransactionByHash",txhash:e.hash});case"getTransactionReceipt":return this.fetch("proxy",{action:"eth_getTransactionReceipt",txhash:e.hash});case"call":{if(e.blockTag!=="latest"){throw new Error("EtherscanProvider does not support blockTag for call")}const t=this._getTransactionPostData(e.transaction);t.module="proxy";t.action="eth_call";try{return await this.fetch("proxy",t,true)}catch(t){return this._checkError(e,t,e.transaction)}}case"estimateGas":{const t=this._getTransactionPostData(e.transaction);t.module="proxy";t.action="eth_estimateGas";try{return await this.fetch("proxy",t,true)}catch(t){return this._checkError(e,t,e.transaction)}}}return super._perform(e)}async getNetwork(){return this.network}async getEtherPrice(){if(this.network.name!=="mainnet"){return 0}return parseFloat((await this.fetch("stats",{action:"ethprice"})).ethusd)}async getContract(e){let t=this._getAddress(e);if(isPromise(t)){t=await t}try{const e=await this.fetch("contract",{action:"getabi",address:t});const r=JSON.parse(e);return new Contract$1(t,r,this)}catch(e){return null}}isCommunityResource(){return this.apiKey==null}}function getGlobal(){if(typeof self!=="undefined"){return self}if(typeof window!=="undefined"){return window}if(typeof global!=="undefined"){return global}throw new Error("unable to locate global object")}const _WebSocket=getGlobal().WebSocket;class SocketSubscriber{#ke;#_e;get filter(){return JSON.parse(this.#_e)}#At;#wt;#Et;constructor(e,t){this.#ke=e;this.#_e=JSON.stringify(t);this.#At=null;this.#wt=null;this.#Et=null}start(){this.#At=this.#ke.send("eth_subscribe",this.filter).then((e=>{this.#ke._register(e,this);return e}))}stop(){this.#At.then((e=>{this.#ke.send("eth_unsubscribe",[e])}));this.#At=null}pause(e){assert$m(e,"preserve logs while paused not supported by SocketSubscriber yet","UNSUPPORTED_OPERATION",{operation:"pause(false)"});this.#wt=!!e}resume(){this.#wt=null}_handleMessage(e){if(this.#At==null){return}if(this.#wt===null){let t=this.#Et;if(t==null){t=this._emit(this.#ke,e)}else{t=t.then((async()=>{await this._emit(this.#ke,e)}))}this.#Et=t.then((()=>{if(this.#Et===t){this.#Et=null}}))}}async _emit(e,t){throw new Error("sub-classes must implemente this; _emit")}}class SocketBlockSubscriber extends SocketSubscriber{constructor(e){super(e,["newHeads"])}async _emit(e,t){e.emit("block",parseInt(t.number))}}class SocketPendingSubscriber extends SocketSubscriber{constructor(e){super(e,["newPendingTransactions"])}async _emit(e,t){e.emit("pending",t)}}class SocketEventSubscriber extends SocketSubscriber{#vt;get logFilter(){return JSON.parse(this.#vt)}constructor(e,t){super(e,["logs",t]);this.#vt=JSON.stringify(t)}async _emit(e,t){e.emit(this.logFilter,e._wrapLog(t,e._network))}}class SocketProvider extends JsonRpcApiProvider{#_t;#He;#St;constructor(e,t){const r=Object.assign({},t!=null?t:{});assertArgument(r.batchMaxCount==null||r.batchMaxCount===1,"sockets-based providers do not support batches","options.batchMaxCount",t);r.batchMaxCount=1;if(r.staticNetwork==null){r.staticNetwork=true}super(e,r);this.#_t=new Map;this.#He=new Map;this.#St=new Map}_getSubscriber(e){switch(e.type){case"close":return new UnmanagedSubscriber("close");case"block":return new SocketBlockSubscriber(this);case"pending":return new SocketPendingSubscriber(this);case"event":return new SocketEventSubscriber(this,e.filter);case"orphan":if(e.filter.orphan==="drop-log"){return new UnmanagedSubscriber("drop-log")}}return super._getSubscriber(e)}_register(e,t){this.#He.set(e,t);const r=this.#St.get(e);if(r){for(const e of r){t._handleMessage(e)}this.#St.delete(e)}}async _send(e){assertArgument(!Array.isArray(e),"WebSocket does not support batch send","payload",e);const t=new Promise(((t,r)=>{this.#_t.set(e.id,{payload:e,resolve:t,reject:r})}));await this._waitUntilReady();await this._write(JSON.stringify(e));return[await t]}async _processMessage(e){const t=JSON.parse(e);if(t&&typeof t==="object"&&"id"in t){const e=this.#_t.get(t.id);if(e==null){this.emit("error",makeError("received result for unknown id","UNKNOWN_ERROR",{reasonCode:"UNKNOWN_ID",result:t}));return}this.#_t.delete(t.id);e.resolve(t)}else if(t&&t.method==="eth_subscription"){const e=t.params.subscription;const r=this.#He.get(e);if(r){r._handleMessage(t.params.result)}else{let r=this.#St.get(e);if(r==null){r=[];this.#St.set(e,r)}r.push(t.params.result)}}else{this.emit("error",makeError("received unexpected message","UNKNOWN_ERROR",{reasonCode:"UNEXPECTED_MESSAGE",result:t}));return}}async _write(e){throw new Error("sub-classes must override this")}}class WebSocketProvider extends SocketProvider{#gt;#$t;get websocket(){if(this.#$t==null){throw new Error("websocket closed")}return this.#$t}constructor(e,t,r){super(t,r);if(typeof e==="string"){this.#gt=()=>new _WebSocket(e);this.#$t=this.#gt()}else if(typeof e==="function"){this.#gt=e;this.#$t=e()}else{this.#gt=null;this.#$t=e}this.websocket.onopen=async()=>{try{await this._start();this.resume()}catch(e){console.log("failed to start WebsocketProvider",e)}};this.websocket.onmessage=e=>{this._processMessage(e.data)}}async _write(e){this.websocket.send(e)}async destroy(){if(this.#$t!=null){this.#$t.close();this.#$t=null}super.destroy()}}const defaultProjectId="84842078b09946638c03157f83405213";function getHost$2(e){switch(e){case"mainnet":return"mainnet.infura.io";case"goerli":return"goerli.infura.io";case"sepolia":return"sepolia.infura.io";case"arbitrum":return"arbitrum-mainnet.infura.io";case"arbitrum-goerli":return"arbitrum-goerli.infura.io";case"linea":return"linea-mainnet.infura.io";case"linea-goerli":return"linea-goerli.infura.io";case"matic":return"polygon-mainnet.infura.io";case"matic-mumbai":return"polygon-mumbai.infura.io";case"optimism":return"optimism-mainnet.infura.io";case"optimism-goerli":return"optimism-goerli.infura.io"}assertArgument(false,"unsupported network","network",e)}class InfuraWebSocketProvider extends WebSocketProvider{projectId;projectSecret;constructor(e,t){const r=new InfuraProvider(e,t);const n=r._getConnection();assert$m(!n.credentials,"INFURA WebSocket project secrets unsupported","UNSUPPORTED_OPERATION",{operation:"InfuraProvider.getWebSocketProvider()"});const i=n.url.replace(/^http/i,"ws").replace("/v3/","/ws/v3/");super(i,e);defineProperties(this,{projectId:r.projectId,projectSecret:r.projectSecret})}isCommunityResource(){return this.projectId===defaultProjectId}}class InfuraProvider extends JsonRpcProvider{projectId;projectSecret;constructor(e,t,r){if(e==null){e="mainnet"}const n=Network.from(e);if(t==null){t=defaultProjectId}if(r==null){r=null}const i=InfuraProvider.getRequest(n,t,r);super(i,n,{staticNetwork:n});defineProperties(this,{projectId:t,projectSecret:r})}_getProvider(e){try{return new InfuraProvider(e,this.projectId,this.projectSecret)}catch(e){}return super._getProvider(e)}isCommunityResource(){return this.projectId===defaultProjectId}static getWebSocketProvider(e,t){return new InfuraWebSocketProvider(e,t)}static getRequest(e,t,r){if(t==null){t=defaultProjectId}if(r==null){r=null}const n=new FetchRequest(`https://${getHost$2(e.name)}/v3/${t}`);n.allowGzip=true;if(r){n.setCredentials("",r)}if(t===defaultProjectId){n.retryFunc=async(e,t,r)=>{showThrottleMessage("InfuraProvider");return true}}return n}}const defaultToken="919b412a057b5e9c9b6dce193c5a60242d6efadb";function getHost$1(e){switch(e){case"mainnet":return"ethers.quiknode.pro";case"goerli":return"ethers.ethereum-goerli.quiknode.pro";case"arbitrum":return"ethers.arbitrum-mainnet.quiknode.pro";case"arbitrum-goerli":return"ethers.arbitrum-goerli.quiknode.pro";case"matic":return"ethers.matic.quiknode.pro";case"matic-mumbai":return"ethers.matic-testnet.quiknode.pro";case"optimism":return"ethers.optimism.quiknode.pro";case"optimism-goerli":return"ethers.optimism-goerli.quiknode.pro"}assertArgument(false,"unsupported network","network",e)}class QuickNodeProvider extends JsonRpcProvider{token;constructor(e,t){if(e==null){e="mainnet"}const r=Network.from(e);if(t==null){t=defaultToken}const n=QuickNodeProvider.getRequest(r,t);super(n,r,{staticNetwork:r});defineProperties(this,{token:t})}_getProvider(e){try{return new QuickNodeProvider(e,this.token)}catch(e){}return super._getProvider(e)}isCommunityResource(){return this.token===defaultToken}static getRequest(e,t){if(t==null){t=defaultToken}const r=new FetchRequest(`https://${getHost$1(e.name)}/${t}`);r.allowGzip=true;if(t===defaultToken){r.retryFunc=async(e,t,r)=>{showThrottleMessage("QuickNodeProvider");return true}}return r}}const BN_1=BigInt("1");const BN_2=BigInt("2");function shuffle(e){for(let t=e.length-1;t>0;t--){const r=Math.floor(Math.random()*(t+1));const n=e[t];e[t]=e[r];e[r]=n}}function stall$2(e){return new Promise((t=>{setTimeout(t,e)}))}function getTime(){return(new Date).getTime()}function stringify(e){return JSON.stringify(e,((e,t)=>{if(typeof t==="bigint"){return{type:"bigint",value:t.toString()}}return t}))}const defaultConfig={stallTimeout:400,priority:1,weight:1};const defaultState={blockNumber:-2,requests:0,lateResponses:0,errorResponses:0,outOfSync:-1,unsupportedEvents:0,rollingDuration:0,score:0,_network:null,_updateNumber:null,_totalTime:0,_lastFatalError:null,_lastFatalErrorTimestamp:0};async function waitForSync(e,t){while(e.blockNumber<0||e.blockNumber<t){if(!e._updateNumber){e._updateNumber=(async()=>{try{const t=await e.provider.getBlockNumber();if(t>e.blockNumber){e.blockNumber=t}}catch(t){e.blockNumber=-2;e._lastFatalError=t;e._lastFatalErrorTimestamp=getTime()}e._updateNumber=null})()}await e._updateNumber;e.outOfSync++;if(e._lastFatalError){break}}}function _normalize(e){if(e==null){return"null"}if(Array.isArray(e)){return"["+e.map(_normalize).join(",")+"]"}if(typeof e==="object"&&typeof e.toJSON==="function"){return _normalize(e.toJSON())}switch(typeof e){case"boolean":case"symbol":return e.toString();case"bigint":case"number":return BigInt(e).toString();case"string":return JSON.stringify(e);case"object":{const t=Object.keys(e);t.sort();return"{"+t.map((t=>`${JSON.stringify(t)}:${_normalize(e[t])}`)).join(",")+"}"}}console.log("Could not serialize",e);throw new Error("Hmm...")}function normalizeResult(e){if("error"in e){const t=e.error;return{tag:_normalize(t),value:t}}const t=e.result;return{tag:_normalize(t),value:t}}function checkQuorum(e,t){const r=new Map;for(const{value:e,tag:n,weight:i}of t){const t=r.get(n)||{value:e,weight:0};t.weight+=i;r.set(n,t)}let n=null;for(const t of r.values()){if(t.weight>=e&&(!n||t.weight>n.weight)){n=t}}if(n){return n.value}return undefined}function getMedian(e,t){let r=0;const n=new Map;let i=null;const s=[];for(const{value:e,tag:a,weight:o}of t){if(e instanceof Error){const t=n.get(a)||{value:e,weight:0};t.weight+=o;n.set(a,t);if(i==null||t.weight>i.weight){i=t}}else{s.push(BigInt(e));r+=o}}if(r<e){if(i&&i.weight>=e){return i.value}return undefined}s.sort(((e,t)=>e<t?-1:t>e?1:0));const a=Math.floor(s.length/2);if(s.length%2){return s[a]}return(s[a-1]+s[a]+BN_1)/BN_2}function getAnyResult(e,t){const r=checkQuorum(e,t);if(r!==undefined){return r}for(const e of t){if(e.value){return e.value}}return undefined}function getFuzzyMode(e,t){if(e===1){return getNumber$1(getMedian(e,t),"%internal")}const r=new Map;const n=(e,t)=>{const n=r.get(e)||{result:e,weight:0};n.weight+=t;r.set(e,n)};for(const{weight:e,value:r}of t){const t=getNumber$1(r);n(t-1,e);n(t,e);n(t+1,e)}let i=0;let s=undefined;for(const{weight:t,result:n}of r.values()){if(t>=e&&(t>i||s!=null&&t===i&&n>s)){i=t;s=n}}return s}class FallbackProvider extends AbstractProvider{quorum;eventQuorum;eventWorkers;#Tt;#It;#Ct;constructor(e,t,r){super(t,r);this.#Tt=e.map((e=>{if(e instanceof AbstractProvider){return Object.assign({provider:e},defaultConfig,defaultState)}else{return Object.assign({},defaultConfig,e,defaultState)}}));this.#It=-2;this.#Ct=null;if(r&&r.quorum!=null){this.quorum=r.quorum}else{this.quorum=Math.ceil(this.#Tt.reduce(((e,t)=>{e+=t.weight;return e}),0)/2)}this.eventQuorum=1;this.eventWorkers=1;assertArgument(this.quorum<=this.#Tt.reduce(((e,t)=>e+t.weight),0),"quorum exceed provider wieght","quorum",this.quorum)}get providerConfigs(){return this.#Tt.map((e=>{const t=Object.assign({},e);for(const e in t){if(e[0]==="_"){delete t[e]}}return t}))}async _detectNetwork(){return Network.from(getBigInt(await this._perform({method:"chainId"})))}async _translatePerform(e,t){switch(t.method){case"broadcastTransaction":return await e.broadcastTransaction(t.signedTransaction);case"call":return await e.call(Object.assign({},t.transaction,{blockTag:t.blockTag}));case"chainId":return(await e.getNetwork()).chainId;case"estimateGas":return await e.estimateGas(t.transaction);case"getBalance":return await e.getBalance(t.address,t.blockTag);case"getBlock":{const r="blockHash"in t?t.blockHash:t.blockTag;return await e.getBlock(r,t.includeTransactions)}case"getBlockNumber":return await e.getBlockNumber();case"getCode":return await e.getCode(t.address,t.blockTag);case"getGasPrice":return(await e.getFeeData()).gasPrice;case"getPriorityFee":return(await e.getFeeData()).maxPriorityFeePerGas;case"getLogs":return await e.getLogs(t.filter);case"getStorage":return await e.getStorage(t.address,t.position,t.blockTag);case"getTransaction":return await e.getTransaction(t.hash);case"getTransactionCount":return await e.getTransactionCount(t.address,t.blockTag);case"getTransactionReceipt":return await e.getTransactionReceipt(t.hash);case"getTransactionResult":return await e.getTransactionResult(t.hash)}}#Pt(e){const t=Array.from(e).map((e=>e.config));const r=this.#Tt.slice();shuffle(r);r.sort(((e,t)=>e.priority-t.priority));for(const e of r){if(e._lastFatalError){continue}if(t.indexOf(e)===-1){return e}}return null}#Rt(e,t){const r=this.#Pt(e);if(r==null){return null}const n={config:r,result:null,didBump:false,perform:null,staller:null};const i=getTime();n.perform=(async()=>{try{r.requests++;const e=await this._translatePerform(r.provider,t);n.result={result:e}}catch(e){r.errorResponses++;n.result={error:e}}const e=getTime()-i;r._totalTime+=e;r.rollingDuration=.95*r.rollingDuration+.05*e;n.perform=null})();n.staller=(async()=>{await stall$2(r.stallTimeout);n.staller=null})();e.add(n);return n}async#Nt(){let e=this.#Ct;if(!e){const t=[];this.#Tt.forEach((e=>{t.push((async()=>{await waitForSync(e,0);if(!e._lastFatalError){e._network=await e.provider.getNetwork()}})())}));this.#Ct=e=(async()=>{await Promise.all(t);let e=null;for(const t of this.#Tt){if(t._lastFatalError){continue}const r=t._network;if(e==null){e=r.chainId}else if(r.chainId!==e){assert$m(false,"cannot mix providers on different networks","UNSUPPORTED_OPERATION",{operation:"new FallbackProvider"})}}})()}await e}async#kt(e,t){const r=[];for(const t of e){if(t.result!=null){const{tag:e,value:n}=normalizeResult(t.result);r.push({tag:e,value:n,weight:t.config.weight})}}if(r.reduce(((e,t)=>e+t.weight),0)<this.quorum){return undefined}switch(t.method){case"getBlockNumber":{if(this.#It===-2){this.#It=Math.ceil(getNumber$1(getMedian(this.quorum,this.#Tt.filter((e=>!e._lastFatalError)).map((e=>({value:e.blockNumber,tag:getNumber$1(e.blockNumber).toString(),weight:e.weight}))))))}const e=getFuzzyMode(this.quorum,r);if(e===undefined){return undefined}if(e>this.#It){this.#It=e}return this.#It}case"getGasPrice":case"getPriorityFee":case"estimateGas":return getMedian(this.quorum,r);case"getBlock":if("blockTag"in t&&t.blockTag==="pending"){return getAnyResult(this.quorum,r)}return checkQuorum(this.quorum,r);case"call":case"chainId":case"getBalance":case"getTransactionCount":case"getCode":case"getStorage":case"getTransaction":case"getTransactionReceipt":case"getLogs":return checkQuorum(this.quorum,r);case"broadcastTransaction":return getAnyResult(this.quorum,r)}assert$m(false,"unsupported method","UNSUPPORTED_OPERATION",{operation:`_perform(${stringify(t.method)})`})}async#Ot(e,t){if(e.size===0){throw new Error("no runners?!")}const r=[];let n=0;for(const t of e){if(t.perform){r.push(t.perform)}if(t.staller){r.push(t.staller);continue}if(t.didBump){continue}t.didBump=true;n++}const i=await this.#kt(e,t);if(i!==undefined){if(i instanceof Error){throw i}return i}for(let r=0;r<n;r++){this.#Rt(e,t)}assert$m(r.length>0,"quorum not met","SERVER_ERROR",{request:"%sub-requests",info:{request:t,results:Array.from(e).map((e=>stringify(e.result)))}});await Promise.race(r);return await this.#Ot(e,t)}async _perform(e){if(e.method==="broadcastTransaction"){const t=this.#Tt.map((e=>null));const r=this.#Tt.map((async({provider:r,weight:n},i)=>{try{const s=await r._perform(e);t[i]=Object.assign(normalizeResult({result:s}),{weight:n})}catch(e){t[i]=Object.assign(normalizeResult({error:e}),{weight:n})}}));while(true){const e=t.filter((e=>e!=null));for(const{value:t}of e){if(!(t instanceof Error)){return t}}const n=checkQuorum(this.quorum,t.filter((e=>e!=null)));if(isError(n,"INSUFFICIENT_FUNDS")){throw n}const i=r.filter(((e,r)=>t[r]==null));if(i.length===0){break}await Promise.race(i)}const n=getAnyResult(this.quorum,t);assert$m(n!==undefined,"problem multi-broadcasting","SERVER_ERROR",{request:"%sub-requests",info:{request:e,results:t.map(stringify)}});if(n instanceof Error){throw n}return n}await this.#Nt();const t=new Set;let r=0;while(true){const n=this.#Rt(t,e);if(n==null){break}r+=n.config.weight;if(r>=this.quorum){break}}const n=await this.#Ot(t,e);for(const e of t){if(e.perform&&e.result==null){e.config.lateResponses++}}return n}async destroy(){for(const{provider:e}of this.#Tt){e.destroy()}super.destroy()}}function isWebSocketLike(e){return e&&typeof e.send==="function"&&typeof e.close==="function"}const Testnets="goerli kovan sepolia classicKotti optimism-goerli arbitrum-goerli matic-mumbai bnbt".split(" ");function getDefaultProvider(e,t){if(t==null){t={}}const r=e=>{if(t[e]==="-"){return false}if(typeof t.exclusive==="string"){return e===t.exclusive}if(Array.isArray(t.exclusive)){return t.exclusive.indexOf(e)!==-1}return true};if(typeof e==="string"&&e.match(/^https?:/)){return new JsonRpcProvider(e)}if(typeof e==="string"&&e.match(/^wss?:/)||isWebSocketLike(e)){return new WebSocketProvider(e)}let n=null;try{n=Network.from(e)}catch(e){}const i=[];if(r("publicPolygon")&&n){if(n.name==="matic"){i.push(new JsonRpcProvider("https://polygon-rpc.com/",n,{staticNetwork:n}))}}if(r("alchemy")){try{i.push(new AlchemyProvider(e,t.alchemy))}catch(e){}}if(r("ankr")&&t.ankr!=null){try{i.push(new AnkrProvider(e,t.ankr))}catch(e){}}if(r("cloudflare")){try{i.push(new CloudflareProvider(e))}catch(e){}}if(r("etherscan")){try{i.push(new EtherscanProvider(e,t.etherscan))}catch(e){}}if(r("infura")){try{let r=t.infura;let n=undefined;if(typeof r==="object"){n=r.projectSecret;r=r.projectId}i.push(new InfuraProvider(e,r,n))}catch(e){}}if(r("quicknode")){try{let r=t.quicknode;i.push(new QuickNodeProvider(e,r))}catch(e){}}assert$m(i.length,"unsupported default network","UNSUPPORTED_OPERATION",{operation:"getDefaultProvider"});if(i.length===1){return i[0]}let s=Math.floor(i.length/2);if(s>2){s=2}if(n&&Testnets.indexOf(n.name)!==-1){s=1}if(t&&t.quorum){s=t.quorum}return new FallbackProvider(i,undefined,{quorum:s})}class NonceManager extends AbstractSigner{signer;#xt;#Bt;constructor(e){super(e.provider);defineProperties(this,{signer:e});this.#xt=null;this.#Bt=0}async getAddress(){return this.signer.getAddress()}connect(e){return new NonceManager(this.signer.connect(e))}async getNonce(e){if(e==="pending"){if(this.#xt==null){this.#xt=super.getNonce("pending")}const e=this.#Bt;return await this.#xt+e}return super.getNonce(e)}increment(){this.#Bt++}reset(){this.#Bt=0;this.#xt=null}async sendTransaction(e){const t=this.getNonce("pending");this.increment();e=await this.signer.populateTransaction(e);e.nonce=await t;return await this.signer.sendTransaction(e)}signTransaction(e){return this.signer.signTransaction(e)}signMessage(e){return this.signer.signMessage(e)}signTypedData(e,t,r){return this.signer.signTypedData(e,t,r)}}class BrowserProvider extends JsonRpcApiPollingProvider{#E;constructor(e,t){super(t,{batchMaxCount:1});this.#E=async(t,r)=>{const n={method:t,params:r};this.emit("debug",{action:"sendEip1193Request",payload:n});try{const t=await e.request(n);this.emit("debug",{action:"receiveEip1193Result",result:t});return t}catch(e){const t=new Error(e.message);t.code=e.code;t.data=e.data;t.payload=n;this.emit("debug",{action:"receiveEip1193Error",error:t});throw t}}}async send(e,t){await this._start();return await super.send(e,t)}async _send(e){assertArgument(!Array.isArray(e),"EIP-1193 does not support batch request","payload",e);try{const t=await this.#E(e.method,e.params||[]);return[{id:e.id,result:t}]}catch(t){return[{id:e.id,error:{code:t.code,data:t.data,message:t.message}}]}}getRpcError(e,t){t=JSON.parse(JSON.stringify(t));switch(t.error.code||-1){case 4001:t.error.message=`ethers-user-denied: ${t.error.message}`;break;case 4200:t.error.message=`ethers-unsupported: ${t.error.message}`;break}return super.getRpcError(e,t)}async hasSigner(e){if(e==null){e=0}const t=await this.send("eth_accounts",[]);if(typeof e==="number"){return t.length>e}e=e.toLowerCase();return t.filter((t=>t.toLowerCase()===e)).length!==0}async getSigner(e){if(e==null){e=0}if(!await this.hasSigner(e)){try{await this.#E("eth_requestAccounts",[])}catch(e){const t=e.payload;throw this.getRpcError(t,{id:t.id,error:e})}}return await super.getSigner(e)}}const defaultApplicationId="62e1ad51b37b8e00394bda3b";function getHost(e){switch(e){case"mainnet":return"eth-mainnet.gateway.pokt.network";case"goerli":return"eth-goerli.gateway.pokt.network";case"matic":return"poly-mainnet.gateway.pokt.network";case"matic-mumbai":return"polygon-mumbai-rpc.gateway.pokt.network"}assertArgument(false,"unsupported network","network",e)}class PocketProvider extends JsonRpcProvider{applicationId;applicationSecret;constructor(e,t,r){if(e==null){e="mainnet"}const n=Network.from(e);if(t==null){t=defaultApplicationId}if(r==null){r=null}const i={staticNetwork:n};const s=PocketProvider.getRequest(n,t,r);super(s,n,i);defineProperties(this,{applicationId:t,applicationSecret:r})}_getProvider(e){try{return new PocketProvider(e,this.applicationId,this.applicationSecret)}catch(e){}return super._getProvider(e)}static getRequest(e,t,r){if(t==null){t=defaultApplicationId}const n=new FetchRequest(`https://${getHost(e.name)}/v1/lb/${t}`);n.allowGzip=true;if(r){n.setCredentials("",r)}if(t===defaultApplicationId){n.retryFunc=async(e,t,r)=>{showThrottleMessage("PocketProvider");return true}}return n}isCommunityResource(){return this.applicationId===defaultApplicationId}}const IpcSocketProvider=undefined;class BaseWallet extends AbstractSigner{address;#Dt;constructor(e,t){super(t);assertArgument(e&&typeof e.sign==="function","invalid private key","privateKey","[ REDACTED ]");this.#Dt=e;const r=computeAddress(this.signingKey.publicKey);defineProperties(this,{address:r})}get signingKey(){return this.#Dt}get privateKey(){return this.signingKey.privateKey}async getAddress(){return this.address}connect(e){return new BaseWallet(this.#Dt,e)}async signTransaction(e){const{to:t,from:r}=await resolveProperties({to:e.to?resolveAddress(e.to,this.provider):undefined,from:e.from?resolveAddress(e.from,this.provider):undefined});if(t!=null){e.to=t}if(r!=null){e.from=r}if(e.from!=null){assertArgument(getAddress(e.from)===this.address,"transaction from address mismatch","tx.from",e.from);delete e.from}const n=Transaction$2.from(e);n.signature=this.signingKey.sign(n.unsignedHash);return n.serialized}async signMessage(e){return this.signMessageSync(e)}signMessageSync(e){return this.signingKey.sign(hashMessage(e)).serialized}async signTypedData(e,t,r){const n=await TypedDataEncoder.resolveNames(e,t,r,(async e=>{assert$m(this.provider!=null,"cannot resolve ENS names without a provider","UNSUPPORTED_OPERATION",{operation:"resolveName",info:{name:e}});const t=await this.provider.resolveName(e);assert$m(t!=null,"unconfigured ENS name","UNCONFIGURED_NAME",{value:e});return t}));return this.signingKey.sign(TypedDataEncoder.hash(n.domain,t,n.value)).serialized}}const subsChrs=" !#$%&'()*+,-./<=>?@[]^_`{|}~";const Word=/^[a-z]*$/i;function unfold(e,t){let r=97;return e.reduce(((e,n)=>{if(n===t){r++}else if(n.match(Word)){e.push(String.fromCharCode(r)+n)}else{r=97;e.push(n)}return e}),[])}function decode$c(e,t){for(let r=subsChrs.length-1;r>=0;r--){e=e.split(subsChrs[r]).join(t.substring(2*r,2*r+2))}const r=[];const n=e.replace(/(:|([0-9])|([A-Z][a-z]*))/g,((e,t,n,i)=>{if(n){for(let e=parseInt(n);e>=0;e--){r.push(";")}}else{r.push(t.toLowerCase())}return""}));if(n){throw new Error(`leftovers: ${JSON.stringify(n)}`)}return unfold(unfold(r,";"),":")}function decodeOwl(e){assertArgument(e[0]==="0","unsupported auwl data","data",e);return decode$c(e.substring(1+2*subsChrs.length),e.substring(1,1+2*subsChrs.length))}class Wordlist{locale;constructor(e){defineProperties(this,{locale:e})}split(e){return e.toLowerCase().split(/\s+/g)}join(e){return e.join(" ")}}class WordlistOwl extends Wordlist{#O;#Mt;constructor(e,t,r){super(e);this.#O=t;this.#Mt=r;this.#Ut=null}get _data(){return this.#O}_decodeWords(){return decodeOwl(this.#O)}#Ut;#Lt(){if(this.#Ut==null){const e=this._decodeWords();const t=id(e.join("\n")+"\n");if(t!==this.#Mt){throw new Error(`BIP39 Wordlist for ${this.locale} FAILED`)}this.#Ut=e}return this.#Ut}getWord(e){const t=this.#Lt();assertArgument(e>=0&&e<t.length,`invalid word index: ${e}`,"index",e);return t[e]}getWordIndex(e){return this.#Lt().indexOf(e)}}const words="0erleonalorenseinceregesticitStanvetearctssi#ch2Athck&tneLl0And#Il.yLeOutO=S|S%b/ra@SurdU'0Ce[Cid|CountCu'Hie=IdOu,-Qui*Ro[TT]T%T*[Tu$0AptDD-tD*[Ju,M.UltV<)Vi)0Rob-0FairF%dRaid0A(EEntRee0Ead0MRRp%tS!_rmBumCoholErtI&LLeyLowMo,O}PhaReadySoT Ways0A>urAz(gOngOuntU'd0Aly,Ch%Ci|G G!GryIm$K!Noun)Nu$O` Sw T&naTiqueXietyY1ArtOlogyPe?P!Pro=Ril1ChCt-EaEnaGueMMedM%MyOundR<+Re,Ri=RowTTefa@Ti,Tw%k0KPe@SaultSetSi,SumeThma0H!>OmTa{T&dT.udeTra@0Ct]D.Gu,NtTh%ToTumn0Era+OcadoOid0AkeA*AyEsomeFulKw?d0Is:ByChel%C#D+GL<)Lc#y~MbooN<aNn RRelyRga(R*lSeS-SketTt!3A^AnAutyCau'ComeEfF%eG(Ha=H(dLie=LowLtN^Nef./TrayTt Twe&Y#d3Cyc!DKeNdOlogyRdR`Tt _{AdeAmeAnketA,EakE[IndOodO[omOu'UeUrUsh_rdAtDyIlMbNeNusOkO,Rd R(gRrowSsTtomUn)XY_{etA(AndA[A=EadEezeI{Id+IefIghtIngIskOccoliOk&OnzeOomO` OwnUsh2Bb!DdyD+tFf$oIldLbLkL!tNd!Nk Rd&Rg R,SS(e[SyTt Y Zz:Bba+B(B!CtusGeKe~LmM aMpNN$N)lNdyNn#NoeNvasNy#Pab!P.$Pta(RRb#RdRgoRpetRryRtSeShS(o/!Su$TT$ogT^Teg%yTt!UghtU'Ut]Ve3Il(gL yM|NsusNturyRe$Rta(_irAlkAmp]An+AosApt Ar+A'AtEapE{Ee'EfErryE,I{&IefIldIm}yOi)Oo'R#-U{!UnkUrn0G?Nnam#Rc!Tiz&TyVil_imApArifyAwAyE<ErkEv I{I|IffImbIn-IpO{OgO'O`OudOwnUbUmpU, Ut^_^A,C#utDeFfeeIlInL!@L%LumnMb(eMeMf%tM-Mm#Mp<yNc tNdu@NfirmNg*[N}@Nsid NtrolNv()OkOlPp PyR$ReRnR*@/Tt#U^UntryUp!Ur'Us(V Yo>_{Ad!AftAmA}AshAt AwlAzyEamEd.EekEwI{etImeIspIt-OpO[Ou^OwdUci$UelUi'Umb!Un^UshYY,$2BeLtu*PPbo?dRiousRr|Rta(R=Sh]/omTe3C!:DMa+MpN)Ng R(gShUght WnY3AlBa>BrisCadeCemb CideCl(eC%a>C*a'ErF&'F(eFyG*eLayLiv M<dMi'Ni$Nti,NyP?tP&dPos.P`PutyRi=ScribeS tSignSkSpair/royTailTe@VelopVi)Vo>3AgramAlAm#dAryCeE'lEtFf G.$Gn.yLemmaNn NosaurRe@RtSag*eScov Sea'ShSmi[S%d Splay/<)V tVideV%)Zzy5Ct%Cum|G~Lph(Ma(Na>NkeyN%OrSeUb!Ve_ftAg#AmaA,-AwEamE[IftIllInkIpI=OpUmY2CkMbNeR(g/T^Ty1Arf1Nam-:G G!RlyRnR`Sily/Sy1HoOlogyOnomy0GeItUca>1F%t0G1GhtTh 2BowD E@r-Eg<tEm|Eph<tEvat%I>Se0B?kBodyBra)Er+Ot]PloyPow Pty0Ab!A@DD![D%'EmyErgyF%)Ga+G(eH<)JoyLi,OughR-hRollSu*T Ti*TryVelope1Isode0U$Uip0AA'OdeOs]R%Upt0CapeSayS&)Ta>0Ern$H-s1Id&)IlOkeOl=1A@Amp!Ce[Ch<+C.eCludeCu'Ecu>Erci'Hau,Hib.I!I,ItOt-P<dPe@Pi*Pla(Po'P*[T&dTra0EEbrow:Br-CeCultyDeIntI`~L'MeMilyMousNNcyNtasyRmSh]TT$Th TigueUltV%.e3Atu*Bru?yD $EEdElMa!N)/iv$T^V W3B Ct]EldGu*LeLmLt N$NdNeNg NishReRmR,Sc$ShTT}[X_gAmeAshAtAv%EeIghtIpOatO{O%Ow UidUshY_mCusGIlLd~owOdOtR)Re,R+tRkRtu}RumRw?dSsil/ UndX_gi!AmeEqu|EshI&dIn+OgOntO,OwnOz&U.2ElNNnyRna)RyTu*:D+tInLaxy~ yMePRa+Rba+Rd&Rl-Rm|SSpTeTh U+Ze3N $NiusN*Nt!Nu(e/u*2O,0AntFtGg!Ng RaffeRlVe_dAn)A*A[IdeImp'ObeOomOryO=OwUe_tDde[LdOdO'RillaSpelSsipV nWn_bA)A(AntApeA[Av.yEatE&IdIefItOc yOupOwUnt_rdE[IdeIltIt?N3M:B.IrLfMm M, NdPpyRb%RdRshR=,TVeWkZ?d3AdAl`ArtAvyD+hogIght~oLmetLpNRo3Dd&Gh~NtPRe/%y5BbyCkeyLdLeLiday~owMeNeyOdPeRnRr%R'Sp.$/TelUrV 5BGeM<Mb!M%Nd*dNgryNtRd!RryRtSb<d3Brid:1EOn0EaEntifyLe2N%e4LLeg$L}[0A+Ita>M&'Mu}Pa@Po'Pro=Pul'0ChCludeComeC*a'DexD-a>Do%Du,ryF<tFl-tF%mHa!H .Iti$Je@JuryMa>N Noc|PutQuiryS<eSe@SideSpi*/$lTa@T e,ToVe,V.eVol=3On0L<dOla>Sue0Em1Ory:CketGu?RZz3AlousAns~yWel9BInKeUr}yY5D+I)MpNg!Ni%Nk/:Ng?oo3EnEpT^upY3CkDD}yNdNgdomSsTT^&TeTt&Wi4EeIfeO{Ow:BBelB%Dd DyKeMpNgua+PtopR+T T(UghUndryVaWWnWsu.Y Zy3Ad AfArnA=Ctu*FtGG$G&dIsu*M#NdNg`NsOp?dSs#Tt Vel3ArB tyBr?yC&'FeFtGhtKeMbM.NkOnQuid/Tt!VeZ?d5AdAnB, C$CkG-NelyNgOpTt yUdUn+VeY$5CkyGga+Mb N?N^Xury3R-s:Ch(eDG-G}tIdIlInJ%KeMm$NNa+Nda>NgoNs]Nu$P!Rb!R^Rg(R(eRketRria+SkSs/ T^T i$ThTrixTt XimumZe3AdowAnAsu*AtCh<-D$DiaLodyLtMb M%yNt]NuRcyR+R.RryShSsa+T$Thod3Dd!DnightLk~]M-NdNimumN%Nu>Rac!Rr%S ySs/akeXXedXtu*5Bi!DelDifyMM|N.%NkeyN, N`OnR$ReRn(gSqu.oTh T]T%Unta(U'VeVie5ChFf(LeLtiplySc!SeumShroomS-/Tu$3Self/ yTh:I=MePk(Rrow/yT]Tu*3ArCkEdGati=G!@I` PhewR=/TTw%kUtr$V WsXt3CeGht5B!I'M(eeOd!Rm$R`SeTab!TeTh(gTi)VelW5C!?Mb R'T:K0EyJe@Li+Scu*S =Ta(Vious0CurE<Tob 0Or1FF Fi)T&2L1Ay0DI=Ymp-0It0CeEI#L(eLy1EnEraIn]Po'T]1An+B.Ch?dD D(?yG<I|Ig($Ph<0Tr-h0H 0Tdo%T TputTside0AlEnEr0NN 0Yg&0/ 0O}:CtDd!GeIrLa)LmNdaNelN-N` P RadeR|RkRrotRtySsT^ThTi|TrolTt nU'VeYm|3A)AnutArAs<tL-<NN$tyNcilOp!Pp Rfe@Rm.Rs#T2O}OtoRa'Ys-$0AnoCn-Ctu*E)GGe#~LotNkO} Pe/olT^Zza_)A}tA,-A>AyEa'Ed+U{UgUn+2EmEtIntL?LeLi)NdNyOlPul?Rt]S.]Ssib!/TatoTt yV tyWd W _@i)Ai'Ed-tEf Epa*Es|EttyEv|I)IdeIm?yIntI%.yIs#Iva>IzeOb!mO)[Odu)Of.OgramOje@Omo>OofOp tyOsp O>@OudOvide2Bl-Dd(g~LpL'Mpk(N^PilPpyR^a'R.yRpo'R'ShTZz!3Ramid:99Al.yAntumArt E,]I{ItIzO>:Bb.Cco#CeCkD?DioIlInI'~yMpN^NdomN+PidReTeTh V&WZ%3AdyAlAs#BelBuildC$lCei=CipeC%dCyc!Du)F!@F%mFu'G]G*tGul?Je@LaxLea'LiefLyMa(Memb M(dMo=Nd NewNtOp&PairPeatPla)P%tQui*ScueSemb!Si,Sour)Sp#'SultTi*T*atTurnUn]Ve$ViewW?d2Y`m0BBb#CeChDeD+F!GhtGidNgOtPp!SkTu$V$V 5AdA,BotBu,CketM<)OfOkieOmSeTa>UghUndU>Y$5Bb DeGLeNNwayR$:DDd!D}[FeIlLadLm#L#LtLu>MeMp!NdTisfyToshiU)Usa+VeY1A!AnA*Att E}HemeHoolI&)I[%sOrp]OutRapRe&RiptRub1AAr^As#AtC#dC*tCt]Cur.yEdEkGm|Le@~M(?Ni%N'Nt&)RiesRvi)Ss]Tt!TupV&_dowAftAllowA*EdEllEriffIeldIftI}IpIv O{OeOotOpOrtOuld O=RimpRugUff!Y0Bl(gCkDeE+GhtGnL|Lk~yLv Mil?Mp!N)NgR&/ Tua>XZe1A>Et^IIllInIrtUll0AbAmEepEnd I)IdeIghtImOg<OtOwUsh0AllArtI!OkeOo`0A{AkeApIffOw0ApCc Ci$CkDaFtL?Ldi LidLut]L=Me#eNgOnRryRtUlUndUpUr)U`0A)A*Ati$AwnEakEci$EedEllEndH eI)Id IkeInIr.L.OilOns%O#OrtOtRayReadR(gY0Ua*UeezeUir*l_b!AdiumAffA+AirsAmpAndArtA>AyEakEelEmEpE*oI{IllIngO{Oma^O}OolOryO=Ra>gyReetRikeR#gRugg!Ud|UffUmb!Y!0Bje@Bm.BwayC)[ChDd&Ff G?G+,ItMm NNnyN'tP PplyP*meReRfa)R+Rpri'RroundR=ySpe@/a(1AllowAmpApArmE?EetIftImIngIt^Ord1MbolMptomRup/em:B!Ck!GIlL|LkNkPeR+tSk/eTtooXi3A^Am~NN<tNnisNtRm/Xt_nkAtEmeEnE%yE*EyIngIsOughtReeRi=RowUmbUnd 0CketDeG LtMb MeNyPRedSsueT!5A,BaccoDayDdl EGe` I!tK&MatoM%rowNeNgueNightOlO`PP-Pp!R^RnadoRtoi'SsT$Uri,W?dW WnY_{AdeAff-Ag-A(Ansf ApAshA=lAyEatEeEndI$IbeI{Igg ImIpOphyOub!U{UeUlyUmpetU,U`Y2BeIt]Mb!NaN}lRkeyRnRt!1El=EntyI)InI,O1PeP-$:5Ly5B*lla0Ab!Awa*C!Cov D DoFairFoldHappyIf%mIqueItIv 'KnownLo{TilUsu$Veil1Da>GradeHoldOnP Set1B<Ge0A+EEdEfulE![U$0Il.y:C<tCuumGueLidL!yL=NNishP%Rious/Ult3H-!L=tNd%Ntu*NueRbRifyRs]RyS'lT <3Ab!Br<tCiousCt%yDeoEw~a+Nta+Ol(Rtu$RusSaS.Su$T$Vid5C$I)IdLc<oLumeTeYa+:GeG#ItLk~LnutNtRfa*RmRri%ShSp/eT VeY3Al`Ap#ArA'lA` BDd(gEk&dIrdLcome/T_!AtEatEelEnE*IpIsp 0DeD`FeLd~NNdowNeNgNkNn Nt ReSdomSeShT}[5LfM<Nd OdOlRdRkRldRryR`_pE{E,!I,I>Ong::Rd3Ar~ow9UUngU`:3BraRo9NeO";const checksum="0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60";let wordlist=null;class LangEn extends WordlistOwl{constructor(){super("en",words,checksum)}static wordlist(){if(wordlist==null){wordlist=new LangEn}return wordlist}}function getUpperMask(e){return(1<<e)-1<<8-e&255}function getLowerMask(e){return(1<<e)-1&255}function mnemonicToEntropy(e,t){assertNormalize("NFKD");if(t==null){t=LangEn.wordlist()}const r=t.split(e);assertArgument(r.length%3===0&&r.length>=12&&r.length<=24,"invalid mnemonic length","mnemonic","[ REDACTED ]");const n=new Uint8Array(Math.ceil(11*r.length/8));let i=0;for(let e=0;e<r.length;e++){let s=t.getWordIndex(r[e].normalize("NFKD"));assertArgument(s>=0,`invalid mnemonic word at index ${e}`,"mnemonic","[ REDACTED ]");for(let e=0;e<11;e++){if(s&1<<10-e){n[i>>3]|=1<<7-i%8}i++}}const s=32*r.length/3;const a=r.length/3;const o=getUpperMask(a);const f=getBytes(sha256$2(n.slice(0,s/8)))[0]&o;assertArgument(f===(n[n.length-1]&o),"invalid mnemonic checksum","mnemonic","[ REDACTED ]");return hexlify(n.slice(0,s/8))}function entropyToMnemonic(e,t){assertArgument(e.length%4===0&&e.length>=16&&e.length<=32,"invalid entropy size","entropy","[ REDACTED ]");if(t==null){t=LangEn.wordlist()}const r=[0];let n=11;for(let t=0;t<e.length;t++){if(n>8){r[r.length-1]<<=8;r[r.length-1]|=e[t];n-=8}else{r[r.length-1]<<=n;r[r.length-1]|=e[t]>>8-n;r.push(e[t]&getLowerMask(8-n));n+=3}}const i=e.length/4;const s=parseInt(sha256$2(e).substring(2,4),16)&getUpperMask(i);r[r.length-1]<<=i;r[r.length-1]|=s>>8-i;return t.join(r.map((e=>t.getWord(e))))}const _guard$1={};class Mnemonic{phrase;password;wordlist;entropy;constructor(e,t,r,n,i){if(n==null){n=""}if(i==null){i=LangEn.wordlist()}assertPrivate(e,_guard$1,"Mnemonic");defineProperties(this,{phrase:r,password:n,wordlist:i,entropy:t})}computeSeed(){const e=toUtf8Bytes("mnemonic"+this.password,"NFKD");return pbkdf2(toUtf8Bytes(this.phrase,"NFKD"),e,2048,64,"sha512")}static fromPhrase(e,t,r){const n=mnemonicToEntropy(e,r);e=entropyToMnemonic(getBytes(n),r);return new Mnemonic(_guard$1,n,e,t,r)}static fromEntropy(e,t,r){const n=getBytes(e,"entropy");const i=entropyToMnemonic(n,r);return new Mnemonic(_guard$1,hexlify(n),i,t,r)}static entropyToPhrase(e,t){const r=getBytes(e,"entropy");return entropyToMnemonic(r,t)}static phraseToEntropy(e,t){return mnemonicToEntropy(e,t)}static isValidMnemonic(e,t){try{mnemonicToEntropy(e,t);return true}catch(e){}return false}}
/*! MIT License. Copyright 2015-2022 Richard Moore <me@ricmoo.com>. See LICENSE.txt. */var __classPrivateFieldGet$3=undefined&&undefined.__classPrivateFieldGet||function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t==="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)};var __classPrivateFieldSet$3=undefined&&undefined.__classPrivateFieldSet||function(e,t,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t==="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(e,r):i?i.value=r:t.set(e,r),r};var _AES_key,_AES_Kd,_AES_Ke;const numberOfRounds={16:10,24:12,32:14};const rcon=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145];const S=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22];const Si=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125];const T1=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986];const T2=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766];const T3=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126];const T4=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436];const T5=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890];const T6=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935];const T7=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600];const T8=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480];const U1=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795];const U2=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855];const U3=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150];const U4=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function convertToInt32(e){const t=[];for(let r=0;r<e.length;r+=4){t.push(e[r]<<24|e[r+1]<<16|e[r+2]<<8|e[r+3])}return t}class AES$1{get key(){return __classPrivateFieldGet$3(this,_AES_key,"f").slice()}constructor(e){_AES_key.set(this,void 0);_AES_Kd.set(this,void 0);_AES_Ke.set(this,void 0);if(!(this instanceof AES$1)){throw Error("AES must be instanitated with `new`")}__classPrivateFieldSet$3(this,_AES_key,new Uint8Array(e),"f");const t=numberOfRounds[this.key.length];if(t==null){throw new TypeError("invalid key size (must be 16, 24 or 32 bytes)")}__classPrivateFieldSet$3(this,_AES_Ke,[],"f");__classPrivateFieldSet$3(this,_AES_Kd,[],"f");for(let e=0;e<=t;e++){__classPrivateFieldGet$3(this,_AES_Ke,"f").push([0,0,0,0]);__classPrivateFieldGet$3(this,_AES_Kd,"f").push([0,0,0,0])}const r=(t+1)*4;const n=this.key.length/4;const i=convertToInt32(this.key);let s;for(let e=0;e<n;e++){s=e>>2;__classPrivateFieldGet$3(this,_AES_Ke,"f")[s][e%4]=i[e];__classPrivateFieldGet$3(this,_AES_Kd,"f")[t-s][e%4]=i[e]}let a=0;let o=n,f;while(o<r){f=i[n-1];i[0]^=S[f>>16&255]<<24^S[f>>8&255]<<16^S[f&255]<<8^S[f>>24&255]^rcon[a]<<24;a+=1;if(n!=8){for(let e=1;e<n;e++){i[e]^=i[e-1]}}else{for(let e=1;e<n/2;e++){i[e]^=i[e-1]}f=i[n/2-1];i[n/2]^=S[f&255]^S[f>>8&255]<<8^S[f>>16&255]<<16^S[f>>24&255]<<24;for(let e=n/2+1;e<n;e++){i[e]^=i[e-1]}}let e=0,s,c;while(e<n&&o<r){s=o>>2;c=o%4;__classPrivateFieldGet$3(this,_AES_Ke,"f")[s][c]=i[e];__classPrivateFieldGet$3(this,_AES_Kd,"f")[t-s][c]=i[e++];o++}}for(let e=1;e<t;e++){for(let t=0;t<4;t++){f=__classPrivateFieldGet$3(this,_AES_Kd,"f")[e][t];__classPrivateFieldGet$3(this,_AES_Kd,"f")[e][t]=U1[f>>24&255]^U2[f>>16&255]^U3[f>>8&255]^U4[f&255]}}}encrypt(e){if(e.length!=16){throw new TypeError("invalid plaintext size (must be 16 bytes)")}const t=__classPrivateFieldGet$3(this,_AES_Ke,"f").length-1;const r=[0,0,0,0];let n=convertToInt32(e);for(let e=0;e<4;e++){n[e]^=__classPrivateFieldGet$3(this,_AES_Ke,"f")[0][e]}for(let e=1;e<t;e++){for(let t=0;t<4;t++){r[t]=T1[n[t]>>24&255]^T2[n[(t+1)%4]>>16&255]^T3[n[(t+2)%4]>>8&255]^T4[n[(t+3)%4]&255]^__classPrivateFieldGet$3(this,_AES_Ke,"f")[e][t]}n=r.slice()}const i=new Uint8Array(16);let s=0;for(let e=0;e<4;e++){s=__classPrivateFieldGet$3(this,_AES_Ke,"f")[t][e];i[4*e]=(S[n[e]>>24&255]^s>>24)&255;i[4*e+1]=(S[n[(e+1)%4]>>16&255]^s>>16)&255;i[4*e+2]=(S[n[(e+2)%4]>>8&255]^s>>8)&255;i[4*e+3]=(S[n[(e+3)%4]&255]^s)&255}return i}decrypt(e){if(e.length!=16){throw new TypeError("invalid ciphertext size (must be 16 bytes)")}const t=__classPrivateFieldGet$3(this,_AES_Kd,"f").length-1;const r=[0,0,0,0];let n=convertToInt32(e);for(let e=0;e<4;e++){n[e]^=__classPrivateFieldGet$3(this,_AES_Kd,"f")[0][e]}for(let e=1;e<t;e++){for(let t=0;t<4;t++){r[t]=T5[n[t]>>24&255]^T6[n[(t+3)%4]>>16&255]^T7[n[(t+2)%4]>>8&255]^T8[n[(t+1)%4]&255]^__classPrivateFieldGet$3(this,_AES_Kd,"f")[e][t]}n=r.slice()}const i=new Uint8Array(16);let s=0;for(let e=0;e<4;e++){s=__classPrivateFieldGet$3(this,_AES_Kd,"f")[t][e];i[4*e]=(Si[n[e]>>24&255]^s>>24)&255;i[4*e+1]=(Si[n[(e+3)%4]>>16&255]^s>>16)&255;i[4*e+2]=(Si[n[(e+2)%4]>>8&255]^s>>8)&255;i[4*e+3]=(Si[n[(e+1)%4]&255]^s)&255}return i}}_AES_key=new WeakMap,_AES_Kd=new WeakMap,_AES_Ke=new WeakMap;class ModeOfOperation{constructor(e,t,r){if(r&&!(this instanceof r)){throw new Error(`${e} must be instantiated with "new"`)}Object.defineProperties(this,{aes:{enumerable:true,value:new AES$1(t)},name:{enumerable:true,value:e}})}}var __classPrivateFieldSet$2=undefined&&undefined.__classPrivateFieldSet||function(e,t,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t==="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet$2=undefined&&undefined.__classPrivateFieldGet||function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t==="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)};var _CBC_iv,_CBC_lastBlock;class CBC extends ModeOfOperation{constructor(e,t){super("ECC",e,CBC);_CBC_iv.set(this,void 0);_CBC_lastBlock.set(this,void 0);if(t){if(t.length%16){throw new TypeError("invalid iv size (must be 16 bytes)")}__classPrivateFieldSet$2(this,_CBC_iv,new Uint8Array(t),"f")}else{__classPrivateFieldSet$2(this,_CBC_iv,new Uint8Array(16),"f")}__classPrivateFieldSet$2(this,_CBC_lastBlock,this.iv,"f")}get iv(){return new Uint8Array(__classPrivateFieldGet$2(this,_CBC_iv,"f"))}encrypt(e){if(e.length%16){throw new TypeError("invalid plaintext size (must be multiple of 16 bytes)")}const t=new Uint8Array(e.length);for(let r=0;r<e.length;r+=16){for(let t=0;t<16;t++){__classPrivateFieldGet$2(this,_CBC_lastBlock,"f")[t]^=e[r+t]}__classPrivateFieldSet$2(this,_CBC_lastBlock,this.aes.encrypt(__classPrivateFieldGet$2(this,_CBC_lastBlock,"f")),"f");t.set(__classPrivateFieldGet$2(this,_CBC_lastBlock,"f"),r)}return t}decrypt(e){if(e.length%16){throw new TypeError("invalid ciphertext size (must be multiple of 16 bytes)")}const t=new Uint8Array(e.length);for(let r=0;r<e.length;r+=16){const n=this.aes.decrypt(e.subarray(r,r+16));for(let i=0;i<16;i++){t[r+i]=n[i]^__classPrivateFieldGet$2(this,_CBC_lastBlock,"f")[i];__classPrivateFieldGet$2(this,_CBC_lastBlock,"f")[i]=e[r+i]}}return t}}_CBC_iv=new WeakMap,_CBC_lastBlock=new WeakMap;var __classPrivateFieldSet$1=undefined&&undefined.__classPrivateFieldSet||function(e,t,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t==="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet$1=undefined&&undefined.__classPrivateFieldGet||function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t==="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)};var _CTR_remaining,_CTR_remainingIndex,_CTR_counter;class CTR extends ModeOfOperation{constructor(e,t){super("CTR",e,CTR);_CTR_remaining.set(this,void 0);_CTR_remainingIndex.set(this,void 0);_CTR_counter.set(this,void 0);__classPrivateFieldSet$1(this,_CTR_counter,new Uint8Array(16),"f");__classPrivateFieldGet$1(this,_CTR_counter,"f").fill(0);__classPrivateFieldSet$1(this,_CTR_remaining,__classPrivateFieldGet$1(this,_CTR_counter,"f"),"f");__classPrivateFieldSet$1(this,_CTR_remainingIndex,16,"f");if(t==null){t=1}if(typeof t==="number"){this.setCounterValue(t)}else{this.setCounterBytes(t)}}get counter(){return new Uint8Array(__classPrivateFieldGet$1(this,_CTR_counter,"f"))}setCounterValue(e){if(!Number.isInteger(e)||e<0||e>Number.MAX_SAFE_INTEGER){throw new TypeError("invalid counter initial integer value")}for(let t=15;t>=0;--t){__classPrivateFieldGet$1(this,_CTR_counter,"f")[t]=e%256;e=Math.floor(e/256)}}setCounterBytes(e){if(e.length!==16){throw new TypeError("invalid counter initial Uint8Array value length")}__classPrivateFieldGet$1(this,_CTR_counter,"f").set(e)}increment(){for(let e=15;e>=0;e--){if(__classPrivateFieldGet$1(this,_CTR_counter,"f")[e]===255){__classPrivateFieldGet$1(this,_CTR_counter,"f")[e]=0}else{__classPrivateFieldGet$1(this,_CTR_counter,"f")[e]++;break}}}encrypt(e){var t,r;const n=new Uint8Array(e);for(let e=0;e<n.length;e++){if(__classPrivateFieldGet$1(this,_CTR_remainingIndex,"f")===16){__classPrivateFieldSet$1(this,_CTR_remaining,this.aes.encrypt(__classPrivateFieldGet$1(this,_CTR_counter,"f")),"f");__classPrivateFieldSet$1(this,_CTR_remainingIndex,0,"f");this.increment()}n[e]^=__classPrivateFieldGet$1(this,_CTR_remaining,"f")[(__classPrivateFieldSet$1(this,_CTR_remainingIndex,(r=__classPrivateFieldGet$1(this,_CTR_remainingIndex,"f"),t=r++,r),"f"),t)]}return n}decrypt(e){return this.encrypt(e)}}_CTR_remaining=new WeakMap,_CTR_remainingIndex=new WeakMap,_CTR_counter=new WeakMap;function pkcs7Strip(e){if(e.length<16){throw new TypeError("PKCS#7 invalid length")}const t=e[e.length-1];if(t>16){throw new TypeError("PKCS#7 padding byte out of range")}const r=e.length-t;for(let n=0;n<t;n++){if(e[r+n]!==t){throw new TypeError("PKCS#7 invalid padding byte")}}return new Uint8Array(e.subarray(0,r))}function looseArrayify(e){if(typeof e==="string"&&!e.startsWith("0x")){e="0x"+e}return getBytesCopy(e)}function zpad$1(e,t){e=String(e);while(e.length<t){e="0"+e}return e}function getPassword(e){if(typeof e==="string"){return toUtf8Bytes(e,"NFKC")}return getBytesCopy(e)}function spelunk(e,t){const r=t.match(/^([a-z0-9$_.-]*)(:([a-z]+))?(!)?$/i);assertArgument(r!=null,"invalid path","path",t);const n=r[1];const i=r[3];const s=r[4]==="!";let a=e;for(const e of n.toLowerCase().split(".")){if(Array.isArray(a)){if(!e.match(/^[0-9]+$/)){break}a=a[parseInt(e)]}else if(typeof a==="object"){let t=null;for(const r in a){if(r.toLowerCase()===e){t=a[r];break}}a=t}else{a=null}if(a==null){break}}assertArgument(!s||a!=null,"missing required value","path",n);if(i&&a!=null){if(i==="int"){if(typeof a==="string"&&a.match(/^-?[0-9]+$/)){return parseInt(a)}else if(Number.isSafeInteger(a)){return a}}if(i==="number"){if(typeof a==="string"&&a.match(/^-?[0-9.]*$/)){return parseFloat(a)}}if(i==="data"){if(typeof a==="string"){return looseArrayify(a)}}if(i==="array"&&Array.isArray(a)){return a}if(i===typeof a){return a}assertArgument(false,`wrong type found for ${i} `,"path",n)}return a}const defaultPath$1="m/44'/60'/0'/0/0";function isKeystoreJson(e){try{const t=JSON.parse(e);const r=t.version!=null?parseInt(t.version):0;if(r===3){return true}}catch(e){}return false}function decrypt(e,t,r){const n=spelunk(e,"crypto.cipher:string");if(n==="aes-128-ctr"){const n=spelunk(e,"crypto.cipherparams.iv:data!");const i=new CTR(t,n);return hexlify(i.decrypt(r))}assert$m(false,"unsupported cipher","UNSUPPORTED_OPERATION",{operation:"decrypt"})}function getAccount(e,t){const r=getBytes(t);const n=spelunk(e,"crypto.ciphertext:data!");const i=hexlify(keccak256(concat$a([r.slice(16,32),n]))).substring(2);assertArgument(i===spelunk(e,"crypto.mac:string!").toLowerCase(),"incorrect password","password","[ REDACTED ]");const s=decrypt(e,r.slice(0,16),n);const a=computeAddress(s);if(e.address){let t=e.address.toLowerCase();if(!t.startsWith("0x")){t="0x"+t}assertArgument(getAddress(t)===a,"keystore address/privateKey mismatch","address",e.address)}const o={address:a,privateKey:s};const f=spelunk(e,"x-ethers.version:string");if(f==="0.1"){const t=r.slice(32,64);const n=spelunk(e,"x-ethers.mnemonicCiphertext:data!");const i=spelunk(e,"x-ethers.mnemonicCounter:data!");const s=new CTR(t,i);o.mnemonic={path:spelunk(e,"x-ethers.path:string")||defaultPath$1,locale:spelunk(e,"x-ethers.locale:string")||"en",entropy:hexlify(getBytes(s.decrypt(n)))}}return o}function getDecryptKdfParams(e){const t=spelunk(e,"crypto.kdf:string");if(t&&typeof t==="string"){if(t.toLowerCase()==="scrypt"){const r=spelunk(e,"crypto.kdfparams.salt:data!");const n=spelunk(e,"crypto.kdfparams.n:int!");const i=spelunk(e,"crypto.kdfparams.r:int!");const s=spelunk(e,"crypto.kdfparams.p:int!");assertArgument(n>0&&(n&n-1)===0,"invalid kdf.N","kdf.N",n);assertArgument(i>0&&s>0,"invalid kdf","kdf",t);const a=spelunk(e,"crypto.kdfparams.dklen:int!");assertArgument(a===32,"invalid kdf.dklen","kdf.dflen",a);return{name:"scrypt",salt:r,N:n,r:i,p:s,dkLen:64}}else if(t.toLowerCase()==="pbkdf2"){const t=spelunk(e,"crypto.kdfparams.salt:data!");const r=spelunk(e,"crypto.kdfparams.prf:string!");const n=r.split("-").pop();assertArgument(n==="sha256"||n==="sha512","invalid kdf.pdf","kdf.pdf",r);const i=spelunk(e,"crypto.kdfparams.c:int!");const s=spelunk(e,"crypto.kdfparams.dklen:int!");assertArgument(s===32,"invalid kdf.dklen","kdf.dklen",s);return{name:"pbkdf2",salt:t,count:i,dkLen:s,algorithm:n}}}assertArgument(false,"unsupported key-derivation function","kdf",t)}function decryptKeystoreJsonSync(e,t){const r=JSON.parse(e);const n=getPassword(t);const i=getDecryptKdfParams(r);if(i.name==="pbkdf2"){const{salt:e,count:t,dkLen:s,algorithm:a}=i;const o=pbkdf2(n,e,t,s,a);return getAccount(r,o)}assert$m(i.name==="scrypt","cannot be reached","UNKNOWN_ERROR",{params:i});const{salt:s,N:a,r:o,p:f,dkLen:c}=i;const u=scryptSync(n,s,a,o,f,c);return getAccount(r,u)}function stall$1(e){return new Promise((t=>{setTimeout((()=>{t()}),e)}))}async function decryptKeystoreJson(e,t,r){const n=JSON.parse(e);const i=getPassword(t);const s=getDecryptKdfParams(n);if(s.name==="pbkdf2"){if(r){r(0);await stall$1(0)}const{salt:e,count:t,dkLen:a,algorithm:o}=s;const f=pbkdf2(i,e,t,a,o);if(r){r(1);await stall$1(0)}return getAccount(n,f)}assert$m(s.name==="scrypt","cannot be reached","UNKNOWN_ERROR",{params:s});const{salt:a,N:o,r:f,p:c,dkLen:u}=s;const l=await scrypt(i,a,o,f,c,u,r);return getAccount(n,l)}function getEncryptKdfParams(e){const t=e.salt!=null?getBytes(e.salt,"options.salt"):randomBytes(32);let r=1<<17,n=8,i=1;if(e.scrypt){if(e.scrypt.N){r=e.scrypt.N}if(e.scrypt.r){n=e.scrypt.r}if(e.scrypt.p){i=e.scrypt.p}}assertArgument(typeof r==="number"&&r>0&&Number.isSafeInteger(r)&&(BigInt(r)&BigInt(r-1))===BigInt(0),"invalid scrypt N parameter","options.N",r);assertArgument(typeof n==="number"&&n>0&&Number.isSafeInteger(n),"invalid scrypt r parameter","options.r",n);assertArgument(typeof i==="number"&&i>0&&Number.isSafeInteger(i),"invalid scrypt p parameter","options.p",i);return{name:"scrypt",dkLen:32,salt:t,N:r,r:n,p:i}}function _encryptKeystore(e,t,r,n){const i=getBytes(r.privateKey,"privateKey");const s=n.iv!=null?getBytes(n.iv,"options.iv"):randomBytes(16);assertArgument(s.length===16,"invalid options.iv length","options.iv",n.iv);const a=n.uuid!=null?getBytes(n.uuid,"options.uuid"):randomBytes(16);assertArgument(a.length===16,"invalid options.uuid length","options.uuid",n.iv);const o=e.slice(0,16);const f=e.slice(16,32);const c=new CTR(o,s);const u=getBytes(c.encrypt(i));const l=keccak256(concat$a([f,u]));const h={address:r.address.substring(2).toLowerCase(),id:uuidV4(a),version:3,Crypto:{cipher:"aes-128-ctr",cipherparams:{iv:hexlify(s).substring(2)},ciphertext:hexlify(u).substring(2),kdf:"scrypt",kdfparams:{salt:hexlify(t.salt).substring(2),n:t.N,dklen:32,p:t.p,r:t.r},mac:l.substring(2)}};if(r.mnemonic){const t=n.client!=null?n.client:`ethers/${version$3}`;const i=r.mnemonic.path||defaultPath$1;const s=r.mnemonic.locale||"en";const a=e.slice(32,64);const o=getBytes(r.mnemonic.entropy,"account.mnemonic.entropy");const f=randomBytes(16);const c=new CTR(a,f);const u=getBytes(c.encrypt(o));const l=new Date;const d=l.getUTCFullYear()+"-"+zpad$1(l.getUTCMonth()+1,2)+"-"+zpad$1(l.getUTCDate(),2)+"T"+zpad$1(l.getUTCHours(),2)+"-"+zpad$1(l.getUTCMinutes(),2)+"-"+zpad$1(l.getUTCSeconds(),2)+".0Z";const p="UTC--"+d+"--"+h.address;h["x-ethers"]={client:t,gethFilename:p,path:i,locale:s,mnemonicCounter:hexlify(f).substring(2),mnemonicCiphertext:hexlify(u).substring(2),version:"0.1"}}return JSON.stringify(h)}function encryptKeystoreJsonSync(e,t,r){if(r==null){r={}}const n=getPassword(t);const i=getEncryptKdfParams(r);const s=scryptSync(n,i.salt,i.N,i.r,i.p,64);return _encryptKeystore(getBytes(s),i,e,r)}async function encryptKeystoreJson(e,t,r){if(r==null){r={}}const n=getPassword(t);const i=getEncryptKdfParams(r);const s=await scrypt(n,i.salt,i.N,i.r,i.p,64,r.progressCallback);return _encryptKeystore(getBytes(s),i,e,r)}const defaultPath="m/44'/60'/0'/0/0";const MasterSecret=new Uint8Array([66,105,116,99,111,105,110,32,115,101,101,100]);const HardenedBit=2147483648;const N=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141");const Nibbles="0123456789abcdef";function zpad(e,t){let r="";while(e){r=Nibbles[e%16]+r;e=Math.trunc(e/16)}while(r.length<t*2){r="0"+r}return"0x"+r}function encodeBase58Check(e){const t=getBytes(e);const r=dataSlice(sha256$2(sha256$2(t)),0,4);const n=concat$a([t,r]);return encodeBase58(n)}const _guard={};function ser_I(e,t,r,n){const i=new Uint8Array(37);if(e&HardenedBit){assert$m(n!=null,"cannot derive child of neutered node","UNSUPPORTED_OPERATION",{operation:"deriveChild"});i.set(getBytes(n),1)}else{i.set(getBytes(r))}for(let t=24;t>=0;t-=8){i[33+(t>>3)]=e>>24-t&255}const s=getBytes(computeHmac("sha512",t,i));return{IL:s.slice(0,32),IR:s.slice(32)}}function derivePath(e,t){const r=t.split("/");assertArgument(r.length>0&&(r[0]==="m"||e.depth>0),"invalid path","path",t);if(r[0]==="m"){r.shift()}let n=e;for(let e=0;e<r.length;e++){const t=r[e];if(t.match(/^[0-9]+'$/)){const r=parseInt(t.substring(0,t.length-1));assertArgument(r<HardenedBit,"invalid path index",`path[${e}]`,t);n=n.deriveChild(HardenedBit+r)}else if(t.match(/^[0-9]+$/)){const r=parseInt(t);assertArgument(r<HardenedBit,"invalid path index",`path[${e}]`,t);n=n.deriveChild(r)}else{assertArgument(false,"invalid path component",`path[${e}]`,t)}}return n}class HDNodeWallet extends BaseWallet{publicKey;fingerprint;parentFingerprint;mnemonic;chainCode;path;index;depth;constructor(e,t,r,n,i,s,a,o,f){super(t,f);assertPrivate(e,_guard,"HDNodeWallet");defineProperties(this,{publicKey:t.compressedPublicKey});const c=dataSlice(ripemd160(sha256$2(this.publicKey)),0,4);defineProperties(this,{parentFingerprint:r,fingerprint:c,chainCode:n,path:i,index:s,depth:a});defineProperties(this,{mnemonic:o})}connect(e){return new HDNodeWallet(_guard,this.signingKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,this.mnemonic,e)}#Ft(){const e={address:this.address,privateKey:this.privateKey};const t=this.mnemonic;if(this.path&&t&&t.wordlist.locale==="en"&&t.password===""){e.mnemonic={path:this.path,locale:"en",entropy:t.entropy}}return e}async encrypt(e,t){return await encryptKeystoreJson(this.#Ft(),e,{progressCallback:t})}encryptSync(e){return encryptKeystoreJsonSync(this.#Ft(),e)}get extendedKey(){assert$m(this.depth<256,"Depth too deep","UNSUPPORTED_OPERATION",{operation:"extendedKey"});return encodeBase58Check(concat$a(["0x0488ADE4",zpad(this.depth,1),this.parentFingerprint,zpad(this.index,4),this.chainCode,concat$a(["0x00",this.privateKey])]))}hasPath(){return this.path!=null}neuter(){return new HDNodeVoidWallet(_guard,this.address,this.publicKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,this.provider)}deriveChild(e){const t=getNumber$1(e,"index");assertArgument(t<=4294967295,"invalid index","index",t);let r=this.path;if(r){r+="/"+(t&~HardenedBit);if(t&HardenedBit){r+="'"}}const{IR:n,IL:i}=ser_I(t,this.chainCode,this.publicKey,this.privateKey);const s=new SigningKey(toBeHex((toBigInt(i)+BigInt(this.privateKey))%N,32));return new HDNodeWallet(_guard,s,this.fingerprint,hexlify(n),r,t,this.depth+1,this.mnemonic,this.provider)}derivePath(e){return derivePath(this,e)}static#Ht(e,t){assertArgument(isBytesLike(e),"invalid seed","seed","[REDACTED]");const r=getBytes(e,"seed");assertArgument(r.length>=16&&r.length<=64,"invalid seed","seed","[REDACTED]");const n=getBytes(computeHmac("sha512",MasterSecret,r));const i=new SigningKey(hexlify(n.slice(0,32)));return new HDNodeWallet(_guard,i,"0x00000000",hexlify(n.slice(32)),"m",0,0,t,null)}static fromExtendedKey(e){const t=toBeArray(decodeBase58(e));assertArgument(t.length===82||encodeBase58Check(t.slice(0,78))===e,"invalid extended key","extendedKey","[ REDACTED ]");const r=t[4];const n=hexlify(t.slice(5,9));const i=parseInt(hexlify(t.slice(9,13)).substring(2),16);const s=hexlify(t.slice(13,45));const a=t.slice(45,78);switch(hexlify(t.slice(0,4))){case"0x0488b21e":case"0x043587cf":{const e=hexlify(a);return new HDNodeVoidWallet(_guard,computeAddress(e),e,n,s,null,i,r,null)}case"0x0488ade4":case"0x04358394 ":if(a[0]!==0){break}return new HDNodeWallet(_guard,new SigningKey(a.slice(1)),n,s,null,i,r,null,null)}assertArgument(false,"invalid extended key prefix","extendedKey","[ REDACTED ]")}static createRandom(e,t,r){if(e==null){e=""}if(t==null){t=defaultPath}if(r==null){r=LangEn.wordlist()}const n=Mnemonic.fromEntropy(randomBytes(16),e,r);return HDNodeWallet.#Ht(n.computeSeed(),n).derivePath(t)}static fromMnemonic(e,t){if(!t){t=defaultPath}return HDNodeWallet.#Ht(e.computeSeed(),e).derivePath(t)}static fromPhrase(e,t,r,n){if(t==null){t=""}if(r==null){r=defaultPath}if(n==null){n=LangEn.wordlist()}const i=Mnemonic.fromPhrase(e,t,n);return HDNodeWallet.#Ht(i.computeSeed(),i).derivePath(r)}static fromSeed(e){return HDNodeWallet.#Ht(e,null)}}class HDNodeVoidWallet extends VoidSigner{publicKey;fingerprint;parentFingerprint;chainCode;path;index;depth;constructor(e,t,r,n,i,s,a,o,f){super(t,f);assertPrivate(e,_guard,"HDNodeVoidWallet");defineProperties(this,{publicKey:r});const c=dataSlice(ripemd160(sha256$2(r)),0,4);defineProperties(this,{publicKey:r,fingerprint:c,parentFingerprint:n,chainCode:i,path:s,index:a,depth:o})}connect(e){return new HDNodeVoidWallet(_guard,this.address,this.publicKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,e)}get extendedKey(){assert$m(this.depth<256,"Depth too deep","UNSUPPORTED_OPERATION",{operation:"extendedKey"});return encodeBase58Check(concat$a(["0x0488B21E",zpad(this.depth,1),this.parentFingerprint,zpad(this.index,4),this.chainCode,this.publicKey]))}hasPath(){return this.path!=null}deriveChild(e){const t=getNumber$1(e,"index");assertArgument(t<=4294967295,"invalid index","index",t);let r=this.path;if(r){r+="/"+(t&~HardenedBit);if(t&HardenedBit){r+="'"}}const{IR:n,IL:i}=ser_I(t,this.chainCode,this.publicKey,null);const s=SigningKey.addPoints(i,this.publicKey,true);const a=computeAddress(s);return new HDNodeVoidWallet(_guard,a,s,this.fingerprint,hexlify(n),r,t,this.depth+1,this.provider)}derivePath(e){return derivePath(this,e)}}function getAccountPath(e){const t=getNumber$1(e,"index");assertArgument(t>=0&&t<HardenedBit,"invalid account index","index",t);return`m/44'/60'/${t}'/0/0`}function getIndexedAccountPath(e){const t=getNumber$1(e,"index");assertArgument(t>=0&&t<HardenedBit,"invalid account index","index",t);return`m/44'/60'/0'/0/${t}`}function isCrowdsaleJson(e){try{const t=JSON.parse(e);if(t.encseed){return true}}catch(e){}return false}function decryptCrowdsaleJson(e,t){const r=JSON.parse(e);const n=getPassword(t);const i=getAddress(spelunk(r,"ethaddr:string!"));const s=looseArrayify(spelunk(r,"encseed:string!"));assertArgument(s&&s.length%16===0,"invalid encseed","json",e);const a=getBytes(pbkdf2(n,n,2e3,32,"sha256")).slice(0,16);const o=s.slice(0,16);const f=s.slice(16);const c=new CBC(a,o);const u=pkcs7Strip(getBytes(c.decrypt(f)));let l="";for(let e=0;e<u.length;e++){l+=String.fromCharCode(u[e])}return{address:i,privateKey:id(l)}}function stall(e){return new Promise((t=>{setTimeout((()=>{t()}),e)}))}class Wallet extends BaseWallet{constructor(e,t){if(typeof e==="string"&&!e.startsWith("0x")){e="0x"+e}let r=typeof e==="string"?new SigningKey(e):e;super(r,t)}connect(e){return new Wallet(this.signingKey,e)}async encrypt(e,t){const r={address:this.address,privateKey:this.privateKey};return await encryptKeystoreJson(r,e,{progressCallback:t})}encryptSync(e){const t={address:this.address,privateKey:this.privateKey};return encryptKeystoreJsonSync(t,e)}static#Vt(e){assertArgument(e,"invalid JSON wallet","json","[ REDACTED ]");if("mnemonic"in e&&e.mnemonic&&e.mnemonic.locale==="en"){const t=Mnemonic.fromEntropy(e.mnemonic.entropy);const r=HDNodeWallet.fromMnemonic(t,e.mnemonic.path);if(r.address===e.address&&r.privateKey===e.privateKey){return r}console.log("WARNING: JSON mismatch address/privateKey != mnemonic; fallback onto private key")}const t=new Wallet(e.privateKey);assertArgument(t.address===e.address,"address/privateKey mismatch","json","[ REDACTED ]");return t}static async fromEncryptedJson(e,t,r){let n=null;if(isKeystoreJson(e)){n=await decryptKeystoreJson(e,t,r)}else if(isCrowdsaleJson(e)){if(r){r(0);await stall(0)}n=decryptCrowdsaleJson(e,t);if(r){r(1);await stall(0)}}return Wallet.#Vt(n)}static fromEncryptedJsonSync(e,t){let r=null;if(isKeystoreJson(e)){r=decryptKeystoreJsonSync(e,t)}else if(isCrowdsaleJson(e)){r=decryptCrowdsaleJson(e,t)}else{assertArgument(false,"invalid JSON wallet","json","[ REDACTED ]")}return Wallet.#Vt(r)}static createRandom(e){const t=HDNodeWallet.createRandom();if(e){return t.connect(e)}return t}static fromPhrase(e,t){const r=HDNodeWallet.fromPhrase(e);if(t){return r.connect(t)}return r}}const Base64=")!@#$%^&*(ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_";function decodeBits(e,t){const r=(1<<e)-1;const n=[];let i=0,s=0,a=0;for(let o=0;o<t.length;o++){i=i<<6|Base64.indexOf(t[o]);s+=6;while(s>=e){const t=i>>s-e;i&=(1<<s-e)-1;s-=e;if(t===0){a+=r}else{n.push(t+a);a=0}}}return n}function decodeOwlA(e,t){let r=decodeOwl(e).join(",");t.split(/,/g).forEach((e=>{const n=e.match(/^([a-z]*)([0-9]+)([0-9])(.*)$/);assertArgument(n!==null,"internal error parsing accents","accents",t);let i=0;const s=decodeBits(parseInt(n[3]),n[4]);const a=parseInt(n[2]);const o=new RegExp(`([${n[1]}])`,"g");r=r.replace(o,((e,t)=>{const r=--s[i];if(r===0){t=String.fromCharCode(t.charCodeAt(0),a);i++}return t}))}));return r.split(",")}class WordlistOwlA extends WordlistOwl{#Gt;constructor(e,t,r,n){super(e,t,n);this.#Gt=r}get _accent(){return this.#Gt}_decodeWords(){return decodeOwlA(this._data,this._accent)}}const wordlists={en:LangEn.wordlist()};const ethers=Object.freeze({__proto__:null,version:version$3,decodeBytes32String,encodeBytes32String,AbiCoder,ConstructorFragment,ErrorFragment,EventFragment,Fragment,FallbackFragment,FunctionFragment,NamedFragment,ParamType,StructFragment,checkResultErrors,ErrorDescription,Indexed,Interface,LogDescription,Result,TransactionDescription,Typed,getAddress,getIcapAddress,getCreateAddress,getCreate2Address,isAddressable,isAddress,resolveAddress,ZeroAddress,WeiPerEther,MaxUint256,MinInt256,MaxInt256,N:N$1,ZeroHash,EtherSymbol,MessagePrefix,BaseContract,Contract:Contract$1,ContractFactory,ContractEventPayload,ContractTransactionReceipt,ContractTransactionResponse,ContractUnknownEventPayload,EventLog,UndecodedEventLog,computeHmac,randomBytes,keccak256,ripemd160,sha256:sha256$2,sha512:sha512$1,pbkdf2,scrypt,scryptSync,lock,Signature:Signature$6,SigningKey,id,ensNormalize,isValidName,namehash,dnsEncode,hashMessage,verifyMessage,solidityPacked,solidityPackedKeccak256,solidityPackedSha256,TypedDataEncoder,verifyTypedData,getDefaultProvider,Block,FeeData,Log,TransactionReceipt,TransactionResponse,AbstractSigner,NonceManager,VoidSigner,AbstractProvider,FallbackProvider,JsonRpcApiProvider,JsonRpcProvider,JsonRpcSigner,BrowserProvider,AlchemyProvider,AnkrProvider,CloudflareProvider,EtherscanProvider,InfuraProvider,InfuraWebSocketProvider,PocketProvider,QuickNodeProvider,IpcSocketProvider,SocketProvider,WebSocketProvider,EnsResolver,Network,EnsPlugin,EtherscanPlugin,FeeDataNetworkPlugin,FetchUrlFeeDataNetworkPlugin,GasCostPlugin,NetworkPlugin,MulticoinProviderPlugin,SocketBlockSubscriber,SocketEventSubscriber,SocketPendingSubscriber,SocketSubscriber,UnmanagedSubscriber,copyRequest,showThrottleMessage,accessListify,computeAddress,recoverAddress,Transaction:Transaction$2,decodeBase58,encodeBase58,decodeBase64,encodeBase64,concat:concat$a,dataLength,dataSlice,getBytes,getBytesCopy,hexlify,isHexString,isBytesLike,stripZerosLeft,zeroPadBytes,zeroPadValue,defineProperties,resolveProperties,assert:assert$m,assertArgument,assertArgumentCount,assertNormalize,assertPrivate,makeError,isCallException,isError,EventPayload,FetchRequest,FetchResponse,FetchCancelSignal,FixedNumber,getBigInt,getNumber:getNumber$1,getUint,toBeArray,toBigInt,toBeHex,toNumber,toQuantity,fromTwos,toTwos,mask,formatEther,parseEther,formatUnits,parseUnits:parseUnits$1,toUtf8Bytes,toUtf8CodePoints,toUtf8String,Utf8ErrorFuncs,decodeRlp,encodeRlp,uuidV4,Mnemonic,BaseWallet,HDNodeWallet,HDNodeVoidWallet,Wallet,defaultPath,getAccountPath,getIndexedAccountPath,isCrowdsaleJson,isKeystoreJson,decryptCrowdsaleJson,decryptKeystoreJsonSync,decryptKeystoreJson,encryptKeystoreJson,encryptKeystoreJsonSync,Wordlist,LangEn,WordlistOwl,WordlistOwlA,wordlists});const lib_esm=Object.freeze({__proto__:null,ethers,version:version$3,decodeBytes32String,encodeBytes32String,AbiCoder,ConstructorFragment,ErrorFragment,EventFragment,Fragment,FallbackFragment,FunctionFragment,NamedFragment,ParamType,StructFragment,checkResultErrors,ErrorDescription,Indexed,Interface,LogDescription,Result,TransactionDescription,Typed,getAddress,getIcapAddress,getCreateAddress,getCreate2Address,isAddressable,isAddress,resolveAddress,ZeroAddress,WeiPerEther,MaxUint256,MinInt256,MaxInt256,N:N$1,ZeroHash,EtherSymbol,MessagePrefix,BaseContract,Contract:Contract$1,ContractFactory,ContractEventPayload,ContractTransactionReceipt,ContractTransactionResponse,ContractUnknownEventPayload,EventLog,UndecodedEventLog,computeHmac,randomBytes,keccak256,ripemd160,sha256:sha256$2,sha512:sha512$1,pbkdf2,scrypt,scryptSync,lock,Signature:Signature$6,SigningKey,id,ensNormalize,isValidName,namehash,dnsEncode,hashMessage,verifyMessage,solidityPacked,solidityPackedKeccak256,solidityPackedSha256,TypedDataEncoder,verifyTypedData,getDefaultProvider,Block,FeeData,Log,TransactionReceipt,TransactionResponse,AbstractSigner,NonceManager,VoidSigner,AbstractProvider,FallbackProvider,JsonRpcApiProvider,JsonRpcProvider,JsonRpcSigner,BrowserProvider,AlchemyProvider,AnkrProvider,CloudflareProvider,EtherscanProvider,InfuraProvider,InfuraWebSocketProvider,PocketProvider,QuickNodeProvider,IpcSocketProvider,SocketProvider,WebSocketProvider,EnsResolver,Network,EnsPlugin,EtherscanPlugin,FeeDataNetworkPlugin,FetchUrlFeeDataNetworkPlugin,GasCostPlugin,NetworkPlugin,MulticoinProviderPlugin,SocketBlockSubscriber,SocketEventSubscriber,SocketPendingSubscriber,SocketSubscriber,UnmanagedSubscriber,copyRequest,showThrottleMessage,accessListify,computeAddress,recoverAddress,Transaction:Transaction$2,decodeBase58,encodeBase58,decodeBase64,encodeBase64,concat:concat$a,dataLength,dataSlice,getBytes,getBytesCopy,hexlify,isHexString,isBytesLike,stripZerosLeft,zeroPadBytes,zeroPadValue,defineProperties,resolveProperties,assert:assert$m,assertArgument,assertArgumentCount,assertNormalize,assertPrivate,makeError,isCallException,isError,EventPayload,FetchRequest,FetchResponse,FetchCancelSignal,FixedNumber,getBigInt,getNumber:getNumber$1,getUint,toBeArray,toBigInt,toBeHex,toNumber,toQuantity,fromTwos,toTwos,mask,formatEther,parseEther,formatUnits,parseUnits:parseUnits$1,toUtf8Bytes,toUtf8CodePoints,toUtf8String,Utf8ErrorFuncs,decodeRlp,encodeRlp,uuidV4,Mnemonic,BaseWallet,HDNodeWallet,HDNodeVoidWallet,Wallet,defaultPath,getAccountPath,getIndexedAccountPath,isCrowdsaleJson,isKeystoreJson,decryptCrowdsaleJson,decryptKeystoreJsonSync,decryptKeystoreJson,encryptKeystoreJson,encryptKeystoreJsonSync,Wordlist,LangEn,WordlistOwl,WordlistOwlA,wordlists});var bignumber={exports:{}};(function(e){(function(t){var r,n=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,i=Math.ceil,s=Math.floor,a="[BigNumber Error] ",o=a+"Number primitive has more than 15 significant digits: ",f=1e14,c=14,u=9007199254740991,l=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],h=1e7,d=1e9;function p(e){var t,r,v,_=M.prototype={constructor:M,toString:null,valueOf:null},S=new M(1),$=20,T=4,I=-7,C=21,P=-1e7,R=1e7,N=false,k=1,O=0,x={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},B="0123456789abcdefghijklmnopqrstuvwxyz",D=true;function M(e,t){var i,a,f,l,h,d,p,y,m=this;if(!(m instanceof M))return new M(e,t);if(t==null){if(e&&e._isBigNumber===true){m.s=e.s;if(!e.c||e.e>R){m.c=m.e=null}else if(e.e<P){m.c=[m.e=0]}else{m.e=e.e;m.c=e.c.slice()}return}if((d=typeof e=="number")&&e*0==0){m.s=1/e<0?(e=-e,-1):1;if(e===~~e){for(l=0,h=e;h>=10;h/=10,l++);if(l>R){m.c=m.e=null}else{m.e=l;m.c=[e]}return}y=String(e)}else{if(!n.test(y=String(e)))return v(m,y,d);m.s=y.charCodeAt(0)==45?(y=y.slice(1),-1):1}if((l=y.indexOf("."))>-1)y=y.replace(".","");if((h=y.search(/e/i))>0){if(l<0)l=h;l+=+y.slice(h+1);y=y.substring(0,h)}else if(l<0){l=y.length}}else{b(t,2,B.length,"Base");if(t==10&&D){m=new M(e);return H(m,$+m.e+1,T)}y=String(e);if(d=typeof e=="number"){if(e*0!=0)return v(m,y,d,t);m.s=1/e<0?(y=y.slice(1),-1):1;if(M.DEBUG&&y.replace(/^0\.0*|\./,"").length>15){throw Error(o+e)}}else{m.s=y.charCodeAt(0)===45?(y=y.slice(1),-1):1}i=B.slice(0,t);l=h=0;for(p=y.length;h<p;h++){if(i.indexOf(a=y.charAt(h))<0){if(a=="."){if(h>l){l=p;continue}}else if(!f){if(y==y.toUpperCase()&&(y=y.toLowerCase())||y==y.toLowerCase()&&(y=y.toUpperCase())){f=true;h=-1;l=0;continue}}return v(m,String(e),d,t)}}d=false;y=r(y,t,10,m.s);if((l=y.indexOf("."))>-1)y=y.replace(".","");else l=y.length}for(h=0;y.charCodeAt(h)===48;h++);for(p=y.length;y.charCodeAt(--p)===48;);if(y=y.slice(h,++p)){p-=h;if(d&&M.DEBUG&&p>15&&(e>u||e!==s(e))){throw Error(o+m.s*e)}if((l=l-h-1)>R){m.c=m.e=null}else if(l<P){m.c=[m.e=0]}else{m.e=l;m.c=[];h=(l+1)%c;if(l<0)h+=c;if(h<p){if(h)m.c.push(+y.slice(0,h));for(p-=c;h<p;){m.c.push(+y.slice(h,h+=c))}h=c-(y=y.slice(h)).length}else{h-=p}for(;h--;y+="0");m.c.push(+y)}}else{m.c=[m.e=0]}}M.clone=p;M.ROUND_UP=0;M.ROUND_DOWN=1;M.ROUND_CEIL=2;M.ROUND_FLOOR=3;M.ROUND_HALF_UP=4;M.ROUND_HALF_DOWN=5;M.ROUND_HALF_EVEN=6;M.ROUND_HALF_CEIL=7;M.ROUND_HALF_FLOOR=8;M.EUCLID=9;M.config=M.set=function(e){var t,r;if(e!=null){if(typeof e=="object"){if(e.hasOwnProperty(t="DECIMAL_PLACES")){r=e[t];b(r,0,d,t);$=r}if(e.hasOwnProperty(t="ROUNDING_MODE")){r=e[t];b(r,0,8,t);T=r}if(e.hasOwnProperty(t="EXPONENTIAL_AT")){r=e[t];if(r&&r.pop){b(r[0],-d,0,t);b(r[1],0,d,t);I=r[0];C=r[1]}else{b(r,-d,d,t);I=-(C=r<0?-r:r)}}if(e.hasOwnProperty(t="RANGE")){r=e[t];if(r&&r.pop){b(r[0],-d,-1,t);b(r[1],1,d,t);P=r[0];R=r[1]}else{b(r,-d,d,t);if(r){P=-(R=r<0?-r:r)}else{throw Error(a+t+" cannot be zero: "+r)}}}if(e.hasOwnProperty(t="CRYPTO")){r=e[t];if(r===!!r){if(r){if(typeof crypto!="undefined"&&crypto&&(crypto.getRandomValues||crypto.randomBytes)){N=r}else{N=!r;throw Error(a+"crypto unavailable")}}else{N=r}}else{throw Error(a+t+" not true or false: "+r)}}if(e.hasOwnProperty(t="MODULO_MODE")){r=e[t];b(r,0,9,t);k=r}if(e.hasOwnProperty(t="POW_PRECISION")){r=e[t];b(r,0,d,t);O=r}if(e.hasOwnProperty(t="FORMAT")){r=e[t];if(typeof r=="object")x=r;else throw Error(a+t+" not an object: "+r)}if(e.hasOwnProperty(t="ALPHABET")){r=e[t];if(typeof r=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(r)){D=r.slice(0,10)=="0123456789";B=r}else{throw Error(a+t+" invalid: "+r)}}}else{throw Error(a+"Object expected: "+e)}}return{DECIMAL_PLACES:$,ROUNDING_MODE:T,EXPONENTIAL_AT:[I,C],RANGE:[P,R],CRYPTO:N,MODULO_MODE:k,POW_PRECISION:O,FORMAT:x,ALPHABET:B}};M.isBigNumber=function(e){if(!e||e._isBigNumber!==true)return false;if(!M.DEBUG)return true;var t,r,n=e.c,i=e.e,o=e.s;e:if({}.toString.call(n)=="[object Array]"){if((o===1||o===-1)&&i>=-d&&i<=d&&i===s(i)){if(n[0]===0){if(i===0&&n.length===1)return true;break e}t=(i+1)%c;if(t<1)t+=c;if(String(n[0]).length==t){for(t=0;t<n.length;t++){r=n[t];if(r<0||r>=f||r!==s(r))break e}if(r!==0)return true}}}else if(n===null&&i===null&&(o===null||o===1||o===-1)){return true}throw Error(a+"Invalid BigNumber: "+e)};M.maximum=M.max=function(){return L(arguments,_.lt)};M.minimum=M.min=function(){return L(arguments,_.gt)};M.random=function(){var e=9007199254740992;var t=Math.random()*e&2097151?function(){return s(Math.random()*e)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(e){var r,n,o,f,u,h=0,p=[],y=new M(S);if(e==null)e=$;else b(e,0,d);f=i(e/c);if(N){if(crypto.getRandomValues){r=crypto.getRandomValues(new Uint32Array(f*=2));for(;h<f;){u=r[h]*131072+(r[h+1]>>>11);if(u>=9e15){n=crypto.getRandomValues(new Uint32Array(2));r[h]=n[0];r[h+1]=n[1]}else{p.push(u%1e14);h+=2}}h=f/2}else if(crypto.randomBytes){r=crypto.randomBytes(f*=7);for(;h<f;){u=(r[h]&31)*281474976710656+r[h+1]*1099511627776+r[h+2]*4294967296+r[h+3]*16777216+(r[h+4]<<16)+(r[h+5]<<8)+r[h+6];if(u>=9e15){crypto.randomBytes(7).copy(r,h)}else{p.push(u%1e14);h+=7}}h=f/7}else{N=false;throw Error(a+"crypto unavailable")}}if(!N){for(;h<f;){u=t();if(u<9e15)p[h++]=u%1e14}}f=p[--h];e%=c;if(f&&e){u=l[c-e];p[h]=s(f/u)*u}for(;p[h]===0;p.pop(),h--);if(h<0){p=[o=0]}else{for(o=-1;p[0]===0;p.splice(0,1),o-=c);for(h=1,u=p[0];u>=10;u/=10,h++);if(h<c)o-=c-h}y.e=o;y.c=p;return y}}();M.sum=function(){var e=1,t=arguments,r=new M(t[0]);for(;e<t.length;)r=r.plus(t[e++]);return r};r=function(){var e="0123456789";function r(e,t,r,n){var i,s=[0],a,o=0,f=e.length;for(;o<f;){for(a=s.length;a--;s[a]*=t);s[0]+=n.indexOf(e.charAt(o++));for(i=0;i<s.length;i++){if(s[i]>r-1){if(s[i+1]==null)s[i+1]=0;s[i+1]+=s[i]/r|0;s[i]%=r}}}return s.reverse()}return function(n,i,s,a,o){var f,c,u,l,h,d,p,y,g=n.indexOf("."),b=$,A=T;if(g>=0){l=O;O=0;n=n.replace(".","");y=new M(i);d=y.pow(n.length-g);O=l;y.c=r(E(m(d.c),d.e,"0"),10,s,e);y.e=y.c.length}p=r(n,i,s,o?(f=B,e):(f=e,B));u=l=p.length;for(;p[--l]==0;p.pop());if(!p[0])return f.charAt(0);if(g<0){--u}else{d.c=p;d.e=u;d.s=a;d=t(d,y,b,A,s);p=d.c;h=d.r;u=d.e}c=u+b+1;g=p[c];l=s/2;h=h||c<0||p[c+1]!=null;h=A<4?(g!=null||h)&&(A==0||A==(d.s<0?3:2)):g>l||g==l&&(A==4||h||A==6&&p[c-1]&1||A==(d.s<0?8:7));if(c<1||!p[0]){n=h?E(f.charAt(1),-b,f.charAt(0)):f.charAt(0)}else{p.length=c;if(h){for(--s;++p[--c]>s;){p[c]=0;if(!c){++u;p=[1].concat(p)}}}for(l=p.length;!p[--l];);for(g=0,n="";g<=l;n+=f.charAt(p[g++]));n=E(n,u,f.charAt(0))}return n}}();t=function(){function e(e,t,r){var n,i,s,a,o=0,f=e.length,c=t%h,u=t/h|0;for(e=e.slice();f--;){s=e[f]%h;a=e[f]/h|0;n=u*s+a*c;i=c*s+n%h*h+o;o=(i/r|0)+(n/h|0)+u*a;e[f]=i%r}if(o)e=[o].concat(e);return e}function t(e,t,r,n){var i,s;if(r!=n){s=r>n?1:-1}else{for(i=s=0;i<r;i++){if(e[i]!=t[i]){s=e[i]>t[i]?1:-1;break}}}return s}function r(e,t,r,n){var i=0;for(;r--;){e[r]-=i;i=e[r]<t[r]?1:0;e[r]=i*n+e[r]-t[r]}for(;!e[0]&&e.length>1;e.splice(0,1));}return function(n,i,a,o,u){var l,h,d,p,m,g,b,A,w,E,v,_,S,$,T,I,C,P=n.s==i.s?1:-1,R=n.c,N=i.c;if(!R||!R[0]||!N||!N[0]){return new M(!n.s||!i.s||(R?N&&R[0]==N[0]:!N)?NaN:R&&R[0]==0||!N?P*0:P/0)}A=new M(P);w=A.c=[];h=n.e-i.e;P=a+h+1;if(!u){u=f;h=y(n.e/c)-y(i.e/c);P=P/c|0}for(d=0;N[d]==(R[d]||0);d++);if(N[d]>(R[d]||0))h--;if(P<0){w.push(1);p=true}else{$=R.length;I=N.length;d=0;P+=2;m=s(u/(N[0]+1));if(m>1){N=e(N,m,u);R=e(R,m,u);I=N.length;$=R.length}S=I;E=R.slice(0,I);v=E.length;for(;v<I;E[v++]=0);C=N.slice();C=[0].concat(C);T=N[0];if(N[1]>=u/2)T++;do{m=0;l=t(N,E,I,v);if(l<0){_=E[0];if(I!=v)_=_*u+(E[1]||0);m=s(_/T);if(m>1){if(m>=u)m=u-1;g=e(N,m,u);b=g.length;v=E.length;while(t(g,E,b,v)==1){m--;r(g,I<b?C:N,b,u);b=g.length;l=1}}else{if(m==0){l=m=1}g=N.slice();b=g.length}if(b<v)g=[0].concat(g);r(E,g,v,u);v=E.length;if(l==-1){while(t(N,E,I,v)<1){m++;r(E,I<v?C:N,v,u);v=E.length}}}else if(l===0){m++;E=[0]}w[d++]=m;if(E[0]){E[v++]=R[S]||0}else{E=[R[S]];v=1}}while((S++<$||E[0]!=null)&&P--);p=E[0]!=null;if(!w[0])w.splice(0,1)}if(u==f){for(d=1,P=w[0];P>=10;P/=10,d++);H(A,a+(A.e=d+h*c-1)+1,o,p)}else{A.e=h;A.r=+p}return A}}();function U(e,t,r,n){var i,s,a,o,f;if(r==null)r=T;else b(r,0,8);if(!e.c)return e.toString();i=e.c[0];a=e.e;if(t==null){f=m(e.c);f=n==1||n==2&&(a<=I||a>=C)?w(f,a):E(f,a,"0")}else{e=H(new M(e),t,r);s=e.e;f=m(e.c);o=f.length;if(n==1||n==2&&(t<=s||s<=I)){for(;o<t;f+="0",o++);f=w(f,s)}else{t-=a;f=E(f,s,"0");if(s+1>o){if(--t>0)for(f+=".";t--;f+="0");}else{t+=s-o;if(t>0){if(s+1==o)f+=".";for(;t--;f+="0");}}}}return e.s<0&&i?"-"+f:f}function L(e,t){var r,n=1,i=new M(e[0]);for(;n<e.length;n++){r=new M(e[n]);if(!r.s){i=r;break}else if(t.call(i,r)){i=r}}return i}function F(e,t,r){var n=1,i=t.length;for(;!t[--i];t.pop());for(i=t[0];i>=10;i/=10,n++);if((r=n+r*c-1)>R){e.c=e.e=null}else if(r<P){e.c=[e.e=0]}else{e.e=r;e.c=t}return e}v=function(){var e=/^(-?)0([xbo])(?=\w[\w.]*$)/i,t=/^([^.]+)\.$/,r=/^\.([^.]+)$/,n=/^-?(Infinity|NaN)$/,i=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(s,o,f,c){var u,l=f?o:o.replace(i,"");if(n.test(l)){s.s=isNaN(l)?null:l<0?-1:1}else{if(!f){l=l.replace(e,(function(e,t,r){u=(r=r.toLowerCase())=="x"?16:r=="b"?2:8;return!c||c==u?t:e}));if(c){u=c;l=l.replace(t,"$1").replace(r,"0.$1")}if(o!=l)return new M(l,u)}if(M.DEBUG){throw Error(a+"Not a"+(c?" base "+c:"")+" number: "+o)}s.s=null}s.c=s.e=null}}();function H(e,t,r,n){var a,o,u,h,d,p,y,m=e.c,g=l;if(m){e:{for(a=1,h=m[0];h>=10;h/=10,a++);o=t-a;if(o<0){o+=c;u=t;d=m[p=0];y=d/g[a-u-1]%10|0}else{p=i((o+1)/c);if(p>=m.length){if(n){for(;m.length<=p;m.push(0));d=y=0;a=1;o%=c;u=o-c+1}else{break e}}else{d=h=m[p];for(a=1;h>=10;h/=10,a++);o%=c;u=o-c+a;y=u<0?0:d/g[a-u-1]%10|0}}n=n||t<0||m[p+1]!=null||(u<0?d:d%g[a-u-1]);n=r<4?(y||n)&&(r==0||r==(e.s<0?3:2)):y>5||y==5&&(r==4||n||r==6&&(o>0?u>0?d/g[a-u]:0:m[p-1])%10&1||r==(e.s<0?8:7));if(t<1||!m[0]){m.length=0;if(n){t-=e.e+1;m[0]=g[(c-t%c)%c];e.e=-t||0}else{m[0]=e.e=0}return e}if(o==0){m.length=p;h=1;p--}else{m.length=p+1;h=g[c-o];m[p]=u>0?s(d/g[a-u]%g[u])*h:0}if(n){for(;;){if(p==0){for(o=1,u=m[0];u>=10;u/=10,o++);u=m[0]+=h;for(h=1;u>=10;u/=10,h++);if(o!=h){e.e++;if(m[0]==f)m[0]=1}break}else{m[p]+=h;if(m[p]!=f)break;m[p--]=0;h=1}}}for(o=m.length;m[--o]===0;m.pop());}if(e.e>R){e.c=e.e=null}else if(e.e<P){e.c=[e.e=0]}}return e}function V(e){var t,r=e.e;if(r===null)return e.toString();t=m(e.c);t=r<=I||r>=C?w(t,r):E(t,r,"0");return e.s<0?"-"+t:t}_.absoluteValue=_.abs=function(){var e=new M(this);if(e.s<0)e.s=1;return e};_.comparedTo=function(e,t){return g(this,new M(e,t))};_.decimalPlaces=_.dp=function(e,t){var r,n,i,s=this;if(e!=null){b(e,0,d);if(t==null)t=T;else b(t,0,8);return H(new M(s),e+s.e+1,t)}if(!(r=s.c))return null;n=((i=r.length-1)-y(this.e/c))*c;if(i=r[i])for(;i%10==0;i/=10,n--);if(n<0)n=0;return n};_.dividedBy=_.div=function(e,r){return t(this,new M(e,r),$,T)};_.dividedToIntegerBy=_.idiv=function(e,r){return t(this,new M(e,r),0,1)};_.exponentiatedBy=_.pow=function(e,t){var r,n,o,f,u,l,h,d,p,y=this;e=new M(e);if(e.c&&!e.isInteger()){throw Error(a+"Exponent not an integer: "+V(e))}if(t!=null)t=new M(t);l=e.e>14;if(!y.c||!y.c[0]||y.c[0]==1&&!y.e&&y.c.length==1||!e.c||!e.c[0]){p=new M(Math.pow(+V(y),l?e.s*(2-A(e)):+V(e)));return t?p.mod(t):p}h=e.s<0;if(t){if(t.c?!t.c[0]:!t.s)return new M(NaN);n=!h&&y.isInteger()&&t.isInteger();if(n)y=y.mod(t)}else if(e.e>9&&(y.e>0||y.e<-1||(y.e==0?y.c[0]>1||l&&y.c[1]>=24e7:y.c[0]<8e13||l&&y.c[0]<=9999975e7))){f=y.s<0&&A(e)?-0:0;if(y.e>-1)f=1/f;return new M(h?1/f:f)}else if(O){f=i(O/c+2)}if(l){r=new M(.5);if(h)e.s=1;d=A(e)}else{o=Math.abs(+V(e));d=o%2}p=new M(S);for(;;){if(d){p=p.times(y);if(!p.c)break;if(f){if(p.c.length>f)p.c.length=f}else if(n){p=p.mod(t)}}if(o){o=s(o/2);if(o===0)break;d=o%2}else{e=e.times(r);H(e,e.e+1,1);if(e.e>14){d=A(e)}else{o=+V(e);if(o===0)break;d=o%2}}y=y.times(y);if(f){if(y.c&&y.c.length>f)y.c.length=f}else if(n){y=y.mod(t)}}if(n)return p;if(h)p=S.div(p);return t?p.mod(t):f?H(p,O,T,u):p};_.integerValue=function(e){var t=new M(this);if(e==null)e=T;else b(e,0,8);return H(t,t.e+1,e)};_.isEqualTo=_.eq=function(e,t){return g(this,new M(e,t))===0};_.isFinite=function(){return!!this.c};_.isGreaterThan=_.gt=function(e,t){return g(this,new M(e,t))>0};_.isGreaterThanOrEqualTo=_.gte=function(e,t){return(t=g(this,new M(e,t)))===1||t===0};_.isInteger=function(){return!!this.c&&y(this.e/c)>this.c.length-2};_.isLessThan=_.lt=function(e,t){return g(this,new M(e,t))<0};_.isLessThanOrEqualTo=_.lte=function(e,t){return(t=g(this,new M(e,t)))===-1||t===0};_.isNaN=function(){return!this.s};_.isNegative=function(){return this.s<0};_.isPositive=function(){return this.s>0};_.isZero=function(){return!!this.c&&this.c[0]==0};_.minus=function(e,t){var r,n,i,s,a=this,o=a.s;e=new M(e,t);t=e.s;if(!o||!t)return new M(NaN);if(o!=t){e.s=-t;return a.plus(e)}var u=a.e/c,l=e.e/c,h=a.c,d=e.c;if(!u||!l){if(!h||!d)return h?(e.s=-t,e):new M(d?a:NaN);if(!h[0]||!d[0]){return d[0]?(e.s=-t,e):new M(h[0]?a:T==3?-0:0)}}u=y(u);l=y(l);h=h.slice();if(o=u-l){if(s=o<0){o=-o;i=h}else{l=u;i=d}i.reverse();for(t=o;t--;i.push(0));i.reverse()}else{n=(s=(o=h.length)<(t=d.length))?o:t;for(o=t=0;t<n;t++){if(h[t]!=d[t]){s=h[t]<d[t];break}}}if(s){i=h;h=d;d=i;e.s=-e.s}t=(n=d.length)-(r=h.length);if(t>0)for(;t--;h[r++]=0);t=f-1;for(;n>o;){if(h[--n]<d[n]){for(r=n;r&&!h[--r];h[r]=t);--h[r];h[n]+=f}h[n]-=d[n]}for(;h[0]==0;h.splice(0,1),--l);if(!h[0]){e.s=T==3?-1:1;e.c=[e.e=0];return e}return F(e,h,l)};_.modulo=_.mod=function(e,r){var n,i,s=this;e=new M(e,r);if(!s.c||!e.s||e.c&&!e.c[0]){return new M(NaN)}else if(!e.c||s.c&&!s.c[0]){return new M(s)}if(k==9){i=e.s;e.s=1;n=t(s,e,0,3);e.s=i;n.s*=i}else{n=t(s,e,0,k)}e=s.minus(n.times(e));if(!e.c[0]&&k==1)e.s=s.s;return e};_.multipliedBy=_.times=function(e,t){var r,n,i,s,a,o,u,l,d,p,m,g,b,A,w,E=this,v=E.c,_=(e=new M(e,t)).c;if(!v||!_||!v[0]||!_[0]){if(!E.s||!e.s||v&&!v[0]&&!_||_&&!_[0]&&!v){e.c=e.e=e.s=null}else{e.s*=E.s;if(!v||!_){e.c=e.e=null}else{e.c=[0];e.e=0}}return e}n=y(E.e/c)+y(e.e/c);e.s*=E.s;u=v.length;p=_.length;if(u<p){b=v;v=_;_=b;i=u;u=p;p=i}for(i=u+p,b=[];i--;b.push(0));A=f;w=h;for(i=p;--i>=0;){r=0;m=_[i]%w;g=_[i]/w|0;for(a=u,s=i+a;s>i;){l=v[--a]%w;d=v[a]/w|0;o=g*l+d*m;l=m*l+o%w*w+b[s]+r;r=(l/A|0)+(o/w|0)+g*d;b[s--]=l%A}b[s]=r}if(r){++n}else{b.splice(0,1)}return F(e,b,n)};_.negated=function(){var e=new M(this);e.s=-e.s||null;return e};_.plus=function(e,t){var r,n=this,i=n.s;e=new M(e,t);t=e.s;if(!i||!t)return new M(NaN);if(i!=t){e.s=-t;return n.minus(e)}var s=n.e/c,a=e.e/c,o=n.c,u=e.c;if(!s||!a){if(!o||!u)return new M(i/0);if(!o[0]||!u[0])return u[0]?e:new M(o[0]?n:i*0)}s=y(s);a=y(a);o=o.slice();if(i=s-a){if(i>0){a=s;r=u}else{i=-i;r=o}r.reverse();for(;i--;r.push(0));r.reverse()}i=o.length;t=u.length;if(i-t<0){r=u;u=o;o=r;t=i}for(i=0;t;){i=(o[--t]=o[t]+u[t]+i)/f|0;o[t]=f===o[t]?0:o[t]%f}if(i){o=[i].concat(o);++a}return F(e,o,a)};_.precision=_.sd=function(e,t){var r,n,i,s=this;if(e!=null&&e!==!!e){b(e,1,d);if(t==null)t=T;else b(t,0,8);return H(new M(s),e,t)}if(!(r=s.c))return null;i=r.length-1;n=i*c+1;if(i=r[i]){for(;i%10==0;i/=10,n--);for(i=r[0];i>=10;i/=10,n++);}if(e&&s.e+1>n)n=s.e+1;return n};_.shiftedBy=function(e){b(e,-u,u);return this.times("1e"+e)};_.squareRoot=_.sqrt=function(){var e,r,n,i,s,a=this,o=a.c,f=a.s,c=a.e,u=$+4,l=new M("0.5");if(f!==1||!o||!o[0]){return new M(!f||f<0&&(!o||o[0])?NaN:o?a:1/0)}f=Math.sqrt(+V(a));if(f==0||f==1/0){r=m(o);if((r.length+c)%2==0)r+="0";f=Math.sqrt(+r);c=y((c+1)/2)-(c<0||c%2);if(f==1/0){r="5e"+c}else{r=f.toExponential();r=r.slice(0,r.indexOf("e")+1)+c}n=new M(r)}else{n=new M(f+"")}if(n.c[0]){c=n.e;f=c+u;if(f<3)f=0;for(;;){s=n;n=l.times(s.plus(t(a,s,u,1)));if(m(s.c).slice(0,f)===(r=m(n.c)).slice(0,f)){if(n.e<c)--f;r=r.slice(f-3,f+1);if(r=="9999"||!i&&r=="4999"){if(!i){H(s,s.e+$+2,0);if(s.times(s).eq(a)){n=s;break}}u+=4;f+=4;i=1}else{if(!+r||!+r.slice(1)&&r.charAt(0)=="5"){H(n,n.e+$+2,1);e=!n.times(n).eq(a)}break}}}}return H(n,n.e+$+1,T,e)};_.toExponential=function(e,t){if(e!=null){b(e,0,d);e++}return U(this,e,t,1)};_.toFixed=function(e,t){if(e!=null){b(e,0,d);e=e+this.e+1}return U(this,e,t)};_.toFormat=function(e,t,r){var n,i=this;if(r==null){if(e!=null&&t&&typeof t=="object"){r=t;t=null}else if(e&&typeof e=="object"){r=e;e=t=null}else{r=x}}else if(typeof r!="object"){throw Error(a+"Argument not an object: "+r)}n=i.toFixed(e,t);if(i.c){var s,o=n.split("."),f=+r.groupSize,c=+r.secondaryGroupSize,u=r.groupSeparator||"",l=o[0],h=o[1],d=i.s<0,p=d?l.slice(1):l,y=p.length;if(c){s=f;f=c;c=s;y-=s}if(f>0&&y>0){s=y%f||f;l=p.substr(0,s);for(;s<y;s+=f)l+=u+p.substr(s,f);if(c>0)l+=u+p.slice(s);if(d)l="-"+l}n=h?l+(r.decimalSeparator||"")+((c=+r.fractionGroupSize)?h.replace(new RegExp("\\d{"+c+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):h):l}return(r.prefix||"")+n+(r.suffix||"")};_.toFraction=function(e){var r,n,i,s,o,f,u,h,d,p,y,g,b=this,A=b.c;if(e!=null){u=new M(e);if(!u.isInteger()&&(u.c||u.s!==1)||u.lt(S)){throw Error(a+"Argument "+(u.isInteger()?"out of range: ":"not an integer: ")+V(u))}}if(!A)return new M(b);r=new M(S);d=n=new M(S);i=h=new M(S);g=m(A);o=r.e=g.length-b.e-1;r.c[0]=l[(f=o%c)<0?c+f:f];e=!e||u.comparedTo(r)>0?o>0?r:d:u;f=R;R=1/0;u=new M(g);h.c[0]=0;for(;;){p=t(u,r,0,1);s=n.plus(p.times(i));if(s.comparedTo(e)==1)break;n=i;i=s;d=h.plus(p.times(s=d));h=s;r=u.minus(p.times(s=r));u=s}s=t(e.minus(n),i,0,1);h=h.plus(s.times(d));n=n.plus(s.times(i));h.s=d.s=b.s;o=o*2;y=t(d,i,o,T).minus(b).abs().comparedTo(t(h,n,o,T).minus(b).abs())<1?[d,i]:[h,n];R=f;return y};_.toNumber=function(){return+V(this)};_.toPrecision=function(e,t){if(e!=null)b(e,1,d);return U(this,e,t,2)};_.toString=function(e){var t,n=this,i=n.s,s=n.e;if(s===null){if(i){t="Infinity";if(i<0)t="-"+t}else{t="NaN"}}else{if(e==null){t=s<=I||s>=C?w(m(n.c),s):E(m(n.c),s,"0")}else if(e===10&&D){n=H(new M(n),$+s+1,T);t=E(m(n.c),n.e,"0")}else{b(e,2,B.length,"Base");t=r(E(m(n.c),s,"0"),10,e,i,true)}if(i<0&&n.c[0])t="-"+t}return t};_.valueOf=_.toJSON=function(){return V(this)};_._isBigNumber=true;if(e!=null)M.set(e);return M}function y(e){var t=e|0;return e>0||e===t?t:t-1}function m(e){var t,r,n=1,i=e.length,s=e[0]+"";for(;n<i;){t=e[n++]+"";r=c-t.length;for(;r--;t="0"+t);s+=t}for(i=s.length;s.charCodeAt(--i)===48;);return s.slice(0,i+1||1)}function g(e,t){var r,n,i=e.c,s=t.c,a=e.s,o=t.s,f=e.e,c=t.e;if(!a||!o)return null;r=i&&!i[0];n=s&&!s[0];if(r||n)return r?n?0:-o:a;if(a!=o)return a;r=a<0;n=f==c;if(!i||!s)return n?0:!i^r?1:-1;if(!n)return f>c^r?1:-1;o=(f=i.length)<(c=s.length)?f:c;for(a=0;a<o;a++)if(i[a]!=s[a])return i[a]>s[a]^r?1:-1;return f==c?0:f>c^r?1:-1}function b(e,t,r,n){if(e<t||e>r||e!==s(e)){throw Error(a+(n||"Argument")+(typeof e=="number"?e<t||e>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}}function A(e){var t=e.c.length-1;return y(e.e/c)==t&&e.c[t]%2!=0}function w(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function E(e,t,r){var n,i;if(t<0){for(i=r+".";++t;i+=r);e=i+e}else{n=e.length;if(++t>n){for(i=r,t-=n;--t;i+=r);e+=i}else if(t<n){e=e.slice(0,t)+"."+e.slice(t)}}return e}r=p();r["default"]=r.BigNumber=r;if(e.exports){e.exports=r}else{if(!t){t=typeof self!="undefined"&&self?self:window}t.BigNumber=r}})(commonjsGlobal)})(bignumber);class EthUtils{static encodeTransactionParameter(e,t){switch(e){case"bool":if(typeof t!=="boolean")t=Boolean(t);return t;case"string":case"address":case"struct":return t}if(EthUtils.isIntType(e)){if(typeof t==="string"){t=BigInt(t)}return t}if(e.indexOf("byte")===0){if(t&&(typeof t!=="string"||t.indexOf("0x")!==0))t=hexlify(t);return t}throw new Error("Ethereum argument encoding for type "+e+" is not defined")}static isIntType(e){const t=e.indexOf("int");return t===0||t===1}static tokenScriptOutputToEthers(e){switch(e){case"utf8":return"string"}return e}static convertFunctionResult(e){if(typeof e!=="object"||!("toObject"in e))return e;try{const t={};for(let r in e.toObject()){t[r]=this.convertFunctionResult(e[r])}return t}catch(t){const r=[];const n=e.toArray();for(let e=0;e<n.length;e++){r.push(this.convertFunctionResult(n[e]))}return r}}static bigIntsToString(e){if(typeof e==="bigint")return e.toString();if(typeof e!=="object")return e;if(Array.isArray(e)){const t=[];for(let r=0;r<e.length;r++){t.push(this.bigIntsToString(e[r]))}return t}const t={};for(let r in e){t[r]=this.bigIntsToString(e[r])}return t}static calculateDecimalValue(e,t){if(!e)return 0;if(typeof e!=="string")e=e.toString();return new bignumber.exports.BigNumber(e).dividedBy(Math.pow(10,t)).toString()}static calculateIntValue(e,t){if(!e)return 0;if(typeof e!=="string")e=e.toString();const r=new bignumber.exports.BigNumber(e).multipliedBy(Math.pow(10,t)).integerValue().toString(10);return BigInt(r)}}class AbstractDependencyBranch{constructor(e,t){this.tokenScript=e;this.localAttrContext=t}async getValue(e){switch(this.ref){case"tokenId":if(!e)throw new Error("tokenId reference cannot be resolved as no token context is set.");if(e.selectedTokenId){const t=e.selectedTokenId;return BigInt(t)}else{throw new Error("tokenId reference is not accessible under the context of a fungible token")}case"ownerAddress":const t=await this.tokenScript.getEngine().getWalletAdapter();return await t.getCurrentWalletAddress();default:const r=this.tokenScript.getTokenContextData(e);if(r[this.ref])return r[this.ref];return await this.resolveValue(e)}}invalidateDependencies(e){if(!this.isStaticAttribute())return false;if(this.isSpecialRef()){return e.indexOf(this.ref)>-1}try{const t=this.getBackingAttribute();return t.invalidate(e)}catch(t){return e.indexOf(this.localRef)>-1}}isDependentOn(e){if(!this.isStaticAttribute())return false;if(this.isSpecialRef()){return e.indexOf(this.ref)>-1}try{const t=this.getBackingAttribute();return t.isDependentOn(e)}catch(t){return e.indexOf(this.localRef)>-1}}isStaticAttribute(){return!(!this.ref&&!this.localRef)}getBackingAttribute(){let e;if(this.localRef){if(!this.localAttrContext)throw new Error("Local ref cannot be resolve since this attribute is from the global attribute scope. ");e=this.localAttrContext.getAttribute(this.localRef)}else{if(this.localAttrContext&&this.localAttrContext.hasAttribute(this.ref)){e=this.localAttrContext.getAttribute(this.ref)}else{e=this.tokenScript.getAttributes().getAttribute(this.ref)}}return e}isSpecialRef(){return["tokenId","ownerAddress"].indexOf(this.ref)>-1}}class Argument extends AbstractDependencyBranch{constructor(e,t,r,n){super(e,n);this.type=r?r:t.tagName.split(":")[1];this.content=t.textContent;this.ref=t.getAttribute("ref");this.localRef=t.getAttribute("local-ref")}async getEthersArgument(e,t=""){let r={name:t,value:await this.getValue(e)};if(this.type==="struct"){switch(this.ref){case"attestation":const t=await this.tokenScript.getTokenContextData(e);r.type="tuple";r.internalType="struct EasTicketVerify.AttestationCoreData";r.components=t.tokenInfo.data.decodedToken.types.Attest.map((e=>({name:e.name,type:e.type,internalType:e.type})));break;default:throw new Error("Struct encoding is not defined for "+this.ref+" attribute.")}}else{r.type=this.type;r.internalType=this.type}return r}async resolveValue(e){let t;if(this.ref||this.localRef){if(e)t=await this.resolveUsingTokenContext(e);if(!t)t=await this.resolveFromAttribute(e)}else{t=this.content}return EthUtils.encodeTransactionParameter(this.type,t)}async resolveUsingTokenContext(e){const t=await this.tokenScript.getTokenContextData(e);if(!t[this.ref])return null;if(this.type==="struct"){return this.encodeStruct(this.ref,t)}else{return t[this.ref]}}async encodeStruct(e,t){switch(e){case"attestation":const e=t.tokenInfo.data.decodedToken;const r={};for(const t of e.types.Attest){r[t.name]=e.message[t.name]}return r;default:throw new Error("Struct encoding is not defined for "+this.ref+" attribute.")}}async resolveFromAttribute(e){var t;let r;try{r=this.getBackingAttribute();return await r.getValue(true,false,e)}catch(r){const n=this.tokenScript.getViewController().getUserEntryValue(this.localRef,(t=e.selectedTokenId)!==null&&t!==void 0?t:"-1");if(!n){throw r}return n}}}class Arguments{constructor(e,t,r){this.tokenScript=e;this.parentElem=t;this.localAttrContext=r}getArguments(){if(!this.arguments){this.arguments=[];const e=this.parentElem.getElementsByTagName("ts:data");if(e.length===0)return[];const t=e[0].children;if(t.length===0)return[];for(let e in t){if(!t.hasOwnProperty(e))continue;const r=t[e];this.arguments.push(new Argument(this.tokenScript,r,null,this.localAttrContext))}}return this.arguments}[Symbol.iterator](){return this.getArguments().values()}}class Transaction$1{constructor(e,t,r){this.tokenScript=e;this.transactionDef=t;this.localAttrContext=r;const n=t.getElementsByTagName("ethereum:transaction");if(!n){return}const i=n[0].getAttribute("contract");let s=EthUtils.tokenScriptOutputToEthers(n[0].getAttribute("as"));this.transaction={as:s,contract:this.tokenScript.getContractByName(i),contractName:i,function:n[0].getAttribute("function"),args:new Arguments(this.tokenScript,n[0],this.localAttrContext).getArguments(),value:this.getValueArg(n[0])}}getValueArg(e){const t=e.getElementsByTagName("ethereum:value");if(t.length===0)return null;return new Argument(this.tokenScript,t[0],"uint256",this.localAttrContext)}getTransactionInfo(){return this.transaction}}class FilterValue extends AbstractDependencyBranch{constructor(e,t,r,n){super(e,n);this.type=r;this.ref=t}async resolveValue(e){const t=this.getBackingAttribute();const r=await t.getValue(true,false,false,e);return EthUtils.encodeTransactionParameter(this.type,r)}}class FilterQuery{constructor(e,t,r){this.tokenScript=e;this.localAttrContext=r;this.dynamicValues={};this.params=new URLSearchParams(t);for(let[t,n]of this.params.entries()){const i=n.match(/^\$\{(.*)\}/);if(i&&i[1])this.dynamicValues[t]=new FilterValue(e,i[1],null,r)}}has(e){return this.params.has(e)}async getValue(e,t){if(this.dynamicValues[e]){return await this.dynamicValues[e].getValue(t)}return this.params.get(e)}getDynamicFilterValues(){return Object.values(this.dynamicValues)}}class Label{constructor(e){this.parentElem=e;const t=Array.prototype.slice.call(this.parentElem.children).filter((e=>e.tagName==="ts:label"));if(t.length>0){const e=[].slice.call(t[0].children);const r=e.filter((e=>e.getAttribute("xml:lang")==="en"));if(r.length){if(r[0].tagName==="ts:plurals"&&r[0].children.length>0){this.label={};for(let e of r[0].children){const e=r[0].children[0];this.label[e.getAttribute("quantity")]=e.textContent}}else{this.label=r[0].textContent}}}}getValue(e){if(!this.label)return null;if(typeof this.label==="string")return this.label;if(e>1&&this.label["other"])return this.label["other"];return this.label["one"]}}var isArray$8=Array.isArray;var isArray_1=isArray$8;var freeGlobal$1=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal;var _freeGlobal=freeGlobal$1;var freeGlobal=_freeGlobal;var freeSelf=typeof self=="object"&&self&&self.Object===Object&&self;var root$8=freeGlobal||freeSelf||Function("return this")();var _root=root$8;var root$7=_root;var Symbol$7=root$7.Symbol;var _Symbol=Symbol$7;var Symbol$6=_Symbol;var objectProto$f=Object.prototype;var hasOwnProperty$d=objectProto$f.hasOwnProperty;var nativeObjectToString$1=objectProto$f.toString;var symToStringTag$1=Symbol$6?Symbol$6.toStringTag:undefined;function getRawTag$1(e){var t=hasOwnProperty$d.call(e,symToStringTag$1),r=e[symToStringTag$1];try{e[symToStringTag$1]=undefined;var n=true}catch(e){}var i=nativeObjectToString$1.call(e);if(n){if(t){e[symToStringTag$1]=r}else{delete e[symToStringTag$1]}}return i}var _getRawTag=getRawTag$1;var objectProto$e=Object.prototype;var nativeObjectToString=objectProto$e.toString;function objectToString$1(e){return nativeObjectToString.call(e)}var _objectToString=objectToString$1;var Symbol$5=_Symbol,getRawTag=_getRawTag,objectToString=_objectToString;var nullTag="[object Null]",undefinedTag="[object Undefined]";var symToStringTag=Symbol$5?Symbol$5.toStringTag:undefined;function baseGetTag$6(e){if(e==null){return e===undefined?undefinedTag:nullTag}return symToStringTag&&symToStringTag in Object(e)?getRawTag(e):objectToString(e)}var _baseGetTag=baseGetTag$6;function isObjectLike$8(e){return e!=null&&typeof e=="object"}var isObjectLike_1=isObjectLike$8;var baseGetTag$5=_baseGetTag,isObjectLike$7=isObjectLike_1;var symbolTag$3="[object Symbol]";function isSymbol$3(e){return typeof e=="symbol"||isObjectLike$7(e)&&baseGetTag$5(e)==symbolTag$3}var isSymbol_1=isSymbol$3;var isArray$7=isArray_1,isSymbol$2=isSymbol_1;var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey$1(e,t){if(isArray$7(e)){return false}var r=typeof e;if(r=="number"||r=="symbol"||r=="boolean"||e==null||isSymbol$2(e)){return true}return reIsPlainProp.test(e)||!reIsDeepProp.test(e)||t!=null&&e in Object(t)}var _isKey=isKey$1;function isObject$5(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var isObject_1=isObject$5;var baseGetTag$4=_baseGetTag,isObject$4=isObject_1;var asyncTag="[object AsyncFunction]",funcTag$2="[object Function]",genTag$1="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction$2(e){if(!isObject$4(e)){return false}var t=baseGetTag$4(e);return t==funcTag$2||t==genTag$1||t==asyncTag||t==proxyTag}var isFunction_1=isFunction$2;var root$6=_root;var coreJsData$1=root$6["__core-js_shared__"];var _coreJsData=coreJsData$1;var coreJsData=_coreJsData;var maskSrcKey=function(){var e=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function isMasked$1(e){return!!maskSrcKey&&maskSrcKey in e}var _isMasked=isMasked$1;var funcProto$2=Function.prototype;var funcToString$2=funcProto$2.toString;function toSource$2(e){if(e!=null){try{return funcToString$2.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var _toSource=toSource$2;var isFunction$1=isFunction_1,isMasked=_isMasked,isObject$3=isObject_1,toSource$1=_toSource;var reRegExpChar=/[\\^$.*+?()[\]{}|]/g;var reIsHostCtor=/^\[object .+?Constructor\]$/;var funcProto$1=Function.prototype,objectProto$d=Object.prototype;var funcToString$1=funcProto$1.toString;var hasOwnProperty$c=objectProto$d.hasOwnProperty;var reIsNative=RegExp("^"+funcToString$1.call(hasOwnProperty$c).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative$1(e){if(!isObject$3(e)||isMasked(e)){return false}var t=isFunction$1(e)?reIsNative:reIsHostCtor;return t.test(toSource$1(e))}var _baseIsNative=baseIsNative$1;function getValue$1(e,t){return e==null?undefined:e[t]}var _getValue=getValue$1;var baseIsNative=_baseIsNative,getValue=_getValue;function getNative$7(e,t){var r=getValue(e,t);return baseIsNative(r)?r:undefined}var _getNative=getNative$7;var getNative$6=_getNative;var nativeCreate$4=getNative$6(Object,"create");var _nativeCreate=nativeCreate$4;var nativeCreate$3=_nativeCreate;function hashClear$1(){this.__data__=nativeCreate$3?nativeCreate$3(null):{};this.size=0}var _hashClear=hashClear$1;function hashDelete$1(e){var t=this.has(e)&&delete this.__data__[e];this.size-=t?1:0;return t}var _hashDelete=hashDelete$1;var nativeCreate$2=_nativeCreate;var HASH_UNDEFINED$2="__lodash_hash_undefined__";var objectProto$c=Object.prototype;var hasOwnProperty$b=objectProto$c.hasOwnProperty;function hashGet$1(e){var t=this.__data__;if(nativeCreate$2){var r=t[e];return r===HASH_UNDEFINED$2?undefined:r}return hasOwnProperty$b.call(t,e)?t[e]:undefined}var _hashGet=hashGet$1;var nativeCreate$1=_nativeCreate;var objectProto$b=Object.prototype;var hasOwnProperty$a=objectProto$b.hasOwnProperty;function hashHas$1(e){var t=this.__data__;return nativeCreate$1?t[e]!==undefined:hasOwnProperty$a.call(t,e)}var _hashHas=hashHas$1;var nativeCreate=_nativeCreate;var HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet$1(e,t){var r=this.__data__;this.size+=this.has(e)?0:1;r[e]=nativeCreate&&t===undefined?HASH_UNDEFINED$1:t;return this}var _hashSet=hashSet$1;var hashClear=_hashClear,hashDelete=_hashDelete,hashGet=_hashGet,hashHas=_hashHas,hashSet=_hashSet;function Hash$2(e){var t=-1,r=e==null?0:e.length;this.clear();while(++t<r){var n=e[t];this.set(n[0],n[1])}}Hash$2.prototype.clear=hashClear;Hash$2.prototype["delete"]=hashDelete;Hash$2.prototype.get=hashGet;Hash$2.prototype.has=hashHas;Hash$2.prototype.set=hashSet;var _Hash=Hash$2;function listCacheClear$1(){this.__data__=[];this.size=0}var _listCacheClear=listCacheClear$1;function eq$6(e,t){return e===t||e!==e&&t!==t}var eq_1$1=eq$6;var eq$5=eq_1$1;function assocIndexOf$4(e,t){var r=e.length;while(r--){if(eq$5(e[r][0],t)){return r}}return-1}var _assocIndexOf=assocIndexOf$4;var assocIndexOf$3=_assocIndexOf;var arrayProto=Array.prototype;var splice=arrayProto.splice;function listCacheDelete$1(e){var t=this.__data__,r=assocIndexOf$3(t,e);if(r<0){return false}var n=t.length-1;if(r==n){t.pop()}else{splice.call(t,r,1)}--this.size;return true}var _listCacheDelete=listCacheDelete$1;var assocIndexOf$2=_assocIndexOf;function listCacheGet$1(e){var t=this.__data__,r=assocIndexOf$2(t,e);return r<0?undefined:t[r][1]}var _listCacheGet=listCacheGet$1;var assocIndexOf$1=_assocIndexOf;function listCacheHas$1(e){return assocIndexOf$1(this.__data__,e)>-1}var _listCacheHas=listCacheHas$1;var assocIndexOf=_assocIndexOf;function listCacheSet$1(e,t){var r=this.__data__,n=assocIndexOf(r,e);if(n<0){++this.size;r.push([e,t])}else{r[n][1]=t}return this}var _listCacheSet=listCacheSet$1;var listCacheClear=_listCacheClear,listCacheDelete=_listCacheDelete,listCacheGet=_listCacheGet,listCacheHas=_listCacheHas,listCacheSet=_listCacheSet;function ListCache$4(e){var t=-1,r=e==null?0:e.length;this.clear();while(++t<r){var n=e[t];this.set(n[0],n[1])}}ListCache$4.prototype.clear=listCacheClear;ListCache$4.prototype["delete"]=listCacheDelete;ListCache$4.prototype.get=listCacheGet;ListCache$4.prototype.has=listCacheHas;ListCache$4.prototype.set=listCacheSet;var _ListCache=ListCache$4;var getNative$5=_getNative,root$5=_root;var Map$4=getNative$5(root$5,"Map");var _Map=Map$4;var Hash$1=_Hash,ListCache$3=_ListCache,Map$3=_Map;function mapCacheClear$1(){this.size=0;this.__data__={hash:new Hash$1,map:new(Map$3||ListCache$3),string:new Hash$1}}var _mapCacheClear=mapCacheClear$1;function isKeyable$1(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var _isKeyable=isKeyable$1;var isKeyable=_isKeyable;function getMapData$4(e,t){var r=e.__data__;return isKeyable(t)?r[typeof t=="string"?"string":"hash"]:r.map}var _getMapData=getMapData$4;var getMapData$3=_getMapData;function mapCacheDelete$1(e){var t=getMapData$3(this,e)["delete"](e);this.size-=t?1:0;return t}var _mapCacheDelete=mapCacheDelete$1;var getMapData$2=_getMapData;function mapCacheGet$1(e){return getMapData$2(this,e).get(e)}var _mapCacheGet=mapCacheGet$1;var getMapData$1=_getMapData;function mapCacheHas$1(e){return getMapData$1(this,e).has(e)}var _mapCacheHas=mapCacheHas$1;var getMapData=_getMapData;function mapCacheSet$1(e,t){var r=getMapData(this,e),n=r.size;r.set(e,t);this.size+=r.size==n?0:1;return this}var _mapCacheSet=mapCacheSet$1;var mapCacheClear=_mapCacheClear,mapCacheDelete=_mapCacheDelete,mapCacheGet=_mapCacheGet,mapCacheHas=_mapCacheHas,mapCacheSet=_mapCacheSet;function MapCache$3(e){var t=-1,r=e==null?0:e.length;this.clear();while(++t<r){var n=e[t];this.set(n[0],n[1])}}MapCache$3.prototype.clear=mapCacheClear;MapCache$3.prototype["delete"]=mapCacheDelete;MapCache$3.prototype.get=mapCacheGet;MapCache$3.prototype.has=mapCacheHas;MapCache$3.prototype.set=mapCacheSet;var _MapCache=MapCache$3;var MapCache$2=_MapCache;var FUNC_ERROR_TEXT="Expected a function";function memoize$1(e,t){if(typeof e!="function"||t!=null&&typeof t!="function"){throw new TypeError(FUNC_ERROR_TEXT)}var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],s=r.cache;if(s.has(i)){return s.get(i)}var a=e.apply(this,n);r.cache=s.set(i,a)||s;return a};r.cache=new(memoize$1.Cache||MapCache$2);return r}memoize$1.Cache=MapCache$2;var memoize_1=memoize$1;var memoize=memoize_1;var MAX_MEMOIZE_SIZE=500;function memoizeCapped$1(e){var t=memoize(e,(function(e){if(r.size===MAX_MEMOIZE_SIZE){r.clear()}return e}));var r=t.cache;return t}var _memoizeCapped=memoizeCapped$1;var memoizeCapped=_memoizeCapped;var rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;var reEscapeChar=/\\(\\)?/g;var stringToPath$1=memoizeCapped((function(e){var t=[];if(e.charCodeAt(0)===46){t.push("")}e.replace(rePropName,(function(e,r,n,i){t.push(n?i.replace(reEscapeChar,"$1"):r||e)}));return t}));var _stringToPath=stringToPath$1;function arrayMap$2(e,t){var r=-1,n=e==null?0:e.length,i=Array(n);while(++r<n){i[r]=t(e[r],r,e)}return i}var _arrayMap=arrayMap$2;var Symbol$4=_Symbol,arrayMap$1=_arrayMap,isArray$6=isArray_1,isSymbol$1=isSymbol_1;var INFINITY$1=1/0;var symbolProto$2=Symbol$4?Symbol$4.prototype:undefined,symbolToString=symbolProto$2?symbolProto$2.toString:undefined;function baseToString$1(e){if(typeof e=="string"){return e}if(isArray$6(e)){return arrayMap$1(e,baseToString$1)+""}if(isSymbol$1(e)){return symbolToString?symbolToString.call(e):""}var t=e+"";return t=="0"&&1/e==-INFINITY$1?"-0":t}var _baseToString=baseToString$1;var baseToString=_baseToString;function toString$b(e){return e==null?"":baseToString(e)}var toString_1$1=toString$b;var isArray$5=isArray_1,isKey=_isKey,stringToPath=_stringToPath,toString$a=toString_1$1;function castPath$3(e,t){if(isArray$5(e)){return e}return isKey(e,t)?[e]:stringToPath(toString$a(e))}var _castPath=castPath$3;var isSymbol=isSymbol_1;var INFINITY=1/0;function toKey$2(e){if(typeof e=="string"||isSymbol(e)){return e}var t=e+"";return t=="0"&&1/e==-INFINITY?"-0":t}var _toKey=toKey$2;var castPath$2=_castPath,toKey$1=_toKey;function baseGet$2(e,t){t=castPath$2(t,e);var r=0,n=t.length;while(e!=null&&r<n){e=e[toKey$1(t[r++])]}return r&&r==n?e:undefined}var _baseGet=baseGet$2;var baseGet$1=_baseGet;function get$1(e,t,r){var n=e==null?undefined:baseGet$1(e,t);return n===undefined?r:n}var get_1=get$1;class AttributeReference extends AbstractDependencyBranch{constructor(e,t,r){super(e,r);this.fullPath=t.getAttribute("ref");const n=this.fullPath.indexOf(".");this.ref=n>-1?this.fullPath.substring(0,n):this.fullPath}resolveValue(e){return Promise.resolve(undefined)}}class Attribute$4{constructor(e,t,r){this.tokenScript=e;this.attributeDef=t;this.localAttrContext=r;this.scopeValues={};this.dependsOnTokenId=undefined;this.resolveLocks={}}getName(){return this.attributeDef.getAttribute("name")}getLabel(){var e;if(!this.label)this.label=new Label(this.attributeDef);return(e=this.label.getValue())!==null&&e!==void 0?e:this.getName()}getOrigins(){return this.attributeDef.getElementsByTagName("ts:origins")[0].children}async getValue(e=false,t=false,r=false,n=this.tokenScript.getCurrentTokenContext()){const i=this.getValueScopeId(n);let s;if(this.getScopedValue(i)===undefined){const e=this.getOrigins();const a=e[0];this.asType=a.getAttribute("as");if(t&&a.tagName!=="ts:user-entry"){s=this.getScopedValue(i)}else{if(a.tagName==="ts:user-entry"){s=this.tokenScript.getViewController().getUserEntryValue(this.getName(),i)}else{if(!r){if(!this.resolveLocks[i]){this.resolveLocks[i]=new Promise(((e,t)=>{this.resolveAttributeValue(a,i,n).then((t=>{e(t);delete this.resolveLocks[i]})).catch((e=>{t(e)}))}))}s=await this.resolveLocks[i]}else{s=await this.resolveAttributeValue(a,i,n)}}}}else{s=this.getScopedValue(i)}if(e&&s===undefined)throw new Error("Could not resolve attribute "+this.getName());if(s===undefined)return s;return this.transformValue(s)}async getCurrentValue(e=this.tokenScript.getCurrentTokenContext()){return this.getValue(false,true,false,e)}async transformValue(e){if(!this.asType)return e;switch(this.asType){case"bool":if(typeof e==="boolean")break;return Boolean(e);case"e2":case"e4":case"e6":case"e8":case"e18":return EthUtils.calculateIntValue(e,parseInt(this.asType.substring(1)))}return e}async getJsonSafeValue(e){const t=await this.getValue(false,false,e);return EthUtils.bigIntsToString(t)}async resolveAttributeValue(e,t,r){var n,i;let s;switch(e.tagName){case"ethereum:call":case"ethereum:event":console.log("Resolving attribute: "+this.getName()+" for token context "+(r===null||r===void 0?void 0:r.selectedTokenId));const t=e.getAttribute("contract");const a=this.tokenScript.getContractByName(t);const o=await this.tokenScript.getEngine().getWalletAdapter();const f=(n=r===null||r===void 0?void 0:r.chainId)!==null&&n!==void 0?n:await o.getChain();const c=a.getAddressByChain(f,true);if(e.tagName==="ethereum:call"){const n=e.getAttribute("function");let i=EthUtils.tokenScriptOutputToEthers(this.asType);let f;if(i==="abi"){const e=a.getAbi("function",n);if(!e.length){throw new Error("'as' XML attribute specifies abi but the abi for "+t+":"+n+" is not defined")}f=e[0].outputs}else{f=[i]}const u=new Arguments(this.tokenScript,e,this.localAttrContext).getArguments();const l=[];for(let e in u){l.push(await u[e].getEthersArgument(r))}s=await o.call(c.chain,c.address,n,l,f);if(i==="abi")s=EthUtils.convertFunctionResult(s);console.log("Call result: ",s)}else{const t=e.getAttribute("filter");const n=e.getAttribute("type");const i=e.getAttribute("select");const a=this.tokenScript.getAsnModuleDefinition(n);if(!a)throw new Error("Could not find ASN module with name ");const u=[];const l=a.querySelector("type sequence");const h=new FilterQuery(this.tokenScript,t,this.localAttrContext);for(let e of l.children){const t=e.getAttribute("name");const n=e.getAttribute("ethereum:type");u.push({name:t,type:n,internalType:n,indexed:e.getAttribute("ethereum:indexed"),value:h.has(t)?await h.getValue(t,r):null})}const d=await o.getEvents(f,c.address,n,u);if(d.length===0)break;s=d[0].args[i];console.log("Event result: ",s)}break;case"ts:data":const u=e.children;if(u.length>1){throw new Error("Attribute ts:data origin does not support more than one element")}if(e.hasAttribute("ref")){const t=e.getAttribute("ref");const n=(i=t.match(/\.|\[/))===null||i===void 0?void 0:i[0];const a=n?t.split(n)[0]:t;let o=n?t.substring(t.indexOf(n)):"";if(o.length&&o.charAt(0)===".")o=o.substring(1);console.log("Resolving attribute data reference, attribute:",a," path:",o);const f=this.tokenScript.getAttributes().getAttribute(a);const c=await f.getValue(true,false,false,r);s=o?get_1(c,o):c}else{s=u[0].textContent}break;default:throw new Error("Attribute origin type "+e.tagName+" is not implemented")}if(s instanceof Object&&s._isBigNumber){s=BigInt(s)}this.setScopedValue(s,t);return s}getScopedValue(e){var t;return(t=this.scopeValues)===null||t===void 0?void 0:t[e]}setScopedValue(e,t){this.scopeValues[t]=e}getValueScopeId(e){let t="-1";if(this.getDependsOnTokenIdOrIsUserEntry()){if(e===null||e===void 0?void 0:e.selectedTokenId)t=e.selectedTokenId}return t}getDependsOnTokenIdOrIsUserEntry(){if(this.isUserEntry())return true;if(this.dependsOnTokenId===undefined){const e=[];for(const t of this.tokenScript.getAttributes()){if(t.isUserEntry())e.push(t.getName())}this.dependsOnTokenId=this.isDependentOn(["tokenId",...e])}return this.dependsOnTokenId}isUserEntry(){const e=this.getOrigins();const t=e[0];return t.tagName==="ts:user-entry"}invalidate(e){if(e){if(!this.invalidateDependencies(e)){if(e.indexOf(this.getName())>-1)return false;console.log("Attribute '"+this.getName()+"' is not dependent on '"+JSON.stringify(e)+"', skipping invalidation");return false}}console.log("Invalidating attribute: "+this.getName());this.resolveLocks={};this.scopeValues={};return true}isDependentOn(e){const t=this.getDependencies();if(t===false)return false;for(let r of t){if(r.isDependentOn(e))return true}return e.indexOf(this.getName())>-1}invalidateDependencies(e){const t=this.getDependencies();if(t===false)return false;let r=false;for(let n of t){r=n.invalidateDependencies(e)}return r}getDependencies(){const e=this.getOrigins();const t=e[0];if(Attribute$4.NO_DEPENDENCY_ORIGINS.indexOf(t.tagName)>-1)return false;let r=[];if(t.tagName==="ethereum:call"){r=new Arguments(this.tokenScript,t,this.localAttrContext).getArguments()}else if(t.tagName==="ethereum:event"){const e=t.getAttribute("filter");r=new FilterQuery(this.tokenScript,e,this.localAttrContext).getDynamicFilterValues()}else if(t.tagName==="ts:data"&&t.getAttribute("ref")){r=[new AttributeReference(this.tokenScript,t,this.localAttrContext)]}else{return false}return r}}Attribute$4.NO_DEPENDENCY_ORIGINS=["ts:user-entry"];class Attributes$2{constructor(e,t,r=false){this.tokenScript=e;this.parentElem=t;this.isCardContext=r}getAttributes(){if(!this.attributes){this.attributes={};const e=Array.prototype.slice.call(this.parentElem.children).filter((e=>e.tagName==="ts:attribute"));if(e.length>0){for(let t in e){const r=new Attribute$4(this.tokenScript,e[t],this.isCardContext?this:null);this.attributes[r.getName()]=r}}}return this.attributes}getAttribute(e){if(!this.attributes)this.getAttributes();if(!this.attributes[e])throw new Error("Could not find attribute '"+e+"'");return this.attributes[e]}hasAttribute(e){if(!this.attributes)this.getAttributes();return this.attributes.hasOwnProperty(e)}invalidate(e){for(let t of this){t.invalidate(e)}}[Symbol.iterator](){return Object.values(this.getAttributes()).values()}}class Card{constructor(e,t){this.tokenScript=e;this.cardDef=t}get label(){var e;if(!this._label)this._label=new Label(this.cardDef);return(e=this._label.getValue())!==null&&e!==void 0?e:"Unnamed Card"}get name(){return this.cardDef.getAttribute("name")}get type(){return this.cardDef.getAttribute("type")}get exclude(){return this.cardDef.getAttribute("exclude")}get origins(){const e=this.cardDef.getAttribute("origins");if(!e)return[];return e.split(" ")}get buttonClass(){return this.cardDef.getAttribute("buttonClass")}get view(){return this.cardDef.getElementsByTagName("ts:view")[0]}get urlFragment(){return this.view.getAttribute("urlFragment")}get uiButton(){return this.view.hasAttribute("uiButton")?this.view.getAttribute("uiButton")==="true":true}get isUrlView(){return this.url}get url(){return this.view.getAttribute("url")}getAttributes(){if(!this.attributes){this.attributes=new Attributes$2(this.tokenScript,this.cardDef,true)}return this.attributes}async isEnabledOrReason(e){if(!e)e=this.tokenScript.getCurrentTokenContext();if(!this.isAvailableForOrigin(e.originId))return false;if(!this.exclude)return true;const t=this.tokenScript.getSelections().getSelection(this.exclude);if(await t.isInSelection(e)){return t.getLabel()}return true}isAvailableForOrigin(e){return this.origins.length===0||this.origins.indexOf(e)>-1}getTransaction(){if(!this.transaction){const e=this.cardDef.getElementsByTagName("ts:transaction");if(e.length>0)this.transaction=new Transaction$1(this.tokenScript,e[0],this.getAttributes())}return this.transaction}async executeTransaction(e,t=true,r=true){var n;const i=this.getTransaction();await this.tokenScript.executeTransaction(i,e,t);this.getAttributes().invalidate();this.tokenScript.getAttributes().invalidate();await new Promise((e=>setTimeout(e,3e3)));const s=await this.tokenScript.getTokenMetadata(true,true);if(!this.tokenScript.hasViewBinding())return;const a=this.tokenScript.getCurrentTokenContext();if(((n=s[a.originId])===null||n===void 0?void 0:n[a.selectedTokenIndex])&&await this.isEnabledOrReason(a)){if(r)await this.tokenScript.getViewController().updateCardData()}else{await this.tokenScript.getViewController().unloadTokenCard()}}}class Contract{constructor(e){this.contractDef=e;this.addresses={};this.abi=[];this.name=e.getAttribute("name");this.interface=e.getAttribute("interface");let t=e.getElementsByTagName("ts:address");for(let e in t){if(!t.hasOwnProperty(e))continue;const r=parseInt(t[e].getAttribute("network"));this.addresses[r]={address:t[e].innerHTML,chain:r}}const r=e.getElementsByTagName("ts:abi");if(r.length){try{this.abi=JSON.parse(r[0].innerHTML)}catch(e){console.warn("Failed to parse contract ABI",e)}}}getName(){return this.name}getInterface(){return this.interface}getAddresses(){return this.addresses}getAbi(e,t){if(!e&&!t)return this.abi;let r=this.abi;if(e)r=r.filter((t=>e===t.type));if(t)r=r.filter((e=>t===e.name));return r}getFirstAddress(){const e=Object.keys(this.addresses);if(e.length===0)throw new Error("Contract does not have any addresses");return this.addresses[e[0]]}getAddressByChain(e,t=false){if(!this.addresses[e]){if(t){if(Object.keys(this.addresses).length===0)throw new Error("Contract does not have any addresses");return this.getFirstAddress()}throw new Error("Contract does not have an address with chain ID "+e)}return this.addresses[e]}}const ELEMENT="element";const ATTRIBUTE="attribute";const CONTENT$1="content";const MAX$1=1e9;function assign$1$1(e,...t){const r=arguments[0];for(let e=1;e<arguments.length;e++){const t=arguments[e];for(const e in t){if(!t.hasOwnProperty(e)){continue}r[e]=t[e]}}return r}function XmlElement(e){return t=>{const r=t;r.localName=e.localName||r.name;r.namespaceURI=e.namespaceURI||r.namespaceURI||null;r.prefix=e.prefix||r.prefix||null;r.parser=e.parser||r.parser;if(r.target!==r){r.items=assign$1$1({},r.items)}r.target=t}}function XmlChildElement(e={}){return(t,r)=>{const n=t.constructor;const i=r;if(!n.items){n.items={}}if(n.target!==n){n.items=assign$1$1({},n.items)}n.target=t;if(e.parser){n.items[i]={parser:e.parser,required:e.required||false,maxOccurs:e.maxOccurs||MAX$1,minOccurs:e.minOccurs===void 0?0:e.minOccurs,noRoot:e.noRoot||false}}else{n.items[i]={namespaceURI:e.namespaceURI||null,required:e.required||false,prefix:e.prefix||null,defaultValue:e.defaultValue,converter:e.converter,noRoot:e.noRoot||false}}e.localName=e.localName||e.parser&&e.parser.localName||i;n.items[i].namespaceURI=e.namespaceURI||e.parser&&e.parser.namespaceURI||null;n.items[i].prefix=e.prefix||e.parser&&e.parser.prefix||null;n.items[i].localName=e.localName;n.items[i].type=ELEMENT;defineProperty$4(t,i,e)}}function XmlAttribute(e={required:false,namespaceURI:null}){return(t,r)=>{const n=t.constructor;const i=r;if(!e.localName){e.localName=r}if(!n.items){n.items={}}if(n.target!==n){n.items=assign$1$1({},n.items)}n.target=t;n.items[r]=e;n.items[r].type=ATTRIBUTE;defineProperty$4(t,i,e)}}function defineProperty$4(e,t,r){const n=`_${t}`;const i={set:function(e){if(this[n]!==e){this.element=null;this[n]=e}},get:function(){if(this[n]===void 0){let e=r.defaultValue;if(r.parser){e=new r.parser;e.localName=r.localName}this[n]=e}return this[n]}};Object.defineProperty(e,n,{writable:true,enumerable:false});Object.defineProperty(e,t,i)}class Collection{constructor(e){this.items=new Array;if(e){this.items=e}}get Count(){return this.items.length}Item(e){return this.items[e]||null}Add(e){this.items.push(e)}Pop(){return this.items.pop()}RemoveAt(e){this.items=this.items.filter(((t,r)=>r!==e))}Clear(){this.items=new Array}GetIterator(){return this.items}ForEach(e){this.GetIterator().forEach(e)}Map(e){return new Collection(this.GetIterator().map(e))}Filter(e){return new Collection(this.GetIterator().filter(e))}Sort(e){return new Collection(this.GetIterator().sort(e))}Every(e){return this.GetIterator().every(e)}Some(e){return this.GetIterator().some(e)}IsEmpty(){return this.Count===0}}function printf(e,...t){let r=e;const n=/[^%](%\d+)/g;let i=null;const s=[];while(i=n.exec(r)){s.push({arg:i[1],index:i.index})}for(let e=s.length-1;e>=0;e--){const t=s[e];const n=t.arg.substring(1);const i=t.index+1;r=r.substring(0,i)+arguments[+n]+r.substring(i+1+n.length)}r=r.replace("%%","%");return r}function padNum(e,t){let r=e+"";while(r.length<t){r="0"+r}return r}class XmlError{constructor(e,...t){this.prefix="XMLJS";this.code=e;this.name=this.constructor.name;arguments[0]=xes[e];const r=printf.apply(this,arguments);this.message=`${this.prefix}${padNum(e,4)}: ${r}`;this.stack=new Error(this.message).stack}}var XE;(function(e){e[e["NONE"]=0]="NONE";e[e["NULL_REFERENCE"]=1]="NULL_REFERENCE";e[e["NULL_PARAM"]=2]="NULL_PARAM";e[e["DECORATOR_NULL_PARAM"]=3]="DECORATOR_NULL_PARAM";e[e["COLLECTION_LIMIT"]=4]="COLLECTION_LIMIT";e[e["METHOD_NOT_IMPLEMENTED"]=5]="METHOD_NOT_IMPLEMENTED";e[e["METHOD_NOT_SUPPORTED"]=6]="METHOD_NOT_SUPPORTED";e[e["PARAM_REQUIRED"]=7]="PARAM_REQUIRED";e[e["CONVERTER_UNSUPPORTED"]=8]="CONVERTER_UNSUPPORTED";e[e["ELEMENT_MALFORMED"]=9]="ELEMENT_MALFORMED";e[e["ELEMENT_MISSING"]=10]="ELEMENT_MISSING";e[e["ATTRIBUTE_MISSING"]=11]="ATTRIBUTE_MISSING";e[e["CONTENT_MISSING"]=12]="CONTENT_MISSING";e[e["CRYPTOGRAPHIC"]=13]="CRYPTOGRAPHIC";e[e["CRYPTOGRAPHIC_NO_MODULE"]=14]="CRYPTOGRAPHIC_NO_MODULE";e[e["CRYPTOGRAPHIC_UNKNOWN_TRANSFORM"]=15]="CRYPTOGRAPHIC_UNKNOWN_TRANSFORM";e[e["ALGORITHM_NOT_SUPPORTED"]=16]="ALGORITHM_NOT_SUPPORTED";e[e["ALGORITHM_WRONG_NAME"]=17]="ALGORITHM_WRONG_NAME";e[e["XML_EXCEPTION"]=18]="XML_EXCEPTION"})(XE||(XE={}));const xes={};xes[XE.NONE]="No description";xes[XE.NULL_REFERENCE]="Null reference";xes[XE.NULL_PARAM]="'%1' has empty '%2' object";xes[XE.DECORATOR_NULL_PARAM]="Decorator '%1' has empty '%2' parameter";xes[XE.COLLECTION_LIMIT]="Collection of '%1' in element '%2' has wrong amount of items";xes[XE.METHOD_NOT_IMPLEMENTED]="Method is not implemented";xes[XE.METHOD_NOT_SUPPORTED]="Method is not supported";xes[XE.PARAM_REQUIRED]="Required parameter is missing '%1'";xes[XE.CONVERTER_UNSUPPORTED]="Converter is not supported";xes[XE.ELEMENT_MALFORMED]="Malformed element '%1'";xes[XE.ELEMENT_MISSING]="Element '%1' is missing in '%2'";xes[XE.ATTRIBUTE_MISSING]="Attribute '%1' is missing in '%2'";xes[XE.CONTENT_MISSING]="Content is missing in '%1'";xes[XE.CRYPTOGRAPHIC]="Cryptographic error: %1";xes[XE.CRYPTOGRAPHIC_NO_MODULE]="WebCrypto module is not found";xes[XE.CRYPTOGRAPHIC_UNKNOWN_TRANSFORM]="Unknown transform %1";xes[XE.ALGORITHM_NOT_SUPPORTED]="Algorithm is not supported '%1'";xes[XE.ALGORITHM_WRONG_NAME]="Algorithm wrong name in use '%1'";xes[XE.XML_EXCEPTION]="XML exception: %1";class Convert$1{static ToString(e,t="utf8"){const r=new Uint8Array(e);switch(t.toLowerCase()){case"utf8":return this.ToUtf8String(r);case"binary":return this.ToBinary(r);case"hex":return this.ToHex(r);case"base64":return this.ToBase64(r);case"base64url":return this.ToBase64Url(r);default:throw new XmlError(XE.CONVERTER_UNSUPPORTED)}}static FromString(e,t="utf8"){switch(t.toLowerCase()){case"utf8":return this.FromUtf8String(e);case"binary":return this.FromBinary(e);case"hex":return this.FromHex(e);case"base64":return this.FromBase64(e);case"base64url":return this.FromBase64Url(e);default:throw new XmlError(XE.CONVERTER_UNSUPPORTED)}}static ToBase64(e){if(typeof btoa!=="undefined"){const t=this.ToString(e,"binary");return btoa(t)}else if(typeof Buffer!=="undefined"){return Buffer.from(e).toString("base64")}else{throw new XmlError(XE.CONVERTER_UNSUPPORTED)}}static FromBase64(e){e=e.replace(/\n/g,"").replace(/\r/g,"").replace(/\t/g,"").replace(/\s/g,"");if(typeof atob!=="undefined"){return this.FromBinary(atob(e))}else if(typeof Buffer!=="undefined"){return new Uint8Array(Buffer.from(e,"base64"))}else{throw new XmlError(XE.CONVERTER_UNSUPPORTED)}}static FromBase64Url(e){return this.FromBase64(this.Base64Padding(e.replace(/\-/g,"+").replace(/\_/g,"/")))}static ToBase64Url(e){return this.ToBase64(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}static FromUtf8String(e){const t=unescape(encodeURIComponent(e));const r=new Uint8Array(t.length);for(let e=0;e<t.length;e++){r[e]=t.charCodeAt(e)}return r}static ToUtf8String(e){const t=String.fromCharCode.apply(null,e);const r=decodeURIComponent(escape(t));return r}static FromBinary(e){const t=e.length;const r=new Uint8Array(t);for(let n=0;n<t;n++){r[n]=e.charCodeAt(n)}return r}static ToBinary(e){let t="";for(let r=0;r<e.length;r++){t=t+String.fromCharCode(e[r])}return t}static ToHex(e){const t="";const r=[];for(let t=0;t<e.length;t++){const n=e[t].toString(16);r.push(n.length===1?"0"+n:n)}return r.join(t)}static FromHex(e){const t=new Uint8Array(e.length/2);for(let r=0;r<e.length;r=r+2){const n=e.slice(r,r+2);t[r/2]=parseInt(n,16)}return t}static ToDateTime(e){return new Date(e)}static FromDateTime(e){const t=e.toISOString();return t}static Base64Padding(e){const t=4-e.length%4;if(t<4){for(let r=0;r<t;r++){e+="="}}return e}}const APPLICATION_XML="application/xml";var XmlNodeType;(function(e){e[e["None"]=0]="None";e[e["Element"]=1]="Element";e[e["Attribute"]=2]="Attribute";e[e["Text"]=3]="Text";e[e["CDATA"]=4]="CDATA";e[e["EntityReference"]=5]="EntityReference";e[e["Entity"]=6]="Entity";e[e["ProcessingInstruction"]=7]="ProcessingInstruction";e[e["Comment"]=8]="Comment";e[e["Document"]=9]="Document";e[e["DocumentType"]=10]="DocumentType";e[e["DocumentFragment"]=11]="DocumentFragment";e[e["Notation"]=12]="Notation";e[e["Whitespace"]=13]="Whitespace";e[e["SignificantWhitespace"]=14]="SignificantWhitespace";e[e["EndElement"]=15]="EndElement";e[e["EndEntity"]=16]="EndEntity";e[e["XmlDeclaration"]=17]="XmlDeclaration"})(XmlNodeType||(XmlNodeType={}));let xpath=(e,t)=>{throw new Error("Not implemented")};let sWindow;if(typeof self==="undefined"){sWindow=global;const e=require("@xmldom/xmldom");xpath=require("xpath.js");sWindow.XMLSerializer=e.XMLSerializer;sWindow.DOMParser=e.DOMParser;sWindow.DOMImplementation=e.DOMImplementation;sWindow.document=(new DOMImplementation).createDocument("http://www.w3.org/1999/xhtml","html",null)}else{sWindow=self}function SelectNodesEx(e,t){const r=e.ownerDocument==null?e:e.ownerDocument;const n=document.createNSResolver(e.ownerDocument==null?e.documentElement:e.ownerDocument.documentElement);const i=r.evaluate(t,e,n,XPathResult.ANY_TYPE,null);const s=[];let a;while(a=i.iterateNext()){s.push(a)}return s}const Select=typeof self!=="undefined"?SelectNodesEx:xpath;function Parse(e){e=e.replace(/\r\n/g,"\n").replace(/\r/g,"\n");return(new DOMParser).parseFromString(e,APPLICATION_XML)}function SelectSingleNode(e,t){const r=Select(e,t);if(r&&r.length>0){return r[0]}return null}function _SelectNamespaces(e,t={}){if(isElement(e)){if(e.namespaceURI&&e.namespaceURI!=="http://www.w3.org/XML/1998/namespace"&&!t[e.prefix||""]){t[e.prefix?e.prefix:""]=e.namespaceURI}for(let r=0;r<e.childNodes.length;r++){const n=e.childNodes.item(r);if(n&&n.nodeType===XmlNodeType.Element){_SelectNamespaces(n,t)}}}}function SelectNamespaces(e){const t={};_SelectNamespaces(e,t);return t}function assign$3(e,...t){const r=arguments[0];for(let e=1;e<arguments.length;e++){const t=arguments[e];for(const e in t){if(!t.hasOwnProperty(e)){continue}r[e]=t[e]}}return r}function isNodeType(e,t){return e&&e.nodeType===t}function isElement(e){return isNodeType(e,XmlNodeType.Element)}function isDocument(e){return isNodeType(e,XmlNodeType.Document)}const XmlBase64Converter={get:e=>{if(e){return Convert$1.ToBase64(e)}return void 0},set:e=>Convert$1.FromBase64(e)};const XmlNumberConverter={get:e=>{if(e){return e.toString()}return"0"},set:e=>Number(e)};const DEFAULT_ROOT_NAME="xml_root";class XmlObject{constructor(e={}){this.prefix=this.GetStatic().prefix||null;this.localName=this.GetStatic().localName;this.namespaceURI=this.GetStatic().namespaceURI;if(e){for(const[t,r]of Object.entries(e)){if(r!==undefined){this[t]=r}}}}static LoadXml(e){const t=new this;t.LoadXml(e);return t}static GetElement(e,t,r=true){const n=e.getElementsByTagName(t);if(r&&n.length===0){throw new XmlError(XE.ELEMENT_MISSING,t,e.localName)}return n[0]||null}static GetAttribute(e,t,r,n=true){if(e.hasAttribute(t)){return e.getAttribute(t)}else{if(n){throw new XmlError(XE.ATTRIBUTE_MISSING,t,e.localName)}return r}}static GetElementById(e,t){if(e==null||t==null){return null}let r=null;if(isDocument(e)){r=e.getElementById(t)}if(r==null){r=SelectSingleNode(e,`//*[@*[local-name()='Id']='${t}']`);if(r==null){r=SelectSingleNode(e,`//*[@*[local-name()='ID']='${t}']`);if(r==null){r=SelectSingleNode(e,`//*[@*[local-name()='id']='${t}']`)}}}return r}static CreateDocument(e=DEFAULT_ROOT_NAME,t=null,r=null){let n="";let i="";let s="";if(r){n=r+":";i=":"+r}if(t){s=` xmlns${i}="${t}"`}const a=`${n}${e}`;const o=(new DOMParser).parseFromString(`<${a}${s}></${a}>`,APPLICATION_XML);return o}static GetChildren(e,t,r){e=isDocument(e)?e.documentElement:e;const n=[];for(let i=0;i<e.childNodes.length;i++){const s=e.childNodes[i];if(isElement(s)&&s.localName===t&&(s.namespaceURI===r||!r)){n.push(s)}}return n}static GetFirstChild(e,t,r){e=isDocument(e)?e.documentElement:e;for(let n=0;n<e.childNodes.length;n++){const i=e.childNodes[n];if(isElement(i)&&i.localName===t&&(i.namespaceURI===r||!r)){return i}}return null}static GetChild(e,t,r,n=true){for(let n=0;n<e.childNodes.length;n++){const i=e.childNodes[n];if(isElement(i)&&i.localName===t&&(i.namespaceURI===r||!r)){return i}}if(n){throw new XmlError(XE.ELEMENT_MISSING,t,e.localName)}return null}get Element(){return this.element}get Prefix(){return this.prefix}set Prefix(e){this.prefix=e}get LocalName(){return this.localName}get NamespaceURI(){return this.namespaceURI||null}HasChanged(){const e=this.GetStatic();if(e.items){for(const t in e.items){if(!e.items.hasOwnProperty(t)){continue}const r=e.items[t];const n=this[t];if(r.parser&&n&&n.HasChanged()){return true}}}return this.element===null}GetXml(e){if(!(e||this.HasChanged())){return this.element||null}const t=this;const r=this.CreateDocument();const n=this.CreateElement();const i=this.GetStatic();const s=this.localName;if(i.items){for(const e in i.items){if(!i.items.hasOwnProperty(e)){continue}const a=t[e];const o=i.items[e];switch(o.type){case CONTENT$1:{const e=o;const t=e.converter?e.converter.get(a):a;if(e.required&&(t===null||t===void 0)){throw new XmlError(XE.CONTENT_MISSING,s)}if(e.defaultValue!==a||e.required){n.textContent=t}break}case ATTRIBUTE:{const e=o;const t=e.converter?e.converter.get(a):a;if(e.required&&(t===null||t===void 0)){throw new XmlError(XE.ATTRIBUTE_MISSING,e.localName,s)}if(e.defaultValue!==a||e.required){if(!e.namespaceURI){n.setAttribute(e.localName,t)}else{n.setAttributeNS(e.namespaceURI,e.localName,t)}}break}case ELEMENT:{const e=o;let t=null;if(e.parser){if(e.required&&!a||e.minOccurs&&!a.Count){throw new XmlError(XE.ELEMENT_MISSING,a.localName,s)}if(a){t=a.GetXml(a.element===void 0&&(e.required||a.Count))}}else{const n=e.converter?e.converter.get(a):a;if(e.required&&n===void 0){throw new XmlError(XE.ELEMENT_MISSING,e.localName,s)}if(a!==e.defaultValue||e.required){if(!e.namespaceURI){t=r.createElement(`${e.prefix?e.prefix+":":""}${e.localName}`)}else{t=r.createElementNS(e.namespaceURI,`${e.prefix?e.prefix+":":""}${e.localName}`)}if(Array.isArray(n)){for(const e of n){const r=e instanceof XmlObject?e.GetXml(true):e;if(r!==null){t.appendChild(r)}}}else if(n instanceof XmlObject){t.appendChild(n.GetXml(true))}else{t.textContent=n}}}if(t){if(e.noRoot){const r=[];for(let e=0;e<t.childNodes.length;e++){const n=t.childNodes.item(e);if(isElement(n)){r.push(n)}}if(r.length<e.minOccurs||r.length>e.maxOccurs){throw new XmlError(XE.COLLECTION_LIMIT,a.localName,i.localName)}r.forEach((e=>n.appendChild(e.cloneNode(true))))}else if(t.childNodes.length<e.minOccurs||t.childNodes.length>e.maxOccurs){throw new XmlError(XE.COLLECTION_LIMIT,a.localName,i.localName)}else{n.appendChild(t)}}break}}}}this.OnGetXml(n);this.element=n;return n}LoadXml(e){let t;const r=this;if(typeof e==="string"){const r=Parse(e);t=r.documentElement}else{t=e}if(!t){throw new XmlError(XE.PARAM_REQUIRED,"element")}const n=this.GetStatic();const i=this.localName;if(!(t.localName===i&&t.namespaceURI==this.NamespaceURI)){throw new XmlError(XE.ELEMENT_MALFORMED,i)}if(n.items){for(const e in n.items){if(!n.items.hasOwnProperty(e)){continue}const s=n.items[e];switch(s.type){case CONTENT$1:{const n=s;if(n.required&&!t.textContent){throw new XmlError(XE.CONTENT_MISSING,i)}if(!t.textContent){r[e]=n.defaultValue}else{const i=n.converter?n.converter.set(t.textContent):t.textContent;r[e]=i}break}case ATTRIBUTE:{const n=s;let a;let o;if(!n.localName){throw new XmlError(XE.PARAM_REQUIRED,"localName")}if(n.namespaceURI){a=t.hasAttributeNS.bind(t,n.namespaceURI,n.localName);o=t.getAttributeNS.bind(t,n.namespaceURI,n.localName)}else{a=t.hasAttribute.bind(t,n.localName);o=t.getAttribute.bind(t,n.localName)}if(n.required&&!a()){throw new XmlError(XE.ATTRIBUTE_MISSING,n.localName,i)}if(!a()){r[e]=n.defaultValue}else{const t=n.converter?n.converter.set(o()):o();r[e]=t}break}case ELEMENT:{const n=s;if(n.noRoot){if(!n.parser){throw new XmlError(XE.XML_EXCEPTION,`Schema for '${n.localName}' with flag noRoot must have 'parser'`)}const s=new n.parser;if(!(s instanceof XmlCollection)){throw new XmlError(XE.XML_EXCEPTION,`Schema for '${n.localName}' with flag noRoot must have 'parser' like instance of XmlCollection`)}s.OnLoadXml(t);delete s.element;if(s.Count<n.minOccurs||s.Count>n.maxOccurs){throw new XmlError(XE.COLLECTION_LIMIT,n.parser.localName,i)}r[e]=s;continue}let a=null;for(let e=0;e<t.childNodes.length;e++){const r=t.childNodes.item(e);if(!isElement(r)){continue}const i=r;if(i.localName===n.localName&&i.namespaceURI==n.namespaceURI){a=i;break}}if(n.required&&!a){throw new XmlError(XE.ELEMENT_MISSING,n.parser?n.parser.localName:n.localName,i)}if(!n.parser){if(!a){r[e]=n.defaultValue}else{const t=n.converter?n.converter.set(a.textContent):a.textContent;r[e]=t}}else{if(a){const t=new n.parser;t.localName=n.localName;t.namespaceURI=n.namespaceURI;r[e]=t;t.LoadXml(a)}}break}}}}this.OnLoadXml(t);this.prefix=t.prefix||"";this.element=t}toString(){const e=this.GetXml();return e?(new XMLSerializer).serializeToString(e):""}GetElement(e,t=true){if(!this.element){throw new XmlError(XE.NULL_PARAM,this.localName)}return XmlObject.GetElement(this.element,e,t)}GetChildren(e,t){if(!this.element){throw new XmlError(XE.NULL_PARAM,this.localName)}return XmlObject.GetChildren(this.element,e,t||this.NamespaceURI||undefined)}GetChild(e,t=true){if(!this.element){throw new XmlError(XE.NULL_PARAM,this.localName)}return XmlObject.GetChild(this.element,e,this.NamespaceURI||undefined,t)}GetFirstChild(e,t){if(!this.element){throw new XmlError(XE.NULL_PARAM,this.localName)}return XmlObject.GetFirstChild(this.element,e,t)}GetAttribute(e,t,r=true){if(!this.element){throw new XmlError(XE.NULL_PARAM,this.localName)}return XmlObject.GetAttribute(this.element,e,t,r)}IsEmpty(){return this.Element===void 0}OnLoadXml(e){}GetStatic(){return this.constructor}GetPrefix(){return this.Prefix?this.prefix+":":""}OnGetXml(e){}CreateElement(e,t,r=null,n=null){if(!e){e=this.CreateDocument()}t=t||this.localName;r=r||this.NamespaceURI;n=n||this.prefix;const i=(n?`${n}:`:"")+t;const s=r?e.createElementNS(r,i):e.createElement(i);e.importNode(s,true);return s}CreateDocument(){return XmlObject.CreateDocument(this.localName,this.NamespaceURI,this.Prefix)}}class XmlCollection extends XmlObject{constructor(){super(...arguments);this.MaxOccurs=Number.MAX_VALUE;this.MinOccurs=0;this.items=[]}HasChanged(){const e=super.HasChanged();const t=this.Some((e=>e.HasChanged()));return e||t}get Count(){return this.items.length}Item(e){return this.items[e]||null}Add(e){this.items.push(e);this.element=null}Pop(){this.element=null;return this.items.pop()}RemoveAt(e){this.items=this.items.filter(((t,r)=>r!==e));this.element=null}Clear(){this.items=new Array;this.element=null}GetIterator(){return this.items}ForEach(e){this.GetIterator().forEach(e)}Map(e){return new Collection(this.GetIterator().map(e))}Filter(e){return new Collection(this.GetIterator().filter(e))}Sort(e){return new Collection(this.GetIterator().sort(e))}Every(e){return this.GetIterator().every(e)}Some(e){return this.GetIterator().some(e)}IsEmpty(){return this.Count===0}OnGetXml(e){for(const t of this.GetIterator()){const r=t.GetXml();if(r){e.appendChild(r)}}}OnLoadXml(e){const t=this.GetStatic();if(!t.parser){throw new XmlError(XE.XML_EXCEPTION,`${t.localName} doesn't have required 'parser' in @XmlElement`)}for(let r=0;r<e.childNodes.length;r++){const n=e.childNodes.item(r);if(!(isElement(n)&&n.localName===t.parser.localName&&n.namespaceURI==t.namespaceURI)){continue}const i=n;const s=new t.parser;s.LoadXml(i);this.Add(s)}}}class NamespaceManager extends Collection{Add(e){e.prefix=e.prefix||"";e.namespace=e.namespace||"";super.Add(e)}GetPrefix(e,t=this.Count-1){const r=this.Count-1;e=e||"";if(t>r){t=r}for(let r=t;r>=0;r--){const t=this.items[r];if(t.prefix===e){return t}}return null}GetNamespace(e,t=this.Count-1){const r=this.Count-1;e=e||"";if(t>r){t=r}for(let r=t;r>=0;r--){const t=this.items[r];if(t.namespace===e){return t}}return null}}var build$1={};
/*!
 * MIT License
 * 
 * Copyright (c) 2017-2022 Peculiar Ventures, LLC
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 * 
 */const ARRAY_BUFFER_NAME="[object ArrayBuffer]";class BufferSourceConverter{static isArrayBuffer(e){return Object.prototype.toString.call(e)===ARRAY_BUFFER_NAME}static toArrayBuffer(e){if(this.isArrayBuffer(e)){return e}if(e.byteLength===e.buffer.byteLength){return e.buffer}if(e.byteOffset===0&&e.byteLength===e.buffer.byteLength){return e.buffer}return this.toUint8Array(e.buffer).slice(e.byteOffset,e.byteOffset+e.byteLength).buffer}static toUint8Array(e){return this.toView(e,Uint8Array)}static toView(e,t){if(e.constructor===t){return e}if(this.isArrayBuffer(e)){return new t(e)}if(this.isArrayBufferView(e)){return new t(e.buffer,e.byteOffset,e.byteLength)}throw new TypeError("The provided value is not of type '(ArrayBuffer or ArrayBufferView)'")}static isBufferSource(e){return this.isArrayBufferView(e)||this.isArrayBuffer(e)}static isArrayBufferView(e){return ArrayBuffer.isView(e)||e&&this.isArrayBuffer(e.buffer)}static isEqual(e,t){const r=BufferSourceConverter.toUint8Array(e);const n=BufferSourceConverter.toUint8Array(t);if(r.length!==n.byteLength){return false}for(let e=0;e<r.length;e++){if(r[e]!==n[e]){return false}}return true}static concat(...e){let t;if(Array.isArray(e[0])&&!(e[1]instanceof Function)){t=e[0]}else if(Array.isArray(e[0])&&e[1]instanceof Function){t=e[0]}else{if(e[e.length-1]instanceof Function){t=e.slice(0,e.length-1)}else{t=e}}let r=0;for(const e of t){r+=e.byteLength}const n=new Uint8Array(r);let i=0;for(const e of t){const t=this.toUint8Array(e);n.set(t,i);i+=t.length}if(e[e.length-1]instanceof Function){return this.toView(n,e[e.length-1])}return n.buffer}}const STRING_TYPE="string";const HEX_REGEX=/^[0-9a-f]+$/i;const BASE64_REGEX=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/;const BASE64URL_REGEX=/^[a-zA-Z0-9-_]+$/;class Utf8Converter{static fromString(e){const t=unescape(encodeURIComponent(e));const r=new Uint8Array(t.length);for(let e=0;e<t.length;e++){r[e]=t.charCodeAt(e)}return r.buffer}static toString(e){const t=BufferSourceConverter.toUint8Array(e);let r="";for(let e=0;e<t.length;e++){r+=String.fromCharCode(t[e])}const n=decodeURIComponent(escape(r));return n}}class Utf16Converter{static toString(e,t=false){const r=BufferSourceConverter.toArrayBuffer(e);const n=new DataView(r);let i="";for(let e=0;e<r.byteLength;e+=2){const r=n.getUint16(e,t);i+=String.fromCharCode(r)}return i}static fromString(e,t=false){const r=new ArrayBuffer(e.length*2);const n=new DataView(r);for(let r=0;r<e.length;r++){n.setUint16(r*2,e.charCodeAt(r),t)}return r}}class Convert{static isHex(e){return typeof e===STRING_TYPE&&HEX_REGEX.test(e)}static isBase64(e){return typeof e===STRING_TYPE&&BASE64_REGEX.test(e)}static isBase64Url(e){return typeof e===STRING_TYPE&&BASE64URL_REGEX.test(e)}static ToString(e,t="utf8"){const r=BufferSourceConverter.toUint8Array(e);switch(t.toLowerCase()){case"utf8":return this.ToUtf8String(r);case"binary":return this.ToBinary(r);case"hex":return this.ToHex(r);case"base64":return this.ToBase64(r);case"base64url":return this.ToBase64Url(r);case"utf16le":return Utf16Converter.toString(r,true);case"utf16":case"utf16be":return Utf16Converter.toString(r);default:throw new Error(`Unknown type of encoding '${t}'`)}}static FromString(e,t="utf8"){if(!e){return new ArrayBuffer(0)}switch(t.toLowerCase()){case"utf8":return this.FromUtf8String(e);case"binary":return this.FromBinary(e);case"hex":return this.FromHex(e);case"base64":return this.FromBase64(e);case"base64url":return this.FromBase64Url(e);case"utf16le":return Utf16Converter.fromString(e,true);case"utf16":case"utf16be":return Utf16Converter.fromString(e);default:throw new Error(`Unknown type of encoding '${t}'`)}}static ToBase64(e){const t=BufferSourceConverter.toUint8Array(e);if(typeof btoa!=="undefined"){const e=this.ToString(t,"binary");return btoa(e)}else{return Buffer.from(t).toString("base64")}}static FromBase64(e){const t=this.formatString(e);if(!t){return new ArrayBuffer(0)}if(!Convert.isBase64(t)){throw new TypeError("Argument 'base64Text' is not Base64 encoded")}if(typeof atob!=="undefined"){return this.FromBinary(atob(t))}else{return new Uint8Array(Buffer.from(t,"base64")).buffer}}static FromBase64Url(e){const t=this.formatString(e);if(!t){return new ArrayBuffer(0)}if(!Convert.isBase64Url(t)){throw new TypeError("Argument 'base64url' is not Base64Url encoded")}return this.FromBase64(this.Base64Padding(t.replace(/\-/g,"+").replace(/\_/g,"/")))}static ToBase64Url(e){return this.ToBase64(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}static FromUtf8String(e,t=Convert.DEFAULT_UTF8_ENCODING){switch(t){case"ascii":return this.FromBinary(e);case"utf8":return Utf8Converter.fromString(e);case"utf16":case"utf16be":return Utf16Converter.fromString(e);case"utf16le":case"usc2":return Utf16Converter.fromString(e,true);default:throw new Error(`Unknown type of encoding '${t}'`)}}static ToUtf8String(e,t=Convert.DEFAULT_UTF8_ENCODING){switch(t){case"ascii":return this.ToBinary(e);case"utf8":return Utf8Converter.toString(e);case"utf16":case"utf16be":return Utf16Converter.toString(e);case"utf16le":case"usc2":return Utf16Converter.toString(e,true);default:throw new Error(`Unknown type of encoding '${t}'`)}}static FromBinary(e){const t=e.length;const r=new Uint8Array(t);for(let n=0;n<t;n++){r[n]=e.charCodeAt(n)}return r.buffer}static ToBinary(e){const t=BufferSourceConverter.toUint8Array(e);let r="";for(let e=0;e<t.length;e++){r+=String.fromCharCode(t[e])}return r}static ToHex(e){const t=BufferSourceConverter.toUint8Array(e);let r="";const n=t.length;for(let e=0;e<n;e++){const n=t[e];if(n<16){r+="0"}r+=n.toString(16)}return r}static FromHex(e){let t=this.formatString(e);if(!t){return new ArrayBuffer(0)}if(!Convert.isHex(t)){throw new TypeError("Argument 'hexString' is not HEX encoded")}if(t.length%2){t=`0${t}`}const r=new Uint8Array(t.length/2);for(let e=0;e<t.length;e=e+2){const n=t.slice(e,e+2);r[e/2]=parseInt(n,16)}return r.buffer}static ToUtf16String(e,t=false){return Utf16Converter.toString(e,t)}static FromUtf16String(e,t=false){return Utf16Converter.fromString(e,t)}static Base64Padding(e){const t=4-e.length%4;if(t<4){for(let r=0;r<t;r++){e+="="}}return e}static formatString(e){return(e===null||e===void 0?void 0:e.replace(/[\n\r\t ]/g,""))||""}}Convert.DEFAULT_UTF8_ENCODING="utf8";function assign$2(e,...t){const r=arguments[0];for(let e=1;e<arguments.length;e++){const t=arguments[e];for(const e in t){r[e]=t[e]}}return r}function combine(...e){const t=e.map((e=>e.byteLength)).reduce(((e,t)=>e+t));const r=new Uint8Array(t);let n=0;e.map((e=>new Uint8Array(e))).forEach((e=>{for(const t of e){r[n++]=t}}));return r.buffer}function isEqual$1(e,t){if(!(e&&t)){return false}if(e.byteLength!==t.byteLength){return false}const r=new Uint8Array(e);const n=new Uint8Array(t);for(let t=0;t<e.byteLength;t++){if(r[t]!==n[t]){return false}}return true}var BufferSourceConverter_1=build$1.BufferSourceConverter=BufferSourceConverter;var Convert_1=build$1.Convert=Convert;build$1.assign=assign$2;var combine_1=build$1.combine=combine;var isEqual_1$1=build$1.isEqual=isEqual$1;
/*!
 Copyright (c) Peculiar Ventures, LLC
*/function getParametersValue(e,t,r){var n;if(e instanceof Object===false){return r}return(n=e[t])!==null&&n!==void 0?n:r}function bufferToHexCodes(e,t=0,r=e.byteLength-t,n=false){let i="";for(const s of new Uint8Array(e,t,r)){const e=s.toString(16).toUpperCase();if(e.length===1){i+="0"}i+=e;if(n){i+=" "}}return i.trim()}function utilFromBase(e,t){let r=0;if(e.length===1){return e[0]}for(let n=e.length-1;n>=0;n--){r+=e[e.length-1-n]*Math.pow(2,t*n)}return r}function utilToBase(e,t,r=-1){const n=r;let i=e;let s=0;let a=Math.pow(2,t);for(let r=1;r<8;r++){if(e<a){let e;if(n<0){e=new ArrayBuffer(r);s=r}else{if(n<r){return new ArrayBuffer(0)}e=new ArrayBuffer(n);s=n}const a=new Uint8Array(e);for(let e=r-1;e>=0;e--){const r=Math.pow(2,e*t);a[s-e-1]=Math.floor(i/r);i-=a[s-e-1]*r}return e}a*=Math.pow(2,t)}return new ArrayBuffer(0)}function utilConcatBuf(...e){let t=0;let r=0;for(const r of e){t+=r.byteLength}const n=new ArrayBuffer(t);const i=new Uint8Array(n);for(const t of e){i.set(new Uint8Array(t),r);r+=t.byteLength}return n}function utilConcatView(...e){let t=0;let r=0;for(const r of e){t+=r.length}const n=new ArrayBuffer(t);const i=new Uint8Array(n);for(const t of e){i.set(t,r);r+=t.length}return i}function utilDecodeTC(){const e=new Uint8Array(this.valueHex);if(this.valueHex.byteLength>=2){const t=e[0]===255&&e[1]&128;const r=e[0]===0&&(e[1]&128)===0;if(t||r){this.warnings.push("Needlessly long format")}}const t=new ArrayBuffer(this.valueHex.byteLength);const r=new Uint8Array(t);for(let e=0;e<this.valueHex.byteLength;e++){r[e]=0}r[0]=e[0]&128;const n=utilFromBase(r,8);const i=new ArrayBuffer(this.valueHex.byteLength);const s=new Uint8Array(i);for(let t=0;t<this.valueHex.byteLength;t++){s[t]=e[t]}s[0]&=127;const a=utilFromBase(s,8);return a-n}function utilEncodeTC(e){const t=e<0?e*-1:e;let r=128;for(let n=1;n<8;n++){if(t<=r){if(e<0){const e=r-t;const i=utilToBase(e,8,n);const s=new Uint8Array(i);s[0]|=128;return i}let i=utilToBase(t,8,n);let s=new Uint8Array(i);if(s[0]&128){const e=i.slice(0);const t=new Uint8Array(e);i=new ArrayBuffer(i.byteLength+1);s=new Uint8Array(i);for(let r=0;r<e.byteLength;r++){s[r+1]=t[r]}s[0]=0}return i}r*=Math.pow(2,8)}return new ArrayBuffer(0)}function isEqualBuffer(e,t){if(e.byteLength!==t.byteLength){return false}const r=new Uint8Array(e);const n=new Uint8Array(t);for(let e=0;e<r.length;e++){if(r[e]!==n[e]){return false}}return true}function padNumber(e,t){const r=e.toString(10);if(t<r.length){return""}const n=t-r.length;const i=new Array(n);for(let e=0;e<n;e++){i[e]="0"}const s=i.join("");return s.concat(r)}const base64Template="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";const base64UrlTemplate="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=";function toBase64(e,t=false,r=false,n=false){let i=0;let s=0;let a=0;let o="";const f=t?base64UrlTemplate:base64Template;if(n){let t=0;for(let r=0;r<e.length;r++){if(e.charCodeAt(r)!==0){t=r;break}}e=e.slice(t)}while(i<e.length){const t=e.charCodeAt(i++);if(i>=e.length){s=1}const n=e.charCodeAt(i++);if(i>=e.length){a=1}const c=e.charCodeAt(i++);const u=t>>2;const l=(t&3)<<4|n>>4;let h=(n&15)<<2|c>>6;let d=c&63;if(s===1){h=d=64}else{if(a===1){d=64}}if(r){if(h===64){o+=`${f.charAt(u)}${f.charAt(l)}`}else{if(d===64){o+=`${f.charAt(u)}${f.charAt(l)}${f.charAt(h)}`}else{o+=`${f.charAt(u)}${f.charAt(l)}${f.charAt(h)}${f.charAt(d)}`}}}else{o+=`${f.charAt(u)}${f.charAt(l)}${f.charAt(h)}${f.charAt(d)}`}}return o}function fromBase64(e,t=false,r=false){const n=t?base64UrlTemplate:base64Template;function i(e){for(let t=0;t<64;t++){if(n.charAt(t)===e)return t}return 64}function s(e){return e===64?0:e}let a=0;let o="";while(a<e.length){const t=i(e.charAt(a++));const r=a>=e.length?0:i(e.charAt(a++));const n=a>=e.length?0:i(e.charAt(a++));const f=a>=e.length?0:i(e.charAt(a++));const c=s(t)<<2|s(r)>>4;const u=(s(r)&15)<<4|s(n)>>2;const l=(s(n)&3)<<6|s(f);o+=String.fromCharCode(c);if(n!==64){o+=String.fromCharCode(u)}if(f!==64){o+=String.fromCharCode(l)}}if(r){const e=o.length;let t=-1;for(let r=e-1;r>=0;r--){if(o.charCodeAt(r)!==0){t=r;break}}if(t!==-1){o=o.slice(0,t+1)}else{o=""}}return o}function arrayBufferToString(e){let t="";const r=new Uint8Array(e);for(const e of r){t+=String.fromCharCode(e)}return t}function stringToArrayBuffer(e){const t=e.length;const r=new ArrayBuffer(t);const n=new Uint8Array(r);for(let r=0;r<t;r++){n[r]=e.charCodeAt(r)}return r}const log2=Math.log(2);function nearestPowerOf2(e){const t=Math.log(e)/log2;const r=Math.floor(t);const n=Math.round(t);return r===n?r:n}function clearProps(e,t){for(const r of t){delete e[r]}}
/*!
 * Copyright (c) 2014, GMO GlobalSign
 * Copyright (c) 2015-2022, Peculiar Ventures
 * All rights reserved.
 * 
 * Author 2014-2019, Yury Strozhevsky
 * 
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 * 
 * * Redistributions of source code must retain the above copyright notice, this
 *   list of conditions and the following disclaimer.
 * 
 * * Redistributions in binary form must reproduce the above copyright notice, this
 *   list of conditions and the following disclaimer in the documentation and/or
 *   other materials provided with the distribution.
 * 
 * * Neither the name of the copyright holder nor the names of its
 *   contributors may be used to endorse or promote products derived from
 *   this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR
 * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
 * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 * 
 */function assertBigInt(){if(typeof BigInt==="undefined"){throw new Error("BigInt is not defined. Your environment doesn't implement BigInt.")}}function concat$9(e){let t=0;let r=0;for(let r=0;r<e.length;r++){const n=e[r];t+=n.byteLength}const n=new Uint8Array(t);for(let t=0;t<e.length;t++){const i=e[t];n.set(new Uint8Array(i),r);r+=i.byteLength}return n.buffer}function checkBufferParams(e,t,r,n){if(!(t instanceof Uint8Array)){e.error="Wrong parameter: inputBuffer must be 'Uint8Array'";return false}if(!t.byteLength){e.error="Wrong parameter: inputBuffer has zero length";return false}if(r<0){e.error="Wrong parameter: inputOffset less than zero";return false}if(n<0){e.error="Wrong parameter: inputLength less than zero";return false}if(t.byteLength-r-n<0){e.error="End of input reached before message was fully decoded (inconsistent offset and length values)";return false}return true}class ViewWriter{constructor(){this.items=[]}write(e){this.items.push(e)}final(){return concat$9(this.items)}}const powers2=[new Uint8Array([1])];const digitsString="0123456789";const NAME$2="name";const VALUE_HEX_VIEW="valueHexView";const IS_HEX_ONLY="isHexOnly";const ID_BLOCK="idBlock";const TAG_CLASS="tagClass";const TAG_NUMBER="tagNumber";const IS_CONSTRUCTED="isConstructed";const FROM_BER="fromBER";const TO_BER="toBER";const LOCAL="local";const EMPTY_STRING$1="";const EMPTY_BUFFER$1=new ArrayBuffer(0);const EMPTY_VIEW=new Uint8Array(0);const END_OF_CONTENT_NAME="EndOfContent";const OCTET_STRING_NAME="OCTET STRING";const BIT_STRING_NAME="BIT STRING";function HexBlock(e){var t;return t=class t extends e{constructor(...e){var t;super(...e);const r=e[0]||{};this.isHexOnly=(t=r.isHexOnly)!==null&&t!==void 0?t:false;this.valueHexView=r.valueHex?BufferSourceConverter_1.toUint8Array(r.valueHex):EMPTY_VIEW}get valueHex(){return this.valueHexView.slice().buffer}set valueHex(e){this.valueHexView=new Uint8Array(e)}fromBER(e,t,r){const n=e instanceof ArrayBuffer?new Uint8Array(e):e;if(!checkBufferParams(this,n,t,r)){return-1}const i=t+r;this.valueHexView=n.subarray(t,i);if(!this.valueHexView.length){this.warnings.push("Zero buffer length");return t}this.blockLength=r;return i}toBER(e=false){if(!this.isHexOnly){this.error="Flag 'isHexOnly' is not set, abort";return EMPTY_BUFFER$1}if(e){return new ArrayBuffer(this.valueHexView.byteLength)}return this.valueHexView.byteLength===this.valueHexView.buffer.byteLength?this.valueHexView.buffer:this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),isHexOnly:this.isHexOnly,valueHex:Convert_1.ToHex(this.valueHexView)}}},t.NAME="hexBlock",t}class LocalBaseBlock{constructor({blockLength:e=0,error:t=EMPTY_STRING$1,warnings:r=[],valueBeforeDecode:n=EMPTY_VIEW}={}){this.blockLength=e;this.error=t;this.warnings=r;this.valueBeforeDecodeView=BufferSourceConverter_1.toUint8Array(n)}static blockName(){return this.NAME}get valueBeforeDecode(){return this.valueBeforeDecodeView.slice().buffer}set valueBeforeDecode(e){this.valueBeforeDecodeView=new Uint8Array(e)}toJSON(){return{blockName:this.constructor.NAME,blockLength:this.blockLength,error:this.error,warnings:this.warnings,valueBeforeDecode:Convert_1.ToHex(this.valueBeforeDecodeView)}}}LocalBaseBlock.NAME="baseBlock";class ValueBlock extends LocalBaseBlock{fromBER(e,t,r){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}toBER(e,t){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}}ValueBlock.NAME="valueBlock";class LocalIdentificationBlock extends(HexBlock(LocalBaseBlock)){constructor({idBlock:e={}}={}){var t,r,n,i;super();if(e){this.isHexOnly=(t=e.isHexOnly)!==null&&t!==void 0?t:false;this.valueHexView=e.valueHex?BufferSourceConverter_1.toUint8Array(e.valueHex):EMPTY_VIEW;this.tagClass=(r=e.tagClass)!==null&&r!==void 0?r:-1;this.tagNumber=(n=e.tagNumber)!==null&&n!==void 0?n:-1;this.isConstructed=(i=e.isConstructed)!==null&&i!==void 0?i:false}else{this.tagClass=-1;this.tagNumber=-1;this.isConstructed=false}}toBER(e=false){let t=0;switch(this.tagClass){case 1:t|=0;break;case 2:t|=64;break;case 3:t|=128;break;case 4:t|=192;break;default:this.error="Unknown tag class";return EMPTY_BUFFER$1}if(this.isConstructed)t|=32;if(this.tagNumber<31&&!this.isHexOnly){const r=new Uint8Array(1);if(!e){let e=this.tagNumber;e&=31;t|=e;r[0]=t}return r.buffer}if(!this.isHexOnly){const r=utilToBase(this.tagNumber,7);const n=new Uint8Array(r);const i=r.byteLength;const s=new Uint8Array(i+1);s[0]=t|31;if(!e){for(let e=0;e<i-1;e++)s[e+1]=n[e]|128;s[i]=n[i-1]}return s.buffer}const r=new Uint8Array(this.valueHexView.byteLength+1);r[0]=t|31;if(!e){const e=this.valueHexView;for(let t=0;t<e.length-1;t++)r[t+1]=e[t]|128;r[this.valueHexView.byteLength]=e[e.length-1]}return r.buffer}fromBER(e,t,r){const n=BufferSourceConverter_1.toUint8Array(e);if(!checkBufferParams(this,n,t,r)){return-1}const i=n.subarray(t,t+r);if(i.length===0){this.error="Zero buffer length";return-1}const s=i[0]&192;switch(s){case 0:this.tagClass=1;break;case 64:this.tagClass=2;break;case 128:this.tagClass=3;break;case 192:this.tagClass=4;break;default:this.error="Unknown tag class";return-1}this.isConstructed=(i[0]&32)===32;this.isHexOnly=false;const a=i[0]&31;if(a!==31){this.tagNumber=a;this.blockLength=1}else{let e=1;let t=this.valueHexView=new Uint8Array(255);let r=255;while(i[e]&128){t[e-1]=i[e]&127;e++;if(e>=i.length){this.error="End of input reached before message was fully decoded";return-1}if(e===r){r+=255;const e=new Uint8Array(r);for(let r=0;r<t.length;r++)e[r]=t[r];t=this.valueHexView=new Uint8Array(r)}}this.blockLength=e+1;t[e-1]=i[e]&127;const n=new Uint8Array(e);for(let r=0;r<e;r++)n[r]=t[r];t=this.valueHexView=new Uint8Array(e);t.set(n);if(this.blockLength<=9)this.tagNumber=utilFromBase(t,7);else{this.isHexOnly=true;this.warnings.push("Tag too long, represented as hex-coded")}}if(this.tagClass===1&&this.isConstructed){switch(this.tagNumber){case 1:case 2:case 5:case 6:case 9:case 13:case 14:case 23:case 24:case 31:case 32:case 33:case 34:this.error="Constructed encoding used for primitive type";return-1}}return t+this.blockLength}toJSON(){return{...super.toJSON(),tagClass:this.tagClass,tagNumber:this.tagNumber,isConstructed:this.isConstructed}}}LocalIdentificationBlock.NAME="identificationBlock";class LocalLengthBlock extends LocalBaseBlock{constructor({lenBlock:e={}}={}){var t,r,n;super();this.isIndefiniteForm=(t=e.isIndefiniteForm)!==null&&t!==void 0?t:false;this.longFormUsed=(r=e.longFormUsed)!==null&&r!==void 0?r:false;this.length=(n=e.length)!==null&&n!==void 0?n:0}fromBER(e,t,r){const n=BufferSourceConverter_1.toUint8Array(e);if(!checkBufferParams(this,n,t,r)){return-1}const i=n.subarray(t,t+r);if(i.length===0){this.error="Zero buffer length";return-1}if(i[0]===255){this.error="Length block 0xFF is reserved by standard";return-1}this.isIndefiniteForm=i[0]===128;if(this.isIndefiniteForm){this.blockLength=1;return t+this.blockLength}this.longFormUsed=!!(i[0]&128);if(this.longFormUsed===false){this.length=i[0];this.blockLength=1;return t+this.blockLength}const s=i[0]&127;if(s>8){this.error="Too big integer";return-1}if(s+1>i.length){this.error="End of input reached before message was fully decoded";return-1}const a=t+1;const o=n.subarray(a,a+s);if(o[s-1]===0)this.warnings.push("Needlessly long encoded length");this.length=utilFromBase(o,8);if(this.longFormUsed&&this.length<=127)this.warnings.push("Unnecessary usage of long length form");this.blockLength=s+1;return t+this.blockLength}toBER(e=false){let t;let r;if(this.length>127)this.longFormUsed=true;if(this.isIndefiniteForm){t=new ArrayBuffer(1);if(e===false){r=new Uint8Array(t);r[0]=128}return t}if(this.longFormUsed){const n=utilToBase(this.length,8);if(n.byteLength>127){this.error="Too big length";return EMPTY_BUFFER$1}t=new ArrayBuffer(n.byteLength+1);if(e)return t;const i=new Uint8Array(n);r=new Uint8Array(t);r[0]=n.byteLength|128;for(let e=0;e<n.byteLength;e++)r[e+1]=i[e];return t}t=new ArrayBuffer(1);if(e===false){r=new Uint8Array(t);r[0]=this.length}return t}toJSON(){return{...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,longFormUsed:this.longFormUsed,length:this.length}}}LocalLengthBlock.NAME="lengthBlock";const typeStore={};class BaseBlock extends LocalBaseBlock{constructor({name:e=EMPTY_STRING$1,optional:t=false,primitiveSchema:r,...n}={},i){super(n);this.name=e;this.optional=t;if(r){this.primitiveSchema=r}this.idBlock=new LocalIdentificationBlock(n);this.lenBlock=new LocalLengthBlock(n);this.valueBlock=i?new i(n):new ValueBlock(n)}fromBER(e,t,r){const n=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);if(n===-1){this.error=this.valueBlock.error;return n}if(!this.idBlock.error.length)this.blockLength+=this.idBlock.blockLength;if(!this.lenBlock.error.length)this.blockLength+=this.lenBlock.blockLength;if(!this.valueBlock.error.length)this.blockLength+=this.valueBlock.blockLength;return n}toBER(e,t){const r=t||new ViewWriter;if(!t){prepareIndefiniteForm(this)}const n=this.idBlock.toBER(e);r.write(n);if(this.lenBlock.isIndefiniteForm){r.write(new Uint8Array([128]).buffer);this.valueBlock.toBER(e,r);r.write(new ArrayBuffer(2))}else{const t=this.valueBlock.toBER(e);this.lenBlock.length=t.byteLength;const n=this.lenBlock.toBER(e);r.write(n);r.write(t)}if(!t){return r.final()}return EMPTY_BUFFER$1}toJSON(){const e={...super.toJSON(),idBlock:this.idBlock.toJSON(),lenBlock:this.lenBlock.toJSON(),valueBlock:this.valueBlock.toJSON(),name:this.name,optional:this.optional};if(this.primitiveSchema)e.primitiveSchema=this.primitiveSchema.toJSON();return e}toString(e="ascii"){if(e==="ascii"){return this.onAsciiEncoding()}return Convert_1.ToHex(this.toBER())}onAsciiEncoding(){return`${this.constructor.NAME} : ${Convert_1.ToHex(this.valueBlock.valueBeforeDecodeView)}`}isEqual(e){if(this===e){return true}if(!(e instanceof this.constructor)){return false}const t=this.toBER();const r=e.toBER();return isEqualBuffer(t,r)}}BaseBlock.NAME="BaseBlock";function prepareIndefiniteForm(e){if(e instanceof typeStore.Constructed){for(const t of e.valueBlock.value){if(prepareIndefiniteForm(t)){e.lenBlock.isIndefiniteForm=true}}}return!!e.lenBlock.isIndefiniteForm}class BaseStringBlock extends BaseBlock{constructor({value:e=EMPTY_STRING$1,...t}={},r){super(t,r);if(e){this.fromString(e)}}getValue(){return this.valueBlock.value}setValue(e){this.valueBlock.value=e}fromBER(e,t,r){const n=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);if(n===-1){this.error=this.valueBlock.error;return n}this.fromBuffer(this.valueBlock.valueHexView);if(!this.idBlock.error.length)this.blockLength+=this.idBlock.blockLength;if(!this.lenBlock.error.length)this.blockLength+=this.lenBlock.blockLength;if(!this.valueBlock.error.length)this.blockLength+=this.valueBlock.blockLength;return n}onAsciiEncoding(){return`${this.constructor.NAME} : '${this.valueBlock.value}'`}}BaseStringBlock.NAME="BaseStringBlock";class LocalPrimitiveValueBlock extends(HexBlock(ValueBlock)){constructor({isHexOnly:e=true,...t}={}){super(t);this.isHexOnly=e}}LocalPrimitiveValueBlock.NAME="PrimitiveValueBlock";var _a$w;class Primitive extends BaseBlock{constructor(e={}){super(e,LocalPrimitiveValueBlock);this.idBlock.isConstructed=false}}_a$w=Primitive;(()=>{typeStore.Primitive=_a$w})();Primitive.NAME="PRIMITIVE";function localChangeType(e,t){if(e instanceof t){return e}const r=new t;r.idBlock=e.idBlock;r.lenBlock=e.lenBlock;r.warnings=e.warnings;r.valueBeforeDecodeView=e.valueBeforeDecodeView;return r}function localFromBER(e,t=0,r=e.length){const n=t;let i=new BaseBlock({},ValueBlock);const s=new LocalBaseBlock;if(!checkBufferParams(s,e,t,r)){i.error=s.error;return{offset:-1,result:i}}const a=e.subarray(t,t+r);if(!a.length){i.error="Zero buffer length";return{offset:-1,result:i}}let o=i.idBlock.fromBER(e,t,r);if(i.idBlock.warnings.length){i.warnings.concat(i.idBlock.warnings)}if(o===-1){i.error=i.idBlock.error;return{offset:-1,result:i}}t=o;r-=i.idBlock.blockLength;o=i.lenBlock.fromBER(e,t,r);if(i.lenBlock.warnings.length){i.warnings.concat(i.lenBlock.warnings)}if(o===-1){i.error=i.lenBlock.error;return{offset:-1,result:i}}t=o;r-=i.lenBlock.blockLength;if(!i.idBlock.isConstructed&&i.lenBlock.isIndefiniteForm){i.error="Indefinite length form used for primitive encoding form";return{offset:-1,result:i}}let f=BaseBlock;switch(i.idBlock.tagClass){case 1:if(i.idBlock.tagNumber>=37&&i.idBlock.isHexOnly===false){i.error="UNIVERSAL 37 and upper tags are reserved by ASN.1 standard";return{offset:-1,result:i}}switch(i.idBlock.tagNumber){case 0:if(i.idBlock.isConstructed&&i.lenBlock.length>0){i.error="Type [UNIVERSAL 0] is reserved";return{offset:-1,result:i}}f=typeStore.EndOfContent;break;case 1:f=typeStore.Boolean;break;case 2:f=typeStore.Integer;break;case 3:f=typeStore.BitString;break;case 4:f=typeStore.OctetString;break;case 5:f=typeStore.Null;break;case 6:f=typeStore.ObjectIdentifier;break;case 10:f=typeStore.Enumerated;break;case 12:f=typeStore.Utf8String;break;case 13:f=typeStore.RelativeObjectIdentifier;break;case 14:f=typeStore.TIME;break;case 15:i.error="[UNIVERSAL 15] is reserved by ASN.1 standard";return{offset:-1,result:i};case 16:f=typeStore.Sequence;break;case 17:f=typeStore.Set;break;case 18:f=typeStore.NumericString;break;case 19:f=typeStore.PrintableString;break;case 20:f=typeStore.TeletexString;break;case 21:f=typeStore.VideotexString;break;case 22:f=typeStore.IA5String;break;case 23:f=typeStore.UTCTime;break;case 24:f=typeStore.GeneralizedTime;break;case 25:f=typeStore.GraphicString;break;case 26:f=typeStore.VisibleString;break;case 27:f=typeStore.GeneralString;break;case 28:f=typeStore.UniversalString;break;case 29:f=typeStore.CharacterString;break;case 30:f=typeStore.BmpString;break;case 31:f=typeStore.DATE;break;case 32:f=typeStore.TimeOfDay;break;case 33:f=typeStore.DateTime;break;case 34:f=typeStore.Duration;break;default:{const e=i.idBlock.isConstructed?new typeStore.Constructed:new typeStore.Primitive;e.idBlock=i.idBlock;e.lenBlock=i.lenBlock;e.warnings=i.warnings;i=e}}break;case 2:case 3:case 4:default:{f=i.idBlock.isConstructed?typeStore.Constructed:typeStore.Primitive}}i=localChangeType(i,f);o=i.fromBER(e,t,i.lenBlock.isIndefiniteForm?r:i.lenBlock.length);i.valueBeforeDecodeView=e.subarray(n,n+i.blockLength);return{offset:o,result:i}}function fromBER(e){if(!e.byteLength){const e=new BaseBlock({},ValueBlock);e.error="Input buffer has zero length";return{offset:-1,result:e}}return localFromBER(BufferSourceConverter_1.toUint8Array(e).slice(),0,e.byteLength)}function checkLen(e,t){if(e){return 1}return t}class LocalConstructedValueBlock extends ValueBlock{constructor({value:e=[],isIndefiniteForm:t=false,...r}={}){super(r);this.value=e;this.isIndefiniteForm=t}fromBER(e,t,r){const n=BufferSourceConverter_1.toUint8Array(e);if(!checkBufferParams(this,n,t,r)){return-1}this.valueBeforeDecodeView=n.subarray(t,t+r);if(this.valueBeforeDecodeView.length===0){this.warnings.push("Zero buffer length");return t}let i=t;while(checkLen(this.isIndefiniteForm,r)>0){const e=localFromBER(n,i,r);if(e.offset===-1){this.error=e.result.error;this.warnings.concat(e.result.warnings);return-1}i=e.offset;this.blockLength+=e.result.blockLength;r-=e.result.blockLength;this.value.push(e.result);if(this.isIndefiniteForm&&e.result.constructor.NAME===END_OF_CONTENT_NAME){break}}if(this.isIndefiniteForm){if(this.value[this.value.length-1].constructor.NAME===END_OF_CONTENT_NAME){this.value.pop()}else{this.warnings.push("No EndOfContent block encoded")}}return i}toBER(e,t){const r=t||new ViewWriter;for(let t=0;t<this.value.length;t++){this.value[t].toBER(e,r)}if(!t){return r.final()}return EMPTY_BUFFER$1}toJSON(){const e={...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,value:[]};for(const t of this.value){e.value.push(t.toJSON())}return e}}LocalConstructedValueBlock.NAME="ConstructedValueBlock";var _a$v;class Constructed extends BaseBlock{constructor(e={}){super(e,LocalConstructedValueBlock);this.idBlock.isConstructed=true}fromBER(e,t,r){this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm;const n=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);if(n===-1){this.error=this.valueBlock.error;return n}if(!this.idBlock.error.length)this.blockLength+=this.idBlock.blockLength;if(!this.lenBlock.error.length)this.blockLength+=this.lenBlock.blockLength;if(!this.valueBlock.error.length)this.blockLength+=this.valueBlock.blockLength;return n}onAsciiEncoding(){const e=[];for(const t of this.valueBlock.value){e.push(t.toString("ascii").split("\n").map((e=>`  ${e}`)).join("\n"))}const t=this.idBlock.tagClass===3?`[${this.idBlock.tagNumber}]`:this.constructor.NAME;return e.length?`${t} :\n${e.join("\n")}`:`${t} :`}}_a$v=Constructed;(()=>{typeStore.Constructed=_a$v})();Constructed.NAME="CONSTRUCTED";class LocalEndOfContentValueBlock extends ValueBlock{fromBER(e,t,r){return t}toBER(e){return EMPTY_BUFFER$1}}LocalEndOfContentValueBlock.override="EndOfContentValueBlock";var _a$u;class EndOfContent extends BaseBlock{constructor(e={}){super(e,LocalEndOfContentValueBlock);this.idBlock.tagClass=1;this.idBlock.tagNumber=0}}_a$u=EndOfContent;(()=>{typeStore.EndOfContent=_a$u})();EndOfContent.NAME=END_OF_CONTENT_NAME;var _a$t;class Null extends BaseBlock{constructor(e={}){super(e,ValueBlock);this.idBlock.tagClass=1;this.idBlock.tagNumber=5}fromBER(e,t,r){if(this.lenBlock.length>0)this.warnings.push("Non-zero length of value block for Null type");if(!this.idBlock.error.length)this.blockLength+=this.idBlock.blockLength;if(!this.lenBlock.error.length)this.blockLength+=this.lenBlock.blockLength;this.blockLength+=r;if(t+r>e.byteLength){this.error="End of input reached before message was fully decoded (inconsistent offset and length values)";return-1}return t+r}toBER(e,t){const r=new ArrayBuffer(2);if(!e){const e=new Uint8Array(r);e[0]=5;e[1]=0}if(t){t.write(r)}return r}onAsciiEncoding(){return`${this.constructor.NAME}`}}_a$t=Null;(()=>{typeStore.Null=_a$t})();Null.NAME="NULL";class LocalBooleanValueBlock extends(HexBlock(ValueBlock)){constructor({value:e,...t}={}){super(t);if(t.valueHex){this.valueHexView=BufferSourceConverter_1.toUint8Array(t.valueHex)}else{this.valueHexView=new Uint8Array(1)}if(e){this.value=e}}get value(){for(const e of this.valueHexView){if(e>0){return true}}return false}set value(e){this.valueHexView[0]=e?255:0}fromBER(e,t,r){const n=BufferSourceConverter_1.toUint8Array(e);if(!checkBufferParams(this,n,t,r)){return-1}this.valueHexView=n.subarray(t,t+r);if(r>1)this.warnings.push("Boolean value encoded in more then 1 octet");this.isHexOnly=true;utilDecodeTC.call(this);this.blockLength=r;return t+r}toBER(){return this.valueHexView.slice()}toJSON(){return{...super.toJSON(),value:this.value}}}LocalBooleanValueBlock.NAME="BooleanValueBlock";var _a$s;class Boolean$1 extends BaseBlock{constructor(e={}){super(e,LocalBooleanValueBlock);this.idBlock.tagClass=1;this.idBlock.tagNumber=1}getValue(){return this.valueBlock.value}setValue(e){this.valueBlock.value=e}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.getValue}`}}_a$s=Boolean$1;(()=>{typeStore.Boolean=_a$s})();Boolean$1.NAME="BOOLEAN";class LocalOctetStringValueBlock extends(HexBlock(LocalConstructedValueBlock)){constructor({isConstructed:e=false,...t}={}){super(t);this.isConstructed=e}fromBER(e,t,r){let n=0;if(this.isConstructed){this.isHexOnly=false;n=LocalConstructedValueBlock.prototype.fromBER.call(this,e,t,r);if(n===-1)return n;for(let e=0;e<this.value.length;e++){const t=this.value[e].constructor.NAME;if(t===END_OF_CONTENT_NAME){if(this.isIndefiniteForm)break;else{this.error="EndOfContent is unexpected, OCTET STRING may consists of OCTET STRINGs only";return-1}}if(t!==OCTET_STRING_NAME){this.error="OCTET STRING may consists of OCTET STRINGs only";return-1}}}else{this.isHexOnly=true;n=super.fromBER(e,t,r);this.blockLength=r}return n}toBER(e,t){if(this.isConstructed)return LocalConstructedValueBlock.prototype.toBER.call(this,e,t);return e?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),isConstructed:this.isConstructed}}}LocalOctetStringValueBlock.NAME="OctetStringValueBlock";var _a$r;class OctetString$1 extends BaseBlock{constructor({idBlock:e={},lenBlock:t={},...r}={}){var n,i;(n=r.isConstructed)!==null&&n!==void 0?n:r.isConstructed=!!((i=r.value)===null||i===void 0?void 0:i.length);super({idBlock:{isConstructed:r.isConstructed,...e},lenBlock:{...t,isIndefiniteForm:!!r.isIndefiniteForm},...r},LocalOctetStringValueBlock);this.idBlock.tagClass=1;this.idBlock.tagNumber=4}fromBER(e,t,r){this.valueBlock.isConstructed=this.idBlock.isConstructed;this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm;if(r===0){if(this.idBlock.error.length===0)this.blockLength+=this.idBlock.blockLength;if(this.lenBlock.error.length===0)this.blockLength+=this.lenBlock.blockLength;return t}if(!this.valueBlock.isConstructed){const n=e instanceof ArrayBuffer?new Uint8Array(e):e;const i=n.subarray(t,t+r);try{if(i.byteLength){const e=localFromBER(i,0,i.byteLength);if(e.offset!==-1&&e.offset===r){this.valueBlock.value=[e.result]}}}catch(e){}}return super.fromBER(e,t,r)}onAsciiEncoding(){if(this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length){return Constructed.prototype.onAsciiEncoding.call(this)}return`${this.constructor.NAME} : ${Convert_1.ToHex(this.valueBlock.valueHexView)}`}getValue(){if(!this.idBlock.isConstructed){return this.valueBlock.valueHexView.slice().buffer}const e=[];for(const t of this.valueBlock.value){if(t instanceof OctetString$1){e.push(t.valueBlock.valueHexView)}}return BufferSourceConverter_1.concat(e)}}_a$r=OctetString$1;(()=>{typeStore.OctetString=_a$r})();OctetString$1.NAME=OCTET_STRING_NAME;class LocalBitStringValueBlock extends(HexBlock(LocalConstructedValueBlock)){constructor({unusedBits:e=0,isConstructed:t=false,...r}={}){super(r);this.unusedBits=e;this.isConstructed=t;this.blockLength=this.valueHexView.byteLength}fromBER(e,t,r){if(!r){return t}let n=-1;if(this.isConstructed){n=LocalConstructedValueBlock.prototype.fromBER.call(this,e,t,r);if(n===-1)return n;for(const e of this.value){const t=e.constructor.NAME;if(t===END_OF_CONTENT_NAME){if(this.isIndefiniteForm)break;else{this.error="EndOfContent is unexpected, BIT STRING may consists of BIT STRINGs only";return-1}}if(t!==BIT_STRING_NAME){this.error="BIT STRING may consists of BIT STRINGs only";return-1}const r=e.valueBlock;if(this.unusedBits>0&&r.unusedBits>0){this.error='Using of "unused bits" inside constructive BIT STRING allowed for least one only';return-1}this.unusedBits=r.unusedBits}return n}const i=BufferSourceConverter_1.toUint8Array(e);if(!checkBufferParams(this,i,t,r)){return-1}const s=i.subarray(t,t+r);this.unusedBits=s[0];if(this.unusedBits>7){this.error="Unused bits for BitString must be in range 0-7";return-1}if(!this.unusedBits){const e=s.subarray(1);try{if(e.byteLength){const t=localFromBER(e,0,e.byteLength);if(t.offset!==-1&&t.offset===r-1){this.value=[t.result]}}}catch(e){}}this.valueHexView=s.subarray(1);this.blockLength=s.length;return t+r}toBER(e,t){if(this.isConstructed){return LocalConstructedValueBlock.prototype.toBER.call(this,e,t)}if(e){return new ArrayBuffer(this.valueHexView.byteLength+1)}if(!this.valueHexView.byteLength){return EMPTY_BUFFER$1}const r=new Uint8Array(this.valueHexView.length+1);r[0]=this.unusedBits;r.set(this.valueHexView,1);return r.buffer}toJSON(){return{...super.toJSON(),unusedBits:this.unusedBits,isConstructed:this.isConstructed}}}LocalBitStringValueBlock.NAME="BitStringValueBlock";var _a$q;class BitString$1 extends BaseBlock{constructor({idBlock:e={},lenBlock:t={},...r}={}){var n,i;(n=r.isConstructed)!==null&&n!==void 0?n:r.isConstructed=!!((i=r.value)===null||i===void 0?void 0:i.length);super({idBlock:{isConstructed:r.isConstructed,...e},lenBlock:{...t,isIndefiniteForm:!!r.isIndefiniteForm},...r},LocalBitStringValueBlock);this.idBlock.tagClass=1;this.idBlock.tagNumber=3}fromBER(e,t,r){this.valueBlock.isConstructed=this.idBlock.isConstructed;this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm;return super.fromBER(e,t,r)}onAsciiEncoding(){if(this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length){return Constructed.prototype.onAsciiEncoding.call(this)}else{const e=[];const t=this.valueBlock.valueHexView;for(const r of t){e.push(r.toString(2).padStart(8,"0"))}const r=e.join("");return`${this.constructor.NAME} : ${r.substring(0,r.length-this.valueBlock.unusedBits)}`}}}_a$q=BitString$1;(()=>{typeStore.BitString=_a$q})();BitString$1.NAME=BIT_STRING_NAME;var _a$p;function viewAdd(e,t){const r=new Uint8Array([0]);const n=new Uint8Array(e);const i=new Uint8Array(t);let s=n.slice(0);const a=s.length-1;const o=i.slice(0);const f=o.length-1;let c=0;const u=f<a?a:f;let l=0;for(let e=u;e>=0;e--,l++){switch(true){case l<o.length:c=s[a-l]+o[f-l]+r[0];break;default:c=s[a-l]+r[0]}r[0]=c/10;switch(true){case l>=s.length:s=utilConcatView(new Uint8Array([c%10]),s);break;default:s[a-l]=c%10}}if(r[0]>0)s=utilConcatView(r,s);return s}function power2(e){if(e>=powers2.length){for(let t=powers2.length;t<=e;t++){const e=new Uint8Array([0]);let r=powers2[t-1].slice(0);for(let t=r.length-1;t>=0;t--){const n=new Uint8Array([(r[t]<<1)+e[0]]);e[0]=n[0]/10;r[t]=n[0]%10}if(e[0]>0)r=utilConcatView(e,r);powers2.push(r)}}return powers2[e]}function viewSub(e,t){let r=0;const n=new Uint8Array(e);const i=new Uint8Array(t);const s=n.slice(0);const a=s.length-1;const o=i.slice(0);const f=o.length-1;let c;let u=0;for(let e=f;e>=0;e--,u++){c=s[a-u]-o[f-u]-r;switch(true){case c<0:r=1;s[a-u]=c+10;break;default:r=0;s[a-u]=c}}if(r>0){for(let e=a-f+1;e>=0;e--,u++){c=s[a-u]-r;if(c<0){r=1;s[a-u]=c+10}else{r=0;s[a-u]=c;break}}}return s.slice()}class LocalIntegerValueBlock extends(HexBlock(ValueBlock)){constructor({value:e,...t}={}){super(t);this._valueDec=0;if(t.valueHex){this.setValueHex()}if(e!==undefined){this.valueDec=e}}setValueHex(){if(this.valueHexView.length>=4){this.warnings.push("Too big Integer for decoding, hex only");this.isHexOnly=true;this._valueDec=0}else{this.isHexOnly=false;if(this.valueHexView.length>0){this._valueDec=utilDecodeTC.call(this)}}}set valueDec(e){this._valueDec=e;this.isHexOnly=false;this.valueHexView=new Uint8Array(utilEncodeTC(e))}get valueDec(){return this._valueDec}fromDER(e,t,r,n=0){const i=this.fromBER(e,t,r);if(i===-1)return i;const s=this.valueHexView;if(s[0]===0&&(s[1]&128)!==0){this.valueHexView=s.subarray(1)}else{if(n!==0){if(s.length<n){if(n-s.length>1)n=s.length+1;this.valueHexView=s.subarray(n-s.length)}}}return i}toDER(e=false){const t=this.valueHexView;switch(true){case(t[0]&128)!==0:{const e=new Uint8Array(this.valueHexView.length+1);e[0]=0;e.set(t,1);this.valueHexView=e}break;case t[0]===0&&(t[1]&128)===0:{this.valueHexView=this.valueHexView.subarray(1)}break}return this.toBER(e)}fromBER(e,t,r){const n=super.fromBER(e,t,r);if(n===-1){return n}this.setValueHex();return n}toBER(e){return e?new ArrayBuffer(this.valueHexView.length):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}toString(){const e=this.valueHexView.length*8-1;let t=new Uint8Array(this.valueHexView.length*8/3);let r=0;let n;const i=this.valueHexView;let s="";let a=false;for(let a=i.byteLength-1;a>=0;a--){n=i[a];for(let i=0;i<8;i++){if((n&1)===1){switch(r){case e:t=viewSub(power2(r),t);s="-";break;default:t=viewAdd(t,power2(r))}}r++;n>>=1}}for(let e=0;e<t.length;e++){if(t[e])a=true;if(a)s+=digitsString.charAt(t[e])}if(a===false)s+=digitsString.charAt(0);return s}}_a$p=LocalIntegerValueBlock;LocalIntegerValueBlock.NAME="IntegerValueBlock";(()=>{Object.defineProperty(_a$p.prototype,"valueHex",{set:function(e){this.valueHexView=new Uint8Array(e);this.setValueHex()},get:function(){return this.valueHexView.slice().buffer}})})();var _a$o;class Integer extends BaseBlock{constructor(e={}){super(e,LocalIntegerValueBlock);this.idBlock.tagClass=1;this.idBlock.tagNumber=2}toBigInt(){assertBigInt();return BigInt(this.valueBlock.toString())}static fromBigInt(e){assertBigInt();const t=BigInt(e);const r=new ViewWriter;const n=t.toString(16).replace(/^-/,"");const i=new Uint8Array(Convert_1.FromHex(n));if(t<0){const e=new Uint8Array(i.length+(i[0]&128?1:0));e[0]|=128;const n=BigInt(`0x${Convert_1.ToHex(e)}`);const s=n+t;const a=BufferSourceConverter_1.toUint8Array(Convert_1.FromHex(s.toString(16)));a[0]|=128;r.write(a)}else{if(i[0]&128){r.write(new Uint8Array([0]))}r.write(i)}const s=new Integer({valueHex:r.final()});return s}convertToDER(){const e=new Integer({valueHex:this.valueBlock.valueHexView});e.valueBlock.toDER();return e}convertFromDER(){return new Integer({valueHex:this.valueBlock.valueHexView[0]===0?this.valueBlock.valueHexView.subarray(1):this.valueBlock.valueHexView})}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()}`}}_a$o=Integer;(()=>{typeStore.Integer=_a$o})();Integer.NAME="INTEGER";var _a$n;class Enumerated extends Integer{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=10}}_a$n=Enumerated;(()=>{typeStore.Enumerated=_a$n})();Enumerated.NAME="ENUMERATED";class LocalSidValueBlock extends(HexBlock(ValueBlock)){constructor({valueDec:e=-1,isFirstSid:t=false,...r}={}){super(r);this.valueDec=e;this.isFirstSid=t}fromBER(e,t,r){if(!r){return t}const n=BufferSourceConverter_1.toUint8Array(e);if(!checkBufferParams(this,n,t,r)){return-1}const i=n.subarray(t,t+r);this.valueHexView=new Uint8Array(r);for(let e=0;e<r;e++){this.valueHexView[e]=i[e]&127;this.blockLength++;if((i[e]&128)===0)break}const s=new Uint8Array(this.blockLength);for(let e=0;e<this.blockLength;e++){s[e]=this.valueHexView[e]}this.valueHexView=s;if((i[this.blockLength-1]&128)!==0){this.error="End of input reached before message was fully decoded";return-1}if(this.valueHexView[0]===0)this.warnings.push("Needlessly long format of SID encoding");if(this.blockLength<=8)this.valueDec=utilFromBase(this.valueHexView,7);else{this.isHexOnly=true;this.warnings.push("Too big SID for decoding, hex only")}return t+this.blockLength}set valueBigInt(e){assertBigInt();let t=BigInt(e).toString(2);while(t.length%7){t="0"+t}const r=new Uint8Array(t.length/7);for(let e=0;e<r.length;e++){r[e]=parseInt(t.slice(e*7,e*7+7),2)+(e+1<r.length?128:0)}this.fromBER(r.buffer,0,r.length)}toBER(e){if(this.isHexOnly){if(e)return new ArrayBuffer(this.valueHexView.byteLength);const t=this.valueHexView;const r=new Uint8Array(this.blockLength);for(let e=0;e<this.blockLength-1;e++)r[e]=t[e]|128;r[this.blockLength-1]=t[this.blockLength-1];return r.buffer}const t=utilToBase(this.valueDec,7);if(t.byteLength===0){this.error="Error during encoding SID value";return EMPTY_BUFFER$1}const r=new Uint8Array(t.byteLength);if(!e){const e=new Uint8Array(t);const n=t.byteLength-1;for(let t=0;t<n;t++)r[t]=e[t]|128;r[n]=e[n]}return r}toString(){let e="";if(this.isHexOnly)e=Convert_1.ToHex(this.valueHexView);else{if(this.isFirstSid){let t=this.valueDec;if(this.valueDec<=39)e="0.";else{if(this.valueDec<=79){e="1.";t-=40}else{e="2.";t-=80}}e+=t.toString()}else e=this.valueDec.toString()}return e}toJSON(){return{...super.toJSON(),valueDec:this.valueDec,isFirstSid:this.isFirstSid}}}LocalSidValueBlock.NAME="sidBlock";class LocalObjectIdentifierValueBlock extends ValueBlock{constructor({value:e=EMPTY_STRING$1,...t}={}){super(t);this.value=[];if(e){this.fromString(e)}}fromBER(e,t,r){let n=t;while(r>0){const t=new LocalSidValueBlock;n=t.fromBER(e,n,r);if(n===-1){this.blockLength=0;this.error=t.error;return n}if(this.value.length===0)t.isFirstSid=true;this.blockLength+=t.blockLength;r-=t.blockLength;this.value.push(t)}return n}toBER(e){const t=[];for(let r=0;r<this.value.length;r++){const n=this.value[r].toBER(e);if(n.byteLength===0){this.error=this.value[r].error;return EMPTY_BUFFER$1}t.push(n)}return concat$9(t)}fromString(e){this.value=[];let t=0;let r=0;let n="";let i=false;do{r=e.indexOf(".",t);if(r===-1)n=e.substring(t);else n=e.substring(t,r);t=r+1;if(i){const e=this.value[0];let t=0;switch(e.valueDec){case 0:break;case 1:t=40;break;case 2:t=80;break;default:this.value=[];return}const r=parseInt(n,10);if(isNaN(r))return;e.valueDec=r+t;i=false}else{const e=new LocalSidValueBlock;if(n>Number.MAX_SAFE_INTEGER){assertBigInt();const t=BigInt(n);e.valueBigInt=t}else{e.valueDec=parseInt(n,10);if(isNaN(e.valueDec))return}if(!this.value.length){e.isFirstSid=true;i=true}this.value.push(e)}}while(r!==-1)}toString(){let e="";let t=false;for(let r=0;r<this.value.length;r++){t=this.value[r].isHexOnly;let n=this.value[r].toString();if(r!==0)e=`${e}.`;if(t){n=`{${n}}`;if(this.value[r].isFirstSid)e=`2.{${n} - 80}`;else e+=n}else e+=n}return e}toJSON(){const e={...super.toJSON(),value:this.toString(),sidArray:[]};for(let t=0;t<this.value.length;t++){e.sidArray.push(this.value[t].toJSON())}return e}}LocalObjectIdentifierValueBlock.NAME="ObjectIdentifierValueBlock";var _a$m;class ObjectIdentifier$1 extends BaseBlock{constructor(e={}){super(e,LocalObjectIdentifierValueBlock);this.idBlock.tagClass=1;this.idBlock.tagNumber=6}getValue(){return this.valueBlock.toString()}setValue(e){this.valueBlock.fromString(e)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}}_a$m=ObjectIdentifier$1;(()=>{typeStore.ObjectIdentifier=_a$m})();ObjectIdentifier$1.NAME="OBJECT IDENTIFIER";class LocalRelativeSidValueBlock extends(HexBlock(LocalBaseBlock)){constructor({valueDec:e=0,...t}={}){super(t);this.valueDec=e}fromBER(e,t,r){if(r===0)return t;const n=BufferSourceConverter_1.toUint8Array(e);if(!checkBufferParams(this,n,t,r))return-1;const i=n.subarray(t,t+r);this.valueHexView=new Uint8Array(r);for(let e=0;e<r;e++){this.valueHexView[e]=i[e]&127;this.blockLength++;if((i[e]&128)===0)break}const s=new Uint8Array(this.blockLength);for(let e=0;e<this.blockLength;e++)s[e]=this.valueHexView[e];this.valueHexView=s;if((i[this.blockLength-1]&128)!==0){this.error="End of input reached before message was fully decoded";return-1}if(this.valueHexView[0]===0)this.warnings.push("Needlessly long format of SID encoding");if(this.blockLength<=8)this.valueDec=utilFromBase(this.valueHexView,7);else{this.isHexOnly=true;this.warnings.push("Too big SID for decoding, hex only")}return t+this.blockLength}toBER(e){if(this.isHexOnly){if(e)return new ArrayBuffer(this.valueHexView.byteLength);const t=this.valueHexView;const r=new Uint8Array(this.blockLength);for(let e=0;e<this.blockLength-1;e++)r[e]=t[e]|128;r[this.blockLength-1]=t[this.blockLength-1];return r.buffer}const t=utilToBase(this.valueDec,7);if(t.byteLength===0){this.error="Error during encoding SID value";return EMPTY_BUFFER$1}const r=new Uint8Array(t.byteLength);if(!e){const e=new Uint8Array(t);const n=t.byteLength-1;for(let t=0;t<n;t++)r[t]=e[t]|128;r[n]=e[n]}return r.buffer}toString(){let e="";if(this.isHexOnly)e=Convert_1.ToHex(this.valueHexView);else{e=this.valueDec.toString()}return e}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}}LocalRelativeSidValueBlock.NAME="relativeSidBlock";class LocalRelativeObjectIdentifierValueBlock extends ValueBlock{constructor({value:e=EMPTY_STRING$1,...t}={}){super(t);this.value=[];if(e){this.fromString(e)}}fromBER(e,t,r){let n=t;while(r>0){const t=new LocalRelativeSidValueBlock;n=t.fromBER(e,n,r);if(n===-1){this.blockLength=0;this.error=t.error;return n}this.blockLength+=t.blockLength;r-=t.blockLength;this.value.push(t)}return n}toBER(e,t){const r=[];for(let t=0;t<this.value.length;t++){const n=this.value[t].toBER(e);if(n.byteLength===0){this.error=this.value[t].error;return EMPTY_BUFFER$1}r.push(n)}return concat$9(r)}fromString(e){this.value=[];let t=0;let r=0;let n="";do{r=e.indexOf(".",t);if(r===-1)n=e.substring(t);else n=e.substring(t,r);t=r+1;const i=new LocalRelativeSidValueBlock;i.valueDec=parseInt(n,10);if(isNaN(i.valueDec))return true;this.value.push(i)}while(r!==-1);return true}toString(){let e="";let t=false;for(let r=0;r<this.value.length;r++){t=this.value[r].isHexOnly;let n=this.value[r].toString();if(r!==0)e=`${e}.`;if(t){n=`{${n}}`;e+=n}else e+=n}return e}toJSON(){const e={...super.toJSON(),value:this.toString(),sidArray:[]};for(let t=0;t<this.value.length;t++)e.sidArray.push(this.value[t].toJSON());return e}}LocalRelativeObjectIdentifierValueBlock.NAME="RelativeObjectIdentifierValueBlock";var _a$l;class RelativeObjectIdentifier extends BaseBlock{constructor(e={}){super(e,LocalRelativeObjectIdentifierValueBlock);this.idBlock.tagClass=1;this.idBlock.tagNumber=13}getValue(){return this.valueBlock.toString()}setValue(e){this.valueBlock.fromString(e)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}}_a$l=RelativeObjectIdentifier;(()=>{typeStore.RelativeObjectIdentifier=_a$l})();RelativeObjectIdentifier.NAME="RelativeObjectIdentifier";var _a$k;class Sequence extends Constructed{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=16}}_a$k=Sequence;(()=>{typeStore.Sequence=_a$k})();Sequence.NAME="SEQUENCE";var _a$j;class Set$3 extends Constructed{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=17}}_a$j=Set$3;(()=>{typeStore.Set=_a$j})();Set$3.NAME="SET";class LocalStringValueBlock extends(HexBlock(ValueBlock)){constructor({...e}={}){super(e);this.isHexOnly=true;this.value=EMPTY_STRING$1}toJSON(){return{...super.toJSON(),value:this.value}}}LocalStringValueBlock.NAME="StringValueBlock";class LocalSimpleStringValueBlock extends LocalStringValueBlock{}LocalSimpleStringValueBlock.NAME="SimpleStringValueBlock";class LocalSimpleStringBlock extends BaseStringBlock{constructor({...e}={}){super(e,LocalSimpleStringValueBlock)}fromBuffer(e){this.valueBlock.value=String.fromCharCode.apply(null,BufferSourceConverter_1.toUint8Array(e))}fromString(e){const t=e.length;const r=this.valueBlock.valueHexView=new Uint8Array(t);for(let n=0;n<t;n++)r[n]=e.charCodeAt(n);this.valueBlock.value=e}}LocalSimpleStringBlock.NAME="SIMPLE STRING";class LocalUtf8StringValueBlock extends LocalSimpleStringBlock{fromBuffer(e){this.valueBlock.valueHexView=BufferSourceConverter_1.toUint8Array(e);try{this.valueBlock.value=Convert_1.ToUtf8String(e)}catch(t){this.warnings.push(`Error during "decodeURIComponent": ${t}, using raw string`);this.valueBlock.value=Convert_1.ToBinary(e)}}fromString(e){this.valueBlock.valueHexView=new Uint8Array(Convert_1.FromUtf8String(e));this.valueBlock.value=e}}LocalUtf8StringValueBlock.NAME="Utf8StringValueBlock";var _a$i;class Utf8String extends LocalUtf8StringValueBlock{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=12}}_a$i=Utf8String;(()=>{typeStore.Utf8String=_a$i})();Utf8String.NAME="UTF8String";class LocalBmpStringValueBlock extends LocalSimpleStringBlock{fromBuffer(e){this.valueBlock.value=Convert_1.ToUtf16String(e);this.valueBlock.valueHexView=BufferSourceConverter_1.toUint8Array(e)}fromString(e){this.valueBlock.value=e;this.valueBlock.valueHexView=new Uint8Array(Convert_1.FromUtf16String(e))}}LocalBmpStringValueBlock.NAME="BmpStringValueBlock";var _a$h;class BmpString extends LocalBmpStringValueBlock{constructor({...e}={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=30}}_a$h=BmpString;(()=>{typeStore.BmpString=_a$h})();BmpString.NAME="BMPString";class LocalUniversalStringValueBlock extends LocalSimpleStringBlock{fromBuffer(e){const t=ArrayBuffer.isView(e)?e.slice().buffer:e.slice(0);const r=new Uint8Array(t);for(let e=0;e<r.length;e+=4){r[e]=r[e+3];r[e+1]=r[e+2];r[e+2]=0;r[e+3]=0}this.valueBlock.value=String.fromCharCode.apply(null,new Uint32Array(t))}fromString(e){const t=e.length;const r=this.valueBlock.valueHexView=new Uint8Array(t*4);for(let n=0;n<t;n++){const t=utilToBase(e.charCodeAt(n),8);const i=new Uint8Array(t);if(i.length>4)continue;const s=4-i.length;for(let e=i.length-1;e>=0;e--)r[n*4+e+s]=i[e]}this.valueBlock.value=e}}LocalUniversalStringValueBlock.NAME="UniversalStringValueBlock";var _a$g;class UniversalString extends LocalUniversalStringValueBlock{constructor({...e}={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=28}}_a$g=UniversalString;(()=>{typeStore.UniversalString=_a$g})();UniversalString.NAME="UniversalString";var _a$f;class NumericString extends LocalSimpleStringBlock{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=18}}_a$f=NumericString;(()=>{typeStore.NumericString=_a$f})();NumericString.NAME="NumericString";var _a$e;class PrintableString extends LocalSimpleStringBlock{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=19}}_a$e=PrintableString;(()=>{typeStore.PrintableString=_a$e})();PrintableString.NAME="PrintableString";var _a$d;class TeletexString extends LocalSimpleStringBlock{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=20}}_a$d=TeletexString;(()=>{typeStore.TeletexString=_a$d})();TeletexString.NAME="TeletexString";var _a$c;class VideotexString extends LocalSimpleStringBlock{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=21}}_a$c=VideotexString;(()=>{typeStore.VideotexString=_a$c})();VideotexString.NAME="VideotexString";var _a$b;class IA5String extends LocalSimpleStringBlock{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=22}}_a$b=IA5String;(()=>{typeStore.IA5String=_a$b})();IA5String.NAME="IA5String";var _a$a;class GraphicString extends LocalSimpleStringBlock{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=25}}_a$a=GraphicString;(()=>{typeStore.GraphicString=_a$a})();GraphicString.NAME="GraphicString";var _a$9;class VisibleString extends LocalSimpleStringBlock{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=26}}_a$9=VisibleString;(()=>{typeStore.VisibleString=_a$9})();VisibleString.NAME="VisibleString";var _a$8;class GeneralString extends LocalSimpleStringBlock{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=27}}_a$8=GeneralString;(()=>{typeStore.GeneralString=_a$8})();GeneralString.NAME="GeneralString";var _a$7;class CharacterString extends LocalSimpleStringBlock{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=29}}_a$7=CharacterString;(()=>{typeStore.CharacterString=_a$7})();CharacterString.NAME="CharacterString";var _a$6;class UTCTime extends VisibleString{constructor({value:e,valueDate:t,...r}={}){super(r);this.year=0;this.month=0;this.day=0;this.hour=0;this.minute=0;this.second=0;if(e){this.fromString(e);this.valueBlock.valueHexView=new Uint8Array(e.length);for(let t=0;t<e.length;t++)this.valueBlock.valueHexView[t]=e.charCodeAt(t)}if(t){this.fromDate(t);this.valueBlock.valueHexView=new Uint8Array(this.toBuffer())}this.idBlock.tagClass=1;this.idBlock.tagNumber=23}fromBuffer(e){this.fromString(String.fromCharCode.apply(null,BufferSourceConverter_1.toUint8Array(e)))}toBuffer(){const e=this.toString();const t=new ArrayBuffer(e.length);const r=new Uint8Array(t);for(let t=0;t<e.length;t++)r[t]=e.charCodeAt(t);return t}fromDate(e){this.year=e.getUTCFullYear();this.month=e.getUTCMonth()+1;this.day=e.getUTCDate();this.hour=e.getUTCHours();this.minute=e.getUTCMinutes();this.second=e.getUTCSeconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second))}fromString(e){const t=/(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})Z/gi;const r=t.exec(e);if(r===null){this.error="Wrong input string for conversion";return}const n=parseInt(r[1],10);if(n>=50)this.year=1900+n;else this.year=2e3+n;this.month=parseInt(r[2],10);this.day=parseInt(r[3],10);this.hour=parseInt(r[4],10);this.minute=parseInt(r[5],10);this.second=parseInt(r[6],10)}toString(e="iso"){if(e==="iso"){const e=new Array(7);e[0]=padNumber(this.year<2e3?this.year-1900:this.year-2e3,2);e[1]=padNumber(this.month,2);e[2]=padNumber(this.day,2);e[3]=padNumber(this.hour,2);e[4]=padNumber(this.minute,2);e[5]=padNumber(this.second,2);e[6]="Z";return e.join("")}return super.toString(e)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.toDate().toISOString()}`}toJSON(){return{...super.toJSON(),year:this.year,month:this.month,day:this.day,hour:this.hour,minute:this.minute,second:this.second}}}_a$6=UTCTime;(()=>{typeStore.UTCTime=_a$6})();UTCTime.NAME="UTCTime";var _a$5;class GeneralizedTime extends UTCTime{constructor(e={}){var t;super(e);(t=this.millisecond)!==null&&t!==void 0?t:this.millisecond=0;this.idBlock.tagClass=1;this.idBlock.tagNumber=24}fromDate(e){super.fromDate(e);this.millisecond=e.getUTCMilliseconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond))}fromString(e){let t=false;let r="";let n="";let i=0;let s;let a=0;let o=0;if(e[e.length-1]==="Z"){r=e.substring(0,e.length-1);t=true}else{const t=new Number(e[e.length-1]);if(isNaN(t.valueOf()))throw new Error("Wrong input string for conversion");r=e}if(t){if(r.indexOf("+")!==-1)throw new Error("Wrong input string for conversion");if(r.indexOf("-")!==-1)throw new Error("Wrong input string for conversion")}else{let e=1;let t=r.indexOf("+");let n="";if(t===-1){t=r.indexOf("-");e=-1}if(t!==-1){n=r.substring(t+1);r=r.substring(0,t);if(n.length!==2&&n.length!==4)throw new Error("Wrong input string for conversion");let i=parseInt(n.substring(0,2),10);if(isNaN(i.valueOf()))throw new Error("Wrong input string for conversion");a=e*i;if(n.length===4){i=parseInt(n.substring(2,4),10);if(isNaN(i.valueOf()))throw new Error("Wrong input string for conversion");o=e*i}}}let f=r.indexOf(".");if(f===-1)f=r.indexOf(",");if(f!==-1){const e=new Number(`0${r.substring(f)}`);if(isNaN(e.valueOf()))throw new Error("Wrong input string for conversion");i=e.valueOf();n=r.substring(0,f)}else n=r;switch(true){case n.length===8:s=/(\d{4})(\d{2})(\d{2})/gi;if(f!==-1)throw new Error("Wrong input string for conversion");break;case n.length===10:s=/(\d{4})(\d{2})(\d{2})(\d{2})/gi;if(f!==-1){let e=60*i;this.minute=Math.floor(e);e=60*(e-this.minute);this.second=Math.floor(e);e=1e3*(e-this.second);this.millisecond=Math.floor(e)}break;case n.length===12:s=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})/gi;if(f!==-1){let e=60*i;this.second=Math.floor(e);e=1e3*(e-this.second);this.millisecond=Math.floor(e)}break;case n.length===14:s=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})/gi;if(f!==-1){const e=1e3*i;this.millisecond=Math.floor(e)}break;default:throw new Error("Wrong input string for conversion")}const c=s.exec(n);if(c===null)throw new Error("Wrong input string for conversion");for(let e=1;e<c.length;e++){switch(e){case 1:this.year=parseInt(c[e],10);break;case 2:this.month=parseInt(c[e],10);break;case 3:this.day=parseInt(c[e],10);break;case 4:this.hour=parseInt(c[e],10)+a;break;case 5:this.minute=parseInt(c[e],10)+o;break;case 6:this.second=parseInt(c[e],10);break;default:throw new Error("Wrong input string for conversion")}}if(t===false){const e=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond);this.year=e.getUTCFullYear();this.month=e.getUTCMonth();this.day=e.getUTCDay();this.hour=e.getUTCHours();this.minute=e.getUTCMinutes();this.second=e.getUTCSeconds();this.millisecond=e.getUTCMilliseconds()}}toString(e="iso"){if(e==="iso"){const e=[];e.push(padNumber(this.year,4));e.push(padNumber(this.month,2));e.push(padNumber(this.day,2));e.push(padNumber(this.hour,2));e.push(padNumber(this.minute,2));e.push(padNumber(this.second,2));if(this.millisecond!==0){e.push(".");e.push(padNumber(this.millisecond,3))}e.push("Z");return e.join("")}return super.toString(e)}toJSON(){return{...super.toJSON(),millisecond:this.millisecond}}}_a$5=GeneralizedTime;(()=>{typeStore.GeneralizedTime=_a$5})();GeneralizedTime.NAME="GeneralizedTime";var _a$4;class DATE$2 extends Utf8String{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=31}}_a$4=DATE$2;(()=>{typeStore.DATE=_a$4})();DATE$2.NAME="DATE";var _a$3;class TimeOfDay extends Utf8String{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=32}}_a$3=TimeOfDay;(()=>{typeStore.TimeOfDay=_a$3})();TimeOfDay.NAME="TimeOfDay";var _a$2;class DateTime extends Utf8String{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=33}}_a$2=DateTime;(()=>{typeStore.DateTime=_a$2})();DateTime.NAME="DateTime";var _a$1$1;class Duration extends Utf8String{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=34}}_a$1$1=Duration;(()=>{typeStore.Duration=_a$1$1})();Duration.NAME="Duration";var _a$x;class TIME$1 extends Utf8String{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=14}}_a$x=TIME$1;(()=>{typeStore.TIME=_a$x})();TIME$1.NAME="TIME";class Any{constructor({name:e=EMPTY_STRING$1,optional:t=false}={}){this.name=e;this.optional=t}}class Choice extends Any{constructor({value:e=[],...t}={}){super(t);this.value=e}}class Repeated extends Any{constructor({value:e=new Any,local:t=false,...r}={}){super(r);this.value=e;this.local=t}}class RawData{constructor({data:e=EMPTY_VIEW}={}){this.dataView=BufferSourceConverter_1.toUint8Array(e)}get data(){return this.dataView.slice().buffer}set data(e){this.dataView=BufferSourceConverter_1.toUint8Array(e)}fromBER(e,t,r){const n=t+r;this.dataView=BufferSourceConverter_1.toUint8Array(e).subarray(t,n);return n}toBER(e){return this.dataView.slice().buffer}}function compareSchema(e,t,r){if(r instanceof Choice){for(let n=0;n<r.value.length;n++){const i=compareSchema(e,t,r.value[n]);if(i.verified){return{verified:true,result:e}}}{const e={verified:false,result:{error:"Wrong values for Choice type"}};if(r.hasOwnProperty(NAME$2))e.name=r.name;return e}}if(r instanceof Any){if(r.hasOwnProperty(NAME$2))e[r.name]=t;return{verified:true,result:e}}if(e instanceof Object===false){return{verified:false,result:{error:"Wrong root object"}}}if(t instanceof Object===false){return{verified:false,result:{error:"Wrong ASN.1 data"}}}if(r instanceof Object===false){return{verified:false,result:{error:"Wrong ASN.1 schema"}}}if(ID_BLOCK in r===false){return{verified:false,result:{error:"Wrong ASN.1 schema"}}}if(FROM_BER in r.idBlock===false){return{verified:false,result:{error:"Wrong ASN.1 schema"}}}if(TO_BER in r.idBlock===false){return{verified:false,result:{error:"Wrong ASN.1 schema"}}}const n=r.idBlock.toBER(false);if(n.byteLength===0){return{verified:false,result:{error:"Error encoding idBlock for ASN.1 schema"}}}const i=r.idBlock.fromBER(n,0,n.byteLength);if(i===-1){return{verified:false,result:{error:"Error decoding idBlock for ASN.1 schema"}}}if(r.idBlock.hasOwnProperty(TAG_CLASS)===false){return{verified:false,result:{error:"Wrong ASN.1 schema"}}}if(r.idBlock.tagClass!==t.idBlock.tagClass){return{verified:false,result:e}}if(r.idBlock.hasOwnProperty(TAG_NUMBER)===false){return{verified:false,result:{error:"Wrong ASN.1 schema"}}}if(r.idBlock.tagNumber!==t.idBlock.tagNumber){return{verified:false,result:e}}if(r.idBlock.hasOwnProperty(IS_CONSTRUCTED)===false){return{verified:false,result:{error:"Wrong ASN.1 schema"}}}if(r.idBlock.isConstructed!==t.idBlock.isConstructed){return{verified:false,result:e}}if(!(IS_HEX_ONLY in r.idBlock)){return{verified:false,result:{error:"Wrong ASN.1 schema"}}}if(r.idBlock.isHexOnly!==t.idBlock.isHexOnly){return{verified:false,result:e}}if(r.idBlock.isHexOnly){if(VALUE_HEX_VIEW in r.idBlock===false){return{verified:false,result:{error:"Wrong ASN.1 schema"}}}const n=r.idBlock.valueHexView;const i=t.idBlock.valueHexView;if(n.length!==i.length){return{verified:false,result:e}}for(let t=0;t<n.length;t++){if(n[t]!==i[1]){return{verified:false,result:e}}}}if(r.name){r.name=r.name.replace(/^\s+|\s+$/g,EMPTY_STRING$1);if(r.name)e[r.name]=t}if(r instanceof typeStore.Constructed){let n=0;let i={verified:false,result:{error:"Unknown error"}};let s=r.valueBlock.value.length;if(s>0){if(r.valueBlock.value[0]instanceof Repeated){s=t.valueBlock.value.length}}if(s===0){return{verified:true,result:e}}if(t.valueBlock.value.length===0&&r.valueBlock.value.length!==0){let t=true;for(let e=0;e<r.valueBlock.value.length;e++)t=t&&(r.valueBlock.value[e].optional||false);if(t){return{verified:true,result:e}}if(r.name){r.name=r.name.replace(/^\s+|\s+$/g,EMPTY_STRING$1);if(r.name)delete e[r.name]}e.error="Inconsistent object length";return{verified:false,result:e}}for(let a=0;a<s;a++){if(a-n>=t.valueBlock.value.length){if(r.valueBlock.value[a].optional===false){const t={verified:false,result:e};e.error="Inconsistent length between ASN.1 data and schema";if(r.name){r.name=r.name.replace(/^\s+|\s+$/g,EMPTY_STRING$1);if(r.name){delete e[r.name];t.name=r.name}}return t}}else{if(r.valueBlock.value[0]instanceof Repeated){i=compareSchema(e,t.valueBlock.value[a],r.valueBlock.value[0].value);if(i.verified===false){if(r.valueBlock.value[0].optional)n++;else{if(r.name){r.name=r.name.replace(/^\s+|\s+$/g,EMPTY_STRING$1);if(r.name)delete e[r.name]}return i}}if(NAME$2 in r.valueBlock.value[0]&&r.valueBlock.value[0].name.length>0){let n={};if(LOCAL in r.valueBlock.value[0]&&r.valueBlock.value[0].local)n=t;else n=e;if(typeof n[r.valueBlock.value[0].name]==="undefined")n[r.valueBlock.value[0].name]=[];n[r.valueBlock.value[0].name].push(t.valueBlock.value[a])}}else{i=compareSchema(e,t.valueBlock.value[a-n],r.valueBlock.value[a]);if(i.verified===false){if(r.valueBlock.value[a].optional)n++;else{if(r.name){r.name=r.name.replace(/^\s+|\s+$/g,EMPTY_STRING$1);if(r.name)delete e[r.name]}return i}}}}}if(i.verified===false){const t={verified:false,result:e};if(r.name){r.name=r.name.replace(/^\s+|\s+$/g,EMPTY_STRING$1);if(r.name){delete e[r.name];t.name=r.name}}return t}return{verified:true,result:e}}if(r.primitiveSchema&&VALUE_HEX_VIEW in t.valueBlock){const n=localFromBER(t.valueBlock.valueHexView);if(n.offset===-1){const t={verified:false,result:n.result};if(r.name){r.name=r.name.replace(/^\s+|\s+$/g,EMPTY_STRING$1);if(r.name){delete e[r.name];t.name=r.name}}return t}return compareSchema(e,n.result,r.primitiveSchema)}return{verified:true,result:e}}function verifySchema(e,t){if(t instanceof Object===false){return{verified:false,result:{error:"Wrong ASN.1 schema type"}}}const r=localFromBER(BufferSourceConverter_1.toUint8Array(e));if(r.offset===-1){return{verified:false,result:r.result}}return compareSchema(r.result,r.result,t)}const asn1js=Object.freeze({__proto__:null,Any,BaseBlock,BaseStringBlock,BitString:BitString$1,BmpString,Boolean:Boolean$1,CharacterString,Choice,Constructed,DATE:DATE$2,DateTime,Duration,EndOfContent,Enumerated,GeneralString,GeneralizedTime,GraphicString,HexBlock,IA5String,Integer,Null,NumericString,ObjectIdentifier:ObjectIdentifier$1,OctetString:OctetString$1,Primitive,PrintableString,RawData,RelativeObjectIdentifier,Repeated,Sequence,Set:Set$3,TIME:TIME$1,TeletexString,TimeOfDay,UTCTime,UniversalString,Utf8String,ValueBlock,VideotexString,ViewWriter,VisibleString,compareSchema,fromBER,verifySchema});class ByteStream{constructor(e={}){if("view"in e){this.fromUint8Array(e.view)}else if("buffer"in e){this.fromArrayBuffer(e.buffer)}else if("string"in e){this.fromString(e.string)}else if("hexstring"in e){this.fromHexString(e.hexstring)}else{if("length"in e&&e.length>0){this.length=e.length;if(e.stub){for(let t=0;t<this._view.length;t++){this._view[t]=e.stub}}}else{this.length=0}}}set buffer(e){this._buffer=e;this._view=new Uint8Array(this._buffer)}get buffer(){return this._buffer}set view(e){this._buffer=new ArrayBuffer(e.length);this._view=new Uint8Array(this._buffer);this._view.set(e)}get view(){return this._view}get length(){return this.view.byteLength}set length(e){this._buffer=new ArrayBuffer(e);this._view=new Uint8Array(this._buffer)}clear(){this._buffer=new ArrayBuffer(0);this._view=new Uint8Array(this._buffer)}fromArrayBuffer(e){this._buffer=e;this._view=new Uint8Array(this._buffer)}fromUint8Array(e){this.fromArrayBuffer(new Uint8Array(e).buffer)}fromString(e){const t=e.length;this.length=t;for(let r=0;r<t;r++)this.view[r]=e.charCodeAt(r)}toString(e=0,t=this.view.length-e){let r="";if(e>=this.view.length||e<0){e=0}if(t>=this.view.length||t<0){t=this.view.length-e}for(let n=e;n<e+t;n++)r+=String.fromCharCode(this.view[n]);return r}fromHexString(e){const t=e.length;this.buffer=new ArrayBuffer(t>>1);this.view=new Uint8Array(this.buffer);const r=new Map;r.set("0",0);r.set("1",1);r.set("2",2);r.set("3",3);r.set("4",4);r.set("5",5);r.set("6",6);r.set("7",7);r.set("8",8);r.set("9",9);r.set("A",10);r.set("a",10);r.set("B",11);r.set("b",11);r.set("C",12);r.set("c",12);r.set("D",13);r.set("d",13);r.set("E",14);r.set("e",14);r.set("F",15);r.set("f",15);let n=0;let i=0;for(let s=0;s<t;s++){if(!(s%2)){i=r.get(e.charAt(s))<<4}else{i|=r.get(e.charAt(s));this.view[n]=i;n++}}}toHexString(e=0,t=this.view.length-e){let r="";if(e>=this.view.length||e<0){e=0}if(t>=this.view.length||t<0){t=this.view.length-e}for(let n=e;n<e+t;n++){const e=this.view[n].toString(16).toUpperCase();r=r+(e.length==1?"0":"")+e}return r}copy(e=0,t=this.length-e){if(!e&&!this.length){return new ByteStream}if(e<0||e>this.length-1){throw new Error(`Wrong start position: ${e}`)}const r=new ByteStream({buffer:this._buffer.slice(e,e+t)});return r}slice(e=0,t=this.length){if(!e&&!this.length){return new ByteStream}if(e<0||e>this.length-1){throw new Error(`Wrong start position: ${e}`)}const r=new ByteStream({buffer:this._buffer.slice(e,t)});return r}realloc(e){const t=new ArrayBuffer(e);const r=new Uint8Array(t);if(e>this._view.length)r.set(this._view);else{r.set(new Uint8Array(this._buffer,0,e))}this._buffer=t;this._view=new Uint8Array(this._buffer)}append(e){const t=this.length;const r=e.length;const n=e._view.subarray();this.realloc(t+r);this._view.set(n,t)}insert(e,t=0,r=this.length-t){if(t>this.length-1)return false;if(r>this.length-t){r=this.length-t}if(r>e.length){r=e.length}if(r==e.length)this._view.set(e._view,t);else{this._view.set(e._view.subarray(0,r),t)}return true}isEqual(e){if(this.length!=e.length)return false;for(let t=0;t<e.length;t++){if(this.view[t]!=e.view[t])return false}return true}isEqualView(e){if(e.length!=this.view.length)return false;for(let t=0;t<e.length;t++){if(this.view[t]!=e[t])return false}return true}findPattern(e,t,r,n){const{start:i,length:s,backward:a}=this.prepareFindParameters(t,r,n);const o=e.length;if(o>s){return-1}const f=[];for(let t=0;t<o;t++)f.push(e.view[t]);for(let e=0;e<=s-o;e++){let t=true;const r=a?i-o-e:i+e;for(let e=0;e<o;e++){if(this.view[e+r]!=f[e]){t=false;break}}if(t){return a?i-o-e:i+o+e}}return-1}findFirstIn(e,t,r,n){const{start:i,length:s,backward:a}=this.prepareFindParameters(t,r,n);const o={id:-1,position:a?0:i+s,length:0};for(let t=0;t<e.length;t++){const r=this.findPattern(e[t],i,s,a);if(r!=-1){let n=false;const i=e[t].length;if(a){if(r-i>=o.position-o.length)n=true}else{if(r-i<=o.position-o.length)n=true}if(n){o.position=r;o.id=t;o.length=i}}}return o}findAllIn(e,t,r){let{start:n,length:i}=this.prepareFindParameters(t,r);const s=[];let a={id:-1,position:n};do{const t=a.position;a=this.findFirstIn(e,a.position,i);if(a.id==-1){break}i-=a.position-t;s.push({id:a.id,position:a.position})}while(true);return s}findAllPatternIn(e,t,r){const{start:n,length:i}=this.prepareFindParameters(t,r);const s=[];const a=e.length;if(a>i){return-1}const o=Array.from(e.view);for(let e=0;e<=i-a;e++){let t=true;const r=n+e;for(let e=0;e<a;e++){if(this.view[e+r]!=o[e]){t=false;break}}if(t){s.push(n+a+e);e+=a-1}}return s}findFirstNotIn(e,t,r,n){let{start:i,length:s,backward:a}=this.prepareFindParameters(t,r,n);const o={left:{id:-1,position:i},right:{id:-1,position:0},value:new ByteStream};let f=s;while(f>0){o.right=this.findFirstIn(e,a?i-s+f:i+s-f,f,a);if(o.right.id==-1){s=f;if(a){i-=s}else{i=o.left.position}o.value=new ByteStream({buffer:this._buffer.slice(i,i+s)});break}if(o.right.position!=(a?o.left.position-e[o.right.id].length:o.left.position+e[o.right.id].length)){if(a){i=o.right.position+e[o.right.id].length;s=o.left.position-o.right.position-e[o.right.id].length}else{i=o.left.position;s=o.right.position-o.left.position-e[o.right.id].length}o.value=new ByteStream({buffer:this._buffer.slice(i,i+s)});break}o.left=o.right;f-=e[o.right.id].length}if(a){const e=o.right;o.right=o.left;o.left=e}return o}findAllNotIn(e,t,r){let{start:n,length:i}=this.prepareFindParameters(t,r);const s=[];let a={left:{id:-1,position:n},right:{id:-1,position:n},value:new ByteStream};do{const t=a.right.position;a=this.findFirstNotIn(e,a.right.position,i);i-=a.right.position-t;s.push({left:{id:a.left.id,position:a.left.position},right:{id:a.right.id,position:a.right.position},value:a.value})}while(a.right.id!=-1);return s}findFirstSequence(e,t,r,n){let{start:i,length:s,backward:a}=this.prepareFindParameters(t,r,n);const o=this.skipNotPatterns(e,i,s,a);if(o==-1){return{position:-1,value:new ByteStream}}const f=this.skipPatterns(e,o,s-(a?i-o:o-i),a);if(a){i=f;s=o-f}else{i=o;s=f-o}const c=new ByteStream({buffer:this._buffer.slice(i,i+s)});return{position:f,value:c}}findAllSequences(e,t,r){let{start:n,length:i}=this.prepareFindParameters(t,r);const s=[];let a={position:n,value:new ByteStream};do{const t=a.position;a=this.findFirstSequence(e,a.position,i);if(a.position!=-1){i-=a.position-t;s.push({position:a.position,value:a.value})}}while(a.position!=-1);return s}findPairedPatterns(e,t,r,n){const i=[];if(e.isEqual(t))return i;const{start:s,length:a}=this.prepareFindParameters(r,n);let o=0;const f=this.findAllPatternIn(e,s,a);if(!Array.isArray(f)||f.length==0){return i}const c=this.findAllPatternIn(t,s,a);if(!Array.isArray(c)||c.length==0){return i}while(o<f.length){if(c.length==0){break}if(f[0]==c[0]){i.push({left:f[0],right:c[0]});f.splice(0,1);c.splice(0,1);continue}if(f[o]>c[0]){break}while(f[o]<c[0]){o++;if(o>=f.length){break}}i.push({left:f[o-1],right:c[0]});f.splice(o-1,1);c.splice(0,1);o=0}i.sort(((e,t)=>e.left-t.left));return i}findPairedArrays(e,t,r,n){const{start:i,length:s}=this.prepareFindParameters(r,n);const a=[];let o=0;const f=this.findAllIn(e,i,s);if(f.length==0)return a;const c=this.findAllIn(t,i,s);if(c.length==0)return a;while(o<f.length){if(c.length==0){break}if(f[0].position==c[0].position){a.push({left:f[0],right:c[0]});f.splice(0,1);c.splice(0,1);continue}if(f[o].position>c[0].position){break}while(f[o].position<c[0].position){o++;if(o>=f.length){break}}a.push({left:f[o-1],right:c[0]});f.splice(o-1,1);c.splice(0,1);o=0}a.sort(((e,t)=>e.left.position-t.left.position));return a}replacePattern(e,t,r,n,i=null){let s=[];let a;const o={status:-1,searchPatternPositions:[],replacePatternPositions:[]};const{start:f,length:c}=this.prepareFindParameters(r,n);if(i==null){s=this.findAllIn([e],f,c);if(s.length==0){return o}}else{s=i}o.searchPatternPositions.push(...Array.from(s,(e=>e.position)));const u=e.length-t.length;const l=new ArrayBuffer(this.view.length-s.length*u);const h=new Uint8Array(l);h.set(new Uint8Array(this.buffer,0,f));for(a=0;a<s.length;a++){const r=a==0?f:s[a-1].position;h.set(new Uint8Array(this.buffer,r,s[a].position-e.length-r),r-a*u);h.set(t.view,s[a].position-e.length-a*u);o.replacePatternPositions.push(s[a].position-e.length-a*u)}a--;h.set(new Uint8Array(this.buffer,s[a].position,this.length-s[a].position),s[a].position-e.length+t.length-a*u);this.buffer=l;this.view=new Uint8Array(this.buffer);o.status=1;return o}skipPatterns(e,t,r,n){const{start:i,length:s,backward:a}=this.prepareFindParameters(t,r,n);let o=i;for(let t=0;t<e.length;t++){const r=e[t].length;const n=a?o-r:o;let f=true;for(let i=0;i<r;i++){if(this.view[i+n]!=e[t].view[i]){f=false;break}}if(f){t=-1;if(a){o-=r;if(o<=0)return o}else{o+=r;if(o>=i+s)return o}}}return o}skipNotPatterns(e,t,r,n){const{start:i,length:s,backward:a}=this.prepareFindParameters(t,r,n);let o=-1;for(let t=0;t<s;t++){for(let r=0;r<e.length;r++){const n=e[r].length;const s=a?i-t-n:i+t;let f=true;for(let t=0;t<n;t++){if(this.view[t+s]!=e[r].view[t]){f=false;break}}if(f){o=a?i-t:i+t;break}}if(o!=-1){break}}return o}prepareFindParameters(e=null,t=null,r=false){if(e===null){e=r?this.length:0}if(e>this.length){e=this.length}if(r){if(t===null){t=e}if(t>e){t=e}}else{if(t===null){t=this.length-e}if(t>this.length-e){t=this.length-e}}return{start:e,length:t,backward:r}}}const pow2_24=16777216;class SeqStream{constructor(e={}){this._stream=new ByteStream;this._length=0;this._start=0;this.backward=false;this.appendBlock=0;this.prevLength=0;this.prevStart=0;if("view"in e){this.stream=new ByteStream({view:e.view})}else if("buffer"in e){this.stream=new ByteStream({buffer:e.buffer})}else if("string"in e){this.stream=new ByteStream({string:e.string})}else if("hexstring"in e){this.stream=new ByteStream({hexstring:e.hexstring})}else if("stream"in e){this.stream=e.stream.slice()}else{this.stream=new ByteStream}if("backward"in e&&e.backward){this.backward=e.backward;this._start=this.stream.length}if("length"in e&&e.length>0){this._length=e.length}if("start"in e&&e.start&&e.start>0){this._start=e.start}if("appendBlock"in e&&e.appendBlock&&e.appendBlock>0){this.appendBlock=e.appendBlock}}set stream(e){this._stream=e;this.prevLength=this._length;this._length=e.length;this.prevStart=this._start;this._start=0}get stream(){return this._stream}set length(e){this.prevLength=this._length;this._length=e}get length(){if(this.appendBlock){return this.start}return this._length}set start(e){if(e>this.stream.length)return;this.prevStart=this._start;this.prevLength=this._length;this._length-=this.backward?this._start-e:e-this._start;this._start=e}get start(){return this._start}get buffer(){return this._stream.buffer.slice(0,this._length)}resetPosition(){this._start=this.prevStart;this._length=this.prevLength}findPattern(e,t=null){if(t==null||t>this.length){t=this.length}const r=this.stream.findPattern(e,this.start,this.length,this.backward);if(r==-1)return r;if(this.backward){if(r<this.start-e.length-t){return-1}}else{if(r>this.start+e.length+t){return-1}}this.start=r;return r}findFirstIn(e,t=null){if(t==null||t>this.length){t=this.length}const r=this.stream.findFirstIn(e,this.start,this.length,this.backward);if(r.id==-1)return r;if(this.backward){if(r.position<this.start-e[r.id].length-t){return{id:-1,position:this.backward?0:this.start+this.length}}}else{if(r.position>this.start+e[r.id].length+t){return{id:-1,position:this.backward?0:this.start+this.length}}}this.start=r.position;return r}findAllIn(e){const t=this.backward?this.start-this.length:this.start;return this.stream.findAllIn(e,t,this.length)}findFirstNotIn(e,t=null){if(t==null||t>this._length){t=this._length}const r=this._stream.findFirstNotIn(e,this._start,this._length,this.backward);if(r.left.id==-1&&r.right.id==-1){return r}if(this.backward){if(r.right.id!=-1){if(r.right.position<this._start-e[r.right.id].length-t){return{left:{id:-1,position:this._start},right:{id:-1,position:0},value:new ByteStream}}}}else{if(r.left.id!=-1){if(r.left.position>this._start+e[r.left.id].length+t){return{left:{id:-1,position:this._start},right:{id:-1,position:0},value:new ByteStream}}}}if(this.backward){if(r.left.id==-1){this.start=0}else{this.start=r.left.position}}else{if(r.right.id==-1){this.start=this._start+this._length}else{this.start=r.right.position}}return r}findAllNotIn(e){const t=this.backward?this._start-this._length:this._start;return this._stream.findAllNotIn(e,t,this._length)}findFirstSequence(e,t=null,r=null){if(t==null||t>this._length){t=this._length}if(r==null||r>t){r=t}const n=this._stream.findFirstSequence(e,this._start,t,this.backward);if(n.value.length==0){return n}if(this.backward){if(n.position<this._start-n.value.length-r){return{position:-1,value:new ByteStream}}}else{if(n.position>this._start+n.value.length+r){return{position:-1,value:new ByteStream}}}this.start=n.position;return n}findAllSequences(e){const t=this.backward?this.start-this.length:this.start;return this.stream.findAllSequences(e,t,this.length)}findPairedPatterns(e,t,r=null){if(r==null||r>this.length){r=this.length}const n=this.backward?this.start-this.length:this.start;const i=this.stream.findPairedPatterns(e,t,n,this.length);if(i.length){if(this.backward){if(i[0].right<this.start-t.length-r){return[]}}else{if(i[0].left>this.start+e.length+r){return[]}}}return i}findPairedArrays(e,t,r=null){if(r==null||r>this.length){r=this.length}const n=this.backward?this.start-this.length:this.start;const i=this.stream.findPairedArrays(e,t,n,this.length);if(i.length){if(this.backward){if(i[0].right.position<this.start-t[i[0].right.id].length-r){return[]}}else{if(i[0].left.position>this.start+e[i[0].left.id].length+r){return[]}}}return i}replacePattern(e,t){const r=this.backward?this.start-this.length:this.start;return this.stream.replacePattern(e,t,r,this.length)}skipPatterns(e){const t=this.stream.skipPatterns(e,this.start,this.length,this.backward);this.start=t;return t}skipNotPatterns(e){const t=this.stream.skipNotPatterns(e,this.start,this.length,this.backward);if(t==-1)return-1;this.start=t;return t}append(e){this.beforeAppend(e.length);this._stream.view.set(e.view,this._start);this._length+=e.length*2;this.start=this._start+e.length;this.prevLength-=e.length*2}appendView(e){this.beforeAppend(e.length);this._stream.view.set(e,this._start);this._length+=e.length*2;this.start=this._start+e.length;this.prevLength-=e.length*2}appendChar(e){this.beforeAppend(1);this._stream.view[this._start]=e;this._length+=2;this.start=this._start+1;this.prevLength-=2}appendUint16(e){this.beforeAppend(2);const t=new Uint16Array([e]);const r=new Uint8Array(t.buffer);this.stream.view[this._start]=r[1];this._stream.view[this._start+1]=r[0];this._length+=4;this.start=this._start+2;this.prevLength-=4}appendUint24(e){this.beforeAppend(3);const t=new Uint32Array([e]);const r=new Uint8Array(t.buffer);this._stream.view[this._start]=r[2];this._stream.view[this._start+1]=r[1];this._stream.view[this._start+2]=r[0];this._length+=6;this.start=this._start+3;this.prevLength-=6}appendUint32(e){this.beforeAppend(4);const t=new Uint32Array([e]);const r=new Uint8Array(t.buffer);this._stream.view[this._start]=r[3];this._stream.view[this._start+1]=r[2];this._stream.view[this._start+2]=r[1];this._stream.view[this._start+3]=r[0];this._length+=8;this.start=this._start+4;this.prevLength-=8}appendInt16(e){this.beforeAppend(2);const t=new Int16Array([e]);const r=new Uint8Array(t.buffer);this._stream.view[this._start]=r[1];this._stream.view[this._start+1]=r[0];this._length+=4;this.start=this._start+2;this.prevLength-=4}appendInt32(e){this.beforeAppend(4);const t=new Int32Array([e]);const r=new Uint8Array(t.buffer);this._stream.view[this._start]=r[3];this._stream.view[this._start+1]=r[2];this._stream.view[this._start+2]=r[1];this._stream.view[this._start+3]=r[0];this._length+=8;this.start=this._start+4;this.prevLength-=8}getBlock(e,t=true){if(this._length<=0){return new Uint8Array(0)}if(this._length<e){e=this._length}let r;if(this.backward){const t=this._stream.view.subarray(this._length-e,this._length);r=new Uint8Array(e);for(let n=0;n<e;n++){r[e-1-n]=t[n]}}else{r=this._stream.view.subarray(this._start,this._start+e)}if(t){this.start+=this.backward?-1*e:e}return r}getUint16(e=true){const t=this.getBlock(2,e);if(t.length<2)return 0;return t[0]<<8|t[1]}getInt16(e=true){const t=this.getUint16(e);const r=32768;if(t&r){return-(r-(t^r))}return t}getUint24(e=true){const t=this.getBlock(4,e);if(t.length<3)return 0;return t[0]<<16|t[1]<<8|t[2]}getUint32(e=true){const t=this.getBlock(4,e);if(t.length<4)return 0;return t[0]*pow2_24+(t[1]<<16)+(t[2]<<8)+t[3]}getInt32(e=true){const t=this.getUint32(e);const r=2147483648;if(t&r){return-(r-(t^r))}return t}beforeAppend(e){if(this._start+e>this._stream.length){if(e>this.appendBlock){this.appendBlock=e+SeqStream.APPEND_BLOCK}this._stream.realloc(this._stream.length+this.appendBlock)}}}SeqStream.APPEND_BLOCK=1e3;
/*!
 * Copyright (c) 2014, GlobalSign
 * Copyright (c) 2015-2019, Peculiar Ventures
 * All rights reserved.
 * 
 * Author 2014-2019, Yury Strozhevsky
 * 
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 * 
 * * Redistributions of source code must retain the above copyright notice, this
 *   list of conditions and the following disclaimer.
 * 
 * * Redistributions in binary form must reproduce the above copyright notice, this
 *   list of conditions and the following disclaimer in the documentation and/or
 *   other materials provided with the distribution.
 * 
 * * Neither the name of the {organization} nor the names of its
 *   contributors may be used to endorse or promote products derived from
 *   this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR
 * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
 * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 * 
 */const EMPTY_BUFFER=new ArrayBuffer(0);const EMPTY_STRING="";class ArgumentError extends TypeError{constructor(){super(...arguments);this.name=ArgumentError.NAME}static isType(e,t){if(typeof t==="string"){if(t==="Array"&&Array.isArray(e)){return true}else if(t==="ArrayBuffer"&&e instanceof ArrayBuffer){return true}else if(t==="ArrayBufferView"&&ArrayBuffer.isView(e)){return true}else if(typeof e===t){return true}}else if(e instanceof t){return true}return false}static assert(e,t,...r){for(const t of r){if(this.isType(e,t)){return}}const n=r.map((e=>e instanceof Function&&"name"in e?e.name:`${e}`));throw new ArgumentError(`Parameter '${t}' is not of type ${n.length>1?`(${n.join(" or ")})`:n[0]}`)}}ArgumentError.NAME="ArgumentError";class ParameterError extends TypeError{constructor(e,t=null,r){super();this.name=ParameterError.NAME;this.field=e;if(t){this.target=t}if(r){this.message=r}else{this.message=`Absent mandatory parameter '${e}' ${t?` in '${t}'`:EMPTY_STRING}`}}static assert(...e){let t=null;let r;let n;if(typeof e[0]==="string"){t=e[0];r=e[1];n=e.slice(2)}else{r=e[0];n=e.slice(1)}ArgumentError.assert(r,"parameters","object");for(const e of n){const n=r[e];if(n===undefined||n===null){throw new ParameterError(e,t)}}}static assertEmpty(e,t,r){if(e===undefined||e===null){throw new ParameterError(t,r)}}}ParameterError.NAME="ParameterError";class AsnError extends Error{static assertSchema(e,t){if(!e.verified){throw new Error(`Object's schema was not verified against input data for ${t}`)}}static assert(e,t){if(e.offset===-1){throw new AsnError(`Error during parsing of ASN.1 data. Data is not correct for '${t}'.`)}}constructor(e){super(e);this.name="AsnError"}}class PkiObject{static blockName(){return this.CLASS_NAME}static fromBER(e){const t=fromBER(e);AsnError.assert(t,this.name);try{return new this({schema:t.result})}catch(e){throw new AsnError(`Cannot create '${this.CLASS_NAME}' from ASN.1 object`)}}static defaultValues(e){throw new Error(`Invalid member name for ${this.CLASS_NAME} class: ${e}`)}static schema(e={}){throw new Error(`Method '${this.CLASS_NAME}.schema' should be overridden`)}get className(){return this.constructor.CLASS_NAME}toString(e="hex"){let t;try{t=this.toSchema()}catch{t=this.toSchema(true)}return Convert_1.ToString(t.toBER(),e)}}PkiObject.CLASS_NAME="PkiObject";function stringPrep(e){let t=false;let r=EMPTY_STRING;const n=e.trim();for(let e=0;e<n.length;e++){if(n.charCodeAt(e)===32){if(t===false)t=true}else{if(t){r+=" ";t=false}r+=n[e]}}return r.toLowerCase()}const TYPE$5="type";const VALUE$6="value";class AttributeTypeAndValue$1 extends PkiObject{constructor(e={}){super();this.type=getParametersValue(e,TYPE$5,AttributeTypeAndValue$1.defaultValues(TYPE$5));this.value=getParametersValue(e,VALUE$6,AttributeTypeAndValue$1.defaultValues(VALUE$6));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case TYPE$5:return EMPTY_STRING;case VALUE$6:return{};default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new ObjectIdentifier$1({name:t.type||EMPTY_STRING}),new Any({name:t.value||EMPTY_STRING})]})}fromSchema(e){clearProps(e,[TYPE$5,"typeValue"]);const t=compareSchema(e,e,AttributeTypeAndValue$1.schema({names:{type:TYPE$5,value:"typeValue"}}));AsnError.assertSchema(t,this.className);this.type=t.result.type.valueBlock.toString();this.value=t.result.typeValue}toSchema(){return new Sequence({value:[new ObjectIdentifier$1({value:this.type}),this.value]})}toJSON(){const e={type:this.type};if(Object.keys(this.value).length!==0){e.value=this.value.toJSON()}else{e.value=this.value}return e}isEqual(e){const t=[Utf8String.blockName(),BmpString.blockName(),UniversalString.blockName(),NumericString.blockName(),PrintableString.blockName(),TeletexString.blockName(),VideotexString.blockName(),IA5String.blockName(),GraphicString.blockName(),VisibleString.blockName(),GeneralString.blockName(),CharacterString.blockName()];if(e instanceof ArrayBuffer){return BufferSourceConverter_1.isEqual(this.value.valueBeforeDecodeView,e)}if(e.constructor.blockName()===AttributeTypeAndValue$1.blockName()){if(this.type!==e.type)return false;const r=[false,false];const n=this.value.constructor.blockName();for(const i of t){if(n===i){r[0]=true}if(e.value.constructor.blockName()===i){r[1]=true}}if(r[0]!==r[1]){return false}const i=r[0]&&r[1];if(i){const t=stringPrep(this.value.valueBlock.value);const r=stringPrep(e.value.valueBlock.value);if(t.localeCompare(r)!==0)return false}else{if(!BufferSourceConverter_1.isEqual(this.value.valueBeforeDecodeView,e.value.valueBeforeDecodeView))return false}return true}return false}}AttributeTypeAndValue$1.CLASS_NAME="AttributeTypeAndValue";const TYPE_AND_VALUES="typesAndValues";const VALUE_BEFORE_DECODE="valueBeforeDecode";const RDN="RDN";class RelativeDistinguishedNames extends PkiObject{constructor(e={}){super();this.typesAndValues=getParametersValue(e,TYPE_AND_VALUES,RelativeDistinguishedNames.defaultValues(TYPE_AND_VALUES));this.valueBeforeDecode=getParametersValue(e,VALUE_BEFORE_DECODE,RelativeDistinguishedNames.defaultValues(VALUE_BEFORE_DECODE));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case TYPE_AND_VALUES:return[];case VALUE_BEFORE_DECODE:return EMPTY_BUFFER;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case TYPE_AND_VALUES:return t.length===0;case VALUE_BEFORE_DECODE:return t.byteLength===0;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Repeated({name:t.repeatedSequence||EMPTY_STRING,value:new Set$3({value:[new Repeated({name:t.repeatedSet||EMPTY_STRING,value:AttributeTypeAndValue$1.schema(t.typeAndValue||{})})]})})]})}fromSchema(e){clearProps(e,[RDN,TYPE_AND_VALUES]);const t=compareSchema(e,e,RelativeDistinguishedNames.schema({names:{blockName:RDN,repeatedSet:TYPE_AND_VALUES}}));AsnError.assertSchema(t,this.className);if(TYPE_AND_VALUES in t.result){this.typesAndValues=Array.from(t.result.typesAndValues,(e=>new AttributeTypeAndValue$1({schema:e})))}this.valueBeforeDecode=t.result.RDN.valueBeforeDecodeView.slice().buffer}toSchema(){if(this.valueBeforeDecode.byteLength===0){return new Sequence({value:[new Set$3({value:Array.from(this.typesAndValues,(e=>e.toSchema()))})]})}const e=fromBER(this.valueBeforeDecode);AsnError.assert(e,"RelativeDistinguishedNames");if(!(e.result instanceof Sequence)){throw new Error("ASN.1 result should be SEQUENCE")}return e.result}toJSON(){return{typesAndValues:Array.from(this.typesAndValues,(e=>e.toJSON()))}}isEqual(e){if(e instanceof RelativeDistinguishedNames){if(this.typesAndValues.length!==e.typesAndValues.length)return false;for(const[t,r]of this.typesAndValues.entries()){if(r.isEqual(e.typesAndValues[t])===false)return false}return true}if(e instanceof ArrayBuffer){return isEqualBuffer(this.valueBeforeDecode,e)}return false}}RelativeDistinguishedNames.CLASS_NAME="RelativeDistinguishedNames";const TYPE$4="type";const VALUE$5="value";function builtInStandardAttributes(e={},t=false){const r=getParametersValue(e,"names",{});return new Sequence({optional:t,value:[new Constructed({optional:true,idBlock:{tagClass:2,tagNumber:1},name:r.country_name||EMPTY_STRING,value:[new Choice({value:[new NumericString,new PrintableString]})]}),new Constructed({optional:true,idBlock:{tagClass:2,tagNumber:2},name:r.administration_domain_name||EMPTY_STRING,value:[new Choice({value:[new NumericString,new PrintableString]})]}),new Primitive({optional:true,idBlock:{tagClass:3,tagNumber:0},name:r.network_address||EMPTY_STRING,isHexOnly:true}),new Primitive({optional:true,idBlock:{tagClass:3,tagNumber:1},name:r.terminal_identifier||EMPTY_STRING,isHexOnly:true}),new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:2},name:r.private_domain_name||EMPTY_STRING,value:[new Choice({value:[new NumericString,new PrintableString]})]}),new Primitive({optional:true,idBlock:{tagClass:3,tagNumber:3},name:r.organization_name||EMPTY_STRING,isHexOnly:true}),new Primitive({optional:true,name:r.numeric_user_identifier||EMPTY_STRING,idBlock:{tagClass:3,tagNumber:4},isHexOnly:true}),new Constructed({optional:true,name:r.personal_name||EMPTY_STRING,idBlock:{tagClass:3,tagNumber:5},value:[new Primitive({idBlock:{tagClass:3,tagNumber:0},isHexOnly:true}),new Primitive({optional:true,idBlock:{tagClass:3,tagNumber:1},isHexOnly:true}),new Primitive({optional:true,idBlock:{tagClass:3,tagNumber:2},isHexOnly:true}),new Primitive({optional:true,idBlock:{tagClass:3,tagNumber:3},isHexOnly:true})]}),new Constructed({optional:true,name:r.organizational_unit_names||EMPTY_STRING,idBlock:{tagClass:3,tagNumber:6},value:[new Repeated({value:new PrintableString})]})]})}function builtInDomainDefinedAttributes(e=false){return new Sequence({optional:e,value:[new PrintableString,new PrintableString]})}function extensionAttributes(e=false){return new Set$3({optional:e,value:[new Primitive({optional:true,idBlock:{tagClass:3,tagNumber:0},isHexOnly:true}),new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:1},value:[new Any]})]})}class GeneralName$2 extends PkiObject{constructor(e={}){super();this.type=getParametersValue(e,TYPE$4,GeneralName$2.defaultValues(TYPE$4));this.value=getParametersValue(e,VALUE$5,GeneralName$2.defaultValues(VALUE$5));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case TYPE$4:return 9;case VALUE$5:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case TYPE$4:return t===GeneralName$2.defaultValues(e);case VALUE$5:return Object.keys(t).length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Choice({value:[new Constructed({idBlock:{tagClass:3,tagNumber:0},name:t.blockName||EMPTY_STRING,value:[new ObjectIdentifier$1,new Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new Any]})]}),new Primitive({name:t.blockName||EMPTY_STRING,idBlock:{tagClass:3,tagNumber:1}}),new Primitive({name:t.blockName||EMPTY_STRING,idBlock:{tagClass:3,tagNumber:2}}),new Constructed({idBlock:{tagClass:3,tagNumber:3},name:t.blockName||EMPTY_STRING,value:[builtInStandardAttributes(t.builtInStandardAttributes||{},false),builtInDomainDefinedAttributes(true),extensionAttributes(true)]}),new Constructed({idBlock:{tagClass:3,tagNumber:4},name:t.blockName||EMPTY_STRING,value:[RelativeDistinguishedNames.schema(t.directoryName||{})]}),new Constructed({idBlock:{tagClass:3,tagNumber:5},name:t.blockName||EMPTY_STRING,value:[new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:0},value:[new Choice({value:[new TeletexString,new PrintableString,new UniversalString,new Utf8String,new BmpString]})]}),new Constructed({idBlock:{tagClass:3,tagNumber:1},value:[new Choice({value:[new TeletexString,new PrintableString,new UniversalString,new Utf8String,new BmpString]})]})]}),new Primitive({name:t.blockName||EMPTY_STRING,idBlock:{tagClass:3,tagNumber:6}}),new Primitive({name:t.blockName||EMPTY_STRING,idBlock:{tagClass:3,tagNumber:7}}),new Primitive({name:t.blockName||EMPTY_STRING,idBlock:{tagClass:3,tagNumber:8}})]})}fromSchema(e){clearProps(e,["blockName","otherName","rfc822Name","dNSName","x400Address","directoryName","ediPartyName","uniformResourceIdentifier","iPAddress","registeredID"]);const t=compareSchema(e,e,GeneralName$2.schema({names:{blockName:"blockName",otherName:"otherName",rfc822Name:"rfc822Name",dNSName:"dNSName",x400Address:"x400Address",directoryName:{names:{blockName:"directoryName"}},ediPartyName:"ediPartyName",uniformResourceIdentifier:"uniformResourceIdentifier",iPAddress:"iPAddress",registeredID:"registeredID"}}));AsnError.assertSchema(t,this.className);this.type=t.result.blockName.idBlock.tagNumber;switch(this.type){case 0:this.value=t.result.blockName;break;case 1:case 2:case 6:{const e=t.result.blockName;e.idBlock.tagClass=1;e.idBlock.tagNumber=22;const r=e.toBER(false);const n=fromBER(r);AsnError.assert(n,"GeneralName value");this.value=n.result.valueBlock.value}break;case 3:this.value=t.result.blockName;break;case 4:this.value=new RelativeDistinguishedNames({schema:t.result.directoryName});break;case 5:this.value=t.result.ediPartyName;break;case 7:this.value=new OctetString$1({valueHex:t.result.blockName.valueBlock.valueHex});break;case 8:{const e=t.result.blockName;e.idBlock.tagClass=1;e.idBlock.tagNumber=6;const r=e.toBER(false);const n=fromBER(r);AsnError.assert(n,"GeneralName registeredID");this.value=n.result.valueBlock.toString()}break}}toSchema(){switch(this.type){case 0:case 3:case 5:return new Constructed({idBlock:{tagClass:3,tagNumber:this.type},value:[this.value]});case 1:case 2:case 6:{const e=new IA5String({value:this.value});e.idBlock.tagClass=3;e.idBlock.tagNumber=this.type;return e}case 4:return new Constructed({idBlock:{tagClass:3,tagNumber:4},value:[this.value.toSchema()]});case 7:{const e=this.value;e.idBlock.tagClass=3;e.idBlock.tagNumber=this.type;return e}case 8:{const e=new ObjectIdentifier$1({value:this.value});e.idBlock.tagClass=3;e.idBlock.tagNumber=this.type;return e}default:return GeneralName$2.schema()}}toJSON(){const e={type:this.type,value:EMPTY_STRING};if(typeof this.value==="string")e.value=this.value;else{try{e.value=this.value.toJSON()}catch(e){}}return e}}GeneralName$2.CLASS_NAME="GeneralName";const ACCESS_METHOD="accessMethod";const ACCESS_LOCATION="accessLocation";const CLEAR_PROPS$1v=[ACCESS_METHOD,ACCESS_LOCATION];class AccessDescription$1 extends PkiObject{constructor(e={}){super();this.accessMethod=getParametersValue(e,ACCESS_METHOD,AccessDescription$1.defaultValues(ACCESS_METHOD));this.accessLocation=getParametersValue(e,ACCESS_LOCATION,AccessDescription$1.defaultValues(ACCESS_LOCATION));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case ACCESS_METHOD:return EMPTY_STRING;case ACCESS_LOCATION:return new GeneralName$2;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new ObjectIdentifier$1({name:t.accessMethod||EMPTY_STRING}),GeneralName$2.schema(t.accessLocation||{})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$1v);const t=compareSchema(e,e,AccessDescription$1.schema({names:{accessMethod:ACCESS_METHOD,accessLocation:{names:{blockName:ACCESS_LOCATION}}}}));AsnError.assertSchema(t,this.className);this.accessMethod=t.result.accessMethod.valueBlock.toString();this.accessLocation=new GeneralName$2({schema:t.result.accessLocation})}toSchema(){return new Sequence({value:[new ObjectIdentifier$1({value:this.accessMethod}),this.accessLocation.toSchema()]})}toJSON(){return{accessMethod:this.accessMethod,accessLocation:this.accessLocation.toJSON()}}}AccessDescription$1.CLASS_NAME="AccessDescription";const SECONDS="seconds";const MILLIS="millis";const MICROS="micros";class Accuracy extends PkiObject{constructor(e={}){super();if(SECONDS in e){this.seconds=getParametersValue(e,SECONDS,Accuracy.defaultValues(SECONDS))}if(MILLIS in e){this.millis=getParametersValue(e,MILLIS,Accuracy.defaultValues(MILLIS))}if(MICROS in e){this.micros=getParametersValue(e,MICROS,Accuracy.defaultValues(MICROS))}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case SECONDS:case MILLIS:case MICROS:return 0;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case SECONDS:case MILLIS:case MICROS:return t===Accuracy.defaultValues(e);default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,optional:true,value:[new Integer({optional:true,name:t.seconds||EMPTY_STRING}),new Primitive({name:t.millis||EMPTY_STRING,optional:true,idBlock:{tagClass:3,tagNumber:0}}),new Primitive({name:t.micros||EMPTY_STRING,optional:true,idBlock:{tagClass:3,tagNumber:1}})]})}fromSchema(e){clearProps(e,[SECONDS,MILLIS,MICROS]);const t=compareSchema(e,e,Accuracy.schema({names:{seconds:SECONDS,millis:MILLIS,micros:MICROS}}));AsnError.assertSchema(t,this.className);if("seconds"in t.result){this.seconds=t.result.seconds.valueBlock.valueDec}if("millis"in t.result){const e=new Integer({valueHex:t.result.millis.valueBlock.valueHex});this.millis=e.valueBlock.valueDec}if("micros"in t.result){const e=new Integer({valueHex:t.result.micros.valueBlock.valueHex});this.micros=e.valueBlock.valueDec}}toSchema(){const e=[];if(this.seconds!==undefined)e.push(new Integer({value:this.seconds}));if(this.millis!==undefined){const t=new Integer({value:this.millis});e.push(new Primitive({idBlock:{tagClass:3,tagNumber:0},valueHex:t.valueBlock.valueHexView}))}if(this.micros!==undefined){const t=new Integer({value:this.micros});e.push(new Primitive({idBlock:{tagClass:3,tagNumber:1},valueHex:t.valueBlock.valueHexView}))}return new Sequence({value:e})}toJSON(){const e={};if(this.seconds!==undefined)e.seconds=this.seconds;if(this.millis!==undefined)e.millis=this.millis;if(this.micros!==undefined)e.micros=this.micros;return e}}Accuracy.CLASS_NAME="Accuracy";const ALGORITHM_ID="algorithmId";const ALGORITHM_PARAMS="algorithmParams";const ALGORITHM$2="algorithm";const PARAMS="params";const CLEAR_PROPS$1u=[ALGORITHM$2,PARAMS];class AlgorithmIdentifier$2 extends PkiObject{constructor(e={}){super();this.algorithmId=getParametersValue(e,ALGORITHM_ID,AlgorithmIdentifier$2.defaultValues(ALGORITHM_ID));if(ALGORITHM_PARAMS in e){this.algorithmParams=getParametersValue(e,ALGORITHM_PARAMS,AlgorithmIdentifier$2.defaultValues(ALGORITHM_PARAMS))}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case ALGORITHM_ID:return EMPTY_STRING;case ALGORITHM_PARAMS:return new Any;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case ALGORITHM_ID:return t===EMPTY_STRING;case ALGORITHM_PARAMS:return t instanceof Any;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,optional:t.optional||false,value:[new ObjectIdentifier$1({name:t.algorithmIdentifier||EMPTY_STRING}),new Any({name:t.algorithmParams||EMPTY_STRING,optional:true})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$1u);const t=compareSchema(e,e,AlgorithmIdentifier$2.schema({names:{algorithmIdentifier:ALGORITHM$2,algorithmParams:PARAMS}}));AsnError.assertSchema(t,this.className);this.algorithmId=t.result.algorithm.valueBlock.toString();if(PARAMS in t.result){this.algorithmParams=t.result.params}}toSchema(){const e=[];e.push(new ObjectIdentifier$1({value:this.algorithmId}));if(this.algorithmParams&&!(this.algorithmParams instanceof Any)){e.push(this.algorithmParams)}return new Sequence({value:e})}toJSON(){const e={algorithmId:this.algorithmId};if(this.algorithmParams&&!(this.algorithmParams instanceof Any)){e.algorithmParams=this.algorithmParams.toJSON()}return e}isEqual(e){if(!(e instanceof AlgorithmIdentifier$2)){return false}if(this.algorithmId!==e.algorithmId){return false}if(this.algorithmParams){if(e.algorithmParams){return JSON.stringify(this.algorithmParams)===JSON.stringify(e.algorithmParams)}return false}if(e.algorithmParams){return false}return true}}AlgorithmIdentifier$2.CLASS_NAME="AlgorithmIdentifier";const ALT_NAMES="altNames";const CLEAR_PROPS$1t=[ALT_NAMES];class AltName extends PkiObject{constructor(e={}){super();this.altNames=getParametersValue(e,ALT_NAMES,AltName.defaultValues(ALT_NAMES));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case ALT_NAMES:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Repeated({name:t.altNames||EMPTY_STRING,value:GeneralName$2.schema()})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$1t);const t=compareSchema(e,e,AltName.schema({names:{altNames:ALT_NAMES}}));AsnError.assertSchema(t,this.className);if(ALT_NAMES in t.result){this.altNames=Array.from(t.result.altNames,(e=>new GeneralName$2({schema:e})))}}toSchema(){return new Sequence({value:Array.from(this.altNames,(e=>e.toSchema()))})}toJSON(){return{altNames:Array.from(this.altNames,(e=>e.toJSON()))}}}AltName.CLASS_NAME="AltName";const TYPE$3="type";const VALUES$1="values";const CLEAR_PROPS$1s=[TYPE$3,VALUES$1];class Attribute$3 extends PkiObject{constructor(e={}){super();this.type=getParametersValue(e,TYPE$3,Attribute$3.defaultValues(TYPE$3));this.values=getParametersValue(e,VALUES$1,Attribute$3.defaultValues(VALUES$1));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case TYPE$3:return EMPTY_STRING;case VALUES$1:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case TYPE$3:return t===EMPTY_STRING;case VALUES$1:return t.length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new ObjectIdentifier$1({name:t.type||EMPTY_STRING}),new Set$3({name:t.setName||EMPTY_STRING,value:[new Repeated({name:t.values||EMPTY_STRING,value:new Any})]})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$1s);const t=compareSchema(e,e,Attribute$3.schema({names:{type:TYPE$3,values:VALUES$1}}));AsnError.assertSchema(t,this.className);this.type=t.result.type.valueBlock.toString();this.values=t.result.values}toSchema(){return new Sequence({value:[new ObjectIdentifier$1({value:this.type}),new Set$3({value:this.values})]})}toJSON(){return{type:this.type,values:Array.from(this.values,(e=>e.toJSON()))}}}Attribute$3.CLASS_NAME="Attribute";const NOT_BEFORE_TIME="notBeforeTime";const NOT_AFTER_TIME="notAfterTime";const CLEAR_PROPS$1r=[NOT_BEFORE_TIME,NOT_AFTER_TIME];class AttCertValidityPeriod$1 extends PkiObject{constructor(e={}){super();this.notBeforeTime=getParametersValue(e,NOT_BEFORE_TIME,AttCertValidityPeriod$1.defaultValues(NOT_BEFORE_TIME));this.notAfterTime=getParametersValue(e,NOT_AFTER_TIME,AttCertValidityPeriod$1.defaultValues(NOT_AFTER_TIME));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case NOT_BEFORE_TIME:case NOT_AFTER_TIME:return new Date(0,0,0);default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new GeneralizedTime({name:t.notBeforeTime||EMPTY_STRING}),new GeneralizedTime({name:t.notAfterTime||EMPTY_STRING})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$1r);const t=compareSchema(e,e,AttCertValidityPeriod$1.schema({names:{notBeforeTime:NOT_BEFORE_TIME,notAfterTime:NOT_AFTER_TIME}}));AsnError.assertSchema(t,this.className);this.notBeforeTime=t.result.notBeforeTime.toDate();this.notAfterTime=t.result.notAfterTime.toDate()}toSchema(){return new Sequence({value:[new GeneralizedTime({valueDate:this.notBeforeTime}),new GeneralizedTime({valueDate:this.notAfterTime})]})}toJSON(){return{notBeforeTime:this.notBeforeTime,notAfterTime:this.notAfterTime}}}AttCertValidityPeriod$1.CLASS_NAME="AttCertValidityPeriod";const NAMES="names";const GENERAL_NAMES="generalNames";class GeneralNames$2 extends PkiObject{constructor(e={}){super();this.names=getParametersValue(e,NAMES,GeneralNames$2.defaultValues(NAMES));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case"names":return[];default:return super.defaultValues(e)}}static schema(e={},t=false){const r=getParametersValue(e,NAMES,{});return new Sequence({optional:t,name:r.blockName||EMPTY_STRING,value:[new Repeated({name:r.generalNames||EMPTY_STRING,value:GeneralName$2.schema()})]})}fromSchema(e){clearProps(e,[NAMES,GENERAL_NAMES]);const t=compareSchema(e,e,GeneralNames$2.schema({names:{blockName:NAMES,generalNames:GENERAL_NAMES}}));AsnError.assertSchema(t,this.className);this.names=Array.from(t.result.generalNames,(e=>new GeneralName$2({schema:e})))}toSchema(){return new Sequence({value:Array.from(this.names,(e=>e.toSchema()))})}toJSON(){return{names:Array.from(this.names,(e=>e.toJSON()))}}}GeneralNames$2.CLASS_NAME="GeneralNames";const id_SubjectDirectoryAttributes="2.5.29.9";const id_SubjectKeyIdentifier="2.5.29.14";const id_KeyUsage="2.5.29.15";const id_PrivateKeyUsagePeriod="2.5.29.16";const id_SubjectAltName="2.5.29.17";const id_IssuerAltName="2.5.29.18";const id_BasicConstraints="2.5.29.19";const id_CRLNumber="2.5.29.20";const id_BaseCRLNumber="2.5.29.27";const id_CRLReason="2.5.29.21";const id_InvalidityDate="2.5.29.24";const id_IssuingDistributionPoint="2.5.29.28";const id_CertificateIssuer="2.5.29.29";const id_NameConstraints="2.5.29.30";const id_CRLDistributionPoints="2.5.29.31";const id_FreshestCRL="2.5.29.46";const id_CertificatePolicies="2.5.29.32";const id_AnyPolicy="2.5.29.32.0";const id_MicrosoftAppPolicies="1.3.6.1.4.1.311.21.10";const id_PolicyMappings="2.5.29.33";const id_AuthorityKeyIdentifier="2.5.29.35";const id_PolicyConstraints="2.5.29.36";const id_ExtKeyUsage="2.5.29.37";const id_InhibitAnyPolicy="2.5.29.54";const id_AuthorityInfoAccess="1.3.6.1.5.5.7.1.1";const id_SubjectInfoAccess="1.3.6.1.5.5.7.1.11";const id_SignedCertificateTimestampList="1.3.6.1.4.1.11129.2.4.2";const id_MicrosoftCertTemplateV2="1.3.6.1.4.1.311.21.7";const id_MicrosoftCaVersion="1.3.6.1.4.1.311.21.1";const id_QCStatements="1.3.6.1.5.5.7.1.3";const id_ContentType_Data="1.2.840.113549.1.7.1";const id_ContentType_SignedData="1.2.840.113549.1.7.2";const id_ContentType_EnvelopedData="1.2.840.113549.1.7.3";const id_ContentType_EncryptedData="1.2.840.113549.1.7.6";const id_eContentType_TSTInfo="1.2.840.113549.1.9.16.1.4";const id_CertBag_X509Certificate="1.2.840.113549.1.9.22.1";const id_CertBag_SDSICertificate="1.2.840.113549.1.9.22.2";const id_CertBag_AttributeCertificate="1.2.840.113549.1.9.22.3";const id_CRLBag_X509CRL="1.2.840.113549.1.9.23.1";const id_pkix$1="1.3.6.1.5.5.7";const id_ad=`${id_pkix$1}.48`;const id_PKIX_OCSP_Basic=`${id_ad}.1.1`;const KEY_IDENTIFIER$1="keyIdentifier";const AUTHORITY_CERT_ISSUER="authorityCertIssuer";const AUTHORITY_CERT_SERIAL_NUMBER="authorityCertSerialNumber";const CLEAR_PROPS$1q=[KEY_IDENTIFIER$1,AUTHORITY_CERT_ISSUER,AUTHORITY_CERT_SERIAL_NUMBER];class AuthorityKeyIdentifier$1 extends PkiObject{constructor(e={}){super();if(KEY_IDENTIFIER$1 in e){this.keyIdentifier=getParametersValue(e,KEY_IDENTIFIER$1,AuthorityKeyIdentifier$1.defaultValues(KEY_IDENTIFIER$1))}if(AUTHORITY_CERT_ISSUER in e){this.authorityCertIssuer=getParametersValue(e,AUTHORITY_CERT_ISSUER,AuthorityKeyIdentifier$1.defaultValues(AUTHORITY_CERT_ISSUER))}if(AUTHORITY_CERT_SERIAL_NUMBER in e){this.authorityCertSerialNumber=getParametersValue(e,AUTHORITY_CERT_SERIAL_NUMBER,AuthorityKeyIdentifier$1.defaultValues(AUTHORITY_CERT_SERIAL_NUMBER))}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case KEY_IDENTIFIER$1:return new OctetString$1;case AUTHORITY_CERT_ISSUER:return[];case AUTHORITY_CERT_SERIAL_NUMBER:return new Integer;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Primitive({name:t.keyIdentifier||EMPTY_STRING,optional:true,idBlock:{tagClass:3,tagNumber:0}}),new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:1},value:[new Repeated({name:t.authorityCertIssuer||EMPTY_STRING,value:GeneralName$2.schema()})]}),new Primitive({name:t.authorityCertSerialNumber||EMPTY_STRING,optional:true,idBlock:{tagClass:3,tagNumber:2}})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$1q);const t=compareSchema(e,e,AuthorityKeyIdentifier$1.schema({names:{keyIdentifier:KEY_IDENTIFIER$1,authorityCertIssuer:AUTHORITY_CERT_ISSUER,authorityCertSerialNumber:AUTHORITY_CERT_SERIAL_NUMBER}}));AsnError.assertSchema(t,this.className);if(KEY_IDENTIFIER$1 in t.result)this.keyIdentifier=new OctetString$1({valueHex:t.result.keyIdentifier.valueBlock.valueHex});if(AUTHORITY_CERT_ISSUER in t.result)this.authorityCertIssuer=Array.from(t.result.authorityCertIssuer,(e=>new GeneralName$2({schema:e})));if(AUTHORITY_CERT_SERIAL_NUMBER in t.result)this.authorityCertSerialNumber=new Integer({valueHex:t.result.authorityCertSerialNumber.valueBlock.valueHex})}toSchema(){const e=[];if(this.keyIdentifier){e.push(new Primitive({idBlock:{tagClass:3,tagNumber:0},valueHex:this.keyIdentifier.valueBlock.valueHexView}))}if(this.authorityCertIssuer){e.push(new Constructed({idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.authorityCertIssuer,(e=>e.toSchema()))}))}if(this.authorityCertSerialNumber){e.push(new Primitive({idBlock:{tagClass:3,tagNumber:2},valueHex:this.authorityCertSerialNumber.valueBlock.valueHexView}))}return new Sequence({value:e})}toJSON(){const e={};if(this.keyIdentifier){e.keyIdentifier=this.keyIdentifier.toJSON()}if(this.authorityCertIssuer){e.authorityCertIssuer=Array.from(this.authorityCertIssuer,(e=>e.toJSON()))}if(this.authorityCertSerialNumber){e.authorityCertSerialNumber=this.authorityCertSerialNumber.toJSON()}return e}}AuthorityKeyIdentifier$1.CLASS_NAME="AuthorityKeyIdentifier";const PATH_LENGTH_CONSTRAINT="pathLenConstraint";const CA="cA";class BasicConstraints$1 extends PkiObject{constructor(e={}){super();this.cA=getParametersValue(e,CA,false);if(PATH_LENGTH_CONSTRAINT in e){this.pathLenConstraint=getParametersValue(e,PATH_LENGTH_CONSTRAINT,0)}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case CA:return false;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Boolean$1({optional:true,name:t.cA||EMPTY_STRING}),new Integer({optional:true,name:t.pathLenConstraint||EMPTY_STRING})]})}fromSchema(e){clearProps(e,[CA,PATH_LENGTH_CONSTRAINT]);const t=compareSchema(e,e,BasicConstraints$1.schema({names:{cA:CA,pathLenConstraint:PATH_LENGTH_CONSTRAINT}}));AsnError.assertSchema(t,this.className);if(CA in t.result){this.cA=t.result.cA.valueBlock.value}if(PATH_LENGTH_CONSTRAINT in t.result){if(t.result.pathLenConstraint.valueBlock.isHexOnly){this.pathLenConstraint=t.result.pathLenConstraint}else{this.pathLenConstraint=t.result.pathLenConstraint.valueBlock.valueDec}}}toSchema(){const e=[];if(this.cA!==BasicConstraints$1.defaultValues(CA))e.push(new Boolean$1({value:this.cA}));if(PATH_LENGTH_CONSTRAINT in this){if(this.pathLenConstraint instanceof Integer){e.push(this.pathLenConstraint)}else{e.push(new Integer({value:this.pathLenConstraint}))}}return new Sequence({value:e})}toJSON(){const e={};if(this.cA!==BasicConstraints$1.defaultValues(CA)){e.cA=this.cA}if(PATH_LENGTH_CONSTRAINT in this){if(this.pathLenConstraint instanceof Integer){e.pathLenConstraint=this.pathLenConstraint.toJSON()}else{e.pathLenConstraint=this.pathLenConstraint}}return e}}BasicConstraints$1.CLASS_NAME="BasicConstraints";const CERTIFICATE_INDEX="certificateIndex";const KEY_INDEX="keyIndex";class CAVersion extends PkiObject{constructor(e={}){super();this.certificateIndex=getParametersValue(e,CERTIFICATE_INDEX,CAVersion.defaultValues(CERTIFICATE_INDEX));this.keyIndex=getParametersValue(e,KEY_INDEX,CAVersion.defaultValues(KEY_INDEX));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case CERTIFICATE_INDEX:case KEY_INDEX:return 0;default:return super.defaultValues(e)}}static schema(){return new Integer}fromSchema(e){if(e.constructor.blockName()!==Integer.blockName()){throw new Error("Object's schema was not verified against input data for CAVersion")}let t=e.valueBlock.valueHex.slice(0);const r=new Uint8Array(t);switch(true){case t.byteLength<4:{const e=new ArrayBuffer(4);const n=new Uint8Array(e);n.set(r,4-t.byteLength);t=e.slice(0)}break;case t.byteLength>4:{const e=new ArrayBuffer(4);const n=new Uint8Array(e);n.set(r.slice(0,4));t=e.slice(0)}break}const n=t.slice(0,2);const i=new Uint8Array(n);let s=i[0];i[0]=i[1];i[1]=s;const a=new Uint16Array(n);this.keyIndex=a[0];const o=t.slice(2);const f=new Uint8Array(o);s=f[0];f[0]=f[1];f[1]=s;const c=new Uint16Array(o);this.certificateIndex=c[0]}toSchema(){const e=new ArrayBuffer(2);const t=new Uint16Array(e);t[0]=this.certificateIndex;const r=new Uint8Array(e);let n=r[0];r[0]=r[1];r[1]=n;const i=new ArrayBuffer(2);const s=new Uint16Array(i);s[0]=this.keyIndex;const a=new Uint8Array(i);n=a[0];a[0]=a[1];a[1]=n;return new Integer({valueHex:utilConcatBuf(i,e)})}toJSON(){return{certificateIndex:this.certificateIndex,keyIndex:this.keyIndex}}}CAVersion.CLASS_NAME="CAVersion";const POLICY_QUALIFIER_ID="policyQualifierId";const QUALIFIER="qualifier";const CLEAR_PROPS$1p=[POLICY_QUALIFIER_ID,QUALIFIER];class PolicyQualifierInfo$1 extends PkiObject{constructor(e={}){super();this.policyQualifierId=getParametersValue(e,POLICY_QUALIFIER_ID,PolicyQualifierInfo$1.defaultValues(POLICY_QUALIFIER_ID));this.qualifier=getParametersValue(e,QUALIFIER,PolicyQualifierInfo$1.defaultValues(QUALIFIER));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case POLICY_QUALIFIER_ID:return EMPTY_STRING;case QUALIFIER:return new Any;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new ObjectIdentifier$1({name:t.policyQualifierId||EMPTY_STRING}),new Any({name:t.qualifier||EMPTY_STRING})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$1p);const t=compareSchema(e,e,PolicyQualifierInfo$1.schema({names:{policyQualifierId:POLICY_QUALIFIER_ID,qualifier:QUALIFIER}}));AsnError.assertSchema(t,this.className);this.policyQualifierId=t.result.policyQualifierId.valueBlock.toString();this.qualifier=t.result.qualifier}toSchema(){return new Sequence({value:[new ObjectIdentifier$1({value:this.policyQualifierId}),this.qualifier]})}toJSON(){return{policyQualifierId:this.policyQualifierId,qualifier:this.qualifier.toJSON()}}}PolicyQualifierInfo$1.CLASS_NAME="PolicyQualifierInfo";const POLICY_IDENTIFIER="policyIdentifier";const POLICY_QUALIFIERS="policyQualifiers";const CLEAR_PROPS$1o=[POLICY_IDENTIFIER,POLICY_QUALIFIERS];class PolicyInformation$1 extends PkiObject{constructor(e={}){super();this.policyIdentifier=getParametersValue(e,POLICY_IDENTIFIER,PolicyInformation$1.defaultValues(POLICY_IDENTIFIER));if(POLICY_QUALIFIERS in e){this.policyQualifiers=getParametersValue(e,POLICY_QUALIFIERS,PolicyInformation$1.defaultValues(POLICY_QUALIFIERS))}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case POLICY_IDENTIFIER:return EMPTY_STRING;case POLICY_QUALIFIERS:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new ObjectIdentifier$1({name:t.policyIdentifier||EMPTY_STRING}),new Sequence({optional:true,value:[new Repeated({name:t.policyQualifiers||EMPTY_STRING,value:PolicyQualifierInfo$1.schema()})]})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$1o);const t=compareSchema(e,e,PolicyInformation$1.schema({names:{policyIdentifier:POLICY_IDENTIFIER,policyQualifiers:POLICY_QUALIFIERS}}));AsnError.assertSchema(t,this.className);this.policyIdentifier=t.result.policyIdentifier.valueBlock.toString();if(POLICY_QUALIFIERS in t.result){this.policyQualifiers=Array.from(t.result.policyQualifiers,(e=>new PolicyQualifierInfo$1({schema:e})))}}toSchema(){const e=[];e.push(new ObjectIdentifier$1({value:this.policyIdentifier}));if(this.policyQualifiers){e.push(new Sequence({value:Array.from(this.policyQualifiers,(e=>e.toSchema()))}))}return new Sequence({value:e})}toJSON(){const e={policyIdentifier:this.policyIdentifier};if(this.policyQualifiers)e.policyQualifiers=Array.from(this.policyQualifiers,(e=>e.toJSON()));return e}}PolicyInformation$1.CLASS_NAME="PolicyInformation";const CERTIFICATE_POLICIES="certificatePolicies";const CLEAR_PROPS$1n=[CERTIFICATE_POLICIES];class CertificatePolicies$1 extends PkiObject{constructor(e={}){super();this.certificatePolicies=getParametersValue(e,CERTIFICATE_POLICIES,CertificatePolicies$1.defaultValues(CERTIFICATE_POLICIES));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case CERTIFICATE_POLICIES:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Repeated({name:t.certificatePolicies||EMPTY_STRING,value:PolicyInformation$1.schema()})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$1n);const t=compareSchema(e,e,CertificatePolicies$1.schema({names:{certificatePolicies:CERTIFICATE_POLICIES}}));AsnError.assertSchema(t,this.className);this.certificatePolicies=Array.from(t.result.certificatePolicies,(e=>new PolicyInformation$1({schema:e})))}toSchema(){return new Sequence({value:Array.from(this.certificatePolicies,(e=>e.toSchema()))})}toJSON(){return{certificatePolicies:Array.from(this.certificatePolicies,(e=>e.toJSON()))}}}CertificatePolicies$1.CLASS_NAME="CertificatePolicies";const TEMPLATE_ID="templateID";const TEMPLATE_MAJOR_VERSION="templateMajorVersion";const TEMPLATE_MINOR_VERSION="templateMinorVersion";const CLEAR_PROPS$1m=[TEMPLATE_ID,TEMPLATE_MAJOR_VERSION,TEMPLATE_MINOR_VERSION];class CertificateTemplate extends PkiObject{constructor(e={}){super();this.templateID=getParametersValue(e,TEMPLATE_ID,CertificateTemplate.defaultValues(TEMPLATE_ID));if(TEMPLATE_MAJOR_VERSION in e){this.templateMajorVersion=getParametersValue(e,TEMPLATE_MAJOR_VERSION,CertificateTemplate.defaultValues(TEMPLATE_MAJOR_VERSION))}if(TEMPLATE_MINOR_VERSION in e){this.templateMinorVersion=getParametersValue(e,TEMPLATE_MINOR_VERSION,CertificateTemplate.defaultValues(TEMPLATE_MINOR_VERSION))}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case TEMPLATE_ID:return EMPTY_STRING;case TEMPLATE_MAJOR_VERSION:case TEMPLATE_MINOR_VERSION:return 0;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new ObjectIdentifier$1({name:t.templateID||EMPTY_STRING}),new Integer({name:t.templateMajorVersion||EMPTY_STRING,optional:true}),new Integer({name:t.templateMinorVersion||EMPTY_STRING,optional:true})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$1m);const t=compareSchema(e,e,CertificateTemplate.schema({names:{templateID:TEMPLATE_ID,templateMajorVersion:TEMPLATE_MAJOR_VERSION,templateMinorVersion:TEMPLATE_MINOR_VERSION}}));AsnError.assertSchema(t,this.className);this.templateID=t.result.templateID.valueBlock.toString();if(TEMPLATE_MAJOR_VERSION in t.result){this.templateMajorVersion=t.result.templateMajorVersion.valueBlock.valueDec}if(TEMPLATE_MINOR_VERSION in t.result){this.templateMinorVersion=t.result.templateMinorVersion.valueBlock.valueDec}}toSchema(){const e=[];e.push(new ObjectIdentifier$1({value:this.templateID}));if(TEMPLATE_MAJOR_VERSION in this){e.push(new Integer({value:this.templateMajorVersion}))}if(TEMPLATE_MINOR_VERSION in this){e.push(new Integer({value:this.templateMinorVersion}))}return new Sequence({value:e})}toJSON(){const e={templateID:this.templateID};if(TEMPLATE_MAJOR_VERSION in this)e.templateMajorVersion=this.templateMajorVersion;if(TEMPLATE_MINOR_VERSION in this)e.templateMinorVersion=this.templateMinorVersion;return e}}const DISTRIBUTION_POINT$1="distributionPoint";const DISTRIBUTION_POINT_NAMES$1="distributionPointNames";const REASONS="reasons";const CRL_ISSUER="cRLIssuer";const CRL_ISSUER_NAMES="cRLIssuerNames";const CLEAR_PROPS$1l=[DISTRIBUTION_POINT$1,DISTRIBUTION_POINT_NAMES$1,REASONS,CRL_ISSUER,CRL_ISSUER_NAMES];class DistributionPoint$1 extends PkiObject{constructor(e={}){super();if(DISTRIBUTION_POINT$1 in e){this.distributionPoint=getParametersValue(e,DISTRIBUTION_POINT$1,DistributionPoint$1.defaultValues(DISTRIBUTION_POINT$1))}if(REASONS in e){this.reasons=getParametersValue(e,REASONS,DistributionPoint$1.defaultValues(REASONS))}if(CRL_ISSUER in e){this.cRLIssuer=getParametersValue(e,CRL_ISSUER,DistributionPoint$1.defaultValues(CRL_ISSUER))}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case DISTRIBUTION_POINT$1:return[];case REASONS:return new BitString$1;case CRL_ISSUER:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:0},value:[new Choice({value:[new Constructed({name:t.distributionPoint||EMPTY_STRING,optional:true,idBlock:{tagClass:3,tagNumber:0},value:[new Repeated({name:t.distributionPointNames||EMPTY_STRING,value:GeneralName$2.schema()})]}),new Constructed({name:t.distributionPoint||EMPTY_STRING,optional:true,idBlock:{tagClass:3,tagNumber:1},value:RelativeDistinguishedNames.schema().valueBlock.value})]})]}),new Primitive({name:t.reasons||EMPTY_STRING,optional:true,idBlock:{tagClass:3,tagNumber:1}}),new Constructed({name:t.cRLIssuer||EMPTY_STRING,optional:true,idBlock:{tagClass:3,tagNumber:2},value:[new Repeated({name:t.cRLIssuerNames||EMPTY_STRING,value:GeneralName$2.schema()})]})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$1l);const t=compareSchema(e,e,DistributionPoint$1.schema({names:{distributionPoint:DISTRIBUTION_POINT$1,distributionPointNames:DISTRIBUTION_POINT_NAMES$1,reasons:REASONS,cRLIssuer:CRL_ISSUER,cRLIssuerNames:CRL_ISSUER_NAMES}}));AsnError.assertSchema(t,this.className);if(DISTRIBUTION_POINT$1 in t.result){if(t.result.distributionPoint.idBlock.tagNumber===0){this.distributionPoint=Array.from(t.result.distributionPointNames,(e=>new GeneralName$2({schema:e})))}if(t.result.distributionPoint.idBlock.tagNumber===1){this.distributionPoint=new RelativeDistinguishedNames({schema:new Sequence({value:t.result.distributionPoint.valueBlock.value})})}}if(REASONS in t.result){this.reasons=new BitString$1({valueHex:t.result.reasons.valueBlock.valueHex})}if(CRL_ISSUER in t.result){this.cRLIssuer=Array.from(t.result.cRLIssuerNames,(e=>new GeneralName$2({schema:e})))}}toSchema(){const e=[];if(this.distributionPoint){let t;if(this.distributionPoint instanceof Array){t=new Constructed({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.distributionPoint,(e=>e.toSchema()))})}else{t=new Constructed({idBlock:{tagClass:3,tagNumber:1},value:[this.distributionPoint.toSchema()]})}e.push(new Constructed({idBlock:{tagClass:3,tagNumber:0},value:[t]}))}if(this.reasons){e.push(new Primitive({idBlock:{tagClass:3,tagNumber:1},valueHex:this.reasons.valueBlock.valueHexView}))}if(this.cRLIssuer){e.push(new Constructed({idBlock:{tagClass:3,tagNumber:2},value:Array.from(this.cRLIssuer,(e=>e.toSchema()))}))}return new Sequence({value:e})}toJSON(){const e={};if(this.distributionPoint){if(this.distributionPoint instanceof Array){e.distributionPoint=Array.from(this.distributionPoint,(e=>e.toJSON()))}else{e.distributionPoint=this.distributionPoint.toJSON()}}if(this.reasons){e.reasons=this.reasons.toJSON()}if(this.cRLIssuer){e.cRLIssuer=Array.from(this.cRLIssuer,(e=>e.toJSON()))}return e}}DistributionPoint$1.CLASS_NAME="DistributionPoint";const DISTRIBUTION_POINTS="distributionPoints";const CLEAR_PROPS$1k=[DISTRIBUTION_POINTS];class CRLDistributionPoints$1 extends PkiObject{constructor(e={}){super();this.distributionPoints=getParametersValue(e,DISTRIBUTION_POINTS,CRLDistributionPoints$1.defaultValues(DISTRIBUTION_POINTS));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case DISTRIBUTION_POINTS:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Repeated({name:t.distributionPoints||EMPTY_STRING,value:DistributionPoint$1.schema()})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$1k);const t=compareSchema(e,e,CRLDistributionPoints$1.schema({names:{distributionPoints:DISTRIBUTION_POINTS}}));AsnError.assertSchema(t,this.className);this.distributionPoints=Array.from(t.result.distributionPoints,(e=>new DistributionPoint$1({schema:e})))}toSchema(){return new Sequence({value:Array.from(this.distributionPoints,(e=>e.toSchema()))})}toJSON(){return{distributionPoints:Array.from(this.distributionPoints,(e=>e.toJSON()))}}}CRLDistributionPoints$1.CLASS_NAME="CRLDistributionPoints";const KEY_PURPOSES="keyPurposes";const CLEAR_PROPS$1j=[KEY_PURPOSES];class ExtKeyUsage extends PkiObject{constructor(e={}){super();this.keyPurposes=getParametersValue(e,KEY_PURPOSES,ExtKeyUsage.defaultValues(KEY_PURPOSES));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case KEY_PURPOSES:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Repeated({name:t.keyPurposes||EMPTY_STRING,value:new ObjectIdentifier$1})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$1j);const t=compareSchema(e,e,ExtKeyUsage.schema({names:{keyPurposes:KEY_PURPOSES}}));AsnError.assertSchema(t,this.className);this.keyPurposes=Array.from(t.result.keyPurposes,(e=>e.valueBlock.toString()))}toSchema(){return new Sequence({value:Array.from(this.keyPurposes,(e=>new ObjectIdentifier$1({value:e})))})}toJSON(){return{keyPurposes:Array.from(this.keyPurposes)}}}ExtKeyUsage.CLASS_NAME="ExtKeyUsage";const ACCESS_DESCRIPTIONS="accessDescriptions";class InfoAccess extends PkiObject{constructor(e={}){super();this.accessDescriptions=getParametersValue(e,ACCESS_DESCRIPTIONS,InfoAccess.defaultValues(ACCESS_DESCRIPTIONS));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case ACCESS_DESCRIPTIONS:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Repeated({name:t.accessDescriptions||EMPTY_STRING,value:AccessDescription$1.schema()})]})}fromSchema(e){clearProps(e,[ACCESS_DESCRIPTIONS]);const t=compareSchema(e,e,InfoAccess.schema({names:{accessDescriptions:ACCESS_DESCRIPTIONS}}));AsnError.assertSchema(t,this.className);this.accessDescriptions=Array.from(t.result.accessDescriptions,(e=>new AccessDescription$1({schema:e})))}toSchema(){return new Sequence({value:Array.from(this.accessDescriptions,(e=>e.toSchema()))})}toJSON(){return{accessDescriptions:Array.from(this.accessDescriptions,(e=>e.toJSON()))}}}InfoAccess.CLASS_NAME="InfoAccess";const DISTRIBUTION_POINT="distributionPoint";const DISTRIBUTION_POINT_NAMES="distributionPointNames";const ONLY_CONTAINS_USER_CERTS="onlyContainsUserCerts";const ONLY_CONTAINS_CA_CERTS="onlyContainsCACerts";const ONLY_SOME_REASON="onlySomeReasons";const INDIRECT_CRL="indirectCRL";const ONLY_CONTAINS_ATTRIBUTE_CERTS="onlyContainsAttributeCerts";const CLEAR_PROPS$1i=[DISTRIBUTION_POINT,DISTRIBUTION_POINT_NAMES,ONLY_CONTAINS_USER_CERTS,ONLY_CONTAINS_CA_CERTS,ONLY_SOME_REASON,INDIRECT_CRL,ONLY_CONTAINS_ATTRIBUTE_CERTS];class IssuingDistributionPoint$1 extends PkiObject{constructor(e={}){super();if(DISTRIBUTION_POINT in e){this.distributionPoint=getParametersValue(e,DISTRIBUTION_POINT,IssuingDistributionPoint$1.defaultValues(DISTRIBUTION_POINT))}this.onlyContainsUserCerts=getParametersValue(e,ONLY_CONTAINS_USER_CERTS,IssuingDistributionPoint$1.defaultValues(ONLY_CONTAINS_USER_CERTS));this.onlyContainsCACerts=getParametersValue(e,ONLY_CONTAINS_CA_CERTS,IssuingDistributionPoint$1.defaultValues(ONLY_CONTAINS_CA_CERTS));if(ONLY_SOME_REASON in e){this.onlySomeReasons=getParametersValue(e,ONLY_SOME_REASON,IssuingDistributionPoint$1.defaultValues(ONLY_SOME_REASON))}this.indirectCRL=getParametersValue(e,INDIRECT_CRL,IssuingDistributionPoint$1.defaultValues(INDIRECT_CRL));this.onlyContainsAttributeCerts=getParametersValue(e,ONLY_CONTAINS_ATTRIBUTE_CERTS,IssuingDistributionPoint$1.defaultValues(ONLY_CONTAINS_ATTRIBUTE_CERTS));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case DISTRIBUTION_POINT:return[];case ONLY_CONTAINS_USER_CERTS:return false;case ONLY_CONTAINS_CA_CERTS:return false;case ONLY_SOME_REASON:return 0;case INDIRECT_CRL:return false;case ONLY_CONTAINS_ATTRIBUTE_CERTS:return false;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:0},value:[new Choice({value:[new Constructed({name:t.distributionPoint||EMPTY_STRING,idBlock:{tagClass:3,tagNumber:0},value:[new Repeated({name:t.distributionPointNames||EMPTY_STRING,value:GeneralName$2.schema()})]}),new Constructed({name:t.distributionPoint||EMPTY_STRING,idBlock:{tagClass:3,tagNumber:1},value:RelativeDistinguishedNames.schema().valueBlock.value})]})]}),new Primitive({name:t.onlyContainsUserCerts||EMPTY_STRING,optional:true,idBlock:{tagClass:3,tagNumber:1}}),new Primitive({name:t.onlyContainsCACerts||EMPTY_STRING,optional:true,idBlock:{tagClass:3,tagNumber:2}}),new Primitive({name:t.onlySomeReasons||EMPTY_STRING,optional:true,idBlock:{tagClass:3,tagNumber:3}}),new Primitive({name:t.indirectCRL||EMPTY_STRING,optional:true,idBlock:{tagClass:3,tagNumber:4}}),new Primitive({name:t.onlyContainsAttributeCerts||EMPTY_STRING,optional:true,idBlock:{tagClass:3,tagNumber:5}})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$1i);const t=compareSchema(e,e,IssuingDistributionPoint$1.schema({names:{distributionPoint:DISTRIBUTION_POINT,distributionPointNames:DISTRIBUTION_POINT_NAMES,onlyContainsUserCerts:ONLY_CONTAINS_USER_CERTS,onlyContainsCACerts:ONLY_CONTAINS_CA_CERTS,onlySomeReasons:ONLY_SOME_REASON,indirectCRL:INDIRECT_CRL,onlyContainsAttributeCerts:ONLY_CONTAINS_ATTRIBUTE_CERTS}}));AsnError.assertSchema(t,this.className);if(DISTRIBUTION_POINT in t.result){switch(true){case t.result.distributionPoint.idBlock.tagNumber===0:this.distributionPoint=Array.from(t.result.distributionPointNames,(e=>new GeneralName$2({schema:e})));break;case t.result.distributionPoint.idBlock.tagNumber===1:{this.distributionPoint=new RelativeDistinguishedNames({schema:new Sequence({value:t.result.distributionPoint.valueBlock.value})})}break;default:throw new Error("Unknown tagNumber for distributionPoint: {$asn1.result.distributionPoint.idBlock.tagNumber}")}}if(ONLY_CONTAINS_USER_CERTS in t.result){const e=new Uint8Array(t.result.onlyContainsUserCerts.valueBlock.valueHex);this.onlyContainsUserCerts=e[0]!==0}if(ONLY_CONTAINS_CA_CERTS in t.result){const e=new Uint8Array(t.result.onlyContainsCACerts.valueBlock.valueHex);this.onlyContainsCACerts=e[0]!==0}if(ONLY_SOME_REASON in t.result){const e=new Uint8Array(t.result.onlySomeReasons.valueBlock.valueHex);this.onlySomeReasons=e[0]}if(INDIRECT_CRL in t.result){const e=new Uint8Array(t.result.indirectCRL.valueBlock.valueHex);this.indirectCRL=e[0]!==0}if(ONLY_CONTAINS_ATTRIBUTE_CERTS in t.result){const e=new Uint8Array(t.result.onlyContainsAttributeCerts.valueBlock.valueHex);this.onlyContainsAttributeCerts=e[0]!==0}}toSchema(){const e=[];if(this.distributionPoint){let t;if(this.distributionPoint instanceof Array){t=new Constructed({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.distributionPoint,(e=>e.toSchema()))})}else{t=this.distributionPoint.toSchema();t.idBlock.tagClass=3;t.idBlock.tagNumber=1}e.push(new Constructed({idBlock:{tagClass:3,tagNumber:0},value:[t]}))}if(this.onlyContainsUserCerts!==IssuingDistributionPoint$1.defaultValues(ONLY_CONTAINS_USER_CERTS)){e.push(new Primitive({idBlock:{tagClass:3,tagNumber:1},valueHex:new Uint8Array([255]).buffer}))}if(this.onlyContainsCACerts!==IssuingDistributionPoint$1.defaultValues(ONLY_CONTAINS_CA_CERTS)){e.push(new Primitive({idBlock:{tagClass:3,tagNumber:2},valueHex:new Uint8Array([255]).buffer}))}if(this.onlySomeReasons!==undefined){const t=new ArrayBuffer(1);const r=new Uint8Array(t);r[0]=this.onlySomeReasons;e.push(new Primitive({idBlock:{tagClass:3,tagNumber:3},valueHex:t}))}if(this.indirectCRL!==IssuingDistributionPoint$1.defaultValues(INDIRECT_CRL)){e.push(new Primitive({idBlock:{tagClass:3,tagNumber:4},valueHex:new Uint8Array([255]).buffer}))}if(this.onlyContainsAttributeCerts!==IssuingDistributionPoint$1.defaultValues(ONLY_CONTAINS_ATTRIBUTE_CERTS)){e.push(new Primitive({idBlock:{tagClass:3,tagNumber:5},valueHex:new Uint8Array([255]).buffer}))}return new Sequence({value:e})}toJSON(){const e={};if(this.distributionPoint){if(this.distributionPoint instanceof Array){e.distributionPoint=Array.from(this.distributionPoint,(e=>e.toJSON()))}else{e.distributionPoint=this.distributionPoint.toJSON()}}if(this.onlyContainsUserCerts!==IssuingDistributionPoint$1.defaultValues(ONLY_CONTAINS_USER_CERTS)){e.onlyContainsUserCerts=this.onlyContainsUserCerts}if(this.onlyContainsCACerts!==IssuingDistributionPoint$1.defaultValues(ONLY_CONTAINS_CA_CERTS)){e.onlyContainsCACerts=this.onlyContainsCACerts}if(ONLY_SOME_REASON in this){e.onlySomeReasons=this.onlySomeReasons}if(this.indirectCRL!==IssuingDistributionPoint$1.defaultValues(INDIRECT_CRL)){e.indirectCRL=this.indirectCRL}if(this.onlyContainsAttributeCerts!==IssuingDistributionPoint$1.defaultValues(ONLY_CONTAINS_ATTRIBUTE_CERTS)){e.onlyContainsAttributeCerts=this.onlyContainsAttributeCerts}return e}}IssuingDistributionPoint$1.CLASS_NAME="IssuingDistributionPoint";const BASE="base";const MINIMUM="minimum";const MAXIMUM="maximum";const CLEAR_PROPS$1h=[BASE,MINIMUM,MAXIMUM];class GeneralSubtree$1 extends PkiObject{constructor(e={}){super();this.base=getParametersValue(e,BASE,GeneralSubtree$1.defaultValues(BASE));this.minimum=getParametersValue(e,MINIMUM,GeneralSubtree$1.defaultValues(MINIMUM));if(MAXIMUM in e){this.maximum=getParametersValue(e,MAXIMUM,GeneralSubtree$1.defaultValues(MAXIMUM))}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case BASE:return new GeneralName$2;case MINIMUM:return 0;case MAXIMUM:return 0;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[GeneralName$2.schema(t.base||{}),new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:0},value:[new Integer({name:t.minimum||EMPTY_STRING})]}),new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:1},value:[new Integer({name:t.maximum||EMPTY_STRING})]})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$1h);const t=compareSchema(e,e,GeneralSubtree$1.schema({names:{base:{names:{blockName:BASE}},minimum:MINIMUM,maximum:MAXIMUM}}));AsnError.assertSchema(t,this.className);this.base=new GeneralName$2({schema:t.result.base});if(MINIMUM in t.result){if(t.result.minimum.valueBlock.isHexOnly)this.minimum=t.result.minimum;else this.minimum=t.result.minimum.valueBlock.valueDec}if(MAXIMUM in t.result){if(t.result.maximum.valueBlock.isHexOnly)this.maximum=t.result.maximum;else this.maximum=t.result.maximum.valueBlock.valueDec}}toSchema(){const e=[];e.push(this.base.toSchema());if(this.minimum!==0){let t=0;if(this.minimum instanceof Integer){t=this.minimum}else{t=new Integer({value:this.minimum})}e.push(new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:0},value:[t]}))}if(MAXIMUM in this){let t=0;if(this.maximum instanceof Integer){t=this.maximum}else{t=new Integer({value:this.maximum})}e.push(new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:1},value:[t]}))}return new Sequence({value:e})}toJSON(){const e={base:this.base.toJSON()};if(this.minimum!==0){if(typeof this.minimum==="number"){e.minimum=this.minimum}else{e.minimum=this.minimum.toJSON()}}if(this.maximum!==undefined){if(typeof this.maximum==="number"){e.maximum=this.maximum}else{e.maximum=this.maximum.toJSON()}}return e}}GeneralSubtree$1.CLASS_NAME="GeneralSubtree";const PERMITTED_SUBTREES="permittedSubtrees";const EXCLUDED_SUBTREES="excludedSubtrees";const CLEAR_PROPS$1g=[PERMITTED_SUBTREES,EXCLUDED_SUBTREES];class NameConstraints$1 extends PkiObject{constructor(e={}){super();if(PERMITTED_SUBTREES in e){this.permittedSubtrees=getParametersValue(e,PERMITTED_SUBTREES,NameConstraints$1.defaultValues(PERMITTED_SUBTREES))}if(EXCLUDED_SUBTREES in e){this.excludedSubtrees=getParametersValue(e,EXCLUDED_SUBTREES,NameConstraints$1.defaultValues(EXCLUDED_SUBTREES))}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case PERMITTED_SUBTREES:case EXCLUDED_SUBTREES:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:0},value:[new Repeated({name:t.permittedSubtrees||EMPTY_STRING,value:GeneralSubtree$1.schema()})]}),new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:1},value:[new Repeated({name:t.excludedSubtrees||EMPTY_STRING,value:GeneralSubtree$1.schema()})]})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$1g);const t=compareSchema(e,e,NameConstraints$1.schema({names:{permittedSubtrees:PERMITTED_SUBTREES,excludedSubtrees:EXCLUDED_SUBTREES}}));AsnError.assertSchema(t,this.className);if(PERMITTED_SUBTREES in t.result)this.permittedSubtrees=Array.from(t.result.permittedSubtrees,(e=>new GeneralSubtree$1({schema:e})));if(EXCLUDED_SUBTREES in t.result)this.excludedSubtrees=Array.from(t.result.excludedSubtrees,(e=>new GeneralSubtree$1({schema:e})))}toSchema(){const e=[];if(this.permittedSubtrees){e.push(new Constructed({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.permittedSubtrees,(e=>e.toSchema()))}))}if(this.excludedSubtrees){e.push(new Constructed({idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.excludedSubtrees,(e=>e.toSchema()))}))}return new Sequence({value:e})}toJSON(){const e={};if(this.permittedSubtrees){e.permittedSubtrees=Array.from(this.permittedSubtrees,(e=>e.toJSON()))}if(this.excludedSubtrees){e.excludedSubtrees=Array.from(this.excludedSubtrees,(e=>e.toJSON()))}return e}}NameConstraints$1.CLASS_NAME="NameConstraints";const REQUIRE_EXPLICIT_POLICY="requireExplicitPolicy";const INHIBIT_POLICY_MAPPING="inhibitPolicyMapping";const CLEAR_PROPS$1f=[REQUIRE_EXPLICIT_POLICY,INHIBIT_POLICY_MAPPING];class PolicyConstraints$1 extends PkiObject{constructor(e={}){super();if(REQUIRE_EXPLICIT_POLICY in e){this.requireExplicitPolicy=getParametersValue(e,REQUIRE_EXPLICIT_POLICY,PolicyConstraints$1.defaultValues(REQUIRE_EXPLICIT_POLICY))}if(INHIBIT_POLICY_MAPPING in e){this.inhibitPolicyMapping=getParametersValue(e,INHIBIT_POLICY_MAPPING,PolicyConstraints$1.defaultValues(INHIBIT_POLICY_MAPPING))}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case REQUIRE_EXPLICIT_POLICY:return 0;case INHIBIT_POLICY_MAPPING:return 0;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Primitive({name:t.requireExplicitPolicy||EMPTY_STRING,optional:true,idBlock:{tagClass:3,tagNumber:0}}),new Primitive({name:t.inhibitPolicyMapping||EMPTY_STRING,optional:true,idBlock:{tagClass:3,tagNumber:1}})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$1f);const t=compareSchema(e,e,PolicyConstraints$1.schema({names:{requireExplicitPolicy:REQUIRE_EXPLICIT_POLICY,inhibitPolicyMapping:INHIBIT_POLICY_MAPPING}}));AsnError.assertSchema(t,this.className);if(REQUIRE_EXPLICIT_POLICY in t.result){const e=t.result.requireExplicitPolicy;e.idBlock.tagClass=1;e.idBlock.tagNumber=2;const r=e.toBER(false);const n=fromBER(r);AsnError.assert(n,"Integer");this.requireExplicitPolicy=n.result.valueBlock.valueDec}if(INHIBIT_POLICY_MAPPING in t.result){const e=t.result.inhibitPolicyMapping;e.idBlock.tagClass=1;e.idBlock.tagNumber=2;const r=e.toBER(false);const n=fromBER(r);AsnError.assert(n,"Integer");this.inhibitPolicyMapping=n.result.valueBlock.valueDec}}toSchema(){const e=[];if(REQUIRE_EXPLICIT_POLICY in this){const t=new Integer({value:this.requireExplicitPolicy});t.idBlock.tagClass=3;t.idBlock.tagNumber=0;e.push(t)}if(INHIBIT_POLICY_MAPPING in this){const t=new Integer({value:this.inhibitPolicyMapping});t.idBlock.tagClass=3;t.idBlock.tagNumber=1;e.push(t)}return new Sequence({value:e})}toJSON(){const e={};if(REQUIRE_EXPLICIT_POLICY in this){e.requireExplicitPolicy=this.requireExplicitPolicy}if(INHIBIT_POLICY_MAPPING in this){e.inhibitPolicyMapping=this.inhibitPolicyMapping}return e}}PolicyConstraints$1.CLASS_NAME="PolicyConstraints";const ISSUER_DOMAIN_POLICY="issuerDomainPolicy";const SUBJECT_DOMAIN_POLICY="subjectDomainPolicy";const CLEAR_PROPS$1e=[ISSUER_DOMAIN_POLICY,SUBJECT_DOMAIN_POLICY];class PolicyMapping$1 extends PkiObject{constructor(e={}){super();this.issuerDomainPolicy=getParametersValue(e,ISSUER_DOMAIN_POLICY,PolicyMapping$1.defaultValues(ISSUER_DOMAIN_POLICY));this.subjectDomainPolicy=getParametersValue(e,SUBJECT_DOMAIN_POLICY,PolicyMapping$1.defaultValues(SUBJECT_DOMAIN_POLICY));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case ISSUER_DOMAIN_POLICY:return EMPTY_STRING;case SUBJECT_DOMAIN_POLICY:return EMPTY_STRING;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new ObjectIdentifier$1({name:t.issuerDomainPolicy||EMPTY_STRING}),new ObjectIdentifier$1({name:t.subjectDomainPolicy||EMPTY_STRING})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$1e);const t=compareSchema(e,e,PolicyMapping$1.schema({names:{issuerDomainPolicy:ISSUER_DOMAIN_POLICY,subjectDomainPolicy:SUBJECT_DOMAIN_POLICY}}));AsnError.assertSchema(t,this.className);this.issuerDomainPolicy=t.result.issuerDomainPolicy.valueBlock.toString();this.subjectDomainPolicy=t.result.subjectDomainPolicy.valueBlock.toString()}toSchema(){return new Sequence({value:[new ObjectIdentifier$1({value:this.issuerDomainPolicy}),new ObjectIdentifier$1({value:this.subjectDomainPolicy})]})}toJSON(){return{issuerDomainPolicy:this.issuerDomainPolicy,subjectDomainPolicy:this.subjectDomainPolicy}}}PolicyMapping$1.CLASS_NAME="PolicyMapping";const MAPPINGS="mappings";const CLEAR_PROPS$1d=[MAPPINGS];class PolicyMappings$1 extends PkiObject{constructor(e={}){super();this.mappings=getParametersValue(e,MAPPINGS,PolicyMappings$1.defaultValues(MAPPINGS));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case MAPPINGS:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Repeated({name:t.mappings||EMPTY_STRING,value:PolicyMapping$1.schema()})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$1d);const t=compareSchema(e,e,PolicyMappings$1.schema({names:{mappings:MAPPINGS}}));AsnError.assertSchema(t,this.className);this.mappings=Array.from(t.result.mappings,(e=>new PolicyMapping$1({schema:e})))}toSchema(){return new Sequence({value:Array.from(this.mappings,(e=>e.toSchema()))})}toJSON(){return{mappings:Array.from(this.mappings,(e=>e.toJSON()))}}}PolicyMappings$1.CLASS_NAME="PolicyMappings";const NOT_BEFORE$1="notBefore";const NOT_AFTER$1="notAfter";const CLEAR_PROPS$1c=[NOT_BEFORE$1,NOT_AFTER$1];class PrivateKeyUsagePeriod$1 extends PkiObject{constructor(e={}){super();if(NOT_BEFORE$1 in e){this.notBefore=getParametersValue(e,NOT_BEFORE$1,PrivateKeyUsagePeriod$1.defaultValues(NOT_BEFORE$1))}if(NOT_AFTER$1 in e){this.notAfter=getParametersValue(e,NOT_AFTER$1,PrivateKeyUsagePeriod$1.defaultValues(NOT_AFTER$1))}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case NOT_BEFORE$1:return new Date;case NOT_AFTER$1:return new Date;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Primitive({name:t.notBefore||EMPTY_STRING,optional:true,idBlock:{tagClass:3,tagNumber:0}}),new Primitive({name:t.notAfter||EMPTY_STRING,optional:true,idBlock:{tagClass:3,tagNumber:1}})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$1c);const t=compareSchema(e,e,PrivateKeyUsagePeriod$1.schema({names:{notBefore:NOT_BEFORE$1,notAfter:NOT_AFTER$1}}));AsnError.assertSchema(t,this.className);if(NOT_BEFORE$1 in t.result){const e=new GeneralizedTime;e.fromBuffer(t.result.notBefore.valueBlock.valueHex);this.notBefore=e.toDate()}if(NOT_AFTER$1 in t.result){const e=new GeneralizedTime({valueHex:t.result.notAfter.valueBlock.valueHex});e.fromBuffer(t.result.notAfter.valueBlock.valueHex);this.notAfter=e.toDate()}}toSchema(){const e=[];if(NOT_BEFORE$1 in this){e.push(new Primitive({idBlock:{tagClass:3,tagNumber:0},valueHex:new GeneralizedTime({valueDate:this.notBefore}).valueBlock.valueHexView}))}if(NOT_AFTER$1 in this){e.push(new Primitive({idBlock:{tagClass:3,tagNumber:1},valueHex:new GeneralizedTime({valueDate:this.notAfter}).valueBlock.valueHexView}))}return new Sequence({value:e})}toJSON(){const e={};if(this.notBefore){e.notBefore=this.notBefore}if(this.notAfter){e.notAfter=this.notAfter}return e}}PrivateKeyUsagePeriod$1.CLASS_NAME="PrivateKeyUsagePeriod";const ID="id";const TYPE$2="type";const VALUES="values";const QC_STATEMENT_CLEAR_PROPS=[ID,TYPE$2];const QC_STATEMENTS_CLEAR_PROPS=[VALUES];class QCStatement extends PkiObject{constructor(e={}){super();this.id=getParametersValue(e,ID,QCStatement.defaultValues(ID));if(TYPE$2 in e){this.type=getParametersValue(e,TYPE$2,QCStatement.defaultValues(TYPE$2))}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case ID:return EMPTY_STRING;case TYPE$2:return new Null;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case ID:return t===EMPTY_STRING;case TYPE$2:return t instanceof Null;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new ObjectIdentifier$1({name:t.id||EMPTY_STRING}),new Any({name:t.type||EMPTY_STRING,optional:true})]})}fromSchema(e){clearProps(e,QC_STATEMENT_CLEAR_PROPS);const t=compareSchema(e,e,QCStatement.schema({names:{id:ID,type:TYPE$2}}));AsnError.assertSchema(t,this.className);this.id=t.result.id.valueBlock.toString();if(TYPE$2 in t.result)this.type=t.result.type}toSchema(){const e=[new ObjectIdentifier$1({value:this.id})];if(TYPE$2 in this)e.push(this.type);return new Sequence({value:e})}toJSON(){const e={id:this.id};if(this.type){e.type=this.type.toJSON()}return e}}QCStatement.CLASS_NAME="QCStatement";class QCStatements extends PkiObject{constructor(e={}){super();this.values=getParametersValue(e,VALUES,QCStatements.defaultValues(VALUES));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case VALUES:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case VALUES:return t.length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Repeated({name:t.values||EMPTY_STRING,value:QCStatement.schema(t.value||{})})]})}fromSchema(e){clearProps(e,QC_STATEMENTS_CLEAR_PROPS);const t=compareSchema(e,e,QCStatements.schema({names:{values:VALUES}}));AsnError.assertSchema(t,this.className);this.values=Array.from(t.result.values,(e=>new QCStatement({schema:e})))}toSchema(){return new Sequence({value:Array.from(this.values,(e=>e.toSchema()))})}toJSON(){return{values:Array.from(this.values,(e=>e.toJSON()))}}}QCStatements.CLASS_NAME="QCStatements";var _a$1;class ECNamedCurves{static register(e,t,r){this.namedCurves[e.toLowerCase()]=this.namedCurves[t]={name:e,id:t,size:r}}static find(e){return this.namedCurves[e.toLowerCase()]||null}}_a$1=ECNamedCurves;ECNamedCurves.namedCurves={};(()=>{_a$1.register("P-256","1.2.840.10045.3.1.7",32);_a$1.register("P-384","1.3.132.0.34",48);_a$1.register("P-521","1.3.132.0.35",66);_a$1.register("K-256","1.3.132.0.10",32);_a$1.register("brainpoolP256r1","1.3.36.3.3.2.8.1.1.7",32);_a$1.register("brainpoolP384r1","1.3.36.3.3.2.8.1.1.11",48);_a$1.register("brainpoolP512r1","1.3.36.3.3.2.8.1.1.13",64)})();const X="x";const Y="y";const NAMED_CURVE$1="namedCurve";class ECPublicKey extends PkiObject{constructor(e={}){super();this.x=getParametersValue(e,X,ECPublicKey.defaultValues(X));this.y=getParametersValue(e,Y,ECPublicKey.defaultValues(Y));this.namedCurve=getParametersValue(e,NAMED_CURVE$1,ECPublicKey.defaultValues(NAMED_CURVE$1));if(e.json){this.fromJSON(e.json)}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case X:case Y:return EMPTY_BUFFER;case NAMED_CURVE$1:return EMPTY_STRING;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case X:case Y:return t instanceof ArrayBuffer&&isEqualBuffer(t,ECPublicKey.defaultValues(e));case NAMED_CURVE$1:return typeof t==="string"&&t===ECPublicKey.defaultValues(e);default:return super.defaultValues(e)}}static schema(){return new RawData}fromSchema(e){const t=BufferSourceConverter_1.toUint8Array(e);if(t[0]!==4){throw new Error("Object's schema was not verified against input data for ECPublicKey")}const r=ECNamedCurves.find(this.namedCurve);if(!r){throw new Error(`Incorrect curve OID: ${this.namedCurve}`)}const n=r.size;if(t.byteLength!==n*2+1){throw new Error("Object's schema was not verified against input data for ECPublicKey")}this.namedCurve=r.name;this.x=t.slice(1,n+1).buffer;this.y=t.slice(1+n,n*2+1).buffer}toSchema(){return new RawData({data:utilConcatBuf(new Uint8Array([4]).buffer,this.x,this.y)})}toJSON(){const e=ECNamedCurves.find(this.namedCurve);return{crv:e?e.name:this.namedCurve,x:toBase64(arrayBufferToString(this.x),true,true,false),y:toBase64(arrayBufferToString(this.y),true,true,false)}}fromJSON(e){ParameterError.assert("json",e,"crv","x","y");let t=0;const r=ECNamedCurves.find(e.crv);if(r){this.namedCurve=r.id;t=r.size}const n=stringToArrayBuffer(fromBase64(e.x,true));if(n.byteLength<t){this.x=new ArrayBuffer(t);const e=new Uint8Array(this.x);const r=new Uint8Array(n);e.set(r,1)}else{this.x=n.slice(0,t)}const i=stringToArrayBuffer(fromBase64(e.y,true));if(i.byteLength<t){this.y=new ArrayBuffer(t);const e=new Uint8Array(this.y);const r=new Uint8Array(i);e.set(r,1)}else{this.y=i.slice(0,t)}}}ECPublicKey.CLASS_NAME="ECPublicKey";const MODULUS$1="modulus";const PUBLIC_EXPONENT$1="publicExponent";const CLEAR_PROPS$1b=[MODULUS$1,PUBLIC_EXPONENT$1];class RSAPublicKey$1 extends PkiObject{constructor(e={}){super();this.modulus=getParametersValue(e,MODULUS$1,RSAPublicKey$1.defaultValues(MODULUS$1));this.publicExponent=getParametersValue(e,PUBLIC_EXPONENT$1,RSAPublicKey$1.defaultValues(PUBLIC_EXPONENT$1));if(e.json){this.fromJSON(e.json)}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case MODULUS$1:return new Integer;case PUBLIC_EXPONENT$1:return new Integer;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Integer({name:t.modulus||EMPTY_STRING}),new Integer({name:t.publicExponent||EMPTY_STRING})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$1b);const t=compareSchema(e,e,RSAPublicKey$1.schema({names:{modulus:MODULUS$1,publicExponent:PUBLIC_EXPONENT$1}}));AsnError.assertSchema(t,this.className);this.modulus=t.result.modulus.convertFromDER(256);this.publicExponent=t.result.publicExponent}toSchema(){return new Sequence({value:[this.modulus.convertToDER(),this.publicExponent]})}toJSON(){return{n:Convert_1.ToBase64Url(this.modulus.valueBlock.valueHexView),e:Convert_1.ToBase64Url(this.publicExponent.valueBlock.valueHexView)}}fromJSON(e){ParameterError.assert("json",e,"n","e");const t=stringToArrayBuffer(fromBase64(e.n,true));this.modulus=new Integer({valueHex:t.slice(0,Math.pow(2,nearestPowerOf2(t.byteLength)))});this.publicExponent=new Integer({valueHex:stringToArrayBuffer(fromBase64(e.e,true)).slice(0,3)})}}RSAPublicKey$1.CLASS_NAME="RSAPublicKey";const ALGORITHM$1="algorithm";const SUBJECT_PUBLIC_KEY="subjectPublicKey";const CLEAR_PROPS$1a=[ALGORITHM$1,SUBJECT_PUBLIC_KEY];class PublicKeyInfo$1 extends PkiObject{constructor(e={}){super();this.algorithm=getParametersValue(e,ALGORITHM$1,PublicKeyInfo$1.defaultValues(ALGORITHM$1));this.subjectPublicKey=getParametersValue(e,SUBJECT_PUBLIC_KEY,PublicKeyInfo$1.defaultValues(SUBJECT_PUBLIC_KEY));const t=getParametersValue(e,"parsedKey",null);if(t){this.parsedKey=t}if(e.json){this.fromJSON(e.json)}if(e.schema){this.fromSchema(e.schema)}}get parsedKey(){if(this._parsedKey===undefined){switch(this.algorithm.algorithmId){case"1.2.840.10045.2.1":if("algorithmParams"in this.algorithm){if(this.algorithm.algorithmParams.constructor.blockName()===ObjectIdentifier$1.blockName()){try{this._parsedKey=new ECPublicKey({namedCurve:this.algorithm.algorithmParams.valueBlock.toString(),schema:this.subjectPublicKey.valueBlock.valueHexView})}catch(e){console.warn(e)}}}break;case"1.2.840.113549.1.1.1":{const e=fromBER(this.subjectPublicKey.valueBlock.valueHexView);if(e.offset!==-1){try{this._parsedKey=new RSAPublicKey$1({schema:e.result})}catch(e){}}}break}this._parsedKey||(this._parsedKey=null)}return this._parsedKey||undefined}set parsedKey(e){this._parsedKey=e}static defaultValues(e){switch(e){case ALGORITHM$1:return new AlgorithmIdentifier$2;case SUBJECT_PUBLIC_KEY:return new BitString$1;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[AlgorithmIdentifier$2.schema(t.algorithm||{}),new BitString$1({name:t.subjectPublicKey||EMPTY_STRING})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$1a);const t=compareSchema(e,e,PublicKeyInfo$1.schema({names:{algorithm:{names:{blockName:ALGORITHM$1}},subjectPublicKey:SUBJECT_PUBLIC_KEY}}));AsnError.assertSchema(t,this.className);this.algorithm=new AlgorithmIdentifier$2({schema:t.result.algorithm});this.subjectPublicKey=t.result.subjectPublicKey}toSchema(){return new Sequence({value:[this.algorithm.toSchema(),this.subjectPublicKey]})}toJSON(){if(!this.parsedKey){return{algorithm:this.algorithm.toJSON(),subjectPublicKey:this.subjectPublicKey.toJSON()}}const e={};switch(this.algorithm.algorithmId){case"1.2.840.10045.2.1":e.kty="EC";break;case"1.2.840.113549.1.1.1":e.kty="RSA";break}const t=this.parsedKey.toJSON();Object.assign(e,t);return e}fromJSON(e){if("kty"in e){switch(e.kty.toUpperCase()){case"EC":this.parsedKey=new ECPublicKey({json:e});this.algorithm=new AlgorithmIdentifier$2({algorithmId:"1.2.840.10045.2.1",algorithmParams:new ObjectIdentifier$1({value:this.parsedKey.namedCurve})});break;case"RSA":this.parsedKey=new RSAPublicKey$1({json:e});this.algorithm=new AlgorithmIdentifier$2({algorithmId:"1.2.840.113549.1.1.1",algorithmParams:new Null});break;default:throw new Error(`Invalid value for "kty" parameter: ${e.kty}`)}this.subjectPublicKey=new BitString$1({valueHex:this.parsedKey.toSchema().toBER(false)})}}async importKey(e,t=getCrypto(true)){try{if(!e){throw new Error("Need to provide publicKey input parameter")}const r=await t.exportKey("spki",e);const n=fromBER(r);try{this.fromSchema(n.result)}catch(e){throw new Error("Error during initializing object from schema")}}catch(e){const t=e instanceof Error?e.message:`${e}`;throw new Error(`Error during exporting public key: ${t}`)}}}PublicKeyInfo$1.CLASS_NAME="PublicKeyInfo";const VERSION$l="version";const PRIVATE_KEY$1="privateKey";const NAMED_CURVE="namedCurve";const PUBLIC_KEY$1="publicKey";const CLEAR_PROPS$19=[VERSION$l,PRIVATE_KEY$1,NAMED_CURVE,PUBLIC_KEY$1];class ECPrivateKey$1 extends PkiObject{constructor(e={}){super();this.version=getParametersValue(e,VERSION$l,ECPrivateKey$1.defaultValues(VERSION$l));this.privateKey=getParametersValue(e,PRIVATE_KEY$1,ECPrivateKey$1.defaultValues(PRIVATE_KEY$1));if(NAMED_CURVE in e){this.namedCurve=getParametersValue(e,NAMED_CURVE,ECPrivateKey$1.defaultValues(NAMED_CURVE))}if(PUBLIC_KEY$1 in e){this.publicKey=getParametersValue(e,PUBLIC_KEY$1,ECPrivateKey$1.defaultValues(PUBLIC_KEY$1))}if(e.json){this.fromJSON(e.json)}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case VERSION$l:return 1;case PRIVATE_KEY$1:return new OctetString$1;case NAMED_CURVE:return EMPTY_STRING;case PUBLIC_KEY$1:return new ECPublicKey;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case VERSION$l:return t===ECPrivateKey$1.defaultValues(e);case PRIVATE_KEY$1:return t.isEqual(ECPrivateKey$1.defaultValues(e));case NAMED_CURVE:return t===EMPTY_STRING;case PUBLIC_KEY$1:return ECPublicKey.compareWithDefault(NAMED_CURVE,t.namedCurve)&&ECPublicKey.compareWithDefault("x",t.x)&&ECPublicKey.compareWithDefault("y",t.y);default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Integer({name:t.version||EMPTY_STRING}),new OctetString$1({name:t.privateKey||EMPTY_STRING}),new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:0},value:[new ObjectIdentifier$1({name:t.namedCurve||EMPTY_STRING})]}),new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:1},value:[new BitString$1({name:t.publicKey||EMPTY_STRING})]})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$19);const t=compareSchema(e,e,ECPrivateKey$1.schema({names:{version:VERSION$l,privateKey:PRIVATE_KEY$1,namedCurve:NAMED_CURVE,publicKey:PUBLIC_KEY$1}}));AsnError.assertSchema(t,this.className);this.version=t.result.version.valueBlock.valueDec;this.privateKey=t.result.privateKey;if(NAMED_CURVE in t.result){this.namedCurve=t.result.namedCurve.valueBlock.toString()}if(PUBLIC_KEY$1 in t.result){const e={schema:t.result.publicKey.valueBlock.valueHex};if(NAMED_CURVE in this){e.namedCurve=this.namedCurve}this.publicKey=new ECPublicKey(e)}}toSchema(){const e=[new Integer({value:this.version}),this.privateKey];if(this.namedCurve){e.push(new Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new ObjectIdentifier$1({value:this.namedCurve})]}))}if(this.publicKey){e.push(new Constructed({idBlock:{tagClass:3,tagNumber:1},value:[new BitString$1({valueHex:this.publicKey.toSchema().toBER(false)})]}))}return new Sequence({value:e})}toJSON(){if(!this.namedCurve||ECPrivateKey$1.compareWithDefault(NAMED_CURVE,this.namedCurve)){throw new Error('Not enough information for making JSON: absent "namedCurve" value')}const e=ECNamedCurves.find(this.namedCurve);const t={crv:e?e.name:this.namedCurve,d:Convert_1.ToBase64Url(this.privateKey.valueBlock.valueHexView)};if(this.publicKey){const e=this.publicKey.toJSON();t.x=e.x;t.y=e.y}return t}fromJSON(e){ParameterError.assert("json",e,"crv","d");let t=0;const r=ECNamedCurves.find(e.crv);if(r){this.namedCurve=r.id;t=r.size}const n=Convert_1.FromBase64Url(e.d);if(n.byteLength<t){const e=new ArrayBuffer(t);const r=new Uint8Array(e);const i=new Uint8Array(n);r.set(i,1);this.privateKey=new OctetString$1({valueHex:e})}else{this.privateKey=new OctetString$1({valueHex:n.slice(0,t)})}if(e.x&&e.y){this.publicKey=new ECPublicKey({json:e})}}}ECPrivateKey$1.CLASS_NAME="ECPrivateKey";const PRIME="prime";const EXPONENT="exponent";const COEFFICIENT$1="coefficient";const CLEAR_PROPS$18=[PRIME,EXPONENT,COEFFICIENT$1];class OtherPrimeInfo$1 extends PkiObject{constructor(e={}){super();this.prime=getParametersValue(e,PRIME,OtherPrimeInfo$1.defaultValues(PRIME));this.exponent=getParametersValue(e,EXPONENT,OtherPrimeInfo$1.defaultValues(EXPONENT));this.coefficient=getParametersValue(e,COEFFICIENT$1,OtherPrimeInfo$1.defaultValues(COEFFICIENT$1));if(e.json){this.fromJSON(e.json)}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case PRIME:return new Integer;case EXPONENT:return new Integer;case COEFFICIENT$1:return new Integer;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Integer({name:t.prime||EMPTY_STRING}),new Integer({name:t.exponent||EMPTY_STRING}),new Integer({name:t.coefficient||EMPTY_STRING})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$18);const t=compareSchema(e,e,OtherPrimeInfo$1.schema({names:{prime:PRIME,exponent:EXPONENT,coefficient:COEFFICIENT$1}}));AsnError.assertSchema(t,this.className);this.prime=t.result.prime.convertFromDER();this.exponent=t.result.exponent.convertFromDER();this.coefficient=t.result.coefficient.convertFromDER()}toSchema(){return new Sequence({value:[this.prime.convertToDER(),this.exponent.convertToDER(),this.coefficient.convertToDER()]})}toJSON(){return{r:Convert_1.ToBase64Url(this.prime.valueBlock.valueHexView),d:Convert_1.ToBase64Url(this.exponent.valueBlock.valueHexView),t:Convert_1.ToBase64Url(this.coefficient.valueBlock.valueHexView)}}fromJSON(e){ParameterError.assert("json",e,"r","d","r");this.prime=new Integer({valueHex:Convert_1.FromBase64Url(e.r)});this.exponent=new Integer({valueHex:Convert_1.FromBase64Url(e.d)});this.coefficient=new Integer({valueHex:Convert_1.FromBase64Url(e.t)})}}OtherPrimeInfo$1.CLASS_NAME="OtherPrimeInfo";const VERSION$k="version";const MODULUS="modulus";const PUBLIC_EXPONENT="publicExponent";const PRIVATE_EXPONENT="privateExponent";const PRIME1="prime1";const PRIME2="prime2";const EXPONENT1="exponent1";const EXPONENT2="exponent2";const COEFFICIENT="coefficient";const OTHER_PRIME_INFOS="otherPrimeInfos";const CLEAR_PROPS$17=[VERSION$k,MODULUS,PUBLIC_EXPONENT,PRIVATE_EXPONENT,PRIME1,PRIME2,EXPONENT1,EXPONENT2,COEFFICIENT,OTHER_PRIME_INFOS];class RSAPrivateKey$1 extends PkiObject{constructor(e={}){super();this.version=getParametersValue(e,VERSION$k,RSAPrivateKey$1.defaultValues(VERSION$k));this.modulus=getParametersValue(e,MODULUS,RSAPrivateKey$1.defaultValues(MODULUS));this.publicExponent=getParametersValue(e,PUBLIC_EXPONENT,RSAPrivateKey$1.defaultValues(PUBLIC_EXPONENT));this.privateExponent=getParametersValue(e,PRIVATE_EXPONENT,RSAPrivateKey$1.defaultValues(PRIVATE_EXPONENT));this.prime1=getParametersValue(e,PRIME1,RSAPrivateKey$1.defaultValues(PRIME1));this.prime2=getParametersValue(e,PRIME2,RSAPrivateKey$1.defaultValues(PRIME2));this.exponent1=getParametersValue(e,EXPONENT1,RSAPrivateKey$1.defaultValues(EXPONENT1));this.exponent2=getParametersValue(e,EXPONENT2,RSAPrivateKey$1.defaultValues(EXPONENT2));this.coefficient=getParametersValue(e,COEFFICIENT,RSAPrivateKey$1.defaultValues(COEFFICIENT));if(OTHER_PRIME_INFOS in e){this.otherPrimeInfos=getParametersValue(e,OTHER_PRIME_INFOS,RSAPrivateKey$1.defaultValues(OTHER_PRIME_INFOS))}if(e.json){this.fromJSON(e.json)}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case VERSION$k:return 0;case MODULUS:return new Integer;case PUBLIC_EXPONENT:return new Integer;case PRIVATE_EXPONENT:return new Integer;case PRIME1:return new Integer;case PRIME2:return new Integer;case EXPONENT1:return new Integer;case EXPONENT2:return new Integer;case COEFFICIENT:return new Integer;case OTHER_PRIME_INFOS:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Integer({name:t.version||EMPTY_STRING}),new Integer({name:t.modulus||EMPTY_STRING}),new Integer({name:t.publicExponent||EMPTY_STRING}),new Integer({name:t.privateExponent||EMPTY_STRING}),new Integer({name:t.prime1||EMPTY_STRING}),new Integer({name:t.prime2||EMPTY_STRING}),new Integer({name:t.exponent1||EMPTY_STRING}),new Integer({name:t.exponent2||EMPTY_STRING}),new Integer({name:t.coefficient||EMPTY_STRING}),new Sequence({optional:true,value:[new Repeated({name:t.otherPrimeInfosName||EMPTY_STRING,value:OtherPrimeInfo$1.schema(t.otherPrimeInfo||{})})]})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$17);const t=compareSchema(e,e,RSAPrivateKey$1.schema({names:{version:VERSION$k,modulus:MODULUS,publicExponent:PUBLIC_EXPONENT,privateExponent:PRIVATE_EXPONENT,prime1:PRIME1,prime2:PRIME2,exponent1:EXPONENT1,exponent2:EXPONENT2,coefficient:COEFFICIENT,otherPrimeInfo:{names:{blockName:OTHER_PRIME_INFOS}}}}));AsnError.assertSchema(t,this.className);this.version=t.result.version.valueBlock.valueDec;this.modulus=t.result.modulus.convertFromDER(256);this.publicExponent=t.result.publicExponent;this.privateExponent=t.result.privateExponent.convertFromDER(256);this.prime1=t.result.prime1.convertFromDER(128);this.prime2=t.result.prime2.convertFromDER(128);this.exponent1=t.result.exponent1.convertFromDER(128);this.exponent2=t.result.exponent2.convertFromDER(128);this.coefficient=t.result.coefficient.convertFromDER(128);if(OTHER_PRIME_INFOS in t.result)this.otherPrimeInfos=Array.from(t.result.otherPrimeInfos,(e=>new OtherPrimeInfo$1({schema:e})))}toSchema(){const e=[];e.push(new Integer({value:this.version}));e.push(this.modulus.convertToDER());e.push(this.publicExponent);e.push(this.privateExponent.convertToDER());e.push(this.prime1.convertToDER());e.push(this.prime2.convertToDER());e.push(this.exponent1.convertToDER());e.push(this.exponent2.convertToDER());e.push(this.coefficient.convertToDER());if(this.otherPrimeInfos){e.push(new Sequence({value:Array.from(this.otherPrimeInfos,(e=>e.toSchema()))}))}return new Sequence({value:e})}toJSON(){const e={n:Convert_1.ToBase64Url(this.modulus.valueBlock.valueHexView),e:Convert_1.ToBase64Url(this.publicExponent.valueBlock.valueHexView),d:Convert_1.ToBase64Url(this.privateExponent.valueBlock.valueHexView),p:Convert_1.ToBase64Url(this.prime1.valueBlock.valueHexView),q:Convert_1.ToBase64Url(this.prime2.valueBlock.valueHexView),dp:Convert_1.ToBase64Url(this.exponent1.valueBlock.valueHexView),dq:Convert_1.ToBase64Url(this.exponent2.valueBlock.valueHexView),qi:Convert_1.ToBase64Url(this.coefficient.valueBlock.valueHexView)};if(this.otherPrimeInfos){e.oth=Array.from(this.otherPrimeInfos,(e=>e.toJSON()))}return e}fromJSON(e){ParameterError.assert("json",e,"n","e","d","p","q","dp","dq","qi");this.modulus=new Integer({valueHex:Convert_1.FromBase64Url(e.n)});this.publicExponent=new Integer({valueHex:Convert_1.FromBase64Url(e.e)});this.privateExponent=new Integer({valueHex:Convert_1.FromBase64Url(e.d)});this.prime1=new Integer({valueHex:Convert_1.FromBase64Url(e.p)});this.prime2=new Integer({valueHex:Convert_1.FromBase64Url(e.q)});this.exponent1=new Integer({valueHex:Convert_1.FromBase64Url(e.dp)});this.exponent2=new Integer({valueHex:Convert_1.FromBase64Url(e.dq)});this.coefficient=new Integer({valueHex:Convert_1.FromBase64Url(e.qi)});if(e.oth){this.otherPrimeInfos=Array.from(e.oth,(e=>new OtherPrimeInfo$1({json:e})))}}}RSAPrivateKey$1.CLASS_NAME="RSAPrivateKey";const VERSION$j="version";const PRIVATE_KEY_ALGORITHM="privateKeyAlgorithm";const PRIVATE_KEY="privateKey";const ATTRIBUTES$5="attributes";const PARSED_KEY="parsedKey";const CLEAR_PROPS$16=[VERSION$j,PRIVATE_KEY_ALGORITHM,PRIVATE_KEY,ATTRIBUTES$5];class PrivateKeyInfo$2 extends PkiObject{constructor(e={}){super();this.version=getParametersValue(e,VERSION$j,PrivateKeyInfo$2.defaultValues(VERSION$j));this.privateKeyAlgorithm=getParametersValue(e,PRIVATE_KEY_ALGORITHM,PrivateKeyInfo$2.defaultValues(PRIVATE_KEY_ALGORITHM));this.privateKey=getParametersValue(e,PRIVATE_KEY,PrivateKeyInfo$2.defaultValues(PRIVATE_KEY));if(ATTRIBUTES$5 in e){this.attributes=getParametersValue(e,ATTRIBUTES$5,PrivateKeyInfo$2.defaultValues(ATTRIBUTES$5))}if(PARSED_KEY in e){this.parsedKey=getParametersValue(e,PARSED_KEY,PrivateKeyInfo$2.defaultValues(PARSED_KEY))}if(e.json){this.fromJSON(e.json)}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case VERSION$j:return 0;case PRIVATE_KEY_ALGORITHM:return new AlgorithmIdentifier$2;case PRIVATE_KEY:return new OctetString$1;case ATTRIBUTES$5:return[];case PARSED_KEY:return{};default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Integer({name:t.version||EMPTY_STRING}),AlgorithmIdentifier$2.schema(t.privateKeyAlgorithm||{}),new OctetString$1({name:t.privateKey||EMPTY_STRING}),new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:0},value:[new Repeated({name:t.attributes||EMPTY_STRING,value:Attribute$3.schema()})]})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$16);const t=compareSchema(e,e,PrivateKeyInfo$2.schema({names:{version:VERSION$j,privateKeyAlgorithm:{names:{blockName:PRIVATE_KEY_ALGORITHM}},privateKey:PRIVATE_KEY,attributes:ATTRIBUTES$5}}));AsnError.assertSchema(t,this.className);this.version=t.result.version.valueBlock.valueDec;this.privateKeyAlgorithm=new AlgorithmIdentifier$2({schema:t.result.privateKeyAlgorithm});this.privateKey=t.result.privateKey;if(ATTRIBUTES$5 in t.result)this.attributes=Array.from(t.result.attributes,(e=>new Attribute$3({schema:e})));switch(this.privateKeyAlgorithm.algorithmId){case"1.2.840.113549.1.1.1":{const e=fromBER(this.privateKey.valueBlock.valueHexView);if(e.offset!==-1)this.parsedKey=new RSAPrivateKey$1({schema:e.result})}break;case"1.2.840.10045.2.1":if("algorithmParams"in this.privateKeyAlgorithm){if(this.privateKeyAlgorithm.algorithmParams instanceof ObjectIdentifier$1){const e=fromBER(this.privateKey.valueBlock.valueHexView);if(e.offset!==-1){this.parsedKey=new ECPrivateKey$1({namedCurve:this.privateKeyAlgorithm.algorithmParams.valueBlock.toString(),schema:e.result})}}}break}}toSchema(){const e=[new Integer({value:this.version}),this.privateKeyAlgorithm.toSchema(),this.privateKey];if(this.attributes){e.push(new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.attributes,(e=>e.toSchema()))}))}return new Sequence({value:e})}toJSON(){if(!this.parsedKey){const e={version:this.version,privateKeyAlgorithm:this.privateKeyAlgorithm.toJSON(),privateKey:this.privateKey.toJSON()};if(this.attributes){e.attributes=Array.from(this.attributes,(e=>e.toJSON()))}return e}const e={};switch(this.privateKeyAlgorithm.algorithmId){case"1.2.840.10045.2.1":e.kty="EC";break;case"1.2.840.113549.1.1.1":e.kty="RSA";break}const t=this.parsedKey.toJSON();Object.assign(e,t);return e}fromJSON(e){if("kty"in e){switch(e.kty.toUpperCase()){case"EC":this.parsedKey=new ECPrivateKey$1({json:e});this.privateKeyAlgorithm=new AlgorithmIdentifier$2({algorithmId:"1.2.840.10045.2.1",algorithmParams:new ObjectIdentifier$1({value:this.parsedKey.namedCurve})});break;case"RSA":this.parsedKey=new RSAPrivateKey$1({json:e});this.privateKeyAlgorithm=new AlgorithmIdentifier$2({algorithmId:"1.2.840.113549.1.1.1",algorithmParams:new Null});break;default:throw new Error(`Invalid value for "kty" parameter: ${e.kty}`)}this.privateKey=new OctetString$1({valueHex:this.parsedKey.toSchema().toBER(false)})}}}PrivateKeyInfo$2.CLASS_NAME="PrivateKeyInfo";const CONTENT_TYPE$1="contentType";const CONTENT_ENCRYPTION_ALGORITHM="contentEncryptionAlgorithm";const ENCRYPTED_CONTENT="encryptedContent";const CLEAR_PROPS$15=[CONTENT_TYPE$1,CONTENT_ENCRYPTION_ALGORITHM,ENCRYPTED_CONTENT];class EncryptedContentInfo$1 extends PkiObject{constructor(e={}){super();this.contentType=getParametersValue(e,CONTENT_TYPE$1,EncryptedContentInfo$1.defaultValues(CONTENT_TYPE$1));this.contentEncryptionAlgorithm=getParametersValue(e,CONTENT_ENCRYPTION_ALGORITHM,EncryptedContentInfo$1.defaultValues(CONTENT_ENCRYPTION_ALGORITHM));if(ENCRYPTED_CONTENT in e&&e.encryptedContent){this.encryptedContent=e.encryptedContent;if(this.encryptedContent.idBlock.tagClass===1&&this.encryptedContent.idBlock.tagNumber===4){if(this.encryptedContent.idBlock.isConstructed===false){const e=new OctetString$1({idBlock:{isConstructed:true},isConstructed:true});let t=0;const r=this.encryptedContent.valueBlock.valueHexView.slice().buffer;let n=r.byteLength;const i=1024;while(n>0){const s=new Uint8Array(r,t,t+i>r.byteLength?r.byteLength-t:i);const a=new ArrayBuffer(s.length);const o=new Uint8Array(a);for(let e=0;e<o.length;e++)o[e]=s[e];e.valueBlock.value.push(new OctetString$1({valueHex:a}));n-=s.length;t+=s.length}this.encryptedContent=e}}}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case CONTENT_TYPE$1:return EMPTY_STRING;case CONTENT_ENCRYPTION_ALGORITHM:return new AlgorithmIdentifier$2;case ENCRYPTED_CONTENT:return new OctetString$1;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case CONTENT_TYPE$1:return t===EMPTY_STRING;case CONTENT_ENCRYPTION_ALGORITHM:return t.algorithmId===EMPTY_STRING&&"algorithmParams"in t===false;case ENCRYPTED_CONTENT:return t.isEqual(EncryptedContentInfo$1.defaultValues(ENCRYPTED_CONTENT));default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new ObjectIdentifier$1({name:t.contentType||EMPTY_STRING}),AlgorithmIdentifier$2.schema(t.contentEncryptionAlgorithm||{}),new Choice({value:[new Constructed({name:t.encryptedContent||EMPTY_STRING,idBlock:{tagClass:3,tagNumber:0},value:[new Repeated({value:new OctetString$1})]}),new Primitive({name:t.encryptedContent||EMPTY_STRING,idBlock:{tagClass:3,tagNumber:0}})]})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$15);const t=compareSchema(e,e,EncryptedContentInfo$1.schema({names:{contentType:CONTENT_TYPE$1,contentEncryptionAlgorithm:{names:{blockName:CONTENT_ENCRYPTION_ALGORITHM}},encryptedContent:ENCRYPTED_CONTENT}}));AsnError.assertSchema(t,this.className);this.contentType=t.result.contentType.valueBlock.toString();this.contentEncryptionAlgorithm=new AlgorithmIdentifier$2({schema:t.result.contentEncryptionAlgorithm});if(ENCRYPTED_CONTENT in t.result){this.encryptedContent=t.result.encryptedContent;this.encryptedContent.idBlock.tagClass=1;this.encryptedContent.idBlock.tagNumber=4}}toSchema(){const e={isIndefiniteForm:false};const t=[];t.push(new ObjectIdentifier$1({value:this.contentType}));t.push(this.contentEncryptionAlgorithm.toSchema());if(this.encryptedContent){e.isIndefiniteForm=this.encryptedContent.idBlock.isConstructed;const r=this.encryptedContent;r.idBlock.tagClass=3;r.idBlock.tagNumber=0;r.lenBlock.isIndefiniteForm=this.encryptedContent.idBlock.isConstructed;t.push(r)}return new Sequence({lenBlock:e,value:t})}toJSON(){const e={contentType:this.contentType,contentEncryptionAlgorithm:this.contentEncryptionAlgorithm.toJSON()};if(this.encryptedContent){e.encryptedContent=this.encryptedContent.toJSON()}return e}getEncryptedContent(){if(!this.encryptedContent){throw new Error("Parameter 'encryptedContent' is undefined")}return OctetString$1.prototype.getValue.call(this.encryptedContent)}}EncryptedContentInfo$1.CLASS_NAME="EncryptedContentInfo";const HASH_ALGORITHM$4="hashAlgorithm";const MASK_GEN_ALGORITHM$1="maskGenAlgorithm";const SALT_LENGTH="saltLength";const TRAILER_FIELD="trailerField";const CLEAR_PROPS$14=[HASH_ALGORITHM$4,MASK_GEN_ALGORITHM$1,SALT_LENGTH,TRAILER_FIELD];class RSASSAPSSParams extends PkiObject{constructor(e={}){super();this.hashAlgorithm=getParametersValue(e,HASH_ALGORITHM$4,RSASSAPSSParams.defaultValues(HASH_ALGORITHM$4));this.maskGenAlgorithm=getParametersValue(e,MASK_GEN_ALGORITHM$1,RSASSAPSSParams.defaultValues(MASK_GEN_ALGORITHM$1));this.saltLength=getParametersValue(e,SALT_LENGTH,RSASSAPSSParams.defaultValues(SALT_LENGTH));this.trailerField=getParametersValue(e,TRAILER_FIELD,RSASSAPSSParams.defaultValues(TRAILER_FIELD));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case HASH_ALGORITHM$4:return new AlgorithmIdentifier$2({algorithmId:"1.3.14.3.2.26",algorithmParams:new Null});case MASK_GEN_ALGORITHM$1:return new AlgorithmIdentifier$2({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:new AlgorithmIdentifier$2({algorithmId:"1.3.14.3.2.26",algorithmParams:new Null}).toSchema()});case SALT_LENGTH:return 20;case TRAILER_FIELD:return 1;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Constructed({idBlock:{tagClass:3,tagNumber:0},optional:true,value:[AlgorithmIdentifier$2.schema(t.hashAlgorithm||{})]}),new Constructed({idBlock:{tagClass:3,tagNumber:1},optional:true,value:[AlgorithmIdentifier$2.schema(t.maskGenAlgorithm||{})]}),new Constructed({idBlock:{tagClass:3,tagNumber:2},optional:true,value:[new Integer({name:t.saltLength||EMPTY_STRING})]}),new Constructed({idBlock:{tagClass:3,tagNumber:3},optional:true,value:[new Integer({name:t.trailerField||EMPTY_STRING})]})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$14);const t=compareSchema(e,e,RSASSAPSSParams.schema({names:{hashAlgorithm:{names:{blockName:HASH_ALGORITHM$4}},maskGenAlgorithm:{names:{blockName:MASK_GEN_ALGORITHM$1}},saltLength:SALT_LENGTH,trailerField:TRAILER_FIELD}}));AsnError.assertSchema(t,this.className);if(HASH_ALGORITHM$4 in t.result)this.hashAlgorithm=new AlgorithmIdentifier$2({schema:t.result.hashAlgorithm});if(MASK_GEN_ALGORITHM$1 in t.result)this.maskGenAlgorithm=new AlgorithmIdentifier$2({schema:t.result.maskGenAlgorithm});if(SALT_LENGTH in t.result)this.saltLength=t.result.saltLength.valueBlock.valueDec;if(TRAILER_FIELD in t.result)this.trailerField=t.result.trailerField.valueBlock.valueDec}toSchema(){const e=[];if(!this.hashAlgorithm.isEqual(RSASSAPSSParams.defaultValues(HASH_ALGORITHM$4))){e.push(new Constructed({idBlock:{tagClass:3,tagNumber:0},value:[this.hashAlgorithm.toSchema()]}))}if(!this.maskGenAlgorithm.isEqual(RSASSAPSSParams.defaultValues(MASK_GEN_ALGORITHM$1))){e.push(new Constructed({idBlock:{tagClass:3,tagNumber:1},value:[this.maskGenAlgorithm.toSchema()]}))}if(this.saltLength!==RSASSAPSSParams.defaultValues(SALT_LENGTH)){e.push(new Constructed({idBlock:{tagClass:3,tagNumber:2},value:[new Integer({value:this.saltLength})]}))}if(this.trailerField!==RSASSAPSSParams.defaultValues(TRAILER_FIELD)){e.push(new Constructed({idBlock:{tagClass:3,tagNumber:3},value:[new Integer({value:this.trailerField})]}))}return new Sequence({value:e})}toJSON(){const e={};if(!this.hashAlgorithm.isEqual(RSASSAPSSParams.defaultValues(HASH_ALGORITHM$4))){e.hashAlgorithm=this.hashAlgorithm.toJSON()}if(!this.maskGenAlgorithm.isEqual(RSASSAPSSParams.defaultValues(MASK_GEN_ALGORITHM$1))){e.maskGenAlgorithm=this.maskGenAlgorithm.toJSON()}if(this.saltLength!==RSASSAPSSParams.defaultValues(SALT_LENGTH)){e.saltLength=this.saltLength}if(this.trailerField!==RSASSAPSSParams.defaultValues(TRAILER_FIELD)){e.trailerField=this.trailerField}return e}}RSASSAPSSParams.CLASS_NAME="RSASSAPSSParams";const SALT="salt";const ITERATION_COUNT="iterationCount";const KEY_LENGTH="keyLength";const PRF="prf";const CLEAR_PROPS$13=[SALT,ITERATION_COUNT,KEY_LENGTH,PRF];class PBKDF2Params extends PkiObject{constructor(e={}){super();this.salt=getParametersValue(e,SALT,PBKDF2Params.defaultValues(SALT));this.iterationCount=getParametersValue(e,ITERATION_COUNT,PBKDF2Params.defaultValues(ITERATION_COUNT));if(KEY_LENGTH in e){this.keyLength=getParametersValue(e,KEY_LENGTH,PBKDF2Params.defaultValues(KEY_LENGTH))}if(PRF in e){this.prf=getParametersValue(e,PRF,PBKDF2Params.defaultValues(PRF))}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case SALT:return{};case ITERATION_COUNT:return-1;case KEY_LENGTH:return 0;case PRF:return new AlgorithmIdentifier$2({algorithmId:"1.3.14.3.2.26",algorithmParams:new Null});default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Choice({value:[new OctetString$1({name:t.saltPrimitive||EMPTY_STRING}),AlgorithmIdentifier$2.schema(t.saltConstructed||{})]}),new Integer({name:t.iterationCount||EMPTY_STRING}),new Integer({name:t.keyLength||EMPTY_STRING,optional:true}),AlgorithmIdentifier$2.schema(t.prf||{names:{optional:true}})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$13);const t=compareSchema(e,e,PBKDF2Params.schema({names:{saltPrimitive:SALT,saltConstructed:{names:{blockName:SALT}},iterationCount:ITERATION_COUNT,keyLength:KEY_LENGTH,prf:{names:{blockName:PRF,optional:true}}}}));AsnError.assertSchema(t,this.className);this.salt=t.result.salt;this.iterationCount=t.result.iterationCount.valueBlock.valueDec;if(KEY_LENGTH in t.result)this.keyLength=t.result.keyLength.valueBlock.valueDec;if(PRF in t.result)this.prf=new AlgorithmIdentifier$2({schema:t.result.prf})}toSchema(){const e=[];e.push(this.salt);e.push(new Integer({value:this.iterationCount}));if(KEY_LENGTH in this){if(PBKDF2Params.defaultValues(KEY_LENGTH)!==this.keyLength)e.push(new Integer({value:this.keyLength}))}if(this.prf){if(PBKDF2Params.defaultValues(PRF).isEqual(this.prf)===false)e.push(this.prf.toSchema())}return new Sequence({value:e})}toJSON(){const e={salt:this.salt.toJSON(),iterationCount:this.iterationCount};if(KEY_LENGTH in this){if(PBKDF2Params.defaultValues(KEY_LENGTH)!==this.keyLength)e.keyLength=this.keyLength}if(this.prf){if(PBKDF2Params.defaultValues(PRF).isEqual(this.prf)===false)e.prf=this.prf.toJSON()}return e}}PBKDF2Params.CLASS_NAME="PBKDF2Params";const KEY_DERIVATION_FUNC="keyDerivationFunc";const ENCRYPTION_SCHEME="encryptionScheme";const CLEAR_PROPS$12=[KEY_DERIVATION_FUNC,ENCRYPTION_SCHEME];class PBES2Params extends PkiObject{constructor(e={}){super();this.keyDerivationFunc=getParametersValue(e,KEY_DERIVATION_FUNC,PBES2Params.defaultValues(KEY_DERIVATION_FUNC));this.encryptionScheme=getParametersValue(e,ENCRYPTION_SCHEME,PBES2Params.defaultValues(ENCRYPTION_SCHEME));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case KEY_DERIVATION_FUNC:return new AlgorithmIdentifier$2;case ENCRYPTION_SCHEME:return new AlgorithmIdentifier$2;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[AlgorithmIdentifier$2.schema(t.keyDerivationFunc||{}),AlgorithmIdentifier$2.schema(t.encryptionScheme||{})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$12);const t=compareSchema(e,e,PBES2Params.schema({names:{keyDerivationFunc:{names:{blockName:KEY_DERIVATION_FUNC}},encryptionScheme:{names:{blockName:ENCRYPTION_SCHEME}}}}));AsnError.assertSchema(t,this.className);this.keyDerivationFunc=new AlgorithmIdentifier$2({schema:t.result.keyDerivationFunc});this.encryptionScheme=new AlgorithmIdentifier$2({schema:t.result.encryptionScheme})}toSchema(){return new Sequence({value:[this.keyDerivationFunc.toSchema(),this.encryptionScheme.toSchema()]})}toJSON(){return{keyDerivationFunc:this.keyDerivationFunc.toJSON(),encryptionScheme:this.encryptionScheme.toJSON()}}}PBES2Params.CLASS_NAME="PBES2Params";class AbstractCryptoEngine{constructor(e){this.crypto=e.crypto;this.subtle="webkitSubtle"in e.crypto?e.crypto.webkitSubtle:e.crypto.subtle;this.name=getParametersValue(e,"name",EMPTY_STRING)}async encrypt(...e){return this.subtle.encrypt(...e)}async decrypt(...e){return this.subtle.decrypt(...e)}sign(...e){return this.subtle.sign(...e)}async verify(...e){return this.subtle.verify(...e)}async digest(...e){return this.subtle.digest(...e)}async generateKey(...e){return this.subtle.generateKey(...e)}async deriveKey(...e){return this.subtle.deriveKey(...e)}async deriveBits(...e){return this.subtle.deriveBits(...e)}async wrapKey(...e){return this.subtle.wrapKey(...e)}async unwrapKey(...e){return this.subtle.unwrapKey(...e)}exportKey(...e){return this.subtle.exportKey(...e)}importKey(...e){return this.subtle.importKey(...e)}getRandomValues(e){return this.crypto.getRandomValues(e)}}async function makePKCS12B2Key(e,t,r,n,i,s){let a;let o;const f=[];switch(t.toUpperCase()){case"SHA-1":a=20;o=64;break;case"SHA-256":a=32;o=64;break;case"SHA-384":a=48;o=128;break;case"SHA-512":a=64;o=128;break;default:throw new Error("Unsupported hashing algorithm")}const c=new Uint8Array(n);const u=new ArrayBuffer(n.byteLength*2+2);const l=new Uint8Array(u);for(let e=0;e<c.length;e++){l[e*2]=0;l[e*2+1]=c[e]}l[l.length-2]=0;l[l.length-1]=0;n=u.slice(0);const h=new ArrayBuffer(o);const d=new Uint8Array(h);for(let e=0;e<h.byteLength;e++)d[e]=3;const p=i.byteLength;const y=o*Math.ceil(p/o);const m=new ArrayBuffer(y);const g=new Uint8Array(m);const b=new Uint8Array(i);for(let e=0;e<y;e++)g[e]=b[e%p];const A=n.byteLength;const w=o*Math.ceil(A/o);const E=new ArrayBuffer(w);const v=new Uint8Array(E);const _=new Uint8Array(n);for(let e=0;e<w;e++)v[e]=_[e%A];const S=m.byteLength+E.byteLength;let $=new ArrayBuffer(S);let T=new Uint8Array($);T.set(g);T.set(v,g.length);const I=Math.ceil((r>>3)/a);let C=Promise.resolve($);for(let r=0;r<=I;r++){C=C.then((e=>{const t=new ArrayBuffer(h.byteLength+e.byteLength);const r=new Uint8Array(t);r.set(d);r.set(T,d.length);return t}));for(let r=0;r<s;r++)C=C.then((r=>e.digest({name:t},new Uint8Array(r))));C=C.then((e=>{const t=new ArrayBuffer(o);const r=new Uint8Array(t);for(let n=0;n<t.byteLength;n++)r[n]=e[n%e.byteLength];const n=Math.ceil(p/o)+Math.ceil(A/o);const i=[];let s=0;let a=o;for(let e=0;e<n;e++){const e=Array.from(new Uint8Array($.slice(s,s+a)));s+=o;if(s+o>$.byteLength)a=$.byteLength-s;let n=511;for(let i=t.byteLength-1;i>=0;i--){n>>=8;n+=r[i]+e[i];e[i]=n&255}i.push(...e)}$=new ArrayBuffer(i.length);T=new Uint8Array($);T.set(i);f.push(...new Uint8Array(e));return $}))}C=C.then((()=>{const e=new ArrayBuffer(r>>3);const t=new Uint8Array(e);t.set(new Uint8Array(f).slice(0,r>>3));return e}));return C}function prepareAlgorithm(e){const t=typeof e==="string"?{name:e}:e;if("hash"in t){return{...t,hash:prepareAlgorithm(t.hash)}}return t}class CryptoEngine extends AbstractCryptoEngine{async importKey(e,t,r,n,i){var s,a,o,f,c,u;let l={};const h=prepareAlgorithm(r);switch(e.toLowerCase()){case"raw":return this.subtle.importKey("raw",t,r,n,i);case"spki":{const e=fromBER(BufferSourceConverter_1.toArrayBuffer(t));AsnError.assert(e,"keyData");const r=new PublicKeyInfo$1;try{r.fromSchema(e.result)}catch{throw new ArgumentError("Incorrect keyData")}switch(h.name.toUpperCase()){case"RSA-PSS":{if(!h.hash){throw new ParameterError("hash","algorithm.hash","Incorrect hash algorithm: Hash algorithm is missed")}switch(h.hash.name.toUpperCase()){case"SHA-1":l.alg="PS1";break;case"SHA-256":l.alg="PS256";break;case"SHA-384":l.alg="PS384";break;case"SHA-512":l.alg="PS512";break;default:throw new Error(`Incorrect hash algorithm: ${h.hash.name.toUpperCase()}`)}}case"RSASSA-PKCS1-V1_5":{i=["verify"];l.kty="RSA";l.ext=n;l.key_ops=i;if(r.algorithm.algorithmId!=="1.2.840.113549.1.1.1")throw new Error(`Incorrect public key algorithm: ${r.algorithm.algorithmId}`);if(!l.alg){if(!h.hash){throw new ParameterError("hash","algorithm.hash","Incorrect hash algorithm: Hash algorithm is missed")}switch(h.hash.name.toUpperCase()){case"SHA-1":l.alg="RS1";break;case"SHA-256":l.alg="RS256";break;case"SHA-384":l.alg="RS384";break;case"SHA-512":l.alg="RS512";break;default:throw new Error(`Incorrect hash algorithm: ${h.hash.name.toUpperCase()}`)}}const e=r.toJSON();Object.assign(l,e)}break;case"ECDSA":i=["verify"];case"ECDH":{l={kty:"EC",ext:n,key_ops:i};if(r.algorithm.algorithmId!=="1.2.840.10045.2.1"){throw new Error(`Incorrect public key algorithm: ${r.algorithm.algorithmId}`)}const e=r.toJSON();Object.assign(l,e)}break;case"RSA-OAEP":{l.kty="RSA";l.ext=n;l.key_ops=i;if(this.name.toLowerCase()==="safari")l.alg="RSA-OAEP";else{if(!h.hash){throw new ParameterError("hash","algorithm.hash","Incorrect hash algorithm: Hash algorithm is missed")}switch(h.hash.name.toUpperCase()){case"SHA-1":l.alg="RSA-OAEP";break;case"SHA-256":l.alg="RSA-OAEP-256";break;case"SHA-384":l.alg="RSA-OAEP-384";break;case"SHA-512":l.alg="RSA-OAEP-512";break;default:throw new Error(`Incorrect hash algorithm: ${h.hash.name.toUpperCase()}`)}}const e=r.toJSON();Object.assign(l,e)}break;case"RSAES-PKCS1-V1_5":{l.kty="RSA";l.ext=n;l.key_ops=i;l.alg="PS1";const e=r.toJSON();Object.assign(l,e)}break;default:throw new Error(`Incorrect algorithm name: ${h.name.toUpperCase()}`)}}break;case"pkcs8":{const e=new PrivateKeyInfo$2;const r=fromBER(BufferSourceConverter_1.toArrayBuffer(t));AsnError.assert(r,"keyData");try{e.fromSchema(r.result)}catch(e){throw new Error("Incorrect keyData")}if(!e.parsedKey)throw new Error("Incorrect keyData");switch(h.name.toUpperCase()){case"RSA-PSS":{switch((s=h.hash)===null||s===void 0?void 0:s.name.toUpperCase()){case"SHA-1":l.alg="PS1";break;case"SHA-256":l.alg="PS256";break;case"SHA-384":l.alg="PS384";break;case"SHA-512":l.alg="PS512";break;default:throw new Error(`Incorrect hash algorithm: ${(a=h.hash)===null||a===void 0?void 0:a.name.toUpperCase()}`)}}case"RSASSA-PKCS1-V1_5":{i=["sign"];l.kty="RSA";l.ext=n;l.key_ops=i;if(e.privateKeyAlgorithm.algorithmId!=="1.2.840.113549.1.1.1")throw new Error(`Incorrect private key algorithm: ${e.privateKeyAlgorithm.algorithmId}`);if("alg"in l===false){switch((o=h.hash)===null||o===void 0?void 0:o.name.toUpperCase()){case"SHA-1":l.alg="RS1";break;case"SHA-256":l.alg="RS256";break;case"SHA-384":l.alg="RS384";break;case"SHA-512":l.alg="RS512";break;default:throw new Error(`Incorrect hash algorithm: ${(f=h.hash)===null||f===void 0?void 0:f.name.toUpperCase()}`)}}const t=e.toJSON();Object.assign(l,t)}break;case"ECDSA":i=["sign"];case"ECDH":{l={kty:"EC",ext:n,key_ops:i};if(e.privateKeyAlgorithm.algorithmId!=="1.2.840.10045.2.1")throw new Error(`Incorrect algorithm: ${e.privateKeyAlgorithm.algorithmId}`);const t=e.toJSON();Object.assign(l,t)}break;case"RSA-OAEP":{l.kty="RSA";l.ext=n;l.key_ops=i;if(this.name.toLowerCase()==="safari")l.alg="RSA-OAEP";else{switch((c=h.hash)===null||c===void 0?void 0:c.name.toUpperCase()){case"SHA-1":l.alg="RSA-OAEP";break;case"SHA-256":l.alg="RSA-OAEP-256";break;case"SHA-384":l.alg="RSA-OAEP-384";break;case"SHA-512":l.alg="RSA-OAEP-512";break;default:throw new Error(`Incorrect hash algorithm: ${(u=h.hash)===null||u===void 0?void 0:u.name.toUpperCase()}`)}}const t=e.toJSON();Object.assign(l,t)}break;case"RSAES-PKCS1-V1_5":{i=["decrypt"];l.kty="RSA";l.ext=n;l.key_ops=i;l.alg="PS1";const t=e.toJSON();Object.assign(l,t)}break;default:throw new Error(`Incorrect algorithm name: ${h.name.toUpperCase()}`)}}break;case"jwk":l=t;break;default:throw new Error(`Incorrect format: ${e}`)}if(this.name.toLowerCase()==="safari"){try{return this.subtle.importKey("jwk",stringToArrayBuffer(JSON.stringify(l)),r,n,i)}catch{return this.subtle.importKey("jwk",l,r,n,i)}}return this.subtle.importKey("jwk",l,r,n,i)}async exportKey(e,t){let r=await this.subtle.exportKey("jwk",t);if(this.name.toLowerCase()==="safari"){if(r instanceof ArrayBuffer){r=JSON.parse(arrayBufferToString(r))}}switch(e.toLowerCase()){case"raw":return this.subtle.exportKey("raw",t);case"spki":{const e=new PublicKeyInfo$1;try{e.fromJSON(r)}catch(e){throw new Error("Incorrect key data")}return e.toSchema().toBER(false)}case"pkcs8":{const e=new PrivateKeyInfo$2;try{e.fromJSON(r)}catch(e){throw new Error("Incorrect key data")}return e.toSchema().toBER(false)}case"jwk":return r;default:throw new Error(`Incorrect format: ${e}`)}}async convert(e,t,r,n,i,s){if(e.toLowerCase()===t.toLowerCase()){return r}const a=await this.importKey(e,r,n,i,s);return this.exportKey(t,a)}getAlgorithmByOID(e,t=false,r){switch(e){case"1.2.840.113549.1.1.1":return{name:"RSAES-PKCS1-v1_5"};case"1.2.840.113549.1.1.5":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-1"}};case"1.2.840.113549.1.1.11":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"1.2.840.113549.1.1.12":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-384"}};case"1.2.840.113549.1.1.13":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-512"}};case"1.2.840.113549.1.1.10":return{name:"RSA-PSS"};case"1.2.840.113549.1.1.7":return{name:"RSA-OAEP"};case"1.2.840.10045.2.1":case"1.2.840.10045.4.1":return{name:"ECDSA",hash:{name:"SHA-1"}};case"1.2.840.10045.4.3.2":return{name:"ECDSA",hash:{name:"SHA-256"}};case"1.2.840.10045.4.3.3":return{name:"ECDSA",hash:{name:"SHA-384"}};case"1.2.840.10045.4.3.4":return{name:"ECDSA",hash:{name:"SHA-512"}};case"1.3.133.16.840.63.0.2":return{name:"ECDH",kdf:"SHA-1"};case"1.3.132.1.11.1":return{name:"ECDH",kdf:"SHA-256"};case"1.3.132.1.11.2":return{name:"ECDH",kdf:"SHA-384"};case"1.3.132.1.11.3":return{name:"ECDH",kdf:"SHA-512"};case"2.16.840.1.101.3.4.1.2":return{name:"AES-CBC",length:128};case"2.16.840.1.101.3.4.1.22":return{name:"AES-CBC",length:192};case"2.16.840.1.101.3.4.1.42":return{name:"AES-CBC",length:256};case"2.16.840.1.101.3.4.1.6":return{name:"AES-GCM",length:128};case"2.16.840.1.101.3.4.1.26":return{name:"AES-GCM",length:192};case"2.16.840.1.101.3.4.1.46":return{name:"AES-GCM",length:256};case"2.16.840.1.101.3.4.1.4":return{name:"AES-CFB",length:128};case"2.16.840.1.101.3.4.1.24":return{name:"AES-CFB",length:192};case"2.16.840.1.101.3.4.1.44":return{name:"AES-CFB",length:256};case"2.16.840.1.101.3.4.1.5":return{name:"AES-KW",length:128};case"2.16.840.1.101.3.4.1.25":return{name:"AES-KW",length:192};case"2.16.840.1.101.3.4.1.45":return{name:"AES-KW",length:256};case"1.2.840.113549.2.7":return{name:"HMAC",hash:{name:"SHA-1"}};case"1.2.840.113549.2.9":return{name:"HMAC",hash:{name:"SHA-256"}};case"1.2.840.113549.2.10":return{name:"HMAC",hash:{name:"SHA-384"}};case"1.2.840.113549.2.11":return{name:"HMAC",hash:{name:"SHA-512"}};case"1.2.840.113549.1.9.16.3.5":return{name:"DH"};case"1.3.14.3.2.26":return{name:"SHA-1"};case"2.16.840.1.101.3.4.2.1":return{name:"SHA-256"};case"2.16.840.1.101.3.4.2.2":return{name:"SHA-384"};case"2.16.840.1.101.3.4.2.3":return{name:"SHA-512"};case"1.2.840.113549.1.5.12":return{name:"PBKDF2"};case"1.2.840.10045.3.1.7":return{name:"P-256"};case"1.3.132.0.34":return{name:"P-384"};case"1.3.132.0.35":return{name:"P-521"};case"1.3.132.0.10":return{name:"K-256",hash:{name:"SHA-256"}}}if(t){throw new Error(`Unsupported algorithm identifier ${r?`for ${r} `:EMPTY_STRING}: ${e}`)}return{}}getOIDByAlgorithm(e,t=false,r){let n=EMPTY_STRING;switch(e.name.toUpperCase()){case"RSAES-PKCS1-V1_5":n="1.2.840.113549.1.1.1";break;case"RSASSA-PKCS1-V1_5":switch(e.hash.name.toUpperCase()){case"SHA-1":n="1.2.840.113549.1.1.5";break;case"SHA-256":n="1.2.840.113549.1.1.11";break;case"SHA-384":n="1.2.840.113549.1.1.12";break;case"SHA-512":n="1.2.840.113549.1.1.13";break}break;case"RSA-PSS":n="1.2.840.113549.1.1.10";break;case"RSA-OAEP":n="1.2.840.113549.1.1.7";break;case"ECDSA":switch(e.hash.name.toUpperCase()){case"SHA-1":n="1.2.840.10045.4.1";break;case"SHA-256":n="1.2.840.10045.4.3.2";break;case"SHA-384":n="1.2.840.10045.4.3.3";break;case"SHA-512":n="1.2.840.10045.4.3.4";break}break;case"ECDH":switch(e.kdf.toUpperCase()){case"SHA-1":n="1.3.133.16.840.63.0.2";break;case"SHA-256":n="1.3.132.1.11.1";break;case"SHA-384":n="1.3.132.1.11.2";break;case"SHA-512":n="1.3.132.1.11.3";break}break;case"AES-CTR":break;case"AES-CBC":switch(e.length){case 128:n="2.16.840.1.101.3.4.1.2";break;case 192:n="2.16.840.1.101.3.4.1.22";break;case 256:n="2.16.840.1.101.3.4.1.42";break}break;case"AES-CMAC":break;case"AES-GCM":switch(e.length){case 128:n="2.16.840.1.101.3.4.1.6";break;case 192:n="2.16.840.1.101.3.4.1.26";break;case 256:n="2.16.840.1.101.3.4.1.46";break}break;case"AES-CFB":switch(e.length){case 128:n="2.16.840.1.101.3.4.1.4";break;case 192:n="2.16.840.1.101.3.4.1.24";break;case 256:n="2.16.840.1.101.3.4.1.44";break}break;case"AES-KW":switch(e.length){case 128:n="2.16.840.1.101.3.4.1.5";break;case 192:n="2.16.840.1.101.3.4.1.25";break;case 256:n="2.16.840.1.101.3.4.1.45";break}break;case"HMAC":switch(e.hash.name.toUpperCase()){case"SHA-1":n="1.2.840.113549.2.7";break;case"SHA-256":n="1.2.840.113549.2.9";break;case"SHA-384":n="1.2.840.113549.2.10";break;case"SHA-512":n="1.2.840.113549.2.11";break}break;case"DH":n="1.2.840.113549.1.9.16.3.5";break;case"SHA-1":n="1.3.14.3.2.26";break;case"SHA-256":n="2.16.840.1.101.3.4.2.1";break;case"SHA-384":n="2.16.840.1.101.3.4.2.2";break;case"SHA-512":n="2.16.840.1.101.3.4.2.3";break;case"CONCAT":break;case"HKDF":break;case"PBKDF2":n="1.2.840.113549.1.5.12";break;case"P-256":n="1.2.840.10045.3.1.7";break;case"P-384":n="1.3.132.0.34";break;case"P-521":n="1.3.132.0.35";break;case"K-256":n="1.3.132.0.10";break}if(!n&&t){throw new Error(`Unsupported algorithm ${r?`for ${r} `:EMPTY_STRING}: ${e.name}`)}return n}getAlgorithmParameters(e,t){let r={algorithm:{},usages:[]};switch(e.toUpperCase()){case"RSAES-PKCS1-V1_5":case"RSASSA-PKCS1-V1_5":switch(t.toLowerCase()){case"generatekey":r={algorithm:{name:"RSASSA-PKCS1-v1_5",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},usages:["sign","verify"]};break;case"verify":case"sign":case"importkey":r={algorithm:{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},usages:["verify"]};break;case"exportkey":default:return{algorithm:{name:"RSASSA-PKCS1-v1_5"},usages:[]}}break;case"RSA-PSS":switch(t.toLowerCase()){case"sign":case"verify":r={algorithm:{name:"RSA-PSS",hash:{name:"SHA-1"},saltLength:20},usages:["sign","verify"]};break;case"generatekey":r={algorithm:{name:"RSA-PSS",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-1"}},usages:["sign","verify"]};break;case"importkey":r={algorithm:{name:"RSA-PSS",hash:{name:"SHA-1"}},usages:["verify"]};break;case"exportkey":default:return{algorithm:{name:"RSA-PSS"},usages:[]}}break;case"RSA-OAEP":switch(t.toLowerCase()){case"encrypt":case"decrypt":r={algorithm:{name:"RSA-OAEP"},usages:["encrypt","decrypt"]};break;case"generatekey":r={algorithm:{name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"importkey":r={algorithm:{name:"RSA-OAEP",hash:{name:"SHA-256"}},usages:["encrypt"]};break;case"exportkey":default:return{algorithm:{name:"RSA-OAEP"},usages:[]}}break;case"ECDSA":switch(t.toLowerCase()){case"generatekey":r={algorithm:{name:"ECDSA",namedCurve:"P-256"},usages:["sign","verify"]};break;case"importkey":r={algorithm:{name:"ECDSA",namedCurve:"P-256"},usages:["verify"]};break;case"verify":case"sign":r={algorithm:{name:"ECDSA",hash:{name:"SHA-256"}},usages:["sign"]};break;default:return{algorithm:{name:"ECDSA"},usages:[]}}break;case"ECDH":switch(t.toLowerCase()){case"exportkey":case"importkey":case"generatekey":r={algorithm:{name:"ECDH",namedCurve:"P-256"},usages:["deriveKey","deriveBits"]};break;case"derivekey":case"derivebits":r={algorithm:{name:"ECDH",namedCurve:"P-256",public:[]},usages:["encrypt","decrypt"]};break;default:return{algorithm:{name:"ECDH"},usages:[]}}break;case"AES-CTR":switch(t.toLowerCase()){case"importkey":case"exportkey":case"generatekey":r={algorithm:{name:"AES-CTR",length:256},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"decrypt":case"encrypt":r={algorithm:{name:"AES-CTR",counter:new Uint8Array(16),length:10},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-CTR"},usages:[]}}break;case"AES-CBC":switch(t.toLowerCase()){case"importkey":case"exportkey":case"generatekey":r={algorithm:{name:"AES-CBC",length:256},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"decrypt":case"encrypt":r={algorithm:{name:"AES-CBC",iv:this.getRandomValues(new Uint8Array(16))},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-CBC"},usages:[]}}break;case"AES-GCM":switch(t.toLowerCase()){case"importkey":case"exportkey":case"generatekey":r={algorithm:{name:"AES-GCM",length:256},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"decrypt":case"encrypt":r={algorithm:{name:"AES-GCM",iv:this.getRandomValues(new Uint8Array(16))},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-GCM"},usages:[]}}break;case"AES-KW":switch(t.toLowerCase()){case"importkey":case"exportkey":case"generatekey":case"wrapkey":case"unwrapkey":r={algorithm:{name:"AES-KW",length:256},usages:["wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-KW"},usages:[]}}break;case"HMAC":switch(t.toLowerCase()){case"sign":case"verify":r={algorithm:{name:"HMAC"},usages:["sign","verify"]};break;case"importkey":case"exportkey":case"generatekey":r={algorithm:{name:"HMAC",length:32,hash:{name:"SHA-256"}},usages:["sign","verify"]};break;default:return{algorithm:{name:"HMAC"},usages:[]}}break;case"HKDF":switch(t.toLowerCase()){case"derivekey":r={algorithm:{name:"HKDF",hash:"SHA-256",salt:new Uint8Array([]),info:new Uint8Array([])},usages:["encrypt","decrypt"]};break;default:return{algorithm:{name:"HKDF"},usages:[]}}break;case"PBKDF2":switch(t.toLowerCase()){case"derivekey":r={algorithm:{name:"PBKDF2",hash:{name:"SHA-256"},salt:new Uint8Array([]),iterations:1e4},usages:["encrypt","decrypt"]};break;default:return{algorithm:{name:"PBKDF2"},usages:[]}}break}return r}getHashAlgorithm(e){let t=EMPTY_STRING;switch(e.algorithmId){case"1.2.840.10045.4.1":case"1.2.840.113549.1.1.5":t="SHA-1";break;case"1.2.840.10045.4.3.2":case"1.2.840.113549.1.1.11":t="SHA-256";break;case"1.2.840.10045.4.3.3":case"1.2.840.113549.1.1.12":t="SHA-384";break;case"1.2.840.10045.4.3.4":case"1.2.840.113549.1.1.13":t="SHA-512";break;case"1.2.840.113549.1.1.10":{try{const r=new RSASSAPSSParams({schema:e.algorithmParams});if(r.hashAlgorithm){const e=this.getAlgorithmByOID(r.hashAlgorithm.algorithmId);if("name"in e){t=e.name}else{return EMPTY_STRING}}else t="SHA-1"}catch{}}break}return t}async encryptEncryptedContentInfo(e){ParameterError.assert(e,"password","contentEncryptionAlgorithm","hmacHashAlgorithm","iterationCount","contentToEncrypt","contentToEncrypt","contentType");const t=this.getOIDByAlgorithm(e.contentEncryptionAlgorithm,true,"contentEncryptionAlgorithm");const r=this.getOIDByAlgorithm({name:"PBKDF2"},true,"PBKDF2");const n=this.getOIDByAlgorithm({name:"HMAC",hash:{name:e.hmacHashAlgorithm}},true,"hmacHashAlgorithm");const i=new ArrayBuffer(16);const s=new Uint8Array(i);this.getRandomValues(s);const a=new ArrayBuffer(64);const o=new Uint8Array(a);this.getRandomValues(o);const f=new Uint8Array(e.contentToEncrypt);const c=new PBKDF2Params({salt:new OctetString$1({valueHex:a}),iterationCount:e.iterationCount,prf:new AlgorithmIdentifier$2({algorithmId:n,algorithmParams:new Null})});const u=new Uint8Array(e.password);const l=await this.importKey("raw",u,"PBKDF2",false,["deriveKey"]);const h=await this.deriveKey({name:"PBKDF2",hash:{name:e.hmacHashAlgorithm},salt:o,iterations:e.iterationCount},l,e.contentEncryptionAlgorithm,false,["encrypt"]);const d=await this.encrypt({name:e.contentEncryptionAlgorithm.name,iv:s},h,f);const p=new PBES2Params({keyDerivationFunc:new AlgorithmIdentifier$2({algorithmId:r,algorithmParams:c.toSchema()}),encryptionScheme:new AlgorithmIdentifier$2({algorithmId:t,algorithmParams:new OctetString$1({valueHex:i})})});return new EncryptedContentInfo$1({contentType:e.contentType,contentEncryptionAlgorithm:new AlgorithmIdentifier$2({algorithmId:"1.2.840.113549.1.5.13",algorithmParams:p.toSchema()}),encryptedContent:new OctetString$1({valueHex:d})})}async decryptEncryptedContentInfo(e){ParameterError.assert(e,"password","encryptedContentInfo");if(e.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId!=="1.2.840.113549.1.5.13")throw new Error(`Unknown "contentEncryptionAlgorithm": ${e.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId}`);let t;try{t=new PBES2Params({schema:e.encryptedContentInfo.contentEncryptionAlgorithm.algorithmParams})}catch(e){throw new Error('Incorrectly encoded "pbes2Parameters"')}let r;try{r=new PBKDF2Params({schema:t.keyDerivationFunc.algorithmParams})}catch(e){throw new Error('Incorrectly encoded "pbkdf2Params"')}const n=this.getAlgorithmByOID(t.encryptionScheme.algorithmId,true);const i=t.encryptionScheme.algorithmParams.valueBlock.valueHex;const s=new Uint8Array(i);const a=r.salt.valueBlock.valueHex;const o=new Uint8Array(a);const f=r.iterationCount;let c="SHA-1";if(r.prf){const e=this.getAlgorithmByOID(r.prf.algorithmId,true);c=e.hash.name}const u=await this.importKey("raw",e.password,"PBKDF2",false,["deriveKey"]);const l=await this.deriveKey({name:"PBKDF2",hash:{name:c},salt:o,iterations:f},u,n,false,["decrypt"]);const h=e.encryptedContentInfo.getEncryptedContent();return this.decrypt({name:n.name,iv:s},l,h)}async stampDataWithPassword(e){if(e instanceof Object===false)throw new Error('Parameters must have type "Object"');ParameterError.assert(e,"password","hashAlgorithm","iterationCount","salt","contentToStamp");let t;switch(e.hashAlgorithm.toLowerCase()){case"sha-1":t=160;break;case"sha-256":t=256;break;case"sha-384":t=384;break;case"sha-512":t=512;break;default:throw new Error(`Incorrect "parameters.hashAlgorithm" parameter: ${e.hashAlgorithm}`)}const r={name:"HMAC",length:t,hash:{name:e.hashAlgorithm}};const n=await makePKCS12B2Key(this,e.hashAlgorithm,t,e.password,e.salt,e.iterationCount);const i=await this.importKey("raw",new Uint8Array(n),r,false,["sign"]);return this.sign(r,i,new Uint8Array(e.contentToStamp))}async verifyDataStampedWithPassword(e){ParameterError.assert(e,"password","hashAlgorithm","salt","iterationCount","contentToVerify","signatureToVerify");let t=0;switch(e.hashAlgorithm.toLowerCase()){case"sha-1":t=160;break;case"sha-256":t=256;break;case"sha-384":t=384;break;case"sha-512":t=512;break;default:throw new Error(`Incorrect "parameters.hashAlgorithm" parameter: ${e.hashAlgorithm}`)}const r={name:"HMAC",length:t,hash:{name:e.hashAlgorithm}};const n=await makePKCS12B2Key(this,e.hashAlgorithm,t,e.password,e.salt,e.iterationCount);const i=await this.importKey("raw",new Uint8Array(n),r,false,["verify"]);return this.verify(r,i,new Uint8Array(e.signatureToVerify),new Uint8Array(e.contentToVerify))}async getSignatureParameters(e,t="SHA-1"){this.getOIDByAlgorithm({name:t},true,"hashAlgorithm");const r=new AlgorithmIdentifier$2;const n=this.getAlgorithmParameters(e.algorithm.name,"sign");if(!Object.keys(n.algorithm).length){throw new Error("Parameter 'algorithm' is empty")}const i=n.algorithm;i.hash.name=t;switch(e.algorithm.name.toUpperCase()){case"RSASSA-PKCS1-V1_5":case"ECDSA":r.algorithmId=this.getOIDByAlgorithm(i,true);break;case"RSA-PSS":{switch(t.toUpperCase()){case"SHA-256":i.saltLength=32;break;case"SHA-384":i.saltLength=48;break;case"SHA-512":i.saltLength=64;break}const e={};if(t.toUpperCase()!=="SHA-1"){const r=this.getOIDByAlgorithm({name:t},true,"hashAlgorithm");e.hashAlgorithm=new AlgorithmIdentifier$2({algorithmId:r,algorithmParams:new Null});e.maskGenAlgorithm=new AlgorithmIdentifier$2({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:e.hashAlgorithm.toSchema()})}if(i.saltLength!==20)e.saltLength=i.saltLength;const n=new RSASSAPSSParams(e);r.algorithmId="1.2.840.113549.1.1.10";r.algorithmParams=n.toSchema()}break;default:throw new Error(`Unsupported signature algorithm: ${e.algorithm.name}`)}return{signatureAlgorithm:r,parameters:n}}async signWithPrivateKey(e,t,r){const n=await this.sign(r.algorithm,t,e);if(r.algorithm.name==="ECDSA"){return createCMSECDSASignature(n)}return n}fillPublicKeyParameters(e,t){const r={};const n=this.getHashAlgorithm(t);if(n===EMPTY_STRING)throw new Error(`Unsupported signature algorithm: ${t.algorithmId}`);let i;if(t.algorithmId==="1.2.840.113549.1.1.10")i=t.algorithmId;else i=e.algorithm.algorithmId;const s=this.getAlgorithmByOID(i,true);r.algorithm=this.getAlgorithmParameters(s.name,"importKey");if("hash"in r.algorithm.algorithm)r.algorithm.algorithm.hash.name=n;if(s.name==="ECDSA"){const t=e.algorithm;if(!t.algorithmParams){throw new Error("Algorithm parameters for ECDSA public key are missed")}const n=t.algorithmParams;if("idBlock"in t.algorithmParams){if(!(n.idBlock.tagClass===1&&n.idBlock.tagNumber===6)){throw new Error("Incorrect type for ECDSA public key parameters")}}const i=this.getAlgorithmByOID(n.valueBlock.toString(),true);r.algorithm.algorithm.namedCurve=i.name}return r}async getPublicKey(e,t,r){if(!r){r=this.fillPublicKeyParameters(e,t)}const n=e.toSchema().toBER(false);return this.importKey("spki",n,r.algorithm.algorithm,true,r.algorithm.usages)}async verifyWithPublicKey(e,t,r,n,i){let s;if(!i){i=this.getHashAlgorithm(n);if(!i)throw new Error(`Unsupported signature algorithm: ${n.algorithmId}`);s=await this.getPublicKey(r,n)}else{const e={};let t;if(n.algorithmId==="1.2.840.113549.1.1.10")t=n.algorithmId;else t=r.algorithm.algorithmId;const a=this.getAlgorithmByOID(t,true);e.algorithm=this.getAlgorithmParameters(a.name,"importKey");if("hash"in e.algorithm.algorithm)e.algorithm.algorithm.hash.name=i;if(a.name==="ECDSA"){let t=false;if("algorithmParams"in r.algorithm===true){if("idBlock"in r.algorithm.algorithmParams){if(r.algorithm.algorithmParams.idBlock.tagClass===1&&r.algorithm.algorithmParams.idBlock.tagNumber===6)t=true}}if(t===false){throw new Error("Incorrect type for ECDSA public key parameters")}const n=this.getAlgorithmByOID(r.algorithm.algorithmParams.valueBlock.toString(),true);e.algorithm.algorithm.namedCurve=n.name}s=await this.getPublicKey(r,null,e)}const a=this.getAlgorithmParameters(s.algorithm.name,"verify");if("hash"in a.algorithm)a.algorithm.hash.name=i;let o=t.valueBlock.valueHexView;if(s.algorithm.name==="ECDSA"){const e=ECNamedCurves.find(s.algorithm.namedCurve);if(!e){throw new Error("Unsupported named curve in use")}const t=fromBER(o);AsnError.assert(t,"Signature value");o=createECDSASignatureFromCMS(t.result,e.size)}if(s.algorithm.name==="RSA-PSS"){const e=new RSASSAPSSParams({schema:n.algorithmParams});if("saltLength"in e)a.algorithm.saltLength=e.saltLength;else a.algorithm.saltLength=20;let t="SHA-1";if("hashAlgorithm"in e){const r=this.getAlgorithmByOID(e.hashAlgorithm.algorithmId,true);t=r.name}a.algorithm.hash.name=t}return this.verify(a.algorithm,s,o,e)}}let engine={name:"none",crypto:null};function isCryptoEngine(e){return e&&typeof e==="object"&&"crypto"in e?true:false}function setEngine(e,...t){let r=null;if(t.length<2){if(t.length){r=t[0]}else{r=typeof self!=="undefined"&&self.crypto?new CryptoEngine({name:"browser",crypto:self.crypto}):null}}else{const e=t[0];const n=t[1];if(isCryptoEngine(n)){r=n}else if(isCryptoEngine(e)){r=e}else if("subtle"in e&&"getRandomValues"in e){r=new CryptoEngine({crypto:e})}}if(typeof process!=="undefined"&&"pid"in process&&typeof global!=="undefined"&&typeof window==="undefined"){if(typeof global[process.pid]==="undefined"){global[process.pid]={}}else{if(typeof global[process.pid]!=="object"){throw new Error(`Name global.${process.pid} already exists and it is not an object`)}}if(typeof global[process.pid].pkijs==="undefined"){global[process.pid].pkijs={}}else{if(typeof global[process.pid].pkijs!=="object"){throw new Error(`Name global.${process.pid}.pkijs already exists and it is not an object`)}}global[process.pid].pkijs.engine={name:e,crypto:r}}else{engine={name:e,crypto:r}}}function getEngine(){if(typeof process!=="undefined"&&"pid"in process&&typeof global!=="undefined"&&typeof window==="undefined"){let e;try{e=global[process.pid].pkijs.engine}catch(e){throw new Error("Please call 'setEngine' before call to 'getEngine'")}return e}return engine}function getCrypto(e=false){const t=getEngine();if(!t.crypto&&e){throw new Error("Unable to create WebCrypto object")}return t.crypto}function createCMSECDSASignature(e){if(e.byteLength%2!==0)return EMPTY_BUFFER;const t=e.byteLength/2;const r=new ArrayBuffer(t);const n=new Uint8Array(r);n.set(new Uint8Array(e,0,t));const i=new Integer({valueHex:r});const s=new ArrayBuffer(t);const a=new Uint8Array(s);a.set(new Uint8Array(e,t,t));const o=new Integer({valueHex:s});return new Sequence({value:[i.convertToDER(),o.convertToDER()]}).toBER(false)}function createECDSASignatureFromCMS(e,t){if(!(e instanceof Sequence&&e.valueBlock.value.length===2&&e.valueBlock.value[0]instanceof Integer&&e.valueBlock.value[1]instanceof Integer))return EMPTY_BUFFER;const r=e.valueBlock.value[0].convertFromDER().valueBlock.valueHexView;const n=e.valueBlock.value[1].convertFromDER().valueBlock.valueHexView;const i=new Uint8Array(t*2);i.set(r,t-r.byteLength);i.set(n,2*t-n.byteLength);return i.buffer}async function kdfWithCounter(e,t,r,n,i){switch(e.toUpperCase()){case"SHA-1":case"SHA-256":case"SHA-384":case"SHA-512":break;default:throw new ArgumentError(`Unknown hash function: ${e}`)}ArgumentError.assert(t,"zBuffer","ArrayBuffer");if(t.byteLength===0)throw new ArgumentError("'zBuffer' has zero length, error");ArgumentError.assert(n,"SharedInfo","ArrayBuffer");if(r>255)throw new ArgumentError("Please set 'Counter' argument to value less or equal to 255");const s=new ArrayBuffer(4);const a=new Uint8Array(s);a[0]=0;a[1]=0;a[2]=0;a[3]=r;let o=EMPTY_BUFFER;o=utilConcatBuf(o,t);o=utilConcatBuf(o,s);o=utilConcatBuf(o,n);const f=await i.digest({name:e},o);return{counter:r,result:f}}async function kdf(e,t,r,n,i=getCrypto(true)){let s=0;let a=1;switch(e.toUpperCase()){case"SHA-1":s=160;break;case"SHA-256":s=256;break;case"SHA-384":s=384;break;case"SHA-512":s=512;break;default:throw new ArgumentError(`Unknown hash function: ${e}`)}ArgumentError.assert(t,"Zbuffer","ArrayBuffer");if(t.byteLength===0)throw new ArgumentError("'Zbuffer' has zero length, error");ArgumentError.assert(n,"SharedInfo","ArrayBuffer");const o=r/s;if(Math.floor(o)>0){a=Math.floor(o);if(o-a>0)a++}const f=[];for(let r=1;r<=a;r++)f.push(await kdfWithCounter(e,t,r,n,i));let c=EMPTY_BUFFER;let u=1;let l=true;while(l){l=false;for(const e of f){if(e.counter===u){c=utilConcatBuf(c,e.result);l=true;break}}u++}r>>=3;if(c.byteLength>r){const e=new ArrayBuffer(r);const t=new Uint8Array(e);const n=new Uint8Array(c);for(let e=0;e<r;e++)t[e]=n[e];return e}return c}const VERSION$i="version";const LOG_ID="logID";const EXTENSIONS$6="extensions";const TIMESTAMP="timestamp";const HASH_ALGORITHM$3="hashAlgorithm";const SIGNATURE_ALGORITHM$8="signatureAlgorithm";const SIGNATURE$7="signature";const NONE="none";const MD5="md5";const SHA1$2="sha1";const SHA224$1="sha224";const SHA256$3="sha256";const SHA384$2="sha384";const SHA512$3="sha512";const ANONYMOUS="anonymous";const RSA$1="rsa";const DSA="dsa";const ECDSA$2="ecdsa";class SignedCertificateTimestamp extends PkiObject{constructor(e={}){super();this.version=getParametersValue(e,VERSION$i,SignedCertificateTimestamp.defaultValues(VERSION$i));this.logID=getParametersValue(e,LOG_ID,SignedCertificateTimestamp.defaultValues(LOG_ID));this.timestamp=getParametersValue(e,TIMESTAMP,SignedCertificateTimestamp.defaultValues(TIMESTAMP));this.extensions=getParametersValue(e,EXTENSIONS$6,SignedCertificateTimestamp.defaultValues(EXTENSIONS$6));this.hashAlgorithm=getParametersValue(e,HASH_ALGORITHM$3,SignedCertificateTimestamp.defaultValues(HASH_ALGORITHM$3));this.signatureAlgorithm=getParametersValue(e,SIGNATURE_ALGORITHM$8,SignedCertificateTimestamp.defaultValues(SIGNATURE_ALGORITHM$8));this.signature=getParametersValue(e,SIGNATURE$7,SignedCertificateTimestamp.defaultValues(SIGNATURE$7));if("stream"in e&&e.stream){this.fromStream(e.stream)}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case VERSION$i:return 0;case LOG_ID:case EXTENSIONS$6:return EMPTY_BUFFER;case TIMESTAMP:return new Date(0);case HASH_ALGORITHM$3:case SIGNATURE_ALGORITHM$8:return EMPTY_STRING;case SIGNATURE$7:return new Any;default:return super.defaultValues(e)}}fromSchema(e){if(e instanceof RawData===false)throw new Error("Object's schema was not verified against input data for SignedCertificateTimestamp");const t=new SeqStream({stream:new ByteStream({buffer:e.data})});this.fromStream(t)}fromStream(e){const t=e.getUint16();this.version=e.getBlock(1)[0];if(this.version===0){this.logID=new Uint8Array(e.getBlock(32)).buffer.slice(0);this.timestamp=new Date(utilFromBase(new Uint8Array(e.getBlock(8)),8));const r=e.getUint16();this.extensions=new Uint8Array(e.getBlock(r)).buffer.slice(0);switch(e.getBlock(1)[0]){case 0:this.hashAlgorithm=NONE;break;case 1:this.hashAlgorithm=MD5;break;case 2:this.hashAlgorithm=SHA1$2;break;case 3:this.hashAlgorithm=SHA224$1;break;case 4:this.hashAlgorithm=SHA256$3;break;case 5:this.hashAlgorithm=SHA384$2;break;case 6:this.hashAlgorithm=SHA512$3;break;default:throw new Error("Object's stream was not correct for SignedCertificateTimestamp")}switch(e.getBlock(1)[0]){case 0:this.signatureAlgorithm=ANONYMOUS;break;case 1:this.signatureAlgorithm=RSA$1;break;case 2:this.signatureAlgorithm=DSA;break;case 3:this.signatureAlgorithm=ECDSA$2;break;default:throw new Error("Object's stream was not correct for SignedCertificateTimestamp")}const n=e.getUint16();const i=new Uint8Array(e.getBlock(n)).buffer.slice(0);const s=fromBER(i);AsnError.assert(s,"SignedCertificateTimestamp");this.signature=s.result;if(t!==47+r+n){throw new Error("Object's stream was not correct for SignedCertificateTimestamp")}}}toSchema(){const e=this.toStream();return new RawData({data:e.stream.buffer})}toStream(){const e=new SeqStream;e.appendUint16(47+this.extensions.byteLength+this.signature.valueBeforeDecodeView.byteLength);e.appendChar(this.version);e.appendView(new Uint8Array(this.logID));const t=new ArrayBuffer(8);const r=new Uint8Array(t);const n=utilToBase(this.timestamp.valueOf(),8);r.set(new Uint8Array(n),8-n.byteLength);e.appendView(r);e.appendUint16(this.extensions.byteLength);if(this.extensions.byteLength)e.appendView(new Uint8Array(this.extensions));let i;switch(this.hashAlgorithm.toLowerCase()){case NONE:i=0;break;case MD5:i=1;break;case SHA1$2:i=2;break;case SHA224$1:i=3;break;case SHA256$3:i=4;break;case SHA384$2:i=5;break;case SHA512$3:i=6;break;default:throw new Error(`Incorrect data for hashAlgorithm: ${this.hashAlgorithm}`)}e.appendChar(i);let s;switch(this.signatureAlgorithm.toLowerCase()){case ANONYMOUS:s=0;break;case RSA$1:s=1;break;case DSA:s=2;break;case ECDSA$2:s=3;break;default:throw new Error(`Incorrect data for signatureAlgorithm: ${this.signatureAlgorithm}`)}e.appendChar(s);const a=this.signature.toBER(false);e.appendUint16(a.byteLength);e.appendView(new Uint8Array(a));return e}toJSON(){return{version:this.version,logID:bufferToHexCodes(this.logID),timestamp:this.timestamp,extensions:bufferToHexCodes(this.extensions),hashAlgorithm:this.hashAlgorithm,signatureAlgorithm:this.signatureAlgorithm,signature:this.signature.toJSON()}}async verify(e,t,r=0,n=getCrypto(true)){const i=toBase64(arrayBufferToString(this.logID));let s=null;const a=new SeqStream;for(const t of e){if(t.log_id===i){s=t.key;break}}if(!s){throw new Error(`Public key not found for CT with logId: ${i}`)}const o=stringToArrayBuffer(fromBase64(s));const f=PublicKeyInfo$1.fromBER(o);a.appendChar(0);a.appendChar(0);const c=new ArrayBuffer(8);const u=new Uint8Array(c);const l=utilToBase(this.timestamp.valueOf(),8);u.set(new Uint8Array(l),8-l.byteLength);a.appendView(u);a.appendUint16(r);if(r===0)a.appendUint24(t.byteLength);a.appendView(new Uint8Array(t));a.appendUint16(this.extensions.byteLength);if(this.extensions.byteLength!==0)a.appendView(new Uint8Array(this.extensions));return n.verifyWithPublicKey(a.buffer.slice(0,a.length),new OctetString$1({valueHex:this.signature.toBER(false)}),f,{algorithmId:EMPTY_STRING},"SHA-256")}}SignedCertificateTimestamp.CLASS_NAME="SignedCertificateTimestamp";const TIMESTAMPS="timestamps";class SignedCertificateTimestampList extends PkiObject{constructor(e={}){super();this.timestamps=getParametersValue(e,TIMESTAMPS,SignedCertificateTimestampList.defaultValues(TIMESTAMPS));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case TIMESTAMPS:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case TIMESTAMPS:return t.length===0;default:return super.defaultValues(e)}}static schema(e={}){var t;const r=getParametersValue(e,"names",{});(t=r.optional)!==null&&t!==void 0?t:r.optional=false;return new OctetString$1({name:r.blockName||"SignedCertificateTimestampList",optional:r.optional})}fromSchema(e){if(e instanceof OctetString$1===false){throw new Error("Object's schema was not verified against input data for SignedCertificateTimestampList")}const t=new SeqStream({stream:new ByteStream({buffer:e.valueBlock.valueHex})});const r=t.getUint16();if(r!==t.length){throw new Error("Object's schema was not verified against input data for SignedCertificateTimestampList")}while(t.length){this.timestamps.push(new SignedCertificateTimestamp({stream:t}))}}toSchema(){const e=new SeqStream;let t=0;const r=[];for(const e of this.timestamps){const n=e.toStream();r.push(n);t+=n.stream.buffer.byteLength}e.appendUint16(t);for(const t of r){e.appendView(t.stream.view)}return new OctetString$1({valueHex:e.stream.buffer.slice(0)})}toJSON(){return{timestamps:Array.from(this.timestamps,(e=>e.toJSON()))}}}SignedCertificateTimestampList.CLASS_NAME="SignedCertificateTimestampList";const ATTRIBUTES$4="attributes";const CLEAR_PROPS$11=[ATTRIBUTES$4];class SubjectDirectoryAttributes$1 extends PkiObject{constructor(e={}){super();this.attributes=getParametersValue(e,ATTRIBUTES$4,SubjectDirectoryAttributes$1.defaultValues(ATTRIBUTES$4));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case ATTRIBUTES$4:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Repeated({name:t.attributes||EMPTY_STRING,value:Attribute$3.schema()})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$11);const t=compareSchema(e,e,SubjectDirectoryAttributes$1.schema({names:{attributes:ATTRIBUTES$4}}));AsnError.assertSchema(t,this.className);this.attributes=Array.from(t.result.attributes,(e=>new Attribute$3({schema:e})))}toSchema(){return new Sequence({value:Array.from(this.attributes,(e=>e.toSchema()))})}toJSON(){return{attributes:Array.from(this.attributes,(e=>e.toJSON()))}}}SubjectDirectoryAttributes$1.CLASS_NAME="SubjectDirectoryAttributes";class ExtensionValueFactory{static getItems(){if(!this.types){this.types={};ExtensionValueFactory.register(id_SubjectAltName,"SubjectAltName",AltName);ExtensionValueFactory.register(id_IssuerAltName,"IssuerAltName",AltName);ExtensionValueFactory.register(id_AuthorityKeyIdentifier,"AuthorityKeyIdentifier",AuthorityKeyIdentifier$1);ExtensionValueFactory.register(id_BasicConstraints,"BasicConstraints",BasicConstraints$1);ExtensionValueFactory.register(id_MicrosoftCaVersion,"MicrosoftCaVersion",CAVersion);ExtensionValueFactory.register(id_CertificatePolicies,"CertificatePolicies",CertificatePolicies$1);ExtensionValueFactory.register(id_MicrosoftAppPolicies,"CertificatePoliciesMicrosoft",CertificatePolicies$1);ExtensionValueFactory.register(id_MicrosoftCertTemplateV2,"MicrosoftCertTemplateV2",CertificateTemplate);ExtensionValueFactory.register(id_CRLDistributionPoints,"CRLDistributionPoints",CRLDistributionPoints$1);ExtensionValueFactory.register(id_FreshestCRL,"FreshestCRL",CRLDistributionPoints$1);ExtensionValueFactory.register(id_ExtKeyUsage,"ExtKeyUsage",ExtKeyUsage);ExtensionValueFactory.register(id_CertificateIssuer,"CertificateIssuer",GeneralNames$2);ExtensionValueFactory.register(id_AuthorityInfoAccess,"AuthorityInfoAccess",InfoAccess);ExtensionValueFactory.register(id_SubjectInfoAccess,"SubjectInfoAccess",InfoAccess);ExtensionValueFactory.register(id_IssuingDistributionPoint,"IssuingDistributionPoint",IssuingDistributionPoint$1);ExtensionValueFactory.register(id_NameConstraints,"NameConstraints",NameConstraints$1);ExtensionValueFactory.register(id_PolicyConstraints,"PolicyConstraints",PolicyConstraints$1);ExtensionValueFactory.register(id_PolicyMappings,"PolicyMappings",PolicyMappings$1);ExtensionValueFactory.register(id_PrivateKeyUsagePeriod,"PrivateKeyUsagePeriod",PrivateKeyUsagePeriod$1);ExtensionValueFactory.register(id_QCStatements,"QCStatements",QCStatements);ExtensionValueFactory.register(id_SignedCertificateTimestampList,"SignedCertificateTimestampList",SignedCertificateTimestampList);ExtensionValueFactory.register(id_SubjectDirectoryAttributes,"SubjectDirectoryAttributes",SubjectDirectoryAttributes$1)}return this.types}static fromBER(e,t){const r=fromBER(t);if(r.offset===-1){return null}const n=this.find(e);if(n){try{return new n.type({schema:r.result})}catch(t){const r=new n.type;r.parsingError=`Incorrectly formatted value of extension ${n.name} (${e})`;return r}}return r.result}static find(e){const t=this.getItems();return t[e]||null}static register(e,t,r){this.getItems()[e]={name:t,type:r}}}const EXTN_ID="extnID";const CRITICAL="critical";const EXTN_VALUE="extnValue";const PARSED_VALUE$5="parsedValue";const CLEAR_PROPS$10=[EXTN_ID,CRITICAL,EXTN_VALUE];class Extension$2 extends PkiObject{constructor(e={}){super();this.extnID=getParametersValue(e,EXTN_ID,Extension$2.defaultValues(EXTN_ID));this.critical=getParametersValue(e,CRITICAL,Extension$2.defaultValues(CRITICAL));if(EXTN_VALUE in e){this.extnValue=new OctetString$1({valueHex:e.extnValue})}else{this.extnValue=Extension$2.defaultValues(EXTN_VALUE)}if(PARSED_VALUE$5 in e){this.parsedValue=getParametersValue(e,PARSED_VALUE$5,Extension$2.defaultValues(PARSED_VALUE$5))}if(e.schema){this.fromSchema(e.schema)}}get parsedValue(){if(this._parsedValue===undefined){const e=ExtensionValueFactory.fromBER(this.extnID,this.extnValue.valueBlock.valueHexView);this._parsedValue=e}return this._parsedValue||undefined}set parsedValue(e){this._parsedValue=e}static defaultValues(e){switch(e){case EXTN_ID:return EMPTY_STRING;case CRITICAL:return false;case EXTN_VALUE:return new OctetString$1;case PARSED_VALUE$5:return{};default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new ObjectIdentifier$1({name:t.extnID||EMPTY_STRING}),new Boolean$1({name:t.critical||EMPTY_STRING,optional:true}),new OctetString$1({name:t.extnValue||EMPTY_STRING})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$10);const t=compareSchema(e,e,Extension$2.schema({names:{extnID:EXTN_ID,critical:CRITICAL,extnValue:EXTN_VALUE}}));AsnError.assertSchema(t,this.className);this.extnID=t.result.extnID.valueBlock.toString();if(CRITICAL in t.result){this.critical=t.result.critical.valueBlock.value}this.extnValue=t.result.extnValue}toSchema(){const e=[];e.push(new ObjectIdentifier$1({value:this.extnID}));if(this.critical!==Extension$2.defaultValues(CRITICAL)){e.push(new Boolean$1({value:this.critical}))}e.push(this.extnValue);return new Sequence({value:e})}toJSON(){const e={extnID:this.extnID,extnValue:this.extnValue.toJSON()};if(this.critical!==Extension$2.defaultValues(CRITICAL)){e.critical=this.critical}if(this.parsedValue&&this.parsedValue.toJSON){e.parsedValue=this.parsedValue.toJSON()}return e}}Extension$2.CLASS_NAME="Extension";const EXTENSIONS$5="extensions";const CLEAR_PROPS$$=[EXTENSIONS$5];class Extensions$1 extends PkiObject{constructor(e={}){super();this.extensions=getParametersValue(e,EXTENSIONS$5,Extensions$1.defaultValues(EXTENSIONS$5));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case EXTENSIONS$5:return[];default:return super.defaultValues(e)}}static schema(e={},t=false){const r=getParametersValue(e,"names",{});return new Sequence({optional:t,name:r.blockName||EMPTY_STRING,value:[new Repeated({name:r.extensions||EMPTY_STRING,value:Extension$2.schema(r.extension||{})})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$$);const t=compareSchema(e,e,Extensions$1.schema({names:{extensions:EXTENSIONS$5}}));AsnError.assertSchema(t,this.className);this.extensions=Array.from(t.result.extensions,(e=>new Extension$2({schema:e})))}toSchema(){return new Sequence({value:Array.from(this.extensions,(e=>e.toSchema()))})}toJSON(){return{extensions:this.extensions.map((e=>e.toJSON()))}}}Extensions$1.CLASS_NAME="Extensions";const ISSUER$5="issuer";const SERIAL_NUMBER$6="serialNumber";const ISSUER_UID="issuerUID";const CLEAR_PROPS$_=[ISSUER$5,SERIAL_NUMBER$6,ISSUER_UID];class IssuerSerial$1 extends PkiObject{constructor(e={}){super();this.issuer=getParametersValue(e,ISSUER$5,IssuerSerial$1.defaultValues(ISSUER$5));this.serialNumber=getParametersValue(e,SERIAL_NUMBER$6,IssuerSerial$1.defaultValues(SERIAL_NUMBER$6));if(ISSUER_UID in e){this.issuerUID=getParametersValue(e,ISSUER_UID,IssuerSerial$1.defaultValues(ISSUER_UID))}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case ISSUER$5:return new GeneralNames$2;case SERIAL_NUMBER$6:return new Integer;case ISSUER_UID:return new BitString$1;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[GeneralNames$2.schema(t.issuer||{}),new Integer({name:t.serialNumber||EMPTY_STRING}),new BitString$1({optional:true,name:t.issuerUID||EMPTY_STRING})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$_);const t=compareSchema(e,e,IssuerSerial$1.schema({names:{issuer:{names:{blockName:ISSUER$5}},serialNumber:SERIAL_NUMBER$6,issuerUID:ISSUER_UID}}));AsnError.assertSchema(t,this.className);this.issuer=new GeneralNames$2({schema:t.result.issuer});this.serialNumber=t.result.serialNumber;if(ISSUER_UID in t.result)this.issuerUID=t.result.issuerUID}toSchema(){const e=new Sequence({value:[this.issuer.toSchema(),this.serialNumber]});if(this.issuerUID){e.valueBlock.value.push(this.issuerUID)}return e}toJSON(){const e={issuer:this.issuer.toJSON(),serialNumber:this.serialNumber.toJSON()};if(this.issuerUID){e.issuerUID=this.issuerUID.toJSON()}return e}}IssuerSerial$1.CLASS_NAME="IssuerSerial";const VERSION$h="version";const BASE_CERTIFICATE_ID$2="baseCertificateID";const SUBJECT_NAME="subjectName";const ISSUER$4="issuer";const SIGNATURE$6="signature";const SERIAL_NUMBER$5="serialNumber";const ATTR_CERT_VALIDITY_PERIOD$1="attrCertValidityPeriod";const ATTRIBUTES$3="attributes";const ISSUER_UNIQUE_ID$2="issuerUniqueID";const EXTENSIONS$4="extensions";const CLEAR_PROPS$Z=[VERSION$h,BASE_CERTIFICATE_ID$2,SUBJECT_NAME,ISSUER$4,SIGNATURE$6,SERIAL_NUMBER$5,ATTR_CERT_VALIDITY_PERIOD$1,ATTRIBUTES$3,ISSUER_UNIQUE_ID$2,EXTENSIONS$4];class AttributeCertificateInfoV1 extends PkiObject{constructor(e={}){super();this.version=getParametersValue(e,VERSION$h,AttributeCertificateInfoV1.defaultValues(VERSION$h));if(BASE_CERTIFICATE_ID$2 in e){this.baseCertificateID=getParametersValue(e,BASE_CERTIFICATE_ID$2,AttributeCertificateInfoV1.defaultValues(BASE_CERTIFICATE_ID$2))}if(SUBJECT_NAME in e){this.subjectName=getParametersValue(e,SUBJECT_NAME,AttributeCertificateInfoV1.defaultValues(SUBJECT_NAME))}this.issuer=getParametersValue(e,ISSUER$4,AttributeCertificateInfoV1.defaultValues(ISSUER$4));this.signature=getParametersValue(e,SIGNATURE$6,AttributeCertificateInfoV1.defaultValues(SIGNATURE$6));this.serialNumber=getParametersValue(e,SERIAL_NUMBER$5,AttributeCertificateInfoV1.defaultValues(SERIAL_NUMBER$5));this.attrCertValidityPeriod=getParametersValue(e,ATTR_CERT_VALIDITY_PERIOD$1,AttributeCertificateInfoV1.defaultValues(ATTR_CERT_VALIDITY_PERIOD$1));this.attributes=getParametersValue(e,ATTRIBUTES$3,AttributeCertificateInfoV1.defaultValues(ATTRIBUTES$3));if(ISSUER_UNIQUE_ID$2 in e)this.issuerUniqueID=getParametersValue(e,ISSUER_UNIQUE_ID$2,AttributeCertificateInfoV1.defaultValues(ISSUER_UNIQUE_ID$2));if(EXTENSIONS$4 in e){this.extensions=getParametersValue(e,EXTENSIONS$4,AttributeCertificateInfoV1.defaultValues(EXTENSIONS$4))}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case VERSION$h:return 0;case BASE_CERTIFICATE_ID$2:return new IssuerSerial$1;case SUBJECT_NAME:return new GeneralNames$2;case ISSUER$4:return new GeneralNames$2;case SIGNATURE$6:return new AlgorithmIdentifier$2;case SERIAL_NUMBER$5:return new Integer;case ATTR_CERT_VALIDITY_PERIOD$1:return new AttCertValidityPeriod$1;case ATTRIBUTES$3:return[];case ISSUER_UNIQUE_ID$2:return new BitString$1;case EXTENSIONS$4:return new Extensions$1;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Integer({name:t.version||EMPTY_STRING}),new Choice({value:[new Constructed({name:t.baseCertificateID||EMPTY_STRING,idBlock:{tagClass:3,tagNumber:0},value:IssuerSerial$1.schema().valueBlock.value}),new Constructed({name:t.subjectName||EMPTY_STRING,idBlock:{tagClass:3,tagNumber:1},value:GeneralNames$2.schema().valueBlock.value})]}),GeneralNames$2.schema({names:{blockName:t.issuer||EMPTY_STRING}}),AlgorithmIdentifier$2.schema(t.signature||{}),new Integer({name:t.serialNumber||EMPTY_STRING}),AttCertValidityPeriod$1.schema(t.attrCertValidityPeriod||{}),new Sequence({name:t.attributes||EMPTY_STRING,value:[new Repeated({value:Attribute$3.schema()})]}),new BitString$1({optional:true,name:t.issuerUniqueID||EMPTY_STRING}),Extensions$1.schema(t.extensions||{},true)]})}fromSchema(e){clearProps(e,CLEAR_PROPS$Z);const t=compareSchema(e,e,AttributeCertificateInfoV1.schema({names:{version:VERSION$h,baseCertificateID:BASE_CERTIFICATE_ID$2,subjectName:SUBJECT_NAME,issuer:ISSUER$4,signature:{names:{blockName:SIGNATURE$6}},serialNumber:SERIAL_NUMBER$5,attrCertValidityPeriod:{names:{blockName:ATTR_CERT_VALIDITY_PERIOD$1}},attributes:ATTRIBUTES$3,issuerUniqueID:ISSUER_UNIQUE_ID$2,extensions:{names:{blockName:EXTENSIONS$4}}}}));AsnError.assertSchema(t,this.className);this.version=t.result.version.valueBlock.valueDec;if(BASE_CERTIFICATE_ID$2 in t.result){this.baseCertificateID=new IssuerSerial$1({schema:new Sequence({value:t.result.baseCertificateID.valueBlock.value})})}if(SUBJECT_NAME in t.result){this.subjectName=new GeneralNames$2({schema:new Sequence({value:t.result.subjectName.valueBlock.value})})}this.issuer=t.result.issuer;this.signature=new AlgorithmIdentifier$2({schema:t.result.signature});this.serialNumber=t.result.serialNumber;this.attrCertValidityPeriod=new AttCertValidityPeriod$1({schema:t.result.attrCertValidityPeriod});this.attributes=Array.from(t.result.attributes.valueBlock.value,(e=>new Attribute$3({schema:e})));if(ISSUER_UNIQUE_ID$2 in t.result){this.issuerUniqueID=t.result.issuerUniqueID}if(EXTENSIONS$4 in t.result){this.extensions=new Extensions$1({schema:t.result.extensions})}}toSchema(){const e=new Sequence({value:[new Integer({value:this.version})]});if(this.baseCertificateID){e.valueBlock.value.push(new Constructed({idBlock:{tagClass:3,tagNumber:0},value:this.baseCertificateID.toSchema().valueBlock.value}))}if(this.subjectName){e.valueBlock.value.push(new Constructed({idBlock:{tagClass:3,tagNumber:1},value:this.subjectName.toSchema().valueBlock.value}))}e.valueBlock.value.push(this.issuer.toSchema());e.valueBlock.value.push(this.signature.toSchema());e.valueBlock.value.push(this.serialNumber);e.valueBlock.value.push(this.attrCertValidityPeriod.toSchema());e.valueBlock.value.push(new Sequence({value:Array.from(this.attributes,(e=>e.toSchema()))}));if(this.issuerUniqueID){e.valueBlock.value.push(this.issuerUniqueID)}if(this.extensions){e.valueBlock.value.push(this.extensions.toSchema())}return e}toJSON(){const e={version:this.version};if(this.baseCertificateID){e.baseCertificateID=this.baseCertificateID.toJSON()}if(this.subjectName){e.subjectName=this.subjectName.toJSON()}e.issuer=this.issuer.toJSON();e.signature=this.signature.toJSON();e.serialNumber=this.serialNumber.toJSON();e.attrCertValidityPeriod=this.attrCertValidityPeriod.toJSON();e.attributes=Array.from(this.attributes,(e=>e.toJSON()));if(this.issuerUniqueID){e.issuerUniqueID=this.issuerUniqueID.toJSON()}if(this.extensions){e.extensions=this.extensions.toJSON()}return e}}AttributeCertificateInfoV1.CLASS_NAME="AttributeCertificateInfoV1";const ACINFO$1="acinfo";const SIGNATURE_ALGORITHM$7="signatureAlgorithm";const SIGNATURE_VALUE$4="signatureValue";const CLEAR_PROPS$Y=[ACINFO$1,SIGNATURE_VALUE$4,SIGNATURE_ALGORITHM$7];class AttributeCertificateV1 extends PkiObject{constructor(e={}){super();this.acinfo=getParametersValue(e,ACINFO$1,AttributeCertificateV1.defaultValues(ACINFO$1));this.signatureAlgorithm=getParametersValue(e,SIGNATURE_ALGORITHM$7,AttributeCertificateV1.defaultValues(SIGNATURE_ALGORITHM$7));this.signatureValue=getParametersValue(e,SIGNATURE_VALUE$4,AttributeCertificateV1.defaultValues(SIGNATURE_VALUE$4));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case ACINFO$1:return new AttributeCertificateInfoV1;case SIGNATURE_ALGORITHM$7:return new AlgorithmIdentifier$2;case SIGNATURE_VALUE$4:return new BitString$1;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[AttributeCertificateInfoV1.schema(t.acinfo||{}),AlgorithmIdentifier$2.schema(t.signatureAlgorithm||{}),new BitString$1({name:t.signatureValue||EMPTY_STRING})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$Y);const t=compareSchema(e,e,AttributeCertificateV1.schema({names:{acinfo:{names:{blockName:ACINFO$1}},signatureAlgorithm:{names:{blockName:SIGNATURE_ALGORITHM$7}},signatureValue:SIGNATURE_VALUE$4}}));AsnError.assertSchema(t,this.className);this.acinfo=new AttributeCertificateInfoV1({schema:t.result.acinfo});this.signatureAlgorithm=new AlgorithmIdentifier$2({schema:t.result.signatureAlgorithm});this.signatureValue=t.result.signatureValue}toSchema(){return new Sequence({value:[this.acinfo.toSchema(),this.signatureAlgorithm.toSchema(),this.signatureValue]})}toJSON(){return{acinfo:this.acinfo.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()}}}AttributeCertificateV1.CLASS_NAME="AttributeCertificateV1";const DIGESTED_OBJECT_TYPE="digestedObjectType";const OTHER_OBJECT_TYPE_ID="otherObjectTypeID";const DIGEST_ALGORITHM$2="digestAlgorithm";const OBJECT_DIGEST="objectDigest";const CLEAR_PROPS$X=[DIGESTED_OBJECT_TYPE,OTHER_OBJECT_TYPE_ID,DIGEST_ALGORITHM$2,OBJECT_DIGEST];class ObjectDigestInfo$1 extends PkiObject{constructor(e={}){super();this.digestedObjectType=getParametersValue(e,DIGESTED_OBJECT_TYPE,ObjectDigestInfo$1.defaultValues(DIGESTED_OBJECT_TYPE));if(OTHER_OBJECT_TYPE_ID in e){this.otherObjectTypeID=getParametersValue(e,OTHER_OBJECT_TYPE_ID,ObjectDigestInfo$1.defaultValues(OTHER_OBJECT_TYPE_ID))}this.digestAlgorithm=getParametersValue(e,DIGEST_ALGORITHM$2,ObjectDigestInfo$1.defaultValues(DIGEST_ALGORITHM$2));this.objectDigest=getParametersValue(e,OBJECT_DIGEST,ObjectDigestInfo$1.defaultValues(OBJECT_DIGEST));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case DIGESTED_OBJECT_TYPE:return new Enumerated;case OTHER_OBJECT_TYPE_ID:return new ObjectIdentifier$1;case DIGEST_ALGORITHM$2:return new AlgorithmIdentifier$2;case OBJECT_DIGEST:return new BitString$1;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Enumerated({name:t.digestedObjectType||EMPTY_STRING}),new ObjectIdentifier$1({optional:true,name:t.otherObjectTypeID||EMPTY_STRING}),AlgorithmIdentifier$2.schema(t.digestAlgorithm||{}),new BitString$1({name:t.objectDigest||EMPTY_STRING})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$X);const t=compareSchema(e,e,ObjectDigestInfo$1.schema({names:{digestedObjectType:DIGESTED_OBJECT_TYPE,otherObjectTypeID:OTHER_OBJECT_TYPE_ID,digestAlgorithm:{names:{blockName:DIGEST_ALGORITHM$2}},objectDigest:OBJECT_DIGEST}}));AsnError.assertSchema(t,this.className);this.digestedObjectType=t.result.digestedObjectType;if(OTHER_OBJECT_TYPE_ID in t.result){this.otherObjectTypeID=t.result.otherObjectTypeID}this.digestAlgorithm=new AlgorithmIdentifier$2({schema:t.result.digestAlgorithm});this.objectDigest=t.result.objectDigest}toSchema(){const e=new Sequence({value:[this.digestedObjectType]});if(this.otherObjectTypeID){e.valueBlock.value.push(this.otherObjectTypeID)}e.valueBlock.value.push(this.digestAlgorithm.toSchema());e.valueBlock.value.push(this.objectDigest);return e}toJSON(){const e={digestedObjectType:this.digestedObjectType.toJSON(),digestAlgorithm:this.digestAlgorithm.toJSON(),objectDigest:this.objectDigest.toJSON()};if(this.otherObjectTypeID){e.otherObjectTypeID=this.otherObjectTypeID.toJSON()}return e}}ObjectDigestInfo$1.CLASS_NAME="ObjectDigestInfo";const ISSUER_NAME="issuerName";const BASE_CERTIFICATE_ID$1="baseCertificateID";const OBJECT_DIGEST_INFO$1="objectDigestInfo";const CLEAR_PROPS$W=[ISSUER_NAME,BASE_CERTIFICATE_ID$1,OBJECT_DIGEST_INFO$1];class V2Form$1 extends PkiObject{constructor(e={}){super();if(ISSUER_NAME in e){this.issuerName=getParametersValue(e,ISSUER_NAME,V2Form$1.defaultValues(ISSUER_NAME))}if(BASE_CERTIFICATE_ID$1 in e){this.baseCertificateID=getParametersValue(e,BASE_CERTIFICATE_ID$1,V2Form$1.defaultValues(BASE_CERTIFICATE_ID$1))}if(OBJECT_DIGEST_INFO$1 in e){this.objectDigestInfo=getParametersValue(e,OBJECT_DIGEST_INFO$1,V2Form$1.defaultValues(OBJECT_DIGEST_INFO$1))}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case ISSUER_NAME:return new GeneralNames$2;case BASE_CERTIFICATE_ID$1:return new IssuerSerial$1;case OBJECT_DIGEST_INFO$1:return new ObjectDigestInfo$1;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[GeneralNames$2.schema({names:{blockName:t.issuerName}},true),new Constructed({optional:true,name:t.baseCertificateID||EMPTY_STRING,idBlock:{tagClass:3,tagNumber:0},value:IssuerSerial$1.schema().valueBlock.value}),new Constructed({optional:true,name:t.objectDigestInfo||EMPTY_STRING,idBlock:{tagClass:3,tagNumber:1},value:ObjectDigestInfo$1.schema().valueBlock.value})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$W);const t=compareSchema(e,e,V2Form$1.schema({names:{issuerName:ISSUER_NAME,baseCertificateID:BASE_CERTIFICATE_ID$1,objectDigestInfo:OBJECT_DIGEST_INFO$1}}));AsnError.assertSchema(t,this.className);if(ISSUER_NAME in t.result)this.issuerName=new GeneralNames$2({schema:t.result.issuerName});if(BASE_CERTIFICATE_ID$1 in t.result){this.baseCertificateID=new IssuerSerial$1({schema:new Sequence({value:t.result.baseCertificateID.valueBlock.value})})}if(OBJECT_DIGEST_INFO$1 in t.result){this.objectDigestInfo=new ObjectDigestInfo$1({schema:new Sequence({value:t.result.objectDigestInfo.valueBlock.value})})}}toSchema(){const e=new Sequence;if(this.issuerName)e.valueBlock.value.push(this.issuerName.toSchema());if(this.baseCertificateID){e.valueBlock.value.push(new Constructed({idBlock:{tagClass:3,tagNumber:0},value:this.baseCertificateID.toSchema().valueBlock.value}))}if(this.objectDigestInfo){e.valueBlock.value.push(new Constructed({idBlock:{tagClass:3,tagNumber:1},value:this.objectDigestInfo.toSchema().valueBlock.value}))}return e}toJSON(){const e={};if(this.issuerName){e.issuerName=this.issuerName.toJSON()}if(this.baseCertificateID){e.baseCertificateID=this.baseCertificateID.toJSON()}if(this.objectDigestInfo){e.objectDigestInfo=this.objectDigestInfo.toJSON()}return e}}V2Form$1.CLASS_NAME="V2Form";const BASE_CERTIFICATE_ID="baseCertificateID";const ENTITY_NAME="entityName";const OBJECT_DIGEST_INFO="objectDigestInfo";const CLEAR_PROPS$V=[BASE_CERTIFICATE_ID,ENTITY_NAME,OBJECT_DIGEST_INFO];class Holder$1 extends PkiObject{constructor(e={}){super();if(BASE_CERTIFICATE_ID in e){this.baseCertificateID=getParametersValue(e,BASE_CERTIFICATE_ID,Holder$1.defaultValues(BASE_CERTIFICATE_ID))}if(ENTITY_NAME in e){this.entityName=getParametersValue(e,ENTITY_NAME,Holder$1.defaultValues(ENTITY_NAME))}if(OBJECT_DIGEST_INFO in e){this.objectDigestInfo=getParametersValue(e,OBJECT_DIGEST_INFO,Holder$1.defaultValues(OBJECT_DIGEST_INFO))}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case BASE_CERTIFICATE_ID:return new IssuerSerial$1;case ENTITY_NAME:return new GeneralNames$2;case OBJECT_DIGEST_INFO:return new ObjectDigestInfo$1;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Constructed({optional:true,name:t.baseCertificateID||EMPTY_STRING,idBlock:{tagClass:3,tagNumber:0},value:IssuerSerial$1.schema().valueBlock.value}),new Constructed({optional:true,name:t.entityName||EMPTY_STRING,idBlock:{tagClass:3,tagNumber:1},value:GeneralNames$2.schema().valueBlock.value}),new Constructed({optional:true,name:t.objectDigestInfo||EMPTY_STRING,idBlock:{tagClass:3,tagNumber:2},value:ObjectDigestInfo$1.schema().valueBlock.value})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$V);const t=compareSchema(e,e,Holder$1.schema({names:{baseCertificateID:BASE_CERTIFICATE_ID,entityName:ENTITY_NAME,objectDigestInfo:OBJECT_DIGEST_INFO}}));AsnError.assertSchema(t,this.className);if(BASE_CERTIFICATE_ID in t.result){this.baseCertificateID=new IssuerSerial$1({schema:new Sequence({value:t.result.baseCertificateID.valueBlock.value})})}if(ENTITY_NAME in t.result){this.entityName=new GeneralNames$2({schema:new Sequence({value:t.result.entityName.valueBlock.value})})}if(OBJECT_DIGEST_INFO in t.result){this.objectDigestInfo=new ObjectDigestInfo$1({schema:new Sequence({value:t.result.objectDigestInfo.valueBlock.value})})}}toSchema(){const e=new Sequence;if(this.baseCertificateID){e.valueBlock.value.push(new Constructed({idBlock:{tagClass:3,tagNumber:0},value:this.baseCertificateID.toSchema().valueBlock.value}))}if(this.entityName){e.valueBlock.value.push(new Constructed({idBlock:{tagClass:3,tagNumber:1},value:this.entityName.toSchema().valueBlock.value}))}if(this.objectDigestInfo){e.valueBlock.value.push(new Constructed({idBlock:{tagClass:3,tagNumber:2},value:this.objectDigestInfo.toSchema().valueBlock.value}))}return e}toJSON(){const e={};if(this.baseCertificateID){e.baseCertificateID=this.baseCertificateID.toJSON()}if(this.entityName){e.entityName=this.entityName.toJSON()}if(this.objectDigestInfo){e.objectDigestInfo=this.objectDigestInfo.toJSON()}return e}}Holder$1.CLASS_NAME="Holder";const VERSION$g="version";const HOLDER="holder";const ISSUER$3="issuer";const SIGNATURE$5="signature";const SERIAL_NUMBER$4="serialNumber";const ATTR_CERT_VALIDITY_PERIOD="attrCertValidityPeriod";const ATTRIBUTES$2="attributes";const ISSUER_UNIQUE_ID$1="issuerUniqueID";const EXTENSIONS$3="extensions";const CLEAR_PROPS$U=[VERSION$g,HOLDER,ISSUER$3,SIGNATURE$5,SERIAL_NUMBER$4,ATTR_CERT_VALIDITY_PERIOD,ATTRIBUTES$2,ISSUER_UNIQUE_ID$1,EXTENSIONS$3];class AttributeCertificateInfoV2 extends PkiObject{constructor(e={}){super();this.version=getParametersValue(e,VERSION$g,AttributeCertificateInfoV2.defaultValues(VERSION$g));this.holder=getParametersValue(e,HOLDER,AttributeCertificateInfoV2.defaultValues(HOLDER));this.issuer=getParametersValue(e,ISSUER$3,AttributeCertificateInfoV2.defaultValues(ISSUER$3));this.signature=getParametersValue(e,SIGNATURE$5,AttributeCertificateInfoV2.defaultValues(SIGNATURE$5));this.serialNumber=getParametersValue(e,SERIAL_NUMBER$4,AttributeCertificateInfoV2.defaultValues(SERIAL_NUMBER$4));this.attrCertValidityPeriod=getParametersValue(e,ATTR_CERT_VALIDITY_PERIOD,AttributeCertificateInfoV2.defaultValues(ATTR_CERT_VALIDITY_PERIOD));this.attributes=getParametersValue(e,ATTRIBUTES$2,AttributeCertificateInfoV2.defaultValues(ATTRIBUTES$2));if(ISSUER_UNIQUE_ID$1 in e){this.issuerUniqueID=getParametersValue(e,ISSUER_UNIQUE_ID$1,AttributeCertificateInfoV2.defaultValues(ISSUER_UNIQUE_ID$1))}if(EXTENSIONS$3 in e){this.extensions=getParametersValue(e,EXTENSIONS$3,AttributeCertificateInfoV2.defaultValues(EXTENSIONS$3))}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case VERSION$g:return 1;case HOLDER:return new Holder$1;case ISSUER$3:return{};case SIGNATURE$5:return new AlgorithmIdentifier$2;case SERIAL_NUMBER$4:return new Integer;case ATTR_CERT_VALIDITY_PERIOD:return new AttCertValidityPeriod$1;case ATTRIBUTES$2:return[];case ISSUER_UNIQUE_ID$1:return new BitString$1;case EXTENSIONS$3:return new Extensions$1;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Integer({name:t.version||EMPTY_STRING}),Holder$1.schema(t.holder||{}),new Choice({value:[GeneralNames$2.schema({names:{blockName:t.issuer||EMPTY_STRING}}),new Constructed({name:t.issuer||EMPTY_STRING,idBlock:{tagClass:3,tagNumber:0},value:V2Form$1.schema().valueBlock.value})]}),AlgorithmIdentifier$2.schema(t.signature||{}),new Integer({name:t.serialNumber||EMPTY_STRING}),AttCertValidityPeriod$1.schema(t.attrCertValidityPeriod||{}),new Sequence({name:t.attributes||EMPTY_STRING,value:[new Repeated({value:Attribute$3.schema()})]}),new BitString$1({optional:true,name:t.issuerUniqueID||EMPTY_STRING}),Extensions$1.schema(t.extensions||{},true)]})}fromSchema(e){clearProps(e,CLEAR_PROPS$U);const t=compareSchema(e,e,AttributeCertificateInfoV2.schema({names:{version:VERSION$g,holder:{names:{blockName:HOLDER}},issuer:ISSUER$3,signature:{names:{blockName:SIGNATURE$5}},serialNumber:SERIAL_NUMBER$4,attrCertValidityPeriod:{names:{blockName:ATTR_CERT_VALIDITY_PERIOD}},attributes:ATTRIBUTES$2,issuerUniqueID:ISSUER_UNIQUE_ID$1,extensions:{names:{blockName:EXTENSIONS$3}}}}));AsnError.assertSchema(t,this.className);this.version=t.result.version.valueBlock.valueDec;this.holder=new Holder$1({schema:t.result.holder});switch(t.result.issuer.idBlock.tagClass){case 3:this.issuer=new V2Form$1({schema:new Sequence({value:t.result.issuer.valueBlock.value})});break;case 1:default:throw new Error("Incorrect value for 'issuer' in AttributeCertificateInfoV2")}this.signature=new AlgorithmIdentifier$2({schema:t.result.signature});this.serialNumber=t.result.serialNumber;this.attrCertValidityPeriod=new AttCertValidityPeriod$1({schema:t.result.attrCertValidityPeriod});this.attributes=Array.from(t.result.attributes.valueBlock.value,(e=>new Attribute$3({schema:e})));if(ISSUER_UNIQUE_ID$1 in t.result){this.issuerUniqueID=t.result.issuerUniqueID}if(EXTENSIONS$3 in t.result){this.extensions=new Extensions$1({schema:t.result.extensions})}}toSchema(){const e=new Sequence({value:[new Integer({value:this.version}),this.holder.toSchema(),new Constructed({idBlock:{tagClass:3,tagNumber:0},value:this.issuer.toSchema().valueBlock.value}),this.signature.toSchema(),this.serialNumber,this.attrCertValidityPeriod.toSchema(),new Sequence({value:Array.from(this.attributes,(e=>e.toSchema()))})]});if(this.issuerUniqueID){e.valueBlock.value.push(this.issuerUniqueID)}if(this.extensions){e.valueBlock.value.push(this.extensions.toSchema())}return e}toJSON(){const e={version:this.version,holder:this.holder.toJSON(),issuer:this.issuer.toJSON(),signature:this.signature.toJSON(),serialNumber:this.serialNumber.toJSON(),attrCertValidityPeriod:this.attrCertValidityPeriod.toJSON(),attributes:Array.from(this.attributes,(e=>e.toJSON()))};if(this.issuerUniqueID){e.issuerUniqueID=this.issuerUniqueID.toJSON()}if(this.extensions){e.extensions=this.extensions.toJSON()}return e}}AttributeCertificateInfoV2.CLASS_NAME="AttributeCertificateInfoV2";const ACINFO="acinfo";const SIGNATURE_ALGORITHM$6="signatureAlgorithm";const SIGNATURE_VALUE$3="signatureValue";const CLEAR_PROPS$T=[ACINFO,SIGNATURE_ALGORITHM$6,SIGNATURE_VALUE$3];class AttributeCertificateV2 extends PkiObject{constructor(e={}){super();this.acinfo=getParametersValue(e,ACINFO,AttributeCertificateV2.defaultValues(ACINFO));this.signatureAlgorithm=getParametersValue(e,SIGNATURE_ALGORITHM$6,AttributeCertificateV2.defaultValues(SIGNATURE_ALGORITHM$6));this.signatureValue=getParametersValue(e,SIGNATURE_VALUE$3,AttributeCertificateV2.defaultValues(SIGNATURE_VALUE$3));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case ACINFO:return new AttributeCertificateInfoV2;case SIGNATURE_ALGORITHM$6:return new AlgorithmIdentifier$2;case SIGNATURE_VALUE$3:return new BitString$1;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[AttributeCertificateInfoV2.schema(t.acinfo||{}),AlgorithmIdentifier$2.schema(t.signatureAlgorithm||{}),new BitString$1({name:t.signatureValue||EMPTY_STRING})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$T);const t=compareSchema(e,e,AttributeCertificateV2.schema({names:{acinfo:{names:{blockName:ACINFO}},signatureAlgorithm:{names:{blockName:SIGNATURE_ALGORITHM$6}},signatureValue:SIGNATURE_VALUE$3}}));AsnError.assertSchema(t,this.className);this.acinfo=new AttributeCertificateInfoV2({schema:t.result.acinfo});this.signatureAlgorithm=new AlgorithmIdentifier$2({schema:t.result.signatureAlgorithm});this.signatureValue=t.result.signatureValue}toSchema(){return new Sequence({value:[this.acinfo.toSchema(),this.signatureAlgorithm.toSchema(),this.signatureValue]})}toJSON(){return{acinfo:this.acinfo.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()}}}AttributeCertificateV2.CLASS_NAME="AttributeCertificateV2";const CONTENT_TYPE="contentType";const CONTENT="content";const CLEAR_PROPS$S=[CONTENT_TYPE,CONTENT];class ContentInfo$1 extends PkiObject{constructor(e={}){super();this.contentType=getParametersValue(e,CONTENT_TYPE,ContentInfo$1.defaultValues(CONTENT_TYPE));this.content=getParametersValue(e,CONTENT,ContentInfo$1.defaultValues(CONTENT));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case CONTENT_TYPE:return EMPTY_STRING;case CONTENT:return new Any;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case CONTENT_TYPE:return typeof t==="string"&&t===this.defaultValues(CONTENT_TYPE);case CONTENT:return t instanceof Any;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});if("optional"in t===false){t.optional=false}return new Sequence({name:t.blockName||"ContentInfo",optional:t.optional,value:[new ObjectIdentifier$1({name:t.contentType||CONTENT_TYPE}),new Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new Any({name:t.content||CONTENT})]})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$S);const t=compareSchema(e,e,ContentInfo$1.schema());AsnError.assertSchema(t,this.className);this.contentType=t.result.contentType.valueBlock.toString();this.content=t.result.content}toSchema(){return new Sequence({value:[new ObjectIdentifier$1({value:this.contentType}),new Constructed({idBlock:{tagClass:3,tagNumber:0},value:[this.content]})]})}toJSON(){const e={contentType:this.contentType};if(!(this.content instanceof Any)){e.content=this.content.toJSON()}return e}}ContentInfo$1.CLASS_NAME="ContentInfo";ContentInfo$1.DATA=id_ContentType_Data;ContentInfo$1.SIGNED_DATA=id_ContentType_SignedData;ContentInfo$1.ENVELOPED_DATA=id_ContentType_EnvelopedData;ContentInfo$1.ENCRYPTED_DATA=id_ContentType_EncryptedData;const TYPE$1$1="type";const VALUE$4="value";const UTC_TIME_NAME="utcTimeName";const GENERAL_TIME_NAME="generalTimeName";const CLEAR_PROPS$R=[UTC_TIME_NAME,GENERAL_TIME_NAME];var TimeType;(function(e){e[e["UTCTime"]=0]="UTCTime";e[e["GeneralizedTime"]=1]="GeneralizedTime";e[e["empty"]=2]="empty"})(TimeType||(TimeType={}));class Time$1 extends PkiObject{constructor(e={}){super();this.type=getParametersValue(e,TYPE$1$1,Time$1.defaultValues(TYPE$1$1));this.value=getParametersValue(e,VALUE$4,Time$1.defaultValues(VALUE$4));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case TYPE$1$1:return 0;case VALUE$4:return new Date(0,0,0);default:return super.defaultValues(e)}}static schema(e={},t=false){const r=getParametersValue(e,"names",{});return new Choice({optional:t,value:[new UTCTime({name:r.utcTimeName||EMPTY_STRING}),new GeneralizedTime({name:r.generalTimeName||EMPTY_STRING})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$R);const t=compareSchema(e,e,Time$1.schema({names:{utcTimeName:UTC_TIME_NAME,generalTimeName:GENERAL_TIME_NAME}}));AsnError.assertSchema(t,this.className);if(UTC_TIME_NAME in t.result){this.type=0;this.value=t.result.utcTimeName.toDate()}if(GENERAL_TIME_NAME in t.result){this.type=1;this.value=t.result.generalTimeName.toDate()}}toSchema(){if(this.type===0){return new UTCTime({valueDate:this.value})}else if(this.type===1){return new GeneralizedTime({valueDate:this.value})}return{}}toJSON(){return{type:this.type,value:this.value}}}Time$1.CLASS_NAME="Time";const TBS$4="tbs";const VERSION$f="version";const SERIAL_NUMBER$3="serialNumber";const SIGNATURE$4="signature";const ISSUER$2="issuer";const NOT_BEFORE="notBefore";const NOT_AFTER="notAfter";const SUBJECT$1="subject";const SUBJECT_PUBLIC_KEY_INFO="subjectPublicKeyInfo";const ISSUER_UNIQUE_ID="issuerUniqueID";const SUBJECT_UNIQUE_ID="subjectUniqueID";const EXTENSIONS$2="extensions";const SIGNATURE_ALGORITHM$5="signatureAlgorithm";const SIGNATURE_VALUE$2="signatureValue";const TBS_CERTIFICATE="tbsCertificate";const TBS_CERTIFICATE_VERSION=`${TBS_CERTIFICATE}.${VERSION$f}`;const TBS_CERTIFICATE_SERIAL_NUMBER=`${TBS_CERTIFICATE}.${SERIAL_NUMBER$3}`;const TBS_CERTIFICATE_SIGNATURE=`${TBS_CERTIFICATE}.${SIGNATURE$4}`;const TBS_CERTIFICATE_ISSUER=`${TBS_CERTIFICATE}.${ISSUER$2}`;const TBS_CERTIFICATE_NOT_BEFORE=`${TBS_CERTIFICATE}.${NOT_BEFORE}`;const TBS_CERTIFICATE_NOT_AFTER=`${TBS_CERTIFICATE}.${NOT_AFTER}`;const TBS_CERTIFICATE_SUBJECT=`${TBS_CERTIFICATE}.${SUBJECT$1}`;const TBS_CERTIFICATE_SUBJECT_PUBLIC_KEY=`${TBS_CERTIFICATE}.${SUBJECT_PUBLIC_KEY_INFO}`;const TBS_CERTIFICATE_ISSUER_UNIQUE_ID=`${TBS_CERTIFICATE}.${ISSUER_UNIQUE_ID}`;const TBS_CERTIFICATE_SUBJECT_UNIQUE_ID=`${TBS_CERTIFICATE}.${SUBJECT_UNIQUE_ID}`;const TBS_CERTIFICATE_EXTENSIONS=`${TBS_CERTIFICATE}.${EXTENSIONS$2}`;const CLEAR_PROPS$Q=[TBS_CERTIFICATE,TBS_CERTIFICATE_VERSION,TBS_CERTIFICATE_SERIAL_NUMBER,TBS_CERTIFICATE_SIGNATURE,TBS_CERTIFICATE_ISSUER,TBS_CERTIFICATE_NOT_BEFORE,TBS_CERTIFICATE_NOT_AFTER,TBS_CERTIFICATE_SUBJECT,TBS_CERTIFICATE_SUBJECT_PUBLIC_KEY,TBS_CERTIFICATE_ISSUER_UNIQUE_ID,TBS_CERTIFICATE_SUBJECT_UNIQUE_ID,TBS_CERTIFICATE_EXTENSIONS,SIGNATURE_ALGORITHM$5,SIGNATURE_VALUE$2];function tbsCertificate(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||TBS_CERTIFICATE,value:[new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:0},value:[new Integer({name:t.tbsCertificateVersion||TBS_CERTIFICATE_VERSION})]}),new Integer({name:t.tbsCertificateSerialNumber||TBS_CERTIFICATE_SERIAL_NUMBER}),AlgorithmIdentifier$2.schema(t.signature||{names:{blockName:TBS_CERTIFICATE_SIGNATURE}}),RelativeDistinguishedNames.schema(t.issuer||{names:{blockName:TBS_CERTIFICATE_ISSUER}}),new Sequence({name:t.tbsCertificateValidity||"tbsCertificate.validity",value:[Time$1.schema(t.notBefore||{names:{utcTimeName:TBS_CERTIFICATE_NOT_BEFORE,generalTimeName:TBS_CERTIFICATE_NOT_BEFORE}}),Time$1.schema(t.notAfter||{names:{utcTimeName:TBS_CERTIFICATE_NOT_AFTER,generalTimeName:TBS_CERTIFICATE_NOT_AFTER}})]}),RelativeDistinguishedNames.schema(t.subject||{names:{blockName:TBS_CERTIFICATE_SUBJECT}}),PublicKeyInfo$1.schema(t.subjectPublicKeyInfo||{names:{blockName:TBS_CERTIFICATE_SUBJECT_PUBLIC_KEY}}),new Primitive({name:t.tbsCertificateIssuerUniqueID||TBS_CERTIFICATE_ISSUER_UNIQUE_ID,optional:true,idBlock:{tagClass:3,tagNumber:1}}),new Primitive({name:t.tbsCertificateSubjectUniqueID||TBS_CERTIFICATE_SUBJECT_UNIQUE_ID,optional:true,idBlock:{tagClass:3,tagNumber:2}}),new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:3},value:[Extensions$1.schema(t.extensions||{names:{blockName:TBS_CERTIFICATE_EXTENSIONS}})]})]})}class Certificate$1 extends PkiObject{constructor(e={}){super();this.tbsView=new Uint8Array(getParametersValue(e,TBS$4,Certificate$1.defaultValues(TBS$4)));this.version=getParametersValue(e,VERSION$f,Certificate$1.defaultValues(VERSION$f));this.serialNumber=getParametersValue(e,SERIAL_NUMBER$3,Certificate$1.defaultValues(SERIAL_NUMBER$3));this.signature=getParametersValue(e,SIGNATURE$4,Certificate$1.defaultValues(SIGNATURE$4));this.issuer=getParametersValue(e,ISSUER$2,Certificate$1.defaultValues(ISSUER$2));this.notBefore=getParametersValue(e,NOT_BEFORE,Certificate$1.defaultValues(NOT_BEFORE));this.notAfter=getParametersValue(e,NOT_AFTER,Certificate$1.defaultValues(NOT_AFTER));this.subject=getParametersValue(e,SUBJECT$1,Certificate$1.defaultValues(SUBJECT$1));this.subjectPublicKeyInfo=getParametersValue(e,SUBJECT_PUBLIC_KEY_INFO,Certificate$1.defaultValues(SUBJECT_PUBLIC_KEY_INFO));if(ISSUER_UNIQUE_ID in e){this.issuerUniqueID=getParametersValue(e,ISSUER_UNIQUE_ID,Certificate$1.defaultValues(ISSUER_UNIQUE_ID))}if(SUBJECT_UNIQUE_ID in e){this.subjectUniqueID=getParametersValue(e,SUBJECT_UNIQUE_ID,Certificate$1.defaultValues(SUBJECT_UNIQUE_ID))}if(EXTENSIONS$2 in e){this.extensions=getParametersValue(e,EXTENSIONS$2,Certificate$1.defaultValues(EXTENSIONS$2))}this.signatureAlgorithm=getParametersValue(e,SIGNATURE_ALGORITHM$5,Certificate$1.defaultValues(SIGNATURE_ALGORITHM$5));this.signatureValue=getParametersValue(e,SIGNATURE_VALUE$2,Certificate$1.defaultValues(SIGNATURE_VALUE$2));if(e.schema){this.fromSchema(e.schema)}}get tbs(){return BufferSourceConverter_1.toArrayBuffer(this.tbsView)}set tbs(e){this.tbsView=new Uint8Array(e)}static defaultValues(e){switch(e){case TBS$4:return EMPTY_BUFFER;case VERSION$f:return 0;case SERIAL_NUMBER$3:return new Integer;case SIGNATURE$4:return new AlgorithmIdentifier$2;case ISSUER$2:return new RelativeDistinguishedNames;case NOT_BEFORE:return new Time$1;case NOT_AFTER:return new Time$1;case SUBJECT$1:return new RelativeDistinguishedNames;case SUBJECT_PUBLIC_KEY_INFO:return new PublicKeyInfo$1;case ISSUER_UNIQUE_ID:return EMPTY_BUFFER;case SUBJECT_UNIQUE_ID:return EMPTY_BUFFER;case EXTENSIONS$2:return[];case SIGNATURE_ALGORITHM$5:return new AlgorithmIdentifier$2;case SIGNATURE_VALUE$2:return new BitString$1;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[tbsCertificate(t.tbsCertificate),AlgorithmIdentifier$2.schema(t.signatureAlgorithm||{names:{blockName:SIGNATURE_ALGORITHM$5}}),new BitString$1({name:t.signatureValue||SIGNATURE_VALUE$2})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$Q);const t=compareSchema(e,e,Certificate$1.schema({names:{tbsCertificate:{names:{extensions:{names:{extensions:TBS_CERTIFICATE_EXTENSIONS}}}}}}));AsnError.assertSchema(t,this.className);this.tbsView=t.result.tbsCertificate.valueBeforeDecodeView;if(TBS_CERTIFICATE_VERSION in t.result)this.version=t.result[TBS_CERTIFICATE_VERSION].valueBlock.valueDec;this.serialNumber=t.result[TBS_CERTIFICATE_SERIAL_NUMBER];this.signature=new AlgorithmIdentifier$2({schema:t.result[TBS_CERTIFICATE_SIGNATURE]});this.issuer=new RelativeDistinguishedNames({schema:t.result[TBS_CERTIFICATE_ISSUER]});this.notBefore=new Time$1({schema:t.result[TBS_CERTIFICATE_NOT_BEFORE]});this.notAfter=new Time$1({schema:t.result[TBS_CERTIFICATE_NOT_AFTER]});this.subject=new RelativeDistinguishedNames({schema:t.result[TBS_CERTIFICATE_SUBJECT]});this.subjectPublicKeyInfo=new PublicKeyInfo$1({schema:t.result[TBS_CERTIFICATE_SUBJECT_PUBLIC_KEY]});if(TBS_CERTIFICATE_ISSUER_UNIQUE_ID in t.result)this.issuerUniqueID=t.result[TBS_CERTIFICATE_ISSUER_UNIQUE_ID].valueBlock.valueHex;if(TBS_CERTIFICATE_SUBJECT_UNIQUE_ID in t.result)this.subjectUniqueID=t.result[TBS_CERTIFICATE_SUBJECT_UNIQUE_ID].valueBlock.valueHex;if(TBS_CERTIFICATE_EXTENSIONS in t.result)this.extensions=Array.from(t.result[TBS_CERTIFICATE_EXTENSIONS],(e=>new Extension$2({schema:e})));this.signatureAlgorithm=new AlgorithmIdentifier$2({schema:t.result.signatureAlgorithm});this.signatureValue=t.result.signatureValue}encodeTBS(){const e=[];if(VERSION$f in this&&this.version!==Certificate$1.defaultValues(VERSION$f)){e.push(new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:0},value:[new Integer({value:this.version})]}))}e.push(this.serialNumber);e.push(this.signature.toSchema());e.push(this.issuer.toSchema());e.push(new Sequence({value:[this.notBefore.toSchema(),this.notAfter.toSchema()]}));e.push(this.subject.toSchema());e.push(this.subjectPublicKeyInfo.toSchema());if(this.issuerUniqueID){e.push(new Primitive({optional:true,idBlock:{tagClass:3,tagNumber:1},valueHex:this.issuerUniqueID}))}if(this.subjectUniqueID){e.push(new Primitive({optional:true,idBlock:{tagClass:3,tagNumber:2},valueHex:this.subjectUniqueID}))}if(this.extensions){e.push(new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:3},value:[new Sequence({value:Array.from(this.extensions,(e=>e.toSchema()))})]}))}return new Sequence({value:e})}toSchema(e=false){let t;if(e===false){if(!this.tbsView.byteLength){return Certificate$1.schema().value[0]}const e=fromBER(this.tbsView);AsnError.assert(e,"TBS Certificate");t=e.result}else{t=this.encodeTBS()}return new Sequence({value:[t,this.signatureAlgorithm.toSchema(),this.signatureValue]})}toJSON(){const e={tbs:Convert_1.ToHex(this.tbsView),version:this.version,serialNumber:this.serialNumber.toJSON(),signature:this.signature.toJSON(),issuer:this.issuer.toJSON(),notBefore:this.notBefore.toJSON(),notAfter:this.notAfter.toJSON(),subject:this.subject.toJSON(),subjectPublicKeyInfo:this.subjectPublicKeyInfo.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()};if(VERSION$f in this&&this.version!==Certificate$1.defaultValues(VERSION$f)){e.version=this.version}if(this.issuerUniqueID){e.issuerUniqueID=Convert_1.ToHex(this.issuerUniqueID)}if(this.subjectUniqueID){e.subjectUniqueID=Convert_1.ToHex(this.subjectUniqueID)}if(this.extensions){e.extensions=Array.from(this.extensions,(e=>e.toJSON()))}return e}async getPublicKey(e,t=getCrypto(true)){return t.getPublicKey(this.subjectPublicKeyInfo,this.signatureAlgorithm,e)}async getKeyHash(e="SHA-1",t=getCrypto(true)){return t.digest({name:e},this.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHexView)}async sign(e,t="SHA-1",r=getCrypto(true)){if(!e){throw new Error("Need to provide a private key for signing")}const n=await r.getSignatureParameters(e,t);const i=n.parameters;this.signature=n.signatureAlgorithm;this.signatureAlgorithm=n.signatureAlgorithm;this.tbsView=new Uint8Array(this.encodeTBS().toBER());const s=await r.signWithPrivateKey(this.tbsView,e,i);this.signatureValue=new BitString$1({valueHex:s})}async verify(e,t=getCrypto(true)){let r;if(e){r=e.subjectPublicKeyInfo}else if(this.issuer.isEqual(this.subject)){r=this.subjectPublicKeyInfo}if(!(r instanceof PublicKeyInfo$1)){throw new Error("Please provide issuer certificate as a parameter")}return t.verifyWithPublicKey(this.tbsView,this.signatureValue,r,this.signatureAlgorithm)}}Certificate$1.CLASS_NAME="Certificate";function checkCA(e,t=null){if(t&&e.issuer.isEqual(t.issuer)&&e.serialNumber.isEqual(t.serialNumber)){return null}let r=false;if(e.extensions){for(const t of e.extensions){if(t.extnID===id_BasicConstraints&&t.parsedValue instanceof BasicConstraints$1){if(t.parsedValue.cA){r=true;break}}}}if(r){return e}return null}const CERT_ID$1="certId";const CERT_VALUE="certValue";const PARSED_VALUE$4="parsedValue";const CLEAR_PROPS$P=[CERT_ID$1,CERT_VALUE];class CertBag$1 extends PkiObject{constructor(e={}){super();this.certId=getParametersValue(e,CERT_ID$1,CertBag$1.defaultValues(CERT_ID$1));this.certValue=getParametersValue(e,CERT_VALUE,CertBag$1.defaultValues(CERT_VALUE));if(PARSED_VALUE$4 in e){this.parsedValue=getParametersValue(e,PARSED_VALUE$4,CertBag$1.defaultValues(PARSED_VALUE$4))}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case CERT_ID$1:return EMPTY_STRING;case CERT_VALUE:return new Any;case PARSED_VALUE$4:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case CERT_ID$1:return t===EMPTY_STRING;case CERT_VALUE:return t instanceof Any;case PARSED_VALUE$4:return t instanceof Object&&Object.keys(t).length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new ObjectIdentifier$1({name:t.id||"id"}),new Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new Any({name:t.value||"value"})]})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$P);const t=compareSchema(e,e,CertBag$1.schema({names:{id:CERT_ID$1,value:CERT_VALUE}}));AsnError.assertSchema(t,this.className);this.certId=t.result.certId.valueBlock.toString();this.certValue=t.result.certValue;const r=this.certValue.valueBlock.valueHexView;switch(this.certId){case id_CertBag_X509Certificate:{try{this.parsedValue=Certificate$1.fromBER(r)}catch(e){AttributeCertificateV2.fromBER(r)}}break;case id_CertBag_AttributeCertificate:{this.parsedValue=AttributeCertificateV2.fromBER(r)}break;case id_CertBag_SDSICertificate:default:throw new Error(`Incorrect CERT_ID value in CertBag: ${this.certId}`)}}toSchema(){if(PARSED_VALUE$4 in this){if("acinfo"in this.parsedValue){this.certId=id_CertBag_AttributeCertificate}else{this.certId=id_CertBag_X509Certificate}this.certValue=new OctetString$1({valueHex:this.parsedValue.toSchema().toBER(false)})}return new Sequence({value:[new ObjectIdentifier$1({value:this.certId}),new Constructed({idBlock:{tagClass:3,tagNumber:0},value:["toSchema"in this.certValue?this.certValue.toSchema():this.certValue]})]})}toJSON(){return{certId:this.certId,certValue:this.certValue.toJSON()}}}CertBag$1.CLASS_NAME="CertBag";const USER_CERTIFICATE="userCertificate";const REVOCATION_DATE="revocationDate";const CRL_ENTRY_EXTENSIONS="crlEntryExtensions";const CLEAR_PROPS$O=[USER_CERTIFICATE,REVOCATION_DATE,CRL_ENTRY_EXTENSIONS];class RevokedCertificate$1 extends PkiObject{constructor(e={}){super();this.userCertificate=getParametersValue(e,USER_CERTIFICATE,RevokedCertificate$1.defaultValues(USER_CERTIFICATE));this.revocationDate=getParametersValue(e,REVOCATION_DATE,RevokedCertificate$1.defaultValues(REVOCATION_DATE));if(CRL_ENTRY_EXTENSIONS in e){this.crlEntryExtensions=getParametersValue(e,CRL_ENTRY_EXTENSIONS,RevokedCertificate$1.defaultValues(CRL_ENTRY_EXTENSIONS))}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case USER_CERTIFICATE:return new Integer;case REVOCATION_DATE:return new Time$1;case CRL_ENTRY_EXTENSIONS:return new Extensions$1;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Integer({name:t.userCertificate||USER_CERTIFICATE}),Time$1.schema({names:{utcTimeName:t.revocationDate||REVOCATION_DATE,generalTimeName:t.revocationDate||REVOCATION_DATE}}),Extensions$1.schema({names:{blockName:t.crlEntryExtensions||CRL_ENTRY_EXTENSIONS}},true)]})}fromSchema(e){clearProps(e,CLEAR_PROPS$O);const t=compareSchema(e,e,RevokedCertificate$1.schema());AsnError.assertSchema(t,this.className);this.userCertificate=t.result.userCertificate;this.revocationDate=new Time$1({schema:t.result.revocationDate});if(CRL_ENTRY_EXTENSIONS in t.result){this.crlEntryExtensions=new Extensions$1({schema:t.result.crlEntryExtensions})}}toSchema(){const e=[this.userCertificate,this.revocationDate.toSchema()];if(this.crlEntryExtensions){e.push(this.crlEntryExtensions.toSchema())}return new Sequence({value:e})}toJSON(){const e={userCertificate:this.userCertificate.toJSON(),revocationDate:this.revocationDate.toJSON()};if(this.crlEntryExtensions){e.crlEntryExtensions=this.crlEntryExtensions.toJSON()}return e}}RevokedCertificate$1.CLASS_NAME="RevokedCertificate";const TBS$3="tbs";const VERSION$e="version";const SIGNATURE$3="signature";const ISSUER$1="issuer";const THIS_UPDATE$1="thisUpdate";const NEXT_UPDATE$1="nextUpdate";const REVOKED_CERTIFICATES="revokedCertificates";const CRL_EXTENSIONS="crlExtensions";const SIGNATURE_ALGORITHM$4="signatureAlgorithm";const SIGNATURE_VALUE$1="signatureValue";const TBS_CERT_LIST="tbsCertList";const TBS_CERT_LIST_VERSION=`${TBS_CERT_LIST}.version`;const TBS_CERT_LIST_SIGNATURE=`${TBS_CERT_LIST}.signature`;const TBS_CERT_LIST_ISSUER=`${TBS_CERT_LIST}.issuer`;const TBS_CERT_LIST_THIS_UPDATE=`${TBS_CERT_LIST}.thisUpdate`;const TBS_CERT_LIST_NEXT_UPDATE=`${TBS_CERT_LIST}.nextUpdate`;const TBS_CERT_LIST_REVOKED_CERTIFICATES=`${TBS_CERT_LIST}.revokedCertificates`;const TBS_CERT_LIST_EXTENSIONS=`${TBS_CERT_LIST}.extensions`;const CLEAR_PROPS$N=[TBS_CERT_LIST,TBS_CERT_LIST_VERSION,TBS_CERT_LIST_SIGNATURE,TBS_CERT_LIST_ISSUER,TBS_CERT_LIST_THIS_UPDATE,TBS_CERT_LIST_NEXT_UPDATE,TBS_CERT_LIST_REVOKED_CERTIFICATES,TBS_CERT_LIST_EXTENSIONS,SIGNATURE_ALGORITHM$4,SIGNATURE_VALUE$1];function tbsCertList(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||TBS_CERT_LIST,value:[new Integer({optional:true,name:t.tbsCertListVersion||TBS_CERT_LIST_VERSION,value:2}),AlgorithmIdentifier$2.schema(t.signature||{names:{blockName:TBS_CERT_LIST_SIGNATURE}}),RelativeDistinguishedNames.schema(t.issuer||{names:{blockName:TBS_CERT_LIST_ISSUER}}),Time$1.schema(t.tbsCertListThisUpdate||{names:{utcTimeName:TBS_CERT_LIST_THIS_UPDATE,generalTimeName:TBS_CERT_LIST_THIS_UPDATE}}),Time$1.schema(t.tbsCertListNextUpdate||{names:{utcTimeName:TBS_CERT_LIST_NEXT_UPDATE,generalTimeName:TBS_CERT_LIST_NEXT_UPDATE}},true),new Sequence({optional:true,value:[new Repeated({name:t.tbsCertListRevokedCertificates||TBS_CERT_LIST_REVOKED_CERTIFICATES,value:new Sequence({value:[new Integer,Time$1.schema(),Extensions$1.schema({},true)]})})]}),new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:0},value:[Extensions$1.schema(t.crlExtensions||{names:{blockName:TBS_CERT_LIST_EXTENSIONS}})]})]})}const WELL_KNOWN_EXTENSIONS=[id_AuthorityKeyIdentifier,id_IssuerAltName,id_CRLNumber,id_BaseCRLNumber,id_IssuingDistributionPoint,id_FreshestCRL,id_AuthorityInfoAccess,id_CRLReason,id_InvalidityDate,id_CertificateIssuer];class CertificateRevocationList extends PkiObject{constructor(e={}){super();this.tbsView=new Uint8Array(getParametersValue(e,TBS$3,CertificateRevocationList.defaultValues(TBS$3)));this.version=getParametersValue(e,VERSION$e,CertificateRevocationList.defaultValues(VERSION$e));this.signature=getParametersValue(e,SIGNATURE$3,CertificateRevocationList.defaultValues(SIGNATURE$3));this.issuer=getParametersValue(e,ISSUER$1,CertificateRevocationList.defaultValues(ISSUER$1));this.thisUpdate=getParametersValue(e,THIS_UPDATE$1,CertificateRevocationList.defaultValues(THIS_UPDATE$1));if(NEXT_UPDATE$1 in e){this.nextUpdate=getParametersValue(e,NEXT_UPDATE$1,CertificateRevocationList.defaultValues(NEXT_UPDATE$1))}if(REVOKED_CERTIFICATES in e){this.revokedCertificates=getParametersValue(e,REVOKED_CERTIFICATES,CertificateRevocationList.defaultValues(REVOKED_CERTIFICATES))}if(CRL_EXTENSIONS in e){this.crlExtensions=getParametersValue(e,CRL_EXTENSIONS,CertificateRevocationList.defaultValues(CRL_EXTENSIONS))}this.signatureAlgorithm=getParametersValue(e,SIGNATURE_ALGORITHM$4,CertificateRevocationList.defaultValues(SIGNATURE_ALGORITHM$4));this.signatureValue=getParametersValue(e,SIGNATURE_VALUE$1,CertificateRevocationList.defaultValues(SIGNATURE_VALUE$1));if(e.schema){this.fromSchema(e.schema)}}get tbs(){return BufferSourceConverter_1.toArrayBuffer(this.tbsView)}set tbs(e){this.tbsView=new Uint8Array(e)}static defaultValues(e){switch(e){case TBS$3:return EMPTY_BUFFER;case VERSION$e:return 0;case SIGNATURE$3:return new AlgorithmIdentifier$2;case ISSUER$1:return new RelativeDistinguishedNames;case THIS_UPDATE$1:return new Time$1;case NEXT_UPDATE$1:return new Time$1;case REVOKED_CERTIFICATES:return[];case CRL_EXTENSIONS:return new Extensions$1;case SIGNATURE_ALGORITHM$4:return new AlgorithmIdentifier$2;case SIGNATURE_VALUE$1:return new BitString$1;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||"CertificateList",value:[tbsCertList(e),AlgorithmIdentifier$2.schema(t.signatureAlgorithm||{names:{blockName:SIGNATURE_ALGORITHM$4}}),new BitString$1({name:t.signatureValue||SIGNATURE_VALUE$1})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$N);const t=compareSchema(e,e,CertificateRevocationList.schema());AsnError.assertSchema(t,this.className);this.tbsView=t.result.tbsCertList.valueBeforeDecodeView;if(TBS_CERT_LIST_VERSION in t.result){this.version=t.result[TBS_CERT_LIST_VERSION].valueBlock.valueDec}this.signature=new AlgorithmIdentifier$2({schema:t.result[TBS_CERT_LIST_SIGNATURE]});this.issuer=new RelativeDistinguishedNames({schema:t.result[TBS_CERT_LIST_ISSUER]});this.thisUpdate=new Time$1({schema:t.result[TBS_CERT_LIST_THIS_UPDATE]});if(TBS_CERT_LIST_NEXT_UPDATE in t.result){this.nextUpdate=new Time$1({schema:t.result[TBS_CERT_LIST_NEXT_UPDATE]})}if(TBS_CERT_LIST_REVOKED_CERTIFICATES in t.result){this.revokedCertificates=Array.from(t.result[TBS_CERT_LIST_REVOKED_CERTIFICATES],(e=>new RevokedCertificate$1({schema:e})))}if(TBS_CERT_LIST_EXTENSIONS in t.result){this.crlExtensions=new Extensions$1({schema:t.result[TBS_CERT_LIST_EXTENSIONS]})}this.signatureAlgorithm=new AlgorithmIdentifier$2({schema:t.result.signatureAlgorithm});this.signatureValue=t.result.signatureValue}encodeTBS(){const e=[];if(this.version!==CertificateRevocationList.defaultValues(VERSION$e)){e.push(new Integer({value:this.version}))}e.push(this.signature.toSchema());e.push(this.issuer.toSchema());e.push(this.thisUpdate.toSchema());if(this.nextUpdate){e.push(this.nextUpdate.toSchema())}if(this.revokedCertificates){e.push(new Sequence({value:Array.from(this.revokedCertificates,(e=>e.toSchema()))}))}if(this.crlExtensions){e.push(new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:0},value:[this.crlExtensions.toSchema()]}))}return new Sequence({value:e})}toSchema(e=false){let t;if(!e){if(!this.tbsView.byteLength){return CertificateRevocationList.schema()}const e=fromBER(this.tbsView);AsnError.assert(e,"TBS Certificate Revocation List");t=e.result}else{t=this.encodeTBS()}return new Sequence({value:[t,this.signatureAlgorithm.toSchema(),this.signatureValue]})}toJSON(){const e={tbs:Convert_1.ToHex(this.tbsView),version:this.version,signature:this.signature.toJSON(),issuer:this.issuer.toJSON(),thisUpdate:this.thisUpdate.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()};if(this.version!==CertificateRevocationList.defaultValues(VERSION$e))e.version=this.version;if(this.nextUpdate){e.nextUpdate=this.nextUpdate.toJSON()}if(this.revokedCertificates){e.revokedCertificates=Array.from(this.revokedCertificates,(e=>e.toJSON()))}if(this.crlExtensions){e.crlExtensions=this.crlExtensions.toJSON()}return e}isCertificateRevoked(e){if(!this.issuer.isEqual(e.issuer)){return false}if(!this.revokedCertificates){return false}for(const t of this.revokedCertificates){if(t.userCertificate.isEqual(e.serialNumber)){return true}}return false}async sign(e,t="SHA-1",r=getCrypto(true)){if(!e){throw new Error("Need to provide a private key for signing")}const n=await r.getSignatureParameters(e,t);const{parameters:i}=n;this.signature=n.signatureAlgorithm;this.signatureAlgorithm=n.signatureAlgorithm;this.tbsView=new Uint8Array(this.encodeTBS().toBER());const s=await r.signWithPrivateKey(this.tbsView,e,i);this.signatureValue=new BitString$1({valueHex:s})}async verify(e={},t=getCrypto(true)){let r;if(e.issuerCertificate){r=e.issuerCertificate.subjectPublicKeyInfo;if(!this.issuer.isEqual(e.issuerCertificate.subject)){return false}}if(e.publicKeyInfo){r=e.publicKeyInfo}if(!r){throw new Error("Issuer's certificate must be provided as an input parameter")}if(this.crlExtensions){for(const e of this.crlExtensions.extensions){if(e.critical){if(!WELL_KNOWN_EXTENSIONS.includes(e.extnID))return false}}}return t.verifyWithPublicKey(this.tbsView,this.signatureValue,r,this.signatureAlgorithm)}}CertificateRevocationList.CLASS_NAME="CertificateRevocationList";const CRL_ID="crlId";const CRL_VALUE="crlValue";const PARSED_VALUE$3="parsedValue";const CLEAR_PROPS$M=[CRL_ID,CRL_VALUE];class CRLBag$1 extends PkiObject{constructor(e={}){super();this.crlId=getParametersValue(e,CRL_ID,CRLBag$1.defaultValues(CRL_ID));this.crlValue=getParametersValue(e,CRL_VALUE,CRLBag$1.defaultValues(CRL_VALUE));if(PARSED_VALUE$3 in e){this.parsedValue=getParametersValue(e,PARSED_VALUE$3,CRLBag$1.defaultValues(PARSED_VALUE$3))}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case CRL_ID:return EMPTY_STRING;case CRL_VALUE:return new Any;case PARSED_VALUE$3:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case CRL_ID:return t===EMPTY_STRING;case CRL_VALUE:return t instanceof Any;case PARSED_VALUE$3:return t instanceof Object&&Object.keys(t).length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new ObjectIdentifier$1({name:t.id||"id"}),new Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new Any({name:t.value||"value"})]})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$M);const t=compareSchema(e,e,CRLBag$1.schema({names:{id:CRL_ID,value:CRL_VALUE}}));AsnError.assertSchema(t,this.className);this.crlId=t.result.crlId.valueBlock.toString();this.crlValue=t.result.crlValue;switch(this.crlId){case id_CRLBag_X509CRL:{this.parsedValue=CertificateRevocationList.fromBER(this.certValue.valueBlock.valueHex)}break;default:throw new Error(`Incorrect CRL_ID value in CRLBag: ${this.crlId}`)}}toSchema(){if(this.parsedValue){this.crlId=id_CRLBag_X509CRL;this.crlValue=new OctetString$1({valueHex:this.parsedValue.toSchema().toBER(false)})}return new Sequence({value:[new ObjectIdentifier$1({value:this.crlId}),new Constructed({idBlock:{tagClass:3,tagNumber:0},value:[this.crlValue.toSchema()]})]})}toJSON(){return{crlId:this.crlId,crlValue:this.crlValue.toJSON()}}}CRLBag$1.CLASS_NAME="CRLBag";const VERSION$d="version";const ENCRYPTED_CONTENT_INFO$1="encryptedContentInfo";const UNPROTECTED_ATTRS$1="unprotectedAttrs";const CLEAR_PROPS$L=[VERSION$d,ENCRYPTED_CONTENT_INFO$1,UNPROTECTED_ATTRS$1];class EncryptedData$1 extends PkiObject{constructor(e={}){super();this.version=getParametersValue(e,VERSION$d,EncryptedData$1.defaultValues(VERSION$d));this.encryptedContentInfo=getParametersValue(e,ENCRYPTED_CONTENT_INFO$1,EncryptedData$1.defaultValues(ENCRYPTED_CONTENT_INFO$1));if(UNPROTECTED_ATTRS$1 in e){this.unprotectedAttrs=getParametersValue(e,UNPROTECTED_ATTRS$1,EncryptedData$1.defaultValues(UNPROTECTED_ATTRS$1))}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case VERSION$d:return 0;case ENCRYPTED_CONTENT_INFO$1:return new EncryptedContentInfo$1;case UNPROTECTED_ATTRS$1:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case VERSION$d:return t===0;case ENCRYPTED_CONTENT_INFO$1:return EncryptedContentInfo$1.compareWithDefault("contentType",t.contentType)&&EncryptedContentInfo$1.compareWithDefault("contentEncryptionAlgorithm",t.contentEncryptionAlgorithm)&&EncryptedContentInfo$1.compareWithDefault("encryptedContent",t.encryptedContent);case UNPROTECTED_ATTRS$1:return t.length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Integer({name:t.version||EMPTY_STRING}),EncryptedContentInfo$1.schema(t.encryptedContentInfo||{}),new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:1},value:[new Repeated({name:t.unprotectedAttrs||EMPTY_STRING,value:Attribute$3.schema()})]})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$L);const t=compareSchema(e,e,EncryptedData$1.schema({names:{version:VERSION$d,encryptedContentInfo:{names:{blockName:ENCRYPTED_CONTENT_INFO$1}},unprotectedAttrs:UNPROTECTED_ATTRS$1}}));AsnError.assertSchema(t,this.className);this.version=t.result.version.valueBlock.valueDec;this.encryptedContentInfo=new EncryptedContentInfo$1({schema:t.result.encryptedContentInfo});if(UNPROTECTED_ATTRS$1 in t.result)this.unprotectedAttrs=Array.from(t.result.unprotectedAttrs,(e=>new Attribute$3({schema:e})))}toSchema(){const e=[];e.push(new Integer({value:this.version}));e.push(this.encryptedContentInfo.toSchema());if(this.unprotectedAttrs){e.push(new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.unprotectedAttrs,(e=>e.toSchema()))}))}return new Sequence({value:e})}toJSON(){const e={version:this.version,encryptedContentInfo:this.encryptedContentInfo.toJSON()};if(this.unprotectedAttrs)e.unprotectedAttrs=Array.from(this.unprotectedAttrs,(e=>e.toJSON()));return e}async encrypt(e){ArgumentError.assert(e,"parameters","object");const t={...e,contentType:"1.2.840.113549.1.7.1"};this.encryptedContentInfo=await getCrypto(true).encryptEncryptedContentInfo(t)}async decrypt(e,t=getCrypto(true)){ArgumentError.assert(e,"parameters","object");const r={...e,encryptedContentInfo:this.encryptedContentInfo};return t.decryptEncryptedContentInfo(r)}}EncryptedData$1.CLASS_NAME="EncryptedData";const ENCRYPTION_ALGORITHM="encryptionAlgorithm";const ENCRYPTED_DATA="encryptedData";const PARSED_VALUE$2="parsedValue";const CLEAR_PROPS$K=[ENCRYPTION_ALGORITHM,ENCRYPTED_DATA];class PKCS8ShroudedKeyBag$1 extends PkiObject{constructor(e={}){super();this.encryptionAlgorithm=getParametersValue(e,ENCRYPTION_ALGORITHM,PKCS8ShroudedKeyBag$1.defaultValues(ENCRYPTION_ALGORITHM));this.encryptedData=getParametersValue(e,ENCRYPTED_DATA,PKCS8ShroudedKeyBag$1.defaultValues(ENCRYPTED_DATA));if(PARSED_VALUE$2 in e){this.parsedValue=getParametersValue(e,PARSED_VALUE$2,PKCS8ShroudedKeyBag$1.defaultValues(PARSED_VALUE$2))}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case ENCRYPTION_ALGORITHM:return new AlgorithmIdentifier$2;case ENCRYPTED_DATA:return new OctetString$1;case PARSED_VALUE$2:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case ENCRYPTION_ALGORITHM:return AlgorithmIdentifier$2.compareWithDefault("algorithmId",t.algorithmId)&&"algorithmParams"in t===false;case ENCRYPTED_DATA:return t.isEqual(PKCS8ShroudedKeyBag$1.defaultValues(e));case PARSED_VALUE$2:return t instanceof Object&&Object.keys(t).length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[AlgorithmIdentifier$2.schema(t.encryptionAlgorithm||{names:{blockName:ENCRYPTION_ALGORITHM}}),new Choice({value:[new OctetString$1({name:t.encryptedData||ENCRYPTED_DATA}),new OctetString$1({idBlock:{isConstructed:true},name:t.encryptedData||ENCRYPTED_DATA})]})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$K);const t=compareSchema(e,e,PKCS8ShroudedKeyBag$1.schema({names:{encryptionAlgorithm:{names:{blockName:ENCRYPTION_ALGORITHM}},encryptedData:ENCRYPTED_DATA}}));AsnError.assertSchema(t,this.className);this.encryptionAlgorithm=new AlgorithmIdentifier$2({schema:t.result.encryptionAlgorithm});this.encryptedData=t.result.encryptedData}toSchema(){return new Sequence({value:[this.encryptionAlgorithm.toSchema(),this.encryptedData]})}toJSON(){return{encryptionAlgorithm:this.encryptionAlgorithm.toJSON(),encryptedData:this.encryptedData.toJSON()}}async parseInternalValues(e,t=getCrypto(true)){const r=new EncryptedData$1({encryptedContentInfo:new EncryptedContentInfo$1({contentEncryptionAlgorithm:this.encryptionAlgorithm,encryptedContent:this.encryptedData})});const n=await r.decrypt(e,t);this.parsedValue=PrivateKeyInfo$2.fromBER(n)}async makeInternalValues(e){if(!this.parsedValue){throw new Error('Please initialize "parsedValue" first')}const t=new EncryptedData$1;const r={...e,contentToEncrypt:this.parsedValue.toSchema().toBER(false)};await t.encrypt(r);if(!t.encryptedContentInfo.encryptedContent){throw new Error("The filed `encryptedContent` in EncryptedContentInfo is empty")}this.encryptionAlgorithm=t.encryptedContentInfo.contentEncryptionAlgorithm;this.encryptedData=t.encryptedContentInfo.encryptedContent}}PKCS8ShroudedKeyBag$1.CLASS_NAME="PKCS8ShroudedKeyBag";const SECRET_TYPE_ID="secretTypeId";const SECRET_VALUE="secretValue";const CLEAR_PROPS$J=[SECRET_TYPE_ID,SECRET_VALUE];class SecretBag$1 extends PkiObject{constructor(e={}){super();this.secretTypeId=getParametersValue(e,SECRET_TYPE_ID,SecretBag$1.defaultValues(SECRET_TYPE_ID));this.secretValue=getParametersValue(e,SECRET_VALUE,SecretBag$1.defaultValues(SECRET_VALUE));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case SECRET_TYPE_ID:return EMPTY_STRING;case SECRET_VALUE:return new Any;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case SECRET_TYPE_ID:return t===EMPTY_STRING;case SECRET_VALUE:return t instanceof Any;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new ObjectIdentifier$1({name:t.id||"id"}),new Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new Any({name:t.value||"value"})]})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$J);const t=compareSchema(e,e,SecretBag$1.schema({names:{id:SECRET_TYPE_ID,value:SECRET_VALUE}}));AsnError.assertSchema(t,this.className);this.secretTypeId=t.result.secretTypeId.valueBlock.toString();this.secretValue=t.result.secretValue}toSchema(){return new Sequence({value:[new ObjectIdentifier$1({value:this.secretTypeId}),new Constructed({idBlock:{tagClass:3,tagNumber:0},value:[this.secretValue.toSchema()]})]})}toJSON(){return{secretTypeId:this.secretTypeId,secretValue:this.secretValue.toJSON()}}}SecretBag$1.CLASS_NAME="SecretBag";class SafeBagValueFactory{static getItems(){if(!this.items){this.items={};SafeBagValueFactory.register("1.2.840.113549.1.12.10.1.1",PrivateKeyInfo$2);SafeBagValueFactory.register("1.2.840.113549.1.12.10.1.2",PKCS8ShroudedKeyBag$1);SafeBagValueFactory.register("1.2.840.113549.1.12.10.1.3",CertBag$1);SafeBagValueFactory.register("1.2.840.113549.1.12.10.1.4",CRLBag$1);SafeBagValueFactory.register("1.2.840.113549.1.12.10.1.5",SecretBag$1);SafeBagValueFactory.register("1.2.840.113549.1.12.10.1.6",SafeContents$1)}return this.items}static register(e,t){this.getItems()[e]=t}static find(e){return this.getItems()[e]||null}}const BAG_ID="bagId";const BAG_VALUE="bagValue";const BAG_ATTRIBUTES="bagAttributes";const CLEAR_PROPS$I=[BAG_ID,BAG_VALUE,BAG_ATTRIBUTES];class SafeBag$1 extends PkiObject{constructor(e={}){super();this.bagId=getParametersValue(e,BAG_ID,SafeBag$1.defaultValues(BAG_ID));this.bagValue=getParametersValue(e,BAG_VALUE,SafeBag$1.defaultValues(BAG_VALUE));if(BAG_ATTRIBUTES in e){this.bagAttributes=getParametersValue(e,BAG_ATTRIBUTES,SafeBag$1.defaultValues(BAG_ATTRIBUTES))}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case BAG_ID:return EMPTY_STRING;case BAG_VALUE:return new Any;case BAG_ATTRIBUTES:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case BAG_ID:return t===EMPTY_STRING;case BAG_VALUE:return t instanceof Any;case BAG_ATTRIBUTES:return t.length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new ObjectIdentifier$1({name:t.bagId||BAG_ID}),new Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new Any({name:t.bagValue||BAG_VALUE})]}),new Set$3({optional:true,value:[new Repeated({name:t.bagAttributes||BAG_ATTRIBUTES,value:Attribute$3.schema()})]})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$I);const t=compareSchema(e,e,SafeBag$1.schema({names:{bagId:BAG_ID,bagValue:BAG_VALUE,bagAttributes:BAG_ATTRIBUTES}}));AsnError.assertSchema(t,this.className);this.bagId=t.result.bagId.valueBlock.toString();const r=SafeBagValueFactory.find(this.bagId);if(!r){throw new Error(`Invalid BAG_ID for SafeBag: ${this.bagId}`)}this.bagValue=new r({schema:t.result.bagValue});if(BAG_ATTRIBUTES in t.result){this.bagAttributes=Array.from(t.result.bagAttributes,(e=>new Attribute$3({schema:e})))}}toSchema(){const e=[new ObjectIdentifier$1({value:this.bagId}),new Constructed({idBlock:{tagClass:3,tagNumber:0},value:[this.bagValue.toSchema()]})];if(this.bagAttributes){e.push(new Set$3({value:Array.from(this.bagAttributes,(e=>e.toSchema()))}))}return new Sequence({value:e})}toJSON(){const e={bagId:this.bagId,bagValue:this.bagValue.toJSON()};if(this.bagAttributes){e.bagAttributes=Array.from(this.bagAttributes,(e=>e.toJSON()))}return e}}SafeBag$1.CLASS_NAME="SafeBag";const SAFE_BUGS="safeBags";class SafeContents$1 extends PkiObject{constructor(e={}){super();this.safeBags=getParametersValue(e,SAFE_BUGS,SafeContents$1.defaultValues(SAFE_BUGS));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case SAFE_BUGS:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case SAFE_BUGS:return t.length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Repeated({name:t.safeBags||EMPTY_STRING,value:SafeBag$1.schema()})]})}fromSchema(e){clearProps(e,[SAFE_BUGS]);const t=compareSchema(e,e,SafeContents$1.schema({names:{safeBags:SAFE_BUGS}}));AsnError.assertSchema(t,this.className);this.safeBags=Array.from(t.result.safeBags,(e=>new SafeBag$1({schema:e})))}toSchema(){return new Sequence({value:Array.from(this.safeBags,(e=>e.toSchema()))})}toJSON(){return{safeBags:Array.from(this.safeBags,(e=>e.toJSON()))}}}SafeContents$1.CLASS_NAME="SafeContents";const OTHER_CERT_FORMAT="otherCertFormat";const OTHER_CERT="otherCert";const CLEAR_PROPS$H=[OTHER_CERT_FORMAT,OTHER_CERT];class OtherCertificateFormat$1 extends PkiObject{constructor(e={}){super();this.otherCertFormat=getParametersValue(e,OTHER_CERT_FORMAT,OtherCertificateFormat$1.defaultValues(OTHER_CERT_FORMAT));this.otherCert=getParametersValue(e,OTHER_CERT,OtherCertificateFormat$1.defaultValues(OTHER_CERT));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case OTHER_CERT_FORMAT:return EMPTY_STRING;case OTHER_CERT:return new Any;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new ObjectIdentifier$1({name:t.otherCertFormat||OTHER_CERT_FORMAT}),new Any({name:t.otherCert||OTHER_CERT})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$H);const t=compareSchema(e,e,OtherCertificateFormat$1.schema());AsnError.assertSchema(t,this.className);this.otherCertFormat=t.result.otherCertFormat.valueBlock.toString();this.otherCert=t.result.otherCert}toSchema(){return new Sequence({value:[new ObjectIdentifier$1({value:this.otherCertFormat}),this.otherCert]})}toJSON(){const e={otherCertFormat:this.otherCertFormat};if(!(this.otherCert instanceof Any)){e.otherCert=this.otherCert.toJSON()}return e}}const CERTIFICATES$1="certificates";const CLEAR_PROPS$G=[CERTIFICATES$1];class CertificateSet$1 extends PkiObject{constructor(e={}){super();this.certificates=getParametersValue(e,CERTIFICATES$1,CertificateSet$1.defaultValues(CERTIFICATES$1));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case CERTIFICATES$1:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Set$3({name:t.blockName||EMPTY_STRING,value:[new Repeated({name:t.certificates||CERTIFICATES$1,value:new Choice({value:[Certificate$1.schema(),new Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new Any]}),new Constructed({idBlock:{tagClass:3,tagNumber:1},value:[new Sequence]}),new Constructed({idBlock:{tagClass:3,tagNumber:2},value:AttributeCertificateV2.schema().valueBlock.value}),new Constructed({idBlock:{tagClass:3,tagNumber:3},value:OtherCertificateFormat$1.schema().valueBlock.value})]})})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$G);const t=compareSchema(e,e,CertificateSet$1.schema());AsnError.assertSchema(t,this.className);this.certificates=Array.from(t.result.certificates||[],(e=>{const t=e.idBlock.tagNumber;if(e.idBlock.tagClass===1)return new Certificate$1({schema:e});const r=new Sequence({value:e.valueBlock.value});switch(t){case 1:if(r.valueBlock.value[0].valueBlock.value[0].valueBlock.valueDec===1){return new AttributeCertificateV2({schema:r})}else{return new AttributeCertificateV1({schema:r})}case 2:return new AttributeCertificateV2({schema:r});case 3:return new OtherCertificateFormat$1({schema:r})}return e}))}toSchema(){return new Set$3({value:Array.from(this.certificates,(e=>{switch(true){case e instanceof Certificate$1:return e.toSchema();case e instanceof AttributeCertificateV1:return new Constructed({idBlock:{tagClass:3,tagNumber:1},value:e.toSchema().valueBlock.value});case e instanceof AttributeCertificateV2:return new Constructed({idBlock:{tagClass:3,tagNumber:2},value:e.toSchema().valueBlock.value});case e instanceof OtherCertificateFormat$1:return new Constructed({idBlock:{tagClass:3,tagNumber:3},value:e.toSchema().valueBlock.value})}return e.toSchema()}))})}toJSON(){return{certificates:Array.from(this.certificates,(e=>e.toJSON()))}}}CertificateSet$1.CLASS_NAME="CertificateSet";const OTHER_REV_INFO_FORMAT="otherRevInfoFormat";const OTHER_REV_INFO="otherRevInfo";const CLEAR_PROPS$F=[OTHER_REV_INFO_FORMAT,OTHER_REV_INFO];class OtherRevocationInfoFormat$1 extends PkiObject{constructor(e={}){super();this.otherRevInfoFormat=getParametersValue(e,OTHER_REV_INFO_FORMAT,OtherRevocationInfoFormat$1.defaultValues(OTHER_REV_INFO_FORMAT));this.otherRevInfo=getParametersValue(e,OTHER_REV_INFO,OtherRevocationInfoFormat$1.defaultValues(OTHER_REV_INFO));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case OTHER_REV_INFO_FORMAT:return EMPTY_STRING;case OTHER_REV_INFO:return new Any;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new ObjectIdentifier$1({name:t.otherRevInfoFormat||OTHER_REV_INFO_FORMAT}),new Any({name:t.otherRevInfo||OTHER_REV_INFO})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$F);const t=compareSchema(e,e,OtherRevocationInfoFormat$1.schema());AsnError.assertSchema(t,this.className);this.otherRevInfoFormat=t.result.otherRevInfoFormat.valueBlock.toString();this.otherRevInfo=t.result.otherRevInfo}toSchema(){return new Sequence({value:[new ObjectIdentifier$1({value:this.otherRevInfoFormat}),this.otherRevInfo]})}toJSON(){const e={otherRevInfoFormat:this.otherRevInfoFormat};if(!(this.otherRevInfo instanceof Any)){e.otherRevInfo=this.otherRevInfo.toJSON()}return e}}OtherRevocationInfoFormat$1.CLASS_NAME="OtherRevocationInfoFormat";const CRLS$3="crls";const OTHER_REVOCATION_INFOS="otherRevocationInfos";const CLEAR_PROPS$E=[CRLS$3];class RevocationInfoChoices$1 extends PkiObject{constructor(e={}){super();this.crls=getParametersValue(e,CRLS$3,RevocationInfoChoices$1.defaultValues(CRLS$3));this.otherRevocationInfos=getParametersValue(e,OTHER_REVOCATION_INFOS,RevocationInfoChoices$1.defaultValues(OTHER_REVOCATION_INFOS));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case CRLS$3:return[];case OTHER_REVOCATION_INFOS:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Set$3({name:t.blockName||EMPTY_STRING,value:[new Repeated({name:t.crls||EMPTY_STRING,value:new Choice({value:[CertificateRevocationList.schema(),new Constructed({idBlock:{tagClass:3,tagNumber:1},value:[new ObjectIdentifier$1,new Any]})]})})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$E);const t=compareSchema(e,e,RevocationInfoChoices$1.schema({names:{crls:CRLS$3}}));AsnError.assertSchema(t,this.className);if(t.result.crls){for(const e of t.result.crls){if(e.idBlock.tagClass===1)this.crls.push(new CertificateRevocationList({schema:e}));else this.otherRevocationInfos.push(new OtherRevocationInfoFormat$1({schema:e}))}}}toSchema(){const e=[];e.push(...Array.from(this.crls,(e=>e.toSchema())));e.push(...Array.from(this.otherRevocationInfos,(e=>{const t=e.toSchema();t.idBlock.tagClass=3;t.idBlock.tagNumber=1;return t})));return new Set$3({value:e})}toJSON(){return{crls:Array.from(this.crls,(e=>e.toJSON())),otherRevocationInfos:Array.from(this.otherRevocationInfos,(e=>e.toJSON()))}}}RevocationInfoChoices$1.CLASS_NAME="RevocationInfoChoices";const CERTS$3="certs";const CRLS$2="crls";const CLEAR_PROPS$D=[CERTS$3,CRLS$2];class OriginatorInfo$1 extends PkiObject{constructor(e={}){super();this.crls=getParametersValue(e,CRLS$2,OriginatorInfo$1.defaultValues(CRLS$2));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case CERTS$3:return new CertificateSet$1;case CRLS$2:return new RevocationInfoChoices$1;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case CERTS$3:return t.certificates.length===0;case CRLS$2:return t.crls.length===0&&t.otherRevocationInfos.length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Constructed({name:t.certs||EMPTY_STRING,optional:true,idBlock:{tagClass:3,tagNumber:0},value:CertificateSet$1.schema().valueBlock.value}),new Constructed({name:t.crls||EMPTY_STRING,optional:true,idBlock:{tagClass:3,tagNumber:1},value:RevocationInfoChoices$1.schema().valueBlock.value})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$D);const t=compareSchema(e,e,OriginatorInfo$1.schema({names:{certs:CERTS$3,crls:CRLS$2}}));AsnError.assertSchema(t,this.className);if(CERTS$3 in t.result){this.certs=new CertificateSet$1({schema:new Set$3({value:t.result.certs.valueBlock.value})})}if(CRLS$2 in t.result){this.crls=new RevocationInfoChoices$1({schema:new Set$3({value:t.result.crls.valueBlock.value})})}}toSchema(){const e=[];if(this.certs){e.push(new Constructed({idBlock:{tagClass:3,tagNumber:0},value:this.certs.toSchema().valueBlock.value}))}if(this.crls){e.push(new Constructed({idBlock:{tagClass:3,tagNumber:1},value:this.crls.toSchema().valueBlock.value}))}return new Sequence({value:e})}toJSON(){const e={};if(this.certs){e.certs=this.certs.toJSON()}if(this.crls){e.crls=this.crls.toJSON()}return e}}OriginatorInfo$1.CLASS_NAME="OriginatorInfo";const ISSUER="issuer";const SERIAL_NUMBER$2="serialNumber";const CLEAR_PROPS$C=[ISSUER,SERIAL_NUMBER$2];class IssuerAndSerialNumber$1 extends PkiObject{constructor(e={}){super();this.issuer=getParametersValue(e,ISSUER,IssuerAndSerialNumber$1.defaultValues(ISSUER));this.serialNumber=getParametersValue(e,SERIAL_NUMBER$2,IssuerAndSerialNumber$1.defaultValues(SERIAL_NUMBER$2));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case ISSUER:return new RelativeDistinguishedNames;case SERIAL_NUMBER$2:return new Integer;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[RelativeDistinguishedNames.schema(t.issuer||{}),new Integer({name:t.serialNumber||EMPTY_STRING})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$C);const t=compareSchema(e,e,IssuerAndSerialNumber$1.schema({names:{issuer:{names:{blockName:ISSUER}},serialNumber:SERIAL_NUMBER$2}}));AsnError.assertSchema(t,this.className);this.issuer=new RelativeDistinguishedNames({schema:t.result.issuer});this.serialNumber=t.result.serialNumber}toSchema(){return new Sequence({value:[this.issuer.toSchema(),this.serialNumber]})}toJSON(){return{issuer:this.issuer.toJSON(),serialNumber:this.serialNumber.toJSON()}}}IssuerAndSerialNumber$1.CLASS_NAME="IssuerAndSerialNumber";const VARIANT$3="variant";const VALUE$3="value";const CLEAR_PROPS$B=["blockName"];class RecipientIdentifier$1 extends PkiObject{constructor(e={}){super();this.variant=getParametersValue(e,VARIANT$3,RecipientIdentifier$1.defaultValues(VARIANT$3));if(VALUE$3 in e){this.value=getParametersValue(e,VALUE$3,RecipientIdentifier$1.defaultValues(VALUE$3))}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case VARIANT$3:return-1;case VALUE$3:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case VARIANT$3:return t===-1;case VALUE$3:return Object.keys(t).length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Choice({value:[IssuerAndSerialNumber$1.schema({names:{blockName:t.blockName||EMPTY_STRING}}),new Primitive({name:t.blockName||EMPTY_STRING,idBlock:{tagClass:3,tagNumber:0}})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$B);const t=compareSchema(e,e,RecipientIdentifier$1.schema({names:{blockName:"blockName"}}));AsnError.assertSchema(t,this.className);if(t.result.blockName.idBlock.tagClass===1){this.variant=1;this.value=new IssuerAndSerialNumber$1({schema:t.result.blockName})}else{this.variant=2;this.value=new OctetString$1({valueHex:t.result.blockName.valueBlock.valueHex})}}toSchema(){switch(this.variant){case 1:if(!(this.value instanceof IssuerAndSerialNumber$1)){throw new Error("Incorrect type of RecipientIdentifier.value. It should be IssuerAndSerialNumber.")}return this.value.toSchema();case 2:if(!(this.value instanceof OctetString$1)){throw new Error("Incorrect type of RecipientIdentifier.value. It should be ASN.1 OctetString.")}return new Primitive({idBlock:{tagClass:3,tagNumber:0},valueHex:this.value.valueBlock.valueHexView});default:return new Any}}toJSON(){const e={variant:this.variant};if((this.variant===1||this.variant===2)&&this.value){e.value=this.value.toJSON()}return e}}RecipientIdentifier$1.CLASS_NAME="RecipientIdentifier";const VERSION$c="version";const RID$1="rid";const KEY_ENCRYPTION_ALGORITHM$3="keyEncryptionAlgorithm";const ENCRYPTED_KEY$3="encryptedKey";const RECIPIENT_CERTIFICATE$1="recipientCertificate";const CLEAR_PROPS$A=[VERSION$c,RID$1,KEY_ENCRYPTION_ALGORITHM$3,ENCRYPTED_KEY$3];class KeyTransRecipientInfo$1 extends PkiObject{constructor(e={}){super();this.version=getParametersValue(e,VERSION$c,KeyTransRecipientInfo$1.defaultValues(VERSION$c));this.rid=getParametersValue(e,RID$1,KeyTransRecipientInfo$1.defaultValues(RID$1));this.keyEncryptionAlgorithm=getParametersValue(e,KEY_ENCRYPTION_ALGORITHM$3,KeyTransRecipientInfo$1.defaultValues(KEY_ENCRYPTION_ALGORITHM$3));this.encryptedKey=getParametersValue(e,ENCRYPTED_KEY$3,KeyTransRecipientInfo$1.defaultValues(ENCRYPTED_KEY$3));this.recipientCertificate=getParametersValue(e,RECIPIENT_CERTIFICATE$1,KeyTransRecipientInfo$1.defaultValues(RECIPIENT_CERTIFICATE$1));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case VERSION$c:return-1;case RID$1:return{};case KEY_ENCRYPTION_ALGORITHM$3:return new AlgorithmIdentifier$2;case ENCRYPTED_KEY$3:return new OctetString$1;case RECIPIENT_CERTIFICATE$1:return new Certificate$1;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case VERSION$c:return t===KeyTransRecipientInfo$1.defaultValues(VERSION$c);case RID$1:return Object.keys(t).length===0;case KEY_ENCRYPTION_ALGORITHM$3:case ENCRYPTED_KEY$3:return t.isEqual(KeyTransRecipientInfo$1.defaultValues(e));case RECIPIENT_CERTIFICATE$1:return false;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Integer({name:t.version||EMPTY_STRING}),RecipientIdentifier$1.schema(t.rid||{}),AlgorithmIdentifier$2.schema(t.keyEncryptionAlgorithm||{}),new OctetString$1({name:t.encryptedKey||EMPTY_STRING})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$A);const t=compareSchema(e,e,KeyTransRecipientInfo$1.schema({names:{version:VERSION$c,rid:{names:{blockName:RID$1}},keyEncryptionAlgorithm:{names:{blockName:KEY_ENCRYPTION_ALGORITHM$3}},encryptedKey:ENCRYPTED_KEY$3}}));AsnError.assertSchema(t,this.className);this.version=t.result.version.valueBlock.valueDec;if(t.result.rid.idBlock.tagClass===3){this.rid=new OctetString$1({valueHex:t.result.rid.valueBlock.valueHex})}else{this.rid=new IssuerAndSerialNumber$1({schema:t.result.rid})}this.keyEncryptionAlgorithm=new AlgorithmIdentifier$2({schema:t.result.keyEncryptionAlgorithm});this.encryptedKey=t.result.encryptedKey}toSchema(){const e=[];if(this.rid instanceof IssuerAndSerialNumber$1){this.version=0;e.push(new Integer({value:this.version}));e.push(this.rid.toSchema())}else{this.version=2;e.push(new Integer({value:this.version}));e.push(new Primitive({idBlock:{tagClass:3,tagNumber:0},valueHex:this.rid.valueBlock.valueHexView}))}e.push(this.keyEncryptionAlgorithm.toSchema());e.push(this.encryptedKey);return new Sequence({value:e})}toJSON(){return{version:this.version,rid:this.rid.toJSON(),keyEncryptionAlgorithm:this.keyEncryptionAlgorithm.toJSON(),encryptedKey:this.encryptedKey.toJSON()}}}KeyTransRecipientInfo$1.CLASS_NAME="KeyTransRecipientInfo";const ALGORITHM="algorithm";const PUBLIC_KEY="publicKey";const CLEAR_PROPS$z=[ALGORITHM,PUBLIC_KEY];class OriginatorPublicKey$1 extends PkiObject{constructor(e={}){super();this.algorithm=getParametersValue(e,ALGORITHM,OriginatorPublicKey$1.defaultValues(ALGORITHM));this.publicKey=getParametersValue(e,PUBLIC_KEY,OriginatorPublicKey$1.defaultValues(PUBLIC_KEY));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case ALGORITHM:return new AlgorithmIdentifier$2;case PUBLIC_KEY:return new BitString$1;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case ALGORITHM:case PUBLIC_KEY:return t.isEqual(OriginatorPublicKey$1.defaultValues(e));default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[AlgorithmIdentifier$2.schema(t.algorithm||{}),new BitString$1({name:t.publicKey||EMPTY_STRING})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$z);const t=compareSchema(e,e,OriginatorPublicKey$1.schema({names:{algorithm:{names:{blockName:ALGORITHM}},publicKey:PUBLIC_KEY}}));AsnError.assertSchema(t,this.className);this.algorithm=new AlgorithmIdentifier$2({schema:t.result.algorithm});this.publicKey=t.result.publicKey}toSchema(){return new Sequence({value:[this.algorithm.toSchema(),this.publicKey]})}toJSON(){return{algorithm:this.algorithm.toJSON(),publicKey:this.publicKey.toJSON()}}}OriginatorPublicKey$1.CLASS_NAME="OriginatorPublicKey";const VARIANT$2="variant";const VALUE$2="value";const CLEAR_PROPS$y=["blockName"];class OriginatorIdentifierOrKey$1 extends PkiObject{constructor(e={}){super();this.variant=getParametersValue(e,VARIANT$2,OriginatorIdentifierOrKey$1.defaultValues(VARIANT$2));if(VALUE$2 in e){this.value=getParametersValue(e,VALUE$2,OriginatorIdentifierOrKey$1.defaultValues(VALUE$2))}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case VARIANT$2:return-1;case VALUE$2:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case VARIANT$2:return t===-1;case VALUE$2:return Object.keys(t).length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Choice({value:[IssuerAndSerialNumber$1.schema({names:{blockName:t.blockName||EMPTY_STRING}}),new Primitive({idBlock:{tagClass:3,tagNumber:0},name:t.blockName||EMPTY_STRING}),new Constructed({idBlock:{tagClass:3,tagNumber:1},name:t.blockName||EMPTY_STRING,value:OriginatorPublicKey$1.schema().valueBlock.value})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$y);const t=compareSchema(e,e,OriginatorIdentifierOrKey$1.schema({names:{blockName:"blockName"}}));AsnError.assertSchema(t,this.className);if(t.result.blockName.idBlock.tagClass===1){this.variant=1;this.value=new IssuerAndSerialNumber$1({schema:t.result.blockName})}else{if(t.result.blockName.idBlock.tagNumber===0){t.result.blockName.idBlock.tagClass=1;t.result.blockName.idBlock.tagNumber=4;this.variant=2;this.value=t.result.blockName}else{this.variant=3;this.value=new OriginatorPublicKey$1({schema:new Sequence({value:t.result.blockName.valueBlock.value})})}}}toSchema(){switch(this.variant){case 1:return this.value.toSchema();case 2:this.value.idBlock.tagClass=3;this.value.idBlock.tagNumber=0;return this.value;case 3:{const e=this.value.toSchema();e.idBlock.tagClass=3;e.idBlock.tagNumber=1;return e}default:return new Any}}toJSON(){const e={variant:this.variant};if(this.variant===1||this.variant===2||this.variant===3){e.value=this.value.toJSON()}return e}}OriginatorIdentifierOrKey$1.CLASS_NAME="OriginatorIdentifierOrKey";const KEY_ATTR_ID="keyAttrId";const KEY_ATTR="keyAttr";const CLEAR_PROPS$x=[KEY_ATTR_ID,KEY_ATTR];class OtherKeyAttribute$1 extends PkiObject{constructor(e={}){super();this.keyAttrId=getParametersValue(e,KEY_ATTR_ID,OtherKeyAttribute$1.defaultValues(KEY_ATTR_ID));if(KEY_ATTR in e){this.keyAttr=getParametersValue(e,KEY_ATTR,OtherKeyAttribute$1.defaultValues(KEY_ATTR))}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case KEY_ATTR_ID:return EMPTY_STRING;case KEY_ATTR:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case KEY_ATTR_ID:return typeof t==="string"&&t===EMPTY_STRING;case KEY_ATTR:return Object.keys(t).length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({optional:t.optional||true,name:t.blockName||EMPTY_STRING,value:[new ObjectIdentifier$1({name:t.keyAttrId||EMPTY_STRING}),new Any({optional:true,name:t.keyAttr||EMPTY_STRING})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$x);const t=compareSchema(e,e,OtherKeyAttribute$1.schema({names:{keyAttrId:KEY_ATTR_ID,keyAttr:KEY_ATTR}}));AsnError.assertSchema(t,this.className);this.keyAttrId=t.result.keyAttrId.valueBlock.toString();if(KEY_ATTR in t.result){this.keyAttr=t.result.keyAttr}}toSchema(){const e=[];e.push(new ObjectIdentifier$1({value:this.keyAttrId}));if(KEY_ATTR in this){e.push(this.keyAttr)}return new Sequence({value:e})}toJSON(){const e={keyAttrId:this.keyAttrId};if(KEY_ATTR in this){e.keyAttr=this.keyAttr.toJSON()}return e}}OtherKeyAttribute$1.CLASS_NAME="OtherKeyAttribute";const SUBJECT_KEY_IDENTIFIER="subjectKeyIdentifier";const DATE$1="date";const OTHER$1="other";const CLEAR_PROPS$w=[SUBJECT_KEY_IDENTIFIER,DATE$1,OTHER$1];class RecipientKeyIdentifier$1 extends PkiObject{constructor(e={}){super();this.subjectKeyIdentifier=getParametersValue(e,SUBJECT_KEY_IDENTIFIER,RecipientKeyIdentifier$1.defaultValues(SUBJECT_KEY_IDENTIFIER));if(DATE$1 in e){this.date=getParametersValue(e,DATE$1,RecipientKeyIdentifier$1.defaultValues(DATE$1))}if(OTHER$1 in e){this.other=getParametersValue(e,OTHER$1,RecipientKeyIdentifier$1.defaultValues(OTHER$1))}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case SUBJECT_KEY_IDENTIFIER:return new OctetString$1;case DATE$1:return new GeneralizedTime;case OTHER$1:return new OtherKeyAttribute$1;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case SUBJECT_KEY_IDENTIFIER:return t.isEqual(RecipientKeyIdentifier$1.defaultValues(SUBJECT_KEY_IDENTIFIER));case DATE$1:return t.year===0&&t.month===0&&t.day===0&&t.hour===0&&t.minute===0&&t.second===0&&t.millisecond===0;case OTHER$1:return t.keyAttrId===EMPTY_STRING&&"keyAttr"in t===false;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new OctetString$1({name:t.subjectKeyIdentifier||EMPTY_STRING}),new GeneralizedTime({optional:true,name:t.date||EMPTY_STRING}),OtherKeyAttribute$1.schema(t.other||{})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$w);const t=compareSchema(e,e,RecipientKeyIdentifier$1.schema({names:{subjectKeyIdentifier:SUBJECT_KEY_IDENTIFIER,date:DATE$1,other:{names:{blockName:OTHER$1}}}}));AsnError.assertSchema(t,this.className);this.subjectKeyIdentifier=t.result.subjectKeyIdentifier;if(DATE$1 in t.result)this.date=t.result.date;if(OTHER$1 in t.result)this.other=new OtherKeyAttribute$1({schema:t.result.other})}toSchema(){const e=[];e.push(this.subjectKeyIdentifier);if(this.date){e.push(this.date)}if(this.other){e.push(this.other.toSchema())}return new Sequence({value:e})}toJSON(){const e={subjectKeyIdentifier:this.subjectKeyIdentifier.toJSON()};if(this.date){e.date=this.date.toJSON()}if(this.other){e.other=this.other.toJSON()}return e}}RecipientKeyIdentifier$1.CLASS_NAME="RecipientKeyIdentifier";const VARIANT$1="variant";const VALUE$1="value";const CLEAR_PROPS$v=["blockName"];class KeyAgreeRecipientIdentifier$1 extends PkiObject{constructor(e={}){super();this.variant=getParametersValue(e,VARIANT$1,KeyAgreeRecipientIdentifier$1.defaultValues(VARIANT$1));this.value=getParametersValue(e,VALUE$1,KeyAgreeRecipientIdentifier$1.defaultValues(VALUE$1));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case VARIANT$1:return-1;case VALUE$1:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case VARIANT$1:return t===-1;case VALUE$1:return Object.keys(t).length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Choice({value:[IssuerAndSerialNumber$1.schema(t.issuerAndSerialNumber||{names:{blockName:t.blockName||EMPTY_STRING}}),new Constructed({name:t.blockName||EMPTY_STRING,idBlock:{tagClass:3,tagNumber:0},value:RecipientKeyIdentifier$1.schema(t.rKeyId||{names:{blockName:t.blockName||EMPTY_STRING}}).valueBlock.value})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$v);const t=compareSchema(e,e,KeyAgreeRecipientIdentifier$1.schema({names:{blockName:"blockName"}}));AsnError.assertSchema(t,this.className);if(t.result.blockName.idBlock.tagClass===1){this.variant=1;this.value=new IssuerAndSerialNumber$1({schema:t.result.blockName})}else{this.variant=2;this.value=new RecipientKeyIdentifier$1({schema:new Sequence({value:t.result.blockName.valueBlock.value})})}}toSchema(){switch(this.variant){case 1:return this.value.toSchema();case 2:return new Constructed({idBlock:{tagClass:3,tagNumber:0},value:this.value.toSchema().valueBlock.value});default:return new Any}}toJSON(){const e={variant:this.variant};if(this.variant===1||this.variant===2){e.value=this.value.toJSON()}return e}}KeyAgreeRecipientIdentifier$1.CLASS_NAME="KeyAgreeRecipientIdentifier";const RID="rid";const ENCRYPTED_KEY$2="encryptedKey";const CLEAR_PROPS$u=[RID,ENCRYPTED_KEY$2];class RecipientEncryptedKey$1 extends PkiObject{constructor(e={}){super();this.rid=getParametersValue(e,RID,RecipientEncryptedKey$1.defaultValues(RID));this.encryptedKey=getParametersValue(e,ENCRYPTED_KEY$2,RecipientEncryptedKey$1.defaultValues(ENCRYPTED_KEY$2));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case RID:return new KeyAgreeRecipientIdentifier$1;case ENCRYPTED_KEY$2:return new OctetString$1;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case RID:return t.variant===-1&&"value"in t===false;case ENCRYPTED_KEY$2:return t.isEqual(RecipientEncryptedKey$1.defaultValues(ENCRYPTED_KEY$2));default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[KeyAgreeRecipientIdentifier$1.schema(t.rid||{}),new OctetString$1({name:t.encryptedKey||EMPTY_STRING})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$u);const t=compareSchema(e,e,RecipientEncryptedKey$1.schema({names:{rid:{names:{blockName:RID}},encryptedKey:ENCRYPTED_KEY$2}}));AsnError.assertSchema(t,this.className);this.rid=new KeyAgreeRecipientIdentifier$1({schema:t.result.rid});this.encryptedKey=t.result.encryptedKey}toSchema(){return new Sequence({value:[this.rid.toSchema(),this.encryptedKey]})}toJSON(){return{rid:this.rid.toJSON(),encryptedKey:this.encryptedKey.toJSON()}}}RecipientEncryptedKey$1.CLASS_NAME="RecipientEncryptedKey";const ENCRYPTED_KEYS="encryptedKeys";const RECIPIENT_ENCRYPTED_KEYS="RecipientEncryptedKeys";const CLEAR_PROPS$t=[RECIPIENT_ENCRYPTED_KEYS];class RecipientEncryptedKeys$1 extends PkiObject{constructor(e={}){super();this.encryptedKeys=getParametersValue(e,ENCRYPTED_KEYS,RecipientEncryptedKeys$1.defaultValues(ENCRYPTED_KEYS));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case ENCRYPTED_KEYS:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case ENCRYPTED_KEYS:return t.length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Repeated({name:t.RecipientEncryptedKeys||EMPTY_STRING,value:RecipientEncryptedKey$1.schema()})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$t);const t=compareSchema(e,e,RecipientEncryptedKeys$1.schema({names:{RecipientEncryptedKeys:RECIPIENT_ENCRYPTED_KEYS}}));AsnError.assertSchema(t,this.className);this.encryptedKeys=Array.from(t.result.RecipientEncryptedKeys,(e=>new RecipientEncryptedKey$1({schema:e})))}toSchema(){return new Sequence({value:Array.from(this.encryptedKeys,(e=>e.toSchema()))})}toJSON(){return{encryptedKeys:Array.from(this.encryptedKeys,(e=>e.toJSON()))}}}RecipientEncryptedKeys$1.CLASS_NAME="RecipientEncryptedKeys";const VERSION$b="version";const ORIGINATOR="originator";const UKM="ukm";const KEY_ENCRYPTION_ALGORITHM$2="keyEncryptionAlgorithm";const RECIPIENT_ENCRYPTED_KEY="recipientEncryptedKeys";const RECIPIENT_CERTIFICATE="recipientCertificate";const RECIPIENT_PUBLIC_KEY="recipientPublicKey";const CLEAR_PROPS$s=[VERSION$b,ORIGINATOR,UKM,KEY_ENCRYPTION_ALGORITHM$2,RECIPIENT_ENCRYPTED_KEY];class KeyAgreeRecipientInfo$1 extends PkiObject{constructor(e={}){super();this.version=getParametersValue(e,VERSION$b,KeyAgreeRecipientInfo$1.defaultValues(VERSION$b));this.originator=getParametersValue(e,ORIGINATOR,KeyAgreeRecipientInfo$1.defaultValues(ORIGINATOR));if(UKM in e){this.ukm=getParametersValue(e,UKM,KeyAgreeRecipientInfo$1.defaultValues(UKM))}this.keyEncryptionAlgorithm=getParametersValue(e,KEY_ENCRYPTION_ALGORITHM$2,KeyAgreeRecipientInfo$1.defaultValues(KEY_ENCRYPTION_ALGORITHM$2));this.recipientEncryptedKeys=getParametersValue(e,RECIPIENT_ENCRYPTED_KEY,KeyAgreeRecipientInfo$1.defaultValues(RECIPIENT_ENCRYPTED_KEY));this.recipientCertificate=getParametersValue(e,RECIPIENT_CERTIFICATE,KeyAgreeRecipientInfo$1.defaultValues(RECIPIENT_CERTIFICATE));this.recipientPublicKey=getParametersValue(e,RECIPIENT_PUBLIC_KEY,KeyAgreeRecipientInfo$1.defaultValues(RECIPIENT_PUBLIC_KEY));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case VERSION$b:return 0;case ORIGINATOR:return new OriginatorIdentifierOrKey$1;case UKM:return new OctetString$1;case KEY_ENCRYPTION_ALGORITHM$2:return new AlgorithmIdentifier$2;case RECIPIENT_ENCRYPTED_KEY:return new RecipientEncryptedKeys$1;case RECIPIENT_CERTIFICATE:return new Certificate$1;case RECIPIENT_PUBLIC_KEY:return null;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case VERSION$b:return t===0;case ORIGINATOR:return t.variant===-1&&"value"in t===false;case UKM:return t.isEqual(KeyAgreeRecipientInfo$1.defaultValues(UKM));case KEY_ENCRYPTION_ALGORITHM$2:return t.algorithmId===EMPTY_STRING&&"algorithmParams"in t===false;case RECIPIENT_ENCRYPTED_KEY:return t.encryptedKeys.length===0;case RECIPIENT_CERTIFICATE:return false;case RECIPIENT_PUBLIC_KEY:return false;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Integer({name:t.version||EMPTY_STRING}),new Constructed({idBlock:{tagClass:3,tagNumber:0},value:[OriginatorIdentifierOrKey$1.schema(t.originator||{})]}),new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:1},value:[new OctetString$1({name:t.ukm||EMPTY_STRING})]}),AlgorithmIdentifier$2.schema(t.keyEncryptionAlgorithm||{}),RecipientEncryptedKeys$1.schema(t.recipientEncryptedKeys||{})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$s);const t=compareSchema(e,e,KeyAgreeRecipientInfo$1.schema({names:{version:VERSION$b,originator:{names:{blockName:ORIGINATOR}},ukm:UKM,keyEncryptionAlgorithm:{names:{blockName:KEY_ENCRYPTION_ALGORITHM$2}},recipientEncryptedKeys:{names:{blockName:RECIPIENT_ENCRYPTED_KEY}}}}));AsnError.assertSchema(t,this.className);this.version=t.result.version.valueBlock.valueDec;this.originator=new OriginatorIdentifierOrKey$1({schema:t.result.originator});if(UKM in t.result)this.ukm=t.result.ukm;this.keyEncryptionAlgorithm=new AlgorithmIdentifier$2({schema:t.result.keyEncryptionAlgorithm});this.recipientEncryptedKeys=new RecipientEncryptedKeys$1({schema:t.result.recipientEncryptedKeys})}toSchema(){const e=[];e.push(new Integer({value:this.version}));e.push(new Constructed({idBlock:{tagClass:3,tagNumber:0},value:[this.originator.toSchema()]}));if(this.ukm){e.push(new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:1},value:[this.ukm]}))}e.push(this.keyEncryptionAlgorithm.toSchema());e.push(this.recipientEncryptedKeys.toSchema());return new Sequence({value:e})}toJSON(){const e={version:this.version,originator:this.originator.toJSON(),keyEncryptionAlgorithm:this.keyEncryptionAlgorithm.toJSON(),recipientEncryptedKeys:this.recipientEncryptedKeys.toJSON()};if(this.ukm){e.ukm=this.ukm.toJSON()}return e}}KeyAgreeRecipientInfo$1.CLASS_NAME="KeyAgreeRecipientInfo";const KEY_IDENTIFIER="keyIdentifier";const DATE="date";const OTHER="other";const CLEAR_PROPS$r=[KEY_IDENTIFIER,DATE,OTHER];class KEKIdentifier$1 extends PkiObject{constructor(e={}){super();this.keyIdentifier=getParametersValue(e,KEY_IDENTIFIER,KEKIdentifier$1.defaultValues(KEY_IDENTIFIER));if(DATE in e){this.date=getParametersValue(e,DATE,KEKIdentifier$1.defaultValues(DATE))}if(OTHER in e){this.other=getParametersValue(e,OTHER,KEKIdentifier$1.defaultValues(OTHER))}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case KEY_IDENTIFIER:return new OctetString$1;case DATE:return new GeneralizedTime;case OTHER:return new OtherKeyAttribute$1;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case KEY_IDENTIFIER:return t.isEqual(KEKIdentifier$1.defaultValues(KEY_IDENTIFIER));case DATE:return t.year===0&&t.month===0&&t.day===0&&t.hour===0&&t.minute===0&&t.second===0&&t.millisecond===0;case OTHER:return t.compareWithDefault("keyAttrId",t.keyAttrId)&&"keyAttr"in t===false;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new OctetString$1({name:t.keyIdentifier||EMPTY_STRING}),new GeneralizedTime({optional:true,name:t.date||EMPTY_STRING}),OtherKeyAttribute$1.schema(t.other||{})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$r);const t=compareSchema(e,e,KEKIdentifier$1.schema({names:{keyIdentifier:KEY_IDENTIFIER,date:DATE,other:{names:{blockName:OTHER}}}}));AsnError.assertSchema(t,this.className);this.keyIdentifier=t.result.keyIdentifier;if(DATE in t.result)this.date=t.result.date;if(OTHER in t.result)this.other=new OtherKeyAttribute$1({schema:t.result.other})}toSchema(){const e=[];e.push(this.keyIdentifier);if(this.date){e.push(this.date)}if(this.other){e.push(this.other.toSchema())}return new Sequence({value:e})}toJSON(){const e={keyIdentifier:this.keyIdentifier.toJSON()};if(this.date){e.date=this.date}if(this.other){e.other=this.other.toJSON()}return e}}KEKIdentifier$1.CLASS_NAME="KEKIdentifier";const VERSION$a="version";const KEK_ID="kekid";const KEY_ENCRYPTION_ALGORITHM$1="keyEncryptionAlgorithm";const ENCRYPTED_KEY$1="encryptedKey";const PER_DEFINED_KEK="preDefinedKEK";const CLEAR_PROPS$q=[VERSION$a,KEK_ID,KEY_ENCRYPTION_ALGORITHM$1,ENCRYPTED_KEY$1];class KEKRecipientInfo$1 extends PkiObject{constructor(e={}){super();this.version=getParametersValue(e,VERSION$a,KEKRecipientInfo$1.defaultValues(VERSION$a));this.kekid=getParametersValue(e,KEK_ID,KEKRecipientInfo$1.defaultValues(KEK_ID));this.keyEncryptionAlgorithm=getParametersValue(e,KEY_ENCRYPTION_ALGORITHM$1,KEKRecipientInfo$1.defaultValues(KEY_ENCRYPTION_ALGORITHM$1));this.encryptedKey=getParametersValue(e,ENCRYPTED_KEY$1,KEKRecipientInfo$1.defaultValues(ENCRYPTED_KEY$1));this.preDefinedKEK=getParametersValue(e,PER_DEFINED_KEK,KEKRecipientInfo$1.defaultValues(PER_DEFINED_KEK));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case VERSION$a:return 0;case KEK_ID:return new KEKIdentifier$1;case KEY_ENCRYPTION_ALGORITHM$1:return new AlgorithmIdentifier$2;case ENCRYPTED_KEY$1:return new OctetString$1;case PER_DEFINED_KEK:return EMPTY_BUFFER;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case"KEKRecipientInfo":return t===KEKRecipientInfo$1.defaultValues(VERSION$a);case KEK_ID:return t.compareWithDefault("keyIdentifier",t.keyIdentifier)&&"date"in t===false&&"other"in t===false;case KEY_ENCRYPTION_ALGORITHM$1:return t.algorithmId===EMPTY_STRING&&"algorithmParams"in t===false;case ENCRYPTED_KEY$1:return t.isEqual(KEKRecipientInfo$1.defaultValues(ENCRYPTED_KEY$1));case PER_DEFINED_KEK:return t.byteLength===0;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Integer({name:t.version||EMPTY_STRING}),KEKIdentifier$1.schema(t.kekid||{}),AlgorithmIdentifier$2.schema(t.keyEncryptionAlgorithm||{}),new OctetString$1({name:t.encryptedKey||EMPTY_STRING})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$q);const t=compareSchema(e,e,KEKRecipientInfo$1.schema({names:{version:VERSION$a,kekid:{names:{blockName:KEK_ID}},keyEncryptionAlgorithm:{names:{blockName:KEY_ENCRYPTION_ALGORITHM$1}},encryptedKey:ENCRYPTED_KEY$1}}));AsnError.assertSchema(t,this.className);this.version=t.result.version.valueBlock.valueDec;this.kekid=new KEKIdentifier$1({schema:t.result.kekid});this.keyEncryptionAlgorithm=new AlgorithmIdentifier$2({schema:t.result.keyEncryptionAlgorithm});this.encryptedKey=t.result.encryptedKey}toSchema(){return new Sequence({value:[new Integer({value:this.version}),this.kekid.toSchema(),this.keyEncryptionAlgorithm.toSchema(),this.encryptedKey]})}toJSON(){return{version:this.version,kekid:this.kekid.toJSON(),keyEncryptionAlgorithm:this.keyEncryptionAlgorithm.toJSON(),encryptedKey:this.encryptedKey.toJSON()}}}KEKRecipientInfo$1.CLASS_NAME="KEKRecipientInfo";const VERSION$9="version";const KEY_DERIVATION_ALGORITHM="keyDerivationAlgorithm";const KEY_ENCRYPTION_ALGORITHM="keyEncryptionAlgorithm";const ENCRYPTED_KEY="encryptedKey";const PASSWORD="password";const CLEAR_PROPS$p=[VERSION$9,KEY_DERIVATION_ALGORITHM,KEY_ENCRYPTION_ALGORITHM,ENCRYPTED_KEY];class PasswordRecipientinfo extends PkiObject{constructor(e={}){super();this.version=getParametersValue(e,VERSION$9,PasswordRecipientinfo.defaultValues(VERSION$9));if(KEY_DERIVATION_ALGORITHM in e){this.keyDerivationAlgorithm=getParametersValue(e,KEY_DERIVATION_ALGORITHM,PasswordRecipientinfo.defaultValues(KEY_DERIVATION_ALGORITHM))}this.keyEncryptionAlgorithm=getParametersValue(e,KEY_ENCRYPTION_ALGORITHM,PasswordRecipientinfo.defaultValues(KEY_ENCRYPTION_ALGORITHM));this.encryptedKey=getParametersValue(e,ENCRYPTED_KEY,PasswordRecipientinfo.defaultValues(ENCRYPTED_KEY));this.password=getParametersValue(e,PASSWORD,PasswordRecipientinfo.defaultValues(PASSWORD));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case VERSION$9:return-1;case KEY_DERIVATION_ALGORITHM:return new AlgorithmIdentifier$2;case KEY_ENCRYPTION_ALGORITHM:return new AlgorithmIdentifier$2;case ENCRYPTED_KEY:return new OctetString$1;case PASSWORD:return EMPTY_BUFFER;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case VERSION$9:return t===-1;case KEY_DERIVATION_ALGORITHM:case KEY_ENCRYPTION_ALGORITHM:return t.algorithmId===EMPTY_STRING&&"algorithmParams"in t===false;case ENCRYPTED_KEY:return t.isEqual(PasswordRecipientinfo.defaultValues(ENCRYPTED_KEY));case PASSWORD:return t.byteLength===0;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Integer({name:t.version||EMPTY_STRING}),new Constructed({name:t.keyDerivationAlgorithm||EMPTY_STRING,optional:true,idBlock:{tagClass:3,tagNumber:0},value:AlgorithmIdentifier$2.schema().valueBlock.value}),AlgorithmIdentifier$2.schema(t.keyEncryptionAlgorithm||{}),new OctetString$1({name:t.encryptedKey||EMPTY_STRING})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$p);const t=compareSchema(e,e,PasswordRecipientinfo.schema({names:{version:VERSION$9,keyDerivationAlgorithm:KEY_DERIVATION_ALGORITHM,keyEncryptionAlgorithm:{names:{blockName:KEY_ENCRYPTION_ALGORITHM}},encryptedKey:ENCRYPTED_KEY}}));AsnError.assertSchema(t,this.className);this.version=t.result.version.valueBlock.valueDec;if(KEY_DERIVATION_ALGORITHM in t.result){this.keyDerivationAlgorithm=new AlgorithmIdentifier$2({schema:new Sequence({value:t.result.keyDerivationAlgorithm.valueBlock.value})})}this.keyEncryptionAlgorithm=new AlgorithmIdentifier$2({schema:t.result.keyEncryptionAlgorithm});this.encryptedKey=t.result.encryptedKey}toSchema(){const e=[];e.push(new Integer({value:this.version}));if(this.keyDerivationAlgorithm){e.push(new Constructed({idBlock:{tagClass:3,tagNumber:0},value:this.keyDerivationAlgorithm.toSchema().valueBlock.value}))}e.push(this.keyEncryptionAlgorithm.toSchema());e.push(this.encryptedKey);return new Sequence({value:e})}toJSON(){const e={version:this.version,keyEncryptionAlgorithm:this.keyEncryptionAlgorithm.toJSON(),encryptedKey:this.encryptedKey.toJSON()};if(this.keyDerivationAlgorithm){e.keyDerivationAlgorithm=this.keyDerivationAlgorithm.toJSON()}return e}}PasswordRecipientinfo.CLASS_NAME="PasswordRecipientInfo";const ORI_TYPE="oriType";const ORI_VALUE="oriValue";const CLEAR_PROPS$o=[ORI_TYPE,ORI_VALUE];class OtherRecipientInfo$1 extends PkiObject{constructor(e={}){super();this.oriType=getParametersValue(e,ORI_TYPE,OtherRecipientInfo$1.defaultValues(ORI_TYPE));this.oriValue=getParametersValue(e,ORI_VALUE,OtherRecipientInfo$1.defaultValues(ORI_VALUE));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case ORI_TYPE:return EMPTY_STRING;case ORI_VALUE:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case ORI_TYPE:return t===EMPTY_STRING;case ORI_VALUE:return Object.keys(t).length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new ObjectIdentifier$1({name:t.oriType||EMPTY_STRING}),new Any({name:t.oriValue||EMPTY_STRING})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$o);const t=compareSchema(e,e,OtherRecipientInfo$1.schema({names:{oriType:ORI_TYPE,oriValue:ORI_VALUE}}));AsnError.assertSchema(t,this.className);this.oriType=t.result.oriType.valueBlock.toString();this.oriValue=t.result.oriValue}toSchema(){return new Sequence({value:[new ObjectIdentifier$1({value:this.oriType}),this.oriValue]})}toJSON(){const e={oriType:this.oriType};if(!OtherRecipientInfo$1.compareWithDefault(ORI_VALUE,this.oriValue)){e.oriValue=this.oriValue.toJSON()}return e}}OtherRecipientInfo$1.CLASS_NAME="OtherRecipientInfo";const VARIANT="variant";const VALUE$7="value";const CLEAR_PROPS$n=["blockName"];class RecipientInfo$1 extends PkiObject{constructor(e={}){super();this.variant=getParametersValue(e,VARIANT,RecipientInfo$1.defaultValues(VARIANT));if(VALUE$7 in e){this.value=getParametersValue(e,VALUE$7,RecipientInfo$1.defaultValues(VALUE$7))}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case VARIANT:return-1;case VALUE$7:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case VARIANT:return t===RecipientInfo$1.defaultValues(e);case VALUE$7:return Object.keys(t).length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Choice({value:[KeyTransRecipientInfo$1.schema({names:{blockName:t.blockName||EMPTY_STRING}}),new Constructed({name:t.blockName||EMPTY_STRING,idBlock:{tagClass:3,tagNumber:1},value:KeyAgreeRecipientInfo$1.schema().valueBlock.value}),new Constructed({name:t.blockName||EMPTY_STRING,idBlock:{tagClass:3,tagNumber:2},value:KEKRecipientInfo$1.schema().valueBlock.value}),new Constructed({name:t.blockName||EMPTY_STRING,idBlock:{tagClass:3,tagNumber:3},value:PasswordRecipientinfo.schema().valueBlock.value}),new Constructed({name:t.blockName||EMPTY_STRING,idBlock:{tagClass:3,tagNumber:4},value:OtherRecipientInfo$1.schema().valueBlock.value})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$n);const t=compareSchema(e,e,RecipientInfo$1.schema({names:{blockName:"blockName"}}));AsnError.assertSchema(t,this.className);if(t.result.blockName.idBlock.tagClass===1){this.variant=1;this.value=new KeyTransRecipientInfo$1({schema:t.result.blockName})}else{const e=new Sequence({value:t.result.blockName.valueBlock.value});switch(t.result.blockName.idBlock.tagNumber){case 1:this.variant=2;this.value=new KeyAgreeRecipientInfo$1({schema:e});break;case 2:this.variant=3;this.value=new KEKRecipientInfo$1({schema:e});break;case 3:this.variant=4;this.value=new PasswordRecipientinfo({schema:e});break;case 4:this.variant=5;this.value=new OtherRecipientInfo$1({schema:e});break;default:throw new Error("Incorrect structure of RecipientInfo block")}}}toSchema(){ParameterError.assertEmpty(this.value,"value","RecipientInfo");const e=this.value.toSchema();switch(this.variant){case 1:return e;case 2:case 3:case 4:e.idBlock.tagClass=3;e.idBlock.tagNumber=this.variant-1;return e;default:return new Any}}toJSON(){const e={variant:this.variant};if(this.value&&this.variant>=1&&this.variant<=4){e.value=this.value.toJSON()}return e}}RecipientInfo$1.CLASS_NAME="RecipientInfo";const HASH_ALGORITHM$2="hashAlgorithm";const MASK_GEN_ALGORITHM="maskGenAlgorithm";const P_SOURCE_ALGORITHM="pSourceAlgorithm";const CLEAR_PROPS$m=[HASH_ALGORITHM$2,MASK_GEN_ALGORITHM,P_SOURCE_ALGORITHM];class RSAESOAEPParams extends PkiObject{constructor(e={}){super();this.hashAlgorithm=getParametersValue(e,HASH_ALGORITHM$2,RSAESOAEPParams.defaultValues(HASH_ALGORITHM$2));this.maskGenAlgorithm=getParametersValue(e,MASK_GEN_ALGORITHM,RSAESOAEPParams.defaultValues(MASK_GEN_ALGORITHM));this.pSourceAlgorithm=getParametersValue(e,P_SOURCE_ALGORITHM,RSAESOAEPParams.defaultValues(P_SOURCE_ALGORITHM));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case HASH_ALGORITHM$2:return new AlgorithmIdentifier$2({algorithmId:"1.3.14.3.2.26",algorithmParams:new Null});case MASK_GEN_ALGORITHM:return new AlgorithmIdentifier$2({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:new AlgorithmIdentifier$2({algorithmId:"1.3.14.3.2.26",algorithmParams:new Null}).toSchema()});case P_SOURCE_ALGORITHM:return new AlgorithmIdentifier$2({algorithmId:"1.2.840.113549.1.1.9",algorithmParams:new OctetString$1({valueHex:new Uint8Array([218,57,163,238,94,107,75,13,50,85,191,239,149,96,24,144,175,216,7,9]).buffer})});default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Constructed({idBlock:{tagClass:3,tagNumber:0},optional:true,value:[AlgorithmIdentifier$2.schema(t.hashAlgorithm||{})]}),new Constructed({idBlock:{tagClass:3,tagNumber:1},optional:true,value:[AlgorithmIdentifier$2.schema(t.maskGenAlgorithm||{})]}),new Constructed({idBlock:{tagClass:3,tagNumber:2},optional:true,value:[AlgorithmIdentifier$2.schema(t.pSourceAlgorithm||{})]})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$m);const t=compareSchema(e,e,RSAESOAEPParams.schema({names:{hashAlgorithm:{names:{blockName:HASH_ALGORITHM$2}},maskGenAlgorithm:{names:{blockName:MASK_GEN_ALGORITHM}},pSourceAlgorithm:{names:{blockName:P_SOURCE_ALGORITHM}}}}));AsnError.assertSchema(t,this.className);if(HASH_ALGORITHM$2 in t.result)this.hashAlgorithm=new AlgorithmIdentifier$2({schema:t.result.hashAlgorithm});if(MASK_GEN_ALGORITHM in t.result)this.maskGenAlgorithm=new AlgorithmIdentifier$2({schema:t.result.maskGenAlgorithm});if(P_SOURCE_ALGORITHM in t.result)this.pSourceAlgorithm=new AlgorithmIdentifier$2({schema:t.result.pSourceAlgorithm})}toSchema(){const e=[];if(!this.hashAlgorithm.isEqual(RSAESOAEPParams.defaultValues(HASH_ALGORITHM$2))){e.push(new Constructed({idBlock:{tagClass:3,tagNumber:0},value:[this.hashAlgorithm.toSchema()]}))}if(!this.maskGenAlgorithm.isEqual(RSAESOAEPParams.defaultValues(MASK_GEN_ALGORITHM))){e.push(new Constructed({idBlock:{tagClass:3,tagNumber:1},value:[this.maskGenAlgorithm.toSchema()]}))}if(!this.pSourceAlgorithm.isEqual(RSAESOAEPParams.defaultValues(P_SOURCE_ALGORITHM))){e.push(new Constructed({idBlock:{tagClass:3,tagNumber:2},value:[this.pSourceAlgorithm.toSchema()]}))}return new Sequence({value:e})}toJSON(){const e={};if(!this.hashAlgorithm.isEqual(RSAESOAEPParams.defaultValues(HASH_ALGORITHM$2))){e.hashAlgorithm=this.hashAlgorithm.toJSON()}if(!this.maskGenAlgorithm.isEqual(RSAESOAEPParams.defaultValues(MASK_GEN_ALGORITHM))){e.maskGenAlgorithm=this.maskGenAlgorithm.toJSON()}if(!this.pSourceAlgorithm.isEqual(RSAESOAEPParams.defaultValues(P_SOURCE_ALGORITHM))){e.pSourceAlgorithm=this.pSourceAlgorithm.toJSON()}return e}}RSAESOAEPParams.CLASS_NAME="RSAESOAEPParams";const KEY_INFO="keyInfo";const ENTITY_U_INFO="entityUInfo";const SUPP_PUB_INFO="suppPubInfo";const CLEAR_PROPS$l=[KEY_INFO,ENTITY_U_INFO,SUPP_PUB_INFO];class ECCCMSSharedInfo extends PkiObject{constructor(e={}){super();this.keyInfo=getParametersValue(e,KEY_INFO,ECCCMSSharedInfo.defaultValues(KEY_INFO));if(ENTITY_U_INFO in e){this.entityUInfo=getParametersValue(e,ENTITY_U_INFO,ECCCMSSharedInfo.defaultValues(ENTITY_U_INFO))}this.suppPubInfo=getParametersValue(e,SUPP_PUB_INFO,ECCCMSSharedInfo.defaultValues(SUPP_PUB_INFO));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case KEY_INFO:return new AlgorithmIdentifier$2;case ENTITY_U_INFO:return new OctetString$1;case SUPP_PUB_INFO:return new OctetString$1;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case KEY_INFO:case ENTITY_U_INFO:case SUPP_PUB_INFO:return t.isEqual(ECCCMSSharedInfo.defaultValues(e));default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[AlgorithmIdentifier$2.schema(t.keyInfo||{}),new Constructed({name:t.entityUInfo||EMPTY_STRING,idBlock:{tagClass:3,tagNumber:0},optional:true,value:[new OctetString$1]}),new Constructed({name:t.suppPubInfo||EMPTY_STRING,idBlock:{tagClass:3,tagNumber:2},value:[new OctetString$1]})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$l);const t=compareSchema(e,e,ECCCMSSharedInfo.schema({names:{keyInfo:{names:{blockName:KEY_INFO}},entityUInfo:ENTITY_U_INFO,suppPubInfo:SUPP_PUB_INFO}}));AsnError.assertSchema(t,this.className);this.keyInfo=new AlgorithmIdentifier$2({schema:t.result.keyInfo});if(ENTITY_U_INFO in t.result)this.entityUInfo=t.result.entityUInfo.valueBlock.value[0];this.suppPubInfo=t.result.suppPubInfo.valueBlock.value[0]}toSchema(){const e=[];e.push(this.keyInfo.toSchema());if(this.entityUInfo){e.push(new Constructed({idBlock:{tagClass:3,tagNumber:0},value:[this.entityUInfo]}))}e.push(new Constructed({idBlock:{tagClass:3,tagNumber:2},value:[this.suppPubInfo]}));return new Sequence({value:e})}toJSON(){const e={keyInfo:this.keyInfo.toJSON(),suppPubInfo:this.suppPubInfo.toJSON()};if(this.entityUInfo){e.entityUInfo=this.entityUInfo.toJSON()}return e}}ECCCMSSharedInfo.CLASS_NAME="ECCCMSSharedInfo";const VERSION$8="version";const ORIGINATOR_INFO="originatorInfo";const RECIPIENT_INFOS="recipientInfos";const ENCRYPTED_CONTENT_INFO="encryptedContentInfo";const UNPROTECTED_ATTRS="unprotectedAttrs";const CLEAR_PROPS$k=[VERSION$8,ORIGINATOR_INFO,RECIPIENT_INFOS,ENCRYPTED_CONTENT_INFO,UNPROTECTED_ATTRS];const defaultEncryptionParams={kdfAlgorithm:"SHA-512",kekEncryptionLength:256};const curveLengthByName={"P-256":256,"P-384":384,"P-521":528};class EnvelopedData$1 extends PkiObject{constructor(e={}){super();this.version=getParametersValue(e,VERSION$8,EnvelopedData$1.defaultValues(VERSION$8));if(ORIGINATOR_INFO in e){this.originatorInfo=getParametersValue(e,ORIGINATOR_INFO,EnvelopedData$1.defaultValues(ORIGINATOR_INFO))}this.recipientInfos=getParametersValue(e,RECIPIENT_INFOS,EnvelopedData$1.defaultValues(RECIPIENT_INFOS));this.encryptedContentInfo=getParametersValue(e,ENCRYPTED_CONTENT_INFO,EnvelopedData$1.defaultValues(ENCRYPTED_CONTENT_INFO));if(UNPROTECTED_ATTRS in e){this.unprotectedAttrs=getParametersValue(e,UNPROTECTED_ATTRS,EnvelopedData$1.defaultValues(UNPROTECTED_ATTRS))}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case VERSION$8:return 0;case ORIGINATOR_INFO:return new OriginatorInfo$1;case RECIPIENT_INFOS:return[];case ENCRYPTED_CONTENT_INFO:return new EncryptedContentInfo$1;case UNPROTECTED_ATTRS:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case VERSION$8:return t===EnvelopedData$1.defaultValues(e);case ORIGINATOR_INFO:return t.certs.certificates.length===0&&t.crls.crls.length===0;case RECIPIENT_INFOS:case UNPROTECTED_ATTRS:return t.length===0;case ENCRYPTED_CONTENT_INFO:return EncryptedContentInfo$1.compareWithDefault("contentType",t.contentType)&&(EncryptedContentInfo$1.compareWithDefault("contentEncryptionAlgorithm",t.contentEncryptionAlgorithm)&&EncryptedContentInfo$1.compareWithDefault("encryptedContent",t.encryptedContent));default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Integer({name:t.version||EMPTY_STRING}),new Constructed({name:t.originatorInfo||EMPTY_STRING,optional:true,idBlock:{tagClass:3,tagNumber:0},value:OriginatorInfo$1.schema().valueBlock.value}),new Set$3({value:[new Repeated({name:t.recipientInfos||EMPTY_STRING,value:RecipientInfo$1.schema()})]}),EncryptedContentInfo$1.schema(t.encryptedContentInfo||{}),new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:1},value:[new Repeated({name:t.unprotectedAttrs||EMPTY_STRING,value:Attribute$3.schema()})]})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$k);const t=compareSchema(e,e,EnvelopedData$1.schema({names:{version:VERSION$8,originatorInfo:ORIGINATOR_INFO,recipientInfos:RECIPIENT_INFOS,encryptedContentInfo:{names:{blockName:ENCRYPTED_CONTENT_INFO}},unprotectedAttrs:UNPROTECTED_ATTRS}}));AsnError.assertSchema(t,this.className);this.version=t.result.version.valueBlock.valueDec;if(ORIGINATOR_INFO in t.result){this.originatorInfo=new OriginatorInfo$1({schema:new Sequence({value:t.result.originatorInfo.valueBlock.value})})}this.recipientInfos=Array.from(t.result.recipientInfos,(e=>new RecipientInfo$1({schema:e})));this.encryptedContentInfo=new EncryptedContentInfo$1({schema:t.result.encryptedContentInfo});if(UNPROTECTED_ATTRS in t.result)this.unprotectedAttrs=Array.from(t.result.unprotectedAttrs,(e=>new Attribute$3({schema:e})))}toSchema(){const e=[];e.push(new Integer({value:this.version}));if(this.originatorInfo){e.push(new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:0},value:this.originatorInfo.toSchema().valueBlock.value}))}e.push(new Set$3({value:Array.from(this.recipientInfos,(e=>e.toSchema()))}));e.push(this.encryptedContentInfo.toSchema());if(this.unprotectedAttrs){e.push(new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.unprotectedAttrs,(e=>e.toSchema()))}))}return new Sequence({value:e})}toJSON(){const e={version:this.version,recipientInfos:Array.from(this.recipientInfos,(e=>e.toJSON())),encryptedContentInfo:this.encryptedContentInfo.toJSON()};if(this.originatorInfo)e.originatorInfo=this.originatorInfo.toJSON();if(this.unprotectedAttrs)e.unprotectedAttrs=Array.from(this.unprotectedAttrs,(e=>e.toJSON()));return e}addRecipientByCertificate(e,t,r,n=getCrypto(true)){const i=Object.assign({useOAEP:true,oaepHashAlgorithm:"SHA-512"},defaultEncryptionParams,t||{});if(e.subjectPublicKeyInfo.algorithm.algorithmId.indexOf("1.2.840.113549")!==-1)r=1;else{if(e.subjectPublicKeyInfo.algorithm.algorithmId.indexOf("1.2.840.10045")!==-1)r=2;else throw new Error(`Unknown type of certificate's public key: ${e.subjectPublicKeyInfo.algorithm.algorithmId}`)}switch(r){case 1:{let t;let r;if(i.useOAEP===true){t=n.getOIDByAlgorithm({name:"RSA-OAEP"},true,"keyEncryptionAlgorithm");const e=n.getOIDByAlgorithm({name:i.oaepHashAlgorithm},true,"RSAES-OAEP-params");const s=new AlgorithmIdentifier$2({algorithmId:e,algorithmParams:new Null});const a=new RSAESOAEPParams({hashAlgorithm:s,maskGenAlgorithm:new AlgorithmIdentifier$2({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:s.toSchema()})});r=a.toSchema()}else{t=n.getOIDByAlgorithm({name:"RSAES-PKCS1-v1_5"});if(t===EMPTY_STRING)throw new Error("Can not find OID for RSAES-PKCS1-v1_5");r=new Null}const s=new KeyTransRecipientInfo$1({version:0,rid:new IssuerAndSerialNumber$1({issuer:e.issuer,serialNumber:e.serialNumber}),keyEncryptionAlgorithm:new AlgorithmIdentifier$2({algorithmId:t,algorithmParams:r}),recipientCertificate:e});this.recipientInfos.push(new RecipientInfo$1({variant:1,value:s}))}break;case 2:{const t=new KeyAgreeRecipientIdentifier$1({variant:1,value:new IssuerAndSerialNumber$1({issuer:e.issuer,serialNumber:e.serialNumber})});this._addKeyAgreeRecipientInfo(t,i,{recipientCertificate:e},n)}break;default:throw new Error(`Unknown "variant" value: ${r}`)}return true}addRecipientByPreDefinedData(e,t={},r,n=getCrypto(true)){ArgumentError.assert(e,"preDefinedData","ArrayBuffer");if(!e.byteLength){throw new Error("Pre-defined data could have zero length")}if(!t.keyIdentifier){const e=new ArrayBuffer(16);const r=new Uint8Array(e);n.getRandomValues(r);t.keyIdentifier=e}if(!t.hmacHashAlgorithm)t.hmacHashAlgorithm="SHA-512";if(t.iterationCount===undefined){t.iterationCount=2048}if(!t.keyEncryptionAlgorithm){t.keyEncryptionAlgorithm={name:"AES-KW",length:256}}if(!t.keyEncryptionAlgorithmParams)t.keyEncryptionAlgorithmParams=new Null;switch(r){case 1:{const r=n.getOIDByAlgorithm(t.keyEncryptionAlgorithm,true,"keyEncryptionAlgorithm");const i=new KEKRecipientInfo$1({version:4,kekid:new KEKIdentifier$1({keyIdentifier:new OctetString$1({valueHex:t.keyIdentifier})}),keyEncryptionAlgorithm:new AlgorithmIdentifier$2({algorithmId:r,algorithmParams:t.keyEncryptionAlgorithmParams}),preDefinedKEK:e});this.recipientInfos.push(new RecipientInfo$1({variant:3,value:i}))}break;case 2:{const r=n.getOIDByAlgorithm({name:"PBKDF2"},true,"keyDerivationAlgorithm");const i=new ArrayBuffer(64);const s=new Uint8Array(i);n.getRandomValues(s);const a=n.getOIDByAlgorithm({name:"HMAC",hash:{name:t.hmacHashAlgorithm}},true,"hmacHashAlgorithm");const o=new PBKDF2Params({salt:new OctetString$1({valueHex:i}),iterationCount:t.iterationCount,prf:new AlgorithmIdentifier$2({algorithmId:a,algorithmParams:new Null})});const f=n.getOIDByAlgorithm(t.keyEncryptionAlgorithm,true,"keyEncryptionAlgorithm");const c=new PasswordRecipientinfo({version:0,keyDerivationAlgorithm:new AlgorithmIdentifier$2({algorithmId:r,algorithmParams:o.toSchema()}),keyEncryptionAlgorithm:new AlgorithmIdentifier$2({algorithmId:f,algorithmParams:t.keyEncryptionAlgorithmParams}),password:e});this.recipientInfos.push(new RecipientInfo$1({variant:4,value:c}))}break;default:throw new Error(`Unknown value for "variant": ${r}`)}}addRecipientByKeyIdentifier(e,t,r,n=getCrypto(true)){const i=Object.assign({},defaultEncryptionParams,r||{});const s=new KeyAgreeRecipientIdentifier$1({variant:2,value:new RecipientKeyIdentifier$1({subjectKeyIdentifier:new OctetString$1({valueHex:t})})});this._addKeyAgreeRecipientInfo(s,i,{recipientPublicKey:e},n)}_addKeyAgreeRecipientInfo(e,t,r,n=getCrypto(true)){const i=new RecipientEncryptedKey$1({rid:e});const s=n.getOIDByAlgorithm({name:"AES-KW",length:t.kekEncryptionLength},true,"keyEncryptionAlgorithm");const a=new AlgorithmIdentifier$2({algorithmId:s});const o=n.getOIDByAlgorithm({name:"ECDH",kdf:t.kdfAlgorithm},true,"KeyAgreeRecipientInfo");const f=new ArrayBuffer(64);const c=new Uint8Array(f);n.getRandomValues(c);const u={version:3,ukm:new OctetString$1({valueHex:f}),keyEncryptionAlgorithm:new AlgorithmIdentifier$2({algorithmId:o,algorithmParams:a.toSchema()}),recipientEncryptedKeys:new RecipientEncryptedKeys$1({encryptedKeys:[i]})};const l=new KeyAgreeRecipientInfo$1(Object.assign(u,r));this.recipientInfos.push(new RecipientInfo$1({variant:2,value:l}))}async encrypt(e,t,r=getCrypto(true)){const n=new ArrayBuffer(16);const i=new Uint8Array(n);r.getRandomValues(i);const s=new Uint8Array(t);const a=r.getOIDByAlgorithm(e,true,"contentEncryptionAlgorithm");const o=await r.generateKey(e,true,["encrypt"]);const f=await r.encrypt({name:e.name,iv:i},o,s);const c=await r.exportKey("raw",o);this.version=2;this.encryptedContentInfo=new EncryptedContentInfo$1({contentType:"1.2.840.113549.1.7.1",contentEncryptionAlgorithm:new AlgorithmIdentifier$2({algorithmId:a,algorithmParams:new OctetString$1({valueHex:n})}),encryptedContent:new OctetString$1({valueHex:f})});const u=async e=>{const t=this.recipientInfos[e].value;let n;let i;if(t.recipientPublicKey){n=t.recipientPublicKey.algorithm.namedCurve;i=t.recipientPublicKey}else if(t.recipientCertificate){const s=t.recipientCertificate.subjectPublicKeyInfo.algorithm.algorithmParams;if(s.constructor.blockName()!==ObjectIdentifier$1.blockName())throw new Error(`Incorrect "recipientCertificate" for index ${e}`);const a=s.valueBlock.toString();switch(a){case"1.2.840.10045.3.1.7":n="P-256";break;case"1.3.132.0.34":n="P-384";break;case"1.3.132.0.35":n="P-521";break;default:throw new Error(`Incorrect curve OID for index ${e}`)}i=await t.recipientCertificate.getPublicKey({algorithm:{algorithm:{name:"ECDH",namedCurve:n},usages:[]}},r)}else{throw new Error("Unsupported RecipientInfo")}const s=curveLengthByName[n];const a=await r.generateKey({name:"ECDH",namedCurve:n},true,["deriveBits"]);const f=await r.exportKey("spki",a.publicKey);const c=await r.deriveBits({name:"ECDH",public:i},a.privateKey,s);const u=new AlgorithmIdentifier$2({schema:t.keyEncryptionAlgorithm.algorithmParams});const l=r.getAlgorithmByOID(u.algorithmId,true,"aesKWAlgorithm");let h=l.length;const d=new ArrayBuffer(4);const p=new Uint8Array(d);for(let e=3;e>=0;e--){p[e]=h;h>>=8}const y=new ECCCMSSharedInfo({keyInfo:new AlgorithmIdentifier$2({algorithmId:u.algorithmId}),entityUInfo:t.ukm,suppPubInfo:new OctetString$1({valueHex:d})});const m=y.toSchema().toBER(false);const g=r.getAlgorithmByOID(t.keyEncryptionAlgorithm.algorithmId,true,"ecdhAlgorithm");const b=await kdf(g.kdf,c,l.length,m,r);const A=await r.importKey("raw",b,{name:"AES-KW"},true,["wrapKey"]);const w=await r.wrapKey("raw",o,A,{name:"AES-KW"});const E=new OriginatorIdentifierOrKey$1;E.variant=3;E.value=OriginatorPublicKey$1.fromBER(f);t.originator=E;t.recipientEncryptedKeys.encryptedKeys[0].encryptedKey=new OctetString$1({valueHex:w});return{ecdhPrivateKey:a.privateKey}};const l=async e=>{const t=this.recipientInfos[e].value;const n=r.getAlgorithmByOID(t.keyEncryptionAlgorithm.algorithmId,true,"keyEncryptionAlgorithm");if(n.name==="RSA-OAEP"){const e=t.keyEncryptionAlgorithm.algorithmParams;const i=new RSAESOAEPParams({schema:e});n.hash=r.getAlgorithmByOID(i.hashAlgorithm.algorithmId);if("name"in n.hash===false)throw new Error(`Incorrect OID for hash algorithm: ${i.hashAlgorithm.algorithmId}`)}try{const e=await t.recipientCertificate.getPublicKey({algorithm:{algorithm:n,usages:["encrypt","wrapKey"]}},r);const i=await r.encrypt(e.algorithm,e,c);t.encryptedKey=new OctetString$1({valueHex:i})}catch{}};const h=async e=>{const t=this.recipientInfos[e].value;const n=r.getAlgorithmByOID(t.keyEncryptionAlgorithm.algorithmId,true,"kekAlgorithm");const i=await r.importKey("raw",new Uint8Array(t.preDefinedKEK),n,true,["wrapKey"]);const s=await r.wrapKey("raw",o,i,n);t.encryptedKey=new OctetString$1({valueHex:s})};const d=async e=>{const t=this.recipientInfos[e].value;let n;if(!t.keyDerivationAlgorithm)throw new Error('Please append encoded "keyDerivationAlgorithm"');if(!t.keyDerivationAlgorithm.algorithmParams)throw new Error('Incorrectly encoded "keyDerivationAlgorithm"');try{n=new PBKDF2Params({schema:t.keyDerivationAlgorithm.algorithmParams})}catch(e){throw new Error('Incorrectly encoded "keyDerivationAlgorithm"')}const i=new Uint8Array(t.password);const s=await r.importKey("raw",i,"PBKDF2",false,["deriveKey"]);const a=r.getAlgorithmByOID(t.keyEncryptionAlgorithm.algorithmId,true,"kekAlgorithm");let f="SHA-1";if(n.prf){const e=r.getAlgorithmByOID(n.prf.algorithmId,true,"prfAlgorithm");f=e.hash.name}const c=new Uint8Array(n.salt.valueBlock.valueHex);const u=n.iterationCount;const l=await r.deriveKey({name:"PBKDF2",hash:{name:f},salt:c,iterations:u},s,a,true,["wrapKey"]);const h=await r.wrapKey("raw",o,l,a);t.encryptedKey=new OctetString$1({valueHex:h})};const p=[];for(let e=0;e<this.recipientInfos.length;e++){switch(this.recipientInfos[e].variant){case 1:p.push(await l(e));break;case 2:p.push(await u(e));break;case 3:p.push(await h(e));break;case 4:p.push(await d(e));break;default:throw new Error(`Unknown recipient type in array with index ${e}`)}}return p}async decrypt(e,t,r=getCrypto(true)){const n=t||{};if(e+1>this.recipientInfos.length){throw new Error(`Maximum value for "index" is: ${this.recipientInfos.length-1}`)}const i=async e=>{const t=this.recipientInfos[e].value;let i;let s;let a;const o=t.originator;if(n.recipientCertificate){const t=n.recipientCertificate.subjectPublicKeyInfo.algorithm.algorithmParams;if(t.constructor.blockName()!==ObjectIdentifier$1.blockName()){throw new Error(`Incorrect "recipientCertificate" for index ${e}`)}i=t.valueBlock.toString()}else if(o.value.algorithm.algorithmParams){const t=o.value.algorithm.algorithmParams;if(t.constructor.blockName()!==ObjectIdentifier$1.blockName()){throw new Error(`Incorrect originator for index ${e}`)}i=t.valueBlock.toString()}else{throw new Error('Parameter "recipientCertificate" is mandatory for "KeyAgreeRecipientInfo" if algorithm params are missing from originator')}if(!n.recipientPrivateKey)throw new Error('Parameter "recipientPrivateKey" is mandatory for "KeyAgreeRecipientInfo"');switch(i){case"1.2.840.10045.3.1.7":s="P-256";a=256;break;case"1.3.132.0.34":s="P-384";a=384;break;case"1.3.132.0.35":s="P-521";a=528;break;default:throw new Error(`Incorrect curve OID for index ${e}`)}const f=await r.importKey("pkcs8",n.recipientPrivateKey,{name:"ECDH",namedCurve:s},true,["deriveBits"]);if("algorithmParams"in o.value.algorithm===false)o.value.algorithm.algorithmParams=new ObjectIdentifier$1({value:i});const c=o.value.toSchema().toBER(false);const u=await r.importKey("spki",c,{name:"ECDH",namedCurve:s},true,[]);const l=await r.deriveBits({name:"ECDH",public:u},f,a);async function h(e){e=e||false;const n=new AlgorithmIdentifier$2({schema:t.keyEncryptionAlgorithm.algorithmParams});const i=r.getAlgorithmByOID(n.algorithmId,true,"kwAlgorithm");let s=i.length;const a=new ArrayBuffer(4);const o=new Uint8Array(a);for(let e=3;e>=0;e--){o[e]=s;s>>=8}const f={algorithmId:n.algorithmId};if(e){f.algorithmParams=new Null}const c=new ECCCMSSharedInfo({keyInfo:new AlgorithmIdentifier$2(f),entityUInfo:t.ukm,suppPubInfo:new OctetString$1({valueHex:a})});const u=c.toSchema().toBER(false);const h=r.getAlgorithmByOID(t.keyEncryptionAlgorithm.algorithmId,true,"ecdhAlgorithm");if(!h.name){throw new Error(`Incorrect OID for key encryption algorithm: ${t.keyEncryptionAlgorithm.algorithmId}`)}return kdf(h.kdf,l,i.length,u,r)}const d=await h();const p=async e=>r.importKey("raw",e,{name:"AES-KW"},true,["unwrapKey"]);const y=await p(d);const m=async e=>{const n=this.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId;const i=r.getAlgorithmByOID(n,true,"contentEncryptionAlgorithm");return r.unwrapKey("raw",t.recipientEncryptedKeys.encryptedKeys[0].encryptedKey.valueBlock.valueHexView,e,{name:"AES-KW"},i,true,["decrypt"])};try{return await m(y)}catch{const e=await h(true);const t=await p(e);return m(t)}};const s=async e=>{const t=this.recipientInfos[e].value;if(!n.recipientPrivateKey){throw new Error('Parameter "recipientPrivateKey" is mandatory for "KeyTransRecipientInfo"')}const i=r.getAlgorithmByOID(t.keyEncryptionAlgorithm.algorithmId,true,"keyEncryptionAlgorithm");if(i.name==="RSA-OAEP"){const e=t.keyEncryptionAlgorithm.algorithmParams;const n=new RSAESOAEPParams({schema:e});i.hash=r.getAlgorithmByOID(n.hashAlgorithm.algorithmId);if("name"in i.hash===false)throw new Error(`Incorrect OID for hash algorithm: ${n.hashAlgorithm.algorithmId}`)}const s=await r.importKey("pkcs8",n.recipientPrivateKey,i,true,["decrypt"]);const a=await r.decrypt(s.algorithm,s,t.encryptedKey.valueBlock.valueHexView);const o=this.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId;const f=r.getAlgorithmByOID(o,true,"contentEncryptionAlgorithm");if("name"in f===false)throw new Error(`Incorrect "contentEncryptionAlgorithm": ${o}`);return r.importKey("raw",a,f,true,["decrypt"])};const a=async e=>{const t=this.recipientInfos[e].value;if(!n.preDefinedData)throw new Error('Parameter "preDefinedData" is mandatory for "KEKRecipientInfo"');const i=r.getAlgorithmByOID(t.keyEncryptionAlgorithm.algorithmId,true,"kekAlgorithm");const s=await r.importKey("raw",n.preDefinedData,i,true,["unwrapKey"]);const a=this.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId;const o=r.getAlgorithmByOID(a,true,"contentEncryptionAlgorithm");if(!o.name){throw new Error(`Incorrect "contentEncryptionAlgorithm": ${a}`)}return r.unwrapKey("raw",t.encryptedKey.valueBlock.valueHexView,s,i,o,true,["decrypt"])};const o=async e=>{const t=this.recipientInfos[e].value;let i;if(!n.preDefinedData){throw new Error('Parameter "preDefinedData" is mandatory for "KEKRecipientInfo"')}if(!t.keyDerivationAlgorithm){throw new Error('Please append encoded "keyDerivationAlgorithm"')}if(!t.keyDerivationAlgorithm.algorithmParams){throw new Error('Incorrectly encoded "keyDerivationAlgorithm"')}try{i=new PBKDF2Params({schema:t.keyDerivationAlgorithm.algorithmParams})}catch(e){throw new Error('Incorrectly encoded "keyDerivationAlgorithm"')}const s=await r.importKey("raw",n.preDefinedData,"PBKDF2",false,["deriveKey"]);const a=r.getAlgorithmByOID(t.keyEncryptionAlgorithm.algorithmId,true,"keyEncryptionAlgorithm");const o=i.prf?r.getAlgorithmByOID(i.prf.algorithmId,true,"prfAlgorithm").hash.name:"SHA-1";const f=new Uint8Array(i.salt.valueBlock.valueHex);const c=i.iterationCount;const u=await r.deriveKey({name:"PBKDF2",hash:{name:o},salt:f,iterations:c},s,a,true,["unwrapKey"]);const l=this.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId;const h=r.getAlgorithmByOID(l,true,"contentEncryptionAlgorithm");return r.unwrapKey("raw",t.encryptedKey.valueBlock.valueHexView,u,a,h,true,["decrypt"])};let f;switch(this.recipientInfos[e].variant){case 1:f=await s(e);break;case 2:f=await i(e);break;case 3:f=await a(e);break;case 4:f=await o(e);break;default:throw new Error(`Unknown recipient type in array with index ${e}`)}const c=this.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId;const u=r.getAlgorithmByOID(c,true,"contentEncryptionAlgorithm");const l=this.encryptedContentInfo.contentEncryptionAlgorithm.algorithmParams.valueBlock.valueHex;const h=new Uint8Array(l);if(!this.encryptedContentInfo.encryptedContent){throw new Error("Required property `encryptedContent` is empty")}const d=this.encryptedContentInfo.getEncryptedContent();return r.decrypt({name:u.name,iv:h},f,d)}}EnvelopedData$1.CLASS_NAME="EnvelopedData";const SAFE_CONTENTS="safeContents";const PARSED_VALUE$1="parsedValue";const CONTENT_INFOS="contentInfos";class AuthenticatedSafe$1 extends PkiObject{constructor(e={}){super();this.safeContents=getParametersValue(e,SAFE_CONTENTS,AuthenticatedSafe$1.defaultValues(SAFE_CONTENTS));if(PARSED_VALUE$1 in e){this.parsedValue=getParametersValue(e,PARSED_VALUE$1,AuthenticatedSafe$1.defaultValues(PARSED_VALUE$1))}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case SAFE_CONTENTS:return[];case PARSED_VALUE$1:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case SAFE_CONTENTS:return t.length===0;case PARSED_VALUE$1:return t instanceof Object&&Object.keys(t).length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Repeated({name:t.contentInfos||EMPTY_STRING,value:ContentInfo$1.schema()})]})}fromSchema(e){clearProps(e,[CONTENT_INFOS]);const t=compareSchema(e,e,AuthenticatedSafe$1.schema({names:{contentInfos:CONTENT_INFOS}}));AsnError.assertSchema(t,this.className);this.safeContents=Array.from(t.result.contentInfos,(e=>new ContentInfo$1({schema:e})))}toSchema(){return new Sequence({value:Array.from(this.safeContents,(e=>e.toSchema()))})}toJSON(){return{safeContents:Array.from(this.safeContents,(e=>e.toJSON()))}}async parseInternalValues(e,t=getCrypto(true)){ParameterError.assert(e,SAFE_CONTENTS);ArgumentError.assert(e.safeContents,SAFE_CONTENTS,"Array");if(e.safeContents.length!==this.safeContents.length){throw new ArgumentError('Length of "parameters.safeContents" must be equal to "this.safeContents.length"')}this.parsedValue={safeContents:[]};for(const[r,n]of this.safeContents.entries()){const i=e.safeContents[r];const s=`parameters.safeContents[${r}]`;switch(n.contentType){case id_ContentType_Data:{ArgumentError.assert(n.content,"this.safeContents[j].content",OctetString$1);const e=n.content.getValue();this.parsedValue.safeContents.push({privacyMode:0,value:SafeContents$1.fromBER(e)})}break;case id_ContentType_EnvelopedData:{const e=new EnvelopedData$1({schema:n.content});ParameterError.assert(s,i,"recipientCertificate","recipientKey");const r=i;const a=r.recipientCertificate;const o=r.recipientKey;const f=await e.decrypt(0,{recipientCertificate:a,recipientPrivateKey:o},t);this.parsedValue.safeContents.push({privacyMode:2,value:SafeContents$1.fromBER(f)})}break;case id_ContentType_EncryptedData:{const e=new EncryptedData$1({schema:n.content});ParameterError.assert(s,i,"password");const r=i.password;const a=await e.decrypt({password:r},t);this.parsedValue.safeContents.push({privacyMode:1,value:SafeContents$1.fromBER(a)})}break;default:throw new Error(`Unknown "contentType" for AuthenticatedSafe: " ${n.contentType}`)}}}async makeInternalValues(e,t=getCrypto(true)){if(!this.parsedValue){throw new Error('Please run "parseValues" first or add "parsedValue" manually')}ArgumentError.assert(this.parsedValue,"this.parsedValue","object");ArgumentError.assert(this.parsedValue.safeContents,"this.parsedValue.safeContents","Array");ArgumentError.assert(e,"parameters","object");ParameterError.assert(e,"safeContents");ArgumentError.assert(e.safeContents,"parameters.safeContents","Array");if(e.safeContents.length!==this.parsedValue.safeContents.length){throw new ArgumentError('Length of "parameters.safeContents" must be equal to "this.parsedValue.safeContents"')}this.safeContents=[];for(const[r,n]of this.parsedValue.safeContents.entries()){ParameterError.assert("content",n,"privacyMode","value");ArgumentError.assert(n.value,"content.value",SafeContents$1);switch(n.privacyMode){case 0:{const e=n.value.toSchema().toBER(false);this.safeContents.push(new ContentInfo$1({contentType:"1.2.840.113549.1.7.1",content:new OctetString$1({valueHex:e})}))}break;case 1:{const t=new EncryptedData$1;const i=e.safeContents[r];i.contentToEncrypt=n.value.toSchema().toBER(false);await t.encrypt(i);this.safeContents.push(new ContentInfo$1({contentType:"1.2.840.113549.1.7.6",content:t.toSchema()}))}break;case 2:{const i=new EnvelopedData$1;const s=n.value.toSchema().toBER(false);const a=e.safeContents[r];ParameterError.assert(`parameters.safeContents[${r}]`,a,"encryptingCertificate","encryptionAlgorithm");switch(true){case a.encryptionAlgorithm.name.toLowerCase()==="aes-cbc":case a.encryptionAlgorithm.name.toLowerCase()==="aes-gcm":break;default:throw new Error(`Incorrect parameter "encryptionAlgorithm" in "parameters.safeContents[i]": ${a.encryptionAlgorithm}`)}switch(true){case a.encryptionAlgorithm.length===128:case a.encryptionAlgorithm.length===192:case a.encryptionAlgorithm.length===256:break;default:throw new Error(`Incorrect parameter "encryptionAlgorithm.length" in "parameters.safeContents[i]": ${a.encryptionAlgorithm.length}`)}const o=a.encryptionAlgorithm;i.addRecipientByCertificate(a.encryptingCertificate,{},undefined,t);await i.encrypt(o,s,t);this.safeContents.push(new ContentInfo$1({contentType:"1.2.840.113549.1.7.3",content:i.toSchema()}))}break;default:throw new Error(`Incorrect value for "content.privacyMode": ${n.privacyMode}`)}}return this}}AuthenticatedSafe$1.CLASS_NAME="AuthenticatedSafe";const HASH_ALGORITHM$1="hashAlgorithm";const ISSUER_NAME_HASH="issuerNameHash";const ISSUER_KEY_HASH="issuerKeyHash";const SERIAL_NUMBER$1="serialNumber";const CLEAR_PROPS$j=[HASH_ALGORITHM$1,ISSUER_NAME_HASH,ISSUER_KEY_HASH,SERIAL_NUMBER$1];class CertID extends PkiObject{constructor(e={}){super();this.hashAlgorithm=getParametersValue(e,HASH_ALGORITHM$1,CertID.defaultValues(HASH_ALGORITHM$1));this.issuerNameHash=getParametersValue(e,ISSUER_NAME_HASH,CertID.defaultValues(ISSUER_NAME_HASH));this.issuerKeyHash=getParametersValue(e,ISSUER_KEY_HASH,CertID.defaultValues(ISSUER_KEY_HASH));this.serialNumber=getParametersValue(e,SERIAL_NUMBER$1,CertID.defaultValues(SERIAL_NUMBER$1));if(e.schema){this.fromSchema(e.schema)}}static async create(e,t,r=getCrypto(true)){const n=new CertID;await n.createForCertificate(e,t,r);return n}static defaultValues(e){switch(e){case HASH_ALGORITHM$1:return new AlgorithmIdentifier$2;case ISSUER_NAME_HASH:case ISSUER_KEY_HASH:return new OctetString$1;case SERIAL_NUMBER$1:return new Integer;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case HASH_ALGORITHM$1:return t.algorithmId===EMPTY_STRING&&"algorithmParams"in t===false;case ISSUER_NAME_HASH:case ISSUER_KEY_HASH:case SERIAL_NUMBER$1:return t.isEqual(CertID.defaultValues(SERIAL_NUMBER$1));default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[AlgorithmIdentifier$2.schema(t.hashAlgorithmObject||{names:{blockName:t.hashAlgorithm||EMPTY_STRING}}),new OctetString$1({name:t.issuerNameHash||EMPTY_STRING}),new OctetString$1({name:t.issuerKeyHash||EMPTY_STRING}),new Integer({name:t.serialNumber||EMPTY_STRING})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$j);const t=compareSchema(e,e,CertID.schema({names:{hashAlgorithm:HASH_ALGORITHM$1,issuerNameHash:ISSUER_NAME_HASH,issuerKeyHash:ISSUER_KEY_HASH,serialNumber:SERIAL_NUMBER$1}}));AsnError.assertSchema(t,this.className);this.hashAlgorithm=new AlgorithmIdentifier$2({schema:t.result.hashAlgorithm});this.issuerNameHash=t.result.issuerNameHash;this.issuerKeyHash=t.result.issuerKeyHash;this.serialNumber=t.result.serialNumber}toSchema(){return new Sequence({value:[this.hashAlgorithm.toSchema(),this.issuerNameHash,this.issuerKeyHash,this.serialNumber]})}toJSON(){return{hashAlgorithm:this.hashAlgorithm.toJSON(),issuerNameHash:this.issuerNameHash.toJSON(),issuerKeyHash:this.issuerKeyHash.toJSON(),serialNumber:this.serialNumber.toJSON()}}isEqual(e){if(this.hashAlgorithm.algorithmId!==e.hashAlgorithm.algorithmId){return false}if(!BufferSourceConverter_1.isEqual(this.issuerNameHash.valueBlock.valueHexView,e.issuerNameHash.valueBlock.valueHexView)){return false}if(!BufferSourceConverter_1.isEqual(this.issuerKeyHash.valueBlock.valueHexView,e.issuerKeyHash.valueBlock.valueHexView)){return false}if(!this.serialNumber.isEqual(e.serialNumber)){return false}return true}async createForCertificate(e,t,r=getCrypto(true)){ParameterError.assert(t,HASH_ALGORITHM$1,"issuerCertificate");const n=r.getOIDByAlgorithm({name:t.hashAlgorithm},true,"hashAlgorithm");this.hashAlgorithm=new AlgorithmIdentifier$2({algorithmId:n,algorithmParams:new Null});const i=t.issuerCertificate;this.serialNumber=e.serialNumber;const s=await r.digest({name:t.hashAlgorithm},i.subject.toSchema().toBER(false));this.issuerNameHash=new OctetString$1({valueHex:s});const a=i.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHexView;const o=await r.digest({name:t.hashAlgorithm},a);this.issuerKeyHash=new OctetString$1({valueHex:o})}}CertID.CLASS_NAME="CertID";const CERT_ID="certID";const CERT_STATUS="certStatus";const THIS_UPDATE="thisUpdate";const NEXT_UPDATE="nextUpdate";const SINGLE_EXTENSIONS="singleExtensions";const CLEAR_PROPS$i=[CERT_ID,CERT_STATUS,THIS_UPDATE,NEXT_UPDATE,SINGLE_EXTENSIONS];class SingleResponse extends PkiObject{constructor(e={}){super();this.certID=getParametersValue(e,CERT_ID,SingleResponse.defaultValues(CERT_ID));this.certStatus=getParametersValue(e,CERT_STATUS,SingleResponse.defaultValues(CERT_STATUS));this.thisUpdate=getParametersValue(e,THIS_UPDATE,SingleResponse.defaultValues(THIS_UPDATE));if(NEXT_UPDATE in e){this.nextUpdate=getParametersValue(e,NEXT_UPDATE,SingleResponse.defaultValues(NEXT_UPDATE))}if(SINGLE_EXTENSIONS in e){this.singleExtensions=getParametersValue(e,SINGLE_EXTENSIONS,SingleResponse.defaultValues(SINGLE_EXTENSIONS))}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case CERT_ID:return new CertID;case CERT_STATUS:return{};case THIS_UPDATE:case NEXT_UPDATE:return new Date(0,0,0);case SINGLE_EXTENSIONS:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case CERT_ID:return CertID.compareWithDefault("hashAlgorithm",t.hashAlgorithm)&&CertID.compareWithDefault("issuerNameHash",t.issuerNameHash)&&CertID.compareWithDefault("issuerKeyHash",t.issuerKeyHash)&&CertID.compareWithDefault("serialNumber",t.serialNumber);case CERT_STATUS:return Object.keys(t).length===0;case THIS_UPDATE:case NEXT_UPDATE:return t===SingleResponse.defaultValues(e);default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[CertID.schema(t.certID||{}),new Choice({value:[new Primitive({name:t.certStatus||EMPTY_STRING,idBlock:{tagClass:3,tagNumber:0}}),new Constructed({name:t.certStatus||EMPTY_STRING,idBlock:{tagClass:3,tagNumber:1},value:[new GeneralizedTime,new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:0},value:[new Enumerated]})]}),new Primitive({name:t.certStatus||EMPTY_STRING,idBlock:{tagClass:3,tagNumber:2},lenBlock:{length:1}})]}),new GeneralizedTime({name:t.thisUpdate||EMPTY_STRING}),new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:0},value:[new GeneralizedTime({name:t.nextUpdate||EMPTY_STRING})]}),new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:1},value:[Extensions$1.schema(t.singleExtensions||{})]})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$i);const t=compareSchema(e,e,SingleResponse.schema({names:{certID:{names:{blockName:CERT_ID}},certStatus:CERT_STATUS,thisUpdate:THIS_UPDATE,nextUpdate:NEXT_UPDATE,singleExtensions:{names:{blockName:SINGLE_EXTENSIONS}}}}));AsnError.assertSchema(t,this.className);this.certID=new CertID({schema:t.result.certID});this.certStatus=t.result.certStatus;this.thisUpdate=t.result.thisUpdate.toDate();if(NEXT_UPDATE in t.result)this.nextUpdate=t.result.nextUpdate.toDate();if(SINGLE_EXTENSIONS in t.result)this.singleExtensions=Array.from(t.result.singleExtensions.valueBlock.value,(e=>new Extension$2({schema:e})))}toSchema(){const e=[];e.push(this.certID.toSchema());e.push(this.certStatus);e.push(new GeneralizedTime({valueDate:this.thisUpdate}));if(this.nextUpdate){e.push(new Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new GeneralizedTime({valueDate:this.nextUpdate})]}))}if(this.singleExtensions){e.push(new Sequence({value:Array.from(this.singleExtensions,(e=>e.toSchema()))}))}return new Sequence({value:e})}toJSON(){const e={certID:this.certID.toJSON(),certStatus:this.certStatus.toJSON(),thisUpdate:this.thisUpdate};if(this.nextUpdate){e.nextUpdate=this.nextUpdate}if(this.singleExtensions){e.singleExtensions=Array.from(this.singleExtensions,(e=>e.toJSON()))}return e}}SingleResponse.CLASS_NAME="SingleResponse";const TBS$2="tbs";const VERSION$7="version";const RESPONDER_ID="responderID";const PRODUCED_AT="producedAt";const RESPONSES="responses";const RESPONSE_EXTENSIONS="responseExtensions";const RESPONSE_DATA="ResponseData";const RESPONSE_DATA_VERSION=`${RESPONSE_DATA}.${VERSION$7}`;const RESPONSE_DATA_RESPONDER_ID=`${RESPONSE_DATA}.${RESPONDER_ID}`;const RESPONSE_DATA_PRODUCED_AT=`${RESPONSE_DATA}.${PRODUCED_AT}`;const RESPONSE_DATA_RESPONSES=`${RESPONSE_DATA}.${RESPONSES}`;const RESPONSE_DATA_RESPONSE_EXTENSIONS=`${RESPONSE_DATA}.${RESPONSE_EXTENSIONS}`;const CLEAR_PROPS$h=[RESPONSE_DATA,RESPONSE_DATA_VERSION,RESPONSE_DATA_RESPONDER_ID,RESPONSE_DATA_PRODUCED_AT,RESPONSE_DATA_RESPONSES,RESPONSE_DATA_RESPONSE_EXTENSIONS];class ResponseData extends PkiObject{constructor(e={}){super();this.tbsView=new Uint8Array(getParametersValue(e,TBS$2,ResponseData.defaultValues(TBS$2)));if(VERSION$7 in e){this.version=getParametersValue(e,VERSION$7,ResponseData.defaultValues(VERSION$7))}this.responderID=getParametersValue(e,RESPONDER_ID,ResponseData.defaultValues(RESPONDER_ID));this.producedAt=getParametersValue(e,PRODUCED_AT,ResponseData.defaultValues(PRODUCED_AT));this.responses=getParametersValue(e,RESPONSES,ResponseData.defaultValues(RESPONSES));if(RESPONSE_EXTENSIONS in e){this.responseExtensions=getParametersValue(e,RESPONSE_EXTENSIONS,ResponseData.defaultValues(RESPONSE_EXTENSIONS))}if(e.schema){this.fromSchema(e.schema)}}get tbs(){return BufferSourceConverter_1.toArrayBuffer(this.tbsView)}set tbs(e){this.tbsView=new Uint8Array(e)}static defaultValues(e){switch(e){case VERSION$7:return 0;case TBS$2:return EMPTY_BUFFER;case RESPONDER_ID:return{};case PRODUCED_AT:return new Date(0,0,0);case RESPONSES:case RESPONSE_EXTENSIONS:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case TBS$2:return t.byteLength===0;case RESPONDER_ID:return Object.keys(t).length===0;case PRODUCED_AT:return t===ResponseData.defaultValues(e);case RESPONSES:case RESPONSE_EXTENSIONS:return t.length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||RESPONSE_DATA,value:[new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:0},value:[new Integer({name:t.version||RESPONSE_DATA_VERSION})]}),new Choice({value:[new Constructed({name:t.responderID||RESPONSE_DATA_RESPONDER_ID,idBlock:{tagClass:3,tagNumber:1},value:[RelativeDistinguishedNames.schema(t.ResponseDataByName||{names:{blockName:"ResponseData.byName"}})]}),new Constructed({name:t.responderID||RESPONSE_DATA_RESPONDER_ID,idBlock:{tagClass:3,tagNumber:2},value:[new OctetString$1({name:t.ResponseDataByKey||"ResponseData.byKey"})]})]}),new GeneralizedTime({name:t.producedAt||RESPONSE_DATA_PRODUCED_AT}),new Sequence({value:[new Repeated({name:RESPONSE_DATA_RESPONSES,value:SingleResponse.schema(t.response||{})})]}),new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:1},value:[Extensions$1.schema(t.extensions||{names:{blockName:RESPONSE_DATA_RESPONSE_EXTENSIONS}})]})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$h);const t=compareSchema(e,e,ResponseData.schema());AsnError.assertSchema(t,this.className);this.tbsView=t.result.ResponseData.valueBeforeDecodeView;if(RESPONSE_DATA_VERSION in t.result)this.version=t.result[RESPONSE_DATA_VERSION].valueBlock.valueDec;if(t.result[RESPONSE_DATA_RESPONDER_ID].idBlock.tagNumber===1)this.responderID=new RelativeDistinguishedNames({schema:t.result[RESPONSE_DATA_RESPONDER_ID].valueBlock.value[0]});else this.responderID=t.result[RESPONSE_DATA_RESPONDER_ID].valueBlock.value[0];this.producedAt=t.result[RESPONSE_DATA_PRODUCED_AT].toDate();this.responses=Array.from(t.result[RESPONSE_DATA_RESPONSES],(e=>new SingleResponse({schema:e})));if(RESPONSE_DATA_RESPONSE_EXTENSIONS in t.result)this.responseExtensions=Array.from(t.result[RESPONSE_DATA_RESPONSE_EXTENSIONS].valueBlock.value,(e=>new Extension$2({schema:e})))}toSchema(e=false){let t;if(e===false){if(!this.tbsView.byteLength){return ResponseData.schema()}const e=fromBER(this.tbsView);AsnError.assert(e,"TBS Response Data");t=e.result}else{const e=[];if(VERSION$7 in this){e.push(new Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new Integer({value:this.version})]}))}if(this.responderID instanceof RelativeDistinguishedNames){e.push(new Constructed({idBlock:{tagClass:3,tagNumber:1},value:[this.responderID.toSchema()]}))}else{e.push(new Constructed({idBlock:{tagClass:3,tagNumber:2},value:[this.responderID]}))}e.push(new GeneralizedTime({valueDate:this.producedAt}));e.push(new Sequence({value:Array.from(this.responses,(e=>e.toSchema()))}));if(this.responseExtensions){e.push(new Constructed({idBlock:{tagClass:3,tagNumber:1},value:[new Sequence({value:Array.from(this.responseExtensions,(e=>e.toSchema()))})]}))}t=new Sequence({value:e})}return t}toJSON(){const e={};if(VERSION$7 in this){e.version=this.version}if(this.responderID){e.responderID=this.responderID}if(this.producedAt){e.producedAt=this.producedAt}if(this.responses){e.responses=Array.from(this.responses,(e=>e.toJSON()))}if(this.responseExtensions){e.responseExtensions=Array.from(this.responseExtensions,(e=>e.toJSON()))}return e}}ResponseData.CLASS_NAME="ResponseData";const TRUSTED_CERTS="trustedCerts";const CERTS$2="certs";const CRLS$1="crls";const OCSPS$1="ocsps";const CHECK_DATE="checkDate";const FIND_ORIGIN="findOrigin";const FIND_ISSUER="findIssuer";var ChainValidationCode;(function(e){e[e["unknown"]=-1]="unknown";e[e["success"]=0]="success";e[e["noRevocation"]=11]="noRevocation";e[e["noPath"]=60]="noPath";e[e["noValidPath"]=97]="noValidPath"})(ChainValidationCode||(ChainValidationCode={}));class ChainValidationError extends Error{constructor(e,t){super(t);this.name=ChainValidationError.NAME;this.code=e;this.message=t}}ChainValidationError.NAME="ChainValidationError";function isTrusted(e,t){for(let r=0;r<t.length;r++){if(BufferSourceConverter_1.isEqual(e.tbsView,t[r].tbsView)){return true}}return false}class CertificateChainValidationEngine{constructor(e={}){this.trustedCerts=getParametersValue(e,TRUSTED_CERTS,this.defaultValues(TRUSTED_CERTS));this.certs=getParametersValue(e,CERTS$2,this.defaultValues(CERTS$2));this.crls=getParametersValue(e,CRLS$1,this.defaultValues(CRLS$1));this.ocsps=getParametersValue(e,OCSPS$1,this.defaultValues(OCSPS$1));this.checkDate=getParametersValue(e,CHECK_DATE,this.defaultValues(CHECK_DATE));this.findOrigin=getParametersValue(e,FIND_ORIGIN,this.defaultValues(FIND_ORIGIN));this.findIssuer=getParametersValue(e,FIND_ISSUER,this.defaultValues(FIND_ISSUER))}static defaultFindOrigin(e,t){if(e.tbsView.byteLength===0){e.tbsView=new Uint8Array(e.encodeTBS().toBER())}for(const r of t.certs){if(r.tbsView.byteLength===0){r.tbsView=new Uint8Array(r.encodeTBS().toBER())}if(BufferSourceConverter_1.isEqual(e.tbsView,r.tbsView))return"Intermediate Certificates"}for(const r of t.trustedCerts){if(r.tbsView.byteLength===0)r.tbsView=new Uint8Array(r.encodeTBS().toBER());if(BufferSourceConverter_1.isEqual(e.tbsView,r.tbsView))return"Trusted Certificates"}return"Unknown"}async defaultFindIssuer(e,t,r=getCrypto(true)){const n=[];let i=null;let s=null;let a=null;if(e.subject.isEqual(e.issuer)){try{const t=await e.verify(undefined,r);if(t){return[e]}}catch(e){}}if(e.extensions){for(const t of e.extensions){if(t.extnID===id_AuthorityKeyIdentifier&&t.parsedValue instanceof AuthorityKeyIdentifier$1){if(t.parsedValue.keyIdentifier){i=t.parsedValue.keyIdentifier}else{if(t.parsedValue.authorityCertIssuer){s=t.parsedValue.authorityCertIssuer}if(t.parsedValue.authorityCertSerialNumber){a=t.parsedValue.authorityCertSerialNumber}}break}}}function o(t){if(i!==null){if(t.extensions){let e=false;for(const r of t.extensions){if(r.extnID===id_SubjectKeyIdentifier&&r.parsedValue){e=true;if(BufferSourceConverter_1.isEqual(r.parsedValue.valueBlock.valueHex,i.valueBlock.valueHexView)){n.push(t)}break}}if(e){return}}}let r=false;if(a!==null)r=t.serialNumber.isEqual(a);if(s!==null){if(t.subject.isEqual(s)){if(r)n.push(t)}}else{if(e.issuer.isEqual(t.subject))n.push(t)}}for(const e of t.trustedCerts){o(e)}for(const e of t.certs){o(e)}for(let t=0;t<n.length;t++){try{const i=await e.verify(n[t],r);if(i===false)n.splice(t,1)}catch(e){n.splice(t,1)}}return n}defaultValues(e){switch(e){case TRUSTED_CERTS:return[];case CERTS$2:return[];case CRLS$1:return[];case OCSPS$1:return[];case CHECK_DATE:return new Date;case FIND_ORIGIN:return CertificateChainValidationEngine.defaultFindOrigin;case FIND_ISSUER:return this.defaultFindIssuer;default:throw new Error(`Invalid member name for CertificateChainValidationEngine class: ${e}`)}}async sort(e=false,t=getCrypto(true)){const r=[];const n=async(e,t)=>{const r=[];function i(e){let t=true;for(let r=0;r<e.length;r++){for(let n=0;n<e.length;n++){if(n===r)continue;if(e[r]===e[n]){t=false;break}}if(!t)break}return t}if(isTrusted(e,this.trustedCerts)){return[[e]]}const s=await this.findIssuer(e,this,t);if(s.length===0){throw new Error("No valid certificate paths found")}for(let a=0;a<s.length;a++){if(BufferSourceConverter_1.isEqual(s[a].tbsView,e.tbsView)){r.push([s[a]]);continue}const o=await n(s[a],t);for(let e=0;e<o.length;e++){const t=o[e].slice();t.splice(0,0,s[a]);if(i(t))r.push(t);else r.push(o[e])}}return r};const i=async e=>{const n=[];const i=[];const s=[];n.push(...r.filter((t=>e.issuer.isEqual(t.subject))));if(n.length===0){return{status:1,statusMessage:"No certificate's issuers"}}i.push(...this.crls.filter((t=>t.issuer.isEqual(e.issuer))));if(i.length===0){return{status:2,statusMessage:"No CRLs for specific certificate issuer"}}for(let e=0;e<i.length;e++){const r=i[e];if(r.nextUpdate&&r.nextUpdate.value<this.checkDate){continue}for(let r=0;r<n.length;r++){try{const a=await i[e].verify({issuerCertificate:n[r]},t);if(a){s.push({crl:i[e],certificate:n[r]});break}}catch(e){}}}if(s.length){return{status:0,statusMessage:EMPTY_STRING,result:s}}return{status:3,statusMessage:"No valid CRLs found"}};const s=async(e,r)=>{const n=t.getAlgorithmByOID(e.signatureAlgorithm.algorithmId);if(!n.name){return 1}if(!n.hash){return 1}for(let n=0;n<this.ocsps.length;n++){const i=this.ocsps[n];const s=await i.getCertificateStatus(e,r,t);if(s.isForCertificate){if(s.status===0)return 0;return 1}}return 2};async function a(e,t=false){let r=false;let n=false;let i=false;let s=false;if(e.extensions){for(let t=0;t<e.extensions.length;t++){const a=e.extensions[t];if(a.critical&&!a.parsedValue){return{result:false,resultCode:6,resultMessage:`Unable to parse critical certificate extension: ${a.extnID}`}}if(a.extnID===id_KeyUsage){i=true;const e=new Uint8Array(a.parsedValue.valueBlock.valueHex);if((e[0]&4)===4)n=true;if((e[0]&2)===2)s=true}if(a.extnID===id_BasicConstraints){if("cA"in a.parsedValue){if(a.parsedValue.cA===true)r=true}}}if(n===true&&r===false){return{result:false,resultCode:3,resultMessage:'Unable to build certificate chain - using "keyCertSign" flag set without BasicConstraints'}}if(i===true&&r===true&&n===false){return{result:false,resultCode:4,resultMessage:'Unable to build certificate chain - "keyCertSign" flag was not set'}}if(r===true&&i===true&&(t&&s===false)){return{result:false,resultCode:5,resultMessage:'Unable to build certificate chain - intermediate certificate must have "cRLSign" key usage flag'}}}if(r===false){return{result:false,resultCode:7,resultMessage:"Unable to build certificate chain - more than one possible end-user certificate"}}return{result:true,resultCode:0,resultMessage:EMPTY_STRING}}const o=async(t,r)=>{for(let e=0;e<t.length;e++){if(t[e].notBefore.value>r||t[e].notAfter.value<r){return{result:false,resultCode:8,resultMessage:"The certificate is either not yet valid or expired"}}}if(t.length<2){return{result:false,resultCode:9,resultMessage:"Too short certificate path"}}for(let e=t.length-2;e>=0;e--){if(t[e].issuer.isEqual(t[e].subject)===false){if(t[e].issuer.isEqual(t[e+1].subject)===false){return{result:false,resultCode:10,resultMessage:"Incorrect name chaining"}}}}if(this.crls.length!==0||this.ocsps.length!==0){for(let r=0;r<t.length-1;r++){let n=2;let o={status:0,statusMessage:EMPTY_STRING};if(this.ocsps.length!==0){n=await s(t[r],t[r+1]);switch(n){case 0:continue;case 1:return{result:false,resultCode:12,resultMessage:"One of certificates was revoked via OCSP response"}}}if(this.crls.length!==0){o=await i(t[r]);if(o.status===0&&o.result){for(let e=0;e<o.result.length;e++){const n=o.result[e].crl.isCertificateRevoked(t[r]);if(n){return{result:false,resultCode:12,resultMessage:"One of certificates had been revoked"}}const i=await a(o.result[e].certificate,true);if(i.result===false){return{result:false,resultCode:13,resultMessage:"CRL issuer certificate is not a CA certificate or does not have crlSign flag"}}}}else{if(e===false){throw new ChainValidationError(ChainValidationCode.noRevocation,`No revocation values found for one of certificates: ${o.statusMessage}`)}}}else{if(n===2){return{result:false,resultCode:11,resultMessage:"No revocation values found for one of certificates"}}}if(n===2&&o.status===2&&e){const e=t[r+1];let n=false;if(e.extensions){for(const t of e.extensions){switch(t.extnID){case id_CRLDistributionPoints:case id_FreshestCRL:case id_AuthorityInfoAccess:n=true;break}}}if(n){throw new ChainValidationError(ChainValidationCode.noRevocation,`No revocation values found for one of certificates: ${o.statusMessage}`)}}}}for(const[e,r]of t.entries()){if(!e){continue}const t=await a(r);if(!t.result){return{result:false,resultCode:14,resultMessage:"One of intermediate certificates is not a CA certificate"}}}return{result:true}};r.push(...this.trustedCerts);r.push(...this.certs);for(let e=0;e<r.length;e++){for(let t=0;t<r.length;t++){if(e===t)continue;if(BufferSourceConverter_1.isEqual(r[e].tbsView,r[t].tbsView)){r.splice(t,1);e=0;break}}}const f=r[r.length-1];let c;const u=[f];c=await n(f,t);if(c.length===0){throw new ChainValidationError(ChainValidationCode.noPath,"Unable to find certificate path")}for(let e=0;e<c.length;e++){let t=false;for(let r=0;r<c[e].length;r++){const n=c[e][r];for(let e=0;e<this.trustedCerts.length;e++){if(BufferSourceConverter_1.isEqual(n.tbsView,this.trustedCerts[e].tbsView)){t=true;break}}if(t)break}if(!t){c.splice(e,1);e=0}}if(c.length===0){throw new ChainValidationError(ChainValidationCode.noValidPath,"No valid certificate paths found")}let l=c[0].length;let h=0;for(let e=0;e<c.length;e++){if(c[e].length<l){l=c[e].length;h=e}}for(let e=0;e<c[h].length;e++)u.push(c[h][e]);c=await o(u,this.checkDate);if(c.result===false)throw c;return u}async verify(e={},t=getCrypto(true)){function r(e,t){const r=stringPrep(e);const n=stringPrep(t);const i=r.split(".");const s=n.split(".");const a=i.length;const o=s.length;if(a===0||o===0||a<o){return false}for(let e=0;e<a;e++){if(i[e].length===0){return false}}for(let e=0;e<o;e++){if(s[e].length===0){if(e===0){if(o===1){return false}continue}return false}}for(let e=0;e<o;e++){if(s[o-1-e].length===0){continue}if(i[a-1-e].localeCompare(s[o-1-e])!==0){return false}}return true}function n(e,t){const n=stringPrep(e);const i=stringPrep(t);const s=n.split("@");const a=i.split("@");if(s.length===0||a.length===0||s.length<a.length)return false;if(a.length===1){const e=r(s[1],a[0]);if(e){const e=s[1].split(".");const t=a[0].split(".");if(t[0].length===0)return true;return e.length===t.length}return false}return n.localeCompare(i)===0}function i(e,t){let n=stringPrep(e);const i=stringPrep(t);const s=n.split("/");const a=i.split("/");if(a.length>1)return false;if(s.length>1){for(let e=0;e<s.length;e++){if(s[e].length>0&&s[e].charAt(s[e].length-1)!==":"){const t=s[e].split(":");n=t[0];break}}}const o=r(n,i);if(o){const e=n.split(".");const t=i.split(".");if(t[0].length===0)return true;return e.length===t.length}return false}function s(e,t){const r=e.valueBlock.valueHexView;const n=t.valueBlock.valueHexView;if(r.length===4&&n.length===8){for(let e=0;e<4;e++){if((r[e]^n[e])&n[e+4])return false}return true}if(r.length===16&&n.length===32){for(let e=0;e<16;e++){if((r[e]^n[e])&n[e+16])return false}return true}return false}function a(e,t){if(e.typesAndValues.length===0||t.typesAndValues.length===0)return true;if(e.typesAndValues.length<t.typesAndValues.length)return false;let r=true;let n=0;for(let i=0;i<t.typesAndValues.length;i++){let s=false;for(let a=n;a<e.typesAndValues.length;a++){s=e.typesAndValues[a].isEqual(t.typesAndValues[i]);if(e.typesAndValues[a].type===t.typesAndValues[i].type)r=r&&s;if(s===true){if(n===0||n===a){n=a+1;break}else return false}}if(s===false)return false}return n===0?false:r}try{if(this.certs.length===0)throw new Error("Empty certificate array");const o=e.passedWhenNotRevValues||false;const f=e.initialPolicySet||[id_AnyPolicy];const c=e.initialExplicitPolicy||false;const u=e.initialPolicyMappingInhibit||false;const l=e.initialInhibitPolicy||false;const h=e.initialPermittedSubtreesSet||[];const d=e.initialExcludedSubtreesSet||[];const p=e.initialRequiredNameForms||[];let y=c;let m=u;let g=l;const b=[false,false,false];let A=0;let w=0;let E=0;let v=h;let _=d;const S=p;let $=1;this.certs=await this.sort(o,t);const T=[];T.push(id_AnyPolicy);const I=[];const C=new Array(this.certs.length-1);for(let e=0;e<this.certs.length-1;e++)C[e]=true;I.push(C);const P=new Array(this.certs.length-1);const R=new Array(this.certs.length-1);let N=y?this.certs.length-1:-1;for(let e=this.certs.length-2;e>=0;e--,$++){const t=this.certs[e];if(t.extensions){for(let r=0;r<t.extensions.length;r++){const n=t.extensions[r];if(n.extnID===id_CertificatePolicies){R[e]=n.parsedValue;for(let t=0;t<T.length;t++){if(T[t]===id_AnyPolicy){delete I[t][e];break}}for(let t=0;t<n.parsedValue.certificatePolicies.length;t++){let r=-1;const i=n.parsedValue.certificatePolicies[t].policyIdentifier;for(let e=0;e<T.length;e++){if(i===T[e]){r=e;break}}if(r===-1){T.push(i);const t=new Array(this.certs.length-1);t[e]=true;I.push(t)}else I[r][e]=true}}if(n.extnID===id_PolicyMappings){if(m){return{result:false,resultCode:98,resultMessage:"Policy mapping prohibited"}}P[e]=n.parsedValue}if(n.extnID===id_PolicyConstraints){if(y===false){if(n.parsedValue.requireExplicitPolicy===0){y=true;N=e}else{if(b[0]===false){b[0]=true;A=n.parsedValue.requireExplicitPolicy}else A=A>n.parsedValue.requireExplicitPolicy?n.parsedValue.requireExplicitPolicy:A}if(n.parsedValue.inhibitPolicyMapping===0)m=true;else{if(b[1]===false){b[1]=true;w=n.parsedValue.inhibitPolicyMapping+1}else w=w>n.parsedValue.inhibitPolicyMapping+1?n.parsedValue.inhibitPolicyMapping+1:w}}}if(n.extnID===id_InhibitAnyPolicy){if(g===false){if(n.parsedValue.valueBlock.valueDec===0)g=true;else{if(b[2]===false){b[2]=true;E=n.parsedValue.valueBlock.valueDec}else E=E>n.parsedValue.valueBlock.valueDec?n.parsedValue.valueBlock.valueDec:E}}}}if(g===true){let t=-1;for(let e=0;e<T.length;e++){if(T[e]===id_AnyPolicy){t=e;break}}if(t!==-1)delete I[0][e]}if(y===false){if(b[0]===true){A--;if(A===0){y=true;N=e;b[0]=false}}}if(m===false){if(b[1]===true){w--;if(w===0){m=true;b[1]=false}}}if(g===false){if(b[2]===true){E--;if(E===0){g=true;b[2]=false}}}}}for(let e=0;e<this.certs.length-1;e++){if(e<this.certs.length-2&&typeof P[e+1]!=="undefined"){for(let t=0;t<P[e+1].mappings.length;t++){if(P[e+1].mappings[t].issuerDomainPolicy===id_AnyPolicy||P[e+1].mappings[t].subjectDomainPolicy===id_AnyPolicy){return{result:false,resultCode:99,resultMessage:'The "anyPolicy" should not be a part of policy mapping scheme'}}let r=-1;let n=-1;for(let i=0;i<T.length;i++){if(T[i]===P[e+1].mappings[t].issuerDomainPolicy)r=i;if(T[i]===P[e+1].mappings[t].subjectDomainPolicy)n=i}if(typeof I[r][e]!=="undefined")delete I[r][e];for(let i=0;i<R[e].certificatePolicies.length;i++){if(P[e+1].mappings[t].subjectDomainPolicy===R[e].certificatePolicies[i].policyIdentifier){if(r!==-1&&n!==-1){for(let t=0;t<=e;t++){if(typeof I[n][t]!=="undefined"){I[r][t]=true;delete I[n][t]}}}}}}}}for(let e=0;e<T.length;e++){if(T[e]===id_AnyPolicy){for(let t=0;t<N;t++)delete I[e][t]}}const k=[];for(let e=0;e<I.length;e++){let t=true;for(let r=0;r<this.certs.length-1;r++){let n=false;if(r<N&&T[e]===id_AnyPolicy&&T.length>1){t=false;break}if(typeof I[e][r]==="undefined"){if(r>=N){for(let e=0;e<T.length;e++){if(T[e]===id_AnyPolicy){if(I[e][r]===true)n=true;break}}}if(!n){t=false;break}}}if(t===true)k.push(T[e])}let O=[];if(f.length===1&&f[0]===id_AnyPolicy&&y===false)O=f;else{if(k.length===1&&k[0]===id_AnyPolicy)O=f;else{for(let e=0;e<k.length;e++){for(let t=0;t<f.length;t++){if(f[t]===k[e]||f[t]===id_AnyPolicy){O.push(k[e]);break}}}}}const x={result:O.length>0,resultCode:0,resultMessage:O.length>0?EMPTY_STRING:'Zero "userConstrPolicies" array, no intersections with "authConstrPolicies"',authConstrPolicies:k,userConstrPolicies:O,explicitPolicyIndicator:y,policyMappings:P,certificatePath:this.certs};if(O.length===0)return x;if(x.result===false)return x;$=1;for(let e=this.certs.length-2;e>=0;e--,$++){const t=this.certs[e];let o=[];let f=[];let c=[];if(t.extensions){for(let e=0;e<t.extensions.length;e++){const r=t.extensions[e];if(r.extnID===id_NameConstraints){if("permittedSubtrees"in r.parsedValue)f=f.concat(r.parsedValue.permittedSubtrees);if("excludedSubtrees"in r.parsedValue)c=c.concat(r.parsedValue.excludedSubtrees)}if(r.extnID===id_SubjectAltName)o=o.concat(r.parsedValue.altNames)}}let u=S.length<=0;for(let e=0;e<S.length;e++){switch(S[e].base.type){case 4:{if(S[e].base.value.typesAndValues.length!==t.subject.typesAndValues.length)continue;u=true;for(let r=0;r<t.subject.typesAndValues.length;r++){if(t.subject.typesAndValues[r].type!==S[e].base.value.typesAndValues[r].type){u=false;break}}if(u===true)break}break}}if(u===false){x.result=false;x.resultCode=21;x.resultMessage="No necessary name form found";throw x}const l=[[],[],[],[],[]];for(let e=0;e<v.length;e++){switch(v[e].base.type){case 1:l[0].push(v[e]);break;case 2:l[1].push(v[e]);break;case 4:l[2].push(v[e]);break;case 6:l[3].push(v[e]);break;case 7:l[4].push(v[e]);break}}for(let e=0;e<5;e++){let f=false;let c=false;const u=l[e];for(let l=0;l<u.length;l++){switch(e){case 0:if(o.length>0){for(let e=0;e<o.length;e++){if(o[e].type===1){c=true;f=f||n(o[e].value,u[l].base.value)}}}else{for(let e=0;e<t.subject.typesAndValues.length;e++){if(t.subject.typesAndValues[e].type==="1.2.840.113549.1.9.1"||t.subject.typesAndValues[e].type==="0.9.2342.19200300.100.1.3"){c=true;f=f||n(t.subject.typesAndValues[e].value.valueBlock.value,u[l].base.value)}}}break;case 1:if(o.length>0){for(let e=0;e<o.length;e++){if(o[e].type===2){c=true;f=f||r(o[e].value,u[l].base.value)}}}break;case 2:c=true;f=a(t.subject,u[l].base.value);break;case 3:if(o.length>0){for(let e=0;e<o.length;e++){if(o[e].type===6){c=true;f=f||i(o[e].value,u[l].base.value)}}}break;case 4:if(o.length>0){for(let e=0;e<o.length;e++){if(o[e].type===7){c=true;f=f||s(o[e].value,u[l].base.value)}}}break}if(f)break}if(f===false&&u.length>0&&c){x.result=false;x.resultCode=41;x.resultMessage='Failed to meet "permitted sub-trees" name constraint';throw x}}let h=false;for(let e=0;e<_.length;e++){switch(_[e].base.type){case 1:if(o.length>=0){for(let t=0;t<o.length;t++){if(o[t].type===1)h=h||n(o[t].value,_[e].base.value)}}else{for(let r=0;r<t.subject.typesAndValues.length;r++){if(t.subject.typesAndValues[r].type==="1.2.840.113549.1.9.1"||t.subject.typesAndValues[r].type==="0.9.2342.19200300.100.1.3")h=h||n(t.subject.typesAndValues[r].value.valueBlock.value,_[e].base.value)}}break;case 2:if(o.length>0){for(let t=0;t<o.length;t++){if(o[t].type===2)h=h||r(o[t].value,_[e].base.value)}}break;case 4:h=h||a(t.subject,_[e].base.value);break;case 6:if(o.length>0){for(let t=0;t<o.length;t++){if(o[t].type===6)h=h||i(o[t].value,_[e].base.value)}}break;case 7:if(o.length>0){for(let t=0;t<o.length;t++){if(o[t].type===7)h=h||s(o[t].value,_[e].base.value)}}break}if(h)break}if(h===true){x.result=false;x.resultCode=42;x.resultMessage='Failed to meet "excluded sub-trees" name constraint';throw x}v=v.concat(f);_=_.concat(c)}return x}catch(e){if(e instanceof Error){if(e instanceof ChainValidationError){return{result:false,resultCode:e.code,resultMessage:e.message,error:e}}return{result:false,resultCode:ChainValidationCode.unknown,resultMessage:e.message,error:e}}if(e&&typeof e==="object"&&"resultMessage"in e){return e}return{result:false,resultCode:-1,resultMessage:`${e}`}}}}const TBS_RESPONSE_DATA="tbsResponseData";const SIGNATURE_ALGORITHM$3="signatureAlgorithm";const SIGNATURE$2="signature";const CERTS$1="certs";const BASIC_OCSP_RESPONSE="BasicOCSPResponse";const BASIC_OCSP_RESPONSE_TBS_RESPONSE_DATA=`${BASIC_OCSP_RESPONSE}.${TBS_RESPONSE_DATA}`;const BASIC_OCSP_RESPONSE_SIGNATURE_ALGORITHM=`${BASIC_OCSP_RESPONSE}.${SIGNATURE_ALGORITHM$3}`;const BASIC_OCSP_RESPONSE_SIGNATURE=`${BASIC_OCSP_RESPONSE}.${SIGNATURE$2}`;const BASIC_OCSP_RESPONSE_CERTS=`${BASIC_OCSP_RESPONSE}.${CERTS$1}`;const CLEAR_PROPS$g=[BASIC_OCSP_RESPONSE_TBS_RESPONSE_DATA,BASIC_OCSP_RESPONSE_SIGNATURE_ALGORITHM,BASIC_OCSP_RESPONSE_SIGNATURE,BASIC_OCSP_RESPONSE_CERTS];class BasicOCSPResponse extends PkiObject{constructor(e={}){super();this.tbsResponseData=getParametersValue(e,TBS_RESPONSE_DATA,BasicOCSPResponse.defaultValues(TBS_RESPONSE_DATA));this.signatureAlgorithm=getParametersValue(e,SIGNATURE_ALGORITHM$3,BasicOCSPResponse.defaultValues(SIGNATURE_ALGORITHM$3));this.signature=getParametersValue(e,SIGNATURE$2,BasicOCSPResponse.defaultValues(SIGNATURE$2));if(CERTS$1 in e){this.certs=getParametersValue(e,CERTS$1,BasicOCSPResponse.defaultValues(CERTS$1))}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case TBS_RESPONSE_DATA:return new ResponseData;case SIGNATURE_ALGORITHM$3:return new AlgorithmIdentifier$2;case SIGNATURE$2:return new BitString$1;case CERTS$1:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case"type":{let e=ResponseData.compareWithDefault("tbs",t.tbs)&&ResponseData.compareWithDefault("responderID",t.responderID)&&ResponseData.compareWithDefault("producedAt",t.producedAt)&&ResponseData.compareWithDefault("responses",t.responses);if("responseExtensions"in t)e=e&&ResponseData.compareWithDefault("responseExtensions",t.responseExtensions);return e}case SIGNATURE_ALGORITHM$3:return t.algorithmId===EMPTY_STRING&&"algorithmParams"in t===false;case SIGNATURE$2:return t.isEqual(BasicOCSPResponse.defaultValues(e));case CERTS$1:return t.length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||BASIC_OCSP_RESPONSE,value:[ResponseData.schema(t.tbsResponseData||{names:{blockName:BASIC_OCSP_RESPONSE_TBS_RESPONSE_DATA}}),AlgorithmIdentifier$2.schema(t.signatureAlgorithm||{names:{blockName:BASIC_OCSP_RESPONSE_SIGNATURE_ALGORITHM}}),new BitString$1({name:t.signature||BASIC_OCSP_RESPONSE_SIGNATURE}),new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:0},value:[new Sequence({value:[new Repeated({name:BASIC_OCSP_RESPONSE_CERTS,value:Certificate$1.schema(t.certs||{})})]})]})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$g);const t=compareSchema(e,e,BasicOCSPResponse.schema());AsnError.assertSchema(t,this.className);this.tbsResponseData=new ResponseData({schema:t.result[BASIC_OCSP_RESPONSE_TBS_RESPONSE_DATA]});this.signatureAlgorithm=new AlgorithmIdentifier$2({schema:t.result[BASIC_OCSP_RESPONSE_SIGNATURE_ALGORITHM]});this.signature=t.result[BASIC_OCSP_RESPONSE_SIGNATURE];if(BASIC_OCSP_RESPONSE_CERTS in t.result){this.certs=Array.from(t.result[BASIC_OCSP_RESPONSE_CERTS],(e=>new Certificate$1({schema:e})))}}toSchema(){const e=[];e.push(this.tbsResponseData.toSchema());e.push(this.signatureAlgorithm.toSchema());e.push(this.signature);if(this.certs){e.push(new Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new Sequence({value:Array.from(this.certs,(e=>e.toSchema()))})]}))}return new Sequence({value:e})}toJSON(){const e={tbsResponseData:this.tbsResponseData.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signature:this.signature.toJSON()};if(this.certs){e.certs=Array.from(this.certs,(e=>e.toJSON()))}return e}async getCertificateStatus(e,t,r=getCrypto(true)){const n={isForCertificate:false,status:2};const i={};const s=[];for(const n of this.tbsResponseData.responses){const a=r.getAlgorithmByOID(n.certID.hashAlgorithm.algorithmId,true,"CertID.hashAlgorithm");if(!i[a.name]){i[a.name]=1;const n=new CertID;s.push(n);await n.createForCertificate(e,{hashAlgorithm:a.name,issuerCertificate:t},r)}}for(const e of this.tbsResponseData.responses){for(const t of s){if(e.certID.isEqual(t)){n.isForCertificate=true;try{switch(e.certStatus.idBlock.isConstructed){case true:if(e.certStatus.idBlock.tagNumber===1)n.status=1;break;case false:switch(e.certStatus.idBlock.tagNumber){case 0:n.status=0;break;case 2:n.status=2;break}break}}catch(e){}return n}}}return n}async sign(e,t="SHA-1",r=getCrypto(true)){if(!e){throw new Error("Need to provide a private key for signing")}const n=await r.getSignatureParameters(e,t);const i=n.parameters.algorithm;if(!("name"in i)){throw new Error("Empty algorithm")}this.signatureAlgorithm=n.signatureAlgorithm;this.tbsResponseData.tbsView=new Uint8Array(this.tbsResponseData.toSchema(true).toBER());const s=await r.signWithPrivateKey(this.tbsResponseData.tbsView,e,{algorithm:i});this.signature=new BitString$1({valueHex:s})}async verify(e={},t=getCrypto(true)){let r=null;let n=-1;const i=e.trustedCerts||[];if(!this.certs){throw new Error("No certificates attached to the BasicOCSPResponse")}switch(true){case this.tbsResponseData.responderID instanceof RelativeDistinguishedNames:for(const[e,t]of this.certs.entries()){if(t.subject.isEqual(this.tbsResponseData.responderID)){n=e;break}}break;case this.tbsResponseData.responderID instanceof OctetString$1:for(const[e,r]of this.certs.entries()){const i=await t.digest({name:"sha-1"},r.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHexView);if(isEqualBuffer(i,this.tbsResponseData.responderID.valueBlock.valueHex)){n=e;break}}break;default:throw new Error("Wrong value for responderID")}if(n===-1)throw new Error("Correct certificate was not found in OCSP response");r=this.certs[n];const s=[r];for(const e of this.certs){const t=await checkCA(e,r);if(t){s.push(t)}}const a=new CertificateChainValidationEngine({certs:s,trustedCerts:i});const o=await a.verify({},t);if(!o.result){throw new Error("Validation of signer's certificate failed")}return t.verifyWithPublicKey(this.tbsResponseData.tbsView,this.signature,this.certs[n].subjectPublicKeyInfo,this.signatureAlgorithm)}}BasicOCSPResponse.CLASS_NAME="BasicOCSPResponse";const TBS$1="tbs";const VERSION$6="version";const SUBJECT="subject";const SPKI="subjectPublicKeyInfo";const ATTRIBUTES$1="attributes";const SIGNATURE_ALGORITHM$2="signatureAlgorithm";const SIGNATURE_VALUE="signatureValue";const CSR_INFO="CertificationRequestInfo";const CSR_INFO_VERSION=`${CSR_INFO}.version`;const CSR_INFO_SUBJECT=`${CSR_INFO}.subject`;const CSR_INFO_SPKI=`${CSR_INFO}.subjectPublicKeyInfo`;const CSR_INFO_ATTRS=`${CSR_INFO}.attributes`;const CLEAR_PROPS$f=[CSR_INFO,CSR_INFO_VERSION,CSR_INFO_SUBJECT,CSR_INFO_SPKI,CSR_INFO_ATTRS,SIGNATURE_ALGORITHM$2,SIGNATURE_VALUE];function CertificationRequestInfo$1(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.CertificationRequestInfo||CSR_INFO,value:[new Integer({name:t.CertificationRequestInfoVersion||CSR_INFO_VERSION}),RelativeDistinguishedNames.schema(t.subject||{names:{blockName:CSR_INFO_SUBJECT}}),PublicKeyInfo$1.schema({names:{blockName:CSR_INFO_SPKI}}),new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:0},value:[new Repeated({optional:true,name:t.CertificationRequestInfoAttributes||CSR_INFO_ATTRS,value:Attribute$3.schema(t.attributes||{})})]})]})}class CertificationRequest$1 extends PkiObject{constructor(e={}){super();this.tbsView=new Uint8Array(getParametersValue(e,TBS$1,CertificationRequest$1.defaultValues(TBS$1)));this.version=getParametersValue(e,VERSION$6,CertificationRequest$1.defaultValues(VERSION$6));this.subject=getParametersValue(e,SUBJECT,CertificationRequest$1.defaultValues(SUBJECT));this.subjectPublicKeyInfo=getParametersValue(e,SPKI,CertificationRequest$1.defaultValues(SPKI));if(ATTRIBUTES$1 in e){this.attributes=getParametersValue(e,ATTRIBUTES$1,CertificationRequest$1.defaultValues(ATTRIBUTES$1))}this.signatureAlgorithm=getParametersValue(e,SIGNATURE_ALGORITHM$2,CertificationRequest$1.defaultValues(SIGNATURE_ALGORITHM$2));this.signatureValue=getParametersValue(e,SIGNATURE_VALUE,CertificationRequest$1.defaultValues(SIGNATURE_VALUE));if(e.schema){this.fromSchema(e.schema)}}get tbs(){return BufferSourceConverter_1.toArrayBuffer(this.tbsView)}set tbs(e){this.tbsView=new Uint8Array(e)}static defaultValues(e){switch(e){case TBS$1:return EMPTY_BUFFER;case VERSION$6:return 0;case SUBJECT:return new RelativeDistinguishedNames;case SPKI:return new PublicKeyInfo$1;case ATTRIBUTES$1:return[];case SIGNATURE_ALGORITHM$2:return new AlgorithmIdentifier$2;case SIGNATURE_VALUE:return new BitString$1;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({value:[CertificationRequestInfo$1(t.certificationRequestInfo||{}),new Sequence({name:t.signatureAlgorithm||SIGNATURE_ALGORITHM$2,value:[new ObjectIdentifier$1,new Any({optional:true})]}),new BitString$1({name:t.signatureValue||SIGNATURE_VALUE})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$f);const t=compareSchema(e,e,CertificationRequest$1.schema());AsnError.assertSchema(t,this.className);this.tbsView=t.result.CertificationRequestInfo.valueBeforeDecodeView;this.version=t.result[CSR_INFO_VERSION].valueBlock.valueDec;this.subject=new RelativeDistinguishedNames({schema:t.result[CSR_INFO_SUBJECT]});this.subjectPublicKeyInfo=new PublicKeyInfo$1({schema:t.result[CSR_INFO_SPKI]});if(CSR_INFO_ATTRS in t.result){this.attributes=Array.from(t.result[CSR_INFO_ATTRS],(e=>new Attribute$3({schema:e})))}this.signatureAlgorithm=new AlgorithmIdentifier$2({schema:t.result.signatureAlgorithm});this.signatureValue=t.result.signatureValue}encodeTBS(){const e=[new Integer({value:this.version}),this.subject.toSchema(),this.subjectPublicKeyInfo.toSchema()];if(ATTRIBUTES$1 in this){e.push(new Constructed({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.attributes||[],(e=>e.toSchema()))}))}return new Sequence({value:e})}toSchema(e=false){let t;if(e===false){if(this.tbsView.byteLength===0){return CertificationRequest$1.schema()}const e=fromBER(this.tbsView);AsnError.assert(e,"PKCS#10 Certificate Request");t=e.result}else{t=this.encodeTBS()}return new Sequence({value:[t,this.signatureAlgorithm.toSchema(),this.signatureValue]})}toJSON(){const e={tbs:Convert_1.ToHex(this.tbsView),version:this.version,subject:this.subject.toJSON(),subjectPublicKeyInfo:this.subjectPublicKeyInfo.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()};if(ATTRIBUTES$1 in this){e.attributes=Array.from(this.attributes||[],(e=>e.toJSON()))}return e}async sign(e,t="SHA-1",r=getCrypto(true)){if(!e){throw new Error("Need to provide a private key for signing")}const n=await r.getSignatureParameters(e,t);const i=n.parameters;this.signatureAlgorithm=n.signatureAlgorithm;this.tbsView=new Uint8Array(this.encodeTBS().toBER());const s=await r.signWithPrivateKey(this.tbsView,e,i);this.signatureValue=new BitString$1({valueHex:s})}async verify(e=getCrypto(true)){return e.verifyWithPublicKey(this.tbsView,this.signatureValue,this.subjectPublicKeyInfo,this.signatureAlgorithm)}async getPublicKey(e,t=getCrypto(true)){return t.getPublicKey(this.subjectPublicKeyInfo,this.signatureAlgorithm,e)}}CertificationRequest$1.CLASS_NAME="CertificationRequest";const DIGEST_ALGORITHM$1="digestAlgorithm";const DIGEST="digest";const CLEAR_PROPS$e=[DIGEST_ALGORITHM$1,DIGEST];class DigestInfo$1 extends PkiObject{constructor(e={}){super();this.digestAlgorithm=getParametersValue(e,DIGEST_ALGORITHM$1,DigestInfo$1.defaultValues(DIGEST_ALGORITHM$1));this.digest=getParametersValue(e,DIGEST,DigestInfo$1.defaultValues(DIGEST));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case DIGEST_ALGORITHM$1:return new AlgorithmIdentifier$2;case DIGEST:return new OctetString$1;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case DIGEST_ALGORITHM$1:return AlgorithmIdentifier$2.compareWithDefault("algorithmId",t.algorithmId)&&"algorithmParams"in t===false;case DIGEST:return t.isEqual(DigestInfo$1.defaultValues(e));default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[AlgorithmIdentifier$2.schema(t.digestAlgorithm||{names:{blockName:DIGEST_ALGORITHM$1}}),new OctetString$1({name:t.digest||DIGEST})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$e);const t=compareSchema(e,e,DigestInfo$1.schema({names:{digestAlgorithm:{names:{blockName:DIGEST_ALGORITHM$1}},digest:DIGEST}}));AsnError.assertSchema(t,this.className);this.digestAlgorithm=new AlgorithmIdentifier$2({schema:t.result.digestAlgorithm});this.digest=t.result.digest}toSchema(){return new Sequence({value:[this.digestAlgorithm.toSchema(),this.digest]})}toJSON(){return{digestAlgorithm:this.digestAlgorithm.toJSON(),digest:this.digest.toJSON()}}}DigestInfo$1.CLASS_NAME="DigestInfo";const E_CONTENT_TYPE="eContentType";const E_CONTENT="eContent";const CLEAR_PROPS$d=[E_CONTENT_TYPE,E_CONTENT];class EncapsulatedContentInfo$1 extends PkiObject{constructor(e={}){super();this.eContentType=getParametersValue(e,E_CONTENT_TYPE,EncapsulatedContentInfo$1.defaultValues(E_CONTENT_TYPE));if(E_CONTENT in e){this.eContent=getParametersValue(e,E_CONTENT,EncapsulatedContentInfo$1.defaultValues(E_CONTENT));if(this.eContent.idBlock.tagClass===1&&this.eContent.idBlock.tagNumber===4){if(this.eContent.idBlock.isConstructed===false){const e=new OctetString$1({idBlock:{isConstructed:true},isConstructed:true});let t=0;const r=this.eContent.valueBlock.valueHexView.slice().buffer;let n=r.byteLength;while(n>0){const i=new Uint8Array(r,t,t+65536>r.byteLength?r.byteLength-t:65536);const s=new ArrayBuffer(i.length);const a=new Uint8Array(s);for(let e=0;e<a.length;e++){a[e]=i[e]}e.valueBlock.value.push(new OctetString$1({valueHex:s}));n-=i.length;t+=i.length}this.eContent=e}}}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case E_CONTENT_TYPE:return EMPTY_STRING;case E_CONTENT:return new OctetString$1;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case E_CONTENT_TYPE:return t===EMPTY_STRING;case E_CONTENT:{if(t.idBlock.tagClass===1&&t.idBlock.tagNumber===4)return t.isEqual(EncapsulatedContentInfo$1.defaultValues(E_CONTENT));return false}default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new ObjectIdentifier$1({name:t.eContentType||EMPTY_STRING}),new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:0},value:[new Any({name:t.eContent||EMPTY_STRING})]})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$d);const t=compareSchema(e,e,EncapsulatedContentInfo$1.schema({names:{eContentType:E_CONTENT_TYPE,eContent:E_CONTENT}}));AsnError.assertSchema(t,this.className);this.eContentType=t.result.eContentType.valueBlock.toString();if(E_CONTENT in t.result)this.eContent=t.result.eContent}toSchema(){const e=[];e.push(new ObjectIdentifier$1({value:this.eContentType}));if(this.eContent){if(EncapsulatedContentInfo$1.compareWithDefault(E_CONTENT,this.eContent)===false){e.push(new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:0},value:[this.eContent]}))}}return new Sequence({value:e})}toJSON(){const e={eContentType:this.eContentType};if(this.eContent&&EncapsulatedContentInfo$1.compareWithDefault(E_CONTENT,this.eContent)===false){e.eContent=this.eContent.toJSON()}return e}}EncapsulatedContentInfo$1.CLASS_NAME="EncapsulatedContentInfo";const MAC="mac";const MAC_SALT="macSalt";const ITERATIONS="iterations";const CLEAR_PROPS$c=[MAC,MAC_SALT,ITERATIONS];class MacData$1 extends PkiObject{constructor(e={}){super();this.mac=getParametersValue(e,MAC,MacData$1.defaultValues(MAC));this.macSalt=getParametersValue(e,MAC_SALT,MacData$1.defaultValues(MAC_SALT));if(ITERATIONS in e){this.iterations=getParametersValue(e,ITERATIONS,MacData$1.defaultValues(ITERATIONS))}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case MAC:return new DigestInfo$1;case MAC_SALT:return new OctetString$1;case ITERATIONS:return 1;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case MAC:return DigestInfo$1.compareWithDefault("digestAlgorithm",t.digestAlgorithm)&&DigestInfo$1.compareWithDefault("digest",t.digest);case MAC_SALT:return t.isEqual(MacData$1.defaultValues(e));case ITERATIONS:return t===MacData$1.defaultValues(e);default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,optional:t.optional||true,value:[DigestInfo$1.schema(t.mac||{names:{blockName:MAC}}),new OctetString$1({name:t.macSalt||MAC_SALT}),new Integer({optional:true,name:t.iterations||ITERATIONS})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$c);const t=compareSchema(e,e,MacData$1.schema({names:{mac:{names:{blockName:MAC}},macSalt:MAC_SALT,iterations:ITERATIONS}}));AsnError.assertSchema(t,this.className);this.mac=new DigestInfo$1({schema:t.result.mac});this.macSalt=t.result.macSalt;if(ITERATIONS in t.result)this.iterations=t.result.iterations.valueBlock.valueDec}toSchema(){const e=[this.mac.toSchema(),this.macSalt];if(this.iterations!==undefined){e.push(new Integer({value:this.iterations}))}return new Sequence({value:e})}toJSON(){const e={mac:this.mac.toJSON(),macSalt:this.macSalt.toJSON()};if(this.iterations!==undefined){e.iterations=this.iterations}return e}}MacData$1.CLASS_NAME="MacData";const HASH_ALGORITHM="hashAlgorithm";const HASHED_MESSAGE="hashedMessage";const CLEAR_PROPS$b=[HASH_ALGORITHM,HASHED_MESSAGE];class MessageImprint extends PkiObject{constructor(e={}){super();this.hashAlgorithm=getParametersValue(e,HASH_ALGORITHM,MessageImprint.defaultValues(HASH_ALGORITHM));this.hashedMessage=getParametersValue(e,HASHED_MESSAGE,MessageImprint.defaultValues(HASHED_MESSAGE));if(e.schema){this.fromSchema(e.schema)}}static async create(e,t,r=getCrypto(true)){const n=r.getOIDByAlgorithm({name:e},true,"hashAlgorithm");const i=await r.digest(e,t);const s=new MessageImprint({hashAlgorithm:new AlgorithmIdentifier$2({algorithmId:n,algorithmParams:new Null}),hashedMessage:new OctetString$1({valueHex:i})});return s}static defaultValues(e){switch(e){case HASH_ALGORITHM:return new AlgorithmIdentifier$2;case HASHED_MESSAGE:return new OctetString$1;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case HASH_ALGORITHM:return t.algorithmId===EMPTY_STRING&&"algorithmParams"in t===false;case HASHED_MESSAGE:return t.isEqual(MessageImprint.defaultValues(e))===0;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[AlgorithmIdentifier$2.schema(t.hashAlgorithm||{}),new OctetString$1({name:t.hashedMessage||EMPTY_STRING})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$b);const t=compareSchema(e,e,MessageImprint.schema({names:{hashAlgorithm:{names:{blockName:HASH_ALGORITHM}},hashedMessage:HASHED_MESSAGE}}));AsnError.assertSchema(t,this.className);this.hashAlgorithm=new AlgorithmIdentifier$2({schema:t.result.hashAlgorithm});this.hashedMessage=t.result.hashedMessage}toSchema(){return new Sequence({value:[this.hashAlgorithm.toSchema(),this.hashedMessage]})}toJSON(){return{hashAlgorithm:this.hashAlgorithm.toJSON(),hashedMessage:this.hashedMessage.toJSON()}}}MessageImprint.CLASS_NAME="MessageImprint";const REQ_CERT="reqCert";const SINGLE_REQUEST_EXTENSIONS="singleRequestExtensions";const CLEAR_PROPS$a=[REQ_CERT,SINGLE_REQUEST_EXTENSIONS];class Request$1 extends PkiObject{constructor(e={}){super();this.reqCert=getParametersValue(e,REQ_CERT,Request$1.defaultValues(REQ_CERT));if(SINGLE_REQUEST_EXTENSIONS in e){this.singleRequestExtensions=getParametersValue(e,SINGLE_REQUEST_EXTENSIONS,Request$1.defaultValues(SINGLE_REQUEST_EXTENSIONS))}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case REQ_CERT:return new CertID;case SINGLE_REQUEST_EXTENSIONS:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case REQ_CERT:return t.isEqual(Request$1.defaultValues(e));case SINGLE_REQUEST_EXTENSIONS:return t.length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[CertID.schema(t.reqCert||{}),new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:0},value:[Extension$2.schema(t.extensions||{names:{blockName:t.singleRequestExtensions||EMPTY_STRING}})]})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$a);const t=compareSchema(e,e,Request$1.schema({names:{reqCert:{names:{blockName:REQ_CERT}},extensions:{names:{blockName:SINGLE_REQUEST_EXTENSIONS}}}}));AsnError.assertSchema(t,this.className);this.reqCert=new CertID({schema:t.result.reqCert});if(SINGLE_REQUEST_EXTENSIONS in t.result){this.singleRequestExtensions=Array.from(t.result.singleRequestExtensions.valueBlock.value,(e=>new Extension$2({schema:e})))}}toSchema(){const e=[];e.push(this.reqCert.toSchema());if(this.singleRequestExtensions){e.push(new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:0},value:[new Sequence({value:Array.from(this.singleRequestExtensions,(e=>e.toSchema()))})]}))}return new Sequence({value:e})}toJSON(){const e={reqCert:this.reqCert.toJSON()};if(this.singleRequestExtensions){e.singleRequestExtensions=Array.from(this.singleRequestExtensions,(e=>e.toJSON()))}return e}}Request$1.CLASS_NAME="Request";const TBS="tbs";const VERSION$5="version";const REQUESTOR_NAME="requestorName";const REQUEST_LIST="requestList";const REQUEST_EXTENSIONS="requestExtensions";const TBS_REQUEST$1="TBSRequest";const TBS_REQUEST_VERSION=`${TBS_REQUEST$1}.${VERSION$5}`;const TBS_REQUEST_REQUESTOR_NAME=`${TBS_REQUEST$1}.${REQUESTOR_NAME}`;const TBS_REQUEST_REQUESTS=`${TBS_REQUEST$1}.requests`;const TBS_REQUEST_REQUEST_EXTENSIONS=`${TBS_REQUEST$1}.${REQUEST_EXTENSIONS}`;const CLEAR_PROPS$9=[TBS_REQUEST$1,TBS_REQUEST_VERSION,TBS_REQUEST_REQUESTOR_NAME,TBS_REQUEST_REQUESTS,TBS_REQUEST_REQUEST_EXTENSIONS];class TBSRequest extends PkiObject{constructor(e={}){super();this.tbsView=new Uint8Array(getParametersValue(e,TBS,TBSRequest.defaultValues(TBS)));if(VERSION$5 in e){this.version=getParametersValue(e,VERSION$5,TBSRequest.defaultValues(VERSION$5))}if(REQUESTOR_NAME in e){this.requestorName=getParametersValue(e,REQUESTOR_NAME,TBSRequest.defaultValues(REQUESTOR_NAME))}this.requestList=getParametersValue(e,REQUEST_LIST,TBSRequest.defaultValues(REQUEST_LIST));if(REQUEST_EXTENSIONS in e){this.requestExtensions=getParametersValue(e,REQUEST_EXTENSIONS,TBSRequest.defaultValues(REQUEST_EXTENSIONS))}if(e.schema){this.fromSchema(e.schema)}}get tbs(){return BufferSourceConverter_1.toArrayBuffer(this.tbsView)}set tbs(e){this.tbsView=new Uint8Array(e)}static defaultValues(e){switch(e){case TBS:return EMPTY_BUFFER;case VERSION$5:return 0;case REQUESTOR_NAME:return new GeneralName$2;case REQUEST_LIST:case REQUEST_EXTENSIONS:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case TBS:return t.byteLength===0;case VERSION$5:return t===TBSRequest.defaultValues(e);case REQUESTOR_NAME:return t.type===GeneralName$2.defaultValues("type")&&Object.keys(t.value).length===0;case REQUEST_LIST:case REQUEST_EXTENSIONS:return t.length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||TBS_REQUEST$1,value:[new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:0},value:[new Integer({name:t.TBSRequestVersion||TBS_REQUEST_VERSION})]}),new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:1},value:[GeneralName$2.schema(t.requestorName||{names:{blockName:TBS_REQUEST_REQUESTOR_NAME}})]}),new Sequence({name:t.requestList||"TBSRequest.requestList",value:[new Repeated({name:t.requests||TBS_REQUEST_REQUESTS,value:Request$1.schema(t.requestNames||{})})]}),new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:2},value:[Extensions$1.schema(t.extensions||{names:{blockName:t.requestExtensions||TBS_REQUEST_REQUEST_EXTENSIONS}})]})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$9);const t=compareSchema(e,e,TBSRequest.schema());AsnError.assertSchema(t,this.className);this.tbsView=t.result.TBSRequest.valueBeforeDecodeView;if(TBS_REQUEST_VERSION in t.result)this.version=t.result[TBS_REQUEST_VERSION].valueBlock.valueDec;if(TBS_REQUEST_REQUESTOR_NAME in t.result)this.requestorName=new GeneralName$2({schema:t.result[TBS_REQUEST_REQUESTOR_NAME]});this.requestList=Array.from(t.result[TBS_REQUEST_REQUESTS],(e=>new Request$1({schema:e})));if(TBS_REQUEST_REQUEST_EXTENSIONS in t.result)this.requestExtensions=Array.from(t.result[TBS_REQUEST_REQUEST_EXTENSIONS].valueBlock.value,(e=>new Extension$2({schema:e})))}toSchema(e=false){let t;if(e===false){if(this.tbsView.byteLength===0)return TBSRequest.schema();const e=fromBER(this.tbsView);AsnError.assert(e,"TBS Request");if(!(e.result instanceof Sequence)){throw new Error("ASN.1 result should be SEQUENCE")}t=e.result}else{const e=[];if(this.version!==undefined){e.push(new Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new Integer({value:this.version})]}))}if(this.requestorName){e.push(new Constructed({idBlock:{tagClass:3,tagNumber:1},value:[this.requestorName.toSchema()]}))}e.push(new Sequence({value:Array.from(this.requestList,(e=>e.toSchema()))}));if(this.requestExtensions){e.push(new Constructed({idBlock:{tagClass:3,tagNumber:2},value:[new Sequence({value:Array.from(this.requestExtensions,(e=>e.toSchema()))})]}))}t=new Sequence({value:e})}return t}toJSON(){const e={};if(this.version!=undefined)e.version=this.version;if(this.requestorName){e.requestorName=this.requestorName.toJSON()}e.requestList=Array.from(this.requestList,(e=>e.toJSON()));if(this.requestExtensions){e.requestExtensions=Array.from(this.requestExtensions,(e=>e.toJSON()))}return e}}TBSRequest.CLASS_NAME="TBSRequest";const SIGNATURE_ALGORITHM$1="signatureAlgorithm";const SIGNATURE$1="signature";const CERTS="certs";class Signature$5 extends PkiObject{constructor(e={}){super();this.signatureAlgorithm=getParametersValue(e,SIGNATURE_ALGORITHM$1,Signature$5.defaultValues(SIGNATURE_ALGORITHM$1));this.signature=getParametersValue(e,SIGNATURE$1,Signature$5.defaultValues(SIGNATURE$1));if(CERTS in e){this.certs=getParametersValue(e,CERTS,Signature$5.defaultValues(CERTS))}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case SIGNATURE_ALGORITHM$1:return new AlgorithmIdentifier$2;case SIGNATURE$1:return new BitString$1;case CERTS:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case SIGNATURE_ALGORITHM$1:return t.algorithmId===EMPTY_STRING&&"algorithmParams"in t===false;case SIGNATURE$1:return t.isEqual(Signature$5.defaultValues(e));case CERTS:return t.length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[AlgorithmIdentifier$2.schema(t.signatureAlgorithm||{}),new BitString$1({name:t.signature||EMPTY_STRING}),new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:0},value:[new Sequence({value:[new Repeated({name:t.certs||EMPTY_STRING,value:Certificate$1.schema({})})]})]})]})}fromSchema(e){clearProps(e,[SIGNATURE_ALGORITHM$1,SIGNATURE$1,CERTS]);const t=compareSchema(e,e,Signature$5.schema({names:{signatureAlgorithm:{names:{blockName:SIGNATURE_ALGORITHM$1}},signature:SIGNATURE$1,certs:CERTS}}));AsnError.assertSchema(t,this.className);this.signatureAlgorithm=new AlgorithmIdentifier$2({schema:t.result.signatureAlgorithm});this.signature=t.result.signature;if(CERTS in t.result)this.certs=Array.from(t.result.certs,(e=>new Certificate$1({schema:e})))}toSchema(){const e=[];e.push(this.signatureAlgorithm.toSchema());e.push(this.signature);if(this.certs){e.push(new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:0},value:[new Sequence({value:Array.from(this.certs,(e=>e.toSchema()))})]}))}return new Sequence({value:e})}toJSON(){const e={signatureAlgorithm:this.signatureAlgorithm.toJSON(),signature:this.signature.toJSON()};if(this.certs){e.certs=Array.from(this.certs,(e=>e.toJSON()))}return e}}Signature$5.CLASS_NAME="Signature";const TBS_REQUEST="tbsRequest";const OPTIONAL_SIGNATURE="optionalSignature";const CLEAR_PROPS$8=[TBS_REQUEST,OPTIONAL_SIGNATURE];class OCSPRequest extends PkiObject{constructor(e={}){super();this.tbsRequest=getParametersValue(e,TBS_REQUEST,OCSPRequest.defaultValues(TBS_REQUEST));if(OPTIONAL_SIGNATURE in e){this.optionalSignature=getParametersValue(e,OPTIONAL_SIGNATURE,OCSPRequest.defaultValues(OPTIONAL_SIGNATURE))}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case TBS_REQUEST:return new TBSRequest;case OPTIONAL_SIGNATURE:return new Signature$5;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case TBS_REQUEST:return TBSRequest.compareWithDefault("tbs",t.tbs)&&TBSRequest.compareWithDefault("version",t.version)&&TBSRequest.compareWithDefault("requestorName",t.requestorName)&&TBSRequest.compareWithDefault("requestList",t.requestList)&&TBSRequest.compareWithDefault("requestExtensions",t.requestExtensions);case OPTIONAL_SIGNATURE:return Signature$5.compareWithDefault("signatureAlgorithm",t.signatureAlgorithm)&&Signature$5.compareWithDefault("signature",t.signature)&&Signature$5.compareWithDefault("certs",t.certs);default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||"OCSPRequest",value:[TBSRequest.schema(t.tbsRequest||{names:{blockName:TBS_REQUEST}}),new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:0},value:[Signature$5.schema(t.optionalSignature||{names:{blockName:OPTIONAL_SIGNATURE}})]})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$8);const t=compareSchema(e,e,OCSPRequest.schema());AsnError.assertSchema(t,this.className);this.tbsRequest=new TBSRequest({schema:t.result.tbsRequest});if(OPTIONAL_SIGNATURE in t.result)this.optionalSignature=new Signature$5({schema:t.result.optionalSignature})}toSchema(e=false){const t=[];t.push(this.tbsRequest.toSchema(e));if(this.optionalSignature)t.push(new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:0},value:[this.optionalSignature.toSchema()]}));return new Sequence({value:t})}toJSON(){const e={tbsRequest:this.tbsRequest.toJSON()};if(this.optionalSignature){e.optionalSignature=this.optionalSignature.toJSON()}return e}async createForCertificate(e,t,r=getCrypto(true)){const n=new CertID;await n.createForCertificate(e,t,r);this.tbsRequest.requestList.push(new Request$1({reqCert:n}))}async sign(e,t="SHA-1",r=getCrypto(true)){ParameterError.assertEmpty(e,"privateKey","OCSPRequest.sign method");if(!this.optionalSignature){throw new Error('Need to create "optionalSignature" field before signing')}const n=await r.getSignatureParameters(e,t);const i=n.parameters;this.optionalSignature.signatureAlgorithm=n.signatureAlgorithm;const s=this.tbsRequest.toSchema(true).toBER(false);const a=await r.signWithPrivateKey(s,e,i);this.optionalSignature.signature=new BitString$1({valueHex:a})}verify(){}}OCSPRequest.CLASS_NAME="OCSPRequest";const RESPONSE_TYPE="responseType";const RESPONSE="response";const CLEAR_PROPS$7=[RESPONSE_TYPE,RESPONSE];class ResponseBytes extends PkiObject{constructor(e={}){super();this.responseType=getParametersValue(e,RESPONSE_TYPE,ResponseBytes.defaultValues(RESPONSE_TYPE));this.response=getParametersValue(e,RESPONSE,ResponseBytes.defaultValues(RESPONSE));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case RESPONSE_TYPE:return EMPTY_STRING;case RESPONSE:return new OctetString$1;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case RESPONSE_TYPE:return t===EMPTY_STRING;case RESPONSE:return t.isEqual(ResponseBytes.defaultValues(e));default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new ObjectIdentifier$1({name:t.responseType||EMPTY_STRING}),new OctetString$1({name:t.response||EMPTY_STRING})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$7);const t=compareSchema(e,e,ResponseBytes.schema({names:{responseType:RESPONSE_TYPE,response:RESPONSE}}));AsnError.assertSchema(t,this.className);this.responseType=t.result.responseType.valueBlock.toString();this.response=t.result.response}toSchema(){return new Sequence({value:[new ObjectIdentifier$1({value:this.responseType}),this.response]})}toJSON(){return{responseType:this.responseType,response:this.response.toJSON()}}}ResponseBytes.CLASS_NAME="ResponseBytes";const RESPONSE_STATUS="responseStatus";const RESPONSE_BYTES="responseBytes";class OCSPResponse extends PkiObject{constructor(e={}){super();this.responseStatus=getParametersValue(e,RESPONSE_STATUS,OCSPResponse.defaultValues(RESPONSE_STATUS));if(RESPONSE_BYTES in e){this.responseBytes=getParametersValue(e,RESPONSE_BYTES,OCSPResponse.defaultValues(RESPONSE_BYTES))}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case RESPONSE_STATUS:return new Enumerated;case RESPONSE_BYTES:return new ResponseBytes;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case RESPONSE_STATUS:return t.isEqual(OCSPResponse.defaultValues(e));case RESPONSE_BYTES:return ResponseBytes.compareWithDefault("responseType",t.responseType)&&ResponseBytes.compareWithDefault("response",t.response);default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||"OCSPResponse",value:[new Enumerated({name:t.responseStatus||RESPONSE_STATUS}),new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:0},value:[ResponseBytes.schema(t.responseBytes||{names:{blockName:RESPONSE_BYTES}})]})]})}fromSchema(e){clearProps(e,[RESPONSE_STATUS,RESPONSE_BYTES]);const t=compareSchema(e,e,OCSPResponse.schema());AsnError.assertSchema(t,this.className);this.responseStatus=t.result.responseStatus;if(RESPONSE_BYTES in t.result)this.responseBytes=new ResponseBytes({schema:t.result.responseBytes})}toSchema(){const e=[];e.push(this.responseStatus);if(this.responseBytes){e.push(new Constructed({idBlock:{tagClass:3,tagNumber:0},value:[this.responseBytes.toSchema()]}))}return new Sequence({value:e})}toJSON(){const e={responseStatus:this.responseStatus.toJSON()};if(this.responseBytes){e.responseBytes=this.responseBytes.toJSON()}return e}async getCertificateStatus(e,t,r=getCrypto(true)){let n;const i={isForCertificate:false,status:2};if(!this.responseBytes)return i;if(this.responseBytes.responseType!==id_PKIX_OCSP_Basic)return i;try{const e=fromBER(this.responseBytes.response.valueBlock.valueHexView);AsnError.assert(e,"Basic OCSP response");n=new BasicOCSPResponse({schema:e.result})}catch(e){return i}return n.getCertificateStatus(e,t,r)}async sign(e,t,r=getCrypto(true)){var n;if(this.responseBytes&&this.responseBytes.responseType===id_PKIX_OCSP_Basic){const n=BasicOCSPResponse.fromBER(this.responseBytes.response.valueBlock.valueHexView);return n.sign(e,t,r)}throw new Error(`Unknown ResponseBytes type: ${((n=this.responseBytes)===null||n===void 0?void 0:n.responseType)||"Unknown"}`)}async verify(e=null,t=getCrypto(true)){var r;if(RESPONSE_BYTES in this===false)throw new Error("Empty ResponseBytes field");if(this.responseBytes&&this.responseBytes.responseType===id_PKIX_OCSP_Basic){const r=BasicOCSPResponse.fromBER(this.responseBytes.response.valueBlock.valueHexView);if(e!==null){if(!r.certs){r.certs=[]}r.certs.push(e)}return r.verify({},t)}throw new Error(`Unknown ResponseBytes type: ${((r=this.responseBytes)===null||r===void 0?void 0:r.responseType)||"Unknown"}`)}}OCSPResponse.CLASS_NAME="OCSPResponse";const TYPE$6="type";const ATTRIBUTES="attributes";const ENCODED_VALUE="encodedValue";const CLEAR_PROPS$6=[ATTRIBUTES];class SignedAndUnsignedAttributes extends PkiObject{constructor(e={}){super();this.type=getParametersValue(e,TYPE$6,SignedAndUnsignedAttributes.defaultValues(TYPE$6));this.attributes=getParametersValue(e,ATTRIBUTES,SignedAndUnsignedAttributes.defaultValues(ATTRIBUTES));this.encodedValue=getParametersValue(e,ENCODED_VALUE,SignedAndUnsignedAttributes.defaultValues(ENCODED_VALUE));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case TYPE$6:return-1;case ATTRIBUTES:return[];case ENCODED_VALUE:return EMPTY_BUFFER;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case TYPE$6:return t===SignedAndUnsignedAttributes.defaultValues(TYPE$6);case ATTRIBUTES:return t.length===0;case ENCODED_VALUE:return t.byteLength===0;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Constructed({name:t.blockName||EMPTY_STRING,optional:true,idBlock:{tagClass:3,tagNumber:t.tagNumber||0},value:[new Repeated({name:t.attributes||EMPTY_STRING,value:Attribute$3.schema()})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$6);const t=compareSchema(e,e,SignedAndUnsignedAttributes.schema({names:{tagNumber:this.type,attributes:ATTRIBUTES}}));AsnError.assertSchema(t,this.className);this.type=t.result.idBlock.tagNumber;this.encodedValue=BufferSourceConverter_1.toArrayBuffer(t.result.valueBeforeDecodeView);const r=new Uint8Array(this.encodedValue);r[0]=49;if(ATTRIBUTES in t.result===false){if(this.type===0)throw new Error("Wrong structure of SignedUnsignedAttributes");else return}this.attributes=Array.from(t.result.attributes,(e=>new Attribute$3({schema:e})))}toSchema(){if(SignedAndUnsignedAttributes.compareWithDefault(TYPE$6,this.type)||SignedAndUnsignedAttributes.compareWithDefault(ATTRIBUTES,this.attributes))throw new Error('Incorrectly initialized "SignedAndUnsignedAttributes" class');return new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:this.type},value:Array.from(this.attributes,(e=>e.toSchema()))})}toJSON(){if(SignedAndUnsignedAttributes.compareWithDefault(TYPE$6,this.type)||SignedAndUnsignedAttributes.compareWithDefault(ATTRIBUTES,this.attributes))throw new Error('Incorrectly initialized "SignedAndUnsignedAttributes" class');return{type:this.type,attributes:Array.from(this.attributes,(e=>e.toJSON()))}}}SignedAndUnsignedAttributes.CLASS_NAME="SignedAndUnsignedAttributes";const VERSION$4="version";const SID="sid";const DIGEST_ALGORITHM="digestAlgorithm";const SIGNED_ATTRS="signedAttrs";const SIGNATURE_ALGORITHM="signatureAlgorithm";const SIGNATURE="signature";const UNSIGNED_ATTRS="unsignedAttrs";const SIGNER_INFO="SignerInfo";const SIGNER_INFO_VERSION=`${SIGNER_INFO}.${VERSION$4}`;const SIGNER_INFO_SID=`${SIGNER_INFO}.${SID}`;const SIGNER_INFO_DIGEST_ALGORITHM=`${SIGNER_INFO}.${DIGEST_ALGORITHM}`;const SIGNER_INFO_SIGNED_ATTRS=`${SIGNER_INFO}.${SIGNED_ATTRS}`;const SIGNER_INFO_SIGNATURE_ALGORITHM=`${SIGNER_INFO}.${SIGNATURE_ALGORITHM}`;const SIGNER_INFO_SIGNATURE=`${SIGNER_INFO}.${SIGNATURE}`;const SIGNER_INFO_UNSIGNED_ATTRS=`${SIGNER_INFO}.${UNSIGNED_ATTRS}`;const CLEAR_PROPS$5=[SIGNER_INFO_VERSION,SIGNER_INFO_SID,SIGNER_INFO_DIGEST_ALGORITHM,SIGNER_INFO_SIGNED_ATTRS,SIGNER_INFO_SIGNATURE_ALGORITHM,SIGNER_INFO_SIGNATURE,SIGNER_INFO_UNSIGNED_ATTRS];class SignerInfo$1 extends PkiObject{constructor(e={}){super();this.version=getParametersValue(e,VERSION$4,SignerInfo$1.defaultValues(VERSION$4));this.sid=getParametersValue(e,SID,SignerInfo$1.defaultValues(SID));this.digestAlgorithm=getParametersValue(e,DIGEST_ALGORITHM,SignerInfo$1.defaultValues(DIGEST_ALGORITHM));if(SIGNED_ATTRS in e){this.signedAttrs=getParametersValue(e,SIGNED_ATTRS,SignerInfo$1.defaultValues(SIGNED_ATTRS))}this.signatureAlgorithm=getParametersValue(e,SIGNATURE_ALGORITHM,SignerInfo$1.defaultValues(SIGNATURE_ALGORITHM));this.signature=getParametersValue(e,SIGNATURE,SignerInfo$1.defaultValues(SIGNATURE));if(UNSIGNED_ATTRS in e){this.unsignedAttrs=getParametersValue(e,UNSIGNED_ATTRS,SignerInfo$1.defaultValues(UNSIGNED_ATTRS))}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case VERSION$4:return 0;case SID:return new Any;case DIGEST_ALGORITHM:return new AlgorithmIdentifier$2;case SIGNED_ATTRS:return new SignedAndUnsignedAttributes({type:0});case SIGNATURE_ALGORITHM:return new AlgorithmIdentifier$2;case SIGNATURE:return new OctetString$1;case UNSIGNED_ATTRS:return new SignedAndUnsignedAttributes({type:1});default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case VERSION$4:return SignerInfo$1.defaultValues(VERSION$4)===t;case SID:return t instanceof Any;case DIGEST_ALGORITHM:if(t instanceof AlgorithmIdentifier$2===false)return false;return t.isEqual(SignerInfo$1.defaultValues(DIGEST_ALGORITHM));case SIGNED_ATTRS:return SignedAndUnsignedAttributes.compareWithDefault("type",t.type)&&SignedAndUnsignedAttributes.compareWithDefault("attributes",t.attributes)&&SignedAndUnsignedAttributes.compareWithDefault("encodedValue",t.encodedValue);case SIGNATURE_ALGORITHM:if(t instanceof AlgorithmIdentifier$2===false)return false;return t.isEqual(SignerInfo$1.defaultValues(SIGNATURE_ALGORITHM));case SIGNATURE:case UNSIGNED_ATTRS:return SignedAndUnsignedAttributes.compareWithDefault("type",t.type)&&SignedAndUnsignedAttributes.compareWithDefault("attributes",t.attributes)&&SignedAndUnsignedAttributes.compareWithDefault("encodedValue",t.encodedValue);default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:SIGNER_INFO,value:[new Integer({name:t.version||SIGNER_INFO_VERSION}),new Choice({value:[IssuerAndSerialNumber$1.schema(t.sidSchema||{names:{blockName:SIGNER_INFO_SID}}),new Choice({value:[new Constructed({optional:true,name:t.sid||SIGNER_INFO_SID,idBlock:{tagClass:3,tagNumber:0},value:[new OctetString$1]}),new Primitive({optional:true,name:t.sid||SIGNER_INFO_SID,idBlock:{tagClass:3,tagNumber:0}})]})]}),AlgorithmIdentifier$2.schema(t.digestAlgorithm||{names:{blockName:SIGNER_INFO_DIGEST_ALGORITHM}}),SignedAndUnsignedAttributes.schema(t.signedAttrs||{names:{blockName:SIGNER_INFO_SIGNED_ATTRS,tagNumber:0}}),AlgorithmIdentifier$2.schema(t.signatureAlgorithm||{names:{blockName:SIGNER_INFO_SIGNATURE_ALGORITHM}}),new OctetString$1({name:t.signature||SIGNER_INFO_SIGNATURE}),SignedAndUnsignedAttributes.schema(t.unsignedAttrs||{names:{blockName:SIGNER_INFO_UNSIGNED_ATTRS,tagNumber:1}})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$5);const t=compareSchema(e,e,SignerInfo$1.schema());AsnError.assertSchema(t,this.className);this.version=t.result[SIGNER_INFO_VERSION].valueBlock.valueDec;const r=t.result[SIGNER_INFO_SID];if(r.idBlock.tagClass===1)this.sid=new IssuerAndSerialNumber$1({schema:r});else this.sid=r;this.digestAlgorithm=new AlgorithmIdentifier$2({schema:t.result[SIGNER_INFO_DIGEST_ALGORITHM]});if(SIGNER_INFO_SIGNED_ATTRS in t.result)this.signedAttrs=new SignedAndUnsignedAttributes({type:0,schema:t.result[SIGNER_INFO_SIGNED_ATTRS]});this.signatureAlgorithm=new AlgorithmIdentifier$2({schema:t.result[SIGNER_INFO_SIGNATURE_ALGORITHM]});this.signature=t.result[SIGNER_INFO_SIGNATURE];if(SIGNER_INFO_UNSIGNED_ATTRS in t.result)this.unsignedAttrs=new SignedAndUnsignedAttributes({type:1,schema:t.result[SIGNER_INFO_UNSIGNED_ATTRS]})}toSchema(){if(SignerInfo$1.compareWithDefault(SID,this.sid))throw new Error('Incorrectly initialized "SignerInfo" class');const e=[];e.push(new Integer({value:this.version}));if(this.sid instanceof IssuerAndSerialNumber$1)e.push(this.sid.toSchema());else e.push(this.sid);e.push(this.digestAlgorithm.toSchema());if(this.signedAttrs){if(SignerInfo$1.compareWithDefault(SIGNED_ATTRS,this.signedAttrs)===false)e.push(this.signedAttrs.toSchema())}e.push(this.signatureAlgorithm.toSchema());e.push(this.signature);if(this.unsignedAttrs){if(SignerInfo$1.compareWithDefault(UNSIGNED_ATTRS,this.unsignedAttrs)===false)e.push(this.unsignedAttrs.toSchema())}return new Sequence({value:e})}toJSON(){if(SignerInfo$1.compareWithDefault(SID,this.sid)){throw new Error('Incorrectly initialized "SignerInfo" class')}const e={version:this.version,digestAlgorithm:this.digestAlgorithm.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signature:this.signature.toJSON()};if(!(this.sid instanceof Any))e.sid=this.sid.toJSON();if(this.signedAttrs&&SignerInfo$1.compareWithDefault(SIGNED_ATTRS,this.signedAttrs)===false){e.signedAttrs=this.signedAttrs.toJSON()}if(this.unsignedAttrs&&SignerInfo$1.compareWithDefault(UNSIGNED_ATTRS,this.unsignedAttrs)===false){e.unsignedAttrs=this.unsignedAttrs.toJSON()}return e}}SignerInfo$1.CLASS_NAME="SignerInfo";const VERSION$3="version";const POLICY="policy";const MESSAGE_IMPRINT$1="messageImprint";const SERIAL_NUMBER="serialNumber";const GEN_TIME="genTime";const ORDERING="ordering";const NONCE$1="nonce";const ACCURACY="accuracy";const TSA="tsa";const EXTENSIONS$1="extensions";const TST_INFO="TSTInfo";const TST_INFO_VERSION=`${TST_INFO}.${VERSION$3}`;const TST_INFO_POLICY=`${TST_INFO}.${POLICY}`;const TST_INFO_MESSAGE_IMPRINT=`${TST_INFO}.${MESSAGE_IMPRINT$1}`;const TST_INFO_SERIAL_NUMBER=`${TST_INFO}.${SERIAL_NUMBER}`;const TST_INFO_GEN_TIME=`${TST_INFO}.${GEN_TIME}`;const TST_INFO_ACCURACY=`${TST_INFO}.${ACCURACY}`;const TST_INFO_ORDERING=`${TST_INFO}.${ORDERING}`;const TST_INFO_NONCE=`${TST_INFO}.${NONCE$1}`;const TST_INFO_TSA=`${TST_INFO}.${TSA}`;const TST_INFO_EXTENSIONS=`${TST_INFO}.${EXTENSIONS$1}`;const CLEAR_PROPS$4=[TST_INFO_VERSION,TST_INFO_POLICY,TST_INFO_MESSAGE_IMPRINT,TST_INFO_SERIAL_NUMBER,TST_INFO_GEN_TIME,TST_INFO_ACCURACY,TST_INFO_ORDERING,TST_INFO_NONCE,TST_INFO_TSA,TST_INFO_EXTENSIONS];class TSTInfo extends PkiObject{constructor(e={}){super();this.version=getParametersValue(e,VERSION$3,TSTInfo.defaultValues(VERSION$3));this.policy=getParametersValue(e,POLICY,TSTInfo.defaultValues(POLICY));this.messageImprint=getParametersValue(e,MESSAGE_IMPRINT$1,TSTInfo.defaultValues(MESSAGE_IMPRINT$1));this.serialNumber=getParametersValue(e,SERIAL_NUMBER,TSTInfo.defaultValues(SERIAL_NUMBER));this.genTime=getParametersValue(e,GEN_TIME,TSTInfo.defaultValues(GEN_TIME));if(ACCURACY in e){this.accuracy=getParametersValue(e,ACCURACY,TSTInfo.defaultValues(ACCURACY))}if(ORDERING in e){this.ordering=getParametersValue(e,ORDERING,TSTInfo.defaultValues(ORDERING))}if(NONCE$1 in e){this.nonce=getParametersValue(e,NONCE$1,TSTInfo.defaultValues(NONCE$1))}if(TSA in e){this.tsa=getParametersValue(e,TSA,TSTInfo.defaultValues(TSA))}if(EXTENSIONS$1 in e){this.extensions=getParametersValue(e,EXTENSIONS$1,TSTInfo.defaultValues(EXTENSIONS$1))}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case VERSION$3:return 0;case POLICY:return EMPTY_STRING;case MESSAGE_IMPRINT$1:return new MessageImprint;case SERIAL_NUMBER:return new Integer;case GEN_TIME:return new Date(0,0,0);case ACCURACY:return new Accuracy;case ORDERING:return false;case NONCE$1:return new Integer;case TSA:return new GeneralName$2;case EXTENSIONS$1:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case VERSION$3:case POLICY:case GEN_TIME:case ORDERING:return t===TSTInfo.defaultValues(ORDERING);case MESSAGE_IMPRINT$1:return MessageImprint.compareWithDefault(HASH_ALGORITHM,t.hashAlgorithm)&&MessageImprint.compareWithDefault(HASHED_MESSAGE,t.hashedMessage);case SERIAL_NUMBER:case NONCE$1:return t.isEqual(TSTInfo.defaultValues(NONCE$1));case ACCURACY:return Accuracy.compareWithDefault(SECONDS,t.seconds)&&Accuracy.compareWithDefault(MILLIS,t.millis)&&Accuracy.compareWithDefault(MICROS,t.micros);case TSA:return GeneralName$2.compareWithDefault(TYPE$4,t.type)&&GeneralName$2.compareWithDefault(VALUE$5,t.value);case EXTENSIONS$1:return t.length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||TST_INFO,value:[new Integer({name:t.version||TST_INFO_VERSION}),new ObjectIdentifier$1({name:t.policy||TST_INFO_POLICY}),MessageImprint.schema(t.messageImprint||{names:{blockName:TST_INFO_MESSAGE_IMPRINT}}),new Integer({name:t.serialNumber||TST_INFO_SERIAL_NUMBER}),new GeneralizedTime({name:t.genTime||TST_INFO_GEN_TIME}),Accuracy.schema(t.accuracy||{names:{blockName:TST_INFO_ACCURACY}}),new Boolean$1({name:t.ordering||TST_INFO_ORDERING,optional:true}),new Integer({name:t.nonce||TST_INFO_NONCE,optional:true}),new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:0},value:[GeneralName$2.schema(t.tsa||{names:{blockName:TST_INFO_TSA}})]}),new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:1},value:[new Repeated({name:t.extensions||TST_INFO_EXTENSIONS,value:Extension$2.schema(t.extension||{})})]})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$4);const t=compareSchema(e,e,TSTInfo.schema());AsnError.assertSchema(t,this.className);this.version=t.result[TST_INFO_VERSION].valueBlock.valueDec;this.policy=t.result[TST_INFO_POLICY].valueBlock.toString();this.messageImprint=new MessageImprint({schema:t.result[TST_INFO_MESSAGE_IMPRINT]});this.serialNumber=t.result[TST_INFO_SERIAL_NUMBER];this.genTime=t.result[TST_INFO_GEN_TIME].toDate();if(TST_INFO_ACCURACY in t.result)this.accuracy=new Accuracy({schema:t.result[TST_INFO_ACCURACY]});if(TST_INFO_ORDERING in t.result)this.ordering=t.result[TST_INFO_ORDERING].valueBlock.value;if(TST_INFO_NONCE in t.result)this.nonce=t.result[TST_INFO_NONCE];if(TST_INFO_TSA in t.result)this.tsa=new GeneralName$2({schema:t.result[TST_INFO_TSA]});if(TST_INFO_EXTENSIONS in t.result)this.extensions=Array.from(t.result[TST_INFO_EXTENSIONS],(e=>new Extension$2({schema:e})))}toSchema(){const e=[];e.push(new Integer({value:this.version}));e.push(new ObjectIdentifier$1({value:this.policy}));e.push(this.messageImprint.toSchema());e.push(this.serialNumber);e.push(new GeneralizedTime({valueDate:this.genTime}));if(this.accuracy)e.push(this.accuracy.toSchema());if(this.ordering!==undefined)e.push(new Boolean$1({value:this.ordering}));if(this.nonce)e.push(this.nonce);if(this.tsa){e.push(new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:0},value:[this.tsa.toSchema()]}))}if(this.extensions){e.push(new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.extensions,(e=>e.toSchema()))}))}return new Sequence({value:e})}toJSON(){const e={version:this.version,policy:this.policy,messageImprint:this.messageImprint.toJSON(),serialNumber:this.serialNumber.toJSON(),genTime:this.genTime};if(this.accuracy)e.accuracy=this.accuracy.toJSON();if(this.ordering!==undefined)e.ordering=this.ordering;if(this.nonce)e.nonce=this.nonce.toJSON();if(this.tsa)e.tsa=this.tsa.toJSON();if(this.extensions)e.extensions=Array.from(this.extensions,(e=>e.toJSON()));return e}async verify(e,t=getCrypto(true)){if(!e.data){throw new Error('"data" is a mandatory attribute for TST_INFO verification')}const r=e.data;if(e.notBefore){if(this.genTime<e.notBefore)throw new Error("Generation time for TSTInfo object is less than notBefore value")}if(e.notAfter){if(this.genTime>e.notAfter)throw new Error("Generation time for TSTInfo object is more than notAfter value")}const n=t.getAlgorithmByOID(this.messageImprint.hashAlgorithm.algorithmId,true,"MessageImprint.hashAlgorithm");const i=await t.digest(n.name,new Uint8Array(r));return BufferSourceConverter_1.isEqual(i,this.messageImprint.hashedMessage.valueBlock.valueHexView)}}TSTInfo.CLASS_NAME="TSTInfo";const VERSION$2="version";const DIGEST_ALGORITHMS="digestAlgorithms";const ENCAP_CONTENT_INFO="encapContentInfo";const CERTIFICATES="certificates";const CRLS="crls";const SIGNER_INFOS="signerInfos";const OCSPS="ocsps";const SIGNED_DATA="SignedData";const SIGNED_DATA_VERSION=`${SIGNED_DATA}.${VERSION$2}`;const SIGNED_DATA_DIGEST_ALGORITHMS=`${SIGNED_DATA}.${DIGEST_ALGORITHMS}`;const SIGNED_DATA_ENCAP_CONTENT_INFO=`${SIGNED_DATA}.${ENCAP_CONTENT_INFO}`;const SIGNED_DATA_CERTIFICATES=`${SIGNED_DATA}.${CERTIFICATES}`;const SIGNED_DATA_CRLS=`${SIGNED_DATA}.${CRLS}`;const SIGNED_DATA_SIGNER_INFOS=`${SIGNED_DATA}.${SIGNER_INFOS}`;const CLEAR_PROPS$3=[SIGNED_DATA_VERSION,SIGNED_DATA_DIGEST_ALGORITHMS,SIGNED_DATA_ENCAP_CONTENT_INFO,SIGNED_DATA_CERTIFICATES,SIGNED_DATA_CRLS,SIGNED_DATA_SIGNER_INFOS];class SignedDataVerifyError extends Error{constructor({message:e,code:t=0,date:r=new Date,signatureVerified:n=null,signerCertificate:i=null,signerCertificateVerified:s=null,timestampSerial:a=null,certificatePath:o=[]}){super(e);this.name="SignedDataVerifyError";this.date=r;this.code=t;this.timestampSerial=a;this.signatureVerified=n;this.signerCertificate=i;this.signerCertificateVerified=s;this.certificatePath=o}}class SignedData$1 extends PkiObject{constructor(e={}){super();this.version=getParametersValue(e,VERSION$2,SignedData$1.defaultValues(VERSION$2));this.digestAlgorithms=getParametersValue(e,DIGEST_ALGORITHMS,SignedData$1.defaultValues(DIGEST_ALGORITHMS));this.encapContentInfo=getParametersValue(e,ENCAP_CONTENT_INFO,SignedData$1.defaultValues(ENCAP_CONTENT_INFO));if(CERTIFICATES in e){this.certificates=getParametersValue(e,CERTIFICATES,SignedData$1.defaultValues(CERTIFICATES))}if(CRLS in e){this.crls=getParametersValue(e,CRLS,SignedData$1.defaultValues(CRLS))}if(OCSPS in e){this.ocsps=getParametersValue(e,OCSPS,SignedData$1.defaultValues(OCSPS))}this.signerInfos=getParametersValue(e,SIGNER_INFOS,SignedData$1.defaultValues(SIGNER_INFOS));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case VERSION$2:return 0;case DIGEST_ALGORITHMS:return[];case ENCAP_CONTENT_INFO:return new EncapsulatedContentInfo$1;case CERTIFICATES:return[];case CRLS:return[];case OCSPS:return[];case SIGNER_INFOS:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case VERSION$2:return t===SignedData$1.defaultValues(VERSION$2);case ENCAP_CONTENT_INFO:return EncapsulatedContentInfo$1.compareWithDefault("eContentType",t.eContentType)&&EncapsulatedContentInfo$1.compareWithDefault("eContent",t.eContent);case DIGEST_ALGORITHMS:case CERTIFICATES:case CRLS:case OCSPS:case SIGNER_INFOS:return t.length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});if(t.optional===undefined){t.optional=false}return new Sequence({name:t.blockName||SIGNED_DATA,optional:t.optional,value:[new Integer({name:t.version||SIGNED_DATA_VERSION}),new Set$3({value:[new Repeated({name:t.digestAlgorithms||SIGNED_DATA_DIGEST_ALGORITHMS,value:AlgorithmIdentifier$2.schema()})]}),EncapsulatedContentInfo$1.schema(t.encapContentInfo||{names:{blockName:SIGNED_DATA_ENCAP_CONTENT_INFO}}),new Constructed({name:t.certificates||SIGNED_DATA_CERTIFICATES,optional:true,idBlock:{tagClass:3,tagNumber:0},value:CertificateSet$1.schema().valueBlock.value}),new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:1},value:RevocationInfoChoices$1.schema(t.crls||{names:{crls:SIGNED_DATA_CRLS}}).valueBlock.value}),new Set$3({value:[new Repeated({name:t.signerInfos||SIGNED_DATA_SIGNER_INFOS,value:SignerInfo$1.schema()})]})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$3);const t=compareSchema(e,e,SignedData$1.schema());AsnError.assertSchema(t,this.className);this.version=t.result[SIGNED_DATA_VERSION].valueBlock.valueDec;if(SIGNED_DATA_DIGEST_ALGORITHMS in t.result)this.digestAlgorithms=Array.from(t.result[SIGNED_DATA_DIGEST_ALGORITHMS],(e=>new AlgorithmIdentifier$2({schema:e})));this.encapContentInfo=new EncapsulatedContentInfo$1({schema:t.result[SIGNED_DATA_ENCAP_CONTENT_INFO]});if(SIGNED_DATA_CERTIFICATES in t.result){const e=new CertificateSet$1({schema:new Set$3({value:t.result[SIGNED_DATA_CERTIFICATES].valueBlock.value})});this.certificates=e.certificates.slice(0)}if(SIGNED_DATA_CRLS in t.result){this.crls=Array.from(t.result[SIGNED_DATA_CRLS],(e=>{if(e.idBlock.tagClass===1)return new CertificateRevocationList({schema:e});e.idBlock.tagClass=1;e.idBlock.tagNumber=16;return new OtherRevocationInfoFormat$1({schema:e})}))}if(SIGNED_DATA_SIGNER_INFOS in t.result)this.signerInfos=Array.from(t.result[SIGNED_DATA_SIGNER_INFOS],(e=>new SignerInfo$1({schema:e})))}toSchema(e=false){const t=[];if(this.certificates&&this.certificates.length&&this.certificates.some((e=>e instanceof OtherCertificateFormat$1))||this.crls&&this.crls.length&&this.crls.some((e=>e instanceof OtherRevocationInfoFormat$1))){this.version=5}else if(this.certificates&&this.certificates.length&&this.certificates.some((e=>e instanceof AttributeCertificateV2))){this.version=4}else if(this.certificates&&this.certificates.length&&this.certificates.some((e=>e instanceof AttributeCertificateV1))||this.signerInfos.some((e=>e.version===3))||this.encapContentInfo.eContentType!==SignedData$1.ID_DATA){this.version=3}else{this.version=1}t.push(new Integer({value:this.version}));t.push(new Set$3({value:Array.from(this.digestAlgorithms,(e=>e.toSchema()))}));t.push(this.encapContentInfo.toSchema());if(this.certificates){const e=new CertificateSet$1({certificates:this.certificates});const r=e.toSchema();t.push(new Constructed({idBlock:{tagClass:3,tagNumber:0},value:r.valueBlock.value}))}if(this.crls){t.push(new Constructed({idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.crls,(t=>{if(t instanceof OtherRevocationInfoFormat$1){const e=t.toSchema();e.idBlock.tagClass=3;e.idBlock.tagNumber=1;return e}return t.toSchema(e)}))}))}t.push(new Set$3({value:Array.from(this.signerInfos,(e=>e.toSchema()))}));return new Sequence({value:t})}toJSON(){const e={version:this.version,digestAlgorithms:Array.from(this.digestAlgorithms,(e=>e.toJSON())),encapContentInfo:this.encapContentInfo.toJSON(),signerInfos:Array.from(this.signerInfos,(e=>e.toJSON()))};if(this.certificates){e.certificates=Array.from(this.certificates,(e=>e.toJSON()))}if(this.crls){e.crls=Array.from(this.crls,(e=>e.toJSON()))}return e}async verify({signer:e=-1,data:t=EMPTY_BUFFER,trustedCerts:r=[],checkDate:n=new Date,checkChain:i=false,passedWhenNotRevValues:s=false,extendedMode:a=false,findOrigin:o=null,findIssuer:f=null}={},c=getCrypto(true)){let u=null;let l=null;try{let h=EMPTY_BUFFER;let d=EMPTY_STRING;let p=[];const y=this.signerInfos[e];if(!y){throw new SignedDataVerifyError({date:n,code:1,message:"Unable to get signer by supplied index"})}if(!this.certificates){throw new SignedDataVerifyError({date:n,code:2,message:"No certificates attached to this signed data"})}if(y.sid instanceof IssuerAndSerialNumber$1){for(const e of this.certificates){if(!(e instanceof Certificate$1))continue;if(e.issuer.isEqual(y.sid.issuer)&&e.serialNumber.isEqual(y.sid.serialNumber)){u=e;break}}}else{const e=y.sid;const t=e.idBlock.isConstructed?e.valueBlock.value[0].valueBlock.valueHex:e.valueBlock.valueHex;for(const e of this.certificates){if(!(e instanceof Certificate$1)){continue}const r=await c.digest({name:"sha-1"},e.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHexView);if(isEqualBuffer(r,t)){u=e;break}}}if(!u){throw new SignedDataVerifyError({date:n,code:3,message:"Unable to find signer certificate"})}if(this.encapContentInfo.eContentType===id_eContentType_TSTInfo){if(!this.encapContentInfo.eContent){throw new SignedDataVerifyError({date:n,code:15,message:"Error during verification: TSTInfo eContent is empty",signatureVerified:null,signerCertificate:u,timestampSerial:l,signerCertificateVerified:true})}let e;try{e=TSTInfo.fromBER(this.encapContentInfo.eContent.valueBlock.valueHexView)}catch(e){throw new SignedDataVerifyError({date:n,code:15,message:"Error during verification: TSTInfo wrong ASN.1 schema ",signatureVerified:null,signerCertificate:u,timestampSerial:l,signerCertificateVerified:true})}n=e.genTime;l=e.serialNumber.valueBlock.valueHexView.slice();if(t.byteLength===0){throw new SignedDataVerifyError({date:n,code:4,message:"Missed detached data input array"})}if(!await e.verify({data:t},c)){throw new SignedDataVerifyError({date:n,code:15,message:"Error during verification: TSTInfo verification is failed",signatureVerified:false,signerCertificate:u,timestampSerial:l,signerCertificateVerified:true})}}if(i){const e=this.certificates.filter((e=>e instanceof Certificate$1&&!!checkCA(e,u)));const t={checkDate:n,certs:e,trustedCerts:r};if(f){t.findIssuer=f}if(o){t.findOrigin=o}const i=new CertificateChainValidationEngine(t);i.certs.push(u);if(this.crls){for(const e of this.crls){if("thisUpdate"in e)i.crls.push(e);else{if(e.otherRevInfoFormat===id_PKIX_OCSP_Basic)i.ocsps.push(new BasicOCSPResponse({schema:e.otherRevInfo}))}}}if(this.ocsps){i.ocsps.push(...this.ocsps)}const a=await i.verify({passedWhenNotRevValues:s},c).catch((e=>{throw new SignedDataVerifyError({date:n,code:5,message:`Validation of signer's certificate failed with error: ${e instanceof Object?e.resultMessage:e}`,signerCertificate:u,signerCertificateVerified:false})}));if(a.certificatePath){p=a.certificatePath}if(!a.result)throw new SignedDataVerifyError({date:n,code:5,message:`Validation of signer's certificate failed: ${a.resultMessage}`,signerCertificate:u,signerCertificateVerified:false})}const m=c.getAlgorithmByOID(y.digestAlgorithm.algorithmId);if(!("name"in m)){throw new SignedDataVerifyError({date:n,code:7,message:`Unsupported signature algorithm: ${y.digestAlgorithm.algorithmId}`,signerCertificate:u,signerCertificateVerified:true})}d=m.name;const g=this.encapContentInfo.eContent;if(g){if(g.idBlock.tagClass===1&&g.idBlock.tagNumber===4){t=g.getValue()}else t=g.valueBlock.valueBeforeDecodeView}else{if(t.byteLength===0){throw new SignedDataVerifyError({date:n,code:8,message:"Missed detached data input array",signerCertificate:u,signerCertificateVerified:true})}}if(y.signedAttrs){let e=false;let t=false;for(const r of y.signedAttrs.attributes){if(r.type==="1.2.840.113549.1.9.3")e=true;if(r.type==="1.2.840.113549.1.9.4"){t=true;h=r.values[0].valueBlock.valueHex}if(e&&t)break}if(e===false){throw new SignedDataVerifyError({date:n,code:9,message:'Attribute "content-type" is a mandatory attribute for "signed attributes"',signerCertificate:u,signerCertificateVerified:true})}if(t===false){throw new SignedDataVerifyError({date:n,code:10,message:'Attribute "message-digest" is a mandatory attribute for "signed attributes"',signatureVerified:null,signerCertificate:u,signerCertificateVerified:true})}}if(y.signedAttrs){const e=await c.digest(d,new Uint8Array(t));if(!isEqualBuffer(e,h)){throw new SignedDataVerifyError({date:n,code:15,message:"Error during verification: Message digest doesn't match",signatureVerified:null,signerCertificate:u,timestampSerial:l,signerCertificateVerified:true})}t=y.signedAttrs.encodedValue}const b=await c.verifyWithPublicKey(t,y.signature,u.subjectPublicKeyInfo,u.signatureAlgorithm,d);if(a){return{date:n,code:14,message:EMPTY_STRING,signatureVerified:b,signerCertificate:u,timestampSerial:l,signerCertificateVerified:true,certificatePath:p}}else{return b}}catch(e){if(e instanceof SignedDataVerifyError){throw e}throw new SignedDataVerifyError({date:n,code:15,message:`Error during verification: ${e instanceof Error?e.message:e}`,signatureVerified:null,signerCertificate:u,timestampSerial:l,signerCertificateVerified:true})}}async sign(e,t,r="SHA-1",n=EMPTY_BUFFER,i=getCrypto(true)){if(!e)throw new Error("Need to provide a private key for signing");const s=i.getOIDByAlgorithm({name:r},true,"hashAlgorithm");if(this.digestAlgorithms.filter((e=>e.algorithmId===s)).length===0){this.digestAlgorithms.push(new AlgorithmIdentifier$2({algorithmId:s,algorithmParams:new Null}))}const a=this.signerInfos[t];if(!a){throw new RangeError("SignerInfo index is out of range")}a.digestAlgorithm=new AlgorithmIdentifier$2({algorithmId:s,algorithmParams:new Null});const o=await i.getSignatureParameters(e,r);const f=o.parameters;a.signatureAlgorithm=o.signatureAlgorithm;if(a.signedAttrs){if(a.signedAttrs.encodedValue.byteLength!==0)n=a.signedAttrs.encodedValue;else{n=a.signedAttrs.toSchema().toBER();const e=BufferSourceConverter_1.toUint8Array(n);e[0]=49}}else{const e=this.encapContentInfo.eContent;if(e){if(e.idBlock.tagClass===1&&e.idBlock.tagNumber===4){n=e.getValue()}else n=e.valueBlock.valueBeforeDecodeView}else{if(n.byteLength===0)throw new Error("Missed detached data input array")}}const c=await i.signWithPrivateKey(n,e,f);a.signature=new OctetString$1({valueHex:c})}}SignedData$1.CLASS_NAME="SignedData";SignedData$1.ID_DATA=id_ContentType_Data;const VERSION$1="version";const AUTH_SAFE="authSafe";const MAC_DATA="macData";const PARSED_VALUE="parsedValue";const CLERA_PROPS=[VERSION$1,AUTH_SAFE,MAC_DATA];class PFX$1 extends PkiObject{constructor(e={}){super();this.version=getParametersValue(e,VERSION$1,PFX$1.defaultValues(VERSION$1));this.authSafe=getParametersValue(e,AUTH_SAFE,PFX$1.defaultValues(AUTH_SAFE));if(MAC_DATA in e){this.macData=getParametersValue(e,MAC_DATA,PFX$1.defaultValues(MAC_DATA))}if(PARSED_VALUE in e){this.parsedValue=getParametersValue(e,PARSED_VALUE,PFX$1.defaultValues(PARSED_VALUE))}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case VERSION$1:return 3;case AUTH_SAFE:return new ContentInfo$1;case MAC_DATA:return new MacData$1;case PARSED_VALUE:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case VERSION$1:return t===PFX$1.defaultValues(e);case AUTH_SAFE:return ContentInfo$1.compareWithDefault("contentType",t.contentType)&&ContentInfo$1.compareWithDefault("content",t.content);case MAC_DATA:return MacData$1.compareWithDefault("mac",t.mac)&&MacData$1.compareWithDefault("macSalt",t.macSalt)&&MacData$1.compareWithDefault("iterations",t.iterations);case PARSED_VALUE:return t instanceof Object&&Object.keys(t).length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Integer({name:t.version||VERSION$1}),ContentInfo$1.schema(t.authSafe||{names:{blockName:AUTH_SAFE}}),MacData$1.schema(t.macData||{names:{blockName:MAC_DATA,optional:true}})]})}fromSchema(e){clearProps(e,CLERA_PROPS);const t=compareSchema(e,e,PFX$1.schema({names:{version:VERSION$1,authSafe:{names:{blockName:AUTH_SAFE}},macData:{names:{blockName:MAC_DATA}}}}));AsnError.assertSchema(t,this.className);this.version=t.result.version.valueBlock.valueDec;this.authSafe=new ContentInfo$1({schema:t.result.authSafe});if(MAC_DATA in t.result)this.macData=new MacData$1({schema:t.result.macData})}toSchema(){const e=[new Integer({value:this.version}),this.authSafe.toSchema()];if(this.macData){e.push(this.macData.toSchema())}return new Sequence({value:e})}toJSON(){const e={version:this.version,authSafe:this.authSafe.toJSON()};if(this.macData){e.macData=this.macData.toJSON()}return e}async makeInternalValues(e={},t=getCrypto(true)){ArgumentError.assert(e,"parameters","object");if(!this.parsedValue){throw new Error('Please call "parseValues" function first in order to make "parsedValue" data')}ParameterError.assertEmpty(this.parsedValue.integrityMode,"integrityMode","parsedValue");ParameterError.assertEmpty(this.parsedValue.authenticatedSafe,"authenticatedSafe","parsedValue");switch(this.parsedValue.integrityMode){case 0:{if(!("iterations"in e))throw new ParameterError("iterations");ParameterError.assertEmpty(e.pbkdf2HashAlgorithm,"pbkdf2HashAlgorithm");ParameterError.assertEmpty(e.hmacHashAlgorithm,"hmacHashAlgorithm");ParameterError.assertEmpty(e.password,"password");const r=new ArrayBuffer(64);const n=new Uint8Array(r);t.getRandomValues(n);const i=this.parsedValue.authenticatedSafe.toSchema().toBER(false);this.authSafe=new ContentInfo$1({contentType:ContentInfo$1.DATA,content:new OctetString$1({valueHex:i})});const s=await t.stampDataWithPassword({password:e.password,hashAlgorithm:e.hmacHashAlgorithm,salt:r,iterationCount:e.iterations,contentToStamp:i});this.macData=new MacData$1({mac:new DigestInfo$1({digestAlgorithm:new AlgorithmIdentifier$2({algorithmId:t.getOIDByAlgorithm({name:e.hmacHashAlgorithm},true,"hmacHashAlgorithm")}),digest:new OctetString$1({valueHex:s})}),macSalt:new OctetString$1({valueHex:r}),iterations:e.iterations})}break;case 1:{if(!("signingCertificate"in e)){throw new ParameterError("signingCertificate")}ParameterError.assertEmpty(e.privateKey,"privateKey");ParameterError.assertEmpty(e.hashAlgorithm,"hashAlgorithm");const r=this.parsedValue.authenticatedSafe.toSchema().toBER(false);const n=new SignedData$1({version:1,encapContentInfo:new EncapsulatedContentInfo$1({eContentType:"1.2.840.113549.1.7.1",eContent:new OctetString$1({valueHex:r})}),certificates:[e.signingCertificate]});const i=await t.digest({name:e.hashAlgorithm},new Uint8Array(r));const s=[];s.push(new Attribute$3({type:"1.2.840.113549.1.9.3",values:[new ObjectIdentifier$1({value:"1.2.840.113549.1.7.1"})]}));s.push(new Attribute$3({type:"1.2.840.113549.1.9.5",values:[new UTCTime({valueDate:new Date})]}));s.push(new Attribute$3({type:"1.2.840.113549.1.9.4",values:[new OctetString$1({valueHex:i})]}));n.signerInfos.push(new SignerInfo$1({version:1,sid:new IssuerAndSerialNumber$1({issuer:e.signingCertificate.issuer,serialNumber:e.signingCertificate.serialNumber}),signedAttrs:new SignedAndUnsignedAttributes({type:0,attributes:s})}));await n.sign(e.privateKey,0,e.hashAlgorithm,undefined,t);this.authSafe=new ContentInfo$1({contentType:"1.2.840.113549.1.7.2",content:n.toSchema(true)})}break;default:throw new Error(`Parameter "integrityMode" has unknown value: ${this.parsedValue.integrityMode}`)}}async parseInternalValues(e,t=getCrypto(true)){ArgumentError.assert(e,"parameters","object");if(e.checkIntegrity===undefined){e.checkIntegrity=true}this.parsedValue={};switch(this.authSafe.contentType){case ContentInfo$1.DATA:{ParameterError.assertEmpty(e.password,"password");this.parsedValue.integrityMode=0;ArgumentError.assert(this.authSafe.content,"authSafe.content",OctetString$1);const r=this.authSafe.content.getValue();this.parsedValue.authenticatedSafe=AuthenticatedSafe$1.fromBER(r);if(e.checkIntegrity){if(!this.macData){throw new Error('Absent "macData" value, can not check PKCS#12 data integrity')}const n=t.getAlgorithmByOID(this.macData.mac.digestAlgorithm.algorithmId,true,"digestAlgorithm");const i=await t.verifyDataStampedWithPassword({password:e.password,hashAlgorithm:n.name,salt:BufferSourceConverter_1.toArrayBuffer(this.macData.macSalt.valueBlock.valueHexView),iterationCount:this.macData.iterations||1,contentToVerify:r,signatureToVerify:BufferSourceConverter_1.toArrayBuffer(this.macData.mac.digest.valueBlock.valueHexView)});if(!i){throw new Error("Integrity for the PKCS#12 data is broken!")}}}break;case ContentInfo$1.SIGNED_DATA:{this.parsedValue.integrityMode=1;const e=new SignedData$1({schema:this.authSafe.content});const r=e.encapContentInfo.eContent;ParameterError.assert(r,"eContent","cmsSigned.encapContentInfo");ArgumentError.assert(r,"eContent",OctetString$1);const n=r.getValue();this.parsedValue.authenticatedSafe=AuthenticatedSafe$1.fromBER(n);const i=await e.verify({signer:0,checkChain:false},t);if(!i){throw new Error("Integrity for the PKCS#12 data is broken!")}}break;default:throw new Error(`Incorrect value for "this.authSafe.contentType": ${this.authSafe.contentType}`)}}}PFX$1.CLASS_NAME="PFX";const STATUS$1="status";const STATUS_STRINGS="statusStrings";const FAIL_INFO="failInfo";const CLEAR_PROPS$2=[STATUS$1,STATUS_STRINGS,FAIL_INFO];var PKIStatus;(function(e){e[e["granted"]=0]="granted";e[e["grantedWithMods"]=1]="grantedWithMods";e[e["rejection"]=2]="rejection";e[e["waiting"]=3]="waiting";e[e["revocationWarning"]=4]="revocationWarning";e[e["revocationNotification"]=5]="revocationNotification"})(PKIStatus||(PKIStatus={}));class PKIStatusInfo extends PkiObject{constructor(e={}){super();this.status=getParametersValue(e,STATUS$1,PKIStatusInfo.defaultValues(STATUS$1));if(STATUS_STRINGS in e){this.statusStrings=getParametersValue(e,STATUS_STRINGS,PKIStatusInfo.defaultValues(STATUS_STRINGS))}if(FAIL_INFO in e){this.failInfo=getParametersValue(e,FAIL_INFO,PKIStatusInfo.defaultValues(FAIL_INFO))}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case STATUS$1:return 2;case STATUS_STRINGS:return[];case FAIL_INFO:return new BitString$1;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case STATUS$1:return t===PKIStatusInfo.defaultValues(e);case STATUS_STRINGS:return t.length===0;case FAIL_INFO:return t.isEqual(PKIStatusInfo.defaultValues(e));default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Integer({name:t.status||EMPTY_STRING}),new Sequence({optional:true,value:[new Repeated({name:t.statusStrings||EMPTY_STRING,value:new Utf8String})]}),new BitString$1({name:t.failInfo||EMPTY_STRING,optional:true})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$2);const t=compareSchema(e,e,PKIStatusInfo.schema({names:{status:STATUS$1,statusStrings:STATUS_STRINGS,failInfo:FAIL_INFO}}));AsnError.assertSchema(t,this.className);const r=t.result.status;if(r.valueBlock.isHexOnly===true||r.valueBlock.valueDec<0||r.valueBlock.valueDec>5)throw new Error('PKIStatusInfo "status" has invalid value');this.status=r.valueBlock.valueDec;if(STATUS_STRINGS in t.result)this.statusStrings=t.result.statusStrings;if(FAIL_INFO in t.result)this.failInfo=t.result.failInfo}toSchema(){const e=[];e.push(new Integer({value:this.status}));if(this.statusStrings){e.push(new Sequence({optional:true,value:this.statusStrings}))}if(this.failInfo){e.push(this.failInfo)}return new Sequence({value:e})}toJSON(){const e={status:this.status};if(this.statusStrings){e.statusStrings=Array.from(this.statusStrings,(e=>e.toJSON()))}if(this.failInfo){e.failInfo=this.failInfo.toJSON()}return e}}PKIStatusInfo.CLASS_NAME="PKIStatusInfo";const VERSION$m="version";const MESSAGE_IMPRINT="messageImprint";const REQ_POLICY="reqPolicy";const NONCE="nonce";const CERT_REQ="certReq";const EXTENSIONS="extensions";const TIME_STAMP_REQ="TimeStampReq";const TIME_STAMP_REQ_VERSION=`${TIME_STAMP_REQ}.${VERSION$m}`;const TIME_STAMP_REQ_MESSAGE_IMPRINT=`${TIME_STAMP_REQ}.${MESSAGE_IMPRINT}`;const TIME_STAMP_REQ_POLICY=`${TIME_STAMP_REQ}.${REQ_POLICY}`;const TIME_STAMP_REQ_NONCE=`${TIME_STAMP_REQ}.${NONCE}`;const TIME_STAMP_REQ_CERT_REQ=`${TIME_STAMP_REQ}.${CERT_REQ}`;const TIME_STAMP_REQ_EXTENSIONS=`${TIME_STAMP_REQ}.${EXTENSIONS}`;const CLEAR_PROPS$1=[TIME_STAMP_REQ_VERSION,TIME_STAMP_REQ_MESSAGE_IMPRINT,TIME_STAMP_REQ_POLICY,TIME_STAMP_REQ_NONCE,TIME_STAMP_REQ_CERT_REQ,TIME_STAMP_REQ_EXTENSIONS];class TimeStampReq extends PkiObject{constructor(e={}){super();this.version=getParametersValue(e,VERSION$m,TimeStampReq.defaultValues(VERSION$m));this.messageImprint=getParametersValue(e,MESSAGE_IMPRINT,TimeStampReq.defaultValues(MESSAGE_IMPRINT));if(REQ_POLICY in e){this.reqPolicy=getParametersValue(e,REQ_POLICY,TimeStampReq.defaultValues(REQ_POLICY))}if(NONCE in e){this.nonce=getParametersValue(e,NONCE,TimeStampReq.defaultValues(NONCE))}if(CERT_REQ in e){this.certReq=getParametersValue(e,CERT_REQ,TimeStampReq.defaultValues(CERT_REQ))}if(EXTENSIONS in e){this.extensions=getParametersValue(e,EXTENSIONS,TimeStampReq.defaultValues(EXTENSIONS))}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case VERSION$m:return 0;case MESSAGE_IMPRINT:return new MessageImprint;case REQ_POLICY:return EMPTY_STRING;case NONCE:return new Integer;case CERT_REQ:return false;case EXTENSIONS:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case VERSION$m:case REQ_POLICY:case CERT_REQ:return t===TimeStampReq.defaultValues(e);case MESSAGE_IMPRINT:return MessageImprint.compareWithDefault("hashAlgorithm",t.hashAlgorithm)&&MessageImprint.compareWithDefault("hashedMessage",t.hashedMessage);case NONCE:return t.isEqual(TimeStampReq.defaultValues(e));case EXTENSIONS:return t.length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||TIME_STAMP_REQ,value:[new Integer({name:t.version||TIME_STAMP_REQ_VERSION}),MessageImprint.schema(t.messageImprint||{names:{blockName:TIME_STAMP_REQ_MESSAGE_IMPRINT}}),new ObjectIdentifier$1({name:t.reqPolicy||TIME_STAMP_REQ_POLICY,optional:true}),new Integer({name:t.nonce||TIME_STAMP_REQ_NONCE,optional:true}),new Boolean$1({name:t.certReq||TIME_STAMP_REQ_CERT_REQ,optional:true}),new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:0},value:[new Repeated({name:t.extensions||TIME_STAMP_REQ_EXTENSIONS,value:Extension$2.schema()})]})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$1);const t=compareSchema(e,e,TimeStampReq.schema());AsnError.assertSchema(t,this.className);this.version=t.result[TIME_STAMP_REQ_VERSION].valueBlock.valueDec;this.messageImprint=new MessageImprint({schema:t.result[TIME_STAMP_REQ_MESSAGE_IMPRINT]});if(TIME_STAMP_REQ_POLICY in t.result)this.reqPolicy=t.result[TIME_STAMP_REQ_POLICY].valueBlock.toString();if(TIME_STAMP_REQ_NONCE in t.result)this.nonce=t.result[TIME_STAMP_REQ_NONCE];if(TIME_STAMP_REQ_CERT_REQ in t.result)this.certReq=t.result[TIME_STAMP_REQ_CERT_REQ].valueBlock.value;if(TIME_STAMP_REQ_EXTENSIONS in t.result)this.extensions=Array.from(t.result[TIME_STAMP_REQ_EXTENSIONS],(e=>new Extension$2({schema:e})))}toSchema(){const e=[];e.push(new Integer({value:this.version}));e.push(this.messageImprint.toSchema());if(this.reqPolicy)e.push(new ObjectIdentifier$1({value:this.reqPolicy}));if(this.nonce)e.push(this.nonce);if(CERT_REQ in this&&TimeStampReq.compareWithDefault(CERT_REQ,this.certReq)===false)e.push(new Boolean$1({value:this.certReq}));if(this.extensions){e.push(new Constructed({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.extensions,(e=>e.toSchema()))}))}return new Sequence({value:e})}toJSON(){const e={version:this.version,messageImprint:this.messageImprint.toJSON()};if(this.reqPolicy!==undefined)e.reqPolicy=this.reqPolicy;if(this.nonce!==undefined)e.nonce=this.nonce.toJSON();if(this.certReq!==undefined&&TimeStampReq.compareWithDefault(CERT_REQ,this.certReq)===false)e.certReq=this.certReq;if(this.extensions){e.extensions=Array.from(this.extensions,(e=>e.toJSON()))}return e}}TimeStampReq.CLASS_NAME="TimeStampReq";const STATUS="status";const TIME_STAMP_TOKEN="timeStampToken";const TIME_STAMP_RESP="TimeStampResp";const TIME_STAMP_RESP_STATUS=`${TIME_STAMP_RESP}.${STATUS}`;const TIME_STAMP_RESP_TOKEN=`${TIME_STAMP_RESP}.${TIME_STAMP_TOKEN}`;const CLEAR_PROPS=[TIME_STAMP_RESP_STATUS,TIME_STAMP_RESP_TOKEN];class TimeStampResp extends PkiObject{constructor(e={}){super();this.status=getParametersValue(e,STATUS,TimeStampResp.defaultValues(STATUS));if(TIME_STAMP_TOKEN in e){this.timeStampToken=getParametersValue(e,TIME_STAMP_TOKEN,TimeStampResp.defaultValues(TIME_STAMP_TOKEN))}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case STATUS:return new PKIStatusInfo;case TIME_STAMP_TOKEN:return new ContentInfo$1;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case STATUS:return PKIStatusInfo.compareWithDefault(STATUS,t.status)&&"statusStrings"in t===false&&"failInfo"in t===false;case TIME_STAMP_TOKEN:return t.contentType===EMPTY_STRING&&t.content instanceof Any;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||TIME_STAMP_RESP,value:[PKIStatusInfo.schema(t.status||{names:{blockName:TIME_STAMP_RESP_STATUS}}),ContentInfo$1.schema(t.timeStampToken||{names:{blockName:TIME_STAMP_RESP_TOKEN,optional:true}})]})}fromSchema(e){clearProps(e,CLEAR_PROPS);const t=compareSchema(e,e,TimeStampResp.schema());AsnError.assertSchema(t,this.className);this.status=new PKIStatusInfo({schema:t.result[TIME_STAMP_RESP_STATUS]});if(TIME_STAMP_RESP_TOKEN in t.result)this.timeStampToken=new ContentInfo$1({schema:t.result[TIME_STAMP_RESP_TOKEN]})}toSchema(){const e=[];e.push(this.status.toSchema());if(this.timeStampToken){e.push(this.timeStampToken.toSchema())}return new Sequence({value:e})}toJSON(){const e={status:this.status.toJSON()};if(this.timeStampToken){e.timeStampToken=this.timeStampToken.toJSON()}return e}async sign(e,t,r=getCrypto(true)){this.assertContentType();const n=new SignedData$1({schema:this.timeStampToken.content});return n.sign(e,0,t,undefined,r)}async verify(e={signer:0,trustedCerts:[],data:EMPTY_BUFFER},t=getCrypto(true)){this.assertContentType();const r=new SignedData$1({schema:this.timeStampToken.content});return r.verify(e,t)}assertContentType(){if(!this.timeStampToken){throw new Error("timeStampToken is absent in TSP response")}if(this.timeStampToken.contentType!==id_ContentType_SignedData){throw new Error(`Wrong format of timeStampToken: ${this.timeStampToken.contentType}`)}}}TimeStampResp.CLASS_NAME="TimeStampResp";function initCryptoEngine(){if(typeof self!=="undefined"){if("crypto"in self){let e="webcrypto";if("webkitSubtle"in self.crypto){e="safari"}setEngine(e,new CryptoEngine({name:e,crypto}))}}else if(typeof crypto!=="undefined"&&"webcrypto"in crypto){const e="NodeJS ^15";const t=crypto.webcrypto;setEngine(e,new CryptoEngine({name:e,crypto:t}))}}initCryptoEngine();var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return extendStatics(e,t)};function __extends$1(e,t){if(typeof t!=="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");extendStatics(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var __assign=function(){__assign=Object.assign||function e(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)if(Object.prototype.hasOwnProperty.call(r,s))t[s]=r[s]}return t};return __assign.apply(this,arguments)};function __rest$1(e,t){var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0)r[n]=e[n];if(e!=null&&typeof Object.getOwnPropertySymbols==="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++){if(t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i]))r[n[i]]=e[n[i]]}return r}function __decorate(e,t,r,n){var i=arguments.length,s=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")s=Reflect.decorate(e,t,r,n);else for(var o=e.length-1;o>=0;o--)if(a=e[o])s=(i<3?a(s):i>3?a(t,r,s):a(t,r))||s;return i>3&&s&&Object.defineProperty(t,r,s),s}function __param(e,t){return function(r,n){t(r,n,e)}}function __esDecorate(e,t,r,n,i,s){function a(e){if(e!==void 0&&typeof e!=="function")throw new TypeError("Function expected");return e}var o=n.kind,f=o==="getter"?"get":o==="setter"?"set":"value";var c=!t&&e?n["static"]?e:e.prototype:null;var u=t||(c?Object.getOwnPropertyDescriptor(c,n.name):{});var l,h=false;for(var d=r.length-1;d>=0;d--){var p={};for(var y in n)p[y]=y==="access"?{}:n[y];for(var y in n.access)p.access[y]=n.access[y];p.addInitializer=function(e){if(h)throw new TypeError("Cannot add initializers after decoration has completed");s.push(a(e||null))};var m=(0,r[d])(o==="accessor"?{get:u.get,set:u.set}:u[f],p);if(o==="accessor"){if(m===void 0)continue;if(m===null||typeof m!=="object")throw new TypeError("Object expected");if(l=a(m.get))u.get=l;if(l=a(m.set))u.set=l;if(l=a(m.init))i.unshift(l)}else if(l=a(m)){if(o==="field")i.unshift(l);else u[f]=l}}if(c)Object.defineProperty(c,n.name,u);h=true}function __runInitializers(e,t,r){var n=arguments.length>2;for(var i=0;i<t.length;i++){r=n?t[i].call(e,r):t[i].call(e)}return n?r:void 0}function __propKey(e){return typeof e==="symbol"?e:"".concat(e)}function __setFunctionName(e,t,r){if(typeof t==="symbol")t=t.description?"[".concat(t.description,"]"):"";return Object.defineProperty(e,"name",{configurable:true,value:r?"".concat(r," ",t):t})}function __metadata(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)}function __awaiter$1(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,s){function a(e){try{f(n.next(e))}catch(e){s(e)}}function o(e){try{f(n["throw"](e))}catch(e){s(e)}}function f(e){e.done?r(e.value):i(e.value).then(a,o)}f((n=n.apply(e,t||[])).next())}))}function __generator(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,a;return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol==="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(e){return function(t){return f([e,t])}}function f(o){if(n)throw new TypeError("Generator is already executing.");while(a&&(a=0,o[0]&&(r=0)),r)try{if(n=1,i&&(s=o[0]&2?i["return"]:o[0]?i["throw"]||((s=i["return"])&&s.call(i),0):i.next)&&!(s=s.call(i,o[1])).done)return s;if(i=0,s)o=[o[0]&2,s.value];switch(o[0]){case 0:case 1:s=o;break;case 4:r.label++;return{value:o[1],done:false};case 5:r.label++;i=o[1];o=[0];continue;case 7:o=r.ops.pop();r.trys.pop();continue;default:if(!(s=r.trys,s=s.length>0&&s[s.length-1])&&(o[0]===6||o[0]===2)){r=0;continue}if(o[0]===3&&(!s||o[1]>s[0]&&o[1]<s[3])){r.label=o[1];break}if(o[0]===6&&r.label<s[1]){r.label=s[1];s=o;break}if(s&&r.label<s[2]){r.label=s[2];r.ops.push(o);break}if(s[2])r.ops.pop();r.trys.pop();continue}o=t.call(e,r)}catch(e){o=[6,e];i=0}finally{n=s=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:true}}}var __createBinding$5=Object.create?function(e,t,r,n){if(n===undefined)n=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[r]}}}Object.defineProperty(e,n,i)}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]};function __exportStar(e,t){for(var r in e)if(r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r))__createBinding$5(t,e,r)}function __values(e){var t=typeof Symbol==="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length==="number")return{next:function(){if(e&&n>=e.length)e=void 0;return{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,s=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)s.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return s}function __spread(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read(arguments[t]));return e}function __spreadArrays(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var s=arguments[t],a=0,o=s.length;a<o;a++,i++)n[i]=s[a];return n}function __spreadArray(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,s;n<i;n++){if(s||!(n in t)){if(!s)s=Array.prototype.slice.call(t,0,n);s[n]=t[n]}}return e.concat(s||Array.prototype.slice.call(t))}function __await(e){return this instanceof __await?(this.v=e,this):new __await(e)}function __asyncGenerator(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),i,s=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(e){if(n[e])i[e]=function(t){return new Promise((function(r,n){s.push([e,t,r,n])>1||o(e,t)}))}}function o(e,t){try{f(n[e](t))}catch(e){l(s[0][3],e)}}function f(e){e.value instanceof __await?Promise.resolve(e.value.v).then(c,u):l(s[0][2],e)}function c(e){o("next",e)}function u(e){o("throw",e)}function l(e,t){if(e(t),s.shift(),s.length)o(s[0][0],s[0][1])}}function __asyncDelegator(e){var t,r;return t={},n("next"),n("throw",(function(e){throw e})),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,i){t[n]=e[n]?function(t){return(r=!r)?{value:__await(e[n](t)),done:false}:i?i(t):t}:i}}function __asyncValues(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof __values==="function"?__values(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(t){r[t]=e[t]&&function(r){return new Promise((function(n,s){r=e[t](r),i(n,s,r.done,r.value)}))}}function i(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)}}function __makeTemplateObject(e,t){if(Object.defineProperty){Object.defineProperty(e,"raw",{value:t})}else{e.raw=t}return e}var __setModuleDefault$5=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t};function __importStar$5(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)if(r!=="default"&&Object.prototype.hasOwnProperty.call(e,r))__createBinding$5(t,e,r);__setModuleDefault$5(t,e);return t}function __importDefault(e){return e&&e.__esModule?e:{default:e}}function __classPrivateFieldGet(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t==="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)}function __classPrivateFieldSet(e,t,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t==="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(e,r):i?i.value=r:t.set(e,r),r}function __classPrivateFieldIn(e,t){if(t===null||typeof t!=="object"&&typeof t!=="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e==="function"?t===e:e.has(t)}function __addDisposableResource(e,t,r){if(t!==null&&t!==void 0){if(typeof t!=="object"&&typeof t!=="function")throw new TypeError("Object expected.");var n;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose]}if(typeof n!=="function")throw new TypeError("Object not disposable.");e.stack.push({value:t,dispose:n,async:r})}else if(r){e.stack.push({async:true})}return t}var _SuppressedError=typeof SuppressedError==="function"?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};function __disposeResources(e){function t(t){e.error=e.hasError?new _SuppressedError(t,e.error,"An error was suppressed during disposal."):t;e.hasError=true}function r(){while(e.stack.length){var n=e.stack.pop();try{var i=n.dispose&&n.dispose.call(n.value);if(n.async)return Promise.resolve(i).then(r,(function(e){t(e);return r()}))}catch(e){t(e)}}if(e.hasError)throw e.error}return r()}const tslib_es6={__extends:__extends$1,__assign,__rest:__rest$1,__decorate,__param,__metadata,__awaiter:__awaiter$1,__generator,__createBinding:__createBinding$5,__exportStar,__values,__read,__spread,__spreadArrays,__spreadArray,__await,__asyncGenerator,__asyncDelegator,__asyncValues,__makeTemplateObject,__importStar:__importStar$5,__importDefault,__classPrivateFieldGet,__classPrivateFieldSet,__classPrivateFieldIn,__addDisposableResource,__disposeResources};const tslib_es6$1=Object.freeze({__proto__:null,__extends:__extends$1,get __assign(){return __assign},__rest:__rest$1,__decorate,__param,__esDecorate,__runInitializers,__propKey,__setFunctionName,__metadata,__awaiter:__awaiter$1,__generator,__createBinding:__createBinding$5,__exportStar,__values,__read,__spread,__spreadArrays,__spreadArray,__await,__asyncGenerator,__asyncDelegator,__asyncValues,__makeTemplateObject,__importStar:__importStar$5,__importDefault,__classPrivateFieldGet,__classPrivateFieldSet,__classPrivateFieldIn,__addDisposableResource,__disposeResources,default:tslib_es6});let engineCrypto=null;class Application{static setEngine(e,t){engineCrypto=Object.assign(t,{name:e});setEngine(e,new CryptoEngine({name:e,crypto:t}))}static get crypto(){if(!engineCrypto){throw new XmlError(XE.CRYPTOGRAPHIC_NO_MODULE)}return engineCrypto}static isNodePlugin(){return typeof self==="undefined"&&typeof window==="undefined"}}function init(){if(!Application.isNodePlugin()){Application.setEngine("W3 WebCrypto module",self.crypto)}}init();class XmlAlgorithm{getAlgorithmName(){return this.namespaceURI}}class HashAlgorithm extends XmlAlgorithm{async Digest(e){let t;if(typeof e==="string"){t=Convert$1.FromString(e,"utf8")}else if(ArrayBuffer.isView(e)){t=new Uint8Array(e.buffer)}else if(e instanceof ArrayBuffer){t=new Uint8Array(e)}else{const r=(new XMLSerializer).serializeToString(e);t=Convert$1.FromString(r,"utf8")}const r=await Application.crypto.subtle.digest(this.algorithm,t);return new Uint8Array(r)}}class SignatureAlgorithm extends XmlAlgorithm{async Sign(e,t,r){const n=Convert$1.FromString(e,"utf8");return Application.crypto.subtle.sign(r,t,n)}async Verify(e,t,r,n){const i=Convert$1.FromString(e,"utf8");return Application.crypto.subtle.verify(n||this.algorithm,t,r,i)}}const SHA1$1="SHA-1";const SHA256$2="SHA-256";const SHA384$1="SHA-384";const SHA512$2="SHA-512";const SHA1_NAMESPACE="http://www.w3.org/2000/09/xmldsig#sha1";const SHA256_NAMESPACE="http://www.w3.org/2001/04/xmlenc#sha256";const SHA384_NAMESPACE="http://www.w3.org/2001/04/xmldsig-more#sha384";const SHA512_NAMESPACE="http://www.w3.org/2001/04/xmlenc#sha512";class Sha1$1 extends HashAlgorithm{constructor(){super(...arguments);this.algorithm={name:SHA1$1};this.namespaceURI=SHA1_NAMESPACE}}class Sha256$1 extends HashAlgorithm{constructor(){super(...arguments);this.algorithm={name:SHA256$2};this.namespaceURI=SHA256_NAMESPACE}}class Sha384 extends HashAlgorithm{constructor(){super(...arguments);this.algorithm={name:SHA384$1};this.namespaceURI=SHA384_NAMESPACE}}class Sha512$1 extends HashAlgorithm{constructor(){super(...arguments);this.algorithm={name:SHA512$2};this.namespaceURI=SHA512_NAMESPACE}}const ECDSA$1="ECDSA";const ECDSA_SHA1_NAMESPACE="http://www.w3.org/2001/04/xmldsig-more#ecdsa-sha1";const ECDSA_SHA256_NAMESPACE="http://www.w3.org/2001/04/xmldsig-more#ecdsa-sha256";const ECDSA_SHA384_NAMESPACE="http://www.w3.org/2001/04/xmldsig-more#ecdsa-sha384";const ECDSA_SHA512_NAMESPACE="http://www.w3.org/2001/04/xmldsig-more#ecdsa-sha512";class EcdsaSha1 extends SignatureAlgorithm{constructor(){super(...arguments);this.algorithm={name:ECDSA$1,hash:{name:SHA1$1}};this.namespaceURI=ECDSA_SHA1_NAMESPACE}}class EcdsaSha256 extends SignatureAlgorithm{constructor(){super(...arguments);this.algorithm={name:ECDSA$1,hash:{name:SHA256$2}};this.namespaceURI=ECDSA_SHA256_NAMESPACE}}class EcdsaSha384 extends SignatureAlgorithm{constructor(){super(...arguments);this.algorithm={name:ECDSA$1,hash:{name:SHA384$1}};this.namespaceURI=ECDSA_SHA384_NAMESPACE}}class EcdsaSha512 extends SignatureAlgorithm{constructor(){super(...arguments);this.algorithm={name:ECDSA$1,hash:{name:SHA512$2}};this.namespaceURI=ECDSA_SHA512_NAMESPACE}}const HMAC="HMAC";const HMAC_SHA1_NAMESPACE="http://www.w3.org/2000/09/xmldsig#hmac-sha1";const HMAC_SHA256_NAMESPACE="http://www.w3.org/2001/04/xmldsig-more#hmac-sha256";const HMAC_SHA384_NAMESPACE="http://www.w3.org/2001/04/xmldsig-more#hmac-sha384";const HMAC_SHA512_NAMESPACE="http://www.w3.org/2001/04/xmldsig-more#hmac-sha512";class HmacSha1$1 extends SignatureAlgorithm{constructor(){super(...arguments);this.algorithm={name:HMAC,hash:{name:SHA1$1}};this.namespaceURI=HMAC_SHA1_NAMESPACE}}class HmacSha256$1 extends SignatureAlgorithm{constructor(){super(...arguments);this.algorithm={name:HMAC,hash:{name:SHA256$2}};this.namespaceURI=HMAC_SHA256_NAMESPACE}}class HmacSha384 extends SignatureAlgorithm{constructor(){super(...arguments);this.algorithm={name:HMAC,hash:{name:SHA384$1}};this.namespaceURI=HMAC_SHA384_NAMESPACE}}class HmacSha512$1 extends SignatureAlgorithm{constructor(){super(...arguments);this.algorithm={name:HMAC,hash:{name:SHA512$2}};this.namespaceURI=HMAC_SHA512_NAMESPACE}}const RSA_PKCS1="RSASSA-PKCS1-v1_5";const RSA_PKCS1_SHA1_NAMESPACE="http://www.w3.org/2000/09/xmldsig#rsa-sha1";const RSA_PKCS1_SHA256_NAMESPACE="http://www.w3.org/2001/04/xmldsig-more#rsa-sha256";const RSA_PKCS1_SHA384_NAMESPACE="http://www.w3.org/2001/04/xmldsig-more#rsa-sha384";const RSA_PKCS1_SHA512_NAMESPACE="http://www.w3.org/2001/04/xmldsig-more#rsa-sha512";class RsaPkcs1Sha1 extends SignatureAlgorithm{constructor(){super(...arguments);this.algorithm={name:RSA_PKCS1,hash:{name:SHA1$1}};this.namespaceURI=RSA_PKCS1_SHA1_NAMESPACE}}class RsaPkcs1Sha256 extends SignatureAlgorithm{constructor(){super(...arguments);this.algorithm={name:RSA_PKCS1,hash:{name:SHA256$2}};this.namespaceURI=RSA_PKCS1_SHA256_NAMESPACE}}class RsaPkcs1Sha384 extends SignatureAlgorithm{constructor(){super(...arguments);this.algorithm={name:RSA_PKCS1,hash:{name:SHA384$1}};this.namespaceURI=RSA_PKCS1_SHA384_NAMESPACE}}class RsaPkcs1Sha512 extends SignatureAlgorithm{constructor(){super(...arguments);this.algorithm={name:RSA_PKCS1,hash:{name:SHA512$2}};this.namespaceURI=RSA_PKCS1_SHA512_NAMESPACE}}const RSA_PSS$1="RSA-PSS";const RSA_PSS_WITH_PARAMS_NAMESPACE="http://www.w3.org/2007/05/xmldsig-more#rsa-pss";class RsaPssBase extends SignatureAlgorithm{constructor(e){super();this.algorithm={name:RSA_PSS$1,hash:{name:SHA1$1}};this.namespaceURI=RSA_PSS_WITH_PARAMS_NAMESPACE;if(e){this.algorithm.saltLength=e}}}class RsaPssSha1 extends RsaPssBase{constructor(e){super(e);this.algorithm.hash.name=SHA1$1}}class RsaPssSha256 extends RsaPssBase{constructor(e){super(e);this.algorithm.hash.name=SHA256$2}}class RsaPssSha384 extends RsaPssBase{constructor(e){super(e);this.algorithm.hash.name=SHA384$1}}class RsaPssSha512 extends RsaPssBase{constructor(e){super(e);this.algorithm.hash.name=SHA512$2}}const RSA_PSS_SHA1_NAMESPACE="http://www.w3.org/2007/05/xmldsig-more#sha1-rsa-MGF1";const RSA_PSS_SHA256_NAMESPACE="http://www.w3.org/2007/05/xmldsig-more#sha256-rsa-MGF1";const RSA_PSS_SHA384_NAMESPACE="http://www.w3.org/2007/05/xmldsig-more#sha384-rsa-MGF1";const RSA_PSS_SHA512_NAMESPACE="http://www.w3.org/2007/05/xmldsig-more#sha512-rsa-MGF1";class RsaPssWithoutParamsBase extends SignatureAlgorithm{constructor(){super();this.algorithm={name:RSA_PSS$1,hash:{name:SHA1$1}};this.namespaceURI=RSA_PSS_SHA1_NAMESPACE}}class RsaPssWithoutParamsSha1 extends RsaPssWithoutParamsBase{constructor(){super();this.algorithm.hash.name=SHA1$1;this.algorithm.saltLength=20}}class RsaPssWithoutParamsSha256 extends RsaPssWithoutParamsBase{constructor(){super();this.algorithm.hash.name=SHA256$2;this.algorithm.saltLength=32}}class RsaPssWithoutParamsSha384 extends RsaPssWithoutParamsBase{constructor(){super();this.algorithm.hash.name=SHA384$1;this.algorithm.saltLength=48}}class RsaPssWithoutParamsSha512 extends RsaPssWithoutParamsBase{constructor(){super();this.algorithm.hash.name=SHA512$2;this.algorithm.saltLength=64}}var XmlCanonicalizerState;(function(e){e[e["BeforeDocElement"]=0]="BeforeDocElement";e[e["InsideDocElement"]=1]="InsideDocElement";e[e["AfterDocElement"]=2]="AfterDocElement"})(XmlCanonicalizerState||(XmlCanonicalizerState={}));class XmlCanonicalizer{constructor(e,t,r=new NamespaceManager){this.propagatedNamespaces=new NamespaceManager;this.result=[];this.visibleNamespaces=new NamespaceManager;this.inclusiveNamespacesPrefixList=[];this.state=XmlCanonicalizerState.BeforeDocElement;this.withComments=e;this.exclusive=t;this.propagatedNamespaces=r}get InclusiveNamespacesPrefixList(){return this.inclusiveNamespacesPrefixList.join(" ")}set InclusiveNamespacesPrefixList(e){this.inclusiveNamespacesPrefixList=e.split(" ")}Canonicalize(e){if(!e){throw new XmlError(XE.CRYPTOGRAPHIC,"Parameter 1 is not Node")}this.WriteNode(e);const t=this.result.join("");return t}WriteNode(e){switch(e.nodeType){case XmlNodeType.Document:case XmlNodeType.DocumentFragment:this.WriteDocumentNode(e);break;case XmlNodeType.Element:this.WriteElementNode(e);break;case XmlNodeType.CDATA:case XmlNodeType.SignificantWhitespace:case XmlNodeType.Text:if(!isDocument(e.parentNode)){this.WriteTextNode(e)}break;case XmlNodeType.Whitespace:if(this.state===XmlCanonicalizerState.InsideDocElement){this.WriteTextNode(e)}break;case XmlNodeType.Comment:this.WriteCommentNode(e);break;case XmlNodeType.ProcessingInstruction:this.WriteProcessingInstructionNode(e);break;case XmlNodeType.EntityReference:for(let t=0;t<e.childNodes.length;t++){this.WriteNode(e.childNodes[t])}break;case XmlNodeType.Attribute:throw new XmlError(XE.CRYPTOGRAPHIC,"Attribute node is impossible here");case XmlNodeType.EndElement:throw new XmlError(XE.CRYPTOGRAPHIC,"Attribute node is impossible here");case XmlNodeType.EndEntity:throw new XmlError(XE.CRYPTOGRAPHIC,"Attribute node is impossible here")}}WriteDocumentNode(e){this.state=XmlCanonicalizerState.BeforeDocElement;for(let t=e.firstChild;t!=null;t=t.nextSibling){this.WriteNode(t)}}WriteCommentNode(e){if(this.withComments){if(this.state===XmlCanonicalizerState.AfterDocElement){this.result.push(String.fromCharCode(10)+"\x3c!--")}else{this.result.push("\x3c!--")}this.result.push(this.NormalizeString(e.nodeValue,XmlNodeType.Comment));if(this.state===XmlCanonicalizerState.BeforeDocElement){this.result.push("--\x3e"+String.fromCharCode(10))}else{this.result.push("--\x3e")}}}WriteTextNode(e){this.result.push(this.NormalizeString(e.nodeValue,e.nodeType))}WriteProcessingInstructionNode(e){const t=e.nodeName||e.tagName;if(t==="xml"){return}if(this.state===XmlCanonicalizerState.AfterDocElement){this.result.push("\n<?")}else{this.result.push("<?")}this.result.push(t);if(e.nodeValue){this.result.push(" ");this.result.push(this.NormalizeString(e.nodeValue,XmlNodeType.ProcessingInstruction))}if(this.state===XmlCanonicalizerState.BeforeDocElement){this.result.push("?>\n")}else{this.result.push("?>")}}WriteElementNode(e){const t=this.state;if(this.state===XmlCanonicalizerState.BeforeDocElement){this.state=XmlCanonicalizerState.InsideDocElement}this.result.push("<");this.result.push(e.nodeName);let r=this.WriteNamespacesAxis(e);this.WriteAttributesAxis(e);this.result.push(">");for(let t=e.firstChild;t!=null;t=t.nextSibling){this.WriteNode(t)}this.result.push("</");this.result.push(e.nodeName);this.result.push(">");if(t===XmlCanonicalizerState.BeforeDocElement){this.state=XmlCanonicalizerState.AfterDocElement}while(r--){this.visibleNamespaces.Pop()}}WriteNamespacesAxis(e){const t=[];let r=0;for(let n=0;n<e.attributes.length;n++){const i=e.attributes[n];if(!IsNamespaceNode(i)){if(i.prefix&&!this.IsNamespaceRendered(i.prefix,i.namespaceURI)){const e={prefix:i.prefix,namespace:i.namespaceURI};t.push(e);this.visibleNamespaces.Add(e);r++}continue}if(i.localName==="xmlns"&&!i.prefix&&!i.nodeValue){const e={prefix:i.prefix,namespace:i.nodeValue};t.push(e);this.visibleNamespaces.Add(e);r++}let s=null;let a;if(a=/xmlns:([\w\.-]+)/.exec(i.nodeName)){s=a[1]}let o=true;if(this.exclusive&&!this.IsNamespaceInclusive(e,s)){const t=IsNamespaceUsed(e,s);if(t>1){o=false}else if(t===0){continue}}if(this.IsNamespaceRendered(s,i.nodeValue)){continue}if(o){const e={prefix:s,namespace:i.nodeValue};t.push(e);this.visibleNamespaces.Add(e);r++}}if(!this.IsNamespaceRendered(e.prefix,e.namespaceURI)&&e.namespaceURI!=="http://www.w3.org/2000/xmlns/"){const n={prefix:e.prefix,namespace:e.namespaceURI};t.push(n);this.visibleNamespaces.Add(n);r++}t.sort(XmlDsigC14NTransformNamespacesComparer);let n=null;t.forEach((e=>{if(e.prefix===n){return}n=e.prefix;this.result.push(" xmlns");if(e.prefix){this.result.push(":"+e.prefix)}this.result.push('="');this.result.push(e.namespace);this.result.push('"')}));return r}WriteAttributesAxis(e){const t=[];for(let r=0;r<e.attributes.length;r++){const n=e.attributes[r];if(!IsNamespaceNode(n)){t.push(n)}}t.sort(XmlDsigC14NTransformAttributesComparer);t.forEach((e=>{if(e!=null){this.result.push(" ");this.result.push(e.nodeName);this.result.push('="');this.result.push(this.NormalizeString(e.nodeValue,XmlNodeType.Attribute));this.result.push('"')}}))}NormalizeString(e,t){const r=[];if(e){for(let n=0;n<e.length;n++){const i=e[n];if(i==="<"&&(t===XmlNodeType.Attribute||this.IsTextNode(t))){r.push("&lt;")}else if(i===">"&&this.IsTextNode(t)){r.push("&gt;")}else if(i==="&"&&(t===XmlNodeType.Attribute||this.IsTextNode(t))){r.push("&amp;")}else if(i==='"'&&t===XmlNodeType.Attribute){r.push("&quot;")}else if(i==="\t"&&t===XmlNodeType.Attribute){r.push("&#x9;")}else if(i==="\n"&&t===XmlNodeType.Attribute){r.push("&#xA;")}else if(i==="\r"){r.push("&#xD;")}else{r.push(i)}}}return r.join("")}IsTextNode(e){switch(e){case XmlNodeType.Text:case XmlNodeType.CDATA:case XmlNodeType.SignificantWhitespace:case XmlNodeType.Whitespace:return true}return false}IsNamespaceInclusive(e,t){const r=t||null;if(e.prefix===r){return false}return this.inclusiveNamespacesPrefixList.indexOf(r||"")!==-1}IsNamespaceRendered(e,t){e=e||"";t=t||"";if(!e&&!t){return true}if(e==="xml"&&t==="http://www.w3.org/XML/1998/namespace"){return true}const r=this.visibleNamespaces.GetPrefix(e);if(r){return r.namespace===t}return false}}function XmlDsigC14NTransformNamespacesComparer(e,t){if(e==t){return 0}else if(!e){return-1}else if(!t){return 1}else if(!e.prefix){return-1}else if(!t.prefix){return 1}else if(e.prefix<t.prefix){return-1}else if(e.prefix>t.prefix){return 1}else{return 0}}function XmlDsigC14NTransformAttributesComparer(e,t){if(!e.namespaceURI&&t.namespaceURI){return-1}if(!t.namespaceURI&&e.namespaceURI){return 1}const r=e.namespaceURI+e.localName;const n=t.namespaceURI+t.localName;if(r===n){return 0}else if(r<n){return-1}else{return 1}}function IsNamespaceUsed(e,t,r=0){const n=t||null;if(e.prefix===n){return++r}if(e.attributes){for(let n=0;n<e.attributes.length;n++){const i=e.attributes[n];if(!IsNamespaceNode(i)&&t&&e.attributes[n].prefix===t){return++r}}}for(let n=e.firstChild;!!n;n=n.nextSibling){if(n.nodeType===XmlNodeType.Element){const e=n;const i=IsNamespaceUsed(e,t,r);if(n.nodeType===XmlNodeType.Element&&i){return++r+i}}}return r}function IsNamespaceNode(e){const t=/xmlns:/;if(e!==null&&e.nodeType===XmlNodeType.Attribute&&(e.nodeName==="xmlns"||t.test(e.nodeName))){return true}return false}const XmlSignature={DefaultCanonMethod:"http://www.w3.org/TR/2001/REC-xml-c14n-20010315",DefaultDigestMethod:"http://www.w3.org/2001/04/xmlenc#sha256",DefaultPrefix:"ds",ElementNames:{CanonicalizationMethod:"CanonicalizationMethod",DigestMethod:"DigestMethod",DigestValue:"DigestValue",DSAKeyValue:"DSAKeyValue",DomainParameters:"DomainParameters",EncryptedKey:"EncryptedKey",HMACOutputLength:"HMACOutputLength",RSAPSSParams:"RSAPSSParams",MaskGenerationFunction:"MaskGenerationFunction",SaltLength:"SaltLength",KeyInfo:"KeyInfo",KeyName:"KeyName",KeyValue:"KeyValue",Modulus:"Modulus",Exponent:"Exponent",Manifest:"Manifest",Object:"Object",Reference:"Reference",RetrievalMethod:"RetrievalMethod",RSAKeyValue:"RSAKeyValue",ECDSAKeyValue:"ECDSAKeyValue",NamedCurve:"NamedCurve",PublicKey:"PublicKey",Signature:"Signature",SignatureMethod:"SignatureMethod",SignatureValue:"SignatureValue",SignedInfo:"SignedInfo",Transform:"Transform",Transforms:"Transforms",X509Data:"X509Data",PGPData:"PGPData",SPKIData:"SPKIData",SPKIexp:"SPKIexp",MgmtData:"MgmtData",X509IssuerSerial:"X509IssuerSerial",X509IssuerName:"X509IssuerName",X509SerialNumber:"X509SerialNumber",X509SKI:"X509SKI",X509SubjectName:"X509SubjectName",X509Certificate:"X509Certificate",X509CRL:"X509CRL",XPath:"XPath",X:"X",Y:"Y"},AttributeNames:{Algorithm:"Algorithm",Encoding:"Encoding",Id:"Id",MimeType:"MimeType",Type:"Type",URI:"URI"},AlgorithmNamespaces:{XmlDsigBase64Transform:"http://www.w3.org/2000/09/xmldsig#base64",XmlDsigC14NTransform:"http://www.w3.org/TR/2001/REC-xml-c14n-20010315",XmlDsigC14NWithCommentsTransform:"http://www.w3.org/TR/2001/REC-xml-c14n-20010315#WithComments",XmlDsigEnvelopedSignatureTransform:"http://www.w3.org/2000/09/xmldsig#enveloped-signature",XmlDsigXPathTransform:"http://www.w3.org/TR/1999/REC-xpath-19991116",XmlDsigXsltTransform:"http://www.w3.org/TR/1999/REC-xslt-19991116",XmlDsigExcC14NTransform:"http://www.w3.org/2001/10/xml-exc-c14n#",XmlDsigExcC14NWithCommentsTransform:"http://www.w3.org/2001/10/xml-exc-c14n#WithComments",XmlDecryptionTransform:"http://www.w3.org/2002/07/decrypt#XML",XmlLicenseTransform:"urn:mpeg:mpeg21:2003:01-REL-R-NS:licenseTransform"},Uri:{Manifest:"http://www.w3.org/2000/09/xmldsig#Manifest"},NamespaceURI:"http://www.w3.org/2000/09/xmldsig#",NamespaceURIMore:"http://www.w3.org/2007/05/xmldsig-more#",NamespaceURIPss:"http://www.example.org/xmldsig-pss/#"};let XmlSignatureObject=class e extends XmlObject{};XmlSignatureObject=__decorate([XmlElement({localName:"xmldsig",namespaceURI:XmlSignature.NamespaceURI,prefix:XmlSignature.DefaultPrefix})],XmlSignatureObject);let XmlSignatureCollection=class e extends XmlCollection{};XmlSignatureCollection=__decorate([XmlElement({localName:"xmldsig_collection",namespaceURI:XmlSignature.NamespaceURI,prefix:XmlSignature.DefaultPrefix})],XmlSignatureCollection);class KeyInfoClause extends XmlSignatureObject{}let CanonicalizationMethod=class e extends XmlSignatureObject{};__decorate([XmlAttribute({localName:XmlSignature.AttributeNames.Algorithm,required:true,defaultValue:XmlSignature.DefaultCanonMethod})],CanonicalizationMethod.prototype,"Algorithm",void 0);CanonicalizationMethod=__decorate([XmlElement({localName:XmlSignature.ElementNames.CanonicalizationMethod})],CanonicalizationMethod);let DataObject=class e extends XmlSignatureObject{};__decorate([XmlAttribute({localName:XmlSignature.AttributeNames.Id,defaultValue:""})],DataObject.prototype,"Id",void 0);__decorate([XmlAttribute({localName:XmlSignature.AttributeNames.MimeType,defaultValue:""})],DataObject.prototype,"MimeType",void 0);__decorate([XmlAttribute({localName:XmlSignature.AttributeNames.Encoding,defaultValue:""})],DataObject.prototype,"Encoding",void 0);DataObject=__decorate([XmlElement({localName:XmlSignature.ElementNames.Object})],DataObject);let DataObjects=class e extends XmlSignatureCollection{};DataObjects=__decorate([XmlElement({localName:"xmldsig_objects",parser:DataObject})],DataObjects);let DigestMethod=class e extends XmlSignatureObject{constructor(e){super();if(e){this.Algorithm=e}}};__decorate([XmlAttribute({localName:XmlSignature.AttributeNames.Algorithm,required:true,defaultValue:XmlSignature.DefaultDigestMethod})],DigestMethod.prototype,"Algorithm",void 0);DigestMethod=__decorate([XmlElement({localName:XmlSignature.ElementNames.DigestMethod})],DigestMethod);let KeyInfo=class e extends XmlSignatureCollection{OnLoadXml(e){for(let t=0;t<e.childNodes.length;t++){const r=e.childNodes.item(t);if(r.nodeType!==XmlNodeType.Element){continue}let n=null;switch(r.localName){case XmlSignature.ElementNames.KeyValue:n=KeyValue;break;case XmlSignature.ElementNames.X509Data:n=KeyInfoX509Data;break;case XmlSignature.ElementNames.SPKIData:n=SPKIData;break}if(n){const e=new n;e.LoadXml(r);this.Add(e)}}}};__decorate([XmlAttribute({localName:XmlSignature.AttributeNames.Id,defaultValue:""})],KeyInfo.prototype,"Id",void 0);KeyInfo=__decorate([XmlElement({localName:XmlSignature.ElementNames.KeyInfo})],KeyInfo);let Transform=class e extends XmlSignatureObject{constructor(){super(...arguments);this.innerXml=null}GetOutput(){throw new XmlError(XE.METHOD_NOT_IMPLEMENTED)}LoadInnerXml(e){if(!e){throw new XmlError(XE.PARAM_REQUIRED,"node")}this.innerXml=e}GetInnerXml(){return this.innerXml}};__decorate([XmlAttribute({localName:XmlSignature.AttributeNames.Algorithm,defaultValue:""})],Transform.prototype,"Algorithm",void 0);__decorate([XmlChildElement({localName:XmlSignature.ElementNames.XPath,defaultValue:""})],Transform.prototype,"XPath",void 0);Transform=__decorate([XmlElement({localName:XmlSignature.ElementNames.Transform})],Transform);class XmlDsigBase64Transform extends Transform{constructor(){super(...arguments);this.Algorithm=XmlSignature.AlgorithmNamespaces.XmlDsigBase64Transform}GetOutput(){if(!this.innerXml){throw new XmlError(XE.PARAM_REQUIRED,"innerXml")}return Convert$1.FromString(this.innerXml.textContent||"","base64")}}class XmlDsigC14NTransform extends Transform{constructor(){super(...arguments);this.Algorithm="http://www.w3.org/TR/2001/REC-xml-c14n-20010315";this.xmlCanonicalizer=new XmlCanonicalizer(false,false)}GetOutput(){if(!this.innerXml){throw new XmlError(XE.PARAM_REQUIRED,"innerXml")}return this.xmlCanonicalizer.Canonicalize(this.innerXml)}}class XmlDsigC14NWithCommentsTransform extends XmlDsigC14NTransform{constructor(){super(...arguments);this.Algorithm="http://www.w3.org/TR/2001/REC-xml-c14n-20010315#WithComments";this.xmlCanonicalizer=new XmlCanonicalizer(true,false)}}class XmlDsigEnvelopedSignatureTransform extends Transform{constructor(){super(...arguments);this.Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature"}GetOutput(){var e;if(!this.innerXml){throw new XmlError(XE.PARAM_REQUIRED,"innerXml")}let t=this.innerXml.firstChild;const r=[];while(t){if(isElement(t)&&t.localName===XmlSignature.ElementNames.Signature&&t.namespaceURI===XmlSignature.NamespaceURI){r.push(t)}t=t.nextSibling}for(const t of r){(e=t.parentNode)===null||e===void 0?void 0:e.removeChild(t)}return this.innerXml}}class XmlDsigExcC14NTransform extends Transform{constructor(){super(...arguments);this.Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#";this.xmlCanonicalizer=new XmlCanonicalizer(false,true)}get InclusiveNamespacesPrefixList(){return this.xmlCanonicalizer.InclusiveNamespacesPrefixList}set InclusiveNamespacesPrefixList(e){this.xmlCanonicalizer.InclusiveNamespacesPrefixList=e}LoadXml(e){super.LoadXml(e);if(this.Element&&this.Element.childNodes){for(let e=0;e<this.Element.childNodes.length;e++){const t=this.Element.childNodes[e];if(t&&t.nodeType===1){switch(t.localName){case"InclusiveNamespaces":this.setInclusiveNamespacesElement(t);break}}}}}GetOutput(){if(!this.innerXml){throw new XmlError(XE.PARAM_REQUIRED,"innerXml")}return this.xmlCanonicalizer.Canonicalize(this.innerXml)}setInclusiveNamespacesElement(e){const t=e.getAttribute("PrefixList");if(t&&t.length>0){this.xmlCanonicalizer.InclusiveNamespacesPrefixList=t}}}class XmlDsigExcC14NWithCommentsTransform extends XmlDsigExcC14NTransform{constructor(){super(...arguments);this.Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#WithComments";this.xmlCanonicalizer=new XmlCanonicalizer(true,true)}}function lookupParentNode(e){return e.parentNode?lookupParentNode(e.parentNode):e}class XmlDsigXPathTransform extends Transform{constructor(){super(...arguments);this.Algorithm=XmlSignature.AlgorithmNamespaces.XmlDsigXPathTransform}GetOutput(){if(!this.innerXml){throw new XmlError(XE.PARAM_REQUIRED,"innerXml")}this.Filter(lookupParentNode(this.innerXml),this.XPath)}Filter(e,t){const r=e.childNodes;const n=[];for(let e=0;r&&e<r.length;e++){const t=r.item(e);n.push(t)}n.forEach((e=>{if(this.Evaluate(e,t)){if(e.parentNode){e.parentNode.removeChild(e)}}else{this.Filter(e,t)}}))}GetEvaluator(e){if(typeof self!=="undefined"){return e.ownerDocument==null?e:e.ownerDocument}else{return require("xpath")}}Evaluate(e,t){try{const r=this.GetEvaluator(e);const n=this.GetXml().firstChild;const i=`boolean(${t})`;const s=r.evaluate(i,e,{lookupNamespaceURI:e=>n.lookupNamespaceURI(e)},(typeof self==="undefined"?require("xpath"):self).XPathResult.ANY_TYPE,null);return!s.booleanValue}catch(e){return false}}}__decorate([XmlChildElement({localName:XmlSignature.ElementNames.XPath,namespaceURI:XmlSignature.NamespaceURI,prefix:XmlSignature.DefaultPrefix,required:true})],XmlDsigXPathTransform.prototype,"XPath",void 0);let Transforms=class e extends XmlSignatureCollection{OnLoadXml(e){super.OnLoadXml(e);this.items=this.GetIterator().map((e=>{switch(e.Algorithm){case XmlSignature.AlgorithmNamespaces.XmlDsigEnvelopedSignatureTransform:return ChangeTransform(e,XmlDsigEnvelopedSignatureTransform);case XmlSignature.AlgorithmNamespaces.XmlDsigC14NTransform:return ChangeTransform(e,XmlDsigC14NTransform);case XmlSignature.AlgorithmNamespaces.XmlDsigC14NWithCommentsTransform:return ChangeTransform(e,XmlDsigC14NWithCommentsTransform);case XmlSignature.AlgorithmNamespaces.XmlDsigExcC14NTransform:return ChangeTransform(e,XmlDsigExcC14NTransform);case XmlSignature.AlgorithmNamespaces.XmlDsigExcC14NWithCommentsTransform:return ChangeTransform(e,XmlDsigExcC14NWithCommentsTransform);case XmlSignature.AlgorithmNamespaces.XmlDsigBase64Transform:return ChangeTransform(e,XmlDsigBase64Transform);case XmlSignature.AlgorithmNamespaces.XmlDsigXPathTransform:return ChangeTransform(e,XmlDsigXPathTransform);default:throw new XmlError(XE.CRYPTOGRAPHIC_UNKNOWN_TRANSFORM,e.Algorithm)}}))}};Transforms=__decorate([XmlElement({localName:XmlSignature.ElementNames.Transforms,parser:Transform})],Transforms);function ChangeTransform(e,t){const r=new t;r.LoadXml(e.Element);return r}let Reference=class e extends XmlSignatureObject{constructor(e){super();this.DigestMethod=new DigestMethod;if(e){this.Uri=e}}};__decorate([XmlAttribute({defaultValue:""})],Reference.prototype,"Id",void 0);__decorate([XmlAttribute({localName:XmlSignature.AttributeNames.URI})],Reference.prototype,"Uri",void 0);__decorate([XmlAttribute({localName:XmlSignature.AttributeNames.Type,defaultValue:""})],Reference.prototype,"Type",void 0);__decorate([XmlChildElement({parser:Transforms})],Reference.prototype,"Transforms",void 0);__decorate([XmlChildElement({required:true,parser:DigestMethod})],Reference.prototype,"DigestMethod",void 0);__decorate([XmlChildElement({required:true,localName:XmlSignature.ElementNames.DigestValue,namespaceURI:XmlSignature.NamespaceURI,prefix:XmlSignature.DefaultPrefix,converter:XmlBase64Converter})],Reference.prototype,"DigestValue",void 0);Reference=__decorate([XmlElement({localName:XmlSignature.ElementNames.Reference})],Reference);let References=class e extends XmlSignatureCollection{};References=__decorate([XmlElement({localName:"References",parser:Reference})],References);let SignatureMethodOther=class e extends XmlSignatureCollection{OnLoadXml(e){for(let t=0;t<e.childNodes.length;t++){const r=e.childNodes.item(t);if(r.nodeType!==XmlNodeType.Element||r.nodeName===XmlSignature.ElementNames.HMACOutputLength){continue}let n;switch(r.localName){case XmlSignature.ElementNames.RSAPSSParams:n=PssAlgorithmParams;break}if(n){const e=new n;e.LoadXml(r);this.Add(e)}}}};SignatureMethodOther=__decorate([XmlElement({localName:"Other"})],SignatureMethodOther);let SignatureMethod=class e extends XmlSignatureObject{};__decorate([XmlAttribute({localName:XmlSignature.AttributeNames.Algorithm,required:true,defaultValue:""})],SignatureMethod.prototype,"Algorithm",void 0);__decorate([XmlChildElement({localName:XmlSignature.ElementNames.HMACOutputLength,namespaceURI:XmlSignature.NamespaceURI,prefix:XmlSignature.DefaultPrefix,converter:XmlNumberConverter})],SignatureMethod.prototype,"HMACOutputLength",void 0);__decorate([XmlChildElement({parser:SignatureMethodOther,noRoot:true,minOccurs:0})],SignatureMethod.prototype,"Any",void 0);SignatureMethod=__decorate([XmlElement({localName:XmlSignature.ElementNames.SignatureMethod})],SignatureMethod);let SignedInfo=class e extends XmlSignatureObject{};__decorate([XmlAttribute({localName:XmlSignature.AttributeNames.Id,defaultValue:""})],SignedInfo.prototype,"Id",void 0);__decorate([XmlChildElement({parser:CanonicalizationMethod,required:true})],SignedInfo.prototype,"CanonicalizationMethod",void 0);__decorate([XmlChildElement({parser:SignatureMethod,required:true})],SignedInfo.prototype,"SignatureMethod",void 0);__decorate([XmlChildElement({parser:References,minOccurs:1,noRoot:true})],SignedInfo.prototype,"References",void 0);SignedInfo=__decorate([XmlElement({localName:XmlSignature.ElementNames.SignedInfo})],SignedInfo);let Signature$4=class e extends XmlSignatureObject{};__decorate([XmlAttribute({localName:XmlSignature.AttributeNames.Id,defaultValue:""})],Signature$4.prototype,"Id",void 0);__decorate([XmlChildElement({parser:SignedInfo,required:true})],Signature$4.prototype,"SignedInfo",void 0);__decorate([XmlChildElement({localName:XmlSignature.ElementNames.SignatureValue,namespaceURI:XmlSignature.NamespaceURI,prefix:XmlSignature.DefaultPrefix,required:true,converter:XmlBase64Converter,defaultValue:null})],Signature$4.prototype,"SignatureValue",void 0);__decorate([XmlChildElement({parser:KeyInfo})],Signature$4.prototype,"KeyInfo",void 0);__decorate([XmlChildElement({parser:DataObjects,noRoot:true})],Signature$4.prototype,"ObjectList",void 0);Signature$4=__decorate([XmlElement({localName:XmlSignature.ElementNames.Signature})],Signature$4);const NAMESPACE_URI$1="http://www.w3.org/2001/04/xmldsig-more#";const PREFIX$1="ecdsa";let EcdsaPublicKey=class e extends XmlObject{};__decorate([XmlChildElement({localName:XmlSignature.ElementNames.X,namespaceURI:NAMESPACE_URI$1,prefix:PREFIX$1,required:true,converter:XmlBase64Converter})],EcdsaPublicKey.prototype,"X",void 0);__decorate([XmlChildElement({localName:XmlSignature.ElementNames.Y,namespaceURI:NAMESPACE_URI$1,prefix:PREFIX$1,required:true,converter:XmlBase64Converter})],EcdsaPublicKey.prototype,"Y",void 0);EcdsaPublicKey=__decorate([XmlElement({localName:XmlSignature.ElementNames.PublicKey,namespaceURI:NAMESPACE_URI$1,prefix:PREFIX$1})],EcdsaPublicKey);let NamedCurve=class e extends XmlObject{};__decorate([XmlAttribute({localName:XmlSignature.AttributeNames.URI,required:true})],NamedCurve.prototype,"Uri",void 0);NamedCurve=__decorate([XmlElement({localName:XmlSignature.ElementNames.NamedCurve,namespaceURI:NAMESPACE_URI$1,prefix:PREFIX$1})],NamedCurve);let DomainParameters=class e extends XmlObject{};__decorate([XmlChildElement({parser:NamedCurve})],DomainParameters.prototype,"NamedCurve",void 0);DomainParameters=__decorate([XmlElement({localName:XmlSignature.ElementNames.DomainParameters,namespaceURI:NAMESPACE_URI$1,prefix:PREFIX$1})],DomainParameters);let EcdsaKeyValue=class e extends KeyInfoClause{constructor(){super(...arguments);this.name=XmlSignature.ElementNames.ECDSAKeyValue;this.key=null;this.jwk=null;this.keyUsage=null}get NamedCurve(){return GetNamedCurveOid(this.DomainParameters.NamedCurve.Uri)}async importKey(e){if(e.algorithm.name.toUpperCase()!=="ECDSA"){throw new XmlError(XE.ALGORITHM_WRONG_NAME,e.algorithm.name)}const t=await Application.crypto.subtle.exportKey("jwk",e);this.key=e;this.jwk=t;this.PublicKey=new EcdsaPublicKey;this.PublicKey.X=Convert$1.FromString(t.x,"base64url");this.PublicKey.Y=Convert$1.FromString(t.y,"base64url");if(!this.DomainParameters){this.DomainParameters=new DomainParameters}if(!this.DomainParameters.NamedCurve){this.DomainParameters.NamedCurve=new NamedCurve}this.DomainParameters.NamedCurve.Uri=GetNamedCurveOid(t.crv);this.keyUsage=e.usages;return this}async exportKey(e){if(this.key){return this.key}const t=Convert$1.ToBase64Url(this.PublicKey.X);const r=Convert$1.ToBase64Url(this.PublicKey.Y);const n=GetNamedCurveFromOid(this.DomainParameters.NamedCurve.Uri);const i={kty:"EC",crv:n,x:t,y:r,ext:true};this.keyUsage=["verify"];const s=await Application.crypto.subtle.importKey("jwk",i,{name:"ECDSA",namedCurve:n},true,this.keyUsage);this.key=s;return this.key}};__decorate([XmlChildElement({parser:DomainParameters})],EcdsaKeyValue.prototype,"DomainParameters",void 0);__decorate([XmlChildElement({parser:EcdsaPublicKey,required:true})],EcdsaKeyValue.prototype,"PublicKey",void 0);EcdsaKeyValue=__decorate([XmlElement({localName:XmlSignature.ElementNames.ECDSAKeyValue,namespaceURI:NAMESPACE_URI$1,prefix:PREFIX$1})],EcdsaKeyValue);function GetNamedCurveOid(e){switch(e){case"K-256":return"urn:oid:1.3.132.0.10";case"P-256":return"urn:oid:1.2.840.10045.3.1.7";case"P-384":return"urn:oid:1.3.132.0.34";case"P-521":return"urn:oid:1.3.132.0.35"}throw new XmlError(XE.CRYPTOGRAPHIC,"Unknown NamedCurve")}function GetNamedCurveFromOid(e){switch(e){case"urn:oid:1.3.132.0.10":return"K-256";case"urn:oid:1.2.840.10045.3.1.7":return"P-256";case"urn:oid:1.3.132.0.34":return"P-384";case"urn:oid:1.3.132.0.35":return"P-521"}throw new XmlError(XE.CRYPTOGRAPHIC,"Unknown NamedCurve OID")}var PssAlgorithmParams_1;const DEFAULT_ALGORITHM={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};let RsaKeyValue=class e extends KeyInfoClause{constructor(){super(...arguments);this.key=null;this.jwk=null;this.keyUsage=[]}async importKey(e){const t=e.algorithm.name.toUpperCase();if(t!==RSA_PKCS1.toUpperCase()&&t!==RSA_PSS$1.toUpperCase()){throw new XmlError(XE.ALGORITHM_WRONG_NAME,e.algorithm.name)}this.key=e;const r=await Application.crypto.subtle.exportKey("jwk",e);this.jwk=r;this.Modulus=Convert$1.FromBase64Url(r.n);this.Exponent=Convert$1.FromBase64Url(r.e);this.keyUsage=e.usages;return this}async exportKey(e=DEFAULT_ALGORITHM){if(this.key){return this.key}if(!this.Modulus){throw new XmlError(XE.CRYPTOGRAPHIC,"RsaKeyValue has no Modulus")}const t=Convert$1.ToBase64Url(this.Modulus);if(!this.Exponent){throw new XmlError(XE.CRYPTOGRAPHIC,"RsaKeyValue has no Exponent")}const r=Convert$1.ToBase64Url(this.Exponent);let n;switch(e.name.toUpperCase()){case RSA_PKCS1.toUpperCase():n="R";break;case RSA_PSS$1.toUpperCase():n="P";break;default:throw new XmlError(XE.ALGORITHM_NOT_SUPPORTED,e.name)}switch(e.hash.name.toUpperCase()){case SHA1$1:n+="S1";break;case SHA256$2:n+="S256";break;case SHA384$1:n+="S384";break;case SHA512$2:n+="S512";break}const i={kty:"RSA",alg:n,n:t,e:r,ext:true};return Application.crypto.subtle.importKey("jwk",i,e,true,this.keyUsage)}LoadXml(e){super.LoadXml(e);this.keyUsage=["verify"]}};__decorate([XmlChildElement({localName:XmlSignature.ElementNames.Modulus,prefix:XmlSignature.DefaultPrefix,namespaceURI:XmlSignature.NamespaceURI,required:true,converter:XmlBase64Converter})],RsaKeyValue.prototype,"Modulus",void 0);__decorate([XmlChildElement({localName:XmlSignature.ElementNames.Exponent,prefix:XmlSignature.DefaultPrefix,namespaceURI:XmlSignature.NamespaceURI,required:true,converter:XmlBase64Converter})],RsaKeyValue.prototype,"Exponent",void 0);RsaKeyValue=__decorate([XmlElement({localName:XmlSignature.ElementNames.RSAKeyValue})],RsaKeyValue);const NAMESPACE_URI="http://www.w3.org/2007/05/xmldsig-more#";const PREFIX="pss";let MaskGenerationFunction=class e extends XmlObject{};__decorate([XmlChildElement({parser:DigestMethod})],MaskGenerationFunction.prototype,"DigestMethod",void 0);__decorate([XmlAttribute({localName:XmlSignature.AttributeNames.Algorithm,defaultValue:"http://www.w3.org/2007/05/xmldsig-more#MGF1"})],MaskGenerationFunction.prototype,"Algorithm",void 0);MaskGenerationFunction=__decorate([XmlElement({localName:XmlSignature.ElementNames.MaskGenerationFunction,prefix:PREFIX,namespaceURI:NAMESPACE_URI})],MaskGenerationFunction);let PssAlgorithmParams=PssAlgorithmParams_1=class e extends XmlObject{static FromAlgorithm(e){return new PssAlgorithmParams_1(e)}constructor(e){super();if(e){this.FromAlgorithm(e)}}FromAlgorithm(e){this.DigestMethod=new DigestMethod;const t=CryptoConfig.GetHashAlgorithm(e.hash);this.DigestMethod.Algorithm=t.namespaceURI;if(e.saltLength){this.SaltLength=e.saltLength}}};__decorate([XmlChildElement({parser:DigestMethod})],PssAlgorithmParams.prototype,"DigestMethod",void 0);__decorate([XmlChildElement({parser:MaskGenerationFunction})],PssAlgorithmParams.prototype,"MGF",void 0);__decorate([XmlChildElement({converter:XmlNumberConverter,prefix:PREFIX,namespaceURI:NAMESPACE_URI})],PssAlgorithmParams.prototype,"SaltLength",void 0);__decorate([XmlChildElement({converter:XmlNumberConverter})],PssAlgorithmParams.prototype,"TrailerField",void 0);PssAlgorithmParams=PssAlgorithmParams_1=__decorate([XmlElement({localName:XmlSignature.ElementNames.RSAPSSParams,prefix:PREFIX,namespaceURI:NAMESPACE_URI})],PssAlgorithmParams);let KeyValue=class e extends KeyInfoClause{set Value(e){this.element=null;this.value=e}get Value(){return this.value}constructor(e){super();if(e){this.Value=e}}async importKey(e){switch(e.algorithm.name.toUpperCase()){case RSA_PSS$1.toUpperCase():case RSA_PKCS1.toUpperCase():this.Value=new RsaKeyValue;await this.Value.importKey(e);break;case ECDSA$1.toUpperCase():this.Value=new EcdsaKeyValue;await this.Value.importKey(e);break;default:throw new XmlError(XE.ALGORITHM_NOT_SUPPORTED,e.algorithm.name)}return this}async exportKey(e){if(!this.Value){throw new XmlError(XE.NULL_REFERENCE)}return this.Value.exportKey(e)}OnGetXml(e){if(!this.Value){throw new XmlError(XE.CRYPTOGRAPHIC,"KeyValue has empty value")}const t=this.Value.GetXml();if(t){e.appendChild(t)}}OnLoadXml(e){const t=[RsaKeyValue,EcdsaKeyValue];for(const r of t){try{const t=new r;for(let r=0;r<e.childNodes.length;r++){const n=e.childNodes.item(r);if(!isElement(n)){continue}t.LoadXml(n);this.value=t;return}}catch(e){}}throw new XmlError(XE.CRYPTOGRAPHIC,"Unsupported KeyValue in use")}};KeyValue=__decorate([XmlElement({localName:XmlSignature.ElementNames.KeyValue})],KeyValue);const OID={"2.5.4.3":{short:"CN",long:"CommonName"},"2.5.4.6":{short:"C",long:"Country"},"2.5.4.5":{long:"DeviceSerialNumber"},"0.9.2342.19200300.100.1.25":{short:"DC",long:"DomainComponent"},"1.2.840.113549.1.9.1":{short:"E",long:"EMail"},"2.5.4.42":{short:"G",long:"GivenName"},"2.5.4.43":{short:"I",long:"Initials"},"2.5.4.7":{short:"L",long:"Locality"},"2.5.4.10":{short:"O",long:"Organization"},"2.5.4.11":{short:"OU",long:"OrganizationUnit"},"2.5.4.8":{short:"ST",long:"State"},"2.5.4.9":{short:"Street",long:"StreetAddress"},"2.5.4.4":{short:"SN",long:"SurName"},"2.5.4.12":{short:"T",long:"Title"},"1.2.840.113549.1.9.8":{long:"UnstructuredAddress"},"1.2.840.113549.1.9.2":{long:"UnstructuredName"}};class X509Certificate$1{constructor(e){this.publicKey=null;if(e){const t=new Uint8Array(e);this.LoadRaw(t);this.raw=t}}get SerialNumber(){return this.simpl.serialNumber.valueBlock.toString()}get Issuer(){return this.NameToString(this.simpl.issuer)}get Subject(){return this.NameToString(this.simpl.subject)}async Thumbprint(e="SHA-1"){return Application.crypto.subtle.digest(e,this.raw)}get PublicKey(){return this.publicKey}GetRaw(){return this.raw}async exportKey(e){if(e){const t={algorithm:e,usages:["verify"]};if(t.algorithm.name.toUpperCase()===ECDSA$1){const e=this.simpl.subjectPublicKeyInfo.toJSON();if("crv"in e&&e.crv){t.algorithm.namedCurve=e.crv}else{throw new Error("Cannot get Curved name from the ECDSA public key")}}if(this.isHashedAlgorithm(t.algorithm)){if(typeof t.algorithm.hash==="string"){t.algorithm.hash={name:t.algorithm.hash}}}const r=await this.simpl.getPublicKey({algorithm:t});this.publicKey=r;return r}if(this.simpl.subjectPublicKeyInfo.algorithm.algorithmId==="1.2.840.113549.1.1.1"){this.publicKey=await this.simpl.getPublicKey({algorithm:{algorithm:{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},usages:["verify"]}})}else{this.publicKey=await this.simpl.getPublicKey()}return this.publicKey}NameToString(e,t=","){const r=[];e.typesAndValues.forEach((e=>{const t=e.type;const n=OID[t.toString()];const i=n?n.short:null;r.push(`${i?i:t}=${e.value.valueBlock.value}`)}));return r.join(t+" ")}LoadRaw(e){this.raw=new Uint8Array(e);const t=fromBER(this.raw.buffer);this.simpl=new Certificate$1({schema:t.result})}isHashedAlgorithm(e){return!!e["hash"]}}let X509IssuerSerial=class e extends XmlSignatureObject{};__decorate([XmlChildElement({localName:XmlSignature.ElementNames.X509IssuerName,namespaceURI:XmlSignature.NamespaceURI,prefix:XmlSignature.DefaultPrefix,required:true})],X509IssuerSerial.prototype,"X509IssuerName",void 0);__decorate([XmlChildElement({localName:XmlSignature.ElementNames.X509SerialNumber,namespaceURI:XmlSignature.NamespaceURI,prefix:XmlSignature.DefaultPrefix,required:true})],X509IssuerSerial.prototype,"X509SerialNumber",void 0);X509IssuerSerial=__decorate([XmlElement({localName:XmlSignature.ElementNames.X509IssuerSerial})],X509IssuerSerial);var X509IncludeOption;(function(e){e[e["None"]=0]="None";e[e["EndCertOnly"]=1]="EndCertOnly";e[e["ExcludeRoot"]=2]="ExcludeRoot";e[e["WholeChain"]=3]="WholeChain"})(X509IncludeOption||(X509IncludeOption={}));let KeyInfoX509Data=class e extends KeyInfoClause{constructor(e,t=X509IncludeOption.None){super();this.x509crl=null;this.SubjectKeyIdList=[];if(e){if(e instanceof Uint8Array){this.AddCertificate(new X509Certificate$1(e))}else if(e instanceof X509Certificate$1){switch(t){case X509IncludeOption.None:case X509IncludeOption.EndCertOnly:this.AddCertificate(e);break;case X509IncludeOption.ExcludeRoot:this.AddCertificatesChainFrom(e,false);break;case X509IncludeOption.WholeChain:this.AddCertificatesChainFrom(e,true);break}}}}async importKey(e){throw new XmlError(XE.METHOD_NOT_SUPPORTED)}async exportKey(e){if(!this.Certificates.length){throw new XmlError(XE.NULL_REFERENCE)}this.Key=await this.Certificates[0].exportKey(e);return this.Key}get Certificates(){return this.X509CertificateList}get CRL(){return this.x509crl}set CRL(e){this.x509crl=e}get IssuerSerials(){return this.IssuerSerialList}get SubjectKeyIds(){return this.SubjectKeyIdList}get SubjectNames(){return this.SubjectNameList}AddCertificate(e){if(!e){throw new XmlError(XE.PARAM_REQUIRED,"certificate")}if(!this.X509CertificateList){this.X509CertificateList=[]}this.X509CertificateList.push(e)}AddIssuerSerial(e,t){if(e==null){throw new XmlError(XE.PARAM_REQUIRED,"issuerName")}if(this.IssuerSerialList==null){this.IssuerSerialList=[]}const r={issuerName:e,serialNumber:t};this.IssuerSerialList.push(r)}AddSubjectKeyId(e){if(this.SubjectKeyIdList){this.SubjectKeyIdList=[]}if(typeof e==="string"){if(e!=null){let t;t=Convert$1.FromBase64(e);this.SubjectKeyIdList.push(t)}}else{this.SubjectKeyIdList.push(e)}}AddSubjectName(e){if(this.SubjectNameList==null){this.SubjectNameList=[]}this.SubjectNameList.push(e)}GetXml(){const e=this.CreateDocument();const t=this.CreateElement(e);const r=this.GetPrefix();if(this.IssuerSerialList!=null&&this.IssuerSerialList.length>0){this.IssuerSerialList.forEach((n=>{const i=e.createElementNS(XmlSignature.NamespaceURI,r+XmlSignature.ElementNames.X509IssuerSerial);const s=e.createElementNS(XmlSignature.NamespaceURI,r+XmlSignature.ElementNames.X509IssuerName);s.textContent=n.issuerName;i.appendChild(s);const a=e.createElementNS(XmlSignature.NamespaceURI,r+XmlSignature.ElementNames.X509SerialNumber);a.textContent=n.serialNumber;i.appendChild(a);t.appendChild(i)}))}if(this.SubjectKeyIdList!=null&&this.SubjectKeyIdList.length>0){this.SubjectKeyIdList.forEach((n=>{const i=e.createElementNS(XmlSignature.NamespaceURI,r+XmlSignature.ElementNames.X509SKI);i.textContent=Convert$1.ToBase64(n);t.appendChild(i)}))}if(this.SubjectNameList!=null&&this.SubjectNameList.length>0){this.SubjectNameList.forEach((n=>{const i=e.createElementNS(XmlSignature.NamespaceURI,r+XmlSignature.ElementNames.X509SubjectName);i.textContent=n;t.appendChild(i)}))}if(this.X509CertificateList!=null&&this.X509CertificateList.length>0){this.X509CertificateList.forEach((n=>{const i=e.createElementNS(XmlSignature.NamespaceURI,r+XmlSignature.ElementNames.X509Certificate);i.textContent=Convert$1.ToBase64(n.GetRaw());t.appendChild(i)}))}if(this.x509crl!=null){const n=e.createElementNS(XmlSignature.NamespaceURI,r+XmlSignature.ElementNames.X509CRL);n.textContent=Convert$1.ToBase64(this.x509crl);t.appendChild(n)}return t}LoadXml(e){super.LoadXml(e);if(this.IssuerSerialList){this.IssuerSerialList=[]}if(this.SubjectKeyIdList){this.SubjectKeyIdList=[]}if(this.SubjectNameList){this.SubjectNameList=[]}if(this.X509CertificateList){this.X509CertificateList=[]}this.x509crl=null;let t=this.GetChildren(XmlSignature.ElementNames.X509IssuerSerial);if(t){t.forEach((e=>{const t=XmlSignatureObject.GetChild(e,XmlSignature.ElementNames.X509IssuerName,XmlSignature.NamespaceURI,true);const r=XmlSignatureObject.GetChild(e,XmlSignature.ElementNames.X509SerialNumber,XmlSignature.NamespaceURI,true);if(t&&t.textContent&&r&&r.textContent){this.AddIssuerSerial(t.textContent,r.textContent)}}))}t=this.GetChildren(XmlSignature.ElementNames.X509SKI);if(t){t.forEach((e=>{if(e.textContent){const t=Convert$1.FromBase64(e.textContent);this.AddSubjectKeyId(t)}}))}t=this.GetChildren(XmlSignature.ElementNames.X509SubjectName);if(t!=null){t.forEach((e=>{if(e.textContent){this.AddSubjectName(e.textContent)}}))}t=this.GetChildren(XmlSignature.ElementNames.X509Certificate);if(t){t.forEach((e=>{if(e.textContent){const t=Convert$1.FromBase64(e.textContent);this.AddCertificate(new X509Certificate$1(t))}}))}const r=this.GetChild(XmlSignature.ElementNames.X509CRL,false);if(r&&r.textContent){this.x509crl=Convert$1.FromBase64(r.textContent)}}AddCertificatesChainFrom(e,t){throw new XmlError(XE.METHOD_NOT_IMPLEMENTED)}};KeyInfoX509Data=__decorate([XmlElement({localName:XmlSignature.ElementNames.X509Data})],KeyInfoX509Data);let SPKIData=class e extends KeyInfoClause{async importKey(e){const t=await Application.crypto.subtle.exportKey("spki",e);this.SPKIexp=new Uint8Array(t);this.Key=e;return this}async exportKey(e){const t=await Application.crypto.subtle.importKey("spki",this.SPKIexp,e,true,["verify"]);this.Key=t;return t}};__decorate([XmlChildElement({localName:XmlSignature.ElementNames.SPKIexp,namespaceURI:XmlSignature.NamespaceURI,prefix:XmlSignature.DefaultPrefix,required:true,converter:XmlBase64Converter})],SPKIData.prototype,"SPKIexp",void 0);SPKIData=__decorate([XmlElement({localName:XmlSignature.ElementNames.SPKIData})],SPKIData);const SignatureAlgorithms={};SignatureAlgorithms[RSA_PKCS1_SHA1_NAMESPACE]=RsaPkcs1Sha1;SignatureAlgorithms[RSA_PKCS1_SHA256_NAMESPACE]=RsaPkcs1Sha256;SignatureAlgorithms[RSA_PKCS1_SHA384_NAMESPACE]=RsaPkcs1Sha384;SignatureAlgorithms[RSA_PKCS1_SHA512_NAMESPACE]=RsaPkcs1Sha512;SignatureAlgorithms[ECDSA_SHA1_NAMESPACE]=EcdsaSha1;SignatureAlgorithms[ECDSA_SHA256_NAMESPACE]=EcdsaSha256;SignatureAlgorithms[ECDSA_SHA384_NAMESPACE]=EcdsaSha384;SignatureAlgorithms[ECDSA_SHA512_NAMESPACE]=EcdsaSha512;SignatureAlgorithms[HMAC_SHA1_NAMESPACE]=HmacSha1$1;SignatureAlgorithms[HMAC_SHA256_NAMESPACE]=HmacSha256$1;SignatureAlgorithms[HMAC_SHA384_NAMESPACE]=HmacSha384;SignatureAlgorithms[HMAC_SHA512_NAMESPACE]=HmacSha512$1;SignatureAlgorithms[RSA_PSS_SHA1_NAMESPACE]=RsaPssWithoutParamsSha1;SignatureAlgorithms[RSA_PSS_SHA256_NAMESPACE]=RsaPssWithoutParamsSha256;SignatureAlgorithms[RSA_PSS_SHA384_NAMESPACE]=RsaPssWithoutParamsSha384;SignatureAlgorithms[RSA_PSS_SHA512_NAMESPACE]=RsaPssWithoutParamsSha512;const HashAlgorithms={};HashAlgorithms[SHA1_NAMESPACE]=Sha1$1;HashAlgorithms[SHA256_NAMESPACE]=Sha256$1;HashAlgorithms[SHA384_NAMESPACE]=Sha384;HashAlgorithms[SHA512_NAMESPACE]=Sha512$1;class CryptoConfig{static CreateFromName(e){let t;switch(e){case XmlSignature.AlgorithmNamespaces.XmlDsigBase64Transform:t=new XmlDsigBase64Transform;break;case XmlSignature.AlgorithmNamespaces.XmlDsigC14NTransform:t=new XmlDsigC14NTransform;break;case XmlSignature.AlgorithmNamespaces.XmlDsigC14NWithCommentsTransform:t=new XmlDsigC14NWithCommentsTransform;break;case XmlSignature.AlgorithmNamespaces.XmlDsigEnvelopedSignatureTransform:t=new XmlDsigEnvelopedSignatureTransform;break;case XmlSignature.AlgorithmNamespaces.XmlDsigXPathTransform:throw new XmlError(XE.ALGORITHM_NOT_SUPPORTED,e);case XmlSignature.AlgorithmNamespaces.XmlDsigXsltTransform:throw new XmlError(XE.ALGORITHM_NOT_SUPPORTED,e);case XmlSignature.AlgorithmNamespaces.XmlDsigExcC14NTransform:t=new XmlDsigExcC14NTransform;break;case XmlSignature.AlgorithmNamespaces.XmlDsigExcC14NWithCommentsTransform:t=new XmlDsigExcC14NWithCommentsTransform;break;case XmlSignature.AlgorithmNamespaces.XmlDecryptionTransform:throw new XmlError(XE.ALGORITHM_NOT_SUPPORTED,e);default:throw new XmlError(XE.ALGORITHM_NOT_SUPPORTED,e)}return t}static CreateSignatureAlgorithm(e){const t=SignatureAlgorithms[e.Algorithm]||null;if(t){return new t}else if(e.Algorithm===RSA_PSS_WITH_PARAMS_NAMESPACE){let t;e.Any.Some((e=>{if(e instanceof PssAlgorithmParams){t=e}return!!t}));if(t){switch(t.DigestMethod.Algorithm){case SHA1_NAMESPACE:return new RsaPssSha1(t.SaltLength);case SHA256_NAMESPACE:return new RsaPssSha256(t.SaltLength);case SHA384_NAMESPACE:return new RsaPssSha384(t.SaltLength);case SHA512_NAMESPACE:return new RsaPssSha512(t.SaltLength)}}throw new XmlError(XE.CRYPTOGRAPHIC,`Cannot get params for RSA-PSS algoriithm`)}throw new Error(`signature algorithm '${e.Algorithm}' is not supported`)}static CreateHashAlgorithm(e){const t=HashAlgorithms[e];if(t){return new t}else{throw new Error("hash algorithm '"+e+"' is not supported")}}static GetHashAlgorithm(e){const t=typeof e==="string"?{name:e}:e;switch(t.name.toUpperCase()){case SHA1$1:return new Sha1$1;case SHA256$2:return new Sha256$1;case SHA384$1:return new Sha384;case SHA512$2:return new Sha512$1;default:throw new XmlError(XE.ALGORITHM_NOT_SUPPORTED,t.name)}}static GetSignatureAlgorithm(e){if(typeof e.hash==="string"){e.hash={name:e.hash}}const t=e.hash.name;if(!t){throw new Error("Signing algorithm doesn't have name for hash")}let r;switch(e.name.toUpperCase()){case RSA_PKCS1.toUpperCase():switch(t.toUpperCase()){case SHA1$1:r=new RsaPkcs1Sha1;break;case SHA256$2:r=new RsaPkcs1Sha256;break;case SHA384$1:r=new RsaPkcs1Sha384;break;case SHA512$2:r=new RsaPkcs1Sha512;break;default:throw new XmlError(XE.ALGORITHM_NOT_SUPPORTED,`${e.name}:${t}`)}break;case RSA_PSS$1.toUpperCase():const n=e.saltLength;switch(t.toUpperCase()){case SHA1$1:r=n?new RsaPssSha1(n):new RsaPssWithoutParamsSha1;break;case SHA256$2:r=n?new RsaPssSha256(n):new RsaPssWithoutParamsSha256;break;case SHA384$1:r=n?new RsaPssSha384(n):new RsaPssWithoutParamsSha384;break;case SHA512$2:r=n?new RsaPssSha512(n):new RsaPssWithoutParamsSha512;break;default:throw new XmlError(XE.ALGORITHM_NOT_SUPPORTED,`${e.name}:${t}`)}e.saltLength=r.algorithm.saltLength;break;case ECDSA$1:switch(t.toUpperCase()){case SHA1$1:r=new EcdsaSha1;break;case SHA256$2:r=new EcdsaSha256;break;case SHA384$1:r=new EcdsaSha384;break;case SHA512$2:r=new EcdsaSha512;break;default:throw new XmlError(XE.ALGORITHM_NOT_SUPPORTED,`${e.name}:${t}`)}break;case HMAC:switch(t.toUpperCase()){case SHA1$1:r=new HmacSha1$1;break;case SHA256$2:r=new HmacSha256$1;break;case SHA384$1:r=new HmacSha384;break;case SHA512$2:r=new HmacSha512$1;break;default:throw new XmlError(XE.ALGORITHM_NOT_SUPPORTED,`${e.name}:${t}`)}break;default:throw new XmlError(XE.ALGORITHM_NOT_SUPPORTED,e.name)}return r}}class SignedXml{get XmlSignature(){return this.signature}get Signature(){return this.XmlSignature.SignatureValue}constructor(e){this.signature=new Signature$4;if(e&&e.nodeType===XmlNodeType.Document){this.document=e}else if(e&&e.nodeType===XmlNodeType.Element){const t=(new XMLSerializer).serializeToString(e);this.document=(new DOMParser).parseFromString(t,APPLICATION_XML)}}async Sign(e,t,r,n={}){if(isDocument(r)){r=r.cloneNode(true).documentElement}else if(isElement(r)){r=r.cloneNode(true)}let i;let s;const a=assign$3({},e);if(t.algorithm["hash"]){a.hash=t.algorithm["hash"]}i=CryptoConfig.GetSignatureAlgorithm(a);await this.ApplySignOptions(this.XmlSignature,e,t,n);s=this.XmlSignature.SignedInfo;await this.DigestReferences(r);s.SignatureMethod.Algorithm=i.namespaceURI;if(i instanceof RsaPssBase){const e=assign$3({},t.algorithm,a);if(typeof e.hash==="string"){e.hash={name:e.hash}}const r=new PssAlgorithmParams(e);this.XmlSignature.SignedInfo.SignatureMethod.Any.Add(r)}else if(HMAC.toUpperCase()===e.name.toUpperCase()){let e=0;const r=t.algorithm;switch(r.hash.name.toUpperCase()){case SHA1$1:e=r.length||160;break;case SHA256$2:e=r.length||256;break;case SHA384$1:e=r.length||384;break;case SHA512$2:e=r.length||512;break}this.XmlSignature.SignedInfo.SignatureMethod.HMACOutputLength=e}const o=this.TransformSignedInfo(r);const f=await i.Sign(o,t,a);this.Key=t;this.XmlSignature.SignatureValue=new Uint8Array(f);if(isElement(r)){this.document=r.ownerDocument}return this.XmlSignature}async Verify(e){let t;let r;if(e){if("algorithm"in e&&"usages"in e&&"type"in e){r=e}else{r=e.key;t=e.content}}if(!t){const e=this.document;if(!(e&&e.documentElement)){throw new XmlError(XE.NULL_PARAM,"SignedXml","document")}t=e.documentElement}if(isDocument(t)||isElement(t)){t=t.cloneNode(true)}const n=await this.ValidateReferences(t);if(n){const e=r?[r]:await this.GetPublicKeys();return this.ValidateSignatureValue(e)}else{return false}}GetXml(){return this.signature.GetXml()}LoadXml(e){this.signature=Signature$4.LoadXml(e)}toString(){const e=this.XmlSignature;const t=e.SignedInfo.References&&e.SignedInfo.References.Some((e=>e.Transforms&&e.Transforms.Some((e=>e instanceof XmlDsigEnvelopedSignatureTransform))));if(t){const e=this.document.documentElement.cloneNode(true);const t=this.XmlSignature.GetXml();if(!t){throw new XmlError(XE.XML_EXCEPTION,"Cannot get Xml element from Signature")}const r=t.cloneNode(true);e.appendChild(r);return(new XMLSerializer).serializeToString(e)}return this.XmlSignature.toString()}async GetPublicKeys(){const e=[];const t=CryptoConfig.CreateSignatureAlgorithm(this.XmlSignature.SignedInfo.SignatureMethod);for(const t of this.XmlSignature.KeyInfo.GetIterator()){if(t instanceof KeyInfoX509Data){for(const r of t.Certificates){const t=await r.exportKey();e.push(t)}}else{const r=await t.exportKey();e.push(r)}}if(t.algorithm.name.startsWith("RSA")){for(let r=0;r<e.length;r++){const n=e[r];if(n.algorithm.name.startsWith("RSA")){const i=await Application.crypto.subtle.exportKey("spki",n);const s=await Application.crypto.subtle.importKey("spki",i,t.algorithm,true,["verify"]);e[r]=s}}}return e}GetSignatureNamespaces(){const e={};if(this.XmlSignature.NamespaceURI){e[this.XmlSignature.Prefix||""]=this.XmlSignature.NamespaceURI}return e}CopyNamespaces(e,t,r){this.InjectNamespaces(SelectRootNamespaces(e),t,r)}InjectNamespaces(e,t,r){for(const n in e){const i=e[n];if(r&&n===""){continue}t.setAttribute("xmlns"+(n?":"+n:""),i)}}async DigestReference(e,t,r){if(this.contentHandler){const r=await this.contentHandler(t,this);if(r){e=isDocument(r)?r.documentElement:r}}if(t.Uri){let r;if(!t.Uri.indexOf("#xpointer")){let e=t.Uri;e=e.substring(9).replace(/[\r\n\t\s]/g,"");if(e.length<2||e[0]!==`(`||e[e.length-1]!==`)`){e=""}else{e=e.substring(1,e.length-1)}if(e.length>6&&e.indexOf(`id(`)===0&&e[e.length-1]===`)`){r=e.substring(4,e.length-2)}}else if(t.Uri[0]===`#`){r=t.Uri.substring(1)}if(r){let t=null;const n=[this.XmlSignature.KeyInfo.GetXml()];this.XmlSignature.ObjectList.ForEach((e=>{n.push(e.GetXml())}));for(const i of n){if(i){t=findById(i,r);if(t){const r=t.cloneNode(true);if(isElement(e)){this.CopyNamespaces(e,r,false)}if(this.Parent){const e=this.Parent instanceof XmlObject?this.Parent.GetXml():this.Parent;this.CopyNamespaces(e,r,true)}this.CopyNamespaces(t,r,false);this.InjectNamespaces(this.GetSignatureNamespaces(),r,true);e=r;break}}}if(!t&&(e&&isElement(e))){t=XmlObject.GetElementById(e,r);if(t){const r=t.cloneNode(true);this.CopyNamespaces(t,r,false);this.CopyNamespaces(e,r,false);e=r}}if(t==null){throw new XmlError(XE.CRYPTOGRAPHIC,`Cannot get object by reference: ${r}`)}}}let n=null;if(t.Transforms&&t.Transforms.Count){if(BufferSourceConverter_1.isBufferSource(e)){throw new Error("Transformation for argument 'source' of type BufferSource is not implemented")}n=this.ApplyTransforms(t.Transforms,e)}else{if(t.Uri&&t.Uri[0]!==`#`){if(isElement(e)){if(!e.ownerDocument){throw new Error("Cannot get ownerDocument from the XML document")}n=(new XMLSerializer).serializeToString(e.ownerDocument)}else{n=BufferSourceConverter_1.toArrayBuffer(e)}}else{const t=new XmlDsigC14NTransform;if(BufferSourceConverter_1.isBufferSource(e)){e=Parse(Convert_1.ToUtf8String(e)).documentElement}t.LoadInnerXml(e);n=t.GetOutput()}}if(!t.DigestMethod.Algorithm){throw new XmlError(XE.NULL_PARAM,"Reference","DigestMethod")}const i=CryptoConfig.CreateHashAlgorithm(t.DigestMethod.Algorithm);return i.Digest(n)}async DigestReferences(e){for(const t of this.XmlSignature.SignedInfo.References.GetIterator()){if(t.DigestValue){continue}if(!t.DigestMethod.Algorithm){t.DigestMethod.Algorithm=(new Sha256$1).namespaceURI}const r=await this.DigestReference(e,t,false);t.DigestValue=r}}TransformSignedInfo(e){const t=CryptoConfig.CreateFromName(this.XmlSignature.SignedInfo.CanonicalizationMethod.Algorithm);const r=this.XmlSignature.SignedInfo.GetXml();if(!r){throw new XmlError(XE.XML_EXCEPTION,"Cannot get Xml element from SignedInfo")}const n=r.cloneNode(true);this.CopyNamespaces(r,n,false);if(e&&!BufferSourceConverter_1.isBufferSource(e)){if(e.nodeType===XmlNodeType.Document){this.CopyNamespaces(e.documentElement,n,false)}else{this.CopyNamespaces(e,n,false)}}if(this.Parent){const e=this.Parent instanceof XmlObject?this.Parent.GetXml():this.Parent;if(e){this.CopyNamespaces(e,n,false)}}const i=SelectNamespaces(r);for(const e in i){const t=i[e];if(e===n.prefix){continue}n.setAttribute("xmlns"+(e?":"+e:""),t)}t.LoadInnerXml(n);const s=t.GetOutput();return s}ResolveTransform(e){if(typeof e==="string"){switch(e){case"enveloped":return new XmlDsigEnvelopedSignatureTransform;case"c14n":return new XmlDsigC14NTransform;case"c14n-com":return new XmlDsigC14NWithCommentsTransform;case"exc-c14n":return new XmlDsigExcC14NTransform;case"exc-c14n-com":return new XmlDsigExcC14NWithCommentsTransform;case"base64":return new XmlDsigBase64Transform;default:throw new XmlError(XE.CRYPTOGRAPHIC_UNKNOWN_TRANSFORM,e)}}switch(e.name){case"xpath":{const t=new XmlDsigXPathTransform;t.XPath=e.selector;const r=t.GetXml();if(r&&e.namespaces){for(const[t,n]of Object.entries(e.namespaces)){r.firstChild.setAttributeNS("http://www.w3.org/2000/xmlns/",`xmlns:${t}`,n)}}return t}default:throw new XmlError(XE.CRYPTOGRAPHIC_UNKNOWN_TRANSFORM,e.name)}}ApplyTransforms(e,t){let r=null;e.Sort(((e,t)=>{const r=[XmlDsigC14NTransform,XmlDsigC14NWithCommentsTransform,XmlDsigExcC14NTransform,XmlDsigExcC14NWithCommentsTransform];if(r.some((t=>e instanceof t))){return 1}if(r.some((e=>t instanceof e))){return-1}return 0})).ForEach((e=>{e.LoadInnerXml(t);if(e instanceof XmlDsigXPathTransform){e.GetOutput()}else{r=e.GetOutput()}}));if(e.Count===1&&e.Item(0)instanceof XmlDsigEnvelopedSignatureTransform){const e=new XmlDsigC14NTransform;e.LoadInnerXml(t);r=e.GetOutput()}return r}async ApplySignOptions(e,t,r,n){if(n.id){this.XmlSignature.Id=n.id}if(n.keyValue&&r.algorithm.name.toUpperCase()!==HMAC){if(!e.KeyInfo){e.KeyInfo=new KeyInfo}const t=e.KeyInfo;const r=new KeyValue;t.Add(r);await r.importKey(n.keyValue)}if(n.x509){if(!e.KeyInfo){e.KeyInfo=new KeyInfo}const t=e.KeyInfo;n.x509.forEach((e=>{const r=Convert$1.FromBase64(e);const n=new KeyInfoX509Data(r);t.Add(n)}))}if(n.references){n.references.forEach((t=>{const r=new Reference;if(t.id){r.Id=t.id}if(t.uri!==null&&t.uri!==undefined){r.Uri=t.uri}if(t.type){r.Type=t.type}const n=CryptoConfig.GetHashAlgorithm(t.hash);r.DigestMethod.Algorithm=n.namespaceURI;if(t.transforms&&t.transforms.length){const e=new Transforms;t.transforms.forEach((t=>{e.Add(this.ResolveTransform(t))}));r.Transforms=e}if(!e.SignedInfo.References){e.SignedInfo.References=new References}e.SignedInfo.References.Add(r)}))}if(!e.SignedInfo.References.Count){const t=new Reference;e.SignedInfo.References.Add(t)}}async ValidateReferences(e){for(const t of this.XmlSignature.SignedInfo.References.GetIterator()){const r=await this.DigestReference(e,t,false);const n=Convert$1.ToBase64(r);const i=Convert$1.ToString(t.DigestValue,"base64");if(n!==i){const e=`Invalid digest for uri '${t.Uri}'. Calculated digest is ${n} but the xml to validate supplies digest ${i}`;throw new XmlError(XE.CRYPTOGRAPHIC,e)}}return true}async ValidateSignatureValue(e){let t;let r;r=this.TransformSignedInfo(this.document);t=CryptoConfig.CreateSignatureAlgorithm(this.XmlSignature.SignedInfo.SignatureMethod);for(const n of e){const e=await t.Verify(r,n,this.Signature);if(e){return true}}return false}}function findById(e,t){if(e.nodeType!==XmlNodeType.Element){return null}if(e.hasAttribute("Id")&&e.getAttribute("Id")===t){return e}if(e.childNodes&&e.childNodes.length){for(let r=0;r<e.childNodes.length;r++){const n=findById(e.childNodes[r],t);if(n){return n}}}return null}function addNamespace(e,t,r){if(!(t in e)){e[t]=r}}function _SelectRootNamespaces(e,t={}){if(isElement(e)){if(e.namespaceURI&&e.namespaceURI!=="http://www.w3.org/XML/1998/namespace"){addNamespace(t,e.prefix?e.prefix:"",e.namespaceURI)}for(let r=0;r<e.attributes.length;r++){const n=e.attributes.item(r);if(n&&n.prefix==="xmlns"){addNamespace(t,n.localName?n.localName:"",n.value)}}if(e.parentNode){_SelectRootNamespaces(e.parentNode,t)}}}function SelectRootNamespaces(e){const t={};_SelectRootNamespaces(e,t);return t}
/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Reflect$1;(function(e){(function(t){var r=typeof commonjsGlobal==="object"?commonjsGlobal:typeof self==="object"?self:typeof this==="object"?this:Function("return this;")();var n=i(e);if(typeof r.Reflect==="undefined"){r.Reflect=e}else{n=i(r.Reflect,n)}t(n);function i(e,t){return function(r,n){if(typeof e[r]!=="function"){Object.defineProperty(e,r,{configurable:true,writable:true,value:n})}if(t)t(r,n)}}})((function(e){var t=Object.prototype.hasOwnProperty;var r=typeof Symbol==="function";var n=r&&typeof Symbol.toPrimitive!=="undefined"?Symbol.toPrimitive:"@@toPrimitive";var i=r&&typeof Symbol.iterator!=="undefined"?Symbol.iterator:"@@iterator";var s=typeof Object.create==="function";var a={__proto__:[]}instanceof Array;var o=!s&&!a;var f={create:s?function(){return ie(Object.create(null))}:a?function(){return ie({__proto__:null})}:function(){return ie({})},has:o?function(e,r){return t.call(e,r)}:function(e,t){return t in e},get:o?function(e,r){return t.call(e,r)?e[r]:undefined}:function(e,t){return e[t]}};var c=Object.getPrototypeOf(Function);var u=typeof process==="object"&&process.env&&process.env["REFLECT_METADATA_USE_MAP_POLYFILL"]==="true";var l=!u&&typeof Map==="function"&&typeof Map.prototype.entries==="function"?Map:te();var h=!u&&typeof Set==="function"&&typeof Set.prototype.entries==="function"?Set:re();var d=!u&&typeof WeakMap==="function"?WeakMap:ne();var p=new d;function y(e,t,r,n){if(!D(r)){if(!K(e))throw new TypeError;if(!L(t))throw new TypeError;if(!L(n)&&!D(n)&&!M(n))throw new TypeError;if(M(n))n=undefined;r=j(r);return T(e,t,r,n)}else{if(!K(e))throw new TypeError;if(!q(t))throw new TypeError;return $(e,t)}}e("decorate",y);function m(e,t){function r(r,n){if(!L(r))throw new TypeError;if(!D(n)&&!z(n))throw new TypeError;k(e,t,r,n)}return r}e("metadata",m);function g(e,t,r,n){if(!L(r))throw new TypeError;if(!D(n))n=j(n);return k(e,t,r,n)}e("defineMetadata",g);function b(e,t,r){if(!L(t))throw new TypeError;if(!D(r))r=j(r);return C(e,t,r)}e("hasMetadata",b);function A(e,t,r){if(!L(t))throw new TypeError;if(!D(r))r=j(r);return P(e,t,r)}e("hasOwnMetadata",A);function w(e,t,r){if(!L(t))throw new TypeError;if(!D(r))r=j(r);return R(e,t,r)}e("getMetadata",w);function E(e,t,r){if(!L(t))throw new TypeError;if(!D(r))r=j(r);return N(e,t,r)}e("getOwnMetadata",E);function v(e,t){if(!L(e))throw new TypeError;if(!D(t))t=j(t);return O(e,t)}e("getMetadataKeys",v);function _(e,t){if(!L(e))throw new TypeError;if(!D(t))t=j(t);return x(e,t)}e("getOwnMetadataKeys",_);function S(e,t,r){if(!L(t))throw new TypeError;if(!D(r))r=j(r);var n=I(t,r,false);if(D(n))return false;if(!n.delete(e))return false;if(n.size>0)return true;var i=p.get(t);i.delete(r);if(i.size>0)return true;p.delete(t);return true}e("deleteMetadata",S);function $(e,t){for(var r=e.length-1;r>=0;--r){var n=e[r];var i=n(t);if(!D(i)&&!M(i)){if(!q(i))throw new TypeError;t=i}}return t}function T(e,t,r,n){for(var i=e.length-1;i>=0;--i){var s=e[i];var a=s(t,r,n);if(!D(a)&&!M(a)){if(!L(a))throw new TypeError;n=a}}return n}function I(e,t,r){var n=p.get(e);if(D(n)){if(!r)return undefined;n=new l;p.set(e,n)}var i=n.get(t);if(D(i)){if(!r)return undefined;i=new l;n.set(t,i)}return i}function C(e,t,r){var n=P(e,t,r);if(n)return true;var i=ee(t);if(!M(i))return C(e,i,r);return false}function P(e,t,r){var n=I(t,r,false);if(D(n))return false;return V(n.has(e))}function R(e,t,r){var n=P(e,t,r);if(n)return N(e,t,r);var i=ee(t);if(!M(i))return R(e,i,r);return undefined}function N(e,t,r){var n=I(t,r,false);if(D(n))return undefined;return n.get(e)}function k(e,t,r,n){var i=I(r,n,true);i.set(e,t)}function O(e,t){var r=x(e,t);var n=ee(e);if(n===null)return r;var i=O(n,t);if(i.length<=0)return r;if(r.length<=0)return i;var s=new h;var a=[];for(var o=0,f=r;o<f.length;o++){var c=f[o];var u=s.has(c);if(!u){s.add(c);a.push(c)}}for(var l=0,d=i;l<d.length;l++){var c=d[l];var u=s.has(c);if(!u){s.add(c);a.push(c)}}return a}function x(e,t){var r=[];var n=I(e,t,false);if(D(n))return r;var i=n.keys();var s=Q(i);var a=0;while(true){var o=J(s);if(!o){r.length=a;return r}var f=W(o);try{r[a]=f}catch(e){try{Z(s)}finally{throw e}}a++}}function B(e){if(e===null)return 1;switch(typeof e){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return e===null?1:6;default:return 6}}function D(e){return e===undefined}function M(e){return e===null}function U(e){return typeof e==="symbol"}function L(e){return typeof e==="object"?e!==null:typeof e==="function"}function F(e,t){switch(B(e)){case 0:return e;case 1:return e;case 2:return e;case 3:return e;case 4:return e;case 5:return e}var r=t===3?"string":t===5?"number":"default";var i=X(e,n);if(i!==undefined){var s=i.call(e,r);if(L(s))throw new TypeError;return s}return H(e,r==="default"?"number":r)}function H(e,t){if(t==="string"){var r=e.toString;if(Y(r)){var n=r.call(e);if(!L(n))return n}var i=e.valueOf;if(Y(i)){var n=i.call(e);if(!L(n))return n}}else{var i=e.valueOf;if(Y(i)){var n=i.call(e);if(!L(n))return n}var s=e.toString;if(Y(s)){var n=s.call(e);if(!L(n))return n}}throw new TypeError}function V(e){return!!e}function G(e){return""+e}function j(e){var t=F(e,3);if(U(t))return t;return G(t)}function K(e){return Array.isArray?Array.isArray(e):e instanceof Object?e instanceof Array:Object.prototype.toString.call(e)==="[object Array]"}function Y(e){return typeof e==="function"}function q(e){return typeof e==="function"}function z(e){switch(B(e)){case 3:return true;case 4:return true;default:return false}}function X(e,t){var r=e[t];if(r===undefined||r===null)return undefined;if(!Y(r))throw new TypeError;return r}function Q(e){var t=X(e,i);if(!Y(t))throw new TypeError;var r=t.call(e);if(!L(r))throw new TypeError;return r}function W(e){return e.value}function J(e){var t=e.next();return t.done?false:t}function Z(e){var t=e["return"];if(t)t.call(e)}function ee(e){var t=Object.getPrototypeOf(e);if(typeof e!=="function"||e===c)return t;if(t!==c)return t;var r=e.prototype;var n=r&&Object.getPrototypeOf(r);if(n==null||n===Object.prototype)return t;var i=n.constructor;if(typeof i!=="function")return t;if(i===e)return t;return i}function te(){var e={};var t=[];var r=function(){function e(e,t,r){this._index=0;this._keys=e;this._values=t;this._selector=r}e.prototype["@@iterator"]=function(){return this};e.prototype[i]=function(){return this};e.prototype.next=function(){var e=this._index;if(e>=0&&e<this._keys.length){var r=this._selector(this._keys[e],this._values[e]);if(e+1>=this._keys.length){this._index=-1;this._keys=t;this._values=t}else{this._index++}return{value:r,done:false}}return{value:undefined,done:true}};e.prototype.throw=function(e){if(this._index>=0){this._index=-1;this._keys=t;this._values=t}throw e};e.prototype.return=function(e){if(this._index>=0){this._index=-1;this._keys=t;this._values=t}return{value:e,done:true}};return e}();return function(){function t(){this._keys=[];this._values=[];this._cacheKey=e;this._cacheIndex=-2}Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:true,configurable:true});t.prototype.has=function(e){return this._find(e,false)>=0};t.prototype.get=function(e){var t=this._find(e,false);return t>=0?this._values[t]:undefined};t.prototype.set=function(e,t){var r=this._find(e,true);this._values[r]=t;return this};t.prototype.delete=function(t){var r=this._find(t,false);if(r>=0){var n=this._keys.length;for(var i=r+1;i<n;i++){this._keys[i-1]=this._keys[i];this._values[i-1]=this._values[i]}this._keys.length--;this._values.length--;if(t===this._cacheKey){this._cacheKey=e;this._cacheIndex=-2}return true}return false};t.prototype.clear=function(){this._keys.length=0;this._values.length=0;this._cacheKey=e;this._cacheIndex=-2};t.prototype.keys=function(){return new r(this._keys,this._values,n)};t.prototype.values=function(){return new r(this._keys,this._values,s)};t.prototype.entries=function(){return new r(this._keys,this._values,a)};t.prototype["@@iterator"]=function(){return this.entries()};t.prototype[i]=function(){return this.entries()};t.prototype._find=function(e,t){if(this._cacheKey!==e){this._cacheIndex=this._keys.indexOf(this._cacheKey=e)}if(this._cacheIndex<0&&t){this._cacheIndex=this._keys.length;this._keys.push(e);this._values.push(undefined)}return this._cacheIndex};return t}();function n(e,t){return e}function s(e,t){return t}function a(e,t){return[e,t]}}function re(){return function(){function e(){this._map=new l}Object.defineProperty(e.prototype,"size",{get:function(){return this._map.size},enumerable:true,configurable:true});e.prototype.has=function(e){return this._map.has(e)};e.prototype.add=function(e){return this._map.set(e,e),this};e.prototype.delete=function(e){return this._map.delete(e)};e.prototype.clear=function(){this._map.clear()};e.prototype.keys=function(){return this._map.keys()};e.prototype.values=function(){return this._map.values()};e.prototype.entries=function(){return this._map.entries()};e.prototype["@@iterator"]=function(){return this.keys()};e.prototype[i]=function(){return this.keys()};return e}()}function ne(){var e=16;var r=f.create();var n=i();return function(){function e(){this._key=i()}e.prototype.has=function(e){var t=s(e,false);return t!==undefined?f.has(t,this._key):false};e.prototype.get=function(e){var t=s(e,false);return t!==undefined?f.get(t,this._key):undefined};e.prototype.set=function(e,t){var r=s(e,true);r[this._key]=t;return this};e.prototype.delete=function(e){var t=s(e,false);return t!==undefined?delete t[this._key]:false};e.prototype.clear=function(){this._key=i()};return e}();function i(){var e;do{e="@@WeakMap@@"+c()}while(f.has(r,e));r[e]=true;return e}function s(e,r){if(!t.call(e,n)){if(!r)return undefined;Object.defineProperty(e,n,{value:f.create()})}return e[n]}function a(e,t){for(var r=0;r<t;++r)e[r]=Math.random()*255|0;return e}function o(e){if(typeof Uint8Array==="function"){if(typeof crypto!=="undefined")return crypto.getRandomValues(new Uint8Array(e));if(typeof msCrypto!=="undefined")return msCrypto.getRandomValues(new Uint8Array(e));return a(new Uint8Array(e),e)}return a(new Array(e),e)}function c(){var t=o(e);t[6]=t[6]&79|64;t[8]=t[8]&191|128;var r="";for(var n=0;n<e;++n){var i=t[n];if(n===4||n===6||n===8)r+="-";if(i<16)r+="0";r+=i.toString(16).toLowerCase()}return r}}function ie(e){e.__=undefined;delete e.__;return e}}))})(Reflect$1||(Reflect$1={}));var AsnTypeTypes;(function(e){e[e["Sequence"]=0]="Sequence";e[e["Set"]=1]="Set";e[e["Choice"]=2]="Choice"})(AsnTypeTypes||(AsnTypeTypes={}));var AsnPropTypes;(function(e){e[e["Any"]=1]="Any";e[e["Boolean"]=2]="Boolean";e[e["OctetString"]=3]="OctetString";e[e["BitString"]=4]="BitString";e[e["Integer"]=5]="Integer";e[e["Enumerated"]=6]="Enumerated";e[e["ObjectIdentifier"]=7]="ObjectIdentifier";e[e["Utf8String"]=8]="Utf8String";e[e["BmpString"]=9]="BmpString";e[e["UniversalString"]=10]="UniversalString";e[e["NumericString"]=11]="NumericString";e[e["PrintableString"]=12]="PrintableString";e[e["TeletexString"]=13]="TeletexString";e[e["VideotexString"]=14]="VideotexString";e[e["IA5String"]=15]="IA5String";e[e["GraphicString"]=16]="GraphicString";e[e["VisibleString"]=17]="VisibleString";e[e["GeneralString"]=18]="GeneralString";e[e["CharacterString"]=19]="CharacterString";e[e["UTCTime"]=20]="UTCTime";e[e["GeneralizedTime"]=21]="GeneralizedTime";e[e["DATE"]=22]="DATE";e[e["TimeOfDay"]=23]="TimeOfDay";e[e["DateTime"]=24]="DateTime";e[e["Duration"]=25]="Duration";e[e["TIME"]=26]="TIME";e[e["Null"]=27]="Null"})(AsnPropTypes||(AsnPropTypes={}));class BitString{constructor(e,t=0){this.unusedBits=0;this.value=new ArrayBuffer(0);if(e){if(typeof e==="number"){this.fromNumber(e)}else if(BufferSourceConverter_1.isBufferSource(e)){this.unusedBits=t;this.value=BufferSourceConverter_1.toArrayBuffer(e)}else{throw TypeError("Unsupported type of 'params' argument for BitString")}}}fromASN(e){if(!(e instanceof BitString$1)){throw new TypeError("Argument 'asn' is not instance of ASN.1 BitString")}this.unusedBits=e.valueBlock.unusedBits;this.value=e.valueBlock.valueHex;return this}toASN(){return new BitString$1({unusedBits:this.unusedBits,valueHex:this.value})}toSchema(e){return new BitString$1({name:e})}toNumber(){let e="";const t=new Uint8Array(this.value);for(const r of t){e+=r.toString(2).padStart(8,"0")}e=e.split("").reverse().join("");if(this.unusedBits){e=e.slice(this.unusedBits).padStart(this.unusedBits,"0")}return parseInt(e,2)}fromNumber(e){let t=e.toString(2);const r=t.length+7>>3;this.unusedBits=(r<<3)-t.length;const n=new Uint8Array(r);t=t.padStart(r<<3,"0").split("").reverse().join("");let i=0;while(i<r){n[i]=parseInt(t.slice(i<<3,(i<<3)+8),2);i++}this.value=n.buffer}}class OctetString{get byteLength(){return this.buffer.byteLength}get byteOffset(){return 0}constructor(e){if(typeof e==="number"){this.buffer=new ArrayBuffer(e)}else{if(BufferSourceConverter_1.isBufferSource(e)){this.buffer=BufferSourceConverter_1.toArrayBuffer(e)}else if(Array.isArray(e)){this.buffer=new Uint8Array(e)}else{this.buffer=new ArrayBuffer(0)}}}fromASN(e){if(!(e instanceof OctetString$1)){throw new TypeError("Argument 'asn' is not instance of ASN.1 OctetString")}this.buffer=e.valueBlock.valueHex;return this}toASN(){return new OctetString$1({valueHex:this.buffer})}toSchema(e){return new OctetString$1({name:e})}}const AsnAnyConverter={fromASN:e=>e instanceof Null?null:e.valueBeforeDecodeView,toASN:e=>{if(e===null){return new Null}const t=fromBER(e);if(t.result.error){throw new Error(t.result.error)}return t.result}};const AsnIntegerConverter={fromASN:e=>e.valueBlock.valueHexView.byteLength>=4?e.valueBlock.toString():e.valueBlock.valueDec,toASN:e=>new Integer({value:+e})};const AsnEnumeratedConverter={fromASN:e=>e.valueBlock.valueDec,toASN:e=>new Enumerated({value:e})};const AsnIntegerArrayBufferConverter$1={fromASN:e=>e.valueBlock.valueHexView,toASN:e=>new Integer({valueHex:e})};const AsnIntegerBigIntConverter={fromASN:e=>e.toBigInt(),toASN:e=>Integer.fromBigInt(e)};const AsnBitStringConverter={fromASN:e=>e.valueBlock.valueHexView,toASN:e=>new BitString$1({valueHex:e})};const AsnObjectIdentifierConverter={fromASN:e=>e.valueBlock.toString(),toASN:e=>new ObjectIdentifier$1({value:e})};const AsnBooleanConverter={fromASN:e=>e.valueBlock.value,toASN:e=>new Boolean$1({value:e})};const AsnOctetStringConverter={fromASN:e=>e.valueBlock.valueHexView,toASN:e=>new OctetString$1({valueHex:e})};const AsnConstructedOctetStringConverter={fromASN:e=>new OctetString(e.getValue()),toASN:e=>e.toASN()};function createStringConverter(e){return{fromASN:e=>e.valueBlock.value,toASN:t=>new e({value:t})}}const AsnUtf8StringConverter=createStringConverter(Utf8String);const AsnBmpStringConverter=createStringConverter(BmpString);const AsnUniversalStringConverter=createStringConverter(UniversalString);const AsnNumericStringConverter=createStringConverter(NumericString);const AsnPrintableStringConverter=createStringConverter(PrintableString);const AsnTeletexStringConverter=createStringConverter(TeletexString);const AsnVideotexStringConverter=createStringConverter(VideotexString);const AsnIA5StringConverter=createStringConverter(IA5String);const AsnGraphicStringConverter=createStringConverter(GraphicString);const AsnVisibleStringConverter=createStringConverter(VisibleString);const AsnGeneralStringConverter=createStringConverter(GeneralString);const AsnCharacterStringConverter=createStringConverter(CharacterString);const AsnUTCTimeConverter={fromASN:e=>e.toDate(),toASN:e=>new UTCTime({valueDate:e})};const AsnGeneralizedTimeConverter={fromASN:e=>e.toDate(),toASN:e=>new GeneralizedTime({valueDate:e})};const AsnNullConverter={fromASN:()=>null,toASN:()=>new Null};function defaultConverter(e){switch(e){case AsnPropTypes.Any:return AsnAnyConverter;case AsnPropTypes.BitString:return AsnBitStringConverter;case AsnPropTypes.BmpString:return AsnBmpStringConverter;case AsnPropTypes.Boolean:return AsnBooleanConverter;case AsnPropTypes.CharacterString:return AsnCharacterStringConverter;case AsnPropTypes.Enumerated:return AsnEnumeratedConverter;case AsnPropTypes.GeneralString:return AsnGeneralStringConverter;case AsnPropTypes.GeneralizedTime:return AsnGeneralizedTimeConverter;case AsnPropTypes.GraphicString:return AsnGraphicStringConverter;case AsnPropTypes.IA5String:return AsnIA5StringConverter;case AsnPropTypes.Integer:return AsnIntegerConverter;case AsnPropTypes.Null:return AsnNullConverter;case AsnPropTypes.NumericString:return AsnNumericStringConverter;case AsnPropTypes.ObjectIdentifier:return AsnObjectIdentifierConverter;case AsnPropTypes.OctetString:return AsnOctetStringConverter;case AsnPropTypes.PrintableString:return AsnPrintableStringConverter;case AsnPropTypes.TeletexString:return AsnTeletexStringConverter;case AsnPropTypes.UTCTime:return AsnUTCTimeConverter;case AsnPropTypes.UniversalString:return AsnUniversalStringConverter;case AsnPropTypes.Utf8String:return AsnUtf8StringConverter;case AsnPropTypes.VideotexString:return AsnVideotexStringConverter;case AsnPropTypes.VisibleString:return AsnVisibleStringConverter;default:return null}}function isConvertible$1(e){if(typeof e==="function"&&e.prototype){if(e.prototype.toASN&&e.prototype.fromASN){return true}else{return isConvertible$1(e.prototype)}}else{return!!(e&&typeof e==="object"&&"toASN"in e&&"fromASN"in e)}}function isTypeOfArray(e){var t;if(e){const r=Object.getPrototypeOf(e);if(((t=r===null||r===void 0?void 0:r.prototype)===null||t===void 0?void 0:t.constructor)===Array){return true}return isTypeOfArray(r)}return false}function isArrayEqual(e,t){if(!(e&&t)){return false}if(e.byteLength!==t.byteLength){return false}const r=new Uint8Array(e);const n=new Uint8Array(t);for(let t=0;t<e.byteLength;t++){if(r[t]!==n[t]){return false}}return true}class AsnSchemaStorage{constructor(){this.items=new WeakMap}has(e){return this.items.has(e)}get(e,t=false){const r=this.items.get(e);if(!r){throw new Error(`Cannot get schema for '${e.prototype.constructor.name}' target`)}if(t&&!r.schema){throw new Error(`Schema '${e.prototype.constructor.name}' doesn't contain ASN.1 schema. Call 'AsnSchemaStorage.cache'.`)}return r}cache(e){const t=this.get(e);if(!t.schema){t.schema=this.create(e,true)}}createDefault(e){const t={type:AsnTypeTypes.Sequence,items:{}};const r=this.findParentSchema(e);if(r){Object.assign(t,r);t.items=Object.assign({},t.items,r.items)}return t}create(e,t){const r=this.items.get(e)||this.createDefault(e);const n=[];for(const e in r.items){const i=r.items[e];const s=t?e:"";let a;if(typeof i.type==="number"){const e=AsnPropTypes[i.type];const t=asn1js[e];if(!t){throw new Error(`Cannot get ASN1 class by name '${e}'`)}a=new t({name:s})}else if(isConvertible$1(i.type)){const e=new i.type;a=e.toSchema(s)}else if(i.optional){const e=this.get(i.type);if(e.type===AsnTypeTypes.Choice){a=new Any({name:s})}else{a=this.create(i.type,false);a.name=s}}else{a=new Any({name:s})}const o=!!i.optional||i.defaultValue!==undefined;if(i.repeated){a.name="";const e=i.repeated==="set"?Set$3:Sequence;a=new e({name:"",value:[new Repeated({name:s,value:a})]})}if(i.context!==null&&i.context!==undefined){if(i.implicit){if(typeof i.type==="number"||isConvertible$1(i.type)){const e=i.repeated?Constructed:Primitive;n.push(new e({name:s,optional:o,idBlock:{tagClass:3,tagNumber:i.context}}))}else{this.cache(i.type);const e=!!i.repeated;let t=!e?this.get(i.type,true).schema:a;t="valueBlock"in t?t.valueBlock.value:t.value;n.push(new Constructed({name:!e?s:"",optional:o,idBlock:{tagClass:3,tagNumber:i.context},value:t}))}}else{n.push(new Constructed({optional:o,idBlock:{tagClass:3,tagNumber:i.context},value:[a]}))}}else{a.optional=o;n.push(a)}}switch(r.type){case AsnTypeTypes.Sequence:return new Sequence({value:n,name:""});case AsnTypeTypes.Set:return new Set$3({value:n,name:""});case AsnTypeTypes.Choice:return new Choice({value:n,name:""});default:throw new Error(`Unsupported ASN1 type in use`)}}set(e,t){this.items.set(e,t);return this}findParentSchema(e){const t=Object.getPrototypeOf(e);if(t){const e=this.items.get(t);return e||this.findParentSchema(t)}return null}}const schemaStorage$1=new AsnSchemaStorage;const AsnType=e=>t=>{let r;if(!schemaStorage$1.has(t)){r=schemaStorage$1.createDefault(t);schemaStorage$1.set(t,r)}else{r=schemaStorage$1.get(t)}Object.assign(r,e)};const AsnChoiceType=()=>AsnType({type:AsnTypeTypes.Choice});const AsnSetType=e=>AsnType({type:AsnTypeTypes.Set,...e});const AsnSequenceType=e=>AsnType({type:AsnTypeTypes.Sequence,...e});const AsnProp=e=>(t,r)=>{let n;if(!schemaStorage$1.has(t.constructor)){n=schemaStorage$1.createDefault(t.constructor);schemaStorage$1.set(t.constructor,n)}else{n=schemaStorage$1.get(t.constructor)}const i=Object.assign({},e);if(typeof i.type==="number"&&!i.converter){const n=defaultConverter(e.type);if(!n){throw new Error(`Cannot get default converter for property '${r}' of ${t.constructor.name}`)}i.converter=n}n.items[r]=i};class AsnSchemaValidationError extends Error{constructor(){super(...arguments);this.schemas=[]}}class AsnParser{static parse(e,t){const r=fromBER(e);if(r.result.error){throw new Error(r.result.error)}const n=this.fromASN(r.result,t);return n}static fromASN(e,t){var r;try{if(isConvertible$1(t)){const r=new t;return r.fromASN(e)}const n=schemaStorage$1.get(t);schemaStorage$1.cache(t);let i=n.schema;if(e.constructor===Constructed&&n.type!==AsnTypeTypes.Choice){i=new Constructed({idBlock:{tagClass:3,tagNumber:e.idBlock.tagNumber},value:n.schema.valueBlock.value});for(const t in n.items){delete e[t]}}const s=compareSchema({},e,i);if(!s.verified){throw new AsnSchemaValidationError(`Data does not match to ${t.name} ASN1 schema. ${s.result.error}`)}const a=new t;if(isTypeOfArray(t)){if(!("value"in e.valueBlock&&Array.isArray(e.valueBlock.value))){throw new Error(`Cannot get items from the ASN.1 parsed value. ASN.1 object is not constructed.`)}const r=n.itemType;if(typeof r==="number"){const n=defaultConverter(r);if(!n){throw new Error(`Cannot get default converter for array item of ${t.name} ASN1 schema`)}return t.from(e.valueBlock.value,(e=>n.fromASN(e)))}else{return t.from(e.valueBlock.value,(e=>this.fromASN(e,r)))}}for(const e in n.items){const t=s.result[e];if(!t){continue}const i=n.items[e];const o=i.type;if(typeof o==="number"||isConvertible$1(o)){const n=(r=i.converter)!==null&&r!==void 0?r:isConvertible$1(o)?new o:null;if(!n){throw new Error("Converter is empty")}if(i.repeated){if(i.implicit){const r=i.repeated==="sequence"?Sequence:Set$3;const s=new r;s.valueBlock=t.valueBlock;const o=fromBER(s.toBER(false));if(o.offset===-1){throw new Error(`Cannot parse the child item. ${o.result.error}`)}if(!("value"in o.result.valueBlock&&Array.isArray(o.result.valueBlock.value))){throw new Error("Cannot get items from the ASN.1 parsed value. ASN.1 object is not constructed.")}const f=o.result.valueBlock.value;a[e]=Array.from(f,(e=>n.fromASN(e)))}else{a[e]=Array.from(t,(e=>n.fromASN(e)))}}else{let r=t;if(i.implicit){let e;if(isConvertible$1(o)){e=(new o).toSchema("")}else{const t=AsnPropTypes[o];const r=asn1js[t];if(!r){throw new Error(`Cannot get '${t}' class from asn1js module`)}e=new r}e.valueBlock=r.valueBlock;r=fromBER(e.toBER(false)).result}a[e]=n.fromASN(r)}}else{if(i.repeated){if(!Array.isArray(t)){throw new Error("Cannot get list of items from the ASN.1 parsed value. ASN.1 value should be iterable.")}a[e]=Array.from(t,(e=>this.fromASN(e,o)))}else{a[e]=this.fromASN(t,o)}}}return a}catch(e){if(e instanceof AsnSchemaValidationError){e.schemas.push(t.name)}throw e}}}class AsnSerializer{static serialize(e){if(e instanceof BaseBlock){return e.toBER(false)}return this.toASN(e).toBER(false)}static toASN(e){if(e&&typeof e==="object"&&isConvertible$1(e)){return e.toASN()}if(!(e&&typeof e==="object")){throw new TypeError("Parameter 1 should be type of Object.")}const t=e.constructor;const r=schemaStorage$1.get(t);schemaStorage$1.cache(t);let n=[];if(r.itemType){if(!Array.isArray(e)){throw new TypeError("Parameter 1 should be type of Array.")}if(typeof r.itemType==="number"){const i=defaultConverter(r.itemType);if(!i){throw new Error(`Cannot get default converter for array item of ${t.name} ASN1 schema`)}n=e.map((e=>i.toASN(e)))}else{n=e.map((e=>this.toAsnItem({type:r.itemType},"[]",t,e)))}}else{for(const i in r.items){const s=r.items[i];const a=e[i];if(a===undefined||s.defaultValue===a||typeof s.defaultValue==="object"&&typeof a==="object"&&isArrayEqual(this.serialize(s.defaultValue),this.serialize(a))){continue}const o=AsnSerializer.toAsnItem(s,i,t,a);if(typeof s.context==="number"){if(s.implicit){if(!s.repeated&&(typeof s.type==="number"||isConvertible$1(s.type))){const e={};e.valueHex=o instanceof Null?o.valueBeforeDecodeView:o.valueBlock.toBER();n.push(new Primitive({optional:s.optional,idBlock:{tagClass:3,tagNumber:s.context},...e}))}else{n.push(new Constructed({optional:s.optional,idBlock:{tagClass:3,tagNumber:s.context},value:o.valueBlock.value}))}}else{n.push(new Constructed({optional:s.optional,idBlock:{tagClass:3,tagNumber:s.context},value:[o]}))}}else if(s.repeated){n=n.concat(o)}else{n.push(o)}}}let i;switch(r.type){case AsnTypeTypes.Sequence:i=new Sequence({value:n});break;case AsnTypeTypes.Set:i=new Set$3({value:n});break;case AsnTypeTypes.Choice:if(!n[0]){throw new Error(`Schema '${t.name}' has wrong data. Choice cannot be empty.`)}i=n[0];break}return i}static toAsnItem(e,t,r,n){let i;if(typeof e.type==="number"){const s=e.converter;if(!s){throw new Error(`Property '${t}' doesn't have converter for type ${AsnPropTypes[e.type]} in schema '${r.name}'`)}if(e.repeated){if(!Array.isArray(n)){throw new TypeError("Parameter 'objProp' should be type of Array.")}const t=Array.from(n,(e=>s.toASN(e)));const r=e.repeated==="sequence"?Sequence:Set$3;i=new r({value:t})}else{i=s.toASN(n)}}else{if(e.repeated){if(!Array.isArray(n)){throw new TypeError("Parameter 'objProp' should be type of Array.")}const t=Array.from(n,(e=>this.toASN(e)));const r=e.repeated==="sequence"?Sequence:Set$3;i=new r({value:t})}else{i=this.toASN(n)}}return i}}class AsnArray extends Array{constructor(e=[]){if(typeof e==="number"){super(e)}else{super();for(const t of e){this.push(t)}}}}class AsnConvert{static serialize(e){return AsnSerializer.serialize(e)}static parse(e,t){return AsnParser.parse(e,t)}static toString(e){const t=BufferSourceConverter_1.isBufferSource(e)?BufferSourceConverter_1.toArrayBuffer(e):AsnConvert.serialize(e);const r=fromBER(t);if(r.offset===-1){throw new Error(`Cannot decode ASN.1 data. ${r.result.error}`)}return r.result.toString()}}const es2015=Object.freeze({__proto__:null,AsnProp,AsnType,AsnChoiceType,AsnSequenceType,AsnSetType,get AsnTypeTypes(){return AsnTypeTypes},get AsnPropTypes(){return AsnPropTypes},AsnParser,AsnSerializer,AsnAnyConverter,AsnIntegerConverter,AsnEnumeratedConverter,AsnIntegerArrayBufferConverter:AsnIntegerArrayBufferConverter$1,AsnIntegerBigIntConverter,AsnBitStringConverter,AsnObjectIdentifierConverter,AsnBooleanConverter,AsnOctetStringConverter,AsnConstructedOctetStringConverter,AsnUtf8StringConverter,AsnBmpStringConverter,AsnUniversalStringConverter,AsnNumericStringConverter,AsnPrintableStringConverter,AsnTeletexStringConverter,AsnVideotexStringConverter,AsnIA5StringConverter,AsnGraphicStringConverter,AsnVisibleStringConverter,AsnGeneralStringConverter,AsnCharacterStringConverter,AsnUTCTimeConverter,AsnGeneralizedTimeConverter,AsnNullConverter,defaultConverter,BitString,OctetString,AsnSchemaValidationError,AsnArray,AsnConvert});var ipaddr={exports:{}};(function(e){(function(t){const r="(0?\\d+|0x[a-f0-9]+)";const n={fourOctet:new RegExp(`^${r}\\.${r}\\.${r}\\.${r}$`,"i"),threeOctet:new RegExp(`^${r}\\.${r}\\.${r}$`,"i"),twoOctet:new RegExp(`^${r}\\.${r}$`,"i"),longValue:new RegExp(`^${r}$`,"i")};const i=new RegExp(`^0[0-7]+$`,"i");const s=new RegExp(`^0x[a-f0-9]+$`,"i");const a="%[0-9a-z]{1,}";const o="(?:[0-9a-f]+::?)+";const f={zoneIndex:new RegExp(a,"i"),native:new RegExp(`^(::)?(${o})?([0-9a-f]+)?(::)?(${a})?$`,"i"),deprecatedTransitional:new RegExp(`^(?:::)(${r}\\.${r}\\.${r}\\.${r}(${a})?)$`,"i"),transitional:new RegExp(`^((?:${o})|(?:::)(?:${o})?)${r}\\.${r}\\.${r}\\.${r}(${a})?$`,"i")};function c(e,t){if(e.indexOf("::")!==e.lastIndexOf("::")){return null}let r=0;let n=-1;let i=(e.match(f.zoneIndex)||[])[0];let s,a;if(i){i=i.substring(1);e=e.replace(/%.+$/,"")}while((n=e.indexOf(":",n+1))>=0){r++}if(e.substr(0,2)==="::"){r--}if(e.substr(-2,2)==="::"){r--}if(r>t){return null}a=t-r;s=":";while(a--){s+="0:"}e=e.replace("::",s);if(e[0]===":"){e=e.slice(1)}if(e[e.length-1]===":"){e=e.slice(0,-1)}t=function(){const t=e.split(":");const r=[];for(let e=0;e<t.length;e++){r.push(parseInt(t[e],16))}return r}();return{parts:t,zoneId:i}}function u(e,t,r,n){if(e.length!==t.length){throw new Error("ipaddr: cannot match CIDR for objects with different lengths")}let i=0;let s;while(n>0){s=r-n;if(s<0){s=0}if(e[i]>>s!==t[i]>>s){return false}n-=r;i+=1}return true}function l(e){if(s.test(e)){return parseInt(e,16)}if(e[0]==="0"&&!isNaN(parseInt(e[1],10))){if(i.test(e)){return parseInt(e,8)}throw new Error(`ipaddr: cannot parse ${e} as octal`)}return parseInt(e,10)}function h(e,t){while(e.length<t){e=`0${e}`}return e}const d={};d.IPv4=function(){function e(e){if(e.length!==4){throw new Error("ipaddr: ipv4 octet count should be 4")}let t,r;for(t=0;t<e.length;t++){r=e[t];if(!(0<=r&&r<=255)){throw new Error("ipaddr: ipv4 octet should fit in 8 bits")}}this.octets=e}e.prototype.SpecialRanges={unspecified:[[new e([0,0,0,0]),8]],broadcast:[[new e([255,255,255,255]),32]],multicast:[[new e([224,0,0,0]),4]],linkLocal:[[new e([169,254,0,0]),16]],loopback:[[new e([127,0,0,0]),8]],carrierGradeNat:[[new e([100,64,0,0]),10]],private:[[new e([10,0,0,0]),8],[new e([172,16,0,0]),12],[new e([192,168,0,0]),16]],reserved:[[new e([192,0,0,0]),24],[new e([192,0,2,0]),24],[new e([192,88,99,0]),24],[new e([198,51,100,0]),24],[new e([203,0,113,0]),24],[new e([240,0,0,0]),4]]};e.prototype.kind=function(){return"ipv4"};e.prototype.match=function(e,t){let r;if(t===undefined){r=e;e=r[0];t=r[1]}if(e.kind()!=="ipv4"){throw new Error("ipaddr: cannot match ipv4 address with non-ipv4 one")}return u(this.octets,e.octets,8,t)};e.prototype.prefixLengthFromSubnetMask=function(){let e=0;let t=false;const r={0:8,128:7,192:6,224:5,240:4,248:3,252:2,254:1,255:0};let n,i,s;for(n=3;n>=0;n-=1){i=this.octets[n];if(i in r){s=r[i];if(t&&s!==0){return null}if(s!==8){t=true}e+=s}else{return null}}return 32-e};e.prototype.range=function(){return d.subnetMatch(this,this.SpecialRanges)};e.prototype.toByteArray=function(){return this.octets.slice(0)};e.prototype.toIPv4MappedAddress=function(){return d.IPv6.parse(`::ffff:${this.toString()}`)};e.prototype.toNormalizedString=function(){return this.toString()};e.prototype.toString=function(){return this.octets.join(".")};return e}();d.IPv4.broadcastAddressFromCIDR=function(e){try{const t=this.parseCIDR(e);const r=t[0].toByteArray();const n=this.subnetMaskFromPrefixLength(t[1]).toByteArray();const i=[];let s=0;while(s<4){i.push(parseInt(r[s],10)|parseInt(n[s],10)^255);s++}return new this(i)}catch(e){throw new Error("ipaddr: the address does not have IPv4 CIDR format")}};d.IPv4.isIPv4=function(e){return this.parser(e)!==null};d.IPv4.isValid=function(e){try{new this(this.parser(e));return true}catch(e){return false}};d.IPv4.isValidFourPartDecimal=function(e){if(d.IPv4.isValid(e)&&e.match(/^(0|[1-9]\d*)(\.(0|[1-9]\d*)){3}$/)){return true}else{return false}};d.IPv4.networkAddressFromCIDR=function(e){let t,r,n,i,s;try{t=this.parseCIDR(e);n=t[0].toByteArray();s=this.subnetMaskFromPrefixLength(t[1]).toByteArray();i=[];r=0;while(r<4){i.push(parseInt(n[r],10)&parseInt(s[r],10));r++}return new this(i)}catch(e){throw new Error("ipaddr: the address does not have IPv4 CIDR format")}};d.IPv4.parse=function(e){const t=this.parser(e);if(t===null){throw new Error("ipaddr: string is not formatted like an IPv4 Address")}return new this(t)};d.IPv4.parseCIDR=function(e){let t;if(t=e.match(/^(.+)\/(\d+)$/)){const e=parseInt(t[2]);if(e>=0&&e<=32){const r=[this.parse(t[1]),e];Object.defineProperty(r,"toString",{value:function(){return this.join("/")}});return r}}throw new Error("ipaddr: string is not formatted like an IPv4 CIDR range")};d.IPv4.parser=function(e){let t,r,i;if(t=e.match(n.fourOctet)){return function(){const e=t.slice(1,6);const n=[];for(let t=0;t<e.length;t++){r=e[t];n.push(l(r))}return n}()}else if(t=e.match(n.longValue)){i=l(t[1]);if(i>4294967295||i<0){throw new Error("ipaddr: address outside defined range")}return function(){const e=[];let t;for(t=0;t<=24;t+=8){e.push(i>>t&255)}return e}().reverse()}else if(t=e.match(n.twoOctet)){return function(){const e=t.slice(1,4);const r=[];i=l(e[1]);if(i>16777215||i<0){throw new Error("ipaddr: address outside defined range")}r.push(l(e[0]));r.push(i>>16&255);r.push(i>>8&255);r.push(i&255);return r}()}else if(t=e.match(n.threeOctet)){return function(){const e=t.slice(1,5);const r=[];i=l(e[2]);if(i>65535||i<0){throw new Error("ipaddr: address outside defined range")}r.push(l(e[0]));r.push(l(e[1]));r.push(i>>8&255);r.push(i&255);return r}()}else{return null}};d.IPv4.subnetMaskFromPrefixLength=function(e){e=parseInt(e);if(e<0||e>32){throw new Error("ipaddr: invalid IPv4 prefix length")}const t=[0,0,0,0];let r=0;const n=Math.floor(e/8);while(r<n){t[r]=255;r++}if(n<4){t[n]=Math.pow(2,e%8)-1<<8-e%8}return new this(t)};d.IPv6=function(){function e(e,t){let r,n;if(e.length===16){this.parts=[];for(r=0;r<=14;r+=2){this.parts.push(e[r]<<8|e[r+1])}}else if(e.length===8){this.parts=e}else{throw new Error("ipaddr: ipv6 part count should be 8 or 16")}for(r=0;r<this.parts.length;r++){n=this.parts[r];if(!(0<=n&&n<=65535)){throw new Error("ipaddr: ipv6 part should fit in 16 bits")}}if(t){this.zoneId=t}}e.prototype.SpecialRanges={unspecified:[new e([0,0,0,0,0,0,0,0]),128],linkLocal:[new e([65152,0,0,0,0,0,0,0]),10],multicast:[new e([65280,0,0,0,0,0,0,0]),8],loopback:[new e([0,0,0,0,0,0,0,1]),128],uniqueLocal:[new e([64512,0,0,0,0,0,0,0]),7],ipv4Mapped:[new e([0,0,0,0,0,65535,0,0]),96],rfc6145:[new e([0,0,0,0,65535,0,0,0]),96],rfc6052:[new e([100,65435,0,0,0,0,0,0]),96],"6to4":[new e([8194,0,0,0,0,0,0,0]),16],teredo:[new e([8193,0,0,0,0,0,0,0]),32],reserved:[[new e([8193,3512,0,0,0,0,0,0]),32]]};e.prototype.isIPv4MappedAddress=function(){return this.range()==="ipv4Mapped"};e.prototype.kind=function(){return"ipv6"};e.prototype.match=function(e,t){let r;if(t===undefined){r=e;e=r[0];t=r[1]}if(e.kind()!=="ipv6"){throw new Error("ipaddr: cannot match ipv6 address with non-ipv6 one")}return u(this.parts,e.parts,16,t)};e.prototype.prefixLengthFromSubnetMask=function(){let e=0;let t=false;const r={0:16,32768:15,49152:14,57344:13,61440:12,63488:11,64512:10,65024:9,65280:8,65408:7,65472:6,65504:5,65520:4,65528:3,65532:2,65534:1,65535:0};let n,i;for(let s=7;s>=0;s-=1){n=this.parts[s];if(n in r){i=r[n];if(t&&i!==0){return null}if(i!==16){t=true}e+=i}else{return null}}return 128-e};e.prototype.range=function(){return d.subnetMatch(this,this.SpecialRanges)};e.prototype.toByteArray=function(){let e;const t=[];const r=this.parts;for(let n=0;n<r.length;n++){e=r[n];t.push(e>>8);t.push(e&255)}return t};e.prototype.toFixedLengthString=function(){const e=function(){const e=[];for(let t=0;t<this.parts.length;t++){e.push(h(this.parts[t].toString(16),4))}return e}.call(this).join(":");let t="";if(this.zoneId){t=`%${this.zoneId}`}return e+t};e.prototype.toIPv4Address=function(){if(!this.isIPv4MappedAddress()){throw new Error("ipaddr: trying to convert a generic ipv6 address to ipv4")}const e=this.parts.slice(-2);const t=e[0];const r=e[1];return new d.IPv4([t>>8,t&255,r>>8,r&255])};e.prototype.toNormalizedString=function(){const e=function(){const e=[];for(let t=0;t<this.parts.length;t++){e.push(this.parts[t].toString(16))}return e}.call(this).join(":");let t="";if(this.zoneId){t=`%${this.zoneId}`}return e+t};e.prototype.toRFC5952String=function(){const e=/((^|:)(0(:|$)){2,})/g;const t=this.toNormalizedString();let r=0;let n=-1;let i;while(i=e.exec(t)){if(i[0].length>n){r=i.index;n=i[0].length}}if(n<0){return t}return`${t.substring(0,r)}::${t.substring(r+n)}`};e.prototype.toString=function(){return this.toNormalizedString().replace(/((^|:)(0(:|$))+)/,"::")};return e}();d.IPv6.broadcastAddressFromCIDR=function(e){try{const t=this.parseCIDR(e);const r=t[0].toByteArray();const n=this.subnetMaskFromPrefixLength(t[1]).toByteArray();const i=[];let s=0;while(s<16){i.push(parseInt(r[s],10)|parseInt(n[s],10)^255);s++}return new this(i)}catch(e){throw new Error(`ipaddr: the address does not have IPv6 CIDR format (${e})`)}};d.IPv6.isIPv6=function(e){return this.parser(e)!==null};d.IPv6.isValid=function(e){if(typeof e==="string"&&e.indexOf(":")===-1){return false}try{const t=this.parser(e);new this(t.parts,t.zoneId);return true}catch(e){return false}};d.IPv6.networkAddressFromCIDR=function(e){let t,r,n,i,s;try{t=this.parseCIDR(e);n=t[0].toByteArray();s=this.subnetMaskFromPrefixLength(t[1]).toByteArray();i=[];r=0;while(r<16){i.push(parseInt(n[r],10)&parseInt(s[r],10));r++}return new this(i)}catch(e){throw new Error(`ipaddr: the address does not have IPv6 CIDR format (${e})`)}};d.IPv6.parse=function(e){const t=this.parser(e);if(t.parts===null){throw new Error("ipaddr: string is not formatted like an IPv6 Address")}return new this(t.parts,t.zoneId)};d.IPv6.parseCIDR=function(e){let t,r,n;if(r=e.match(/^(.+)\/(\d+)$/)){t=parseInt(r[2]);if(t>=0&&t<=128){n=[this.parse(r[1]),t];Object.defineProperty(n,"toString",{value:function(){return this.join("/")}});return n}}throw new Error("ipaddr: string is not formatted like an IPv6 CIDR range")};d.IPv6.parser=function(e){let t,r,n,i,s,a;if(n=e.match(f.deprecatedTransitional)){return this.parser(`::ffff:${n[1]}`)}if(f.native.test(e)){return c(e,8)}if(n=e.match(f.transitional)){a=n[6]||"";t=c(n[1].slice(0,-1)+a,6);if(t.parts){s=[parseInt(n[2]),parseInt(n[3]),parseInt(n[4]),parseInt(n[5])];for(r=0;r<s.length;r++){i=s[r];if(!(0<=i&&i<=255)){return null}}t.parts.push(s[0]<<8|s[1]);t.parts.push(s[2]<<8|s[3]);return{parts:t.parts,zoneId:t.zoneId}}}return null};d.IPv6.subnetMaskFromPrefixLength=function(e){e=parseInt(e);if(e<0||e>128){throw new Error("ipaddr: invalid IPv6 prefix length")}const t=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];let r=0;const n=Math.floor(e/8);while(r<n){t[r]=255;r++}if(n<16){t[n]=Math.pow(2,e%8)-1<<8-e%8}return new this(t)};d.fromByteArray=function(e){const t=e.length;if(t===4){return new d.IPv4(e)}else if(t===16){return new d.IPv6(e)}else{throw new Error("ipaddr: the binary input is neither an IPv6 nor IPv4 address")}};d.isValid=function(e){return d.IPv6.isValid(e)||d.IPv4.isValid(e)};d.parse=function(e){if(d.IPv6.isValid(e)){return d.IPv6.parse(e)}else if(d.IPv4.isValid(e)){return d.IPv4.parse(e)}else{throw new Error("ipaddr: the address has neither IPv6 nor IPv4 format")}};d.parseCIDR=function(e){try{return d.IPv6.parseCIDR(e)}catch(t){try{return d.IPv4.parseCIDR(e)}catch(e){throw new Error("ipaddr: the address has neither IPv6 nor IPv4 CIDR format")}}};d.process=function(e){const t=this.parse(e);if(t.kind()==="ipv6"&&t.isIPv4MappedAddress()){return t.toIPv4Address()}else{return t}};d.subnetMatch=function(e,t,r){let n,i,s,a;if(r===undefined||r===null){r="unicast"}for(i in t){if(Object.prototype.hasOwnProperty.call(t,i)){s=t[i];if(s[0]&&!(s[0]instanceof Array)){s=[s]}for(n=0;n<s.length;n++){a=s[n];if(e.kind()===a[0].kind()&&e.match.apply(e,a)){return i}}}}return r};if(e.exports){e.exports=d}else{t.ipaddr=d}})(commonjsGlobal)})(ipaddr);class IpConverter{static decodeIP(e){if(e.length===64&&parseInt(e,16)===0){return"::/0"}if(e.length!==16){return e}const t=parseInt(e.slice(8),16).toString(2).split("").reduce(((e,t)=>e+ +t),0);let r=e.slice(0,8).replace(/(.{2})/g,(e=>`${parseInt(e,16)}.`));r=r.slice(0,-1);return`${r}/${t}`}static toString(e){if(e.byteLength===4||e.byteLength===16){const t=new Uint8Array(e);const r=ipaddr.exports.fromByteArray(Array.from(t));return r.toString()}return this.decodeIP(Convert_1.ToHex(e))}static fromString(e){const t=ipaddr.exports.parse(e);return new Uint8Array(t.toByteArray()).buffer}}var RelativeDistinguishedName_1,RDNSequence_1,Name_1;let DirectoryString=class e{constructor(e={}){Object.assign(this,e)}toString(){return this.bmpString||this.printableString||this.teletexString||this.universalString||this.utf8String||""}};__decorate([AsnProp({type:AsnPropTypes.TeletexString})],DirectoryString.prototype,"teletexString",void 0);__decorate([AsnProp({type:AsnPropTypes.PrintableString})],DirectoryString.prototype,"printableString",void 0);__decorate([AsnProp({type:AsnPropTypes.UniversalString})],DirectoryString.prototype,"universalString",void 0);__decorate([AsnProp({type:AsnPropTypes.Utf8String})],DirectoryString.prototype,"utf8String",void 0);__decorate([AsnProp({type:AsnPropTypes.BmpString})],DirectoryString.prototype,"bmpString",void 0);DirectoryString=__decorate([AsnType({type:AsnTypeTypes.Choice})],DirectoryString);let AttributeValue=class e extends DirectoryString{constructor(e={}){super(e);Object.assign(this,e)}toString(){return this.ia5String||(this.anyValue?Convert_1.ToHex(this.anyValue):super.toString())}};__decorate([AsnProp({type:AsnPropTypes.IA5String})],AttributeValue.prototype,"ia5String",void 0);__decorate([AsnProp({type:AsnPropTypes.Any})],AttributeValue.prototype,"anyValue",void 0);AttributeValue=__decorate([AsnType({type:AsnTypeTypes.Choice})],AttributeValue);class AttributeTypeAndValue{constructor(e={}){this.type="";this.value=new AttributeValue;Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],AttributeTypeAndValue.prototype,"type",void 0);__decorate([AsnProp({type:AttributeValue})],AttributeTypeAndValue.prototype,"value",void 0);let RelativeDistinguishedName=RelativeDistinguishedName_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,RelativeDistinguishedName_1.prototype)}};RelativeDistinguishedName=RelativeDistinguishedName_1=__decorate([AsnType({type:AsnTypeTypes.Set,itemType:AttributeTypeAndValue})],RelativeDistinguishedName);let RDNSequence=RDNSequence_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,RDNSequence_1.prototype)}};RDNSequence=RDNSequence_1=__decorate([AsnType({type:AsnTypeTypes.Sequence,itemType:RelativeDistinguishedName})],RDNSequence);let Name$1=Name_1=class e extends RDNSequence{constructor(e){super(e);Object.setPrototypeOf(this,Name_1.prototype)}};Name$1=Name_1=__decorate([AsnType({type:AsnTypeTypes.Sequence})],Name$1);const AsnIpConverter={fromASN:e=>IpConverter.toString(AsnOctetStringConverter.fromASN(e)),toASN:e=>AsnOctetStringConverter.toASN(IpConverter.fromString(e))};class OtherName{constructor(e={}){this.typeId="";this.value=new ArrayBuffer(0);Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],OtherName.prototype,"typeId",void 0);__decorate([AsnProp({type:AsnPropTypes.Any,context:0})],OtherName.prototype,"value",void 0);class EDIPartyName{constructor(e={}){this.partyName=new ArrayBuffer(0);Object.assign(this,e)}}__decorate([AsnProp({type:DirectoryString,optional:true,context:0,implicit:true})],EDIPartyName.prototype,"nameAssigner",void 0);__decorate([AsnProp({type:DirectoryString,context:1,implicit:true})],EDIPartyName.prototype,"partyName",void 0);let GeneralName$1=class e{constructor(e={}){Object.assign(this,e)}};__decorate([AsnProp({type:OtherName,context:0,implicit:true})],GeneralName$1.prototype,"otherName",void 0);__decorate([AsnProp({type:AsnPropTypes.IA5String,context:1,implicit:true})],GeneralName$1.prototype,"rfc822Name",void 0);__decorate([AsnProp({type:AsnPropTypes.IA5String,context:2,implicit:true})],GeneralName$1.prototype,"dNSName",void 0);__decorate([AsnProp({type:AsnPropTypes.Any,context:3,implicit:true})],GeneralName$1.prototype,"x400Address",void 0);__decorate([AsnProp({type:Name$1,context:4,implicit:false})],GeneralName$1.prototype,"directoryName",void 0);__decorate([AsnProp({type:EDIPartyName,context:5})],GeneralName$1.prototype,"ediPartyName",void 0);__decorate([AsnProp({type:AsnPropTypes.IA5String,context:6,implicit:true})],GeneralName$1.prototype,"uniformResourceIdentifier",void 0);__decorate([AsnProp({type:AsnPropTypes.OctetString,context:7,implicit:true,converter:AsnIpConverter})],GeneralName$1.prototype,"iPAddress",void 0);__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier,context:8,implicit:true})],GeneralName$1.prototype,"registeredID",void 0);GeneralName$1=__decorate([AsnType({type:AsnTypeTypes.Choice})],GeneralName$1);const id_pkix="1.3.6.1.5.5.7";const id_kp=`${id_pkix}.3`;const id_ce="2.5.29";var AuthorityInfoAccessSyntax_1;class AccessDescription{constructor(e={}){this.accessMethod="";this.accessLocation=new GeneralName$1;Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],AccessDescription.prototype,"accessMethod",void 0);__decorate([AsnProp({type:GeneralName$1})],AccessDescription.prototype,"accessLocation",void 0);let AuthorityInfoAccessSyntax=AuthorityInfoAccessSyntax_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,AuthorityInfoAccessSyntax_1.prototype)}};AuthorityInfoAccessSyntax=AuthorityInfoAccessSyntax_1=__decorate([AsnType({type:AsnTypeTypes.Sequence,itemType:AccessDescription})],AuthorityInfoAccessSyntax);const id_ce_authorityKeyIdentifier=`${id_ce}.35`;class KeyIdentifier extends OctetString{}class AuthorityKeyIdentifier{constructor(e={}){if(e){Object.assign(this,e)}}}__decorate([AsnProp({type:KeyIdentifier,context:0,optional:true,implicit:true})],AuthorityKeyIdentifier.prototype,"keyIdentifier",void 0);__decorate([AsnProp({type:GeneralName$1,context:1,optional:true,implicit:true,repeated:"sequence"})],AuthorityKeyIdentifier.prototype,"authorityCertIssuer",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,context:2,optional:true,implicit:true,converter:AsnIntegerArrayBufferConverter$1})],AuthorityKeyIdentifier.prototype,"authorityCertSerialNumber",void 0);const id_ce_basicConstraints=`${id_ce}.19`;class BasicConstraints{constructor(e={}){this.cA=false;Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.Boolean,defaultValue:false})],BasicConstraints.prototype,"cA",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,optional:true})],BasicConstraints.prototype,"pathLenConstraint",void 0);var GeneralNames_1;let GeneralNames$1=GeneralNames_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,GeneralNames_1.prototype)}};GeneralNames$1=GeneralNames_1=__decorate([AsnType({type:AsnTypeTypes.Sequence,itemType:GeneralName$1})],GeneralNames$1);var CertificateIssuer_1;let CertificateIssuer=CertificateIssuer_1=class e extends GeneralNames$1{constructor(e){super(e);Object.setPrototypeOf(this,CertificateIssuer_1.prototype)}};CertificateIssuer=CertificateIssuer_1=__decorate([AsnType({type:AsnTypeTypes.Sequence})],CertificateIssuer);var CertificatePolicies_1;const id_ce_certificatePolicies=`${id_ce}.32`;let DisplayText=class e{constructor(e={}){Object.assign(this,e)}toString(){return this.ia5String||this.visibleString||this.bmpString||this.utf8String||""}};__decorate([AsnProp({type:AsnPropTypes.IA5String})],DisplayText.prototype,"ia5String",void 0);__decorate([AsnProp({type:AsnPropTypes.VisibleString})],DisplayText.prototype,"visibleString",void 0);__decorate([AsnProp({type:AsnPropTypes.BmpString})],DisplayText.prototype,"bmpString",void 0);__decorate([AsnProp({type:AsnPropTypes.Utf8String})],DisplayText.prototype,"utf8String",void 0);DisplayText=__decorate([AsnType({type:AsnTypeTypes.Choice})],DisplayText);class NoticeReference{constructor(e={}){this.organization=new DisplayText;this.noticeNumbers=[];Object.assign(this,e)}}__decorate([AsnProp({type:DisplayText})],NoticeReference.prototype,"organization",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,repeated:"sequence"})],NoticeReference.prototype,"noticeNumbers",void 0);class UserNotice{constructor(e={}){Object.assign(this,e)}}__decorate([AsnProp({type:NoticeReference,optional:true})],UserNotice.prototype,"noticeRef",void 0);__decorate([AsnProp({type:DisplayText,optional:true})],UserNotice.prototype,"explicitText",void 0);let Qualifier=class e{constructor(e={}){Object.assign(this,e)}};__decorate([AsnProp({type:AsnPropTypes.IA5String})],Qualifier.prototype,"cPSuri",void 0);__decorate([AsnProp({type:UserNotice})],Qualifier.prototype,"userNotice",void 0);Qualifier=__decorate([AsnType({type:AsnTypeTypes.Choice})],Qualifier);class PolicyQualifierInfo{constructor(e={}){this.policyQualifierId="";this.qualifier=new ArrayBuffer(0);Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],PolicyQualifierInfo.prototype,"policyQualifierId",void 0);__decorate([AsnProp({type:AsnPropTypes.Any})],PolicyQualifierInfo.prototype,"qualifier",void 0);class PolicyInformation{constructor(e={}){this.policyIdentifier="";Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],PolicyInformation.prototype,"policyIdentifier",void 0);__decorate([AsnProp({type:PolicyQualifierInfo,repeated:"sequence",optional:true})],PolicyInformation.prototype,"policyQualifiers",void 0);let CertificatePolicies=CertificatePolicies_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,CertificatePolicies_1.prototype)}};CertificatePolicies=CertificatePolicies_1=__decorate([AsnType({type:AsnTypeTypes.Sequence,itemType:PolicyInformation})],CertificatePolicies);let CRLNumber=class e{constructor(e=0){this.value=e}};__decorate([AsnProp({type:AsnPropTypes.Integer})],CRLNumber.prototype,"value",void 0);CRLNumber=__decorate([AsnType({type:AsnTypeTypes.Choice})],CRLNumber);let BaseCRLNumber=class e extends CRLNumber{};BaseCRLNumber=__decorate([AsnType({type:AsnTypeTypes.Choice})],BaseCRLNumber);var CRLDistributionPoints_1;var ReasonFlags;(function(e){e[e["unused"]=1]="unused";e[e["keyCompromise"]=2]="keyCompromise";e[e["cACompromise"]=4]="cACompromise";e[e["affiliationChanged"]=8]="affiliationChanged";e[e["superseded"]=16]="superseded";e[e["cessationOfOperation"]=32]="cessationOfOperation";e[e["certificateHold"]=64]="certificateHold";e[e["privilegeWithdrawn"]=128]="privilegeWithdrawn";e[e["aACompromise"]=256]="aACompromise"})(ReasonFlags||(ReasonFlags={}));class Reason extends BitString{toJSON(){const e=[];const t=this.toNumber();if(t&ReasonFlags.aACompromise){e.push("aACompromise")}if(t&ReasonFlags.affiliationChanged){e.push("affiliationChanged")}if(t&ReasonFlags.cACompromise){e.push("cACompromise")}if(t&ReasonFlags.certificateHold){e.push("certificateHold")}if(t&ReasonFlags.cessationOfOperation){e.push("cessationOfOperation")}if(t&ReasonFlags.keyCompromise){e.push("keyCompromise")}if(t&ReasonFlags.privilegeWithdrawn){e.push("privilegeWithdrawn")}if(t&ReasonFlags.superseded){e.push("superseded")}if(t&ReasonFlags.unused){e.push("unused")}return e}toString(){return`[${this.toJSON().join(", ")}]`}}let DistributionPointName=class e{constructor(e={}){Object.assign(this,e)}};__decorate([AsnProp({type:GeneralName$1,context:0,repeated:"sequence",implicit:true})],DistributionPointName.prototype,"fullName",void 0);__decorate([AsnProp({type:RelativeDistinguishedName,context:1,implicit:true})],DistributionPointName.prototype,"nameRelativeToCRLIssuer",void 0);DistributionPointName=__decorate([AsnType({type:AsnTypeTypes.Choice})],DistributionPointName);class DistributionPoint{constructor(e={}){Object.assign(this,e)}}__decorate([AsnProp({type:DistributionPointName,context:0,optional:true})],DistributionPoint.prototype,"distributionPoint",void 0);__decorate([AsnProp({type:Reason,context:1,optional:true,implicit:true})],DistributionPoint.prototype,"reasons",void 0);__decorate([AsnProp({type:GeneralName$1,context:2,optional:true,repeated:"sequence",implicit:true})],DistributionPoint.prototype,"cRLIssuer",void 0);let CRLDistributionPoints=CRLDistributionPoints_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,CRLDistributionPoints_1.prototype)}};CRLDistributionPoints=CRLDistributionPoints_1=__decorate([AsnType({type:AsnTypeTypes.Sequence,itemType:DistributionPoint})],CRLDistributionPoints);var FreshestCRL_1;let FreshestCRL=FreshestCRL_1=class e extends CRLDistributionPoints{constructor(e){super(e);Object.setPrototypeOf(this,FreshestCRL_1.prototype)}};FreshestCRL=FreshestCRL_1=__decorate([AsnType({type:AsnTypeTypes.Sequence,itemType:DistributionPoint})],FreshestCRL);class IssuingDistributionPoint{constructor(e={}){this.onlyContainsUserCerts=IssuingDistributionPoint.ONLY;this.onlyContainsCACerts=IssuingDistributionPoint.ONLY;this.indirectCRL=IssuingDistributionPoint.ONLY;this.onlyContainsAttributeCerts=IssuingDistributionPoint.ONLY;Object.assign(this,e)}}IssuingDistributionPoint.ONLY=false;__decorate([AsnProp({type:DistributionPointName,context:0,optional:true})],IssuingDistributionPoint.prototype,"distributionPoint",void 0);__decorate([AsnProp({type:AsnPropTypes.Boolean,context:1,defaultValue:IssuingDistributionPoint.ONLY,implicit:true})],IssuingDistributionPoint.prototype,"onlyContainsUserCerts",void 0);__decorate([AsnProp({type:AsnPropTypes.Boolean,context:2,defaultValue:IssuingDistributionPoint.ONLY,implicit:true})],IssuingDistributionPoint.prototype,"onlyContainsCACerts",void 0);__decorate([AsnProp({type:Reason,context:3,optional:true,implicit:true})],IssuingDistributionPoint.prototype,"onlySomeReasons",void 0);__decorate([AsnProp({type:AsnPropTypes.Boolean,context:4,defaultValue:IssuingDistributionPoint.ONLY,implicit:true})],IssuingDistributionPoint.prototype,"indirectCRL",void 0);__decorate([AsnProp({type:AsnPropTypes.Boolean,context:5,defaultValue:IssuingDistributionPoint.ONLY,implicit:true})],IssuingDistributionPoint.prototype,"onlyContainsAttributeCerts",void 0);var CRLReasons;(function(e){e[e["unspecified"]=0]="unspecified";e[e["keyCompromise"]=1]="keyCompromise";e[e["cACompromise"]=2]="cACompromise";e[e["affiliationChanged"]=3]="affiliationChanged";e[e["superseded"]=4]="superseded";e[e["cessationOfOperation"]=5]="cessationOfOperation";e[e["certificateHold"]=6]="certificateHold";e[e["removeFromCRL"]=8]="removeFromCRL";e[e["privilegeWithdrawn"]=9]="privilegeWithdrawn";e[e["aACompromise"]=10]="aACompromise"})(CRLReasons||(CRLReasons={}));let CRLReason=class e{constructor(e=CRLReasons.unspecified){this.reason=CRLReasons.unspecified;this.reason=e}toJSON(){return CRLReasons[this.reason]}toString(){return this.toJSON()}};__decorate([AsnProp({type:AsnPropTypes.Enumerated})],CRLReason.prototype,"reason",void 0);CRLReason=__decorate([AsnType({type:AsnTypeTypes.Choice})],CRLReason);var ExtendedKeyUsage_1;const id_ce_extKeyUsage=`${id_ce}.37`;let ExtendedKeyUsage$1=ExtendedKeyUsage_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,ExtendedKeyUsage_1.prototype)}};ExtendedKeyUsage$1=ExtendedKeyUsage_1=__decorate([AsnType({type:AsnTypeTypes.Sequence,itemType:AsnPropTypes.ObjectIdentifier})],ExtendedKeyUsage$1);const id_kp_serverAuth=`${id_kp}.1`;const id_kp_clientAuth=`${id_kp}.2`;const id_kp_codeSigning=`${id_kp}.3`;const id_kp_emailProtection=`${id_kp}.4`;const id_kp_timeStamping=`${id_kp}.8`;const id_kp_OCSPSigning=`${id_kp}.9`;let InhibitAnyPolicy=class e{constructor(e=new ArrayBuffer(0)){this.value=e}};__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter$1})],InhibitAnyPolicy.prototype,"value",void 0);InhibitAnyPolicy=__decorate([AsnType({type:AsnTypeTypes.Choice})],InhibitAnyPolicy);let InvalidityDate=class e{constructor(e){this.value=new Date;if(e){this.value=e}}};__decorate([AsnProp({type:AsnPropTypes.GeneralizedTime})],InvalidityDate.prototype,"value",void 0);InvalidityDate=__decorate([AsnType({type:AsnTypeTypes.Choice})],InvalidityDate);var IssueAlternativeName_1;let IssueAlternativeName=IssueAlternativeName_1=class e extends GeneralNames$1{constructor(e){super(e);Object.setPrototypeOf(this,IssueAlternativeName_1.prototype)}};IssueAlternativeName=IssueAlternativeName_1=__decorate([AsnType({type:AsnTypeTypes.Sequence})],IssueAlternativeName);const id_ce_keyUsage=`${id_ce}.15`;var KeyUsageFlags$1;(function(e){e[e["digitalSignature"]=1]="digitalSignature";e[e["nonRepudiation"]=2]="nonRepudiation";e[e["keyEncipherment"]=4]="keyEncipherment";e[e["dataEncipherment"]=8]="dataEncipherment";e[e["keyAgreement"]=16]="keyAgreement";e[e["keyCertSign"]=32]="keyCertSign";e[e["cRLSign"]=64]="cRLSign";e[e["encipherOnly"]=128]="encipherOnly";e[e["decipherOnly"]=256]="decipherOnly"})(KeyUsageFlags$1||(KeyUsageFlags$1={}));class KeyUsage extends BitString{toJSON(){const e=this.toNumber();const t=[];if(e&KeyUsageFlags$1.cRLSign){t.push("crlSign")}if(e&KeyUsageFlags$1.dataEncipherment){t.push("dataEncipherment")}if(e&KeyUsageFlags$1.decipherOnly){t.push("decipherOnly")}if(e&KeyUsageFlags$1.digitalSignature){t.push("digitalSignature")}if(e&KeyUsageFlags$1.encipherOnly){t.push("encipherOnly")}if(e&KeyUsageFlags$1.keyAgreement){t.push("keyAgreement")}if(e&KeyUsageFlags$1.keyCertSign){t.push("keyCertSign")}if(e&KeyUsageFlags$1.keyEncipherment){t.push("keyEncipherment")}if(e&KeyUsageFlags$1.nonRepudiation){t.push("nonRepudiation")}return t}toString(){return`[${this.toJSON().join(", ")}]`}}var GeneralSubtrees_1;class GeneralSubtree{constructor(e={}){this.base=new GeneralName$1;this.minimum=0;Object.assign(this,e)}}__decorate([AsnProp({type:GeneralName$1})],GeneralSubtree.prototype,"base",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,context:0,defaultValue:0,implicit:true})],GeneralSubtree.prototype,"minimum",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,context:1,optional:true,implicit:true})],GeneralSubtree.prototype,"maximum",void 0);let GeneralSubtrees=GeneralSubtrees_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,GeneralSubtrees_1.prototype)}};GeneralSubtrees=GeneralSubtrees_1=__decorate([AsnType({type:AsnTypeTypes.Sequence,itemType:GeneralSubtree})],GeneralSubtrees);class NameConstraints{constructor(e={}){Object.assign(this,e)}}__decorate([AsnProp({type:GeneralSubtrees,context:0,optional:true,implicit:true})],NameConstraints.prototype,"permittedSubtrees",void 0);__decorate([AsnProp({type:GeneralSubtrees,context:1,optional:true,implicit:true})],NameConstraints.prototype,"excludedSubtrees",void 0);class PolicyConstraints{constructor(e={}){Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.Integer,context:0,implicit:true,optional:true,converter:AsnIntegerArrayBufferConverter$1})],PolicyConstraints.prototype,"requireExplicitPolicy",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,context:1,implicit:true,optional:true,converter:AsnIntegerArrayBufferConverter$1})],PolicyConstraints.prototype,"inhibitPolicyMapping",void 0);var PolicyMappings_1;class PolicyMapping{constructor(e={}){this.issuerDomainPolicy="";this.subjectDomainPolicy="";Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],PolicyMapping.prototype,"issuerDomainPolicy",void 0);__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],PolicyMapping.prototype,"subjectDomainPolicy",void 0);let PolicyMappings=PolicyMappings_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,PolicyMappings_1.prototype)}};PolicyMappings=PolicyMappings_1=__decorate([AsnType({type:AsnTypeTypes.Sequence,itemType:PolicyMapping})],PolicyMappings);var SubjectAlternativeName_1;const id_ce_subjectAltName=`${id_ce}.17`;let SubjectAlternativeName=SubjectAlternativeName_1=class e extends GeneralNames$1{constructor(e){super(e);Object.setPrototypeOf(this,SubjectAlternativeName_1.prototype)}};SubjectAlternativeName=SubjectAlternativeName_1=__decorate([AsnType({type:AsnTypeTypes.Sequence})],SubjectAlternativeName);class Attribute$2{constructor(e={}){this.type="";this.values=[];Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],Attribute$2.prototype,"type",void 0);__decorate([AsnProp({type:AsnPropTypes.Any,repeated:"set"})],Attribute$2.prototype,"values",void 0);var SubjectDirectoryAttributes_1;let SubjectDirectoryAttributes=SubjectDirectoryAttributes_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,SubjectDirectoryAttributes_1.prototype)}};SubjectDirectoryAttributes=SubjectDirectoryAttributes_1=__decorate([AsnType({type:AsnTypeTypes.Sequence,itemType:Attribute$2})],SubjectDirectoryAttributes);const id_ce_subjectKeyIdentifier=`${id_ce}.14`;class SubjectKeyIdentifier extends KeyIdentifier{}class PrivateKeyUsagePeriod{constructor(e={}){Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.GeneralizedTime,context:0,implicit:true,optional:true})],PrivateKeyUsagePeriod.prototype,"notBefore",void 0);__decorate([AsnProp({type:AsnPropTypes.GeneralizedTime,context:1,implicit:true,optional:true})],PrivateKeyUsagePeriod.prototype,"notAfter",void 0);var EntrustInfoFlags;(function(e){e[e["keyUpdateAllowed"]=1]="keyUpdateAllowed";e[e["newExtensions"]=2]="newExtensions";e[e["pKIXCertificate"]=4]="pKIXCertificate"})(EntrustInfoFlags||(EntrustInfoFlags={}));class EntrustInfo extends BitString{toJSON(){const e=[];const t=this.toNumber();if(t&EntrustInfoFlags.pKIXCertificate){e.push("pKIXCertificate")}if(t&EntrustInfoFlags.newExtensions){e.push("newExtensions")}if(t&EntrustInfoFlags.keyUpdateAllowed){e.push("keyUpdateAllowed")}return e}toString(){return`[${this.toJSON().join(", ")}]`}}class EntrustVersionInfo{constructor(e={}){this.entrustVers="";this.entrustInfoFlags=new EntrustInfo;Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.GeneralString})],EntrustVersionInfo.prototype,"entrustVers",void 0);__decorate([AsnProp({type:EntrustInfo})],EntrustVersionInfo.prototype,"entrustInfoFlags",void 0);var SubjectInfoAccessSyntax_1;let SubjectInfoAccessSyntax=SubjectInfoAccessSyntax_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,SubjectInfoAccessSyntax_1.prototype)}};SubjectInfoAccessSyntax=SubjectInfoAccessSyntax_1=__decorate([AsnType({type:AsnTypeTypes.Sequence,itemType:AccessDescription})],SubjectInfoAccessSyntax);class AlgorithmIdentifier$1{constructor(e={}){this.algorithm="";Object.assign(this,e)}isEqual(e){return e instanceof AlgorithmIdentifier$1&&e.algorithm==this.algorithm&&(e.parameters&&this.parameters&&isEqual_1$1(e.parameters,this.parameters)||e.parameters===this.parameters)}}__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],AlgorithmIdentifier$1.prototype,"algorithm",void 0);__decorate([AsnProp({type:AsnPropTypes.Any,optional:true})],AlgorithmIdentifier$1.prototype,"parameters",void 0);class SubjectPublicKeyInfo{constructor(e={}){this.algorithm=new AlgorithmIdentifier$1;this.subjectPublicKey=new ArrayBuffer(0);Object.assign(this,e)}}__decorate([AsnProp({type:AlgorithmIdentifier$1})],SubjectPublicKeyInfo.prototype,"algorithm",void 0);__decorate([AsnProp({type:AsnPropTypes.BitString})],SubjectPublicKeyInfo.prototype,"subjectPublicKey",void 0);let Time=class e{constructor(e){if(e){if(typeof e==="string"||typeof e==="number"||e instanceof Date){const t=new Date(e);if(t.getUTCFullYear()>2049){this.generalTime=t}else{this.utcTime=t}}else{Object.assign(this,e)}}}getTime(){const e=this.utcTime||this.generalTime;if(!e){throw new Error("Cannot get time from CHOICE object")}return e}};__decorate([AsnProp({type:AsnPropTypes.UTCTime})],Time.prototype,"utcTime",void 0);__decorate([AsnProp({type:AsnPropTypes.GeneralizedTime})],Time.prototype,"generalTime",void 0);Time=__decorate([AsnType({type:AsnTypeTypes.Choice})],Time);class Validity{constructor(e){this.notBefore=new Time(new Date);this.notAfter=new Time(new Date);if(e){this.notBefore=new Time(e.notBefore);this.notAfter=new Time(e.notAfter)}}}__decorate([AsnProp({type:Time})],Validity.prototype,"notBefore",void 0);__decorate([AsnProp({type:Time})],Validity.prototype,"notAfter",void 0);var Extensions_1;class Extension$1{constructor(e={}){this.extnID="";this.critical=Extension$1.CRITICAL;this.extnValue=new OctetString;Object.assign(this,e)}}Extension$1.CRITICAL=false;__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],Extension$1.prototype,"extnID",void 0);__decorate([AsnProp({type:AsnPropTypes.Boolean,defaultValue:Extension$1.CRITICAL})],Extension$1.prototype,"critical",void 0);__decorate([AsnProp({type:OctetString})],Extension$1.prototype,"extnValue",void 0);let Extensions=Extensions_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,Extensions_1.prototype)}};Extensions=Extensions_1=__decorate([AsnType({type:AsnTypeTypes.Sequence,itemType:Extension$1})],Extensions);var Version$1;(function(e){e[e["v1"]=0]="v1";e[e["v2"]=1]="v2";e[e["v3"]=2]="v3"})(Version$1||(Version$1={}));class TBSCertificate{constructor(e={}){this.version=Version$1.v1;this.serialNumber=new ArrayBuffer(0);this.signature=new AlgorithmIdentifier$1;this.issuer=new Name$1;this.validity=new Validity;this.subject=new Name$1;this.subjectPublicKeyInfo=new SubjectPublicKeyInfo;Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.Integer,context:0,defaultValue:Version$1.v1})],TBSCertificate.prototype,"version",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter$1})],TBSCertificate.prototype,"serialNumber",void 0);__decorate([AsnProp({type:AlgorithmIdentifier$1})],TBSCertificate.prototype,"signature",void 0);__decorate([AsnProp({type:Name$1})],TBSCertificate.prototype,"issuer",void 0);__decorate([AsnProp({type:Validity})],TBSCertificate.prototype,"validity",void 0);__decorate([AsnProp({type:Name$1})],TBSCertificate.prototype,"subject",void 0);__decorate([AsnProp({type:SubjectPublicKeyInfo})],TBSCertificate.prototype,"subjectPublicKeyInfo",void 0);__decorate([AsnProp({type:AsnPropTypes.BitString,context:1,implicit:true,optional:true})],TBSCertificate.prototype,"issuerUniqueID",void 0);__decorate([AsnProp({type:AsnPropTypes.BitString,context:2,implicit:true,optional:true})],TBSCertificate.prototype,"subjectUniqueID",void 0);__decorate([AsnProp({type:Extensions,context:3,optional:true})],TBSCertificate.prototype,"extensions",void 0);class Certificate{constructor(e={}){this.tbsCertificate=new TBSCertificate;this.signatureAlgorithm=new AlgorithmIdentifier$1;this.signatureValue=new ArrayBuffer(0);Object.assign(this,e)}}__decorate([AsnProp({type:TBSCertificate})],Certificate.prototype,"tbsCertificate",void 0);__decorate([AsnProp({type:AlgorithmIdentifier$1})],Certificate.prototype,"signatureAlgorithm",void 0);__decorate([AsnProp({type:AsnPropTypes.BitString})],Certificate.prototype,"signatureValue",void 0);class RevokedCertificate{constructor(e={}){this.userCertificate=new ArrayBuffer(0);this.revocationDate=new Time;Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter$1})],RevokedCertificate.prototype,"userCertificate",void 0);__decorate([AsnProp({type:Time})],RevokedCertificate.prototype,"revocationDate",void 0);__decorate([AsnProp({type:Extension$1,optional:true,repeated:"sequence"})],RevokedCertificate.prototype,"crlEntryExtensions",void 0);class TBSCertList{constructor(e={}){this.signature=new AlgorithmIdentifier$1;this.issuer=new Name$1;this.thisUpdate=new Time;Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.Integer,optional:true})],TBSCertList.prototype,"version",void 0);__decorate([AsnProp({type:AlgorithmIdentifier$1})],TBSCertList.prototype,"signature",void 0);__decorate([AsnProp({type:Name$1})],TBSCertList.prototype,"issuer",void 0);__decorate([AsnProp({type:Time})],TBSCertList.prototype,"thisUpdate",void 0);__decorate([AsnProp({type:Time,optional:true})],TBSCertList.prototype,"nextUpdate",void 0);__decorate([AsnProp({type:RevokedCertificate,repeated:"sequence",optional:true})],TBSCertList.prototype,"revokedCertificates",void 0);__decorate([AsnProp({type:Extension$1,optional:true,context:0,repeated:"sequence"})],TBSCertList.prototype,"crlExtensions",void 0);class CertificateList{constructor(e={}){this.tbsCertList=new TBSCertList;this.signatureAlgorithm=new AlgorithmIdentifier$1;this.signature=new ArrayBuffer(0);Object.assign(this,e)}}__decorate([AsnProp({type:TBSCertList})],CertificateList.prototype,"tbsCertList",void 0);__decorate([AsnProp({type:AlgorithmIdentifier$1})],CertificateList.prototype,"signatureAlgorithm",void 0);__decorate([AsnProp({type:AsnPropTypes.BitString})],CertificateList.prototype,"signature",void 0);class Attribute$1{constructor(e={}){this.attrType="";this.attrValues=[];Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],Attribute$1.prototype,"attrType",void 0);__decorate([AsnProp({type:AsnPropTypes.Any,repeated:"set"})],Attribute$1.prototype,"attrValues",void 0);class ACClearAttrs{constructor(e={}){this.acIssuer=new GeneralName$1;this.acSerial=0;this.attrs=[];Object.assign(this,e)}}__decorate([AsnProp({type:GeneralName$1})],ACClearAttrs.prototype,"acIssuer",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer})],ACClearAttrs.prototype,"acSerial",void 0);__decorate([AsnProp({type:Attribute$2,repeated:"sequence"})],ACClearAttrs.prototype,"attrs",void 0);var AttrSpec_1;let AttrSpec=AttrSpec_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,AttrSpec_1.prototype)}};AttrSpec=AttrSpec_1=__decorate([AsnType({type:AsnTypeTypes.Sequence,itemType:AsnPropTypes.ObjectIdentifier})],AttrSpec);class AAControls{constructor(e={}){this.permitUnSpecified=true;Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.Integer,optional:true})],AAControls.prototype,"pathLenConstraint",void 0);__decorate([AsnProp({type:AttrSpec,implicit:true,context:0,optional:true})],AAControls.prototype,"permittedAttrs",void 0);__decorate([AsnProp({type:AttrSpec,implicit:true,context:1,optional:true})],AAControls.prototype,"excludedAttrs",void 0);__decorate([AsnProp({type:AsnPropTypes.Boolean,defaultValue:true})],AAControls.prototype,"permitUnSpecified",void 0);class IssuerSerial{constructor(e={}){this.issuer=new GeneralNames$1;this.serial=new ArrayBuffer(0);this.issuerUID=new ArrayBuffer(0);Object.assign(this,e)}}__decorate([AsnProp({type:GeneralNames$1})],IssuerSerial.prototype,"issuer",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter$1})],IssuerSerial.prototype,"serial",void 0);__decorate([AsnProp({type:AsnPropTypes.BitString,optional:true})],IssuerSerial.prototype,"issuerUID",void 0);var DigestedObjectType;(function(e){e[e["publicKey"]=0]="publicKey";e[e["publicKeyCert"]=1]="publicKeyCert";e[e["otherObjectTypes"]=2]="otherObjectTypes"})(DigestedObjectType||(DigestedObjectType={}));class ObjectDigestInfo{constructor(e={}){this.digestedObjectType=DigestedObjectType.publicKey;this.digestAlgorithm=new AlgorithmIdentifier$1;this.objectDigest=new ArrayBuffer(0);Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.Enumerated})],ObjectDigestInfo.prototype,"digestedObjectType",void 0);__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier,optional:true})],ObjectDigestInfo.prototype,"otherObjectTypeID",void 0);__decorate([AsnProp({type:AlgorithmIdentifier$1})],ObjectDigestInfo.prototype,"digestAlgorithm",void 0);__decorate([AsnProp({type:AsnPropTypes.BitString})],ObjectDigestInfo.prototype,"objectDigest",void 0);class V2Form{constructor(e={}){Object.assign(this,e)}}__decorate([AsnProp({type:GeneralNames$1,optional:true})],V2Form.prototype,"issuerName",void 0);__decorate([AsnProp({type:IssuerSerial,context:0,implicit:true,optional:true})],V2Form.prototype,"baseCertificateID",void 0);__decorate([AsnProp({type:ObjectDigestInfo,context:1,implicit:true,optional:true})],V2Form.prototype,"objectDigestInfo",void 0);let AttCertIssuer=class e{constructor(e={}){Object.assign(this,e)}};__decorate([AsnProp({type:GeneralName$1,repeated:"sequence"})],AttCertIssuer.prototype,"v1Form",void 0);__decorate([AsnProp({type:V2Form,context:0,implicit:true})],AttCertIssuer.prototype,"v2Form",void 0);AttCertIssuer=__decorate([AsnType({type:AsnTypeTypes.Choice})],AttCertIssuer);class AttCertValidityPeriod{constructor(e={}){this.notBeforeTime=new Date;this.notAfterTime=new Date;Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.GeneralizedTime})],AttCertValidityPeriod.prototype,"notBeforeTime",void 0);__decorate([AsnProp({type:AsnPropTypes.GeneralizedTime})],AttCertValidityPeriod.prototype,"notAfterTime",void 0);class Holder{constructor(e={}){Object.assign(this,e)}}__decorate([AsnProp({type:IssuerSerial,implicit:true,context:0,optional:true})],Holder.prototype,"baseCertificateID",void 0);__decorate([AsnProp({type:GeneralNames$1,implicit:true,context:1,optional:true})],Holder.prototype,"entityName",void 0);__decorate([AsnProp({type:ObjectDigestInfo,implicit:true,context:2,optional:true})],Holder.prototype,"objectDigestInfo",void 0);var AttCertVersion;(function(e){e[e["v2"]=1]="v2"})(AttCertVersion||(AttCertVersion={}));class AttributeCertificateInfo{constructor(e={}){this.version=AttCertVersion.v2;this.holder=new Holder;this.issuer=new AttCertIssuer;this.signature=new AlgorithmIdentifier$1;this.serialNumber=new ArrayBuffer(0);this.attrCertValidityPeriod=new AttCertValidityPeriod;this.attributes=[];Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.Integer})],AttributeCertificateInfo.prototype,"version",void 0);__decorate([AsnProp({type:Holder})],AttributeCertificateInfo.prototype,"holder",void 0);__decorate([AsnProp({type:AttCertIssuer})],AttributeCertificateInfo.prototype,"issuer",void 0);__decorate([AsnProp({type:AlgorithmIdentifier$1})],AttributeCertificateInfo.prototype,"signature",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter$1})],AttributeCertificateInfo.prototype,"serialNumber",void 0);__decorate([AsnProp({type:AttCertValidityPeriod})],AttributeCertificateInfo.prototype,"attrCertValidityPeriod",void 0);__decorate([AsnProp({type:Attribute$2,repeated:"sequence"})],AttributeCertificateInfo.prototype,"attributes",void 0);__decorate([AsnProp({type:AsnPropTypes.BitString,optional:true})],AttributeCertificateInfo.prototype,"issuerUniqueID",void 0);__decorate([AsnProp({type:Extensions,optional:true})],AttributeCertificateInfo.prototype,"extensions",void 0);class AttributeCertificate{constructor(e={}){this.acinfo=new AttributeCertificateInfo;this.signatureAlgorithm=new AlgorithmIdentifier$1;this.signatureValue=new ArrayBuffer(0);Object.assign(this,e)}}__decorate([AsnProp({type:AttributeCertificateInfo})],AttributeCertificate.prototype,"acinfo",void 0);__decorate([AsnProp({type:AlgorithmIdentifier$1})],AttributeCertificate.prototype,"signatureAlgorithm",void 0);__decorate([AsnProp({type:AsnPropTypes.BitString})],AttributeCertificate.prototype,"signatureValue",void 0);var ClassListFlags;(function(e){e[e["unmarked"]=1]="unmarked";e[e["unclassified"]=2]="unclassified";e[e["restricted"]=4]="restricted";e[e["confidential"]=8]="confidential";e[e["secret"]=16]="secret";e[e["topSecret"]=32]="topSecret"})(ClassListFlags||(ClassListFlags={}));class ClassList extends BitString{}class SecurityCategory{constructor(e={}){this.type="";this.value=new ArrayBuffer(0);Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier,implicit:true,context:0})],SecurityCategory.prototype,"type",void 0);__decorate([AsnProp({type:AsnPropTypes.Any,implicit:true,context:1})],SecurityCategory.prototype,"value",void 0);class Clearance{constructor(e={}){this.policyId="";this.classList=new ClassList(ClassListFlags.unclassified);Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],Clearance.prototype,"policyId",void 0);__decorate([AsnProp({type:ClassList,defaultValue:new ClassList(ClassListFlags.unclassified)})],Clearance.prototype,"classList",void 0);__decorate([AsnProp({type:SecurityCategory,repeated:"set"})],Clearance.prototype,"securityCategories",void 0);class IetfAttrSyntaxValueChoices{constructor(e={}){Object.assign(this,e)}}__decorate([AsnProp({type:OctetString})],IetfAttrSyntaxValueChoices.prototype,"cotets",void 0);__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],IetfAttrSyntaxValueChoices.prototype,"oid",void 0);__decorate([AsnProp({type:AsnPropTypes.Utf8String})],IetfAttrSyntaxValueChoices.prototype,"string",void 0);class IetfAttrSyntax{constructor(e={}){this.values=[];Object.assign(this,e)}}__decorate([AsnProp({type:GeneralNames$1,implicit:true,context:0,optional:true})],IetfAttrSyntax.prototype,"policyAuthority",void 0);__decorate([AsnProp({type:IetfAttrSyntaxValueChoices,repeated:"sequence"})],IetfAttrSyntax.prototype,"values",void 0);var Targets_1;class TargetCert{constructor(e={}){this.targetCertificate=new IssuerSerial;Object.assign(this,e)}}__decorate([AsnProp({type:IssuerSerial})],TargetCert.prototype,"targetCertificate",void 0);__decorate([AsnProp({type:GeneralName$1,optional:true})],TargetCert.prototype,"targetName",void 0);__decorate([AsnProp({type:ObjectDigestInfo,optional:true})],TargetCert.prototype,"certDigestInfo",void 0);let Target=class e{constructor(e={}){Object.assign(this,e)}};__decorate([AsnProp({type:GeneralName$1,context:0,implicit:true})],Target.prototype,"targetName",void 0);__decorate([AsnProp({type:GeneralName$1,context:1,implicit:true})],Target.prototype,"targetGroup",void 0);__decorate([AsnProp({type:TargetCert,context:2,implicit:true})],Target.prototype,"targetCert",void 0);Target=__decorate([AsnType({type:AsnTypeTypes.Choice})],Target);let Targets=Targets_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,Targets_1.prototype)}};Targets=Targets_1=__decorate([AsnType({type:AsnTypeTypes.Sequence,itemType:Target})],Targets);var ProxyInfo_1;let ProxyInfo=ProxyInfo_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,ProxyInfo_1.prototype)}};ProxyInfo=ProxyInfo_1=__decorate([AsnType({type:AsnTypeTypes.Sequence,itemType:Targets})],ProxyInfo);class RoleSyntax{constructor(e={}){Object.assign(this,e)}}__decorate([AsnProp({type:GeneralNames$1,implicit:true,context:0,optional:true})],RoleSyntax.prototype,"roleAuthority",void 0);__decorate([AsnProp({type:GeneralName$1,implicit:true,context:1})],RoleSyntax.prototype,"roleName",void 0);class SvceAuthInfo{constructor(e={}){this.service=new GeneralName$1;this.ident=new GeneralName$1;Object.assign(this,e)}}__decorate([AsnProp({type:GeneralName$1})],SvceAuthInfo.prototype,"service",void 0);__decorate([AsnProp({type:GeneralName$1})],SvceAuthInfo.prototype,"ident",void 0);__decorate([AsnProp({type:OctetString,optional:true})],SvceAuthInfo.prototype,"authInfo",void 0);var CertificateSet_1;class OtherCertificateFormat{constructor(e={}){this.otherCertFormat="";this.otherCert=new ArrayBuffer(0);Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],OtherCertificateFormat.prototype,"otherCertFormat",void 0);__decorate([AsnProp({type:AsnPropTypes.Any})],OtherCertificateFormat.prototype,"otherCert",void 0);let CertificateChoices=class e{constructor(e={}){Object.assign(this,e)}};__decorate([AsnProp({type:Certificate})],CertificateChoices.prototype,"certificate",void 0);__decorate([AsnProp({type:AttributeCertificate,context:2,implicit:true})],CertificateChoices.prototype,"v2AttrCert",void 0);__decorate([AsnProp({type:OtherCertificateFormat,context:3,implicit:true})],CertificateChoices.prototype,"other",void 0);CertificateChoices=__decorate([AsnType({type:AsnTypeTypes.Choice})],CertificateChoices);let CertificateSet=CertificateSet_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,CertificateSet_1.prototype)}};CertificateSet=CertificateSet_1=__decorate([AsnType({type:AsnTypeTypes.Set,itemType:CertificateChoices})],CertificateSet);class ContentInfo{constructor(e={}){this.contentType="";this.content=new ArrayBuffer(0);Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],ContentInfo.prototype,"contentType",void 0);__decorate([AsnProp({type:AsnPropTypes.Any,context:0})],ContentInfo.prototype,"content",void 0);let EncapsulatedContent=class e{constructor(e={}){Object.assign(this,e)}};__decorate([AsnProp({type:OctetString})],EncapsulatedContent.prototype,"single",void 0);__decorate([AsnProp({type:AsnPropTypes.Any})],EncapsulatedContent.prototype,"any",void 0);EncapsulatedContent=__decorate([AsnType({type:AsnTypeTypes.Choice})],EncapsulatedContent);class EncapsulatedContentInfo{constructor(e={}){this.eContentType="";Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],EncapsulatedContentInfo.prototype,"eContentType",void 0);__decorate([AsnProp({type:EncapsulatedContent,context:0,optional:true})],EncapsulatedContentInfo.prototype,"eContent",void 0);var CMSVersion;(function(e){e[e["v0"]=0]="v0";e[e["v1"]=1]="v1";e[e["v2"]=2]="v2";e[e["v3"]=3]="v3";e[e["v4"]=4]="v4";e[e["v5"]=5]="v5"})(CMSVersion||(CMSVersion={}));let DigestAlgorithmIdentifier=class e extends AlgorithmIdentifier$1{};DigestAlgorithmIdentifier=__decorate([AsnType({type:AsnTypeTypes.Sequence})],DigestAlgorithmIdentifier);let SignatureAlgorithmIdentifier=class e extends AlgorithmIdentifier$1{};SignatureAlgorithmIdentifier=__decorate([AsnType({type:AsnTypeTypes.Sequence})],SignatureAlgorithmIdentifier);let KeyEncryptionAlgorithmIdentifier=class e extends AlgorithmIdentifier$1{};KeyEncryptionAlgorithmIdentifier=__decorate([AsnType({type:AsnTypeTypes.Sequence})],KeyEncryptionAlgorithmIdentifier);let ContentEncryptionAlgorithmIdentifier=class e extends AlgorithmIdentifier$1{};ContentEncryptionAlgorithmIdentifier=__decorate([AsnType({type:AsnTypeTypes.Sequence})],ContentEncryptionAlgorithmIdentifier);let MessageAuthenticationCodeAlgorithm=class e extends AlgorithmIdentifier$1{};MessageAuthenticationCodeAlgorithm=__decorate([AsnType({type:AsnTypeTypes.Sequence})],MessageAuthenticationCodeAlgorithm);let KeyDerivationAlgorithmIdentifier=class e extends AlgorithmIdentifier$1{};KeyDerivationAlgorithmIdentifier=__decorate([AsnType({type:AsnTypeTypes.Sequence})],KeyDerivationAlgorithmIdentifier);let EncryptedContent=class e{constructor(e={}){Object.assign(this,e)}};__decorate([AsnProp({type:OctetString,context:0,implicit:true,optional:true})],EncryptedContent.prototype,"value",void 0);__decorate([AsnProp({type:OctetString,converter:AsnConstructedOctetStringConverter,context:0,implicit:true,optional:true,repeated:"sequence"})],EncryptedContent.prototype,"constructedValue",void 0);EncryptedContent=__decorate([AsnType({type:AsnTypeTypes.Choice})],EncryptedContent);class EncryptedContentInfo{constructor(e={}){this.contentType="";this.contentEncryptionAlgorithm=new ContentEncryptionAlgorithmIdentifier;Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],EncryptedContentInfo.prototype,"contentType",void 0);__decorate([AsnProp({type:ContentEncryptionAlgorithmIdentifier})],EncryptedContentInfo.prototype,"contentEncryptionAlgorithm",void 0);__decorate([AsnProp({type:EncryptedContent,optional:true})],EncryptedContentInfo.prototype,"encryptedContent",void 0);class IssuerAndSerialNumber{constructor(e={}){this.issuer=new Name$1;this.serialNumber=new ArrayBuffer(0);Object.assign(this,e)}}__decorate([AsnProp({type:Name$1})],IssuerAndSerialNumber.prototype,"issuer",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter$1})],IssuerAndSerialNumber.prototype,"serialNumber",void 0);class OtherKeyAttribute{constructor(e={}){this.keyAttrId="";Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],OtherKeyAttribute.prototype,"keyAttrId",void 0);__decorate([AsnProp({type:AsnPropTypes.Any,optional:true})],OtherKeyAttribute.prototype,"keyAttr",void 0);var RecipientEncryptedKeys_1;class RecipientKeyIdentifier{constructor(e={}){this.subjectKeyIdentifier=new SubjectKeyIdentifier;Object.assign(this,e)}}__decorate([AsnProp({type:SubjectKeyIdentifier})],RecipientKeyIdentifier.prototype,"subjectKeyIdentifier",void 0);__decorate([AsnProp({type:AsnPropTypes.GeneralizedTime,optional:true})],RecipientKeyIdentifier.prototype,"date",void 0);__decorate([AsnProp({type:OtherKeyAttribute,optional:true})],RecipientKeyIdentifier.prototype,"other",void 0);let KeyAgreeRecipientIdentifier=class e{constructor(e={}){Object.assign(this,e)}};__decorate([AsnProp({type:RecipientKeyIdentifier,context:0,implicit:true,optional:true})],KeyAgreeRecipientIdentifier.prototype,"rKeyId",void 0);__decorate([AsnProp({type:IssuerAndSerialNumber,optional:true})],KeyAgreeRecipientIdentifier.prototype,"issuerAndSerialNumber",void 0);KeyAgreeRecipientIdentifier=__decorate([AsnType({type:AsnTypeTypes.Choice})],KeyAgreeRecipientIdentifier);class RecipientEncryptedKey{constructor(e={}){this.rid=new KeyAgreeRecipientIdentifier;this.encryptedKey=new OctetString;Object.assign(this,e)}}__decorate([AsnProp({type:KeyAgreeRecipientIdentifier})],RecipientEncryptedKey.prototype,"rid",void 0);__decorate([AsnProp({type:OctetString})],RecipientEncryptedKey.prototype,"encryptedKey",void 0);let RecipientEncryptedKeys=RecipientEncryptedKeys_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,RecipientEncryptedKeys_1.prototype)}};RecipientEncryptedKeys=RecipientEncryptedKeys_1=__decorate([AsnType({type:AsnTypeTypes.Sequence,itemType:RecipientEncryptedKey})],RecipientEncryptedKeys);class OriginatorPublicKey{constructor(e={}){this.algorithm=new AlgorithmIdentifier$1;this.publicKey=new ArrayBuffer(0);Object.assign(this,e)}}__decorate([AsnProp({type:AlgorithmIdentifier$1})],OriginatorPublicKey.prototype,"algorithm",void 0);__decorate([AsnProp({type:AsnPropTypes.BitString})],OriginatorPublicKey.prototype,"publicKey",void 0);let OriginatorIdentifierOrKey=class e{constructor(e={}){Object.assign(this,e)}};__decorate([AsnProp({type:SubjectKeyIdentifier,context:0,implicit:true,optional:true})],OriginatorIdentifierOrKey.prototype,"subjectKeyIdentifier",void 0);__decorate([AsnProp({type:OriginatorPublicKey,context:1,implicit:true,optional:true})],OriginatorIdentifierOrKey.prototype,"originatorKey",void 0);__decorate([AsnProp({type:IssuerAndSerialNumber,optional:true})],OriginatorIdentifierOrKey.prototype,"issuerAndSerialNumber",void 0);OriginatorIdentifierOrKey=__decorate([AsnType({type:AsnTypeTypes.Choice})],OriginatorIdentifierOrKey);class KeyAgreeRecipientInfo{constructor(e={}){this.version=CMSVersion.v3;this.originator=new OriginatorIdentifierOrKey;this.keyEncryptionAlgorithm=new KeyEncryptionAlgorithmIdentifier;this.recipientEncryptedKeys=new RecipientEncryptedKeys;Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.Integer})],KeyAgreeRecipientInfo.prototype,"version",void 0);__decorate([AsnProp({type:OriginatorIdentifierOrKey,context:0})],KeyAgreeRecipientInfo.prototype,"originator",void 0);__decorate([AsnProp({type:OctetString,context:1,optional:true})],KeyAgreeRecipientInfo.prototype,"ukm",void 0);__decorate([AsnProp({type:KeyEncryptionAlgorithmIdentifier})],KeyAgreeRecipientInfo.prototype,"keyEncryptionAlgorithm",void 0);__decorate([AsnProp({type:RecipientEncryptedKeys})],KeyAgreeRecipientInfo.prototype,"recipientEncryptedKeys",void 0);let RecipientIdentifier=class e{constructor(e={}){Object.assign(this,e)}};__decorate([AsnProp({type:SubjectKeyIdentifier,context:0,implicit:true})],RecipientIdentifier.prototype,"subjectKeyIdentifier",void 0);__decorate([AsnProp({type:IssuerAndSerialNumber})],RecipientIdentifier.prototype,"issuerAndSerialNumber",void 0);RecipientIdentifier=__decorate([AsnType({type:AsnTypeTypes.Choice})],RecipientIdentifier);class KeyTransRecipientInfo{constructor(e={}){this.version=CMSVersion.v0;this.rid=new RecipientIdentifier;this.keyEncryptionAlgorithm=new KeyEncryptionAlgorithmIdentifier;this.encryptedKey=new OctetString;Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.Integer})],KeyTransRecipientInfo.prototype,"version",void 0);__decorate([AsnProp({type:RecipientIdentifier})],KeyTransRecipientInfo.prototype,"rid",void 0);__decorate([AsnProp({type:KeyEncryptionAlgorithmIdentifier})],KeyTransRecipientInfo.prototype,"keyEncryptionAlgorithm",void 0);__decorate([AsnProp({type:OctetString})],KeyTransRecipientInfo.prototype,"encryptedKey",void 0);class KEKIdentifier{constructor(e={}){this.keyIdentifier=new OctetString;Object.assign(this,e)}}__decorate([AsnProp({type:OctetString})],KEKIdentifier.prototype,"keyIdentifier",void 0);__decorate([AsnProp({type:AsnPropTypes.GeneralizedTime,optional:true})],KEKIdentifier.prototype,"date",void 0);__decorate([AsnProp({type:OtherKeyAttribute,optional:true})],KEKIdentifier.prototype,"other",void 0);class KEKRecipientInfo{constructor(e={}){this.version=CMSVersion.v4;this.kekid=new KEKIdentifier;this.keyEncryptionAlgorithm=new KeyEncryptionAlgorithmIdentifier;this.encryptedKey=new OctetString;Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.Integer})],KEKRecipientInfo.prototype,"version",void 0);__decorate([AsnProp({type:KEKIdentifier})],KEKRecipientInfo.prototype,"kekid",void 0);__decorate([AsnProp({type:KeyEncryptionAlgorithmIdentifier})],KEKRecipientInfo.prototype,"keyEncryptionAlgorithm",void 0);__decorate([AsnProp({type:OctetString})],KEKRecipientInfo.prototype,"encryptedKey",void 0);class PasswordRecipientInfo{constructor(e={}){this.version=CMSVersion.v0;this.keyEncryptionAlgorithm=new KeyEncryptionAlgorithmIdentifier;this.encryptedKey=new OctetString;Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.Integer})],PasswordRecipientInfo.prototype,"version",void 0);__decorate([AsnProp({type:KeyDerivationAlgorithmIdentifier,context:0,optional:true})],PasswordRecipientInfo.prototype,"keyDerivationAlgorithm",void 0);__decorate([AsnProp({type:KeyEncryptionAlgorithmIdentifier})],PasswordRecipientInfo.prototype,"keyEncryptionAlgorithm",void 0);__decorate([AsnProp({type:OctetString})],PasswordRecipientInfo.prototype,"encryptedKey",void 0);class OtherRecipientInfo{constructor(e={}){this.oriType="";this.oriValue=new ArrayBuffer(0);Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],OtherRecipientInfo.prototype,"oriType",void 0);__decorate([AsnProp({type:AsnPropTypes.Any})],OtherRecipientInfo.prototype,"oriValue",void 0);let RecipientInfo=class e{constructor(e={}){Object.assign(this,e)}};__decorate([AsnProp({type:KeyTransRecipientInfo,optional:true})],RecipientInfo.prototype,"ktri",void 0);__decorate([AsnProp({type:KeyAgreeRecipientInfo,context:1,implicit:true,optional:true})],RecipientInfo.prototype,"kari",void 0);__decorate([AsnProp({type:KEKRecipientInfo,context:2,implicit:true,optional:true})],RecipientInfo.prototype,"kekri",void 0);__decorate([AsnProp({type:PasswordRecipientInfo,context:3,implicit:true,optional:true})],RecipientInfo.prototype,"pwri",void 0);__decorate([AsnProp({type:OtherRecipientInfo,context:4,implicit:true,optional:true})],RecipientInfo.prototype,"ori",void 0);RecipientInfo=__decorate([AsnType({type:AsnTypeTypes.Choice})],RecipientInfo);var RecipientInfos_1;let RecipientInfos=RecipientInfos_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,RecipientInfos_1.prototype)}};RecipientInfos=RecipientInfos_1=__decorate([AsnType({type:AsnTypeTypes.Set,itemType:RecipientInfo})],RecipientInfos);var RevocationInfoChoices_1;class OtherRevocationInfoFormat{constructor(e={}){this.otherRevInfoFormat="";this.otherRevInfo=new ArrayBuffer(0);Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],OtherRevocationInfoFormat.prototype,"otherRevInfoFormat",void 0);__decorate([AsnProp({type:AsnPropTypes.Any})],OtherRevocationInfoFormat.prototype,"otherRevInfo",void 0);let RevocationInfoChoice=class e{constructor(e={}){this.other=new OtherRevocationInfoFormat;Object.assign(this,e)}};__decorate([AsnProp({type:OtherRevocationInfoFormat,context:1,implicit:true})],RevocationInfoChoice.prototype,"other",void 0);RevocationInfoChoice=__decorate([AsnType({type:AsnTypeTypes.Choice})],RevocationInfoChoice);let RevocationInfoChoices=RevocationInfoChoices_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,RevocationInfoChoices_1.prototype)}};RevocationInfoChoices=RevocationInfoChoices_1=__decorate([AsnType({type:AsnTypeTypes.Set,itemType:RevocationInfoChoice})],RevocationInfoChoices);class OriginatorInfo{constructor(e={}){Object.assign(this,e)}}__decorate([AsnProp({type:CertificateSet,context:0,implicit:true,optional:true})],OriginatorInfo.prototype,"certs",void 0);__decorate([AsnProp({type:RevocationInfoChoices,context:1,implicit:true,optional:true})],OriginatorInfo.prototype,"crls",void 0);var UnprotectedAttributes_1;let UnprotectedAttributes=UnprotectedAttributes_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,UnprotectedAttributes_1.prototype)}};UnprotectedAttributes=UnprotectedAttributes_1=__decorate([AsnType({type:AsnTypeTypes.Set,itemType:Attribute$1})],UnprotectedAttributes);class EnvelopedData{constructor(e={}){this.version=CMSVersion.v0;this.recipientInfos=new RecipientInfos;this.encryptedContentInfo=new EncryptedContentInfo;Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.Integer})],EnvelopedData.prototype,"version",void 0);__decorate([AsnProp({type:OriginatorInfo,context:0,implicit:true,optional:true})],EnvelopedData.prototype,"originatorInfo",void 0);__decorate([AsnProp({type:RecipientInfos})],EnvelopedData.prototype,"recipientInfos",void 0);__decorate([AsnProp({type:EncryptedContentInfo})],EnvelopedData.prototype,"encryptedContentInfo",void 0);__decorate([AsnProp({type:UnprotectedAttributes,context:1,implicit:true,optional:true})],EnvelopedData.prototype,"unprotectedAttrs",void 0);const id_data="1.2.840.113549.1.7.1";const id_signedData="1.2.840.113549.1.7.2";let SignerIdentifier=class e{constructor(e={}){Object.assign(this,e)}};__decorate([AsnProp({type:SubjectKeyIdentifier,context:0,implicit:true})],SignerIdentifier.prototype,"subjectKeyIdentifier",void 0);__decorate([AsnProp({type:IssuerAndSerialNumber})],SignerIdentifier.prototype,"issuerAndSerialNumber",void 0);SignerIdentifier=__decorate([AsnType({type:AsnTypeTypes.Choice})],SignerIdentifier);var SignerInfos_1;class SignerInfo{constructor(e={}){this.version=CMSVersion.v0;this.sid=new SignerIdentifier;this.digestAlgorithm=new DigestAlgorithmIdentifier;this.signatureAlgorithm=new SignatureAlgorithmIdentifier;this.signature=new OctetString;Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.Integer})],SignerInfo.prototype,"version",void 0);__decorate([AsnProp({type:SignerIdentifier})],SignerInfo.prototype,"sid",void 0);__decorate([AsnProp({type:DigestAlgorithmIdentifier})],SignerInfo.prototype,"digestAlgorithm",void 0);__decorate([AsnProp({type:Attribute$1,repeated:"set",context:0,implicit:true,optional:true})],SignerInfo.prototype,"signedAttrs",void 0);__decorate([AsnProp({type:SignatureAlgorithmIdentifier})],SignerInfo.prototype,"signatureAlgorithm",void 0);__decorate([AsnProp({type:OctetString})],SignerInfo.prototype,"signature",void 0);__decorate([AsnProp({type:Attribute$1,repeated:"set",context:1,implicit:true,optional:true})],SignerInfo.prototype,"unsignedAttrs",void 0);let SignerInfos=SignerInfos_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,SignerInfos_1.prototype)}};SignerInfos=SignerInfos_1=__decorate([AsnType({type:AsnTypeTypes.Set,itemType:SignerInfo})],SignerInfos);var DigestAlgorithmIdentifiers_1;let DigestAlgorithmIdentifiers=DigestAlgorithmIdentifiers_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,DigestAlgorithmIdentifiers_1.prototype)}};DigestAlgorithmIdentifiers=DigestAlgorithmIdentifiers_1=__decorate([AsnType({type:AsnTypeTypes.Set,itemType:DigestAlgorithmIdentifier})],DigestAlgorithmIdentifiers);class SignedData{constructor(e={}){this.version=CMSVersion.v0;this.digestAlgorithms=new DigestAlgorithmIdentifiers;this.encapContentInfo=new EncapsulatedContentInfo;this.signerInfos=new SignerInfos;Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.Integer})],SignedData.prototype,"version",void 0);__decorate([AsnProp({type:DigestAlgorithmIdentifiers})],SignedData.prototype,"digestAlgorithms",void 0);__decorate([AsnProp({type:EncapsulatedContentInfo})],SignedData.prototype,"encapContentInfo",void 0);__decorate([AsnProp({type:CertificateSet,context:0,implicit:true,optional:true})],SignedData.prototype,"certificates",void 0);__decorate([AsnProp({type:RevocationInfoChoice,context:1,implicit:true,optional:true})],SignedData.prototype,"crls",void 0);__decorate([AsnProp({type:SignerInfos})],SignedData.prototype,"signerInfos",void 0);const id_ecPublicKey="1.2.840.10045.2.1";const id_ecdsaWithSHA1="1.2.840.10045.4.1";const id_ecdsaWithSHA224="1.2.840.10045.4.3.1";const id_ecdsaWithSHA256="1.2.840.10045.4.3.2";const id_ecdsaWithSHA384="1.2.840.10045.4.3.3";const id_ecdsaWithSHA512="1.2.840.10045.4.3.4";const id_secp256r1="1.2.840.10045.3.1.7";const id_secp384r1="1.3.132.0.34";const id_secp521r1="1.3.132.0.35";function create$6(e){return new AlgorithmIdentifier$1({algorithm:e})}const ecdsaWithSHA1=create$6(id_ecdsaWithSHA1);create$6(id_ecdsaWithSHA224);const ecdsaWithSHA256=create$6(id_ecdsaWithSHA256);const ecdsaWithSHA384=create$6(id_ecdsaWithSHA384);const ecdsaWithSHA512=create$6(id_ecdsaWithSHA512);let ECParameters=class e{constructor(e={}){Object.assign(this,e)}};__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],ECParameters.prototype,"namedCurve",void 0);ECParameters=__decorate([AsnType({type:AsnTypeTypes.Choice})],ECParameters);class ECPrivateKey{constructor(e={}){this.version=1;this.privateKey=new OctetString;Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.Integer})],ECPrivateKey.prototype,"version",void 0);__decorate([AsnProp({type:OctetString})],ECPrivateKey.prototype,"privateKey",void 0);__decorate([AsnProp({type:ECParameters,context:0,optional:true})],ECPrivateKey.prototype,"parameters",void 0);__decorate([AsnProp({type:AsnPropTypes.BitString,context:1,optional:true})],ECPrivateKey.prototype,"publicKey",void 0);class ECDSASigValue{constructor(e={}){this.r=new ArrayBuffer(0);this.s=new ArrayBuffer(0);Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter$1})],ECDSASigValue.prototype,"r",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter$1})],ECDSASigValue.prototype,"s",void 0);const id_pkcs_1="1.2.840.113549.1.1";const id_rsaEncryption=`${id_pkcs_1}.1`;const id_RSAES_OAEP=`${id_pkcs_1}.7`;const id_pSpecified=`${id_pkcs_1}.9`;const id_RSASSA_PSS=`${id_pkcs_1}.10`;const id_md2WithRSAEncryption=`${id_pkcs_1}.2`;const id_md5WithRSAEncryption=`${id_pkcs_1}.4`;const id_sha1WithRSAEncryption=`${id_pkcs_1}.5`;const id_sha224WithRSAEncryption=`${id_pkcs_1}.14`;const id_sha256WithRSAEncryption=`${id_pkcs_1}.11`;const id_sha384WithRSAEncryption=`${id_pkcs_1}.12`;const id_sha512WithRSAEncryption=`${id_pkcs_1}.13`;const id_sha512_224WithRSAEncryption=`${id_pkcs_1}.15`;const id_sha512_256WithRSAEncryption=`${id_pkcs_1}.16`;const id_sha1="1.3.14.3.2.26";const id_sha224="2.16.840.1.101.3.4.2.4";const id_sha256="2.16.840.1.101.3.4.2.1";const id_sha384="2.16.840.1.101.3.4.2.2";const id_sha512="2.16.840.1.101.3.4.2.3";const id_sha512_224="2.16.840.1.101.3.4.2.5";const id_sha512_256="2.16.840.1.101.3.4.2.6";const id_md2="1.2.840.113549.2.2";const id_md5="1.2.840.113549.2.5";const id_mgf1=`${id_pkcs_1}.8`;function create$5(e){return new AlgorithmIdentifier$1({algorithm:e,parameters:null})}create$5(id_md2);create$5(id_md5);const sha1=create$5(id_sha1);create$5(id_sha224);create$5(id_sha256);create$5(id_sha384);create$5(id_sha512);create$5(id_sha512_224);create$5(id_sha512_256);const mgf1SHA1=new AlgorithmIdentifier$1({algorithm:id_mgf1,parameters:AsnConvert.serialize(sha1)});const pSpecifiedEmpty=new AlgorithmIdentifier$1({algorithm:id_pSpecified,parameters:AsnConvert.serialize(AsnOctetStringConverter.toASN(new Uint8Array([218,57,163,238,94,107,75,13,50,85,191,239,149,96,24,144,175,216,7,9]).buffer))});create$5(id_rsaEncryption);create$5(id_md2WithRSAEncryption);create$5(id_md5WithRSAEncryption);create$5(id_sha1WithRSAEncryption);create$5(id_sha512_224WithRSAEncryption);create$5(id_sha512_256WithRSAEncryption);create$5(id_sha384WithRSAEncryption);create$5(id_sha512WithRSAEncryption);create$5(id_sha512_224WithRSAEncryption);create$5(id_sha512_256WithRSAEncryption);class RsaEsOaepParams{constructor(e={}){this.hashAlgorithm=new AlgorithmIdentifier$1(sha1);this.maskGenAlgorithm=new AlgorithmIdentifier$1({algorithm:id_mgf1,parameters:AsnConvert.serialize(sha1)});this.pSourceAlgorithm=new AlgorithmIdentifier$1(pSpecifiedEmpty);Object.assign(this,e)}}__decorate([AsnProp({type:AlgorithmIdentifier$1,context:0,defaultValue:sha1})],RsaEsOaepParams.prototype,"hashAlgorithm",void 0);__decorate([AsnProp({type:AlgorithmIdentifier$1,context:1,defaultValue:mgf1SHA1})],RsaEsOaepParams.prototype,"maskGenAlgorithm",void 0);__decorate([AsnProp({type:AlgorithmIdentifier$1,context:2,defaultValue:pSpecifiedEmpty})],RsaEsOaepParams.prototype,"pSourceAlgorithm",void 0);new AlgorithmIdentifier$1({algorithm:id_RSAES_OAEP,parameters:AsnConvert.serialize(new RsaEsOaepParams)});class RsaSaPssParams{constructor(e={}){this.hashAlgorithm=new AlgorithmIdentifier$1(sha1);this.maskGenAlgorithm=new AlgorithmIdentifier$1({algorithm:id_mgf1,parameters:AsnConvert.serialize(sha1)});this.saltLength=20;this.trailerField=1;Object.assign(this,e)}}__decorate([AsnProp({type:AlgorithmIdentifier$1,context:0,defaultValue:sha1})],RsaSaPssParams.prototype,"hashAlgorithm",void 0);__decorate([AsnProp({type:AlgorithmIdentifier$1,context:1,defaultValue:mgf1SHA1})],RsaSaPssParams.prototype,"maskGenAlgorithm",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,context:2,defaultValue:20})],RsaSaPssParams.prototype,"saltLength",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,context:3,defaultValue:1})],RsaSaPssParams.prototype,"trailerField",void 0);new AlgorithmIdentifier$1({algorithm:id_RSASSA_PSS,parameters:AsnConvert.serialize(new RsaSaPssParams)});class DigestInfo{constructor(e={}){this.digestAlgorithm=new AlgorithmIdentifier$1;this.digest=new OctetString;Object.assign(this,e)}}__decorate([AsnProp({type:AlgorithmIdentifier$1})],DigestInfo.prototype,"digestAlgorithm",void 0);__decorate([AsnProp({type:OctetString})],DigestInfo.prototype,"digest",void 0);var OtherPrimeInfos_1;class OtherPrimeInfo{constructor(e={}){this.prime=new ArrayBuffer(0);this.exponent=new ArrayBuffer(0);this.coefficient=new ArrayBuffer(0);Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter$1})],OtherPrimeInfo.prototype,"prime",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter$1})],OtherPrimeInfo.prototype,"exponent",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter$1})],OtherPrimeInfo.prototype,"coefficient",void 0);let OtherPrimeInfos=OtherPrimeInfos_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,OtherPrimeInfos_1.prototype)}};OtherPrimeInfos=OtherPrimeInfos_1=__decorate([AsnType({type:AsnTypeTypes.Sequence,itemType:OtherPrimeInfo})],OtherPrimeInfos);class RSAPrivateKey{constructor(e={}){this.version=0;this.modulus=new ArrayBuffer(0);this.publicExponent=new ArrayBuffer(0);this.privateExponent=new ArrayBuffer(0);this.prime1=new ArrayBuffer(0);this.prime2=new ArrayBuffer(0);this.exponent1=new ArrayBuffer(0);this.exponent2=new ArrayBuffer(0);this.coefficient=new ArrayBuffer(0);Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.Integer})],RSAPrivateKey.prototype,"version",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter$1})],RSAPrivateKey.prototype,"modulus",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter$1})],RSAPrivateKey.prototype,"publicExponent",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter$1})],RSAPrivateKey.prototype,"privateExponent",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter$1})],RSAPrivateKey.prototype,"prime1",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter$1})],RSAPrivateKey.prototype,"prime2",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter$1})],RSAPrivateKey.prototype,"exponent1",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter$1})],RSAPrivateKey.prototype,"exponent2",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter$1})],RSAPrivateKey.prototype,"coefficient",void 0);__decorate([AsnProp({type:OtherPrimeInfos,optional:true})],RSAPrivateKey.prototype,"otherPrimeInfos",void 0);class RSAPublicKey{constructor(e={}){this.modulus=new ArrayBuffer(0);this.publicExponent=new ArrayBuffer(0);Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter$1})],RSAPublicKey.prototype,"modulus",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter$1})],RSAPublicKey.prototype,"publicExponent",void 0);var Lifecycle;(function(e){e[e["Transient"]=0]="Transient";e[e["Singleton"]=1]="Singleton";e[e["ResolutionScoped"]=2]="ResolutionScoped";e[e["ContainerScoped"]=3]="ContainerScoped"})(Lifecycle||(Lifecycle={}));const Lifecycle$1=Lifecycle;const INJECTION_TOKEN_METADATA_KEY="injectionTokens";function getParamInfo(e){const t=Reflect.getMetadata("design:paramtypes",e)||[];const r=Reflect.getOwnMetadata(INJECTION_TOKEN_METADATA_KEY,e)||{};Object.keys(r).forEach((e=>{t[+e]=r[e]}));return t}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function __awaiter(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,s){function a(e){try{f(n.next(e))}catch(e){s(e)}}function o(e){try{f(n["throw"](e))}catch(e){s(e)}}function f(e){e.done?r(e.value):i(e.value).then(a,o)}f((n=n.apply(e,t||[])).next())}))}function isClassProvider(e){return!!e.useClass}function isFactoryProvider(e){return!!e.useFactory}class DelayedConstructor{constructor(e){this.wrap=e;this.reflectMethods=["get","getPrototypeOf","setPrototypeOf","getOwnPropertyDescriptor","defineProperty","has","set","deleteProperty","apply","construct","ownKeys"]}createProxy(e){const t={};let r=false;let n;const i=()=>{if(!r){n=e(this.wrap());r=true}return n};return new Proxy(t,this.createHandler(i))}createHandler(e){const t={};const r=r=>{t[r]=(...t)=>{t[0]=e();const n=Reflect[r];return n(...t)}};this.reflectMethods.forEach(r);return t}}function isNormalToken(e){return typeof e==="string"||typeof e==="symbol"}function isTokenDescriptor(e){return typeof e==="object"&&"token"in e&&"multiple"in e}function isTransformDescriptor(e){return typeof e==="object"&&"token"in e&&"transform"in e}function isConstructorToken(e){return typeof e==="function"||e instanceof DelayedConstructor}function isTokenProvider(e){return!!e.useToken}function isValueProvider(e){return e.useValue!=undefined}function isProvider(e){return isClassProvider(e)||isValueProvider(e)||isTokenProvider(e)||isFactoryProvider(e)}class RegistryBase{constructor(){this._registryMap=new Map}entries(){return this._registryMap.entries()}getAll(e){this.ensure(e);return this._registryMap.get(e)}get(e){this.ensure(e);const t=this._registryMap.get(e);return t[t.length-1]||null}set(e,t){this.ensure(e);this._registryMap.get(e).push(t)}setAll(e,t){this._registryMap.set(e,t)}has(e){this.ensure(e);return this._registryMap.get(e).length>0}clear(){this._registryMap.clear()}ensure(e){if(!this._registryMap.has(e)){this._registryMap.set(e,[])}}}class Registry extends RegistryBase{}class ResolutionContext{constructor(){this.scopedResolutions=new Map}}function formatDependency(e,t){if(e===null){return`at position #${t}`}const r=e.split(",")[t].trim();return`"${r}" at position #${t}`}function composeErrorMessage(e,t,r="    "){return[e,...t.message.split("\n").map((e=>r+e))].join("\n")}function formatErrorCtor(e,t,r){const[,n=null]=e.toString().match(/constructor\(([\w, ]+)\)/)||[];const i=formatDependency(n,t);return composeErrorMessage(`Cannot inject the dependency ${i} of "${e.name}" constructor. Reason:`,r)}function isDisposable(e){if(typeof e.dispose!=="function")return false;const t=e.dispose;if(t.length>0){return false}return true}class PreResolutionInterceptors extends RegistryBase{}class PostResolutionInterceptors extends RegistryBase{}class Interceptors{constructor(){this.preResolution=new PreResolutionInterceptors;this.postResolution=new PostResolutionInterceptors}}const typeInfo=new Map;class InternalDependencyContainer{constructor(e){this.parent=e;this._registry=new Registry;this.interceptors=new Interceptors;this.disposed=false;this.disposables=new Set}register(e,t,r={lifecycle:Lifecycle$1.Transient}){this.ensureNotDisposed();let n;if(!isProvider(t)){n={useClass:t}}else{n=t}if(isTokenProvider(n)){const t=[e];let r=n;while(r!=null){const e=r.useToken;if(t.includes(e)){throw new Error(`Token registration cycle detected! ${[...t,e].join(" -> ")}`)}t.push(e);const n=this._registry.get(e);if(n&&isTokenProvider(n.provider)){r=n.provider}else{r=null}}}if(r.lifecycle===Lifecycle$1.Singleton||r.lifecycle==Lifecycle$1.ContainerScoped||r.lifecycle==Lifecycle$1.ResolutionScoped){if(isValueProvider(n)||isFactoryProvider(n)){throw new Error(`Cannot use lifecycle "${Lifecycle$1[r.lifecycle]}" with ValueProviders or FactoryProviders`)}}this._registry.set(e,{provider:n,options:r});return this}registerType(e,t){this.ensureNotDisposed();if(isNormalToken(t)){return this.register(e,{useToken:t})}return this.register(e,{useClass:t})}registerInstance(e,t){this.ensureNotDisposed();return this.register(e,{useValue:t})}registerSingleton(e,t){this.ensureNotDisposed();if(isNormalToken(e)){if(isNormalToken(t)){return this.register(e,{useToken:t},{lifecycle:Lifecycle$1.Singleton})}else if(t){return this.register(e,{useClass:t},{lifecycle:Lifecycle$1.Singleton})}throw new Error('Cannot register a type name as a singleton without a "to" token')}let r=e;if(t&&!isNormalToken(t)){r=t}return this.register(e,{useClass:r},{lifecycle:Lifecycle$1.Singleton})}resolve(e,t=new ResolutionContext){this.ensureNotDisposed();const r=this.getRegistration(e);if(!r&&isNormalToken(e)){throw new Error(`Attempted to resolve unregistered dependency token: "${e.toString()}"`)}this.executePreResolutionInterceptor(e,"Single");if(r){const n=this.resolveRegistration(r,t);this.executePostResolutionInterceptor(e,n,"Single");return n}if(isConstructorToken(e)){const r=this.construct(e,t);this.executePostResolutionInterceptor(e,r,"Single");return r}throw new Error("Attempted to construct an undefined constructor. Could mean a circular dependency problem. Try using `delay` function.")}executePreResolutionInterceptor(e,t){if(this.interceptors.preResolution.has(e)){const r=[];for(const n of this.interceptors.preResolution.getAll(e)){if(n.options.frequency!="Once"){r.push(n)}n.callback(e,t)}this.interceptors.preResolution.setAll(e,r)}}executePostResolutionInterceptor(e,t,r){if(this.interceptors.postResolution.has(e)){const n=[];for(const i of this.interceptors.postResolution.getAll(e)){if(i.options.frequency!="Once"){n.push(i)}i.callback(e,t,r)}this.interceptors.postResolution.setAll(e,n)}}resolveRegistration(e,t){this.ensureNotDisposed();if(e.options.lifecycle===Lifecycle$1.ResolutionScoped&&t.scopedResolutions.has(e)){return t.scopedResolutions.get(e)}const r=e.options.lifecycle===Lifecycle$1.Singleton;const n=e.options.lifecycle===Lifecycle$1.ContainerScoped;const i=r||n;let s;if(isValueProvider(e.provider)){s=e.provider.useValue}else if(isTokenProvider(e.provider)){s=i?e.instance||(e.instance=this.resolve(e.provider.useToken,t)):this.resolve(e.provider.useToken,t)}else if(isClassProvider(e.provider)){s=i?e.instance||(e.instance=this.construct(e.provider.useClass,t)):this.construct(e.provider.useClass,t)}else if(isFactoryProvider(e.provider)){s=e.provider.useFactory(this)}else{s=this.construct(e.provider,t)}if(e.options.lifecycle===Lifecycle$1.ResolutionScoped){t.scopedResolutions.set(e,s)}return s}resolveAll(e,t=new ResolutionContext){this.ensureNotDisposed();const r=this.getAllRegistrations(e);if(!r&&isNormalToken(e)){throw new Error(`Attempted to resolve unregistered dependency token: "${e.toString()}"`)}this.executePreResolutionInterceptor(e,"All");if(r){const n=r.map((e=>this.resolveRegistration(e,t)));this.executePostResolutionInterceptor(e,n,"All");return n}const n=[this.construct(e,t)];this.executePostResolutionInterceptor(e,n,"All");return n}isRegistered(e,t=false){this.ensureNotDisposed();return this._registry.has(e)||t&&(this.parent||false)&&this.parent.isRegistered(e,true)}reset(){this.ensureNotDisposed();this._registry.clear();this.interceptors.preResolution.clear();this.interceptors.postResolution.clear()}clearInstances(){this.ensureNotDisposed();for(const[e,t]of this._registry.entries()){this._registry.setAll(e,t.filter((e=>!isValueProvider(e.provider))).map((e=>{e.instance=undefined;return e})))}}createChildContainer(){this.ensureNotDisposed();const e=new InternalDependencyContainer(this);for(const[t,r]of this._registry.entries()){if(r.some((({options:e})=>e.lifecycle===Lifecycle$1.ContainerScoped))){e._registry.setAll(t,r.map((e=>{if(e.options.lifecycle===Lifecycle$1.ContainerScoped){return{provider:e.provider,options:e.options}}return e})))}}return e}beforeResolution(e,t,r={frequency:"Always"}){this.interceptors.preResolution.set(e,{callback:t,options:r})}afterResolution(e,t,r={frequency:"Always"}){this.interceptors.postResolution.set(e,{callback:t,options:r})}dispose(){return __awaiter(this,void 0,void 0,(function*(){this.disposed=true;const e=[];this.disposables.forEach((t=>{const r=t.dispose();if(r){e.push(r)}}));yield Promise.all(e)}))}getRegistration(e){if(this.isRegistered(e)){return this._registry.get(e)}if(this.parent){return this.parent.getRegistration(e)}return null}getAllRegistrations(e){if(this.isRegistered(e)){return this._registry.getAll(e)}if(this.parent){return this.parent.getAllRegistrations(e)}return null}construct(e,t){if(e instanceof DelayedConstructor){return e.createProxy((e=>this.resolve(e,t)))}const r=(()=>{const r=typeInfo.get(e);if(!r||r.length===0){if(e.length===0){return new e}else{throw new Error(`TypeInfo not known for "${e.name}"`)}}const n=r.map(this.resolveParams(t,e));return new e(...n)})();if(isDisposable(r)){this.disposables.add(r)}return r}resolveParams(e,t){return(r,n)=>{try{if(isTokenDescriptor(r)){if(isTransformDescriptor(r)){return r.multiple?this.resolve(r.transform).transform(this.resolveAll(r.token),...r.transformArgs):this.resolve(r.transform).transform(this.resolve(r.token,e),...r.transformArgs)}else{return r.multiple?this.resolveAll(r.token):this.resolve(r.token,e)}}else if(isTransformDescriptor(r)){return this.resolve(r.transform,e).transform(this.resolve(r.token,e),...r.transformArgs)}return this.resolve(r,e)}catch(e){throw new Error(formatErrorCtor(t,n,e))}}}ensureNotDisposed(){if(this.disposed){throw new Error("This container has been disposed, you cannot interact with a disposed container")}}}const instance=new InternalDependencyContainer;function injectable(){return function(e){typeInfo.set(e,getParamInfo(e))}}if(typeof Reflect==="undefined"||!Reflect.getMetadata){throw new Error(`tsyringe requires a reflect polyfill. Please add 'import "reflect-metadata"' to the top of your entry point.`)}var PKCS12AttrSet_1;class PKCS12Attribute{constructor(e={}){this.attrId="";this.attrValues=[];Object.assign(e)}}__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],PKCS12Attribute.prototype,"attrId",void 0);__decorate([AsnProp({type:AsnPropTypes.Any,repeated:"set"})],PKCS12Attribute.prototype,"attrValues",void 0);let PKCS12AttrSet=PKCS12AttrSet_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,PKCS12AttrSet_1.prototype)}};PKCS12AttrSet=PKCS12AttrSet_1=__decorate([AsnType({type:AsnTypeTypes.Sequence,itemType:PKCS12Attribute})],PKCS12AttrSet);var AuthenticatedSafe_1;let AuthenticatedSafe=AuthenticatedSafe_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,AuthenticatedSafe_1.prototype)}};AuthenticatedSafe=AuthenticatedSafe_1=__decorate([AsnType({type:AsnTypeTypes.Sequence,itemType:ContentInfo})],AuthenticatedSafe);class CertBag{constructor(e={}){this.certId="";this.certValue=new ArrayBuffer(0);Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],CertBag.prototype,"certId",void 0);__decorate([AsnProp({type:AsnPropTypes.Any,context:0})],CertBag.prototype,"certValue",void 0);class CRLBag{constructor(e={}){this.crlId="";this.crltValue=new ArrayBuffer(0);Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],CRLBag.prototype,"crlId",void 0);__decorate([AsnProp({type:AsnPropTypes.Any,context:0})],CRLBag.prototype,"crltValue",void 0);class EncryptedData extends OctetString{}class EncryptedPrivateKeyInfo$1{constructor(e={}){this.encryptionAlgorithm=new AlgorithmIdentifier$1;this.encryptedData=new EncryptedData;Object.assign(this,e)}}__decorate([AsnProp({type:AlgorithmIdentifier$1})],EncryptedPrivateKeyInfo$1.prototype,"encryptionAlgorithm",void 0);__decorate([AsnProp({type:EncryptedData})],EncryptedPrivateKeyInfo$1.prototype,"encryptedData",void 0);var Attributes_1$1;var Version;(function(e){e[e["v1"]=0]="v1"})(Version||(Version={}));class PrivateKey extends OctetString{}let Attributes$1=Attributes_1$1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,Attributes_1$1.prototype)}};Attributes$1=Attributes_1$1=__decorate([AsnType({type:AsnTypeTypes.Sequence,itemType:Attribute$2})],Attributes$1);class PrivateKeyInfo$1{constructor(e={}){this.version=Version.v1;this.privateKeyAlgorithm=new AlgorithmIdentifier$1;this.privateKey=new PrivateKey;Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.Integer})],PrivateKeyInfo$1.prototype,"version",void 0);__decorate([AsnProp({type:AlgorithmIdentifier$1})],PrivateKeyInfo$1.prototype,"privateKeyAlgorithm",void 0);__decorate([AsnProp({type:PrivateKey})],PrivateKeyInfo$1.prototype,"privateKey",void 0);__decorate([AsnProp({type:Attributes$1,implicit:true,context:0,optional:true})],PrivateKeyInfo$1.prototype,"attributes",void 0);let KeyBag=class e extends PrivateKeyInfo$1{};KeyBag=__decorate([AsnType({type:AsnTypeTypes.Sequence})],KeyBag);let PKCS8ShroudedKeyBag=class e extends EncryptedPrivateKeyInfo$1{};PKCS8ShroudedKeyBag=__decorate([AsnType({type:AsnTypeTypes.Sequence})],PKCS8ShroudedKeyBag);class SecretBag{constructor(e={}){this.secretTypeId="";this.secretValue=new ArrayBuffer(0);Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],SecretBag.prototype,"secretTypeId",void 0);__decorate([AsnProp({type:AsnPropTypes.Any,context:0})],SecretBag.prototype,"secretValue",void 0);class MacData{constructor(e={}){this.mac=new DigestInfo;this.macSalt=new OctetString;this.iterations=1;Object.assign(this,e)}}__decorate([AsnProp({type:DigestInfo})],MacData.prototype,"mac",void 0);__decorate([AsnProp({type:OctetString})],MacData.prototype,"macSalt",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,defaultValue:1})],MacData.prototype,"iterations",void 0);class PFX{constructor(e={}){this.version=3;this.authSafe=new ContentInfo;this.macData=new MacData;Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.Integer})],PFX.prototype,"version",void 0);__decorate([AsnProp({type:ContentInfo})],PFX.prototype,"authSafe",void 0);__decorate([AsnProp({type:MacData,optional:true})],PFX.prototype,"macData",void 0);var SafeContents_1;class SafeBag{constructor(e={}){this.bagId="";this.bagValue=new ArrayBuffer(0);Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],SafeBag.prototype,"bagId",void 0);__decorate([AsnProp({type:AsnPropTypes.Any,context:0})],SafeBag.prototype,"bagValue",void 0);__decorate([AsnProp({type:PKCS12Attribute,repeated:"set",optional:true})],SafeBag.prototype,"bagAttributes",void 0);let SafeContents=SafeContents_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,SafeContents_1.prototype)}};SafeContents=SafeContents_1=__decorate([AsnType({type:AsnTypeTypes.Sequence,itemType:SafeBag})],SafeContents);var ExtensionRequest_1,ExtendedCertificateAttributes_1,SMIMECapabilities_1;const id_pkcs9="1.2.840.113549.1.9";const id_pkcs9_at_challengePassword=`${id_pkcs9}.7`;const id_pkcs9_at_extensionRequest=`${id_pkcs9}.14`;let PKCS9String=class e extends DirectoryString{constructor(e={}){super(e)}toString(){return this.ia5String||super.toString()}};__decorate([AsnProp({type:AsnPropTypes.IA5String})],PKCS9String.prototype,"ia5String",void 0);PKCS9String=__decorate([AsnType({type:AsnTypeTypes.Choice})],PKCS9String);let Pkcs7PDU=class e extends ContentInfo{};Pkcs7PDU=__decorate([AsnType({type:AsnTypeTypes.Sequence})],Pkcs7PDU);let UserPKCS12=class e extends PFX{};UserPKCS12=__decorate([AsnType({type:AsnTypeTypes.Sequence})],UserPKCS12);let EncryptedPrivateKeyInfo=class e extends EncryptedPrivateKeyInfo$1{};EncryptedPrivateKeyInfo=__decorate([AsnType({type:AsnTypeTypes.Sequence})],EncryptedPrivateKeyInfo);let EmailAddress=class e{constructor(e=""){this.value=e}toString(){return this.value}};__decorate([AsnProp({type:AsnPropTypes.IA5String})],EmailAddress.prototype,"value",void 0);EmailAddress=__decorate([AsnType({type:AsnTypeTypes.Choice})],EmailAddress);let UnstructuredName=class e extends PKCS9String{};UnstructuredName=__decorate([AsnType({type:AsnTypeTypes.Choice})],UnstructuredName);let UnstructuredAddress=class e extends DirectoryString{};UnstructuredAddress=__decorate([AsnType({type:AsnTypeTypes.Choice})],UnstructuredAddress);let DateOfBirth=class e{constructor(e=new Date){this.value=e}};__decorate([AsnProp({type:AsnPropTypes.GeneralizedTime})],DateOfBirth.prototype,"value",void 0);DateOfBirth=__decorate([AsnType({type:AsnTypeTypes.Choice})],DateOfBirth);let PlaceOfBirth=class e extends DirectoryString{};PlaceOfBirth=__decorate([AsnType({type:AsnTypeTypes.Choice})],PlaceOfBirth);let Gender=class e{constructor(e="M"){this.value=e}toString(){return this.value}};__decorate([AsnProp({type:AsnPropTypes.PrintableString})],Gender.prototype,"value",void 0);Gender=__decorate([AsnType({type:AsnTypeTypes.Choice})],Gender);let CountryOfCitizenship=class e{constructor(e=""){this.value=e}toString(){return this.value}};__decorate([AsnProp({type:AsnPropTypes.PrintableString})],CountryOfCitizenship.prototype,"value",void 0);CountryOfCitizenship=__decorate([AsnType({type:AsnTypeTypes.Choice})],CountryOfCitizenship);let CountryOfResidence=class e extends CountryOfCitizenship{};CountryOfResidence=__decorate([AsnType({type:AsnTypeTypes.Choice})],CountryOfResidence);let Pseudonym=class e extends DirectoryString{};Pseudonym=__decorate([AsnType({type:AsnTypeTypes.Choice})],Pseudonym);let ContentType=class e{constructor(e=""){this.value=e}toString(){return this.value}};__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],ContentType.prototype,"value",void 0);ContentType=__decorate([AsnType({type:AsnTypeTypes.Choice})],ContentType);let SigningTime=class e extends Time{};SigningTime=__decorate([AsnType({type:AsnTypeTypes.Choice})],SigningTime);let SequenceNumber=class e{constructor(e=0){this.value=e}toString(){return this.value.toString()}};__decorate([AsnProp({type:AsnPropTypes.Integer})],SequenceNumber.prototype,"value",void 0);SequenceNumber=__decorate([AsnType({type:AsnTypeTypes.Choice})],SequenceNumber);let CounterSignature=class e extends SignerInfo{};CounterSignature=__decorate([AsnType({type:AsnTypeTypes.Sequence})],CounterSignature);let ChallengePassword=class e extends DirectoryString{};ChallengePassword=__decorate([AsnType({type:AsnTypeTypes.Choice})],ChallengePassword);let ExtensionRequest=ExtensionRequest_1=class e extends Extensions{constructor(e){super(e);Object.setPrototypeOf(this,ExtensionRequest_1.prototype)}};ExtensionRequest=ExtensionRequest_1=__decorate([AsnType({type:AsnTypeTypes.Sequence})],ExtensionRequest);let ExtendedCertificateAttributes=ExtendedCertificateAttributes_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,ExtendedCertificateAttributes_1.prototype)}};ExtendedCertificateAttributes=ExtendedCertificateAttributes_1=__decorate([AsnType({type:AsnTypeTypes.Set,itemType:Attribute$1})],ExtendedCertificateAttributes);let FriendlyName=class e{constructor(e=""){this.value=e}toString(){return this.value}};__decorate([AsnProp({type:AsnPropTypes.BmpString})],FriendlyName.prototype,"value",void 0);FriendlyName=__decorate([AsnType({type:AsnTypeTypes.Choice})],FriendlyName);let SMIMECapability=class e extends AlgorithmIdentifier$1{};SMIMECapability=__decorate([AsnType({type:AsnTypeTypes.Sequence})],SMIMECapability);let SMIMECapabilities=SMIMECapabilities_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,SMIMECapabilities_1.prototype)}};SMIMECapabilities=SMIMECapabilities_1=__decorate([AsnType({type:AsnTypeTypes.Sequence,itemType:SMIMECapability})],SMIMECapabilities);var Attributes_1;let Attributes=Attributes_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,Attributes_1.prototype)}};Attributes=Attributes_1=__decorate([AsnType({type:AsnTypeTypes.Sequence,itemType:Attribute$2})],Attributes);class CertificationRequestInfo{constructor(e={}){this.version=0;this.subject=new Name$1;this.subjectPKInfo=new SubjectPublicKeyInfo;this.attributes=new Attributes;Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.Integer})],CertificationRequestInfo.prototype,"version",void 0);__decorate([AsnProp({type:Name$1})],CertificationRequestInfo.prototype,"subject",void 0);__decorate([AsnProp({type:SubjectPublicKeyInfo})],CertificationRequestInfo.prototype,"subjectPKInfo",void 0);__decorate([AsnProp({type:Attributes,implicit:true,context:0})],CertificationRequestInfo.prototype,"attributes",void 0);class CertificationRequest{constructor(e={}){this.certificationRequestInfo=new CertificationRequestInfo;this.signatureAlgorithm=new AlgorithmIdentifier$1;this.signature=new ArrayBuffer(0);Object.assign(this,e)}}__decorate([AsnProp({type:CertificationRequestInfo})],CertificationRequest.prototype,"certificationRequestInfo",void 0);__decorate([AsnProp({type:AlgorithmIdentifier$1})],CertificationRequest.prototype,"signatureAlgorithm",void 0);__decorate([AsnProp({type:AsnPropTypes.BitString})],CertificationRequest.prototype,"signature",void 0);
/*!
 * MIT License
 * 
 * Copyright (c) Peculiar Ventures. All rights reserved.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 * 
 */const diAlgorithm="crypto.algorithm";class AlgorithmProvider{getAlgorithms(){return instance.resolveAll(diAlgorithm)}toAsnAlgorithm(e){for(const t of this.getAlgorithms()){const r=t.toAsnAlgorithm(e);if(r){return r}}if(/[0-9.]+/.test(e.name)){const t=new AlgorithmIdentifier$1({algorithm:e.name});if("parameters"in e){const r=e;t.parameters=r.parameters}return t}throw new Error("Cannot convert WebCrypto algorithm to ASN.1 algorithm")}toWebAlgorithm(e){for(const t of this.getAlgorithms()){const r=t.toWebAlgorithm(e);if(r){return r}}const t={name:e.algorithm,parameters:e.parameters};return t}}const diAlgorithmProvider="crypto.algorithmProvider";instance.registerSingleton(diAlgorithmProvider,AlgorithmProvider);var EcAlgorithm_1;const idVersionOne$1="1.3.36.3.3.2.8.1.1";const idBrainpoolP160r1$1=`${idVersionOne$1}.1`;const idBrainpoolP160t1$1=`${idVersionOne$1}.2`;const idBrainpoolP192r1$1=`${idVersionOne$1}.3`;const idBrainpoolP192t1$1=`${idVersionOne$1}.4`;const idBrainpoolP224r1$1=`${idVersionOne$1}.5`;const idBrainpoolP224t1$1=`${idVersionOne$1}.6`;const idBrainpoolP256r1$1=`${idVersionOne$1}.7`;const idBrainpoolP256t1$1=`${idVersionOne$1}.8`;const idBrainpoolP320r1$1=`${idVersionOne$1}.9`;const idBrainpoolP320t1$1=`${idVersionOne$1}.10`;const idBrainpoolP384r1$1=`${idVersionOne$1}.11`;const idBrainpoolP384t1$1=`${idVersionOne$1}.12`;const idBrainpoolP512r1$1=`${idVersionOne$1}.13`;const idBrainpoolP512t1$1=`${idVersionOne$1}.14`;const brainpoolP160r1="brainpoolP160r1";const brainpoolP160t1="brainpoolP160t1";const brainpoolP192r1="brainpoolP192r1";const brainpoolP192t1="brainpoolP192t1";const brainpoolP224r1="brainpoolP224r1";const brainpoolP224t1="brainpoolP224t1";const brainpoolP256r1="brainpoolP256r1";const brainpoolP256t1="brainpoolP256t1";const brainpoolP320r1="brainpoolP320r1";const brainpoolP320t1="brainpoolP320t1";const brainpoolP384r1="brainpoolP384r1";const brainpoolP384t1="brainpoolP384t1";const brainpoolP512r1="brainpoolP512r1";const brainpoolP512t1="brainpoolP512t1";const ECDSA="ECDSA";let EcAlgorithm=EcAlgorithm_1=class e{toAsnAlgorithm(e){switch(e.name.toLowerCase()){case ECDSA.toLowerCase():if("hash"in e){const t=typeof e.hash==="string"?e.hash:e.hash.name;switch(t.toLowerCase()){case"sha-1":return ecdsaWithSHA1;case"sha-256":return ecdsaWithSHA256;case"sha-384":return ecdsaWithSHA384;case"sha-512":return ecdsaWithSHA512}}else if("namedCurve"in e){let t="";switch(e.namedCurve){case"P-256":t=id_secp256r1;break;case"K-256":t=EcAlgorithm_1.SECP256K1;break;case"P-384":t=id_secp384r1;break;case"P-521":t=id_secp521r1;break;case brainpoolP160r1:t=idBrainpoolP160r1$1;break;case brainpoolP160t1:t=idBrainpoolP160t1$1;break;case brainpoolP192r1:t=idBrainpoolP192r1$1;break;case brainpoolP192t1:t=idBrainpoolP192t1$1;break;case brainpoolP224r1:t=idBrainpoolP224r1$1;break;case brainpoolP224t1:t=idBrainpoolP224t1$1;break;case brainpoolP256r1:t=idBrainpoolP256r1$1;break;case brainpoolP256t1:t=idBrainpoolP256t1$1;break;case brainpoolP320r1:t=idBrainpoolP320r1$1;break;case brainpoolP320t1:t=idBrainpoolP320t1$1;break;case brainpoolP384r1:t=idBrainpoolP384r1$1;break;case brainpoolP384t1:t=idBrainpoolP384t1$1;break;case brainpoolP512r1:t=idBrainpoolP512r1$1;break;case brainpoolP512t1:t=idBrainpoolP512t1$1;break}if(t){return new AlgorithmIdentifier$1({algorithm:id_ecPublicKey,parameters:AsnConvert.serialize(new ECParameters({namedCurve:t}))})}}}return null}toWebAlgorithm(e){switch(e.algorithm){case id_ecdsaWithSHA1:return{name:ECDSA,hash:{name:"SHA-1"}};case id_ecdsaWithSHA256:return{name:ECDSA,hash:{name:"SHA-256"}};case id_ecdsaWithSHA384:return{name:ECDSA,hash:{name:"SHA-384"}};case id_ecdsaWithSHA512:return{name:ECDSA,hash:{name:"SHA-512"}};case id_ecPublicKey:{if(!e.parameters){throw new TypeError("Cannot get required parameters from EC algorithm")}const t=AsnConvert.parse(e.parameters,ECParameters);switch(t.namedCurve){case id_secp256r1:return{name:ECDSA,namedCurve:"P-256"};case EcAlgorithm_1.SECP256K1:return{name:ECDSA,namedCurve:"K-256"};case id_secp384r1:return{name:ECDSA,namedCurve:"P-384"};case id_secp521r1:return{name:ECDSA,namedCurve:"P-521"};case idBrainpoolP160r1$1:return{name:ECDSA,namedCurve:brainpoolP160r1};case idBrainpoolP160t1$1:return{name:ECDSA,namedCurve:brainpoolP160t1};case idBrainpoolP192r1$1:return{name:ECDSA,namedCurve:brainpoolP192r1};case idBrainpoolP192t1$1:return{name:ECDSA,namedCurve:brainpoolP192t1};case idBrainpoolP224r1$1:return{name:ECDSA,namedCurve:brainpoolP224r1};case idBrainpoolP224t1$1:return{name:ECDSA,namedCurve:brainpoolP224t1};case idBrainpoolP256r1$1:return{name:ECDSA,namedCurve:brainpoolP256r1};case idBrainpoolP256t1$1:return{name:ECDSA,namedCurve:brainpoolP256t1};case idBrainpoolP320r1$1:return{name:ECDSA,namedCurve:brainpoolP320r1};case idBrainpoolP320t1$1:return{name:ECDSA,namedCurve:brainpoolP320t1};case idBrainpoolP384r1$1:return{name:ECDSA,namedCurve:brainpoolP384r1};case idBrainpoolP384t1$1:return{name:ECDSA,namedCurve:brainpoolP384t1};case idBrainpoolP512r1$1:return{name:ECDSA,namedCurve:brainpoolP512r1};case idBrainpoolP512t1$1:return{name:ECDSA,namedCurve:brainpoolP512t1}}}}return null}};EcAlgorithm.SECP256K1="1.3.132.0.10";EcAlgorithm=EcAlgorithm_1=__decorate([injectable()],EcAlgorithm);instance.registerSingleton(diAlgorithm,EcAlgorithm);const NAME$1=Symbol("name");const VALUE=Symbol("value");class TextObject{constructor(e,t={},r=""){this[NAME$1]=e;this[VALUE]=r;for(const e in t){this[e]=t[e]}}}TextObject.NAME=NAME$1;TextObject.VALUE=VALUE;class DefaultAlgorithmSerializer{static toTextObject(e){const t=new TextObject("Algorithm Identifier",{},OidSerializer.toString(e.algorithm));if(e.parameters){switch(e.algorithm){case id_ecPublicKey:{const r=(new EcAlgorithm).toWebAlgorithm(e);if(r&&"namedCurve"in r){t["Named Curve"]=r.namedCurve}else{t["Parameters"]=e.parameters}break}default:t["Parameters"]=e.parameters}}return t}}class OidSerializer{static toString(e){const t=this.items[e];if(t){return t}return e}}OidSerializer.items={[id_sha1]:"sha1",[id_sha224]:"sha224",[id_sha256]:"sha256",[id_sha384]:"sha384",[id_sha512]:"sha512",[id_rsaEncryption]:"rsaEncryption",[id_sha1WithRSAEncryption]:"sha1WithRSAEncryption",[id_sha224WithRSAEncryption]:"sha224WithRSAEncryption",[id_sha256WithRSAEncryption]:"sha256WithRSAEncryption",[id_sha384WithRSAEncryption]:"sha384WithRSAEncryption",[id_sha512WithRSAEncryption]:"sha512WithRSAEncryption",[id_ecPublicKey]:"ecPublicKey",[id_ecdsaWithSHA1]:"ecdsaWithSHA1",[id_ecdsaWithSHA224]:"ecdsaWithSHA224",[id_ecdsaWithSHA256]:"ecdsaWithSHA256",[id_ecdsaWithSHA384]:"ecdsaWithSHA384",[id_ecdsaWithSHA512]:"ecdsaWithSHA512",[id_kp_serverAuth]:"TLS WWW server authentication",[id_kp_clientAuth]:"TLS WWW client authentication",[id_kp_codeSigning]:"Code Signing",[id_kp_emailProtection]:"E-mail Protection",[id_kp_timeStamping]:"Time Stamping",[id_kp_OCSPSigning]:"OCSP Signing",[id_signedData]:"Signed Data"};class TextConverter{static serialize(e){return this.serializeObj(e).join("\n")}static pad(e=0){return"".padStart(2*e," ")}static serializeObj(e,t=0){const r=[];let n=this.pad(t++);let i="";const s=e[TextObject.VALUE];if(s){i=` ${s}`}r.push(`${n}${e[TextObject.NAME]}:${i}`);n=this.pad(t);for(const i in e){if(typeof i==="symbol"){continue}const s=e[i];const a=i?`${i}: `:"";if(typeof s==="string"||typeof s==="number"||typeof s==="boolean"){r.push(`${n}${a}${s}`)}else if(s instanceof Date){r.push(`${n}${a}${s.toUTCString()}`)}else if(Array.isArray(s)){for(const e of s){e[TextObject.NAME]=i;r.push(...this.serializeObj(e,t))}}else if(s instanceof TextObject){s[TextObject.NAME]=i;r.push(...this.serializeObj(s,t))}else if(BufferSourceConverter_1.isBufferSource(s)){if(i){r.push(`${n}${a}`);r.push(...this.serializeBufferSource(s,t+1))}else{r.push(...this.serializeBufferSource(s,t))}}else if("toTextObject"in s){const e=s.toTextObject();e[TextObject.NAME]=i;r.push(...this.serializeObj(e,t))}else{throw new TypeError("Cannot serialize data in text format. Unsupported type.")}}return r}static serializeBufferSource(e,t=0){const r=this.pad(t);const n=BufferSourceConverter_1.toUint8Array(e);const i=[];for(let e=0;e<n.length;){const t=[];for(let r=0;r<16&&e<n.length;r++){if(r===8){t.push("")}const i=n[e++].toString(16).padStart(2,"0");t.push(i)}i.push(`${r}${t.join(" ")}`)}return i}static serializeAlgorithm(e){return this.algorithmSerializer.toTextObject(e)}}TextConverter.oidSerializer=OidSerializer;TextConverter.algorithmSerializer=DefaultAlgorithmSerializer;class AsnData{constructor(...e){if(e.length===1){const t=e[0];this.rawData=AsnConvert.serialize(t);this.onInit(t)}else{const t=AsnConvert.parse(e[0],e[1]);this.rawData=BufferSourceConverter_1.toArrayBuffer(e[0]);this.onInit(t)}}equal(e){if(e instanceof AsnData){return isEqual_1$1(e.rawData,this.rawData)}return false}toString(e="text"){switch(e){case"asn":return AsnConvert.toString(this.rawData);case"text":return TextConverter.serialize(this.toTextObject());case"hex":return Convert_1.ToHex(this.rawData);case"base64":return Convert_1.ToBase64(this.rawData);case"base64url":return Convert_1.ToBase64Url(this.rawData);default:throw TypeError("Argument 'format' is unsupported value")}}getTextName(){const e=this.constructor;return e.NAME}toTextObject(){const e=this.toTextObjectEmpty();e[""]=this.rawData;return e}toTextObjectEmpty(e){return new TextObject(this.getTextName(),{},e)}}AsnData.NAME="ASN";class Extension extends AsnData{constructor(...e){let t;if(BufferSourceConverter_1.isBufferSource(e[0])){t=BufferSourceConverter_1.toArrayBuffer(e[0])}else{t=AsnConvert.serialize(new Extension$1({extnID:e[0],critical:e[1],extnValue:new OctetString(BufferSourceConverter_1.toArrayBuffer(e[2]))}))}super(t,Extension$1)}onInit(e){this.type=e.extnID;this.critical=e.critical;this.value=e.extnValue.buffer}toTextObject(){const e=this.toTextObjectWithoutValue();e[""]=this.value;return e}toTextObjectWithoutValue(){const e=this.toTextObjectEmpty(this.critical?"critical":undefined);if(e[TextObject.NAME]===Extension.NAME){e[TextObject.NAME]=OidSerializer.toString(this.type)}return e}}var _a;class CryptoProvider{constructor(){this.items=new Map;this[_a]="CryptoProvider";if(typeof self!=="undefined"&&typeof crypto!=="undefined"){this.set(CryptoProvider.DEFAULT,crypto)}}static isCryptoKeyPair(e){return e&&e.privateKey&&e.publicKey}static isCryptoKey(e){return e&&e.usages&&e.type&&e.algorithm&&e.extractable!==undefined}clear(){this.items.clear()}delete(e){return this.items.delete(e)}forEach(e,t){return this.items.forEach(e,t)}has(e){return this.items.has(e)}get size(){return this.items.size}entries(){return this.items.entries()}keys(){return this.items.keys()}values(){return this.items.values()}[Symbol.iterator](){return this.items[Symbol.iterator]()}get(e=CryptoProvider.DEFAULT){const t=this.items.get(e.toLowerCase());if(!t){throw new Error(`Cannot get Crypto by name '${e}'`)}return t}set(e,t){if(typeof e==="string"){if(!t){throw new TypeError("Argument 'value' is required")}this.items.set(e.toLowerCase(),t)}else{this.items.set(CryptoProvider.DEFAULT,e)}return this}}_a=Symbol.toStringTag;CryptoProvider.DEFAULT="default";const cryptoProvider=new CryptoProvider;const OID_REGEX=/^[0-2](?:\.[1-9][0-9]*)+$/;function isOID(e){return new RegExp(OID_REGEX).test(e)}class NameIdentifier{constructor(e={}){this.items={};for(const t in e){this.register(t,e[t])}}get(e){return this.items[e]||null}findId(e){if(!isOID(e)){return this.get(e)}return e}register(e,t){this.items[e]=t;this.items[t]=e}}const names$3=new NameIdentifier;names$3.register("CN","2.5.4.3");names$3.register("L","2.5.4.7");names$3.register("ST","2.5.4.8");names$3.register("O","2.5.4.10");names$3.register("OU","2.5.4.11");names$3.register("C","2.5.4.6");names$3.register("DC","0.9.2342.19200300.100.1.25");names$3.register("E","1.2.840.113549.1.9.1");names$3.register("G","2.5.4.42");names$3.register("I","2.5.4.43");names$3.register("SN","2.5.4.4");names$3.register("T","2.5.4.12");function replaceUnknownCharacter(e,t){return`\\${Convert_1.ToHex(Convert_1.FromUtf8String(t)).toUpperCase()}`}function escape$1(e){return e.replace(/([,+"\\<>;])/g,"\\$1").replace(/^([ #])/,"\\$1").replace(/([ ]$)/,"\\$1").replace(/([\r\n\t])/,replaceUnknownCharacter)}class Name{constructor(e,t={}){this.extraNames=new NameIdentifier;this.asn=new Name$1;for(const e in t){if(Object.prototype.hasOwnProperty.call(t,e)){const r=t[e];this.extraNames.register(e,r)}}if(typeof e==="string"){this.asn=this.fromString(e)}else if(e instanceof Name$1){this.asn=e}else if(BufferSourceConverter_1.isBufferSource(e)){this.asn=AsnConvert.parse(e,Name$1)}else{this.asn=this.fromJSON(e)}}static isASCII(e){for(let t=0;t<e.length;t++){const r=e.charCodeAt(t);if(r>255){return false}}return true}getField(e){const t=this.extraNames.findId(e)||names$3.findId(e);const r=[];for(const e of this.asn){for(const n of e){if(n.type===t){r.push(n.value.toString())}}}return r}getName(e){return this.extraNames.get(e)||names$3.get(e)}toString(){return this.asn.map((e=>e.map((e=>{const t=this.getName(e.type)||e.type;const r=e.value.anyValue?`#${Convert_1.ToHex(e.value.anyValue)}`:escape$1(e.value.toString());return`${t}=${r}`})).join("+"))).join(", ")}toJSON(){var e;const t=[];for(const r of this.asn){const n={};for(const t of r){const r=this.getName(t.type)||t.type;(e=n[r])!==null&&e!==void 0?e:n[r]=[];n[r].push(t.value.anyValue?`#${Convert_1.ToHex(t.value.anyValue)}`:t.value.toString())}t.push(n)}return t}fromString(e){const t=new Name$1;const r=/(\d\.[\d.]*\d|[A-Za-z]+)=((?:"")|(?:".*?[^\\]")|(?:[^,+].*?(?:[^\\][,+]))|(?:))([,+])?/g;let n=null;let i=",";while(n=r.exec(`${e},`)){let[,e,r]=n;const s=r[r.length-1];if(s===","||s==="+"){r=r.slice(0,r.length-1);n[3]=s}const a=n[3];if(!/[\d.]+/.test(e)){e=this.getName(e)||""}if(!e){throw new Error(`Cannot get OID for name type '${e}'`)}const o=new AttributeTypeAndValue({type:e});if(r.charAt(0)==="#"){o.value.anyValue=Convert_1.FromHex(r.slice(1))}else{const t=/"(.*?[^\\])?"/.exec(r);if(t){r=t[1]}r=r.replace(/\\0a/gi,"\n").replace(/\\0d/gi,"\r").replace(/\\0g/gi,"\t").replace(/\\(.)/g,"$1");if(e===this.getName("E")||e===this.getName("DC")){o.value.ia5String=r}else{if(Name.isASCII(r)){o.value.printableString=r}else{o.value.utf8String=r}}}if(i==="+"){t[t.length-1].push(o)}else{t.push(new RelativeDistinguishedName([o]))}i=a}return t}fromJSON(e){const t=new Name$1;for(const r of e){const e=new RelativeDistinguishedName;for(const t in r){let n=t;if(!/[\d.]+/.test(t)){n=this.getName(t)||""}if(!n){throw new Error(`Cannot get OID for name type '${t}'`)}const i=r[t];for(const t of i){const r=new AttributeTypeAndValue({type:n});if(typeof t==="object"){for(const e in t){switch(e){case"ia5String":r.value.ia5String=t[e];break;case"utf8String":r.value.utf8String=t[e];break;case"universalString":r.value.universalString=t[e];break;case"bmpString":r.value.bmpString=t[e];break;case"printableString":r.value.printableString=t[e];break}}}else if(t[0]==="#"){r.value.anyValue=Convert_1.FromHex(t.slice(1))}else{if(n===this.getName("E")||n===this.getName("DC")){r.value.ia5String=t}else{r.value.printableString=t}}e.push(r)}}t.push(e)}return t}toArrayBuffer(){return AsnConvert.serialize(this.asn)}async getThumbprint(...e){var t;let r;let n="SHA-1";if(e.length>=1&&!((t=e[0])===null||t===void 0?void 0:t.subtle)){n=e[0]||n;r=e[1]||cryptoProvider.get()}else{r=e[0]||cryptoProvider.get()}return await r.subtle.digest(n,this.toArrayBuffer())}}const ERR_GN_CONSTRUCTOR="Cannot initialize GeneralName from ASN.1 data.";const ERR_GN_STRING_FORMAT=`${ERR_GN_CONSTRUCTOR} Unsupported string format in use.`;const ERR_GUID=`${ERR_GN_CONSTRUCTOR} Value doesn't match to GUID regular expression.`;const GUID_REGEX=/^([0-9a-f]{8})-?([0-9a-f]{4})-?([0-9a-f]{4})-?([0-9a-f]{4})-?([0-9a-f]{12})$/i;const id_GUID="1.3.6.1.4.1.311.25.1";const id_UPN="1.3.6.1.4.1.311.20.2.3";const DNS="dns";const DN="dn";const EMAIL="email";const IP="ip";const URL$1="url";const GUID="guid";const UPN="upn";const REGISTERED_ID="id";class GeneralName extends AsnData{constructor(...e){let t;if(e.length===2){switch(e[0]){case DN:{const r=new Name(e[1]).toArrayBuffer();const n=AsnConvert.parse(r,Name$1);t=new GeneralName$1({directoryName:n});break}case DNS:t=new GeneralName$1({dNSName:e[1]});break;case EMAIL:t=new GeneralName$1({rfc822Name:e[1]});break;case GUID:{const r=new RegExp(GUID_REGEX,"i").exec(e[1]);if(!r){throw new Error("Cannot parse GUID value. Value doesn't match to regular expression")}const n=r.slice(1).map(((e,t)=>{if(t<3){return Convert_1.ToHex(new Uint8Array(Convert_1.FromHex(e)).reverse())}return e})).join("");t=new GeneralName$1({otherName:new OtherName({typeId:id_GUID,value:AsnConvert.serialize(new OctetString(Convert_1.FromHex(n)))})});break}case IP:t=new GeneralName$1({iPAddress:e[1]});break;case REGISTERED_ID:t=new GeneralName$1({registeredID:e[1]});break;case UPN:{t=new GeneralName$1({otherName:new OtherName({typeId:id_UPN,value:AsnConvert.serialize(AsnUtf8StringConverter.toASN(e[1]))})});break}case URL$1:t=new GeneralName$1({uniformResourceIdentifier:e[1]});break;default:throw new Error("Cannot create GeneralName. Unsupported type of the name")}}else if(BufferSourceConverter_1.isBufferSource(e[0])){t=AsnConvert.parse(e[0],GeneralName$1)}else{t=e[0]}super(t)}onInit(e){if(e.dNSName!=undefined){this.type=DNS;this.value=e.dNSName}else if(e.rfc822Name!=undefined){this.type=EMAIL;this.value=e.rfc822Name}else if(e.iPAddress!=undefined){this.type=IP;this.value=e.iPAddress}else if(e.uniformResourceIdentifier!=undefined){this.type=URL$1;this.value=e.uniformResourceIdentifier}else if(e.registeredID!=undefined){this.type=REGISTERED_ID;this.value=e.registeredID}else if(e.directoryName!=undefined){this.type=DN;this.value=new Name(e.directoryName).toString()}else if(e.otherName!=undefined){if(e.otherName.typeId===id_GUID){this.type=GUID;const t=AsnConvert.parse(e.otherName.value,OctetString);const r=new RegExp(GUID_REGEX,"i").exec(Convert_1.ToHex(t));if(!r){throw new Error(ERR_GUID)}this.value=r.slice(1).map(((e,t)=>{if(t<3){return Convert_1.ToHex(new Uint8Array(Convert_1.FromHex(e)).reverse())}return e})).join("-")}else if(e.otherName.typeId===id_UPN){this.type=UPN;this.value=AsnConvert.parse(e.otherName.value,DirectoryString).toString()}else{throw new Error(ERR_GN_STRING_FORMAT)}}else{throw new Error(ERR_GN_STRING_FORMAT)}}toJSON(){return{type:this.type,value:this.value}}toTextObject(){let e;switch(this.type){case DN:case DNS:case GUID:case IP:case REGISTERED_ID:case UPN:case URL$1:e=this.type.toUpperCase();break;case EMAIL:e="Email";break;default:throw new Error("Unsupported GeneralName type")}let t=this.value;if(this.type===REGISTERED_ID){t=OidSerializer.toString(t)}return new TextObject(e,undefined,t)}}class GeneralNames extends AsnData{constructor(e){let t;if(e instanceof GeneralNames$1){t=e}else if(Array.isArray(e)){const r=[];for(const t of e){if(t instanceof GeneralName$1){r.push(t)}else{const e=AsnConvert.parse(new GeneralName(t.type,t.value).rawData,GeneralName$1);r.push(e)}}t=new GeneralNames$1(r)}else if(BufferSourceConverter_1.isBufferSource(e)){t=AsnConvert.parse(e,GeneralNames$1)}else{throw new Error("Cannot initialize GeneralNames. Incorrect incoming arguments")}super(t)}onInit(e){const t=[];for(const r of e){let e=null;try{e=new GeneralName(r)}catch{continue}t.push(e)}this.items=t}toJSON(){return this.items.map((e=>e.toJSON()))}toTextObject(){const e=super.toTextObjectEmpty();for(const t of this.items){const r=t.toTextObject();let n=e[r[TextObject.NAME]];if(!Array.isArray(n)){n=[];e[r[TextObject.NAME]]=n}n.push(r)}return e}}GeneralNames.NAME="GeneralNames";const rPaddingTag="-{5}";const rEolChars="\\n";const rNameTag=`[^${rEolChars}]+`;const rBeginTag=`${rPaddingTag}BEGIN (${rNameTag}(?=${rPaddingTag}))${rPaddingTag}`;const rEndTag=`${rPaddingTag}END \\1${rPaddingTag}`;const rEolGroup="\\n";const rHeaderKey=`[^:${rEolChars}]+`;const rHeaderValue=`(?:[^${rEolChars}]+${rEolGroup}(?: +[^${rEolChars}]+${rEolGroup})*)`;const rBase64Chars="[a-zA-Z0-9=+/]+";const rBase64=`(?:${rBase64Chars}${rEolGroup})+`;const rPem=`${rBeginTag}${rEolGroup}(?:((?:${rHeaderKey}: ${rHeaderValue})+))?${rEolGroup}?(${rBase64})${rEndTag}`;class PemConverter$1{static isPem(e){return typeof e==="string"&&new RegExp(rPem,"g").test(e)}static decodeWithHeaders(e){e=e.replace(/\r/g,"");const t=new RegExp(rPem,"g");const r=[];let n=null;while(n=t.exec(e)){const e=n[3].replace(new RegExp(`[${rEolChars}]+`,"g"),"");const t={type:n[1],headers:[],rawData:Convert_1.FromBase64(e)};const i=n[2];if(i){const e=i.split(new RegExp(rEolGroup,"g"));let r=null;for(const n of e){const[e,i]=n.split(/:(.*)/);if(i===undefined){if(!r){throw new Error("Cannot parse PEM string. Incorrect header value")}r.value+=e.trim()}else{if(r){t.headers.push(r)}r={key:e,value:i.trim()}}}if(r){t.headers.push(r)}}r.push(t)}return r}static decode(e){const t=this.decodeWithHeaders(e);return t.map((e=>e.rawData))}static decodeFirst(e){const t=this.decode(e);if(!t.length){throw new RangeError("PEM string doesn't contain any objects")}return t[0]}static encode(e,t){if(Array.isArray(e)){const r=new Array;if(t){e.forEach((e=>{if(!BufferSourceConverter_1.isBufferSource(e)){throw new TypeError("Cannot encode array of BufferSource in PEM format. Not all items of the array are BufferSource")}r.push(this.encodeStruct({type:t,rawData:BufferSourceConverter_1.toArrayBuffer(e)}))}))}else{e.forEach((e=>{if(!("type"in e)){throw new TypeError("Cannot encode array of PemStruct in PEM format. Not all items of the array are PemStrut")}r.push(this.encodeStruct(e))}))}return r.join("\n")}else{if(!t){throw new Error("Required argument 'tag' is missed")}return this.encodeStruct({type:t,rawData:BufferSourceConverter_1.toArrayBuffer(e)})}}static encodeStruct(e){var t;const r=e.type.toLocaleUpperCase();const n=[];n.push(`-----BEGIN ${r}-----`);if((t=e.headers)===null||t===void 0?void 0:t.length){for(const t of e.headers){n.push(`${t.key}: ${t.value}`)}n.push("")}const i=Convert_1.ToBase64(e.rawData);let s;let a=0;const o=Array();while(a<i.length){if(i.length-a<64){s=i.substring(a)}else{s=i.substring(a,a+64);a+=64}if(s.length!==0){o.push(s);if(s.length<64){break}}else{break}}n.push(...o);n.push(`-----END ${r}-----`);return n.join("\n")}}PemConverter$1.CertificateTag="CERTIFICATE";PemConverter$1.CrlTag="CRL";PemConverter$1.CertificateRequestTag="CERTIFICATE REQUEST";PemConverter$1.PublicKeyTag="PUBLIC KEY";PemConverter$1.PrivateKeyTag="PRIVATE KEY";class PemData extends AsnData{static isAsnEncoded(e){return BufferSourceConverter_1.isBufferSource(e)||typeof e==="string"}static toArrayBuffer(e){if(typeof e==="string"){if(PemConverter$1.isPem(e)){return PemConverter$1.decode(e)[0]}else if(Convert_1.isHex(e)){return Convert_1.FromHex(e)}else if(Convert_1.isBase64(e)){return Convert_1.FromBase64(e)}else if(Convert_1.isBase64Url(e)){return Convert_1.FromBase64Url(e)}else{throw new TypeError("Unsupported format of 'raw' argument. Must be one of DER, PEM, HEX, Base64, or Base4Url")}}else{const t=Convert_1.ToBinary(e);if(PemConverter$1.isPem(t)){return PemConverter$1.decode(t)[0]}else if(Convert_1.isHex(t)){return Convert_1.FromHex(t)}else if(Convert_1.isBase64(t)){return Convert_1.FromBase64(t)}else if(Convert_1.isBase64Url(t)){return Convert_1.FromBase64Url(t)}return BufferSourceConverter_1.toArrayBuffer(e)}}constructor(...e){if(PemData.isAsnEncoded(e[0])){super(PemData.toArrayBuffer(e[0]),e[1])}else{super(e[0])}}toString(e="pem"){switch(e){case"pem":return PemConverter$1.encode(this.rawData,this.tag);default:return super.toString(e)}}}class PublicKey extends PemData{constructor(e){if(PemData.isAsnEncoded(e)){super(e,SubjectPublicKeyInfo)}else{super(e)}this.tag=PemConverter$1.PublicKeyTag}async export(...e){let t;let r=["verify"];let n={hash:"SHA-256",...this.algorithm};if(e.length>1){n=e[0]||n;r=e[1]||r;t=e[2]||cryptoProvider.get()}else{t=e[0]||cryptoProvider.get()}return t.subtle.importKey("spki",this.rawData,n,true,r)}onInit(e){const t=instance.resolve(diAlgorithmProvider);const r=this.algorithm=t.toWebAlgorithm(e.algorithm);switch(e.algorithm.algorithm){case id_rsaEncryption:{const t=AsnConvert.parse(e.subjectPublicKey,RSAPublicKey);const n=BufferSourceConverter_1.toUint8Array(t.modulus);r.publicExponent=BufferSourceConverter_1.toUint8Array(t.publicExponent);r.modulusLength=(!n[0]?n.slice(1):n).byteLength<<3;break}}}async getThumbprint(...e){var t;let r;let n="SHA-1";if(e.length>=1&&!((t=e[0])===null||t===void 0?void 0:t.subtle)){n=e[0]||n;r=e[1]||cryptoProvider.get()}else{r=e[0]||cryptoProvider.get()}return await r.subtle.digest(n,this.rawData)}async getKeyIdentifier(e){if(!e){e=cryptoProvider.get()}const t=AsnConvert.parse(this.rawData,SubjectPublicKeyInfo);return await e.subtle.digest("SHA-1",t.subjectPublicKey)}toTextObject(){const e=this.toTextObjectEmpty();const t=AsnConvert.parse(this.rawData,SubjectPublicKeyInfo);e["Algorithm"]=TextConverter.serializeAlgorithm(t.algorithm);switch(t.algorithm.algorithm){case id_ecPublicKey:e["EC Point"]=t.subjectPublicKey;break;case id_rsaEncryption:default:e["Raw Data"]=t.subjectPublicKey}return e}}class ExtensionFactory{static register(e,t){this.items.set(e,t)}static create(e){const t=new Extension(e);const r=this.items.get(t.type);if(r){return new r(e)}return t}}ExtensionFactory.items=new Map;const diAsnSignatureFormatter="crypto.signatureFormatter";class AsnDefaultSignatureFormatter{toAsnSignature(e,t){return BufferSourceConverter_1.toArrayBuffer(t)}toWebSignature(e,t){return BufferSourceConverter_1.toArrayBuffer(t)}}class X509Certificate extends PemData{constructor(e){if(PemData.isAsnEncoded(e)){super(e,Certificate)}else{super(e)}this.tag=PemConverter$1.CertificateTag}onInit(e){const t=e.tbsCertificate;this.tbs=AsnConvert.serialize(t);this.serialNumber=Convert_1.ToHex(t.serialNumber);this.subjectName=new Name(t.subject);this.subject=new Name(t.subject).toString();this.issuerName=new Name(t.issuer);this.issuer=this.issuerName.toString();const r=instance.resolve(diAlgorithmProvider);this.signatureAlgorithm=r.toWebAlgorithm(e.signatureAlgorithm);this.signature=e.signatureValue;const n=t.validity.notBefore.utcTime||t.validity.notBefore.generalTime;if(!n){throw new Error("Cannot get 'notBefore' value")}this.notBefore=n;const i=t.validity.notAfter.utcTime||t.validity.notAfter.generalTime;if(!i){throw new Error("Cannot get 'notAfter' value")}this.notAfter=i;this.extensions=[];if(t.extensions){this.extensions=t.extensions.map((e=>ExtensionFactory.create(AsnConvert.serialize(e))))}this.publicKey=new PublicKey(t.subjectPublicKeyInfo)}getExtension(e){for(const t of this.extensions){if(typeof e==="string"){if(t.type===e){return t}}else{if(t instanceof e){return t}}}return null}getExtensions(e){return this.extensions.filter((t=>{if(typeof e==="string"){return t.type===e}else{return t instanceof e}}))}async verify(e={},t=cryptoProvider.get()){let r;let n;const i=e.publicKey;try{if(!i){r={...this.publicKey.algorithm,...this.signatureAlgorithm};n=await this.publicKey.export(r,["verify"],t)}else if("publicKey"in i){r={...i.publicKey.algorithm,...this.signatureAlgorithm};n=await i.publicKey.export(r,["verify"])}else if(i instanceof PublicKey){r={...i.algorithm,...this.signatureAlgorithm};n=await i.export(r,["verify"])}else if(BufferSourceConverter_1.isBufferSource(i)){const e=new PublicKey(i);r={...e.algorithm,...this.signatureAlgorithm};n=await e.export(r,["verify"])}else{r={...i.algorithm,...this.signatureAlgorithm};n=i}}catch(e){return false}const s=instance.resolveAll(diAsnSignatureFormatter).reverse();let a=null;for(const e of s){a=e.toWebSignature(r,this.signature);if(a){break}}if(!a){throw Error("Cannot convert ASN.1 signature value to WebCrypto format")}const o=await t.subtle.verify(this.signatureAlgorithm,n,a,this.tbs);if(e.signatureOnly){return o}else{const t=e.date||new Date;const r=t.getTime();return o&&this.notBefore.getTime()<r&&r<this.notAfter.getTime()}}async getThumbprint(...e){let t;let r="SHA-1";if(e[0]){if(!e[0].subtle){r=e[0]||r;t=e[1]}else{t=e[0]}}t!==null&&t!==void 0?t:t=cryptoProvider.get();return await t.subtle.digest(r,this.rawData)}async isSelfSigned(e=cryptoProvider.get()){return this.subject===this.issuer&&await this.verify({signatureOnly:true},e)}toTextObject(){const e=this.toTextObjectEmpty();const t=AsnConvert.parse(this.rawData,Certificate);const r=t.tbsCertificate;const n=new TextObject("",{Version:`${Version$1[r.version]} (${r.version})`,"Serial Number":r.serialNumber,"Signature Algorithm":TextConverter.serializeAlgorithm(r.signature),Issuer:this.issuer,Validity:new TextObject("",{"Not Before":r.validity.notBefore.getTime(),"Not After":r.validity.notAfter.getTime()}),Subject:this.subject,"Subject Public Key Info":this.publicKey});if(r.issuerUniqueID){n["Issuer Unique ID"]=r.issuerUniqueID}if(r.subjectUniqueID){n["Subject Unique ID"]=r.subjectUniqueID}if(this.extensions.length){const e=new TextObject("");for(const t of this.extensions){const r=t.toTextObject();e[r[TextObject.NAME]]=r}n["Extensions"]=e}e["Data"]=n;e["Signature"]=new TextObject("",{Algorithm:TextConverter.serializeAlgorithm(t.signatureAlgorithm),"":t.signatureValue});return e}}X509Certificate.NAME="Certificate";class AuthorityKeyIdentifierExtension extends Extension{constructor(...e){if(BufferSourceConverter_1.isBufferSource(e[0])){super(e[0])}else if(typeof e[0]==="string"){const t=new AuthorityKeyIdentifier({keyIdentifier:new KeyIdentifier(Convert_1.FromHex(e[0]))});super(id_ce_authorityKeyIdentifier,e[1],AsnConvert.serialize(t))}else{const t=e[0];const r=t.name instanceof GeneralNames?AsnConvert.parse(t.name.rawData,GeneralNames$1):t.name;const n=new AuthorityKeyIdentifier({authorityCertIssuer:r,authorityCertSerialNumber:Convert_1.FromHex(t.serialNumber)});super(id_ce_authorityKeyIdentifier,e[1],AsnConvert.serialize(n))}}static async create(e,t=false,r=cryptoProvider.get()){if(e instanceof X509Certificate||CryptoProvider.isCryptoKey(e)){const n=e instanceof X509Certificate?await e.publicKey.export(r):e;const i=await r.subtle.exportKey("spki",n);const s=new PublicKey(i);const a=await s.getKeyIdentifier(r);return new AuthorityKeyIdentifierExtension(Convert_1.ToHex(a),t)}else{return new AuthorityKeyIdentifierExtension(e,t)}}onInit(e){super.onInit(e);const t=AsnConvert.parse(e.extnValue,AuthorityKeyIdentifier);if(t.keyIdentifier){this.keyId=Convert_1.ToHex(t.keyIdentifier)}if(t.authorityCertIssuer&&t.authorityCertSerialNumber){this.certId={name:t.authorityCertIssuer,serialNumber:Convert_1.ToHex(t.authorityCertSerialNumber)}}}toTextObject(){const e=this.toTextObjectWithoutValue();const t=AsnConvert.parse(this.value,AuthorityKeyIdentifier);if(t.authorityCertIssuer){e["Authority Issuer"]=new GeneralNames(t.authorityCertIssuer).toTextObject()}if(t.authorityCertSerialNumber){e["Authority Serial Number"]=t.authorityCertSerialNumber}if(t.keyIdentifier){e[""]=t.keyIdentifier}return e}}AuthorityKeyIdentifierExtension.NAME="Authority Key Identifier";class BasicConstraintsExtension extends Extension{constructor(...e){if(BufferSourceConverter_1.isBufferSource(e[0])){super(e[0]);const t=AsnConvert.parse(this.value,BasicConstraints);this.ca=t.cA;this.pathLength=t.pathLenConstraint}else{const t=new BasicConstraints({cA:e[0],pathLenConstraint:e[1]});super(id_ce_basicConstraints,e[2],AsnConvert.serialize(t));this.ca=e[0];this.pathLength=e[1]}}toTextObject(){const e=this.toTextObjectWithoutValue();if(this.ca){e["CA"]=this.ca}if(this.pathLength!==undefined){e["Path Length"]=this.pathLength}return e}}BasicConstraintsExtension.NAME="Basic Constraints";var ExtendedKeyUsage;(function(e){e["serverAuth"]="1.3.6.1.5.5.7.3.1";e["clientAuth"]="1.3.6.1.5.5.7.3.2";e["codeSigning"]="1.3.6.1.5.5.7.3.3";e["emailProtection"]="1.3.6.1.5.5.7.3.4";e["timeStamping"]="1.3.6.1.5.5.7.3.8";e["ocspSigning"]="1.3.6.1.5.5.7.3.9"})(ExtendedKeyUsage||(ExtendedKeyUsage={}));class ExtendedKeyUsageExtension extends Extension{constructor(...e){if(BufferSourceConverter_1.isBufferSource(e[0])){super(e[0]);const t=AsnConvert.parse(this.value,ExtendedKeyUsage$1);this.usages=t.map((e=>e))}else{const t=new ExtendedKeyUsage$1(e[0]);super(id_ce_extKeyUsage,e[1],AsnConvert.serialize(t));this.usages=e[0]}}toTextObject(){const e=this.toTextObjectWithoutValue();e[""]=this.usages.map((e=>OidSerializer.toString(e))).join(", ");return e}}ExtendedKeyUsageExtension.NAME="Extended Key Usages";var KeyUsageFlags;(function(e){e[e["digitalSignature"]=1]="digitalSignature";e[e["nonRepudiation"]=2]="nonRepudiation";e[e["keyEncipherment"]=4]="keyEncipherment";e[e["dataEncipherment"]=8]="dataEncipherment";e[e["keyAgreement"]=16]="keyAgreement";e[e["keyCertSign"]=32]="keyCertSign";e[e["cRLSign"]=64]="cRLSign";e[e["encipherOnly"]=128]="encipherOnly";e[e["decipherOnly"]=256]="decipherOnly"})(KeyUsageFlags||(KeyUsageFlags={}));class KeyUsagesExtension extends Extension{constructor(...e){if(BufferSourceConverter_1.isBufferSource(e[0])){super(e[0]);const t=AsnConvert.parse(this.value,KeyUsage);this.usages=t.toNumber()}else{const t=new KeyUsage(e[0]);super(id_ce_keyUsage,e[1],AsnConvert.serialize(t));this.usages=e[0]}}toTextObject(){const e=this.toTextObjectWithoutValue();const t=AsnConvert.parse(this.value,KeyUsage);e[""]=t.toJSON().join(", ");return e}}KeyUsagesExtension.NAME="Key Usages";class SubjectKeyIdentifierExtension extends Extension{constructor(...e){if(BufferSourceConverter_1.isBufferSource(e[0])){super(e[0]);const t=AsnConvert.parse(this.value,SubjectKeyIdentifier);this.keyId=Convert_1.ToHex(t)}else{const t=typeof e[0]==="string"?Convert_1.FromHex(e[0]):e[0];const r=new SubjectKeyIdentifier(t);super(id_ce_subjectKeyIdentifier,e[1],AsnConvert.serialize(r));this.keyId=Convert_1.ToHex(t)}}static async create(e,t=false,r=cryptoProvider.get()){let n;if(e instanceof PublicKey){n=e.rawData}else if("publicKey"in e){n=e.publicKey.rawData}else if(BufferSourceConverter_1.isBufferSource(e)){n=e}else{n=await r.subtle.exportKey("spki",e)}const i=new PublicKey(n);const s=await i.getKeyIdentifier(r);return new SubjectKeyIdentifierExtension(Convert_1.ToHex(s),t)}toTextObject(){const e=this.toTextObjectWithoutValue();const t=AsnConvert.parse(this.value,SubjectKeyIdentifier);e[""]=t;return e}}SubjectKeyIdentifierExtension.NAME="Subject Key Identifier";class SubjectAlternativeNameExtension extends Extension{constructor(...e){if(BufferSourceConverter_1.isBufferSource(e[0])){super(e[0])}else{super(id_ce_subjectAltName,e[1],new GeneralNames(e[0]||[]).rawData)}}onInit(e){super.onInit(e);const t=AsnConvert.parse(e.extnValue,SubjectAlternativeName);this.names=new GeneralNames(t)}toTextObject(){const e=this.toTextObjectWithoutValue();const t=this.names.toTextObject();for(const r in t){e[r]=t[r]}return e}}SubjectAlternativeNameExtension.NAME="Subject Alternative Name";class CertificatePolicyExtension extends Extension{constructor(...e){var t;if(BufferSourceConverter_1.isBufferSource(e[0])){super(e[0]);const t=AsnConvert.parse(this.value,CertificatePolicies);this.policies=t.map((e=>e.policyIdentifier))}else{const r=e[0];const n=(t=e[1])!==null&&t!==void 0?t:false;const i=new CertificatePolicies(r.map((e=>new PolicyInformation({policyIdentifier:e}))));super(id_ce_certificatePolicies,n,AsnConvert.serialize(i));this.policies=r}}toTextObject(){const e=this.toTextObjectWithoutValue();e["Policy"]=this.policies.map((e=>new TextObject("",{},OidSerializer.toString(e))));return e}}CertificatePolicyExtension.NAME="Certificate Policies";ExtensionFactory.register(id_ce_certificatePolicies,CertificatePolicyExtension);class Attribute extends AsnData{constructor(...e){let t;if(BufferSourceConverter_1.isBufferSource(e[0])){t=BufferSourceConverter_1.toArrayBuffer(e[0])}else{const r=e[0];const n=Array.isArray(e[1])?e[1].map((e=>BufferSourceConverter_1.toArrayBuffer(e))):[];t=AsnConvert.serialize(new Attribute$2({type:r,values:n}))}super(t,Attribute$2)}onInit(e){this.type=e.type;this.values=e.values}toTextObject(){const e=this.toTextObjectWithoutValue();e["Value"]=this.values.map((e=>new TextObject("",{"":e})));return e}toTextObjectWithoutValue(){const e=this.toTextObjectEmpty();if(e[TextObject.NAME]===Attribute.NAME){e[TextObject.NAME]=OidSerializer.toString(this.type)}return e}}Attribute.NAME="Attribute";class ChallengePasswordAttribute extends Attribute{constructor(...e){var t;if(BufferSourceConverter_1.isBufferSource(e[0])){super(e[0])}else{const t=new ChallengePassword({printableString:e[0]});super(id_pkcs9_at_challengePassword,[AsnConvert.serialize(t)])}(t=this.password)!==null&&t!==void 0?t:this.password=""}onInit(e){super.onInit(e);if(this.values[0]){const e=AsnConvert.parse(this.values[0],ChallengePassword);this.password=e.toString()}}toTextObject(){const e=this.toTextObjectWithoutValue();e[TextObject.VALUE]=this.password;return e}}ChallengePasswordAttribute.NAME="Challenge Password";class ExtensionsAttribute extends Attribute{constructor(...e){var t;if(BufferSourceConverter_1.isBufferSource(e[0])){super(e[0])}else{const t=e[0];const r=new Extensions;for(const e of t){r.push(AsnConvert.parse(e.rawData,Extension$1))}super(id_pkcs9_at_extensionRequest,[AsnConvert.serialize(r)])}(t=this.items)!==null&&t!==void 0?t:this.items=[]}onInit(e){super.onInit(e);if(this.values[0]){const e=AsnConvert.parse(this.values[0],Extensions);this.items=e.map((e=>ExtensionFactory.create(AsnConvert.serialize(e))))}}toTextObject(){const e=this.toTextObjectWithoutValue();const t=this.items.map((e=>e.toTextObject()));for(const r of t){e[r[TextObject.NAME]]=r}return e}}ExtensionsAttribute.NAME="Extensions";class AttributeFactory{static register(e,t){this.items.set(e,t)}static create(e){const t=new Attribute(e);const r=this.items.get(t.type);if(r){return new r(e)}return t}}AttributeFactory.items=new Map;let RsaAlgorithm=class e{toAsnAlgorithm(e){switch(e.name.toLowerCase()){case"rsassa-pkcs1-v1_5":if(e.hash){switch(e.hash.name.toLowerCase()){case"sha-1":return new AlgorithmIdentifier$1({algorithm:id_sha1WithRSAEncryption,parameters:null});case"sha-256":return new AlgorithmIdentifier$1({algorithm:id_sha256WithRSAEncryption,parameters:null});case"sha-384":return new AlgorithmIdentifier$1({algorithm:id_sha384WithRSAEncryption,parameters:null});case"sha-512":return new AlgorithmIdentifier$1({algorithm:id_sha512WithRSAEncryption,parameters:null})}}else{return new AlgorithmIdentifier$1({algorithm:id_rsaEncryption,parameters:null})}}return null}toWebAlgorithm(e){switch(e.algorithm){case id_rsaEncryption:return{name:"RSASSA-PKCS1-v1_5"};case id_sha1WithRSAEncryption:return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-1"}};case id_sha256WithRSAEncryption:return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case id_sha384WithRSAEncryption:return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-384"}};case id_sha512WithRSAEncryption:return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-512"}}}return null}};RsaAlgorithm=__decorate([injectable()],RsaAlgorithm);instance.registerSingleton(diAlgorithm,RsaAlgorithm);class AsnEcSignatureFormatter{addPadding(e,t){const r=BufferSourceConverter_1.toUint8Array(t);const n=new Uint8Array(e);n.set(r,e-r.length);return n}removePadding(e,t=false){let r=BufferSourceConverter_1.toUint8Array(e);for(let e=0;e<r.length;e++){if(!r[e]){continue}r=r.slice(e);break}if(t&&r[0]>127){const e=new Uint8Array(r.length+1);e.set(r,1);return e.buffer}return r.buffer}toAsnSignature(e,t){if(e.name==="ECDSA"){const r=e.namedCurve;const n=AsnEcSignatureFormatter.namedCurveSize.get(r)||AsnEcSignatureFormatter.defaultNamedCurveSize;const i=new ECDSASigValue;const s=BufferSourceConverter_1.toUint8Array(t);i.r=this.removePadding(s.slice(0,n),true);i.s=this.removePadding(s.slice(n,n+n),true);return AsnConvert.serialize(i)}return null}toWebSignature(e,t){if(e.name==="ECDSA"){const r=AsnConvert.parse(t,ECDSASigValue);const n=e.namedCurve;const i=AsnEcSignatureFormatter.namedCurveSize.get(n)||AsnEcSignatureFormatter.defaultNamedCurveSize;const s=this.addPadding(i,this.removePadding(r.r));const a=this.addPadding(i,this.removePadding(r.s));return combine_1(s,a)}return null}}AsnEcSignatureFormatter.namedCurveSize=new Map;AsnEcSignatureFormatter.defaultNamedCurveSize=32;const idX25519$1="1.3.101.110";const idX448$1="1.3.101.111";const idEd25519$1="1.3.101.112";const idEd448$1="1.3.101.113";let EdAlgorithm=class e{toAsnAlgorithm(e){let t=null;switch(e.name.toLowerCase()){case"eddsa":switch(e.namedCurve.toLowerCase()){case"ed25519":t=idEd25519$1;break;case"ed448":t=idEd448$1;break}break;case"ecdh-es":switch(e.namedCurve.toLowerCase()){case"x25519":t=idX25519$1;break;case"x448":t=idX448$1;break}}if(t){return new AlgorithmIdentifier$1({algorithm:t})}return null}toWebAlgorithm(e){switch(e.algorithm){case idEd25519$1:return{name:"EdDSA",namedCurve:"Ed25519"};case idEd448$1:return{name:"EdDSA",namedCurve:"Ed448"};case idX25519$1:return{name:"ECDH-ES",namedCurve:"X25519"};case idX448$1:return{name:"ECDH-ES",namedCurve:"X448"}}return null}};EdAlgorithm=__decorate([injectable()],EdAlgorithm);instance.registerSingleton(diAlgorithm,EdAlgorithm);class Pkcs10CertificateRequest extends PemData{constructor(e){if(PemData.isAsnEncoded(e)){super(e,CertificationRequest)}else{super(e)}this.tag=PemConverter$1.CertificateRequestTag}onInit(e){this.tbs=AsnConvert.serialize(e.certificationRequestInfo);this.publicKey=new PublicKey(e.certificationRequestInfo.subjectPKInfo);const t=instance.resolve(diAlgorithmProvider);this.signatureAlgorithm=t.toWebAlgorithm(e.signatureAlgorithm);this.signature=e.signature;this.attributes=e.certificationRequestInfo.attributes.map((e=>AttributeFactory.create(AsnConvert.serialize(e))));const r=this.getAttribute(id_pkcs9_at_extensionRequest);this.extensions=[];if(r instanceof ExtensionsAttribute){this.extensions=r.items}this.subjectName=new Name(e.certificationRequestInfo.subject);this.subject=this.subjectName.toString()}getAttribute(e){for(const t of this.attributes){if(t.type===e){return t}}return null}getAttributes(e){return this.attributes.filter((t=>t.type===e))}getExtension(e){for(const t of this.extensions){if(t.type===e){return t}}return null}getExtensions(e){return this.extensions.filter((t=>t.type===e))}async verify(e=cryptoProvider.get()){const t={...this.publicKey.algorithm,...this.signatureAlgorithm};const r=await this.publicKey.export(t,["verify"],e);const n=instance.resolveAll(diAsnSignatureFormatter).reverse();let i=null;for(const e of n){i=e.toWebSignature(t,this.signature);if(i){break}}if(!i){throw Error("Cannot convert WebCrypto signature value to ASN.1 format")}const s=await e.subtle.verify(this.signatureAlgorithm,r,i,this.tbs);return s}toTextObject(){const e=this.toTextObjectEmpty();const t=AsnConvert.parse(this.rawData,CertificationRequest);const r=t.certificationRequestInfo;const n=new TextObject("",{Version:`${Version$1[r.version]} (${r.version})`,Subject:this.subject,"Subject Public Key Info":this.publicKey});if(this.attributes.length){const e=new TextObject("");for(const t of this.attributes){const r=t.toTextObject();e[r[TextObject.NAME]]=r}n["Attributes"]=e}e["Data"]=n;e["Signature"]=new TextObject("",{Algorithm:TextConverter.serializeAlgorithm(t.signatureAlgorithm),"":t.signature});return e}}Pkcs10CertificateRequest.NAME="PKCS#10 Certificate Request";class X509Certificates extends Array{constructor(e){super();if(PemData.isAsnEncoded(e)){this.import(e)}else if(e instanceof X509Certificate){this.push(e)}else if(Array.isArray(e)){for(const t of e){this.push(t)}}}export(e){const t=new SignedData;t.version=1;t.encapContentInfo.eContentType=id_data;t.encapContentInfo.eContent=new EncapsulatedContent({single:new OctetString});t.certificates=new CertificateSet(this.map((e=>new CertificateChoices({certificate:AsnConvert.parse(e.rawData,Certificate)}))));const r=new ContentInfo({contentType:id_signedData,content:AsnConvert.serialize(t)});const n=AsnConvert.serialize(r);if(e==="raw"){return n}return this.toString(e)}import(e){const t=PemData.toArrayBuffer(e);const r=AsnConvert.parse(t,ContentInfo);if(r.contentType!==id_signedData){throw new TypeError("Cannot parse CMS package. Incoming data is not a SignedData object.")}const n=AsnConvert.parse(r.content,SignedData);this.clear();for(const e of n.certificates||[]){if(e.certificate){this.push(new X509Certificate(e.certificate))}}}clear(){while(this.pop()){}}toString(e="pem"){const t=this.export("raw");switch(e){case"pem":return PemConverter$1.encode(t,"CMS");case"pem-chain":return this.map((e=>e.toString("pem"))).join("\n");case"asn":return AsnConvert.toString(t);case"hex":return Convert_1.ToHex(t);case"base64":return Convert_1.ToBase64(t);case"base64url":return Convert_1.ToBase64Url(t);case"text":return TextConverter.serialize(this.toTextObject());default:throw TypeError("Argument 'format' is unsupported value")}}toTextObject(){const e=AsnConvert.parse(this.export("raw"),ContentInfo);const t=AsnConvert.parse(e.content,SignedData);const r=new TextObject("X509Certificates",{"Content Type":OidSerializer.toString(e.contentType),Content:new TextObject("",{Version:`${CMSVersion[t.version]} (${t.version})`,Certificates:new TextObject("",{Certificate:this.map((e=>e.toTextObject()))})})});return r}}class X509ChainBuilder{constructor(e={}){this.certificates=[];if(e.certificates){this.certificates=e.certificates}}async build(e,t=cryptoProvider.get()){const r=new X509Certificates(e);let n=e;while(n=await this.findIssuer(n,t)){const e=await n.getThumbprint(t);for(const n of r){const r=await n.getThumbprint(t);if(isEqual_1$1(e,r)){throw new Error("Cannot build a certificate chain. Circular dependency.")}}r.push(n)}return r}async findIssuer(e,t=cryptoProvider.get()){if(!await e.isSelfSigned(t)){const r=e.getExtension(id_ce_authorityKeyIdentifier);for(const n of this.certificates){if(n.subject!==e.issuer){continue}if(r){if(r.keyId){const e=n.getExtension(id_ce_subjectKeyIdentifier);if(e&&e.keyId!==r.keyId){continue}}else if(r.certId){const e=n.getExtension(id_ce_subjectAltName);if(e&&!(r.certId.serialNumber===n.serialNumber&&isEqual_1$1(AsnConvert.serialize(r.certId.name),AsnConvert.serialize(e)))){continue}}}if(!await e.verify({publicKey:await n.publicKey.export(t),signatureOnly:true},t)){continue}return n}}return null}}var X509CrlReason;(function(e){e[e["unspecified"]=0]="unspecified";e[e["keyCompromise"]=1]="keyCompromise";e[e["cACompromise"]=2]="cACompromise";e[e["affiliationChanged"]=3]="affiliationChanged";e[e["superseded"]=4]="superseded";e[e["cessationOfOperation"]=5]="cessationOfOperation";e[e["certificateHold"]=6]="certificateHold";e[e["removeFromCRL"]=8]="removeFromCRL";e[e["privilegeWithdrawn"]=9]="privilegeWithdrawn";e[e["aACompromise"]=10]="aACompromise"})(X509CrlReason||(X509CrlReason={}));ExtensionFactory.register(id_ce_basicConstraints,BasicConstraintsExtension);ExtensionFactory.register(id_ce_extKeyUsage,ExtendedKeyUsageExtension);ExtensionFactory.register(id_ce_keyUsage,KeyUsagesExtension);ExtensionFactory.register(id_ce_subjectKeyIdentifier,SubjectKeyIdentifierExtension);ExtensionFactory.register(id_ce_authorityKeyIdentifier,AuthorityKeyIdentifierExtension);ExtensionFactory.register(id_ce_subjectAltName,SubjectAlternativeNameExtension);AttributeFactory.register(id_pkcs9_at_challengePassword,ChallengePasswordAttribute);AttributeFactory.register(id_pkcs9_at_extensionRequest,ExtensionsAttribute);instance.registerSingleton(diAsnSignatureFormatter,AsnDefaultSignatureFormatter);instance.registerSingleton(diAsnSignatureFormatter,AsnEcSignatureFormatter);AsnEcSignatureFormatter.namedCurveSize.set("P-256",32);AsnEcSignatureFormatter.namedCurveSize.set("K-256",32);AsnEcSignatureFormatter.namedCurveSize.set("P-384",48);AsnEcSignatureFormatter.namedCurveSize.set("P-521",66);function uint8tohex(e){if(!e||!e.length)return"";return Array.from(e).map((e=>("0"+e.toString(16)).slice(-2))).join("")}var build={};class JsonError extends Error{constructor(e,t){super(t?`${e}. See the inner exception for more details.`:e);this.message=e;this.innerError=t}}class TransformError extends JsonError{constructor(e,t,r){super(t,r);this.schema=e}}class ParserError extends TransformError{constructor(e,t,r){super(e,`JSON doesn't match to '${e.target.name}' schema. ${t}`,r)}}class ValidationError extends JsonError{}class SerializerError extends JsonError{constructor(e,t,r){super(`Cannot serialize by '${e}' schema. ${t}`,r);this.schemaName=e}}class KeyError extends ParserError{constructor(e,t,r={}){super(e,"Some keys doesn't match to schema");this.keys=t;this.errors=r}}var JsonPropTypes;(function(e){e[e["Any"]=0]="Any";e[e["Boolean"]=1]="Boolean";e[e["Number"]=2]="Number";e[e["String"]=3]="String"})(JsonPropTypes||(JsonPropTypes={}));function checkType(e,t){switch(t){case JsonPropTypes.Boolean:return typeof e==="boolean";case JsonPropTypes.Number:return typeof e==="number";case JsonPropTypes.String:return typeof e==="string"}return true}function throwIfTypeIsWrong(e,t){if(!checkType(e,t)){throw new TypeError(`Value must be ${JsonPropTypes[t]}`)}}function isConvertible(e){if(e&&e.prototype){if(e.prototype.toJSON&&e.prototype.fromJSON){return true}else{return isConvertible(e.prototype)}}else{return!!(e&&e.toJSON&&e.fromJSON)}}class JsonSchemaStorage{constructor(){this.items=new Map}has(e){return this.items.has(e)||!!this.findParentSchema(e)}get(e){const t=this.items.get(e)||this.findParentSchema(e);if(!t){throw new Error("Cannot get schema for current target")}return t}create(e){const t={names:{}};const r=this.findParentSchema(e);if(r){Object.assign(t,r);t.names={};for(const e in r.names){t.names[e]=Object.assign({},r.names[e])}}t.target=e;return t}set(e,t){this.items.set(e,t);return this}findParentSchema(e){const t=e.__proto__;if(t){const e=this.items.get(t);return e||this.findParentSchema(t)}return null}}const DEFAULT_SCHEMA="default";const schemaStorage=new JsonSchemaStorage;class PatternValidation{constructor(e){this.pattern=new RegExp(e)}validate(e){const t=new RegExp(this.pattern.source,this.pattern.flags);if(typeof e!=="string"){throw new ValidationError("Incoming value must be string")}if(!t.exec(e)){throw new ValidationError(`Value doesn't match to pattern '${t.toString()}'`)}}}class InclusiveValidation{constructor(e=Number.MIN_VALUE,t=Number.MAX_VALUE){this.min=e;this.max=t}validate(e){throwIfTypeIsWrong(e,JsonPropTypes.Number);if(!(this.min<=e&&e<=this.max)){const e=this.min===Number.MIN_VALUE?"MIN":this.min;const t=this.max===Number.MAX_VALUE?"MAX":this.max;throw new ValidationError(`Value doesn't match to diapason [${e},${t}]`)}}}class ExclusiveValidation{constructor(e=Number.MIN_VALUE,t=Number.MAX_VALUE){this.min=e;this.max=t}validate(e){throwIfTypeIsWrong(e,JsonPropTypes.Number);if(!(this.min<e&&e<this.max)){const e=this.min===Number.MIN_VALUE?"MIN":this.min;const t=this.max===Number.MAX_VALUE?"MAX":this.max;throw new ValidationError(`Value doesn't match to diapason (${e},${t})`)}}}class LengthValidation{constructor(e,t,r){this.length=e;this.minLength=t;this.maxLength=r}validate(e){if(this.length!==undefined){if(e.length!==this.length){throw new ValidationError(`Value length must be exactly ${this.length}.`)}return}if(this.minLength!==undefined){if(e.length<this.minLength){throw new ValidationError(`Value length must be more than ${this.minLength}.`)}}if(this.maxLength!==undefined){if(e.length>this.maxLength){throw new ValidationError(`Value length must be less than ${this.maxLength}.`)}}}}class EnumerationValidation{constructor(e){this.enumeration=e}validate(e){throwIfTypeIsWrong(e,JsonPropTypes.String);if(!this.enumeration.includes(e)){throw new ValidationError(`Value must be one of ${this.enumeration.map((e=>`'${e}'`)).join(", ")}`)}}}class JsonTransform{static checkValues(e,t){const r=Array.isArray(e)?e:[e];for(const n of r){for(const r of t.validations){if(r instanceof LengthValidation&&t.repeated){r.validate(e)}else{r.validate(n)}}}}static checkTypes(e,t){if(t.repeated&&!Array.isArray(e)){throw new TypeError("Value must be Array")}if(typeof t.type==="number"){const r=Array.isArray(e)?e:[e];for(const e of r){throwIfTypeIsWrong(e,t.type)}}}static getSchemaByName(e,t=DEFAULT_SCHEMA){return{...e.names[DEFAULT_SCHEMA],...e.names[t]}}}class JsonSerializer extends JsonTransform{static serialize(e,t,r,n){const i=this.toJSON(e,t);return JSON.stringify(i,r,n)}static toJSON(e,t={}){let r;let n=t.targetSchema;const i=t.schemaName||DEFAULT_SCHEMA;if(isConvertible(e)){return e.toJSON()}if(Array.isArray(e)){r=[];for(const n of e){r.push(this.toJSON(n,t))}}else if(typeof e==="object"){if(n&&!schemaStorage.has(n)){throw new JsonError("Cannot get schema for `targetSchema` param")}n=n||e.constructor;if(schemaStorage.has(n)){const t=schemaStorage.get(n);r={};const s=this.getSchemaByName(t,i);for(const a in s){try{const t=s[a];const o=e[a];let f;if(t.optional&&o===undefined||t.defaultValue!==undefined&&o===t.defaultValue){continue}if(!t.optional&&o===undefined){throw new SerializerError(n.name,`Property '${a}' is required.`)}if(typeof t.type==="number"){if(t.converter){if(t.repeated){f=o.map((r=>t.converter.toJSON(r,e)))}else{f=t.converter.toJSON(o,e)}}else{f=o}}else{if(t.repeated){f=o.map((e=>this.toJSON(e,{schemaName:i})))}else{f=this.toJSON(o,{schemaName:i})}}this.checkTypes(f,t);this.checkValues(f,t);r[t.name||a]=f}catch(e){if(e instanceof SerializerError){throw e}else{throw new SerializerError(t.target.name,`Property '${a}' is wrong. ${e.message}`,e)}}}}else{r={};for(const t in e){r[t]=this.toJSON(e[t],{schemaName:i})}}}else{r=e}return r}}class JsonParser extends JsonTransform{static parse(e,t){const r=JSON.parse(e);return this.fromJSON(r,t)}static fromJSON(e,t){const r=t.targetSchema;const n=t.schemaName||DEFAULT_SCHEMA;const i=new r;if(isConvertible(i)){return i.fromJSON(e)}const s=schemaStorage.get(r);const a=this.getSchemaByName(s,n);const o={};if(t.strictProperty&&!Array.isArray(e)){JsonParser.checkStrictProperty(e,a,s)}for(const r in a){try{const o=a[r];const f=o.name||r;const c=e[f];if(c===undefined&&(o.optional||o.defaultValue!==undefined)){continue}if(!o.optional&&c===undefined){throw new ParserError(s,`Property '${f}' is required.`)}this.checkTypes(c,o);this.checkValues(c,o);if(typeof o.type==="number"){if(o.converter){if(o.repeated){i[r]=c.map((e=>o.converter.fromJSON(e,i)))}else{i[r]=o.converter.fromJSON(c,i)}}else{i[r]=c}}else{const e={...t,targetSchema:o.type,schemaName:n};if(o.repeated){i[r]=c.map((t=>this.fromJSON(t,e)))}else{i[r]=this.fromJSON(c,e)}}}catch(e){if(!(e instanceof ParserError)){e=new ParserError(s,`Property '${r}' is wrong. ${e.message}`,e)}if(t.strictAllKeys){o[r]=e}else{throw e}}}const f=Object.keys(o);if(f.length){throw new KeyError(s,f,o)}return i}static checkStrictProperty(e,t,r){const n=Object.keys(e);const i=Object.keys(t);const s=[];for(const e of n){if(i.indexOf(e)===-1){s.push(e)}}if(s.length){throw new KeyError(r,s)}}}function getValidations(e){const t=[];if(e.pattern){t.push(new PatternValidation(e.pattern))}if(e.type===JsonPropTypes.Number||e.type===JsonPropTypes.Any){if(e.minInclusive!==undefined||e.maxInclusive!==undefined){t.push(new InclusiveValidation(e.minInclusive,e.maxInclusive))}if(e.minExclusive!==undefined||e.maxExclusive!==undefined){t.push(new ExclusiveValidation(e.minExclusive,e.maxExclusive))}if(e.enumeration!==undefined){t.push(new EnumerationValidation(e.enumeration))}}if(e.type===JsonPropTypes.String||e.repeated||e.type===JsonPropTypes.Any){if(e.length!==undefined||e.minLength!==undefined||e.maxLength!==undefined){t.push(new LengthValidation(e.length,e.minLength,e.maxLength))}}return t}const JsonProp=(e={})=>(t,r)=>{const n=`Cannot set type for ${r} property of ${t.constructor.name} schema`;let i;if(!schemaStorage.has(t.constructor)){i=schemaStorage.create(t.constructor);schemaStorage.set(t.constructor,i)}else{i=schemaStorage.get(t.constructor);if(i.target!==t.constructor){i=schemaStorage.create(t.constructor);schemaStorage.set(t.constructor,i)}}const s={type:JsonPropTypes.Any,validations:[]};const a=Object.assign(s,e);a.validations=getValidations(a);if(typeof a.type!=="number"){if(!schemaStorage.has(a.type)&&!isConvertible(a.type)){throw new Error(`${n}. Assigning type doesn't have schema.`)}}let o;if(Array.isArray(e.schema)){o=e.schema}else{o=[e.schema||DEFAULT_SCHEMA]}for(const e of o){if(!i.names[e]){i.names[e]={}}const t=i.names[e];t[r]=a}};const index_es=Object.freeze({__proto__:null,JsonError,JsonParser,JsonProp,get JsonPropTypes(){return JsonPropTypes},JsonSerializer,KeyError,ParserError,SerializerError,TransformError,ValidationError});
/*!
 Copyright (c) Peculiar Ventures, LLC
*/class CryptoError extends Error{}class AlgorithmError extends CryptoError{}class UnsupportedOperationError extends CryptoError{constructor(e){super(`Unsupported operation: ${e?`${e}`:""}`)}}class OperationError extends CryptoError{}class RequiredPropertyError extends CryptoError{constructor(e){super(`${e}: Missing required property`)}}class PemConverter{static toArrayBuffer(e){const t=e.replace(/-{5}(BEGIN|END) .*-{5}/g,"").replace("\r","").replace("\n","");return Convert_1.FromBase64(t)}static toUint8Array(e){const t=this.toArrayBuffer(e);return new Uint8Array(t)}static fromBufferSource(e,t){const r=Convert_1.ToBase64(e);let n;let i=0;const s=[];while(i<r.length){n=r.slice(i,i+64);if(n.length){s.push(n)}else{break}i+=64}const a=t.toUpperCase();return`-----BEGIN ${a}-----\n${s.join("\n")}\n-----END ${a}-----`}static isPEM(e){return/-----BEGIN .+-----[A-Za-z0-9+/+=\s\n]+-----END .+-----/i.test(e)}static getTagName(e){if(!this.isPEM(e)){throw new Error("Bad parameter. Incoming data is not right PEM")}const t=/-----BEGIN (.+)-----/.exec(e);if(!t){throw new Error("Cannot get tag from PEM")}return t[1]}static hasTagName(e,t){const r=this.getTagName(e);return t.toLowerCase()===r.toLowerCase()}static isCertificate(e){return this.hasTagName(e,"certificate")}static isCertificateRequest(e){return this.hasTagName(e,"certificate request")}static isCRL(e){return this.hasTagName(e,"x509 crl")}static isPublicKey(e){return this.hasTagName(e,"public key")}}function isJWK(e){return typeof e==="object"&&"kty"in e}class ProviderCrypto{async digest(...e){this.checkDigest.apply(this,e);return this.onDigest.apply(this,e)}checkDigest(e,t){this.checkAlgorithmName(e)}async onDigest(e,t){throw new UnsupportedOperationError("digest")}async generateKey(...e){this.checkGenerateKey.apply(this,e);return this.onGenerateKey.apply(this,e)}checkGenerateKey(e,t,r,...n){this.checkAlgorithmName(e);this.checkGenerateKeyParams(e);if(!(r&&r.length)){throw new TypeError(`Usages cannot be empty when creating a key.`)}let i;if(Array.isArray(this.usages)){i=this.usages}else{i=this.usages.privateKey.concat(this.usages.publicKey)}this.checkKeyUsages(r,i)}checkGenerateKeyParams(e){}async onGenerateKey(e,t,r,...n){throw new UnsupportedOperationError("generateKey")}async sign(...e){this.checkSign.apply(this,e);return this.onSign.apply(this,e)}checkSign(e,t,r,...n){this.checkAlgorithmName(e);this.checkAlgorithmParams(e);this.checkCryptoKey(t,"sign")}async onSign(e,t,r,...n){throw new UnsupportedOperationError("sign")}async verify(...e){this.checkVerify.apply(this,e);return this.onVerify.apply(this,e)}checkVerify(e,t,r,n,...i){this.checkAlgorithmName(e);this.checkAlgorithmParams(e);this.checkCryptoKey(t,"verify")}async onVerify(e,t,r,n,...i){throw new UnsupportedOperationError("verify")}async encrypt(...e){this.checkEncrypt.apply(this,e);return this.onEncrypt.apply(this,e)}checkEncrypt(e,t,r,n={},...i){this.checkAlgorithmName(e);this.checkAlgorithmParams(e);this.checkCryptoKey(t,n.keyUsage?"encrypt":void 0)}async onEncrypt(e,t,r,...n){throw new UnsupportedOperationError("encrypt")}async decrypt(...e){this.checkDecrypt.apply(this,e);return this.onDecrypt.apply(this,e)}checkDecrypt(e,t,r,n={},...i){this.checkAlgorithmName(e);this.checkAlgorithmParams(e);this.checkCryptoKey(t,n.keyUsage?"decrypt":void 0)}async onDecrypt(e,t,r,...n){throw new UnsupportedOperationError("decrypt")}async deriveBits(...e){this.checkDeriveBits.apply(this,e);return this.onDeriveBits.apply(this,e)}checkDeriveBits(e,t,r,n={},...i){this.checkAlgorithmName(e);this.checkAlgorithmParams(e);this.checkCryptoKey(t,n.keyUsage?"deriveBits":void 0);if(r%8!==0){throw new OperationError("length: Is not multiple of 8")}}async onDeriveBits(e,t,r,...n){throw new UnsupportedOperationError("deriveBits")}async exportKey(...e){this.checkExportKey.apply(this,e);return this.onExportKey.apply(this,e)}checkExportKey(e,t,...r){this.checkKeyFormat(e);this.checkCryptoKey(t);if(!t.extractable){throw new CryptoError("key: Is not extractable")}}async onExportKey(e,t,...r){throw new UnsupportedOperationError("exportKey")}async importKey(...e){this.checkImportKey.apply(this,e);return this.onImportKey.apply(this,e)}checkImportKey(e,t,r,n,i,...s){this.checkKeyFormat(e);this.checkKeyData(e,t);this.checkAlgorithmName(r);this.checkImportParams(r);if(Array.isArray(this.usages)){this.checkKeyUsages(i,this.usages)}}async onImportKey(e,t,r,n,i,...s){throw new UnsupportedOperationError("importKey")}checkAlgorithmName(e){if(e.name.toLowerCase()!==this.name.toLowerCase()){throw new AlgorithmError("Unrecognized name")}}checkAlgorithmParams(e){}checkDerivedKeyParams(e){}checkKeyUsages(e,t){for(const r of e){if(t.indexOf(r)===-1){throw new TypeError("Cannot create a key using the specified key usages")}}}checkCryptoKey(e,t){this.checkAlgorithmName(e.algorithm);if(t&&e.usages.indexOf(t)===-1){throw new CryptoError(`key does not match that of operation`)}}checkRequiredProperty(e,t){if(!(t in e)){throw new RequiredPropertyError(t)}}checkHashAlgorithm(e,t){for(const r of t){if(r.toLowerCase()===e.name.toLowerCase()){return}}throw new OperationError(`hash: Must be one of ${t.join(", ")}`)}checkImportParams(e){}checkKeyFormat(e){switch(e){case"raw":case"pkcs8":case"spki":case"jwk":break;default:throw new TypeError("format: Is invalid value. Must be 'jwk', 'raw', 'spki', or 'pkcs8'")}}checkKeyData(e,t){if(!t){throw new TypeError("keyData: Cannot be empty on empty on key importing")}if(e==="jwk"){if(!isJWK(t)){throw new TypeError("keyData: Is not JsonWebToken")}}else if(!BufferSourceConverter_1.isBufferSource(t)){throw new TypeError("keyData: Is not ArrayBufferView or ArrayBuffer")}}prepareData(e){return BufferSourceConverter_1.toArrayBuffer(e)}}class AesProvider extends ProviderCrypto{checkGenerateKeyParams(e){this.checkRequiredProperty(e,"length");if(typeof e.length!=="number"){throw new TypeError("length: Is not of type Number")}switch(e.length){case 128:case 192:case 256:break;default:throw new TypeError("length: Must be 128, 192, or 256")}}checkDerivedKeyParams(e){this.checkGenerateKeyParams(e)}}class AesCbcProvider extends AesProvider{constructor(){super(...arguments);this.name="AES-CBC";this.usages=["encrypt","decrypt","wrapKey","unwrapKey"]}checkAlgorithmParams(e){this.checkRequiredProperty(e,"iv");if(!(e.iv instanceof ArrayBuffer||ArrayBuffer.isView(e.iv))){throw new TypeError("iv: Is not of type '(ArrayBuffer or ArrayBufferView)'")}if(e.iv.byteLength!==16){throw new TypeError("iv: Must have length 16 bytes")}}}class AesCmacProvider extends AesProvider{constructor(){super(...arguments);this.name="AES-CMAC";this.usages=["sign","verify"]}checkAlgorithmParams(e){this.checkRequiredProperty(e,"length");if(typeof e.length!=="number"){throw new TypeError("length: Is not a Number")}if(e.length<1){throw new OperationError("length: Must be more than 0")}}}class AesCtrProvider extends AesProvider{constructor(){super(...arguments);this.name="AES-CTR";this.usages=["encrypt","decrypt","wrapKey","unwrapKey"]}checkAlgorithmParams(e){this.checkRequiredProperty(e,"counter");if(!(e.counter instanceof ArrayBuffer||ArrayBuffer.isView(e.counter))){throw new TypeError("counter: Is not of type '(ArrayBuffer or ArrayBufferView)'")}if(e.counter.byteLength!==16){throw new TypeError("iv: Must have length 16 bytes")}this.checkRequiredProperty(e,"length");if(typeof e.length!=="number"){throw new TypeError("length: Is not a Number")}if(e.length<1){throw new OperationError("length: Must be more than 0")}}}class AesEcbProvider extends AesProvider{constructor(){super(...arguments);this.name="AES-ECB";this.usages=["encrypt","decrypt","wrapKey","unwrapKey"]}}class AesGcmProvider extends AesProvider{constructor(){super(...arguments);this.name="AES-GCM";this.usages=["encrypt","decrypt","wrapKey","unwrapKey"]}checkAlgorithmParams(e){this.checkRequiredProperty(e,"iv");if(!(e.iv instanceof ArrayBuffer||ArrayBuffer.isView(e.iv))){throw new TypeError("iv: Is not of type '(ArrayBuffer or ArrayBufferView)'")}if(e.iv.byteLength<1){throw new OperationError("iv: Must have length more than 0 and less than 2^64 - 1")}if(!("tagLength"in e)){e.tagLength=128}switch(e.tagLength){case 32:case 64:case 96:case 104:case 112:case 120:case 128:break;default:throw new OperationError("tagLength: Must be one of 32, 64, 96, 104, 112, 120 or 128")}}}class AesKwProvider extends AesProvider{constructor(){super(...arguments);this.name="AES-KW";this.usages=["wrapKey","unwrapKey"]}}class DesProvider extends ProviderCrypto{constructor(){super(...arguments);this.usages=["encrypt","decrypt","wrapKey","unwrapKey"]}checkAlgorithmParams(e){if(this.ivSize){this.checkRequiredProperty(e,"iv");if(!(e.iv instanceof ArrayBuffer||ArrayBuffer.isView(e.iv))){throw new TypeError("iv: Is not of type '(ArrayBuffer or ArrayBufferView)'")}if(e.iv.byteLength!==this.ivSize){throw new TypeError(`iv: Must have length ${this.ivSize} bytes`)}}}checkGenerateKeyParams(e){this.checkRequiredProperty(e,"length");if(typeof e.length!=="number"){throw new TypeError("length: Is not of type Number")}if(e.length!==this.keySizeBits){throw new OperationError(`algorithm.length: Must be ${this.keySizeBits}`)}}checkDerivedKeyParams(e){this.checkGenerateKeyParams(e)}}class RsaProvider extends ProviderCrypto{constructor(){super(...arguments);this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"]}checkGenerateKeyParams(e){this.checkRequiredProperty(e,"hash");this.checkHashAlgorithm(e.hash,this.hashAlgorithms);this.checkRequiredProperty(e,"publicExponent");if(!(e.publicExponent&&e.publicExponent instanceof Uint8Array)){throw new TypeError("publicExponent: Missing or not a Uint8Array")}const t=Convert_1.ToBase64(e.publicExponent);if(!(t==="Aw=="||t==="AQAB")){throw new TypeError("publicExponent: Must be [3] or [1,0,1]")}this.checkRequiredProperty(e,"modulusLength");if(e.modulusLength%8||e.modulusLength<256||e.modulusLength>16384){throw new TypeError("The modulus length must be a multiple of 8 bits and >= 256 and <= 16384")}}checkImportParams(e){this.checkRequiredProperty(e,"hash");this.checkHashAlgorithm(e.hash,this.hashAlgorithms)}}class RsaSsaProvider extends RsaProvider{constructor(){super(...arguments);this.name="RSASSA-PKCS1-v1_5";this.usages={privateKey:["sign"],publicKey:["verify"]}}}class RsaPssProvider extends RsaProvider{constructor(){super(...arguments);this.name="RSA-PSS";this.usages={privateKey:["sign"],publicKey:["verify"]}}checkAlgorithmParams(e){this.checkRequiredProperty(e,"saltLength");if(typeof e.saltLength!=="number"){throw new TypeError("saltLength: Is not a Number")}if(e.saltLength<0){throw new RangeError("saltLength: Must be positive number")}}}class RsaOaepProvider extends RsaProvider{constructor(){super(...arguments);this.name="RSA-OAEP";this.usages={privateKey:["decrypt","unwrapKey"],publicKey:["encrypt","wrapKey"]}}checkAlgorithmParams(e){if(e.label&&!(e.label instanceof ArrayBuffer||ArrayBuffer.isView(e.label))){throw new TypeError("label: Is not of type '(ArrayBuffer or ArrayBufferView)'")}}}class EllipticProvider extends ProviderCrypto{checkGenerateKeyParams(e){this.checkRequiredProperty(e,"namedCurve");this.checkNamedCurve(e.namedCurve)}checkNamedCurve(e){for(const t of this.namedCurves){if(t.toLowerCase()===e.toLowerCase()){return}}throw new OperationError(`namedCurve: Must be one of ${this.namedCurves.join(", ")}`)}}class EcdsaProvider extends EllipticProvider{constructor(){super(...arguments);this.name="ECDSA";this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"];this.usages={privateKey:["sign"],publicKey:["verify"]};this.namedCurves=["P-256","P-384","P-521","K-256"]}checkAlgorithmParams(e){this.checkRequiredProperty(e,"hash");this.checkHashAlgorithm(e.hash,this.hashAlgorithms)}}const KEY_TYPES=["secret","private","public"];class CryptoKey{static create(e,t,r,n){const i=new this;i.algorithm=e;i.type=t;i.extractable=r;i.usages=n;return i}static isKeyType(e){return KEY_TYPES.indexOf(e)!==-1}get[Symbol.toStringTag](){return"CryptoKey"}}class EcdhProvider extends EllipticProvider{constructor(){super(...arguments);this.name="ECDH";this.usages={privateKey:["deriveBits","deriveKey"],publicKey:[]};this.namedCurves=["P-256","P-384","P-521","K-256"]}checkAlgorithmParams(e){this.checkRequiredProperty(e,"public");if(!(e.public instanceof CryptoKey)){throw new TypeError("public: Is not a CryptoKey")}if(e.public.type!=="public"){throw new OperationError("public: Is not a public key")}if(e.public.algorithm.name!==this.name){throw new OperationError(`public: Is not ${this.name} key`)}}}class EcdhEsProvider extends EcdhProvider{constructor(){super(...arguments);this.name="ECDH-ES";this.namedCurves=["X25519","X448"]}}class EdDsaProvider extends EllipticProvider{constructor(){super(...arguments);this.name="EdDSA";this.usages={privateKey:["sign"],publicKey:["verify"]};this.namedCurves=["Ed25519","Ed448"]}}let ObjectIdentifier=class e{constructor(e){if(e){this.value=e}}};__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],ObjectIdentifier.prototype,"value",void 0);ObjectIdentifier=__decorate([AsnType({type:AsnTypeTypes.Choice})],ObjectIdentifier);class AlgorithmIdentifier{constructor(e){Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],AlgorithmIdentifier.prototype,"algorithm",void 0);__decorate([AsnProp({type:AsnPropTypes.Any,optional:true})],AlgorithmIdentifier.prototype,"parameters",void 0);class PrivateKeyInfo{constructor(){this.version=0;this.privateKeyAlgorithm=new AlgorithmIdentifier;this.privateKey=new ArrayBuffer(0)}}__decorate([AsnProp({type:AsnPropTypes.Integer})],PrivateKeyInfo.prototype,"version",void 0);__decorate([AsnProp({type:AlgorithmIdentifier})],PrivateKeyInfo.prototype,"privateKeyAlgorithm",void 0);__decorate([AsnProp({type:AsnPropTypes.OctetString})],PrivateKeyInfo.prototype,"privateKey",void 0);__decorate([AsnProp({type:AsnPropTypes.Any,optional:true})],PrivateKeyInfo.prototype,"attributes",void 0);class PublicKeyInfo{constructor(){this.publicKeyAlgorithm=new AlgorithmIdentifier;this.publicKey=new ArrayBuffer(0)}}__decorate([AsnProp({type:AlgorithmIdentifier})],PublicKeyInfo.prototype,"publicKeyAlgorithm",void 0);__decorate([AsnProp({type:AsnPropTypes.BitString})],PublicKeyInfo.prototype,"publicKey",void 0);const JsonBase64UrlArrayBufferConverter={fromJSON:e=>Convert_1.FromBase64Url(e),toJSON:e=>Convert_1.ToBase64Url(new Uint8Array(e))};const AsnIntegerArrayBufferConverter={fromASN:e=>{const t=e.valueBlock.valueHex;return!new Uint8Array(t)[0]?e.valueBlock.valueHex.slice(1):e.valueBlock.valueHex},toASN:e=>{const t=new Uint8Array(e)[0]>127?combine_1(new Uint8Array([0]).buffer,e):e;return new Integer({valueHex:t})}};var index$3=Object.freeze({__proto__:null,AsnIntegerArrayBufferConverter,JsonBase64UrlArrayBufferConverter});class RsaPrivateKey{constructor(){this.version=0;this.modulus=new ArrayBuffer(0);this.publicExponent=new ArrayBuffer(0);this.privateExponent=new ArrayBuffer(0);this.prime1=new ArrayBuffer(0);this.prime2=new ArrayBuffer(0);this.exponent1=new ArrayBuffer(0);this.exponent2=new ArrayBuffer(0);this.coefficient=new ArrayBuffer(0)}}__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerConverter})],RsaPrivateKey.prototype,"version",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter}),JsonProp({name:"n",converter:JsonBase64UrlArrayBufferConverter})],RsaPrivateKey.prototype,"modulus",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter}),JsonProp({name:"e",converter:JsonBase64UrlArrayBufferConverter})],RsaPrivateKey.prototype,"publicExponent",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter}),JsonProp({name:"d",converter:JsonBase64UrlArrayBufferConverter})],RsaPrivateKey.prototype,"privateExponent",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter}),JsonProp({name:"p",converter:JsonBase64UrlArrayBufferConverter})],RsaPrivateKey.prototype,"prime1",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter}),JsonProp({name:"q",converter:JsonBase64UrlArrayBufferConverter})],RsaPrivateKey.prototype,"prime2",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter}),JsonProp({name:"dp",converter:JsonBase64UrlArrayBufferConverter})],RsaPrivateKey.prototype,"exponent1",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter}),JsonProp({name:"dq",converter:JsonBase64UrlArrayBufferConverter})],RsaPrivateKey.prototype,"exponent2",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter}),JsonProp({name:"qi",converter:JsonBase64UrlArrayBufferConverter})],RsaPrivateKey.prototype,"coefficient",void 0);__decorate([AsnProp({type:AsnPropTypes.Any,optional:true})],RsaPrivateKey.prototype,"otherPrimeInfos",void 0);class RsaPublicKey{constructor(){this.modulus=new ArrayBuffer(0);this.publicExponent=new ArrayBuffer(0)}}__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter}),JsonProp({name:"n",converter:JsonBase64UrlArrayBufferConverter})],RsaPublicKey.prototype,"modulus",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter}),JsonProp({name:"e",converter:JsonBase64UrlArrayBufferConverter})],RsaPublicKey.prototype,"publicExponent",void 0);let EcPublicKey=class e{constructor(e){this.value=new ArrayBuffer(0);if(e){this.value=e}}toJSON(){let e=new Uint8Array(this.value);if(e[0]!==4){throw new CryptoError("Wrong ECPoint. Current version supports only Uncompressed (0x04) point")}e=new Uint8Array(this.value.slice(1));const t=e.length/2;const r=0;const n={x:Convert_1.ToBase64Url(e.buffer.slice(r,r+t)),y:Convert_1.ToBase64Url(e.buffer.slice(r+t,r+t+t))};return n}fromJSON(e){if(!("x"in e)){throw new Error("x: Missing required property")}if(!("y"in e)){throw new Error("y: Missing required property")}const t=Convert_1.FromBase64Url(e.x);const r=Convert_1.FromBase64Url(e.y);const n=combine_1(new Uint8Array([4]).buffer,t,r);this.value=new Uint8Array(n).buffer;return this}};__decorate([AsnProp({type:AsnPropTypes.OctetString})],EcPublicKey.prototype,"value",void 0);EcPublicKey=__decorate([AsnType({type:AsnTypeTypes.Choice})],EcPublicKey);class EcPrivateKey{constructor(){this.version=1;this.privateKey=new ArrayBuffer(0)}fromJSON(e){if(!("d"in e)){throw new Error("d: Missing required property")}this.privateKey=Convert_1.FromBase64Url(e.d);if("x"in e){const t=new EcPublicKey;t.fromJSON(e);const r=AsnSerializer.toASN(t);if("valueHex"in r.valueBlock){this.publicKey=r.valueBlock.valueHex}}return this}toJSON(){const e={};e.d=Convert_1.ToBase64Url(this.privateKey);if(this.publicKey){Object.assign(e,new EcPublicKey(this.publicKey).toJSON())}return e}}__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerConverter})],EcPrivateKey.prototype,"version",void 0);__decorate([AsnProp({type:AsnPropTypes.OctetString})],EcPrivateKey.prototype,"privateKey",void 0);__decorate([AsnProp({context:0,type:AsnPropTypes.Any,optional:true})],EcPrivateKey.prototype,"parameters",void 0);__decorate([AsnProp({context:1,type:AsnPropTypes.BitString,optional:true})],EcPrivateKey.prototype,"publicKey",void 0);const AsnIntegerWithoutPaddingConverter={fromASN:e=>{const t=new Uint8Array(e.valueBlock.valueHex);return t[0]===0?t.buffer.slice(1):t.buffer},toASN:e=>{const t=new Uint8Array(e);if(t[0]>127){const e=new Uint8Array(t.length+1);e.set(t,1);return new Integer({valueHex:e.buffer})}return new Integer({valueHex:e})}};var index$2=Object.freeze({__proto__:null,AsnIntegerWithoutPaddingConverter});class EcUtils{static decodePoint(e,t){const r=BufferSourceConverter_1.toUint8Array(e);if(r.length===0||r[0]!==4){throw new Error("Only uncompressed point format supported")}const n=(r.length-1)/2;if(n!==Math.ceil(t/8)){throw new Error("Point does not match field size")}const i=r.slice(1,n+1);const s=r.slice(n+1,n+1+n);return{x:i,y:s}}static encodePoint(e,t){const r=Math.ceil(t/8);if(e.x.byteLength!==r||e.y.byteLength!==r){throw new Error("X,Y coordinates don't match point size criteria")}const n=BufferSourceConverter_1.toUint8Array(e.x);const i=BufferSourceConverter_1.toUint8Array(e.y);const s=new Uint8Array(r*2+1);s[0]=4;s.set(n,1);s.set(i,r+1);return s}static getSize(e){return Math.ceil(e/8)}static encodeSignature(e,t){const r=this.getSize(t);const n=BufferSourceConverter_1.toUint8Array(e.r);const i=BufferSourceConverter_1.toUint8Array(e.s);const s=new Uint8Array(r*2);s.set(this.padStart(n,r));s.set(this.padStart(i,r),r);return s}static decodeSignature(e,t){const r=this.getSize(t);const n=BufferSourceConverter_1.toUint8Array(e);if(n.length!==r*2){throw new Error("Incorrect size of the signature")}const i=n.slice(0,r);const s=n.slice(r);return{r:this.trimStart(i),s:this.trimStart(s)}}static trimStart(e){let t=0;while(t<e.length-1&&e[t]===0){t++}if(t===0){return e}return e.slice(t,e.length)}static padStart(e,t){if(t===e.length){return e}const r=new Uint8Array(t);r.set(e,t-e.length);return r}}class EcDsaSignature{constructor(){this.r=new ArrayBuffer(0);this.s=new ArrayBuffer(0)}static fromWebCryptoSignature(e){const t=e.byteLength/2;const r=EcUtils.decodeSignature(e,t*8);const n=new EcDsaSignature;n.r=BufferSourceConverter_1.toArrayBuffer(r.r);n.s=BufferSourceConverter_1.toArrayBuffer(r.s);return n}toWebCryptoSignature(e){e!==null&&e!==void 0?e:e=Math.max(this.r.byteLength,this.s.byteLength)*8;const t=EcUtils.encodeSignature(this,e);return t.buffer}}__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerWithoutPaddingConverter})],EcDsaSignature.prototype,"r",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerWithoutPaddingConverter})],EcDsaSignature.prototype,"s",void 0);class OneAsymmetricKey extends PrivateKeyInfo{}__decorate([AsnProp({context:1,implicit:true,type:AsnPropTypes.BitString,optional:true})],OneAsymmetricKey.prototype,"publicKey",void 0);let EdPrivateKey=class e{constructor(){this.value=new ArrayBuffer(0)}fromJSON(e){if(!e.d){throw new Error("d: Missing required property")}this.value=Convert_1.FromBase64Url(e.d);return this}toJSON(){const e={d:Convert_1.ToBase64Url(this.value)};return e}};__decorate([AsnProp({type:AsnPropTypes.OctetString})],EdPrivateKey.prototype,"value",void 0);EdPrivateKey=__decorate([AsnType({type:AsnTypeTypes.Choice})],EdPrivateKey);let EdPublicKey=class e{constructor(e){this.value=new ArrayBuffer(0);if(e){this.value=e}}toJSON(){const e={x:Convert_1.ToBase64Url(this.value)};return e}fromJSON(e){if(!("x"in e)){throw new Error("x: Missing required property")}this.value=Convert_1.FromBase64Url(e.x);return this}};__decorate([AsnProp({type:AsnPropTypes.BitString})],EdPublicKey.prototype,"value",void 0);EdPublicKey=__decorate([AsnType({type:AsnTypeTypes.Choice})],EdPublicKey);let CurvePrivateKey=class e{};__decorate([AsnProp({type:AsnPropTypes.OctetString}),JsonProp({type:JsonPropTypes.String,converter:JsonBase64UrlArrayBufferConverter})],CurvePrivateKey.prototype,"d",void 0);CurvePrivateKey=__decorate([AsnType({type:AsnTypeTypes.Choice})],CurvePrivateKey);const idSecp256r1="1.2.840.10045.3.1.7";const idEllipticCurve="1.3.132.0";const idSecp384r1=`${idEllipticCurve}.34`;const idSecp521r1=`${idEllipticCurve}.35`;const idSecp256k1=`${idEllipticCurve}.10`;const idVersionOne="1.3.36.3.3.2.8.1.1";const idBrainpoolP160r1=`${idVersionOne}.1`;const idBrainpoolP160t1=`${idVersionOne}.2`;const idBrainpoolP192r1=`${idVersionOne}.3`;const idBrainpoolP192t1=`${idVersionOne}.4`;const idBrainpoolP224r1=`${idVersionOne}.5`;const idBrainpoolP224t1=`${idVersionOne}.6`;const idBrainpoolP256r1=`${idVersionOne}.7`;const idBrainpoolP256t1=`${idVersionOne}.8`;const idBrainpoolP320r1=`${idVersionOne}.9`;const idBrainpoolP320t1=`${idVersionOne}.10`;const idBrainpoolP384r1=`${idVersionOne}.11`;const idBrainpoolP384t1=`${idVersionOne}.12`;const idBrainpoolP512r1=`${idVersionOne}.13`;const idBrainpoolP512t1=`${idVersionOne}.14`;const idX25519="1.3.101.110";const idX448="1.3.101.111";const idEd25519="1.3.101.112";const idEd448="1.3.101.113";var index$1=Object.freeze({__proto__:null,AlgorithmIdentifier,get CurvePrivateKey(){return CurvePrivateKey},EcDsaSignature,EcPrivateKey,get EcPublicKey(){return EcPublicKey},get EdPrivateKey(){return EdPrivateKey},get EdPublicKey(){return EdPublicKey},get ObjectIdentifier(){return ObjectIdentifier},OneAsymmetricKey,PrivateKeyInfo,PublicKeyInfo,RsaPrivateKey,RsaPublicKey,converters:index$2,idBrainpoolP160r1,idBrainpoolP160t1,idBrainpoolP192r1,idBrainpoolP192t1,idBrainpoolP224r1,idBrainpoolP224t1,idBrainpoolP256r1,idBrainpoolP256t1,idBrainpoolP320r1,idBrainpoolP320t1,idBrainpoolP384r1,idBrainpoolP384t1,idBrainpoolP512r1,idBrainpoolP512t1,idEd25519,idEd448,idEllipticCurve,idSecp256k1,idSecp256r1,idSecp384r1,idSecp521r1,idVersionOne,idX25519,idX448});class EcCurves{constructor(){}static register(e){const t=new ObjectIdentifier;t.value=e.id;const r=AsnConvert.serialize(t);this.items.push({...e,raw:r});this.names.push(e.name)}static find(e){e=e.toUpperCase();for(const t of this.items){if(t.name.toUpperCase()===e||t.id.toUpperCase()===e){return t}}return null}static get(e){const t=this.find(e);if(!t){throw new Error(`Unsupported EC named curve '${e}'`)}return t}}EcCurves.items=[];EcCurves.names=[];EcCurves.register({name:"P-256",id:idSecp256r1,size:256});EcCurves.register({name:"P-384",id:idSecp384r1,size:384});EcCurves.register({name:"P-521",id:idSecp521r1,size:521});EcCurves.register({name:"K-256",id:idSecp256k1,size:256});EcCurves.register({name:"brainpoolP160r1",id:idBrainpoolP160r1,size:160});EcCurves.register({name:"brainpoolP160t1",id:idBrainpoolP160t1,size:160});EcCurves.register({name:"brainpoolP192r1",id:idBrainpoolP192r1,size:192});EcCurves.register({name:"brainpoolP192t1",id:idBrainpoolP192t1,size:192});EcCurves.register({name:"brainpoolP224r1",id:idBrainpoolP224r1,size:224});EcCurves.register({name:"brainpoolP224t1",id:idBrainpoolP224t1,size:224});EcCurves.register({name:"brainpoolP256r1",id:idBrainpoolP256r1,size:256});EcCurves.register({name:"brainpoolP256t1",id:idBrainpoolP256t1,size:256});EcCurves.register({name:"brainpoolP320r1",id:idBrainpoolP320r1,size:320});EcCurves.register({name:"brainpoolP320t1",id:idBrainpoolP320t1,size:320});EcCurves.register({name:"brainpoolP384r1",id:idBrainpoolP384r1,size:384});EcCurves.register({name:"brainpoolP384t1",id:idBrainpoolP384t1,size:384});EcCurves.register({name:"brainpoolP512r1",id:idBrainpoolP512r1,size:512});EcCurves.register({name:"brainpoolP512t1",id:idBrainpoolP512t1,size:512});class HmacProvider extends ProviderCrypto{constructor(){super(...arguments);this.name="HMAC";this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"];this.usages=["sign","verify"]}getDefaultLength(e){switch(e.toUpperCase()){case"SHA-1":case"SHA-256":case"SHA-384":case"SHA-512":return 512;default:throw new Error(`Unknown algorithm name '${e}'`)}}checkGenerateKeyParams(e){this.checkRequiredProperty(e,"hash");this.checkHashAlgorithm(e.hash,this.hashAlgorithms);if("length"in e){if(typeof e.length!=="number"){throw new TypeError("length: Is not a Number")}if(e.length<1){throw new RangeError("length: Number is out of range")}}}checkImportParams(e){this.checkRequiredProperty(e,"hash");this.checkHashAlgorithm(e.hash,this.hashAlgorithms)}}class Pbkdf2Provider extends ProviderCrypto{constructor(){super(...arguments);this.name="PBKDF2";this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"];this.usages=["deriveBits","deriveKey"]}checkAlgorithmParams(e){this.checkRequiredProperty(e,"hash");this.checkHashAlgorithm(e.hash,this.hashAlgorithms);this.checkRequiredProperty(e,"salt");if(!(e.salt instanceof ArrayBuffer||ArrayBuffer.isView(e.salt))){throw new TypeError("salt: Is not of type '(ArrayBuffer or ArrayBufferView)'")}this.checkRequiredProperty(e,"iterations");if(typeof e.iterations!=="number"){throw new TypeError("iterations: Is not a Number")}if(e.iterations<1){throw new TypeError("iterations: Is less than 1")}}checkImportKey(e,t,r,n,i,...s){super.checkImportKey(e,t,r,n,i,...s);if(n){throw new SyntaxError("extractable: Must be 'false'")}}}class HkdfProvider extends ProviderCrypto{constructor(){super(...arguments);this.name="HKDF";this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"];this.usages=["deriveKey","deriveBits"]}checkAlgorithmParams(e){this.checkRequiredProperty(e,"hash");this.checkHashAlgorithm(e.hash,this.hashAlgorithms);this.checkRequiredProperty(e,"salt");if(!BufferSourceConverter_1.isBufferSource(e.salt)){throw new TypeError("salt: Is not of type '(ArrayBuffer or ArrayBufferView)'")}this.checkRequiredProperty(e,"info");if(!BufferSourceConverter_1.isBufferSource(e.info)){throw new TypeError("salt: Is not of type '(ArrayBuffer or ArrayBufferView)'")}}checkImportKey(e,t,r,n,i,...s){super.checkImportKey(e,t,r,n,i,...s);if(n){throw new SyntaxError("extractable: Must be 'false'")}}}class ShakeProvider extends ProviderCrypto{constructor(){super(...arguments);this.usages=[];this.defaultLength=0}digest(...e){e[0]={length:this.defaultLength,...e[0]};return super.digest.apply(this,e)}checkDigest(e,t){super.checkDigest(e,t);const r=e.length||0;if(typeof r!=="number"){throw new TypeError("length: Is not a Number")}if(r<0){throw new TypeError("length: Is negative")}}}class Shake128Provider extends ShakeProvider{constructor(){super(...arguments);this.name="shake128";this.defaultLength=16}}class Shake256Provider extends ShakeProvider{constructor(){super(...arguments);this.name="shake256";this.defaultLength=32}}class Crypto{get[Symbol.toStringTag](){return"Crypto"}randomUUID(){const e=this.getRandomValues(new Uint8Array(16));e[6]=e[6]&15|64;e[8]=e[8]&63|128;const t=Convert_1.ToHex(e).toLowerCase();return`${t.substring(0,8)}-${t.substring(8,12)}-${t.substring(12,16)}-${t.substring(16,20)}-${t.substring(20)}`}}class ProviderStorage{constructor(){this.items={}}get(e){return this.items[e.toLowerCase()]||null}set(e){this.items[e.name.toLowerCase()]=e}removeAt(e){const t=this.get(e.toLowerCase());if(t){delete this.items[e]}return t}has(e){return!!this.get(e)}get length(){return Object.keys(this.items).length}get algorithms(){const e=[];for(const t in this.items){const r=this.items[t];e.push(r.name)}return e.sort()}}class SubtleCrypto{constructor(){this.providers=new ProviderStorage}static isHashedAlgorithm(e){return e&&typeof e==="object"&&"name"in e&&"hash"in e?true:false}get[Symbol.toStringTag](){return"SubtleCrypto"}async digest(...e){this.checkRequiredArguments(e,2,"digest");const[t,r,...n]=e;const i=this.prepareAlgorithm(t);const s=BufferSourceConverter_1.toArrayBuffer(r);const a=this.getProvider(i.name);const o=await a.digest(i,s,...n);return o}async generateKey(...e){this.checkRequiredArguments(e,3,"generateKey");const[t,r,n,...i]=e;const s=this.prepareAlgorithm(t);const a=this.getProvider(s.name);const o=await a.generateKey({...s,name:a.name},r,n,...i);return o}async sign(...e){this.checkRequiredArguments(e,3,"sign");const[t,r,n,...i]=e;this.checkCryptoKey(r);const s=this.prepareAlgorithm(t);const a=BufferSourceConverter_1.toArrayBuffer(n);const o=this.getProvider(s.name);const f=await o.sign({...s,name:o.name},r,a,...i);return f}async verify(...e){this.checkRequiredArguments(e,4,"verify");const[t,r,n,i,...s]=e;this.checkCryptoKey(r);const a=this.prepareAlgorithm(t);const o=BufferSourceConverter_1.toArrayBuffer(i);const f=BufferSourceConverter_1.toArrayBuffer(n);const c=this.getProvider(a.name);const u=await c.verify({...a,name:c.name},r,f,o,...s);return u}async encrypt(...e){this.checkRequiredArguments(e,3,"encrypt");const[t,r,n,...i]=e;this.checkCryptoKey(r);const s=this.prepareAlgorithm(t);const a=BufferSourceConverter_1.toArrayBuffer(n);const o=this.getProvider(s.name);const f=await o.encrypt({...s,name:o.name},r,a,{keyUsage:true},...i);return f}async decrypt(...e){this.checkRequiredArguments(e,3,"decrypt");const[t,r,n,...i]=e;this.checkCryptoKey(r);const s=this.prepareAlgorithm(t);const a=BufferSourceConverter_1.toArrayBuffer(n);const o=this.getProvider(s.name);const f=await o.decrypt({...s,name:o.name},r,a,{keyUsage:true},...i);return f}async deriveBits(...e){this.checkRequiredArguments(e,3,"deriveBits");const[t,r,n,...i]=e;this.checkCryptoKey(r);const s=this.prepareAlgorithm(t);const a=this.getProvider(s.name);const o=await a.deriveBits({...s,name:a.name},r,n,{keyUsage:true},...i);return o}async deriveKey(...e){this.checkRequiredArguments(e,5,"deriveKey");const[t,r,n,i,s,...a]=e;const o=this.prepareAlgorithm(n);const f=this.getProvider(o.name);f.checkDerivedKeyParams(o);const c=this.prepareAlgorithm(t);const u=this.getProvider(c.name);u.checkCryptoKey(r,"deriveKey");const l=await u.deriveBits({...c,name:u.name},r,n.length||512,{keyUsage:false},...a);return this.importKey("raw",l,n,i,s,...a)}async exportKey(...e){this.checkRequiredArguments(e,2,"exportKey");const[t,r,...n]=e;this.checkCryptoKey(r);const i=this.getProvider(r.algorithm.name);const s=await i.exportKey(t,r,...n);return s}async importKey(...e){this.checkRequiredArguments(e,5,"importKey");const[t,r,n,i,s,...a]=e;const o=this.prepareAlgorithm(n);const f=this.getProvider(o.name);if(["pkcs8","spki","raw"].indexOf(t)!==-1){const e=BufferSourceConverter_1.toArrayBuffer(r);return f.importKey(t,e,{...o,name:f.name},i,s,...a)}else{if(!r.kty){throw new TypeError("keyData: Is not JSON")}}return f.importKey(t,r,{...o,name:f.name},i,s,...a)}async wrapKey(e,t,r,n,...i){let s=await this.exportKey(e,t,...i);if(e==="jwk"){const e=JSON.stringify(s);s=Convert_1.FromUtf8String(e)}const a=this.prepareAlgorithm(n);const o=BufferSourceConverter_1.toArrayBuffer(s);const f=this.getProvider(a.name);return f.encrypt({...a,name:f.name},r,o,{keyUsage:false},...i)}async unwrapKey(e,t,r,n,i,s,a,...o){const f=this.prepareAlgorithm(n);const c=BufferSourceConverter_1.toArrayBuffer(t);const u=this.getProvider(f.name);let l=await u.decrypt({...f,name:u.name},r,c,{keyUsage:false},...o);if(e==="jwk"){try{l=JSON.parse(Convert_1.ToUtf8String(l))}catch(e){const t=new TypeError("wrappedKey: Is not a JSON");t.internal=e;throw t}}return this.importKey(e,l,i,s,a,...o)}checkRequiredArguments(e,t,r){if(e.length<t){throw new TypeError(`Failed to execute '${r}' on 'SubtleCrypto': ${t} arguments required, but only ${e.length} present`)}}prepareAlgorithm(e){if(typeof e==="string"){return{name:e}}if(SubtleCrypto.isHashedAlgorithm(e)){const t={...e};t.hash=this.prepareAlgorithm(e.hash);return t}return{...e}}getProvider(e){const t=this.providers.get(e);if(!t){throw new AlgorithmError("Unrecognized name")}return t}checkCryptoKey(e){if(!(e instanceof CryptoKey)){throw new TypeError(`Key is not of type 'CryptoKey'`)}}}var index=Object.freeze({__proto__:null,converters:index$3});const REQUIRED_FIELDS=["crv","e","k","kty","n","x","y"];class JwkUtils{static async thumbprint(e,t,r){const n=this.format(t,true);return r.subtle.digest(e,Convert_1.FromBinary(JSON.stringify(n)))}static format(e,t=false){let r=Object.entries(e);if(t){r=r.filter((e=>REQUIRED_FIELDS.includes(e[0])))}r=r.sort((([e],[t])=>e>t?1:e<t?-1:0));return Object.fromEntries(r)}}const webcryptoCore_es=Object.freeze({__proto__:null,AesCbcProvider,AesCmacProvider,AesCtrProvider,AesEcbProvider,AesGcmProvider,AesKwProvider,AesProvider,AlgorithmError,Crypto,CryptoError,CryptoKey,DesProvider,EcCurves,EcUtils,EcdhEsProvider,EcdhProvider,EcdsaProvider,EdDsaProvider,EllipticProvider,HkdfProvider,HmacProvider,JwkUtils,OperationError,Pbkdf2Provider,PemConverter,ProviderCrypto,ProviderStorage,RequiredPropertyError,RsaOaepProvider,RsaProvider,RsaPssProvider,RsaSsaProvider,Shake128Provider,Shake256Provider,ShakeProvider,SubtleCrypto,UnsupportedOperationError,asn1:index$1,isJWK,json:index,BufferSourceConverter:BufferSourceConverter_1});const require$$0$2=getAugmentedNamespace(webcryptoCore_es);const require$$0$1=getAugmentedNamespace(tslib_es6$1);const require$$2$1=getAugmentedNamespace(es2015);const require$$3$1=getAugmentedNamespace(index_es);const local_atob=typeof atob==="undefined"?e=>Buffer.from(e,"base64").toString("binary"):atob;const local_btoa=typeof btoa==="undefined"?e=>Buffer.from(e,"binary").toString("base64"):btoa;function string_to_bytes(e,t=false){var r=e.length,n=new Uint8Array(t?4*r:r);for(var i=0,s=0;i<r;i++){var a=e.charCodeAt(i);if(t&&55296<=a&&a<=56319){if(++i>=r)throw new Error("Malformed string, low surrogate expected at position "+i);a=(a^55296)<<10|65536|e.charCodeAt(i)^56320}else if(!t&&a>>>8){throw new Error("Wide characters are not allowed.")}if(!t||a<=127){n[s++]=a}else if(a<=2047){n[s++]=192|a>>6;n[s++]=128|a&63}else if(a<=65535){n[s++]=224|a>>12;n[s++]=128|a>>6&63;n[s++]=128|a&63}else{n[s++]=240|a>>18;n[s++]=128|a>>12&63;n[s++]=128|a>>6&63;n[s++]=128|a&63}}return n.subarray(0,s)}function hex_to_bytes(e){var t=e.length;if(t&1){e="0"+e;t++}var r=new Uint8Array(t>>1);for(var n=0;n<t;n+=2){r[n>>1]=parseInt(e.substr(n,2),16)}return r}function base64_to_bytes(e){return string_to_bytes(local_atob(e))}function bytes_to_string(e,t=false){var r=e.length,n=new Array(r);for(var i=0,s=0;i<r;i++){var a=e[i];if(!t||a<128){n[s++]=a}else if(a>=192&&a<224&&i+1<r){n[s++]=(a&31)<<6|e[++i]&63}else if(a>=224&&a<240&&i+2<r){n[s++]=(a&15)<<12|(e[++i]&63)<<6|e[++i]&63}else if(a>=240&&a<248&&i+3<r){var o=(a&7)<<18|(e[++i]&63)<<12|(e[++i]&63)<<6|e[++i]&63;if(o<=65535){n[s++]=o}else{o^=65536;n[s++]=55296|o>>10;n[s++]=56320|o&1023}}else{throw new Error("Malformed UTF8 character at byte offset "+i)}}var f="",c=16384;for(var i=0;i<s;i+=c){f+=String.fromCharCode.apply(String,n.slice(i,i+c<=s?i+c:s))}return f}function bytes_to_hex(e){var t="";for(var r=0;r<e.length;r++){var n=(e[r]&255).toString(16);if(n.length<2)t+="0";t+=n}return t}function bytes_to_base64(e){return local_btoa(bytes_to_string(e))}function is_bytes(e){return e instanceof Uint8Array}function _heap_init(e,t){const r=e?e.byteLength:t||65536;if(r&4095||r<=0)throw new Error("heap size must be a positive integer and a multiple of 4096");e=e||new Uint8Array(new ArrayBuffer(r));return e}function _heap_write(e,t,r,n,i){const s=e.length-t;const a=s<i?s:i;e.set(r.subarray(n,n+a),t);return a}function joinBytes(...e){const t=e.reduce(((e,t)=>e+t.length),0);const r=new Uint8Array(t);let n=0;for(let t=0;t<e.length;t++){r.set(e[t],n);n+=e[t].length}return r}class IllegalStateError extends Error{constructor(...e){super(...e)}}class IllegalArgumentError extends Error{constructor(...e){super(...e)}}class SecurityError extends Error{constructor(...e){super(...e)}}
/**
 * @file {@link http://asmjs.org Asm.js} implementation of the {@link https://en.wikipedia.org/wiki/Advanced_Encryption_Standard Advanced Encryption Standard}.
 * @author Artem S Vybornov <vybornov@gmail.com>
 * @license MIT
 */var AES_asm=function(){var e=false;var t,r;function n(){t=[],r=[];var n=1,i,s;for(i=0;i<255;i++){t[i]=n;s=n&128,n<<=1,n&=255;if(s===128)n^=27;n^=t[i];r[t[i]]=i}t[255]=t[0];r[0]=0;e=true}function i(e,n){var i=t[(r[e]+r[n])%255];if(e===0||n===0)i=0;return i}function s(e){var n=t[255-r[e]];if(e===0)n=0;return n}var a=false;var o;var f;var c;var u;function l(){if(!e)n();function t(e){var t,r,n;r=n=s(e);for(t=0;t<4;t++){r=(r<<1|r>>>7)&255;n^=r}n^=99;return n}o=[],f=[],c=[[],[],[],[]],u=[[],[],[],[]];for(var r=0;r<256;r++){var l=t(r);o[r]=l;f[l]=r;c[0][r]=i(2,l)<<24|l<<16|l<<8|i(3,l);u[0][l]=i(14,r)<<24|i(9,r)<<16|i(13,r)<<8|i(11,r);for(var h=1;h<4;h++){c[h][r]=c[h-1][r]>>>8|c[h-1][r]<<24;u[h][l]=u[h-1][l]>>>8|u[h-1][l]<<24}}a=true}var h=function(e,t){if(!a)l();var r=new Uint32Array(t);r.set(o,2048>>2);r.set(f,3072>>2);for(var n=0;n<4;n++){r.set(c[n],4096+1024*n>>2);r.set(u[n],8192+1024*n>>2)}function i(e,t,n,i,s,a,f,c,l){var d=r.subarray(0,60),p=r.subarray(256,256+60);d.set([t,n,i,s,a,f,c,l]);for(var y=e,m=1;y<4*e+28;y++){var g=d[y-1];if(y%e===0||e===8&&y%e===4){g=o[g>>>24]<<24^o[g>>>16&255]<<16^o[g>>>8&255]<<8^o[g&255]}if(y%e===0){g=g<<8^g>>>24^m<<24;m=m<<1^(m&128?27:0)}d[y]=d[y-e]^g}for(var b=0;b<y;b+=4){for(var A=0;A<4;A++){var g=d[y-(4+b)+(4-A)%4];if(b<4||b>=y-4){p[b+A]=g}else{p[b+A]=u[0][o[g>>>24]]^u[1][o[g>>>16&255]]^u[2][o[g>>>8&255]]^u[3][o[g&255]]}}}h.set_rounds(e+5)}var s={Uint8Array,Uint32Array};var h=function(e,t,r){"use asm";var n=0,i=0,s=0,a=0,o=0,f=0,c=0,u=0,l=0,h=0,d=0,p=0,y=0,m=0,g=0,b=0,A=0,w=0,E=0,v=0,_=0;var S=new e.Uint32Array(r),$=new e.Uint8Array(r);function T(e,t,r,o,f,c,u,l){e=e|0;t=t|0;r=r|0;o=o|0;f=f|0;c=c|0;u=u|0;l=l|0;var h=0,d=0,p=0,y=0,m=0,g=0,b=0,A=0;h=r|0x400,d=r|0x800,p=r|0xc00;f=f^S[(e|0)>>2],c=c^S[(e|4)>>2],u=u^S[(e|8)>>2],l=l^S[(e|12)>>2];for(A=16;(A|0)<=o<<4;A=A+16|0){y=S[(r|f>>22&1020)>>2]^S[(h|c>>14&1020)>>2]^S[(d|u>>6&1020)>>2]^S[(p|l<<2&1020)>>2]^S[(e|A|0)>>2],m=S[(r|c>>22&1020)>>2]^S[(h|u>>14&1020)>>2]^S[(d|l>>6&1020)>>2]^S[(p|f<<2&1020)>>2]^S[(e|A|4)>>2],g=S[(r|u>>22&1020)>>2]^S[(h|l>>14&1020)>>2]^S[(d|f>>6&1020)>>2]^S[(p|c<<2&1020)>>2]^S[(e|A|8)>>2],b=S[(r|l>>22&1020)>>2]^S[(h|f>>14&1020)>>2]^S[(d|c>>6&1020)>>2]^S[(p|u<<2&1020)>>2]^S[(e|A|12)>>2];f=y,c=m,u=g,l=b}n=S[(t|f>>22&1020)>>2]<<24^S[(t|c>>14&1020)>>2]<<16^S[(t|u>>6&1020)>>2]<<8^S[(t|l<<2&1020)>>2]^S[(e|A|0)>>2],i=S[(t|c>>22&1020)>>2]<<24^S[(t|u>>14&1020)>>2]<<16^S[(t|l>>6&1020)>>2]<<8^S[(t|f<<2&1020)>>2]^S[(e|A|4)>>2],s=S[(t|u>>22&1020)>>2]<<24^S[(t|l>>14&1020)>>2]<<16^S[(t|f>>6&1020)>>2]<<8^S[(t|c<<2&1020)>>2]^S[(e|A|8)>>2],a=S[(t|l>>22&1020)>>2]<<24^S[(t|f>>14&1020)>>2]<<16^S[(t|c>>6&1020)>>2]<<8^S[(t|u<<2&1020)>>2]^S[(e|A|12)>>2]}function I(e,t,r,n){e=e|0;t=t|0;r=r|0;n=n|0;T(0x0000,0x0800,0x1000,_,e,t,r,n)}function C(e,t,r,n){e=e|0;t=t|0;r=r|0;n=n|0;var s=0;T(0x0400,0x0c00,0x2000,_,e,n,r,t);s=i,i=a,a=s}function P(e,t,r,l){e=e|0;t=t|0;r=r|0;l=l|0;T(0x0000,0x0800,0x1000,_,o^e,f^t,c^r,u^l);o=n,f=i,c=s,u=a}function R(e,t,r,l){e=e|0;t=t|0;r=r|0;l=l|0;var h=0;T(0x0400,0x0c00,0x2000,_,e,l,r,t);h=i,i=a,a=h;n=n^o,i=i^f,s=s^c,a=a^u;o=e,f=t,c=r,u=l}function N(e,t,r,l){e=e|0;t=t|0;r=r|0;l=l|0;T(0x0000,0x0800,0x1000,_,o,f,c,u);o=n=n^e,f=i=i^t,c=s=s^r,u=a=a^l}function k(e,t,r,l){e=e|0;t=t|0;r=r|0;l=l|0;T(0x0000,0x0800,0x1000,_,o,f,c,u);n=n^e,i=i^t,s=s^r,a=a^l;o=e,f=t,c=r,u=l}function O(e,t,r,l){e=e|0;t=t|0;r=r|0;l=l|0;T(0x0000,0x0800,0x1000,_,o,f,c,u);o=n,f=i,c=s,u=a;n=n^e,i=i^t,s=s^r,a=a^l}function x(e,t,r,o){e=e|0;t=t|0;r=r|0;o=o|0;T(0x0000,0x0800,0x1000,_,l,h,d,p);p=~b&p|b&p+1;d=~g&d|g&d+((p|0)==0);h=~m&h|m&h+((d|0)==0);l=~y&l|y&l+((h|0)==0);n=n^e;i=i^t;s=s^r;a=a^o}function B(e,t,r,n){e=e|0;t=t|0;r=r|0;n=n|0;var i=0,s=0,a=0,l=0,h=0,d=0,p=0,y=0,m=0,g=0;e=e^o,t=t^f,r=r^c,n=n^u;i=A|0,s=w|0,a=E|0,l=v|0;for(;(m|0)<128;m=m+1|0){if(i>>>31){h=h^e,d=d^t,p=p^r,y=y^n}i=i<<1|s>>>31,s=s<<1|a>>>31,a=a<<1|l>>>31,l=l<<1;g=n&1;n=n>>>1|r<<31,r=r>>>1|t<<31,t=t>>>1|e<<31,e=e>>>1;if(g)e=e^0xe1000000}o=h,f=d,c=p,u=y}function D(e){e=e|0;_=e}function M(e,t,r,o){e=e|0;t=t|0;r=r|0;o=o|0;n=e,i=t,s=r,a=o}function U(e,t,r,n){e=e|0;t=t|0;r=r|0;n=n|0;o=e,f=t,c=r,u=n}function L(e,t,r,n){e=e|0;t=t|0;r=r|0;n=n|0;l=e,h=t,d=r,p=n}function F(e,t,r,n){e=e|0;t=t|0;r=r|0;n=n|0;y=e,m=t,g=r,b=n}function H(e,t,r,n){e=e|0;t=t|0;r=r|0;n=n|0;p=~b&p|b&n,d=~g&d|g&r,h=~m&h|m&t,l=~y&l|y&e}function V(e){e=e|0;if(e&15)return-1;$[e|0]=n>>>24,$[e|1]=n>>>16&255,$[e|2]=n>>>8&255,$[e|3]=n&255,$[e|4]=i>>>24,$[e|5]=i>>>16&255,$[e|6]=i>>>8&255,$[e|7]=i&255,$[e|8]=s>>>24,$[e|9]=s>>>16&255,$[e|10]=s>>>8&255,$[e|11]=s&255,$[e|12]=a>>>24,$[e|13]=a>>>16&255,$[e|14]=a>>>8&255,$[e|15]=a&255;return 16}function G(e){e=e|0;if(e&15)return-1;$[e|0]=o>>>24,$[e|1]=o>>>16&255,$[e|2]=o>>>8&255,$[e|3]=o&255,$[e|4]=f>>>24,$[e|5]=f>>>16&255,$[e|6]=f>>>8&255,$[e|7]=f&255,$[e|8]=c>>>24,$[e|9]=c>>>16&255,$[e|10]=c>>>8&255,$[e|11]=c&255,$[e|12]=u>>>24,$[e|13]=u>>>16&255,$[e|14]=u>>>8&255,$[e|15]=u&255;return 16}function j(){I(0,0,0,0);A=n,w=i,E=s,v=a}function K(e,t,r){e=e|0;t=t|0;r=r|0;var o=0;if(t&15)return-1;while((r|0)>=16){q[e&7]($[t|0]<<24|$[t|1]<<16|$[t|2]<<8|$[t|3],$[t|4]<<24|$[t|5]<<16|$[t|6]<<8|$[t|7],$[t|8]<<24|$[t|9]<<16|$[t|10]<<8|$[t|11],$[t|12]<<24|$[t|13]<<16|$[t|14]<<8|$[t|15]);$[t|0]=n>>>24,$[t|1]=n>>>16&255,$[t|2]=n>>>8&255,$[t|3]=n&255,$[t|4]=i>>>24,$[t|5]=i>>>16&255,$[t|6]=i>>>8&255,$[t|7]=i&255,$[t|8]=s>>>24,$[t|9]=s>>>16&255,$[t|10]=s>>>8&255,$[t|11]=s&255,$[t|12]=a>>>24,$[t|13]=a>>>16&255,$[t|14]=a>>>8&255,$[t|15]=a&255;o=o+16|0,t=t+16|0,r=r-16|0}return o|0}function Y(e,t,r){e=e|0;t=t|0;r=r|0;var n=0;if(t&15)return-1;while((r|0)>=16){z[e&1]($[t|0]<<24|$[t|1]<<16|$[t|2]<<8|$[t|3],$[t|4]<<24|$[t|5]<<16|$[t|6]<<8|$[t|7],$[t|8]<<24|$[t|9]<<16|$[t|10]<<8|$[t|11],$[t|12]<<24|$[t|13]<<16|$[t|14]<<8|$[t|15]);n=n+16|0,t=t+16|0,r=r-16|0}return n|0}var q=[I,C,P,R,N,k,O,x];var z=[P,B];return{set_rounds:D,set_state:M,set_iv:U,set_nonce:L,set_mask:F,set_counter:H,get_state:V,get_iv:G,gcm_init:j,cipher:K,mac:Y}}(s,e,t);h.set_key=i;return h};h.ENC={ECB:0,CBC:2,CFB:4,OFB:6,CTR:7},h.DEC={ECB:1,CBC:3,CFB:5,OFB:6,CTR:7},h.MAC={CBC:0,GCM:1};h.HEAP_DATA=16384;return h}();class AES{constructor(e,t,r=true,n){this.pos=0;this.len=0;this.mode=n;this.heap=_heap_init().subarray(AES_asm.HEAP_DATA);this.asm=new AES_asm(null,this.heap.buffer);this.pos=0;this.len=0;const i=e.length;if(i!==16&&i!==24&&i!==32)throw new IllegalArgumentError("illegal key size");const s=new DataView(e.buffer,e.byteOffset,e.byteLength);this.asm.set_key(i>>2,s.getUint32(0),s.getUint32(4),s.getUint32(8),s.getUint32(12),i>16?s.getUint32(16):0,i>16?s.getUint32(20):0,i>24?s.getUint32(24):0,i>24?s.getUint32(28):0);if(t!==undefined){if(t.length!==16)throw new IllegalArgumentError("illegal iv size");let e=new DataView(t.buffer,t.byteOffset,t.byteLength);this.asm.set_iv(e.getUint32(0),e.getUint32(4),e.getUint32(8),e.getUint32(12))}else{this.asm.set_iv(0,0,0,0)}this.padding=r}AES_Encrypt_process(e){if(!is_bytes(e))throw new TypeError("data isn't of expected type");let t=this.asm;let r=this.heap;let n=AES_asm.ENC[this.mode];let i=AES_asm.HEAP_DATA;let s=this.pos;let a=this.len;let o=0;let f=e.length||0;let c=0;let u=a+f&-16;let l=0;let h=new Uint8Array(u);while(f>0){l=_heap_write(r,s+a,e,o,f);a+=l;o+=l;f-=l;l=t.cipher(n,i+s,a);if(l)h.set(r.subarray(s,s+l),c);c+=l;if(l<a){s+=l;a-=l}else{s=0;a=0}}this.pos=s;this.len=a;return h}AES_Encrypt_finish(){let e=this.asm;let t=this.heap;let r=AES_asm.ENC[this.mode];let n=AES_asm.HEAP_DATA;let i=this.pos;let s=this.len;let a=16-s%16;let o=s;if(this.hasOwnProperty("padding")){if(this.padding){for(let e=0;e<a;++e){t[i+s+e]=a}s+=a;o=s}else if(s%16){throw new IllegalArgumentError("data length must be a multiple of the block size")}}else{s+=a}const f=new Uint8Array(o);if(s)e.cipher(r,n+i,s);if(o)f.set(t.subarray(i,i+o));this.pos=0;this.len=0;return f}AES_Decrypt_process(e){if(!is_bytes(e))throw new TypeError("data isn't of expected type");let t=this.asm;let r=this.heap;let n=AES_asm.DEC[this.mode];let i=AES_asm.HEAP_DATA;let s=this.pos;let a=this.len;let o=0;let f=e.length||0;let c=0;let u=a+f&-16;let l=0;let h=0;if(this.padding){l=a+f-u||16;u-=l}const d=new Uint8Array(u);while(f>0){h=_heap_write(r,s+a,e,o,f);a+=h;o+=h;f-=h;h=t.cipher(n,i+s,a-(!f?l:0));if(h)d.set(r.subarray(s,s+h),c);c+=h;if(h<a){s+=h;a-=h}else{s=0;a=0}}this.pos=s;this.len=a;return d}AES_Decrypt_finish(){let e=this.asm;let t=this.heap;let r=AES_asm.DEC[this.mode];let n=AES_asm.HEAP_DATA;let i=this.pos;let s=this.len;let a=s;if(s>0){if(s%16){if(this.hasOwnProperty("padding")){throw new IllegalArgumentError("data length must be a multiple of the block size")}else{s+=16-s%16}}e.cipher(r,n+i,s);if(this.hasOwnProperty("padding")&&this.padding){let e=t[i+a-1];if(e<1||e>16||e>a)throw new SecurityError("bad padding");let r=0;for(let n=e;n>1;n--)r|=e^t[i+a-n];if(r)throw new SecurityError("bad padding");a-=e}}const o=new Uint8Array(a);if(a>0){o.set(t.subarray(i,i+a))}this.pos=0;this.len=0;return o}}class AES_CBC extends AES{static encrypt(e,t,r=true,n){return new AES_CBC(t,n,r).encrypt(e)}static decrypt(e,t,r=true,n){return new AES_CBC(t,n,r).decrypt(e)}constructor(e,t,r=true){super(e,t,r,"CBC")}encrypt(e){const t=this.AES_Encrypt_process(e);const r=this.AES_Encrypt_finish();return joinBytes(t,r)}decrypt(e){const t=this.AES_Decrypt_process(e);const r=this.AES_Decrypt_finish();return joinBytes(t,r)}}const _AES_CCM_adata_maxLength=65279;const _AES_CCM_data_maxLength=0xffffffffffff0;class AES_CCM extends AES{constructor(e,t,r,n=16,i){super(e,undefined,undefined,"CCM");this.counter=1;this.dataLength=-1;if(n<4||n>16||n&1)throw new IllegalArgumentError("illegal tagSize value");this.tagSize=n;this.nonce=t;if(t.length<8||t.length>13)throw new IllegalArgumentError("illegal nonce length");this.lengthSize=15-t.length;t=new Uint8Array(t.length+1);t[0]=this.lengthSize-1;t.set(this.nonce,1);if(i<0||i>_AES_CCM_data_maxLength||i>Math.pow(2,8*this.lengthSize)-16)throw new IllegalArgumentError("illegal dataLength value");if(r!==undefined){if(r.length>_AES_CCM_adata_maxLength)throw new IllegalArgumentError("illegal adata length");this.adata=r.length?r:undefined}this.dataLength=i;this.counter=1;this.AES_CCM_calculate_iv();this.AES_CTR_set_options(t,this.counter,8*this.lengthSize)}static encrypt(e,t,r,n,i=16){return new AES_CCM(t,r,n,i,e.length).encrypt(e)}static decrypt(e,t,r,n,i=16){return new AES_CCM(t,r,n,i,e.length-i).decrypt(e)}encrypt(e){this.dataLength=e.length||0;const t=this.AES_CCM_Encrypt_process(e);const r=this.AES_CCM_Encrypt_finish();const n=new Uint8Array(t.length+r.length);if(t.length)n.set(t);if(r.length)n.set(r,t.length);return n}decrypt(e){this.dataLength=e.length||0;const t=this.AES_CCM_Decrypt_process(e);const r=this.AES_CCM_Decrypt_finish();const n=new Uint8Array(t.length+r.length);if(t.length)n.set(t);if(r.length)n.set(r,t.length);return n}AES_CCM_calculate_iv(){const e=this.nonce;const t=this.adata;const r=this.tagSize;const n=this.lengthSize;const i=this.dataLength;const s=new Uint8Array(16+(t?2+t.length:0));s[0]=(t?64:0)|r-2<<2|n-1;s.set(e,1);if(n>6)s[9]=i/4294967296>>>16&15;if(n>5)s[10]=i/4294967296>>>8&255;if(n>4)s[11]=i/4294967296&255;if(n>3)s[12]=i>>>24;if(n>2)s[13]=i>>>16&255;s[14]=i>>>8&255;s[15]=i&255;if(t){s[16]=t.length>>>8&255;s[17]=t.length&255;s.set(t,18)}this._cbc_mac_process(s);this.asm.get_state(AES_asm.HEAP_DATA);const a=new Uint8Array(this.heap.subarray(0,16));const o=new DataView(a.buffer,a.byteOffset,a.byteLength);this.asm.set_iv(o.getUint32(0),o.getUint32(4),o.getUint32(8),o.getUint32(12))}_cbc_mac_process(e){const t=this.heap;const r=this.asm;let n=0;let i=e.length||0;let s=0;while(i>0){s=_heap_write(t,0,e,n,i);while(s&15)t[s++]=0;n+=s;i-=s;r.mac(AES_asm.MAC.CBC,AES_asm.HEAP_DATA,s)}}AES_CCM_Encrypt_process(e){const t=this.asm;const r=this.heap;let n=0;let i=e.length||0;let s=this.counter;let a=this.pos;let o=this.len;const f=o+i&-16;let c=0;let u=0;if((s-1<<4)+o+i>_AES_CCM_data_maxLength)throw new RangeError("counter overflow");const l=new Uint8Array(f);while(i>0){u=_heap_write(r,a+o,e,n,i);o+=u;n+=u;i-=u;u=t.mac(AES_asm.MAC.CBC,AES_asm.HEAP_DATA+a,o);u=t.cipher(AES_asm.ENC.CTR,AES_asm.HEAP_DATA+a,u);if(u)l.set(r.subarray(a,a+u),c);s+=u>>>4;c+=u;if(u<o){a+=u;o-=u}else{a=0;o=0}}this.counter=s;this.pos=a;this.len=o;return l}AES_CCM_Encrypt_finish(){const e=this.asm;const t=this.heap;const r=this.tagSize;const n=this.pos;const i=this.len;const s=new Uint8Array(i+r);let a=i;for(;a&15;a++)t[n+a]=0;e.mac(AES_asm.MAC.CBC,AES_asm.HEAP_DATA+n,a);e.cipher(AES_asm.ENC.CTR,AES_asm.HEAP_DATA+n,a);if(i)s.set(t.subarray(n,n+i));e.set_counter(0,0,0,0);e.get_iv(AES_asm.HEAP_DATA);e.cipher(AES_asm.ENC.CTR,AES_asm.HEAP_DATA,16);s.set(t.subarray(0,r),i);this.counter=1;this.pos=0;this.len=0;return s}AES_CCM_Decrypt_process(e){let t=0;let r=e.length||0;const n=this.asm;const i=this.heap;let s=this.counter;const a=this.tagSize;let o=this.pos;let f=this.len;let c=0;const u=f+r>a?f+r-a&-16:0;const l=f+r-u;let h=0;if((s-1<<4)+f+r>_AES_CCM_data_maxLength)throw new RangeError("counter overflow");const d=new Uint8Array(u);while(r>l){h=_heap_write(i,o+f,e,t,r-l);f+=h;t+=h;r-=h;h=n.cipher(AES_asm.DEC.CTR,AES_asm.HEAP_DATA+o,h);h=n.mac(AES_asm.MAC.CBC,AES_asm.HEAP_DATA+o,h);if(h)d.set(i.subarray(o,o+h),c);s+=h>>>4;c+=h;o=0;f=0}if(r>0){f+=_heap_write(i,0,e,t,r)}this.counter=s;this.pos=o;this.len=f;return d}AES_CCM_Decrypt_finish(){const e=this.asm;const t=this.heap;const r=this.tagSize;const n=this.pos;const i=this.len;const s=i-r;if(i<r)throw new IllegalStateError("authentication tag not found");const a=new Uint8Array(s);const o=new Uint8Array(t.subarray(n+s,n+i));e.cipher(AES_asm.DEC.CTR,AES_asm.HEAP_DATA+n,s+15&-16);a.set(t.subarray(n,n+s));let f=s;for(;f&15;f++)t[n+f]=0;e.mac(AES_asm.MAC.CBC,AES_asm.HEAP_DATA+n,f);e.set_counter(0,0,0,0);e.get_iv(AES_asm.HEAP_DATA);e.cipher(AES_asm.ENC.CTR,AES_asm.HEAP_DATA,16);let c=0;for(let e=0;e<r;++e)c|=o[e]^t[e];if(c)throw new SecurityError("data integrity check failed");this.counter=1;this.pos=0;this.len=0;return a}AES_CTR_set_options(e,t,r){if(r<8||r>48)throw new IllegalArgumentError("illegal counter size");const n=Math.pow(2,r)-1;this.asm.set_mask(0,0,n/4294967296|0,n|0);const i=e.length;if(!i||i>16)throw new IllegalArgumentError("illegal nonce size");this.nonce=e;const s=new DataView(new ArrayBuffer(16));new Uint8Array(s.buffer).set(e);this.asm.set_nonce(s.getUint32(0),s.getUint32(4),s.getUint32(8),s.getUint32(12));if(t<0||t>=Math.pow(2,r))throw new IllegalArgumentError("illegal counter value");this.counter=t;this.asm.set_counter(0,0,t/4294967296|0,t|0)}}class AES_CFB extends AES{static encrypt(e,t,r){return new AES_CFB(t,r).encrypt(e)}static decrypt(e,t,r){return new AES_CFB(t,r).decrypt(e)}constructor(e,t){super(e,t,true,"CFB");delete this.padding}encrypt(e){const t=this.AES_Encrypt_process(e);const r=this.AES_Encrypt_finish();return joinBytes(t,r)}decrypt(e){const t=this.AES_Decrypt_process(e);const r=this.AES_Decrypt_finish();return joinBytes(t,r)}}class AES_ECB extends AES{static encrypt(e,t,r=false){return new AES_ECB(t,r).encrypt(e)}static decrypt(e,t,r=false){return new AES_ECB(t,r).decrypt(e)}constructor(e,t=false){super(e,undefined,t,"ECB")}encrypt(e){const t=this.AES_Encrypt_process(e);const r=this.AES_Encrypt_finish();return joinBytes(t,r)}decrypt(e){const t=this.AES_Decrypt_process(e);const r=this.AES_Decrypt_finish();return joinBytes(t,r)}}function mul2(e){const t=e[0]&128;for(let t=0;t<15;t++){e[t]=e[t]<<1^(e[t+1]&128?1:0)}e[15]=e[15]<<1^(t?135:0)}class AES_CMAC{constructor(e){this.bufferLength=0;this.k=new AES_ECB(e).encrypt(new Uint8Array(16));mul2(this.k);this.cbc=new AES_CBC(e,new Uint8Array(16),false);this.buffer=new Uint8Array(16);this.result=null}static bytes(e,t){return new AES_CMAC(t).process(e).finish().result}process(e){if(this.bufferLength+e.length>16){this.cbc.encrypt(this.buffer.subarray(0,this.bufferLength));const t=(this.bufferLength+e.length-1&~15)-this.bufferLength;this.cbc.encrypt(e.subarray(0,t));this.buffer.set(e.subarray(t));this.bufferLength=e.length-t}else{this.buffer.set(e,this.bufferLength);this.bufferLength+=e.length}return this}finish(){if(this.bufferLength!==16){this.buffer[this.bufferLength]=128;for(let e=this.bufferLength+1;e<16;e++){this.buffer[e]=0}mul2(this.k)}for(let e=0;e<16;e++){this.buffer[e]^=this.k[e]}this.result=this.cbc.encrypt(this.buffer);return this}}class AES_CTR extends AES{static encrypt(e,t,r){return new AES_CTR(t,r).encrypt(e)}static decrypt(e,t,r){return new AES_CTR(t,r).encrypt(e)}constructor(e,t){super(e,undefined,false,"CTR");delete this.padding;this.AES_CTR_set_options(t)}encrypt(e){const t=this.AES_Encrypt_process(e);const r=this.AES_Encrypt_finish();return joinBytes(t,r)}decrypt(e){const t=this.AES_Encrypt_process(e);const r=this.AES_Encrypt_finish();return joinBytes(t,r)}AES_CTR_set_options(e,t,r){if(r!==undefined){if(r<8||r>48)throw new IllegalArgumentError("illegal counter size");let e=Math.pow(2,r)-1;this.asm.set_mask(0,0,e/4294967296|0,e|0)}else{r=48;this.asm.set_mask(0,0,65535,4294967295)}if(e!==undefined){let t=e.length;if(!t||t>16)throw new IllegalArgumentError("illegal nonce size");let r=new DataView(new ArrayBuffer(16));new Uint8Array(r.buffer).set(e);this.asm.set_nonce(r.getUint32(0),r.getUint32(4),r.getUint32(8),r.getUint32(12))}else{throw new Error("nonce is required")}if(t!==undefined){if(t<0||t>=Math.pow(2,r))throw new IllegalArgumentError("illegal counter value");this.asm.set_counter(0,0,t/4294967296|0,t|0)}}}const _AES_GCM_data_maxLength=68719476704;class AES_GCM extends AES{constructor(e,t,r,n=16){super(e,undefined,false,"CTR");this.tagSize=n;this.gamma0=0;this.counter=1;this.asm.gcm_init();if(this.tagSize<4||this.tagSize>16)throw new IllegalArgumentError("illegal tagSize value");const i=t.length||0;const s=new Uint8Array(16);if(i!==12){this._gcm_mac_process(t);this.heap[0]=0;this.heap[1]=0;this.heap[2]=0;this.heap[3]=0;this.heap[4]=0;this.heap[5]=0;this.heap[6]=0;this.heap[7]=0;this.heap[8]=0;this.heap[9]=0;this.heap[10]=0;this.heap[11]=i>>>29;this.heap[12]=i>>>21&255;this.heap[13]=i>>>13&255;this.heap[14]=i>>>5&255;this.heap[15]=i<<3&255;this.asm.mac(AES_asm.MAC.GCM,AES_asm.HEAP_DATA,16);this.asm.get_iv(AES_asm.HEAP_DATA);this.asm.set_iv(0,0,0,0);s.set(this.heap.subarray(0,16))}else{s.set(t);s[15]=1}const a=new DataView(s.buffer);this.gamma0=a.getUint32(12);this.asm.set_nonce(a.getUint32(0),a.getUint32(4),a.getUint32(8),0);this.asm.set_mask(0,0,0,4294967295);if(r!==undefined){if(r.length>_AES_GCM_data_maxLength)throw new IllegalArgumentError("illegal adata length");if(r.length){this.adata=r;this._gcm_mac_process(r)}else{this.adata=undefined}}else{this.adata=undefined}if(this.counter<1||this.counter>4294967295)throw new RangeError("counter must be a positive 32-bit integer");this.asm.set_counter(0,0,0,this.gamma0+this.counter|0)}static encrypt(e,t,r,n,i){return new AES_GCM(t,r,n,i).encrypt(e)}static decrypt(e,t,r,n,i){return new AES_GCM(t,r,n,i).decrypt(e)}encrypt(e){return this.AES_GCM_encrypt(e)}decrypt(e){return this.AES_GCM_decrypt(e)}AES_GCM_Encrypt_process(e){let t=0;let r=e.length||0;let n=this.asm;let i=this.heap;let s=this.counter;let a=this.pos;let o=this.len;let f=0;let c=o+r&-16;let u=0;if((s-1<<4)+o+r>_AES_GCM_data_maxLength)throw new RangeError("counter overflow");const l=new Uint8Array(c);while(r>0){u=_heap_write(i,a+o,e,t,r);o+=u;t+=u;r-=u;u=n.cipher(AES_asm.ENC.CTR,AES_asm.HEAP_DATA+a,o);u=n.mac(AES_asm.MAC.GCM,AES_asm.HEAP_DATA+a,u);if(u)l.set(i.subarray(a,a+u),f);s+=u>>>4;f+=u;if(u<o){a+=u;o-=u}else{a=0;o=0}}this.counter=s;this.pos=a;this.len=o;return l}AES_GCM_Encrypt_finish(){let e=this.asm;let t=this.heap;let r=this.counter;let n=this.tagSize;let i=this.adata;let s=this.pos;let a=this.len;const o=new Uint8Array(a+n);e.cipher(AES_asm.ENC.CTR,AES_asm.HEAP_DATA+s,a+15&-16);if(a)o.set(t.subarray(s,s+a));let f=a;for(;f&15;f++)t[s+f]=0;e.mac(AES_asm.MAC.GCM,AES_asm.HEAP_DATA+s,f);const c=i!==undefined?i.length:0;const u=(r-1<<4)+a;t[0]=0;t[1]=0;t[2]=0;t[3]=c>>>29;t[4]=c>>>21;t[5]=c>>>13&255;t[6]=c>>>5&255;t[7]=c<<3&255;t[8]=t[9]=t[10]=0;t[11]=u>>>29;t[12]=u>>>21&255;t[13]=u>>>13&255;t[14]=u>>>5&255;t[15]=u<<3&255;e.mac(AES_asm.MAC.GCM,AES_asm.HEAP_DATA,16);e.get_iv(AES_asm.HEAP_DATA);e.set_counter(0,0,0,this.gamma0);e.cipher(AES_asm.ENC.CTR,AES_asm.HEAP_DATA,16);o.set(t.subarray(0,n),a);this.counter=1;this.pos=0;this.len=0;return o}AES_GCM_Decrypt_process(e){let t=0;let r=e.length||0;let n=this.asm;let i=this.heap;let s=this.counter;let a=this.tagSize;let o=this.pos;let f=this.len;let c=0;let u=f+r>a?f+r-a&-16:0;let l=f+r-u;let h=0;if((s-1<<4)+f+r>_AES_GCM_data_maxLength)throw new RangeError("counter overflow");const d=new Uint8Array(u);while(r>l){h=_heap_write(i,o+f,e,t,r-l);f+=h;t+=h;r-=h;h=n.mac(AES_asm.MAC.GCM,AES_asm.HEAP_DATA+o,h);h=n.cipher(AES_asm.DEC.CTR,AES_asm.HEAP_DATA+o,h);if(h)d.set(i.subarray(o,o+h),c);s+=h>>>4;c+=h;o=0;f=0}if(r>0){f+=_heap_write(i,0,e,t,r)}this.counter=s;this.pos=o;this.len=f;return d}AES_GCM_Decrypt_finish(){let e=this.asm;let t=this.heap;let r=this.tagSize;let n=this.adata;let i=this.counter;let s=this.pos;let a=this.len;let o=a-r;if(a<r)throw new IllegalStateError("authentication tag not found");const f=new Uint8Array(o);const c=new Uint8Array(t.subarray(s+o,s+a));let u=o;for(;u&15;u++)t[s+u]=0;e.mac(AES_asm.MAC.GCM,AES_asm.HEAP_DATA+s,u);e.cipher(AES_asm.DEC.CTR,AES_asm.HEAP_DATA+s,u);if(o)f.set(t.subarray(s,s+o));const l=n!==undefined?n.length:0;const h=(i-1<<4)+a-r;t[0]=0;t[1]=0;t[2]=0;t[3]=l>>>29;t[4]=l>>>21;t[5]=l>>>13&255;t[6]=l>>>5&255;t[7]=l<<3&255;t[8]=t[9]=t[10]=0;t[11]=h>>>29;t[12]=h>>>21&255;t[13]=h>>>13&255;t[14]=h>>>5&255;t[15]=h<<3&255;e.mac(AES_asm.MAC.GCM,AES_asm.HEAP_DATA,16);e.get_iv(AES_asm.HEAP_DATA);e.set_counter(0,0,0,this.gamma0);e.cipher(AES_asm.ENC.CTR,AES_asm.HEAP_DATA,16);let d=0;for(let e=0;e<r;++e)d|=c[e]^t[e];if(d)throw new SecurityError("data integrity check failed");this.counter=1;this.pos=0;this.len=0;return f}AES_GCM_decrypt(e){const t=this.AES_GCM_Decrypt_process(e);const r=this.AES_GCM_Decrypt_finish();const n=new Uint8Array(t.length+r.length);if(t.length)n.set(t);if(r.length)n.set(r,t.length);return n}AES_GCM_encrypt(e){const t=this.AES_GCM_Encrypt_process(e);const r=this.AES_GCM_Encrypt_finish();const n=new Uint8Array(t.length+r.length);if(t.length)n.set(t);if(r.length)n.set(r,t.length);return n}_gcm_mac_process(e){const t=this.heap;const r=this.asm;let n=0;let i=e.length||0;let s=0;while(i>0){s=_heap_write(t,0,e,n,i);n+=s;i-=s;while(s&15)t[s++]=0;r.mac(AES_asm.MAC.GCM,AES_asm.HEAP_DATA,s)}}}class AES_OFB extends AES{static encrypt(e,t,r){return new AES_OFB(t,r).encrypt(e)}static decrypt(e,t,r){return new AES_OFB(t,r).decrypt(e)}constructor(e,t){super(e,t,false,"OFB")}encrypt(e){const t=this.AES_Encrypt_process(e);const r=this.AES_Encrypt_finish();return joinBytes(t,r)}decrypt(e){const t=this.AES_Decrypt_process(e);const r=this.AES_Decrypt_finish();return joinBytes(t,r)}}var bigint_asm=function(e,t,r){"use asm";var n=0;var i=new e.Uint32Array(r);var s=e.Math.imul;function a(e){e=e|0;n=e=e+31&-32;return e|0}function o(e){e=e|0;var t=0;t=n;n=t+(e+31&-32)|0;return t|0}function f(e){e=e|0;n=n-(e+31&-32)|0}function c(e,t,r){e=e|0;t=t|0;r=r|0;var n=0;if((t|0)>(r|0)){for(;(n|0)<(e|0);n=n+4|0){i[r+n>>2]=i[t+n>>2]}}else{for(n=e-4|0;(n|0)>=0;n=n-4|0){i[r+n>>2]=i[t+n>>2]}}}function u(e,t,r){e=e|0;t=t|0;r=r|0;var n=0;for(;(n|0)<(e|0);n=n+4|0){i[r+n>>2]=t}}function l(e,t,r,n){e=e|0;t=t|0;r=r|0;n=n|0;var s=0,a=0,o=0,f=0,c=0;if((n|0)<=0)n=t;if((n|0)<(t|0))t=n;a=1;for(;(c|0)<(t|0);c=c+4|0){s=~i[e+c>>2];o=(s&0xffff)+a|0;f=(s>>>16)+(o>>>16)|0;i[r+c>>2]=f<<16|o&0xffff;a=f>>>16}for(;(c|0)<(n|0);c=c+4|0){i[r+c>>2]=a-1|0}return a|0}function h(e,t,r,n){e=e|0;t=t|0;r=r|0;n=n|0;var s=0,a=0,o=0;if((t|0)>(n|0)){for(o=t-4|0;(o|0)>=(n|0);o=o-4|0){if(i[e+o>>2]|0)return 1}}else{for(o=n-4|0;(o|0)>=(t|0);o=o-4|0){if(i[r+o>>2]|0)return-1}}for(;(o|0)>=0;o=o-4|0){s=i[e+o>>2]|0,a=i[r+o>>2]|0;if(s>>>0<a>>>0)return-1;if(s>>>0>a>>>0)return 1}return 0}function d(e,t){e=e|0;t=t|0;var r=0;for(r=t-4|0;(r|0)>=0;r=r-4|0){if(i[e+r>>2]|0)return r+4|0}return 0}function p(e,t,r,n,s,a){e=e|0;t=t|0;r=r|0;n=n|0;s=s|0;a=a|0;var o=0,f=0,c=0,u=0,l=0,h=0;if((t|0)<(n|0)){u=e,e=r,r=u;u=t,t=n,n=u}if((a|0)<=0)a=t+4|0;if((a|0)<(n|0))t=n=a;for(;(h|0)<(n|0);h=h+4|0){o=i[e+h>>2]|0;f=i[r+h>>2]|0;u=((o&0xffff)+(f&0xffff)|0)+c|0;l=((o>>>16)+(f>>>16)|0)+(u>>>16)|0;i[s+h>>2]=u&0xffff|l<<16;c=l>>>16}for(;(h|0)<(t|0);h=h+4|0){o=i[e+h>>2]|0;u=(o&0xffff)+c|0;l=(o>>>16)+(u>>>16)|0;i[s+h>>2]=u&0xffff|l<<16;c=l>>>16}for(;(h|0)<(a|0);h=h+4|0){i[s+h>>2]=c|0;c=0}return c|0}function y(e,t,r,n,s,a){e=e|0;t=t|0;r=r|0;n=n|0;s=s|0;a=a|0;var o=0,f=0,c=0,u=0,l=0,h=0;if((a|0)<=0)a=(t|0)>(n|0)?t+4|0:n+4|0;if((a|0)<(t|0))t=a;if((a|0)<(n|0))n=a;if((t|0)<(n|0)){for(;(h|0)<(t|0);h=h+4|0){o=i[e+h>>2]|0;f=i[r+h>>2]|0;u=((o&0xffff)-(f&0xffff)|0)+c|0;l=((o>>>16)-(f>>>16)|0)+(u>>16)|0;i[s+h>>2]=u&0xffff|l<<16;c=l>>16}for(;(h|0)<(n|0);h=h+4|0){f=i[r+h>>2]|0;u=c-(f&0xffff)|0;l=(u>>16)-(f>>>16)|0;i[s+h>>2]=u&0xffff|l<<16;c=l>>16}}else{for(;(h|0)<(n|0);h=h+4|0){o=i[e+h>>2]|0;f=i[r+h>>2]|0;u=((o&0xffff)-(f&0xffff)|0)+c|0;l=((o>>>16)-(f>>>16)|0)+(u>>16)|0;i[s+h>>2]=u&0xffff|l<<16;c=l>>16}for(;(h|0)<(t|0);h=h+4|0){o=i[e+h>>2]|0;u=(o&0xffff)+c|0;l=(o>>>16)+(u>>16)|0;i[s+h>>2]=u&0xffff|l<<16;c=l>>16}}for(;(h|0)<(a|0);h=h+4|0){i[s+h>>2]=c|0}return c|0}function m(e,t,r,n,a,o){e=e|0;t=t|0;r=r|0;n=n|0;a=a|0;o=o|0;var f=0,c=0,u=0,l=0,h=0,d=0,p=0,y=0,m=0,g=0,b=0,A=0,w=0,E=0,v=0,_=0,S=0,$=0,T=0,I=0,C=0,P=0,R=0,N=0,k=0,O=0,x=0,B=0,D=0,M=0,U=0,L=0,F=0,H=0,V=0,G=0,j=0,K=0,Y=0,q=0,z=0,X=0,Q=0,W=0,J=0,Z=0,ee=0,te=0,re=0,ne=0,ie=0,se=0,ae=0,oe=0,fe=0,ce=0,ue=0;if((t|0)>(n|0)){re=e,ne=t;e=r,t=n;r=re,n=ne}se=t+n|0;if((o|0)>(se|0)|(o|0)<=0)o=se;if((o|0)<(t|0))t=o;if((o|0)<(n|0))n=o;for(;(ae|0)<(t|0);ae=ae+32|0){oe=e+ae|0;m=i[(oe|0)>>2]|0,g=i[(oe|4)>>2]|0,b=i[(oe|8)>>2]|0,A=i[(oe|12)>>2]|0,w=i[(oe|16)>>2]|0,E=i[(oe|20)>>2]|0,v=i[(oe|24)>>2]|0,_=i[(oe|28)>>2]|0,f=m&0xffff,c=g&0xffff,u=b&0xffff,l=A&0xffff,h=w&0xffff,d=E&0xffff,p=v&0xffff,y=_&0xffff,m=m>>>16,g=g>>>16,b=b>>>16,A=A>>>16,w=w>>>16,E=E>>>16,v=v>>>16,_=_>>>16;z=X=Q=W=J=Z=ee=te=0;for(fe=0;(fe|0)<(n|0);fe=fe+32|0){ce=r+fe|0;ue=a+(ae+fe|0)|0;k=i[(ce|0)>>2]|0,O=i[(ce|4)>>2]|0,x=i[(ce|8)>>2]|0,B=i[(ce|12)>>2]|0,D=i[(ce|16)>>2]|0,M=i[(ce|20)>>2]|0,U=i[(ce|24)>>2]|0,L=i[(ce|28)>>2]|0,S=k&0xffff,$=O&0xffff,T=x&0xffff,I=B&0xffff,C=D&0xffff,P=M&0xffff,R=U&0xffff,N=L&0xffff,k=k>>>16,O=O>>>16,x=x>>>16,B=B>>>16,D=D>>>16,M=M>>>16,U=U>>>16,L=L>>>16;F=i[(ue|0)>>2]|0,H=i[(ue|4)>>2]|0,V=i[(ue|8)>>2]|0,G=i[(ue|12)>>2]|0,j=i[(ue|16)>>2]|0,K=i[(ue|20)>>2]|0,Y=i[(ue|24)>>2]|0,q=i[(ue|28)>>2]|0;re=((s(f,S)|0)+(z&0xffff)|0)+(F&0xffff)|0;ne=((s(m,S)|0)+(z>>>16)|0)+(F>>>16)|0;ie=((s(f,k)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(m,k)|0)+(ne>>>16)|0)+(ie>>>16)|0;F=ie<<16|re&0xffff;re=((s(f,$)|0)+(se&0xffff)|0)+(H&0xffff)|0;ne=((s(m,$)|0)+(se>>>16)|0)+(H>>>16)|0;ie=((s(f,O)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(m,O)|0)+(ne>>>16)|0)+(ie>>>16)|0;H=ie<<16|re&0xffff;re=((s(f,T)|0)+(se&0xffff)|0)+(V&0xffff)|0;ne=((s(m,T)|0)+(se>>>16)|0)+(V>>>16)|0;ie=((s(f,x)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(m,x)|0)+(ne>>>16)|0)+(ie>>>16)|0;V=ie<<16|re&0xffff;re=((s(f,I)|0)+(se&0xffff)|0)+(G&0xffff)|0;ne=((s(m,I)|0)+(se>>>16)|0)+(G>>>16)|0;ie=((s(f,B)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(m,B)|0)+(ne>>>16)|0)+(ie>>>16)|0;G=ie<<16|re&0xffff;re=((s(f,C)|0)+(se&0xffff)|0)+(j&0xffff)|0;ne=((s(m,C)|0)+(se>>>16)|0)+(j>>>16)|0;ie=((s(f,D)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(m,D)|0)+(ne>>>16)|0)+(ie>>>16)|0;j=ie<<16|re&0xffff;re=((s(f,P)|0)+(se&0xffff)|0)+(K&0xffff)|0;ne=((s(m,P)|0)+(se>>>16)|0)+(K>>>16)|0;ie=((s(f,M)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(m,M)|0)+(ne>>>16)|0)+(ie>>>16)|0;K=ie<<16|re&0xffff;re=((s(f,R)|0)+(se&0xffff)|0)+(Y&0xffff)|0;ne=((s(m,R)|0)+(se>>>16)|0)+(Y>>>16)|0;ie=((s(f,U)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(m,U)|0)+(ne>>>16)|0)+(ie>>>16)|0;Y=ie<<16|re&0xffff;re=((s(f,N)|0)+(se&0xffff)|0)+(q&0xffff)|0;ne=((s(m,N)|0)+(se>>>16)|0)+(q>>>16)|0;ie=((s(f,L)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(m,L)|0)+(ne>>>16)|0)+(ie>>>16)|0;q=ie<<16|re&0xffff;z=se;re=((s(c,S)|0)+(X&0xffff)|0)+(H&0xffff)|0;ne=((s(g,S)|0)+(X>>>16)|0)+(H>>>16)|0;ie=((s(c,k)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(g,k)|0)+(ne>>>16)|0)+(ie>>>16)|0;H=ie<<16|re&0xffff;re=((s(c,$)|0)+(se&0xffff)|0)+(V&0xffff)|0;ne=((s(g,$)|0)+(se>>>16)|0)+(V>>>16)|0;ie=((s(c,O)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(g,O)|0)+(ne>>>16)|0)+(ie>>>16)|0;V=ie<<16|re&0xffff;re=((s(c,T)|0)+(se&0xffff)|0)+(G&0xffff)|0;ne=((s(g,T)|0)+(se>>>16)|0)+(G>>>16)|0;ie=((s(c,x)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(g,x)|0)+(ne>>>16)|0)+(ie>>>16)|0;G=ie<<16|re&0xffff;re=((s(c,I)|0)+(se&0xffff)|0)+(j&0xffff)|0;ne=((s(g,I)|0)+(se>>>16)|0)+(j>>>16)|0;ie=((s(c,B)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(g,B)|0)+(ne>>>16)|0)+(ie>>>16)|0;j=ie<<16|re&0xffff;re=((s(c,C)|0)+(se&0xffff)|0)+(K&0xffff)|0;ne=((s(g,C)|0)+(se>>>16)|0)+(K>>>16)|0;ie=((s(c,D)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(g,D)|0)+(ne>>>16)|0)+(ie>>>16)|0;K=ie<<16|re&0xffff;re=((s(c,P)|0)+(se&0xffff)|0)+(Y&0xffff)|0;ne=((s(g,P)|0)+(se>>>16)|0)+(Y>>>16)|0;ie=((s(c,M)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(g,M)|0)+(ne>>>16)|0)+(ie>>>16)|0;Y=ie<<16|re&0xffff;re=((s(c,R)|0)+(se&0xffff)|0)+(q&0xffff)|0;ne=((s(g,R)|0)+(se>>>16)|0)+(q>>>16)|0;ie=((s(c,U)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(g,U)|0)+(ne>>>16)|0)+(ie>>>16)|0;q=ie<<16|re&0xffff;re=((s(c,N)|0)+(se&0xffff)|0)+(z&0xffff)|0;ne=((s(g,N)|0)+(se>>>16)|0)+(z>>>16)|0;ie=((s(c,L)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(g,L)|0)+(ne>>>16)|0)+(ie>>>16)|0;z=ie<<16|re&0xffff;X=se;re=((s(u,S)|0)+(Q&0xffff)|0)+(V&0xffff)|0;ne=((s(b,S)|0)+(Q>>>16)|0)+(V>>>16)|0;ie=((s(u,k)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(b,k)|0)+(ne>>>16)|0)+(ie>>>16)|0;V=ie<<16|re&0xffff;re=((s(u,$)|0)+(se&0xffff)|0)+(G&0xffff)|0;ne=((s(b,$)|0)+(se>>>16)|0)+(G>>>16)|0;ie=((s(u,O)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(b,O)|0)+(ne>>>16)|0)+(ie>>>16)|0;G=ie<<16|re&0xffff;re=((s(u,T)|0)+(se&0xffff)|0)+(j&0xffff)|0;ne=((s(b,T)|0)+(se>>>16)|0)+(j>>>16)|0;ie=((s(u,x)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(b,x)|0)+(ne>>>16)|0)+(ie>>>16)|0;j=ie<<16|re&0xffff;re=((s(u,I)|0)+(se&0xffff)|0)+(K&0xffff)|0;ne=((s(b,I)|0)+(se>>>16)|0)+(K>>>16)|0;ie=((s(u,B)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(b,B)|0)+(ne>>>16)|0)+(ie>>>16)|0;K=ie<<16|re&0xffff;re=((s(u,C)|0)+(se&0xffff)|0)+(Y&0xffff)|0;ne=((s(b,C)|0)+(se>>>16)|0)+(Y>>>16)|0;ie=((s(u,D)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(b,D)|0)+(ne>>>16)|0)+(ie>>>16)|0;Y=ie<<16|re&0xffff;re=((s(u,P)|0)+(se&0xffff)|0)+(q&0xffff)|0;ne=((s(b,P)|0)+(se>>>16)|0)+(q>>>16)|0;ie=((s(u,M)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(b,M)|0)+(ne>>>16)|0)+(ie>>>16)|0;q=ie<<16|re&0xffff;re=((s(u,R)|0)+(se&0xffff)|0)+(z&0xffff)|0;ne=((s(b,R)|0)+(se>>>16)|0)+(z>>>16)|0;ie=((s(u,U)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(b,U)|0)+(ne>>>16)|0)+(ie>>>16)|0;z=ie<<16|re&0xffff;re=((s(u,N)|0)+(se&0xffff)|0)+(X&0xffff)|0;ne=((s(b,N)|0)+(se>>>16)|0)+(X>>>16)|0;ie=((s(u,L)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(b,L)|0)+(ne>>>16)|0)+(ie>>>16)|0;X=ie<<16|re&0xffff;Q=se;re=((s(l,S)|0)+(W&0xffff)|0)+(G&0xffff)|0;ne=((s(A,S)|0)+(W>>>16)|0)+(G>>>16)|0;ie=((s(l,k)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(A,k)|0)+(ne>>>16)|0)+(ie>>>16)|0;G=ie<<16|re&0xffff;re=((s(l,$)|0)+(se&0xffff)|0)+(j&0xffff)|0;ne=((s(A,$)|0)+(se>>>16)|0)+(j>>>16)|0;ie=((s(l,O)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(A,O)|0)+(ne>>>16)|0)+(ie>>>16)|0;j=ie<<16|re&0xffff;re=((s(l,T)|0)+(se&0xffff)|0)+(K&0xffff)|0;ne=((s(A,T)|0)+(se>>>16)|0)+(K>>>16)|0;ie=((s(l,x)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(A,x)|0)+(ne>>>16)|0)+(ie>>>16)|0;K=ie<<16|re&0xffff;re=((s(l,I)|0)+(se&0xffff)|0)+(Y&0xffff)|0;ne=((s(A,I)|0)+(se>>>16)|0)+(Y>>>16)|0;ie=((s(l,B)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(A,B)|0)+(ne>>>16)|0)+(ie>>>16)|0;Y=ie<<16|re&0xffff;re=((s(l,C)|0)+(se&0xffff)|0)+(q&0xffff)|0;ne=((s(A,C)|0)+(se>>>16)|0)+(q>>>16)|0;ie=((s(l,D)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(A,D)|0)+(ne>>>16)|0)+(ie>>>16)|0;q=ie<<16|re&0xffff;re=((s(l,P)|0)+(se&0xffff)|0)+(z&0xffff)|0;ne=((s(A,P)|0)+(se>>>16)|0)+(z>>>16)|0;ie=((s(l,M)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(A,M)|0)+(ne>>>16)|0)+(ie>>>16)|0;z=ie<<16|re&0xffff;re=((s(l,R)|0)+(se&0xffff)|0)+(X&0xffff)|0;ne=((s(A,R)|0)+(se>>>16)|0)+(X>>>16)|0;ie=((s(l,U)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(A,U)|0)+(ne>>>16)|0)+(ie>>>16)|0;X=ie<<16|re&0xffff;re=((s(l,N)|0)+(se&0xffff)|0)+(Q&0xffff)|0;ne=((s(A,N)|0)+(se>>>16)|0)+(Q>>>16)|0;ie=((s(l,L)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(A,L)|0)+(ne>>>16)|0)+(ie>>>16)|0;Q=ie<<16|re&0xffff;W=se;re=((s(h,S)|0)+(J&0xffff)|0)+(j&0xffff)|0;ne=((s(w,S)|0)+(J>>>16)|0)+(j>>>16)|0;ie=((s(h,k)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(w,k)|0)+(ne>>>16)|0)+(ie>>>16)|0;j=ie<<16|re&0xffff;re=((s(h,$)|0)+(se&0xffff)|0)+(K&0xffff)|0;ne=((s(w,$)|0)+(se>>>16)|0)+(K>>>16)|0;ie=((s(h,O)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(w,O)|0)+(ne>>>16)|0)+(ie>>>16)|0;K=ie<<16|re&0xffff;re=((s(h,T)|0)+(se&0xffff)|0)+(Y&0xffff)|0;ne=((s(w,T)|0)+(se>>>16)|0)+(Y>>>16)|0;ie=((s(h,x)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(w,x)|0)+(ne>>>16)|0)+(ie>>>16)|0;Y=ie<<16|re&0xffff;re=((s(h,I)|0)+(se&0xffff)|0)+(q&0xffff)|0;ne=((s(w,I)|0)+(se>>>16)|0)+(q>>>16)|0;ie=((s(h,B)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(w,B)|0)+(ne>>>16)|0)+(ie>>>16)|0;q=ie<<16|re&0xffff;re=((s(h,C)|0)+(se&0xffff)|0)+(z&0xffff)|0;ne=((s(w,C)|0)+(se>>>16)|0)+(z>>>16)|0;ie=((s(h,D)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(w,D)|0)+(ne>>>16)|0)+(ie>>>16)|0;z=ie<<16|re&0xffff;re=((s(h,P)|0)+(se&0xffff)|0)+(X&0xffff)|0;ne=((s(w,P)|0)+(se>>>16)|0)+(X>>>16)|0;ie=((s(h,M)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(w,M)|0)+(ne>>>16)|0)+(ie>>>16)|0;X=ie<<16|re&0xffff;re=((s(h,R)|0)+(se&0xffff)|0)+(Q&0xffff)|0;ne=((s(w,R)|0)+(se>>>16)|0)+(Q>>>16)|0;ie=((s(h,U)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(w,U)|0)+(ne>>>16)|0)+(ie>>>16)|0;Q=ie<<16|re&0xffff;re=((s(h,N)|0)+(se&0xffff)|0)+(W&0xffff)|0;ne=((s(w,N)|0)+(se>>>16)|0)+(W>>>16)|0;ie=((s(h,L)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(w,L)|0)+(ne>>>16)|0)+(ie>>>16)|0;W=ie<<16|re&0xffff;J=se;re=((s(d,S)|0)+(Z&0xffff)|0)+(K&0xffff)|0;ne=((s(E,S)|0)+(Z>>>16)|0)+(K>>>16)|0;ie=((s(d,k)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(E,k)|0)+(ne>>>16)|0)+(ie>>>16)|0;K=ie<<16|re&0xffff;re=((s(d,$)|0)+(se&0xffff)|0)+(Y&0xffff)|0;ne=((s(E,$)|0)+(se>>>16)|0)+(Y>>>16)|0;ie=((s(d,O)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(E,O)|0)+(ne>>>16)|0)+(ie>>>16)|0;Y=ie<<16|re&0xffff;re=((s(d,T)|0)+(se&0xffff)|0)+(q&0xffff)|0;ne=((s(E,T)|0)+(se>>>16)|0)+(q>>>16)|0;ie=((s(d,x)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(E,x)|0)+(ne>>>16)|0)+(ie>>>16)|0;q=ie<<16|re&0xffff;re=((s(d,I)|0)+(se&0xffff)|0)+(z&0xffff)|0;ne=((s(E,I)|0)+(se>>>16)|0)+(z>>>16)|0;ie=((s(d,B)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(E,B)|0)+(ne>>>16)|0)+(ie>>>16)|0;z=ie<<16|re&0xffff;re=((s(d,C)|0)+(se&0xffff)|0)+(X&0xffff)|0;ne=((s(E,C)|0)+(se>>>16)|0)+(X>>>16)|0;ie=((s(d,D)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(E,D)|0)+(ne>>>16)|0)+(ie>>>16)|0;X=ie<<16|re&0xffff;re=((s(d,P)|0)+(se&0xffff)|0)+(Q&0xffff)|0;ne=((s(E,P)|0)+(se>>>16)|0)+(Q>>>16)|0;ie=((s(d,M)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(E,M)|0)+(ne>>>16)|0)+(ie>>>16)|0;Q=ie<<16|re&0xffff;re=((s(d,R)|0)+(se&0xffff)|0)+(W&0xffff)|0;ne=((s(E,R)|0)+(se>>>16)|0)+(W>>>16)|0;ie=((s(d,U)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(E,U)|0)+(ne>>>16)|0)+(ie>>>16)|0;W=ie<<16|re&0xffff;re=((s(d,N)|0)+(se&0xffff)|0)+(J&0xffff)|0;ne=((s(E,N)|0)+(se>>>16)|0)+(J>>>16)|0;ie=((s(d,L)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(E,L)|0)+(ne>>>16)|0)+(ie>>>16)|0;J=ie<<16|re&0xffff;Z=se;re=((s(p,S)|0)+(ee&0xffff)|0)+(Y&0xffff)|0;ne=((s(v,S)|0)+(ee>>>16)|0)+(Y>>>16)|0;ie=((s(p,k)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(v,k)|0)+(ne>>>16)|0)+(ie>>>16)|0;Y=ie<<16|re&0xffff;re=((s(p,$)|0)+(se&0xffff)|0)+(q&0xffff)|0;ne=((s(v,$)|0)+(se>>>16)|0)+(q>>>16)|0;ie=((s(p,O)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(v,O)|0)+(ne>>>16)|0)+(ie>>>16)|0;q=ie<<16|re&0xffff;re=((s(p,T)|0)+(se&0xffff)|0)+(z&0xffff)|0;ne=((s(v,T)|0)+(se>>>16)|0)+(z>>>16)|0;ie=((s(p,x)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(v,x)|0)+(ne>>>16)|0)+(ie>>>16)|0;z=ie<<16|re&0xffff;re=((s(p,I)|0)+(se&0xffff)|0)+(X&0xffff)|0;ne=((s(v,I)|0)+(se>>>16)|0)+(X>>>16)|0;ie=((s(p,B)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(v,B)|0)+(ne>>>16)|0)+(ie>>>16)|0;X=ie<<16|re&0xffff;re=((s(p,C)|0)+(se&0xffff)|0)+(Q&0xffff)|0;ne=((s(v,C)|0)+(se>>>16)|0)+(Q>>>16)|0;ie=((s(p,D)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(v,D)|0)+(ne>>>16)|0)+(ie>>>16)|0;Q=ie<<16|re&0xffff;re=((s(p,P)|0)+(se&0xffff)|0)+(W&0xffff)|0;ne=((s(v,P)|0)+(se>>>16)|0)+(W>>>16)|0;ie=((s(p,M)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(v,M)|0)+(ne>>>16)|0)+(ie>>>16)|0;W=ie<<16|re&0xffff;re=((s(p,R)|0)+(se&0xffff)|0)+(J&0xffff)|0;ne=((s(v,R)|0)+(se>>>16)|0)+(J>>>16)|0;ie=((s(p,U)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(v,U)|0)+(ne>>>16)|0)+(ie>>>16)|0;J=ie<<16|re&0xffff;re=((s(p,N)|0)+(se&0xffff)|0)+(Z&0xffff)|0;ne=((s(v,N)|0)+(se>>>16)|0)+(Z>>>16)|0;ie=((s(p,L)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(v,L)|0)+(ne>>>16)|0)+(ie>>>16)|0;Z=ie<<16|re&0xffff;ee=se;re=((s(y,S)|0)+(te&0xffff)|0)+(q&0xffff)|0;ne=((s(_,S)|0)+(te>>>16)|0)+(q>>>16)|0;ie=((s(y,k)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(_,k)|0)+(ne>>>16)|0)+(ie>>>16)|0;q=ie<<16|re&0xffff;re=((s(y,$)|0)+(se&0xffff)|0)+(z&0xffff)|0;ne=((s(_,$)|0)+(se>>>16)|0)+(z>>>16)|0;ie=((s(y,O)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(_,O)|0)+(ne>>>16)|0)+(ie>>>16)|0;z=ie<<16|re&0xffff;re=((s(y,T)|0)+(se&0xffff)|0)+(X&0xffff)|0;ne=((s(_,T)|0)+(se>>>16)|0)+(X>>>16)|0;ie=((s(y,x)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(_,x)|0)+(ne>>>16)|0)+(ie>>>16)|0;X=ie<<16|re&0xffff;re=((s(y,I)|0)+(se&0xffff)|0)+(Q&0xffff)|0;ne=((s(_,I)|0)+(se>>>16)|0)+(Q>>>16)|0;ie=((s(y,B)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(_,B)|0)+(ne>>>16)|0)+(ie>>>16)|0;Q=ie<<16|re&0xffff;re=((s(y,C)|0)+(se&0xffff)|0)+(W&0xffff)|0;ne=((s(_,C)|0)+(se>>>16)|0)+(W>>>16)|0;ie=((s(y,D)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(_,D)|0)+(ne>>>16)|0)+(ie>>>16)|0;W=ie<<16|re&0xffff;re=((s(y,P)|0)+(se&0xffff)|0)+(J&0xffff)|0;ne=((s(_,P)|0)+(se>>>16)|0)+(J>>>16)|0;ie=((s(y,M)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(_,M)|0)+(ne>>>16)|0)+(ie>>>16)|0;J=ie<<16|re&0xffff;re=((s(y,R)|0)+(se&0xffff)|0)+(Z&0xffff)|0;ne=((s(_,R)|0)+(se>>>16)|0)+(Z>>>16)|0;ie=((s(y,U)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(_,U)|0)+(ne>>>16)|0)+(ie>>>16)|0;Z=ie<<16|re&0xffff;re=((s(y,N)|0)+(se&0xffff)|0)+(ee&0xffff)|0;ne=((s(_,N)|0)+(se>>>16)|0)+(ee>>>16)|0;ie=((s(y,L)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(_,L)|0)+(ne>>>16)|0)+(ie>>>16)|0;ee=ie<<16|re&0xffff;te=se;i[(ue|0)>>2]=F,i[(ue|4)>>2]=H,i[(ue|8)>>2]=V,i[(ue|12)>>2]=G,i[(ue|16)>>2]=j,i[(ue|20)>>2]=K,i[(ue|24)>>2]=Y,i[(ue|28)>>2]=q}ue=a+(ae+fe|0)|0;i[(ue|0)>>2]=z,i[(ue|4)>>2]=X,i[(ue|8)>>2]=Q,i[(ue|12)>>2]=W,i[(ue|16)>>2]=J,i[(ue|20)>>2]=Z,i[(ue|24)>>2]=ee,i[(ue|28)>>2]=te}}function g(e,t,r){e=e|0;t=t|0;r=r|0;var n=0,a=0,o=0,f=0,c=0,u=0,l=0,h=0,d=0,p=0,y=0,m=0,g=0,b=0,A=0,w=0,E=0,v=0,_=0,S=0,$=0,T=0,I=0,C=0,P=0,R=0,N=0,k=0,O=0,x=0,B=0,D=0,M=0,U=0,L=0,F=0,H=0,V=0,G=0,j=0,K=0,Y=0,q=0,z=0,X=0,Q=0,W=0,J=0,Z=0,ee=0,te=0,re=0,ne=0,ie=0,se=0,ae=0,oe=0,fe=0,ce=0,ue=0,le=0,he=0,de=0,pe=0;for(;(ce|0)<(t|0);ce=ce+4|0){pe=r+(ce<<1)|0;d=i[e+ce>>2]|0,n=d&0xffff,d=d>>>16;Z=s(n,n)|0;ee=(s(n,d)|0)+(Z>>>17)|0;te=(s(d,d)|0)+(ee>>>15)|0;i[pe>>2]=ee<<17|Z&0x1ffff;i[(pe|4)>>2]=te}for(fe=0;(fe|0)<(t|0);fe=fe+8|0){he=e+fe|0,pe=r+(fe<<1)|0;d=i[he>>2]|0,n=d&0xffff,d=d>>>16;P=i[(he|4)>>2]|0,E=P&0xffff,P=P>>>16;Z=s(n,E)|0;ee=(s(n,P)|0)+(Z>>>16)|0;te=(s(d,E)|0)+(ee&0xffff)|0;ie=((s(d,P)|0)+(ee>>>16)|0)+(te>>>16)|0;se=i[(pe|4)>>2]|0;Z=(se&0xffff)+((Z&0xffff)<<1)|0;te=((se>>>16)+((te&0xffff)<<1)|0)+(Z>>>16)|0;i[(pe|4)>>2]=te<<16|Z&0xffff;re=te>>>16;se=i[(pe|8)>>2]|0;Z=((se&0xffff)+((ie&0xffff)<<1)|0)+re|0;te=((se>>>16)+(ie>>>16<<1)|0)+(Z>>>16)|0;i[(pe|8)>>2]=te<<16|Z&0xffff;re=te>>>16;if(re){se=i[(pe|12)>>2]|0;Z=(se&0xffff)+re|0;te=(se>>>16)+(Z>>>16)|0;i[(pe|12)>>2]=te<<16|Z&0xffff}}for(fe=0;(fe|0)<(t|0);fe=fe+16|0){he=e+fe|0,pe=r+(fe<<1)|0;d=i[he>>2]|0,n=d&0xffff,d=d>>>16,p=i[(he|4)>>2]|0,a=p&0xffff,p=p>>>16;P=i[(he|8)>>2]|0,E=P&0xffff,P=P>>>16,R=i[(he|12)>>2]|0,v=R&0xffff,R=R>>>16;Z=s(n,E)|0;ee=s(d,E)|0;te=((s(n,P)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(d,P)|0)+(ee>>>16)|0)+(te>>>16)|0;M=te<<16|Z&0xffff;Z=(s(n,v)|0)+(ie&0xffff)|0;ee=(s(d,v)|0)+(ie>>>16)|0;te=((s(n,R)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(d,R)|0)+(ee>>>16)|0)+(te>>>16)|0;U=te<<16|Z&0xffff;L=ie;Z=(s(a,E)|0)+(U&0xffff)|0;ee=(s(p,E)|0)+(U>>>16)|0;te=((s(a,P)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(p,P)|0)+(ee>>>16)|0)+(te>>>16)|0;U=te<<16|Z&0xffff;Z=((s(a,v)|0)+(L&0xffff)|0)+(ie&0xffff)|0;ee=((s(p,v)|0)+(L>>>16)|0)+(ie>>>16)|0;te=((s(a,R)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(p,R)|0)+(ee>>>16)|0)+(te>>>16)|0;L=te<<16|Z&0xffff;F=ie;se=i[(pe|8)>>2]|0;Z=(se&0xffff)+((M&0xffff)<<1)|0;te=((se>>>16)+(M>>>16<<1)|0)+(Z>>>16)|0;i[(pe|8)>>2]=te<<16|Z&0xffff;re=te>>>16;se=i[(pe|12)>>2]|0;Z=((se&0xffff)+((U&0xffff)<<1)|0)+re|0;te=((se>>>16)+(U>>>16<<1)|0)+(Z>>>16)|0;i[(pe|12)>>2]=te<<16|Z&0xffff;re=te>>>16;se=i[(pe|16)>>2]|0;Z=((se&0xffff)+((L&0xffff)<<1)|0)+re|0;te=((se>>>16)+(L>>>16<<1)|0)+(Z>>>16)|0;i[(pe|16)>>2]=te<<16|Z&0xffff;re=te>>>16;se=i[(pe|20)>>2]|0;Z=((se&0xffff)+((F&0xffff)<<1)|0)+re|0;te=((se>>>16)+(F>>>16<<1)|0)+(Z>>>16)|0;i[(pe|20)>>2]=te<<16|Z&0xffff;re=te>>>16;for(le=24;!!re&(le|0)<32;le=le+4|0){se=i[(pe|le)>>2]|0;Z=(se&0xffff)+re|0;te=(se>>>16)+(Z>>>16)|0;i[(pe|le)>>2]=te<<16|Z&0xffff;re=te>>>16}}for(fe=0;(fe|0)<(t|0);fe=fe+32|0){he=e+fe|0,pe=r+(fe<<1)|0;d=i[he>>2]|0,n=d&0xffff,d=d>>>16,p=i[(he|4)>>2]|0,a=p&0xffff,p=p>>>16,y=i[(he|8)>>2]|0,o=y&0xffff,y=y>>>16,m=i[(he|12)>>2]|0,f=m&0xffff,m=m>>>16;P=i[(he|16)>>2]|0,E=P&0xffff,P=P>>>16,R=i[(he|20)>>2]|0,v=R&0xffff,R=R>>>16,N=i[(he|24)>>2]|0,_=N&0xffff,N=N>>>16,k=i[(he|28)>>2]|0,S=k&0xffff,k=k>>>16;Z=s(n,E)|0;ee=s(d,E)|0;te=((s(n,P)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(d,P)|0)+(ee>>>16)|0)+(te>>>16)|0;M=te<<16|Z&0xffff;Z=(s(n,v)|0)+(ie&0xffff)|0;ee=(s(d,v)|0)+(ie>>>16)|0;te=((s(n,R)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(d,R)|0)+(ee>>>16)|0)+(te>>>16)|0;U=te<<16|Z&0xffff;Z=(s(n,_)|0)+(ie&0xffff)|0;ee=(s(d,_)|0)+(ie>>>16)|0;te=((s(n,N)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(d,N)|0)+(ee>>>16)|0)+(te>>>16)|0;L=te<<16|Z&0xffff;Z=(s(n,S)|0)+(ie&0xffff)|0;ee=(s(d,S)|0)+(ie>>>16)|0;te=((s(n,k)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(d,k)|0)+(ee>>>16)|0)+(te>>>16)|0;F=te<<16|Z&0xffff;H=ie;Z=(s(a,E)|0)+(U&0xffff)|0;ee=(s(p,E)|0)+(U>>>16)|0;te=((s(a,P)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(p,P)|0)+(ee>>>16)|0)+(te>>>16)|0;U=te<<16|Z&0xffff;Z=((s(a,v)|0)+(L&0xffff)|0)+(ie&0xffff)|0;ee=((s(p,v)|0)+(L>>>16)|0)+(ie>>>16)|0;te=((s(a,R)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(p,R)|0)+(ee>>>16)|0)+(te>>>16)|0;L=te<<16|Z&0xffff;Z=((s(a,_)|0)+(F&0xffff)|0)+(ie&0xffff)|0;ee=((s(p,_)|0)+(F>>>16)|0)+(ie>>>16)|0;te=((s(a,N)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(p,N)|0)+(ee>>>16)|0)+(te>>>16)|0;F=te<<16|Z&0xffff;Z=((s(a,S)|0)+(H&0xffff)|0)+(ie&0xffff)|0;ee=((s(p,S)|0)+(H>>>16)|0)+(ie>>>16)|0;te=((s(a,k)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(p,k)|0)+(ee>>>16)|0)+(te>>>16)|0;H=te<<16|Z&0xffff;V=ie;Z=(s(o,E)|0)+(L&0xffff)|0;ee=(s(y,E)|0)+(L>>>16)|0;te=((s(o,P)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(y,P)|0)+(ee>>>16)|0)+(te>>>16)|0;L=te<<16|Z&0xffff;Z=((s(o,v)|0)+(F&0xffff)|0)+(ie&0xffff)|0;ee=((s(y,v)|0)+(F>>>16)|0)+(ie>>>16)|0;te=((s(o,R)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(y,R)|0)+(ee>>>16)|0)+(te>>>16)|0;F=te<<16|Z&0xffff;Z=((s(o,_)|0)+(H&0xffff)|0)+(ie&0xffff)|0;ee=((s(y,_)|0)+(H>>>16)|0)+(ie>>>16)|0;te=((s(o,N)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(y,N)|0)+(ee>>>16)|0)+(te>>>16)|0;H=te<<16|Z&0xffff;Z=((s(o,S)|0)+(V&0xffff)|0)+(ie&0xffff)|0;ee=((s(y,S)|0)+(V>>>16)|0)+(ie>>>16)|0;te=((s(o,k)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(y,k)|0)+(ee>>>16)|0)+(te>>>16)|0;V=te<<16|Z&0xffff;G=ie;Z=(s(f,E)|0)+(F&0xffff)|0;ee=(s(m,E)|0)+(F>>>16)|0;te=((s(f,P)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(m,P)|0)+(ee>>>16)|0)+(te>>>16)|0;F=te<<16|Z&0xffff;Z=((s(f,v)|0)+(H&0xffff)|0)+(ie&0xffff)|0;ee=((s(m,v)|0)+(H>>>16)|0)+(ie>>>16)|0;te=((s(f,R)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(m,R)|0)+(ee>>>16)|0)+(te>>>16)|0;H=te<<16|Z&0xffff;Z=((s(f,_)|0)+(V&0xffff)|0)+(ie&0xffff)|0;ee=((s(m,_)|0)+(V>>>16)|0)+(ie>>>16)|0;te=((s(f,N)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(m,N)|0)+(ee>>>16)|0)+(te>>>16)|0;V=te<<16|Z&0xffff;Z=((s(f,S)|0)+(G&0xffff)|0)+(ie&0xffff)|0;ee=((s(m,S)|0)+(G>>>16)|0)+(ie>>>16)|0;te=((s(f,k)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(m,k)|0)+(ee>>>16)|0)+(te>>>16)|0;G=te<<16|Z&0xffff;j=ie;se=i[(pe|16)>>2]|0;Z=(se&0xffff)+((M&0xffff)<<1)|0;te=((se>>>16)+(M>>>16<<1)|0)+(Z>>>16)|0;i[(pe|16)>>2]=te<<16|Z&0xffff;re=te>>>16;se=i[(pe|20)>>2]|0;Z=((se&0xffff)+((U&0xffff)<<1)|0)+re|0;te=((se>>>16)+(U>>>16<<1)|0)+(Z>>>16)|0;i[(pe|20)>>2]=te<<16|Z&0xffff;re=te>>>16;se=i[(pe|24)>>2]|0;Z=((se&0xffff)+((L&0xffff)<<1)|0)+re|0;te=((se>>>16)+(L>>>16<<1)|0)+(Z>>>16)|0;i[(pe|24)>>2]=te<<16|Z&0xffff;re=te>>>16;se=i[(pe|28)>>2]|0;Z=((se&0xffff)+((F&0xffff)<<1)|0)+re|0;te=((se>>>16)+(F>>>16<<1)|0)+(Z>>>16)|0;i[(pe|28)>>2]=te<<16|Z&0xffff;re=te>>>16;se=i[pe+32>>2]|0;Z=((se&0xffff)+((H&0xffff)<<1)|0)+re|0;te=((se>>>16)+(H>>>16<<1)|0)+(Z>>>16)|0;i[pe+32>>2]=te<<16|Z&0xffff;re=te>>>16;se=i[pe+36>>2]|0;Z=((se&0xffff)+((V&0xffff)<<1)|0)+re|0;te=((se>>>16)+(V>>>16<<1)|0)+(Z>>>16)|0;i[pe+36>>2]=te<<16|Z&0xffff;re=te>>>16;se=i[pe+40>>2]|0;Z=((se&0xffff)+((G&0xffff)<<1)|0)+re|0;te=((se>>>16)+(G>>>16<<1)|0)+(Z>>>16)|0;i[pe+40>>2]=te<<16|Z&0xffff;re=te>>>16;se=i[pe+44>>2]|0;Z=((se&0xffff)+((j&0xffff)<<1)|0)+re|0;te=((se>>>16)+(j>>>16<<1)|0)+(Z>>>16)|0;i[pe+44>>2]=te<<16|Z&0xffff;re=te>>>16;for(le=48;!!re&(le|0)<64;le=le+4|0){se=i[pe+le>>2]|0;Z=(se&0xffff)+re|0;te=(se>>>16)+(Z>>>16)|0;i[pe+le>>2]=te<<16|Z&0xffff;re=te>>>16}}for(ae=32;(ae|0)<(t|0);ae=ae<<1){oe=ae<<1;for(fe=0;(fe|0)<(t|0);fe=fe+oe|0){pe=r+(fe<<1)|0;ne=0;for(ce=0;(ce|0)<(ae|0);ce=ce+32|0){he=(e+fe|0)+ce|0;d=i[he>>2]|0,n=d&0xffff,d=d>>>16,p=i[(he|4)>>2]|0,a=p&0xffff,p=p>>>16,y=i[(he|8)>>2]|0,o=y&0xffff,y=y>>>16,m=i[(he|12)>>2]|0,f=m&0xffff,m=m>>>16,g=i[(he|16)>>2]|0,c=g&0xffff,g=g>>>16,b=i[(he|20)>>2]|0,u=b&0xffff,b=b>>>16,A=i[(he|24)>>2]|0,l=A&0xffff,A=A>>>16,w=i[(he|28)>>2]|0,h=w&0xffff,w=w>>>16;K=Y=q=z=X=Q=W=J=re=0;for(ue=0;(ue|0)<(ae|0);ue=ue+32|0){de=((e+fe|0)+ae|0)+ue|0;P=i[de>>2]|0,E=P&0xffff,P=P>>>16,R=i[(de|4)>>2]|0,v=R&0xffff,R=R>>>16,N=i[(de|8)>>2]|0,_=N&0xffff,N=N>>>16,k=i[(de|12)>>2]|0,S=k&0xffff,k=k>>>16,O=i[(de|16)>>2]|0,$=O&0xffff,O=O>>>16,x=i[(de|20)>>2]|0,T=x&0xffff,x=x>>>16,B=i[(de|24)>>2]|0,I=B&0xffff,B=B>>>16,D=i[(de|28)>>2]|0,C=D&0xffff,D=D>>>16;M=U=L=F=H=V=G=j=0;Z=((s(n,E)|0)+(M&0xffff)|0)+(K&0xffff)|0;ee=((s(d,E)|0)+(M>>>16)|0)+(K>>>16)|0;te=((s(n,P)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(d,P)|0)+(ee>>>16)|0)+(te>>>16)|0;M=te<<16|Z&0xffff;Z=((s(n,v)|0)+(U&0xffff)|0)+(ie&0xffff)|0;ee=((s(d,v)|0)+(U>>>16)|0)+(ie>>>16)|0;te=((s(n,R)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(d,R)|0)+(ee>>>16)|0)+(te>>>16)|0;U=te<<16|Z&0xffff;Z=((s(n,_)|0)+(L&0xffff)|0)+(ie&0xffff)|0;ee=((s(d,_)|0)+(L>>>16)|0)+(ie>>>16)|0;te=((s(n,N)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(d,N)|0)+(ee>>>16)|0)+(te>>>16)|0;L=te<<16|Z&0xffff;Z=((s(n,S)|0)+(F&0xffff)|0)+(ie&0xffff)|0;ee=((s(d,S)|0)+(F>>>16)|0)+(ie>>>16)|0;te=((s(n,k)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(d,k)|0)+(ee>>>16)|0)+(te>>>16)|0;F=te<<16|Z&0xffff;Z=((s(n,$)|0)+(H&0xffff)|0)+(ie&0xffff)|0;ee=((s(d,$)|0)+(H>>>16)|0)+(ie>>>16)|0;te=((s(n,O)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(d,O)|0)+(ee>>>16)|0)+(te>>>16)|0;H=te<<16|Z&0xffff;Z=((s(n,T)|0)+(V&0xffff)|0)+(ie&0xffff)|0;ee=((s(d,T)|0)+(V>>>16)|0)+(ie>>>16)|0;te=((s(n,x)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(d,x)|0)+(ee>>>16)|0)+(te>>>16)|0;V=te<<16|Z&0xffff;Z=((s(n,I)|0)+(G&0xffff)|0)+(ie&0xffff)|0;ee=((s(d,I)|0)+(G>>>16)|0)+(ie>>>16)|0;te=((s(n,B)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(d,B)|0)+(ee>>>16)|0)+(te>>>16)|0;G=te<<16|Z&0xffff;Z=((s(n,C)|0)+(j&0xffff)|0)+(ie&0xffff)|0;ee=((s(d,C)|0)+(j>>>16)|0)+(ie>>>16)|0;te=((s(n,D)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(d,D)|0)+(ee>>>16)|0)+(te>>>16)|0;j=te<<16|Z&0xffff;K=ie;Z=((s(a,E)|0)+(U&0xffff)|0)+(Y&0xffff)|0;ee=((s(p,E)|0)+(U>>>16)|0)+(Y>>>16)|0;te=((s(a,P)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(p,P)|0)+(ee>>>16)|0)+(te>>>16)|0;U=te<<16|Z&0xffff;Z=((s(a,v)|0)+(L&0xffff)|0)+(ie&0xffff)|0;ee=((s(p,v)|0)+(L>>>16)|0)+(ie>>>16)|0;te=((s(a,R)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(p,R)|0)+(ee>>>16)|0)+(te>>>16)|0;L=te<<16|Z&0xffff;Z=((s(a,_)|0)+(F&0xffff)|0)+(ie&0xffff)|0;ee=((s(p,_)|0)+(F>>>16)|0)+(ie>>>16)|0;te=((s(a,N)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(p,N)|0)+(ee>>>16)|0)+(te>>>16)|0;F=te<<16|Z&0xffff;Z=((s(a,S)|0)+(H&0xffff)|0)+(ie&0xffff)|0;ee=((s(p,S)|0)+(H>>>16)|0)+(ie>>>16)|0;te=((s(a,k)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(p,k)|0)+(ee>>>16)|0)+(te>>>16)|0;H=te<<16|Z&0xffff;Z=((s(a,$)|0)+(V&0xffff)|0)+(ie&0xffff)|0;ee=((s(p,$)|0)+(V>>>16)|0)+(ie>>>16)|0;te=((s(a,O)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(p,O)|0)+(ee>>>16)|0)+(te>>>16)|0;V=te<<16|Z&0xffff;Z=((s(a,T)|0)+(G&0xffff)|0)+(ie&0xffff)|0;ee=((s(p,T)|0)+(G>>>16)|0)+(ie>>>16)|0;te=((s(a,x)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(p,x)|0)+(ee>>>16)|0)+(te>>>16)|0;G=te<<16|Z&0xffff;Z=((s(a,I)|0)+(j&0xffff)|0)+(ie&0xffff)|0;ee=((s(p,I)|0)+(j>>>16)|0)+(ie>>>16)|0;te=((s(a,B)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(p,B)|0)+(ee>>>16)|0)+(te>>>16)|0;j=te<<16|Z&0xffff;Z=((s(a,C)|0)+(K&0xffff)|0)+(ie&0xffff)|0;ee=((s(p,C)|0)+(K>>>16)|0)+(ie>>>16)|0;te=((s(a,D)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(p,D)|0)+(ee>>>16)|0)+(te>>>16)|0;K=te<<16|Z&0xffff;Y=ie;Z=((s(o,E)|0)+(L&0xffff)|0)+(q&0xffff)|0;ee=((s(y,E)|0)+(L>>>16)|0)+(q>>>16)|0;te=((s(o,P)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(y,P)|0)+(ee>>>16)|0)+(te>>>16)|0;L=te<<16|Z&0xffff;Z=((s(o,v)|0)+(F&0xffff)|0)+(ie&0xffff)|0;ee=((s(y,v)|0)+(F>>>16)|0)+(ie>>>16)|0;te=((s(o,R)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(y,R)|0)+(ee>>>16)|0)+(te>>>16)|0;F=te<<16|Z&0xffff;Z=((s(o,_)|0)+(H&0xffff)|0)+(ie&0xffff)|0;ee=((s(y,_)|0)+(H>>>16)|0)+(ie>>>16)|0;te=((s(o,N)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(y,N)|0)+(ee>>>16)|0)+(te>>>16)|0;H=te<<16|Z&0xffff;Z=((s(o,S)|0)+(V&0xffff)|0)+(ie&0xffff)|0;ee=((s(y,S)|0)+(V>>>16)|0)+(ie>>>16)|0;te=((s(o,k)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(y,k)|0)+(ee>>>16)|0)+(te>>>16)|0;V=te<<16|Z&0xffff;Z=((s(o,$)|0)+(G&0xffff)|0)+(ie&0xffff)|0;ee=((s(y,$)|0)+(G>>>16)|0)+(ie>>>16)|0;te=((s(o,O)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(y,O)|0)+(ee>>>16)|0)+(te>>>16)|0;G=te<<16|Z&0xffff;Z=((s(o,T)|0)+(j&0xffff)|0)+(ie&0xffff)|0;ee=((s(y,T)|0)+(j>>>16)|0)+(ie>>>16)|0;te=((s(o,x)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(y,x)|0)+(ee>>>16)|0)+(te>>>16)|0;j=te<<16|Z&0xffff;Z=((s(o,I)|0)+(K&0xffff)|0)+(ie&0xffff)|0;ee=((s(y,I)|0)+(K>>>16)|0)+(ie>>>16)|0;te=((s(o,B)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(y,B)|0)+(ee>>>16)|0)+(te>>>16)|0;K=te<<16|Z&0xffff;Z=((s(o,C)|0)+(Y&0xffff)|0)+(ie&0xffff)|0;ee=((s(y,C)|0)+(Y>>>16)|0)+(ie>>>16)|0;te=((s(o,D)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(y,D)|0)+(ee>>>16)|0)+(te>>>16)|0;Y=te<<16|Z&0xffff;q=ie;Z=((s(f,E)|0)+(F&0xffff)|0)+(z&0xffff)|0;ee=((s(m,E)|0)+(F>>>16)|0)+(z>>>16)|0;te=((s(f,P)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(m,P)|0)+(ee>>>16)|0)+(te>>>16)|0;F=te<<16|Z&0xffff;Z=((s(f,v)|0)+(H&0xffff)|0)+(ie&0xffff)|0;ee=((s(m,v)|0)+(H>>>16)|0)+(ie>>>16)|0;te=((s(f,R)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(m,R)|0)+(ee>>>16)|0)+(te>>>16)|0;H=te<<16|Z&0xffff;Z=((s(f,_)|0)+(V&0xffff)|0)+(ie&0xffff)|0;ee=((s(m,_)|0)+(V>>>16)|0)+(ie>>>16)|0;te=((s(f,N)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(m,N)|0)+(ee>>>16)|0)+(te>>>16)|0;V=te<<16|Z&0xffff;Z=((s(f,S)|0)+(G&0xffff)|0)+(ie&0xffff)|0;ee=((s(m,S)|0)+(G>>>16)|0)+(ie>>>16)|0;te=((s(f,k)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(m,k)|0)+(ee>>>16)|0)+(te>>>16)|0;G=te<<16|Z&0xffff;Z=((s(f,$)|0)+(j&0xffff)|0)+(ie&0xffff)|0;ee=((s(m,$)|0)+(j>>>16)|0)+(ie>>>16)|0;te=((s(f,O)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(m,O)|0)+(ee>>>16)|0)+(te>>>16)|0;j=te<<16|Z&0xffff;Z=((s(f,T)|0)+(K&0xffff)|0)+(ie&0xffff)|0;ee=((s(m,T)|0)+(K>>>16)|0)+(ie>>>16)|0;te=((s(f,x)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(m,x)|0)+(ee>>>16)|0)+(te>>>16)|0;K=te<<16|Z&0xffff;Z=((s(f,I)|0)+(Y&0xffff)|0)+(ie&0xffff)|0;ee=((s(m,I)|0)+(Y>>>16)|0)+(ie>>>16)|0;te=((s(f,B)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(m,B)|0)+(ee>>>16)|0)+(te>>>16)|0;Y=te<<16|Z&0xffff;Z=((s(f,C)|0)+(q&0xffff)|0)+(ie&0xffff)|0;ee=((s(m,C)|0)+(q>>>16)|0)+(ie>>>16)|0;te=((s(f,D)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(m,D)|0)+(ee>>>16)|0)+(te>>>16)|0;q=te<<16|Z&0xffff;z=ie;Z=((s(c,E)|0)+(H&0xffff)|0)+(X&0xffff)|0;ee=((s(g,E)|0)+(H>>>16)|0)+(X>>>16)|0;te=((s(c,P)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(g,P)|0)+(ee>>>16)|0)+(te>>>16)|0;H=te<<16|Z&0xffff;Z=((s(c,v)|0)+(V&0xffff)|0)+(ie&0xffff)|0;ee=((s(g,v)|0)+(V>>>16)|0)+(ie>>>16)|0;te=((s(c,R)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(g,R)|0)+(ee>>>16)|0)+(te>>>16)|0;V=te<<16|Z&0xffff;Z=((s(c,_)|0)+(G&0xffff)|0)+(ie&0xffff)|0;ee=((s(g,_)|0)+(G>>>16)|0)+(ie>>>16)|0;te=((s(c,N)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(g,N)|0)+(ee>>>16)|0)+(te>>>16)|0;G=te<<16|Z&0xffff;Z=((s(c,S)|0)+(j&0xffff)|0)+(ie&0xffff)|0;ee=((s(g,S)|0)+(j>>>16)|0)+(ie>>>16)|0;te=((s(c,k)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(g,k)|0)+(ee>>>16)|0)+(te>>>16)|0;j=te<<16|Z&0xffff;Z=((s(c,$)|0)+(K&0xffff)|0)+(ie&0xffff)|0;ee=((s(g,$)|0)+(K>>>16)|0)+(ie>>>16)|0;te=((s(c,O)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(g,O)|0)+(ee>>>16)|0)+(te>>>16)|0;K=te<<16|Z&0xffff;Z=((s(c,T)|0)+(Y&0xffff)|0)+(ie&0xffff)|0;ee=((s(g,T)|0)+(Y>>>16)|0)+(ie>>>16)|0;te=((s(c,x)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(g,x)|0)+(ee>>>16)|0)+(te>>>16)|0;Y=te<<16|Z&0xffff;Z=((s(c,I)|0)+(q&0xffff)|0)+(ie&0xffff)|0;ee=((s(g,I)|0)+(q>>>16)|0)+(ie>>>16)|0;te=((s(c,B)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(g,B)|0)+(ee>>>16)|0)+(te>>>16)|0;q=te<<16|Z&0xffff;Z=((s(c,C)|0)+(z&0xffff)|0)+(ie&0xffff)|0;ee=((s(g,C)|0)+(z>>>16)|0)+(ie>>>16)|0;te=((s(c,D)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(g,D)|0)+(ee>>>16)|0)+(te>>>16)|0;z=te<<16|Z&0xffff;X=ie;Z=((s(u,E)|0)+(V&0xffff)|0)+(Q&0xffff)|0;ee=((s(b,E)|0)+(V>>>16)|0)+(Q>>>16)|0;te=((s(u,P)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(b,P)|0)+(ee>>>16)|0)+(te>>>16)|0;V=te<<16|Z&0xffff;Z=((s(u,v)|0)+(G&0xffff)|0)+(ie&0xffff)|0;ee=((s(b,v)|0)+(G>>>16)|0)+(ie>>>16)|0;te=((s(u,R)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(b,R)|0)+(ee>>>16)|0)+(te>>>16)|0;G=te<<16|Z&0xffff;Z=((s(u,_)|0)+(j&0xffff)|0)+(ie&0xffff)|0;ee=((s(b,_)|0)+(j>>>16)|0)+(ie>>>16)|0;te=((s(u,N)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(b,N)|0)+(ee>>>16)|0)+(te>>>16)|0;j=te<<16|Z&0xffff;Z=((s(u,S)|0)+(K&0xffff)|0)+(ie&0xffff)|0;ee=((s(b,S)|0)+(K>>>16)|0)+(ie>>>16)|0;te=((s(u,k)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(b,k)|0)+(ee>>>16)|0)+(te>>>16)|0;K=te<<16|Z&0xffff;Z=((s(u,$)|0)+(Y&0xffff)|0)+(ie&0xffff)|0;ee=((s(b,$)|0)+(Y>>>16)|0)+(ie>>>16)|0;te=((s(u,O)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(b,O)|0)+(ee>>>16)|0)+(te>>>16)|0;Y=te<<16|Z&0xffff;Z=((s(u,T)|0)+(q&0xffff)|0)+(ie&0xffff)|0;ee=((s(b,T)|0)+(q>>>16)|0)+(ie>>>16)|0;te=((s(u,x)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(b,x)|0)+(ee>>>16)|0)+(te>>>16)|0;q=te<<16|Z&0xffff;Z=((s(u,I)|0)+(z&0xffff)|0)+(ie&0xffff)|0;ee=((s(b,I)|0)+(z>>>16)|0)+(ie>>>16)|0;te=((s(u,B)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(b,B)|0)+(ee>>>16)|0)+(te>>>16)|0;z=te<<16|Z&0xffff;Z=((s(u,C)|0)+(X&0xffff)|0)+(ie&0xffff)|0;ee=((s(b,C)|0)+(X>>>16)|0)+(ie>>>16)|0;te=((s(u,D)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(b,D)|0)+(ee>>>16)|0)+(te>>>16)|0;X=te<<16|Z&0xffff;Q=ie;Z=((s(l,E)|0)+(G&0xffff)|0)+(W&0xffff)|0;ee=((s(A,E)|0)+(G>>>16)|0)+(W>>>16)|0;te=((s(l,P)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(A,P)|0)+(ee>>>16)|0)+(te>>>16)|0;G=te<<16|Z&0xffff;Z=((s(l,v)|0)+(j&0xffff)|0)+(ie&0xffff)|0;ee=((s(A,v)|0)+(j>>>16)|0)+(ie>>>16)|0;te=((s(l,R)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(A,R)|0)+(ee>>>16)|0)+(te>>>16)|0;j=te<<16|Z&0xffff;Z=((s(l,_)|0)+(K&0xffff)|0)+(ie&0xffff)|0;ee=((s(A,_)|0)+(K>>>16)|0)+(ie>>>16)|0;te=((s(l,N)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(A,N)|0)+(ee>>>16)|0)+(te>>>16)|0;K=te<<16|Z&0xffff;Z=((s(l,S)|0)+(Y&0xffff)|0)+(ie&0xffff)|0;ee=((s(A,S)|0)+(Y>>>16)|0)+(ie>>>16)|0;te=((s(l,k)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(A,k)|0)+(ee>>>16)|0)+(te>>>16)|0;Y=te<<16|Z&0xffff;Z=((s(l,$)|0)+(q&0xffff)|0)+(ie&0xffff)|0;ee=((s(A,$)|0)+(q>>>16)|0)+(ie>>>16)|0;te=((s(l,O)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(A,O)|0)+(ee>>>16)|0)+(te>>>16)|0;q=te<<16|Z&0xffff;Z=((s(l,T)|0)+(z&0xffff)|0)+(ie&0xffff)|0;ee=((s(A,T)|0)+(z>>>16)|0)+(ie>>>16)|0;te=((s(l,x)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(A,x)|0)+(ee>>>16)|0)+(te>>>16)|0;z=te<<16|Z&0xffff;Z=((s(l,I)|0)+(X&0xffff)|0)+(ie&0xffff)|0;ee=((s(A,I)|0)+(X>>>16)|0)+(ie>>>16)|0;te=((s(l,B)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(A,B)|0)+(ee>>>16)|0)+(te>>>16)|0;X=te<<16|Z&0xffff;Z=((s(l,C)|0)+(Q&0xffff)|0)+(ie&0xffff)|0;ee=((s(A,C)|0)+(Q>>>16)|0)+(ie>>>16)|0;te=((s(l,D)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(A,D)|0)+(ee>>>16)|0)+(te>>>16)|0;Q=te<<16|Z&0xffff;W=ie;Z=((s(h,E)|0)+(j&0xffff)|0)+(J&0xffff)|0;ee=((s(w,E)|0)+(j>>>16)|0)+(J>>>16)|0;te=((s(h,P)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(w,P)|0)+(ee>>>16)|0)+(te>>>16)|0;j=te<<16|Z&0xffff;Z=((s(h,v)|0)+(K&0xffff)|0)+(ie&0xffff)|0;ee=((s(w,v)|0)+(K>>>16)|0)+(ie>>>16)|0;te=((s(h,R)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(w,R)|0)+(ee>>>16)|0)+(te>>>16)|0;K=te<<16|Z&0xffff;Z=((s(h,_)|0)+(Y&0xffff)|0)+(ie&0xffff)|0;ee=((s(w,_)|0)+(Y>>>16)|0)+(ie>>>16)|0;te=((s(h,N)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(w,N)|0)+(ee>>>16)|0)+(te>>>16)|0;Y=te<<16|Z&0xffff;Z=((s(h,S)|0)+(q&0xffff)|0)+(ie&0xffff)|0;ee=((s(w,S)|0)+(q>>>16)|0)+(ie>>>16)|0;te=((s(h,k)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(w,k)|0)+(ee>>>16)|0)+(te>>>16)|0;q=te<<16|Z&0xffff;Z=((s(h,$)|0)+(z&0xffff)|0)+(ie&0xffff)|0;ee=((s(w,$)|0)+(z>>>16)|0)+(ie>>>16)|0;te=((s(h,O)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(w,O)|0)+(ee>>>16)|0)+(te>>>16)|0;z=te<<16|Z&0xffff;Z=((s(h,T)|0)+(X&0xffff)|0)+(ie&0xffff)|0;ee=((s(w,T)|0)+(X>>>16)|0)+(ie>>>16)|0;te=((s(h,x)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(w,x)|0)+(ee>>>16)|0)+(te>>>16)|0;X=te<<16|Z&0xffff;Z=((s(h,I)|0)+(Q&0xffff)|0)+(ie&0xffff)|0;ee=((s(w,I)|0)+(Q>>>16)|0)+(ie>>>16)|0;te=((s(h,B)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(w,B)|0)+(ee>>>16)|0)+(te>>>16)|0;Q=te<<16|Z&0xffff;Z=((s(h,C)|0)+(W&0xffff)|0)+(ie&0xffff)|0;ee=((s(w,C)|0)+(W>>>16)|0)+(ie>>>16)|0;te=((s(h,D)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(w,D)|0)+(ee>>>16)|0)+(te>>>16)|0;W=te<<16|Z&0xffff;J=ie;le=ae+(ce+ue|0)|0;se=i[pe+le>>2]|0;Z=((se&0xffff)+((M&0xffff)<<1)|0)+re|0;te=((se>>>16)+(M>>>16<<1)|0)+(Z>>>16)|0;i[pe+le>>2]=te<<16|Z&0xffff;re=te>>>16;le=le+4|0;se=i[pe+le>>2]|0;Z=((se&0xffff)+((U&0xffff)<<1)|0)+re|0;te=((se>>>16)+(U>>>16<<1)|0)+(Z>>>16)|0;i[pe+le>>2]=te<<16|Z&0xffff;re=te>>>16;le=le+4|0;se=i[pe+le>>2]|0;Z=((se&0xffff)+((L&0xffff)<<1)|0)+re|0;te=((se>>>16)+(L>>>16<<1)|0)+(Z>>>16)|0;i[pe+le>>2]=te<<16|Z&0xffff;re=te>>>16;le=le+4|0;se=i[pe+le>>2]|0;Z=((se&0xffff)+((F&0xffff)<<1)|0)+re|0;te=((se>>>16)+(F>>>16<<1)|0)+(Z>>>16)|0;i[pe+le>>2]=te<<16|Z&0xffff;re=te>>>16;le=le+4|0;se=i[pe+le>>2]|0;Z=((se&0xffff)+((H&0xffff)<<1)|0)+re|0;te=((se>>>16)+(H>>>16<<1)|0)+(Z>>>16)|0;i[pe+le>>2]=te<<16|Z&0xffff;re=te>>>16;le=le+4|0;se=i[pe+le>>2]|0;Z=((se&0xffff)+((V&0xffff)<<1)|0)+re|0;te=((se>>>16)+(V>>>16<<1)|0)+(Z>>>16)|0;i[pe+le>>2]=te<<16|Z&0xffff;re=te>>>16;le=le+4|0;se=i[pe+le>>2]|0;Z=((se&0xffff)+((G&0xffff)<<1)|0)+re|0;te=((se>>>16)+(G>>>16<<1)|0)+(Z>>>16)|0;i[pe+le>>2]=te<<16|Z&0xffff;re=te>>>16;le=le+4|0;se=i[pe+le>>2]|0;Z=((se&0xffff)+((j&0xffff)<<1)|0)+re|0;te=((se>>>16)+(j>>>16<<1)|0)+(Z>>>16)|0;i[pe+le>>2]=te<<16|Z&0xffff;re=te>>>16}le=ae+(ce+ue|0)|0;se=i[pe+le>>2]|0;Z=(((se&0xffff)+((K&0xffff)<<1)|0)+re|0)+ne|0;te=((se>>>16)+(K>>>16<<1)|0)+(Z>>>16)|0;i[pe+le>>2]=te<<16|Z&0xffff;re=te>>>16;le=le+4|0;se=i[pe+le>>2]|0;Z=((se&0xffff)+((Y&0xffff)<<1)|0)+re|0;te=((se>>>16)+(Y>>>16<<1)|0)+(Z>>>16)|0;i[pe+le>>2]=te<<16|Z&0xffff;re=te>>>16;le=le+4|0;se=i[pe+le>>2]|0;Z=((se&0xffff)+((q&0xffff)<<1)|0)+re|0;te=((se>>>16)+(q>>>16<<1)|0)+(Z>>>16)|0;i[pe+le>>2]=te<<16|Z&0xffff;re=te>>>16;le=le+4|0;se=i[pe+le>>2]|0;Z=((se&0xffff)+((z&0xffff)<<1)|0)+re|0;te=((se>>>16)+(z>>>16<<1)|0)+(Z>>>16)|0;i[pe+le>>2]=te<<16|Z&0xffff;re=te>>>16;le=le+4|0;se=i[pe+le>>2]|0;Z=((se&0xffff)+((X&0xffff)<<1)|0)+re|0;te=((se>>>16)+(X>>>16<<1)|0)+(Z>>>16)|0;i[pe+le>>2]=te<<16|Z&0xffff;re=te>>>16;le=le+4|0;se=i[pe+le>>2]|0;Z=((se&0xffff)+((Q&0xffff)<<1)|0)+re|0;te=((se>>>16)+(Q>>>16<<1)|0)+(Z>>>16)|0;i[pe+le>>2]=te<<16|Z&0xffff;re=te>>>16;le=le+4|0;se=i[pe+le>>2]|0;Z=((se&0xffff)+((W&0xffff)<<1)|0)+re|0;te=((se>>>16)+(W>>>16<<1)|0)+(Z>>>16)|0;i[pe+le>>2]=te<<16|Z&0xffff;re=te>>>16;le=le+4|0;se=i[pe+le>>2]|0;Z=((se&0xffff)+((J&0xffff)<<1)|0)+re|0;te=((se>>>16)+(J>>>16<<1)|0)+(Z>>>16)|0;i[pe+le>>2]=te<<16|Z&0xffff;ne=te>>>16}for(le=le+4|0;!!ne&(le|0)<oe<<1;le=le+4|0){se=i[pe+le>>2]|0;Z=(se&0xffff)+ne|0;te=(se>>>16)+(Z>>>16)|0;i[pe+le>>2]=te<<16|Z&0xffff;ne=te>>>16}}}}function b(e,t,r,n,a){e=e|0;t=t|0;r=r|0;n=n|0;a=a|0;var o=0,f=0,c=0,u=0,l=0,h=0,d=0,p=0,y=0,m=0,g=0,b=0,A=0,w=0,E=0,v=0,_=0,S=0,$=0;for(_=t-1&-4;(_|0)>=0;_=_-4|0){o=i[e+_>>2]|0;if(o){t=_;break}}for(_=n-1&-4;(_|0)>=0;_=_-4|0){f=i[r+_>>2]|0;if(f){n=_;break}}while((f&0x80000000)==0){f=f<<1;c=c+1|0}l=i[e+t>>2]|0;if(c){u=l>>>(32-c|0);for(_=t-4|0;(_|0)>=0;_=_-4|0){o=i[e+_>>2]|0;i[e+_+4>>2]=l<<c|(c?o>>>(32-c|0):0);l=o}i[e>>2]=l<<c}if(c){h=i[r+n>>2]|0;for(_=n-4|0;(_|0)>=0;_=_-4|0){f=i[r+_>>2]|0;i[r+_+4>>2]=h<<c|f>>>(32-c|0);h=f}i[r>>2]=h<<c}h=i[r+n>>2]|0;d=h>>>16,p=h&0xffff;for(_=t;(_|0)>=(n|0);_=_-4|0){S=_-n|0;l=i[e+_>>2]|0;y=(u>>>0)/(d>>>0)|0,g=(u>>>0)%(d>>>0)|0,A=s(y,p)|0;while((y|0)==0x10000|A>>>0>(g<<16|l>>>16)>>>0){y=y-1|0,g=g+d|0,A=A-p|0;if((g|0)>=0x10000)break}E=0,v=0;for($=0;($|0)<=(n|0);$=$+4|0){f=i[r+$>>2]|0;A=(s(y,f&0xffff)|0)+(E>>>16)|0;w=(s(y,f>>>16)|0)+(A>>>16)|0;f=E&0xffff|A<<16;E=w;o=i[e+S+$>>2]|0;A=((o&0xffff)-(f&0xffff)|0)+v|0;w=((o>>>16)-(f>>>16)|0)+(A>>16)|0;i[e+S+$>>2]=w<<16|A&0xffff;v=w>>16}A=((u&0xffff)-(E&0xffff)|0)+v|0;w=((u>>>16)-(E>>>16)|0)+(A>>16)|0;u=w<<16|A&0xffff;v=w>>16;if(v){y=y-1|0;v=0;for($=0;($|0)<=(n|0);$=$+4|0){f=i[r+$>>2]|0;o=i[e+S+$>>2]|0;A=(o&0xffff)+v|0;w=(o>>>16)+f+(A>>>16)|0;i[e+S+$>>2]=w<<16|A&0xffff;v=w>>>16}u=u+v|0}l=i[e+_>>2]|0;o=u<<16|l>>>16;m=(o>>>0)/(d>>>0)|0,b=(o>>>0)%(d>>>0)|0,A=s(m,p)|0;while((m|0)==0x10000|A>>>0>(b<<16|l&0xffff)>>>0){m=m-1|0,b=b+d|0,A=A-p|0;if((b|0)>=0x10000)break}E=0,v=0;for($=0;($|0)<=(n|0);$=$+4|0){f=i[r+$>>2]|0;A=(s(m,f&0xffff)|0)+(E&0xffff)|0;w=((s(m,f>>>16)|0)+(A>>>16)|0)+(E>>>16)|0;f=A&0xffff|w<<16;E=w>>>16;o=i[e+S+$>>2]|0;A=((o&0xffff)-(f&0xffff)|0)+v|0;w=((o>>>16)-(f>>>16)|0)+(A>>16)|0;v=w>>16;i[e+S+$>>2]=w<<16|A&0xffff}A=((u&0xffff)-(E&0xffff)|0)+v|0;w=((u>>>16)-(E>>>16)|0)+(A>>16)|0;v=w>>16;if(v){m=m-1|0;v=0;for($=0;($|0)<=(n|0);$=$+4|0){f=i[r+$>>2]|0;o=i[e+S+$>>2]|0;A=((o&0xffff)+(f&0xffff)|0)+v|0;w=((o>>>16)+(f>>>16)|0)+(A>>>16)|0;v=w>>>16;i[e+S+$>>2]=A&0xffff|w<<16}}i[a+S>>2]=y<<16|m;u=i[e+_>>2]|0}if(c){l=i[e>>2]|0;for(_=4;(_|0)<=(n|0);_=_+4|0){o=i[e+_>>2]|0;i[e+_-4>>2]=o<<(32-c|0)|l>>>c;l=o}i[e+n>>2]=l>>>c}}function A(e,t,r,n,a,l){e=e|0;t=t|0;r=r|0;n=n|0;a=a|0;l=l|0;var d=0,p=0,m=0,g=0,b=0,A=0,w=0,E=0,v=0,_=0,S=0,$=0,T=0,I=0;d=o(n<<1)|0;u(n<<1,0,d);c(t,e,d);for($=0;($|0)<(n|0);$=$+4|0){m=i[d+$>>2]|0,g=m&0xffff,m=m>>>16;A=a>>>16,b=a&0xffff;w=s(g,b)|0,E=((s(g,A)|0)+(s(m,b)|0)|0)+(w>>>16)|0;g=w&0xffff,m=E&0xffff;S=0;for(T=0;(T|0)<(n|0);T=T+4|0){I=$+T|0;A=i[r+T>>2]|0,b=A&0xffff,A=A>>>16;_=i[d+I>>2]|0;w=((s(g,b)|0)+(S&0xffff)|0)+(_&0xffff)|0;E=((s(g,A)|0)+(S>>>16)|0)+(_>>>16)|0;v=((s(m,b)|0)+(E&0xffff)|0)+(w>>>16)|0;S=((s(m,A)|0)+(v>>>16)|0)+(E>>>16)|0;_=v<<16|w&0xffff;i[d+I>>2]=_}I=$+T|0;_=i[d+I>>2]|0;w=((_&0xffff)+(S&0xffff)|0)+p|0;E=((_>>>16)+(S>>>16)|0)+(w>>>16)|0;i[d+I>>2]=E<<16|w&0xffff;p=E>>>16}c(n,d+n|0,l);f(n<<1);if(p|(h(r,n,l,n)|0)<=0){y(l,n,r,n,l,n)|0}}return{sreset:a,salloc:o,sfree:f,z:u,tst:d,neg:l,cmp:h,add:p,sub:y,mul:m,sqr:g,div:b,mredc:A}};function Number_extGCD(e,t){var r=e<0?-1:1,n=t<0?-1:1,i=1,s=0,a=0,o=1,f,c,u,l;e*=r;t*=n;l=e<t;if(l){u=e;e=t,t=u;u=r;r=n;n=u}c=Math.floor(e/t),f=e-c*t;while(f){u=i-c*s,i=s,s=u;u=a-c*o,a=o,o=u;e=t,t=f;c=Math.floor(e/t),f=e-c*t}s*=r;o*=n;if(l){u=s;s=o,o=u}return{gcd:t,x:s,y:o}}function BigNumber_extGCD(e,t){let r=e.sign;let n=t.sign;if(r<0)e=e.negate();if(n<0)t=t.negate();const i=e.compare(t);if(i<0){let i=e;e=t,t=i;let s=r;r=n;n=s}var s=BigNumber.ONE,a=BigNumber.ZERO,o=t.bitLength,f=BigNumber.ZERO,c=BigNumber.ONE,u=e.bitLength,l,h,d;l=e.divide(t);while((h=l.remainder)!==BigNumber.ZERO){d=l.quotient;l=s.subtract(d.multiply(a).clamp(o)).clamp(o),s=a,a=l;l=f.subtract(d.multiply(c).clamp(u)).clamp(u),f=c,c=l;e=t,t=h;l=e.divide(t)}if(r<0)a=a.negate();if(n<0)c=c.negate();if(i<0){let e=a;a=c,c=e}return{gcd:t,x:a,y:c}}function getRandomValues(e){if(typeof process!=="undefined"){const t=require("crypto");const r=t.randomBytes(e.length);e.set(r);return}if(window.crypto&&window.crypto.getRandomValues){window.crypto.getRandomValues(e);return}if(self.crypto&&self.crypto.getRandomValues){self.crypto.getRandomValues(e);return}if(window.msCrypto&&window.msCrypto.getRandomValues){window.msCrypto.getRandomValues(e);return}throw new Error("No secure random number generator available.")}const _bigint_stdlib={Uint32Array,Math};const _bigint_heap=new Uint32Array(1048576);let _bigint_asm;function _half_imul(e,t){return e*t|0}if(_bigint_stdlib.Math.imul===undefined){_bigint_stdlib.Math.imul=_half_imul;_bigint_asm=bigint_asm(_bigint_stdlib,null,_bigint_heap.buffer);delete _bigint_stdlib.Math.imul}else{_bigint_asm=bigint_asm(_bigint_stdlib,null,_bigint_heap.buffer)}const _BigNumber_ZERO_limbs=new Uint32Array(0);class BigNumber{constructor(e){let t=_BigNumber_ZERO_limbs;let r=0;let n=0;if(e===undefined);else{for(var i=0;!e[i];i++);r=(e.length-i)*8;if(!r)return BigNumber.ZERO;t=new Uint32Array(r+31>>5);for(var s=e.length-4;s>=i;s-=4){t[e.length-4-s>>2]=e[s]<<24|e[s+1]<<16|e[s+2]<<8|e[s+3]}if(i-s===3){t[t.length-1]=e[i]}else if(i-s===2){t[t.length-1]=e[i]<<8|e[i+1]}else if(i-s===1){t[t.length-1]=e[i]<<16|e[i+1]<<8|e[i+2]}n=1}this.limbs=t;this.bitLength=r;this.sign=n}static fromString(e){const t=string_to_bytes(e);return new BigNumber(t)}static fromNumber(e){let t=_BigNumber_ZERO_limbs;let r=0;let n=0;var i=Math.abs(e);if(i>4294967295){t=new Uint32Array(2);t[0]=i|0;t[1]=i/4294967296|0;r=52}else if(i>0){t=new Uint32Array(1);t[0]=i;r=32}else{t=_BigNumber_ZERO_limbs;r=0}n=e<0?-1:1;return BigNumber.fromConfig({limbs:t,bitLength:r,sign:n})}static fromArrayBuffer(e){return new BigNumber(new Uint8Array(e))}static fromConfig(e){const t=new BigNumber;t.limbs=new Uint32Array(e.limbs);t.bitLength=e.bitLength;t.sign=e.sign;return t}toString(e){e=e||16;const t=this.limbs;const r=this.bitLength;let n="";if(e===16){for(var i=(r+31>>5)-1;i>=0;i--){var s=t[i].toString(16);n+="00000000".substr(s.length);n+=s}n=n.replace(/^0+/,"");if(!n.length)n="0"}else{throw new IllegalArgumentError("bad radix")}if(this.sign<0)n="-"+n;return n}toBytes(){const e=this.bitLength;const t=this.limbs;if(e===0)return new Uint8Array(0);const r=e+7>>3;const n=new Uint8Array(r);for(let e=0;e<r;e++){let i=r-e-1;n[e]=t[i>>2]>>((i&3)<<3)}return n}valueOf(){const e=this.limbs;const t=this.bitLength;const r=this.sign;if(!r)return 0;if(t<=32)return r*(e[0]>>>0);if(t<=52)return r*(4294967296*(e[1]>>>0)+(e[0]>>>0));let n,i,s=0;for(n=e.length-1;n>=0;n--){if((i=e[n])===0)continue;while((i<<s&2147483648)===0)s++;break}if(n===0)return r*(e[0]>>>0);return r*(1048576*((e[n]<<s|(s?e[n-1]>>>32-s:0))>>>0)+((e[n-1]<<s|(s&&n>1?e[n-2]>>>32-s:0))>>>12))*Math.pow(2,32*n-s-52)}clamp(e){const t=this.limbs;const r=this.bitLength;if(e>=r)return this;const n=new BigNumber;let i=e+31>>5;let s=e%32;n.limbs=new Uint32Array(t.subarray(0,i));n.bitLength=e;n.sign=this.sign;if(s)n.limbs[i-1]&=-1>>>32-s;return n}slice(e,t){const r=this.limbs;const n=this.bitLength;if(e<0)throw new RangeError("TODO");if(e>=n)return BigNumber.ZERO;if(t===undefined||t>n-e)t=n-e;const i=new BigNumber;let s=e>>5;let a=e+t+31>>5;let o=t+31>>5;let f=e%32;let c=t%32;const u=new Uint32Array(o);if(f){for(var l=0;l<a-s-1;l++){u[l]=r[s+l]>>>f|r[s+l+1]<<32-f}u[l]=r[s+l]>>>f}else{u.set(r.subarray(s,a))}if(c){u[o-1]&=-1>>>32-c}i.limbs=u;i.bitLength=t;i.sign=this.sign;return i}negate(){const e=new BigNumber;e.limbs=this.limbs;e.bitLength=this.bitLength;e.sign=-1*this.sign;return e}compare(e){var t=this.limbs,r=t.length,n=e.limbs,i=n.length,s=0;if(this.sign<e.sign)return-1;if(this.sign>e.sign)return 1;_bigint_heap.set(t,0);_bigint_heap.set(n,r);s=_bigint_asm.cmp(0,r<<2,r<<2,i<<2);return s*this.sign}add(e){if(!this.sign)return e;if(!e.sign)return this;var t=this.bitLength,r=this.limbs,n=r.length,i=this.sign,s=e.bitLength,a=e.limbs,o=a.length,f=e.sign,c,u,l,h,d=new BigNumber;c=(t>s?t:s)+(i*f>0?1:0);u=c+31>>5;_bigint_asm.sreset();var p=_bigint_asm.salloc(n<<2),y=_bigint_asm.salloc(o<<2),m=_bigint_asm.salloc(u<<2);_bigint_asm.z(m-p+(u<<2),0,p);_bigint_heap.set(r,p>>2);_bigint_heap.set(a,y>>2);if(i*f>0){_bigint_asm.add(p,n<<2,y,o<<2,m,u<<2);l=i}else if(i>f){h=_bigint_asm.sub(p,n<<2,y,o<<2,m,u<<2);l=h?f:i}else{h=_bigint_asm.sub(y,o<<2,p,n<<2,m,u<<2);l=h?i:f}if(h)_bigint_asm.neg(m,u<<2,m,u<<2);if(_bigint_asm.tst(m,u<<2)===0)return BigNumber.ZERO;d.limbs=new Uint32Array(_bigint_heap.subarray(m>>2,(m>>2)+u));d.bitLength=c;d.sign=l;return d}subtract(e){return this.add(e.negate())}square(){if(!this.sign)return BigNumber.ZERO;var e=this.bitLength,t=this.limbs,r=t.length,n,i,s=new BigNumber;n=e<<1;i=n+31>>5;_bigint_asm.sreset();var a=_bigint_asm.salloc(r<<2),o=_bigint_asm.salloc(i<<2);_bigint_asm.z(o-a+(i<<2),0,a);_bigint_heap.set(t,a>>2);_bigint_asm.sqr(a,r<<2,o);s.limbs=new Uint32Array(_bigint_heap.subarray(o>>2,(o>>2)+i));s.bitLength=n;s.sign=1;return s}divide(e){var t=this.bitLength,r=this.limbs,n=r.length,i=e.bitLength,s=e.limbs,a=s.length,o,f,c=BigNumber.ZERO,u=BigNumber.ZERO;_bigint_asm.sreset();var l=_bigint_asm.salloc(n<<2),h=_bigint_asm.salloc(a<<2),d=_bigint_asm.salloc(n<<2);_bigint_asm.z(d-l+(n<<2),0,l);_bigint_heap.set(r,l>>2);_bigint_heap.set(s,h>>2);_bigint_asm.div(l,n<<2,h,a<<2,d);o=_bigint_asm.tst(d,n<<2)>>2;if(o){c=new BigNumber;c.limbs=new Uint32Array(_bigint_heap.subarray(d>>2,(d>>2)+o));c.bitLength=t<o<<5?t:o<<5;c.sign=this.sign*e.sign}f=_bigint_asm.tst(l,a<<2)>>2;if(f){u=new BigNumber;u.limbs=new Uint32Array(_bigint_heap.subarray(l>>2,(l>>2)+f));u.bitLength=i<f<<5?i:f<<5;u.sign=this.sign}return{quotient:c,remainder:u}}multiply(e){if(!this.sign||!e.sign)return BigNumber.ZERO;var t=this.bitLength,r=this.limbs,n=r.length,i=e.bitLength,s=e.limbs,a=s.length,o,f,c=new BigNumber;o=t+i;f=o+31>>5;_bigint_asm.sreset();var u=_bigint_asm.salloc(n<<2),l=_bigint_asm.salloc(a<<2),h=_bigint_asm.salloc(f<<2);_bigint_asm.z(h-u+(f<<2),0,u);_bigint_heap.set(r,u>>2);_bigint_heap.set(s,l>>2);_bigint_asm.mul(u,n<<2,l,a<<2,h,f<<2);c.limbs=new Uint32Array(_bigint_heap.subarray(h>>2,(h>>2)+f));c.sign=this.sign*e.sign;c.bitLength=o;return c}isMillerRabinProbablePrime(e){var t=BigNumber.fromConfig(this),r=0;t.limbs[0]-=1;while(t.limbs[r>>5]===0)r+=32;while((t.limbs[r>>5]>>(r&31)&1)===0)r++;t=t.slice(r);var n=new Modulus(this),i=this.subtract(BigNumber.ONE),s=BigNumber.fromConfig(this),a=this.limbs.length-1;while(s.limbs[a]===0)a--;while(--e>=0){getRandomValues(s.limbs);if(s.limbs[0]<2)s.limbs[0]+=2;while(s.compare(i)>=0)s.limbs[a]>>>=1;var o=n.power(s,t);if(o.compare(BigNumber.ONE)===0)continue;if(o.compare(i)===0)continue;var f=r;while(--f>0){o=o.square().divide(n).remainder;if(o.compare(BigNumber.ONE)===0)return false;if(o.compare(i)===0)break}if(f===0)return false}return true}isProbablePrime(e=80){var t=this.limbs;var r=0;if((t[0]&1)===0)return false;if(e<=1)return true;var n=0,i=0,s=0;for(r=0;r<t.length;r++){var a=t[r];while(a){n+=a&3;a>>>=2}var o=t[r];while(o){i+=o&3;o>>>=2;i-=o&3;o>>>=2}var f=t[r];while(f){s+=f&15;f>>>=4;s-=f&15;f>>>=4}}if(!(n%3)||!(i%5)||!(s%17))return false;if(e<=2)return true;return this.isMillerRabinProbablePrime(e>>>1)}}BigNumber.extGCD=BigNumber_extGCD;BigNumber.ZERO=BigNumber.fromNumber(0);BigNumber.ONE=BigNumber.fromNumber(1);class Modulus extends BigNumber{constructor(e){super();this.limbs=e.limbs;this.bitLength=e.bitLength;this.sign=e.sign;if(this.valueOf()<1)throw new RangeError;if(this.bitLength<=32)return;let t;if(this.limbs[0]&1){const e=(this.bitLength+31&-32)+1;const r=new Uint32Array(e+31>>5);r[r.length-1]=1;t=new BigNumber;t.sign=1;t.bitLength=e;t.limbs=r;const n=Number_extGCD(4294967296,this.limbs[0]).y;this.coefficient=n<0?-n:4294967296-n}else{return}this.comodulus=t;this.comodulusRemainder=t.divide(this).remainder;this.comodulusRemainderSquare=t.square().divide(this).remainder}reduce(e){if(e.bitLength<=32&&this.bitLength<=32)return BigNumber.fromNumber(e.valueOf()%this.valueOf());if(e.compare(this)<0)return e;return e.divide(this).remainder}inverse(e){e=this.reduce(e);const t=BigNumber_extGCD(this,e);if(t.gcd.valueOf()!==1)throw new Error("GCD is not 1");if(t.y.sign<0)return t.y.add(this).clamp(this.bitLength);return t.y}power(e,t){let r=0;for(let e=0;e<t.limbs.length;e++){let n=t.limbs[e];while(n){if(n&1)r++;n>>>=1}}let n=8;if(t.bitLength<=4536)n=7;if(t.bitLength<=1736)n=6;if(t.bitLength<=630)n=5;if(t.bitLength<=210)n=4;if(t.bitLength<=60)n=3;if(t.bitLength<=12)n=2;if(r<=1<<n-1)n=1;e=Modulus._Montgomery_reduce(this.reduce(e).multiply(this.comodulusRemainderSquare),this);const i=Modulus._Montgomery_reduce(e.square(),this),s=new Array(1<<n-1);s[0]=e;s[1]=Modulus._Montgomery_reduce(e.multiply(i),this);for(let e=2;e<1<<n-1;e++){s[e]=Modulus._Montgomery_reduce(s[e-1].multiply(i),this)}const a=this.comodulusRemainder;let o=a;for(let e=t.limbs.length-1;e>=0;e--){let r=t.limbs[e];for(let e=32;e>0;){if(r&2147483648){let t=r>>>32-n,i=n;while((t&1)===0){t>>>=1;i--}var f=s[t>>>1];while(t){t>>>=1;if(o!==a)o=Modulus._Montgomery_reduce(o.square(),this)}o=o!==a?Modulus._Montgomery_reduce(o.multiply(f),this):f;r<<=i,e-=i}else{if(o!==a)o=Modulus._Montgomery_reduce(o.square(),this);r<<=1,e--}}}return Modulus._Montgomery_reduce(o,this)}static _Montgomery_reduce(e,t){const r=e.limbs;const n=r.length;const i=t.limbs;const s=i.length;const a=t.coefficient;_bigint_asm.sreset();const o=_bigint_asm.salloc(n<<2),f=_bigint_asm.salloc(s<<2),c=_bigint_asm.salloc(s<<2);_bigint_asm.z(c-o+(s<<2),0,o);_bigint_heap.set(r,o>>2);_bigint_heap.set(i,f>>2);_bigint_asm.mredc(o,n<<2,f,s<<2,a,c);const u=new BigNumber;u.limbs=new Uint32Array(_bigint_heap.subarray(c>>2,(c>>2)+s));u.bitLength=t.bitLength;u.sign=1;return u}}var sha1_asm=function(e,t,r){"use asm";var n=0,i=0,s=0,a=0,o=0,f=0,c=0;var u=0,l=0,h=0,d=0,p=0,y=0,m=0,g=0,b=0,A=0;var w=new e.Uint8Array(r);function E(e,t,r,f,c,u,l,h,d,p,y,m,g,b,A,w){e=e|0;t=t|0;r=r|0;f=f|0;c=c|0;u=u|0;l=l|0;h=h|0;d=d|0;p=p|0;y=y|0;m=m|0;g=g|0;b=b|0;A=A|0;w=w|0;var E=0,v=0,_=0,S=0,$=0,T=0,I=0,C=0,P=0,R=0,N=0,k=0,O=0,x=0,B=0,D=0,M=0,U=0,L=0,F=0,H=0,V=0,G=0,j=0,K=0,Y=0,q=0,z=0,X=0,Q=0,W=0,J=0,Z=0,ee=0,te=0,re=0,ne=0,ie=0,se=0,ae=0,oe=0,fe=0,ce=0,ue=0,le=0,he=0,de=0,pe=0,ye=0,me=0,ge=0,be=0,Ae=0,we=0,Ee=0,ve=0,_e=0,Se=0,$e=0,Te=0,Ie=0,Ce=0,Pe=0,Re=0,Ne=0,ke=0,Oe=0,xe=0,Be=0,De=0,Me=0;E=n;v=i;_=s;S=a;$=o;I=e+(E<<5|E>>>27)+$+(v&_|~v&S)+0x5a827999|0;$=S;S=_;_=v<<30|v>>>2;v=E;E=I;I=t+(E<<5|E>>>27)+$+(v&_|~v&S)+0x5a827999|0;$=S;S=_;_=v<<30|v>>>2;v=E;E=I;I=r+(E<<5|E>>>27)+$+(v&_|~v&S)+0x5a827999|0;$=S;S=_;_=v<<30|v>>>2;v=E;E=I;I=f+(E<<5|E>>>27)+$+(v&_|~v&S)+0x5a827999|0;$=S;S=_;_=v<<30|v>>>2;v=E;E=I;I=c+(E<<5|E>>>27)+$+(v&_|~v&S)+0x5a827999|0;$=S;S=_;_=v<<30|v>>>2;v=E;E=I;I=u+(E<<5|E>>>27)+$+(v&_|~v&S)+0x5a827999|0;$=S;S=_;_=v<<30|v>>>2;v=E;E=I;I=l+(E<<5|E>>>27)+$+(v&_|~v&S)+0x5a827999|0;$=S;S=_;_=v<<30|v>>>2;v=E;E=I;I=h+(E<<5|E>>>27)+$+(v&_|~v&S)+0x5a827999|0;$=S;S=_;_=v<<30|v>>>2;v=E;E=I;I=d+(E<<5|E>>>27)+$+(v&_|~v&S)+0x5a827999|0;$=S;S=_;_=v<<30|v>>>2;v=E;E=I;I=p+(E<<5|E>>>27)+$+(v&_|~v&S)+0x5a827999|0;$=S;S=_;_=v<<30|v>>>2;v=E;E=I;I=y+(E<<5|E>>>27)+$+(v&_|~v&S)+0x5a827999|0;$=S;S=_;_=v<<30|v>>>2;v=E;E=I;I=m+(E<<5|E>>>27)+$+(v&_|~v&S)+0x5a827999|0;$=S;S=_;_=v<<30|v>>>2;v=E;E=I;I=g+(E<<5|E>>>27)+$+(v&_|~v&S)+0x5a827999|0;$=S;S=_;_=v<<30|v>>>2;v=E;E=I;I=b+(E<<5|E>>>27)+$+(v&_|~v&S)+0x5a827999|0;$=S;S=_;_=v<<30|v>>>2;v=E;E=I;I=A+(E<<5|E>>>27)+$+(v&_|~v&S)+0x5a827999|0;$=S;S=_;_=v<<30|v>>>2;v=E;E=I;I=w+(E<<5|E>>>27)+$+(v&_|~v&S)+0x5a827999|0;$=S;S=_;_=v<<30|v>>>2;v=E;E=I;T=b^d^r^e;C=T<<1|T>>>31;I=C+(E<<5|E>>>27)+$+(v&_|~v&S)+0x5a827999|0;$=S;S=_;_=v<<30|v>>>2;v=E;E=I;T=A^p^f^t;P=T<<1|T>>>31;I=P+(E<<5|E>>>27)+$+(v&_|~v&S)+0x5a827999|0;$=S;S=_;_=v<<30|v>>>2;v=E;E=I;T=w^y^c^r;R=T<<1|T>>>31;I=R+(E<<5|E>>>27)+$+(v&_|~v&S)+0x5a827999|0;$=S;S=_;_=v<<30|v>>>2;v=E;E=I;T=C^m^u^f;N=T<<1|T>>>31;I=N+(E<<5|E>>>27)+$+(v&_|~v&S)+0x5a827999|0;$=S;S=_;_=v<<30|v>>>2;v=E;E=I;T=P^g^l^c;k=T<<1|T>>>31;I=k+(E<<5|E>>>27)+$+(v^_^S)+0x6ed9eba1|0;$=S;S=_;_=v<<30|v>>>2;v=E;E=I;T=R^b^h^u;O=T<<1|T>>>31;I=O+(E<<5|E>>>27)+$+(v^_^S)+0x6ed9eba1|0;$=S;S=_;_=v<<30|v>>>2;v=E;E=I;T=N^A^d^l;x=T<<1|T>>>31;I=x+(E<<5|E>>>27)+$+(v^_^S)+0x6ed9eba1|0;$=S;S=_;_=v<<30|v>>>2;v=E;E=I;T=k^w^p^h;B=T<<1|T>>>31;I=B+(E<<5|E>>>27)+$+(v^_^S)+0x6ed9eba1|0;$=S;S=_;_=v<<30|v>>>2;v=E;E=I;T=O^C^y^d;D=T<<1|T>>>31;I=D+(E<<5|E>>>27)+$+(v^_^S)+0x6ed9eba1|0;$=S;S=_;_=v<<30|v>>>2;v=E;E=I;T=x^P^m^p;M=T<<1|T>>>31;I=M+(E<<5|E>>>27)+$+(v^_^S)+0x6ed9eba1|0;$=S;S=_;_=v<<30|v>>>2;v=E;E=I;T=B^R^g^y;U=T<<1|T>>>31;I=U+(E<<5|E>>>27)+$+(v^_^S)+0x6ed9eba1|0;$=S;S=_;_=v<<30|v>>>2;v=E;E=I;T=D^N^b^m;L=T<<1|T>>>31;I=L+(E<<5|E>>>27)+$+(v^_^S)+0x6ed9eba1|0;$=S;S=_;_=v<<30|v>>>2;v=E;E=I;T=M^k^A^g;F=T<<1|T>>>31;I=F+(E<<5|E>>>27)+$+(v^_^S)+0x6ed9eba1|0;$=S;S=_;_=v<<30|v>>>2;v=E;E=I;T=U^O^w^b;H=T<<1|T>>>31;I=H+(E<<5|E>>>27)+$+(v^_^S)+0x6ed9eba1|0;$=S;S=_;_=v<<30|v>>>2;v=E;E=I;T=L^x^C^A;V=T<<1|T>>>31;I=V+(E<<5|E>>>27)+$+(v^_^S)+0x6ed9eba1|0;$=S;S=_;_=v<<30|v>>>2;v=E;E=I;T=F^B^P^w;G=T<<1|T>>>31;I=G+(E<<5|E>>>27)+$+(v^_^S)+0x6ed9eba1|0;$=S;S=_;_=v<<30|v>>>2;v=E;E=I;T=H^D^R^C;j=T<<1|T>>>31;I=j+(E<<5|E>>>27)+$+(v^_^S)+0x6ed9eba1|0;$=S;S=_;_=v<<30|v>>>2;v=E;E=I;T=V^M^N^P;K=T<<1|T>>>31;I=K+(E<<5|E>>>27)+$+(v^_^S)+0x6ed9eba1|0;$=S;S=_;_=v<<30|v>>>2;v=E;E=I;T=G^U^k^R;Y=T<<1|T>>>31;I=Y+(E<<5|E>>>27)+$+(v^_^S)+0x6ed9eba1|0;$=S;S=_;_=v<<30|v>>>2;v=E;E=I;T=j^L^O^N;q=T<<1|T>>>31;I=q+(E<<5|E>>>27)+$+(v^_^S)+0x6ed9eba1|0;$=S;S=_;_=v<<30|v>>>2;v=E;E=I;T=K^F^x^k;z=T<<1|T>>>31;I=z+(E<<5|E>>>27)+$+(v^_^S)+0x6ed9eba1|0;$=S;S=_;_=v<<30|v>>>2;v=E;E=I;T=Y^H^B^O;X=T<<1|T>>>31;I=X+(E<<5|E>>>27)+$+(v^_^S)+0x6ed9eba1|0;$=S;S=_;_=v<<30|v>>>2;v=E;E=I;T=q^V^D^x;Q=T<<1|T>>>31;I=Q+(E<<5|E>>>27)+$+(v^_^S)+0x6ed9eba1|0;$=S;S=_;_=v<<30|v>>>2;v=E;E=I;T=z^G^M^B;W=T<<1|T>>>31;I=W+(E<<5|E>>>27)+$+(v^_^S)+0x6ed9eba1|0;$=S;S=_;_=v<<30|v>>>2;v=E;E=I;T=X^j^U^D;J=T<<1|T>>>31;I=J+(E<<5|E>>>27)+$+(v&_|v&S|_&S)-0x70e44324|0;$=S;S=_;_=v<<30|v>>>2;v=E;E=I;T=Q^K^L^M;Z=T<<1|T>>>31;I=Z+(E<<5|E>>>27)+$+(v&_|v&S|_&S)-0x70e44324|0;$=S;S=_;_=v<<30|v>>>2;v=E;E=I;T=W^Y^F^U;ee=T<<1|T>>>31;I=ee+(E<<5|E>>>27)+$+(v&_|v&S|_&S)-0x70e44324|0;$=S;S=_;_=v<<30|v>>>2;v=E;E=I;T=J^q^H^L;te=T<<1|T>>>31;I=te+(E<<5|E>>>27)+$+(v&_|v&S|_&S)-0x70e44324|0;$=S;S=_;_=v<<30|v>>>2;v=E;E=I;T=Z^z^V^F;re=T<<1|T>>>31;I=re+(E<<5|E>>>27)+$+(v&_|v&S|_&S)-0x70e44324|0;$=S;S=_;_=v<<30|v>>>2;v=E;E=I;T=ee^X^G^H;ne=T<<1|T>>>31;I=ne+(E<<5|E>>>27)+$+(v&_|v&S|_&S)-0x70e44324|0;$=S;S=_;_=v<<30|v>>>2;v=E;E=I;T=te^Q^j^V;ie=T<<1|T>>>31;I=ie+(E<<5|E>>>27)+$+(v&_|v&S|_&S)-0x70e44324|0;$=S;S=_;_=v<<30|v>>>2;v=E;E=I;T=re^W^K^G;se=T<<1|T>>>31;I=se+(E<<5|E>>>27)+$+(v&_|v&S|_&S)-0x70e44324|0;$=S;S=_;_=v<<30|v>>>2;v=E;E=I;T=ne^J^Y^j;ae=T<<1|T>>>31;I=ae+(E<<5|E>>>27)+$+(v&_|v&S|_&S)-0x70e44324|0;$=S;S=_;_=v<<30|v>>>2;v=E;E=I;T=ie^Z^q^K;oe=T<<1|T>>>31;I=oe+(E<<5|E>>>27)+$+(v&_|v&S|_&S)-0x70e44324|0;$=S;S=_;_=v<<30|v>>>2;v=E;E=I;T=se^ee^z^Y;fe=T<<1|T>>>31;I=fe+(E<<5|E>>>27)+$+(v&_|v&S|_&S)-0x70e44324|0;$=S;S=_;_=v<<30|v>>>2;v=E;E=I;T=ae^te^X^q;ce=T<<1|T>>>31;I=ce+(E<<5|E>>>27)+$+(v&_|v&S|_&S)-0x70e44324|0;$=S;S=_;_=v<<30|v>>>2;v=E;E=I;T=oe^re^Q^z;ue=T<<1|T>>>31;I=ue+(E<<5|E>>>27)+$+(v&_|v&S|_&S)-0x70e44324|0;$=S;S=_;_=v<<30|v>>>2;v=E;E=I;T=fe^ne^W^X;le=T<<1|T>>>31;I=le+(E<<5|E>>>27)+$+(v&_|v&S|_&S)-0x70e44324|0;$=S;S=_;_=v<<30|v>>>2;v=E;E=I;T=ce^ie^J^Q;he=T<<1|T>>>31;I=he+(E<<5|E>>>27)+$+(v&_|v&S|_&S)-0x70e44324|0;$=S;S=_;_=v<<30|v>>>2;v=E;E=I;T=ue^se^Z^W;de=T<<1|T>>>31;I=de+(E<<5|E>>>27)+$+(v&_|v&S|_&S)-0x70e44324|0;$=S;S=_;_=v<<30|v>>>2;v=E;E=I;T=le^ae^ee^J;pe=T<<1|T>>>31;I=pe+(E<<5|E>>>27)+$+(v&_|v&S|_&S)-0x70e44324|0;$=S;S=_;_=v<<30|v>>>2;v=E;E=I;T=he^oe^te^Z;ye=T<<1|T>>>31;I=ye+(E<<5|E>>>27)+$+(v&_|v&S|_&S)-0x70e44324|0;$=S;S=_;_=v<<30|v>>>2;v=E;E=I;T=de^fe^re^ee;me=T<<1|T>>>31;I=me+(E<<5|E>>>27)+$+(v&_|v&S|_&S)-0x70e44324|0;$=S;S=_;_=v<<30|v>>>2;v=E;E=I;T=pe^ce^ne^te;ge=T<<1|T>>>31;I=ge+(E<<5|E>>>27)+$+(v&_|v&S|_&S)-0x70e44324|0;$=S;S=_;_=v<<30|v>>>2;v=E;E=I;T=ye^ue^ie^re;be=T<<1|T>>>31;I=be+(E<<5|E>>>27)+$+(v^_^S)-0x359d3e2a|0;$=S;S=_;_=v<<30|v>>>2;v=E;E=I;T=me^le^se^ne;Ae=T<<1|T>>>31;I=Ae+(E<<5|E>>>27)+$+(v^_^S)-0x359d3e2a|0;$=S;S=_;_=v<<30|v>>>2;v=E;E=I;T=ge^he^ae^ie;we=T<<1|T>>>31;I=we+(E<<5|E>>>27)+$+(v^_^S)-0x359d3e2a|0;$=S;S=_;_=v<<30|v>>>2;v=E;E=I;T=be^de^oe^se;Ee=T<<1|T>>>31;I=Ee+(E<<5|E>>>27)+$+(v^_^S)-0x359d3e2a|0;$=S;S=_;_=v<<30|v>>>2;v=E;E=I;T=Ae^pe^fe^ae;ve=T<<1|T>>>31;I=ve+(E<<5|E>>>27)+$+(v^_^S)-0x359d3e2a|0;$=S;S=_;_=v<<30|v>>>2;v=E;E=I;T=we^ye^ce^oe;_e=T<<1|T>>>31;I=_e+(E<<5|E>>>27)+$+(v^_^S)-0x359d3e2a|0;$=S;S=_;_=v<<30|v>>>2;v=E;E=I;T=Ee^me^ue^fe;Se=T<<1|T>>>31;I=Se+(E<<5|E>>>27)+$+(v^_^S)-0x359d3e2a|0;$=S;S=_;_=v<<30|v>>>2;v=E;E=I;T=ve^ge^le^ce;$e=T<<1|T>>>31;I=$e+(E<<5|E>>>27)+$+(v^_^S)-0x359d3e2a|0;$=S;S=_;_=v<<30|v>>>2;v=E;E=I;T=_e^be^he^ue;Te=T<<1|T>>>31;I=Te+(E<<5|E>>>27)+$+(v^_^S)-0x359d3e2a|0;$=S;S=_;_=v<<30|v>>>2;v=E;E=I;T=Se^Ae^de^le;Ie=T<<1|T>>>31;I=Ie+(E<<5|E>>>27)+$+(v^_^S)-0x359d3e2a|0;$=S;S=_;_=v<<30|v>>>2;v=E;E=I;T=$e^we^pe^he;Ce=T<<1|T>>>31;I=Ce+(E<<5|E>>>27)+$+(v^_^S)-0x359d3e2a|0;$=S;S=_;_=v<<30|v>>>2;v=E;E=I;T=Te^Ee^ye^de;Pe=T<<1|T>>>31;I=Pe+(E<<5|E>>>27)+$+(v^_^S)-0x359d3e2a|0;$=S;S=_;_=v<<30|v>>>2;v=E;E=I;T=Ie^ve^me^pe;Re=T<<1|T>>>31;I=Re+(E<<5|E>>>27)+$+(v^_^S)-0x359d3e2a|0;$=S;S=_;_=v<<30|v>>>2;v=E;E=I;T=Ce^_e^ge^ye;Ne=T<<1|T>>>31;I=Ne+(E<<5|E>>>27)+$+(v^_^S)-0x359d3e2a|0;$=S;S=_;_=v<<30|v>>>2;v=E;E=I;T=Pe^Se^be^me;ke=T<<1|T>>>31;I=ke+(E<<5|E>>>27)+$+(v^_^S)-0x359d3e2a|0;$=S;S=_;_=v<<30|v>>>2;v=E;E=I;T=Re^$e^Ae^ge;Oe=T<<1|T>>>31;I=Oe+(E<<5|E>>>27)+$+(v^_^S)-0x359d3e2a|0;$=S;S=_;_=v<<30|v>>>2;v=E;E=I;T=Ne^Te^we^be;xe=T<<1|T>>>31;I=xe+(E<<5|E>>>27)+$+(v^_^S)-0x359d3e2a|0;$=S;S=_;_=v<<30|v>>>2;v=E;E=I;T=ke^Ie^Ee^Ae;Be=T<<1|T>>>31;I=Be+(E<<5|E>>>27)+$+(v^_^S)-0x359d3e2a|0;$=S;S=_;_=v<<30|v>>>2;v=E;E=I;T=Oe^Ce^ve^we;De=T<<1|T>>>31;I=De+(E<<5|E>>>27)+$+(v^_^S)-0x359d3e2a|0;$=S;S=_;_=v<<30|v>>>2;v=E;E=I;T=xe^Pe^_e^Ee;Me=T<<1|T>>>31;I=Me+(E<<5|E>>>27)+$+(v^_^S)-0x359d3e2a|0;$=S;S=_;_=v<<30|v>>>2;v=E;E=I;n=n+E|0;i=i+v|0;s=s+_|0;a=a+S|0;o=o+$|0}function v(e){e=e|0;E(w[e|0]<<24|w[e|1]<<16|w[e|2]<<8|w[e|3],w[e|4]<<24|w[e|5]<<16|w[e|6]<<8|w[e|7],w[e|8]<<24|w[e|9]<<16|w[e|10]<<8|w[e|11],w[e|12]<<24|w[e|13]<<16|w[e|14]<<8|w[e|15],w[e|16]<<24|w[e|17]<<16|w[e|18]<<8|w[e|19],w[e|20]<<24|w[e|21]<<16|w[e|22]<<8|w[e|23],w[e|24]<<24|w[e|25]<<16|w[e|26]<<8|w[e|27],w[e|28]<<24|w[e|29]<<16|w[e|30]<<8|w[e|31],w[e|32]<<24|w[e|33]<<16|w[e|34]<<8|w[e|35],w[e|36]<<24|w[e|37]<<16|w[e|38]<<8|w[e|39],w[e|40]<<24|w[e|41]<<16|w[e|42]<<8|w[e|43],w[e|44]<<24|w[e|45]<<16|w[e|46]<<8|w[e|47],w[e|48]<<24|w[e|49]<<16|w[e|50]<<8|w[e|51],w[e|52]<<24|w[e|53]<<16|w[e|54]<<8|w[e|55],w[e|56]<<24|w[e|57]<<16|w[e|58]<<8|w[e|59],w[e|60]<<24|w[e|61]<<16|w[e|62]<<8|w[e|63])}function _(e){e=e|0;w[e|0]=n>>>24;w[e|1]=n>>>16&255;w[e|2]=n>>>8&255;w[e|3]=n&255;w[e|4]=i>>>24;w[e|5]=i>>>16&255;w[e|6]=i>>>8&255;w[e|7]=i&255;w[e|8]=s>>>24;w[e|9]=s>>>16&255;w[e|10]=s>>>8&255;w[e|11]=s&255;w[e|12]=a>>>24;w[e|13]=a>>>16&255;w[e|14]=a>>>8&255;w[e|15]=a&255;w[e|16]=o>>>24;w[e|17]=o>>>16&255;w[e|18]=o>>>8&255;w[e|19]=o&255}function S(){n=0x67452301;i=0xefcdab89;s=0x98badcfe;a=0x10325476;o=0xc3d2e1f0;f=c=0}function $(e,t,r,u,l,h,d){e=e|0;t=t|0;r=r|0;u=u|0;l=l|0;h=h|0;d=d|0;n=e;i=t;s=r;a=u;o=l;f=h;c=d}function T(e,t){e=e|0;t=t|0;var r=0;if(e&63)return-1;while((t|0)>=64){v(e);e=e+64|0;t=t-64|0;r=r+64|0}f=f+r|0;if(f>>>0<r>>>0)c=c+1|0;return r|0}function I(e,t,r){e=e|0;t=t|0;r=r|0;var n=0,i=0;if(e&63)return-1;if(~r)if(r&31)return-1;if((t|0)>=64){n=T(e,t)|0;if((n|0)==-1)return-1;e=e+n|0;t=t-n|0}n=n+t|0;f=f+t|0;if(f>>>0<t>>>0)c=c+1|0;w[e|t]=0x80;if((t|0)>=56){for(i=t+1|0;(i|0)<64;i=i+1|0)w[e|i]=0x00;v(e);t=0;w[e|0]=0}for(i=t+1|0;(i|0)<59;i=i+1|0)w[e|i]=0;w[e|56]=c>>>21&255;w[e|57]=c>>>13&255;w[e|58]=c>>>5&255;w[e|59]=c<<3&255|f>>>29;w[e|60]=f>>>21&255;w[e|61]=f>>>13&255;w[e|62]=f>>>5&255;w[e|63]=f<<3&255;v(e);if(~r)_(r);return n|0}function C(){n=u;i=l;s=h;a=d;o=p;f=64;c=0}function P(){n=y;i=m;s=g;a=b;o=A;f=64;c=0}function R(e,t,r,w,v,_,$,T,I,C,P,R,N,k,O,x){e=e|0;t=t|0;r=r|0;w=w|0;v=v|0;_=_|0;$=$|0;T=T|0;I=I|0;C=C|0;P=P|0;R=R|0;N=N|0;k=k|0;O=O|0;x=x|0;S();E(e^0x5c5c5c5c,t^0x5c5c5c5c,r^0x5c5c5c5c,w^0x5c5c5c5c,v^0x5c5c5c5c,_^0x5c5c5c5c,$^0x5c5c5c5c,T^0x5c5c5c5c,I^0x5c5c5c5c,C^0x5c5c5c5c,P^0x5c5c5c5c,R^0x5c5c5c5c,N^0x5c5c5c5c,k^0x5c5c5c5c,O^0x5c5c5c5c,x^0x5c5c5c5c);y=n;m=i;g=s;b=a;A=o;S();E(e^0x36363636,t^0x36363636,r^0x36363636,w^0x36363636,v^0x36363636,_^0x36363636,$^0x36363636,T^0x36363636,I^0x36363636,C^0x36363636,P^0x36363636,R^0x36363636,N^0x36363636,k^0x36363636,O^0x36363636,x^0x36363636);u=n;l=i;h=s;d=a;p=o;f=64;c=0}function N(e,t,r){e=e|0;t=t|0;r=r|0;var f=0,c=0,u=0,l=0,h=0,d=0;if(e&63)return-1;if(~r)if(r&31)return-1;d=I(e,t,-1)|0;f=n,c=i,u=s,l=a,h=o;P();E(f,c,u,l,h,0x80000000,0,0,0,0,0,0,0,0,0,672);if(~r)_(r);return d|0}function k(e,t,r,f,c){e=e|0;t=t|0;r=r|0;f=f|0;c=c|0;var u=0,l=0,h=0,d=0,p=0,y=0,m=0,g=0,b=0,A=0;if(e&63)return-1;if(~c)if(c&31)return-1;w[e+t|0]=r>>>24;w[e+t+1|0]=r>>>16&255;w[e+t+2|0]=r>>>8&255;w[e+t+3|0]=r&255;N(e,t+4|0,-1)|0;u=y=n,l=m=i,h=g=s,d=b=a,p=A=o;f=f-1|0;while((f|0)>0){C();E(y,m,g,b,A,0x80000000,0,0,0,0,0,0,0,0,0,672);y=n,m=i,g=s,b=a,A=o;P();E(y,m,g,b,A,0x80000000,0,0,0,0,0,0,0,0,0,672);y=n,m=i,g=s,b=a,A=o;u=u^n;l=l^i;h=h^s;d=d^a;p=p^o;f=f-1|0}n=u;i=l;s=h;a=d;o=p;if(~c)_(c);return 0}return{reset:S,init:$,process:T,finish:I,hmac_reset:C,hmac_init:R,hmac_finish:N,pbkdf2_generate_block:k}};class Hash{constructor(){this.pos=0;this.len=0}reset(){this.result=null;this.pos=0;this.len=0;this.asm.reset();return this}process(e){if(this.result!==null)throw new IllegalStateError("state must be reset before processing new data");let t=this.asm;let r=this.heap;let n=this.pos;let i=this.len;let s=0;let a=e.length;let o=0;while(a>0){o=_heap_write(r,n+i,e,s,a);i+=o;s+=o;a-=o;o=t.process(n,i);n+=o;i-=o;if(!i)n=0}this.pos=n;this.len=i;return this}finish(){if(this.result!==null)throw new IllegalStateError("state must be reset before processing new data");this.asm.finish(this.pos,this.len,0);this.result=new Uint8Array(this.HASH_SIZE);this.result.set(this.heap.subarray(0,this.HASH_SIZE));this.pos=0;this.len=0;return this}}const _sha1_block_size=64;const _sha1_hash_size=20;class Sha1 extends Hash{constructor(){super();this.NAME="sha1";this.BLOCK_SIZE=_sha1_block_size;this.HASH_SIZE=_sha1_hash_size;this.heap=_heap_init();this.asm=sha1_asm({Uint8Array},null,this.heap.buffer);this.reset()}}Sha1.NAME="sha1";var sha256_asm=function(e,t,r){"use asm";var n=0,i=0,s=0,a=0,o=0,f=0,c=0,u=0,l=0,h=0;var d=0,p=0,y=0,m=0,g=0,b=0,A=0,w=0,E=0,v=0,_=0,S=0,$=0,T=0,I=0,C=0;var P=new e.Uint8Array(r);function R(e,t,r,l,h,d,p,y,m,g,b,A,w,E,v,_){e=e|0;t=t|0;r=r|0;l=l|0;h=h|0;d=d|0;p=p|0;y=y|0;m=m|0;g=g|0;b=b|0;A=A|0;w=w|0;E=E|0;v=v|0;_=_|0;var S=0,$=0,T=0,I=0,C=0,P=0,R=0,N=0;S=n;$=i;T=s;I=a;C=o;P=f;R=c;N=u;N=e+N+(C>>>6^C>>>11^C>>>25^C<<26^C<<21^C<<7)+(R^C&(P^R))+0x428a2f98|0;I=I+N|0;N=N+(S&$^T&(S^$))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;R=t+R+(I>>>6^I>>>11^I>>>25^I<<26^I<<21^I<<7)+(P^I&(C^P))+0x71374491|0;T=T+R|0;R=R+(N&S^$&(N^S))+(N>>>2^N>>>13^N>>>22^N<<30^N<<19^N<<10)|0;P=r+P+(T>>>6^T>>>11^T>>>25^T<<26^T<<21^T<<7)+(C^T&(I^C))+0xb5c0fbcf|0;$=$+P|0;P=P+(R&N^S&(R^N))+(R>>>2^R>>>13^R>>>22^R<<30^R<<19^R<<10)|0;C=l+C+($>>>6^$>>>11^$>>>25^$<<26^$<<21^$<<7)+(I^$&(T^I))+0xe9b5dba5|0;S=S+C|0;C=C+(P&R^N&(P^R))+(P>>>2^P>>>13^P>>>22^P<<30^P<<19^P<<10)|0;I=h+I+(S>>>6^S>>>11^S>>>25^S<<26^S<<21^S<<7)+(T^S&($^T))+0x3956c25b|0;N=N+I|0;I=I+(C&P^R&(C^P))+(C>>>2^C>>>13^C>>>22^C<<30^C<<19^C<<10)|0;T=d+T+(N>>>6^N>>>11^N>>>25^N<<26^N<<21^N<<7)+($^N&(S^$))+0x59f111f1|0;R=R+T|0;T=T+(I&C^P&(I^C))+(I>>>2^I>>>13^I>>>22^I<<30^I<<19^I<<10)|0;$=p+$+(R>>>6^R>>>11^R>>>25^R<<26^R<<21^R<<7)+(S^R&(N^S))+0x923f82a4|0;P=P+$|0;$=$+(T&I^C&(T^I))+(T>>>2^T>>>13^T>>>22^T<<30^T<<19^T<<10)|0;S=y+S+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(N^P&(R^N))+0xab1c5ed5|0;C=C+S|0;S=S+($&T^I&($^T))+($>>>2^$>>>13^$>>>22^$<<30^$<<19^$<<10)|0;N=m+N+(C>>>6^C>>>11^C>>>25^C<<26^C<<21^C<<7)+(R^C&(P^R))+0xd807aa98|0;I=I+N|0;N=N+(S&$^T&(S^$))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;R=g+R+(I>>>6^I>>>11^I>>>25^I<<26^I<<21^I<<7)+(P^I&(C^P))+0x12835b01|0;T=T+R|0;R=R+(N&S^$&(N^S))+(N>>>2^N>>>13^N>>>22^N<<30^N<<19^N<<10)|0;P=b+P+(T>>>6^T>>>11^T>>>25^T<<26^T<<21^T<<7)+(C^T&(I^C))+0x243185be|0;$=$+P|0;P=P+(R&N^S&(R^N))+(R>>>2^R>>>13^R>>>22^R<<30^R<<19^R<<10)|0;C=A+C+($>>>6^$>>>11^$>>>25^$<<26^$<<21^$<<7)+(I^$&(T^I))+0x550c7dc3|0;S=S+C|0;C=C+(P&R^N&(P^R))+(P>>>2^P>>>13^P>>>22^P<<30^P<<19^P<<10)|0;I=w+I+(S>>>6^S>>>11^S>>>25^S<<26^S<<21^S<<7)+(T^S&($^T))+0x72be5d74|0;N=N+I|0;I=I+(C&P^R&(C^P))+(C>>>2^C>>>13^C>>>22^C<<30^C<<19^C<<10)|0;T=E+T+(N>>>6^N>>>11^N>>>25^N<<26^N<<21^N<<7)+($^N&(S^$))+0x80deb1fe|0;R=R+T|0;T=T+(I&C^P&(I^C))+(I>>>2^I>>>13^I>>>22^I<<30^I<<19^I<<10)|0;$=v+$+(R>>>6^R>>>11^R>>>25^R<<26^R<<21^R<<7)+(S^R&(N^S))+0x9bdc06a7|0;P=P+$|0;$=$+(T&I^C&(T^I))+(T>>>2^T>>>13^T>>>22^T<<30^T<<19^T<<10)|0;S=_+S+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(N^P&(R^N))+0xc19bf174|0;C=C+S|0;S=S+($&T^I&($^T))+($>>>2^$>>>13^$>>>22^$<<30^$<<19^$<<10)|0;e=(t>>>7^t>>>18^t>>>3^t<<25^t<<14)+(v>>>17^v>>>19^v>>>10^v<<15^v<<13)+e+g|0;N=e+N+(C>>>6^C>>>11^C>>>25^C<<26^C<<21^C<<7)+(R^C&(P^R))+0xe49b69c1|0;I=I+N|0;N=N+(S&$^T&(S^$))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;t=(r>>>7^r>>>18^r>>>3^r<<25^r<<14)+(_>>>17^_>>>19^_>>>10^_<<15^_<<13)+t+b|0;R=t+R+(I>>>6^I>>>11^I>>>25^I<<26^I<<21^I<<7)+(P^I&(C^P))+0xefbe4786|0;T=T+R|0;R=R+(N&S^$&(N^S))+(N>>>2^N>>>13^N>>>22^N<<30^N<<19^N<<10)|0;r=(l>>>7^l>>>18^l>>>3^l<<25^l<<14)+(e>>>17^e>>>19^e>>>10^e<<15^e<<13)+r+A|0;P=r+P+(T>>>6^T>>>11^T>>>25^T<<26^T<<21^T<<7)+(C^T&(I^C))+0x0fc19dc6|0;$=$+P|0;P=P+(R&N^S&(R^N))+(R>>>2^R>>>13^R>>>22^R<<30^R<<19^R<<10)|0;l=(h>>>7^h>>>18^h>>>3^h<<25^h<<14)+(t>>>17^t>>>19^t>>>10^t<<15^t<<13)+l+w|0;C=l+C+($>>>6^$>>>11^$>>>25^$<<26^$<<21^$<<7)+(I^$&(T^I))+0x240ca1cc|0;S=S+C|0;C=C+(P&R^N&(P^R))+(P>>>2^P>>>13^P>>>22^P<<30^P<<19^P<<10)|0;h=(d>>>7^d>>>18^d>>>3^d<<25^d<<14)+(r>>>17^r>>>19^r>>>10^r<<15^r<<13)+h+E|0;I=h+I+(S>>>6^S>>>11^S>>>25^S<<26^S<<21^S<<7)+(T^S&($^T))+0x2de92c6f|0;N=N+I|0;I=I+(C&P^R&(C^P))+(C>>>2^C>>>13^C>>>22^C<<30^C<<19^C<<10)|0;d=(p>>>7^p>>>18^p>>>3^p<<25^p<<14)+(l>>>17^l>>>19^l>>>10^l<<15^l<<13)+d+v|0;T=d+T+(N>>>6^N>>>11^N>>>25^N<<26^N<<21^N<<7)+($^N&(S^$))+0x4a7484aa|0;R=R+T|0;T=T+(I&C^P&(I^C))+(I>>>2^I>>>13^I>>>22^I<<30^I<<19^I<<10)|0;p=(y>>>7^y>>>18^y>>>3^y<<25^y<<14)+(h>>>17^h>>>19^h>>>10^h<<15^h<<13)+p+_|0;$=p+$+(R>>>6^R>>>11^R>>>25^R<<26^R<<21^R<<7)+(S^R&(N^S))+0x5cb0a9dc|0;P=P+$|0;$=$+(T&I^C&(T^I))+(T>>>2^T>>>13^T>>>22^T<<30^T<<19^T<<10)|0;y=(m>>>7^m>>>18^m>>>3^m<<25^m<<14)+(d>>>17^d>>>19^d>>>10^d<<15^d<<13)+y+e|0;S=y+S+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(N^P&(R^N))+0x76f988da|0;C=C+S|0;S=S+($&T^I&($^T))+($>>>2^$>>>13^$>>>22^$<<30^$<<19^$<<10)|0;m=(g>>>7^g>>>18^g>>>3^g<<25^g<<14)+(p>>>17^p>>>19^p>>>10^p<<15^p<<13)+m+t|0;N=m+N+(C>>>6^C>>>11^C>>>25^C<<26^C<<21^C<<7)+(R^C&(P^R))+0x983e5152|0;I=I+N|0;N=N+(S&$^T&(S^$))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;g=(b>>>7^b>>>18^b>>>3^b<<25^b<<14)+(y>>>17^y>>>19^y>>>10^y<<15^y<<13)+g+r|0;R=g+R+(I>>>6^I>>>11^I>>>25^I<<26^I<<21^I<<7)+(P^I&(C^P))+0xa831c66d|0;T=T+R|0;R=R+(N&S^$&(N^S))+(N>>>2^N>>>13^N>>>22^N<<30^N<<19^N<<10)|0;b=(A>>>7^A>>>18^A>>>3^A<<25^A<<14)+(m>>>17^m>>>19^m>>>10^m<<15^m<<13)+b+l|0;P=b+P+(T>>>6^T>>>11^T>>>25^T<<26^T<<21^T<<7)+(C^T&(I^C))+0xb00327c8|0;$=$+P|0;P=P+(R&N^S&(R^N))+(R>>>2^R>>>13^R>>>22^R<<30^R<<19^R<<10)|0;A=(w>>>7^w>>>18^w>>>3^w<<25^w<<14)+(g>>>17^g>>>19^g>>>10^g<<15^g<<13)+A+h|0;C=A+C+($>>>6^$>>>11^$>>>25^$<<26^$<<21^$<<7)+(I^$&(T^I))+0xbf597fc7|0;S=S+C|0;C=C+(P&R^N&(P^R))+(P>>>2^P>>>13^P>>>22^P<<30^P<<19^P<<10)|0;w=(E>>>7^E>>>18^E>>>3^E<<25^E<<14)+(b>>>17^b>>>19^b>>>10^b<<15^b<<13)+w+d|0;I=w+I+(S>>>6^S>>>11^S>>>25^S<<26^S<<21^S<<7)+(T^S&($^T))+0xc6e00bf3|0;N=N+I|0;I=I+(C&P^R&(C^P))+(C>>>2^C>>>13^C>>>22^C<<30^C<<19^C<<10)|0;E=(v>>>7^v>>>18^v>>>3^v<<25^v<<14)+(A>>>17^A>>>19^A>>>10^A<<15^A<<13)+E+p|0;T=E+T+(N>>>6^N>>>11^N>>>25^N<<26^N<<21^N<<7)+($^N&(S^$))+0xd5a79147|0;R=R+T|0;T=T+(I&C^P&(I^C))+(I>>>2^I>>>13^I>>>22^I<<30^I<<19^I<<10)|0;v=(_>>>7^_>>>18^_>>>3^_<<25^_<<14)+(w>>>17^w>>>19^w>>>10^w<<15^w<<13)+v+y|0;$=v+$+(R>>>6^R>>>11^R>>>25^R<<26^R<<21^R<<7)+(S^R&(N^S))+0x06ca6351|0;P=P+$|0;$=$+(T&I^C&(T^I))+(T>>>2^T>>>13^T>>>22^T<<30^T<<19^T<<10)|0;_=(e>>>7^e>>>18^e>>>3^e<<25^e<<14)+(E>>>17^E>>>19^E>>>10^E<<15^E<<13)+_+m|0;S=_+S+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(N^P&(R^N))+0x14292967|0;C=C+S|0;S=S+($&T^I&($^T))+($>>>2^$>>>13^$>>>22^$<<30^$<<19^$<<10)|0;e=(t>>>7^t>>>18^t>>>3^t<<25^t<<14)+(v>>>17^v>>>19^v>>>10^v<<15^v<<13)+e+g|0;N=e+N+(C>>>6^C>>>11^C>>>25^C<<26^C<<21^C<<7)+(R^C&(P^R))+0x27b70a85|0;I=I+N|0;N=N+(S&$^T&(S^$))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;t=(r>>>7^r>>>18^r>>>3^r<<25^r<<14)+(_>>>17^_>>>19^_>>>10^_<<15^_<<13)+t+b|0;R=t+R+(I>>>6^I>>>11^I>>>25^I<<26^I<<21^I<<7)+(P^I&(C^P))+0x2e1b2138|0;T=T+R|0;R=R+(N&S^$&(N^S))+(N>>>2^N>>>13^N>>>22^N<<30^N<<19^N<<10)|0;r=(l>>>7^l>>>18^l>>>3^l<<25^l<<14)+(e>>>17^e>>>19^e>>>10^e<<15^e<<13)+r+A|0;P=r+P+(T>>>6^T>>>11^T>>>25^T<<26^T<<21^T<<7)+(C^T&(I^C))+0x4d2c6dfc|0;$=$+P|0;P=P+(R&N^S&(R^N))+(R>>>2^R>>>13^R>>>22^R<<30^R<<19^R<<10)|0;l=(h>>>7^h>>>18^h>>>3^h<<25^h<<14)+(t>>>17^t>>>19^t>>>10^t<<15^t<<13)+l+w|0;C=l+C+($>>>6^$>>>11^$>>>25^$<<26^$<<21^$<<7)+(I^$&(T^I))+0x53380d13|0;S=S+C|0;C=C+(P&R^N&(P^R))+(P>>>2^P>>>13^P>>>22^P<<30^P<<19^P<<10)|0;h=(d>>>7^d>>>18^d>>>3^d<<25^d<<14)+(r>>>17^r>>>19^r>>>10^r<<15^r<<13)+h+E|0;I=h+I+(S>>>6^S>>>11^S>>>25^S<<26^S<<21^S<<7)+(T^S&($^T))+0x650a7354|0;N=N+I|0;I=I+(C&P^R&(C^P))+(C>>>2^C>>>13^C>>>22^C<<30^C<<19^C<<10)|0;d=(p>>>7^p>>>18^p>>>3^p<<25^p<<14)+(l>>>17^l>>>19^l>>>10^l<<15^l<<13)+d+v|0;T=d+T+(N>>>6^N>>>11^N>>>25^N<<26^N<<21^N<<7)+($^N&(S^$))+0x766a0abb|0;R=R+T|0;T=T+(I&C^P&(I^C))+(I>>>2^I>>>13^I>>>22^I<<30^I<<19^I<<10)|0;p=(y>>>7^y>>>18^y>>>3^y<<25^y<<14)+(h>>>17^h>>>19^h>>>10^h<<15^h<<13)+p+_|0;$=p+$+(R>>>6^R>>>11^R>>>25^R<<26^R<<21^R<<7)+(S^R&(N^S))+0x81c2c92e|0;P=P+$|0;$=$+(T&I^C&(T^I))+(T>>>2^T>>>13^T>>>22^T<<30^T<<19^T<<10)|0;y=(m>>>7^m>>>18^m>>>3^m<<25^m<<14)+(d>>>17^d>>>19^d>>>10^d<<15^d<<13)+y+e|0;S=y+S+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(N^P&(R^N))+0x92722c85|0;C=C+S|0;S=S+($&T^I&($^T))+($>>>2^$>>>13^$>>>22^$<<30^$<<19^$<<10)|0;m=(g>>>7^g>>>18^g>>>3^g<<25^g<<14)+(p>>>17^p>>>19^p>>>10^p<<15^p<<13)+m+t|0;N=m+N+(C>>>6^C>>>11^C>>>25^C<<26^C<<21^C<<7)+(R^C&(P^R))+0xa2bfe8a1|0;I=I+N|0;N=N+(S&$^T&(S^$))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;g=(b>>>7^b>>>18^b>>>3^b<<25^b<<14)+(y>>>17^y>>>19^y>>>10^y<<15^y<<13)+g+r|0;R=g+R+(I>>>6^I>>>11^I>>>25^I<<26^I<<21^I<<7)+(P^I&(C^P))+0xa81a664b|0;T=T+R|0;R=R+(N&S^$&(N^S))+(N>>>2^N>>>13^N>>>22^N<<30^N<<19^N<<10)|0;b=(A>>>7^A>>>18^A>>>3^A<<25^A<<14)+(m>>>17^m>>>19^m>>>10^m<<15^m<<13)+b+l|0;P=b+P+(T>>>6^T>>>11^T>>>25^T<<26^T<<21^T<<7)+(C^T&(I^C))+0xc24b8b70|0;$=$+P|0;P=P+(R&N^S&(R^N))+(R>>>2^R>>>13^R>>>22^R<<30^R<<19^R<<10)|0;A=(w>>>7^w>>>18^w>>>3^w<<25^w<<14)+(g>>>17^g>>>19^g>>>10^g<<15^g<<13)+A+h|0;C=A+C+($>>>6^$>>>11^$>>>25^$<<26^$<<21^$<<7)+(I^$&(T^I))+0xc76c51a3|0;S=S+C|0;C=C+(P&R^N&(P^R))+(P>>>2^P>>>13^P>>>22^P<<30^P<<19^P<<10)|0;w=(E>>>7^E>>>18^E>>>3^E<<25^E<<14)+(b>>>17^b>>>19^b>>>10^b<<15^b<<13)+w+d|0;I=w+I+(S>>>6^S>>>11^S>>>25^S<<26^S<<21^S<<7)+(T^S&($^T))+0xd192e819|0;N=N+I|0;I=I+(C&P^R&(C^P))+(C>>>2^C>>>13^C>>>22^C<<30^C<<19^C<<10)|0;E=(v>>>7^v>>>18^v>>>3^v<<25^v<<14)+(A>>>17^A>>>19^A>>>10^A<<15^A<<13)+E+p|0;T=E+T+(N>>>6^N>>>11^N>>>25^N<<26^N<<21^N<<7)+($^N&(S^$))+0xd6990624|0;R=R+T|0;T=T+(I&C^P&(I^C))+(I>>>2^I>>>13^I>>>22^I<<30^I<<19^I<<10)|0;v=(_>>>7^_>>>18^_>>>3^_<<25^_<<14)+(w>>>17^w>>>19^w>>>10^w<<15^w<<13)+v+y|0;$=v+$+(R>>>6^R>>>11^R>>>25^R<<26^R<<21^R<<7)+(S^R&(N^S))+0xf40e3585|0;P=P+$|0;$=$+(T&I^C&(T^I))+(T>>>2^T>>>13^T>>>22^T<<30^T<<19^T<<10)|0;_=(e>>>7^e>>>18^e>>>3^e<<25^e<<14)+(E>>>17^E>>>19^E>>>10^E<<15^E<<13)+_+m|0;S=_+S+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(N^P&(R^N))+0x106aa070|0;C=C+S|0;S=S+($&T^I&($^T))+($>>>2^$>>>13^$>>>22^$<<30^$<<19^$<<10)|0;e=(t>>>7^t>>>18^t>>>3^t<<25^t<<14)+(v>>>17^v>>>19^v>>>10^v<<15^v<<13)+e+g|0;N=e+N+(C>>>6^C>>>11^C>>>25^C<<26^C<<21^C<<7)+(R^C&(P^R))+0x19a4c116|0;I=I+N|0;N=N+(S&$^T&(S^$))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;t=(r>>>7^r>>>18^r>>>3^r<<25^r<<14)+(_>>>17^_>>>19^_>>>10^_<<15^_<<13)+t+b|0;R=t+R+(I>>>6^I>>>11^I>>>25^I<<26^I<<21^I<<7)+(P^I&(C^P))+0x1e376c08|0;T=T+R|0;R=R+(N&S^$&(N^S))+(N>>>2^N>>>13^N>>>22^N<<30^N<<19^N<<10)|0;r=(l>>>7^l>>>18^l>>>3^l<<25^l<<14)+(e>>>17^e>>>19^e>>>10^e<<15^e<<13)+r+A|0;P=r+P+(T>>>6^T>>>11^T>>>25^T<<26^T<<21^T<<7)+(C^T&(I^C))+0x2748774c|0;$=$+P|0;P=P+(R&N^S&(R^N))+(R>>>2^R>>>13^R>>>22^R<<30^R<<19^R<<10)|0;l=(h>>>7^h>>>18^h>>>3^h<<25^h<<14)+(t>>>17^t>>>19^t>>>10^t<<15^t<<13)+l+w|0;C=l+C+($>>>6^$>>>11^$>>>25^$<<26^$<<21^$<<7)+(I^$&(T^I))+0x34b0bcb5|0;S=S+C|0;C=C+(P&R^N&(P^R))+(P>>>2^P>>>13^P>>>22^P<<30^P<<19^P<<10)|0;h=(d>>>7^d>>>18^d>>>3^d<<25^d<<14)+(r>>>17^r>>>19^r>>>10^r<<15^r<<13)+h+E|0;I=h+I+(S>>>6^S>>>11^S>>>25^S<<26^S<<21^S<<7)+(T^S&($^T))+0x391c0cb3|0;N=N+I|0;I=I+(C&P^R&(C^P))+(C>>>2^C>>>13^C>>>22^C<<30^C<<19^C<<10)|0;d=(p>>>7^p>>>18^p>>>3^p<<25^p<<14)+(l>>>17^l>>>19^l>>>10^l<<15^l<<13)+d+v|0;T=d+T+(N>>>6^N>>>11^N>>>25^N<<26^N<<21^N<<7)+($^N&(S^$))+0x4ed8aa4a|0;R=R+T|0;T=T+(I&C^P&(I^C))+(I>>>2^I>>>13^I>>>22^I<<30^I<<19^I<<10)|0;p=(y>>>7^y>>>18^y>>>3^y<<25^y<<14)+(h>>>17^h>>>19^h>>>10^h<<15^h<<13)+p+_|0;$=p+$+(R>>>6^R>>>11^R>>>25^R<<26^R<<21^R<<7)+(S^R&(N^S))+0x5b9cca4f|0;P=P+$|0;$=$+(T&I^C&(T^I))+(T>>>2^T>>>13^T>>>22^T<<30^T<<19^T<<10)|0;y=(m>>>7^m>>>18^m>>>3^m<<25^m<<14)+(d>>>17^d>>>19^d>>>10^d<<15^d<<13)+y+e|0;S=y+S+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(N^P&(R^N))+0x682e6ff3|0;C=C+S|0;S=S+($&T^I&($^T))+($>>>2^$>>>13^$>>>22^$<<30^$<<19^$<<10)|0;m=(g>>>7^g>>>18^g>>>3^g<<25^g<<14)+(p>>>17^p>>>19^p>>>10^p<<15^p<<13)+m+t|0;N=m+N+(C>>>6^C>>>11^C>>>25^C<<26^C<<21^C<<7)+(R^C&(P^R))+0x748f82ee|0;I=I+N|0;N=N+(S&$^T&(S^$))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;g=(b>>>7^b>>>18^b>>>3^b<<25^b<<14)+(y>>>17^y>>>19^y>>>10^y<<15^y<<13)+g+r|0;R=g+R+(I>>>6^I>>>11^I>>>25^I<<26^I<<21^I<<7)+(P^I&(C^P))+0x78a5636f|0;T=T+R|0;R=R+(N&S^$&(N^S))+(N>>>2^N>>>13^N>>>22^N<<30^N<<19^N<<10)|0;b=(A>>>7^A>>>18^A>>>3^A<<25^A<<14)+(m>>>17^m>>>19^m>>>10^m<<15^m<<13)+b+l|0;P=b+P+(T>>>6^T>>>11^T>>>25^T<<26^T<<21^T<<7)+(C^T&(I^C))+0x84c87814|0;$=$+P|0;P=P+(R&N^S&(R^N))+(R>>>2^R>>>13^R>>>22^R<<30^R<<19^R<<10)|0;A=(w>>>7^w>>>18^w>>>3^w<<25^w<<14)+(g>>>17^g>>>19^g>>>10^g<<15^g<<13)+A+h|0;C=A+C+($>>>6^$>>>11^$>>>25^$<<26^$<<21^$<<7)+(I^$&(T^I))+0x8cc70208|0;S=S+C|0;C=C+(P&R^N&(P^R))+(P>>>2^P>>>13^P>>>22^P<<30^P<<19^P<<10)|0;w=(E>>>7^E>>>18^E>>>3^E<<25^E<<14)+(b>>>17^b>>>19^b>>>10^b<<15^b<<13)+w+d|0;I=w+I+(S>>>6^S>>>11^S>>>25^S<<26^S<<21^S<<7)+(T^S&($^T))+0x90befffa|0;N=N+I|0;I=I+(C&P^R&(C^P))+(C>>>2^C>>>13^C>>>22^C<<30^C<<19^C<<10)|0;E=(v>>>7^v>>>18^v>>>3^v<<25^v<<14)+(A>>>17^A>>>19^A>>>10^A<<15^A<<13)+E+p|0;T=E+T+(N>>>6^N>>>11^N>>>25^N<<26^N<<21^N<<7)+($^N&(S^$))+0xa4506ceb|0;R=R+T|0;T=T+(I&C^P&(I^C))+(I>>>2^I>>>13^I>>>22^I<<30^I<<19^I<<10)|0;v=(_>>>7^_>>>18^_>>>3^_<<25^_<<14)+(w>>>17^w>>>19^w>>>10^w<<15^w<<13)+v+y|0;$=v+$+(R>>>6^R>>>11^R>>>25^R<<26^R<<21^R<<7)+(S^R&(N^S))+0xbef9a3f7|0;P=P+$|0;$=$+(T&I^C&(T^I))+(T>>>2^T>>>13^T>>>22^T<<30^T<<19^T<<10)|0;_=(e>>>7^e>>>18^e>>>3^e<<25^e<<14)+(E>>>17^E>>>19^E>>>10^E<<15^E<<13)+_+m|0;S=_+S+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(N^P&(R^N))+0xc67178f2|0;C=C+S|0;S=S+($&T^I&($^T))+($>>>2^$>>>13^$>>>22^$<<30^$<<19^$<<10)|0;n=n+S|0;i=i+$|0;s=s+T|0;a=a+I|0;o=o+C|0;f=f+P|0;c=c+R|0;u=u+N|0}function N(e){e=e|0;R(P[e|0]<<24|P[e|1]<<16|P[e|2]<<8|P[e|3],P[e|4]<<24|P[e|5]<<16|P[e|6]<<8|P[e|7],P[e|8]<<24|P[e|9]<<16|P[e|10]<<8|P[e|11],P[e|12]<<24|P[e|13]<<16|P[e|14]<<8|P[e|15],P[e|16]<<24|P[e|17]<<16|P[e|18]<<8|P[e|19],P[e|20]<<24|P[e|21]<<16|P[e|22]<<8|P[e|23],P[e|24]<<24|P[e|25]<<16|P[e|26]<<8|P[e|27],P[e|28]<<24|P[e|29]<<16|P[e|30]<<8|P[e|31],P[e|32]<<24|P[e|33]<<16|P[e|34]<<8|P[e|35],P[e|36]<<24|P[e|37]<<16|P[e|38]<<8|P[e|39],P[e|40]<<24|P[e|41]<<16|P[e|42]<<8|P[e|43],P[e|44]<<24|P[e|45]<<16|P[e|46]<<8|P[e|47],P[e|48]<<24|P[e|49]<<16|P[e|50]<<8|P[e|51],P[e|52]<<24|P[e|53]<<16|P[e|54]<<8|P[e|55],P[e|56]<<24|P[e|57]<<16|P[e|58]<<8|P[e|59],P[e|60]<<24|P[e|61]<<16|P[e|62]<<8|P[e|63])}function k(e){e=e|0;P[e|0]=n>>>24;P[e|1]=n>>>16&255;P[e|2]=n>>>8&255;P[e|3]=n&255;P[e|4]=i>>>24;P[e|5]=i>>>16&255;P[e|6]=i>>>8&255;P[e|7]=i&255;P[e|8]=s>>>24;P[e|9]=s>>>16&255;P[e|10]=s>>>8&255;P[e|11]=s&255;P[e|12]=a>>>24;P[e|13]=a>>>16&255;P[e|14]=a>>>8&255;P[e|15]=a&255;P[e|16]=o>>>24;P[e|17]=o>>>16&255;P[e|18]=o>>>8&255;P[e|19]=o&255;P[e|20]=f>>>24;P[e|21]=f>>>16&255;P[e|22]=f>>>8&255;P[e|23]=f&255;P[e|24]=c>>>24;P[e|25]=c>>>16&255;P[e|26]=c>>>8&255;P[e|27]=c&255;P[e|28]=u>>>24;P[e|29]=u>>>16&255;P[e|30]=u>>>8&255;P[e|31]=u&255}function O(){n=0x6a09e667;i=0xbb67ae85;s=0x3c6ef372;a=0xa54ff53a;o=0x510e527f;f=0x9b05688c;c=0x1f83d9ab;u=0x5be0cd19;l=h=0}function x(e,t,r,d,p,y,m,g,b,A){e=e|0;t=t|0;r=r|0;d=d|0;p=p|0;y=y|0;m=m|0;g=g|0;b=b|0;A=A|0;n=e;i=t;s=r;a=d;o=p;f=y;c=m;u=g;l=b;h=A}function B(e,t){e=e|0;t=t|0;var r=0;if(e&63)return-1;while((t|0)>=64){N(e);e=e+64|0;t=t-64|0;r=r+64|0}l=l+r|0;if(l>>>0<r>>>0)h=h+1|0;return r|0}function D(e,t,r){e=e|0;t=t|0;r=r|0;var n=0,i=0;if(e&63)return-1;if(~r)if(r&31)return-1;if((t|0)>=64){n=B(e,t)|0;if((n|0)==-1)return-1;e=e+n|0;t=t-n|0}n=n+t|0;l=l+t|0;if(l>>>0<t>>>0)h=h+1|0;P[e|t]=0x80;if((t|0)>=56){for(i=t+1|0;(i|0)<64;i=i+1|0)P[e|i]=0x00;N(e);t=0;P[e|0]=0}for(i=t+1|0;(i|0)<59;i=i+1|0)P[e|i]=0;P[e|56]=h>>>21&255;P[e|57]=h>>>13&255;P[e|58]=h>>>5&255;P[e|59]=h<<3&255|l>>>29;P[e|60]=l>>>21&255;P[e|61]=l>>>13&255;P[e|62]=l>>>5&255;P[e|63]=l<<3&255;N(e);if(~r)k(r);return n|0}function M(){n=d;i=p;s=y;a=m;o=g;f=b;c=A;u=w;l=64;h=0}function U(){n=E;i=v;s=_;a=S;o=$;f=T;c=I;u=C;l=64;h=0}function L(e,t,r,P,N,k,x,B,D,M,U,L,F,H,V,G){e=e|0;t=t|0;r=r|0;P=P|0;N=N|0;k=k|0;x=x|0;B=B|0;D=D|0;M=M|0;U=U|0;L=L|0;F=F|0;H=H|0;V=V|0;G=G|0;O();R(e^0x5c5c5c5c,t^0x5c5c5c5c,r^0x5c5c5c5c,P^0x5c5c5c5c,N^0x5c5c5c5c,k^0x5c5c5c5c,x^0x5c5c5c5c,B^0x5c5c5c5c,D^0x5c5c5c5c,M^0x5c5c5c5c,U^0x5c5c5c5c,L^0x5c5c5c5c,F^0x5c5c5c5c,H^0x5c5c5c5c,V^0x5c5c5c5c,G^0x5c5c5c5c);E=n;v=i;_=s;S=a;$=o;T=f;I=c;C=u;O();R(e^0x36363636,t^0x36363636,r^0x36363636,P^0x36363636,N^0x36363636,k^0x36363636,x^0x36363636,B^0x36363636,D^0x36363636,M^0x36363636,U^0x36363636,L^0x36363636,F^0x36363636,H^0x36363636,V^0x36363636,G^0x36363636);d=n;p=i;y=s;m=a;g=o;b=f;A=c;w=u;l=64;h=0}function F(e,t,r){e=e|0;t=t|0;r=r|0;var l=0,h=0,d=0,p=0,y=0,m=0,g=0,b=0,A=0;if(e&63)return-1;if(~r)if(r&31)return-1;A=D(e,t,-1)|0;l=n,h=i,d=s,p=a,y=o,m=f,g=c,b=u;U();R(l,h,d,p,y,m,g,b,0x80000000,0,0,0,0,0,0,768);if(~r)k(r);return A|0}function H(e,t,r,l,h){e=e|0;t=t|0;r=r|0;l=l|0;h=h|0;var d=0,p=0,y=0,m=0,g=0,b=0,A=0,w=0,E=0,v=0,_=0,S=0,$=0,T=0,I=0,C=0;if(e&63)return-1;if(~h)if(h&31)return-1;P[e+t|0]=r>>>24;P[e+t+1|0]=r>>>16&255;P[e+t+2|0]=r>>>8&255;P[e+t+3|0]=r&255;F(e,t+4|0,-1)|0;d=E=n,p=v=i,y=_=s,m=S=a,g=$=o,b=T=f,A=I=c,w=C=u;l=l-1|0;while((l|0)>0){M();R(E,v,_,S,$,T,I,C,0x80000000,0,0,0,0,0,0,768);E=n,v=i,_=s,S=a,$=o,T=f,I=c,C=u;U();R(E,v,_,S,$,T,I,C,0x80000000,0,0,0,0,0,0,768);E=n,v=i,_=s,S=a,$=o,T=f,I=c,C=u;d=d^n;p=p^i;y=y^s;m=m^a;g=g^o;b=b^f;A=A^c;w=w^u;l=l-1|0}n=d;i=p;s=y;a=m;o=g;f=b;c=A;u=w;if(~h)k(h);return 0}return{reset:O,init:x,process:B,finish:D,hmac_reset:M,hmac_init:L,hmac_finish:F,pbkdf2_generate_block:H}};const _sha256_block_size=64;const _sha256_hash_size=32;class Sha256 extends Hash{constructor(){super();this.NAME="sha256";this.BLOCK_SIZE=_sha256_block_size;this.HASH_SIZE=_sha256_hash_size;this.heap=_heap_init();this.asm=sha256_asm({Uint8Array},null,this.heap.buffer);this.reset()}}Sha256.NAME="sha256";var sha512_asm=function(e,t,r){"use asm";var n=0,i=0,s=0,a=0,o=0,f=0,c=0,u=0,l=0,h=0,d=0,p=0,y=0,m=0,g=0,b=0,A=0,w=0;var E=0,v=0,_=0,S=0,$=0,T=0,I=0,C=0,P=0,R=0,N=0,k=0,O=0,x=0,B=0,D=0,M=0,U=0,L=0,F=0,H=0,V=0,G=0,j=0,K=0,Y=0,q=0,z=0,X=0,Q=0,W=0,J=0;var Z=new e.Uint8Array(r);function ee(e,t,r,A,w,E,v,_,S,$,T,I,C,P,R,N,k,O,x,B,D,M,U,L,F,H,V,G,j,K,Y,q){e=e|0;t=t|0;r=r|0;A=A|0;w=w|0;E=E|0;v=v|0;_=_|0;S=S|0;$=$|0;T=T|0;I=I|0;C=C|0;P=P|0;R=R|0;N=N|0;k=k|0;O=O|0;x=x|0;B=B|0;D=D|0;M=M|0;U=U|0;L=L|0;F=F|0;H=H|0;V=V|0;G=G|0;j=j|0;K=K|0;Y=Y|0;q=q|0;var z=0,X=0,Q=0,W=0,J=0,Z=0,ee=0,te=0,re=0,ne=0,ie=0,se=0,ae=0,oe=0,fe=0,ce=0,ue=0,le=0,he=0;z=n;X=i;Q=s;W=a;J=o;Z=f;ee=c;te=u;re=l;ne=h;ie=d;se=p;ae=y;oe=m;fe=g;ce=b;le=0xd728ae22+t|0;ue=0x428a2f98+e+(le>>>0<t>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=J;Z=W;J=Q;W=X;Q=z;X=le+(W&Z^te&(W^Z))|0;z=ue+(Q&J^ee&(Q^J))+(X>>>0<le>>>0?1:0)|0;he=(W>>>28|Q<<4)^(W<<30|Q>>>2)^(W<<25|Q>>>7)|0;X=X+he|0;z=z+((Q>>>28|W<<4)^(Q<<30|W>>>2)^(Q<<25|W>>>7))+(X>>>0<he>>>0?1:0)|0;le=0x23ef65cd+A|0;ue=0x71374491+r+(le>>>0<A>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=J;Z=W;J=Q;W=X;Q=z;X=le+(W&Z^te&(W^Z))|0;z=ue+(Q&J^ee&(Q^J))+(X>>>0<le>>>0?1:0)|0;he=(W>>>28|Q<<4)^(W<<30|Q>>>2)^(W<<25|Q>>>7)|0;X=X+he|0;z=z+((Q>>>28|W<<4)^(Q<<30|W>>>2)^(Q<<25|W>>>7))+(X>>>0<he>>>0?1:0)|0;le=0xec4d3b2f+E|0;ue=0xb5c0fbcf+w+(le>>>0<E>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=J;Z=W;J=Q;W=X;Q=z;X=le+(W&Z^te&(W^Z))|0;z=ue+(Q&J^ee&(Q^J))+(X>>>0<le>>>0?1:0)|0;he=(W>>>28|Q<<4)^(W<<30|Q>>>2)^(W<<25|Q>>>7)|0;X=X+he|0;z=z+((Q>>>28|W<<4)^(Q<<30|W>>>2)^(Q<<25|W>>>7))+(X>>>0<he>>>0?1:0)|0;le=0x8189dbbc+_|0;ue=0xe9b5dba5+v+(le>>>0<_>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=J;Z=W;J=Q;W=X;Q=z;X=le+(W&Z^te&(W^Z))|0;z=ue+(Q&J^ee&(Q^J))+(X>>>0<le>>>0?1:0)|0;he=(W>>>28|Q<<4)^(W<<30|Q>>>2)^(W<<25|Q>>>7)|0;X=X+he|0;z=z+((Q>>>28|W<<4)^(Q<<30|W>>>2)^(Q<<25|W>>>7))+(X>>>0<he>>>0?1:0)|0;le=0xf348b538+$|0;ue=0x3956c25b+S+(le>>>0<$>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=J;Z=W;J=Q;W=X;Q=z;X=le+(W&Z^te&(W^Z))|0;z=ue+(Q&J^ee&(Q^J))+(X>>>0<le>>>0?1:0)|0;he=(W>>>28|Q<<4)^(W<<30|Q>>>2)^(W<<25|Q>>>7)|0;X=X+he|0;z=z+((Q>>>28|W<<4)^(Q<<30|W>>>2)^(Q<<25|W>>>7))+(X>>>0<he>>>0?1:0)|0;le=0xb605d019+I|0;ue=0x59f111f1+T+(le>>>0<I>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=J;Z=W;J=Q;W=X;Q=z;X=le+(W&Z^te&(W^Z))|0;z=ue+(Q&J^ee&(Q^J))+(X>>>0<le>>>0?1:0)|0;he=(W>>>28|Q<<4)^(W<<30|Q>>>2)^(W<<25|Q>>>7)|0;X=X+he|0;z=z+((Q>>>28|W<<4)^(Q<<30|W>>>2)^(Q<<25|W>>>7))+(X>>>0<he>>>0?1:0)|0;le=0xaf194f9b+P|0;ue=0x923f82a4+C+(le>>>0<P>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=J;Z=W;J=Q;W=X;Q=z;X=le+(W&Z^te&(W^Z))|0;z=ue+(Q&J^ee&(Q^J))+(X>>>0<le>>>0?1:0)|0;he=(W>>>28|Q<<4)^(W<<30|Q>>>2)^(W<<25|Q>>>7)|0;X=X+he|0;z=z+((Q>>>28|W<<4)^(Q<<30|W>>>2)^(Q<<25|W>>>7))+(X>>>0<he>>>0?1:0)|0;le=0xda6d8118+N|0;ue=0xab1c5ed5+R+(le>>>0<N>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=J;Z=W;J=Q;W=X;Q=z;X=le+(W&Z^te&(W^Z))|0;z=ue+(Q&J^ee&(Q^J))+(X>>>0<le>>>0?1:0)|0;he=(W>>>28|Q<<4)^(W<<30|Q>>>2)^(W<<25|Q>>>7)|0;X=X+he|0;z=z+((Q>>>28|W<<4)^(Q<<30|W>>>2)^(Q<<25|W>>>7))+(X>>>0<he>>>0?1:0)|0;le=0xa3030242+O|0;ue=0xd807aa98+k+(le>>>0<O>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=J;Z=W;J=Q;W=X;Q=z;X=le+(W&Z^te&(W^Z))|0;z=ue+(Q&J^ee&(Q^J))+(X>>>0<le>>>0?1:0)|0;he=(W>>>28|Q<<4)^(W<<30|Q>>>2)^(W<<25|Q>>>7)|0;X=X+he|0;z=z+((Q>>>28|W<<4)^(Q<<30|W>>>2)^(Q<<25|W>>>7))+(X>>>0<he>>>0?1:0)|0;le=0x45706fbe+B|0;ue=0x12835b01+x+(le>>>0<B>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=J;Z=W;J=Q;W=X;Q=z;X=le+(W&Z^te&(W^Z))|0;z=ue+(Q&J^ee&(Q^J))+(X>>>0<le>>>0?1:0)|0;he=(W>>>28|Q<<4)^(W<<30|Q>>>2)^(W<<25|Q>>>7)|0;X=X+he|0;z=z+((Q>>>28|W<<4)^(Q<<30|W>>>2)^(Q<<25|W>>>7))+(X>>>0<he>>>0?1:0)|0;le=0x4ee4b28c+M|0;ue=0x243185be+D+(le>>>0<M>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=J;Z=W;J=Q;W=X;Q=z;X=le+(W&Z^te&(W^Z))|0;z=ue+(Q&J^ee&(Q^J))+(X>>>0<le>>>0?1:0)|0;he=(W>>>28|Q<<4)^(W<<30|Q>>>2)^(W<<25|Q>>>7)|0;X=X+he|0;z=z+((Q>>>28|W<<4)^(Q<<30|W>>>2)^(Q<<25|W>>>7))+(X>>>0<he>>>0?1:0)|0;le=0xd5ffb4e2+L|0;ue=0x550c7dc3+U+(le>>>0<L>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=J;Z=W;J=Q;W=X;Q=z;X=le+(W&Z^te&(W^Z))|0;z=ue+(Q&J^ee&(Q^J))+(X>>>0<le>>>0?1:0)|0;he=(W>>>28|Q<<4)^(W<<30|Q>>>2)^(W<<25|Q>>>7)|0;X=X+he|0;z=z+((Q>>>28|W<<4)^(Q<<30|W>>>2)^(Q<<25|W>>>7))+(X>>>0<he>>>0?1:0)|0;le=0xf27b896f+H|0;ue=0x72be5d74+F+(le>>>0<H>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=J;Z=W;J=Q;W=X;Q=z;X=le+(W&Z^te&(W^Z))|0;z=ue+(Q&J^ee&(Q^J))+(X>>>0<le>>>0?1:0)|0;he=(W>>>28|Q<<4)^(W<<30|Q>>>2)^(W<<25|Q>>>7)|0;X=X+he|0;z=z+((Q>>>28|W<<4)^(Q<<30|W>>>2)^(Q<<25|W>>>7))+(X>>>0<he>>>0?1:0)|0;le=0x3b1696b1+G|0;ue=0x80deb1fe+V+(le>>>0<G>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=J;Z=W;J=Q;W=X;Q=z;X=le+(W&Z^te&(W^Z))|0;z=ue+(Q&J^ee&(Q^J))+(X>>>0<le>>>0?1:0)|0;he=(W>>>28|Q<<4)^(W<<30|Q>>>2)^(W<<25|Q>>>7)|0;X=X+he|0;z=z+((Q>>>28|W<<4)^(Q<<30|W>>>2)^(Q<<25|W>>>7))+(X>>>0<he>>>0?1:0)|0;le=0x25c71235+K|0;ue=0x9bdc06a7+j+(le>>>0<K>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=J;Z=W;J=Q;W=X;Q=z;X=le+(W&Z^te&(W^Z))|0;z=ue+(Q&J^ee&(Q^J))+(X>>>0<le>>>0?1:0)|0;he=(W>>>28|Q<<4)^(W<<30|Q>>>2)^(W<<25|Q>>>7)|0;X=X+he|0;z=z+((Q>>>28|W<<4)^(Q<<30|W>>>2)^(Q<<25|W>>>7))+(X>>>0<he>>>0?1:0)|0;le=0xcf692694+q|0;ue=0xc19bf174+Y+(le>>>0<q>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=J;Z=W;J=Q;W=X;Q=z;X=le+(W&Z^te&(W^Z))|0;z=ue+(Q&J^ee&(Q^J))+(X>>>0<le>>>0?1:0)|0;he=(W>>>28|Q<<4)^(W<<30|Q>>>2)^(W<<25|Q>>>7)|0;X=X+he|0;z=z+((Q>>>28|W<<4)^(Q<<30|W>>>2)^(Q<<25|W>>>7))+(X>>>0<he>>>0?1:0)|0;t=t+B|0;e=e+x+(t>>>0<B>>>0?1:0)|0;he=(A>>>1|r<<31)^(A>>>8|r<<24)^(A>>>7|r<<25)|0;t=t+he|0;e=e+((r>>>1|A<<31)^(r>>>8|A<<24)^r>>>7)+(t>>>0<he>>>0?1:0)|0;he=(K>>>19|j<<13)^(K<<3|j>>>29)^(K>>>6|j<<26)|0;t=t+he|0;e=e+((j>>>19|K<<13)^(j<<3|K>>>29)^j>>>6)+(t>>>0<he>>>0?1:0)|0;le=0x9ef14ad2+t|0;ue=0xe49b69c1+e+(le>>>0<t>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=J;Z=W;J=Q;W=X;Q=z;X=le+(W&Z^te&(W^Z))|0;z=ue+(Q&J^ee&(Q^J))+(X>>>0<le>>>0?1:0)|0;he=(W>>>28|Q<<4)^(W<<30|Q>>>2)^(W<<25|Q>>>7)|0;X=X+he|0;z=z+((Q>>>28|W<<4)^(Q<<30|W>>>2)^(Q<<25|W>>>7))+(X>>>0<he>>>0?1:0)|0;A=A+M|0;r=r+D+(A>>>0<M>>>0?1:0)|0;he=(E>>>1|w<<31)^(E>>>8|w<<24)^(E>>>7|w<<25)|0;A=A+he|0;r=r+((w>>>1|E<<31)^(w>>>8|E<<24)^w>>>7)+(A>>>0<he>>>0?1:0)|0;he=(q>>>19|Y<<13)^(q<<3|Y>>>29)^(q>>>6|Y<<26)|0;A=A+he|0;r=r+((Y>>>19|q<<13)^(Y<<3|q>>>29)^Y>>>6)+(A>>>0<he>>>0?1:0)|0;le=0x384f25e3+A|0;ue=0xefbe4786+r+(le>>>0<A>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=J;Z=W;J=Q;W=X;Q=z;X=le+(W&Z^te&(W^Z))|0;z=ue+(Q&J^ee&(Q^J))+(X>>>0<le>>>0?1:0)|0;he=(W>>>28|Q<<4)^(W<<30|Q>>>2)^(W<<25|Q>>>7)|0;X=X+he|0;z=z+((Q>>>28|W<<4)^(Q<<30|W>>>2)^(Q<<25|W>>>7))+(X>>>0<he>>>0?1:0)|0;E=E+L|0;w=w+U+(E>>>0<L>>>0?1:0)|0;he=(_>>>1|v<<31)^(_>>>8|v<<24)^(_>>>7|v<<25)|0;E=E+he|0;w=w+((v>>>1|_<<31)^(v>>>8|_<<24)^v>>>7)+(E>>>0<he>>>0?1:0)|0;he=(t>>>19|e<<13)^(t<<3|e>>>29)^(t>>>6|e<<26)|0;E=E+he|0;w=w+((e>>>19|t<<13)^(e<<3|t>>>29)^e>>>6)+(E>>>0<he>>>0?1:0)|0;le=0x8b8cd5b5+E|0;ue=0xfc19dc6+w+(le>>>0<E>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=J;Z=W;J=Q;W=X;Q=z;X=le+(W&Z^te&(W^Z))|0;z=ue+(Q&J^ee&(Q^J))+(X>>>0<le>>>0?1:0)|0;he=(W>>>28|Q<<4)^(W<<30|Q>>>2)^(W<<25|Q>>>7)|0;X=X+he|0;z=z+((Q>>>28|W<<4)^(Q<<30|W>>>2)^(Q<<25|W>>>7))+(X>>>0<he>>>0?1:0)|0;_=_+H|0;v=v+F+(_>>>0<H>>>0?1:0)|0;he=($>>>1|S<<31)^($>>>8|S<<24)^($>>>7|S<<25)|0;_=_+he|0;v=v+((S>>>1|$<<31)^(S>>>8|$<<24)^S>>>7)+(_>>>0<he>>>0?1:0)|0;he=(A>>>19|r<<13)^(A<<3|r>>>29)^(A>>>6|r<<26)|0;_=_+he|0;v=v+((r>>>19|A<<13)^(r<<3|A>>>29)^r>>>6)+(_>>>0<he>>>0?1:0)|0;le=0x77ac9c65+_|0;ue=0x240ca1cc+v+(le>>>0<_>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=J;Z=W;J=Q;W=X;Q=z;X=le+(W&Z^te&(W^Z))|0;z=ue+(Q&J^ee&(Q^J))+(X>>>0<le>>>0?1:0)|0;he=(W>>>28|Q<<4)^(W<<30|Q>>>2)^(W<<25|Q>>>7)|0;X=X+he|0;z=z+((Q>>>28|W<<4)^(Q<<30|W>>>2)^(Q<<25|W>>>7))+(X>>>0<he>>>0?1:0)|0;$=$+G|0;S=S+V+($>>>0<G>>>0?1:0)|0;he=(I>>>1|T<<31)^(I>>>8|T<<24)^(I>>>7|T<<25)|0;$=$+he|0;S=S+((T>>>1|I<<31)^(T>>>8|I<<24)^T>>>7)+($>>>0<he>>>0?1:0)|0;he=(E>>>19|w<<13)^(E<<3|w>>>29)^(E>>>6|w<<26)|0;$=$+he|0;S=S+((w>>>19|E<<13)^(w<<3|E>>>29)^w>>>6)+($>>>0<he>>>0?1:0)|0;le=0x592b0275+$|0;ue=0x2de92c6f+S+(le>>>0<$>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=J;Z=W;J=Q;W=X;Q=z;X=le+(W&Z^te&(W^Z))|0;z=ue+(Q&J^ee&(Q^J))+(X>>>0<le>>>0?1:0)|0;he=(W>>>28|Q<<4)^(W<<30|Q>>>2)^(W<<25|Q>>>7)|0;X=X+he|0;z=z+((Q>>>28|W<<4)^(Q<<30|W>>>2)^(Q<<25|W>>>7))+(X>>>0<he>>>0?1:0)|0;I=I+K|0;T=T+j+(I>>>0<K>>>0?1:0)|0;he=(P>>>1|C<<31)^(P>>>8|C<<24)^(P>>>7|C<<25)|0;I=I+he|0;T=T+((C>>>1|P<<31)^(C>>>8|P<<24)^C>>>7)+(I>>>0<he>>>0?1:0)|0;he=(_>>>19|v<<13)^(_<<3|v>>>29)^(_>>>6|v<<26)|0;I=I+he|0;T=T+((v>>>19|_<<13)^(v<<3|_>>>29)^v>>>6)+(I>>>0<he>>>0?1:0)|0;le=0x6ea6e483+I|0;ue=0x4a7484aa+T+(le>>>0<I>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=J;Z=W;J=Q;W=X;Q=z;X=le+(W&Z^te&(W^Z))|0;z=ue+(Q&J^ee&(Q^J))+(X>>>0<le>>>0?1:0)|0;he=(W>>>28|Q<<4)^(W<<30|Q>>>2)^(W<<25|Q>>>7)|0;X=X+he|0;z=z+((Q>>>28|W<<4)^(Q<<30|W>>>2)^(Q<<25|W>>>7))+(X>>>0<he>>>0?1:0)|0;P=P+q|0;C=C+Y+(P>>>0<q>>>0?1:0)|0;he=(N>>>1|R<<31)^(N>>>8|R<<24)^(N>>>7|R<<25)|0;P=P+he|0;C=C+((R>>>1|N<<31)^(R>>>8|N<<24)^R>>>7)+(P>>>0<he>>>0?1:0)|0;he=($>>>19|S<<13)^($<<3|S>>>29)^($>>>6|S<<26)|0;P=P+he|0;C=C+((S>>>19|$<<13)^(S<<3|$>>>29)^S>>>6)+(P>>>0<he>>>0?1:0)|0;le=0xbd41fbd4+P|0;ue=0x5cb0a9dc+C+(le>>>0<P>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=J;Z=W;J=Q;W=X;Q=z;X=le+(W&Z^te&(W^Z))|0;z=ue+(Q&J^ee&(Q^J))+(X>>>0<le>>>0?1:0)|0;he=(W>>>28|Q<<4)^(W<<30|Q>>>2)^(W<<25|Q>>>7)|0;X=X+he|0;z=z+((Q>>>28|W<<4)^(Q<<30|W>>>2)^(Q<<25|W>>>7))+(X>>>0<he>>>0?1:0)|0;N=N+t|0;R=R+e+(N>>>0<t>>>0?1:0)|0;he=(O>>>1|k<<31)^(O>>>8|k<<24)^(O>>>7|k<<25)|0;N=N+he|0;R=R+((k>>>1|O<<31)^(k>>>8|O<<24)^k>>>7)+(N>>>0<he>>>0?1:0)|0;he=(I>>>19|T<<13)^(I<<3|T>>>29)^(I>>>6|T<<26)|0;N=N+he|0;R=R+((T>>>19|I<<13)^(T<<3|I>>>29)^T>>>6)+(N>>>0<he>>>0?1:0)|0;le=0x831153b5+N|0;ue=0x76f988da+R+(le>>>0<N>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=J;Z=W;J=Q;W=X;Q=z;X=le+(W&Z^te&(W^Z))|0;z=ue+(Q&J^ee&(Q^J))+(X>>>0<le>>>0?1:0)|0;he=(W>>>28|Q<<4)^(W<<30|Q>>>2)^(W<<25|Q>>>7)|0;X=X+he|0;z=z+((Q>>>28|W<<4)^(Q<<30|W>>>2)^(Q<<25|W>>>7))+(X>>>0<he>>>0?1:0)|0;O=O+A|0;k=k+r+(O>>>0<A>>>0?1:0)|0;he=(B>>>1|x<<31)^(B>>>8|x<<24)^(B>>>7|x<<25)|0;O=O+he|0;k=k+((x>>>1|B<<31)^(x>>>8|B<<24)^x>>>7)+(O>>>0<he>>>0?1:0)|0;he=(P>>>19|C<<13)^(P<<3|C>>>29)^(P>>>6|C<<26)|0;O=O+he|0;k=k+((C>>>19|P<<13)^(C<<3|P>>>29)^C>>>6)+(O>>>0<he>>>0?1:0)|0;le=0xee66dfab+O|0;ue=0x983e5152+k+(le>>>0<O>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=J;Z=W;J=Q;W=X;Q=z;X=le+(W&Z^te&(W^Z))|0;z=ue+(Q&J^ee&(Q^J))+(X>>>0<le>>>0?1:0)|0;he=(W>>>28|Q<<4)^(W<<30|Q>>>2)^(W<<25|Q>>>7)|0;X=X+he|0;z=z+((Q>>>28|W<<4)^(Q<<30|W>>>2)^(Q<<25|W>>>7))+(X>>>0<he>>>0?1:0)|0;B=B+E|0;x=x+w+(B>>>0<E>>>0?1:0)|0;he=(M>>>1|D<<31)^(M>>>8|D<<24)^(M>>>7|D<<25)|0;B=B+he|0;x=x+((D>>>1|M<<31)^(D>>>8|M<<24)^D>>>7)+(B>>>0<he>>>0?1:0)|0;he=(N>>>19|R<<13)^(N<<3|R>>>29)^(N>>>6|R<<26)|0;B=B+he|0;x=x+((R>>>19|N<<13)^(R<<3|N>>>29)^R>>>6)+(B>>>0<he>>>0?1:0)|0;le=0x2db43210+B|0;ue=0xa831c66d+x+(le>>>0<B>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=J;Z=W;J=Q;W=X;Q=z;X=le+(W&Z^te&(W^Z))|0;z=ue+(Q&J^ee&(Q^J))+(X>>>0<le>>>0?1:0)|0;he=(W>>>28|Q<<4)^(W<<30|Q>>>2)^(W<<25|Q>>>7)|0;X=X+he|0;z=z+((Q>>>28|W<<4)^(Q<<30|W>>>2)^(Q<<25|W>>>7))+(X>>>0<he>>>0?1:0)|0;M=M+_|0;D=D+v+(M>>>0<_>>>0?1:0)|0;he=(L>>>1|U<<31)^(L>>>8|U<<24)^(L>>>7|U<<25)|0;M=M+he|0;D=D+((U>>>1|L<<31)^(U>>>8|L<<24)^U>>>7)+(M>>>0<he>>>0?1:0)|0;he=(O>>>19|k<<13)^(O<<3|k>>>29)^(O>>>6|k<<26)|0;M=M+he|0;D=D+((k>>>19|O<<13)^(k<<3|O>>>29)^k>>>6)+(M>>>0<he>>>0?1:0)|0;le=0x98fb213f+M|0;ue=0xb00327c8+D+(le>>>0<M>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=J;Z=W;J=Q;W=X;Q=z;X=le+(W&Z^te&(W^Z))|0;z=ue+(Q&J^ee&(Q^J))+(X>>>0<le>>>0?1:0)|0;he=(W>>>28|Q<<4)^(W<<30|Q>>>2)^(W<<25|Q>>>7)|0;X=X+he|0;z=z+((Q>>>28|W<<4)^(Q<<30|W>>>2)^(Q<<25|W>>>7))+(X>>>0<he>>>0?1:0)|0;L=L+$|0;U=U+S+(L>>>0<$>>>0?1:0)|0;he=(H>>>1|F<<31)^(H>>>8|F<<24)^(H>>>7|F<<25)|0;L=L+he|0;U=U+((F>>>1|H<<31)^(F>>>8|H<<24)^F>>>7)+(L>>>0<he>>>0?1:0)|0;he=(B>>>19|x<<13)^(B<<3|x>>>29)^(B>>>6|x<<26)|0;L=L+he|0;U=U+((x>>>19|B<<13)^(x<<3|B>>>29)^x>>>6)+(L>>>0<he>>>0?1:0)|0;le=0xbeef0ee4+L|0;ue=0xbf597fc7+U+(le>>>0<L>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=J;Z=W;J=Q;W=X;Q=z;X=le+(W&Z^te&(W^Z))|0;z=ue+(Q&J^ee&(Q^J))+(X>>>0<le>>>0?1:0)|0;he=(W>>>28|Q<<4)^(W<<30|Q>>>2)^(W<<25|Q>>>7)|0;X=X+he|0;z=z+((Q>>>28|W<<4)^(Q<<30|W>>>2)^(Q<<25|W>>>7))+(X>>>0<he>>>0?1:0)|0;H=H+I|0;F=F+T+(H>>>0<I>>>0?1:0)|0;he=(G>>>1|V<<31)^(G>>>8|V<<24)^(G>>>7|V<<25)|0;H=H+he|0;F=F+((V>>>1|G<<31)^(V>>>8|G<<24)^V>>>7)+(H>>>0<he>>>0?1:0)|0;he=(M>>>19|D<<13)^(M<<3|D>>>29)^(M>>>6|D<<26)|0;H=H+he|0;F=F+((D>>>19|M<<13)^(D<<3|M>>>29)^D>>>6)+(H>>>0<he>>>0?1:0)|0;le=0x3da88fc2+H|0;ue=0xc6e00bf3+F+(le>>>0<H>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=J;Z=W;J=Q;W=X;Q=z;X=le+(W&Z^te&(W^Z))|0;z=ue+(Q&J^ee&(Q^J))+(X>>>0<le>>>0?1:0)|0;he=(W>>>28|Q<<4)^(W<<30|Q>>>2)^(W<<25|Q>>>7)|0;X=X+he|0;z=z+((Q>>>28|W<<4)^(Q<<30|W>>>2)^(Q<<25|W>>>7))+(X>>>0<he>>>0?1:0)|0;G=G+P|0;V=V+C+(G>>>0<P>>>0?1:0)|0;he=(K>>>1|j<<31)^(K>>>8|j<<24)^(K>>>7|j<<25)|0;G=G+he|0;V=V+((j>>>1|K<<31)^(j>>>8|K<<24)^j>>>7)+(G>>>0<he>>>0?1:0)|0;he=(L>>>19|U<<13)^(L<<3|U>>>29)^(L>>>6|U<<26)|0;G=G+he|0;V=V+((U>>>19|L<<13)^(U<<3|L>>>29)^U>>>6)+(G>>>0<he>>>0?1:0)|0;le=0x930aa725+G|0;ue=0xd5a79147+V+(le>>>0<G>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=J;Z=W;J=Q;W=X;Q=z;X=le+(W&Z^te&(W^Z))|0;z=ue+(Q&J^ee&(Q^J))+(X>>>0<le>>>0?1:0)|0;he=(W>>>28|Q<<4)^(W<<30|Q>>>2)^(W<<25|Q>>>7)|0;X=X+he|0;z=z+((Q>>>28|W<<4)^(Q<<30|W>>>2)^(Q<<25|W>>>7))+(X>>>0<he>>>0?1:0)|0;K=K+N|0;j=j+R+(K>>>0<N>>>0?1:0)|0;he=(q>>>1|Y<<31)^(q>>>8|Y<<24)^(q>>>7|Y<<25)|0;K=K+he|0;j=j+((Y>>>1|q<<31)^(Y>>>8|q<<24)^Y>>>7)+(K>>>0<he>>>0?1:0)|0;he=(H>>>19|F<<13)^(H<<3|F>>>29)^(H>>>6|F<<26)|0;K=K+he|0;j=j+((F>>>19|H<<13)^(F<<3|H>>>29)^F>>>6)+(K>>>0<he>>>0?1:0)|0;le=0xe003826f+K|0;ue=0x6ca6351+j+(le>>>0<K>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=J;Z=W;J=Q;W=X;Q=z;X=le+(W&Z^te&(W^Z))|0;z=ue+(Q&J^ee&(Q^J))+(X>>>0<le>>>0?1:0)|0;he=(W>>>28|Q<<4)^(W<<30|Q>>>2)^(W<<25|Q>>>7)|0;X=X+he|0;z=z+((Q>>>28|W<<4)^(Q<<30|W>>>2)^(Q<<25|W>>>7))+(X>>>0<he>>>0?1:0)|0;q=q+O|0;Y=Y+k+(q>>>0<O>>>0?1:0)|0;he=(t>>>1|e<<31)^(t>>>8|e<<24)^(t>>>7|e<<25)|0;q=q+he|0;Y=Y+((e>>>1|t<<31)^(e>>>8|t<<24)^e>>>7)+(q>>>0<he>>>0?1:0)|0;he=(G>>>19|V<<13)^(G<<3|V>>>29)^(G>>>6|V<<26)|0;q=q+he|0;Y=Y+((V>>>19|G<<13)^(V<<3|G>>>29)^V>>>6)+(q>>>0<he>>>0?1:0)|0;le=0xa0e6e70+q|0;ue=0x14292967+Y+(le>>>0<q>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=J;Z=W;J=Q;W=X;Q=z;X=le+(W&Z^te&(W^Z))|0;z=ue+(Q&J^ee&(Q^J))+(X>>>0<le>>>0?1:0)|0;he=(W>>>28|Q<<4)^(W<<30|Q>>>2)^(W<<25|Q>>>7)|0;X=X+he|0;z=z+((Q>>>28|W<<4)^(Q<<30|W>>>2)^(Q<<25|W>>>7))+(X>>>0<he>>>0?1:0)|0;t=t+B|0;e=e+x+(t>>>0<B>>>0?1:0)|0;he=(A>>>1|r<<31)^(A>>>8|r<<24)^(A>>>7|r<<25)|0;t=t+he|0;e=e+((r>>>1|A<<31)^(r>>>8|A<<24)^r>>>7)+(t>>>0<he>>>0?1:0)|0;he=(K>>>19|j<<13)^(K<<3|j>>>29)^(K>>>6|j<<26)|0;t=t+he|0;e=e+((j>>>19|K<<13)^(j<<3|K>>>29)^j>>>6)+(t>>>0<he>>>0?1:0)|0;le=0x46d22ffc+t|0;ue=0x27b70a85+e+(le>>>0<t>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=J;Z=W;J=Q;W=X;Q=z;X=le+(W&Z^te&(W^Z))|0;z=ue+(Q&J^ee&(Q^J))+(X>>>0<le>>>0?1:0)|0;he=(W>>>28|Q<<4)^(W<<30|Q>>>2)^(W<<25|Q>>>7)|0;X=X+he|0;z=z+((Q>>>28|W<<4)^(Q<<30|W>>>2)^(Q<<25|W>>>7))+(X>>>0<he>>>0?1:0)|0;A=A+M|0;r=r+D+(A>>>0<M>>>0?1:0)|0;he=(E>>>1|w<<31)^(E>>>8|w<<24)^(E>>>7|w<<25)|0;A=A+he|0;r=r+((w>>>1|E<<31)^(w>>>8|E<<24)^w>>>7)+(A>>>0<he>>>0?1:0)|0;he=(q>>>19|Y<<13)^(q<<3|Y>>>29)^(q>>>6|Y<<26)|0;A=A+he|0;r=r+((Y>>>19|q<<13)^(Y<<3|q>>>29)^Y>>>6)+(A>>>0<he>>>0?1:0)|0;le=0x5c26c926+A|0;ue=0x2e1b2138+r+(le>>>0<A>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=J;Z=W;J=Q;W=X;Q=z;X=le+(W&Z^te&(W^Z))|0;z=ue+(Q&J^ee&(Q^J))+(X>>>0<le>>>0?1:0)|0;he=(W>>>28|Q<<4)^(W<<30|Q>>>2)^(W<<25|Q>>>7)|0;X=X+he|0;z=z+((Q>>>28|W<<4)^(Q<<30|W>>>2)^(Q<<25|W>>>7))+(X>>>0<he>>>0?1:0)|0;E=E+L|0;w=w+U+(E>>>0<L>>>0?1:0)|0;he=(_>>>1|v<<31)^(_>>>8|v<<24)^(_>>>7|v<<25)|0;E=E+he|0;w=w+((v>>>1|_<<31)^(v>>>8|_<<24)^v>>>7)+(E>>>0<he>>>0?1:0)|0;he=(t>>>19|e<<13)^(t<<3|e>>>29)^(t>>>6|e<<26)|0;E=E+he|0;w=w+((e>>>19|t<<13)^(e<<3|t>>>29)^e>>>6)+(E>>>0<he>>>0?1:0)|0;le=0x5ac42aed+E|0;ue=0x4d2c6dfc+w+(le>>>0<E>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=J;Z=W;J=Q;W=X;Q=z;X=le+(W&Z^te&(W^Z))|0;z=ue+(Q&J^ee&(Q^J))+(X>>>0<le>>>0?1:0)|0;he=(W>>>28|Q<<4)^(W<<30|Q>>>2)^(W<<25|Q>>>7)|0;X=X+he|0;z=z+((Q>>>28|W<<4)^(Q<<30|W>>>2)^(Q<<25|W>>>7))+(X>>>0<he>>>0?1:0)|0;_=_+H|0;v=v+F+(_>>>0<H>>>0?1:0)|0;he=($>>>1|S<<31)^($>>>8|S<<24)^($>>>7|S<<25)|0;_=_+he|0;v=v+((S>>>1|$<<31)^(S>>>8|$<<24)^S>>>7)+(_>>>0<he>>>0?1:0)|0;he=(A>>>19|r<<13)^(A<<3|r>>>29)^(A>>>6|r<<26)|0;_=_+he|0;v=v+((r>>>19|A<<13)^(r<<3|A>>>29)^r>>>6)+(_>>>0<he>>>0?1:0)|0;le=0x9d95b3df+_|0;ue=0x53380d13+v+(le>>>0<_>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=J;Z=W;J=Q;W=X;Q=z;X=le+(W&Z^te&(W^Z))|0;z=ue+(Q&J^ee&(Q^J))+(X>>>0<le>>>0?1:0)|0;he=(W>>>28|Q<<4)^(W<<30|Q>>>2)^(W<<25|Q>>>7)|0;X=X+he|0;z=z+((Q>>>28|W<<4)^(Q<<30|W>>>2)^(Q<<25|W>>>7))+(X>>>0<he>>>0?1:0)|0;$=$+G|0;S=S+V+($>>>0<G>>>0?1:0)|0;he=(I>>>1|T<<31)^(I>>>8|T<<24)^(I>>>7|T<<25)|0;$=$+he|0;S=S+((T>>>1|I<<31)^(T>>>8|I<<24)^T>>>7)+($>>>0<he>>>0?1:0)|0;he=(E>>>19|w<<13)^(E<<3|w>>>29)^(E>>>6|w<<26)|0;$=$+he|0;S=S+((w>>>19|E<<13)^(w<<3|E>>>29)^w>>>6)+($>>>0<he>>>0?1:0)|0;le=0x8baf63de+$|0;ue=0x650a7354+S+(le>>>0<$>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=J;Z=W;J=Q;W=X;Q=z;X=le+(W&Z^te&(W^Z))|0;z=ue+(Q&J^ee&(Q^J))+(X>>>0<le>>>0?1:0)|0;he=(W>>>28|Q<<4)^(W<<30|Q>>>2)^(W<<25|Q>>>7)|0;X=X+he|0;z=z+((Q>>>28|W<<4)^(Q<<30|W>>>2)^(Q<<25|W>>>7))+(X>>>0<he>>>0?1:0)|0;I=I+K|0;T=T+j+(I>>>0<K>>>0?1:0)|0;he=(P>>>1|C<<31)^(P>>>8|C<<24)^(P>>>7|C<<25)|0;I=I+he|0;T=T+((C>>>1|P<<31)^(C>>>8|P<<24)^C>>>7)+(I>>>0<he>>>0?1:0)|0;he=(_>>>19|v<<13)^(_<<3|v>>>29)^(_>>>6|v<<26)|0;I=I+he|0;T=T+((v>>>19|_<<13)^(v<<3|_>>>29)^v>>>6)+(I>>>0<he>>>0?1:0)|0;le=0x3c77b2a8+I|0;ue=0x766a0abb+T+(le>>>0<I>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=J;Z=W;J=Q;W=X;Q=z;X=le+(W&Z^te&(W^Z))|0;z=ue+(Q&J^ee&(Q^J))+(X>>>0<le>>>0?1:0)|0;he=(W>>>28|Q<<4)^(W<<30|Q>>>2)^(W<<25|Q>>>7)|0;X=X+he|0;z=z+((Q>>>28|W<<4)^(Q<<30|W>>>2)^(Q<<25|W>>>7))+(X>>>0<he>>>0?1:0)|0;P=P+q|0;C=C+Y+(P>>>0<q>>>0?1:0)|0;he=(N>>>1|R<<31)^(N>>>8|R<<24)^(N>>>7|R<<25)|0;P=P+he|0;C=C+((R>>>1|N<<31)^(R>>>8|N<<24)^R>>>7)+(P>>>0<he>>>0?1:0)|0;he=($>>>19|S<<13)^($<<3|S>>>29)^($>>>6|S<<26)|0;P=P+he|0;C=C+((S>>>19|$<<13)^(S<<3|$>>>29)^S>>>6)+(P>>>0<he>>>0?1:0)|0;le=0x47edaee6+P|0;ue=0x81c2c92e+C+(le>>>0<P>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=J;Z=W;J=Q;W=X;Q=z;X=le+(W&Z^te&(W^Z))|0;z=ue+(Q&J^ee&(Q^J))+(X>>>0<le>>>0?1:0)|0;he=(W>>>28|Q<<4)^(W<<30|Q>>>2)^(W<<25|Q>>>7)|0;X=X+he|0;z=z+((Q>>>28|W<<4)^(Q<<30|W>>>2)^(Q<<25|W>>>7))+(X>>>0<he>>>0?1:0)|0;N=N+t|0;R=R+e+(N>>>0<t>>>0?1:0)|0;he=(O>>>1|k<<31)^(O>>>8|k<<24)^(O>>>7|k<<25)|0;N=N+he|0;R=R+((k>>>1|O<<31)^(k>>>8|O<<24)^k>>>7)+(N>>>0<he>>>0?1:0)|0;he=(I>>>19|T<<13)^(I<<3|T>>>29)^(I>>>6|T<<26)|0;N=N+he|0;R=R+((T>>>19|I<<13)^(T<<3|I>>>29)^T>>>6)+(N>>>0<he>>>0?1:0)|0;le=0x1482353b+N|0;ue=0x92722c85+R+(le>>>0<N>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=J;Z=W;J=Q;W=X;Q=z;X=le+(W&Z^te&(W^Z))|0;z=ue+(Q&J^ee&(Q^J))+(X>>>0<le>>>0?1:0)|0;he=(W>>>28|Q<<4)^(W<<30|Q>>>2)^(W<<25|Q>>>7)|0;X=X+he|0;z=z+((Q>>>28|W<<4)^(Q<<30|W>>>2)^(Q<<25|W>>>7))+(X>>>0<he>>>0?1:0)|0;O=O+A|0;k=k+r+(O>>>0<A>>>0?1:0)|0;he=(B>>>1|x<<31)^(B>>>8|x<<24)^(B>>>7|x<<25)|0;O=O+he|0;k=k+((x>>>1|B<<31)^(x>>>8|B<<24)^x>>>7)+(O>>>0<he>>>0?1:0)|0;he=(P>>>19|C<<13)^(P<<3|C>>>29)^(P>>>6|C<<26)|0;O=O+he|0;k=k+((C>>>19|P<<13)^(C<<3|P>>>29)^C>>>6)+(O>>>0<he>>>0?1:0)|0;le=0x4cf10364+O|0;ue=0xa2bfe8a1+k+(le>>>0<O>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=J;Z=W;J=Q;W=X;Q=z;X=le+(W&Z^te&(W^Z))|0;z=ue+(Q&J^ee&(Q^J))+(X>>>0<le>>>0?1:0)|0;he=(W>>>28|Q<<4)^(W<<30|Q>>>2)^(W<<25|Q>>>7)|0;X=X+he|0;z=z+((Q>>>28|W<<4)^(Q<<30|W>>>2)^(Q<<25|W>>>7))+(X>>>0<he>>>0?1:0)|0;B=B+E|0;x=x+w+(B>>>0<E>>>0?1:0)|0;he=(M>>>1|D<<31)^(M>>>8|D<<24)^(M>>>7|D<<25)|0;B=B+he|0;x=x+((D>>>1|M<<31)^(D>>>8|M<<24)^D>>>7)+(B>>>0<he>>>0?1:0)|0;he=(N>>>19|R<<13)^(N<<3|R>>>29)^(N>>>6|R<<26)|0;B=B+he|0;x=x+((R>>>19|N<<13)^(R<<3|N>>>29)^R>>>6)+(B>>>0<he>>>0?1:0)|0;le=0xbc423001+B|0;ue=0xa81a664b+x+(le>>>0<B>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=J;Z=W;J=Q;W=X;Q=z;X=le+(W&Z^te&(W^Z))|0;z=ue+(Q&J^ee&(Q^J))+(X>>>0<le>>>0?1:0)|0;he=(W>>>28|Q<<4)^(W<<30|Q>>>2)^(W<<25|Q>>>7)|0;X=X+he|0;z=z+((Q>>>28|W<<4)^(Q<<30|W>>>2)^(Q<<25|W>>>7))+(X>>>0<he>>>0?1:0)|0;M=M+_|0;D=D+v+(M>>>0<_>>>0?1:0)|0;he=(L>>>1|U<<31)^(L>>>8|U<<24)^(L>>>7|U<<25)|0;M=M+he|0;D=D+((U>>>1|L<<31)^(U>>>8|L<<24)^U>>>7)+(M>>>0<he>>>0?1:0)|0;he=(O>>>19|k<<13)^(O<<3|k>>>29)^(O>>>6|k<<26)|0;M=M+he|0;D=D+((k>>>19|O<<13)^(k<<3|O>>>29)^k>>>6)+(M>>>0<he>>>0?1:0)|0;le=0xd0f89791+M|0;ue=0xc24b8b70+D+(le>>>0<M>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=J;Z=W;J=Q;W=X;Q=z;X=le+(W&Z^te&(W^Z))|0;z=ue+(Q&J^ee&(Q^J))+(X>>>0<le>>>0?1:0)|0;he=(W>>>28|Q<<4)^(W<<30|Q>>>2)^(W<<25|Q>>>7)|0;X=X+he|0;z=z+((Q>>>28|W<<4)^(Q<<30|W>>>2)^(Q<<25|W>>>7))+(X>>>0<he>>>0?1:0)|0;L=L+$|0;U=U+S+(L>>>0<$>>>0?1:0)|0;he=(H>>>1|F<<31)^(H>>>8|F<<24)^(H>>>7|F<<25)|0;L=L+he|0;U=U+((F>>>1|H<<31)^(F>>>8|H<<24)^F>>>7)+(L>>>0<he>>>0?1:0)|0;he=(B>>>19|x<<13)^(B<<3|x>>>29)^(B>>>6|x<<26)|0;L=L+he|0;U=U+((x>>>19|B<<13)^(x<<3|B>>>29)^x>>>6)+(L>>>0<he>>>0?1:0)|0;le=0x654be30+L|0;ue=0xc76c51a3+U+(le>>>0<L>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=J;Z=W;J=Q;W=X;Q=z;X=le+(W&Z^te&(W^Z))|0;z=ue+(Q&J^ee&(Q^J))+(X>>>0<le>>>0?1:0)|0;he=(W>>>28|Q<<4)^(W<<30|Q>>>2)^(W<<25|Q>>>7)|0;X=X+he|0;z=z+((Q>>>28|W<<4)^(Q<<30|W>>>2)^(Q<<25|W>>>7))+(X>>>0<he>>>0?1:0)|0;H=H+I|0;F=F+T+(H>>>0<I>>>0?1:0)|0;he=(G>>>1|V<<31)^(G>>>8|V<<24)^(G>>>7|V<<25)|0;H=H+he|0;F=F+((V>>>1|G<<31)^(V>>>8|G<<24)^V>>>7)+(H>>>0<he>>>0?1:0)|0;he=(M>>>19|D<<13)^(M<<3|D>>>29)^(M>>>6|D<<26)|0;H=H+he|0;F=F+((D>>>19|M<<13)^(D<<3|M>>>29)^D>>>6)+(H>>>0<he>>>0?1:0)|0;le=0xd6ef5218+H|0;ue=0xd192e819+F+(le>>>0<H>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=J;Z=W;J=Q;W=X;Q=z;X=le+(W&Z^te&(W^Z))|0;z=ue+(Q&J^ee&(Q^J))+(X>>>0<le>>>0?1:0)|0;he=(W>>>28|Q<<4)^(W<<30|Q>>>2)^(W<<25|Q>>>7)|0;X=X+he|0;z=z+((Q>>>28|W<<4)^(Q<<30|W>>>2)^(Q<<25|W>>>7))+(X>>>0<he>>>0?1:0)|0;G=G+P|0;V=V+C+(G>>>0<P>>>0?1:0)|0;he=(K>>>1|j<<31)^(K>>>8|j<<24)^(K>>>7|j<<25)|0;G=G+he|0;V=V+((j>>>1|K<<31)^(j>>>8|K<<24)^j>>>7)+(G>>>0<he>>>0?1:0)|0;he=(L>>>19|U<<13)^(L<<3|U>>>29)^(L>>>6|U<<26)|0;G=G+he|0;V=V+((U>>>19|L<<13)^(U<<3|L>>>29)^U>>>6)+(G>>>0<he>>>0?1:0)|0;le=0x5565a910+G|0;ue=0xd6990624+V+(le>>>0<G>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=J;Z=W;J=Q;W=X;Q=z;X=le+(W&Z^te&(W^Z))|0;z=ue+(Q&J^ee&(Q^J))+(X>>>0<le>>>0?1:0)|0;he=(W>>>28|Q<<4)^(W<<30|Q>>>2)^(W<<25|Q>>>7)|0;X=X+he|0;z=z+((Q>>>28|W<<4)^(Q<<30|W>>>2)^(Q<<25|W>>>7))+(X>>>0<he>>>0?1:0)|0;K=K+N|0;j=j+R+(K>>>0<N>>>0?1:0)|0;he=(q>>>1|Y<<31)^(q>>>8|Y<<24)^(q>>>7|Y<<25)|0;K=K+he|0;j=j+((Y>>>1|q<<31)^(Y>>>8|q<<24)^Y>>>7)+(K>>>0<he>>>0?1:0)|0;he=(H>>>19|F<<13)^(H<<3|F>>>29)^(H>>>6|F<<26)|0;K=K+he|0;j=j+((F>>>19|H<<13)^(F<<3|H>>>29)^F>>>6)+(K>>>0<he>>>0?1:0)|0;le=0x5771202a+K|0;ue=0xf40e3585+j+(le>>>0<K>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=J;Z=W;J=Q;W=X;Q=z;X=le+(W&Z^te&(W^Z))|0;z=ue+(Q&J^ee&(Q^J))+(X>>>0<le>>>0?1:0)|0;he=(W>>>28|Q<<4)^(W<<30|Q>>>2)^(W<<25|Q>>>7)|0;X=X+he|0;z=z+((Q>>>28|W<<4)^(Q<<30|W>>>2)^(Q<<25|W>>>7))+(X>>>0<he>>>0?1:0)|0;q=q+O|0;Y=Y+k+(q>>>0<O>>>0?1:0)|0;he=(t>>>1|e<<31)^(t>>>8|e<<24)^(t>>>7|e<<25)|0;q=q+he|0;Y=Y+((e>>>1|t<<31)^(e>>>8|t<<24)^e>>>7)+(q>>>0<he>>>0?1:0)|0;he=(G>>>19|V<<13)^(G<<3|V>>>29)^(G>>>6|V<<26)|0;q=q+he|0;Y=Y+((V>>>19|G<<13)^(V<<3|G>>>29)^V>>>6)+(q>>>0<he>>>0?1:0)|0;le=0x32bbd1b8+q|0;ue=0x106aa070+Y+(le>>>0<q>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=J;Z=W;J=Q;W=X;Q=z;X=le+(W&Z^te&(W^Z))|0;z=ue+(Q&J^ee&(Q^J))+(X>>>0<le>>>0?1:0)|0;he=(W>>>28|Q<<4)^(W<<30|Q>>>2)^(W<<25|Q>>>7)|0;X=X+he|0;z=z+((Q>>>28|W<<4)^(Q<<30|W>>>2)^(Q<<25|W>>>7))+(X>>>0<he>>>0?1:0)|0;t=t+B|0;e=e+x+(t>>>0<B>>>0?1:0)|0;he=(A>>>1|r<<31)^(A>>>8|r<<24)^(A>>>7|r<<25)|0;t=t+he|0;e=e+((r>>>1|A<<31)^(r>>>8|A<<24)^r>>>7)+(t>>>0<he>>>0?1:0)|0;he=(K>>>19|j<<13)^(K<<3|j>>>29)^(K>>>6|j<<26)|0;t=t+he|0;e=e+((j>>>19|K<<13)^(j<<3|K>>>29)^j>>>6)+(t>>>0<he>>>0?1:0)|0;le=0xb8d2d0c8+t|0;ue=0x19a4c116+e+(le>>>0<t>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=J;Z=W;J=Q;W=X;Q=z;X=le+(W&Z^te&(W^Z))|0;z=ue+(Q&J^ee&(Q^J))+(X>>>0<le>>>0?1:0)|0;he=(W>>>28|Q<<4)^(W<<30|Q>>>2)^(W<<25|Q>>>7)|0;X=X+he|0;z=z+((Q>>>28|W<<4)^(Q<<30|W>>>2)^(Q<<25|W>>>7))+(X>>>0<he>>>0?1:0)|0;A=A+M|0;r=r+D+(A>>>0<M>>>0?1:0)|0;he=(E>>>1|w<<31)^(E>>>8|w<<24)^(E>>>7|w<<25)|0;A=A+he|0;r=r+((w>>>1|E<<31)^(w>>>8|E<<24)^w>>>7)+(A>>>0<he>>>0?1:0)|0;he=(q>>>19|Y<<13)^(q<<3|Y>>>29)^(q>>>6|Y<<26)|0;A=A+he|0;r=r+((Y>>>19|q<<13)^(Y<<3|q>>>29)^Y>>>6)+(A>>>0<he>>>0?1:0)|0;le=0x5141ab53+A|0;ue=0x1e376c08+r+(le>>>0<A>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=J;Z=W;J=Q;W=X;Q=z;X=le+(W&Z^te&(W^Z))|0;z=ue+(Q&J^ee&(Q^J))+(X>>>0<le>>>0?1:0)|0;he=(W>>>28|Q<<4)^(W<<30|Q>>>2)^(W<<25|Q>>>7)|0;X=X+he|0;z=z+((Q>>>28|W<<4)^(Q<<30|W>>>2)^(Q<<25|W>>>7))+(X>>>0<he>>>0?1:0)|0;E=E+L|0;w=w+U+(E>>>0<L>>>0?1:0)|0;he=(_>>>1|v<<31)^(_>>>8|v<<24)^(_>>>7|v<<25)|0;E=E+he|0;w=w+((v>>>1|_<<31)^(v>>>8|_<<24)^v>>>7)+(E>>>0<he>>>0?1:0)|0;he=(t>>>19|e<<13)^(t<<3|e>>>29)^(t>>>6|e<<26)|0;E=E+he|0;w=w+((e>>>19|t<<13)^(e<<3|t>>>29)^e>>>6)+(E>>>0<he>>>0?1:0)|0;le=0xdf8eeb99+E|0;ue=0x2748774c+w+(le>>>0<E>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=J;Z=W;J=Q;W=X;Q=z;X=le+(W&Z^te&(W^Z))|0;z=ue+(Q&J^ee&(Q^J))+(X>>>0<le>>>0?1:0)|0;he=(W>>>28|Q<<4)^(W<<30|Q>>>2)^(W<<25|Q>>>7)|0;X=X+he|0;z=z+((Q>>>28|W<<4)^(Q<<30|W>>>2)^(Q<<25|W>>>7))+(X>>>0<he>>>0?1:0)|0;_=_+H|0;v=v+F+(_>>>0<H>>>0?1:0)|0;he=($>>>1|S<<31)^($>>>8|S<<24)^($>>>7|S<<25)|0;_=_+he|0;v=v+((S>>>1|$<<31)^(S>>>8|$<<24)^S>>>7)+(_>>>0<he>>>0?1:0)|0;he=(A>>>19|r<<13)^(A<<3|r>>>29)^(A>>>6|r<<26)|0;_=_+he|0;v=v+((r>>>19|A<<13)^(r<<3|A>>>29)^r>>>6)+(_>>>0<he>>>0?1:0)|0;le=0xe19b48a8+_|0;ue=0x34b0bcb5+v+(le>>>0<_>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=J;Z=W;J=Q;W=X;Q=z;X=le+(W&Z^te&(W^Z))|0;z=ue+(Q&J^ee&(Q^J))+(X>>>0<le>>>0?1:0)|0;he=(W>>>28|Q<<4)^(W<<30|Q>>>2)^(W<<25|Q>>>7)|0;X=X+he|0;z=z+((Q>>>28|W<<4)^(Q<<30|W>>>2)^(Q<<25|W>>>7))+(X>>>0<he>>>0?1:0)|0;$=$+G|0;S=S+V+($>>>0<G>>>0?1:0)|0;he=(I>>>1|T<<31)^(I>>>8|T<<24)^(I>>>7|T<<25)|0;$=$+he|0;S=S+((T>>>1|I<<31)^(T>>>8|I<<24)^T>>>7)+($>>>0<he>>>0?1:0)|0;he=(E>>>19|w<<13)^(E<<3|w>>>29)^(E>>>6|w<<26)|0;$=$+he|0;S=S+((w>>>19|E<<13)^(w<<3|E>>>29)^w>>>6)+($>>>0<he>>>0?1:0)|0;le=0xc5c95a63+$|0;ue=0x391c0cb3+S+(le>>>0<$>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=J;Z=W;J=Q;W=X;Q=z;X=le+(W&Z^te&(W^Z))|0;z=ue+(Q&J^ee&(Q^J))+(X>>>0<le>>>0?1:0)|0;he=(W>>>28|Q<<4)^(W<<30|Q>>>2)^(W<<25|Q>>>7)|0;X=X+he|0;z=z+((Q>>>28|W<<4)^(Q<<30|W>>>2)^(Q<<25|W>>>7))+(X>>>0<he>>>0?1:0)|0;I=I+K|0;T=T+j+(I>>>0<K>>>0?1:0)|0;he=(P>>>1|C<<31)^(P>>>8|C<<24)^(P>>>7|C<<25)|0;I=I+he|0;T=T+((C>>>1|P<<31)^(C>>>8|P<<24)^C>>>7)+(I>>>0<he>>>0?1:0)|0;he=(_>>>19|v<<13)^(_<<3|v>>>29)^(_>>>6|v<<26)|0;I=I+he|0;T=T+((v>>>19|_<<13)^(v<<3|_>>>29)^v>>>6)+(I>>>0<he>>>0?1:0)|0;le=0xe3418acb+I|0;ue=0x4ed8aa4a+T+(le>>>0<I>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=J;Z=W;J=Q;W=X;Q=z;X=le+(W&Z^te&(W^Z))|0;z=ue+(Q&J^ee&(Q^J))+(X>>>0<le>>>0?1:0)|0;he=(W>>>28|Q<<4)^(W<<30|Q>>>2)^(W<<25|Q>>>7)|0;X=X+he|0;z=z+((Q>>>28|W<<4)^(Q<<30|W>>>2)^(Q<<25|W>>>7))+(X>>>0<he>>>0?1:0)|0;P=P+q|0;C=C+Y+(P>>>0<q>>>0?1:0)|0;he=(N>>>1|R<<31)^(N>>>8|R<<24)^(N>>>7|R<<25)|0;P=P+he|0;C=C+((R>>>1|N<<31)^(R>>>8|N<<24)^R>>>7)+(P>>>0<he>>>0?1:0)|0;he=($>>>19|S<<13)^($<<3|S>>>29)^($>>>6|S<<26)|0;P=P+he|0;C=C+((S>>>19|$<<13)^(S<<3|$>>>29)^S>>>6)+(P>>>0<he>>>0?1:0)|0;le=0x7763e373+P|0;ue=0x5b9cca4f+C+(le>>>0<P>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=J;Z=W;J=Q;W=X;Q=z;X=le+(W&Z^te&(W^Z))|0;z=ue+(Q&J^ee&(Q^J))+(X>>>0<le>>>0?1:0)|0;he=(W>>>28|Q<<4)^(W<<30|Q>>>2)^(W<<25|Q>>>7)|0;X=X+he|0;z=z+((Q>>>28|W<<4)^(Q<<30|W>>>2)^(Q<<25|W>>>7))+(X>>>0<he>>>0?1:0)|0;N=N+t|0;R=R+e+(N>>>0<t>>>0?1:0)|0;he=(O>>>1|k<<31)^(O>>>8|k<<24)^(O>>>7|k<<25)|0;N=N+he|0;R=R+((k>>>1|O<<31)^(k>>>8|O<<24)^k>>>7)+(N>>>0<he>>>0?1:0)|0;he=(I>>>19|T<<13)^(I<<3|T>>>29)^(I>>>6|T<<26)|0;N=N+he|0;R=R+((T>>>19|I<<13)^(T<<3|I>>>29)^T>>>6)+(N>>>0<he>>>0?1:0)|0;le=0xd6b2b8a3+N|0;ue=0x682e6ff3+R+(le>>>0<N>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=J;Z=W;J=Q;W=X;Q=z;X=le+(W&Z^te&(W^Z))|0;z=ue+(Q&J^ee&(Q^J))+(X>>>0<le>>>0?1:0)|0;he=(W>>>28|Q<<4)^(W<<30|Q>>>2)^(W<<25|Q>>>7)|0;X=X+he|0;z=z+((Q>>>28|W<<4)^(Q<<30|W>>>2)^(Q<<25|W>>>7))+(X>>>0<he>>>0?1:0)|0;O=O+A|0;k=k+r+(O>>>0<A>>>0?1:0)|0;he=(B>>>1|x<<31)^(B>>>8|x<<24)^(B>>>7|x<<25)|0;O=O+he|0;k=k+((x>>>1|B<<31)^(x>>>8|B<<24)^x>>>7)+(O>>>0<he>>>0?1:0)|0;he=(P>>>19|C<<13)^(P<<3|C>>>29)^(P>>>6|C<<26)|0;O=O+he|0;k=k+((C>>>19|P<<13)^(C<<3|P>>>29)^C>>>6)+(O>>>0<he>>>0?1:0)|0;le=0x5defb2fc+O|0;ue=0x748f82ee+k+(le>>>0<O>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=J;Z=W;J=Q;W=X;Q=z;X=le+(W&Z^te&(W^Z))|0;z=ue+(Q&J^ee&(Q^J))+(X>>>0<le>>>0?1:0)|0;he=(W>>>28|Q<<4)^(W<<30|Q>>>2)^(W<<25|Q>>>7)|0;X=X+he|0;z=z+((Q>>>28|W<<4)^(Q<<30|W>>>2)^(Q<<25|W>>>7))+(X>>>0<he>>>0?1:0)|0;B=B+E|0;x=x+w+(B>>>0<E>>>0?1:0)|0;he=(M>>>1|D<<31)^(M>>>8|D<<24)^(M>>>7|D<<25)|0;B=B+he|0;x=x+((D>>>1|M<<31)^(D>>>8|M<<24)^D>>>7)+(B>>>0<he>>>0?1:0)|0;he=(N>>>19|R<<13)^(N<<3|R>>>29)^(N>>>6|R<<26)|0;B=B+he|0;x=x+((R>>>19|N<<13)^(R<<3|N>>>29)^R>>>6)+(B>>>0<he>>>0?1:0)|0;le=0x43172f60+B|0;ue=0x78a5636f+x+(le>>>0<B>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=J;Z=W;J=Q;W=X;Q=z;X=le+(W&Z^te&(W^Z))|0;z=ue+(Q&J^ee&(Q^J))+(X>>>0<le>>>0?1:0)|0;he=(W>>>28|Q<<4)^(W<<30|Q>>>2)^(W<<25|Q>>>7)|0;X=X+he|0;z=z+((Q>>>28|W<<4)^(Q<<30|W>>>2)^(Q<<25|W>>>7))+(X>>>0<he>>>0?1:0)|0;M=M+_|0;D=D+v+(M>>>0<_>>>0?1:0)|0;he=(L>>>1|U<<31)^(L>>>8|U<<24)^(L>>>7|U<<25)|0;M=M+he|0;D=D+((U>>>1|L<<31)^(U>>>8|L<<24)^U>>>7)+(M>>>0<he>>>0?1:0)|0;he=(O>>>19|k<<13)^(O<<3|k>>>29)^(O>>>6|k<<26)|0;M=M+he|0;D=D+((k>>>19|O<<13)^(k<<3|O>>>29)^k>>>6)+(M>>>0<he>>>0?1:0)|0;le=0xa1f0ab72+M|0;ue=0x84c87814+D+(le>>>0<M>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=J;Z=W;J=Q;W=X;Q=z;X=le+(W&Z^te&(W^Z))|0;z=ue+(Q&J^ee&(Q^J))+(X>>>0<le>>>0?1:0)|0;he=(W>>>28|Q<<4)^(W<<30|Q>>>2)^(W<<25|Q>>>7)|0;X=X+he|0;z=z+((Q>>>28|W<<4)^(Q<<30|W>>>2)^(Q<<25|W>>>7))+(X>>>0<he>>>0?1:0)|0;L=L+$|0;U=U+S+(L>>>0<$>>>0?1:0)|0;he=(H>>>1|F<<31)^(H>>>8|F<<24)^(H>>>7|F<<25)|0;L=L+he|0;U=U+((F>>>1|H<<31)^(F>>>8|H<<24)^F>>>7)+(L>>>0<he>>>0?1:0)|0;he=(B>>>19|x<<13)^(B<<3|x>>>29)^(B>>>6|x<<26)|0;L=L+he|0;U=U+((x>>>19|B<<13)^(x<<3|B>>>29)^x>>>6)+(L>>>0<he>>>0?1:0)|0;le=0x1a6439ec+L|0;ue=0x8cc70208+U+(le>>>0<L>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=J;Z=W;J=Q;W=X;Q=z;X=le+(W&Z^te&(W^Z))|0;z=ue+(Q&J^ee&(Q^J))+(X>>>0<le>>>0?1:0)|0;he=(W>>>28|Q<<4)^(W<<30|Q>>>2)^(W<<25|Q>>>7)|0;X=X+he|0;z=z+((Q>>>28|W<<4)^(Q<<30|W>>>2)^(Q<<25|W>>>7))+(X>>>0<he>>>0?1:0)|0;H=H+I|0;F=F+T+(H>>>0<I>>>0?1:0)|0;he=(G>>>1|V<<31)^(G>>>8|V<<24)^(G>>>7|V<<25)|0;H=H+he|0;F=F+((V>>>1|G<<31)^(V>>>8|G<<24)^V>>>7)+(H>>>0<he>>>0?1:0)|0;he=(M>>>19|D<<13)^(M<<3|D>>>29)^(M>>>6|D<<26)|0;H=H+he|0;F=F+((D>>>19|M<<13)^(D<<3|M>>>29)^D>>>6)+(H>>>0<he>>>0?1:0)|0;le=0x23631e28+H|0;ue=0x90befffa+F+(le>>>0<H>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=J;Z=W;J=Q;W=X;Q=z;X=le+(W&Z^te&(W^Z))|0;z=ue+(Q&J^ee&(Q^J))+(X>>>0<le>>>0?1:0)|0;he=(W>>>28|Q<<4)^(W<<30|Q>>>2)^(W<<25|Q>>>7)|0;X=X+he|0;z=z+((Q>>>28|W<<4)^(Q<<30|W>>>2)^(Q<<25|W>>>7))+(X>>>0<he>>>0?1:0)|0;G=G+P|0;V=V+C+(G>>>0<P>>>0?1:0)|0;he=(K>>>1|j<<31)^(K>>>8|j<<24)^(K>>>7|j<<25)|0;G=G+he|0;V=V+((j>>>1|K<<31)^(j>>>8|K<<24)^j>>>7)+(G>>>0<he>>>0?1:0)|0;he=(L>>>19|U<<13)^(L<<3|U>>>29)^(L>>>6|U<<26)|0;G=G+he|0;V=V+((U>>>19|L<<13)^(U<<3|L>>>29)^U>>>6)+(G>>>0<he>>>0?1:0)|0;le=0xde82bde9+G|0;ue=0xa4506ceb+V+(le>>>0<G>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=J;Z=W;J=Q;W=X;Q=z;X=le+(W&Z^te&(W^Z))|0;z=ue+(Q&J^ee&(Q^J))+(X>>>0<le>>>0?1:0)|0;he=(W>>>28|Q<<4)^(W<<30|Q>>>2)^(W<<25|Q>>>7)|0;X=X+he|0;z=z+((Q>>>28|W<<4)^(Q<<30|W>>>2)^(Q<<25|W>>>7))+(X>>>0<he>>>0?1:0)|0;K=K+N|0;j=j+R+(K>>>0<N>>>0?1:0)|0;he=(q>>>1|Y<<31)^(q>>>8|Y<<24)^(q>>>7|Y<<25)|0;K=K+he|0;j=j+((Y>>>1|q<<31)^(Y>>>8|q<<24)^Y>>>7)+(K>>>0<he>>>0?1:0)|0;he=(H>>>19|F<<13)^(H<<3|F>>>29)^(H>>>6|F<<26)|0;K=K+he|0;j=j+((F>>>19|H<<13)^(F<<3|H>>>29)^F>>>6)+(K>>>0<he>>>0?1:0)|0;le=0xb2c67915+K|0;ue=0xbef9a3f7+j+(le>>>0<K>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=J;Z=W;J=Q;W=X;Q=z;X=le+(W&Z^te&(W^Z))|0;z=ue+(Q&J^ee&(Q^J))+(X>>>0<le>>>0?1:0)|0;he=(W>>>28|Q<<4)^(W<<30|Q>>>2)^(W<<25|Q>>>7)|0;X=X+he|0;z=z+((Q>>>28|W<<4)^(Q<<30|W>>>2)^(Q<<25|W>>>7))+(X>>>0<he>>>0?1:0)|0;q=q+O|0;Y=Y+k+(q>>>0<O>>>0?1:0)|0;he=(t>>>1|e<<31)^(t>>>8|e<<24)^(t>>>7|e<<25)|0;q=q+he|0;Y=Y+((e>>>1|t<<31)^(e>>>8|t<<24)^e>>>7)+(q>>>0<he>>>0?1:0)|0;he=(G>>>19|V<<13)^(G<<3|V>>>29)^(G>>>6|V<<26)|0;q=q+he|0;Y=Y+((V>>>19|G<<13)^(V<<3|G>>>29)^V>>>6)+(q>>>0<he>>>0?1:0)|0;le=0xe372532b+q|0;ue=0xc67178f2+Y+(le>>>0<q>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=J;Z=W;J=Q;W=X;Q=z;X=le+(W&Z^te&(W^Z))|0;z=ue+(Q&J^ee&(Q^J))+(X>>>0<le>>>0?1:0)|0;he=(W>>>28|Q<<4)^(W<<30|Q>>>2)^(W<<25|Q>>>7)|0;X=X+he|0;z=z+((Q>>>28|W<<4)^(Q<<30|W>>>2)^(Q<<25|W>>>7))+(X>>>0<he>>>0?1:0)|0;t=t+B|0;e=e+x+(t>>>0<B>>>0?1:0)|0;he=(A>>>1|r<<31)^(A>>>8|r<<24)^(A>>>7|r<<25)|0;t=t+he|0;e=e+((r>>>1|A<<31)^(r>>>8|A<<24)^r>>>7)+(t>>>0<he>>>0?1:0)|0;he=(K>>>19|j<<13)^(K<<3|j>>>29)^(K>>>6|j<<26)|0;t=t+he|0;e=e+((j>>>19|K<<13)^(j<<3|K>>>29)^j>>>6)+(t>>>0<he>>>0?1:0)|0;le=0xea26619c+t|0;ue=0xca273ece+e+(le>>>0<t>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=J;Z=W;J=Q;W=X;Q=z;X=le+(W&Z^te&(W^Z))|0;z=ue+(Q&J^ee&(Q^J))+(X>>>0<le>>>0?1:0)|0;he=(W>>>28|Q<<4)^(W<<30|Q>>>2)^(W<<25|Q>>>7)|0;X=X+he|0;z=z+((Q>>>28|W<<4)^(Q<<30|W>>>2)^(Q<<25|W>>>7))+(X>>>0<he>>>0?1:0)|0;A=A+M|0;r=r+D+(A>>>0<M>>>0?1:0)|0;he=(E>>>1|w<<31)^(E>>>8|w<<24)^(E>>>7|w<<25)|0;A=A+he|0;r=r+((w>>>1|E<<31)^(w>>>8|E<<24)^w>>>7)+(A>>>0<he>>>0?1:0)|0;he=(q>>>19|Y<<13)^(q<<3|Y>>>29)^(q>>>6|Y<<26)|0;A=A+he|0;r=r+((Y>>>19|q<<13)^(Y<<3|q>>>29)^Y>>>6)+(A>>>0<he>>>0?1:0)|0;le=0x21c0c207+A|0;ue=0xd186b8c7+r+(le>>>0<A>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=J;Z=W;J=Q;W=X;Q=z;X=le+(W&Z^te&(W^Z))|0;z=ue+(Q&J^ee&(Q^J))+(X>>>0<le>>>0?1:0)|0;he=(W>>>28|Q<<4)^(W<<30|Q>>>2)^(W<<25|Q>>>7)|0;X=X+he|0;z=z+((Q>>>28|W<<4)^(Q<<30|W>>>2)^(Q<<25|W>>>7))+(X>>>0<he>>>0?1:0)|0;E=E+L|0;w=w+U+(E>>>0<L>>>0?1:0)|0;he=(_>>>1|v<<31)^(_>>>8|v<<24)^(_>>>7|v<<25)|0;E=E+he|0;w=w+((v>>>1|_<<31)^(v>>>8|_<<24)^v>>>7)+(E>>>0<he>>>0?1:0)|0;he=(t>>>19|e<<13)^(t<<3|e>>>29)^(t>>>6|e<<26)|0;E=E+he|0;w=w+((e>>>19|t<<13)^(e<<3|t>>>29)^e>>>6)+(E>>>0<he>>>0?1:0)|0;le=0xcde0eb1e+E|0;ue=0xeada7dd6+w+(le>>>0<E>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=J;Z=W;J=Q;W=X;Q=z;X=le+(W&Z^te&(W^Z))|0;z=ue+(Q&J^ee&(Q^J))+(X>>>0<le>>>0?1:0)|0;he=(W>>>28|Q<<4)^(W<<30|Q>>>2)^(W<<25|Q>>>7)|0;X=X+he|0;z=z+((Q>>>28|W<<4)^(Q<<30|W>>>2)^(Q<<25|W>>>7))+(X>>>0<he>>>0?1:0)|0;_=_+H|0;v=v+F+(_>>>0<H>>>0?1:0)|0;he=($>>>1|S<<31)^($>>>8|S<<24)^($>>>7|S<<25)|0;_=_+he|0;v=v+((S>>>1|$<<31)^(S>>>8|$<<24)^S>>>7)+(_>>>0<he>>>0?1:0)|0;he=(A>>>19|r<<13)^(A<<3|r>>>29)^(A>>>6|r<<26)|0;_=_+he|0;v=v+((r>>>19|A<<13)^(r<<3|A>>>29)^r>>>6)+(_>>>0<he>>>0?1:0)|0;le=0xee6ed178+_|0;ue=0xf57d4f7f+v+(le>>>0<_>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=J;Z=W;J=Q;W=X;Q=z;X=le+(W&Z^te&(W^Z))|0;z=ue+(Q&J^ee&(Q^J))+(X>>>0<le>>>0?1:0)|0;he=(W>>>28|Q<<4)^(W<<30|Q>>>2)^(W<<25|Q>>>7)|0;X=X+he|0;z=z+((Q>>>28|W<<4)^(Q<<30|W>>>2)^(Q<<25|W>>>7))+(X>>>0<he>>>0?1:0)|0;$=$+G|0;S=S+V+($>>>0<G>>>0?1:0)|0;he=(I>>>1|T<<31)^(I>>>8|T<<24)^(I>>>7|T<<25)|0;$=$+he|0;S=S+((T>>>1|I<<31)^(T>>>8|I<<24)^T>>>7)+($>>>0<he>>>0?1:0)|0;he=(E>>>19|w<<13)^(E<<3|w>>>29)^(E>>>6|w<<26)|0;$=$+he|0;S=S+((w>>>19|E<<13)^(w<<3|E>>>29)^w>>>6)+($>>>0<he>>>0?1:0)|0;le=0x72176fba+$|0;ue=0x6f067aa+S+(le>>>0<$>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=J;Z=W;J=Q;W=X;Q=z;X=le+(W&Z^te&(W^Z))|0;z=ue+(Q&J^ee&(Q^J))+(X>>>0<le>>>0?1:0)|0;he=(W>>>28|Q<<4)^(W<<30|Q>>>2)^(W<<25|Q>>>7)|0;X=X+he|0;z=z+((Q>>>28|W<<4)^(Q<<30|W>>>2)^(Q<<25|W>>>7))+(X>>>0<he>>>0?1:0)|0;I=I+K|0;T=T+j+(I>>>0<K>>>0?1:0)|0;he=(P>>>1|C<<31)^(P>>>8|C<<24)^(P>>>7|C<<25)|0;I=I+he|0;T=T+((C>>>1|P<<31)^(C>>>8|P<<24)^C>>>7)+(I>>>0<he>>>0?1:0)|0;he=(_>>>19|v<<13)^(_<<3|v>>>29)^(_>>>6|v<<26)|0;I=I+he|0;T=T+((v>>>19|_<<13)^(v<<3|_>>>29)^v>>>6)+(I>>>0<he>>>0?1:0)|0;le=0xa2c898a6+I|0;ue=0xa637dc5+T+(le>>>0<I>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=J;Z=W;J=Q;W=X;Q=z;X=le+(W&Z^te&(W^Z))|0;z=ue+(Q&J^ee&(Q^J))+(X>>>0<le>>>0?1:0)|0;he=(W>>>28|Q<<4)^(W<<30|Q>>>2)^(W<<25|Q>>>7)|0;X=X+he|0;z=z+((Q>>>28|W<<4)^(Q<<30|W>>>2)^(Q<<25|W>>>7))+(X>>>0<he>>>0?1:0)|0;P=P+q|0;C=C+Y+(P>>>0<q>>>0?1:0)|0;he=(N>>>1|R<<31)^(N>>>8|R<<24)^(N>>>7|R<<25)|0;P=P+he|0;C=C+((R>>>1|N<<31)^(R>>>8|N<<24)^R>>>7)+(P>>>0<he>>>0?1:0)|0;he=($>>>19|S<<13)^($<<3|S>>>29)^($>>>6|S<<26)|0;P=P+he|0;C=C+((S>>>19|$<<13)^(S<<3|$>>>29)^S>>>6)+(P>>>0<he>>>0?1:0)|0;le=0xbef90dae+P|0;ue=0x113f9804+C+(le>>>0<P>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=J;Z=W;J=Q;W=X;Q=z;X=le+(W&Z^te&(W^Z))|0;z=ue+(Q&J^ee&(Q^J))+(X>>>0<le>>>0?1:0)|0;he=(W>>>28|Q<<4)^(W<<30|Q>>>2)^(W<<25|Q>>>7)|0;X=X+he|0;z=z+((Q>>>28|W<<4)^(Q<<30|W>>>2)^(Q<<25|W>>>7))+(X>>>0<he>>>0?1:0)|0;N=N+t|0;R=R+e+(N>>>0<t>>>0?1:0)|0;he=(O>>>1|k<<31)^(O>>>8|k<<24)^(O>>>7|k<<25)|0;N=N+he|0;R=R+((k>>>1|O<<31)^(k>>>8|O<<24)^k>>>7)+(N>>>0<he>>>0?1:0)|0;he=(I>>>19|T<<13)^(I<<3|T>>>29)^(I>>>6|T<<26)|0;N=N+he|0;R=R+((T>>>19|I<<13)^(T<<3|I>>>29)^T>>>6)+(N>>>0<he>>>0?1:0)|0;le=0x131c471b+N|0;ue=0x1b710b35+R+(le>>>0<N>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=J;Z=W;J=Q;W=X;Q=z;X=le+(W&Z^te&(W^Z))|0;z=ue+(Q&J^ee&(Q^J))+(X>>>0<le>>>0?1:0)|0;he=(W>>>28|Q<<4)^(W<<30|Q>>>2)^(W<<25|Q>>>7)|0;X=X+he|0;z=z+((Q>>>28|W<<4)^(Q<<30|W>>>2)^(Q<<25|W>>>7))+(X>>>0<he>>>0?1:0)|0;O=O+A|0;k=k+r+(O>>>0<A>>>0?1:0)|0;he=(B>>>1|x<<31)^(B>>>8|x<<24)^(B>>>7|x<<25)|0;O=O+he|0;k=k+((x>>>1|B<<31)^(x>>>8|B<<24)^x>>>7)+(O>>>0<he>>>0?1:0)|0;he=(P>>>19|C<<13)^(P<<3|C>>>29)^(P>>>6|C<<26)|0;O=O+he|0;k=k+((C>>>19|P<<13)^(C<<3|P>>>29)^C>>>6)+(O>>>0<he>>>0?1:0)|0;le=0x23047d84+O|0;ue=0x28db77f5+k+(le>>>0<O>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=J;Z=W;J=Q;W=X;Q=z;X=le+(W&Z^te&(W^Z))|0;z=ue+(Q&J^ee&(Q^J))+(X>>>0<le>>>0?1:0)|0;he=(W>>>28|Q<<4)^(W<<30|Q>>>2)^(W<<25|Q>>>7)|0;X=X+he|0;z=z+((Q>>>28|W<<4)^(Q<<30|W>>>2)^(Q<<25|W>>>7))+(X>>>0<he>>>0?1:0)|0;B=B+E|0;x=x+w+(B>>>0<E>>>0?1:0)|0;he=(M>>>1|D<<31)^(M>>>8|D<<24)^(M>>>7|D<<25)|0;B=B+he|0;x=x+((D>>>1|M<<31)^(D>>>8|M<<24)^D>>>7)+(B>>>0<he>>>0?1:0)|0;he=(N>>>19|R<<13)^(N<<3|R>>>29)^(N>>>6|R<<26)|0;B=B+he|0;x=x+((R>>>19|N<<13)^(R<<3|N>>>29)^R>>>6)+(B>>>0<he>>>0?1:0)|0;le=0x40c72493+B|0;ue=0x32caab7b+x+(le>>>0<B>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=J;Z=W;J=Q;W=X;Q=z;X=le+(W&Z^te&(W^Z))|0;z=ue+(Q&J^ee&(Q^J))+(X>>>0<le>>>0?1:0)|0;he=(W>>>28|Q<<4)^(W<<30|Q>>>2)^(W<<25|Q>>>7)|0;X=X+he|0;z=z+((Q>>>28|W<<4)^(Q<<30|W>>>2)^(Q<<25|W>>>7))+(X>>>0<he>>>0?1:0)|0;M=M+_|0;D=D+v+(M>>>0<_>>>0?1:0)|0;he=(L>>>1|U<<31)^(L>>>8|U<<24)^(L>>>7|U<<25)|0;M=M+he|0;D=D+((U>>>1|L<<31)^(U>>>8|L<<24)^U>>>7)+(M>>>0<he>>>0?1:0)|0;he=(O>>>19|k<<13)^(O<<3|k>>>29)^(O>>>6|k<<26)|0;M=M+he|0;D=D+((k>>>19|O<<13)^(k<<3|O>>>29)^k>>>6)+(M>>>0<he>>>0?1:0)|0;le=0x15c9bebc+M|0;ue=0x3c9ebe0a+D+(le>>>0<M>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=J;Z=W;J=Q;W=X;Q=z;X=le+(W&Z^te&(W^Z))|0;z=ue+(Q&J^ee&(Q^J))+(X>>>0<le>>>0?1:0)|0;he=(W>>>28|Q<<4)^(W<<30|Q>>>2)^(W<<25|Q>>>7)|0;X=X+he|0;z=z+((Q>>>28|W<<4)^(Q<<30|W>>>2)^(Q<<25|W>>>7))+(X>>>0<he>>>0?1:0)|0;L=L+$|0;U=U+S+(L>>>0<$>>>0?1:0)|0;he=(H>>>1|F<<31)^(H>>>8|F<<24)^(H>>>7|F<<25)|0;L=L+he|0;U=U+((F>>>1|H<<31)^(F>>>8|H<<24)^F>>>7)+(L>>>0<he>>>0?1:0)|0;he=(B>>>19|x<<13)^(B<<3|x>>>29)^(B>>>6|x<<26)|0;L=L+he|0;U=U+((x>>>19|B<<13)^(x<<3|B>>>29)^x>>>6)+(L>>>0<he>>>0?1:0)|0;le=0x9c100d4c+L|0;ue=0x431d67c4+U+(le>>>0<L>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=J;Z=W;J=Q;W=X;Q=z;X=le+(W&Z^te&(W^Z))|0;z=ue+(Q&J^ee&(Q^J))+(X>>>0<le>>>0?1:0)|0;he=(W>>>28|Q<<4)^(W<<30|Q>>>2)^(W<<25|Q>>>7)|0;X=X+he|0;z=z+((Q>>>28|W<<4)^(Q<<30|W>>>2)^(Q<<25|W>>>7))+(X>>>0<he>>>0?1:0)|0;H=H+I|0;F=F+T+(H>>>0<I>>>0?1:0)|0;he=(G>>>1|V<<31)^(G>>>8|V<<24)^(G>>>7|V<<25)|0;H=H+he|0;F=F+((V>>>1|G<<31)^(V>>>8|G<<24)^V>>>7)+(H>>>0<he>>>0?1:0)|0;he=(M>>>19|D<<13)^(M<<3|D>>>29)^(M>>>6|D<<26)|0;H=H+he|0;F=F+((D>>>19|M<<13)^(D<<3|M>>>29)^D>>>6)+(H>>>0<he>>>0?1:0)|0;le=0xcb3e42b6+H|0;ue=0x4cc5d4be+F+(le>>>0<H>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=J;Z=W;J=Q;W=X;Q=z;X=le+(W&Z^te&(W^Z))|0;z=ue+(Q&J^ee&(Q^J))+(X>>>0<le>>>0?1:0)|0;he=(W>>>28|Q<<4)^(W<<30|Q>>>2)^(W<<25|Q>>>7)|0;X=X+he|0;z=z+((Q>>>28|W<<4)^(Q<<30|W>>>2)^(Q<<25|W>>>7))+(X>>>0<he>>>0?1:0)|0;G=G+P|0;V=V+C+(G>>>0<P>>>0?1:0)|0;he=(K>>>1|j<<31)^(K>>>8|j<<24)^(K>>>7|j<<25)|0;G=G+he|0;V=V+((j>>>1|K<<31)^(j>>>8|K<<24)^j>>>7)+(G>>>0<he>>>0?1:0)|0;he=(L>>>19|U<<13)^(L<<3|U>>>29)^(L>>>6|U<<26)|0;G=G+he|0;V=V+((U>>>19|L<<13)^(U<<3|L>>>29)^U>>>6)+(G>>>0<he>>>0?1:0)|0;le=0xfc657e2a+G|0;ue=0x597f299c+V+(le>>>0<G>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=J;Z=W;J=Q;W=X;Q=z;X=le+(W&Z^te&(W^Z))|0;z=ue+(Q&J^ee&(Q^J))+(X>>>0<le>>>0?1:0)|0;he=(W>>>28|Q<<4)^(W<<30|Q>>>2)^(W<<25|Q>>>7)|0;X=X+he|0;z=z+((Q>>>28|W<<4)^(Q<<30|W>>>2)^(Q<<25|W>>>7))+(X>>>0<he>>>0?1:0)|0;K=K+N|0;j=j+R+(K>>>0<N>>>0?1:0)|0;he=(q>>>1|Y<<31)^(q>>>8|Y<<24)^(q>>>7|Y<<25)|0;K=K+he|0;j=j+((Y>>>1|q<<31)^(Y>>>8|q<<24)^Y>>>7)+(K>>>0<he>>>0?1:0)|0;he=(H>>>19|F<<13)^(H<<3|F>>>29)^(H>>>6|F<<26)|0;K=K+he|0;j=j+((F>>>19|H<<13)^(F<<3|H>>>29)^F>>>6)+(K>>>0<he>>>0?1:0)|0;le=0x3ad6faec+K|0;ue=0x5fcb6fab+j+(le>>>0<K>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=J;Z=W;J=Q;W=X;Q=z;X=le+(W&Z^te&(W^Z))|0;z=ue+(Q&J^ee&(Q^J))+(X>>>0<le>>>0?1:0)|0;he=(W>>>28|Q<<4)^(W<<30|Q>>>2)^(W<<25|Q>>>7)|0;X=X+he|0;z=z+((Q>>>28|W<<4)^(Q<<30|W>>>2)^(Q<<25|W>>>7))+(X>>>0<he>>>0?1:0)|0;q=q+O|0;Y=Y+k+(q>>>0<O>>>0?1:0)|0;he=(t>>>1|e<<31)^(t>>>8|e<<24)^(t>>>7|e<<25)|0;q=q+he|0;Y=Y+((e>>>1|t<<31)^(e>>>8|t<<24)^e>>>7)+(q>>>0<he>>>0?1:0)|0;he=(G>>>19|V<<13)^(G<<3|V>>>29)^(G>>>6|V<<26)|0;q=q+he|0;Y=Y+((V>>>19|G<<13)^(V<<3|G>>>29)^V>>>6)+(q>>>0<he>>>0?1:0)|0;le=0x4a475817+q|0;ue=0x6c44198c+Y+(le>>>0<q>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=J;Z=W;J=Q;W=X;Q=z;X=le+(W&Z^te&(W^Z))|0;z=ue+(Q&J^ee&(Q^J))+(X>>>0<le>>>0?1:0)|0;he=(W>>>28|Q<<4)^(W<<30|Q>>>2)^(W<<25|Q>>>7)|0;X=X+he|0;z=z+((Q>>>28|W<<4)^(Q<<30|W>>>2)^(Q<<25|W>>>7))+(X>>>0<he>>>0?1:0)|0;i=i+X|0;n=n+z+(i>>>0<X>>>0?1:0)|0;a=a+W|0;s=s+Q+(a>>>0<W>>>0?1:0)|0;f=f+Z|0;o=o+J+(f>>>0<Z>>>0?1:0)|0;u=u+te|0;c=c+ee+(u>>>0<te>>>0?1:0)|0;h=h+ne|0;l=l+re+(h>>>0<ne>>>0?1:0)|0;p=p+se|0;d=d+ie+(p>>>0<se>>>0?1:0)|0;m=m+oe|0;y=y+ae+(m>>>0<oe>>>0?1:0)|0;b=b+ce|0;g=g+fe+(b>>>0<ce>>>0?1:0)|0}function te(e){e=e|0;ee(Z[e|0]<<24|Z[e|1]<<16|Z[e|2]<<8|Z[e|3],Z[e|4]<<24|Z[e|5]<<16|Z[e|6]<<8|Z[e|7],Z[e|8]<<24|Z[e|9]<<16|Z[e|10]<<8|Z[e|11],Z[e|12]<<24|Z[e|13]<<16|Z[e|14]<<8|Z[e|15],Z[e|16]<<24|Z[e|17]<<16|Z[e|18]<<8|Z[e|19],Z[e|20]<<24|Z[e|21]<<16|Z[e|22]<<8|Z[e|23],Z[e|24]<<24|Z[e|25]<<16|Z[e|26]<<8|Z[e|27],Z[e|28]<<24|Z[e|29]<<16|Z[e|30]<<8|Z[e|31],Z[e|32]<<24|Z[e|33]<<16|Z[e|34]<<8|Z[e|35],Z[e|36]<<24|Z[e|37]<<16|Z[e|38]<<8|Z[e|39],Z[e|40]<<24|Z[e|41]<<16|Z[e|42]<<8|Z[e|43],Z[e|44]<<24|Z[e|45]<<16|Z[e|46]<<8|Z[e|47],Z[e|48]<<24|Z[e|49]<<16|Z[e|50]<<8|Z[e|51],Z[e|52]<<24|Z[e|53]<<16|Z[e|54]<<8|Z[e|55],Z[e|56]<<24|Z[e|57]<<16|Z[e|58]<<8|Z[e|59],Z[e|60]<<24|Z[e|61]<<16|Z[e|62]<<8|Z[e|63],Z[e|64]<<24|Z[e|65]<<16|Z[e|66]<<8|Z[e|67],Z[e|68]<<24|Z[e|69]<<16|Z[e|70]<<8|Z[e|71],Z[e|72]<<24|Z[e|73]<<16|Z[e|74]<<8|Z[e|75],Z[e|76]<<24|Z[e|77]<<16|Z[e|78]<<8|Z[e|79],Z[e|80]<<24|Z[e|81]<<16|Z[e|82]<<8|Z[e|83],Z[e|84]<<24|Z[e|85]<<16|Z[e|86]<<8|Z[e|87],Z[e|88]<<24|Z[e|89]<<16|Z[e|90]<<8|Z[e|91],Z[e|92]<<24|Z[e|93]<<16|Z[e|94]<<8|Z[e|95],Z[e|96]<<24|Z[e|97]<<16|Z[e|98]<<8|Z[e|99],Z[e|100]<<24|Z[e|101]<<16|Z[e|102]<<8|Z[e|103],Z[e|104]<<24|Z[e|105]<<16|Z[e|106]<<8|Z[e|107],Z[e|108]<<24|Z[e|109]<<16|Z[e|110]<<8|Z[e|111],Z[e|112]<<24|Z[e|113]<<16|Z[e|114]<<8|Z[e|115],Z[e|116]<<24|Z[e|117]<<16|Z[e|118]<<8|Z[e|119],Z[e|120]<<24|Z[e|121]<<16|Z[e|122]<<8|Z[e|123],Z[e|124]<<24|Z[e|125]<<16|Z[e|126]<<8|Z[e|127])}function re(e){e=e|0;Z[e|0]=n>>>24;Z[e|1]=n>>>16&255;Z[e|2]=n>>>8&255;Z[e|3]=n&255;Z[e|4]=i>>>24;Z[e|5]=i>>>16&255;Z[e|6]=i>>>8&255;Z[e|7]=i&255;Z[e|8]=s>>>24;Z[e|9]=s>>>16&255;Z[e|10]=s>>>8&255;Z[e|11]=s&255;Z[e|12]=a>>>24;Z[e|13]=a>>>16&255;Z[e|14]=a>>>8&255;Z[e|15]=a&255;Z[e|16]=o>>>24;Z[e|17]=o>>>16&255;Z[e|18]=o>>>8&255;Z[e|19]=o&255;Z[e|20]=f>>>24;Z[e|21]=f>>>16&255;Z[e|22]=f>>>8&255;Z[e|23]=f&255;Z[e|24]=c>>>24;Z[e|25]=c>>>16&255;Z[e|26]=c>>>8&255;Z[e|27]=c&255;Z[e|28]=u>>>24;Z[e|29]=u>>>16&255;Z[e|30]=u>>>8&255;Z[e|31]=u&255;Z[e|32]=l>>>24;Z[e|33]=l>>>16&255;Z[e|34]=l>>>8&255;Z[e|35]=l&255;Z[e|36]=h>>>24;Z[e|37]=h>>>16&255;Z[e|38]=h>>>8&255;Z[e|39]=h&255;Z[e|40]=d>>>24;Z[e|41]=d>>>16&255;Z[e|42]=d>>>8&255;Z[e|43]=d&255;Z[e|44]=p>>>24;Z[e|45]=p>>>16&255;Z[e|46]=p>>>8&255;Z[e|47]=p&255;Z[e|48]=y>>>24;Z[e|49]=y>>>16&255;Z[e|50]=y>>>8&255;Z[e|51]=y&255;Z[e|52]=m>>>24;Z[e|53]=m>>>16&255;Z[e|54]=m>>>8&255;Z[e|55]=m&255;Z[e|56]=g>>>24;Z[e|57]=g>>>16&255;Z[e|58]=g>>>8&255;Z[e|59]=g&255;Z[e|60]=b>>>24;Z[e|61]=b>>>16&255;Z[e|62]=b>>>8&255;Z[e|63]=b&255}function ne(){n=0x6a09e667;i=0xf3bcc908;s=0xbb67ae85;a=0x84caa73b;o=0x3c6ef372;f=0xfe94f82b;c=0xa54ff53a;u=0x5f1d36f1;l=0x510e527f;h=0xade682d1;d=0x9b05688c;p=0x2b3e6c1f;y=0x1f83d9ab;m=0xfb41bd6b;g=0x5be0cd19;b=0x137e2179;A=w=0}function ie(e,t,r,E,v,_,S,$,T,I,C,P,R,N,k,O,x,B){e=e|0;t=t|0;r=r|0;E=E|0;v=v|0;_=_|0;S=S|0;$=$|0;T=T|0;I=I|0;C=C|0;P=P|0;R=R|0;N=N|0;k=k|0;O=O|0;x=x|0;B=B|0;n=e;i=t;s=r;a=E;o=v;f=_;c=S;u=$;l=T;h=I;d=C;p=P;y=R;m=N;g=k;b=O;A=x;w=B}function se(e,t){e=e|0;t=t|0;var r=0;if(e&127)return-1;while((t|0)>=128){te(e);e=e+128|0;t=t-128|0;r=r+128|0}A=A+r|0;if(A>>>0<r>>>0)w=w+1|0;return r|0}function ae(e,t,r){e=e|0;t=t|0;r=r|0;var n=0,i=0;if(e&127)return-1;if(~r)if(r&63)return-1;if((t|0)>=128){n=se(e,t)|0;if((n|0)==-1)return-1;e=e+n|0;t=t-n|0}n=n+t|0;A=A+t|0;if(A>>>0<t>>>0)w=w+1|0;Z[e|t]=0x80;if((t|0)>=112){for(i=t+1|0;(i|0)<128;i=i+1|0)Z[e|i]=0x00;te(e);t=0;Z[e|0]=0}for(i=t+1|0;(i|0)<123;i=i+1|0)Z[e|i]=0;Z[e|120]=w>>>21&255;Z[e|121]=w>>>13&255;Z[e|122]=w>>>5&255;Z[e|123]=w<<3&255|A>>>29;Z[e|124]=A>>>21&255;Z[e|125]=A>>>13&255;Z[e|126]=A>>>5&255;Z[e|127]=A<<3&255;te(e);if(~r)re(r);return n|0}function oe(){n=E;i=v;s=_;a=S;o=$;f=T;c=I;u=C;l=P;h=R;d=N;p=k;y=O;m=x;g=B;b=D;A=128;w=0}function fe(){n=M;i=U;s=L;a=F;o=H;f=V;c=G;u=j;l=K;h=Y;d=q;p=z;y=X;m=Q;g=W;b=J;A=128;w=0}function ce(e,t,r,Z,te,re,ie,se,ae,oe,fe,ce,ue,le,he,de,pe,ye,me,ge,be,Ae,we,Ee,ve,_e,Se,$e,Te,Ie,Ce,Pe){e=e|0;t=t|0;r=r|0;Z=Z|0;te=te|0;re=re|0;ie=ie|0;se=se|0;ae=ae|0;oe=oe|0;fe=fe|0;ce=ce|0;ue=ue|0;le=le|0;he=he|0;de=de|0;pe=pe|0;ye=ye|0;me=me|0;ge=ge|0;be=be|0;Ae=Ae|0;we=we|0;Ee=Ee|0;ve=ve|0;_e=_e|0;Se=Se|0;$e=$e|0;Te=Te|0;Ie=Ie|0;Ce=Ce|0;Pe=Pe|0;ne();ee(e^0x5c5c5c5c,t^0x5c5c5c5c,r^0x5c5c5c5c,Z^0x5c5c5c5c,te^0x5c5c5c5c,re^0x5c5c5c5c,ie^0x5c5c5c5c,se^0x5c5c5c5c,ae^0x5c5c5c5c,oe^0x5c5c5c5c,fe^0x5c5c5c5c,ce^0x5c5c5c5c,ue^0x5c5c5c5c,le^0x5c5c5c5c,he^0x5c5c5c5c,de^0x5c5c5c5c,pe^0x5c5c5c5c,ye^0x5c5c5c5c,me^0x5c5c5c5c,ge^0x5c5c5c5c,be^0x5c5c5c5c,Ae^0x5c5c5c5c,we^0x5c5c5c5c,Ee^0x5c5c5c5c,ve^0x5c5c5c5c,_e^0x5c5c5c5c,Se^0x5c5c5c5c,$e^0x5c5c5c5c,Te^0x5c5c5c5c,Ie^0x5c5c5c5c,Ce^0x5c5c5c5c,Pe^0x5c5c5c5c);M=n;U=i;L=s;F=a;H=o;V=f;G=c;j=u;K=l;Y=h;q=d;z=p;X=y;Q=m;W=g;J=b;ne();ee(e^0x36363636,t^0x36363636,r^0x36363636,Z^0x36363636,te^0x36363636,re^0x36363636,ie^0x36363636,se^0x36363636,ae^0x36363636,oe^0x36363636,fe^0x36363636,ce^0x36363636,ue^0x36363636,le^0x36363636,he^0x36363636,de^0x36363636,pe^0x36363636,ye^0x36363636,me^0x36363636,ge^0x36363636,be^0x36363636,Ae^0x36363636,we^0x36363636,Ee^0x36363636,ve^0x36363636,_e^0x36363636,Se^0x36363636,$e^0x36363636,Te^0x36363636,Ie^0x36363636,Ce^0x36363636,Pe^0x36363636);E=n;v=i;_=s;S=a;$=o;T=f;I=c;C=u;P=l;R=h;N=d;k=p;O=y;x=m;B=g;D=b;A=128;w=0}function ue(e,t,r){e=e|0;t=t|0;r=r|0;var A=0,w=0,E=0,v=0,_=0,S=0,$=0,T=0,I=0,C=0,P=0,R=0,N=0,k=0,O=0,x=0,B=0;if(e&127)return-1;if(~r)if(r&63)return-1;B=ae(e,t,-1)|0;A=n;w=i;E=s;v=a;_=o;S=f;$=c;T=u;I=l;C=h;P=d;R=p;N=y;k=m;O=g;x=b;fe();ee(A,w,E,v,_,S,$,T,I,C,P,R,N,k,O,x,0x80000000,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1536);if(~r)re(r);return B|0}function le(e,t,r,A,w){e=e|0;t=t|0;r=r|0;A=A|0;w=w|0;var E=0,v=0,_=0,S=0,$=0,T=0,I=0,C=0,P=0,R=0,N=0,k=0,O=0,x=0,B=0,D=0,M=0,U=0,L=0,F=0,H=0,V=0,G=0,j=0,K=0,Y=0,q=0,z=0,X=0,Q=0,W=0,J=0;if(e&127)return-1;if(~w)if(w&63)return-1;Z[e+t|0]=r>>>24;Z[e+t+1|0]=r>>>16&255;Z[e+t+2|0]=r>>>8&255;Z[e+t+3|0]=r&255;ue(e,t+4|0,-1)|0;E=M=n;v=U=i;_=L=s;S=F=a;$=H=o;T=V=f;I=G=c;C=j=u;P=K=l;R=Y=h;N=q=d;k=z=p;O=X=y;x=Q=m;B=W=g;D=J=b;A=A-1|0;while((A|0)>0){oe();ee(M,U,L,F,H,V,G,j,K,Y,q,z,X,Q,W,J,0x80000000,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1536);M=n;U=i;L=s;F=a;H=o;V=f;G=c;j=u;K=l;Y=h;q=d;z=p;X=y;Q=m;W=g;J=b;fe();ee(M,U,L,F,H,V,G,j,K,Y,q,z,X,Q,W,J,0x80000000,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1536);M=n;U=i;L=s;F=a;H=o;V=f;G=c;j=u;K=l;Y=h;q=d;z=p;X=y;Q=m;W=g;J=b;E=E^n;v=v^i;_=_^s;S=S^a;$=$^o;T=T^f;I=I^c;C=C^u;P=P^l;R=R^h;N=N^d;k=k^p;O=O^y;x=x^m;B=B^g;D=D^b;A=A-1|0}n=E;i=v;s=_;a=S;o=$;f=T;c=I;u=C;l=P;h=R;d=N;p=k;y=O;m=x;g=B;b=D;if(~w)re(w);return 0}return{reset:ne,init:ie,process:se,finish:ae,hmac_reset:oe,hmac_init:ce,hmac_finish:ue,pbkdf2_generate_block:le}};const _sha512_block_size=128;const _sha512_hash_size=64;class Sha512 extends Hash{constructor(){super();this.NAME="sha512";this.BLOCK_SIZE=_sha512_block_size;this.HASH_SIZE=_sha512_hash_size;this.heap=_heap_init();this.asm=sha512_asm({Uint8Array},null,this.heap.buffer);this.reset()}}Sha512.NAME="sha512";class Hmac$1{constructor(e,t,r){if(!e.HASH_SIZE)throw new SyntaxError("option 'hash' supplied doesn't seem to be a valid hash function");this.hash=e;this.BLOCK_SIZE=this.hash.BLOCK_SIZE;this.HMAC_SIZE=this.hash.HASH_SIZE;this.result=null;this.key=_hmac_key(this.hash,t);const n=new Uint8Array(this.key);for(let e=0;e<n.length;++e)n[e]^=54;this.hash.reset().process(n);if(r!==undefined){this._hmac_init_verify(r)}else{this.verify=null}}process(e){if(this.result!==null)throw new IllegalStateError("state must be reset before processing new data");this.hash.process(e);return this}finish(){if(this.result!==null)throw new IllegalStateError("state must be reset before processing new data");const e=this.hash.finish().result;const t=new Uint8Array(this.key);for(let e=0;e<t.length;++e)t[e]^=92;const r=this.verify;const n=this.hash.reset().process(t).process(e).finish().result;if(r){if(r.length===n.length){let e=0;for(let t=0;t<r.length;t++){e|=r[t]^n[t]}if(e!==0)throw new Error("HMAC verification failed, hash value doesn't match")}else{throw new Error("HMAC verification failed, lengths doesn't match")}}this.result=n;return this}_hmac_init_verify(e){if(e.length!==this.HMAC_SIZE)throw new IllegalArgumentError("illegal verification tag size");this.verify=e}}function _hmac_key(e,t){const r=new Uint8Array(e.BLOCK_SIZE);if(t.length>e.BLOCK_SIZE){r.set(e.reset().process(t).finish().result)}else{r.set(t)}return r}class HmacSha1 extends Hmac$1{constructor(e,t){const r=new Sha1;super(r,e,t);this.reset();if(t!==undefined){this._hmac_init_verify(t)}else{this.verify=null}return this}reset(){this.result=null;const e=this.key;this.hash.reset().asm.hmac_init(e[0]<<24|e[1]<<16|e[2]<<8|e[3],e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[8]<<24|e[9]<<16|e[10]<<8|e[11],e[12]<<24|e[13]<<16|e[14]<<8|e[15],e[16]<<24|e[17]<<16|e[18]<<8|e[19],e[20]<<24|e[21]<<16|e[22]<<8|e[23],e[24]<<24|e[25]<<16|e[26]<<8|e[27],e[28]<<24|e[29]<<16|e[30]<<8|e[31],e[32]<<24|e[33]<<16|e[34]<<8|e[35],e[36]<<24|e[37]<<16|e[38]<<8|e[39],e[40]<<24|e[41]<<16|e[42]<<8|e[43],e[44]<<24|e[45]<<16|e[46]<<8|e[47],e[48]<<24|e[49]<<16|e[50]<<8|e[51],e[52]<<24|e[53]<<16|e[54]<<8|e[55],e[56]<<24|e[57]<<16|e[58]<<8|e[59],e[60]<<24|e[61]<<16|e[62]<<8|e[63]);return this}finish(){if(this.result!==null)throw new IllegalStateError("state must be reset before processing new data");const e=this.hash;const t=this.hash.asm;const r=this.hash.heap;t.hmac_finish(e.pos,e.len,0);const n=this.verify;const i=new Uint8Array(_sha1_hash_size);i.set(r.subarray(0,_sha1_hash_size));if(n){if(n.length===i.length){let e=0;for(let t=0;t<n.length;t++){e|=n[t]^i[t]}if(e!==0)throw new Error("HMAC verification failed, hash value doesn't match")}else{throw new Error("HMAC verification failed, lengths doesn't match")}}else{this.result=i}return this}}class HmacSha256 extends Hmac$1{constructor(e,t){const r=new Sha256;super(r,e,t);this.reset();if(t!==undefined){this._hmac_init_verify(t)}else{this.verify=null}return this}reset(){const e=this.key;this.hash.reset().asm.hmac_init(e[0]<<24|e[1]<<16|e[2]<<8|e[3],e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[8]<<24|e[9]<<16|e[10]<<8|e[11],e[12]<<24|e[13]<<16|e[14]<<8|e[15],e[16]<<24|e[17]<<16|e[18]<<8|e[19],e[20]<<24|e[21]<<16|e[22]<<8|e[23],e[24]<<24|e[25]<<16|e[26]<<8|e[27],e[28]<<24|e[29]<<16|e[30]<<8|e[31],e[32]<<24|e[33]<<16|e[34]<<8|e[35],e[36]<<24|e[37]<<16|e[38]<<8|e[39],e[40]<<24|e[41]<<16|e[42]<<8|e[43],e[44]<<24|e[45]<<16|e[46]<<8|e[47],e[48]<<24|e[49]<<16|e[50]<<8|e[51],e[52]<<24|e[53]<<16|e[54]<<8|e[55],e[56]<<24|e[57]<<16|e[58]<<8|e[59],e[60]<<24|e[61]<<16|e[62]<<8|e[63]);return this}finish(){if(this.key===null)throw new IllegalStateError("no key is associated with the instance");if(this.result!==null)throw new IllegalStateError("state must be reset before processing new data");const e=this.hash;const t=this.hash.asm;const r=this.hash.heap;t.hmac_finish(e.pos,e.len,0);const n=this.verify;const i=new Uint8Array(_sha256_hash_size);i.set(r.subarray(0,_sha256_hash_size));if(n){if(n.length===i.length){let e=0;for(let t=0;t<n.length;t++){e|=n[t]^i[t]}if(e!==0)throw new Error("HMAC verification failed, hash value doesn't match")}else{throw new Error("HMAC verification failed, lengths doesn't match")}}else{this.result=i}return this}}class HmacSha512 extends Hmac$1{constructor(e,t){const r=new Sha512;super(r,e,t);this.reset();if(t!==undefined){this._hmac_init_verify(t)}else{this.verify=null}return this}reset(){const e=this.key;this.hash.reset().asm.hmac_init(e[0]<<24|e[1]<<16|e[2]<<8|e[3],e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[8]<<24|e[9]<<16|e[10]<<8|e[11],e[12]<<24|e[13]<<16|e[14]<<8|e[15],e[16]<<24|e[17]<<16|e[18]<<8|e[19],e[20]<<24|e[21]<<16|e[22]<<8|e[23],e[24]<<24|e[25]<<16|e[26]<<8|e[27],e[28]<<24|e[29]<<16|e[30]<<8|e[31],e[32]<<24|e[33]<<16|e[34]<<8|e[35],e[36]<<24|e[37]<<16|e[38]<<8|e[39],e[40]<<24|e[41]<<16|e[42]<<8|e[43],e[44]<<24|e[45]<<16|e[46]<<8|e[47],e[48]<<24|e[49]<<16|e[50]<<8|e[51],e[52]<<24|e[53]<<16|e[54]<<8|e[55],e[56]<<24|e[57]<<16|e[58]<<8|e[59],e[60]<<24|e[61]<<16|e[62]<<8|e[63],e[64]<<24|e[65]<<16|e[66]<<8|e[67],e[68]<<24|e[69]<<16|e[70]<<8|e[71],e[72]<<24|e[73]<<16|e[74]<<8|e[75],e[76]<<24|e[77]<<16|e[78]<<8|e[79],e[80]<<24|e[81]<<16|e[82]<<8|e[83],e[84]<<24|e[85]<<16|e[86]<<8|e[87],e[88]<<24|e[89]<<16|e[90]<<8|e[91],e[92]<<24|e[93]<<16|e[94]<<8|e[95],e[96]<<24|e[97]<<16|e[98]<<8|e[99],e[100]<<24|e[101]<<16|e[102]<<8|e[103],e[104]<<24|e[105]<<16|e[106]<<8|e[107],e[108]<<24|e[109]<<16|e[110]<<8|e[111],e[112]<<24|e[113]<<16|e[114]<<8|e[115],e[116]<<24|e[117]<<16|e[118]<<8|e[119],e[120]<<24|e[121]<<16|e[122]<<8|e[123],e[124]<<24|e[125]<<16|e[126]<<8|e[127]);return this}finish(){if(this.key===null)throw new IllegalStateError("no key is associated with the instance");if(this.result!==null)throw new IllegalStateError("state must be reset before processing new data");const e=this.hash;const t=this.hash.asm;const r=this.hash.heap;t.hmac_finish(e.pos,e.len,0);const n=this.verify;const i=new Uint8Array(_sha512_hash_size);i.set(r.subarray(0,_sha512_hash_size));if(n){if(n.length===i.length){let e=0;for(let t=0;t<n.length;t++){e|=n[t]^i[t]}if(e!==0)throw new Error("HMAC verification failed, hash value doesn't match")}else{throw new Error("HMAC verification failed, lengths doesn't match")}}else{this.result=i}return this}}function Pbkdf2HmacSha1(e,t,r,n){const i=new HmacSha1(e);const s=new Uint8Array(n);const a=Math.ceil(n/i.HMAC_SIZE);for(let e=1;e<=a;++e){const o=(e-1)*i.HMAC_SIZE;const f=(e<a?0:n%i.HMAC_SIZE)||i.HMAC_SIZE;i.reset().process(t);i.hash.asm.pbkdf2_generate_block(i.hash.pos,i.hash.len,e,r,0);s.set(i.hash.heap.subarray(0,f),o)}return s}function Pbkdf2HmacSha256(e,t,r,n){const i=new HmacSha256(e);const s=new Uint8Array(n);const a=Math.ceil(n/i.HMAC_SIZE);for(let e=1;e<=a;++e){const o=(e-1)*i.HMAC_SIZE;const f=(e<a?0:n%i.HMAC_SIZE)||i.HMAC_SIZE;i.reset().process(t);i.hash.asm.pbkdf2_generate_block(i.hash.pos,i.hash.len,e,r,0);s.set(i.hash.heap.subarray(0,f),o)}return s}function Pbkdf2HmacSha512(e,t,r,n){const i=new HmacSha512(e);const s=new Uint8Array(n);const a=Math.ceil(n/i.HMAC_SIZE);for(let e=1;e<=a;++e){const o=(e-1)*i.HMAC_SIZE;const f=(e<a?0:n%i.HMAC_SIZE)||i.HMAC_SIZE;i.reset().process(t);i.hash.asm.pbkdf2_generate_block(i.hash.pos,i.hash.len,e,r,0);s.set(i.hash.heap.subarray(0,f),o)}return s}class RSA{constructor(e){const t=e.length;if(t!==2&&t!==3&&t!==8)throw new SyntaxError("unexpected key type");const r=new Modulus(new BigNumber(e[0]));const n=new BigNumber(e[1]);this.key={0:r,1:n};if(t>2){this.key[2]=new BigNumber(e[2])}if(t>3){this.key[3]=new Modulus(new BigNumber(e[3]));this.key[4]=new Modulus(new BigNumber(e[4]));this.key[5]=new BigNumber(e[5]);this.key[6]=new BigNumber(e[6]);this.key[7]=new BigNumber(e[7])}}encrypt(e){if(!this.key)throw new IllegalStateError("no key is associated with the instance");if(this.key[0].compare(e)<=0)throw new RangeError("data too large");const t=this.key[0];const r=this.key[1];let n=t.power(e,r).toBytes();const i=t.bitLength+7>>3;if(n.length<i){const e=new Uint8Array(i);e.set(n,i-n.length);n=e}this.result=n;return this}decrypt(e){if(this.key[0].compare(e)<=0)throw new RangeError("data too large");let t;let r;if(this.key[3]!==undefined){r=this.key[0];const n=this.key[3];const i=this.key[4];const s=this.key[5];const a=this.key[6];const o=this.key[7];const f=n.power(e,s);const c=i.power(e,a);let u=f.subtract(c);while(u.sign<0)u=u.add(n);const l=n.reduce(o.multiply(u));t=l.multiply(i).add(c).clamp(r.bitLength).toBytes()}else{r=this.key[0];const n=this.key[2];t=r.power(e,n).toBytes()}const n=r.bitLength+7>>3;if(t.length<n){let e=new Uint8Array(n);e.set(t,n-t.length);t=e}this.result=t;return this}}class RSA_OAEP{constructor(e,t,r){this.rsa=new RSA(e);this.hash=t;if(r!==undefined){this.label=r.length>0?r:null}else{this.label=null}}encrypt(e,t){const r=Math.ceil(this.rsa.key[0].bitLength/8);const n=this.hash.HASH_SIZE;const i=e.byteLength||e.length||0;const s=r-i-2*n-2;if(i>r-2*this.hash.HASH_SIZE-2)throw new IllegalArgumentError("data too large");const a=new Uint8Array(r);const o=a.subarray(1,n+1);const f=a.subarray(n+1);f.set(e,n+s+1);f.set(this.hash.process(this.label||new Uint8Array(0)).finish().result,0);f[n+s]=1;if(t!==undefined){if(o.length!==t.length)throw new IllegalArgumentError("random size must equal the hash size");o.set(t)}else{getRandomValues(o)}const c=this.RSA_MGF1_generate(o,f.length);for(let e=0;e<f.length;e++)f[e]^=c[e];const u=this.RSA_MGF1_generate(f,o.length);for(let e=0;e<o.length;e++)o[e]^=u[e];this.rsa.encrypt(new BigNumber(a));return new Uint8Array(this.rsa.result)}decrypt(e){if(!this.rsa.key)throw new IllegalStateError("no key is associated with the instance");const t=Math.ceil(this.rsa.key[0].bitLength/8);const r=this.hash.HASH_SIZE;const n=e.byteLength||e.length||0;if(n!==t)throw new IllegalArgumentError("bad data");this.rsa.decrypt(new BigNumber(e));const i=this.rsa.result[0];const s=this.rsa.result.subarray(1,r+1);const a=this.rsa.result.subarray(r+1);if(i!==0)throw new SecurityError("decryption failed");const o=this.RSA_MGF1_generate(a,s.length);for(let e=0;e<s.length;e++)s[e]^=o[e];const f=this.RSA_MGF1_generate(s,a.length);for(let e=0;e<a.length;e++)a[e]^=f[e];const c=this.hash.reset().process(this.label||new Uint8Array(0)).finish().result;for(let e=0;e<r;e++){if(c[e]!==a[e])throw new SecurityError("decryption failed")}let u=r;for(;u<a.length;u++){const e=a[u];if(e===1)break;if(e!==0)throw new SecurityError("decryption failed")}if(u===a.length)throw new SecurityError("decryption failed");this.rsa.result=a.subarray(u+1);return new Uint8Array(this.rsa.result)}RSA_MGF1_generate(e,t=0){const r=this.hash.HASH_SIZE;const n=new Uint8Array(t);const i=new Uint8Array(4);const s=Math.ceil(t/r);for(let t=0;t<s;t++){i[0]=t>>>24,i[1]=t>>>16&255,i[2]=t>>>8&255,i[3]=t&255;const s=n.subarray(t*r);let a=this.hash.reset().process(e).process(i).finish().result;if(a.length>s.length)a=a.subarray(0,s.length);s.set(a)}return n}}class RSA_PSS{constructor(e,t,r=4){this.rsa=new RSA(e);this.hash=t;this.saltLength=r;if(this.saltLength<0)throw new TypeError("saltLength should be a non-negative number");if(this.rsa.key!==null&&Math.ceil((this.rsa.key[0].bitLength-1)/8)<this.hash.HASH_SIZE+this.saltLength+2)throw new SyntaxError("saltLength is too large")}sign(e,t){const r=this.rsa.key[0].bitLength;const n=this.hash.HASH_SIZE;const i=Math.ceil((r-1)/8);const s=this.saltLength;const a=i-s-n-2;const o=new Uint8Array(i);const f=o.subarray(i-n-1,i-1);const c=o.subarray(0,i-n-1);const u=c.subarray(a+1);const l=new Uint8Array(8+n+s);const h=l.subarray(8,8+n);const d=l.subarray(8+n);h.set(this.hash.process(e).finish().result);if(s>0){if(t!==undefined){if(d.length!==t.length)throw new IllegalArgumentError("random size must equal the salt size");d.set(t)}else{getRandomValues(d)}}c[a]=1;u.set(d);f.set(this.hash.reset().process(l).finish().result);const p=this.RSA_MGF1_generate(f,c.length);for(let e=0;e<c.length;e++)c[e]^=p[e];o[i-1]=188;const y=8*i-r+1;if(y%8)o[0]&=255>>>y;this.rsa.decrypt(new BigNumber(o));return this.rsa.result}verify(e,t){const r=this.rsa.key[0].bitLength;const n=this.hash.HASH_SIZE;const i=Math.ceil((r-1)/8);const s=this.saltLength;const a=i-s-n-2;this.rsa.encrypt(new BigNumber(e));const o=this.rsa.result;if(o[i-1]!==188)throw new SecurityError("bad signature");const f=o.subarray(i-n-1,i-1);const c=o.subarray(0,i-n-1);const u=c.subarray(a+1);const l=8*i-r+1;if(l%8&&o[0]>>>8-l)throw new SecurityError("bad signature");const h=this.RSA_MGF1_generate(f,c.length);for(let e=0;e<c.length;e++)c[e]^=h[e];if(l%8)o[0]&=255>>>l;for(let e=0;e<a;e++){if(c[e]!==0)throw new SecurityError("bad signature")}if(c[a]!==1)throw new SecurityError("bad signature");const d=new Uint8Array(8+n+s);const p=d.subarray(8,8+n);const y=d.subarray(8+n);p.set(this.hash.reset().process(t).finish().result);y.set(u);const m=this.hash.reset().process(d).finish().result;for(let e=0;e<n;e++){if(f[e]!==m[e])throw new SecurityError("bad signature")}}RSA_MGF1_generate(e,t=0){const r=this.hash.HASH_SIZE;const n=new Uint8Array(t);const i=new Uint8Array(4);const s=Math.ceil(t/r);for(let t=0;t<s;t++){i[0]=t>>>24,i[1]=t>>>16&255,i[2]=t>>>8&255,i[3]=t&255;const s=n.subarray(t*r);let a=this.hash.reset().process(e).process(i).finish().result;if(a.length>s.length)a=a.subarray(0,s.length);s.set(a)}return n}}class RSA_PKCS1_v1_5{constructor(e,t){this.rsa=new RSA(e);this.hash=t}sign(e){if(!this.rsa.key){throw new IllegalStateError("no key is associated with the instance")}const t=getHashPrefix(this.hash);const r=this.hash.HASH_SIZE;const n=t.length+r;const i=this.rsa.key[0].bitLength+7>>3;if(i<n+11){throw new Error("Message too long")}const s=new Uint8Array(r);s.set(this.hash.process(e).finish().result);const a=new Uint8Array(i);let o=0;a[o++]=0;a[o++]=1;for(o;o<i-n-1;o++){a[o]=255}a[o++]=0;a.set(t,o);a.set(s,a.length-r);this.rsa.decrypt(new BigNumber(a));return this.rsa.result}verify(e,t){const r=getHashPrefix(this.hash);const n=this.hash.HASH_SIZE;const i=r.length+n;const s=this.rsa.key[0].bitLength+7>>3;if(s<i+11){throw new SecurityError("Bad signature")}this.rsa.encrypt(new BigNumber(e));const a=new Uint8Array(n);a.set(this.hash.process(t).finish().result);let o=1;const f=this.rsa.result;let c=0;o&=f[c++]===0?1:0;o&=f[c++]===1?1:0;for(c;c<s-i-1;c++){o&=f[c]===255?1:0}o&=f[c++]===0?1:0;let u=0;let l=c+r.length;for(c;c<l;c++){o&=f[c]===r[u++]?1:0}u=0;l=c+a.length;for(c;c<l;c++){o&=f[c]===a[u++]?1:0}if(!o){throw new SecurityError("Bad signature")}}}const HASH_PREFIXES={sha1:new Uint8Array([48,33,48,9,6,5,43,14,3,2,26,5,0,4,20]),sha256:new Uint8Array([48,49,48,13,6,9,96,134,72,1,101,3,4,2,1,5,0,4,32]),sha384:new Uint8Array([48,65,48,13,6,9,96,134,72,1,101,3,4,2,2,5,0,4,48]),sha512:new Uint8Array([48,81,48,13,6,9,96,134,72,1,101,3,4,2,3,5,0,4,64])};function getHashPrefix(e){const t=HASH_PREFIXES[e.NAME];if(!t){throw new Error("Cannot get hash prefix for hash algorithm '"+e.NAME+"'")}return t}const asmcrypto_all_es8=Object.freeze({__proto__:null,string_to_bytes,hex_to_bytes,base64_to_bytes,bytes_to_string,bytes_to_hex,bytes_to_base64,IllegalStateError,IllegalArgumentError,SecurityError,AES_CBC,AES_CCM,AES_CFB,AES_CMAC,AES_CTR,AES_ECB,AES_GCM,AES_OFB,BigNumber,Modulus,Sha1,Sha256,Sha512,HmacSha1,HmacSha256,HmacSha512,Pbkdf2HmacSha1,Pbkdf2HmacSha256,Pbkdf2HmacSha512,RSA_OAEP,RSA_PKCS1_v1_5,RSA_PSS,RSA});const require$$5=getAugmentedNamespace(asmcrypto_all_es8);var elliptic$1={};var utils$r={};var bn={exports:{}};(function(e){(function(e,t){function r(e,t){if(!e)throw new Error(t||"Assertion failed")}function n(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype;e.prototype=new r;e.prototype.constructor=e}function i(e,t,r){if(i.isBN(e)){return e}this.negative=0;this.words=null;this.length=0;this.red=null;if(e!==null){if(t==="le"||t==="be"){r=t;t=10}this._init(e||0,t||10,r||"be")}}if(typeof e==="object"){e.exports=i}else{t.BN=i}i.BN=i;i.wordSize=26;var s;try{if(typeof window!=="undefined"&&typeof window.Buffer!=="undefined"){s=window.Buffer}else{s=require("buffer").Buffer}}catch(e){}i.isBN=function e(t){if(t instanceof i){return true}return t!==null&&typeof t==="object"&&t.constructor.wordSize===i.wordSize&&Array.isArray(t.words)};i.max=function e(t,r){if(t.cmp(r)>0)return t;return r};i.min=function e(t,r){if(t.cmp(r)<0)return t;return r};i.prototype._init=function e(t,n,i){if(typeof t==="number"){return this._initNumber(t,n,i)}if(typeof t==="object"){return this._initArray(t,n,i)}if(n==="hex"){n=16}r(n===(n|0)&&n>=2&&n<=36);t=t.toString().replace(/\s+/g,"");var s=0;if(t[0]==="-"){s++;this.negative=1}if(s<t.length){if(n===16){this._parseHex(t,s,i)}else{this._parseBase(t,n,s);if(i==="le"){this._initArray(this.toArray(),n,i)}}}};i.prototype._initNumber=function e(t,n,i){if(t<0){this.negative=1;t=-t}if(t<67108864){this.words=[t&67108863];this.length=1}else if(t<4503599627370496){this.words=[t&67108863,t/67108864&67108863];this.length=2}else{r(t<9007199254740992);this.words=[t&67108863,t/67108864&67108863,1];this.length=3}if(i!=="le")return;this._initArray(this.toArray(),n,i)};i.prototype._initArray=function e(t,n,i){r(typeof t.length==="number");if(t.length<=0){this.words=[0];this.length=1;return this}this.length=Math.ceil(t.length/3);this.words=new Array(this.length);for(var s=0;s<this.length;s++){this.words[s]=0}var a,o;var f=0;if(i==="be"){for(s=t.length-1,a=0;s>=0;s-=3){o=t[s]|t[s-1]<<8|t[s-2]<<16;this.words[a]|=o<<f&67108863;this.words[a+1]=o>>>26-f&67108863;f+=24;if(f>=26){f-=26;a++}}}else if(i==="le"){for(s=0,a=0;s<t.length;s+=3){o=t[s]|t[s+1]<<8|t[s+2]<<16;this.words[a]|=o<<f&67108863;this.words[a+1]=o>>>26-f&67108863;f+=24;if(f>=26){f-=26;a++}}}return this.strip()};function a(e,t){var r=e.charCodeAt(t);if(r>=65&&r<=70){return r-55}else if(r>=97&&r<=102){return r-87}else{return r-48&15}}function o(e,t,r){var n=a(e,r);if(r-1>=t){n|=a(e,r-1)<<4}return n}i.prototype._parseHex=function e(t,r,n){this.length=Math.ceil((t.length-r)/6);this.words=new Array(this.length);for(var i=0;i<this.length;i++){this.words[i]=0}var s=0;var a=0;var f;if(n==="be"){for(i=t.length-1;i>=r;i-=2){f=o(t,r,i)<<s;this.words[a]|=f&67108863;if(s>=18){s-=18;a+=1;this.words[a]|=f>>>26}else{s+=8}}}else{var c=t.length-r;for(i=c%2===0?r+1:r;i<t.length;i+=2){f=o(t,r,i)<<s;this.words[a]|=f&67108863;if(s>=18){s-=18;a+=1;this.words[a]|=f>>>26}else{s+=8}}}this.strip()};function f(e,t,r,n){var i=0;var s=Math.min(e.length,r);for(var a=t;a<s;a++){var o=e.charCodeAt(a)-48;i*=n;if(o>=49){i+=o-49+10}else if(o>=17){i+=o-17+10}else{i+=o}}return i}i.prototype._parseBase=function e(t,r,n){this.words=[0];this.length=1;for(var i=0,s=1;s<=67108863;s*=r){i++}i--;s=s/r|0;var a=t.length-n;var o=a%i;var c=Math.min(a,a-o)+n;var u=0;for(var l=n;l<c;l+=i){u=f(t,l,l+i,r);this.imuln(s);if(this.words[0]+u<67108864){this.words[0]+=u}else{this._iaddn(u)}}if(o!==0){var h=1;u=f(t,l,t.length,r);for(l=0;l<o;l++){h*=r}this.imuln(h);if(this.words[0]+u<67108864){this.words[0]+=u}else{this._iaddn(u)}}this.strip()};i.prototype.copy=function e(t){t.words=new Array(this.length);for(var r=0;r<this.length;r++){t.words[r]=this.words[r]}t.length=this.length;t.negative=this.negative;t.red=this.red};i.prototype.clone=function e(){var t=new i(null);this.copy(t);return t};i.prototype._expand=function e(t){while(this.length<t){this.words[this.length++]=0}return this};i.prototype.strip=function e(){while(this.length>1&&this.words[this.length-1]===0){this.length--}return this._normSign()};i.prototype._normSign=function e(){if(this.length===1&&this.words[0]===0){this.negative=0}return this};i.prototype.inspect=function e(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var c=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"];var u=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5];var l=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function e(t,n){t=t||10;n=n|0||1;var i;if(t===16||t==="hex"){i="";var s=0;var a=0;for(var o=0;o<this.length;o++){var f=this.words[o];var h=((f<<s|a)&16777215).toString(16);a=f>>>24-s&16777215;if(a!==0||o!==this.length-1){i=c[6-h.length]+h+i}else{i=h+i}s+=2;if(s>=26){s-=26;o--}}if(a!==0){i=a.toString(16)+i}while(i.length%n!==0){i="0"+i}if(this.negative!==0){i="-"+i}return i}if(t===(t|0)&&t>=2&&t<=36){var d=u[t];var p=l[t];i="";var y=this.clone();y.negative=0;while(!y.isZero()){var m=y.modn(p).toString(t);y=y.idivn(p);if(!y.isZero()){i=c[d-m.length]+m+i}else{i=m+i}}if(this.isZero()){i="0"+i}while(i.length%n!==0){i="0"+i}if(this.negative!==0){i="-"+i}return i}r(false,"Base should be between 2 and 36")};i.prototype.toNumber=function e(){var t=this.words[0];if(this.length===2){t+=this.words[1]*67108864}else if(this.length===3&&this.words[2]===1){t+=4503599627370496+this.words[1]*67108864}else if(this.length>2){r(false,"Number can only safely store up to 53 bits")}return this.negative!==0?-t:t};i.prototype.toJSON=function e(){return this.toString(16)};i.prototype.toBuffer=function e(t,n){r(typeof s!=="undefined");return this.toArrayLike(s,t,n)};i.prototype.toArray=function e(t,r){return this.toArrayLike(Array,t,r)};i.prototype.toArrayLike=function e(t,n,i){var s=this.byteLength();var a=i||Math.max(1,s);r(s<=a,"byte array longer than desired length");r(a>0,"Requested array length <= 0");this.strip();var o=n==="le";var f=new t(a);var c,u;var l=this.clone();if(!o){for(u=0;u<a-s;u++){f[u]=0}for(u=0;!l.isZero();u++){c=l.andln(255);l.iushrn(8);f[a-u-1]=c}}else{for(u=0;!l.isZero();u++){c=l.andln(255);l.iushrn(8);f[u]=c}for(;u<a;u++){f[u]=0}}return f};if(Math.clz32){i.prototype._countBits=function e(t){return 32-Math.clz32(t)}}else{i.prototype._countBits=function e(t){var r=t;var n=0;if(r>=4096){n+=13;r>>>=13}if(r>=64){n+=7;r>>>=7}if(r>=8){n+=4;r>>>=4}if(r>=2){n+=2;r>>>=2}return n+r}}i.prototype._zeroBits=function e(t){if(t===0)return 26;var r=t;var n=0;if((r&8191)===0){n+=13;r>>>=13}if((r&127)===0){n+=7;r>>>=7}if((r&15)===0){n+=4;r>>>=4}if((r&3)===0){n+=2;r>>>=2}if((r&1)===0){n++}return n};i.prototype.bitLength=function e(){var t=this.words[this.length-1];var r=this._countBits(t);return(this.length-1)*26+r};function h(e){var t=new Array(e.bitLength());for(var r=0;r<t.length;r++){var n=r/26|0;var i=r%26;t[r]=(e.words[n]&1<<i)>>>i}return t}i.prototype.zeroBits=function e(){if(this.isZero())return 0;var t=0;for(var r=0;r<this.length;r++){var n=this._zeroBits(this.words[r]);t+=n;if(n!==26)break}return t};i.prototype.byteLength=function e(){return Math.ceil(this.bitLength()/8)};i.prototype.toTwos=function e(t){if(this.negative!==0){return this.abs().inotn(t).iaddn(1)}return this.clone()};i.prototype.fromTwos=function e(t){if(this.testn(t-1)){return this.notn(t).iaddn(1).ineg()}return this.clone()};i.prototype.isNeg=function e(){return this.negative!==0};i.prototype.neg=function e(){return this.clone().ineg()};i.prototype.ineg=function e(){if(!this.isZero()){this.negative^=1}return this};i.prototype.iuor=function e(t){while(this.length<t.length){this.words[this.length++]=0}for(var r=0;r<t.length;r++){this.words[r]=this.words[r]|t.words[r]}return this.strip()};i.prototype.ior=function e(t){r((this.negative|t.negative)===0);return this.iuor(t)};i.prototype.or=function e(t){if(this.length>t.length)return this.clone().ior(t);return t.clone().ior(this)};i.prototype.uor=function e(t){if(this.length>t.length)return this.clone().iuor(t);return t.clone().iuor(this)};i.prototype.iuand=function e(t){var r;if(this.length>t.length){r=t}else{r=this}for(var n=0;n<r.length;n++){this.words[n]=this.words[n]&t.words[n]}this.length=r.length;return this.strip()};i.prototype.iand=function e(t){r((this.negative|t.negative)===0);return this.iuand(t)};i.prototype.and=function e(t){if(this.length>t.length)return this.clone().iand(t);return t.clone().iand(this)};i.prototype.uand=function e(t){if(this.length>t.length)return this.clone().iuand(t);return t.clone().iuand(this)};i.prototype.iuxor=function e(t){var r;var n;if(this.length>t.length){r=this;n=t}else{r=t;n=this}for(var i=0;i<n.length;i++){this.words[i]=r.words[i]^n.words[i]}if(this!==r){for(;i<r.length;i++){this.words[i]=r.words[i]}}this.length=r.length;return this.strip()};i.prototype.ixor=function e(t){r((this.negative|t.negative)===0);return this.iuxor(t)};i.prototype.xor=function e(t){if(this.length>t.length)return this.clone().ixor(t);return t.clone().ixor(this)};i.prototype.uxor=function e(t){if(this.length>t.length)return this.clone().iuxor(t);return t.clone().iuxor(this)};i.prototype.inotn=function e(t){r(typeof t==="number"&&t>=0);var n=Math.ceil(t/26)|0;var i=t%26;this._expand(n);if(i>0){n--}for(var s=0;s<n;s++){this.words[s]=~this.words[s]&67108863}if(i>0){this.words[s]=~this.words[s]&67108863>>26-i}return this.strip()};i.prototype.notn=function e(t){return this.clone().inotn(t)};i.prototype.setn=function e(t,n){r(typeof t==="number"&&t>=0);var i=t/26|0;var s=t%26;this._expand(i+1);if(n){this.words[i]=this.words[i]|1<<s}else{this.words[i]=this.words[i]&~(1<<s)}return this.strip()};i.prototype.iadd=function e(t){var r;if(this.negative!==0&&t.negative===0){this.negative=0;r=this.isub(t);this.negative^=1;return this._normSign()}else if(this.negative===0&&t.negative!==0){t.negative=0;r=this.isub(t);t.negative=1;return r._normSign()}var n,i;if(this.length>t.length){n=this;i=t}else{n=t;i=this}var s=0;for(var a=0;a<i.length;a++){r=(n.words[a]|0)+(i.words[a]|0)+s;this.words[a]=r&67108863;s=r>>>26}for(;s!==0&&a<n.length;a++){r=(n.words[a]|0)+s;this.words[a]=r&67108863;s=r>>>26}this.length=n.length;if(s!==0){this.words[this.length]=s;this.length++}else if(n!==this){for(;a<n.length;a++){this.words[a]=n.words[a]}}return this};i.prototype.add=function e(t){var r;if(t.negative!==0&&this.negative===0){t.negative=0;r=this.sub(t);t.negative^=1;return r}else if(t.negative===0&&this.negative!==0){this.negative=0;r=t.sub(this);this.negative=1;return r}if(this.length>t.length)return this.clone().iadd(t);return t.clone().iadd(this)};i.prototype.isub=function e(t){if(t.negative!==0){t.negative=0;var r=this.iadd(t);t.negative=1;return r._normSign()}else if(this.negative!==0){this.negative=0;this.iadd(t);this.negative=1;return this._normSign()}var n=this.cmp(t);if(n===0){this.negative=0;this.length=1;this.words[0]=0;return this}var i,s;if(n>0){i=this;s=t}else{i=t;s=this}var a=0;for(var o=0;o<s.length;o++){r=(i.words[o]|0)-(s.words[o]|0)+a;a=r>>26;this.words[o]=r&67108863}for(;a!==0&&o<i.length;o++){r=(i.words[o]|0)+a;a=r>>26;this.words[o]=r&67108863}if(a===0&&o<i.length&&i!==this){for(;o<i.length;o++){this.words[o]=i.words[o]}}this.length=Math.max(this.length,o);if(i!==this){this.negative=1}return this.strip()};i.prototype.sub=function e(t){return this.clone().isub(t)};function d(e,t,r){r.negative=t.negative^e.negative;var n=e.length+t.length|0;r.length=n;n=n-1|0;var i=e.words[0]|0;var s=t.words[0]|0;var a=i*s;var o=a&67108863;var f=a/67108864|0;r.words[0]=o;for(var c=1;c<n;c++){var u=f>>>26;var l=f&67108863;var h=Math.min(c,t.length-1);for(var d=Math.max(0,c-e.length+1);d<=h;d++){var p=c-d|0;i=e.words[p]|0;s=t.words[d]|0;a=i*s+l;u+=a/67108864|0;l=a&67108863}r.words[c]=l|0;f=u|0}if(f!==0){r.words[c]=f|0}else{r.length--}return r.strip()}var p=function e(t,r,n){var i=t.words;var s=r.words;var a=n.words;var o=0;var f;var c;var u;var l=i[0]|0;var h=l&8191;var d=l>>>13;var p=i[1]|0;var y=p&8191;var m=p>>>13;var g=i[2]|0;var b=g&8191;var A=g>>>13;var w=i[3]|0;var E=w&8191;var v=w>>>13;var _=i[4]|0;var S=_&8191;var $=_>>>13;var T=i[5]|0;var I=T&8191;var C=T>>>13;var P=i[6]|0;var R=P&8191;var N=P>>>13;var k=i[7]|0;var O=k&8191;var x=k>>>13;var B=i[8]|0;var D=B&8191;var M=B>>>13;var U=i[9]|0;var L=U&8191;var F=U>>>13;var H=s[0]|0;var V=H&8191;var G=H>>>13;var j=s[1]|0;var K=j&8191;var Y=j>>>13;var q=s[2]|0;var z=q&8191;var X=q>>>13;var Q=s[3]|0;var W=Q&8191;var J=Q>>>13;var Z=s[4]|0;var ee=Z&8191;var te=Z>>>13;var re=s[5]|0;var ne=re&8191;var ie=re>>>13;var se=s[6]|0;var ae=se&8191;var oe=se>>>13;var fe=s[7]|0;var ce=fe&8191;var ue=fe>>>13;var le=s[8]|0;var he=le&8191;var de=le>>>13;var pe=s[9]|0;var ye=pe&8191;var me=pe>>>13;n.negative=t.negative^r.negative;n.length=19;f=Math.imul(h,V);c=Math.imul(h,G);c=c+Math.imul(d,V)|0;u=Math.imul(d,G);var ge=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(ge>>>26)|0;ge&=67108863;f=Math.imul(y,V);c=Math.imul(y,G);c=c+Math.imul(m,V)|0;u=Math.imul(m,G);f=f+Math.imul(h,K)|0;c=c+Math.imul(h,Y)|0;c=c+Math.imul(d,K)|0;u=u+Math.imul(d,Y)|0;var be=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(be>>>26)|0;be&=67108863;f=Math.imul(b,V);c=Math.imul(b,G);c=c+Math.imul(A,V)|0;u=Math.imul(A,G);f=f+Math.imul(y,K)|0;c=c+Math.imul(y,Y)|0;c=c+Math.imul(m,K)|0;u=u+Math.imul(m,Y)|0;f=f+Math.imul(h,z)|0;c=c+Math.imul(h,X)|0;c=c+Math.imul(d,z)|0;u=u+Math.imul(d,X)|0;var Ae=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Ae>>>26)|0;Ae&=67108863;f=Math.imul(E,V);c=Math.imul(E,G);c=c+Math.imul(v,V)|0;u=Math.imul(v,G);f=f+Math.imul(b,K)|0;c=c+Math.imul(b,Y)|0;c=c+Math.imul(A,K)|0;u=u+Math.imul(A,Y)|0;f=f+Math.imul(y,z)|0;c=c+Math.imul(y,X)|0;c=c+Math.imul(m,z)|0;u=u+Math.imul(m,X)|0;f=f+Math.imul(h,W)|0;c=c+Math.imul(h,J)|0;c=c+Math.imul(d,W)|0;u=u+Math.imul(d,J)|0;var we=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(we>>>26)|0;we&=67108863;f=Math.imul(S,V);c=Math.imul(S,G);c=c+Math.imul($,V)|0;u=Math.imul($,G);f=f+Math.imul(E,K)|0;c=c+Math.imul(E,Y)|0;c=c+Math.imul(v,K)|0;u=u+Math.imul(v,Y)|0;f=f+Math.imul(b,z)|0;c=c+Math.imul(b,X)|0;c=c+Math.imul(A,z)|0;u=u+Math.imul(A,X)|0;f=f+Math.imul(y,W)|0;c=c+Math.imul(y,J)|0;c=c+Math.imul(m,W)|0;u=u+Math.imul(m,J)|0;f=f+Math.imul(h,ee)|0;c=c+Math.imul(h,te)|0;c=c+Math.imul(d,ee)|0;u=u+Math.imul(d,te)|0;var Ee=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Ee>>>26)|0;Ee&=67108863;f=Math.imul(I,V);c=Math.imul(I,G);c=c+Math.imul(C,V)|0;u=Math.imul(C,G);f=f+Math.imul(S,K)|0;c=c+Math.imul(S,Y)|0;c=c+Math.imul($,K)|0;u=u+Math.imul($,Y)|0;f=f+Math.imul(E,z)|0;c=c+Math.imul(E,X)|0;c=c+Math.imul(v,z)|0;u=u+Math.imul(v,X)|0;f=f+Math.imul(b,W)|0;c=c+Math.imul(b,J)|0;c=c+Math.imul(A,W)|0;u=u+Math.imul(A,J)|0;f=f+Math.imul(y,ee)|0;c=c+Math.imul(y,te)|0;c=c+Math.imul(m,ee)|0;u=u+Math.imul(m,te)|0;f=f+Math.imul(h,ne)|0;c=c+Math.imul(h,ie)|0;c=c+Math.imul(d,ne)|0;u=u+Math.imul(d,ie)|0;var ve=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(ve>>>26)|0;ve&=67108863;f=Math.imul(R,V);c=Math.imul(R,G);c=c+Math.imul(N,V)|0;u=Math.imul(N,G);f=f+Math.imul(I,K)|0;c=c+Math.imul(I,Y)|0;c=c+Math.imul(C,K)|0;u=u+Math.imul(C,Y)|0;f=f+Math.imul(S,z)|0;c=c+Math.imul(S,X)|0;c=c+Math.imul($,z)|0;u=u+Math.imul($,X)|0;f=f+Math.imul(E,W)|0;c=c+Math.imul(E,J)|0;c=c+Math.imul(v,W)|0;u=u+Math.imul(v,J)|0;f=f+Math.imul(b,ee)|0;c=c+Math.imul(b,te)|0;c=c+Math.imul(A,ee)|0;u=u+Math.imul(A,te)|0;f=f+Math.imul(y,ne)|0;c=c+Math.imul(y,ie)|0;c=c+Math.imul(m,ne)|0;u=u+Math.imul(m,ie)|0;f=f+Math.imul(h,ae)|0;c=c+Math.imul(h,oe)|0;c=c+Math.imul(d,ae)|0;u=u+Math.imul(d,oe)|0;var _e=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(_e>>>26)|0;_e&=67108863;f=Math.imul(O,V);c=Math.imul(O,G);c=c+Math.imul(x,V)|0;u=Math.imul(x,G);f=f+Math.imul(R,K)|0;c=c+Math.imul(R,Y)|0;c=c+Math.imul(N,K)|0;u=u+Math.imul(N,Y)|0;f=f+Math.imul(I,z)|0;c=c+Math.imul(I,X)|0;c=c+Math.imul(C,z)|0;u=u+Math.imul(C,X)|0;f=f+Math.imul(S,W)|0;c=c+Math.imul(S,J)|0;c=c+Math.imul($,W)|0;u=u+Math.imul($,J)|0;f=f+Math.imul(E,ee)|0;c=c+Math.imul(E,te)|0;c=c+Math.imul(v,ee)|0;u=u+Math.imul(v,te)|0;f=f+Math.imul(b,ne)|0;c=c+Math.imul(b,ie)|0;c=c+Math.imul(A,ne)|0;u=u+Math.imul(A,ie)|0;f=f+Math.imul(y,ae)|0;c=c+Math.imul(y,oe)|0;c=c+Math.imul(m,ae)|0;u=u+Math.imul(m,oe)|0;f=f+Math.imul(h,ce)|0;c=c+Math.imul(h,ue)|0;c=c+Math.imul(d,ce)|0;u=u+Math.imul(d,ue)|0;var Se=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Se>>>26)|0;Se&=67108863;f=Math.imul(D,V);c=Math.imul(D,G);c=c+Math.imul(M,V)|0;u=Math.imul(M,G);f=f+Math.imul(O,K)|0;c=c+Math.imul(O,Y)|0;c=c+Math.imul(x,K)|0;u=u+Math.imul(x,Y)|0;f=f+Math.imul(R,z)|0;c=c+Math.imul(R,X)|0;c=c+Math.imul(N,z)|0;u=u+Math.imul(N,X)|0;f=f+Math.imul(I,W)|0;c=c+Math.imul(I,J)|0;c=c+Math.imul(C,W)|0;u=u+Math.imul(C,J)|0;f=f+Math.imul(S,ee)|0;c=c+Math.imul(S,te)|0;c=c+Math.imul($,ee)|0;u=u+Math.imul($,te)|0;f=f+Math.imul(E,ne)|0;c=c+Math.imul(E,ie)|0;c=c+Math.imul(v,ne)|0;u=u+Math.imul(v,ie)|0;f=f+Math.imul(b,ae)|0;c=c+Math.imul(b,oe)|0;c=c+Math.imul(A,ae)|0;u=u+Math.imul(A,oe)|0;f=f+Math.imul(y,ce)|0;c=c+Math.imul(y,ue)|0;c=c+Math.imul(m,ce)|0;u=u+Math.imul(m,ue)|0;f=f+Math.imul(h,he)|0;c=c+Math.imul(h,de)|0;c=c+Math.imul(d,he)|0;u=u+Math.imul(d,de)|0;var $e=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+($e>>>26)|0;$e&=67108863;f=Math.imul(L,V);c=Math.imul(L,G);c=c+Math.imul(F,V)|0;u=Math.imul(F,G);f=f+Math.imul(D,K)|0;c=c+Math.imul(D,Y)|0;c=c+Math.imul(M,K)|0;u=u+Math.imul(M,Y)|0;f=f+Math.imul(O,z)|0;c=c+Math.imul(O,X)|0;c=c+Math.imul(x,z)|0;u=u+Math.imul(x,X)|0;f=f+Math.imul(R,W)|0;c=c+Math.imul(R,J)|0;c=c+Math.imul(N,W)|0;u=u+Math.imul(N,J)|0;f=f+Math.imul(I,ee)|0;c=c+Math.imul(I,te)|0;c=c+Math.imul(C,ee)|0;u=u+Math.imul(C,te)|0;f=f+Math.imul(S,ne)|0;c=c+Math.imul(S,ie)|0;c=c+Math.imul($,ne)|0;u=u+Math.imul($,ie)|0;f=f+Math.imul(E,ae)|0;c=c+Math.imul(E,oe)|0;c=c+Math.imul(v,ae)|0;u=u+Math.imul(v,oe)|0;f=f+Math.imul(b,ce)|0;c=c+Math.imul(b,ue)|0;c=c+Math.imul(A,ce)|0;u=u+Math.imul(A,ue)|0;f=f+Math.imul(y,he)|0;c=c+Math.imul(y,de)|0;c=c+Math.imul(m,he)|0;u=u+Math.imul(m,de)|0;f=f+Math.imul(h,ye)|0;c=c+Math.imul(h,me)|0;c=c+Math.imul(d,ye)|0;u=u+Math.imul(d,me)|0;var Te=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Te>>>26)|0;Te&=67108863;f=Math.imul(L,K);c=Math.imul(L,Y);c=c+Math.imul(F,K)|0;u=Math.imul(F,Y);f=f+Math.imul(D,z)|0;c=c+Math.imul(D,X)|0;c=c+Math.imul(M,z)|0;u=u+Math.imul(M,X)|0;f=f+Math.imul(O,W)|0;c=c+Math.imul(O,J)|0;c=c+Math.imul(x,W)|0;u=u+Math.imul(x,J)|0;f=f+Math.imul(R,ee)|0;c=c+Math.imul(R,te)|0;c=c+Math.imul(N,ee)|0;u=u+Math.imul(N,te)|0;f=f+Math.imul(I,ne)|0;c=c+Math.imul(I,ie)|0;c=c+Math.imul(C,ne)|0;u=u+Math.imul(C,ie)|0;f=f+Math.imul(S,ae)|0;c=c+Math.imul(S,oe)|0;c=c+Math.imul($,ae)|0;u=u+Math.imul($,oe)|0;f=f+Math.imul(E,ce)|0;c=c+Math.imul(E,ue)|0;c=c+Math.imul(v,ce)|0;u=u+Math.imul(v,ue)|0;f=f+Math.imul(b,he)|0;c=c+Math.imul(b,de)|0;c=c+Math.imul(A,he)|0;u=u+Math.imul(A,de)|0;f=f+Math.imul(y,ye)|0;c=c+Math.imul(y,me)|0;c=c+Math.imul(m,ye)|0;u=u+Math.imul(m,me)|0;var Ie=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Ie>>>26)|0;Ie&=67108863;f=Math.imul(L,z);c=Math.imul(L,X);c=c+Math.imul(F,z)|0;u=Math.imul(F,X);f=f+Math.imul(D,W)|0;c=c+Math.imul(D,J)|0;c=c+Math.imul(M,W)|0;u=u+Math.imul(M,J)|0;f=f+Math.imul(O,ee)|0;c=c+Math.imul(O,te)|0;c=c+Math.imul(x,ee)|0;u=u+Math.imul(x,te)|0;f=f+Math.imul(R,ne)|0;c=c+Math.imul(R,ie)|0;c=c+Math.imul(N,ne)|0;u=u+Math.imul(N,ie)|0;f=f+Math.imul(I,ae)|0;c=c+Math.imul(I,oe)|0;c=c+Math.imul(C,ae)|0;u=u+Math.imul(C,oe)|0;f=f+Math.imul(S,ce)|0;c=c+Math.imul(S,ue)|0;c=c+Math.imul($,ce)|0;u=u+Math.imul($,ue)|0;f=f+Math.imul(E,he)|0;c=c+Math.imul(E,de)|0;c=c+Math.imul(v,he)|0;u=u+Math.imul(v,de)|0;f=f+Math.imul(b,ye)|0;c=c+Math.imul(b,me)|0;c=c+Math.imul(A,ye)|0;u=u+Math.imul(A,me)|0;var Ce=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Ce>>>26)|0;Ce&=67108863;f=Math.imul(L,W);c=Math.imul(L,J);c=c+Math.imul(F,W)|0;u=Math.imul(F,J);f=f+Math.imul(D,ee)|0;c=c+Math.imul(D,te)|0;c=c+Math.imul(M,ee)|0;u=u+Math.imul(M,te)|0;f=f+Math.imul(O,ne)|0;c=c+Math.imul(O,ie)|0;c=c+Math.imul(x,ne)|0;u=u+Math.imul(x,ie)|0;f=f+Math.imul(R,ae)|0;c=c+Math.imul(R,oe)|0;c=c+Math.imul(N,ae)|0;u=u+Math.imul(N,oe)|0;f=f+Math.imul(I,ce)|0;c=c+Math.imul(I,ue)|0;c=c+Math.imul(C,ce)|0;u=u+Math.imul(C,ue)|0;f=f+Math.imul(S,he)|0;c=c+Math.imul(S,de)|0;c=c+Math.imul($,he)|0;u=u+Math.imul($,de)|0;f=f+Math.imul(E,ye)|0;c=c+Math.imul(E,me)|0;c=c+Math.imul(v,ye)|0;u=u+Math.imul(v,me)|0;var Pe=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Pe>>>26)|0;Pe&=67108863;f=Math.imul(L,ee);c=Math.imul(L,te);c=c+Math.imul(F,ee)|0;u=Math.imul(F,te);f=f+Math.imul(D,ne)|0;c=c+Math.imul(D,ie)|0;c=c+Math.imul(M,ne)|0;u=u+Math.imul(M,ie)|0;f=f+Math.imul(O,ae)|0;c=c+Math.imul(O,oe)|0;c=c+Math.imul(x,ae)|0;u=u+Math.imul(x,oe)|0;f=f+Math.imul(R,ce)|0;c=c+Math.imul(R,ue)|0;c=c+Math.imul(N,ce)|0;u=u+Math.imul(N,ue)|0;f=f+Math.imul(I,he)|0;c=c+Math.imul(I,de)|0;c=c+Math.imul(C,he)|0;u=u+Math.imul(C,de)|0;f=f+Math.imul(S,ye)|0;c=c+Math.imul(S,me)|0;c=c+Math.imul($,ye)|0;u=u+Math.imul($,me)|0;var Re=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Re>>>26)|0;Re&=67108863;f=Math.imul(L,ne);c=Math.imul(L,ie);c=c+Math.imul(F,ne)|0;u=Math.imul(F,ie);f=f+Math.imul(D,ae)|0;c=c+Math.imul(D,oe)|0;c=c+Math.imul(M,ae)|0;u=u+Math.imul(M,oe)|0;f=f+Math.imul(O,ce)|0;c=c+Math.imul(O,ue)|0;c=c+Math.imul(x,ce)|0;u=u+Math.imul(x,ue)|0;f=f+Math.imul(R,he)|0;c=c+Math.imul(R,de)|0;c=c+Math.imul(N,he)|0;u=u+Math.imul(N,de)|0;f=f+Math.imul(I,ye)|0;c=c+Math.imul(I,me)|0;c=c+Math.imul(C,ye)|0;u=u+Math.imul(C,me)|0;var Ne=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Ne>>>26)|0;Ne&=67108863;f=Math.imul(L,ae);c=Math.imul(L,oe);c=c+Math.imul(F,ae)|0;u=Math.imul(F,oe);f=f+Math.imul(D,ce)|0;c=c+Math.imul(D,ue)|0;c=c+Math.imul(M,ce)|0;u=u+Math.imul(M,ue)|0;f=f+Math.imul(O,he)|0;c=c+Math.imul(O,de)|0;c=c+Math.imul(x,he)|0;u=u+Math.imul(x,de)|0;f=f+Math.imul(R,ye)|0;c=c+Math.imul(R,me)|0;c=c+Math.imul(N,ye)|0;u=u+Math.imul(N,me)|0;var ke=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(ke>>>26)|0;ke&=67108863;f=Math.imul(L,ce);c=Math.imul(L,ue);c=c+Math.imul(F,ce)|0;u=Math.imul(F,ue);f=f+Math.imul(D,he)|0;c=c+Math.imul(D,de)|0;c=c+Math.imul(M,he)|0;u=u+Math.imul(M,de)|0;f=f+Math.imul(O,ye)|0;c=c+Math.imul(O,me)|0;c=c+Math.imul(x,ye)|0;u=u+Math.imul(x,me)|0;var Oe=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Oe>>>26)|0;Oe&=67108863;f=Math.imul(L,he);c=Math.imul(L,de);c=c+Math.imul(F,he)|0;u=Math.imul(F,de);f=f+Math.imul(D,ye)|0;c=c+Math.imul(D,me)|0;c=c+Math.imul(M,ye)|0;u=u+Math.imul(M,me)|0;var xe=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(xe>>>26)|0;xe&=67108863;f=Math.imul(L,ye);c=Math.imul(L,me);c=c+Math.imul(F,ye)|0;u=Math.imul(F,me);var Be=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Be>>>26)|0;Be&=67108863;a[0]=ge;a[1]=be;a[2]=Ae;a[3]=we;a[4]=Ee;a[5]=ve;a[6]=_e;a[7]=Se;a[8]=$e;a[9]=Te;a[10]=Ie;a[11]=Ce;a[12]=Pe;a[13]=Re;a[14]=Ne;a[15]=ke;a[16]=Oe;a[17]=xe;a[18]=Be;if(o!==0){a[19]=o;n.length++}return n};if(!Math.imul){p=d}function y(e,t,r){r.negative=t.negative^e.negative;r.length=e.length+t.length;var n=0;var i=0;for(var s=0;s<r.length-1;s++){var a=i;i=0;var o=n&67108863;var f=Math.min(s,t.length-1);for(var c=Math.max(0,s-e.length+1);c<=f;c++){var u=s-c;var l=e.words[u]|0;var h=t.words[c]|0;var d=l*h;var p=d&67108863;a=a+(d/67108864|0)|0;p=p+o|0;o=p&67108863;a=a+(p>>>26)|0;i+=a>>>26;a&=67108863}r.words[s]=o;n=a;a=i}if(n!==0){r.words[s]=n}else{r.length--}return r.strip()}function m(e,t,r){var n=new g;return n.mulp(e,t,r)}i.prototype.mulTo=function e(t,r){var n;var i=this.length+t.length;if(this.length===10&&t.length===10){n=p(this,t,r)}else if(i<63){n=d(this,t,r)}else if(i<1024){n=y(this,t,r)}else{n=m(this,t,r)}return n};function g(e,t){this.x=e;this.y=t}g.prototype.makeRBT=function e(t){var r=new Array(t);var n=i.prototype._countBits(t)-1;for(var s=0;s<t;s++){r[s]=this.revBin(s,n,t)}return r};g.prototype.revBin=function e(t,r,n){if(t===0||t===n-1)return t;var i=0;for(var s=0;s<r;s++){i|=(t&1)<<r-s-1;t>>=1}return i};g.prototype.permute=function e(t,r,n,i,s,a){for(var o=0;o<a;o++){i[o]=r[t[o]];s[o]=n[t[o]]}};g.prototype.transform=function e(t,r,n,i,s,a){this.permute(a,t,r,n,i,s);for(var o=1;o<s;o<<=1){var f=o<<1;var c=Math.cos(2*Math.PI/f);var u=Math.sin(2*Math.PI/f);for(var l=0;l<s;l+=f){var h=c;var d=u;for(var p=0;p<o;p++){var y=n[l+p];var m=i[l+p];var g=n[l+p+o];var b=i[l+p+o];var A=h*g-d*b;b=h*b+d*g;g=A;n[l+p]=y+g;i[l+p]=m+b;n[l+p+o]=y-g;i[l+p+o]=m-b;if(p!==f){A=c*h-u*d;d=c*d+u*h;h=A}}}}};g.prototype.guessLen13b=function e(t,r){var n=Math.max(r,t)|1;var i=n&1;var s=0;for(n=n/2|0;n;n=n>>>1){s++}return 1<<s+1+i};g.prototype.conjugate=function e(t,r,n){if(n<=1)return;for(var i=0;i<n/2;i++){var s=t[i];t[i]=t[n-i-1];t[n-i-1]=s;s=r[i];r[i]=-r[n-i-1];r[n-i-1]=-s}};g.prototype.normalize13b=function e(t,r){var n=0;for(var i=0;i<r/2;i++){var s=Math.round(t[2*i+1]/r)*8192+Math.round(t[2*i]/r)+n;t[i]=s&67108863;if(s<67108864){n=0}else{n=s/67108864|0}}return t};g.prototype.convert13b=function e(t,n,i,s){var a=0;for(var o=0;o<n;o++){a=a+(t[o]|0);i[2*o]=a&8191;a=a>>>13;i[2*o+1]=a&8191;a=a>>>13}for(o=2*n;o<s;++o){i[o]=0}r(a===0);r((a&~8191)===0)};g.prototype.stub=function e(t){var r=new Array(t);for(var n=0;n<t;n++){r[n]=0}return r};g.prototype.mulp=function e(t,r,n){var i=2*this.guessLen13b(t.length,r.length);var s=this.makeRBT(i);var a=this.stub(i);var o=new Array(i);var f=new Array(i);var c=new Array(i);var u=new Array(i);var l=new Array(i);var h=new Array(i);var d=n.words;d.length=i;this.convert13b(t.words,t.length,o,i);this.convert13b(r.words,r.length,u,i);this.transform(o,a,f,c,i,s);this.transform(u,a,l,h,i,s);for(var p=0;p<i;p++){var y=f[p]*l[p]-c[p]*h[p];c[p]=f[p]*h[p]+c[p]*l[p];f[p]=y}this.conjugate(f,c,i);this.transform(f,c,d,a,i,s);this.conjugate(d,a,i);this.normalize13b(d,i);n.negative=t.negative^r.negative;n.length=t.length+r.length;return n.strip()};i.prototype.mul=function e(t){var r=new i(null);r.words=new Array(this.length+t.length);return this.mulTo(t,r)};i.prototype.mulf=function e(t){var r=new i(null);r.words=new Array(this.length+t.length);return m(this,t,r)};i.prototype.imul=function e(t){return this.clone().mulTo(t,this)};i.prototype.imuln=function e(t){r(typeof t==="number");r(t<67108864);var n=0;for(var i=0;i<this.length;i++){var s=(this.words[i]|0)*t;var a=(s&67108863)+(n&67108863);n>>=26;n+=s/67108864|0;n+=a>>>26;this.words[i]=a&67108863}if(n!==0){this.words[i]=n;this.length++}return this};i.prototype.muln=function e(t){return this.clone().imuln(t)};i.prototype.sqr=function e(){return this.mul(this)};i.prototype.isqr=function e(){return this.imul(this.clone())};i.prototype.pow=function e(t){var r=h(t);if(r.length===0)return new i(1);var n=this;for(var s=0;s<r.length;s++,n=n.sqr()){if(r[s]!==0)break}if(++s<r.length){for(var a=n.sqr();s<r.length;s++,a=a.sqr()){if(r[s]===0)continue;n=n.mul(a)}}return n};i.prototype.iushln=function e(t){r(typeof t==="number"&&t>=0);var n=t%26;var i=(t-n)/26;var s=67108863>>>26-n<<26-n;var a;if(n!==0){var o=0;for(a=0;a<this.length;a++){var f=this.words[a]&s;var c=(this.words[a]|0)-f<<n;this.words[a]=c|o;o=f>>>26-n}if(o){this.words[a]=o;this.length++}}if(i!==0){for(a=this.length-1;a>=0;a--){this.words[a+i]=this.words[a]}for(a=0;a<i;a++){this.words[a]=0}this.length+=i}return this.strip()};i.prototype.ishln=function e(t){r(this.negative===0);return this.iushln(t)};i.prototype.iushrn=function e(t,n,i){r(typeof t==="number"&&t>=0);var s;if(n){s=(n-n%26)/26}else{s=0}var a=t%26;var o=Math.min((t-a)/26,this.length);var f=67108863^67108863>>>a<<a;var c=i;s-=o;s=Math.max(0,s);if(c){for(var u=0;u<o;u++){c.words[u]=this.words[u]}c.length=o}if(o===0);else if(this.length>o){this.length-=o;for(u=0;u<this.length;u++){this.words[u]=this.words[u+o]}}else{this.words[0]=0;this.length=1}var l=0;for(u=this.length-1;u>=0&&(l!==0||u>=s);u--){var h=this.words[u]|0;this.words[u]=l<<26-a|h>>>a;l=h&f}if(c&&l!==0){c.words[c.length++]=l}if(this.length===0){this.words[0]=0;this.length=1}return this.strip()};i.prototype.ishrn=function e(t,n,i){r(this.negative===0);return this.iushrn(t,n,i)};i.prototype.shln=function e(t){return this.clone().ishln(t)};i.prototype.ushln=function e(t){return this.clone().iushln(t)};i.prototype.shrn=function e(t){return this.clone().ishrn(t)};i.prototype.ushrn=function e(t){return this.clone().iushrn(t)};i.prototype.testn=function e(t){r(typeof t==="number"&&t>=0);var n=t%26;var i=(t-n)/26;var s=1<<n;if(this.length<=i)return false;var a=this.words[i];return!!(a&s)};i.prototype.imaskn=function e(t){r(typeof t==="number"&&t>=0);var n=t%26;var i=(t-n)/26;r(this.negative===0,"imaskn works only with positive numbers");if(this.length<=i){return this}if(n!==0){i++}this.length=Math.min(i,this.length);if(n!==0){var s=67108863^67108863>>>n<<n;this.words[this.length-1]&=s}return this.strip()};i.prototype.maskn=function e(t){return this.clone().imaskn(t)};i.prototype.iaddn=function e(t){r(typeof t==="number");r(t<67108864);if(t<0)return this.isubn(-t);if(this.negative!==0){if(this.length===1&&(this.words[0]|0)<t){this.words[0]=t-(this.words[0]|0);this.negative=0;return this}this.negative=0;this.isubn(t);this.negative=1;return this}return this._iaddn(t)};i.prototype._iaddn=function e(t){this.words[0]+=t;for(var r=0;r<this.length&&this.words[r]>=67108864;r++){this.words[r]-=67108864;if(r===this.length-1){this.words[r+1]=1}else{this.words[r+1]++}}this.length=Math.max(this.length,r+1);return this};i.prototype.isubn=function e(t){r(typeof t==="number");r(t<67108864);if(t<0)return this.iaddn(-t);if(this.negative!==0){this.negative=0;this.iaddn(t);this.negative=1;return this}this.words[0]-=t;if(this.length===1&&this.words[0]<0){this.words[0]=-this.words[0];this.negative=1}else{for(var n=0;n<this.length&&this.words[n]<0;n++){this.words[n]+=67108864;this.words[n+1]-=1}}return this.strip()};i.prototype.addn=function e(t){return this.clone().iaddn(t)};i.prototype.subn=function e(t){return this.clone().isubn(t)};i.prototype.iabs=function e(){this.negative=0;return this};i.prototype.abs=function e(){return this.clone().iabs()};i.prototype._ishlnsubmul=function e(t,n,i){var s=t.length+i;var a;this._expand(s);var o;var f=0;for(a=0;a<t.length;a++){o=(this.words[a+i]|0)+f;var c=(t.words[a]|0)*n;o-=c&67108863;f=(o>>26)-(c/67108864|0);this.words[a+i]=o&67108863}for(;a<this.length-i;a++){o=(this.words[a+i]|0)+f;f=o>>26;this.words[a+i]=o&67108863}if(f===0)return this.strip();r(f===-1);f=0;for(a=0;a<this.length;a++){o=-(this.words[a]|0)+f;f=o>>26;this.words[a]=o&67108863}this.negative=1;return this.strip()};i.prototype._wordDiv=function e(t,r){var n=this.length-t.length;var s=this.clone();var a=t;var o=a.words[a.length-1]|0;var f=this._countBits(o);n=26-f;if(n!==0){a=a.ushln(n);s.iushln(n);o=a.words[a.length-1]|0}var c=s.length-a.length;var u;if(r!=="mod"){u=new i(null);u.length=c+1;u.words=new Array(u.length);for(var l=0;l<u.length;l++){u.words[l]=0}}var h=s.clone()._ishlnsubmul(a,1,c);if(h.negative===0){s=h;if(u){u.words[c]=1}}for(var d=c-1;d>=0;d--){var p=(s.words[a.length+d]|0)*67108864+(s.words[a.length+d-1]|0);p=Math.min(p/o|0,67108863);s._ishlnsubmul(a,p,d);while(s.negative!==0){p--;s.negative=0;s._ishlnsubmul(a,1,d);if(!s.isZero()){s.negative^=1}}if(u){u.words[d]=p}}if(u){u.strip()}s.strip();if(r!=="div"&&n!==0){s.iushrn(n)}return{div:u||null,mod:s}};i.prototype.divmod=function e(t,n,s){r(!t.isZero());if(this.isZero()){return{div:new i(0),mod:new i(0)}}var a,o,f;if(this.negative!==0&&t.negative===0){f=this.neg().divmod(t,n);if(n!=="mod"){a=f.div.neg()}if(n!=="div"){o=f.mod.neg();if(s&&o.negative!==0){o.iadd(t)}}return{div:a,mod:o}}if(this.negative===0&&t.negative!==0){f=this.divmod(t.neg(),n);if(n!=="mod"){a=f.div.neg()}return{div:a,mod:f.mod}}if((this.negative&t.negative)!==0){f=this.neg().divmod(t.neg(),n);if(n!=="div"){o=f.mod.neg();if(s&&o.negative!==0){o.isub(t)}}return{div:f.div,mod:o}}if(t.length>this.length||this.cmp(t)<0){return{div:new i(0),mod:this}}if(t.length===1){if(n==="div"){return{div:this.divn(t.words[0]),mod:null}}if(n==="mod"){return{div:null,mod:new i(this.modn(t.words[0]))}}return{div:this.divn(t.words[0]),mod:new i(this.modn(t.words[0]))}}return this._wordDiv(t,n)};i.prototype.div=function e(t){return this.divmod(t,"div",false).div};i.prototype.mod=function e(t){return this.divmod(t,"mod",false).mod};i.prototype.umod=function e(t){return this.divmod(t,"mod",true).mod};i.prototype.divRound=function e(t){var r=this.divmod(t);if(r.mod.isZero())return r.div;var n=r.div.negative!==0?r.mod.isub(t):r.mod;var i=t.ushrn(1);var s=t.andln(1);var a=n.cmp(i);if(a<0||s===1&&a===0)return r.div;return r.div.negative!==0?r.div.isubn(1):r.div.iaddn(1)};i.prototype.modn=function e(t){r(t<=67108863);var n=(1<<26)%t;var i=0;for(var s=this.length-1;s>=0;s--){i=(n*i+(this.words[s]|0))%t}return i};i.prototype.idivn=function e(t){r(t<=67108863);var n=0;for(var i=this.length-1;i>=0;i--){var s=(this.words[i]|0)+n*67108864;this.words[i]=s/t|0;n=s%t}return this.strip()};i.prototype.divn=function e(t){return this.clone().idivn(t)};i.prototype.egcd=function e(t){r(t.negative===0);r(!t.isZero());var n=this;var s=t.clone();if(n.negative!==0){n=n.umod(t)}else{n=n.clone()}var a=new i(1);var o=new i(0);var f=new i(0);var c=new i(1);var u=0;while(n.isEven()&&s.isEven()){n.iushrn(1);s.iushrn(1);++u}var l=s.clone();var h=n.clone();while(!n.isZero()){for(var d=0,p=1;(n.words[0]&p)===0&&d<26;++d,p<<=1);if(d>0){n.iushrn(d);while(d-- >0){if(a.isOdd()||o.isOdd()){a.iadd(l);o.isub(h)}a.iushrn(1);o.iushrn(1)}}for(var y=0,m=1;(s.words[0]&m)===0&&y<26;++y,m<<=1);if(y>0){s.iushrn(y);while(y-- >0){if(f.isOdd()||c.isOdd()){f.iadd(l);c.isub(h)}f.iushrn(1);c.iushrn(1)}}if(n.cmp(s)>=0){n.isub(s);a.isub(f);o.isub(c)}else{s.isub(n);f.isub(a);c.isub(o)}}return{a:f,b:c,gcd:s.iushln(u)}};i.prototype._invmp=function e(t){r(t.negative===0);r(!t.isZero());var n=this;var s=t.clone();if(n.negative!==0){n=n.umod(t)}else{n=n.clone()}var a=new i(1);var o=new i(0);var f=s.clone();while(n.cmpn(1)>0&&s.cmpn(1)>0){for(var c=0,u=1;(n.words[0]&u)===0&&c<26;++c,u<<=1);if(c>0){n.iushrn(c);while(c-- >0){if(a.isOdd()){a.iadd(f)}a.iushrn(1)}}for(var l=0,h=1;(s.words[0]&h)===0&&l<26;++l,h<<=1);if(l>0){s.iushrn(l);while(l-- >0){if(o.isOdd()){o.iadd(f)}o.iushrn(1)}}if(n.cmp(s)>=0){n.isub(s);a.isub(o)}else{s.isub(n);o.isub(a)}}var d;if(n.cmpn(1)===0){d=a}else{d=o}if(d.cmpn(0)<0){d.iadd(t)}return d};i.prototype.gcd=function e(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var r=this.clone();var n=t.clone();r.negative=0;n.negative=0;for(var i=0;r.isEven()&&n.isEven();i++){r.iushrn(1);n.iushrn(1)}do{while(r.isEven()){r.iushrn(1)}while(n.isEven()){n.iushrn(1)}var s=r.cmp(n);if(s<0){var a=r;r=n;n=a}else if(s===0||n.cmpn(1)===0){break}r.isub(n)}while(true);return n.iushln(i)};i.prototype.invm=function e(t){return this.egcd(t).a.umod(t)};i.prototype.isEven=function e(){return(this.words[0]&1)===0};i.prototype.isOdd=function e(){return(this.words[0]&1)===1};i.prototype.andln=function e(t){return this.words[0]&t};i.prototype.bincn=function e(t){r(typeof t==="number");var n=t%26;var i=(t-n)/26;var s=1<<n;if(this.length<=i){this._expand(i+1);this.words[i]|=s;return this}var a=s;for(var o=i;a!==0&&o<this.length;o++){var f=this.words[o]|0;f+=a;a=f>>>26;f&=67108863;this.words[o]=f}if(a!==0){this.words[o]=a;this.length++}return this};i.prototype.isZero=function e(){return this.length===1&&this.words[0]===0};i.prototype.cmpn=function e(t){var n=t<0;if(this.negative!==0&&!n)return-1;if(this.negative===0&&n)return 1;this.strip();var i;if(this.length>1){i=1}else{if(n){t=-t}r(t<=67108863,"Number is too big");var s=this.words[0]|0;i=s===t?0:s<t?-1:1}if(this.negative!==0)return-i|0;return i};i.prototype.cmp=function e(t){if(this.negative!==0&&t.negative===0)return-1;if(this.negative===0&&t.negative!==0)return 1;var r=this.ucmp(t);if(this.negative!==0)return-r|0;return r};i.prototype.ucmp=function e(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;var r=0;for(var n=this.length-1;n>=0;n--){var i=this.words[n]|0;var s=t.words[n]|0;if(i===s)continue;if(i<s){r=-1}else if(i>s){r=1}break}return r};i.prototype.gtn=function e(t){return this.cmpn(t)===1};i.prototype.gt=function e(t){return this.cmp(t)===1};i.prototype.gten=function e(t){return this.cmpn(t)>=0};i.prototype.gte=function e(t){return this.cmp(t)>=0};i.prototype.ltn=function e(t){return this.cmpn(t)===-1};i.prototype.lt=function e(t){return this.cmp(t)===-1};i.prototype.lten=function e(t){return this.cmpn(t)<=0};i.prototype.lte=function e(t){return this.cmp(t)<=0};i.prototype.eqn=function e(t){return this.cmpn(t)===0};i.prototype.eq=function e(t){return this.cmp(t)===0};i.red=function e(t){return new S(t)};i.prototype.toRed=function e(t){r(!this.red,"Already a number in reduction context");r(this.negative===0,"red works only with positives");return t.convertTo(this)._forceRed(t)};i.prototype.fromRed=function e(){r(this.red,"fromRed works only with numbers in reduction context");return this.red.convertFrom(this)};i.prototype._forceRed=function e(t){this.red=t;return this};i.prototype.forceRed=function e(t){r(!this.red,"Already a number in reduction context");return this._forceRed(t)};i.prototype.redAdd=function e(t){r(this.red,"redAdd works only with red numbers");return this.red.add(this,t)};i.prototype.redIAdd=function e(t){r(this.red,"redIAdd works only with red numbers");return this.red.iadd(this,t)};i.prototype.redSub=function e(t){r(this.red,"redSub works only with red numbers");return this.red.sub(this,t)};i.prototype.redISub=function e(t){r(this.red,"redISub works only with red numbers");return this.red.isub(this,t)};i.prototype.redShl=function e(t){r(this.red,"redShl works only with red numbers");return this.red.shl(this,t)};i.prototype.redMul=function e(t){r(this.red,"redMul works only with red numbers");this.red._verify2(this,t);return this.red.mul(this,t)};i.prototype.redIMul=function e(t){r(this.red,"redMul works only with red numbers");this.red._verify2(this,t);return this.red.imul(this,t)};i.prototype.redSqr=function e(){r(this.red,"redSqr works only with red numbers");this.red._verify1(this);return this.red.sqr(this)};i.prototype.redISqr=function e(){r(this.red,"redISqr works only with red numbers");this.red._verify1(this);return this.red.isqr(this)};i.prototype.redSqrt=function e(){r(this.red,"redSqrt works only with red numbers");this.red._verify1(this);return this.red.sqrt(this)};i.prototype.redInvm=function e(){r(this.red,"redInvm works only with red numbers");this.red._verify1(this);return this.red.invm(this)};i.prototype.redNeg=function e(){r(this.red,"redNeg works only with red numbers");this.red._verify1(this);return this.red.neg(this)};i.prototype.redPow=function e(t){r(this.red&&!t.red,"redPow(normalNum)");this.red._verify1(this);return this.red.pow(this,t)};var b={k256:null,p224:null,p192:null,p25519:null};function A(e,t){this.name=e;this.p=new i(t,16);this.n=this.p.bitLength();this.k=new i(1).iushln(this.n).isub(this.p);this.tmp=this._tmp()}A.prototype._tmp=function e(){var t=new i(null);t.words=new Array(Math.ceil(this.n/13));return t};A.prototype.ireduce=function e(t){var r=t;var n;do{this.split(r,this.tmp);r=this.imulK(r);r=r.iadd(this.tmp);n=r.bitLength()}while(n>this.n);var i=n<this.n?-1:r.ucmp(this.p);if(i===0){r.words[0]=0;r.length=1}else if(i>0){r.isub(this.p)}else{if(r.strip!==undefined){r.strip()}else{r._strip()}}return r};A.prototype.split=function e(t,r){t.iushrn(this.n,0,r)};A.prototype.imulK=function e(t){return t.imul(this.k)};function w(){A.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(w,A);w.prototype.split=function e(t,r){var n=4194303;var i=Math.min(t.length,9);for(var s=0;s<i;s++){r.words[s]=t.words[s]}r.length=i;if(t.length<=9){t.words[0]=0;t.length=1;return}var a=t.words[9];r.words[r.length++]=a&n;for(s=10;s<t.length;s++){var o=t.words[s]|0;t.words[s-10]=(o&n)<<4|a>>>22;a=o}a>>>=22;t.words[s-10]=a;if(a===0&&t.length>10){t.length-=10}else{t.length-=9}};w.prototype.imulK=function e(t){t.words[t.length]=0;t.words[t.length+1]=0;t.length+=2;var r=0;for(var n=0;n<t.length;n++){var i=t.words[n]|0;r+=i*977;t.words[n]=r&67108863;r=i*64+(r/67108864|0)}if(t.words[t.length-1]===0){t.length--;if(t.words[t.length-1]===0){t.length--}}return t};function E(){A.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n(E,A);function v(){A.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n(v,A);function _(){A.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n(_,A);_.prototype.imulK=function e(t){var r=0;for(var n=0;n<t.length;n++){var i=(t.words[n]|0)*19+r;var s=i&67108863;i>>>=26;t.words[n]=s;r=i}if(r!==0){t.words[t.length++]=r}return t};i._prime=function e(t){if(b[t])return b[t];var e;if(t==="k256"){e=new w}else if(t==="p224"){e=new E}else if(t==="p192"){e=new v}else if(t==="p25519"){e=new _}else{throw new Error("Unknown prime "+t)}b[t]=e;return e};function S(e){if(typeof e==="string"){var t=i._prime(e);this.m=t.p;this.prime=t}else{r(e.gtn(1),"modulus must be greater than 1");this.m=e;this.prime=null}}S.prototype._verify1=function e(t){r(t.negative===0,"red works only with positives");r(t.red,"red works only with red numbers")};S.prototype._verify2=function e(t,n){r((t.negative|n.negative)===0,"red works only with positives");r(t.red&&t.red===n.red,"red works only with red numbers")};S.prototype.imod=function e(t){if(this.prime)return this.prime.ireduce(t)._forceRed(this);return t.umod(this.m)._forceRed(this)};S.prototype.neg=function e(t){if(t.isZero()){return t.clone()}return this.m.sub(t)._forceRed(this)};S.prototype.add=function e(t,r){this._verify2(t,r);var n=t.add(r);if(n.cmp(this.m)>=0){n.isub(this.m)}return n._forceRed(this)};S.prototype.iadd=function e(t,r){this._verify2(t,r);var n=t.iadd(r);if(n.cmp(this.m)>=0){n.isub(this.m)}return n};S.prototype.sub=function e(t,r){this._verify2(t,r);var n=t.sub(r);if(n.cmpn(0)<0){n.iadd(this.m)}return n._forceRed(this)};S.prototype.isub=function e(t,r){this._verify2(t,r);var n=t.isub(r);if(n.cmpn(0)<0){n.iadd(this.m)}return n};S.prototype.shl=function e(t,r){this._verify1(t);return this.imod(t.ushln(r))};S.prototype.imul=function e(t,r){this._verify2(t,r);return this.imod(t.imul(r))};S.prototype.mul=function e(t,r){this._verify2(t,r);return this.imod(t.mul(r))};S.prototype.isqr=function e(t){return this.imul(t,t.clone())};S.prototype.sqr=function e(t){return this.mul(t,t)};S.prototype.sqrt=function e(t){if(t.isZero())return t.clone();var n=this.m.andln(3);r(n%2===1);if(n===3){var s=this.m.add(new i(1)).iushrn(2);return this.pow(t,s)}var a=this.m.subn(1);var o=0;while(!a.isZero()&&a.andln(1)===0){o++;a.iushrn(1)}r(!a.isZero());var f=new i(1).toRed(this);var c=f.redNeg();var u=this.m.subn(1).iushrn(1);var l=this.m.bitLength();l=new i(2*l*l).toRed(this);while(this.pow(l,u).cmp(c)!==0){l.redIAdd(c)}var h=this.pow(l,a);var d=this.pow(t,a.addn(1).iushrn(1));var p=this.pow(t,a);var y=o;while(p.cmp(f)!==0){var m=p;for(var g=0;m.cmp(f)!==0;g++){m=m.redSqr()}r(g<y);var b=this.pow(h,new i(1).iushln(y-g-1));d=d.redMul(b);h=b.redSqr();p=p.redMul(h);y=g}return d};S.prototype.invm=function e(t){var r=t._invmp(this.m);if(r.negative!==0){r.negative=0;return this.imod(r).redNeg()}else{return this.imod(r)}};S.prototype.pow=function e(t,r){if(r.isZero())return new i(1).toRed(this);if(r.cmpn(1)===0)return t.clone();var n=4;var s=new Array(1<<n);s[0]=new i(1).toRed(this);s[1]=t;for(var a=2;a<s.length;a++){s[a]=this.mul(s[a-1],t)}var o=s[0];var f=0;var c=0;var u=r.bitLength()%26;if(u===0){u=26}for(a=r.length-1;a>=0;a--){var l=r.words[a];for(var h=u-1;h>=0;h--){var d=l>>h&1;if(o!==s[0]){o=this.sqr(o)}if(d===0&&f===0){c=0;continue}f<<=1;f|=d;c++;if(c!==n&&(a!==0||h!==0))continue;o=this.mul(o,s[f]);c=0;f=0}u=26}return o};S.prototype.convertTo=function e(t){var r=t.umod(this.m);return r===t?r.clone():r};S.prototype.convertFrom=function e(t){var r=t.clone();r.red=null;return r};i.mont=function e(t){return new $(t)};function $(e){S.call(this,e);this.shift=this.m.bitLength();if(this.shift%26!==0){this.shift+=26-this.shift%26}this.r=new i(1).iushln(this.shift);this.r2=this.imod(this.r.sqr());this.rinv=this.r._invmp(this.m);this.minv=this.rinv.mul(this.r).isubn(1).div(this.m);this.minv=this.minv.umod(this.r);this.minv=this.r.sub(this.minv)}n($,S);$.prototype.convertTo=function e(t){return this.imod(t.ushln(this.shift))};$.prototype.convertFrom=function e(t){var r=this.imod(t.mul(this.rinv));r.red=null;return r};$.prototype.imul=function e(t,r){if(t.isZero()||r.isZero()){t.words[0]=0;t.length=1;return t}var n=t.imul(r);var i=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);var s=n.isub(i).iushrn(this.shift);var a=s;if(s.cmp(this.m)>=0){a=s.isub(this.m)}else if(s.cmpn(0)<0){a=s.iadd(this.m)}return a._forceRed(this)};$.prototype.mul=function e(t,r){if(t.isZero()||r.isZero())return new i(0)._forceRed(this);var n=t.mul(r);var s=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);var a=n.isub(s).iushrn(this.shift);var o=a;if(a.cmp(this.m)>=0){o=a.isub(this.m)}else if(a.cmpn(0)<0){o=a.iadd(this.m)}return o._forceRed(this)};$.prototype.invm=function e(t){var r=this.imod(t._invmp(this.m).mul(this.r2));return r._forceRed(this)}})(e,commonjsGlobal)})(bn);var minimalisticAssert=assert$j;function assert$j(e,t){if(!e)throw new Error(t||"Assertion failed")}assert$j.equal=function e(t,r,n){if(t!=r)throw new Error(n||"Assertion failed: "+t+" != "+r)};var utils$q={};(function(e){var t=e;function r(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if(typeof e!=="string"){for(var n=0;n<e.length;n++)r[n]=e[n]|0;return r}if(t==="hex"){e=e.replace(/[^a-z0-9]+/gi,"");if(e.length%2!==0)e="0"+e;for(var n=0;n<e.length;n+=2)r.push(parseInt(e[n]+e[n+1],16))}else{for(var n=0;n<e.length;n++){var i=e.charCodeAt(n);var s=i>>8;var a=i&255;if(s)r.push(s,a);else r.push(a)}}return r}t.toArray=r;function n(e){if(e.length===1)return"0"+e;else return e}t.zero2=n;function i(e){var t="";for(var r=0;r<e.length;r++)t+=n(e[r].toString(16));return t}t.toHex=i;t.encode=function e(t,r){if(r==="hex")return i(t);else return t}})(utils$q);(function(e){var t=e;var r=bn.exports;var n=minimalisticAssert;var i=utils$q;t.assert=n;t.toArray=i.toArray;t.zero2=i.zero2;t.toHex=i.toHex;t.encode=i.encode;function s(e,t){var r=[];var n=1<<t+1;var i=e.clone();while(i.cmpn(1)>=0){var s;if(i.isOdd()){var a=i.andln(n-1);if(a>(n>>1)-1)s=(n>>1)-a;else s=a;i.isubn(s)}else{s=0}r.push(s);var o=i.cmpn(0)!==0&&i.andln(n-1)===0?t+1:1;for(var f=1;f<o;f++)r.push(0);i.iushrn(o)}return r}t.getNAF=s;function a(e,t){var r=[[],[]];e=e.clone();t=t.clone();var n=0;var i=0;while(e.cmpn(-n)>0||t.cmpn(-i)>0){var s=e.andln(3)+n&3;var a=t.andln(3)+i&3;if(s===3)s=-1;if(a===3)a=-1;var o;if((s&1)===0){o=0}else{var f=e.andln(7)+n&7;if((f===3||f===5)&&a===2)o=-s;else o=s}r[0].push(o);var c;if((a&1)===0){c=0}else{var f=t.andln(7)+i&7;if((f===3||f===5)&&s===2)c=-a;else c=a}r[1].push(c);if(2*n===o+1)n=1-n;if(2*i===c+1)i=1-i;e.iushrn(1);t.iushrn(1)}return r}t.getJSF=a;function o(e,t,r){var n="_"+t;e.prototype[t]=function e(){return this[n]!==undefined?this[n]:this[n]=r.call(this)}}t.cachedProperty=o;function f(e){return typeof e==="string"?t.toArray(e,"hex"):e}t.parseBytes=f;function c(e){return new r(e,"hex","le")}t.intFromLE=c})(utils$r);var brorand={exports:{}};var r$1;brorand.exports=function e(t){if(!r$1)r$1=new Rand(null);return r$1.generate(t)};function Rand(e){this.rand=e}brorand.exports.Rand=Rand;Rand.prototype.generate=function e(t){return this._rand(t)};Rand.prototype._rand=function e(t){if(this.rand.getBytes)return this.rand.getBytes(t);var r=new Uint8Array(t);for(var n=0;n<r.length;n++)r[n]=this.rand.getByte();return r};if(typeof self==="object"){if(self.crypto&&self.crypto.getRandomValues){Rand.prototype._rand=function e(t){var r=new Uint8Array(t);self.crypto.getRandomValues(r);return r}}else if(self.msCrypto&&self.msCrypto.getRandomValues){Rand.prototype._rand=function e(t){var r=new Uint8Array(t);self.msCrypto.getRandomValues(r);return r}}else if(typeof window==="object"){Rand.prototype._rand=function(){throw new Error("Not implemented yet")}}}else{try{var crypto$5=require("crypto");if(typeof crypto$5.randomBytes!=="function")throw new Error("Not supported");Rand.prototype._rand=function e(t){return crypto$5.randomBytes(t)}}catch(e){}}var curve={};var BN$7=bn.exports;var utils$p=utils$r;var getNAF=utils$p.getNAF;var getJSF=utils$p.getJSF;var assert$i=utils$p.assert;function BaseCurve(e,t){this.type=e;this.p=new BN$7(t.p,16);this.red=t.prime?BN$7.red(t.prime):BN$7.mont(this.p);this.zero=new BN$7(0).toRed(this.red);this.one=new BN$7(1).toRed(this.red);this.two=new BN$7(2).toRed(this.red);this.n=t.n&&new BN$7(t.n,16);this.g=t.g&&this.pointFromJSON(t.g,t.gRed);this._wnafT1=new Array(4);this._wnafT2=new Array(4);this._wnafT3=new Array(4);this._wnafT4=new Array(4);var r=this.n&&this.p.div(this.n);if(!r||r.cmpn(100)>0){this.redN=null}else{this._maxwellTrick=true;this.redN=this.n.toRed(this.red)}}var base$e=BaseCurve;BaseCurve.prototype.point=function e(){throw new Error("Not implemented")};BaseCurve.prototype.validate=function e(){throw new Error("Not implemented")};BaseCurve.prototype._fixedNafMul=function e(t,r){assert$i(t.precomputed);var n=t._getDoubles();var i=getNAF(r,1);var s=(1<<n.step+1)-(n.step%2===0?2:1);s/=3;var a=[];for(var o=0;o<i.length;o+=n.step){var f=0;for(var r=o+n.step-1;r>=o;r--)f=(f<<1)+i[r];a.push(f)}var c=this.jpoint(null,null,null);var u=this.jpoint(null,null,null);for(var l=s;l>0;l--){for(var o=0;o<a.length;o++){var f=a[o];if(f===l)u=u.mixedAdd(n.points[o]);else if(f===-l)u=u.mixedAdd(n.points[o].neg())}c=c.add(u)}return c.toP()};BaseCurve.prototype._wnafMul=function e(t,r){var n=4;var i=t._getNAFPoints(n);n=i.wnd;var s=i.points;var a=getNAF(r,n);var o=this.jpoint(null,null,null);for(var f=a.length-1;f>=0;f--){for(var r=0;f>=0&&a[f]===0;f--)r++;if(f>=0)r++;o=o.dblp(r);if(f<0)break;var c=a[f];assert$i(c!==0);if(t.type==="affine"){if(c>0)o=o.mixedAdd(s[c-1>>1]);else o=o.mixedAdd(s[-c-1>>1].neg())}else{if(c>0)o=o.add(s[c-1>>1]);else o=o.add(s[-c-1>>1].neg())}}return t.type==="affine"?o.toP():o};BaseCurve.prototype._wnafMulAdd=function e(t,r,n,i,s){var a=this._wnafT1;var o=this._wnafT2;var f=this._wnafT3;var c=0;for(var u=0;u<i;u++){var l=r[u];var h=l._getNAFPoints(t);a[u]=h.wnd;o[u]=h.points}for(var u=i-1;u>=1;u-=2){var d=u-1;var p=u;if(a[d]!==1||a[p]!==1){f[d]=getNAF(n[d],a[d]);f[p]=getNAF(n[p],a[p]);c=Math.max(f[d].length,c);c=Math.max(f[p].length,c);continue}var y=[r[d],null,null,r[p]];if(r[d].y.cmp(r[p].y)===0){y[1]=r[d].add(r[p]);y[2]=r[d].toJ().mixedAdd(r[p].neg())}else if(r[d].y.cmp(r[p].y.redNeg())===0){y[1]=r[d].toJ().mixedAdd(r[p]);y[2]=r[d].add(r[p].neg())}else{y[1]=r[d].toJ().mixedAdd(r[p]);y[2]=r[d].toJ().mixedAdd(r[p].neg())}var m=[-3,-1,-5,-7,0,7,5,1,3];var g=getJSF(n[d],n[p]);c=Math.max(g[0].length,c);f[d]=new Array(c);f[p]=new Array(c);for(var b=0;b<c;b++){var A=g[0][b]|0;var w=g[1][b]|0;f[d][b]=m[(A+1)*3+(w+1)];f[p][b]=0;o[d]=y}}var E=this.jpoint(null,null,null);var v=this._wnafT4;for(var u=c;u>=0;u--){var _=0;while(u>=0){var S=true;for(var b=0;b<i;b++){v[b]=f[b][u]|0;if(v[b]!==0)S=false}if(!S)break;_++;u--}if(u>=0)_++;E=E.dblp(_);if(u<0)break;for(var b=0;b<i;b++){var $=v[b];var l;if($===0)continue;else if($>0)l=o[b][$-1>>1];else if($<0)l=o[b][-$-1>>1].neg();if(l.type==="affine")E=E.mixedAdd(l);else E=E.add(l)}}for(var u=0;u<i;u++)o[u]=null;if(s)return E;else return E.toP()};function BasePoint(e,t){this.curve=e;this.type=t;this.precomputed=null}BaseCurve.BasePoint=BasePoint;BasePoint.prototype.eq=function e(){throw new Error("Not implemented")};BasePoint.prototype.validate=function e(){return this.curve.validate(this)};BaseCurve.prototype.decodePoint=function e(t,r){t=utils$p.toArray(t,r);var n=this.p.byteLength();if((t[0]===4||t[0]===6||t[0]===7)&&t.length-1===2*n){if(t[0]===6)assert$i(t[t.length-1]%2===0);else if(t[0]===7)assert$i(t[t.length-1]%2===1);var i=this.point(t.slice(1,1+n),t.slice(1+n,1+2*n));return i}else if((t[0]===2||t[0]===3)&&t.length-1===n){return this.pointFromX(t.slice(1,1+n),t[0]===3)}throw new Error("Unknown point format")};BasePoint.prototype.encodeCompressed=function e(t){return this.encode(t,true)};BasePoint.prototype._encode=function e(t){var r=this.curve.p.byteLength();var n=this.getX().toArray("be",r);if(t)return[this.getY().isEven()?2:3].concat(n);return[4].concat(n,this.getY().toArray("be",r))};BasePoint.prototype.encode=function e(t,r){return utils$p.encode(this._encode(r),t)};BasePoint.prototype.precompute=function e(t){if(this.precomputed)return this;var r={doubles:null,naf:null,beta:null};r.naf=this._getNAFPoints(8);r.doubles=this._getDoubles(4,t);r.beta=this._getBeta();this.precomputed=r;return this};BasePoint.prototype._hasDoubles=function e(t){if(!this.precomputed)return false;var r=this.precomputed.doubles;if(!r)return false;return r.points.length>=Math.ceil((t.bitLength()+1)/r.step)};BasePoint.prototype._getDoubles=function e(t,r){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;var n=[this];var i=this;for(var s=0;s<r;s+=t){for(var a=0;a<t;a++)i=i.dbl();n.push(i)}return{step:t,points:n}};BasePoint.prototype._getNAFPoints=function e(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;var r=[this];var n=(1<<t)-1;var i=n===1?null:this.dbl();for(var s=1;s<n;s++)r[s]=r[s-1].add(i);return{wnd:t,points:r}};BasePoint.prototype._getBeta=function e(){return null};BasePoint.prototype.dblp=function e(t){var r=this;for(var n=0;n<t;n++)r=r.dbl();return r};var inherits_browser={exports:{}};if(typeof Object.create==="function"){inherits_browser.exports=function e(t,r){if(r){t.super_=r;t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}})}}}else{inherits_browser.exports=function e(t,r){if(r){t.super_=r;var n=function(){};n.prototype=r.prototype;t.prototype=new n;t.prototype.constructor=t}}}var utils$o=utils$r;var BN$6=bn.exports;var inherits$6=inherits_browser.exports;var Base$5=base$e;var assert$h=utils$o.assert;function ShortCurve(e){Base$5.call(this,"short",e);this.a=new BN$6(e.a,16).toRed(this.red);this.b=new BN$6(e.b,16).toRed(this.red);this.tinv=this.two.redInvm();this.zeroA=this.a.fromRed().cmpn(0)===0;this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0;this.endo=this._getEndomorphism(e);this._endoWnafT1=new Array(4);this._endoWnafT2=new Array(4)}inherits$6(ShortCurve,Base$5);var short=ShortCurve;ShortCurve.prototype._getEndomorphism=function e(t){if(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)return;var r;var n;if(t.beta){r=new BN$6(t.beta,16).toRed(this.red)}else{var i=this._getEndoRoots(this.p);r=i[0].cmp(i[1])<0?i[0]:i[1];r=r.toRed(this.red)}if(t.lambda){n=new BN$6(t.lambda,16)}else{var s=this._getEndoRoots(this.n);if(this.g.mul(s[0]).x.cmp(this.g.x.redMul(r))===0){n=s[0]}else{n=s[1];assert$h(this.g.mul(n).x.cmp(this.g.x.redMul(r))===0)}}var a;if(t.basis){a=t.basis.map((function(e){return{a:new BN$6(e.a,16),b:new BN$6(e.b,16)}}))}else{a=this._getEndoBasis(n)}return{beta:r,lambda:n,basis:a}};ShortCurve.prototype._getEndoRoots=function e(t){var r=t===this.p?this.red:BN$6.mont(t);var n=new BN$6(2).toRed(r).redInvm();var i=n.redNeg();var s=new BN$6(3).toRed(r).redNeg().redSqrt().redMul(n);var a=i.redAdd(s).fromRed();var o=i.redSub(s).fromRed();return[a,o]};ShortCurve.prototype._getEndoBasis=function e(t){var r=this.n.ushrn(Math.floor(this.n.bitLength()/2));var n=t;var i=this.n.clone();var s=new BN$6(1);var a=new BN$6(0);var o=new BN$6(0);var f=new BN$6(1);var c;var u;var l;var h;var d;var p;var y;var m=0;var g;var b;while(n.cmpn(0)!==0){var A=i.div(n);g=i.sub(A.mul(n));b=o.sub(A.mul(s));var w=f.sub(A.mul(a));if(!l&&g.cmp(r)<0){c=y.neg();u=s;l=g.neg();h=b}else if(l&&++m===2){break}y=g;i=n;n=g;o=s;s=b;f=a;a=w}d=g.neg();p=b;var E=l.sqr().add(h.sqr());var v=d.sqr().add(p.sqr());if(v.cmp(E)>=0){d=c;p=u}if(l.negative){l=l.neg();h=h.neg()}if(d.negative){d=d.neg();p=p.neg()}return[{a:l,b:h},{a:d,b:p}]};ShortCurve.prototype._endoSplit=function e(t){var r=this.endo.basis;var n=r[0];var i=r[1];var s=i.b.mul(t).divRound(this.n);var a=n.b.neg().mul(t).divRound(this.n);var o=s.mul(n.a);var f=a.mul(i.a);var c=s.mul(n.b);var u=a.mul(i.b);var l=t.sub(o).sub(f);var h=c.add(u).neg();return{k1:l,k2:h}};ShortCurve.prototype.pointFromX=function e(t,r){t=new BN$6(t,16);if(!t.red)t=t.toRed(this.red);var n=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b);var i=n.redSqrt();if(i.redSqr().redSub(n).cmp(this.zero)!==0)throw new Error("invalid point");var s=i.fromRed().isOdd();if(r&&!s||!r&&s)i=i.redNeg();return this.point(t,i)};ShortCurve.prototype.validate=function e(t){if(t.inf)return true;var r=t.x;var n=t.y;var i=this.a.redMul(r);var s=r.redSqr().redMul(r).redIAdd(i).redIAdd(this.b);return n.redSqr().redISub(s).cmpn(0)===0};ShortCurve.prototype._endoWnafMulAdd=function e(t,r,n){var i=this._endoWnafT1;var s=this._endoWnafT2;for(var a=0;a<t.length;a++){var o=this._endoSplit(r[a]);var f=t[a];var c=f._getBeta();if(o.k1.negative){o.k1.ineg();f=f.neg(true)}if(o.k2.negative){o.k2.ineg();c=c.neg(true)}i[a*2]=f;i[a*2+1]=c;s[a*2]=o.k1;s[a*2+1]=o.k2}var u=this._wnafMulAdd(1,i,s,a*2,n);for(var l=0;l<a*2;l++){i[l]=null;s[l]=null}return u};function Point$2(e,t,r,n){Base$5.BasePoint.call(this,e,"affine");if(t===null&&r===null){this.x=null;this.y=null;this.inf=true}else{this.x=new BN$6(t,16);this.y=new BN$6(r,16);if(n){this.x.forceRed(this.curve.red);this.y.forceRed(this.curve.red)}if(!this.x.red)this.x=this.x.toRed(this.curve.red);if(!this.y.red)this.y=this.y.toRed(this.curve.red);this.inf=false}}inherits$6(Point$2,Base$5.BasePoint);ShortCurve.prototype.point=function e(t,r,n){return new Point$2(this,t,r,n)};ShortCurve.prototype.pointFromJSON=function e(t,r){return Point$2.fromJSON(this,t,r)};Point$2.prototype._getBeta=function e(){if(!this.curve.endo)return;var t=this.precomputed;if(t&&t.beta)return t.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){var n=this.curve;var i=function(e){return n.point(e.x.redMul(n.endo.beta),e.y)};t.beta=r;r.precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(i)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(i)}}}return r};Point$2.prototype.toJSON=function e(){if(!this.precomputed)return[this.x,this.y];return[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]};Point$2.fromJSON=function e(t,r,n){if(typeof r==="string")r=JSON.parse(r);var i=t.point(r[0],r[1],n);if(!r[2])return i;function s(e){return t.point(e[0],e[1],n)}var a=r[2];i.precomputed={beta:null,doubles:a.doubles&&{step:a.doubles.step,points:[i].concat(a.doubles.points.map(s))},naf:a.naf&&{wnd:a.naf.wnd,points:[i].concat(a.naf.points.map(s))}};return i};Point$2.prototype.inspect=function e(){if(this.isInfinity())return"<EC Point Infinity>";return"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};Point$2.prototype.isInfinity=function e(){return this.inf};Point$2.prototype.add=function e(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t))return this.curve.point(null,null);if(this.x.cmp(t.x)===0)return this.curve.point(null,null);var r=this.y.redSub(t.y);if(r.cmpn(0)!==0)r=r.redMul(this.x.redSub(t.x).redInvm());var n=r.redSqr().redISub(this.x).redISub(t.x);var i=r.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,i)};Point$2.prototype.dbl=function e(){if(this.inf)return this;var t=this.y.redAdd(this.y);if(t.cmpn(0)===0)return this.curve.point(null,null);var r=this.curve.a;var n=this.x.redSqr();var i=t.redInvm();var s=n.redAdd(n).redIAdd(n).redIAdd(r).redMul(i);var a=s.redSqr().redISub(this.x.redAdd(this.x));var o=s.redMul(this.x.redSub(a)).redISub(this.y);return this.curve.point(a,o)};Point$2.prototype.getX=function e(){return this.x.fromRed()};Point$2.prototype.getY=function e(){return this.y.fromRed()};Point$2.prototype.mul=function e(t){t=new BN$6(t,16);if(this._hasDoubles(t))return this.curve._fixedNafMul(this,t);else if(this.curve.endo)return this.curve._endoWnafMulAdd([this],[t]);else return this.curve._wnafMul(this,t)};Point$2.prototype.mulAdd=function e(t,r,n){var i=[this,r];var s=[t,n];if(this.curve.endo)return this.curve._endoWnafMulAdd(i,s);else return this.curve._wnafMulAdd(1,i,s,2)};Point$2.prototype.jmulAdd=function e(t,r,n){var i=[this,r];var s=[t,n];if(this.curve.endo)return this.curve._endoWnafMulAdd(i,s,true);else return this.curve._wnafMulAdd(1,i,s,2,true)};Point$2.prototype.eq=function e(t){return this===t||this.inf===t.inf&&(this.inf||this.x.cmp(t.x)===0&&this.y.cmp(t.y)===0)};Point$2.prototype.neg=function e(t){if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){var n=this.precomputed;var i=function(e){return e.neg()};r.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(i)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(i)}}}return r};Point$2.prototype.toJ=function e(){if(this.inf)return this.curve.jpoint(null,null,null);var t=this.curve.jpoint(this.x,this.y,this.curve.one);return t};function JPoint(e,t,r,n){Base$5.BasePoint.call(this,e,"jacobian");if(t===null&&r===null&&n===null){this.x=this.curve.one;this.y=this.curve.one;this.z=new BN$6(0)}else{this.x=new BN$6(t,16);this.y=new BN$6(r,16);this.z=new BN$6(n,16)}if(!this.x.red)this.x=this.x.toRed(this.curve.red);if(!this.y.red)this.y=this.y.toRed(this.curve.red);if(!this.z.red)this.z=this.z.toRed(this.curve.red);this.zOne=this.z===this.curve.one}inherits$6(JPoint,Base$5.BasePoint);ShortCurve.prototype.jpoint=function e(t,r,n){return new JPoint(this,t,r,n)};JPoint.prototype.toP=function e(){if(this.isInfinity())return this.curve.point(null,null);var t=this.z.redInvm();var r=t.redSqr();var n=this.x.redMul(r);var i=this.y.redMul(r).redMul(t);return this.curve.point(n,i)};JPoint.prototype.neg=function e(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};JPoint.prototype.add=function e(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var r=t.z.redSqr();var n=this.z.redSqr();var i=this.x.redMul(r);var s=t.x.redMul(n);var a=this.y.redMul(r.redMul(t.z));var o=t.y.redMul(n.redMul(this.z));var f=i.redSub(s);var c=a.redSub(o);if(f.cmpn(0)===0){if(c.cmpn(0)!==0)return this.curve.jpoint(null,null,null);else return this.dbl()}var u=f.redSqr();var l=u.redMul(f);var h=i.redMul(u);var d=c.redSqr().redIAdd(l).redISub(h).redISub(h);var p=c.redMul(h.redISub(d)).redISub(a.redMul(l));var y=this.z.redMul(t.z).redMul(f);return this.curve.jpoint(d,p,y)};JPoint.prototype.mixedAdd=function e(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;var r=this.z.redSqr();var n=this.x;var i=t.x.redMul(r);var s=this.y;var a=t.y.redMul(r).redMul(this.z);var o=n.redSub(i);var f=s.redSub(a);if(o.cmpn(0)===0){if(f.cmpn(0)!==0)return this.curve.jpoint(null,null,null);else return this.dbl()}var c=o.redSqr();var u=c.redMul(o);var l=n.redMul(c);var h=f.redSqr().redIAdd(u).redISub(l).redISub(l);var d=f.redMul(l.redISub(h)).redISub(s.redMul(u));var p=this.z.redMul(o);return this.curve.jpoint(h,d,p)};JPoint.prototype.dblp=function e(t){if(t===0)return this;if(this.isInfinity())return this;if(!t)return this.dbl();if(this.curve.zeroA||this.curve.threeA){var r=this;for(var n=0;n<t;n++)r=r.dbl();return r}var i=this.curve.a;var s=this.curve.tinv;var a=this.x;var o=this.y;var f=this.z;var c=f.redSqr().redSqr();var u=o.redAdd(o);for(var n=0;n<t;n++){var l=a.redSqr();var h=u.redSqr();var d=h.redSqr();var p=l.redAdd(l).redIAdd(l).redIAdd(i.redMul(c));var y=a.redMul(h);var m=p.redSqr().redISub(y.redAdd(y));var g=y.redISub(m);var b=p.redMul(g);b=b.redIAdd(b).redISub(d);var A=u.redMul(f);if(n+1<t)c=c.redMul(d);a=m;f=A;u=b}return this.curve.jpoint(a,u.redMul(s),f)};JPoint.prototype.dbl=function e(){if(this.isInfinity())return this;if(this.curve.zeroA)return this._zeroDbl();else if(this.curve.threeA)return this._threeDbl();else return this._dbl()};JPoint.prototype._zeroDbl=function e(){var t;var r;var n;if(this.zOne){var i=this.x.redSqr();var s=this.y.redSqr();var a=s.redSqr();var o=this.x.redAdd(s).redSqr().redISub(i).redISub(a);o=o.redIAdd(o);var f=i.redAdd(i).redIAdd(i);var c=f.redSqr().redISub(o).redISub(o);var u=a.redIAdd(a);u=u.redIAdd(u);u=u.redIAdd(u);t=c;r=f.redMul(o.redISub(c)).redISub(u);n=this.y.redAdd(this.y)}else{var l=this.x.redSqr();var h=this.y.redSqr();var d=h.redSqr();var p=this.x.redAdd(h).redSqr().redISub(l).redISub(d);p=p.redIAdd(p);var y=l.redAdd(l).redIAdd(l);var m=y.redSqr();var g=d.redIAdd(d);g=g.redIAdd(g);g=g.redIAdd(g);t=m.redISub(p).redISub(p);r=y.redMul(p.redISub(t)).redISub(g);n=this.y.redMul(this.z);n=n.redIAdd(n)}return this.curve.jpoint(t,r,n)};JPoint.prototype._threeDbl=function e(){var t;var r;var n;if(this.zOne){var i=this.x.redSqr();var s=this.y.redSqr();var a=s.redSqr();var o=this.x.redAdd(s).redSqr().redISub(i).redISub(a);o=o.redIAdd(o);var f=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a);var c=f.redSqr().redISub(o).redISub(o);t=c;var u=a.redIAdd(a);u=u.redIAdd(u);u=u.redIAdd(u);r=f.redMul(o.redISub(c)).redISub(u);n=this.y.redAdd(this.y)}else{var l=this.z.redSqr();var h=this.y.redSqr();var d=this.x.redMul(h);var p=this.x.redSub(l).redMul(this.x.redAdd(l));p=p.redAdd(p).redIAdd(p);var y=d.redIAdd(d);y=y.redIAdd(y);var m=y.redAdd(y);t=p.redSqr().redISub(m);n=this.y.redAdd(this.z).redSqr().redISub(h).redISub(l);var g=h.redSqr();g=g.redIAdd(g);g=g.redIAdd(g);g=g.redIAdd(g);r=p.redMul(y.redISub(t)).redISub(g)}return this.curve.jpoint(t,r,n)};JPoint.prototype._dbl=function e(){var t=this.curve.a;var r=this.x;var n=this.y;var i=this.z;var s=i.redSqr().redSqr();var a=r.redSqr();var o=n.redSqr();var f=a.redAdd(a).redIAdd(a).redIAdd(t.redMul(s));var c=r.redAdd(r);c=c.redIAdd(c);var u=c.redMul(o);var l=f.redSqr().redISub(u.redAdd(u));var h=u.redISub(l);var d=o.redSqr();d=d.redIAdd(d);d=d.redIAdd(d);d=d.redIAdd(d);var p=f.redMul(h).redISub(d);var y=n.redAdd(n).redMul(i);return this.curve.jpoint(l,p,y)};JPoint.prototype.trpl=function e(){if(!this.curve.zeroA)return this.dbl().add(this);var t=this.x.redSqr();var r=this.y.redSqr();var n=this.z.redSqr();var i=r.redSqr();var s=t.redAdd(t).redIAdd(t);var a=s.redSqr();var o=this.x.redAdd(r).redSqr().redISub(t).redISub(i);o=o.redIAdd(o);o=o.redAdd(o).redIAdd(o);o=o.redISub(a);var f=o.redSqr();var c=i.redIAdd(i);c=c.redIAdd(c);c=c.redIAdd(c);c=c.redIAdd(c);var u=s.redIAdd(o).redSqr().redISub(a).redISub(f).redISub(c);var l=r.redMul(u);l=l.redIAdd(l);l=l.redIAdd(l);var h=this.x.redMul(f).redISub(l);h=h.redIAdd(h);h=h.redIAdd(h);var d=this.y.redMul(u.redMul(c.redISub(u)).redISub(o.redMul(f)));d=d.redIAdd(d);d=d.redIAdd(d);d=d.redIAdd(d);var p=this.z.redAdd(o).redSqr().redISub(n).redISub(f);return this.curve.jpoint(h,d,p)};JPoint.prototype.mul=function e(t,r){t=new BN$6(t,r);return this.curve._wnafMul(this,t)};JPoint.prototype.eq=function e(t){if(t.type==="affine")return this.eq(t.toJ());if(this===t)return true;var r=this.z.redSqr();var n=t.z.redSqr();if(this.x.redMul(n).redISub(t.x.redMul(r)).cmpn(0)!==0)return false;var i=r.redMul(this.z);var s=n.redMul(t.z);return this.y.redMul(s).redISub(t.y.redMul(i)).cmpn(0)===0};JPoint.prototype.eqXToP=function e(t){var r=this.z.redSqr();var n=t.toRed(this.curve.red).redMul(r);if(this.x.cmp(n)===0)return true;var i=t.clone();var s=this.curve.redN.redMul(r);for(;;){i.iadd(this.curve.n);if(i.cmp(this.curve.p)>=0)return false;n.redIAdd(s);if(this.x.cmp(n)===0)return true}};JPoint.prototype.inspect=function e(){if(this.isInfinity())return"<EC JPoint Infinity>";return"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};JPoint.prototype.isInfinity=function e(){return this.z.cmpn(0)===0};var BN$5=bn.exports;var inherits$5=inherits_browser.exports;var Base$4=base$e;var utils$n=utils$r;function MontCurve(e){Base$4.call(this,"mont",e);this.a=new BN$5(e.a,16).toRed(this.red);this.b=new BN$5(e.b,16).toRed(this.red);this.i4=new BN$5(4).toRed(this.red).redInvm();this.two=new BN$5(2).toRed(this.red);this.a24=this.i4.redMul(this.a.redAdd(this.two))}inherits$5(MontCurve,Base$4);var mont=MontCurve;MontCurve.prototype.validate=function e(t){var r=t.normalize().x;var n=r.redSqr();var i=n.redMul(r).redAdd(n.redMul(this.a)).redAdd(r);var s=i.redSqrt();return s.redSqr().cmp(i)===0};function Point$1(e,t,r){Base$4.BasePoint.call(this,e,"projective");if(t===null&&r===null){this.x=this.curve.one;this.z=this.curve.zero}else{this.x=new BN$5(t,16);this.z=new BN$5(r,16);if(!this.x.red)this.x=this.x.toRed(this.curve.red);if(!this.z.red)this.z=this.z.toRed(this.curve.red)}}inherits$5(Point$1,Base$4.BasePoint);MontCurve.prototype.decodePoint=function e(t,r){var t=utils$n.toArray(t,r);if(t.length===33&&t[0]===64)t=t.slice(1,33).reverse();if(t.length!==32)throw new Error("Unknown point compression format");return this.point(t,1)};MontCurve.prototype.point=function e(t,r){return new Point$1(this,t,r)};MontCurve.prototype.pointFromJSON=function e(t){return Point$1.fromJSON(this,t)};Point$1.prototype.precompute=function e(){};Point$1.prototype._encode=function e(t){var r=this.curve.p.byteLength();if(t){return[64].concat(this.getX().toArray("le",r))}else{return this.getX().toArray("be",r)}};Point$1.fromJSON=function e(t,r){return new Point$1(t,r[0],r[1]||t.one)};Point$1.prototype.inspect=function e(){if(this.isInfinity())return"<EC Point Infinity>";return"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};Point$1.prototype.isInfinity=function e(){return this.z.cmpn(0)===0};Point$1.prototype.dbl=function e(){var t=this.x.redAdd(this.z);var r=t.redSqr();var n=this.x.redSub(this.z);var i=n.redSqr();var s=r.redSub(i);var a=r.redMul(i);var o=s.redMul(i.redAdd(this.curve.a24.redMul(s)));return this.curve.point(a,o)};Point$1.prototype.add=function e(){throw new Error("Not supported on Montgomery curve")};Point$1.prototype.diffAdd=function e(t,r){var n=this.x.redAdd(this.z);var i=this.x.redSub(this.z);var s=t.x.redAdd(t.z);var a=t.x.redSub(t.z);var o=a.redMul(n);var f=s.redMul(i);var c=r.z.redMul(o.redAdd(f).redSqr());var u=r.x.redMul(o.redISub(f).redSqr());return this.curve.point(c,u)};Point$1.prototype.mul=function e(t){t=new BN$5(t,16);var r=t.clone();var n=this;var i=this.curve.point(null,null);var s=this;for(var a=[];r.cmpn(0)!==0;r.iushrn(1))a.push(r.andln(1));for(var o=a.length-1;o>=0;o--){if(a[o]===0){n=n.diffAdd(i,s);i=i.dbl()}else{i=n.diffAdd(i,s);n=n.dbl()}}return i};Point$1.prototype.mulAdd=function e(){throw new Error("Not supported on Montgomery curve")};Point$1.prototype.jumlAdd=function e(){throw new Error("Not supported on Montgomery curve")};Point$1.prototype.eq=function e(t){return this.getX().cmp(t.getX())===0};Point$1.prototype.normalize=function e(){this.x=this.x.redMul(this.z.redInvm());this.z=this.curve.one;return this};Point$1.prototype.getX=function e(){this.normalize();return this.x.fromRed()};var utils$m=utils$r;var BN$4=bn.exports;var inherits$4=inherits_browser.exports;var Base$3=base$e;var assert$g=utils$m.assert;function EdwardsCurve(e){this.twisted=(e.a|0)!==1;this.mOneA=this.twisted&&(e.a|0)===-1;this.extended=this.mOneA;Base$3.call(this,"edwards",e);this.a=new BN$4(e.a,16).umod(this.red.m);this.a=this.a.toRed(this.red);this.c=new BN$4(e.c,16).toRed(this.red);this.c2=this.c.redSqr();this.d=new BN$4(e.d,16).toRed(this.red);this.dd=this.d.redAdd(this.d);assert$g(!this.twisted||this.c.fromRed().cmpn(1)===0);this.oneC=(e.c|0)===1}inherits$4(EdwardsCurve,Base$3);var edwards=EdwardsCurve;EdwardsCurve.prototype._mulA=function e(t){if(this.mOneA)return t.redNeg();else return this.a.redMul(t)};EdwardsCurve.prototype._mulC=function e(t){if(this.oneC)return t;else return this.c.redMul(t)};EdwardsCurve.prototype.jpoint=function e(t,r,n,i){return this.point(t,r,n,i)};EdwardsCurve.prototype.pointFromX=function e(t,r){t=new BN$4(t,16);if(!t.red)t=t.toRed(this.red);var n=t.redSqr();var i=this.c2.redSub(this.a.redMul(n));var s=this.one.redSub(this.c2.redMul(this.d).redMul(n));var a=i.redMul(s.redInvm());var o=a.redSqrt();if(o.redSqr().redSub(a).cmp(this.zero)!==0)throw new Error("invalid point");var f=o.fromRed().isOdd();if(r&&!f||!r&&f)o=o.redNeg();return this.point(t,o)};EdwardsCurve.prototype.pointFromY=function e(t,r){t=new BN$4(t,16);if(!t.red)t=t.toRed(this.red);var n=t.redSqr();var i=n.redSub(this.c2);var s=n.redMul(this.d).redMul(this.c2).redSub(this.a);var a=i.redMul(s.redInvm());if(a.cmp(this.zero)===0){if(r)throw new Error("invalid point");else return this.point(this.zero,t)}var o=a.redSqrt();if(o.redSqr().redSub(a).cmp(this.zero)!==0)throw new Error("invalid point");if(o.fromRed().isOdd()!==r)o=o.redNeg();return this.point(o,t)};EdwardsCurve.prototype.validate=function e(t){if(t.isInfinity())return true;t.normalize();var r=t.x.redSqr();var n=t.y.redSqr();var i=r.redMul(this.a).redAdd(n);var s=this.c2.redMul(this.one.redAdd(this.d.redMul(r).redMul(n)));return i.cmp(s)===0};function Point(e,t,r,n,i){Base$3.BasePoint.call(this,e,"projective");if(t===null&&r===null&&n===null){this.x=this.curve.zero;this.y=this.curve.one;this.z=this.curve.one;this.t=this.curve.zero;this.zOne=true}else{this.x=new BN$4(t,16);this.y=new BN$4(r,16);this.z=n?new BN$4(n,16):this.curve.one;this.t=i&&new BN$4(i,16);if(!this.x.red)this.x=this.x.toRed(this.curve.red);if(!this.y.red)this.y=this.y.toRed(this.curve.red);if(!this.z.red)this.z=this.z.toRed(this.curve.red);if(this.t&&!this.t.red)this.t=this.t.toRed(this.curve.red);this.zOne=this.z===this.curve.one;if(this.curve.extended&&!this.t){this.t=this.x.redMul(this.y);if(!this.zOne)this.t=this.t.redMul(this.z.redInvm())}}}inherits$4(Point,Base$3.BasePoint);EdwardsCurve.prototype.pointFromJSON=function e(t){return Point.fromJSON(this,t)};EdwardsCurve.prototype.point=function e(t,r,n,i){return new Point(this,t,r,n,i)};Point.fromJSON=function e(t,r){return new Point(t,r[0],r[1],r[2])};Point.prototype.inspect=function e(){if(this.isInfinity())return"<EC Point Infinity>";return"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};Point.prototype.isInfinity=function e(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)};Point.prototype._extDbl=function e(){var t=this.x.redSqr();var r=this.y.redSqr();var n=this.z.redSqr();n=n.redIAdd(n);var i=this.curve._mulA(t);var s=this.x.redAdd(this.y).redSqr().redISub(t).redISub(r);var a=i.redAdd(r);var o=a.redSub(n);var f=i.redSub(r);var c=s.redMul(o);var u=a.redMul(f);var l=s.redMul(f);var h=o.redMul(a);return this.curve.point(c,u,h,l)};Point.prototype._projDbl=function e(){var t=this.x.redAdd(this.y).redSqr();var r=this.x.redSqr();var n=this.y.redSqr();var i;var s;var a;if(this.curve.twisted){var o=this.curve._mulA(r);var f=o.redAdd(n);if(this.zOne){i=t.redSub(r).redSub(n).redMul(f.redSub(this.curve.two));s=f.redMul(o.redSub(n));a=f.redSqr().redSub(f).redSub(f)}else{var c=this.z.redSqr();var u=f.redSub(c).redISub(c);i=t.redSub(r).redISub(n).redMul(u);s=f.redMul(o.redSub(n));a=f.redMul(u)}}else{var o=r.redAdd(n);var c=this.curve._mulC(this.z).redSqr();var u=o.redSub(c).redSub(c);i=this.curve._mulC(t.redISub(o)).redMul(u);s=this.curve._mulC(o).redMul(r.redISub(n));a=o.redMul(u)}return this.curve.point(i,s,a)};Point.prototype.dbl=function e(){if(this.isInfinity())return this;if(this.curve.extended)return this._extDbl();else return this._projDbl()};Point.prototype._extAdd=function e(t){var r=this.y.redSub(this.x).redMul(t.y.redSub(t.x));var n=this.y.redAdd(this.x).redMul(t.y.redAdd(t.x));var i=this.t.redMul(this.curve.dd).redMul(t.t);var s=this.z.redMul(t.z.redAdd(t.z));var a=n.redSub(r);var o=s.redSub(i);var f=s.redAdd(i);var c=n.redAdd(r);var u=a.redMul(o);var l=f.redMul(c);var h=a.redMul(c);var d=o.redMul(f);return this.curve.point(u,l,d,h)};Point.prototype._projAdd=function e(t){var r=this.z.redMul(t.z);var n=r.redSqr();var i=this.x.redMul(t.x);var s=this.y.redMul(t.y);var a=this.curve.d.redMul(i).redMul(s);var o=n.redSub(a);var f=n.redAdd(a);var c=this.x.redAdd(this.y).redMul(t.x.redAdd(t.y)).redISub(i).redISub(s);var u=r.redMul(o).redMul(c);var l;var h;if(this.curve.twisted){l=r.redMul(f).redMul(s.redSub(this.curve._mulA(i)));h=o.redMul(f)}else{l=r.redMul(f).redMul(s.redSub(i));h=this.curve._mulC(o).redMul(f)}return this.curve.point(u,l,h)};Point.prototype.add=function e(t){if(this.isInfinity())return t;if(t.isInfinity())return this;if(this.curve.extended)return this._extAdd(t);else return this._projAdd(t)};Point.prototype.mul=function e(t){if(this._hasDoubles(t))return this.curve._fixedNafMul(this,t);else return this.curve._wnafMul(this,t)};Point.prototype.mulAdd=function e(t,r,n){return this.curve._wnafMulAdd(1,[this,r],[t,n],2,false)};Point.prototype.jmulAdd=function e(t,r,n){return this.curve._wnafMulAdd(1,[this,r],[t,n],2,true)};Point.prototype.normalize=function e(){if(this.zOne)return this;var t=this.z.redInvm();this.x=this.x.redMul(t);this.y=this.y.redMul(t);if(this.t)this.t=this.t.redMul(t);this.z=this.curve.one;this.zOne=true;return this};Point.prototype.neg=function e(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())};Point.prototype.getX=function e(){this.normalize();return this.x.fromRed()};Point.prototype.getY=function e(){this.normalize();return this.y.fromRed()};Point.prototype.eq=function e(t){return this===t||this.getX().cmp(t.getX())===0&&this.getY().cmp(t.getY())===0};Point.prototype.eqXToP=function e(t){var r=t.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(r)===0)return true;var n=t.clone();var i=this.curve.redN.redMul(this.z);for(;;){n.iadd(this.curve.n);if(n.cmp(this.curve.p)>=0)return false;r.redIAdd(i);if(this.x.cmp(r)===0)return true}};Point.prototype.toP=Point.prototype.normalize;Point.prototype.mixedAdd=Point.prototype.add;(function(e){var t=e;t.base=base$e;t.short=short;t.mont=mont;t.edwards=edwards})(curve);var curves$2={};var hash$4={};var utils$l={};var assert$f=minimalisticAssert;var inherits$3=inherits_browser.exports;utils$l.inherits=inherits$3;function isSurrogatePair(e,t){if((e.charCodeAt(t)&64512)!==55296){return false}if(t<0||t+1>=e.length){return false}return(e.charCodeAt(t+1)&64512)===56320}function toArray(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if(typeof e==="string"){if(!t){var n=0;for(var i=0;i<e.length;i++){var s=e.charCodeAt(i);if(s<128){r[n++]=s}else if(s<2048){r[n++]=s>>6|192;r[n++]=s&63|128}else if(isSurrogatePair(e,i)){s=65536+((s&1023)<<10)+(e.charCodeAt(++i)&1023);r[n++]=s>>18|240;r[n++]=s>>12&63|128;r[n++]=s>>6&63|128;r[n++]=s&63|128}else{r[n++]=s>>12|224;r[n++]=s>>6&63|128;r[n++]=s&63|128}}}else if(t==="hex"){e=e.replace(/[^a-z0-9]+/gi,"");if(e.length%2!==0)e="0"+e;for(i=0;i<e.length;i+=2)r.push(parseInt(e[i]+e[i+1],16))}}else{for(i=0;i<e.length;i++)r[i]=e[i]|0}return r}utils$l.toArray=toArray;function toHex$2(e){var t="";for(var r=0;r<e.length;r++)t+=zero2(e[r].toString(16));return t}utils$l.toHex=toHex$2;function htonl(e){var t=e>>>24|e>>>8&65280|e<<8&16711680|(e&255)<<24;return t>>>0}utils$l.htonl=htonl;function toHex32(e,t){var r="";for(var n=0;n<e.length;n++){var i=e[n];if(t==="little")i=htonl(i);r+=zero8(i.toString(16))}return r}utils$l.toHex32=toHex32;function zero2(e){if(e.length===1)return"0"+e;else return e}utils$l.zero2=zero2;function zero8(e){if(e.length===7)return"0"+e;else if(e.length===6)return"00"+e;else if(e.length===5)return"000"+e;else if(e.length===4)return"0000"+e;else if(e.length===3)return"00000"+e;else if(e.length===2)return"000000"+e;else if(e.length===1)return"0000000"+e;else return e}utils$l.zero8=zero8;function join32(e,t,r,n){var i=r-t;assert$f(i%4===0);var s=new Array(i/4);for(var a=0,o=t;a<s.length;a++,o+=4){var f;if(n==="big")f=e[o]<<24|e[o+1]<<16|e[o+2]<<8|e[o+3];else f=e[o+3]<<24|e[o+2]<<16|e[o+1]<<8|e[o];s[a]=f>>>0}return s}utils$l.join32=join32;function split32(e,t){var r=new Array(e.length*4);for(var n=0,i=0;n<e.length;n++,i+=4){var s=e[n];if(t==="big"){r[i]=s>>>24;r[i+1]=s>>>16&255;r[i+2]=s>>>8&255;r[i+3]=s&255}else{r[i+3]=s>>>24;r[i+2]=s>>>16&255;r[i+1]=s>>>8&255;r[i]=s&255}}return r}utils$l.split32=split32;function rotr32$1(e,t){return e>>>t|e<<32-t}utils$l.rotr32=rotr32$1;function rotl32$2(e,t){return e<<t|e>>>32-t}utils$l.rotl32=rotl32$2;function sum32$3(e,t){return e+t>>>0}utils$l.sum32=sum32$3;function sum32_3$1(e,t,r){return e+t+r>>>0}utils$l.sum32_3=sum32_3$1;function sum32_4$2(e,t,r,n){return e+t+r+n>>>0}utils$l.sum32_4=sum32_4$2;function sum32_5$2(e,t,r,n,i){return e+t+r+n+i>>>0}utils$l.sum32_5=sum32_5$2;function sum64$1(e,t,r,n){var i=e[t];var s=e[t+1];var a=n+s>>>0;var o=(a<n?1:0)+r+i;e[t]=o>>>0;e[t+1]=a}utils$l.sum64=sum64$1;function sum64_hi$1(e,t,r,n){var i=t+n>>>0;var s=(i<t?1:0)+e+r;return s>>>0}utils$l.sum64_hi=sum64_hi$1;function sum64_lo$1(e,t,r,n){var i=t+n;return i>>>0}utils$l.sum64_lo=sum64_lo$1;function sum64_4_hi$1(e,t,r,n,i,s,a,o){var f=0;var c=t;c=c+n>>>0;f+=c<t?1:0;c=c+s>>>0;f+=c<s?1:0;c=c+o>>>0;f+=c<o?1:0;var u=e+r+i+a+f;return u>>>0}utils$l.sum64_4_hi=sum64_4_hi$1;function sum64_4_lo$1(e,t,r,n,i,s,a,o){var f=t+n+s+o;return f>>>0}utils$l.sum64_4_lo=sum64_4_lo$1;function sum64_5_hi$1(e,t,r,n,i,s,a,o,f,c){var u=0;var l=t;l=l+n>>>0;u+=l<t?1:0;l=l+s>>>0;u+=l<s?1:0;l=l+o>>>0;u+=l<o?1:0;l=l+c>>>0;u+=l<c?1:0;var h=e+r+i+a+f+u;return h>>>0}utils$l.sum64_5_hi=sum64_5_hi$1;function sum64_5_lo$1(e,t,r,n,i,s,a,o,f,c){var u=t+n+s+o+c;return u>>>0}utils$l.sum64_5_lo=sum64_5_lo$1;function rotr64_hi$1(e,t,r){var n=t<<32-r|e>>>r;return n>>>0}utils$l.rotr64_hi=rotr64_hi$1;function rotr64_lo$1(e,t,r){var n=e<<32-r|t>>>r;return n>>>0}utils$l.rotr64_lo=rotr64_lo$1;function shr64_hi$1(e,t,r){return e>>>r}utils$l.shr64_hi=shr64_hi$1;function shr64_lo$1(e,t,r){var n=e<<32-r|t>>>r;return n>>>0}utils$l.shr64_lo=shr64_lo$1;var common$6={};var utils$k=utils$l;var assert$e=minimalisticAssert;function BlockHash$4(){this.pending=null;this.pendingTotal=0;this.blockSize=this.constructor.blockSize;this.outSize=this.constructor.outSize;this.hmacStrength=this.constructor.hmacStrength;this.padLength=this.constructor.padLength/8;this.endian="big";this._delta8=this.blockSize/8;this._delta32=this.blockSize/32}common$6.BlockHash=BlockHash$4;BlockHash$4.prototype.update=function e(t,r){t=utils$k.toArray(t,r);if(!this.pending)this.pending=t;else this.pending=this.pending.concat(t);this.pendingTotal+=t.length;if(this.pending.length>=this._delta8){t=this.pending;var n=t.length%this._delta8;this.pending=t.slice(t.length-n,t.length);if(this.pending.length===0)this.pending=null;t=utils$k.join32(t,0,t.length-n,this.endian);for(var i=0;i<t.length;i+=this._delta32)this._update(t,i,i+this._delta32)}return this};BlockHash$4.prototype.digest=function e(t){this.update(this._pad());assert$e(this.pending===null);return this._digest(t)};BlockHash$4.prototype._pad=function e(){var t=this.pendingTotal;var r=this._delta8;var n=r-(t+this.padLength)%r;var i=new Array(n+this.padLength);i[0]=128;for(var s=1;s<n;s++)i[s]=0;t<<=3;if(this.endian==="big"){for(var a=8;a<this.padLength;a++)i[s++]=0;i[s++]=0;i[s++]=0;i[s++]=0;i[s++]=0;i[s++]=t>>>24&255;i[s++]=t>>>16&255;i[s++]=t>>>8&255;i[s++]=t&255}else{i[s++]=t&255;i[s++]=t>>>8&255;i[s++]=t>>>16&255;i[s++]=t>>>24&255;i[s++]=0;i[s++]=0;i[s++]=0;i[s++]=0;for(a=8;a<this.padLength;a++)i[s++]=0}return i};var sha$2={};var common$5={};var utils$j=utils$l;var rotr32=utils$j.rotr32;function ft_1$1(e,t,r,n){if(e===0)return ch32$1(t,r,n);if(e===1||e===3)return p32(t,r,n);if(e===2)return maj32$1(t,r,n)}common$5.ft_1=ft_1$1;function ch32$1(e,t,r){return e&t^~e&r}common$5.ch32=ch32$1;function maj32$1(e,t,r){return e&t^e&r^t&r}common$5.maj32=maj32$1;function p32(e,t,r){return e^t^r}common$5.p32=p32;function s0_256$1(e){return rotr32(e,2)^rotr32(e,13)^rotr32(e,22)}common$5.s0_256=s0_256$1;function s1_256$1(e){return rotr32(e,6)^rotr32(e,11)^rotr32(e,25)}common$5.s1_256=s1_256$1;function g0_256$1(e){return rotr32(e,7)^rotr32(e,18)^e>>>3}common$5.g0_256=g0_256$1;function g1_256$1(e){return rotr32(e,17)^rotr32(e,19)^e>>>10}common$5.g1_256=g1_256$1;var utils$i=utils$l;var common$4=common$6;var shaCommon$1=common$5;var rotl32$1=utils$i.rotl32;var sum32$2=utils$i.sum32;var sum32_5$1=utils$i.sum32_5;var ft_1=shaCommon$1.ft_1;var BlockHash$3=common$4.BlockHash;var sha1_K=[1518500249,1859775393,2400959708,3395469782];function SHA1(){if(!(this instanceof SHA1))return new SHA1;BlockHash$3.call(this);this.h=[1732584193,4023233417,2562383102,271733878,3285377520];this.W=new Array(80)}utils$i.inherits(SHA1,BlockHash$3);var _1=SHA1;SHA1.blockSize=512;SHA1.outSize=160;SHA1.hmacStrength=80;SHA1.padLength=64;SHA1.prototype._update=function e(t,r){var n=this.W;for(var i=0;i<16;i++)n[i]=t[r+i];for(;i<n.length;i++)n[i]=rotl32$1(n[i-3]^n[i-8]^n[i-14]^n[i-16],1);var s=this.h[0];var a=this.h[1];var o=this.h[2];var f=this.h[3];var c=this.h[4];for(i=0;i<n.length;i++){var u=~~(i/20);var l=sum32_5$1(rotl32$1(s,5),ft_1(u,a,o,f),c,n[i],sha1_K[u]);c=f;f=o;o=rotl32$1(a,30);a=s;s=l}this.h[0]=sum32$2(this.h[0],s);this.h[1]=sum32$2(this.h[1],a);this.h[2]=sum32$2(this.h[2],o);this.h[3]=sum32$2(this.h[3],f);this.h[4]=sum32$2(this.h[4],c)};SHA1.prototype._digest=function e(t){if(t==="hex")return utils$i.toHex32(this.h,"big");else return utils$i.split32(this.h,"big")};var utils$h=utils$l;var common$3=common$6;var shaCommon=common$5;var assert$d=minimalisticAssert;var sum32$1=utils$h.sum32;var sum32_4$1=utils$h.sum32_4;var sum32_5=utils$h.sum32_5;var ch32=shaCommon.ch32;var maj32=shaCommon.maj32;var s0_256=shaCommon.s0_256;var s1_256=shaCommon.s1_256;var g0_256=shaCommon.g0_256;var g1_256=shaCommon.g1_256;var BlockHash$2=common$3.BlockHash;var sha256_K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function SHA256$1(){if(!(this instanceof SHA256$1))return new SHA256$1;BlockHash$2.call(this);this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];this.k=sha256_K;this.W=new Array(64)}utils$h.inherits(SHA256$1,BlockHash$2);var _256=SHA256$1;SHA256$1.blockSize=512;SHA256$1.outSize=256;SHA256$1.hmacStrength=192;SHA256$1.padLength=64;SHA256$1.prototype._update=function e(t,r){var n=this.W;for(var i=0;i<16;i++)n[i]=t[r+i];for(;i<n.length;i++)n[i]=sum32_4$1(g1_256(n[i-2]),n[i-7],g0_256(n[i-15]),n[i-16]);var s=this.h[0];var a=this.h[1];var o=this.h[2];var f=this.h[3];var c=this.h[4];var u=this.h[5];var l=this.h[6];var h=this.h[7];assert$d(this.k.length===n.length);for(i=0;i<n.length;i++){var d=sum32_5(h,s1_256(c),ch32(c,u,l),this.k[i],n[i]);var p=sum32$1(s0_256(s),maj32(s,a,o));h=l;l=u;u=c;c=sum32$1(f,d);f=o;o=a;a=s;s=sum32$1(d,p)}this.h[0]=sum32$1(this.h[0],s);this.h[1]=sum32$1(this.h[1],a);this.h[2]=sum32$1(this.h[2],o);this.h[3]=sum32$1(this.h[3],f);this.h[4]=sum32$1(this.h[4],c);this.h[5]=sum32$1(this.h[5],u);this.h[6]=sum32$1(this.h[6],l);this.h[7]=sum32$1(this.h[7],h)};SHA256$1.prototype._digest=function e(t){if(t==="hex")return utils$h.toHex32(this.h,"big");else return utils$h.split32(this.h,"big")};var utils$g=utils$l;var SHA256=_256;function SHA224(){if(!(this instanceof SHA224))return new SHA224;SHA256.call(this);this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}utils$g.inherits(SHA224,SHA256);var _224=SHA224;SHA224.blockSize=512;SHA224.outSize=224;SHA224.hmacStrength=192;SHA224.padLength=64;SHA224.prototype._digest=function e(t){if(t==="hex")return utils$g.toHex32(this.h.slice(0,7),"big");else return utils$g.split32(this.h.slice(0,7),"big")};var utils$f=utils$l;var common$2=common$6;var assert$c=minimalisticAssert;var rotr64_hi=utils$f.rotr64_hi;var rotr64_lo=utils$f.rotr64_lo;var shr64_hi=utils$f.shr64_hi;var shr64_lo=utils$f.shr64_lo;var sum64=utils$f.sum64;var sum64_hi=utils$f.sum64_hi;var sum64_lo=utils$f.sum64_lo;var sum64_4_hi=utils$f.sum64_4_hi;var sum64_4_lo=utils$f.sum64_4_lo;var sum64_5_hi=utils$f.sum64_5_hi;var sum64_5_lo=utils$f.sum64_5_lo;var BlockHash$1=common$2.BlockHash;var sha512_K=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function SHA512$1(){if(!(this instanceof SHA512$1))return new SHA512$1;BlockHash$1.call(this);this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209];this.k=sha512_K;this.W=new Array(160)}utils$f.inherits(SHA512$1,BlockHash$1);var _512=SHA512$1;SHA512$1.blockSize=1024;SHA512$1.outSize=512;SHA512$1.hmacStrength=192;SHA512$1.padLength=128;SHA512$1.prototype._prepareBlock=function e(t,r){var n=this.W;for(var i=0;i<32;i++)n[i]=t[r+i];for(;i<n.length;i+=2){var s=g1_512_hi(n[i-4],n[i-3]);var a=g1_512_lo(n[i-4],n[i-3]);var o=n[i-14];var f=n[i-13];var c=g0_512_hi(n[i-30],n[i-29]);var u=g0_512_lo(n[i-30],n[i-29]);var l=n[i-32];var h=n[i-31];n[i]=sum64_4_hi(s,a,o,f,c,u,l,h);n[i+1]=sum64_4_lo(s,a,o,f,c,u,l,h)}};SHA512$1.prototype._update=function e(t,r){this._prepareBlock(t,r);var n=this.W;var i=this.h[0];var s=this.h[1];var a=this.h[2];var o=this.h[3];var f=this.h[4];var c=this.h[5];var u=this.h[6];var l=this.h[7];var h=this.h[8];var d=this.h[9];var p=this.h[10];var y=this.h[11];var m=this.h[12];var g=this.h[13];var b=this.h[14];var A=this.h[15];assert$c(this.k.length===n.length);for(var w=0;w<n.length;w+=2){var E=b;var v=A;var _=s1_512_hi(h,d);var S=s1_512_lo(h,d);var $=ch64_hi(h,d,p,y,m);var T=ch64_lo(h,d,p,y,m,g);var I=this.k[w];var C=this.k[w+1];var P=n[w];var R=n[w+1];var N=sum64_5_hi(E,v,_,S,$,T,I,C,P,R);var k=sum64_5_lo(E,v,_,S,$,T,I,C,P,R);E=s0_512_hi(i,s);v=s0_512_lo(i,s);_=maj64_hi(i,s,a,o,f);S=maj64_lo(i,s,a,o,f,c);var O=sum64_hi(E,v,_,S);var x=sum64_lo(E,v,_,S);b=m;A=g;m=p;g=y;p=h;y=d;h=sum64_hi(u,l,N,k);d=sum64_lo(l,l,N,k);u=f;l=c;f=a;c=o;a=i;o=s;i=sum64_hi(N,k,O,x);s=sum64_lo(N,k,O,x)}sum64(this.h,0,i,s);sum64(this.h,2,a,o);sum64(this.h,4,f,c);sum64(this.h,6,u,l);sum64(this.h,8,h,d);sum64(this.h,10,p,y);sum64(this.h,12,m,g);sum64(this.h,14,b,A)};SHA512$1.prototype._digest=function e(t){if(t==="hex")return utils$f.toHex32(this.h,"big");else return utils$f.split32(this.h,"big")};function ch64_hi(e,t,r,n,i){var s=e&r^~e&i;if(s<0)s+=4294967296;return s}function ch64_lo(e,t,r,n,i,s){var a=t&n^~t&s;if(a<0)a+=4294967296;return a}function maj64_hi(e,t,r,n,i){var s=e&r^e&i^r&i;if(s<0)s+=4294967296;return s}function maj64_lo(e,t,r,n,i,s){var a=t&n^t&s^n&s;if(a<0)a+=4294967296;return a}function s0_512_hi(e,t){var r=rotr64_hi(e,t,28);var n=rotr64_hi(t,e,2);var i=rotr64_hi(t,e,7);var s=r^n^i;if(s<0)s+=4294967296;return s}function s0_512_lo(e,t){var r=rotr64_lo(e,t,28);var n=rotr64_lo(t,e,2);var i=rotr64_lo(t,e,7);var s=r^n^i;if(s<0)s+=4294967296;return s}function s1_512_hi(e,t){var r=rotr64_hi(e,t,14);var n=rotr64_hi(e,t,18);var i=rotr64_hi(t,e,9);var s=r^n^i;if(s<0)s+=4294967296;return s}function s1_512_lo(e,t){var r=rotr64_lo(e,t,14);var n=rotr64_lo(e,t,18);var i=rotr64_lo(t,e,9);var s=r^n^i;if(s<0)s+=4294967296;return s}function g0_512_hi(e,t){var r=rotr64_hi(e,t,1);var n=rotr64_hi(e,t,8);var i=shr64_hi(e,t,7);var s=r^n^i;if(s<0)s+=4294967296;return s}function g0_512_lo(e,t){var r=rotr64_lo(e,t,1);var n=rotr64_lo(e,t,8);var i=shr64_lo(e,t,7);var s=r^n^i;if(s<0)s+=4294967296;return s}function g1_512_hi(e,t){var r=rotr64_hi(e,t,19);var n=rotr64_hi(t,e,29);var i=shr64_hi(e,t,6);var s=r^n^i;if(s<0)s+=4294967296;return s}function g1_512_lo(e,t){var r=rotr64_lo(e,t,19);var n=rotr64_lo(t,e,29);var i=shr64_lo(e,t,6);var s=r^n^i;if(s<0)s+=4294967296;return s}var utils$e=utils$l;var SHA512=_512;function SHA384(){if(!(this instanceof SHA384))return new SHA384;SHA512.call(this);this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}utils$e.inherits(SHA384,SHA512);var _384=SHA384;SHA384.blockSize=1024;SHA384.outSize=384;SHA384.hmacStrength=192;SHA384.padLength=128;SHA384.prototype._digest=function e(t){if(t==="hex")return utils$e.toHex32(this.h.slice(0,12),"big");else return utils$e.split32(this.h.slice(0,12),"big")};sha$2.sha1=_1;sha$2.sha224=_224;sha$2.sha256=_256;sha$2.sha384=_384;sha$2.sha512=_512;var ripemd={};var utils$d=utils$l;var common$1=common$6;var rotl32=utils$d.rotl32;var sum32=utils$d.sum32;var sum32_3=utils$d.sum32_3;var sum32_4=utils$d.sum32_4;var BlockHash=common$1.BlockHash;function RIPEMD160(){if(!(this instanceof RIPEMD160))return new RIPEMD160;BlockHash.call(this);this.h=[1732584193,4023233417,2562383102,271733878,3285377520];this.endian="little"}utils$d.inherits(RIPEMD160,BlockHash);ripemd.ripemd160=RIPEMD160;RIPEMD160.blockSize=512;RIPEMD160.outSize=160;RIPEMD160.hmacStrength=192;RIPEMD160.padLength=64;RIPEMD160.prototype._update=function e(t,n){var i=this.h[0];var s=this.h[1];var a=this.h[2];var o=this.h[3];var f=this.h[4];var c=i;var u=s;var l=a;var h=o;var d=f;for(var p=0;p<80;p++){var y=sum32(rotl32(sum32_4(i,f$1(p,s,a,o),t[r[p]+n],K(p)),s$1[p]),f);i=f;f=o;o=rotl32(a,10);a=s;s=y;y=sum32(rotl32(sum32_4(c,f$1(79-p,u,l,h),t[rh[p]+n],Kh(p)),sh[p]),d);c=d;d=h;h=rotl32(l,10);l=u;u=y}y=sum32_3(this.h[1],a,h);this.h[1]=sum32_3(this.h[2],o,d);this.h[2]=sum32_3(this.h[3],f,c);this.h[3]=sum32_3(this.h[4],i,u);this.h[4]=sum32_3(this.h[0],s,l);this.h[0]=y};RIPEMD160.prototype._digest=function e(t){if(t==="hex")return utils$d.toHex32(this.h,"little");else return utils$d.split32(this.h,"little")};function f$1(e,t,r,n){if(e<=15)return t^r^n;else if(e<=31)return t&r|~t&n;else if(e<=47)return(t|~r)^n;else if(e<=63)return t&n|r&~n;else return t^(r|~n)}function K(e){if(e<=15)return 0;else if(e<=31)return 1518500249;else if(e<=47)return 1859775393;else if(e<=63)return 2400959708;else return 2840853838}function Kh(e){if(e<=15)return 1352829926;else if(e<=31)return 1548603684;else if(e<=47)return 1836072691;else if(e<=63)return 2053994217;else return 0}var r=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13];var rh=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11];var s$1=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6];var sh=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];var utils$c=utils$l;var assert$b=minimalisticAssert;function Hmac(e,t,r){if(!(this instanceof Hmac))return new Hmac(e,t,r);this.Hash=e;this.blockSize=e.blockSize/8;this.outSize=e.outSize/8;this.inner=null;this.outer=null;this._init(utils$c.toArray(t,r))}var hmac=Hmac;Hmac.prototype._init=function e(t){if(t.length>this.blockSize)t=(new this.Hash).update(t).digest();assert$b(t.length<=this.blockSize);for(var r=t.length;r<this.blockSize;r++)t.push(0);for(r=0;r<t.length;r++)t[r]^=54;this.inner=(new this.Hash).update(t);for(r=0;r<t.length;r++)t[r]^=106;this.outer=(new this.Hash).update(t)};Hmac.prototype.update=function e(t,r){this.inner.update(t,r);return this};Hmac.prototype.digest=function e(t){this.outer.update(this.inner.digest());return this.outer.digest(t)};(function(e){var t=e;t.utils=utils$l;t.common=common$6;t.sha=sha$2;t.ripemd=ripemd;t.hmac=hmac;t.sha1=t.sha.sha1;t.sha256=t.sha.sha256;t.sha224=t.sha.sha224;t.sha384=t.sha.sha384;t.sha512=t.sha.sha512;t.ripemd160=t.ripemd.ripemd160})(hash$4);(function(e){var t=e;var r=hash$4;var n=curve;var i=utils$r;var s=i.assert;function a(e){if(e.type==="short")this.curve=new n.short(e);else if(e.type==="edwards")this.curve=new n.edwards(e);else if(e.type==="mont")this.curve=new n.mont(e);else throw new Error("Unknown curve type.");this.g=this.curve.g;this.n=this.curve.n;this.hash=e.hash;s(this.g.validate(),"Invalid curve");s(this.g.mul(this.n).isInfinity(),"Invalid curve, n*G != O")}t.PresetCurve=a;function o(e,r){Object.defineProperty(t,e,{configurable:true,enumerable:true,get:function(){var n=new a(r);Object.defineProperty(t,e,{configurable:true,enumerable:true,value:n});return n}})}o("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:r.sha256,gRed:false,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]});o("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:r.sha256,gRed:false,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]});o("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:r.sha256,gRed:false,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]});o("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff "+"fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff "+"fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f "+"5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 "+"f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:r.sha384,gRed:false,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 "+"5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 "+"0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]});o("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff "+"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff "+"ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff "+"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff "+"ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b "+"99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd "+"3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff "+"ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 "+"f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:r.sha512,gRed:false,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 "+"053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 "+"a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 "+"579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 "+"3fad0761 353c7086 a272c240 88be9476 9fd16650"]});o("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",cofactor:"8",hash:r.sha256,gRed:false,g:["9"]});o("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",cofactor:"8",hash:r.sha256,gRed:false,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});o("brainpoolP256r1",{type:"short",prime:null,p:"A9FB57DB A1EEA9BC 3E660A90 9D838D72 6E3BF623 D5262028 2013481D 1F6E5377",a:"7D5A0975 FC2C3057 EEF67530 417AFFE7 FB8055C1 26DC5C6C E94A4B44 F330B5D9",b:"26DC5C6C E94A4B44 F330B5D9 BBD77CBF 95841629 5CF7E1CE 6BCCDC18 FF8C07B6",n:"A9FB57DB A1EEA9BC 3E660A90 9D838D71 8C397AA3 B561A6F7 901E0E82 974856A7",hash:r.sha256,gRed:false,g:["8BD2AEB9CB7E57CB2C4B482FFC81B7AFB9DE27E1E3BD23C23A4453BD9ACE3262","547EF835C3DAC4FD97F8461A14611DC9C27745132DED8E545C1D54C72F046997"]});o("brainpoolP384r1",{type:"short",prime:null,p:"8CB91E82 A3386D28 0F5D6F7E 50E641DF 152F7109 ED5456B4 12B1DA19 7FB71123"+"ACD3A729 901D1A71 87470013 3107EC53",a:"7BC382C6 3D8C150C 3C72080A CE05AFA0 C2BEA28E 4FB22787 139165EF BA91F90F"+"8AA5814A 503AD4EB 04A8C7DD 22CE2826",b:"04A8C7DD 22CE2826 8B39B554 16F0447C 2FB77DE1 07DCD2A6 2E880EA5 3EEB62D5"+"7CB43902 95DBC994 3AB78696 FA504C11",n:"8CB91E82 A3386D28 0F5D6F7E 50E641DF 152F7109 ED5456B3 1F166E6C AC0425A7"+"CF3AB6AF 6B7FC310 3B883202 E9046565",hash:r.sha384,gRed:false,g:["1D1C64F068CF45FFA2A63A81B7C13F6B8847A3E77EF14FE3DB7FCAFE0CBD10"+"E8E826E03436D646AAEF87B2E247D4AF1E","8ABE1D7520F9C2A45CB1EB8E95CFD55262B70B29FEEC5864E19C054FF99129"+"280E4646217791811142820341263C5315"]});o("brainpoolP512r1",{type:"short",prime:null,p:"AADD9DB8 DBE9C48B 3FD4E6AE 33C9FC07 CB308DB3 B3C9D20E D6639CCA 70330871"+"7D4D9B00 9BC66842 AECDA12A E6A380E6 2881FF2F 2D82C685 28AA6056 583A48F3",a:"7830A331 8B603B89 E2327145 AC234CC5 94CBDD8D 3DF91610 A83441CA EA9863BC"+"2DED5D5A A8253AA1 0A2EF1C9 8B9AC8B5 7F1117A7 2BF2C7B9 E7C1AC4D 77FC94CA",b:"3DF91610 A83441CA EA9863BC 2DED5D5A A8253AA1 0A2EF1C9 8B9AC8B5 7F1117A7"+"2BF2C7B9 E7C1AC4D 77FC94CA DC083E67 984050B7 5EBAE5DD 2809BD63 8016F723",n:"AADD9DB8 DBE9C48B 3FD4E6AE 33C9FC07 CB308DB3 B3C9D20E D6639CCA 70330870"+"553E5C41 4CA92619 41866119 7FAC1047 1DB1D381 085DDADD B5879682 9CA90069",hash:r.sha512,gRed:false,g:["81AEE4BDD82ED9645A21322E9C4C6A9385ED9F70B5D916C1B43B62EEF4D009"+"8EFF3B1F78E2D0D48D50D1687B93B97D5F7C6D5047406A5E688B352209BCB9F822","7DDE385D566332ECC0EABFA9CF7822FDF209F70024A57B1AA000C55B881F81"+"11B2DCDE494A5F485E5BCA4BD88A2763AED1CA2B2FA8F0540678CD1E0F3AD80892"]});var f;try{f=require("./precomputed/secp256k1")}catch(e){f=undefined}o("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:r.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:false,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",f]})})(curves$2);var hash$3=hash$4;var utils$b=utils$q;var assert$a=minimalisticAssert;function HmacDRBG$2(e){if(!(this instanceof HmacDRBG$2))return new HmacDRBG$2(e);this.hash=e.hash;this.predResist=!!e.predResist;this.outLen=this.hash.outSize;this.minEntropy=e.minEntropy||this.hash.hmacStrength;this._reseed=null;this.reseedInterval=null;this.K=null;this.V=null;var t=utils$b.toArray(e.entropy,e.entropyEnc||"hex");var r=utils$b.toArray(e.nonce,e.nonceEnc||"hex");var n=utils$b.toArray(e.pers,e.persEnc||"hex");assert$a(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits");this._init(t,r,n)}var hmacDrbg=HmacDRBG$2;HmacDRBG$2.prototype._init=function e(t,r,n){var i=t.concat(r).concat(n);this.K=new Array(this.outLen/8);this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++){this.K[s]=0;this.V[s]=1}this._update(i);this._reseed=1;this.reseedInterval=281474976710656};HmacDRBG$2.prototype._hmac=function e(){return new hash$3.hmac(this.hash,this.K)};HmacDRBG$2.prototype._update=function e(t){var r=this._hmac().update(this.V).update([0]);if(t)r=r.update(t);this.K=r.digest();this.V=this._hmac().update(this.V).digest();if(!t)return;this.K=this._hmac().update(this.V).update([1]).update(t).digest();this.V=this._hmac().update(this.V).digest()};HmacDRBG$2.prototype.reseed=function e(t,r,n,i){if(typeof r!=="string"){i=n;n=r;r=null}t=utils$b.toArray(t,r);n=utils$b.toArray(n,i);assert$a(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits");this._update(t.concat(n||[]));this._reseed=1};HmacDRBG$2.prototype.generate=function e(t,r,n,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");if(typeof r!=="string"){i=n;n=r;r=null}if(n){n=utils$b.toArray(n,i||"hex");this._update(n)}var s=[];while(s.length<t){this.V=this._hmac().update(this.V).digest();s=s.concat(this.V)}var a=s.slice(0,t);this._update(n);this._reseed++;return utils$b.encode(a,r)};var BN$3=bn.exports;var utils$a=utils$r;var assert$9=utils$a.assert;function KeyPair$3(e,t){this.ec=e;this.priv=null;this.pub=null;if(t.priv)this._importPrivate(t.priv,t.privEnc);if(t.pub)this._importPublic(t.pub,t.pubEnc)}var key$1=KeyPair$3;KeyPair$3.fromPublic=function e(t,r,n){if(r instanceof KeyPair$3)return r;return new KeyPair$3(t,{pub:r,pubEnc:n})};KeyPair$3.fromPrivate=function e(t,r,n){if(r instanceof KeyPair$3)return r;return new KeyPair$3(t,{priv:r,privEnc:n})};KeyPair$3.prototype.validate=function e(){var t=this.getPublic();if(t.isInfinity())return{result:false,reason:"Invalid public key"};if(!t.validate())return{result:false,reason:"Public key is not a point"};if(!t.mul(this.ec.curve.n).isInfinity())return{result:false,reason:"Public key * N != O"};return{result:true,reason:null}};KeyPair$3.prototype.getPublic=function e(t,r){if(!this.pub)this.pub=this.ec.g.mul(this.priv);if(!t)return this.pub;return this.pub.encode(t,r)};KeyPair$3.prototype.getPrivate=function e(t){if(t==="hex")return this.priv.toString(16,2);else return this.priv};KeyPair$3.prototype._importPrivate=function e(t,r){this.priv=new BN$3(t,r||16);if(this.ec.curve.type==="mont"){var n=this.ec.curve.one;var i=n.ushln(255-3).sub(n).ushln(3);this.priv=this.priv.or(n.ushln(255-1));this.priv=this.priv.and(i)}else this.priv=this.priv.umod(this.ec.curve.n)};KeyPair$3.prototype._importPublic=function e(t,r){if(t.x||t.y){if(this.ec.curve.type==="mont"){assert$9(t.x,"Need x coordinate")}else if(this.ec.curve.type==="short"||this.ec.curve.type==="edwards"){assert$9(t.x&&t.y,"Need both x and y coordinate")}this.pub=this.ec.curve.point(t.x,t.y);return}this.pub=this.ec.curve.decodePoint(t,r)};KeyPair$3.prototype.derive=function e(t){return t.mul(this.priv).getX()};KeyPair$3.prototype.sign=function e(t,r,n){return this.ec.sign(t,this,r,n)};KeyPair$3.prototype.verify=function e(t,r){return this.ec.verify(t,r,this)};KeyPair$3.prototype.inspect=function e(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var BN$2=bn.exports;var utils$9=utils$r;var assert$8=utils$9.assert;function Signature$3(e,t){if(e instanceof Signature$3)return e;if(this._importDER(e,t))return;assert$8(e.r&&e.s,"Signature without r or s");this.r=new BN$2(e.r,16);this.s=new BN$2(e.s,16);if(e.recoveryParam===undefined)this.recoveryParam=null;else this.recoveryParam=e.recoveryParam}var signature$1=Signature$3;function Position(){this.place=0}function getLength(e,t){var r=e[t.place++];if(!(r&128)){return r}var n=r&15;var i=0;for(var s=0,a=t.place;s<n;s++,a++){i<<=8;i|=e[a]}t.place=a;return i}function rmPadding(e){var t=0;var r=e.length-1;while(!e[t]&&!(e[t+1]&128)&&t<r){t++}if(t===0){return e}return e.slice(t)}Signature$3.prototype._importDER=function e(t,r){t=utils$9.toArray(t,r);var n=new Position;if(t[n.place++]!==48){return false}var i=getLength(t,n);if(i+n.place!==t.length){return false}if(t[n.place++]!==2){return false}var s=getLength(t,n);var a=t.slice(n.place,s+n.place);n.place+=s;if(t[n.place++]!==2){return false}var o=getLength(t,n);if(t.length!==o+n.place){return false}var f=t.slice(n.place,o+n.place);if(a[0]===0&&a[1]&128){a=a.slice(1)}if(f[0]===0&&f[1]&128){f=f.slice(1)}this.r=new BN$2(a);this.s=new BN$2(f);this.recoveryParam=null;return true};function constructLength(e,t){if(t<128){e.push(t);return}var r=1+(Math.log(t)/Math.LN2>>>3);e.push(r|128);while(--r){e.push(t>>>(r<<3)&255)}e.push(t)}Signature$3.prototype.toDER=function e(t){var r=this.r.toArray();var n=this.s.toArray();if(r[0]&128)r=[0].concat(r);if(n[0]&128)n=[0].concat(n);r=rmPadding(r);n=rmPadding(n);while(!n[0]&&!(n[1]&128)){n=n.slice(1)}var i=[2];constructLength(i,r.length);i=i.concat(r);i.push(2);constructLength(i,n.length);var s=i.concat(n);var a=[48];constructLength(a,s.length);a=a.concat(s);return utils$9.encode(a,t)};var BN$1=bn.exports;var HmacDRBG$1=hmacDrbg;var utils$8=utils$r;var curves$1=curves$2;var rand=brorand.exports;var assert$7=utils$8.assert;var KeyPair$2=key$1;var Signature$2=signature$1;function EC(e){if(!(this instanceof EC))return new EC(e);if(typeof e==="string"){assert$7(curves$1.hasOwnProperty(e),"Unknown curve "+e);e=curves$1[e]}if(e instanceof curves$1.PresetCurve)e={curve:e};this.curve=e.curve.curve;this.n=this.curve.n;this.nh=this.n.ushrn(1);this.g=this.curve.g;this.g=e.curve.g;this.g.precompute(e.curve.n.bitLength()+1);this.hash=e.hash||e.curve.hash}var ec=EC;EC.prototype.keyPair=function e(t){return new KeyPair$2(this,t)};EC.prototype.keyFromPrivate=function e(t,r){return KeyPair$2.fromPrivate(this,t,r)};EC.prototype.keyFromPublic=function e(t,r){return KeyPair$2.fromPublic(this,t,r)};EC.prototype.genKeyPair=function e(t){if(!t)t={};var r=new HmacDRBG$1({hash:this.hash,pers:t.pers,persEnc:t.persEnc||"utf8",entropy:t.entropy||rand(this.hash.hmacStrength),entropyEnc:t.entropy&&t.entropyEnc||"utf8",nonce:this.n.toArray()});if(this.curve.type==="mont"){var n=new BN$1(r.generate(32));return this.keyFromPrivate(n)}var i=this.n.byteLength();var s=this.n.sub(new BN$1(2));do{var n=new BN$1(r.generate(i));if(n.cmp(s)>0)continue;n.iaddn(1);return this.keyFromPrivate(n)}while(true)};EC.prototype._truncateToN=function e(t,r){var n=t.byteLength()*8-this.n.bitLength();if(n>0)t=t.ushrn(n);if(!r&&t.cmp(this.n)>=0)return t.sub(this.n);else return t};EC.prototype.sign=function e(t,r,n,i){if(typeof n==="object"){i=n;n=null}if(!i)i={};r=this.keyFromPrivate(r,n);t=this._truncateToN(new BN$1(t,16));var s=this.n.byteLength();var a=r.getPrivate().toArray("be",s);var o=t.toArray("be",s);var f=new HmacDRBG$1({hash:this.hash,entropy:a,nonce:o,pers:i.pers,persEnc:i.persEnc||"utf8"});var c=this.n.sub(new BN$1(1));for(var u=0;true;u++){var l=i.k?i.k(u):new BN$1(f.generate(this.n.byteLength()));l=this._truncateToN(l,true);if(l.cmpn(1)<=0||l.cmp(c)>=0)continue;var h=this.g.mul(l);if(h.isInfinity())continue;var d=h.getX();var p=d.umod(this.n);if(p.cmpn(0)===0)continue;var y=l.invm(this.n).mul(p.mul(r.getPrivate()).iadd(t));y=y.umod(this.n);if(y.cmpn(0)===0)continue;var m=(h.getY().isOdd()?1:0)|(d.cmp(p)!==0?2:0);if(i.canonical&&y.cmp(this.nh)>0){y=this.n.sub(y);m^=1}return new Signature$2({r:p,s:y,recoveryParam:m})}};EC.prototype.verify=function e(t,r,n,i){t=this._truncateToN(new BN$1(t,16));n=this.keyFromPublic(n,i);r=new Signature$2(r,"hex");var s=r.r;var a=r.s;if(s.cmpn(1)<0||s.cmp(this.n)>=0)return false;if(a.cmpn(1)<0||a.cmp(this.n)>=0)return false;var o=a.invm(this.n);var f=o.mul(t).umod(this.n);var c=o.mul(s).umod(this.n);if(!this.curve._maxwellTrick){var u=this.g.mulAdd(f,n.getPublic(),c);if(u.isInfinity())return false;return u.getX().umod(this.n).cmp(s)===0}var u=this.g.jmulAdd(f,n.getPublic(),c);if(u.isInfinity())return false;return u.eqXToP(s)};EC.prototype.recoverPubKey=function(e,t,r,n){assert$7((3&r)===r,"The recovery param is more than two bits");t=new Signature$2(t,n);var i=this.n;var s=new BN$1(e);var a=t.r;var o=t.s;var f=r&1;var c=r>>1;if(a.cmp(this.curve.p.umod(this.curve.n))>=0&&c)throw new Error("Unable to find sencond key candinate");if(c)a=this.curve.pointFromX(a.add(this.curve.n),f);else a=this.curve.pointFromX(a,f);var u=t.r.invm(i);var l=i.sub(s).mul(u).umod(i);var h=o.mul(u).umod(i);return this.g.mulAdd(l,a,h)};EC.prototype.getKeyRecoveryParam=function(e,t,r,n){t=new Signature$2(t,n);if(t.recoveryParam!==null)return t.recoveryParam;for(var i=0;i<4;i++){var s;try{s=this.recoverPubKey(e,t,i)}catch(e){continue}if(s.eq(r))return i}throw new Error("Unable to find valid recovery factor")};var utils$7=utils$r;var assert$6=utils$7.assert;var parseBytes$2=utils$7.parseBytes;var cachedProperty$1=utils$7.cachedProperty;function KeyPair$1(e,t){this.eddsa=e;if(t.hasOwnProperty("secret"))this._secret=parseBytes$2(t.secret);if(e.isPoint(t.pub))this._pub=t.pub;else{this._pubBytes=parseBytes$2(t.pub);if(this._pubBytes&&this._pubBytes.length===33&&this._pubBytes[0]===64){this._pubBytes=this._pubBytes.slice(1,33)}if(this._pubBytes&&this._pubBytes.length!==32)throw new Error("Unknown point compression format")}}KeyPair$1.fromPublic=function e(t,r){if(r instanceof KeyPair$1)return r;return new KeyPair$1(t,{pub:r})};KeyPair$1.fromSecret=function e(t,r){if(r instanceof KeyPair$1)return r;return new KeyPair$1(t,{secret:r})};KeyPair$1.prototype.secret=function e(){return this._secret};cachedProperty$1(KeyPair$1,"pubBytes",(function e(){return this.eddsa.encodePoint(this.pub())}));cachedProperty$1(KeyPair$1,"pub",(function e(){if(this._pubBytes)return this.eddsa.decodePoint(this._pubBytes);return this.eddsa.g.mul(this.priv())}));cachedProperty$1(KeyPair$1,"privBytes",(function e(){var t=this.eddsa;var r=this.hash();var n=t.encodingLength-1;var i=r.slice(0,t.encodingLength);i[0]&=248;i[n]&=127;i[n]|=64;return i}));cachedProperty$1(KeyPair$1,"priv",(function e(){return this.eddsa.decodeInt(this.privBytes())}));cachedProperty$1(KeyPair$1,"hash",(function e(){return this.eddsa.hash().update(this.secret()).digest()}));cachedProperty$1(KeyPair$1,"messagePrefix",(function e(){return this.hash().slice(this.eddsa.encodingLength)}));KeyPair$1.prototype.sign=function e(t){assert$6(this._secret,"KeyPair can only verify");return this.eddsa.sign(t,this)};KeyPair$1.prototype.verify=function e(t,r){return this.eddsa.verify(t,r,this)};KeyPair$1.prototype.getSecret=function e(t){assert$6(this._secret,"KeyPair is public only");return utils$7.encode(this.secret(),t)};KeyPair$1.prototype.getPublic=function e(t,r){return utils$7.encode((r?[64]:[]).concat(this.pubBytes()),t)};var key=KeyPair$1;var BN=bn.exports;var utils$6=utils$r;var assert$5=utils$6.assert;var cachedProperty=utils$6.cachedProperty;var parseBytes$1=utils$6.parseBytes;function Signature$1(e,t){this.eddsa=e;if(typeof t!=="object")t=parseBytes$1(t);if(Array.isArray(t)){t={R:t.slice(0,e.encodingLength),S:t.slice(e.encodingLength)}}assert$5(t.R&&t.S,"Signature without R or S");if(e.isPoint(t.R))this._R=t.R;if(t.S instanceof BN)this._S=t.S;this._Rencoded=Array.isArray(t.R)?t.R:t.Rencoded;this._Sencoded=Array.isArray(t.S)?t.S:t.Sencoded}cachedProperty(Signature$1,"S",(function e(){return this.eddsa.decodeInt(this.Sencoded())}));cachedProperty(Signature$1,"R",(function e(){return this.eddsa.decodePoint(this.Rencoded())}));cachedProperty(Signature$1,"Rencoded",(function e(){return this.eddsa.encodePoint(this.R())}));cachedProperty(Signature$1,"Sencoded",(function e(){return this.eddsa.encodeInt(this.S())}));Signature$1.prototype.toBytes=function e(){return this.Rencoded().concat(this.Sencoded())};Signature$1.prototype.toHex=function e(){return utils$6.encode(this.toBytes(),"hex").toUpperCase()};var signature=Signature$1;var hash$2=hash$4;var curves=curves$2;var utils$5=utils$r;var HmacDRBG=hmacDrbg;var elliptic=elliptic$1;var assert$4=utils$5.assert;var parseBytes=utils$5.parseBytes;var KeyPair=key;var Signature=signature;function EDDSA(e){assert$4(e==="ed25519","only tested with ed25519 so far");if(!(this instanceof EDDSA))return new EDDSA(e);var e=curves[e].curve;this.curve=e;this.g=e.g;this.g.precompute(e.n.bitLength()+1);this.pointClass=e.point().constructor;this.encodingLength=Math.ceil(e.n.bitLength()/8);this.hash=hash$2.sha512}var eddsa=EDDSA;EDDSA.prototype.sign=function e(t,r){t=parseBytes(t);var n=this.keyFromSecret(r);var i=this.hashInt(n.messagePrefix(),t);var s=this.g.mul(i);var a=this.encodePoint(s);var o=this.hashInt(a,n.pubBytes(),t).mul(n.priv());var f=i.add(o).umod(this.curve.n);return this.makeSignature({R:s,S:f,Rencoded:a})};EDDSA.prototype.verify=function e(t,r,n){t=parseBytes(t);r=this.makeSignature(r);var i=this.keyFromPublic(n);var s=this.hashInt(r.Rencoded(),i.pubBytes(),t);var a=this.g.mul(r.S());var o=r.R().add(i.pub().mul(s));return o.eq(a)};EDDSA.prototype.hashInt=function e(){var t=this.hash();for(var r=0;r<arguments.length;r++)t.update(arguments[r]);return utils$5.intFromLE(t.digest()).umod(this.curve.n)};EDDSA.prototype.keyPair=function e(t){return new KeyPair(this,t)};EDDSA.prototype.keyFromPublic=function e(t){return KeyPair.fromPublic(this,t)};EDDSA.prototype.keyFromSecret=function e(t){return KeyPair.fromSecret(this,t)};EDDSA.prototype.genKeyPair=function e(t){if(!t)t={};var r=new HmacDRBG({hash:this.hash,pers:t.pers,persEnc:t.persEnc||"utf8",entropy:t.entropy||elliptic.rand(this.hash.hmacStrength),entropyEnc:t.entropy&&t.entropyEnc||"utf8",nonce:this.curve.n.toArray()});return this.keyFromSecret(r.generate(this.hash.outSize>>3))};EDDSA.prototype.makeSignature=function e(t){if(t instanceof Signature)return t;return new Signature(this,t)};EDDSA.prototype.encodePoint=function e(t){var r=t.getY().toArray("le",this.encodingLength);r[this.encodingLength-1]|=t.getX().isOdd()?128:0;return r};EDDSA.prototype.decodePoint=function e(t){t=utils$5.parseBytes(t);var r=t.length-1;var n=t.slice(0,r).concat(t[r]&~128);var i=(t[r]&128)!==0;var s=utils$5.intFromLE(n);return this.curve.pointFromY(s,i)};EDDSA.prototype.encodeInt=function e(t){return t.toArray("le",this.encodingLength)};EDDSA.prototype.decodeInt=function e(t){return utils$5.intFromLE(t)};EDDSA.prototype.isPoint=function e(t){return t instanceof this.pointClass};(function(e){var t=e;t.utils=utils$r;t.rand=brorand.exports;t.curve=curve;t.curves=curves$2;t.ec=ec;t.eddsa=eddsa})(elliptic$1);var sha3$2={};var binary={};var int={};(function(e){Object.defineProperty(e,"__esModule",{value:true});function t(e,t){var r=e>>>16&65535,n=e&65535;var i=t>>>16&65535,s=t&65535;return n*s+(r*s+n*i<<16>>>0)|0}e.mul=Math.imul||t;function r(e,t){return e+t|0}e.add=r;function n(e,t){return e-t|0}e.sub=n;function i(e,t){return e<<t|e>>>32-t}e.rotl=i;function s(e,t){return e<<32-t|e>>>t}e.rotr=s;function a(e){return typeof e==="number"&&isFinite(e)&&Math.floor(e)===e}e.isInteger=Number.isInteger||a;e.MAX_SAFE_INTEGER=9007199254740991;e.isSafeInteger=function(t){return e.isInteger(t)&&(t>=-e.MAX_SAFE_INTEGER&&t<=e.MAX_SAFE_INTEGER)}})(int);Object.defineProperty(binary,"__esModule",{value:true});var int_1=int;function readInt16BE(e,t){if(t===void 0){t=0}return(e[t+0]<<8|e[t+1])<<16>>16}binary.readInt16BE=readInt16BE;function readUint16BE(e,t){if(t===void 0){t=0}return(e[t+0]<<8|e[t+1])>>>0}binary.readUint16BE=readUint16BE;function readInt16LE(e,t){if(t===void 0){t=0}return(e[t+1]<<8|e[t])<<16>>16}binary.readInt16LE=readInt16LE;function readUint16LE(e,t){if(t===void 0){t=0}return(e[t+1]<<8|e[t])>>>0}binary.readUint16LE=readUint16LE;function writeUint16BE(e,t,r){if(t===void 0){t=new Uint8Array(2)}if(r===void 0){r=0}t[r+0]=e>>>8;t[r+1]=e>>>0;return t}binary.writeUint16BE=writeUint16BE;binary.writeInt16BE=writeUint16BE;function writeUint16LE(e,t,r){if(t===void 0){t=new Uint8Array(2)}if(r===void 0){r=0}t[r+0]=e>>>0;t[r+1]=e>>>8;return t}binary.writeUint16LE=writeUint16LE;binary.writeInt16LE=writeUint16LE;function readInt32BE(e,t){if(t===void 0){t=0}return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}binary.readInt32BE=readInt32BE;function readUint32BE(e,t){if(t===void 0){t=0}return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}binary.readUint32BE=readUint32BE;function readInt32LE(e,t){if(t===void 0){t=0}return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]}binary.readInt32LE=readInt32LE;function readUint32LE(e,t){if(t===void 0){t=0}return(e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t])>>>0}binary.readUint32LE=readUint32LE;function writeUint32BE(e,t,r){if(t===void 0){t=new Uint8Array(4)}if(r===void 0){r=0}t[r+0]=e>>>24;t[r+1]=e>>>16;t[r+2]=e>>>8;t[r+3]=e>>>0;return t}binary.writeUint32BE=writeUint32BE;binary.writeInt32BE=writeUint32BE;function writeUint32LE(e,t,r){if(t===void 0){t=new Uint8Array(4)}if(r===void 0){r=0}t[r+0]=e>>>0;t[r+1]=e>>>8;t[r+2]=e>>>16;t[r+3]=e>>>24;return t}binary.writeUint32LE=writeUint32LE;binary.writeInt32LE=writeUint32LE;function readInt64BE(e,t){if(t===void 0){t=0}var r=readInt32BE(e,t);var n=readInt32BE(e,t+4);return r*4294967296+n-(n>>31)*4294967296}binary.readInt64BE=readInt64BE;function readUint64BE(e,t){if(t===void 0){t=0}var r=readUint32BE(e,t);var n=readUint32BE(e,t+4);return r*4294967296+n}binary.readUint64BE=readUint64BE;function readInt64LE(e,t){if(t===void 0){t=0}var r=readInt32LE(e,t);var n=readInt32LE(e,t+4);return n*4294967296+r-(r>>31)*4294967296}binary.readInt64LE=readInt64LE;function readUint64LE(e,t){if(t===void 0){t=0}var r=readUint32LE(e,t);var n=readUint32LE(e,t+4);return n*4294967296+r}binary.readUint64LE=readUint64LE;function writeUint64BE(e,t,r){if(t===void 0){t=new Uint8Array(8)}if(r===void 0){r=0}writeUint32BE(e/4294967296>>>0,t,r);writeUint32BE(e>>>0,t,r+4);return t}binary.writeUint64BE=writeUint64BE;binary.writeInt64BE=writeUint64BE;function writeUint64LE(e,t,r){if(t===void 0){t=new Uint8Array(8)}if(r===void 0){r=0}writeUint32LE(e>>>0,t,r);writeUint32LE(e/4294967296>>>0,t,r+4);return t}binary.writeUint64LE=writeUint64LE;binary.writeInt64LE=writeUint64LE;function readUintBE$1(e,t,r){if(r===void 0){r=0}if(e%8!==0){throw new Error("readUintBE supports only bitLengths divisible by 8")}if(e/8>t.length-r){throw new Error("readUintBE: array is too short for the given bitLength")}var n=0;var i=1;for(var s=e/8+r-1;s>=r;s--){n+=t[s]*i;i*=256}return n}binary.readUintBE=readUintBE$1;function readUintLE$1(e,t,r){if(r===void 0){r=0}if(e%8!==0){throw new Error("readUintLE supports only bitLengths divisible by 8")}if(e/8>t.length-r){throw new Error("readUintLE: array is too short for the given bitLength")}var n=0;var i=1;for(var s=r;s<r+e/8;s++){n+=t[s]*i;i*=256}return n}binary.readUintLE=readUintLE$1;function writeUintBE$1(e,t,r,n){if(r===void 0){r=new Uint8Array(e/8)}if(n===void 0){n=0}if(e%8!==0){throw new Error("writeUintBE supports only bitLengths divisible by 8")}if(!int_1.isSafeInteger(t)){throw new Error("writeUintBE value must be an integer")}var i=1;for(var s=e/8+n-1;s>=n;s--){r[s]=t/i&255;i*=256}return r}binary.writeUintBE=writeUintBE$1;function writeUintLE$1(e,t,r,n){if(r===void 0){r=new Uint8Array(e/8)}if(n===void 0){n=0}if(e%8!==0){throw new Error("writeUintLE supports only bitLengths divisible by 8")}if(!int_1.isSafeInteger(t)){throw new Error("writeUintLE value must be an integer")}var i=1;for(var s=n;s<n+e/8;s++){r[s]=t/i&255;i*=256}return r}binary.writeUintLE=writeUintLE$1;function readFloat32BE(e,t){if(t===void 0){t=0}var r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.getFloat32(t)}binary.readFloat32BE=readFloat32BE;function readFloat32LE(e,t){if(t===void 0){t=0}var r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.getFloat32(t,true)}binary.readFloat32LE=readFloat32LE;function readFloat64BE(e,t){if(t===void 0){t=0}var r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.getFloat64(t)}binary.readFloat64BE=readFloat64BE;function readFloat64LE(e,t){if(t===void 0){t=0}var r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.getFloat64(t,true)}binary.readFloat64LE=readFloat64LE;function writeFloat32BE(e,t,r){if(t===void 0){t=new Uint8Array(4)}if(r===void 0){r=0}var n=new DataView(t.buffer,t.byteOffset,t.byteLength);n.setFloat32(r,e);return t}binary.writeFloat32BE=writeFloat32BE;function writeFloat32LE(e,t,r){if(t===void 0){t=new Uint8Array(4)}if(r===void 0){r=0}var n=new DataView(t.buffer,t.byteOffset,t.byteLength);n.setFloat32(r,e,true);return t}binary.writeFloat32LE=writeFloat32LE;function writeFloat64BE(e,t,r){if(t===void 0){t=new Uint8Array(8)}if(r===void 0){r=0}var n=new DataView(t.buffer,t.byteOffset,t.byteLength);n.setFloat64(r,e);return t}binary.writeFloat64BE=writeFloat64BE;function writeFloat64LE(e,t,r){if(t===void 0){t=new Uint8Array(8)}if(r===void 0){r=0}var n=new DataView(t.buffer,t.byteOffset,t.byteLength);n.setFloat64(r,e,true);return t}binary.writeFloat64LE=writeFloat64LE;var wipe$1={};Object.defineProperty(wipe$1,"__esModule",{value:true});function wipe(e){for(var t=0;t<e.length;t++){e[t]=0}return e}wipe$1.wipe=wipe;var __extends=commonjsGlobal&&commonjsGlobal.__extends||function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(sha3$2,"__esModule",{value:true});var binary_1=binary;var wipe_1=wipe$1;var Keccak=function(){function e(e){if(e===void 0){e=32}this.capacity=e;this._sh=new Int32Array(25);this._sl=new Int32Array(25);this._state=new Uint8Array(200);this._pos=0;this._finished=false;this.clean=this.reset;if(e<=0||e>128){throw new Error("SHA3: incorrect capacity")}this.blockSize=200-e}e.prototype.reset=function(){wipe_1.wipe(this._sh);wipe_1.wipe(this._sl);wipe_1.wipe(this._state);this._pos=0;this._finished=false;return this};e.prototype.update=function(e){if(this._finished){throw new Error("SHA3: can't update because hash was finished")}for(var t=0;t<e.length;t++){this._state[this._pos++]^=e[t];if(this._pos>=this.blockSize){keccakf(this._sh,this._sl,this._state);this._pos=0}}return this};e.prototype._padAndPermute=function(e){this._state[this._pos]^=e;this._state[this.blockSize-1]^=128;keccakf(this._sh,this._sl,this._state);this._finished=true;this._pos=0};e.prototype._squeeze=function(e){if(!this._finished){throw new Error("SHA3: squeezing before padAndPermute")}for(var t=0;t<e.length;t++){if(this._pos===this.blockSize){keccakf(this._sh,this._sl,this._state);this._pos=0}e[t]=this._state[this._pos++]}};return e}();sha3$2.Keccak=Keccak;var SHA3=function(e){__extends(t,e);function t(t){if(t===void 0){t=32}var r=e.call(this,t*2)||this;r.digestLength=t;return r}t.prototype.finish=function(e){if(!this._finished){this._padAndPermute(6)}else{this._pos=0}this._squeeze(e);return this};t.prototype.digest=function(){var e=new Uint8Array(this.digestLength);this.finish(e);return e};t.prototype.saveState=function(){if(this._finished){throw new Error("SHA3: cannot save finished state")}return new Uint8Array(this._state.subarray(0,this._pos))};t.prototype.restoreState=function(e){this._state.set(e);this._pos=e.length;this._finished=false;return this};t.prototype.cleanSavedState=function(e){wipe_1.wipe(e)};return t}(Keccak);sha3$2.SHA3=SHA3;var SHA3224=function(e){__extends(t,e);function t(){return e.call(this,224/8)||this}return t}(SHA3);sha3$2.SHA3224=SHA3224;var SHA3256=function(e){__extends(t,e);function t(){return e.call(this,256/8)||this}return t}(SHA3);sha3$2.SHA3256=SHA3256;var SHA3384=function(e){__extends(t,e);function t(){return e.call(this,384/8)||this}return t}(SHA3);sha3$2.SHA3384=SHA3384;var SHA3512=function(e){__extends(t,e);function t(){return e.call(this,512/8)||this}return t}(SHA3);sha3$2.SHA3512=SHA3512;function hash$1(e,t){var r=new SHA3(e);r.update(t);var n=r.digest();r.clean();return n}sha3$2.hash=hash$1;sha3$2.hash224=function(e){return hash$1(224/8,e)};sha3$2.hash256=function(e){return hash$1(256/8,e)};sha3$2.hash384=function(e){return hash$1(384/8,e)};sha3$2.hash512=function(e){return hash$1(512/8,e)};var SHAKE=function(e){__extends(t,e);function t(t){var r=e.call(this,t/8*2)||this;r.bitSize=t;return r}t.prototype.stream=function(e){if(!this._finished){this._padAndPermute(31)}this._squeeze(e)};return t}(Keccak);sha3$2.SHAKE=SHAKE;var SHAKE128=function(e){__extends(t,e);function t(){return e.call(this,128)||this}return t}(SHAKE);sha3$2.SHAKE128=SHAKE128;var SHAKE256=function(e){__extends(t,e);function t(){return e.call(this,256)||this}return t}(SHAKE);sha3$2.SHAKE256=SHAKE256;var RNDC_HI=new Int32Array([0,0,2147483648,2147483648,0,0,2147483648,2147483648,0,0,0,0,0,2147483648,2147483648,2147483648,2147483648,2147483648,0,2147483648,2147483648,2147483648,0,2147483648]);var RNDC_LO=new Int32Array([1,32898,32906,2147516416,32907,2147483649,2147516545,32777,138,136,2147516425,2147483658,2147516555,139,32905,32771,32770,128,32778,2147483658,2147516545,32896,2147483649,2147516424]);function keccakf(e,t,r){var n,i,s,a,o;var f,c,u,l,h;var d,p;for(var y=0;y<25;y++){t[y]=binary_1.readUint32LE(r,y*8);e[y]=binary_1.readUint32LE(r,y*8+4)}for(var m=0;m<24;m++){n=e[0]^e[5]^e[10]^e[15]^e[20];i=e[1]^e[6]^e[11]^e[16]^e[21];s=e[2]^e[7]^e[12]^e[17]^e[22];a=e[3]^e[8]^e[13]^e[18]^e[23];o=e[4]^e[9]^e[14]^e[19]^e[24];f=t[0]^t[5]^t[10]^t[15]^t[20];c=t[1]^t[6]^t[11]^t[16]^t[21];u=t[2]^t[7]^t[12]^t[17]^t[22];l=t[3]^t[8]^t[13]^t[18]^t[23];h=t[4]^t[9]^t[14]^t[19]^t[24];d=o^(i<<1|c>>>32-1);p=h^(c<<1|i>>>32-1);e[0]^=d;e[5]^=d;e[10]^=d;e[15]^=d;e[20]^=d;t[0]^=p;t[5]^=p;t[10]^=p;t[15]^=p;t[20]^=p;d=n^(s<<1|u>>>32-1);p=f^(u<<1|s>>>32-1);e[1]^=d;e[6]^=d;e[11]^=d;e[16]^=d;e[21]^=d;t[1]^=p;t[6]^=p;t[11]^=p;t[16]^=p;t[21]^=p;d=i^(a<<1|l>>>32-1);p=c^(l<<1|a>>>32-1);e[2]^=d;e[7]^=d;e[12]^=d;e[17]^=d;e[22]^=d;t[2]^=p;t[7]^=p;t[12]^=p;t[17]^=p;t[22]^=p;d=s^(o<<1|h>>>32-1);p=u^(h<<1|o>>>32-1);e[3]^=d;t[3]^=p;e[8]^=d;t[8]^=p;e[13]^=d;t[13]^=p;e[18]^=d;t[18]^=p;e[23]^=d;t[23]^=p;d=a^(n<<1|f>>>32-1);p=l^(f<<1|n>>>32-1);e[4]^=d;e[9]^=d;e[14]^=d;e[19]^=d;e[24]^=d;t[4]^=p;t[9]^=p;t[14]^=p;t[19]^=p;t[24]^=p;d=e[1];p=t[1];n=e[10];f=t[10];e[10]=d<<1|p>>>32-1;t[10]=p<<1|d>>>32-1;d=n;p=f;n=e[7];f=t[7];e[7]=d<<3|p>>>32-3;t[7]=p<<3|d>>>32-3;d=n;p=f;n=e[11];f=t[11];e[11]=d<<6|p>>>32-6;t[11]=p<<6|d>>>32-6;d=n;p=f;n=e[17];f=t[17];e[17]=d<<10|p>>>32-10;t[17]=p<<10|d>>>32-10;d=n;p=f;n=e[18];f=t[18];e[18]=d<<15|p>>>32-15;t[18]=p<<15|d>>>32-15;d=n;p=f;n=e[3];f=t[3];e[3]=d<<21|p>>>32-21;t[3]=p<<21|d>>>32-21;d=n;p=f;n=e[5];f=t[5];e[5]=d<<28|p>>>32-28;t[5]=p<<28|d>>>32-28;d=n;p=f;n=e[16];f=t[16];e[16]=p<<4|d>>>32-4;t[16]=d<<4|p>>>32-4;d=n;p=f;n=e[8];f=t[8];e[8]=p<<13|d>>>32-13;t[8]=d<<13|p>>>32-13;d=n;p=f;n=e[21];f=t[21];e[21]=p<<23|d>>>32-23;t[21]=d<<23|p>>>32-23;d=n;p=f;n=e[24];f=t[24];e[24]=d<<2|p>>>32-2;t[24]=p<<2|d>>>32-2;d=n;p=f;n=e[4];f=t[4];e[4]=d<<14|p>>>32-14;t[4]=p<<14|d>>>32-14;d=n;p=f;n=e[15];f=t[15];e[15]=d<<27|p>>>32-27;t[15]=p<<27|d>>>32-27;d=n;p=f;n=e[23];f=t[23];e[23]=p<<9|d>>>32-9;t[23]=d<<9|p>>>32-9;d=n;p=f;n=e[19];f=t[19];e[19]=p<<24|d>>>32-24;t[19]=d<<24|p>>>32-24;d=n;p=f;n=e[13];f=t[13];e[13]=d<<8|p>>>32-8;t[13]=p<<8|d>>>32-8;d=n;p=f;n=e[12];f=t[12];e[12]=d<<25|p>>>32-25;t[12]=p<<25|d>>>32-25;d=n;p=f;n=e[2];f=t[2];e[2]=p<<11|d>>>32-11;t[2]=d<<11|p>>>32-11;d=n;p=f;n=e[20];f=t[20];e[20]=p<<30|d>>>32-30;t[20]=d<<30|p>>>32-30;d=n;p=f;n=e[14];f=t[14];e[14]=d<<18|p>>>32-18;t[14]=p<<18|d>>>32-18;d=n;p=f;n=e[22];f=t[22];e[22]=p<<7|d>>>32-7;t[22]=d<<7|p>>>32-7;d=n;p=f;n=e[9];f=t[9];e[9]=p<<29|d>>>32-29;t[9]=d<<29|p>>>32-29;d=n;p=f;n=e[6];f=t[6];e[6]=d<<20|p>>>32-20;t[6]=p<<20|d>>>32-20;d=n;p=f;n=e[1];f=t[1];e[1]=p<<12|d>>>32-12;t[1]=d<<12|p>>>32-12;d=n;p=f;n=e[0];i=e[1];s=e[2];a=e[3];o=e[4];e[0]^=~i&s;e[1]^=~s&a;e[2]^=~a&o;e[3]^=~o&n;e[4]^=~n&i;f=t[0];c=t[1];u=t[2];l=t[3];h=t[4];t[0]^=~c&u;t[1]^=~u&l;t[2]^=~l&h;t[3]^=~h&f;t[4]^=~f&c;n=e[5];i=e[6];s=e[7];a=e[8];o=e[9];e[5]^=~i&s;e[6]^=~s&a;e[7]^=~a&o;e[8]^=~o&n;e[9]^=~n&i;f=t[5];c=t[6];u=t[7];l=t[8];h=t[9];t[5]^=~c&u;t[6]^=~u&l;t[7]^=~l&h;t[8]^=~h&f;t[9]^=~f&c;n=e[10];i=e[11];s=e[12];a=e[13];o=e[14];e[10]^=~i&s;e[11]^=~s&a;e[12]^=~a&o;e[13]^=~o&n;e[14]^=~n&i;f=t[10];c=t[11];u=t[12];l=t[13];h=t[14];t[10]^=~c&u;t[11]^=~u&l;t[12]^=~l&h;t[13]^=~h&f;t[14]^=~f&c;n=e[15];i=e[16];s=e[17];a=e[18];o=e[19];e[15]^=~i&s;e[16]^=~s&a;e[17]^=~a&o;e[18]^=~o&n;e[19]^=~n&i;f=t[15];c=t[16];u=t[17];l=t[18];h=t[19];t[15]^=~c&u;t[16]^=~u&l;t[17]^=~l&h;t[18]^=~h&f;t[19]^=~f&c;n=e[20];i=e[21];s=e[22];a=e[23];o=e[24];e[20]^=~i&s;e[21]^=~s&a;e[22]^=~a&o;e[23]^=~o&n;e[24]^=~n&i;f=t[20];c=t[21];u=t[22];l=t[23];h=t[24];t[20]^=~c&u;t[21]^=~u&l;t[22]^=~l&h;t[23]^=~h&f;t[24]^=~f&c;e[0]^=RNDC_HI[m];t[0]^=RNDC_LO[m]}for(var y=0;y<25;y++){binary_1.writeUint32LE(t[y],r,y*8);binary_1.writeUint32LE(e[y],r,y*8+4)}}var des$1={};var utils$4={};utils$4.readUInt32BE=function e(t,r){var n=t[0+r]<<24|t[1+r]<<16|t[2+r]<<8|t[3+r];return n>>>0};utils$4.writeUInt32BE=function e(t,r,n){t[0+n]=r>>>24;t[1+n]=r>>>16&255;t[2+n]=r>>>8&255;t[3+n]=r&255};utils$4.ip=function e(t,r,n,i){var s=0;var a=0;for(var o=6;o>=0;o-=2){for(var f=0;f<=24;f+=8){s<<=1;s|=r>>>f+o&1}for(var f=0;f<=24;f+=8){s<<=1;s|=t>>>f+o&1}}for(var o=6;o>=0;o-=2){for(var f=1;f<=25;f+=8){a<<=1;a|=r>>>f+o&1}for(var f=1;f<=25;f+=8){a<<=1;a|=t>>>f+o&1}}n[i+0]=s>>>0;n[i+1]=a>>>0};utils$4.rip=function e(t,r,n,i){var s=0;var a=0;for(var o=0;o<4;o++){for(var f=24;f>=0;f-=8){s<<=1;s|=r>>>f+o&1;s<<=1;s|=t>>>f+o&1}}for(var o=4;o<8;o++){for(var f=24;f>=0;f-=8){a<<=1;a|=r>>>f+o&1;a<<=1;a|=t>>>f+o&1}}n[i+0]=s>>>0;n[i+1]=a>>>0};utils$4.pc1=function e(t,r,n,i){var s=0;var a=0;for(var o=7;o>=5;o--){for(var f=0;f<=24;f+=8){s<<=1;s|=r>>f+o&1}for(var f=0;f<=24;f+=8){s<<=1;s|=t>>f+o&1}}for(var f=0;f<=24;f+=8){s<<=1;s|=r>>f+o&1}for(var o=1;o<=3;o++){for(var f=0;f<=24;f+=8){a<<=1;a|=r>>f+o&1}for(var f=0;f<=24;f+=8){a<<=1;a|=t>>f+o&1}}for(var f=0;f<=24;f+=8){a<<=1;a|=t>>f+o&1}n[i+0]=s>>>0;n[i+1]=a>>>0};utils$4.r28shl=function e(t,r){return t<<r&268435455|t>>>28-r};var pc2table=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];utils$4.pc2=function e(t,r,n,i){var s=0;var a=0;var o=pc2table.length>>>1;for(var f=0;f<o;f++){s<<=1;s|=t>>>pc2table[f]&1}for(var f=o;f<pc2table.length;f++){a<<=1;a|=r>>>pc2table[f]&1}n[i+0]=s>>>0;n[i+1]=a>>>0};utils$4.expand=function e(t,r,n){var i=0;var s=0;i=(t&1)<<5|t>>>27;for(var a=23;a>=15;a-=4){i<<=6;i|=t>>>a&63}for(var a=11;a>=3;a-=4){s|=t>>>a&63;s<<=6}s|=(t&31)<<1|t>>>31;r[n+0]=i>>>0;r[n+1]=s>>>0};var sTable=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];utils$4.substitute=function e(t,r){var n=0;for(var i=0;i<4;i++){var s=t>>>18-i*6&63;var a=sTable[i*64+s];n<<=4;n|=a}for(var i=0;i<4;i++){var s=r>>>18-i*6&63;var a=sTable[4*64+i*64+s];n<<=4;n|=a}return n>>>0};var permuteTable=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];utils$4.permute=function e(t){var r=0;for(var n=0;n<permuteTable.length;n++){r<<=1;r|=t>>>permuteTable[n]&1}return r>>>0};utils$4.padSplit=function e(t,r,n){var i=t.toString(2);while(i.length<r)i="0"+i;var s=[];for(var a=0;a<r;a+=n)s.push(i.slice(a,a+n));return s.join(" ")};var assert$3=minimalisticAssert;function Cipher$2(e){this.options=e;this.type=this.options.type;this.blockSize=8;this._init();this.buffer=new Array(this.blockSize);this.bufferOff=0;this.padding=e.padding!==false}var cipher=Cipher$2;Cipher$2.prototype._init=function e(){};Cipher$2.prototype.update=function e(t){if(t.length===0)return[];if(this.type==="decrypt")return this._updateDecrypt(t);else return this._updateEncrypt(t)};Cipher$2.prototype._buffer=function e(t,r){var n=Math.min(this.buffer.length-this.bufferOff,t.length-r);for(var i=0;i<n;i++)this.buffer[this.bufferOff+i]=t[r+i];this.bufferOff+=n;return n};Cipher$2.prototype._flushBuffer=function e(t,r){this._update(this.buffer,0,t,r);this.bufferOff=0;return this.blockSize};Cipher$2.prototype._updateEncrypt=function e(t){var r=0;var n=0;var i=(this.bufferOff+t.length)/this.blockSize|0;var s=new Array(i*this.blockSize);if(this.bufferOff!==0){r+=this._buffer(t,r);if(this.bufferOff===this.buffer.length)n+=this._flushBuffer(s,n)}var a=t.length-(t.length-r)%this.blockSize;for(;r<a;r+=this.blockSize){this._update(t,r,s,n);n+=this.blockSize}for(;r<t.length;r++,this.bufferOff++)this.buffer[this.bufferOff]=t[r];return s};Cipher$2.prototype._updateDecrypt=function e(t){var r=0;var n=0;var i=Math.ceil((this.bufferOff+t.length)/this.blockSize)-1;var s=new Array(i*this.blockSize);for(;i>0;i--){r+=this._buffer(t,r);n+=this._flushBuffer(s,n)}r+=this._buffer(t,r);return s};Cipher$2.prototype.final=function e(t){var r;if(t)r=this.update(t);var n;if(this.type==="encrypt")n=this._finalEncrypt();else n=this._finalDecrypt();if(r)return r.concat(n);else return n};Cipher$2.prototype._pad=function e(t,r){if(r===0)return false;while(r<t.length)t[r++]=0;return true};Cipher$2.prototype._finalEncrypt=function e(){if(!this._pad(this.buffer,this.bufferOff))return[];var t=new Array(this.blockSize);this._update(this.buffer,0,t,0);return t};Cipher$2.prototype._unpad=function e(t){return t};Cipher$2.prototype._finalDecrypt=function e(){assert$3.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var t=new Array(this.blockSize);this._flushBuffer(t,0);return this._unpad(t)};var assert$2=minimalisticAssert;var inherits$2=inherits_browser.exports;var utils$3=utils$4;var Cipher$1=cipher;function DESState(){this.tmp=new Array(2);this.keys=null}function DES$1(e){Cipher$1.call(this,e);var t=new DESState;this._desState=t;this.deriveKeys(t,e.key)}inherits$2(DES$1,Cipher$1);var des=DES$1;DES$1.create=function e(t){return new DES$1(t)};var shiftTable=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];DES$1.prototype.deriveKeys=function e(t,r){t.keys=new Array(16*2);assert$2.equal(r.length,this.blockSize,"Invalid key length");var n=utils$3.readUInt32BE(r,0);var i=utils$3.readUInt32BE(r,4);utils$3.pc1(n,i,t.tmp,0);n=t.tmp[0];i=t.tmp[1];for(var s=0;s<t.keys.length;s+=2){var a=shiftTable[s>>>1];n=utils$3.r28shl(n,a);i=utils$3.r28shl(i,a);utils$3.pc2(n,i,t.keys,s)}};DES$1.prototype._update=function e(t,r,n,i){var s=this._desState;var a=utils$3.readUInt32BE(t,r);var o=utils$3.readUInt32BE(t,r+4);utils$3.ip(a,o,s.tmp,0);a=s.tmp[0];o=s.tmp[1];if(this.type==="encrypt")this._encrypt(s,a,o,s.tmp,0);else this._decrypt(s,a,o,s.tmp,0);a=s.tmp[0];o=s.tmp[1];utils$3.writeUInt32BE(n,a,i);utils$3.writeUInt32BE(n,o,i+4)};DES$1.prototype._pad=function e(t,r){if(this.padding===false){return false}var n=t.length-r;for(var i=r;i<t.length;i++)t[i]=n;return true};DES$1.prototype._unpad=function e(t){if(this.padding===false){return t}var r=t[t.length-1];for(var n=t.length-r;n<t.length;n++)assert$2.equal(t[n],r);return t.slice(0,t.length-r)};DES$1.prototype._encrypt=function e(t,r,n,i,s){var a=r;var o=n;for(var f=0;f<t.keys.length;f+=2){var c=t.keys[f];var u=t.keys[f+1];utils$3.expand(o,t.tmp,0);c^=t.tmp[0];u^=t.tmp[1];var l=utils$3.substitute(c,u);var h=utils$3.permute(l);var d=o;o=(a^h)>>>0;a=d}utils$3.rip(o,a,i,s)};DES$1.prototype._decrypt=function e(t,r,n,i,s){var a=n;var o=r;for(var f=t.keys.length-2;f>=0;f-=2){var c=t.keys[f];var u=t.keys[f+1];utils$3.expand(a,t.tmp,0);c^=t.tmp[0];u^=t.tmp[1];var l=utils$3.substitute(c,u);var h=utils$3.permute(l);var d=a;a=(o^h)>>>0;o=d}utils$3.rip(a,o,i,s)};var cbc={};var assert$1=minimalisticAssert;var inherits$1=inherits_browser.exports;var proto={};function CBCState(e){assert$1.equal(e.length,8,"Invalid IV length");this.iv=new Array(8);for(var t=0;t<this.iv.length;t++)this.iv[t]=e[t]}function instantiate$2(e){function t(t){e.call(this,t);this._cbcInit()}inherits$1(t,e);var r=Object.keys(proto);for(var n=0;n<r.length;n++){var i=r[n];t.prototype[i]=proto[i]}t.create=function e(r){return new t(r)};return t}cbc.instantiate=instantiate$2;proto._cbcInit=function e(){var t=new CBCState(this.options.iv);this._cbcState=t};proto._update=function e(t,r,n,i){var s=this._cbcState;var a=this.constructor.super_.prototype;var o=s.iv;if(this.type==="encrypt"){for(var f=0;f<this.blockSize;f++)o[f]^=t[r+f];a._update.call(this,o,0,n,i);for(var f=0;f<this.blockSize;f++)o[f]=n[i+f]}else{a._update.call(this,t,r,n,i);for(var f=0;f<this.blockSize;f++)n[i+f]^=o[f];for(var f=0;f<this.blockSize;f++)o[f]=t[r+f]}};var assert=minimalisticAssert;var inherits=inherits_browser.exports;var Cipher=cipher;var DES=des;function EDEState(e,t){assert.equal(t.length,24,"Invalid key length");var r=t.slice(0,8);var n=t.slice(8,16);var i=t.slice(16,24);if(e==="encrypt"){this.ciphers=[DES.create({type:"encrypt",key:r}),DES.create({type:"decrypt",key:n}),DES.create({type:"encrypt",key:i})]}else{this.ciphers=[DES.create({type:"decrypt",key:i}),DES.create({type:"encrypt",key:n}),DES.create({type:"decrypt",key:r})]}}function EDE(e){Cipher.call(this,e);var t=new EDEState(this.type,this.options.key);this._edeState=t}inherits(EDE,Cipher);var ede=EDE;EDE.create=function e(t){return new EDE(t)};EDE.prototype._update=function e(t,r,n,i){var s=this._edeState;s.ciphers[0]._update(t,r,n,i);s.ciphers[1]._update(n,i,n,i);s.ciphers[2]._update(n,i,n,i)};EDE.prototype._pad=DES.prototype._pad;EDE.prototype._unpad=DES.prototype._unpad;des$1.utils=utils$4;des$1.Cipher=cipher;des$1.DES=des;des$1.CBC=cbc;des$1.EDE=ede;(function(e){var t=require$$0$2;var r=require$$0$1;var n=require$$2$1;var i=require$$3$1;var s=build$1;var a=require$$5;var o=elliptic$1;var f=sha3$2;var c=des$1;function u(e){var t=Object.create(null);if(e){Object.keys(e).forEach((function(r){if(r!=="default"){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:true,get:function(){return e[r]}})}}))}t.default=e;return Object.freeze(t)}var l=u(t);var h=u(a);var d=u(o);var p=u(c);let y={};if(typeof self!=="undefined"){y=self}e.nativeCrypto=y["msCrypto"]||y.crypto||{};e.nativeSubtle=null;try{e.nativeSubtle=(e.nativeCrypto===null||e.nativeCrypto===void 0?void 0:e.nativeCrypto.subtle)||(e.nativeCrypto===null||e.nativeCrypto===void 0?void 0:e.nativeCrypto["webkitSubtle"])||null}catch(e){console.warn("Cannot get subtle from crypto",e)}function m(t){e.nativeCrypto=t;e.nativeSubtle=t.subtle}class g{static get enabled(){return typeof self!=="undefined"&&self.PV_WEBCRYPTO_LINER_LOG}static log(...e){if(this.enabled){console.log(...e)}}static error(...e){if(this.enabled){console.error(...e)}}static info(...e){if(this.enabled){console.info(...e)}}static warn(...e){if(this.enabled){console.warn(...e)}}static trace(...e){if(this.enabled){console.trace(...e)}}}var b;(function(e){e["Unknown"]="Unknown";e["IE"]="Internet Explorer";e["Safari"]="Safari";e["Edge"]="Edge";e["Chrome"]="Chrome";e["Firefox"]="Firefox Mozilla";e["Mobile"]="Mobile"})(b||(b={}));function A(){const e={name:b.Unknown,version:"0"};if(typeof self==="undefined"){return e}const t=self.navigator.userAgent;const r=/edge\/([\d.]+)/i.exec(t);if(r){e.name=b.Edge;e.version=r[1]}else if(/msie/i.test(t)){e.name=b.IE;e.version=/msie ([\d.]+)/i.exec(t)[1]}else if(/Trident/i.test(t)){e.name=b.IE;e.version=/rv:([\d.]+)/i.exec(t)[1]}else if(/chrome/i.test(t)){e.name=b.Chrome;e.version=/chrome\/([\d.]+)/i.exec(t)[1]}else if(/firefox/i.test(t)){e.name=b.Firefox;e.version=/firefox\/([\d.]+)/i.exec(t)[1]}else if(/mobile/i.test(t)){e.name=b.Mobile;e.version=/mobile\/([\w]+)/i.exec(t)[1]}else if(/safari/i.test(t)){e.name=b.Safari;e.version=/version\/([\d.]+)/i.exec(t)[1]}return e}function w(...e){const t=new Uint8Array(e.map((e=>e.length)).reduce(((e,t)=>e+t)));let r=0;e.forEach((e=>{for(let n=0;n<e.length;n++){t[r+n]=e[n]}r+=e.length}));return t}class E extends l.CryptoKey{constructor(e,t,r,n){super();this.extractable=t;this.type=r;this.usages=n;this.algorithm=Object.assign({},e)}}function v(e,t){return e.name.toUpperCase()===t.toUpperCase()}class _ extends E{constructor(e,t,r,n){super(e,t,"secret",r);this.raw=n}toJSON(){const e={kty:"oct",alg:this.getJwkAlgorithm(),k:s.Convert.ToBase64Url(this.raw),ext:this.extractable,key_ops:this.usages};return e}getJwkAlgorithm(){switch(this.algorithm.name.toUpperCase()){case"AES-CBC":return`A${this.algorithm.length}CBC`;case"AES-CTR":return`A${this.algorithm.length}CTR`;case"AES-GCM":return`A${this.algorithm.length}GCM`;case"AES-ECB":return`A${this.algorithm.length}ECB`;default:throw new l.AlgorithmError("Unsupported algorithm name")}}}class S{static checkCryptoKey(e){if(!(e instanceof _)){throw new TypeError("key: Is not AesCryptoKey")}}static generateKey(t,n,i){return r.__awaiter(this,void 0,void 0,(function*(){const r=e.nativeCrypto.getRandomValues(new Uint8Array(t.length/8));return new _(t,n,i,r)}))}static encrypt(e,t,n){return r.__awaiter(this,void 0,void 0,(function*(){return this.cipher(e,t,l.BufferSourceConverter.toUint8Array(n),true)}))}static decrypt(e,t,n){return r.__awaiter(this,void 0,void 0,(function*(){return this.cipher(e,t,l.BufferSourceConverter.toUint8Array(n),false)}))}static exportKey(e,t){return r.__awaiter(this,void 0,void 0,(function*(){switch(e){case"jwk":return t.toJSON();case"raw":return t.raw.buffer;default:throw new l.OperationError("format: Must be 'jwk' or 'raw'")}}))}static importKey(e,t,n,i,a){return r.__awaiter(this,void 0,void 0,(function*(){let e;if(l.isJWK(t)){e=s.Convert.FromBase64Url(t.k)}else{e=l.BufferSourceConverter.toArrayBuffer(t)}switch(e.byteLength<<3){case 128:case 192:case 256:break;default:throw new l.OperationError("keyData: Is wrong key length")}const r=new _({name:n.name,length:e.byteLength<<3},i,a,new Uint8Array(e));return r}))}static cipher(e,t,n,i){return r.__awaiter(this,void 0,void 0,(function*(){const r=i?"encrypt":"decrypt";let s;if(v(e,S.AesCBC)){const i=l.BufferSourceConverter.toUint8Array(e.iv);s=h.AES_CBC[r](n,t.raw,undefined,i)}else if(v(e,S.AesGCM)){const i=l.BufferSourceConverter.toUint8Array(e.iv);let a;if(e.additionalData){a=l.BufferSourceConverter.toUint8Array(e.additionalData)}const o=(e.tagLength||128)/8;s=h.AES_GCM[r](n,t.raw,i,a,o)}else if(v(e,S.AesECB)){s=h.AES_ECB[r](n,t.raw,true)}else{throw new l.OperationError(`algorithm: Is not recognized`)}return l.BufferSourceConverter.toArrayBuffer(s)}))}}S.AesCBC="AES-CBC";S.AesECB="AES-ECB";S.AesGCM="AES-GCM";class $ extends l.AesCbcProvider{onGenerateKey(e,t,n){return r.__awaiter(this,void 0,void 0,(function*(){return S.generateKey(e,t,n)}))}onEncrypt(e,t,n){return r.__awaiter(this,void 0,void 0,(function*(){return S.encrypt(e,t,n)}))}onDecrypt(e,t,n){return r.__awaiter(this,void 0,void 0,(function*(){return S.decrypt(e,t,n)}))}onExportKey(e,t){return r.__awaiter(this,void 0,void 0,(function*(){return S.exportKey(e,t)}))}onImportKey(e,t,n,i,s){return r.__awaiter(this,void 0,void 0,(function*(){return S.importKey(e,t,n,i,s)}))}checkCryptoKey(e,t){super.checkCryptoKey(e,t);S.checkCryptoKey(e)}}class T extends l.AesEcbProvider{onGenerateKey(e,t,n){return r.__awaiter(this,void 0,void 0,(function*(){return S.generateKey(e,t,n)}))}onEncrypt(e,t,n){return r.__awaiter(this,void 0,void 0,(function*(){return S.encrypt(e,t,n)}))}onDecrypt(e,t,n){return r.__awaiter(this,void 0,void 0,(function*(){return S.decrypt(e,t,n)}))}onExportKey(e,t){return r.__awaiter(this,void 0,void 0,(function*(){return S.exportKey(e,t)}))}onImportKey(e,t,n,i,s){return r.__awaiter(this,void 0,void 0,(function*(){return S.importKey(e,t,n,i,s)}))}checkCryptoKey(e,t){super.checkCryptoKey(e,t);S.checkCryptoKey(e)}}class I extends l.AesGcmProvider{onGenerateKey(e,t,n){return r.__awaiter(this,void 0,void 0,(function*(){return S.generateKey(e,t,n)}))}onEncrypt(e,t,n){return r.__awaiter(this,void 0,void 0,(function*(){return S.encrypt(e,t,n)}))}onDecrypt(e,t,n){return r.__awaiter(this,void 0,void 0,(function*(){return S.decrypt(e,t,n)}))}onExportKey(e,t){return r.__awaiter(this,void 0,void 0,(function*(){return S.exportKey(e,t)}))}onImportKey(e,t,n,i,s){return r.__awaiter(this,void 0,void 0,(function*(){return S.importKey(e,t,n,i,s)}))}checkCryptoKey(e,t){super.checkCryptoKey(e,t);S.checkCryptoKey(e)}}class C extends l.AesCtrProvider{onEncrypt(e,t,n){return r.__awaiter(this,void 0,void 0,(function*(){const r=new h.AES_CTR(t.raw,l.BufferSourceConverter.toUint8Array(e.counter)).encrypt(l.BufferSourceConverter.toUint8Array(n));return l.BufferSourceConverter.toArrayBuffer(r)}))}onDecrypt(e,t,n){return r.__awaiter(this,void 0,void 0,(function*(){const r=new h.AES_CTR(t.raw,l.BufferSourceConverter.toUint8Array(e.counter)).decrypt(l.BufferSourceConverter.toUint8Array(n));return l.BufferSourceConverter.toArrayBuffer(r)}))}onGenerateKey(e,t,n){return r.__awaiter(this,void 0,void 0,(function*(){return S.generateKey(e,t,n)}))}onExportKey(e,t){return r.__awaiter(this,void 0,void 0,(function*(){return S.exportKey(e,t)}))}onImportKey(e,t,n,i,s){return r.__awaiter(this,void 0,void 0,(function*(){return S.importKey(e,t,n,i,s)}))}checkCryptoKey(e,t){super.checkCryptoKey(e,t);S.checkCryptoKey(e)}}class P extends l.AesKwProvider{onEncrypt(e,t,n){return r.__awaiter(this,void 0,void 0,(function*(){throw new Error("Method not implemented.")}))}onDecrypt(e,t,n){return r.__awaiter(this,void 0,void 0,(function*(){throw new Error("Method not implemented.")}))}onGenerateKey(e,t,n){return r.__awaiter(this,void 0,void 0,(function*(){throw new Error("Method not implemented.")}))}onExportKey(e,t){return r.__awaiter(this,void 0,void 0,(function*(){throw new Error("Method not implemented.")}))}onImportKey(e,t,n,i,s){return r.__awaiter(this,void 0,void 0,(function*(){throw new Error("Method not implemented.")}))}checkCryptoKey(e,t){super.checkCryptoKey(e,t);S.checkCryptoKey(e)}}class R extends E{constructor(e,t,r,n,i){super(e,t,r,n);this.data=i}}class N{static checkCryptoKey(e){if(!(e instanceof R)){throw new TypeError("key: Is not RsaCryptoKey")}}static generateKey(t,n,i){return r.__awaiter(this,void 0,void 0,(function*(){const r={name:"RSA-PSS",hash:"SHA-256",publicExponent:t.publicExponent,modulusLength:t.modulusLength};const s=yield e.nativeSubtle.generateKey(r,true,["sign","verify"]);const a=new ge;const o=yield a.subtle.exportKey("pkcs8",s.privateKey);const f=yield a.subtle.importKey("pkcs8",o,t,n,i.filter((e=>this.privateUsages.includes(e))));const c=yield a.subtle.exportKey("spki",s.publicKey);const u=yield a.subtle.importKey("spki",c,t,true,i.filter((e=>this.publicUsages.includes(e))));return{privateKey:f,publicKey:u}}))}static exportKey(e,t){return r.__awaiter(this,void 0,void 0,(function*(){switch(e){case"pkcs8":return this.exportPkcs8Key(t);case"spki":return this.exportSpkiKey(t);case"jwk":return this.exportJwkKey(t);default:throw new l.OperationError("format: Must be 'jwk', 'pkcs8' or 'spki'")}}))}static importKey(e,t,n,i,s){return r.__awaiter(this,void 0,void 0,(function*(){let r;switch(e){case"pkcs8":r=this.importPkcs8Key(t);break;case"spki":r=this.importSpkiKey(t);break;case"jwk":r=this.importJwkKey(t);break;default:throw new l.OperationError("format: Must be 'jwk', 'pkcs8' or 'spki'")}const a=new R(Object.assign({publicExponent:r[1][1]===1?r[1].slice(1):r[1].slice(3),modulusLength:r[0].byteLength<<3},n),i,r.length===2?"public":"private",s,r);return a}))}static randomNonZeroValues(t){t=e.nativeCrypto.getRandomValues(t);return t.map((t=>{while(!t){t=e.nativeCrypto.getRandomValues(new Uint8Array(1))[0]}return t}))}static exportPkcs8Key(e){const t=new l.asn1.PrivateKeyInfo;t.privateKeyAlgorithm.algorithm="1.2.840.113549.1.1.1";t.privateKeyAlgorithm.parameters=null;t.privateKey=n.AsnConvert.serialize(this.exportAsmKey(e.data));return n.AsnConvert.serialize(t)}static importPkcs8Key(e){const t=n.AsnConvert.parse(e,l.asn1.PrivateKeyInfo);const r=n.AsnConvert.parse(t.privateKey,l.asn1.RsaPrivateKey);return this.importAsmKey(r)}static importSpkiKey(e){const t=n.AsnConvert.parse(e,l.asn1.PublicKeyInfo);const r=n.AsnConvert.parse(t.publicKey,l.asn1.RsaPublicKey);return this.importAsmKey(r)}static exportSpkiKey(e){const t=new l.asn1.RsaPublicKey;t.modulus=e.data[0].buffer;t.publicExponent=e.data[1][1]===1?e.data[1].buffer.slice(1):e.data[1].buffer.slice(3);const r=new l.asn1.PublicKeyInfo;r.publicKeyAlgorithm.algorithm="1.2.840.113549.1.1.1";r.publicKeyAlgorithm.parameters=null;r.publicKey=n.AsnConvert.serialize(t);return n.AsnConvert.serialize(r)}static importJwkKey(e){let t;if(e.d){t=i.JsonParser.fromJSON(e,{targetSchema:l.asn1.RsaPrivateKey})}else{t=i.JsonParser.fromJSON(e,{targetSchema:l.asn1.RsaPublicKey})}return this.importAsmKey(t)}static exportJwkKey(e){const t=this.exportAsmKey(e.data);const r=i.JsonSerializer.toJSON(t);r.ext=true;r.key_ops=e.usages;r.kty="RSA";r.alg=this.getJwkAlgorithm(e.algorithm);return r}static getJwkAlgorithm(e){switch(e.name.toUpperCase()){case"RSA-OAEP":{const t=/(\d+)$/.exec(e.hash.name)[1];return`RSA-OAEP${t!=="1"?`-${t}`:""}`}case"RSASSA-PKCS1-V1_5":return`RS${/(\d+)$/.exec(e.hash.name)[1]}`;case"RSA-PSS":return`PS${/(\d+)$/.exec(e.hash.name)[1]}`;case"RSAES-PKCS1-V1_5":return`PS1`;default:throw new l.OperationError("algorithm: Is not recognized")}}static exportAsmKey(e){let t;if(e.length>2){const r=new l.asn1.RsaPrivateKey;r.privateExponent=e[2].buffer;r.prime1=e[3].buffer;r.prime2=e[4].buffer;r.exponent1=e[5].buffer;r.exponent2=e[6].buffer;r.coefficient=e[7].buffer;t=r}else{t=new l.asn1.RsaPublicKey}t.modulus=e[0].buffer;t.publicExponent=e[1][1]===1?e[1].buffer.slice(1):e[1].buffer.slice(3);return t}static importAsmKey(e){const t=new Uint8Array(4-e.publicExponent.byteLength);const r=[new Uint8Array(e.modulus),w(t,new Uint8Array(e.publicExponent))];if(e instanceof l.asn1.RsaPrivateKey){r.push(new Uint8Array(e.privateExponent));r.push(new Uint8Array(e.prime1));r.push(new Uint8Array(e.prime2));r.push(new Uint8Array(e.exponent1));r.push(new Uint8Array(e.exponent2));r.push(new Uint8Array(e.coefficient))}return r}}N.RsaSsa="RSASSA-PKCS1-v1_5";N.RsaPss="RSA-PSS";N.RsaOaep="RSA-OAEP";N.privateUsages=["sign","decrypt","unwrapKey"];N.publicUsages=["verify","encrypt","wrapKey"];class k{static getDigest(e){switch(e){case"SHA-1":return new h.Sha1;case"SHA-256":return new h.Sha256;case"SHA-512":return new h.Sha512;default:throw new l.AlgorithmError("keyAlgorithm.hash: Is not recognized")}}static digest(e,t){return r.__awaiter(this,void 0,void 0,(function*(){const r=this.getDigest(e.name);const n=r.process(l.BufferSourceConverter.toUint8Array(t)).finish().result;return l.BufferSourceConverter.toArrayBuffer(n)}))}}class O extends l.RsaOaepProvider{onGenerateKey(e,t,n){return r.__awaiter(this,void 0,void 0,(function*(){return N.generateKey(e,t,n)}))}onExportKey(e,t){return r.__awaiter(this,void 0,void 0,(function*(){return N.exportKey(e,t)}))}onImportKey(e,t,n,i,s){return r.__awaiter(this,void 0,void 0,(function*(){return N.importKey(e,t,n,i,s)}))}onEncrypt(e,t,n){return r.__awaiter(this,void 0,void 0,(function*(){return this.cipher(e,t,n)}))}onDecrypt(e,t,n){return r.__awaiter(this,void 0,void 0,(function*(){return this.cipher(e,t,n)}))}checkCryptoKey(e,t){super.checkCryptoKey(e,t);N.checkCryptoKey(e)}cipher(e,t,r){const n=k.getDigest(t.algorithm.hash.name);let i;if(e.label){i=l.BufferSourceConverter.toUint8Array(e.label)}const s=new h.RSA_OAEP(t.data,n,i);let a;const o=l.BufferSourceConverter.toUint8Array(r);if(t.type==="public"){a=s.encrypt(o)}else{a=s.decrypt(o)}return l.BufferSourceConverter.toArrayBuffer(a)}}class x extends l.RsaPssProvider{onGenerateKey(e,t,n){return r.__awaiter(this,void 0,void 0,(function*(){return N.generateKey(e,t,n)}))}onExportKey(e,t){return r.__awaiter(this,void 0,void 0,(function*(){return N.exportKey(e,t)}))}onImportKey(e,t,n,i,s){return r.__awaiter(this,void 0,void 0,(function*(){return N.importKey(e,t,n,i,s)}))}onSign(e,t,n){return r.__awaiter(this,void 0,void 0,(function*(){const r=new h.RSA_PSS(t.data,k.getDigest(t.algorithm.hash.name),e.saltLength);const i=r.sign(l.BufferSourceConverter.toUint8Array(n));return l.BufferSourceConverter.toArrayBuffer(i)}))}onVerify(e,t,n,i){return r.__awaiter(this,void 0,void 0,(function*(){const r=new h.RSA_PSS(t.data,k.getDigest(t.algorithm.hash.name),e.saltLength);try{r.verify(l.BufferSourceConverter.toUint8Array(n),l.BufferSourceConverter.toUint8Array(i))}catch(e){return false}return true}))}checkCryptoKey(e,t){super.checkCryptoKey(e,t);N.checkCryptoKey(e)}}class B extends l.RsaSsaProvider{onGenerateKey(e,t,n){return r.__awaiter(this,void 0,void 0,(function*(){return N.generateKey(e,t,n)}))}onExportKey(e,t){return r.__awaiter(this,void 0,void 0,(function*(){return N.exportKey(e,t)}))}onImportKey(e,t,n,i,s){return r.__awaiter(this,void 0,void 0,(function*(){return N.importKey(e,t,n,i,s)}))}onSign(e,t,n){return r.__awaiter(this,void 0,void 0,(function*(){const e=new h.RSA_PKCS1_v1_5(t.data,k.getDigest(t.algorithm.hash.name));const r=e.sign(l.BufferSourceConverter.toUint8Array(n));return l.BufferSourceConverter.toArrayBuffer(r)}))}onVerify(e,t,n,i){return r.__awaiter(this,void 0,void 0,(function*(){const e=new h.RSA_PKCS1_v1_5(t.data,k.getDigest(t.algorithm.hash.name));try{e.verify(l.BufferSourceConverter.toUint8Array(n),l.BufferSourceConverter.toUint8Array(i))}catch(e){return false}return true}))}checkCryptoKey(e,t){super.checkCryptoKey(e,t);N.checkCryptoKey(e)}}class D extends l.ProviderCrypto{constructor(){super(...arguments);this.name="RSAES-PKCS1-v1_5";this.usages={publicKey:["encrypt","wrapKey"],privateKey:["decrypt","unwrapKey"]};this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"]}onGenerateKey(e,t,n){return r.__awaiter(this,void 0,void 0,(function*(){return N.generateKey(e,t,n)}))}checkGenerateKeyParams(e){this.checkRequiredProperty(e,"publicExponent");if(!(e.publicExponent&&e.publicExponent instanceof Uint8Array)){throw new TypeError("publicExponent: Missing or not a Uint8Array")}const t=s.Convert.ToBase64(e.publicExponent);if(!(t==="Aw=="||t==="AQAB")){throw new TypeError("publicExponent: Must be [3] or [1,0,1]")}this.checkRequiredProperty(e,"modulusLength");switch(e.modulusLength){case 1024:case 2048:case 4096:break;default:throw new TypeError("modulusLength: Must be 1024, 2048, or 4096")}}onDecrypt(e,t,n){return r.__awaiter(this,void 0,void 0,(function*(){const e=new h.RSA(t.data).decrypt(new h.BigNumber(l.BufferSourceConverter.toUint8Array(n))).result;const r=t.algorithm.modulusLength>>3;if(n.byteLength!==r){throw new l.CryptoError("Decryption error. Encrypted message size doesn't match to key length")}let i=0;if(e[i++]||e[i++]!==2){throw new l.CryptoError("Decryption error")}do{if(e[i++]===0){break}}while(i<e.length);if(i<11){throw new l.CryptoError("Decryption error. PS is less than 8 octets.")}if(i===e.length){throw new l.CryptoError("Decryption error. There is no octet with hexadecimal value 0x00 to separate PS from M")}return e.buffer.slice(i)}))}onEncrypt(e,t,n){return r.__awaiter(this,void 0,void 0,(function*(){const e=t.algorithm.modulusLength>>3;if(n.byteLength>e-11){throw new l.CryptoError("Message too long")}const r=e-n.byteLength-3;const i=N.randomNonZeroValues(new Uint8Array(r));const s=new Uint8Array(e);s[0]=0;s[1]=2;s.set(i,2);s[2+r]=0;s.set(new Uint8Array(n),3+r);const a=new h.RSA(t.data).encrypt(new h.BigNumber(s)).result;return l.BufferSourceConverter.toArrayBuffer(a)}))}onExportKey(e,t){return r.__awaiter(this,void 0,void 0,(function*(){return N.exportKey(e,t)}))}onImportKey(e,t,n,i,s){return r.__awaiter(this,void 0,void 0,(function*(){const r=yield N.importKey(e,t,Object.assign(Object.assign({},n),{name:this.name}),i,s);return r}))}checkCryptoKey(e,t){super.checkCryptoKey(e,t);N.checkCryptoKey(e)}}const M={"1.2.840.10045.3.1.7":"P-256","P-256":"1.2.840.10045.3.1.7","1.3.132.0.34":"P-384","P-384":"1.3.132.0.34","1.3.132.0.35":"P-521","P-521":"1.3.132.0.35","1.3.132.0.10":"K-256","K-256":"1.3.132.0.10","1.3.36.3.3.2.8.1.1.7":"brainpoolP256r1",brainpoolP256r1:"1.3.36.3.3.2.8.1.1.7","1.3.36.3.3.2.8.1.1.11":"brainpoolP384r1",brainpoolP384r1:"1.3.36.3.3.2.8.1.1.11","1.3.36.3.3.2.8.1.1.13":"brainpoolP512r1",brainpoolP512r1:"1.3.36.3.3.2.8.1.1.13"};function U(e){const t=M[e];if(!t){throw new l.OperationError(`Cannot convert WebCrypto named curve '${e}' to OID`)}return t}class L extends E{constructor(e,t,r,n,i){super(e,t,r,n);this.data=i}}class F{static checkLib(){if(typeof d==="undefined"){throw new l.OperationError("Cannot implement EC mechanism. Add 'https://peculiarventures.github.io/pv-webcrypto-tests/src/elliptic.js' script to your project")}}static generateKey(e,t,n){return r.__awaiter(this,void 0,void 0,(function*(){this.checkLib();const r=this.initEcKey(e.namedCurve);const i=r.genKeyPair();i.getPublic();const s=new L(Object.assign({},e),t,"private",n.filter((e=>~this.privateUsages.indexOf(e))),i);const a=new L(Object.assign({},e),true,"public",n.filter((e=>~this.publicUsages.indexOf(e))),i);return{privateKey:s,publicKey:a}}))}static checkCryptoKey(e){if(!(e instanceof L)){throw new TypeError("key: Is not EcCryptoKey")}}static concat(...e){const t=new Uint8Array(e.map((e=>e.length)).reduce(((e,t)=>e+t)));let r=0;e.forEach((e=>{for(let n=0;n<e.length;n++){t[r+n]=e[n]}r+=e.length}));return t}static exportKey(e,t){return r.__awaiter(this,void 0,void 0,(function*(){this.checkLib();switch(e){case"pkcs8":return this.exportPkcs8Key(t);case"spki":return this.exportSpkiKey(t);case"jwk":return this.exportJwkKey(t);case"raw":return new Uint8Array(t.data.getPublic("der")).buffer;default:throw new l.OperationError("format: Must be 'jwk', 'raw, 'pkcs8' or 'spki'")}}))}static importKey(e,t,n,i,s){return r.__awaiter(this,void 0,void 0,(function*(){this.checkLib();let r;switch(e){case"pkcs8":r=this.importPkcs8Key(t,n.namedCurve);break;case"spki":r=this.importSpkiKey(t,n.namedCurve);break;case"raw":r=this.importEcKey(new l.asn1.EcPublicKey(t),n.namedCurve);break;case"jwk":r=this.importJwkKey(t);break;default:throw new l.OperationError("format: Must be 'jwk', 'raw', 'pkcs8' or 'spki'")}const a=new L(Object.assign({},n),i,r.priv?"private":"public",s,r);return a}))}static getNamedCurve(e){const t=e.toUpperCase();let r="";if(["P-256","P-384","P-521"].indexOf(t)>-1){r=t.replace("-","").toLowerCase()}else if(t==="K-256"){r="secp256k1"}else if(["brainpoolP256r1","brainpoolP384r1","brainpoolP512r1"].includes(e)){r=e}else{throw new l.OperationError(`Unsupported named curve '${e}'`)}return r}static initEcKey(e){return d.ec(this.getNamedCurve(e))}static exportPkcs8Key(e){const t=new l.asn1.PrivateKeyInfo;t.privateKeyAlgorithm.algorithm=this.ASN_ALGORITHM;t.privateKeyAlgorithm.parameters=n.AsnConvert.serialize(new l.asn1.ObjectIdentifier(U(e.algorithm.namedCurve)));t.privateKey=n.AsnConvert.serialize(this.exportEcKey(e));return n.AsnConvert.serialize(t)}static importPkcs8Key(e,t){const r=n.AsnConvert.parse(e,l.asn1.PrivateKeyInfo);const i=n.AsnConvert.parse(r.privateKey,l.asn1.EcPrivateKey);return this.importEcKey(i,t)}static importSpkiKey(e,t){const r=n.AsnConvert.parse(e,l.asn1.PublicKeyInfo);const i=new l.asn1.EcPublicKey(r.publicKey);return this.importEcKey(i,t)}static exportSpkiKey(e){const t=new l.asn1.EcPublicKey(new Uint8Array(e.data.getPublic("der")).buffer);const r=new l.asn1.PublicKeyInfo;r.publicKeyAlgorithm.algorithm=this.ASN_ALGORITHM;r.publicKeyAlgorithm.parameters=n.AsnConvert.serialize(new l.asn1.ObjectIdentifier(U(e.algorithm.namedCurve)));r.publicKey=t.value;return n.AsnConvert.serialize(r)}static importJwkKey(e){let t;if(e.d){t=i.JsonParser.fromJSON(e,{targetSchema:l.asn1.EcPrivateKey})}else{t=i.JsonParser.fromJSON(e,{targetSchema:l.asn1.EcPublicKey})}return this.importEcKey(t,e.crv)}static exportJwkKey(e){const t=this.exportEcKey(e);const r=i.JsonSerializer.toJSON(t);r.ext=true;r.key_ops=e.usages;r.crv=e.algorithm.namedCurve;r.kty="EC";return r}static exportEcKey(e){if(e.type==="private"){const t=new l.asn1.EcPrivateKey;const r=new Uint8Array(e.data.getPrivate("der").toArray());const n=new Uint8Array(this.getPointSize(e.algorithm.namedCurve)-r.length);t.privateKey=w(n,r);t.publicKey=new Uint8Array(e.data.getPublic("der"));return t}else if(e.data.pub){return new l.asn1.EcPublicKey(new Uint8Array(e.data.getPublic("der")).buffer)}else{throw new Error("Cannot get private or public key")}}static importEcKey(e,t){const r=this.initEcKey(t);if(e instanceof l.asn1.EcPublicKey){return r.keyFromPublic(new Uint8Array(e.value))}return r.keyFromPrivate(new Uint8Array(e.privateKey))}static getPointSize(e){switch(e){case"P-256":case"K-256":return 32;case"P-384":return 48;case"P-521":return 66}throw new Error("namedCurve: Is not recognized")}}F.privateUsages=["sign","deriveKey","deriveBits"];F.publicUsages=["verify"];F.ASN_ALGORITHM="1.2.840.10045.2.1";class H extends l.EcdhProvider{constructor(){super(...arguments);this.namedCurves=["P-256","P-384","P-521","K-256","brainpoolP256r1","brainpoolP384r1","brainpoolP512r1"]}onGenerateKey(e,t,n){return r.__awaiter(this,void 0,void 0,(function*(){return F.generateKey(e,t,n)}))}onExportKey(e,t){return r.__awaiter(this,void 0,void 0,(function*(){return F.exportKey(e,t)}))}onImportKey(e,t,n,i,s){return r.__awaiter(this,void 0,void 0,(function*(){return F.importKey(e,t,n,i,s)}))}onDeriveBits(e,t,n){return r.__awaiter(this,void 0,void 0,(function*(){F.checkLib();const r=t.data.derive(e.public.data.getPublic());let i=new Uint8Array(r.toArray());let s=i.length;s=s>32?s>48?66:48:32;if(i.length<s){i=F.concat(new Uint8Array(s-i.length),i)}const a=i.slice(0,n/8).buffer;return a}))}checkCryptoKey(e,t){super.checkCryptoKey(e,t);F.checkCryptoKey(e)}}function V(e){const t=new Uint8Array(e);const r=[];for(let e=0;e<t.length;e++){r.push(t[e])}return r}class G extends l.EcdsaProvider{constructor(){super(...arguments);this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512","SHA3-256","SHA3-384","SHA3-512"];this.namedCurves=["P-256","P-384","P-521","K-256","brainpoolP256r1","brainpoolP384r1","brainpoolP512r1"]}onGenerateKey(e,t,n){return r.__awaiter(this,void 0,void 0,(function*(){return F.generateKey(e,t,n)}))}onExportKey(e,t){return r.__awaiter(this,void 0,void 0,(function*(){return F.exportKey(e,t)}))}onImportKey(e,t,n,i,s){return r.__awaiter(this,void 0,void 0,(function*(){return F.importKey(e,t,n,i,s)}))}onSign(e,t,n){return r.__awaiter(this,void 0,void 0,(function*(){F.checkLib();const r=new ge;const i=yield r.subtle.digest(e.hash,n);const s=V(i);const a=yield t.data.sign(s);const o=new l.asn1.EcDsaSignature;o.r=new Uint8Array(a.r.toArray()).buffer;o.s=new Uint8Array(a.s.toArray()).buffer;return o.toWebCryptoSignature()}))}onVerify(e,t,n,i){return r.__awaiter(this,void 0,void 0,(function*(){F.checkLib();const r=new ge;const s={r:new Uint8Array(n.slice(0,n.byteLength/2)),s:new Uint8Array(n.slice(n.byteLength/2))};const a=yield r.subtle.digest(e.hash,i);const o=V(a);return t.data.verify(o,s)}))}checkCryptoKey(e,t){super.checkCryptoKey(e,t);F.checkCryptoKey(e)}}const j={[l.asn1.idEd448]:"Ed448",ed448:l.asn1.idEd448,[l.asn1.idX448]:"X448",x448:l.asn1.idX448,[l.asn1.idEd25519]:"Ed25519",ed25519:l.asn1.idEd25519,[l.asn1.idX25519]:"X25519",x25519:l.asn1.idX25519};function K(e){const t=j[e.toLowerCase()];if(!t){throw new l.OperationError(`Cannot convert WebCrypto named curve '${e}' to OID`)}return t}class Y extends E{constructor(e,t,r,n){super(e,t,"private",r);this.data=n}toJSON(){const e={kty:"OKP",crv:this.algorithm.namedCurve,key_ops:this.usages,ext:this.extractable};return Object.assign(e,{d:s.Convert.ToBase64Url(s.Convert.FromHex(/^ed/i.test(e.crv)?this.data.getSecret("hex"):this.data.getPrivate("hex")))})}fromJSON(e){if(!e.d){throw new l.OperationError(`Cannot get private data from JWK. Property 'd' is required`)}if(!e.crv){throw new l.OperationError(`Cannot get named curve from JWK. Property 'crv' is required`)}const t=s.Convert.ToHex(s.Convert.FromBase64Url(e.d));if(/^ed/i.test(e.crv)){const e=new d.eddsa("ed25519");this.data=e.keyFromSecret(t)}else{const r=d.ec(e.crv.replace(/^x/i,"curve"));this.data=r.keyFromPrivate(t,"hex")}return this}}class q extends E{constructor(e,t,r,n){super(e,t,"public",r);this.data=n}toJSON(){const e={kty:"OKP",crv:this.algorithm.namedCurve,key_ops:this.usages,ext:this.extractable};return Object.assign(e,{x:s.Convert.ToBase64Url(s.Convert.FromHex(this.data.getPublic("hex")))})}fromJSON(e){if(!e.crv){throw new l.OperationError(`Cannot get named curve from JWK. Property 'crv' is required`)}if(!e.x){throw new l.OperationError(`Cannot get property from JWK. Property 'x' is required`)}const t=s.Convert.ToHex(s.Convert.FromBase64Url(e.x));if(/^ed/i.test(e.crv)){const r=new d.eddsa(e.crv.toLowerCase());this.data=r.keyFromPublic(t,"hex")}else{const r=d.ec(e.crv.replace(/^x/i,"curve"));this.data=r.keyFromPublic(t,"hex")}return this}}class z{static checkLib(){if(typeof d==="undefined"){throw new l.OperationError("Cannot implement EC mechanism. Add 'https://peculiarventures.github.io/pv-webcrypto-tests/src/elliptic.js' script to your project")}}static concat(...e){const t=new Uint8Array(e.map((e=>e.length)).reduce(((e,t)=>e+t)));let r=0;e.forEach((e=>{for(let n=0;n<e.length;n++){t[r+n]=e[n]}r+=e.length}));return t}static generateKey(t,n,i){return r.__awaiter(this,void 0,void 0,(function*(){this.checkLib();const r="ed25519";let s;{const t=e.nativeCrypto.getRandomValues(new Uint8Array(32));const n=new d.eddsa(r);s=n.keyFromSecret(t)}const a=new Y(t,n,i.filter((e=>this.privateKeyUsages.indexOf(e)!==-1)),s);const o=new q(t,true,i.filter((e=>this.publicKeyUsages.indexOf(e)!==-1)),s);return{privateKey:a,publicKey:o}}))}static sign(e,t,n){return r.__awaiter(this,void 0,void 0,(function*(){this.checkLib();const e=V(n);const r=t.data.sign(e).toHex();return s.Convert.FromHex(r)}))}static verify(e,t,n,i){return r.__awaiter(this,void 0,void 0,(function*(){this.checkLib();const e=V(i);const r=t.data.verify(e,s.Convert.ToHex(n));return r}))}static deriveBits(e,t,n){return r.__awaiter(this,void 0,void 0,(function*(){this.checkLib();const r=new Uint8Array(s.Convert.FromHex(t.data.getSecret("hex")));const i=new d.ec("curve25519");const a=i.keyFromPrivate(s.Convert.ToHex(r),"hex");const o=e.public.data.getPublic("hex");new Uint8Array(s.Convert.FromHex(o));const f=e.public.data.getPublic();const c=a.derive(f);let u=new Uint8Array(c.toArray());let l=u.length;l=l>32?l>48?66:48:32;if(u.length<l){u=z.concat(new Uint8Array(l-u.length),u)}const h=u.slice(0,n/8).buffer;return h}))}static exportKey(e,t){return r.__awaiter(this,void 0,void 0,(function*(){this.checkLib();switch(e.toLowerCase()){case"jwk":return i.JsonSerializer.toJSON(t);case"pkcs8":{const e=s.Convert.FromHex(t.data.getSecret("hex"));const r=new l.asn1.PrivateKeyInfo;r.privateKeyAlgorithm.algorithm=K(t.algorithm.namedCurve);r.privateKey=n.AsnConvert.serialize(new n.OctetString(e));return n.AsnConvert.serialize(r)}case"spki":{const e=s.Convert.FromHex(t.data.getPublic("hex"));const r=new l.asn1.PublicKeyInfo;r.publicKeyAlgorithm.algorithm=K(t.algorithm.namedCurve);r.publicKey=e;return n.AsnConvert.serialize(r)}case"raw":{return s.Convert.FromHex(t.data.getPublic("hex"))}default:throw new l.OperationError("format: Must be 'jwk', 'raw', pkcs8' or 'spki'")}}))}static importKey(e,t,a,o,f){return r.__awaiter(this,void 0,void 0,(function*(){this.checkLib();switch(e.toLowerCase()){case"jwk":{const e=t;if(e.d){const e=i.JsonParser.fromJSON(t,{targetSchema:l.asn1.CurvePrivateKey});return this.importPrivateKey(e,a,o,f)}else{if(!e.x){throw new TypeError("keyData: Cannot get required 'x' field")}return this.importPublicKey(s.Convert.FromBase64Url(e.x),a,o,f)}}case"raw":{return this.importPublicKey(t,a,o,f)}case"spki":{const e=n.AsnConvert.parse(new Uint8Array(t),l.asn1.PublicKeyInfo);return this.importPublicKey(e.publicKey,a,o,f)}case"pkcs8":{const e=n.AsnConvert.parse(new Uint8Array(t),l.asn1.PrivateKeyInfo);const r=n.AsnConvert.parse(e.privateKey,l.asn1.CurvePrivateKey);return this.importPrivateKey(r,a,o,f)}default:throw new l.OperationError("format: Must be 'jwk', 'raw', 'pkcs8' or 'spki'")}}))}static importPrivateKey(e,t,r,n){const i=new Y(Object.assign({},t),r,n,null);i.fromJSON({crv:t.namedCurve,d:s.Convert.ToBase64Url(e.d)});return i}static importPublicKey(e,t,n,i){return r.__awaiter(this,void 0,void 0,(function*(){const r=new q(Object.assign({},t),n,i,null);r.fromJSON({crv:t.namedCurve,x:s.Convert.ToBase64Url(e)});return r}))}}z.publicKeyUsages=["verify"];z.privateKeyUsages=["sign","deriveKey","deriveBits"];class X extends l.EdDsaProvider{constructor(){super(...arguments);this.namedCurves=["Ed25519"]}onGenerateKey(e,t,n){return r.__awaiter(this,void 0,void 0,(function*(){const r=yield z.generateKey({name:this.name,namedCurve:e.namedCurve.replace(/^ed/i,"Ed")},t,n);return r}))}onSign(e,t,n){return r.__awaiter(this,void 0,void 0,(function*(){return z.sign(e,t,new Uint8Array(n))}))}onVerify(e,t,n,i){return r.__awaiter(this,void 0,void 0,(function*(){return z.verify(e,t,new Uint8Array(n),new Uint8Array(i))}))}onExportKey(e,t){return r.__awaiter(this,void 0,void 0,(function*(){return z.exportKey(e,t)}))}onImportKey(e,t,n,i,s){return r.__awaiter(this,void 0,void 0,(function*(){const r=yield z.importKey(e,t,Object.assign(Object.assign({},n),{name:this.name}),i,s);return r}))}}class Q extends l.EcdhEsProvider{constructor(){super(...arguments);this.namedCurves=["X25519"]}onGenerateKey(e,t,n){return r.__awaiter(this,void 0,void 0,(function*(){const r=yield z.generateKey({name:this.name,namedCurve:e.namedCurve.replace(/^x/i,"X")},t,n);return r}))}onDeriveBits(e,t,n){return r.__awaiter(this,void 0,void 0,(function*(){const r=yield z.deriveBits(Object.assign(Object.assign({},e),{public:e.public}),t,n);return r}))}onExportKey(e,t){return r.__awaiter(this,void 0,void 0,(function*(){return z.exportKey(e,t)}))}onImportKey(e,t,n,i,s){return r.__awaiter(this,void 0,void 0,(function*(){const r=yield z.importKey(e,t,Object.assign(Object.assign({},n),{name:this.name}),i,s);return r}))}}class W extends l.ProviderCrypto{constructor(){super(...arguments);this.name="SHA-1";this.usages=[]}onDigest(e,t){return r.__awaiter(this,void 0,void 0,(function*(){return k.digest(e,t)}))}}class J extends W{constructor(){super(...arguments);this.name="SHA-256"}}class Z extends W{constructor(){super(...arguments);this.name="SHA-512"}}class ee extends l.ProviderCrypto{constructor(){super(...arguments);this.name="SHA3-256";this.usages=[]}onDigest(e,t){return r.__awaiter(this,void 0,void 0,(function*(){return f.hash256(new Uint8Array(t)).buffer}))}}class te extends l.ProviderCrypto{constructor(){super(...arguments);this.name="SHA3-384";this.usages=[]}onDigest(e,t){return r.__awaiter(this,void 0,void 0,(function*(){return f.hash384(new Uint8Array(t)).buffer}))}}class re extends l.ProviderCrypto{constructor(){super(...arguments);this.name="SHA3-512";this.usages=[]}onDigest(e,t){return r.__awaiter(this,void 0,void 0,(function*(){return f.hash512(new Uint8Array(t)).buffer}))}}class ne extends l.Shake128Provider{onDigest(e,t){return r.__awaiter(this,void 0,void 0,(function*(){const r=new Uint8Array(e.length);(new f.SHAKE128).update(new Uint8Array(t)).stream(r);return r.buffer}))}}class ie extends l.Shake256Provider{onDigest(e,t){return r.__awaiter(this,void 0,void 0,(function*(){const r=new Uint8Array(e.length);(new f.SHAKE256).update(new Uint8Array(t)).stream(r);return r.buffer}))}}class se extends E{constructor(e,t,r,n){super(e,t,"secret",r);this.raw=n}}class ae extends l.Pbkdf2Provider{onImportKey(e,t,n,i,s){return r.__awaiter(this,void 0,void 0,(function*(){return new se(n,i,s,l.BufferSourceConverter.toUint8Array(t))}))}onDeriveBits(e,t,n){return r.__awaiter(this,void 0,void 0,(function*(){let r;const i=l.BufferSourceConverter.toUint8Array(e.salt);const s=t.raw;switch(e.hash.name.toUpperCase()){case"SHA-1":r=h.Pbkdf2HmacSha1(s,i,e.iterations,n>>3);break;case"SHA-256":r=h.Pbkdf2HmacSha256(s,i,e.iterations,n>>3);break;case"SHA-512":r=h.Pbkdf2HmacSha512(s,i,e.iterations,n>>3);break;default:throw new l.OperationError(`algorithm.hash: '${e.hash.name}' hash algorithm is not supported`)}return l.BufferSourceConverter.toArrayBuffer(r)}))}checkCryptoKey(e,t){super.checkCryptoKey(e,t);if(!(e instanceof se)){throw new TypeError("key: Is not PbkdfCryptoKey")}}}class oe extends E{constructor(e,t,r,n){super(e,t,"secret",r);this.raw=n}toJSON(){const e={kty:"oct",alg:this.getJwkAlgorithm(),k:s.Convert.ToBase64Url(this.raw),ext:this.extractable,key_ops:this.usages};return e}getJwkAlgorithm(){switch(this.algorithm.name.toUpperCase()){case"DES-CBC":return`DES-CBC`;case"DES-EDE3-CBC":return`3DES-CBC`;default:throw new l.AlgorithmError("Unsupported algorithm name")}}}class fe{static checkLib(){if(typeof p==="undefined"){throw new l.OperationError("Cannot implement DES mechanism. Add 'https://peculiarventures.github.io/pv-webcrypto-tests/src/des.js' script to your project")}}static checkCryptoKey(e){if(!(e instanceof oe)){throw new TypeError("key: Is not DesCryptoKey")}}static generateKey(t,n,i){return r.__awaiter(this,void 0,void 0,(function*(){this.checkLib();const r=e.nativeCrypto.getRandomValues(new Uint8Array(t.length/8));return new oe(t,n,i,r)}))}static exportKey(e,t){return r.__awaiter(this,void 0,void 0,(function*(){this.checkLib();switch(e){case"jwk":return t.toJSON();case"raw":return t.raw.buffer;default:throw new l.OperationError("format: Must be 'jwk' or 'raw'")}}))}static importKey(e,t,n,i,a){return r.__awaiter(this,void 0,void 0,(function*(){this.checkLib();let e;if(l.isJWK(t)){e=s.Convert.FromBase64Url(t.k)}else{e=l.BufferSourceConverter.toArrayBuffer(t)}if(n.name==="DES-CBC"&&e.byteLength!==8||n.name==="DES-EDE3-CBC"&&e.byteLength!==24){throw new l.OperationError("keyData: Is wrong key length")}const r=new oe({name:n.name,length:e.byteLength<<3},i,a,new Uint8Array(e));return r}))}static encrypt(e,t,n){return r.__awaiter(this,void 0,void 0,(function*(){return this.cipher(e,t,n,true)}))}static decrypt(e,t,n){return r.__awaiter(this,void 0,void 0,(function*(){return this.cipher(e,t,n,false)}))}static cipher(e,t,n,i){return r.__awaiter(this,void 0,void 0,(function*(){this.checkLib();const r=i?"encrypt":"decrypt";let s;const a=l.BufferSourceConverter.toUint8Array(e.iv);switch(e.name.toUpperCase()){case"DES-CBC":s=p.CBC.instantiate(p.DES).create({key:t.raw,type:r,iv:a});break;case"DES-EDE3-CBC":s=p.CBC.instantiate(p.EDE).create({key:t.raw,type:r,iv:a});break;default:throw new l.OperationError("algorithm: Is not recognized")}const o=s.update(new Uint8Array(n)).concat(s.final());return new Uint8Array(o).buffer}))}}class ce extends l.DesProvider{constructor(){super(...arguments);this.keySizeBits=64;this.ivSize=8;this.name="DES-CBC"}onGenerateKey(e,t,n){return r.__awaiter(this,void 0,void 0,(function*(){return fe.generateKey(e,t,n)}))}onExportKey(e,t){return r.__awaiter(this,void 0,void 0,(function*(){return fe.exportKey(e,t)}))}onImportKey(e,t,n,i,s){return r.__awaiter(this,void 0,void 0,(function*(){return fe.importKey(e,t,n,i,s)}))}onEncrypt(e,t,n){return r.__awaiter(this,void 0,void 0,(function*(){return fe.encrypt(e,t,n)}))}onDecrypt(e,t,n){return r.__awaiter(this,void 0,void 0,(function*(){return fe.decrypt(e,t,n)}))}checkCryptoKey(e,t){super.checkCryptoKey(e,t);fe.checkCryptoKey(e)}}class ue extends l.DesProvider{constructor(){super(...arguments);this.keySizeBits=192;this.ivSize=8;this.name="DES-EDE3-CBC"}onGenerateKey(e,t,n){return r.__awaiter(this,void 0,void 0,(function*(){return fe.generateKey(e,t,n)}))}onExportKey(e,t){return r.__awaiter(this,void 0,void 0,(function*(){return fe.exportKey(e,t)}))}onImportKey(e,t,n,i,s){return r.__awaiter(this,void 0,void 0,(function*(){return fe.importKey(e,t,n,i,s)}))}onEncrypt(e,t,n){return r.__awaiter(this,void 0,void 0,(function*(){return fe.encrypt(e,t,n)}))}onDecrypt(e,t,n){return r.__awaiter(this,void 0,void 0,(function*(){return fe.decrypt(e,t,n)}))}checkCryptoKey(e,t){super.checkCryptoKey(e,t);fe.checkCryptoKey(e)}}const le={fromJSON:e=>Buffer.from(s.Convert.FromBase64Url(e)),toJSON:e=>s.Convert.ToBase64Url(e)};class he extends E{get alg(){const e=this.algorithm.hash.name.toUpperCase();return`HS${e.replace("SHA-","")}`}set alg(e){}constructor(e={name:"HMAC"},t=false,r=[],n=new Uint8Array(0)){super(e,t,"secret",r);this.kty="oct";this.data=n}}r.__decorate([i.JsonProp({name:"ext",type:i.JsonPropTypes.Boolean,optional:true})],he.prototype,"extractable",void 0);r.__decorate([i.JsonProp({name:"key_ops",type:i.JsonPropTypes.String,repeated:true,optional:true})],he.prototype,"usages",void 0);r.__decorate([i.JsonProp({name:"k",converter:le})],he.prototype,"data",void 0);r.__decorate([i.JsonProp({type:i.JsonPropTypes.String})],he.prototype,"kty",void 0);r.__decorate([i.JsonProp({type:i.JsonPropTypes.String})],he.prototype,"alg",null);class de extends l.HmacProvider{onGenerateKey(t,n,i){return r.__awaiter(this,void 0,void 0,(function*(){const r=t.length||this.getDefaultLength(t.hash.name);const s=e.nativeCrypto.getRandomValues(new Uint8Array(r>>3));const a=new he(t,n,i,s);return a}))}onSign(e,t,n){return r.__awaiter(this,void 0,void 0,(function*(){let e;switch(t.algorithm.hash.name.toUpperCase()){case"SHA-1":e=h.HmacSha1;break;case"SHA-256":e=h.HmacSha256;break;case"SHA-512":e=h.HmacSha512;break;default:throw new l.OperationError("key.algorithm.hash: Is not recognized")}const r=new e(t.data).process(l.BufferSourceConverter.toUint8Array(n)).finish().result;return l.BufferSourceConverter.toArrayBuffer(r)}))}onVerify(e,t,n,i){return r.__awaiter(this,void 0,void 0,(function*(){const r=yield this.onSign(e,t,i);return s.Convert.ToHex(r)===s.Convert.ToHex(n)}))}onImportKey(e,t,n,s,a){return r.__awaiter(this,void 0,void 0,(function*(){let r;switch(e.toLowerCase()){case"jwk":r=i.JsonParser.fromJSON(t,{targetSchema:he});break;case"raw":if(!l.BufferSourceConverter.isBufferSource(t)){throw new TypeError("keyData: Is not ArrayBuffer or ArrayBufferView")}r=new he(n,s,a,l.BufferSourceConverter.toUint8Array(t));break;default:throw new l.OperationError("format: Must be 'jwk' or 'raw'")}r.algorithm={hash:{name:n.hash.name},name:this.name,length:r.data.length<<3};r.extractable=s;r.usages=a;return r}))}onExportKey(e,t){return r.__awaiter(this,void 0,void 0,(function*(){switch(e.toLowerCase()){case"jwk":{const e=i.JsonSerializer.toJSON(t);return e}case"raw":return new Uint8Array(t.data).buffer;default:throw new l.OperationError("format: Must be 'jwk' or 'raw'")}}))}checkCryptoKey(e,t){super.checkCryptoKey(e,t);if(!(e instanceof he)){throw new TypeError("key: Is not HMAC CryptoKey")}}}var pe;class ye extends E{constructor(e,t,n,i,s){super(e,t,n,i);pe.set(this,void 0);r.__classPrivateFieldSet(this,pe,s,"f")}getNative(){return r.__classPrivateFieldGet(this,pe,"f")}}pe=new WeakMap;class me extends l.SubtleCrypto{static isAnotherKey(e){if(typeof e==="object"&&typeof e.type==="string"&&typeof e.extractable==="boolean"&&typeof e.algorithm==="object"){return!(e instanceof E)}return false}constructor(){super();this.browserInfo=A();this.providers.set(new $);this.providers.set(new C);this.providers.set(new T);this.providers.set(new I);this.providers.set(new P);this.providers.set(new ce);this.providers.set(new ue);this.providers.set(new B);this.providers.set(new x);this.providers.set(new O);this.providers.set(new D);this.providers.set(new G);this.providers.set(new H);this.providers.set(new W);this.providers.set(new J);this.providers.set(new Z);this.providers.set(new ae);this.providers.set(new de);this.providers.set(new X);this.providers.set(new Q);this.providers.set(new ee);this.providers.set(new te);this.providers.set(new re);this.providers.set(new ne);this.providers.set(new ie)}digest(...e){return r.__awaiter(this,void 0,void 0,(function*(){return this.wrapNative("digest",...e)}))}importKey(...e){return r.__awaiter(this,void 0,void 0,(function*(){this.fixFirefoxEcImportPkcs8(e);return this.wrapNative("importKey",...e)}))}exportKey(...e){return r.__awaiter(this,void 0,void 0,(function*(){return(yield this.fixFirefoxEcExportPkcs8(e))||(yield this.wrapNative("exportKey",...e))}))}generateKey(...e){return r.__awaiter(this,void 0,void 0,(function*(){return this.wrapNative("generateKey",...e)}))}sign(...e){return r.__awaiter(this,void 0,void 0,(function*(){return this.wrapNative("sign",...e)}))}verify(...e){return r.__awaiter(this,void 0,void 0,(function*(){return this.wrapNative("verify",...e)}))}encrypt(...e){return r.__awaiter(this,void 0,void 0,(function*(){return this.wrapNative("encrypt",...e)}))}decrypt(...e){return r.__awaiter(this,void 0,void 0,(function*(){return this.wrapNative("decrypt",...e)}))}wrapKey(...e){return r.__awaiter(this,void 0,void 0,(function*(){return this.wrapNative("wrapKey",...e)}))}unwrapKey(...e){return r.__awaiter(this,void 0,void 0,(function*(){return this.wrapNative("unwrapKey",...e)}))}deriveBits(...e){return r.__awaiter(this,void 0,void 0,(function*(){return this.wrapNative("deriveBits",...e)}))}deriveKey(...e){return r.__awaiter(this,void 0,void 0,(function*(){return this.wrapNative("deriveKey",...e)}))}wrapNative(t,...n){const i=e=>super[e];return r.__awaiter(this,void 0,void 0,(function*(){if(~["generateKey","unwrapKey","deriveKey","importKey"].indexOf(t)){this.fixAlgorithmName(n)}try{if(t!=="digest"||!n.some((e=>e instanceof E))){const r=this.fixNativeArguments(t,n);g.info(`Call native '${t}' method`,r);const i=yield e.nativeSubtle[t].apply(e.nativeSubtle,r);return this.fixNativeResult(t,n,i)}}catch(e){g.warn(`Error on native '${t}' calling. ${e.message}`,e)}if(t==="wrapKey"){try{g.info(`Trying to wrap key by using native functions`,n);const e=yield this.exportKey(n[0],n[1]);const t=n[0]==="jwk"?s.Convert.FromUtf8String(JSON.stringify(e)):e;const r=yield this.encrypt(n[3],n[2],t);return r}catch(e){g.warn(`Cannot wrap key by native functions. ${e.message}`,e)}}if(t==="unwrapKey"){try{g.info(`Trying to unwrap key by using native functions`,n);const e=yield this.decrypt(n[3],n[2],n[1]);const t=n[0]==="jwk"?JSON.parse(s.Convert.ToUtf8String(e)):e;const r=yield this.importKey(n[0],t,n[4],n[5],n[6]);return r}catch(e){g.warn(`Cannot unwrap key by native functions. ${e.message}`,e)}}if(t==="deriveKey"){try{g.info(`Trying to derive key by using native functions`,n);const e=yield this.deriveBits(n[0],n[1],n[2].length);const t=yield this.importKey("raw",e,n[2],n[3],n[4]);return t}catch(e){g.warn(`Cannot derive key by native functions. ${e.message}`,e)}}if(t==="deriveBits"||t==="deriveKey"){for(const e of n){if(typeof e==="object"&&e.public&&me.isAnotherKey(e.public)){e.public=yield this.castKey(e.public)}}}for(let e=0;e<n.length;e++){const t=n[e];if(me.isAnotherKey(t)){n[e]=yield this.castKey(t)}}const r=i(t);if(typeof r==="function"){return r.apply(this,n)}throw new Error("Incorrect type of 'method'. Must be 'function'.")}))}fixNativeArguments(e,t){var r,n,i,a,o,f,c,u;const l=[...t];if(e==="importKey"){if(this.browserInfo.name===b.IE&&((n=(r=l[0])===null||r===void 0?void 0:r.toLowerCase)===null||n===void 0?void 0:n.call(r))==="jwk"&&!s.BufferSourceConverter.isBufferSource(l[1])){l[1]=s.Convert.FromUtf8String(JSON.stringify(l[1]))}}if(this.browserInfo.name===b.IE&&t[1]instanceof ye){switch(e){case"sign":case"verify":case"encrypt":case"decrypt":l[0]=Object.assign(Object.assign({},this.prepareAlgorithm(l[0])),{hash:(o=(a=(i=l[1])===null||i===void 0?void 0:i.algorithm)===null||a===void 0?void 0:a.hash)===null||o===void 0?void 0:o.name});break;case"wrapKey":case"unwrapKey":l[4]=Object.assign(Object.assign({},this.prepareAlgorithm(l[4])),{hash:(u=(c=(f=l[3])===null||f===void 0?void 0:f.algorithm)===null||c===void 0?void 0:c.hash)===null||u===void 0?void 0:u.name});break}}for(let e=0;e<l.length;e++){const t=l[e];if(t instanceof ye){l[e]=t.getNative()}}return l}fixNativeResult(e,t,r){var n,i;if(this.browserInfo.name===b.IE){if(e==="exportKey"){if(((i=(n=t[0])===null||n===void 0?void 0:n.toLowerCase)===null||i===void 0?void 0:i.call(n))==="jwk"&&r instanceof ArrayBuffer){return JSON.parse(s.Convert.ToUtf8String(r))}}if("privateKey"in r){const e=["sign","decrypt","unwrapKey","deriveKey","deriveBits"];const n=["verify","encrypt","wrapKey"];return{privateKey:this.wrapNativeKey(r.privateKey,t[0],t[1],t[2].filter((t=>e.includes(t)))),publicKey:this.wrapNativeKey(r.publicKey,t[0],t[1],t[2].filter((e=>n.includes(e))))}}else if("extractable"in r){let n;let i;switch(e){case"importKey":n=t[2];i=t[4];break;case"unwrapKey":n=t[4];i=t[6];break;case"generateKey":n=t[0];i=t[2];break;default:throw new l.OperationError("Cannot wrap native key. Unsupported method in use")}return this.wrapNativeKey(r,n,r.extractable,i)}}return r}wrapNativeKey(e,t,r,n){if(this.browserInfo.name===b.IE){const i=["RSASSA-PKCS1-v1_5","RSA-PSS","RSA-OAEP","AES-CBC","AES-CTR","AES-KW","HMAC"];const s=i.map((e=>e.toLowerCase())).indexOf(e.algorithm.name.toLowerCase());if(s!==-1){const a=this.prepareAlgorithm(t);const o=Object.assign(Object.assign({},e.algorithm),{name:i[s]});if(l.SubtleCrypto.isHashedAlgorithm(a)){o.hash={name:a.hash.name.toUpperCase()}}g.info(`Wrapping ${i[s]} crypto key to WrappedNativeCryptoKey`);return new ye(o,r,e.type,n,e)}}return e}castKey(e){return r.__awaiter(this,void 0,void 0,(function*(){g.info("Cast native CryptoKey to linter key.",e);if(!e.extractable){throw new Error("Cannot cast unextractable crypto key")}const t=this.getProvider(e.algorithm.name);const r=yield this.exportKey("jwk",e);return t.importKey("jwk",r,e.algorithm,true,e.usages)}))}fixAlgorithmName(e){if(this.browserInfo.name===b.Edge){for(let t=0;t<e.length;t++){const r=e[0];if(typeof r==="string"){for(const n of this.providers.algorithms){if(n.toLowerCase()===r.toLowerCase()){e[t]=n;break}}}else if(typeof r==="object"&&typeof r.name==="string"){for(const e of this.providers.algorithms){if(e.toLowerCase()===r.name.toLowerCase()){r.name=e}if(typeof r.hash==="string"&&e.toLowerCase()===r.hash.toLowerCase()||typeof r.hash==="object"&&typeof r.hash.name==="string"&&e.toLowerCase()===r.hash.name.toLowerCase()){r.hash={name:e}}}}}}}fixFirefoxEcImportPkcs8(e){const t=this.prepareAlgorithm(e[2]);const r=t.name.toUpperCase();if(this.browserInfo.name===b.Firefox&&e[0]==="pkcs8"&&~["ECDSA","ECDH"].indexOf(r)&&~["P-256","P-384","P-521"].indexOf(t.namedCurve)){if(!l.BufferSourceConverter.isBufferSource(e[1])){throw new TypeError("data: Is not ArrayBuffer or ArrayBufferView")}const r=l.BufferSourceConverter.toArrayBuffer(e[1]);const s=n.AsnConvert.parse(r,l.asn1.PrivateKeyInfo);const a=n.AsnConvert.parse(s.privateKey,l.asn1.EcPrivateKey);const o=i.JsonSerializer.toJSON(a);o.ext=true;o.key_ops=e[4];o.crv=t.namedCurve;o.kty="EC";e[0]="jwk";e[1]=o}}fixFirefoxEcExportPkcs8(e){return r.__awaiter(this,void 0,void 0,(function*(){try{if(this.browserInfo.name===b.Firefox&&e[0]==="pkcs8"&&~["ECDSA","ECDH"].indexOf(e[1].algorithm.name)&&~["P-256","P-384","P-521"].indexOf(e[1].algorithm.namedCurve)){const t=yield this.exportKey("jwk",e[1]);const r=i.JsonParser.fromJSON(t,{targetSchema:l.asn1.EcPrivateKey});const s=new l.asn1.PrivateKeyInfo;s.privateKeyAlgorithm.algorithm=F.ASN_ALGORITHM;s.privateKeyAlgorithm.parameters=n.AsnConvert.serialize(new l.asn1.ObjectIdentifier(U(e[1].algorithm.namedCurve)));s.privateKey=n.AsnConvert.serialize(r);return n.AsnConvert.serialize(s)}}catch(e){g.error(e);return null}}))}}me.methods=["digest","importKey","exportKey","sign","verify","generateKey","encrypt","decrypt","deriveBits","deriveKey","wrapKey","unwrapKey"];class ge extends l.Crypto{constructor(){super(...arguments);this.subtle=new me}get nativeCrypto(){return e.nativeCrypto}getRandomValues(t){return e.nativeCrypto.getRandomValues(t)}}function be(e,t){const r=e[t];e[t]=function(){const n=arguments;return new Promise(((i,s)=>{const a=r.apply(e,n);a.oncomplete=e=>{i(e.target.result)};a.onerror=e=>{s(`Error on running '${t}' function`)}}))}}if(typeof self!=="undefined"&&self["msCrypto"]){be(e.nativeSubtle,"generateKey");be(e.nativeSubtle,"digest");be(e.nativeSubtle,"sign");be(e.nativeSubtle,"verify");be(e.nativeSubtle,"encrypt");be(e.nativeSubtle,"decrypt");be(e.nativeSubtle,"importKey");be(e.nativeSubtle,"exportKey");be(e.nativeSubtle,"wrapKey");be(e.nativeSubtle,"unwrapKey");be(e.nativeSubtle,"deriveKey");be(e.nativeSubtle,"deriveBits")}if(!Math.imul){Math.imul=function e(t,r){const n=t>>>16&65535;const i=t&65535;const s=r>>>16&65535;const a=r&65535;return i*a+(n*a+i*s<<16>>>0)|0}}if(e.nativeCrypto){Object.freeze(e.nativeCrypto.getRandomValues)}const Ae=new ge;e.Crypto=ge;e.CryptoKey=E;e.crypto=Ae;e.setCrypto=m})(build);const crypto$4=new build.Crypto;Application.setEngine("WebCryptoLiner",crypto$4);cryptoProvider.set(crypto$4);class DSigValidator{async getSignerKey(e){const t=e.getXmlString();let r=Parse(t);let n=r.getElementsByTagNameNS("http://www.w3.org/2000/09/xmldsig#","Signature");if(!n.length){console.log("No DSIG detected, skipping signature validation");return false}try{const e=new SignedXml(r);e.LoadXml(n[0]);const t=await e.Verify();if(t){const t=await e.XmlSignature.KeyInfo.GetIterator().find((e=>e instanceof KeyValue)).exportKey();const r=e.XmlSignature.KeyInfo.GetIterator().find((e=>e instanceof KeyInfoX509Data));const n=await this.keyToHex(t);if(r&&r.Certificates.length>0){console.info("DSIG validator: Signature includes certificate, verifying chain.");if(r.Certificates.length>1){const e=await this.keyToHex(await this.verifyCertificateChain(r.Certificates,n));return{authoritiveKey:e,signingKey:n}}else{const e=new X509Certificate(r.Certificates[0].GetRaw());const t=await this.getSignerPublicKeyFromCertificate(e);const i=await this.keyToHex(t);if(!await e.verify({publicKey:t}))throw new Error("x509 certificate verification failed!");const s=await this.keyToHex(await e.publicKey.export());if(s!=n)throw new Error("Certificate subject public key does not match XML signing key");return{authoritiveKey:i,signingKey:n}}}return{authoritiveKey:n,signingKey:n}}else{throw new Error("DSIG verification failed!")}}catch(e){console.warn("Signature validation failed: ");console.warn(e);return false}}async keyToHex(e){return"0x"+uint8tohex(new Uint8Array(await crypto$4.subtle.exportKey(e.algorithm.name==="ECDSA"?"raw":"spki",e)))}async verifyCertificateChain(e,t){for(let[r,n]of e.entries()){if(t===await this.keyToHex(await n.exportKey())){e=e.splice(r);const t=new X509ChainBuilder({certificates:e.map((e=>new X509Certificate(e.GetRaw())))});const i=await t.build(new X509Certificate(n.GetRaw()));return this.getSignerPublicKeyFromCertificate(i[i.length-1])}}throw new Error("The x509 certificate corresponding to the public key was not found")}async getSignerPublicKeyFromCertificate(e){const t=e.getExtension("2.5.29.18");if(!t)throw new Error("Root certificate does not contain issuerAltName extension");return await crypto$4.subtle.importKey("raw",new Uint8Array(t.value),{name:"ECDSA",namedCurve:"K-256"},true,["verify"])}}async function*batch$3(e,t=1){let r=[];if(t<1){t=1}for await(const n of e){r.push(n);while(r.length>=t){yield r.slice(0,t);r=r.slice(t)}}while(r.length){yield r.slice(0,t);r=r.slice(t)}}var itBatch=batch$3;const batch$2=itBatch;async function*parallelBatch$2(e,t=1){for await(const r of batch$2(e,t)){const e=r.map((e=>e().then((e=>({ok:true,value:e})),(e=>({ok:false,err:e})))));for(let t=0;t<e.length;t++){const r=await e[t];if(r.ok){yield r.value}else{throw r.err}}}}var itParallelBatch=parallelBatch$2;var isPlainObj=e=>{if(Object.prototype.toString.call(e)!=="[object Object]"){return false}const t=Object.getPrototypeOf(e);return t===null||t===Object.prototype};const isOptionObject=isPlainObj;const{hasOwnProperty:hasOwnProperty$9}=Object.prototype;const{propertyIsEnumerable:propertyIsEnumerable$2}=Object;const defineProperty$3=(e,t,r)=>Object.defineProperty(e,t,{value:r,writable:true,enumerable:true,configurable:true});const globalThis$1=commonjsGlobal;const defaultMergeOptions={concatArrays:false,ignoreUndefined:false};const getEnumerableOwnPropertyKeys=e=>{const t=[];for(const r in e){if(hasOwnProperty$9.call(e,r)){t.push(r)}}if(Object.getOwnPropertySymbols){const r=Object.getOwnPropertySymbols(e);for(const n of r){if(propertyIsEnumerable$2.call(e,n)){t.push(n)}}}return t};function clone(e){if(Array.isArray(e)){return cloneArray(e)}if(isOptionObject(e)){return cloneOptionObject(e)}return e}function cloneArray(e){const t=e.slice(0,0);getEnumerableOwnPropertyKeys(e).forEach((r=>{defineProperty$3(t,r,clone(e[r]))}));return t}function cloneOptionObject(e){const t=Object.getPrototypeOf(e)===null?Object.create(null):{};getEnumerableOwnPropertyKeys(e).forEach((r=>{defineProperty$3(t,r,clone(e[r]))}));return t}const mergeKeys=(e,t,r,n)=>{r.forEach((r=>{if(typeof t[r]==="undefined"&&n.ignoreUndefined){return}if(r in e&&e[r]!==Object.getPrototypeOf(e)){defineProperty$3(e,r,merge(e[r],t[r],n))}else{defineProperty$3(e,r,clone(t[r]))}}));return e};const concatArrays=(e,t,r)=>{let n=e.slice(0,0);let i=0;[e,t].forEach((t=>{const s=[];for(let r=0;r<t.length;r++){if(!hasOwnProperty$9.call(t,r)){continue}s.push(String(r));if(t===e){defineProperty$3(n,i++,t[r])}else{defineProperty$3(n,i++,clone(t[r]))}}n=mergeKeys(n,t,getEnumerableOwnPropertyKeys(t).filter((e=>!s.includes(e))),r)}));return n};function merge(e,t,r){if(r.concatArrays&&Array.isArray(e)&&Array.isArray(t)){return concatArrays(e,t,r)}if(!isOptionObject(t)||!isOptionObject(e)){return clone(t)}return mergeKeys(e,t,getEnumerableOwnPropertyKeys(t),r)}var mergeOptions$1=function(...e){const t=merge(clone(defaultMergeOptions),this!==globalThis$1&&this||{},defaultMergeOptions);let r={_:{}};for(const n of e){if(n===undefined){continue}if(!isOptionObject(n)){throw new TypeError("`"+n+"` is not an Option Object")}r=merge(r,{_:n},t)}return r._};function assign$1(e,t){for(const r in t){Object.defineProperty(e,r,{value:t[r],enumerable:true,configurable:true})}return e}function createError(e,t,r){if(!e||typeof e==="string"){throw new TypeError("Please pass an Error to err-code")}if(!r){r={}}if(typeof t==="object"){r=t;t=""}if(t){r.code=t}try{return assign$1(e,r)}catch(t){r.message=e.message;r.stack=e.stack;const n=function(){};n.prototype=Object.create(Object.getPrototypeOf(e));const i=assign$1(new n,r);return i}}var errCode$3=createError;var src$c={exports:{}};function base$d(e){if(e.length>=255){throw new TypeError("Alphabet too long")}var t=new Uint8Array(256);for(var r=0;r<t.length;r++){t[r]=255}for(var n=0;n<e.length;n++){var i=e.charAt(n);var s=i.charCodeAt(0);if(t[s]!==255){throw new TypeError(i+" is ambiguous")}t[s]=n}var a=e.length;var o=e.charAt(0);var f=Math.log(a)/Math.log(256);var c=Math.log(256)/Math.log(a);function u(t){if(t instanceof Uint8Array);else if(ArrayBuffer.isView(t)){t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}else if(Array.isArray(t)){t=Uint8Array.from(t)}if(!(t instanceof Uint8Array)){throw new TypeError("Expected Uint8Array")}if(t.length===0){return""}var r=0;var n=0;var i=0;var s=t.length;while(i!==s&&t[i]===0){i++;r++}var f=(s-i)*c+1>>>0;var u=new Uint8Array(f);while(i!==s){var l=t[i];var h=0;for(var d=f-1;(l!==0||h<n)&&d!==-1;d--,h++){l+=256*u[d]>>>0;u[d]=l%a>>>0;l=l/a>>>0}if(l!==0){throw new Error("Non-zero carry")}n=h;i++}var p=f-n;while(p!==f&&u[p]===0){p++}var y=o.repeat(r);for(;p<f;++p){y+=e.charAt(u[p])}return y}function l(e){if(typeof e!=="string"){throw new TypeError("Expected String")}if(e.length===0){return new Uint8Array}var r=0;if(e[r]===" "){return}var n=0;var i=0;while(e[r]===o){n++;r++}var s=(e.length-r)*f+1>>>0;var c=new Uint8Array(s);while(e[r]){var u=t[e.charCodeAt(r)];if(u===255){return}var l=0;for(var h=s-1;(u!==0||l<i)&&h!==-1;h--,l++){u+=a*c[h]>>>0;c[h]=u%256>>>0;u=u/256>>>0}if(u!==0){throw new Error("Non-zero carry")}i=l;r++}if(e[r]===" "){return}var d=s-i;while(d!==s&&c[d]===0){d++}var p=new Uint8Array(n+(s-d));var y=n;while(d!==s){p[y++]=c[d++]}return p}function h(e){var t=l(e);if(t){return t}throw new Error("Non-base"+a+" character")}return{encode:u,decodeUnsafe:l,decode:h}}var src$b=base$d;const textDecoder$1=new TextDecoder;const decodeText$1=e=>textDecoder$1.decode(e);const textEncoder$1=new TextEncoder;const encodeText$2=e=>textEncoder$1.encode(e);function concat$8(e,t){const r=new Uint8Array(t);let n=0;for(const t of e){r.set(t,n);n+=t.length}return r}var util$f={decodeText:decodeText$1,encodeText:encodeText$2,concat:concat$8};const{encodeText:encodeText$1}=util$f;class Base$2{constructor(e,t,r,n){this.name=e;this.code=t;this.codeBuf=encodeText$1(this.code);this.alphabet=n;this.codec=r(n)}encode(e){return this.codec.encode(e)}decode(e){for(const t of e){if(this.alphabet&&this.alphabet.indexOf(t)<0){throw new Error(`invalid character '${t}' in '${e}'`)}}return this.codec.decode(e)}}var base$c=Base$2;const decode$b=(e,t,r)=>{const n={};for(let e=0;e<t.length;++e){n[t[e]]=e}let i=e.length;while(e[i-1]==="="){--i}const s=new Uint8Array(i*r/8|0);let a=0;let o=0;let f=0;for(let t=0;t<i;++t){const i=n[e[t]];if(i===undefined){throw new SyntaxError("Invalid character "+e[t])}o=o<<r|i;a+=r;if(a>=8){a-=8;s[f++]=255&o>>a}}if(a>=r||255&o<<8-a){throw new SyntaxError("Unexpected end of data")}return s};const encode$b=(e,t,r)=>{const n=t[t.length-1]==="=";const i=(1<<r)-1;let s="";let a=0;let o=0;for(let n=0;n<e.length;++n){o=o<<8|e[n];a+=8;while(a>r){a-=r;s+=t[i&o>>a]}}if(a){s+=t[i&o<<r-a]}if(n){while(s.length*r&7){s+="="}}return s};const rfc4648$2=e=>t=>({encode(r){return encode$b(r,t,e)},decode(r){return decode$b(r,t,e)}});var rfc4648_1={rfc4648:rfc4648$2};const baseX$3=src$b;const Base$1=base$c;const{rfc4648:rfc4648$1}=rfc4648_1;const{decodeText,encodeText}=util$f;const identity$8=()=>({encode:decodeText,decode:encodeText});const constants$6=[["identity","\0",identity$8,""],["base2","0",rfc4648$1(1),"01"],["base8","7",rfc4648$1(3),"01234567"],["base10","9",baseX$3,"0123456789"],["base16","f",rfc4648$1(4),"0123456789abcdef"],["base16upper","F",rfc4648$1(4),"0123456789ABCDEF"],["base32hex","v",rfc4648$1(5),"0123456789abcdefghijklmnopqrstuv"],["base32hexupper","V",rfc4648$1(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV"],["base32hexpad","t",rfc4648$1(5),"0123456789abcdefghijklmnopqrstuv="],["base32hexpadupper","T",rfc4648$1(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV="],["base32","b",rfc4648$1(5),"abcdefghijklmnopqrstuvwxyz234567"],["base32upper","B",rfc4648$1(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"],["base32pad","c",rfc4648$1(5),"abcdefghijklmnopqrstuvwxyz234567="],["base32padupper","C",rfc4648$1(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567="],["base32z","h",rfc4648$1(5),"ybndrfg8ejkmcpqxot1uwisza345h769"],["base36","k",baseX$3,"0123456789abcdefghijklmnopqrstuvwxyz"],["base36upper","K",baseX$3,"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"],["base58btc","z",baseX$3,"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"],["base58flickr","Z",baseX$3,"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"],["base64","m",rfc4648$1(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"],["base64pad","M",rfc4648$1(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="],["base64url","u",rfc4648$1(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"],["base64urlpad","U",rfc4648$1(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_="]];const names$2=constants$6.reduce(((e,t)=>{e[t[0]]=new Base$1(t[0],t[1],t[2],t[3]);return e}),{});const codes$1=constants$6.reduce(((e,t)=>{e[t[1]]=names$2[t[0]];return e}),{});var constants_1$1={names:names$2,codes:codes$1};(function(e,t){const r=constants_1$1;const{encodeText:n,decodeText:i,concat:s}=util$f;function a(e,t){if(!t){throw new Error("requires an encoded Uint8Array")}const{name:r,codeBuf:n}=l(e);u(r,t);return s([n,t],n.length+t.length)}function o(e,t){const r=l(e);const i=n(r.encode(t));return s([r.codeBuf,i],r.codeBuf.length+i.length)}function f(e){if(e instanceof Uint8Array){e=i(e)}const t=e[0];if(["f","F","v","V","t","T","b","B","c","C","h","k","K"].includes(t)){e=e.toLowerCase()}const r=l(e[0]);return r.decode(e.substring(1))}function c(e){if(e instanceof Uint8Array){e=i(e)}if(Object.prototype.toString.call(e)!=="[object String]"){return false}try{const t=l(e[0]);return t.name}catch(e){return false}}function u(e,t){const r=l(e);r.decode(i(t))}function l(e){if(Object.prototype.hasOwnProperty.call(r.names,e)){return r.names[e]}else if(Object.prototype.hasOwnProperty.call(r.codes,e)){return r.codes[e]}else{throw new Error(`Unsupported encoding: ${e}`)}}function h(e){if(e instanceof Uint8Array){e=i(e)}return l(e[0])}t=e.exports=a;t.encode=o;t.decode=f;t.isEncoded=c;t.encoding=l;t.encodingFromData=h;const d=Object.freeze(r.names);const p=Object.freeze(r.codes);t.names=d;t.codes=p})(src$c,src$c.exports);var encode_1$2=encode$a;var MSB$4=128,REST$4=127,MSBALL$2=~REST$4,INT$2=Math.pow(2,31);function encode$a(e,t,r){t=t||[];r=r||0;var n=r;while(e>=INT$2){t[r++]=e&255|MSB$4;e/=128}while(e&MSBALL$2){t[r++]=e&255|MSB$4;e>>>=7}t[r]=e|0;encode$a.bytes=r-n+1;return t}var decode$a=read$2;var MSB$3=128,REST$3=127;function read$2(e,t){var r=0,t=t||0,n=0,i=t,s,a=e.length;do{if(i>=a){read$2.bytes=0;throw new RangeError("Could not decode varint")}s=e[i++];r+=n<28?(s&REST$3)<<n:(s&REST$3)*Math.pow(2,n);n+=7}while(s>=MSB$3);read$2.bytes=i-t;return r}var N1$2=Math.pow(2,7);var N2$2=Math.pow(2,14);var N3$2=Math.pow(2,21);var N4$2=Math.pow(2,28);var N5$2=Math.pow(2,35);var N6$2=Math.pow(2,42);var N7$2=Math.pow(2,49);var N8$2=Math.pow(2,56);var N9$2=Math.pow(2,63);var length$2=function(e){return e<N1$2?1:e<N2$2?2:e<N3$2?3:e<N4$2?4:e<N5$2?5:e<N6$2?6:e<N7$2?7:e<N8$2?8:e<N9$2?9:10};var varint$a={encode:encode_1$2,decode:decode$a,encodingLength:length$2};const names$1=Object.freeze({identity:0,sha1:17,"sha2-256":18,"sha2-512":19,"sha3-512":20,"sha3-384":21,"sha3-256":22,"sha3-224":23,"shake-128":24,"shake-256":25,"keccak-224":26,"keccak-256":27,"keccak-384":28,"keccak-512":29,blake3:30,"murmur3-128":34,"murmur3-32":35,"dbl-sha2-256":86,md4:212,md5:213,bmt:214,"sha2-256-trunc254-padded":4114,"ripemd-128":4178,"ripemd-160":4179,"ripemd-256":4180,"ripemd-320":4181,x11:4352,kangarootwelve:7425,"sm3-256":21325,"blake2b-8":45569,"blake2b-16":45570,"blake2b-24":45571,"blake2b-32":45572,"blake2b-40":45573,"blake2b-48":45574,"blake2b-56":45575,"blake2b-64":45576,"blake2b-72":45577,"blake2b-80":45578,"blake2b-88":45579,"blake2b-96":45580,"blake2b-104":45581,"blake2b-112":45582,"blake2b-120":45583,"blake2b-128":45584,"blake2b-136":45585,"blake2b-144":45586,"blake2b-152":45587,"blake2b-160":45588,"blake2b-168":45589,"blake2b-176":45590,"blake2b-184":45591,"blake2b-192":45592,"blake2b-200":45593,"blake2b-208":45594,"blake2b-216":45595,"blake2b-224":45596,"blake2b-232":45597,"blake2b-240":45598,"blake2b-248":45599,"blake2b-256":45600,"blake2b-264":45601,"blake2b-272":45602,"blake2b-280":45603,"blake2b-288":45604,"blake2b-296":45605,"blake2b-304":45606,"blake2b-312":45607,"blake2b-320":45608,"blake2b-328":45609,"blake2b-336":45610,"blake2b-344":45611,"blake2b-352":45612,"blake2b-360":45613,"blake2b-368":45614,"blake2b-376":45615,"blake2b-384":45616,"blake2b-392":45617,"blake2b-400":45618,"blake2b-408":45619,"blake2b-416":45620,"blake2b-424":45621,"blake2b-432":45622,"blake2b-440":45623,"blake2b-448":45624,"blake2b-456":45625,"blake2b-464":45626,"blake2b-472":45627,"blake2b-480":45628,"blake2b-488":45629,"blake2b-496":45630,"blake2b-504":45631,"blake2b-512":45632,"blake2s-8":45633,"blake2s-16":45634,"blake2s-24":45635,"blake2s-32":45636,"blake2s-40":45637,"blake2s-48":45638,"blake2s-56":45639,"blake2s-64":45640,"blake2s-72":45641,"blake2s-80":45642,"blake2s-88":45643,"blake2s-96":45644,"blake2s-104":45645,"blake2s-112":45646,"blake2s-120":45647,"blake2s-128":45648,"blake2s-136":45649,"blake2s-144":45650,"blake2s-152":45651,"blake2s-160":45652,"blake2s-168":45653,"blake2s-176":45654,"blake2s-184":45655,"blake2s-192":45656,"blake2s-200":45657,"blake2s-208":45658,"blake2s-216":45659,"blake2s-224":45660,"blake2s-232":45661,"blake2s-240":45662,"blake2s-248":45663,"blake2s-256":45664,"skein256-8":45825,"skein256-16":45826,"skein256-24":45827,"skein256-32":45828,"skein256-40":45829,"skein256-48":45830,"skein256-56":45831,"skein256-64":45832,"skein256-72":45833,"skein256-80":45834,"skein256-88":45835,"skein256-96":45836,"skein256-104":45837,"skein256-112":45838,"skein256-120":45839,"skein256-128":45840,"skein256-136":45841,"skein256-144":45842,"skein256-152":45843,"skein256-160":45844,"skein256-168":45845,"skein256-176":45846,"skein256-184":45847,"skein256-192":45848,"skein256-200":45849,"skein256-208":45850,"skein256-216":45851,"skein256-224":45852,"skein256-232":45853,"skein256-240":45854,"skein256-248":45855,"skein256-256":45856,"skein512-8":45857,"skein512-16":45858,"skein512-24":45859,"skein512-32":45860,"skein512-40":45861,"skein512-48":45862,"skein512-56":45863,"skein512-64":45864,"skein512-72":45865,"skein512-80":45866,"skein512-88":45867,"skein512-96":45868,"skein512-104":45869,"skein512-112":45870,"skein512-120":45871,"skein512-128":45872,"skein512-136":45873,"skein512-144":45874,"skein512-152":45875,"skein512-160":45876,"skein512-168":45877,"skein512-176":45878,"skein512-184":45879,"skein512-192":45880,"skein512-200":45881,"skein512-208":45882,"skein512-216":45883,"skein512-224":45884,"skein512-232":45885,"skein512-240":45886,"skein512-248":45887,"skein512-256":45888,"skein512-264":45889,"skein512-272":45890,"skein512-280":45891,"skein512-288":45892,"skein512-296":45893,"skein512-304":45894,"skein512-312":45895,"skein512-320":45896,"skein512-328":45897,"skein512-336":45898,"skein512-344":45899,"skein512-352":45900,"skein512-360":45901,"skein512-368":45902,"skein512-376":45903,"skein512-384":45904,"skein512-392":45905,"skein512-400":45906,"skein512-408":45907,"skein512-416":45908,"skein512-424":45909,"skein512-432":45910,"skein512-440":45911,"skein512-448":45912,"skein512-456":45913,"skein512-464":45914,"skein512-472":45915,"skein512-480":45916,"skein512-488":45917,"skein512-496":45918,"skein512-504":45919,"skein512-512":45920,"skein1024-8":45921,"skein1024-16":45922,"skein1024-24":45923,"skein1024-32":45924,"skein1024-40":45925,"skein1024-48":45926,"skein1024-56":45927,"skein1024-64":45928,"skein1024-72":45929,"skein1024-80":45930,"skein1024-88":45931,"skein1024-96":45932,"skein1024-104":45933,"skein1024-112":45934,"skein1024-120":45935,"skein1024-128":45936,"skein1024-136":45937,"skein1024-144":45938,"skein1024-152":45939,"skein1024-160":45940,"skein1024-168":45941,"skein1024-176":45942,"skein1024-184":45943,"skein1024-192":45944,"skein1024-200":45945,"skein1024-208":45946,"skein1024-216":45947,"skein1024-224":45948,"skein1024-232":45949,"skein1024-240":45950,"skein1024-248":45951,"skein1024-256":45952,"skein1024-264":45953,"skein1024-272":45954,"skein1024-280":45955,"skein1024-288":45956,"skein1024-296":45957,"skein1024-304":45958,"skein1024-312":45959,"skein1024-320":45960,"skein1024-328":45961,"skein1024-336":45962,"skein1024-344":45963,"skein1024-352":45964,"skein1024-360":45965,"skein1024-368":45966,"skein1024-376":45967,"skein1024-384":45968,"skein1024-392":45969,"skein1024-400":45970,"skein1024-408":45971,"skein1024-416":45972,"skein1024-424":45973,"skein1024-432":45974,"skein1024-440":45975,"skein1024-448":45976,"skein1024-456":45977,"skein1024-464":45978,"skein1024-472":45979,"skein1024-480":45980,"skein1024-488":45981,"skein1024-496":45982,"skein1024-504":45983,"skein1024-512":45984,"skein1024-520":45985,"skein1024-528":45986,"skein1024-536":45987,"skein1024-544":45988,"skein1024-552":45989,"skein1024-560":45990,"skein1024-568":45991,"skein1024-576":45992,"skein1024-584":45993,"skein1024-592":45994,"skein1024-600":45995,"skein1024-608":45996,"skein1024-616":45997,"skein1024-624":45998,"skein1024-632":45999,"skein1024-640":46e3,"skein1024-648":46001,"skein1024-656":46002,"skein1024-664":46003,"skein1024-672":46004,"skein1024-680":46005,"skein1024-688":46006,"skein1024-696":46007,"skein1024-704":46008,"skein1024-712":46009,"skein1024-720":46010,"skein1024-728":46011,"skein1024-736":46012,"skein1024-744":46013,"skein1024-752":46014,"skein1024-760":46015,"skein1024-768":46016,"skein1024-776":46017,"skein1024-784":46018,"skein1024-792":46019,"skein1024-800":46020,"skein1024-808":46021,"skein1024-816":46022,"skein1024-824":46023,"skein1024-832":46024,"skein1024-840":46025,"skein1024-848":46026,"skein1024-856":46027,"skein1024-864":46028,"skein1024-872":46029,"skein1024-880":46030,"skein1024-888":46031,"skein1024-896":46032,"skein1024-904":46033,"skein1024-912":46034,"skein1024-920":46035,"skein1024-928":46036,"skein1024-936":46037,"skein1024-944":46038,"skein1024-952":46039,"skein1024-960":46040,"skein1024-968":46041,"skein1024-976":46042,"skein1024-984":46043,"skein1024-992":46044,"skein1024-1000":46045,"skein1024-1008":46046,"skein1024-1016":46047,"skein1024-1024":46048,"poseidon-bls12_381-a2-fc1":46081,"poseidon-bls12_381-a2-fc1-sc":46082});var constants$5={names:names$1};var toString$9={};var basics$5={};var identity$7={};var base$b={};function base$a(e,t){if(e.length>=255){throw new TypeError("Alphabet too long")}var r=new Uint8Array(256);for(var n=0;n<r.length;n++){r[n]=255}for(var i=0;i<e.length;i++){var s=e.charAt(i);var a=s.charCodeAt(0);if(r[a]!==255){throw new TypeError(s+" is ambiguous")}r[a]=i}var o=e.length;var f=e.charAt(0);var c=Math.log(o)/Math.log(256);var u=Math.log(256)/Math.log(o);function l(t){if(t instanceof Uint8Array);else if(ArrayBuffer.isView(t)){t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}else if(Array.isArray(t)){t=Uint8Array.from(t)}if(!(t instanceof Uint8Array)){throw new TypeError("Expected Uint8Array")}if(t.length===0){return""}var r=0;var n=0;var i=0;var s=t.length;while(i!==s&&t[i]===0){i++;r++}var a=(s-i)*u+1>>>0;var c=new Uint8Array(a);while(i!==s){var l=t[i];var h=0;for(var d=a-1;(l!==0||h<n)&&d!==-1;d--,h++){l+=256*c[d]>>>0;c[d]=l%o>>>0;l=l/o>>>0}if(l!==0){throw new Error("Non-zero carry")}n=h;i++}var p=a-n;while(p!==a&&c[p]===0){p++}var y=f.repeat(r);for(;p<a;++p){y+=e.charAt(c[p])}return y}function h(e){if(typeof e!=="string"){throw new TypeError("Expected String")}if(e.length===0){return new Uint8Array}var t=0;if(e[t]===" "){return}var n=0;var i=0;while(e[t]===f){n++;t++}var s=(e.length-t)*c+1>>>0;var a=new Uint8Array(s);while(e[t]){var u=r[e.charCodeAt(t)];if(u===255){return}var l=0;for(var h=s-1;(u!==0||l<i)&&h!==-1;h--,l++){u+=o*a[h]>>>0;a[h]=u%256>>>0;u=u/256>>>0}if(u!==0){throw new Error("Non-zero carry")}i=l;t++}if(e[t]===" "){return}var d=s-i;while(d!==s&&a[d]===0){d++}var p=new Uint8Array(n+(s-d));var y=n;while(d!==s){p[y++]=a[d++]}return p}function d(e){var r=h(e);if(r){return r}throw new Error(`Non-${t} character`)}return{encode:l,decodeUnsafe:h,decode:d}}var src$a=base$a;var _brrp__multiformats_scope_baseX=src$a;var baseX$2=_brrp__multiformats_scope_baseX;var bytes$8={};Object.defineProperty(bytes$8,"__esModule",{value:true});const empty=new Uint8Array(0);const toHex$1=e=>e.reduce(((e,t)=>e+t.toString(16).padStart(2,"0")),"");const fromHex=e=>{const t=e.match(/../g);return t?new Uint8Array(t.map((e=>parseInt(e,16)))):empty};const equals$7=(e,t)=>{if(e===t)return true;if(e.byteLength!==t.byteLength){return false}for(let r=0;r<e.byteLength;r++){if(e[r]!==t[r]){return false}}return true};const coerce$2=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e)){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}throw new Error("Unknown type, must be binary type")};const isBinary=e=>e instanceof ArrayBuffer||ArrayBuffer.isView(e);const fromString$9=e=>(new TextEncoder).encode(e);const toString$8=e=>(new TextDecoder).decode(e);bytes$8.coerce=coerce$2;bytes$8.empty=empty;bytes$8.equals=equals$7;bytes$8.fromHex=fromHex;bytes$8.fromString=fromString$9;bytes$8.isBinary=isBinary;bytes$8.toHex=toHex$1;bytes$8.toString=toString$8;Object.defineProperty(base$b,"__esModule",{value:true});var baseX$1=baseX$2;var bytes$7=bytes$8;class Encoder{constructor(e,t,r){this.name=e;this.prefix=t;this.baseEncode=r}encode(e){if(e instanceof Uint8Array){return`${this.prefix}${this.baseEncode(e)}`}else{throw Error("Unknown type, must be binary type")}}}class Decoder{constructor(e,t,r){this.name=e;this.prefix=t;if(t.codePointAt(0)===undefined){throw new Error("Invalid prefix character")}this.prefixCodePoint=t.codePointAt(0);this.baseDecode=r}decode(e){if(typeof e==="string"){if(e.codePointAt(0)!==this.prefixCodePoint){throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`)}return this.baseDecode(e.slice(this.prefix.length))}else{throw Error("Can only multibase decode strings")}}or(e){return or(this,e)}}class ComposedDecoder{constructor(e){this.decoders=e}or(e){return or(this,e)}decode(e){const t=e[0];const r=this.decoders[t];if(r){return r.decode(e)}else{throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}}const or=(e,t)=>new ComposedDecoder({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class Codec{constructor(e,t,r,n){this.name=e;this.prefix=t;this.baseEncode=r;this.baseDecode=n;this.encoder=new Encoder(e,t,r);this.decoder=new Decoder(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const from$1=({name:e,prefix:t,encode:r,decode:n})=>new Codec(e,t,r,n);const baseX=({prefix:e,name:t,alphabet:r})=>{const{encode:n,decode:i}=baseX$1(r,t);return from$1({prefix:e,name:t,encode:n,decode:e=>bytes$7.coerce(i(e))})};const decode$9=(e,t,r,n)=>{const i={};for(let e=0;e<t.length;++e){i[t[e]]=e}let s=e.length;while(e[s-1]==="="){--s}const a=new Uint8Array(s*r/8|0);let o=0;let f=0;let c=0;for(let t=0;t<s;++t){const s=i[e[t]];if(s===undefined){throw new SyntaxError(`Non-${n} character`)}f=f<<r|s;o+=r;if(o>=8){o-=8;a[c++]=255&f>>o}}if(o>=r||255&f<<8-o){throw new SyntaxError("Unexpected end of data")}return a};const encode$9=(e,t,r)=>{const n=t[t.length-1]==="=";const i=(1<<r)-1;let s="";let a=0;let o=0;for(let n=0;n<e.length;++n){o=o<<8|e[n];a+=8;while(a>r){a-=r;s+=t[i&o>>a]}}if(a){s+=t[i&o<<r-a]}if(n){while(s.length*r&7){s+="="}}return s};const rfc4648=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>from$1({prefix:t,name:e,encode(e){return encode$9(e,n,r)},decode(t){return decode$9(t,n,r,e)}});base$b.Codec=Codec;base$b.baseX=baseX;base$b.from=from$1;base$b.or=or;base$b.rfc4648=rfc4648;Object.defineProperty(identity$7,"__esModule",{value:true});var base$9=base$b;var bytes$6=bytes$8;const identity$6=base$9.from({prefix:"\0",name:"identity",encode:e=>bytes$6.toString(e),decode:e=>bytes$6.fromString(e)});identity$7.identity=identity$6;var base2$2={};Object.defineProperty(base2$2,"__esModule",{value:true});var base$8=base$b;const base2$1=base$8.rfc4648({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});base2$2.base2=base2$1;var base8$2={};Object.defineProperty(base8$2,"__esModule",{value:true});var base$7=base$b;const base8$1=base$7.rfc4648({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});base8$2.base8=base8$1;var base10$2={};Object.defineProperty(base10$2,"__esModule",{value:true});var base$6=base$b;const base10$1=base$6.baseX({prefix:"9",name:"base10",alphabet:"0123456789"});base10$2.base10=base10$1;var base16$2={};Object.defineProperty(base16$2,"__esModule",{value:true});var base$5=base$b;const base16$1=base$5.rfc4648({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4});const base16upper=base$5.rfc4648({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});base16$2.base16=base16$1;base16$2.base16upper=base16upper;var base32$3={};Object.defineProperty(base32$3,"__esModule",{value:true});var base$4=base$b;const base32$2=base$4.rfc4648({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});const base32upper=base$4.rfc4648({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});const base32pad=base$4.rfc4648({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});const base32padupper=base$4.rfc4648({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});const base32hex=base$4.rfc4648({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});const base32hexupper=base$4.rfc4648({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});const base32hexpad=base$4.rfc4648({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});const base32hexpadupper=base$4.rfc4648({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});const base32z=base$4.rfc4648({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});base32$3.base32=base32$2;base32$3.base32hex=base32hex;base32$3.base32hexpad=base32hexpad;base32$3.base32hexpadupper=base32hexpadupper;base32$3.base32hexupper=base32hexupper;base32$3.base32pad=base32pad;base32$3.base32padupper=base32padupper;base32$3.base32upper=base32upper;base32$3.base32z=base32z;var base36$2={};Object.defineProperty(base36$2,"__esModule",{value:true});var base$3=base$b;const base36$1=base$3.baseX({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"});const base36upper=base$3.baseX({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});base36$2.base36=base36$1;base36$2.base36upper=base36upper;var base58$2={};Object.defineProperty(base58$2,"__esModule",{value:true});var base$2=base$b;const base58btc=base$2.baseX({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});const base58flickr=base$2.baseX({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});base58$2.base58btc=base58btc;base58$2.base58flickr=base58flickr;var base64$5={};Object.defineProperty(base64$5,"__esModule",{value:true});var base$1=base$b;const base64$4=base$1.rfc4648({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});const base64pad=base$1.rfc4648({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6});const base64url=base$1.rfc4648({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6});const base64urlpad=base$1.rfc4648({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});base64$5.base64=base64$4;base64$5.base64pad=base64pad;base64$5.base64url=base64url;base64$5.base64urlpad=base64urlpad;var base256emoji$2={};Object.defineProperty(base256emoji$2,"__esModule",{value:true});var base=base$b;const alphabet=Array.from("");const alphabetBytesToChars=alphabet.reduce(((e,t,r)=>{e[r]=t;return e}),[]);const alphabetCharsToBytes=alphabet.reduce(((e,t,r)=>{e[t.codePointAt(0)]=r;return e}),[]);function encode$8(e){return e.reduce(((e,t)=>{e+=alphabetBytesToChars[t];return e}),"")}function decode$8(e){const t=[];for(const r of e){const e=alphabetCharsToBytes[r.codePointAt(0)];if(e===undefined){throw new Error(`Non-base256emoji character: ${r}`)}t.push(e)}return new Uint8Array(t)}const base256emoji$1=base.from({prefix:"",name:"base256emoji",encode:encode$8,decode:decode$8});base256emoji$2.base256emoji=base256emoji$1;var sha2Browser={};var hasher$3={};var digest$6={};var varint$9={};var encode_1$1=encode$7;var MSB$2=128,REST$2=127,MSBALL$1=~REST$2,INT$1=Math.pow(2,31);function encode$7(e,t,r){t=t||[];r=r||0;var n=r;while(e>=INT$1){t[r++]=e&255|MSB$2;e/=128}while(e&MSBALL$1){t[r++]=e&255|MSB$2;e>>>=7}t[r]=e|0;encode$7.bytes=r-n+1;return t}var decode$7=read$1;var MSB$1$1=128,REST$1$1=127;function read$1(e,t){var r=0,t=t||0,n=0,i=t,s,a=e.length;do{if(i>=a){read$1.bytes=0;throw new RangeError("Could not decode varint")}s=e[i++];r+=n<28?(s&REST$1$1)<<n:(s&REST$1$1)*Math.pow(2,n);n+=7}while(s>=MSB$1$1);read$1.bytes=i-t;return r}var N1$1=Math.pow(2,7);var N2$1=Math.pow(2,14);var N3$1=Math.pow(2,21);var N4$1=Math.pow(2,28);var N5$1=Math.pow(2,35);var N6$1=Math.pow(2,42);var N7$1=Math.pow(2,49);var N8$1=Math.pow(2,56);var N9$1=Math.pow(2,63);var length$1=function(e){return e<N1$1?1:e<N2$1?2:e<N3$1?3:e<N4$1?4:e<N5$1?5:e<N6$1?6:e<N7$1?7:e<N8$1?8:e<N9$1?9:10};var varint$8={encode:encode_1$1,decode:decode$7,encodingLength:length$1};var _brrp_varint=varint$8;var varint$1$2=_brrp_varint;var varint_1=varint$1$2;Object.defineProperty(varint$9,"__esModule",{value:true});var varint$1$1=varint_1;const decode$6=(e,t=0)=>{const r=varint$1$1.decode(e,t);return[r,varint$1$1.decode.bytes]};const encodeTo=(e,t,r=0)=>{varint$1$1.encode(e,t,r);return t};const encodingLength=e=>varint$1$1.encodingLength(e);varint$9.decode=decode$6;varint$9.encodeTo=encodeTo;varint$9.encodingLength=encodingLength;Object.defineProperty(digest$6,"__esModule",{value:true});var bytes$5=bytes$8;var varint$7=varint$9;const create$4=(e,t)=>{const r=t.byteLength;const n=varint$7.encodingLength(e);const i=n+varint$7.encodingLength(r);const s=new Uint8Array(i+r);varint$7.encodeTo(e,s,0);varint$7.encodeTo(r,s,n);s.set(t,i);return new Digest(e,r,t,s)};const decode$5=e=>{const t=bytes$5.coerce(e);const[r,n]=varint$7.decode(t);const[i,s]=varint$7.decode(t.subarray(n));const a=t.subarray(n+s);if(a.byteLength!==i){throw new Error("Incorrect length")}return new Digest(r,i,a,t)};const equals$6=(e,t)=>{if(e===t){return true}else{return e.code===t.code&&e.size===t.size&&bytes$5.equals(e.bytes,t.bytes)}};class Digest{constructor(e,t,r,n){this.code=e;this.size=t;this.digest=r;this.bytes=n}}digest$6.Digest=Digest;digest$6.create=create$4;digest$6.decode=decode$5;digest$6.equals=equals$6;Object.defineProperty(hasher$3,"__esModule",{value:true});var digest$5=digest$6;const from=({name:e,code:t,encode:r})=>new Hasher(e,t,r);class Hasher{constructor(e,t,r){this.name=e;this.code=t;this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?digest$5.create(this.code,t):t.then((e=>digest$5.create(this.code,e)))}else{throw Error("Unknown type, must be binary type")}}}hasher$3.Hasher=Hasher;hasher$3.from=from;Object.defineProperty(sha2Browser,"__esModule",{value:true});var hasher$2=hasher$3;const sha$1=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t));const sha256=hasher$2.from({name:"sha2-256",code:18,encode:sha$1("SHA-256")});const sha512=hasher$2.from({name:"sha2-512",code:19,encode:sha$1("SHA-512")});sha2Browser.sha256=sha256;sha2Browser.sha512=sha512;var identity$5={};Object.defineProperty(identity$5,"__esModule",{value:true});var bytes$4=bytes$8;var digest$1$1=digest$6;const code$3=0;const name$2="identity";const encode$6=bytes$4.coerce;const digest$4=e=>digest$1$1.create(code$3,encode$6(e));const identity$4={code:code$3,name:name$2,encode:encode$6,digest:digest$4};identity$5.identity=identity$4;var raw$1={};Object.defineProperty(raw$1,"__esModule",{value:true});var bytes$3=bytes$8;const name$1="raw";const code$2=85;const encode$5=e=>bytes$3.coerce(e);const decode$4=e=>bytes$3.coerce(e);raw$1.code=code$2;raw$1.decode=decode$4;raw$1.encode=encode$5;raw$1.name=name$1;var json$1={};Object.defineProperty(json$1,"__esModule",{value:true});const textEncoder=new TextEncoder;const textDecoder=new TextDecoder;const name="json";const code$1=512;const encode$4=e=>textEncoder.encode(JSON.stringify(e));const decode$3=e=>JSON.parse(textDecoder.decode(e));json$1.code=code$1;json$1.decode=decode$3;json$1.encode=encode$4;json$1.name=name;var src$9={};var cid$4={};Object.defineProperty(cid$4,"__esModule",{value:true});var varint$6=varint$9;var digest$3=digest$6;var base58$1=base58$2;var base32$1=base32$3;var bytes$2=bytes$8;class CID$6{constructor(e,t,r,n){this.code=t;this.version=e;this.multihash=r;this.bytes=n;this.byteOffset=n.byteOffset;this.byteLength=n.byteLength;this.asCID=this;this._baseCache=new Map;Object.defineProperties(this,{byteOffset:hidden,byteLength:hidden,code:readonly,version:readonly,multihash:readonly,bytes:readonly,_baseCache:hidden,asCID:hidden})}toV0(){switch(this.version){case 0:{return this}default:{const{code:e,multihash:t}=this;if(e!==DAG_PB_CODE){throw new Error("Cannot convert a non dag-pb CID to CIDv0")}if(t.code!==SHA_256_CODE){throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0")}return CID$6.createV0(t)}}}toV1(){switch(this.version){case 0:{const{code:e,digest:t}=this.multihash;const r=digest$3.create(e,t);return CID$6.createV1(this.code,r)}case 1:{return this}default:{throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}}equals(e){return e&&this.code===e.code&&this.version===e.version&&digest$3.equals(this.multihash,e.multihash)}toString(e){const{bytes:t,version:r,_baseCache:n}=this;switch(r){case 0:return toStringV0(t,n,e||base58$1.base58btc.encoder);default:return toStringV1(t,n,e||base32$1.base32.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){deprecate(/^0\.0/,IS_CID_DEPRECATION);return!!(e&&(e[cidSymbol]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof CID$6){return e}else if(e!=null&&e.asCID===e){const{version:t,code:r,multihash:n,bytes:i}=e;return new CID$6(t,r,n,i||encodeCID(t,r,n.bytes))}else if(e!=null&&e[cidSymbol]===true){const{version:t,multihash:r,code:n}=e;const i=digest$3.decode(r);return CID$6.create(t,n,i)}else{return null}}static create(e,t,r){if(typeof t!=="number"){throw new Error("String codecs are no longer supported")}switch(e){case 0:{if(t!==DAG_PB_CODE){throw new Error(`Version 0 CID must use dag-pb (code: ${DAG_PB_CODE}) block encoding`)}else{return new CID$6(e,t,r,r.bytes)}}case 1:{const n=encodeCID(e,t,r.bytes);return new CID$6(e,t,r,n)}default:{throw new Error("Invalid version")}}}static createV0(e){return CID$6.create(0,DAG_PB_CODE,e)}static createV1(e,t){return CID$6.create(1,e,t)}static decode(e){const[t,r]=CID$6.decodeFirst(e);if(r.length){throw new Error("Incorrect length")}return t}static decodeFirst(e){const t=CID$6.inspectBytes(e);const r=t.size-t.multihashSize;const n=bytes$2.coerce(e.subarray(r,r+t.multihashSize));if(n.byteLength!==t.multihashSize){throw new Error("Incorrect length")}const i=n.subarray(t.multihashSize-t.digestSize);const s=new digest$3.Digest(t.multihashCode,t.digestSize,i,n);const a=t.version===0?CID$6.createV0(s):CID$6.createV1(t.codec,s);return[a,e.subarray(t.size)]}static inspectBytes(e){let t=0;const r=()=>{const[r,n]=varint$6.decode(e.subarray(t));t+=n;return r};let n=r();let i=DAG_PB_CODE;if(n===18){n=0;t=0}else if(n===1){i=r()}if(n!==0&&n!==1){throw new RangeError(`Invalid CID version ${n}`)}const s=t;const a=r();const o=r();const f=t+o;const c=f-s;return{version:n,codec:i,multihashCode:a,digestSize:o,multihashSize:c,size:f}}static parse(e,t){const[r,n]=parseCIDtoBytes(e,t);const i=CID$6.decode(n);i._baseCache.set(r,e);return i}}const parseCIDtoBytes=(e,t)=>{switch(e[0]){case"Q":{const r=t||base58$1.base58btc;return[base58$1.base58btc.prefix,r.decode(`${base58$1.base58btc.prefix}${e}`)]}case base58$1.base58btc.prefix:{const r=t||base58$1.base58btc;return[base58$1.base58btc.prefix,r.decode(e)]}case base32$1.base32.prefix:{const r=t||base32$1.base32;return[base32$1.base32.prefix,r.decode(e)]}default:{if(t==null){throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided")}return[e[0],t.decode(e)]}}};const toStringV0=(e,t,r)=>{const{prefix:n}=r;if(n!==base58$1.base58btc.prefix){throw Error(`Cannot string encode V0 in ${r.name} encoding`)}const i=t.get(n);if(i==null){const i=r.encode(e).slice(1);t.set(n,i);return i}else{return i}};const toStringV1=(e,t,r)=>{const{prefix:n}=r;const i=t.get(n);if(i==null){const i=r.encode(e);t.set(n,i);return i}else{return i}};const DAG_PB_CODE=112;const SHA_256_CODE=18;const encodeCID=(e,t,r)=>{const n=varint$6.encodingLength(e);const i=n+varint$6.encodingLength(t);const s=new Uint8Array(i+r.byteLength);varint$6.encodeTo(e,s,0);varint$6.encodeTo(t,s,n);s.set(r,i);return s};const cidSymbol=Symbol.for("@ipld/js-cid/CID");const readonly={writable:false,configurable:false,enumerable:true};const hidden={writable:false,enumerable:false,configurable:false};const version$2="0.0.0-dev";const deprecate=(e,t)=>{if(e.test(version$2)){console.warn(t)}else{throw new Error(t)}};const IS_CID_DEPRECATION=`CID.isCID(v) is deprecated and will be removed in the next major release.\nFollowing code pattern:\n\nif (CID.isCID(value)) {\n  doSomethingWithCID(value)\n}\n\nIs replaced with:\n\nconst cid = CID.asCID(value)\nif (cid) {\n  // Make sure to use cid instead of value\n  doSomethingWithCID(cid)\n}\n`;cid$4.CID=CID$6;Object.defineProperty(src$9,"__esModule",{value:true});var cid$3=cid$4;var varint$5=varint$9;var bytes$1=bytes$8;var hasher$1=hasher$3;var digest$2=digest$6;src$9.CID=cid$3.CID;src$9.varint=varint$5;src$9.bytes=bytes$1;src$9.hasher=hasher$1;src$9.digest=digest$2;Object.defineProperty(basics$5,"__esModule",{value:true});var identity$3=identity$7;var base2=base2$2;var base8=base8$2;var base10=base10$2;var base16=base16$2;var base32=base32$3;var base36=base36$2;var base58=base58$2;var base64$3=base64$5;var base256emoji=base256emoji$2;var sha2=sha2Browser;var identity$1$1=identity$5;var raw=raw$1;var json=json$1;var cid$2=cid$4;var hasher=hasher$3;var digest$1=digest$6;var varint$4=varint$9;var bytes=bytes$8;const bases$f={...identity$3,...base2,...base8,...base10,...base16,...base32,...base36,...base58,...base64$3,...base256emoji};const hashes={...sha2,...identity$1$1};const codecs$1={raw,json};basics$5.CID=cid$2.CID;basics$5.hasher=hasher;basics$5.digest=digest$1;basics$5.varint=varint$4;basics$5.bytes=bytes;basics$5.bases=bases$f;basics$5.codecs=codecs$1;basics$5.hashes=hashes;var alloc$i={};var asUint8array$h={};Object.defineProperty(asUint8array$h,"__esModule",{value:true});function asUint8Array$4(e){if(globalThis.Buffer!=null){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}return e}asUint8array$h.asUint8Array=asUint8Array$4;Object.defineProperty(alloc$i,"__esModule",{value:true});var asUint8array$g=asUint8array$h;function alloc$h(e=0){if(globalThis.Buffer!=null&&globalThis.Buffer.alloc!=null){return asUint8array$g.asUint8Array(globalThis.Buffer.alloc(e))}return new Uint8Array(e)}function allocUnsafe$4(e=0){if(globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null){return asUint8array$g.asUint8Array(globalThis.Buffer.allocUnsafe(e))}return new Uint8Array(e)}alloc$i.alloc=alloc$h;alloc$i.allocUnsafe=allocUnsafe$4;var basics$4=basics$5;var alloc$g=alloc$i;function createCodec$5(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}const string$5=createCodec$5("utf8","u",(e=>{const t=new TextDecoder("utf8");return"u"+t.decode(e)}),(e=>{const t=new TextEncoder;return t.encode(e.substring(1))}));const ascii$5=createCodec$5("ascii","a",(e=>{let t="a";for(let r=0;r<e.length;r++){t+=String.fromCharCode(e[r])}return t}),(e=>{e=e.substring(1);const t=alloc$g.allocUnsafe(e.length);for(let r=0;r<e.length;r++){t[r]=e.charCodeAt(r)}return t}));const BASES$5={utf8:string$5,"utf-8":string$5,hex:basics$4.bases.base16,latin1:ascii$5,ascii:ascii$5,binary:ascii$5,...basics$4.bases};var bases$e=BASES$5;Object.defineProperty(toString$9,"__esModule",{value:true});var bases$d=bases$e;function toString$7(e,t="utf8"){const r=bases$d[t];if(!r){throw new Error(`Unsupported encoding "${t}"`)}if((t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null){return globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8")}return r.encoder.encode(e).substring(1)}toString$9.toString=toString$7;var fromString$8={};Object.defineProperty(fromString$8,"__esModule",{value:true});var bases$c=bases$e;var asUint8array$f=asUint8array$h;function fromString$7(e,t="utf8"){const r=bases$c[t];if(!r){throw new Error(`Unsupported encoding "${t}"`)}if((t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null){return asUint8array$f.asUint8Array(globalThis.Buffer.from(e,"utf-8"))}return r.decoder.decode(`${r.prefix}${e}`)}fromString$8.fromString=fromString$7;var concat$7={};Object.defineProperty(concat$7,"__esModule",{value:true});var alloc$f=alloc$i;var asUint8array$e=asUint8array$h;function concat$6(e,t){if(!t){t=e.reduce(((e,t)=>e+t.length),0)}const r=alloc$f.allocUnsafe(t);let n=0;for(const t of e){r.set(t,n);n+=t.length}return asUint8array$e.asUint8Array(r)}concat$7.concat=concat$6;const multibase$1=src$c.exports;const varint$3=varint$a;const{names}=constants$5;const{toString:uint8ArrayToString$3}=toString$9;const{fromString:uint8ArrayFromString$6}=fromString$8;const{concat:uint8ArrayConcat$3}=concat$7;const codes={};for(const e in names){const t=e;codes[names[t]]=t}Object.freeze(codes);function toHexString(e){if(!(e instanceof Uint8Array)){throw new Error("must be passed a Uint8Array")}return uint8ArrayToString$3(e,"base16")}function fromHexString(e){return uint8ArrayFromString$6(e,"base16")}function toB58String(e){if(!(e instanceof Uint8Array)){throw new Error("must be passed a Uint8Array")}return uint8ArrayToString$3(multibase$1.encode("base58btc",e)).slice(1)}function fromB58String(e){const t=e instanceof Uint8Array?uint8ArrayToString$3(e):e;return multibase$1.decode("z"+t)}function decode$2(e){if(!(e instanceof Uint8Array)){throw new Error("multihash must be a Uint8Array")}if(e.length<2){throw new Error("multihash too short. must be > 2 bytes.")}const t=varint$3.decode(e);if(!isValidCode(t)){throw new Error(`multihash unknown function code: 0x${t.toString(16)}`)}e=e.slice(varint$3.decode.bytes);const r=varint$3.decode(e);if(r<0){throw new Error(`multihash invalid length: ${r}`)}e=e.slice(varint$3.decode.bytes);if(e.length!==r){throw new Error(`multihash length inconsistent: 0x${uint8ArrayToString$3(e,"base16")}`)}return{code:t,name:codes[t],length:r,digest:e}}function encode$3(e,t,r){if(!e||t===undefined){throw new Error("multihash encode requires at least two args: digest, code")}const n=coerceCode(t);if(!(e instanceof Uint8Array)){throw new Error("digest should be a Uint8Array")}if(r==null){r=e.length}if(r&&e.length!==r){throw new Error("digest length should be equal to specified length.")}const i=varint$3.encode(n);const s=varint$3.encode(r);return uint8ArrayConcat$3([i,s,e],i.length+s.length+e.length)}function coerceCode(e){let t=e;if(typeof e==="string"){if(names[e]===undefined){throw new Error(`Unrecognized hash function named: ${e}`)}t=names[e]}if(typeof t!=="number"){throw new Error(`Hash function code should be a number. Got: ${t}`)}if(codes[t]===undefined&&!isAppCode(t)){throw new Error(`Unrecognized function code: ${t}`)}return t}function isAppCode(e){return e>0&&e<16}function isValidCode(e){if(isAppCode(e)){return true}if(codes[e]){return true}return false}function validate(e){decode$2(e)}function prefix(e){validate(e);return e.subarray(0,2)}var src$8={names,codes,toHexString,fromHexString,toB58String,fromB58String,decode:decode$2,encode:encode$3,coerceCode,isAppCode,validate,prefix,isValidCode};var sha3$1={exports:{}};
/**
 * [js-sha3]{@link https://github.com/emn178/js-sha3}
 *
 * @version 0.8.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2015-2018
 * @license MIT
 */(function(e){(function(){var t="input is invalid type";var r="finalize already called";var n=typeof window==="object";var i=n?window:{};if(i.JS_SHA3_NO_WINDOW){n=false}var s=!n&&typeof self==="object";var a=!i.JS_SHA3_NO_NODE_JS&&typeof process==="object"&&process.versions&&process.versions.node;if(a){i=commonjsGlobal}else if(s){i=self}var o=!i.JS_SHA3_NO_COMMON_JS&&"object"==="object"&&e.exports;var f=!i.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer!=="undefined";var c="0123456789abcdef".split("");var u=[31,7936,2031616,520093696];var l=[4,1024,262144,67108864];var h=[1,256,65536,16777216];var d=[6,1536,393216,100663296];var p=[0,8,16,24];var y=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648];var m=[224,256,384,512];var g=[128,256];var b=["hex","buffer","arrayBuffer","array","digest"];var A={128:168,256:136};if(i.JS_SHA3_NO_NODE_JS||!Array.isArray){Array.isArray=function(e){return Object.prototype.toString.call(e)==="[object Array]"}}if(f&&(i.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)){ArrayBuffer.isView=function(e){return typeof e==="object"&&e.buffer&&e.buffer.constructor===ArrayBuffer}}var w=function(e,t,r){return function(n){return new U(e,t,e).update(n)[r]()}};var E=function(e,t,r){return function(n,i){return new U(e,t,i).update(n)[r]()}};var v=function(e,t,r){return function(t,n,i,s){return R["cshake"+e].update(t,n,i,s)[r]()}};var _=function(e,t,r){return function(t,n,i,s){return R["kmac"+e].update(t,n,i,s)[r]()}};var S=function(e,t,r,n){for(var i=0;i<b.length;++i){var s=b[i];e[s]=t(r,n,s)}return e};var $=function(e,t){var r=w(e,t,"hex");r.create=function(){return new U(e,t,e)};r.update=function(e){return r.create().update(e)};return S(r,w,e,t)};var T=function(e,t){var r=E(e,t,"hex");r.create=function(r){return new U(e,t,r)};r.update=function(e,t){return r.create(t).update(e)};return S(r,E,e,t)};var I=function(e,t){var r=A[e];var n=v(e,t,"hex");n.create=function(n,i,s){if(!i&&!s){return R["shake"+e].create(n)}else{return new U(e,t,n).bytepad([i,s],r)}};n.update=function(e,t,r,i){return n.create(t,r,i).update(e)};return S(n,v,e,t)};var C=function(e,t){var r=A[e];var n=_(e,t,"hex");n.create=function(n,i,s){return new L(e,t,i).bytepad(["KMAC",s],r).bytepad([n],r)};n.update=function(e,t,r,i){return n.create(e,r,i).update(t)};return S(n,_,e,t)};var P=[{name:"keccak",padding:h,bits:m,createMethod:$},{name:"sha3",padding:d,bits:m,createMethod:$},{name:"shake",padding:u,bits:g,createMethod:T},{name:"cshake",padding:l,bits:g,createMethod:I},{name:"kmac",padding:l,bits:g,createMethod:C}];var R={},N=[];for(var k=0;k<P.length;++k){var O=P[k];var x=O.bits;for(var B=0;B<x.length;++B){var D=O.name+"_"+x[B];N.push(D);R[D]=O.createMethod(x[B],O.padding);if(O.name!=="sha3"){var M=O.name+x[B];N.push(M);R[M]=R[D]}}}function U(e,t,r){this.blocks=[];this.s=[];this.padding=t;this.outputBits=r;this.reset=true;this.finalized=false;this.block=0;this.start=0;this.blockCount=1600-(e<<1)>>5;this.byteCount=this.blockCount<<2;this.outputBlocks=r>>5;this.extraBytes=(r&31)>>3;for(var n=0;n<50;++n){this.s[n]=0}}U.prototype.update=function(e){if(this.finalized){throw new Error(r)}var n,i=typeof e;if(i!=="string"){if(i==="object"){if(e===null){throw new Error(t)}else if(f&&e.constructor===ArrayBuffer){e=new Uint8Array(e)}else if(!Array.isArray(e)){if(!f||!ArrayBuffer.isView(e)){throw new Error(t)}}}else{throw new Error(t)}n=true}var s=this.blocks,a=this.byteCount,o=e.length,c=this.blockCount,u=0,l=this.s,h,d;while(u<o){if(this.reset){this.reset=false;s[0]=this.block;for(h=1;h<c+1;++h){s[h]=0}}if(n){for(h=this.start;u<o&&h<a;++u){s[h>>2]|=e[u]<<p[h++&3]}}else{for(h=this.start;u<o&&h<a;++u){d=e.charCodeAt(u);if(d<128){s[h>>2]|=d<<p[h++&3]}else if(d<2048){s[h>>2]|=(192|d>>6)<<p[h++&3];s[h>>2]|=(128|d&63)<<p[h++&3]}else if(d<55296||d>=57344){s[h>>2]|=(224|d>>12)<<p[h++&3];s[h>>2]|=(128|d>>6&63)<<p[h++&3];s[h>>2]|=(128|d&63)<<p[h++&3]}else{d=65536+((d&1023)<<10|e.charCodeAt(++u)&1023);s[h>>2]|=(240|d>>18)<<p[h++&3];s[h>>2]|=(128|d>>12&63)<<p[h++&3];s[h>>2]|=(128|d>>6&63)<<p[h++&3];s[h>>2]|=(128|d&63)<<p[h++&3]}}}this.lastByteIndex=h;if(h>=a){this.start=h-a;this.block=s[c];for(h=0;h<c;++h){l[h]^=s[h]}F(l);this.reset=true}else{this.start=h}}return this};U.prototype.encode=function(e,t){var r=e&255,n=1;var i=[r];e=e>>8;r=e&255;while(r>0){i.unshift(r);e=e>>8;r=e&255;++n}if(t){i.push(n)}else{i.unshift(n)}this.update(i);return i.length};U.prototype.encodeString=function(e){var r,n=typeof e;if(n!=="string"){if(n==="object"){if(e===null){throw new Error(t)}else if(f&&e.constructor===ArrayBuffer){e=new Uint8Array(e)}else if(!Array.isArray(e)){if(!f||!ArrayBuffer.isView(e)){throw new Error(t)}}}else{throw new Error(t)}r=true}var i=0,s=e.length;if(r){i=s}else{for(var a=0;a<e.length;++a){var o=e.charCodeAt(a);if(o<128){i+=1}else if(o<2048){i+=2}else if(o<55296||o>=57344){i+=3}else{o=65536+((o&1023)<<10|e.charCodeAt(++a)&1023);i+=4}}}i+=this.encode(i*8);this.update(e);return i};U.prototype.bytepad=function(e,t){var r=this.encode(t);for(var n=0;n<e.length;++n){r+=this.encodeString(e[n])}var i=t-r%t;var s=[];s.length=i;this.update(s);return this};U.prototype.finalize=function(){if(this.finalized){return}this.finalized=true;var e=this.blocks,t=this.lastByteIndex,r=this.blockCount,n=this.s;e[t>>2]|=this.padding[t&3];if(this.lastByteIndex===this.byteCount){e[0]=e[r];for(t=1;t<r+1;++t){e[t]=0}}e[r-1]|=2147483648;for(t=0;t<r;++t){n[t]^=e[t]}F(n)};U.prototype.toString=U.prototype.hex=function(){this.finalize();var e=this.blockCount,t=this.s,r=this.outputBlocks,n=this.extraBytes,i=0,s=0;var a="",o;while(s<r){for(i=0;i<e&&s<r;++i,++s){o=t[i];a+=c[o>>4&15]+c[o&15]+c[o>>12&15]+c[o>>8&15]+c[o>>20&15]+c[o>>16&15]+c[o>>28&15]+c[o>>24&15]}if(s%e===0){F(t);i=0}}if(n){o=t[i];a+=c[o>>4&15]+c[o&15];if(n>1){a+=c[o>>12&15]+c[o>>8&15]}if(n>2){a+=c[o>>20&15]+c[o>>16&15]}}return a};U.prototype.arrayBuffer=function(){this.finalize();var e=this.blockCount,t=this.s,r=this.outputBlocks,n=this.extraBytes,i=0,s=0;var a=this.outputBits>>3;var o;if(n){o=new ArrayBuffer(r+1<<2)}else{o=new ArrayBuffer(a)}var f=new Uint32Array(o);while(s<r){for(i=0;i<e&&s<r;++i,++s){f[s]=t[i]}if(s%e===0){F(t)}}if(n){f[i]=t[i];o=o.slice(0,a)}return o};U.prototype.buffer=U.prototype.arrayBuffer;U.prototype.digest=U.prototype.array=function(){this.finalize();var e=this.blockCount,t=this.s,r=this.outputBlocks,n=this.extraBytes,i=0,s=0;var a=[],o,f;while(s<r){for(i=0;i<e&&s<r;++i,++s){o=s<<2;f=t[i];a[o]=f&255;a[o+1]=f>>8&255;a[o+2]=f>>16&255;a[o+3]=f>>24&255}if(s%e===0){F(t)}}if(n){o=s<<2;f=t[i];a[o]=f&255;if(n>1){a[o+1]=f>>8&255}if(n>2){a[o+2]=f>>16&255}}return a};function L(e,t,r){U.call(this,e,t,r)}L.prototype=new U;L.prototype.finalize=function(){this.encode(this.outputBits,true);return U.prototype.finalize.call(this)};var F=function(e){var t,r,n,i,s,a,o,f,c,u,l,h,d,p,m,g,b,A,w,E,v,_,S,$,T,I,C,P,R,N,k,O,x,B,D,M,U,L,F,H,V,G,j,K,Y,q,z,X,Q,W,J,Z,ee,te,re,ne,ie,se,ae,oe,fe,ce,ue;for(n=0;n<48;n+=2){i=e[0]^e[10]^e[20]^e[30]^e[40];s=e[1]^e[11]^e[21]^e[31]^e[41];a=e[2]^e[12]^e[22]^e[32]^e[42];o=e[3]^e[13]^e[23]^e[33]^e[43];f=e[4]^e[14]^e[24]^e[34]^e[44];c=e[5]^e[15]^e[25]^e[35]^e[45];u=e[6]^e[16]^e[26]^e[36]^e[46];l=e[7]^e[17]^e[27]^e[37]^e[47];h=e[8]^e[18]^e[28]^e[38]^e[48];d=e[9]^e[19]^e[29]^e[39]^e[49];t=h^(a<<1|o>>>31);r=d^(o<<1|a>>>31);e[0]^=t;e[1]^=r;e[10]^=t;e[11]^=r;e[20]^=t;e[21]^=r;e[30]^=t;e[31]^=r;e[40]^=t;e[41]^=r;t=i^(f<<1|c>>>31);r=s^(c<<1|f>>>31);e[2]^=t;e[3]^=r;e[12]^=t;e[13]^=r;e[22]^=t;e[23]^=r;e[32]^=t;e[33]^=r;e[42]^=t;e[43]^=r;t=a^(u<<1|l>>>31);r=o^(l<<1|u>>>31);e[4]^=t;e[5]^=r;e[14]^=t;e[15]^=r;e[24]^=t;e[25]^=r;e[34]^=t;e[35]^=r;e[44]^=t;e[45]^=r;t=f^(h<<1|d>>>31);r=c^(d<<1|h>>>31);e[6]^=t;e[7]^=r;e[16]^=t;e[17]^=r;e[26]^=t;e[27]^=r;e[36]^=t;e[37]^=r;e[46]^=t;e[47]^=r;t=u^(i<<1|s>>>31);r=l^(s<<1|i>>>31);e[8]^=t;e[9]^=r;e[18]^=t;e[19]^=r;e[28]^=t;e[29]^=r;e[38]^=t;e[39]^=r;e[48]^=t;e[49]^=r;p=e[0];m=e[1];q=e[11]<<4|e[10]>>>28;z=e[10]<<4|e[11]>>>28;P=e[20]<<3|e[21]>>>29;R=e[21]<<3|e[20]>>>29;oe=e[31]<<9|e[30]>>>23;fe=e[30]<<9|e[31]>>>23;G=e[40]<<18|e[41]>>>14;j=e[41]<<18|e[40]>>>14;B=e[2]<<1|e[3]>>>31;D=e[3]<<1|e[2]>>>31;g=e[13]<<12|e[12]>>>20;b=e[12]<<12|e[13]>>>20;X=e[22]<<10|e[23]>>>22;Q=e[23]<<10|e[22]>>>22;N=e[33]<<13|e[32]>>>19;k=e[32]<<13|e[33]>>>19;ce=e[42]<<2|e[43]>>>30;ue=e[43]<<2|e[42]>>>30;te=e[5]<<30|e[4]>>>2;re=e[4]<<30|e[5]>>>2;M=e[14]<<6|e[15]>>>26;U=e[15]<<6|e[14]>>>26;A=e[25]<<11|e[24]>>>21;w=e[24]<<11|e[25]>>>21;W=e[34]<<15|e[35]>>>17;J=e[35]<<15|e[34]>>>17;O=e[45]<<29|e[44]>>>3;x=e[44]<<29|e[45]>>>3;$=e[6]<<28|e[7]>>>4;T=e[7]<<28|e[6]>>>4;ne=e[17]<<23|e[16]>>>9;ie=e[16]<<23|e[17]>>>9;L=e[26]<<25|e[27]>>>7;F=e[27]<<25|e[26]>>>7;E=e[36]<<21|e[37]>>>11;v=e[37]<<21|e[36]>>>11;Z=e[47]<<24|e[46]>>>8;ee=e[46]<<24|e[47]>>>8;K=e[8]<<27|e[9]>>>5;Y=e[9]<<27|e[8]>>>5;I=e[18]<<20|e[19]>>>12;C=e[19]<<20|e[18]>>>12;se=e[29]<<7|e[28]>>>25;ae=e[28]<<7|e[29]>>>25;H=e[38]<<8|e[39]>>>24;V=e[39]<<8|e[38]>>>24;_=e[48]<<14|e[49]>>>18;S=e[49]<<14|e[48]>>>18;e[0]=p^~g&A;e[1]=m^~b&w;e[10]=$^~I&P;e[11]=T^~C&R;e[20]=B^~M&L;e[21]=D^~U&F;e[30]=K^~q&X;e[31]=Y^~z&Q;e[40]=te^~ne&se;e[41]=re^~ie&ae;e[2]=g^~A&E;e[3]=b^~w&v;e[12]=I^~P&N;e[13]=C^~R&k;e[22]=M^~L&H;e[23]=U^~F&V;e[32]=q^~X&W;e[33]=z^~Q&J;e[42]=ne^~se&oe;e[43]=ie^~ae&fe;e[4]=A^~E&_;e[5]=w^~v&S;e[14]=P^~N&O;e[15]=R^~k&x;e[24]=L^~H&G;e[25]=F^~V&j;e[34]=X^~W&Z;e[35]=Q^~J&ee;e[44]=se^~oe&ce;e[45]=ae^~fe&ue;e[6]=E^~_&p;e[7]=v^~S&m;e[16]=N^~O&$;e[17]=k^~x&T;e[26]=H^~G&B;e[27]=V^~j&D;e[36]=W^~Z&K;e[37]=J^~ee&Y;e[46]=oe^~ce&te;e[47]=fe^~ue&re;e[8]=_^~p&g;e[9]=S^~m&b;e[18]=O^~$&I;e[19]=x^~T&C;e[28]=G^~B&M;e[29]=j^~D&U;e[38]=Z^~K&q;e[39]=ee^~Y&z;e[48]=ce^~te&ne;e[49]=ue^~re&ie;e[0]^=y[n];e[1]^=y[n+1]}};if(o){e.exports=R}else{for(k=0;k<N.length;++k){i[N[k]]=R[N[k]]}}})()})(sha3$1);var murmurHash3js={exports:{}};(function(e,t){(function(r,n){var i={version:"3.0.0",x86:{},x64:{},inputValidation:true};function s(e){if(!Array.isArray(e)&&!ArrayBuffer.isView(e)){return false}for(var t=0;t<e.length;t++){if(!Number.isInteger(e[t])||e[t]<0||e[t]>255){return false}}return true}function a(e,t){return(e&65535)*t+(((e>>>16)*t&65535)<<16)}function o(e,t){return e<<t|e>>>32-t}function f(e){e^=e>>>16;e=a(e,2246822507);e^=e>>>13;e=a(e,3266489909);e^=e>>>16;return e}function c(e,t){e=[e[0]>>>16,e[0]&65535,e[1]>>>16,e[1]&65535];t=[t[0]>>>16,t[0]&65535,t[1]>>>16,t[1]&65535];var r=[0,0,0,0];r[3]+=e[3]+t[3];r[2]+=r[3]>>>16;r[3]&=65535;r[2]+=e[2]+t[2];r[1]+=r[2]>>>16;r[2]&=65535;r[1]+=e[1]+t[1];r[0]+=r[1]>>>16;r[1]&=65535;r[0]+=e[0]+t[0];r[0]&=65535;return[r[0]<<16|r[1],r[2]<<16|r[3]]}function u(e,t){e=[e[0]>>>16,e[0]&65535,e[1]>>>16,e[1]&65535];t=[t[0]>>>16,t[0]&65535,t[1]>>>16,t[1]&65535];var r=[0,0,0,0];r[3]+=e[3]*t[3];r[2]+=r[3]>>>16;r[3]&=65535;r[2]+=e[2]*t[3];r[1]+=r[2]>>>16;r[2]&=65535;r[2]+=e[3]*t[2];r[1]+=r[2]>>>16;r[2]&=65535;r[1]+=e[1]*t[3];r[0]+=r[1]>>>16;r[1]&=65535;r[1]+=e[2]*t[2];r[0]+=r[1]>>>16;r[1]&=65535;r[1]+=e[3]*t[1];r[0]+=r[1]>>>16;r[1]&=65535;r[0]+=e[0]*t[3]+e[1]*t[2]+e[2]*t[1]+e[3]*t[0];r[0]&=65535;return[r[0]<<16|r[1],r[2]<<16|r[3]]}function l(e,t){t%=64;if(t===32){return[e[1],e[0]]}else if(t<32){return[e[0]<<t|e[1]>>>32-t,e[1]<<t|e[0]>>>32-t]}else{t-=32;return[e[1]<<t|e[0]>>>32-t,e[0]<<t|e[1]>>>32-t]}}function h(e,t){t%=64;if(t===0){return e}else if(t<32){return[e[0]<<t|e[1]>>>32-t,e[1]<<t]}else{return[e[1]<<t-32,0]}}function d(e,t){return[e[0]^t[0],e[1]^t[1]]}function p(e){e=d(e,[0,e[0]>>>1]);e=u(e,[4283543511,3981806797]);e=d(e,[0,e[0]>>>1]);e=u(e,[3301882366,444984403]);e=d(e,[0,e[0]>>>1]);return e}i.x86.hash32=function(e,t){if(i.inputValidation&&!s(e)){return n}t=t||0;var r=e.length%4;var c=e.length-r;var u=t;var l=0;var h=3432918353;var d=461845907;for(var p=0;p<c;p=p+4){l=e[p]|e[p+1]<<8|e[p+2]<<16|e[p+3]<<24;l=a(l,h);l=o(l,15);l=a(l,d);u^=l;u=o(u,13);u=a(u,5)+3864292196}l=0;switch(r){case 3:l^=e[p+2]<<16;case 2:l^=e[p+1]<<8;case 1:l^=e[p];l=a(l,h);l=o(l,15);l=a(l,d);u^=l}u^=e.length;u=f(u);return u>>>0};i.x86.hash128=function(e,t){if(i.inputValidation&&!s(e)){return n}t=t||0;var r=e.length%16;var c=e.length-r;var u=t;var l=t;var h=t;var d=t;var p=0;var y=0;var m=0;var g=0;var b=597399067;var A=2869860233;var w=951274213;var E=2716044179;for(var v=0;v<c;v=v+16){p=e[v]|e[v+1]<<8|e[v+2]<<16|e[v+3]<<24;y=e[v+4]|e[v+5]<<8|e[v+6]<<16|e[v+7]<<24;m=e[v+8]|e[v+9]<<8|e[v+10]<<16|e[v+11]<<24;g=e[v+12]|e[v+13]<<8|e[v+14]<<16|e[v+15]<<24;p=a(p,b);p=o(p,15);p=a(p,A);u^=p;u=o(u,19);u+=l;u=a(u,5)+1444728091;y=a(y,A);y=o(y,16);y=a(y,w);l^=y;l=o(l,17);l+=h;l=a(l,5)+197830471;m=a(m,w);m=o(m,17);m=a(m,E);h^=m;h=o(h,15);h+=d;h=a(h,5)+2530024501;g=a(g,E);g=o(g,18);g=a(g,b);d^=g;d=o(d,13);d+=u;d=a(d,5)+850148119}p=0;y=0;m=0;g=0;switch(r){case 15:g^=e[v+14]<<16;case 14:g^=e[v+13]<<8;case 13:g^=e[v+12];g=a(g,E);g=o(g,18);g=a(g,b);d^=g;case 12:m^=e[v+11]<<24;case 11:m^=e[v+10]<<16;case 10:m^=e[v+9]<<8;case 9:m^=e[v+8];m=a(m,w);m=o(m,17);m=a(m,E);h^=m;case 8:y^=e[v+7]<<24;case 7:y^=e[v+6]<<16;case 6:y^=e[v+5]<<8;case 5:y^=e[v+4];y=a(y,A);y=o(y,16);y=a(y,w);l^=y;case 4:p^=e[v+3]<<24;case 3:p^=e[v+2]<<16;case 2:p^=e[v+1]<<8;case 1:p^=e[v];p=a(p,b);p=o(p,15);p=a(p,A);u^=p}u^=e.length;l^=e.length;h^=e.length;d^=e.length;u+=l;u+=h;u+=d;l+=u;h+=u;d+=u;u=f(u);l=f(l);h=f(h);d=f(d);u+=l;u+=h;u+=d;l+=u;h+=u;d+=u;return("00000000"+(u>>>0).toString(16)).slice(-8)+("00000000"+(l>>>0).toString(16)).slice(-8)+("00000000"+(h>>>0).toString(16)).slice(-8)+("00000000"+(d>>>0).toString(16)).slice(-8)};i.x64.hash128=function(e,t){if(i.inputValidation&&!s(e)){return n}t=t||0;var r=e.length%16;var a=e.length-r;var o=[0,t];var f=[0,t];var y=[0,0];var m=[0,0];var g=[2277735313,289559509];var b=[1291169091,658871167];for(var A=0;A<a;A=A+16){y=[e[A+4]|e[A+5]<<8|e[A+6]<<16|e[A+7]<<24,e[A]|e[A+1]<<8|e[A+2]<<16|e[A+3]<<24];m=[e[A+12]|e[A+13]<<8|e[A+14]<<16|e[A+15]<<24,e[A+8]|e[A+9]<<8|e[A+10]<<16|e[A+11]<<24];y=u(y,g);y=l(y,31);y=u(y,b);o=d(o,y);o=l(o,27);o=c(o,f);o=c(u(o,[0,5]),[0,1390208809]);m=u(m,b);m=l(m,33);m=u(m,g);f=d(f,m);f=l(f,31);f=c(f,o);f=c(u(f,[0,5]),[0,944331445])}y=[0,0];m=[0,0];switch(r){case 15:m=d(m,h([0,e[A+14]],48));case 14:m=d(m,h([0,e[A+13]],40));case 13:m=d(m,h([0,e[A+12]],32));case 12:m=d(m,h([0,e[A+11]],24));case 11:m=d(m,h([0,e[A+10]],16));case 10:m=d(m,h([0,e[A+9]],8));case 9:m=d(m,[0,e[A+8]]);m=u(m,b);m=l(m,33);m=u(m,g);f=d(f,m);case 8:y=d(y,h([0,e[A+7]],56));case 7:y=d(y,h([0,e[A+6]],48));case 6:y=d(y,h([0,e[A+5]],40));case 5:y=d(y,h([0,e[A+4]],32));case 4:y=d(y,h([0,e[A+3]],24));case 3:y=d(y,h([0,e[A+2]],16));case 2:y=d(y,h([0,e[A+1]],8));case 1:y=d(y,[0,e[A]]);y=u(y,g);y=l(y,31);y=u(y,b);o=d(o,y)}o=d(o,[0,e.length]);f=d(f,[0,e.length]);o=c(o,f);f=c(f,o);o=p(o);f=p(f);o=c(o,f);f=c(f,o);return("00000000"+(o[0]>>>0).toString(16)).slice(-8)+("00000000"+(o[1]>>>0).toString(16)).slice(-8)+("00000000"+(f[0]>>>0).toString(16)).slice(-8)+("00000000"+(f[1]>>>0).toString(16)).slice(-8)};{if(e.exports){t=e.exports=i}t.murmurHash3=i}})()})(murmurHash3js,murmurHash3js.exports);var murmurhash3jsRevisited=murmurHash3js.exports;const multihash$2=src$8;const crypto$3=self.crypto||self.msCrypto;const digest=async(e,t)=>{if(typeof self==="undefined"||!crypto$3){throw new Error("Please use a browser with webcrypto support and ensure the code has been delivered securely via HTTPS/TLS and run within a Secure Context")}switch(t){case"sha1":return new Uint8Array(await crypto$3.subtle.digest({name:"SHA-1"},e));case"sha2-256":return new Uint8Array(await crypto$3.subtle.digest({name:"SHA-256"},e));case"sha2-512":return new Uint8Array(await crypto$3.subtle.digest({name:"SHA-512"},e));case"dbl-sha2-256":{const t=await crypto$3.subtle.digest({name:"SHA-256"},e);return new Uint8Array(await crypto$3.subtle.digest({name:"SHA-256"},t))}default:throw new Error(`${t} is not a supported algorithm`)}};var sha_browser={factory:e=>async t=>digest(t,e),digest,multihashing:async(e,t,r)=>{const n=await digest(e,t);return multihash$2.encode(n,t,r)}};const fromNumberTo32BitBuf$1=e=>{const t=new Uint8Array(4);for(let r=0;r<4;r++){t[r]=e&255;e=e>>8}return t};var utils$2={fromNumberTo32BitBuf:fromNumberTo32BitBuf$1};var fromString$6={};var alloc$e={};var asUint8array$d={};Object.defineProperty(asUint8array$d,"__esModule",{value:true});function asUint8Array$3(e){if(globalThis.Buffer!=null){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}return e}asUint8array$d.asUint8Array=asUint8Array$3;Object.defineProperty(alloc$e,"__esModule",{value:true});var asUint8array$c=asUint8array$d;function alloc$d(e=0){if(globalThis.Buffer!=null&&globalThis.Buffer.alloc!=null){return asUint8array$c.asUint8Array(globalThis.Buffer.alloc(e))}return new Uint8Array(e)}function allocUnsafe$3(e=0){if(globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null){return asUint8array$c.asUint8Array(globalThis.Buffer.allocUnsafe(e))}return new Uint8Array(e)}alloc$e.alloc=alloc$d;alloc$e.allocUnsafe=allocUnsafe$3;var basics$3=basics$5;var alloc$c=alloc$e;function createCodec$4(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}const string$4=createCodec$4("utf8","u",(e=>{const t=new TextDecoder("utf8");return"u"+t.decode(e)}),(e=>{const t=new TextEncoder;return t.encode(e.substring(1))}));const ascii$4=createCodec$4("ascii","a",(e=>{let t="a";for(let r=0;r<e.length;r++){t+=String.fromCharCode(e[r])}return t}),(e=>{e=e.substring(1);const t=alloc$c.allocUnsafe(e.length);for(let r=0;r<e.length;r++){t[r]=e.charCodeAt(r)}return t}));const BASES$4={utf8:string$4,"utf-8":string$4,hex:basics$3.bases.base16,latin1:ascii$4,ascii:ascii$4,binary:ascii$4,...basics$3.bases};var bases$b=BASES$4;Object.defineProperty(fromString$6,"__esModule",{value:true});var bases$a=bases$b;var asUint8array$b=asUint8array$d;function fromString$5(e,t="utf8"){const r=bases$a[t];if(!r){throw new Error(`Unsupported encoding "${t}"`)}if((t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null){return asUint8array$b.asUint8Array(globalThis.Buffer.from(e,"utf-8"))}return r.decoder.decode(`${r.prefix}${e}`)}fromString$6.fromString=fromString$5;const ERROR_MSG_INPUT="Input must be an string, Buffer or Uint8Array";function normalizeInput(e){let t;if(e instanceof Uint8Array){t=e}else if(typeof e==="string"){const r=new TextEncoder;t=r.encode(e)}else{throw new Error(ERROR_MSG_INPUT)}return t}function toHex(e){return Array.prototype.map.call(e,(function(e){return(e<16?"0":"")+e.toString(16)})).join("")}function uint32ToHex(e){return(4294967296+e).toString(16).substring(1)}function debugPrint(e,t,r){let n="\n"+e+" = ";for(let i=0;i<t.length;i+=2){if(r===32){n+=uint32ToHex(t[i]).toUpperCase();n+=" ";n+=uint32ToHex(t[i+1]).toUpperCase()}else if(r===64){n+=uint32ToHex(t[i+1]).toUpperCase();n+=uint32ToHex(t[i]).toUpperCase()}else throw new Error("Invalid size "+r);if(i%6===4){n+="\n"+new Array(e.length+4).join(" ")}else if(i<t.length-2){n+=" "}}console.log(n)}function testSpeed(e,t,r){let n=(new Date).getTime();const i=new Uint8Array(t);for(let e=0;e<t;e++){i[e]=e%256}const s=(new Date).getTime();console.log("Generated random input in "+(s-n)+"ms");n=s;for(let s=0;s<r;s++){const r=e(i);const s=(new Date).getTime();const a=s-n;n=s;console.log("Hashed in "+a+"ms: "+r.substring(0,20)+"...");console.log(Math.round(t/(1<<20)/(a/1e3)*100)/100+" MB PER SECOND")}}var util$e={normalizeInput,toHex,debugPrint,testSpeed};const util$d=util$e;function ADD64AA(e,t,r){const n=e[t]+e[r];let i=e[t+1]+e[r+1];if(n>=4294967296){i++}e[t]=n;e[t+1]=i}function ADD64AC(e,t,r,n){let i=e[t]+r;if(r<0){i+=4294967296}let s=e[t+1]+n;if(i>=4294967296){s++}e[t]=i;e[t+1]=s}function B2B_GET32(e,t){return e[t]^e[t+1]<<8^e[t+2]<<16^e[t+3]<<24}function B2B_G(e,t,r,n,i,s){const a=m$2[i];const o=m$2[i+1];const f=m$2[s];const c=m$2[s+1];ADD64AA(v$2,e,t);ADD64AC(v$2,e,a,o);let u=v$2[n]^v$2[e];let l=v$2[n+1]^v$2[e+1];v$2[n]=l;v$2[n+1]=u;ADD64AA(v$2,r,n);u=v$2[t]^v$2[r];l=v$2[t+1]^v$2[r+1];v$2[t]=u>>>24^l<<8;v$2[t+1]=l>>>24^u<<8;ADD64AA(v$2,e,t);ADD64AC(v$2,e,f,c);u=v$2[n]^v$2[e];l=v$2[n+1]^v$2[e+1];v$2[n]=u>>>16^l<<16;v$2[n+1]=l>>>16^u<<16;ADD64AA(v$2,r,n);u=v$2[t]^v$2[r];l=v$2[t+1]^v$2[r+1];v$2[t]=l>>>31^u<<1;v$2[t+1]=u>>>31^l<<1}const BLAKE2B_IV32=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]);const SIGMA8=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3];const SIGMA82=new Uint8Array(SIGMA8.map((function(e){return e*2})));const v$2=new Uint32Array(32);const m$2=new Uint32Array(32);function blake2bCompress(e,t){let r=0;for(r=0;r<16;r++){v$2[r]=e.h[r];v$2[r+16]=BLAKE2B_IV32[r]}v$2[24]=v$2[24]^e.t;v$2[25]=v$2[25]^e.t/4294967296;if(t){v$2[28]=~v$2[28];v$2[29]=~v$2[29]}for(r=0;r<32;r++){m$2[r]=B2B_GET32(e.b,4*r)}for(r=0;r<12;r++){B2B_G(0,8,16,24,SIGMA82[r*16+0],SIGMA82[r*16+1]);B2B_G(2,10,18,26,SIGMA82[r*16+2],SIGMA82[r*16+3]);B2B_G(4,12,20,28,SIGMA82[r*16+4],SIGMA82[r*16+5]);B2B_G(6,14,22,30,SIGMA82[r*16+6],SIGMA82[r*16+7]);B2B_G(0,10,20,30,SIGMA82[r*16+8],SIGMA82[r*16+9]);B2B_G(2,12,22,24,SIGMA82[r*16+10],SIGMA82[r*16+11]);B2B_G(4,14,16,26,SIGMA82[r*16+12],SIGMA82[r*16+13]);B2B_G(6,8,18,28,SIGMA82[r*16+14],SIGMA82[r*16+15])}for(r=0;r<16;r++){e.h[r]=e.h[r]^v$2[r]^v$2[r+16]}}const parameterBlock=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function blake2bInit(e,t,r,n){if(e===0||e>64){throw new Error("Illegal output length, expected 0 < length <= 64")}if(t&&t.length>64){throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64")}if(r&&r.length!==16){throw new Error("Illegal salt, expected Uint8Array with length is 16")}if(n&&n.length!==16){throw new Error("Illegal personal, expected Uint8Array with length is 16")}const i={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:e};parameterBlock.fill(0);parameterBlock[0]=e;if(t)parameterBlock[1]=t.length;parameterBlock[2]=1;parameterBlock[3]=1;if(r)parameterBlock.set(r,32);if(n)parameterBlock.set(n,48);for(let e=0;e<16;e++){i.h[e]=BLAKE2B_IV32[e]^B2B_GET32(parameterBlock,e*4)}if(t){blake2bUpdate(i,t);i.c=128}return i}function blake2bUpdate(e,t){for(let r=0;r<t.length;r++){if(e.c===128){e.t+=e.c;blake2bCompress(e,false);e.c=0}e.b[e.c++]=t[r]}}function blake2bFinal(e){e.t+=e.c;while(e.c<128){e.b[e.c++]=0}blake2bCompress(e,true);const t=new Uint8Array(e.outlen);for(let r=0;r<e.outlen;r++){t[r]=e.h[r>>2]>>8*(r&3)}return t}function blake2b$1(e,t,r,n,i){r=r||64;e=util$d.normalizeInput(e);if(n){n=util$d.normalizeInput(n)}if(i){i=util$d.normalizeInput(i)}const s=blake2bInit(r,t,n,i);blake2bUpdate(s,e);return blake2bFinal(s)}function blake2bHex(e,t,r,n,i){const s=blake2b$1(e,t,r,n,i);return util$d.toHex(s)}var blake2b_1={blake2b:blake2b$1,blake2bHex,blake2bInit,blake2bUpdate,blake2bFinal};const util$c=util$e;function B2S_GET32(e,t){return e[t]^e[t+1]<<8^e[t+2]<<16^e[t+3]<<24}function B2S_G(e,t,r,n,i,s){v$1[e]=v$1[e]+v$1[t]+i;v$1[n]=ROTR32(v$1[n]^v$1[e],16);v$1[r]=v$1[r]+v$1[n];v$1[t]=ROTR32(v$1[t]^v$1[r],12);v$1[e]=v$1[e]+v$1[t]+s;v$1[n]=ROTR32(v$1[n]^v$1[e],8);v$1[r]=v$1[r]+v$1[n];v$1[t]=ROTR32(v$1[t]^v$1[r],7)}function ROTR32(e,t){return e>>>t^e<<32-t}const BLAKE2S_IV=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]);const SIGMA=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]);const v$1=new Uint32Array(16);const m$1=new Uint32Array(16);function blake2sCompress(e,t){let r=0;for(r=0;r<8;r++){v$1[r]=e.h[r];v$1[r+8]=BLAKE2S_IV[r]}v$1[12]^=e.t;v$1[13]^=e.t/4294967296;if(t){v$1[14]=~v$1[14]}for(r=0;r<16;r++){m$1[r]=B2S_GET32(e.b,4*r)}for(r=0;r<10;r++){B2S_G(0,4,8,12,m$1[SIGMA[r*16+0]],m$1[SIGMA[r*16+1]]);B2S_G(1,5,9,13,m$1[SIGMA[r*16+2]],m$1[SIGMA[r*16+3]]);B2S_G(2,6,10,14,m$1[SIGMA[r*16+4]],m$1[SIGMA[r*16+5]]);B2S_G(3,7,11,15,m$1[SIGMA[r*16+6]],m$1[SIGMA[r*16+7]]);B2S_G(0,5,10,15,m$1[SIGMA[r*16+8]],m$1[SIGMA[r*16+9]]);B2S_G(1,6,11,12,m$1[SIGMA[r*16+10]],m$1[SIGMA[r*16+11]]);B2S_G(2,7,8,13,m$1[SIGMA[r*16+12]],m$1[SIGMA[r*16+13]]);B2S_G(3,4,9,14,m$1[SIGMA[r*16+14]],m$1[SIGMA[r*16+15]])}for(r=0;r<8;r++){e.h[r]^=v$1[r]^v$1[r+8]}}function blake2sInit(e,t){if(!(e>0&&e<=32)){throw new Error("Incorrect output length, should be in [1, 32]")}const r=t?t.length:0;if(t&&!(r>0&&r<=32)){throw new Error("Incorrect key length, should be in [1, 32]")}const n={h:new Uint32Array(BLAKE2S_IV),b:new Uint8Array(64),c:0,t:0,outlen:e};n.h[0]^=16842752^r<<8^e;if(r>0){blake2sUpdate(n,t);n.c=64}return n}function blake2sUpdate(e,t){for(let r=0;r<t.length;r++){if(e.c===64){e.t+=e.c;blake2sCompress(e,false);e.c=0}e.b[e.c++]=t[r]}}function blake2sFinal(e){e.t+=e.c;while(e.c<64){e.b[e.c++]=0}blake2sCompress(e,true);const t=new Uint8Array(e.outlen);for(let r=0;r<e.outlen;r++){t[r]=e.h[r>>2]>>8*(r&3)&255}return t}function blake2s$1(e,t,r){r=r||32;e=util$c.normalizeInput(e);const n=blake2sInit(r,t);blake2sUpdate(n,e);return blake2sFinal(n)}function blake2sHex(e,t,r){const n=blake2s$1(e,t,r);return util$c.toHex(n)}var blake2s_1={blake2s:blake2s$1,blake2sHex,blake2sInit,blake2sUpdate,blake2sFinal};const b2b=blake2b_1;const b2s=blake2s_1;var blakejs={blake2b:b2b.blake2b,blake2bHex:b2b.blake2bHex,blake2bInit:b2b.blake2bInit,blake2bUpdate:b2b.blake2bUpdate,blake2bFinal:b2b.blake2bFinal,blake2s:b2s.blake2s,blake2sHex:b2s.blake2sHex,blake2sInit:b2s.blake2sInit,blake2sUpdate:b2s.blake2sUpdate,blake2sFinal:b2s.blake2sFinal};const blake=blakejs;const minB=45569;const minS=45633;const blake2b={init:blake.blake2bInit,update:blake.blake2bUpdate,digest:blake.blake2bFinal};const blake2s={init:blake.blake2sInit,update:blake.blake2sUpdate,digest:blake.blake2sFinal};const makeB2Hash=(e,t)=>async r=>{const n=t.init(e,null);t.update(n,r);return t.digest(n)};var blake_1=e=>{for(let t=0;t<64;t++){e[minB+t]=makeB2Hash(t+1,blake2b)}for(let t=0;t<32;t++){e[minS+t]=makeB2Hash(t+1,blake2s)}};const sha3=sha3$1.exports;const mur=murmurhash3jsRevisited;const{factory:sha}=sha_browser;const{fromNumberTo32BitBuf}=utils$2;const{fromString:uint8ArrayFromString$5}=fromString$6;const hash=e=>async t=>{switch(e){case"sha3-224":return new Uint8Array(sha3.sha3_224.arrayBuffer(t));case"sha3-256":return new Uint8Array(sha3.sha3_256.arrayBuffer(t));case"sha3-384":return new Uint8Array(sha3.sha3_384.arrayBuffer(t));case"sha3-512":return new Uint8Array(sha3.sha3_512.arrayBuffer(t));case"shake-128":return new Uint8Array(sha3.shake128.create(128).update(t).arrayBuffer());case"shake-256":return new Uint8Array(sha3.shake256.create(256).update(t).arrayBuffer());case"keccak-224":return new Uint8Array(sha3.keccak224.arrayBuffer(t));case"keccak-256":return new Uint8Array(sha3.keccak256.arrayBuffer(t));case"keccak-384":return new Uint8Array(sha3.keccak384.arrayBuffer(t));case"keccak-512":return new Uint8Array(sha3.keccak512.arrayBuffer(t));case"murmur3-128":return uint8ArrayFromString$5(mur.x64.hash128(t),"base16");case"murmur3-32":return fromNumberTo32BitBuf(mur.x86.hash32(t));default:throw new TypeError(`${e} is not a supported algorithm`)}};const identity$2=e=>e;var crypto$2={identity:identity$2,sha1:sha("sha1"),sha2256:sha("sha2-256"),sha2512:sha("sha2-512"),dblSha2256:sha("dbl-sha2-256"),sha3224:hash("sha3-224"),sha3256:hash("sha3-256"),sha3384:hash("sha3-384"),sha3512:hash("sha3-512"),shake128:hash("shake-128"),shake256:hash("shake-256"),keccak224:hash("keccak-224"),keccak256:hash("keccak-256"),keccak384:hash("keccak-384"),keccak512:hash("keccak-512"),murmur3128:hash("murmur3-128"),murmur332:hash("murmur3-32"),addBlake:blake_1};var equals$5={};Object.defineProperty(equals$5,"__esModule",{value:true});function equals$4(e,t){if(e===t){return true}if(e.byteLength!==t.byteLength){return false}for(let r=0;r<e.byteLength;r++){if(e[r]!==t[r]){return false}}return true}equals$5.equals=equals$4;const errcode$2=errCode$3;const multihash$1=src$8;const crypto$1=crypto$2;const{equals:equals$3}=equals$5;async function Multihashing(e,t,r){const n=await Multihashing.digest(e,t,r);return multihash$1.encode(n,t,r)}Multihashing.multihash=multihash$1;Multihashing.digest=async(e,t,r)=>{const n=Multihashing.createHash(t);const i=await n(e);return r?i.slice(0,r):i};Multihashing.createHash=function(e){if(!e){const e=errcode$2(new Error("hash algorithm must be specified"),"ERR_HASH_ALGORITHM_NOT_SPECIFIED");throw e}const t=multihash$1.coerceCode(e);if(!Multihashing.functions[t]){throw errcode$2(new Error(`multihash function '${e}' not yet supported`),"ERR_HASH_ALGORITHM_NOT_SUPPORTED")}return Multihashing.functions[t]};Multihashing.functions={0:crypto$1.identity,17:crypto$1.sha1,18:crypto$1.sha2256,19:crypto$1.sha2512,20:crypto$1.sha3512,21:crypto$1.sha3384,22:crypto$1.sha3256,23:crypto$1.sha3224,24:crypto$1.shake128,25:crypto$1.shake256,26:crypto$1.keccak224,27:crypto$1.keccak256,28:crypto$1.keccak384,29:crypto$1.keccak512,34:crypto$1.murmur3128,35:crypto$1.murmur332,86:crypto$1.dblSha2256};crypto$1.addBlake(Multihashing.functions);Multihashing.validate=async(e,t)=>{const r=await Multihashing(e,multihash$1.decode(t).name);return equals$3(t,r)};var src$7=Multihashing;const mergeOptions=mergeOptions$1.bind({ignoreUndefined:true});const multihashing$1=src$7;async function hamtHashFn(e){const t=await multihashing$1(e,"murmur3-128");const r=t.slice(2,10);const n=r.length;const i=new Uint8Array(n);for(let e=0;e<n;e++){i[n-e-1]=r[e]}return i}const defaultOptions$1={chunker:"fixed",strategy:"balanced",rawLeaves:false,onlyHash:false,reduceSingleLeafToSelf:true,hashAlg:"sha2-256",leafType:"file",cidVersion:0,progress:()=>()=>{},shardSplitThreshold:1e3,fileImportConcurrency:50,blockWriteConcurrency:10,minChunkSize:262144,maxChunkSize:262144,avgChunkSize:262144,window:16,polynomial:0x3df305dfb2a804,maxChildrenPerNode:174,layerRepeat:4,wrapWithDirectory:false,pin:false,recursive:false,hidden:false,preload:false,timeout:undefined,hamtHashFn,hamtHashCode:34,hamtBucketBits:8};var options=function(e={}){return mergeOptions(defaultOptions$1,e)};var indexMinimal={};var minimal$1={};var aspromise=asPromise;function asPromise(e,t){var r=new Array(arguments.length-1),n=0,i=2,s=true;while(i<arguments.length)r[n++]=arguments[i++];return new Promise((function i(a,o){r[n]=function e(t){if(s){s=false;if(t)o(t);else{var r=new Array(arguments.length-1),n=0;while(n<r.length)r[n++]=arguments[n];a.apply(null,r)}}};try{e.apply(t||null,r)}catch(e){if(s){s=false;o(e)}}}))}var base64$2={};(function(e){var t=e;t.length=function e(t){var r=t.length;if(!r)return 0;var n=0;while(--r%4>1&&t.charAt(r)==="=")++n;return Math.ceil(t.length*3)/4-n};var r=new Array(64);var n=new Array(123);for(var i=0;i<64;)n[r[i]=i<26?i+65:i<52?i+71:i<62?i-4:i-59|43]=i++;t.encode=function e(t,n,i){var s=null,a=[];var o=0,f=0,c;while(n<i){var u=t[n++];switch(f){case 0:a[o++]=r[u>>2];c=(u&3)<<4;f=1;break;case 1:a[o++]=r[c|u>>4];c=(u&15)<<2;f=2;break;case 2:a[o++]=r[c|u>>6];a[o++]=r[u&63];f=0;break}if(o>8191){(s||(s=[])).push(String.fromCharCode.apply(String,a));o=0}}if(f){a[o++]=r[c];a[o++]=61;if(f===1)a[o++]=61}if(s){if(o)s.push(String.fromCharCode.apply(String,a.slice(0,o)));return s.join("")}return String.fromCharCode.apply(String,a.slice(0,o))};var s="invalid encoding";t.decode=function e(t,r,i){var a=i;var o=0,f;for(var c=0;c<t.length;){var u=t.charCodeAt(c++);if(u===61&&o>1)break;if((u=n[u])===undefined)throw Error(s);switch(o){case 0:f=u;o=1;break;case 1:r[i++]=f<<2|(u&48)>>4;f=u;o=2;break;case 2:r[i++]=(f&15)<<4|(u&60)>>2;f=u;o=3;break;case 3:r[i++]=(f&3)<<6|u;o=0;break}}if(o===1)throw Error(s);return i-a};t.test=function e(t){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t)}})(base64$2);var eventemitter=EventEmitter;function EventEmitter(){this._listeners={}}EventEmitter.prototype.on=function e(t,r,n){(this._listeners[t]||(this._listeners[t]=[])).push({fn:r,ctx:n||this});return this};EventEmitter.prototype.off=function e(t,r){if(t===undefined)this._listeners={};else{if(r===undefined)this._listeners[t]=[];else{var n=this._listeners[t];for(var i=0;i<n.length;)if(n[i].fn===r)n.splice(i,1);else++i}}return this};EventEmitter.prototype.emit=function e(t){var r=this._listeners[t];if(r){var n=[],i=1;for(;i<arguments.length;)n.push(arguments[i++]);for(i=0;i<r.length;)r[i].fn.apply(r[i++].ctx,n)}return this};var float=factory(factory);function factory(e){if(typeof Float32Array!=="undefined")(function(){var t=new Float32Array([-0]),r=new Uint8Array(t.buffer),n=r[3]===128;function i(e,n,i){t[0]=e;n[i]=r[0];n[i+1]=r[1];n[i+2]=r[2];n[i+3]=r[3]}function s(e,n,i){t[0]=e;n[i]=r[3];n[i+1]=r[2];n[i+2]=r[1];n[i+3]=r[0]}e.writeFloatLE=n?i:s;e.writeFloatBE=n?s:i;function a(e,n){r[0]=e[n];r[1]=e[n+1];r[2]=e[n+2];r[3]=e[n+3];return t[0]}function o(e,n){r[3]=e[n];r[2]=e[n+1];r[1]=e[n+2];r[0]=e[n+3];return t[0]}e.readFloatLE=n?a:o;e.readFloatBE=n?o:a})();else(function(){function t(e,t,r,n){var i=t<0?1:0;if(i)t=-t;if(t===0)e(1/t>0?0:2147483648,r,n);else if(isNaN(t))e(2143289344,r,n);else if(t>34028234663852886e22)e((i<<31|2139095040)>>>0,r,n);else if(t<11754943508222875e-54)e((i<<31|Math.round(t/1401298464324817e-60))>>>0,r,n);else{var s=Math.floor(Math.log(t)/Math.LN2),a=Math.round(t*Math.pow(2,-s)*8388608)&8388607;e((i<<31|s+127<<23|a)>>>0,r,n)}}e.writeFloatLE=t.bind(null,writeUintLE);e.writeFloatBE=t.bind(null,writeUintBE);function r(e,t,r){var n=e(t,r),i=(n>>31)*2+1,s=n>>>23&255,a=n&8388607;return s===255?a?NaN:i*Infinity:s===0?i*1401298464324817e-60*a:i*Math.pow(2,s-150)*(a+8388608)}e.readFloatLE=r.bind(null,readUintLE);e.readFloatBE=r.bind(null,readUintBE)})();if(typeof Float64Array!=="undefined")(function(){var t=new Float64Array([-0]),r=new Uint8Array(t.buffer),n=r[7]===128;function i(e,n,i){t[0]=e;n[i]=r[0];n[i+1]=r[1];n[i+2]=r[2];n[i+3]=r[3];n[i+4]=r[4];n[i+5]=r[5];n[i+6]=r[6];n[i+7]=r[7]}function s(e,n,i){t[0]=e;n[i]=r[7];n[i+1]=r[6];n[i+2]=r[5];n[i+3]=r[4];n[i+4]=r[3];n[i+5]=r[2];n[i+6]=r[1];n[i+7]=r[0]}e.writeDoubleLE=n?i:s;e.writeDoubleBE=n?s:i;function a(e,n){r[0]=e[n];r[1]=e[n+1];r[2]=e[n+2];r[3]=e[n+3];r[4]=e[n+4];r[5]=e[n+5];r[6]=e[n+6];r[7]=e[n+7];return t[0]}function o(e,n){r[7]=e[n];r[6]=e[n+1];r[5]=e[n+2];r[4]=e[n+3];r[3]=e[n+4];r[2]=e[n+5];r[1]=e[n+6];r[0]=e[n+7];return t[0]}e.readDoubleLE=n?a:o;e.readDoubleBE=n?o:a})();else(function(){function t(e,t,r,n,i,s){var a=n<0?1:0;if(a)n=-n;if(n===0){e(0,i,s+t);e(1/n>0?0:2147483648,i,s+r)}else if(isNaN(n)){e(0,i,s+t);e(2146959360,i,s+r)}else if(n>17976931348623157e292){e(0,i,s+t);e((a<<31|2146435072)>>>0,i,s+r)}else{var o;if(n<22250738585072014e-324){o=n/5e-324;e(o>>>0,i,s+t);e((a<<31|o/4294967296)>>>0,i,s+r)}else{var f=Math.floor(Math.log(n)/Math.LN2);if(f===1024)f=1023;o=n*Math.pow(2,-f);e(o*4503599627370496>>>0,i,s+t);e((a<<31|f+1023<<20|o*1048576&1048575)>>>0,i,s+r)}}}e.writeDoubleLE=t.bind(null,writeUintLE,0,4);e.writeDoubleBE=t.bind(null,writeUintBE,4,0);function r(e,t,r,n,i){var s=e(n,i+t),a=e(n,i+r);var o=(a>>31)*2+1,f=a>>>20&2047,c=4294967296*(a&1048575)+s;return f===2047?c?NaN:o*Infinity:f===0?o*5e-324*c:o*Math.pow(2,f-1075)*(c+4503599627370496)}e.readDoubleLE=r.bind(null,readUintLE,0,4);e.readDoubleBE=r.bind(null,readUintBE,4,0)})();return e}function writeUintLE(e,t,r){t[r]=e&255;t[r+1]=e>>>8&255;t[r+2]=e>>>16&255;t[r+3]=e>>>24}function writeUintBE(e,t,r){t[r]=e>>>24;t[r+1]=e>>>16&255;t[r+2]=e>>>8&255;t[r+3]=e&255}function readUintLE(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function readUintBE(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}var inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}var utf8$2={};(function(e){var t=e;t.length=function e(t){var r=0,n=0;for(var i=0;i<t.length;++i){n=t.charCodeAt(i);if(n<128)r+=1;else if(n<2048)r+=2;else if((n&64512)===55296&&(t.charCodeAt(i+1)&64512)===56320){++i;r+=4}else r+=3}return r};t.read=function e(t,r,n){var i=n-r;if(i<1)return"";var s=null,a=[],o=0,f;while(r<n){f=t[r++];if(f<128)a[o++]=f;else if(f>191&&f<224)a[o++]=(f&31)<<6|t[r++]&63;else if(f>239&&f<365){f=((f&7)<<18|(t[r++]&63)<<12|(t[r++]&63)<<6|t[r++]&63)-65536;a[o++]=55296+(f>>10);a[o++]=56320+(f&1023)}else a[o++]=(f&15)<<12|(t[r++]&63)<<6|t[r++]&63;if(o>8191){(s||(s=[])).push(String.fromCharCode.apply(String,a));o=0}}if(s){if(o)s.push(String.fromCharCode.apply(String,a.slice(0,o)));return s.join("")}return String.fromCharCode.apply(String,a.slice(0,o))};t.write=function e(t,r,n){var i=n,s,a;for(var o=0;o<t.length;++o){s=t.charCodeAt(o);if(s<128){r[n++]=s}else if(s<2048){r[n++]=s>>6|192;r[n++]=s&63|128}else if((s&64512)===55296&&((a=t.charCodeAt(o+1))&64512)===56320){s=65536+((s&1023)<<10)+(a&1023);++o;r[n++]=s>>18|240;r[n++]=s>>12&63|128;r[n++]=s>>6&63|128;r[n++]=s&63|128}else{r[n++]=s>>12|224;r[n++]=s>>6&63|128;r[n++]=s&63|128}}return n-i}})(utf8$2);var pool_1=pool;function pool(e,t,r){var n=r||8192;var i=n>>>1;var s=null;var a=n;return function r(o){if(o<1||o>i)return e(o);if(a+o>n){s=e(n);a=0}var f=t.call(s,a,a+=o);if(a&7)a=(a|7)+1;return f}}var longbits=LongBits$2;var util$b=minimal$1;function LongBits$2(e,t){this.lo=e>>>0;this.hi=t>>>0}var zero$2=LongBits$2.zero=new LongBits$2(0,0);zero$2.toNumber=function(){return 0};zero$2.zzEncode=zero$2.zzDecode=function(){return this};zero$2.length=function(){return 1};var zeroHash=LongBits$2.zeroHash="\0\0\0\0\0\0\0\0";LongBits$2.fromNumber=function e(t){if(t===0)return zero$2;var r=t<0;if(r)t=-t;var n=t>>>0,i=(t-n)/4294967296>>>0;if(r){i=~i>>>0;n=~n>>>0;if(++n>4294967295){n=0;if(++i>4294967295)i=0}}return new LongBits$2(n,i)};LongBits$2.from=function e(t){if(typeof t==="number")return LongBits$2.fromNumber(t);if(util$b.isString(t)){if(util$b.Long)t=util$b.Long.fromString(t);else return LongBits$2.fromNumber(parseInt(t,10))}return t.low||t.high?new LongBits$2(t.low>>>0,t.high>>>0):zero$2};LongBits$2.prototype.toNumber=function e(t){if(!t&&this.hi>>>31){var r=~this.lo+1>>>0,n=~this.hi>>>0;if(!r)n=n+1>>>0;return-(r+n*4294967296)}return this.lo+this.hi*4294967296};LongBits$2.prototype.toLong=function e(t){return util$b.Long?new util$b.Long(this.lo|0,this.hi|0,Boolean(t)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(t)}};var charCodeAt=String.prototype.charCodeAt;LongBits$2.fromHash=function e(t){if(t===zeroHash)return zero$2;return new LongBits$2((charCodeAt.call(t,0)|charCodeAt.call(t,1)<<8|charCodeAt.call(t,2)<<16|charCodeAt.call(t,3)<<24)>>>0,(charCodeAt.call(t,4)|charCodeAt.call(t,5)<<8|charCodeAt.call(t,6)<<16|charCodeAt.call(t,7)<<24)>>>0)};LongBits$2.prototype.toHash=function e(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};LongBits$2.prototype.zzEncode=function e(){var t=this.hi>>31;this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0;this.lo=(this.lo<<1^t)>>>0;return this};LongBits$2.prototype.zzDecode=function e(){var t=-(this.lo&1);this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0;this.hi=(this.hi>>>1^t)>>>0;return this};LongBits$2.prototype.length=function e(){var t=this.lo,r=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?r===0?t<16384?t<128?1:2:t<2097152?3:4:r<16384?r<128?5:6:r<2097152?7:8:n<128?9:10};(function(e){var t=e;t.asPromise=aspromise;t.base64=base64$2;t.EventEmitter=eventemitter;t.float=float;t.inquire=inquire_1;t.utf8=utf8$2;t.pool=pool_1;t.LongBits=longbits;t.isNode=Boolean(typeof commonjsGlobal!=="undefined"&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node);t.global=t.isNode&&commonjsGlobal||typeof window!=="undefined"&&window||typeof self!=="undefined"&&self||commonjsGlobal;t.emptyArray=Object.freeze?Object.freeze([]):[];t.emptyObject=Object.freeze?Object.freeze({}):{};t.isInteger=Number.isInteger||function e(t){return typeof t==="number"&&isFinite(t)&&Math.floor(t)===t};t.isString=function e(t){return typeof t==="string"||t instanceof String};t.isObject=function e(t){return t&&typeof t==="object"};t.isset=t.isSet=function e(t,r){var n=t[r];if(n!=null&&t.hasOwnProperty(r))return typeof n!=="object"||(Array.isArray(n)?n.length:Object.keys(n).length)>0;return false};t.Buffer=function(){try{var e=t.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}();t._Buffer_from=null;t._Buffer_allocUnsafe=null;t.newBuffer=function e(r){return typeof r==="number"?t.Buffer?t._Buffer_allocUnsafe(r):new t.Array(r):t.Buffer?t._Buffer_from(r):typeof Uint8Array==="undefined"?r:new Uint8Array(r)};t.Array=typeof Uint8Array!=="undefined"?Uint8Array:Array;t.Long=t.global.dcodeIO&&t.global.dcodeIO.Long||t.global.Long||t.inquire("long");t.key2Re=/^true|false|0|1$/;t.key32Re=/^-?(?:0|[1-9][0-9]*)$/;t.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;t.longToHash=function e(r){return r?t.LongBits.from(r).toHash():t.LongBits.zeroHash};t.longFromHash=function e(r,n){var i=t.LongBits.fromHash(r);if(t.Long)return t.Long.fromBits(i.lo,i.hi,n);return i.toNumber(Boolean(n))};function r(e,t,r){for(var n=Object.keys(t),i=0;i<n.length;++i)if(e[n[i]]===undefined||!r)e[n[i]]=t[n[i]];return e}t.merge=r;t.lcFirst=function e(t){return t.charAt(0).toLowerCase()+t.substring(1)};function n(e){function t(e,n){if(!(this instanceof t))return new t(e,n);Object.defineProperty(this,"message",{get:function(){return e}});if(Error.captureStackTrace)Error.captureStackTrace(this,t);else Object.defineProperty(this,"stack",{value:(new Error).stack||""});if(n)r(this,n)}(t.prototype=Object.create(Error.prototype)).constructor=t;Object.defineProperty(t.prototype,"name",{get:function(){return e}});t.prototype.toString=function e(){return this.name+": "+this.message};return t}t.newError=n;t.ProtocolError=n("ProtocolError");t.oneOfGetter=function e(t){var r={};for(var n=0;n<t.length;++n)r[t[n]]=1;return function(){for(var e=Object.keys(this),t=e.length-1;t>-1;--t)if(r[e[t]]===1&&this[e[t]]!==undefined&&this[e[t]]!==null)return e[t]}};t.oneOfSetter=function e(t){return function(e){for(var r=0;r<t.length;++r)if(t[r]!==e)delete this[t[r]]}};t.toJSONOptions={longs:String,enums:String,bytes:String,json:true};t._configure=function(){var e=t.Buffer;if(!e){t._Buffer_from=t._Buffer_allocUnsafe=null;return}t._Buffer_from=e.from!==Uint8Array.from&&e.from||function t(r,n){return new e(r,n)};t._Buffer_allocUnsafe=e.allocUnsafe||function t(r){return new e(r)}}})(minimal$1);var writer=Writer$1;var util$a=minimal$1;var BufferWriter$1;var LongBits$1=util$a.LongBits,base64$1=util$a.base64,utf8$1=util$a.utf8;function Op(e,t,r){this.fn=e;this.len=t;this.next=undefined;this.val=r}function noop(){}function State(e){this.head=e.head;this.tail=e.tail;this.len=e.len;this.next=e.states}function Writer$1(){this.len=0;this.head=new Op(noop,0,0);this.tail=this.head;this.states=null}var create$3=function e(){return util$a.Buffer?function e(){return(Writer$1.create=function e(){return new BufferWriter$1})()}:function e(){return new Writer$1}};Writer$1.create=create$3();Writer$1.alloc=function e(t){return new util$a.Array(t)};if(util$a.Array!==Array)Writer$1.alloc=util$a.pool(Writer$1.alloc,util$a.Array.prototype.subarray);Writer$1.prototype._push=function e(t,r,n){this.tail=this.tail.next=new Op(t,r,n);this.len+=r;return this};function writeByte(e,t,r){t[r]=e&255}function writeVarint32(e,t,r){while(e>127){t[r++]=e&127|128;e>>>=7}t[r]=e}function VarintOp(e,t){this.len=e;this.next=undefined;this.val=t}VarintOp.prototype=Object.create(Op.prototype);VarintOp.prototype.fn=writeVarint32;Writer$1.prototype.uint32=function e(t){this.len+=(this.tail=this.tail.next=new VarintOp((t=t>>>0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len;return this};Writer$1.prototype.int32=function e(t){return t<0?this._push(writeVarint64,10,LongBits$1.fromNumber(t)):this.uint32(t)};Writer$1.prototype.sint32=function e(t){return this.uint32((t<<1^t>>31)>>>0)};function writeVarint64(e,t,r){while(e.hi){t[r++]=e.lo&127|128;e.lo=(e.lo>>>7|e.hi<<25)>>>0;e.hi>>>=7}while(e.lo>127){t[r++]=e.lo&127|128;e.lo=e.lo>>>7}t[r++]=e.lo}Writer$1.prototype.uint64=function e(t){var r=LongBits$1.from(t);return this._push(writeVarint64,r.length(),r)};Writer$1.prototype.int64=Writer$1.prototype.uint64;Writer$1.prototype.sint64=function e(t){var r=LongBits$1.from(t).zzEncode();return this._push(writeVarint64,r.length(),r)};Writer$1.prototype.bool=function e(t){return this._push(writeByte,1,t?1:0)};function writeFixed32(e,t,r){t[r]=e&255;t[r+1]=e>>>8&255;t[r+2]=e>>>16&255;t[r+3]=e>>>24}Writer$1.prototype.fixed32=function e(t){return this._push(writeFixed32,4,t>>>0)};Writer$1.prototype.sfixed32=Writer$1.prototype.fixed32;Writer$1.prototype.fixed64=function e(t){var r=LongBits$1.from(t);return this._push(writeFixed32,4,r.lo)._push(writeFixed32,4,r.hi)};Writer$1.prototype.sfixed64=Writer$1.prototype.fixed64;Writer$1.prototype.float=function e(t){return this._push(util$a.float.writeFloatLE,4,t)};Writer$1.prototype.double=function e(t){return this._push(util$a.float.writeDoubleLE,8,t)};var writeBytes=util$a.Array.prototype.set?function e(t,r,n){r.set(t,n)}:function e(t,r,n){for(var i=0;i<t.length;++i)r[n+i]=t[i]};Writer$1.prototype.bytes=function e(t){var r=t.length>>>0;if(!r)return this._push(writeByte,1,0);if(util$a.isString(t)){var n=Writer$1.alloc(r=base64$1.length(t));base64$1.decode(t,n,0);t=n}return this.uint32(r)._push(writeBytes,r,t)};Writer$1.prototype.string=function e(t){var r=utf8$1.length(t);return r?this.uint32(r)._push(utf8$1.write,r,t):this._push(writeByte,1,0)};Writer$1.prototype.fork=function e(){this.states=new State(this);this.head=this.tail=new Op(noop,0,0);this.len=0;return this};Writer$1.prototype.reset=function e(){if(this.states){this.head=this.states.head;this.tail=this.states.tail;this.len=this.states.len;this.states=this.states.next}else{this.head=this.tail=new Op(noop,0,0);this.len=0}return this};Writer$1.prototype.ldelim=function e(){var t=this.head,r=this.tail,n=this.len;this.reset().uint32(n);if(n){this.tail.next=t.next;this.tail=r;this.len+=n}return this};Writer$1.prototype.finish=function e(){var t=this.head.next,r=this.constructor.alloc(this.len),n=0;while(t){t.fn(t.val,r,n);n+=t.len;t=t.next}return r};Writer$1._configure=function(e){BufferWriter$1=e;Writer$1.create=create$3();BufferWriter$1._configure()};var writer_buffer=BufferWriter;var Writer=writer;(BufferWriter.prototype=Object.create(Writer.prototype)).constructor=BufferWriter;var util$9=minimal$1;function BufferWriter(){Writer.call(this)}BufferWriter._configure=function(){BufferWriter.alloc=util$9._Buffer_allocUnsafe;BufferWriter.writeBytesBuffer=util$9.Buffer&&util$9.Buffer.prototype instanceof Uint8Array&&util$9.Buffer.prototype.set.name==="set"?function e(t,r,n){r.set(t,n)}:function e(t,r,n){if(t.copy)t.copy(r,n,0,t.length);else for(var i=0;i<t.length;)r[n++]=t[i++]}};BufferWriter.prototype.bytes=function e(t){if(util$9.isString(t))t=util$9._Buffer_from(t,"base64");var r=t.length>>>0;this.uint32(r);if(r)this._push(BufferWriter.writeBytesBuffer,r,t);return this};function writeStringBuffer(e,t,r){if(e.length<40)util$9.utf8.write(e,t,r);else if(t.utf8Write)t.utf8Write(e,r);else t.write(e,r)}BufferWriter.prototype.string=function e(t){var r=util$9.Buffer.byteLength(t);this.uint32(r);if(r)this._push(writeStringBuffer,r,t);return this};BufferWriter._configure();var reader=Reader$1;var util$8=minimal$1;var BufferReader$1;var LongBits=util$8.LongBits,utf8=util$8.utf8;function indexOutOfRange(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function Reader$1(e){this.buf=e;this.pos=0;this.len=e.length}var create_array=typeof Uint8Array!=="undefined"?function e(t){if(t instanceof Uint8Array||Array.isArray(t))return new Reader$1(t);throw Error("illegal buffer")}:function e(t){if(Array.isArray(t))return new Reader$1(t);throw Error("illegal buffer")};var create$2=function e(){return util$8.Buffer?function e(t){return(Reader$1.create=function e(t){return util$8.Buffer.isBuffer(t)?new BufferReader$1(t):create_array(t)})(t)}:create_array};Reader$1.create=create$2();Reader$1.prototype._slice=util$8.Array.prototype.subarray||util$8.Array.prototype.slice;Reader$1.prototype.uint32=function e(){var t=4294967295;return function e(){t=(this.buf[this.pos]&127)>>>0;if(this.buf[this.pos++]<128)return t;t=(t|(this.buf[this.pos]&127)<<7)>>>0;if(this.buf[this.pos++]<128)return t;t=(t|(this.buf[this.pos]&127)<<14)>>>0;if(this.buf[this.pos++]<128)return t;t=(t|(this.buf[this.pos]&127)<<21)>>>0;if(this.buf[this.pos++]<128)return t;t=(t|(this.buf[this.pos]&15)<<28)>>>0;if(this.buf[this.pos++]<128)return t;if((this.pos+=5)>this.len){this.pos=this.len;throw indexOutOfRange(this,10)}return t}}();Reader$1.prototype.int32=function e(){return this.uint32()|0};Reader$1.prototype.sint32=function e(){var t=this.uint32();return t>>>1^-(t&1)|0};function readLongVarint(){var e=new LongBits(0,0);var t=0;if(this.len-this.pos>4){for(;t<4;++t){e.lo=(e.lo|(this.buf[this.pos]&127)<<t*7)>>>0;if(this.buf[this.pos++]<128)return e}e.lo=(e.lo|(this.buf[this.pos]&127)<<28)>>>0;e.hi=(e.hi|(this.buf[this.pos]&127)>>4)>>>0;if(this.buf[this.pos++]<128)return e;t=0}else{for(;t<3;++t){if(this.pos>=this.len)throw indexOutOfRange(this);e.lo=(e.lo|(this.buf[this.pos]&127)<<t*7)>>>0;if(this.buf[this.pos++]<128)return e}e.lo=(e.lo|(this.buf[this.pos++]&127)<<t*7)>>>0;return e}if(this.len-this.pos>4){for(;t<5;++t){e.hi=(e.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0;if(this.buf[this.pos++]<128)return e}}else{for(;t<5;++t){if(this.pos>=this.len)throw indexOutOfRange(this);e.hi=(e.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0;if(this.buf[this.pos++]<128)return e}}throw Error("invalid varint encoding")}Reader$1.prototype.bool=function e(){return this.uint32()!==0};function readFixed32_end(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}Reader$1.prototype.fixed32=function e(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)};Reader$1.prototype.sfixed32=function e(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)|0};function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader$1.prototype.float=function e(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var t=util$8.float.readFloatLE(this.buf,this.pos);this.pos+=4;return t};Reader$1.prototype.double=function e(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var t=util$8.float.readDoubleLE(this.buf,this.pos);this.pos+=8;return t};Reader$1.prototype.bytes=function e(){var t=this.uint32(),r=this.pos,n=this.pos+t;if(n>this.len)throw indexOutOfRange(this,t);this.pos+=t;if(Array.isArray(this.buf))return this.buf.slice(r,n);return r===n?new this.buf.constructor(0):this._slice.call(this.buf,r,n)};Reader$1.prototype.string=function e(){var t=this.bytes();return utf8.read(t,0,t.length)};Reader$1.prototype.skip=function e(t){if(typeof t==="number"){if(this.pos+t>this.len)throw indexOutOfRange(this,t);this.pos+=t}else{do{if(this.pos>=this.len)throw indexOutOfRange(this)}while(this.buf[this.pos++]&128)}return this};Reader$1.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:while((e=this.uint32()&7)!==4){this.skipType(e)}break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this};Reader$1._configure=function(e){BufferReader$1=e;Reader$1.create=create$2();BufferReader$1._configure();var t=util$8.Long?"toLong":"toNumber";util$8.merge(Reader$1.prototype,{int64:function e(){return readLongVarint.call(this)[t](false)},uint64:function e(){return readLongVarint.call(this)[t](true)},sint64:function e(){return readLongVarint.call(this).zzDecode()[t](false)},fixed64:function e(){return readFixed64.call(this)[t](true)},sfixed64:function e(){return readFixed64.call(this)[t](false)}})};var reader_buffer=BufferReader;var Reader=reader;(BufferReader.prototype=Object.create(Reader.prototype)).constructor=BufferReader;var util$7=minimal$1;function BufferReader(e){Reader.call(this,e)}BufferReader._configure=function(){if(util$7.Buffer)BufferReader.prototype._slice=util$7.Buffer.prototype.slice};BufferReader.prototype.string=function e(){var t=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+t,this.len))};BufferReader._configure();var rpc={};var service=Service;var util$6=minimal$1;(Service.prototype=Object.create(util$6.EventEmitter.prototype)).constructor=Service;function Service(e,t,r){if(typeof e!=="function")throw TypeError("rpcImpl must be a function");util$6.EventEmitter.call(this);this.rpcImpl=e;this.requestDelimited=Boolean(t);this.responseDelimited=Boolean(r)}Service.prototype.rpcCall=function e(t,r,n,i,s){if(!i)throw TypeError("request must be specified");var a=this;if(!s)return util$6.asPromise(e,a,t,r,n,i);if(!a.rpcImpl){setTimeout((function(){s(Error("already ended"))}),0);return undefined}try{return a.rpcImpl(t,r[a.requestDelimited?"encodeDelimited":"encode"](i).finish(),(function e(r,i){if(r){a.emit("error",r,t);return s(r)}if(i===null){a.end(true);return undefined}if(!(i instanceof n)){try{i=n[a.responseDelimited?"decodeDelimited":"decode"](i)}catch(r){a.emit("error",r,t);return s(r)}}a.emit("data",i,t);return s(null,i)}))}catch(e){a.emit("error",e,t);setTimeout((function(){s(e)}),0);return undefined}};Service.prototype.end=function e(t){if(this.rpcImpl){if(!t)this.rpcImpl(null,null,null);this.rpcImpl=null;this.emit("end").off()}return this};(function(e){var t=e;t.Service=service})(rpc);var roots={};(function(e){var t=e;t.build="minimal";t.Writer=writer;t.BufferWriter=writer_buffer;t.Reader=reader;t.BufferReader=reader_buffer;t.util=minimal$1;t.rpc=rpc;t.roots=roots;t.configure=r;function r(){t.util._configure();t.Writer._configure(t.BufferWriter);t.Reader._configure(t.BufferReader)}r()})(indexMinimal);var minimal=indexMinimal;var $protobuf$1=minimal;var $Reader$1=$protobuf$1.Reader,$Writer$1=$protobuf$1.Writer,$util$1=$protobuf$1.util;var $root$1=$protobuf$1.roots["ipfs-unixfs"]||($protobuf$1.roots["ipfs-unixfs"]={});$root$1.Data=function(){function e(e){this.blocksizes=[];if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)if(e[t[r]]!=null)this[t[r]]=e[t[r]]}e.prototype.Type=0;e.prototype.Data=$util$1.newBuffer([]);e.prototype.filesize=$util$1.Long?$util$1.Long.fromBits(0,0,true):0;e.prototype.blocksizes=$util$1.emptyArray;e.prototype.hashType=$util$1.Long?$util$1.Long.fromBits(0,0,true):0;e.prototype.fanout=$util$1.Long?$util$1.Long.fromBits(0,0,true):0;e.prototype.mode=0;e.prototype.mtime=null;e.encode=function e(t,r){if(!r)r=$Writer$1.create();r.uint32(8).int32(t.Type);if(t.Data!=null&&Object.hasOwnProperty.call(t,"Data"))r.uint32(18).bytes(t.Data);if(t.filesize!=null&&Object.hasOwnProperty.call(t,"filesize"))r.uint32(24).uint64(t.filesize);if(t.blocksizes!=null&&t.blocksizes.length){for(var n=0;n<t.blocksizes.length;++n)r.uint32(32).uint64(t.blocksizes[n])}if(t.hashType!=null&&Object.hasOwnProperty.call(t,"hashType"))r.uint32(40).uint64(t.hashType);if(t.fanout!=null&&Object.hasOwnProperty.call(t,"fanout"))r.uint32(48).uint64(t.fanout);if(t.mode!=null&&Object.hasOwnProperty.call(t,"mode"))r.uint32(56).uint32(t.mode);if(t.mtime!=null&&Object.hasOwnProperty.call(t,"mtime"))$root$1.UnixTime.encode(t.mtime,r.uint32(66).fork()).ldelim();return r};e.decode=function e(t,r){if(!(t instanceof $Reader$1))t=$Reader$1.create(t);var n=r===undefined?t.len:t.pos+r,i=new $root$1.Data;while(t.pos<n){var s=t.uint32();switch(s>>>3){case 1:i.Type=t.int32();break;case 2:i.Data=t.bytes();break;case 3:i.filesize=t.uint64();break;case 4:if(!(i.blocksizes&&i.blocksizes.length))i.blocksizes=[];if((s&7)===2){var a=t.uint32()+t.pos;while(t.pos<a)i.blocksizes.push(t.uint64())}else i.blocksizes.push(t.uint64());break;case 5:i.hashType=t.uint64();break;case 6:i.fanout=t.uint64();break;case 7:i.mode=t.uint32();break;case 8:i.mtime=$root$1.UnixTime.decode(t,t.uint32());break;default:t.skipType(s&7);break}}if(!i.hasOwnProperty("Type"))throw $util$1.ProtocolError("missing required 'Type'",{instance:i});return i};e.fromObject=function e(t){if(t instanceof $root$1.Data)return t;var r=new $root$1.Data;switch(t.Type){case"Raw":case 0:r.Type=0;break;case"Directory":case 1:r.Type=1;break;case"File":case 2:r.Type=2;break;case"Metadata":case 3:r.Type=3;break;case"Symlink":case 4:r.Type=4;break;case"HAMTShard":case 5:r.Type=5;break}if(t.Data!=null){if(typeof t.Data==="string")$util$1.base64.decode(t.Data,r.Data=$util$1.newBuffer($util$1.base64.length(t.Data)),0);else if(t.Data.length)r.Data=t.Data}if(t.filesize!=null){if($util$1.Long)(r.filesize=$util$1.Long.fromValue(t.filesize)).unsigned=true;else if(typeof t.filesize==="string")r.filesize=parseInt(t.filesize,10);else if(typeof t.filesize==="number")r.filesize=t.filesize;else if(typeof t.filesize==="object")r.filesize=new $util$1.LongBits(t.filesize.low>>>0,t.filesize.high>>>0).toNumber(true)}if(t.blocksizes){if(!Array.isArray(t.blocksizes))throw TypeError(".Data.blocksizes: array expected");r.blocksizes=[];for(var n=0;n<t.blocksizes.length;++n){if($util$1.Long)(r.blocksizes[n]=$util$1.Long.fromValue(t.blocksizes[n])).unsigned=true;else if(typeof t.blocksizes[n]==="string")r.blocksizes[n]=parseInt(t.blocksizes[n],10);else if(typeof t.blocksizes[n]==="number")r.blocksizes[n]=t.blocksizes[n];else if(typeof t.blocksizes[n]==="object")r.blocksizes[n]=new $util$1.LongBits(t.blocksizes[n].low>>>0,t.blocksizes[n].high>>>0).toNumber(true)}}if(t.hashType!=null){if($util$1.Long)(r.hashType=$util$1.Long.fromValue(t.hashType)).unsigned=true;else if(typeof t.hashType==="string")r.hashType=parseInt(t.hashType,10);else if(typeof t.hashType==="number")r.hashType=t.hashType;else if(typeof t.hashType==="object")r.hashType=new $util$1.LongBits(t.hashType.low>>>0,t.hashType.high>>>0).toNumber(true)}if(t.fanout!=null){if($util$1.Long)(r.fanout=$util$1.Long.fromValue(t.fanout)).unsigned=true;else if(typeof t.fanout==="string")r.fanout=parseInt(t.fanout,10);else if(typeof t.fanout==="number")r.fanout=t.fanout;else if(typeof t.fanout==="object")r.fanout=new $util$1.LongBits(t.fanout.low>>>0,t.fanout.high>>>0).toNumber(true)}if(t.mode!=null){r.mode=t.mode>>>0}if(t.mtime!=null){if(typeof t.mtime!=="object")throw TypeError(".Data.mtime: object expected");r.mtime=$root$1.UnixTime.fromObject(t.mtime)}return r};e.toObject=function e(t,r){if(!r)r={};var n={};if(r.arrays||r.defaults){n.blocksizes=[]}if(r.defaults){n.Type=r.enums===String?"Raw":0;if(r.bytes===String)n.Data="";else{n.Data=[];if(r.bytes!==Array)n.Data=$util$1.newBuffer(n.Data)}if($util$1.Long){var i=new $util$1.Long(0,0,true);n.filesize=r.longs===String?i.toString():r.longs===Number?i.toNumber():i}else n.filesize=r.longs===String?"0":0;if($util$1.Long){var i=new $util$1.Long(0,0,true);n.hashType=r.longs===String?i.toString():r.longs===Number?i.toNumber():i}else n.hashType=r.longs===String?"0":0;if($util$1.Long){var i=new $util$1.Long(0,0,true);n.fanout=r.longs===String?i.toString():r.longs===Number?i.toNumber():i}else n.fanout=r.longs===String?"0":0;n.mode=0;n.mtime=null}if(t.Type!=null&&t.hasOwnProperty("Type")){n.Type=r.enums===String?$root$1.Data.DataType[t.Type]:t.Type}if(t.Data!=null&&t.hasOwnProperty("Data")){n.Data=r.bytes===String?$util$1.base64.encode(t.Data,0,t.Data.length):r.bytes===Array?Array.prototype.slice.call(t.Data):t.Data}if(t.filesize!=null&&t.hasOwnProperty("filesize")){if(typeof t.filesize==="number")n.filesize=r.longs===String?String(t.filesize):t.filesize;else n.filesize=r.longs===String?$util$1.Long.prototype.toString.call(t.filesize):r.longs===Number?new $util$1.LongBits(t.filesize.low>>>0,t.filesize.high>>>0).toNumber(true):t.filesize}if(t.blocksizes&&t.blocksizes.length){n.blocksizes=[];for(var s=0;s<t.blocksizes.length;++s){if(typeof t.blocksizes[s]==="number")n.blocksizes[s]=r.longs===String?String(t.blocksizes[s]):t.blocksizes[s];else n.blocksizes[s]=r.longs===String?$util$1.Long.prototype.toString.call(t.blocksizes[s]):r.longs===Number?new $util$1.LongBits(t.blocksizes[s].low>>>0,t.blocksizes[s].high>>>0).toNumber(true):t.blocksizes[s]}}if(t.hashType!=null&&t.hasOwnProperty("hashType")){if(typeof t.hashType==="number")n.hashType=r.longs===String?String(t.hashType):t.hashType;else n.hashType=r.longs===String?$util$1.Long.prototype.toString.call(t.hashType):r.longs===Number?new $util$1.LongBits(t.hashType.low>>>0,t.hashType.high>>>0).toNumber(true):t.hashType}if(t.fanout!=null&&t.hasOwnProperty("fanout")){if(typeof t.fanout==="number")n.fanout=r.longs===String?String(t.fanout):t.fanout;else n.fanout=r.longs===String?$util$1.Long.prototype.toString.call(t.fanout):r.longs===Number?new $util$1.LongBits(t.fanout.low>>>0,t.fanout.high>>>0).toNumber(true):t.fanout}if(t.mode!=null&&t.hasOwnProperty("mode")){n.mode=t.mode}if(t.mtime!=null&&t.hasOwnProperty("mtime")){n.mtime=$root$1.UnixTime.toObject(t.mtime,r)}return n};e.prototype.toJSON=function e(){return this.constructor.toObject(this,$protobuf$1.util.toJSONOptions)};e.DataType=function(){var e={},t=Object.create(e);t[e[0]="Raw"]=0;t[e[1]="Directory"]=1;t[e[2]="File"]=2;t[e[3]="Metadata"]=3;t[e[4]="Symlink"]=4;t[e[5]="HAMTShard"]=5;return t}();return e}();$root$1.UnixTime=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)if(e[t[r]]!=null)this[t[r]]=e[t[r]]}e.prototype.Seconds=$util$1.Long?$util$1.Long.fromBits(0,0,false):0;e.prototype.FractionalNanoseconds=0;e.encode=function e(t,r){if(!r)r=$Writer$1.create();r.uint32(8).int64(t.Seconds);if(t.FractionalNanoseconds!=null&&Object.hasOwnProperty.call(t,"FractionalNanoseconds"))r.uint32(21).fixed32(t.FractionalNanoseconds);return r};e.decode=function e(t,r){if(!(t instanceof $Reader$1))t=$Reader$1.create(t);var n=r===undefined?t.len:t.pos+r,i=new $root$1.UnixTime;while(t.pos<n){var s=t.uint32();switch(s>>>3){case 1:i.Seconds=t.int64();break;case 2:i.FractionalNanoseconds=t.fixed32();break;default:t.skipType(s&7);break}}if(!i.hasOwnProperty("Seconds"))throw $util$1.ProtocolError("missing required 'Seconds'",{instance:i});return i};e.fromObject=function e(t){if(t instanceof $root$1.UnixTime)return t;var r=new $root$1.UnixTime;if(t.Seconds!=null){if($util$1.Long)(r.Seconds=$util$1.Long.fromValue(t.Seconds)).unsigned=false;else if(typeof t.Seconds==="string")r.Seconds=parseInt(t.Seconds,10);else if(typeof t.Seconds==="number")r.Seconds=t.Seconds;else if(typeof t.Seconds==="object")r.Seconds=new $util$1.LongBits(t.Seconds.low>>>0,t.Seconds.high>>>0).toNumber()}if(t.FractionalNanoseconds!=null){r.FractionalNanoseconds=t.FractionalNanoseconds>>>0}return r};e.toObject=function e(t,r){if(!r)r={};var n={};if(r.defaults){if($util$1.Long){var i=new $util$1.Long(0,0,false);n.Seconds=r.longs===String?i.toString():r.longs===Number?i.toNumber():i}else n.Seconds=r.longs===String?"0":0;n.FractionalNanoseconds=0}if(t.Seconds!=null&&t.hasOwnProperty("Seconds")){if(typeof t.Seconds==="number")n.Seconds=r.longs===String?String(t.Seconds):t.Seconds;else n.Seconds=r.longs===String?$util$1.Long.prototype.toString.call(t.Seconds):r.longs===Number?new $util$1.LongBits(t.Seconds.low>>>0,t.Seconds.high>>>0).toNumber():t.Seconds}if(t.FractionalNanoseconds!=null&&t.hasOwnProperty("FractionalNanoseconds")){n.FractionalNanoseconds=t.FractionalNanoseconds}return n};e.prototype.toJSON=function e(){return this.constructor.toObject(this,$protobuf$1.util.toJSONOptions)};return e}();$root$1.Metadata=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)if(e[t[r]]!=null)this[t[r]]=e[t[r]]}e.prototype.MimeType="";e.encode=function e(t,r){if(!r)r=$Writer$1.create();if(t.MimeType!=null&&Object.hasOwnProperty.call(t,"MimeType"))r.uint32(10).string(t.MimeType);return r};e.decode=function e(t,r){if(!(t instanceof $Reader$1))t=$Reader$1.create(t);var n=r===undefined?t.len:t.pos+r,i=new $root$1.Metadata;while(t.pos<n){var s=t.uint32();switch(s>>>3){case 1:i.MimeType=t.string();break;default:t.skipType(s&7);break}}return i};e.fromObject=function e(t){if(t instanceof $root$1.Metadata)return t;var r=new $root$1.Metadata;if(t.MimeType!=null){r.MimeType=String(t.MimeType)}return r};e.toObject=function e(t,r){if(!r)r={};var n={};if(r.defaults){n.MimeType=""}if(t.MimeType!=null&&t.hasOwnProperty("MimeType")){n.MimeType=t.MimeType}return n};e.prototype.toJSON=function e(){return this.constructor.toObject(this,$protobuf$1.util.toJSONOptions)};return e}();var unixfs=$root$1;const{Data:PBData}=unixfs;const errcode$1=errCode$3;const types=["raw","directory","file","metadata","symlink","hamt-sharded-directory"];const dirTypes=["directory","hamt-sharded-directory"];const DEFAULT_FILE_MODE=parseInt("0644",8);const DEFAULT_DIRECTORY_MODE=parseInt("0755",8);function parseMode(e){if(e==null){return undefined}if(typeof e==="number"){return e&4095}e=e.toString();if(e.substring(0,1)==="0"){return parseInt(e,8)&4095}return parseInt(e,10)&4095}function parseMtime(e){if(e==null){return undefined}let t;if(e.secs!=null){t={secs:e.secs,nsecs:e.nsecs}}if(e.Seconds!=null){t={secs:e.Seconds,nsecs:e.FractionalNanoseconds}}if(Array.isArray(e)){t={secs:e[0],nsecs:e[1]}}if(e instanceof Date){const r=e.getTime();const n=Math.floor(r/1e3);t={secs:n,nsecs:(r-n*1e3)*1e3}}if(!Object.prototype.hasOwnProperty.call(t,"secs")){return undefined}if(t!=null&&t.nsecs!=null&&(t.nsecs<0||t.nsecs>999999999)){throw errcode$1(new Error("mtime-nsecs must be within the range [0,999999999]"),"ERR_INVALID_MTIME_NSECS")}return t}class Data{static unmarshal(e){const t=PBData.decode(e);const r=PBData.toObject(t,{defaults:false,arrays:true,longs:Number,objects:false});const n=new Data({type:types[r.Type],data:r.Data,blockSizes:r.blocksizes,mode:r.mode,mtime:r.mtime?{secs:r.mtime.Seconds,nsecs:r.mtime.FractionalNanoseconds}:undefined});n._originalMode=r.mode||0;return n}constructor(e={type:"file"}){const{type:t,data:r,blockSizes:n,hashType:i,fanout:s,mtime:a,mode:o}=e;if(t&&!types.includes(t)){throw errcode$1(new Error("Type: "+t+" is not valid"),"ERR_INVALID_TYPE")}this.type=t||"file";this.data=r;this.hashType=i;this.fanout=s;this.blockSizes=n||[];this._originalMode=0;this.mode=parseMode(o);if(a){this.mtime=parseMtime(a);if(this.mtime&&!this.mtime.nsecs){this.mtime.nsecs=0}}}set mode(e){this._mode=this.isDirectory()?DEFAULT_DIRECTORY_MODE:DEFAULT_FILE_MODE;const t=parseMode(e);if(t!==undefined){this._mode=t}}get mode(){return this._mode}isDirectory(){return Boolean(this.type&&dirTypes.includes(this.type))}addBlockSize(e){this.blockSizes.push(e)}removeBlockSize(e){this.blockSizes.splice(e,1)}fileSize(){if(this.isDirectory()){return 0}let e=0;this.blockSizes.forEach((t=>{e+=t}));if(this.data){e+=this.data.length}return e}marshal(){let e;switch(this.type){case"raw":e=PBData.DataType.Raw;break;case"directory":e=PBData.DataType.Directory;break;case"file":e=PBData.DataType.File;break;case"metadata":e=PBData.DataType.Metadata;break;case"symlink":e=PBData.DataType.Symlink;break;case"hamt-sharded-directory":e=PBData.DataType.HAMTShard;break;default:throw errcode$1(new Error("Type: "+e+" is not valid"),"ERR_INVALID_TYPE")}let t=this.data;if(!this.data||!this.data.length){t=undefined}let r;if(this.mode!=null){r=this._originalMode&4294963200|(parseMode(this.mode)||0);if(r===DEFAULT_FILE_MODE&&!this.isDirectory()){r=undefined}if(r===DEFAULT_DIRECTORY_MODE&&this.isDirectory()){r=undefined}}let n;if(this.mtime!=null){const e=parseMtime(this.mtime);if(e){n={Seconds:e.secs,FractionalNanoseconds:e.nsecs};if(n.FractionalNanoseconds===0){delete n.FractionalNanoseconds}}}const i={Type:e,Data:t,filesize:this.isDirectory()?undefined:this.fileSize(),blocksizes:this.blockSizes,hashType:this.hashType,fanout:this.fanout,mode:r,mtime:n};return PBData.encode(i).finish()}}var src$6={UnixFS:Data,parseMode,parseMtime};var encode_1=encode$2;var MSB$1=128,REST$1=127,MSBALL=~REST$1,INT=Math.pow(2,31);function encode$2(e,t,r){if(Number.MAX_SAFE_INTEGER&&e>Number.MAX_SAFE_INTEGER){encode$2.bytes=0;throw new RangeError("Could not encode varint")}t=t||[];r=r||0;var n=r;while(e>=INT){t[r++]=e&255|MSB$1;e/=128}while(e&MSBALL){t[r++]=e&255|MSB$1;e>>>=7}t[r]=e|0;encode$2.bytes=r-n+1;return t}var decode$1=read;var MSB=128,REST=127;function read(e,t){var r=0,t=t||0,n=0,i=t,s,a=e.length;do{if(i>=a||n>49){read.bytes=0;throw new RangeError("Could not decode varint")}s=e[i++];r+=n<28?(s&REST)<<n:(s&REST)*Math.pow(2,n);n+=7}while(s>=MSB);read.bytes=i-t;return r}var N1=Math.pow(2,7);var N2=Math.pow(2,14);var N3=Math.pow(2,21);var N4=Math.pow(2,28);var N5=Math.pow(2,35);var N6=Math.pow(2,42);var N7=Math.pow(2,49);var N8=Math.pow(2,56);var N9=Math.pow(2,63);var length=function(e){return e<N1?1:e<N2?2:e<N3?3:e<N4?4:e<N5?5:e<N6?6:e<N7?7:e<N8?8:e<N9?9:10};var varint$2={encode:encode_1,decode:decode$1,encodingLength:length};var concat$5={};var alloc$b={};var asUint8array$a={};Object.defineProperty(asUint8array$a,"__esModule",{value:true});function asUint8Array$2(e){if(globalThis.Buffer!=null){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}return e}asUint8array$a.asUint8Array=asUint8Array$2;Object.defineProperty(alloc$b,"__esModule",{value:true});var asUint8array$9=asUint8array$a;function alloc$a(e=0){if(globalThis.Buffer!=null&&globalThis.Buffer.alloc!=null){return asUint8array$9.asUint8Array(globalThis.Buffer.alloc(e))}return new Uint8Array(e)}function allocUnsafe$2(e=0){if(globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null){return asUint8array$9.asUint8Array(globalThis.Buffer.allocUnsafe(e))}return new Uint8Array(e)}alloc$b.alloc=alloc$a;alloc$b.allocUnsafe=allocUnsafe$2;Object.defineProperty(concat$5,"__esModule",{value:true});var alloc$9=alloc$b;var asUint8array$8=asUint8array$a;function concat$4(e,t){if(!t){t=e.reduce(((e,t)=>e+t.length),0)}const r=alloc$9.allocUnsafe(t);let n=0;for(const t of e){r.set(t,n);n+=t.length}return asUint8array$8.asUint8Array(r)}concat$5.concat=concat$4;var toString$6={};var basics$2=basics$5;var alloc$8=alloc$b;function createCodec$3(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}const string$3=createCodec$3("utf8","u",(e=>{const t=new TextDecoder("utf8");return"u"+t.decode(e)}),(e=>{const t=new TextEncoder;return t.encode(e.substring(1))}));const ascii$3=createCodec$3("ascii","a",(e=>{let t="a";for(let r=0;r<e.length;r++){t+=String.fromCharCode(e[r])}return t}),(e=>{e=e.substring(1);const t=alloc$8.allocUnsafe(e.length);for(let r=0;r<e.length;r++){t[r]=e.charCodeAt(r)}return t}));const BASES$3={utf8:string$3,"utf-8":string$3,hex:basics$2.bases.base16,latin1:ascii$3,ascii:ascii$3,binary:ascii$3,...basics$2.bases};var bases$9=BASES$3;Object.defineProperty(toString$6,"__esModule",{value:true});var bases$8=bases$9;function toString$5(e,t="utf8"){const r=bases$8[t];if(!r){throw new Error(`Unsupported encoding "${t}"`)}if((t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null){return globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8")}return r.encoder.encode(e).substring(1)}toString$6.toString=toString$5;var fromString$4={};Object.defineProperty(fromString$4,"__esModule",{value:true});var bases$7=bases$9;var asUint8array$7=asUint8array$a;function fromString$3(e,t="utf8"){const r=bases$7[t];if(!r){throw new Error(`Unsupported encoding "${t}"`)}if((t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null){return asUint8array$7.asUint8Array(globalThis.Buffer.from(e,"utf-8"))}return r.decoder.decode(`${r.prefix}${e}`)}fromString$4.fromString=fromString$3;const varint$1=varint$2;const{toString:uint8ArrayToString$2}=toString$6;const{fromString:uint8ArrayFromString$4}=fromString$4;var util$5={numberToUint8Array,uint8ArrayToNumber,varintUint8ArrayEncode,varintEncode:varintEncode$1};function uint8ArrayToNumber(e){return parseInt(uint8ArrayToString$2(e,"base16"),16)}function numberToUint8Array(e){let t=e.toString(16);if(t.length%2===1){t="0"+t}return uint8ArrayFromString$4(t,"base16")}function varintUint8ArrayEncode(e){return Uint8Array.from(varint$1.encode(uint8ArrayToNumber(e)))}function varintEncode$1(e){return Uint8Array.from(varint$1.encode(e))}const baseTable$1=Object.freeze({identity:0,cidv1:1,cidv2:2,cidv3:3,ip4:4,tcp:6,sha1:17,"sha2-256":18,"sha2-512":19,"sha3-512":20,"sha3-384":21,"sha3-256":22,"sha3-224":23,"shake-128":24,"shake-256":25,"keccak-224":26,"keccak-256":27,"keccak-384":28,"keccak-512":29,blake3:30,dccp:33,"murmur3-128":34,"murmur3-32":35,ip6:41,ip6zone:42,path:47,multicodec:48,multihash:49,multiaddr:50,multibase:51,dns:53,dns4:54,dns6:55,dnsaddr:56,protobuf:80,cbor:81,raw:85,"dbl-sha2-256":86,rlp:96,bencode:99,"dag-pb":112,"dag-cbor":113,"libp2p-key":114,"git-raw":120,"torrent-info":123,"torrent-file":124,"leofcoin-block":129,"leofcoin-tx":130,"leofcoin-pr":131,sctp:132,"dag-jose":133,"dag-cose":134,"eth-block":144,"eth-block-list":145,"eth-tx-trie":146,"eth-tx":147,"eth-tx-receipt-trie":148,"eth-tx-receipt":149,"eth-state-trie":150,"eth-account-snapshot":151,"eth-storage-trie":152,"eth-receipt-log-trie":153,"eth-reciept-log":154,"bitcoin-block":176,"bitcoin-tx":177,"bitcoin-witness-commitment":178,"zcash-block":192,"zcash-tx":193,"caip-50":202,streamid:206,"stellar-block":208,"stellar-tx":209,md4:212,md5:213,bmt:214,"decred-block":224,"decred-tx":225,"ipld-ns":226,"ipfs-ns":227,"swarm-ns":228,"ipns-ns":229,zeronet:230,"secp256k1-pub":231,"bls12_381-g1-pub":234,"bls12_381-g2-pub":235,"x25519-pub":236,"ed25519-pub":237,"bls12_381-g1g2-pub":238,"dash-block":240,"dash-tx":241,"swarm-manifest":250,"swarm-feed":251,udp:273,"p2p-webrtc-star":275,"p2p-webrtc-direct":276,"p2p-stardust":277,"p2p-circuit":290,"dag-json":297,udt:301,utp:302,unix:400,thread:406,p2p:421,ipfs:421,https:443,onion:444,onion3:445,garlic64:446,garlic32:447,tls:448,noise:454,quic:460,ws:477,wss:478,"p2p-websocket-star":479,http:480,"swhid-1-snp":496,json:512,messagepack:513,"libp2p-peer-record":769,"libp2p-relay-rsvp":770,"car-index-sorted":1024,"sha2-256-trunc254-padded":4114,"ripemd-128":4178,"ripemd-160":4179,"ripemd-256":4180,"ripemd-320":4181,x11:4352,"p256-pub":4608,"p384-pub":4609,"p521-pub":4610,"ed448-pub":4611,"x448-pub":4612,"ed25519-priv":4864,"secp256k1-priv":4865,"x25519-priv":4866,kangarootwelve:7425,"sm3-256":21325,"blake2b-8":45569,"blake2b-16":45570,"blake2b-24":45571,"blake2b-32":45572,"blake2b-40":45573,"blake2b-48":45574,"blake2b-56":45575,"blake2b-64":45576,"blake2b-72":45577,"blake2b-80":45578,"blake2b-88":45579,"blake2b-96":45580,"blake2b-104":45581,"blake2b-112":45582,"blake2b-120":45583,"blake2b-128":45584,"blake2b-136":45585,"blake2b-144":45586,"blake2b-152":45587,"blake2b-160":45588,"blake2b-168":45589,"blake2b-176":45590,"blake2b-184":45591,"blake2b-192":45592,"blake2b-200":45593,"blake2b-208":45594,"blake2b-216":45595,"blake2b-224":45596,"blake2b-232":45597,"blake2b-240":45598,"blake2b-248":45599,"blake2b-256":45600,"blake2b-264":45601,"blake2b-272":45602,"blake2b-280":45603,"blake2b-288":45604,"blake2b-296":45605,"blake2b-304":45606,"blake2b-312":45607,"blake2b-320":45608,"blake2b-328":45609,"blake2b-336":45610,"blake2b-344":45611,"blake2b-352":45612,"blake2b-360":45613,"blake2b-368":45614,"blake2b-376":45615,"blake2b-384":45616,"blake2b-392":45617,"blake2b-400":45618,"blake2b-408":45619,"blake2b-416":45620,"blake2b-424":45621,"blake2b-432":45622,"blake2b-440":45623,"blake2b-448":45624,"blake2b-456":45625,"blake2b-464":45626,"blake2b-472":45627,"blake2b-480":45628,"blake2b-488":45629,"blake2b-496":45630,"blake2b-504":45631,"blake2b-512":45632,"blake2s-8":45633,"blake2s-16":45634,"blake2s-24":45635,"blake2s-32":45636,"blake2s-40":45637,"blake2s-48":45638,"blake2s-56":45639,"blake2s-64":45640,"blake2s-72":45641,"blake2s-80":45642,"blake2s-88":45643,"blake2s-96":45644,"blake2s-104":45645,"blake2s-112":45646,"blake2s-120":45647,"blake2s-128":45648,"blake2s-136":45649,"blake2s-144":45650,"blake2s-152":45651,"blake2s-160":45652,"blake2s-168":45653,"blake2s-176":45654,"blake2s-184":45655,"blake2s-192":45656,"blake2s-200":45657,"blake2s-208":45658,"blake2s-216":45659,"blake2s-224":45660,"blake2s-232":45661,"blake2s-240":45662,"blake2s-248":45663,"blake2s-256":45664,"skein256-8":45825,"skein256-16":45826,"skein256-24":45827,"skein256-32":45828,"skein256-40":45829,"skein256-48":45830,"skein256-56":45831,"skein256-64":45832,"skein256-72":45833,"skein256-80":45834,"skein256-88":45835,"skein256-96":45836,"skein256-104":45837,"skein256-112":45838,"skein256-120":45839,"skein256-128":45840,"skein256-136":45841,"skein256-144":45842,"skein256-152":45843,"skein256-160":45844,"skein256-168":45845,"skein256-176":45846,"skein256-184":45847,"skein256-192":45848,"skein256-200":45849,"skein256-208":45850,"skein256-216":45851,"skein256-224":45852,"skein256-232":45853,"skein256-240":45854,"skein256-248":45855,"skein256-256":45856,"skein512-8":45857,"skein512-16":45858,"skein512-24":45859,"skein512-32":45860,"skein512-40":45861,"skein512-48":45862,"skein512-56":45863,"skein512-64":45864,"skein512-72":45865,"skein512-80":45866,"skein512-88":45867,"skein512-96":45868,"skein512-104":45869,"skein512-112":45870,"skein512-120":45871,"skein512-128":45872,"skein512-136":45873,"skein512-144":45874,"skein512-152":45875,"skein512-160":45876,"skein512-168":45877,"skein512-176":45878,"skein512-184":45879,"skein512-192":45880,"skein512-200":45881,"skein512-208":45882,"skein512-216":45883,"skein512-224":45884,"skein512-232":45885,"skein512-240":45886,"skein512-248":45887,"skein512-256":45888,"skein512-264":45889,"skein512-272":45890,"skein512-280":45891,"skein512-288":45892,"skein512-296":45893,"skein512-304":45894,"skein512-312":45895,"skein512-320":45896,"skein512-328":45897,"skein512-336":45898,"skein512-344":45899,"skein512-352":45900,"skein512-360":45901,"skein512-368":45902,"skein512-376":45903,"skein512-384":45904,"skein512-392":45905,"skein512-400":45906,"skein512-408":45907,"skein512-416":45908,"skein512-424":45909,"skein512-432":45910,"skein512-440":45911,"skein512-448":45912,"skein512-456":45913,"skein512-464":45914,"skein512-472":45915,"skein512-480":45916,"skein512-488":45917,"skein512-496":45918,"skein512-504":45919,"skein512-512":45920,"skein1024-8":45921,"skein1024-16":45922,"skein1024-24":45923,"skein1024-32":45924,"skein1024-40":45925,"skein1024-48":45926,"skein1024-56":45927,"skein1024-64":45928,"skein1024-72":45929,"skein1024-80":45930,"skein1024-88":45931,"skein1024-96":45932,"skein1024-104":45933,"skein1024-112":45934,"skein1024-120":45935,"skein1024-128":45936,"skein1024-136":45937,"skein1024-144":45938,"skein1024-152":45939,"skein1024-160":45940,"skein1024-168":45941,"skein1024-176":45942,"skein1024-184":45943,"skein1024-192":45944,"skein1024-200":45945,"skein1024-208":45946,"skein1024-216":45947,"skein1024-224":45948,"skein1024-232":45949,"skein1024-240":45950,"skein1024-248":45951,"skein1024-256":45952,"skein1024-264":45953,"skein1024-272":45954,"skein1024-280":45955,"skein1024-288":45956,"skein1024-296":45957,"skein1024-304":45958,"skein1024-312":45959,"skein1024-320":45960,"skein1024-328":45961,"skein1024-336":45962,"skein1024-344":45963,"skein1024-352":45964,"skein1024-360":45965,"skein1024-368":45966,"skein1024-376":45967,"skein1024-384":45968,"skein1024-392":45969,"skein1024-400":45970,"skein1024-408":45971,"skein1024-416":45972,"skein1024-424":45973,"skein1024-432":45974,"skein1024-440":45975,"skein1024-448":45976,"skein1024-456":45977,"skein1024-464":45978,"skein1024-472":45979,"skein1024-480":45980,"skein1024-488":45981,"skein1024-496":45982,"skein1024-504":45983,"skein1024-512":45984,"skein1024-520":45985,"skein1024-528":45986,"skein1024-536":45987,"skein1024-544":45988,"skein1024-552":45989,"skein1024-560":45990,"skein1024-568":45991,"skein1024-576":45992,"skein1024-584":45993,"skein1024-592":45994,"skein1024-600":45995,"skein1024-608":45996,"skein1024-616":45997,"skein1024-624":45998,"skein1024-632":45999,"skein1024-640":46e3,"skein1024-648":46001,"skein1024-656":46002,"skein1024-664":46003,"skein1024-672":46004,"skein1024-680":46005,"skein1024-688":46006,"skein1024-696":46007,"skein1024-704":46008,"skein1024-712":46009,"skein1024-720":46010,"skein1024-728":46011,"skein1024-736":46012,"skein1024-744":46013,"skein1024-752":46014,"skein1024-760":46015,"skein1024-768":46016,"skein1024-776":46017,"skein1024-784":46018,"skein1024-792":46019,"skein1024-800":46020,"skein1024-808":46021,"skein1024-816":46022,"skein1024-824":46023,"skein1024-832":46024,"skein1024-840":46025,"skein1024-848":46026,"skein1024-856":46027,"skein1024-864":46028,"skein1024-872":46029,"skein1024-880":46030,"skein1024-888":46031,"skein1024-896":46032,"skein1024-904":46033,"skein1024-912":46034,"skein1024-920":46035,"skein1024-928":46036,"skein1024-936":46037,"skein1024-944":46038,"skein1024-952":46039,"skein1024-960":46040,"skein1024-968":46041,"skein1024-976":46042,"skein1024-984":46043,"skein1024-992":46044,"skein1024-1000":46045,"skein1024-1008":46046,"skein1024-1016":46047,"skein1024-1024":46048,"poseidon-bls12_381-a2-fc1":46081,"poseidon-bls12_381-a2-fc1-sc":46082,"zeroxcert-imprint-256":52753,"fil-commitment-unsealed":61697,"fil-commitment-sealed":61698,"holochain-adr-v0":8417572,"holochain-adr-v1":8483108,"holochain-key-v0":9728292,"holochain-key-v1":9793828,"holochain-sig-v0":10645796,"holochain-sig-v1":10711332,"skynet-ns":11639056,"arweave-ns":11704592});var generatedTable={baseTable:baseTable$1};const{baseTable}=generatedTable;const varintEncode=util$5.varintEncode;const nameToVarint$1={};const constantToCode$1={};const codeToName$1={};for(const e in baseTable){const t=e;const r=baseTable[t];nameToVarint$1[t]=varintEncode(r);const n=t.toUpperCase().replace(/-/g,"_");constantToCode$1[n]=r;if(!codeToName$1[r]){codeToName$1[r]=t}}Object.freeze(nameToVarint$1);Object.freeze(constantToCode$1);Object.freeze(codeToName$1);const nameToCode$1=Object.freeze(baseTable);var maps={nameToVarint:nameToVarint$1,constantToCode:constantToCode$1,nameToCode:nameToCode$1,codeToName:codeToName$1};const varint=varint$2;const{concat:uint8ArrayConcat$2}=concat$5;const util$4=util$5;const{nameToVarint,constantToCode,nameToCode,codeToName}=maps;function addPrefix(e,t){let r;if(e instanceof Uint8Array){r=util$4.varintUint8ArrayEncode(e)}else{if(nameToVarint[e]){r=nameToVarint[e]}else{throw new Error("multicodec not recognized")}}return uint8ArrayConcat$2([r,t],r.length+t.length)}function rmPrefix(e){varint.decode(e);return e.slice(varint.decode.bytes)}function getNameFromData(e){const t=varint.decode(e);const r=codeToName[t];if(r===undefined){throw new Error(`Code "${t}" not found`)}return r}function getNameFromCode(e){return codeToName[e]}function getCodeFromName(e){const t=nameToCode[e];if(t===undefined){throw new Error(`Codec "${e}" not found`)}return t}function getCodeFromData(e){return varint.decode(e)}function getVarintFromName(e){const t=nameToVarint[e];if(t===undefined){throw new Error(`Codec "${e}" not found`)}return t}function getVarintFromCode(e){return util$4.varintEncode(e)}function getCodec(e){return getNameFromData(e)}function getName(e){return getNameFromCode(e)}function getNumber(e){return getCodeFromName(e)}function getCode(e){return getCodeFromData(e)}function getCodeVarint(e){return getVarintFromName(e)}function getVarint(e){return Array.from(getVarintFromCode(e))}var src$5={addPrefix,rmPrefix,getNameFromData,getNameFromCode,getCodeFromName,getCodeFromData,getVarintFromName,getVarintFromCode,getCodec,getName,getNumber,getCode,getCodeVarint,getVarint,...constantToCode,nameToVarint,nameToCode,codeToName};const mh$3=src$8;const CIDUtil$1={checkCIDComponents:function(e){if(e==null){return"null values are not valid CIDs"}if(!(e.version===0||e.version===1)){return"Invalid version, must be a number equal to 1 or 0"}if(typeof e.codec!=="string"){return"codec must be string"}if(e.version===0){if(e.codec!=="dag-pb"){return"codec must be 'dag-pb' for CIDv0"}if(e.multibaseName!=="base58btc"){return"multibaseName must be 'base58btc' for CIDv0"}}if(!(e.multihash instanceof Uint8Array)){return"multihash must be a Uint8Array"}try{mh$3.validate(e.multihash)}catch(e){let t=e.message;if(!t){t="Multihash validation failed"}return t}}};var cidUtil=CIDUtil$1;var concat$3={};var alloc$7={};var asUint8array$6={};Object.defineProperty(asUint8array$6,"__esModule",{value:true});function asUint8Array$1(e){if(globalThis.Buffer!=null){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}return e}asUint8array$6.asUint8Array=asUint8Array$1;Object.defineProperty(alloc$7,"__esModule",{value:true});var asUint8array$5=asUint8array$6;function alloc$6(e=0){if(globalThis.Buffer!=null&&globalThis.Buffer.alloc!=null){return asUint8array$5.asUint8Array(globalThis.Buffer.alloc(e))}return new Uint8Array(e)}function allocUnsafe$1(e=0){if(globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null){return asUint8array$5.asUint8Array(globalThis.Buffer.allocUnsafe(e))}return new Uint8Array(e)}alloc$7.alloc=alloc$6;alloc$7.allocUnsafe=allocUnsafe$1;Object.defineProperty(concat$3,"__esModule",{value:true});var alloc$5=alloc$7;var asUint8array$4=asUint8array$6;function concat$2(e,t){if(!t){t=e.reduce(((e,t)=>e+t.length),0)}const r=alloc$5.allocUnsafe(t);let n=0;for(const t of e){r.set(t,n);n+=t.length}return asUint8array$4.asUint8Array(r)}concat$3.concat=concat$2;var toString$4={};var basics$1=basics$5;var alloc$4=alloc$7;function createCodec$2(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}const string$2=createCodec$2("utf8","u",(e=>{const t=new TextDecoder("utf8");return"u"+t.decode(e)}),(e=>{const t=new TextEncoder;return t.encode(e.substring(1))}));const ascii$2=createCodec$2("ascii","a",(e=>{let t="a";for(let r=0;r<e.length;r++){t+=String.fromCharCode(e[r])}return t}),(e=>{e=e.substring(1);const t=alloc$4.allocUnsafe(e.length);for(let r=0;r<e.length;r++){t[r]=e.charCodeAt(r)}return t}));const BASES$2={utf8:string$2,"utf-8":string$2,hex:basics$1.bases.base16,latin1:ascii$2,ascii:ascii$2,binary:ascii$2,...basics$1.bases};var bases$6=BASES$2;Object.defineProperty(toString$4,"__esModule",{value:true});var bases$5=bases$6;function toString$3(e,t="utf8"){const r=bases$5[t];if(!r){throw new Error(`Unsupported encoding "${t}"`)}if((t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null){return globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8")}return r.encoder.encode(e).substring(1)}toString$4.toString=toString$3;var equals$2={};Object.defineProperty(equals$2,"__esModule",{value:true});function equals$1(e,t){if(e===t){return true}if(e.byteLength!==t.byteLength){return false}for(let r=0;r<e.byteLength;r++){if(e[r]!==t[r]){return false}}return true}equals$2.equals=equals$1;const mh$2=src$8;const multibase=src$c.exports;const multicodec$1=src$5;const CIDUtil=cidUtil;const{concat:uint8ArrayConcat$1}=concat$3;const{toString:uint8ArrayToString$1}=toString$4;const{equals:uint8ArrayEquals$1}=equals$2;const codecs=multicodec$1.nameToCode;const codecInts=Object.keys(codecs).reduce(((e,t)=>{e[codecs[t]]=t;return e}),{});const symbol$1=Symbol.for("@ipld/js-cid/CID");class CID$5{constructor(e,t,r,n){Object.defineProperty(this,symbol$1,{value:true});if(CID$5.isCID(e)){const t=e;this.version=t.version;this.codec=t.codec;this.multihash=t.multihash;this.multibaseName=t.multibaseName||(t.version===0?"base58btc":"base32");return}if(typeof e==="string"){const t=multibase.isEncoded(e);if(t){const r=multibase.decode(e);this.version=parseInt(r[0].toString(),16);this.codec=multicodec$1.getCodec(r.slice(1));this.multihash=multicodec$1.rmPrefix(r.slice(1));this.multibaseName=t}else{this.version=0;this.codec="dag-pb";this.multihash=mh$2.fromB58String(e);this.multibaseName="base58btc"}CID$5.validateCID(this);Object.defineProperty(this,"string",{value:e});return}if(e instanceof Uint8Array){const t=parseInt(e[0].toString(),16);if(t===1){const r=e;this.version=t;this.codec=multicodec$1.getCodec(r.slice(1));this.multihash=multicodec$1.rmPrefix(r.slice(1));this.multibaseName="base32"}else{this.version=0;this.codec="dag-pb";this.multihash=e;this.multibaseName="base58btc"}CID$5.validateCID(this);return}this.version=e;if(typeof t==="number"){t=codecInts[t]}this.codec=t;this.multihash=r;this.multibaseName=n||(e===0?"base58btc":"base32");CID$5.validateCID(this)}get bytes(){let e=this._bytes;if(!e){if(this.version===0){e=this.multihash}else if(this.version===1){const t=multicodec$1.getCodeVarint(this.codec);e=uint8ArrayConcat$1([[1],t,this.multihash],1+t.byteLength+this.multihash.byteLength)}else{throw new Error("unsupported version")}Object.defineProperty(this,"_bytes",{value:e})}return e}get prefix(){const e=multicodec$1.getCodeVarint(this.codec);const t=mh$2.prefix(this.multihash);const r=uint8ArrayConcat$1([[this.version],e,t],1+e.byteLength+t.byteLength);return r}get code(){return codecs[this.codec]}toV0(){if(this.codec!=="dag-pb"){throw new Error("Cannot convert a non dag-pb CID to CIDv0")}const{name:e,length:t}=mh$2.decode(this.multihash);if(e!=="sha2-256"){throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0")}if(t!==32){throw new Error("Cannot convert non 32 byte multihash CID to CIDv0")}return new CID$5(0,this.codec,this.multihash)}toV1(){return new CID$5(1,this.codec,this.multihash,this.multibaseName)}toBaseEncodedString(e=this.multibaseName){if(this.string&&this.string.length!==0&&e===this.multibaseName){return this.string}let t;if(this.version===0){if(e!=="base58btc"){throw new Error("not supported with CIDv0, to support different bases, please migrate the instance do CIDv1, you can do that through cid.toV1()")}t=mh$2.toB58String(this.multihash)}else if(this.version===1){t=uint8ArrayToString$1(multibase.encode(e,this.bytes))}else{throw new Error("unsupported version")}if(e===this.multibaseName){Object.defineProperty(this,"string",{value:t})}return t}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}toString(e){return this.toBaseEncodedString(e)}toJSON(){return{codec:this.codec,version:this.version,hash:this.multihash}}equals(e){return this.codec===e.codec&&this.version===e.version&&uint8ArrayEquals$1(this.multihash,e.multihash)}static validateCID(e){const t=CIDUtil.checkCIDComponents(e);if(t){throw new Error(t)}}static isCID(e){return e instanceof CID$5||Boolean(e&&e[symbol$1])}}CID$5.codecs=codecs;var src$4=CID$5;const mh$1=src$7;const CID$4=src$4;const persist$5=async(e,t,r)=>{if(!r.codec){r.codec="dag-pb"}if(!r.cidVersion){r.cidVersion=0}if(!r.hashAlg){r.hashAlg="sha2-256"}if(r.hashAlg!=="sha2-256"){r.cidVersion=1}const n=await mh$1(e,r.hashAlg);const i=new CID$4(r.cidVersion,r.codec,n);if(!r.onlyHash){await t.put(e,{pin:r.pin,preload:r.preload,timeout:r.timeout,cid:i})}return i};var persist_1=persist$5;var resolver$2={};var $protobuf=minimal;var $Reader=$protobuf.Reader,$Writer=$protobuf.Writer,$util=$protobuf.util;var $root=$protobuf.roots["default"]||($protobuf.roots["default"]={});$root.PBLink=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)if(e[t[r]]!=null)this[t[r]]=e[t[r]]}e.prototype.Hash=$util.newBuffer([]);e.prototype.Name="";e.prototype.Tsize=$util.Long?$util.Long.fromBits(0,0,true):0;e.encode=function e(t,r){if(!r)r=$Writer.create();if(t.Hash!=null&&Object.hasOwnProperty.call(t,"Hash"))r.uint32(10).bytes(t.Hash);if(t.Name!=null&&Object.hasOwnProperty.call(t,"Name"))r.uint32(18).string(t.Name);if(t.Tsize!=null&&Object.hasOwnProperty.call(t,"Tsize"))r.uint32(24).uint64(t.Tsize);return r};e.decode=function e(t,r){if(!(t instanceof $Reader))t=$Reader.create(t);var n=r===undefined?t.len:t.pos+r,i=new $root.PBLink;while(t.pos<n){var s=t.uint32();switch(s>>>3){case 1:i.Hash=t.bytes();break;case 2:i.Name=t.string();break;case 3:i.Tsize=t.uint64();break;default:t.skipType(s&7);break}}return i};e.fromObject=function e(t){if(t instanceof $root.PBLink)return t;var r=new $root.PBLink;if(t.Hash!=null){if(typeof t.Hash==="string")$util.base64.decode(t.Hash,r.Hash=$util.newBuffer($util.base64.length(t.Hash)),0);else if(t.Hash.length)r.Hash=t.Hash}if(t.Name!=null){r.Name=String(t.Name)}if(t.Tsize!=null){if($util.Long)(r.Tsize=$util.Long.fromValue(t.Tsize)).unsigned=true;else if(typeof t.Tsize==="string")r.Tsize=parseInt(t.Tsize,10);else if(typeof t.Tsize==="number")r.Tsize=t.Tsize;else if(typeof t.Tsize==="object")r.Tsize=new $util.LongBits(t.Tsize.low>>>0,t.Tsize.high>>>0).toNumber(true)}return r};e.toObject=function e(t,r){if(!r)r={};var n={};if(r.defaults){if(r.bytes===String)n.Hash="";else{n.Hash=[];if(r.bytes!==Array)n.Hash=$util.newBuffer(n.Hash)}n.Name="";if($util.Long){var i=new $util.Long(0,0,true);n.Tsize=r.longs===String?i.toString():r.longs===Number?i.toNumber():i}else n.Tsize=r.longs===String?"0":0}if(t.Hash!=null&&t.hasOwnProperty("Hash")){n.Hash=r.bytes===String?$util.base64.encode(t.Hash,0,t.Hash.length):r.bytes===Array?Array.prototype.slice.call(t.Hash):t.Hash}if(t.Name!=null&&t.hasOwnProperty("Name")){n.Name=t.Name}if(t.Tsize!=null&&t.hasOwnProperty("Tsize")){if(typeof t.Tsize==="number")n.Tsize=r.longs===String?String(t.Tsize):t.Tsize;else n.Tsize=r.longs===String?$util.Long.prototype.toString.call(t.Tsize):r.longs===Number?new $util.LongBits(t.Tsize.low>>>0,t.Tsize.high>>>0).toNumber(true):t.Tsize}return n};e.prototype.toJSON=function e(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)};return e}();$root.PBNode=function(){function e(e){this.Links=[];if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)if(e[t[r]]!=null)this[t[r]]=e[t[r]]}e.prototype.Links=$util.emptyArray;e.prototype.Data=$util.newBuffer([]);e.encode=function e(t,r){if(!r)r=$Writer.create();if(t.Data!=null&&Object.hasOwnProperty.call(t,"Data"))r.uint32(10).bytes(t.Data);if(t.Links!=null&&t.Links.length){for(var n=0;n<t.Links.length;++n)$root.PBLink.encode(t.Links[n],r.uint32(18).fork()).ldelim()}return r};e.decode=function e(t,r){if(!(t instanceof $Reader))t=$Reader.create(t);var n=r===undefined?t.len:t.pos+r,i=new $root.PBNode;while(t.pos<n){var s=t.uint32();switch(s>>>3){case 2:if(!(i.Links&&i.Links.length))i.Links=[];i.Links.push($root.PBLink.decode(t,t.uint32()));break;case 1:i.Data=t.bytes();break;default:t.skipType(s&7);break}}return i};e.fromObject=function e(t){if(t instanceof $root.PBNode)return t;var r=new $root.PBNode;if(t.Links){if(!Array.isArray(t.Links))throw TypeError(".PBNode.Links: array expected");r.Links=[];for(var n=0;n<t.Links.length;++n){if(typeof t.Links[n]!=="object")throw TypeError(".PBNode.Links: object expected");r.Links[n]=$root.PBLink.fromObject(t.Links[n])}}if(t.Data!=null){if(typeof t.Data==="string")$util.base64.decode(t.Data,r.Data=$util.newBuffer($util.base64.length(t.Data)),0);else if(t.Data.length)r.Data=t.Data}return r};e.toObject=function e(t,r){if(!r)r={};var n={};if(r.arrays||r.defaults){n.Links=[]}if(r.defaults){if(r.bytes===String)n.Data="";else{n.Data=[];if(r.bytes!==Array)n.Data=$util.newBuffer(n.Data)}}if(t.Data!=null&&t.hasOwnProperty("Data")){n.Data=r.bytes===String?$util.base64.encode(t.Data,0,t.Data.length):r.bytes===Array?Array.prototype.slice.call(t.Data):t.Data}if(t.Links&&t.Links.length){n.Links=[];for(var i=0;i<t.Links.length;++i){n.Links[i]=$root.PBLink.toObject(t.Links[i],r)}}return n};e.prototype.toJSON=function e(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)};return e}();var dag=$root;const{bases:bases$4}=basics$5;function createCodec$1(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}const string$1=createCodec$1("utf8","u",(e=>{const t=new TextDecoder("utf8");return"u"+t.decode(e)}),(e=>{const t=new TextEncoder;return t.encode(e.substring(1))}));const ascii$1=createCodec$1("ascii","a",(e=>{let t="a";for(let r=0;r<e.length;r++){t+=String.fromCharCode(e[r])}return t}),(e=>{e=e.substring(1);const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++){t[r]=e.charCodeAt(r)}return t}));const BASES$1={utf8:string$1,"utf-8":string$1,hex:bases$4.base16,latin1:ascii$1,ascii:ascii$1,binary:ascii$1,...bases$4};var bases_1=BASES$1;const bases$3=bases_1;function fromString$2(e,t="utf8"){const r=bases$3[t];if(!r){throw new Error(`Unsupported encoding "${t}"`)}return r.decoder.decode(`${r.prefix}${e}`)}var fromString_1=fromString$2;const CID$3=src$4;const uint8ArrayFromString$3=fromString_1;class DAGLink$8{constructor(e,t,r){if(!r){throw new Error("A link requires a cid to point to")}this.Name=e||"";this.Tsize=t;this.Hash=new CID$3(r);Object.defineProperties(this,{_nameBuf:{value:null,writable:true,enumerable:false}})}toString(){return`DAGLink <${this.Hash.toBaseEncodedString()} - name: "${this.Name}", size: ${this.Tsize}>`}toJSON(){if(!this._json){this._json=Object.freeze({name:this.Name,size:this.Tsize,cid:this.Hash.toBaseEncodedString()})}return Object.assign({},this._json)}get nameAsBuffer(){if(this._nameBuf!=null){return this._nameBuf}this._nameBuf=uint8ArrayFromString$3(this.Name);return this._nameBuf}}var dagLink=DAGLink$8;var stable={exports:{}};(function(e,t){
//! stable.js 0.1.8, https://github.com/Two-Screen/stable
//!  2018 Angry Bytes and contributors. MIT licensed.
(function(t,r){e.exports=r()})(commonjsGlobal,(function(){var e=function(e,r){return t(e.slice(),r)};e.inplace=function(e,n){var i=t(e,n);if(i!==e){r(i,null,e.length,e)}return e};function t(e,t){if(typeof t!=="function"){t=function(e,t){return String(e).localeCompare(t)}}var n=e.length;if(n<=1){return e}var i=new Array(n);for(var s=1;s<n;s*=2){r(e,t,s,i);var a=e;e=i;i=a}return e}var r=function(e,t,r,n){var i=e.length;var s=0;var a=r*2;var o,f,c;var u,l;for(o=0;o<i;o+=a){f=o+r;c=f+r;if(f>i)f=i;if(c>i)c=i;u=o;l=f;while(true){if(u<f&&l<c){if(t(e[u],e[l])<=0){n[s++]=e[u++]}else{n[s++]=e[l++]}}else if(u<f){n[s++]=e[u++]}else if(l<c){n[s++]=e[l++]}else{break}}}};return e}))})(stable);function compare$c(e,t){for(let r=0;r<e.byteLength;r++){if(e[r]<t[r]){return-1}if(e[r]>t[r]){return 1}}if(e.byteLength>t.byteLength){return 1}if(e.byteLength<t.byteLength){return-1}return 0}var compare_1$1=compare$c;const sort$2=stable.exports;const uint8ArrayCompare=compare_1$1;const linkSort=(e,t)=>{const r=e.nameAsBuffer;const n=t.nameAsBuffer;return uint8ArrayCompare(r,n)};const sortLinks$2=e=>{sort$2.inplace(e,linkSort)};var sortLinks_1=sortLinks$2;const DAGLink$7=dagLink;function createDagLinkFromB58EncodedHash$2(e){return new DAGLink$7(e.Name||e.name||"",e.Tsize||e.Size||e.size||0,e.Hash||e.hash||e.multihash||e.cid)}var util$3={createDagLinkFromB58EncodedHash:createDagLinkFromB58EncodedHash$2};const protobuf=minimal;const{PBLink}=dag;const{createDagLinkFromB58EncodedHash:createDagLinkFromB58EncodedHash$1}=util$3;const toProtoBuf=e=>{const t={};if(e.Data&&e.Data.byteLength>0){t.Data=e.Data}else{t.Data=null}if(e.Links&&e.Links.length>0){t.Links=e.Links.map((e=>({Hash:e.Hash.bytes,Name:e.Name,Tsize:e.Tsize})))}else{t.Links=null}return t};const serializeDAGNode$2=e=>encode$1(toProtoBuf(e));const serializeDAGNodeLike$1=(e,t=[])=>{const r={Data:e,Links:t.map((e=>createDagLinkFromB58EncodedHash$1(e)))};return encode$1(toProtoBuf(r))};var serialize$1={serializeDAGNode:serializeDAGNode$2,serializeDAGNodeLike:serializeDAGNodeLike$1};function encode$1(e){const t=protobuf.Writer.create();if(e.Links!=null){for(let r=0;r<e.Links.length;r++){PBLink.encode(e.Links[r],t.uint32(18).fork()).ldelim()}}if(e.Data!=null){t.uint32(10).bytes(e.Data)}return t.finish()}const CID$2=src$4;const multicodec=src$5;const multihashing=src$7;const{multihash}=multihashing;const codec=multicodec.DAG_PB;const defaultHashAlg=multihash.names["sha2-256"];const cid$1=async(e,t={})=>{const r={cidVersion:t.cidVersion==null?1:t.cidVersion,hashAlg:t.hashAlg==null?defaultHashAlg:t.hashAlg};const n=multihash.codes[r.hashAlg];const i=await multihashing(e,n);const s=multicodec.getNameFromCode(codec);const a=new CID$2(r.cidVersion,s,i);return a};var genCid$2={codec,defaultHashAlg,cid:cid$1};const DAGLink$6=dagLink;const genCid$1=genCid$2;const toDAGLink$1=async(e,t={})=>{const r=e.serialize();const n=await genCid$1.cid(r,t);return new DAGLink$6(t.name||"",e.size,n)};var toDagLink=toDAGLink$1;const sortLinks$1=sortLinks_1;const DAGLink$5=dagLink;const asDAGLink=e=>{if(e instanceof DAGLink$5){return e}if(!("cid"in e||"hash"in e||"Hash"in e||"multihash"in e)){throw new Error("Link must be a DAGLink or DAGLink-like. Convert the DAGNode into a DAGLink via `node.toDAGLink()`.")}return new DAGLink$5(e.Name||e.name,e.Tsize||e.size,e.Hash||e.multihash||e.hash||e.cid)};const addLink$1=(e,t)=>{const r=asDAGLink(t);e.Links.push(r);sortLinks$1(e.Links)};var addLink_1=addLink$1;function equals(e,t){if(e===t){return true}if(e.byteLength!==t.byteLength){return false}for(let r=0;r<e.byteLength;r++){if(e[r]!==t[r]){return false}}return true}var equals_1=equals;const CID$1=src$4;const uint8ArrayEquals=equals_1;const rmLink$1=(e,t)=>{let r=null;if(typeof t==="string"){r=e=>e.Name===t}else if(t instanceof Uint8Array){r=e=>uint8ArrayEquals(e.Hash.bytes,t)}else if(CID$1.isCID(t)){r=e=>uint8ArrayEquals(e.Hash.bytes,t.bytes)}if(r){const t=e.Links;let n=0;while(n<t.length){const e=t[n];if(r(e)){t.splice(n,1)}else{n++}}}else{throw new Error("second arg needs to be a name or CID")}};var rmLink_1=rmLink$1;const bases$2=bases_1;function toString$2(e,t="utf8"){const r=bases$2[t];if(!r){throw new Error(`Unsupported encoding "${t}"`)}return r.encoder.encode(e).substring(1)}var toString_1=toString$2;const sortLinks=sortLinks_1;const DAGLink$4=dagLink;const{createDagLinkFromB58EncodedHash}=util$3;const{serializeDAGNode:serializeDAGNode$1}=serialize$1;const toDAGLink=toDagLink;const addLink=addLink_1;const rmLink=rmLink_1;const uint8ArrayFromString$2=fromString_1;const uint8ArrayToString=toString_1;class DAGNode$6{constructor(e,t=[],r=null){if(!e){e=new Uint8Array(0)}if(typeof e==="string"){e=uint8ArrayFromString$2(e)}if(!(e instanceof Uint8Array)){throw new Error("Passed 'data' is not a Uint8Array or a String!")}if(r!==null&&typeof r!=="number"){throw new Error("Passed 'serializedSize' must be a number!")}const n=t.map((e=>e instanceof DAGLink$4?e:createDagLinkFromB58EncodedHash(e)));sortLinks(n);this.Data=e;this.Links=n;Object.defineProperties(this,{_serializedSize:{value:r,writable:true,enumerable:false},_size:{value:null,writable:true,enumerable:false}})}toJSON(){if(!this._json){this._json=Object.freeze({data:this.Data,links:this.Links.map((e=>e.toJSON())),size:this.size})}return Object.assign({},this._json)}toString(){return`DAGNode <data: "${uint8ArrayToString(this.Data,"base64urlpad")}", links: ${this.Links.length}, size: ${this.size}>`}_invalidateCached(){this._serializedSize=null;this._size=null}addLink(e){this._invalidateCached();return addLink(this,e)}rmLink(e){this._invalidateCached();return rmLink(this,e)}toDAGLink(e){return toDAGLink(this,e)}serialize(){const e=serializeDAGNode$1(this);this._serializedSize=e.length;return e}get size(){if(this._size==null){let e;if(e==null){this._serializedSize=this.serialize().length;e=this._serializedSize}this._size=this.Links.reduce(((e,t)=>e+t.Tsize),e)}return this._size}set size(e){throw new Error("Can't set property: 'size' is immutable")}}var dagNode=DAGNode$6;const{PBNode}=dag;const DAGLink$3=dagLink;const DAGNode$5=dagNode;const{serializeDAGNode,serializeDAGNodeLike}=serialize$1;const genCid=genCid$2;const cid=(e,t)=>genCid.cid(e,t);const serialize=e=>{if(e instanceof DAGNode$5){return serializeDAGNode(e)}else{return serializeDAGNodeLike(e.Data,e.Links)}};const deserialize=e=>{const t=PBNode.decode(e);const r=PBNode.toObject(t,{defaults:false,arrays:true,longs:Number,objects:false});const n=r.Links.map((e=>new DAGLink$3(e.Name,e.Tsize,e.Hash)));const i=r.Data==null?new Uint8Array(0):r.Data;return new DAGNode$5(i,n,e.byteLength)};var util$2={codec:genCid.codec,defaultHashAlg:genCid.defaultHashAlg,serialize,deserialize,cid};const CID=src$4;const util$1=util$2;resolver$2.resolve=(e,t="/")=>{let r=util$1.deserialize(e);const n=t.split("/").filter(Boolean);while(n.length){const e=n.shift();if(r[e]===undefined){for(const t of r.Links){if(t.Name===e){return{value:t.Hash,remainderPath:n.join("/")}}}throw new Error(`Object has no property '${e}'`)}r=r[e];if(CID.isCID(r)){return{value:r,remainderPath:n.join("/")}}}return{value:r,remainderPath:""}};resolver$2.tree=function*(e){const t=util$1.deserialize(e);yield"Data";yield"Links";for(let e=0;e<t.Links.length;e++){yield`Links/${e}`;yield`Links/${e}/Name`;yield`Links/${e}/Tsize`;yield`Links/${e}/Hash`}};const resolver$1=resolver$2;const util=util$2;const DAGNodeClass=dagNode;const DAGLinkClass=dagLink;const format={DAGNode:DAGNodeClass,DAGLink:DAGLinkClass,resolver:resolver$1,util,codec:util.codec,defaultHashAlg:util.defaultHashAlg};var src$3=format;const{UnixFS:UnixFS$4}=src$6;const persist$4=persist_1;const{DAGNode:DAGNode$4}=src$3;const dirBuilder$1=async(e,t,r)=>{const n=new UnixFS$4({type:"directory",mtime:e.mtime,mode:e.mode});const i=new DAGNode$4(n.marshal()).serialize();const s=await persist$4(i,t,r);const a=e.path;return{cid:s,path:a,unixfs:n,size:i.length}};var dir$1=dirBuilder$1;const all$1=async e=>{const t=[];for await(const r of e){t.push(r)}return t};var itAll=all$1;const all=itAll;var flat=async function(e,t){return t(await all(e))};const batch$1=itBatch;function balanced(e,t,r){return reduceToParents(e,t,r)}async function reduceToParents(e,t,r){const n=[];for await(const i of batch$1(e,r.maxChildrenPerNode)){n.push(await t(i))}if(n.length>1){return reduceToParents(n,t,r)}return n[0]}var balanced_1=balanced;const batch=itBatch;var trickle=async function e(t,r,n){const i=new Root(n.layerRepeat);let s=0;let a=1;let o=i;for await(const e of batch(t,n.maxChildrenPerNode)){if(o.isFull()){if(o!==i){i.addChild(await o.reduce(r))}if(s&&s%n.layerRepeat===0){a++}o=new SubTree(a,n.layerRepeat,s);s++}o.append(e)}if(o&&o!==i){i.addChild(await o.reduce(r))}return i.reduce(r)};class SubTree{constructor(e,t,r=0){this.maxDepth=e;this.layerRepeat=t;this.currentDepth=1;this.iteration=r;this.root=this.node=this.parent={children:[],depth:this.currentDepth,maxDepth:e,maxChildren:(this.maxDepth-this.currentDepth)*this.layerRepeat}}isFull(){if(!this.root.data){return false}if(this.currentDepth<this.maxDepth&&this.node.maxChildren){this._addNextNodeToParent(this.node);return false}const e=this._findParent(this.node,this.currentDepth);if(e){this._addNextNodeToParent(e);return false}return true}_addNextNodeToParent(e){this.parent=e;const t={children:[],depth:e.depth+1,parent:e,maxDepth:this.maxDepth,maxChildren:Math.floor(e.children.length/this.layerRepeat)*this.layerRepeat};e.children.push(t);this.currentDepth=t.depth;this.node=t}append(e){this.node.data=e}reduce(e){return this._reduce(this.root,e)}async _reduce(e,t){let r=[];if(e.children.length){r=await Promise.all(e.children.filter((e=>e.data)).map((e=>this._reduce(e,t))))}return t((e.data||[]).concat(r))}_findParent(e,t){const r=e.parent;if(!r||r.depth===0){return}if(r.children.length===r.maxChildren||!r.maxChildren){return this._findParent(r,t)}return r}}class Root extends SubTree{constructor(e){super(0,e);this.root.depth=0;this.currentDepth=1}addChild(e){this.root.children.push(e)}reduce(e){return e((this.root.data||[]).concat(this.root.children))}}const{UnixFS:UnixFS$3}=src$6;const persist$3=persist_1;const{DAGNode:DAGNode$3}=src$3;async function*bufferImporter(e,t,r){for await(let n of e.content){yield async()=>{r.progress(n.length,e.path);let i;const s={codec:"dag-pb",cidVersion:r.cidVersion,hashAlg:r.hashAlg,onlyHash:r.onlyHash};if(r.rawLeaves){s.codec="raw";s.cidVersion=1}else{i=new UnixFS$3({type:r.leafType,data:n,mtime:e.mtime,mode:e.mode});n=new DAGNode$3(i.marshal()).serialize()}return{cid:await persist$3(n,t,s),unixfs:i,size:n.length}}}}var bufferImporter_1=bufferImporter;const errCode$2=errCode$3;const{UnixFS:UnixFS$2}=src$6;const persist$2=persist_1;const{DAGNode:DAGNode$2,DAGLink:DAGLink$2}=src$3;const parallelBatch$1=itParallelBatch;const mh=src$7.multihash;const dagBuilders={flat,balanced:balanced_1,trickle};async function*buildFileBatch(e,t,r){let n=-1;let i;let s;if(typeof r.bufferImporter==="function"){s=r.bufferImporter}else{s=bufferImporter_1}for await(const a of parallelBatch$1(s(e,t,r),r.blockWriteConcurrency)){n++;if(n===0){i=a;continue}else if(n===1&&i){yield i;i=null}yield a}if(i){i.single=true;yield i}}const reduce=(e,t,r)=>{async function n(n){if(n.length===1&&n[0].single&&r.reduceSingleLeafToSelf){const i=n[0];if(i.cid.codec==="raw"&&(e.mtime!==undefined||e.mode!==undefined)){let{data:n}=await t.get(i.cid,r);i.unixfs=new UnixFS$2({type:"file",mtime:e.mtime,mode:e.mode,data:n});const s=mh.decode(i.cid.multihash);n=new DAGNode$2(i.unixfs.marshal()).serialize();i.cid=await persist$2(n,t,{...r,codec:"dag-pb",hashAlg:s.name,cidVersion:r.cidVersion});i.size=n.length}return{cid:i.cid,path:e.path,unixfs:i.unixfs,size:i.size}}const i=new UnixFS$2({type:"file",mtime:e.mtime,mode:e.mode});const s=n.filter((e=>{if(e.cid.codec==="raw"&&e.size){return true}if(e.unixfs&&!e.unixfs.data&&e.unixfs.fileSize()){return true}return Boolean(e.unixfs&&e.unixfs.data&&e.unixfs.data.length)})).map((e=>{if(e.cid.codec==="raw"){i.addBlockSize(e.size);return new DAGLink$2("",e.size,e.cid)}if(!e.unixfs||!e.unixfs.data){i.addBlockSize(e.unixfs&&e.unixfs.fileSize()||0)}else{i.addBlockSize(e.unixfs.data.length)}return new DAGLink$2("",e.size,e.cid)}));const a=new DAGNode$2(i.marshal(),s);const o=a.serialize();const f=await persist$2(o,t,r);return{cid:f,path:e.path,unixfs:i,size:o.length+a.Links.reduce(((e,t)=>e+t.Tsize),0)}}return n};function fileBuilder$1(e,t,r){const n=dagBuilders[r.strategy];if(!n){throw errCode$2(new Error(`Unknown importer build strategy name: ${r.strategy}`),"ERR_BAD_STRATEGY")}return n(buildFileBatch(e,t,r),reduce(e,t,r),r)}var file=fileBuilder$1;var buffer={};var base64Js={};base64Js.byteLength=byteLength;base64Js.toByteArray=toByteArray;base64Js.fromByteArray=fromByteArray;var lookup=[];var revLookup=[];var Arr=typeof Uint8Array!=="undefined"?Uint8Array:Array;var code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var i$1=0,len=code.length;i$1<len;++i$1){lookup[i$1]=code[i$1];revLookup[code.charCodeAt(i$1)]=i$1}revLookup["-".charCodeAt(0)]=62;revLookup["_".charCodeAt(0)]=63;function getLens(e){var t=e.length;if(t%4>0){throw new Error("Invalid string. Length must be a multiple of 4")}var r=e.indexOf("=");if(r===-1)r=t;var n=r===t?0:4-r%4;return[r,n]}function byteLength(e){var t=getLens(e);var r=t[0];var n=t[1];return(r+n)*3/4-n}function _byteLength(e,t,r){return(t+r)*3/4-r}function toByteArray(e){var t;var r=getLens(e);var n=r[0];var i=r[1];var s=new Arr(_byteLength(e,n,i));var a=0;var o=i>0?n-4:n;var f;for(f=0;f<o;f+=4){t=revLookup[e.charCodeAt(f)]<<18|revLookup[e.charCodeAt(f+1)]<<12|revLookup[e.charCodeAt(f+2)]<<6|revLookup[e.charCodeAt(f+3)];s[a++]=t>>16&255;s[a++]=t>>8&255;s[a++]=t&255}if(i===2){t=revLookup[e.charCodeAt(f)]<<2|revLookup[e.charCodeAt(f+1)]>>4;s[a++]=t&255}if(i===1){t=revLookup[e.charCodeAt(f)]<<10|revLookup[e.charCodeAt(f+1)]<<4|revLookup[e.charCodeAt(f+2)]>>2;s[a++]=t>>8&255;s[a++]=t&255}return s}function tripletToBase64(e){return lookup[e>>18&63]+lookup[e>>12&63]+lookup[e>>6&63]+lookup[e&63]}function encodeChunk(e,t,r){var n;var i=[];for(var s=t;s<r;s+=3){n=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(e[s+2]&255);i.push(tripletToBase64(n))}return i.join("")}function fromByteArray(e){var t;var r=e.length;var n=r%3;var i=[];var s=16383;for(var a=0,o=r-n;a<o;a+=s){i.push(encodeChunk(e,a,a+s>o?o:a+s))}if(n===1){t=e[r-1];i.push(lookup[t>>2]+lookup[t<<4&63]+"==")}else if(n===2){t=(e[r-2]<<8)+e[r-1];i.push(lookup[t>>10]+lookup[t>>4&63]+lookup[t<<2&63]+"=")}return i.join("")}var ieee754={};
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ieee754.read=function(e,t,r,n,i){var s,a;var o=i*8-n-1;var f=(1<<o)-1;var c=f>>1;var u=-7;var l=r?i-1:0;var h=r?-1:1;var d=e[t+l];l+=h;s=d&(1<<-u)-1;d>>=-u;u+=o;for(;u>0;s=s*256+e[t+l],l+=h,u-=8){}a=s&(1<<-u)-1;s>>=-u;u+=n;for(;u>0;a=a*256+e[t+l],l+=h,u-=8){}if(s===0){s=1-c}else if(s===f){return a?NaN:(d?-1:1)*Infinity}else{a=a+Math.pow(2,n);s=s-c}return(d?-1:1)*a*Math.pow(2,s-n)};ieee754.write=function(e,t,r,n,i,s){var a,o,f;var c=s*8-i-1;var u=(1<<c)-1;var l=u>>1;var h=i===23?Math.pow(2,-24)-Math.pow(2,-77):0;var d=n?0:s-1;var p=n?1:-1;var y=t<0||t===0&&1/t<0?1:0;t=Math.abs(t);if(isNaN(t)||t===Infinity){o=isNaN(t)?1:0;a=u}else{a=Math.floor(Math.log(t)/Math.LN2);if(t*(f=Math.pow(2,-a))<1){a--;f*=2}if(a+l>=1){t+=h/f}else{t+=h*Math.pow(2,1-l)}if(t*f>=2){a++;f/=2}if(a+l>=u){o=0;a=u}else if(a+l>=1){o=(t*f-1)*Math.pow(2,i);a=a+l}else{o=t*Math.pow(2,l-1)*Math.pow(2,i);a=0}}for(;i>=8;e[r+d]=o&255,d+=p,o/=256,i-=8){}a=a<<i|o;c+=i;for(;c>0;e[r+d]=a&255,d+=p,a/=256,c-=8){}e[r+d-p]|=y*128};
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=base64Js;const r=ieee754;const n=typeof Symbol==="function"&&typeof Symbol["for"]==="function"?Symbol["for"]("nodejs.util.inspect.custom"):null;e.Buffer=o;e.SlowBuffer=b;e.INSPECT_MAX_BYTES=50;const i=2147483647;e.kMaxLength=i;o.TYPED_ARRAY_SUPPORT=s();if(!o.TYPED_ARRAY_SUPPORT&&typeof console!=="undefined"&&typeof console.error==="function"){console.error("This browser lacks typed array (Uint8Array) support which is required by "+"`buffer` v5.x. Use `buffer` v4.x if you require old browser support.")}function s(){try{const e=new Uint8Array(1);const t={foo:function(){return 42}};Object.setPrototypeOf(t,Uint8Array.prototype);Object.setPrototypeOf(e,t);return e.foo()===42}catch(e){return false}}Object.defineProperty(o.prototype,"parent",{enumerable:true,get:function(){if(!o.isBuffer(this))return undefined;return this.buffer}});Object.defineProperty(o.prototype,"offset",{enumerable:true,get:function(){if(!o.isBuffer(this))return undefined;return this.byteOffset}});function a(e){if(e>i){throw new RangeError('The value "'+e+'" is invalid for option "size"')}const t=new Uint8Array(e);Object.setPrototypeOf(t,o.prototype);return t}function o(e,t,r){if(typeof e==="number"){if(typeof t==="string"){throw new TypeError('The "string" argument must be of type string. Received type number')}return l(e)}return f(e,t,r)}o.poolSize=8192;function f(e,t,r){if(typeof e==="string"){return h(e,t)}if(ArrayBuffer.isView(e)){return p(e)}if(e==null){throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, "+"or Array-like Object. Received type "+typeof e)}if(ie(e,ArrayBuffer)||e&&ie(e.buffer,ArrayBuffer)){return y(e,t,r)}if(typeof SharedArrayBuffer!=="undefined"&&(ie(e,SharedArrayBuffer)||e&&ie(e.buffer,SharedArrayBuffer))){return y(e,t,r)}if(typeof e==="number"){throw new TypeError('The "value" argument must not be of type number. Received type number')}const n=e.valueOf&&e.valueOf();if(n!=null&&n!==e){return o.from(n,t,r)}const i=m(e);if(i)return i;if(typeof Symbol!=="undefined"&&Symbol.toPrimitive!=null&&typeof e[Symbol.toPrimitive]==="function"){return o.from(e[Symbol.toPrimitive]("string"),t,r)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, "+"or Array-like Object. Received type "+typeof e)}o.from=function(e,t,r){return f(e,t,r)};Object.setPrototypeOf(o.prototype,Uint8Array.prototype);Object.setPrototypeOf(o,Uint8Array);function c(e){if(typeof e!=="number"){throw new TypeError('"size" argument must be of type number')}else if(e<0){throw new RangeError('The value "'+e+'" is invalid for option "size"')}}function u(e,t,r){c(e);if(e<=0){return a(e)}if(t!==undefined){return typeof r==="string"?a(e).fill(t,r):a(e).fill(t)}return a(e)}o.alloc=function(e,t,r){return u(e,t,r)};function l(e){c(e);return a(e<0?0:g(e)|0)}o.allocUnsafe=function(e){return l(e)};o.allocUnsafeSlow=function(e){return l(e)};function h(e,t){if(typeof t!=="string"||t===""){t="utf8"}if(!o.isEncoding(t)){throw new TypeError("Unknown encoding: "+t)}const r=A(e,t)|0;let n=a(r);const i=n.write(e,t);if(i!==r){n=n.slice(0,i)}return n}function d(e){const t=e.length<0?0:g(e.length)|0;const r=a(t);for(let n=0;n<t;n+=1){r[n]=e[n]&255}return r}function p(e){if(ie(e,Uint8Array)){const t=new Uint8Array(e);return y(t.buffer,t.byteOffset,t.byteLength)}return d(e)}function y(e,t,r){if(t<0||e.byteLength<t){throw new RangeError('"offset" is outside of buffer bounds')}if(e.byteLength<t+(r||0)){throw new RangeError('"length" is outside of buffer bounds')}let n;if(t===undefined&&r===undefined){n=new Uint8Array(e)}else if(r===undefined){n=new Uint8Array(e,t)}else{n=new Uint8Array(e,t,r)}Object.setPrototypeOf(n,o.prototype);return n}function m(e){if(o.isBuffer(e)){const t=g(e.length)|0;const r=a(t);if(r.length===0){return r}e.copy(r,0,0,t);return r}if(e.length!==undefined){if(typeof e.length!=="number"||se(e.length)){return a(0)}return d(e)}if(e.type==="Buffer"&&Array.isArray(e.data)){return d(e.data)}}function g(e){if(e>=i){throw new RangeError("Attempt to allocate Buffer larger than maximum "+"size: 0x"+i.toString(16)+" bytes")}return e|0}function b(e){if(+e!=e){e=0}return o.alloc(+e)}o.isBuffer=function e(t){return t!=null&&t._isBuffer===true&&t!==o.prototype};o.compare=function e(t,r){if(ie(t,Uint8Array))t=o.from(t,t.offset,t.byteLength);if(ie(r,Uint8Array))r=o.from(r,r.offset,r.byteLength);if(!o.isBuffer(t)||!o.isBuffer(r)){throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array')}if(t===r)return 0;let n=t.length;let i=r.length;for(let e=0,s=Math.min(n,i);e<s;++e){if(t[e]!==r[e]){n=t[e];i=r[e];break}}if(n<i)return-1;if(i<n)return 1;return 0};o.isEncoding=function e(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return true;default:return false}};o.concat=function e(t,r){if(!Array.isArray(t)){throw new TypeError('"list" argument must be an Array of Buffers')}if(t.length===0){return o.alloc(0)}let n;if(r===undefined){r=0;for(n=0;n<t.length;++n){r+=t[n].length}}const i=o.allocUnsafe(r);let s=0;for(n=0;n<t.length;++n){let e=t[n];if(ie(e,Uint8Array)){if(s+e.length>i.length){if(!o.isBuffer(e))e=o.from(e);e.copy(i,s)}else{Uint8Array.prototype.set.call(i,e,s)}}else if(!o.isBuffer(e)){throw new TypeError('"list" argument must be an Array of Buffers')}else{e.copy(i,s)}s+=e.length}return i};function A(e,t){if(o.isBuffer(e)){return e.length}if(ArrayBuffer.isView(e)||ie(e,ArrayBuffer)){return e.byteLength}if(typeof e!=="string"){throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. '+"Received type "+typeof e)}const r=e.length;const n=arguments.length>2&&arguments[2]===true;if(!n&&r===0)return 0;let i=false;for(;;){switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return Z(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return re(e).length;default:if(i){return n?-1:Z(e).length}t=(""+t).toLowerCase();i=true}}}o.byteLength=A;function w(e,t,r){let n=false;if(t===undefined||t<0){t=0}if(t>this.length){return""}if(r===undefined||r>this.length){r=this.length}if(r<=0){return""}r>>>=0;t>>>=0;if(r<=t){return""}if(!e)e="utf8";while(true){switch(e){case"hex":return B(this,t,r);case"utf8":case"utf-8":return R(this,t,r);case"ascii":return O(this,t,r);case"latin1":case"binary":return x(this,t,r);case"base64":return P(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase();n=true}}}o.prototype._isBuffer=true;function E(e,t,r){const n=e[t];e[t]=e[r];e[r]=n}o.prototype.swap16=function e(){const t=this.length;if(t%2!==0){throw new RangeError("Buffer size must be a multiple of 16-bits")}for(let e=0;e<t;e+=2){E(this,e,e+1)}return this};o.prototype.swap32=function e(){const t=this.length;if(t%4!==0){throw new RangeError("Buffer size must be a multiple of 32-bits")}for(let e=0;e<t;e+=4){E(this,e,e+3);E(this,e+1,e+2)}return this};o.prototype.swap64=function e(){const t=this.length;if(t%8!==0){throw new RangeError("Buffer size must be a multiple of 64-bits")}for(let e=0;e<t;e+=8){E(this,e,e+7);E(this,e+1,e+6);E(this,e+2,e+5);E(this,e+3,e+4)}return this};o.prototype.toString=function e(){const t=this.length;if(t===0)return"";if(arguments.length===0)return R(this,0,t);return w.apply(this,arguments)};o.prototype.toLocaleString=o.prototype.toString;o.prototype.equals=function e(t){if(!o.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(this===t)return true;return o.compare(this,t)===0};o.prototype.inspect=function t(){let r="";const n=e.INSPECT_MAX_BYTES;r=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim();if(this.length>n)r+=" ... ";return"<Buffer "+r+">"};if(n){o.prototype[n]=o.prototype.inspect}o.prototype.compare=function e(t,r,n,i,s){if(ie(t,Uint8Array)){t=o.from(t,t.offset,t.byteLength)}if(!o.isBuffer(t)){throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. '+"Received type "+typeof t)}if(r===undefined){r=0}if(n===undefined){n=t?t.length:0}if(i===undefined){i=0}if(s===undefined){s=this.length}if(r<0||n>t.length||i<0||s>this.length){throw new RangeError("out of range index")}if(i>=s&&r>=n){return 0}if(i>=s){return-1}if(r>=n){return 1}r>>>=0;n>>>=0;i>>>=0;s>>>=0;if(this===t)return 0;let a=s-i;let f=n-r;const c=Math.min(a,f);const u=this.slice(i,s);const l=t.slice(r,n);for(let e=0;e<c;++e){if(u[e]!==l[e]){a=u[e];f=l[e];break}}if(a<f)return-1;if(f<a)return 1;return 0};function v(e,t,r,n,i){if(e.length===0)return-1;if(typeof r==="string"){n=r;r=0}else if(r>2147483647){r=2147483647}else if(r<-2147483648){r=-2147483648}r=+r;if(se(r)){r=i?0:e.length-1}if(r<0)r=e.length+r;if(r>=e.length){if(i)return-1;else r=e.length-1}else if(r<0){if(i)r=0;else return-1}if(typeof t==="string"){t=o.from(t,n)}if(o.isBuffer(t)){if(t.length===0){return-1}return _(e,t,r,n,i)}else if(typeof t==="number"){t=t&255;if(typeof Uint8Array.prototype.indexOf==="function"){if(i){return Uint8Array.prototype.indexOf.call(e,t,r)}else{return Uint8Array.prototype.lastIndexOf.call(e,t,r)}}return _(e,[t],r,n,i)}throw new TypeError("val must be string, number or Buffer")}function _(e,t,r,n,i){let s=1;let a=e.length;let o=t.length;if(n!==undefined){n=String(n).toLowerCase();if(n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le"){if(e.length<2||t.length<2){return-1}s=2;a/=2;o/=2;r/=2}}function f(e,t){if(s===1){return e[t]}else{return e.readUInt16BE(t*s)}}let c;if(i){let n=-1;for(c=r;c<a;c++){if(f(e,c)===f(t,n===-1?0:c-n)){if(n===-1)n=c;if(c-n+1===o)return n*s}else{if(n!==-1)c-=c-n;n=-1}}}else{if(r+o>a)r=a-o;for(c=r;c>=0;c--){let r=true;for(let n=0;n<o;n++){if(f(e,c+n)!==f(t,n)){r=false;break}}if(r)return c}}return-1}o.prototype.includes=function e(t,r,n){return this.indexOf(t,r,n)!==-1};o.prototype.indexOf=function e(t,r,n){return v(this,t,r,n,true)};o.prototype.lastIndexOf=function e(t,r,n){return v(this,t,r,n,false)};function S(e,t,r,n){r=Number(r)||0;const i=e.length-r;if(!n){n=i}else{n=Number(n);if(n>i){n=i}}const s=t.length;if(n>s/2){n=s/2}let a;for(a=0;a<n;++a){const n=parseInt(t.substr(a*2,2),16);if(se(n))return a;e[r+a]=n}return a}function $(e,t,r,n){return ne(Z(t,e.length-r),e,r,n)}function T(e,t,r,n){return ne(ee(t),e,r,n)}function I(e,t,r,n){return ne(re(t),e,r,n)}function C(e,t,r,n){return ne(te(t,e.length-r),e,r,n)}o.prototype.write=function e(t,r,n,i){if(r===undefined){i="utf8";n=this.length;r=0}else if(n===undefined&&typeof r==="string"){i=r;n=this.length;r=0}else if(isFinite(r)){r=r>>>0;if(isFinite(n)){n=n>>>0;if(i===undefined)i="utf8"}else{i=n;n=undefined}}else{throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported")}const s=this.length-r;if(n===undefined||n>s)n=s;if(t.length>0&&(n<0||r<0)||r>this.length){throw new RangeError("Attempt to write outside buffer bounds")}if(!i)i="utf8";let a=false;for(;;){switch(i){case"hex":return S(this,t,r,n);case"utf8":case"utf-8":return $(this,t,r,n);case"ascii":case"latin1":case"binary":return T(this,t,r,n);case"base64":return I(this,t,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,t,r,n);default:if(a)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase();a=true}}};o.prototype.toJSON=function e(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function P(e,r,n){if(r===0&&n===e.length){return t.fromByteArray(e)}else{return t.fromByteArray(e.slice(r,n))}}function R(e,t,r){r=Math.min(e.length,r);const n=[];let i=t;while(i<r){const t=e[i];let s=null;let a=t>239?4:t>223?3:t>191?2:1;if(i+a<=r){let r,n,o,f;switch(a){case 1:if(t<128){s=t}break;case 2:r=e[i+1];if((r&192)===128){f=(t&31)<<6|r&63;if(f>127){s=f}}break;case 3:r=e[i+1];n=e[i+2];if((r&192)===128&&(n&192)===128){f=(t&15)<<12|(r&63)<<6|n&63;if(f>2047&&(f<55296||f>57343)){s=f}}break;case 4:r=e[i+1];n=e[i+2];o=e[i+3];if((r&192)===128&&(n&192)===128&&(o&192)===128){f=(t&15)<<18|(r&63)<<12|(n&63)<<6|o&63;if(f>65535&&f<1114112){s=f}}}}if(s===null){s=65533;a=1}else if(s>65535){s-=65536;n.push(s>>>10&1023|55296);s=56320|s&1023}n.push(s);i+=a}return k(n)}const N=4096;function k(e){const t=e.length;if(t<=N){return String.fromCharCode.apply(String,e)}let r="";let n=0;while(n<t){r+=String.fromCharCode.apply(String,e.slice(n,n+=N))}return r}function O(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i){n+=String.fromCharCode(e[i]&127)}return n}function x(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i){n+=String.fromCharCode(e[i])}return n}function B(e,t,r){const n=e.length;if(!t||t<0)t=0;if(!r||r<0||r>n)r=n;let i="";for(let n=t;n<r;++n){i+=ae[e[n]]}return i}function D(e,t,r){const n=e.slice(t,r);let i="";for(let e=0;e<n.length-1;e+=2){i+=String.fromCharCode(n[e]+n[e+1]*256)}return i}o.prototype.slice=function e(t,r){const n=this.length;t=~~t;r=r===undefined?n:~~r;if(t<0){t+=n;if(t<0)t=0}else if(t>n){t=n}if(r<0){r+=n;if(r<0)r=0}else if(r>n){r=n}if(r<t)r=t;const i=this.subarray(t,r);Object.setPrototypeOf(i,o.prototype);return i};function M(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}o.prototype.readUintLE=o.prototype.readUIntLE=function e(t,r,n){t=t>>>0;r=r>>>0;if(!n)M(t,r,this.length);let i=this[t];let s=1;let a=0;while(++a<r&&(s*=256)){i+=this[t+a]*s}return i};o.prototype.readUintBE=o.prototype.readUIntBE=function e(t,r,n){t=t>>>0;r=r>>>0;if(!n){M(t,r,this.length)}let i=this[t+--r];let s=1;while(r>0&&(s*=256)){i+=this[t+--r]*s}return i};o.prototype.readUint8=o.prototype.readUInt8=function e(t,r){t=t>>>0;if(!r)M(t,1,this.length);return this[t]};o.prototype.readUint16LE=o.prototype.readUInt16LE=function e(t,r){t=t>>>0;if(!r)M(t,2,this.length);return this[t]|this[t+1]<<8};o.prototype.readUint16BE=o.prototype.readUInt16BE=function e(t,r){t=t>>>0;if(!r)M(t,2,this.length);return this[t]<<8|this[t+1]};o.prototype.readUint32LE=o.prototype.readUInt32LE=function e(t,r){t=t>>>0;if(!r)M(t,4,this.length);return(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216};o.prototype.readUint32BE=o.prototype.readUInt32BE=function e(t,r){t=t>>>0;if(!r)M(t,4,this.length);return this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])};o.prototype.readBigUInt64LE=oe((function e(t){t=t>>>0;X(t,"offset");const r=this[t];const n=this[t+7];if(r===undefined||n===undefined){Q(t,this.length-8)}const i=r+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24;const s=this[++t]+this[++t]*2**8+this[++t]*2**16+n*2**24;return BigInt(i)+(BigInt(s)<<BigInt(32))}));o.prototype.readBigUInt64BE=oe((function e(t){t=t>>>0;X(t,"offset");const r=this[t];const n=this[t+7];if(r===undefined||n===undefined){Q(t,this.length-8)}const i=r*2**24+this[++t]*2**16+this[++t]*2**8+this[++t];const s=this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+n;return(BigInt(i)<<BigInt(32))+BigInt(s)}));o.prototype.readIntLE=function e(t,r,n){t=t>>>0;r=r>>>0;if(!n)M(t,r,this.length);let i=this[t];let s=1;let a=0;while(++a<r&&(s*=256)){i+=this[t+a]*s}s*=128;if(i>=s)i-=Math.pow(2,8*r);return i};o.prototype.readIntBE=function e(t,r,n){t=t>>>0;r=r>>>0;if(!n)M(t,r,this.length);let i=r;let s=1;let a=this[t+--i];while(i>0&&(s*=256)){a+=this[t+--i]*s}s*=128;if(a>=s)a-=Math.pow(2,8*r);return a};o.prototype.readInt8=function e(t,r){t=t>>>0;if(!r)M(t,1,this.length);if(!(this[t]&128))return this[t];return(255-this[t]+1)*-1};o.prototype.readInt16LE=function e(t,r){t=t>>>0;if(!r)M(t,2,this.length);const n=this[t]|this[t+1]<<8;return n&32768?n|4294901760:n};o.prototype.readInt16BE=function e(t,r){t=t>>>0;if(!r)M(t,2,this.length);const n=this[t+1]|this[t]<<8;return n&32768?n|4294901760:n};o.prototype.readInt32LE=function e(t,r){t=t>>>0;if(!r)M(t,4,this.length);return this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};o.prototype.readInt32BE=function e(t,r){t=t>>>0;if(!r)M(t,4,this.length);return this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};o.prototype.readBigInt64LE=oe((function e(t){t=t>>>0;X(t,"offset");const r=this[t];const n=this[t+7];if(r===undefined||n===undefined){Q(t,this.length-8)}const i=this[t+4]+this[t+5]*2**8+this[t+6]*2**16+(n<<24);return(BigInt(i)<<BigInt(32))+BigInt(r+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24)}));o.prototype.readBigInt64BE=oe((function e(t){t=t>>>0;X(t,"offset");const r=this[t];const n=this[t+7];if(r===undefined||n===undefined){Q(t,this.length-8)}const i=(r<<24)+this[++t]*2**16+this[++t]*2**8+this[++t];return(BigInt(i)<<BigInt(32))+BigInt(this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+n)}));o.prototype.readFloatLE=function e(t,n){t=t>>>0;if(!n)M(t,4,this.length);return r.read(this,t,true,23,4)};o.prototype.readFloatBE=function e(t,n){t=t>>>0;if(!n)M(t,4,this.length);return r.read(this,t,false,23,4)};o.prototype.readDoubleLE=function e(t,n){t=t>>>0;if(!n)M(t,8,this.length);return r.read(this,t,true,52,8)};o.prototype.readDoubleBE=function e(t,n){t=t>>>0;if(!n)M(t,8,this.length);return r.read(this,t,false,52,8)};function U(e,t,r,n,i,s){if(!o.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<s)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}o.prototype.writeUintLE=o.prototype.writeUIntLE=function e(t,r,n,i){t=+t;r=r>>>0;n=n>>>0;if(!i){const e=Math.pow(2,8*n)-1;U(this,t,r,n,e,0)}let s=1;let a=0;this[r]=t&255;while(++a<n&&(s*=256)){this[r+a]=t/s&255}return r+n};o.prototype.writeUintBE=o.prototype.writeUIntBE=function e(t,r,n,i){t=+t;r=r>>>0;n=n>>>0;if(!i){const e=Math.pow(2,8*n)-1;U(this,t,r,n,e,0)}let s=n-1;let a=1;this[r+s]=t&255;while(--s>=0&&(a*=256)){this[r+s]=t/a&255}return r+n};o.prototype.writeUint8=o.prototype.writeUInt8=function e(t,r,n){t=+t;r=r>>>0;if(!n)U(this,t,r,1,255,0);this[r]=t&255;return r+1};o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function e(t,r,n){t=+t;r=r>>>0;if(!n)U(this,t,r,2,65535,0);this[r]=t&255;this[r+1]=t>>>8;return r+2};o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function e(t,r,n){t=+t;r=r>>>0;if(!n)U(this,t,r,2,65535,0);this[r]=t>>>8;this[r+1]=t&255;return r+2};o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function e(t,r,n){t=+t;r=r>>>0;if(!n)U(this,t,r,4,4294967295,0);this[r+3]=t>>>24;this[r+2]=t>>>16;this[r+1]=t>>>8;this[r]=t&255;return r+4};o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function e(t,r,n){t=+t;r=r>>>0;if(!n)U(this,t,r,4,4294967295,0);this[r]=t>>>24;this[r+1]=t>>>16;this[r+2]=t>>>8;this[r+3]=t&255;return r+4};function L(e,t,r,n,i){z(t,n,i,e,r,7);let s=Number(t&BigInt(4294967295));e[r++]=s;s=s>>8;e[r++]=s;s=s>>8;e[r++]=s;s=s>>8;e[r++]=s;let a=Number(t>>BigInt(32)&BigInt(4294967295));e[r++]=a;a=a>>8;e[r++]=a;a=a>>8;e[r++]=a;a=a>>8;e[r++]=a;return r}function F(e,t,r,n,i){z(t,n,i,e,r,7);let s=Number(t&BigInt(4294967295));e[r+7]=s;s=s>>8;e[r+6]=s;s=s>>8;e[r+5]=s;s=s>>8;e[r+4]=s;let a=Number(t>>BigInt(32)&BigInt(4294967295));e[r+3]=a;a=a>>8;e[r+2]=a;a=a>>8;e[r+1]=a;a=a>>8;e[r]=a;return r+8}o.prototype.writeBigUInt64LE=oe((function e(t,r=0){return L(this,t,r,BigInt(0),BigInt("0xffffffffffffffff"))}));o.prototype.writeBigUInt64BE=oe((function e(t,r=0){return F(this,t,r,BigInt(0),BigInt("0xffffffffffffffff"))}));o.prototype.writeIntLE=function e(t,r,n,i){t=+t;r=r>>>0;if(!i){const e=Math.pow(2,8*n-1);U(this,t,r,n,e-1,-e)}let s=0;let a=1;let o=0;this[r]=t&255;while(++s<n&&(a*=256)){if(t<0&&o===0&&this[r+s-1]!==0){o=1}this[r+s]=(t/a>>0)-o&255}return r+n};o.prototype.writeIntBE=function e(t,r,n,i){t=+t;r=r>>>0;if(!i){const e=Math.pow(2,8*n-1);U(this,t,r,n,e-1,-e)}let s=n-1;let a=1;let o=0;this[r+s]=t&255;while(--s>=0&&(a*=256)){if(t<0&&o===0&&this[r+s+1]!==0){o=1}this[r+s]=(t/a>>0)-o&255}return r+n};o.prototype.writeInt8=function e(t,r,n){t=+t;r=r>>>0;if(!n)U(this,t,r,1,127,-128);if(t<0)t=255+t+1;this[r]=t&255;return r+1};o.prototype.writeInt16LE=function e(t,r,n){t=+t;r=r>>>0;if(!n)U(this,t,r,2,32767,-32768);this[r]=t&255;this[r+1]=t>>>8;return r+2};o.prototype.writeInt16BE=function e(t,r,n){t=+t;r=r>>>0;if(!n)U(this,t,r,2,32767,-32768);this[r]=t>>>8;this[r+1]=t&255;return r+2};o.prototype.writeInt32LE=function e(t,r,n){t=+t;r=r>>>0;if(!n)U(this,t,r,4,2147483647,-2147483648);this[r]=t&255;this[r+1]=t>>>8;this[r+2]=t>>>16;this[r+3]=t>>>24;return r+4};o.prototype.writeInt32BE=function e(t,r,n){t=+t;r=r>>>0;if(!n)U(this,t,r,4,2147483647,-2147483648);if(t<0)t=4294967295+t+1;this[r]=t>>>24;this[r+1]=t>>>16;this[r+2]=t>>>8;this[r+3]=t&255;return r+4};o.prototype.writeBigInt64LE=oe((function e(t,r=0){return L(this,t,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}));o.prototype.writeBigInt64BE=oe((function e(t,r=0){return F(this,t,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}));function H(e,t,r,n,i,s){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function V(e,t,n,i,s){t=+t;n=n>>>0;if(!s){H(e,t,n,4)}r.write(e,t,n,i,23,4);return n+4}o.prototype.writeFloatLE=function e(t,r,n){return V(this,t,r,true,n)};o.prototype.writeFloatBE=function e(t,r,n){return V(this,t,r,false,n)};function G(e,t,n,i,s){t=+t;n=n>>>0;if(!s){H(e,t,n,8)}r.write(e,t,n,i,52,8);return n+8}o.prototype.writeDoubleLE=function e(t,r,n){return G(this,t,r,true,n)};o.prototype.writeDoubleBE=function e(t,r,n){return G(this,t,r,false,n)};o.prototype.copy=function e(t,r,n,i){if(!o.isBuffer(t))throw new TypeError("argument should be a Buffer");if(!n)n=0;if(!i&&i!==0)i=this.length;if(r>=t.length)r=t.length;if(!r)r=0;if(i>0&&i<n)i=n;if(i===n)return 0;if(t.length===0||this.length===0)return 0;if(r<0){throw new RangeError("targetStart out of bounds")}if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");if(i>this.length)i=this.length;if(t.length-r<i-n){i=t.length-r+n}const s=i-n;if(this===t&&typeof Uint8Array.prototype.copyWithin==="function"){this.copyWithin(r,n,i)}else{Uint8Array.prototype.set.call(t,this.subarray(n,i),r)}return s};o.prototype.fill=function e(t,r,n,i){if(typeof t==="string"){if(typeof r==="string"){i=r;r=0;n=this.length}else if(typeof n==="string"){i=n;n=this.length}if(i!==undefined&&typeof i!=="string"){throw new TypeError("encoding must be a string")}if(typeof i==="string"&&!o.isEncoding(i)){throw new TypeError("Unknown encoding: "+i)}if(t.length===1){const e=t.charCodeAt(0);if(i==="utf8"&&e<128||i==="latin1"){t=e}}}else if(typeof t==="number"){t=t&255}else if(typeof t==="boolean"){t=Number(t)}if(r<0||this.length<r||this.length<n){throw new RangeError("Out of range index")}if(n<=r){return this}r=r>>>0;n=n===undefined?this.length:n>>>0;if(!t)t=0;let s;if(typeof t==="number"){for(s=r;s<n;++s){this[s]=t}}else{const e=o.isBuffer(t)?t:o.from(t,i);const a=e.length;if(a===0){throw new TypeError('The value "'+t+'" is invalid for argument "value"')}for(s=0;s<n-r;++s){this[s+r]=e[s%a]}}return this};const j={};function K(e,t,r){j[e]=class n extends r{constructor(){super();Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:true,configurable:true});this.name=`${this.name} [${e}]`;delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:true,enumerable:true,value:e,writable:true})}toString(){return`${this.name} [${e}]: ${this.message}`}}}K("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){if(e){return`${e} is outside of buffer bounds`}return"Attempt to access memory outside buffer bounds"}),RangeError);K("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError);K("ERR_OUT_OF_RANGE",(function(e,t,r){let n=`The value of "${e}" is out of range.`;let i=r;if(Number.isInteger(r)&&Math.abs(r)>2**32){i=Y(String(r))}else if(typeof r==="bigint"){i=String(r);if(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32))){i=Y(i)}i+="n"}n+=` It must be ${t}. Received ${i}`;return n}),RangeError);function Y(e){let t="";let r=e.length;const n=e[0]==="-"?1:0;for(;r>=n+4;r-=3){t=`_${e.slice(r-3,r)}${t}`}return`${e.slice(0,r)}${t}`}function q(e,t,r){X(t,"offset");if(e[t]===undefined||e[t+r]===undefined){Q(t,e.length-(r+1))}}function z(e,t,r,n,i,s){if(e>r||e<t){const n=typeof t==="bigint"?"n":"";let i;if(s>3){if(t===0||t===BigInt(0)){i=`>= 0${n} and < 2${n} ** ${(s+1)*8}${n}`}else{i=`>= -(2${n} ** ${(s+1)*8-1}${n}) and < 2 ** `+`${(s+1)*8-1}${n}`}}else{i=`>= ${t}${n} and <= ${r}${n}`}throw new j.ERR_OUT_OF_RANGE("value",i,e)}q(n,i,s)}function X(e,t){if(typeof e!=="number"){throw new j.ERR_INVALID_ARG_TYPE(t,"number",e)}}function Q(e,t,r){if(Math.floor(e)!==e){X(e,r);throw new j.ERR_OUT_OF_RANGE(r||"offset","an integer",e)}if(t<0){throw new j.ERR_BUFFER_OUT_OF_BOUNDS}throw new j.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${t}`,e)}const W=/[^+/0-9A-Za-z-_]/g;function J(e){e=e.split("=")[0];e=e.trim().replace(W,"");if(e.length<2)return"";while(e.length%4!==0){e=e+"="}return e}function Z(e,t){t=t||Infinity;let r;const n=e.length;let i=null;const s=[];for(let a=0;a<n;++a){r=e.charCodeAt(a);if(r>55295&&r<57344){if(!i){if(r>56319){if((t-=3)>-1)s.push(239,191,189);continue}else if(a+1===n){if((t-=3)>-1)s.push(239,191,189);continue}i=r;continue}if(r<56320){if((t-=3)>-1)s.push(239,191,189);i=r;continue}r=(i-55296<<10|r-56320)+65536}else if(i){if((t-=3)>-1)s.push(239,191,189)}i=null;if(r<128){if((t-=1)<0)break;s.push(r)}else if(r<2048){if((t-=2)<0)break;s.push(r>>6|192,r&63|128)}else if(r<65536){if((t-=3)<0)break;s.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((t-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else{throw new Error("Invalid code point")}}return s}function ee(e){const t=[];for(let r=0;r<e.length;++r){t.push(e.charCodeAt(r)&255)}return t}function te(e,t){let r,n,i;const s=[];for(let a=0;a<e.length;++a){if((t-=2)<0)break;r=e.charCodeAt(a);n=r>>8;i=r%256;s.push(i);s.push(n)}return s}function re(e){return t.toByteArray(J(e))}function ne(e,t,r,n){let i;for(i=0;i<n;++i){if(i+r>=t.length||i>=e.length)break;t[i+r]=e[i]}return i}function ie(e,t){return e instanceof t||e!=null&&e.constructor!=null&&e.constructor.name!=null&&e.constructor.name===t.name}function se(e){return e!==e}const ae=function(){const e="0123456789abcdef";const t=new Array(256);for(let r=0;r<16;++r){const n=r*16;for(let i=0;i<16;++i){t[n+i]=e[r]+e[i]}}return t}();function oe(e){return typeof BigInt==="undefined"?fe:e}function fe(){throw new Error("BigInt not supported")}})(buffer);const{Buffer:Buffer$1}=buffer;const symbol=Symbol.for("BufferList");function BufferList$2(e){if(!(this instanceof BufferList$2)){return new BufferList$2(e)}BufferList$2._init.call(this,e)}BufferList$2._init=function e(t){Object.defineProperty(this,symbol,{value:true});this._bufs=[];this.length=0;if(t){this.append(t)}};BufferList$2.prototype._new=function e(t){return new BufferList$2(t)};BufferList$2.prototype._offset=function e(t){if(t===0){return[0,0]}let r=0;for(let e=0;e<this._bufs.length;e++){const n=r+this._bufs[e].length;if(t<n||e===this._bufs.length-1){return[e,t-r]}r=n}};BufferList$2.prototype._reverseOffset=function(e){const t=e[0];let r=e[1];for(let e=0;e<t;e++){r+=this._bufs[e].length}return r};BufferList$2.prototype.get=function e(t){if(t>this.length||t<0){return undefined}const r=this._offset(t);return this._bufs[r[0]][r[1]]};BufferList$2.prototype.slice=function e(t,r){if(typeof t==="number"&&t<0){t+=this.length}if(typeof r==="number"&&r<0){r+=this.length}return this.copy(null,0,t,r)};BufferList$2.prototype.copy=function e(t,r,n,i){if(typeof n!=="number"||n<0){n=0}if(typeof i!=="number"||i>this.length){i=this.length}if(n>=this.length){return t||Buffer$1.alloc(0)}if(i<=0){return t||Buffer$1.alloc(0)}const e=!!t;const s=this._offset(n);const a=i-n;let o=a;let f=e&&r||0;let c=s[1];if(n===0&&i===this.length){if(!e){return this._bufs.length===1?this._bufs[0]:Buffer$1.concat(this._bufs,this.length)}for(let e=0;e<this._bufs.length;e++){this._bufs[e].copy(t,f);f+=this._bufs[e].length}return t}if(o<=this._bufs[s[0]].length-c){return e?this._bufs[s[0]].copy(t,r,c,c+o):this._bufs[s[0]].slice(c,c+o)}if(!e){t=Buffer$1.allocUnsafe(a)}for(let e=s[0];e<this._bufs.length;e++){const r=this._bufs[e].length-c;if(o>r){this._bufs[e].copy(t,f,c);f+=r}else{this._bufs[e].copy(t,f,c,c+o);f+=r;break}o-=r;if(c){c=0}}if(t.length>f)return t.slice(0,f);return t};BufferList$2.prototype.shallowSlice=function e(t,r){t=t||0;r=typeof r!=="number"?this.length:r;if(t<0){t+=this.length}if(r<0){r+=this.length}if(t===r){return this._new()}const n=this._offset(t);const i=this._offset(r);const s=this._bufs.slice(n[0],i[0]+1);if(i[1]===0){s.pop()}else{s[s.length-1]=s[s.length-1].slice(0,i[1])}if(n[1]!==0){s[0]=s[0].slice(n[1])}return this._new(s)};BufferList$2.prototype.toString=function e(t,r,n){return this.slice(r,n).toString(t)};BufferList$2.prototype.consume=function e(t){t=Math.trunc(t);if(Number.isNaN(t)||t<=0)return this;while(this._bufs.length){if(t>=this._bufs[0].length){t-=this._bufs[0].length;this.length-=this._bufs[0].length;this._bufs.shift()}else{this._bufs[0]=this._bufs[0].slice(t);this.length-=t;break}}return this};BufferList$2.prototype.duplicate=function e(){const t=this._new();for(let e=0;e<this._bufs.length;e++){t.append(this._bufs[e])}return t};BufferList$2.prototype.append=function e(t){if(t==null){return this}if(t.buffer){this._appendBuffer(Buffer$1.from(t.buffer,t.byteOffset,t.byteLength))}else if(Array.isArray(t)){for(let e=0;e<t.length;e++){this.append(t[e])}}else if(this._isBufferList(t)){for(let e=0;e<t._bufs.length;e++){this.append(t._bufs[e])}}else{if(typeof t==="number"){t=t.toString()}this._appendBuffer(Buffer$1.from(t))}return this};BufferList$2.prototype._appendBuffer=function e(t){this._bufs.push(t);this.length+=t.length};BufferList$2.prototype.indexOf=function(e,t,r){if(r===undefined&&typeof t==="string"){r=t;t=undefined}if(typeof e==="function"||Array.isArray(e)){throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.')}else if(typeof e==="number"){e=Buffer$1.from([e])}else if(typeof e==="string"){e=Buffer$1.from(e,r)}else if(this._isBufferList(e)){e=e.slice()}else if(Array.isArray(e.buffer)){e=Buffer$1.from(e.buffer,e.byteOffset,e.byteLength)}else if(!Buffer$1.isBuffer(e)){e=Buffer$1.from(e)}t=Number(t||0);if(isNaN(t)){t=0}if(t<0){t=this.length+t}if(t<0){t=0}if(e.length===0){return t>this.length?this.length:t}const n=this._offset(t);let i=n[0];let s=n[1];for(;i<this._bufs.length;i++){const t=this._bufs[i];while(s<t.length){const r=t.length-s;if(r>=e.length){const r=t.indexOf(e,s);if(r!==-1){return this._reverseOffset([i,r])}s=t.length-e.length+1}else{const t=this._reverseOffset([i,s]);if(this._match(t,e)){return t}s++}}s=0}return-1};BufferList$2.prototype._match=function(e,t){if(this.length-e<t.length){return false}for(let r=0;r<t.length;r++){if(this.get(e+r)!==t[r]){return false}}return true};(function(){const e={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(const t in e){(function(t){if(e[t]===null){BufferList$2.prototype[t]=function(e,r){return this.slice(e,e+r)[t](0,r)}}else{BufferList$2.prototype[t]=function(r=0){return this.slice(r,r+e[t])[t](0)}}})(t)}})();BufferList$2.prototype._isBufferList=function e(t){return t instanceof BufferList$2||BufferList$2.isBufferList(t)};BufferList$2.isBufferList=function e(t){return t!=null&&t[symbol]};var BufferList_1=BufferList$2;class Rabin$1{constructor(e,t=12,r=8*1024,n=32*1024,i=64,s){this.bits=t;this.min=r;this.max=n;this.asModule=e;this.rabin=new e.Rabin(t,r,n,i,s);this.polynomial=s}fingerprint(e){const{__retain:t,__release:r,__allocArray:n,__getInt32Array:i,Int32Array_ID:s,Uint8Array_ID:a}=this.asModule;const o=new Int32Array(Math.ceil(e.length/this.min));const f=t(n(s,o));const c=t(n(a,e));const u=this.rabin.fingerprint(c,f);const l=i(u);r(c);r(f);const h=l.indexOf(0);return h>=0?l.subarray(0,h):l}}var rabin$1=Rabin$1;var loader={};const ID_OFFSET=-8;const SIZE_OFFSET=-4;const ARRAYBUFFER_ID=0;const STRING_ID=1;const ARRAYBUFFERVIEW=1<<0;const ARRAY=1<<1;const VAL_ALIGN_OFFSET=5;const VAL_SIGNED=1<<10;const VAL_FLOAT=1<<11;const VAL_MANAGED=1<<13;const ARRAYBUFFERVIEW_BUFFER_OFFSET=0;const ARRAYBUFFERVIEW_DATASTART_OFFSET=4;const ARRAYBUFFERVIEW_DATALENGTH_OFFSET=8;const ARRAYBUFFERVIEW_SIZE=12;const ARRAY_LENGTH_OFFSET=12;const ARRAY_SIZE=16;const BIGINT=typeof BigUint64Array!=="undefined";const THIS=Symbol();const CHUNKSIZE=1024;function getStringImpl(e,t){const r=new Uint32Array(e);const n=new Uint16Array(e);var i=r[t+SIZE_OFFSET>>>2]>>>1;var s=t>>>1;if(i<=CHUNKSIZE)return String.fromCharCode.apply(String,n.subarray(s,s+i));const a=[];do{const e=n[s+CHUNKSIZE-1];const t=e>=55296&&e<56320?CHUNKSIZE-1:CHUNKSIZE;a.push(String.fromCharCode.apply(String,n.subarray(s,s+=t)));i-=t}while(i>CHUNKSIZE);return a.join("")+String.fromCharCode.apply(String,n.subarray(s,s+i))}function preInstantiate(e){const t={};function r(e,t){if(!e)return"<yet unknown>";return getStringImpl(e.buffer,t)}const n=e.env=e.env||{};n.abort=n.abort||function e(i,s,a,o){const f=t.memory||n.memory;throw Error("abort: "+r(f,i)+" at "+r(f,s)+":"+a+":"+o)};n.trace=n.trace||function e(i,s){const a=t.memory||n.memory;console.log("trace: "+r(a,i)+(s?" ":"")+Array.prototype.slice.call(arguments,2,2+s).join(", "))};e.Math=e.Math||Math;e.Date=e.Date||Date;return t}function postInstantiate(e,t){const r=t.exports;const n=r.memory;const i=r.table;const s=r["__alloc"];const a=r["__retain"];const o=r["__rtti_base"]||~0;function f(e){const t=new Uint32Array(n.buffer);const r=t[o>>>2];if((e>>>=0)>=r)throw Error("invalid id: "+e);return t[(o+4>>>2)+e*2]}function c(e){const t=new Uint32Array(n.buffer);const r=t[o>>>2];if((e>>>=0)>=r)throw Error("invalid id: "+e);return t[(o+4>>>2)+e*2+1]}function u(e){return 31-Math.clz32(e>>>VAL_ALIGN_OFFSET&31)}function l(e){const t=e.length;const r=s(t<<1,STRING_ID);const i=new Uint16Array(n.buffer);for(var a=0,o=r>>>1;a<t;++a)i[o+a]=e.charCodeAt(a);return r}e.__allocString=l;function h(e){const t=n.buffer;const r=new Uint32Array(t)[e+ID_OFFSET>>>2];if(r!==STRING_ID)throw Error("not a string: "+e);return getStringImpl(t,e)}e.__getString=h;function d(e,t,r){const i=n.buffer;if(r){switch(e){case 2:return new Float32Array(i);case 3:return new Float64Array(i)}}else{switch(e){case 0:return new(t?Int8Array:Uint8Array)(i);case 1:return new(t?Int16Array:Uint16Array)(i);case 2:return new(t?Int32Array:Uint32Array)(i);case 3:return new(t?BigInt64Array:BigUint64Array)(i)}}throw Error("unsupported align: "+e)}function p(e,t){const r=f(e);if(!(r&(ARRAYBUFFERVIEW|ARRAY)))throw Error("not an array: "+e+" @ "+r);const i=u(r);const o=t.length;const c=s(o<<i,ARRAYBUFFER_ID);const l=s(r&ARRAY?ARRAY_SIZE:ARRAYBUFFERVIEW_SIZE,e);const h=new Uint32Array(n.buffer);h[l+ARRAYBUFFERVIEW_BUFFER_OFFSET>>>2]=a(c);h[l+ARRAYBUFFERVIEW_DATASTART_OFFSET>>>2]=c;h[l+ARRAYBUFFERVIEW_DATALENGTH_OFFSET>>>2]=o<<i;if(r&ARRAY)h[l+ARRAY_LENGTH_OFFSET>>>2]=o;const p=d(i,r&VAL_SIGNED,r&VAL_FLOAT);if(r&VAL_MANAGED){for(let e=0;e<o;++e)p[(c>>>i)+e]=a(t[e])}else{p.set(t,c>>>i)}return l}e.__allocArray=p;function y(e){const t=new Uint32Array(n.buffer);const r=t[e+ID_OFFSET>>>2];const i=f(r);if(!(i&ARRAYBUFFERVIEW))throw Error("not an array: "+r);const s=u(i);var a=t[e+ARRAYBUFFERVIEW_DATASTART_OFFSET>>>2];const o=i&ARRAY?t[e+ARRAY_LENGTH_OFFSET>>>2]:t[a+SIZE_OFFSET>>>2]>>>s;return d(s,i&VAL_SIGNED,i&VAL_FLOAT).subarray(a>>>=s,a+o)}e.__getArrayView=y;function m(e){const t=y(e);const r=t.length;const n=new Array(r);for(let e=0;e<r;e++)n[e]=t[e];return n}e.__getArray=m;function g(e){const t=n.buffer;const r=new Uint32Array(t)[e+SIZE_OFFSET>>>2];return t.slice(e,e+r)}e.__getArrayBuffer=g;function b(e,t,r){return new e(A(e,t,r))}function A(e,t,r){const i=n.buffer;const s=new Uint32Array(i);const a=s[r+ARRAYBUFFERVIEW_DATASTART_OFFSET>>>2];return new e(i,a,s[a+SIZE_OFFSET>>>2]>>>t)}e.__getInt8Array=b.bind(null,Int8Array,0);e.__getInt8ArrayView=A.bind(null,Int8Array,0);e.__getUint8Array=b.bind(null,Uint8Array,0);e.__getUint8ArrayView=A.bind(null,Uint8Array,0);e.__getUint8ClampedArray=b.bind(null,Uint8ClampedArray,0);e.__getUint8ClampedArrayView=A.bind(null,Uint8ClampedArray,0);e.__getInt16Array=b.bind(null,Int16Array,1);e.__getInt16ArrayView=A.bind(null,Int16Array,1);e.__getUint16Array=b.bind(null,Uint16Array,1);e.__getUint16ArrayView=A.bind(null,Uint16Array,1);e.__getInt32Array=b.bind(null,Int32Array,2);e.__getInt32ArrayView=A.bind(null,Int32Array,2);e.__getUint32Array=b.bind(null,Uint32Array,2);e.__getUint32ArrayView=A.bind(null,Uint32Array,2);if(BIGINT){e.__getInt64Array=b.bind(null,BigInt64Array,3);e.__getInt64ArrayView=A.bind(null,BigInt64Array,3);e.__getUint64Array=b.bind(null,BigUint64Array,3);e.__getUint64ArrayView=A.bind(null,BigUint64Array,3)}e.__getFloat32Array=b.bind(null,Float32Array,2);e.__getFloat32ArrayView=A.bind(null,Float32Array,2);e.__getFloat64Array=b.bind(null,Float64Array,3);e.__getFloat64ArrayView=A.bind(null,Float64Array,3);function w(e,t){const r=new Uint32Array(n.buffer);var i=r[e+ID_OFFSET>>>2];if(i<=r[o>>>2]){do{if(i==t)return true}while(i=c(i))}return false}e.__instanceof=w;e.memory=e.memory||n;e.table=e.table||i;return demangle(r,e)}function isResponse(e){return typeof Response!=="undefined"&&e instanceof Response}async function instantiate$1(e,t){if(isResponse(e=await e))return instantiateStreaming(e,t);return postInstantiate(preInstantiate(t||(t={})),await WebAssembly.instantiate(e instanceof WebAssembly.Module?e:await WebAssembly.compile(e),t))}loader.instantiate=instantiate$1;function instantiateSync(e,t){return postInstantiate(preInstantiate(t||(t={})),new WebAssembly.Instance(e instanceof WebAssembly.Module?e:new WebAssembly.Module(e),t))}loader.instantiateSync=instantiateSync;async function instantiateStreaming(e,t){if(!WebAssembly.instantiateStreaming){return instantiate$1(isResponse(e=await e)?e.arrayBuffer():e,t)}return postInstantiate(preInstantiate(t||(t={})),(await WebAssembly.instantiateStreaming(e,t)).instance)}loader.instantiateStreaming=instantiateStreaming;function demangle(e,t){var r=t?Object.create(t):{};var n=e["__argumentsLength"]?function(t){e["__argumentsLength"].value=t}:e["__setArgumentsLength"]||e["__setargc"]||function(){};for(let t in e){if(!Object.prototype.hasOwnProperty.call(e,t))continue;const i=e[t];let s=t.split(".");let a=r;while(s.length>1){let e=s.shift();if(!Object.prototype.hasOwnProperty.call(a,e))a[e]={};a=a[e]}let o=s[0];let f=o.indexOf("#");if(f>=0){let r=o.substring(0,f);let s=a[r];if(typeof s==="undefined"||!s.prototype){let e=function(...t){return e.wrap(e.prototype.constructor(0,...t))};e.prototype={valueOf:function e(){return this[THIS]}};e.wrap=function(t){return Object.create(e.prototype,{[THIS]:{value:t,writable:false}})};if(s)Object.getOwnPropertyNames(s).forEach((t=>Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))));a[r]=e}o=o.substring(f+1);a=a[r].prototype;if(/^(get|set):/.test(o)){if(!Object.prototype.hasOwnProperty.call(a,o=o.substring(4))){let r=e[t.replace("set:","get:")];let n=e[t.replace("get:","set:")];Object.defineProperty(a,o,{get:function(){return r(this[THIS])},set:function(e){n(this[THIS],e)},enumerable:true})}}else{if(o==="constructor"){(a[o]=(...e)=>{n(e.length);return i(...e)}).original=i}else{(a[o]=function(...e){n(e.length);return i(this[THIS],...e)}).original=i}}}else{if(/^(get|set):/.test(o)){if(!Object.prototype.hasOwnProperty.call(a,o=o.substring(4))){Object.defineProperty(a,o,{get:e[t.replace("set:","get:")],set:e[t.replace("get:","set:")],enumerable:true})}}else if(typeof i==="function"&&i!==n){(a[o]=(...e)=>{n(e.length);return i(...e)}).original=i}else{a[o]=i}}}return r}loader.demangle=demangle;const{instantiate}=loader;loadWebAssembly.supported=typeof WebAssembly!=="undefined";function loadWebAssembly(e={}){if(!loadWebAssembly.supported)return null;var t=new Uint8Array([0,97,115,109,1,0,0,0,1,78,14,96,2,127,126,0,96,1,127,1,126,96,2,127,127,0,96,1,127,1,127,96,1,127,0,96,2,127,127,1,127,96,3,127,127,127,1,127,96,0,0,96,3,127,127,127,0,96,0,1,127,96,4,127,127,127,127,0,96,5,127,127,127,127,127,1,127,96,1,126,1,127,96,2,126,126,1,126,2,13,1,3,101,110,118,5,97,98,111,114,116,0,10,3,54,53,2,2,8,9,3,5,2,8,6,5,3,4,2,6,9,12,13,2,5,11,3,2,3,2,3,2,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,6,7,7,4,4,5,3,1,0,1,6,47,9,127,1,65,0,11,127,1,65,0,11,127,0,65,3,11,127,0,65,4,11,127,1,65,0,11,127,1,65,0,11,127,1,65,0,11,127,0,65,240,2,11,127,0,65,6,11,7,240,5,41,6,109,101,109,111,114,121,2,0,7,95,95,97,108,108,111,99,0,10,8,95,95,114,101,116,97,105,110,0,11,9,95,95,114,101,108,101,97,115,101,0,12,9,95,95,99,111,108,108,101,99,116,0,51,11,95,95,114,116,116,105,95,98,97,115,101,3,7,13,73,110,116,51,50,65,114,114,97,121,95,73,68,3,2,13,85,105,110,116,56,65,114,114,97,121,95,73,68,3,3,6,100,101,103,114,101,101,0,16,3,109,111,100,0,17,5,82,97,98,105,110,3,8,16,82,97,98,105,110,35,103,101,116,58,119,105,110,100,111,119,0,21,16,82,97,98,105,110,35,115,101,116,58,119,105,110,100,111,119,0,22,21,82,97,98,105,110,35,103,101,116,58,119,105,110,100,111,119,95,115,105,122,101,0,23,21,82,97,98,105,110,35,115,101,116,58,119,105,110,100,111,119,95,115,105,122,101,0,24,14,82,97,98,105,110,35,103,101,116,58,119,112,111,115,0,25,14,82,97,98,105,110,35,115,101,116,58,119,112,111,115,0,26,15,82,97,98,105,110,35,103,101,116,58,99,111,117,110,116,0,27,15,82,97,98,105,110,35,115,101,116,58,99,111,117,110,116,0,28,13,82,97,98,105,110,35,103,101,116,58,112,111,115,0,29,13,82,97,98,105,110,35,115,101,116,58,112,111,115,0,30,15,82,97,98,105,110,35,103,101,116,58,115,116,97,114,116,0,31,15,82,97,98,105,110,35,115,101,116,58,115,116,97,114,116,0,32,16,82,97,98,105,110,35,103,101,116,58,100,105,103,101,115,116,0,33,16,82,97,98,105,110,35,115,101,116,58,100,105,103,101,115,116,0,34,21,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,115,116,97,114,116,0,35,21,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,115,116,97,114,116,0,36,22,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,108,101,110,103,116,104,0,37,22,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,108,101,110,103,116,104,0,38,31,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,99,117,116,95,102,105,110,103,101,114,112,114,105,110,116,0,39,31,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,99,117,116,95,102,105,110,103,101,114,112,114,105,110,116,0,40,20,82,97,98,105,110,35,103,101,116,58,112,111,108,121,110,111,109,105,97,108,0,41,20,82,97,98,105,110,35,115,101,116,58,112,111,108,121,110,111,109,105,97,108,0,42,17,82,97,98,105,110,35,103,101,116,58,109,105,110,115,105,122,101,0,43,17,82,97,98,105,110,35,115,101,116,58,109,105,110,115,105,122,101,0,44,17,82,97,98,105,110,35,103,101,116,58,109,97,120,115,105,122,101,0,45,17,82,97,98,105,110,35,115,101,116,58,109,97,120,115,105,122,101,0,46,14,82,97,98,105,110,35,103,101,116,58,109,97,115,107,0,47,14,82,97,98,105,110,35,115,101,116,58,109,97,115,107,0,48,17,82,97,98,105,110,35,99,111,110,115,116,114,117,99,116,111,114,0,20,17,82,97,98,105,110,35,102,105,110,103,101,114,112,114,105,110,116,0,49,8,1,50,10,165,31,53,199,1,1,4,127,32,1,40,2,0,65,124,113,34,2,65,128,2,73,4,127,32,2,65,4,118,33,4,65,0,5,32,2,65,31,32,2,103,107,34,3,65,4,107,118,65,16,115,33,4,32,3,65,7,107,11,33,3,32,1,40,2,20,33,2,32,1,40,2,16,34,5,4,64,32,5,32,2,54,2,20,11,32,2,4,64,32,2,32,5,54,2,16,11,32,1,32,0,32,4,32,3,65,4,116,106,65,2,116,106,40,2,96,70,4,64,32,0,32,4,32,3,65,4,116,106,65,2,116,106,32,2,54,2,96,32,2,69,4,64,32,0,32,3,65,2,116,106,32,0,32,3,65,2,116,106,40,2,4,65,1,32,4,116,65,127,115,113,34,1,54,2,4,32,1,69,4,64,32,0,32,0,40,2,0,65,1,32,3,116,65,127,115,113,54,2,0,11,11,11,11,226,2,1,6,127,32,1,40,2,0,33,3,32,1,65,16,106,32,1,40,2,0,65,124,113,106,34,4,40,2,0,34,5,65,1,113,4,64,32,3,65,124,113,65,16,106,32,5,65,124,113,106,34,2,65,240,255,255,255,3,73,4,64,32,0,32,4,16,1,32,1,32,2,32,3,65,3,113,114,34,3,54,2,0,32,1,65,16,106,32,1,40,2,0,65,124,113,106,34,4,40,2,0,33,5,11,11,32,3,65,2,113,4,64,32,1,65,4,107,40,2,0,34,2,40,2,0,34,6,65,124,113,65,16,106,32,3,65,124,113,106,34,7,65,240,255,255,255,3,73,4,64,32,0,32,2,16,1,32,2,32,7,32,6,65,3,113,114,34,3,54,2,0,32,2,33,1,11,11,32,4,32,5,65,2,114,54,2,0,32,4,65,4,107,32,1,54,2,0,32,0,32,3,65,124,113,34,2,65,128,2,73,4,127,32,2,65,4,118,33,4,65,0,5,32,2,65,31,32,2,103,107,34,2,65,4,107,118,65,16,115,33,4,32,2,65,7,107,11,34,3,65,4,116,32,4,106,65,2,116,106,40,2,96,33,2,32,1,65,0,54,2,16,32,1,32,2,54,2,20,32,2,4,64,32,2,32,1,54,2,16,11,32,0,32,4,32,3,65,4,116,106,65,2,116,106,32,1,54,2,96,32,0,32,0,40,2,0,65,1,32,3,116,114,54,2,0,32,0,32,3,65,2,116,106,32,0,32,3,65,2,116,106,40,2,4,65,1,32,4,116,114,54,2,4,11,119,1,1,127,32,2,2,127,32,0,40,2,160,12,34,2,4,64,32,2,32,1,65,16,107,70,4,64,32,2,40,2,0,33,3,32,1,65,16,107,33,1,11,11,32,1,11,107,34,2,65,48,73,4,64,15,11,32,1,32,3,65,2,113,32,2,65,32,107,65,1,114,114,54,2,0,32,1,65,0,54,2,16,32,1,65,0,54,2,20,32,1,32,2,106,65,16,107,34,2,65,2,54,2,0,32,0,32,2,54,2,160,12,32,0,32,1,16,2,11,155,1,1,3,127,35,0,34,0,69,4,64,65,1,63,0,34,0,74,4,127,65,1,32,0,107,64,0,65,0,72,5,65,0,11,4,64,0,11,65,176,3,34,0,65,0,54,2,0,65,208,15,65,0,54,2,0,3,64,32,1,65,23,73,4,64,32,1,65,2,116,65,176,3,106,65,0,54,2,4,65,0,33,2,3,64,32,2,65,16,73,4,64,32,1,65,4,116,32,2,106,65,2,116,65,176,3,106,65,0,54,2,96,32,2,65,1,106,33,2,12,1,11,11,32,1,65,1,106,33,1,12,1,11,11,65,176,3,65,224,15,63,0,65,16,116,16,3,65,176,3,36,0,11,32,0,11,45,0,32,0,65,240,255,255,255,3,79,4,64,65,32,65,224,0,65,201,3,65,29,16,0,0,11,32,0,65,15,106,65,112,113,34,0,65,16,32,0,65,16,75,27,11,169,1,1,1,127,32,0,32,1,65,128,2,73,4,127,32,1,65,4,118,33,1,65,0,5,32,1,65,248,255,255,255,1,73,4,64,32,1,65,1,65,27,32,1,103,107,116,106,65,1,107,33,1,11,32,1,65,31,32,1,103,107,34,2,65,4,107,118,65,16,115,33,1,32,2,65,7,107,11,34,2,65,2,116,106,40,2,4,65,127,32,1,116,113,34,1,4,127,32,0,32,1,104,32,2,65,4,116,106,65,2,116,106,40,2,96,5,32,0,40,2,0,65,127,32,2,65,1,106,116,113,34,1,4,127,32,0,32,0,32,1,104,34,0,65,2,116,106,40,2,4,104,32,0,65,4,116,106,65,2,116,106,40,2,96,5,65,0,11,11,11,111,1,1,127,63,0,34,2,32,1,65,248,255,255,255,1,73,4,127,32,1,65,1,65,27,32,1,103,107,116,65,1,107,106,5,32,1,11,65,16,32,0,40,2,160,12,32,2,65,16,116,65,16,107,71,116,106,65,255,255,3,106,65,128,128,124,113,65,16,118,34,1,32,2,32,1,74,27,64,0,65,0,72,4,64,32,1,64,0,65,0,72,4,64,0,11,11,32,0,32,2,65,16,116,63,0,65,16,116,16,3,11,113,1,2,127,32,1,40,2,0,34,3,65,124,113,32,2,107,34,4,65,32,79,4,64,32,1,32,2,32,3,65,2,113,114,54,2,0,32,2,32,1,65,16,106,106,34,1,32,4,65,16,107,65,1,114,54,2,0,32,0,32,1,16,2,5,32,1,32,3,65,126,113,54,2,0,32,1,65,16,106,32,1,40,2,0,65,124,113,106,32,1,65,16,106,32,1,40,2,0,65,124,113,106,40,2,0,65,125,113,54,2,0,11,11,91,1,2,127,32,0,32,1,16,5,34,4,16,6,34,3,69,4,64,65,1,36,1,65,0,36,1,32,0,32,4,16,6,34,3,69,4,64,32,0,32,4,16,7,32,0,32,4,16,6,33,3,11,11,32,3,65,0,54,2,4,32,3,32,2,54,2,8,32,3,32,1,54,2,12,32,0,32,3,16,1,32,0,32,3,32,4,16,8,32,3,11,13,0,16,4,32,0,32,1,16,9,65,16,106,11,33,1,1,127,32,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,32,0,11,18,0,32,0,65,172,3,75,4,64,32,0,65,16,107,16,52,11,11,140,3,1,1,127,2,64,32,1,69,13,0,32,0,65,0,58,0,0,32,0,32,1,106,65,1,107,65,0,58,0,0,32,1,65,2,77,13,0,32,0,65,1,106,65,0,58,0,0,32,0,65,2,106,65,0,58,0,0,32,0,32,1,106,34,2,65,2,107,65,0,58,0,0,32,2,65,3,107,65,0,58,0,0,32,1,65,6,77,13,0,32,0,65,3,106,65,0,58,0,0,32,0,32,1,106,65,4,107,65,0,58,0,0,32,1,65,8,77,13,0,32,1,65,0,32,0,107,65,3,113,34,1,107,33,2,32,0,32,1,106,34,0,65,0,54,2,0,32,0,32,2,65,124,113,34,1,106,65,4,107,65,0,54,2,0,32,1,65,8,77,13,0,32,0,65,4,106,65,0,54,2,0,32,0,65,8,106,65,0,54,2,0,32,0,32,1,106,34,2,65,12,107,65,0,54,2,0,32,2,65,8,107,65,0,54,2,0,32,1,65,24,77,13,0,32,0,65,12,106,65,0,54,2,0,32,0,65,16,106,65,0,54,2,0,32,0,65,20,106,65,0,54,2,0,32,0,65,24,106,65,0,54,2,0,32,0,32,1,106,34,2,65,28,107,65,0,54,2,0,32,2,65,24,107,65,0,54,2,0,32,2,65,20,107,65,0,54,2,0,32,2,65,16,107,65,0,54,2,0,32,0,32,0,65,4,113,65,24,106,34,2,106,33,0,32,1,32,2,107,33,1,3,64,32,1,65,32,79,4,64,32,0,66,0,55,3,0,32,0,65,8,106,66,0,55,3,0,32,0,65,16,106,66,0,55,3,0,32,0,65,24,106,66,0,55,3,0,32,1,65,32,107,33,1,32,0,65,32,106,33,0,12,1,11,11,11,11,178,1,1,3,127,32,1,65,240,255,255,255,3,32,2,118,75,4,64,65,144,1,65,192,1,65,23,65,56,16,0,0,11,32,1,32,2,116,34,3,65,0,16,10,34,2,32,3,16,13,32,0,69,4,64,65,12,65,2,16,10,34,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,11,32,0,65,0,54,2,0,32,0,65,0,54,2,4,32,0,65,0,54,2,8,32,2,34,1,32,0,40,2,0,34,4,71,4,64,32,1,65,172,3,75,4,64,32,1,65,16,107,34,5,32,5,40,2,4,65,1,106,54,2,4,11,32,4,16,12,11,32,0,32,1,54,2,0,32,0,32,2,54,2,4,32,0,32,3,54,2,8,32,0,11,46,1,2,127,65,12,65,5,16,10,34,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,32,0,65,128,2,65,3,16,14,11,9,0,65,63,32,0,121,167,107,11,49,1,2,127,65,63,32,1,121,167,107,33,2,3,64,65,63,32,0,121,167,107,32,2,107,34,3,65,0,78,4,64,32,0,32,1,32,3,172,134,133,33,0,12,1,11,11,32,0,11,40,0,32,1,32,0,40,2,8,79,4,64,65,128,2,65,192,2,65,163,1,65,44,16,0,0,11,32,1,32,0,40,2,4,106,65,0,58,0,0,11,38,0,32,1,32,0,40,2,8,79,4,64,65,128,2,65,192,2,65,152,1,65,44,16,0,0,11,32,1,32,0,40,2,4,106,45,0,0,11,254,5,2,1,127,4,126,32,0,69,4,64,65,232,0,65,6,16,10,34,0,65,172,3,75,4,64,32,0,65,16,107,34,5,32,5,40,2,4,65,1,106,54,2,4,11,11,32,0,65,0,54,2,0,32,0,65,0,54,2,4,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,24,32,0,66,0,55,3,32,32,0,66,0,55,3,40,32,0,66,0,55,3,48,32,0,66,0,55,3,56,32,0,66,0,55,3,64,32,0,66,0,55,3,72,32,0,66,0,55,3,80,32,0,66,0,55,3,88,32,0,66,0,55,3,96,32,0,32,2,173,55,3,80,32,0,32,3,173,55,3,88,65,12,65,4,16,10,34,2,65,172,3,75,4,64,32,2,65,16,107,34,3,32,3,40,2,4,65,1,106,54,2,4,11,32,2,32,4,65,0,16,14,33,2,32,0,40,2,0,16,12,32,0,32,2,54,2,0,32,0,32,4,54,2,4,32,0,66,1,32,1,173,134,66,1,125,55,3,96,32,0,66,243,130,183,218,216,230,232,30,55,3,72,35,4,69,4,64,65,0,33,2,3,64,32,2,65,128,2,72,4,64,32,2,65,255,1,113,173,33,6,32,0,41,3,72,34,7,33,8,65,63,32,7,121,167,107,33,1,3,64,65,63,32,6,121,167,107,32,1,107,34,3,65,0,78,4,64,32,6,32,8,32,3,172,134,133,33,6,12,1,11,11,65,0,33,4,3,64,32,4,32,0,40,2,4,65,1,107,72,4,64,32,6,66,8,134,33,6,32,0,41,3,72,34,7,33,8,65,63,32,7,121,167,107,33,1,3,64,65,63,32,6,121,167,107,32,1,107,34,3,65,0,78,4,64,32,6,32,8,32,3,172,134,133,33,6,12,1,11,11,32,4,65,1,106,33,4,12,1,11,11,35,6,40,2,4,32,2,65,3,116,106,32,6,55,3,0,32,2,65,1,106,33,2,12,1,11,11,65,63,32,0,41,3,72,121,167,107,172,33,7,65,0,33,2,3,64,32,2,65,128,2,72,4,64,35,5,33,1,32,2,172,32,7,134,34,8,33,6,65,63,32,0,41,3,72,34,9,121,167,107,33,3,3,64,65,63,32,6,121,167,107,32,3,107,34,4,65,0,78,4,64,32,6,32,9,32,4,172,134,133,33,6,12,1,11,11,32,1,40,2,4,32,2,65,3,116,106,32,6,32,8,132,55,3,0,32,2,65,1,106,33,2,12,1,11,11,65,1,36,4,11,32,0,66,0,55,3,24,32,0,66,0,55,3,32,65,0,33,2,3,64,32,2,32,0,40,2,4,72,4,64,32,0,40,2,0,32,2,16,18,32,2,65,1,106,33,2,12,1,11,11,32,0,66,0,55,3,40,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,40,32,0,40,2,0,32,0,40,2,8,16,19,33,1,32,0,40,2,8,32,0,40,2,0,40,2,4,106,65,1,58,0,0,32,0,32,0,41,3,40,35,6,40,2,4,32,1,65,3,116,106,41,3,0,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,35,5,40,2,4,32,0,41,3,40,34,6,66,45,136,167,65,3,116,106,41,3,0,32,6,66,8,134,66,1,132,133,55,3,40,32,0,11,38,1,1,127,32,0,40,2,0,34,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,32,0,11,55,1,2,127,32,1,32,0,40,2,0,34,2,71,4,64,32,1,65,172,3,75,4,64,32,1,65,16,107,34,3,32,3,40,2,4,65,1,106,54,2,4,11,32,2,16,12,11,32,0,32,1,54,2,0,11,7,0,32,0,40,2,4,11,9,0,32,0,32,1,54,2,4,11,7,0,32,0,40,2,8,11,9,0,32,0,32,1,54,2,8,11,7,0,32,0,41,3,16,11,9,0,32,0,32,1,55,3,16,11,7,0,32,0,41,3,24,11,9,0,32,0,32,1,55,3,24,11,7,0,32,0,41,3,32,11,9,0,32,0,32,1,55,3,32,11,7,0,32,0,41,3,40,11,9,0,32,0,32,1,55,3,40,11,7,0,32,0,41,3,48,11,9,0,32,0,32,1,55,3,48,11,7,0,32,0,41,3,56,11,9,0,32,0,32,1,55,3,56,11,7,0,32,0,41,3,64,11,9,0,32,0,32,1,55,3,64,11,7,0,32,0,41,3,72,11,9,0,32,0,32,1,55,3,72,11,7,0,32,0,41,3,80,11,9,0,32,0,32,1,55,3,80,11,7,0,32,0,41,3,88,11,9,0,32,0,32,1,55,3,88,11,7,0,32,0,41,3,96,11,9,0,32,0,32,1,55,3,96,11,172,4,2,5,127,1,126,32,2,65,172,3,75,4,64,32,2,65,16,107,34,4,32,4,40,2,4,65,1,106,54,2,4,11,32,2,33,4,65,0,33,2,32,1,40,2,8,33,5,32,1,40,2,4,33,6,3,64,2,127,65,0,33,3,3,64,32,3,32,5,72,4,64,32,3,32,6,106,45,0,0,33,1,32,0,40,2,0,32,0,40,2,8,16,19,33,7,32,0,40,2,8,32,0,40,2,0,40,2,4,106,32,1,58,0,0,32,0,32,0,41,3,40,35,6,40,2,4,32,7,65,3,116,106,41,3,0,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,35,5,40,2,4,32,0,41,3,40,34,8,66,45,136,167,65,3,116,106,41,3,0,32,1,173,32,8,66,8,134,132,133,55,3,40,32,0,32,0,41,3,16,66,1,124,55,3,16,32,0,32,0,41,3,24,66,1,124,55,3,24,32,0,41,3,16,32,0,41,3,80,90,4,127,32,0,41,3,40,32,0,41,3,96,131,80,5,65,0,11,4,127,65,1,5,32,0,41,3,16,32,0,41,3,88,90,11,4,64,32,0,32,0,41,3,32,55,3,48,32,0,32,0,41,3,16,55,3,56,32,0,32,0,41,3,40,55,3,64,65,0,33,1,3,64,32,1,32,0,40,2,4,72,4,64,32,0,40,2,0,32,1,16,18,32,1,65,1,106,33,1,12,1,11,11,32,0,66,0,55,3,40,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,40,32,0,40,2,0,32,0,40,2,8,16,19,33,1,32,0,40,2,8,32,0,40,2,0,40,2,4,106,65,1,58,0,0,32,0,32,0,41,3,40,35,6,40,2,4,32,1,65,3,116,106,41,3,0,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,35,5,40,2,4,32,0,41,3,40,34,8,66,45,136,167,65,3,116,106,41,3,0,32,8,66,8,134,66,1,132,133,55,3,40,32,3,65,1,106,12,3,11,32,3,65,1,106,33,3,12,1,11,11,65,127,11,34,1,65,0,78,4,64,32,5,32,1,107,33,5,32,1,32,6,106,33,6,32,2,34,1,65,1,106,33,2,32,4,40,2,4,32,1,65,2,116,106,32,0,41,3,56,62,2,0,12,1,11,11,32,4,11,10,0,16,15,36,5,16,15,36,6,11,3,0,1,11,73,1,2,127,32,0,40,2,4,34,1,65,255,255,255,255,0,113,34,2,65,1,70,4,64,32,0,65,16,106,16,53,32,0,32,0,40,2,0,65,1,114,54,2,0,35,0,32,0,16,2,5,32,0,32,2,65,1,107,32,1,65,128,128,128,128,127,113,114,54,2,4,11,11,58,0,2,64,2,64,2,64,32,0,65,8,107,40,2,0,14,7,0,0,1,1,1,1,1,2,11,15,11,32,0,40,2,0,34,0,4,64,32,0,65,172,3,79,4,64,32,0,65,16,107,16,52,11,11,15,11,0,11,11,137,3,7,0,65,16,11,55,40,0,0,0,1,0,0,0,1,0,0,0,40,0,0,0,97,0,108,0,108,0,111,0,99,0,97,0,116,0,105,0,111,0,110,0,32,0,116,0,111,0,111,0,32,0,108,0,97,0,114,0,103,0,101,0,65,208,0,11,45,30,0,0,0,1,0,0,0,1,0,0,0,30,0,0,0,126,0,108,0,105,0,98,0,47,0,114,0,116,0,47,0,116,0,108,0,115,0,102,0,46,0,116,0,115,0,65,128,1,11,43,28,0,0,0,1,0,0,0,1,0,0,0,28,0,0,0,73,0,110,0,118,0,97,0,108,0,105,0,100,0,32,0,108,0,101,0,110,0,103,0,116,0,104,0,65,176,1,11,53,38,0,0,0,1,0,0,0,1,0,0,0,38,0,0,0,126,0,108,0,105,0,98,0,47,0,97,0,114,0,114,0,97,0,121,0,98,0,117,0,102,0,102,0,101,0,114,0,46,0,116,0,115,0,65,240,1,11,51,36,0,0,0,1,0,0,0,1,0,0,0,36,0,0,0,73,0,110,0,100,0,101,0,120,0,32,0,111,0,117,0,116,0,32,0,111,0,102,0,32,0,114,0,97,0,110,0,103,0,101,0,65,176,2,11,51,36,0,0,0,1,0,0,0,1,0,0,0,36,0,0,0,126,0,108,0,105,0,98,0,47,0,116,0,121,0,112,0,101,0,100,0,97,0,114,0,114,0,97,0,121,0,46,0,116,0,115,0,65,240,2,11,53,7,0,0,0,16,0,0,0,0,0,0,0,16,0,0,0,0,0,0,0,16,0,0,0,0,0,0,0,145,4,0,0,2,0,0,0,49,0,0,0,2,0,0,0,17,1,0,0,2,0,0,0,16,0,34,16,115,111,117,114,99,101,77,97,112,112,105,110,103,85,82,76,16,46,47,114,97,98,105,110,46,119,97,115,109,46,109,97,112]);return instantiate(new Response(new Blob([t],{type:"application/wasm"})),e)}var rabinWasm=loadWebAssembly;const Rabin=rabin$1;const getRabin=rabinWasm;const create$1=async(e,t,r,n,i)=>{const s=await getRabin();return new Rabin(s,e,t,r,n,i)};var src$2={Rabin,create:create$1};const BufferList$1=BufferList_1;const{create}=src$2;const errcode=errCode$3;var rabin_1=async function*e(t,r){let n,i,s;if(r.minChunkSize&&r.maxChunkSize&&r.avgChunkSize){s=r.avgChunkSize;n=r.minChunkSize;i=r.maxChunkSize}else if(!r.avgChunkSize){throw errcode(new Error("please specify an average chunk size"),"ERR_INVALID_AVG_CHUNK_SIZE")}else{s=r.avgChunkSize;n=s/3;i=s+s/2}if(n<16){throw errcode(new Error("rabin min must be greater than 16"),"ERR_INVALID_MIN_CHUNK_SIZE")}if(i<n){i=n}if(s<n){s=n}const a=Math.floor(Math.log2(s));for await(const e of rabin(t,{min:n,max:i,bits:a,window:r.window,polynomial:r.polynomial})){yield e}};async function*rabin(e,t){const r=await create(t.bits,t.min,t.max,t.window);const n=new BufferList$1;for await(const t of e){n.append(t);const e=r.fingerprint(t);for(let t=0;t<e.length;t++){const r=e[t];const i=n.slice(0,r);n.consume(r);yield i}}if(n.length){yield n.slice(0)}}const BufferList=BufferList_1;var fixedSize=async function*e(t,r){let n=new BufferList;let i=0;let s=false;const a=r.maxChunkSize;for await(const e of t){n.append(e);i+=e.length;while(i>=a){yield n.slice(0,a);s=true;if(a===n.length){n=new BufferList;i=0}else{const e=new BufferList;e.append(n.shallowSlice(a));n=e;i-=a}}}if(!s||i){yield n.slice(0,i)}};const errCode$1=errCode$3;const uint8ArrayFromString$1=fromString_1;async function*validateChunks(e){for await(const t of e){if(t.length===undefined){throw errCode$1(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}if(typeof t==="string"||t instanceof String){yield uint8ArrayFromString$1(t.toString())}else if(Array.isArray(t)){yield Uint8Array.from(t)}else if(t instanceof Uint8Array){yield t}else{throw errCode$1(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}}}var validateChunks_1=validateChunks;const dirBuilder=dir$1;const fileBuilder=file;const errCode=errCode$3;function isIterable(e){return Symbol.iterator in e}function isAsyncIterable(e){return Symbol.asyncIterator in e}function contentAsAsyncIterable(e){try{if(e instanceof Uint8Array){return async function*(){yield e}()}else if(isIterable(e)){return async function*(){yield*e}()}else if(isAsyncIterable(e)){return e}}catch{throw errCode(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}throw errCode(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}async function*dagBuilder(e,t,r){for await(const n of e){if(n.path){if(n.path.substring(0,2)==="./"){r.wrapWithDirectory=true}n.path=n.path.split("/").filter((e=>e&&e!==".")).join("/")}if(n.content){let e;if(typeof r.chunker==="function"){e=r.chunker}else if(r.chunker==="rabin"){e=rabin_1}else{e=fixedSize}let i;if(typeof r.chunkValidator==="function"){i=r.chunkValidator}else{i=validateChunks_1}const s={path:n.path,mtime:n.mtime,mode:n.mode,content:e(i(contentAsAsyncIterable(n.content),r),r)};yield()=>fileBuilder(s,t,r)}else if(n.path){const e={path:n.path,mtime:n.mtime,mode:n.mode};yield()=>dirBuilder(e,t,r)}else{throw new Error("Import candidate must have content or path or both")}}}var dagBuilder_1=dagBuilder;class Dir$3{constructor(e,t){this.options=t||{};this.root=e.root;this.dir=e.dir;this.path=e.path;this.dirty=e.dirty;this.flat=e.flat;this.parent=e.parent;this.parentKey=e.parentKey;this.unixfs=e.unixfs;this.mode=e.mode;this.mtime=e.mtime;this.cid=undefined;this.size=undefined}async put(e,t){}get(e){return Promise.resolve(this)}async*eachChildSeries(){}async*flush(e){}}var dir=Dir$3;const{DAGLink:DAGLink$1,DAGNode:DAGNode$1}=src$3;const{UnixFS:UnixFS$1}=src$6;const Dir$2=dir;const persist$1=persist_1;class DirFlat$2 extends Dir$2{constructor(e,t){super(e,t);this._children={}}async put(e,t){this.cid=undefined;this.size=undefined;this._children[e]=t}get(e){return Promise.resolve(this._children[e])}childCount(){return Object.keys(this._children).length}directChildrenCount(){return this.childCount()}onlyChild(){return this._children[Object.keys(this._children)[0]]}async*eachChildSeries(){const e=Object.keys(this._children);for(let t=0;t<e.length;t++){const r=e[t];yield{key:r,child:this._children[r]}}}async*flush(e){const t=Object.keys(this._children);const r=[];for(let n=0;n<t.length;n++){let i=this._children[t[n]];if(i instanceof Dir$2){for await(const t of i.flush(e)){i=t;yield i}}if(i.size!=null&&i.cid){r.push(new DAGLink$1(t[n],i.size,i.cid))}}const n=new UnixFS$1({type:"directory",mtime:this.mtime,mode:this.mode});const i=new DAGNode$1(n.marshal(),r);const s=i.serialize();const a=await persist$1(s,e,this.options);const o=s.length+i.Links.reduce(((e,t)=>e+t.Tsize),0);this.cid=a;this.size=o;yield{cid:a,unixfs:n,path:this.path,size:o}}}var dirFlat=DirFlat$2;const BITS_PER_BYTE=7;var sparseArray=class e{constructor(){this._bitArrays=[];this._data=[];this._length=0;this._changedLength=false;this._changedData=false}set(e,t){let r=this._internalPositionFor(e,false);if(t===undefined){if(r!==-1){this._unsetInternalPos(r);this._unsetBit(e);this._changedLength=true;this._changedData=true}}else{let n=false;if(r===-1){r=this._data.length;this._setBit(e);this._changedData=true}else{n=true}this._setInternalPos(r,e,t,n);this._changedLength=true}}unset(e){this.set(e,undefined)}get(e){this._sortData();const t=this._internalPositionFor(e,true);if(t===-1){return undefined}return this._data[t][1]}push(e){this.set(this.length,e);return this.length}get length(){this._sortData();if(this._changedLength){const e=this._data[this._data.length-1];this._length=e?e[0]+1:0;this._changedLength=false}return this._length}forEach(e){let t=0;while(t<this.length){e(this.get(t),t,this);t++}}map(e){let t=0;let r=new Array(this.length);while(t<this.length){r[t]=e(this.get(t),t,this);t++}return r}reduce(e,t){let r=0;let n=t;while(r<this.length){const t=this.get(r);n=e(n,t,r);r++}return n}find(e){let t=0,r,n;while(t<this.length&&!r){n=this.get(t);r=e(n);t++}return r?n:undefined}_internalPositionFor(e,t){const r=this._bytePosFor(e,t);if(r>=this._bitArrays.length){return-1}const n=this._bitArrays[r];const i=e-r*BITS_PER_BYTE;const s=(n&1<<i)>0;if(!s){return-1}const a=this._bitArrays.slice(0,r).reduce(popCountReduce,0);const o=~(4294967295<<i+1);const f=popCount(n&o);const c=a+f-1;return c}_bytePosFor(e,t){const r=Math.floor(e/BITS_PER_BYTE);const n=r+1;while(!t&&this._bitArrays.length<n){this._bitArrays.push(0)}return r}_setBit(e){const t=this._bytePosFor(e,false);this._bitArrays[t]|=1<<e-t*BITS_PER_BYTE}_unsetBit(e){const t=this._bytePosFor(e,false);this._bitArrays[t]&=~(1<<e-t*BITS_PER_BYTE)}_setInternalPos(e,t,r,n){const i=this._data;const s=[t,r];if(n){this._sortData();i[e]=s}else{if(i.length){if(i[i.length-1][0]>=t){i.push(s)}else if(i[0][0]<=t){i.unshift(s)}else{const e=Math.round(i.length/2);this._data=i.slice(0,e).concat(s).concat(i.slice(e))}}else{this._data.push(s)}this._changedData=true;this._changedLength=true}}_unsetInternalPos(e){this._data.splice(e,1)}_sortData(){if(this._changedData){this._data.sort(sortInternal)}this._changedData=false}bitField(){const e=[];let t=8;let r=0;let n=0;let i;const s=this._bitArrays.slice();while(s.length||r){if(r===0){i=s.shift();r=7}const a=Math.min(r,t);const o=~(255<<a);const f=i&o;n|=f<<8-t;i=i>>>a;r-=a;t-=a;if(!t||!r&&!s.length){e.push(n);n=0;t=8}}for(var a=e.length-1;a>0;a--){const t=e[a];if(t===0){e.pop()}else{break}}return e}compactArray(){this._sortData();return this._data.map(valueOnly)}};function popCountReduce(e,t){return e+popCount(t)}function popCount(e){let t=e;t=t-(t>>1&1431655765);t=(t&858993459)+(t>>2&858993459);return(t+(t>>4)&252645135)*16843009>>24}function sortInternal(e,t){return e[0]-t[0]}function valueOnly(e){return e[1]}var fromString$1={};var alloc$3={};var asUint8array$3={};Object.defineProperty(asUint8array$3,"__esModule",{value:true});function asUint8Array(e){if(globalThis.Buffer!=null){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}return e}asUint8array$3.asUint8Array=asUint8Array;Object.defineProperty(alloc$3,"__esModule",{value:true});var asUint8array$2=asUint8array$3;function alloc$2(e=0){if(globalThis.Buffer!=null&&globalThis.Buffer.alloc!=null){return asUint8array$2.asUint8Array(globalThis.Buffer.alloc(e))}return new Uint8Array(e)}function allocUnsafe(e=0){if(globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null){return asUint8array$2.asUint8Array(globalThis.Buffer.allocUnsafe(e))}return new Uint8Array(e)}alloc$3.alloc=alloc$2;alloc$3.allocUnsafe=allocUnsafe;var basics=basics$5;var alloc$1=alloc$3;function createCodec(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}const string=createCodec("utf8","u",(e=>{const t=new TextDecoder("utf8");return"u"+t.decode(e)}),(e=>{const t=new TextEncoder;return t.encode(e.substring(1))}));const ascii=createCodec("ascii","a",(e=>{let t="a";for(let r=0;r<e.length;r++){t+=String.fromCharCode(e[r])}return t}),(e=>{e=e.substring(1);const t=alloc$1.allocUnsafe(e.length);for(let r=0;r<e.length;r++){t[r]=e.charCodeAt(r)}return t}));const BASES={utf8:string,"utf-8":string,hex:basics.bases.base16,latin1:ascii,ascii,binary:ascii,...basics.bases};var bases$1=BASES;Object.defineProperty(fromString$1,"__esModule",{value:true});var bases=bases$1;var asUint8array$1=asUint8array$3;function fromString(e,t="utf8"){const r=bases[t];if(!r){throw new Error(`Unsupported encoding "${t}"`)}if((t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null){return asUint8array$1.asUint8Array(globalThis.Buffer.from(e,"utf-8"))}return r.decoder.decode(`${r.prefix}${e}`)}fromString$1.fromString=fromString;const SparseArray=sparseArray;const{fromString:uint8ArrayFromString}=fromString$1;class Bucket$2{constructor(e,t,r=0){this._options=e;this._popCount=0;this._parent=t;this._posAtParent=r;this._children=new SparseArray;this.key=null}async put(e,t){const r=await this._findNewBucketAndPos(e);await r.bucket._putAt(r,e,t)}async get(e){const t=await this._findChild(e);if(t){return t.value}}async del(e){const t=await this._findPlace(e);const r=t.bucket._at(t.pos);if(r&&r.key===e){t.bucket._delAt(t.pos)}}leafCount(){const e=this._children.compactArray();return e.reduce(((e,t)=>{if(t instanceof Bucket$2){return e+t.leafCount()}return e+1}),0)}childrenCount(){return this._children.length}onlyChild(){return this._children.get(0)}*eachLeafSeries(){const e=this._children.compactArray();for(const t of e){if(t instanceof Bucket$2){yield*t.eachLeafSeries()}else{yield t}}return[]}serialize(e,t){const r=[];return t(this._children.reduce(((r,n,i)=>{if(n){if(n instanceof Bucket$2){r.push(n.serialize(e,t))}else{r.push(e(n,i))}}return r}),r))}asyncTransform(e,t){return asyncTransformBucket(this,e,t)}toJSON(){return this.serialize(mapNode,reduceNodes)}prettyPrint(){return JSON.stringify(this.toJSON(),null,"  ")}tableSize(){return Math.pow(2,this._options.bits)}async _findChild(e){const t=await this._findPlace(e);const r=t.bucket._at(t.pos);if(r instanceof Bucket$2){return undefined}if(r&&r.key===e){return r}}async _findPlace(e){const t=this._options.hash(typeof e==="string"?uint8ArrayFromString(e):e);const r=await t.take(this._options.bits);const n=this._children.get(r);if(n instanceof Bucket$2){return n._findPlace(t)}return{bucket:this,pos:r,hash:t,existingChild:n}}async _findNewBucketAndPos(e){const t=await this._findPlace(e);if(t.existingChild&&t.existingChild.key!==e){const e=new Bucket$2(this._options,t.bucket,t.pos);t.bucket._putObjectAt(t.pos,e);const r=await e._findPlace(t.existingChild.hash);r.bucket._putAt(r,t.existingChild.key,t.existingChild.value);return e._findNewBucketAndPos(t.hash)}return t}_putAt(e,t,r){this._putObjectAt(e.pos,{key:t,value:r,hash:e.hash})}_putObjectAt(e,t){if(!this._children.get(e)){this._popCount++}this._children.set(e,t)}_delAt(e){if(e===-1){throw new Error("Invalid position")}if(this._children.get(e)){this._popCount--}this._children.unset(e);this._level()}_level(){if(this._parent&&this._popCount<=1){if(this._popCount===1){const e=this._children.find(exists);if(e&&!(e instanceof Bucket$2)){const t=e.hash;t.untake(this._options.bits);const r={pos:this._posAtParent,hash:t,bucket:this._parent};this._parent._putAt(r,e.key,e.value)}}else{this._parent._delAt(this._posAtParent)}}}_at(e){return this._children.get(e)}}function exists(e){return Boolean(e)}function mapNode(e,t){return e.key}function reduceNodes(e){return e}async function asyncTransformBucket(e,t,r){const n=[];for(const i of e._children.compactArray()){if(i instanceof Bucket$2){await asyncTransformBucket(i,t,r)}else{const r=await t(i);n.push({bitField:e._children.bitField(),children:r})}}return r(n)}var bucket=Bucket$2;var consumableHash={exports:{}};const START_MASKS=[255,254,252,248,240,224,192,128];const STOP_MASKS=[1,3,7,15,31,63,127,255];var consumableBuffer=class e{constructor(e){this._value=e;this._currentBytePos=e.length-1;this._currentBitPos=7}availableBits(){return this._currentBitPos+1+this._currentBytePos*8}totalBits(){return this._value.length*8}take(e){let t=e;let r=0;while(t&&this._haveBits()){const e=this._value[this._currentBytePos];const n=this._currentBitPos+1;const i=Math.min(n,t);const s=byteBitsToInt(e,n-i,i);r=(r<<i)+s;t-=i;this._currentBitPos-=i;if(this._currentBitPos<0){this._currentBitPos=7;this._currentBytePos--}}return r}untake(e){this._currentBitPos+=e;while(this._currentBitPos>7){this._currentBitPos-=8;this._currentBytePos+=1}}_haveBits(){return this._currentBytePos>=0}};function byteBitsToInt(e,t,r){const n=maskFor(t,r);return(e&n)>>>t}function maskFor(e,t){return START_MASKS[e]&STOP_MASKS[Math.min(t+e-1,7)]}var concat$1={};Object.defineProperty(concat$1,"__esModule",{value:true});var alloc=alloc$3;var asUint8array=asUint8array$3;function concat(e,t){if(!t){t=e.reduce(((e,t)=>e+t.length),0)}const r=alloc.allocUnsafe(t);let n=0;for(const t of e){r.set(t,n);n+=t.length}return asUint8array.asUint8Array(r)}concat$1.concat=concat;const ConsumableBuffer=consumableBuffer;const{concat:uint8ArrayConcat}=concat$1;function wrapHash$1(e){function t(t){if(t instanceof InfiniteHash){return t}else{return new InfiniteHash(t,e)}}return t}class InfiniteHash{constructor(e,t){if(!(e instanceof Uint8Array)){throw new Error("can only hash Uint8Arrays")}this._value=e;this._hashFn=t;this._depth=-1;this._availableBits=0;this._currentBufferIndex=0;this._buffers=[]}async take(e){let t=e;while(this._availableBits<t){await this._produceMoreBits()}let r=0;while(t>0){const e=this._buffers[this._currentBufferIndex];const n=Math.min(e.availableBits(),t);const i=e.take(n);r=(r<<n)+i;t-=n;this._availableBits-=n;if(e.availableBits()===0){this._currentBufferIndex++}}return r}untake(e){let t=e;while(t>0){const e=this._buffers[this._currentBufferIndex];const r=Math.min(e.totalBits()-e.availableBits(),t);e.untake(r);t-=r;this._availableBits+=r;if(this._currentBufferIndex>0&&e.totalBits()===e.availableBits()){this._depth--;this._currentBufferIndex--}}}async _produceMoreBits(){this._depth++;const e=this._depth?uint8ArrayConcat([this._value,Uint8Array.from([this._depth])]):this._value;const t=await this._hashFn(e);const r=new ConsumableBuffer(t);this._buffers.push(r);this._availableBits+=r.availableBits()}}consumableHash.exports=wrapHash$1;consumableHash.exports.InfiniteHash=InfiniteHash;const Bucket$1=bucket;const wrapHash=consumableHash.exports;function createHAMT$1(e){if(!e||!e.hashFn){throw new Error("please define an options.hashFn")}const t={bits:e.bits||8,hash:wrapHash(e.hashFn)};return new Bucket$1(t)}var src$1={createHAMT:createHAMT$1,Bucket:Bucket$1};const{DAGLink,DAGNode}=src$3;const{UnixFS}=src$6;const Dir$1=dir;const persist=persist_1;const{createHAMT,Bucket}=src$1;class DirSharded$1 extends Dir$1{constructor(e,t){super(e,t);this._bucket=createHAMT({hashFn:t.hamtHashFn,bits:t.hamtBucketBits})}async put(e,t){await this._bucket.put(e,t)}get(e){return this._bucket.get(e)}childCount(){return this._bucket.leafCount()}directChildrenCount(){return this._bucket.childrenCount()}onlyChild(){return this._bucket.onlyChild()}async*eachChildSeries(){for await(const{key:e,value:t}of this._bucket.eachLeafSeries()){yield{key:e,child:t}}}async*flush(e){for await(const t of flush(this._bucket,e,this,this.options)){yield{...t,path:this.path}}}}var dirSharded=DirSharded$1;async function*flush(e,t,r,n){const i=e._children;const s=[];let a=0;for(let e=0;e<i.length;e++){const r=i.get(e);if(!r){continue}const o=e.toString(16).toUpperCase().padStart(2,"0");if(r instanceof Bucket){let e;for await(const i of await flush(r,t,null,n)){e=i}if(!e){throw new Error("Could not flush sharded directory, no subshard found")}s.push(new DAGLink(o,e.size,e.cid));a+=e.size}else if(typeof r.value.flush==="function"){const e=r.value;let n;for await(const r of e.flush(t)){n=r;yield n}const i=o+r.key;s.push(new DAGLink(i,n.size,n.cid));a+=n.size}else{const e=r.value;if(!e.cid){continue}const t=o+r.key;const n=e.size;s.push(new DAGLink(t,n,e.cid));a+=n}}const o=Uint8Array.from(i.bitField().reverse());const f=new UnixFS({type:"hamt-sharded-directory",data:o,fanout:e.tableSize(),hashType:n.hamtHashCode,mtime:r&&r.mtime,mode:r&&r.mode});const c=new DAGNode(f.marshal(),s);const u=c.serialize();const l=await persist(u,t,n);const h=u.length+a;yield{cid:l,unixfs:f,size:h}}const DirSharded=dirSharded;const DirFlat$1=dirFlat;var flatToShard$1=async function e(t,r,n,i){let s=r;if(r instanceof DirFlat$1&&r.directChildrenCount()>=n){s=await convertToShard(r,i)}const a=s.parent;if(a){if(s!==r){if(t){t.parent=s}if(!s.parentKey){throw new Error("No parent key found")}await a.put(s.parentKey,s)}return e(s,a,n,i)}return s};async function convertToShard(e,t){const r=new DirSharded({root:e.root,dir:true,parent:e.parent,parentKey:e.parentKey,path:e.path,dirty:e.dirty,flat:false,mtime:e.mtime,mode:e.mode},t);for await(const{key:t,child:n}of e.eachChildSeries()){await r.put(t,n)}return r}const toPathComponents$1=(e="")=>(e.trim().match(/([^\\^/]|\\\/)+/g)||[]).filter(Boolean);var toPathComponents_1=toPathComponents$1;const DirFlat=dirFlat;const flatToShard=flatToShard$1;const Dir=dir;const toPathComponents=toPathComponents_1;async function addToTree(e,t,r){const n=toPathComponents(e.path||"");const i=n.length-1;let s=t;let a="";for(let o=0;o<n.length;o++){const f=n[o];a+=`${a?"/":""}${f}`;const c=o===i;s.dirty=true;s.cid=undefined;s.size=undefined;if(c){await s.put(f,e);t=await flatToShard(null,s,r.shardSplitThreshold,r)}else{let e=await s.get(f);if(!e||!(e instanceof Dir)){e=new DirFlat({root:false,dir:true,parent:s,parentKey:f,path:a,dirty:true,flat:true,mtime:e&&e.unixfs&&e.unixfs.mtime,mode:e&&e.unixfs&&e.unixfs.mode},r)}await s.put(f,e);s=e}}return t}async function*flushAndYield(e,t){if(!(e instanceof Dir)){if(e&&e.unixfs&&e.unixfs.isDirectory()){yield e}return}yield*e.flush(t)}async function*treeBuilder(e,t,r){let n=new DirFlat({root:true,dir:true,path:"",dirty:true,flat:true},r);for await(const t of e){if(!t){continue}n=await addToTree(t,n,r);if(!t.unixfs||!t.unixfs.isDirectory()){yield t}}if(r.wrapWithDirectory){yield*flushAndYield(n,t)}else{for await(const e of n.eachChildSeries()){if(!e){continue}yield*flushAndYield(e.child,t)}}}var treeBuilder_1=treeBuilder;const parallelBatch=itParallelBatch;const defaultOptions=options;async function*importer$1(e,t,r={}){const n=defaultOptions(r);let i;if(typeof r.dagBuilder==="function"){i=r.dagBuilder}else{i=dagBuilder_1}let s;if(typeof r.treeBuilder==="function"){s=r.treeBuilder}else{s=treeBuilder_1}let a;if(Symbol.asyncIterator in e||Symbol.iterator in e){a=e}else{a=[e]}for await(const e of s(parallelBatch(i(a,t,n),n.fileImportConcurrency),t,n)){yield{cid:e.cid,path:e.path,unixfs:e.unixfs,size:e.size}}}var src={importer:importer$1};const{importer}=src;const block={get:async e=>{throw new Error(`unexpected block API get for ${e}`)},put:async()=>{throw new Error("unexpected block API put")}};var of=async(e,t)=>{t=t||{};t.onlyHash=true;if(typeof e==="string"){e=(new TextEncoder).encode(e)}let r;for await(const{cid:n}of importer([{content:e}],block,t)){r=n}return`${r}`};const ACCESS_CONTROL_SCRIPTS_ADMIN="TS_SCRIPT_ADMIN";class TrustedKeyResolver{constructor(e){this.tokenScript=e}getTrustedPublicKey(e,t){const r=this.tokenScript.getEngine().config.trustedKeys;if(!r)return null;const n=computeAddress(e);const i=computeAddress(t);for(const s of r){if(s.valueType==="ethAddress"){if(n.toLowerCase()===s.value.toLowerCase()||i.toLowerCase()===s.value.toLowerCase())return s}else{if(e.toLowerCase()===s.value.toLowerCase()||t.toLowerCase()===s.value.toLowerCase())return s}}return null}async isAdmin(e,t){const r=await this.tokenScript.getEngine().getWalletAdapter();const n=e.getFirstAddress();try{const e=await r.call(n.chain,n.address,"owner",[],["address"]);if(e.toLowerCase()===t.toLocaleLowerCase()){return true}let i=await r.call(n.chain,n.address,"hasRole",[{internalType:"bytes32",name:"",type:"bytes32",value:ZeroHash},{internalType:"address",name:"",type:"address",value:t}],["bool"]);if(i)return true;i=await r.call(n.chain,n.address,"hasRole",[{internalType:"bytes32",name:"",type:"bytes32",value:keccak256(toUtf8Bytes(ACCESS_CONTROL_SCRIPTS_ADMIN))},{internalType:"address",name:"",type:"address",value:t}],["bool"]);if(i)return true}catch(e){console.error(e)}return false}}var SecurityStatus$1;(function(e){e["VALID"]="valid";e["WARNING"]="warn";e["INVALID"]="invalid"})(SecurityStatus$1||(SecurityStatus$1={}));class SecurityInfo{constructor(e){this.tokenScript=e;this.originStatuses={}}async loadTokenScriptKeyInfo(){this.securityInfo={};const e=await(new DSigValidator).getSignerKey(this.tokenScript);if(e!==false){this.securityInfo.authoritivePublicKey=e.authoritiveKey;this.securityInfo.signerPublicKey=e.signingKey;const t=new TrustedKeyResolver(this.tokenScript);this.securityInfo.trustedKey=t.getTrustedPublicKey(this.securityInfo.authoritivePublicKey,this.securityInfo.signerPublicKey)}try{this.securityInfo.ipfsCid=await of(this.tokenScript.xmlStr,null)}catch(e){console.error("Failed to calculate IPFS hash: ",e)}await this.verifyOrigins()}async verifyOrigins(){this.securityInfo.originStatuses=[];const e=this.tokenScript.getOrigins();let t=0;for(const r in e){const n=e[r];const i=await n.getOriginSecurityStatus(this.securityInfo);if(i.status===SecurityStatus$1.INVALID)t++;this.securityInfo.originStatuses.push(i);this.originStatuses[r]=i}if(t===0){this.securityInfo.status=SecurityStatus$1.VALID;this.securityInfo.statusText=this.securityInfo.trustedKey?"The TokenScript is signed by a trusted key":"The TokenScript is authenticated for use with all specified token origins."}else{this.securityInfo.status=SecurityStatus$1.INVALID;if(t<Object.values(e).length){this.securityInfo.statusText="The TokenScript is not authenticated for some token origins. \nTake care when signing transactions for these tokens."}else{this.securityInfo.statusText="The TokenScript is not authenticated for any listed token origins. \nSign any transactions with caution."}}}async checkAndLoad(){if(!this.lock){this.lock=this.loadTokenScriptKeyInfo()}await this.lock}async getInfo(){await this.checkAndLoad();return this.securityInfo}async getOriginInfo(e){await this.checkAndLoad();return this.originStatuses[e]}async getAllOriginInfo(){await this.checkAndLoad();return this.originStatuses}}class SelectionFilter{constructor(e,t){this.tokenScript=e;t=unescape(t.replace(/&#x(\w{4});/g,"%u$1"));const r=t.match(/([a-zA-Z0-9]*)([=<>]*)([a-zA-Z0-9]*)/);if(r.length<4)throw new Error("Malformed selection filter");this.attributeName=r[1];this.conditionOperator=r[2];this.conditionValue=r[3]}async getAttributeValue(e){const t=this.tokenScript.getAttributes();if(!t.hasAttribute(this.attributeName))throw new Error("Selection filter references an undefined attribute, "+this.attributeName);return t.getAttribute(this.attributeName).getValue(false,false,false,e)}async satisfiesFilter(e){const t=await this.getAttributeValue(e);const r=this.sanitiseConditionValue();switch(this.conditionOperator){case"=":return t==r;case"<":return t<r;case">":return t>r;default:throw new Error("Filter condition "+this.conditionOperator+" is not implemented.")}}sanitiseConditionValue(){switch(this.conditionValue){case"TRUE":return true;case"FALSE":return false;default:if(this.isNumeric(this.conditionValue))return BigInt(this.conditionValue)}return this.conditionValue}isNumeric(e){return/^-?\d+$/.test(e)}}class Selection{constructor(e,t){this.tokenScript=e;this.selectionDef=t}getName(){return this.selectionDef.getAttribute("name")}getLabel(){var e;if(!this.label)this.label=new Label(this.selectionDef);return(e=this.label.getValue())!==null&&e!==void 0?e:this.getName()}getFilter(){if(!this.filter)this.filter=new SelectionFilter(this.tokenScript,this.selectionDef.getAttribute("filter"));return this.filter}isInSelection(e){return this.getFilter().satisfiesFilter(e)}}class Selections{constructor(e,t){this.tokenScript=e;this.parentElem=t}getSelections(){if(!this.selections){this.selections={};const e=Array.prototype.slice.call(this.parentElem.children).filter((e=>e.tagName==="ts:selection"));if(e.length>0){for(let t in e){const r=new Selection(this.tokenScript,e[t]);this.selections[r.getName()]=r}}}return this.selections}getSelection(e){if(!this.selections)this.getSelections();if(!this.selections[e])throw new Error("Could not find selection '"+e+"'");return this.selections[e]}[Symbol.iterator](){return Object.values(this.getSelections()).values()}}class AttestationDefinition{constructor(e,t){this.tokenScript=e;this.elem=t}getTokenScript(){return this.tokenScript}get name(){return this.elem.getAttribute("name")}get type(){return this.elem.getAttribute("type")}get meta(){var e,t,r,n,i,s,a,o,f;const c=(e=this.elem.getElementsByTagName("ts:meta"))===null||e===void 0?void 0:e[0];if(!c)return{name:this.tokenScript.getLabel(),image:"",description:"",attributes:[]};return{name:(n=(r=(t=c.getElementsByTagName("ts:name"))===null||t===void 0?void 0:t[0])===null||r===void 0?void 0:r.innerHTML)!==null&&n!==void 0?n:this.tokenScript.getLabel(),image:(a=(s=(i=c.getElementsByTagName("ts:image"))===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.innerHTML)!==null&&a!==void 0?a:"",description:(f=(o=c.getElementsByTagName("ts:description"))===null||o===void 0?void 0:o[0].innerHTML)!==null&&f!==void 0?f:"",attributes:Array.from(c.getElementsByTagName("ts:attributeField")).map((e=>({name:e.getAttribute("name"),label:e.innerHTML,display_type:e.getAttribute("display_type")})))}}get keys(){const e=[];const t=this.elem.getElementsByTagName("ts:key");for(const r of t){e.push(r.innerHTML)}return e}get eventId(){var e,t;return(t=(e=this.elem.getElementsByTagName("ts:eventId"))===null||e===void 0?void 0:e[0].innerHTML)!==null&&t!==void 0?t:null}get collectionFields(){var e;const t=(e=this.elem.getElementsByTagName("ts:collectionFields"))===null||e===void 0?void 0:e[0];if(!t)return[];return Array.from(t.getElementsByTagName("ts:collectionField")).map((e=>({name:e.getAttribute("name"),value:e.innerHTML})))}get idFields(){var e;const t=this.elem.getElementsByTagName("ts:idFields");if(!t.length)return[];return(e=t[0].innerHTML.split(","))!==null&&e!==void 0?e:[]}get schemaUID(){const e=this.elem.getElementsByTagName("ts:eas");if(e.length){if(e[0].hasAttribute("schemaUID")){return e[0].getAttribute("schemaUID")}}return"0x0000000000000000000000000000000000000000000000000000000000000000"}calculateAttestationCollectionHashes(){const e=[];let t=this.schemaUID;if(t.indexOf("0x")===0)t=t.substring(2);const r=new TextEncoder;for(let n of this.keys){if(n.indexOf("0x")===-1)n="0x"+n;n=computeAddress(n).substring(2).toLowerCase();const i=[];const s=this.collectionFields;if(s.length){for(const e of s){i.push(e.value)}}else if(this.eventId){i.push(this.eventId)}const a=t+n+i.join("");const o=keccak256(r.encode(a));e.push(o)}return e}}class AttestationDefinitions{constructor(e,t){this.tokenScript=e;this.elem=t}getDefinitions(){if(!this.definitions){this.definitions={};const e=Array.prototype.slice.call(this.elem.children).filter((e=>e.tagName==="ts:attestation"));for(const t of e){const e=new AttestationDefinition(this.tokenScript,t);this.definitions[e.name]=e}}return this.definitions}getOriginDefinitions(){const e=this.getDefinitions();const t=this.tokenScript.getOrigins();const r={};for(const n in e){if(t[n])r[n]=e[n]}return new OriginAttestationDefinitions(r)}getDefinition(e){const t=this.getDefinitions();return t[e]}[Symbol.iterator](){return Object.values(this.getDefinitions()).values()}}class OriginAttestationDefinitions{constructor(e){this.definitions=e}getDefinitions(){return this.definitions}[Symbol.iterator](){return Object.values(this.getDefinitions()).values()}}var dist={};var typechainTypes={};var factories={};var _openzeppelin={};var contracts$1={};var access={};var Ownable__factory$1={};const require$$0=getAugmentedNamespace(lib_esm);Object.defineProperty(Ownable__factory$1,"__esModule",{value:true});Ownable__factory$1.Ownable__factory=void 0;const ethers_1$v=require$$0;const _abi$t=[{anonymous:false,inputs:[{indexed:true,internalType:"address",name:"previousOwner",type:"address"},{indexed:true,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"}];class Ownable__factory{static abi=_abi$t;static createInterface(){return new ethers_1$v.Interface(_abi$t)}static connect(e,t){return new ethers_1$v.Contract(e,_abi$t,t)}}Ownable__factory$1.Ownable__factory=Ownable__factory;(function(e){Object.defineProperty(e,"__esModule",{value:true});e.Ownable__factory=void 0;var t=Ownable__factory$1;Object.defineProperty(e,"Ownable__factory",{enumerable:true,get:function(){return t.Ownable__factory}})})(access);var interfaces={};var IERC1271__factory$1={};Object.defineProperty(IERC1271__factory$1,"__esModule",{value:true});IERC1271__factory$1.IERC1271__factory=void 0;const ethers_1$u=require$$0;const _abi$s=[{inputs:[{internalType:"bytes32",name:"hash",type:"bytes32"},{internalType:"bytes",name:"signature",type:"bytes"}],name:"isValidSignature",outputs:[{internalType:"bytes4",name:"magicValue",type:"bytes4"}],stateMutability:"view",type:"function"}];class IERC1271__factory{static abi=_abi$s;static createInterface(){return new ethers_1$u.Interface(_abi$s)}static connect(e,t){return new ethers_1$u.Contract(e,_abi$s,t)}}IERC1271__factory$1.IERC1271__factory=IERC1271__factory;var IERC5267__factory$1={};Object.defineProperty(IERC5267__factory$1,"__esModule",{value:true});IERC5267__factory$1.IERC5267__factory=void 0;const ethers_1$t=require$$0;const _abi$r=[{anonymous:false,inputs:[],name:"EIP712DomainChanged",type:"event"},{inputs:[],name:"eip712Domain",outputs:[{internalType:"bytes1",name:"fields",type:"bytes1"},{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"version",type:"string"},{internalType:"uint256",name:"chainId",type:"uint256"},{internalType:"address",name:"verifyingContract",type:"address"},{internalType:"bytes32",name:"salt",type:"bytes32"},{internalType:"uint256[]",name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"}];class IERC5267__factory{static abi=_abi$r;static createInterface(){return new ethers_1$t.Interface(_abi$r)}static connect(e,t){return new ethers_1$t.Contract(e,_abi$r,t)}}IERC5267__factory$1.IERC5267__factory=IERC5267__factory;(function(e){Object.defineProperty(e,"__esModule",{value:true});e.IERC5267__factory=e.IERC1271__factory=void 0;var t=IERC1271__factory$1;Object.defineProperty(e,"IERC1271__factory",{enumerable:true,get:function(){return t.IERC1271__factory}});var r=IERC5267__factory$1;Object.defineProperty(e,"IERC5267__factory",{enumerable:true,get:function(){return r.IERC5267__factory}})})(interfaces);var token={};var ERC20={};var extensions={};var IERC20Metadata__factory$1={};Object.defineProperty(IERC20Metadata__factory$1,"__esModule",{value:true});IERC20Metadata__factory$1.IERC20Metadata__factory=void 0;const ethers_1$s=require$$0;const _abi$q=[{anonymous:false,inputs:[{indexed:true,internalType:"address",name:"owner",type:"address"},{indexed:true,internalType:"address",name:"spender",type:"address"},{indexed:false,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:false,inputs:[{indexed:true,internalType:"address",name:"from",type:"address"},{indexed:true,internalType:"address",name:"to",type:"address"},{indexed:false,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}];class IERC20Metadata__factory{static abi=_abi$q;static createInterface(){return new ethers_1$s.Interface(_abi$q)}static connect(e,t){return new ethers_1$s.Contract(e,_abi$q,t)}}IERC20Metadata__factory$1.IERC20Metadata__factory=IERC20Metadata__factory;var IERC20Permit__factory$1={};Object.defineProperty(IERC20Permit__factory$1,"__esModule",{value:true});IERC20Permit__factory$1.IERC20Permit__factory=void 0;const ethers_1$r=require$$0;const _abi$p=[{inputs:[],name:"DOMAIN_SEPARATOR",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"nonces",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"permit",outputs:[],stateMutability:"nonpayable",type:"function"}];class IERC20Permit__factory{static abi=_abi$p;static createInterface(){return new ethers_1$r.Interface(_abi$p)}static connect(e,t){return new ethers_1$r.Contract(e,_abi$p,t)}}IERC20Permit__factory$1.IERC20Permit__factory=IERC20Permit__factory;(function(e){Object.defineProperty(e,"__esModule",{value:true});e.IERC20Permit__factory=e.IERC20Metadata__factory=void 0;var t=IERC20Metadata__factory$1;Object.defineProperty(e,"IERC20Metadata__factory",{enumerable:true,get:function(){return t.IERC20Metadata__factory}});var r=IERC20Permit__factory$1;Object.defineProperty(e,"IERC20Permit__factory",{enumerable:true,get:function(){return r.IERC20Permit__factory}})})(extensions);var ERC20__factory$1={};Object.defineProperty(ERC20__factory$1,"__esModule",{value:true});ERC20__factory$1.ERC20__factory=void 0;const ethers_1$q=require$$0;const _abi$o=[{inputs:[{internalType:"string",name:"name_",type:"string"},{internalType:"string",name:"symbol_",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:false,inputs:[{indexed:true,internalType:"address",name:"owner",type:"address"},{indexed:true,internalType:"address",name:"spender",type:"address"},{indexed:false,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:false,inputs:[{indexed:true,internalType:"address",name:"from",type:"address"},{indexed:true,internalType:"address",name:"to",type:"address"},{indexed:false,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}];const _bytecode$g="0x60806040523480156200001157600080fd5b5060405162000de638038062000de683398101604081905262000034916200011f565b600362000042838262000218565b50600462000051828262000218565b505050620002e4565b634e487b7160e01b600052604160045260246000fd5b600082601f8301126200008257600080fd5b81516001600160401b03808211156200009f576200009f6200005a565b604051601f8301601f19908116603f01168101908282118183101715620000ca57620000ca6200005a565b81604052838152602092508683858801011115620000e757600080fd5b600091505b838210156200010b5785820183015181830184015290820190620000ec565b600093810190920192909252949350505050565b600080604083850312156200013357600080fd5b82516001600160401b03808211156200014b57600080fd5b620001598683870162000070565b935060208501519150808211156200017057600080fd5b506200017f8582860162000070565b9150509250929050565b600181811c908216806200019e57607f821691505b602082108103620001bf57634e487b7160e01b600052602260045260246000fd5b50919050565b601f8211156200021357600081815260208120601f850160051c81016020861015620001ee5750805b601f850160051c820191505b818110156200020f57828155600101620001fa565b5050505b505050565b81516001600160401b038111156200023457620002346200005a565b6200024c8162000245845462000189565b84620001c5565b602080601f8311600181146200028457600084156200026b5750858301515b600019600386901b1c1916600185901b1785556200020f565b600085815260208120601f198616915b82811015620002b55788860151825594840194600190910190840162000294565b5085821015620002d45787850151600019600388901b60f8161c191681555b5050505050600190811b01905550565b610af280620002f46000396000f3fe608060405234801561001057600080fd5b50600436106100c95760003560e01c80633950935111610081578063a457c2d71161005b578063a457c2d714610194578063a9059cbb146101a7578063dd62ed3e146101ba57600080fd5b8063395093511461014357806370a082311461015657806395d89b411461018c57600080fd5b806318160ddd116100b257806318160ddd1461010f57806323b872dd14610121578063313ce5671461013457600080fd5b806306fdde03146100ce578063095ea7b3146100ec575b600080fd5b6100d6610200565b6040516100e39190610908565b60405180910390f35b6100ff6100fa36600461099d565b610292565b60405190151581526020016100e3565b6002545b6040519081526020016100e3565b6100ff61012f3660046109c7565b6102ac565b604051601281526020016100e3565b6100ff61015136600461099d565b6102d0565b610113610164366004610a03565b73ffffffffffffffffffffffffffffffffffffffff1660009081526020819052604090205490565b6100d661031c565b6100ff6101a236600461099d565b61032b565b6100ff6101b536600461099d565b610401565b6101136101c8366004610a25565b73ffffffffffffffffffffffffffffffffffffffff918216600090815260016020908152604080832093909416825291909152205490565b60606003805461020f90610a58565b80601f016020809104026020016040519081016040528092919081815260200182805461023b90610a58565b80156102885780601f1061025d57610100808354040283529160200191610288565b820191906000526020600020905b81548152906001019060200180831161026b57829003601f168201915b5050505050905090565b6000336102a081858561040f565b60019150505b92915050565b6000336102ba8582856105c2565b6102c5858585610699565b506001949350505050565b33600081815260016020908152604080832073ffffffffffffffffffffffffffffffffffffffff871684529091528120549091906102a09082908690610317908790610aab565b61040f565b60606004805461020f90610a58565b33600081815260016020908152604080832073ffffffffffffffffffffffffffffffffffffffff87168452909152812054909190838110156103f4576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152602560248201527f45524332303a2064656372656173656420616c6c6f77616e63652062656c6f7760448201527f207a65726f00000000000000000000000000000000000000000000000000000060648201526084015b60405180910390fd5b6102c5828686840361040f565b6000336102a0818585610699565b73ffffffffffffffffffffffffffffffffffffffff83166104b1576040517f08c379a0000000000000000000000000000000000000000000000000000000008152602060048201526024808201527f45524332303a20617070726f76652066726f6d20746865207a65726f2061646460448201527f726573730000000000000000000000000000000000000000000000000000000060648201526084016103eb565b73ffffffffffffffffffffffffffffffffffffffff8216610554576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152602260248201527f45524332303a20617070726f766520746f20746865207a65726f20616464726560448201527f737300000000000000000000000000000000000000000000000000000000000060648201526084016103eb565b73ffffffffffffffffffffffffffffffffffffffff83811660008181526001602090815260408083209487168084529482529182902085905590518481527f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925910160405180910390a3505050565b73ffffffffffffffffffffffffffffffffffffffff8381166000908152600160209081526040808320938616835292905220547fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff81146106935781811015610686576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601d60248201527f45524332303a20696e73756666696369656e7420616c6c6f77616e636500000060448201526064016103eb565b610693848484840361040f565b50505050565b73ffffffffffffffffffffffffffffffffffffffff831661073c576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152602560248201527f45524332303a207472616e736665722066726f6d20746865207a65726f20616460448201527f647265737300000000000000000000000000000000000000000000000000000060648201526084016103eb565b73ffffffffffffffffffffffffffffffffffffffff82166107df576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152602360248201527f45524332303a207472616e7366657220746f20746865207a65726f206164647260448201527f657373000000000000000000000000000000000000000000000000000000000060648201526084016103eb565b73ffffffffffffffffffffffffffffffffffffffff831660009081526020819052604090205481811015610895576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152602660248201527f45524332303a207472616e7366657220616d6f756e742065786365656473206260448201527f616c616e6365000000000000000000000000000000000000000000000000000060648201526084016103eb565b73ffffffffffffffffffffffffffffffffffffffff848116600081815260208181526040808320878703905593871680835291849020805487019055925185815290927fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef910160405180910390a3610693565b600060208083528351808285015260005b8181101561093557858101830151858201604001528201610919565b5060006040828601015260407fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0601f8301168501019250505092915050565b803573ffffffffffffffffffffffffffffffffffffffff8116811461099857600080fd5b919050565b600080604083850312156109b057600080fd5b6109b983610974565b946020939093013593505050565b6000806000606084860312156109dc57600080fd5b6109e584610974565b92506109f360208501610974565b9150604084013590509250925092565b600060208284031215610a1557600080fd5b610a1e82610974565b9392505050565b60008060408385031215610a3857600080fd5b610a4183610974565b9150610a4f60208401610974565b90509250929050565b600181811c90821680610a6c57607f821691505b602082108103610aa5577f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b50919050565b808201808211156102a6577f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fdfea164736f6c6343000813000a";const isSuperArgs$g=e=>e.length>1;class ERC20__factory extends ethers_1$q.ContractFactory{constructor(...e){if(isSuperArgs$g(e)){super(...e)}else{super(_abi$o,_bytecode$g,e[0])}}getDeployTransaction(e,t,r){return super.getDeployTransaction(e,t,r||{})}deploy(e,t,r){return super.deploy(e,t,r||{})}connect(e){return super.connect(e)}static bytecode=_bytecode$g;static abi=_abi$o;static createInterface(){return new ethers_1$q.Interface(_abi$o)}static connect(e,t){return new ethers_1$q.Contract(e,_abi$o,t)}}ERC20__factory$1.ERC20__factory=ERC20__factory;var IERC20__factory$1={};Object.defineProperty(IERC20__factory$1,"__esModule",{value:true});IERC20__factory$1.IERC20__factory=void 0;const ethers_1$p=require$$0;const _abi$n=[{anonymous:false,inputs:[{indexed:true,internalType:"address",name:"owner",type:"address"},{indexed:true,internalType:"address",name:"spender",type:"address"},{indexed:false,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:false,inputs:[{indexed:true,internalType:"address",name:"from",type:"address"},{indexed:true,internalType:"address",name:"to",type:"address"},{indexed:false,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}];class IERC20__factory{static abi=_abi$n;static createInterface(){return new ethers_1$p.Interface(_abi$n)}static connect(e,t){return new ethers_1$p.Contract(e,_abi$n,t)}}IERC20__factory$1.IERC20__factory=IERC20__factory;(function(e){var t=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[r]}}}Object.defineProperty(e,n,i)}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var r=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var n=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var n={};if(e!=null)for(var i in e)if(i!=="default"&&Object.prototype.hasOwnProperty.call(e,i))t(n,e,i);r(n,e);return n};Object.defineProperty(e,"__esModule",{value:true});e.IERC20__factory=e.ERC20__factory=e.extensions=void 0;e.extensions=n(extensions);var i=ERC20__factory$1;Object.defineProperty(e,"ERC20__factory",{enumerable:true,get:function(){return i.ERC20__factory}});var s=IERC20__factory$1;Object.defineProperty(e,"IERC20__factory",{enumerable:true,get:function(){return s.IERC20__factory}})})(ERC20);var __createBinding$4=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[r]}}}Object.defineProperty(e,n,i)}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var __setModuleDefault$4=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var __importStar$4=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)if(r!=="default"&&Object.prototype.hasOwnProperty.call(e,r))__createBinding$4(t,e,r);__setModuleDefault$4(t,e);return t};Object.defineProperty(token,"__esModule",{value:true});token.erc20=void 0;token.erc20=__importStar$4(ERC20);var utils$1={};var cryptography={};var EIP712__factory$1={};Object.defineProperty(EIP712__factory$1,"__esModule",{value:true});EIP712__factory$1.EIP712__factory=void 0;const ethers_1$o=require$$0;const _abi$m=[{inputs:[],name:"InvalidShortString",type:"error"},{inputs:[{internalType:"string",name:"str",type:"string"}],name:"StringTooLong",type:"error"},{anonymous:false,inputs:[],name:"EIP712DomainChanged",type:"event"},{inputs:[],name:"eip712Domain",outputs:[{internalType:"bytes1",name:"fields",type:"bytes1"},{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"version",type:"string"},{internalType:"uint256",name:"chainId",type:"uint256"},{internalType:"address",name:"verifyingContract",type:"address"},{internalType:"bytes32",name:"salt",type:"bytes32"},{internalType:"uint256[]",name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"}];class EIP712__factory{static abi=_abi$m;static createInterface(){return new ethers_1$o.Interface(_abi$m)}static connect(e,t){return new ethers_1$o.Contract(e,_abi$m,t)}}EIP712__factory$1.EIP712__factory=EIP712__factory;(function(e){Object.defineProperty(e,"__esModule",{value:true});e.EIP712__factory=void 0;var t=EIP712__factory$1;Object.defineProperty(e,"EIP712__factory",{enumerable:true,get:function(){return t.EIP712__factory}})})(cryptography);var ShortStrings__factory$1={};Object.defineProperty(ShortStrings__factory$1,"__esModule",{value:true});ShortStrings__factory$1.ShortStrings__factory=void 0;const ethers_1$n=require$$0;const _abi$l=[{inputs:[],name:"InvalidShortString",type:"error"},{inputs:[{internalType:"string",name:"str",type:"string"}],name:"StringTooLong",type:"error"}];const _bytecode$f="0x602d6037600b82828239805160001a607314602a57634e487b7160e01b600052600060045260246000fd5b30600052607381538281f3fe73000000000000000000000000000000000000000030146080604052600080fdfea164736f6c6343000813000a";const isSuperArgs$f=e=>e.length>1;class ShortStrings__factory extends ethers_1$n.ContractFactory{constructor(...e){if(isSuperArgs$f(e)){super(...e)}else{super(_abi$l,_bytecode$f,e[0])}}getDeployTransaction(e){return super.getDeployTransaction(e||{})}deploy(e){return super.deploy(e||{})}connect(e){return super.connect(e)}static bytecode=_bytecode$f;static abi=_abi$l;static createInterface(){return new ethers_1$n.Interface(_abi$l)}static connect(e,t){return new ethers_1$n.Contract(e,_abi$l,t)}}ShortStrings__factory$1.ShortStrings__factory=ShortStrings__factory;(function(e){var t=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[r]}}}Object.defineProperty(e,n,i)}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var r=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var n=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var n={};if(e!=null)for(var i in e)if(i!=="default"&&Object.prototype.hasOwnProperty.call(e,i))t(n,e,i);r(n,e);return n};Object.defineProperty(e,"__esModule",{value:true});e.ShortStrings__factory=e.cryptography=void 0;e.cryptography=n(cryptography);var i=ShortStrings__factory$1;Object.defineProperty(e,"ShortStrings__factory",{enumerable:true,get:function(){return i.ShortStrings__factory}})})(utils$1);var __createBinding$3=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[r]}}}Object.defineProperty(e,n,i)}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var __setModuleDefault$3=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var __importStar$3=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)if(r!=="default"&&Object.prototype.hasOwnProperty.call(e,r))__createBinding$3(t,e,r);__setModuleDefault$3(t,e);return t};Object.defineProperty(contracts$1,"__esModule",{value:true});contracts$1.utils=contracts$1.token=contracts$1.interfaces=contracts$1.access=void 0;contracts$1.access=__importStar$3(access);contracts$1.interfaces=__importStar$3(interfaces);contracts$1.token=__importStar$3(token);contracts$1.utils=__importStar$3(utils$1);var __createBinding$2=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[r]}}}Object.defineProperty(e,n,i)}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var __setModuleDefault$2=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var __importStar$2=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)if(r!=="default"&&Object.prototype.hasOwnProperty.call(e,r))__createBinding$2(t,e,r);__setModuleDefault$2(t,e);return t};Object.defineProperty(_openzeppelin,"__esModule",{value:true});_openzeppelin.contracts=void 0;_openzeppelin.contracts=__importStar$2(contracts$1);var contracts={};var eip1271={};var EIP1271Verifier__factory$1={};Object.defineProperty(EIP1271Verifier__factory$1,"__esModule",{value:true});EIP1271Verifier__factory$1.EIP1271Verifier__factory=void 0;const ethers_1$m=require$$0;const _abi$k=[{inputs:[],name:"InvalidNonce",type:"error"},{inputs:[],name:"InvalidShortString",type:"error"},{inputs:[{internalType:"string",name:"str",type:"string"}],name:"StringTooLong",type:"error"},{anonymous:false,inputs:[],name:"EIP712DomainChanged",type:"event"},{anonymous:false,inputs:[{indexed:false,internalType:"uint256",name:"oldNonce",type:"uint256"},{indexed:false,internalType:"uint256",name:"newNonce",type:"uint256"}],name:"NonceIncreased",type:"event"},{inputs:[],name:"eip712Domain",outputs:[{internalType:"bytes1",name:"fields",type:"bytes1"},{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"version",type:"string"},{internalType:"uint256",name:"chainId",type:"uint256"},{internalType:"address",name:"verifyingContract",type:"address"},{internalType:"bytes32",name:"salt",type:"bytes32"},{internalType:"uint256[]",name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getAttestTypeHash",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"},{inputs:[],name:"getDomainSeparator",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"getName",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"getNonce",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getRevokeTypeHash",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"newNonce",type:"uint256"}],name:"increaseNonce",outputs:[],stateMutability:"nonpayable",type:"function"}];class EIP1271Verifier__factory{static abi=_abi$k;static createInterface(){return new ethers_1$m.Interface(_abi$k)}static connect(e,t){return new ethers_1$m.Contract(e,_abi$k,t)}}EIP1271Verifier__factory$1.EIP1271Verifier__factory=EIP1271Verifier__factory;(function(e){Object.defineProperty(e,"__esModule",{value:true});e.EIP1271Verifier__factory=void 0;var t=EIP1271Verifier__factory$1;Object.defineProperty(e,"EIP1271Verifier__factory",{enumerable:true,get:function(){return t.EIP1271Verifier__factory}})})(eip1271);var eip712={};var proxy={};var examples$1={};var PermissionedEIP712Proxy__factory$1={};Object.defineProperty(PermissionedEIP712Proxy__factory$1,"__esModule",{value:true});PermissionedEIP712Proxy__factory$1.PermissionedEIP712Proxy__factory=void 0;const ethers_1$l=require$$0;const _abi$j=[{inputs:[{internalType:"contract IEAS",name:"eas",type:"address"},{internalType:"string",name:"name",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"AccessDenied",type:"error"},{inputs:[],name:"DeadlineExpired",type:"error"},{inputs:[],name:"InvalidEAS",type:"error"},{inputs:[],name:"InvalidLength",type:"error"},{inputs:[],name:"InvalidShortString",type:"error"},{inputs:[],name:"InvalidSignature",type:"error"},{inputs:[],name:"NotFound",type:"error"},{inputs:[{internalType:"string",name:"str",type:"string"}],name:"StringTooLong",type:"error"},{inputs:[],name:"UsedSignature",type:"error"},{anonymous:false,inputs:[],name:"EIP712DomainChanged",type:"event"},{anonymous:false,inputs:[{indexed:true,internalType:"address",name:"previousOwner",type:"address"},{indexed:true,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{inputs:[{components:[{internalType:"bytes32",name:"schema",type:"bytes32"},{components:[{internalType:"address",name:"recipient",type:"address"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"bytes",name:"data",type:"bytes"},{internalType:"uint256",name:"value",type:"uint256"}],internalType:"struct AttestationRequestData",name:"data",type:"tuple"},{components:[{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],internalType:"struct Signature",name:"signature",type:"tuple"},{internalType:"address",name:"attester",type:"address"},{internalType:"uint64",name:"deadline",type:"uint64"}],internalType:"struct DelegatedProxyAttestationRequest",name:"delegatedRequest",type:"tuple"}],name:"attestByDelegation",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"payable",type:"function"},{inputs:[],name:"eip712Domain",outputs:[{internalType:"bytes1",name:"fields",type:"bytes1"},{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"version",type:"string"},{internalType:"uint256",name:"chainId",type:"uint256"},{internalType:"address",name:"verifyingContract",type:"address"},{internalType:"bytes32",name:"salt",type:"bytes32"},{internalType:"uint256[]",name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getAttestTypeHash",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"bytes32",name:"uid",type:"bytes32"}],name:"getAttester",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getDomainSeparator",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"getEAS",outputs:[{internalType:"contract IEAS",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getName",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"getRevokeTypeHash",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"schema",type:"bytes32"},{components:[{internalType:"address",name:"recipient",type:"address"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"bytes",name:"data",type:"bytes"},{internalType:"uint256",name:"value",type:"uint256"}],internalType:"struct AttestationRequestData[]",name:"data",type:"tuple[]"},{components:[{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],internalType:"struct Signature[]",name:"signatures",type:"tuple[]"},{internalType:"address",name:"attester",type:"address"},{internalType:"uint64",name:"deadline",type:"uint64"}],internalType:"struct MultiDelegatedProxyAttestationRequest[]",name:"multiDelegatedRequests",type:"tuple[]"}],name:"multiAttestByDelegation",outputs:[{internalType:"bytes32[]",name:"",type:"bytes32[]"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"schema",type:"bytes32"},{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"uint256",name:"value",type:"uint256"}],internalType:"struct RevocationRequestData[]",name:"data",type:"tuple[]"},{components:[{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],internalType:"struct Signature[]",name:"signatures",type:"tuple[]"},{internalType:"address",name:"revoker",type:"address"},{internalType:"uint64",name:"deadline",type:"uint64"}],internalType:"struct MultiDelegatedProxyRevocationRequest[]",name:"multiDelegatedRequests",type:"tuple[]"}],name:"multiRevokeByDelegation",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"schema",type:"bytes32"},{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"uint256",name:"value",type:"uint256"}],internalType:"struct RevocationRequestData",name:"data",type:"tuple"},{components:[{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],internalType:"struct Signature",name:"signature",type:"tuple"},{internalType:"address",name:"revoker",type:"address"},{internalType:"uint64",name:"deadline",type:"uint64"}],internalType:"struct DelegatedProxyRevocationRequest",name:"delegatedRequest",type:"tuple"}],name:"revokeByDelegation",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"version",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}];const _bytecode$e="0x6101e06040523480156200001257600080fd5b5060405162003173380380620031738339810160408190526200003591620002a2565b6040805180820190915260058152640312e332e360dc1b60208201526001608052600360a052600060c081905283918391829190620000769083906200018b565b61018052620000878160016200018b565b6101a052815160208084019190912061014052815190820120610160524661010052620001186101405161016051604080517f8b73c3c69bb8fe3d512ecc4cf759cc79239f7b179b0ffacaa9a75d522b39400f60208201529081019290925260608201524660808201523060a082015260009060c00160405160208183030381529060405280519060200120905090565b60e052505030610120526001600160a01b0382166200014a576040516341bc07ff60e11b815260040160405180910390fd5b6001600160a01b0382166101c05260026200016682826200040c565b505050620001836200017d620001c460201b60201c565b620001c8565b505062000532565b6000602083511015620001ab57620001a3836200021a565b9050620001be565b81620001b884826200040c565b5060ff90505b92915050565b3390565b600580546001600160a01b038381166001600160a01b0319831681179093556040519116919082907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e090600090a35050565b600080829050601f8151111562000251578260405163305a27a960e01b8152600401620002489190620004d8565b60405180910390fd5b80516200025e826200050d565b179392505050565b634e487b7160e01b600052604160045260246000fd5b60005b83811015620002995781810151838201526020016200027f565b50506000910152565b60008060408385031215620002b657600080fd5b82516001600160a01b0381168114620002ce57600080fd5b60208401519092506001600160401b0380821115620002ec57600080fd5b818501915085601f8301126200030157600080fd5b81518181111562000316576200031662000266565b604051601f8201601f19908116603f0116810190838211818310171562000341576200034162000266565b816040528281528860208487010111156200035b57600080fd5b6200036e8360208301602088016200027c565b80955050505050509250929050565b600181811c908216806200039257607f821691505b602082108103620003b357634e487b7160e01b600052602260045260246000fd5b50919050565b601f8211156200040757600081815260208120601f850160051c81016020861015620003e25750805b601f850160051c820191505b818110156200040357828155600101620003ee565b5050505b505050565b81516001600160401b0381111562000428576200042862000266565b62000440816200043984546200037d565b84620003b9565b602080601f8311600181146200047857600084156200045f5750858301515b600019600386901b1c1916600185901b17855562000403565b600085815260208120601f198616915b82811015620004a95788860151825594840194600190910190840162000488565b5085821015620004c85787850151600019600388901b60f8161c191681555b5050505050600190811b01905550565b6020815260008251806020840152620004f98160408501602087016200027c565b601f01601f19169190910160400192915050565b80516020808301519190811015620003b35760001960209190910360031b1b16919050565b60805160a05160c05160e05161010051610120516101405161016051610180516101a0516101c051612b9e620005d5600039600081816102050152818161093d015281816109c301528181610f91015261117001526000610532015260006105080152600061133e01526000611316015260006112710152600061129b015260006112c50152600061049c015260006104730152600061044a0152612b9e6000f3fe6080604052600436106100e85760003560e01c8063715018a61161008a578063a6d4dbc711610059578063a6d4dbc7146102b1578063b83010d3146102c4578063ed24911d146102f7578063f2fde38b1461030c57600080fd5b8063715018a61461022957806384b0196e1461023e5780638da5cb5b14610266578063954115251461029157600080fd5b806317d7de7c116100c657806317d7de7c146101ac5780633c042715146101ce57806354fd4d50146101e157806365c40b9c146101f657600080fd5b80630eabf660146100ed57806310d736d51461010257806312b11a171461016f575b600080fd5b6101006100fb366004611d9b565b61032c565b005b34801561010e57600080fd5b5061014561011d366004611ddd565b60009081526003602052604090205473ffffffffffffffffffffffffffffffffffffffff1690565b60405173ffffffffffffffffffffffffffffffffffffffff90911681526020015b60405180910390f35b34801561017b57600080fd5b507fea02ffba7dcb45f6fc649714d23f315eef12e3b27f9a7735d8d8bf41eb2b1af15b604051908152602001610166565b3480156101b857600080fd5b506101c161038d565b6040516101669190611e64565b61019e6101dc366004611e7e565b61041f565b3480156101ed57600080fd5b506101c1610443565b34801561020257600080fd5b507f0000000000000000000000000000000000000000000000000000000000000000610145565b34801561023557600080fd5b506101006104e6565b34801561024a57600080fd5b506102536104fa565b6040516101669796959493929190611eb9565b34801561027257600080fd5b5060055473ffffffffffffffffffffffffffffffffffffffff16610145565b6102a461029f366004611d9b565b61059e565b6040516101669190611f78565b6101006102bf366004611fb0565b6105dc565b3480156102d057600080fd5b507f78a69a78c1a55cdff5cbf949580b410778cd9e4d1ecbe6f06a7fa8dc2441b57d61019e565b34801561030357600080fd5b5061019e6105fb565b34801561031857600080fd5b50610100610327366004611ff2565b61060a565b8060005b8181101561037d5761037584848381811061034d5761034d61200d565b905060200281019061035f919061203c565b610370906080810190606001611ff2565b6106c3565b600101610330565b506103888383610717565b505050565b60606002805461039c9061207a565b80601f01602080910402602001604051908101604052809291908181526020018280546103c89061207a565b80156104155780601f106103ea57610100808354040283529160200191610415565b820191906000526020600020905b8154815290600101906020018083116103f857829003601f168201915b5050505050905090565b600061043461037060c0840160a08501611ff2565b61043d826109ac565b92915050565b606061046e7f0000000000000000000000000000000000000000000000000000000000000000610af7565b6104977f0000000000000000000000000000000000000000000000000000000000000000610af7565b6104c07f0000000000000000000000000000000000000000000000000000000000000000610af7565b6040516020016104d2939291906120c7565b604051602081830303815290604052905090565b6104ee610bb5565b6104f86000610c36565b565b60006060808280808361052d7f000000000000000000000000000000000000000000000000000000000000000083610cad565b6105587f00000000000000000000000000000000000000000000000000000000000000006001610cad565b604080516000808252602082019092527f0f000000000000000000000000000000000000000000000000000000000000009b939a50919850469750309650945092509050565b60608160005b818110156105c9576105c185858381811061034d5761034d61200d565b6001016105a4565b506105d48484610d58565b949350505050565b6105ef61037060e0830160c08401611ff2565b6105f881611157565b50565b6000610605611257565b905090565b610612610bb5565b73ffffffffffffffffffffffffffffffffffffffff81166106ba576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152602660248201527f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206160448201527f646472657373000000000000000000000000000000000000000000000000000060648201526084015b60405180910390fd5b6105f881610c36565b60055473ffffffffffffffffffffffffffffffffffffffff8281169116146105f8576040517f4ca8886700000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b8060008167ffffffffffffffff8111156107335761073361213d565b60405190808252806020026020018201604052801561077957816020015b6040805180820190915260008152606060208201528152602001906001900390816107515790505b50905060005b828110156108ff57600085858381811061079b5761079b61200d565b90506020028101906107ad919061203c565b6107b690612372565b60208101518051919250908015806107d357508260400151518114155b1561080a576040517f947d5a8400000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b60005b818110156108b45760008382815181106108295761082961200d565b602002602001015190506108ab6040518060a0016040528087600001518152602001838152602001876040015185815181106108675761086761200d565b60200260200101518152602001876060015173ffffffffffffffffffffffffffffffffffffffff168152602001876080015167ffffffffffffffff1681525061138f565b5060010161080d565b50604051806040016040528084600001518152602001838152508585815181106108e0576108e061200d565b60200260200101819052505050506108f88160010190565b905061077f565b506040517f4cb7e9e500000000000000000000000000000000000000000000000000000000815273ffffffffffffffffffffffffffffffffffffffff7f00000000000000000000000000000000000000000000000000000000000000001690634cb7e9e590349061097490859060040161246d565b6000604051808303818588803b15801561098d57600080fd5b505af11580156109a1573d6000803e3d6000fd5b505050505050505050565b60006109bf6109ba83612660565b6115eb565b60007f000000000000000000000000000000000000000000000000000000000000000073ffffffffffffffffffffffffffffffffffffffff1663f17325e734604051806040016040528087600001358152602001878060200190610a2391906126d9565b610a2c9061270d565b8152506040518363ffffffff1660e01b8152600401610a4b919061278c565b60206040518083038185885af1158015610a69573d6000803e3d6000fd5b50505050506040513d601f19601f82011682018060405250810190610a8e91906127b1565b9050610aa060c0840160a08501611ff2565b600082815260036020526040902080547fffffffffffffffffffffffff00000000000000000000000000000000000000001673ffffffffffffffffffffffffffffffffffffffff9290921691909117905592915050565b60606000610b04836117cd565b600101905060008167ffffffffffffffff811115610b2457610b2461213d565b6040519080825280601f01601f191660200182016040528015610b4e576020820181803683370190505b5090508181016020015b7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff017f3031323334353637383961626364656600000000000000000000000000000000600a86061a8153600a8504945084610b5857509392505050565b60055473ffffffffffffffffffffffffffffffffffffffff1633146104f8576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e657260448201526064016106b1565b6005805473ffffffffffffffffffffffffffffffffffffffff8381167fffffffffffffffffffffffff0000000000000000000000000000000000000000831681179093556040519116919082907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e090600090a35050565b606060ff8314610cc757610cc0836118af565b905061043d565b818054610cd39061207a565b80601f0160208091040260200160405190810160405280929190818152602001828054610cff9061207a565b8015610d4c5780601f10610d2157610100808354040283529160200191610d4c565b820191906000526020600020905b815481529060010190602001808311610d2f57829003601f168201915b5050505050905061043d565b60608160008167ffffffffffffffff811115610d7657610d7661213d565b604051908082528060200260200182016040528015610dbc57816020015b604080518082019091526000815260606020820152815260200190600190039081610d945790505b50905060005b82811015610f8c5736868683818110610ddd57610ddd61200d565b9050602002810190610def919061203c565b9050366000610e0160208401846127ca565b909250905080801580610e225750610e1c6040850185612832565b90508114155b15610e59576040517f947d5a8400000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b60005b81811015610f3a57610f326040518060a0016040528087600001358152602001868685818110610e8e57610e8e61200d565b9050602002810190610ea091906126d9565b610ea99061270d565b8152602001610ebb6040890189612832565b85818110610ecb57610ecb61200d565b905060600201803603810190610ee19190612899565b8152602001610ef66080890160608a01611ff2565b73ffffffffffffffffffffffffffffffffffffffff168152602001610f2160a0890160808a016128b5565b67ffffffffffffffff1690526115eb565b600101610e5c565b50604080518082019091528435815260208101610f5784866128d0565b815250868681518110610f6c57610f6c61200d565b602002602001018190525050505050610f858160010190565b9050610dc2565b5060007f000000000000000000000000000000000000000000000000000000000000000073ffffffffffffffffffffffffffffffffffffffff166344adc90e34846040518363ffffffff1660e01b8152600401610fe99190612944565b60006040518083038185885af1158015611007573d6000803e3d6000fd5b50505050506040513d6000823e601f3d9081017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe016820160405261104e9190810190612a37565b90506000805b8481101561114b573688888381811061106f5761106f61200d565b9050602002810190611081919061203c565b905036600061109360208401846127ca565b90925090508060005b81811015611135576110b46080860160608701611ff2565b600360008a8a815181106110ca576110ca61200d565b6020026020010151815260200190815260200160002060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555086600101965061112e8160010190565b905061109c565b50505050506111448160010190565b9050611054565b50909695505050505050565b61116e61116936839003830183612ac8565b61138f565b7f000000000000000000000000000000000000000000000000000000000000000073ffffffffffffffffffffffffffffffffffffffff16634692626734604051806040016040528085600001358152602001856020018036038101906111d49190612b34565b90526040517fffffffff0000000000000000000000000000000000000000000000000000000060e085901b16815281516004820152602091820151805160248301529091015160448201526064016000604051808303818588803b15801561123b57600080fd5b505af115801561124f573d6000803e3d6000fd5b505050505050565b60003073ffffffffffffffffffffffffffffffffffffffff7f0000000000000000000000000000000000000000000000000000000000000000161480156112bd57507f000000000000000000000000000000000000000000000000000000000000000046145b156112e757507f000000000000000000000000000000000000000000000000000000000000000090565b610605604080517f8b73c3c69bb8fe3d512ecc4cf759cc79239f7b179b0ffacaa9a75d522b39400f60208201527f0000000000000000000000000000000000000000000000000000000000000000918101919091527f000000000000000000000000000000000000000000000000000000000000000060608201524660808201523060a082015260009060c00160405160208183030381529060405280519060200120905090565b608081015167ffffffffffffffff16158015906113c357504267ffffffffffffffff16816080015167ffffffffffffffff16105b156113fa576040517f1ab7da6b00000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b60208082015180516000908152600390925260409091205473ffffffffffffffffffffffffffffffffffffffff168061145f576040517fc5723b5100000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b73ffffffffffffffffffffffffffffffffffffffff811633146114ae576040517f4ca8886700000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b60408301516114bc816118ee565b606080850151855185516020808801516080808b0151604080517f78a69a78c1a55cdff5cbf949580b410778cd9e4d1ecbe6f06a7fa8dc2441b57d9581019590955273ffffffffffffffffffffffffffffffffffffffff90971696840196909652958201939093529384015260a083015267ffffffffffffffff1660c08201526000906115629060e0015b604051602081830303815290604052805190602001206119fc565b9050846060015173ffffffffffffffffffffffffffffffffffffffff1661159782846000015185602001518660400151611a44565b73ffffffffffffffffffffffffffffffffffffffff16146115e4576040517f8baa579f00000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b5050505050565b608081015167ffffffffffffffff161580159061161f57504267ffffffffffffffff16816080015167ffffffffffffffff16105b15611656576040517f1ab7da6b00000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b60208101516040820151611669816118ee565b60006117457fea02ffba7dcb45f6fc649714d23f315eef12e3b27f9a7735d8d8bf41eb2b1af160001b8560600151866000015186600001518760200151886040015189606001518a60800151805190602001208b60a001518d608001516040516020016115479a99989796959493929190998a5273ffffffffffffffffffffffffffffffffffffffff98891660208b015260408a019790975294909616606088015267ffffffffffffffff928316608088015290151560a087015260c086015260e0850193909352610100840152166101208201526101400190565b9050836060015173ffffffffffffffffffffffffffffffffffffffff1661177a82846000015185602001518660400151611a44565b73ffffffffffffffffffffffffffffffffffffffff16146117c7576040517f8baa579f00000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b50505050565b6000807a184f03e93ff9f4daa797ed6e38ed64bf6a1f0100000000000000008310611816577a184f03e93ff9f4daa797ed6e38ed64bf6a1f010000000000000000830492506040015b6d04ee2d6d415b85acef81000000008310611842576d04ee2d6d415b85acef8100000000830492506020015b662386f26fc10000831061186057662386f26fc10000830492506010015b6305f5e1008310611878576305f5e100830492506008015b612710831061188c57612710830492506004015b6064831061189e576064830492506002015b600a831061043d5760010192915050565b606060006118bc83611a6c565b604080516020808252818301909252919250600091906020820181803683375050509182525060208101929092525090565b8051602080830151604080850151905160f89490941b7fff00000000000000000000000000000000000000000000000000000000000000169284019290925260218301526041820152600090606101604051602081830303815290604052905060048160405161195e9190612b50565b9081526040519081900360200190205460ff16156119a8576040517fcce9a82400000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b60016004826040516119ba9190612b50565b90815260405190819003602001902080549115157fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff009092169190911790555050565b600061043d611a09611257565b836040517f19010000000000000000000000000000000000000000000000000000000000008152600281019290925260228201526042902090565b6000806000611a5587878787611aad565b91509150611a6281611b9c565b5095945050505050565b600060ff8216601f81111561043d576040517fb3512b0c00000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b6000807f7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a0831115611ae45750600090506003611b93565b6040805160008082526020820180845289905260ff881692820192909252606081018690526080810185905260019060a0016020604051602081039080840390855afa158015611b38573d6000803e3d6000fd5b50506040517fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0015191505073ffffffffffffffffffffffffffffffffffffffff8116611b8c57600060019250925050611b93565b9150600090505b94509492505050565b6000816004811115611bb057611bb0612b62565b03611bb85750565b6001816004811115611bcc57611bcc612b62565b03611c33576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601860248201527f45434453413a20696e76616c6964207369676e6174757265000000000000000060448201526064016106b1565b6002816004811115611c4757611c47612b62565b03611cae576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601f60248201527f45434453413a20696e76616c6964207369676e6174757265206c656e6774680060448201526064016106b1565b6003816004811115611cc257611cc2612b62565b036105f8576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152602260248201527f45434453413a20696e76616c6964207369676e6174757265202773272076616c60448201527f756500000000000000000000000000000000000000000000000000000000000060648201526084016106b1565b60008083601f840112611d6157600080fd5b50813567ffffffffffffffff811115611d7957600080fd5b6020830191508360208260051b8501011115611d9457600080fd5b9250929050565b60008060208385031215611dae57600080fd5b823567ffffffffffffffff811115611dc557600080fd5b611dd185828601611d4f565b90969095509350505050565b600060208284031215611def57600080fd5b5035919050565b60005b83811015611e11578181015183820152602001611df9565b50506000910152565b60008151808452611e32816020860160208601611df6565b601f017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0169290920160200192915050565b602081526000611e776020830184611e1a565b9392505050565b600060208284031215611e9057600080fd5b813567ffffffffffffffff811115611ea757600080fd5b820160e08185031215611e7757600080fd5b7fff00000000000000000000000000000000000000000000000000000000000000881681526000602060e081840152611ef560e084018a611e1a565b8381036040850152611f07818a611e1a565b6060850189905273ffffffffffffffffffffffffffffffffffffffff8816608086015260a0850187905284810360c0860152855180825283870192509083019060005b81811015611f6657835183529284019291840191600101611f4a565b50909c9b505050505050505050505050565b6020808252825182820181905260009190848201906040850190845b8181101561114b57835183529284019291840191600101611f94565b60006101008284031215611fc357600080fd5b50919050565b803573ffffffffffffffffffffffffffffffffffffffff81168114611fed57600080fd5b919050565b60006020828403121561200457600080fd5b611e7782611fc9565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b600082357fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff6183360301811261207057600080fd5b9190910192915050565b600181811c9082168061208e57607f821691505b602082108103611fc3577f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b600084516120d9818460208901611df6565b80830190507f2e000000000000000000000000000000000000000000000000000000000000008082528551612115816001850160208a01611df6565b60019201918201528351612130816002840160208801611df6565b0160020195945050505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b60405160a0810167ffffffffffffffff8111828210171561218f5761218f61213d565b60405290565b60405160c0810167ffffffffffffffff8111828210171561218f5761218f61213d565b604051601f82017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe016810167ffffffffffffffff811182821017156121ff576121ff61213d565b604052919050565b600067ffffffffffffffff8211156122215761222161213d565b5060051b60200190565b60006040828403121561223d57600080fd5b6040516040810181811067ffffffffffffffff821117156122605761226061213d565b604052823581526020928301359281019290925250919050565b60006060828403121561228c57600080fd5b6040516060810181811067ffffffffffffffff821117156122af576122af61213d565b604052905080823560ff811681146122c657600080fd5b8082525060208301356020820152604083013560408201525092915050565b600082601f8301126122f657600080fd5b8135602061230b61230683612207565b6121b8565b8281526060928302850182019282820191908785111561232a57600080fd5b8387015b8581101561234d57612340898261227a565b845292840192810161232e565b5090979650505050505050565b803567ffffffffffffffff81168114611fed57600080fd5b600060a0823603121561238457600080fd5b61238c61216c565b8235815260208084013567ffffffffffffffff808211156123ac57600080fd5b9085019036601f8301126123bf57600080fd5b81356123cd61230682612207565b81815260069190911b830184019084810190368311156123ec57600080fd5b938501935b8285101561241557612403368661222b565b825285820191506040850194506123f1565b8086880152505050604086013592508083111561243157600080fd5b505061243f368286016122e5565b60408301525061245160608401611fc9565b60608201526124626080840161235a565b608082015292915050565b60006020808301818452808551808352604092508286019150828160051b8701018488016000805b8481101561252d578984037fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc0018652825180518552880151888501889052805188860181905290890190839060608701905b808310156125185761250482855180518252602090810151910152565b928b019260019290920191908a01906124e7565b50978a01979550505091870191600101612495565b50919998505050505050505050565b600082601f83011261254d57600080fd5b813567ffffffffffffffff8111156125675761256761213d565b61259860207fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0601f840116016121b8565b8181528460208386010111156125ad57600080fd5b816020850160208301376000918101602001919091529392505050565b600060c082840312156125dc57600080fd5b6125e4612195565b90506125ef82611fc9565b81526125fd6020830161235a565b60208201526040820135801515811461261557600080fd5b604082015260608281013590820152608082013567ffffffffffffffff81111561263e57600080fd5b61264a8482850161253c565b60808301525060a082013560a082015292915050565b600060e0823603121561267257600080fd5b61267a61216c565b82358152602083013567ffffffffffffffff81111561269857600080fd5b6126a4368286016125ca565b6020830152506126b7366040850161227a565b60408201526126c860a08401611fc9565b606082015261246260c0840161235a565b600082357fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff4183360301811261207057600080fd5b600061043d36836125ca565b73ffffffffffffffffffffffffffffffffffffffff815116825267ffffffffffffffff6020820151166020830152604081015115156040830152606081015160608301526000608082015160c0608085015261277860c0850182611e1a565b60a093840151949093019390935250919050565b6020815281516020820152600060208301516040808401526105d46060840182612719565b6000602082840312156127c357600080fd5b5051919050565b60008083357fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe18436030181126127ff57600080fd5b83018035915067ffffffffffffffff82111561281a57600080fd5b6020019150600581901b3603821315611d9457600080fd5b60008083357fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe184360301811261286757600080fd5b83018035915067ffffffffffffffff82111561288257600080fd5b6020019150606081023603821315611d9457600080fd5b6000606082840312156128ab57600080fd5b611e77838361227a565b6000602082840312156128c757600080fd5b611e778261235a565b60006128de61230684612207565b80848252602080830192508560051b8501368111156128fc57600080fd5b855b8181101561293857803567ffffffffffffffff81111561291e5760008081fd5b61292a36828a016125ca565b8652509382019382016128fe565b50919695505050505050565b602080825282518282018190526000919060409081850190600581811b8701840188860187805b85811015612a27577fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc08b85030187528251805185528901518985018990528051898601819052908a0190606081881b870181019190870190855b81811015612a11577fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa08985030183526129ff848651612719565b948e01949350918d01916001016129c5565b505050978a01979450509188019160010161296b565b50919a9950505050505050505050565b60006020808385031215612a4a57600080fd5b825167ffffffffffffffff811115612a6157600080fd5b8301601f81018513612a7257600080fd5b8051612a8061230682612207565b81815260059190911b82018301908381019087831115612a9f57600080fd5b928401925b82841015612abd57835182529284019290840190612aa4565b979650505050505050565b60006101008284031215612adb57600080fd5b612ae361216c565b82358152612af4846020850161222b565b6020820152612b06846060850161227a565b6040820152612b1760c08401611fc9565b6060820152612b2860e0840161235a565b60808201529392505050565b600060408284031215612b4657600080fd5b611e77838361222b565b60008251612070818460208701611df6565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602160045260246000fdfea164736f6c6343000813000a";const isSuperArgs$e=e=>e.length>1;class PermissionedEIP712Proxy__factory extends ethers_1$l.ContractFactory{constructor(...e){if(isSuperArgs$e(e)){super(...e)}else{super(_abi$j,_bytecode$e,e[0])}}getDeployTransaction(e,t,r){return super.getDeployTransaction(e,t,r||{})}deploy(e,t,r){return super.deploy(e,t,r||{})}connect(e){return super.connect(e)}static bytecode=_bytecode$e;static abi=_abi$j;static createInterface(){return new ethers_1$l.Interface(_abi$j)}static connect(e,t){return new ethers_1$l.Contract(e,_abi$j,t)}}PermissionedEIP712Proxy__factory$1.PermissionedEIP712Proxy__factory=PermissionedEIP712Proxy__factory;(function(e){Object.defineProperty(e,"__esModule",{value:true});e.PermissionedEIP712Proxy__factory=void 0;var t=PermissionedEIP712Proxy__factory$1;Object.defineProperty(e,"PermissionedEIP712Proxy__factory",{enumerable:true,get:function(){return t.PermissionedEIP712Proxy__factory}})})(examples$1);var EIP712Proxy__factory$1={};Object.defineProperty(EIP712Proxy__factory$1,"__esModule",{value:true});EIP712Proxy__factory$1.EIP712Proxy__factory=void 0;const ethers_1$k=require$$0;const _abi$i=[{inputs:[{internalType:"contract IEAS",name:"eas",type:"address"},{internalType:"string",name:"name",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"AccessDenied",type:"error"},{inputs:[],name:"DeadlineExpired",type:"error"},{inputs:[],name:"InvalidEAS",type:"error"},{inputs:[],name:"InvalidLength",type:"error"},{inputs:[],name:"InvalidShortString",type:"error"},{inputs:[],name:"InvalidSignature",type:"error"},{inputs:[],name:"NotFound",type:"error"},{inputs:[{internalType:"string",name:"str",type:"string"}],name:"StringTooLong",type:"error"},{inputs:[],name:"UsedSignature",type:"error"},{anonymous:false,inputs:[],name:"EIP712DomainChanged",type:"event"},{inputs:[{components:[{internalType:"bytes32",name:"schema",type:"bytes32"},{components:[{internalType:"address",name:"recipient",type:"address"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"bytes",name:"data",type:"bytes"},{internalType:"uint256",name:"value",type:"uint256"}],internalType:"struct AttestationRequestData",name:"data",type:"tuple"},{components:[{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],internalType:"struct Signature",name:"signature",type:"tuple"},{internalType:"address",name:"attester",type:"address"},{internalType:"uint64",name:"deadline",type:"uint64"}],internalType:"struct DelegatedProxyAttestationRequest",name:"delegatedRequest",type:"tuple"}],name:"attestByDelegation",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"payable",type:"function"},{inputs:[],name:"eip712Domain",outputs:[{internalType:"bytes1",name:"fields",type:"bytes1"},{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"version",type:"string"},{internalType:"uint256",name:"chainId",type:"uint256"},{internalType:"address",name:"verifyingContract",type:"address"},{internalType:"bytes32",name:"salt",type:"bytes32"},{internalType:"uint256[]",name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getAttestTypeHash",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"bytes32",name:"uid",type:"bytes32"}],name:"getAttester",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getDomainSeparator",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"getEAS",outputs:[{internalType:"contract IEAS",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getName",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"getRevokeTypeHash",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"schema",type:"bytes32"},{components:[{internalType:"address",name:"recipient",type:"address"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"bytes",name:"data",type:"bytes"},{internalType:"uint256",name:"value",type:"uint256"}],internalType:"struct AttestationRequestData[]",name:"data",type:"tuple[]"},{components:[{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],internalType:"struct Signature[]",name:"signatures",type:"tuple[]"},{internalType:"address",name:"attester",type:"address"},{internalType:"uint64",name:"deadline",type:"uint64"}],internalType:"struct MultiDelegatedProxyAttestationRequest[]",name:"multiDelegatedRequests",type:"tuple[]"}],name:"multiAttestByDelegation",outputs:[{internalType:"bytes32[]",name:"",type:"bytes32[]"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"schema",type:"bytes32"},{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"uint256",name:"value",type:"uint256"}],internalType:"struct RevocationRequestData[]",name:"data",type:"tuple[]"},{components:[{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],internalType:"struct Signature[]",name:"signatures",type:"tuple[]"},{internalType:"address",name:"revoker",type:"address"},{internalType:"uint64",name:"deadline",type:"uint64"}],internalType:"struct MultiDelegatedProxyRevocationRequest[]",name:"multiDelegatedRequests",type:"tuple[]"}],name:"multiRevokeByDelegation",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"schema",type:"bytes32"},{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"uint256",name:"value",type:"uint256"}],internalType:"struct RevocationRequestData",name:"data",type:"tuple"},{components:[{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],internalType:"struct Signature",name:"signature",type:"tuple"},{internalType:"address",name:"revoker",type:"address"},{internalType:"uint64",name:"deadline",type:"uint64"}],internalType:"struct DelegatedProxyRevocationRequest",name:"delegatedRequest",type:"tuple"}],name:"revokeByDelegation",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"version",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}];const _bytecode$d="0x6101e06040523480156200001257600080fd5b5060405162002d9f38038062002d9f83398101604081905262000035916200022c565b6040805180820190915260058152640312e332e360dc1b60208201526001608052600360a052600060c0819052829190620000729083906200016b565b61018052620000838160016200016b565b6101a052815160208084019190912061014052815190820120610160524661010052620001146101405161016051604080517f8b73c3c69bb8fe3d512ecc4cf759cc79239f7b179b0ffacaa9a75d522b39400f60208201529081019290925260608201524660808201523060a082015260009060c00160405160208183030381529060405280519060200120905090565b60e052505030610120526001600160a01b03821662000146576040516341bc07ff60e11b815260040160405180910390fd5b6001600160a01b0382166101c052600262000162828262000396565b505050620004bc565b60006020835110156200018b576200018383620001a4565b90506200019e565b8162000198848262000396565b5060ff90505b92915050565b600080829050601f81511115620001db578260405163305a27a960e01b8152600401620001d2919062000462565b60405180910390fd5b8051620001e88262000497565b179392505050565b634e487b7160e01b600052604160045260246000fd5b60005b838110156200022357818101518382015260200162000209565b50506000910152565b600080604083850312156200024057600080fd5b82516001600160a01b03811681146200025857600080fd5b60208401519092506001600160401b03808211156200027657600080fd5b818501915085601f8301126200028b57600080fd5b815181811115620002a057620002a0620001f0565b604051601f8201601f19908116603f01168101908382118183101715620002cb57620002cb620001f0565b81604052828152886020848701011115620002e557600080fd5b620002f883602083016020880162000206565b80955050505050509250929050565b600181811c908216806200031c57607f821691505b6020821081036200033d57634e487b7160e01b600052602260045260246000fd5b50919050565b601f8211156200039157600081815260208120601f850160051c810160208610156200036c5750805b601f850160051c820191505b818110156200038d5782815560010162000378565b5050505b505050565b81516001600160401b03811115620003b257620003b2620001f0565b620003ca81620003c3845462000307565b8462000343565b602080601f831160018114620004025760008415620003e95750858301515b600019600386901b1c1916600185901b1785556200038d565b600085815260208120601f198616915b82811015620004335788860151825594840194600190910190840162000412565b5085821015620004525787850151600019600388901b60f8161c191681555b5050505050600190811b01905550565b60208152600082518060208401526200048381604085016020870162000206565b601f01601f19169190910160400192915050565b805160208083015191908110156200033d5760001960209190910360031b1b16919050565b60805160a05160c05160e05161010051610120516101405161016051610180516101a0516101c0516128406200055f600039600081816101e4015281816104d1015281816105e901528181610a9d0152610c7e015260006107f8015260006107ce01526000611402015260006113da015260006113350152600061135f01526000611389015260006107760152600061074d0152600061072401526128406000f3fe6080604052600436106100c75760003560e01c806365c40b9c11610074578063a6d4dbc71161004e578063a6d4dbc714610250578063b83010d314610263578063ed24911d1461029657600080fd5b806365c40b9c146101d557806384b0196e14610208578063954115251461023057600080fd5b806317d7de7c116100a557806317d7de7c1461018b5780633c042715146101ad57806354fd4d50146101c057600080fd5b80630eabf660146100cc57806310d736d5146100e157806312b11a171461014e575b600080fd5b6100df6100da366004611a29565b6102ab565b005b3480156100ed57600080fd5b506101246100fc366004611a6b565b60009081526003602052604090205473ffffffffffffffffffffffffffffffffffffffff1690565b60405173ffffffffffffffffffffffffffffffffffffffff90911681526020015b60405180910390f35b34801561015a57600080fd5b507fea02ffba7dcb45f6fc649714d23f315eef12e3b27f9a7735d8d8bf41eb2b1af15b604051908152602001610145565b34801561019757600080fd5b506101a0610540565b6040516101459190611af2565b61017d6101bb366004611b0c565b6105d2565b3480156101cc57600080fd5b506101a061071d565b3480156101e157600080fd5b507f0000000000000000000000000000000000000000000000000000000000000000610124565b34801561021457600080fd5b5061021d6107c0565b6040516101459796959493929190611b47565b61024361023e366004611a29565b610864565b6040516101459190611c06565b6100df61025e366004611c4a565b610c65565b34801561026f57600080fd5b507f78a69a78c1a55cdff5cbf949580b410778cd9e4d1ecbe6f06a7fa8dc2441b57d61017d565b3480156102a257600080fd5b5061017d610d65565b8060008167ffffffffffffffff8111156102c7576102c7611c63565b60405190808252806020026020018201604052801561030d57816020015b6040805180820190915260008152606060208201528152602001906001900390816102e55790505b50905060005b8281101561049357600085858381811061032f5761032f611c92565b90506020028101906103419190611cc1565b61034a90611f2e565b602081015180519192509080158061036757508260400151518114155b1561039e576040517f947d5a8400000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b60005b818110156104485760008382815181106103bd576103bd611c92565b6020026020010151905061043f6040518060a0016040528087600001518152602001838152602001876040015185815181106103fb576103fb611c92565b60200260200101518152602001876060015173ffffffffffffffffffffffffffffffffffffffff168152602001876080015167ffffffffffffffff16815250610d74565b506001016103a1565b506040518060400160405280846000015181526020018381525085858151811061047457610474611c92565b602002602001018190525050505061048c8160010190565b9050610313565b506040517f4cb7e9e500000000000000000000000000000000000000000000000000000000815273ffffffffffffffffffffffffffffffffffffffff7f00000000000000000000000000000000000000000000000000000000000000001690634cb7e9e5903490610508908590600401612029565b6000604051808303818588803b15801561052157600080fd5b505af1158015610535573d6000803e3d6000fd5b505050505050505050565b60606002805461054f906120f8565b80601f016020809104026020016040519081016040528092919081815260200182805461057b906120f8565b80156105c85780601f1061059d576101008083540402835291602001916105c8565b820191906000526020600020905b8154815290600101906020018083116105ab57829003601f168201915b5050505050905090565b60006105e56105e083612269565b610fd0565b60007f000000000000000000000000000000000000000000000000000000000000000073ffffffffffffffffffffffffffffffffffffffff1663f17325e73460405180604001604052808760000135815260200187806020019061064991906122e2565b61065290612316565b8152506040518363ffffffff1660e01b81526004016106719190612395565b60206040518083038185885af115801561068f573d6000803e3d6000fd5b50505050506040513d601f19601f820116820180604052508101906106b491906123c2565b90506106c660c0840160a085016123db565b600082815260036020526040902080547fffffffffffffffffffffffff00000000000000000000000000000000000000001673ffffffffffffffffffffffffffffffffffffffff9290921691909117905592915050565b60606107487f00000000000000000000000000000000000000000000000000000000000000006111b2565b6107717f00000000000000000000000000000000000000000000000000000000000000006111b2565b61079a7f00000000000000000000000000000000000000000000000000000000000000006111b2565b6040516020016107ac939291906123f6565b604051602081830303815290604052905090565b6000606080828080836107f37f000000000000000000000000000000000000000000000000000000000000000083611270565b61081e7f00000000000000000000000000000000000000000000000000000000000000006001611270565b604080516000808252602082019092527f0f000000000000000000000000000000000000000000000000000000000000009b939a50919850469750309650945092509050565b60608160008167ffffffffffffffff81111561088257610882611c63565b6040519080825280602002602001820160405280156108c857816020015b6040805180820190915260008152606060208201528152602001906001900390816108a05790505b50905060005b82811015610a9857368686838181106108e9576108e9611c92565b90506020028101906108fb9190611cc1565b905036600061090d602084018461246c565b90925090508080158061092e575061092860408501856124d4565b90508114155b15610965576040517f947d5a8400000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b60005b81811015610a4657610a3e6040518060a001604052808760000135815260200186868581811061099a5761099a611c92565b90506020028101906109ac91906122e2565b6109b590612316565b81526020016109c760408901896124d4565b858181106109d7576109d7611c92565b9050606002018036038101906109ed919061253b565b8152602001610a026080890160608a016123db565b73ffffffffffffffffffffffffffffffffffffffff168152602001610a2d60a0890160808a01612557565b67ffffffffffffffff169052610fd0565b600101610968565b50604080518082019091528435815260208101610a638486612572565b815250868681518110610a7857610a78611c92565b602002602001018190525050505050610a918160010190565b90506108ce565b5060007f000000000000000000000000000000000000000000000000000000000000000073ffffffffffffffffffffffffffffffffffffffff166344adc90e34846040518363ffffffff1660e01b8152600401610af591906125e6565b60006040518083038185885af1158015610b13573d6000803e3d6000fd5b50505050506040513d6000823e601f3d9081017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0168201604052610b5a91908101906126d9565b90506000805b84811015610c575736888883818110610b7b57610b7b611c92565b9050602002810190610b8d9190611cc1565b9050366000610b9f602084018461246c565b90925090508060005b81811015610c4157610bc060808601606087016123db565b600360008a8a81518110610bd657610bd6611c92565b6020026020010151815260200190815260200160002060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550866001019650610c3a8160010190565b9050610ba8565b5050505050610c508160010190565b9050610b60565b509093505050505b92915050565b610c7c610c773683900383018361276a565b610d74565b7f000000000000000000000000000000000000000000000000000000000000000073ffffffffffffffffffffffffffffffffffffffff1663469262673460405180604001604052808560000135815260200185602001803603810190610ce291906127d6565b90526040517fffffffff0000000000000000000000000000000000000000000000000000000060e085901b16815281516004820152602091820151805160248301529091015160448201526064016000604051808303818588803b158015610d4957600080fd5b505af1158015610d5d573d6000803e3d6000fd5b505050505050565b6000610d6f61131b565b905090565b608081015167ffffffffffffffff1615801590610da857504267ffffffffffffffff16816080015167ffffffffffffffff16105b15610ddf576040517f1ab7da6b00000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b60208082015180516000908152600390925260409091205473ffffffffffffffffffffffffffffffffffffffff1680610e44576040517fc5723b5100000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b73ffffffffffffffffffffffffffffffffffffffff81163314610e93576040517f4ca8886700000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b6040830151610ea181611453565b606080850151855185516020808801516080808b0151604080517f78a69a78c1a55cdff5cbf949580b410778cd9e4d1ecbe6f06a7fa8dc2441b57d9581019590955273ffffffffffffffffffffffffffffffffffffffff90971696840196909652958201939093529384015260a083015267ffffffffffffffff1660c0820152600090610f479060e0015b60405160208183030381529060405280519060200120611561565b9050846060015173ffffffffffffffffffffffffffffffffffffffff16610f7c828460000151856020015186604001516115a9565b73ffffffffffffffffffffffffffffffffffffffff1614610fc9576040517f8baa579f00000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b5050505050565b608081015167ffffffffffffffff161580159061100457504267ffffffffffffffff16816080015167ffffffffffffffff16105b1561103b576040517f1ab7da6b00000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b6020810151604082015161104e81611453565b600061112a7fea02ffba7dcb45f6fc649714d23f315eef12e3b27f9a7735d8d8bf41eb2b1af160001b8560600151866000015186600001518760200151886040015189606001518a60800151805190602001208b60a001518d60800151604051602001610f2c9a99989796959493929190998a5273ffffffffffffffffffffffffffffffffffffffff98891660208b015260408a019790975294909616606088015267ffffffffffffffff928316608088015290151560a087015260c086015260e0850193909352610100840152166101208201526101400190565b9050836060015173ffffffffffffffffffffffffffffffffffffffff1661115f828460000151856020015186604001516115a9565b73ffffffffffffffffffffffffffffffffffffffff16146111ac576040517f8baa579f00000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b50505050565b606060006111bf836115d1565b600101905060008167ffffffffffffffff8111156111df576111df611c63565b6040519080825280601f01601f191660200182016040528015611209576020820181803683370190505b5090508181016020015b7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff017f3031323334353637383961626364656600000000000000000000000000000000600a86061a8153600a850494508461121357509392505050565b606060ff831461128a57611283836116b3565b9050610c5f565b818054611296906120f8565b80601f01602080910402602001604051908101604052809291908181526020018280546112c2906120f8565b801561130f5780601f106112e45761010080835404028352916020019161130f565b820191906000526020600020905b8154815290600101906020018083116112f257829003601f168201915b50505050509050610c5f565b60003073ffffffffffffffffffffffffffffffffffffffff7f00000000000000000000000000000000000000000000000000000000000000001614801561138157507f000000000000000000000000000000000000000000000000000000000000000046145b156113ab57507f000000000000000000000000000000000000000000000000000000000000000090565b610d6f604080517f8b73c3c69bb8fe3d512ecc4cf759cc79239f7b179b0ffacaa9a75d522b39400f60208201527f0000000000000000000000000000000000000000000000000000000000000000918101919091527f000000000000000000000000000000000000000000000000000000000000000060608201524660808201523060a082015260009060c00160405160208183030381529060405280519060200120905090565b8051602080830151604080850151905160f89490941b7fff0000000000000000000000000000000000000000000000000000000000000016928401929092526021830152604182015260009060610160405160208183030381529060405290506004816040516114c391906127f2565b9081526040519081900360200190205460ff161561150d576040517fcce9a82400000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b600160048260405161151f91906127f2565b90815260405190819003602001902080549115157fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff009092169190911790555050565b6000610c5f61156e61131b565b836040517f19010000000000000000000000000000000000000000000000000000000000008152600281019290925260228201526042902090565b60008060006115ba878787876116f2565b915091506115c7816117e1565b5095945050505050565b6000807a184f03e93ff9f4daa797ed6e38ed64bf6a1f010000000000000000831061161a577a184f03e93ff9f4daa797ed6e38ed64bf6a1f010000000000000000830492506040015b6d04ee2d6d415b85acef81000000008310611646576d04ee2d6d415b85acef8100000000830492506020015b662386f26fc10000831061166457662386f26fc10000830492506010015b6305f5e100831061167c576305f5e100830492506008015b612710831061169057612710830492506004015b606483106116a2576064830492506002015b600a8310610c5f5760010192915050565b606060006116c08361199c565b604080516020808252818301909252919250600091906020820181803683375050509182525060208101929092525090565b6000807f7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a083111561172957506000905060036117d8565b6040805160008082526020820180845289905260ff881692820192909252606081018690526080810185905260019060a0016020604051602081039080840390855afa15801561177d573d6000803e3d6000fd5b50506040517fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0015191505073ffffffffffffffffffffffffffffffffffffffff81166117d1576000600192509250506117d8565b9150600090505b94509492505050565b60008160048111156117f5576117f5612804565b036117fd5750565b600181600481111561181157611811612804565b0361187d576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601860248201527f45434453413a20696e76616c6964207369676e6174757265000000000000000060448201526064015b60405180910390fd5b600281600481111561189157611891612804565b036118f8576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601f60248201527f45434453413a20696e76616c6964207369676e6174757265206c656e677468006044820152606401611874565b600381600481111561190c5761190c612804565b03611999576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152602260248201527f45434453413a20696e76616c6964207369676e6174757265202773272076616c60448201527f75650000000000000000000000000000000000000000000000000000000000006064820152608401611874565b50565b600060ff8216601f811115610c5f576040517fb3512b0c00000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b60008083601f8401126119ef57600080fd5b50813567ffffffffffffffff811115611a0757600080fd5b6020830191508360208260051b8501011115611a2257600080fd5b9250929050565b60008060208385031215611a3c57600080fd5b823567ffffffffffffffff811115611a5357600080fd5b611a5f858286016119dd565b90969095509350505050565b600060208284031215611a7d57600080fd5b5035919050565b60005b83811015611a9f578181015183820152602001611a87565b50506000910152565b60008151808452611ac0816020860160208601611a84565b601f017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0169290920160200192915050565b602081526000611b056020830184611aa8565b9392505050565b600060208284031215611b1e57600080fd5b813567ffffffffffffffff811115611b3557600080fd5b820160e08185031215611b0557600080fd5b7fff00000000000000000000000000000000000000000000000000000000000000881681526000602060e081840152611b8360e084018a611aa8565b8381036040850152611b95818a611aa8565b6060850189905273ffffffffffffffffffffffffffffffffffffffff8816608086015260a0850187905284810360c0860152855180825283870192509083019060005b81811015611bf457835183529284019291840191600101611bd8565b50909c9b505050505050505050505050565b6020808252825182820181905260009190848201906040850190845b81811015611c3e57835183529284019291840191600101611c22565b50909695505050505050565b60006101008284031215611c5d57600080fd5b50919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b600082357fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff61833603018112611cf557600080fd5b9190910192915050565b60405160a0810167ffffffffffffffff81118282101715611d2257611d22611c63565b60405290565b60405160c0810167ffffffffffffffff81118282101715611d2257611d22611c63565b604051601f82017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe016810167ffffffffffffffff81118282101715611d9257611d92611c63565b604052919050565b600067ffffffffffffffff821115611db457611db4611c63565b5060051b60200190565b600060408284031215611dd057600080fd5b6040516040810181811067ffffffffffffffff82111715611df357611df3611c63565b604052823581526020928301359281019290925250919050565b600060608284031215611e1f57600080fd5b6040516060810181811067ffffffffffffffff82111715611e4257611e42611c63565b604052905080823560ff81168114611e5957600080fd5b8082525060208301356020820152604083013560408201525092915050565b600082601f830112611e8957600080fd5b81356020611e9e611e9983611d9a565b611d4b565b82815260609283028501820192828201919087851115611ebd57600080fd5b8387015b85811015611ee057611ed38982611e0d565b8452928401928101611ec1565b5090979650505050505050565b803573ffffffffffffffffffffffffffffffffffffffff81168114611f1157600080fd5b919050565b803567ffffffffffffffff81168114611f1157600080fd5b600060a08236031215611f4057600080fd5b611f48611cff565b8235815260208084013567ffffffffffffffff80821115611f6857600080fd5b9085019036601f830112611f7b57600080fd5b8135611f89611e9982611d9a565b81815260069190911b83018401908481019036831115611fa857600080fd5b938501935b82851015611fd157611fbf3686611dbe565b82528582019150604085019450611fad565b80868801525050506040860135925080831115611fed57600080fd5b5050611ffb36828601611e78565b60408301525061200d60608401611eed565b606082015261201e60808401611f16565b608082015292915050565b60006020808301818452808551808352604092508286019150828160051b8701018488016000805b848110156120e9578984037fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc0018652825180518552880151888501889052805188860181905290890190839060608701905b808310156120d4576120c082855180518252602090810151910152565b928b019260019290920191908a01906120a3565b50978a01979550505091870191600101612051565b50919998505050505050505050565b600181811c9082168061210c57607f821691505b602082108103611c5d577f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b600082601f83011261215657600080fd5b813567ffffffffffffffff81111561217057612170611c63565b6121a160207fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0601f84011601611d4b565b8181528460208386010111156121b657600080fd5b816020850160208301376000918101602001919091529392505050565b600060c082840312156121e557600080fd5b6121ed611d28565b90506121f882611eed565b815261220660208301611f16565b60208201526040820135801515811461221e57600080fd5b604082015260608281013590820152608082013567ffffffffffffffff81111561224757600080fd5b61225384828501612145565b60808301525060a082013560a082015292915050565b600060e0823603121561227b57600080fd5b612283611cff565b82358152602083013567ffffffffffffffff8111156122a157600080fd5b6122ad368286016121d3565b6020830152506122c03660408501611e0d565b60408201526122d160a08401611eed565b606082015261201e60c08401611f16565b600082357fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff41833603018112611cf557600080fd5b6000610c5f36836121d3565b73ffffffffffffffffffffffffffffffffffffffff815116825267ffffffffffffffff6020820151166020830152604081015115156040830152606081015160608301526000608082015160c0608085015261238160c0850182611aa8565b60a093840151949093019390935250919050565b6020815281516020820152600060208301516040808401526123ba6060840182612322565b949350505050565b6000602082840312156123d457600080fd5b5051919050565b6000602082840312156123ed57600080fd5b611b0582611eed565b60008451612408818460208901611a84565b80830190507f2e000000000000000000000000000000000000000000000000000000000000008082528551612444816001850160208a01611a84565b6001920191820152835161245f816002840160208801611a84565b0160020195945050505050565b60008083357fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe18436030181126124a157600080fd5b83018035915067ffffffffffffffff8211156124bc57600080fd5b6020019150600581901b3603821315611a2257600080fd5b60008083357fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe184360301811261250957600080fd5b83018035915067ffffffffffffffff82111561252457600080fd5b6020019150606081023603821315611a2257600080fd5b60006060828403121561254d57600080fd5b611b058383611e0d565b60006020828403121561256957600080fd5b611b0582611f16565b6000612580611e9984611d9a565b80848252602080830192508560051b85013681111561259e57600080fd5b855b818110156125da57803567ffffffffffffffff8111156125c05760008081fd5b6125cc36828a016121d3565b8652509382019382016125a0565b50919695505050505050565b602080825282518282018190526000919060409081850190600581811b8701840188860187805b858110156126c9577fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc08b85030187528251805185528901518985018990528051898601819052908a0190606081881b870181019190870190855b818110156126b3577fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa08985030183526126a1848651612322565b948e01949350918d0191600101612667565b505050978a01979450509188019160010161260d565b50919a9950505050505050505050565b600060208083850312156126ec57600080fd5b825167ffffffffffffffff81111561270357600080fd5b8301601f8101851361271457600080fd5b8051612722611e9982611d9a565b81815260059190911b8201830190838101908783111561274157600080fd5b928401925b8284101561275f57835182529284019290840190612746565b979650505050505050565b6000610100828403121561277d57600080fd5b612785611cff565b823581526127968460208501611dbe565b60208201526127a88460608501611e0d565b60408201526127b960c08401611eed565b60608201526127ca60e08401611f16565b60808201529392505050565b6000604082840312156127e857600080fd5b611b058383611dbe565b60008251611cf5818460208701611a84565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602160045260246000fdfea164736f6c6343000813000a";const isSuperArgs$d=e=>e.length>1;class EIP712Proxy__factory extends ethers_1$k.ContractFactory{constructor(...e){if(isSuperArgs$d(e)){super(...e)}else{super(_abi$i,_bytecode$d,e[0])}}getDeployTransaction(e,t,r){return super.getDeployTransaction(e,t,r||{})}deploy(e,t,r){return super.deploy(e,t,r||{})}connect(e){return super.connect(e)}static bytecode=_bytecode$d;static abi=_abi$i;static createInterface(){return new ethers_1$k.Interface(_abi$i)}static connect(e,t){return new ethers_1$k.Contract(e,_abi$i,t)}}EIP712Proxy__factory$1.EIP712Proxy__factory=EIP712Proxy__factory;(function(e){var t=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[r]}}}Object.defineProperty(e,n,i)}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var r=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var n=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var n={};if(e!=null)for(var i in e)if(i!=="default"&&Object.prototype.hasOwnProperty.call(e,i))t(n,e,i);r(n,e);return n};Object.defineProperty(e,"__esModule",{value:true});e.EIP712Proxy__factory=e.examples=void 0;e.examples=n(examples$1);var i=EIP712Proxy__factory$1;Object.defineProperty(e,"EIP712Proxy__factory",{enumerable:true,get:function(){return i.EIP712Proxy__factory}})})(proxy);var __createBinding$1=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[r]}}}Object.defineProperty(e,n,i)}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var __setModuleDefault$1=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var __importStar$1=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)if(r!=="default"&&Object.prototype.hasOwnProperty.call(e,r))__createBinding$1(t,e,r);__setModuleDefault$1(t,e);return t};Object.defineProperty(eip712,"__esModule",{value:true});eip712.proxy=void 0;eip712.proxy=__importStar$1(proxy);var resolver={};var examples={};var AttestationResolver__factory$1={};Object.defineProperty(AttestationResolver__factory$1,"__esModule",{value:true});AttestationResolver__factory$1.AttestationResolver__factory=void 0;const ethers_1$j=require$$0;const _abi$h=[{inputs:[{internalType:"contract IEAS",name:"eas",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"AccessDenied",type:"error"},{inputs:[],name:"InsufficientValue",type:"error"},{inputs:[],name:"InvalidEAS",type:"error"},{inputs:[],name:"InvalidLength",type:"error"},{inputs:[],name:"NotPayable",type:"error"},{inputs:[],name:"OutOfBounds",type:"error"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation",name:"attestation",type:"tuple"}],name:"attest",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[],name:"isPayable",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"pure",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation[]",name:"attestations",type:"tuple[]"},{internalType:"uint256[]",name:"values",type:"uint256[]"}],name:"multiAttest",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation[]",name:"attestations",type:"tuple[]"},{internalType:"uint256[]",name:"values",type:"uint256[]"}],name:"multiRevoke",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation",name:"attestation",type:"tuple"}],name:"revoke",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes",name:"data",type:"bytes"},{internalType:"uint256",name:"start",type:"uint256"}],name:"toBytes32",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"},{inputs:[],name:"version",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{stateMutability:"payable",type:"receive"}];const _bytecode$c="0x61010060405234801561001157600080fd5b50604051610c55380380610c5583398101604081905261003091610079565b6001608052600360a052600060c052806001600160a01b038116610067576040516341bc07ff60e11b815260040160405180910390fd5b6001600160a01b031660e052506100a9565b60006020828403121561008b57600080fd5b81516001600160a01b03811681146100a257600080fd5b9392505050565b60805160a05160c05160e051610b6c6100e96000396000818161051e0152610590015260006101d2015260006101a9015260006101800152610b6c6000f3fe6080604052600436106100745760003560e01c806399dd9bd71161004e57806399dd9bd714610111578063ce46e0461461013f578063e49617e114610153578063e60c35051461016657600080fd5b806354fd4d50146100b057806388e5b2d9146100db57806391db0b7e146100fe57600080fd5b366100ab576040517f1574f9f300000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b600080fd5b3480156100bc57600080fd5b506100c5610179565b6040516100d291906107ae565b60405180910390f35b6100ee6100e936600461084b565b61021c565b60405190151581526020016100d2565b6100ee61010c36600461084b565b61031d565b34801561011d57600080fd5b5061013161012c3660046108e6565b61040e565b6040519081526020016100d2565b34801561014b57600080fd5b5060006100ee565b6100ee6101613660046109b9565b610421565b6100ee6101743660046109b9565b610434565b60606101a47f0000000000000000000000000000000000000000000000000000000000000000610448565b6101cd7f0000000000000000000000000000000000000000000000000000000000000000610448565b6101f67f0000000000000000000000000000000000000000000000000000000000000000610448565b604051602001610208939291906109f5565b604051602081830303815290604052905090565b6000610226610506565b83828114610260576040517f947d5a8400000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b3460005b8281101561030d57600086868381811061028057610280610a6b565b905060200201359050828111156102c3576040517f1101129400000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b6102f08989848181106102d8576102d8610a6b565b90506020028101906102ea9190610a9a565b50600190565b610301576000945050505050610315565b90910390600101610264565b506001925050505b949350505050565b6000610327610506565b83828114610361576040517f947d5a8400000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b3460005b8281101561030d57600086868381811061038157610381610a6b565b905060200201359050828111156103c4576040517f1101129400000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b6103f18989848181106103d9576103d9610a6b565b90506020028101906103eb9190610a9a565b82610577565b610402576000945050505050610315565b90910390600101610365565b600061041a838361065f565b9392505050565b600061042b610506565b60015b92915050565b600061043e610506565b61042e8234610577565b60606000610455836106a8565b600101905060008167ffffffffffffffff811115610475576104756108b7565b6040519080825280601f01601f19166020018201604052801561049f576020820181803683370190505b5090508181016020015b7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff017f3031323334353637383961626364656600000000000000000000000000000000600a86061a8153600a85049450846104a957509392505050565b3373ffffffffffffffffffffffffffffffffffffffff7f00000000000000000000000000000000000000000000000000000000000000001614610575576040517f4ca8886700000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b565b600073ffffffffffffffffffffffffffffffffffffffff7f00000000000000000000000000000000000000000000000000000000000000001663e30bb5636106006105c6610120870187610ad8565b8080601f0160208091040260200160405190810160405280939291908181526020018383808284376000920182905250925061065f915050565b6040518263ffffffff1660e01b815260040161061e91815260200190565b602060405180830381865afa15801561063b573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061041a9190610b3d565b6000816020018351101561069f576040517fb4120f1400000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b50016020015190565b6000807a184f03e93ff9f4daa797ed6e38ed64bf6a1f01000000000000000083106106f1577a184f03e93ff9f4daa797ed6e38ed64bf6a1f010000000000000000830492506040015b6d04ee2d6d415b85acef8100000000831061071d576d04ee2d6d415b85acef8100000000830492506020015b662386f26fc10000831061073b57662386f26fc10000830492506010015b6305f5e1008310610753576305f5e100830492506008015b612710831061076757612710830492506004015b60648310610779576064830492506002015b600a831061042e5760010192915050565b60005b838110156107a557818101518382015260200161078d565b50506000910152565b60208152600082518060208401526107cd81604085016020870161078a565b601f017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0169190910160400192915050565b60008083601f84011261081157600080fd5b50813567ffffffffffffffff81111561082957600080fd5b6020830191508360208260051b850101111561084457600080fd5b9250929050565b6000806000806040858703121561086157600080fd5b843567ffffffffffffffff8082111561087957600080fd5b610885888389016107ff565b9096509450602087013591508082111561089e57600080fd5b506108ab878288016107ff565b95989497509550505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b600080604083850312156108f957600080fd5b823567ffffffffffffffff8082111561091157600080fd5b818501915085601f83011261092557600080fd5b813581811115610937576109376108b7565b604051601f82017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0908116603f0116810190838211818310171561097d5761097d6108b7565b8160405282815288602084870101111561099657600080fd5b826020860160208301376000602093820184015298969091013596505050505050565b6000602082840312156109cb57600080fd5b813567ffffffffffffffff8111156109e257600080fd5b8201610140818503121561041a57600080fd5b60008451610a0781846020890161078a565b80830190507f2e000000000000000000000000000000000000000000000000000000000000008082528551610a43816001850160208a0161078a565b60019201918201528351610a5e81600284016020880161078a565b0160020195945050505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b600082357ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec1833603018112610ace57600080fd5b9190910192915050565b60008083357fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe1843603018112610b0d57600080fd5b83018035915067ffffffffffffffff821115610b2857600080fd5b60200191503681900382131561084457600080fd5b600060208284031215610b4f57600080fd5b8151801515811461041a57600080fdfea164736f6c6343000813000a";const isSuperArgs$c=e=>e.length>1;class AttestationResolver__factory extends ethers_1$j.ContractFactory{constructor(...e){if(isSuperArgs$c(e)){super(...e)}else{super(_abi$h,_bytecode$c,e[0])}}getDeployTransaction(e,t){return super.getDeployTransaction(e,t||{})}deploy(e,t){return super.deploy(e,t||{})}connect(e){return super.connect(e)}static bytecode=_bytecode$c;static abi=_abi$h;static createInterface(){return new ethers_1$j.Interface(_abi$h)}static connect(e,t){return new ethers_1$j.Contract(e,_abi$h,t)}}AttestationResolver__factory$1.AttestationResolver__factory=AttestationResolver__factory;var AttesterResolver__factory$1={};Object.defineProperty(AttesterResolver__factory$1,"__esModule",{value:true});AttesterResolver__factory$1.AttesterResolver__factory=void 0;const ethers_1$i=require$$0;const _abi$g=[{inputs:[{internalType:"contract IEAS",name:"eas",type:"address"},{internalType:"address",name:"targetAttester",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"AccessDenied",type:"error"},{inputs:[],name:"InsufficientValue",type:"error"},{inputs:[],name:"InvalidEAS",type:"error"},{inputs:[],name:"InvalidLength",type:"error"},{inputs:[],name:"NotPayable",type:"error"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation",name:"attestation",type:"tuple"}],name:"attest",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[],name:"isPayable",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"pure",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation[]",name:"attestations",type:"tuple[]"},{internalType:"uint256[]",name:"values",type:"uint256[]"}],name:"multiAttest",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation[]",name:"attestations",type:"tuple[]"},{internalType:"uint256[]",name:"values",type:"uint256[]"}],name:"multiRevoke",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation",name:"attestation",type:"tuple"}],name:"revoke",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[],name:"version",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{stateMutability:"payable",type:"receive"}];const _bytecode$b="0x61012060405234801561001157600080fd5b50604051610a50380380610a5083398101604081905261003091610098565b6001608052600360a052600060c052816001600160a01b038116610067576040516341bc07ff60e11b815260040160405180910390fd5b6001600160a01b0390811660e0521661010052506100d2565b6001600160a01b038116811461009557600080fd5b50565b600080604083850312156100ab57600080fd5b82516100b681610080565b60208401519092506100c781610080565b809150509250929050565b60805160a05160c05160e0516101005161093a6101166000396000610544015260006104d2015260006101990152600061017001526000610147015261093a6000f3fe6080604052600436106100695760003560e01c8063ce46e04611610043578063ce46e04614610106578063e49617e11461011a578063e60c35051461012d57600080fd5b806354fd4d50146100a557806388e5b2d9146100d057806391db0b7e146100f357600080fd5b366100a0576040517f1574f9f300000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b600080fd5b3480156100b157600080fd5b506100ba610140565b6040516100c79190610699565b60405180910390f35b6100e36100de366004610736565b6101e3565b60405190151581526020016100c7565b6100e3610101366004610736565b6102e4565b34801561011257600080fd5b5060006100e3565b6100e36101283660046107a2565b6103d5565b6100e361013b3660046107a2565b6103e8565b606061016b7f00000000000000000000000000000000000000000000000000000000000000006103fc565b6101947f00000000000000000000000000000000000000000000000000000000000000006103fc565b6101bd7f00000000000000000000000000000000000000000000000000000000000000006103fc565b6040516020016101cf939291906107e5565b604051602081830303815290604052905090565b60006101ed6104ba565b83828114610227576040517f947d5a8400000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b3460005b828110156102d45760008686838181106102475761024761085b565b9050602002013590508281111561028a576040517f1101129400000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b6102b789898481811061029f5761029f61085b565b90506020028101906102b1919061088a565b50600190565b6102c85760009450505050506102dc565b9091039060010161022b565b506001925050505b949350505050565b60006102ee6104ba565b83828114610328576040517f947d5a8400000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b3460005b828110156102d45760008686838181106103485761034861085b565b9050602002013590508281111561038b576040517f1101129400000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b6103b88989848181106103a0576103a061085b565b90506020028101906103b2919061088a565b8261052b565b6103c95760009450505050506102dc565b9091039060010161032c565b60006103df6104ba565b60015b92915050565b60006103f26104ba565b6103e2823461052b565b6060600061040983610593565b600101905060008167ffffffffffffffff811115610429576104296108c8565b6040519080825280601f01601f191660200182016040528015610453576020820181803683370190505b5090508181016020015b7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff017f3031323334353637383961626364656600000000000000000000000000000000600a86061a8153600a850494508461045d57509392505050565b3373ffffffffffffffffffffffffffffffffffffffff7f00000000000000000000000000000000000000000000000000000000000000001614610529576040517f4ca8886700000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b565b600073ffffffffffffffffffffffffffffffffffffffff7f000000000000000000000000000000000000000000000000000000000000000016610575610100850160e086016108f7565b73ffffffffffffffffffffffffffffffffffffffff16149392505050565b6000807a184f03e93ff9f4daa797ed6e38ed64bf6a1f01000000000000000083106105dc577a184f03e93ff9f4daa797ed6e38ed64bf6a1f010000000000000000830492506040015b6d04ee2d6d415b85acef81000000008310610608576d04ee2d6d415b85acef8100000000830492506020015b662386f26fc10000831061062657662386f26fc10000830492506010015b6305f5e100831061063e576305f5e100830492506008015b612710831061065257612710830492506004015b60648310610664576064830492506002015b600a83106103e25760010192915050565b60005b83811015610690578181015183820152602001610678565b50506000910152565b60208152600082518060208401526106b8816040850160208701610675565b601f017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0169190910160400192915050565b60008083601f8401126106fc57600080fd5b50813567ffffffffffffffff81111561071457600080fd5b6020830191508360208260051b850101111561072f57600080fd5b9250929050565b6000806000806040858703121561074c57600080fd5b843567ffffffffffffffff8082111561076457600080fd5b610770888389016106ea565b9096509450602087013591508082111561078957600080fd5b50610796878288016106ea565b95989497509550505050565b6000602082840312156107b457600080fd5b813567ffffffffffffffff8111156107cb57600080fd5b820161014081850312156107de57600080fd5b9392505050565b600084516107f7818460208901610675565b80830190507f2e000000000000000000000000000000000000000000000000000000000000008082528551610833816001850160208a01610675565b6001920191820152835161084e816002840160208801610675565b0160020195945050505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b600082357ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec18336030181126108be57600080fd5b9190910192915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b60006020828403121561090957600080fd5b813573ffffffffffffffffffffffffffffffffffffffff811681146107de57600080fdfea164736f6c6343000813000a";const isSuperArgs$b=e=>e.length>1;class AttesterResolver__factory extends ethers_1$i.ContractFactory{constructor(...e){if(isSuperArgs$b(e)){super(...e)}else{super(_abi$g,_bytecode$b,e[0])}}getDeployTransaction(e,t,r){return super.getDeployTransaction(e,t,r||{})}deploy(e,t,r){return super.deploy(e,t,r||{})}connect(e){return super.connect(e)}static bytecode=_bytecode$b;static abi=_abi$g;static createInterface(){return new ethers_1$i.Interface(_abi$g)}static connect(e,t){return new ethers_1$i.Contract(e,_abi$g,t)}}AttesterResolver__factory$1.AttesterResolver__factory=AttesterResolver__factory;var DataResolver__factory$1={};Object.defineProperty(DataResolver__factory$1,"__esModule",{value:true});DataResolver__factory$1.DataResolver__factory=void 0;const ethers_1$h=require$$0;const _abi$f=[{inputs:[{internalType:"contract IEAS",name:"eas",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"AccessDenied",type:"error"},{inputs:[],name:"InsufficientValue",type:"error"},{inputs:[],name:"InvalidEAS",type:"error"},{inputs:[],name:"InvalidLength",type:"error"},{inputs:[],name:"NotPayable",type:"error"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation",name:"attestation",type:"tuple"}],name:"attest",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[],name:"isPayable",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"pure",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation[]",name:"attestations",type:"tuple[]"},{internalType:"uint256[]",name:"values",type:"uint256[]"}],name:"multiAttest",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation[]",name:"attestations",type:"tuple[]"},{internalType:"uint256[]",name:"values",type:"uint256[]"}],name:"multiRevoke",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation",name:"attestation",type:"tuple"}],name:"revoke",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[],name:"version",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{stateMutability:"payable",type:"receive"}];const _bytecode$a="0x61010060405234801561001157600080fd5b50604051610ac1380380610ac183398101604081905261003091610079565b6001608052600360a052600060c052806001600160a01b038116610067576040516341bc07ff60e11b815260040160405180910390fd5b6001600160a01b031660e052506100a9565b60006020828403121561008b57600080fd5b81516001600160a01b03811681146100a257600080fd5b9392505050565b60805160a05160c05160e0516109df6100e260003960006104d201526000610199015260006101700152600061014701526109df6000f3fe6080604052600436106100695760003560e01c8063ce46e04611610043578063ce46e04614610106578063e49617e11461011a578063e60c35051461012d57600080fd5b806354fd4d50146100a557806388e5b2d9146100d057806391db0b7e146100f357600080fd5b366100a0576040517f1574f9f300000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b600080fd5b3480156100b157600080fd5b506100ba610140565b6040516100c79190610716565b60405180910390f35b6100e36100de3660046107b3565b6101e3565b60405190151581526020016100c7565b6100e36101013660046107b3565b6102e4565b34801561011257600080fd5b5060006100e3565b6100e361012836600461081f565b6103d5565b6100e361013b36600461081f565b6103e8565b606061016b7f00000000000000000000000000000000000000000000000000000000000000006103fc565b6101947f00000000000000000000000000000000000000000000000000000000000000006103fc565b6101bd7f00000000000000000000000000000000000000000000000000000000000000006103fc565b6040516020016101cf9392919061085b565b604051602081830303815290604052905090565b60006101ed6104ba565b83828114610227576040517f947d5a8400000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b3460005b828110156102d4576000868683818110610247576102476108d1565b9050602002013590508281111561028a576040517f1101129400000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b6102b789898481811061029f5761029f6108d1565b90506020028101906102b19190610900565b50600190565b6102c85760009450505050506102dc565b9091039060010161022b565b506001925050505b949350505050565b60006102ee6104ba565b83828114610328576040517f947d5a8400000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b3460005b828110156102d4576000868683818110610348576103486108d1565b9050602002013590508281111561038b576040517f1101129400000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b6103b88989848181106103a0576103a06108d1565b90506020028101906103b29190610900565b8261052b565b6103c95760009450505050506102dc565b9091039060010161032c565b60006103df6104ba565b60015b92915050565b60006103f26104ba565b6103e2823461052b565b6060600061040983610610565b600101905060008167ffffffffffffffff8111156104295761042961093e565b6040519080825280601f01601f191660200182016040528015610453576020820181803683370190505b5090508181016020015b7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff017f3031323334353637383961626364656600000000000000000000000000000000600a86061a8153600a850494508461045d57509392505050565b3373ffffffffffffffffffffffffffffffffffffffff7f00000000000000000000000000000000000000000000000000000000000000001614610529576040517f4ca8886700000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b565b600061053b61012084018461096d565b905060011480156106095750600061055761012085018561096d565b6000818110610568576105686108d1565b9050013560f81c60f81b7effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916148061060957507f01000000000000000000000000000000000000000000000000000000000000006105ca61012085018561096d565b60008181106105db576105db6108d1565b9050013560f81c60f81b7effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916145b9392505050565b6000807a184f03e93ff9f4daa797ed6e38ed64bf6a1f0100000000000000008310610659577a184f03e93ff9f4daa797ed6e38ed64bf6a1f010000000000000000830492506040015b6d04ee2d6d415b85acef81000000008310610685576d04ee2d6d415b85acef8100000000830492506020015b662386f26fc1000083106106a357662386f26fc10000830492506010015b6305f5e10083106106bb576305f5e100830492506008015b61271083106106cf57612710830492506004015b606483106106e1576064830492506002015b600a83106103e25760010192915050565b60005b8381101561070d5781810151838201526020016106f5565b50506000910152565b60208152600082518060208401526107358160408501602087016106f2565b601f017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0169190910160400192915050565b60008083601f84011261077957600080fd5b50813567ffffffffffffffff81111561079157600080fd5b6020830191508360208260051b85010111156107ac57600080fd5b9250929050565b600080600080604085870312156107c957600080fd5b843567ffffffffffffffff808211156107e157600080fd5b6107ed88838901610767565b9096509450602087013591508082111561080657600080fd5b5061081387828801610767565b95989497509550505050565b60006020828403121561083157600080fd5b813567ffffffffffffffff81111561084857600080fd5b8201610140818503121561060957600080fd5b6000845161086d8184602089016106f2565b80830190507f2e0000000000000000000000000000000000000000000000000000000000000080825285516108a9816001850160208a016106f2565b600192019182015283516108c48160028401602088016106f2565b0160020195945050505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b600082357ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec183360301811261093457600080fd5b9190910192915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b60008083357fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe18436030181126109a257600080fd5b83018035915067ffffffffffffffff8211156109bd57600080fd5b6020019150368190038213156107ac57600080fdfea164736f6c6343000813000a";const isSuperArgs$a=e=>e.length>1;class DataResolver__factory extends ethers_1$h.ContractFactory{constructor(...e){if(isSuperArgs$a(e)){super(...e)}else{super(_abi$f,_bytecode$a,e[0])}}getDeployTransaction(e,t){return super.getDeployTransaction(e,t||{})}deploy(e,t){return super.deploy(e,t||{})}connect(e){return super.connect(e)}static bytecode=_bytecode$a;static abi=_abi$f;static createInterface(){return new ethers_1$h.Interface(_abi$f)}static connect(e,t){return new ethers_1$h.Contract(e,_abi$f,t)}}DataResolver__factory$1.DataResolver__factory=DataResolver__factory;var ExpirationTimeResolver__factory$1={};Object.defineProperty(ExpirationTimeResolver__factory$1,"__esModule",{value:true});ExpirationTimeResolver__factory$1.ExpirationTimeResolver__factory=void 0;const ethers_1$g=require$$0;const _abi$e=[{inputs:[{internalType:"contract IEAS",name:"eas",type:"address"},{internalType:"uint256",name:"validAfter",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"AccessDenied",type:"error"},{inputs:[],name:"InsufficientValue",type:"error"},{inputs:[],name:"InvalidEAS",type:"error"},{inputs:[],name:"InvalidLength",type:"error"},{inputs:[],name:"NotPayable",type:"error"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation",name:"attestation",type:"tuple"}],name:"attest",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[],name:"isPayable",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"pure",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation[]",name:"attestations",type:"tuple[]"},{internalType:"uint256[]",name:"values",type:"uint256[]"}],name:"multiAttest",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation[]",name:"attestations",type:"tuple[]"},{internalType:"uint256[]",name:"values",type:"uint256[]"}],name:"multiRevoke",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation",name:"attestation",type:"tuple"}],name:"revoke",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[],name:"version",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{stateMutability:"payable",type:"receive"}];const _bytecode$9="0x61012060405234801561001157600080fd5b50604051610a07380380610a078339810160408190526100309161007d565b6001608052600360a052600060c052816001600160a01b038116610067576040516341bc07ff60e11b815260040160405180910390fd5b6001600160a01b031660e05261010052506100b7565b6000806040838503121561009057600080fd5b82516001600160a01b03811681146100a757600080fd5b6020939093015192949293505050565b60805160a05160c05160e0516101005161090c6100fb600039600061052f015260006104d2015260006101990152600061017001526000610147015261090c6000f3fe6080604052600436106100695760003560e01c8063ce46e04611610043578063ce46e04614610106578063e49617e11461011a578063e60c35051461012d57600080fd5b806354fd4d50146100a557806388e5b2d9146100d057806391db0b7e146100f357600080fd5b366100a0576040517f1574f9f300000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b600080fd5b3480156100b157600080fd5b506100ba610140565b6040516100c79190610677565b60405180910390f35b6100e36100de366004610714565b6101e3565b60405190151581526020016100c7565b6100e3610101366004610714565b6102e4565b34801561011257600080fd5b5060006100e3565b6100e3610128366004610780565b6103d5565b6100e361013b366004610780565b6103e8565b606061016b7f00000000000000000000000000000000000000000000000000000000000000006103fc565b6101947f00000000000000000000000000000000000000000000000000000000000000006103fc565b6101bd7f00000000000000000000000000000000000000000000000000000000000000006103fc565b6040516020016101cf939291906107c3565b604051602081830303815290604052905090565b60006101ed6104ba565b83828114610227576040517f947d5a8400000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b3460005b828110156102d457600086868381811061024757610247610839565b9050602002013590508281111561028a576040517f1101129400000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b6102b789898481811061029f5761029f610839565b90506020028101906102b19190610868565b50600190565b6102c85760009450505050506102dc565b9091039060010161022b565b506001925050505b949350505050565b60006102ee6104ba565b83828114610328576040517f947d5a8400000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b3460005b828110156102d457600086868381811061034857610348610839565b9050602002013590508281111561038b576040517f1101129400000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b6103b88989848181106103a0576103a0610839565b90506020028101906103b29190610868565b8261052b565b6103c95760009450505050506102dc565b9091039060010161032c565b60006103df6104ba565b60015b92915050565b60006103f26104ba565b6103e2823461052b565b6060600061040983610571565b600101905060008167ffffffffffffffff811115610429576104296108a6565b6040519080825280601f01601f191660200182016040528015610453576020820181803683370190505b5090508181016020015b7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff017f3031323334353637383961626364656600000000000000000000000000000000600a86061a8153600a850494508461045d57509392505050565b3373ffffffffffffffffffffffffffffffffffffffff7f00000000000000000000000000000000000000000000000000000000000000001614610529576040517f4ca8886700000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b565b60007f000000000000000000000000000000000000000000000000000000000000000061055e60808501606086016108d5565b67ffffffffffffffff1610159392505050565b6000807a184f03e93ff9f4daa797ed6e38ed64bf6a1f01000000000000000083106105ba577a184f03e93ff9f4daa797ed6e38ed64bf6a1f010000000000000000830492506040015b6d04ee2d6d415b85acef810000000083106105e6576d04ee2d6d415b85acef8100000000830492506020015b662386f26fc10000831061060457662386f26fc10000830492506010015b6305f5e100831061061c576305f5e100830492506008015b612710831061063057612710830492506004015b60648310610642576064830492506002015b600a83106103e25760010192915050565b60005b8381101561066e578181015183820152602001610656565b50506000910152565b6020815260008251806020840152610696816040850160208701610653565b601f017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0169190910160400192915050565b60008083601f8401126106da57600080fd5b50813567ffffffffffffffff8111156106f257600080fd5b6020830191508360208260051b850101111561070d57600080fd5b9250929050565b6000806000806040858703121561072a57600080fd5b843567ffffffffffffffff8082111561074257600080fd5b61074e888389016106c8565b9096509450602087013591508082111561076757600080fd5b50610774878288016106c8565b95989497509550505050565b60006020828403121561079257600080fd5b813567ffffffffffffffff8111156107a957600080fd5b820161014081850312156107bc57600080fd5b9392505050565b600084516107d5818460208901610653565b80830190507f2e000000000000000000000000000000000000000000000000000000000000008082528551610811816001850160208a01610653565b6001920191820152835161082c816002840160208801610653565b0160020195945050505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b600082357ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec183360301811261089c57600080fd5b9190910192915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b6000602082840312156108e757600080fd5b813567ffffffffffffffff811681146107bc57600080fdfea164736f6c6343000813000a";const isSuperArgs$9=e=>e.length>1;class ExpirationTimeResolver__factory extends ethers_1$g.ContractFactory{constructor(...e){if(isSuperArgs$9(e)){super(...e)}else{super(_abi$e,_bytecode$9,e[0])}}getDeployTransaction(e,t,r){return super.getDeployTransaction(e,t,r||{})}deploy(e,t,r){return super.deploy(e,t,r||{})}connect(e){return super.connect(e)}static bytecode=_bytecode$9;static abi=_abi$e;static createInterface(){return new ethers_1$g.Interface(_abi$e)}static connect(e,t){return new ethers_1$g.Contract(e,_abi$e,t)}}ExpirationTimeResolver__factory$1.ExpirationTimeResolver__factory=ExpirationTimeResolver__factory;var PayingResolver__factory$1={};Object.defineProperty(PayingResolver__factory$1,"__esModule",{value:true});PayingResolver__factory$1.PayingResolver__factory=void 0;const ethers_1$f=require$$0;const _abi$d=[{inputs:[{internalType:"contract IEAS",name:"eas",type:"address"},{internalType:"uint256",name:"incentive",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"AccessDenied",type:"error"},{inputs:[],name:"InsufficientValue",type:"error"},{inputs:[],name:"InvalidEAS",type:"error"},{inputs:[],name:"InvalidLength",type:"error"},{inputs:[],name:"InvalidValue",type:"error"},{inputs:[],name:"NotPayable",type:"error"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation",name:"attestation",type:"tuple"}],name:"attest",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[],name:"isPayable",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"pure",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation[]",name:"attestations",type:"tuple[]"},{internalType:"uint256[]",name:"values",type:"uint256[]"}],name:"multiAttest",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation[]",name:"attestations",type:"tuple[]"},{internalType:"uint256[]",name:"values",type:"uint256[]"}],name:"multiRevoke",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation",name:"attestation",type:"tuple"}],name:"revoke",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[],name:"version",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{stateMutability:"payable",type:"receive"}];const _bytecode$8="0x61012060405234801561001157600080fd5b50604051610ca4380380610ca48339810160408190526100309161007d565b6001608052600360a052600060c052816001600160a01b038116610067576040516341bc07ff60e11b815260040160405180910390fd5b6001600160a01b031660e05261010052506100b7565b6000806040838503121561009057600080fd5b82516001600160a01b03811681146100a757600080fd5b6020939093015192949293505050565b60805160a05160c05160e05161010051610b9461011060003960008181610506015281816105360152818161056401526105fb015260006104a90152600061016901526000610140015260006101170152610b946000f3fe6080604052600436106100695760003560e01c8063ce46e04611610043578063ce46e046146100d6578063e49617e1146100ea578063e60c3505146100fd57600080fd5b806354fd4d501461007557806388e5b2d9146100a057806391db0b7e146100c357600080fd5b3661007057005b600080fd5b34801561008157600080fd5b5061008a610110565b60405161009791906108b9565b60405180910390f35b6100b36100ae366004610956565b6101b3565b6040519015158152602001610097565b6100b36100d1366004610956565b6102b4565b3480156100e257600080fd5b5060016100b3565b6100b36100f83660046109c2565b6103a5565b6100b361010b3660046109c2565b6103bf565b606061013b7f00000000000000000000000000000000000000000000000000000000000000006103d3565b6101647f00000000000000000000000000000000000000000000000000000000000000006103d3565b61018d7f00000000000000000000000000000000000000000000000000000000000000006103d3565b60405160200161019f93929190610a05565b604051602081830303815290604052905090565b60006101bd610491565b838281146101f7576040517f947d5a8400000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b3460005b828110156102a457600086868381811061021757610217610a7b565b9050602002013590508281111561025a576040517f1101129400000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b61028789898481811061026f5761026f610a7b565b90506020028101906102819190610aaa565b82610502565b6102985760009450505050506102ac565b909103906001016101fb565b506001925050505b949350505050565b60006102be610491565b838281146102f8576040517f947d5a8400000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b3460005b828110156102a457600086868381811061031857610318610a7b565b9050602002013590508281111561035b576040517f1101129400000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b61038889898481811061037057610370610a7b565b90506020028101906103829190610aaa565b826105bf565b6103995760009450505050506102ac565b909103906001016102fc565b60006103af610491565b6103b98234610502565b92915050565b60006103c9610491565b6103b982346105bf565b606060006103e08361064f565b600101905060008167ffffffffffffffff81111561040057610400610ae8565b6040519080825280601f01601f19166020018201604052801561042a576020820181803683370190505b5090508181016020015b7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff017f3031323334353637383961626364656600000000000000000000000000000000600a86061a8153600a850494508461043457509392505050565b3373ffffffffffffffffffffffffffffffffffffffff7f00000000000000000000000000000000000000000000000000000000000000001614610500576040517f4ca8886700000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b565b60007f0000000000000000000000000000000000000000000000000000000000000000821015610534575060006103b9565b7f00000000000000000000000000000000000000000000000000000000000000008211156105b6576105b66105897f000000000000000000000000000000000000000000000000000000000000000084610b17565b61059a610100860160e08701610b51565b73ffffffffffffffffffffffffffffffffffffffff1690610731565b50600192915050565b600081156105cf575060006103b9565b6105e0610100840160e08501610b51565b73ffffffffffffffffffffffffffffffffffffffff166108fc7f00000000000000000000000000000000000000000000000000000000000000009081150290604051600060405180830381858888f19350505050158015610645573d6000803e3d6000fd5b5060019392505050565b6000807a184f03e93ff9f4daa797ed6e38ed64bf6a1f0100000000000000008310610698577a184f03e93ff9f4daa797ed6e38ed64bf6a1f010000000000000000830492506040015b6d04ee2d6d415b85acef810000000083106106c4576d04ee2d6d415b85acef8100000000830492506020015b662386f26fc1000083106106e257662386f26fc10000830492506010015b6305f5e10083106106fa576305f5e100830492506008015b612710831061070e57612710830492506004015b60648310610720576064830492506002015b600a83106103b95760010192915050565b804710156107a0576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601d60248201527f416464726573733a20696e73756666696369656e742062616c616e636500000060448201526064015b60405180910390fd5b60008273ffffffffffffffffffffffffffffffffffffffff168260405160006040518083038185875af1925050503d80600081146107fa576040519150601f19603f3d011682016040523d82523d6000602084013e6107ff565b606091505b5050905080610890576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152603a60248201527f416464726573733a20756e61626c6520746f2073656e642076616c75652c207260448201527f6563697069656e74206d617920686176652072657665727465640000000000006064820152608401610797565b505050565b60005b838110156108b0578181015183820152602001610898565b50506000910152565b60208152600082518060208401526108d8816040850160208701610895565b601f017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0169190910160400192915050565b60008083601f84011261091c57600080fd5b50813567ffffffffffffffff81111561093457600080fd5b6020830191508360208260051b850101111561094f57600080fd5b9250929050565b6000806000806040858703121561096c57600080fd5b843567ffffffffffffffff8082111561098457600080fd5b6109908883890161090a565b909650945060208701359150808211156109a957600080fd5b506109b68782880161090a565b95989497509550505050565b6000602082840312156109d457600080fd5b813567ffffffffffffffff8111156109eb57600080fd5b820161014081850312156109fe57600080fd5b9392505050565b60008451610a17818460208901610895565b80830190507f2e000000000000000000000000000000000000000000000000000000000000008082528551610a53816001850160208a01610895565b60019201918201528351610a6e816002840160208801610895565b0160020195945050505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b600082357ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec1833603018112610ade57600080fd5b9190910192915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b818103818111156103b9577f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b600060208284031215610b6357600080fd5b813573ffffffffffffffffffffffffffffffffffffffff811681146109fe57600080fdfea164736f6c6343000813000a";const isSuperArgs$8=e=>e.length>1;class PayingResolver__factory extends ethers_1$f.ContractFactory{constructor(...e){if(isSuperArgs$8(e)){super(...e)}else{super(_abi$d,_bytecode$8,e[0])}}getDeployTransaction(e,t,r){return super.getDeployTransaction(e,t,r||{})}deploy(e,t,r){return super.deploy(e,t,r||{})}connect(e){return super.connect(e)}static bytecode=_bytecode$8;static abi=_abi$d;static createInterface(){return new ethers_1$f.Interface(_abi$d)}static connect(e,t){return new ethers_1$f.Contract(e,_abi$d,t)}}PayingResolver__factory$1.PayingResolver__factory=PayingResolver__factory;var RecipientResolver__factory$1={};Object.defineProperty(RecipientResolver__factory$1,"__esModule",{value:true});RecipientResolver__factory$1.RecipientResolver__factory=void 0;const ethers_1$e=require$$0;const _abi$c=[{inputs:[{internalType:"contract IEAS",name:"eas",type:"address"},{internalType:"address",name:"targetRecipient",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"AccessDenied",type:"error"},{inputs:[],name:"InsufficientValue",type:"error"},{inputs:[],name:"InvalidEAS",type:"error"},{inputs:[],name:"InvalidLength",type:"error"},{inputs:[],name:"NotPayable",type:"error"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation",name:"attestation",type:"tuple"}],name:"attest",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[],name:"isPayable",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"pure",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation[]",name:"attestations",type:"tuple[]"},{internalType:"uint256[]",name:"values",type:"uint256[]"}],name:"multiAttest",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation[]",name:"attestations",type:"tuple[]"},{internalType:"uint256[]",name:"values",type:"uint256[]"}],name:"multiRevoke",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation",name:"attestation",type:"tuple"}],name:"revoke",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[],name:"version",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{stateMutability:"payable",type:"receive"}];const _bytecode$7="0x61012060405234801561001157600080fd5b50604051610a4f380380610a4f83398101604081905261003091610098565b6001608052600360a052600060c052816001600160a01b038116610067576040516341bc07ff60e11b815260040160405180910390fd5b6001600160a01b0390811660e0521661010052506100d2565b6001600160a01b038116811461009557600080fd5b50565b600080604083850312156100ab57600080fd5b82516100b681610080565b60208401519092506100c781610080565b809150509250929050565b60805160a05160c05160e051610100516109396101166000396000610544015260006104d201526000610199015260006101700152600061014701526109396000f3fe6080604052600436106100695760003560e01c8063ce46e04611610043578063ce46e04614610106578063e49617e11461011a578063e60c35051461012d57600080fd5b806354fd4d50146100a557806388e5b2d9146100d057806391db0b7e146100f357600080fd5b366100a0576040517f1574f9f300000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b600080fd5b3480156100b157600080fd5b506100ba610140565b6040516100c79190610698565b60405180910390f35b6100e36100de366004610735565b6101e3565b60405190151581526020016100c7565b6100e3610101366004610735565b6102e4565b34801561011257600080fd5b5060006100e3565b6100e36101283660046107a1565b6103d5565b6100e361013b3660046107a1565b6103e8565b606061016b7f00000000000000000000000000000000000000000000000000000000000000006103fc565b6101947f00000000000000000000000000000000000000000000000000000000000000006103fc565b6101bd7f00000000000000000000000000000000000000000000000000000000000000006103fc565b6040516020016101cf939291906107e4565b604051602081830303815290604052905090565b60006101ed6104ba565b83828114610227576040517f947d5a8400000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b3460005b828110156102d45760008686838181106102475761024761085a565b9050602002013590508281111561028a576040517f1101129400000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b6102b789898481811061029f5761029f61085a565b90506020028101906102b19190610889565b50600190565b6102c85760009450505050506102dc565b9091039060010161022b565b506001925050505b949350505050565b60006102ee6104ba565b83828114610328576040517f947d5a8400000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b3460005b828110156102d45760008686838181106103485761034861085a565b9050602002013590508281111561038b576040517f1101129400000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b6103b88989848181106103a0576103a061085a565b90506020028101906103b29190610889565b8261052b565b6103c95760009450505050506102dc565b9091039060010161032c565b60006103df6104ba565b60015b92915050565b60006103f26104ba565b6103e2823461052b565b6060600061040983610592565b600101905060008167ffffffffffffffff811115610429576104296108c7565b6040519080825280601f01601f191660200182016040528015610453576020820181803683370190505b5090508181016020015b7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff017f3031323334353637383961626364656600000000000000000000000000000000600a86061a8153600a850494508461045d57509392505050565b3373ffffffffffffffffffffffffffffffffffffffff7f00000000000000000000000000000000000000000000000000000000000000001614610529576040517f4ca8886700000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b565b600073ffffffffffffffffffffffffffffffffffffffff7f00000000000000000000000000000000000000000000000000000000000000001661057460e0850160c086016108f6565b73ffffffffffffffffffffffffffffffffffffffff16149392505050565b6000807a184f03e93ff9f4daa797ed6e38ed64bf6a1f01000000000000000083106105db577a184f03e93ff9f4daa797ed6e38ed64bf6a1f010000000000000000830492506040015b6d04ee2d6d415b85acef81000000008310610607576d04ee2d6d415b85acef8100000000830492506020015b662386f26fc10000831061062557662386f26fc10000830492506010015b6305f5e100831061063d576305f5e100830492506008015b612710831061065157612710830492506004015b60648310610663576064830492506002015b600a83106103e25760010192915050565b60005b8381101561068f578181015183820152602001610677565b50506000910152565b60208152600082518060208401526106b7816040850160208701610674565b601f017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0169190910160400192915050565b60008083601f8401126106fb57600080fd5b50813567ffffffffffffffff81111561071357600080fd5b6020830191508360208260051b850101111561072e57600080fd5b9250929050565b6000806000806040858703121561074b57600080fd5b843567ffffffffffffffff8082111561076357600080fd5b61076f888389016106e9565b9096509450602087013591508082111561078857600080fd5b50610795878288016106e9565b95989497509550505050565b6000602082840312156107b357600080fd5b813567ffffffffffffffff8111156107ca57600080fd5b820161014081850312156107dd57600080fd5b9392505050565b600084516107f6818460208901610674565b80830190507f2e000000000000000000000000000000000000000000000000000000000000008082528551610832816001850160208a01610674565b6001920191820152835161084d816002840160208801610674565b0160020195945050505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b600082357ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec18336030181126108bd57600080fd5b9190910192915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b60006020828403121561090857600080fd5b813573ffffffffffffffffffffffffffffffffffffffff811681146107dd57600080fdfea164736f6c6343000813000a";const isSuperArgs$7=e=>e.length>1;class RecipientResolver__factory extends ethers_1$e.ContractFactory{constructor(...e){if(isSuperArgs$7(e)){super(...e)}else{super(_abi$c,_bytecode$7,e[0])}}getDeployTransaction(e,t,r){return super.getDeployTransaction(e,t,r||{})}deploy(e,t,r){return super.deploy(e,t,r||{})}connect(e){return super.connect(e)}static bytecode=_bytecode$7;static abi=_abi$c;static createInterface(){return new ethers_1$e.Interface(_abi$c)}static connect(e,t){return new ethers_1$e.Contract(e,_abi$c,t)}}RecipientResolver__factory$1.RecipientResolver__factory=RecipientResolver__factory;var RevocationResolver__factory$1={};Object.defineProperty(RevocationResolver__factory$1,"__esModule",{value:true});RevocationResolver__factory$1.RevocationResolver__factory=void 0;const ethers_1$d=require$$0;const _abi$b=[{inputs:[{internalType:"contract IEAS",name:"eas",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"AccessDenied",type:"error"},{inputs:[],name:"InsufficientValue",type:"error"},{inputs:[],name:"InvalidEAS",type:"error"},{inputs:[],name:"InvalidLength",type:"error"},{inputs:[],name:"NotPayable",type:"error"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation",name:"attestation",type:"tuple"}],name:"attest",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[],name:"isPayable",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"pure",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation[]",name:"attestations",type:"tuple[]"},{internalType:"uint256[]",name:"values",type:"uint256[]"}],name:"multiAttest",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation[]",name:"attestations",type:"tuple[]"},{internalType:"uint256[]",name:"values",type:"uint256[]"}],name:"multiRevoke",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation",name:"attestation",type:"tuple"}],name:"revoke",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bool",name:"status",type:"bool"}],name:"setRevocation",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"version",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{stateMutability:"payable",type:"receive"}];const _bytecode$6="0x61010060405234801561001157600080fd5b506040516109fe3803806109fe83398101604081905261003091610079565b6001608052600360a052600060c052806001600160a01b038116610067576040516341bc07ff60e11b815260040160405180910390fd5b6001600160a01b031660e052506100a9565b60006020828403121561008b57600080fd5b81516001600160a01b03811681146100a257600080fd5b9392505050565b60805160a05160c05160e05161091c6100e26000396000610530015260006101f2015260006101c9015260006101a0015261091c6000f3fe6080604052600436106100745760003560e01c8063ce46e0461161004e578063ce46e04614610113578063e49617e114610127578063e60c35051461013a578063f545cb661461014d57600080fd5b806354fd4d50146100b257806388e5b2d9146100dd57806391db0b7e1461010057600080fd5b366100ad576040517f1574f9f300000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b005b600080fd5b3480156100be57600080fd5b506100c7610199565b6040516100d4919061068f565b60405180910390f35b6100f06100eb36600461072c565b61023c565b60405190151581526020016100d4565b6100f061010e36600461072c565b610341565b34801561011f57600080fd5b5060006100f0565b6100f0610135366004610798565b610432565b6100f0610148366004610798565b610449565b34801561015957600080fd5b506100ab6101683660046107db565b600080547fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0016911515919091179055565b60606101c47f000000000000000000000000000000000000000000000000000000000000000061045a565b6101ed7f000000000000000000000000000000000000000000000000000000000000000061045a565b6102167f000000000000000000000000000000000000000000000000000000000000000061045a565b604051602001610228939291906107fd565b604051602081830303815290604052905090565b6000610246610518565b83828114610280576040517f947d5a8400000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b3460005b828110156103315760008686838181106102a0576102a0610873565b905060200201359050828111156102e3576040517f1101129400000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b6103148989848181106102f8576102f8610873565b905060200281019061030a91906108a2565b5060005460ff1690565b610325576000945050505050610339565b90910390600101610284565b506001925050505b949350505050565b600061034b610518565b83828114610385576040517f947d5a8400000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b3460005b828110156103315760008686838181106103a5576103a5610873565b905060200201359050828111156103e8576040517f1101129400000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b6104158989848181106103fd576103fd610873565b905060200281019061040f91906108a2565b50600190565b610426576000945050505050610339565b90910390600101610389565b600061043c610518565b60005460ff165b92915050565b6000610453610518565b6001610443565b6060600061046783610589565b600101905060008167ffffffffffffffff811115610487576104876108e0565b6040519080825280601f01601f1916602001820160405280156104b1576020820181803683370190505b5090508181016020015b7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff017f3031323334353637383961626364656600000000000000000000000000000000600a86061a8153600a85049450846104bb57509392505050565b3373ffffffffffffffffffffffffffffffffffffffff7f00000000000000000000000000000000000000000000000000000000000000001614610587576040517f4ca8886700000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b565b6000807a184f03e93ff9f4daa797ed6e38ed64bf6a1f01000000000000000083106105d2577a184f03e93ff9f4daa797ed6e38ed64bf6a1f010000000000000000830492506040015b6d04ee2d6d415b85acef810000000083106105fe576d04ee2d6d415b85acef8100000000830492506020015b662386f26fc10000831061061c57662386f26fc10000830492506010015b6305f5e1008310610634576305f5e100830492506008015b612710831061064857612710830492506004015b6064831061065a576064830492506002015b600a83106104435760010192915050565b60005b8381101561068657818101518382015260200161066e565b50506000910152565b60208152600082518060208401526106ae81604085016020870161066b565b601f017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0169190910160400192915050565b60008083601f8401126106f257600080fd5b50813567ffffffffffffffff81111561070a57600080fd5b6020830191508360208260051b850101111561072557600080fd5b9250929050565b6000806000806040858703121561074257600080fd5b843567ffffffffffffffff8082111561075a57600080fd5b610766888389016106e0565b9096509450602087013591508082111561077f57600080fd5b5061078c878288016106e0565b95989497509550505050565b6000602082840312156107aa57600080fd5b813567ffffffffffffffff8111156107c157600080fd5b820161014081850312156107d457600080fd5b9392505050565b6000602082840312156107ed57600080fd5b813580151581146107d457600080fd5b6000845161080f81846020890161066b565b80830190507f2e00000000000000000000000000000000000000000000000000000000000000808252855161084b816001850160208a0161066b565b6001920191820152835161086681600284016020880161066b565b0160020195945050505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b600082357ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec18336030181126108d657600080fd5b9190910192915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fdfea164736f6c6343000813000a";const isSuperArgs$6=e=>e.length>1;class RevocationResolver__factory extends ethers_1$d.ContractFactory{constructor(...e){if(isSuperArgs$6(e)){super(...e)}else{super(_abi$b,_bytecode$6,e[0])}}getDeployTransaction(e,t){return super.getDeployTransaction(e,t||{})}deploy(e,t){return super.deploy(e,t||{})}connect(e){return super.connect(e)}static bytecode=_bytecode$6;static abi=_abi$b;static createInterface(){return new ethers_1$d.Interface(_abi$b)}static connect(e,t){return new ethers_1$d.Contract(e,_abi$b,t)}}RevocationResolver__factory$1.RevocationResolver__factory=RevocationResolver__factory;var TokenResolver__factory$1={};Object.defineProperty(TokenResolver__factory$1,"__esModule",{value:true});TokenResolver__factory$1.TokenResolver__factory=void 0;const ethers_1$c=require$$0;const _abi$a=[{inputs:[{internalType:"contract IEAS",name:"eas",type:"address"},{internalType:"contract IERC20",name:"targetToken",type:"address"},{internalType:"uint256",name:"targetAmount",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"AccessDenied",type:"error"},{inputs:[],name:"InsufficientValue",type:"error"},{inputs:[],name:"InvalidAllowance",type:"error"},{inputs:[],name:"InvalidEAS",type:"error"},{inputs:[],name:"InvalidLength",type:"error"},{inputs:[],name:"NotPayable",type:"error"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation",name:"attestation",type:"tuple"}],name:"attest",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[],name:"isPayable",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"pure",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation[]",name:"attestations",type:"tuple[]"},{internalType:"uint256[]",name:"values",type:"uint256[]"}],name:"multiAttest",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation[]",name:"attestations",type:"tuple[]"},{internalType:"uint256[]",name:"values",type:"uint256[]"}],name:"multiRevoke",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation",name:"attestation",type:"tuple"}],name:"revoke",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[],name:"version",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{stateMutability:"payable",type:"receive"}];const _bytecode$5="0x61014060405234801561001157600080fd5b50604051610b60380380610b608339810160408190526100309161009f565b6001608052600360a052600060c052826001600160a01b038116610067576040516341bc07ff60e11b815260040160405180910390fd5b6001600160a01b0390811660e052919091166101005261012052506100e2565b6001600160a01b038116811461009c57600080fd5b50565b6000806000606084860312156100b457600080fd5b83516100bf81610087565b60208501519093506100d081610087565b80925050604084015190509250925092565b60805160a05160c05160e0516101005161012051610a2f610131600039600061052f01526000610565015260006104d20152600061019901526000610170015260006101470152610a2f6000f3fe6080604052600436106100695760003560e01c8063ce46e04611610043578063ce46e04614610106578063e49617e11461011a578063e60c35051461012d57600080fd5b806354fd4d50146100a557806388e5b2d9146100d057806391db0b7e146100f357600080fd5b366100a0576040517f1574f9f300000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b600080fd5b3480156100b157600080fd5b506100ba610140565b6040516100c79190610775565b60405180910390f35b6100e36100de366004610812565b6101e3565b60405190151581526020016100c7565b6100e3610101366004610812565b6102e4565b34801561011257600080fd5b5060006100e3565b6100e361012836600461087e565b6103d5565b6100e361013b36600461087e565b6103e8565b606061016b7f00000000000000000000000000000000000000000000000000000000000000006103fc565b6101947f00000000000000000000000000000000000000000000000000000000000000006103fc565b6101bd7f00000000000000000000000000000000000000000000000000000000000000006103fc565b6040516020016101cf939291906108c1565b604051602081830303815290604052905090565b60006101ed6104ba565b83828114610227576040517f947d5a8400000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b3460005b828110156102d457600086868381811061024757610247610937565b9050602002013590508281111561028a576040517f1101129400000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b6102b789898481811061029f5761029f610937565b90506020028101906102b19190610966565b50600190565b6102c85760009450505050506102dc565b9091039060010161022b565b506001925050505b949350505050565b60006102ee6104ba565b83828114610328576040517f947d5a8400000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b3460005b828110156102d457600086868381811061034857610348610937565b9050602002013590508281111561038b576040517f1101129400000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b6103b88989848181106103a0576103a0610937565b90506020028101906103b29190610966565b8261052b565b6103c95760009450505050506102dc565b9091039060010161032c565b60006103df6104ba565b60015b92915050565b60006103f26104ba565b6103e2823461052b565b606060006104098361066f565b600101905060008167ffffffffffffffff811115610429576104296109a4565b6040519080825280601f01601f191660200182016040528015610453576020820181803683370190505b5090508181016020015b7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff017f3031323334353637383961626364656600000000000000000000000000000000600a86061a8153600a850494508461045d57509392505050565b3373ffffffffffffffffffffffffffffffffffffffff7f00000000000000000000000000000000000000000000000000000000000000001614610529576040517f4ca8886700000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b565b60007f000000000000000000000000000000000000000000000000000000000000000073ffffffffffffffffffffffffffffffffffffffff7f00000000000000000000000000000000000000000000000000000000000000001663dd62ed3e61059b610100870160e088016109d3565b6040517fffffffff0000000000000000000000000000000000000000000000000000000060e084901b16815273ffffffffffffffffffffffffffffffffffffffff9091166004820152306024820152604401602060405180830381865afa15801561060a573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061062e9190610a09565b1015610666576040517f65ba6fc300000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b50600192915050565b6000807a184f03e93ff9f4daa797ed6e38ed64bf6a1f01000000000000000083106106b8577a184f03e93ff9f4daa797ed6e38ed64bf6a1f010000000000000000830492506040015b6d04ee2d6d415b85acef810000000083106106e4576d04ee2d6d415b85acef8100000000830492506020015b662386f26fc10000831061070257662386f26fc10000830492506010015b6305f5e100831061071a576305f5e100830492506008015b612710831061072e57612710830492506004015b60648310610740576064830492506002015b600a83106103e25760010192915050565b60005b8381101561076c578181015183820152602001610754565b50506000910152565b6020815260008251806020840152610794816040850160208701610751565b601f017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0169190910160400192915050565b60008083601f8401126107d857600080fd5b50813567ffffffffffffffff8111156107f057600080fd5b6020830191508360208260051b850101111561080b57600080fd5b9250929050565b6000806000806040858703121561082857600080fd5b843567ffffffffffffffff8082111561084057600080fd5b61084c888389016107c6565b9096509450602087013591508082111561086557600080fd5b50610872878288016107c6565b95989497509550505050565b60006020828403121561089057600080fd5b813567ffffffffffffffff8111156108a757600080fd5b820161014081850312156108ba57600080fd5b9392505050565b600084516108d3818460208901610751565b80830190507f2e00000000000000000000000000000000000000000000000000000000000000808252855161090f816001850160208a01610751565b6001920191820152835161092a816002840160208801610751565b0160020195945050505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b600082357ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec183360301811261099a57600080fd5b9190910192915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b6000602082840312156109e557600080fd5b813573ffffffffffffffffffffffffffffffffffffffff811681146108ba57600080fd5b600060208284031215610a1b57600080fd5b505191905056fea164736f6c6343000813000a";const isSuperArgs$5=e=>e.length>1;class TokenResolver__factory extends ethers_1$c.ContractFactory{constructor(...e){if(isSuperArgs$5(e)){super(...e)}else{super(_abi$a,_bytecode$5,e[0])}}getDeployTransaction(e,t,r,n){return super.getDeployTransaction(e,t,r,n||{})}deploy(e,t,r,n){return super.deploy(e,t,r,n||{})}connect(e){return super.connect(e)}static bytecode=_bytecode$5;static abi=_abi$a;static createInterface(){return new ethers_1$c.Interface(_abi$a)}static connect(e,t){return new ethers_1$c.Contract(e,_abi$a,t)}}TokenResolver__factory$1.TokenResolver__factory=TokenResolver__factory;var ValueResolver__factory$1={};Object.defineProperty(ValueResolver__factory$1,"__esModule",{value:true});ValueResolver__factory$1.ValueResolver__factory=void 0;const ethers_1$b=require$$0;const _abi$9=[{inputs:[{internalType:"contract IEAS",name:"eas",type:"address"},{internalType:"uint256",name:"targetValue",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"AccessDenied",type:"error"},{inputs:[],name:"InsufficientValue",type:"error"},{inputs:[],name:"InvalidEAS",type:"error"},{inputs:[],name:"InvalidLength",type:"error"},{inputs:[],name:"NotPayable",type:"error"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation",name:"attestation",type:"tuple"}],name:"attest",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[],name:"isPayable",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"pure",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation[]",name:"attestations",type:"tuple[]"},{internalType:"uint256[]",name:"values",type:"uint256[]"}],name:"multiAttest",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation[]",name:"attestations",type:"tuple[]"},{internalType:"uint256[]",name:"values",type:"uint256[]"}],name:"multiRevoke",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation",name:"attestation",type:"tuple"}],name:"revoke",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[],name:"version",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{stateMutability:"payable",type:"receive"}];const _bytecode$4="0x61012060405234801561001157600080fd5b506040516109ad3803806109ad8339810160408190526100309161007d565b6001608052600360a052600060c052816001600160a01b038116610067576040516341bc07ff60e11b815260040160405180910390fd5b6001600160a01b031660e05261010052506100b7565b6000806040838503121561009057600080fd5b82516001600160a01b03811681146100a757600080fd5b6020939093015192949293505050565b60805160a05160c05160e051610100516108ab6101026000396000818161038501526103e5015260006104e101526000610169015260006101400152600061011701526108ab6000f3fe6080604052600436106100695760003560e01c8063ce46e04611610043578063ce46e046146100d6578063e49617e1146100ea578063e60c3505146100fd57600080fd5b806354fd4d501461007557806388e5b2d9146100a057806391db0b7e146100c357600080fd5b3661007057005b600080fd5b34801561008157600080fd5b5061008a610110565b6040516100979190610640565b60405180910390f35b6100b36100ae3660046106dd565b6101b3565b6040519015158152602001610097565b6100b36100d13660046106dd565b6102b4565b3480156100e257600080fd5b5060016100b3565b6100b36100f8366004610749565b6103c6565b6100b361010b366004610749565b6103d9565b606061013b7f000000000000000000000000000000000000000000000000000000000000000061040b565b6101647f000000000000000000000000000000000000000000000000000000000000000061040b565b61018d7f000000000000000000000000000000000000000000000000000000000000000061040b565b60405160200161019f9392919061078c565b604051602081830303815290604052905090565b60006101bd6104c9565b838281146101f7576040517f947d5a8400000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b3460005b828110156102a457600086868381811061021757610217610802565b9050602002013590508281111561025a576040517f1101129400000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b61028789898481811061026f5761026f610802565b90506020028101906102819190610831565b50600190565b6102985760009450505050506102ac565b909103906001016101fb565b506001925050505b949350505050565b60006102be6104c9565b838281146102f8576040517f947d5a8400000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b3460005b828110156102a457600086868381811061031857610318610802565b9050602002013590508281111561035b576040517f1101129400000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b6103a989898481811061037057610370610802565b90506020028101906103829190610831565b507f0000000000000000000000000000000000000000000000000000000000000000821490565b6103ba5760009450505050506102ac565b909103906001016102fc565b60006103d06104c9565b60015b92915050565b60006103e36104c9565b7f000000000000000000000000000000000000000000000000000000000000000034146103d3565b606060006104188361053a565b600101905060008167ffffffffffffffff8111156104385761043861086f565b6040519080825280601f01601f191660200182016040528015610462576020820181803683370190505b5090508181016020015b7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff017f3031323334353637383961626364656600000000000000000000000000000000600a86061a8153600a850494508461046c57509392505050565b3373ffffffffffffffffffffffffffffffffffffffff7f00000000000000000000000000000000000000000000000000000000000000001614610538576040517f4ca8886700000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b565b6000807a184f03e93ff9f4daa797ed6e38ed64bf6a1f0100000000000000008310610583577a184f03e93ff9f4daa797ed6e38ed64bf6a1f010000000000000000830492506040015b6d04ee2d6d415b85acef810000000083106105af576d04ee2d6d415b85acef8100000000830492506020015b662386f26fc1000083106105cd57662386f26fc10000830492506010015b6305f5e10083106105e5576305f5e100830492506008015b61271083106105f957612710830492506004015b6064831061060b576064830492506002015b600a83106103d35760010192915050565b60005b8381101561063757818101518382015260200161061f565b50506000910152565b602081526000825180602084015261065f81604085016020870161061c565b601f017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0169190910160400192915050565b60008083601f8401126106a357600080fd5b50813567ffffffffffffffff8111156106bb57600080fd5b6020830191508360208260051b85010111156106d657600080fd5b9250929050565b600080600080604085870312156106f357600080fd5b843567ffffffffffffffff8082111561070b57600080fd5b61071788838901610691565b9096509450602087013591508082111561073057600080fd5b5061073d87828801610691565b95989497509550505050565b60006020828403121561075b57600080fd5b813567ffffffffffffffff81111561077257600080fd5b8201610140818503121561078557600080fd5b9392505050565b6000845161079e81846020890161061c565b80830190507f2e0000000000000000000000000000000000000000000000000000000000000080825285516107da816001850160208a0161061c565b600192019182015283516107f581600284016020880161061c565b0160020195945050505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b600082357ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec183360301811261086557600080fd5b9190910192915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fdfea164736f6c6343000813000a";const isSuperArgs$4=e=>e.length>1;class ValueResolver__factory extends ethers_1$b.ContractFactory{constructor(...e){if(isSuperArgs$4(e)){super(...e)}else{super(_abi$9,_bytecode$4,e[0])}}getDeployTransaction(e,t,r){return super.getDeployTransaction(e,t,r||{})}deploy(e,t,r){return super.deploy(e,t,r||{})}connect(e){return super.connect(e)}static bytecode=_bytecode$4;static abi=_abi$9;static createInterface(){return new ethers_1$b.Interface(_abi$9)}static connect(e,t){return new ethers_1$b.Contract(e,_abi$9,t)}}ValueResolver__factory$1.ValueResolver__factory=ValueResolver__factory;(function(e){Object.defineProperty(e,"__esModule",{value:true});e.ValueResolver__factory=e.TokenResolver__factory=e.RevocationResolver__factory=e.RecipientResolver__factory=e.PayingResolver__factory=e.ExpirationTimeResolver__factory=e.DataResolver__factory=e.AttesterResolver__factory=e.AttestationResolver__factory=void 0;var t=AttestationResolver__factory$1;Object.defineProperty(e,"AttestationResolver__factory",{enumerable:true,get:function(){return t.AttestationResolver__factory}});var r=AttesterResolver__factory$1;Object.defineProperty(e,"AttesterResolver__factory",{enumerable:true,get:function(){return r.AttesterResolver__factory}});var n=DataResolver__factory$1;Object.defineProperty(e,"DataResolver__factory",{enumerable:true,get:function(){return n.DataResolver__factory}});var i=ExpirationTimeResolver__factory$1;Object.defineProperty(e,"ExpirationTimeResolver__factory",{enumerable:true,get:function(){return i.ExpirationTimeResolver__factory}});var s=PayingResolver__factory$1;Object.defineProperty(e,"PayingResolver__factory",{enumerable:true,get:function(){return s.PayingResolver__factory}});var a=RecipientResolver__factory$1;Object.defineProperty(e,"RecipientResolver__factory",{enumerable:true,get:function(){return a.RecipientResolver__factory}});var o=RevocationResolver__factory$1;Object.defineProperty(e,"RevocationResolver__factory",{enumerable:true,get:function(){return o.RevocationResolver__factory}});var f=TokenResolver__factory$1;Object.defineProperty(e,"TokenResolver__factory",{enumerable:true,get:function(){return f.TokenResolver__factory}});var c=ValueResolver__factory$1;Object.defineProperty(e,"ValueResolver__factory",{enumerable:true,get:function(){return c.ValueResolver__factory}})})(examples);var ISchemaResolver__factory$1={};Object.defineProperty(ISchemaResolver__factory$1,"__esModule",{value:true});ISchemaResolver__factory$1.ISchemaResolver__factory=void 0;const ethers_1$a=require$$0;const _abi$8=[{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation",name:"attestation",type:"tuple"}],name:"attest",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[],name:"isPayable",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"pure",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation[]",name:"attestations",type:"tuple[]"},{internalType:"uint256[]",name:"values",type:"uint256[]"}],name:"multiAttest",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation[]",name:"attestations",type:"tuple[]"},{internalType:"uint256[]",name:"values",type:"uint256[]"}],name:"multiRevoke",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation",name:"attestation",type:"tuple"}],name:"revoke",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[],name:"version",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}];class ISchemaResolver__factory{static abi=_abi$8;static createInterface(){return new ethers_1$a.Interface(_abi$8)}static connect(e,t){return new ethers_1$a.Contract(e,_abi$8,t)}}ISchemaResolver__factory$1.ISchemaResolver__factory=ISchemaResolver__factory;var SchemaResolver__factory$1={};Object.defineProperty(SchemaResolver__factory$1,"__esModule",{value:true});SchemaResolver__factory$1.SchemaResolver__factory=void 0;const ethers_1$9=require$$0;const _abi$7=[{inputs:[],name:"AccessDenied",type:"error"},{inputs:[],name:"InsufficientValue",type:"error"},{inputs:[],name:"InvalidEAS",type:"error"},{inputs:[],name:"InvalidLength",type:"error"},{inputs:[],name:"NotPayable",type:"error"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation",name:"attestation",type:"tuple"}],name:"attest",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[],name:"isPayable",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"pure",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation[]",name:"attestations",type:"tuple[]"},{internalType:"uint256[]",name:"values",type:"uint256[]"}],name:"multiAttest",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation[]",name:"attestations",type:"tuple[]"},{internalType:"uint256[]",name:"values",type:"uint256[]"}],name:"multiRevoke",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation",name:"attestation",type:"tuple"}],name:"revoke",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[],name:"version",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{stateMutability:"payable",type:"receive"}];class SchemaResolver__factory{static abi=_abi$7;static createInterface(){return new ethers_1$9.Interface(_abi$7)}static connect(e,t){return new ethers_1$9.Contract(e,_abi$7,t)}}SchemaResolver__factory$1.SchemaResolver__factory=SchemaResolver__factory;(function(e){var t=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[r]}}}Object.defineProperty(e,n,i)}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var r=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var n=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var n={};if(e!=null)for(var i in e)if(i!=="default"&&Object.prototype.hasOwnProperty.call(e,i))t(n,e,i);r(n,e);return n};Object.defineProperty(e,"__esModule",{value:true});e.SchemaResolver__factory=e.ISchemaResolver__factory=e.examples=void 0;e.examples=n(examples);var i=ISchemaResolver__factory$1;Object.defineProperty(e,"ISchemaResolver__factory",{enumerable:true,get:function(){return i.ISchemaResolver__factory}});var s=SchemaResolver__factory$1;Object.defineProperty(e,"SchemaResolver__factory",{enumerable:true,get:function(){return s.SchemaResolver__factory}})})(resolver);var EAS__factory$1={};Object.defineProperty(EAS__factory$1,"__esModule",{value:true});EAS__factory$1.EAS__factory=void 0;const ethers_1$8=require$$0;const _abi$6=[{inputs:[{internalType:"contract ISchemaRegistry",name:"registry",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"AccessDenied",type:"error"},{inputs:[],name:"AlreadyRevoked",type:"error"},{inputs:[],name:"AlreadyRevokedOffchain",type:"error"},{inputs:[],name:"AlreadyTimestamped",type:"error"},{inputs:[],name:"DeadlineExpired",type:"error"},{inputs:[],name:"InsufficientValue",type:"error"},{inputs:[],name:"InvalidAttestation",type:"error"},{inputs:[],name:"InvalidAttestations",type:"error"},{inputs:[],name:"InvalidExpirationTime",type:"error"},{inputs:[],name:"InvalidLength",type:"error"},{inputs:[],name:"InvalidNonce",type:"error"},{inputs:[],name:"InvalidOffset",type:"error"},{inputs:[],name:"InvalidRegistry",type:"error"},{inputs:[],name:"InvalidRevocation",type:"error"},{inputs:[],name:"InvalidRevocations",type:"error"},{inputs:[],name:"InvalidSchema",type:"error"},{inputs:[],name:"InvalidShortString",type:"error"},{inputs:[],name:"InvalidSignature",type:"error"},{inputs:[],name:"InvalidVerifier",type:"error"},{inputs:[],name:"Irrevocable",type:"error"},{inputs:[],name:"NotFound",type:"error"},{inputs:[],name:"NotPayable",type:"error"},{inputs:[{internalType:"string",name:"str",type:"string"}],name:"StringTooLong",type:"error"},{inputs:[],name:"WrongSchema",type:"error"},{anonymous:false,inputs:[{indexed:true,internalType:"address",name:"recipient",type:"address"},{indexed:true,internalType:"address",name:"attester",type:"address"},{indexed:false,internalType:"bytes32",name:"uid",type:"bytes32"},{indexed:true,internalType:"bytes32",name:"schemaUID",type:"bytes32"}],name:"Attested",type:"event"},{anonymous:false,inputs:[],name:"EIP712DomainChanged",type:"event"},{anonymous:false,inputs:[{indexed:false,internalType:"uint256",name:"oldNonce",type:"uint256"},{indexed:false,internalType:"uint256",name:"newNonce",type:"uint256"}],name:"NonceIncreased",type:"event"},{anonymous:false,inputs:[{indexed:true,internalType:"address",name:"recipient",type:"address"},{indexed:true,internalType:"address",name:"attester",type:"address"},{indexed:false,internalType:"bytes32",name:"uid",type:"bytes32"},{indexed:true,internalType:"bytes32",name:"schemaUID",type:"bytes32"}],name:"Revoked",type:"event"},{anonymous:false,inputs:[{indexed:true,internalType:"address",name:"revoker",type:"address"},{indexed:true,internalType:"bytes32",name:"data",type:"bytes32"},{indexed:true,internalType:"uint64",name:"timestamp",type:"uint64"}],name:"RevokedOffchain",type:"event"},{anonymous:false,inputs:[{indexed:true,internalType:"bytes32",name:"data",type:"bytes32"},{indexed:true,internalType:"uint64",name:"timestamp",type:"uint64"}],name:"Timestamped",type:"event"},{inputs:[{components:[{internalType:"bytes32",name:"schema",type:"bytes32"},{components:[{internalType:"address",name:"recipient",type:"address"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"bytes",name:"data",type:"bytes"},{internalType:"uint256",name:"value",type:"uint256"}],internalType:"struct AttestationRequestData",name:"data",type:"tuple"}],internalType:"struct AttestationRequest",name:"request",type:"tuple"}],name:"attest",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"schema",type:"bytes32"},{components:[{internalType:"address",name:"recipient",type:"address"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"bytes",name:"data",type:"bytes"},{internalType:"uint256",name:"value",type:"uint256"}],internalType:"struct AttestationRequestData",name:"data",type:"tuple"},{components:[{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],internalType:"struct Signature",name:"signature",type:"tuple"},{internalType:"address",name:"attester",type:"address"},{internalType:"uint64",name:"deadline",type:"uint64"}],internalType:"struct DelegatedAttestationRequest",name:"delegatedRequest",type:"tuple"}],name:"attestByDelegation",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"payable",type:"function"},{inputs:[],name:"eip712Domain",outputs:[{internalType:"bytes1",name:"fields",type:"bytes1"},{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"version",type:"string"},{internalType:"uint256",name:"chainId",type:"uint256"},{internalType:"address",name:"verifyingContract",type:"address"},{internalType:"bytes32",name:"salt",type:"bytes32"},{internalType:"uint256[]",name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getAttestTypeHash",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"bytes32",name:"uid",type:"bytes32"}],name:"getAttestation",outputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[],name:"getDomainSeparator",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"getName",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"getNonce",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"revoker",type:"address"},{internalType:"bytes32",name:"data",type:"bytes32"}],name:"getRevokeOffchain",outputs:[{internalType:"uint64",name:"",type:"uint64"}],stateMutability:"view",type:"function"},{inputs:[],name:"getRevokeTypeHash",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"},{inputs:[],name:"getSchemaRegistry",outputs:[{internalType:"contract ISchemaRegistry",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"data",type:"bytes32"}],name:"getTimestamp",outputs:[{internalType:"uint64",name:"",type:"uint64"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"newNonce",type:"uint256"}],name:"increaseNonce",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"uid",type:"bytes32"}],name:"isAttestationValid",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"schema",type:"bytes32"},{components:[{internalType:"address",name:"recipient",type:"address"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"bytes",name:"data",type:"bytes"},{internalType:"uint256",name:"value",type:"uint256"}],internalType:"struct AttestationRequestData[]",name:"data",type:"tuple[]"}],internalType:"struct MultiAttestationRequest[]",name:"multiRequests",type:"tuple[]"}],name:"multiAttest",outputs:[{internalType:"bytes32[]",name:"",type:"bytes32[]"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"schema",type:"bytes32"},{components:[{internalType:"address",name:"recipient",type:"address"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"bytes",name:"data",type:"bytes"},{internalType:"uint256",name:"value",type:"uint256"}],internalType:"struct AttestationRequestData[]",name:"data",type:"tuple[]"},{components:[{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],internalType:"struct Signature[]",name:"signatures",type:"tuple[]"},{internalType:"address",name:"attester",type:"address"},{internalType:"uint64",name:"deadline",type:"uint64"}],internalType:"struct MultiDelegatedAttestationRequest[]",name:"multiDelegatedRequests",type:"tuple[]"}],name:"multiAttestByDelegation",outputs:[{internalType:"bytes32[]",name:"",type:"bytes32[]"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"schema",type:"bytes32"},{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"uint256",name:"value",type:"uint256"}],internalType:"struct RevocationRequestData[]",name:"data",type:"tuple[]"}],internalType:"struct MultiRevocationRequest[]",name:"multiRequests",type:"tuple[]"}],name:"multiRevoke",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"schema",type:"bytes32"},{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"uint256",name:"value",type:"uint256"}],internalType:"struct RevocationRequestData[]",name:"data",type:"tuple[]"},{components:[{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],internalType:"struct Signature[]",name:"signatures",type:"tuple[]"},{internalType:"address",name:"revoker",type:"address"},{internalType:"uint64",name:"deadline",type:"uint64"}],internalType:"struct MultiDelegatedRevocationRequest[]",name:"multiDelegatedRequests",type:"tuple[]"}],name:"multiRevokeByDelegation",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes32[]",name:"data",type:"bytes32[]"}],name:"multiRevokeOffchain",outputs:[{internalType:"uint64",name:"",type:"uint64"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32[]",name:"data",type:"bytes32[]"}],name:"multiTimestamp",outputs:[{internalType:"uint64",name:"",type:"uint64"}],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"schema",type:"bytes32"},{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"uint256",name:"value",type:"uint256"}],internalType:"struct RevocationRequestData",name:"data",type:"tuple"}],internalType:"struct RevocationRequest",name:"request",type:"tuple"}],name:"revoke",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"schema",type:"bytes32"},{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"uint256",name:"value",type:"uint256"}],internalType:"struct RevocationRequestData",name:"data",type:"tuple"},{components:[{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],internalType:"struct Signature",name:"signature",type:"tuple"},{internalType:"address",name:"revoker",type:"address"},{internalType:"uint64",name:"deadline",type:"uint64"}],internalType:"struct DelegatedRevocationRequest",name:"delegatedRequest",type:"tuple"}],name:"revokeByDelegation",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes32",name:"data",type:"bytes32"}],name:"revokeOffchain",outputs:[{internalType:"uint64",name:"",type:"uint64"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"data",type:"bytes32"}],name:"timestamp",outputs:[{internalType:"uint64",name:"",type:"uint64"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"version",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}];const _bytecode$3="0x6101e06040523480156200001257600080fd5b5060405162004e7a38038062004e7a83398101604081905262000035916200020c565b60408051808201825260038082526245415360e81b602080840191909152835180850190945260058452640312e332e360dc1b90840152600160805260a052600060c0819052909190829082906200008f90839062000187565b61018052620000a081600162000187565b6101a052815160208084019190912061014052815190820120610160524661010052620001316101405161016051604080517f8b73c3c69bb8fe3d512ecc4cf759cc79239f7b179b0ffacaa9a75d522b39400f60208201529081019290925260608201524660808201523060a082015260009060c00160405160208183030381529060405280519060200120905090565b60e052505030610120526002620001498382620002e3565b5050506001600160a01b03811662000174576040516311a1e69760e01b815260040160405180910390fd5b6001600160a01b03166101c05262000424565b6000602083511015620001a7576200019f83620001c0565b9050620001ba565b81620001b48482620002e3565b5060ff90505b92915050565b600080829050601f81511115620001f7578260405163305a27a960e01b8152600401620001ee9190620003af565b60405180910390fd5b80516200020482620003ff565b179392505050565b6000602082840312156200021f57600080fd5b81516001600160a01b03811681146200023757600080fd5b9392505050565b634e487b7160e01b600052604160045260246000fd5b600181811c908216806200026957607f821691505b6020821081036200028a57634e487b7160e01b600052602260045260246000fd5b50919050565b601f821115620002de57600081815260208120601f850160051c81016020861015620002b95750805b601f850160051c820191505b81811015620002da57828155600101620002c5565b5050505b505050565b81516001600160401b03811115620002ff57620002ff6200023e565b620003178162000310845462000254565b8462000290565b602080601f8311600181146200034f5760008415620003365750858301515b600019600386901b1c1916600185901b178555620002da565b600085815260208120601f198616915b8281101562000380578886015182559484019460019091019084016200035f565b50858210156200039f5787850151600019600388901b60f8161c191681555b5050505050600190811b01905550565b600060208083528351808285015260005b81811015620003de57858101830151858201604001528201620003c0565b506000604082860101526040601f19601f8301168501019250505092915050565b805160208083015191908110156200028a5760001960209190910360031b1b16919050565b60805160a05160c05160e05161010051610120516101405161016051610180516101a0516101c0516149c1620004b960003960008181610538015281816116030152611f3b01526000610d4f01526000610d25015260006129c40152600061299c015260006128f7015260006129210152600061294b01526000610c3401526000610c0b01526000610be201526149c16000f3fe6080604052600436106101965760003560e01c806384b0196e116100e1578063cf190f341161008a578063e71ff36511610064578063e71ff365146104dc578063ed24911d146104fc578063f10b5cc814610511578063f17325e71461056257600080fd5b8063cf190f3414610446578063d45c443514610466578063e30bb5631461049d57600080fd5b8063a6d4dbc7116100bb578063a6d4dbc7146103a6578063b469318d146103b9578063b83010d31461041357600080fd5b806384b0196e1461033e5780639541152514610366578063a3112a641461037957600080fd5b806344adc90e116101435780634d0030701161011d5780634d003070146102e957806354fd4d501461030957806379f7573a1461031e57600080fd5b806344adc90e146102a357806346926267146102c35780634cb7e9e5146102d657600080fd5b806317d7de7c1161017457806317d7de7c1461022b5780632d0335ab1461024d5780633c0427151461029057600080fd5b80630eabf6601461019b57806312b11a17146101b057806313893f61146101f2575b600080fd5b6101ae6101a93660046137ef565b610575565b005b3480156101bc57600080fd5b507ffeb2925a02bae3dae48d424a0437a2b6ac939aa9230ddc55a1a76f065d9880765b6040519081526020015b60405180910390f35b3480156101fe57600080fd5b5061021261020d3660046137ef565b61070c565b60405167ffffffffffffffff90911681526020016101e9565b34801561023757600080fd5b50610240610751565b6040516101e9919061389f565b34801561025957600080fd5b506101df6102683660046138eb565b73ffffffffffffffffffffffffffffffffffffffff1660009081526003602052604090205490565b6101df61029e366004613908565b6107e3565b6102b66102b13660046137ef565b6108e6565b6040516101e99190613943565b6101ae6102d1366004613987565b610a67565b6101ae6102e43660046137ef565b610aeb565b3480156102f557600080fd5b5061021261030436600461399f565b610bce565b34801561031557600080fd5b50610240610bdb565b34801561032a57600080fd5b506101ae61033936600461399f565b610c7e565b34801561034a57600080fd5b50610353610d17565b6040516101e997969594939291906139f3565b6102b66103743660046137ef565b610dbb565b34801561038557600080fd5b5061039961039436600461399f565b61102e565b6040516101e99190613b63565b6101ae6103b4366004613b76565b6111f0565b3480156103c557600080fd5b506102126103d4366004613b89565b73ffffffffffffffffffffffffffffffffffffffff919091166000908152600660209081526040808320938352929052205467ffffffffffffffff1690565b34801561041f57600080fd5b507fb5d556f07587ec0f08cf386545cc4362c702a001650c2058002615ee5c9d1e756101df565b34801561045257600080fd5b5061021261046136600461399f565b611295565b34801561047257600080fd5b5061021261048136600461399f565b60009081526005602052604090205467ffffffffffffffff1690565b3480156104a957600080fd5b506104cc6104b836600461399f565b600090815260046020526040902054151590565b60405190151581526020016101e9565b3480156104e857600080fd5b506102126104f73660046137ef565b6112a3565b34801561050857600080fd5b506101df6112db565b34801561051d57600080fd5b5060405173ffffffffffffffffffffffffffffffffffffffff7f00000000000000000000000000000000000000000000000000000000000000001681526020016101e9565b6101df610570366004613bb5565b6112ea565b348160005b81811015610705577fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8201811460008686848181106105bb576105bb613bf0565b90506020028101906105cd9190613c1f565b6105d690613eb5565b60208101518051919250908015806105f357508260400151518114155b1561062a576040517f947d5a8400000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b60005b818110156106ce576106c66040518060a001604052808660000151815260200185848151811061065f5761065f613bf0565b602002602001015181526020018660400151848151811061068257610682613bf0565b60200260200101518152602001866060015173ffffffffffffffffffffffffffffffffffffffff168152602001866080015167ffffffffffffffff168152506113a8565b60010161062d565b506106e483600001518385606001518a886115ba565b6106ee9088613fdf565b9650505050506106fe8160010190565b905061057a565b5050505050565b60004282825b818110156107455761073d3387878481811061073057610730613bf0565b9050602002013585611c0b565b600101610712565b50909150505b92915050565b60606002805461076090613ff2565b80601f016020809104026020016040519081016040528092919081815260200182805461078c90613ff2565b80156107d95780601f106107ae576101008083540402835291602001916107d9565b820191906000526020600020905b8154815290600101906020018083116107bc57829003601f168201915b5050505050905090565b60006107f66107f183614161565b611d0a565b604080516001808252818301909252600091816020015b6040805160c081018252600080825260208083018290529282018190526060808301829052608083015260a082015282527fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff90920191018161080d57905050905061087b60208401846141dc565b61088490614210565b8160008151811061089757610897613bf0565b60209081029190910101526108c08335826108b860c0870160a088016138eb565b346001611e95565b602001516000815181106108d6576108d6613bf0565b6020026020010151915050919050565b60608160008167ffffffffffffffff81111561090457610904613c5d565b60405190808252806020026020018201604052801561093757816020015b60608152602001906001900390816109225790505b509050600034815b84811015610a51577fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff850181143689898481811061097f5761097f613bf0565b9050602002810190610991919061421c565b90506109a06020820182614250565b90506000036109db576040517f947d5a8400000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b6000610a0082356109ef6020850185614250565b6109f8916142b8565b338887611e95565b8051909150610a0f9086613fdf565b94508060200151878581518110610a2857610a28613bf0565b602002602001018190525080602001515186019550505050610a4a8160010190565b905061093f565b50610a5c83836125c8565b979650505050505050565b604080516001808252818301909252600091816020015b6040805180820190915260008082526020820152815260200190600190039081610a7e579050509050610ab93683900383016020840161432c565b81600081518110610acc57610acc613bf0565b6020908102919091010152610ae6823582333460016115ba565b505050565b348160005b81811015610705577fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8201811436868684818110610b3057610b30613bf0565b9050602002810190610b42919061421c565b9050610baf8135610b566020840184614348565b808060200260200160405190810160405280939291908181526020016000905b82821015610ba257610b936040830286013681900381019061432c565b81526020019060010190610b76565b50505050503388866115ba565b610bb99086613fdf565b94505050610bc78160010190565b9050610af0565b60004261074b83826126b2565b6060610c067f0000000000000000000000000000000000000000000000000000000000000000612774565b610c2f7f0000000000000000000000000000000000000000000000000000000000000000612774565b610c587f0000000000000000000000000000000000000000000000000000000000000000612774565b604051602001610c6a939291906143b0565b604051602081830303815290604052905090565b33600090815260036020526040902054808211610cc7576040517f756688fe00000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b3360009081526003602090815260409182902084905581518381529081018490527f57b09af877df9068fd60a69d7b21f5576b8b38955812d6ae4ac52942f1e38fb7910160405180910390a15050565b600060608082808083610d4a7f000000000000000000000000000000000000000000000000000000000000000083612832565b610d757f00000000000000000000000000000000000000000000000000000000000000006001612832565b604080516000808252602082019092527f0f000000000000000000000000000000000000000000000000000000000000009b939a50919850469750309650945092509050565b60608160008167ffffffffffffffff811115610dd957610dd9613c5d565b604051908082528060200260200182016040528015610e0c57816020015b6060815260200190600190039081610df75790505b509050600034815b84811015610a51577fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8501811436898984818110610e5457610e54613bf0565b9050602002810190610e669190613c1f565b9050366000610e786020840184614250565b909250905080801580610e995750610e936040850185614426565b90508114155b15610ed0576040517f947d5a8400000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b60005b81811015610fb157610fa96040518060a0016040528087600001358152602001868685818110610f0557610f05613bf0565b9050602002810190610f1791906141dc565b610f2090614210565b8152602001610f326040890189614426565b85818110610f4257610f42613bf0565b905060600201803603810190610f58919061448d565b8152602001610f6d6080890160608a016138eb565b73ffffffffffffffffffffffffffffffffffffffff168152602001610f9860a0890160808a016144a9565b67ffffffffffffffff169052611d0a565b600101610ed3565b506000610fda8535610fc385876142b8565b610fd36080890160608a016138eb565b8b8a611e95565b8051909150610fe99089613fdf565b975080602001518a888151811061100257611002613bf0565b6020026020010181905250806020015151890198505050505050506110278160010190565b9050610e14565b604080516101408101825260008082526020820181905291810182905260608082018390526080820183905260a0820183905260c0820183905260e0820183905261010082019290925261012081019190915260008281526004602081815260409283902083516101408101855281548152600182015492810192909252600281015467ffffffffffffffff808216958401959095526801000000000000000081048516606084015270010000000000000000000000000000000090049093166080820152600383015460a08201529082015473ffffffffffffffffffffffffffffffffffffffff90811660c0830152600583015490811660e083015274010000000000000000000000000000000000000000900460ff1615156101008201526006820180549192916101208401919061116790613ff2565b80601f016020809104026020016040519081016040528092919081815260200182805461119390613ff2565b80156111e05780601f106111b5576101008083540402835291602001916111e0565b820191906000526020600020905b8154815290600101906020018083116111c357829003601f168201915b5050505050815250509050919050565b611207611202368390038301836144c4565b6113a8565b604080516001808252818301909252600091816020015b604080518082019091526000808252602082015281526020019060019003908161121e5790505090506112593683900383016020840161432c565b8160008151811061126c5761126c613bf0565b6020908102919091010152610ae682358261128d60e0860160c087016138eb565b3460016115ba565b60004261074b338483611c0b565b60004282825b81811015610745576112d38686838181106112c6576112c6613bf0565b90506020020135846126b2565b6001016112a9565b60006112e56128dd565b905090565b604080516001808252818301909252600091829190816020015b6040805160c081018252600080825260208083018290529282018190526060808301829052608083015260a082015282527fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff90920191018161130457905050905061137260208401846141dc565b61137b90614210565b8160008151811061138e5761138e613bf0565b60209081029190910101526108c083358233346001611e95565b608081015167ffffffffffffffff16158015906113dc57504267ffffffffffffffff16816080015167ffffffffffffffff16105b15611413576040517f1ab7da6b00000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b6020808201516040808401516060850151855184518587015173ffffffffffffffffffffffffffffffffffffffff8416600090815260039098529487208054969794969495611508957fb5d556f07587ec0f08cf386545cc4362c702a001650c2058002615ee5c9d1e75959493928861148b83614532565b909155506080808c015160408051602081019990995273ffffffffffffffffffffffffffffffffffffffff9097169688019690965260608701949094529285019190915260a084015260c083015267ffffffffffffffff1660e0820152610100015b60405160208183030381529060405280519060200120612a15565b905061157e84606001518284602001518560400151866000015160405160200161156a93929190928352602083019190915260f81b7fff0000000000000000000000000000000000000000000000000000000000000016604082015260410190565b604051602081830303815290604052612a5d565b6115b4576040517f8baa579f00000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b50505050565b6040517fa2ea7c6e00000000000000000000000000000000000000000000000000000000815260048101869052600090819073ffffffffffffffffffffffffffffffffffffffff7f0000000000000000000000000000000000000000000000000000000000000000169063a2ea7c6e90602401600060405180830381865afa15801561164a573d6000803e3d6000fd5b505050506040513d6000823e601f3d9081017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0168201604052611690919081019061456a565b80519091506116cb576040517fbf37b20e00000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b855160008167ffffffffffffffff8111156116e8576116e8613c5d565b60405190808252806020026020018201604052801561178757816020015b60408051610140810182526000808252602080830182905292820181905260608083018290526080830182905260a0830182905260c0830182905260e0830182905261010083019190915261012082015282527fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff9092019101816117065790505b50905060008267ffffffffffffffff8111156117a5576117a5613c5d565b6040519080825280602002602001820160405280156117ce578160200160208202803683370190505b50905060005b83811015611bed5760008a82815181106117f0576117f0613bf0565b6020908102919091018101518051600090815260049092526040909120805491925090611849576040517fc5723b5100000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b8c816001015414611886576040517fbf37b20e00000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b600581015473ffffffffffffffffffffffffffffffffffffffff8c81169116146118dc576040517f4ca8886700000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b600581015474010000000000000000000000000000000000000000900460ff16611932576040517f157bd4c300000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b6002810154700100000000000000000000000000000000900467ffffffffffffffff161561198c576040517f905e710700000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b426002820180547fffffffffffffffff0000000000000000ffffffffffffffffffffffffffffffff811670010000000000000000000000000000000067ffffffffffffffff948516810291821793849055604080516101408101825287548152600188015460208201529386169286169290921791830191909152680100000000000000008304841660608301529091049091166080820152600382015460a0820152600482015473ffffffffffffffffffffffffffffffffffffffff90811660c0830152600583015490811660e083015274010000000000000000000000000000000000000000900460ff1615156101008201526006820180548391610120840191611a9890613ff2565b80601f0160208091040260200160405190810160405280929190818152602001828054611ac490613ff2565b8015611b115780601f10611ae657610100808354040283529160200191611b11565b820191906000526020600020905b815481529060010190602001808311611af457829003601f168201915b505050505081525050858481518110611b2c57611b2c613bf0565b60200260200101819052508160200151848481518110611b4e57611b4e613bf0565b6020026020010181815250508c8b73ffffffffffffffffffffffffffffffffffffffff16868581518110611b8457611b84613bf0565b602002602001015160c0015173ffffffffffffffffffffffffffffffffffffffff167ff930a6e2523c9cc298691873087a740550b8fc85a0680830414c148ed927f6158560000151604051611bdb91815260200190565b60405180910390a450506001016117d4565b50611bfd84838360018b8b612ad8565b9a9950505050505050505050565b73ffffffffffffffffffffffffffffffffffffffff83166000908152600660209081526040808320858452918290529091205467ffffffffffffffff1615611c7f576040517fec9d6eeb00000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b60008381526020829052604080822080547fffffffffffffffffffffffffffffffffffffffffffffffff00000000000000001667ffffffffffffffff861690811790915590519091859173ffffffffffffffffffffffffffffffffffffffff8816917f92a1f7a41a7c585a8b09e25b195e225b1d43248daca46b0faf9e0792777a222991a450505050565b608081015167ffffffffffffffff1615801590611d3e57504267ffffffffffffffff16816080015167ffffffffffffffff16105b15611d75576040517f1ab7da6b00000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b6020808201516040808401516060808601518651855186880151868801519488015160808901518051908b012060a08a015173ffffffffffffffffffffffffffffffffffffffff871660009081526003909c52988b2080549a9b989a9899611508997ffeb2925a02bae3dae48d424a0437a2b6ac939aa9230ddc55a1a76f065d988076999493928c611e0683614532565b919050558e608001516040516020016114ed9b9a999897969594939291909a8b5273ffffffffffffffffffffffffffffffffffffffff998a1660208c015260408b019890985295909716606089015267ffffffffffffffff938416608089015291151560a088015260c087015260e0860152610100850193909352610120840152166101408201526101600190565b60408051808201909152600081526060602082015284516040805180820190915260008152606060208201528167ffffffffffffffff811115611eda57611eda613c5d565b604051908082528060200260200182016040528015611f03578160200160208202803683370190505b5060208201526040517fa2ea7c6e000000000000000000000000000000000000000000000000000000008152600481018990526000907f000000000000000000000000000000000000000000000000000000000000000073ffffffffffffffffffffffffffffffffffffffff169063a2ea7c6e90602401600060405180830381865afa158015611f97573d6000803e3d6000fd5b505050506040513d6000823e601f3d9081017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0168201604052611fdd919081019061456a565b8051909150612018576040517fbf37b20e00000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b60008367ffffffffffffffff81111561203357612033613c5d565b6040519080825280602002602001820160405280156120d257816020015b60408051610140810182526000808252602080830182905292820181905260608083018290526080830182905260a0830182905260c0830182905260e0830182905261010083019190915261012082015282527fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff9092019101816120515790505b50905060008467ffffffffffffffff8111156120f0576120f0613c5d565b604051908082528060200260200182016040528015612119578160200160208202803683370190505b50905060005b858110156125a75760008b828151811061213b5761213b613bf0565b60200260200101519050600067ffffffffffffffff16816020015167ffffffffffffffff161415801561218657504267ffffffffffffffff16816020015167ffffffffffffffff1611155b156121bd576040517f08e8b93700000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b84604001511580156121d0575080604001515b15612207576040517f157bd4c300000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b60006040518061014001604052806000801b81526020018f815260200161222b4290565b67ffffffffffffffff168152602001836020015167ffffffffffffffff168152602001600067ffffffffffffffff16815260200183606001518152602001836000015173ffffffffffffffffffffffffffffffffffffffff1681526020018d73ffffffffffffffffffffffffffffffffffffffff16815260200183604001511515815260200183608001518152509050600080600090505b6122cd8382612ec7565b600081815260046020526040902054909250156122ec576001016122c3565b81835260008281526004602081815260409283902086518155908601516001820155918501516002830180546060880151608089015167ffffffffffffffff908116700100000000000000000000000000000000027fffffffffffffffff0000000000000000ffffffffffffffffffffffffffffffff92821668010000000000000000027fffffffffffffffffffffffffffffffff000000000000000000000000000000009094169190951617919091171691909117905560a0850151600383015560c0850151908201805473ffffffffffffffffffffffffffffffffffffffff9283167fffffffffffffffffffffffff000000000000000000000000000000000000000090911617905560e0850151600583018054610100880151151574010000000000000000000000000000000000000000027fffffffffffffffffffffff0000000000000000000000000000000000000000009091169290931691909117919091179055610120840151849190600682019061246b9082614690565b5050506060840151156124c25760608401516000908152600460205260409020546124c2576040517fc5723b5100000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b828786815181106124d5576124d5613bf0565b60200260200101819052508360a001518686815181106124f7576124f7613bf0565b602002602001018181525050818960200151868151811061251a5761251a613bf0565b6020026020010181815250508f8e73ffffffffffffffffffffffffffffffffffffffff16856000015173ffffffffffffffffffffffffffffffffffffffff167f8bf46bf4cfd674fa735a3d63ec1c9ad4153f033c290341f3a588b75685141b358560405161258a91815260200190565b60405180910390a4505050506125a08160010190565b905061211f565b506125b783838360008c8c612ad8565b845250919998505050505050505050565b606060008267ffffffffffffffff8111156125e5576125e5613c5d565b60405190808252806020026020018201604052801561260e578160200160208202803683370190505b508451909150600090815b818110156126a757600087828151811061263557612635613bf0565b6020026020010151905060008151905060005b818110156126935782818151811061266257612662613bf0565b602002602001015187878151811061267c5761267c613bf0565b602090810291909101015260019586019501612648565b5050506126a08160010190565b9050612619565b509195945050505050565b60008281526005602052604090205467ffffffffffffffff1615612702576040517f2e26794600000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b60008281526005602052604080822080547fffffffffffffffffffffffffffffffffffffffffffffffff00000000000000001667ffffffffffffffff85169081179091559051909184917f5aafceeb1c7ad58e4a84898bdee37c02c0fc46e7d24e6b60e8209449f183459f9190a35050565b6060600061278183612f26565b600101905060008167ffffffffffffffff8111156127a1576127a1613c5d565b6040519080825280601f01601f1916602001820160405280156127cb576020820181803683370190505b5090508181016020015b7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff017f3031323334353637383961626364656600000000000000000000000000000000600a86061a8153600a85049450846127d557509392505050565b606060ff831461284c5761284583613008565b905061074b565b81805461285890613ff2565b80601f016020809104026020016040519081016040528092919081815260200182805461288490613ff2565b80156128d15780601f106128a6576101008083540402835291602001916128d1565b820191906000526020600020905b8154815290600101906020018083116128b457829003601f168201915b5050505050905061074b565b60003073ffffffffffffffffffffffffffffffffffffffff7f00000000000000000000000000000000000000000000000000000000000000001614801561294357507f000000000000000000000000000000000000000000000000000000000000000046145b1561296d57507f000000000000000000000000000000000000000000000000000000000000000090565b6112e5604080517f8b73c3c69bb8fe3d512ecc4cf759cc79239f7b179b0ffacaa9a75d522b39400f60208201527f0000000000000000000000000000000000000000000000000000000000000000918101919091527f000000000000000000000000000000000000000000000000000000000000000060608201524660808201523060a082015260009060c00160405160208183030381529060405280519060200120905090565b600061074b612a226128dd565b836040517f19010000000000000000000000000000000000000000000000000000000000008152600281019290925260228201526042902090565b6000806000612a6c8585613047565b90925090506000816004811115612a8557612a856147aa565b148015612abd57508573ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff16145b80612ace5750612ace86868661308c565b9695505050505050565b84516000906001819003612b3057612b288888600081518110612afd57612afd613bf0565b602002602001015188600081518110612b1857612b18613bf0565b60200260200101518888886131e9565b915050612ace565b602088015173ffffffffffffffffffffffffffffffffffffffff8116612bd15760005b82811015612bb657878181518110612b6d57612b6d613bf0565b6020026020010151600014612bae576040517f1574f9f300000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b600101612b53565b508315612bc657612bc685613508565b600092505050612ace565b6000808273ffffffffffffffffffffffffffffffffffffffff1663ce46e0466040518163ffffffff1660e01b8152600401602060405180830381865afa158015612c1f573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190612c4391906147d9565b905060005b84811015612d005760008a8281518110612c6457612c64613bf0565b6020026020010151905080600003612c7c5750612cf8565b82612cb3576040517f1574f9f300000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b88811115612ced576040517f1101129400000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b978890039792909201915b600101612c48565b508715612ddb576040517f88e5b2d900000000000000000000000000000000000000000000000000000000815273ffffffffffffffffffffffffffffffffffffffff8416906388e5b2d9908490612d5d908e908e906004016147f6565b60206040518083038185885af1158015612d7b573d6000803e3d6000fd5b50505050506040513d601f19601f82011682018060405250810190612da091906147d9565b612dd6576040517fbf2f3a8b00000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b612eaa565b6040517f91db0b7e00000000000000000000000000000000000000000000000000000000815273ffffffffffffffffffffffffffffffffffffffff8416906391db0b7e908490612e31908e908e906004016147f6565b60206040518083038185885af1158015612e4f573d6000803e3d6000fd5b50505050506040513d601f19601f82011682018060405250810190612e7491906147d9565b612eaa576040517fe8bee83900000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b8515612eb957612eb987613508565b509998505050505050505050565b60208083015160c084015160e0850151604080870151606088015161010089015160a08a01516101208b01519451600099612f0899989796918c910161488a565b60405160208183030381529060405280519060200120905092915050565b6000807a184f03e93ff9f4daa797ed6e38ed64bf6a1f0100000000000000008310612f6f577a184f03e93ff9f4daa797ed6e38ed64bf6a1f010000000000000000830492506040015b6d04ee2d6d415b85acef81000000008310612f9b576d04ee2d6d415b85acef8100000000830492506020015b662386f26fc100008310612fb957662386f26fc10000830492506010015b6305f5e1008310612fd1576305f5e100830492506008015b6127108310612fe557612710830492506004015b60648310612ff7576064830492506002015b600a831061074b5760010192915050565b606060006130158361351b565b604080516020808252818301909252919250600091906020820181803683375050509182525060208101929092525090565b600080825160410361307d5760208301516040840151606085015160001a6130718782858561355c565b94509450505050613085565b506000905060025b9250929050565b60008060008573ffffffffffffffffffffffffffffffffffffffff16631626ba7e60e01b86866040516024016130c3929190614968565b604080517fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe08184030181529181526020820180517bffffffffffffffffffffffffffffffffffffffffffffffffffffffff167fffffffff0000000000000000000000000000000000000000000000000000000090941693909317909252905161314c9190614989565b600060405180830381855afa9150503d8060008114613187576040519150601f19603f3d011682016040523d82523d6000602084013e61318c565b606091505b50915091508180156131a057506020815110155b8015612ace575080517f1626ba7e00000000000000000000000000000000000000000000000000000000906131de908301602090810190840161499b565b149695505050505050565b602086015160009073ffffffffffffffffffffffffffffffffffffffff811661325d578515613244576040517f1574f9f300000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b82156132535761325384613508565b6000915050612ace565b8515613348578073ffffffffffffffffffffffffffffffffffffffff1663ce46e0466040518163ffffffff1660e01b8152600401602060405180830381865afa1580156132ae573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906132d291906147d9565b613308576040517f1574f9f300000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b83861115613342576040517f1101129400000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b85840393505b8415613420576040517fe49617e100000000000000000000000000000000000000000000000000000000815273ffffffffffffffffffffffffffffffffffffffff82169063e49617e19088906133a2908b90600401613b63565b60206040518083038185885af11580156133c0573d6000803e3d6000fd5b50505050506040513d601f19601f820116820180604052508101906133e591906147d9565b61341b576040517fccf3bb2700000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b6134ed565b6040517fe60c350500000000000000000000000000000000000000000000000000000000815273ffffffffffffffffffffffffffffffffffffffff82169063e60c3505908890613474908b90600401613b63565b60206040518083038185885af1158015613492573d6000803e3d6000fd5b50505050506040513d601f19601f820116820180604052508101906134b791906147d9565b6134ed576040517fbd8ba84d00000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b82156134fc576134fc84613508565b50939695505050505050565b801561351857613518338261364b565b50565b600060ff8216601f81111561074b576040517fb3512b0c00000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b6000807f7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a08311156135935750600090506003613642565b6040805160008082526020820180845289905260ff881692820192909252606081018690526080810185905260019060a0016020604051602081039080840390855afa1580156135e7573d6000803e3d6000fd5b50506040517fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0015191505073ffffffffffffffffffffffffffffffffffffffff811661363b57600060019250925050613642565b9150600090505b94509492505050565b804710156136ba576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601d60248201527f416464726573733a20696e73756666696369656e742062616c616e636500000060448201526064015b60405180910390fd5b60008273ffffffffffffffffffffffffffffffffffffffff168260405160006040518083038185875af1925050503d8060008114613714576040519150601f19603f3d011682016040523d82523d6000602084013e613719565b606091505b5050905080610ae6576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152603a60248201527f416464726573733a20756e61626c6520746f2073656e642076616c75652c207260448201527f6563697069656e74206d6179206861766520726576657274656400000000000060648201526084016136b1565b60008083601f8401126137bc57600080fd5b50813567ffffffffffffffff8111156137d457600080fd5b6020830191508360208260051b850101111561308557600080fd5b6000806020838503121561380257600080fd5b823567ffffffffffffffff81111561381957600080fd5b613825858286016137aa565b90969095509350505050565b60005b8381101561384c578181015183820152602001613834565b50506000910152565b6000815180845261386d816020860160208601613831565b601f017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0169290920160200192915050565b6020815260006138b26020830184613855565b9392505050565b73ffffffffffffffffffffffffffffffffffffffff8116811461351857600080fd5b80356138e6816138b9565b919050565b6000602082840312156138fd57600080fd5b81356138b2816138b9565b60006020828403121561391a57600080fd5b813567ffffffffffffffff81111561393157600080fd5b820160e081850312156138b257600080fd5b6020808252825182820181905260009190848201906040850190845b8181101561397b5783518352928401929184019160010161395f565b50909695505050505050565b60006060828403121561399957600080fd5b50919050565b6000602082840312156139b157600080fd5b5035919050565b600081518084526020808501945080840160005b838110156139e8578151875295820195908201906001016139cc565b509495945050505050565b7fff000000000000000000000000000000000000000000000000000000000000008816815260e060208201526000613a2e60e0830189613855565b8281036040840152613a408189613855565b905086606084015273ffffffffffffffffffffffffffffffffffffffff861660808401528460a084015282810360c0840152611bfd81856139b8565b600061014082518452602083015160208501526040830151613aaa604086018267ffffffffffffffff169052565b506060830151613ac6606086018267ffffffffffffffff169052565b506080830151613ae2608086018267ffffffffffffffff169052565b5060a083015160a085015260c0830151613b1460c086018273ffffffffffffffffffffffffffffffffffffffff169052565b5060e0830151613b3c60e086018273ffffffffffffffffffffffffffffffffffffffff169052565b506101008381015115159085015261012080840151818601839052612ace83870182613855565b6020815260006138b26020830184613a7c565b6000610100828403121561399957600080fd5b60008060408385031215613b9c57600080fd5b8235613ba7816138b9565b946020939093013593505050565b600060208284031215613bc757600080fd5b813567ffffffffffffffff811115613bde57600080fd5b8201604081850312156138b257600080fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b600082357fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff61833603018112613c5357600080fd5b9190910192915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b60405160a0810167ffffffffffffffff81118282101715613caf57613caf613c5d565b60405290565b60405160c0810167ffffffffffffffff81118282101715613caf57613caf613c5d565b6040516080810167ffffffffffffffff81118282101715613caf57613caf613c5d565b604051601f82017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe016810167ffffffffffffffff81118282101715613d4257613d42613c5d565b604052919050565b600067ffffffffffffffff821115613d6457613d64613c5d565b5060051b60200190565b600060408284031215613d8057600080fd5b6040516040810181811067ffffffffffffffff82111715613da357613da3613c5d565b604052823581526020928301359281019290925250919050565b600060608284031215613dcf57600080fd5b6040516060810181811067ffffffffffffffff82111715613df257613df2613c5d565b604052905080823560ff81168114613e0957600080fd5b8082525060208301356020820152604083013560408201525092915050565b600082601f830112613e3957600080fd5b81356020613e4e613e4983613d4a565b613cfb565b82815260609283028501820192828201919087851115613e6d57600080fd5b8387015b85811015613e9057613e838982613dbd565b8452928401928101613e71565b5090979650505050505050565b803567ffffffffffffffff811681146138e657600080fd5b600060a08236031215613ec757600080fd5b613ecf613c8c565b8235815260208084013567ffffffffffffffff80821115613eef57600080fd5b9085019036601f830112613f0257600080fd5b8135613f10613e4982613d4a565b81815260069190911b83018401908481019036831115613f2f57600080fd5b938501935b82851015613f5857613f463686613d6e565b82528582019150604085019450613f34565b80868801525050506040860135925080831115613f7457600080fd5b5050613f8236828601613e28565b604083015250613f94606084016138db565b6060820152613fa560808401613e9d565b608082015292915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b8181038181111561074b5761074b613fb0565b600181811c9082168061400657607f821691505b602082108103613999577f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b801515811461351857600080fd5b600067ffffffffffffffff82111561406757614067613c5d565b50601f017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe01660200190565b600060c082840312156140a557600080fd5b6140ad613cb5565b905081356140ba816138b9565b815260206140c9838201613e9d565b8183015260408301356140db8161403f565b604083015260608381013590830152608083013567ffffffffffffffff81111561410457600080fd5b8301601f8101851361411557600080fd5b8035614123613e498261404d565b818152868483850101111561413757600080fd5b818484018583013760008483830101528060808601525050505060a082013560a082015292915050565b600060e0823603121561417357600080fd5b61417b613c8c565b82358152602083013567ffffffffffffffff81111561419957600080fd5b6141a536828601614093565b6020830152506141b83660408501613dbd565b604082015260a08301356141cb816138b9565b6060820152613fa560c08401613e9d565b600082357fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff41833603018112613c5357600080fd5b600061074b3683614093565b600082357fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc1833603018112613c5357600080fd5b60008083357fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe184360301811261428557600080fd5b83018035915067ffffffffffffffff8211156142a057600080fd5b6020019150600581901b360382131561308557600080fd5b60006142c6613e4984613d4a565b80848252602080830192508560051b8501368111156142e457600080fd5b855b8181101561432057803567ffffffffffffffff8111156143065760008081fd5b61431236828a01614093565b8652509382019382016142e6565b50919695505050505050565b60006040828403121561433e57600080fd5b6138b28383613d6e565b60008083357fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe184360301811261437d57600080fd5b83018035915067ffffffffffffffff82111561439857600080fd5b6020019150600681901b360382131561308557600080fd5b600084516143c2818460208901613831565b80830190507f2e0000000000000000000000000000000000000000000000000000000000000080825285516143fe816001850160208a01613831565b60019201918201528351614419816002840160208801613831565b0160020195945050505050565b60008083357fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe184360301811261445b57600080fd5b83018035915067ffffffffffffffff82111561447657600080fd5b602001915060608102360382131561308557600080fd5b60006060828403121561449f57600080fd5b6138b28383613dbd565b6000602082840312156144bb57600080fd5b6138b282613e9d565b600061010082840312156144d757600080fd5b6144df613c8c565b823581526144f08460208501613d6e565b60208201526145028460608501613dbd565b604082015260c0830135614515816138b9565b606082015261452660e08401613e9d565b60808201529392505050565b60007fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff820361456357614563613fb0565b5060010190565b6000602080838503121561457d57600080fd5b825167ffffffffffffffff8082111561459557600080fd5b90840190608082870312156145a957600080fd5b6145b1613cd8565b82518152838301516145c2816138b9565b8185015260408301516145d48161403f565b60408201526060830151828111156145eb57600080fd5b80840193505086601f84011261460057600080fd5b82519150614610613e498361404d565b828152878584860101111561462457600080fd5b61463383868301878701613831565b60608201529695505050505050565b601f821115610ae657600081815260208120601f850160051c810160208610156146695750805b601f850160051c820191505b8181101561468857828155600101614675565b505050505050565b815167ffffffffffffffff8111156146aa576146aa613c5d565b6146be816146b88454613ff2565b84614642565b602080601f83116001811461471157600084156146db5750858301515b7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff600386901b1c1916600185901b178555614688565b6000858152602081207fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe08616915b8281101561475e5788860151825594840194600190910190840161473f565b508582101561479a57878501517fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff600388901b60f8161c191681555b5050505050600190811b01905550565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602160045260246000fd5b6000602082840312156147eb57600080fd5b81516138b28161403f565b6000604082016040835280855180835260608501915060608160051b8601019250602080880160005b8381101561486b577fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa0888703018552614859868351613a7c565b9550938201939082019060010161481f565b50508584038187015250505061488181856139b8565b95945050505050565b89815260007fffffffffffffffffffffffffffffffffffffffff000000000000000000000000808b60601b166020840152808a60601b166034840152507fffffffffffffffff000000000000000000000000000000000000000000000000808960c01b166048840152808860c01b1660508401525085151560f81b60588301528460598301528351614923816079850160208801613831565b80830190507fffffffff000000000000000000000000000000000000000000000000000000008460e01b166079820152607d81019150509a9950505050505050505050565b8281526040602082015260006149816040830184613855565b949350505050565b60008251613c53818460208701613831565b6000602082840312156149ad57600080fd5b505191905056fea164736f6c6343000813000a";const isSuperArgs$3=e=>e.length>1;class EAS__factory extends ethers_1$8.ContractFactory{constructor(...e){if(isSuperArgs$3(e)){super(...e)}else{super(_abi$6,_bytecode$3,e[0])}}getDeployTransaction(e,t){return super.getDeployTransaction(e,t||{})}deploy(e,t){return super.deploy(e,t||{})}connect(e){return super.connect(e)}static bytecode=_bytecode$3;static abi=_abi$6;static createInterface(){return new ethers_1$8.Interface(_abi$6)}static connect(e,t){return new ethers_1$8.Contract(e,_abi$6,t)}}EAS__factory$1.EAS__factory=EAS__factory;var IEAS__factory$1={};Object.defineProperty(IEAS__factory$1,"__esModule",{value:true});IEAS__factory$1.IEAS__factory=void 0;const ethers_1$7=require$$0;const _abi$5=[{anonymous:false,inputs:[{indexed:true,internalType:"address",name:"recipient",type:"address"},{indexed:true,internalType:"address",name:"attester",type:"address"},{indexed:false,internalType:"bytes32",name:"uid",type:"bytes32"},{indexed:true,internalType:"bytes32",name:"schemaUID",type:"bytes32"}],name:"Attested",type:"event"},{anonymous:false,inputs:[{indexed:true,internalType:"address",name:"recipient",type:"address"},{indexed:true,internalType:"address",name:"attester",type:"address"},{indexed:false,internalType:"bytes32",name:"uid",type:"bytes32"},{indexed:true,internalType:"bytes32",name:"schemaUID",type:"bytes32"}],name:"Revoked",type:"event"},{anonymous:false,inputs:[{indexed:true,internalType:"address",name:"revoker",type:"address"},{indexed:true,internalType:"bytes32",name:"data",type:"bytes32"},{indexed:true,internalType:"uint64",name:"timestamp",type:"uint64"}],name:"RevokedOffchain",type:"event"},{anonymous:false,inputs:[{indexed:true,internalType:"bytes32",name:"data",type:"bytes32"},{indexed:true,internalType:"uint64",name:"timestamp",type:"uint64"}],name:"Timestamped",type:"event"},{inputs:[{components:[{internalType:"bytes32",name:"schema",type:"bytes32"},{components:[{internalType:"address",name:"recipient",type:"address"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"bytes",name:"data",type:"bytes"},{internalType:"uint256",name:"value",type:"uint256"}],internalType:"struct AttestationRequestData",name:"data",type:"tuple"}],internalType:"struct AttestationRequest",name:"request",type:"tuple"}],name:"attest",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"schema",type:"bytes32"},{components:[{internalType:"address",name:"recipient",type:"address"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"bytes",name:"data",type:"bytes"},{internalType:"uint256",name:"value",type:"uint256"}],internalType:"struct AttestationRequestData",name:"data",type:"tuple"},{components:[{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],internalType:"struct Signature",name:"signature",type:"tuple"},{internalType:"address",name:"attester",type:"address"},{internalType:"uint64",name:"deadline",type:"uint64"}],internalType:"struct DelegatedAttestationRequest",name:"delegatedRequest",type:"tuple"}],name:"attestByDelegation",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes32",name:"uid",type:"bytes32"}],name:"getAttestation",outputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"revoker",type:"address"},{internalType:"bytes32",name:"data",type:"bytes32"}],name:"getRevokeOffchain",outputs:[{internalType:"uint64",name:"",type:"uint64"}],stateMutability:"view",type:"function"},{inputs:[],name:"getSchemaRegistry",outputs:[{internalType:"contract ISchemaRegistry",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"data",type:"bytes32"}],name:"getTimestamp",outputs:[{internalType:"uint64",name:"",type:"uint64"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"uid",type:"bytes32"}],name:"isAttestationValid",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"schema",type:"bytes32"},{components:[{internalType:"address",name:"recipient",type:"address"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"bytes",name:"data",type:"bytes"},{internalType:"uint256",name:"value",type:"uint256"}],internalType:"struct AttestationRequestData[]",name:"data",type:"tuple[]"}],internalType:"struct MultiAttestationRequest[]",name:"multiRequests",type:"tuple[]"}],name:"multiAttest",outputs:[{internalType:"bytes32[]",name:"",type:"bytes32[]"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"schema",type:"bytes32"},{components:[{internalType:"address",name:"recipient",type:"address"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"bytes",name:"data",type:"bytes"},{internalType:"uint256",name:"value",type:"uint256"}],internalType:"struct AttestationRequestData[]",name:"data",type:"tuple[]"},{components:[{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],internalType:"struct Signature[]",name:"signatures",type:"tuple[]"},{internalType:"address",name:"attester",type:"address"},{internalType:"uint64",name:"deadline",type:"uint64"}],internalType:"struct MultiDelegatedAttestationRequest[]",name:"multiDelegatedRequests",type:"tuple[]"}],name:"multiAttestByDelegation",outputs:[{internalType:"bytes32[]",name:"",type:"bytes32[]"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"schema",type:"bytes32"},{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"uint256",name:"value",type:"uint256"}],internalType:"struct RevocationRequestData[]",name:"data",type:"tuple[]"}],internalType:"struct MultiRevocationRequest[]",name:"multiRequests",type:"tuple[]"}],name:"multiRevoke",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"schema",type:"bytes32"},{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"uint256",name:"value",type:"uint256"}],internalType:"struct RevocationRequestData[]",name:"data",type:"tuple[]"},{components:[{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],internalType:"struct Signature[]",name:"signatures",type:"tuple[]"},{internalType:"address",name:"revoker",type:"address"},{internalType:"uint64",name:"deadline",type:"uint64"}],internalType:"struct MultiDelegatedRevocationRequest[]",name:"multiDelegatedRequests",type:"tuple[]"}],name:"multiRevokeByDelegation",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes32[]",name:"data",type:"bytes32[]"}],name:"multiRevokeOffchain",outputs:[{internalType:"uint64",name:"",type:"uint64"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32[]",name:"data",type:"bytes32[]"}],name:"multiTimestamp",outputs:[{internalType:"uint64",name:"",type:"uint64"}],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"schema",type:"bytes32"},{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"uint256",name:"value",type:"uint256"}],internalType:"struct RevocationRequestData",name:"data",type:"tuple"}],internalType:"struct RevocationRequest",name:"request",type:"tuple"}],name:"revoke",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"schema",type:"bytes32"},{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"uint256",name:"value",type:"uint256"}],internalType:"struct RevocationRequestData",name:"data",type:"tuple"},{components:[{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],internalType:"struct Signature",name:"signature",type:"tuple"},{internalType:"address",name:"revoker",type:"address"},{internalType:"uint64",name:"deadline",type:"uint64"}],internalType:"struct DelegatedRevocationRequest",name:"delegatedRequest",type:"tuple"}],name:"revokeByDelegation",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes32",name:"data",type:"bytes32"}],name:"revokeOffchain",outputs:[{internalType:"uint64",name:"",type:"uint64"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"data",type:"bytes32"}],name:"timestamp",outputs:[{internalType:"uint64",name:"",type:"uint64"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"version",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}];class IEAS__factory{static abi=_abi$5;static createInterface(){return new ethers_1$7.Interface(_abi$5)}static connect(e,t){return new ethers_1$7.Contract(e,_abi$5,t)}}IEAS__factory$1.IEAS__factory=IEAS__factory;var ISchemaRegistry__factory$1={};Object.defineProperty(ISchemaRegistry__factory$1,"__esModule",{value:true});ISchemaRegistry__factory$1.ISchemaRegistry__factory=void 0;const ethers_1$6=require$$0;const _abi$4=[{anonymous:false,inputs:[{indexed:true,internalType:"bytes32",name:"uid",type:"bytes32"},{indexed:true,internalType:"address",name:"registerer",type:"address"},{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"contract ISchemaResolver",name:"resolver",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"string",name:"schema",type:"string"}],indexed:false,internalType:"struct SchemaRecord",name:"schema",type:"tuple"}],name:"Registered",type:"event"},{inputs:[{internalType:"bytes32",name:"uid",type:"bytes32"}],name:"getSchema",outputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"contract ISchemaResolver",name:"resolver",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"string",name:"schema",type:"string"}],internalType:"struct SchemaRecord",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"schema",type:"string"},{internalType:"contract ISchemaResolver",name:"resolver",type:"address"},{internalType:"bool",name:"revocable",type:"bool"}],name:"register",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"version",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}];class ISchemaRegistry__factory{static abi=_abi$4;static createInterface(){return new ethers_1$6.Interface(_abi$4)}static connect(e,t){return new ethers_1$6.Contract(e,_abi$4,t)}}ISchemaRegistry__factory$1.ISchemaRegistry__factory=ISchemaRegistry__factory;var ISemver__factory$1={};Object.defineProperty(ISemver__factory$1,"__esModule",{value:true});ISemver__factory$1.ISemver__factory=void 0;const ethers_1$5=require$$0;const _abi$3=[{inputs:[],name:"version",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}];class ISemver__factory{static abi=_abi$3;static createInterface(){return new ethers_1$5.Interface(_abi$3)}static connect(e,t){return new ethers_1$5.Contract(e,_abi$3,t)}}ISemver__factory$1.ISemver__factory=ISemver__factory;var Indexer__factory$1={};Object.defineProperty(Indexer__factory$1,"__esModule",{value:true});Indexer__factory$1.Indexer__factory=void 0;const ethers_1$4=require$$0;const _abi$2=[{inputs:[{internalType:"contract IEAS",name:"eas",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"InvalidAttestation",type:"error"},{inputs:[],name:"InvalidEAS",type:"error"},{inputs:[],name:"InvalidOffset",type:"error"},{anonymous:false,inputs:[{indexed:true,internalType:"bytes32",name:"uid",type:"bytes32"}],name:"Indexed",type:"event"},{inputs:[],name:"getEAS",outputs:[{internalType:"contract IEAS",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"recipient",type:"address"},{internalType:"bytes32",name:"schemaUID",type:"bytes32"}],name:"getReceivedAttestationUIDCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"recipient",type:"address"},{internalType:"bytes32",name:"schemaUID",type:"bytes32"},{internalType:"uint256",name:"start",type:"uint256"},{internalType:"uint256",name:"length",type:"uint256"},{internalType:"bool",name:"reverseOrder",type:"bool"}],name:"getReceivedAttestationUIDs",outputs:[{internalType:"bytes32[]",name:"",type:"bytes32[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"schemaUID",type:"bytes32"}],name:"getSchemaAttestationUIDCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"schemaUID",type:"bytes32"},{internalType:"uint256",name:"start",type:"uint256"},{internalType:"uint256",name:"length",type:"uint256"},{internalType:"bool",name:"reverseOrder",type:"bool"}],name:"getSchemaAttestationUIDs",outputs:[{internalType:"bytes32[]",name:"",type:"bytes32[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"schemaUID",type:"bytes32"},{internalType:"address",name:"attester",type:"address"},{internalType:"address",name:"recipient",type:"address"}],name:"getSchemaAttesterRecipientAttestationUIDCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"schemaUID",type:"bytes32"},{internalType:"address",name:"attester",type:"address"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"start",type:"uint256"},{internalType:"uint256",name:"length",type:"uint256"},{internalType:"bool",name:"reverseOrder",type:"bool"}],name:"getSchemaAttesterRecipientAttestationUIDs",outputs:[{internalType:"bytes32[]",name:"",type:"bytes32[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"attester",type:"address"},{internalType:"bytes32",name:"schemaUID",type:"bytes32"}],name:"getSentAttestationUIDCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"attester",type:"address"},{internalType:"bytes32",name:"schemaUID",type:"bytes32"},{internalType:"uint256",name:"start",type:"uint256"},{internalType:"uint256",name:"length",type:"uint256"},{internalType:"bool",name:"reverseOrder",type:"bool"}],name:"getSentAttestationUIDs",outputs:[{internalType:"bytes32[]",name:"",type:"bytes32[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"attestationUID",type:"bytes32"}],name:"indexAttestation",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32[]",name:"attestationUIDs",type:"bytes32[]"}],name:"indexAttestations",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"attestationUID",type:"bytes32"}],name:"isAttestationIndexed",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"version",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}];const _bytecode$2="0x61010060405234801561001157600080fd5b506040516111b13803806111b183398101604081905261003091610077565b6001608052600360a052600060c0526001600160a01b038116610066576040516341bc07ff60e11b815260040160405180910390fd5b6001600160a01b031660e0526100a7565b60006020828403121561008957600080fd5b81516001600160a01b03811681146100a057600080fd5b9392505050565b60805160a05160c05160e0516110ca6100e7600039600081816101ea01526108330152600061034c01526000610323015260006102fa01526110ca6000f3fe608060405234801561001057600080fd5b50600436106100df5760003560e01c8063715ecdf61161008c578063b616352a11610066578063b616352a1461026d578063bbbdc81814610282578063ea51994b14610295578063ec864cba146102e057600080fd5b8063715ecdf61461021457806389a82fbe14610227578063af288efe1461025a57600080fd5b806354fd4d50116100bd57806354fd4d501461019b57806363bbf81b146101b057806365c40b9c146101d057600080fd5b80632412e9cc146100e4578063288a0a7b146101385780632f45f90e1461017b575b600080fd5b6101256100f2366004610b38565b73ffffffffffffffffffffffffffffffffffffffff91909116600090815260208181526040808320938352929052205490565b6040519081526020015b60405180910390f35b610125610146366004610b38565b73ffffffffffffffffffffffffffffffffffffffff919091166000908152600160209081526040808320938352929052205490565b610125610189366004610b64565b60009081526003602052604090205490565b6101a36102f3565b60405161012f9190610ba1565b6101c36101be366004610c00565b610396565b60405161012f9190610c41565b60405173ffffffffffffffffffffffffffffffffffffffff7f000000000000000000000000000000000000000000000000000000000000000016815260200161012f565b6101c3610222366004610c85565b610410565b61024a610235366004610b64565b60009081526004602052604090205460ff1690565b604051901515815260200161012f565b6101c3610268366004610cec565b6104ad565b61028061027b366004610d42565b61053c565b005b610280610290366004610b64565b610577565b6101256102a3366004610db7565b600092835260026020908152604080852073ffffffffffffffffffffffffffffffffffffffff948516865282528085209290931684525290205490565b6101c36102ee366004610cec565b610583565b606061031e7f000000000000000000000000000000000000000000000000000000000000000061060a565b6103477f000000000000000000000000000000000000000000000000000000000000000061060a565b6103707f000000000000000000000000000000000000000000000000000000000000000061060a565b60405160200161038293929190610df9565b604051602081830303815290604052905090565b6060610405600360008781526020019081526020016000208054806020026020016040519081016040528092919081815260200182805480156103f857602002820191906000526020600020905b8154815260200190600101908083116103e4575b50505050508585856106c8565b90505b949350505050565b600086815260026020908152604080832073ffffffffffffffffffffffffffffffffffffffff808a168552908352818420908816845282529182902080548351818402810184019094528084526060936104a293909291908301828280156103f857602002820191906000526020600020908154815260200190600101908083116103e45750505050508585856106c8565b979650505050505050565b73ffffffffffffffffffffffffffffffffffffffff8516600090815260208181526040808320878452825291829020805483518184028101840190945280845260609361053293909291908301828280156103f857602002820191906000526020600020908154815260200190600101908083116103e45750505050508585856106c8565b9695505050505050565b8060005b818110156105715761056984848381811061055d5761055d610e6f565b905060200201356107e7565b600101610540565b50505050565b610580816107e7565b50565b73ffffffffffffffffffffffffffffffffffffffff85166000908152600160209081526040808320878452825291829020805483518184028101840190945280845260609361053293909291908301828280156103f857602002820191906000526020600020908154815260200190600101908083116103e45750505050508585856106c8565b6060600061061783610a33565b600101905060008167ffffffffffffffff81111561063757610637610e9e565b6040519080825280601f01601f191660200182016040528015610661576020820181803683370190505b5090508181016020015b7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff017f3031323334353637383961626364656600000000000000000000000000000000600a86061a8153600a850494508461066b57509392505050565b835160609060008190036106ec575050604080516000815260208101909152610408565b808510610725576040517f01da157200000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b8385810182101561073557508481035b60008167ffffffffffffffff81111561075057610750610e9e565b604051908082528060200260200182016040528015610779578160200160208202803683370190505b50905060005b828110156107db5788866107955781890161079e565b81890160010185035b815181106107ae576107ae610e6f565b60200260200101518282815181106107c8576107c8610e6f565b602090810291909101015260010161077f565b50979650505050505050565b60008181526004602052604090205460ff16156108015750565b6040517fa3112a64000000000000000000000000000000000000000000000000000000008152600481018290526000907f000000000000000000000000000000000000000000000000000000000000000073ffffffffffffffffffffffffffffffffffffffff169063a3112a6490602401600060405180830381865afa15801561088f573d6000803e3d6000fd5b505050506040513d6000823e601f3d9081017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe01682016040526108d59190810190610fc6565b805190915080610911576040517fbd8ba84d00000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b60e082015160c0830151602080850151600087815260048352604080822080547fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff001660019081179091558383526003855281832080548083018255908452858420018a905573ffffffffffffffffffffffffffffffffffffffff808716808552848752838520868652875283852080548085018255908652878620018c9055908816808552828752838520868652875283852080548085018255908652878620018c905585855260028752838520908552865282842090845285528183208054918201815583529382209093018890559151909185917f2178f435e9624d54115e1d50a7313c90518a363b292678118444c0a239f11cf99190a2505050505050565b6000807a184f03e93ff9f4daa797ed6e38ed64bf6a1f0100000000000000008310610a7c577a184f03e93ff9f4daa797ed6e38ed64bf6a1f010000000000000000830492506040015b6d04ee2d6d415b85acef81000000008310610aa8576d04ee2d6d415b85acef8100000000830492506020015b662386f26fc100008310610ac657662386f26fc10000830492506010015b6305f5e1008310610ade576305f5e100830492506008015b6127108310610af257612710830492506004015b60648310610b04576064830492506002015b600a8310610b10576001015b92915050565b73ffffffffffffffffffffffffffffffffffffffff8116811461058057600080fd5b60008060408385031215610b4b57600080fd5b8235610b5681610b16565b946020939093013593505050565b600060208284031215610b7657600080fd5b5035919050565b60005b83811015610b98578181015183820152602001610b80565b50506000910152565b6020815260008251806020840152610bc0816040850160208701610b7d565b601f017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0169190910160400192915050565b801515811461058057600080fd5b60008060008060808587031215610c1657600080fd5b8435935060208501359250604085013591506060850135610c3681610bf2565b939692955090935050565b6020808252825182820181905260009190848201906040850190845b81811015610c7957835183529284019291840191600101610c5d565b50909695505050505050565b60008060008060008060c08789031215610c9e57600080fd5b863595506020870135610cb081610b16565b94506040870135610cc081610b16565b9350606087013592506080870135915060a0870135610cde81610bf2565b809150509295509295509295565b600080600080600060a08688031215610d0457600080fd5b8535610d0f81610b16565b94506020860135935060408601359250606086013591506080860135610d3481610bf2565b809150509295509295909350565b60008060208385031215610d5557600080fd5b823567ffffffffffffffff80821115610d6d57600080fd5b818501915085601f830112610d8157600080fd5b813581811115610d9057600080fd5b8660208260051b8501011115610da557600080fd5b60209290920196919550909350505050565b600080600060608486031215610dcc57600080fd5b833592506020840135610dde81610b16565b91506040840135610dee81610b16565b809150509250925092565b60008451610e0b818460208901610b7d565b80830190507f2e000000000000000000000000000000000000000000000000000000000000008082528551610e47816001850160208a01610b7d565b60019201918201528351610e62816002840160208801610b7d565b0160020195945050505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b604051610140810167ffffffffffffffff81118282101715610ef157610ef1610e9e565b60405290565b805167ffffffffffffffff81168114610f0f57600080fd5b919050565b8051610f0f81610b16565b8051610f0f81610bf2565b600082601f830112610f3b57600080fd5b815167ffffffffffffffff80821115610f5657610f56610e9e565b604051601f83017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0908116603f01168101908282118183101715610f9c57610f9c610e9e565b81604052838152866020858801011115610fb557600080fd5b610532846020830160208901610b7d565b600060208284031215610fd857600080fd5b815167ffffffffffffffff80821115610ff057600080fd5b90830190610140828603121561100557600080fd5b61100d610ecd565b825181526020830151602082015261102760408401610ef7565b604082015261103860608401610ef7565b606082015261104960808401610ef7565b608082015260a083015160a082015261106460c08401610f14565b60c082015261107560e08401610f14565b60e0820152610100611088818501610f1f565b9082015261012083810151838111156110a057600080fd5b6110ac88828701610f2a565b91830191909152509594505050505056fea164736f6c6343000813000a";const isSuperArgs$2=e=>e.length>1;class Indexer__factory extends ethers_1$4.ContractFactory{constructor(...e){if(isSuperArgs$2(e)){super(...e)}else{super(_abi$2,_bytecode$2,e[0])}}getDeployTransaction(e,t){return super.getDeployTransaction(e,t||{})}deploy(e,t){return super.deploy(e,t||{})}connect(e){return super.connect(e)}static bytecode=_bytecode$2;static abi=_abi$2;static createInterface(){return new ethers_1$4.Interface(_abi$2)}static connect(e,t){return new ethers_1$4.Contract(e,_abi$2,t)}}Indexer__factory$1.Indexer__factory=Indexer__factory;var SchemaRegistry__factory$1={};Object.defineProperty(SchemaRegistry__factory$1,"__esModule",{value:true});SchemaRegistry__factory$1.SchemaRegistry__factory=void 0;const ethers_1$3=require$$0;const _abi$1=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"AlreadyExists",type:"error"},{anonymous:false,inputs:[{indexed:true,internalType:"bytes32",name:"uid",type:"bytes32"},{indexed:true,internalType:"address",name:"registerer",type:"address"},{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"contract ISchemaResolver",name:"resolver",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"string",name:"schema",type:"string"}],indexed:false,internalType:"struct SchemaRecord",name:"schema",type:"tuple"}],name:"Registered",type:"event"},{inputs:[{internalType:"bytes32",name:"uid",type:"bytes32"}],name:"getSchema",outputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"contract ISchemaResolver",name:"resolver",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"string",name:"schema",type:"string"}],internalType:"struct SchemaRecord",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"schema",type:"string"},{internalType:"contract ISchemaResolver",name:"resolver",type:"address"},{internalType:"bool",name:"revocable",type:"bool"}],name:"register",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"version",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}];const _bytecode$1="0x60e060405234801561001057600080fd5b506001608052600360a052600060c05260805160a05160c051610a8461004c600039600060fe0152600060d50152600060ac0152610a846000f3fe608060405234801561001057600080fd5b50600436106100415760003560e01c806354fd4d501461004657806360d7a27814610064578063a2ea7c6e14610085575b600080fd5b61004e6100a5565b60405161005b9190610683565b60405180910390f35b61007761007236600461069d565b610148565b60405190815260200161005b565b61009861009336600461074f565b61030c565b60405161005b9190610768565b60606100d07f0000000000000000000000000000000000000000000000000000000000000000610434565b6100f97f0000000000000000000000000000000000000000000000000000000000000000610434565b6101227f0000000000000000000000000000000000000000000000000000000000000000610434565b604051602001610134939291906107c1565b604051602081830303815290604052905090565b60008060405180608001604052806000801b81526020018573ffffffffffffffffffffffffffffffffffffffff168152602001841515815260200187878080601f0160208091040260200160405190810160405280939291908181526020018383808284376000920182905250939094525092935091506101ca9050826104f2565b60008181526020819052604090205490915015610213576040517f23369fa600000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b80825260008181526020818152604091829020845181559084015160018201805493860151151574010000000000000000000000000000000000000000027fffffffffffffffffffffff00000000000000000000000000000000000000000090941673ffffffffffffffffffffffffffffffffffffffff9092169190911792909217909155606083015183919060028201906102af9082610908565b509050503373ffffffffffffffffffffffffffffffffffffffff16817fd0b86852e21f9e5fa4bc3b0cff9757ffe243d50c4b43968a42202153d651ea5e846040516102fa9190610768565b60405180910390a39695505050505050565b604080516080810182526000808252602082018190529181019190915260608082015260008281526020818152604091829020825160808101845281548152600182015473ffffffffffffffffffffffffffffffffffffffff8116938201939093527401000000000000000000000000000000000000000090920460ff161515928201929092526002820180549192916060840191906103ab90610866565b80601f01602080910402602001604051908101604052809291908181526020018280546103d790610866565b80156104245780601f106103f957610100808354040283529160200191610424565b820191906000526020600020905b81548152906001019060200180831161040757829003601f168201915b5050505050815250509050919050565b6060600061044183610532565b600101905060008167ffffffffffffffff81111561046157610461610837565b6040519080825280601f01601f19166020018201604052801561048b576020820181803683370190505b5090508181016020015b7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff017f3031323334353637383961626364656600000000000000000000000000000000600a86061a8153600a850494508461049557509392505050565b600081606001518260200151836040015160405160200161051593929190610a22565b604051602081830303815290604052805190602001209050919050565b6000807a184f03e93ff9f4daa797ed6e38ed64bf6a1f010000000000000000831061057b577a184f03e93ff9f4daa797ed6e38ed64bf6a1f010000000000000000830492506040015b6d04ee2d6d415b85acef810000000083106105a7576d04ee2d6d415b85acef8100000000830492506020015b662386f26fc1000083106105c557662386f26fc10000830492506010015b6305f5e10083106105dd576305f5e100830492506008015b61271083106105f157612710830492506004015b60648310610603576064830492506002015b600a831061060f576001015b92915050565b60005b83811015610630578181015183820152602001610618565b50506000910152565b60008151808452610651816020860160208601610615565b601f017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0169290920160200192915050565b6020815260006106966020830184610639565b9392505050565b600080600080606085870312156106b357600080fd5b843567ffffffffffffffff808211156106cb57600080fd5b818701915087601f8301126106df57600080fd5b8135818111156106ee57600080fd5b88602082850101111561070057600080fd5b6020928301965094505085013573ffffffffffffffffffffffffffffffffffffffff8116811461072f57600080fd5b91506040850135801515811461074457600080fd5b939692955090935050565b60006020828403121561076157600080fd5b5035919050565b602081528151602082015273ffffffffffffffffffffffffffffffffffffffff6020830151166040820152604082015115156060820152600060608301516080808401526107b960a0840182610639565b949350505050565b600084516107d3818460208901610615565b80830190507f2e00000000000000000000000000000000000000000000000000000000000000808252855161080f816001850160208a01610615565b6001920191820152835161082a816002840160208801610615565b0160020195945050505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b600181811c9082168061087a57607f821691505b6020821081036108b3577f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b50919050565b601f82111561090357600081815260208120601f850160051c810160208610156108e05750805b601f850160051c820191505b818110156108ff578281556001016108ec565b5050505b505050565b815167ffffffffffffffff81111561092257610922610837565b610936816109308454610866565b846108b9565b602080601f83116001811461098957600084156109535750858301515b7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff600386901b1c1916600185901b1785556108ff565b6000858152602081207fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe08616915b828110156109d6578886015182559484019460019091019084016109b7565b5085821015610a1257878501517fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff600388901b60f8161c191681555b5050505050600190811b01905550565b60008451610a34818460208901610615565b60609490941b7fffffffffffffffffffffffffffffffffffffffff000000000000000000000000169190930190815290151560f81b60148201526015019291505056fea164736f6c6343000813000a";const isSuperArgs$1=e=>e.length>1;class SchemaRegistry__factory extends ethers_1$3.ContractFactory{constructor(...e){if(isSuperArgs$1(e)){super(...e)}else{super(_abi$1,_bytecode$1,e[0])}}getDeployTransaction(e){return super.getDeployTransaction(e||{})}deploy(e){return super.deploy(e||{})}connect(e){return super.connect(e)}static bytecode=_bytecode$1;static abi=_abi$1;static createInterface(){return new ethers_1$3.Interface(_abi$1)}static connect(e,t){return new ethers_1$3.Contract(e,_abi$1,t)}}SchemaRegistry__factory$1.SchemaRegistry__factory=SchemaRegistry__factory;var Semver__factory$1={};Object.defineProperty(Semver__factory$1,"__esModule",{value:true});Semver__factory$1.Semver__factory=void 0;const ethers_1$2=require$$0;const _abi=[{inputs:[{internalType:"uint256",name:"major",type:"uint256"},{internalType:"uint256",name:"minor",type:"uint256"},{internalType:"uint256",name:"patch",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"version",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}];const _bytecode="0x60e060405234801561001057600080fd5b5060405161045338038061045383398101604081905261002f91610040565b60809290925260a05260c05261006e565b60008060006060848603121561005557600080fd5b8351925060208401519150604084015190509250925092565b60805160a05160c0516103b961009a600039600060a701526000607e01526000605501526103b96000f3fe608060405234801561001057600080fd5b506004361061002b5760003560e01c806354fd4d5014610030575b600080fd5b61003861004e565b60405161004591906102b6565b60405180910390f35b60606100797f00000000000000000000000000000000000000000000000000000000000000006100f1565b6100a27f00000000000000000000000000000000000000000000000000000000000000006100f1565b6100cb7f00000000000000000000000000000000000000000000000000000000000000006100f1565b6040516020016100dd93929190610307565b604051602081830303815290604052905090565b606060006100fe836101af565b600101905060008167ffffffffffffffff81111561011e5761011e61037d565b6040519080825280601f01601f191660200182016040528015610148576020820181803683370190505b5090508181016020015b7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff017f3031323334353637383961626364656600000000000000000000000000000000600a86061a8153600a850494508461015257509392505050565b6000807a184f03e93ff9f4daa797ed6e38ed64bf6a1f01000000000000000083106101f8577a184f03e93ff9f4daa797ed6e38ed64bf6a1f010000000000000000830492506040015b6d04ee2d6d415b85acef81000000008310610224576d04ee2d6d415b85acef8100000000830492506020015b662386f26fc10000831061024257662386f26fc10000830492506010015b6305f5e100831061025a576305f5e100830492506008015b612710831061026e57612710830492506004015b60648310610280576064830492506002015b600a831061028c576001015b92915050565b60005b838110156102ad578181015183820152602001610295565b50506000910152565b60208152600082518060208401526102d5816040850160208701610292565b601f017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0169190910160400192915050565b60008451610319818460208901610292565b80830190507f2e000000000000000000000000000000000000000000000000000000000000008082528551610355816001850160208a01610292565b60019201918201528351610370816002840160208801610292565b0160020195945050505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fdfea164736f6c6343000813000a";const isSuperArgs=e=>e.length>1;class Semver__factory extends ethers_1$2.ContractFactory{constructor(...e){if(isSuperArgs(e)){super(...e)}else{super(_abi,_bytecode,e[0])}}getDeployTransaction(e,t,r,n){return super.getDeployTransaction(e,t,r,n||{})}deploy(e,t,r,n){return super.deploy(e,t,r,n||{})}connect(e){return super.connect(e)}static bytecode=_bytecode;static abi=_abi;static createInterface(){return new ethers_1$2.Interface(_abi)}static connect(e,t){return new ethers_1$2.Contract(e,_abi,t)}}Semver__factory$1.Semver__factory=Semver__factory;(function(e){var t=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[r]}}}Object.defineProperty(e,n,i)}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var r=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var n=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var n={};if(e!=null)for(var i in e)if(i!=="default"&&Object.prototype.hasOwnProperty.call(e,i))t(n,e,i);r(n,e);return n};Object.defineProperty(e,"__esModule",{value:true});e.Semver__factory=e.SchemaRegistry__factory=e.Indexer__factory=e.ISemver__factory=e.ISchemaRegistry__factory=e.IEAS__factory=e.EAS__factory=e.resolver=e.eip712=e.eip1271=void 0;e.eip1271=n(eip1271);e.eip712=n(eip712);e.resolver=n(resolver);var i=EAS__factory$1;Object.defineProperty(e,"EAS__factory",{enumerable:true,get:function(){return i.EAS__factory}});var s=IEAS__factory$1;Object.defineProperty(e,"IEAS__factory",{enumerable:true,get:function(){return s.IEAS__factory}});var a=ISchemaRegistry__factory$1;Object.defineProperty(e,"ISchemaRegistry__factory",{enumerable:true,get:function(){return a.ISchemaRegistry__factory}});var o=ISemver__factory$1;Object.defineProperty(e,"ISemver__factory",{enumerable:true,get:function(){return o.ISemver__factory}});var f=Indexer__factory$1;Object.defineProperty(e,"Indexer__factory",{enumerable:true,get:function(){return f.Indexer__factory}});var c=SchemaRegistry__factory$1;Object.defineProperty(e,"SchemaRegistry__factory",{enumerable:true,get:function(){return c.SchemaRegistry__factory}});var u=Semver__factory$1;Object.defineProperty(e,"Semver__factory",{enumerable:true,get:function(){return u.Semver__factory}})})(contracts);var __createBinding=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[r]}}}Object.defineProperty(e,n,i)}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var __setModuleDefault=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var __importStar=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)if(r!=="default"&&Object.prototype.hasOwnProperty.call(e,r))__createBinding(t,e,r);__setModuleDefault(t,e);return t};Object.defineProperty(factories,"__esModule",{value:true});factories.contracts=factories.openzeppelin=void 0;factories.openzeppelin=__importStar(_openzeppelin);factories.contracts=__importStar(contracts);(function(e){var t=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[r]}}}Object.defineProperty(e,n,i)}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var r=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var n=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var n={};if(e!=null)for(var i in e)if(i!=="default"&&Object.prototype.hasOwnProperty.call(e,i))t(n,e,i);r(n,e);return n};Object.defineProperty(e,"__esModule",{value:true});e.Semver__factory=e.SchemaRegistry__factory=e.SchemaResolver__factory=e.ISchemaResolver__factory=e.ValueResolver__factory=e.TokenResolver__factory=e.RevocationResolver__factory=e.RecipientResolver__factory=e.PayingResolver__factory=e.ExpirationTimeResolver__factory=e.DataResolver__factory=e.AttesterResolver__factory=e.AttestationResolver__factory=e.ISemver__factory=e.ISchemaRegistry__factory=e.Indexer__factory=e.IEAS__factory=e.PermissionedEIP712Proxy__factory=e.EIP712Proxy__factory=e.EIP1271Verifier__factory=e.EAS__factory=e.ShortStrings__factory=e.EIP712__factory=e.IERC20__factory=e.IERC20Permit__factory=e.IERC20Metadata__factory=e.ERC20__factory=e.IERC5267__factory=e.IERC1271__factory=e.Ownable__factory=e.factories=void 0;e.factories=n(factories);var i=Ownable__factory$1;Object.defineProperty(e,"Ownable__factory",{enumerable:true,get:function(){return i.Ownable__factory}});var s=IERC1271__factory$1;Object.defineProperty(e,"IERC1271__factory",{enumerable:true,get:function(){return s.IERC1271__factory}});var a=IERC5267__factory$1;Object.defineProperty(e,"IERC5267__factory",{enumerable:true,get:function(){return a.IERC5267__factory}});var o=ERC20__factory$1;Object.defineProperty(e,"ERC20__factory",{enumerable:true,get:function(){return o.ERC20__factory}});var f=IERC20Metadata__factory$1;Object.defineProperty(e,"IERC20Metadata__factory",{enumerable:true,get:function(){return f.IERC20Metadata__factory}});var c=IERC20Permit__factory$1;Object.defineProperty(e,"IERC20Permit__factory",{enumerable:true,get:function(){return c.IERC20Permit__factory}});var u=IERC20__factory$1;Object.defineProperty(e,"IERC20__factory",{enumerable:true,get:function(){return u.IERC20__factory}});var l=EIP712__factory$1;Object.defineProperty(e,"EIP712__factory",{enumerable:true,get:function(){return l.EIP712__factory}});var h=ShortStrings__factory$1;Object.defineProperty(e,"ShortStrings__factory",{enumerable:true,get:function(){return h.ShortStrings__factory}});var d=EAS__factory$1;Object.defineProperty(e,"EAS__factory",{enumerable:true,get:function(){return d.EAS__factory}});var p=EIP1271Verifier__factory$1;Object.defineProperty(e,"EIP1271Verifier__factory",{enumerable:true,get:function(){return p.EIP1271Verifier__factory}});var y=EIP712Proxy__factory$1;Object.defineProperty(e,"EIP712Proxy__factory",{enumerable:true,get:function(){return y.EIP712Proxy__factory}});var m=PermissionedEIP712Proxy__factory$1;Object.defineProperty(e,"PermissionedEIP712Proxy__factory",{enumerable:true,get:function(){return m.PermissionedEIP712Proxy__factory}});var g=IEAS__factory$1;Object.defineProperty(e,"IEAS__factory",{enumerable:true,get:function(){return g.IEAS__factory}});var b=Indexer__factory$1;Object.defineProperty(e,"Indexer__factory",{enumerable:true,get:function(){return b.Indexer__factory}});var A=ISchemaRegistry__factory$1;Object.defineProperty(e,"ISchemaRegistry__factory",{enumerable:true,get:function(){return A.ISchemaRegistry__factory}});var w=ISemver__factory$1;Object.defineProperty(e,"ISemver__factory",{enumerable:true,get:function(){return w.ISemver__factory}});var E=AttestationResolver__factory$1;Object.defineProperty(e,"AttestationResolver__factory",{enumerable:true,get:function(){return E.AttestationResolver__factory}});var v=AttesterResolver__factory$1;Object.defineProperty(e,"AttesterResolver__factory",{enumerable:true,get:function(){return v.AttesterResolver__factory}});var _=DataResolver__factory$1;Object.defineProperty(e,"DataResolver__factory",{enumerable:true,get:function(){return _.DataResolver__factory}});var S=ExpirationTimeResolver__factory$1;Object.defineProperty(e,"ExpirationTimeResolver__factory",{enumerable:true,get:function(){return S.ExpirationTimeResolver__factory}});var $=PayingResolver__factory$1;Object.defineProperty(e,"PayingResolver__factory",{enumerable:true,get:function(){return $.PayingResolver__factory}});var T=RecipientResolver__factory$1;Object.defineProperty(e,"RecipientResolver__factory",{enumerable:true,get:function(){return T.RecipientResolver__factory}});var I=RevocationResolver__factory$1;Object.defineProperty(e,"RevocationResolver__factory",{enumerable:true,get:function(){return I.RevocationResolver__factory}});var C=TokenResolver__factory$1;Object.defineProperty(e,"TokenResolver__factory",{enumerable:true,get:function(){return C.TokenResolver__factory}});var P=ValueResolver__factory$1;Object.defineProperty(e,"ValueResolver__factory",{enumerable:true,get:function(){return P.ValueResolver__factory}});var R=ISchemaResolver__factory$1;Object.defineProperty(e,"ISchemaResolver__factory",{enumerable:true,get:function(){return R.ISchemaResolver__factory}});var N=SchemaResolver__factory$1;Object.defineProperty(e,"SchemaResolver__factory",{enumerable:true,get:function(){return N.SchemaResolver__factory}});var k=SchemaRegistry__factory$1;Object.defineProperty(e,"SchemaRegistry__factory",{enumerable:true,get:function(){return k.SchemaRegistry__factory}});var O=Semver__factory$1;Object.defineProperty(e,"Semver__factory",{enumerable:true,get:function(){return O.Semver__factory}})})(typechainTypes);var eas={};var version$1={};Object.defineProperty(version$1,"__esModule",{value:true});version$1.legacyVersion=void 0;const ethers_1$1=require$$0;const VERSION_ABI=[{inputs:[],name:"VERSION",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}];const legacyVersion=async e=>{const t=e.runner?.provider;if(!t){throw new Error("provider wasn't set")}const r=new ethers_1$1.BaseContract(await e.getAddress(),VERSION_ABI,t);try{return await r.getFunction("VERSION").staticCall()}catch{return undefined}};version$1.legacyVersion=legacyVersion;var offchain$1={};var delegated={};var ListCache$2=_ListCache;function stackClear$1(){this.__data__=new ListCache$2;this.size=0}var _stackClear=stackClear$1;function stackDelete$1(e){var t=this.__data__,r=t["delete"](e);this.size=t.size;return r}var _stackDelete=stackDelete$1;function stackGet$1(e){return this.__data__.get(e)}var _stackGet=stackGet$1;function stackHas$1(e){return this.__data__.has(e)}var _stackHas=stackHas$1;var ListCache$1=_ListCache,Map$2=_Map,MapCache$1=_MapCache;var LARGE_ARRAY_SIZE=200;function stackSet$1(e,t){var r=this.__data__;if(r instanceof ListCache$1){var n=r.__data__;if(!Map$2||n.length<LARGE_ARRAY_SIZE-1){n.push([e,t]);this.size=++r.size;return this}r=this.__data__=new MapCache$1(n)}r.set(e,t);this.size=r.size;return this}var _stackSet=stackSet$1;var ListCache=_ListCache,stackClear=_stackClear,stackDelete=_stackDelete,stackGet=_stackGet,stackHas=_stackHas,stackSet=_stackSet;function Stack$2(e){var t=this.__data__=new ListCache(e);this.size=t.size}Stack$2.prototype.clear=stackClear;Stack$2.prototype["delete"]=stackDelete;Stack$2.prototype.get=stackGet;Stack$2.prototype.has=stackHas;Stack$2.prototype.set=stackSet;var _Stack=Stack$2;function arrayEach$1(e,t){var r=-1,n=e==null?0:e.length;while(++r<n){if(t(e[r],r,e)===false){break}}return e}var _arrayEach=arrayEach$1;var getNative$4=_getNative;var defineProperty$2=function(){try{var e=getNative$4(Object,"defineProperty");e({},"",{});return e}catch(e){}}();var _defineProperty=defineProperty$2;var defineProperty$1=_defineProperty;function baseAssignValue$2(e,t,r){if(t=="__proto__"&&defineProperty$1){defineProperty$1(e,t,{configurable:true,enumerable:true,value:r,writable:true})}else{e[t]=r}}var _baseAssignValue=baseAssignValue$2;var baseAssignValue$1=_baseAssignValue,eq$4=eq_1$1;var objectProto$a=Object.prototype;var hasOwnProperty$8=objectProto$a.hasOwnProperty;function assignValue$2(e,t,r){var n=e[t];if(!(hasOwnProperty$8.call(e,t)&&eq$4(n,r))||r===undefined&&!(t in e)){baseAssignValue$1(e,t,r)}}var _assignValue=assignValue$2;var assignValue$1=_assignValue,baseAssignValue=_baseAssignValue;function copyObject$5(e,t,r,n){var i=!r;r||(r={});var s=-1,a=t.length;while(++s<a){var o=t[s];var f=n?n(r[o],e[o],o,r,e):undefined;if(f===undefined){f=e[o]}if(i){baseAssignValue(r,o,f)}else{assignValue$1(r,o,f)}}return r}var _copyObject=copyObject$5;function baseTimes$1(e,t){var r=-1,n=Array(e);while(++r<e){n[r]=t(r)}return n}var _baseTimes=baseTimes$1;var baseGetTag$3=_baseGetTag,isObjectLike$6=isObjectLike_1;var argsTag$3="[object Arguments]";function baseIsArguments$1(e){return isObjectLike$6(e)&&baseGetTag$3(e)==argsTag$3}var _baseIsArguments=baseIsArguments$1;var baseIsArguments=_baseIsArguments,isObjectLike$5=isObjectLike_1;var objectProto$9=Object.prototype;var hasOwnProperty$7=objectProto$9.hasOwnProperty;var propertyIsEnumerable$1=objectProto$9.propertyIsEnumerable;var isArguments$2=baseIsArguments(function(){return arguments}())?baseIsArguments:function(e){return isObjectLike$5(e)&&hasOwnProperty$7.call(e,"callee")&&!propertyIsEnumerable$1.call(e,"callee")};var isArguments_1=isArguments$2;var isBuffer$3={exports:{}};function stubFalse(){return false}var stubFalse_1=stubFalse;(function(e,t){var r=_root,n=stubFalse_1;var i=t&&!t.nodeType&&t;var s=i&&"object"=="object"&&e&&!e.nodeType&&e;var a=s&&s.exports===i;var o=a?r.Buffer:undefined;var f=o?o.isBuffer:undefined;var c=f||n;e.exports=c})(isBuffer$3,isBuffer$3.exports);var MAX_SAFE_INTEGER$3=9007199254740991;var reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex$1(e,t){var r=typeof e;t=t==null?MAX_SAFE_INTEGER$3:t;return!!t&&(r=="number"||r!="symbol"&&reIsUint.test(e))&&(e>-1&&e%1==0&&e<t)}var _isIndex=isIndex$1;var MAX_SAFE_INTEGER$2=9007199254740991;function isLength$2(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=MAX_SAFE_INTEGER$2}var isLength_1=isLength$2;var baseGetTag$2=_baseGetTag,isLength$1=isLength_1,isObjectLike$4=isObjectLike_1;var argsTag$2="[object Arguments]",arrayTag$2="[object Array]",boolTag$3="[object Boolean]",dateTag$3="[object Date]",errorTag$2="[object Error]",funcTag$1="[object Function]",mapTag$5="[object Map]",numberTag$3="[object Number]",objectTag$4="[object Object]",regexpTag$3="[object RegExp]",setTag$5="[object Set]",stringTag$3="[object String]",weakMapTag$2="[object WeakMap]";var arrayBufferTag$3="[object ArrayBuffer]",dataViewTag$4="[object DataView]",float32Tag$2="[object Float32Array]",float64Tag$2="[object Float64Array]",int8Tag$2="[object Int8Array]",int16Tag$2="[object Int16Array]",int32Tag$2="[object Int32Array]",uint8Tag$2="[object Uint8Array]",uint8ClampedTag$2="[object Uint8ClampedArray]",uint16Tag$2="[object Uint16Array]",uint32Tag$2="[object Uint32Array]";var typedArrayTags={};typedArrayTags[float32Tag$2]=typedArrayTags[float64Tag$2]=typedArrayTags[int8Tag$2]=typedArrayTags[int16Tag$2]=typedArrayTags[int32Tag$2]=typedArrayTags[uint8Tag$2]=typedArrayTags[uint8ClampedTag$2]=typedArrayTags[uint16Tag$2]=typedArrayTags[uint32Tag$2]=true;typedArrayTags[argsTag$2]=typedArrayTags[arrayTag$2]=typedArrayTags[arrayBufferTag$3]=typedArrayTags[boolTag$3]=typedArrayTags[dataViewTag$4]=typedArrayTags[dateTag$3]=typedArrayTags[errorTag$2]=typedArrayTags[funcTag$1]=typedArrayTags[mapTag$5]=typedArrayTags[numberTag$3]=typedArrayTags[objectTag$4]=typedArrayTags[regexpTag$3]=typedArrayTags[setTag$5]=typedArrayTags[stringTag$3]=typedArrayTags[weakMapTag$2]=false;function baseIsTypedArray$1(e){return isObjectLike$4(e)&&isLength$1(e.length)&&!!typedArrayTags[baseGetTag$2(e)]}var _baseIsTypedArray=baseIsTypedArray$1;function baseUnary$3(e){return function(t){return e(t)}}var _baseUnary=baseUnary$3;var _nodeUtil={exports:{}};(function(e,t){var r=_freeGlobal;var n=t&&!t.nodeType&&t;var i=n&&"object"=="object"&&e&&!e.nodeType&&e;var s=i&&i.exports===n;var a=s&&r.process;var o=function(){try{var e=i&&i.require&&i.require("util").types;if(e){return e}return a&&a.binding&&a.binding("util")}catch(e){}}();e.exports=o})(_nodeUtil,_nodeUtil.exports);var baseIsTypedArray=_baseIsTypedArray,baseUnary$2=_baseUnary,nodeUtil$2=_nodeUtil.exports;var nodeIsTypedArray=nodeUtil$2&&nodeUtil$2.isTypedArray;var isTypedArray$2=nodeIsTypedArray?baseUnary$2(nodeIsTypedArray):baseIsTypedArray;var isTypedArray_1=isTypedArray$2;var baseTimes=_baseTimes,isArguments$1=isArguments_1,isArray$4=isArray_1,isBuffer$2=isBuffer$3.exports,isIndex=_isIndex,isTypedArray$1=isTypedArray_1;var objectProto$8=Object.prototype;var hasOwnProperty$6=objectProto$8.hasOwnProperty;function arrayLikeKeys$2(e,t){var r=isArray$4(e),n=!r&&isArguments$1(e),i=!r&&!n&&isBuffer$2(e),s=!r&&!n&&!i&&isTypedArray$1(e),a=r||n||i||s,o=a?baseTimes(e.length,String):[],f=o.length;for(var c in e){if((t||hasOwnProperty$6.call(e,c))&&!(a&&(c=="length"||i&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||isIndex(c,f)))){o.push(c)}}return o}var _arrayLikeKeys=arrayLikeKeys$2;var objectProto$7=Object.prototype;function isPrototype$3(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||objectProto$7;return e===r}var _isPrototype=isPrototype$3;function overArg$2(e,t){return function(r){return e(t(r))}}var _overArg=overArg$2;var overArg$1=_overArg;var nativeKeys$1=overArg$1(Object.keys,Object);var _nativeKeys=nativeKeys$1;var isPrototype$2=_isPrototype,nativeKeys=_nativeKeys;var objectProto$6=Object.prototype;var hasOwnProperty$5=objectProto$6.hasOwnProperty;function baseKeys$1(e){if(!isPrototype$2(e)){return nativeKeys(e)}var t=[];for(var r in Object(e)){if(hasOwnProperty$5.call(e,r)&&r!="constructor"){t.push(r)}}return t}var _baseKeys=baseKeys$1;var isFunction=isFunction_1,isLength=isLength_1;function isArrayLike$2(e){return e!=null&&isLength(e.length)&&!isFunction(e)}var isArrayLike_1=isArrayLike$2;var arrayLikeKeys$1=_arrayLikeKeys,baseKeys=_baseKeys,isArrayLike$1=isArrayLike_1;function keys$3(e){return isArrayLike$1(e)?arrayLikeKeys$1(e):baseKeys(e)}var keys_1=keys$3;var copyObject$4=_copyObject,keys$2=keys_1;function baseAssign$1(e,t){return e&&copyObject$4(t,keys$2(t),e)}var _baseAssign=baseAssign$1;function nativeKeysIn$1(e){var t=[];if(e!=null){for(var r in Object(e)){t.push(r)}}return t}var _nativeKeysIn=nativeKeysIn$1;var isObject$2=isObject_1,isPrototype$1=_isPrototype,nativeKeysIn=_nativeKeysIn;var objectProto$5=Object.prototype;var hasOwnProperty$4=objectProto$5.hasOwnProperty;function baseKeysIn$1(e){if(!isObject$2(e)){return nativeKeysIn(e)}var t=isPrototype$1(e),r=[];for(var n in e){if(!(n=="constructor"&&(t||!hasOwnProperty$4.call(e,n)))){r.push(n)}}return r}var _baseKeysIn=baseKeysIn$1;var arrayLikeKeys=_arrayLikeKeys,baseKeysIn=_baseKeysIn,isArrayLike=isArrayLike_1;function keysIn$3(e){return isArrayLike(e)?arrayLikeKeys(e,true):baseKeysIn(e)}var keysIn_1=keysIn$3;var copyObject$3=_copyObject,keysIn$2=keysIn_1;function baseAssignIn$1(e,t){return e&&copyObject$3(t,keysIn$2(t),e)}var _baseAssignIn=baseAssignIn$1;var _cloneBuffer={exports:{}};(function(e,t){var r=_root;var n=t&&!t.nodeType&&t;var i=n&&"object"=="object"&&e&&!e.nodeType&&e;var s=i&&i.exports===n;var a=s?r.Buffer:undefined,o=a?a.allocUnsafe:undefined;function f(e,t){if(t){return e.slice()}var r=e.length,n=o?o(r):new e.constructor(r);e.copy(n);return n}e.exports=f})(_cloneBuffer,_cloneBuffer.exports);function copyArray$1(e,t){var r=-1,n=e.length;t||(t=Array(n));while(++r<n){t[r]=e[r]}return t}var _copyArray=copyArray$1;function arrayFilter$1(e,t){var r=-1,n=e==null?0:e.length,i=0,s=[];while(++r<n){var a=e[r];if(t(a,r,e)){s[i++]=a}}return s}var _arrayFilter=arrayFilter$1;function stubArray$2(){return[]}var stubArray_1=stubArray$2;var arrayFilter=_arrayFilter,stubArray$1=stubArray_1;var objectProto$4=Object.prototype;var propertyIsEnumerable=objectProto$4.propertyIsEnumerable;var nativeGetSymbols$1=Object.getOwnPropertySymbols;var getSymbols$3=!nativeGetSymbols$1?stubArray$1:function(e){if(e==null){return[]}e=Object(e);return arrayFilter(nativeGetSymbols$1(e),(function(t){return propertyIsEnumerable.call(e,t)}))};var _getSymbols=getSymbols$3;var copyObject$2=_copyObject,getSymbols$2=_getSymbols;function copySymbols$1(e,t){return copyObject$2(e,getSymbols$2(e),t)}var _copySymbols=copySymbols$1;function arrayPush$3(e,t){var r=-1,n=t.length,i=e.length;while(++r<n){e[i+r]=t[r]}return e}var _arrayPush=arrayPush$3;var overArg=_overArg;var getPrototype$3=overArg(Object.getPrototypeOf,Object);var _getPrototype=getPrototype$3;var arrayPush$2=_arrayPush,getPrototype$2=_getPrototype,getSymbols$1=_getSymbols,stubArray=stubArray_1;var nativeGetSymbols=Object.getOwnPropertySymbols;var getSymbolsIn$2=!nativeGetSymbols?stubArray:function(e){var t=[];while(e){arrayPush$2(t,getSymbols$1(e));e=getPrototype$2(e)}return t};var _getSymbolsIn=getSymbolsIn$2;var copyObject$1=_copyObject,getSymbolsIn$1=_getSymbolsIn;function copySymbolsIn$1(e,t){return copyObject$1(e,getSymbolsIn$1(e),t)}var _copySymbolsIn=copySymbolsIn$1;var arrayPush$1=_arrayPush,isArray$3=isArray_1;function baseGetAllKeys$2(e,t,r){var n=t(e);return isArray$3(e)?n:arrayPush$1(n,r(e))}var _baseGetAllKeys=baseGetAllKeys$2;var baseGetAllKeys$1=_baseGetAllKeys,getSymbols=_getSymbols,keys$1=keys_1;function getAllKeys$2(e){return baseGetAllKeys$1(e,keys$1,getSymbols)}var _getAllKeys=getAllKeys$2;var baseGetAllKeys=_baseGetAllKeys,getSymbolsIn=_getSymbolsIn,keysIn$1=keysIn_1;function getAllKeysIn$2(e){return baseGetAllKeys(e,keysIn$1,getSymbolsIn)}var _getAllKeysIn=getAllKeysIn$2;var getNative$3=_getNative,root$4=_root;var DataView$2=getNative$3(root$4,"DataView");var _DataView=DataView$2;var getNative$2=_getNative,root$3=_root;var Promise$2=getNative$2(root$3,"Promise");var _Promise=Promise$2;var getNative$1=_getNative,root$2=_root;var Set$2=getNative$1(root$2,"Set");var _Set=Set$2;var getNative=_getNative,root$1=_root;var WeakMap$2=getNative(root$1,"WeakMap");var _WeakMap=WeakMap$2;var DataView$1=_DataView,Map$1=_Map,Promise$1=_Promise,Set$1=_Set,WeakMap$1=_WeakMap,baseGetTag$1=_baseGetTag,toSource=_toSource;var mapTag$4="[object Map]",objectTag$3="[object Object]",promiseTag="[object Promise]",setTag$4="[object Set]",weakMapTag$1="[object WeakMap]";var dataViewTag$3="[object DataView]";var dataViewCtorString=toSource(DataView$1),mapCtorString=toSource(Map$1),promiseCtorString=toSource(Promise$1),setCtorString=toSource(Set$1),weakMapCtorString=toSource(WeakMap$1);var getTag$4=baseGetTag$1;if(DataView$1&&getTag$4(new DataView$1(new ArrayBuffer(1)))!=dataViewTag$3||Map$1&&getTag$4(new Map$1)!=mapTag$4||Promise$1&&getTag$4(Promise$1.resolve())!=promiseTag||Set$1&&getTag$4(new Set$1)!=setTag$4||WeakMap$1&&getTag$4(new WeakMap$1)!=weakMapTag$1){getTag$4=function(e){var t=baseGetTag$1(e),r=t==objectTag$3?e.constructor:undefined,n=r?toSource(r):"";if(n){switch(n){case dataViewCtorString:return dataViewTag$3;case mapCtorString:return mapTag$4;case promiseCtorString:return promiseTag;case setCtorString:return setTag$4;case weakMapCtorString:return weakMapTag$1}}return t}}var _getTag=getTag$4;var objectProto$3=Object.prototype;var hasOwnProperty$3=objectProto$3.hasOwnProperty;function initCloneArray$1(e){var t=e.length,r=new e.constructor(t);if(t&&typeof e[0]=="string"&&hasOwnProperty$3.call(e,"index")){r.index=e.index;r.input=e.input}return r}var _initCloneArray=initCloneArray$1;var root=_root;var Uint8Array$3=root.Uint8Array;var _Uint8Array=Uint8Array$3;var Uint8Array$2=_Uint8Array;function cloneArrayBuffer$3(e){var t=new e.constructor(e.byteLength);new Uint8Array$2(t).set(new Uint8Array$2(e));return t}var _cloneArrayBuffer=cloneArrayBuffer$3;var cloneArrayBuffer$2=_cloneArrayBuffer;function cloneDataView$1(e,t){var r=t?cloneArrayBuffer$2(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var _cloneDataView=cloneDataView$1;var reFlags=/\w*$/;function cloneRegExp$1(e){var t=new e.constructor(e.source,reFlags.exec(e));t.lastIndex=e.lastIndex;return t}var _cloneRegExp=cloneRegExp$1;var Symbol$3=_Symbol;var symbolProto$1=Symbol$3?Symbol$3.prototype:undefined,symbolValueOf$1=symbolProto$1?symbolProto$1.valueOf:undefined;function cloneSymbol$1(e){return symbolValueOf$1?Object(symbolValueOf$1.call(e)):{}}var _cloneSymbol=cloneSymbol$1;var cloneArrayBuffer$1=_cloneArrayBuffer;function cloneTypedArray$1(e,t){var r=t?cloneArrayBuffer$1(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var _cloneTypedArray=cloneTypedArray$1;var cloneArrayBuffer=_cloneArrayBuffer,cloneDataView=_cloneDataView,cloneRegExp=_cloneRegExp,cloneSymbol=_cloneSymbol,cloneTypedArray=_cloneTypedArray;var boolTag$2="[object Boolean]",dateTag$2="[object Date]",mapTag$3="[object Map]",numberTag$2="[object Number]",regexpTag$2="[object RegExp]",setTag$3="[object Set]",stringTag$2="[object String]",symbolTag$2="[object Symbol]";var arrayBufferTag$2="[object ArrayBuffer]",dataViewTag$2="[object DataView]",float32Tag$1="[object Float32Array]",float64Tag$1="[object Float64Array]",int8Tag$1="[object Int8Array]",int16Tag$1="[object Int16Array]",int32Tag$1="[object Int32Array]",uint8Tag$1="[object Uint8Array]",uint8ClampedTag$1="[object Uint8ClampedArray]",uint16Tag$1="[object Uint16Array]",uint32Tag$1="[object Uint32Array]";function initCloneByTag$1(e,t,r){var n=e.constructor;switch(t){case arrayBufferTag$2:return cloneArrayBuffer(e);case boolTag$2:case dateTag$2:return new n(+e);case dataViewTag$2:return cloneDataView(e,r);case float32Tag$1:case float64Tag$1:case int8Tag$1:case int16Tag$1:case int32Tag$1:case uint8Tag$1:case uint8ClampedTag$1:case uint16Tag$1:case uint32Tag$1:return cloneTypedArray(e,r);case mapTag$3:return new n;case numberTag$2:case stringTag$2:return new n(e);case regexpTag$2:return cloneRegExp(e);case setTag$3:return new n;case symbolTag$2:return cloneSymbol(e)}}var _initCloneByTag=initCloneByTag$1;var isObject$1=isObject_1;var objectCreate=Object.create;var baseCreate$1=function(){function e(){}return function(t){if(!isObject$1(t)){return{}}if(objectCreate){return objectCreate(t)}e.prototype=t;var r=new e;e.prototype=undefined;return r}}();var _baseCreate=baseCreate$1;var baseCreate=_baseCreate,getPrototype$1=_getPrototype,isPrototype=_isPrototype;function initCloneObject$1(e){return typeof e.constructor=="function"&&!isPrototype(e)?baseCreate(getPrototype$1(e)):{}}var _initCloneObject=initCloneObject$1;var getTag$3=_getTag,isObjectLike$3=isObjectLike_1;var mapTag$2="[object Map]";function baseIsMap$1(e){return isObjectLike$3(e)&&getTag$3(e)==mapTag$2}var _baseIsMap=baseIsMap$1;var baseIsMap=_baseIsMap,baseUnary$1=_baseUnary,nodeUtil$1=_nodeUtil.exports;var nodeIsMap=nodeUtil$1&&nodeUtil$1.isMap;var isMap$1=nodeIsMap?baseUnary$1(nodeIsMap):baseIsMap;var isMap_1=isMap$1;var getTag$2=_getTag,isObjectLike$2=isObjectLike_1;var setTag$2="[object Set]";function baseIsSet$1(e){return isObjectLike$2(e)&&getTag$2(e)==setTag$2}var _baseIsSet=baseIsSet$1;var baseIsSet=_baseIsSet,baseUnary=_baseUnary,nodeUtil=_nodeUtil.exports;var nodeIsSet=nodeUtil&&nodeUtil.isSet;var isSet$1=nodeIsSet?baseUnary(nodeIsSet):baseIsSet;var isSet_1=isSet$1;var Stack$1=_Stack,arrayEach=_arrayEach,assignValue=_assignValue,baseAssign=_baseAssign,baseAssignIn=_baseAssignIn,cloneBuffer=_cloneBuffer.exports,copyArray=_copyArray,copySymbols=_copySymbols,copySymbolsIn=_copySymbolsIn,getAllKeys$1=_getAllKeys,getAllKeysIn$1=_getAllKeysIn,getTag$1=_getTag,initCloneArray=_initCloneArray,initCloneByTag=_initCloneByTag,initCloneObject=_initCloneObject,isArray$2=isArray_1,isBuffer$1=isBuffer$3.exports,isMap=isMap_1,isObject=isObject_1,isSet=isSet_1,keys=keys_1,keysIn=keysIn_1;var CLONE_DEEP_FLAG$1=1,CLONE_FLAT_FLAG$1=2,CLONE_SYMBOLS_FLAG$1=4;var argsTag$1="[object Arguments]",arrayTag$1="[object Array]",boolTag$1="[object Boolean]",dateTag$1="[object Date]",errorTag$1="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag$1="[object Map]",numberTag$1="[object Number]",objectTag$2="[object Object]",regexpTag$1="[object RegExp]",setTag$1="[object Set]",stringTag$1="[object String]",symbolTag$1="[object Symbol]",weakMapTag="[object WeakMap]";var arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$1="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]";var cloneableTags={};cloneableTags[argsTag$1]=cloneableTags[arrayTag$1]=cloneableTags[arrayBufferTag$1]=cloneableTags[dataViewTag$1]=cloneableTags[boolTag$1]=cloneableTags[dateTag$1]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[mapTag$1]=cloneableTags[numberTag$1]=cloneableTags[objectTag$2]=cloneableTags[regexpTag$1]=cloneableTags[setTag$1]=cloneableTags[stringTag$1]=cloneableTags[symbolTag$1]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=true;cloneableTags[errorTag$1]=cloneableTags[funcTag]=cloneableTags[weakMapTag]=false;function baseClone$1(e,t,r,n,i,s){var a,o=t&CLONE_DEEP_FLAG$1,f=t&CLONE_FLAT_FLAG$1,c=t&CLONE_SYMBOLS_FLAG$1;if(r){a=i?r(e,n,i,s):r(e)}if(a!==undefined){return a}if(!isObject(e)){return e}var u=isArray$2(e);if(u){a=initCloneArray(e);if(!o){return copyArray(e,a)}}else{var l=getTag$1(e),h=l==funcTag||l==genTag;if(isBuffer$1(e)){return cloneBuffer(e,o)}if(l==objectTag$2||l==argsTag$1||h&&!i){a=f||h?{}:initCloneObject(e);if(!o){return f?copySymbolsIn(e,baseAssignIn(a,e)):copySymbols(e,baseAssign(a,e))}}else{if(!cloneableTags[l]){return i?e:{}}a=initCloneByTag(e,l,o)}}s||(s=new Stack$1);var d=s.get(e);if(d){return d}s.set(e,a);if(isSet(e)){e.forEach((function(n){a.add(baseClone$1(n,t,r,n,e,s))}))}else if(isMap(e)){e.forEach((function(n,i){a.set(i,baseClone$1(n,t,r,i,e,s))}))}var p=c?f?getAllKeysIn$1:getAllKeys$1:f?keysIn:keys;var y=u?undefined:p(e);arrayEach(y||e,(function(n,i){if(y){i=n;n=e[i]}assignValue(a,i,baseClone$1(n,t,r,i,e,s))}));return a}var _baseClone=baseClone$1;function last$1(e){var t=e==null?0:e.length;return t?e[t-1]:undefined}var last_1=last$1;function baseSlice$1(e,t,r){var n=-1,i=e.length;if(t<0){t=-t>i?0:i+t}r=r>i?i:r;if(r<0){r+=i}i=t>r?0:r-t>>>0;t>>>=0;var s=Array(i);while(++n<i){s[n]=e[n+t]}return s}var _baseSlice=baseSlice$1;var baseGet=_baseGet,baseSlice=_baseSlice;function parent$1(e,t){return t.length<2?e:baseGet(e,baseSlice(t,0,-1))}var _parent=parent$1;var castPath$1=_castPath,last=last_1,parent=_parent,toKey=_toKey;function baseUnset$1(e,t){t=castPath$1(t,e);e=parent(e,t);return e==null||delete e[toKey(last(t))]}var _baseUnset=baseUnset$1;var baseGetTag=_baseGetTag,getPrototype=_getPrototype,isObjectLike$1=isObjectLike_1;var objectTag$1="[object Object]";var funcProto=Function.prototype,objectProto$2=Object.prototype;var funcToString=funcProto.toString;var hasOwnProperty$2=objectProto$2.hasOwnProperty;var objectCtorString=funcToString.call(Object);function isPlainObject$1(e){if(!isObjectLike$1(e)||baseGetTag(e)!=objectTag$1){return false}var t=getPrototype(e);if(t===null){return true}var r=hasOwnProperty$2.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&funcToString.call(r)==objectCtorString}var isPlainObject_1=isPlainObject$1;var isPlainObject=isPlainObject_1;function customOmitClone$1(e){return isPlainObject(e)?undefined:e}var _customOmitClone=customOmitClone$1;var Symbol$2=_Symbol,isArguments=isArguments_1,isArray$1=isArray_1;var spreadableSymbol=Symbol$2?Symbol$2.isConcatSpreadable:undefined;function isFlattenable$1(e){return isArray$1(e)||isArguments(e)||!!(spreadableSymbol&&e&&e[spreadableSymbol])}var _isFlattenable=isFlattenable$1;var arrayPush=_arrayPush,isFlattenable=_isFlattenable;function baseFlatten$1(e,t,r,n,i){var s=-1,a=e.length;r||(r=isFlattenable);i||(i=[]);while(++s<a){var o=e[s];if(t>0&&r(o)){if(t>1){baseFlatten$1(o,t-1,r,n,i)}else{arrayPush(i,o)}}else if(!n){i[i.length]=o}}return i}var _baseFlatten=baseFlatten$1;var baseFlatten=_baseFlatten;function flatten$1(e){var t=e==null?0:e.length;return t?baseFlatten(e,1):[]}var flatten_1=flatten$1;function apply$1(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var _apply=apply$1;var apply=_apply;var nativeMax=Math.max;function overRest$1(e,t,r){t=nativeMax(t===undefined?e.length-1:t,0);return function(){var n=arguments,i=-1,s=nativeMax(n.length-t,0),a=Array(s);while(++i<s){a[i]=n[t+i]}i=-1;var o=Array(t+1);while(++i<t){o[i]=n[i]}o[t]=r(a);return apply(e,this,o)}}var _overRest=overRest$1;function constant$1(e){return function(){return e}}var constant_1=constant$1;function identity$1(e){return e}var identity_1=identity$1;var constant=constant_1,defineProperty=_defineProperty,identity=identity_1;var baseSetToString$1=!defineProperty?identity:function(e,t){return defineProperty(e,"toString",{configurable:true,enumerable:false,value:constant(t),writable:true})};var _baseSetToString=baseSetToString$1;var HOT_COUNT=800,HOT_SPAN=16;var nativeNow=Date.now;function shortOut$1(e){var t=0,r=0;return function(){var n=nativeNow(),i=HOT_SPAN-(n-r);r=n;if(i>0){if(++t>=HOT_COUNT){return arguments[0]}}else{t=0}return e.apply(undefined,arguments)}}var _shortOut=shortOut$1;var baseSetToString=_baseSetToString,shortOut=_shortOut;var setToString$1=shortOut(baseSetToString);var _setToString=setToString$1;var flatten=flatten_1,overRest=_overRest,setToString=_setToString;function flatRest$1(e){return setToString(overRest(e,undefined,flatten),e+"")}var _flatRest=flatRest$1;var arrayMap=_arrayMap,baseClone=_baseClone,baseUnset=_baseUnset,castPath=_castPath,copyObject=_copyObject,customOmitClone=_customOmitClone,flatRest=_flatRest,getAllKeysIn=_getAllKeysIn;var CLONE_DEEP_FLAG=1,CLONE_FLAT_FLAG=2,CLONE_SYMBOLS_FLAG=4;var omit=flatRest((function(e,t){var r={};if(e==null){return r}var n=false;t=arrayMap(t,(function(t){t=castPath(t,e);n||(n=t.length>1);return t}));copyObject(e,getAllKeysIn(e),r);if(n){r=baseClone(r,CLONE_DEEP_FLAG|CLONE_FLAT_FLAG|CLONE_SYMBOLS_FLAG,customOmitClone)}var i=t.length;while(i--){baseUnset(r,t[i])}return r}));var omit_1$1=omit;var re$4={exports:{}};const SEMVER_SPEC_VERSION="2.0.0";const MAX_LENGTH$1=256;const MAX_SAFE_INTEGER$1=Number.MAX_SAFE_INTEGER||9007199254740991;const MAX_SAFE_COMPONENT_LENGTH=16;const MAX_SAFE_BUILD_LENGTH=MAX_LENGTH$1-6;const RELEASE_TYPES=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var constants$4={MAX_LENGTH:MAX_LENGTH$1,MAX_SAFE_COMPONENT_LENGTH,MAX_SAFE_BUILD_LENGTH,MAX_SAFE_INTEGER:MAX_SAFE_INTEGER$1,RELEASE_TYPES,SEMVER_SPEC_VERSION,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const debug$3=typeof process==="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var debug_1=debug$3;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:n,MAX_LENGTH:i}=constants$4;const s=debug_1;t=e.exports={};const a=t.re=[];const o=t.safeRe=[];const f=t.src=[];const c=t.t={};let u=0;const l="[a-zA-Z0-9-]";const h=[["\\s",1],["\\d",i],[l,n]];const d=e=>{for(const[t,r]of h){e=e.split(`${t}*`).join(`${t}{0,${r}}`).split(`${t}+`).join(`${t}{1,${r}}`)}return e};const p=(e,t,r)=>{const n=d(t);const i=u++;s(e,i,t);c[e]=i;f[i]=t;a[i]=new RegExp(t,r?"g":undefined);o[i]=new RegExp(n,r?"g":undefined)};p("NUMERICIDENTIFIER","0|[1-9]\\d*");p("NUMERICIDENTIFIERLOOSE","\\d+");p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${l}*`);p("MAINVERSION",`(${f[c.NUMERICIDENTIFIER]})\\.`+`(${f[c.NUMERICIDENTIFIER]})\\.`+`(${f[c.NUMERICIDENTIFIER]})`);p("MAINVERSIONLOOSE",`(${f[c.NUMERICIDENTIFIERLOOSE]})\\.`+`(${f[c.NUMERICIDENTIFIERLOOSE]})\\.`+`(${f[c.NUMERICIDENTIFIERLOOSE]})`);p("PRERELEASEIDENTIFIER",`(?:${f[c.NUMERICIDENTIFIER]}|${f[c.NONNUMERICIDENTIFIER]})`);p("PRERELEASEIDENTIFIERLOOSE",`(?:${f[c.NUMERICIDENTIFIERLOOSE]}|${f[c.NONNUMERICIDENTIFIER]})`);p("PRERELEASE",`(?:-(${f[c.PRERELEASEIDENTIFIER]}(?:\\.${f[c.PRERELEASEIDENTIFIER]})*))`);p("PRERELEASELOOSE",`(?:-?(${f[c.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${f[c.PRERELEASEIDENTIFIERLOOSE]})*))`);p("BUILDIDENTIFIER",`${l}+`);p("BUILD",`(?:\\+(${f[c.BUILDIDENTIFIER]}(?:\\.${f[c.BUILDIDENTIFIER]})*))`);p("FULLPLAIN",`v?${f[c.MAINVERSION]}${f[c.PRERELEASE]}?${f[c.BUILD]}?`);p("FULL",`^${f[c.FULLPLAIN]}$`);p("LOOSEPLAIN",`[v=\\s]*${f[c.MAINVERSIONLOOSE]}${f[c.PRERELEASELOOSE]}?${f[c.BUILD]}?`);p("LOOSE",`^${f[c.LOOSEPLAIN]}$`);p("GTLT","((?:<|>)?=?)");p("XRANGEIDENTIFIERLOOSE",`${f[c.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);p("XRANGEIDENTIFIER",`${f[c.NUMERICIDENTIFIER]}|x|X|\\*`);p("XRANGEPLAIN",`[v=\\s]*(${f[c.XRANGEIDENTIFIER]})`+`(?:\\.(${f[c.XRANGEIDENTIFIER]})`+`(?:\\.(${f[c.XRANGEIDENTIFIER]})`+`(?:${f[c.PRERELEASE]})?${f[c.BUILD]}?`+`)?)?`);p("XRANGEPLAINLOOSE",`[v=\\s]*(${f[c.XRANGEIDENTIFIERLOOSE]})`+`(?:\\.(${f[c.XRANGEIDENTIFIERLOOSE]})`+`(?:\\.(${f[c.XRANGEIDENTIFIERLOOSE]})`+`(?:${f[c.PRERELEASELOOSE]})?${f[c.BUILD]}?`+`)?)?`);p("XRANGE",`^${f[c.GTLT]}\\s*${f[c.XRANGEPLAIN]}$`);p("XRANGELOOSE",`^${f[c.GTLT]}\\s*${f[c.XRANGEPLAINLOOSE]}$`);p("COERCE",`${"(^|[^\\d])"+"(\\d{1,"}${r}})`+`(?:\\.(\\d{1,${r}}))?`+`(?:\\.(\\d{1,${r}}))?`+`(?:$|[^\\d])`);p("COERCERTL",f[c.COERCE],true);p("LONETILDE","(?:~>?)");p("TILDETRIM",`(\\s*)${f[c.LONETILDE]}\\s+`,true);t.tildeTrimReplace="$1~";p("TILDE",`^${f[c.LONETILDE]}${f[c.XRANGEPLAIN]}$`);p("TILDELOOSE",`^${f[c.LONETILDE]}${f[c.XRANGEPLAINLOOSE]}$`);p("LONECARET","(?:\\^)");p("CARETTRIM",`(\\s*)${f[c.LONECARET]}\\s+`,true);t.caretTrimReplace="$1^";p("CARET",`^${f[c.LONECARET]}${f[c.XRANGEPLAIN]}$`);p("CARETLOOSE",`^${f[c.LONECARET]}${f[c.XRANGEPLAINLOOSE]}$`);p("COMPARATORLOOSE",`^${f[c.GTLT]}\\s*(${f[c.LOOSEPLAIN]})$|^$`);p("COMPARATOR",`^${f[c.GTLT]}\\s*(${f[c.FULLPLAIN]})$|^$`);p("COMPARATORTRIM",`(\\s*)${f[c.GTLT]}\\s*(${f[c.LOOSEPLAIN]}|${f[c.XRANGEPLAIN]})`,true);t.comparatorTrimReplace="$1$2$3";p("HYPHENRANGE",`^\\s*(${f[c.XRANGEPLAIN]})`+`\\s+-\\s+`+`(${f[c.XRANGEPLAIN]})`+`\\s*$`);p("HYPHENRANGELOOSE",`^\\s*(${f[c.XRANGEPLAINLOOSE]})`+`\\s+-\\s+`+`(${f[c.XRANGEPLAINLOOSE]})`+`\\s*$`);p("STAR","(<|>)?=?\\s*\\*");p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(re$4,re$4.exports);const looseOption=Object.freeze({loose:true});const emptyOpts=Object.freeze({});const parseOptions$3=e=>{if(!e){return emptyOpts}if(typeof e!=="object"){return looseOption}return e};var parseOptions_1=parseOptions$3;const numeric=/^[0-9]+$/;const compareIdentifiers$1=(e,t)=>{const r=numeric.test(e);const n=numeric.test(t);if(r&&n){e=+e;t=+t}return e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1};const rcompareIdentifiers=(e,t)=>compareIdentifiers$1(t,e);var identifiers$1={compareIdentifiers:compareIdentifiers$1,rcompareIdentifiers};const debug$2=debug_1;const{MAX_LENGTH,MAX_SAFE_INTEGER}=constants$4;const{safeRe:re$3,t:t$3}=re$4.exports;const parseOptions$2=parseOptions_1;const{compareIdentifiers}=identifiers$1;class SemVer$f{constructor(e,t){t=parseOptions$2(t);if(e instanceof SemVer$f){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease){return e}else{e=e.version}}else if(typeof e!=="string"){throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`)}if(e.length>MAX_LENGTH){throw new TypeError(`version is longer than ${MAX_LENGTH} characters`)}debug$2("SemVer",e,t);this.options=t;this.loose=!!t.loose;this.includePrerelease=!!t.includePrerelease;const r=e.trim().match(t.loose?re$3[t$3.LOOSE]:re$3[t$3.FULL]);if(!r){throw new TypeError(`Invalid Version: ${e}`)}this.raw=e;this.major=+r[1];this.minor=+r[2];this.patch=+r[3];if(this.major>MAX_SAFE_INTEGER||this.major<0){throw new TypeError("Invalid major version")}if(this.minor>MAX_SAFE_INTEGER||this.minor<0){throw new TypeError("Invalid minor version")}if(this.patch>MAX_SAFE_INTEGER||this.patch<0){throw new TypeError("Invalid patch version")}if(!r[4]){this.prerelease=[]}else{this.prerelease=r[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<MAX_SAFE_INTEGER){return t}}return e}))}this.build=r[5]?r[5].split("."):[];this.format()}format(){this.version=`${this.major}.${this.minor}.${this.patch}`;if(this.prerelease.length){this.version+=`-${this.prerelease.join(".")}`}return this.version}toString(){return this.version}compare(e){debug$2("SemVer.compare",this.version,this.options,e);if(!(e instanceof SemVer$f)){if(typeof e==="string"&&e===this.version){return 0}e=new SemVer$f(e,this.options)}if(e.version===this.version){return 0}return this.compareMain(e)||this.comparePre(e)}compareMain(e){if(!(e instanceof SemVer$f)){e=new SemVer$f(e,this.options)}return compareIdentifiers(this.major,e.major)||compareIdentifiers(this.minor,e.minor)||compareIdentifiers(this.patch,e.patch)}comparePre(e){if(!(e instanceof SemVer$f)){e=new SemVer$f(e,this.options)}if(this.prerelease.length&&!e.prerelease.length){return-1}else if(!this.prerelease.length&&e.prerelease.length){return 1}else if(!this.prerelease.length&&!e.prerelease.length){return 0}let t=0;do{const r=this.prerelease[t];const n=e.prerelease[t];debug$2("prerelease compare",t,r,n);if(r===undefined&&n===undefined){return 0}else if(n===undefined){return 1}else if(r===undefined){return-1}else if(r===n){continue}else{return compareIdentifiers(r,n)}}while(++t)}compareBuild(e){if(!(e instanceof SemVer$f)){e=new SemVer$f(e,this.options)}let t=0;do{const r=this.build[t];const n=e.build[t];debug$2("prerelease compare",t,r,n);if(r===undefined&&n===undefined){return 0}else if(n===undefined){return 1}else if(r===undefined){return-1}else if(r===n){continue}else{return compareIdentifiers(r,n)}}while(++t)}inc(e,t,r){switch(e){case"premajor":this.prerelease.length=0;this.patch=0;this.minor=0;this.major++;this.inc("pre",t,r);break;case"preminor":this.prerelease.length=0;this.patch=0;this.minor++;this.inc("pre",t,r);break;case"prepatch":this.prerelease.length=0;this.inc("patch",t,r);this.inc("pre",t,r);break;case"prerelease":if(this.prerelease.length===0){this.inc("patch",t,r)}this.inc("pre",t,r);break;case"major":if(this.minor!==0||this.patch!==0||this.prerelease.length===0){this.major++}this.minor=0;this.patch=0;this.prerelease=[];break;case"minor":if(this.patch!==0||this.prerelease.length===0){this.minor++}this.patch=0;this.prerelease=[];break;case"patch":if(this.prerelease.length===0){this.patch++}this.prerelease=[];break;case"pre":{const e=Number(r)?1:0;if(!t&&r===false){throw new Error("invalid increment argument: identifier is empty")}if(this.prerelease.length===0){this.prerelease=[e]}else{let n=this.prerelease.length;while(--n>=0){if(typeof this.prerelease[n]==="number"){this.prerelease[n]++;n=-2}}if(n===-1){if(t===this.prerelease.join(".")&&r===false){throw new Error("invalid increment argument: identifier already exists")}this.prerelease.push(e)}}if(t){let n=[t,e];if(r===false){n=[t]}if(compareIdentifiers(this.prerelease[0],t)===0){if(isNaN(this.prerelease[1])){this.prerelease=n}}else{this.prerelease=n}}break}default:throw new Error(`invalid increment argument: ${e}`)}this.raw=this.format();if(this.build.length){this.raw+=`+${this.build.join(".")}`}return this}}var semver$1=SemVer$f;const SemVer$e=semver$1;const parse$6=(e,t,r=false)=>{if(e instanceof SemVer$e){return e}try{return new SemVer$e(e,t)}catch(e){if(!r){return null}throw e}};var parse_1=parse$6;const parse$5=parse_1;const valid$2=(e,t)=>{const r=parse$5(e,t);return r?r.version:null};var valid_1=valid$2;const parse$4=parse_1;const clean$1=(e,t)=>{const r=parse$4(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null};var clean_1=clean$1;const SemVer$d=semver$1;const inc$1=(e,t,r,n,i)=>{if(typeof r==="string"){i=n;n=r;r=undefined}try{return new SemVer$d(e instanceof SemVer$d?e.version:e,r).inc(t,n,i).version}catch(e){return null}};var inc_1=inc$1;const parse$3=parse_1;const diff$1=(e,t)=>{const r=parse$3(e,null,true);const n=parse$3(t,null,true);const i=r.compare(n);if(i===0){return null}const s=i>0;const a=s?r:n;const o=s?n:r;const f=!!a.prerelease.length;const c=!!o.prerelease.length;if(c&&!f){if(!o.patch&&!o.minor){return"major"}if(a.patch){return"patch"}if(a.minor){return"minor"}return"major"}const u=f?"pre":"";if(r.major!==n.major){return u+"major"}if(r.minor!==n.minor){return u+"minor"}if(r.patch!==n.patch){return u+"patch"}return"prerelease"};var diff_1=diff$1;const SemVer$c=semver$1;const major$1=(e,t)=>new SemVer$c(e,t).major;var major_1=major$1;const SemVer$b=semver$1;const minor$1=(e,t)=>new SemVer$b(e,t).minor;var minor_1=minor$1;const SemVer$a=semver$1;const patch$1=(e,t)=>new SemVer$a(e,t).patch;var patch_1=patch$1;const parse$2=parse_1;const prerelease$1=(e,t)=>{const r=parse$2(e,t);return r&&r.prerelease.length?r.prerelease:null};var prerelease_1=prerelease$1;const SemVer$9=semver$1;const compare$b=(e,t,r)=>new SemVer$9(e,r).compare(new SemVer$9(t,r));var compare_1=compare$b;const compare$a=compare_1;const rcompare$1=(e,t,r)=>compare$a(t,e,r);var rcompare_1=rcompare$1;const compare$9=compare_1;const compareLoose$1=(e,t)=>compare$9(e,t,true);var compareLoose_1=compareLoose$1;const SemVer$8=semver$1;const compareBuild$3=(e,t,r)=>{const n=new SemVer$8(e,r);const i=new SemVer$8(t,r);return n.compare(i)||n.compareBuild(i)};var compareBuild_1=compareBuild$3;const compareBuild$2=compareBuild_1;const sort$1=(e,t)=>e.sort(((e,r)=>compareBuild$2(e,r,t)));var sort_1=sort$1;const compareBuild$1=compareBuild_1;const rsort$1=(e,t)=>e.sort(((e,r)=>compareBuild$1(r,e,t)));var rsort_1=rsort$1;const compare$8=compare_1;const gt$4=(e,t,r)=>compare$8(e,t,r)>0;var gt_1=gt$4;const compare$7=compare_1;const lt$3=(e,t,r)=>compare$7(e,t,r)<0;var lt_1=lt$3;const compare$6=compare_1;const eq$3=(e,t,r)=>compare$6(e,t,r)===0;var eq_1=eq$3;const compare$5=compare_1;const neq$2=(e,t,r)=>compare$5(e,t,r)!==0;var neq_1=neq$2;const compare$4=compare_1;const gte$3=(e,t,r)=>compare$4(e,t,r)>=0;var gte_1=gte$3;const compare$3=compare_1;const lte$3=(e,t,r)=>compare$3(e,t,r)<=0;var lte_1=lte$3;const eq$2=eq_1;const neq$1=neq_1;const gt$3=gt_1;const gte$2=gte_1;const lt$2=lt_1;const lte$2=lte_1;const cmp$2=(e,t,r,n)=>{switch(t){case"===":if(typeof e==="object"){e=e.version}if(typeof r==="object"){r=r.version}return e===r;case"!==":if(typeof e==="object"){e=e.version}if(typeof r==="object"){r=r.version}return e!==r;case"":case"=":case"==":return eq$2(e,r,n);case"!=":return neq$1(e,r,n);case">":return gt$3(e,r,n);case">=":return gte$2(e,r,n);case"<":return lt$2(e,r,n);case"<=":return lte$2(e,r,n);default:throw new TypeError(`Invalid operator: ${t}`)}};var cmp_1=cmp$2;const SemVer$7=semver$1;const parse$1=parse_1;const{safeRe:re$2,t:t$2}=re$4.exports;const coerce$1=(e,t)=>{if(e instanceof SemVer$7){return e}if(typeof e==="number"){e=String(e)}if(typeof e!=="string"){return null}t=t||{};let r=null;if(!t.rtl){r=e.match(re$2[t$2.COERCE])}else{let t;while((t=re$2[t$2.COERCERTL].exec(e))&&(!r||r.index+r[0].length!==e.length)){if(!r||t.index+t[0].length!==r.index+r[0].length){r=t}re$2[t$2.COERCERTL].lastIndex=t.index+t[1].length+t[2].length}re$2[t$2.COERCERTL].lastIndex=-1}if(r===null){return null}return parse$1(`${r[2]}.${r[3]||"0"}.${r[4]||"0"}`,t)};var coerce_1=coerce$1;var yallist=Yallist$1;Yallist$1.Node=Node$1;Yallist$1.create=Yallist$1;function Yallist$1(e){var t=this;if(!(t instanceof Yallist$1)){t=new Yallist$1}t.tail=null;t.head=null;t.length=0;if(e&&typeof e.forEach==="function"){e.forEach((function(e){t.push(e)}))}else if(arguments.length>0){for(var r=0,n=arguments.length;r<n;r++){t.push(arguments[r])}}return t}Yallist$1.prototype.removeNode=function(e){if(e.list!==this){throw new Error("removing node which does not belong to this list")}var t=e.next;var r=e.prev;if(t){t.prev=r}if(r){r.next=t}if(e===this.head){this.head=t}if(e===this.tail){this.tail=r}e.list.length--;e.next=null;e.prev=null;e.list=null;return t};Yallist$1.prototype.unshiftNode=function(e){if(e===this.head){return}if(e.list){e.list.removeNode(e)}var t=this.head;e.list=this;e.next=t;if(t){t.prev=e}this.head=e;if(!this.tail){this.tail=e}this.length++};Yallist$1.prototype.pushNode=function(e){if(e===this.tail){return}if(e.list){e.list.removeNode(e)}var t=this.tail;e.list=this;e.prev=t;if(t){t.next=e}this.tail=e;if(!this.head){this.head=e}this.length++};Yallist$1.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++){push(this,arguments[e])}return this.length};Yallist$1.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++){unshift(this,arguments[e])}return this.length};Yallist$1.prototype.pop=function(){if(!this.tail){return undefined}var e=this.tail.value;this.tail=this.tail.prev;if(this.tail){this.tail.next=null}else{this.head=null}this.length--;return e};Yallist$1.prototype.shift=function(){if(!this.head){return undefined}var e=this.head.value;this.head=this.head.next;if(this.head){this.head.prev=null}else{this.tail=null}this.length--;return e};Yallist$1.prototype.forEach=function(e,t){t=t||this;for(var r=this.head,n=0;r!==null;n++){e.call(t,r.value,n,this);r=r.next}};Yallist$1.prototype.forEachReverse=function(e,t){t=t||this;for(var r=this.tail,n=this.length-1;r!==null;n--){e.call(t,r.value,n,this);r=r.prev}};Yallist$1.prototype.get=function(e){for(var t=0,r=this.head;r!==null&&t<e;t++){r=r.next}if(t===e&&r!==null){return r.value}};Yallist$1.prototype.getReverse=function(e){for(var t=0,r=this.tail;r!==null&&t<e;t++){r=r.prev}if(t===e&&r!==null){return r.value}};Yallist$1.prototype.map=function(e,t){t=t||this;var r=new Yallist$1;for(var n=this.head;n!==null;){r.push(e.call(t,n.value,this));n=n.next}return r};Yallist$1.prototype.mapReverse=function(e,t){t=t||this;var r=new Yallist$1;for(var n=this.tail;n!==null;){r.push(e.call(t,n.value,this));n=n.prev}return r};Yallist$1.prototype.reduce=function(e,t){var r;var n=this.head;if(arguments.length>1){r=t}else if(this.head){n=this.head.next;r=this.head.value}else{throw new TypeError("Reduce of empty list with no initial value")}for(var i=0;n!==null;i++){r=e(r,n.value,i);n=n.next}return r};Yallist$1.prototype.reduceReverse=function(e,t){var r;var n=this.tail;if(arguments.length>1){r=t}else if(this.tail){n=this.tail.prev;r=this.tail.value}else{throw new TypeError("Reduce of empty list with no initial value")}for(var i=this.length-1;n!==null;i--){r=e(r,n.value,i);n=n.prev}return r};Yallist$1.prototype.toArray=function(){var e=new Array(this.length);for(var t=0,r=this.head;r!==null;t++){e[t]=r.value;r=r.next}return e};Yallist$1.prototype.toArrayReverse=function(){var e=new Array(this.length);for(var t=0,r=this.tail;r!==null;t++){e[t]=r.value;r=r.prev}return e};Yallist$1.prototype.slice=function(e,t){t=t||this.length;if(t<0){t+=this.length}e=e||0;if(e<0){e+=this.length}var r=new Yallist$1;if(t<e||t<0){return r}if(e<0){e=0}if(t>this.length){t=this.length}for(var n=0,i=this.head;i!==null&&n<e;n++){i=i.next}for(;i!==null&&n<t;n++,i=i.next){r.push(i.value)}return r};Yallist$1.prototype.sliceReverse=function(e,t){t=t||this.length;if(t<0){t+=this.length}e=e||0;if(e<0){e+=this.length}var r=new Yallist$1;if(t<e||t<0){return r}if(e<0){e=0}if(t>this.length){t=this.length}for(var n=this.length,i=this.tail;i!==null&&n>t;n--){i=i.prev}for(;i!==null&&n>e;n--,i=i.prev){r.push(i.value)}return r};Yallist$1.prototype.splice=function(e,t,...r){if(e>this.length){e=this.length-1}if(e<0){e=this.length+e}for(var n=0,i=this.head;i!==null&&n<e;n++){i=i.next}var s=[];for(var n=0;i&&n<t;n++){s.push(i.value);i=this.removeNode(i)}if(i===null){i=this.tail}if(i!==this.head&&i!==this.tail){i=i.prev}for(var n=0;n<r.length;n++){i=insert(this,i,r[n])}return s};Yallist$1.prototype.reverse=function(){var e=this.head;var t=this.tail;for(var r=e;r!==null;r=r.prev){var n=r.prev;r.prev=r.next;r.next=n}this.head=t;this.tail=e;return this};function insert(e,t,r){var n=t===e.head?new Node$1(r,null,t,e):new Node$1(r,t,t.next,e);if(n.next===null){e.tail=n}if(n.prev===null){e.head=n}e.length++;return n}function push(e,t){e.tail=new Node$1(t,e.tail,null,e);if(!e.head){e.head=e.tail}e.length++}function unshift(e,t){e.head=new Node$1(t,null,e.head,e);if(!e.tail){e.tail=e.head}e.length++}function Node$1(e,t,r,n){if(!(this instanceof Node$1)){return new Node$1(e,t,r,n)}this.list=n;this.value=e;if(t){t.next=this;this.prev=t}else{this.prev=null}if(r){r.prev=this;this.next=r}else{this.next=null}}try{require("./iterator.js")(Yallist$1)}catch(e){}const Yallist=yallist;const MAX=Symbol("max");const LENGTH$1=Symbol("length");const LENGTH_CALCULATOR=Symbol("lengthCalculator");const ALLOW_STALE=Symbol("allowStale");const MAX_AGE=Symbol("maxAge");const DISPOSE=Symbol("dispose");const NO_DISPOSE_ON_SET=Symbol("noDisposeOnSet");const LRU_LIST=Symbol("lruList");const CACHE=Symbol("cache");const UPDATE_AGE_ON_GET=Symbol("updateAgeOnGet");const naiveLength=()=>1;class LRUCache{constructor(e){if(typeof e==="number")e={max:e};if(!e)e={};if(e.max&&(typeof e.max!=="number"||e.max<0))throw new TypeError("max must be a non-negative number");this[MAX]=e.max||Infinity;const t=e.length||naiveLength;this[LENGTH_CALCULATOR]=typeof t!=="function"?naiveLength:t;this[ALLOW_STALE]=e.stale||false;if(e.maxAge&&typeof e.maxAge!=="number")throw new TypeError("maxAge must be a number");this[MAX_AGE]=e.maxAge||0;this[DISPOSE]=e.dispose;this[NO_DISPOSE_ON_SET]=e.noDisposeOnSet||false;this[UPDATE_AGE_ON_GET]=e.updateAgeOnGet||false;this.reset()}set max(e){if(typeof e!=="number"||e<0)throw new TypeError("max must be a non-negative number");this[MAX]=e||Infinity;trim(this)}get max(){return this[MAX]}set allowStale(e){this[ALLOW_STALE]=!!e}get allowStale(){return this[ALLOW_STALE]}set maxAge(e){if(typeof e!=="number")throw new TypeError("maxAge must be a non-negative number");this[MAX_AGE]=e;trim(this)}get maxAge(){return this[MAX_AGE]}set lengthCalculator(e){if(typeof e!=="function")e=naiveLength;if(e!==this[LENGTH_CALCULATOR]){this[LENGTH_CALCULATOR]=e;this[LENGTH$1]=0;this[LRU_LIST].forEach((e=>{e.length=this[LENGTH_CALCULATOR](e.value,e.key);this[LENGTH$1]+=e.length}))}trim(this)}get lengthCalculator(){return this[LENGTH_CALCULATOR]}get length(){return this[LENGTH$1]}get itemCount(){return this[LRU_LIST].length}rforEach(e,t){t=t||this;for(let r=this[LRU_LIST].tail;r!==null;){const n=r.prev;forEachStep(this,e,r,t);r=n}}forEach(e,t){t=t||this;for(let r=this[LRU_LIST].head;r!==null;){const n=r.next;forEachStep(this,e,r,t);r=n}}keys(){return this[LRU_LIST].toArray().map((e=>e.key))}values(){return this[LRU_LIST].toArray().map((e=>e.value))}reset(){if(this[DISPOSE]&&this[LRU_LIST]&&this[LRU_LIST].length){this[LRU_LIST].forEach((e=>this[DISPOSE](e.key,e.value)))}this[CACHE]=new Map;this[LRU_LIST]=new Yallist;this[LENGTH$1]=0}dump(){return this[LRU_LIST].map((e=>isStale(this,e)?false:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)})).toArray().filter((e=>e))}dumpLru(){return this[LRU_LIST]}set(e,t,r){r=r||this[MAX_AGE];if(r&&typeof r!=="number")throw new TypeError("maxAge must be a number");const n=r?Date.now():0;const i=this[LENGTH_CALCULATOR](t,e);if(this[CACHE].has(e)){if(i>this[MAX]){del(this,this[CACHE].get(e));return false}const s=this[CACHE].get(e);const a=s.value;if(this[DISPOSE]){if(!this[NO_DISPOSE_ON_SET])this[DISPOSE](e,a.value)}a.now=n;a.maxAge=r;a.value=t;this[LENGTH$1]+=i-a.length;a.length=i;this.get(e);trim(this);return true}const s=new Entry(e,t,i,n,r);if(s.length>this[MAX]){if(this[DISPOSE])this[DISPOSE](e,t);return false}this[LENGTH$1]+=s.length;this[LRU_LIST].unshift(s);this[CACHE].set(e,this[LRU_LIST].head);trim(this);return true}has(e){if(!this[CACHE].has(e))return false;const t=this[CACHE].get(e).value;return!isStale(this,t)}get(e){return get(this,e,true)}peek(e){return get(this,e,false)}pop(){const e=this[LRU_LIST].tail;if(!e)return null;del(this,e);return e.value}del(e){del(this,this[CACHE].get(e))}load(e){this.reset();const t=Date.now();for(let r=e.length-1;r>=0;r--){const n=e[r];const i=n.e||0;if(i===0)this.set(n.k,n.v);else{const e=i-t;if(e>0){this.set(n.k,n.v,e)}}}}prune(){this[CACHE].forEach(((e,t)=>get(this,t,false)))}}const get=(e,t,r)=>{const n=e[CACHE].get(t);if(n){const t=n.value;if(isStale(e,t)){del(e,n);if(!e[ALLOW_STALE])return undefined}else{if(r){if(e[UPDATE_AGE_ON_GET])n.value.now=Date.now();e[LRU_LIST].unshiftNode(n)}}return t.value}};const isStale=(e,t)=>{if(!t||!t.maxAge&&!e[MAX_AGE])return false;const r=Date.now()-t.now;return t.maxAge?r>t.maxAge:e[MAX_AGE]&&r>e[MAX_AGE]};const trim=e=>{if(e[LENGTH$1]>e[MAX]){for(let t=e[LRU_LIST].tail;e[LENGTH$1]>e[MAX]&&t!==null;){const r=t.prev;del(e,t);t=r}}};const del=(e,t)=>{if(t){const r=t.value;if(e[DISPOSE])e[DISPOSE](r.key,r.value);e[LENGTH$1]-=r.length;e[CACHE].delete(r.key);e[LRU_LIST].removeNode(t)}};class Entry{constructor(e,t,r,n,i){this.key=e;this.value=t;this.length=r;this.now=n;this.maxAge=i||0}}const forEachStep=(e,t,r,n)=>{let i=r.value;if(isStale(e,i)){del(e,r);if(!e[ALLOW_STALE])i=undefined}if(i)t.call(n,i.value,i.key,e)};var lruCache=LRUCache;class Range$b{constructor(e,t){t=parseOptions$1(t);if(e instanceof Range$b){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease){return e}else{return new Range$b(e.raw,t)}}if(e instanceof Comparator$4){this.raw=e.value;this.set=[[e]];this.format();return this}this.options=t;this.loose=!!t.loose;this.includePrerelease=!!t.includePrerelease;this.raw=e.trim().split(/\s+/).join(" ");this.set=this.raw.split("||").map((e=>this.parseRange(e.trim()))).filter((e=>e.length));if(!this.set.length){throw new TypeError(`Invalid SemVer Range: ${this.raw}`)}if(this.set.length>1){const e=this.set[0];this.set=this.set.filter((e=>!isNullSet(e[0])));if(this.set.length===0){this.set=[e]}else if(this.set.length>1){for(const e of this.set){if(e.length===1&&isAny(e[0])){this.set=[e];break}}}}this.format()}format(){this.range=this.set.map((e=>e.join(" ").trim())).join("||").trim();return this.range}toString(){return this.range}parseRange(e){const t=(this.options.includePrerelease&&FLAG_INCLUDE_PRERELEASE)|(this.options.loose&&FLAG_LOOSE);const r=t+":"+e;const n=cache.get(r);if(n){return n}const i=this.options.loose;const s=i?re$1[t$1.HYPHENRANGELOOSE]:re$1[t$1.HYPHENRANGE];e=e.replace(s,hyphenReplace(this.options.includePrerelease));debug$1("hyphen replace",e);e=e.replace(re$1[t$1.COMPARATORTRIM],comparatorTrimReplace);debug$1("comparator trim",e);e=e.replace(re$1[t$1.TILDETRIM],tildeTrimReplace);debug$1("tilde trim",e);e=e.replace(re$1[t$1.CARETTRIM],caretTrimReplace);debug$1("caret trim",e);let a=e.split(" ").map((e=>parseComparator(e,this.options))).join(" ").split(/\s+/).map((e=>replaceGTE0(e,this.options)));if(i){a=a.filter((e=>{debug$1("loose invalid filter",e,this.options);return!!e.match(re$1[t$1.COMPARATORLOOSE])}))}debug$1("range list",a);const o=new Map;const f=a.map((e=>new Comparator$4(e,this.options)));for(const e of f){if(isNullSet(e)){return[e]}o.set(e.value,e)}if(o.size>1&&o.has("")){o.delete("")}const c=[...o.values()];cache.set(r,c);return c}intersects(e,t){if(!(e instanceof Range$b)){throw new TypeError("a Range is required")}return this.set.some((r=>isSatisfiable(r,t)&&e.set.some((e=>isSatisfiable(e,t)&&r.every((r=>e.every((e=>r.intersects(e,t)))))))))}test(e){if(!e){return false}if(typeof e==="string"){try{e=new SemVer$6(e,this.options)}catch(e){return false}}for(let t=0;t<this.set.length;t++){if(testSet(this.set[t],e,this.options)){return true}}return false}}var range=Range$b;const LRU=lruCache;const cache=new LRU({max:1e3});const parseOptions$1=parseOptions_1;const Comparator$4=comparator;const debug$1=debug_1;const SemVer$6=semver$1;const{safeRe:re$1,t:t$1,comparatorTrimReplace,tildeTrimReplace,caretTrimReplace}=re$4.exports;const{FLAG_INCLUDE_PRERELEASE,FLAG_LOOSE}=constants$4;const isNullSet=e=>e.value==="<0.0.0-0";const isAny=e=>e.value==="";const isSatisfiable=(e,t)=>{let r=true;const n=e.slice();let i=n.pop();while(r&&n.length){r=n.every((e=>i.intersects(e,t)));i=n.pop()}return r};const parseComparator=(e,t)=>{debug$1("comp",e,t);e=replaceCarets(e,t);debug$1("caret",e);e=replaceTildes(e,t);debug$1("tildes",e);e=replaceXRanges(e,t);debug$1("xrange",e);e=replaceStars(e,t);debug$1("stars",e);return e};const isX=e=>!e||e.toLowerCase()==="x"||e==="*";const replaceTildes=(e,t)=>e.trim().split(/\s+/).map((e=>replaceTilde(e,t))).join(" ");const replaceTilde=(e,t)=>{const r=t.loose?re$1[t$1.TILDELOOSE]:re$1[t$1.TILDE];return e.replace(r,((t,r,n,i,s)=>{debug$1("tilde",e,t,r,n,i,s);let a;if(isX(r)){a=""}else if(isX(n)){a=`>=${r}.0.0 <${+r+1}.0.0-0`}else if(isX(i)){a=`>=${r}.${n}.0 <${r}.${+n+1}.0-0`}else if(s){debug$1("replaceTilde pr",s);a=`>=${r}.${n}.${i}-${s} <${r}.${+n+1}.0-0`}else{a=`>=${r}.${n}.${i} <${r}.${+n+1}.0-0`}debug$1("tilde return",a);return a}))};const replaceCarets=(e,t)=>e.trim().split(/\s+/).map((e=>replaceCaret(e,t))).join(" ");const replaceCaret=(e,t)=>{debug$1("caret",e,t);const r=t.loose?re$1[t$1.CARETLOOSE]:re$1[t$1.CARET];const n=t.includePrerelease?"-0":"";return e.replace(r,((t,r,i,s,a)=>{debug$1("caret",e,t,r,i,s,a);let o;if(isX(r)){o=""}else if(isX(i)){o=`>=${r}.0.0${n} <${+r+1}.0.0-0`}else if(isX(s)){if(r==="0"){o=`>=${r}.${i}.0${n} <${r}.${+i+1}.0-0`}else{o=`>=${r}.${i}.0${n} <${+r+1}.0.0-0`}}else if(a){debug$1("replaceCaret pr",a);if(r==="0"){if(i==="0"){o=`>=${r}.${i}.${s}-${a} <${r}.${i}.${+s+1}-0`}else{o=`>=${r}.${i}.${s}-${a} <${r}.${+i+1}.0-0`}}else{o=`>=${r}.${i}.${s}-${a} <${+r+1}.0.0-0`}}else{debug$1("no pr");if(r==="0"){if(i==="0"){o=`>=${r}.${i}.${s}${n} <${r}.${i}.${+s+1}-0`}else{o=`>=${r}.${i}.${s}${n} <${r}.${+i+1}.0-0`}}else{o=`>=${r}.${i}.${s} <${+r+1}.0.0-0`}}debug$1("caret return",o);return o}))};const replaceXRanges=(e,t)=>{debug$1("replaceXRanges",e,t);return e.split(/\s+/).map((e=>replaceXRange(e,t))).join(" ")};const replaceXRange=(e,t)=>{e=e.trim();const r=t.loose?re$1[t$1.XRANGELOOSE]:re$1[t$1.XRANGE];return e.replace(r,((r,n,i,s,a,o)=>{debug$1("xRange",e,r,n,i,s,a,o);const f=isX(i);const c=f||isX(s);const u=c||isX(a);const l=u;if(n==="="&&l){n=""}o=t.includePrerelease?"-0":"";if(f){if(n===">"||n==="<"){r="<0.0.0-0"}else{r="*"}}else if(n&&l){if(c){s=0}a=0;if(n===">"){n=">=";if(c){i=+i+1;s=0;a=0}else{s=+s+1;a=0}}else if(n==="<="){n="<";if(c){i=+i+1}else{s=+s+1}}if(n==="<"){o="-0"}r=`${n+i}.${s}.${a}${o}`}else if(c){r=`>=${i}.0.0${o} <${+i+1}.0.0-0`}else if(u){r=`>=${i}.${s}.0${o} <${i}.${+s+1}.0-0`}debug$1("xRange return",r);return r}))};const replaceStars=(e,t)=>{debug$1("replaceStars",e,t);return e.trim().replace(re$1[t$1.STAR],"")};const replaceGTE0=(e,t)=>{debug$1("replaceGTE0",e,t);return e.trim().replace(re$1[t.includePrerelease?t$1.GTE0PRE:t$1.GTE0],"")};const hyphenReplace=e=>(t,r,n,i,s,a,o,f,c,u,l,h,d)=>{if(isX(n)){r=""}else if(isX(i)){r=`>=${n}.0.0${e?"-0":""}`}else if(isX(s)){r=`>=${n}.${i}.0${e?"-0":""}`}else if(a){r=`>=${r}`}else{r=`>=${r}${e?"-0":""}`}if(isX(c)){f=""}else if(isX(u)){f=`<${+c+1}.0.0-0`}else if(isX(l)){f=`<${c}.${+u+1}.0-0`}else if(h){f=`<=${c}.${u}.${l}-${h}`}else if(e){f=`<${c}.${u}.${+l+1}-0`}else{f=`<=${f}`}return`${r} ${f}`.trim()};const testSet=(e,t,r)=>{for(let r=0;r<e.length;r++){if(!e[r].test(t)){return false}}if(t.prerelease.length&&!r.includePrerelease){for(let r=0;r<e.length;r++){debug$1(e[r].semver);if(e[r].semver===Comparator$4.ANY){continue}if(e[r].semver.prerelease.length>0){const n=e[r].semver;if(n.major===t.major&&n.minor===t.minor&&n.patch===t.patch){return true}}}return false}return true};const ANY$2=Symbol("SemVer ANY");class Comparator$3{static get ANY(){return ANY$2}constructor(e,t){t=parseOptions(t);if(e instanceof Comparator$3){if(e.loose===!!t.loose){return e}else{e=e.value}}e=e.trim().split(/\s+/).join(" ");debug("comparator",e,t);this.options=t;this.loose=!!t.loose;this.parse(e);if(this.semver===ANY$2){this.value=""}else{this.value=this.operator+this.semver.version}debug("comp",this)}parse(e){const r=this.options.loose?re[t.COMPARATORLOOSE]:re[t.COMPARATOR];const n=e.match(r);if(!n){throw new TypeError(`Invalid comparator: ${e}`)}this.operator=n[1]!==undefined?n[1]:"";if(this.operator==="="){this.operator=""}if(!n[2]){this.semver=ANY$2}else{this.semver=new SemVer$5(n[2],this.options.loose)}}toString(){return this.value}test(e){debug("Comparator.test",e,this.options.loose);if(this.semver===ANY$2||e===ANY$2){return true}if(typeof e==="string"){try{e=new SemVer$5(e,this.options)}catch(e){return false}}return cmp$1(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof Comparator$3)){throw new TypeError("a Comparator is required")}if(this.operator===""){if(this.value===""){return true}return new Range$a(e.value,t).test(this.value)}else if(e.operator===""){if(e.value===""){return true}return new Range$a(this.value,t).test(e.semver)}t=parseOptions(t);if(t.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")){return false}if(!t.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))){return false}if(this.operator.startsWith(">")&&e.operator.startsWith(">")){return true}if(this.operator.startsWith("<")&&e.operator.startsWith("<")){return true}if(this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")){return true}if(cmp$1(this.semver,"<",e.semver,t)&&this.operator.startsWith(">")&&e.operator.startsWith("<")){return true}if(cmp$1(this.semver,">",e.semver,t)&&this.operator.startsWith("<")&&e.operator.startsWith(">")){return true}return false}}var comparator=Comparator$3;const parseOptions=parseOptions_1;const{safeRe:re,t}=re$4.exports;const cmp$1=cmp_1;const debug=debug_1;const SemVer$5=semver$1;const Range$a=range;const Range$9=range;const satisfies$4=(e,t,r)=>{try{t=new Range$9(t,r)}catch(e){return false}return t.test(e)};var satisfies_1=satisfies$4;const Range$8=range;const toComparators$1=(e,t)=>new Range$8(e,t).set.map((e=>e.map((e=>e.value)).join(" ").trim().split(" ")));var toComparators_1=toComparators$1;const SemVer$4=semver$1;const Range$7=range;const maxSatisfying$1=(e,t,r)=>{let n=null;let i=null;let s=null;try{s=new Range$7(t,r)}catch(e){return null}e.forEach((e=>{if(s.test(e)){if(!n||i.compare(e)===-1){n=e;i=new SemVer$4(n,r)}}}));return n};var maxSatisfying_1=maxSatisfying$1;const SemVer$3=semver$1;const Range$6=range;const minSatisfying$1=(e,t,r)=>{let n=null;let i=null;let s=null;try{s=new Range$6(t,r)}catch(e){return null}e.forEach((e=>{if(s.test(e)){if(!n||i.compare(e)===1){n=e;i=new SemVer$3(n,r)}}}));return n};var minSatisfying_1=minSatisfying$1;const SemVer$2=semver$1;const Range$5=range;const gt$2=gt_1;const minVersion$1=(e,t)=>{e=new Range$5(e,t);let r=new SemVer$2("0.0.0");if(e.test(r)){return r}r=new SemVer$2("0.0.0-0");if(e.test(r)){return r}r=null;for(let t=0;t<e.set.length;++t){const n=e.set[t];let i=null;n.forEach((e=>{const t=new SemVer$2(e.semver.version);switch(e.operator){case">":if(t.prerelease.length===0){t.patch++}else{t.prerelease.push(0)}t.raw=t.format();case"":case">=":if(!i||gt$2(t,i)){i=t}break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${e.operator}`)}}));if(i&&(!r||gt$2(r,i))){r=i}}if(r&&e.test(r)){return r}return null};var minVersion_1=minVersion$1;const Range$4=range;const validRange$1=(e,t)=>{try{return new Range$4(e,t).range||"*"}catch(e){return null}};var valid$1=validRange$1;const SemVer$1=semver$1;const Comparator$2=comparator;const{ANY:ANY$1}=Comparator$2;const Range$3=range;const satisfies$3=satisfies_1;const gt$1=gt_1;const lt$1=lt_1;const lte$1=lte_1;const gte$1=gte_1;const outside$3=(e,t,r,n)=>{e=new SemVer$1(e,n);t=new Range$3(t,n);let i,s,a,o,f;switch(r){case">":i=gt$1;s=lte$1;a=lt$1;o=">";f=">=";break;case"<":i=lt$1;s=gte$1;a=gt$1;o="<";f="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(satisfies$3(e,t,n)){return false}for(let r=0;r<t.set.length;++r){const c=t.set[r];let u=null;let l=null;c.forEach((e=>{if(e.semver===ANY$1){e=new Comparator$2(">=0.0.0")}u=u||e;l=l||e;if(i(e.semver,u.semver,n)){u=e}else if(a(e.semver,l.semver,n)){l=e}}));if(u.operator===o||u.operator===f){return false}if((!l.operator||l.operator===o)&&s(e,l.semver)){return false}else if(l.operator===f&&a(e,l.semver)){return false}}return true};var outside_1=outside$3;const outside$2=outside_1;const gtr$1=(e,t,r)=>outside$2(e,t,">",r);var gtr_1=gtr$1;const outside$1=outside_1;const ltr$1=(e,t,r)=>outside$1(e,t,"<",r);var ltr_1=ltr$1;const Range$2=range;const intersects$1=(e,t,r)=>{e=new Range$2(e,r);t=new Range$2(t,r);return e.intersects(t,r)};var intersects_1=intersects$1;const satisfies$2=satisfies_1;const compare$2=compare_1;var simplify=(e,t,r)=>{const n=[];let i=null;let s=null;const a=e.sort(((e,t)=>compare$2(e,t,r)));for(const e of a){const a=satisfies$2(e,t,r);if(a){s=e;if(!i){i=e}}else{if(s){n.push([i,s])}s=null;i=null}}if(i){n.push([i,null])}const o=[];for(const[e,t]of n){if(e===t){o.push(e)}else if(!t&&e===a[0]){o.push("*")}else if(!t){o.push(`>=${e}`)}else if(e===a[0]){o.push(`<=${t}`)}else{o.push(`${e} - ${t}`)}}const f=o.join(" || ");const c=typeof t.raw==="string"?t.raw:String(t);return f.length<c.length?f:t};const Range$1=range;const Comparator$1=comparator;const{ANY}=Comparator$1;const satisfies$1=satisfies_1;const compare$1=compare_1;const subset$1=(e,t,r={})=>{if(e===t){return true}e=new Range$1(e,r);t=new Range$1(t,r);let n=false;e:for(const i of e.set){for(const e of t.set){const t=simpleSubset(i,e,r);n=n||t!==null;if(t){continue e}}if(n){return false}}return true};const minimumVersionWithPreRelease=[new Comparator$1(">=0.0.0-0")];const minimumVersion=[new Comparator$1(">=0.0.0")];const simpleSubset=(e,t,r)=>{if(e===t){return true}if(e.length===1&&e[0].semver===ANY){if(t.length===1&&t[0].semver===ANY){return true}else if(r.includePrerelease){e=minimumVersionWithPreRelease}else{e=minimumVersion}}if(t.length===1&&t[0].semver===ANY){if(r.includePrerelease){return true}else{t=minimumVersion}}const n=new Set;let i,s;for(const t of e){if(t.operator===">"||t.operator===">="){i=higherGT(i,t,r)}else if(t.operator==="<"||t.operator==="<="){s=lowerLT(s,t,r)}else{n.add(t.semver)}}if(n.size>1){return null}let a;if(i&&s){a=compare$1(i.semver,s.semver,r);if(a>0){return null}else if(a===0&&(i.operator!==">="||s.operator!=="<=")){return null}}for(const e of n){if(i&&!satisfies$1(e,String(i),r)){return null}if(s&&!satisfies$1(e,String(s),r)){return null}for(const n of t){if(!satisfies$1(e,String(n),r)){return false}}return true}let o,f;let c,u;let l=s&&!r.includePrerelease&&s.semver.prerelease.length?s.semver:false;let h=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:false;if(l&&l.prerelease.length===1&&s.operator==="<"&&l.prerelease[0]===0){l=false}for(const e of t){u=u||e.operator===">"||e.operator===">=";c=c||e.operator==="<"||e.operator==="<=";if(i){if(h){if(e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===h.major&&e.semver.minor===h.minor&&e.semver.patch===h.patch){h=false}}if(e.operator===">"||e.operator===">="){o=higherGT(i,e,r);if(o===e&&o!==i){return false}}else if(i.operator===">="&&!satisfies$1(i.semver,String(e),r)){return false}}if(s){if(l){if(e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===l.major&&e.semver.minor===l.minor&&e.semver.patch===l.patch){l=false}}if(e.operator==="<"||e.operator==="<="){f=lowerLT(s,e,r);if(f===e&&f!==s){return false}}else if(s.operator==="<="&&!satisfies$1(s.semver,String(e),r)){return false}}if(!e.operator&&(s||i)&&a!==0){return false}}if(i&&c&&!s&&a!==0){return false}if(s&&u&&!i&&a!==0){return false}if(h||l){return false}return true};const higherGT=(e,t,r)=>{if(!e){return t}const n=compare$1(e.semver,t.semver,r);return n>0?e:n<0?t:t.operator===">"&&e.operator===">="?t:e};const lowerLT=(e,t,r)=>{if(!e){return t}const n=compare$1(e.semver,t.semver,r);return n<0?e:n>0?t:t.operator==="<"&&e.operator==="<="?t:e};var subset_1=subset$1;const internalRe=re$4.exports;const constants$3=constants$4;const SemVer=semver$1;const identifiers=identifiers$1;const parse=parse_1;const valid=valid_1;const clean=clean_1;const inc=inc_1;const diff=diff_1;const major=major_1;const minor=minor_1;const patch=patch_1;const prerelease=prerelease_1;const compare=compare_1;const rcompare=rcompare_1;const compareLoose=compareLoose_1;const compareBuild=compareBuild_1;const sort=sort_1;const rsort=rsort_1;const gt=gt_1;const lt=lt_1;const eq$1=eq_1;const neq=neq_1;const gte=gte_1;const lte=lte_1;const cmp=cmp_1;const coerce=coerce_1;const Comparator=comparator;const Range=range;const satisfies=satisfies_1;const toComparators=toComparators_1;const maxSatisfying=maxSatisfying_1;const minSatisfying=minSatisfying_1;const minVersion=minVersion_1;const validRange=valid$1;const outside=outside_1;const gtr=gtr_1;const ltr=ltr_1;const intersects=intersects_1;const simplifyRange=simplify;const subset=subset_1;var semver={parse,valid,clean,inc,diff,major,minor,patch,prerelease,compare,rcompare,compareLoose,compareBuild,sort,rsort,gt,lt,eq:eq$1,neq,gte,lte,cmp,coerce,Comparator,Range,satisfies,toComparators,maxSatisfying,minSatisfying,minVersion,validRange,outside,gtr,ltr,intersects,simplifyRange,subset,SemVer,re:internalRe.re,src:internalRe.src,tokens:internalRe.t,SEMVER_SPEC_VERSION:constants$3.SEMVER_SPEC_VERSION,RELEASE_TYPES:constants$3.RELEASE_TYPES,compareIdentifiers:identifiers.compareIdentifiers,rcompareIdentifiers:identifiers.rcompareIdentifiers};var typedDataHandler={};var HASH_UNDEFINED="__lodash_hash_undefined__";function setCacheAdd$1(e){this.__data__.set(e,HASH_UNDEFINED);return this}var _setCacheAdd=setCacheAdd$1;function setCacheHas$1(e){return this.__data__.has(e)}var _setCacheHas=setCacheHas$1;var MapCache=_MapCache,setCacheAdd=_setCacheAdd,setCacheHas=_setCacheHas;function SetCache$1(e){var t=-1,r=e==null?0:e.length;this.__data__=new MapCache;while(++t<r){this.add(e[t])}}SetCache$1.prototype.add=SetCache$1.prototype.push=setCacheAdd;SetCache$1.prototype.has=setCacheHas;var _SetCache=SetCache$1;function arraySome$1(e,t){var r=-1,n=e==null?0:e.length;while(++r<n){if(t(e[r],r,e)){return true}}return false}var _arraySome=arraySome$1;function cacheHas$1(e,t){return e.has(t)}var _cacheHas=cacheHas$1;var SetCache=_SetCache,arraySome=_arraySome,cacheHas=_cacheHas;var COMPARE_PARTIAL_FLAG$3=1,COMPARE_UNORDERED_FLAG$1=2;function equalArrays$2(e,t,r,n,i,s){var a=r&COMPARE_PARTIAL_FLAG$3,o=e.length,f=t.length;if(o!=f&&!(a&&f>o)){return false}var c=s.get(e);var u=s.get(t);if(c&&u){return c==t&&u==e}var l=-1,h=true,d=r&COMPARE_UNORDERED_FLAG$1?new SetCache:undefined;s.set(e,t);s.set(t,e);while(++l<o){var p=e[l],y=t[l];if(n){var m=a?n(y,p,l,t,e,s):n(p,y,l,e,t,s)}if(m!==undefined){if(m){continue}h=false;break}if(d){if(!arraySome(t,(function(e,t){if(!cacheHas(d,t)&&(p===e||i(p,e,r,n,s))){return d.push(t)}}))){h=false;break}}else if(!(p===y||i(p,y,r,n,s))){h=false;break}}s["delete"](e);s["delete"](t);return h}var _equalArrays=equalArrays$2;function mapToArray$1(e){var t=-1,r=Array(e.size);e.forEach((function(e,n){r[++t]=[n,e]}));return r}var _mapToArray=mapToArray$1;function setToArray$1(e){var t=-1,r=Array(e.size);e.forEach((function(e){r[++t]=e}));return r}var _setToArray=setToArray$1;var Symbol$1=_Symbol,Uint8Array$1=_Uint8Array,eq=eq_1$1,equalArrays$1=_equalArrays,mapToArray=_mapToArray,setToArray=_setToArray;var COMPARE_PARTIAL_FLAG$2=1,COMPARE_UNORDERED_FLAG=2;var boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",mapTag="[object Map]",numberTag="[object Number]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]";var arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]";var symbolProto=Symbol$1?Symbol$1.prototype:undefined,symbolValueOf=symbolProto?symbolProto.valueOf:undefined;function equalByTag$1(e,t,r,n,i,s,a){switch(r){case dataViewTag:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset){return false}e=e.buffer;t=t.buffer;case arrayBufferTag:if(e.byteLength!=t.byteLength||!s(new Uint8Array$1(e),new Uint8Array$1(t))){return false}return true;case boolTag:case dateTag:case numberTag:return eq(+e,+t);case errorTag:return e.name==t.name&&e.message==t.message;case regexpTag:case stringTag:return e==t+"";case mapTag:var o=mapToArray;case setTag:var f=n&COMPARE_PARTIAL_FLAG$2;o||(o=setToArray);if(e.size!=t.size&&!f){return false}var c=a.get(e);if(c){return c==t}n|=COMPARE_UNORDERED_FLAG;a.set(e,t);var u=equalArrays$1(o(e),o(t),n,i,s,a);a["delete"](e);return u;case symbolTag:if(symbolValueOf){return symbolValueOf.call(e)==symbolValueOf.call(t)}}return false}var _equalByTag=equalByTag$1;var getAllKeys=_getAllKeys;var COMPARE_PARTIAL_FLAG$1=1;var objectProto$1=Object.prototype;var hasOwnProperty$1=objectProto$1.hasOwnProperty;function equalObjects$1(e,t,r,n,i,s){var a=r&COMPARE_PARTIAL_FLAG$1,o=getAllKeys(e),f=o.length,c=getAllKeys(t),u=c.length;if(f!=u&&!a){return false}var l=f;while(l--){var h=o[l];if(!(a?h in t:hasOwnProperty$1.call(t,h))){return false}}var d=s.get(e);var p=s.get(t);if(d&&p){return d==t&&p==e}var y=true;s.set(e,t);s.set(t,e);var m=a;while(++l<f){h=o[l];var g=e[h],b=t[h];if(n){var A=a?n(b,g,h,t,e,s):n(g,b,h,e,t,s)}if(!(A===undefined?g===b||i(g,b,r,n,s):A)){y=false;break}m||(m=h=="constructor")}if(y&&!m){var w=e.constructor,E=t.constructor;if(w!=E&&("constructor"in e&&"constructor"in t)&&!(typeof w=="function"&&w instanceof w&&typeof E=="function"&&E instanceof E)){y=false}}s["delete"](e);s["delete"](t);return y}var _equalObjects=equalObjects$1;var Stack=_Stack,equalArrays=_equalArrays,equalByTag=_equalByTag,equalObjects=_equalObjects,getTag=_getTag,isArray=isArray_1,isBuffer=isBuffer$3.exports,isTypedArray=isTypedArray_1;var COMPARE_PARTIAL_FLAG=1;var argsTag="[object Arguments]",arrayTag="[object Array]",objectTag="[object Object]";var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function baseIsEqualDeep$1(e,t,r,n,i,s){var a=isArray(e),o=isArray(t),f=a?arrayTag:getTag(e),c=o?arrayTag:getTag(t);f=f==argsTag?objectTag:f;c=c==argsTag?objectTag:c;var u=f==objectTag,l=c==objectTag,h=f==c;if(h&&isBuffer(e)){if(!isBuffer(t)){return false}a=true;u=false}if(h&&!u){s||(s=new Stack);return a||isTypedArray(e)?equalArrays(e,t,r,n,i,s):equalByTag(e,t,f,r,n,i,s)}if(!(r&COMPARE_PARTIAL_FLAG)){var d=u&&hasOwnProperty.call(e,"__wrapped__"),p=l&&hasOwnProperty.call(t,"__wrapped__");if(d||p){var y=d?e.value():e,m=p?t.value():t;s||(s=new Stack);return i(y,m,r,n,s)}}if(!h){return false}s||(s=new Stack);return equalObjects(e,t,r,n,i,s)}var _baseIsEqualDeep=baseIsEqualDeep$1;var baseIsEqualDeep=_baseIsEqualDeep,isObjectLike=isObjectLike_1;function baseIsEqual$1(e,t,r,n,i){if(e===t){return true}if(e==null||t==null||!isObjectLike(e)&&!isObjectLike(t)){return e!==e&&t!==t}return baseIsEqualDeep(e,t,r,n,baseIsEqual$1,i)}var _baseIsEqual=baseIsEqual$1;var baseIsEqual=_baseIsEqual;function isEqual(e,t){return baseIsEqual(e,t)}var isEqual_1=isEqual;var utils={};(function(e){Object.defineProperty(e,"__esModule",{value:true});e.getTimestampFromOffchainRevocationReceipt=e.getTimestampFromTimestampReceipt=e.getUIDsFromAttestReceipt=e.getUIDsFromMultiAttestTx=e.getUIDFromAttestTx=e.getOffchainUID=e.getUID=e.getSchemaUID=e.ZERO_BYTES32=e.ZERO_BYTES=e.ZERO_ADDRESS=void 0;const t=typechainTypes;const r=require$$0;const n=offchain$1;e.ZERO_ADDRESS=r.ZeroAddress;e.ZERO_BYTES="0x";e.ZERO_BYTES32="0x0000000000000000000000000000000000000000000000000000000000000000";var i;(function(e){e["Attested"]="Attested";e["Timestamped"]="Timestamped";e["RevokedOffchain"]="RevokedOffchain"})(i||(i={}));const s={[i.Attested]:(0,r.keccak256)((0,r.toUtf8Bytes)("Attested(address,address,bytes32,bytes32)")),[i.Timestamped]:(0,r.keccak256)((0,r.toUtf8Bytes)("Timestamped(bytes32,uint64)")),[i.RevokedOffchain]:(0,r.keccak256)((0,r.toUtf8Bytes)("RevokedOffchain(address,bytes32,uint64)"))};const a=(e,t,n)=>(0,r.solidityPackedKeccak256)(["string","address","bool"],[e,t,n]);e.getSchemaUID=a;const o=(e,t,n,i,s,a,o,f,c)=>(0,r.solidityPackedKeccak256)(["bytes","address","address","uint64","uint64","bool","bytes32","bytes","uint32"],[(0,r.hexlify)((0,r.toUtf8Bytes)(e)),t,n,i,s,a,o,f,c]);e.getUID=o;const f=(t,i,s,a,o,f,c,u,l)=>{switch(t){case n.OffchainAttestationVersion.Legacy:return(0,r.solidityPackedKeccak256)(["bytes","address","address","uint64","uint64","bool","bytes32","bytes","uint32"],[(0,r.hexlify)((0,r.toUtf8Bytes)(i)),s,e.ZERO_ADDRESS,a,o,f,c,u,0]);case n.OffchainAttestationVersion.Version1:return(0,r.solidityPackedKeccak256)(["uint16","bytes","address","address","uint64","uint64","bool","bytes32","bytes","uint32"],[t,(0,r.hexlify)((0,r.toUtf8Bytes)(i)),s,e.ZERO_ADDRESS,a,o,f,c,u,0]);case n.OffchainAttestationVersion.Version2:return(0,r.solidityPackedKeccak256)(["uint16","bytes","address","address","uint64","uint64","bool","bytes32","bytes","bytes32","uint32"],[t,(0,r.hexlify)((0,r.toUtf8Bytes)(i)),s,e.ZERO_ADDRESS,a,o,f,c,u,l,0]);default:throw new Error("Unsupported version")}};e.getOffchainUID=f;const c=(e,n,i)=>{const a=new r.Interface(t.EAS__factory.abi);const o=[];for(const t of e.logs.filter((e=>e.topics[0]===s[n]))||[]){o.push({...t,log:n,fragment:{name:n},args:a.decodeEventLog(n,t.data,t.topics)})}if(!o){return[]}const f=o.filter((e=>e.fragment?.name===n));if(f.length===0){throw new Error(`Unable to process ${n} events`)}return f.map((e=>a.decodeEventLog(n,e.data,e.topics)[i]))};const u=async t=>(await(0,e.getUIDsFromMultiAttestTx)(t))[0];e.getUIDFromAttestTx=u;const l=async t=>{const r=await t;const n=await r.wait();if(!n){throw new Error(`Unable to confirm: ${r}`)}return(0,e.getUIDsFromAttestReceipt)(n)};e.getUIDsFromMultiAttestTx=l;const h=e=>c(e,i.Attested,"uid");e.getUIDsFromAttestReceipt=h;const d=e=>c(e,i.Timestamped,"timestamp").map((e=>BigInt(e)));e.getTimestampFromTimestampReceipt=d;const p=e=>c(e,i.RevokedOffchain,"timestamp").map((e=>BigInt(e)));e.getTimestampFromOffchainRevocationReceipt=p})(utils);(function(e){Object.defineProperty(e,"__esModule",{value:true});e.TypedDataHandler=e.InvalidAddress=e.InvalidTypes=e.InvalidPrimaryType=e.InvalidDomain=e.EIP712_DOMAIN=void 0;const t=require$$0$1;const r=require$$0;const n=t.__importDefault(isEqual_1);const i=utils;e.EIP712_DOMAIN="EIP712Domain(string name,string version,uint256 chainId,address verifyingContract)";class s extends Error{}e.InvalidDomain=s;class a extends Error{}e.InvalidPrimaryType=a;class o extends Error{}e.InvalidTypes=o;class f extends Error{}e.InvalidAddress=f;class c{config;constructor(e){this.config=e}getDomainSeparator(){return(0,r.keccak256)(r.AbiCoder.defaultAbiCoder().encode(["bytes32","bytes32","bytes32","uint256","address"],[(0,r.keccak256)((0,r.toUtf8Bytes)(e.EIP712_DOMAIN)),(0,r.keccak256)((0,r.toUtf8Bytes)(this.config.name)),(0,r.keccak256)((0,r.toUtf8Bytes)(this.config.version)),this.config.chainId,this.config.address]))}getDomainTypedData(){return{name:this.config.name,version:this.config.version,chainId:this.config.chainId,verifyingContract:this.config.address}}async signTypedDataRequest(e,t,n){const i=await n.signTypedData(t.domain,t.types,e);const s=r.Signature.from(i);return{...t,signature:{v:s.v,r:s.r,s:s.s}}}verifyTypedDataRequestSignature(e,t,c,u=true){const l={...t.domain,chainId:BigInt(t.domain.chainId)};let h=this.getDomainTypedData();if(!u){h={...h,version:l.version}}if(!(0,n.default)(l,h)){throw new s}if(t.primaryType!==c.primaryType){throw new a}if(!(0,n.default)(t.types,c.types)){throw new o}if(e===i.ZERO_ADDRESS){throw new f}const{signature:d}=t;const p=r.Signature.from({v:d.v,r:(0,r.hexlify)(d.r),s:(0,r.hexlify)(d.s)}).serialized;const y=(0,r.verifyTypedData)(l,t.types,t.message,p);return(0,r.getAddress)(e)===(0,r.getAddress)(y)}}e.TypedDataHandler=c})(typedDataHandler);(function(e){Object.defineProperty(e,"__esModule",{value:true});e.Delegated=e.DelegatedAttestationVersion=e.EIP712_NAME=void 0;const t=require$$0$1;const r=t.__importDefault(omit_1$1);const n=t.__importDefault(semver);const i=typedDataHandler;e.EIP712_NAME="EAS";var s;(function(e){e[e["Legacy"]=0]="Legacy";e[e["Version1"]=1]="Version1";e[e["Version2"]=2]="Version2"})(s||(e.DelegatedAttestationVersion=s={}));const a={[s.Legacy]:{typedSignature:"Attest(bytes32 schema,address recipient,uint64 expirationTime,bool revocable,bytes32 refUID,bytes data,uint256 nonce)",primaryType:"Attest",types:{Attest:[{name:"schema",type:"bytes32"},{name:"recipient",type:"address"},{name:"expirationTime",type:"uint64"},{name:"revocable",type:"bool"},{name:"refUID",type:"bytes32"},{name:"data",type:"bytes"},{name:"nonce",type:"uint256"}]}},[s.Version1]:{typedSignature:"Attest(bytes32 schema,address recipient,uint64 expirationTime,bool revocable,bytes32 refUID,bytes data,uint256 value,uint256 nonce,uint64 deadline)",primaryType:"Attest",types:{Attest:[{name:"schema",type:"bytes32"},{name:"recipient",type:"address"},{name:"expirationTime",type:"uint64"},{name:"revocable",type:"bool"},{name:"refUID",type:"bytes32"},{name:"data",type:"bytes"},{name:"value",type:"uint256"},{name:"nonce",type:"uint256"},{name:"deadline",type:"uint64"}]}},[s.Version2]:{typedSignature:"Attest(address attester,bytes32 schema,address recipient,uint64 expirationTime,bool revocable,bytes32 refUID,bytes data,uint256 value,uint256 nonce,uint64 deadline)",primaryType:"Attest",types:{Attest:[{name:"attester",type:"address"},{name:"schema",type:"bytes32"},{name:"recipient",type:"address"},{name:"expirationTime",type:"uint64"},{name:"revocable",type:"bool"},{name:"refUID",type:"bytes32"},{name:"data",type:"bytes"},{name:"value",type:"uint256"},{name:"nonce",type:"uint256"},{name:"deadline",type:"uint64"}]}}};const o={[s.Legacy]:{typedSignature:"Revoke(bytes32 schema,bytes32 uid,uint256 nonce)",primaryType:"Revoke",types:{Revoke:[{name:"schema",type:"bytes32"},{name:"uid",type:"bytes32"},{name:"nonce",type:"uint256"}]}},[s.Version1]:{typedSignature:"Revoke(bytes32 schema,bytes32 uid,uint256 value,uint256 nonce,uint64 deadline)",primaryType:"Revoke",types:{Revoke:[{name:"schema",type:"bytes32"},{name:"uid",type:"bytes32"},{name:"value",type:"uint256"},{name:"nonce",type:"uint256"},{name:"deadline",type:"uint64"}]}},[s.Version2]:{typedSignature:"Revoke(address revoker,bytes32 schema,bytes32 uid,uint256 value,uint256 nonce,uint64 deadline)",primaryType:"Revoke",types:{Revoke:[{name:"revoker",type:"address"},{name:"schema",type:"bytes32"},{name:"uid",type:"bytes32"},{name:"value",type:"uint256"},{name:"nonce",type:"uint256"},{name:"deadline",type:"uint64"}]}}};class f extends i.TypedDataHandler{version;attestType;revokeType;constructor(t){super({...t,name:e.EIP712_NAME});if(n.default.lt(t.version,"1.2.0")){this.version=s.Legacy}else if(n.default.lt(t.version,"1.3.0")){this.version=s.Version1}else{this.version=s.Version2}this.attestType=a[this.version];this.revokeType=o[this.version]}async signDelegatedAttestation(e,t){let n={attester:await t.getAddress(),...e};if(this.version===s.Legacy){n=(0,r.default)(e,["value","deadline"])}return this.signTypedDataRequest(n,{domain:this.getDomainTypedData(),primaryType:this.attestType.primaryType,message:n,types:this.attestType.types},t)}verifyDelegatedAttestationSignature(e,t){return this.verifyTypedDataRequestSignature(e,{...t,message:{attester:e,...t.message}},{primaryType:this.attestType.primaryType,types:this.attestType.types})}async signDelegatedRevocation(e,t){let n={revoker:await t.getAddress(),...e};if(this.version===s.Legacy){n=(0,r.default)(e,["value","deadline"])}return this.signTypedDataRequest(n,{domain:this.getDomainTypedData(),primaryType:this.revokeType.primaryType,message:n,types:this.revokeType.types},t)}verifyDelegatedRevocationSignature(e,t){return this.verifyTypedDataRequestSignature(e,{...t,message:{revoker:e,...t.message}},{primaryType:this.revokeType.primaryType,types:this.revokeType.types})}}e.Delegated=f})(delegated);var delegatedProxy={};Object.defineProperty(delegatedProxy,"__esModule",{value:true});delegatedProxy.DelegatedProxy=delegatedProxy.DelegatedProxyAttestationVersion=void 0;const tslib_1=require$$0$1;const omit_1=tslib_1.__importDefault(omit_1$1);const semver_1=tslib_1.__importDefault(semver);const typed_data_handler_1=typedDataHandler;var DelegatedProxyAttestationVersion;(function(e){e[e["Legacy"]=0]="Legacy";e[e["Version1"]=1]="Version1";e[e["Version2"]=2]="Version2"})(DelegatedProxyAttestationVersion||(delegatedProxy.DelegatedProxyAttestationVersion=DelegatedProxyAttestationVersion={}));const DELEGATED_PROXY_ATTESTATION_TYPES={[DelegatedProxyAttestationVersion.Legacy]:{typedSignature:"Attest(bytes32 schema,address recipient,uint64 expirationTime,bool revocable,bytes32 refUID,bytes data,uint64 deadline)",primaryType:"Attest",types:{Attest:[{name:"schema",type:"bytes32"},{name:"recipient",type:"address"},{name:"expirationTime",type:"uint64"},{name:"revocable",type:"bool"},{name:"refUID",type:"bytes32"},{name:"data",type:"bytes"},{name:"deadline",type:"uint64"}]}},[DelegatedProxyAttestationVersion.Version1]:{typedSignature:"Attest(bytes32 schema,address recipient,uint64 expirationTime,bool revocable,bytes32 refUID,bytes data,uint256 value,uint64 deadline)",primaryType:"Attest",types:{Attest:[{name:"schema",type:"bytes32"},{name:"recipient",type:"address"},{name:"expirationTime",type:"uint64"},{name:"revocable",type:"bool"},{name:"refUID",type:"bytes32"},{name:"data",type:"bytes"},{name:"value",type:"uint256"},{name:"deadline",type:"uint64"}]}},[DelegatedProxyAttestationVersion.Version2]:{typedSignature:"Attest(address attester,bytes32 schema,address recipient,uint64 expirationTime,bool revocable,bytes32 refUID,bytes data,uint256 value,uint64 deadline)",primaryType:"Attest",types:{Attest:[{name:"attester",type:"address"},{name:"schema",type:"bytes32"},{name:"recipient",type:"address"},{name:"expirationTime",type:"uint64"},{name:"revocable",type:"bool"},{name:"refUID",type:"bytes32"},{name:"data",type:"bytes"},{name:"value",type:"uint256"},{name:"deadline",type:"uint64"}]}}};const DELEGATED_PROXY_REVOCATION_TYPES={[DelegatedProxyAttestationVersion.Legacy]:{typedSignature:"Revoke(bytes32 schema,bytes32 uid,uint64 deadline)",primaryType:"Revoke",types:{Revoke:[{name:"schema",type:"bytes32"},{name:"uid",type:"bytes32"},{name:"deadline",type:"uint64"}]}},[DelegatedProxyAttestationVersion.Version1]:{typedSignature:"Revoke(bytes32 schema,bytes32 uid,uint256 value,uint64 deadline)",primaryType:"Revoke",types:{Revoke:[{name:"schema",type:"bytes32"},{name:"uid",type:"bytes32"},{name:"value",type:"uint256"},{name:"deadline",type:"uint64"}]}},[DelegatedProxyAttestationVersion.Version2]:{typedSignature:"Revoke(address revoker,bytes32 schema,bytes32 uid,uint256 value,uint64 deadline)",primaryType:"Revoke",types:{Revoke:[{name:"revoker",type:"address"},{name:"schema",type:"bytes32"},{name:"uid",type:"bytes32"},{name:"value",type:"uint256"},{name:"deadline",type:"uint64"}]}}};class DelegatedProxy extends typed_data_handler_1.TypedDataHandler{version;attestType;revokeType;constructor(e){super(e);if(semver_1.default.lt(e.version,"1.2.0")){this.version=DelegatedProxyAttestationVersion.Legacy}else if(semver_1.default.lt(e.version,"1.3.0")){this.version=DelegatedProxyAttestationVersion.Version1}else{this.version=DelegatedProxyAttestationVersion.Version2}this.attestType=DELEGATED_PROXY_ATTESTATION_TYPES[this.version];this.revokeType=DELEGATED_PROXY_REVOCATION_TYPES[this.version]}async signDelegatedProxyAttestation(e,t){let r={attester:await t.getAddress(),...e};if(this.version===DelegatedProxyAttestationVersion.Legacy){r=(0,omit_1.default)(e,["value"])}return this.signTypedDataRequest(r,{domain:this.getDomainTypedData(),primaryType:this.attestType.primaryType,message:r,types:this.attestType.types},t)}verifyDelegatedProxyAttestationSignature(e,t){return this.verifyTypedDataRequestSignature(e,{...t,message:{attester:e,...t.message}},{primaryType:this.attestType.primaryType,types:this.attestType.types})}async signDelegatedProxyRevocation(e,t){let r={revoker:await t.getAddress(),...e};if(this.version===DelegatedProxyAttestationVersion.Legacy){r=(0,omit_1.default)(e,["value"])}return this.signTypedDataRequest(r,{domain:this.getDomainTypedData(),primaryType:this.revokeType.primaryType,message:r,types:this.revokeType.types},t)}verifyDelegatedProxyRevocationSignature(e,t){return this.verifyTypedDataRequestSignature(e,{...t,message:{revoker:e,...t.message}},{primaryType:this.revokeType.primaryType,types:this.revokeType.types})}}delegatedProxy.DelegatedProxy=DelegatedProxy;var offchain={};(function(e){Object.defineProperty(e,"__esModule",{value:true});e.Offchain=e.SALT_SIZE=e.OFFCHAIN_ATTESTATION_TYPES=e.OffchainAttestationVersion=void 0;const t=require$$0;const r=utils;const n=delegated;const i=typedDataHandler;var s;(function(e){e[e["Legacy"]=0]="Legacy";e[e["Version1"]=1]="Version1";e[e["Version2"]=2]="Version2"})(s||(e.OffchainAttestationVersion=s={}));e.OFFCHAIN_ATTESTATION_TYPES={[s.Legacy]:[{domain:"EAS Attestation",primaryType:"Attestation",types:{Attestation:[{name:"schema",type:"bytes32"},{name:"recipient",type:"address"},{name:"time",type:"uint64"},{name:"expirationTime",type:"uint64"},{name:"revocable",type:"bool"},{name:"refUID",type:"bytes32"},{name:"data",type:"bytes"}]}},{domain:"EAS Attestation",primaryType:"Attestation",types:{Attest:[{name:"schema",type:"bytes32"},{name:"recipient",type:"address"},{name:"time",type:"uint64"},{name:"expirationTime",type:"uint64"},{name:"revocable",type:"bool"},{name:"refUID",type:"bytes32"},{name:"data",type:"bytes"}]}},{domain:"EAS Attestation",primaryType:"Attest",types:{Attest:[{name:"schema",type:"bytes32"},{name:"recipient",type:"address"},{name:"time",type:"uint64"},{name:"expirationTime",type:"uint64"},{name:"revocable",type:"bool"},{name:"refUID",type:"bytes32"},{name:"data",type:"bytes"}]}}],[s.Version1]:[{domain:"EAS Attestation",primaryType:"Attest",types:{Attest:[{name:"version",type:"uint16"},{name:"schema",type:"bytes32"},{name:"recipient",type:"address"},{name:"time",type:"uint64"},{name:"expirationTime",type:"uint64"},{name:"revocable",type:"bool"},{name:"refUID",type:"bytes32"},{name:"data",type:"bytes"}]}}],[s.Version2]:[{domain:"EAS Attestation",primaryType:"Attest",types:{Attest:[{name:"version",type:"uint16"},{name:"schema",type:"bytes32"},{name:"recipient",type:"address"},{name:"time",type:"uint64"},{name:"expirationTime",type:"uint64"},{name:"revocable",type:"bool"},{name:"refUID",type:"bytes32"},{name:"data",type:"bytes"},{name:"salt",type:"bytes32"}]}}]};const a={verifyOnchain:false};e.SALT_SIZE=32;class o extends i.TypedDataHandler{version;signingType;verificationTypes;eas;constructor(t,r,i){if(r>s.Version2){throw new Error("Unsupported version")}super({...t,name:n.EIP712_NAME});this.version=r;this.verificationTypes=e.OFFCHAIN_ATTESTATION_TYPES[this.version];this.signingType=this.verificationTypes[0];this.eas=i}getDomainSeparator(){return(0,t.keccak256)(t.AbiCoder.defaultAbiCoder().encode(["bytes32","bytes32","uint256","address"],[(0,t.keccak256)((0,t.toUtf8Bytes)(this.signingType.domain)),(0,t.keccak256)((0,t.toUtf8Bytes)(this.config.version)),this.config.chainId,this.config.address]))}getDomainTypedData(){return{name:this.signingType.domain,version:this.config.version,chainId:this.config.chainId,verifyingContract:this.config.address}}async signOffchainAttestation(n,i,o){const f={version:this.version,...n};if(this.version>=s.Version2&&!f.salt){f.salt=(0,t.hexlify)((0,t.randomBytes)(e.SALT_SIZE))}const c=await this.signTypedDataRequest(f,{domain:this.getDomainTypedData(),primaryType:this.signingType.primaryType,message:f,types:this.signingType.types},i);const{verifyOnchain:u}={...a,...o};if(u){try{const{schema:e,recipient:t,expirationTime:s,revocable:a,data:o}=n;await this.eas.contract.attest.staticCall({schema:e,data:{recipient:t,expirationTime:s,revocable:a,refUID:r.ZERO_BYTES32,data:o,value:0}},{from:i})}catch(e){throw new Error(`Unable to verify offchain attestation with: ${e}`)}}return{version:this.version,uid:this.getOffchainUID(f),...c}}verifyOffchainAttestationSignature(e,t){if(t.uid!==o.getOffchainUID(this.version,t)){return false}const r=this.verificationTypes.length;return this.verificationTypes.some(((n,s)=>{try{return this.verifyTypedDataRequestSignature(e,t,{primaryType:n.primaryType,types:n.types},false)}catch(e){if(s!==r-1&&(e instanceof i.InvalidPrimaryType||e instanceof i.InvalidTypes)){return false}throw e}}))}getOffchainUID(e){return(0,r.getOffchainUID)(this.version,e.schema,e.recipient,e.time,e.expirationTime,e.revocable,e.refUID,e.data,e.salt)}static getOffchainUID(e,t){return(0,r.getOffchainUID)(e,t.message.schema,t.message.recipient,t.message.time,t.message.expirationTime,t.message.revocable,t.message.refUID,t.message.data,t.message.salt)}}e.Offchain=o})(offchain);var offchainUtils={};const version="3.7.6";const VERSION=version;const _hasatob=typeof atob==="function";const _hasbtoa=typeof btoa==="function";const _hasBuffer=typeof Buffer==="function";const _TD=typeof TextDecoder==="function"?new TextDecoder:undefined;const _TE=typeof TextEncoder==="function"?new TextEncoder:undefined;const b64ch="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";const b64chs=Array.prototype.slice.call(b64ch);const b64tab=(e=>{let t={};e.forEach(((e,r)=>t[e]=r));return t})(b64chs);const b64re=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/;const _fromCC=String.fromCharCode.bind(String);const _U8Afrom=typeof Uint8Array.from==="function"?Uint8Array.from.bind(Uint8Array):e=>new Uint8Array(Array.prototype.slice.call(e,0));const _mkUriSafe=e=>e.replace(/=/g,"").replace(/[+\/]/g,(e=>e=="+"?"-":"_"));const _tidyB64=e=>e.replace(/[^A-Za-z0-9\+\/]/g,"");const btoaPolyfill=e=>{let t,r,n,i,s="";const a=e.length%3;for(let a=0;a<e.length;){if((r=e.charCodeAt(a++))>255||(n=e.charCodeAt(a++))>255||(i=e.charCodeAt(a++))>255)throw new TypeError("invalid character found");t=r<<16|n<<8|i;s+=b64chs[t>>18&63]+b64chs[t>>12&63]+b64chs[t>>6&63]+b64chs[t&63]}return a?s.slice(0,a-3)+"===".substring(a):s};const _btoa=_hasbtoa?e=>btoa(e):_hasBuffer?e=>Buffer.from(e,"binary").toString("base64"):btoaPolyfill;const _fromUint8Array=_hasBuffer?e=>Buffer.from(e).toString("base64"):e=>{const t=4096;let r=[];for(let n=0,i=e.length;n<i;n+=t){r.push(_fromCC.apply(null,e.subarray(n,n+t)))}return _btoa(r.join(""))};const fromUint8Array=(e,t=false)=>t?_mkUriSafe(_fromUint8Array(e)):_fromUint8Array(e);const cb_utob=e=>{if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?_fromCC(192|t>>>6)+_fromCC(128|t&63):_fromCC(224|t>>>12&15)+_fromCC(128|t>>>6&63)+_fromCC(128|t&63)}else{var t=65536+(e.charCodeAt(0)-55296)*1024+(e.charCodeAt(1)-56320);return _fromCC(240|t>>>18&7)+_fromCC(128|t>>>12&63)+_fromCC(128|t>>>6&63)+_fromCC(128|t&63)}};const re_utob=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g;const utob=e=>e.replace(re_utob,cb_utob);const _encode=_hasBuffer?e=>Buffer.from(e,"utf8").toString("base64"):_TE?e=>_fromUint8Array(_TE.encode(e)):e=>_btoa(utob(e));const encode=(e,t=false)=>t?_mkUriSafe(_encode(e)):_encode(e);const encodeURI=e=>encode(e,true);const re_btou=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g;const cb_btou=e=>{switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),r=t-65536;return _fromCC((r>>>10)+55296)+_fromCC((r&1023)+56320);case 3:return _fromCC((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return _fromCC((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}};const btou=e=>e.replace(re_btou,cb_btou);const atobPolyfill=e=>{e=e.replace(/\s+/g,"");if(!b64re.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(e.length&3));let t,r="",n,i;for(let s=0;s<e.length;){t=b64tab[e.charAt(s++)]<<18|b64tab[e.charAt(s++)]<<12|(n=b64tab[e.charAt(s++)])<<6|(i=b64tab[e.charAt(s++)]);r+=n===64?_fromCC(t>>16&255):i===64?_fromCC(t>>16&255,t>>8&255):_fromCC(t>>16&255,t>>8&255,t&255)}return r};const _atob=_hasatob?e=>atob(_tidyB64(e)):_hasBuffer?e=>Buffer.from(e,"base64").toString("binary"):atobPolyfill;const _toUint8Array=_hasBuffer?e=>_U8Afrom(Buffer.from(e,"base64")):e=>_U8Afrom(_atob(e).split("").map((e=>e.charCodeAt(0))));const toUint8Array=e=>_toUint8Array(_unURI(e));const _decode=_hasBuffer?e=>Buffer.from(e,"base64").toString("utf8"):_TD?e=>_TD.decode(_toUint8Array(e)):e=>btou(_atob(e));const _unURI=e=>_tidyB64(e.replace(/[-_]/g,(e=>e=="-"?"+":"/")));const decode=e=>_decode(_unURI(e));const isValid=e=>{if(typeof e!=="string")return false;const t=e.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(t)||!/[^\s0-9a-zA-Z\-_]/.test(t)};const _noEnum=e=>({value:e,enumerable:false,writable:true,configurable:true});const extendString=function(){const e=(e,t)=>Object.defineProperty(String.prototype,e,_noEnum(t));e("fromBase64",(function(){return decode(this)}));e("toBase64",(function(e){return encode(this,e)}));e("toBase64URI",(function(){return encode(this,true)}));e("toBase64URL",(function(){return encode(this,true)}));e("toUint8Array",(function(){return toUint8Array(this)}))};const extendUint8Array=function(){const e=(e,t)=>Object.defineProperty(Uint8Array.prototype,e,_noEnum(t));e("toBase64",(function(e){return fromUint8Array(this,e)}));e("toBase64URI",(function(){return fromUint8Array(this,true)}));e("toBase64URL",(function(){return fromUint8Array(this,true)}))};const extendBuiltins=()=>{extendString();extendUint8Array()};const gBase64={version,VERSION,atob:_atob,atobPolyfill,btoa:_btoa,btoaPolyfill,fromBase64:decode,toBase64:encode,encode,encodeURI,encodeURL:encodeURI,utob,btou,decode,isValid,fromUint8Array,toUint8Array,extendString,extendUint8Array,extendBuiltins};const base64=Object.freeze({__proto__:null,version,VERSION,atob:_atob,atobPolyfill,btoa:_btoa,btoaPolyfill,fromBase64:decode,toBase64:encode,utob,encode,encodeURI,encodeURL:encodeURI,btou,decode,isValid,fromUint8Array,toUint8Array,extendString,extendUint8Array,extendBuiltins,Base64:gBase64});const require$$2=getAugmentedNamespace(base64);
/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const Z_FIXED$1=4;const Z_BINARY=0;const Z_TEXT=1;const Z_UNKNOWN$1=2;function zero$1(e){let t=e.length;while(--t>=0){e[t]=0}}const STORED_BLOCK=0;const STATIC_TREES=1;const DYN_TREES=2;const MIN_MATCH$1=3;const MAX_MATCH$1=258;const LENGTH_CODES$1=29;const LITERALS$1=256;const L_CODES$1=LITERALS$1+1+LENGTH_CODES$1;const D_CODES$1=30;const BL_CODES$1=19;const HEAP_SIZE$1=2*L_CODES$1+1;const MAX_BITS$1=15;const Buf_size=16;const MAX_BL_BITS=7;const END_BLOCK=256;const REP_3_6=16;const REPZ_3_10=17;const REPZ_11_138=18;const extra_lbits=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]);const extra_dbits=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]);const extra_blbits=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]);const bl_order=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);const DIST_CODE_LEN=512;const static_ltree=new Array((L_CODES$1+2)*2);zero$1(static_ltree);const static_dtree=new Array(D_CODES$1*2);zero$1(static_dtree);const _dist_code=new Array(DIST_CODE_LEN);zero$1(_dist_code);const _length_code=new Array(MAX_MATCH$1-MIN_MATCH$1+1);zero$1(_length_code);const base_length=new Array(LENGTH_CODES$1);zero$1(base_length);const base_dist=new Array(D_CODES$1);zero$1(base_dist);function StaticTreeDesc(e,t,r,n,i){this.static_tree=e;this.extra_bits=t;this.extra_base=r;this.elems=n;this.max_length=i;this.has_stree=e&&e.length}let static_l_desc;let static_d_desc;let static_bl_desc;function TreeDesc(e,t){this.dyn_tree=e;this.max_code=0;this.stat_desc=t}const d_code=e=>e<256?_dist_code[e]:_dist_code[256+(e>>>7)];const put_short=(e,t)=>{e.pending_buf[e.pending++]=t&255;e.pending_buf[e.pending++]=t>>>8&255};const send_bits=(e,t,r)=>{if(e.bi_valid>Buf_size-r){e.bi_buf|=t<<e.bi_valid&65535;put_short(e,e.bi_buf);e.bi_buf=t>>Buf_size-e.bi_valid;e.bi_valid+=r-Buf_size}else{e.bi_buf|=t<<e.bi_valid&65535;e.bi_valid+=r}};const send_code=(e,t,r)=>{send_bits(e,r[t*2],r[t*2+1])};const bi_reverse=(e,t)=>{let r=0;do{r|=e&1;e>>>=1;r<<=1}while(--t>0);return r>>>1};const bi_flush=e=>{if(e.bi_valid===16){put_short(e,e.bi_buf);e.bi_buf=0;e.bi_valid=0}else if(e.bi_valid>=8){e.pending_buf[e.pending++]=e.bi_buf&255;e.bi_buf>>=8;e.bi_valid-=8}};const gen_bitlen=(e,t)=>{const r=t.dyn_tree;const n=t.max_code;const i=t.stat_desc.static_tree;const s=t.stat_desc.has_stree;const a=t.stat_desc.extra_bits;const o=t.stat_desc.extra_base;const f=t.stat_desc.max_length;let c;let u,l;let h;let d;let p;let y=0;for(h=0;h<=MAX_BITS$1;h++){e.bl_count[h]=0}r[e.heap[e.heap_max]*2+1]=0;for(c=e.heap_max+1;c<HEAP_SIZE$1;c++){u=e.heap[c];h=r[r[u*2+1]*2+1]+1;if(h>f){h=f;y++}r[u*2+1]=h;if(u>n){continue}e.bl_count[h]++;d=0;if(u>=o){d=a[u-o]}p=r[u*2];e.opt_len+=p*(h+d);if(s){e.static_len+=p*(i[u*2+1]+d)}}if(y===0){return}do{h=f-1;while(e.bl_count[h]===0){h--}e.bl_count[h]--;e.bl_count[h+1]+=2;e.bl_count[f]--;y-=2}while(y>0);for(h=f;h!==0;h--){u=e.bl_count[h];while(u!==0){l=e.heap[--c];if(l>n){continue}if(r[l*2+1]!==h){e.opt_len+=(h-r[l*2+1])*r[l*2];r[l*2+1]=h}u--}}};const gen_codes=(e,t,r)=>{const n=new Array(MAX_BITS$1+1);let i=0;let s;let a;for(s=1;s<=MAX_BITS$1;s++){i=i+r[s-1]<<1;n[s]=i}for(a=0;a<=t;a++){let t=e[a*2+1];if(t===0){continue}e[a*2]=bi_reverse(n[t]++,t)}};const tr_static_init=()=>{let e;let t;let r;let n;let i;const s=new Array(MAX_BITS$1+1);r=0;for(n=0;n<LENGTH_CODES$1-1;n++){base_length[n]=r;for(e=0;e<1<<extra_lbits[n];e++){_length_code[r++]=n}}_length_code[r-1]=n;i=0;for(n=0;n<16;n++){base_dist[n]=i;for(e=0;e<1<<extra_dbits[n];e++){_dist_code[i++]=n}}i>>=7;for(;n<D_CODES$1;n++){base_dist[n]=i<<7;for(e=0;e<1<<extra_dbits[n]-7;e++){_dist_code[256+i++]=n}}for(t=0;t<=MAX_BITS$1;t++){s[t]=0}e=0;while(e<=143){static_ltree[e*2+1]=8;e++;s[8]++}while(e<=255){static_ltree[e*2+1]=9;e++;s[9]++}while(e<=279){static_ltree[e*2+1]=7;e++;s[7]++}while(e<=287){static_ltree[e*2+1]=8;e++;s[8]++}gen_codes(static_ltree,L_CODES$1+1,s);for(e=0;e<D_CODES$1;e++){static_dtree[e*2+1]=5;static_dtree[e*2]=bi_reverse(e,5)}static_l_desc=new StaticTreeDesc(static_ltree,extra_lbits,LITERALS$1+1,L_CODES$1,MAX_BITS$1);static_d_desc=new StaticTreeDesc(static_dtree,extra_dbits,0,D_CODES$1,MAX_BITS$1);static_bl_desc=new StaticTreeDesc(new Array(0),extra_blbits,0,BL_CODES$1,MAX_BL_BITS)};const init_block=e=>{let t;for(t=0;t<L_CODES$1;t++){e.dyn_ltree[t*2]=0}for(t=0;t<D_CODES$1;t++){e.dyn_dtree[t*2]=0}for(t=0;t<BL_CODES$1;t++){e.bl_tree[t*2]=0}e.dyn_ltree[END_BLOCK*2]=1;e.opt_len=e.static_len=0;e.sym_next=e.matches=0};const bi_windup=e=>{if(e.bi_valid>8){put_short(e,e.bi_buf)}else if(e.bi_valid>0){e.pending_buf[e.pending++]=e.bi_buf}e.bi_buf=0;e.bi_valid=0};const smaller=(e,t,r,n)=>{const i=t*2;const s=r*2;return e[i]<e[s]||e[i]===e[s]&&n[t]<=n[r]};const pqdownheap=(e,t,r)=>{const n=e.heap[r];let i=r<<1;while(i<=e.heap_len){if(i<e.heap_len&&smaller(t,e.heap[i+1],e.heap[i],e.depth)){i++}if(smaller(t,n,e.heap[i],e.depth)){break}e.heap[r]=e.heap[i];r=i;i<<=1}e.heap[r]=n};const compress_block=(e,t,r)=>{let n;let i;let s=0;let a;let o;if(e.sym_next!==0){do{n=e.pending_buf[e.sym_buf+s++]&255;n+=(e.pending_buf[e.sym_buf+s++]&255)<<8;i=e.pending_buf[e.sym_buf+s++];if(n===0){send_code(e,i,t)}else{a=_length_code[i];send_code(e,a+LITERALS$1+1,t);o=extra_lbits[a];if(o!==0){i-=base_length[a];send_bits(e,i,o)}n--;a=d_code(n);send_code(e,a,r);o=extra_dbits[a];if(o!==0){n-=base_dist[a];send_bits(e,n,o)}}}while(s<e.sym_next)}send_code(e,END_BLOCK,t)};const build_tree=(e,t)=>{const r=t.dyn_tree;const n=t.stat_desc.static_tree;const i=t.stat_desc.has_stree;const s=t.stat_desc.elems;let a,o;let f=-1;let c;e.heap_len=0;e.heap_max=HEAP_SIZE$1;for(a=0;a<s;a++){if(r[a*2]!==0){e.heap[++e.heap_len]=f=a;e.depth[a]=0}else{r[a*2+1]=0}}while(e.heap_len<2){c=e.heap[++e.heap_len]=f<2?++f:0;r[c*2]=1;e.depth[c]=0;e.opt_len--;if(i){e.static_len-=n[c*2+1]}}t.max_code=f;for(a=e.heap_len>>1;a>=1;a--){pqdownheap(e,r,a)}c=s;do{a=e.heap[1];e.heap[1]=e.heap[e.heap_len--];pqdownheap(e,r,1);o=e.heap[1];e.heap[--e.heap_max]=a;e.heap[--e.heap_max]=o;r[c*2]=r[a*2]+r[o*2];e.depth[c]=(e.depth[a]>=e.depth[o]?e.depth[a]:e.depth[o])+1;r[a*2+1]=r[o*2+1]=c;e.heap[1]=c++;pqdownheap(e,r,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1];gen_bitlen(e,t);gen_codes(r,f,e.bl_count)};const scan_tree=(e,t,r)=>{let n;let i=-1;let s;let a=t[0*2+1];let o=0;let f=7;let c=4;if(a===0){f=138;c=3}t[(r+1)*2+1]=65535;for(n=0;n<=r;n++){s=a;a=t[(n+1)*2+1];if(++o<f&&s===a){continue}else if(o<c){e.bl_tree[s*2]+=o}else if(s!==0){if(s!==i){e.bl_tree[s*2]++}e.bl_tree[REP_3_6*2]++}else if(o<=10){e.bl_tree[REPZ_3_10*2]++}else{e.bl_tree[REPZ_11_138*2]++}o=0;i=s;if(a===0){f=138;c=3}else if(s===a){f=6;c=3}else{f=7;c=4}}};const send_tree=(e,t,r)=>{let n;let i=-1;let s;let a=t[0*2+1];let o=0;let f=7;let c=4;if(a===0){f=138;c=3}for(n=0;n<=r;n++){s=a;a=t[(n+1)*2+1];if(++o<f&&s===a){continue}else if(o<c){do{send_code(e,s,e.bl_tree)}while(--o!==0)}else if(s!==0){if(s!==i){send_code(e,s,e.bl_tree);o--}send_code(e,REP_3_6,e.bl_tree);send_bits(e,o-3,2)}else if(o<=10){send_code(e,REPZ_3_10,e.bl_tree);send_bits(e,o-3,3)}else{send_code(e,REPZ_11_138,e.bl_tree);send_bits(e,o-11,7)}o=0;i=s;if(a===0){f=138;c=3}else if(s===a){f=6;c=3}else{f=7;c=4}}};const build_bl_tree=e=>{let t;scan_tree(e,e.dyn_ltree,e.l_desc.max_code);scan_tree(e,e.dyn_dtree,e.d_desc.max_code);build_tree(e,e.bl_desc);for(t=BL_CODES$1-1;t>=3;t--){if(e.bl_tree[bl_order[t]*2+1]!==0){break}}e.opt_len+=3*(t+1)+5+5+4;return t};const send_all_trees=(e,t,r,n)=>{let i;send_bits(e,t-257,5);send_bits(e,r-1,5);send_bits(e,n-4,4);for(i=0;i<n;i++){send_bits(e,e.bl_tree[bl_order[i]*2+1],3)}send_tree(e,e.dyn_ltree,t-1);send_tree(e,e.dyn_dtree,r-1)};const detect_data_type=e=>{let t=4093624447;let r;for(r=0;r<=31;r++,t>>>=1){if(t&1&&e.dyn_ltree[r*2]!==0){return Z_BINARY}}if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0){return Z_TEXT}for(r=32;r<LITERALS$1;r++){if(e.dyn_ltree[r*2]!==0){return Z_TEXT}}return Z_BINARY};let static_init_done=false;const _tr_init$1=e=>{if(!static_init_done){tr_static_init();static_init_done=true}e.l_desc=new TreeDesc(e.dyn_ltree,static_l_desc);e.d_desc=new TreeDesc(e.dyn_dtree,static_d_desc);e.bl_desc=new TreeDesc(e.bl_tree,static_bl_desc);e.bi_buf=0;e.bi_valid=0;init_block(e)};const _tr_stored_block$1=(e,t,r,n)=>{send_bits(e,(STORED_BLOCK<<1)+(n?1:0),3);bi_windup(e);put_short(e,r);put_short(e,~r);if(r){e.pending_buf.set(e.window.subarray(t,t+r),e.pending)}e.pending+=r};const _tr_align$1=e=>{send_bits(e,STATIC_TREES<<1,3);send_code(e,END_BLOCK,static_ltree);bi_flush(e)};const _tr_flush_block$1=(e,t,r,n)=>{let i,s;let a=0;if(e.level>0){if(e.strm.data_type===Z_UNKNOWN$1){e.strm.data_type=detect_data_type(e)}build_tree(e,e.l_desc);build_tree(e,e.d_desc);a=build_bl_tree(e);i=e.opt_len+3+7>>>3;s=e.static_len+3+7>>>3;if(s<=i){i=s}}else{i=s=r+5}if(r+4<=i&&t!==-1){_tr_stored_block$1(e,t,r,n)}else if(e.strategy===Z_FIXED$1||s===i){send_bits(e,(STATIC_TREES<<1)+(n?1:0),3);compress_block(e,static_ltree,static_dtree)}else{send_bits(e,(DYN_TREES<<1)+(n?1:0),3);send_all_trees(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1);compress_block(e,e.dyn_ltree,e.dyn_dtree)}init_block(e);if(n){bi_windup(e)}};const _tr_tally$1=(e,t,r)=>{e.pending_buf[e.sym_buf+e.sym_next++]=t;e.pending_buf[e.sym_buf+e.sym_next++]=t>>8;e.pending_buf[e.sym_buf+e.sym_next++]=r;if(t===0){e.dyn_ltree[r*2]++}else{e.matches++;t--;e.dyn_ltree[(_length_code[r]+LITERALS$1+1)*2]++;e.dyn_dtree[d_code(t)*2]++}return e.sym_next===e.sym_end};var _tr_init_1=_tr_init$1;var _tr_stored_block_1=_tr_stored_block$1;var _tr_flush_block_1=_tr_flush_block$1;var _tr_tally_1=_tr_tally$1;var _tr_align_1=_tr_align$1;var trees={_tr_init:_tr_init_1,_tr_stored_block:_tr_stored_block_1,_tr_flush_block:_tr_flush_block_1,_tr_tally:_tr_tally_1,_tr_align:_tr_align_1};const adler32=(e,t,r,n)=>{let i=e&65535|0,s=e>>>16&65535|0,a=0;while(r!==0){a=r>2e3?2e3:r;r-=a;do{i=i+t[n++]|0;s=s+i|0}while(--a);i%=65521;s%=65521}return i|s<<16|0};var adler32_1=adler32;const makeTable=()=>{let e,t=[];for(var r=0;r<256;r++){e=r;for(var n=0;n<8;n++){e=e&1?3988292384^e>>>1:e>>>1}t[r]=e}return t};const crcTable=new Uint32Array(makeTable());const crc32=(e,t,r,n)=>{const i=crcTable;const s=n+r;e^=-1;for(let r=n;r<s;r++){e=e>>>8^i[(e^t[r])&255]}return e^-1};var crc32_1=crc32;var messages={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};var constants$2={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init,_tr_stored_block,_tr_flush_block,_tr_tally,_tr_align}=trees;const{Z_NO_FLUSH:Z_NO_FLUSH$2,Z_PARTIAL_FLUSH,Z_FULL_FLUSH:Z_FULL_FLUSH$1,Z_FINISH:Z_FINISH$3,Z_BLOCK:Z_BLOCK$1,Z_OK:Z_OK$3,Z_STREAM_END:Z_STREAM_END$3,Z_STREAM_ERROR:Z_STREAM_ERROR$2,Z_DATA_ERROR:Z_DATA_ERROR$2,Z_BUF_ERROR:Z_BUF_ERROR$1,Z_DEFAULT_COMPRESSION:Z_DEFAULT_COMPRESSION$1,Z_FILTERED,Z_HUFFMAN_ONLY,Z_RLE,Z_FIXED,Z_DEFAULT_STRATEGY:Z_DEFAULT_STRATEGY$1,Z_UNKNOWN,Z_DEFLATED:Z_DEFLATED$2}=constants$2;const MAX_MEM_LEVEL=9;const MAX_WBITS$1=15;const DEF_MEM_LEVEL=8;const LENGTH_CODES=29;const LITERALS=256;const L_CODES=LITERALS+1+LENGTH_CODES;const D_CODES=30;const BL_CODES=19;const HEAP_SIZE=2*L_CODES+1;const MAX_BITS=15;const MIN_MATCH=3;const MAX_MATCH=258;const MIN_LOOKAHEAD=MAX_MATCH+MIN_MATCH+1;const PRESET_DICT=32;const INIT_STATE=42;const GZIP_STATE=57;const EXTRA_STATE=69;const NAME_STATE=73;const COMMENT_STATE=91;const HCRC_STATE=103;const BUSY_STATE=113;const FINISH_STATE=666;const BS_NEED_MORE=1;const BS_BLOCK_DONE=2;const BS_FINISH_STARTED=3;const BS_FINISH_DONE=4;const OS_CODE=3;const err=(e,t)=>{e.msg=messages[t];return t};const rank=e=>e*2-(e>4?9:0);const zero=e=>{let t=e.length;while(--t>=0){e[t]=0}};const slide_hash=e=>{let t,r;let n;let i=e.w_size;t=e.hash_size;n=t;do{r=e.head[--n];e.head[n]=r>=i?r-i:0}while(--t);t=i;n=t;do{r=e.prev[--n];e.prev[n]=r>=i?r-i:0}while(--t)};let HASH_ZLIB=(e,t,r)=>(t<<e.hash_shift^r)&e.hash_mask;let HASH=HASH_ZLIB;const flush_pending=e=>{const t=e.state;let r=t.pending;if(r>e.avail_out){r=e.avail_out}if(r===0){return}e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+r),e.next_out);e.next_out+=r;t.pending_out+=r;e.total_out+=r;e.avail_out-=r;t.pending-=r;if(t.pending===0){t.pending_out=0}};const flush_block_only=(e,t)=>{_tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t);e.block_start=e.strstart;flush_pending(e.strm)};const put_byte=(e,t)=>{e.pending_buf[e.pending++]=t};const putShortMSB=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255;e.pending_buf[e.pending++]=t&255};const read_buf=(e,t,r,n)=>{let i=e.avail_in;if(i>n){i=n}if(i===0){return 0}e.avail_in-=i;t.set(e.input.subarray(e.next_in,e.next_in+i),r);if(e.state.wrap===1){e.adler=adler32_1(e.adler,t,i,r)}else if(e.state.wrap===2){e.adler=crc32_1(e.adler,t,i,r)}e.next_in+=i;e.total_in+=i;return i};const longest_match=(e,t)=>{let r=e.max_chain_length;let n=e.strstart;let i;let s;let a=e.prev_length;let o=e.nice_match;const f=e.strstart>e.w_size-MIN_LOOKAHEAD?e.strstart-(e.w_size-MIN_LOOKAHEAD):0;const c=e.window;const u=e.w_mask;const l=e.prev;const h=e.strstart+MAX_MATCH;let d=c[n+a-1];let p=c[n+a];if(e.prev_length>=e.good_match){r>>=2}if(o>e.lookahead){o=e.lookahead}do{i=t;if(c[i+a]!==p||c[i+a-1]!==d||c[i]!==c[n]||c[++i]!==c[n+1]){continue}n+=2;i++;do{}while(c[++n]===c[++i]&&c[++n]===c[++i]&&c[++n]===c[++i]&&c[++n]===c[++i]&&c[++n]===c[++i]&&c[++n]===c[++i]&&c[++n]===c[++i]&&c[++n]===c[++i]&&n<h);s=MAX_MATCH-(h-n);n=h-MAX_MATCH;if(s>a){e.match_start=t;a=s;if(s>=o){break}d=c[n+a-1];p=c[n+a]}}while((t=l[t&u])>f&&--r!==0);if(a<=e.lookahead){return a}return e.lookahead};const fill_window=e=>{const t=e.w_size;let r,n,i;do{n=e.window_size-e.lookahead-e.strstart;if(e.strstart>=t+(t-MIN_LOOKAHEAD)){e.window.set(e.window.subarray(t,t+t-n),0);e.match_start-=t;e.strstart-=t;e.block_start-=t;if(e.insert>e.strstart){e.insert=e.strstart}slide_hash(e);n+=t}if(e.strm.avail_in===0){break}r=read_buf(e.strm,e.window,e.strstart+e.lookahead,n);e.lookahead+=r;if(e.lookahead+e.insert>=MIN_MATCH){i=e.strstart-e.insert;e.ins_h=e.window[i];e.ins_h=HASH(e,e.ins_h,e.window[i+1]);while(e.insert){e.ins_h=HASH(e,e.ins_h,e.window[i+MIN_MATCH-1]);e.prev[i&e.w_mask]=e.head[e.ins_h];e.head[e.ins_h]=i;i++;e.insert--;if(e.lookahead+e.insert<MIN_MATCH){break}}}}while(e.lookahead<MIN_LOOKAHEAD&&e.strm.avail_in!==0)};const deflate_stored=(e,t)=>{let r=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5;let n,i,s,a=0;let o=e.strm.avail_in;do{n=65535;s=e.bi_valid+42>>3;if(e.strm.avail_out<s){break}s=e.strm.avail_out-s;i=e.strstart-e.block_start;if(n>i+e.strm.avail_in){n=i+e.strm.avail_in}if(n>s){n=s}if(n<r&&(n===0&&t!==Z_FINISH$3||t===Z_NO_FLUSH$2||n!==i+e.strm.avail_in)){break}a=t===Z_FINISH$3&&n===i+e.strm.avail_in?1:0;_tr_stored_block(e,0,0,a);e.pending_buf[e.pending-4]=n;e.pending_buf[e.pending-3]=n>>8;e.pending_buf[e.pending-2]=~n;e.pending_buf[e.pending-1]=~n>>8;flush_pending(e.strm);if(i){if(i>n){i=n}e.strm.output.set(e.window.subarray(e.block_start,e.block_start+i),e.strm.next_out);e.strm.next_out+=i;e.strm.avail_out-=i;e.strm.total_out+=i;e.block_start+=i;n-=i}if(n){read_buf(e.strm,e.strm.output,e.strm.next_out,n);e.strm.next_out+=n;e.strm.avail_out-=n;e.strm.total_out+=n}}while(a===0);o-=e.strm.avail_in;if(o){if(o>=e.w_size){e.matches=2;e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0);e.strstart=e.w_size;e.insert=e.strstart}else{if(e.window_size-e.strstart<=o){e.strstart-=e.w_size;e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0);if(e.matches<2){e.matches++}if(e.insert>e.strstart){e.insert=e.strstart}}e.window.set(e.strm.input.subarray(e.strm.next_in-o,e.strm.next_in),e.strstart);e.strstart+=o;e.insert+=o>e.w_size-e.insert?e.w_size-e.insert:o}e.block_start=e.strstart}if(e.high_water<e.strstart){e.high_water=e.strstart}if(a){return BS_FINISH_DONE}if(t!==Z_NO_FLUSH$2&&t!==Z_FINISH$3&&e.strm.avail_in===0&&e.strstart===e.block_start){return BS_BLOCK_DONE}s=e.window_size-e.strstart;if(e.strm.avail_in>s&&e.block_start>=e.w_size){e.block_start-=e.w_size;e.strstart-=e.w_size;e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0);if(e.matches<2){e.matches++}s+=e.w_size;if(e.insert>e.strstart){e.insert=e.strstart}}if(s>e.strm.avail_in){s=e.strm.avail_in}if(s){read_buf(e.strm,e.window,e.strstart,s);e.strstart+=s;e.insert+=s>e.w_size-e.insert?e.w_size-e.insert:s}if(e.high_water<e.strstart){e.high_water=e.strstart}s=e.bi_valid+42>>3;s=e.pending_buf_size-s>65535?65535:e.pending_buf_size-s;r=s>e.w_size?e.w_size:s;i=e.strstart-e.block_start;if(i>=r||(i||t===Z_FINISH$3)&&t!==Z_NO_FLUSH$2&&e.strm.avail_in===0&&i<=s){n=i>s?s:i;a=t===Z_FINISH$3&&e.strm.avail_in===0&&n===i?1:0;_tr_stored_block(e,e.block_start,n,a);e.block_start+=n;flush_pending(e.strm)}return a?BS_FINISH_STARTED:BS_NEED_MORE};const deflate_fast=(e,t)=>{let r;let n;for(;;){if(e.lookahead<MIN_LOOKAHEAD){fill_window(e);if(e.lookahead<MIN_LOOKAHEAD&&t===Z_NO_FLUSH$2){return BS_NEED_MORE}if(e.lookahead===0){break}}r=0;if(e.lookahead>=MIN_MATCH){e.ins_h=HASH(e,e.ins_h,e.window[e.strstart+MIN_MATCH-1]);r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h];e.head[e.ins_h]=e.strstart}if(r!==0&&e.strstart-r<=e.w_size-MIN_LOOKAHEAD){e.match_length=longest_match(e,r)}if(e.match_length>=MIN_MATCH){n=_tr_tally(e,e.strstart-e.match_start,e.match_length-MIN_MATCH);e.lookahead-=e.match_length;if(e.match_length<=e.max_lazy_match&&e.lookahead>=MIN_MATCH){e.match_length--;do{e.strstart++;e.ins_h=HASH(e,e.ins_h,e.window[e.strstart+MIN_MATCH-1]);r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h];e.head[e.ins_h]=e.strstart}while(--e.match_length!==0);e.strstart++}else{e.strstart+=e.match_length;e.match_length=0;e.ins_h=e.window[e.strstart];e.ins_h=HASH(e,e.ins_h,e.window[e.strstart+1])}}else{n=_tr_tally(e,0,e.window[e.strstart]);e.lookahead--;e.strstart++}if(n){flush_block_only(e,false);if(e.strm.avail_out===0){return BS_NEED_MORE}}}e.insert=e.strstart<MIN_MATCH-1?e.strstart:MIN_MATCH-1;if(t===Z_FINISH$3){flush_block_only(e,true);if(e.strm.avail_out===0){return BS_FINISH_STARTED}return BS_FINISH_DONE}if(e.sym_next){flush_block_only(e,false);if(e.strm.avail_out===0){return BS_NEED_MORE}}return BS_BLOCK_DONE};const deflate_slow=(e,t)=>{let r;let n;let i;for(;;){if(e.lookahead<MIN_LOOKAHEAD){fill_window(e);if(e.lookahead<MIN_LOOKAHEAD&&t===Z_NO_FLUSH$2){return BS_NEED_MORE}if(e.lookahead===0){break}}r=0;if(e.lookahead>=MIN_MATCH){e.ins_h=HASH(e,e.ins_h,e.window[e.strstart+MIN_MATCH-1]);r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h];e.head[e.ins_h]=e.strstart}e.prev_length=e.match_length;e.prev_match=e.match_start;e.match_length=MIN_MATCH-1;if(r!==0&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-MIN_LOOKAHEAD){e.match_length=longest_match(e,r);if(e.match_length<=5&&(e.strategy===Z_FILTERED||e.match_length===MIN_MATCH&&e.strstart-e.match_start>4096)){e.match_length=MIN_MATCH-1}}if(e.prev_length>=MIN_MATCH&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-MIN_MATCH;n=_tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-MIN_MATCH);e.lookahead-=e.prev_length-1;e.prev_length-=2;do{if(++e.strstart<=i){e.ins_h=HASH(e,e.ins_h,e.window[e.strstart+MIN_MATCH-1]);r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h];e.head[e.ins_h]=e.strstart}}while(--e.prev_length!==0);e.match_available=0;e.match_length=MIN_MATCH-1;e.strstart++;if(n){flush_block_only(e,false);if(e.strm.avail_out===0){return BS_NEED_MORE}}}else if(e.match_available){n=_tr_tally(e,0,e.window[e.strstart-1]);if(n){flush_block_only(e,false)}e.strstart++;e.lookahead--;if(e.strm.avail_out===0){return BS_NEED_MORE}}else{e.match_available=1;e.strstart++;e.lookahead--}}if(e.match_available){n=_tr_tally(e,0,e.window[e.strstart-1]);e.match_available=0}e.insert=e.strstart<MIN_MATCH-1?e.strstart:MIN_MATCH-1;if(t===Z_FINISH$3){flush_block_only(e,true);if(e.strm.avail_out===0){return BS_FINISH_STARTED}return BS_FINISH_DONE}if(e.sym_next){flush_block_only(e,false);if(e.strm.avail_out===0){return BS_NEED_MORE}}return BS_BLOCK_DONE};const deflate_rle=(e,t)=>{let r;let n;let i,s;const a=e.window;for(;;){if(e.lookahead<=MAX_MATCH){fill_window(e);if(e.lookahead<=MAX_MATCH&&t===Z_NO_FLUSH$2){return BS_NEED_MORE}if(e.lookahead===0){break}}e.match_length=0;if(e.lookahead>=MIN_MATCH&&e.strstart>0){i=e.strstart-1;n=a[i];if(n===a[++i]&&n===a[++i]&&n===a[++i]){s=e.strstart+MAX_MATCH;do{}while(n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&i<s);e.match_length=MAX_MATCH-(s-i);if(e.match_length>e.lookahead){e.match_length=e.lookahead}}}if(e.match_length>=MIN_MATCH){r=_tr_tally(e,1,e.match_length-MIN_MATCH);e.lookahead-=e.match_length;e.strstart+=e.match_length;e.match_length=0}else{r=_tr_tally(e,0,e.window[e.strstart]);e.lookahead--;e.strstart++}if(r){flush_block_only(e,false);if(e.strm.avail_out===0){return BS_NEED_MORE}}}e.insert=0;if(t===Z_FINISH$3){flush_block_only(e,true);if(e.strm.avail_out===0){return BS_FINISH_STARTED}return BS_FINISH_DONE}if(e.sym_next){flush_block_only(e,false);if(e.strm.avail_out===0){return BS_NEED_MORE}}return BS_BLOCK_DONE};const deflate_huff=(e,t)=>{let r;for(;;){if(e.lookahead===0){fill_window(e);if(e.lookahead===0){if(t===Z_NO_FLUSH$2){return BS_NEED_MORE}break}}e.match_length=0;r=_tr_tally(e,0,e.window[e.strstart]);e.lookahead--;e.strstart++;if(r){flush_block_only(e,false);if(e.strm.avail_out===0){return BS_NEED_MORE}}}e.insert=0;if(t===Z_FINISH$3){flush_block_only(e,true);if(e.strm.avail_out===0){return BS_FINISH_STARTED}return BS_FINISH_DONE}if(e.sym_next){flush_block_only(e,false);if(e.strm.avail_out===0){return BS_NEED_MORE}}return BS_BLOCK_DONE};function Config(e,t,r,n,i){this.good_length=e;this.max_lazy=t;this.nice_length=r;this.max_chain=n;this.func=i}const configuration_table=[new Config(0,0,0,0,deflate_stored),new Config(4,4,8,4,deflate_fast),new Config(4,5,16,8,deflate_fast),new Config(4,6,32,32,deflate_fast),new Config(4,4,16,16,deflate_slow),new Config(8,16,32,32,deflate_slow),new Config(8,16,128,128,deflate_slow),new Config(8,32,128,256,deflate_slow),new Config(32,128,258,1024,deflate_slow),new Config(32,258,258,4096,deflate_slow)];const lm_init=e=>{e.window_size=2*e.w_size;zero(e.head);e.max_lazy_match=configuration_table[e.level].max_lazy;e.good_match=configuration_table[e.level].good_length;e.nice_match=configuration_table[e.level].nice_length;e.max_chain_length=configuration_table[e.level].max_chain;e.strstart=0;e.block_start=0;e.lookahead=0;e.insert=0;e.match_length=e.prev_length=MIN_MATCH-1;e.match_available=0;e.ins_h=0};function DeflateState(){this.strm=null;this.status=0;this.pending_buf=null;this.pending_buf_size=0;this.pending_out=0;this.pending=0;this.wrap=0;this.gzhead=null;this.gzindex=0;this.method=Z_DEFLATED$2;this.last_flush=-1;this.w_size=0;this.w_bits=0;this.w_mask=0;this.window=null;this.window_size=0;this.prev=null;this.head=null;this.ins_h=0;this.hash_size=0;this.hash_bits=0;this.hash_mask=0;this.hash_shift=0;this.block_start=0;this.match_length=0;this.prev_match=0;this.match_available=0;this.strstart=0;this.match_start=0;this.lookahead=0;this.prev_length=0;this.max_chain_length=0;this.max_lazy_match=0;this.level=0;this.strategy=0;this.good_match=0;this.nice_match=0;this.dyn_ltree=new Uint16Array(HEAP_SIZE*2);this.dyn_dtree=new Uint16Array((2*D_CODES+1)*2);this.bl_tree=new Uint16Array((2*BL_CODES+1)*2);zero(this.dyn_ltree);zero(this.dyn_dtree);zero(this.bl_tree);this.l_desc=null;this.d_desc=null;this.bl_desc=null;this.bl_count=new Uint16Array(MAX_BITS+1);this.heap=new Uint16Array(2*L_CODES+1);zero(this.heap);this.heap_len=0;this.heap_max=0;this.depth=new Uint16Array(2*L_CODES+1);zero(this.depth);this.sym_buf=0;this.lit_bufsize=0;this.sym_next=0;this.sym_end=0;this.opt_len=0;this.static_len=0;this.matches=0;this.insert=0;this.bi_buf=0;this.bi_valid=0}const deflateStateCheck=e=>{if(!e){return 1}const t=e.state;if(!t||t.strm!==e||t.status!==INIT_STATE&&t.status!==GZIP_STATE&&t.status!==EXTRA_STATE&&t.status!==NAME_STATE&&t.status!==COMMENT_STATE&&t.status!==HCRC_STATE&&t.status!==BUSY_STATE&&t.status!==FINISH_STATE){return 1}return 0};const deflateResetKeep=e=>{if(deflateStateCheck(e)){return err(e,Z_STREAM_ERROR$2)}e.total_in=e.total_out=0;e.data_type=Z_UNKNOWN;const t=e.state;t.pending=0;t.pending_out=0;if(t.wrap<0){t.wrap=-t.wrap}t.status=t.wrap===2?GZIP_STATE:t.wrap?INIT_STATE:BUSY_STATE;e.adler=t.wrap===2?0:1;t.last_flush=-2;_tr_init(t);return Z_OK$3};const deflateReset=e=>{const t=deflateResetKeep(e);if(t===Z_OK$3){lm_init(e.state)}return t};const deflateSetHeader=(e,t)=>{if(deflateStateCheck(e)||e.state.wrap!==2){return Z_STREAM_ERROR$2}e.state.gzhead=t;return Z_OK$3};const deflateInit2=(e,t,r,n,i,s)=>{if(!e){return Z_STREAM_ERROR$2}let a=1;if(t===Z_DEFAULT_COMPRESSION$1){t=6}if(n<0){a=0;n=-n}else if(n>15){a=2;n-=16}if(i<1||i>MAX_MEM_LEVEL||r!==Z_DEFLATED$2||n<8||n>15||t<0||t>9||s<0||s>Z_FIXED||n===8&&a!==1){return err(e,Z_STREAM_ERROR$2)}if(n===8){n=9}const o=new DeflateState;e.state=o;o.strm=e;o.status=INIT_STATE;o.wrap=a;o.gzhead=null;o.w_bits=n;o.w_size=1<<o.w_bits;o.w_mask=o.w_size-1;o.hash_bits=i+7;o.hash_size=1<<o.hash_bits;o.hash_mask=o.hash_size-1;o.hash_shift=~~((o.hash_bits+MIN_MATCH-1)/MIN_MATCH);o.window=new Uint8Array(o.w_size*2);o.head=new Uint16Array(o.hash_size);o.prev=new Uint16Array(o.w_size);o.lit_bufsize=1<<i+6;o.pending_buf_size=o.lit_bufsize*4;o.pending_buf=new Uint8Array(o.pending_buf_size);o.sym_buf=o.lit_bufsize;o.sym_end=(o.lit_bufsize-1)*3;o.level=t;o.strategy=s;o.method=r;return deflateReset(e)};const deflateInit=(e,t)=>deflateInit2(e,t,Z_DEFLATED$2,MAX_WBITS$1,DEF_MEM_LEVEL,Z_DEFAULT_STRATEGY$1);const deflate$2=(e,t)=>{if(deflateStateCheck(e)||t>Z_BLOCK$1||t<0){return e?err(e,Z_STREAM_ERROR$2):Z_STREAM_ERROR$2}const r=e.state;if(!e.output||e.avail_in!==0&&!e.input||r.status===FINISH_STATE&&t!==Z_FINISH$3){return err(e,e.avail_out===0?Z_BUF_ERROR$1:Z_STREAM_ERROR$2)}const n=r.last_flush;r.last_flush=t;if(r.pending!==0){flush_pending(e);if(e.avail_out===0){r.last_flush=-1;return Z_OK$3}}else if(e.avail_in===0&&rank(t)<=rank(n)&&t!==Z_FINISH$3){return err(e,Z_BUF_ERROR$1)}if(r.status===FINISH_STATE&&e.avail_in!==0){return err(e,Z_BUF_ERROR$1)}if(r.status===INIT_STATE&&r.wrap===0){r.status=BUSY_STATE}if(r.status===INIT_STATE){let t=Z_DEFLATED$2+(r.w_bits-8<<4)<<8;let n=-1;if(r.strategy>=Z_HUFFMAN_ONLY||r.level<2){n=0}else if(r.level<6){n=1}else if(r.level===6){n=2}else{n=3}t|=n<<6;if(r.strstart!==0){t|=PRESET_DICT}t+=31-t%31;putShortMSB(r,t);if(r.strstart!==0){putShortMSB(r,e.adler>>>16);putShortMSB(r,e.adler&65535)}e.adler=1;r.status=BUSY_STATE;flush_pending(e);if(r.pending!==0){r.last_flush=-1;return Z_OK$3}}if(r.status===GZIP_STATE){e.adler=0;put_byte(r,31);put_byte(r,139);put_byte(r,8);if(!r.gzhead){put_byte(r,0);put_byte(r,0);put_byte(r,0);put_byte(r,0);put_byte(r,0);put_byte(r,r.level===9?2:r.strategy>=Z_HUFFMAN_ONLY||r.level<2?4:0);put_byte(r,OS_CODE);r.status=BUSY_STATE;flush_pending(e);if(r.pending!==0){r.last_flush=-1;return Z_OK$3}}else{put_byte(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(!r.gzhead.extra?0:4)+(!r.gzhead.name?0:8)+(!r.gzhead.comment?0:16));put_byte(r,r.gzhead.time&255);put_byte(r,r.gzhead.time>>8&255);put_byte(r,r.gzhead.time>>16&255);put_byte(r,r.gzhead.time>>24&255);put_byte(r,r.level===9?2:r.strategy>=Z_HUFFMAN_ONLY||r.level<2?4:0);put_byte(r,r.gzhead.os&255);if(r.gzhead.extra&&r.gzhead.extra.length){put_byte(r,r.gzhead.extra.length&255);put_byte(r,r.gzhead.extra.length>>8&255)}if(r.gzhead.hcrc){e.adler=crc32_1(e.adler,r.pending_buf,r.pending,0)}r.gzindex=0;r.status=EXTRA_STATE}}if(r.status===EXTRA_STATE){if(r.gzhead.extra){let t=r.pending;let n=(r.gzhead.extra.length&65535)-r.gzindex;while(r.pending+n>r.pending_buf_size){let i=r.pending_buf_size-r.pending;r.pending_buf.set(r.gzhead.extra.subarray(r.gzindex,r.gzindex+i),r.pending);r.pending=r.pending_buf_size;if(r.gzhead.hcrc&&r.pending>t){e.adler=crc32_1(e.adler,r.pending_buf,r.pending-t,t)}r.gzindex+=i;flush_pending(e);if(r.pending!==0){r.last_flush=-1;return Z_OK$3}t=0;n-=i}let i=new Uint8Array(r.gzhead.extra);r.pending_buf.set(i.subarray(r.gzindex,r.gzindex+n),r.pending);r.pending+=n;if(r.gzhead.hcrc&&r.pending>t){e.adler=crc32_1(e.adler,r.pending_buf,r.pending-t,t)}r.gzindex=0}r.status=NAME_STATE}if(r.status===NAME_STATE){if(r.gzhead.name){let t=r.pending;let n;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>t){e.adler=crc32_1(e.adler,r.pending_buf,r.pending-t,t)}flush_pending(e);if(r.pending!==0){r.last_flush=-1;return Z_OK$3}t=0}if(r.gzindex<r.gzhead.name.length){n=r.gzhead.name.charCodeAt(r.gzindex++)&255}else{n=0}put_byte(r,n)}while(n!==0);if(r.gzhead.hcrc&&r.pending>t){e.adler=crc32_1(e.adler,r.pending_buf,r.pending-t,t)}r.gzindex=0}r.status=COMMENT_STATE}if(r.status===COMMENT_STATE){if(r.gzhead.comment){let t=r.pending;let n;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>t){e.adler=crc32_1(e.adler,r.pending_buf,r.pending-t,t)}flush_pending(e);if(r.pending!==0){r.last_flush=-1;return Z_OK$3}t=0}if(r.gzindex<r.gzhead.comment.length){n=r.gzhead.comment.charCodeAt(r.gzindex++)&255}else{n=0}put_byte(r,n)}while(n!==0);if(r.gzhead.hcrc&&r.pending>t){e.adler=crc32_1(e.adler,r.pending_buf,r.pending-t,t)}}r.status=HCRC_STATE}if(r.status===HCRC_STATE){if(r.gzhead.hcrc){if(r.pending+2>r.pending_buf_size){flush_pending(e);if(r.pending!==0){r.last_flush=-1;return Z_OK$3}}put_byte(r,e.adler&255);put_byte(r,e.adler>>8&255);e.adler=0}r.status=BUSY_STATE;flush_pending(e);if(r.pending!==0){r.last_flush=-1;return Z_OK$3}}if(e.avail_in!==0||r.lookahead!==0||t!==Z_NO_FLUSH$2&&r.status!==FINISH_STATE){let n=r.level===0?deflate_stored(r,t):r.strategy===Z_HUFFMAN_ONLY?deflate_huff(r,t):r.strategy===Z_RLE?deflate_rle(r,t):configuration_table[r.level].func(r,t);if(n===BS_FINISH_STARTED||n===BS_FINISH_DONE){r.status=FINISH_STATE}if(n===BS_NEED_MORE||n===BS_FINISH_STARTED){if(e.avail_out===0){r.last_flush=-1}return Z_OK$3}if(n===BS_BLOCK_DONE){if(t===Z_PARTIAL_FLUSH){_tr_align(r)}else if(t!==Z_BLOCK$1){_tr_stored_block(r,0,0,false);if(t===Z_FULL_FLUSH$1){zero(r.head);if(r.lookahead===0){r.strstart=0;r.block_start=0;r.insert=0}}}flush_pending(e);if(e.avail_out===0){r.last_flush=-1;return Z_OK$3}}}if(t!==Z_FINISH$3){return Z_OK$3}if(r.wrap<=0){return Z_STREAM_END$3}if(r.wrap===2){put_byte(r,e.adler&255);put_byte(r,e.adler>>8&255);put_byte(r,e.adler>>16&255);put_byte(r,e.adler>>24&255);put_byte(r,e.total_in&255);put_byte(r,e.total_in>>8&255);put_byte(r,e.total_in>>16&255);put_byte(r,e.total_in>>24&255)}else{putShortMSB(r,e.adler>>>16);putShortMSB(r,e.adler&65535)}flush_pending(e);if(r.wrap>0){r.wrap=-r.wrap}return r.pending!==0?Z_OK$3:Z_STREAM_END$3};const deflateEnd=e=>{if(deflateStateCheck(e)){return Z_STREAM_ERROR$2}const t=e.state.status;e.state=null;return t===BUSY_STATE?err(e,Z_DATA_ERROR$2):Z_OK$3};const deflateSetDictionary=(e,t)=>{let r=t.length;if(deflateStateCheck(e)){return Z_STREAM_ERROR$2}const n=e.state;const i=n.wrap;if(i===2||i===1&&n.status!==INIT_STATE||n.lookahead){return Z_STREAM_ERROR$2}if(i===1){e.adler=adler32_1(e.adler,t,r,0)}n.wrap=0;if(r>=n.w_size){if(i===0){zero(n.head);n.strstart=0;n.block_start=0;n.insert=0}let e=new Uint8Array(n.w_size);e.set(t.subarray(r-n.w_size,r),0);t=e;r=n.w_size}const s=e.avail_in;const a=e.next_in;const o=e.input;e.avail_in=r;e.next_in=0;e.input=t;fill_window(n);while(n.lookahead>=MIN_MATCH){let e=n.strstart;let t=n.lookahead-(MIN_MATCH-1);do{n.ins_h=HASH(n,n.ins_h,n.window[e+MIN_MATCH-1]);n.prev[e&n.w_mask]=n.head[n.ins_h];n.head[n.ins_h]=e;e++}while(--t);n.strstart=e;n.lookahead=MIN_MATCH-1;fill_window(n)}n.strstart+=n.lookahead;n.block_start=n.strstart;n.insert=n.lookahead;n.lookahead=0;n.match_length=n.prev_length=MIN_MATCH-1;n.match_available=0;e.next_in=a;e.input=o;e.avail_in=s;n.wrap=i;return Z_OK$3};var deflateInit_1=deflateInit;var deflateInit2_1=deflateInit2;var deflateReset_1=deflateReset;var deflateResetKeep_1=deflateResetKeep;var deflateSetHeader_1=deflateSetHeader;var deflate_2$1=deflate$2;var deflateEnd_1=deflateEnd;var deflateSetDictionary_1=deflateSetDictionary;var deflateInfo="pako deflate (from Nodeca project)";var deflate_1$2={deflateInit:deflateInit_1,deflateInit2:deflateInit2_1,deflateReset:deflateReset_1,deflateResetKeep:deflateResetKeep_1,deflateSetHeader:deflateSetHeader_1,deflate:deflate_2$1,deflateEnd:deflateEnd_1,deflateSetDictionary:deflateSetDictionary_1,deflateInfo};const _has=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var assign=function(e){const t=Array.prototype.slice.call(arguments,1);while(t.length){const r=t.shift();if(!r){continue}if(typeof r!=="object"){throw new TypeError(r+"must be non-object")}for(const t in r){if(_has(r,t)){e[t]=r[t]}}}return e};var flattenChunks=e=>{let t=0;for(let r=0,n=e.length;r<n;r++){t+=e[r].length}const r=new Uint8Array(t);for(let t=0,n=0,i=e.length;t<i;t++){let i=e[t];r.set(i,n);n+=i.length}return r};var common={assign,flattenChunks};let STR_APPLY_UIA_OK=true;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){STR_APPLY_UIA_OK=false}const _utf8len=new Uint8Array(256);for(let e=0;e<256;e++){_utf8len[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1}_utf8len[254]=_utf8len[254]=1;var string2buf=e=>{if(typeof TextEncoder==="function"&&TextEncoder.prototype.encode){return(new TextEncoder).encode(e)}let t,r,n,i,s,a=e.length,o=0;for(i=0;i<a;i++){r=e.charCodeAt(i);if((r&64512)===55296&&i+1<a){n=e.charCodeAt(i+1);if((n&64512)===56320){r=65536+(r-55296<<10)+(n-56320);i++}}o+=r<128?1:r<2048?2:r<65536?3:4}t=new Uint8Array(o);for(s=0,i=0;s<o;i++){r=e.charCodeAt(i);if((r&64512)===55296&&i+1<a){n=e.charCodeAt(i+1);if((n&64512)===56320){r=65536+(r-55296<<10)+(n-56320);i++}}if(r<128){t[s++]=r}else if(r<2048){t[s++]=192|r>>>6;t[s++]=128|r&63}else if(r<65536){t[s++]=224|r>>>12;t[s++]=128|r>>>6&63;t[s++]=128|r&63}else{t[s++]=240|r>>>18;t[s++]=128|r>>>12&63;t[s++]=128|r>>>6&63;t[s++]=128|r&63}}return t};const buf2binstring=(e,t)=>{if(t<65534){if(e.subarray&&STR_APPLY_UIA_OK){return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t))}}let r="";for(let n=0;n<t;n++){r+=String.fromCharCode(e[n])}return r};var buf2string=(e,t)=>{const r=t||e.length;if(typeof TextDecoder==="function"&&TextDecoder.prototype.decode){return(new TextDecoder).decode(e.subarray(0,t))}let n,i;const s=new Array(r*2);for(i=0,n=0;n<r;){let t=e[n++];if(t<128){s[i++]=t;continue}let a=_utf8len[t];if(a>4){s[i++]=65533;n+=a-1;continue}t&=a===2?31:a===3?15:7;while(a>1&&n<r){t=t<<6|e[n++]&63;a--}if(a>1){s[i++]=65533;continue}if(t<65536){s[i++]=t}else{t-=65536;s[i++]=55296|t>>10&1023;s[i++]=56320|t&1023}}return buf2binstring(s,i)};var utf8border=(e,t)=>{t=t||e.length;if(t>e.length){t=e.length}let r=t-1;while(r>=0&&(e[r]&192)===128){r--}if(r<0){return t}if(r===0){return t}return r+_utf8len[e[r]]>t?r:t};var strings={string2buf,buf2string,utf8border};function ZStream(){this.input=null;this.next_in=0;this.avail_in=0;this.total_in=0;this.output=null;this.next_out=0;this.avail_out=0;this.total_out=0;this.msg="";this.state=null;this.data_type=2;this.adler=0}var zstream=ZStream;const toString$1=Object.prototype.toString;const{Z_NO_FLUSH:Z_NO_FLUSH$1,Z_SYNC_FLUSH,Z_FULL_FLUSH,Z_FINISH:Z_FINISH$2,Z_OK:Z_OK$2,Z_STREAM_END:Z_STREAM_END$2,Z_DEFAULT_COMPRESSION,Z_DEFAULT_STRATEGY,Z_DEFLATED:Z_DEFLATED$1}=constants$2;function Deflate$1(e){this.options=common.assign({level:Z_DEFAULT_COMPRESSION,method:Z_DEFLATED$1,chunkSize:16384,windowBits:15,memLevel:8,strategy:Z_DEFAULT_STRATEGY},e||{});let t=this.options;if(t.raw&&t.windowBits>0){t.windowBits=-t.windowBits}else if(t.gzip&&t.windowBits>0&&t.windowBits<16){t.windowBits+=16}this.err=0;this.msg="";this.ended=false;this.chunks=[];this.strm=new zstream;this.strm.avail_out=0;let r=deflate_1$2.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==Z_OK$2){throw new Error(messages[r])}if(t.header){deflate_1$2.deflateSetHeader(this.strm,t.header)}if(t.dictionary){let e;if(typeof t.dictionary==="string"){e=strings.string2buf(t.dictionary)}else if(toString$1.call(t.dictionary)==="[object ArrayBuffer]"){e=new Uint8Array(t.dictionary)}else{e=t.dictionary}r=deflate_1$2.deflateSetDictionary(this.strm,e);if(r!==Z_OK$2){throw new Error(messages[r])}this._dict_set=true}}Deflate$1.prototype.push=function(e,t){const r=this.strm;const n=this.options.chunkSize;let i,s;if(this.ended){return false}if(t===~~t)s=t;else s=t===true?Z_FINISH$2:Z_NO_FLUSH$1;if(typeof e==="string"){r.input=strings.string2buf(e)}else if(toString$1.call(e)==="[object ArrayBuffer]"){r.input=new Uint8Array(e)}else{r.input=e}r.next_in=0;r.avail_in=r.input.length;for(;;){if(r.avail_out===0){r.output=new Uint8Array(n);r.next_out=0;r.avail_out=n}if((s===Z_SYNC_FLUSH||s===Z_FULL_FLUSH)&&r.avail_out<=6){this.onData(r.output.subarray(0,r.next_out));r.avail_out=0;continue}i=deflate_1$2.deflate(r,s);if(i===Z_STREAM_END$2){if(r.next_out>0){this.onData(r.output.subarray(0,r.next_out))}i=deflate_1$2.deflateEnd(this.strm);this.onEnd(i);this.ended=true;return i===Z_OK$2}if(r.avail_out===0){this.onData(r.output);continue}if(s>0&&r.next_out>0){this.onData(r.output.subarray(0,r.next_out));r.avail_out=0;continue}if(r.avail_in===0)break}return true};Deflate$1.prototype.onData=function(e){this.chunks.push(e)};Deflate$1.prototype.onEnd=function(e){if(e===Z_OK$2){this.result=common.flattenChunks(this.chunks)}this.chunks=[];this.err=e;this.msg=this.strm.msg};function deflate$1(e,t){const r=new Deflate$1(t);r.push(e,true);if(r.err){throw r.msg||messages[r.err]}return r.result}function deflateRaw$1(e,t){t=t||{};t.raw=true;return deflate$1(e,t)}function gzip$1(e,t){t=t||{};t.gzip=true;return deflate$1(e,t)}var Deflate_1$1=Deflate$1;var deflate_2=deflate$1;var deflateRaw_1$1=deflateRaw$1;var gzip_1$1=gzip$1;var constants$1=constants$2;var deflate_1$1={Deflate:Deflate_1$1,deflate:deflate_2,deflateRaw:deflateRaw_1$1,gzip:gzip_1$1,constants:constants$1};const BAD$1=16209;const TYPE$1=16191;var inffast=function e(t,r){let n;let i;let s;let a;let o;let f;let c;let u;let l;let h;let d;let p;let y;let m;let g;let b;let A;let w;let E;let v;let _;let S;let $,T;const I=t.state;n=t.next_in;$=t.input;i=n+(t.avail_in-5);s=t.next_out;T=t.output;a=s-(r-t.avail_out);o=s+(t.avail_out-257);f=I.dmax;c=I.wsize;u=I.whave;l=I.wnext;h=I.window;d=I.hold;p=I.bits;y=I.lencode;m=I.distcode;g=(1<<I.lenbits)-1;b=(1<<I.distbits)-1;e:do{if(p<15){d+=$[n++]<<p;p+=8;d+=$[n++]<<p;p+=8}A=y[d&g];t:for(;;){w=A>>>24;d>>>=w;p-=w;w=A>>>16&255;if(w===0){T[s++]=A&65535}else if(w&16){E=A&65535;w&=15;if(w){if(p<w){d+=$[n++]<<p;p+=8}E+=d&(1<<w)-1;d>>>=w;p-=w}if(p<15){d+=$[n++]<<p;p+=8;d+=$[n++]<<p;p+=8}A=m[d&b];r:for(;;){w=A>>>24;d>>>=w;p-=w;w=A>>>16&255;if(w&16){v=A&65535;w&=15;if(p<w){d+=$[n++]<<p;p+=8;if(p<w){d+=$[n++]<<p;p+=8}}v+=d&(1<<w)-1;if(v>f){t.msg="invalid distance too far back";I.mode=BAD$1;break e}d>>>=w;p-=w;w=s-a;if(v>w){w=v-w;if(w>u){if(I.sane){t.msg="invalid distance too far back";I.mode=BAD$1;break e}}_=0;S=h;if(l===0){_+=c-w;if(w<E){E-=w;do{T[s++]=h[_++]}while(--w);_=s-v;S=T}}else if(l<w){_+=c+l-w;w-=l;if(w<E){E-=w;do{T[s++]=h[_++]}while(--w);_=0;if(l<E){w=l;E-=w;do{T[s++]=h[_++]}while(--w);_=s-v;S=T}}}else{_+=l-w;if(w<E){E-=w;do{T[s++]=h[_++]}while(--w);_=s-v;S=T}}while(E>2){T[s++]=S[_++];T[s++]=S[_++];T[s++]=S[_++];E-=3}if(E){T[s++]=S[_++];if(E>1){T[s++]=S[_++]}}}else{_=s-v;do{T[s++]=T[_++];T[s++]=T[_++];T[s++]=T[_++];E-=3}while(E>2);if(E){T[s++]=T[_++];if(E>1){T[s++]=T[_++]}}}}else if((w&64)===0){A=m[(A&65535)+(d&(1<<w)-1)];continue r}else{t.msg="invalid distance code";I.mode=BAD$1;break e}break}}else if((w&64)===0){A=y[(A&65535)+(d&(1<<w)-1)];continue t}else if(w&32){I.mode=TYPE$1;break e}else{t.msg="invalid literal/length code";I.mode=BAD$1;break e}break}}while(n<i&&s<o);E=p>>3;n-=E;p-=E<<3;d&=(1<<p)-1;t.next_in=n;t.next_out=s;t.avail_in=n<i?5+(i-n):5-(n-i);t.avail_out=s<o?257+(o-s):257-(s-o);I.hold=d;I.bits=p;return};const MAXBITS=15;const ENOUGH_LENS$1=852;const ENOUGH_DISTS$1=592;const CODES$1=0;const LENS$1=1;const DISTS$1=2;const lbase=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]);const lext=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]);const dbase=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]);const dext=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);const inflate_table=(e,t,r,n,i,s,a,o)=>{const f=o.bits;let c=0;let u=0;let l=0,h=0;let d=0;let p=0;let y=0;let m=0;let g=0;let b=0;let A;let w;let E;let v;let _;let S=null;let $;const T=new Uint16Array(MAXBITS+1);const I=new Uint16Array(MAXBITS+1);let C=null;let P,R,N;for(c=0;c<=MAXBITS;c++){T[c]=0}for(u=0;u<n;u++){T[t[r+u]]++}d=f;for(h=MAXBITS;h>=1;h--){if(T[h]!==0){break}}if(d>h){d=h}if(h===0){i[s++]=1<<24|64<<16|0;i[s++]=1<<24|64<<16|0;o.bits=1;return 0}for(l=1;l<h;l++){if(T[l]!==0){break}}if(d<l){d=l}m=1;for(c=1;c<=MAXBITS;c++){m<<=1;m-=T[c];if(m<0){return-1}}if(m>0&&(e===CODES$1||h!==1)){return-1}I[1]=0;for(c=1;c<MAXBITS;c++){I[c+1]=I[c]+T[c]}for(u=0;u<n;u++){if(t[r+u]!==0){a[I[t[r+u]]++]=u}}if(e===CODES$1){S=C=a;$=20}else if(e===LENS$1){S=lbase;C=lext;$=257}else{S=dbase;C=dext;$=0}b=0;u=0;c=l;_=s;p=d;y=0;E=-1;g=1<<d;v=g-1;if(e===LENS$1&&g>ENOUGH_LENS$1||e===DISTS$1&&g>ENOUGH_DISTS$1){return 1}for(;;){P=c-y;if(a[u]+1<$){R=0;N=a[u]}else if(a[u]>=$){R=C[a[u]-$];N=S[a[u]-$]}else{R=32+64;N=0}A=1<<c-y;w=1<<p;l=w;do{w-=A;i[_+(b>>y)+w]=P<<24|R<<16|N|0}while(w!==0);A=1<<c-1;while(b&A){A>>=1}if(A!==0){b&=A-1;b+=A}else{b=0}u++;if(--T[c]===0){if(c===h){break}c=t[r+a[u]]}if(c>d&&(b&v)!==E){if(y===0){y=d}_+=l;p=c-y;m=1<<p;while(p+y<h){m-=T[p+y];if(m<=0){break}p++;m<<=1}g+=1<<p;if(e===LENS$1&&g>ENOUGH_LENS$1||e===DISTS$1&&g>ENOUGH_DISTS$1){return 1}E=b&v;i[E]=d<<24|p<<16|_-s|0}}if(b!==0){i[_+b]=c-y<<24|64<<16|0}o.bits=d;return 0};var inftrees=inflate_table;const CODES=0;const LENS=1;const DISTS=2;const{Z_FINISH:Z_FINISH$1,Z_BLOCK,Z_TREES,Z_OK:Z_OK$1,Z_STREAM_END:Z_STREAM_END$1,Z_NEED_DICT:Z_NEED_DICT$1,Z_STREAM_ERROR:Z_STREAM_ERROR$1,Z_DATA_ERROR:Z_DATA_ERROR$1,Z_MEM_ERROR:Z_MEM_ERROR$1,Z_BUF_ERROR,Z_DEFLATED}=constants$2;const HEAD=16180;const FLAGS=16181;const TIME=16182;const OS=16183;const EXLEN=16184;const EXTRA=16185;const NAME=16186;const COMMENT=16187;const HCRC=16188;const DICTID=16189;const DICT=16190;const TYPE=16191;const TYPEDO=16192;const STORED=16193;const COPY_=16194;const COPY=16195;const TABLE=16196;const LENLENS=16197;const CODELENS=16198;const LEN_=16199;const LEN=16200;const LENEXT=16201;const DIST=16202;const DISTEXT=16203;const MATCH=16204;const LIT=16205;const CHECK=16206;const LENGTH=16207;const DONE=16208;const BAD=16209;const MEM=16210;const SYNC=16211;const ENOUGH_LENS=852;const ENOUGH_DISTS=592;const MAX_WBITS=15;const DEF_WBITS=MAX_WBITS;const zswap32=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function InflateState(){this.strm=null;this.mode=0;this.last=false;this.wrap=0;this.havedict=false;this.flags=0;this.dmax=0;this.check=0;this.total=0;this.head=null;this.wbits=0;this.wsize=0;this.whave=0;this.wnext=0;this.window=null;this.hold=0;this.bits=0;this.length=0;this.offset=0;this.extra=0;this.lencode=null;this.distcode=null;this.lenbits=0;this.distbits=0;this.ncode=0;this.nlen=0;this.ndist=0;this.have=0;this.next=null;this.lens=new Uint16Array(320);this.work=new Uint16Array(288);this.lendyn=null;this.distdyn=null;this.sane=0;this.back=0;this.was=0}const inflateStateCheck=e=>{if(!e){return 1}const t=e.state;if(!t||t.strm!==e||t.mode<HEAD||t.mode>SYNC){return 1}return 0};const inflateResetKeep=e=>{if(inflateStateCheck(e)){return Z_STREAM_ERROR$1}const t=e.state;e.total_in=e.total_out=t.total=0;e.msg="";if(t.wrap){e.adler=t.wrap&1}t.mode=HEAD;t.last=0;t.havedict=0;t.flags=-1;t.dmax=32768;t.head=null;t.hold=0;t.bits=0;t.lencode=t.lendyn=new Int32Array(ENOUGH_LENS);t.distcode=t.distdyn=new Int32Array(ENOUGH_DISTS);t.sane=1;t.back=-1;return Z_OK$1};const inflateReset=e=>{if(inflateStateCheck(e)){return Z_STREAM_ERROR$1}const t=e.state;t.wsize=0;t.whave=0;t.wnext=0;return inflateResetKeep(e)};const inflateReset2=(e,t)=>{let r;if(inflateStateCheck(e)){return Z_STREAM_ERROR$1}const n=e.state;if(t<0){r=0;t=-t}else{r=(t>>4)+5;if(t<48){t&=15}}if(t&&(t<8||t>15)){return Z_STREAM_ERROR$1}if(n.window!==null&&n.wbits!==t){n.window=null}n.wrap=r;n.wbits=t;return inflateReset(e)};const inflateInit2=(e,t)=>{if(!e){return Z_STREAM_ERROR$1}const r=new InflateState;e.state=r;r.strm=e;r.window=null;r.mode=HEAD;const n=inflateReset2(e,t);if(n!==Z_OK$1){e.state=null}return n};const inflateInit=e=>inflateInit2(e,DEF_WBITS);let virgin=true;let lenfix,distfix;const fixedtables=e=>{if(virgin){lenfix=new Int32Array(512);distfix=new Int32Array(32);let t=0;while(t<144){e.lens[t++]=8}while(t<256){e.lens[t++]=9}while(t<280){e.lens[t++]=7}while(t<288){e.lens[t++]=8}inftrees(LENS,e.lens,0,288,lenfix,0,e.work,{bits:9});t=0;while(t<32){e.lens[t++]=5}inftrees(DISTS,e.lens,0,32,distfix,0,e.work,{bits:5});virgin=false}e.lencode=lenfix;e.lenbits=9;e.distcode=distfix;e.distbits=5};const updatewindow=(e,t,r,n)=>{let i;const s=e.state;if(s.window===null){s.wsize=1<<s.wbits;s.wnext=0;s.whave=0;s.window=new Uint8Array(s.wsize)}if(n>=s.wsize){s.window.set(t.subarray(r-s.wsize,r),0);s.wnext=0;s.whave=s.wsize}else{i=s.wsize-s.wnext;if(i>n){i=n}s.window.set(t.subarray(r-n,r-n+i),s.wnext);n-=i;if(n){s.window.set(t.subarray(r-n,r),0);s.wnext=n;s.whave=s.wsize}else{s.wnext+=i;if(s.wnext===s.wsize){s.wnext=0}if(s.whave<s.wsize){s.whave+=i}}}return 0};const inflate$2=(e,t)=>{let r;let n,i;let s;let a;let o,f;let c;let u;let l,h;let d;let p;let y;let m=0;let g,b,A;let w,E,v;let _;let S;const $=new Uint8Array(4);let T;let I;const C=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(inflateStateCheck(e)||!e.output||!e.input&&e.avail_in!==0){return Z_STREAM_ERROR$1}r=e.state;if(r.mode===TYPE){r.mode=TYPEDO}a=e.next_out;i=e.output;f=e.avail_out;s=e.next_in;n=e.input;o=e.avail_in;c=r.hold;u=r.bits;l=o;h=f;S=Z_OK$1;e:for(;;){switch(r.mode){case HEAD:if(r.wrap===0){r.mode=TYPEDO;break}while(u<16){if(o===0){break e}o--;c+=n[s++]<<u;u+=8}if(r.wrap&2&&c===35615){if(r.wbits===0){r.wbits=15}r.check=0;$[0]=c&255;$[1]=c>>>8&255;r.check=crc32_1(r.check,$,2,0);c=0;u=0;r.mode=FLAGS;break}if(r.head){r.head.done=false}if(!(r.wrap&1)||(((c&255)<<8)+(c>>8))%31){e.msg="incorrect header check";r.mode=BAD;break}if((c&15)!==Z_DEFLATED){e.msg="unknown compression method";r.mode=BAD;break}c>>>=4;u-=4;_=(c&15)+8;if(r.wbits===0){r.wbits=_}if(_>15||_>r.wbits){e.msg="invalid window size";r.mode=BAD;break}r.dmax=1<<r.wbits;r.flags=0;e.adler=r.check=1;r.mode=c&512?DICTID:TYPE;c=0;u=0;break;case FLAGS:while(u<16){if(o===0){break e}o--;c+=n[s++]<<u;u+=8}r.flags=c;if((r.flags&255)!==Z_DEFLATED){e.msg="unknown compression method";r.mode=BAD;break}if(r.flags&57344){e.msg="unknown header flags set";r.mode=BAD;break}if(r.head){r.head.text=c>>8&1}if(r.flags&512&&r.wrap&4){$[0]=c&255;$[1]=c>>>8&255;r.check=crc32_1(r.check,$,2,0)}c=0;u=0;r.mode=TIME;case TIME:while(u<32){if(o===0){break e}o--;c+=n[s++]<<u;u+=8}if(r.head){r.head.time=c}if(r.flags&512&&r.wrap&4){$[0]=c&255;$[1]=c>>>8&255;$[2]=c>>>16&255;$[3]=c>>>24&255;r.check=crc32_1(r.check,$,4,0)}c=0;u=0;r.mode=OS;case OS:while(u<16){if(o===0){break e}o--;c+=n[s++]<<u;u+=8}if(r.head){r.head.xflags=c&255;r.head.os=c>>8}if(r.flags&512&&r.wrap&4){$[0]=c&255;$[1]=c>>>8&255;r.check=crc32_1(r.check,$,2,0)}c=0;u=0;r.mode=EXLEN;case EXLEN:if(r.flags&1024){while(u<16){if(o===0){break e}o--;c+=n[s++]<<u;u+=8}r.length=c;if(r.head){r.head.extra_len=c}if(r.flags&512&&r.wrap&4){$[0]=c&255;$[1]=c>>>8&255;r.check=crc32_1(r.check,$,2,0)}c=0;u=0}else if(r.head){r.head.extra=null}r.mode=EXTRA;case EXTRA:if(r.flags&1024){d=r.length;if(d>o){d=o}if(d){if(r.head){_=r.head.extra_len-r.length;if(!r.head.extra){r.head.extra=new Uint8Array(r.head.extra_len)}r.head.extra.set(n.subarray(s,s+d),_)}if(r.flags&512&&r.wrap&4){r.check=crc32_1(r.check,n,d,s)}o-=d;s+=d;r.length-=d}if(r.length){break e}}r.length=0;r.mode=NAME;case NAME:if(r.flags&2048){if(o===0){break e}d=0;do{_=n[s+d++];if(r.head&&_&&r.length<65536){r.head.name+=String.fromCharCode(_)}}while(_&&d<o);if(r.flags&512&&r.wrap&4){r.check=crc32_1(r.check,n,d,s)}o-=d;s+=d;if(_){break e}}else if(r.head){r.head.name=null}r.length=0;r.mode=COMMENT;case COMMENT:if(r.flags&4096){if(o===0){break e}d=0;do{_=n[s+d++];if(r.head&&_&&r.length<65536){r.head.comment+=String.fromCharCode(_)}}while(_&&d<o);if(r.flags&512&&r.wrap&4){r.check=crc32_1(r.check,n,d,s)}o-=d;s+=d;if(_){break e}}else if(r.head){r.head.comment=null}r.mode=HCRC;case HCRC:if(r.flags&512){while(u<16){if(o===0){break e}o--;c+=n[s++]<<u;u+=8}if(r.wrap&4&&c!==(r.check&65535)){e.msg="header crc mismatch";r.mode=BAD;break}c=0;u=0}if(r.head){r.head.hcrc=r.flags>>9&1;r.head.done=true}e.adler=r.check=0;r.mode=TYPE;break;case DICTID:while(u<32){if(o===0){break e}o--;c+=n[s++]<<u;u+=8}e.adler=r.check=zswap32(c);c=0;u=0;r.mode=DICT;case DICT:if(r.havedict===0){e.next_out=a;e.avail_out=f;e.next_in=s;e.avail_in=o;r.hold=c;r.bits=u;return Z_NEED_DICT$1}e.adler=r.check=1;r.mode=TYPE;case TYPE:if(t===Z_BLOCK||t===Z_TREES){break e}case TYPEDO:if(r.last){c>>>=u&7;u-=u&7;r.mode=CHECK;break}while(u<3){if(o===0){break e}o--;c+=n[s++]<<u;u+=8}r.last=c&1;c>>>=1;u-=1;switch(c&3){case 0:r.mode=STORED;break;case 1:fixedtables(r);r.mode=LEN_;if(t===Z_TREES){c>>>=2;u-=2;break e}break;case 2:r.mode=TABLE;break;case 3:e.msg="invalid block type";r.mode=BAD}c>>>=2;u-=2;break;case STORED:c>>>=u&7;u-=u&7;while(u<32){if(o===0){break e}o--;c+=n[s++]<<u;u+=8}if((c&65535)!==(c>>>16^65535)){e.msg="invalid stored block lengths";r.mode=BAD;break}r.length=c&65535;c=0;u=0;r.mode=COPY_;if(t===Z_TREES){break e}case COPY_:r.mode=COPY;case COPY:d=r.length;if(d){if(d>o){d=o}if(d>f){d=f}if(d===0){break e}i.set(n.subarray(s,s+d),a);o-=d;s+=d;f-=d;a+=d;r.length-=d;break}r.mode=TYPE;break;case TABLE:while(u<14){if(o===0){break e}o--;c+=n[s++]<<u;u+=8}r.nlen=(c&31)+257;c>>>=5;u-=5;r.ndist=(c&31)+1;c>>>=5;u-=5;r.ncode=(c&15)+4;c>>>=4;u-=4;if(r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols";r.mode=BAD;break}r.have=0;r.mode=LENLENS;case LENLENS:while(r.have<r.ncode){while(u<3){if(o===0){break e}o--;c+=n[s++]<<u;u+=8}r.lens[C[r.have++]]=c&7;c>>>=3;u-=3}while(r.have<19){r.lens[C[r.have++]]=0}r.lencode=r.lendyn;r.lenbits=7;T={bits:r.lenbits};S=inftrees(CODES,r.lens,0,19,r.lencode,0,r.work,T);r.lenbits=T.bits;if(S){e.msg="invalid code lengths set";r.mode=BAD;break}r.have=0;r.mode=CODELENS;case CODELENS:while(r.have<r.nlen+r.ndist){for(;;){m=r.lencode[c&(1<<r.lenbits)-1];g=m>>>24;b=m>>>16&255;A=m&65535;if(g<=u){break}if(o===0){break e}o--;c+=n[s++]<<u;u+=8}if(A<16){c>>>=g;u-=g;r.lens[r.have++]=A}else{if(A===16){I=g+2;while(u<I){if(o===0){break e}o--;c+=n[s++]<<u;u+=8}c>>>=g;u-=g;if(r.have===0){e.msg="invalid bit length repeat";r.mode=BAD;break}_=r.lens[r.have-1];d=3+(c&3);c>>>=2;u-=2}else if(A===17){I=g+3;while(u<I){if(o===0){break e}o--;c+=n[s++]<<u;u+=8}c>>>=g;u-=g;_=0;d=3+(c&7);c>>>=3;u-=3}else{I=g+7;while(u<I){if(o===0){break e}o--;c+=n[s++]<<u;u+=8}c>>>=g;u-=g;_=0;d=11+(c&127);c>>>=7;u-=7}if(r.have+d>r.nlen+r.ndist){e.msg="invalid bit length repeat";r.mode=BAD;break}while(d--){r.lens[r.have++]=_}}}if(r.mode===BAD){break}if(r.lens[256]===0){e.msg="invalid code -- missing end-of-block";r.mode=BAD;break}r.lenbits=9;T={bits:r.lenbits};S=inftrees(LENS,r.lens,0,r.nlen,r.lencode,0,r.work,T);r.lenbits=T.bits;if(S){e.msg="invalid literal/lengths set";r.mode=BAD;break}r.distbits=6;r.distcode=r.distdyn;T={bits:r.distbits};S=inftrees(DISTS,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,T);r.distbits=T.bits;if(S){e.msg="invalid distances set";r.mode=BAD;break}r.mode=LEN_;if(t===Z_TREES){break e}case LEN_:r.mode=LEN;case LEN:if(o>=6&&f>=258){e.next_out=a;e.avail_out=f;e.next_in=s;e.avail_in=o;r.hold=c;r.bits=u;inffast(e,h);a=e.next_out;i=e.output;f=e.avail_out;s=e.next_in;n=e.input;o=e.avail_in;c=r.hold;u=r.bits;if(r.mode===TYPE){r.back=-1}break}r.back=0;for(;;){m=r.lencode[c&(1<<r.lenbits)-1];g=m>>>24;b=m>>>16&255;A=m&65535;if(g<=u){break}if(o===0){break e}o--;c+=n[s++]<<u;u+=8}if(b&&(b&240)===0){w=g;E=b;v=A;for(;;){m=r.lencode[v+((c&(1<<w+E)-1)>>w)];g=m>>>24;b=m>>>16&255;A=m&65535;if(w+g<=u){break}if(o===0){break e}o--;c+=n[s++]<<u;u+=8}c>>>=w;u-=w;r.back+=w}c>>>=g;u-=g;r.back+=g;r.length=A;if(b===0){r.mode=LIT;break}if(b&32){r.back=-1;r.mode=TYPE;break}if(b&64){e.msg="invalid literal/length code";r.mode=BAD;break}r.extra=b&15;r.mode=LENEXT;case LENEXT:if(r.extra){I=r.extra;while(u<I){if(o===0){break e}o--;c+=n[s++]<<u;u+=8}r.length+=c&(1<<r.extra)-1;c>>>=r.extra;u-=r.extra;r.back+=r.extra}r.was=r.length;r.mode=DIST;case DIST:for(;;){m=r.distcode[c&(1<<r.distbits)-1];g=m>>>24;b=m>>>16&255;A=m&65535;if(g<=u){break}if(o===0){break e}o--;c+=n[s++]<<u;u+=8}if((b&240)===0){w=g;E=b;v=A;for(;;){m=r.distcode[v+((c&(1<<w+E)-1)>>w)];g=m>>>24;b=m>>>16&255;A=m&65535;if(w+g<=u){break}if(o===0){break e}o--;c+=n[s++]<<u;u+=8}c>>>=w;u-=w;r.back+=w}c>>>=g;u-=g;r.back+=g;if(b&64){e.msg="invalid distance code";r.mode=BAD;break}r.offset=A;r.extra=b&15;r.mode=DISTEXT;case DISTEXT:if(r.extra){I=r.extra;while(u<I){if(o===0){break e}o--;c+=n[s++]<<u;u+=8}r.offset+=c&(1<<r.extra)-1;c>>>=r.extra;u-=r.extra;r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back";r.mode=BAD;break}r.mode=MATCH;case MATCH:if(f===0){break e}d=h-f;if(r.offset>d){d=r.offset-d;if(d>r.whave){if(r.sane){e.msg="invalid distance too far back";r.mode=BAD;break}}if(d>r.wnext){d-=r.wnext;p=r.wsize-d}else{p=r.wnext-d}if(d>r.length){d=r.length}y=r.window}else{y=i;p=a-r.offset;d=r.length}if(d>f){d=f}f-=d;r.length-=d;do{i[a++]=y[p++]}while(--d);if(r.length===0){r.mode=LEN}break;case LIT:if(f===0){break e}i[a++]=r.length;f--;r.mode=LEN;break;case CHECK:if(r.wrap){while(u<32){if(o===0){break e}o--;c|=n[s++]<<u;u+=8}h-=f;e.total_out+=h;r.total+=h;if(r.wrap&4&&h){e.adler=r.check=r.flags?crc32_1(r.check,i,h,a-h):adler32_1(r.check,i,h,a-h)}h=f;if(r.wrap&4&&(r.flags?c:zswap32(c))!==r.check){e.msg="incorrect data check";r.mode=BAD;break}c=0;u=0}r.mode=LENGTH;case LENGTH:if(r.wrap&&r.flags){while(u<32){if(o===0){break e}o--;c+=n[s++]<<u;u+=8}if(r.wrap&4&&c!==(r.total&4294967295)){e.msg="incorrect length check";r.mode=BAD;break}c=0;u=0}r.mode=DONE;case DONE:S=Z_STREAM_END$1;break e;case BAD:S=Z_DATA_ERROR$1;break e;case MEM:return Z_MEM_ERROR$1;case SYNC:default:return Z_STREAM_ERROR$1}}e.next_out=a;e.avail_out=f;e.next_in=s;e.avail_in=o;r.hold=c;r.bits=u;if(r.wsize||h!==e.avail_out&&r.mode<BAD&&(r.mode<CHECK||t!==Z_FINISH$1)){if(updatewindow(e,e.output,e.next_out,h-e.avail_out));}l-=e.avail_in;h-=e.avail_out;e.total_in+=l;e.total_out+=h;r.total+=h;if(r.wrap&4&&h){e.adler=r.check=r.flags?crc32_1(r.check,i,h,e.next_out-h):adler32_1(r.check,i,h,e.next_out-h)}e.data_type=r.bits+(r.last?64:0)+(r.mode===TYPE?128:0)+(r.mode===LEN_||r.mode===COPY_?256:0);if((l===0&&h===0||t===Z_FINISH$1)&&S===Z_OK$1){S=Z_BUF_ERROR}return S};const inflateEnd=e=>{if(inflateStateCheck(e)){return Z_STREAM_ERROR$1}let t=e.state;if(t.window){t.window=null}e.state=null;return Z_OK$1};const inflateGetHeader=(e,t)=>{if(inflateStateCheck(e)){return Z_STREAM_ERROR$1}const r=e.state;if((r.wrap&2)===0){return Z_STREAM_ERROR$1}r.head=t;t.done=false;return Z_OK$1};const inflateSetDictionary=(e,t)=>{const r=t.length;let n;let i;let s;if(inflateStateCheck(e)){return Z_STREAM_ERROR$1}n=e.state;if(n.wrap!==0&&n.mode!==DICT){return Z_STREAM_ERROR$1}if(n.mode===DICT){i=1;i=adler32_1(i,t,r,0);if(i!==n.check){return Z_DATA_ERROR$1}}s=updatewindow(e,t,r,r);if(s){n.mode=MEM;return Z_MEM_ERROR$1}n.havedict=1;return Z_OK$1};var inflateReset_1=inflateReset;var inflateReset2_1=inflateReset2;var inflateResetKeep_1=inflateResetKeep;var inflateInit_1=inflateInit;var inflateInit2_1=inflateInit2;var inflate_2$1=inflate$2;var inflateEnd_1=inflateEnd;var inflateGetHeader_1=inflateGetHeader;var inflateSetDictionary_1=inflateSetDictionary;var inflateInfo="pako inflate (from Nodeca project)";var inflate_1$2={inflateReset:inflateReset_1,inflateReset2:inflateReset2_1,inflateResetKeep:inflateResetKeep_1,inflateInit:inflateInit_1,inflateInit2:inflateInit2_1,inflate:inflate_2$1,inflateEnd:inflateEnd_1,inflateGetHeader:inflateGetHeader_1,inflateSetDictionary:inflateSetDictionary_1,inflateInfo};function GZheader(){this.text=0;this.time=0;this.xflags=0;this.os=0;this.extra=null;this.extra_len=0;this.name="";this.comment="";this.hcrc=0;this.done=false}var gzheader=GZheader;const toString=Object.prototype.toString;const{Z_NO_FLUSH,Z_FINISH,Z_OK,Z_STREAM_END,Z_NEED_DICT,Z_STREAM_ERROR,Z_DATA_ERROR,Z_MEM_ERROR}=constants$2;function Inflate$1(e){this.options=common.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;if(t.raw&&t.windowBits>=0&&t.windowBits<16){t.windowBits=-t.windowBits;if(t.windowBits===0){t.windowBits=-15}}if(t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)){t.windowBits+=32}if(t.windowBits>15&&t.windowBits<48){if((t.windowBits&15)===0){t.windowBits|=15}}this.err=0;this.msg="";this.ended=false;this.chunks=[];this.strm=new zstream;this.strm.avail_out=0;let r=inflate_1$2.inflateInit2(this.strm,t.windowBits);if(r!==Z_OK){throw new Error(messages[r])}this.header=new gzheader;inflate_1$2.inflateGetHeader(this.strm,this.header);if(t.dictionary){if(typeof t.dictionary==="string"){t.dictionary=strings.string2buf(t.dictionary)}else if(toString.call(t.dictionary)==="[object ArrayBuffer]"){t.dictionary=new Uint8Array(t.dictionary)}if(t.raw){r=inflate_1$2.inflateSetDictionary(this.strm,t.dictionary);if(r!==Z_OK){throw new Error(messages[r])}}}}Inflate$1.prototype.push=function(e,t){const r=this.strm;const n=this.options.chunkSize;const i=this.options.dictionary;let s,a,o;if(this.ended)return false;if(t===~~t)a=t;else a=t===true?Z_FINISH:Z_NO_FLUSH;if(toString.call(e)==="[object ArrayBuffer]"){r.input=new Uint8Array(e)}else{r.input=e}r.next_in=0;r.avail_in=r.input.length;for(;;){if(r.avail_out===0){r.output=new Uint8Array(n);r.next_out=0;r.avail_out=n}s=inflate_1$2.inflate(r,a);if(s===Z_NEED_DICT&&i){s=inflate_1$2.inflateSetDictionary(r,i);if(s===Z_OK){s=inflate_1$2.inflate(r,a)}else if(s===Z_DATA_ERROR){s=Z_NEED_DICT}}while(r.avail_in>0&&s===Z_STREAM_END&&r.state.wrap>0&&e[r.next_in]!==0){inflate_1$2.inflateReset(r);s=inflate_1$2.inflate(r,a)}switch(s){case Z_STREAM_ERROR:case Z_DATA_ERROR:case Z_NEED_DICT:case Z_MEM_ERROR:this.onEnd(s);this.ended=true;return false}o=r.avail_out;if(r.next_out){if(r.avail_out===0||s===Z_STREAM_END){if(this.options.to==="string"){let e=strings.utf8border(r.output,r.next_out);let t=r.next_out-e;let i=strings.buf2string(r.output,e);r.next_out=t;r.avail_out=n-t;if(t)r.output.set(r.output.subarray(e,e+t),0);this.onData(i)}else{this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out))}}}if(s===Z_OK&&o===0)continue;if(s===Z_STREAM_END){s=inflate_1$2.inflateEnd(this.strm);this.onEnd(s);this.ended=true;return true}if(r.avail_in===0)break}return true};Inflate$1.prototype.onData=function(e){this.chunks.push(e)};Inflate$1.prototype.onEnd=function(e){if(e===Z_OK){if(this.options.to==="string"){this.result=this.chunks.join("")}else{this.result=common.flattenChunks(this.chunks)}}this.chunks=[];this.err=e;this.msg=this.strm.msg};function inflate$1(e,t){const r=new Inflate$1(t);r.push(e);if(r.err)throw r.msg||messages[r.err];return r.result}function inflateRaw$1(e,t){t=t||{};t.raw=true;return inflate$1(e,t)}var Inflate_1$1=Inflate$1;var inflate_2=inflate$1;var inflateRaw_1$1=inflateRaw$1;var ungzip$1=inflate$1;var constants=constants$2;var inflate_1$1={Inflate:Inflate_1$1,inflate:inflate_2,inflateRaw:inflateRaw_1$1,ungzip:ungzip$1,constants};const{Deflate,deflate,deflateRaw,gzip}=deflate_1$1;const{Inflate,inflate,inflateRaw,ungzip}=inflate_1$1;var Deflate_1=Deflate;var deflate_1=deflate;var deflateRaw_1=deflateRaw;var gzip_1=gzip;var Inflate_1=Inflate;var inflate_1=inflate;var inflateRaw_1=inflateRaw;var ungzip_1=ungzip;var constants_1=constants$2;var pako={Deflate:Deflate_1,deflate:deflate_1,deflateRaw:deflateRaw_1,gzip:gzip_1,Inflate:Inflate_1,inflate:inflate_1,inflateRaw:inflateRaw_1,ungzip:ungzip_1,constants:constants_1};const pako_esm=Object.freeze({__proto__:null,Deflate:Deflate_1,Inflate:Inflate_1,constants:constants_1,default:pako,deflate:deflate_1,deflateRaw:deflateRaw_1,gzip:gzip_1,inflate:inflate_1,inflateRaw:inflateRaw_1,ungzip:ungzip_1});const require$$3=getAugmentedNamespace(pako_esm);(function(e){Object.defineProperty(e,"__esModule",{value:true});e.isSignedOffchainAttestationV1=e.uncompactOffchainAttestationPackage=e.compactOffchainAttestationPackage=e.decodeBase64ZippedBase64=e.zipAndEncodeToBase64=e.createOffchainURL=void 0;const t=require$$0$1;const r=require$$0;const n=t.__importStar(require$$2);const i=t.__importDefault(require$$3);const s=offchain;const a=t=>{const r=(0,e.zipAndEncodeToBase64)(t);return`/offchain/url/#attestation=${encodeURIComponent(r)}`};e.createOffchainURL=a;const o=t=>{const r=(0,e.compactOffchainAttestationPackage)(t);const s=JSON.stringify(r,((e,t)=>typeof t==="bigint"?t.toString():t));const a=i.default.deflate(s,{level:9});return n.fromUint8Array(a)};e.zipAndEncodeToBase64=o;const f=t=>{const r=n.toUint8Array(t);const s=i.default.inflate(r,{to:"string"});const a=JSON.parse(s);return(0,e.uncompactOffchainAttestationPackage)(a)};e.decodeBase64ZippedBase64=f;const c=t=>{const{signer:n}=t;let{sig:i}=t;if((0,e.isSignedOffchainAttestationV1)(i)){i=h(i)}return[i.domain.version,i.domain.chainId,i.domain.verifyingContract,i.signature.r,i.signature.s,i.signature.v,n,i.uid,i.message.schema,i.message.recipient===r.ZeroAddress?"0":i.message.recipient,Number(i.message.time),Number(i.message.expirationTime),i.message.refUID===r.ZeroHash?"0":i.message.refUID,i.message.revocable,i.message.data,0,i.message.version,i.message.salt]};e.compactOffchainAttestationPackage=c;const u=e=>{const t=e[16]?e[16]:s.OffchainAttestationVersion.Legacy;const n={Attest:[{name:"schema",type:"bytes32"},{name:"recipient",type:"address"},{name:"time",type:"uint64"},{name:"expirationTime",type:"uint64"},{name:"revocable",type:"bool"},{name:"refUID",type:"bytes32"},{name:"data",type:"bytes"}]};switch(t){case s.OffchainAttestationVersion.Legacy:break;case s.OffchainAttestationVersion.Version1:n.Attest=[{name:"version",type:"uint16"},...n.Attest];break;case s.OffchainAttestationVersion.Version2:n.Attest=[{name:"version",type:"uint16"},...n.Attest,{name:"salt",type:"bytes32"}];break;default:throw new Error(`Unsupported version: ${t}`)}return{sig:{version:t,domain:{name:"EAS Attestation",version:e[0],chainId:BigInt(e[1]),verifyingContract:e[2]},primaryType:t===s.OffchainAttestationVersion.Legacy?"Attestation":"Attest",types:n,signature:{r:e[3],s:e[4],v:e[5]},uid:e[7],message:{version:t,schema:e[8],recipient:e[9]==="0"?r.ZeroAddress:e[9],time:BigInt(e[10]),expirationTime:BigInt(e[11]),refUID:e[12]==="0"?r.ZeroHash:e[12],revocable:e[13],data:e[14],salt:e[17]}},signer:e[6]}};e.uncompactOffchainAttestationPackage=u;const l=e=>"v"in e&&"r"in e&&"s"in e;e.isSignedOffchainAttestationV1=l;function h(e){const{v:t,r,s:n,...i}=e;return{...i,version:s.OffchainAttestationVersion.Version1,signature:{v:t,r,s:n}}}})(offchainUtils);(function(e){Object.defineProperty(e,"__esModule",{value:true});const t=require$$0$1;t.__exportStar(delegated,e);t.__exportStar(delegatedProxy,e);t.__exportStar(offchain,e);t.__exportStar(offchainUtils,e)})(offchain$1);var request={};Object.defineProperty(request,"__esModule",{value:true});request.NO_EXPIRATION=void 0;request.NO_EXPIRATION=0n;var transaction={};Object.defineProperty(transaction,"__esModule",{value:true});transaction.Base=transaction.Transaction=void 0;class Transaction{tx;waitCallback;constructor(e,t){this.tx=e;this.waitCallback=t}async wait(e){const t=await this.tx.wait(e);if(!t){throw new Error(`Unable to confirm: ${this.tx}`)}return this.waitCallback(t)}}transaction.Transaction=Transaction;class Base{contract;constructor(e,t,r){this.contract=e.attach(t);if(r){this.connect(r)}}connect(e){this.contract=this.contract.connect(e);return this}async getChainId(){const e=this.contract.runner?.provider;if(!e){throw new Error("Unable to get the chain ID: provider wasn't set")}return(await e.getNetwork()).chainId}}transaction.Base=Base;(function(e){Object.defineProperty(e,"__esModule",{value:true});e.EAS=void 0;const t=require$$0$1;const r=typechainTypes;const n=version$1;const i=offchain$1;const s=request;const a=transaction;const o=utils;t.__exportStar(request,e);class f extends a.Base{proxy;delegated;offchain;constructor(e,t){const{signerOrProvider:n,proxy:i}=t||{};super(new r.EAS__factory,e,n);if(!this.contract.getAddress){throw new Error("Incompatible ethers version detect. Make sure to use the SDK with ethers v6 or later")}if(i){this.proxy=i}}connect(e){delete this.delegated;delete this.offchain;super.connect(e);return this}async getVersion(){return await(0,n.legacyVersion)(this.contract)??this.contract.version()}getAttestation(e){return this.contract.getAttestation(e)}isAttestationValid(e){return this.contract.isAttestationValid(e)}async isAttestationRevoked(e){const t=await this.contract.getAttestation(e);if(t.uid===o.ZERO_BYTES32){throw new Error("Invalid attestation")}return t.revocationTime!=s.NO_EXPIRATION}getTimestamp(e){return this.contract.getTimestamp(e)}getRevocationOffchain(e,t){return this.contract.getRevokeOffchain(e,t)}getEIP712Proxy(){return this.proxy}getDelegated(){if(this.delegated){return this.delegated}return this.setDelegated()}getOffchain(){if(this.offchain){return this.offchain}return this.setOffchain()}async attest({schema:e,data:{recipient:t,data:r,expirationTime:n=s.NO_EXPIRATION,revocable:i=true,refUID:f=o.ZERO_BYTES32,value:c=0n}},u){const l=await this.contract.attest({schema:e,data:{recipient:t,expirationTime:n,revocable:i,refUID:f,data:r,value:c}},{value:c,...u});return new a.Transaction(l,(async e=>(0,o.getUIDsFromAttestReceipt)(e)[0]))}async attestByDelegation({schema:e,data:{recipient:t,data:r,expirationTime:n=s.NO_EXPIRATION,revocable:i=true,refUID:f=o.ZERO_BYTES32,value:c=0n},signature:u,attester:l,deadline:h=s.NO_EXPIRATION},d){const p=await this.contract.attestByDelegation({schema:e,data:{recipient:t,expirationTime:n,revocable:i,refUID:f,data:r,value:c},signature:u,attester:l,deadline:h},{value:c,...d});return new a.Transaction(p,(async e=>(0,o.getUIDsFromAttestReceipt)(e)[0]))}async multiAttest(e,t){const r=e.map((e=>({schema:e.schema,data:e.data.map((e=>({recipient:e.recipient,expirationTime:e.expirationTime??s.NO_EXPIRATION,revocable:e.revocable??true,refUID:e.refUID??o.ZERO_BYTES32,data:e.data??o.ZERO_BYTES32,value:e.value??0n})))})));const n=r.reduce(((e,{data:t})=>{const r=t.reduce(((e,t)=>e+t.value),0n);return e+r}),0n);const i=await this.contract.multiAttest(r,{value:n,...t});return new a.Transaction(i,(async e=>(0,o.getUIDsFromAttestReceipt)(e)))}async multiAttestByDelegation(e,t){const r=e.map((e=>({schema:e.schema,data:e.data.map((e=>({recipient:e.recipient,expirationTime:e.expirationTime??s.NO_EXPIRATION,revocable:e.revocable??true,refUID:e.refUID??o.ZERO_BYTES32,data:e.data??o.ZERO_BYTES32,value:e.value??0n}))),signatures:e.signatures,attester:e.attester,deadline:e.deadline??s.NO_EXPIRATION})));const n=r.reduce(((e,{data:t})=>{const r=t.reduce(((e,t)=>e+t.value),0n);return e+r}),0n);const i=await this.contract.multiAttestByDelegation(r,{value:n,...t});return new a.Transaction(i,(async e=>(0,o.getUIDsFromAttestReceipt)(e)))}async revoke({schema:e,data:{uid:t,value:r=0n}},n){const i=await this.contract.revoke({schema:e,data:{uid:t,value:r}},{value:r,...n});return new a.Transaction(i,(async()=>{}))}async revokeByDelegation({schema:e,data:{uid:t,value:r=0n},signature:n,revoker:i,deadline:o=s.NO_EXPIRATION},f){const c=await this.contract.revokeByDelegation({schema:e,data:{uid:t,value:r},signature:n,revoker:i,deadline:o},{value:r,...f});return new a.Transaction(c,(async()=>{}))}async multiRevoke(e,t){const r=e.map((e=>({schema:e.schema,data:e.data.map((e=>({uid:e.uid,value:e.value??0n})))})));const n=r.reduce(((e,{data:t})=>{const r=t.reduce(((e,t)=>e+t.value),0n);return e+r}),0n);const i=await this.contract.multiRevoke(r,{value:n,...t});return new a.Transaction(i,(async()=>{}))}async multiRevokeByDelegation(e,t){const r=e.map((e=>({schema:e.schema,data:e.data.map((e=>({uid:e.uid,value:e.value??0n}))),signatures:e.signatures,revoker:e.revoker,deadline:e.deadline??s.NO_EXPIRATION})));const n=r.reduce(((e,{data:t})=>{const r=t.reduce(((e,t)=>e+t.value),0n);return e+r}),0n);const i=await this.contract.multiRevokeByDelegation(r,{value:n,...t});return new a.Transaction(i,(async()=>{}))}attestByDelegationProxy(e,t){if(!this.proxy){throw new Error("Proxy wasn't set")}return this.proxy.attestByDelegationProxy(e,t)}multiAttestByDelegationProxy(e,t){if(!this.proxy){throw new Error("Proxy wasn't set")}return this.proxy.multiAttestByDelegationProxy(e,t)}revokeByDelegationProxy(e,t){if(!this.proxy){throw new Error("Proxy wasn't set")}return this.proxy.revokeByDelegationProxy(e,t)}multiRevokeByDelegationProxy(e,t){if(!this.proxy){throw new Error("Proxy wasn't set")}return this.proxy.multiRevokeByDelegationProxy(e,t)}async timestamp(e,t){const r=await this.contract.timestamp(e,t??{});return new a.Transaction(r,(async e=>(0,o.getTimestampFromTimestampReceipt)(e)[0]))}async multiTimestamp(e,t){const r=await this.contract.multiTimestamp(e,t??{});return new a.Transaction(r,(async e=>(0,o.getTimestampFromTimestampReceipt)(e)))}async revokeOffchain(e,t){const r=await this.contract.revokeOffchain(e,t??{});return new a.Transaction(r,(async e=>(0,o.getTimestampFromOffchainRevocationReceipt)(e)[0]))}async multiRevokeOffchain(e,t){const r=await this.contract.multiRevokeOffchain(e,t??{});return new a.Transaction(r,(async e=>(0,o.getTimestampFromOffchainRevocationReceipt)(e)))}getDomainSeparator(){return this.contract.getDomainSeparator()}getNonce(e){return this.contract.getNonce(e)}getAttestTypeHash(){return this.contract.getAttestTypeHash()}getRevokeTypeHash(){return this.contract.getRevokeTypeHash()}async setDelegated(){this.delegated=new i.Delegated({address:await this.contract.getAddress(),version:await this.getVersion(),chainId:await this.getChainId()});return this.delegated}async setOffchain(){this.offchain=new i.Offchain({address:await this.contract.getAddress(),version:await this.getVersion(),chainId:await this.getChainId()},i.OffchainAttestationVersion.Version2,this);return this.offchain}}e.EAS=f})(eas);var schemaEncoder={};Object.defineProperty(schemaEncoder,"__esModule",{value:true});schemaEncoder.SchemaEncoder=void 0;const ethers_1=require$$0;const multiformats_1=src$9;const utils_1$1=utils;const TUPLE_TYPE="tuple";const TUPLE_ARRAY_TYPE="tuple[]";class SchemaEncoder{schema;constructor(e){this.schema=[];const t=e.replace(/ipfsHash/g,"bytes32");const r=ethers_1.FunctionFragment.from(`func(${t})`);ethers_1.AbiCoder.defaultAbiCoder().getDefaultValue(r.inputs);for(const e of r.inputs){const{name:t,arrayChildren:r}=e;let{type:n}=e;let i=t?`${n} ${t}`:n;const s=t?` ${t}`:"";let a=n;const o=r;const f=e.components??r?.components??[];const c=`(${f.map((e=>e.type)).join(",")})${o?"[]":""}`;const u=`(${f.map((e=>e.name?`${e.type} ${e.name}`:e.type)).join(",")})${o?"[]":""}`;if(n.startsWith(TUPLE_TYPE)){n=c;i=`${u}${s}`}else if(n===TUPLE_ARRAY_TYPE){n=`${c}[]`;i=`${u}[]${s}`}else if(n.includes("[]")){a=a.replace("[]","")}const l=SchemaEncoder.getDefaultValueForTypeName(a);this.schema.push({name:t,type:n,signature:i,value:n.includes("[]")?[]:l})}}encodeData(e){if(e.length!==this.schema.length){throw new Error("Invalid number or values")}const t=[];for(const[r,n]of this.schema.entries()){const{type:i,name:s,value:a}=e[r];const o=i.replace(/\s/g,"");if(o!==n.type&&o!==n.signature&&!(o==="ipfsHash"&&n.type==="bytes32")){throw new Error(`Incompatible param type: ${o}`)}if(s!==n.name){throw new Error(`Incompatible param name: ${s}`)}t.push(n.type==="bytes32"&&n.name==="ipfsHash"?SchemaEncoder.decodeIpfsValue(a):n.type==="bytes32"&&typeof a==="string"&&!(0,ethers_1.isBytesLike)(a)?(0,ethers_1.encodeBytes32String)(a):a)}return ethers_1.AbiCoder.defaultAbiCoder().encode(this.signatures(),t)}decodeData(e){const t=ethers_1.AbiCoder.defaultAbiCoder().decode(this.signatures(),e).toArray();return this.schema.map(((e,r)=>{const n=ethers_1.FunctionFragment.from(`func(${e.signature})`);if(n.inputs.length!==1){throw new Error(`Unexpected inputs: ${n.inputs}`)}let i=t[r];const s=n.inputs[0];const a=s.components??s.arrayChildren?.components??[];if(i.length>0&&typeof i!=="string"&&a?.length>0){if(Array.isArray(i[0])){const t=[];for(const e of i){const r=[];const n=e.toArray().filter((e=>typeof e!=="object"));for(const[e,t]of n.entries()){const n=a[e];r.push({name:n.name,type:n.type,value:t})}t.push(r)}i={name:e.name,type:e.type,value:t}}else{const t=[];const r=i.filter((e=>typeof e!=="object"));for(const[e,n]of r.entries()){const r=a[e];t.push({name:r.name,type:r.type,value:n})}i={name:e.name,type:e.type,value:t}}}else{i={name:e.name,type:e.type,value:i}}return{name:e.name,type:e.type,signature:e.signature,value:i}}))}isEncodedDataValid(e){try{this.decodeData(e);return true}catch(e){return false}}static isCID(e){try{multiformats_1.CID.parse(e);return true}catch{return false}}static encodeQmHash(e){const t=multiformats_1.CID.parse(e);return ethers_1.AbiCoder.defaultAbiCoder().encode(["bytes32"],[t.multihash.digest])}static decodeQmHash(e){const t=Uint8Array.from(Buffer.from(e.slice(2),"hex"));const r={digest:t,code:18,size:32,bytes:Uint8Array.from([18,32,...t])};const n=multiformats_1.CID.createV0(r);return n.toString()}static getDefaultValueForTypeName(e){return e==="bool"?false:e.includes("uint")?"0":e==="address"?utils_1$1.ZERO_ADDRESS:""}static decodeIpfsValue(e){if((0,ethers_1.isBytesLike)(e)){return SchemaEncoder.encodeBytes32Value(e)}try{const t=multiformats_1.CID.parse(e);const r=ethers_1.AbiCoder.defaultAbiCoder().encode(["bytes32"],[t.multihash.digest]);return r}catch{return SchemaEncoder.encodeBytes32Value(e)}}static encodeBytes32Value(e){try{ethers_1.AbiCoder.defaultAbiCoder().encode(["bytes32"],[e]);return e}catch(t){return(0,ethers_1.encodeBytes32String)(e)}}signatures(){return this.schema.map((e=>e.signature))}}schemaEncoder.SchemaEncoder=SchemaEncoder;var schemaRegistry={};Object.defineProperty(schemaRegistry,"__esModule",{value:true});schemaRegistry.SchemaRegistry=void 0;const eas_contracts_1=typechainTypes;const version_1=version$1;const transaction_1=transaction;const utils_1=utils;class SchemaRegistry extends transaction_1.Base{constructor(e,t){const{signerOrProvider:r}=t||{};super(new eas_contracts_1.SchemaRegistry__factory,e,r)}async getVersion(){return await(0,version_1.legacyVersion)(this.contract)??this.contract.version()}async register({schema:e,resolverAddress:t=utils_1.ZERO_ADDRESS,revocable:r=true},n){const i=await this.contract.register(e,t,r,n??{});return new transaction_1.Transaction(i,(async n=>(0,utils_1.getSchemaUID)(e,t,r)))}async getSchema({uid:e}){const t=await this.contract.getSchema(e);if(t.uid===utils_1.ZERO_BYTES32){throw new Error("Schema not found")}return t}}schemaRegistry.SchemaRegistry=SchemaRegistry;(function(e){Object.defineProperty(e,"__esModule",{value:true});e.Contracts=void 0;const t=require$$0$1;e.Contracts=t.__importStar(typechainTypes);t.__exportStar(eas,e);t.__exportStar(offchain$1,e);t.__exportStar(request,e);t.__exportStar(schemaEncoder,e);t.__exportStar(schemaRegistry,e);t.__exportStar(utils,e)})(dist);const EAS_RPC_CONFIG={1:"https://eth-mainnet.g.alchemy.com/v2/2bJxn0VGXp9U5EOfA6CoMGU-rrd-BIIT",11155111:"https://sepolia.infura.io/v3/9f79b2f9274344af90b8d4e244b580ef",42161:"https://arb1.arbitrum.io/rpc"};const EAS_REGISTRY_CONFIG={1:"0xA7b39296258348C78294F95B872b282326A97BDF",11155111:"0x0a7E2Ff54e76B8E6659aedc9103FB21c038050D0",42161:"0xA310da9c5B885E7fb3fbA9D66E9Ba6Df512b78eB"};class Attestation{constructor(e,t,r={}){this.type=e;this.base64Attestation=t;this.meta=r;const n=dist.decodeBase64ZippedBase64(t);this.attestation=n.sig;const i=this.attestation.domain;const s=i.chainId.toString();if(!EAS_RPC_CONFIG[s])throw new Error(`EAS chain ID ${i.chainId} is not supported`);if(!EAS_REGISTRY_CONFIG[s])throw new Error(`EAS schema registry address not available for chain ID ${i.chainId}`);this.offChain=new dist.Offchain({version:i.version,address:i.verifyingContract,chainId:i.chainId},this.attestation.version,this.eas);const a=new JsonRpcProvider(EAS_RPC_CONFIG[s],i.chainId,{staticNetwork:new Network(i.chainId.toString(),i.chainId)});this.eas=new dist.EAS(i.verifyingContract,{signerOrProvider:a});this.schemaRegistry=new dist.SchemaRegistry(EAS_REGISTRY_CONFIG[s],{signerOrProvider:a});this.recoverSignerInfo()}recoverSignerInfo(){let e;if(this.attestation.version>0){e=dist.OFFCHAIN_ATTESTATION_TYPES[this.attestation.version][0].types}else{e=dist.OFFCHAIN_ATTESTATION_TYPES[0][1].types}const t=TypedDataEncoder.hash(this.offChain.getDomainTypedData(),e,this.attestation.message);this.signerPublicKey=SigningKey.recoverPublicKey(t,this.attestation.signature);this.signerAddress=recoverAddress(t,this.attestation.signature);console.log("Signer key: ",this.signerPublicKey)}async getSchemaRecord(){if(!this.schemaRecord){this.schemaRecord=await this.schemaRegistry.getSchema({uid:this.attestation.message.schema})}return this.schemaRecord}async verifyAttestation(){const e=Math.round(Date.now()/1e3);if(e<this.attestation.message.time)throw new Error("Attestation not yet valid.");if(this.attestation.message.expirationTime>0&&e>this.attestation.message.expirationTime)throw new Error("Attestation has expired.");const t=await this.getSchemaRecord();if(!t.revocable)return;const r=await this.eas.getRevocationOffchain(this.signerAddress,this.attestation.uid);if(BigInt(r)>0){const e="Attestation has been revoked :-(";throw new Error(e)}}async getAttestationData(){if(!this.decodedData){const e=await this.getSchemaRecord();const t=new dist.SchemaEncoder((await e).schema);const r=t.decodeData(this.attestation.message.data);this.decodedData={};let n=0;for(const e of r){this.decodedData[e.name]=r[n].value.value;n++}}return this.decodedData}getAttestationField(e){const t=this.getAttestationData();if(!t[e]){throw new Error("The attestation does not contain data field '"+e+"'")}return t[e]}async getAttestationId(e){if(!e.length){return this.attestation.uid}const t=await this.getAttestationData();const r=[];for(const n of e){if(t[n])r.push(t[n])}return r.join("-")}async getCollectionHash(e){const t=[];t.push(this.attestation.message.schema.substring(2));t.push(this.signerAddress.substring(2).toLowerCase());const r=await this.getAttestationData();const n=e.collectionFields;if(n.length){for(const e of n){t.push(r[e.name])}}else if(e.eventId&&r.eventId){t.push(r.eventId)}const i=new TextEncoder;return keccak256(i.encode(t.join("")))}async getDatabaseRecord(e){return{collectionId:await this.getCollectionHash(e),tokenId:await this.getAttestationId(e.idFields),type:"eas",token:this.base64Attestation,decodedToken:this.attestation,decodedData:await this.getAttestationData(),meta:this.meta,dt:Date.now()}}static getAbiEncodedEasAttestation(e){const t=AbiCoder.defaultAbiCoder().encode(e.types.Attest.map((e=>e.type)),e.types.Attest.map((t=>e.message[t.name])));const r=AbiCoder.defaultAbiCoder().encode(["string","uint256","address"],[e.domain.version,e.domain.chainId,e.domain.verifyingContract]);return{attestation:t,domain:r,signature:Signature$6.from(e.signature).serialized}}}var AuthenticationType;(function(e){e["NONE"]="none";e["IPFS_CID"]="ipfsCid";e["XML_DSIG"]="dsig"})(AuthenticationType||(AuthenticationType={}));class Origin{constructor(e,t,r){this.tokenScript=e;this.name=t;this.type=r}async getOriginSecurityStatus(e){if(!this.securityStatus){console.log("Validating token origin: "+this.name);if(e.authoritivePublicKey)await this.validateBySignerKey(e.authoritivePublicKey,e.trustedKey);if(!this.securityStatus&&this.type==="contract")await this.validateByContractScriptUri(e.ipfsCid);if(!this.securityStatus)this.securityStatus={type:AuthenticationType.NONE,status:SecurityStatus$1.INVALID,statusText:"The TokenScript is not signed by the "+(this.type=="attestation"?"attestation issuer":"contract deployer")};this.securityStatus.signingKey=this.signingKey}return this.securityStatus}async validateBySignerKey(e,t){if(t){this.securityStatus={type:AuthenticationType.XML_DSIG,status:SecurityStatus$1.VALID,statusText:"The TokenScript is signed by a trusted key",trustedKey:t};return}if(this.type==="contract"){const t=this.tokenScript.getContractByName(this.name);try{const r=computeAddress(e);const n=await new TrustedKeyResolver(this.tokenScript).isAdmin(t,r);if(n){this.securityStatus={type:AuthenticationType.XML_DSIG,status:SecurityStatus$1.VALID,statusText:"The TokenScript signer matches the contract deployer for this token",trustedKey:{issuerName:"Contract owner",valueType:"ethAddress",value:r}};console.log("DSIG validator: DSIG matched successfully")}else{console.warn(`DSIG validator: contract key does not match DSIG( publicKeyHex: ${e}, address: ${r})`)}}catch(e){console.warn(e)}}else{const t=this.tokenScript.getAttestationDefinitions().getDefinition(this.name);this.signingKey=t.keys.join(", ");for(const r of t.keys){console.log("DSIG Validator: matching attestation issuer key: ",r);if(e.replace("0x","").toLowerCase()!==r.replace("0x","").toLowerCase()){console.warn("DSIG Validator: attestation issuer key does not match DSIG: ",e);return}}this.securityStatus={type:AuthenticationType.XML_DSIG,status:SecurityStatus$1.VALID,statusText:"The TokenScript is signed by the attestation issuer"}}}async validateByContractScriptUri(e){var t;const r=this.tokenScript.getContractByName(this.name);const n=this.tokenScript.getSourceInfo();const[i,s]=((t=n.tsId)!==null&&t!==void 0?t:"").split("-");const a=r.getAddresses();for(const t in a){const r=a[t];let o=null;if(s&&n.source==="scriptUri"&&r.address===s&&r.chain===parseInt(i)){o=n.sourceUrl}else{return}console.log("IPFS Validator: checking source URL ",o);if(!o){console.warn("IPFS Validator: source URL not set");return}const f=o.match(/^.*[\/=]?([a-zA-z1-9]{46})[\/?&.]?.*$/);if(!f){console.log("IPFS Validator: Not an IPFS URL, skipping");return}if(e!==f[1]){console.warn("IPFS Validator: CID does not match source URL");return}}this.securityStatus={type:AuthenticationType.IPFS_CID,status:SecurityStatus$1.VALID,statusText:"The TokenScript IPFS CID matches the scriptURI specified by the contract"}}}class Meta{constructor(e){this.parentElem=e;this.meta={};const t=e.getElementsByTagName("ts:meta");if(t.length&&t[0].children.length){for(const e of Meta.META_TAGS){const r=[].slice.call(t[0].getElementsByTagName("ts:"+e));if(!r.length)continue;const n=r.filter((e=>e.getAttribute("xml:lang")==="en"));this.meta[e]=n.length?n[0].textContent:r[0].textContent}}}getValue(e){if(!this.meta[e])return null;return this.meta[e]}get description(){return this.getValue("description")}get aboutUrl(){return this.getValue("aboutUrl")}get iconUrl(){return this.getValue("iconUrl")}}Meta.META_TAGS=["description","aboutUrl","iconUrl"];var __rest=undefined&&undefined.__rest||function(e,t){var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0)r[n]=e[n];if(e!=null&&typeof Object.getOwnPropertySymbols==="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++){if(t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i]))r[n[i]]=e[n[i]]}return r};class TokenScript{constructor(e,t,r,n,i,s,a){this.engine=e;this.tokenDef=t;this.xmlStr=r;this.source=n;this.sourceId=i;this.sourceUrl=s;this.viewBinding=a;this.eventHandlers={};this.securityInfo=new SecurityInfo(this)}getSourceInfo(){return{tsId:this.sourceId,source:this.source,sourceUrl:this.sourceUrl}}emitEvent(e,t){if(this.eventHandlers[e])for(const r of Object.values(this.eventHandlers[e])){r(t)}}on(e,t,r="default"){if(!this.eventHandlers[e])this.eventHandlers[e]={};this.eventHandlers[e][r]=t}off(e,t){if(!t){delete this.eventHandlers[e];return}delete this.eventHandlers[e][t]}getXmlString(){return this.xmlStr}getXml(){return this.tokenDef}getEngine(){return this.engine}getSecurityInfo(){return this.securityInfo}hasViewBinding(){return!!this.viewBinding}setViewBinding(e){this.viewBinding=e;this.viewController=null}getViewBinding(){return this.viewBinding}getViewController(e){if(e)return new ViewController(this,e);if(!this.viewController){if(!this.viewBinding)throw new Error("View binding has not been provided");this.viewController=new ViewController(this,this.viewBinding)}return this.viewController}async showOrExecuteTokenCard(e,t){await this.getViewController().showOrExecuteCard(e,t)}getName(){return this.tokenDef.documentElement.getAttribute("name")}getLabel(){var e,t;if(!this.label)this.label=new Label(this.tokenDef.documentElement);return(t=(e=this.label.getValue())!==null&&e!==void 0?e:this.getName())!==null&&t!==void 0?t:"Unnamed TokenScript"}getMetadata(){if(!this.meta)this.meta=new Meta(this.tokenDef.documentElement);return this.meta}getCards(e){var t;if(!e)e=(t=this.getCurrentTokenContext())===null||t===void 0?void 0:t.originId;if(!this.cards){let e=this.tokenDef.documentElement.getElementsByTagName("ts:card");this.cards=[];for(let t in e){if(!e.hasOwnProperty(t))continue;const r=new Card(this,e[t]);this.cards.push(r)}}if(e){return this.cards.filter((t=>t.origins.length===0||t.origins.indexOf(e)>-1))}return this.cards}getContracts(e=false){if(!this.contracts){let e=this.tokenDef.documentElement.getElementsByTagName("ts:contract");this.contracts={};for(let t in e){if(!e.hasOwnProperty(t))continue;const r=new Contract(e[t]);this.contracts[r.getName()]=r}}if(e){const e=this.getOrigins();const t={};for(const r in this.contracts){if(e[r])t[r]=this.contracts[r]}return t}return this.contracts}getOrigins(){if(!this.origins){const e=this.tokenDef.documentElement.getElementsByTagName("ts:origins");this.origins={};for(let t in e[0].children){const r=e[0].children[t];if(!r.tagName)continue;if(r.tagName=="ts:ethereum"){const e=r.getAttribute("contract");this.origins[e]=new Origin(this,e,"contract")}else if(r.tagName=="ts:attestation"){const e=r.getAttribute("name");this.origins[e]=new Origin(this,e,"attestation")}else{console.warn("Token origin with tag "+r.tagName+" is not supported")}}}return this.origins}getContractByName(e){const t=this.getContracts();if(!t[e])throw new Error("Contract with name "+e+" was not found in the TSML");return t[e]}getViewContent(e){const t=this.tokenDef.documentElement.getElementsByTagName("ts:viewContent");for(let r in t){if(t[r].getAttribute("name")===e){return t[r].children}}return null}async getTokenMetadata(e=false,t=false){if(!this.tokenMetadata||e){this.emitEvent("TOKENS_LOADING");const e=await this.resolveTokenMetadata(t);this.tokenMetadata={};const r=this.getMetadata();for(let t of e){if(this.meta){if(!t.image&&r.iconUrl&&r.iconUrl.trim())t.image=r.iconUrl;if(!t.description&&r.description&&r.description.trim())t.description=r.description;if(t.tokenDetails)for(let e of t.tokenDetails){if(!e.image&&r.iconUrl&&r.iconUrl.trim())e.image=r.iconUrl;if(!e.description&&r.description&&r.description.trim())e.description=r.description}}this.tokenMetadata[t.originId]=t}for(const e of this.getAttestationDefinitions()){const t=e.name;const r={originId:t,blockChain:"offchain",chainId:0,tokenType:"eas",tokenDetails:[],name:e.meta.name,image:e.meta.image,description:e.meta.description,decimals:0,balance:0};for(const t of await this.engine.getAttestationManager().getAttestations(e)){r.balance++;const e=t.meta,{name:n,description:i,image:s,attributes:a}=e,o=__rest(e,["name","description","image","attributes"]);const f=Object.assign(Object.assign({},t),{meta:o,abiEncoded:Attestation.getAbiEncodedEasAttestation(t.decodedToken)});r.tokenDetails.push({collectionDetails:r,collectionId:t.collectionId,tokenId:t.tokenId,name:n,description:i,image:s,attributes:a,data:f})}this.tokenMetadata[r.originId]=r}this.emitEvent("TOKENS_UPDATED",{tokens:this.tokenMetadata})}return this.tokenMetadata}setTokenMetadata(e){const t={};for(let r of e){t[r.originId]=r}this.tokenMetadata=t;this.emitEvent("TOKENS_UPDATED",{tokens:this.tokenMetadata})}async resolveTokenMetadata(e){var t;const r=(t=this.tokenDiscoveryAdapter)!==null&&t!==void 0?t:await this.engine.getTokenDiscoveryAdapter();const n=this.buildTokenDiscoveryData();if(!n.length)return[];return await r.getTokens(n,e)}getTokenOriginData(){return this.buildTokenDiscoveryData()}async getTokenContextData(e){var t,r,n,i,s,a;let o;if(e){o=this.tokenMetadata[e.originId];let t=undefined;if(o.tokenDetails)for(const[r,n]of Object.entries(o.tokenDetails)){if(n.tokenId===e.selectedTokenId){t=r;break}}o=Object.assign(Object.assign({},this.tokenMetadata[e.originId]),{selectedTokenId:e.selectedTokenId,selectedTokenIndex:t})}else{o=this.tokenContext}let f;if(o){const e=o.selectedTokenIndex!==undefined?o.tokenDetails[o.selectedTokenIndex]:null;f={name:(t=e===null||e===void 0?void 0:e.name)!==null&&t!==void 0?t:o.name,description:(r=e===null||e===void 0?void 0:e.description)!==null&&r!==void 0?r:o.description,label:o.name,symbol:o.symbol,_count:o.balance?o.balance.toString():"1",contractAddress:o.contractAddress,chainId:o.chainId,tokenId:o.selectedTokenId,ownerAddress:await this.getCurrentOwnerAddress(),image_preview_url:(n=e===null||e===void 0?void 0:e.image)!==null&&n!==void 0?n:o.image};if(e){f.tokenInfo={collectionId:e.collectionId,tokenId:e.tokenId,type:o.tokenType,name:(i=e.name)!==null&&i!==void 0?i:e.data.title,description:e.description,image:e.image,attributes:(s=e.attributes)!==null&&s!==void 0?s:[],data:e.data};if((a=e===null||e===void 0?void 0:e.data)===null||a===void 0?void 0:a.abiEncoded){f.attestation=e.data.abiEncoded.attestation;f.attestationSig=e.data.abiEncoded.signature}}}else{const e=this.getContracts(true);const t=e[Object.keys(e)[0]].getFirstAddress();f={name:this.getName(),label:this.getLabel(),contractAddress:t===null||t===void 0?void 0:t.address,chainId:t===null||t===void 0?void 0:t.chain,ownerAddress:await this.getCurrentOwnerAddress()}}return f}async getCurrentOwnerAddress(){try{const e=await this.engine.getWalletAdapter();return await e.getCurrentWalletAddress()}catch(e){console.warn(e)}return ZeroAddress}buildTokenDiscoveryData(e=true){const t=this.getContracts(e);const r=[];for(let e in t){const n=t[e];const i=n.getAddresses();for(let t in i){r.push({originId:e,blockChain:"eth",tokenType:n.getInterface(),chainId:i[t].chain,contractAddress:i[t].address})}}return r}setTokenDiscoveryAdapter(e){this.tokenDiscoveryAdapter=e}setCurrentTokenContext(e,t=null){var r;if(!this.tokenMetadata[e]){throw new Error("Cannot set token context: contractName was not found")}if(t==null){this.tokenContext=this.tokenMetadata[e];return}if(!((r=this.tokenMetadata[e].tokenDetails)===null||r===void 0?void 0:r[t])){throw new Error("Cannot set token context: contractName was not found")}this.tokenContext=this.tokenMetadata[e];this.tokenContext.originId=e;this.tokenContext.selectedTokenIndex=t;this.tokenContext.selectedTokenId=this.tokenMetadata[e].tokenDetails[t].tokenId;if(this.hasViewBinding()){const e=this.getViewController().getCurrentCard();if(e){this.getViewController().updateCardData()}}}getCurrentTokenContext(){return this.tokenContext}getAttributes(){if(!this.attributes){this.attributes=new Attributes$2(this,this.tokenDef.documentElement)}return this.attributes}getAttestationDefinitions(e=true){if(!this.attestationDefinitions){this.attestationDefinitions=new AttestationDefinitions(this,this.tokenDef.documentElement)}if(e)this.attestationDefinitions.getOriginDefinitions();return this.attestationDefinitions}getSelections(){if(!this.selections){this.selections=new Selections(this,this.tokenDef.documentElement)}return this.selections}getAsnModuleDefinition(e){const t=this.tokenDef.getElementsByTagName("asnx:module")[0];return t.querySelector("[name="+e+"]")}async executeTransaction(e,t,r=true){var n,i,s;t({status:"started"});try{const a=await this.engine.getWalletAdapter();const o=e.getTransactionInfo();const f=(i=(n=this.getCurrentTokenContext())===null||n===void 0?void 0:n.chainId)!==null&&i!==void 0?i:await a.getChain();const c=o.contract.getAddressByChain(f,true);const u=o.contract.getAbi("error");const l=[];for(let e in o.args){l.push(await o.args[e].getEthersArgument(this.getCurrentTokenContext()))}const h=o.value?await((s=o===null||o===void 0?void 0:o.value)===null||s===void 0?void 0:s.getValue(this.getCurrentTokenContext())):null;await a.sendTransaction(c.chain,c.address,o.function,l,[],h,r,t,u)}catch(e){if(e.message.indexOf("ACTION_REJECTED")>-1)throw new Error("Transaction rejected");throw e}}}class AttestationManager{constructor(e,t){this.engine=e;this.storageAdapter=t}async readMagicLink(e){var t;const r=(t=e.get("ticket"))!==null&&t!==void 0?t:e.get("attestation");const n=e.get("secret");const i=e.has("id")?e.get("id"):e.get("mail");const s=e.has("type")?e.get("type"):"eas";if(s!=="eas")throw new Error("Attestation type "+s+" is not supported");if(!r)throw new Error("Incomplete token params in URL.");const a=new Attestation(s,r,{commitmentId:i,commitmentSecret:n});await a.verifyAttestation();return a}async saveAttestation(e,t){const r=await t.getDatabaseRecord(e);r.authoritativeTokenScript=e.getTokenScript().getSourceInfo();return this.storageAdapter.saveAttestation(r)}async getAttestations(e){const t=e.calculateAttestationCollectionHashes();const r=await this.storageAdapter.getAttestations(t);for(const t of r){const r=e.meta;t.meta=Object.assign(Object.assign({},t.meta),{name:r.name,description:r.description,image:r.image,attributes:this.getMetaAttributes(r,t)})}return r}getMetaAttributes(e,t){const r=[];for(const n of e.attributes){const e=n.name.split(".");let i=null;switch(e[0]){case"data":if(t.decodedData[e[1]])i=t.decodedData[e[1]];break;case"meta":if(t.meta[e[1]])i=t.meta[e[1]];break;default:if(t.decodedToken.message[e[0]])i=t.decodedToken.message[e[0]]}if(!i){console.warn("attribute field value for "+n.name+" was not found");continue}r.push({trait_type:n.label,display_type:n.display_type,value:i})}return r}async removeAttestation(e,t){return this.storageAdapter.removeAttestation(e,t)}}const DEFAULT_CONFIG={ipfsGateway:"https://smart-token-labs-demo-server.mypinata.cloud/ipfs/",noLocalStorage:false,trustedKeys:[]};var ScriptSourceType;(function(e){e["SCRIPT_URI"]="scriptUri";e["URL"]="url";e["UNKNOWN"]="unknown"})(ScriptSourceType||(ScriptSourceType={}));class TokenScriptEngine{constructor(e,t,r,n,i){this.getWalletAdapter=e;this.getTokenDiscoveryAdapter=t;this.getAttestationStorageAdapter=r;this.getLocalStorageAdapter=n;this.config=i;this.repo=new Repo(this);this.IPFS_REPLACE_GATEWAYS=["ipfs://","https://ipfs.io/ipfs/","https://gateway.pinata.cloud/ipfs/"];if(this.config){this.config=Object.assign(Object.assign({},DEFAULT_CONFIG),this.config)}else{this.config=DEFAULT_CONFIG}if(this.getAttestationStorageAdapter)this.attestationManager=new AttestationManager(this,this.getAttestationStorageAdapter())}getAttestationManager(){if(!this.attestationManager)throw new Error("Attestation storage adapter not provided");return this.attestationManager}async importAttestationUsingTokenScript(e){const t=await this.getAttestationManager().readMagicLink(e);let r;if(e.has("scriptURI")){r=e.get("scriptURI")}else{const e=await t.getAttestationData();if(e.scriptURI){r=e.scriptURI}else{throw new Error("scriptURI parameter not provided")}}const n=await this.getTokenScriptFromUrl(this.processIpfsUrl(r));const i=n.getAttestationDefinitions();for(const e of i){const r=await t.getCollectionHash(e);const i=e.calculateAttestationCollectionHashes();if(i.indexOf(r)===-1)continue;console.log("Successfully matched collection hash to tokenscript attestation definition!");await this.attestationManager.saveAttestation(e,t);return{definition:e,tokenScript:n}}throw new Error("The provided TokenScript does not contain an attestation definition for the included attestation.")}async getTokenScript(e,t,r){const n=await this.repo.getTokenScript(e,r);return await this.initializeTokenScriptObject(n.xml,ScriptSourceType.SCRIPT_URI,e,n.sourceUrl,t)}async getTokenScriptFromUrl(e,t){const r=await fetch(e);if(r.status<200||r.status>399){throw new Error("Failed to load URL: "+r.statusText)}return await this.initializeTokenScriptObject(await r.text(),ScriptSourceType.URL,e,e,t)}async loadTokenScript(e,t,r=ScriptSourceType.UNKNOWN,n,i){return await this.initializeTokenScriptObject(e,r,n,i,t)}async initializeTokenScriptObject(e,t,r,n,i){try{let s;if(typeof process!=="undefined"&&process.release.name==="node"){const{JSDOM:e}=await import("./p-d5aa2c2f.js").then((function(e){return e.a}));const t=new e;s=new t.window.DOMParser}else{s=new DOMParser}let a=s.parseFromString(e,"text/xml");return new TokenScript(this,a,e,t,r,n,i)}catch(e){throw new Error("Failed to parse tokenscript definition: "+e.message)}}async signPersonalMessage(e){try{return await(await this.getWalletAdapter()).signPersonalMessage(e)}catch(e){throw new Error("Signing failed: "+e.message)}}processIpfsUrl(e){for(let t of this.IPFS_REPLACE_GATEWAYS){if(this.config.ipfsGateway.indexOf(t)===0){continue}if(e.indexOf(t)===0){e=e.replace(t,this.config.ipfsGateway);break}}return e}async getScriptUri(e,t){var r,n;const i=await fetch(`https://store-backend.smartlayer.network/tokenscript/${t.toLowerCase()}/chain/${e}/script-uri`);const s=await i.json();if(!s.scriptURI)return null;if((r=s.scriptURI.erc5169)===null||r===void 0?void 0:r.length)return s.scriptURI.erc5169[0];if((n=s.scriptURI.offchain)===null||n===void 0?void 0:n.length)return s.scriptURI.offchain[0];return null}}var o;function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i.apply(this,arguments)}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}!function(e){e.EmptyError="EmptyError",e.RevertError="RevertError",e.PanicError="PanicError",e.CustomError="CustomError",e.UserRejectError="UserRejectError",e.RpcError="RpcError",e.UnknownError="UnknownError"}(o||(o={}));var c="0x08c379a0",s="0x4e487b71",l=function(e,t){return e&&""!==e.trim()?e:t},d=function(e){var t=e.data,r=e.fragment,n=e.args,s=e.selector,a=e.name,o={type:e.type,reason:l(e.reason,null),data:null!=t?t:null,fragment:null,args:null!=n?n:new Result,selector:null!=s?s:null,name:null!=a?a:null,signature:null};return r&&(o=i({},o,new ErrorDescription(r,r.selector,n))),o},f=function(e){var t=e.data,r=e.name;return d({type:o.UnknownError,reason:l(e.reason,"Unknown error"),data:t,name:r})},v=function(){function e(){}var t=e.prototype;return t.predicate=function(e){return"0x"===e},t.handle=function(e){return d({type:o.EmptyError,data:{data:e}.data})},e}(),m=function(){function e(){}var t=e.prototype;return t.predicate=function(e){return null==e?void 0:e.startsWith(c)},t.handle=function(e){var t,r=e.slice(10),n=new AbiCoder;try{var i=ErrorFragment.from("Error(string)"),s=n.decode(i.inputs,"0x"+r);return d({type:o.RevertError,reason:(t={data:e,fragment:i,reason:s[0],args:s}).reason,data:t.data,fragment:t.fragment,args:t.args})}catch(t){return f({reason:"Unknown error returned",data:e})}},e}(),p=function(){function e(){}var t=e.prototype;return t.predicate=function(e){return null==e?void 0:e.startsWith(s)},t.handle=function(e){var t,r=e.slice(10),n=new AbiCoder;try{var i,s=ErrorFragment.from("Panic(uint256)"),a=n.decode(s.inputs,"0x"+r),c=null!=(i=function(e){switch(e){case 0x0n:return"Generic compiler inserted panic";case 0x1n:return"Assertion error";case 0x11n:return"Arithmetic operation underflowed or overflowed outside of an unchecked block";case 0x12n:return"Division or modulo division by zero";case 0x21n:return"Tried to convert a value into an enum, but the value was too big or negative";case 0x22n:return"Incorrectly encoded storage byte array";case 0x31n:return".pop() was called on an empty array";case 0x32n:return"Array accessed at an out-of-bounds or negative index";case 0x41n:return"Too much memory was allocated, or an array was created that is too large";case 0x51n:return"Called a zero-initialized variable of internal function type"}}(a[0]))?i:"Unknown panic code";return d({type:o.PanicError,reason:(t={data:e,fragment:s,reason:c,args:a}).reason,data:t.data,args:t.args})}catch(t){return f({reason:"Unknown panic error",data:e})}},e}(),g=function(){function e(){}var t=e.prototype;return t.predicate=function(e){return e&&"0x"!==e&&!(null!=e&&e.startsWith(c))&&!(null!=e&&e.startsWith(s))},t.handle=function(e,t){var r=t.errorInterface,n={data:e};if(r){var s=r.parseError(e);s&&(n=i({},n,{fragment:s.fragment,reason:s.name,args:s.args}))}return function(e){var t=e.data,r=e.reason,n=e.fragment,i=e.args,s=t.slice(0,10);return d({type:o.CustomError,reason:l(r,"No ABI for custom error "+s),data:t,fragment:n,args:i,selector:s,name:s})}(n)},e}(),y=function(){function e(){}var t=e.prototype;return t.predicate=function(e,t){var r;return!e&&(null==t||null==(r=t.message)?void 0:r.includes("rejected transaction"))},t.handle=function(e,t){var r,n,i,s;return s=void 0===(i=(n={data:null,reason:null!=(r=t.error.message)?r:"The transaction was rejected"}).data)?null:i,d({type:o.UserRejectError,reason:l(n.reason,"User has rejected the transaction"),data:s})},e}(),h=function(){function e(){}var t=e.prototype;return t.predicate=function(e,t){var r;return!e&&t.message&&!(null!=t&&null!=(r=t.message)&&r.includes("rejected transaction"))&&void 0!==t.code},t.handle=function(e,t){var r,n,i,s,a,f,c,u=t.error,h=null!=(r=null!=(n=null==(i=u.info)||null==(s=i.error)?void 0:s.message)?n:u.shortMessage)?r:u.message;return c=(a={data:null,name:u.code,reason:h}).name,d({type:o.RpcError,reason:l(a.reason,"Error from JSON RPC provider"),data:null,name:null!=(f=null==c?void 0:c.toString())?f:null})},e}(),E=function(){function e(e,t){this.errorInterface=void 0,this.errorHandlers=[],this.errorInterface=t,this.errorHandlers=e.map((function(e){return{predicate:e.predicate,handle:e.handle}}))}var t=e.prototype;return t.getContractOrTransactionError=function(e){try{var t=e.receipt;return t?Promise.resolve(this.getTransactionError(t)).then((function(t){return t||e})):Promise.resolve(e)}catch(e){return Promise.reject(e)}},t.getTransactionError=function(e){try{if(!e||0!==e.status)return Promise.resolve(void 0);var t=e.provider;return Promise.resolve(t.getTransaction(e.hash)).then((function(e){return function(r,n){try{var s=Promise.resolve(t.call(i({},e,{maxFeePerGas:void 0,maxPriorityFeePerGas:void 0}))).then((function(){return null}))}catch(e){return e}return s&&s.then?s.then(void 0,(function(e){return e})):s}()}))}catch(e){return Promise.reject(e)}},t.getDataFromError=function(e){var t,r,n=null!=(t=e.data)?t:null==(r=e.error)?void 0:r.data;if(void 0!==n){var i="string"==typeof n?n:n.data;if("object"==typeof i&&i.data&&(i=i.data),void 0!==i&&"string"==typeof i)return i}},t.decode=function(e){try{var t,r=this;return e instanceof Error?Promise.resolve(r.getContractOrTransactionError(e)).then((function(e){for(var t,n,i=r.getDataFromError(e),s=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}(e))){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(r.errorHandlers);!(n=s()).done;){var a=n.value,o=a.handle;if((0,a.predicate)(i,e))return o(i,{errorInterface:r.errorInterface,error:e})}return f({data:i,reason:null!=(t=null==e?void 0:e.message)?t:"Unexpected error",name:null==e?void 0:e.name})})):Promise.resolve(f({data:void 0,reason:null!=(t=e.message)?t:"Invalid error"}))}catch(e){return Promise.reject(e)}},e.create=function(t,r){void 0===r&&(r={});var n,i=r.additionalErrorHandlers;if(t){var s=t.flatMap((function(e){return e instanceof Interface?e.fragments.filter((function(e){return ErrorFragment.isFragment(e)})):e.filter((function(e){return"error"===e.type||ErrorFragment.isFragment(e)}))}));n=new Interface(s)}return new e([new v,new m,new p,new g,new y,new h].concat(null!=i?i:[]),n)},e}();class EthersAdapter{constructor(e,t){this.getWalletEthersProvider=e;this.chainConfig=t}async getEthersProvider(){this.ethersProvider=await this.getWalletEthersProvider();return this.ethersProvider}async signPersonalMessage(e){const t=await this.getEthersProvider();return(await t.getSigner()).signMessage(e)}async call(e,t,r,n,i,s=[]){console.log("Call ethereum method. chain "+e+"; contract "+t+"; method "+r+";");const a=await this.getEthersContractInstance(e,t,r,n,i,"view",s);r=`${r}(${n.map((e=>e.type)).join(",")})`;return await a.getFunction(r).staticCall(...n.map((e=>e.value)))}async sendTransaction(e,t,r,n,i,s,a=true,f,c=[]){console.log("Send ethereum transaction. chain "+e+"; contract "+t+"; method "+r+"; value "+s+"; args",n);await this.switchChain(e);const u=await this.getEthersContractInstance(e,t,r,n,i,s?"payable":"nonpayable",c);const l={};if(s)l.value=s;let h;r=`${r}(${n.map((e=>e.type)).join(",")})`;try{h=await u[r](...n.map((e=>e.value)),l)}catch(e){const t=E.create(c);const r=await t.decode(e);console.error(e);console.log("Decoded error: ",r);if(r.type!=o.EmptyError&&r.type!=o.UnknownError){let t;if(r.type===o.UserRejectError&&typeof e==="string"){t=e}else{t="Contract execution failed: ";if(r.reason==="could not coalesce error"&&e.message){t+=e.message}else{t+=typeof r.reason==="object"?JSON.stringify(r.reason):r.reason}}if(typeof e==="string"){e=new Error(t)}else{e.message=t}}throw e}console.log("Transaction submitted: "+h.hash);f({status:"submitted",txNumber:h.hash});if(a)await h.wait().then((t=>{if(t.status!==1){console.error(t);throw new Error("Transaction failed: "+t.status)}console.log("Transaction completed!");f({status:"confirmed",txNumber:h.hash,txLink:this.chainConfig[e].explorer?this.chainConfig[e].explorer+h.hash:null});return t}));return h}async getEthersContractInstance(e,t,r,n,i,s,a=[]){const o={name:r,inputs:n,outputs:typeof i[0]==="string"?i.map(((e,t)=>{var r;const n=e==="uint"?"uint256":e;return{name:(r=e.name)!==null&&r!==void 0?r:"",type:n,internalType:n}})):i,stateMutability:s,type:"function"};console.log(o);const f=s!=="view";const c=f?await(await this.getEthersProvider()).getSigner():new JsonRpcProvider(this.getRpcUrl(e),e,{staticNetwork:new Network(e.toString(),e)});return new Contract$1(t,[o,...a],c)}getRpcUrl(e){if(!this.chainConfig[e])throw new Error("RPC URL is not configured for ethereum chain: "+e);return this.chainConfig[e].rpc}async getChain(){const e=await this.getEthersProvider();const t=await e._detectNetwork();return Number(t.chainId)}async switchChain(e){const t=await this.getEthersProvider();if(e!=await this.getChain()){console.log("Switch chain: ",e);try{await t.send("wallet_switchEthereumChain",[{chainId:"0x"+e.toString(16)}])}catch(t){console.error(t);throw new Error("Connected to wrong chain, please switch the chain to chainId: "+e+", error: "+t.message)}}}async getCurrentWalletAddress(){const e=await this.getEthersProvider();const t=await e.listAccounts();if(!(t===null||t===void 0?void 0:t.length)){throw new Error("Wallet could not connect or there is no accounts created")}return t[0].address}async getEvents(e,t,r,n){console.log("Get ethereum events. chain "+e+"; contract "+t+"; event "+r+";");console.log(n);const i=new JsonRpcProvider(this.getRpcUrl(e),e,{staticNetwork:new Network(e.toString(),e)});const s=new Contract$1(t,[{name:r,type:"event",inputs:n}],i);const a=n.map((e=>e.value));return await s.queryFilter(s.filters[r](...a))}async rpcProxy(e){return(await this.getEthersProvider()).send(e.method,e.data)}}class AttestationStorageAdapter{async getAttestations(e){return(await dbProvider.attestations.where("collectionId").anyOf(e)).toArray()}async removeAttestation(e,t){await dbProvider.attestations.where({collectionId:e,tokenId:t}).delete()}async saveAttestation(e){await dbProvider.attestations.put(e)}}const DEFAULT_TARGET_ORIGIN="*";const DEFAULT_TIMEOUT_MILLISECONDS=12e4;const JSON_RPC_VERSION="2.0";function getUniqueId(){return Math.floor(Math.random()*Number.MAX_SAFE_INTEGER)}class RpcError extends Error{constructor(e){super(e.message);this.isRpcError=true;this.code=e.code;this.data=e.data}}class IFrameEthereumProvider{get isIFrame(){return true}get currentProvider(){return this}constructor({targetOrigin:e=DEFAULT_TARGET_ORIGIN,timeoutMilliseconds:t=DEFAULT_TIMEOUT_MILLISECONDS,eventSource:r=window,eventTarget:n=window.parent}={}){this._isSigner=true;this.completers={};this.handleEventSourceMessage=e=>{if(this.targetOrigin!=="*"&&e.origin.indexOf(this.targetOrigin)!==0)return;const t=e.data;if(!t){return}const r=t;if(r.jsonrpc!==JSON_RPC_VERSION){return}console.log("[IFRAME_RPC] response received: ",t);if(typeof r.id!=="undefined"&&r.id!==null){const e=this.completers[""+r.id];if(e){if("error"in r||"result"in r){e.resolve(r)}else{e.reject(new Error("Response from provider did not have error or result key"))}delete this.completers[r.id]}}};this.targetOrigin=e;this.timeoutMilliseconds=t;this.eventSource=r;this.eventTarget=n;this.eventSource.addEventListener("message",this.handleEventSourceMessage)}async execute(e,t){const r=getUniqueId();const n=Object.assign({jsonrpc:JSON_RPC_VERSION,id:r,method:e},typeof t==="undefined"?null:{params:t});const i=new Promise(((e,t)=>this.completers[r]={resolve:e,reject:t}));this.eventTarget.postMessage(n,this.targetOrigin);console.log("[IFRAME_RPC] request: ",n);setTimeout((()=>{if(this.completers[r]){this.completers[r].reject(new Error(`RPC ID "${r}" timed out after ${this.timeoutMilliseconds} milliseconds`));delete this.completers[r]}}),this.timeoutMilliseconds);return i}send(e,t){this.execute(e.method,e.params).then((e=>{if("error"in e){t(e.error.code+": "+e.error.message,null)}else{t(null,e.result)}}))}async sendAsync(e,t){try{const r=await this.execute(e.method,e.params);t(null,r)}catch(e){t(e.code+": "+e.message,null)}}async request(e){const t=await this.execute(e.method,e.params);if("error"in t){throw new RpcError(t.error)}return t.result}}class LocalStorageAdapter{clear(e){dbProvider.tsLocalStorage.where({tokenScriptId:e}).delete()}async getAllItems(e){const t=await dbProvider.tsLocalStorage.where({tokenScriptId:e}).toArray();const r=t.reduce(((e,t)=>{e[t.key]=t.value;return e}),{});console.log(r);return r}removeItem(e,t){dbProvider.tsLocalStorage.where({tokenScriptId:e,key:t}).delete()}setItem(e,t,r){dbProvider.tsLocalStorage.put({tokenScriptId:e,key:t,value:r})}}const appCss=":host{height:100dvh}.app-container{min-height:100dvh;display:flex;flex-direction:column}header{background:#000;color:white;height:56px;display:flex;align-items:center;box-shadow:0 2px 5px 0 rgba(0, 0, 0, 0.26)}.header-icon{height:35px;width:auto;padding-left:25px}header h1{margin:5px 0 0}h1{font-size:1.4rem;font-weight:500;padding:0 12px}main{display:flex;flex-direction:column;flex-grow:1}#ts-loader{display:none;position:absolute;z-index:100;top:0;width:100%;height:100%;align-items:center;justify-content:center;background-color:rgba(87, 87, 87, 0.67)}";const AppRootStyle0=appCss;const IFRAME_PROVIDER_VIEWS=["joyid-token","sts-token"];const initViewerType=e=>{let t;switch(e.get("viewType")){case"integration":t="integration";break;case"tabbed":t="tabbed";break;case"joyid-token":t="joyid-token";break;case"opensea":t="opensea";break;case"sts-token":t="sts-token";break;case"alphawallet":t="alphawallet";break;case"new":default:t="new"}return t};const AppRoot=class{constructor(e){registerInstance(this,e);this.discoveryAdapter=new DiscoveryAdapter;this.attestationStorageAdapter=new AttestationStorageAdapter;this.tsLocalStorageAdapter=new LocalStorageAdapter;this.params=new URLSearchParams(document.location.search);this.viewerType=initViewerType(this.params);dbProvider.checkCompatibility();this.tsEngine=new TokenScriptEngine((async()=>this.getWalletAdapter()),(async()=>this.discoveryAdapter),(()=>this.attestationStorageAdapter),(()=>this.tsLocalStorageAdapter),{noLocalStorage:this.viewerType==="opensea",trustedKeys:[{issuerName:"Smart Token Labs",valueType:"ethAddress",value:"0x1c18e4eF0C9740e258835Dbb26E6C5fB4684C7a0"},{issuerName:"Smart Token Labs",valueType:"ethAddress",value:"0xf68b9DbfC6C3EE3323Eb9A3D4Ed8eb9d2Cb45A30"}]})}async getWalletAdapter(){let e;if(this.shouldUseIframeProvider()){e=async()=>{if(!this.iframeProvider)this.iframeProvider=new BrowserProvider$1(new IFrameEthereumProvider,"any");return this.iframeProvider}}else if(this.viewerType==="opensea"){e=async()=>{throw new Error("PROVIDER DISABLED")}}else if(this.viewerType==="alphawallet"){e=async()=>{const e=(await Promise.resolve().then((function(){return Web3WalletProvider$1}))).Web3WalletProvider;if(!e.isWalletConnected())await e.connectWith("MetaMask");return(await e.getWallet(true)).provider}}else{e=async()=>(await(await Promise.resolve().then((function(){return Web3WalletProvider$1}))).Web3WalletProvider.getWallet(true)).provider}return new EthersAdapter(e,CHAIN_CONFIG)}shouldUseIframeProvider(){return IFRAME_PROVIDER_VIEWS.indexOf(this.viewerType)>-1&&!this.params.has("noIframeProvider")}showLoaderHandler(e){this.showTsLoader()}showTsLoader(){document.getElementById("ts-loader").style.display="flex"}hideLoaderHandler(e){this.hideTsLoader()}hideTsLoader(){document.getElementById("ts-loader").style.display="none"}async loadTokenscript(e,t,r){switch(e){case"resolve":return this.tsEngine.getTokenScript(t);case"file":if(typeof r==="string"){return this.tsEngine.loadTokenScript(r)}else{return this.loadTokenScriptFromFile(r)}case"url":return this.tsEngine.getTokenScriptFromUrl(t)}}async loadTokenScriptFromFile(e){return new Promise(((t,r)=>{if(e){this.showTsLoader();const n=new FileReader;n.onload=async function(e){if(typeof e.target.result==="string"){try{t(await this.tsEngine.loadTokenScript(e.target.result))}catch(e){r("Failed to load TokenScript: "+e.message)}}}.bind(this);n.onerror=function(e){r("Failed to load file: "+e.message)}.bind(this);n.readAsText(e,"UTF-8");return}r("No file selected")}))}showToastHandler(e){this.showToast(e.detail.type,e.detail.title,e.detail.description)}async showToast(e,t,r){return showToastNotification(e,t,r)}async componentDidLoad(){if(!this.shouldUseIframeProvider()&&this.viewerType!=="opensea"){const e=(await Promise.resolve().then((function(){return Web3WalletProvider$1}))).Web3WalletProvider;e.setWalletSelectorCallback((async()=>this.walletSelector.connectWallet()));await e.loadConnections()}}render(){return h$1(Host,{key:"ce83bc304bcc84e18da156011fa47f22e61af28d"},h$1("div",{key:"bcfe5d3f655484d116396faad7268df130a93318",class:"app-container"},h$1("cb-toast",{key:"a0b2ba39fe2773de70ad96ce417dde28ca8473ec",class:"toast",style:{zIndex:"500"}}),h$1("header",{key:"b042c4edfc2e0f1f7be62a2398267956c88b12d9"},h$1("img",{key:"49787814f89ac30dd70dba9329bfb9a70a33d34c",class:"header-icon",alt:"TokenScript icon",src:"assets/icon/tokenscript-logo.svg"})),h$1("main",{key:"8caad9afc38b217ef970710b473c020e09398180"},this.viewerType==="tabbed"?h$1("tabbed-viewer",{app:this}):"",this.viewerType==="integration"?h$1("integration-viewer",{app:this}):"",this.viewerType==="new"?h$1("new-viewer",{app:this}):"",this.viewerType==="joyid-token"?h$1("token-viewer",{app:this}):"",this.viewerType==="sts-token"?h$1("sts-viewer",{app:this}):"",this.viewerType==="opensea"?h$1("opensea-viewer",{app:this}):"",this.viewerType==="alphawallet"?h$1("alphawallet-viewer",{app:this}):""),h$1("div",{key:"764f336c0c291a6f0ce1470615e43448b71377d8",id:"ts-loader"},h$1("loading-spinner",{key:"e983817d7dcec8122a85e3c374cbd4a562ef2345"}))),!this.shouldUseIframeProvider()&&this.viewerType!=="opensea"?h$1("wallet-selector",{ref:e=>this.walletSelector=e}):"")}get host(){return getElement(this)}};AppRoot.style=AppRootStyle0;const attributeTableCss=":host{background:none;border:none}.attribute-widget{position:relative;display:inline-block;min-width:50px;min-height:50px}.attribute-container{position:relative}.btn-close-attributes{width:25px;height:25px;font-size:16px;line-height:16px;margin:10px}table{background:#fff;text-align:left;border:#000 solid 1px}.attribute-table td,.attribute-table th{padding:8px}";const AttributeTableStyle0=attributeTableCss;const AttributeTable=class{constructor(e){registerInstance(this,e);this.isOpen=false}render(){return h$1("div",{key:"adae71314d131f4b1d1ff68722c1e17be46a9aa1",class:"attribute-widget"},h$1("div",{key:"7aaf997415cb925c279a5583ee05c21a2c65db51",class:"attribute-container",style:{display:this.isOpen?"block":"none"}},h$1("table",{key:"60f5cd23fc6201700aba70c20c265f62544ad22b",class:"attribute-table"}),h$1("button",{key:"83874f4a425c4306fb24e1107cf65028e2475659",class:"close-btn btn-close-attributes",title:"Close attributes",onClick:()=>{this.isOpen=false}},"X")),h$1("button",{key:"0752c10325157da48a96450e9206dd1f4fabbf06",class:"close-btn",style:{display:this.isOpen?"none":"block"},title:"View TokenScript attributes",onClick:()=>{this.isOpen=true}},"?"))}};AttributeTable.style=AttributeTableStyle0;const cardModalCss=".close-btn{position:absolute;right:0;top:0;margin:20px;font-size:22px;font-weight:bold;width:35px;height:35px;border:#a6a6a6;color:#676767;border-radius:5px;padding:4px 6px;cursor:pointer !important}.view-container{width:100%;padding:20px;position:fixed;top:0;min-height:100%;background:#1a1a1ae0;z-index:100;height:100%}@media screen and (max-width: 480px){.view-container{padding:5px}.close-btn{margin:10px}}.view-container attribute-table{position:absolute;bottom:10px}";const CardModalStyle0=cardModalCss;const CardModal=class{constructor(e){registerInstance(this,e);this.showToast=createEvent(this,"showToast",7);this.tokenScript=undefined}async loadTs(){if(!this.viewBinding){this.viewBinding=new ViewBinding$1(this.host,this.showToast)}this.viewBinding.setTokenScript(this.tokenScript);this.tokenScript.setViewBinding(this.viewBinding)}componentDidLoad(){if(this.tokenScript)this.loadTs()}render(){return h$1(Host,{key:"7d56f117e5d80107aa7beec7e3912bcd5ae99c30",class:"view-container",style:{display:"none"}},h$1("button",{key:"d5a57c544f486c4a7c158492ca3a5e7dd10be593",class:"close-btn",onClick:()=>{this.tokenScript.getViewController().unloadTokenCard()}},"X"),h$1("card-view",{key:"7fdf514bbeedf02cdae434c9e8fae543046cd6e0"}),h$1("attribute-table",{key:"23c0c1013fc8408b33df97132842164f207341e8"}))}get host(){return getElement(this)}static get watchers(){return{tokenScript:["loadTs"]}}};CardModal.style=CardModalStyle0;const cardPopoverCss="card-popover .popover-container{padding:0 !important}.card-container{position:relative;max-width:500px;border-radius:4px;max-height:700px;display:flex;flex-direction:column;height:calc(100dvh - 80px);overflow:hidden}.view-loader{z-index:50;position:absolute;left:0;top:0;width:100%;height:100%;border-radius:4px;display:flex;align-items:center;justify-content:center;background-color:rgba(87, 87, 87, 0.50)}.iframe-wrapper{position:relative;flex-grow:1;display:flex}.tokenscript-frame{background:#fff;width:100%;flex-grow:1;border:none;border-radius:4px;box-sizing:border-box}.action-bar{height:35px;margin:4px 0;padding:0 5px}.action-btn{width:100%;height:100%}";const CardPopoverStyle0=cardPopoverCss;const CardPopover=class{constructor(e){registerInstance(this,e);this.showToast=createEvent(this,"showToast",7);this.tokenScript=undefined;this.loading=false;this.currentCard=undefined}async loadTs(){this.tokenScript.setViewBinding(this)}componentDidLoad(){if(this.tokenScript)this.loadTs();window.addEventListener("message",this.handlePostMessageFromView.bind(this));this.iframe.onload=()=>{this.hideLoader()}}hideLoader(){setTimeout((()=>this.loading=false),200)}getViewBindingJavascript(){return VIEW_BINDING_JAVASCRIPT}handlePostMessageFromView(e){var t,r;if(!this.iframe)return;if(e.source!==this.iframe.contentWindow){return}if(!((t=e.data)===null||t===void 0?void 0:t.method))return;this.handleMessageFromView(e.data.method,(r=e.data)===null||r===void 0?void 0:r.params)}async handleMessageFromView(e,t){await this.tokenScript.getViewController().handleMessageFromView(e,t)}async dispatchViewEvent(e,t,r){switch(e){case ViewEvent.TOKENS_UPDATED:const n={currentInstance:t};console.log("ViewEvent.TOKENS_UPDATED");this.postMessageToView(e,{oldTokens:n,updatedTokens:n,cardId:r});this.hideLoader();return;case ViewEvent.EXECUTE_CALLBACK:case ViewEvent.GET_USER_INPUT:case ViewEvent.ON_CONFIRM:case ViewEvent.TRANSACTION_EVENT:this.postMessageToView(e,Object.assign(Object.assign({},t),{id:r}));return}}postMessageToView(e,t){this.iframe.contentWindow.postMessage({method:e,params:t},"*")}dispatchRpcResult(e){return this.iframe.contentWindow.postMessage(e,"*")}async showTokenView(e,t){this.loading=true;await this.dialog.openDialog((()=>this.unloadTokenView()));this.currentCard=e;await AbstractViewBinding.injectContentView(this.iframe,e,this.tokenScript.getViewController())}async unloadTokenView(){await this.dialog.closeDialog();this.currentCard=null;this.iframe.srcdoc="<!DOCTYPE html>";const e=new URL(document.location.href);e.hash="";history.replaceState(undefined,undefined,e)}viewError(e){this.loading=false}viewLoading(){this.loading=true}async confirmAction(){this.loading=true;try{await this.tokenScript.getViewController().executeTransaction(this.currentCard,(e=>{showTransactionNotification(e,this.showToast)}))}catch(e){handleTransactionError(e,this.showToast)}this.loading=false}render(){var e,t,r;return h$1("popover-dialog",{key:"f2dc53024659ba1fd760d2fd3bc87cb0bb91c8fd",ref:e=>this.dialog=e},h$1("div",{key:"c0072bc8ee1adeb5561e8e483f6f1e93b377e8a5",slot:"outer-content",class:"view-loader",style:{display:this.loading?"flex":"none"}},h$1("loading-spinner",{key:"a621af758ae6f4c68b565f7e0c0175a6746dfa5c"})),h$1("div",{key:"b91d2ab7bacbff5b06ad491de4d8a95a35ca9ad3",class:"card-container view-container"},h$1("div",{key:"fced04c5c93230da99b751ee7394347037efe806",class:"iframe-wrapper"},h$1("iframe",{key:"750e6643db1711b636a96f209ffcba8a720f358d",ref:e=>this.iframe=e,class:"tokenscript-frame",sandbox:"allow-scripts allow-modals allow-forms allow-popups allow-popups-to-escape-sandbox"})),h$1("div",{key:"77948c34db30754878cc78f34ff292f3665363f5",class:"action-bar",style:{display:((e=this.currentCard)===null||e===void 0?void 0:e.type)=="action"&&((t=this.currentCard)===null||t===void 0?void 0:t.uiButton)?"block":"none"}},h$1("button",{key:"c76009de02f3d6e9e04879d8964b90b7ecb20eba",class:"action-btn btn btn-primary",onClick:()=>this.confirmAction()},(r=this.currentCard)===null||r===void 0?void 0:r.label))))}static get watchers(){return{tokenScript:["loadTs"]}}};CardPopover.style=CardPopoverStyle0;const cardViewCss=".card-container{position:relative;max-width:500px;margin:40px auto;border-radius:4px;max-height:700px;display:flex;flex-direction:column;height:calc(100% - 60px)}.view-loader{position:absolute;left:0;top:0;width:100%;height:100%;border-radius:4px;display:flex;align-items:center;justify-content:center;background-color:rgba(87, 87, 87, 0.67)}.iframe-wrapper{position:relative;flex-grow:1;display:flex}.tokenscript-frame{background:#fff;width:100%;flex-grow:1;border-radius:4px;box-sizing:border-box}.action-bar{height:35px;margin-top:4px}.action-btn{width:100%;height:100%}";const CardViewStyle0=cardViewCss;const CardView=class{constructor(e){registerInstance(this,e)}render(){return h$1("div",{key:"222ad2e52fa2719cc653b2d5cb18670e37138e56",class:"card-container"},h$1("div",{key:"26d3829a138f19b991590e3c740693cf153e9b4a",class:"iframe-wrapper"},h$1("div",{key:"c78d7b55940532ee02c596755c50f9c74a5f9fc1",class:"view-loader",style:{display:"none"}},h$1("loading-spinner",{key:"b7196fd49d4678ed188f84c61759ee4d25dd6ce9"})),h$1("iframe",{key:"22a89f4270cce75a557a11ec1604083a3c822709",class:"tokenscript-frame",sandbox:"allow-scripts allow-modals allow-forms allow-popups allow-popups-to-escape-sandbox"})),h$1("div",{key:"cb2492044e6959b8323f5a8b6dd6c22320292ebf",class:"action-bar",style:{display:"none"}},h$1("button",{key:"f807b4ce6a385a2ef8761a9eccead27dbd700f75",class:"action-btn btn btn-primary"})))}};CardView.style=CardViewStyle0;const cbToastCss='/*! tailwindcss v3.1.8 | MIT License | https://tailwindcss.com*/*,:after,:before{border:0 solid #e5e7eb;box-sizing:border-box}:after,:before{--tw-content:""}html{-webkit-text-size-adjust:100%;font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4}body,button{line-height:inherit;margin:0}button{color:inherit;font-family:inherit;font-size:100%;font-weight:inherit;padding:0;text-transform:none}[type=button],button{-webkit-appearance:button;background-color:transparent;background-image:none}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}p{margin:0}button{cursor:pointer}object,svg{display:block;vertical-align:middle}*,:after,:before{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-scroll-snap-strictness:proximity;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;}::-webkit-backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-scroll-snap-strictness:proximity;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;}::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-scroll-snap-strictness:proximity;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;}.top{left:0;margin-left:auto;margin-right:auto;right:0;top:.5rem}.top-right{right:.5rem;top:.5rem}.successBgColor{--tw-bg-opacity:1;background-color:rgb(16 185 129/var(--tw-bg-opacity))}.infoBgColor{--tw-bg-opacity:1;background-color:rgb(59 130 246/var(--tw-bg-opacity))}.warningBgColor{--tw-bg-opacity:1;background-color:rgb(234 179 8/var(--tw-bg-opacity))}.errorBgColor{--tw-bg-opacity:1;background-color:rgb(239 68 68/var(--tw-bg-opacity))}.successTextColor{--tw-text-opacity:1;color:rgb(16 185 129/var(--tw-text-opacity))}.infoTextColor{--tw-text-opacity:1;color:rgb(59 130 246/var(--tw-text-opacity))}.warningTextColor{--tw-text-opacity:1;color:rgb(234 179 8/var(--tw-text-opacity))}.errorTextColor{--tw-text-opacity:1;color:rgb(239 68 68/var(--tw-text-opacity))}.fixed{position:fixed}.z-50{z-index:50}.mx-auto{margin-left:auto;margin-right:auto}.-mx-3{margin-left:-.75rem;margin-right:-.75rem}.mx-3{margin-left:.75rem;margin-right:.75rem}.mt-4{margin-top:1rem}.box-border{box-sizing:border-box}.flex{display:flex}.h-6{height:1.5rem}.w-80{width:20rem}.w-full{width:100%}.w-12{width:3rem}.w-6{width:1.5rem}.w-72{width:18rem}.max-w-sm{max-width:24rem}.flex-grow{flex-grow:1}.grow-0{flex-grow:0}.cursor-pointer{cursor:pointer}.items-start{align-items:flex-start}.items-center{align-items:center}.justify-center{justify-content:center}.overflow-hidden{overflow:hidden}.rounded-lg{border-radius:.5rem}.bg-green-700{--tw-bg-opacity:1;background-color:rgb(21 128 61/var(--tw-bg-opacity))}.bg-blue-700{--tw-bg-opacity:1;background-color:rgb(29 78 216/var(--tw-bg-opacity))}.bg-yellow-700{--tw-bg-opacity:1;background-color:rgb(161 98 7/var(--tw-bg-opacity))}.bg-red-700{--tw-bg-opacity:1;background-color:rgb(185 28 28/var(--tw-bg-opacity))}.bg-white{--tw-bg-opacity:1;background-color:rgb(255 255 255/var(--tw-bg-opacity))}.fill-current{fill:currentColor}.px-4{padding-left:1rem;padding-right:1rem}.py-2{padding-bottom:.5rem;padding-top:.5rem}.text-sm{font-size:.875rem;line-height:1.25rem}.font-semibold{font-weight:600}.text-white{--tw-text-opacity:1;color:rgb(255 255 255/var(--tw-text-opacity))}.text-gray-600{--tw-text-opacity:1;color:rgb(75 85 99/var(--tw-text-opacity))}.opacity-100{opacity:1}.opacity-0{opacity:0}.shadow-md{--tw-shadow:0 4px 6px -1px rgba(0,0,0,.1),0 2px 4px -2px rgba(0,0,0,.1);--tw-shadow-colored:0 4px 6px -1px var(--tw-shadow-color),0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.transition-all{transition-duration:.15s;transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1)}.duration-700{transition-duration:.7s}.ease-in{transition-timing-function:cubic-bezier(.4,0,1,1)}';const CbToastStyle0=cbToastCss;const CbToast=class{constructor(e){registerInstance(this,e);this.timeOut=3e3;this.position="top-right"}async Toast(e){if(e.timeOut!==undefined&&e.timeOut!==""){this.timeOut=e["timeOut"]}if(e.position!==undefined&&e.position!==""){this.position=e["position"]}let t=document.createElement("cb-toastcontent");this.rootElement.append(t);t.setParams({title:e["title"],description:e["description"],type:e["type"]});setTimeout((()=>{let e=t.firstElementChild;e.classList.remove("opacity-100");e.classList.add("opacity-0");setTimeout((()=>{t.remove()}),500)}),this.timeOut)}render(){return h$1("div",{class:this.position+" fixed w-80  max-w-sm box-border",ref:e=>this.rootElement=e})}};CbToast.style=CbToastStyle0;const cbToastcontentCss="";const CbToastcontentStyle0=cbToastcontentCss;const CbToastcontent=class{constructor(e){registerInstance(this,e);this.title="Success";this.description="success message";this.type="success";this.toastType=[{type:"success",typeBgColor:"successBgColor",typeTextColor:"successTextColor",typeIcon:()=>h$1("path",{d:"M20 3.33331C10.8 3.33331 3.33337 10.8 3.33337 20C3.33337 29.2 10.8 36.6666 20 36.6666C29.2 36.6666 36.6667 29.2 36.6667 20C36.6667 10.8 29.2 3.33331 20 3.33331ZM16.6667 28.3333L8.33337 20L10.6834 17.65L16.6667 23.6166L29.3167 10.9666L31.6667 13.3333L16.6667 28.3333Z"})},{type:"info",typeBgColor:"infoBgColor",typeTextColor:"infoTextColor",typeIcon:()=>h$1("path",{d:"M20 3.33331C10.8 3.33331 3.33337 10.8 3.33337 20C3.33337 29.2 10.8 36.6666 20 36.6666C29.2 36.6666 36.6667 29.2 36.6667 20C36.6667 10.8 29.2 3.33331 20 3.33331ZM21.6667 28.3333H18.3334V25H21.6667V28.3333ZM21.6667 21.6666H18.3334V11.6666H21.6667V21.6666Z"})},{type:"warning",typeBgColor:"warningBgColor",typeTextColor:"warningTextColor",typeIcon:()=>h$1("path",{d:"M20 3.33331C10.8 3.33331 3.33337 10.8 3.33337 20C3.33337 29.2 10.8 36.6666 20 36.6666C29.2 36.6666 36.6667 29.2 36.6667 20C36.6667 10.8 29.2 3.33331 20 3.33331ZM21.6667 28.3333H18.3334V25H21.6667V28.3333ZM21.6667 21.6666H18.3334V11.6666H21.6667V21.6666Z"})},{type:"error",typeBgColor:"errorBgColor",typeTextColor:"errorTextColor",typeIcon:()=>h$1("path",{d:"M20 3.36667C10.8167 3.36667 3.3667 10.8167 3.3667 20C3.3667 29.1833 10.8167 36.6333 20 36.6333C29.1834 36.6333 36.6334 29.1833 36.6334 20C36.6334 10.8167 29.1834 3.36667 20 3.36667ZM19.1334 33.3333V22.9H13.3334L21.6667 6.66667V17.1H27.25L19.1334 33.3333Z"})}];this.typeBgColor=this.toastType[0]["typeBgColor"];this.typeTextColor=this.toastType[0]["typeTextColor"];this.typeIcon=this.toastType[0]["typeIcon"]();this.closeToast=e=>{e.target.parentNode.closest("cb-toastcontent").remove()};this.buildToast=()=>h$1("div",{class:" transition-all duration-700  ease-in opacity-100   flex w-full max-w-sm mx-auto overflow-hidden bg-white rounded-lg shadow-md z-50 mt-4",ref:e=>this.el=e},h$1("div",{class:this.typeBgColor+" flex grow-0 items-center justify-center w-12"},h$1("svg",{class:"w-6 h-6 text-white fill-current",viewBox:"0 0 40 40",xmlns:"http://www.w3.org/2000/svg"},this.typeIcon)),h$1("div",{class:"flex-grow w-72 px-4 py-2 -mx-3"},h$1("div",{class:"mx-3"},h$1("span",{class:this.typeTextColor+" font-semibold"},this.title),h$1("p",{class:"text-sm text-gray-600 "},this.description))),h$1("div",{class:"flex items-start justify-center"},h$1("svg",{onClick:e=>this.closeToast(e),class:this.typeTextColor+' "w-6 h-6 fill-current cursor-pointer',viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},h$1("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"}))))}async setParams(e){if(e.title!==undefined&&e.title!==""){this.title=e["title"]}if(e.description!==undefined&&e.description!==""){this.description=e["description"]}if(e.type!==undefined&&e.type!==""){this.type=e["type"];for(var t=0;t<this.toastType.length;t++){if(this.type===this.toastType[t]["type"]){this.typeBgColor=this.toastType[t]["typeBgColor"];this.typeTextColor=this.toastType[t]["typeTextColor"];this.typeIcon=this.toastType[t]["typeIcon"]();break}}}}render(){return h$1(Host,null,this.buildToast())}};CbToastcontent.style=CbToastcontentStyle0;const ConfirmStep=class{constructor(e){registerInstance(this,e);this.viewer=undefined;this.tokenScript=undefined;this.securityInfo=undefined}async componentWillLoad(){}render(){var e;return h$1("div",{key:"93bae4177736090bf76bcbc36ace544fc2950d58"},h$1("div",{key:"00c50cd08e015b2567204b7020e4a17e6fcdb217",style:{textAlign:"center"}},h$1("div",{key:"2c8a3e9bda98e63122dfd00b1be4b8e10938f162"},h$1("p",{key:"3842d699a239f5194015e6ebfee14621237c75aa"},h$1("span",{key:"891ff98b8c4e252f97328966a0949db975d166f3"},(e=document.referrer)!==null&&e!==void 0?e:"https://somesite.com/"),"wants to you to perform an action with the following TokenScript:",h$1("br",{key:"842c24e0f8ef6cd54461a20f041cad3746e2f022"}),"(TokenScript request details displayed)")),h$1("div",{key:"0c7c68be6d7ef8294ea57584add10b0f3197922a"},h$1("button",{key:"b152647cf1e7e5c9e11bd96c71c97472ef269832",class:"btn btn-primary accept-btn",onClick:()=>{this.viewer.step="token"}},"Accept"),h$1("button",{key:"16fdf5ce6f0bd597a5bbfac48c9ccbf21d234735",class:"btn btn-secondary deny-btn",onClick:()=>{this.viewer.returnResultToRequester({error:"User denied the action"})}},"Deny")),h$1("security-status",{key:"9dfb65cc253ca3a9e915ae5abe0b6611f8a7c7ee",tokenScript:this.tokenScript})))}};const fieldCss$1=".input-container{position:relative;padding:10px 0}.input-container>label{position:absolute;background:white;font-size:11px;left:10px;top:5px;padding:0 4px}.input-container>input,.input-container>select{width:100%;height:50px !important;border-radius:4px;border:1px solid #B0B0B0;padding:0 10px}.input-container>select{cursor:pointer}.input-container>select:hover,.input-container>select:focus{background:unset}.input-container>input:focus{border:1px solid #001AFF;outline:none}.input-container:focus-within>label{color:#001AFF}input[type=file]{border:none !important}input::file-selector-button{border-radius:10px;height:36px;min-width:73px;border:none;cursor:pointer;background:#EEEEEE;padding:8px 12px}";const InputFieldStyle0=fieldCss$1;const InputField=class{constructor(e){registerInstance(this,e);this.name=undefined;this.label=undefined;this.type=undefined;this.required=false;this.pattern=undefined;this.value=undefined}async getFile(){return this.file}render(){return h$1("div",{key:"975d7e43a2360b075e8039b8e3133a0dbe781a3c",class:"input-container"},this.type!="file"?h$1("label",null,this.label):"",h$1("input",{key:"4f775619563f91713c2057c0e5f73d849245ef3a",name:this.name,type:this.type,required:this.required,pattern:this.pattern,onChange:e=>{if(this.type==="file")this.file=e.target.files[0];this.value=e.target.value}}))}};InputField.style=InputFieldStyle0;function findCardByUrlParam(e,t){const r=t.getCards();for(let[t,n]of r.entries()){if(n.name==e)return{card:n,index:t}}const n=parseInt(e);if(!isNaN(n)&&r[n])return{card:r[n],index:n};return null}const IntegrationViewer=class{constructor(e){registerInstance(this,e);this.app=undefined;this.tokenScript=undefined;this.step=undefined}componentWillLoad(){try{const e=new URLSearchParams(document.location.search.substring(1));const t=new URLSearchParams(document.location.hash.substring(1));for(const[r,n]of t.entries()){e.set(r,n)}this.urlRequest=e;this.verifyRequest();this.processUrlLoad()}catch(e){console.error(e)}}verifyRequest(){if(!this.urlRequest.has("callbackUri")){this.messageTarget=window.parent?window.parent:window.opener;console.log(this.messageTarget);if(!this.messageTarget)throw new Error("Cannot return message to requester, no callbackUrl supplied or window parent & opener is null.")}}async processUrlLoad(){const e=document.location.search.substring(1);if(!e)return false;const t=new URLSearchParams(e);if(t.has("tokenscriptUrl")){this.openTokenScript("url",t.get("tokenscriptUrl"));return true}else if(t.has("chain")&&t.has("contract")){const e=t.get("chain")+"-"+t.get("contract");this.openTokenScript("resolve",e);return true}throw new Error("Could not locate TokenScript using the values provided in the URL")}async openTokenScript(e,t){this.app.showTsLoader();try{this.tokenScript=await this.app.loadTokenscript(e,t);this.card=findCardByUrlParam(this.urlRequest.get("card"),this.tokenScript).card;if(!this.card)throw new Error("Card "+this.urlRequest.get("card")+" could not be found.");this.step="confirm"}catch(e){console.error(e);alert("Failed to load TokenScript: "+e.message)}this.app.hideTsLoader()}returnResultToRequester(e){if(this.messageTarget){this.messageTarget.postMessage(e,"*")}else{const t=new URL(this.urlRequest.get("callbackUri"));const r=new URLSearchParams(t.hash.substring(1));r.set("tn-action","ts-callback");for(const[t,n]of Object.entries(e)){r.set("tn-"+t,typeof n==="object"?JSON.stringify(n):n.toString())}t.hash=r.toString();document.location.href=t.href}}render(){if(this.tokenScript){switch(this.step){case"confirm":return h$1("confirm-step",{viewer:this,tokenScript:this.tokenScript});case"token":return h$1("select-step",{viewer:this,tokenScript:this.tokenScript,card:this.card});case"view":return h$1("view-step",{viewer:this,tokenScript:this.tokenScript,card:this.card})}}return""}};const loadingSpinnerCss=".lds-ring{display:inline-block;position:relative;width:80px;height:80px}.lds-ring div{box-sizing:border-box;display:block;position:absolute;width:64px;height:64px;margin:8px;border:8px solid;border-radius:50%;animation:lds-ring 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite}.small{height:50px;margin-top:-10px;transform:scale(0.5)}.lds-ring div:nth-child(1){animation-delay:-0.45s}.lds-ring div:nth-child(2){animation-delay:-0.3s}.lds-ring div:nth-child(3){animation-delay:-0.15s}@keyframes lds-ring{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}";const LoadingSpinnerStyle0=loadingSpinnerCss;const LoadingSpinner=class{constructor(e){registerInstance(this,e);this.color="#fff";this.size="large"}render(){const e=this.color+" transparent transparent transparent";return h$1("div",{key:"edcfd73f1e7c99fd759a80282d6db5d97d86010d",class:"lds-ring "+(this.size==="small"?"small":"")},h$1("div",{key:"ac64cd62bc53cd9fd2a9368205610ed310df829a",style:{borderColor:e}}),h$1("div",{key:"8961d82cff77118f5d6032677eddf615a624b7f4",style:{borderColor:e}}),h$1("div",{key:"69eb3e7916176576844267c6bbb41ed52dcbf5a7",style:{borderColor:e}}),h$1("div",{key:"d6656688fb2d5e91e280328c78bc6cd1fcb6523d",style:{borderColor:e}}))}};LoadingSpinner.style=LoadingSpinnerStyle0;const knownTokenScripts=[{tokenScriptId:"ENS",loadType:"resolve",name:"ENS",iconUrl:"/assets/tokenscript-icons/ENS.png"},{tokenScriptId:"DAI",loadType:"resolve",name:"DAI",iconUrl:"/assets/tokenscript-icons/DAI.png"},{tokenScriptId:"137-0xD5cA946AC1c1F24Eb26dae9e1A53ba6a02bd97Fe",loadType:"resolve",name:"SmartCat",iconUrl:"/assets/tokenscript-icons/smart-cat.png"},{tokenScriptId:"137-0x0D86C720e1Eb8CAb197707fDCFF9D7B218612a60",loadType:"resolve",name:"SmartCat Loot",iconUrl:"/assets/tokenscripts/smart-cat/loot-meta/contract.png"},{tokenScriptId:"1-0xAFb979d9afAd1aD27C5eFf4E27226E3AB9e5dCC9",loadType:"resolve",name:"Sablier Ethereum",iconUrl:"https://api.thegraph.com/ipfs/api/v0/cat?arg=QmZCYxNUHghpEg7V59a2dXYC1C7DdxEayiwrYpJV9jwoaN"},{tokenScriptId:"137-0x5f0e1dea4A635976ef51eC2a2ED41490d1eBa003",loadType:"resolve",name:"Sablier Polygon",iconUrl:"https://api.thegraph.com/ipfs/api/v0/cat?arg=QmZCYxNUHghpEg7V59a2dXYC1C7DdxEayiwrYpJV9jwoaN"}];const getKnownTokenScriptMetaById=e=>{for(const t of knownTokenScripts){if(e===t.tokenScriptId)return t}return null};const newViewerCss="new-viewer{padding:10px 25px;position:relative;flex-grow:1}.toolbar{display:flex;padding:5px 0;justify-content:space-between;align-items:start;flex-wrap:wrap}";const NewViewerStyle0=newViewerCss;const NewViewer=class{constructor(e){registerInstance(this,e);this.showToast=createEvent(this,"showToast",7);this.app=undefined;this.myTokenScripts={};this.scriptsLoading=true;this.popularTokenscripts=[]}componentWillLoad(){Web3WalletProvider.registerWalletChangeListener((async e=>{for(const t in this.myTokenScripts){if(e){this.myTokenScripts[t].tokenScript.getTokenMetadata(true)}else{this.myTokenScripts[t].tokenScript.setTokenMetadata([])}}}));this.init();this.processUrlLoad()}async processUrlLoad(){const e=document.location.search.substring(1);if(!e)return;const t=new URLSearchParams(e);let r;if(t.has("ticket")||t.has("attestation")){this.app.showTsLoader();try{const{definition:e,tokenScript:n}=await this.app.tsEngine.importAttestationUsingTokenScript(t);r=await this.addFormSubmit("url",{tsId:n.getSourceInfo().tsId,image:e.meta.image});window.history.replaceState({},document.title,"/");this.showToast.emit({type:"success",title:"Attestation imported",description:"Successfully imported "+e.meta.name})}catch(e){console.error(e);this.app.hideTsLoader();this.showToast.emit({type:"error",title:"Failed to import attestation",description:e.message});return}}else if(t.has("tokenscriptUrl")){r=await this.addFormSubmit("url",{tsId:t.get("tokenscriptUrl")})}else if(t.has("chain")&&t.has("contract")){const e=t.get("chain")+"-"+t.get("contract");r=await this.addFormSubmit("resolve",{tsId:e})}else if(t.has("emulator")){const e=t.get("emulator")?new URL(t.get("emulator")).origin:document.location.origin;const n=e+"/tokenscript.tsml";r=await this.addFormSubmit("url",{tsId:n});this.connectEmulatorSocket(n,e)}console.log("open TS",r);if(r)this.viewerPopover.open(r.tokenScript)}connectEmulatorSocket(e,t){try{const r=new WebSocket("ws://"+new URL(t).host+"/ws");r.onopen=e=>{console.log("connected: ",e.type);r.send("Websocket client connected!")};r.onmessage=async t=>{if(t.data!="BUILD_UPDATED")return;try{const t=await this.addFormSubmit("url",{tsId:e});await this.viewerPopover.close();this.viewerPopover.open(t.tokenScript)}catch(e){console.error(e);alert("Failed to reload TokenScript changes")}}}catch(e){console.error(e)}}async init(){const e={};for(const t of await dbProvider.myTokenScripts.toArray()){try{const r=await this.app.loadTokenscript(t.loadType,t.tokenScriptId,t.xml);e[t.tokenScriptId]=Object.assign(Object.assign({},t),{tokenScript:r})}catch(e){console.error("Failed to load TokenScript definition: ",t.name);this.showToast.emit({type:"error",title:"Failed to load TokenScript",description:e.message})}}this.myTokenScripts=e;this.scriptsLoading=false}recalculatePopularTokenScripts(){this.popularTokenscripts=knownTokenScripts.filter((e=>!this.myTokenScripts[e.tokenScriptId]))}async addPopularTokenScript(e){this.app.showTsLoader();try{const t=await this.app.loadTokenscript("resolve",e.tokenScriptId);await this.addTokenScript(e,t)}catch(e){console.error(e);alert(e.message)}this.app.hideTsLoader()}async addTokenScript(e,t){await dbProvider.myTokenScripts.put(e);const r=Object.assign(Object.assign({},e),{tokenScript:t});this.myTokenScripts=Object.assign(Object.assign({},this.myTokenScripts),{[r.tokenScriptId]:r})}async removeTokenScript(e){if(!confirm("Are you sure you want to remove this TokenScript?"))return;await dbProvider.myTokenScripts.where("tokenScriptId").equals(e).delete();const t=this.myTokenScripts;delete t[e];this.myTokenScripts=Object.assign({},this.myTokenScripts)}async addFormSubmit(e,t){var r,n,i,s;this.app.showTsLoader();try{const a=await this.app.loadTokenscript(e,t.tsId,t.xml);const o=(r=t.tsId)!==null&&r!==void 0?r:a.getName();let f=getKnownTokenScriptMetaById(o);if(!f){f={tokenScriptId:(n=t.tsId)!==null&&n!==void 0?n:a.getName(),loadType:e,name:(s=(i=a.getLabel())!==null&&i!==void 0?i:a.getName())!==null&&s!==void 0?s:"Unknown TokenScript",xml:e==="file"?a.getXmlString():null};if(t.image){f.iconUrl=t.image}else if(a.getMetadata().iconUrl&&a.getMetadata().iconUrl.trim()){f.iconUrl=a.getMetadata().iconUrl.trim()}else{const e=a.getTokenOriginData()[0];if(e&&CHAIN_MAP[e.chainId]){const t=new DiscoveryAdapter;try{const r=await t.getCollectionMeta(e,CHAIN_MAP[e.chainId]);f.iconUrl=r.image}catch(e){console.error("Failed to load tokenscript icon from collection metadata",e)}}}}await this.addTokenScript(f,a);await this.addDialog.closeDialog();this.app.hideTsLoader();return Object.assign(Object.assign({},f),{tokenScript:a})}catch(e){console.error(e);this.app.hideTsLoader();this.showToast.emit({type:"error",title:"Failed to load TokenScript",description:e.message})}}render(){return h$1(Host,{key:"983ebe60f76968956de69f83c4924585686ee57a"},h$1("h3",{key:"c4779f0381c8b57492f94d88e98b650fe1364bab"},"Smart Token Viewer"),h$1("p",{key:"2e681b62b8137ec78c6804aa6924a9f8045f80c0"},"Connect your wallet to use your TokenScript enabled tokens. ",h$1("a",{key:"9f82a140b2ab1a62eb71a30b30aa3aa51c433002",onClick:()=>this.aboutDialog.openDialog()},"Learn More"),"."),h$1("div",{key:"70c41267ebf154419ea75769422568dcdd6f3372",class:"toolbar"},h$1("wallet-button",{key:"0cffae8bda64e0a945b554765ab1bdbd811de57a"}),h$1("button",{key:"e16857c886028de9a77acd9069183a23cfb39e31",class:"btn",onClick:()=>{this.addDialog.openDialog()}},"+ Add Token")),h$1("div",{key:"c81e2b857063a2069866fe4d6f7a8956020cdcb9",style:{padding:"10px 0"}},h$1("div",{key:"0510c73f4955999ba31403100cf0b006fcaec274",style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},h$1("h4",{key:"7b4963b104093a04765abbfb62248c5aa68b306a"},"Your Tokens"),h$1("button",{key:"299c16af54f191f121e6852399e1d6e897593358",class:"btn",style:{marginRight:"5px",minWidth:"35px",fontSize:"16px"},onClick:()=>{for(const e in this.myTokenScripts){this.myTokenScripts[e].tokenScript.getTokenMetadata(true,true)}}},"")),this.scriptsLoading?h$1("loading-spinner",{color:"#1A42FF",size:"small"}):Object.values(this.myTokenScripts).length>0?h$1("tokenscript-grid",null,Object.values(this.myTokenScripts).map((e=>h$1("tokenscript-button",{key:e.tokenScriptId,tsId:e.tokenScriptId,name:e.name,imageUrl:e.iconUrl,tokenScript:e.tokenScript,onClick:()=>{this.viewerPopover.open(e.tokenScript)},onRemove:async e=>{this.removeTokenScript(e)}})))):h$1("div",null,h$1("strong",{style:{fontSize:"13px"}},"You don't have any TokenScripts in your library yet"),h$1("br",null),h$1("span",{style:{fontSize:"12px"}},"Add TokenScripts by selecting popular ones below or adding them manually via the Add Tokens button."))),this.popularTokenscripts.length>0?h$1("div",null,h$1("h4",null,"Popular Smart Tokens"),h$1("tokenscript-grid",null,this.popularTokenscripts.map((e=>h$1("tokenscript-button",{name:e.name,imageUrl:e.iconUrl,onClick:()=>{this.addPopularTokenScript(e)}}))))):"",h$1("add-selector",{key:"bdb24dbf99584129ceced18f5087a6fd62b032af",ref:e=>this.addDialog=e,onFormSubmit:this.addFormSubmit.bind(this)}),h$1("viewer-popover",{key:"681f01ccf64d1612fbc4a1cce46a91aa165db1b8",ref:e=>this.viewerPopover=e}),h$1("popover-dialog",{key:"b72dbd1d41f55e798176629c857f78ed11289124",ref:e=>this.aboutDialog=e},h$1("about-tokenscript",{key:"61da2521a374e9141cc5c6159942826e4ddf5d9d"})))}static get watchers(){return{myTokenScripts:["recalculatePopularTokenScripts"]}}};NewViewer.style=NewViewerStyle0;const openseaViewerCss="header{display:none}body{overflow:hidden}.opensea-header{height:30px;background:#000;color:#fff;display:flex;align-items:center}.opensea-header span{font-size:12px;padding-left:10px;font-weight:bold}.opensea-header .header-icon{height:20px !important;padding-left:5px;padding-top:2px}.opensea-img-container{display:flex;flex-grow:1;background-size:cover;background-repeat:no-repeat;background-position:top}.info-button,.close-button{font-size:30px;background:#000;color:#fff;width:40px;height:40px;border-radius:20px;display:flex;align-items:center;justify-content:center;cursor:pointer}.info-button{animation:borderFlash 3s infinite}@keyframes borderFlash{50%{box-shadow:0 0 20px #001AFF}}.info-button img{width:90%}.info-button-container{position:absolute;top:0;left:0;z-index:30;height:40px;width:40px;margin:20px;display:flex;align-items:center;justify-content:center}.close-button{position:absolute;top:0;right:0;z-index:50;margin:20px;text-align:center;display:table-cell}.card-overlay{position:absolute;top:0;width:100%;height:100%;z-index:40}opensea-viewer,.opensea-viewer{position:relative}opensea-viewer,.opensea-viewer,card-view,.card-container{display:flex !important;flex-direction:column;flex-grow:1}.card-container{max-width:unset !important;margin:0 auto !important;max-height:unset !important;width:100%}.tokenscript-frame{border:none !important}";const OpenseaViewerStyle0=openseaViewerCss;const OpenseaViewer=class{constructor(e){registerInstance(this,e);this.showToast=createEvent(this,"showToast",7);this.showLoader=createEvent(this,"showLoader",7);this.hideLoader=createEvent(this,"hideLoader",7);this.app=undefined;this.tokenDetails=undefined;this.tokenScript=undefined;this.showInfoCard=false}async componentWillLoad(){this.app.showTsLoader()}async componentDidLoad(){try{const e=new URLSearchParams(document.location.search.substring(1));const t=new URLSearchParams(document.location.hash.substring(1));for(const[r,n]of t.entries()){e.set(r,n)}this.urlRequest=e;await this.processUrlLoad();this.loadTokenScript()}catch(e){console.error(e);this.showToast.emit({type:"error",title:"Failed to load token details",description:e.message})}this.app.hideTsLoader()}async processUrlLoad(){const e=document.location.search.substring(1);if(!e)return false;const t=new URLSearchParams(e);if(t.has("chain")&&t.has("contract")&&t.has("tokenId")){this.tokenDetails=await getSingleTokenMetadata(parseInt(t.get("chain")),t.get("contract"),t.get("tokenId"));console.log("Token meta loaded!",this.tokenDetails);return true}throw new Error("Could not locate token details using the values provided in the URL")}async loadTokenScript(){try{const e=parseInt(this.urlRequest.get("chain"));const t=this.urlRequest.get("contract");let r;if(this.urlRequest.has("tokenscriptUrl")){r=await this.app.loadTokenscript("url",this.urlRequest.get("tokenscriptUrl"))}else{const n=e+"-"+t;r=await this.app.loadTokenscript("resolve",n)}const n=r.getTokenOriginData();let i;for(const r of n){if(r.chainId===e&&t.toLowerCase()===t.toLowerCase()){i=r;r.tokenDetails=[this.tokenDetails];break}}if(i){r.setTokenMetadata(n);class e{getTokens(e,t){return Promise.resolve(n)}}this.app.discoveryAdapter=new e;r.setCurrentTokenContext(i.originId,0);this.tokenScript=r;this.viewBinding=new ViewBinding$1(this.host,this.showToast);this.viewBinding.setTokenScript(this.tokenScript);this.tokenScript.setViewBinding(this.viewBinding)}}catch(e){console.warn(e.message)}}displayInfoCard(){const e=this.tokenScript.getCards().find((e=>e.type==="token"));if(e){this.tokenScript.showOrExecuteTokenCard(e);this.showInfoCard=true}}render(){return h$1(Host,{key:"b7e15ed3a61d4efea13e06c45d0e92d1c004aaba"},h$1("div",{key:"f7e33a648f934b8df122e61bcfa20f0408ff07bf",class:"opensea-viewer"},this.tokenDetails?[h$1("div",{class:"opensea-img-container",style:{backgroundImage:"url("+this.tokenDetails.image+")"},title:this.tokenDetails.name},h$1("div",{class:"info-button-container"},this.tokenScript?h$1("div",{class:"info-button",title:"Token Information",onClick:()=>this.displayInfoCard()},h$1("img",{alt:"Smart Layer",title:"Token Information",src:"/assets/icon/sl-icon-white.png"})):h$1("loading-spinner",{size:"small"}))),h$1("div",{class:"card-overlay",style:{display:this.showInfoCard?"flex":"none"}},h$1("div",{class:"close-button",onClick:()=>{this.showInfoCard=false;this.tokenScript.getViewController().unloadTokenCard()}},"x"),h$1("card-view",null))]:""),h$1("div",{key:"628859c44971bfb49f4cdfb0ad23d7f4ef830487",class:"opensea-header"},h$1("span",{key:"65f8426374345680fc7c6255d8a0565ce16f9149"},"XNFT by"),h$1("img",{key:"9d8a5285ecbb2ab80d20f84dfb8dffd9c2d77adb",class:"header-icon",alt:"TokenScript icon",src:"assets/icon/smart-layer-icon.png"})))}get host(){return getElement(this)}};OpenseaViewer.style=OpenseaViewerStyle0;const popoverDialogCss=".popover-modal{position:fixed;left:0;height:100dvh;width:100vw;top:0;background-color:#00000082;align-items:center;justify-content:center;display:none;overflow:hidden;z-index:100}.popover-modal.open{display:flex !important;animation:fadeIn 0.25s}@keyframes fadeIn{0%{opacity:0}100%{opacity:1}}.popover-modal.open .popover-container{top:unset !important;animation:slideIn 0.25s}@keyframes slideIn{0%{transform:translateY(500px);animation-timing-function:ease-out}100%{transform:translateY(0px);animation-timing-function:ease-in}}.popover-container{box-sizing:border-box;position:absolute;max-width:500px;max-height:calc(100dvh - 80px);width:100%;background:#fff;min-height:300px;border-radius:8px;padding:10px;top:110dvh;animation:slideIn 0.5s reverse;display:flex;flex-direction:column}.close-btn{position:absolute;top:-36px;right:10px;font-size:24px;background:none;border:none;color:#fff;cursor:pointer;font-weight:bold;line-height:24px}.close-btn:hover{color:#cacaca}.popover-inner{position:relative;overflow:auto;display:flex;flex-direction:column;flex-grow:1;overflow-x:hidden}@media (max-width: 500px){.popover-modal{align-items:end}.popover-container{border-radius:8px 8px 0 0 !important}}";const PopoverDialogStyle0=popoverDialogCss;const PopoverDialog=class{constructor(e){registerInstance(this,e);this.open=false;this.dialogStyles={}}async openDialog(e){this.open=true;this.dismissCallback=e}async closeDialog(){this.open=false}render(){return h$1("div",{key:"bf2ba995991f654a1010252d872b64d48c647781",class:"popover-modal"+(this.open?" open":"")},h$1("div",{key:"2fc91b75d314b725037c92cbb99cdd88d4064381",class:"popover-container",style:this.dialogStyles},h$1("button",{key:"7f402c81d392ab386dfc4fdb61bbb5361a236609",class:"close-btn",onClick:()=>{this.open=false;if(this.dismissCallback){this.dismissCallback();this.dismissCallback=null}}},"x"),h$1("slot",{key:"a69f0910c745aed09a94aaed9ba3da2a8bf2c59a",name:"outer-content"}),h$1("div",{key:"3c41ba9c8a5cc84c1f89025b11d6547d9460af80",class:"popover-inner"},h$1("slot",{key:"48cc7185a637806ca7c83e3bec7ab0bbb1d4fb4f"}))))}};PopoverDialog.style=PopoverDialogStyle0;const securityStatusCss=".security-status{box-sizing:border-box;margin:0 5px;padding:5px 5px;border-radius:10px;font-size:20px;width:36px;height:36px;text-align:center;cursor:pointer;display:flex;align-items:center;justify-content:center}.security-status.small{width:30px;height:30px}.security-popover-icon{font-size:50px;margin:0 0 10px}";const SecurityStatusStyle0=securityStatusCss;const SecurityStatus=class{constructor(e){registerInstance(this,e);this.tokenScript=undefined;this.size="large";this.securityInfo=undefined;this.statusColor=undefined;this.statusIcon=undefined}async componentWillLoad(){this.securityInfo=await this.tokenScript.getSecurityInfo().getInfo()}updateStatusState(){switch(this.securityInfo.status){case SecurityStatus$1.VALID:this.statusColor="#3bd23b";this.statusIcon="";break;case SecurityStatus$1.WARNING:this.statusColor="#ff871d";this.statusIcon="";break;case SecurityStatus$1.INVALID:this.statusColor="#ff4f4f";this.statusIcon="";break}}getDetailedSecurityInfo(){const e=this.securityInfo.originStatuses.reduce(((e,t)=>{if(e.indexOf(t.type)===-1)e.push(t.type);return e}),[]);return"TokenScript security information\n"+(this.securityInfo.trustedKey?"\nIssued by: "+this.securityInfo.trustedKey.issuerName+"\n":"")+(this.securityInfo.authoritivePublicKey?"\nAuthoritative Key: "+computeAddress$1(this.securityInfo.authoritivePublicKey)+"\n("+this.securityInfo.authoritivePublicKey+")":"")+(this.securityInfo.signerPublicKey?"\nSigner Key: "+computeAddress$1(this.securityInfo.signerPublicKey):"")+"\nAuthentication: "+e.join(", ")}render(){return this.securityInfo?h$1(Host,null,h$1("div",{class:"security-status"+(this.size==="small"?" small":""),style:{background:this.statusColor},title:this.securityInfo.statusText+"\n\n"+this.getDetailedSecurityInfo(),onClick:()=>this.dialog.openDialog()},this.statusIcon),h$1("popover-dialog",{ref:e=>this.dialog=e},h$1("h1",{class:"security-popover-icon",style:{color:this.statusColor}},this.statusIcon),h$1("strong",null,this.securityInfo.statusText),h$1("p",{style:{wordWrap:"break-word"},innerHTML:this.getDetailedSecurityInfo().replaceAll("\n","<br/>")}))):""}static get watchers(){return{securityInfo:["updateStatusState"]}}};SecurityStatus.style=SecurityStatusStyle0;const fieldCss=".input-container{position:relative;padding:10px 0}.input-container>label{position:absolute;background:white;font-size:11px;left:10px;top:5px;padding:0 4px}.input-container>input,.input-container>select{width:100%;height:50px !important;border-radius:4px;border:1px solid #B0B0B0;padding:0 10px}.input-container>select{cursor:pointer}.input-container>select:hover,.input-container>select:focus{background:unset}.input-container>input:focus{border:1px solid #001AFF;outline:none}.input-container:focus-within>label{color:#001AFF}input[type=file]{border:none !important}input::file-selector-button{border-radius:10px;height:36px;min-width:73px;border:none;cursor:pointer;background:#EEEEEE;padding:8px 12px}";const SelectFieldStyle0=fieldCss;const SelectField=class{constructor(e){registerInstance(this,e);this.name=undefined;this.label=undefined;this.options=undefined;this.value=undefined}componentWillLoad(){if(!this.value&&this.options.length>0)this.value=this.options[0].value}render(){return h$1("div",{key:"c7ecf5ebe24631ae218351c9a38e55aab7103ce3",class:"input-container"},h$1("label",{key:"9b3f50d7c63299796a60ec66161bf00befc5f454"},this.label),h$1("select",{key:"fd5efa017fd7e09f6c910dcc2072a68de64bb153",name:this.name,onChange:e=>{this.value=e.target.value}},this.options.map((e=>h$1("option",{value:e.value,selected:this.value===e.value},e.label)))))}};SelectField.style=SelectFieldStyle0;function getTokensFlat(e){return Object.keys(e).reduce(((t,r)=>{if(e[r].tokenDetails){const n=e[r].tokenDetails.map(((e,t)=>Object.assign(Object.assign({},e),{contextId:r+"-"+t,originId:r})));t.push(...n)}else{const n=Object.assign(Object.assign({},e[r]),{contextId:r,originId:r});t.push(n)}return t}),[])}const selectStepCss=".select-grid{display:flex;flex-wrap:wrap;justify-content:center}";const SelectStepStyle0=selectStepCss;const SelectStep=class{constructor(e){registerInstance(this,e);this.viewer=undefined;this.tokenScript=undefined;this.card=undefined;this.currentTokensFlat=undefined;this.tokenButtons=undefined;Web3WalletProvider.registerWalletChangeListener(this.handleWalletChange.bind(this))}handleWalletChange(e){if(e){this.tokenScript.getTokenMetadata(true)}else{this.tokenScript.setTokenMetadata([])}}async componentWillLoad(){await this.populateTokens(await this.tokenScript.getTokenMetadata());this.tokenScript.on("TOKENS_UPDATED",(e=>{this.populateTokens(e.tokens)}),"token-button")}async populateTokens(e){this.viewer.app.showTsLoader();this.currentTokens=e;this.currentTokensFlat=getTokensFlat(this.currentTokens);const t=[];this.tokenButtons=[];for(let e of this.currentTokensFlat){const r={originId:e.originId,chainId:"chainId"in e?e.chainId:e.collectionDetails.chainId,selectedNftId:"tokenId"in e?e.tokenId:undefined};const n=await this.card.isEnabledOrReason(r);if(n===true){t.push(e)}if(n===false)continue;this.tokenButtons.push({token:e,enabled:n===true,buttonTitle:n!==true?n:this.card.label})}if(t.length===0){this.viewer.returnResultToRequester({action:"ts-callback",error:"You do not have any tokens that support this action"});return}if(t.length===1){const e=t[0].contextId.split("-");this.tokenScript.setCurrentTokenContext(e[0],e.length>1?parseInt(e[1]):null);this.viewer.step="view"}this.viewer.app.hideTsLoader()}render(){return h$1("div",{key:"a1c4811cd0ef5985b7c0ab57d40f576f59f77ae1"},h$1("wallet-button",{key:"9e2b137ca98816796286c5e39ab1af49ec968639"}),h$1("div",{key:"f197f4bbc66d1b339b6de5a1bca0187f0f2f12ef",class:"select-grid"},this.tokenButtons?this.tokenButtons.map((e=>h$1("token-button",{token:e.token,enabled:e.enabled,buttonTitle:e.buttonTitle,clickHandler:e=>{const t=e.contextId.split("-");this.tokenScript.setCurrentTokenContext(t[0],t.length>1?parseInt(t[1]):null);this.viewer.step="view"}}))):""),h$1("div",{key:"610fc800a1eeed73cf8c58d3173e4dfc2a9d4976",id:"tn-integration"}))}};SelectStep.style=SelectStepStyle0;const startTabCss="#start-tab{padding:20px}.start-section{padding:15px 0}.start-sub-section{margin-bottom:15px}input::file-selector-button{border-radius:5px;height:36px;min-width:112px;border:none;cursor:pointer;color:#fff;background:linear-gradient(234.79deg, #001AFF 37.73%, #4F95FF 118.69%), #8A9CB8}input::file-selector-button:hover{background:linear-gradient(214.82deg, #001AFF -21.14%, #4F95FF 89.22%)}";const StartTabStyle0=startTabCss;const StartTab$1=class{constructor(e){registerInstance(this,e);this.tabView=undefined;this.tabId=undefined}componentDidLoad(){}render(){return h$1("div",{key:"55720634019e55617613952e5ea5592ede3dafce"},h$1("div",{key:"5638d4ccd7603cdfc61ceeb9e9a757baf96c80bc",class:"start-section"},h$1("about-tokenscript",{key:"ee5dda32dd0680f611e27904c8be7d4f015ada2b"})),h$1("div",{key:"17081a00bdbb626449d3dc8757069367609d5cbd",class:"start-section"},h$1("h3",{key:"e6b6c39aadc2f0e05fa4bc3ca144ffeb01692222"},"Load a TokenScript"),h$1("div",{key:"39dea18e7f1e4db31b608f6ac6bcacb07067cf7a",class:"start-sub-section"},h$1("h4",{key:"c43d6b24f3d1c4fbc4ad197e035fe2cdbe856b69"},"Load with contract ID"),h$1("label",{key:"b533f050d2076a258138f1ddd864248fa8c30623",htmlFor:"ts-id"},"Tokenscript ID: "),h$1("input",{key:"b4605585cc7b712454e49441cba8f58be2a7930e",style:{marginRight:"15px"},id:"ts-id",type:"text",value:""}),h$1("label",{key:"2bf31439a68d544e1c383d27136016f69f0cabc0",htmlFor:"ts-chain"},"Chain: "),h$1("select",{key:"2342ba4cf69c01d02bca0b1ac3b578d0fb661bb4",id:"ts-chain",style:{marginRight:"15px"}},Object.entries(CHAIN_NAME_MAP).map((e=>h$1("option",{value:e[0]},e[1])))),h$1("button",{key:"63cf62b6f1ecd7a8bae8a0ad4b6e243541f77bda",id:"ts-resolve-btn",type:"button",class:"btn btn-primary",onClick:()=>{const e=document.getElementById("ts-chain").value+"-"+document.getElementById("ts-id").value;this.tabView.openTokenScriptTab("resolve",e)}},"Resolve")),h$1("div",{key:"25d3e6c18c556b07314a0dcdecaacfacc507b655",class:"start-sub-section"},h$1("h4",{key:"6de80a489617fa915c5ffa74a642e7fca1288935"},"Load from URL"),h$1("label",{key:"7938424e89bbbec02521aee3fa4bf0fd34409382",htmlFor:"ts-url"},"URL: "),h$1("input",{key:"b36b1e2c6657df8a0ee8ec762b0ccdb03a571149",id:"ts-url",type:"text",style:{marginRight:"15px"}}),h$1("button",{key:"3fe760e6fa67df5a125100570628aea99ae44be3",id:"ts-load-url-btn",type:"button",class:"btn btn-primary",onClick:()=>{const e=document.getElementById("ts-url").value;this.tabView.openTokenScriptTab("url",e)}},"Load")),h$1("div",{key:"bc766a5db4702bf37b334a38f26aad22c812bb48",class:"start-sub-section"},h$1("h4",{key:"3077e79941d0e75e7ce044e2fdf230d1c4c8a18f"},"Load from file"),h$1("label",{key:"3c3975987e032222558ecc937dfc7a08f939632c",htmlFor:"ts-file"},"Load XML: "),h$1("input",{key:"e066c763fbfd8262024c003f95095cdb8077098b",id:"ts-file",type:"file",accept:".xml,.tsml,text/xml",onChange:()=>{const e=document.getElementById("ts-file").files[0];this.tabView.openTokenScriptTab("file",null,e)}})),h$1("div",{key:"59f93185ca1d737efe3020672a9c3be77b508f6e",class:"start-sub-section"},h$1("h4",{key:"60b9430209ee4c7587086f5742fb76c80a833d7b"},"Load Predefined TokenScripts "),h$1("label",{key:"42d2d25b952533042c4a214034d5b4b3758e05ec",htmlFor:"ts-predefined"}),h$1("select",{key:"9d2e646b41402804e21ae6f0afe0eba9138863f2",id:"ts-predefined",style:{marginRight:"15px"}},h$1("option",{key:"68ea53c8dd5642994a0fe34479fb9187df2c6ea0",value:"DAI"},"DAI"),h$1("option",{key:"90a6374d4b7a2569af37d2cf00cd1f9a8d431416",value:"ENS"},"ENS")),h$1("button",{key:"abf8035bc95ee16c0d51e459ad1f8392f910e65a",id:"ts-load-predefined-btn",type:"button",class:"btn btn-primary",onClick:()=>{const e=document.getElementById("ts-predefined").value;this.tabView.openTokenScriptTab("resolve",e)}},"Load"))))}};StartTab$1.style=StartTabStyle0;const getHardcodedDescription=async(e,t)=>{const r=["0xAFb979d9afAd1aD27C5eFf4E27226E3AB9e5dCC9".toLowerCase(),"0x7a43F8a888fa15e68C103E18b0439Eb1e98E4301".toLowerCase()];if(r.indexOf(t.collectionDetails.contractAddress.toLowerCase())>-1){const r=["0xdb82c0d91e057e05600c8f8dc836beb41da6df14".toLowerCase(),"0xF5F355746e64f5cDdd471205e9042153dB84387A".toLowerCase(),"0x0404ab3994ed48c300ce219546f757ad34484dc7".toLowerCase()];try{const n=await e.getAttributes().getAttribute("stream").getValue();if((n===null||n===void 0?void 0:n.asset)&&r.indexOf(n.asset.toLowerCase())>-1)return`As the holder of this NFT, you have the right to withdraw the SLN tokens.\n\nTransferring this NFT will give the right to withdraw to the new owner.\n$SLN tokens are not automatically withdrawn for the previous holder and must be done manually.\n\nEnabled by Sablier V2 Lockup Linear Contract.\nStream ID ${t.tokenId}: ${t.collectionDetails.contractAddress}\nSLN Address: ${n.asset}\n\t\t\t\t`}catch(e){}}return t.description};const stsViewerCss="header{display:none}*{font-family:'Space Grotesk', sans-serif;color:#333}.token-viewer{max-width:650px;width:100%;margin:0 auto;display:flex;flex-direction:column}sts-viewer:has(>card-popover .open){overflow:hidden;max-height:100vh}.token-viewer:has(+card-popover .open){overflow:hidden}.details-container{flex-grow:1}.image-container{min-height:100px}.token-viewer img{max-width:100%}.token-viewer .main-info{border-bottom:1px solid #F7F6F0}.main-info h1{font-size:16px;font-weight:700;line-height:20px;margin:16px 0 0;padding:0}.extra-info{display:flex;flex-direction:column;gap:16px;overflow-x:hidden}.main-info{padding:0 16px 16px;display:flex;flex-direction:column;gap:8px}.main-info .collection-details{display:flex;align-items:center;gap:8px}.main-info .owner-count{color:#3D45FB;font-size:12px;font-weight:700;line-height:14px;letter-spacing:0.24px}.collection-details h4{font-size:14px;margin:0;font-weight:600;line-height:20px;flex-grow:1}.collection-details span{font-size:12px;font-weight:600;line-height:20px}.extra-info{padding:8px 16px 16px}.extra-info p{margin:0 0 16px;word-wrap:break-word}.attribute-container{display:grid;grid-template-columns:repeat(auto-fill, minmax(120px, 1fr));grid-gap:10px}.attribute-item{border-radius:8px;border:1px solid #8D98F8;min-height:64px;padding:6px 4px;overflow:hidden}.attribute-item h5{font-size:12px;font-weight:500;line-height:16px;margin:0}.attribute-item span{font-size:12px;font-weight:400;line-height:16px;word-break:break-word}.popover-container{max-height:calc(100dvh - 50px) !important}.card-container{height:calc(100dvh - 50px) !important}.actions{display:flex;flex-direction:column;gap:10px;padding:10px 15px}";const StsViewerStyle0=stsViewerCss;const SmartTokenStoreViewer=class{constructor(e){registerInstance(this,e);this.showToast=createEvent(this,"showToast",7);this.showLoader=createEvent(this,"showLoader",7);this.hideLoader=createEvent(this,"hideLoader",7);this.app=undefined;this.tokenDetails=undefined;this.tokenScript=undefined;this.description="";this.cardButtons=undefined;this.overflowCardButtons=undefined}async componentDidLoad(){try{const e=new URLSearchParams(document.location.search.substring(1));const t=new URLSearchParams(document.location.hash.substring(1));for(const[r,n]of t.entries()){e.set(r,n)}this.urlRequest=e;await this.processUrlLoad()}catch(e){console.error(e);this.showToast.emit({type:"error",title:"Failed to load token details",description:e.message})}}async processUrlLoad(){const e=document.location.search.substring(1);if(!e)return false;const t=new URLSearchParams(e);if(t.has("chain")&&t.has("contract")&&t.has("tokenId")){this.app.showTsLoader();this.tokenDetails=await getSingleTokenMetadata(parseInt(t.get("chain")),t.get("contract"),t.get("tokenId"));console.log("Token meta loaded!",this.tokenDetails);this.app.hideTsLoader();this.loadTokenScript();return true}throw new Error("Could not locate token details using the values provided in the URL")}async loadTokenScript(){try{const e=parseInt(this.urlRequest.get("chain"));const t=this.urlRequest.get("contract");let r;if(this.urlRequest.has("tokenscriptUrl")){r=await this.app.loadTokenscript("url",this.urlRequest.get("tokenscriptUrl"))}else{const n=e+"-"+t;r=await this.app.loadTokenscript("resolve",n)}const n=r.getTokenOriginData();let i;for(const r of n){if(r.chainId===e&&t.toLowerCase()===t.toLowerCase()){i=r;r.tokenDetails=[this.tokenDetails];break}}if(i){r.setTokenMetadata(n);class e{getTokens(e,t){return Promise.resolve(n)}}this.app.discoveryAdapter=new e;r.setCurrentTokenContext(i.originId,0);this.tokenScript=r;this.tokenScript.on("TOKENS_UPDATED",(e=>{this.cardButtons=null;this.overflowCardButtons=null;this.loadCards()}),"grid");this.loadCards()}}catch(e){console.warn(e.message)}}async loadCards(){const e=[];const t=[];const r=this.tokenScript.getCards();for(let[n,i]of r.entries()){let r=i.label;if(r==="Unnamed Card")r=i.type==="token"?"Token Info":i.type+" Card";try{const s=await i.isEnabledOrReason();if(s===false)continue;const a=h$1("button",{class:"btn "+getCardButtonClass(i,n),onClick:()=>this.showCard(i),disabled:s!==true,title:s!==true?s:r},r);if(s!==true||e.length>2){t.push(a)}else{e.push(a)}}catch(e){console.error("Failed to check if card is available",e)}}this.cardButtons=e;this.overflowCardButtons=t;this.description=await getHardcodedDescription(this.tokenScript,this.tokenDetails)}async showCard(e){window.scrollTo(0,0);try{await this.tokenScript.showOrExecuteTokenCard(e,(async e=>{if(e.status==="started")this.showLoader.emit();if(e.status==="confirmed")this.hideLoader.emit();await showTransactionNotification(e,this.showToast)}))}catch(e){console.error(e);this.hideLoader.emit();handleTransactionError(e,this.showToast);return}}render(){var e,t,r;return h$1(Host,{key:"fabcd6562ca7c78f4e3b54b1d34d5d9ab8931986"},h$1("div",{key:"dabfebf4e3cdbbcc1b6cfda2b1113c25831eb757",class:"token-viewer"},this.tokenDetails?h$1("div",null,h$1("div",{class:"details-container"},h$1("div",{class:"image-container"},h$1("token-icon",{style:{minHeight:"100px;"},src:this.tokenDetails.image,imageTitle:this.tokenDetails.name})),h$1("div",{class:"info-container"},h$1("div",{class:"main-info"},h$1("h1",null,this.tokenDetails.name),h$1("div",{class:"owner-count"},h$1("span",{style:{color:"#3D45FB"}},this.tokenDetails.collectionDetails.tokenType==="erc1155"?"balance: "+this.tokenDetails.balance:"#"+this.tokenDetails.tokenId)),h$1("div",{class:"collection-details"},h$1("token-icon",{style:{width:"24px",borderRadius:"4px"},src:this.tokenDetails.collectionDetails.image,imageTitle:this.tokenDetails.collectionDetails.name}),h$1("h4",null,(e=this.tokenDetails.collectionDetails.name)!==null&&e!==void 0?e:this.tokenDetails.name),h$1("span",null,this.tokenDetails.collectionDetails.tokenType.toUpperCase()))),h$1("div",{class:"extra-info"},h$1("p",{innerHTML:this.description.replace(/\n/g,"<br/>")}),h$1("div",{class:"attribute-container"},((t=this.tokenDetails.attributes)===null||t===void 0?void 0:t.length)?this.tokenDetails.attributes.map((e=>h$1("div",{class:"attribute-item",title:e.trait_type+": "+e.value},h$1("h5",null,e.trait_type),h$1("span",null,e.value)))):"")))),h$1("div",{class:"actions"},this.cardButtons?this.cardButtons:h$1("loading-spinner",{color:"#595959",size:"small",style:{textAlign:"center"}}),((r=this.overflowCardButtons)===null||r===void 0?void 0:r.length)?[h$1("button",{class:"btn more-actions-btn",onClick:()=>this.overflowDialog.openDialog()},"+ More actions"),h$1("action-overflow-modal",{ref:e=>this.overflowDialog=e},h$1("div",{class:"actions"},this.overflowCardButtons))]:""),h$1("div",{style:{padding:"0 10px 10px 10px"}},this.tokenScript?h$1("security-status",{tokenScript:this.tokenScript}):"")):""),h$1("card-popover",{key:"bf00fa19146c81ac30bbfce274be39bda87e10e7",tokenScript:this.tokenScript}))}};SmartTokenStoreViewer.style=StsViewerStyle0;const tabHeaderItemCss=":host{background:none;border:none;border-bottom:2px solid white;border-radius:0;margin:0;color:#ccc;max-width:200px;flex-grow:1;align-content:center;justify-content:center;padding:5px 10px;box-sizing:border-box;cursor:pointer !important}:host>.tab-button{height:40px;display:flex;flex-direction:row;align-items:center}.tab-button span{flex-grow:1;display:inline-block;color:inherit;font-weight:bold;margin-top:4px;text-overflow:ellipsis ellipsis;overflow:hidden;white-space:nowrap}.tab-button button{border-color:#a6a6a6 !important;border:none;color:#676767;border-radius:5px;padding:4px 6px;font-weight:bold;cursor:pointer !important}.tab-button button:hover{background:linear-gradient(0deg, #CECECE, #CECECE), #DDDDDD}:host(.active){border-bottom:2px solid #001AFF;color:#333 !important}";const TabHeaderItemStyle0=tabHeaderItemCss;const StartTab=class{constructor(e){registerInstance(this,e);this.tabView=undefined;this.tabId=undefined;this.tabTitle=undefined;this.closable=true}render(){return h$1("div",{key:"38a627646100b64a275995f8f79950f8e93cca43",class:"tab-button",onClick:()=>this.tabView.showTab(this.tabId),title:this.tabTitle},h$1("span",{key:"ee221f6a886687a5cb2249fc7a061b8e0fd6d1a3"},this.tabTitle),this.closable===true?h$1("button",{onClick:()=>this.tabView.closeTab(this.tabId)},"X"):"")}};StartTab.style=TabHeaderItemStyle0;const tabbedViewerCss="tabbed-viewer{display:flex;flex-direction:column;flex-grow:1}#tab-header{display:flex;border-bottom:1px solid #000}#tab-content{position:relative;flex-grow:1}#tab-content>*{display:none}#tab-content>.active{display:block !important}";const TabbedViewerStyle0=tabbedViewerCss;const TabbedViewer=class{constructor(e){registerInstance(this,e);this.tabs={};this.app=undefined}async showTab(e){if(e!=="start-tab"&&!this.tabs[e])return;let t=this.host.querySelector("#tab-header").children;for(let e=0;e<t.length;e++)t[e].classList.remove("active");t=this.host.querySelector("#tab-content").children;for(let e=0;e<t.length;e++)t[e].classList.remove("active");if(e==="start-tab"){this.host.querySelector("#start-tab-header").classList.add("active");this.host.querySelector("#start-tab").classList.add("active")}else{this.tabs[e].tabHeader.classList.add("active");this.tabs[e].content.classList.add("active")}}async closeTab(e){if(!this.tabs[e])return;const t=this.tabs[e];t.tabHeader.remove();t.content.remove();delete this.tabs[e];const r=Object.keys(this.tabs);await this.showTab(r.length===0?"start-tab":r[r.length-1])}async openTokenScriptTab(e,t,r,n){this.app.showTsLoader();try{const r=await this.app.loadTokenscript(e,t);this.addTab(r,n)}catch(e){console.error(e);alert("Failed to load TokenScript: "+e.message)}this.app.hideTsLoader()}addTab(e,t){const r=Date.now().toString();new URLSearchParams(document.location.search);const n=this.tabs[r]={tabHeader:document.createElement("tab-header-item",{is:"tab-header-item"}),content:document.createElement("viewer-tab",{is:"viewer-tab"})};n.tabHeader.tabView=this;n.tabHeader.tabId=r;n.tabHeader.tabTitle=e.getLabel();n.content.app=this.app;n.content.tabId=r;n.content.tokenScript=e;this.host.querySelector("#tab-header").appendChild(n.tabHeader);this.host.querySelector("#tab-content").appendChild(n.content);this.showTab(r);if(t)this.connectEmulatorSocket(r,t)}async connectEmulatorSocket(e,t){try{const r=new WebSocket("ws://"+new URL(t).host+"/ws");r.onopen=e=>{console.log("connected: ",e.type);r.send("Websocket client connected!")};r.onmessage=async r=>{if(r.data!="BUILD_UPDATED")return;try{this.tabs[e].content.tokenScript=await this.app.loadTokenscript("url",t+"/tokenscript.tsml")}catch(e){console.error(e);alert("Failed to reload TokenScript changes")}}}catch(e){console.error(e)}}processUrlLoad(){console.log("loading from URL: "+document.location.hash);const e=document.location.search.substring(1);if(!e)return false;const t=new URLSearchParams(e);if(t.has("emulator")){console.log("Emulator mode enabled!");let e=t.get("emulator");if(e){e=new URL(e).origin;console.log("Using remote host for tokenscript dev server: "+e)}else{e=document.location.origin}this.openTokenScriptTab("url",e+"/tokenscript.tsml",null,e);return true}else if(t.has("tokenscriptUrl")){this.openTokenScriptTab("url",t.get("tokenscriptUrl"));return true}else if(t.has("chain")&&t.has("contract")){const e=t.get("chain")+"-"+t.get("contract");this.openTokenScriptTab("resolve",e);return true}return false}componentDidLoad(){this.processUrlLoad()}render(){return[h$1("div",{key:"ffd031dedede3d49ed4c7fdde131299c37c473e0",id:"tab-header"},h$1("tab-header-item",{key:"8944ea9a9896d1e239f588097c8b1bb69bc35bc1",id:"start-tab-header",class:"active",tabId:"start-tab",tabView:this,tabTitle:"Start",closable:false})),h$1("div",{key:"b3d27cd6017f82fac0fb21bbacaab23f9e59dfc5",id:"tab-content"},h$1("start-tab",{key:"d139e4e45a8c5a11102d511c1d23656e4a6f4a8a",id:"start-tab",tabId:"start-tab",class:"active",tabView:this}))]}get host(){return getElement(this)}};TabbedViewer.style=TabbedViewerStyle0;const tokenButtonCss=".token-button{width:300px;height:96px;display:flex;justify-content:left;align-items:center;margin:10px;border:1px #000 solid;border-radius:5px;overflow:hidden}.token-button.disabled{opacity:0.8}.token-details{padding:10px}h5{margin:5px 0}token-icon{width:100px;height:100px}";const TokenButtonStyle0=tokenButtonCss;const TokenButton=class{constructor(e){registerInstance(this,e);this.token=undefined;this.enabled=undefined;this.buttonTitle=undefined;this.clickHandler=undefined}componentWillLoad(){}render(){return h$1("div",{key:"95f3cc3f0c4dbb23e6ef111d549b866c4861d472",class:"token-button"+(this.enabled?"":" disabled"),title:this.buttonTitle,onClick:this.enabled?()=>this.clickHandler(this.token):null,style:{cursor:this.enabled?"pointer":"not-allowed"}},h$1("token-icon",{key:"423b2f67c7a2058bc66db3cc96777038bede37dd",src:this.token.image,imageTitle:this.token.name}),h$1("div",{key:"72209c23e5025a2470ad316794f0fac51c77dbf2",class:"token-details"},h$1("h5",{key:"a7151e8f862021d9514d133a2ad776028558e926"},this.token.name),"tokenId"in this.token&&this.token.tokenId?h$1("span",{title:this.token.tokenId.toString()},"#",this.token.tokenId):""))}};TokenButton.style=TokenButtonStyle0;const tokenIconCss=':host{display:flex;align-items:center;justify-content:center;position:relative;height:auto;overflow:hidden}img{width:100%}div{display:flex;position:relative;overflow:hidden;width:100%;aspect-ratio:1 / 1;flex-direction:column;justify-content:center}.shimmer{display:inline-block;background-color:#dddbdd;height:100%;width:100%}.shimmer:after{position:absolute;top:0;right:0;bottom:0;left:0;transform:translateX(-100%);background-image:linear-gradient(\n\t\t90deg,\n\t\trgba(255, 255, 255, 0) 0,\n\t\trgba(255, 255, 255, 0.2) 20%,\n\t\trgba(255, 255, 255, 0.5) 60%,\n\t\trgba(255, 255, 255, 0)\n\t);animation:shimmer 2s infinite;content:""}@keyframes shimmer{100%{transform:translateX(100%)}}';const TokenIconStyle0=tokenIconCss;const TokenIcon=class{constructor(e){registerInstance(this,e);this.src=undefined;this.imageTitle=undefined;this.image=undefined;this.loaded=false}connectedCallback(){this.loadImage()}loadImage(){let e=this.src;let t;if(e&&e!=="undefined"){t=h$1("img",{alt:this.imageTitle,src:e,onLoad:()=>{this.loaded=true},onError:e=>{this.image=this.createAvatar();this.loaded=true}})}else{t=this.createAvatar();this.loaded=true}this.image=t}createAvatar(){var e;const t=(e=this.imageTitle)!==null&&e!==void 0?e:"Unknown Token";return h$1("img",{alt:t,src:this.generateAvatar(t)})}generateAvatar(e){const t=document.createElement("canvas");const r=t.getContext("2d");t.width=300;t.height=300;if(!r)return"";r.fillStyle=this.getRandomBackgroundColor();r.fillRect(0,0,t.width,t.height);r.font="bold 150px 'Arial', sans-serif";r.fillStyle="#fff";r.textAlign="center";r.textBaseline="middle";let n=e.split(" ");let i="";for(let e=0;i.length<2&&e<n.length;e++){let t=n[e].split("");if(t.length)i+=t[0].toUpperCase()}r.fillText(i,t.width/2,t.height/2);return t.toDataURL("image/png")}getRandomBackgroundColor(){return"#0029a7"}render(){return h$1("div",{key:"a0567c5dcfa4b67e6d7de4d494901b564270c9e2",class:this.loaded?"":"shimmer",title:this.imageTitle},this.image)}static get watchers(){return{src:["loadImage"]}}};TokenIcon.style=TokenIconStyle0;const tokenInfoPopoverCss=".attribute-container{display:grid;grid-template-columns:repeat(auto-fill, minmax(120px, 1fr));grid-gap:10px}.attribute-item{border:2px solid #001AFF;border-radius:5px;min-height:80px;padding:5px;overflow:hidden}.attribute-item h5{margin:2px 0 5px}.attribute-item span{display:block;overflow:hidden;text-overflow:ellipsis;font-size:14px}";const TokenInfoPopoverStyle0=tokenInfoPopoverCss;const TokenInfoPopover=class{constructor(e){registerInstance(this,e);this.token=undefined;this.tsAttributes=[];this.description="";this.tokenScript=undefined}async openDialog(e){this.token=e;const[t,r]=this.token.contextId.split("-");this.tokenScript.setCurrentTokenContext(t,r?parseInt(r):null);const n=[];for(const e of this.tokenScript.getAttributes()){const t=await e.getCurrentValue();if(t!==undefined)n.push({label:e.getLabel(),value:t})}this.tsAttributes=n;this.description="attributes"in this.token?await getHardcodedDescription(this.tokenScript,this.token):this.token.description;await this.dialog.openDialog()}async closeDialog(){await this.dialog.closeDialog()}render(){return h$1("popover-dialog",{key:"142137504403344a3369113f92fa4a9ce3e679f9",ref:e=>this.dialog=e},this.token?h$1("div",null,h$1("h4",null,this.token.name),h$1("p",{innerHTML:this.description!==this.token.name?this.description.replace(/\n/g,"<br/>"):""}),"attributes"in this.token&&this.token.attributes.length?h$1("div",{class:"attribute-container"},this.token.attributes.map((e=>{let t=e.value;switch(e.display_type){case"date":const e=new Date(parseInt(t)*1e3);t=e.toLocaleDateString()+" "+e.toLocaleTimeString();break}return h$1("div",{class:"attribute-item"},h$1("h5",null,e.trait_type),h$1("span",{title:t},t))}))):"",this.tsAttributes.length?h$1("div",null,h$1("h4",null,"TokenScript Attributes"),h$1("div",{class:"attribute-container"},this.tsAttributes.filter((({label:e,value:t})=>e&&typeof t!=="object")).map((({label:e,value:t})=>h$1("div",{class:"attribute-item"},h$1("h5",null,e),h$1("span",{title:t.toString()},t.toString())))))):""):"")}};TokenInfoPopover.style=TokenInfoPopoverStyle0;const tokenSecurityStatusCss=".token-security-status{box-sizing:border-box;border-radius:25px;font-size:16px;width:25px;height:25px;text-align:center;cursor:pointer;display:flex;align-items:center;justify-content:center}.security-popover-icon{font-size:50px;margin:0 0 10px}";const TokenSecurityStatusStyle0=tokenSecurityStatusCss;const TokenSecurityStatus=class{constructor(e){registerInstance(this,e);this.tokenScript=undefined;this.originId=undefined;this.securityInfo=undefined;this.statusColor=undefined;this.statusIcon=undefined}async componentWillLoad(){this.securityInfo=await this.tokenScript.getSecurityInfo().getOriginInfo(this.originId)}updateStatusState(){var e;switch((e=this.securityInfo)===null||e===void 0?void 0:e.status){case SecurityStatus$1.VALID:this.statusColor="#3bd23b";this.statusIcon="";break;case SecurityStatus$1.INVALID:default:this.statusColor="#ff4f4f";this.statusIcon="";break}}getDetailedSecurityInfo(){return(this.securityInfo.trustedKey?"Issued by: "+this.securityInfo.trustedKey.issuerName+"\n\n"+"Signer key: "+this.securityInfo.trustedKey.value:"")+(this.securityInfo.signingKey?"Signer Key: "+this.securityInfo.signingKey:"")}render(){return this.securityInfo?h$1(Host,null,h$1("div",{class:"token-security-status",style:{background:this.statusColor},title:this.securityInfo.statusText+"\n\n"+this.getDetailedSecurityInfo(),onClick:()=>this.dialog.openDialog()},this.statusIcon),h$1("popover-dialog",{ref:e=>this.dialog=e},h$1("h1",{class:"security-popover-icon",style:{color:this.statusColor}},this.statusIcon),h$1("strong",null,this.securityInfo.statusText),h$1("p",{style:{wordWrap:"break-word"},innerHTML:this.getDetailedSecurityInfo().replaceAll("\n","<br/>")}))):""}static get watchers(){return{securityInfo:["updateStatusState"]}}};TokenSecurityStatus.style=TokenSecurityStatusStyle0;const tokenViewerCss="@import url('https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&display=swap'); header{display:none}*{font-family:'Space Grotesk', sans-serif;color:#333}.token-viewer{max-width:650px;width:100%;margin:0 auto 90px;display:flex;flex-direction:column}token-viewer:has(>card-popover .open){overflow:hidden;max-height:100vh}.token-viewer:has(+card-popover .open){overflow:hidden}.details-container{flex-grow:1}.image-container{min-height:100px}.token-viewer img{max-width:100%}.token-viewer .main-info{border-bottom:1px solid #F7F6F0}.main-info h1{font-size:16px;font-weight:700;line-height:20px;margin:0;padding:0}.extra-info{display:flex;flex-direction:column;gap:16px}.main-info{padding:0 16px 16px;display:flex;flex-direction:column;gap:8px}.main-info .collection-details{display:flex;align-items:center;gap:8px}.title-row{display:flex;align-items:center;margin:16px 0 0}.title-container{flex-grow:1}.security-wrapper{margin-right:-5px}.main-info .owner-count{color:#3D45FB;font-size:12px;font-weight:700;line-height:14px;letter-spacing:0.24px}.collection-details h4{font-size:14px;margin:0;font-weight:600;line-height:20px;flex-grow:1}.collection-details span{font-size:12px;font-weight:600;line-height:20px}.extra-info{padding:8px 16px 16px}.extra-info p{margin:0 0 16px}.attribute-container{display:grid;grid-template-columns:repeat(auto-fill, minmax(120px, 1fr));grid-gap:10px}.attribute-item{border-radius:8px;border:1px solid #8D98F8;min-height:64px;padding:6px 4px;overflow:hidden}.attribute-item h5{font-size:12px;font-weight:500;line-height:16px;margin:0}.attribute-item span{font-size:12px;font-weight:400;line-height:16px;word-break:break-word}.jid-btn{display:flex;height:44px;padding:14px 25px;justify-content:center;align-items:center;border-radius:16px;gap:10px;flex:1 0 0;border:1px solid #333 !important;background:#FFF;font-size:14px;font-weight:700;letter-spacing:0.28px;color:#333;cursor:pointer}.jid-btn:disabled{border:1px solid rgba(32, 31, 34, 0.40);background:rgba(32, 31, 34, 0.20);color:#201F2266}.popover-container .close-btn{top:10px !important;color:#000 !important;width:24px;height:24px;font-size:14px;display:flex;align-items:center;justify-content:center;border:1px solid #000;border-radius:25px;z-index:50;text-transform:uppercase}.popover-container .close-btn:hover{color:#2a2a2a !important;border-color:#2a2a2a}.popover-inner{margin-top:40px !important}.popover-container{max-height:calc(100dvh - 50px) !important}.card-container{height:calc(100dvh - 50px) !important}.tokenscript-frame,.card-container,.iframe-wrapper{border-radius:0 !important}action-bar{position:fixed;width:100%;left:0;bottom:0;background:#fff}";const TokenViewerStyle0=tokenViewerCss;const TokenViewer=class{constructor(e){registerInstance(this,e);this.showToast=createEvent(this,"showToast",7);this.showLoader=createEvent(this,"showLoader",7);this.hideLoader=createEvent(this,"hideLoader",7);this.app=undefined;this.tokenDetails=undefined;this.tokenScript=undefined;this.description="";this.cardButtons=undefined;this.actionsEnabled=true}async componentDidLoad(){try{const e=new URLSearchParams(document.location.search.substring(1));const t=new URLSearchParams(document.location.hash.substring(1));for(const[r,n]of t.entries()){e.set(r,n)}this.urlRequest=e;await this.processUrlLoad()}catch(e){console.error(e);this.showToast.emit({type:"error",title:"Failed to load token details",description:e.message})}}async processUrlLoad(){const e=document.location.search.substring(1);if(!e)return false;const t=new URLSearchParams(e);if(t.has("chain")&&t.has("contract")&&t.has("tokenId")){if(t.get("actionsEnabled")==="false")this.actionsEnabled=false;this.app.showTsLoader();this.tokenDetails=await getSingleTokenMetadata(parseInt(t.get("chain")),t.get("contract"),t.get("tokenId"));console.log("Token meta loaded!",this.tokenDetails);this.app.hideTsLoader();this.loadTokenScript();return true}throw new Error("Could not locate token details using the values provided in the URL")}async loadTokenScript(){try{const e=parseInt(this.urlRequest.get("chain"));const t=this.urlRequest.get("contract");const r=e+"-"+t;const n=await this.app.loadTokenscript("resolve",r);const i=n.getTokenOriginData();let s;for(const r of i){if(r.chainId===e&&t.toLowerCase()===t.toLowerCase()){s=r;r.tokenDetails=[this.tokenDetails];break}}if(s){n.setTokenMetadata(i);class e{getTokens(e,t){return Promise.resolve(i)}}this.app.discoveryAdapter=new e;n.setCurrentTokenContext(s.originId,0);this.tokenScript=n;this.description=await getHardcodedDescription(this.tokenScript,this.tokenDetails)}}catch(e){console.warn(e.message);this.description=this.tokenDetails.description}}render(){var e,t;return h$1(Host,{key:"682d50c0f9751bfed111fae5a074482aa5bc1a75"},h$1("div",{key:"b496e2c5794fde518e2b02960b7e2fb167458f67",class:"token-viewer"},this.tokenDetails?h$1("div",null,h$1("div",{class:"details-container"},h$1("div",{class:"image-container"},h$1("token-icon",{style:{minHeight:"100px;"},src:this.tokenDetails.image,imageTitle:this.tokenDetails.name})),h$1("div",{class:"info-container"},h$1("div",{class:"main-info"},h$1("div",{class:"title-row"},h$1("div",{class:"title-container"},h$1("h1",null,this.tokenDetails.name),h$1("div",{class:"owner-count"},h$1("span",{style:{color:"#3D45FB"}},this.tokenDetails.collectionDetails.tokenType==="erc1155"?"balance: "+this.tokenDetails.balance:"#"+this.tokenDetails.tokenId))),h$1("div",{class:"security-wrapper"},this.tokenScript?h$1("security-status",{tokenScript:this.tokenScript,size:"small"}):"")),h$1("div",{class:"collection-details"},h$1("token-icon",{style:{width:"24px",borderRadius:"4px"},src:this.tokenDetails.collectionDetails.image,imageTitle:this.tokenDetails.collectionDetails.name}),h$1("h4",null,(e=this.tokenDetails.collectionDetails.name)!==null&&e!==void 0?e:this.tokenDetails.name),h$1("span",null,this.tokenDetails.collectionDetails.tokenType.toUpperCase()))),h$1("div",{class:"extra-info"},h$1("p",{innerHTML:this.description.replace(/\n/g,"<br/>")}),h$1("div",{class:"attribute-container"},((t=this.tokenDetails.attributes)===null||t===void 0?void 0:t.length)?this.tokenDetails.attributes.map((e=>h$1("div",{class:"attribute-item",title:e.trait_type+": "+e.value},h$1("h5",null,e.trait_type),h$1("span",null,e.value)))):"")))),h$1("action-bar",{engine:this.app.tsEngine,tokenDetails:this.tokenDetails,tokenScript:this.tokenScript,actionsEnabled:this.actionsEnabled})):""),h$1("card-popover",{key:"03e0201fca23df1269d328c50e987a68ed2a55b2",tokenScript:this.tokenScript}))}};TokenViewer.style=TokenViewerStyle0;const tokensGridCss=".tokens-grid{display:flex;flex-wrap:wrap;padding:15px;margin:0 auto;position:relative}@media (max-width: 768px) and (min-width: 571px){.tokens-grid{justify-content:space-evenly}.tokens-grid-item{width:250px !important}}@media (max-width: 570px){.tokens-grid{justify-content:center}.tokens-grid-item{width:100% !important}}";const TokensGridStyle0=tokensGridCss;const TokensGrid=class{constructor(e){registerInstance(this,e);this.showToast=createEvent(this,"showToast",7);this.showLoader=createEvent(this,"showLoader",7);this.hideLoader=createEvent(this,"hideLoader",7);this.tokenScript=undefined;this.currentTokensFlat=undefined;this.loading=true}async componentDidLoad(){await this.initTokenScript()}async initTokenScript(){this.tokenScript.on("TOKENS_UPDATED",(e=>{this.populateTokens(e.tokens)}),"grid");this.tokenScript.on("TOKENS_LOADING",(()=>{this.loading=true;this.currentTokensFlat=null;console.log("Tokens loading")}),"grid");setTimeout((async()=>{await this.populateTokens(await this.tokenScript.getTokenMetadata());this.invokeUrlAction()}),500)}async populateTokens(e){this.loading=false;this.currentTokens=e;this.currentTokensFlat=getTokensFlat(this.currentTokens)}async invokeUrlAction(){const e=new URLSearchParams(document.location.hash.substring(1));if(!e.has("card"))return;const t=e.get("card");const r=findCardByUrlParam(t,this.tokenScript);if(!r){this.showToast.emit({type:"error",title:"Card not found",description:"The card '"+t+"' cannot be found."});return}for(let e of this.currentTokensFlat){const t={originId:e.originId,chainId:"chainId"in e?e.chainId:e.collectionDetails.chainId,selectedTokenId:"tokenId"in e?e.tokenId:undefined};if(r.card.isAvailableForOrigin(e.originId)&&await r.card.isEnabledOrReason(t)===true){this.showCard(r.card,e,r.index);return}}this.showToast.emit({type:"error",title:"No supported tokens",description:"None of your tokens support the "+t+" action."})}async showCard(e,t,r){var n;const i=t.contextId.split("-");this.tokenScript.setCurrentTokenContext(i[0],i.length>1?parseInt(i[1]):null);window.scrollTo(0,0);try{await this.tokenScript.showOrExecuteTokenCard(e,(async e=>{if(e.status==="started")this.showLoader.emit();if(e.status==="confirmed")this.hideLoader.emit();await showTransactionNotification(e,this.showToast)}))}catch(e){console.error(e);this.hideLoader.emit();handleTransactionError(e,this.showToast);return}if(e.view)history.replaceState(undefined,undefined,"#card="+((n=e.name)!==null&&n!==void 0?n:r))}render(){var e;return h$1(Host,{key:"6ca26ed2148667467e732806980d6177f2f60a8f"},h$1("div",{key:"b0123184428ff2454b4643aa804b8218a1028b45",class:"tokens-grid"},h$1("loading-spinner",{key:"adabe78793d6d73a74c7468ef40fb5d7bc75108e",color:"#1A42FF",size:"small",style:{display:this.loading?"block":"none"}}),((e=this.currentTokensFlat)===null||e===void 0?void 0:e.length)?this.currentTokensFlat.map((e=>h$1("tokens-grid-item",{key:e.contextId,tokenScript:this.tokenScript,token:e,showCard:this.showCard.bind(this)}))):!this.loading?h$1("h3",null,Web3WalletProvider.isWalletConnected()?"You don't have any tokens associated with this TokenScript":"Connect wallet to load tokens"):""),h$1("token-info-popover",{key:"2513b332013d25fcca40ebfdb8aa87d0ab82a7c4",id:"token-info-popover",tokenScript:this.tokenScript}))}static get watchers(){return{tokenScript:["initTokenScript"]}}};TokensGrid.style=TokensGridStyle0;const tokensGridItemCss=".tokens-grid-item{margin:10px;border-radius:10px;box-shadow:0 4px 16px rgba(0, 0, 0, 0.08);width:300px;max-width:350px;overflow:hidden;background:#FFFEFE;position:relative}.tokens-grid-item img{width:100%}.tg-item-details{padding:10px;overflow:hidden;position:relative}.tokens-grid-item h5{margin:10px 0 0 0;font-size:18px}.tokens-grid-item span{font-size:14px;margin-bottom:5px;display:inline-block}.tokens-grid-item span,.tokens-grid-item h5{overflow:hidden;max-width:100%;text-overflow:ellipsis ellipsis}.actions{text-align:center}.actions>button{display:block;width:100%;margin:8px 0}.more-actions-btn{background:none !important;border:none !important;font-weight:bold;color:rgb(84, 84, 84)}.info-btn{position:absolute;right:0;top:0;width:25px;min-width:unset !important;font-weight:bold;height:25px !important;margin:18px 10px;border-radius:25px !important;border:none !important;padding:0}.info-btn img:hover{filter:opacity(80%)}token-security-status{position:absolute;top:0;left:0;margin:10px}.delete-attest-btn{position:absolute;top:0;right:0;margin:10px;background:none;border:none;font-weight:bold;font-size:20px;cursor:pointer}.tokens-grid-item>token-icon{background:#0000000a}";const TokensGridItemStyle0=tokensGridItemCss;const TokensGridItem=class{constructor(e){registerInstance(this,e);this.tokenScript=undefined;this.token=undefined;this.showCard=undefined;this.cardButtons=undefined;this.overflowCardButtons=undefined}async componentDidLoad(){await this.loadCardButtons()}async loadCardButtons(){const e=[];const t=[];const r={originId:this.token.originId,chainId:"chainId"in this.token?this.token.chainId:this.token.collectionDetails.chainId,selectedTokenId:"tokenId"in this.token?this.token.tokenId:undefined};const n=this.tokenScript.getCards(this.token.originId);for(let[i,s]of n.entries()){let n=s.label;if(n==="Unnamed Card")n=s.type==="token"?"Token Info":s.type+" Card";try{const a=await s.isEnabledOrReason(r);if(a===false)continue;const o=h$1("button",{class:"btn "+getCardButtonClass(s,i),onClick:()=>this.showCard(s,this.token,i),disabled:a!==true,title:a!==true?a:n},n);if(a!==true||e.length>2){t.push(o)}else{e.push(o)}}catch(e){console.error("Failed to check if card is available",e)}}this.cardButtons=e;this.overflowCardButtons=t}showTokenInfo(e){document.getElementById("token-info-popover").openDialog(e)}async deleteAttestation(){if("collectionId"in this.token&&confirm("Are you sure you want to delete this attestation?")){await this.tokenScript.getEngine().getAttestationManager().removeAttestation(this.token.collectionId,this.token.tokenId);this.tokenScript.getTokenMetadata(true)}}render(){var e,t,r;let n;let i;if("tokenId"in this.token&&this.token.tokenId){n="#"+this.token.tokenId;i=this.token.name}else{n=this.token.name;if("decimals"in this.token)i="Balance: "+EthUtils.calculateDecimalValue(this.token.balance,this.token.decimals)}return h$1(Host,{key:"46efc1dca307c079fed609dc1e6f33def9f116e2",class:"tokens-grid-item"},h$1("token-icon",{key:"729a6851da6bf7d7839c7c10dcdf5eaff215b9cb",src:this.token.image,imageTitle:this.token.name}),h$1("div",{key:"90fa0e23f817560647a2b5f82ef53181246cdc9b",class:"tg-item-details"},h$1("h5",{key:"3b063aa98e4f1cd22632934ebbbfcb4095029749"},n),i?h$1("span",{title:i},i):"",h$1("button",{key:"ffb3088eccb8ce44da7f2b875373a029f1ca20f7",class:"btn btn-secondary info-btn",onClick:()=>this.showTokenInfo(this.token)},h$1("img",{key:"da88c57e9120cabf8c28c80b84e0a8dfbc380cfb",alt:"info",src:"/assets/icon/info.svg"})),h$1("div",{key:"c3b42974f63ca63e7174b2d0fa5fd4d2a363cefa",class:"actions"},this.cardButtons?this.cardButtons:h$1("loading-spinner",{color:"#595959",size:"small",style:{textAlign:"center"}}),((e=this.overflowCardButtons)===null||e===void 0?void 0:e.length)?[h$1("button",{class:"btn more-actions-btn",onClick:()=>this.overflowDialog.openDialog()},"+ More actions"),h$1("action-overflow-modal",{ref:e=>this.overflowDialog=e},h$1("div",{class:"actions"},this.overflowCardButtons))]:"")),h$1("token-security-status",{key:"9f528e6a2782bcadf221b3dca68b330a4084d913",tokenScript:this.tokenScript,originId:this.token.originId}),((r=(t=this.token)===null||t===void 0?void 0:t.data)===null||r===void 0?void 0:r.type)==="eas"?h$1("button",{class:"delete-attest-btn",title:"Delete attestation",onClick:()=>this.deleteAttestation()},"X"):"")}static get watchers(){return{tokenScript:["loadCardButtons"]}}};TokensGridItem.style=TokensGridItemStyle0;const tokenscriptButtonCss=".ts-button{width:250px;height:60px;display:flex;justify-content:left;align-items:center;background-color:#FFFEFE;box-shadow:0 4px 12px rgba(0, 0, 0, 0.08);border-radius:10px;overflow:hidden}@media screen and (max-width: 768px){.ts-button{width:300px}}@media screen and (max-width: 480px){.ts-button{min-width:250px;width:100%}}.ts-button.disabled{opacity:0.8}.ts-details{padding:10px;flex-grow:1;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.ts-details>span{font-size:12px;color:#545454}.ts-details>h5{margin:2px 0}.ts-button>token-icon{margin-left:5px;border-radius:5px;width:50px;height:50px;flex-shrink:0}.ts-button>.remove-btn{align-self:start;background:none;font-weight:bold;border:none;cursor:pointer;color:#0B0B0B}";const TokenscriptButtonStyle0=tokenscriptButtonCss;const TokenscriptButton=class{constructor(e){registerInstance(this,e);this.tsId=undefined;this.name=undefined;this.tokenScript=undefined;this.subText=undefined;this.imageUrl=undefined;this.enabled=true;this.onRemove=undefined}async connectedCallback(){if(!this.tokenScript)return;this.subText="loading...";const e=await this.tokenScript.getTokenMetadata();this.updateTokenStatus(e);this.tokenScript.on("TOKENS_UPDATED",(e=>{this.updateTokenStatus(e.tokens)}),"ts-button");this.tokenScript.on("TOKENS_LOADING",(()=>{this.subText="loading..."}),"ts-button")}updateTokenStatus(e){const t=getTokensFlat(e);this.subText=`${t.length} Tokens`;this.enabled=t.length>0}render(){return h$1(Host,{key:"9793eb8be75c8e8951ef88c8f2465af3a81aa669",class:"ts-button"+(this.enabled?"":" disabled"),title:this.name,style:{cursor:this.enabled?"pointer":"not-allowed"}},h$1("token-icon",{key:"9c34ca5f582ff0af947bd18d010d2f81f2ba1db6",src:this.imageUrl,imageTitle:this.name}),h$1("div",{key:"0e47d0986c29738c03587b8164ca24f4bc9d1393",class:"ts-details"},h$1("h5",{key:"dc41f313d124a418798b5b41988278d360a8d18f"},this.name),this.subText?h$1("span",null,this.subText):""),this.onRemove?h$1("button",{class:"remove-btn",onClick:e=>{e.stopPropagation();this.onRemove(this.tsId)}},"X"):"")}};TokenscriptButton.style=TokenscriptButtonStyle0;const tokenscriptGridCss=".ts-grid{display:flex;gap:10px;flex-wrap:wrap}@media (max-width: 768px){.ts-grid{justify-content:space-evenly}}";const TokenscriptGridStyle0=tokenscriptGridCss;const TokenscriptGrid=class{constructor(e){registerInstance(this,e)}render(){return h$1(Host,{key:"c46237cece67a341ac36fbba865d9170154e83a7",class:"ts-grid"},h$1("slot",{key:"de918e9d9ca9f28219149739f272b946367465ed"}))}};TokenscriptGrid.style=TokenscriptGridStyle0;const transferDialogCss=".token-viewer .transfer-form{display:flex;flex-direction:column;min-height:300px}.token-viewer .transfer-form>div{flex-grow:1;margin:0 10px}.token-viewer .transfer-form>button{flex-grow:0;margin:0 10px 10px}.token-viewer .transfer-form h3{text-align:center}.token-viewer .form-field{margin-bottom:16px}.token-viewer .form-field label{font-size:12px;padding-bottom:20px;font-weight:700;color:rgba(32, 31, 34, 0.4)}.token-viewer .form-field input,.token-viewer .form-field textarea{display:block;outline:transparent solid 2px;outline-offset:2px;border:1px solid #333;border-radius:12px;padding-inline:16px;background:#F7F6F0;width:100%;height:40px}";const TransferDialogStyle0=transferDialogCss;const TransferDialog=class{constructor(e){registerInstance(this,e);this.showToast=createEvent(this,"showToast",7);this.showLoader=createEvent(this,"showLoader",7);this.hideLoader=createEvent(this,"hideLoader",7);this.engine=undefined;this.tokenDetails=undefined;this.recipient="";this.amount=1}async openDialog(){await this.dialog.openDialog()}async closeDialog(){await this.dialog.closeDialog()}async transferToken(){const e=await this.engine.getWalletAdapter();const t="safeTransferFrom";const r=[{name:"from",type:"address",value:await e.getCurrentWalletAddress()},{name:"to",type:"address",value:this.recipient},{name:"tokenId",type:"uint256",value:BigInt(this.tokenDetails.tokenId)}];if(this.tokenDetails.collectionDetails.tokenType==="erc1155"){r.push({name:"amount",type:"uint256",value:BigInt(this.amount)},{name:"data",type:"bytes",value:"0x00"})}this.showLoader.emit();try{await e.sendTransaction(this.tokenDetails.collectionDetails.chainId,this.tokenDetails.collectionDetails.contractAddress,t,r,[],null,true,(async e=>{if(e.status==="confirmed")this.hideLoader.emit();await showTransactionNotification(e,this.showToast)}))}catch(e){console.error(e);this.hideLoader.emit();handleTransactionError(e,this.showToast);return}this.closeDialog()}render(){return h$1("popover-dialog",{key:"3e0fba6d1067fdac5352d370a126af35654f91a9",ref:e=>this.dialog=e,dialogStyles:{maxWidth:"400px"}},h$1("form",{key:"7cd82c286f2a2f546fa87bc90f408569f487dc9b",class:"transfer-form",onSubmit:e=>{e.preventDefault();this.transferToken()}},h$1("div",{key:"fb1c5dac7cd8b6f9bb95fe9a326371b05aa801b0"},h$1("h3",{key:"797d8af6fecaf483ff95146d09b4308162b19a2b"},"Send"),h$1("div",{key:"1233aceb97874377686ea615037550a3efd06469",class:"form-field"},h$1("label",{key:"eafb303f9dc1e68e26769ae8015c2f6bd162c1dc"},"Send to"),h$1("input",{key:"3f079568c13a456918b8fae8a4cf390652bb9bc5",type:"text",value:this.recipient,placeholder:"Ethereum address",onChange:e=>this.recipient=e.target.value,required:true})),this.tokenDetails.collectionDetails.tokenType==="erc1155"?h$1("div",{class:"form-field"},h$1("label",null,"Amount"),h$1("input",{type:"number",value:this.amount,placeholder:"Amount",onChange:e=>this.amount=parseInt(e.target.value),required:true})):""),h$1("button",{key:"59b95031f430d97668d616ddd1e62449aa45f30e",type:"submit",class:"jid-btn jid-transfer-btn"},"Send")))}};TransferDialog.style=TransferDialogStyle0;const viewStepCss=".card-container{position:relative;max-width:500px;margin:50px auto;border-radius:4px}.view-loader{position:absolute;left:0;top:0;width:100%;height:calc(100% - 5px);border-radius:4px;display:flex;align-items:center;justify-content:center;background-color:rgba(87, 87, 87, 0.67)}.popup-tn{z-index:50 !important}.tokenscript-frame{background:#fff;width:100%;height:650px;border:1px solid black;border-radius:4px;box-sizing:border-box}.action-bar{height:35px}.action-btn{width:100%;height:100%}";const ViewStepStyle0=viewStepCss;const ViewStep=class{constructor(e){registerInstance(this,e);this.showToast=createEvent(this,"showToast",7);this.viewer=undefined;this.tokenScript=undefined;this.card=undefined}async componentDidLoad(){this.viewBinding=new ViewBinding(this);this.viewBinding.setTokenScript(this.tokenScript);this.tokenScript.setViewBinding(this.viewBinding);this.tokenScript.showOrExecuteTokenCard(this.card)}render(){return h$1("div",{key:"0bd3c3eaccc62262e7a1fffaa1cd7cb870aff07b"},h$1("div",{key:"50a9886dccd8d921d7a3887393fa632f3447db7e",class:"card-container"},h$1("div",{key:"03090018a49de1e43297332325392e754419eed6",style:{position:"relative"}},h$1("div",{key:"962ffe154c7cd72f264a42c9d4b6df399705a109",class:"view-loader",style:{display:"none"}},h$1("loading-spinner",{key:"741745290ef79f16d2f1f3d33c24ba8c1f093e40"})),h$1("iframe",{key:"888bfd17e56479a2b91ec568eaf12a462291c4df",class:"tokenscript-frame",sandbox:"allow-scripts allow-modals allow-forms allow-popups allow-popups-to-escape-sandbox"})),h$1("div",{key:"53c03ee764ff50a3bfde884c9ae8217bb1624cf9",class:"action-bar",style:{display:"none"}},h$1("button",{key:"ade1bbd480525e4395d5e089744a57c7c5887e76",class:"action-btn btn btn-primary"}))))}get host(){return getElement(this)}};class ViewBinding extends AbstractViewBinding{constructor(e){super(e.host);this.viewStep=e}async confirmAction(){this.currentCard.getTransaction();this.showLoader();const e={status:"confirmed",txNumber:"0x000",txLink:"https://google.com/"};setTimeout((()=>{this.viewStep.showToast.emit({type:"info",title:"Transaction submitted",description:h$1("span",null,"Processing TX, please wait.. ",h$1("br",null),"TX Number: "+e.txNumber)});setTimeout((()=>{this.viewStep.showToast.emit({type:"success",title:"Transaction confirmed",description:h$1("span",null,"TX "+e.txNumber+" confirmed!",h$1("br",null),e.txLink?h$1("a",{href:e.txLink,target:"_blank"},"View On Block Scanner"):"")});this.hideLoader();setTimeout((()=>{console.log("Transaction completed!");this.viewStep.viewer.returnResultToRequester(e)}),1e3)}),3e3)}),1e3)}}ViewStep.style=ViewStepStyle0;const viewerPopoverCss="viewer-popover{position:absolute;width:100%;height:100%;background:#fff;top:0;left:0;display:none}viewer-popover.open{display:block}viewer-popover .view-heading{flex-wrap:nowrap}viewer-popover .view-toolbar-buttons{flex-wrap:nowrap}viewer-popover .view-heading,viewer-popover .view-toolbar-buttons{display:flex;padding:10px 20px;align-items:center}viewer-popover .view-heading>h3{margin:0 0 0 10px;flex-shrink:0;font-weight:600;font-size:24px}viewer-popover .view-heading>button{min-width:30px;font-weight:600;font-size:24px;background:none}viewer-popover .meta-details{margin:0 25px}viewer-popover .meta-details p{color:#545454;font-weight:400;font-size:16px}viewer-popover .meta-details a{font-weight:500;text-decoration:none;display:flex}viewer-popover .meta-details a:hover{filter:opacity(80%)}viewer-popover .meta-details a img{margin:0 5px}";const ViewerPopoverStyle0=viewerPopoverCss;const ViewerPopover=class{constructor(e){registerInstance(this,e);this.tokenScript=undefined}async open(e){this.tokenScript=e}async close(){this.tokenScript=null}render(){var e;return this.tokenScript?h$1(Host,{class:this.tokenScript?" open":""},h$1("div",{class:"toolbar"},h$1("div",{class:"view-heading"},h$1("button",{class:"btn",onClick:()=>this.close()},"<"),h$1("h3",null,(e=this.tokenScript.getLabel())!==null&&e!==void 0?e:this.tokenScript.getName())),h$1("div",{class:"view-toolbar-buttons"},h$1("security-status",{tokenScript:this.tokenScript}),h$1("div",null,h$1("button",{class:"btn",style:{marginRight:"5px",minWidth:"35px",fontSize:"16px"},onClick:()=>{this.tokenScript.getCards().forEach((e=>{e.getAttributes().invalidate()}));this.tokenScript.getAttributes().invalidate();this.tokenScript.getTokenMetadata(true,true)}},""),h$1("wallet-button",null)))),h$1("div",{class:"meta-details"},this.tokenScript.getMetadata().description?h$1("p",null,this.tokenScript.getMetadata().description):"",this.tokenScript.getMetadata().aboutUrl?h$1("a",{href:this.tokenScript.getMetadata().aboutUrl,target:"_blank"},"Discover how it works",h$1("img",{alt:"about",src:"/assets/icon/question.svg"})):""),h$1("tokens-grid",{tokenScript:this.tokenScript}),h$1("card-popover",{tokenScript:this.tokenScript})):""}get host(){return getElement(this)}};ViewerPopover.style=ViewerPopoverStyle0;const viewerTabCss=".toolbar{display:flex;padding:10px 20px 0 20px;justify-content:space-between}attribute-table{position:absolute;bottom:20px}.toast{position:absolute;z-index:200}";const ViewerTabStyle0=viewerTabCss;const ViewerTab=class{constructor(e){registerInstance(this,e);this.showToast=createEvent(this,"showToast",7);this.uuid=Date.now();this.app=undefined;this.tabId=undefined;this.tokenScript=undefined;Web3WalletProvider.registerWalletChangeListener(this.handleWalletChange.bind(this))}handleWalletChange(e){if(e){this.tokenScript.getTokenMetadata(true)}else{this.tokenScript.setTokenMetadata([])}}async loadTs(){if(!this.viewBinding){this.viewBinding=new ViewBinding$1(this.host,this.showToast)}this.viewBinding.setTokenScript(this.tokenScript);this.tokenScript.setViewBinding(this.viewBinding)}componentDidLoad(){if(this.tokenScript)this.loadTs();document.querySelector(".toast").shadowRoot.querySelector(":host > div").setAttribute("style","margin-top: 100px;")}render(){return h$1("div",{key:"a0cdb72a83d915029a76b23c190318e1100d45c4"},h$1("div",{key:"7e8d1ba6a8d93546226fa3d77705274efefd08b9",class:"toolbar"},h$1("security-status",{key:"55e386f635bc275c938f5776cc2cf0ebb1238a5a",tokenScript:this.tokenScript}),h$1("div",{key:"323b4f62514060e40c83c1bc46cf389a1c1c89ce"},h$1("button",{key:"edc8ed239fd9801de44487ffba67260a72b44410",class:"btn",style:{marginRight:"5px",minWidth:"35px",fontSize:"16px"},onClick:()=>this.tokenScript.getTokenMetadata(true,true)},""),h$1("wallet-button",{key:"e5f7ec58789c2e83603913ce8a7b9f63ab6bdf10"}))),h$1("tokens-grid",{key:"2b40f23654443a37fc840b1b7df8567e8125e5b8",tokenScript:this.tokenScript}),h$1("card-modal",{key:"943d3618385e1cfc3f7c2e30dfb215ccab6ce2c0",tokenScript:this.tokenScript}))}get host(){return getElement(this)}static get watchers(){return{tokenScript:["loadTs"]}}};ViewerTab.style=ViewerTabStyle0;const getBrowserData=()=>{var e;const t=!!window.navigator["brave"];let r=false;let n=window.matchMedia;if(n){let e=n("(pointer:coarse)");r=e.matches}let i=window.ethereum;if(typeof window.ethereum==="undefined"){i={isMetaMask:false,isAlphaWallet:false,isTrust:false,isStatusWallet:false,isGoWallet:false,isBraveWallet:false}}const s=r&&!!i.isAlphaWallet;const a=r&&!!i.isTrust;const o=r&&!!i.isStatusWallet;const f=r&&!!i.isGoWallet;const c=r&&!!i.isTrust&&!!i.isMetaMask;const u=(e=window.okxwallet)===null||e===void 0?void 0:e.isOkxWallet;const l=!!navigator.userAgent.match(/\simToken\//);const h=r&&!!i.isMetaMask&&!a&&!t;return{metaMask:h,anyMetamask:!!i.isMetaMask&&!a&&!i.isBraveWallet,alphaWallet:s,mew:c,trust:a,goWallet:f,status:o,imToken:l,brave:t,okx:u}};const metaMask={imgBig:`\n\t\t<svg width="62px" version="1.1" id="Layer_1" xmlns:ev="http://www.w3.org/2001/xml-events"xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 318.6 318.6"style="enable-background:new 0 0 318.6 318.6;" xml:space="preserve"><title>Metamask logo</title><style type="text/css">.st0{fill:#E2761B;stroke:#E2761B;stroke-linecap:round;stroke-linejoin:round;}.st1{fill:#E4761B;stroke:#E4761B;stroke-linecap:round;stroke-linejoin:round;}.st2{fill:#D7C1B3;stroke:#D7C1B3;stroke-linecap:round;stroke-linejoin:round;}.st3{fill:#233447;stroke:#233447;stroke-linecap:round;stroke-linejoin:round;}.st4{fill:#CD6116;stroke:#CD6116;stroke-linecap:round;stroke-linejoin:round;}.st5{fill:#E4751F;stroke:#E4751F;stroke-linecap:round;stroke-linejoin:round;}.st6{fill:#F6851B;stroke:#F6851B;stroke-linecap:round;stroke-linejoin:round;}.st7{fill:#C0AD9E;stroke:#C0AD9E;stroke-linecap:round;stroke-linejoin:round;}.st8{fill:#161616;stroke:#161616;stroke-linecap:round;stroke-linejoin:round;}.st9{fill:#763D16;stroke:#763D16;stroke-linecap:round;stroke-linejoin:round;}</style><polygon class="st0" points="274.1,35.5 174.6,109.4 193,65.8 "/><g><polygon class="st1" points="44.4,35.5 143.1,110.1 125.6,65.8 \t"/><polygon class="st1" points="238.3,206.8 211.8,247.4 268.5,263 284.8,207.7 \t"/><polygon class="st1" points="33.9,207.7 50.1,263 106.8,247.4 80.3,206.8 \t"/><polygon class="st1" points="103.6,138.2 87.8,162.1 144.1,164.6 142.1,104.1 \t"/><polygon class="st1" points="214.9,138.2 175.9,103.4 174.6,164.6 230.8,162.1 \t"/><polygon class="st1" points="106.8,247.4 140.6,230.9 111.4,208.1 \t"/><polygon class="st1" points="177.9,230.9 211.8,247.4 207.1,208.1 \t"/></g><g><polygon class="st2" points="211.8,247.4 177.9,230.9 180.6,253 180.3,262.3 \t"/><polygon class="st2" points="106.8,247.4 138.3,262.3 138.1,253 140.6,230.9 \t"/></g><polygon class="st3" points="138.8,193.5 110.6,185.2 130.5,176.1 "/><polygon class="st3" points="179.7,193.5 188,176.1 208,185.2 "/><g><polygon class="st4" points="106.8,247.4 111.6,206.8 80.3,207.7 \t"/><polygon class="st4" points="207,206.8 211.8,247.4 238.3,207.7 \t"/><polygon class="st4" points="230.8,162.1 174.6,164.6 179.8,193.5 188.1,176.1 208.1,185.2 \t"/><polygon class="st4" points="110.6,185.2 130.6,176.1 138.8,193.5 144.1,164.6 87.8,162.1 \t"/></g><g><polygon class="st5" points="87.8,162.1 111.4,208.1 110.6,185.2 \t"/><polygon class="st5" points="208.1,185.2 207.1,208.1 230.8,162.1 \t"/><polygon class="st5" points="144.1,164.6 138.8,193.5 145.4,227.6 146.9,182.7 \t"/><polygon class="st5" points="174.6,164.6 171.9,182.6 173.1,227.6 179.8,193.5 \t"/></g><polygon class="st6" points="179.8,193.5 173.1,227.6 177.9,230.9 207.1,208.1 208.1,185.2 "/><polygon class="st6" points="110.6,185.2 111.4,208.1 140.6,230.9 145.4,227.6 138.8,193.5 "/><polygon class="st7" points="180.3,262.3 180.6,253 178.1,250.8 140.4,250.8 138.1,253 138.3,262.3 106.8,247.4 117.8,256.4 140.1,271.9 178.4,271.9 200.8,256.4 211.8,247.4 "/><polygon class="st8" points="177.9,230.9 173.1,227.6 145.4,227.6 140.6,230.9 138.1,253 140.4,250.8 178.1,250.8 180.6,253 "/><g><polygon class="st9" points="278.3,114.2 286.8,73.4 274.1,35.5 177.9,106.9 214.9,138.2 267.2,153.5 278.8,140 273.8,136.4 281.8,129.1 275.6,124.3 283.6,118.2 \t"/><polygon class="st9" points="31.8,73.4 40.3,114.2 34.9,118.2 42.9,124.3 36.8,129.1 44.8,136.4 39.8,140 51.3,153.5 103.6,138.2 140.6,106.9 44.4,35.5 \t"/></g><polygon class="st6" points="267.2,153.5 214.9,138.2 230.8,162.1 207.1,208.1 238.3,207.7 284.8,207.7 "/><polygon class="st6" points="103.6,138.2 51.3,153.5 33.9,207.7 80.3,207.7 111.4,208.1 87.8,162.1 "/><polygon class="st6" points="174.6,164.6 177.9,106.9 193.1,65.8 125.6,65.8 140.6,106.9 144.1,164.6 145.3,182.8 145.4,227.6 173.1,227.6 173.3,182.8 "/></svg>\n\t`,label:"MetaMask"};const walletConnectSVG='<svg width="62px" height="62px" viewBox="0 0 319 319" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"><title>Wallet connect logo</title><g transform="matrix(1.7268,0,0,1.7268,159.3,155.744)"><g transform="matrix(1,0,0,1,-107.5,-107.5)"><path d="M55.953,84.792L72.263,100.335C72.263,100.335 84.86,78.281 106.774,78.436C106.774,78.436 126.648,75.152 143.824,101.06L160.354,85.616C160.354,85.616 143.436,59.639 107.409,59.615C107.409,59.615 79.188,56.141 55.953,84.792Z" style="fill:rgb(59,153,252);"/><path d="M42.568,93.225L25.838,109.259L74.827,157.509L107.434,125.302L141.274,157.461L188.677,109.672L172.91,93.916L141.771,126.195L107.369,93.403L74.398,126.501L42.568,93.225Z" style="fill:rgb(59,153,252);"/></g></g></svg>';const walletConnectV2SVG='<svg fill="none" width="62px" height="62px" viewBox="0 0 400 400" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><clipPath id="a"><path d="m0 0h400v400h-400z"/></clipPath><g clip-path="url(#a)"><circle cx="200" cy="200" fill="#141414" r="199.5" stroke="#3b4040"/><path d="m122.519 148.965c42.791-41.729 112.171-41.729 154.962 0l5.15 5.022c2.14 2.086 2.14 5.469 0 7.555l-17.617 17.18c-1.07 1.043-2.804 1.043-3.874 0l-7.087-6.911c-29.853-29.111-78.253-29.111-108.106 0l-7.59 7.401c-1.07 1.043-2.804 1.043-3.874 0l-17.617-17.18c-2.14-2.086-2.14-5.469 0-7.555zm191.397 35.529 15.679 15.29c2.14 2.086 2.14 5.469 0 7.555l-70.7 68.944c-2.139 2.087-5.608 2.087-7.748 0l-50.178-48.931c-.535-.522-1.402-.522-1.937 0l-50.178 48.931c-2.139 2.087-5.608 2.087-7.748 0l-70.7015-68.945c-2.1396-2.086-2.1396-5.469 0-7.555l15.6795-15.29c2.1396-2.087 5.6085-2.087 7.7481 0l50.1789 48.932c.535.522 1.402.522 1.937 0l50.177-48.932c2.139-2.087 5.608-2.087 7.748 0l50.179 48.932c.535.522 1.402.522 1.937 0l50.179-48.931c2.139-2.087 5.608-2.087 7.748 0z" fill="#fff"/></g></svg>';const torusSVG='<svg width="62px" height="62px" viewBox="0 0 319 319" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"><title>Torus logo</title><g transform="matrix(1.9124,0,0,1.9124,159.3,159.3)"><g transform="matrix(1,0,0,1,-107.5,-107.5)"><path d="M57.267,51.007L56.757,84.626L85.505,85.297L85.565,164.593L119.635,164.873L119.472,51.399L57.267,51.007Z" style="fill:rgb(57,150,254);"/><g transform="matrix(1.06773,0,0,1.04155,-3.94432,-8.22515)"><circle cx="139.434" cy="73.102" r="16.365" style="fill:rgb(57,150,254);"/></g></g></g></svg>';const imToken={imgSmall:`\n\t\t<img src='data:image/webp;base64,UklGRmoGAABXRUJQVlA4TF0GAAAvL8ALEAmFbds2kOwC8/+Lc0RE/zPp7qD7G9wl2buwdsdCUdtITp6710v4k70DMQgj0P+Eh9AYiAgdRERgIbA4AESHA3xLCWVp29NW0i+HmpmZmYaZt8y4YlrRjfAdTM12anbMzMzMjIfjSFW2ZOf0FbwujaJOmuRAtm3a1ljPtq3M37Z/aNuKbOW2mdu2bdv2P95Lim1ry96c83yYOURyoqIyhNgOtbaylhlVVyUzfHjd1LYtNZsu85x4oP8mQEI8sFBAhQIWInAAJugRQZWBoXTgtm0k2Zlr1WJ6TbpvEIgAXovL00A2zI/kG/MmTpn3CikQlMAHfzD4kACvRN477fCHffC+xTBtkctBCZ1SaoFRgOMUqjeCu8UnwdMwzrTXQBMhaI1eCAAIAeUvmAiZ9+/J4/AejwsTSmXruehs3vfvpT6v60PwvZ4tMIBIoQWBKBD0Je/SJIwNILCGnGmFE1rhNsy5qSixwApbQq9bDULPLmZBt+uGKIeW1slJy1PReWp2Ifu1VwBxHcuhVVUZcoHM6n8RBEGTgzvlqvxLPyYh+BCKIDApKIKdXPXf6Nv4S30RnIaIgm5sEP2EcKbegU1tpjbTPmXeC+F0deDWKnyBNygRsM9aMAXDKcgp3/UC8Ye9deu2wyis8pOBISFEZEG3p/ZgTgYGr/4ikpUyf1Sw4IDJQPMXHaDRzPJYOgCzitRKggk09i1mdkGBBFEIxaCE6n8Y/acZHbFjHFbULq14AbCyWflnu1Q8iifXYm0bIzaG7Bi1Mexg3IKx5NYy/zXyrywZH+e9xfUKHP/zJh4pimY8KufBri8axtEQ5cy1qyM7l/m5DQG3/V+dfW6lIpFaMMCookEahQk0qxGOGqk5uaLAKkT9fjSKfuxHZ1Ar7SgBt30CQCMaGxvrZns3vx9Sq2ShKW3K6n67+UWFQnc8GBD7/Sz2Ydu4GEd3/gI60Fv7N2O/sa1VA7h0Y0wg46hvVL1atCjxhAU0JQujsk45/P/ywxuMwV0RsZXWdPDaiRj9DaiF64jlq7YpMb48pNO2VKaRbxBE/tvAKWJ8ddDR7Qqv7tzsoDM3MrSUmo1fXwCYW4QO6huju2NalOmfl8AoNCUPDSpLqR+7J60E8NU5bQApEg1NmZcr4N+PUsCAjqMH+6hUP52SQhnPoFHZtdMAyysCJATGCOj4gNTBq8M6CRhMoPcOokyi+Gl9kRhohFFk0BA2SIOYGgtY3RBfXFQNCJrK7oHunc+v4ONzuL+wV0MSBW2rL4oy/XArFDIh6mukKTlUQAQCBGU6axtO7DqgbePhbmoSYBy0Kb0WkURBufjHNK65Nyk7lld3lk9ufL06ahEQQFYFAyKiyKA22DU3Tu83gl9fbzQ4JIrss1GeUqMxdPXVybo6KtPJU0cjYPimVLiAaK/DCMogXjpnBMxOL8fM2g2hJtHDH794cuoQTI0XJZqWXDbMLe1/aEQAID9BRARIqIYotz5tCQBmJJeL5h744x3arqbGaU4mKPfOPoNRpFUqQlg2FEMoEMlh6mHXhN3S0hbde2Fxqwk6/6EV7udlFHZ+iwyh04e2ulcShjl9lAINNCrIG05+UwLjaQpYXNTqWvUUpSh4D5X73e3Dgn5GYSSC7tS2MfwGXiu8Rh6wYHRSrgLEOPpq9een37rRNzc2DzWP8UeoRQpEIKjoAXLoM5igf1m8se+D1NnUI1WiX1/E4/N3b8wvDaQiVVExACxoNAqzgShUGGbQemzse2ctvXRkJywrk6vhH/jy+u6VBfj5QGMaaEaFhMlhYEEDAAsqkEMlaEpJVW1Coa2jv1peazUrU40IaR8jv/D7Y30xvzGEWqAJalHwVmdEVLQ7GFCQci2IQl68ooFBQghKQK8G6iCJRJ6wqyxy4gJDlOU5USiBD07qDQeD92FgR0E+jAUtxoJVInAj+DwGlG09NboJKIa9wz74wuAA7m0FNOinhXo0pCx7KIVdtIOidmzksF/Ecfcjr4IQlMJYuFeW7xpH6EmZKvVb3C4GAKXvqXBcumtwJMcvgVEJlSDYi/AIThuBCD7kTkrFXoMtHT77Bd4wARvYW7Bq0X/2cLYVuFh/LrZx0wohCkGThnm7juC82X9QYMWygfwIbpXLuOjrdFNhFyKRGCOAi+r00zo97I8wF+UR5uKVUwAA'/>\n\t`,imgBig:`\n\t\t<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAMAAADDpiTIAAAC8VBMVEUAAAAPjcELiL8JlMABabAIlMAeos4Hjb0BarAIkL4CabECarEKmsIIj74JmcIBabACarEQvc8JlMAKl8EJkcAKlMAIiL4Tu88HjL0QvtAJl8EKncMRvtADarEDarIZxNIIlsAQvc8KmsIIj74Qvc8IkL8Qv9AKlMESv9AKlsISwdINl8IVm8oBaLAQvs8BabAQvs4Qvc8KmcIIjr0RvtABabAQvs8Sv9ADa7IBa7EKncMQv88PvM8Qv9AJlMALm8MIlMARv9ASvtAKlMESv9H///8JlsAFgLgHi7wIk78Km8IEerYHjr0NrckLpcYHjb0GhboKnsMIkb4Lo8UHirwLocQDdbQMqccEfrcJmMEJmcEMqsgKnMIIkL4EfLcIlL8GiLsGh7sEfbcKoMQMqMcCb7IGibsDdrUFgrkDeLUOsssFg7kCc7MLpMUOtcwMrMgPuc0Nr8kHj74Lp8YKncMCcrMLn8QEebUJl8EOtMsOr8oDdLQBarANssoOscoOt8wBa7EPuM0GhLoBbbEGhLkJmsEEebYCbrEPu84IlMANscoDcbMOtcsPvM4CcbIFgbkLpcUKnMMOr8kLncMBaK8Qvc8CbrIBabAQvs8Pus4Pt80FhLn7/f7u+Pv4/P39/v7y+fzc7/aUzeL1+/zq9vrm9Pnj8/i/4O2o1uibz+Tg8ffX7vW53eys2OmHyd9UtNMPj76Ny+GAxt5csdI7pMqz3etks9RNr9AhnsUOh7vT6/PH5fC05O6x2emj1Oag0eWDwtxettQxpcorn8ccl8O64O2j3up5z+DP6PLD4+9Yq9AslsQZi77I6fJ0wdt8wNtdxtpnv9hnutdeutYzttAQlMHO7POL1eR3u9lDr886rs5PqM5DoMrA6PCd1+Z3yN1Dqs0eq8o2ncgklsNoxttuuNdAt9EkpsgVl8IbkcC65u+t4uyU2eZOv9ZDpswYpcczmMUlkMGD0eIsrcwSnsQWm8RvzN5AvdNLtdIfs80TqcjW71yqAAAARXRSTlMAEBZg7LYI3d2dhHHu6eS/nZx+cm1BMBjz6MScYGA9Efvv2tDEi31UQzg0IQz8z8z44s/Er6+LclH39tvYuqmMemtUS3SZNIC7AAA7fUlEQVR42uyaSYtTURCFo6IgiOCMAzjPIiqi4DwRUDAQRKT1QRZx1RA1JEjSkA4uBPOwwdgI0V/rV8O1nk9X2m1HyKlT9XR9qk/VvbmV1cG63Sd33N6/cd+RrVu2XFvOut3lbjfr1rM66Ep5KyFsNuvNhKfNp4DyxEKoxdF60qrVWqBWq32qtaQAiqHTqXVevnzZ6VCB1mfPnkk+e6EFvnhBBl6/fi35+rEETPicvgufH7fbC58X2oRwUYsgXxzki/Pz8/lgQB0Qwv78oD/f77/q96V8fPXqVf8VFXwUDodDyeE3Ke+G7wDljYXgqxaLDxcO771449jlbVeu3jtzsPJ/YP2uHfsvbXkExtmjTLHczTLk51PvdtHf8dYpPVBv1pHf+NTxRBlN0FKq/BQ+nz6J+qG/UuUnqQrT3+V36id1wAukV/Bx0Yuf9mMRXrAAcyry5+3FtrQAOVgU4YHpD5CfnEd+wce+CP9R5CcFNAD5CvmVCegPVX6aAHww/sDh89uuntpTmWbs2bB/63ukJzPUHz8aj7MMIv+ydADaZ2SdfPvWWYfJA9CeNA8Q7b2SbgC1FhXw168GAC29A152aqTJHx1AAhNdKgmkvE6J9KTVcAGCKqlNgPbWBO3FBVN/fpDn8/wT6RNJ8wDA335KV9+rOgD5zjqAVPUDNAGJ+qkDlpag4OK2A9PZBOtP7j+C8oFMiPyQ0iVg2QDegqa0gQ+CsgGkAeBGYAZA2ocOKAP5IUU+Kj8kEkR3CqSo/JAA2gFlMABgu00LWAfkCyDPcQAKIwADGADE15JAC0CbAkQqqr6VoQLxHW+ExRaATIEfFrAkXAJflm5suzdlTXD69iW0LxKM1QasCZYzMQCxgWgC5NcKpQmapVVANI8+KO4BUJpA7L9F1mBA9gBY3ANc/xfFJtCkxhQgrZruZDSBqE9azWUKLOS2B9gqgPTJAKhQhoDDm6CwB4BvNMA3IprA5IeuPqmV9CZAfmj4Mjl/5UxlSnB2+5Hnj4jnJOITQEvGHmDyd0mbBLoJeg/YGED+OlH0AArCq/JRoIhfQ36NFmlLgBfbA0V+jQ5Z9oAXTkL/Fx4g4uskIAKflQsUbwEoBQOgE2wMIH9ODEx8K32mAD2Q5KfQAuYAlKEEZAp8U/m1/OwAvgd8VfmhtwDaQ4kvS9dPnK2sOdZt2If0QOQ39UlHJqFTQNwf+TVlEzSo+vQApXgWgAYf/1ZInwFakN+idBZAd1ItwAJ4ByTRKRLQ4VPAHIAeCPm9ttUFLGwP4B8qP8lZAO0ZBRbIn1ZBNwCo2kPSYPJLxiYYR4FoAlogNsElCQMdACbHDqzt4eD+rWtzc8/nTH9CHMCawDEmdQj4FpCGQLQAMB9oEtED0QIA+T0Mrj9gCMR5kNrRr//5U2MIaPgYiE6IIWDhPlA+DSI/NqAeANQHZAtoI78S+X0LIFMDxEmAT9oCYh0cEjYE1AIAVYdA2QfCApBfCcwGJl8uXD5VWStsOOLqa0H/92oCgAKBq4/y0E2gLufBOhQkC2jCt3EUIH0NSBYAHWoBNWgmYMrD2AOlBaA2gaO4B8ZJEBpKeyCl1ATIj/hhAXzTUQAwBeAAEmAAYw8kmQLJBHwKhAkgvGTJAuJGwI4CMCzABgGQMrl+oLIG2LRza3XOYA4QLaDyS/EW0NOgHwVg5ktA2gXdAeIoYEtAsoBwACnA5NfzACRiE1CY/HYegBQ7CsJoAQoMByChIzogegAPkD0AmvwEFoD2chpA/nywmHsLxCaQ5gDy+yRwH4g5AGIJ0BaglCDyxxpAQX7fBZSTi3c3Vf4tzu3YOtdz9QnX31pAooCxugAh/r8sFaj4rr6EshlTIPQP6aEWEPpDFd+R/ml7gKkPTP+w//D/sACI9MqyAVAI1R/6QYAhoHNAMWAGLCK9sHghFHsA1wFF9f1C6JtPgdC/6P9GIvSHDvT3KQAmex+cq/w7rNu+pTpXnetVUwdQqEAswE3AWFwFgU4BdQJmQBwHrQpLhwGfAvb9zXEwrYLorgxgAkCbgNAGoCTEMgjTGkDxKfBbE2jjAj4F7JvrpXCuISaAC6B/mAD0JvA1AGoTxDpoU8BbAPoUKHaBhrYARH8LhU8BghY4fOKf7YM7t/R6vSrqV4k0ApILYAO2BhRXQeTHBcZ2I6hXgt3M1deS9gDC5SfdAlx8HwQhvi4BpBRg14Hx908LmPLaBaY+XRDiJ+3jUjidBuNKMP7+pcrHRgDwQbAYNwKcBFR11AdW0V5WQd0D/FeBuBEYEqivJwG+yQIoRf2T+KTqD5L8EgATmEykBe5W/gVOX+pVQQ8DQH9oiCnwnoL8sQhk/Nt3wS7sLvudYBZbAMWPAnESgMUmMP2ho0YbUGwL+KTHQQLGLtjxESBfvw+AjrgOLN4JQvQvHQcLp0FOA2kPyEX/nBZId4IsAvNCxE+/D/Uh8F2QKQCLPw0MoeOdu8Bv7wTBB2HhTvBLcRckJrTB+dW/HFq3f64KxAJogN5ceIBk9IAqH8gU43QpSBPEHpDkJ0C4wG/kj09LWIsr4VDe/tER+qXwT0cBSshvLlA8CuABlN/Ib6Utx0E/ChA5HzkMGvQ0mK6ESUMfApUf4ZWgdCn8LfaAsvxavuqNkCOOAnEjYD4w2bbKc2DDFpXfilgA+juiA4j3vgxCkPkymFxgmUqRHuiGBRB+J0Sgv2X0gEbcCbXcBYA3gljAp+IccBcggC8CsQRYUixiE3QLkCiqb2k/C9idMKkXAnYUIHAB2wJA/EAskXbBdCGgH4PPgXeW2gBWSnPAUhvASnSAxGRJJ8He1TwT7t4X4ktAlK+a/AREfFDwf0qcBaBcBc3eB/zh+4A3RQsgdQC4A5D0ADi2anPgzqGqAOHtI8QEwgKKi+Bz098xex+w8u8DtAX8OOjnwYnhRGU1sH6jyR9NwAigaqYhENfCUD1g9j5gdd8HID1ZPAyAm6vwa/GurdVG1REG0GMPDKj88cvQ89n7gH/zPiAuBSeOvSv+A8F2s/9GqE96TScBQqofBWbvA/7l+wCD7YLqBCdW2P5RXhjyu/iMAe2ANAVsGZy9D1iL9wEQ5QmwomMA+2+49oE4CthZkFQHQPfZ+4C1eh8AkJ5c2TGw4RDyW4QPoH0qagE9HwOz9wFr+j7AfMBwYYWuBHZUG0l1qqPnJNLvAmD2PmAa3gfQBX4lcHUl9D/eaIyqjRF//7AKAz3oDiC7wOx9wLS8D/ixCVz5e/03jxoA3Ueqfll/6AeB2fuAaXofkLDtb9/9bGw8HD0cWQtQAN9fV8Hq7H3AtL0P8E3g8l+9FVq3b9R4+BD/H9EDZe0Lq+DsfcA0vg8wHDv4F/offYj8jREF/UsuEC0wex8wre8DvrNvNikRxEAUXsjoajYq4oig4g8KMiiuBQU3gayyb+YOuUUOMDDH9VUlZan0/HSvJqFe/g7wuisv6a9Z86vR9f/CQWx/Solz4D/veTI+YI/5ANLd2F1g4lhIARjwf1EKwIJbkfEB+80HcA4Ymf+dC2R/3gaoobP/KuMD9p8PGHsWuCf/WQiCpQSgs/+8QMYHVMEHjLoPOMnuB9kFkqMQwE8ABsv4gFr4gBF3ggfwPjgVKgAmefN5NT6gHj5gtboc+P3vuhQAdDkKJDRWdt74gJr4gNXL46Dv/9OAAoChJSCVnQD2J/hufEBtfMBsCB8wIe/ReYgWfCWcEm0AxgfUxwe8D+C/yuuPyVHXFJAwQ8YH1MgHPOwcANj+oN7nZZGLQErJ+IAq+YDl45AAoI8AVj0KoBsfUCsfsGMMmAQo+55nUeJufEC9fMBOMeAjdGhkvZQANL0SMj6gZj5ghxhwBveznDqvMj6gaj5guf2/wTcqAOhSAsh+vREwPqByPuBu6xUw25+lIVBkfED1fMDlFgZo2kGBBsnxRI0X4wPq5wNmV5sZgI4VRGS6WB+MD2iBD9jIBjyFbD8GZlEJAcYHtMEHbMqBt533pQboYYAGZHxAI3zAfL3/p75TSRiUBGB8QCt8wOfaBHgefez8b/cxl/JvfEAzfMDNuhx4HGG+RyMFHj/fBIwPaIgPWHMf+DyNPpL7NMT+chw0PqAlPuDmuR8DjUiAGFGSgGZB4wPa4gO+ev8DmvoYPVrX5a1AD4PGBzTGB8wOe48APqLTJElAHgHjA1rjA/oOAkc+Zvdp+XMWND6gOT7gtecrkCeVXQCrRkHjA77ZtYOcuGIYDMAWVYVYdEFFWyqNhFBLkcqGqggWoC7oxouRsvEB3ioHmNNwXOzYmTxGnCD+/ZJwgD9KHOab0Ads3j8A9Gvh6wmgaxwB8AET+oBHOqj/Gr6Wxd/2wHgOwgdM6QMOgeg/i3/sAXsK+BUAHzCnD7g7/C/wduwA/xMvAfiAOX3A7cV7LaBfAPppG+D/DIAPmNUHbN5KwG3R3KM0e38Pav7wAbP6gDc68EZjLxb9fu78h0H4gGl9wMsNjfpcStmW2AKjEdjBB0zsA37RqGNL36qtOx9a8AET+4DHFQX0A0BnxB8vAfiAqX3AwIFXxWrrn0UfXQB8wNQ+4H5Y0NJrXAI64QPm9gF7HXpUuOgYd0BcBPABc/uAl2/kdW3xczwExgkAHzC7D3gmrxMuUfEW9NzhA2b3Aaf9EVg47oB1KwgfML0PeIoWoEXP7Pnr9PDhA+b3Ad4EfNDwW/zcjwBb4AMS+IBNbwEi/nUbAB+QwAecegvAfgTweA3qhA9I4AOaDT3y8Ef8LX34gBQ+wJqALxa8la49/lLgA1L4AJOBZ55+iRGbAD4ghQ94sB6wcKtio0TBB+TwAdYF/vD0bcaqAz4ghw+w34POPfoRvi7wAUl8wKWCcPYaTwGd8AFZfMAFfWWWyH9cBfABWXzAb7petYD9CIAPSOMDnumMRTgqtgDDB6TxAQ90xb3GKQAfkMYH3NOJsH1Rnj98QBofcEofRaRnHxM+II8PuKO/ImxjdQvAB+TxAT/pWFbx+wIfkMcHPMUGaAtHwQfk8QF/6NM+fInw4QMS+YDvdC69+haAD0jkAy7bBqiefhR8QCIfcEsSNd4C8AGZfABJrVJ9B8QxAB+QyQdQi1+X8RCAD8jkA0jEzgAvtg8+IJUPoKolUsdLAD4glQ+gGkdA7UcAfEAqH7A/AWq/BeADUvkAqhb+Kn+BD0jlA0h8B9hqQxg+IJUPoNrDr3EEwAek8gG0WP5WEhsBPiCVD6BFFkt/9IHwAal8AC1LXaRqiU+BD0jlA0iqXQL+2RD4gFQ+gJZlEbFjoEptAz4glQ+gxcpy748B+IBUPqD1ANWWvgPgA1L5AFpaeQdoK3xALh9A7QZoB4A/B+EDcvkAWrw8fp3wAbl8wCt797LqRBCEAbherl0PimudjQj9Aq6bfgtPLprkoIkgBCGgg+At0YUaNZ7gImoguMiFgGJiXFk9KTPiQnOpmQl0/TOZBzhVVPfkfHQgvHwZbxoD2ALiA/zyAdgAVH76Okh8gF8+ABsgxB5I1gHxAX75AJoA9CqA/xgQH+CXD4DLobuSESA+wC8fACFmU34cAeID/PIB4OqP92YvKD7ALx/gGiApP37EB/jlA6gBki4QH+CXD4DQJdkJXhEf4JcPgPB36CtB8QF++QAIsPTBH9UXH+CXD8AGoNC7gPgAv3wABEEQBtQBbgyID/DLB0BcfvegFhAf4JcPAFf8uPr0MiA+wC8fAAEGR8DmTUB8gF8+AFz54w+NAPEBfvmAzQQIaASID/DLBwCWHpPUX3yAXz4AXPFdQloGxAf45QNgU3z6MkB8gF8+AILfCdeNID7ALx8Af5dffIBfPoCWAHrgR3yAXz4gmQC0FxAfkL0PWC27nWl7Mjhr1ArlSuWkdFIp1OqNl+P29Ouiu1yl6QMg2CSMb/EB2fmAHtZ98vL0RP0n5UY0XSxXqfiAZALQy4D4gCx8wHDWaZ8V1U4p1aPOit0HQEChhOIDUvYBvW5/XFN7ptLh9gEQ2GQAuKf4gBR9QG8xqarD0mf2AWCwA5KEofiAlHxArxMV1OEpLXl9QLIE0BwQH5CCD6Dis2TC6wPAJiMgLr/4AG4f8KV/QzHmlNcHgAkwNukA8QGcPuDnrF1VvCnx+gCwxtrgj4gPYPMBw1FUUfxZsfoAsIHBKxkA4gN4fMDP7vhEpZIVqw8AYwO8zGYZEB/A4QNm7bJKKz1WHwDG2j+3AaH4gIN9QK9/qlLMktUHgDYmsNeN/d0D4gMO8wHDT2cq3cxYfQBYc91iD2wiPuAQH/ClXVRpp8vqA8BatwvA0AAQH7C3D5iPzlQGGbH6ADBGGzcCDDaAu8UH7OkDvvWrKpMsWM8PAKux/BYXAnoREB+wlw+YRSWVUTqs5weANlbjB6tvAoNP8QG7+4AL3YbKLn3W8wNAW4PX+uHKLz5gVx8wX9RVlpmynh8AWmuj4xYI8LKB+IDdfMC8U1XZps16fgDE5dd42evxBBAfsIsPGPbLKutMWM8PABwAeFu8jHXVFx+wvQ8YTosq+0Ss5weAdjE63gXgDDDiA7b1AfN+ReWRiPP8AJoAbhWgISA+YDsfMP9aUPkkYj0/AK7SBKCVwIgP2MYHXPhUVXklYj0/ADStAQZbwK0CR+QD3j9u3X305lWz+erto9bnJ5eOxgdcHJ2q/DJmPT8A9FW8aBuAtzkKH/C01bz14G88X2zcufnm8RH4gB8NlWfGrOcHgMb6m3gfsP6vQO4+4PHbh//6A5efNT9cy9MHfItUvhlznh9AewD3MNptBGy+PuDzzbr6fwoPW+dy8gHzflHlnDHr+QGAK0DcA+vyG5ufDzjfuk1Tf6se+JCHDxhVVe4ZsJ4fAFh+d2FoCuTkA56+rqvd8vzduYx9wJf76ggyYD0/AHTcAdrQRtDk4wPuPdxnstaa3zP0AfOPJXUMGbD+vgBcxQZYN4HRLnn4gNYDtWcKr65l5QPe1dRxZMD6+wJw1YXWALIBGfuAey/UAam/y8QH/KLuTJabiIEwrJfrcsHBruISUxRQlZoDdz8FJ/MAzoJZTeI4BIeYLZAEAhTFlrCGgoQ1hO0AYSlOtOSeyKHQ2D2SjOYfzeSe7mm15G/0r1+EUPTcqb8AJgClAK0F+s0HLFwCS92e988HrI5CMPrg1F9AHMip+OMg9ZUPeF+rgLWGVz3zAd9uQ0C66NRfQOTiAiCfqL7yAQ1Hq6oL8z75gNUjEJIWnfoLiAMkmgJQfeMDrtbBlY4se+MD1p9DWFp06i8gcrkDughg8PvHB+Dr71ATnviA5SEITJ+c+gu0p4Cc7gP7xQdMngS3mv7ugQ/YXITg9Nipv4DIlbEGdCwF+sQHvHa/qXa+5ZwPWBmD8PTVqb8AVoAyzQEq+gf6wwes+dhTH2s55gPu//cffv6l6079BURZ9gCyCFAn0Bc+YKkCPnS45ZIP2HwBQeqHU38BTAA1Begq4J8PKNTAvSgD3PEB60Et/jt0z6m/gMjJEoCKuwD/fEChDt50/r0rPmDlOASqe079BWQC4NAlwD8fUAePmnbEBzTC2vzp1Gen/gIiF5cAygDvfEAdvGrCCR9wvwLB6qdTfwFRlk1AGVcCeMnhmQ8onATPWnbAB6xCwHqwR0vGf48VHyBU+PGhFwJe+QDv8YehljUfMAUh62XbdVJPA1Z8gOoB8Mbol6kG+OQDquBf16z4gNDffxiWXhMoagTxtuIDVA+gUqBMbYBPPuAs9EP37fiANxC0jpPjoF4LWPEBIqdUxoHhx0rgkw9oDvfA+dUnlhoza2szS3dOnxiCNBpt2fABjTDIP6MeabdBelrxAbQMLOuZwB8fcLXr0vrw1Pz28wMW5sYrwNasxfkBK+Gu/4gHiX3G5F8Vfis+gCoA7Qbg7Y8PKNzsNnmv/ev8gNbUYWBqZD71+QGtYPd/NA6gLQdJNnyAoPDHXUDZHx9Qg0TdbBrPD1jiArnTqc8PuAah6zGZzlEXgMOKD9AVgIqANz5gJnnqn0s6P+Ahd/W4kvL8gPsQvK6rVWCn+bwVH0AVQGeBLz5gMrG2jl/tcn4A8/fD6XTnB2yGwv4n6F47/AM6Baz4AKoAOv6++IAqmFW50/38gMYwMFRppTo/4DSEr89kN6vtx634AKGj35YnPqA5kkB0zvRyfsAccDSV5vyAnQF8+tlVD8h3VJcAKz5gewXAyw8fUEggwI42ezs/oMoiA9KcH7AMGdBvCj7FHp9WfIAo6vCrhx8+4AoYNdrs8fyAHazl4NMU5wcEigBt09EBkt4OtOIDMAEoBSgHvPABt4bN9f9Lz/4CM8DQ6RT+AiEioH/rNrmPy0EzgBUfgFPA9gzwwgfMglFnGP4CNzmnB6TwFwjuE4B/aFFXgNiE3ooPECr+WmUffMCtCphUZfgLsPrAkRbbX2ATMqCvcQVA0QRgxQeIdvz1ROCDD7gMJl0ocPwF9h7jgCFsf4F1yIDuRboE0LDiA2QTWOxsBD3wAa+NBaCywPMXmIXeVWP7CzyFDOjdQBRFlAEUeis+QORIRUoBD3xAzQzwMf0FOHPACba/QCZWgS+jAXlJURJY8AE0BeDQcs8HmAvA4Ummv8BVDjjB9he4A+FrSL7/EcWeZMUHtJeB9JByzweYC8Ac219giNEFPuT6C0xA+HqE4acaoPsAGz5A5KgHwJvkmA+YHDUWAL6/wA3oXfNcf4Es7AN9jFCUARR0Oz5AFFEq/LQScM4HmDnAJb6/AOdn4Rmuv8A0hK/HJZUAdKkUsOMDhAp9Rx/gnA+4ZkQACnx/gRr0rgbXXyDUjwG3rwKVOvtAOz4grgDyohLglg/YGAGDqin8BaqcjQCuv8ApCF8PSlGpFKmlIA6SDR8gVOh1ASi65gPugkmvUvgLTHDocKa/wM6APweLNYrRV9Lx32PHB4hi++XXWeCYDzgPBo2l8BdgJcAdZTLSu7/ACoSv21FUkpdKAEoBKz6AmkBUPBE45gNegUlX0vgL1DgVYMt29mBP/gIZ4AHhEyZAXAQGaC1gxweIwaLS1jLAMR9gnrS/pPEXqEPvmtuhhC2AfHT3F8gCD/ZGRR8fJdoPwGHHB2ACDOrwoxzzAUaIY3gyjb/ADd4qIDYdlUuBrnxA+ES47AFVE6hECWDHB9AUoB7qKrrlAzbApJtp/AX2csjQNW04iff+rnxA8J+EAAz/zmP48UJRIzBgyQeIoqoAei3glg84AyZNpPEXmAeGWspvcD9NA3gl8wHfIXw9KkW6CShRG2jHBwiMP4n6QKd8QM1MAqXxF3jLeVtU/KkRpBKQxAdk4cfgxXxehR9vvRy04wNkDzBIOaBqgFs+wMxxNtn+AswecCz2HCXX6R1d+ICwTwVo60cpn4+o/ONQsuQD5CoAh84Ap3zABhi1kcZfgMPtT2vHUXIeTuQDMtEDvpPhx0GNgAq/JR8g8P2nDKANIZd8gLkFGErjL7AA3H2gXXLQUiCZD9gd+mfhah8Qp4B8KcKh+wArPoCmgKK8aDfAKR9QM0O7afwF5oChpvIeVqIUMPMBGWkBPmAHkFfhx4tmAls+QFaAOANUBXDKB4yZV4Ep/AUKpzlvi3r31U3an8gHZIEGuZ5XTaC8IxzqsuUDxD5KAJ0C7viAcyNg0jjLX4DEYULr5DsuB8U/kQ+4AOHrHU4AUqVIdwG2fIAYVNJzgEs+4FZCfJj+AurvOGcfkMzn9VpgfxIf8D0DPwUeifJSUSlPfQCOyI4P0BVA3UWUSz7gGRh1meUvQInAeEuHMOqUAno1kMAHNCB8Pc+TZPhpPRBZ8gGUAB3xd8kHPAGjajx/gbYYn4ZVqf7LZ6wkPuAkhK+vGPtDlAK0IRRZ8wFicB9eqCKlgEs+oAZGzTL8BagIcKaASgtDv1UCqB1M4APeB+QLaNQvFX0SFgEpKz6AEmCrBlAj6I4POAFGXWL4C8gCwDxnflZGX0eeZOYDsvBNCP4SlNfvfz6vYm/NB8gpQOUA7QcUXfIBCZDduNlfwMwHTPX8v1rYu4tKgAw/7Qgk8AFZAIL/sHcePU4EQRSeP9cSCAQajDlhCckS4eALIPwH0JyRuAKLSSZYYFhyzhktWYicg8jpwonXxTNtAz3TXpeBRrzpac7wylXV7Q/XnSUoAFgQe0FYPzAfgABgCuBRQIkP4CnQq33h8wUcH7DLBGqzNf+nJtDHB8RxBkALYMUQWGAXnB+UD0AAQOwDJAso8gHvjF97/fMF/HzACxOmxrVKhRFgN3mwvHxAFDSYuQrrl7g2YIFEwIB8AANA3GcSUOQDbuUd0zzzBfL5gL1hHeB92E7BcFqP3cMHxHELtK7GDz82kW0EBucDErEfL3aRIh8wanL0wj9fwM8H7Az7GmgaEkDFBQGbAD8fcNREoFfy8V/S5T/W4HxAMok1AEtKgCIfkItvbPfPF/DzAfM3hlwCV6BpEgGdMsAE4OMDYrgEMK/hPhZfSErAwHyAlAC2ARICinzAYZOjnZ75Avl8wOWAeRETK6JpWKJOB+DlA3bH0AKu/FKrIQJ+0MB8AEoAUwDch7Dr8QGrTI4Oe+YLFPABB0yBzlzrdl92pn8vH7DKRKCX1v4lNR4FnQblA1ACJjEFsBHQ4wMOmRwd8MwXKOADrhX0gevblclMAPblVYA8Pj7gcwy3gOZxDRmgJk0ANywFPgAlgBHAPlCRD8gtrWs88wWK+IDdeW3AyGbrvn1pv7yMAB8fEAMMaEYewH55us8CCnxAMgnq7gIU+YD8m9uHnvkCRXzA8ab/pHS/wl8V7ahTBPD6+IBrEfx/AGMuwHtIigDPg9gV+IBE3JeNh0E9PiC/Xt/wzBco5AMmbx359fF/1fPOfIHJNg24w6DY7+MDokgA5lTJRgBTgOsDBucDmAGwGAKKfEDL5KnlmS8QwAccO/AL+9cf654vgEf6AJcBPHzA7ig6gJGPpVqtEwKuE1DgA5ABWAPovyIf0MznW6Z75guE8AHbDy7vTf5bj/XOF6B4GoB8fMAGE4Pu0H8sMZ9S4AMSuI+HSQBS5ANaJldnPfMFwviA9q5VzbXGam1z25tfzBdwraCkAQ8fcDSGOwCcAUo1hAAWW0H4jqXAB7AJtP6zCijyATtMrlqe+QKhfAC2a8ePH2/75gu40yDk4wOaJgateFArSRPAVhCS60AFPiAR/6FOK6jIBxRc2ix74ZkvUMQHBM4X6FwISB3w8AExoIDQy1KpNKWGLNDpApbYIFDhA5Ie+yFFPqDoin3MM1+ggA8InS/Q3QZ4+IDnDROFXsP7b/azDRD7VfgAlgDZ8EB6fEARxt/wzBfI5wPC5wvg6cSAhw+I4achoeVTSvCfWQBiIKjwATYAnP1YinxAYYN9yzNfIJ8PCJ8v4CLgl3xALAXA3C19E+yfwiYA5uvwAewBrNgH6vEBm02B9koGoIL5gPD5Ap2DgIcPOB7DkDCrp6Wy2C+rJkEAqfABLgNY+2XX4wNumCKNds0XCOcDwucLIAfg9fEBMZCgVo0yE4AtAawBCAINPoABQEkEKPIBxfzOJms+FcwHhM8XYArw8AGXTSQ6VSqV8YjEfdEUHT4gmVQX6+XlrsUHnDWF2ul+VjScDwifLyBpwMMHHI3iDhha/cCaT/FCCO4r8QGJ+/SzEujxAbcDSMfzbr5AOB8QPl8ANcDDB+yO4ZeBRXeZALCs+VNgvzw6fEBvCcCryAecM8U65OYLhPIB4fMF8Pj4gGsxgMDEwcvWerysAewDlPiABBUAy4WAIh+wxwTolpsvEMwHhM8X8PIBUXCgogvW/zIfEf1X4QOYAeouAjT5gOUhuHvbzRcI5APC5wt4+YBtJhpdhP0sALRfvhfQ4gOYAZw0+YDTJkCH3HyBID4gfL6Anw84MmJi0Vraj8duVmK/Fh+QZL3WY+nxAQdMiHa6g0AAHxA+X8DPB2yJ4ztg0QdazxzQCQE1PgDHQHlcHlDkA8J46xXbeRYciA/obQVz+YAjEfm/DGdAPC4EKDU+IJmU0Xm6r8kH3AjMco84X2BAPoApoIgPiMl/c7JM81kInPlKfEAiH37JAZQiH3ArdNL3Hv608O/gA67EU/8tCyj+283dBkB6fEAC72k+pcgHvDeBOrCH9g+fD7gck//mZa/97g81PiCp1zN2AViQKh+wPDwCbAb4DXxADL8H6TRysyr2yyYP74T0+IAky+qZnAQYA6p8QDhx15IqMGw+4FosXwBS+8tQleZ3HQQU+YAkq1vj3UFAlQ9YZYLVkiowXD7g2CYTl25Wq/CfKnHBeUU+IJmHCJAcQPdV+YCdJlzN80gAQ+UDdi03cekEPv5V5gB6L0GgyQckdVsDJANgg1T5gId9cQ/vUAWGxwdUtsV0/BM9/TEBsApo8gFJfR78zzq3Adg1+YC5K00fWnkWETAsPuBYDJOBe3WnasUgEPsZB5p8AEqARAASABsBVT6g1V/Texjpfyh8QGVshYlOT7/bj83dBpZV+QA0gYyAjH2gKh8w1m/VezQUPuBYPN/+O+3vJAAsUaf8q/IByTwI9n/vAnT5gNumT618os8HtLdF+PE3yz5W0ypV7g4BXT4ggftZfR5e+C9JQJUPWNz/P33znC4fULkcxS9A/KS71UV0vyzv98sgTT6AGSBDFagzBJT5gOY4IMixtiIfsCW2sz+18lmaMgWI/diYAvT4ADaBUgPEf9sKKvMBY2YcWvdklhIf8CbG4i86tQjuuxBw/ivzAQncx4MQwI2QjQNlPuCcGZcaowp8wPzRMyZWrfuULlqEVe0KASxYr8sHsATAfOxyGtTmAxpmfDq9c89gfMDxbWtNvLqUpouYAHgS4GWANh+QzJn3TXXbCmLT5gPGP5V/zeZH4+cDtq+PsfP/ruvpIpsAEAHuJMBCoMwHIAAkBGh/lmnzAbfN+DWy49b08fABb7ZG878+PH/xp7AfD+SyAO1X5gNQAiicBGwboM0HgAkYRMvXj7b74gOm3toQc+rnETBFBZAHQcBKUJZXnQ9AAMzp2C93gup8wCEzoFa0Lp8L4wPab8YOxPaN36+05q2Y39sFiv/6fEAC/6kMq15X5wNuGwUtbx2+9SKPD5hwbnTV6ei+7vPoSmq1iMvGAJKAfPz1+QDbA8xhDGT2RkifD9CqxyON5qGx0e2PZnfzAe0X20fHNpxo/CveW51YaDM/V4rlGkF9PiCB+/ah6pk+H3DYKGvF8nWNvfvOnG6sXRkV4Rmo1R+ZANgGVm0YsBDo8wEIAOs/2wDs+nzAe/Nf/eheigzALvB7FUAcUMp8gJQAlwOy+hD4gHjv4/6E9i5NEQELGQJYvBHC0ucDpARAjIDMvvp8wE7zX32Q4OlCuC/iXQDPgpQyH5DMkADgIyGgzgfsieXXuP4GfVi4cObC1IWAFS8F9fkAZgCGAKXPB6AN/K9AXV+6MF26cGaaYkHfU0AVayh8ADLAjBnfjoJYlDYfcD7qe/mv7F1LixNBGOw/NyOZo4fBhIYcRcgxkYG56iEISvDqc32A4gMRnyCiomh84UFxVUREWG+6oODR6i9l2tHFB/p1JzNT3fNl71XzfdWzlUkg8ARgh9bSBAwpAToBnXwABCDw/GvkA64nLf4I76zdOwSEfLJPL6iUDzBbc7dEACiARj7gY9LiT3DBwgHstUN8YAZUj4NK+QAIIM/ZA8QG6uQDluO1/LFx7IPF/LdD+IChJftSAJ18AEcAJOB8gPCvkw94lbT4LQ5+sY7+4V4U8A8r6EWglg+YmUDCsa+QD2hbwJ9hZWIn1jr6IQL6AGK7Wj7AgH4sgEZAKR/wNmnxGzz8BP4BuABUFKcBPhHUyweYrXMTIHWbVj7gWtLilzi2ZieZncAEYLkOYMUI0gqq5QOM0I8LVaCVD/hYx3/c/UfsW53YzArECMIKwgRwECjmA8QDCP1UgFo+YHlezhoFjzI0gAlmALabAk4B4F4OA5r5AJPPHQAKqFfLB6y3jwN/gTuZzbCtKAAF/EthA9DLB8gIkE0foJIPaP8j8Bs8+5RlcABWNo8Ce7HsEFs1H2CEe1k0Amr5gB1LntVWxNG1nRlgs4kV+nkSQOUjQb18gMkFXgaK+YBp0mJD7PuSCaxbsykg9/5euXTzAYb0z12AZj7gVNJiIzzJCIwBOgG6AAwB5XyAN4FsApr5gPutD9wIZzIMAGyA7IN5bDYBxXxAtQNwa+YDnictfsJrod8VSkBOgzwKDLXzASb32Crsq+YDlvbr+nq4Lcx7TKQLiBdEA1DPB5g5+/xQzQe0Q2CjA2Av2wkJyK5YQUA/H0ABeO6V8wHtEKji5FqvJ7xDA3Pg/nddAGcB/XyAGcz5Z1HNB7RDoIqjN3H7Z70e6PdGwOJvekH9fIApc0qAGtDOB6wvyw92hsD+F71ehj2j/ztYQYh8gCnLvKwoQDkf0D4OqvAPZFg7MQf8ScDSDIbIB5icHYDYqp8PWElaCA696EoDQPH9H4X0Z0HyAaYcuAaAi9DPB+DnBFs4/lfBv9DvTECP/HuEyQfABJaDihHUzwes1+EtHv+MI6u9bg+bUwBbegDtgLWB8gEzDyCFEgiQD3jZpoOSI1+6XdJPCezEzjxC5AM4AqouQD8f0D4NEP57WBQB+GcD4AYC5QPMQBSARRmEyQecSJqN/S+6gp5TAU8CUsUMAsHyARgBUEDpu0CYfMCeZn9P4PjNburod1dlCmCR/FD5ADOYtQBIgCIIkw94cDhpLg6vpd0C5FMCNIKcAyKCcPkAjABAJJATYfIB95v71ohnl3H7YwNknz5gZ0YfGDAf4DwANICaY0MEwfIBH5v6TPje56KbFmk3pQY4BrwEQuYDRABYgpxTIFA+4FUz/zV8ISvSwjWAguxjkX+3QX3QfIAB+2wC2DkQLh/wsk5vd/xTnEsLrDSFBNAFqAAUqgAtIGw+wAyAEkDN3QqZD5g27oHQgScpUACp+ABKAPCPhYPmAzgCgJJGIGg+4GLDFHB0FexjAYVrAN4M+ikQOB8wM4Ez+qUBhM0HnG/UFLi65phnD8AfsAEUgG8BgfMBHAFSsHJ8hM0HTBukgAufUwE1UD0J0AoGzweY7/q/K3nofMDLppwFDp6rko+FDeZTfxaIkA8wQv8A4FkgeD7g1ZGkCdh/NiUc8fIhW/hnC4iRDzAjtv9vO3w+4G0Tngk+vJVWUAj9XVS5BFHyAcaxL6AZjJAPWF/SH/f8C6wU/TTFJuYNoHA+kIiTDzCD0QC7FAWwBs8HPKj5C+V9++979nGxcgrEyQeYUQn6PflllHzAjlq/P+burT6Y5yb9vAqMAVFAGisf4EzgSHwAZRAlH1Dn14fsO5f2ZVXhjwJyFoyWDzAjgPyzRMkHbJrW9J+Dh9/0+6Cf67s+ULC42o2XDzCOflwltnAfJx+A634dreDBlffj8bhP1lmFc24sjIGI+QCzezSjf8SDQKR8ANaV00ndcHK130EDGKf9Me5/OgGBVwEQMx9gRgLPf7R8APC8Zs+FX78fdzq4/4X6sbBf4Z87aj7ACWA3JUAVxMoHQAVv65QUPHyp08H93xmLBlIssE8ReBSR8wFmTj4fBsTMB2AM1Oa3RQ6ceQr+wT1EMO7TB2D9gCJ2PgAegD2ghAxQouYDUKf1+N7Y7VsdAhYABfxv2AWi5wMgAE4AoR+Img/Ax3oNvjJw7EZnDqEfRwHxgT9yHz8fYHbtEgWAf3aBqPkAkcLFJW8C+1bedzZv7mymAuACcIH/PhuAfy60APkAMyL/9AJl7HyAKw+W+scFTt2cUY+K3ecYcAtb+CcWIh9gdu3eJSZgN+h3O3o+QEQwPZYsKe6ugnXe/7hoBNkCsIV/+ViMfIDzALvZAwZuBMTPB8j14MRS5kVP3gD1oB9AkcopMHYKSEUBuIAFyQcYNAAsyIAiWIB8gGDLx+Uzg/sfP3XsY7F4oAPwLJAC+FyUfABGAMh3U4BYhHwAdTBdrvfLf+XealqbioLo+3NahQcvSLYP4+KFQHYB/8DjQZFAu3PjBzV+tH60NlYrVWyiVvAj6Eoo2IW0BHQj+g88d+b0zZUKItp6r+fOzO3+nMydSU4XhluncgjA2j8qgquAjAGAkB+OPwAdAPRLA0CA/CD8ASwb43j8gpdWtnLh/yRCjty2DfIlAP3njgfkD8AaiB4gu6AiEH8Au8BkEMfPA5fufRL6JakAhKatg+6HIdAfkj8gKebmCtDvpgARQSj+AKTUb6PwJXAN9CuoAH78UUQINgWcQw3LH5AU2gLqOSAYfwBuxZvlsBeCK2/fp3meogPkSj8lYNzrdVqbQGD+AHSAAhqQDiAtIBx/gG0FX5fC7QKLd1OhH8UkcNIkILetAsH5A5LCkY/o90E9GkFI/gCA97dBkP9AdHnzWZr3emkvJyABawFk358Dw/MHJP3CnVoCZ4PyB8wYJuPgfiG4fm8rBfvuQAIpJSBHmwBbgFwuQ/QHJAUg5HMbDMsf4EtgY/roWDi4+ORh7rgX8tEBUJV/6wHGvCJIf0Di+C8KbAI6CPRD8wcgFPPInVCGgdtvt8A8uEeIBlIQj2QLQLAFIPjTQKD+gOQH+rEJBOcPwPE0MHn3778eXBh9SQWeBvK8d2AM8IfAYP0B+gRokU0gQH+ArwBgZ/Qv/4Xg6vLd1TTLMk8BenET8N8BdgGccP0BiZI/hyPb4NkQ/QEe5uchgo21O0f+FJD9tdUMSAl9AHqoOe7cFFBDZoCQ/QEyA/QLVcEcIkx/gF6E08BkunjUGlgg+6AfmYF3QoeANIcESD8SlQjbHyBPgIpAN8FA/QGkvs5OZ2ay/uTovhx4NPzYy05k2QkkRSDdnwkR6CaYmgiU/dD9ARAA0dd1MFh/ACWA0BtXZ+P16MaxQ8fCg+keiHeRGdKMErBBgC3AHwaD9wckxaywzymwmAvYHyAwHXRmOq4TvJk+OMShcOHF+MuqsI9kRQj7gNSeBqBtwNiPwB+gHcAk0A/ZH2A9AIcvAaJT7ozvHIIILj14ex+cK/VGPgqQSpJ+Obj5qwAlEIU/ICk8YA4owvYHEJRBx+U+vk43r/y9D/6rwfpu84Q7NTI9GVKQyrEnAOF/IRSJPyDBC4AAuAmE7g9Q+uspwKWKoIsz2dkevfzDyfDa4vDp83ZTAPo1gIxFRUDYI4DUTUBFEI0/IPHId9EP3x9ACUiQ/RkqwEW38XVtvPn42u//tPfoycr6/c+gvd1G4vZaQKZB9lEQ9gagWBPI815E/gB2AFNBDP4AEM+LfQAwCQBlt+pOdl9vD5cWb/9qOLh46/HycHvt/l67hQMo/SiUAApBCdSTQIqwDsDoxeUPSHzyXcThDyD/+grwDRD2UVQBZdUty6q8UDU29nZ3PqxP360MBjdHm0vLy0ujm4Phynh7/fWX3b3VVo1mu9VstR35xj/ZP9gFbBe0LdDV2PwBWAPl1H0gFn/AfH13cLgOUARsAhUCImjglA1U4gzrGRdnWnoUbfAvRySAAP8/GwVxHRwFHeLzByTCvKEfjz9At0EIgWMABQD+SxxIAJcTANgHKmNfyUcK/4DRjy5A8lHZAlDIPVPHAG8b7JH7GP0BiXz4Z00FUfkD9gdBgPwjABSngUofgkZ1oayoAYOTAEXgghpASANApRBEBP4sWIuAEuAoEKk/AAIA/R4i8wdQA2wBngaU/rJyYwA0YPDpJ4x+oNly7HtzoE8/NUD6bQyI1x+QnNcZoF4G4vMHsAWYAtwB2AUqNwUAbAD2DmiyBZgK7B2QFAGYCnwh1NtgzP4AfwaQP2P0B6B2RACIrgtQz0Gw5CTQKCGAgxqwFkABgHN5BOQgrAUgjXyP/sj9AegA538YAiL1BwA2CKoISj4EOgheKA8MARo1Wvs9oNnkPiBRY18CYF0vRPz+gGT2/CzotzUwXn8AugA1YF8HVPsJ9tEFUI19WwaQZJ9wvCO1oij7Bl0D/wt/wHd2zdi6YRgGoihcpPBCyTYpkiYrqMAzCm7AJsvmiIMMvWxgAicZHuDwDgL5BQGAHsiPgJfmA2h/HgpyCuBhof2pnAK5C3AbxJtbABW7QAyBbfgAGTbWFJgjPgJeng/AG6sAFU3gAeBJkAGACuU2mDEQR0G5DUJ5L7QTHyBuPwPA6w58gAcA6tN+Pxr+9QR4oKRW/LNEC+SJEApvBaJEC+zGBwj8H3hP78c2fMBP3gvAfT8T/Od+5sB1GaBoP08EUFxb8gFixiFwXglsxQcs88+LAd4MoV6b4JM198GcA9+xCXgT7MsHCNxfEbAGwFze78cHoAnWFIgQiIuB6y7IX0YA7T+PgzbnA8SG2VwJEKvAtnwAJwG3gdT1SyBaAIUqwQeIzXMGuPVjfz7ggecaAPx/7oLF+AAxdgBbYM6v5gNq8QFikJsf22DzAbX4gNUAw6BzG2w+oBYfIGZpP57ZfEAtPoAjgGWsNmg+oBYfIGZqEHcBvM0H1OIDhP7zUxDvaD6gFh8gy3/8pgfAnKP5gFp8gKiFBm8Fmg+oxQeIqsYUmB4DzQfU4gPE7UdhCMzZfEAtPkBUDS8Uq0DzAbX4ANElyxZoPqAWH8AE8Cngms0H1OID5Aj7vUDNB9TiA0RzBrj7zQfU4gNEj2wBvNZ8QC0+QCzs13C/+YBafIC8K+QfAkyB5gNK8QEfctMjhwDUfEApPuAut0PXQ5lq8wGl+IC7vLn7mQHNB/yxa3c7iQRBGIa/ATQEDBB/2EQiMZwYoxsTExN3D9ZN9mzvYO+lDriISup2d+iuYVBB5rjre5nBC+imp4QnlA+YYLh5AtS3+AlAHxDKB6wwXYsPAfkbIfqAUD7gGi9pBqgv3wL0AaF8wAlm9eLnK0cfEMoHLDDKH//tFqAPCOUD3jCWZgfk6ANC+YALvErdWrabgD4glA+4wzytvh8D9UUfEMoHzFGl/wLbLUAfEMoHVMBA6nwIrN/pAyL5gDMAT5Ja+x/6gEg+4BnAzD//zQFAHxDIBywAjCW39jf6gEA+4ALAUjw/CegDAvmAKwC9ZvX9pg8I5AN6qBu+fwDQB8TxARNsmm2PgBR9QBwfsMCmG1Nf+LT09AFxfEAf2BkCfBPQB8TxAd+QGuruI4A+IIwPWCE3ExPdrj19QBgfsEDu1WQn+oAwPuAOuZ6JtYtPHxDGB/TgPamIikcfEMUHPKNpJCrbPUAfEMUHvKFpaWLtAUAfEMQH3GPbUK09AugDYviAFdpGYqrixwB9QAwfcI62B1MT80GAPiCED/j7gJ2mZtocAPQBIXzANXa7UbX6JfUl9AEhfEAfu1U/1NS/EFb6gAA+4GeFd72opqeAiQl9QAAf8Avve7W0AUTrmz4ggA/4gw8NTdU0HQD0AeX7gBU+dmOmfgl9QPE+oI9PDVXzY0CFPqB0HzDB58am6WWi9AGl+4BLfO50YKq2uZU+oHAfMDnFnsaqllff6APK9gEX2NfjwPIWUKEPKNoHnD1ibyNV3wL0AUX7gHPsrxqor7/SBxTsA84qHGhsaQpUM/qAgn3AJQ721EwBSh9QrA94xuGW1owB9AGl+oB/9/iimfoRQB9Qqg9Y4KuqgQ8BRh9Qpg84OAG2NCgPgvQBZfqAPo40tXz80wcU6QOucaz5d58A6AMK9AG3cxxtnNdf6QMK9AG/0aGpWnrRBxTnA07Qpd4gHwH0AaX5gEkPnVqmMcCUPqAsH3B7hY75z4L0AWX5gHN0bqop+oCSfMAJvK5jgBp9QEE+oB0Auo8BSh/wv517WW0QCKAwfMb7BVFyEQkoAZEQEnERAsmmFAqFQlehD9SHKOR1G4vQdbzOyPlf4Wxmho+ZjQ/YrvFU6d/29AFz8QHvOp6owSGP6ANm4gOWeLbmKkAfMAsfUKBFUb08fcAcfICLVp3r2ekD1PcBJtpl1c8B9AHK+4CNhZaJ6rE7fYDiPiAXaJ2oeQh9gNI+YCPQIetxDqAPUNkHmBa6Fd1/6APU9QEuOtW8B9AHqOoDCnSsMWL0AUr6gI8leikt6QNU9AFbHT2VGfQB6vmAYI3e0kL6ANV8gKmhz7ySPkApH7BAz2UGfYA6PiBYo/e0kD5AFR9gahgir6QPUMEH3F4xUHFIHyC/DzjFGK6U/wdI7gMCHYMmojt9gLw+4OYKDF1W0QfI6gPyPcbIN+gDZPQByQojJTyDPkA2HxAsBMbr6Bv0ATL5gGB5xLhZvkMfIIsPsFcWJih16ANk8AG2jqm6nK/0AdP6gOTlDVMm0vBOHzCVD/g86QKTd/Ac+oApfIC9OECSMq/6pg8Y1QfkxR5SpV0ihz5gHB9guzsNMqalkUMfMKwPsF1dzvHRpGV+VBn0Af37gCR3V2u5x/9PxBffi86h4xjGtaQPaOcDvpIksO2T6RarXSwwSL9nIElDxCQT4AAAAABJRU5ErkJggg==\n\t"></img>\n\t`,label:"imToken"};const alphaWallet={imgBig:`\n\t\t<svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024"><defs><style>.cls-1{fill:#3268ff;}.cls-2{fill:#0019ff;}</style></defs><path d="M701.4,492.41c0,31.75-25.64,57.55-57.18,57.55s-57-25.8-57-57.55,25.64-57.55,57-57.55A57.32,57.32,0,0,1,701.4,492.41Z"/><path class="cls-1" d="M770.47,246.59l-20.67,0c-.18,0-.33,0-.49,0h-3.63l-1.93,3.06c-.45.61-.87,1.27-1.3,2-2.33,3.74-5.7,9.11-9.73,15.54L731,270h0C707.75,307,665.52,374.23,662.11,379.64a114.27,114.27,0,0,1,92.36,82.85c1.22-1.91,2.5-3.82,3.68-5.74,2.17-3.62,4.61-7.25,6.92-11,9.46-14.67,99.06-156.55,120.76-191.07h0l5.06-8.06Z"/><path class="cls-2" d="M916.74,737.7c-23,27.54-49,47-82,54.79-45.37,10.72-88.45,5.8-127.2-22.32-28.08-20.44-45.22-49.14-57.75-81-.43-1-.87-2-1.3-3.34-.15-.29-.15-.59-.29-.87-3.15-8.5-8.71-23.87-14.15-40.42l-13.49,13.32v0c-36.13,36-74.8,68.88-118.85,94.53-39.47,23-82.25,38-127.63,43.63-54.59,6.81-108.45,4.63-159.16-20.3-65.11-31.89-101.69-84.21-107-157.28-4.19-56.68,10.8-109.31,36.86-158.74C185.45,382.39,243.49,320.92,317.38,275c46.39-28.85,97.24-44.79,151.82-49.43,42.78-3.62,82.68,4.2,118.4,28.41,30.25,20.58,51.14,49,66.55,81.9,4.16,9,7.9,18.17,12.1,28l2.36,5.45-6.49,10.34c.74.11,1.46.23,2.2.36v0a114.93,114.93,0,0,0-20-1.78,113.77,113.77,0,0,0-77.78,30.62c-7.31-26-15.92-51.35-29.61-74.91-9.64-16.67-21.89-31.31-39.31-40.29-22.76-11.74-46.1-9.57-69.29-2.18-32.85,10.58-58.05,32.47-79.94,58-48.4,56.4-84.84,119.89-105.58,191.66-11.24,38.7-15.28,78.42-7.21,118.57,9.22,45.24,40,72.34,83,72.2a116.8,116.8,0,0,0,43.94-8.41C399.34,709,430,685.08,458.84,658.25c33.88-31.5,62.63-67,89.26-104.38a114.13,114.13,0,0,0,181.32,14.58c7.52,19,15.32,48.14,22.69,70.81v.14c2,6.38,4,12.18,6,17.11,8.36,20.87,17.15,41.47,33.86,57l3.45,3c21.74,18.12,47.82,22.91,75.06,23.78C885.2,741,899.88,739,916.74,737.7Z"/></svg>\n\t`,label:"AlphaWallet"};const statusWallet={imgBig:`\n\t\t<?xml version="1.0" encoding="UTF-8"?><svg id="a" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 150 150"><defs><style>.b{fill:none;}.c{fill:#4360df;fill-rule:evenodd;}</style></defs><path class="b" d="M0,0H150V150H0V0Z"/><path class="c" d="M75.01,11.35C39.32,11.35,10.42,40.28,10.42,76s28.91,64.65,64.59,64.65,64.56-28.93,64.56-64.65S110.67,11.35,75.01,11.35Zm-8.73,92.32c-8.25,.46-16.49-4.31-16.92-12.04-.46-7.61,5.75-12.7,15.98-13.25,9.05-.46,16.41,2.15,25.4,.06-1.09,13.07-11,24.51-24.45,25.23Zm10.89-30.51c-4.86-.57-11.06-.92-16.35,.37,1.18-14.25,11.61-26.72,25.83-27.53,8.71-.46,17.41,4.74,17.87,13.16,.86,13.45-15.72,15.92-27.35,13.99Z"/></svg>\n\t`,label:"Status Wallet"};const trustWallet={imgBig:`\n\t<svg width="65" height="64" viewBox="0 0 65 64" fill="none" xmlns="http://www.w3.org/2000/svg">\n\t<g clip-path="url(#clip0)">\n\t<path d="M32.3999 64C50.073 64 64.3999 49.6731 64.3999 32C64.3999 14.3269 50.073 0 32.3999 0C14.7268 0 0.399902 14.3269 0.399902 32C0.399902 49.6731 14.7268 64 32.3999 64Z" fill="#3375BB"/>\n\t<path d="M32.6267 14C38.9508 19.2816 46.2029 18.9559 48.275 18.9559C47.8217 48.9937 44.3683 43.0373 32.6267 51.46C20.8851 43.0373 17.4533 48.9937 17 18.9559C19.0505 18.9559 26.3026 19.2816 32.6267 14Z" stroke="white" stroke-width="4" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>\n\t</g>\n\t<defs>\n\t<clipPath id="clip0">\n\t<rect width="64" height="64" fill="white" transform="translate(0.399902)"/>\n\t</clipPath>\n\t</defs>\n\t</svg>\n\t`,label:"Trust Wallet"};const ethereumWallet={imgBig:`\n\t<svg class="svg-icon" style="width: 64px; height: 64px; vertical-align: middle;fill: currentColor;overflow: hidden;" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M511.996 81.86C274.448 81.86 81.86 274.444 81.86 512s192.588 430.144 430.136 430.144c237.566 0 430.15-192.588 430.15-430.144S749.562 81.86 511.996 81.86z" fill="#EDF3FC" /><path d="M511.996 2C230.782 2 2 230.786 2 512s228.782 510 509.996 510C793.214 1022 1022 793.214 1022 512S793.214 2 511.996 2z m0 1003.662C239.792 1005.662 18.338 784.204 18.338 512S239.792 18.338 511.996 18.338c272.208 0 493.666 221.458 493.666 493.662S784.204 1005.662 511.996 1005.662z" fill="#EDF3FC" /><path d="M354.6 290.83a57.74 57.74 0 0 1-41.964-41.96l-0.884-3.526-0.88 3.526a57.754 57.754 0 0 1-41.964 41.96l-3.53 0.888 3.53 0.884a57.748 57.748 0 0 1 41.964 41.96l0.88 3.526 0.884-3.526a57.736 57.736 0 0 1 41.964-41.96l3.53-0.884-3.53-0.888zM736.15 311.786a43.428 43.428 0 0 1-31.586-31.58l-0.662-2.654-0.672 2.654a43.42 43.42 0 0 1-31.582 31.58l-2.646 0.666 2.646 0.662a43.416 43.416 0 0 1 31.582 31.586l0.672 2.646 0.662-2.646a43.428 43.428 0 0 1 31.586-31.586l2.646-0.662-2.646-0.666zM606.77 186.066a68.648 68.648 0 0 1-49.896-49.892l-1.042-4.19-1.062 4.19a68.614 68.614 0 0 1-49.882 49.892l-4.184 1.052 4.184 1.05a68.586 68.586 0 0 1 49.882 49.89l1.062 4.188 1.042-4.188a68.62 68.62 0 0 1 49.896-49.89l4.194-1.05-4.194-1.052z" fill="#5D8EF9" /><path d="M343.612 415.036c0-11.48 1.216-22.676 3.494-33.48h-36.042c-27.372 0-49.622 21.858-50.282 49.058 0.3 2.17 3.184 18.5 23.052 28.882 13.252 6.93 34.736 6.85 44.884 6.85h23.262a161.25 161.25 0 0 1-8.368-51.31zM691.51 381.558h-28.202a162.244 162.244 0 0 1 3.492 33.48 161.3 161.3 0 0 1-8.368 51.314h54.508a50.072 50.072 0 0 1 28.868 9.114v-43.61c0-27.776-22.516-50.298-50.298-50.298z" fill="#6857E5" /><path d="M505.208 253.438c-89.248 0-161.596 72.35-161.596 161.598a161.3 161.3 0 0 0 8.368 51.314h306.454a161.348 161.348 0 0 0 8.368-51.314c-0.002-89.248-72.348-161.598-161.594-161.598z" fill="#5D8EF9" /><path d="M505.208 293.74c-66.992 0-121.302 54.304-121.302 121.296a120.8 120.8 0 0 0 11.386 51.314H615.12a120.794 120.794 0 0 0 11.384-51.314c0-66.992-54.304-121.296-121.296-121.296z" fill="#8AC9F9" /><path d="M505.208 333.488l-49.746 75.89 49.746 36.672 49.742-36.664z" fill="#FFFFFF" /><path d="M505.208 458.548l-49.746-39.182 30.272 46.984h38.944l30.272-46.984z" fill="#FFFFFF" /><path d="M712.942 466.35H328.716c-10.15 0-31.632 0.08-44.884-6.85-21.316-11.14-23.084-29.13-23.084-29.13V762.02c0 27.782 22.526 50.304 50.312 50.304h401.88c27.788 0 50.3-22.522 50.3-50.304V516.642c0.002-27.782-22.512-50.292-50.298-50.292z" fill="#8C7BFD" /><path d="M627.34 585.212c-12.446 0-22.542 10.092-22.542 22.542v62.03c0 12.454 10.098 22.544 22.542 22.544h135.902v-107.116H627.34z" fill="#8AC9F9" /><path d="M648.506 616.402c-12.354 0-22.37 10.012-22.37 22.37 0 12.354 10.016 22.374 22.37 22.374 12.354 0 22.366-10.02 22.366-22.374-0.002-12.358-10.012-22.37-22.366-22.37z" fill="#FFE37B" /></svg>\n\t`,label:"Embedded Wallet"};const braveWallet={imgBig:`\n\t\t<?xml version="1.0" encoding="UTF-8"?>\n\t\t<svg width="218px" height="256px" viewBox="0 0 218 256" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n\t\t\t\x3c!-- Generator: Sketch 51.2 (57519) - http://www.bohemiancoding.com/sketch --\x3e\n\t\t\t<title>build-icons/Stable Copy 3</title>\n\t\t\t<desc>Created with Sketch.</desc>\n\t\t\t<defs>\n\t\t\t\t<linearGradient x1="0%" y1="50.7055163%" x2="100%" y2="50.7055163%" id="linearGradient-1">\n\t\t\t\t\t<stop stop-color="#FF5500" offset="0%"></stop>\n\t\t\t\t\t<stop stop-color="#FF5500" offset="40.9877232%"></stop>\n\t\t\t\t\t<stop stop-color="#FF2000" offset="58.1981215%"></stop>\n\t\t\t\t\t<stop stop-color="#FF2000" offset="100%"></stop>\n\t\t\t\t</linearGradient>\n\t\t\t\t<linearGradient x1="2.1484375%" y1="50.7055163%" x2="100%" y2="50.7055163%" id="linearGradient-2">\n\t\t\t\t\t<stop stop-color="#FF452A" offset="0%"></stop>\n\t\t\t\t\t<stop stop-color="#FF2000" offset="100%"></stop>\n\t\t\t\t</linearGradient>\n\t\t\t\t<path d="M170.272109,25.3359387 L147.968109,0.00010893617 L108.800109,0.00010893617 L69.6321088,0.00010893617 L47.3281088,25.3359387 C47.3281088,25.3359387 27.7441088,19.8891302 18.4961088,29.1487047 C18.4961088,29.1487047 44.6081088,26.7886026 53.5841088,41.4040238 C53.5841088,41.4040238 77.7921088,46.0338111 81.0561088,46.0338111 C84.3201088,46.0338111 91.3921088,43.3104068 97.9201088,41.1316834 C104.448109,38.95296 108.800109,38.9371643 108.800109,38.9371643 C108.800109,38.9371643 113.152109,38.95296 119.680109,41.1316834 C126.208109,43.3104068 133.280109,46.0338111 136.544109,46.0338111 C139.808109,46.0338111 164.016109,41.4040238 164.016109,41.4040238 C172.992109,26.7886026 199.104109,29.1487047 199.104109,29.1487047 C189.856109,19.8891302 170.272109,25.3359387 170.272109,25.3359387" id="path-3"></path>\n\t\t\t</defs>\n\t\t\t<g id="starting-collection" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n\t\t\t\t<g id="Build-Icons" transform="translate(-70.000000, -350.000000)">\n\t\t\t\t\t<g id="build-icons/Stable" transform="translate(50.000000, 350.000000)">\n\t\t\t\t\t\t<g id="Logo" transform="translate(20.114286, 0.000000)">\n\t\t\t\t\t\t\t<path d="M209.984109,61.2848749 L215.968109,46.5784919 C215.968109,46.5784919 208.352109,38.4082791 199.104109,29.1487047 C189.856109,19.8891302 170.272109,25.3359387 170.272109,25.3359387 L147.968109,0.00010893617 L108.800109,0.00010893617 L69.6321088,0.00010893617 L47.3281088,25.3359387 C47.3281088,25.3359387 27.7441088,19.8891302 18.4961088,29.1487047 C9.2481088,38.4082791 1.6321088,46.5784919 1.6321088,46.5784919 L7.6161088,61.2848749 L0.0001088,83.0721089 C0.0001088,83.0721089 22.3993088,168.017811 25.0241088,178.391258 C30.1921088,198.81679 33.7281088,206.714662 48.4161088,217.063598 C63.1041088,227.412534 89.7601088,245.387003 94.1121088,248.110407 C98.4641088,250.833811 103.904109,255.472858 108.800109,255.472858 C113.696109,255.472858 119.136109,250.833811 123.488109,248.110407 C127.840109,245.387003 154.496109,227.412534 169.184109,217.063598 C183.872109,206.714662 187.408109,198.81679 192.576109,178.391258 C195.200365,168.017811 217.600109,83.0721089 217.600109,83.0721089 L209.984109,61.2848749 Z" id="Head" fill="url(#linearGradient-1)"></path>\n\t\t\t\t\t\t\t<path d="M164.016109,41.4040238 C164.016109,41.4040238 192.704493,76.1274281 192.704493,83.5487047 C192.704493,90.9699813 189.095597,92.9286536 185.467117,96.7866281 C181.838637,100.644603 165.991373,117.49376 163.956269,119.657232 C161.921165,121.821249 157.684493,125.101862 160.176557,131.006747 C162.668621,136.911632 166.344973,144.425505 162.256813,152.046679 C158.168109,159.667854 151.164109,164.754628 146.676109,163.913641 C142.188109,163.072109 131.648109,157.557215 127.772109,155.038066 C123.896109,152.518917 111.611501,142.374781 111.611501,138.493386 C111.611501,134.612534 124.310093,127.643888 126.655821,126.0605 C129.002637,124.477658 139.703117,118.349454 139.922349,115.944143 C140.141037,113.538288 140.057805,112.832926 136.899885,106.889369 C133.741965,100.945266 128.054989,93.0136238 129.001549,87.7362111 C129.948109,82.459343 139.119949,79.7152409 145.665357,77.2402111 C152.209677,74.765726 164.811437,70.0918196 166.385229,69.3652153 C167.960109,68.6380664 167.553197,67.945777 162.783949,67.4931472 C158.015789,67.0405174 144.483245,65.2419813 138.382285,66.9446536 C132.281325,68.647326 121.858285,71.2378281 121.013997,72.6115132 C120.169709,73.9851983 119.424973,74.0314962 120.292109,78.7702196 C121.158701,83.508943 125.622765,106.24719 126.055789,110.285998 C126.489357,114.324807 127.336909,116.994832 122.987629,117.990509 C118.637805,118.986186 111.316109,120.715003 108.800109,120.715003 C106.284109,120.715003 98.9618688,118.986186 94.6125888,117.990509 C90.2627648,116.994832 91.1103168,114.324807 91.5438848,110.285998 C91.9774528,106.24719 96.4409728,83.508943 97.3081088,78.7702196 C98.1747008,74.0314962 97.4299648,73.9851983 96.5862208,72.6115132 C95.7419328,71.2378281 85.3183488,68.647326 79.2173888,66.9446536 C73.1164288,65.2419813 59.5844288,67.0405174 54.8157248,67.4931472 C50.0470208,67.945777 49.6401088,68.6380664 51.2144448,69.3652153 C52.7887808,70.0918196 65.3905408,74.765726 71.9348608,77.2402111 C78.4797248,79.7152409 87.6521088,82.459343 88.5986688,87.7362111 C89.5452288,93.0136238 83.8577088,100.945266 80.7003328,106.889369 C77.5424128,112.832926 77.4586368,113.538288 77.6778688,115.944143 C77.8965568,118.349454 88.5975808,124.477658 90.9438528,126.0605 C93.2901248,127.643888 105.988173,134.612534 105.988173,138.493386 C105.988173,142.374781 93.7041088,152.518917 89.8281088,155.038066 C85.9521088,157.557215 75.4121088,163.072109 70.9241088,163.913641 C66.4361088,164.754628 59.4321088,159.667854 55.3434048,152.046679 C51.2552448,144.425505 54.9315968,136.911632 57.4231168,131.006747 C59.9151808,125.101862 55.6790528,121.821249 53.6434048,119.657232 C51.6088448,117.49376 35.7610368,100.644603 32.1325568,96.7866281 C28.5040768,92.9286536 24.8957248,90.9699813 24.8957248,83.5487047 C24.8957248,76.1274281 53.5841088,41.4040238 53.5841088,41.4040238 C53.5841088,41.4040238 77.7921088,46.0338111 81.0561088,46.0338111 C84.3201088,46.0338111 91.3921088,43.3104068 97.9201088,41.1316834 C104.448109,38.95296 108.800109,38.9371643 108.800109,38.9371643 C108.800109,38.9371643 113.152109,38.95296 119.680109,41.1316834 C126.208109,43.3104068 133.280109,46.0338111 136.544109,46.0338111 C139.808109,46.0338111 164.016109,41.4040238 164.016109,41.4040238 Z M142.509504,174.227935 C144.28512,175.341263 143.202016,177.439918 141.584704,178.584837 C139.966848,179.729757 118.228064,196.584361 116.118432,198.447169 C114.008256,200.310523 110.908,203.387425 108.8,203.387425 C106.692,203.387425 103.5912,200.310523 101.481568,198.447169 C99.371392,196.584361 77.633152,179.729757 76.015296,178.584837 C74.39744,177.439918 73.31488,175.341263 75.090496,174.227935 C76.866656,173.115152 82.422528,170.306233 90.08912,166.333876 C97.754624,162.362063 107.308896,158.985042 108.8,158.985042 C110.291104,158.985042 119.844832,162.362063 127.511424,166.333876 C135.177472,170.306233 140.733344,173.115152 142.509504,174.227935 Z" id="Face" fill="#FFFFFF"></path>\n\t\t\t\t\t\t\t<mask id="mask-4" fill="white">\n\t\t\t\t\t\t\t\t<use xlink:href="#path-3"></use>\n\t\t\t\t\t\t\t</mask>\n\t\t\t\t\t\t\t<use id="Top-Head" fill="url(#linearGradient-2)" xlink:href="#path-3"></use>\n\t\t\t\t\t\t</g>\n\t\t\t\t\t</g>\n\t\t\t\t</g>\n\t\t\t</g>\n\t\t</svg>\n\t`,label:"Brave"};const mew={imgBig:`\n\t\t<img src='data:image/webp;base64,UklGRtQGAABXRUJQVlA4TMgGAAAvP8APENVQwv7/kCP91rZx4s22bdsn27Ztx93h2LZt27Y9VZup6j3trQa9yX/U3ziD2Ol8gx1bjm1ry57s36q4zS0rrye4dk6ZEiqH0m0EVvEzAHeHyt1VgiRJctskbmCBboT8/5eekCoKAAFGtr1Fs5pxy/gFJ3+C2uqybXR7Szz7ku27NwHWv9dCgzAibAtXwmvhjfDWlbSgKDvX7XBCqjAjwKcohXpojTZoi7ykiLTYIkCYSXYoYRQfoRdmYA6Xh2ONAwn3T8YA0EB36hKHEZ4/Cho8P8xBhMXrQMMXuxxCqMBYGLcMmY4g3AsCTdyQ6ABCHqYhNJMwES6Xa2VoIiHkmyQ0CV8ADIHeSPjgFOBvC5ak67kBLBOaTViFeliZHgAMguZP4A00xmBMgMvlcs2NypyHLZq+QDGMwso0pBon/EhjV0wFffEoSD6CvTAMDPWmbatI3osQ0BnHNOGbYUIqIsciyUU3SA/sCs7xLognMRB0JS2bDAjxRgmV4BBEkP0gYBGGYs7yUUT0BhmRTAjlRgm54Dj0B5l2DWjHK6CBi+fzVtQBmZBFCEVGWcIHG0gSlcBL0BBGLPqPlQGSTBG+W4YLOXgMrvLAKhLu6fgSV6EsQrMtNjPJDfIhoBxczwBCiXGWECoMCoeoDdKJSfgQABqB852kcz7jAWxaCSdZGxAOhREh0jJVCEMkORlIOhwAtswAOoPcDG4BcDiSkDsDjMQKy2yMAkmMgQcAdAJLAvVRCMUCAPGLQbIIlnndoekGLs9sB5I1cQ2KkkluyFzODM3/DiBcVgfJl1ECNHDzNpLOWPOEkbdAshFgBOJJJuSaF40pIIly0BmNLmiFBQu36iwGyXWINs8SHhYDyV5Ac3AMAjofmQK6y5Yu5gosJ5nithxQqME4kGwPPNdFcP7w9PGOm8/KCIkRHGNj+KaMQjzXRRBGMgtpjmAJ87eAZPqpo/8cf+Pw+/pHcKqAEv417C2UUnkITrWgKDed5Eph3nJIoVHwODgAeOzgJdy/hlLKFsIvxkpLKZUXHgE3E7HcEYRg4RyuB3AD8MKeISSWUsqewmOxAjc8qpwfqlwYAjc//lp6+eSyl1AqJNYmZG2pDAjnS0wT0oT/r2AqSNx96hQSSyllT5Ew8ceEJCf8mDS7cVhlC6GUKxKkc7HwX0gzSQjHbyDZGAgoobTepbo+X2nIsd8n9oWwhVAKgkySMVhojvDoPZDkwXO/vbl8C8yhk+ZVa9q/iQ4n/5n4prKFUqvmhZNk1ApThIHdQZK9OiCghFJh9hRKKd9UtYaX9g83re/thn+ckeTAtwuPxZdSECwgyd2QYwbaQRPc4crzl6BU9hZhQcvhXWqDLYRSKxMS/lzxqn35RJJljg5+sVTi8kJNOwhMEPqvArXP9z8v7r6tUj45Oj7dcEPAurCFUFrP9mpy9UCyy4uNdym1KvP5wUfDWKHfOOGuGnTOHvnn8y2P4FSrvEsNfr8g6VXLXsKewzeVZ6u/lsr9/aYfM/5BDvs027Aqb2OEzrp84wRDoLPLzB93nL3cc3J47ODw/aYY/2VGTv4z+WvptSit2bXDhB8T6m76YWM9fmBYcPu5y67Tf+gkw7BoUFsPeLlHQJf3+yDo/4Skx2LZY9hz+KZaVe700PfVQlPyL3in/wnoft7oflADGiLaKKFKJxtdQXIU0ARk46sHr/qyt1Aq3auWLUTbh7sZf2jT+WAEZoDsCXSDjtMooVTnVfiCnFsZtwKngWS5czePxZdProR1yhYixhZepzxZ4HpUxHiQwXgSOkKpUUISJoMkOoL0w0WogXHAAJDs+3rV5Nqhxa1dwjrlX+O3dQ+MRS1cjd8xA+wOkMyFkGSUJfxtB5KXoyGobQX4daDuWu9SKjDHU3svMk0LUNsMx4FkOwh/LMOFsZdBMgRPg2RdAF8DU39MdBi4I2whglPs++HyZQcBqoPk67CB5LZE44QYdAA5HMglY3uCQwG/+Gr7YDP1N5q+L1fepYJTYQDYG8NATgMGg4zGOuMsoRV9QF6IyqC2RgfxS9B8+eT6a+lV8vCj1pVL7eGp5JGHVy17i6BURz0eKnWgtiaOBLkGQqtlpjAAP0xFZ2ATyVHAh7uGgBJK2UL4prJsIZTCJ9tvguEgORJoB2c2coQAc4US4QrbjgF+QnX8DsB7ZQSnCChhb6GLdO7wdyH4Bc5fgf2wDUUFlulCptAtTAo7wplwFCPUC2u4+8zpq203/xrBqRIT8/xrFGRgs1AjjC8KL4wRuhMsRxayhAng6Eeryy9tktYBmXHWP1XIFVqErpSIDOvfbQ=='/>\n\t`,label:"MEW"};const okx={imgBig:`\n\t\t<?xml version="1.0" encoding="UTF-8"?>\n\t\t<svg xmlns:xodm="http://www.corel.com/coreldraw/odm/2003" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Layer_1" x="0px" y="0px" viewBox="0 0 2500 2500" style="enable-background:new 0 0 2500 2500;" xml:space="preserve" width="65" height="64">\n\t\t<style type="text/css">\n\t\t\t.st0{fill:none;}\n\t\t</style>\n\t\t<g id="Layer_x0020_1">\n\t\t\t<g id="_2187289728928">\n\t\t\t\t<rect y="0" class="st0" width="2500" height="2500"></rect>\n\t\t\t\t<g>\n\t\t\t\t\t<path d="M1464.3,1015.3h-405.2c-17.2,0-31.3,14.1-31.3,31.3v405.2c0,17.2,14.1,31.3,31.3,31.3h405.2c17.2,0,31.3-14.1,31.3-31.3     v-405.2C1495.6,1029.4,1481.5,1015.3,1464.3,1015.3z"></path>\n\t\t\t\t\t<path d="M996.6,549.1H591.4c-17.2,0-31.3,14.1-31.3,31.3v405.2c0,17.2,14.1,31.3,31.3,31.3h405.2c17.2,0,31.3-14.1,31.3-31.3     V580.4C1027.8,563.2,1013.8,549.1,996.6,549.1z"></path>\n\t\t\t\t\t<path d="M1930.5,549.1h-405.2c-17.2,0-31.3,14.1-31.3,31.3v405.2c0,17.2,14.1,31.3,31.3,31.3h405.2c17.2,0,31.3-14.1,31.3-31.3     V580.4C1961.8,563.2,1947.7,549.1,1930.5,549.1z"></path>\n\t\t\t\t\t<path d="M996.6,1481.5H591.4c-17.2,0-31.3,14.1-31.3,31.3V1918c0,17.2,14.1,31.3,31.3,31.3h405.2c17.2,0,31.3-14.1,31.3-31.3     v-405.2C1027.8,1495.6,1013.8,1481.5,996.6,1481.5z"></path>\n\t\t\t\t\t<path d="M1930.5,1481.5h-405.2c-17.2,0-31.3,14.1-31.3,31.3V1918c0,17.2,14.1,31.3,31.3,31.3h405.2c17.2,0,31.3-14.1,31.3-31.3     v-405.2C1961.8,1495.6,1947.7,1481.5,1930.5,1481.5z"></path>\n\t\t\t\t</g>\n\t\t\t</g>\n\t\t</g>\n\t\t</svg>\n\t`,label:"OKX Wallet"};function getWalletInfo(e){switch(e){case SupportedWalletProviders.MetaMask:return getEvmInjectedProviderInfo();case SupportedWalletProviders.WalletConnect:return{name:e,label:"WalletConnect",imgBig:walletConnectSVG};case SupportedWalletProviders.WalletConnectV2:return{name:e,label:"WalletConnect V2",imgBig:walletConnectV2SVG};case SupportedWalletProviders.Torus:return{name:e,label:"Torus",imgBig:torusSVG}}}function getEvmInjectedProviderInfo(){const e=getBrowserData();let t=ethereumWallet;if(e.brave)t=braveWallet;if(e.anyMetamask)t=metaMask;if(e.mew)t=mew;if(e.trust)t=trustWallet;if(e.status)t=statusWallet;if(e.alphaWallet)t=alphaWallet;if(e.imToken)t=imToken;if(e.okx)t=okx;return Object.assign({name:SupportedWalletProviders.MetaMask},t)}const walletButtonCss=".btn-container{position:relative;display:inline-block}.btn-dropdown{position:absolute;width:100%;display:flex;flex-direction:column;background-color:#EEEEEE;top:40px;border-radius:10px;padding:5px;z-index:10}.chevron::before{border-style:solid;border-width:2px 2px 0 0;content:'';display:inline-block;height:0.45em;left:0.15em;position:relative;top:0.15em;transform:rotate(135deg);vertical-align:top;width:0.45em;border-color:#000;margin:0 10px}.btn-dropdown button{display:block;height:34px;border:none;border-radius:10px;font-size:14px;cursor:pointer}.wallet-connect-btn{display:flex;align-items:center;justify-content:center;min-width:140px}.btn-connected{background:#EEEEEE}.btn-connected:hover,.btn-dropdown button:hover{background:linear-gradient(0deg, #CECECE, #CECECE), #DDDDDD}.status-dot{border-radius:50%;background:#3DBD00;width:8px;height:8px;margin:5px}";const WalletButtonStyle0=walletButtonCss;const WalletButton=class{constructor(e){registerInstance(this,e);this.walletInfo=undefined;this.dropdownOpened=false}async connectedCallback(){const e=await Web3WalletProvider.getWallet();await this.updateWalletConnectionState(e);Web3WalletProvider.registerWalletChangeListener(this.updateWalletConnectionState.bind(this));document.addEventListener("click",this.dismissClickHandler.bind(this))}async disconnectedCallback(){Web3WalletProvider.removeWalletChangeListener(this.updateWalletConnectionState.bind(this));document.removeEventListener("click",this.dismissClickHandler.bind(this))}dismissClickHandler(e){this.dropdownOpened=false}async updateWalletConnectionState(e){if(!e){this.walletInfo=null;return}this.walletInfo=Object.assign(Object.assign({},e),getWalletInfo(e.providerType))}formatWalletAddress(e){return e.substring(0,4)+"..."+e.substring(e.length-4)}render(){return h$1("div",{key:"4dc258f7fc6bae67edbed8aeb867edec65cbabe3",class:"btn-container",onClick:e=>e.stopPropagation()},h$1("button",{key:"8db5674caf4001c76bd5f7231914a0fb1d8ead2d",class:"btn wallet-connect-btn "+(this.walletInfo?"btn-connected":"btn-primary"),onClick:()=>{if(this.walletInfo){this.dropdownOpened=!this.dropdownOpened}else{Web3WalletProvider.getWallet(true)}}},this.walletInfo?[h$1("div",{class:"status-dot"}),h$1("div",{title:this.walletInfo.providerType+": "+this.walletInfo.address},this.formatWalletAddress(this.walletInfo.address)),h$1("div",{class:"chevron"})]:"Connect Wallet"),this.dropdownOpened?h$1("div",{class:"btn-dropdown"},h$1("button",{onClick:()=>{this.dropdownOpened=false;Web3WalletProvider.disconnectWallet()}},"Disconnect"),h$1("button",{onClick:()=>{this.dropdownOpened=false;Web3WalletProvider.switchWallet()}},"Switch")):"")}};WalletButton.style=WalletButtonStyle0;const walletSelectorCss=".wallet-btn{width:100%;display:flex;margin:10px 0;height:60px !important;align-items:center}.wallet-name{text-align:center;font-weight:bold;font-size:14px;position:absolute;width:99%}.wallet-icon{display:flex;align-items:center;padding:10px}.wallet-icon svg,.wallet-icon img{height:40px;width:auto}";const WalletSelectorStyle0=walletSelectorCss;const WalletSelector=class{constructor(e){registerInstance(this,e);this.providerList=undefined}async connectWallet(){this.dialog.openDialog((()=>{this.closeCallback("Wallet connection aborted.")}));return new Promise(((e,t)=>{this.selectCallback=e;this.closeCallback=t}))}componentWillLoad(){const e=[];if(typeof window.ethereum!=="undefined"){e.push(getWalletInfo(SupportedWalletProviders.MetaMask))}e.push(getWalletInfo(SupportedWalletProviders.WalletConnectV2));e.push(getWalletInfo(SupportedWalletProviders.Torus));this.providerList=e}componentDidLoad(){}render(){return h$1("popover-dialog",{key:"de647f20e9076f185614fb7d935fd22211130c08",ref:e=>this.dialog=e},h$1("h4",{key:"e439a9e2558f3e19ccdad298837306a9685e0a06"},"Select Wallet"),h$1("p",{key:"58daec46b4cad8c83af35f7cb8ffcae0665340e8"},"You need to connect your wallet to get access to your tokens."),this.providerList.map((e=>h$1("button",{class:"btn wallet-btn",onClick:()=>{this.selectCallback(e.name);this.dialog.closeDialog()}},h$1("div",{class:"wallet-icon",innerHTML:e.imgBig}),h$1("div",{class:"wallet-name"},e.label)))))}};WalletSelector.style=WalletSelectorStyle0;export{AttributeTable$1 as A,TokenSecurityStatus as B,CardModal as C,TokenViewer as D,TokensGrid as E,TokensGridItem as F,TokenscriptButton as G,TokenscriptGrid as H,InputField as I,TransferDialog as J,ViewerPopover as K,LoadingSpinner as L,ViewerTab as M,NewViewer as N,OpenseaViewer as O,PopoverDialog as P,WalletSelector as Q,SmartTokenStoreViewer$1 as S,TabbedViewer as T,ViewStep as V,WalletButton as W,global$1 as a,buffer as b,commonjsGlobal as c,commonjsRequire as d,getDefaultExportFromCjs as e,ActionBar as f,getAugmentedNamespace as g,ActionOverflowModal as h,AddSelector as i,AppRoot as j,AttributeTable as k,CardPopover as l,CardView as m,CbToast as n,CbToastcontent as o,ConfirmStep as p,IntegrationViewer as q,SecurityStatus as r,SelectField as s,SelectStep as t,StartTab$1 as u,SmartTokenStoreViewer as v,StartTab as w,TokenButton as x,TokenIcon as y,TokenInfoPopover as z};
//# sourceMappingURL=p-4454aa4b.js.map